Page1基于指数上鞅的统计端到端时延分析韩悦1),2)刘增基1)姚明1)(西安电子科技大学ISN国家重点实验室西安710071)2)(西安通信学院军事电子工程系西安710106)摘要借助有效的端到端时延分析可实现大规模网络的QoS控制,运用统计网络演算理论中最小加代数的卷积运算规则计算端到端时延界日益引起人们的重视.随着网络规模的不断扩大,统计端到端时延界应同时具有良好的可扩展性和一定的紧致性,而目前满足这一要求的理论成果还比较少.通过结合最小加代数的卷积运算规则和Doob不等式,并采用矩母函数(MomentGeneratingFunction,MGF)对到达曲线和服务曲线进行描述,文中给出了一种基于指数上鞅的端到端时延界表达式.该时延界不仅可以线性扩展,而且数值分析结果表明,在相同假设条件下,该时延界比现有的线性时延界具有更好的紧致性.关键词统计网络演算;端到端时延;Doob不等式;上鞅1引言良好势头,用户业务需求持续增长,网络规模不断扩大,用户对网络服务质量的要求越来越高.为了更好地在大规模网络中实现接纳控制、拥塞控制、流量控制、QoS路由、资源调度和流量工程等功能,端到端近年来,计算机网络技术仍呈现出快速发展的Page2时延性能分析成为研究的重点,其中,端到端时延界的计算是主要研究方向.进行计算机网络端到端时延性能分析的经典方法是排队论.但是,排队论方法对业务的流量特性、节点的服务特性、节点间的相关性等进行了较严格的假设,当网络规模较大时,存在分析难度大、计算复杂、分析结果不准确等缺点.因此,Cruz[1]于1991年提出了确定网络演算理论并将该理论用于分析网络最差情况下的时延性能.确定网络演算理论建立在最小加代数的数学基础上,可以看作是系统理论在计算机网络中的应用.该理论对研究计算机网络端到端时延性能具有深远的意义,其优势在于对业务的流量特性描述比较简单、对网络的服务特性描述较为通用、调度算法的适用范围较宽以及网络性能边界简单易用等.由于根据最差情况对端到端时延进行分析,确定网络演算理论没有考虑统计复用所带来的增益,从而对实际的网络资源需求估计过高,得到的时延分析结果过于保守.因此,Ciucu等人[2]于2005年提出了统计网络演算理论.作为确定网络演算的统计性扩展,统计网络演算保持了确定网络演算的理论框架,采用概率边界描述业务流的到达和所得到的服务,允许部分业务流违背业务流的描述或服务保证,从而可以显著地提高网络资源利用率.本文利用统计网络演算理论对端到端时延界的可扩展性和紧致性进行了分析,可以线性扩展的端到端时延界有利于在网络规模扩大时保持良好的可扩展性,而紧致的时延界可以更充分利用网络资源.目前,同时符合这两方面要求的理论成果还比较少.本文结合Doob不等式给出了一种基于指数上鞅的端到端时延界表达式,该时延界在保持线性扩展的同时提高了紧致性.本文第2节给出统计网络演算理论的相关概念,介绍利用统计网络演算理论进行时延性能分析的研究现状和需要解决的关键问题;第3节结合Doob不等式,提出基于指数上鞅的端到端时延界表达式,并对其可扩展性和紧致性进行分析;第4节通过数值计算给出量化的分析结果,证明所给出时延界的有效性;最后,对本文进行总结.2统计网络演算2.1理论基础确定网络演算利用最小加代数中卷积运算的串联特性可以方便地得到端到端时延界表达式,然而该方法对网络资源需求的估计过于保守,容易造成得到的端到端时延界过松,从而在大规模网络中难以得到有效应用.考虑到利用统计复用增益可以有效地提高网络资源利用率,统计网络演算更适用于目前大规模网络的端到端时延分析.在统计网络演算中,对时延的分析是通过下式表示的[3].其中,x表示时延界,ε表示违背时延界的概率.一般情况下,ε的取值较小,例如:ε=10-6.统计网络演算和确定网络演算的理论框架基本一致,其研究工作仍然围绕到达曲线和服务曲线两个基本概念展开.对统计到达曲线的研究开展得比较早,Chang[4]于1994年运用矩母函数(MomentGeneratingFunction,MGF)对Cruz的(σ,ρ)到达曲线进行了扩展,提出了(σ(θ),ρ(θ))到达曲线.近年来,Ciucu[5]提出将统计到达曲线分成随机过程和非随机函数两类.关于随机过程类统计到达曲线,Jiang[6]于2006年在SIGCOMM上提出了基于最大(虚拟)积压业务中心的统计到达曲线;关于非随机函数类统计到达曲线,最早的研究源于对指数界突发(ExponentiallyBoundedBurstiness,EBB)到达曲线的研究.一个通用的到达曲线A(t)的表达式如下所示[3]:其中,E(t)为A(t)的统计封装,t,τ满足tτ0.式(2)适用于一些重要的到达曲线,如上文所述的(σ(θ),ρ(θ))到达曲线和EBB到达曲线均可用式(2)进行描述.从式(2)可以看出,E(t)对于A(t)的表示至关重要,一种常用的获取E(t)的方法是通过计算A(t)的MGF得到[7],如下所示:这种基于MGF的方法同样适用于一些重要的到达曲线,如:漏桶到达曲线、On-off到达曲线和FBM到达曲线等,但不适用于重尾(Heavy-Tailed)分布的到达曲线.随着对统计到达曲线研究的深入,Liebeherr[8]于今年发表了关于重尾分布到达曲线相关研究的文章.和统计到达曲线相比,对统计服务曲线的研究在统计网络演算理论框架中显得更为重要.Burchard等人[9]于2006年就强调了统计服务曲线对于研究端到端时延界的重要意义并给出了两种统计服务曲线表达式,这篇文献对于后来端到端时延的分析具有里程碑式的意义.2010年,Fidler[3]给出了一种通用的统计服务曲线表达式:Page3其中,D(t)表示输出曲线,S(t)表示服务曲线,卷积操作的定义如下所示:式(4)同样适用于多种统计服务曲线,如Li等人[10]给出的统计服务曲线实际上就是式(4)σ=0的情况;将式(4)中的S(t)用[S(t)-σ]+替换就可以得到Ciucu等人[11]给出的统计服务曲线表达式.另外,Fidler[7]提出了用MGF描述统计服务曲线的方法.在网络稳态的情况下,统计服务曲线S(t)的MGF如下所示:其中,τ0.2.2时延界性能分析问题目前,一些网络性能参数,如网络需提供的传输容量、业务流在节点内部的积压特性、保证分组无丢失的缓存容量等,都可以利用统计网络演算理论进行分析,其分析结果用于端到端时延界的计算可以降低时延界的计算难度,提高时延界的计算效率,时延界也更加紧致.利用统计网络演算理论进行网络端到端时延界性能分析已经成为研究的热点[12-14].统计网络演算中时延d(t)的定义如下[9]:在统计服务曲线研究的基础上,早期的时延性能分析主要集中在单节点时延界的计算[6,9,11].但是,在统计网络演算中利用最小加代数理论中卷积运算的串联特性计算端到端时延界并不像在确定网络演算中那样简单,只能通过限定网络环境或满足一定假设条件的方式简化求解过程.对于第1种情况,Schmitt等人[15]提出了适用于Sink-tree网络的端到端时延界表达式;Bouillard等人[16]提出了适用于前馈(feed-forward)网络的端到端时延界表达式.对于第2种情况,Burchard等人[9]提出的时延界要求每一个节点的到达时间和服务时间是相关的,或者每一个节点享受服务的分组长度相等[14].对端到端时延界的性能需要从可扩展性和紧致性两个方面进行分析.对于可扩展性,利用最小加代数理论中卷积运算的串联特性确实可以改善端到端时延界的可扩展性.在确定网络演算中,通过逐节点进行加和的方法得到的端到端时延可扩展性为O(H2),H表示节点数目;而通过最小加代数理论中卷积运算的串联特性得到的端到端时延可扩展性为O(H).在统计网络演算中,通过逐节点进行加和的方法得到的端到端时延可扩展性为O(H3),而通过最小加代数理论中卷积运算的串联特性得到的端到端时延可扩展性为O(HlogH)[14].当前研究的关键问题是能否在统计网络演算中通过最小加代数理论中卷积运算的串联特性得到可扩展性为O(H)的端到端时延界,即达到线性扩展的目的.对于紧致性,端到端时延界的计算误差是由计算端到端时延界时所采用的概率不等式引入的.为了提高端到端时延界的紧致性,在计算端到端时延界时既要采用足够紧的概率不等式,又要尽量减少使用概率不等式的次数.关于端到端时延界可扩展性方面的研究,Fidler[7]于2006年提出了一种线性扩展的端到端时延界,但该方法一方面没有利用最小加代数理论中卷积运算的串联特性,另一方面所使用的Boole不等式和Chernoff不等式不但仅用于单节点时延界的计算,而且这两个不等式本身都不够紧.所以,该时延界的紧致性并不好.关于端到端时延界紧致性方面的研究,Ciucu在统计网络演算中引入Doob不等式对网络端到端的积压特性和输出特性进行了分析.研究结果表明[17],Doob不等式比Boole不等式和Chernoff不等式更紧.本文将根据已有的研究基础,结合最小加代数理论中卷积运算的串联特性和Doob不等式对端到端时延界的性能进行分析.3端到端时延的统计分析本文对统计端到端时延进行分析的基本思路是:在通过MGF对统计到达曲线和统计服务曲线进行描述的基础上首先计算单节点的时延界,再将单节点统计服务曲线用统计网络服务曲线替换,最后运用最小加代数理论中卷积运算的串联特性得到端到端时延界.分析所用的网络拓扑,即端到端的样本路径(samplepath),如图1所示.如图所示,Sh(t)为第h个节点的服务曲线.本文仅在没有考虑背景流的情况下对A(t)的端到端时延进行分析.假设A(t)为漏桶源,其MGF满足下式:其中,r1为到达速率,b为突发强度.Sh(t)的定义如下式所示.其中,σ为调节参数,实际取值通常较小.假设Sh(t)提供持续服务,其MGF满足下式:Page4其中,r2为服务速率,τ为调节参数,实际取值也较小.为了使网络处于稳态,r1,r2应满足r2r1.根据最小加代数理论中卷积运算的串联特性,H个节点的网络服务曲线Snet(t)满足下述定理给出了端到端时延界的闭式表达式.定理1.端到端时延界.在如图1所示的网络拓扑情况下,令S1(t)=S(t).假设A(t)和S(t)统计无关且各自的MGF分别满足式(8)和式(10).假设Sh(t),h=1,…,H,满足式(9)且统计无关,则端到端时延d(t)大于d的概率表示为其中,d即为所求的端到端时延界,其值为证明.根据式(7)给出的d(t)定义,有以下结论[18]:结合式(9),要想P(d(t)>d)ε(σ)成立,需要满足下述条件,即P(A(t-d)>D(t))<P(D(t)<AS(t)+σ)对于式(15)左边,根据D(t)的性质:D(t)>AS(t)可以得到P(A(t-d)>D(t))<P(A(t-d)>AS(t))对于式(15)右边,根据A(t)>D(t)可以得到P(D(t)<AS(t)+σ)>P(A(t)<AS(t)+σ)因此,式(15)成立的条件是P(A(t-d)>AS(t))<P(A(t)<AS(t)+σ)式(18)和下式等效:P(A(t-d)>AS(t))+P(A(t)<AS(t)+σ)<1现在把式(19)左边拆成两部分进行分析.先对第一部分进行分析,P(A(t-d)>AS(t))式(20)第2行使用了卷积操作的定义,第3行使用了指数函数的单调性,最后一行使用了Doob不等式.Doob不等式如下式所示.其中,X0∈Xs.Doob不等式成立的条件是eθXs是指数上鞅.在统计网络演算中,eθXs是指数上鞅的条件是A(t)和S(t)统计无关.由定理1的假设条件可知,式(20)使用Doob不等式是合理的.对于第2部分,参照第1部分的分析过程,可得如下结果P(A(t)<AS(t)+σ)E[eθ(A(t)-S(t))]e-θσ将式(20)和式(22)分别代入式(19),可以得到E[eθ(A(t-d)-S(t))]+E[eθ(A(t)-S(t))]e-θσ<1(23)下面将式(23)中的S(t)用Snet(t)替换,再对式(23)的左边进行分析,E[e-θSnet(t)](E[eθ(A(t-d))]+E[eθ(A(t))]e-θσ)=E[e-θS1S2…SH(t)](E[eθ(A(t-d))]+E[eθ(A(t))]e-θσ)E[sup0<t1<…<tH=te-θ∑h(E[eθ(A(t-d))]+E[eθ(A(t))]e-θσ)=sup0<t1<…<tH=tEe-θS1(t1)Ee-θS2(t2-t1)…Ee-θSh(tH-tH-1)(E[eθ(A(t-d))]+E[eθ(A(t))]e-θσ)sup0<t1<…<tH=te-θr2(t1-τ)e-θr2(t2-t1-τ)e-θr2(tH-tH-1-τ)(E[eθ(A(t-d))]+E[eθ(A(t))]e-θσ)=eθ(b+Hr2τ)e-θ(r2-r1)t(e-r1dθ+e-θσ)eθ(b+Hr2τ)(e-r1dθ+e-θσ)分析中用到了A(t)和S(t)的MGF形式,如式(8)和式(10)所示.分析过程的最后一行用到了e-θ(r2-r1)t1,t0的结论.将分析结果代回式(23),可得根据式(25)可以看出,满足式(25)成立的d即为所求的端到端时延界.这里,引入下述不等式:将式(26)代入式(25),可得将式(27)两边分别取对数,进行整理,可得d>b+Hr2τ+σ将式(28)中的d对θ进行优化即可完成证明.证毕.通过定理1可以看出,给出的端到端时延界不仅可以线性扩展,而且在该时延界的证明过程中利用了最小加代数理论中卷积运算的串联特性和Doob不等式,从而提高了该时延界的紧致性.根据Page5式(13)的结果,网络可以按一定的违背概率ε(σ)接纳满足时延要求的用户业务;可以有效地实施网络流量控制和拥塞控制;可以方便地进行网络资源调度实现QoS控制;可以针对用户需求选择满足时延要求的端到端转发路径;可以按时延要求通过合理分配带宽实现网络流量工程.下面对提出的端到端时延界进行数值计算和定量分析,并和Fidler[7]提出的端到端时延界进行比较,从而验证定理1结论的有效性.4数值计算与分析本节通过数值计算对提出的端到端时延界和Fidler提出的端到端时延界进行比较.由于两种时延界均可线性扩展,所以比较的重点主要是端到端时延界的紧致性.另外,本节还将对式(13)中的参数进行数值分析,主要分析参数变化对端到端时延界的影响,数值计算的网络拓扑仍采用图1所示的线性串联网络,节点数量H=16.图2~图4分别表示了ε=10-3,10-6,10-9时两种时延界的比较,其中,横坐标表示节点数量H,纵坐标表示端到端时延界,MGF表示Fidler提出的时延界,Newmethod表示本文提出的时延界.相关参数设置如下:b=1Mbit,r2=32Mbit/s,r1=30Mbit/s,σ=0.2Mbit,τ=1ms.如图2~图4所示,本文提出的时延界随着节点数量增加时的增长趋势相比Fidler提出的时延界有所减小,说明本文提出的时延界紧致性更好.以ε=10-6为例,本文提出的时延界从H=1的18.08ms增长到H=16的25.83ms,而Fidler提出的时延界从H=1的24.15ms增长到H=16的50.46ms.这说明最小加代数理论中卷积运算的串联特性和Doob不等式的使用确实可以改善端到端时延界的紧致性.图5表示了ε(violationprobability)对端到端时延界的影响(H=16).相关参数设置和图2~图4的设置相同.如图所示,随着ε逐渐增大,本文提出的时延界减小的幅度并不明显且始终保持在数值比较小的范围.本文提出的时延界从ε=10-12的26.6ms减少到ε=10-3的25.43ms,而Fidler提出的时延界从ε=10-12的55.31ms减少到ε=10-3的48.04ms.这也说明了本文提出的时延界紧致性更好.在实际应用中,ε应尽量小,但从图5可以看出,Page6这时的时延界数值较大.所以,应当在ε和时延界两者间取得较好的折衷.图6表示了τ对端到端时延界的影响.τ1=0.8ms,τ2=1ms,τ3=1.2ms,其余相关参数和图2~图4的设置相同.如图所示,随着τ逐渐增大,端到端时延界随节点数量增加而增长的趋势愈发明显,这说明τ值应越小越好.结合Sh(t)的MGF表达式(如式(10)所示)进行分析,τ值确实不能取得很大,否则会增加单节点的处理时延.在实际应用中,τ值可根据Sh(t)的具体形式进行合理的调整.5总结与展望统计网络演算理论比确定网络演算理论更适用于大规模计算机网络的端到端性能分析,其中,运用统计网络演算理论对端到端时延进行分析是研究的热点.但是,目前很少有理论成果表明端到端时延界可以线性扩展,即使有些端到端时延界可以线性扩展,但其时延界的紧致性不够好.本文运用统计网络演算理论对网络端到端时延进行了分析,结合Doob不等式提出了一种基于指数上鞅的端到端时延界表达式,该时延界不仅可以线性扩展,而且具有更好的紧致性.数值计算结果验证了所提出端到端时延界的有效性.运用本文的结论,可以在大规模计算机网络中对端到端时延进行精确估计,从而提高网络资源利用率,保证更多符合时延要求的用户业务接入网络,享受具有QoS保障的端到端服务.本文的工作是在对统计到达曲线和统计服务曲线进行研究的基础上展开的,使用MGF封装的方法仍具有一定特殊性.未来的研究工作将围绕更加通用的统计到达曲线和统计服务曲线进行端到端时延分析,争取得到更具有普适性的统计端到端时延界.致谢邱智亮教授及其科研团队对本文工作给予了大力支持与帮助,在此表示衷心感谢!
