Page1生成矩形毛坯最优两段排样方式的确定型算法季君1)陆一平1)查建中1)崔耀东2)王金敏3)1)(北京交通大学机械与电子控制工程学院北京100044)2)(广西大学计算机与电子信息学院南宁530004)3)(天津职业技术师范大学机械工程学院天津300222)摘要排样价值、切割工艺和计算时间是排样问题主要考虑的3个因素.文中提出一个新的基于排样模式的确定型排样算法———同质块两段排样算法,此算法适合剪冲下料工艺,在实现工艺简化的同时提高了排样价值时间比.首先通过动态规划算法生成最优同质块,然后求解一维背包问题生成块在级中的最优排样方式和级在段中的最优排样方式,最后选择两个段生成最优的两段排样方式.通过3组经典测题对该文算法进行了测试,将算法与4种著名算法进行了比较.实验结果表明,该文算法的优化结果好于以上4种著名算法,有效地提高了板材利用率,并且计算时间合理.关键词下料;二维无约束排样;同质块;背包问题;动态规划算法1引言在许多建设行业中,都会遇到材料分割问题.而矩形零部件排样是制造行业经常涉及的问题,有效的排样方案不仅可以提高材料利用率,而且可以简化切割工艺.虽然很多学者对矩形件排样问题进行了研究,但从计算复杂性理论上看,矩形件排样问题已经被证明属于相当困难的组合优化问题[1-3];而且企业下料环节影响排样问题特性的因素很多,随着生产的发展,这些因素在不断变化,具有新特性的排样问题不断出现,需要研究新算法予以解决,以满足生产的需要.本文讨论矩形毛坯二维无约束剪切排样(UTDC)问题[4-5]:将板材L×W切割成m种毛坯,第i种毛坯的尺寸为li×wi,价值为ci(i=1,…,m),对每种毛坯在板材中出现的次数无约束,排样目标是使板材所含毛坯的总价值最大.对于UTDC问题的排样方式称为普通排样方式.尽管此种排样方式存在精确算法[6-7],但其解决大规模问题所花费的时间是不能容忍的.因此,很多学者致力于研究特定类型的排样方式,如Hifi[8]提出了经典两阶段和经典三阶段排样方式,崔耀东提出了普通T型[9]、T型同质块排样方式[10]、普通两段排样方式[11],文献[12]提出了同质块两阶段排样方式.文献[13]提出了3块排样方式,文献[14]提出了4块排样方式.虽然这些排样方式材料利用率可能稍低,但其计算时间短,下料工艺也较简单.另外,分析可知,T型同质块排样方式包含经典两阶段、普通T型、普通两段、同质块两阶段、三块、四块排样方式.本文提出一种新的排样方式———同质块两段(2SHB)排样方式来解决UTDC问题.一条剪切线将一个同质块两段排样方式分成两个段,每个段既可以是X向段,也可以是Y向段,图4为两种形式的段,第2节将进行详细的定义.需要说明的是:(1)当限制两个段中分别为X向段和Y向段时,同质块两段排样方式就成为T型同质块排样方式,也就是说,同质块两段排样方式是T型同质块排样方式的超集,因此,最优同质块两段排样方式所含毛坯的价值,不会小于最优T型同质块排样方式所含毛坯的价值;(2)当限制每个同质块只能由一个毛坯组成时,同质块两段排样方式就成了普通两段排样方式,也就是说,同质块两段排样方式是普通两段排样方式的超集,因此,最优同质块两段排样方式所含毛坯的价值,不会小于最优普通两段排样方式的所含毛坯的价值;(3)同质块两段排样方式不是经典三阶段排样的子集,换句话说,经典三阶段排样方式不能包含同质块两段排样方式.因此,最优同质块两段排样方式可能好于最优经典三阶段排样方式.本文给出了生成同质块两段排样方式的确定型算法,并以大量测试例题来验证此算法的有效性.在这些测试例题中,本文的同质块两段排样方式的解决方案确实好于T型同质块排样方式、普通两段排样方式和经典三阶段排样方式的解决方案,而且计算时间合理.另外,本文排样方式的解决方案等于或接近于普通UTDC问题的解决方案.这些结果的证明将在论文的第4节详细列出.2同质块两段排样方式中的概念2.1同质块图1为生成排样方式的3种类型的条带,数字表示毛坯种类号.其中,(a)是由不同宽度的毛坯组成的普通条带,(b)是由相同宽度的毛坯组成的均匀条带,(c)是由相同尺寸的毛坯组成的同质块条带.图2为两个同质块.同质块是由同质块条带组成,所有同质块条带都是由相同尺寸的毛坯组成.通Page3过一系列的剪切过程可以将同质块剪切成同质块条带,每次剪下一根条带,连续被剪下的两根条带相互平行或垂直.如图2(a)中,第1条被剪下的条带是平行的;图2(b)中,第1条被剪下的条带是竖直的.在文献[15-16]中介绍了生成最优同质块的求解方法.2.2级、段和2SHB排样方式在一个2SHB排样方式中,段是由X向级或Y向级组成.X向级是由一系列从左往右水平排列的同质块组成.图3为一个X向级,包含3个同质块,其中箭头表示各个同质块的边界,将X向级旋转90°,即得到Y向级.一个段是由方向和宽度相同的多个级组成.图4所示为两个段,其中X向段是由X向级组成(图4(a)),Y向段是由Y向级组成(图4(b)),箭头所示为每个级的边界.如图4(a),3个X向级包含的同质块个数分别为1、3、2;图4(b),3个Y向级包含的同质块个数分别为2、2、1.根据前面的介绍,在2SHB排样方式中,剪切线将板材分为两个段.当剪切线竖直时,称为2SX排样方式(图5);当剪切线水平时,称为2SY排样方式.在2SX排样方式中,若两个段都为X向段,称为2SX-XX排样方式(图5(a));若一段为X向段,另一段为Y向段,称为2SX-XY排样方式(图5(b));若两个段都为Y向段,称为2SX-YY排样方式(图5(c)).图5中,箭头所示为每段的边界,在2SX-XX排样方式(图5(a)),左侧的X向段包含了两个X向级,其中第1个级包含两个同质块(对应的毛坯序号分别为7和10),第2个级也包含两个同质块(毛坯的序号分别为2和10),右侧的X向段也包含了两个X向级,其中第1个X向级包含两个同质块(毛坯的序号为1和10),另一个X向级包含两个同质块(毛坯的序号为4和5);2SX-XY排样方式(图5(b))与TX排样方式相同,左侧的X向段包含了两个X向级,其中第1个级包含一个同质块(对应的毛坯序号为1),第2个级包含两个同质块(毛坯的序号分别为1和5),右侧的Y向段包含了两个Y向级,其中第1个级包含两个同质块(毛坯的序号为1和6),另一个级包含一个同质块(毛坯的序号为10);在2SX-YY排样方式(图5(c)),左侧的Y向段包含了两个Y向级,其中第1个级包含两个同质块(对应的毛坯序号分别为2和7),第2个级包含一个同质块(毛坯的序号为10),右侧的Y向段包含了一个Y向级,包含3个同质块(毛坯的序号分别为2、5和7).将2SX排样方式旋转90°,即可得到2SY排样方式.Page43算法实现假设板材的尺寸和矩形毛坯的尺寸都为整数,毛坯允许转向90°.因此,尺寸L×W的板材与尺寸W×L的板材是一样的.假设LW.这里将只介绍生成2SX排样方式的方法,包括以下步骤:(1)生成最优同质块;(2)确定同质块在级上的最优排样方式;(3)确定级在段上的最优排样方式;(4)确定竖直剪切线将板材分割成两段后的最优排样方式.所有步骤将在介绍完规范尺寸后,进行逐一介绍.3.1规范尺寸规范尺寸已经被许多作者使用[5,8-10,12-14].对于本文的规范尺寸,采用文献[9]中的相关定义.以同质块为例,基本思想是让所有的同质块紧密的排列在一起,因此,同质块的长度和宽度可以从一个有限的集合中取值,这些值被称为规范长度和规范宽度.其中一个重要的结论在文献[17]中已经被证实:假定g(x)为不大于x的最大规范尺寸,h(y)为不大于y的最大规范尺寸,f(x,y)为板材x×y所包含毛坯的最大价值,则f(x,y)=f(g(x),h(y)).对于不同类型的排样方式,应该根据自己的特点定义恰当的规范尺寸,以加快求解速度.本文定义了两种类型的规范尺寸.定义1.同质块的规范尺寸.根据前面的定义,同质块是由相同尺寸的毛坯组成,因此,同质块的规范尺寸是通过各种毛坯来定义的.设R(i)1,…,m.上式中,0xL.同质块的规范尺寸是毛坯的长度和宽度的线性组合.若L和W不在集合Rb中,就把它们加入到Rb中.如果一个同质块的长度和宽度都是规范尺寸,那么就被称为规范同质块.定义2.级的规范尺寸.图3所示,级是由同质块组成.根据2.2节中的描述,级的方向可能是水平的(X向级)或者竖直的(Y向级),X向级的宽度是竖直衡量的,Y向级的宽度是水平衡量的.因此,级的最大长度和宽度都为L.若级的宽度不等于同质块的规范宽度,则可以减少宽度至最接近的同质块规范宽度,而级上同质块的布局不会改变.因此,级的规范宽度的集合描述为式中N为集合中元素的个数.级的规范长度是所有毛坯的长度和宽度的线性组合,其集合为Esection=x=∑m式中,0xL,M为集合中元素的个数.若一个级的长度属于集合Esection,宽度属于集合Ssection,则这个级就是规范级.定义3.段的规范尺寸.段是由方向相同的级组成,因此,段的长度等于级的长度.假设Qsegment是段的规范尺寸的集合,Qsegment=Esection.若一个段的长度和宽度都属于集合Qsegment,则这个段就是规范段.3.2最优同质块设B(x,y)为同质块x×y的最大价值,x,y∈Rb且yW,则通过以下步骤求得B:步1:应用动态规划算法求解各种尺寸的同质块中含每种毛坯数量的最大值F,其中,Fi(x,y)为同质块x×y所含第i种毛坯数量的最大值:Fi(x,y)=max{Fi(x,y-li)+int(x/wi),步2:求解同质块x×y的的最大价值B(x,y):B(x,y)=max[Fi(x,y)×ci];i=1,…,m,设级x×y的价值为u(x,y),x∈Esection,y∈3.3同质块在级上的最优排样方式Ssection,则有如下递推公式:u(x,y)=max∑M式(6)是个无界的背包问题,在文献[18]中提出了很好的解决方法.3.4级在段中的最优排样方式假设fX(x,W)是X向段x×W的价值,fY(x,W)是Y向段x×W的价值,则由下面的公式确定fX(x,W),x∈Qsegment:fX(x,W)=max∑N{由下面的公式确定fY(x,W):fY(x,W)=max∑N{Page53.5最优2SHB排样方式对于2SX排样方式,假设竖直分割线的位置为x,x∈Qsegment,这里有3种排样方式:(1)左侧为X向段x×W,右侧为X向段(L-x)×W;(2)左侧为X向段x×W,右侧为Y向段(L-x)×W;(3)左侧为Y向段x×W,右侧为Y向段(L-x)×W.这3种排样方式的价值分别为UXX(x)、UXY(x)和UYY(x),则有UXX(x)=max{fX(x,W)+fX(L-x,W)}(9)UXY(x)=max{fX(x,W)+fY(L-x,W)}(10)UYY(x)=max{fY(x,W)+fY(L-x,W)}(11)设最优2SX排样方式的价值为VX:VX=max{UXX(x),UXY(x),UYY(x)}(12)设最优2SY排样方式的价值为VY,按照上面同样的方式可以确定VY.设最优2SHB排样方式的价值为V,则V=max(VX,VY).3.6生成最优2SHB排样方式的步骤1.由式(1)、(2)和(3)确定同质块、级和段的规范尺寸;2.由式(4)和(5)确定最优同质块;3.由式(6)确定最优级;4.由式(7)和(8)确定最优段;5.由3.5节确定最优2SHB排样方式.4实验计算据作者了解,目前尚没有关于生成同质块两段排样方式的算法的报道.前面已经提出,本文的同质块两段排样方式包括T型同质块排样方式和普通两段排样方式,但不包括经典三阶段排样方式.本节通过前两组测题将本文的同质块两段排样方式与经典三阶段排样方式、T型同质块排样方式和普通排表3第1组测题的实验结果IDH12387达到最优12348达到最优0.0310.0000.0000.000HZ15226达到最优达到最优达到最优M115550达到最优15468达到最优M273176达到最优73080达到最优M3147366达到最优147054达到最优M4273991达到最优273991达到最优M55900125883155868795883150.0620.0000.0160.016B9000000达到最优达到最优达到最优295.3133.6712.9062.704U122435030224190212241663022419021408.0622.3121.5001.844U220446684达到最优20382215达到最优28.9380.6570.5630.765UU1246046达到最优达到最优达到最优UU2595655达到最优达到最优达到最优样方式进行比较,通过第3组测题将本文的同质块两段排样方式与普通两段排样方式进行比较,对于每一道测题,本文的算法可生成最优同质块两段排样方式,文献[8]中的算法可生成最优经典三阶段排样方式,文献[10]中的算法可生成最优T型同质块排样方式,文献[19]中的算法可生成最优普通排样方式,文献[11]中的算法可生成最优普通两段排样方式,这5种算法称为:同质块两段算法、经典三阶段算法、T型同质块算法、普通排样算法和普通两段排样算法.其中,http://www.laria.u-picardie.fr/hifi/OR-Benchmark/前两组测题数据可以从上网址获得,第3组测题数据可从以下网址获得http://www.gxnu.edu.cn/Personal/ydcui,以上5种算法计算所使用的计算机为Pentium4CPU,主频2.8GMHz,内存512MB.4.1第1组测题的实验结果第1组测题包含41道测题,具体参考文献[8].表1和表2为实验的统计结果,表3为具体的实验结果.本文算法普通排样算法经典三阶段算法26T型同质块算法34优化结果测题数(41道测题)1229239普通排样算法本文算法经典三阶段算法T型同质块算法Page6IDUU31089308达到最优达到最优达到最优0.1560.0320.0470.047UU41188638达到最优达到最优达到最优0.3280.0460.1250.078UU51878253达到最优达到最优达到最优0.5780.1090.2190.125UU62951202达到最优达到最优达到最优0.2500.0930.1870.110UU72949043达到最优达到最优达到最优0.8910.1880.3280.188UU83974828达到最优396463839646380.8590.1410.3600.203UU96117826达到最优6110442达到最优1.0000.2030.4370.282UU10120044741199698211996982119969822.0940.4690.7970.547UU1113170382131693801316164013169380958.54710.8443.9378.203HZ28523达到最优MW13916达到最优达到最优达到最优0.0000.0000.0000.000MW224950达到最优达到最优达到最优0.0150.0000.0160.000MW339637达到最优达到最优达到最优0.0000.0000.0000.000MW464044达到最优达到最优达到最优0.0320.0000.0160.015MW5190937达到最优达到最优达到最优0.0310.0150.0150.015BW2379786达到最优2370620达到最优3.2660.67117.3130.686W11688341682891682891682894.2340.7341.1561.267W237621达到最优达到最优达到最优0.6560.1560.2500.281UW16696达到最优达到最优达到最优0.0160.0000.0160.016UW29732达到最优达到最优达到最优0.0470.0000.0150.015UW37188达到最优达到最优UW48452达到最优达到最优达到最优0.1250.0470.0620.062UW58398达到最优达到最优达到最优0.1100.0310.0630.047UW66937达到最优达到最优达到最优0.1560.0310.0930.110UW711585达到最优达到最优达到最优0.2970.0630.1720.156UW88088达到最优达到最优达到最优0.5470.0940.2970.266UW97527达到最优达到最优达到最优0.3900.1720.2340.281UW108172达到最优达到最优达到最优0.8750.2190.4540.438UW1118200达到最优达到最优达到最优0.0310.0160.0310.016从表中可以得出:(1)本文的算法的计算时间远远少于普通排样算法,且得出的优化结果等于或接近普通排样算法;(2)本文算法在优化结果和计算时间上都优于经典三阶段算法;(3)在计算时间上,虽然本文的算法略长于T型同质块算法,但优化结果本文算法好于T型同质块算法.从表1可以得出,在41道测题中:(1)本文的算法的计算时间远远小于普通排样算法,且有36道测题达到普通排样算法的最优化结果,其余的5道接近于最优化结果;(2)与经典三阶段算法相比,最优化结果的测题数有10道多余经典三阶段算法,且计算时间少于经典三阶段算法;(3)与T型同质块相比,最优化结果的测题数有2道多于T型同质块算法,计算时间略长于T型同质块算法.由表2可以得出,在41道测题中:(1)与经典三阶段算法相比,本文算法的优化结果有12道测题好于经典三阶段算法,其余的29道与经典三阶段算法相等;(2)与T型同质块算法相比,本文算法的优化结果有2道测题好于T型同质块算法,其余的39道相等于T型同质块算法.普通排样算法本文算法经典三阶段算法T型同质块算法4.2第2组例题的实验结果第2组例题包含20道测题,具体参考文献[20].表4和表5为统计结果,表6为具体的实验结果.由表中可以得出:(1)本文的算法的计算时间远远小于普通排样算法,且得出的优化结果等于或很接近普通排样算法;(2)本文算法在优化结果和计算时间上都优于经典三阶段算法;(3)本文算法在优化结果上优于T型同质块算法,且计算时间相当.本文算法普通排样算法经典三阶段算法T型同质块算法优化结果测题数(20道测题)164416Page7表6第2组例题的实验结果IDAPT103591980359181335913953591813208.1725.1403.7976.017APT114190481418973041894064189704241.5795.1401.9225.797APT12516209751578585157280515778293.2971.7667.0311.391APT133498302349824034967763498240220.7194.6100.8755.751APT144466844446609844660984466098124.6562.1873.0001.937APT156054955605423060532266054230172.1563.3133.9222.844APT167573596757340475716387573404237.3594.6264.0003.954APT174537842达到最优4536836达到最优253.0475.3912.7826.141APT18583599658349285834516583451675.3131.8122.5461.328APT196833281683285268318016832852180.0623.20331.3442.328APT205717092达到最优5691316达到最优APT2135823103578150355671435736781.5310.5311.4690.530APT2241901164185891417969641858915.9690.67221.6410.735APT2335683543567248355739135672485.1561.2343.4570.672APT244078132达到最优达到最优达到最优APT2535468133538507353164635385076.1410.75046.8590.594APT2627238402723248269402227232481.4060.3450.5940.421APT272458038达到最优达到最优达到最优APT2841133494112224411222441122243.6720.65614.2030.719APT293688965达到最优3676018达到最优从表4可以看出,在20道测题中:(1)本文的算法的计算时间远远小于普通排样算法,且本文算法有5道测题达到普通排样算法的最优化结果,其余的15道非常接近于最优化结果;(2)与经典三阶段算法相比,最优化结果的测题数有3道多余经典三阶段算法,且计算时间少于经典三阶段算法;(3)与T型同质块算法相比,最优化结果的测题数相等,计算时间也相当.从表5可以看出,在20道测题中:(1)与经典三阶段算法相比,本文算法的优化结果有16道好于经典三阶段算法,其余的4道与经典三阶段算法相等;(2)与T型同质块算法相比,本文算法的优化结果有4道测题的排样价值好于T型同质块算法,其余的16道相等于T型同质块算法.4.3第3组测题的实验结果第3组测题包含50道测题,具体参考文献[11].表7为实验的统计结果.从表中可以得出:本文算法在优化结果好于普通两段排样算法,计算时间略长于普通两段排样算法.本文算法普通两段排样算法99.6442图6为分别通过本文算法和普通两段排样算法普通排样算法本文算法经典三阶段算法T型同质块算法得到的第26道测题的排样图.从图中可以得出,本文算法计算得出的测题26的毛坯总价值为4497306,普通两段排样算法为4490668,本文算法的最优化结果好于普通两段排样算法.4.4生产实例表8为桂林客车厂的排样例题数据.板材尺寸为4000×3000,49种毛坯,设每种毛坯的价值等于其面积.本文算法和普通排样算法都来解决这个问题.由表9可以看出:两种算法都能达到最优化结果,但计算时间本文算法大大短于普通排样算法.Page8990×235,220×113,288×250,1160×868,1000×868,868×598,1160×258,1000×96,1000×152,185×160,1183×521,815×521,1012×571,455×180,540×192,555×210,253×143,442×420,240×90,330×182,800×133,800×403,803×333,778×116,778×78,1200×241,1020×262,1300×121,1300×83,800×120,700×133,1200×85,480×480,965×705,800×390,680×185,840×410,800×73,800×40,930×78,930×50,600×88,1200×146,822×465,876×318,755×147,460×180,270×117,215×145本文算法普通排样算法达到最优5结论尽管对UTDC问题存在普通排样方式的精确算法,但计算时间无法让人容忍.为此,人们常采用符合实际切割工艺的特定排样方式,此类排样方式可在合理时间取得好的优化结果,例如普通两段排样方式、经典三阶段排样方式和T型同质块排样方式等.本文算法生成的同质块两段排样方式就是一种典型的特定排样方式,此排样方式的优化结果好于以上3种排样方式,有效地提高了板材利用率,在解决大规模UTDC问题上具有高效性.
