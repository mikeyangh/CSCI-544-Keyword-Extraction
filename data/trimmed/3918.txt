Page1面向应用适应能力的互联网体系结构评估方法朱敏徐恪林嵩(清华大学计算机科学与技术系北京100084)(清华信息科学与技术国家实验室北京100084)摘要互联网体系结构的演进已经成为学术界和工业界的共识,面向现有体系结构存在问题的修补策略以及基于各种思路的新的体系结构方案不断被提出,但得到大众认可并得到应用的少之又少.如何评估这些策略和方案是否符合互联网体系结构发展的需求成为当前急需解决的一个重要问题.现有的评估工作大多从用户或者ISP的效益出发对互联网体系结构的竞争力和演化趋势进行评估,它们并不考虑应用类型变化对互联网体系结构发展的影响.文中从应用的角度出发,立足于体系结构本身,提出了一种面向应用适应能力的体系结构评估方法,并构建了相应的评估模型2ACT(ApplicationAdaptationCapaciTy),该方法以体系结构的服务适应性(ServiceAdapTability)及经济适应性(EconomicAdapTability)为基础进行建模,以量化应用数据类型变化、应用部署开销对互联网体系结构发展的影响.该方法不但可用于评估体系结构自身的发展趋势,也可用于对体系结构中各种协议或机制的发展能力进行评估.针对当前多媒体数据流量剧增的现象,文中对两种适于多媒体数据应用的机制(In-network内容缓存机制和IP组播协议)进行了评估,结果发现这两种理论上具有优势的协议需在一定的限制条件下部署才能发挥其优势.用户或ISP可以结合自身的应用需求,根据2ACT模型的评估结果,选择相应的体系结构或者协议进行部署.关键词互联网体系结构;应用适应能力;服务适应性;经济适应性;In-network内容缓存机制;IP组播1引言在互联网的最初成长阶段,互联网体系结构表现出了超乎想象的发展能力,然而近十年来,伴随着互联网规模的迅速膨胀,网络流量和用户数量的指数增长,互联网应用类型和终端接入设备的多样化发展,传统互联网体系结构在鲁棒性、安全性、移动性等方面的问题暴露得越来越明显.针对这些问题部署的中间件和新的协议不但没能完全解决当前互联网体系结构存在的问题,还使得体系结构的IP层越来越臃肿,导致了更严重的复杂性、脆弱性、可扩展性、管理和互操作问题.当前的互联网体系结构在功能、性能、甚至协议栈结构、设计原则等各方面都面临着巨大的挑战,研发新一代互联网体系结构已经成为学术界和工业界的共识.近十几年来,针对如何解决现有互联网体系结构存在的不足以及未来互联网体系结构如何发展的问题,研究者们提出了很多建议,也发表了大量的研究论文.根据出发点的不同,这些研究思路大致可以归为革命式、改良式和可演进式三种.这三种思路的主要区别在于坚持现有体系结构设计原则的程度不同,革命式路线主张彻底推翻现有体系结构,重头再来;改良式路线则坚持现有体系结构设计原则不变,仅进行增量式修补;可演进式路线介于前两者之间,提倡在稳定过渡的同时进行适当的改革.在相关思路的指导下,有关未来互联网体系结构发展的理论研究取得了很好的成果,但实质性的应用并不多.事实上,在对互联网体系结构发展路线问题进行深入理论研究的同时,确定众多的技术思路和设计选项是否符合互联网体系结构发展的需求,是否具备应用价值,究竟哪种技术或方向更具影响力、更具备发展的潜力,是很有必要的.这就需要一种有效的用于评估、衡量这些协议和体系结构的方法.互联网体系结构是一个囊括各种协议、能提供多种应用服务的复杂系统,不同的层次,不同的角度具有不同的评价指标,很难用一套统一的标准和手段来评估,本文主要从互联网体系结构的可持续发展角度进行相关的研究.当前针对互联网体系结构可持续性发展的评估工作大多从用户和ISP效用的角度对体系结构的发展趋势进行分析,较少考虑不同应用类型对互联网体系结构发展的影响.纵观互联网发展历史可以发现应用需求的变化是影响和促进互联网体系结构发展的根本原因,因此本文中,我们提出了一种基于2ACT(ApplicationAdaptationCapaciTy)模型的面向应用适应能力的互联网体系结构评估方法,用于评估互联网体系结构以及各种协议在不同应用需求下的可持续发展能力.我们认为一种互联网体系结构或协议是否能够取代另一种或者保持持续发展的能力关键在于其支持各种应用的能力;即其是否能很好地满足用户的应用需求,为用户提供好的服务体验,以及是否会为支持各种应用付出超于其收益的代价.毫无疑问,前者体现了互联网体系结构可提供的功能和性能;后者反映了互联网体系结构本身的复杂性.本文中,我们将两者分别称为互联网体系结构的服务适应性和经济适应性.Page3基于面向应用适应能力的互联网体系结构评估方法,在本文中,我们对当前互联网体系结构的重要问题,即多媒体类型数据流量传播问题的解决方案———IP组播机制和In-network内容缓存机制,进行了分析,结果发现这两种机制仅在特定的条件和限制下才能表现出其优势,用户和ISP可以根据各自不同的需求进行相关机制的部署.本文第2节概括介绍互联网体系结构发展及相关评估工作的研究现状,以便使读者对于本研究方向有一个全面的了解;第3节首先对互联网体系结构应用适应能力的含义进行说明,并提出互联网体系结构应用适应能力评估方法及模型的实现思路和总体框架,然后分别对应用适应能力评估模型的两个方面:服务适应性模型和经济适应性模型进行详细阐述,最后给出总体模型,并就用户如何使用该模型进行了一般性描述;第4节和第5节利用提出的方法分别对通信模式中的两个重要问题:In-network内容缓存机制和组播机制,进行分析和讨论;最后一部分对本文进行总结,并对进一步的工作进行讨论.2背景及相关研究2.1互联网体系结构发展研究现状互联网应用需求的变化,以及互联网在安全性、移动性、可扩展性方面面临的挑战促进了未来互联网体系结构发展的相关研究,主要的工作依据研究的出发点不同可归纳为革命式路线、改良式路线和可演进式路线三种.革命式路线又称为“clean-slate”或“改革型”路线,其出发点是突破一切限制,重新设计新一代互联网,力图从根本上解决现有体系结构存在的问题[1].目前,世界各国都开展了基于clean-slate的相关研究项目.例如,美国政府资助的FIND①(FutureInternetNetworkDesign)、美国顶尖机构及大学支持的国家级未来互联网实验床GENI②(GlobalEnvi-ronmentforNetworkInnovations)、欧盟的FIRE③(FutureInternetResearchandExperimentation)项目等.此外,研究者们还提出了多种基于clean-slate思路的体系结构,包括FII[2]、XIA[3]、NDN[4]等.改良式路线又称为“dirty-slate”、“incremental”、“进化式”或“革新型”路线,其思路是针对现有互联网体系结构存在的不足进行增量式的修补.事实上,IETF④(InternetEngineeringTaskForce)发布的大量RFC(RequestforComments)标准都是基于这一思想进行的,其内容涉及互联网的安全性、移动性、地址空间等各个方面的改进.如解决地址问题的CIDR协议,解决传输服务质量问题的CDN体系结构,解决用户移动性问题的MobileIP协议,解决QoS问题的DiffServ和RSVP,以及解决安全认证问题的IPSec协议等等.可演进式路线是介于改良式和革命式之间的一种路线[5-6].其主要思想如下:互联网的无连接分组交换、端到端等核心机制和设计原则是保持互联网充满活力和迅速发展的根本原因,因此,在扩展当前体系结构时,应坚持这些核心和设计原则相对稳定,在此基础上谨慎地改变约束体系结构扩展的基本要素,以适应和更好地支持新的应用需求.尽管可演进式路线的概念提出不久,但已经有许多相关类似的研究.例如:文献[7]中提出的一种坚持当前体系结构,通过IP层的一些简单修改来形成一个可演进的互联网体系结构的方案.针对未来互联网体系结构的发展问题,数以百计的新方案、新策略被提出,然而被广泛接受并被应用的方案却很少.事实上,在进行未来互联网体系结构理论架构研究的同时,研究者们需要确保自己提供的方案得到大众的认可并能满足实际的需求,这也正是互联网体系结构评估工作的主要目的所在.2.2相关评估工作有关评估互联网体系结构发展趋势的方法随着新一代互联网体系结构的研究,也逐渐开始受到重视.文献[8]对当前互联网体系结构的评估机制、模型和方法进行了总结,目前主要的评估方法包括:(1)基于理论说明互联网体系结构的发展方向理论分析是进行各种研究最直接的方式,针对革命式和改良式发展路线的优势和缺点,两位研究者Rexford和Dovrolis在文献[9]中通过理论分析阐明了各自的观点:支持革命式路线的研究者Rexford并不否定改良式的发展路线,但是她认为互联网体系结构的一些挑战很难在当前设计原则下得到解决,为了使互联网朝着一个安全、可靠、高效的基础设施持续发展,革命式的设计是很重要也是必须的,因为它有利于网络研究领域得到一个成熟的发①②③④Page4展原则.支持改良式路线的研究者Dovrolis[10-11]则认为,互联网的研究目标在于理解当前互联网的行为,确认存在的或者紧迫的问题,并在与旧系统兼容和增量部署两个限制条件下解决问题.而革命式的思路超越当前互联网体系结构,旨在设计一种优于当前互联网的体系结构,并没有考虑转换代价,导致提出的很多方案由于部署开销大于部署所得到的好处,至今尚未得到大规模的实际应用,反倒是改良式的方案比较让人接受.(2)基于博弈论分析体系结构的过渡及发展趋势博弈论是经济学的标准分析工具之一,是用于研究具有竞争性质或现象的数学理论和方法,近年来,开始广泛应用于计算机科学领域的流量工程、网络安全以及体系结构的发展等各个方向[12-14].文献[15]中,Gyarmati等人利用博弈论对IPv6的过渡和部署问题进行了建模分析和研究,并从中获得了重要的指导信息.该文献将互联网中的AS作为互相连接和通信且相互独立的博弈者来对待,这些AS可以根据实际情况,包括运行某种协议的网络所能获得的收益、所需要的运作成本、协议迁移所需要的开销等,自主选择在自己网络中所运行的协议.通过博弈理论的分析,结果发现所有AS都使用IPv6协议栈将是博弈的纳什均衡,也就是说所有的AS都部署和使用IPv6是最优的情况(AS获得的效益最大),从理论上说明了部署和运行IPv6的优势.(3)基于微分方程等数学方法分析用户效用对体系结构演化的影响用户效用是影响网络体系结构演化的关键,已有一些工作[16-19]从用户或者ISP的效用着手考虑,研究了两个体系结构在一定初始比例条件下演化的情况.这些模型在确定用户效用函数与网络部署比例的关系之后,运用各种数学方法分析网络部署比例的进一步变化情况.例如,文献[17]就利用了微分方程对转换器部署以及其他经济因素对网络技术迁移的影响进行了分析.作者假设有两个不同的体系结构,部署比例分别是x1和x2.然后,从不同的独立用户(具有不同的价值观θ)的角度出发,考虑技术质量、体系结构部署比例、价格等因素对用户效用U的影响,形成技术部署的整体动态经济模型,通过求解微分方程及数值分析,结果发现在不同的初始部署条件下,两种技术的部署过程都会有相应的稳定平衡点.Lin和Xu等人[20]扩展了上述模型,将其应用于分析三网融合中互联网、电信网和有线电视网的发展趋势,结果表明在现有条件下,无论三种网络的初始比例如何,三网融合最终将收敛到一种网络独存或两种网络并存的情况,且初始比例越高的网络发展越具有优势.(4)基于生物学方法分析体系结构的发展趋势近年来,研究者们开始使用生物遗传学与进化动力学对计算机网络体系结构的发展趋势进行分析.文献[10]对计算机网络体系结构发展与生物遗传学之间的相似性进行了分析并提出了网络体系结构发展的基本原则.文献[15]中,作者利用进化动力学工具对IPv6部署规模的特性进行了分析,结果发现如果在初始阶段,互联网中有一定数量的AS部署了IPv6,那么IPv6的全网部署就会更快更可行.(5)基于最优化理论分析体系结构的可扩展性可扩展性分析是评价互联网体系结构的重要方法.在互联网体系结构可扩展分析方法方面,Xu等人[21]给出了互联网体系结构多维可扩展性的定义,提出了基于多种约束条件评价互联网多维可扩展性的数学方法,并用多维可扩展的评价方法研究了互联网在性能、规模和服务三个方面的可扩展性问题,还结合实例对这三个方面的可扩展性进行了理论分析和实验模拟.结果表明提出的互联网多维可扩展性定义和评价方法可以有效评价互联网在各个方面的可扩展性,为新一代互联网体系结构的分析和评价提供了可行的思路和方法.发展(6)基于抽象数学模型分析体系结构协议栈的文献[22]提出了一个抽象模型EvoArch来研究协议栈的演化.该模型通过互联网协议栈各层次之间的价值关系和竞争关系对协议栈的演进进行了合理假设和建模,作者发现通过假设得到的演化结果与目前互联网沙漏状的协议栈结构一致,进而从侧面反映出沙漏状协议栈结构的合理性.总结现有的评估研究工作,可以发现当前的评估模型主要是从用户或ISP的效益出发对互联网体系结构的竞争力和发展中的各种问题进行分析,它们并不考虑不同应用类型对互联网体系结构发展的影响.我们认为,更好的支持各种应用是互联网体系结构发展的根本原因,因此,本文从体系结构本身的效益出发,提出了一种基于应用适应能力的互联网体系结构评估模型2ACT.该模型通过分析应用类Page5型变化和经济效益变化对体系结构的影响确定互联网体系结构和某种协议的发展能力.该模型还可以为用户及ISP选择或部署适用的互联网体系结构或协议提供参考.3面向应用适应能力的互联网体系结构评估方法及模型部署在互联网上的丰富多彩的网络应用是互联网普及的根本原因,因为它们能为用户提供各种各样的服务.事实上,从互联网体系结构发展的历史,Email、web、video等应用需求到HTTP、P2P协议的发展,以及当前物联网、智慧网络等新型概念的提出,可以看出正是由于互联网应用的发展驱动了互联网本身的进步.而当前互联网体系结构扩展及演进的原因也在于更好地支持不断增加的新的应用需求.可以说,新一代互联网体系结构最基本的职责也是支持当前及未来可能的各种应用需求.因此,网络体系结构是否具备长期的活力并得到持续发展与其是否能支持不断增长和变化的应用需求密切相关.本文中,我们将互联网体系结构支持应用需求的能力称为互联网体系结构的应用适应能力.这一节中,我们将给出互联网体系结构应用适应能力评估方法的原理框架,并在此基础上构造用于评估体系结构应用适应能力的模型.3.1互联网体系结构应用适应能力评估方法框架如图1所示,互联网体系结构的应用适应能力包括两个要素:服务适应性(ServiceAdaptability)及经济适应性(EconomicAdaptability).服务适应性是互联网体系结构支持应用的外在表现,而经济适应性则是互联网体系结构支持应用的内在表现.(1)服务适应性由大量相互连接的主机构成的互联网,其基本功能是通过各种应用协议为用户提供所需的服务.本文中,我们将互联网体系结构为用户提供服务的能力称为互联网体系结构的服务适应性.毫无疑问,具有较好服务适应性的体系结构将能为用户提供更好的服务,进而得到更多的用户支持,因此将会具有更持久的发展能力.互联网体系结构提供服务的基本方式即是将用户需求的数据传输到指定的目的地,而不同的传输和路由协议即代表着不同的互联网体系结构,它们将产生不同的数据传输性能,并最终提供给用户不同的服务体验.对于ISP而言,这就意味着不同的资源利用率和吞吐率等网络性能;对于用户而言,就意味着不同的QoS服务性能(延迟/抖动、丢包率).而对于体系结构本身而言,数据传输性能恰好反映了不同体系结构提供服务的能力,因此,本文中,我们将体系结构数据传输的性能特定为互联网体系结构的服务适应性.(2)经济适应性文献[15-17]等相关研究、QoS部署失败的教训及IPv6发展缓慢的原因表明互联网的发展不仅仅是一个技术问题,诸如ISP的利益、管理、维护开销、技术迁移等因素都是不可忽略的影响体系结构长远发展的因素.事实上,大多数基于clean-slate的方法目前并没有得到大规模的实际应用也正是因为其部署开销远大于其能获得的收益.因此我们在研究互联网体系结构的发展时需要对各方面因素尤其是互联网体系结构所产生的经济开销及经济效益进行综合的考虑.从应用的角度出发可以发现,无论是体系结构部署、管理的开销,还是维护开销,其产生的原因都在于支持和部署相应的应用协议,因为将应用部署到网络上,需要解决许多的技术和经济问题,例如:当前体系结构是否支持需要的各种类型的应用?为了支持新的应用,体系结构需要付出多大的开销进行相应的改进?应用部署后,体系结构为此需要进行怎样的维护和管理工作?如果体系结构能够在不产生过大开销的情况下很好地支持当前及未来可能的各种应用,并产生好的用户效用(如延迟、带宽等),我们相信这种体系结构就具备足够的发展潜力.因此,本文中,我们将互联网体系结构为支持应用部署、维护和管理产生尽可能少的开销的能力称为互联网体系结构的经济适应性,它是评估互联网体系结构发展的一大要素.根据体系结构应用适应能力评估方法,我们Page6定义面向应用适应能力的互联网体系结构评估模型如下:其中,a特指被评估的某种类型的体系结构或协议;Ua、(Serv)a、(Cost)a分别表示体系结构或协议a的应用适应能力、服务适应性和经济适应性.U值越小,说明体系结构具有更优越的服务适应性(数据传输延迟越小,资源占用率越少)和更好的经济适应性(部署及维护开销越小).经济要素对互联网体系结构的发展有着举足轻重的作用.但是经济要素对互联网体系结构发展的影响有多大,新的体系结构和新的协议需要满足怎样的经济要素要求才能在竞争中保存下来还有待研究.在式(1)中,我们使用参数α和β来调节服务适应性和经济适应性对体系结构应用适应能力的影响.事实上,在该模型中,经济适应性可以作为服务适应性的约束条件进行考虑,考虑到通过最优化方法中的拉格朗日函数进行处理会得到相同的结果,为了更清楚地说明体系结构功能、性能与开销之间的关系,我们将其组合为如式(1)的一个等式并假设它们之间存在线性关系.在本文的实验中,我们假设图2体系结构的应用传输模型根据不同的分类方式,应用数据可以被分成不同的类型.例如,在图2中就有3种分类方式.根据数据产生和应用的方式,可以分为可缓存的数据和不可缓存的数据,例如,根据用户的需要即时产生并传输的数据,如VoIP电话及一些即时消息数据就是不可缓存的,而大多数的视频和文件数据,都是可缓存的,以便具有相同请求的用户重复使用,这类数据在网络中保存时间较长;此外,根据数据通信参与对象的数量(发送者数量:接收者数量),可以将应用数据分为11,1n,m1,mn等类型;我们还可以根据应用数据产生的环境将数据分为移动环境下α=β=1.总的来说,2ACT模型反映了互联网体系结构的两种适应能力,即不同应用需求下的服务适应性和经济适应性.其中,互联网体系结构的服务适应性代表了互联网体系结构的技术功能性.直观而言,具有更高技术性的互联网体系结构将为用户提供更好的服务,也即是说它将利用更少的网络资源,为用户提供更短的数据传输延迟、更高的带宽、更好的用户体验.而经济适应性则反映了互联网体系结构本身的复杂程度.构造越复杂的体系结构在进行应用服务的过程中需要付出更多的管理、维护成本.3.2服务适应性模型鉴于互联网提供服务的主要方式就是在网络中转发应用数据或分组到目的地,可以认为互联网体系结构的数据转发能力直接反映了互联网体系结构的服务适应能力.如图2所示,互联网通过FTP、HTTP、P2P等应用层机制为用户提供各种服务,如文件传输、视频/音频、邮件等.这些应用产生的数据将通过数据传输协议和路由协议组成不同的数据分组在网络中进行传输.不同的体系结构将产生不同的数据传输性能,也将产生不同的服务适应性.的数据和固定网络环境下的数据.用户或ISPs可以根据自己的需要对数据进行分类.在不同的时间和区域,或者对于不同的ISPs或用户而言,互联网中的应用数据比例或应用需求比例并不相同,为此,我们建立了一个通用的互联网体系结构服务适应性评估模型:为了更好地对模型进行描述,我们对式(2)中Page7以及后续模型中的相关参数进行了说明,如表1所示.参数m参与评估的应用分类方式的数量n在某一种特定分类方式下应用数据的类型种类pijNpacket网络中的分组总量(Perf)ij(Serv)a互联网体系结构或协议a的服务适应性(Cost)aUa互联网体系结构或协议a的应用适应能力α,β影响因子在不同的应用环境和需求下,用户或ISP可以根据各自的需求对式(2)中的相关参数,包括应用如何分类、性能函数如何表示进行自主定义.例如,从用户的角度出发,可以考虑使用端到端数据传输延迟作为互联网体系结构的传输性能评价指标,也就是将(Perf)ij表示为数据传输延迟的函数,而在硬件条件相同或相近的情况下,数据传输跳数是数据传输延迟的直观反映,因此可使用数据传输路由跳数来表示(Perf)ij.假设在体系结构或协议a的环境下,传输第ij种应用类型数据的平均路由跳数为Hij,单跳数据传输的性能为(Phop)ij,则由式(3)得到(Serv)a=1s.t.∑n此外,从ISP的角度出发考虑,也可将(Perf)ij表示为分组传输所占用的链路次数和路由器转发分组次数的函数.假设在体系结构或协议a的环境下,传输第ij种应用所占用的链路次数和路由器转发分组次数分别为(Link)ij和(Deliv)ij,则由式(4)可以得到(Serv)a=1y(Deliv)ij)s.t.∑n其中,参数x,y分别表示链路占用次数和路由转发次数对最终性能的影响,本文假设它们为1.根据式(2),某种互联网体系结构传输各种应用类型的数据性能越好(如经过的跳数、延迟或占用的资源率越少),其服务适应性值越低,说明其对各种服务和应用的支持性越好.如果体系结构能在网络中数据流量发生变化时保持一个比较稳定平衡的服务适应状态,就可以说这种体系结构的服务适应性较好.但是这并不意味着其应用适应能力好,因为好的传输性能可能意味着更复杂的管理、更大的能耗或更大的经济投入,互联网体系结构的发展趋势还与其经济适应性相关.3.3经济适应性模型互联网体系结构的经济适应性首先取决于其部署应用产生的开销.无论互联网体系结构如何发展,是对当前体系结构进行升级、改造还是完全取代,都必须立足于当前互联网的应用体系.同时,为了支持各种可能的新的应用需求,新的互联网体系结构建设需要开发新的网络设备、升级现有网络协议、提高网络管理水平等.即使针对一种体系结构而言,为了支持新的应用和需求,互联网体系结构仍然需要不断进行升级,这就是互联网体系结构发展过程中的部署开销,这里我们将其记为(Dev)a.例如,基于内容缓存的体系结构需要路由器具备一定的内容缓存能力,无论是在现有体系结构基础上进行升级还是更新当前的设备,都需要付出一定的代价.互联网体系结构的部署开销和互联网体系结构的发展息息相关.从用户的角度来说,这一开销影响着他们为获取相应服务而支付的费用乃至最终的选择;对于网络设备供应商和网络运营商而言,这影响着它们最终的收益乃至最终的部署.除网络硬件、软件等的部署外,互联网体系结构的经济适应性还取决于其应用部署后的维护和管理所产生的支出,这里我们将其记作(Manage)a.适应性模型表示为结合上述两点,我们将互联网体系结构的经济直观而言,越复杂的体系结构(应用机制的复杂性),需要的部署和维护管理开销越大.3.42ACT模型及使用说明系结构应用适应能力U评估模型:综合式(1)~(5),我们构建了如下的互联网体当使用路由平均跳数来表示数据传输性能时,Page8互联网体系结构的应用适应能力评估模型表示为Ua=αs.t.∑n当使用链路占用次数和路由转发次数作为数据传输性能评价指标时,互联网体系结构的应用适应能力模型表示为m∑mUa=αβCs.t.∑nj=1要说明一点,该模型不仅适用于对不同互联网体系结构的发展进行评估,也适用于评估某种互联网技术或协议.同时,它有助于确定互联网体系结构在不同应用需求下的演进路线.用户和ISPs可以根据各自应用数据类型下的2ACT取值对所需采用的协议或机制进行恰当的选择,具体操作步骤如下:(1)测量网络内部各类型应用数据流量的比例;(2)统计部署某种应用协议或体系结构后的数据传输性能、路由开销、链路开销、应用部署开销和维护开销等,并对带宽等性能值及开销进行定价;(3)根据式(6)进行计算得到相应的2ACT值,由此确定各种协议或体系结构的应用适应能力,并选择适用的协议或体系结构.4基于2ACT模型的In-network内容缓存机制分析随着互联网的发展,互联网应用类型及应用需求发生了巨大的变化.早期的互联网仅用于进行文本文件通信及邮件通信.而现在的互联网已经发展成为一个大型的数据中心,P2P、文件共享、video多媒体流量呈不断上升的趋势.2013年5月,思科发布CiscoVisualNetworkingIndex(VNI)Forecast(2012~2017)①报告,预测2012年占互联网流量57%的video到2017年将达到互联网流量的69%.互联网应用需求的发展改变了传统互联网的应用方式,也促进了对新的互联网体系结构通信模式的思考.为适应互联网中数据类型的变化,研究者们开始构思适用于多媒体等应用类型的面向内容的体系结构[23].应用层内容分发网络CDNs(ContentDeliveryNetworks)及P2P(Peer-to-Peer)网络对面向内容的通信模式进行了初步尝试并取得了巨大的成功.随后,致力于标准化内容分发技术的通信网络-信息中心网络(InformationCentricNetwork,ICN)[24]开始受到关注,相关的研究项目包括CCN[25]、NDN[4]等.面向内容的体系结构和通信模式的核心目标是高效的将数据发送到相应的目的地.鉴于多数用户和应用通常只关心获取的内容本身,而不关心获取内容的目的地,加之当前的硬件设备具备了一定的条件、在更便宜的存储和带宽的支持下,在网络中进行大量数据备份的In-network内容缓存机制成为面向内容通信模式的最根本机制.它允许在传输路径上的任意位置进行内容缓存,接收方无需依赖于端节点获取内容,实现了通信方式由Where(Who)到What的转变,提供了更高的网络利用率.有研究表明In-network内容缓存机制可以提供更好的数据传输性能,即更低的延迟和更高的准确性[26].但是,这并不意味着In-network内容缓存机制在任何情况下都具有优势.文献[27]的分析说明CCN的性能与缓存内容的流行度、缓存路由器的大小、内容的位置都有关.我们认为这一结果同样适用于In-network缓存机制.而且,In-network缓存机制为了更好地支持交互式应用和诸如voice、视屏会议等面向主机的服务,面临更大的挑战,可能导致体系结构的复杂性[28].显然,In-network缓存机制的优越性有待更进一步研究.本节中,我们将利用2ACT模型针对内容缓存机制的以下3个问题进行分析以确定互联网应用数据类型组成对互联网体系结构发展的影响:的影响如何?4.1内容缓存与端到端通信的数据传输性能In-network内容缓存机制与现有通信机制相比,最大的优势在于通过降低数据传输的路径提高数据传输的效率、减少网络资源的占用率.可以说,①http://www.cisco.com/en/US/solutions/collateral/ns341/展的能力和竞争性?(1)In-network内容缓存机制是否具备持续发(2)In-network内容缓存机制是否符合不同应(3)经济因素对In-network内容缓存机制发展用需求下的互联网发展需要?Page9数据传输跳数是用于评估内容缓存机制与传统的端到端传输通信的数据传输性能差异的根本,因此这里使用式(7)来评估两者的应用适应能力.前面已经提到按照应用的方式可将互联网中的应用数据分为可缓存的数据和不可缓存的数据.对于不可缓存的数据而言,无论传输协议和路由协议怎样操作,都需要将数据从数据源发送到接收方.因此,在具备相同每跳数据传输性能的情况下,采用In-network内容缓存机制的体系结构传输不可缓存数据的性能与采用端到端通信机制的体系结构相同.本文中,我们使用PlanetLab网络的端到端平均路由跳数来表示不可缓存数据在网络中传输的平均路由跳数.4.1.1不可缓存数据的数据传输平均路由跳数我们随机选取了PlanetLab分布在全球的130个源节点和580个目标节点,并使用traceroute命令计算任意〈源节点,目的节点〉对之间的路由跳数,得到如图3的结果,并由此统计得到PlanetLab的端到端数据传输路由平均跳数为16,它代表了互联网中端到端数据传输的路由平均跳数.4.1.2可缓存数据的数据传输平均路由跳数In-network缓存机制最大的特色在于可缓存传输的应用数据.在具备内容缓存机制的网络中,靠近接收方的内容缓存可以有效减少数据传输的跳数,然而,对于基于端到端的数据传输而言,对于可缓存数据的传输仍然需要跨越从源端到目的地的整个路径.为了量化可缓存数据在基于内容缓存机制和基于端到端通信机制的体系结构中的传输跳数差异,考虑到任意接收者都可以根据路由传输的层次和逻辑关系构建一个以其数据传输第一跳路由器为根节点的生成树,而根据各种类型的随机生成树计算所需的路由跳数又相当困难,鉴于我们只想获得在两种不同通信机制下数据传输路由平均跳数的相对关系,这里我们使用如图4的一个完全K叉树来进行计算.除此以外,我们还进行了以下的假设:(1)假设树的高度为n,树的叶节点代表诸如终端用户和服务器之类的“通信端点”,树中的其余节点代表诸如路由器的网络元素.根据K叉树的结构和属性,可以得到高度为n的K叉树的叶节点数量为Kn,叶节点之间的平均路由跳数通过计算不同K和n取值下的H,我们得到如图4中的高度为9(n=9)的二叉树(K=2),它的端到端平均路由跳数为16,恰好与PlanetLab中的路由平均跳数相同,我们将基于此树完成后续的工作.(2)假设网络中可缓存的数据项目为m单位,这些数据根据流行程度的不同被归为k个类别中(每类的容量为P)并按照Zipf分布缓存在如图4的二叉树中[29].越流行的内容缓存的位置越靠近叶节点[30].根据Zipf分布的定义可以得到第k类数据内容被请求的概率为qk=C/kα,∑qk=1因此,(3)假设网络中的所有路由器都有一个大小为S的缓存,那么每个路由器可缓存的内容类别大小为(4)假设每一层路由器存储的内容相同,端用户从每一层的路由器获取内容的概率相同,那么,如图4所示,可以得到第j层路由器缓存的数据项为Page10由以上假设及式(10)~(12),可以得到在基于Zipf分布及In-network内容缓存机制的通信模式下数据传输的平均路由跳数为H=K-1Kn-1∑n假设α=1.2,C=0.179,可以得到H=7.通过m、k、P、S等参数的随机变化,可以得到相似的结果,因此,本文中,我们确定在基于端到端通信机制的体系结构中传输可缓存数据的路由平均跳数为16时,基于内容缓存机制的体系结构传输可缓存数据的路由平均跳数为7.4.2实验分析基于In-network内容缓存机制的数据转发依赖于内容进行,目前业界普遍认为这可能产生较IP转发机制更大的每跳性能开销,因此,这里我们假设基于In-network内容缓存机制的单跳数据转发性能低于基于IP的数据转发性能,即前者的转发延迟或资源占用率可能更大.假设基于IP的端到端通信模式中每跳数据转发的性能值为(Phop)IP,那么基于缓存机制的每跳数据转发性能为r(Phop)IP,且r1.此外,我们假设基于In-network缓存机制体系结构的经济开销为基于IP的端到端通信模式体系结构的经济开销的t(t1)倍.综上,假设网络中不可缓存的数据流量比例为p1,可缓存的数据流量比例为p2,且p1+p2=1.根据式(7),得到UIP=16α(Phop)IP+βCIP,Ucache=αr(Phop)IP(16p1+7p2)+tβCIP.接下来,我们来分析基于In-network内容缓存机制的体系结构和基于IP端到端通信的体系结构在不同应用数据流量比例下、不同的每跳数据传输性能差异r和不同的经济开销差异t下的应用适应能力.(1)不同应用数据流量比例和不同每跳数据传输性能差异r下的应用适应能力评估当t为1时,CIP、(Phop)IP的取值不会对UIP和Ucache的差异性产生影响,为了更清晰地表示两者的变化关系,这里我们将(Phop)IP设为1,CIP为固定常数.当参数r变化时,可以得到如图5所示的结果.由图5可以看出网络中可缓存数据流量比例的变化对于基于IP的端到端通信模式体系结构的应用适应能力没有任何影响,而基于缓存机制的体系结构,其应用适应能力随着网络中可缓存数据流量比例的增大越来越好.当两者的每跳数据传输性能值相同时,即r=1时,基于缓存机制的体系结构的图5相同经济开销下,缓存数据流量比例变化对IP协议和In-network内容缓存机制的应用服务适应能力的影响应用适应能力具有绝对优势.然而,当基于缓存机制的每跳数据传输性能值超过基于IP的端到端通信模式的1.3倍后,其应用适应能力开始相对变差,即使此时网络中的可缓存数据流量比例已超过40%,其应用适应能力仍处于劣势.可见,在确定性能传输的情况下,为了确保基于In-network缓存机制的体系结构具有更好的应用适应能力,其经济开销与端到端IP通信模式体系结构的经济开销的差距不能超过图5中相应的阴影区域,即确定r时,两条应用适应能力曲线之间的区域.(2)不同经济开销对In-network内容缓存机制假设n=CIP/(Phop)IP,如图6所示,随着r、t或n的增大,基于In-network内容缓存机制体系结构与基于IP端到端通信体系结构的应用适应能力之间的差距逐渐增大.另一方面,随着互联网中可缓存数据流量的增多,基于缓存机制的应用适应能力应用适应能力的影响图6不同经济开销、数据传输性能下IP协议和In-networkPage11也越来越好.从图6可以看到,当基于内容缓存机制的体系结构的单位数据传输性能为端到端通信体系结构的1.2倍,且前者的经济开销为后者的1.3倍,经济开销与单位数据传输性能的比值为10时,即使互联网中的可缓存数据流量已经达到50%,也不适于部署In-network缓存机制.5基于2ACT模型的组播协议评估上一节提到,在互联网由“通信通道”向“通信仓库”发展的过程中,诸如视频会议、AOD/VOD、视频广播等高带宽多媒体应用得到了普及并开始逐步取代E-mail、Telnet等传统点到点应用在网络中的主导地位,由此带来的网络带宽消耗、网络拥塞等问题成为未来互联网体系结构需要解决的热点和焦点.增大互连带宽或者QoS机制的应用都是缓解上述网络瓶颈问题的有效办法,除此以外,IP组播技术,即面向一对多、多对多、多对一的组通信技术,因其应用优势,被认为是一种适于多媒体应用类型数据传输的有效方法.IP组播是由Deering等人[30-31]最先提出的.在组播网络中,即使用户数量成倍增长,都不会影响主干带宽,因为其发送的同一数据在物理链路中仅传输一次,减少了网络传输数据包所需的资源,提高了传输效率.虽然,到目前为止,IP组播技术已经历20多年的研究和发展,在协议体系上已经有了较完整的规范,但是并没有取得预想的成功,主要的原因除了可扩展性较差、管理难度较大等技术原因外,商业经济因素也是影响IP组播发展的一个重要原因.本节,我们将量化IP组播的技术性以及经济因素对IP组播发展的影响,以期为IP组播未来的发展提供一定的参考.IP组播与IP单播传输的本质区别在于具有多个接收端的数据传输对互联网的资源占用率不同.因此,这里我们使用式(8)对IP组播和IP单播的差异性进行评估.根据组播与单播的工作特色,我们将网络中的数据流量分为一对一(11)、一对多(1n)和多对一(m1)3种,并假设互联网中3种应用数据流量的比例分别为p1,p2,p3且p1+p2+p3=1.对于一对一或多对一的应用,无论是单播还是组播都需要将每个分组从源端发送到目的端,因此其占用的资源率相同.而对于一对多的应用而言,由于IP组播进行数据传输的方式不同,消耗的带宽则显然低于使用IP单播进行传输的情况.为了便于说明IP组播与IP单播数据传输占用资源的相互关系,假设某一个端用户需要将数据包发送到一个完全K叉树子网中的其它所有用户.在单播数据传输模式下,传输同一个分组需要占用同一条链路多次,通过K叉树的属性分析可得,单播情况下,分组传输所占用的链路次数和路由器转发分组的次数分别为(Deliv)unicast=∑n而在IP组播的情况下,假设所有用户都属于同一个组,此时,发送同一分组到所有用户仅需占用同一条链路一次,因此,总的链路占用次数(即为K叉树的链路数量)和路由器转发分组的次数分别为由式(8)及式(14)~(17),从ISP的角度出发,使用链路占用次数和路由转发次数等资源占用情况来表示数据传输的性能,可以得到Uunicast=α(p1+p2+p3)∑nUmulticast=α(p1+p3)∑n其中,Cunicast为IP单播情况下产生的经济开销,体系结构维护和管理IP组播而产生的经济开销设为rCunicast(r1).5.1等同经济开销下IP单播与IP组播的应用适应能力假设r=1,Cunicast为常数,如图7所示,在经济约束相同的情况下,基于IP组播的体系结构,其应用适应能力始终较基于IP单播的体系结构的应用适应能力强.随着网络中一对多数据传输流量的增加,使用IP组播的体系结构资源占用率相对越来越低,且基于IP单播与基于IP组播的体系结构之间的应用适应能力差距不断增大.由此可见,IP组播从理论上而言的确更优于IP单播,而其经济开销是影响其无法普及应用的重要原因.如果能够很好地解决Page12目前存在的技术难题并保证用于实现IP组播的经济开销低于图中的阈值Costall,则在网络中部署IP组播是有利的.图7等同经济开销下IP单播和IP组播的应用适应能力5.2经济开销对IP组播应用适应能力的影响根据上一节的结果可以发现,IP组播的发展阻力除了技术难题外,主要来源于为实现IP组播产生的各种经济开销.一方面,IP组播要求路由器的路由表和转发表对每一个不同的组播地址保留一个相应的路由表项以便进行分组转发,但是组播地址并不如单播地址容易集成,因此增加了路由器的系统开销和复杂性.此外,由于组播组成员的频繁加入和退出,可能导致路由表不断进行修改和维护,进一步加大了IP组播的管理难度.那么,如何确定经济开销对IP组播的应用适应能力的影响呢?我们对经济开销Cunicast=5000的情况进行了分析,得到如图8所示的结果.图8不同经济约束下IP单播和IP组播的应用适应能力由图8可以发现,随着IP组播开销与IP单播开销差距r的增大,基于IP组播的体系结构的应用适应能力不断下降,并导致当网络中一对多数据流量低于阈值T_all时,其应用适应能力完全低于基于IP单播的体系结构的应用适应能力.例如,当r=3.5,Cunicast=5000时,即使网络中一对多数据流量的比例已达到90%,基于IP组播的体系结构的应用适应能力仍低于基于IP单播的体系结构的应用适应能力.图8的结果直观地说明了降低体系结构本身的复杂性,即降低体系结构进行应用部署、管理和维护的开销等,对于互联网体系结构的演进具有极大的影响.6结论及下一步研究工作互联网体系结构的发展问题是近二十年来学术界和工业界最为关注的重要问题之一.研究者们分别从革命式、改良式、演进式等多个角度提出了各种解决方案,然而实用化的方案却为数不多.究竟哪些方案更符合当前及未来的发展需求?为什么很多理论上符合需求的方法或协议没有得到很好的应用?是哪些因素如何影响并决定了体系结构的发展趋势?我们认为互联网体系结构或协议的发展与其提供的应用服务能力及其为支持应用所消耗的管理、维护等开销密切相关,本文就此提出了一种面向应用适应能力的体系结构评估方法并构建了相应的评估模型2ACT,用于分析不同应用比例及经济因素对互联网体系结构及各种方案持续发展的影响,并由此确定体系结构及协议、机制的可持续发展性.利用2ACT评估模型,本文对当前互联网体系结构的两种重要协议机制:In-network内容缓存机制和IP组播协议进行了分析,结果发现这两种理论上极具优势的协议仅适用于特定的限制条件下.体系结构应用适应能力最直接的作用就是影响用户的选择,可以说,它是用户效用的一个组成要素,在后续的工作中,我们将进一步引入微分方程及用户级联模型等方法来评估用户效用对体系结构演进的影响.
