Page1情景感知的P2P移动社交网络构造及发现算法曹怀虎1)朱建明1)潘耘2)李海峰1)1)(中央财经大学信息学院北京100081)2)(中国传媒大学计算机学院北京100024)摘要如何通过情景感知,获得用户的行为特征,从而自动发现潜在的社会关系,是移动社交网络重要的研究内容之一.该文提出了情景感知的移动P2P社交网络系统架构、聚合模型及发现算法,将用户的位置信息、环境特征、运动轨迹等引入到聚合算法中,智能地聚合成潜在的P2P社交网络,根据用户需求自主发现匹配的社会关系,避免了社交活动的盲目性和随意性.最后对该方案和算法进行了理论分析及实验验证,结果表明该文所提出的方案和算法具有较高的响应速度、准确率及用户满意度.关键词移动社交网络;情景感知;聚合模型;社交发现;P2P;移动互联网1引言社交网络(SocialNetworks)起源于网络交友,Page2移动通信技术的发展[3],具有高度分布、自治、拓扑动态变化等特性的移动无线网络正逐渐成为社交网络的基础,传统依靠Web支撑、集中式的社交网络,很难适应目前动态、异构的分布式移动网络环境,也无法满足自主发现、点对点共享数据等新的需求.同时,人们已不再满足于单纯的交友活动,希望能够根据用户所处的环境、个人爱好、行为特征等情景信息,主动、智能地发现潜在的社会关系,进而获得更多、更有价值的娱乐、交流、合作机会[4].因此,研究如何利用情景感知信息,构造潜在的社交网络,根据用户的兴趣和偏好,自主地发现相关度较高的社会关系,这对于社交网络的进一步发展具有重要的意义.在移动环境下,只有通过情景感知,社交网络用户才能够了解彼此的状态,从而自主发现潜在的社会关系.本文试图将用户的位置信息、环境特征、行为特征、兴趣偏好等作为情景感知的内容,通过智能聚合,形成潜在的P2P社交网络,根据用户的需求自主发现潜在的社会关系.本文主要研究路线如图1所示,首先进行P2P移动社交网络的拓扑构造模型、系统架构、网络聚合模型的研究;在此基础上提出情景感知的P2P移动社交网络聚合算法和社交发现算法;最后,进行算法性能的理论分析和仿真实验测试分析.本文第1节介绍研究背景、研究路线、文章总体结构;第2节对社交网络及情景感知技术的研究现状进行回顾和分析;第3节讨论移动覆盖P2P社交网络的覆盖(overlay)拓扑结构和系统架构;第4节从相似度函数的定义入手,建立移动P2P社交网络的聚合模型;第5节提出情景感知的移动P2P社交网络的聚合及发现算法;第6节对算法性能进行理论分析;第7节对所提出的方案和算法进行仿真实验及对比分析;最后,第8节给出本文的结论和未来的工作.2相关工作社交网络是对真实社交活动的虚拟反映,既来源于现实的社交关系,又具有不同于现实交往的新特征.这一领域的主要研究方向及成果有:(1)对社交网络全网关系图的拓扑性质及信息传播特性的研究[5];(2)基于社交网络数据挖掘的用户行为研究[6];(3)基于Web2.0的社交网络流量特点及群组结构的研究[7];(4)社交网络隐私策略、可信性等的研究[8].以上研究主要是基于集中式的社交网站,关于移动模式下的P2P社交网络的研究目前还较少.情景感知的目的是利用人机交互或传感器提供给计算设备关于人和环境的信息,并让计算设备给出相应的决策.这里的情景是指一系列的环境特征,这个环境特征决定了用户的行为.包括计算情景、用户情景、物理情景、时间情景、社会情景等.情景感知实际上反映了应用从“以计算机为中心”到“以人为中心”的转变,无论是桌面计算机还是移动设备,都应当围绕用户环境自适应地提供个性化的服务.关于情景感知的研究主要有情景的获取、情景的表示、情景的使用等[9].为了提高社交网络的服务水平,研究人员已经开始将情景感知技术引入到社交网络中.目前,主要是利用搜索引擎、数据挖掘技术,通过感知用户的属性特征、使用习惯等来提升社交网络的服务.现有的研究大多是基于Web的,如Sehmidt等人[10]通过整合用户浏览Web页面时的信息,感知个人页面浏览者的行为特征.Acquist等人[11]以Facebook为例,探讨了社交网络中的感知、信息共享和隐私问题,指出用户对社交网络性质、结构和个人隐私设置等内容感知的重要性.Matsuoa等人[12]基于搜索引擎建立了一个社交网络提取系统“POLYPHO-NET”,通过GOOGLE搜索引擎实现了关系的提取、群体结构的检测.Mika[13]建立了一个名为Flink的系统,从网页、个人资料等信息资源提取个人信息,并进行基于语义的推理,实现了在线社会网络的提取、聚集、分析和可视化.从以上研究成果可以看出:结合情景感知技术来研究社交网络是主要研究方向,目前的研究主要基于Web历史数据,基于实时、移动的用户情景感知的社交网络研究还很少.在现实的社会交往过程中,用户通过面对面的交互,可以从相互的接触和非正式的交流中收集所需的情景信息.但是在社交网Page3络环境下,或者不提供情景感知信息,或者非常有限,这样导致社交网络用户对网络内其它用户的情景感知程度普遍较低,丧失了很多互动、合作、参与的机会.目前,移动设备将拥有越来越多的传感功能,包括视频、语音、GPS、重力感应、加速度感应、六轴向陀螺、红外感应等,获得节点的感知信息已不再是困难和昂贵的事情.因此,本文将通过引入更多的情景感知信息,如GPS、轨迹、物理环境、兴趣偏好等,来探讨P2P移动社交网络的构造方法及潜在社交关系的发现算法.3移动P2P社交网络覆盖拓扑结构和系统架构移动P2P社交网络拓扑架构如图2所示,各种移动设备接入的方式不同,如手机用户可能通过3G基站接入Internet,平板电脑、笔记本电脑可能更多的是通过WiFi接入Internet.它们之间形成了一个底层的混合通信网络,同时这些移动设备之间还可以通过蓝牙技术进行短距离共享数据.这些移动设备通过运行授权的客户端软件,在底层混合通信网络的基础上,通过情景感知,自主聚合形成一个潜在的虚拟P2P覆盖社交网络(OverlaySocialNet-work),在这个虚拟P2P覆盖社交网络的基础上,可以进一步实现主动的社交发现服务,向用户推荐满足其要求的社交关系.移动P2P社交网络的系统架构如图3所示,移动客户端具有情景感知、自动聚合、社交发现、社交维护等功能.服务器端具有注册管理、隐私控制、行为记录、用户偏好等功能.用户通过向服务器注册,获得授权的客户端软件,用户一旦运行该软件,在硬件的支持下,就可以获得情景感知的数据,如GPS位置、温度、光照、速度等,当然这些都必须在隐私控制许可的前提下,然后在一定条件(如某地理位置范围内)下,运行分布式的聚合算法[14],自动形成覆盖的社交网络拓扑结构,也就是潜在的社交网络.之后,可以根据用户的兴趣、偏好等,推荐匹配的社交关系,用户可以决定和哪些人交往,进行自己的社交活动(建立好友目录、开始对话、共享数据等).4移动P2P社交网络的聚合模型根据上一节所述,移动P2P社交网络首先要根据用户情景感知的信息进行自动聚合,形成潜在的覆盖社交网络.如果用图论来表示移动节点的聚合问题(MobileNodeClustering,MNC),则一个混合网络可以表示为无向图G=(V,E,WG),其中顶点集V为移动节点的集合,边集E为移动节点间可能的链路的集合,WG(u,v)(u,v∈V)表示移动节点u、v间聚合矢量距离(相似度),移动节点的聚合问题就是将移动节点在其矢量距离空间上划分为不同的子图g1(v1,e1,w1),g2(v2,e2,w2),…,gM(vM,eM,wM)(M为聚集数,vi,ei,wi分别为子图的节点、链路、节点间的矢量距离集合,i=1,2,…,M),且满足下面的条件:①v1∩v2∩…∩vK=;②v1∪v2∪…∪vK=V;③wi(u,v)<WG(u,v),(u∈gi,v∈gi,vgi,i=1,2,…,M)聚合的方法是通过对每个移动节点之间相似度的计算,将节点组织成若干聚集,相似度依赖于节点特征矩阵.划分聚集方法可以描述为:给定L维空间的N个节点X={x1,x2,…,xN},将N个节点分成M个节点子集C1,C2,…,CM(聚心分别为y1,y2,…,yM),使得在一个聚集中的节点彼此尽可能相似,一般有Ci∩Cj=(i≠j),且∪M聚集的方法是将每一聚集描述为一个代表元,对于每一节点,依据该节点与某一聚集代表元的相似程度,决定该节点属于那一个聚集.本文的节点聚合优化模型可归结为下面的求解Page4极小化问题:minD(X,Y)=min∑Nβ犡Ti犢j犡i×犢j+γ犡Ti犢j犡i2+犢j式中:犡i={xi1,xi2,…,xiN}为节点xi的特征向量(具有L个分量),N为节点总数,犢j={yj1,yj2,…,yjL}为聚心节点yj的特征向量(具有L个分量),M为聚心节点总数,∑L点yj的环境相似度,采用欧氏距离表示,犡Ti犢j犡i×犢j似性函数表示,犡Ti犢j犡i2+犢j偏好相似度,采用Tanimoto测度表示其特征共性.α,β,γ表示权重因子,在实际应用中可以根据实际需要调整其数值.由于式(2)为一非凸优化问题,目前还没有十分有效的办法求出全局最优解,下一节将给出一种可行的求解算法.5移动P2P社交网络聚合及发现算法5.1基于确定性退火技术的移动P2P社交网络聚合算法确定性退火技术是美国加州理工学院的RoseF(y1,y2,…,yM,δ)=犡i式中:犡i={xi1,xi2,…,xiL}为节点i的特征向量(具有L个分量),y1,y2,…,yM分别代表聚集C1,C2,…,CM的聚心节点,犢j={yj1,yj2,…,yjL}为聚心节点yj的特征向量(具有L个分量,j=1,2,…,M),N为节点总数,M为聚心节点总数,其它参数含义同式(2).xi∈Cj的概率P如下:P(xi∈Cj)=(e-δα∑Le-δα∑L∑Mk=1博士于1990年首先提出的,它是按自然法则计算的一个重要分支.对于求解以下极小化问题非常有效:这里x可以是连续的、离散的或混合的,E(x)可看作是某一系统的能量.确定性退火技术将极小化问题式(3)看作是求解一物理系统能量极小的状态.首先构造一自由能函数F(x,T),这里x是函数变量,T表示温度.由以上分析知,在某一温度下,系统状态的变化总是朝着自由能减少的方向进行,当系统达到平衡态时自由能函数达到极小.文献[15]证明了当F(x,T)为连续映射时,它的全局极小点xmin(T)为T的连续映射.设T=时,F(x,T)的全局最优点极易求出,而F(x,0)=E(x).确定性退火技术,在每一温度T,以系统在T=T+ΔT时自由能函数极小的状态xmin(T+ΔT)作为初始点,通过求解minF(x,T)的极小点来模拟系统达到平衡态的过程.随着T的减小,F(x,T)的全局极小点不断变化,当T的变化ΔT很小时,可认为xmin(T)位于xmin(T+ΔT)所在的局部极小区域内,故可以用xmin(T+ΔT)作为初始点求解F(x,T)的极小值.当T连续减小速度合理时,可以认为limT→0xmin(T)为问题(2)的全局极小点.对于本文的社交网络聚合问题minD(犡,犢),利用确定性退火技术,定义自由能函数:犡Ti犢j2+犢j2-犡T式中:xi表示某节点(i=1,2,…,N),Cj为某一聚合子集,j,k=1,2,…,M,其它参数含义同式(4).当δ=0时,F(y1,y2,…,yM,δ)关于(y1,y2,…,yM)为连续可微的凸函数,按传统的优化方法极易求出全局最优点[16-17];当δ∈[0,+]时,F(y1,y2,…,yM,δ)关于y1,y2,…,yM为连续可微,F(y1,y2,…,yM,δ)的极小点与极小值为δ的连续映射.在F(y1,y2,…,yM,δ)的极小点处,一阶必要条件满足,即Page5将式(4)代入上式得其中P(xi∈Cj)可由式(5)确定.当δ=0时,有P(xi∈Cj)=((xil-yjl)槡2+βe-δα∑L(e-δα∑L∑M式中,j=1,2,…,M,M为聚集个数.k=1l=1从而,yj=1δ)的全局最优点(因为对于凸规化,局部极小点必为全局极小点),yj为犡中所有点的加权平均.由式(6),可以得到求最优yi的迭代公式:在每一δ(对应温度T,T∝1来模拟聚合系统的平衡态,本文下面将给出利用确定性退火技术的分布式移动P2P社交网络聚合DCMPDA算法(DistributedClusteringforMobileP2PSocialNetworkDeterministicAnnealingalgo-rithm).由于影响移动节点聚合的因素较多(如地理位置、运动轨迹、个人偏好等),用符号Fi(xi1,xi2,…,xiL)来表示这些感知信息(这里i=1,2,…,N,N为节点数,L表示感知因素个数,即特征向量维数),其中Fi为节点xi的影响因素的集合,xiL为i个节点的第L个影响因素.由于xi1,xi2,…,xiL中有些不是基数变量,比如说序数变量如移动速度、温度高低、各种先验指标、用户感受等.为了给聚合提供合理依据,需要从这些数据中提取出有效的可比较数据,必须将这些半定性、半定量的问题转化为定量的数据.取某个因素集合Fi(xi1,xi2,…,xiL),采用AHP(Ana-lyticalHierarchyProcess)方法得到对应各个因素xi1,xi2,…,xiL的权系数wi,它满足如下条件:将变量yj表示成xi1,xi2,…,xiL的线性组合:yj=w1xi1+w2xi2+…+wLxiL,w1,w2,…,wL为线性系数.这样便求出了对应Fi的量化可比数据yj.依次类推解出所有Fi(i=1,2,…,N)对应的量化数据yj便获得一个量化数组y(y1,y2,…,yN).按确定性退火技术的聚合算法中主要迭代式(8)聚合的时候,使用的是分布式聚合方式,采用主从式编程模式,预先随机聚合,将式(8)的计算分散到各个子节点上去执行.下面是并行分布式程序的主要框架.主结点程序:1.先随机聚合,形成初始聚集;2.输入聚集初始数据;3.取yi的初始值为所有聚集点的中心即y01=y02=…=y0M=yj=14.产生Q个任务并将要聚合的节点集X送给各个任务(不妨设Q=M),其中一个留在主结点上,其它在从结点上;5.δ=δ0+cδ0;6.将旧的聚集中心即δ送往各个子任务;7.依次接收各子任务回送的计算结果构成新的聚集中心y1,y2,…,yM,若终止准则满足,则停,输出结果(聚集数、聚心及对应的δ),否则重置初值,对i,y0i=yi,δ0=δ转步4.从结点程序:1.初始化;2.接收主结点数据;3.按式(8)进行迭代,直到迭代终止;4.回送计算结果.5.2移动P2P社交网络维护及社交发现算法5.2.1移动P2P社交网络维护在移动社交网络中,由于节点的移动性、无线信号不稳定及外界的干扰,都可能造成节点失效或者退出系统.因此,必须提供自适应的系统维护机制.节点聚合算法结束后,可以在聚集内推选一个盟主节点和B-1个候选盟主节点,用来维护这个覆盖P2P拓扑结构,同时负责和其他聚集之间的交互.如果有新节点加入,则按式(2)选择最相似聚集优先加入,节点退出时,将告知盟主节点.假设每个盟主节点失效的平均概率为P,则B个盟主节点都失效的概率为PB(1个为主盟主节点,其余为备份盟主节点).因此,至少有一个盟主节点不失效的概率为(1-PB),可以根据不同的情况利用这种方法粗略地估计所需的备份盟主节点的数目.一般来说,为了减小开销,B应取一个比较小的值,这就意味着不能排除聚集中所有盟主节点都失效的情况.因此,每个聚集内节点每隔时间TB将向自己聚集内的盟主节点发送一个“Hello”消息,如果TR时间后仍未收到聚集盟主节点发送的“alive”消息,则认为该盟主节点失效,立即发起盟主节点选举Page6算法.因此,首先要解决网络初始化阶段的盟主节点选举问题,然后解决动态情况下,当所有盟主节点失效后,通过何种选举算法在聚集中选举出新节点,作为聚集中新的盟主节点.本文借鉴了局域网的IEEE802.1D标准,引入了基于生成树(SpanningTree)的选举算法.即通过先“生长(growing)”,然后再“收缩(shrinking)”生成树的方法,达到从聚集中选举出新盟主节点的目的.(1)选取标准定义1.对每个节点i,T(i)为一个非负函数,表示节点i在社交网络中的会话时间.定义2.对每个节点i,H(i)为一个非负函数,表示节点i的能量、信号强度和计算能力等.节点间除了在计算能力、能量、信号强度等能力上存在差异外,在会话时间及行为上也存在极端异构的情况.而一个节点作为盟主节点,一方面应有较强的计算能力、能量、信号强度,另一方面更重要的是能为聚集内其它节点提供稳定的服务,以避免系统的震荡.所以本文用A(i)表示节点i的能力,A(i)=ωT(i)+H(i),ω>1,也即对每个节点,赋予节点会话时间相对较高的权值.从定义可以看出,如果将聚集看作一个无向连通图G,其中G中每个节点赋予一个标识符A(i),则选举算法的目的就是要在G内选举出A(i)不减排序中前B个节点作为新的主盟主节点和备份盟主节点.(2)社交网络初始化阶段的盟主选举首先考虑网络初始化阶段的盟主选举,可以由系统指定任一个节点S发动盟主选举,S为选举算法的源节点,选举算法主要包括以下3步:①“生长”以S为根的生成树.首先,S将向自己邻居节点集合中的每个节点发出选举消息(electionmessage).而聚集中除了源节点S之外的其它任意节点i,如果没有父节点,则i将把收到的第1个选举消息的发送端作为自己在生成树中的父节点,然后j将向自己除了父节点之外的邻居节点集合中的所有其它节点发出选举消息,依此类推.②生成树向根S“收缩”.如果某个节点j收到选举消息,并且j已经有父节点,则节点j将立即向发送端发出一个应答消息(ACKmessage),并且在应答消息中加入自己的节点能力信息.而聚集中除源节点S之外的其它任意节点,一旦收到所有自己发出的选举消息的应答消息后,选出自己以及所有应答消息中节点能力不减排序中前B个节点,将该信息加入到应答消息中,然后再向自己的父节点发送该应答消息,依次类推.③广播新盟主节点信息.最后当选举算法的源节点S,也就是生成树的根节点收到所有自己发出的选举消息的应答消息后,将选出自己以及所有应答消息中节点能力不减排序中前B个节点,就得到了新的主盟主节点和备份盟主节点,并将新的盟主节点的节点标志信息向聚集中所有节点广播(Broadcastmessage),至此整个网络初始化阶段盟主选举算法结束.(3)盟主节点失效后动态情况下的选举算法在实际的移动P2P社交网络中,可能几个节点同时发现所有盟主节点失效,于是同时发起了盟主节点选举算法,并且任意节点还可能在选举算法过程中失效,这将导致其选举过程的不一致或无效,因此动态选举算法主要解决两个问题:①如何处理多个源节点的情况;②如何处理选举过程中节点失效的情况.定义3.二元组SI(i)=〈num,id〉表示一个节点的选举算法标识符,其中num是一个正整数,代表节点i发起的选举算法个数,id是节点i的标识符.定义4.SI(i)>SI(j)(numi>numj)∨((numi=numj)∧(idi>idj)).首先考虑并发的情况.为了避免网络中同时存在多个选举算法,也就是存在多个源节点的情况,每个选举算法的源节点S在发起选举算法时,都会先计算选举算法标识符(定义3),即对SI(S)→num加1,同时把自己的节点标识符加入到SI(S)→id中,然后将SI(S)加入到发出的选举消息中.当聚集中某个节点收到一个选举消息并且已经设置了父节点时,将会比较新的选举消息标识符和当前的选举算法标识符.如果两者相等,则立即向发送端发出一个应答消息ACK,并且在应答消息中加入自己的节点能力信息.如果大于当前自己参加的选举算法标识符,将立即停止当前的选举算法,加入到新的选举算法中,重新开始“生成树”的过程.而如果小于当前自己参加的选举算法标识符,则直接丢弃该消息.同时为了与选举消息保持一致,每个节点的应答消息中也同样包含选举算法标识符,以便自己的父节点辨别不同的应答消息.通过这种方法,将可以保证最后网络上只存在唯一的一个有效选举算法.并发情况下选举消息处理算法的伪代码如下,其中STP表示节点在生成树中的父节点(SpanningTreeParentPeer),LSI(Localsourceindex)保存节Page7点当前正在参与的选举算法的选举消息标识符.算法1.并发选举算法.输入:移动社交网节点信息输出:盟主节点信息On_Receive_Election(NodeSender,NodeReceiver,IF(this.STP!=NULL){IF(LSI>SI(e)){//DiscardthiselectionmessageELSEIF(LSI==SI(e)){//SendACKmessagetosourceimmediatelySend_ACK(sender,ACK,LSI);}//JointhenewelectionalgorithmELSE{//Neverreceiveanyelectionmessagebeforethis.STP=source;LSI=SI(e);Create_Child_Tree(this.STP,e);}5.2.2移动P2P社交网络社交关系发现算法当某个节点i发起社交关系发现请求时,先在聚集内按照P2P的Flood[18]协议进行查找,如果能找到则结束查询请求.否则根据每个聚集内盟主节点逻辑标识,将请求转发给盟主节点,由盟主节点按照Flood的方式将请求转发给其它聚集的盟主节点,转入其它聚集按照同样的方式继续查找,为了保证算法的性能,可以在查找过程中设置一个Flood次数门限值,超过这个值则结束查找,发现算法伪代码如下.算法2.聚集内社交发现算法.输入:社交请求输出:聚集内社交推荐Send_LookupReq(friend)r=nil;n=nil;IF(find_caches(friend)isnotnil)IF(find_rtable(friend)isnotnil)ELSEr=get_approximate(friend);n=r.nexthop;Send_Req(friend,n);Recv_LookupReq(friend)//receivealookuprequestfrompredecessorr=nil;n=nil;IF(find_caches(friend)isnotnil)Send_LookupHit(pref,friend,context);return;IF(find_rtable(friend)isnotnil)r=get_rtable(friend);ELSEr=get_approximate(friend);n=r.nexthop;Send_Forward(friend,n);算法3.聚集间社交发现算法.输入:社交请求输出:聚集间社交推荐Inter_lookupReq(friend)r=nil;n=nil;b=nil;IF(find_caches(friend)isnotnil)ELSERecv_LookupHit(pref,friend,context)6社交发现算法性能的理论分析从上节算法描述可知,无论是系统初始化聚集,还是在新节点加入P2P移动社交网络时,总是向相似度更高的某个聚集点靠近,直到找到所属聚集或者创建新聚集为止,所以节点聚集算法总是收敛的,其查找开销决定了聚集和发现算法的性能.因此,下面将分析算法的平均查找开销.如果将所有聚集的盟主节点组成一个无向图Gs,图中每个节点代表一个聚集的盟主节点,则新节点在聚集盟主节点间的平均查找开销,等于Gs中任意两点间的平均距离Daverage与Gs中相邻节点间平均传输开销的乘积.聚集算法的平均查找开销与Gs中Page8任意两点间的平均距离Daverage成正比.不失一般性,假设Gs共有S个盟主节点,每个盟主节点的聚集邻居个数为m+1(m>2),也即Gs中每个节点的度数为m+1.计算Gs中任意两点间的平均距离Daverage,实际就等同于从Gs任取一节点,然后计算该节点到Gs中所有其它节点距离的平均值.所以不妨从Gs中任取一个节点A,以节点A作为树根来构造一颗树TA.A将它的m+1个聚集邻居节点都加入到树TA中作为A的孩子节点,于是该m+1个孩子节点就组成了树TA的第1层.然后每个孩子节点又将自己除父节点之外的其它m个聚集邻居加入到树中作为自己的孩子节点,于是这(m+1)×m个节点就组成了树TA的第2层,依次类推,直到Gs中所有的节点都加入到树TA中.由于从树根A到树TA中第k层节点的距离是k,若记N(k)代表树TA中第k层的节点个数,树TA中最大层数为Kmax,则得到从A到TA中任一节点的平均距离是式中S表示盟主节点个数.不过由于聚集邻居的随机性,所以在TA中存在很多重复的情况,即某个节点可能有多个父节点,所以上述计算得到的从A到TA中任一节点的平均距离并不等于Daverage.若记U(k)代表TA中第k层中以前从未出现过的唯一节点个数,则Gs中节点间真正的平均距离是为计算U(k),将树TA中所有节点从根节点A开始编号,编号从1开始,顺序为从第1层、第2层到第Kmax层,每层则从左至右.若记第k层最后一个节点的编号为L(k),则有L(k)=1+(m+1)+(m+1)×m+…+设f(t)为编号t的节点加入树TA后,TA中不重复节点个数,则有设x(t)是编号t的节点为新节点的概率,因为在节点t加入TA之前,由f(t)定义可知Gs中已经有f(t-1)个节点加入到TA中,而剩余节点的加入是随机的,所以有期望得到式中S表示盟主节点个数,f(t-1)表示编号为t-1的节点加入到树TA后,TA中不重复节点的个数.记珚f(t)为f(t)的期望,对式(13)和(14)同时取珚f(t)-珚f(t-1)=S-珚f(t-1)珚f(t)=1+S-11+S-1珚f(t)=S1-S-1()S[而显然f(0)=0,所以有又由U(k)、L(k)和f(t)定义可知于是由式(10)和(11)得到Daverage=∑Kmaxkmax珚f(L(kmax))-珚f(L(kmax-1))-…-珚f(L(0))又根据定义有式中S表示盟主节点个数,L(k)表示树TA第k层最后一个节点的编号,f(L(k))表示编号为L(k)的节点加入到树TA后,TA中不重复节点的个数的数学期望.Daverage∑+所以由式(17)和(18)得到式中,Daverage表示任意两个盟主节点之间的距离.将式(15)和(12)代入式(19)得到Page9这就证明了聚合算法和查找算法总是收敛的,并且其查找开销是O(logmS),其中S是P2P移动社交网络中盟主节点的个数,m是每个盟主节点所在聚集内成员的个数.7算法的仿真实验及分析7.1实验环境设置基于混合网络模型建立了实验原型系统,移动图5P2P移动社交网络服务平台架构客户端基于KJAVA平台,采用Java和XML语言实现了如第3节中图3所示的主要功能,使用消息机制在各个服务中传递数据.图4展示了服务器端的主要处理流程,图5展示了P2P移动社交网络服务平台架构.图6展示了智能手机客户端界面,图7显示了数据库中移动用户相关的感知信息.移动客户端所使用的移动设备有智能手机、平板电脑、笔记本等,接入方式有3G网络、WiFi.7.2聚合算法的仿真实验本文所提出的基于确定性退火技术的分布式移动P2P社交网络聚合DCMPDA算法是一种分布式Page10并行算法,要在移动设备上运行.由于移动设备能量和运算能力有限,所以该算法的开销、收敛速度和通信量对系统的整体性能至关重要.为此,我们进行了大规模的仿真实验来检验其性能.模拟实验在网络拓扑生成器BRITE(BostonUniversityRepresenta-tiveInternetTopologyGenerator)的Java开源版本以及离散事件驱动模拟程序包Simjava基础上,通过Java语言实现,忽略了实际网络传输过程中的延迟、拥塞、丢包等细节问题.整个模拟实验包括节点物理拓扑生成、聚集算法、离散事件驱动模拟程序、情景感知信息模拟、消息传递以及发现算法等6个主要部分,中间节点的物理拓扑利用BRITE生成.BRITE是波士顿大学开发的一个通用拓扑产生器,它实现了Waxman、BA、BA-2、GLP多种拓扑生成算法,并可以在AS(自治域)级和路由器级产生拓扑图,用自顶向下和自底向上两种方法来产生Transit-Stub层次模型.为尽量接近现实的移动混合网络拓扑结构,本文模拟实验中的节点物理拓扑图按照GLP生成算法在BRITE路由器级生成,并且随机注入地理位置、温度、光照、运动轨迹等感知信息.在仿真系统中运行传统的k-means聚合算法和本文所提出的社交网络聚合DCMPDA算法,所得到的聚合拓扑图分别如图8、图9所示,可见DC-MPDA算法所得到的聚合结果规模适度,比较接近现实的社交关系.算法运行所花费的时间开销如图10所示,可以看出随着节点个数的增加,DCMPDA聚合算法所花费的时间开销增长平缓,具有良好的扩展性,而k-means聚合算法则呈现指数增长的趋势.DCMPDA算法消息总量随节点数的变化如图11所示,由于DCMPDA算法是一种分布式的并行算法,其交互的消息总量随着节点数的增加呈现快速增长的趋势,如何减少其交互的消息总量将是下一步需要研究的问题.图10DCMPDA算法和k-means算法性能比较图11DCMPDA算法消息总量随节点数的变化7.3社交发现响应速度仍然采用7.2节的实验环境,对社交发现进行仿真测试.一种是在预先聚合的基础上按照本文所提出的算法来发现潜在的关系,另一种是直接在所有用户里遍历查找.推荐朋友总数门限值设为20.结果如图12所示,可以看出随着用户数的增加,本图12本文聚合发现算法与遍历查找算法响应速度比较Page11文聚合发现算法的响应时间增长缓慢,而随机遍历查找则呈现出指数增长的态势.究其原因,是因为本文的算法是一种分布式并行算法,受问题规模的影响不大.7.4实际移动用户社交网络聚合及社交发现测试我们选择了30个实际的移动用户作为测试对象,注册下载了P2P移动社交客户端软件,同时运行该软件,进行了实际的情景感知聚合及社交发现测试,图13展示了通过情景感知自动聚合的结果,虚线连接表示潜在的社交网络,实线表示的是根据用户提交的请求,自动发现的潜在朋友.如图所示,可见满足其要求的朋友多数都属于潜在社交聚集中.这表明,自动感知聚合的潜在社交网络与用户可能感兴趣的社交关系具有极大的相关性,情景感知的自动聚合将加快自动社交发现的速度,对于社交发现具有极大的帮助,避免了社交的盲目性和随机性.7.5情景感知聚合发现用户满意度评价、查准率和查全率比较为了测试社交发现的实际效果,随机选取了不同的人群,进行了多次测试.每次测试选择30个测试对象,对结果进行了满意度的问卷调查和人工访谈,并对多次测试的结果进行统计分析.将本文情景感知的社交发现和根据用户注册信息遍历查找进行对比,其查全率、查准率和用户满意度如图14所示,可以看出,情景感知的聚合发现具有很高的查全率、查准率和用户满意度.8结论和未来的工作如何通过情景感知,获得用户的行为特征,从而自动发现潜在的社会关系,是移动社交网络重要的研究内容之一.本文提出了情景感知的移动P2P社交网络的系统架构、聚合模型及发现算法,将用户的位置信息、环境特征、运动轨迹等引入到聚合算法中,智能地聚合形成潜在的P2P社交网络,根据用户的需求自主发现潜在的关系,避免了社交活动的盲目性和随意性.并进行了算法的理论分析及实验验证,结果表明本文所提出的方案及算法具有较高的响应速度、准确率及用户满意度,同时该系统具有一定的负载均衡和自适应能力.目前本文的实验系统是一个原型系统,规模较小.下一步需要进行更大规模的实际应用测试.目前我们的工作采用的定位技术基于GPS,但实际的定位技术有很多,包括移动基站定位等;覆盖的P2P社交网络用户之间通信采用Flood协议,这个协议是非结构化的,其产生的消息总量过多,是否适合大规模应用,还需要进一步的测试;采用新的通信协议实现(如基于场景的无线点对点通信:如蓝牙协议),会提高信道的使用效率.此外,隐私控制和信用管理是社交网络构造和发现的重要影响因素,这也是将来需要进一步研究的内容.
