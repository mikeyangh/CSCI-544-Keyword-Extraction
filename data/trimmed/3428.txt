Page1一种基于随机波束天线的自组网拓扑控制协议李晓鸿张大方陈文斌王东(湖南大学信息科学与工程学院长沙410082)摘要定向天线能显著提高无线系统的性能和容量,但采用定向天线的自组网拓扑构建问题比全向天线网络复杂.拓扑控制是一种保证网络连通和节能的有效手段.文中通过对随机波束自组网连通问题定性和定量的分析研究,运用样方统计法推导保证拓扑图高概率连通的临界邻居数;在此基础上,提出了一种基于邻居数的分布式拓扑控制协议,节点独立确定天线波束的朝向和信号发送功率大小,使得天线覆盖邻居节点个数等于(或略小于)预先设定的临界邻居数.该协议的特点是获取邻居信息的代价小,且运行简单.仿真结果表明:新协议在维护网络高概率连通的同时保证了节点最小能量特性;在节点能耗和网络传输性能等方面均优于全向天线基于邻居数的拓扑控制协议.关键词自组网;定向天线;拓扑控制;能量效率;吞吐率1引言自组网作为一种无中心、自组织的多跳无线网络,由于其具有抗毁性、自组织性与机动性等特点,在无线通信领域发挥着越来越重要的作用.为保证自组网络能即时、通畅和高效通信,提高自组网的传输能力和减少节点的能耗是自组网面临的关键问题[1-2].自组网中的拓扑控制技术是指在维持拓扑的全局优化(如连通性)的前提下,通过调整节点的发送功率和建立合适的相邻关系的方法构建网络拓扑.文献[3-4]对目前几类经典的拓扑控制算法的仿真实验表明,拓扑控制生成的拓扑图都保证连通且具有较小的节点度和传输半径,这样不但可以节省通信能量、简化网络拓扑,还可以减少节点在无线信道上的碰撞,提高信道的空间复用度,最终提高整个网络的传输性能.其中基于邻居个数信息的拓扑控制算法,由于获取信息开销小,因此具有较强的实用性[5-6],但是这些拓扑控制算法都是假设自组网节点使用全向天线.与全向天线相比,智能天线技术中的定向天线阵列[7]具有灵活的波束控制、高的信号增益、极强的干扰抑制能力以及高的空间分辨能力等优点,可以极大地提高无线信道资源的空间复用度.另外,在相同的发送功率的情况下,定向天线在主瓣方向上具有比全向天线更远覆盖距离.文献[8-9]表明,在相同场景下,节点使用定向天线将比全向天线更加能提高无线自组网的传输能力,并减小端到端的延迟.智能天线技术和拓扑控制技术作为提高系统资源利用率的有效方法正得到人们的日益关注.研究这两种技术在自组网中的应用,更是当今热门的课题.定向天线自组网的拓扑控制方法[10-12],基本思想都是预先假设天线为全向天线,利用已有的全向天线拓扑控制算法求得每个节点的逻辑邻居后,根据逻辑邻居的方位,利用多波束转换天线的特性打开合适的天线扇区,实现网络连通.但是,对于自适应波束定向天线[7],由于天线形成的增益方向性强的主波束的唯一性,使得上述的拓扑控制策略很难适用于自适应波束天线自组网.本文针对自适应波束天线,设计随机波束自组网模型,研究拓扑控制策略以保证网络连通和提高自组网性能.运用样方统计法对网络拓扑进行连通性理论分析和实验验证,推导出保证网络高概率连通的临界邻居数;在此基础上,提出一种分布式拓扑控制协议———随机波束K邻居协议(RandomizedBeamformingK-NeighTopologyControl,RBNTC).主要思想是,每个节点独立确定天线波束的朝向,获得邻近节点的数量信息后,调整发送功率大小,构建一个节点度等于(或略小于)临界邻居数的拓扑图.RBNTC只需要获取邻居个数信息,具有获取信息开销小、实用性较强的特点.仿真结果表明,RBNTC拓扑控制协议可保证网络高概率连通;在减小节点能耗和提高网络传输性能等方面均优于全向天线基于邻居数的拓扑控制协议.2随机波束网络模型2.1天线和波束模型随着数字信号处理技术和天线阵列技术的发展,定向天线的成本和设备大小已经可以应用于体积较小的无线设备[8].定向天线按照波束形成方法分为多波束转换天线和通信功能更加强大的自适应波束天线两大类[7].自适应波束天线采用更加复杂的天线阵列和数字信号处理技术识别邻近节点的方向,快速形成并调整主瓣波束的朝向,覆盖希望通信的邻近节点.本文假设所有节点分布在一个二维平面中,节点使用均匀圆阵的自适应天线.均匀圆阵的天线增益公式[13]为gN()=N×[J0(kρ)+2∑其中,N是阵元数,k是自由空间波数,Jm(x)是第一类m阶Bessel函数.ρ=R(cos-cos0)2+(sin-sin0)0是波束主瓣的朝向,ξ=tan-1[(sin-sin0)/(cos-cos0)].图1(a)是主瓣朝向0为0°时6阵元均匀圆阵的增益模式.由式(1)可知,波束天线会在某个朝向上形成一个主瓣,而在其余方向上形成多个旁瓣,一个M元自适应天线阵在主瓣方向上可以提供M倍的全向天线增益,而旁瓣的增益大多比全向天线小[14-15].为便于讨论,本文假设每个节点使用的波束天线增益如图1(b)所示,0表示波束的朝向;θ表示主瓣波束的宽度;Gm表示主瓣的天线增益,Gs表示旁瓣的天线增益,且满足0<Gs1Gm关系,而当Gm=Gs=1时则表示全向天线增益模式.Page3图1自适应波束天线增益模型2.2链路模型如图2所示,节点采用波束天线,在发送和接收信号时都采用相同的增益模式.信号的发送功率Pt和接受功率Pr的关系为其中,Gt,Gr分别是发送、接收天线的增益,λ是波长,d是发送节点与接收节点之间的距离,α是路径损耗因子(α2),L为系统损耗因子(L1).假设传输介质是对称的,所有节点的信号功率接收阈值Pr0相等,那么如果Pr大于或等于Pr0时,信号才能被正确接收,即表示两个节点之间可以建立对称链路.同时,在通信过程中,如果接收节点能获取发送节点的发送功率和节点之间天线的增益,那么根据实际信号接收功率可利用式(2)计算出节点间的距离.假设在全向天线模式时,节点之间能够建立链路关系的最大距离是d0,若不改变发送功率,在波束天线模式时,能够建立链路关系的最大距离则为αGtG槡r,如果GtGr大于1,天线的增益使得节点可d0以与更远的节点建立链路.图2链路模型(发送和接收节点均采用波束天线)2.3随机波束网络模型由式(2)可知,如果节点能获得邻近节点的位置,那么可以根据式(1)调整主瓣波束朝向合适的方向,构建优化的拓扑结构.但需要增加用于定向邻居发现的额外信号和计算信号波达方向的处理开销,为了优化多跳路径性能还要求多个节点使用复杂的协议进行协调.本文为了设计一种能有效适用于自组网的完全分布式的拓扑构建方法,采用了一种简单的波束形成模式,每个节点采用阵列天线形成定向波束,主瓣波束宽度都相等,且恒定不变,波束朝向0是[0,2π]中的一个随机值,且完全独立于网络中的其它节点.波束的增益模式一旦确定就固定不变,且用于信号的发送和接受.每个节点的最大发送功率Ptmax和信号接受功率阈值Pr0相同,但可以独立调整发送功率Pt的大小.这种无线网络模型称为随机波束网络模型.2.4随机波束模型中节点的通信区域为了便于讨论,设ro为全向天线在传输功率等于Pt时的覆盖半径.假设功率不变且波束天线在各个波瓣区域内的增益为定值,在随机波束网络模型中,设rmm、rms和rss分别为两个节点的主瓣互相朝向对方、仅有一个节点的主瓣朝向对方和两个节点的主瓣互不朝向对方时的直接通信距离.根据式(2),可以得到rmm=r0rss=r0定义1.随机波束模型中,每个节点可以与周围邻近节点互相直接通信的范围,称为节点的有效区域S.如图3所示,节点u的有效区域由3个部分构成:I区中所有节点都可以与节点u直接通信,其范围为SI=πr2ss+θ(r2ms-r2ss)/2.II区和III区中,只有主瓣朝向节点u的节点可以与节点u直接通信,而在随机波束网络模型中,某节点主瓣朝向节点u的概率为θ/2π,则SII=[(2π-θ)(r2ms-r2ss)/2]θ/2π,SIII=[θ(r2mm-r2ms)/2]θ/2π.所以,节点u的有效区域的范围为S=SI+SII+SIII.在有效区域S中,可以与u建立直接双向链路关系的节点数,即为节点u的度.Page4图3随机波束网络模型中节点的有效直接通信区域3随机波束网络连通性研究在保证网络连通的基础上,如何最小化节点的度(即关键邻居数)是无线自组网的一个基本问题,也是基于邻居数拓扑控制技术研究的前提[3].针对全向天线自组网,文献[16]证明如果每个节点连接最近距离的邻居数超过5.1774logn,那么当n趋向无穷大时自组网连通的概率趋向1.文献[5]则通过仿真实验发现保证自组网高概率连通(节点数在50~500之间)的关键邻居数为9~11.与全向天线信号覆盖区域被模型化为一个圆形碟子相比,随机波束天线模型使得自组网连通问题的研究更加复杂[14].近几年一些学者开始关注波束天线对自组网连通性的影响.相比全向天线,文献[14]通过仿真发现随机波束天线可以提高自组网的连通性.文献[15]则进一步定性和定量分析了随机波束天线的物理参数(如天线阵列的阵元数、信号传播路径损耗和衰落)对自组网连通性的影响,确定了能提高网络连通性的天线参数范围.文献[8-9]表明,在相同场景下,节点使用定向天线将比全向天线能提高无线自组网的传输能力,并减小端到端的延迟.这些成果为研究基于随机波束天线的拓扑控制技术奠定了基础.随机波束自组网拓扑控制问题是指,在随机波束网络模型中,如果每个节点可以独立调整自己的发送功率,那么如何减小发送功率,在保证整个拓扑图连通的基础上,减小能耗和优化网络性能.为了求取节点合适的发送功率,下面讨论保证随机波束网络连通的关键邻居数问题.本文采用样方统计法,在有一定大小的面积上测量个体数量,通过统计方法,从而确定观测对象个体的密度或者组成.如果节点是均匀分布的,基于这种统计模型,位于样方区域A中的点数服从参数为λA的泊松分布(其中A表示区域A的面积,λ表示泊松过程的密度(intensity))[17].基于这个模型,设随机波束网络中n个节点均匀分布在一个很大的区域M中,节点密度ρ=n/M.令节点的有效区域S作为样方,那么S中的节点个数服从均值为ρS的泊松分布,有效区域S中的节点数目的概率密度函数为由式(3),可以得到节点u的天线没有覆盖一个节点的概率为利用随机几何学[18]中关于点覆盖问题的概念,一个节点不被其它节点的天线有效区域覆盖的概率为(1-S/M)n.当M趋向无穷大时,P(节点u不被其它节点天线覆盖)=由式(4)和(5)可以得到节点u的度大于0的概率为假设统计方法满足独立无关性,那么在一个很大的区域M中均匀分布n个点,图G没有孤立节点的概率为P=()nnP(d(u)>0)nP(d(u)=0)0=(1-e-2ρS)n当n1时,图连通的概率近似等于图没有孤立点的概率[19].利用推导的式(7)可以证明定理1,求得随机波束网络,图连通概率至少为P的节点临界覆盖区域的下限.定理1.设n(n1)个节点均匀分布在一个很大的区域M中,节点密度为ρ.定向天线随机选择一个朝向,天线的有效区域为S.如果要保证网络连通概率至少为P,那么节点传输功率必须使得节点的有效区域S满足下面的公式由式(8),令节点天线有效区域S等于图连通概率为P的临界覆盖范围,利用式(3)可以得到定理2,求得图G中节点最大覆盖节点数的概率分布.定理2.设n(n1)个节点均匀分布在一个很大的区域M中,节点密度为ρ.天线波束随机选择一个朝向,有效区域为S,那么图G所有节点的最大覆盖节点数K(G)小于等于k0的概率P满足下面的公式Page5定义临界邻居数K表示保证拓扑图高概率连通(99%)时最小的覆盖邻居节点数.对于不同的节点数n,利用式(8)计算出图连通概率99%时的有效区域S,然后代入式(9)计算满足P(K(G)k0)>99%的最小的k0值,可以求出保证图99%以上概率连通的临界邻居数K.图4n=150时,拓扑图连通的临界邻居数K的分布及随K值变化时拓扑图连通概率的变化图5是临界邻居数K值随节点个数变化的仿真结果与理论分析结果的比较.通过实验结果的分析,可以发现随着节点数增加,K值的增加趋势较为平缓,临界邻居数的变化趋势与定性分析的结果基本吻合.4随机波束犓邻居拓扑控制协议描述通过对图5的观察,可以发现K值的增加趋势较为平缓.在随机波束自组网中存在特定的临界邻居数K,设置K=12时可以保证拓扑图的连通概率大于99%.由此提出一种随机波束K邻居拓扑控制策略RBNTC,节点调整信号波束覆盖范围仅仅覆盖K个邻居,既能保证拓扑图高概率连通,又能提高节点的能量有效性.而且为了保证实用性,提出的拓扑控制策略具有分布式、异步和基于局部信息的下面通过模拟实验验证临界邻居数的有效性.在1000m×1000m的区域内均匀分布节点,节点数从50~250之间变化.根据式(1),设置节点天线主瓣波束宽度θ=60°,波束Gm=4,Gs=0.8[14-15].对于每一种节点数n,每个节点随机选择天线主瓣的朝向,生成60000幅连通拓扑图,对每个生成拓扑图求出并记录满足图连通的最小覆盖节点数K.图4说明n=150时,K11时拓扑图连通概率99%.特点,这些特性可以减小获取拓扑控制算法需要的信息和消息交互的开销,提高算法运行效率[6].设Pmax表示节点的最大发射功率,假设所有节点设置发送功率为Pmax能够保证网络拓扑连通.Popt(u)表示节点u的最优发射功率.RBNTC策略分为邻居发现和邻居选择两个过程.对于自组网中的每个节点u,节点可以在不同时间启动RBNTC策略.但是所有节点启动的时间间隔要小于一个常数Δ.节点u在t时刻激活(tu∈[0,Δ]),随机选择一个波束朝向Φ(Φ∈[0,2π]).首先执行如下邻居发现过程:1.假设节点在时间间隔[tu+Δ,tu+Δ+d]内能够竞争到无线信道,以初始功率Pmax周期性通告自己的标志信息,信息中包含了节点u的ID号以及此时节点u的发射功率Pmax(u).2.对于接收到的其它节点v发送的通告信息,获取接收信号的功率,根据式(2)求得节点u发包给v的最小发送功率P(u,v);3.节点u把邻居节点v的ID和P(u,v)存入其本地邻节点集NE(u),并按照最小发送功率P(u,v)递增的次序排序[设τ为步2和步3执行时间的上限].4.根据文献[5],最多需2Δ+d+τ,邻居发现过程结束,所有节点分别执行邻居选择过程.节点u在NE(u)中选取其中所需发射功率最小的K个节点的ID加入标志信息中(如果邻居数小于K个,则把所有邻居ID加入标志信息中),采用第一步的方法通告.5.节点u对于接收到的其它节点v发送的通告信息,Page6若(邻居选择)通告信息中包含u的ID,把其本地邻节点集NE(u)中邻居节点v的ID标记为对称邻居.6.最多需4Δ+2d+τ,所有节点的邻居选择过程结束[5].每个节点u以各自邻节点集中到最远的对称相邻节点所需的功率为最优发射功率Popt(u).RBNTC策略的步1保证此算法为分布式算法,步2和步5说明每个节点只需收集自己局部的信息,即收集与邻居节点有效通信的功率信息统计邻居个数信息,由于获取信息开销小,使得这类拓扑控制策略具有较强的实用性,且每个节点只需发送图6拓扑控制协议状态转移图主要状态实现的功能如下:(1)INIT.进行网络初始设置;开启定时器Timer1,时间从[0,Δ]中随机选择;自调度中断事件转向IDLE.(2)IDLE.判断中断事件类型,并根据Tc_In-terrupts_Process()加以处理;如果信道空闲条件满足,直接发送;否则进入帧间等待DEFER状态;若Timer1超时,进入邻居信息收集阶段,转向GNR_HELLO状态;若Timer2超时,进入交换邻居表阶段,转向GNR_NEIGHS状态;若Timer3超时,交换邻居表完成,进入拓扑控制实施阶段,转向TC状态.(3)GNR_HELLO.开启定时器Timer2,时间为d;生成TC/HELLO帧并放入发送队列;在离散时刻tcurrent,tcurrent+i,tcurrent+2i,…,tcurrent+d预设中断事件Generate_Hello,模拟“在d段时间内不断发送TC/HELLO”;完成之后转到IDLE.(4)GNR_NEIGHS.开启定时器Timer3,时间为d;生成TC/NEIGHS帧放入发送队列,在离散时刻tcurrent,tcurrent+i,tcurrent+2i,…,tcurrent+d预设中断事件Generate_Neighs;完成之后转到IDLE.(5)TC.每个节点以各自邻节点集中到最远的两次有效通告消息,使得算法需要的消息交互开销为O(n)[5-6].根据文献[5]中的定理2,算法步5经过拓扑边对称化处理后仍然能保证网络高概率连通.为了提高RBNTC的实用性,本文将其与MAC协议结合,实现有效支持拓扑控制应用的MAC协议.基于网络仿真工具OPNETModeler[20],结合拓扑控制策略和IEEE802.11CSMA/CADCF机制,采用有限状态机编程机制仿真实现拓扑控制协议.图6给出了拓扑控制协议状态转移图.对称相邻节点所需的功率为最优发射功率Popt,调整发送机的功率强度;完成之后转到IDLE.(6)DEFER、BACKOFF、TRANSMIT和W_ACK分别按照IEEE802.11DCF载波侦听/冲突避免机制,实现帧间等待、退避、传输和等待回复的功能.另外,在每个非强制状态(实心圆)的出口都用会调用Tc_Interrupts_Process()判断中断事件的类型,进行相关处理之后再根据满足的条件转向下一状态.Tc_Interrupts_Process()主要负责处理以下中断事件:(1)Higher_Layer_Arrival.上层流中断,收到上层发来的数据包.将包放入发送队列.(2)Physical_Layer_Arrival.下层流中断,收到物理层信号.包类型若为RTS/CTS/DATA/ACK,判断是否发往本机,若是则接收并设置响应动作,否则丢弃;若为TC/HELLO或TC/NEIGH,提取包中的源MAC地址ID,更新自己的邻节点集后丢弃包.(3)Generate_Hello.产生TC/HELLO帧,放入发送队列.(4)Generate_Neighs.产生TC/NEIGHS帧,Page7放入发送队列.3个定时器的时间长度要保证节点能够竞争到无线信道,可以设置为0.1s[5].在网络初始的一段特定时间内,所有节点的MAC层自动产生并使用最大发送功率Pmax发送控制分组“TC/HELLO”.其分组格式类似于RTS,为广播帧,不需要确认机制,信道接入方式遵循载波侦听冲突避免机制.节点在邻居选择阶段,产生并发送控制分组“TC/Neigh”,包含所选K个邻居的ID,其发送方式和控制分组“TC/HELLO”一样.当拓扑控制进程结束时,每个节点,在邻节点集中,以各自到最远的对称相邻节点所需的功率为最优发射功率Popt(u).5仿真与分析无线网络拓扑最重要的性能是其能量有效性,因为它直接影响节点和网络的生存时间.本文评估了网络中节点采用RBNTC拓扑控制策略后,平均发射功率的变化;比较了RBNTC与文献[5]中全向天线K-Neigh(K=12)拓扑控制算法的节能性.实验环境参数与第3节实验相同.从图7可以看出,与未经拓扑控制的节点发射功率(参考文献[5]中设置的节点最大半径计算Pmax,所有节点均以最大发射功率进行通信)相比,拓扑控制后确定的节点发射功率显著减小,且随着节点密度的增加,拓扑控制对节能性的提高更加有效;当节点采用波束天线后,与全向天线拓扑控制算法相比,RBNTC所确定的节点平均发射功率又减小近一倍.因此,RBNTC在维护网络连通性的同时保证了节点最小能量特性,在提高网络节点节能性方面效果显著.图7节点分别经过RBNTC、全向天线K-Neigh为了分析拓扑控制对网络性能的影响,本文采用OPNET10.5网络仿真工具[20],仿真场景如下:网络节点数以20个节点的增量在50~250之间变化.节点随机分布在1000m×1000m的二维区域中,每个节点采用自适应波束天线(主瓣波束宽度为60°,主瓣增益为4,旁瓣增益为0.8)[14-15],波束朝向水平,方向随机选择后固定不变,天线高度为1.5m,接收阈值为-80dbm,节点最大发射功率为0.0064W.随机选择20个源节点,每个源节点的目的节点也随机选择,数据包的大小为1Kbits,发送间隔时间为possion分布,每个源节点产生分组速率(单位为包/s)从0.5~5.使用DSR路由协议和基于802.11标准的MAC协议,传播损耗模型使用自由空间模型[14-15].仿真时间为500s.因为在不同节点数的网络中进行拓扑控制后对网络性能的影响相似,本文以150个节点的仿真结果进行分析.图8反映了在不同业务负载下的网络分组交付率的变化,交付率是指总接收数据量和总发送数据量的比值,可以反映网络的数据传输效率.当网络负载较低时,网络中的通信碰撞概率较低,路由稳定且开销小,有无拓扑控制对网络的性能影响不是很大.在节点都以最大功率发送信号构建的网络中,每个节点通信范围内的节点数远多于拓扑控制时,随着负载不断加大,各个分组竞争信道的概率变大,而分组对信道竞争的加剧会使得链路失败概率增加,导致DSR路由协议不断寻找新的路由,产生大量的路由开销(如图9所示)占用网络带宽,从而显著降低业务流的端到端通过量.如果发送功率不变,节点采用波束天线,那么每个节点的干扰范围进一步增加,使得DSR路由探测包由于竞争信道困难,出现无法发现有效路由的特殊情况,使得即使在网络负载较低时,网络吞吐率也较小.随着网络负载的增加,节点间的干扰是影响网络吞吐量的主要因素[12,21].通过对网络性能的仿真我们可以看出,与最大功率拓扑相比,拓扑控制通过减少节点的发射功率,建立了相对而言较为稀疏的连通网络,提高了空间复用度,增加了网络吞吐率;但是,随着网络负载的增大,网络中节点间发包冲突的概率增大,所有拓扑图对应的网络吞吐量呈下降趋势,拓扑控制后的网络性能优势由于受到MAC层竞争机制的影响而有所减弱,即拓扑控制只是延缓了网络性能的下降.通过实验发现,波束天线由于天线覆盖范围的方向性,与远距离的(主瓣中的)邻居通信时,干扰的节点数比全向天线少.如图8所示,在同样网络负载时,与全向天线K-Neigh拓扑控制算法相比,RBNTC拓扑控制策略构建的网络拓扑中,分组干扰的概率减小,减小了链路失败的情况,减小了路由开销(如图9所示),保证了网络吞吐率.Page86结论随着数字信号处理技术和天线阵列技术的发展,使得自适应波束定向天线能显著提高系统容量和通信质量.在自组网中使用定向天线、拓扑控制技术是保证网络连通和节能的一种有效手段.本文通过对随机波束自组网连通问题定性和定量的分析研究,推导了保证拓扑图高概率连通的临界邻居数K;在此基础上,提出了一种基于邻居数的分布式拓扑控制策略,节点独立确定天线波束朝向和信号发送功率大小,使得天线覆盖邻居节点个数等于(或略小于)某个预先设定的特殊常数K.该算法的主要特点是获取算法执行所需数据的代价小,且算法运行简单快速.仿真实验说明,当节点采用波束天线后,RBNTC可以保证整个网络的连通概率大于99%,与全向天线拓扑控制算法减小能耗相比,RBNTC所确定的节点平均发射功率又减小近一倍,进一步提高自组网节点的能量有效性;同时,由于定向天线提高了空间复用度和拓扑控制构建的稀疏拓扑结构,减少了干扰,因而优化了网络吞吐率.通过仿真发现,网络性能和天线属性、网络负载、瓶颈节点、连通度、MAC层竞争机制和路由协议密切相关.无线自组网拓扑构建要在调整发射功率、保证连通度和减小信道干扰之间加以折衷,使网络性能得到进一步优化.
