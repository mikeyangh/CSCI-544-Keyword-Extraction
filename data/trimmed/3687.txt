Page1多射频无线Mesh网络组播端到端时延建模与优化王维杨明罗军舟刘波(东南大学计算机科学与工程学院南京211189)摘要针对802.11多射频无线Mesh网络(MR-WMN)不能有效支持端到端低时延组播的问题,首先围绕MAC层传输时延和Mesh层排队时延建模分析,并提出低时延组播路由模型MR-MED(Multi-RadioMulticastEnd-to-EndDelay).其次证明全局流干扰最小化问题是一个NP完全问题且全局流干扰和网络密度的数学关系符合dPlN分布,在此基础上提出有效减小MAC层流内和流间干扰的DCA算法.最后提出流量自适应的组播多径路由方案MMRA,有效减小Mesh层排队时延.仿真与常见算法的比较表明,提出的模型准确刻画了MR-WMN的组播时延,且联合运用DCA和MMRA有效降低了端到端时延.关键词组播路由;时延优化;信道分配;多径路由;多射频无线Mesh网络1引言作为一种面向移动互联网环境的新一代无线多跳接入网[1],无线Mesh网络(WirelessMeshNetwork,WMN)正得到越来越广泛的应用.WMN骨干网由自组织、自配置的静态Mesh路由器(WirelessMeshRouter,WMR)通过无线多跳互连形成[2].为了提高网络容量、减少信道冲突,WMR配备多个射频接口并同时工作在不同交叠信道,这种WMN又叫做多射频无线Mesh网络(Multi-RadioWMN,MR-WMN)[3].在MR-WMN中,组播是一种有效节省网络带宽的通信技术,它通过单源节点同时向一组目的节点传输信息.被传输的信息最多在每条链路上传输一次,且仅在通向目的节点的分支处被复制.使用组播通信技术可以显著提高MR-WMN容量,减少无线链路带宽消耗.为了向终端用户提供在线游戏、视频会议、文件共享和流媒体等点对多点通信服务,同样要求MR-WMN支持组播.与移动AdHoc网络侧重路径维护和节能的组播优化目标不同,MR-WMN组播侧重为用户提供最佳接入性能[4],例如最小端到端时延.源节点和目的节点组之间的高时延通信会显著影响上层应用程序性能,特别是对实时性要求严格的应用程序,进而带来糟糕的用户体验.然而在MR-WMN中确保低时延组播面临挑战,交叠信道间干扰及稀缺的无线带宽资源显著影响了组播端到端时延.根据文献[5]总结的802.11组播传输特点,组播端到端时延分为MAC层传输时延和Mesh层排队时延两部分,因此不恰当的机制在减少其中一项时延的同时会增大另一项时延,从而不能有效优化组播端到端时延,导致MR-WMN无法提供令人满意的组播服务.因此,如何同时减少组播数据传输时延和排队等待时延,使MR-WMN提供满意的端到端低时延组播服务,具有重要的研究意义.本文在多射频环境下分析“流内干扰、流间干扰”和“本地拥塞”对MR-WMN组播端到端时延的影响,研究如何建立合理度量组播端到端时延的模型并根据模型分析以优化组播端到端时延.论文主要研究成果包括以下3点:(1)提出分层模型MR-MED对组播端到端时延建模分析.在综合权衡网络参数基础上提出组播路由判据MR-MED,为后续组播路由提供选路依据.(2)证明全局流干扰最小的信道分配是一个NP完全问题,不存在多项式时间最优解算法;证明网络密度与信道干扰关系符合double-ParetoLog-normal(dPlN)分布.根据结论设计更加有效的密度感知信道分配算法,解决MAC层流干扰.(3)提出基于多路径路由算法的流量自适应多径组播路由策略,解决因最佳链路拥塞造成的时延开销.结合实验验证了所提出的时延优化方案的有效性.本文第2节简要介绍组播时延优化的相关工作,阐述这些工作的特点和存在的不足;第3节提出一个多射频Mesh网络组播端到端时延跨层模型MR-MED,在此基础上对该模型准确性进行评价并基于该模型对组播端到端时延进行分析,提出MR-WMN组播端到端平均时延优化方案;根据MR-MED优化方案,第4节研究全局流干扰最小的信道分配问题.首先给出定理并证明该问题是一个NP完全问题,其次研究网络密度与信道干扰的关系并给出相应的数学关系式,最后在上述证明基础上设计更加有效的密度感知的全局流干扰最小信道分配算法;根据MR-MED优化方案,第5节研究缓冲区排队引起的时延增大问题.首先提出一个缓解本地拥塞、减少组播数据排队等待时延的多径组播路由算法,然后指出使用何种选路策略可以在多径间获得最佳端到端时延;第6节对提出的端到端低时延组播路由方案进行仿真实验,通过分析对比指出方案的有效性;第7节对全文进行总结并指出下一步工作的研究方向.2相关工作目前优化无线网络端到端时延的方法主要分为Page3两类:一类针对流内和流间干扰问题,通过修改协议、网络编码以及信道分配优化传输时延;另一类针对数据包排队问题,通过最优队列调度策略、网关负载均衡优化数据包排队时延.针对MR-WMN流内干扰和流间干扰问题,通常采用以下3种方法获得较低组播时延:一是修改旧有协议并提出新路由判据,例如Kyoung等人[6]提出低时延多射频组播路由协议MR2_ODMRP,它是基于新的路由判据MR2_ETT和修改的ODMRP组播路由协议.MR2_ETT根据射频当前速度计算信道传输时延,同时MR2_ODMRP在覆盖范围和传输速率两方面进行权衡.MR2_ODMRP的主要问题是没有考虑端到端传输中存在的流间干扰,且容易产生较高的数据包排队时延.二是基于网络编码技术使网络支持尽可能多的并发流,例如Eryilmaz等人[7]和Yeow[8-9]等人分析了点对多点文件共享服务的组播时延,分别提出基于网络编码的组播时延优化技术.他们指出,用网络编码技术代替传统的调度技术,可以显著降低组播单跳传输时延.然而他们各自提出的网络编码方案没有考虑组播端到端传输时延,并且网络编码需要路由器在硬件上支持,而目前部署的无线路由器大多数不支持网络编码.三是利用信道分配技术以减少射频干扰,例如Cheng等人[10]提出基于禁忌搜索(TabuSearch)优化方法的组播路由算法,联合考虑路由和信道分配.但是该算法的缺陷是优化条件仅考虑链路的传输时延,没有考虑数据包的排队时延.Lim等人[11]提出基于组成员邀请机制的分布式组播树构建算法,在此基础上利用自底向顶的信道分配方法以优化传输时延.它的主要问题是基于节点加入/离开的组播树构建算法使用跳数作为路由判据,未考虑流间干扰,无法有效降低端到端组播时延.针对组播数据在缓冲区排队问题,Key等人[12]提出FMRC多径路由,通过对整个Mesh网络建立排队网络模型,为流量选择高性能多径链路.它的主要问题是不支持组播.Nagesh等人[13]提出MDOS路由,将流量进行分割,分发至不同链路进行传输.MDOS的主要问题是在链路没有发生拥塞时,流量没有全部流经低端到端时延的路径,因此端到端时延较大.Popa等人[14]提出基于地理位置的路由IPS-BGR,在负载均衡的基础上实现数据包准确送达目的节点.它的主要问题是需要节点具有探测自身所在地理位置的装置(例如GPS),而目前大多数MR-WMN网络节点不具备该硬件.He等人[15]提出基于LBA的分布式负载均衡策略,缓解WMN终端和网关之间的拥塞.它的主要问题是只考虑网关的负载均衡,不能有效缓解节点发生的本地拥塞.Li等人[16]提出流量感知的组播路由判据FLMM,考虑流内干扰以及信道多样性.它的主要问题是没有考虑流间干扰对组播端到端时延的影响.Zeng等人[17]提出一种集中式算法Multi-ChannelMulticast(MCM),首先最小化组播源节点和目的节点之间转发节点数及跳数,然后分配交叠信道以减小流间干扰.但是MCM存在隐藏信道及干扰因子不易确定等问题,不能有效优化组播性能.通过对以上相关工作分析可以看出,在组播时延优化方面,现有的研究工作没有充分结合跨层信息获得满意的组播端到端时延;在设计拓扑控制的信道分配算法时,大多考虑正交信道,对交叠信道的利用率不高;在设计组播路由算法时或者只考虑网关负载均衡,不考虑转发路径拥塞,或者只考虑建立最佳路径,不考虑因此造成的本地拥塞.3组播端到端时延跨层模型通过分析基于802.11MAC协议的多射频无线Mesh网络组播链路层传输机制,对MR-WMN组播端到端时延建立跨层模型MR-MED,并对MR-MED的准确性进行仿真评价;在此基础上指出如何根据该模型对网络进行优化,减少MR-WMN组播端到端平均时延.3.1组播时延模型基于802.11的多射频无线Mesh网络,是当前主流的无线Mesh网络,已经应用于无线北京(奥运)、无线伦敦和MITRoofnet等众多项目中.MR-WMN组播端到端时延定义为源节点数据包到每个目的节点时延的平均值.根据IEEE802.11MAC协议,组播帧不会被分段,无需得到ACK肯定确认,在传输出现差错或数据丢失时也不会被重传.整个原子过程只牵涉到一个数据帧,根据基于竞争的访问控制规则加以传输,竞争窗口为[0,31],计数单位为时隙.一旦发现信道不可用,节点必须重新竞争信道.传输结束后,所有节点必须等待一段DIFS,然后在竞争窗口倒数随机产生的时延时间.组播数据帧交换过程如图1所示.Page4图1802.11MAC组播数据帧交换过程分析组播数据传递过程可知,多射频组播端到端时延(Multi-RadioMulticastEnd-to-EndDelay,MR-MED)分为传输时延和排队时延.MR-MED等于链路上所有组播单跳时延MHD(MulticastHopDelay)的总和,因此组播无线链路时延又可分为链路传输时延(TD)和组播数据包排队时间(QD)两部分.进一步地,链路传输时延又可分解为数据发送时间(SD)和竞争信道的时延(BD)两部分.从图1可知802.11MAC组播没有ACK肯定确认机制,也没有回退机制,因此用如下公式表示:MR-MED(u)=∑d(u)式(1)中,R为组播目的节点集;d(u)代表源节点到节点u的路径长度,计数单位为跳数.为求解式(1),其余分量由下式给出:MHDi(u)=QDi(u)+TDi(u)BDi(u)=∑其中,Qi(u)为源节点到节点u路径上第i跳节点的当前队列长度;用j标识节点当前队列中第j个数据包;pm(u,i)代表源节点到节点u的路径上第i跳节点的第m个射频所在信道的成功传输率,注意当j超过节点最大队列长度时,这些数据包将被丢弃,即此时这些数据包的成功传输率pm=0,式(4)仍然成立;Bm(u,i)代表节点u第m个射频在第i跳的链路带宽;N(u,i)代表源节点到节点u的路径上第i跳节点的发送射频数量;St为第t次争用信道时的竞争窗口所占的时隙大小.由St∈[0,31],t∈Ν可以计算,E[St]=15.5时隙.为求解式(1),流间干扰和流内干扰对传输时延的影响用链路带宽损耗度量.这里使用Capone等人的物理干扰模型[18]和物理层信噪比(SNR)计算流间干扰链路层传输等效带宽为其中,Pi(k)代表节点i收到来自节点k发射的功率;i代表i的干扰域内节点;Pmax为最大允许的干扰功率;Bbase为网络理想带宽.在计算流内干扰时,一条路径上的链路并非同时可以使用.例如干扰域为RI,则在任意时刻,以路径上节点u为参照,u的前RI跳链路和后RI跳链路最多仅允许一条非正交信道传输数据,也即该路径在同一时刻仅允许传输一个包.针对该问题,设以节点u为参照的一段信道组成的路径的等效端到端带宽为BI(u),则式(6)成立MHD(u)=PkBI(u)=PkBA-RI(u)+…+经过数学变换得到又因为一条信道的等效带宽取决于该信道流内等效带宽和该信道流间等效带宽两者中较小者,因此至此式(1)得到解答.下面对该模型的有效性进行验证.3.2模型评价在使用MR-MED跨层模型之前,需要验证该模型的准确性,这通过对比模型的分析结果和实验仿真数据来确定.仿真使用NS-3(版本NS-3.10).根据IEEE802.11MAC对组播的要求,使用基于CSMA/CA的无RTS/CTS、无ACK肯定确认机制的分布式点协调控制策略(DCF).信道速率采用802.11规定的基本速率集速率,即1.0Mbps.组播源节点发送数据包的时间间隔符合指数分布,速率范围为0.01(数据包/时隙)~1.00(数据包/时隙)递增.数据头部32Bytes,数据大小512Bytes,末尾校验位4Bytes.因此一个时隙的长度为4.384ms.Page5仿真使用MITRoofnet网络的真实拓扑作为Mesh骨干,包括24个关键节点,如图2(a)所示.根据802.11规定,总共有|C|=11条交叠信道可用,C={1,2,…,11}.每个WMRv配备N(v)=2个全向射频接口,所有射频接口统一使用Wi-Fi默认最大功率100mW.假定驻波比11,则该功率对应传输半径RT=250m,干扰半径RI=450m.WMR队列长度为50.仿真在组播组规模不同的两个场景下进行,组播组规模分别是G=4和G=8.每个场景各进行100次仿真,并对结果计算平均值.图2仿真拓扑环境和模型评价结果根据跨层模型有效性可知,MR-MED值可以作为基于先验式表驱动的组播树生成算法的路由判据,减小组播端到端平均时延.此外分析跨层模型可知,当源节点数据发送速率、组播组规模、节点配备射频接口数及网络可用信道数确定时,数据包的传输速度和排队速度之间存在权衡.高速链路具有最小链路传输时延,但可能因耗尽带宽而导致本地拥塞,增大排队时延.根据以上分析,本文提出组播端到端平均时延优化方案:通过设计信道分配算法以减小全局流干扰;通过设计多径路由策略以减少数据排队时间,最终优化端到端平均时延,该优化方案因此可称为MR-MED,它所包含的上述两部分优化内容分别在第4节和第5节进行讨论.4全局流干扰最小的密度感知信道分配根据MR-MED模型知,优化组播端到端时延需要最小化全局流干扰.首先对全局流干扰最小信道分配问题进行理论分析,通过顶点着色证明其属于NP完全问题.其次研究节点密度与信道干扰之间的关系,证明全局流干扰与网络密度的关系满足双帕累托对数正态(double-ParetoLognormal,图2(b)分别比较了采用模型分析和仿真得到的组播端到端平均时延.观察到模型分析结果与仿真结果非常接近,这验证了所提出的跨层模型在刻画组播端到端平均时延方面的准确性.此外,注意到当源节点发送数据包速率超过0.80包/时隙(G=8)、0.85包/时隙(G=4)时,组播端到端时延曲线呈现指数增长趋势,仿真曲线逐渐偏离分析曲线.这主要由于此时网络负载已经非常重,开始出现缓冲区排队.此时若要改善组播端到端平均时延,需要在路由上做出改进,使路由能够缓解本地拥塞.dPlN)分布.最后给出密度感知的信道分配算法,使全局流干扰最小.4.1理论分析全局流干扰分为流内干扰和流间干扰,其本质是交叠信道的传输干扰.差值5的相邻交叠信道之间不会相互干扰,因此与相邻信道差值5的信道将具有最大信道容量(可达到其理论上限);反之,与相邻信道差值越小,信道容量越小.当两条相邻信道差值等于0时,两者的各自信道容量为0,此时它们严重相互干扰,无法传输数据.将MR-WMN抽象为无向、全连通图G(V,E),其中顶点集合V代表所有WMR,无向边集合E代表所有在物理上有直接连通关系的一跳传输.IEEE802.11MAC协议将无线频率划分为多个交叠信道,令C={1,2,…}代表网络中所有可用信道构成的集合,总数为|C|.根据调度策略,每一个WMRv∈V配备N(v)个工作在特定无线信道c∈C的射频接口.WMRv的射频接口I表示为v(I),v(I)∈N(v),工作在信道c的射频接口v(I)表示为c[v(I)].假定所有射频接口都是全向的,并且具有同样的传输距离RT和干扰距离RI,这里RI=2RT.令d[u(I),v(J)]代表u(I)和v(J)之间的距离,从而这两个射频可以相互通信,当且仅当满足d[u(I),v(J)]RT∧c1[u(I)]∩Page6c2[v(J)]≠.进一步假定射频接口u(I)和v(J)具有相同的、常数的传输成功率ps[u(I),v(J)].如果满足条件RTd[u(I),v(J)]RI∧c1[u(I)]∩c2[v(J)]≠,u(I)和v(J)不仅不能相互通信,并且在各自传输过程中还会干扰对方.使用不同正交信道的射频之间不会相互干扰,即使d[u(I),v(J)]RI.节点u的干扰域内的所有节点构成节点集合I(u).为了度量全局流干扰,给出了如下定义.定义1.组播流内干扰强度:组播路径上一条分支路径内相互干扰信道之间的差值之和.组播流间干扰强度:组播路径上各条分支路径之间相互干扰信道的差值之和.组播全局流干扰强度:组播流内干扰强度和流间干扰强度的总和.因此,寻找组播全局流干扰强度最小的信道分配,就是寻找一种信道分配策略,满足组播源节点和所有目的节点间存在连通,并且各干扰域内信道之间差值最大.这个问题由于计算复杂,相关方案给出的都是近似解[3,19].首先给出定理1,证明该问题是一个NP完全问题.定理1.组播全局流干扰最小的交叠信道分配问题是一个NP完全问题.证明.用干扰图重新定义该问题.即有干扰图G(V,E),对于G(V,E)中e∈E,v∈V.给定u,v∈V,它们在G(V,E)中代表的边有相互干扰关系,当且仅当它们之间e∈E.因此如图3(a)所示具有14个节点的网络可以转换为图3(b)所示的干扰图.在转换时需要注意,由于通信采用组播方式,网络中各链路并非平等关系,因此从靠近源节点S的链路开始编号;并且由于无线采用广播方式,一次广播均可达的链路被赋予相同编号.在图3(b)中,问题等价于:将C={1,2,…,11}分配给各顶点,使得所有位于线段两端的顶点对的信道差值(的绝对值)之和最大,即其中,c1(u)代表u分配的信道.这可以视为一个顶点着色问题.又由于|c1(u)-c2(v)|5的各正交信道的顶点着色问题是一个NP完全问题,因此网络使用交叠信道时的顶点着色问题也是一个NP完全问题.4.3节给出使用贪婪方法的近似算法求解全局流干扰最小信道分配问题.在给出具体算法以前,4.2节首先讨论网络密度对信道分配算法的潜在影响,该影响决定了信道分配算法的有效性.4.2网络密度与信道干扰的定量分析传统信道分配算法大多忽略网络密度.虽然有些算法承认网络的稀疏、稠密程度与信道干扰有关,在信道分配算法时却不予考虑,部分原因是这一关系很难准确度量.本节通过研究网络密度和信道干扰之间的关系,给出数学关系式,用于指导信道分配算法的设计和优化.网络的稀疏、稠密表现在节点和连接各节点的边的密度上,最终表现为链路的密度.直观认为:链路密度越大,干扰边数越多,越难以进行信道分配.可是由于无线网络的广播特性,网络越稠密,节点一次传输覆盖的相邻节点也越多,传输次数可以更少,信道分配更容易进行.本小节通过分析给出网络密度与信道干扰的量化表达式,用于指导信道分配算法的设计.定义2.节点A的干扰边数定义为以节点A为圆心的一定区域内所有与其它链路有干扰关系的链路数.定理2.各节点与链路位置在网络中任意时,对于节点A的一定范围内所有干扰边数的平均增长率为固定常数.证明.以A为圆心,干扰半径为k,长度r为半径作圆形区域.假定网络边的平均密度为ρ,则圆边界处的边数为2πr·Δr·ρ.又干扰半径为k,即相距k之外的边不会引起干扰,因此随着半径扩大,圆形区域内部靠近圆心的边不再与圆形外部区域的边存在干扰关系,故干扰边数可由r,k表示为因此干扰边数的平均增长率为η=limΔr→0所以当干扰半径为定值k时,A的一定范围内干扰Page7边数的平均增长率为固定常数.定理3.干扰边数以η倍增长过程中,存在以η为中心的波动Wr~N(0,c2r).证明.由于节点和连接节点的各边在网络中非均匀分布,随着半径增长,一些新干扰边加入,一些边不再是干扰边,因此数量上呈现无限小波动,Wr是独立增量且关于r连续,又在有限Δr范围内围绕ηΔr波动并趋向于ηΔr,因此Wr服从正态分布N(0,c2r),c为任意常数.定理4.干扰边数在初始时刻非零.证明.对于组播通信,这是显然的.因为在非平凡组播网络中,至少有一个组播源节点和两个组播目的节点,且源节点到两个组播目的节点分别各有一条边相连.这两条边在源节点的干扰域内,因此干扰边数初始值非零.定理5.干扰边数的增长符合double-ParetoLognormal(dPlN)分布.证明.由定理2~4知,干扰边数的增长过程服从几何布朗运动(GBM),即其中:Xr代表干扰边数;σ代表扰动量.再根据It公式可得因此其中α和—β(a,β>0)分别是z变换后方程(16)的两个根.所以干扰边数的增长服从dPlN分布[20].证毕.利用所求解析式对干扰边数X分析绘制图4特征曲线.从绘制曲线中可以看出,β值大于或者小于1,密度曲线变化不同.从图4可以看出,干扰边数与链路密度并非成固定的正比例关系,即对于x1,x2,f(x1)>f(x2)并非恒成立.具体地说,图4(a)代表稀疏网络的密度特点:大多数边具有大致相同的干扰边数,因此优化干扰时宜整体考虑;相反,图4(b)代表稠密网络的密度特点:拥有非常少干扰边数或者非常多干扰边数的边占绝大部分,因此重点优化这些边以减少干扰.为减少流内、流间干扰对组播传输时延的影响,需要根据网络稀疏、稠密特点有效选择信道分配方式,减少无线链路并行传输干扰,4.3节对此进行讨论.4.3密度感知信道分配算法网络的稀疏、稠密由dPlN中β值确定,可在信道分配前事先由网络信息获得.该假定是合理可行的,因为MR-WMN的拓扑具有最小变化性且通常在一定时期内(例如数日甚至数个星期)较稳定.因此网络各节点可提前通过周期广播ProbeMessage与邻节点交互信息,统计链路数并计算β值.该值在相当长一段时间内将保持不变,可供信道分配参考.信道分配算法开始时,首先以组播源节点为中心,使用广度优先遍历(BFS)对网络全部节点划分层次.定义3.如果位于第i层的节点A和位于第i+1层的节点B满足0d[A,B]RT∧c1[A]∩c2[B]≠,则A是B的父节点,同理B是A的子节点.定义4.优化函数定义如式(17)所示.其中RR代表用于接收数据的射频接口,SR代表用于发送数据的射频接口.F(u,c)=∏v∈I(u)式(17)的意义在于通过贪心法对节点u的射频分配信道c,使c与干扰节点集I(u)中所有已分配信道的差值最大,从而最小化干扰,最大化信道容量.算法按照层次结构自顶向下分配信道,在分配过程中始终以最大化优化函数F(u,c)为目标.如果存在多于一个F(u,c)具有相同取值,算法随机选择一个.当u分配信道c后,所有u的子节点统一调整其RR到c信道以便与u通信.密度感知信道分配算法(Density-awareChannelAssignment,DCA)如算法1所示.算法1.密度感知信道分配算法DCA.1.procedureDCA(C,G,β)2.s’sSRuseschannel1,itschildrenusechannel1Page83.susesBFStodivideWMRsintodifferentlayers4.forl←2,layerNodo5.ifβ>1thenA←Sortingallnodeuatlbytheir6.elseA←allnodeuatlwithoutsorting7.endif8.foreachainAdo9.selectchanneli∈CtominimizeF(a,v)10.aadjustsSRtoi,itschildrenadjustRRstoi11.endfor12.endfor13.endprocedureDCA算法拥有两个主要特点:易于实现和全局流干扰近似最小化.此外,通过在相邻WMR之间使用ProbeMessage,可以较方便地构建算法的分布式形式.5流量自适应多径组播路由策略组播端到端时延受数据包排队影响,因此不合理的组播传输路径会增大端到端平均时延.在全局流干扰优化基础上,根据MR-MED模型可知,尽管路由算法可以使用MR-MED作为路由判据以优化组播端到端时延,但由于无线链路带宽有限,密集的数据包将导致网络拥塞,增大排队时延.该假定是合理的,因为所有涉及链路质量为判据的路由算法均会使尽可能多的数据通过质量最高的链路,从而导致该链路发生本地拥塞.针对该问题,提出流量自适应的多径组播路由策略,使用多径组播路由算法(MMRA)建立多径传输路径,对密集网络流量进行分流,从而有效缓解本地拥塞.MMRA见算法2.算法2.多径组播路由算法MMRA.1.procedureMMRA(s,R)2.susesBFStocomputeMR-MED(v)towardseach3.V(T)←R∪{s},E(T)←4.forWMRv∈Rdo5.p←v6.P←allp’sparents//P!=7.whilep∈P∧pV(T)do8.selectu∈PthatMR-MED(u)+MHDl(p)is9.selectw∈(P-u}thatMR-MED(w)+MHDl(p)10.V(T)←V(T)∪{u}11.E(T)←E(T)∪{(u,p)}12.ifw!=then13.wtag←“backup”14.V(T)←V(T)∪{w}15.E(T)←E(T)∪{(w,p)}16.endif17.p←u18.endwhile19.E(T)←E(T)∪{(u,p)}20.endfor21.returnT22.endprocedure流量自适应体现在策略根据网络流量计算MR-MED值并动态选择最佳传输路径,在传输时延和排队时延之间寻找平衡,也就是在自适应策略下,数据并非全部流经质量最高的链路,而是流经较差链路以换取较小排队时延.当网络流量较大时,自适应策略利用分流路径进行分流,尽可能缓解本地拥塞;当网络流量较小时,多径仅做备份,数据全部流经链路质量最高的路径.策略根据动态计算的MR-MED值决定何时将分流数据路由至分流路径,一旦原路径拥塞缓解后再将分流数据路由回原路径.考虑到在某些特定网络场景下,可能存在因分流而使得数据在原路径和分流路径之间频繁切换,自适应策略使用式(18)计算E[MR-MED],当原路径E[MR-MED]值大于分流路径MR-MED值时再进行切换.E[MR-MED]=1其中,MR-MEDnow表示最新一次MR-MED值.式中CLength称为防抖动参数,在默认情况下其取值为足够大的正整数.特别地,该值反映了选路和切换之间的权衡:CLength取值为1则数据切换最频繁,此时每个数据包都经过最佳路径,但切换开销较大;取值越大则切换越不频繁,但数据的实时响应越差.本文下一步工作将研究选路和切换之间的权衡问题.6仿真分析本节通过仿真实验,将提出的组播端到端时延优化方案MR-MED与MCM在不同场景、不同网络密度下进行对比分析.首先给出仿真实验参数及环境设置,然后进行实验并对结果进行分析比较.实验结果证明了MR-MED在优化组播端到端时延方面的有效性.Page96.1实验参数及环境设置仿真实验基于NS-3网络模拟器,使用带分布式点协调功能(DCF)的IEEE802.11作为MAC层协议.根据802.11标准对组播传输的要求,不使用RTS/CTS和ACK机制.各节点物理位置以及源节点均随机生成在1000m×1000m大小的网络区域内,但要求网络必须连通,否则重新生成网络拓扑.各射频传输半径为250m,干扰半径为450m.组播源节点流量模型使用固定比特速率(CBR),数据大小为512Bytes,数据发送时间为500s.针对每个场景各进行100次仿真并求期望值作为最终实验结果.用MR-MED-S和MCM-S表示两种方案在稀疏网络的性能表现,用MR-MED-D和MCM-D表示两种方案在稠密网络的性能表现.为清晰表述内容,将实验参数的记法和取值说明列于表1,将实验场景和说明列于表2.实验参数链路质量节点数量网络覆盖区域节点队列及长度信道类型及数量2.4~2.485GHz,非正交信道:11链路基本速率射频接口类型射频接口数量发射功率数据包大小交叠信道数:11;组播源节点速率:120pkts/s组播组规模:5;组播源节点速率:120pkts/s2;组播组规模:5;交叠信道数:11场景A稀疏和稠密网络.组播组规模:5~30可变,增幅为1;可用B稀疏和稠密网络.可用交叠信道数:1~11可变,增幅为1;C稀疏和稠密网络.组播速率:50~150pkts/s可变,增幅为实验仿真单源节点向一组目的节点组播的平均吞吐量和端到端平均时延,组播性能评估参数定义如下:图5场景A:组播源节点速率可变(1)组播平均吞吐量(MulticastAverageThroughput,MAT):组播目的节点吞吐量定义为它收到的组播字节数与它收到最后1个字节和第1个字节所花费时差的比值.组播平均吞吐量定义为所有组播目的节点吞吐量的平均值.该性能评估参数表明网络能够承载的组播最大速率.(2)组播端到端平均时延(MulticastEnd-to-EndAverageDelay,MEAD):组播端到端时延定义为组播目的节点收到源节点发送的数据包所花费时间.组播端到端平均时延定义为所有组播目的节点收到源节点发送的数据包所花费的平均时间.该性能评估参数表明网络传递组播数据包所耗费的时间.6.2性能分析6.2.1组播组规模对性能的影响场景A用于分析比较MR-MED方案和MCM方案中组播组规模对组播吞吐量和端到端时延的影响,其中组播组规模从5增至30,每次增幅为1.实验结果如图5所示.综合图5(a)和5(b)看出:MR-MED方案组播性能优于MCM方案.具体地说,从图5(a)可以看出,实验过程中,MR-MED方案的组播吞吐量高于MCM方案;并且随着组播组规模增长,两种方案在稀疏网络和稠密网络中吞吐量均逐渐减小,但MR-MED方案的组播吞吐量下降幅度小于MCM;此外MR-MED方案在稀疏网络和稠密网络的吞吐量差异小于MCM,表明方案对网络密度具有较好适应性.从图5(b)可以看出,实验过程中,MR-MED方案的组播端到端时延低于MCM方案;并且随着组播组规模的增长,MCM方案的时延显著增加,特别是G13后,而MR-MED方案时延增加较不明显.分析原因可知,一方面MR-MED方案的DCA算法有效减少了流内、流间干扰,另一方面当组播组规模较大使网络流量较多时,MR-MED方案的MMRA算法有效缓解了本地拥塞,减小了数据包排队时延.Page106.2.2交叠信道数对性能的影响场景B用于分析比较MR-MED方案和MCM方案中交叠信道数对组播吞吐量和端到端时延的影响,其中交叠信道数从1增至11,每次增幅为1.实验结果如图6所示.综合图6(a)和图6(b)看出:MR-MED方案组播性能优于MCM方案.具体地说,从图6(a)可以看出,随着可用信道数增多,两种方案在稀疏网络和稠密网络中吞吐量均显著增大,表明多信道对网络性能改善明显.但MR-MED方案吞吐量增幅大于MCM方案.这是因为MR-MED方案使用的DCA算法能有效分配信道,减少流内、流间干扰对传输路径的影响.此外注意到在稀疏网图6场景B:组播源节点速率可变6.2.3组播速率对性能的影响场景C用于分析比较MR-MED方案和MCM方案中组播源节点速率对组播吞吐量和端到端时延的影响,其中源节点速率从50packets/s增至150packets/s,每次增幅2packets/s.实验结果如图7所示.综合图7(a)和7(b)看出:MR-MED方案组播性能优于MCM方案.具体地说,从图7(a)可以看出:随着源节点速率增大,两种方案在稀疏网络和稠密网络中吞吐量先逐渐增大再逐渐减小.这是因为当网络轻载时,随着组播源节点速率增大,组播平均吞吐量逐渐增大;当网络重载时,随着组播源节点速率增大,网络带宽逐渐耗尽,各链路发生本地拥塞越来越频繁,导致队列丢包,组播平均吞吐量逐渐降低.但对比图中曲线可以发现,MR-MED方案吞吐量大于MCM方案,这是因为MR-MED方案中MMRA算法能够有效缓解本地拥塞、减小数据包图7场景C:组播源节点速率可变络和稠密网络中,MR-MED方案的组播吞吐量差异小于MCM方案,这是因为DCA算法在信道分配时考虑了网络密度这一重要因素.从图6(b)可以看出,在没有多余信道可供分配的情况下,MR-MED方案在稀疏网络和稠密网络中时延均小于MCM方案,这是因为MR-MED方案使用的MMRA算法能够有效减小数据包排队时延.当可用信道数逐渐增加时,两种方案的组播端到端时延均逐渐减小并逐渐趋于一致,但MR-MED方案的时延仍然略小于MCM方案,这是因为网络中可用信道数“充足”时,各种信道分配策略都可以实现零干扰信道分配,差异趋于消失.排队时延.从图7(b)可以看出,网络轻载时,两种方案在稀疏网络和稠密网络中时延增加均不明显;当网络负载重时,MR-MED方案的曲线增幅小于MCM方案,表明MR-MED组播端到端时延优于MCM方案.这一方面是因为DCA算法有效减小流内、流间干扰,另一方面是因为MMRA算法有效缓解了本地拥塞.此外还可以看出,MR-MED时延对于稀疏和稠密网络差异小于MCM,表明MR-MED方案对网络密度具有较好适应性.7结束语组播端到端平均时延是评价多射频无线Mesh网络点到多点通信性能的关键指标,该指标受到MAC层传输和Mesh层排队的双重影响.本文提出的跨层模型MR-MED较好地刻画了组播端到端时Page11延,同时该模型的MR-MED值可以作为组播路由判据,优化选路.对MR-MED模型分析可知:优化组播端到端时延需要在链路传输速率和排队时延之间权衡,本文据此提出优化方案,解决链路传输速率受到流内干扰和流间干扰影响的问题及最佳路径发生本地拥塞造成的排队问题.由于优化方案要求的全局流干扰最小的信道分配是NP完全问题,论文先求出干扰与网络密度的关系,最后提出密度感知的信道分配算法,使优化方案在稀疏网络和稠密网络均可有效优化全局流干扰.优化方案使用的流量自适应多径组播路由策略对本地拥塞具有较好缓解作用,可以在最优链路传输时间和缩短数据包排队时间之间寻找平衡点.实验表明,本文提出的MR-MED优化方案在稀疏和稠密网络中均可有效降低组播端到端平均时延.制进行研究,权衡数据选路和路径切换.下一步工作将对组播多径路由算法的防抖动机
