Page1一种基于协助下载方法的车联网选车策略1)(中国石油大学计算机与通信工程学院山东青岛266555)2)(中国科学院计算技术研究所北京100190)3)(工业与信息化产业部电信传输研究所北京100083)摘要车联网协助下载方法是解决Wi-Fi接入方式应用在车联网领域中覆盖范围有限问题的有效手段之一,该文针对高速公路车联网多任务协助下载过程中盲区时空资源利用率低、下载服务不均衡的问题,提出了一种近似全局最优的车联网协助下载选车策略———DSMov.DSMov使用二维矩阵定义盲区时空资源和选车行为,利用马尔可夫决策过程对盲区时空资源分配问题进行求解,并且利用车联网通信特点简化选车行为空间以减少计算复杂度;同时,DSMov提出利用到均衡服务的欧几里得距离和曼哈顿距离作为选车依据,从而使得目标车在享有均衡协助下载服务的前提下,有效地提高用户数据下载总量.实验结果表明在用户享有较均衡下载的情况下,数据下载总量提高20%以上.关键词协助下载;车联网;选车策略;存储转发;延迟容忍网络(DTN);物联网1引言近些年,随着Wi-Fi接入点大规模部署,使用IEEE802.11标准和DSRC技术将车辆通过路边基础设施接入互联网的方式成为了车载用户实现与互联网信息交互的一个重要手段.将Wi-Fi接入方式应用到车联网领域已经得到了国内外研究学者的广泛认可,相比于利用3G/4G网络接入互联网的接入方式,Wi-Fi接入成本低,并且能够为高速移动的用户提供更好的服务质量.然而,有限的覆盖范围使其成为制约这种接入方式发展的阻障.车联网协助下载方法[1]是解决Wi-Fi接入方式应用在车联网领域中覆盖范围有限问题的有效手段之一,通过周围不断经过的同向或对向行驶的车辆为目标车携带数据来提高下载量.然而,目前车联网协助下载方法还存在着盲区时空资源利用率低、下载服务不均衡的问题.在多用户请求情况下,为盲区中行驶的目标车选取协助车提供下载服务的策略是决定系统吞吐量的重要因素之一,选车策略的目标是在所有目标车能够尽可能平等的享受协助下载服务的前提下,最大化用户的下载总量.在选车策略上面临着两个需要解决的问题:(1)协助车并不是同时进入AP通信区,因此,AP必须在车辆进入AP通信区之后到该车辆离开之前决定该车辆是否作为协助车、为哪一辆或者哪几辆目标车携带数据和携带多少数据的问题;(2)协助车和目标车的实际传输发生在AP做出决策之后的一段时间,因此所有的决策是基于预测的,这就可能导致结果的不确定性.选车依据是根据现有注册车辆的信息(包括车速,进入AP的时间等)来预估协助车和目标车可能会在盲区中发生通信的时间和地点,在不发生通信域叠加的前提下选取协助车.如图1所示,横轴表示时间,纵轴表示位置,细线表示协助车,粗线表示目标车.目标车从当前AP节点出发(position=0),协助车从下个AP节点出发(position=D),在盲区中的不同时间和地点与不同的目标车相遇.t0和t1时刻分别是协助车hi和目标车cj通信的开始时间和结束时间.因为车辆不是同时进入AP通信区的,如果AP每次做出的决策都是只考虑当时其通信范围内的车辆,那么其选车的结果是局部最优的.而由于单信道情况下无线通信冲突域叠加的特点,在当前时刻t所做出的决策可能会影响t+1时刻的决策.显然,这种局部最优未必等于全局最优.比如AP在t1时刻选择协助车h1为目标车c1,c2,c3携带数据可以获取t1时刻的系统最大收益m1;在t2时刻,由于通信域叠加,只能选择h2为目标车c4携带数据可以获得t2时刻的最大收益m2.而如果AP在t1时刻就考虑到t2时刻进入其通信区的车辆,会发现在t1时刻选择h1为c1、c3携带数据可以获取收益m3(m3<m1),在t2时刻选择h3为c2、c4携带数据可获取收益m4,并且m4+m3>m1+m2.这样m1和m2的局部最优并不等于m4和m3的全局最优.除了系统最大吞吐量之外,保持目标车获取数据的公平性,即每辆目标车都应该尽可能平等的享有协助下载服务是另一个影响选车决策的因素.现有研究中的按序循环选车策略[2]可以使各协助车均衡获取下载数据,但这种策略使得盲区利用率不高,从而降低了用户下载数据量.针对上述问题,本文提出了基于近似全局最优的车联网协助下载选车策略DSMov.DSMov利用车联网通信特点简化了选车行为空间,从而减少了计算复杂度;使用欧几里得距离和曼哈顿距离确定各个行为的选择概率,从而均衡各目标车享有协助下载次数.DSMov的提出是在各个协助下载过程中不产生通信域叠加的前提下,提高盲区时空资源的利用率,达到提高用户下载总量的目的,从而满足车载用户下载大数据量相关应用的需求.2相关研究依据应用环境的不同,协助下载的选车策略可以分为城市道路环境和高速公路环境两类.(1)城市环境中协助下载选车策略在城市环境中,路况复杂、车辆车速变化大,因Page3此一些协助下载的选车策略方法围绕着车辆行驶轨迹预测进行研究,如文献[3-5].文献[3]根据车辆已有的行驶轨迹,利用多级马尔可夫链预测车辆出现的下一个位置,根据预测结果选取协助车为指定目标车提供协助下载服务.文献[4-5]提出根据道路拓扑结构预测车辆行驶轨迹,从而做出选车决策.另外,文献[6]提出根据车辆行驶的历史轨迹来预测车辆可能的行驶路线,选择相遇概率高的车辆作为协助车的选车策略.除了根据车辆行驶轨迹作为选车策略的评判标准,文献[7-8]也提出根据AP节点的部署作为选车依据.其中AlphaCoverage[7]的AP部署方法目标是使用尽可能少的AP接入点为用户提供接入服务.α-coverage的部署方案虽然降低了接触AP的数量,但没有考虑AP提供给用户的服务质量.针对这个问题,作者在α-coverage的基础上优化了AP部署方案,创新性的提出了一个衡量标准ContactOpportunitytunity考虑了AP覆盖区、车速、AP数据下载率等动态和静态信息,从而更合理的部署AP.(2)高速公路环境中协助下载选车策略上述方案是基于城市道路环境中的选车策略,并不能很好地应用于高速公路环境中,其原因包括:①在城市道路环境下的车辆行驶轨迹难以预测,因此协助下载选车策略主要围绕着行驶轨迹和相遇概率的预测方法进行研究;②在高速公路环境下,道路拓扑简单.交叉路口数量远低于城市环境,因此有条件在每个交叉口部署AP节点.这使得两个AP之间的任意两辆车只可能对向或者同向行驶,对向行驶的两车辆一定相遇;而由于较低的车速变化率,同向行驶的两辆车易于预测是否相遇.另外,高速公路环境下单位面积内车辆数量少,车辆行驶速度快,变化率低,AP在单位时间内可供选择的车辆数量少,这些特点都是城市道路场景下不具备的.因此,高速公路环境中协助下载的选车策略更侧重于优化车辆和盲区的时空资源.在高速公路环境下,MobTorrent[4]等工作的传输方式中使用局部最优策略,即AP每次根据通信范围内的车辆,选择当前时间内能提供最大下载量的车辆作为协助车的方法;文献[6]等使用顺序轮询选车方式,即先提出请求的目标车先获取服务的选车策略;以及文献[9]提出的按完成率作为选车策略,即每次选择协助车都考虑下载比例最高的用户来提供服务.以上研究工作中采用的选车策略基本都是局部最优或是按序循环的,这些方法导致盲区时空资源的利用率低、多用户请求情况下下载服务不均衡的问题,如何选择协助车为盲区中的目标车提供下载服务才能有效的提高盲区的利用率需要进行深入研究.优化理论是解决资源分配与任务调度问题普遍采用的方法之一.文献[10]中提出的动态优化的基本理论模型是马尔可夫决策过程(MarkovDecisionProcess,MDP).MDP可以用来描述这样一类离散时间决策过程:系统t+1刻状态的转移,只依赖于t时刻的系统状态和决策者的行为,而与[0,t-1]时间段内的系统状态和决策者行为无关.这与上文分析的盲区时空资源分配策略相符合,因此本文提出使用马尔可夫决策过程的动态优化模型作为选车的依据,以解决盲区时空资源分配的问题.3基于马尔可夫决策过程的优化模型3.1基本元素我们首先根据车联网盲区时空资源特点建立马尔可夫决策过程的动态优化模型,所需的基本元素如下:(1)二维状态集合S=s(τ,p)表示盲区中的时空状态,即τ时刻在位置p的资源占用情况.这里用[0,1]分别表示空闲和占用.本文的研究是基于单信道情况下,即协助下载过程中通信域叠加一定会产生传输冲突.而更为复杂的多信道情况下的三维状态集合S=s(t,p,c)(t时刻在位置p上信道c的资源占用情况)将作为未来的研究工作.(2)当前时间的注册车辆集合V(t).(3)行为集合A(t)表示决策者AP在t时刻可能的选车行为,AP的行为空间依赖于当前时刻AP通信区内的注册车辆.(4)状态转移关系SA表示系统状态在决策行为影响下的转移过程,即S×A→S,记为s=SA(s,a).s为当前时刻盲区中的时空资源占用状态,a为选车行为,s为在行为a作用下的下一个状态.(5)外部变量.高速公路车流量符合泊松分布[11].(6)收益函数R(s,a,s)表示系统在决策者行为的影响下运行所产生的收益.为了方便阐述该模型,本文使用目标车协助下载总量作为系统收益.Page43.2建模与分析选车决策需满足两个前提条件:(1)每次选车决策都应该避免使盲区中各个协助下载过程产生冲突;(2)系统中所有的目标车都能够公平地享有协助下载服务,即均衡各目标车获取的服务次数.因此决策过程是对盲区时空资源的分配,即决定目标车和选中的协助车相遇的时间和地点,以避免通信域叠加.建模过程具体分为如下5个步骤:(1)确定状态空间选车的前提是盲区中各协助下载过程不产生冲突.DSMov用一个二维矩阵表示盲区的时空资源.如式(1)所示,横向表示盲区的空间单元,纵向表示盲区的时间单元.盲区在t时刻的时空占用情况被定义为t时刻的系统状态.二维矩阵中的“0”表示此时空单元为空闲状态,“1”表示这个时空单元为占用状态.系统的状态空间S={s(1),s(2),…,s(t)}定义为一个时间相关的盲区时空状态集合.st=(2)确定行为空间决策者AP在t时间所有可能的选车行为定义为其在t时刻的行为空间.为了更好的反映决策者的选车行为所导致的盲区时空资源状态变化,我们00001000001···熿01010100000···00101011000···00011001001·················燀a100010000000···00001000000···00000100000···00000010000·················00000010000···10000001000···01000000100···00100000010·················(4)系统运行目标在上述状态转移过程中,决策者希望所选择的将行为空间设为一个与状态空间定义相同的二维矩t,a1t,…,an阵,如式(2)所示.设在t时刻的选车行为是A(t)={a0服务会导致盲区中的某些时空单元处于占用状态.因此,用二维矩阵中的“1”表示当前的选车行为会在该时空单元发生通信,“0”表示选择的协助车和目标车不会在该时空单元发生通信.选车行为是1对多的关系,即一辆协助车可以为不同的目标车携带数据,在盲区的不同时间和位置传递给目标车.因此“1”的位置并不一定是连续的ait=(3)状态转移关系决策者在t时刻的选车行为将导致系统状态的转移,如式(3)所示.假设当前盲区时空状态为st,当前行为空间A(t)={a0统状态从当前的st转移到下一个状态si状态就是当前状态和选车行为的矩阵之和.求解过程中,如果at矩阵中“1”的位置对应st的相应位置也为“1”,说明该时空单元已经被占用了.如果决策者选择行为at,会在这个时空单元发生冲突.因此对于式(3)来说,当前情况下的最优解应该为使得st+1中“1”数量最多的那一项行为.t…ait行为可以获取最大收益,系统目标决定其收益函数.系统目标可以是系统最大吞吐量或者是用户下载完Page5成率.系统最大吞吐量是运营商追求的最终目标,因为用户获取的数据总量越多,其收入越高.而从用户的角度来讲,每个用户都希望公平地享有下载服务.另外,不同用户请求下载的需求不同,有些用户不关心费用,只希望最短时间获取所有数据;而有些用户更希望尽量降低费用.因此单纯以协助下载发生的时间作为衡量系统运行目标并不能完全反映系统的公平性.为解决上述问题,DSMov通过引入ψ权值变量作为衡量标准,用户根据需求设置ψ值,决策者根据ψ值提供不同的服务.假设决策者行为发生状态转移所产生的收益为R(s,a,s),表示采用行为a,使得系统状态从s转移到s,目标为使R获取最大值.(5)Bellman递推方程行为空间是指AP在其通信范围内选取协助车为一个或多个目标车携带数据的所有选车行为.在车联网协助下载方法中,每次状态转移后所对应的行为空间都是相同的,即无论前一时刻决策者如何选择协助车为目标车携带数据,下一时刻的备选车辆都是相同的,AP选车的行为空间也是相同的.因此尽管下一时刻的决策依赖于前一时刻的决策结果,下一时刻的行为空间仍是独立于前一时刻的决策的.假设当前盲区时空资源状态st对应的可用行为空间为At,t时可能的行为{a0统状态转移到{s0[{a0一个关键目标为t,…,ant,a1显然,这是一个全局最优解,而实际上全局最优解不等于局部最优解之和,如式(6)(max∑也就是说,式(3)中得出的t时刻的最优解at不一定是最优解序列在t时刻的解,而有可能其中的解ax,ax∈A(t)且ax≠at,是最优解序列在t时刻的解.这就要求在t时刻做的决定必须考虑其对t+1时刻的影响.设序列λ是策略序列解,而Jλ(s)是在采用λ的前提下,在状态s∈S下得到的目标函数的期望值为Jλ(sn)=R(sn,λ(sn))+∑sn+1∈S则每一时刻的解为π(st)=max递推过程如图2所示.3.3求解算法(1)选车的行为空间求解上述递推过程有可能导致“状态空间爆炸”,即状态空间随时间呈指数级增加.如果用C={c1,c2,…,cn}表示目标车集合,用H={h1,h2,…,hm}表示协助车集合,则目标车数量为n,协助车数量为m.当第一辆协助车h1在t1时刻进入AP通信区时,AP可能的决策是h1为目标车集合C中的任意车辆组合携带信息,例如h1可以分别为目标车c1、c2、c5携带所需数据.因此AP在t1时刻的决策行为空间为A(h)中共有2n种可能的行为.其他的协助车进入AP时,AP具有同样的行为空间.因此所有行为的组合为显然,式(10)的行为空间随请求下载的目标车的数量和参与协助转发的协助车的数量呈指数级增长,这个空间非常巨大.比如有5辆目标车,8辆协助车参与转发,那么行为空间达到240≈1013,遍历所有的组合需要较长的计算时间.而实际上,对于高速公路车联网,很多行为组合的解是没有意义的.首先,为了防止信号干扰,在一组协助车和目标车通信时,协助车通信范围内的其他目标车不能接收数据,目标车通信范围内的其他车辆不能发送数据,因此Page6行为空间中那些发生冲突的组合并没有实际意义,可以在求解过程中被排除.另外,选车的原则是遵循系统最大吞吐量,因此,那些不会与其他车产生冲突的通信应该是必选项.比如协助车h1与目标车c2的整个协助下载过程中都没有其他目标车或者协助车进入其通信区,那么在A(h)中,所有不带c2的组合在求解过程中都应该被排除.(2)简化行为空间显然,在目标车数量n保持不变的情况下,协助车的数量m决定了行为空间的大小,并且是呈指数增加,m值越大得出的解越接近最优解,盲区时空利用率越高,但也需要更多的计算时间.因此为了能尽可能减少计算复杂度,DSMov根据车联网的特点对行为空间进行简化.根据上文分析,以下两种特殊情况所导致的解空间无实际意义.①当目标车集合C中的任意两辆或两辆以上的目标车在行驶过程中与其中一辆协助车的通信域产生叠加,如图3所示.图3h1与c1的通信域和h1与c2的通信域叠加在这种情况下,AP在为h1做决策时只能选定其中的一辆目标车,即在式(9)的组合中,c1和c2不能同时出现.仅就图3的例子来说,A(t)的数据集合数量就简化为(2n-2n-2),如果还有其他目标车发生重合的情况,A(t)的行为空间将进一步减少.图4是一辆协助车对多辆目标车碰撞域重叠情况下的优化算法片段.对于任意一个协助车h,首先初始化h的行为空间(第2行),将所有可能的组合放入集合A(h)中,初始情况下A(h)集合中的数量为2n.对于任意一个给定的协助车h,用两个循环(第3、4行)遍历目标车集合C.根据文献[12]提出的方法,可以计算出任意两个目标车与该协助车之间的碰撞域是否重叠(第5行).如果满足条件,将集合中同时包含两个协助车的组合删除(第6行).8~9行循环该操作,直到检查完所有组合.第10行返回优化后的A(h)集合.②当协助车集合H中的任意两辆或两辆以上的协助车在行驶过程中与其中一辆目标车的通信域产生叠加,如图5所示.图5h1与c1的通信域和h2与c1的通信域叠加AP在对每一辆车做决策之前,要根据前面所选车辆决定当前协助车能为哪些目标车提供服务.因此,每辆目标车建立一个协助车列表,记录哪些协助车为该目标车提供了服务,以此作为当前决策的依据.如图5中,由于h1与c1的通信域和h2与c1的通信域叠加,AP在决定h2是否为c1提供服务时,要先查看c1的服务列表中是否有h1,如果有,A(t)数据集中,包含h2的选项将被删除掉.通过这种方式,减少了A(t)的行为空间.图6是多协助车对同一个目标车碰撞域重叠的优化算法片段,对于任意一个协助车h,首先初始化h的行为空间(第2行),将所有可能的组合放入集合A(h)中,显然A(h)集合中的组合数量为2n.AP针对盲区中的任意一辆目标车i都维护一个已经选定为其提供协助下载服务的的协助车序列List(i).在每次为目标车i选定一辆协助车后,将其加入到序列List(i)中(List值更新操作在图9算法片段的第9行进行),对于目标车集合C中的任意一辆目标车i(第3行),该算法遍历序列List(i)中的每一个已选车辆(第4行),如果当前协助车h与其中的已选协助车j发生冲突(第5行),在集合A(h)中删除所有带有i的组合(第6行).8~9行循环该操作,直到检查完所有组合.第10行返回优化后的A(h)集合.Page7使用上述两种优化算法对行为空间进行简化,在每个协助车可能的行为中删除了那些不可能出现的选车行为,从而降低了系统计算的复杂度.后续实验表明,当目标车流密度λ=10时,该算法可以将算法复杂度减少2~3个数量级.(3)均衡下载次数除了最大化用户下载总量,选车策略需要遵循的另一个原则是使得每个请求下载的用户均衡的享有协助下载服务.比如在一段时间内AP能通过m辆协助车为n辆目标车提供k次服务(一辆协助车可以为一辆或多辆的目标车提供服务,因此km),那么理想中的均衡下载意味着每辆目标车接收到k/n次协助下载服务.图7是一个均衡下载的实例.位于双线下方的车辆代表目标车,从左向右行驶,每个目标车用阿拉伯数字标记;位于双线上方的车辆代表协助车,从右向左行驶,用英文小写字母标记.假设协助车a~e已经确定为哪些目标车提供协助下载服务.如图7中表1所示,例如第1项表示已经确定协助车a将为目标车1、2、4提供协助下载服务.当前协助车f的行为空间通过上节提出的两个算法简化为如图7中表2的6项.现在的问题是如果a~e辆协助车已经确定为哪些目标车提供服务前提下,AP应该对f做出什么样的决策才能使得1~5目标车更接近于均衡的获取服务.de(U(t))=∑2而在t+1时刻,针对于协助车h的行为空间A(h),哪个选项可以使得de(t+1)的值最小,就越接近于均衡,AP选取该行为的概率应该越大.可能会出现所有的选项最后计算出来的de(t+1)都大于de(t),则说明选取任何选项都会使得系统比目前更为不均衡,但是出于提高用户数据下载总量的角度考虑,AP须选取最小de(t+1)值的行为.显然,计算两点间的欧几里得距离的复杂度是图7的例子中,在决定使用协助车f的哪一种选车行为之前,有5辆协助车为5辆目标车提供共11次下载服务.那么均衡意味着每辆目标车平均获取11/5次服务(下载次数/目标车数).而此时第1~5辆目标车分别收到了3、1、2、2、3次服务.当前的情况离均衡相差多少?协助车f中的哪一个行为能使结果更接近于均衡值?为解决这个问题,DSMov提出使用多维欧几里得距离和曼哈顿距离作为度量标准.通过求解行为空间中各决策选项到均衡服务的欧几里得距离或曼哈顿距离作为AP决策的依据,通过均衡下载方法来定义式(7)和(8)递推公式中概率P值,从而求解该方程.(1)欧几里得距离(EuclideanDistance)欧几里得距离是两点间的最短距离.如果把服务次数看作一个矢量,每辆车平均获取的服务数量为原点,而实际获取的服务次数为到原点的直线距离即欧几里得距离.当前目标车的选项中哪一个选项最终导致结果到达原点的距离最短,被选取的概率应该最大.假设目标车集合C={c1,c2,…,cn}中有n辆目标车,每辆目标车在t时刻已有的服务次数分别对应于则当前情况下的欧几里得距离为烄+…+∑烆n2,在协助车数量较多的情况下,计算欧几里得距离会增加系统的处理时延.因此,在目标车相对较多的情况下,DSMov使用另一种计算复杂度相对低的计算方法即计算两点间的坐标距离—曼哈顿距离.(2)曼哈顿距离(ManhattanDistance)如图8所示,两点间的直线距离为上文讨论的欧几里得距离,其他3条距离都为坐标距离,即曼哈顿距离,其计算公式为Page8dm(U(t))=∑与欧几里得距离相同,在t+1时刻时,针对于协助车h的行为空间A(h),哪个选项可以使得dm(t+1)的值最小,就越接近于均衡,AP选取该行为的概率应该越大.与欧几里得距离相比,曼哈顿距离的计算复杂度仅为n,这使得使用曼哈顿距离的DSMov策略更适用于目标车相对较多的情况.然而,曼哈顿距离的计算的精确度没有欧几里得距离那么高.本文在实验中分别对利用上述两种距离算法做为决策依据的用户下载总量进行了比较.(4)模型的求解上述求解欧几里得距离和曼哈顿距离(以下统称均衡距离,用d表示)的意义在于在前面协助车已经确定为哪些目标车提供协助下载服务的前提下,当前时刻的协助车如何为目标车提供下载服务可以让系统中的目标车更接近于均衡接受服务.然而用户均衡的享受服务并不是唯一的目标,另一个目标是式(5)提出的系统收益最大化.为了使得选车决策能够同时体现均衡服务和系统最大收益,DSMov提出将均衡距离作为求解式(7)和(8)的概率值.假设A(h)={a1,a2,…,am}中有m种行为,选取每一种行为后对应的服务次数为U1(t),U2(t),…,Um(t),对应的均衡距离分别为d(U1(t)),d(U2(t)),…,d(Um(t)).距离越大,说明选择该种行为更偏离均衡值,被选择的概率应该越小.因此,DSMov使用反比例函数来定义该选项被选择的概率,式(7)和(8)的概率P值定义如下:图9给出了该模型递归求解的片段.每个A(h)的行为空间已经使用上文提出的化简算法进行了简化.π作为全局变量是最终的解序列.对于A(h)中的每个选车行为(第3行),如果有下一辆车(第4行),根据式(13)的概率计算下一辆车行为中获取的收益值(第5行),如果收益值与当前决策i所取得收益值之和比已有的最大值大,那么把其记录在解序列π中(第8行).更新List列表(第9行).这里面List是一个全局变量,每次前序决策不同,都会影响到List的值.如果当前车辆是第m辆协助车,找到最大收益,赋值给J(第13行),同时更新序列π(第14行),最后返回J(第19行).通过上述求解过程,我们得出了步长为m的协助车选取策略的全局最优解.在16km的盲区路段,当车流量λ=10时,目标车可能会遇到约60辆协助车.显然对60辆协助车(m=60)取全局最优是不现实的,其主要原因是:(1)即使在车速变化率很低的高速公路环境下,车速也无法保持恒定.用于计算的车辆越多,距离AP越远,车速预估值越不准确.实测数据结果显示,距离AP以外的8辆协助车的车速预测值偏离率达20%,因此一次参与算法的协助车m值不宜超过8辆;(2)参与计算车辆越多,计算Page9复杂度越高.基于上述分析,DSMov使参与计算的协助车的数量m<8,因此DSMov策略得出的解并非真正的全局最优解,而是一种近似最优解.当目标车数量n<5时,DSMov采用欧几里得距离作为选车概率;当n>5时,DSMov采用曼哈顿距离作为选车概率.这种方法降低了系统的处理延迟.4性能评估本节通过仿真实验对DSMov的下载数据量等性能指标进行了评估.车辆行驶数据一部分采用中国科学院电动汽车研发中心(上海)在2010年9月~12月在高速公路G15上海段的测试数据,另一部分采用数据生成器自动生成的.生成的数据中车速在90km/h到150km/h之间随机产生,符合高速公路的实际情况.在车速变化上,假定车速变化的概率为p,其变化的范围在90km/h~150km/h,并且符合对数正态分布,车流量符合泊松分布[13].实验中假定目标车车速为90km/h.模拟仿真工具使用JAVA语言开发的基于动态时槽的高速公路车联网仿真软件———J-DSRelay.测试结果为10~20次测试的平均值.根据文献[11],高速公路的AP通信范围设为800m,两个AP间相距16km,符合高速公路上AP设置在加油站或服务区的实际情况.车辆的通信半径设为300m.协助下载过程中取2s[14]作为目标车与协助车建立连接所用的时间.受噪声和相干时间(coherencetime)的影响,采用6Mbps(四比特相位调制,QPSK)的传输率比18Mbps(十六比特正交幅度调制,16-QAM)和3Mbps(二比特相位调制,BPSK)能获得更高的传输性能[15],其链路层的包传输率可以达到60%左右,因此车辆间链路层的传输速率可以达到400KB/s.但是考虑到TCP/IP协议的数据包头包尾的冗余代价和重传机制,本文根据相对速度的差异将AP区下载速率设为150KB/s,对向车辆协助下载(相对速度最大)速率设为50KB/s,同向车辆协助下载(相对速度最小)速率设为200KB/s[11].图10测试了不同m值在使用5种选车策略(按序循环、局部最优、欧式距离法和曼哈顿距离法)时的用户下载数据总量.可以看出按序循环和局部最优的选车策略不受m值影响.由于按序循环每次都是按均衡目标车下载次数为选车依据,因此下载总量最低,约为60M,而局部最优下载总量约67M.使用欧式距离和曼哈顿距离方法的DSMov求解方程,随着参与计算的车辆逐渐增多,下载数据总量逐渐增加,当m=4时,两种方法已经到达了局部最优的下载数据量;当m=8时,其下载数据总量提高到约75M.下载总量高于前两种方法,并且达到了均衡的目的.图10也说明了使用曼哈顿距离方法比使用欧式距离的方法能够获取更多的数据下载总量.图10不同协助车数量下的下载数据量比较为了能够清晰描述实验结果,本文假定了车辆间的传输速率是相同的,前文中提到DSMov在传输中使用了相同长度的时间片单位,这样才能对资源进行分配,因此每次协助下载服务的时间是相同的.这就得出每次服务的下载数据量是相同的,即系统收益=总的服务次数×传输速率×时间片.由于后两项是固定的,因此实验中使用总的服务次数作为系统收益的评价指标.图11显示了不同车流量情况下的服务次数.当λ=5时,4种方法的对目标车服务次数分别为98次、111次、122次和125次.相比于按序循环的选车策略,DSMov使得服务次数增加了25%左右.当λ=7和λ=10时,4种选车策略接受服务的次数都出现不同程度的下降,DSMov与按序循环和局部最优选车策略相比增量也明显下降,这说明车流量越大,DSMov效果越明显.图12显示了使用MobTorrent[4]、DSRelayDCPP[16]以及DSMov的4种协助下载方案在一个下载区和一个盲区内(运行时间约350s)的下载数据量,在前30s的AP通信区内,4种方案的下载数据量相同,30s~150s左右没有对向行驶的协助车,下载量没有增加.150s后,随着协助车数量增加,目Page10图124种协助下载方案的下载数据量比较标车的下载总量不断增加,从结果可以看出,使用DSMov方法对盲区进行规划后下载总量在220s后明显高于其他3种方法,在到达下一个AP通信区前下载总量为47.2M,相比其他3种方法(39.9M、38.6M、36.2M)提高了20%左右.表1对按序循环、局部最优、不采用均衡方法的DSMov、采用欧式距离方法以及曼哈顿距离的DSMov选车策略分别提供给5辆目标车的服务次数进行了比较.首先看按序循环的选车策略,由于选车的原则是每辆协助车均衡获取数据,因此在这种策略中,协助车提供的98次服务平均分配给了5辆目标车.而采用局部最优的选车策略可以获取111次服务,相比于按序循环,服务次数明显提高.但是获取服务次数最多的c1(32次协助下载服务)比获取服务次数最少的c3(12次协助下载服务)多获取20次服务,显然这种选车策略导致目标车获取服务并不均衡.采用不考虑均衡下载的DSMov可以将下载次数提高到134次,提高了约20%,但是最大值和最小值之间仍然相差较大.最后两列的数据是使用加入了欧式距离和曼哈顿距离后的DSMov选车策略各目标车获取的服务次数,其最大值和最小值分别相差5和8,相对较为均衡.但是获取的服务次数略有下降.目标车按序循环局部最优近似最优欧氏距离曼哈顿距离c1c2c3c4c5总计通过上述实验,可得出如下结论:(1)相比于按序循环和局部最优的选车策略,使用DSMov使得用户下载总量提高了20%以上.(2)采用欧式距离和曼哈顿距离方法均衡下载次数,虽然会使用户下载总量略有下降,但是各个目标车获取协助下载服务的次数更趋于均衡.这种方法保证了系统运行的公平性.5总结为了有效利用高速公路环境下AP通信盲区的时空资源,在保证系统公平性的前提下尽可能提高用户下载总量,本文提出了一种车联网协助下载选车策略———DSMov.DSMov创新性的提出使用二维矩阵定义盲区时空资源和选车行为,利用车联网通信特点简化选车行为空间以减少计算复杂度,通过建立马尔可夫决策过程的优化模型对盲区时空资源分配问题进行求解;同时,DSMov提出计算到达均衡服务的欧几里得距离和曼哈顿距离作为选车行为依据,从而在均衡目标车享有协助下载服务的前提下,有效的提高用户数据下载总量.DSMov利用了高速公路车联网特点提出了一种近似全局最优的资源分配求解算法.相比于现有研究中的按序循环和局部最优选车策略,DSMov不仅在一定程度上提高了用户数据下载总量,而且保持了系统的公平性.
