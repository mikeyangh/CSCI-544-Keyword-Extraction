Page1EasiPLED:一种基于监督学习理论的无线传感网络分组丢失和错误原因识别方法黄庭培1),2)陈海明1)张招亮1),2)崔莉1)1)(中国科学院计算技术研究所北京100190)2)(中国科学院大学北京100049)摘要信道错误和冲突是导致无线网络中分组丢失和错误的两类主要因素.有效识别分组丢失和错误的原因是实现高性能无线传感器网络协议的基础.然而传感器节点资源的有限性和无线通信环境的复杂性给该问题的研究带来挑战.如何提高分组丢失和错误原因识别方法的准确率,同时保持低的识别开销和易于在节点上实现是该文研究的重点.基于监督学习理论提出一种轻量级的、准确实时的分组丢失和错误原因识别方法EasiPLED.Easi-PLED通过大量实地场景统计实验对分组接收情况进行分析,提取基于RSSI、LQI和F-BER组成的特征向量作为监督学习模型的输入,并实现了一种低开销、控制和数据分组驱动相结合的F-BER计算方法.为了降低噪声、射频硬件本身和高度动态变化的通信环境对特征值计算的影响,作者提出了一种基于误差滤波器的特征值预测方法.通过3种监督学习方法对二元和多类EasiPLED分类模型进行离线训练和检验,结果表明EasiPLED获得至少79.8%的准确率.最后基于EasiPLED的概率轮询协议验证了EasiPLED的识别性能.实验结果表明,与已有最新方法相比,该文方法最大可以将轮询成功的概率提高43.5%.关键词无线传感器网络;监督学习理论;冲突;信道错误;误差滤波器;物联网1引言随着物联网技术的不断发展,面向各种应用需求的物联网前端无线传感器网络在工业、军事和民用领域得到了广泛应用,如室内外环境监测、智能家居、远程医疗及精准农业等[1-2].目前无线传感器网络设备大多工作在ISM频段,采用无线介质进行通信,无线信道固有的广播特性导致其它工作在ISM频段的高功率网络或设备,如802.11网络、家用电器如微波炉和无绳电话等会干扰传感器节点间的通信.同时无线传感器网络一般部署在复杂的环境中,无线通信会受到天气、障碍物等因素的影响[3].图1是我们实验室在故宫部署的文物展览环境监测设备,实践工程经验表明宫殿内不同材质的柱子等静止障碍物、不同时间段内不同流量的游客等移动障碍物、其它无线通信设备如手机等都会严重影响传感器节点间的通信质量,从而导致网络中频繁的数据分组丢失和错误.并且传感器节点射频硬件本身存在性能差异[4],图3给出了我们实验室自主研发的EZ240节点(如图2)的实际输出功率和丢包率性能测试结果.结果表明不同节点的硬件性能存在很大差异.因此,在部署实际应用系统的过程中,考虑影响无线通信质量的各种因素,为传感器网络数据传输提供及时、可靠的链路状态信息,是实现高性能网络协议的基础[5].已有研究[6]表明导致分组丢失和错误的因素一般可分为以下两大类:一是信号衰减、信道衰落、多径传播或节点移动等引起的无线链路本身质量降低,从而导致分组丢失和错误,称之为信道错误类发送失败;二是由隐藏终端或多个节点同时向接收节点发送数据而产生的冲突,或者其它高功率网络干扰而引起的分组丢失和错误,称之为冲突类发送失败.传统基于竞争信道访问方式的无线网络采用确认机制来判断分组发送结果:如果接收到确认分组,则分组发送成功,如果在规定的时间内未收到确认分组,则认为是冲突导致的分组丢失和错误.这种在发送方基于确认机制的分组发送结果识别方法不能反映接收方接收分组的实际情况.如何准确而高效地识别分组丢失和错误的原因对设计高性能的网络协议具有重要和基础性的意义[7].如功率控制协议可以根据识别结果动态调整发射功率的大小;链路层可以根据识别结果自适应地调整信道访问策略;路由协议可以根据识别结果选择可靠稳定的路径收集数据;而传输层拥塞控制协议可以根据识别结果设计高效的速率自适应协议.图1故宫文物展览环境监测现场部署示意图Page3图3EZ240节点实际输出功率与丢包率性能测试结果(发送功率:0dBm;工作信道:26;距离:30m左右;测试时间:凌晨1~3点;测试地点:中国科学院计算技术研究所7层实验室;没有重传机制)已有作者针对802.11网络对分组发送失败(包括丢失和错误)的原因识别展开了相关研究.文献[8-9]采用RTS(Request-to-Send)/CTS(Clear-to-Send)控制分组来识别冲突类还是信道错误类发送失败.但是已有研究表明RTS/CTS控制分组会引入大的控制开销,大大降低了信道的利用率.因次,现有无线网络设备一般会禁用RTS/CTS功能.文献[6]提出一种COLLIE策略来诊断分组出错的原因,但该方法会引入大的控制开销,不适用于存储和能量资源都有限的传感器节点.文献[10-11]结合RTS/CTS和数据分段两种机制来区分物理层丢包和拥塞类丢包.文献[12]通过分析802.11n协议下块确认位图的损耗模式来区分弱信号类和冲突类丢包.由于802.15.4和802.11物理层标准不同,上述两类方法都不能直接应用于传感器网络.文献[13]通过分析物理层BER(BitErrorRate)的突发性特征来判断是否有冲突发生,但该方法需要额外的硬件支持,很难在低成本的传感器节点上实现.也有研究人员针对无线传感器网络提出分组丢失和错误原因识别方法.文献[14]通过分析RSSI(ReceivedSignalStrengthIndicator)和LQI(LinkQualityIndicator)在弱信号和冲突环境下的统计特征来分类分组发送结果.但是,该方法需要实时采集RSSI值,会引入大的能量开销.Wu等人通过分析802.15.4的物理层CEP(ChipErrorPattern)的统计特征来识别链路的当前状态[15].但是,该方法是在USRP设备上实现的,在普通传感器节点上很难实现,因此实用价值小.并且,该方法只考虑了同种802.15.4网络内节点间的干扰,而未考虑不同网络或设备对传感器节点通信的干扰.因此,在传感器网络中实现高效可行的分组丢失和错误原因识别方法存在以下两个方面的挑战:(1)影响因素提取与分析.由于在实际传感器网络应用中,节点间的通信受地理环境、干扰或障碍物等多种因素的影响,获取真实网络中节点间的通信状况代价大,且会影响传感器网络的正常运行.如何提取影响当前分组丢失和错误的主要因素是分组丢失和错误原因识别问题面临的最大挑战;(2)在节点上实现在线、实时和自适应的轻量级识别算法.受限的传感器节点资源及高度动态变化的通信环境要求识别方法易于在节点上实现,且开销低、自适应性强.针对上述挑战和现有研究工作的不足,考虑到机器学习在自动发现已知历史信息的规律和预测未知信息方面的强大功能,本文基于监督学习理论提出一种轻量级的、准确实时的分组丢失和错误原因识别方法———EasiPLED.本文的主要贡献总结如下:(1)为了获取实际网络中节点间通信状况信息,本文在典型的室内场景进行了大量统计实验,分析了RSSI、LQI和F-BER在不同网络环境下的统计分布特征.其中F-BER是分组级比特误码率,而RSSI和LQI是直接从硬件设备读取的信息,具有实时性强的特点.链路层和物理层信息相结合的方法能够提高EasiPLED识别的准确率;(2)基于机器学习理论对分组丢失和错误原因识别问题进行建模,设计了分组丢失和错误原因分类模型EasiPLED.以基于RSSI、LQI和F-BER组成的五元组特征向量作为输入,采用朴素贝叶斯、逻辑回归和决策树3种监督学习方法对EasiPLED分类模型进行了离线训练和检验,比较分析了不同方法下EasiPLED分类识别的性能;(3)针对第二个挑战,本文实现了接收方发起的F-BER估计方法,该方法不需要额外的通信开销,且计算和存储开销小.同时,为了降低噪声及射频硬件本身等异常情况和高度动态变化的通信环境对特征值计算的影响,提出了基于误差滤波器的自适应特征值估计方法,该方法能够快速自适应信道状态的变化;(4)在EZ240节点上实现了在线EasiPLED识别算法,并将EasiPLED识别算法应用到概率轮询协议中,验证并分析了EasiPLED的识别性能.本文第2节简要阐述分组丢失和错误原因识别相关的研究工作;第3节给出分组接收情况测量分析实验,论述实验方法及相关结论;第4节设计并实现EasiPLED分类模型;第5节实现基于EasiPLED的概率轮询协议,验证EasiPLED的性能;最后,第6节对本文进行总结.Page42相关工作已有相关研究工作可分为以下两大类:基于链路层信息和物理层信息的分组丢失和错误原因识别方法.下面分别对这两类方法进行简要阐述.2.1基于链路层信息的识别方法文献[8-11]通过802.11网络链路层的RTS/CTS分组来区分信道错误类丢包和冲突类丢包.该类方法基于以下两点考虑:(1)802.11协议采用最可靠的调制、编码方案来发送RTS/CTS分组,且RTS/CTS分组小.因此,因链路本身质量降低导致RTS/CTS分组丢失的可能性很小,从而认为RTS/CTS分组的丢失一定是因为干扰冲突引起的.(2)在RTS/CTS分组交换成功后发送数据分组,若此时数据分组丢失则是因为链路本身质量降低而引起的,因为RTS/CTS交换机制预留了信道,不会存在干扰冲突.但是目前实际部署的802.11网络系统一般都禁用了RTS/CTS功能,因为RTS/CTS分组会引入大的通信开销,降低了信道的利用率.同时文献[10-11]还使用802.11网络链路层的数据分段机制来区分丢包的原因.如果数据的第一个分片被成功接收,但第二个分片丢失了,则认为是信道错误类丢包.Cho等人[12]通过测量802.11n协议中块确认位图的损耗模式来区分信道错误丢包和冲突类丢包.在发送方实现的基于链路层信息的识别方法的准确率低,因为发送方的信道状态不能反映接收方的信道状态.同时,该类方法不能处理隐藏终端问题,且会引入大的控制开销.2.2基于物理层信息的识别方法文献[6]提出一种COLLIE识别方案.接收节点将整个错误的分组返回给发送节点,发送节点通过与原始分组进行比较,分析不同环境下各种指标所表现出的统计分布特征,如接收信号强度、符号误码率、单个符号发生错误的比特等.最后通过Metric-Vote算法来识别分组错误的原因,即上述任何一种指标表明是因为冲突导致的分组错误,则认为是冲突类错误.该方法会引入大的通信开销,不适合资源有限的传感器网络.同时,分组在返回给发送方的过程中还有可能出错,并且该方法没有考虑分组丢失的情况.本文同时考虑了分组丢失和错误两种情况,且同时利用了数据和控制分组信息,是在接收方实现的,不需要额外的控制开销.文献[13]利用纠错解码器的软判决解码器的输出,针对每个输出比特计算对数似然比(Log-LikelihoodRatios,LLR),从而在物理层直接计算信道的BER.如果在分组接收的过程中BER发生突变,即出现一个尖峰值,则认为有冲突发生.该算法准确度高,但需要特殊硬件的支持,很难在传感器节点上实现.上述方法都是针对802.11网络的,针对传感器网络的分组丢失和错误原因识别的研究相对较少.文献[14]通过同步检测和分析LQI与RSSI之间的线性关系将分组发送结果分为4类:未接收到任何分组、正确接收分组、信道错误类发送失败和冲突类发送失败.该方法需要实时采样RSSI值,会带来大的能量开销.Wu等人[15]计算物理层的CEP,通过分析链路在衰减、干扰和多径3种不同环境下所表现出的不同CEP统计分布特征来识别链路状态.作者在USRP设备上实现了该方法,但无法在现有传感器节点上实现,因此实用性小.3分组接收情况测量分析本节在3种不同室内场景下进行了大量的分组接收测量实验,分析了错误分组的F-BER分布模式和接收到分组(包括正确分组和错误分组)的RSSI、LQI在不同实验场景下的统计特征.下面介绍论文所采用的实验方法,并分析所观察到的实验结果.3.1背景与实验方法(1)背景.本文使用实验室所设计的EZ240传感器节点和TinyOS-2.x嵌入式操作系统.EZ240节点使用与IEEE802.15.4标准兼容的CC2420[16]射频接口,工作在无需授权的ISM2.4GHz频段,共有16个信道,每个信道的宽度为2MHz,相邻信道的中心频率点之间相隔5MHz.CC2420提供了RSSI和LQI读数接口.CC2420在接收分组时每隔8个符号(Symbol)的时间间隔去采集一次信道上的信号能量值,将接收分组时间内的信号能量的平均值RSSI填充到分组的CRC(CyclicRedundancyCheck)字段.LQI是分组首8个符号的信号相关值(CorrelationValue),用于指示接收到分组的信号强度或质量.CC2420在接收到分组时也将LQI填充到CRC字段.(2)实验场景与实验方法.本文在以下3种室内环境进行了大量统计实验:中国科学院青年公寓G座25层(Dor)、中国科学院计算技术研究所办公楼顶层长廊(Roof)和7层实验室(Lab).通过实验Page5测量并分析在信道错误主导和冲突主导的网络环境下接收到错误分组的F-BER分布模式和所有接收到分组的RSSI、LQI的统计特征.①Dor与Roof.Dor和Roof实验场景中不存在802.11网络干扰或干扰程度小.Dor环境内有墙壁、门等障碍物.Roof场景空旷,障碍物少.节点工作在26信道,如图4所示,26信道不受802.11网络的影响,从而降低了802.11网络对节点间通信的干扰.Dor和Roof场景下的实验主要测试信道错误(如障碍物、多径效应、信号衰减等)和802.15.4网络内部干扰对分组接收的影响.图42.4GHzISM频段下802.11b/g与802.15.4②Lab.该场景下的实验主要测试802.11网络对传感器节点接收分组的影响.节点工作在22信道.如图4所示,802.15.4标准的22信道主要与802.11b/g标准的10、11信道重叠.在本文实验的当天,活跃在11信道上的AP(AccessPoint)平均约有15个,10信道上的约有5个.该场景下的实验用于表明802.11网络是否严重干扰传感器节点间的通信.图5本文实验所实现的CC2420数据包格式(1)表1给出了在单个发送节点、127字节分组大小的3种不同实验场景下F-BER、RSSI及LQI的统计结果.在多个发送节点实验中,上述统计特征更加明显.如表1所示,在所有接收到的分组中,尤其是在复杂的通信环境Dor和Lab中,有很大一部分分组表1统计结果场景Mean(RSSI,C)Mean(RSSI,E)Var(RSSI,C)Var(RSSI,E)(E/F)/%(E/R)/%Mean(F-BER)/%Max(F-BER)/%Dor-91.35-92.460.350.5153.845.30.9Roof-91.49-91.500.280.2987.622.90.2Lab-70.38-66.953.8016.4044.857.817.3注:Mean表示均值;Var表示方差;E表示错误分组;C表示正确分组;F表示错误和丢失的分组;R表示正确和错误的分组.(2)图6给出了不同实验场景下正确分组和错误分组的实时RSSI值.如图6和表1所示,在信道所有实验考虑了不同配置参数对实验结果的影响:分组大小(22/87/127字节)、发送节点个数、发射功率大小、时间(白天/夜间)和隐藏终端.为了测试802.11网络干扰对传感器节点间通信的影响,物理层CCA(ClearChannelAssessment)机制采用载波侦听模式,即通过分析无线信号的特征(扩频信号和载波频率)来判断信道是否空闲.同时,为了获取错误分组,实验禁用了CC2420芯片的CRC和地址识别功能.为了评估错误分组占总接收分组的比例,本节实验禁用了链路层重传功能.在单个发送节点实验中,发送节点每300ms向接收节点发送一个分组,共发送5000个,接收节点记录下每个接收到的分组(包括错误分组)及每个分组的RSSI和LQI值.在含有多个发送节点的实验场景中,还有1个同步节点和1个接收节点.同步节点用于时间同步,使得发送节点同时向接收节点发送数据.其它配置参数与单个发送节点实验相同.在干扰主导的网络环境中,调整发送节点的功率,确保在没有干扰时,节点能够正确接收所有的分组.每组实验重复10次.3.2实验结果分析下面分析错误分组的F-BER分布模式、RSSI和LQI的统计特征.F-BER是分组级比特误码率.图5给出了本文在EZ240节点上所实现的CC2420数据包的格式,其中未包含6lowpan字段.计算F-BER值时未考虑物理层头部字段.实验结果总结如下:是错误分组(E/R:Dor,45.3%;Roof,22.9%;Lab,57.8%).并且,在所有错误和丢失的分组中,错误分组占有很大的比例(E/F:Dor,53.8%;Roof,87.6%;Lab,44.8%).因此,可以利用错误分组的相关信息来帮助识别分组丢失和错误的原因.错误主导的网络环境下,如Dor和Roof,单个错误分组的RSSI值一般小于正确分组,但降幅不是很明显.Page6并且,所有分组的RSSI值变化幅度小(Var(RSSI,C)/Var(RSSI,E):Dor,0.35/0.51;Roof,0.28/0.29).同时,错误分组的RSSI值与正确分组的RSSI值之间相差不大.但在冲突主导的网络环境中,如Lab,与正确分组的RSSI值相比,单个错误分组的RSSI值波动比较明显,且波动幅度大.但是,一段时间内错误分组的RSSI均值要比正确分组的大,同时所有分组的RSSI值的变化幅度大(Var(RSSI,C)/Var(RSSI,E):Lab,3.8/16.4).因此,本文利用一段时间内正确分组的RSSI均值(记为Mean(RSSI,C))、单个错误分组的RSSI值与一段时间内正确分组的RSSI均值之间的变化幅度(记为Dev(RSSI))来帮助识别分组丢失和错误的原因.(3)图7给出了不同实验场景下正确分组和错误分组的实时LQI值.由图7可知,与RSSI的统计特征不同,几乎在所有环境下,无论是单个LQI值,还是一段时间内的LQI均值,错误分组的LQI值相对于正确分组的LQI值都会降低.并且在信道错误主导环境中,单个分组的LQI值波动也更剧烈,降低幅度更明显.这是因为很小的SINR变化都会导致LQI值的波动.并且,如果信道本身质量降低时,所有分组的LQI值都会偏低.LQI与RSSI之间所表现出的不同统计特征与它们的计算方法有关:LQI是计算分组首8个符号的平均信号相关值,指示信道的SINR水平,而RSSI是整个分组接收过程中信道上信号强度的平均值.因此,本文利用一段时间内正确分组的LQI均值(记为Mean(LQI,C))来帮助识别分组丢失和错误的原因.(4)图8给出了F-BER在不同实验场景下的累积分布图.结果表明,因冲突干扰导致的错误分组的F-BER的分布比信道错误引起的错误分组的F-BER的分布要宽.例如,90%因信道错误引起的错误分组的F-BER只有3%或更少,但是只有25%Page7因冲突干扰引起的错误分组的F-BER占3%或更少.并且,在高功率网络干扰(802.11)和同种网络内节点间干扰(802.15.4)环境下,错误分组的F-BER呈现相似的累积分布模式.因此,本文将F-BER作为分组丢失和错误原因识别模型的一种输入特征属性.对错误分组的头部进一步分析,发现在信道错误主导环境中,分组头部出错的概率要大,这是因为在基于竞争式的CSMA/CA网络中,节点在发送数据之前都会做CCA检测,只有在信道空闲时才发送数据,所以在冲突主导环境下,分组头部发生错误的概率要小.而如果信道本身质量降低,即使信道空闲,分组也有可能出错.所以本文利用这一特征来帮助识别分组丢失和错误的原因.4EasiPLED的设计与实现本节基于机器学习理论对分组丢失和错误原因识别问题进行建模.下面详细阐述基于监督学习理论的分组丢失和错误原因识别模型,即EasiPLED的设计与实现.4.1EasiPLED概述EasiPLED包括特征提取、估计与样本采集,问题建模、离线训练与检验和在线识别3个步骤.(1)特征提取、估计与样本采集.该步骤需要提取能够表征分组丢失和错误原因的特征属性.具体实现时接收节点记录每一个接收到的分组(包括错误分组),并记录每个分组的RSSI和LQI值,如果分组发生错误,则计算F-BER值.同时,估计正确包在一段时间内的RSSI和LQI平均值.本步骤为问题建模、离线训练与检验提供高质量的样本集.(2)问题建模、离线训练与检验.通过监督学习方法对问题进行建模、离线训练与检验.本文以基于RSSI、LQI和F-BER组成的特征向量作为监督学习模型的输入,输出引起分组丢失和错误的原因.(3)在线识别.在线实时地识别分组丢失和错误的原因.在线EasiPLED识别是在接收方实现的一种数据分组和控制分组驱动相结合的分类器.最后通过将EasiPLED应用到概率轮询协议中,验证其性能.第5节对EasiPLED的在线识别和基于EasiPLED的概率轮询协议进行介绍.4.2特征提取、估计与样本采集4.2.1特征提取与输出标记监督学习方法的第一步需要提取模型的输入特征向量,采集样本特征值,并标记输出结果.第3节的实验结果表明传感器节点接收到分组的RSSI、LQI和F-BER在不同网络环境下(本文主要考虑信道错误主导和冲突主导两种)表现出不同的统计特征,因此本文提取RSSI、LQI和F-BER的相关统计特征作为监督学习模型的输入特征向量的属性.特征向量各属性的定义如表2所示.其中Dev(RSSI)的计算公式如下Dev(RSSI)=(Mean(RSSI,C)-Inst(RSSI,E))2,其中Inst(RSSI,E)是接收到的错误分组的瞬时RSSI值.R(F-BER,H)的定义如下R(F-BER,H)=#_F-BER(H)≠0其中#_F-BER(H)≠0是一段时间内接收到的错误分组中CC2420头部出错的个数,#_F-BER(P)是一段时间内接收到的错误分组的总个数.特征属性Mean(RSSI,C)一段时间段内正确分组的RSSI平均值Mean(LQI,C)一段时间内正确分组的LQI平均值Dev(RSSI)单个错误包的RSSI瞬时值相比一段时间内正F-BER分组级比特误码率R(F-BER,H)一段时间内CC2420头部出错的概率输出标记用于将输入特征元组指派到一个特定的类.本文采用两种输出标记方法:二元(BinaryModel,BM)和多类(Multi-classModel,MM)Easi-PLED分类模型.二元EasiPLED分类模型将分组丢失和错误的原因区分为信道错误和冲突两种.而多类EasiPLED分类模型对分组丢失和错误的原因进行更细粒度的区分,具体标记为信道错误、信道错误主导、冲突主导和冲突4种情况.因为在实际网络环境中,信道错误和冲突都存在时,更细粒度地识别分组丢失和错误的原因可以给网络协议提供更准确的决策信息.4.2.2特征值估计测两个功能模块.特征值估计主要包括F-BER估计和特征值预(1)F-BER估计.在以太网中,发送节点通过比较接收到的信号和发送信号来检测是否有错误发生.但在无线网络中,射频接口工作在半双工模式,节点在发送信号的时候不能同时侦听信号以检测是否有错误发生.即使设备有多个射频接口,发送节点感知到的信道状态也不能表明接收节点处的信道状态.文献[6]提出一种计算分组级比特误码率的方法COLLIE.在COLLIE中,接收节点将整个错误的分Page8组返回给发送方,发送方再与原始分组进行比较,从而计算出分组中发生错误的比特数.但COLLIE方法不适合于资源受限的传感器网络节点,因为:(1)COLLIE会引入大的控制开销,消耗有限的能量和带宽资源;(2)COLLIE在将错误分组返回给发送方时,分组还有可能出错或丢失.针对上述问题,本文提出两种在接收方实现的F-BER估计方法:(1)控制分组驱动的F-BER估计方法.因为无线传感器网络需要周期性地发送控制分组完成组网、配置调试等功能.如路由程序通过周期性地发送探测分组建立路由,网关节点周期性地发送控制命令对网络进行配置或查询,这类控制分组的大部分内容对所有节点都是已知的.所以可以通过这些已知内容的控制分组来计算F-BER.(2)数据分组驱动的F-BER估计方法.为了提供可靠的链路层通信,传感器网络中链路层协议一般都采用了链路层重传机制.接收节点将接收到的错误分组存储下来,当接收到最终正确分组时,通过比较正确分组和错误分组来计算F-BER值.如果节点在接收到正确分组之前接收到多份错误分组,则计算每一个错误分组的F-BER值,最终F-BER值为多份错误分组的F-BER值的平均值.本文实现时结合了上述两种方法,在离线训练阶段,通过发送已知控制分组来计算F-BER值,而在在线识别阶段采用数据分组和控制分组相结合的F-BER计算方法.图9给出了数据分组驱动的F-BER计算方法在不同重传次数下的准确率.图9表明95%以上的分组在重传3次后都能够正确接收.图9数据分组驱动的F-BER计算方法的准确率(2)特征值预测.在线识别模块以当前测量的特征值作为训练后的EasiPLED分类模型的输入,输出将来可能会导致数据丢失和错误的原因.因此,高效而准确的特征值估计方法是实现高性能在线EasiPLED识别方法的基础.本文提出一种基于误差滤波器(Error-basedFilter)[17]的特征值预测方法,根据当前的测量值和过去的估计值,预测将来一段时间内的特征值.基于误差滤波器的特征值估计模型定义如下其中,Featnew是表2中所定义的Mean(RSSI,C)、Mean(LQI,C)和R(F-BER,H)特征属性的当前测量值,而Featt-1是上述特征属性的历史估计值,Featt是上述特征属性的当前估计值.α是平滑因子,其定义如下δt=βδt-1+(1-β)Featt-1-Featnew,其中δt反映了误差滤波器的预测能力,能够自适应地控制误差滤波器的预测误差.因此,又称δt为估计器误差.如果误差滤波器的预测值与实际值相匹配,则增加历史估计值的权重,否则,通过降低平滑因子α的值来降低历史估计值的权重.δt是历史估计值和当前测量值之差的绝对值.误差滤波器不直接使用绝对差值,而是通过指数加权移动平均滤波器对δt进行二次平滑处理.其中,δmax是特征值估计窗口W内估计误差的最大值,β是平滑因子.4.2.3样本采集离线训练与检验需要采集大量的样本数据.本文采用第3节介绍的实验方法在3种不同的室内环境进行了大量的实验,采集了400MB多的原始数据.在Dor和Roof场景下主要测量了信道错误主导环境下节点接收数据的情况和802.15.4网络干扰主导情况下节点接收数据的情况.在Lab场景下主要测量了冲突干扰和信道错误都存在的环境下和802.11网络干扰主导环境下节点接收数据的情况.4.3问题建模、离线训练与检验4.3.1问题建模基于4.2节所提供的特征向量和样本集,本节使用监督学习方法对分组丢失和错误的原因识别问题进行建模,设计并实现EasiPLED分类模型.EasiPLED分类模型以表2给出的5个特征属性组成的特征向量作为输入、输出引起分组丢失和错误的原因.本文用狓表示输入特征向量,即有狓=[Mean(RSSI,C),Dev(RSSI),Mean(LQI,C),所有特征属性的值都是离散的.F-BER和R(F-BER,H)的取值范围为[0,1],RSSI和LQI具有不同的取值范围,分别为[-100,0]dBm和[50,110],而Dev(RSSI)的取值范围为[0,104].本文对F-BER,R(F-BER,H)]T,Page9Mean(RSSI,C)、Mean(LQI,C)和Dev(RSSI)进行归一化处理,使得它们的取值范围为[0,1].用y表示EasiPLED分类器的输出,则对于二元EasiPLED分类模型,定义而对于多类EasiPLED分类模型,定义4.3.2离线训练与检验为了能够在实际传感器节点上运行EasiPLED识别算法,在选择机器学习方法时需要考虑以下因素:(1)样本集建立开销.EasiPLED分类模型不需要大的部署开销和长时间的样本采集.否则,Easi-PLED分类模型的训练和检验开销抵消了使用该模型带来的收益;(2)EasiPLED在线识别算法的计算和存储开销.因为EasiPLED分类模型的离线训练与检验是在计算机或网关节点上实现的,所以可以不考虑离线训练和检验EasiPLED分类模型的计算与存储开销.但是在线识别算法需要在传感器节点上实现,所以经过训练后的EasiPLED在线识别分类算法的计算和存储开销要低.基于上述因素的考虑,本文使用朴素贝叶斯(NaveBayes,NB)、逻辑回归(LogisticRegression,LR)和决策树(DecisionTree,DT)3种监督学习方法对EasiPLED分类模型进行离线训练和检验.朴素贝叶斯分类器是一种简单的统计学分类方法,基于贝叶斯定理,假定一个属性值对给定类的影响独立于其它属性值(类条件独立性).尽管这一假定非常强,且在实际问题中很难成立,但朴素贝叶斯分类器在很多复杂的实际问题中表现出好的性能,如文本分类.由于它在简单性和计算速度方面的优势,本文以它作为比较其它分类器性能的基准.逻辑回归分类器是一种广义线性分类模型,将某个事件发生的概率看作预测变量集的线性函数,预测输出是一个离散的值.逻辑回归在机器学习领域得到广泛的应用,容易在传感器节点上实现.决策树是一种实现分治策略的层次数据结构.决策树分类器是一种有效的分类学习方法,从类标记的训练元组学习决策树.决策树的构造不需要任何领域知识和参数设置,适合于探测式知识发现,获取的知识表示成树的形式,具有直观和容易被人理解的特点.本文在Weka[18]平台上对EasiPLED分类模型进行训练和检验.在具体训练和检验实验中,朴素贝叶斯分类算法使用拉普拉斯校准避免零概率值问题.逻辑回归分类器使用岭估计器(RidgeEstimator)[19]避免过分拟合(Overfitting)数据的问题.本文使用C4.5决策树算法[20],该算法使用信息增益率作为属性选择的度量,使用悲观剪枝方法来处理过分拟合数据的问题.本文采用数据挖掘领域广泛使用的K-折交叉确认(K-foldCross-Validation)[18]对样本集进行训练和检验,以避免过分拟合数据和大的存储空间.在具体训练和检验时使用了10-折交叉确认,并采用配对t统计显著性检验方法对比分析了3种EasiPLED分类器的性能.4.4分类结果分析4.4.1性能指标本节比较分析3种EasiPLED分类器在准确率、预测误差、开销和代价方面的性能.并讨论分组大小(L)、特征值估计窗口大小(W)和样本集大小(M)对分类器性能的影响.(1)预测误差.考察了预测值与实际已知值之间的差值,本文使用均方根误差(RootMeanSquaredError,RMSE)评估EasiPLED分类器的预测误差.(2)代价.本文考虑命中率(TruePositiveRate,TP)和假警报率(FalsePositiveRate,FP)两个性能指标.TPrate=TP对于二元EasiPLED分类器,TP和TN(TrueNegative)是正确分类的个数,FP是实际为信道错误而被预测为冲突的个数,FN(FalseNegative)是实际为冲突而被预测为信道错误的个数.对于多类EasiPLED分类器,可用类混淆矩阵(ClassConfusionMatrix)表示上述关系.表3给出了多类EasiPLED分类器运行结果的类混淆矩阵.通常期望大的TPrate和小的FPrate.在实际应用中考虑EasiPLED分类器的TPrate和FPrate性能指标很重要,因为错误的识别结果会导致协议做出错误的决策,如错误认为冲突丢包而增加信道访问的退避时间会增加传输延时.Page10实际的类信道错误94610523信道错误主导107833冲突主导1029855109冲突(3)准确率.正确分类样本占总检验样本的比Accuracy=TP+TN例,定义为(4)开销.包括计算、存储和通信开销.由4.2.1和4.2.2节可知,本文所提出的在线特征值计算方法是在接收方实现的,不需要额外的通信开销,且计算和存储开销小.同时,基于朴素贝叶斯和逻辑回归模型的EasiPLED分类器在线识别的计算和存储开销小.但是,为了使用基于决策树的EasiPLED分类器的输出结果,需要将决策树转化成IF-THEN规则.规则的数目取决于决策树叶子节点的个数.对于上百个叶子节点的决策树,就需要将上百条规则编入代码中去.因此,EasiPLED在线识别算法需要在识别准确率和开销之间进行权衡.4.4.2结果分析若无明确说明,下面所有实验的参数配置如下:分组大小为127字节,特征值估计窗口大小为5,样本集大小为500.(1)分类器性能比较.表4给出,3种二元EasiPLED分类器在显著性水平为5%时,进行10-折交叉确认配对t检验下各指标的性能.结果表明基于决策树和逻辑回归算法的EasiPLED分类器的性能明显好于基于贝叶斯算法的性能.这是因为贝叶斯分类算法假定表2中定义的各属性之间是相互独立的.但在本文问题中,该假设不成立,F-BER、LQI的值依赖于接收信号强度RSSI的值.基于决策树算法的EasiPLED分类器的准确率略低于基于逻辑回归的准确率,但其命中率要好.并且随着样本数的增加,基于决策树算法的EasiPLED分类器的准确率要好于基于逻辑回归的准确率.同时,决策树分类算法的输出结果最终被转换成易于理解的规则,存储开销小(决策树大小为21,叶子节点数为11)和计算速度快,所以基于决策树算法的EasiPLED分类器的性能整体优于基于逻辑回归算法的性能.(2)二元与多类分类模型.由表5可知,所有多类EasiPLED分类器的性能整体上要优于二元EasiPLED分类器.这是因为简单的二元EasiPLED分类模型不能有效识别信道错误和冲突同时存在的情况.而在实际部署的传感器网络中,由于通信环境复杂,冲突干扰和信道错误有可能同时存在,进一步区分占主导地位的影响因素能够提高分组丢失和错误原因识别的性能.多类EasiPLED分类模型将进一步区分信道错误主导和冲突主导两种情况,因而获得更准确的分类结果.并且,基于决策树算法的多类EasiPLED分类器的性能要优于基于逻辑回归算法的性能.但是基于决策树算法的多类EasiPLED分类器在线识别的开销有所增加,如87.94%准确率下多类决策树有27个叶子节点.因此,在实际传感器网络应用中,可以考虑在网关节点或簇头节点上实现多类EasiPLED分类器,以提供更准确的决策信息.而在簇内节点上实现二元EasiPLED分类器.下面主要集中讨论基于决策树算法的二元Easi-PLED分类器的性能,而在第5节对基于决策树算法的多类EasiPLED分类器的性能进行验证.准确率79.1984.8283.54命中率假警报率0.230.130.22预测误差0.390.310.30表5二元和多类EasiPLED分类器的性能比较准确率84.8285.4183.5487.94命中率0.830.820.890.88假警报率0.130.070.220.02预测误差0.310.240.300.19(3)分组大小.表6表明了分组大小对基于决策树算法的二元EasiPLED分类器性能的影响.结果表明整体上分组大小对分类器性能的影响小.但是,随着分组变小,分类器的性能有所降低,这是因为分组越小,在复杂网络环境下(如有干扰冲突或移动障碍物时),分组丢失的可能性越大.实地实验也表明,在相同网络配置环境下,分组越小,接收到分组的RSSI值越小.因此,本文采取控制分组和数据分组驱动相结合的方式,可以克服短的控制分组下EasiPLED性能降低的问题.分组大小准确率/%假警报率预测误差开销2281.790.230.34118782.010.220.311112783.540.220.3011Page11(4)特征值估计窗口大小.图10给出了基于决策树算法的二元EasiPLED分类器在不同特征值估计窗口下的性能变化.如图所示,随着窗口值的增大,二元决策树分类器的性能得到提升.但是,窗口值超过6时,性能又开始下降.这是因为信道状态在短时间内表现出高度的动态变化特性和网络中的数据流量短时间内具有突发性,所以窗口太小或太大都会降低特征值估计的准确度.同时,图10(b)显示随着窗口值的增大,决策树的大小也呈上升趋势.因此,为了在开销和其它性能指标之间取得好的权衡,将在线EasiPLED识别算法的特征值估计窗口大小设为5.(5)样本集大小.图11表明随着样本集的增大,基于决策树的二元EasiPLED分类器的准确率上升,在6000的样本集上准确率达到了93.03%.而假警报率和预测误差降低.随着样本集的增大,生成的决策树规模也增大,但最多生成21个叶子节点.因此,易于在传感器节点上在线实现基于决策树的二元EasiPLED分类算法.同时,基于决策树的二元EasiPLED分类器在500大小的样本集上准确率达到了83.35%.因此,在传感器网络部署时或运行过程中周期性采集样本的开销小,易于在实际应用中实现.图11M对基于决策树算法的二元EasiPLED5EasiPLED在概率轮询协议中的应用本节将EasiPLED分类结果应用到概率轮询协议[21]中去,以验证EasiPLED的识别性能.5.1概率轮询协议轮询协议在传感网络中有很多应用,如可靠广播、leader选举、分簇、网内信息处理、数据聚合及能量收集传感器网络等[21].在基于概率的轮询协议中,轮询节点向邻居节点发送携带了概率信息pc的请求分组,接收到请求分组的节点生成一个在[0,1]范围的随机数pr,如果pr<pc,则轮询节点发送一个应答分组.理想情况下,所有收到请求分组的节点中应该只有一个节点回复应答分组,如果有多个节点同时发送应答分组,则在轮询节点处发生冲突,从而降低了轮询协议的性能.因此,若有冲突发生,则轮询节点降低pc的值,如果正确接收到应答分组,则增加pc的值.本文将EasiPLED的识别结果应用到基于概率的轮询协议中去,使得轮询节点根据分组丢失和错误原因识别的结果自适应地调整pc的值,从而提高了轮询协议的吞吐量性能.5.2基于EasiPLED的概率轮询协议算法1给出了基于EasiPLED的概率轮询算法的伪代码.其中Pt的值取决于EasiPLED分类结果的误警报率,即Pt=1-FPrate.当信道错误和冲突都存在时,多类EasiPLED识别模型输出当前影响Page12分组丢失和错误的主导因素,此时算法1以概率Pt自适应地调整pc的值,能够有效降低EasiPLED错误识别结果的影响.算法1.基于EasiPLED的概率轮询算法.输入:EasiPLED识别结果.若是二元分类模型,则有输出:pc1.score←1,其中score12.pc=1/score3.轮询节点发送携带了pc信息的请求分组4.如果轮询节点正确接收到应答分组,则将score的值5.如果没有收到任何分组或接收到错误的应答分组,6.若是信道错误引起的分组丢失或错误,则保持pc的7.若是信道错误主导引起的分组丢失或错误,则以概8.若是冲突主导引起的分组丢失或错误,则以概率Pt9.若是冲突引起的分组丢失或错误,则将score的值加10.返回pc的值5.3性能分析由文献[21]可知,最大化轮询成功的概率ps也会最大化吞吐量,所以本文以ps为性能评价指标来分析基于EasiPLED的概率轮询协议的性能.如果轮询节点成功接收到邻居节点的应答分组,则此次轮询成功,则ps的计算公式如下其中ns是轮询节点的邻居节点的个数.文献[21]证明了pc的最优值为1/ns,因此理论上ps的最优值为1,从而降低pc的值本节在EZ240节点上实现了二元及多类在线EasiPLED识别算法及轮询协议.当接收节点未收到任何邻居节点的应答分组或收到错误分组时,采用4.2节介绍的特征值估计方法在线实时地估计特征值,作为训练后的EasiPLED分类器的输入,EasiPLED分类器输出当前分组丢失和错误的原因.概率轮询协议根据EasiPLED的输出结果自适应地调整pc的值.在Dor、Roof和Lab的3种室内环境下进行了大量实验,与最新研究成果(记为RS-SI-LQI)[14]及理论最优值进行了比较分析.图12给出了各种环境下的实验拓扑图.图12Dor(左)、Roof(中)、Lab(右)环境下实验拓扑图图13给出了基于多类EasiPLED识别算法的轮询协议在不同邻居节点个数下轮询成功的概率(置信区间为95%).如图所示,在所有实验场景中,本文基于EasiPLED的概率轮询协议比基于RSS-LQI的性能要好,最好情况下也能提升43.5%,即使是在单个邻居节点环境中,也至少能提升5.1%.并且,随着邻居节点个数的增加,本文协议轮询成功的概率稳定,有时候能超过理论值,这是因为物理层的捕获效应(CaptureEffect)使得即使有多个节点同时发送数据,轮询节点也能正确接收信号强度最大的分组.基于RSSI-LQI的轮询协议在本文环境下性能最差,最坏情况只能达到理论值的74.4%,Page13并且随着邻居节点个数的增加,轮询成功的概率不稳定,变化幅度大.这是因为基于RSSI-LQI的分组发送结果分类方法不能有效识别分组丢失的情况,从而在有大量分组丢失的网络环境下,其识别准确率下降.同时,由于在实际网络环境中,受到通信环境和硬件本身的影响,RSSI和LQI之间不存在简单的线性关系.因此,通过基于RSSI与LQI线性拟合的识别方法很难准确区分各种情况.例如,在本文实验场景中,基于RSSI-LQI的分类方法准确率最坏情况下只有67.8%.而本文同时考虑了分组丢失和错误两种情况,且基于误差滤波器的特征值估计方法能够有效降低噪声等异常情况的影响.Easi-PLED在最坏情况下识别准确率达到了79.8%.同时,图13表明,所有协议在Roof环境下性能最好,而在Lab环境下性能最差.这是因为Roof通信环境空旷,节点在相互可视通信距离范围之内,且没有802.11网络的干扰.但是,即使在复杂的Lab通信环境内,本文协议也具有较好的性能,这是因为多类EasiPLED识别模型对信道错误和冲突都存在的情况进行了进一步细分,给出导致当前分组丢失和错误的主导因素,在轮询节点发现丢包或错误包时,根据EasiPLED识别模型的误警报率,以概率Pt自适应地调整pc的值,从而降低了错误识别结果对轮询协议性能的影响.6结论本文基于监督学习理论提出一种分组丢失和错误原因识别方法EasiPLED.EasiPLED通过大量室内实地统计实验分析了不同环境下错误分组的F-BER分布模式和接收到分组的RSSI、LQI统计特征,从而提取5种特征属性组成监督学习模型的输入特征向量.本文采用控制分组和数据分组驱动相结合的机制,在接收方估计F-BER的值,该方法具有开销小、易于在传感器节点上实现的特点.同时,为了降低噪声及射频硬件本身等异常情况和高度动态变化的通信环境对特征值计算的影响,本文采用基于误差滤波器的特征值预测方法,从而有效提升了EasiPLED识别的准确率.通过3种监督学习方法对二元和多类EasiPLED识别模型进行离线训练和检验,结果表明EasiPLED具有分类准确率高、开销小的特点.最后通过概率轮询协议验证了在线EasiPLED识别方法的性能,实际场景实验结果表明,EasiPLED比文献[14]中的方法具有更高的轮询成功的概率.致谢审稿专家和编辑为本文提出了宝贵的修改意见和建议,作者在此表示衷心的感谢!
