Page1面向服务和信息的网络体系结构———SIONA夏春梅徐明伟(清华大学计算机科学与技术系清华信息科学与技术国家实验室(筹)北京100084)摘要随着网络需求的改变,信息中心网络ICN(InformationCentricNetworking)被提出,目前提出的ICN方案基本存在可扩展和部署难的问题.文中提出了一种新的面向服务和信息的网络体系结构SIONA.采用了IP地址加信息内容的Hash值作为信息名字,支持缓存加多源组播的路由模式,阐述了路由器反馈接收端驱动的多窗口的拥塞控制协议.IP地址作为信息名字的前缀,不仅支持IP地址的路由,而且解决了ICN的可扩展和部署难问题,保证了SIONA仍具有IP网络的可扩展能力.而多源组播路由协议和拥塞控制协议的提出保证了SIONA更高效、更稳定和更公平的传输.文中模拟了多源分块路由算法和拥塞控制算法.通过分析和模拟,SIONA不仅具有良好的可扩展性,而且更具高效性、安全性和易部署性.关键词SIONA;网络体系结构;面向服务和信息;路由转发;信息中心网络(ICN)1引言根据IDC(InternationalDataCorporation,国际咨询数据公司)2011年的报告显示①,2010年信息量突破了泽字节(zettabyte=1021)的水平,2011年的数量则增长到1.8泽字节,达到2006年的9倍.信息的爆炸式增长对现行软件、硬件、服务、安全、人员提出了新的挑战,对信息的创建、存储、访问及处理等生命周期的管理成为了体系结构设计中考虑的核心因素[1].尤其从近几年的Web和CDN(ContentDistributionNetwork,内容分布网络)应用可以看出,用户对互联网的需求主要是海量信息的访问,主机之间的通信需求已经成为历史.在信息成为核心需求的情况下,用户只关心信息本身,不关心信息的存放位置.现有完全以地址为中心的通信网络模型已经不能高效解决这一问题,以信息为中心的网络成为研究热点.在现有IP网络中,为了迎合海量信息访问的需求,主要采用了WebCache[2]、P2P(PeertoPeer,端到端)[3]、CDN[4]等技术.这些技术基于应用层,对于采用IP地址的网络而言,仍存在大量冗余数据传输,造成了带宽浪费,传输效率并不是很高.目前,以信息为中心的网络有相关研究,如CCN(ContentCentricNetwork,内容中心网络)[5]、DONA(Data-OrientedNetworkArchitecture,面向数据的网络体系结构)[6]等,这些研究也只是处于一种起步研究.CCN以信息为中心,网络层采用信息名字路由分组,不考虑IP地址.CCN由于从信息需求出发,基于信息名字路由数据,没有增加传输负载,加上中间节点的缓存数据,使得CCN的传输效率高于IP网络.但CCN采用了URL(Uniform/UniversalResourceLocator,统一资源定位符)作为信息名字,以URL路由和转发数据会带来比IP网络更大的路由膨胀问题、移动性问题等.同时,CCN采用了全新的网络体系结构,“全新”意味着不是对IP网络的增量部署,而是一种全新的部署.抛弃IP网络构造全新的CCN,应该是极度困难的工作.DONA将数据层置于IP层之上,底层仍然采用IP网络.IP地址作为一种本地标识,而数据名字作为一种全局路由标识.DONA建立了一种层次化的RH结构,将解析和路由合二为一,提高了传输效率.但是DONA由于采用扁平化名字,顶层路由器存在严重的可扩展问题.还有其它的一些方案如NetInf(NetworkofInformation,信息网络)[7-8]、INS(IntentionalNamingSystem)[9]、TRIAD(Transla-tingRelayingInternetArchitectureintegratingActiveDirectories)[10].这些方案主要存在可扩展及部署难的问题.本文提出了一种面向服务和信息的网络体系结构SIONA,这种结构不是一种新的网络体系结构,而是IP网络的延展.对比于传统的IP网络,SIONA解决了传输高效性的问题.对比于CCN、DONA等网络,SIONA解决了可扩展性和易部署性问题.在SIONA中,采用混合方式[11]来命名信息.混合方式指将层次化命名方式和扁平化命名方式结合,兼具了两种命名方式的优势,既具备了良好的可扩展性,又具备了持久性和自我验证性.SIONA信息命名形式为P:N:S,其中P为信息所在主机的位置标识,采用IP地址表示,是信息名字的层次化部分;N是信息自身标识,采用信息内容的Hash值表示,具有全局唯一性,是信息名字的扁平化部分;S是对信息提出的服务要求.采用IP地址加信息Hash值的命名方式既能兼容传统的IP网络,又能将信息作为第一公民考虑到网络层中.既保证具有IP网络的可扩展能力,又保证在现有IP网络中更易部署.SIONA采用多源组播树的路由模型,支持信息的多源分块传输.SIONA信息名字包括IP地址,信息名字可聚合到IP前缀,FIB表仍以IP前缀路由数据,因此,仍支持传统路由模式.在SIONA的路由模型中,我们提出了多源分块路由算法,解决多源分块传输的问题.在第6节,我们构建了模拟环境模拟了多源分块路由算法.通过模拟可见,多源传输模型效率明显高于单源传输效率.SIONA在路由器中增加缓存,用以存储信息内容,缓存中的信息内容作为信息源参与路由转发,为需求端提供数据,这种缓存技术节省了传输资源,提高了传输效率.SIONA提出了路由器反馈的拥塞控制模型,拥塞控制由接收方驱动.SIONA的通信是由需求方发起的,并没有三次握手协议,服务器端只是被动的回应数据,是一种典型的“拉”模式.在这种模式下,拥塞控制只能由需求方(接收方)完成.路由器反馈时,①The2011DigitalUniverseStudy:ExtractingValuefromites/emc-digital-universe-2011/index.htmPage3综合考虑了公平性和高效性,保证了每流最大利用带宽资源.在SIONA中,由于路由器中的缓存可作为数据源,所以在拥塞控制中存在不稳定信息源的问题,给ICN的拥塞控制带来新的挑战.而路由器反馈机制可以解决这类问题.第6节我们模拟了路由器反馈的拥塞控制算法,模拟结果显示这种机制具有较好的效率性、稳定性和公平性.SIONA支持对信息提出的服务要求,如验证信息的安全性、QoS(QualityofService,服务质量)、有效性等.本文第2节介绍相关研究工作;第3节概览SIONA结构;第4节详细介绍SIONA的命名和编址结构、分组类型、路由转发模型和拥塞控制机制;第5节阐述SIONA中的多源分块路由算法和路由器反馈的拥塞控制算法;第6节对两种算法进行模拟和评价;第7节给出了结论.2相关工作以信息为中心的网络目前的研究主要分为两类.一类是不改变原协议栈结构,在网络层之上增加内容层.内容层采用数据名字,路由时作为全局标识,而网络层仍然采用IP地址,路由时仅为本地标识,主要代表的研究成果有DONA、INS.另一类是采用全新的网络体系结构,协议栈中网络层采用数据名字,没有IP层的支撑,路由采用数据名字作为标识,典型研究是CCN/NDN.CCN以URL作为数据名字.由于URL具有层次性,在转发表中,数据名字可以按照前缀进行聚合,基于数据名字路由到最优服务器.服务器按照请求回应数据,同时在中间路由器缓存数据.CCN相似于单源内容组播,大大简化了协议栈结构,提高了路由转发效率.但是CCN名字最终可聚合到所有主机,而主机数量最高可达到4G,也就是说CCN转发表仍然存在可扩展问题.而且域名具有更显著的扁平性,对于域名的聚合研究比IP地址聚合研究难度更大,CCN的可扩展问题更严重,更难以解决.CCN采用发送一个Interest分组,回应一个Data数据的传输控制方式(Interest分组是请求分组的名字,Data分组是回应的数据分组的名字),形式简单,但是公平性和效率性有待提高.CCN不支持多源到多目的的传输.DONA是2007年提出的.DONA提出了一种新的命名结构P:L,P是管理实体的公钥Hash值,L是数据的Hash值,具有全局唯一性.在DONA中,每个域内设置RH(ResolutionHandler,解析处理器),RH之间的关系和策略与域之间的关系和策略完全相同.RH既支持路由又支持解析,解析和路由同时进行.采用数据名字作为全局路由标识,而IP作为本地路由标识仍然工作在内容层下面.利用两类分组register(注册分组名字)和find(查找路由分组名字)通过RH结构完成路由和解析功能.DONA与DNS结构相比,将解析和路由过程合二为一,具有高效性.但是,由于名字和IP地址之间仍然存在解析过程,增加了网络负载,浪费了网络带宽.同时,DONA也存在可扩展问题.INS是1999年提出的,采用属性值对作为数据名字.建立了名字树,基于名字树解析和路由.底层仍然采用IP网络.路由采用两种模式早绑定和晚绑定,早绑定基于IP地址路由;晚绑定基于名字路由,IP地址只作为一种本地化标识,利用隧道方式实现通信.INS采用了属性值对作为数据名字,这种定义方式会带来规模和性能可扩展问题.同时解析过程是一种冗余操作,浪费带宽,INS性能不优于IP网络.基于内容的网络研究成果还有NetInf、TRIAD等,基本思想与上述有所雷同,这里不再赘述,详见参考文献.启动于2010年的MobilityFirst未来网络体系结构[12-14]基于移动性设计的信息中心网络,支持名字与位置分离,名字采用内容的Hash值.路由采用逐跳式路由方式,基于信息名字路由.采用全局名字解析服务实现无缝隙解析和路由.采用网内缓存存储分组,防止由于带宽的急速变化和临时的链路中断所造成的分组丢失,增加了无线网络的传输效率和可靠性.已有研究成果主要存在可扩展问题,所以本文提出了一种新的网络体系结构SIONA.吸纳了已有研究成果的优势,尽力解决已有研究成果的不足,具备了高可扩展性、高效性和安全性.3SIONA结构在SIONA中,定义了形如P:N:S的信息名字,具体名字的详细介绍在3.2节.SIONA需用的分组类型有三类,即Register、Interest、Data三类分Page4组,Register分组是服务器向路由器注册所有的信息,Interest是信息请求分组,Data是返回的数据分组.图1显示SIONA的工作原理图.虚线代表信息注册流,实线代表通信流.SIONA工作原理如下:图1SIONA工作原理图当客户端1和2同时向网络请求信息名字为N的信息,不考虑信息的位置P,同时要求对信息提供S服务.Interest分组经过路由器时,路由器首先查找缓存(在SIONA中叫做数据表DT(DataTable)),若缓存中有相应内容,则直接返回给客户端信息.若缓存中没有相应信息,则合并两个Interest分组,并根据RT表中注册信息分解Interest分组,并将分解后的Interest分组按照地址发送.返回信息时,采用Data分组按照原路径返回.返回的信息被中间路由器缓存.因有S服务要求,路由器将信息发送给服务云,服务云采用云服务,为信息提供安全、QoS检查等服务.SIONA的主要贡献如下:(1)SIONA定义了一种面向信息和服务的网络体系结构,并不是一种全新的网络体系结构,而是IP网络的扩展.(2)采用混合方式定义信息名字,形式如P:N:S.首先是初始化过程.服务器采用Register分组向路由器注册信息,路由器将注册信息存储在注册RT(RegistrationTable)中,注册表中记录了信息名字、所在服务器的IP地址及传输延时等参数.同时路由器向全网广播信息.其中P是位置标识,采用信息所属主机的IP地址表示,是信息名字的层次化部分.P是信息名字的前缀,可实现聚合.N是信息标识,采用信息内容的Hash值表示,具有全局唯一性,是信息名字的扁平化部分.N具有自我验证性.S是服务要求.(3)采用多源组播树分发数据,支持数据的分块传输.(4)采用接收端驱动、路由器反馈的拥塞控制模型,保证了每流传输的高效性、公平性和稳定性.(5)支持对数据的服务要求,如要求数据的安全性、QoS、有效性等等.对比于传统的IP网络,SIONA具有高效性、高安全性和交互性更好的优势.SIONA采用了多源组播路由算法和中间缓存技术,保证了传输效率高于IP网络.SIONA安全构建在信息上而不是容器上,其安全性高于IP网络.SIONA面向信息和业务,更符合目前网络需求,其交互性更强.Page5对比于已有的ICN网络,SIONA具有高效性、高可扩展性和易部署性的优势.SIONA采用多源组播路由算法,对比于目前ICN中的单源组播路由算法,SIONA传输效率更高.SIONA是IP网络的扩展,信息名字采用IP地址作为前缀,可采用IP地址的聚合方式,因此,可扩展能力与目前的IP网络相同.而已有的ICN网络中,无论是扁平化名字还是层次化名字,其聚合能力都不如IP网络,因此,SIONA可扩展性更好.SIONA是IP网络的扩展,在路由器处部署SIONA时,只需要做一些增量部署即可.而如CCN等ICN网络是一种全新的面向信息的网络体系结构,与IP网络没有必然联系,推翻现有IP网络的部署,构建CCN等ICN网络,并不是一朝一夕能够完成的.因此,SIONA在部署性方面有明显的优势.4SIONA设计4.1命名及分组4.1.1数据命名在SIONA中,我们提出了一种新的命名结构,如图2所示.其中P:N:S是信息名字部分,O、L是分组中的属性字段.P:N:S是一种混合式命名.其中P代表数据所属实体的名字,可采用多种形式,如IP地址、某种位置标识等等,本文采用IP地址表示.P是信息名字的前缀,具有多样化和层次化的特性,可实现IP地址的聚合能力.N是信息内容的Hash值,由P来管理.N是信息名字的扁平化部分,具有持久性、全球唯一性和自我验证性的特点.返回的信息采用(data,key)的形式表示.需求者可根据data和key的Hash值,判断是否与N一致.若一致,可确定data是正确的信息,没有被攻击者篡改.S字段是服务字段,主要定义了服务属性,如数据的安全性、QoS等,定义S字段主要提供服务需求.在属性字段中,定义了O(Offset)、L(Length)两个字段.O字段是偏移量字段,定义了与文件第一个字节的偏移量,以字节为单位,如文件的第一个字节其偏移量是0.定义该字段保证了数据可以分布式存储,并且协助实现信息多点分发的路由机制.L字段是长度字段,表示数据的长度,L字段与O字段共同定义了文件中的一块数据.新的信息命名结构符合了网络的信息访问需求.不仅保证了唯一性、兼容性,而且可以采用IP网络的聚合方法聚合ICN网络,直接采用现有IP网络的可扩展性方面的研究成果.同时,新的命名结构保证了大容量数据的分布式存储,提高了存储空间的利用率和路由的命中率.并支持多点分发路由机制,提高了传输效率.4.1.2数据分组SIONA中定义了三类分组类型,即Register、Interest和Data分组,三类分组格式如图3所示.在三类分组中,定义了分组标识(PackageFlag,简写为PF)字段.路由器通过PF字段区分不同的分组类型,在这里,定义00、01、10、11分别为Register、Interest、Data(无S需求)、Data(有S需求)分组.Register是注册分组.若主机拥有信息,则可通过Register分组完成网络注册.网络注册主要通过洪泛Register分组完成,注册完成后,网络上的路由器可识别不同的信息,确定信息源.在RegisterPage6Interest是信息请求分组.若用户有需求时,通过Interest分组向网络请求信息.在Interest分组中,选择器字段加入限制条件如优先级、范围等.Nonce是随机数,该字段主要避免出现Interest分组闭环现象,通过Nonce区分Interest分组是否相同,若相同则抛弃.Data分组是Interest分组的回应分组.在Data分组中,P、N、S、O、L字段与Interest分组相同.签名字段保证了信息源的合法性、信息的完整性等.Data分组按照原始路径返回,若Interest分组没有闭环问题,Data分组也不存在闭环问题.4.2路由转发4.2.1具有缓存的多源组播树CCN提出了基于数据名字路由的机制.在路由转发中,CCN选择最优性能的服务器传输数据,不支持多源到多目的的传输方式.实际上,在网络中存在多个符合需求的服务器,采用多个服务器同时传输性能更优、效率更高.所以在SIONA中,我们扩展了CCN的路由转发技术,采用具有缓存的多源组播树模型传输数据.分组中,签名保证了注册服务器的合法性,P、N、S、O、L确定了信息P:N:S中的从O开始L长度的字节.图4示意了SIONA路由转发模型———具有缓存的多源组播树.当client1发送Interest(P:N:S)数据时,中间节点获取到server1、server2和server3具有P:N:S数据,则沿着路径转发请求到3个服务器,每个服务器承担一部分数据的传输.在Data(P:N:S)返回时,路径上的中间节点缓存P:N:S数据.当client2发起Interest(P:N:S)时,Interest经过中间节点N到达了I,在缓存中获取到P:N:S数据,则将数据返回给client2,并在节点N中缓存P:N数据.图中用黑色节点代表缓存了数据P:N:S.SIONA的路由转发模型采用了多点同时传输的方式和缓存机制大大提高了网络传输效率.多点同时传输效率一般高于单点传输效率,如果参数设置合理,效率可以提高几十倍.同时,多点同时参与传输提高了可靠性.缓存机制保证了客户端可以获取最近的副本,不需到服务器处获取数据,缩短了传输时间,减少了网络负担,提高了网络效率.在两种机制共同作用下,SIONA路由转发模型具有高效性、可靠性,可获取更好的路由转发服务.4.2.2路由转发引擎(1)四大存储结构在路由转发引擎中,存在四类数据结构,即DS(DataStorage)、PIT(PendingInterestTable)、RT(RegistrationTable)和FIB.在转发引擎中,Interest的转发顺序是DS、PIT、RT、FIB.DS是数据存储结构,对数据进行缓存,当Data(P:N:S)经过节点时,根据不同的存储策略存储P:N:S的数据.如流行数据存储生命长,而即时数据可不存储.DS采用分布式存储模式,可选择多个节点存储一个数据文件,保证DS的高利用率,缓存DS保证了某些数据传输的高效性.PIT记录Interest分组的轨迹,为Data分组返回提供路径.PIT表与CCN中的PIT表功能相同.当请求分组经过中间路由器时,PIT记录该分组的输出接口、需求的数据名字等信息,为Data分组返回需求端提供依据.RT是Register分组洪泛过程中,记录在节点中的存储结构,RT主要记录数据和位置的对应关系.当PIT中没有Interet轨迹信息时,查看RT获取位置信息.RT为路由器获取下载源信息、分解Interest分组、选取最优下载路径提供依据.FIB表的功能与IP网络中的FIB表基本相同,前缀匹配,按照接口进行转发.(2)路由器处理流程在SIONA中,路由器根据分组不同处理的流程不同.图6显示了路由器处理流程.分组到达路由器后,首先判断分组标识,按照标识码00、01、10、11分别处理Register分组、Interest分组和Data无S请求和有S请求分组.Page7图5路由转发引擎模型图6路由器处理流Page8①Register分组Register分组向网络中注册信息,其主要路由模式是洪泛,一般应用于网络初始化阶段.对于路由器而言,主要是通过洪泛的信息获取路由信息,并将服务器信息和路由信息分别记录在RT和FIB中.②Interest分组当路由器收到Interest分组时,首先查询DS.若DS中有P:N:S数据时,路由器直接向需求端返回数据.若DS中没有数据,则查询PIT.若PIT中有相应的记录,表示已经有相同的数据请求,记录中所对应的接口是路由到P:N:S信息的接口,路由器按照该接口转发Interest分组.若没有记录,则查询RT.RT中存储了各种信息的名字、对应的注册接口、存储的信息块、服务器性能等.查询RT后,可以获取拥有P:N:S信息的服务器情况,根据服务器情况确定下载策略.在SIONA中,采用了多源分块路由算法,按照数据源的数量、性能、信道带宽等分配下载资源,保证需求端以最优的性能、最小的代价获取信息.确定好最优的下载策略后,按照FIB表转发信息,同时在PIT中存储Interest的转发轨迹.③Data分组对Data分组的处理根据S分为两种情况.当没有S要求时,路由器只需要将Data分组返回给需求端,并在DS中缓存数据.若有S请求,路由器则需要将Data分组发送给服务云,由服务云负责处理S请求.同时,为了Data分组能够返回路由器,PIT表中记录向服务云的发送路径.服务云验证后,将分组标识置成10,并按照无S请求的Data分组处理.4.3传输控制SIONA的传输与IP网络的传输有本质的区别.首先,SIONA的传输并不局限于一条信道,而是采用多信道传输信息的不同部分.由于SIONA采用多信道传输,所以SIONA应采用多窗口机制,每个信道采用一个滑动窗口,从而控制不同信道的传输,避免拥塞.其次,IP网络作为“推”的传输模式,其网络传输速率受到服务器控制,即网络传输控制由服务器端决定;而SIONA的传输采用“拉”模式,客户端作为主动端请求数据,内容服务器作为被动端传送所需求的数据,服务器端根据需求端的请求速率回送数据,即一个需求分组回应一个数据分组.所以SIONA的传输控制由需求端(即接收端)确定.最后,SIONA中间路由器具有信息缓存器,用以缓存经过路由器的信息,可作为信息源传输信息,从而保证传输速率.但是,缓存的信息随着时间在不停改变,具有不稳定性,会给信息的传输控制增加不确定性,是SIONA传输控制需要重点解决的问题.既然SIONA的传输不同于IP网络传输,那么,IP网络的拥塞控制机制不能直接运用于SIONA中.本文中我们提出一种接收端驱动的拥塞控制机制,即保证了SIONA传输的高效性,也保证了公平性.图7示意了SIONA中的拥塞控制机制.图7接收端驱动路由器反馈的拥塞控制机制由于在传输过程中服务器只是被动的发送数据,对客户端的请求并不知晓,拥塞控制只能由接收端一方完成.在SIONA中,由接收端来驱动完成拥塞控制机制,接收端定义滑动窗口CWND,每一条传输信道拥有一个窗口ID,即CWNDi,则CWND是各个信道CWNDi之和.在每个信道中,采用路由器反馈机制确定滑动窗口的大小,从而控制Interest分组的发送间隔.当Data分组经过路由器时,路由器根据剩余带宽、队列情况、平均RTT延时计算每流的最大利用带宽,并将计算结果放置在Data分组中的反馈字段中,路径中的每个路由器都要进行计算,并累积叠加到反馈字段中,最后反馈给接收端.Data分组的拥塞头部定义如图8.在反馈机制中,采用效率控制模块和公平控制模块保证了拥塞控制机制具有高效性和公平性.为了保证两大模块发挥最优性能,SIONA分离了效率控制模块和公平控制模块.效率控制模块采用MIMD,公平控制模块采用AIMD,效率控制模块针对聚合流量和队列,尽最大能力使用完队列;而公Page9平控制模块针对每流,每流根据比例分配剩余带宽.由于SIONA系统基于数据传输,更易发生拥塞.除了采用反馈机制,SIONA设置了可靠性机制保证丢失的Data分组重新传输,即设置超时机制.若在超时时间内,相同的Interest分组到达路由器会被抛弃,而在超时时间外,相同的Interest分组可以重新转发,重新请求数据.采用接收端驱动路由器反馈的拥塞控制机制可解决的问题如下:(1)适用于“拉”模式的ICN网络.(2)解决了多信道的传输模式.(3)区分了错误重传、拥塞重传等问题,不单纯(4)反馈机制解决了Cache中存在不稳定信息(5)保证了公平性和效率性.依靠超时笼统地解决重传问题.源问题.5SIONA实现在SIONA中,主要实现了多源分块路由算法和路由器反馈拥塞控制算法.5.1多源分块路由算法多源分块路由算法主要应用于路由器分解Interest分组的过程中.多源分块算法复杂,本文中,我们只给出框架,优化算法是下一步研究的重点.算法如算法1所示,根据下载源数目等分数据,每块数据选取最小代价值(与最短距离、服务器负载和链路带宽等有关)的下载源下载,被分解的Inter-est分组并行请求每块数据,获取数据后并行返回给客户端,客户端组合各块数据.算法1.多源分块路由算法.N←请求的数据名字m←具有N的服务器数目n←数据N的大小(字节)S←具有数据N的服务器集对于确定的NS=LookupRT(N)m=Sizeof(S),n=Sizeof(N),i=0FORi<=n,FORs∈S,cost(s)//是S中开销代价最小的Forward(Interest(N,i,n/m),s)//Interest(N,i,n/m)请求名字为N,从i开始n/RETURNi=i+n/m5.2路由器反馈拥塞控制算法路由器反馈拥塞控制算法的核心在于计算反馈值.路由器设置效率控制模块和公平控制模块,并且采用不同的算法处理两大模块,即MIMD(乘法增加乘法减少)和AIMD(加法增加乘法减少).效率控制模块保证SIONA拥塞控制机制具有高效性,计算时充分考虑剩余带宽及队列数,保证最大限度利用剩余资源,提高网络利用率.为了保证稳定性,计算时应考虑一些系统参数.公平控制模块具体到每一个流,若反馈值为正值,则给每个流平均分配反馈值,否则,按照每流吞吐量成比例的减少反馈值.算法如算法2所示.算法2.路由器反馈拥塞控制算法.CWND←接受端总滑动窗口大小CWNDi←第i信道的滑动窗口大小H-feedbacki←第i信道的反馈值davg←平均延时Spare←剩余带宽Q←队列长度D←聚合反馈值Δd←每流反馈值增量m←信道上输入的流数n←传输信道数s←一个数据段大小对于一个流FORi<=n//对于一个信道iDi=α×davgi×Sparei-β×QiIFDi>0,Δdi=Di/mELSEIFDi<0,Δdi=h×Di//h为该流吞吐量的比例H-feedbacki=H-feedbacki+ΔdiCWNDi=max(CWNDi+H-feedbacki,s)CWND=CWND+CWNDiRETURNi=i+16模拟与评价6.1多源分块路由算法6.1.1网络设置为了验证SIONA的高效性,本文采用了两种方式模拟多源分块路由算法.第1种方式,利用brite构建拓扑图,节点为100个,拓扑模型为Waxman.随机定义了15个节点作为客户端,10个节点作为服务器端.每个服务器中拥有100个相同的文件,文件大小从1MB到10MB不等,服务器的处理性能相同.每条路径延时为1ms,带宽为100Mb/s.客户端向服务器端连续不断的请求数据,请求时间间隔为1s.几个客户端可以同时请求相同的文件,选择服务器时,通过计算路径长度来确定代价,本文不考虑服务器处理文件的延时.第2种方式,在真实环境中,采用多进程机制模拟多源分块路由算法,根据服务器数均分数Page10据,进程数等于服务器数,每一个进程向一个服务器获取对应部分的数据,下载完各自的部分后,合并下载文件.模拟程序采用VC,基于Windows平台.6.1.2模拟结果图9(a)、(b)、(c)显示了第1种模拟方式的结果.图9显示了不同场景下的多源下载和单源下载的延时比较.图9(a)说明了对于一个客户端而言,无论请求文件数的多少,多源下载的延时性能优于单源下载.图9(b)说明了多源下载在并发请求方面的性能优于单源下载.图9(c)则考虑了多个客户端并发请求大量文件的场景,多源下载的性能优于单源下载,通过观察两条曲线的斜率可见,并发请求的客户端数越多,请求的文件数越多,多源下载的性能明显更加好于单源下载.图10显示了第2种方式的模拟结果.图10(a)模拟了不同大小(1MB到10MB)的数据采用单源下载和多源下载所获得的下载时间.单源下载时间明显高于多源下载时间.而且,随着数据大小的增加,单源下载时间明显增大,可扩展性不好,而多源下载可扩展性较好.图10(b)展示了不同大小的数据采用单源下载和多源下载所获得的下载速度.多源下载速度明显高于单源下载速度.图10(c)模拟了相同数据采用不同多源分块路由算法的下载时间.从图中可以看出采用不同的算法获取的下载时间不同.其中,当采用4个服务器下载时,下载时间最小,性能最优,也就是说,在不同的数据下载任务中有一个最优的多源分块路由算法,保证性能达到最优.研究最优算法是下一步工作的重点.6.2路由器反馈的拥塞控制算法6.2.1网络设置为了评估路由器反馈拥塞控制算法,本文在NS2中修改了XCP协议,增加了总滑动窗口和各个信道滑动窗口的计算,拥塞控制窗口的计算由接收端完成,并由接收端按照拥塞控制窗口发送请求数据,从而控制发送端的传输速率.评估拓扑如图11所示.C是请求端,S1、S2、S3是服务器端,其它是路由器.其中,R0、R1之间的路Page11径为瓶颈路径.C向网络中请求文件,S1、S2、S3同时具有文件,则按照相差10s的时间回应相等的数据流,即S1在0s时回应1/3大小的数据,S2在10s时回应1/3大小的数据,S3在20s时回应1/3大小的数据,模拟中采用了FTP流.在C中设有总发送窗口和3个各信道发送窗口.整个模拟持续了30s.表1列出了模拟参数.模拟中没有考虑节点中的Cache.带宽链路延时队列大小模拟时间分组大小分段大小10MB/s10ms100KB30s1KB1KB6.2.2模拟结果图12(a)、(b)显示了模拟结果.图12(a)图显示了各个信道滑动窗口的变化情况.从图中可以看出,0s到10s中,由于拓扑中只有一个流,所以该流很快占据了最大的窗口,充分利用网络资源.而到了10s时,由于第2个流的加入,第1个流的滑动窗口迅速减小,第2个流的窗口迅速增加,大约1s后,达到新的平衡,每个流占有一半的窗口,并一直稳定的保持在这个窗口数,稳定性较好.直到20s时,新的流加入后破坏了这种平衡,但是1s后又稳定下来,并各占1/3窗口数.图12(b)显示了模拟时间内网络中吞吐量的变化.结果与图12(a)很相似.在图12(b)中,每个流公平的均分带宽,并且每个流吞吐量之和基本等于带宽,可见路由器反馈的拥塞控制算法兼具高效性和公平性.通过图12(a)、(b)可见,我们提出的拥塞控制算法不仅具有高效性,而且公平性和稳定性都很好.7结论互联网需求由资源共享演进为数据访问,SIONA正是在这种背景下应运而生的,SIONA是以信息和服务为中心的网络体系结构,采用了具有缓存的多源组播树的路由转发模型,具备了高效性、可扩展性和安全性.本文主要阐述了SIONA的命名框架、分组类型、路由转发模型和拥塞控制模型,并通过模拟验证了多源分块路由算法的高效性和路由器反馈的拥塞控制算法的高效性、稳定性和公平性.在SIONA的研究中,仍存在诸多问题,如多源分块路由算法的优化、拥塞控制算法的优化、故障恢复、模拟应考虑底层的传输机制等等,将作为下一步的研究重点.
