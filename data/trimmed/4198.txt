Page1无线多跳网络最佳转播模型及广播机制研究赵瑞琴1)申晓红1)张效民1)刘增基2)王海燕1)1)(西北工业大学电子与通信工程系西安710072)2)(西安电子科技大学ISN国家重点实验室西安710071)摘要为解决广播给无线多跳网络带来的严重的资源竞争与冲突、过大的转播冗余与能耗的问题,提出无线多跳网络有效广播机制.以获取高广播效率为目的建立了最佳转播模型,基于最佳位置转播和平衡能耗的思想来减小转播次数和能量消耗.该广播机制仅需本地信息就可完成有效转播,理论分析与仿真研究表明该广播策略是一种分布式、低开销、低转播冗余的无线多跳网络“绿色”广播机制.关键词无线多跳网络;广播;转播;冗余;绿色网络1引言无线多跳网络中的任意结点既可充当端结点又可充当中间结点,源与目的结点间的路径由多跳无线链路组成,任意结点不仅可以用来产生或接收分Page2就显得非常重要,广播经常被用来快速寻找一条从源结点到目的结点的路径.另外,广泛采用的被动路由机制中的拓扑发现与更新也需要依赖广播才能完成.因此,在无线多跳网络中,广播是一种必要而又频繁的行为[1-4].广播是指结点要将一个分组散布到全网范围内所有其它结点的一种通信行为.在无线多跳网络中通过广播可以在动态环境下完成网络初始化和网络组建,可以快速寻找一条或多条到达某一目的的路径.并且,通过广播还可以完成信息收集和紧急情况报告.为此,设计适用于无线多跳网络的广播机制已成为目前无线网络研究中的一个热点.目前,广泛采用的广播算法是泛洪机制[1],该广播机制具有简单、迅速以及保证广播覆盖率的优势,然而却会带来恶劣的广播风暴[2-3].泛洪要求任意结点在第一次收到广播分组后再次对其进行广播(即转播),以确保网络中所有结点都能收到该分组.然而,在此过程中,泛洪机制会导致过大的冗余转播、过多的能耗、恶劣的资源竞争和冲突,即广播风暴问题.在结点比较密集或大规模网络中广播风暴问题将尤为严重.为此,减小转播冗余与广播开销对于能耗和带宽均受限的无线多跳网络非常重要.为了解决广播风暴问题和减小转播冗余,研究人员提出了多种不同的改进策略[2-20],其中一部分改进算法[2-4]仅从广播本身进行研究,而没有考虑无线多跳网络中结点能耗受限的问题.在此基础上人们对节能广播算法进行了大量的研究,目前提出的节能广播算法[5-9]大多以中心式控制机制为基础来考虑,一些算法[6-9]在每个结点自身维持全网拓扑信息计算全网最小能耗广播树,从而达到节能广播的目的.然而,这种在每个结点自身获取全网拓扑信息的需求,会给网络带来巨大的开销,因此人们提出了分布式的广播算法[10-18].分布式广播算法大多需要在每个结点维持2跳或2跳以上的网络拓扑或位置信息.而有效延长网络寿命的广播机制[19]仅需依赖1跳邻结点信息.分布式节能广播BPS[20](Broad-castProtocolforSensornetworks),以一次转播覆盖最多结点为出发点,在选择转播结点时尽量增加单跳距离,用新增覆盖面积来表示结点的转播效率,在此基础上利用结点位置信息完成无线传感器网络的高效广播.这种设计使得BPS算法适用于结点密度均匀的网络,而在结点随机分布的一般网络中使用该算法进行广播存在转播效率估计不准确的问题[21].本文通过对无线多跳网络广播过程中结点转播行为的分析,在保证广播覆盖率的前提下以获取最小转播率和最低能耗为目标,建立最佳转播模型,为无线多跳网络提出了一种基于自延时的有效广播协议ESDBBP(EfficientSelf-Delay-BasedBroadcastProtocol).基于最佳转播模型,该广播机制不需要邻结点信息,算法的开销和能耗大大降低.2网络模型与符号定义用图G(V,E)来表示无线多跳网络,其中V表示网络结点的集合,E是网络链路的集合.假设单结点覆盖半径相等,G(V,E)是连通的,网络链路是双向的.假设每个结点可以获取其电池的剩余电量.以任一转播结点i为例,作如下定义:平均结点数;C:网络覆盖范围的面积;r:单结点覆盖半径;D:结点密度,定义为r×r的正方形区域内的S:在网络中触发广播的结点;PS:广播分组,S向网络中广播的分组;U(i):结点i的上一跳(上游)转播结点,在U(i)l:转播结点与其上游转播结点间的距离,(0<nb(i):结点i的一跳邻结点,可以直接与其NB(i):所有结点i的一跳邻结点的集合;n:引发新转播次数.因转播结点i的转播而引发的对广播分组PS的转播的nb(i)的个数.Ij(i):结点i的n个引发新转播结点中的第j个.这是指因收到来自结点i的广播分组PS后再次对PS进行转播的一个nb(i),其中j=1,2,…,n;转播PS后,邻结点i收到了PS;lr);通信;均转播效率;C(i):结点i的的覆盖区域面积;RS(i,l):结点i的转播效率;R(n):n个引发新转播结点转播之后得到的平Em:网络结点的初始电能;ET:电能门限,若结点电能低于该门限,其电量(xi,yi):结点i的位置.可以通过GPS或其它问题描述:在无线多跳网络G(V,E)中,广播是指广播触发结点S要将广播数据包PS传送给网络中除S以外所有结点的过程.由于结点传输覆盖半手段获取结点位置信息.就接近耗尽了;Page3径r有限,S将PS发送出去之后需要网络中其他结点在收到PS之后继续对其进行转播,以达到将广播分组PS散布到全网所有结点的目的.任意结点i(i∈V-{}()S)在收到PS之后执行一定的转播算法,若该结点完成了对PS的转播,其邻结点nb(i)收到PS后采用与结点i同样的转播算法,依次类推一直扩散下去直到全网.而广播策略决定了转播算法,进而决定了广播机制的性能.3最佳引发转播模型覆盖区域面积与转播本身覆盖区域面积之比.定义1.转播效率是指结点转播带来的新增定义2.广播覆盖率是指一次广播中,广播触发结点的覆盖区域与所有转播结点转播带来的新增覆盖区域的面积之和与整个网络覆盖面积之比.定理1.当转播结点位于其上游转播结点覆盖区域边界上时,其转播效率最大.证明.结点i在距离上游转播结点为l时,其转播效率RS(i,l)可由式(1)给出.其中,IC(i,l)与结点i到其上游转播结点间的距离l有关,l越接近r,转播带来的新增覆盖面积就越大,如图1所示(图中的阴影区域为新增覆盖区域).且由于每个结点的覆盖半径相同,可得式(2),结合式(1)可得式(3).RS(i,l)=由式(3)可得,当l=r时,也是就转播结点位于上游转播结点覆盖区域边界上时,单个结点的转播效率最大.定理2.在可以任意选择转播结点位置的条件下,最佳引发新转播次数为2.证明.由定理1可知,为了降低转播冗余获得最大转播效率,结点i的任意引发新转播结点Ij(i)(j=1,2,…,n)均应位于结点i覆盖区域边界上,即l=r.这样当n个引发新转播结点完成转播后,NB(i)中就有n+1个位于结点i覆盖区域边界上的转播结点(其中,n个为引发新转播结点,1个是上游转播结点)对广播分组PS进行了转播.在可以任意选择转播结点位置的条件下,n2时为了获得100%的广播覆盖率,要求这n+1转播结点在结点i覆盖区域边界上等间隔分布,以达到减小相邻转播结点的覆盖面积之间的重叠面积,增加所有转播结点新增覆盖区域面积之和的目的.这时,n+1个转播结点中任意两个相邻转播结点的新增覆盖面积之间的重叠面积W(n)可由式(4)给出,其中b(n)为n+1转播结点中任意两个相邻转播结点间距离,且b(n)=2rsinπW(n)=0r2-x+b(n)()2槡2-∫rsinπ烄r2-x槡2-r2-b(n)()2槡[烅烆0由定义1可得,n个等间距均匀分布在结点i覆盖区域边界上的引发新转播结点的平均转播效率,即引发新转播效率可由式(5)给出,其中,IC(i,r)为l=r时单个引发新转播结点的转播新增覆盖面积,且IC(i,r)=πr2-4∫r/2R(n)=n·IC(i,r)-(n+1)·W(n)Rmax(n)=R(n)n=1,2=IC(i,r)对式(5)中的引发新转播效率R(n)求极值,则引发新转播效率的最大值Rmax(n)可由式(6)给出,即当n分别取1和2时,引发新转播的平均转播效率最高.而当n=1时,仅有一个引发新转播结点,这将导致广播覆盖率低于100%,不能保证将广播分组散布给网络中所有结点.当n=2时,即网络中任意转播结点i对广播分组PS进行转播后,在NB(i)中选取两个与上游转播结点U(i)等间隔均匀分布在结点i覆盖区域边界上的两个结点,作为引发新转播结点对广播分组PS进行转播,依次类推直到网络边缘.这样网络中所有的转播结点之间存在如图2所示的几何关系,整个网络被由以r为边长、广播触发结点和所有转播结点为顶点的相互邻接的正六Page4边形完全覆盖,任意位于六边形内的结点都可以被该六边形的一个顶点覆盖.因此,在可以任意选择转播结点位置的条件下,n=2时能够获得100%的广播覆盖率和最大的转播效率,即以最少的转播结点覆盖全网.为此,在可以任意选择转播结点位置的条件下,无线多跳网络中最佳引发新转播次数为2.由定理2可得,转播结点按图2所示最佳引发转播模型选择新转播结点I1(i)和I2(i),可以获取令人满意的广播覆盖率和转播效率.I1(i)和I2(i)的位置就是结点i的邻域的最佳引发新转播位置,又称为最佳位置.为了计算最佳引发新转播位置,广播分组的头部包含两个域A1和A2,分别存放上一跳转播结点及当前转播结点的位置.任意结点转播广播分组PS时,先分别将上一跳转播结点和该结点的位置存放在PS的A1和A2域,然后将该其发送出去.令(xi,yi)和(xU(i),yU(i))分别为转播结点i及U(i)的位置,则i与U(i)之间的距离可以表示为依据结点i与U(i)的位置(xi,yi)、(xU(i),yU(i))及式(7),可以通过式(8)得到转播结点i的邻域两个最佳位置,即I1(i)和I2(i)的位置.(x-xi)2+(y-yi)2=r2烅烄(x-xU(i))2+(y-yU(i))2=(l+r/2)2+3r2/烆需要指出的是,上述给出的是如何为任意转播结点i选择下游转播结点Ij(i)的方法;而为广播触发结点S选择下游转播结点的方法不同,因为S需要选择n+1个引发新转播结点.若最佳引发新转播次数为2,S则需选择3个邻结点对分组进行转播,令(xS,yS)为结点S的位置,则这3个结点的位置分别是(xS-r,yS),(xS+r/2,yS-r槡3/2)和(xS+r/2,yS+r槡3/2).依据上述策略选取转播结点,则广播分组沿着如图2所示的正六边形的边在网络中散布.理想情况下,这种转播策略让仅处于正六边形顶点的结点进行转播,能够达到以最小转播次数覆盖全网的目的,因此称为最佳引发转播模型.4基于自延时的有效广播协议ESDBBP基于最佳引发转播模型,ESDBBP广播机制通过采用自延时(D,Self-Delay)机制完成高效广播,让最佳转播结点的时延最小.网络中所有结点在收到广播分组之后,分别依据自身的位置信息、能量信息以及分组头中的A1域和A2域进行自主延时,等待延时结束后再依据其限制条件,决定是否对广播分组进行转播.4.1ESDBBP转播算法广播触发结点S向网络中广播分组PS,任意结点j∈V-{}()S在收到广播分组后按以下8个步骤执行.1.判断PS是否为一个新分组.若是,则执行步2.否则,检查结点j是否对PS转播过,若是,放弃对PS的转播并执行步8;否则,执行步7.2.检查该结点的剩余电能e(j),若e(j)<ET,说明该结点剩余电能很少处于接近“死亡”的状态,这时放弃对PS的转播,执行步8.3.确认PS是否直接来自S,若是,依据广播分组PS中A2域内包含的S的位置计算3个最佳位置;否则,利用PS中的A1和A2域内的位置信息,由式(7)和式(8)计算两个最佳位置(x1,y1)和(x2,y2).4.依据PS中A2域及本结点的位置,计算其到上一跳转播结点的距离d(j).若d(j)dT(其中,dT为相邻转播结点间的距离门限值),结点j放弃转播PS,执行步8.5.若结点j到各最佳位置的最小距离l(j)>lT,放弃转播PS,执行步8.6.进行自延时,延时长度为D(j):其中Dm是最大时延,0α1,0β1,且满足α+β=1.α与β的具体取值在5.2节讨论.7.若再次收到广播分组PS,则在进行自延时的过程中该结点更新其到上游转播结点间的距离d(j).若d(j)dT,放弃转播PS并执行步8.在此过程中,若D(j)超时,结点j将上游转播结点和该结点的位置存放在PS的A1和A2域,并对广播分组PS进行转播.Page58.算法结束.式(9)采用能耗均衡和最佳位置转播的思想,将结点的剩余电能和距最佳位置的最小距离结合起来选择转播结点,为距离最佳位置较近且有足够剩余电量的结点设定较小的转播时延,反之设定较大的转播时延.能够有效避免位于最佳位置附近的结点频繁转播,导致电能迅速耗尽而出现结点死亡的现象.采用式(9)网络将会选择距离最佳位置最近且剩余电量充足的结点充当转播结点,能够以最少转播结点覆盖全网从而延长网络寿命.另外ESDBBP算法中设置的多个门限,进一步保证了ESDBBP算法的广播效率.在考虑二维坐标的条件下,若将一维坐标信息用2个字节来表示,则一个结点的位置信息需要占用4个字节.ESDBBP算法在完成广播的过程中仅需要在广播分组头携带两个结点的位置信息在A1和A2域,所以总共有8个字节的开销.对于一般的需要维持k(k1)跳邻居结点位置信息的算法,其开销正比于k(k1)跳邻居结点的总数目.由第2节中对结点密度D的定义可得k跳范围内邻结点数为πk2D-1,因此k跳邻居结点位置信息的所占用的开销为4(πk2D-1)个字节.ESDBBP算法中结点不像其它算法那样需要维持k跳邻结点信息,能够在减小广播开销的同时降低算法对单结点存储能力的要求,这在结点体积与成本均很小的无线移动自组织网与无线传感器网络中,尤其是在结点密度较大的网络环境下具有重要的意义.4.2将准引发新转播结点限制在合理范围内理论上讲,任何没有对PS进行过转播的结点都可以充当准引发新转播结点,它们通过自延时竞争机制进行转播.但在保证广播覆盖率的前提下,为了获得尽量低的转播率和尽量长的网络寿命,ESD-BBP需设置3个门限:转播距离门限、距离最佳位置的最小距离门限、剩余电能门限,将准引发新转播结点范围限制在合理的范围内.由定理1可得距离很近的两个结点的转播导致很低转播效率,为此设置转播距离门限dT,若结点j到上一跳转播结点的距离d(j)dT,放弃对PS的转播.由最佳引发转播模型可得,处于最佳位置(图2所示的正六边形的顶点位置)的结点转播效率最高,为此设置到最佳位置的距离门限lT(0lTr),若结点j到最佳位置的最小距离l(j)>lT,则放弃转播PS.lT限定了准转播结点到最佳位置的最大距离,且转播冗余正比于到最佳位置的距离门限lT.ESDBBP算法中lT的取值与结点密度D(即r×r内平均结点数)有关,网络中结点越密集,结点与最佳位置间的距离就越小,这时到最佳位置的距离门限就应越小,反之亦然.设f(D,r)为任意转播结点覆盖范围内的所有结点到边界上任意位置的平均最小距离.又因为最佳位置均处于该结点覆盖区域的边界上,因此可得f(D,r)为任意转播结点的覆盖范围内的所有结点到最佳位置的平均最小距离.我们用式(10)所示的f(D,r)的函数来确定lT,其中a为常数因子,其具体取值在5.1节进行讨论.假设无线多跳网络中所有结点随机散布服从强度为λ的泊松过程,其中λ为单位覆盖区域上的结点数.则面积为A的区域上有m个结点的概率为令X为任意结点j的覆盖范围内所有结点到其边界上任意位置p的最小距离,Cx为以p为中心x为半径的区域与结点j所覆盖区域的交叠部分的面积.则在Cx内不存在结点的概率为p0(Cx).进而可得式(12)与式(13),结合式(11)可得式(14).F(X)=P(Xx)=Cx=2∫x=x2-2r()2cos-1xF(X)=基于式(14)可得式(15):f(D,r)=E(X)=∫+又由结点密度D的定义可得结合式(13)、(15)及(16)可得式(17).f(D,r)=∫rPage6在此基础上,ESDBBP算法依据式(10)就可以完成对距离最佳位置的最小距离门限的合理取值,达到最大限度减小转播冗余,提高广播效率的目的.最后,剩余电能门限ET的选择直接影响算法的性能,太大会导致一些结点收不到广播分组,太小则不能起到延长网络寿命的作用,为此需要依据实际网络应用场景,折中的确定ET的值.5性能仿真与分析用OPNET对ESDBBP算法进行仿真分析,仿真中网络结点被随机地布放在不同大小的二维仿真区域内,应用层数据源采用泊松业务流,分组的大小取为1024bits,平均分组到达间隔取为0.5s.MAC层采用IEEE802.11协议,每个结点的覆盖半径r为250m,结点的电量消耗模型采用由Doshi和Brown[22]给出的模型,剩余电能门限ET取Em/50,最大转播时延取为140ms.仿真中采用转播率(rebroadcastratio,R)、可达率(reachability,RE)、最大端到端时延和网络寿命4种性能指标.其中转播率是指网络中参与转播的结点的比率;而广播可达率直接反映广播覆盖率;最大端到端时延是指完成一次广播所用的时延;最后网络寿命是从网络初始化到第一次出现结点“死亡”之间的时间间隔.网络寿命的单位一般用round(轮)表示,一般而言把一个分组广播到全网所用的时间称为1轮,而网络寿命就是第一次出现结点“死亡”时所在的轮次.5.1距离最佳位置的最小距离门限犾犜与转播距离门限犱犜对广播算法性能影响距离最佳位置的最小距离门限lT,用于确定网络中有资格进行转播的结点的区域,式(10)给出了lT的选取方法,lT等于常数因子a和任意转播结点的覆盖范围内的所有结点到最佳位置的平均最小距离f(D,r)的乘积,这里lT的取值与结点密度D(即r×r内平均结点数)有关.由于D=1时,也就是r×r内平均仅有一个结点散布时,距离最佳位置的最小距离门限lT只有取最大值r时才能保证广播覆盖率,所以常数因子a可通过式(18)来确定,在此基础上结合式(10),可得式(19).由式(17)知f(1,r)=0.395r,将其代入式(19)可得a等于2.5316.图3~图5以及表1分别给出了lT分别取f(D,r)、2f(D,r)以及2.5316f(D,r)时(即常数因子a分别取1、2、2.2316时)的仿真数据.综合这些数据,可以看到与lT分别取f(D,r)和2f(D,r)时相比,lT=2.5316f(D,r)时比较合理.如图3~图5所示,虽然lT取2.5316f(D,r)时ESD-BBP算法的转播率和端到端时延最高,且网络寿命最短,但是表1却表明lT取2.5316f(D,r)时可以获得不低于99%的广播可达率.lT分别取f(D,r)和2f(D,r)时由于转播率过低导致其获得的广播可达率不能令人满意.为此,在下面的仿真中,我们按照式(19)来确定lT,即lT=2.5316f(D,r).图4lT对ESDBBP算法最大端到端时延的影响f(D,r)10.860.690.860.872f(D,r)11.000.981.000.992.5316f(D,r)11.000.991.001.00为了进一步降低转播冗余,ESDBBP算法通过定义转播距离门限dT来避免距离很近的两个结点Page7都充当转播结点.转播距离门限dT取较大值时会给ESDBBP广播同时带来较低的转播率和广播的可达率,为此,转播距离门限dT的取值是一个折中的问题,在实际网络中可按具体网络场景与特点对dT进行取值.为此,本文建立了一个由180个结点组成的无线多跳网络仿真场景,研究dT对ESDBBP算法性能的影响.仿真中dT分别取0.36r、0.48r及0.60r.当dT取为0.36r时,ESDBBP的可达率和转播率分别为0.995与0.103;当dT取为0.48r时,ESDBBP的可达率为0.988,而转播率为0.0895;而dT等于0.60r时ESDBBP的可达率为0.976,转播率为0.087.综合考虑可达率和转播率两者性能指标可得dT取0.36r时ESDBBP算法可获得最高的可达率,为此在接下来的仿真中取dT=0.36r.5.2α和β对广播算法性能影响结点第一次收到广播分组时将执行一个时间长度为D(j)的自主延时,基于式(9)可得在综合考虑剩余电能和转播位置的过程中D(j)主要受α和β两个因子的影响.α和β的取值直接影响D(j),进而影响ESDBBP算法的性能.考虑到α和β的和为1,为此下面的仿真中我们给α取不同的值研究和分析α和β这两个因子对ESDBBP算法性能的影响.α取不同的值时ESDBBP算法的仿真数据如图6~图8所示,可以看到最大端到端时延与转播率随α的增加缓慢减小,α对网络寿命和可达率的影响较小,综合各项指标在后面的仿真中我们取α=0.9,β=0.1.总的来讲,α取值对ESDBBP算法性能影响并不是非常明显,这是因为ESDBBP除了通过自延时D(j)的不同来选择转播结点,还定义了lT、dT与ET这3个门限来限制转播结点的选择.通过这3个门限的限制,将ESDBBP的性能限定到了一定的范围内,因此自延时权重α的取值不会造成ESDBBP算图6ESDBBP算法的可达率与转播率随α的变化曲线法性能的大幅度波动.需要指出的是自延时权重α对网络寿命的影响较小,这是因为权重取较小值时能耗因素考虑多一些,权重取较大值时转播率会降低进而也会延长网络寿命.图7ESDBBP算法的最大端到端时延随α的变化曲线图8ESDBBP算法的网络寿命随α的变化曲线5.3不同广播算法性能对比图9~图11给出了不同场景下ESDBBP、BPS[20]及泛洪(SF)[1]3种广播算法性能对比数据.首先,对于性能指标转播率,在不同环境下,ESD-BBP的转播率最低,SF的转播率最高,且ESDBBP的转播率具有随结点密度的增加而减小的趋势.其次,在可达率方面,我们所研究的ESDBBP、BPS、SF这3种广播算法在结点密度从80nodes/km2逐渐变化到1280nodes/km2的过程中,均可以获得不低于99%的可达率.在端到端时延方面,从图10所示的仿真数据可以看出,这3种算法中泛洪SF机制获得了最小的时延,BPS算法的端到端时延最大,而本文所提算法的端到端时延介于两者之间.需要指出的是,为了避免严重的广播风暴,对泛洪SF进行仿真时我们对其进行了一定的修改,让结点在完成随机延时之后再去进行转播,其中随机延时的最大值为0.14s,其目的是降低和减小泛洪导致的邻结Page8点间过度竞争与冲突,在一定程度上缓解广播风暴问题.如图10所示,由于我们的改进和泛洪机制自身特性,它获得了最小的最大端到端时延.仿真中为每个结点设置相同的初始能量为1J.为了延长网络寿命,广播过程中应尽量减少转播的次数.图11给出ESDBBP、BPS以及SF这3种算法的网络寿命(单位为rounds(轮)).ESDBBP转播率最低,因此具有最大的网络寿命;而由于SF的转播率最大,其广播过程中结点“死亡”现象出现的就最早.总之,ESDBBP算法基于最佳转播模型,能够比其它两种算法在很大程度上减少转播冗余和广播开销,并有效延长网络寿命.尤其在网络规模大或结点密度高的环境中,ESDBBP算法的优势更为明显.6结论本文以最少的转播结点获取最大的广播覆盖区域为出发点,对无线多跳网络广播过程中结点的转播行为进行了分析,以获取高广播效率为目的建立了最佳引发转播模型,计算了最佳引发新转播结点的位置.基于最佳引发转播模型,给出了一种无线多跳网络广播算法,该算法基于最佳位置转播和平衡能耗的思想来减小转播次数和能量消耗.通过设置转播距离门限、距离最佳位置的最小距离门限和剩余电能门限,将准引发新转播结点范围限制在合理的范围内.该广播机制仅需本地信息就可完成高效转播,是一种分布式、低开销、低转播冗余的无线多跳网络绿色广播机制.
