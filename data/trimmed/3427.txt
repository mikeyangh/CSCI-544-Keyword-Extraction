Page1下一代光核心负载均衡分组交换机研究夏羽1),2)曾华遷1)高志江1)申志军1)1)(西南交通大学信息科学与技术学院成都610031)2)(纽约大学理工学院电子与计算机工程系美国纽约)摘要着重研究了在第五代交换机体系结构中极具竞争力的以阵列波导光栅路由器件为核心的负载均衡交换结构(AWGR-LB).负载均衡结构通常使用严格的时分复用方式,调度简单但性能不够理想;AWGR的使用能够大大提高交换机整体容量,但由于其波长速率仅为端口速率的1/N(其中N为端口数),其时延性能与传统交换矩阵相比仍有较大差距,因而不能提供良好的服务质量保证.文中提出了一种适应性时分复用调度算法,能够在保持100%吞吐率优势的同时,极大地改善负载均衡结构的时延性能;同时文中提出的双波导光栅路由器方案,使光交换矩阵能模拟传统交叉开关的工作模式,从而达到以端口线速率交换的效果,与适应性时分复用调度算法相结合,可进一步提高AWGR-LB的性能.关键词分组交换;负载均衡交换机;Byte-Focal交换机;时延性能;吞吐率1引言随着以DWDM(DenseWavelengthDivisionMultiplexing)为代表的光传输技术的飞速发展,光纤中单波长的传输速率已经超过100Gbps,甚至还高于现阶段骨干网的传输速率.另一方面,由于受商用存储器访问速率的限制,分组交换机(packetswitch)/路由器(router)的发展已经远远落后于传输技术.事实上,分组交换机/路由器已经成为现代网络性能的瓶颈.能够适应未来高速数据传输的高性能分组交换机的设计与实现是下一代网络研究的关键问题之一.商用交换机一共经历了四代.第一代交换机使用和普通计算机相同的架构:用集中式的处理器和存储器来进行IP查表、校验和(checksum)计算以及交换等操作.随着计算机网络的广泛应用,集中式的处理器逐渐不能匹配日益提高的传输速率.因此第二代交换机在每一块线卡(网卡)上使用独立的处理器来进行查表、校验和计算等操作,但仍然使用集中式的处理器和存储器来进行交换操作.第一、二代交换机均使用集中式的存储器来存储分组,属于共享存储(Shared-Memory,SM)结构.随着网络传输速率的持续提高和对服务质量的更高要求,共享存储结构已经不能满足高速网络对交换机容量的需求.第三代交换机引入了交换矩阵(switchfabric),并在线卡上设置独立的缓存以存储暂时不能被转发的分组.最初的第三代交换机使用输出排队(Output-Queued,OQ)方式:分组到达后立刻通过交换矩阵到达对应的输出端口,并进入相应队列中排队等待输出.但是由于交换矩阵和存储器都需要以N倍(N为交换机的端口数)于线卡的速率工作,随着端口速率的提高以及交换规模的扩大,这种交换结构开始变得不现实.而如果分组在到达输入端口时,先在输入端的线卡中排队等待,并且一个时槽内该线卡只通过交换矩阵传输一个分组,则交换矩阵和存储器仅需要以和线卡相同的速率工作,这种交换方式被称为输入排队(Input-Queued,IQ)方式.由于输入排队可以适应更大的交换容量,因而被广泛使用.但是IQ结构由于受到队首阻塞(Head-of-LineBlocking,HoLblocking)问题的限制,其吞吐率仅达到58%左右[1].虚拟输出队列(VirtualOutputQueue,VOQ)[2]作为解决队首阻塞问题的有效方案,被广泛地应用于商用交换机中.但是VOQ的引入加剧了输出竞争,需要使用额外的匹配调度算法.典型的调度算法有并行迭代匹配算法PIM(ParallelIterativeMatching)[3]、带滑动指针的轮询算法iSLIP(iterativeRound-RobinwithSLIP)[4]以及双轮询匹配算法DRRM(DualRound-RobinMatching)[5]等.实用的IQ调度算法大多需要迭代多次才能达到较为理想的时延,且在非均匀流量下吞吐率性能不佳.但随着网络传输速率的持续提高以及交换机规模的持续扩大,留给这些调度算法运行的时间已经越来越紧迫,IQ交换结构最终将不能适应未来的高速网络.第四代交换机以多机柜架构的出现为标志:由于交换机的规模不断扩大,多级多平面交换机开始出现,使用单一的机柜已经不能满足交换机在体积、功耗及散热等方面的要求.现代交换机多将交换背板放置于一独立的机柜中,而将线卡分别放置于其它的机柜中,这些线卡和背板之间使用光纤连接,如图1所示.多机柜架构交换机的典型代表有:Alcatel7670RSP、JuniperTX、AviciTSR和CiscoCRS-1等.本文的主要研究对象是面向未来高速网络的第五代交换机,第五代交换机以光交换核心的使用为标志.典型代表是斯坦福大学项目[6],该项目首先提出了使用阵列波导光栅路由器(ArrayedWaveguideGratingRouter,AWGR)作为核心交换矩阵,结合负载均衡(Load-Balanced,LB)的交换架构[7],可以构建容量高达100Tbps的交换机,但是,由于使用的调度算法性能不够理想,导致其时延性能非常差.香港大学项目[8]也采用AWGR扩展LB交换机,正像文献[8]所说,由于工艺原因,AWGR中每个信道速率仅为传统交换矩阵的1换矩阵中N倍的时间来传送一个分组,这也将导致时延性能非常差.针对以上两个问题,本文中,我们首先提出了适应Page3性时分复用(AdaptiveTime-DivisionMultiplexing,ATDM)的调度方式,从而较大地改善了LB结构时延性能,同时可以证明ATDM方式能够保持LB交换机100%吞吐率的优势.此外,为了配合ATDM,我们提出了一种使用双AWGR串联方式来模拟传统交叉开关的可行方案,我们将其称为通过双AWGR模拟的交叉开关(DualAWGREmulatedCrossbar,DAWGREC)模块.DAWGREC的主要优势是可以以端口速率传输分组,从而避免N倍传输时间的问题,而这也将进一步改善AWGR-LB交换机的时延性能.仿真实验表明新的LB交换机在各种流量下均有良好的时延性能.本文第2节主要讨论LB交换机的研究现状;第3节介绍ATDM调度方式以及采用ATDM调度的交换机体系结构;第4节证明使用ATDM的负载均衡交换机可以在任意许可流量下达到100%的吞吐率;第5节介绍如何扩大AWGR交换机容量;第6节用仿真实验说明新LB交换机在各种流量下均有很好的性能;第7节总结全文.2负载均衡的分组交换机研究现状由于LB交换机调度简单,可以适应高速网络,近10年来,它一直是交换机研究的热点.LB交换结构是一种特殊的两级交换结构,最简单的LB结构如图2所示.它由两个N×N的交叉开关组成,之间设置N个缓存用于暂存从第一级交叉开关转发过来的信元(cell,即定长分组,若分组为变长,则在进入到交换机之前将其切分),这些缓存被组织成为VOQ的形式,每一组VOQ连接一个第一级交叉开关的输出端口和一个第二级交叉开关的输入端口,因此共有N2个VOQ.和IQ交换结构不同,LB交换结构中的交叉开关不需要使用调度算法来配置,而是周期性地,在预定的N种连接模式之间顺序切换.通过选择恰当的连接序列,N个时槽内,交叉开关的各输入端和输出端将各连接一次.如果用i表示交叉开关的输入端,j表示交叉开关的输出端,而用t表示当前时槽,则一种可行的连接模式为j=(i+t)modN.这种连接模式称为时分复用(Time-DivisionMulti-plexing,TDM)方式,而使用TDM方式的交换机在文献[7]中被称为BvN(Birkhoff-vonNeumann)交换机.在LB交换结构中,第一级交换矩阵作为一个负载均衡器,将到达的信元均匀地发送到各个中间级,而第二级交换矩阵才真正将信元转发到正确的端口.由于第一级负载均衡器的作用,第二级BvN交换机仅需要处理均匀业务流,而BvN交换机可以均匀地服务各个端口.文献[7]证明了LB交换结构可以在弱混合流量下达到100%的吞吐率.虽然LB结构有以上优势,但是它存在两个严重的缺陷:(1)如果将“流(flow)”定义为从同一端口进入,而指向同一输出端口的分组序列,则在LB结构中,属于同一个流的分组离开的顺序会和其到达顺序不同,这被称为分组失序问题;(2)其时延性能和传统交换机相比有较大差距.文献中有多种方法解决LB结构的分组失序问题,这些方法主要可以分为3类:(1)在分组到达输出端口之前就阻止分组失序,代表算法及结构有:UFS(UniformFrameSpreading)算法[9]、满帧填充PF(PaddedFrame)算法[10]、Mailbox结构[11]和基于反馈的(Feedback-Based)结构[12];(2)在分组到达输出端口时将失序度控制在一定范围内,然后再在输出端设置一定大小的维序缓存(resequencingbuffer)将失序的分组重新排序输出.其代表有FOFF(FirstOrderedFullFrameFirst)[6]算法及Byte-Focal结构[13];(3)组合方法,即将几种方法组合使用,典型的代表是CR(ContentionandReservation)交换机[14],它结合了Mailbox和UFS两种方法.分组失序的根本原因是属于同一个流的不同分组在经过不同的中间级时所经历的时延不同.第1类算法保证分组通过不同的中间级时能经历相同的时延.UFS算法使用逐帧(frame-by-frame)转发的概念,一个帧由N个连续的属于同一个流的信元组成.如果每个输入端口的信元都按帧的方式,在N个连续的时槽内被顺序转发到各个对应的VOQ中,则每个中间级对应的VOQ的队长都相等,从而同一个帧的分组在中间级所经历的时延也相同.但是在中低负载下,一个VOQ可能需要等待较长时间才能构成一个帧,因此UFS算法的时延性能较差.满帧填充(PF)算法在VOQ没有满帧时,通过Page4填充“空分组”凑成满帧,这样虽然可以减少等待成帧的时间,但是其代价是使用过多的带宽来转发空分组,从而造成带宽浪费,时延性能虽较UFS有所提高,但是改进仍然不明显.Mailbox交换结构使用竞争中间级队列的方式,并采用了对称式TDM连接模式巧妙地提供了竞争成功与否的反馈路径,使得在低负载下时延性能得到较大改善.但竞争失败的信元将被阻塞,因此不能达到100%的吞吐率.当δ=0时,该交换结构只能达到58%左右的吞吐率[11].基于反馈的(feedback-based)交换结构类似于Mailbox,它提供了同时具有staggeredsymmetry和in-orderpacketdelivery两种属性的连接模式来交换中间级队列的占用信息和解决分组失序的问题.FB是目前时延性能最好的LB交换机,但由于其每个中间级VOQ仅缓存一个分组,因此各个输入端存在竞争冲突,从而不能达到100%的吞吐率,事实上,它被证明在2倍加速比下才能达到100%的吞吐率[12].FOFF算法允许非满帧VOQ发送非满帧分组.虽然可以在很大程度上改进UFS算法的性能,但是在中低负载下,发送的分组大部分属于非满帧分组,失序仍然可能发生,因此在输出端需要维序队列来重组失序的分组,维序不但需要额外的通信量,而且也造成FOFF的时延性能依旧较差.CR交换机巧妙地结合了Mailbox和UFS两种方法,在低负载下使用Contention模式(即Mailbox结构)来获得较好的时延性能,而在高负载下时使用Reservation模式(即UFS算法)来保证100%的吞吐率.CR交换机在中高负载下,时延性能仍然非常差.在所有解决方案当中,Byte-Focal是唯一一种不需要在端口和中间级之间交换任何信息,且时延性能较好,同时也能保持100%吞吐率的结构.它使用逐分组(packet-by-packet)的方式来解决失序问题.Byte-Focal结构在第一级和中间级均使用VOQ,而在输出端采用虚拟输入队列(VirtualInputQueue,VIQ)集合的结构,并加入流首(Head-of-Flow)指针,巧妙地利用了分组经过中间级的顺序,解决了分组失序问题.有关Byte-Focal的详细描述可以参考文献[13].3使用轮询调度加强的负载均衡结构以上这些方案虽然都解决了LB交换结构分组失序的问题,且时延性能都有所提高,但并没有做出根本性的改善.我们深入分析后发现,LB结构时延性能低下的主要原因是TDM调度存在严重的“连接浪费”问题.所谓“连接浪费”是指由于TDM完全按照预定的连接模式建立连接,当某端口对之间建立连接之后,可能并没有信元传输.从而在其它队列均为空的情况下,一个等待传输的信元,最坏情况下将被延迟N-1个时槽.若两级BvN都存在连接浪费,情况将更糟.基于以上分析,我们认为完全抛弃匹配算法的方式虽然调度简单但会导致极差的性能,并不可取,因此我们提出了适应性的TDM(ATDM)调度.ATDM在传统TDM的基础上使用复杂度仅为O(1)的带滑动指针的轮询(Round-Robin)调度来消除BvN结构的“连接浪费”,改进后的BvN结构称为使用轮询调度加强的BvN(Round-RobinEn-hancedBvN,RRE-BvN)结构.RRE-BvN结构的工作过程如下:时槽开始时,各输入、输出端口先根据TDM方式结合实际的队列情况建立匹配,对应队列为空的端口不匹配,随后进行经典的1-SLIP三步调度[4],即(1)请求阶段.所有未匹配的输入端口,向所有不为空的VOQ所对应的输出端发送请求.(2)授权阶段.所有未匹配的输出端口,收到请求后,从中选择一个在顺时针方向离授权指针最近的输入端口的请求进行授权.如果该授权在下一步被接受,则授权指针指向被授权的输入端口的下一个端口;否则授权指针不移动.(3)接受阶段.输入端收到授权之后,从中选择一个在顺时针方向离接受指针最近的输出端口接受其授权.然后将接受指针移动到该输出端口的下一个端口.我们将用RRE-BvN替换传统的BvN后所建立的新LB结构称为使用轮询调度加强的负载均衡(Round-RobinEnhancedLB,RRE-LB)交换结构,如图3所示.一方面,TDM方式使得在调度开始就存在一些匹配,从而无需迭代即可建立比1-SLIP更多的匹配;另一方面,轮询调度所建立的匹配可以有效消除BvN结构的“连接浪费”.且轮询算法的复杂度仅为O(1)且实现简单[15].除替换BvN结构以外,RRE-LB和Byte-Focal类似,在中间级队列采用VOQ,而在输出端使用VIQ集合结构来保证分组以正确顺序离开.VIQ集合结构如图4所示,其工作方式是将属于同一个流Page5图3轮询调度加强的负载均衡结构(即从相同输入端口到达且指向同一个输出端口)但是经过不同中间级的分组入队到不同的VIQ中,然后为每一个流维护一个流首指针(每个端口各N个),该指针从第一个VIQ开始,每次VIQ中属于该流的分组离开后,对应指针移向下一个VIQ.VIQ集合的细节可以参看文献[13].为了配合ATDM调度方式,同时也降低调度复杂度,我们抛弃了Byte-Focal的第一级需要复杂调度的VOQ结构[13],而在RRE-LB第一级使用虚拟中间级队列(VirtualCentralQueue,VCQ).VCQ结构如图5所示,其工作方式如下:从输入端口i中到达而指向输出端口j的流的信元被以VCQi,0,VCQi,1,…,VCQi,N-1,VCQi,0,…的顺序均匀地分配到N个VCQ中,而在VCQi,m中的分组一定被转发到交换矩阵的第m个出口.性质1.在RRE-LB结构中,属于同一个流的分组离开的顺序和到达顺序一致.证明.根据VCQ的工作原理,属于同一个流的分组被分配到中间级的顺序一定满足:m=0,1,2,…,N-1,0,1,2,…,N-1,….虽然这些分组通过中间级的排队时延可能不同,但是在输出端,由于有VIQ集合及流首指针的限制,同一个流中离开的分组所经过的中间级顺序如下:0,1,2,…,N-1,0,1,2,…,N-1,….因此,属于同一个流的分组离开RRE-LB结构的顺序一定与其到达顺序相同.证毕.4稳定性分析定义1(稳定性,stability).对于一个排队系统,如果其中的队列的平均长度均有上界(<),则称该排队系统稳定.而一个稳定的交换系统可以达到100%的吞吐率,即所有进入该系统的分组都可以在有限时间内被转发离开.定义2(许可流量,admissibletraffic).一个N×N的交换机中,若用λi,j表示从输入端口i到达而指向输出端口j的流的平均到达速率,如果该流量满足如下两式:则该流量称为许可流量.引理1.使用VOQ的RRE-BvN交换结构可以对任意λi,j1/N的流量提供100%的吞吐率.证明(反证法).对RRE-BvN中任意一个VOQi,j,假设其不稳定,则其队长会无限增长.但是由RRE-BvN结构的特点,一个队列不为空时,TDM调度在N个时槽的周期内一定服务该队列一次;而1-SLIP调度在其它队列为空的情况下还可能服务该队列一次或以上,则在t个时槽内,该队列会被服务至少t/N次,则从长时间来看,服务速率由排队论可知到达速率小于服务速率的队列应该稳定,这与假设矛盾.第一级可以达到100%的吞吐率.引理2.在许可流量下,RRE-LB交换结构的证明.如图6所示,将从输入端口i进入而指Page6向输出端口j的流的平均到达速率用λi,j来表示,而实际进入队列VCQi,m的流的平均速率用λi,m来表示.根据VCQ的工作原理有λi,m=1根据许可流量定义2有λi,m1100%的吞吐率.构的第二级可以达到100%的吞吐率.由引理1可知,RRE-LB的第一级可以达到引理3.在任意许可流量下,RRE-LB交换结证明.根据引理2可知,所有到达的流量都会被完全转发到第二级.我们将进入中间级VOQm,j的流量的平均到达速率用λm,j表示.如图7所示,由于从输入端口i到达而指向输出端口j的流量在第一级被均匀地分配到N个VCQ中,因此到达第二级输入端口m,而指向输出端口j的流量的平均到达率为1Nλi,j.又由于每个输入端口都有指向某输出端口j的流量,因此总体VOQm,j的平均到达速率:由许可流量的定义2有λm,j1/N.由引理1可知,RRE-LB的第二级可以达到100%的吞吐率.定理1.RRE-LB可以在任意许可流量下达到100%的吞吐率.证明.由引理2和引理3可知RRE-LB结构的第一级和第二级均可达到100%的吞吐率,因此最终RRE-LB可以在任意许可流量下达到100%的吞吐率.值得注意的是,在文献[7]中,为了证明100%的吞吐率,作者假设流量符合弱混合(weakmixing)特性;而在我们的证明过程中,对流量的唯一要求仅仅是符合许可流量,而这正是所有稳定的交换结构对流量的必要约束.因此RRE-LB解除了传统LB结构对流量弱混合的要求.5使用AWGR扩展RRE-LB结构5.1AWGR概述阵列波导光栅路由器(Arrayed-WaveguideGratingRouter,AWGR)[16]是一种被动光交换器件.如图8所示,一个输入端的光信号如果通过不同的波长传播,则会被转发到AWGR的不同输出端口.具体来说,对于一个N×N的AWGR,输入端口i传输N种波长的光信号,分别用λi0,λi1,…,λiN-1表示,则输入端口i通过波长λi转发到输出端口(i+j)modN.简单来说,N×N的AWGR,每个端口使用N种波长,可以提供输入端和输出端之间的全连接,共N2条信道.AWGR有如下优势:(1)造价低;(2)零功耗;(3)端口间的全连接;(4)无需配置.但是它也存在如下缺点:(1)每个信道传输速率仅为1交叉开关的信道速率为R,因此AWGR需要用原来N倍的时间来传输一个信元;(2)由于AWGR本身的特点,其规模不能过大,一般来说,超过一百个端口的AWGR是非常少见的[16].5.2提高交换速率虽然AWGR可以提供输入端口和输出端口之间的全连接,但是由于技术和工艺原因,目前实验室内部也只实现了最高40Gbps的AWGR,市场上可以使用的AWGR速率将更低.对于100Gbps以上的网络,如果使用高速AWGR,肯定会造价过高,但如果每一个信道只能以1Page7又会造成N倍传输时延.本小节我们提出一种使用两个低速AWGR串联,能够以线速率R模拟任意交叉开关连接模式的交换矩阵,我们将其称为通过双AWGR模拟的交叉开关(DAWGREC)模块,以低廉的实现成本达到高性能.如图9所示,DAWGREC由两个AWGR串联而成,两个AWGR之间用可变换波长的激光发射器件(Tunable-WavelengthLaserTransmitter,TWLT)连接.当长度为L的信元到达输入端口时,将被平均分为N个长度为L/N的分片(segment),这些分片被均匀地发送到每一个中间级,而通过配置TWLT,即可在这些分片到达第二个AWGR的入口时变换为正确的波长,从而被转发到正确的目的地,并在第二个AWGR的出口被重新组合成信元.这样转发一个信元的时间仍然为一个时槽.值得注意的是,由于从同一个输入端口被均匀发送到各个TWLT的分组最终的目的端口都一样,因此其波长映射都一样,从而需要的波长映射实际上只有N种而不是N2种.为了便于理解DAWGREC的原理,我们在图10中显示了两组通过DAWGREC模拟4×4的交叉开关连接的示例.5.3扩大交换规模由于AWGR要达到一百个以上的端口非常困难,因此通过DAWGREC来实现的RRE-BvN也不可能支持过大的交换规模.本节我们使用多个较小规模的DAWGREC模块互联从而扩展为较大的规模.具体来说,我们使用4个N/2×N/2的DAWGREC模块构造一个N×N的DAWGREC模块.将要到达N个输出端口的信元分为两部分,一部分指向前N/2个输出端口,另一部分指向后N/2个输出端口.这4个DAWGREC模块通过图11的方式连接.通过配置这4个DAWGREC模块中的TWLT,即可以模拟N×N的交叉开关的任意连接模式.一般的,可以使用k2个n×n的DAWGREC矩阵扩展成为一个kn×kn的DAWGREC模块.而又可以将合成的DAWGREC模块作为基础模块再次进行扩展.因此,如果需要更大的交换规模,则可以使用扩展的DAWGREC模块再次通过上面的方法组合.通过多次扩展,理论上可以支持任意规模,以适应下一代网络对更大交换规模的需求.6仿真实验吞吐率和时延是评价交换机好坏的两个重要指标,前面我们已经证明了RRE-LB交换机可以保证100%的吞吐率.本节我们在为NS-3(NetworkSimulator3)设计的交换机仿真平台[1]上对RRE-LB交换机进行仿真,并对比其它负载均衡方案的时延性能.在仿真中,我们设置端口数为32,对于其它端口数,也有类似结果,限于篇幅,我们不再一一列举.为了便于对比RRE-LB交换机的时延性能,我们在仿真结果中加入了如下交换机和调度算法:(1)输出排队(OQ).交换机时延性能的最优(2)5-SLIP.iSLIP算法,32端口交换机,文界,在高速网络中无法实际实现.Page8献[4]推荐5次迭代,由于迭代次数较多从而无法用于高速或大规模交换.(3)1-SLIP.仅一次迭代的iSLIP算法,复杂度仅为O(1),和RRE-LB具有类似的复杂度.(4)CR交换机.100%吞吐率的LB交换机,作为时延性能参考.(5)基于反馈的LB交换机(FB).使用2倍加速比才能达到100%的吞吐率,但具有较好的时延.(6)Byte-Focal交换机(BF).目前最实际的LB交换机,可以达到100%的吞吐率,其中性能最好的LQF调度算法的时间复杂度为O(logN).在第一组仿真中,我们比较各种交换机在Bernoulli和突发均匀流量下的时延性能.突发流量中停留在ON和OFF状态的时槽数均服从几何分布.在ON状态下,每个时槽均产生一个分组.而停留在ON状态的时槽数称为突发长度(burstlength),用b表示.同一个突发内的分组的目的端口相同,而不同突发之间的指向从N个输出端口中均匀地随机选择.仿真结果如图12所示.可见,随着突发长度的增大,各种算法之间的性能渐渐接近.RRE-LB由于有第一级负载均衡器的作用,其在高负载下的时延性能远远好于1-SLIP算法.而CR交换机虽然在低负载下时延稍小,但是仍然高于RRE-LB.Feedback-Based交换机在低负载下与Byte-Focal性能相当,而在高负载下,性能较好.总体来说RRE-LB无论在高负载还是低负载下,都能达到很好的性能.在下一组仿真中,我们主要考察各种交换结构在Bernoulli非均匀流量下的时延性能.我们使用了4种在交换机仿真中广泛使用的非均匀模型:非对称(asymmetric)、对角(diagonal)、热点(hotspot)以及非平衡(unblance).假设输入端口i的流量平均到达率为λi,而用λAi,j、λDi,j、λHi,j和λUi,j分别表示从输入端口i到达而指向输出端口j的流量分别在非对称、对角、热点以及非平衡模型中的速率,则有如下关系成立:其中,ak=λDi,j=λHi,j=λUi,j=其中f∈(1,+]称为非对称系数,d∈[0,0.5]称为对角系数,h∈[0,1]称为热点系数而w∈[0,1]称为非平衡系数.在仿真中我们取文献中的典型值f=1013、d=0.3、h=0.6以及w=0.6.仿真结果如图13所示.可见,由于第一级负载均衡器的作用,RRE-LB无论在高负载还是低负载下都稳定,且时延性能良好,而具有相同调度复杂度的1-SLIP算法在高负载下不稳定.和其它LB结构相比,RRE-LB的时延性能在非均匀流量下具有较大优势.文献[18]及其相应的后续研究指出网络中的流量大多为突发流量.为了更接近实际流量,我们结合突发和非均匀两种流量模型,在下一组仿真中用突发长度为10的非均匀流量评估各种交换机的时延性能.其中突发流量的设置和第一组仿真相同,而非均匀流量的配置和第二组仿真相同.仿真结果如图14所示.在各种LB结构中,RRE-LB的时延性能仍然有较大优势.Page97总结本文提出了一种时分复用(TDM)和简单轮询调度结合的适应性TDM(ATDM)调度以替换传统负载均衡(LB)交换机中的TDM调度.新的LB交换机称为轮询加强的负载均衡(RRE-LB)交换机,该交换机有效地改善传统LB交换机由于BvN结构使用严格的TDM调度而导致的“连接浪费”问题,从根本上解决困扰LB交换机的时延性能问题.其次,为了适应下一代网络对高速交换的需要,我们在文中通过结合两个阵列波导光栅路由器(AWGR)的方式,使得核心交换器件可以以线速率模拟传统交叉开关的运行模式,这种器件称为通过双AWGR模拟的交叉开关(DAWGREC)模块.通过使用这种模块,可以进一步提高光核心交换机的交换效率,改善时延性能.最后,由于AWGR器件的规模不能过大,而为了适应下一代网络对大规模交换的需要,我们提出了通过多个DAWGREC模块互联的方式模拟更大规模的交叉开关的方案.理论上,通过多次扩展,DAWGREC模块可以模拟任意规模的交叉开关.我们相信,不管未来使用何种网络体系结构,分组交换技术仍然是计算机网络的基础.而能够保持100%吞吐率,同时解决了时延性能以及交换规模问题的新LB结构一定可以为未来网络提供更好的服务质量保证.
