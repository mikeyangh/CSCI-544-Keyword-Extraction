Page13D打印中的几何计算研究进展王伟明3)1)(中国科学技术大学数学科学学院合肥230026)2)(河南理工大学计算机科学与技术学院河南焦作454100)3)(大连理工大学数学科学学院辽宁大连116023)摘要3D打印技术改变了传统的减式材料制造模式,带来了制造工艺和生产模式的变革,有力地推动了3D数字化相关技术与研究的发展.文中从3D打印的社会背景与理论背景出发,介绍了3D打印技术的分类、原理与过程.以此为基础,对近几年的3D打印中的几何计算问题给出了全面的综述,根据问题特点将其分为几何优化、结构分析、材料表面效果定制、机构设计、自支撑结构设计、内部结构设计等六大类,并对每一类作了详细的分类介绍,最后对其发展方向作了初步展望.关键词3D打印;几何计算;结构优化;激光固化;光固化;熔融成型1引言3D打印是增材制造技术(AdditiveManufac-Page2加的制造工艺,自20世纪80年代开始逐步发展,也被称为快速成型(RapidPrototyping)、分层制造(LayeredManufacturing)等.《经济学人》杂志在其2012年的一期专题报导中称,3D打印技术的发展与逐渐成熟,是第三次工业革命①的重要标志之一.1.13D打印与第三次工业革命相互促进所谓第三次工业革命[2],实质就是以数字制造技术、互联网技术和再生能源技术的重大创新与融合为代表,从而导致工业、产业乃至社会发生重大变革,这一过程不仅将推动一批新兴产业诞生与发展以替代已有产业,还将导致社会生产方式、制造模式甚至生产组织方式等方面的重要变革,最终使人类进入生态和谐、绿色低碳、可持续发展的社会.第三次工业革命的一个重要特征是生产方式变革,即由大规模生产向大规模定制、个性化定制转变.现在的生产方式是大规模标准化、用机器生产机器的方式;新的生产方式,是以互联网为支撑的智能化大规模定制的方式,标志着个性化定制、生产社会化时代的到来.回顾过去的两次工业革命,不难看到许多分布各地的小作坊,这也许是生产社会化的雏形.但是这些小作坊大多作为大工厂的补充,它们的任务是辅助大工厂的集约化大生产.在第三次工业革命的到来中,分散式的社会化协作将会成为主体,不同的是新的小作坊不是进行附加值很低的商品化生产,而是高附加值的商品设计与创作.在这一形势下,3D打印技术的出现恰逢其时.它作为一种高效、分散式生产工具,带我们进入个性化与社会化创造的时代,并且将会把商品生产推向多元化、个性化生产模式.1.23D打印将使长尾市场无限延伸长尾理论(TheLongTail)[3]是由美国《连线》杂志主编克里斯·安德森在2004年提出的,用来描述诸如亚马逊②之类网站的商业和经济模式.它是指当商品储存、流通的渠道足够宽广,商品的生产销售成本急剧下降时,那些原来不受到重视的销量小、但种类多的产品或服务由于总量巨大,累积起来的总收益超过主流产品的现象.即涓涓细流,汇聚成河,众多小市场汇聚成可与主流大市场相匹敌的市场能量.长尾理论直到2004年才被提出是有原因的.虽然这种现象过去一直就有,但是直到现在才成为一种显著的趋势,是因为长尾背后需要有两股力量:其一是充足的供给,其二是网络的流行.充足的供给解决了商品的生产问题,网络的流行解决了商品的流通问题.3D打印恰恰暗合了长尾背后的两股力量,那就是富裕的供给和便捷的网络.3D打印赋予普通人以制造的能力,促进了个性化定制与生产社会化,使得人人都能生产制造,同时3D打印的产品都可通过数字形式存储,完全打破物理货架限制,产品存储几乎无限,这些必定使得3D打印产品具有富裕的供给;数字形式的产品使得人们可以更加方便地搜索到自己所需的商品,加上便捷的网络,这样用户购买你的产品的渠道就仅仅需要宽带下载的方式就够了,完全是一种打破原子的方式.根据长尾理论,产品越偏向于数字形式,长尾就越往右延伸.因此,基于以上分析,3D打印技术将会给大规模工业经济带来的一次巨大冲击,将会使市场向长尾方向无限延伸.1.33D打印的优势[4](1)产品复杂度、多样化与成本无关.传统制造方式下,产品的形状越复杂,其制造成本就越高.同时,传统制造设备功能较少或单一,可加工的产品形状有限.而对一台3D打印机来说,它可以打印各种各样形状的产品,无论复杂还是简单形状的物体,并不对其制造成本产生太大影响.它无需机械加工或预制任何模具,这样极大地减小了复杂产品的制造难度,缩短了研制周期.(2)零技能制造.传统工匠需要当几年学徒才能掌握所需要的技能.批量生产和计算机控制的制造机器降低了对技能的要求,然而传统的制造机器仍然需要熟练的专业人员进行机器调整和校准.利用3D打印技术制造同样复杂的产品,个人只需在电脑中进行智能化设计,然后将复杂作业流程转化为数字化文件,发送到3D打印机即可实现制造.整个过程中,用户根本无需掌握各种复杂的制造工艺和加工技能,这样大幅降低了制造业的技术门槛.(3)个性化定制的优势.3D打印可以实现按需生产,减少了企业的实物库存,避免了大规模生产中大量未成交商品的资源浪费,更加环保.甚至,产品可按需就近就地打印,从而减少产品的物流运输成本.上述优势使得3D打印非常适合以下几类产品①②Page3的快速制造:(1)复杂结构.如传统方法难以加工的自由曲面叶片、复杂内流道等,甚至是无法加工的如内部镂空结构等;(2)个性化定制产品.如珠宝、人体器官、文化创意等个性化定制生产、小批量生产以及产品大规模生产前的研发与验证性制造;(3)高附加值产品.如航空航天、生物医疗以及珠宝等高附加值产品.需要指出的是,从国内外的研究与应用情况看,3D打印技术与传统机加工、铸、锻、焊、模具工艺的技术相比,首先它在产品尺寸精度和表面质量与后者相差较大,后处理比较繁琐,产品性能还达不到许多高端金属结构件的要求;其次,它在加工速度以及大批量生产效率方面还比较低,不能完全满足工业领域的需求;最后,3D打印设备和耗材成本仍然很高,如基于金属粉末的打印成本远高于传统制造的成本.因此,3D打印技术虽然是对传统制造技术的一次革命性突破,但它却不可能完全取代切削、铸锻等传统制造技术,两者之间应是一种相互支持与补充,共同完善与发展的良性合作关系.23D打印分类如前所述,3D打印的专业名称为“增材制造”:增材是指3D打印通过将原材料沉积或黏合为材料层以构成三维实体的制造方式.因此,利普森和库曼[4]按材料结合方式将3D打印分为两大类:(1)选择性沉积方式;(2)选择性黏合方式.文献[5]则按采用材料形式和工艺实现方法,将其细分为如下五大类:(1)粉末或丝状材料高能束烧结、熔化成型,如激光选区烧结(SelectiveLaserSintering,SLS)、激光选区熔化(SelectiveLaserMelting,SLM)、激光近净成型(LaserEngineeringNetShaping,LENS)等;(2)丝材挤出热熔成型,如熔融沉积成型(FusedDepositionModeling,FDM)等;(3)液态树脂光固化成型,如光固化成型(StereoLithographyAppearance,SLA)、数字光处理成型(DigitalLightProcessing,DLP)等;(4)液体喷印成型,立体喷印(ThreeDimensionalPrinting,3DP)等;(5)片/板/块材粘接或焊接成型,如分层实体制造(LaminatedObjectManufacturing,LOM)等.下面以其中代表性工艺方法简单介绍.2.1激光选区烧结SLSSLS也称为选择性激光烧结,其工艺原理是预先在工作台上铺一层粉末材料(金属粉末或非金属粉末),激光在计算机控制下,按照界面轮廓信息,对实心部分粉末进行烧结,然后不断循环,层层堆积成型.SLS工艺最大的优点在于选材较为广泛,如尼龙、蜡、ABS、聚碳酸脂、金属和陶瓷粉末等都可以作为烧结对象.粉床上未被烧结部分成为烧结部分的支撑结构,因而无需考虑支撑系统.SLS的缺点主要有:原型结构疏松、多孔,且有内应力,制作易变性;生成陶瓷、金属制件的后处理较难;需要预热和冷却;成型表面粗糙多孔,并受粉末颗粒大小及激光光斑的限制;成型过程产生有毒气体及粉尘,污染环境.2.2熔融沉积成型FDMFDM是将丝状的热熔性材料加热融化,同时三维喷头在计算机的控制下,根据截面轮廓信息,将材料选择性地涂敷在工作台上,快速冷却后形成一层截面.一层成型完成后,机器工作台下降一个高度(即分层厚度)再成型下一层,直至形成整个实体造型.其成型材料种类多,一般是热塑性材料,如蜡、ABS、PC、尼龙等,以丝状供料.成型件强度高、精度较高,主要适用于成型小塑料件.FDM工艺的每一个层片都是在上一层上堆积而成,上一层对当前层起到定位和支撑的作用.当形状发生较大的变化时,上层轮廓就不能给当前层提供充分的定位和支撑作用,这就需要设计一些辅助结构-“支撑”,对后续层提供定位和支撑,以保证成形过程的顺利实现.FDM工艺不用激光,使用、维护简单,成本较低.用ABS制造的原型因具有较高强度而在产品设计、测试与评估等方面得到广泛应用.FDM技术最明显的限制就是表面精度.由于是半熔融状态塑料挤制成型,表面精度比SLA要粗糙,而与SLS不相上下.FDM原型可以进行铣床加工,钻孔,研磨,车床加工等.为了补偿表面精度不足并加强特征细节,当有特殊的品质需求时,使用者通常会进行二次加工来提升原型的细节.2.3光固化成型SLASLA是最早实用化的快速成型工艺,采用液态光敏树脂为原料,工艺原理是用特定波长与强度的激光聚焦到光固化材料表面,使之由点到线,由线到面顺序凝固,完成一个层面的绘图作业,然后升降台在垂直方向移动一个层片的高度,再固化另一个层面.这样层层叠加构成一个三维实体.SLA工艺的优点是精度较高、表面效果好,因此其主要用于制造多种模具、模型等,零件制作完成打磨后,可将层层的堆积痕迹去除.SLA成型的零件一般层厚在0.1mm~0.15mm.多年的研究改进Page4了截面扫描方式和树脂成型性能,使该工艺的最高精度已能达到16μm(0.016mm).SLA的局限性主要有需要支撑、树脂收缩导致精度下降、光固化树脂有一定毒性等.另外,光固化工艺运行费用很高,零件强度低、无弹性,无法进行装配.光固化工艺设备的原材料很贵,种类也不多.光固化设备的零件制作完成后,还需要在紫外光的固化箱中二次固化,以保证零件的强度.2.4立体喷印3DP3DP工艺是美国麻省理工学院的学生保罗威廉姆斯和他导师伊莱萨克斯教授发明的.该工艺与SLS工艺类似,采用粉末材料成型,如陶瓷粉末、金属粉末.所不同的是3DP工艺中,材料粉末不是通过烧结连接起来的,而是通过喷头用粘结剂(如硅胶)将零件的截面“印刷”在材料粉末上面.3DP是一种的利用微滴喷射技术的方法,其具体工艺过程如下:喷头在计算机控制下,按照当前分层截面的信息,在事先铺好的一层粉末材料上,有选择地喷射粘结剂,使部分粉末黏结,形成一层截面薄层;上一层成形完毕后,工作台下降层厚,进行下层铺粉,继而选区喷射粘结剂,成形薄层并与已成形零件黏结为一体;如此不断循环,直至零件加工完毕为止.未被喷射黏结的地方为干粉,在成形过程中起支撑作用,且成形结束后,比较容易去除.3DP技术的优势在于成型速度快、无需支撑结构,而且能够输出彩色打印产品,最大可以输出39万色,色彩方面非常丰富,也是在色彩外观方面,打印产品最接近于成品的3D打印技术.3DP技术也有不足,首先粉末粘接的直接成品强度并不高,只能作为测试原型,其次由于粉末粘接的工作原理,成品表面不如SLA光洁,精细度也有劣势,所以一般为了产生拥有足够强度的产品,还需要一系列的后续处理工序.此外,由于制造相关材料粉末的技术比较复杂,成本较高.2.5数字光处理成型DLPDLP工艺是利用光固化和投影仪DLP技术通过可见光将光敏树脂逐层固化成的3D对象,3D对象从上到下逐层创建堆积而成.图13D打印流程它和前面的SLA光固化很相似,唯一的区别在于SLA的光线是聚成一点在面上移动,而DLP是将光打在一个面上,有点像投影仪,逐层进行光固化,因此速度比同类型的SLA立体平版印刷技术更快.同时,它使用高分辨率的数字光处理(DLP)投影仪来固化液态光敏树脂,每层固化时通过幻灯片似的片状固化.基于这种技术,可实现超薄的3D打印层,成型精度高,在材料属性、细节和表面光洁度方面可匹敌注塑成型的耐用塑料部件.2.6分层实体制造LOMLOM工艺是根据三维CAD模型每个截面的轮廓线,在计算机控制下,发出控制激光切割系统的指令,使切割头作X和Y方向的移动.供料机构将地面涂有热溶胶的箔材(如涂覆纸、涂覆陶瓷箔、金属箔、塑料箔材)一段段地送至工作台的上方.激光切割系统按照计算机提取的横截面轮廓用二氧化碳激光束对箔材沿轮廓线将工作台上的纸割出轮廓线,并将纸的无轮廓区切割成小碎片.然后,由热压机构将一层层纸压紧并粘合在一起.可升降工作台支撑正在成型的工件,并在每层成型之后,降低一个纸厚,以便送进、粘合和切割新的一层纸.最后形成由许多小废料块包围的三维原型零件.然后取出,将多余的废料小块剔除,最终获得三维产品.LOM适合制作大中型原型件,翘曲变形较小,成型时间较短,激光器使用寿命长,制成件有良好的机械性能,无需设计和制作支撑结构,适合于产品设计的概念建模和功能性测试零件.其优点有:成型速度较快.由于只需要使用激光束沿物体的轮廓进行切割,无须扫描整个断面,所以成型速度很快,因而常用于加工内部结构简单的大型零件.LOM最大的不足是材料种类少,制件性能不高,其性能接近木模.33D打印流程从广义上说,3D打印完整流程主要包括五个步骤,如图1所示.Page5(1)3D模型生成.利用三维计算机辅助设计(CAD)或建模软件建模或通过三维扫描设备,如激光扫描仪、结构光扫描仪等来获取生成3D模型数据.这时所得到的3D模型数据格式可能会因不同方法而有所不同,有些可能是扫描所获得的点云数据,有些可能是建模生成的NURBS曲面信息等;(2)数据格式转换.将上述所得到的3D模型转化为3D打印的STL格式文件.STL是3D打印业内所应用的标准文件类型,它是以小三角面片为基本单位即三角网格离散地近似描述三维实体模型的表面;(3)切片计算.通过计算机辅助设计技术(CAD)对三角网格格式的3D模型进行数字“切片”(Slice),将其切为一片片的薄层,每一层对应着将来3D打印的物理薄层;(4)打印路径规划.切片所得到的每个虚拟薄层都反映着最终打印物体的一个横截面,在将来3D打印中打印机需要进行类似光栅扫描式填满内部轮廓,因此,需要规划出具体的打印路径,并对其进行合理的优化,以得到更快更好的切片打印效果;(5)3D打印.3D打印机根据上述切片及切片路径信息来控制打印过程,打印出每一个薄层并层层叠加,直到最终打印物体成型.从上述3D打印过程可知,要实现3D打印,3D模型是前提和基础,否则“巧妇难为无米之炊”;而3D打印使3D模型“落到实处”.但是,大多情况下,现有方法直接得到的3D模型并不能直接输出给3D打印机.因为大部分设计模型都是由建筑师、工程师或设计人员所提供,他们都倾向于使用专业设计软件,如Maya①、3dsMax②和SketchUp③等.还有一些三维模型数据来自于三维扫描设备,如激光扫描仪、结构光扫描仪等.这些模型数据信息并未考虑到3D打印的具体需求与约束,如果直接输出到3D打印机,通常会导致各种各样的问题,如:模型尺寸过大,超过打印机能打印的尺寸限制或没有考虑稳定性导致打印出物体无法正常放置等.正如利普森和库曼[4]所说:3D打印中,不是输入糟糕的设计文件就能打印出糟糕的物体,而是你输入糟糕的设计文件,什么都打印不出来,或是比什么也得不到更糟糕的情况就是浪费了昂贵的原材料.因此,大多数设计模型,尤其是那些复杂物体的三维模型,都需要经过一些几何方法进行修正、调整和优化,使其能更好地满足3D打印的需求,避免打印出的物体无法正常发挥功能.这一过程,就是图1所示(a)~(d)的几何计算问题:将3D模型经过一些几何方法处理为3D打印机可接受、可打印,甚至要求打印出的模型可正常使用或具有指定效果的处理过程.下面本文就对图1所示的几何计算问题根据问题特点进行分类详细介绍.43D打印中的几何计算问题3D打印的本质在于分层制造,其中切片计算非常重要.起初,切片计算采用分层厚度相等,由此会产生模型精度与打印时间之间的矛盾:分层厚度小,模型精度有保证,但打印时间长;反之,打印时间缩短,但易导致模型阶梯误差大.这使得自适应厚度方法逐渐流行.在机械快速成型领域中,许多学者对切片计算已做过深入研究[6].从这些研究成果来看,切片计算方法若按研究对象来分,可分为:(1)网格切片计算:由于STL格式的网格模型是3D打印业内所用的标准文件类型,因此很多切片计算对象主要以STL格式的网格类型模型为主[7-13];(2)直接切片计算:由于原始3D模型在转化为STL格式模型数据时,会产生转换误差,因此还有不少研究考虑直接在原始的3D模型数据上执行切片计算[13-21].切片计算的下一步是打印路径规划,也称为扫描路径生成.它是3D打印中的最基本工作,在由线到面、由二维到三维的逐层累积过程中,3D打印机要做大量的扫描工作,因此合理的打印路径非常重要.打印路径的规划应着眼于减少空行程,减少扫描路径在不同区域的跳转次数,缩小每一层截面之间的扫描间隔等要求.目前,按照打印路径类型的不同,打印路径生成方法主要可分为5种:(1)平行扫描[22-23].每一段路径均相互平行,在边界线内往复扫描,也称为Z字路径(Zigzagging);(2)轮廓平行扫描[24-25].填充路径由轮廓的一系列等距(偏置,Offsetting)线组成;(3)分形扫描[26-27].扫描路径由一些短小的分形折线组成;(4)星形发散扫描[28].将切片从中心分为两部分,先后从中心向外填充两个部分,填充线为平行X或Y轴扫描线或45°斜线;(5)基于Voronoi图的①②③Page6扫描路径[29-30].根据切片轮廓的Voronoi图,按一定的偏置量在各边界元素的Voronoi区内生成该元素的偏置线,连接不同元素的偏置线,得到一条完整的扫描路径,逐步改变偏置量即可得到整个扫描区域的路径规划.欲深入了解上述有关切片计算、打印路径规划研究的学者,可参考上述快速成型领域相关文献,这里不再赘述.接下来,本文针对2014年以前相关研究成果为对象,侧重于从计算机图形学领域来介绍3D打印中的几何计算问题.4.1几何优化问题4.1.1物体分割问题随着3D打印技术的成熟、打印成本的降低,越来越多的物体都可以被3D打印输出.然而,一台3D打印机可打印对象的最大尺寸却仍因为3D打印机本身空间有限而受限,因此,打印一些大体积的物体,对现有的3D打印技术而言,仍困难重重.对一个超过可打印尺寸的大物体对象,如果要将其3D打印,一个可行的解决方案就是将其分割为一块块可打印的小对象,然后再将其组装成一个整体大物体,如图2所示.上述问题可称为分割问题,其本质是化整为零,再积零为整.然而,一个大物体对象如何分割为许多小物体,其分割的数量与方式可以有许多种不同的方案,因此文献[31]给出了如下一些约束目标:(1)尺寸可打印.分割后每个小物体的尺寸都在可打印尺寸范围之内;(2)可组装性.各个部分之间可无障碍地组装成一个整体;(3)有效性.分割结果避免过多过细,换言之,分割数量尽可能地少;(4)可连接性.每一部件都应能保证留有连接的接口,以便于组装;(5)结构合理性.分割结果应避免形成薄弱的长条、细杆类的结构形式,同时接缝应远离高应力区域;(6)美观.接缝应尽量避免过大与显眼,并尽可能保证整齐对称.针对以上的约束,文中给出了明确的目标定义与具体的目标函数,同时给出了一个名为Chopper的分割处理方案.该方案采用平面分割,自上而下,每次分割均将处理对象一分为二,逐步细化,最终整个模型可形成一个BSP树的层次分割结果,如图3所示.Chopper还能根据不同的目标函数与用户引导产生不同的分割结果,以满足不同的用户分割需求.图3一个模型通过BSP树分割为6个部分[31]针对大体积复杂模型,文献[32]给出了一个基于曲率的模型分割方法,如图4所示.该方法首先对模型表面进行曲率分析,提取出模型的特征边,并据其构建特征环.以此为基础,在其中选择合适的特征环来将原模型分解为小而简单的子模型组合.这种分割方法的前提是模型表面具有明确的特征信息,因此该方法适用范围有限.针对上述分割问题,Chen等人[33]则给出了一个近似表示的方案:将一个3D模型转化为分片多边形面片近似表示,再通过3D打印每一个多边形面片,最后将这些面片拼装成一个与原3D模型相近似的实物对象,如图5所示.具体操作可分为两步:(1)将所给3D模型通过表面分割、变形方法转化为一个由少量多边形组成的网格;(2)将所得到的网格分解为平面片的组合,并生成平面片之间的连接头用来拼装各个平面片.Page74.1.2重心优化问题生活中,物体平衡是指一种稳定的状态,当一个物体受到两个或两个以上的力作用时,各个力互相抵消,使物体成相对的静止状态.在3D虚拟环境下,3D模型可以任意摆放位置与姿势,包括可摆出违反重力原则的造型,因为在虚拟世界中,3D模型无需遵循真实世界中的物理规律.但是,如果把3D模型打印输出为实物时,这时物理规律就要发挥作用了,如果它在各种受力情况下,不能保持稳定状态,那它就不能很好地摆放到所需的状态.这种情况下,你可能就需要把物体粘在很重的基座上,或对它进行反复修改,以便使模型能够很好地放置到所需姿势.这两种方法都比较麻烦,更好地方法是Prévost等人[34]给出的重心优化方法,即通过几何方法来优化模型的重心位置使其在给定姿势下达到平衡状态,如图6所示.首先,文中给出两种平衡模式:稳定立在一个平面上的站立模式和悬挂在一根细绳上保持平衡的悬挂模式.对站立模式,模型与地面接触的所有接触点可构成一个支撑多边形,要使模型保持平衡必须使其重心投影落在支撑多边形内;对悬挂模式,保持平衡的关键在于使其重心通过细绳与物体相连的吊接点方可,如图7所示.在此基础上,作者将3D输入模型视为一个实体模型,上述问题就可转化为通过一定方式改变这个体模型的重心使其达到合适的平衡状态.文中给出两种调整重心位置的方式:(1)掏空模型内部区域,使其产生内部空洞;(2)在尽可能保持模型外部形状特征的条件下使模型外表面变形.经过以上重心优化处理后模型,3D打印为实物后,无需额外的支架或底座,模型也能很好地保持站立模型,如图6(b)、(c)所示.4.1.3打印成本优化问题随着3D打印技术的发展,3D打印成本在不断地在下降,即便如此,与传统制造所生产的产品相比,3D打印产品的成本仍相对较高,目前通常用单位体积所需材料的费用来表示(元/cm3).显然,3D打印成本直接与材料成正比.因此,如何能在不牺牲打印物体质量的前提下,通过优化模型来减少打印材料消耗,对于降低打印成本来说,至关重要.为节省打印材料,受建筑工程中的桁架结构的启发,Wang等人[35]提出的一种基于“蒙皮-刚架”(Skin-Frame)的轻质结构来解决材料优化问题.如图8所示,这里的刚架(Frame)能有效地降低打印材料成本,并使打印物体满足所要求的物理强度、受力稳定性、自平衡性及可打印性.这些刚架结构是由一些细杆通过一些节点相连而成,形成空间的一个图结构.需说明的是,这种结构与建筑中常见的桁架(Truss)有所不同,因为前者的杆件之间并不是铰接的,而是固定连接的.这种结构的优点主要有两个:(1)力学特性好,当某节点受到外力时,此处的受力能通过相邻的细杆迅速传播分散开来;(2)质量轻便,这种结构是由稀疏的细杆组成,因此总体质量不大,很好地减少了结构本身的重量及所使用的材料.基于以上考虑,作者的想法是:对于给定的一个三维模型,我们将模型表达成一个很薄的蒙皮以及内部的刚架结构,使得表达后的物体的体积(即所使用的打印材料)最小,而且使得打印物体能够满足所要求的物理强度、受力稳定性、自平衡性及可打印性Page8等要求.文献[35]的目标函数包括两个:第1个目标为使得物体的体积最小,即蒙皮体积及刚架结构的体积之和最小.由于蒙皮的厚度的增加会很快增加体积,因此我们将蒙皮的厚度固定为最小可打印精度,不作为优化变量.因此,需要优化的变量只包括刚架结构中的细杆的半径、节点的个数及位置.第2个目标为使得刚架结构中的细杆数量及节点数量尽量少,该目标是为了使得不要出现冗余的细杆及节点.为此,作者通过优化建模,提出一种迭代优化的方法来优化两个目标函数.只要从任意的一个刚架结构出发(可随机产生),该算法可以智能地优化出细杆的半径,去除多余的细杆及节点,以及优化节点的位置,使得总体积最小.对于一些需要支撑结构的3D打印类型,文中算法同样适用,它能够智能地设计支撑结构,如图9所示,这种支撑结构也是由一些细杆组成,能够在打印过程中起到支撑的作用.很容易看出,该算法设计的支撑结构极大地减少了支撑材料的浪费,并且非常容易剥除.4.2结构分析3D打印技术促进了产品个性化定制的普及与推广,使得每个人都可以设计3D几何模型,成为自己产品的设计师.他们由于缺乏一些设计经验与力学知识,会导致其设计结果直接3D打印后会存在一些结构问题,如强度问题、稳定性问题等.强度不足可能会使3D模型在打印、运输或日常使用过程中受到破坏,而稳定性问题则会导致3D模型无法正常地放置或悬挂,影响其日常使用功能.这种问题我们称其为结构分析问题,它的主要任务是识别3D模型中存在的强度或稳定性缺陷,并给出适当合理的弥补方案.文献[36-39]讨论了3D打印结果的强度分析问题,文献[34]则讨论了结构稳定性问题.4.2.1强度加固针对强度问题,文献[36]给出了一个自动检测并修正结构强度问题的系统方案,来创建一个新的3D模型,使其与原有模型保持尽可能相近的外形,同时提高其结构强度与整体性.该方案中,模型的结构强度问题通过一个轻量级的结构分析解算器来计算识别出.随后,根据所检测出的强度问题,文中给出三种方法对原模型进行修正:内部挖洞、局部加厚与加支撑,如图10所示.文献[36]中的方案有效地提高了模型的结构性能,避免了高强度应力区域的出现.但是该方案的最大局限在于:在结构强度检测时,系统需要先预设模型可能承受的外部荷载情况,并据此对模型显式地指定一种或几种捏握式外部荷载来进行结构强度计算.当然,同时还需考虑模型的重力荷载.显然,对很多模型来说,这种预设的荷载并不能很好地反映模型的真实荷载分布,因此其结构分析结果的真实性与可靠性也就不能很好地保证了.4.2.2最不利荷载针对上面的问题,文献[37]给出了一个更好的方案.该方案在预测或检测模型结构强度问题时,与上述明确指定或设定模型的荷载情况方法不同的是,它去寻找一种最不利荷载情况(Worst-Case),并据此识别出模型上最易破坏之处或最大变形区域,如图11所示.Page9该方案的核心方法是模态分析(ModalAnalysis).在结构分析研究领域,当一个物体以不同频率振动时,这种振动会导致物体的一些脆弱部位产生高应力或大变形.模态分析就是用来预测结构在振动状态下可能发生的破坏或变形的一种经典方法.该方案的主要步骤如下:(1)计算输入模型的各阶模态;(2)对模型的每一阶模态,计算提取出相应的薄弱区域;(3)对每一个薄弱区域,通过求解一系列的优化问题,计算出其相应的最不利荷载分布;(4)用有限元方法计算在上述荷载分布作用下模型的应力,从而得到该薄弱区域的最大应力分布情况.综合以上每一阶模态下模型的最不利荷载分布与最大应力分布情况,确定最终结果.4.3材料表面效果定制随着可供3D打印材料类型的增多,人们希望能打印出更复杂外观、表面光学特征及力学特性的物体.这一需求催生了3D打印中一类重要但尚未很好解决的问题:如何确定出一个物体对象的材料组成,使其能满足一个给定的表面外观效果或变形功能要求.这一问题可称为材料表面效果定制问题(Specifi-cationtoFabricationTranslation,Spec2Fab)[40].其他近年来,很多学者对此问题做了一些深入研究,其工作大致主要可分为3类:(1)次表面散射效果定制(SubsurfaceScattering),如Hasan等人[41]、Dong等人[42]和Papas等人[43]等研究了通过双向表面散射反射分布函数(BidirectionalSurfaceScatteringReflectanceDistributionFunction,BSSRDF)来实现打印材料次表面散射效果;(2)空间变化反射效果(Spatiallyvaryingreflectance),如文献[44-49]等通过双向反射分布函数(BidirectionalReflectanceDistributionFunction,BRDF)来实现;(3)变形及其他效果定制,如Bickel等人[50]研究了给定打印材料变形效果的实现方案.针对多材料打印问题,Vidimce等人[51]则给出了一个OpenFab可编程流水线来解决多材料打印的合成问题,如图12所示.图12OpenFab打印3只不同效果犀牛实例[51]Chen等人[40]则对上述研究结果归纳总结,提出一个可简化设计流程的抽象机制Spec2Fab.下面对其中具代表性的工作做一些概略介绍.4.3.1次表面散射效果定制(SubsurfaceScattering)为了使3D打印结果具有指定的次表面散射效果,Hasan等人[41]给出了一个完整的流程,并给出了一些相应的打印实例效果,如图13所示.其流程简单介绍如下:(1)测量一组给定基本材料的次表面散射特性,采用双向表面散射反射分布函数(BidirectionalSurfaceScatteringReflectanceDistributionFunction,BSSRDF)来描述它们的散射特性曲线,如图14(a)、(b)所示;Page10(2)表面外观效果预估.根据上述基本材料的散射特性曲线,可计算出不同材料、不同厚度组合后的次表面散射特性曲线,如图14(c)、(d)所示.我们将其称为正向问题(Forwardproblem);(3)与目标材料外观效果的匹配计算.给定一个材料的期望散射曲线,我们通过非线性离散优化算法来确定出各层材料及其厚度,使它们组合出尽可能接近所要达到的目标效果,如图14(e)所示.这个可称其为反向问题(Inverseproblem).其中,优化算法通过物理约束剔除大量不合适的结果,实现高效地搜索基本材料的可能组合空间;(4)将上述计算结果优化扩展到3D模型表面各点,通过调整包裹在模型表面不同厚度的各层材料,来实现目标效果,如图14(f)所示;(5)利用3D打印机输出物体的最终真实效果,如图14(g)所示.针对上述同样的次表面散射问题,Dong等人[42]也同时给出了一套类似的方案.该方案在给定的材料次表面散射特性要求下,可以有效地计算出所打印物体的每层材料分布及其厚度.其中,所给定的材料次表面散射要求也是由BSSRDF函数来描述.同时,还需要考虑一些材料分布约束条件(LayoutConstraints):打印硬件需要使用一定的打印材料种类,因此材料种类是一个固定的集合;为避免模型材料分布太细太繁,同时也为节约打印时间与成本,模型材料层数也不能过多.Dong等人[42]将上述问题称为材料映射问题(MaterialMapping),即给定一组基本材料及分布约束条件,计算出物体材料组合使其BSSRDF符合所给曲线要求,其核心流程如图15所示.虽然Dong等人[42]与Hasan等人[41]都是采用BSSRDF函数来确定材料的次表面散射特性,但是两者方案上还是有一些不同之处:首先,对均匀层厚情况,Hasan等人[41]采用启发搜索式方法来剔除一些不合适的分层布局结果,而Dong等人[42]采用基于分簇的方法来计算有效布局;其次,对不均匀层厚情况,Hasan等人[41]对每一个模型表面点先将所给的BSSRDF分解为局部散射曲线,再据此来确定材料分层布局,而Dong等人[42]则仅用局部散射曲线来初始化分层布局,其后给出了一个优化算法用以更好地计算布局结果,来近似所给BSSRDF特性.Papas等人[43]研究了通过不同的颜料与基本原料相混合来实现给定材料次表面散射效果,这里不再详述.4.3.2空间变化反射效果定制(Spatiallyvarying真实世界物体表面因其材料不同,展现了各种各样的表面效果,如光滑的、塑料感的、金属质感的等.同时,多数情况下,同一种表面反射效果还会随视角空间方向变化而变化.在计算机图形学中,常用BRDF函数来表示这种空间变化反射效果.自然,在3D打印中也会考虑如何打印出具有指定空间变化反射效果.为了定制出期望的表面外观反射效果,Weyrich等人[45]给出了一个基于微平面(Microfacet)理论的系统方案.该方案根据一个给定的物体表面BRDF分布,寻求得到物体微表面倾斜分布的一个可能结果,再对此分布采用点状方法采样,并以微平面为单元来构建物体表面,然后运用模拟退火方法优化微平面间倾斜连续性及其凹陷深度,最后得到表面高度分布场,实现所要达到的表面反射效果.Microfacet理论基本假设是,表面是由很多微平面(microfacet)组成,这些微平面都很小,无法单独看到;并假设每个microfacet都是光学平滑的.每个microfacet把一个入射方向的光反射到单独的一个出射方向,这取决于microfacet的法向m.当计算BRDF的时候,光源方向l和视线方向v都得给定.这意味着在表面上的所有microfacet中,只有刚好把l反射到v的那部分对BRDF有贡献.在图16中,我们可以看到这些有效microfacet的表面法向m正好在l和v的中间,也就是半角矢量犺.图16Microfacet与光源方向l,视线方向v,半角矢量犺在上述假设下,Weyrich等人的方案是假定一个物体表面的最终反射效果由构成物体材料的基本BRDF特性与物体表面的高度场分布所决定.其中,物体由单一材料构成,且不考虑透明情况;对表面高度场分布,限制微平面的倾斜角在65°内,这样可以忽Page11略微平面间的互相遮挡与反射情况.同时,微平面间的边界连接应尽可能连续,减少边界处的错位高度.在上述假定下,物体表面总体的BRDF可看作是由一些基本的微平面BRDF单元混合叠加,其中每一个微平面BRDF随着微平面的法向不同而变化.最终的表面总体BRDF效果可看作是由基本BRDF的半角分量与每一个微平面法向的球面卷积[52].具体实现流程如下:(1)由所给的高亮形状到微平面分布.首先,受Colbert[53]方法的启示,通过直观自然的设计界面来绘制想要的高光效果,生成材料的基本BRDF特性.当然,也可以直接测量各种材料如金属、颜料、布料等获得相应的基本BRDF特性.其次,如前所述,基本BRDF的混合叠加可看作是卷积运算,因此,可以把基本BRDF视为卷积核,对所给高亮形状进行反卷积运算,得到反卷积后的微平面分布,如图17所示;图18采样方法对比[46]其次,在得到想要的微平面离散集合后,此时微平面的高度值还未确定,可先对其倾斜角调整优化,使其分布能形成一个相对连续光滑的平面.文中这个过程通过模拟退火优化算法来计算三个能量函数使其最小化来完成.图19漩涡形状(图18)的微平面阵列[45](2)由微平面分布到高度场分布.理论上说,一种微平面分布可以对应有无数种高度场分布.为了实现转换,文中对此问题附加上了一些弱约束.首先,对微平面分布采样,将其转换为不同朝向的微平面离散集合.这里,低偏差采样(Low-discrepancysampling)方法比随机采样方法具有更好的保真度与更低的噪声,如图18所示.最后,利用上述优化结果,沿着高度方向移动每一个微平面使其分布尽可能连续,得到最终的高度场分布.这一过程可以表示为一个离散的泊松方程来求解.最终的结果可以得到一个近似于C0连续的微平面分布,如图19所示.Page124.3.3变形效果定制对于弥合数字世界与物理世界之间的差距,其中一个重要挑战就是将原材料变成设计者想要的结果.无数个点、边、面及相应的材质信息构成了数字世界中的原材料,而在真实世界中却不是如此简单和容易掌控的.解决上述问题的一个常见办法是组合多种材料.事实上,不同材料组合的联合打印可以消除传统单一材料打印的不足与局限,使我们能够制造更加复杂的物体,甚至能使这些多元材料转化为复杂的、新的功能材料,如同时兼具轻质和高强度性能的材料,或同时具备良好柔韧性和透明效果的材料等.组合材料的性能给人直观感觉可能会介于组成的基础材料之间,如将相等的硬质材料和软质材料组合在一起,可能你会得到一个半硬半软的材料.事实证明并不是完全如此,最终组合材料的性能取决于组合材料的方式.Bickel等人[50]就研究了上述这一很有实用价值的材料混合问题:如何在微尺寸的尺度(即3D打印的尺度)上,根据基础材料的力学性能,打印出指定力学性能的基础材料组合体.如图20所示.问题的实质是:给定的一组基本材料及其力学性能曲线,如何将基本材料混合,以便得到指定力学性能的多元混合材料.系统流程如图21所示.为了解决上述问题,Bickel等人[50]采用按层方式来混合不同材料,并引入一个优化过程来得到最接近指定材料性能的混合结果.最后,文中的方法通过一台ObjectConnex500多材料打印机打印了一些模型进行验证.综合以上的定制处理方法,Chen等人[40]发现上述处理过程存在一些类似的流程与相同的处理单元,如它们都依赖于在给定几何与材料要求下精确模拟所给对象物理特征的能力.因此,文中提出一个更具普适性的定制框架来处理上述问题,该框架具有模块化、可扩展性、打印设备无关性与模型几何无关性的特点,并给出了一些定制效果,如图22所示.该框架具有4个模块,如图23所示.当前,多材料3D打印机在打印对象时需要指定对象内部的每一个体素,如果还需要一定的功能或其他要求时,确定体素的工作极其复杂,很难求解.因此,这一工作就需要采用一定的简化来表示,也即图23中第1个模块“ReducerNode”的任务.为了实现这一目标,Chen等人采用简化树(Reducertree)方式.这一方式在概念上有些类似Maya中的材质网络(ShaderNetwork),只不过这里用一些预定义Page13的形状与材料节点给对象所在空间进行合理赋值,实现材料赋值空间的参数化.因此,文中给出一个简化树的树型结构,它有两种类型的子节点:几何节点与材料节点,如图24所示.几何节点有平面、柱状、体素、B样条和薄层节点等,通过它们的组合来完成对象所在空间的分区.材料节点主要用来给分区后对象空间指定预定义的材料,因此它一般作为几何节点的子节点.材料节点具体实现上可分为层节点(LayeredNode)与空节点(VoidNode)两类.层节点可用来指定对象分区空间中每一层的材料值;空节点则用于指定对象空间某块区域没有材料填充.图23的4个模块实际上表示一个抽象的优化流程:对前述简化树表示的模型模拟效果,如次表面散射效果或变形等;将模拟结果与系统目标相比较;根据比较结果再对简化树结构进行优化.这一流程文中将其称为调谐器(Tuners),它主要负责优化简化树的各种参数,以达到系统预定的目标.调谐器也可分解为一些调谐节点(Tunernode),每一个调谐节点包含一个具体的优化管线,并与一些简化节点(Reducernode)相链接.同时,这些调谐节点会共享一些信息,从而形成一个调谐网络(TunerNetwork),如图25所示.于是,调谐节点就利用它的优化管线与调谐网络来优化其相关联的简化节点参数,实现系统的优化目标.为了评估系统的打印效果定制能力,文中最后给出了一些现有转换过程的实现,如Hasan等人[41]的表面散射效果(图26),Papas等人[43]的焦散效果,Bickel等人[50]的变形效果等.4.4机构设计3D打印不仅可以输出复杂模型,同时,还为以往能设计但很难制作实现的机构提供了实现的机会.因此,最近两年各种机构设计的研究越来越多.这方面的研究主要可分为两大类:一类是静态机构设计,如积块式机构设计,这类机构的构件按一定方式组装起来,形成一个稳定的形状;另一类是动态机构设计,如动态玩具机构、关节机构和免组装机构等.这类机构可以活动或运动起来.4.4.1积块式机构积块式机构指由一些块状、片状或板状构件按一定要求组装在一起,构件间互相咬合锁定,最终形成一个稳定的结构,如鲁班锁[54]、联锁积木[55]、交错式片块机构[56].鲁班锁,也称为“六子联芳”、“六道木”和“孔明锁”.通常是由6根插在一起的条棍组成一个立体十字结构,如图27所示.鲁班锁的条棍相互穿插在一起,成为一个稳定的结构,不会散开.鲁班锁的一些条棍中有凹下的空间,因此当它们穿插在一起时,它们的整体结构的中间是实心的.通常会有一根完整的条棍,最后一个插进结构,使其稳定,因而“锁”住结构,这个条棍也叫“锁棍”.将一个鲁班锁打开比较容易,但是要将它们组装起来则需要一定的空间思维能力和足够的耐心.Page14如上所述,传统的鲁班锁构件或为条棍状,或为半圆状,总体形状较为单一.如果能生成形状各异的鲁班锁,这将会大大提高游戏的吸引力与趣味程度,但这一问题具有一定的复杂性与挑战性.因为鲁班锁结构虽然只有6个部件,但需要考虑部件之间的耦合关系来保证部件间能互相锁定.Xin等人[54]就研究了这样一个有趣的问题:如何根据一个给定的3D模型来自动设计生成相应的鲁班锁结构.为了便于阐述,作者将一个具有6个部件的鲁班锁基本结构,称为节点(knot),如图27(b)所示.在此基础上,作者从给定的3D模型内生成一个单节点的鲁班锁结构,再拓展到多节点的鲁班锁结构,从而完美解决所给问题.首先,考虑单节点问题.为了设计生成一个单节点鲁班锁结构,文中先将一个标准的鲁班锁结构(图28(a)所示)内置于所给的3D模型内部,如图28(b)所示;接下来,将其6个部件沿着各自所在平面的轴向延伸至3D模型边界,将3D模型所在空间划分为8个区域,如图28(c)所示;最后考虑剩下的8个区域贴片问题,如图28(d)所示.其中,8个区域贴片生成方法有多种,其基本原则是满足在拆装鲁班锁过程中不要有碰撞干扰.文中给出了3种建议方法:双面、多面及对称方法.双面方法是将8个区域贴片合并为2个大贴片,附在6个部件中相对的2个部件上面,如A1和A6,A2和A3或A4和A5,如图29中第1行所示;如果8个区域贴片不合并,每一个贴片可任意附在相邻的3个基本部件上,这种方法即为多面方法;对称方法,如图29中第2行所示,可使表面贴片分布更均匀对称.多节点情况可以在单节点解决方法基础上,通过构建一个节点网络来处理,如图30所示.联锁积木(InterlockingPuzzles)游戏是另一种类型的益智游戏,类似于拼图游戏.它给定一组形状各异的积木块,要求玩家能按一定顺序将其组装成一个有意义的3D形状.它能有效锻炼人们的空间想象力、创造力和提高人们的逻辑思维能力.这类游戏的解决一般都具有一定的难度,而如何能设计出很好这类游戏就更好具有挑战性,Song等人[55]就研究了这样一个有趣的问题:如何将一个给定的3D模型分解为一组合适的分块,使其能变成一个联锁积木游戏.文中首先给出一个联锁积木的定义:一个联锁积木指的是多个积木块互锁在一起,其中只有一个积木块可以移动,而剩下的其他块都不能互相分离拆开.图31所示即为一个经典的Coffin联锁积木.Page15根据上述定义,一个生成联锁积木块的原始方法是对各种可能解进行不断测试,直到满足上述要求即可,但是这种方案的搜索与测试计算量太大.因此,Song等人深度探讨了联锁积木游戏的原理,提出了形成联锁积木的一套方案,并在此基础上,给出了一个构建联锁积木的构造性方法,有效避免了传统方法的穷举测试问题.该方法的处理过程简单示意如图32所示.类似于通常的联锁积木结构,该方法以体素形状的积木模型为处理对象,记为S.依次从S身上递归抽取部分积木块,将其分解为一个积木块序列P1,P2,…,Pn和S中剩下的最后积木块Rn:S→[P1,R1]→[P1,P2,R2]→…→[P1,P2,…,Pn,Rn].于是问题的求解就变为一个递归的分解过程:如果每一次分解中,都能保证只有一个积木块组件能取走解锁,而剩下的部分都不能互相解锁,则问题就可递归解决.其中,Pi+1称为解锁块.按照这一策略,文中构造性方法主要可分为两步:(1)提取初始解锁积木块;(2)递归依次提取其他解锁积木块.具体提取方法可参见原文.交错式片块机构主要是指一些平面片状构件互相交错咬合在一起的机构对象,如图33所示.平面片状构件可由木材、金属、塑料、玻璃等多种材料方便简单地制作出来,因此,由这些构件形成的对象也能非常容易地制作与组装起来.另外,平面片状构件也容易制作出较大尺寸,因此,用它来构建较大的对象也很方便容易.所以,这种由平面片状构件组装而成的物体在日常生活中也很受人欢迎,被广泛地用在拼装式玩具、家具或建筑内部结构等上面.如何便捷地设计生成这种由平面片状构件交错形成的机构对象,是一个有趣也有一定难度的问题.Schwartzburg和Pauly在文献[56]中对此问题作了一些研究,给出了一种方便实时的交互式设计方法.文中为方便设计,它提供了一种抽象模型,用来表示平面片状构件间约束,在此基础上,给出了构件设计的设计目标与优化目标,如机构的稳固性、可组装性等.并对平面片状构件的位置、朝向、碰撞等问题进行优化.4.4.2动态玩具机构目前的3D打印技术,打印静态的模型已是十分简单了.如果打印的模型可以动起来,就非常有意思了.这方面的研究主要有机械玩具设计[57]、机械角色设计[58]和机械人设计[59]等.这3篇文章都研究了玩具机构设计,其中Zhu等人研究了玩具机构的设计,如图34(a)所示;Coros等人研究了机械角色机构运动,如图34(b)所示;而Ceylan等人则研究了基于视频输入的机械机器人设计,如图34(c)所示.其主要方法和流程基本相似,可以总结如下:给定一个运动的输入,可以是一组动画曲线,也可以是一段动画视频,系统会从预定义的部件库中选取合适的部件将其组合,然后再优化这些部件的参数,使整个机构的运动输出与所给运动输入保持一致,如图35所示.下面从输入、部件库、优化处理等几方面来对上述3篇文章进行简单对比介绍.(1)用户输入.文献[57]的输入以玩具角色的指定运动为主,同时加上玩具角色的几何信息,与玩具下方的方盒尺寸,如图36(a)所示;文献[58]以一个带有关节的机械角色,并给定其若干部位的一组动画曲线为输入,如图36(b)所示;文献[59]的输入则为一个关节链式角色的动画视频序列,如图36(c)所示.Page16图35玩具机构设计示意[57](2)部件库.图37(a)所示即为文献[57]的部件库,通过这些部件的组合产生机构所需要的直线、摇摆与螺旋运动;文献[58]的部件主要以齿轮与连杆为主,其组合方式有多种,如图37(b)所示;文献[59]部件库中有4种部件,分别为四连杆机构、皮带轮、摇摆部件和锥齿轮部件,如图37(c)所示.(3)优化处理.为了达到理想的玩具机构运动效果,文献[57]给出了如下的优化函数:其中:Ca(x)表示运动相似度,用以衡量结果与输入的匹配程度;Cl(x)表示机构布局质量,衡量布局是否齐整有序;Ct(x)表示机构拓扑复杂性,保证机构应尽可能简单.文献[58]给出如下目标函数:F=该目标函数用来优化机构运动实际曲线与所给运动曲线之间的相似程度.其中,x(p,st)和x^t表示t时刻同一标记点在实际曲线与目标曲线的位置.文献[59]的优化目标是机构运动尽可能地与所给关节链运动相近,在此基础上,转化为每一根骨骼对所在关节角度的近似优化,由此针对每一个关节链,定义如下能量函数:其中:i表示骨骼编号,j表示动画序列帧编号,ΔΦi表示动画序列输入中骨骼的角度差;Δi际机构中相应的角度差.上述3篇文章均是运动机构设计应用在不同的场景上,方法上并没有体现太多新颖的地方.所以,它们均强调有趣的应用场景.它们都采用了很多齿轮,这些齿轮从外观上破坏了模型本身几何结构的整体性;而连杆结构本身就是一种四边形和三角形构成的几何单元.所以在3D打印时都要分别打印这些部件,然后重新组合安装,十分麻烦,并未能体现3D打印一体成型的特点.4.4.3关节机构角色对象无论是在电影还是在游戏中都无一例外是故事的主要对象.对一个角色来说,关节是其身上的重要元素.角色动画中,关节的重要性不言而喻.如何利用3D打印技术来制作出有活动关节的角色,将是一件有挑战性与吸引人的工作.因为它能使打印出的模型变化不同姿势,具有生命力;但同时,它需要考虑关节位置设定、关节与其他部位拼接、关节运动等问题,具有一定的难度.Calì等人[60]和Bcher等人[61]就此问题分别作了一些探讨研究,如图38(a)、(b)所示.从总体过程来看,两人的方法大体相似,可简要总结如下:首先,将所给模型按一些要求分割为不同组成部分;然后,将分割后的模型用合适的关节拼接起来,如图39所示.在有关方法细节上,两篇文章略有不同,试简单对比如下:(1)分割方法.Calì等人[60]这块是将模型导入Page17Maya中,通过给模型交互式添加骨骼和关节点来完成模型分割点设置,如图40(a)所示;而Bcher等人[61]则通过所给输入蒙皮权重和连接关系,将原始模型面片分割成不同部位,如图40(b)所示,后面还根据碰撞检测、截面大小等因素,结合中轴变换,优化确定关节中心位置与分割结果;(2)关节处理.Calì等人[60]给出了一些通用关节模板,如图41所示.这些模板在考虑关节缝隙公差、摩擦力、关节大小、厚度等因素之后,形成系列化.在此基础上,在连接部位插入通用关节模板,对其变换使其与周边匹配,得到最终关节模型;Bcher等人[61]文献中的关节主要有两种类型:铰链式关节(Hinge)和球状关节(Ball-and-Socket),如图42所示.根据关节的约束与几何信息,利用CSG方法得到关节造型,并与周围面片拼接,最终得到完整模型.文献[60]和文献[61]这两篇文章均是针对有关节的角色模型对象,虽然实现细节略有差异,但都实现了角色关节机构的免组合安装(Non-Assembly),很好地体现了3D打印一体成型的特点和优势,因此,具有很好的应用前景.4.4.4免组装机构传统机械设计时,对机械机构来说,一般都需要两步完成模型构建.首先,创建机构的每一个组成构件,其次,再将所有的组成构件装配起来.3D打印情况下,这一过程可以省去第2步,得到免组装机构.免组装机构是指在零件设计阶段将组成机构的各个零件组装好,然后一次性直接制造出,免去后续组装工序的机构[5].这种机构不仅仅是机构设计概念的创新,在更深的意义上,这种理念的存在极大地解放了机构设计的自由度,因为这样设计者无需考虑装配方式与装配空间,同时也能提升三维机构模型创新能力,为现代机械及一体化设备设计、创新和发明提供系统的基础理论和有效方法.在快速成型领域中,很早就有这方面的研究论文,如文献[62]和文献[63].文献[62]就基于选择性激光融化工艺研究了免组装机构设计有关问题.在文中,作者讨论了免组装机构中数字模型的外形、连接节点的重新设计(图43)及构件打印的支撑问题(图44)等.同时,给出了一些打印实验结果,如图45所示.Page18图45不同最小间隙d下的万向节打印实物[62]4.5自支撑结构设计随着我国城市化水平不断提高,建筑模型的设计造型也越来越受人们的重视.过去,建筑师为了更好地表达设计意图与展示建筑结构,大多都通过手工制作建筑沙盘模型的方式来实现这一目的.随着3D打印技术的逐渐成熟,3D打印制作出的模型更加精美,展示效果更好,同时全程数字化制作其效率也很高,因此,它必将会逐渐取代过去的手工制作方式.近年来,用3D打印来设计验证建筑或结构设计的研究也越来越多,自支撑结构设计便是其中的代表.4.5.1自支撑结构曲面设计大量的世界建筑遗产都是拱石结构(MasonryStructures),这种拱石结构建筑大多是由砖块、石块等材料堆砌而成,具有结构简单、外形优美的特点.它属于只受压力不受拉力的结构体系,同时无需要外部支撑,就可保持平衡.这种结构可称之为自支撑结构.正因为这些特点,这种自支撑式的砖拱结构无论是在古典建筑还是在现代建筑中都有着大量的应用,尤其是在哥特式教堂建筑中,如图46所示.如何在数字世界与真实世界中设计出指定外形的砖拱结构,仍是一个既具有重要价值又具有一定难度的任务.现有方法大多是基于推力网络分析方法(ThrustNetworkAnalysis,TNA)[65]来处理的.这种方法需要有深厚的结构设计知识基础,与大量的人工设计计算工作.在这样的背景下,近年来有一些研究者开始探讨如何利用计算机来处理上述问题,如Panozzo等人[64]、DeGoes等人[66]、Liu等人[67]及Vouga等人[68].上述问题可具体表示为:给定一个曲面,如何能自动快捷地生成一个与其相同或相近的自支撑结构曲面,其结构基本元素为三角形或四边形,如图47所示.上述问题解决方案的基础与核心仍是TNA方法,主要区别在于问题解决过程与优化处理的不同.Panozzo等人[64]在TNA方法的基础上分析了如何布置与分割使得曲面分块间的滑动摩擦力最小,考虑了分块的错缝情况;Liu等人[67]在TNA的基础上引入Regular三角化(Triangulation)方法,给出了两者之间的联系,最后利用Regular三角化方法来参数化生成所需要的自支撑曲面,这种方法可提供一种便捷的参数化方式来交互创建或编辑自支撑曲面,如图48所示;Vouga等人[68]根据TNA给出Page19了一个迭代优化算法,其基本过程包含计算曲面自重荷载、生成逼近曲面、根据几何与平衡条件调整顶点位置,文中还特别考虑了PQMesh类型,如图49所示;DeGoes等人[66]的方法与Vouga等人[68]类似,只不过在其基础上更多地考虑了应力、孔洞及形状等问题的优化处理,如图50所示.图48Regular三角化的自支撑曲面结构[67]图49带孔洞与PQMesh构成的自支撑曲面结构[68]4.5.2RF结构设计自支撑结构中,还有一类RF(ReciprocalFrameStructures)结构也很有价值.这种结构由一些RF单图52RF结构设计流程[69]元互相搭接而成,每一个RF单元与其相邻单元相互支撑,最终整个结构在外围受到外墙、环梁或锚点的支撑而稳定成形,如图51所示.RF结构令人着迷之处在于,它以最简单的杆棒与RF单元为基本单元,却能搭接出一个复杂的网格结构.这种结构空间中部无需支撑,可以形成一个较大空间.同时,它还可以拆散与重新搭接,以便于在不同地点间的转换使用.因此,具有这些特点的RF结构非常适合用于快速搭建临时建筑的一些场合,且成本很低.正因为如此,早在文艺复兴时期,RF结构就已出现并发挥作用.单元数量不多的RF结构设计虽不是一件易事,但还是可以手工设计完成.如果RF结构尺度太大,单元数量过多,这时其空间结构错综零乱,力学关系复杂,设计难度大大提高,手工设计就很难应付了.如何利用计算机的方法来完成复杂RF结构设计,就变得很有必要了,Song等人[69]就对此问题作了一些探讨.针对大尺度复杂的RF结构设计问题,Song等将其分解为两步,即先在2D上构建基本RF单元的组合分布,再通过一个3D导轨面将其提升到3D空间,并在保持几何外形条件下,对杆件的位置优化以提高结构的整体性与稳定性,如图52所示.Page204.6内部结构设计4.6.1编解码嵌入技术编解码嵌入技术可以在产品生产过程中把多种格式的各种信息插入到一个物体内部,使这些产品包含身份信息标记.类似的技术如无线射频识别技术RFID(RadioFrequencyIdentification)和条形码(一维或二维),这些技术都广泛地用于百货公司货架商品上,或者让办公室职员能够通过安防设备进入办公场所.然而,这些技术需要增加一个外部设备.例如,RFID技术需要额外的安全卡片或钥匙;同样,条形码需要通过贴纸标签来使用.另外,它们需要把设备放置在特定的角度并且接近物体,才能进行相应的信息识别.Willis和Wilson[70]在他们的论文中提出了一项在3D打印中把信息嵌入到物体中的技术.这项技术称为InfraStructs,它是将太赫兹(THz)扫描嵌入到3D打印中,在3D加工的过程中可将编码信息隐藏,随后解码成为有效标签信息.InfraStructs引入了太赫兹波与太赫兹扫描成像.太赫兹波介于微波与红外之间,是指频率在0.1THz到10THz范围的电磁波,波长大概在30μm到3000μm范围.它是从20世纪70年代中后期,被正式命名的.太赫兹波与X射线性质相似,可穿透许多常见的材料,如塑料、纸张和布料等.同时,它又较X射线更为低耗、安全.太赫兹扫描成像系统基本组成如图53所示,系统发射太赫兹波,它在物体不同材料表面产生反射,最终再被系统接收.在此基础上,InfraStructs利用3D打印技术来将编码信息嵌入到物体内部,然后可再通过太赫兹扫描成像技术解码恢复,其系统流程如图54所示,可简述如下:(a)编码.将标记信息通过创建物体结构材料变化编码到3D模型中;(b)打印制造.将带有标记信息的3D模型输出打印;(c)太赫兹扫描成像.利用一个太赫兹扫描成像系统对带标记信息的打印模型扫描成像;(d)解码.对所得到太赫兹扫描成像进行处理,得到其中所蕴含的标记信息.系统流程的关键是如何编码,文献[70]中给出了一个一维标记信息编码为8位二进制信息的实例,如图55(a)所示.这个标签结构由两种材料组成,并被一个外壳所包围.其中,一种材料具有高折射率,表示二进制中的“1”信息;另一种低折射率的材料表示“0”信息.太赫兹扫描成像系统垂直扫描这一结构,得到相应的反射信号,如图55(b)所示:扫描信号首先通过外壳材料,由于它遇到一个高折射率材料,因此它返回一个负值波峰信号;然后,它遇到一个低折射率材料,它返回一个正值波峰信号;接下来,随着扫描信号穿透后面各层材料,类似的正负值波峰信号交替出现.因此,完整信号通过这些波峰信息即可转译为二进制形式.通过这种材料及其结构变化方式,二进制标签信息就能简单编码到物体内部.InfraStructs技术开创实现了嵌入与读取3D打印物体内可识别标签的技术.如此一来,3D打印产品不再需要进行电子芯片等信息植入、再加工,直接即可投入生产使用.当然,需要指出的是,这里由于用于读取标签的内部成像技术是采用太赫兹技术,这种技术尚未普及,因此可能会对InfraStructs技术的推广应用略有影响.4.6.2多层模型结构水晶内雕是一种颇为引人注目的工艺品,它是Page21在水晶、玻璃等透明材料内雕刻平面或三维立体图案,如可雕刻2D/3D人像、人名手脚印、奖杯等个性化标志信息,如图56所示.其中,内雕部分对光线具有较强的反射、折射作用,而空白部分对光线具有较好的通透性能,这些因素使得内雕图像呈现出立体逼真、光彩夺目的效果,加上个性化定制信息后,很适合作为礼品或纪念品来赠送、保存和纪念.能否用3D打印来生成上述水晶内雕的效果呢?Holroyd等人[71]受图57所示艺术品的启发,对这一问题作了一些研究,研究结果如图58所示.图57艺术品,制作人:CarolCohen和DustinYellin[71]在图57中,左图是由一层层高清晰的图像堆叠在一起.这启发作者通过多层结构模型来快速打印生成类似效果的物体.因此,问题可具体化为:给定一个3D模型,如何计算其对应的分层模型,以便根据该分层模型,打印得到与所给模型相同或相似外观效果?相对所给模型来说,如果事先已给定每一层的大小、位置和分辨率,那么问题的目标就是需要计算所给模型在每一层上每一点的颜色及透明度.如果模型是体数据,那么可以通过体绘制方法的重采样来解决;如果是曲面信息,问题就要复杂些了.文中分别对这两种情况作了单独介绍.5总结与展望目前,全球正在兴起新一轮数字化、智能化制造浪潮,准备迎接以数字智能化为核心的“第三次工业革命”.而作为“第三次工业革命”的前沿代表技术———3D打印,成功地沟通了数字世界与真实世界之间的联系,将虚拟的数字智能化技术与真实的工业产品联系在一起.当前,中国正处于从“中国制造”向“中国创造”迈进的重要时期,3D打印技术可以让国内的设计师和工程师从产品制造工艺的束缚中解放出来,更加专注于产品本身的智力创造,大跨步进入想法到产品(MindtoProduct)的“所想即所得”全新智造时代.同时,还有无数的创客[72]们以极大的热情推动3D打印应用往前发展,大大拓宽其领域范围,这必将有力推动3D打印及数字化相关技术与研究的发展,当然也包括3D打印中的几何计算问题.本文根据3D打印中的几何计算问题特点,将其分为几何优化、结构分析、材料表面效果定制、机构设计、自支撑结构设计、内部结构设计等六大类,并对每一类作了分类介绍.目前,3D打印的几何计算研究仍处于发展阶段,存在大量有待解决的问题,也是未来这方面的研究重点和可能的发展方向,下面试分别略作介绍.5.1高效便捷的3D建模方法如前所述,3D模型是3D打印的对象与内容.它是3D打印的信息来源,没有它,3D打印就成了无源之水、无本之木.因此,对3D打印来说,如何能让普通用户高效、便捷地获取生成所需要的3D模型,是一个首先需要解决的任务.目前,3D模型的生成方法主要可分为两种:(1)通过专业建模软件如SolidWorks①、Maya、3dsMax和SketchUp等;(2)通过三维扫描设备,如激光扫描仪、结构光扫描仪等扫描后,再后处理生成.第1种方法对普通用户来说,有相当的难度,需要一定的专业技能,尤其是结构复杂的物体.而第2种方法则需要一定的设备支撑,有些设备不是普通用户①SolidWorks[EB/OL].http://www.solidworks.com.cn/.Page22所能承受的.因此,如果能为普通用户提供一个便捷、高效的建模技术与工具,必将大大推动3D打印的普及与应用.这方面已经有一些基于草图或笔划的建模方法的相关研究,效果还不错,如清华大学和以色列特拉维夫大学的研究人员最近开发出一种名为“3-Sweep”的技术[73],可以实现从单张2D照片直接生成3D模型,让3D建模变得像在Photoshop①中建立选区、编辑图像一样简单.美国欧特克公司②也正在让3D建模技术变得越来越便捷,作为全球二维和三维设计、工程及娱乐软件的领导者,它正在做的是让更多不懂设计的人通过软件应用成为“设计师”,发起一场全民建模“设计”的浪潮,来迎接这场3D打印的时代.5.2拓扑优化适用于3D打印的材料通常是为专门的设备配套研发的,这样才能保证材料的物理性质稳定,保证打印的效果.但也正是这样的原因导致专用材料一般小批量生产,缺少规模效益又导致了3D打印耗材价格居高不下.为了节省所使用的材料,大部分的3D打印附带的软件都考虑了节省材料的功能.一个最直接的方法就是将物体“掏空”,即不是打印一个实体模型,而是打印一个只具有薄层厚度的物体.为了增加所打印的物体的硬度,有些3D打印软件会自动在薄层内部填充一些规整的网状结构,比如蜂窝结构.但是,现有的3D打印软件的这个功能都十分有限,不能自动计算掏空物体的薄层厚度以及判断所填充的网状结构的密度,这些都需要用户手工进行设置.若用户设置不合理,要么打印出来的物体不能满足物理要求(比如硬度不够而易碎)或几何要求(比如站立不稳),要么过多使用了打印材料.如何通过几何计算方法来优化3D模型的拓扑结构,使其既能外形上满足需要同时结构功能上也有一个很好的性能.这样,既可以减少打印耗材用量,也能缩短打印时间,同时还减少了设备损耗,达到一举三得的良好效果.近来,关于结构拓扑优化已有多篇文章,如Wang等人[74-76]及Allaire等人[77-78].但如何将这些研究成果运用到3D打印中,仍需要结合3D打印实际需求来考虑,其中还存在很多问题尚待解决.5.3快速打印随着社会生产力的加速发展,企业越来越希望缩短它们从设计到产品交付的时间,这一时间也是企业效率的关键衡量指标.与传统制造技术相比,3D打印技术已使制造时间大为减少.但即使这样,3D打印一个合适大小的物体仍需要一定的耗时,且一般动辄就是十几小时或几十小时,如通过FDM工艺采用普通精度打印一个40cm×30cm×80cm大小的人头模型约需12h,如果采用更高精度,时间还会更长.这无论是对于个人还是企业,时间成本都有些高,尤其是对企业来说,会大大削弱企业的产品竞争力.因此,缩短3D打印的时间,实现产品对象的快速打印的问题,亟需解决.当然,要想大幅度地缩短打印时间,必须要从硬件出发去考虑,改变打印工艺方法,优化打印流程,才能得到较好效果.但是这种方式可能需要付出的代价也非常高.另一种可能的选择是可以从模型出发,通过几何计算方法来实现快速打印.由于对于3D打印来说,打印时间与打印精度成正比,即打印精度越高,所需打印时间越长.因此,如果想要缩短打印时间,一种可行的方法是将模型上一些不重要的部分用低精度,而重要部位用高精度,这样既可缩短打印时间,又不致过于影响模型外观视觉效果,这方面尚存在很多问题值得我们深入探讨研究.
