Page1基于M/MMPP/1节点模型的无线AdHoc网络容量分析韩松1),2)顾国昌1)邓迎春2)1)(哈尔滨工程大学计算机科学与技术学院哈尔滨150001)2)(第二炮兵装备研究院第四研究所北京100085)摘要无线Adhoc网络容量分析目前主要基于Gupta等人的无线干扰模型的方法,该方法得出的是一种节点数趋于无穷大时的渐近网络容量,在实际较小或中等规模网络时,偏差较大.为了克服该方法网络容量分析中的某些不足,提出了一种新的随机分析方法.针对提出的基于MMPP的节点收/发服务模型,根据实测数据及相应算法确定了模型参数;建立节点M/MMPP/1排队模型并将QBD(Quasi-Birth-and-Death)过程应用于Adhoc网络性能分析;进一步运用矩阵几何法进行计算,形成了对Adhoc网络容量完整的随机理论分析和计算.与Gupta的理论结果[1]比较表明:该模型在实际工程中更具有实用性、通用性和适应性.关键词Adhoc网络;容量;M/MMPP/1;QBD过程;矩阵几何法1引言随着网络规模的增大,Adhoc网络性能出现急Page2网络,一般假设网内每个节点具有相同的特性和性能,因此认为各节点的吞吐量相同.由于仅相差“网络节点数”这一常数因子,为简便起见,我们采用Gupta等人[1]的规定,认为Adhoc网络容量指的是每个节点的(吞吐)容量,即节点吞吐量.而根据通信网络的随机分析理论,节点吞吐量定义为单位时间内每个节点向它的下一跳节点传输的比特数.Adhoc网络容量分析可以归纳为三种主要方法[2]:无线干扰模型法、网络信息论法、随机分析方法.Gupta等人[1]提出的无线干扰模型的实质是:对于成功接收,接收机处的信号对干扰和噪声比(SINR)必须大于某个值.而在接收机处,除了本次发送节点传输的数据外,该接收机处收到的其它节点发送的信号皆视为噪声.具体地,该分析法基于计算几何方法中的维拉诺依裂格理论,得出同时穿过某个裂格的最大路由数,即每裂格业务承载量.为使一个分组在一个时隙内在每个裂格中传输而不干扰,进而利用基于碰撞的接收模型和地图染色定理,从每裂格业务和安排的时隙得到每个裂格的传输速率,最后得到网络容量渐近表示式:式中W是网内各节点使用的信道总带宽.该式表示了当节点数n增大时,网络容量趋于减小的渐近程度,其结论是:网络容量随着节点数量的增多而迅速降低.网络信息论分析的基础是割集理论.先通过该理论,在功率受限制情况下,得到从发节点集合到收节点集合的通信速率之和的上边界,进一步得到网络传输容量的信息论表示.从网络容量相对于节点阶数剧减的渐近行为而言,无线干扰模型法和网络信息论法两者分析结果是一致的.但是,两者都有一些不足:无线干扰模型法假设点到点中继网络的情况,这不符合无线信道上通常的点到多点中继网络的实际.它得出的是在网络节点数很大时的网络容量变化趋势,即它给出的是一种渐近容量,是网络容量的理想上限.网络信息论法以关于信道容量的信息论为基础,通过网络节点间的互信息得出网络传输容量.然而,通过网络信息论得到的网络容量偏于抽象表示,得出的结论更多地具有概念上的意义.要通过网络信息论得到具体的速率边界和传输容量,还必须与某种类型无线信道及信号传输特性结合起来.这种方法的复杂之处在于:即使对于广播信道或干扰信道这样简单的情形也还没有严格的网络信息理论容量表示,更不要说对于同时混合了广播、多址、衰减和干扰的复杂无线网络信道了.无线Adhoc网络由多个随机分布在某一地域内的节点构成,每个节点既产生信息又为其它节点存储转发信息,节点内产生的业务与来自其它节点的业务都是随机的,节点的服务也具有随机特性,因此可以采用随机分析方法.该方法是一种基于概率及随机过程的分析方法.目前,应用随机方法分析无线Adhoc网络容量有以下几方面研究:文献[3]对网络中所有节点列出接收状态概率矩阵,通过矩阵计算得出网络中每个时隙里目标节点成功收到的平均分组数,即为网络容量.应用此法的前提是网内每个节点的参数可以求得,另外还假设网内各节点间全连通,即一跳到达,这适合于规模较小的网络.这种方法的困难在于要对整个网络求出接收矩阵和干扰矩阵,这对于大容量节点的全网络范围求解是不容易的.由于某个时刻每个节点的状态只与该时刻前一时刻的状态有关,因此,无线Adhoc网络可以采用Markov链分析方法,该方法是一种最主要的随机分析方法.Markov链分析方法目前有两方面研究:一是将单个节点视为排队系统进行分析[4],简称为节点分析法;二是将多个节点构成排队网络进行分析[5].M/M/1排队模型是节点分析法中最简单的考虑,它将节点假设为生灭过程来分析.它的缺陷在于将适合话音网的M/M/1排队模型假设用于以数据为主的无线Adhoc网络,这种分析方法不能够较好地模拟Adhoc网络业务与服务特性.文献[4]用准生灭过程(Quasi-Birth-and-Deathprocesses,QBD)来对节点建模,与M/M/1过程相比,它的到达率和服务率不再是常数.该文献的工作虽然对节点的服务率和到达率做了更符合实际情况的假设与近似,但对于无线节点的服务过程没有深入分析,也缺乏参数与状态空间的详细描述,还缺少求解具体QBD过程的算法分析.无线Adhoc网络中,每个节点接收来自多个节点的数据分组,它的输出又向多个节点同时广播发送.因而某些节点的输出构成了某个节点的输入业务流的一部分(该节点本身还将产生数据分组).多个节点排队系统构成了互相影响的排队网络.文献[5]对节点间的影响有一些考虑,但是它将节点假设为Page3M/M/1模型的做法又过于简单化.本文将对Adhoc网络容量的节点分析方面做出改进:首先在MAC层分析基础上,建立节点MMPP服务模型;再在确定节点M/MMPP/1模型参数的基础上,建立节点分析的QBD模型;然后通过矩阵几何法解出稳态概率,从而得到网络容量(节点吞吐量).本文第2节将简要描述无线节点的MAC层模型并进行参数分析,这是我们将建立的节点排队模型的前提;第3节将详细叙述Adhoc网络节点排队模型的参数求解及其Markov链模型;第4节将对节点Markov链模型运用矩阵几何法分析,求出网络容量表示式及性能曲线;最后,将Markov链分析结果与无线干扰模型容量分析结果相比较并给出结论.2无线节点的MAC层模型参数分析无线节点的MAC层是影响网络容量的关键因素.通过MAC层竞争机制的分析,得到节点的收发概率参数,它是建立节点排队模型并进行分析的前提.本文的分析是针对基于IEEE802.11DCF协议的MAC层竞争机制.该协议是为了克服无线通信固有的隐终端问题而提出的,它是目前无线Adhoc网络MAC层的常用协议.作为MAC层信道访问控制机制,该协议的核心思想是在发送数据前“握手”,在发送数据后“确认”.此即通常所说的“四握手”机制的核心思想,它对一次完整的数据收发过程做了协议上的规定,从而有效控制了对信道的访问.为了进一步分析方便,假设各节点工作在时隙方式,最小时隙长度为τ.完成一次数据传输所需的控制帧和数据帧———RTS、CTS、DATA、ACK帧都在不同时隙中传递.假设控制帧RTS、CTS、ACK都分别占用一个时隙长度τ,允许数据帧占用时隙长度kτ(k为某个正整数).下面通过对节点分布和MAC层竞争机制的分析,得出节点的收发概率参数.其中重要的是通过对相邻节点共信道干扰区的面积的计算,求得正确接收概率,进而求得节点分析模型所用的其它输入参数.假定网络由一些分布在圆形区域内的静态或准静态节点组成(见图1).对于节点的位置分布,采用二维泊松分布模型[6],即节点按密度σ分布在面积为S的区域内.这样,在面积S内发现i个节点的概率为可以得到下面结果:R内使用一个共享信道的平均节点数M为以上通过节点二维泊松分布及接收范围的假设,确定了某个节点的干扰集,即平均干扰节点数M-1.一个节点准备好发送的概率用ps表示,即该节点在一个有效时隙的开始时发送RTS的概率.某时隙开始时若队列不空且侦听到信道空闲,该节点即可发送.ps为该节点队列不为空的概率及信道空闲的概率之积,为简化起见,将ps假设为初始值.B点正确接收的条件是:两个相邻时隙内发节点A的隐区域(如图2阴影区所示)中没有节点发送RTS(以保证接收节点的CTS成功发出).A向B发RTS时,B中的阴影区构成A的隐区域,该区域中在下一时刻不能有节点发送RTS,以免干扰B向A发CTS.根据图2进行计算,得到隐区域的面积如下[6]:该区域中(1个时隙内)无节点发送RTS的概率为Page4pH(r)=∑连续2个时隙内无节点发送RTS的概率为假定每个发送节点以等概率选择任何一个邻居发送,并且,在一个半径为r的区域内节点数与r2成正比,在节点A和B间隔r时的概率密度函数为f(r)=2r,0<r<1.这里将r对R归一化.这样,就可以计算求得,发节点的隐区域内无节点发送的概率为3节点服务模型对节点进行随机分析以确定网络容量,首先需要建立节点的随机排队模型,一个节点可看成一个单服务员的系统.由于节点吞吐量实际上直接反映为分组在节点中的延迟,因此建立由分组到达以及信道争用等原因导致的接收、发送、等待等状态及状态转换对应的服务模型就至关重要.对于数据业务网络,不能简单地如话音网络的M/M/1排队模型将服务时间假设为指数分布.在排队过程中,系统处于三个工作状态之一:接收、发送、等待.每种状态具有不同的服务时间指数(泊松过程),而到达某个状态的到达率又是受一个连续时间Markov链(CTMC)调制的.我们用一个Markov调制的泊松过程(MMPP)来描述节点服务模型.另外,为简化分析,我们认为业务数据到达的间隔时间是指数分布.这样我们的节点模型为M/MMPP/1.根据我们对Adhoc节点存储转发特性的分析以及实验测试数据显示,MMPP模型可以较好地模拟无线网络节点的服务特性.MMPP过程[7]是一个双随机过程,它的强度是由一个有限状态连续时间Markov链(CTMC)控制的双随机泊松过程.这个过程在能够捕捉到达(服务)时间的相关性的同时,还具有计算上的易处理性,且MMPP过程还具有叠加性.MMPP非常适合对于数据通信过程的建模.我们模拟中等或重度负载的网络节点的工作过程,可认为节点存储器中始终有数据等待发送.因此可建立这个随机过程的状态空间{j=1,2}(j=1,2分别表示接收、发送).每个j状态的服务率是由CTMC调制的,它的生成矩阵为犙MMPP,每个j状态是一个泊松过程,相应有一个服务率μj.可以使用(犙MMPP,Λ)表示MMPP过程.其中,犙MMPP=-σ1σ1σ1是收转发的转移率,σ2是发转收的转移率;μ1是收的服务率,μ2是发的服务率,我们假设μ1>μ2.两状态MMPP的模型如图3所示.我们对MMPP参数犙MMPP和μi求解方法是,先对小规模系统,在小范围时间区间对其中一个节点的工作状态进行实测和记录,然后再通过一定的算法估计出参数犙MMPP和μi.通过节点中嵌入服务率探测软件,测量单位时间内接收、发送的分组数,同时得到实测的服务率曲线.已知参数是:每个分组256个字节,约为2kbits.信道传输速率16kbps.接收和发送分组都很大程度上受该节点干扰半径内包含的节点数影响.实验中,在一定的地域范围内分布有无线节点数22个.我们以10s为一个时间测量单位,假定此时段内节点只能处在收、发两个状态之一(注意:发送或接收状态包含因握手建立或重发等原因导致的接收等待或发送等待).通过每10s为一组测得该单位时间内服务的分组数(总计1200组数据),再利用参数估计算法,从得到的测量数据中,估计出MMPP服务过程的参数.根据实测数据绘出数据分组的服务状态出现率曲线如图4所示.根据实测数据生成MMPP参数的算法如下[8]:步骤1.选择收、发状态的服务率μ1,μ2.有μ2=(μ槡1-2)2,μ1=((1+peak槡)-1)2,证明.使μ1>μ2,被μ1覆盖的数据的下边界是μ1-2μ槡1,它是被μ2覆盖的数据的上边界,因此,μ1-2μ槡1=μ2+2μ槡2.即μ2=(μ槡1-2)2.其中,peak为状态出现率曲线的数据峰值.Page5再来看初始状态μ1.因为需要μ1覆盖状态出现率曲线的数据峰值(peak),因此选择μ1使μ1+2μ槡1=peak.即通过实测peak=20,得μ1=12.838,μ2=2.506.步骤2.对离散时间MMPP确定转移矩阵犘.对10s间隔的量化区间的观测值xk(它的相位k)进行量化确定相位状态j(j=1,2):μj-2μ槡j<xkμj+2μ槡jk=j.结合上面计算得到的μ1和μ2值,则在一个10s间隔内,收发分组数xk在5.672~20.004区间内时,认为该次处于收状态;当xk在0.660~5.749区间内时,认为该次处于发状态.通过对探测软件记录数据计算得到:收转发的转移概率p12=0.158,保持收状态的概率p11=0.842,发转收的转移概率p21=0.176,保持发状态的概率p22=0.824.步骤3.从离散时间MMPP的犘矩阵得出连续时间MMPP的犙MMPP矩阵:由上计算数据得出,σ1=q12=p12=0.158,σ2=对于MMPP(犙,Λ),需要求出的一个主要性能q21=p21=0.176.指标是平均服务率μavg:证明.服务完成时刻嵌入式Markov链(EMC)的转移概率矩阵是它具有稳态分布:使得π=π犘.这里,(π1,π2)也是最后收和发服务的概率.如果在节点处理器提供的前n个分组服务中,有m(n)个未发分组数,则设完成前n个分组服务所用的时间为T,设节点处理器的收服务率为μ1,发服务率为μ2.用S1,S2,…表示由节点处理器服务的分组收发时间序列(占用时长),且使Ωn={i:in且Si是发分组序列},则m(n)=|Ωn|,并且T单位时长内所有收分组所占的时长为且有T=T1+T2.平均服务率定义为μavg=limn→μavg=limn→=limn→μ1∑iΩn=limn→μ1∑iΩn=μ1limn→=μ1limn→=μ1π1+μ2π2=μ1p21=μ1σ24节点排队模型前面说过,每个节点看成是单个服务员排队系统,它完成数据收、发及路由等处理功能.前面服务模型考虑的是节点内部数据收发及等待的处理过程,作为排队模型还应当考虑业务到达过程和服务员数.从节点分析角度,为简化分析,我们建立节点Page6的M/MMPP/1排队模型.为了分析节点的吞吐量,需要得出该节点对于各种排队长度下的稳态概率.因此,我们在确定M/MMPP/1模型参数的基础上,对节点分析建立QBD模型[9-10].用一个两维数组(i,j)表示此排队系统的状态变量:i表示任意时刻的队列长度(i=0,1,2…),j表示任意时刻服务器的状态(相位)(j=1,2,分别表示接收、发送).图5状态转移图状态转移图进一步合并为图6状态转移率(犙)矩阵犙矩阵转化为有如下关系:B0=-λ·ph,犅2=(λ·ph,0),犅1=0犃1=-(λ·ph·p11+μ1·p12+σ1)σ1烄烆这是一个QBD过程,其中,λ为分组到达率,能够被正确接收的概率为λphp11,即生率.μ1p12为(i,j)→(i+1,j+1)的转移率(分组数增加1个,状态由收转发).μ2p21为(i+1,j+1)→(i,j)的转移率(分组数减少1个,状态由发转收).μ2p22为(i,j)→(i-1,j)的转移率,即灭率.状态转移图表示如图5.状态转移率(犙)矩阵如图6.μ2·p21μ2·p(犃2=00根据上一节求出犅0、犅1、犅2、犃0、犃1、犃2后,可求解QBD过程的占有分布、吞吐量、延时等性能.我们将节点存储器中分组数的稳态概率分布表示为按照Neut的理论[9],有以下稳态概率表示式根据全局平衡方程,以及Page7(犲为单位向量)得到以下结果:式(12)仅当π1=0或括号中项为零时才成立,由于π1≠0,因此后者需为零,进而得到矩阵犚:求解犚的算法如下:(1)假设初始条件犚(0)=0,得到下一个猜测值犚(1)=犃0犃-11;(2)假设犃-11存在,迭代计算:犚(k+1)=-(犚2(k)犃2+犃0)犃-11,k=1,2,….(3)当犚(k+1)-犚(k)<ε时,犚(k+1)已足够近似犚,迭代停止.在我们的计算中,取ε=1E-8.求得犚之后,还需要求解边界向量π0,π1.从全局方程中可以得出为得到唯一解,再利用式(11)得∑i=0求出犚以及边界向量π0,π1,就可以得到节点队列中的数据分组数.E[N]表示节点中(队列中和在接受服务)的平均分组数:据此可进一步求得吞吐量与干扰范围内节点数的关系(见表1).5QBD过程的数值分析开始矩阵几何法解QBD过程前,除前面测得和估值数据σ1,σ2,μ1,μ2,p12,p21之外,还需设定输入参数值ph,λ.假设当分组时隙数为k=37,节点周围邻居数N=10,在一个时隙开始发送概率ps=0.5时,利用前面公式计算得ph=0.0248.另外令到达率λ=10分组/10s.根据上述输入参数,求得犅0,犅1,犅2,犃0,犃1,犃2如下:犅0=-0.248,犅2=(0.248,0),犅1=0()2.506,犃1=-2.3950.158犃2=00(运用前述求犚的算法得到犚及边界向量π0,π1为从而得到队列中平均分组数为E[N]=1.611.根据前述计算得平均服务率μavg=7.95.当假设ps=0.5、λ=10分组/10s、每个数据分组大小为37个时隙时,计算得到节点吞吐量(Th)与该节点的干扰范围内节点数N的关系结果如表1所示,得到吞吐量与N关系曲线如图7所示.表1节点吞吐量与其干扰范围内节点数的关系Nph40.11420.44681.1928(100.02480.18290.8927(200.00620.10590.8301(300.00270.09020.8183(509.3493e-40.08200.8123(从图中可以看出,在某个节点的共用信道干扰区域内节点数大于10时,网络容量迅速降低.Gupta等人所做的Adhoc网络容量分析的主要结论即是在网络节点数增大时网络容量急剧下降.他们的分析是网络容量在节点数N趋向无限大时的渐近性结果,它给出了网络容量的上限.而随机网络容量分析给出了网络容量的统计平均结果,因而更接近实际情况.我们的随机分析在印证Gupta等人结果的同时,由于可对多个参数进行调整,便于观察对网络容量产生影响的因素,对于进一步提出改进网络容量的措施更具有指导意义.另外,随机分析方法很容易给出吞吐量与延时及传输可靠性之间的关系,而且Page8对于网络规模中等或较大时的结果更为准确.此外,使用随机分析法还易于进行交叉层间分析,层间交叉影响也是无线Adhoc网络区别于基于有线网络排队分析的地方.6结论基于无线干扰模型的网络容量分析方法不适合分析点到多点中继情况,网络信息论在用割集理论分析MIMO多跳中继方面也遇到困难.两者都侧重研究网络容量在节点数趋于极大时的渐近特性.实际中常常还需要研究网络在中等或较大规模时的容量特性;对于随机网络更适合研究其网络容量的统计平均特性,这也需要使用网络容量的随机分析方法.目前看来,节点排队模型分析法是比较接近网络实际而又可行的方法.由于Adhoc网络以数据为主的业务特性,不同于传统排队论方法,节点分析应当运用基于准生灭过程模型的现代排队论方法.网络容量的随机分析方法还有待进一步深入研究.通过与无线干扰模型分析结果的比较表明:本方法由于考虑了业务在多跳中间节点传输时的多入及多出特性,更符合网络业务的实际情况,具有更好的通用性和更广泛的适应性.我们这里以对节点服务特性建模为主,研究了收发处理及信道争用产生延迟影响下的网络的容量.当然,随机分析法需要将业务产生模式与节点收发及处理模式结合考虑,还要将节点的排队分析与排队网络分析结合考虑.对于以数据突发为主的网络,业务到达常常不具有泊松性质并有很大的相似性,我们下一步将研究基于MMPP到达的业务模式,将在建立节点MMPP/MMPP/1模型的基础上研究网络的容量,并进一步以这种节点模型为基础,进行排队网络性能分析.BackgroundCapacityisoneofcurrentmaininterestsofwirelessAdhocnetworks.Therearethreekindsofcapacityanalysis
