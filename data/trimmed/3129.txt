Page1考虑软件不同失效过程偏差的软件可靠性模型楼俊钢江建慧靳昂(同济大学计算机科学与技术系上海201804)摘要软件可靠性分析是根据软件失效数据等信息,通过合理建模来对软件可靠性进行预计和评价.现有的基于随机过程的可靠性模型一般采用均值过程来描述软件失效数据,然而,软件失效数据的模型化实质上应该是使其成为某个随机过程的一个样本轨迹.文中建立了考虑软件不同失效过程偏差的软件可靠性模型,用NHPP过程表示失效过程均值函数的变化趋势,ARMA过程表示实际失效过程对均值过程的偏差序列.在两组公开发表的真实数据集上对模型的实验表明,新模型较之一些广泛使用的NHPP软件可靠性模型在拟合能力及适用性上有明显的提高,并且保持了较好的预测能力.关键词软件可靠性模型;样本轨迹;非齐次泊松过程模型;随机过程;自回归滑动平均过程1引言随着软件规模的不断扩大、结构和功能的日益复杂,软件质量越来越受到人们的重视.软件可靠性是衡量软件质量最重要的指标之一,它指的是在规定条件下,在规定时间内,软件不发生失效的概率.软件可靠性模型是软件可靠性研究中倍受关注、非常活跃的一个领域.从Hudson的工作开始,到1971年Jelinski-Moranda(J-M)模型的发表以来,Page2目前已公开发表了200种以上的模型[1-2].它们不仅是对软件可靠性进行预计、分配、分析与评价的强有力工具,更为软件可靠性设计提供了指南.软件可靠性模型的研究旨在根据软件可靠性数据,以统计方法等给出软件的可靠性估计值或预测值.随机过程模型[3-5]是软件可靠性模型中最重要的一类,也是在当前软件可靠性模型领域研究最多、应用最广泛的一类.这类模型结构简单,在很多应用中都有良好的表现.随机过程可以描述软件在时间t以前发生的失效数随时间变化的随机行为,或者描述软件发生失效时间的随机性.随机过程模型的主要优点在于其模型的简单性,易于理解和实施.按照到时刻t的发生失效次数服从的分布,主要分为泊松过程模型和二项式模型等.其中,非齐次泊松过程(NonhomogeneousPoissonProcess,NHPP)模型是应用最广泛的随机过程模型[6-14],它用一个计数过程{Nt,t∈T}表示到时刻t为止检测到的软件失效累计数.如果失效累计数的均值函数用m(t)表示,则一个基于NHPP过程的软件可靠性模型的一般形式为P{m(ti+1)-m(ti)=n}=随机过程软件可靠性模型赖以生存的根本是程序错误行为的不确定性,由于无法事先知道程序对于每一个可能输入的行为表现以及难以准确地预计程序将来的输入情况,软件故障过程确实是随机的.传统的基于随机过程的软件可靠性模型总是假定软件失效过程应该用不同的衰减曲线描述,比如指数衰减型、S型、威布尔型、倒线性型、几何衰减型[1-2]等.这些变化规律是从传统可靠性理论借鉴过来的,一件实体产品,譬如汽车、机床、晶体管等,受温度、湿度、磨损及老化的作用,它的故障强度曲线会按这些规律变化.然而计算机软件产品有其自身的特点,其失效行为比起实体产品来要复杂得多.首先,软件失效是动态的,它一定要与人、计算机等交互作用;其次,软件失效的影响因素更多,如测试工具、测试人员的思路、风格及经验、不完全排错、计算机环境因素、支撑系统(如操作系统、编译程序、数据库等),计算机的载荷、数据精度、数据记录误差等.软件失效行为的特殊性和复杂性使得使用单一的软件失效过程衰减曲线不可能达到很高的精度,而只能碰运气,这些模型只是偶尔非常精确,换一个环境,或者应用到别的工程项目时,其精度就不能满足要求了.如当某一软件工程项目的失效过程碰巧是指数型的或是几何衰减型时,它们的精度显得很好,一旦换一个项目,当它的失效过程不按这些规律变化时,这些模型的精度就很糟糕[12].造成传统随机过程模型精度不高、适应性不好的原因主要有以下两点:(1)研究人员永远无法预先得到关于程序的全部信息,因此,可靠性问题中的统计成分往往不能仅用单一的统计分布函数来描述,并且随着软件项目的变化,随机过程模型对软件故障的属性和软件失效过程所做出的许多先验假设不会永远准确;(2)软件可靠性失效过程一般来说具有不可复制性,即使是同一软件系统,在不同的测试条件、使用环境下也会出现不同的失效过程,而可靠性建模时所采用的软件可靠性失效时间或者失效间隔数据实际上仅仅是软件失效过程的一个样本轨迹.这些问题的存在使得随机过程可靠性模型在描述不同程序的失效过程时会产生一定的偏差,而传统的随机过程可靠性模型恰恰忽略了这些偏差.为解决模型适用性差的问题,研究人员将他们的精力主要集中在以下几个方面:(1)模型选择.每一个模型都有它自己的特性,每一个软件工程项目也有它自己的特性,问题是如何选择一个模型使之适合某个具体的软件工程项目.(2)模型组合.既然每一个模型都有它自己的特点,那就有可能在某个具体软件工程项目上应用多个模型,让它们互相补充,综合分析它们的计算结果,以形成混合模型.(3)采用新的数学方法建模,如相关向量机[14]、贝叶斯统计学[15-17]、神经网络[18-20]、未确知理论[21]、支持向量机[22]、混沌理论[23]等.本文没有遵循上述思路,而是另僻蹊径,通过数据预处理的方法来弥补传统可靠性模型与实际软件失效过程存在的偏差,作者建议在经典随机过程模型的基础上,辅助一个补偿随机过程,用两个互补的随机过程来为软件故障行为建模,新模型由两部分组成:Yt=Mt+Xt,其中,Mt反映了失效过程均值函数的变化趋势,Xt为一时间序列,表示实际失效过程对均值过程的偏差序列.由随机函数的分解以及复合叠加定理[12],如果给定随机函数{U(t)}和{N(t)},则总存在{N(t)}的一个补函数{X(t)},使得{U(t)}可以分解成{N(t)}与{(X(t)}的复合叠加的形式.因此从理论上来说,将软件的动态失效行为分解成两个随机函数复合叠加是可行的;在两组公开发表的数据集上的实验结果表明,新模型较之一些广泛使用的NHPP模型在拟和能力及适用性上Page3有明显的提高,并且保持了较好的预测能力.2相关概念定义1.定义在T上的函数{X·(ω),ω∈Ω}称为随机过程{Xt,t∈T}的样本轨迹(也可称为现实).X·(ω)又称为时间序列.时间序列既可以表示随机过程本身,也可以表示随机过程的一个样本轨迹,本文所指的时间序列表示后者.定义2.如果时间序列{Xt,t∈T}对每个t∈T,有Var(Xt)<,则{Xt}的自协方差函数γX(·,·)定义为γX(r,s)=E[(Xr-EXs)(Xs-EXr)],r,s∈T.定义3.时间序列{Xt,t∈T}为平稳时间序(i)E|Xt|2<,t∈T,(ii)EXt=EXs,t,s∈T,(iii)γX(r,s)=γX(r+t,s+t),r,s,t∈T.定义4.如果过程{Zt}的均值为零、自协方差列,如果有函数为γ(h)=σ2,h=0值、方差为σ2的白噪声,记为{Zt}~WN(0,σ2).定义5.过程{Xt,t∈T}称为自回归滑动平均过程(AutoRegressiveMovingAverageProcess,ARMA),表示为ARMA(p,q),如果{Xt}是平稳过程,且对任意t,有Xt-1Xt-1-…-pXt-p=Zt+θ1Zt-1+…+θqZt-q.上式可简记为(B)Xt=θ(B)Zt,t∈T,其中,(·)和θ(·)分别称为p次自回归多项式和q次活动平均多项式:定义6.如果θ(z)≡1,则称Xt=θ(B)Zt为定义7.如果(z)≡1,则称(B)Xt=Zt为B定义为BjXt=Xt-j,j=0,1,2,….p阶自回归过程,记作AR(p).q阶滑动平均过程,记作MA(q).3模型的实现虽然经典的随机过程模型不能完全刻画软件的失效行为,但它有着雄厚的理论及实践根基,有很多合理成分还不能被其他理论所替代,例如,从随机过程软件可靠性模型中能够导出软件可靠度以外的许多其他度量值.迄今为止,NHPP类软件可靠性增长模型是目前应用最广、影响最大的一类模型,这类模型依然是拟合效果最好、结构和应用最简单的随机过程模型,并且已经成为软件可靠性工程实践活动中很成功的工具.目前软件可靠性模型研究当中很重要的一部分工作是对NHPP类软件可靠性模型的完善.因此,在本文所提出的模型中,Mt采用了均值函数为m(t)的NHPP过程.假设软件累计失效数的总体分布为服从均值函数m(t)的NHPP过程,序列{m1,m2,…,mn}和{y1,y2,…,yn}分别表示时间点{t1,t2,…,tn}的失效期望数和实际累计失效数.那么,{y1,y2,…,yn}可以看作总体分布的一个样本序列,{y1-m1,y2-m2,…,yn-mn}为时间{t1,t2,…,tn}的一个偏差时间序列,即为新模型的Xt部分.由中心极限定理可知,样本均值的数学期望总是等于总体的均值,因此,当n足够大时,序列{y1,y2,…,yn}均值的数学期望与序列{m1,m2,…,mn}的均值相等,{y1-m1,y2-m2,…,yn-mn}的值围绕着零上下波动,这种波动的上下部分之和渐渐趋于相等.在数据的平稳性检查通过后,Xt可以看作为均值为零的平稳时间序列,使用ARMA(p,q)过程可以对偏差过程Yt有更加精确的估计.用平稳过程模型来描述上述偏差序列的好处是可以展示在一定时期内的变动过程,从中寻找和分析偏差的变化特征、发展趋势和规律,反映偏差这一变量受其它各种因素影响的总结果,并通过处理时间序列数据获得它随时间的演变特性与规律.模型实现的步骤如下.1.根据软件累计失效数据,用极大似然法求出均值函数m(t)的参数估计值,求得m(t)的估计函数m^(t),计算{t1,t2,…,tn}时的期望累计失效数估计值{m^1,m^2,…,m^n};2.用实际累计失效序列{y1,y2,…,yn}减去{m^1,m^2,…,3.对{x1,x2,…,xn}进行平稳性检验,选择ARMA(p,q)m^n}作为Xt在{t1,t2,…,tn}时的观测值{x1,x2,…,xn};过程的阶p和q,并估计模型的参数值;4.由步1和步3,可以得到接下来时间软件失效期望次数估计值m^n+m及偏差估计值x^n+m,则接下来时间软件实际失效次数估计值为y^n+m=m^n+m+x^n+m.3.1用ARMA模型进行预测预测即依靠时间{t1,t2,…,tn}的观测值{x1,x2,…,xn}来预测tn+m(m=1,2,3,…)时的软件累Page4计失效次数估计值x^t+m.预测算法.设{Xt,t∈T}是均值为零、自协方差函数为κ(i,j)=E(XiXj)的随机过程,如果对一切n=1,2,…,协方差矩阵[κ(i,j)]n(Xn-1-X^n+1)2,则X^n+1(n1)可用下式递归计算:X^n+1=ν0=κ(1,1)烄θn,n-k=ν-1k(κ(n+1,k+1)-∑n烅νn=κ(n+1,n+1)-∑n烆其中,k=0,1,…,n-1.递归顺序为ν0,θ11,ν1,θ22,θ21,ν2,θ33,θ31,ν3,….投影定理[24].如果是Hilbert空间的一个(1)存在唯一元素x^∈,使得x-x^=闭线性子空间,且x∈,那么infy∈x-y.空间,P是到闭线性子空间的投影映射,那么βPy;(2)x^∈且x-x^=infy∈x-y成立的充分必要条件是x^∈且x^-x∈⊥(称x^为x在上的正交投影).命题1(投影映射的性质)[24].设是Hilbert(1)x,y∈,α,β∈C,P(αx+βy)=αPx+(2)x2=Px2+(1-P)x2;(3)x∈,存在唯一的正交分解x=Px+(4)如果当n→时,xn-x→0,则当n→(5)x∈Px=x;(6)x∈⊥Px=0;(7)12x∈,P1P2x=P1x.预测算法证明.由X^j的定义知,当i<j时,有时,Pxn→Px;(1-P)x;故是正交集.设0kn,以Xk+1-X^k+1两端取内积得〈X^n+1,Xk+1-X^k+1〉=〈∑n-1θn,n-j(Xj+1-X^j+1),Xk+1-X^k+1〉=θn,n-kvk注意到j=0X^n+1-X^n(故有在式(1)中令k=n,有θn.n-k=v-1k(κ(n+1,k+1)-∑k-1又由式(3)以及下式〈Xn+1,Xj+1-X^j+1〉=Vjθn,n-j,0j<n,式(4)可以表示为θn.n-k=v-1k(κ(n+1,k+1)-∑k-1由投影定理和命题1可得vn=Xn+1-X^n+12+Xn+12-X^n+12从而式(2)得证.3.2ARMA模型的参数估计ARMA(p,q)模型参数的估计指根据计算得到的偏差数据观测值序列{x1,x2,…,xn}和选定的阶p和q的值,对均值、自回归系数和滑动平均系数{φi,θj}(i=1,2,…,p,j=1,2,…,q)及白噪声方差σ2的估计.观测值序列{x1,x2,…,xn}的高斯似然函数为L(,θ,σ2)=(2πσ)-n/2(r0,…,rn-1)-1/2·其中,求L(,θ,σ2)对σ2的偏导数,可得极大似然估计^,θ^,σ^2,满足σ^2=n-1∑n是最小化的和θ的估计:l(,θ)=lnn-1∑n对任意给定的一对参数向量,可利用预测算法递归计算θi-1,ri-1,X^i,使l(,θ)最小的,θ的值即Page5是,θ的极大似然估计,再根据式(5)计算σ2的极大似然估计.4实验比较为检验本文所提出的建模思路的有效性,并验证所建立软件可靠性模型的拟合能力及预测能力,我们使用均值函数分别为at2+bt+c和a(1-e-bt)的表1用于实验比较的NHPP模型及其均值函数4.1数据集及比较标准4.1.1数据集评估模型使用的数据集见表2和表3,它们是从实际工程项目中收集来的,经过分析和整理,精度高,专门为比较、验证和评价软件可靠性模型而设计.时间/week软件累计失效数时间/week软件累计失效数12345678910时间/week软件累计失效数时间/week软件累计失效数12345678910我们使用的数据集1来自于Ohba的论文[29],收集于一个PL/L数据库应用系统,代码行数大约为NHPP过程(分别记为M1、M2)与ARMA(2,2)、ARMA(4,0)、ARMA(0,4)过程两两组合的新模型,并与G-Omodel[1-2]、YamadaDelayedS-Shaped[25]、SRGMWithLogisticTEF[26]、SRGMWithRayleighTEF[27]、DelayedS-ShapedModelWithLogisticTEF[28]、DelayedS-ShapedModelWithRayleighTEF[28]等6个使用广泛的模型进行了拟合能力、预测能力的比较.用于比较模型的均值函数见表1.a(1-e-bt)a(1-(1+bt)e-bt)a(1-e-bNa(1-e-b(N×(1-e-ctm)))a(1-(1+ebNa(1-(1+b(N×(1-e-ctm)))e-b(N×(1-e-ctm)))1317000LOC.测试时间为19周,共发生了328次失效.虽然数据集比较陈旧,但便于将我们的工作与以往软件可靠性模型研究人员的工作进行直接比较.数据集2来自于Wood[30]收集于Tandem公司4个独立软件版本的第1个,代码行数约为1317000LOC.测试时间为20周,共发生了100次失效.4.1.2比较标准(1)曲线拟合能力模型的拟合能力使用误差平方和(MeanSquareoffittingError,MSE)[28]及预测误差(PredictedError,PE)[31]度量:其中,n表示失效数据集中失效样本的数量,y^i表示到ti时刻为止故障累计数的估算值,yi表示到ti时刻为止故障累计数的实测值.MSE的值越小,曲线拟合得越好,PEi的值越小,曲线拟合得也越好.(2)模型预测能力采用相对误差(RelativeError,RE)来评价模型预测能力[1],定义为RE=m(tq)-q假设在软件测试结束时观测到q个软件失效,使用失效数据ta(tatn)估测软件可靠性模型均值函数的参数,然后将这些参数值代入到模型中,可以得到软件测试结束时间tn的累积失效数的估计值,Page6得到的估计值与实际值进行比较.RE值越小,说明预测能力越好.4.2偏差数据的平稳性检验应用ARMA模型,首先需要对数据的平稳性进行检查.数据序列平稳的特征为:样本序列的自相关函数在某一固定水平线附近摆动,即方差和数学期望稳定为常数.样本序列的自相关函数只是时间间隔的函数,与时间起点无关,一般可以用自相关分图14个偏差样本序列上的自相关分析图4.3模型性能分析4.3.1数据集1表4为新模型在数据集1和2上ARMA部分的参数估计值,表5列出了模型在NHPP部分的极大似然估计值,包括新模型和用于比较的6个表4ARMA的参数估计M1+ARMA(2,2)1=1.00,2=0.202,θ1=-0.475,θ2=0.4721=0.439,2=-0.095,θ1=-0.537,θ2=-0.214M1+ARMA(4,0)1=0.800,2=-0.574,θ1=0.532,θ2=-0.5271=-0.946,2=0.373,θ1=0.196,θ2=-0.272M1+ARMA(0,4)θ1=-1.09,θ2=-0.264,θ3=-0.179,θ4=-0.489θ1=-1.01,θ2=-0.506,θ3=-0.043,θ4=0.121M2+ARMA(2,2)1=0.471,2=0.180,θ1=-0.452,θ2=0.1181=1.781,2=-0.913,θ1=0.650,θ2=0.287M2+ARMA(4,0)1=0.986,2=-0.464,θ1=0.585,θ2=-0.3941=1.206,2=-0.397,θ1=0.237,θ2=0.341M2+ARMA(0,4)θ1=-1.11,θ2=-0.446,θ3=-0.410,θ4=-0.581θ1=-1.34,θ2=-1.10,θ3=-0.536,θ4=-0.09表5数据集1上模型的比较a=395.57,b=4.16×10-2SRGMWithLogisticTEFa=459.09,b=2.73×10-2SRGMWithRayleighTEFa=339.96,b=1.21×10-1DelayedS-ShapedModelWithLogisticTEFDelayedS-ShapedModelWithRayleighTEFa=333.18,b=1.00×10-1a=513.15,b=5.37×10-2G-Omodel析图来判别数据序列的平稳性.图1(a)~(d)为数据集1和2上采用M1和M2模型的估计值与实际值的差值得到的4个样本序列.从图中可以看出,样本序列数据的自相关系数均在某一固定水平线附近摆动,且按周期性逐渐衰减,所以这些时间序列基本上都是平稳的,可以用平稳过程模型模拟.NHPP模型.此外,表5还列出了各模型应用于数据集1上所得的MSE值和RE值.LogisticTEF和RayleighTEF的另外几个参数的极大似然估计值分别为N=54.84,A=13.03,α=0.226,N=49.32,c=0.0137.参数估计值Page7a=-0.4474,b=27.2681,c=-14.5666a=-0.4474,b=27.2681,c=-14.5666从表5中可以看出,新模型的MSE值要好于用于比较的6个模型,而RE值的数量级为10-4~10-3之间,比新模型表现更好的模型有DelayedS-ShapedModelWithLogisticTEF和G-O模型,其它4个模型的RE值要稍差些.图2描述了各模型在数据集1上的PE值.从表6数据集2上模型的比较a=107.66,b=2.66×10-4SRGMWithLogisticTEFa=110.61,b=2.66×10-4SRGMWithRayleighTEFDelayedS-ShapedModelWithLogisticTEFa=101.86,b=6.35×10-4DelayedS-ShapedModelWithRayleighTEFa=102.14,b=5.78×10-4a=112.48,b=1.20×10-1G-Omodela=102.26,b=3.45×10-1YamadaDelayedS-ShapedM1+ARMA(2,2)M1+ARMA(4,0)M1+ARMA(0,4)M2+ARMA(2,2)M2+ARMA(4,0)M2+ARMA(0,4)a=112.48,b=-0.120a=112.48,b=-0.120a=112.48,b=-0.120图中可以看出,我们的模型更加贴近于中间线,这说明新模型的拟合能力要优于其它各模型.4.3.2数据集2表6中列出了模型在NHPP部分的极大似然估计值,包括新模型和用于比较的6个NHHP模型.此外,表6还列出了各模型应用于数据集2上所得的MSE值和RE值.Logistic和RayleighTEF的另外几个参数的极大似然估计值分别为N=10505,A=15.24,α=0.285,N=10534,c=0.0149.从表6中可以看出,新模型在MSE值上的表现要好于其它模型,而RE值的数量级在10-4~10-3之间,排在DelayedS-ShapedModelWithLogisticTEF和DelayedS-ShapedModelWithRayleighTEF之后,但好于其它4个模型.图3描述了各模型在数据集2上的PE值.从图中可以看出,所提出的新模型更加贴近于中间线,这说明模型的拟合能力要好于其它各模型.参数估计值使用数据集1和数据集2,经过上述比较过程可以得出以下结论:(1)新模型的拟合能力要好于其它模型,这在数据集2上表现得尤为明显,并且新模型对两组不同特性的失效数据都有较好的适用性;(2)在预测能力上,新模型排名也比较靠前.总体来说,考虑样本与均值的差别对提高软件可靠性模型的拟合能力和预测能力都是有益的,值得进行更加深入的研究.Page85总结本文通过实验说明新模型的拟合能力要好于其它模型,这在数据集2上表现得尤为明显,而且新模型对两组不同特性的失效数据都有较好的适用性;从理论上看,由于新模型不对软件失效强度变化作任何统计规律的假定,因此,它能改善软件可靠性模型的适应性,提高模型的拟合能力.在许多NHPP类模型与其它随机过程可靠性模型的比较中已经说明,NHPP类模型在拟合效果、结构和应用方面具有优势.因此,我们可以认定本文中所选择的模型有代表意义,新模型与其它的随机过程模型相比,依然可以取得类似的结果.值得说明的是,本文所提出的方法不是为了从根本上解决造成传统随机过程模型精度不高、适应性不强的问题,而是通过数据预处理来弥补传统可靠性模型与实际软件失效过程存在的偏差.在经典随机过程模型的基础上,辅助一个补偿随机过程,用两个互补的随机过程来为软件故障行为建模.首先通过拟合得到了失效期望值,然后用自回归滑动平均过程进行了误差的控制,利用自回归滑动平均过程的调节作用,提高了模型的拟合能力和预测能力.下一步的工作包括:采用除NHPP类之外的随机过程模型在更多数据集上对新模型的适用性进行验证;研究如何更加精确地描述传统可靠性模型与实际软件失效过程存在的偏差,以进一步提高模型的预测能力.
