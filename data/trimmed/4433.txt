Page1面向异构无线网移动视频传输的联合信源信道编码方式吴冀衍程渤南国顺陈俊亮(北京邮电大学网络与交换技术国家重点实验室北京100876)摘要文中针对异构无线网环境下端到端移动视频传输问题,提出一种新的联合信源信道编码方式DRA-JSCC.现有的联合信源信道编码(JSCC)方式的主要问题是将服务器与客户端之间的网络视为单一的传输链路.在异构无线网环境下该问题更为复杂,因为通信终端之间存在多个可用的无线接入网络,如果在并发传输过程中选择不可靠的传输链路会严重降低视频质量.为了解决上述问题,文中提出一种基于动态速率分配(DynamicRateAssignment)的联合信源信道编码方式(DRA-JSCC),该方法包含3个主要步骤:(1)根据视频应用可容忍的传输丢失率调整前向纠错编码的冗余度;(2)基于端到端传输的延迟上限调整视频编码速率;(3)进行动态视频流多路径分配使端到端的视频失真最小化.文中构建了JSCC方法在多个无线链路并发传输场景的端到端视频失真优化问题,并且对视频信源以及信道失真进行了综合分析.在仿真平台Exata上使用H.264实时视频流进行的实验表明,DRA-JSCC相对于现有方法能有效提高视频峰值信噪比(PeakSignal-to-NoiseRatio,PSNR)以及降低端到端延迟.关键词异构无线网;移动视频传输;联合信源信道编码;动态速率分配;移动互联网1引言近年来,移动视频服务(例如体育节目直播、移动视频会议[1]、多人在线游戏等)已经成为最热门的流媒体应用之一[2],移动互联网的视频流量也呈现飞速增长的趋势.根据CiscoVisualIndex[3]报告,视频流量占2012年全球移动数据总量的57%,而在2017年预计达到69%.在2012年至2017年期间,全球移动数据总量预计增长13倍.并且,高清视频流量已在2012年底超过标清视频流量,并将在2016年占据79%的视频总流量.因此,在无线网络环境下保障高清视频流[4]的可靠传输是服务提供商所面临的严峻问题.尽管无线网基础设施的迅速发展已经给用户提供了多种接入互联网的途径(例如3G蜂窝网络、WLAN以及WiMAX),但由于单一无线网络的传输性能限制,提供高质量的移动视频流服务仍面临严峻挑战.目前的WLAN(802.11系列)由于其覆盖范围小、带宽相对受限,在移动用户数量高速增长的趋势下难以提供令人满意的移动视频服务[5];同时,WLAN在用户移动场景下带宽波动问题十分严重.另一方面,蜂窝网络,例如UMTS以及HSDPA等,可以更好地支持用户移动性,但蜂窝网络的实际可用带宽通常不足以支持要求高吞吐量、低延迟的视频流数据传输.尽管4GLTE和WiMAX可以提供更高的峰值传输速率和更广的网络覆盖范围,但是在大量用户共享带宽情况下,对于实时多媒体通信(例如高清视频传输)的高吞吐量要求,带宽限制问题同样十分严重[6].单一无线网络的性能限制使得近年来研究重点逐渐转向异构无线网络之间的带宽整合.整合异构无线网带宽需要移动终端具备多接入功能,即配备多个无线接口(例如3G,WLAN,WiMAX等),目前已有该类多接入移动设备投入实际应用①,而研究移动IPV6的IETFMONNAMI6工作组已经肯定了多接入设备对于用户以及网络运营商的益处[7].因此,异构无线网的带宽整合近年来得到了广泛的关注,并且已有研究人员提出有效的带宽整合算法,例如文献[8-10].但是,该类算法的主要问题是未综合考虑无线信道的带宽波动、误码、衰减等情况,并使用对应的差错控制方法解决该类问题.而信道状态不稳定所造成的传输数据丢失会严重影响视频服务质量与用户体验[5,11].针对上述无线网络环境中的视频流可靠传输问题,联合信源信道编码(JSCC)被认为是一种有效的解决方案[12-13].然而,已有的JSCC方法的主要问题是将服务器与客户端之间的网络视为单一的传输链路[14-15],而在多路径情况下该问题更为复杂[16].在文献[17]中,Jurca等人研究了多链路情况下的视频流路径选择和速率分配问题,实验结果表明视频流通过某些可靠的无线链路传输比通过所有可用的无线链路传输能获得更好的视频质量.问题的相关描述如图1中所示:在地点1,由于蜂窝网的可用带宽相对于视频流量不足,用户所接收的视频失真十分明显;在地点2,用户处于WLAN网络范围内并且选择接入该网络以获取更多的可用带宽.然而,由于WLAN链路的不稳定性,所接收视频质量进一步下降;在地点3,用户选择切换由WLAN到WiMAX并且该网络链路状态良好,所接收的视频质量明显优于地点1和地点2的视频质量.图1中实例表明在端到端移动视频分发过程中引入一条不可靠的无线接入网络进行传输只能降低用户所接收的视频质量.图1异构无线网端到端移动视频传输问题描述为了优化JSCC方法,使其能有效整合异构无线网带宽,从而保障视频流的端到端可靠传输,本文提出一种基于动态速率分配(DynamicRateAssignment)的JSCC方法(DRA-JSCC).本文中所①http://www.mushroomnetworks.comPage3述的“动态速率分配”表示动态选择可靠的无线接入网络并对每条链路分配合适的传输速率.DRA-JSCC方法主要包含3个步骤:(1)根据可容忍的传输丢失率对前向纠错码(ForwardErrorCorrection,FEC)的冗余度进行调整;(2)根据实时视频应用的延迟要求动态调整视频编码速率;(3)使用一种简单但十分有效的动态速率分配算法使端到端的视频失真最小化.第4节中将对DRA-JSCC方法的各步骤进行详细描述.本文的贡献在于:(1)提出了一种面向异构无线网端到端移动视频传输的联合信源信道编码方法DRA-JSCC,该方法将JSCC与动态速率分配相结合,提高多链路并发传输场景下视频的客观质量.(2)为优化客户端所接收的视频质量,本文构建了JSCC在多链路传输场景下端到端视频失真模型.针对信道失真,文中详细分析了视频流的传输损失以及“过期”损失情况.(3)在Exata实验平台上使用H.264实时视频流进行了大量半实物仿真.实验结果表明:①与已有的VPS[5]、FMS[16]、DMUS[18]方法相比,DRA-JSCC将视频平均视频峰值信噪比(PSNR)分别提高了3.5dB、8.45dB、11dB;②与VPS、FMS、DMUS方法相比,DRA-JSCC使端到端平均延迟分别减少了20.8ms、11.5ms、40.3ms;③与VPS、FMS、DMUS相比,DRA-JSCC使视频流的有效损失率分别降低了6.05%、10.5%、15.5%.本文第2节简要讨论与本文相关的研究工作;第3节对系统模型和问题定义进行详细描述;第4节中介绍所提出的DRA-JSCC方法的总体设计及其各功能组件;第5节详细介绍性能分析所使用的实验环境并对实验结果进行讨论;第6节总结全文并介绍进一步研究工作.本文所使用的主要数学符号及其说明如表1所示.符号ProbP,pr可用无线链路集合,第r条链路V视频源(编码)速率可用无线接入网络(链路)数量Dtotal端到端视频失真Φ,r无线接入网络选择向量,第r个元素μrpr的可用带宽Ω,ωr传输速率分配向量,第r个元素πrtrπB1/ξrBpr的平均突发长度F视频帧速率kFEC块中的源数据包个数ΓGoP最大延迟限制nFEC块中的数据包总数Δ可容忍丢失率2相关工作与本文相关工作总体可分为两个方向:联合信源信道编码和异构无线网协同视频传输.下文将分别作介绍并讨论.2.1联合信源信道编码JSCC的研究工作主要包括信源与信道编码的最优速率计算,以及根据信道状态、视频数据包的重要性调整纠错编码方式.已有的研究工作具体可分为:(1)求解最优的信源编码和信道编码比特率,例如文献[19-20];(2)在给定信道状态情况下调整视频编码速率以达到目标值,例如文献[21];(3)改进可靠信道编码方式,例如LDPC[22]、Turbo[23]、Reed-Solomon[24]以及喷泉码[25];(4)设计联合优化方法,将所有可用的差错控制方法与错误隐藏、传输控制相结合,提高系统的全局性能,例如文献[26].文献[14]在给定带宽限制条件下研究最优MPEG-2编码速率与FEC冗余度,在获取视频编码以及网络参数后,计算得出端到端视频的最小失真值,并且求出一组与最优速率分配相关的等式.在文献[13]中,作者研究了面向异构设备(不同分辨率)的分层视频广播JSCC的优化方案.该方法的目的是使得需求不同用户的平均客观视频质量最大化.上述研究工作都将服务器与客户端之间的通信网络考虑为单一的传输路径,而并未考虑多链路并发传输的情况.与上述JSCC方法不同,Jurca等人在文献[16]中研究了多路径传输情况下最优FEC编码速率与可伸缩视频分层选择.但是,该方法的主要缺陷是其假设所有链路都足够可靠并可以提升视频整体质量,因此缺乏有效的网络选择机制.2.2异构无线网协同视频传输异构无线网的协同视频传输已成为近年来研究热点,相关研究综述可参考文献[27-28].SFL[8]算法中作者考虑了可用带宽、传播延迟和视频帧长度,使用注水算法进行视频流量分配并且使用视频帧分段方法降低高清视频流延迟.LAB算法[10]根据不同的网络状况进行数据包筛选,该方法同样对视频数据包的端到端延迟进行计算,并只传输预计在解码时间之内到达客户端的数据包,并且丢弃因依赖关系而无法解码的数据包以节省带宽资源.LBA中的优先级策略中赋予I帧比B帧和P帧更高的优先级,赋予基础层数据包比增强层数据包更高的优先Page4级.LBA调度方法中按优先级对数据包进行排序,主动丢弃优先级较低的数据包以保证高优先级数据包的传输.文献[9]中提出的PMT方法,根据数据包延迟的概率生成函数将突发视频流量通过多条信道发出.由于PMT方法未根据信道状态的变化而动态调整视频流分配率,因此PMT方法对于用户终端移动性问题没有有效的解决方案,并且性能下降十分明显.Han等人在文献[5]中提出一种基于喷泉码的异构无线网端到端虚路径构造系统.该系统的目标是在带宽整合基础上使编码速率最大化.然而,喷泉码的编码块长度过大会造成传输以及编解码延迟,不适合在带宽受限、信道状态频繁变化的无线网络上进行实时视频流传输.并且,在信道发生突发丢包或者延迟增大的情况下,增大视频编码速率可能导致端到端失真增大.除上述研究工作外,EMS[29]和MPLOT[30]是典型的基于前向纠错码的多路径传输方法.EMS方法根据路径丢失率将数据流进行分配,并动态调整FEC编码冗余度,但其问题同样是缺少有效的路径选择机制,默认全部路径进行并发传输.MPLOT[30]是一种传输层协议,其目的是使上层应用吞吐量最大化.由于MPLOT传输协议中并未考虑延迟限制问题,因此该传输方法并不适用于实时视频传输,而对于大数据块的传输(bulkdatatransfer)的吞吐量增益十分明显.3系统模型及问题定义本文所研究场景如图1中所示.选择异构无线网下的多路径传输根据的是当前无线网络以及移动终端的发展趋势,引言部分已经阐述了多接入移动终端的重要性及前景,目前已经有商用的多接入特殊移动设备投入实际使用,而在多种异构无线网络长期共存的背景下,研究此场景的移动视频分发问题实际并且重要.需要注意的是异构无线网络的物理特征差异性较大,例如可用带宽、覆盖范围、链路延迟、稳定性等,具体可参考文献[4].因此,异构无线网环境下的多路径传输需要考虑传输链路的差异性以及不稳定性.本文提出的DRA-JSCC系统模型如图2所示.所考虑的网络拓扑结构为从单一发送端到目的节点的异构无线网络,包含R种可选择的无线链路.该系统包含网络路径模型、端到端视频失真和前向纠错码.3.1网络模型从视频服务器到移动客户端无线接口的端到端连接被认为是一条独立的物理路径,包括有线和无线网络两部分.由于带宽限制以及无线接入随时间变化的信道状况,无线接入网络更加容易成为端到端传输的瓶颈.由于路由器缓存溢出或易错,无线网络中信道衰减都可能引起传输的数据包丢失.为简化讨论,本文认为在有线或无线分组交换网络中的传输丢失都为该物理路径上的数据包丢失.每一段物理链路pr拥有以下物理属性:(1)可用带宽μr,单位为kbps.μr能够反映网络路径的背景流量以及带宽波动的情况.(2)传播延迟tr,包括有线和无线网络部分的端到端路径传播延迟.(3)平均丢失率πr物理路径的平均数据包丢失率之间彼此独立并且与视频流速率无关.本文基于连续时间Gilbert模型[31-32]对网络突发丢包状态进行建模分析,该模型为两种状态的连续时间Markov过程,状态χr(t)的取值为G(Good)或B(Bad).若一个数据包在t时刻χr(t)=G,则该数据包能传输到达客户端.若χr(t)=B,则该数据包在传输过程中丢失.本文使用πrGood或Bad的概率.ξrG到B和从B到G的转移概率,本文使用两个参数确定路径丢失模型:(1)平均丢失率πr失突发长度1/ξr每种无线链路的可用带宽和传播延迟可由已有的端到端可用带宽测量算法(例如pathChirp[33]算法)获取.与路径传输丢失率相关的参数πr样可通过端到端测量方法感知[34].本文对所有网络的损失率使用Gilbert丢失模型进行抽象分析是基于已有的研究工作[5,31-32],该模型被证明能有效用于分析无线网络的路径丢失状态,因为无线网络的数据包丢失主要是因为信道衰减造成.异构无线网络环境Page5极为复杂多变,本文对各种损失率做相同处理为便于问题分析,在已有的异构无线网研究[5,16]中同样使用该模型进行问题分析与求解.深入分析各种无线网络的物理特征可作为进一步的研究工作.3.2视频失真模型本文使用的端到端失真模型[35]中,端到端失真总和(Dtotal)为两部分,一部分为信源失真(Dsrc),另一部分为信道失真(Dchl),可表示为信源失真是因为进行数据压缩时的有损编码所引起,影响Dsrc主要有视频编码(源)速率和视频序列参数(例如在相同编码率下,视频测试序列参数越复杂,信源失真越严重),信源失真随着编码速率的增大而降低,衰减曲线在编码率较低时陡峭,而在高编码率时趋于平缓.信道失真与传输的有效丢失率πB相关.πB是由传输丢失和视频数据包过期到达客户端而造成的,信道失真大致与失效的视频帧数量成正比.因此Dtotal可表示为(单位为均方差,MeanSquareError,MSE):其中α、V0、D0、β表示视频测试序列的常量.该类常量对于不同的视频测试序列取值不同,可通过多次的编码实验获取[36],为了使本文所提出的动态速率分配算法能实时适应视频测试序列内容的变化,该类常量可与视频编码速率的调整频率一致,例如每0.25s进行一次更新,以保证计算准确性.3.3前向纠错码本文中使用Reed-Solomon(RS)码作为前向纠错方法对视频流数据进行差错保护.在RS编码块中,一个由n个数据包组成的FEC数据块包含k个源数据包和n-k个冗余数据包.一般情况下,只要至少有k个数据包被成功接收,接收端可以恢复n个源数据包.在FEC(n,k)编码方式中,每k个源数据包需要n-k个冗余数据包组成码字.若客户端收到的数据包数量不小于k,则客户端可以恢复所有的源数据包;若客户端接收的数据包数量少于k个,但收到的数据包仍可被用于视频解码,因为RS编码过程保证了这些数据包的完整性.总而言之,在相同码速率k/n下,增大n的值会提升RS编码的性能.FEC码率k/n的选择应该基于视频应用的可容忍丢失率以及信道状态信息.在实际应用中,基于视频帧级别[37],图像组级别[38](GroupofPictures,GoP)和图像分组(sub-GoPlevel)级别[39]的前向编码常被用于视频数据保护.本文使用基于图像组级别(如图3所示)的纠错编码方式以实现与编码速率调整方法的结合.图3基于图像组(GoP)级别的前向纠错编码3.4有效损失率的损失率:有效损失率πB包含信道损失和过期到达引起对于实时视频应用而言,视频帧受解码时间限制的约束.解码时间规定了视频帧的最大端到端延迟时间以确保该帧能成功被解码.下文中将分别对传输和过期丢失做详细分析.3.4.1传输损失率假设c表示一个包含n个元素的向量,该向量表示数据包传输时的路径状态.若第i个FEC数据包在传输中丢失,则ci=B.考虑所有可能的配置后可得传输损失率的表达式:其中,0<L(c)<k是对于特定c的丢失源数据包数量.对于FEC(n,k)前向纠错编码方式可得由于连接多网络连接客户端的条物理路径之间相互独立,因此可得出Prob(c)表达式为其中,Prob(cr)是失败配置cr对pr的概率;r是路径选择向量Φ={1,…,}的一个元素,r取值为Page6本文使用pr转移到状态j的概率,pr使用经典马尔可夫链分析方法可以得出prG,G(θ)=πrprB,G(θ)=πrpr在上述表达式中,κ=exp-ξr设向量犖=n1,n2,…,n{代表每条物理路径被分配的数据包数量.Prob(cr)的值可被表示为经过一系列运算,可得传输损失率表达式:πtran=1πtran=1烄∑Rr=1烆据包负荷长度.数据包过期到达客户端的概率可由如下公式得出Prob{dr>Γ}≈1过期丢失率可由如下等式得出πover=∑=1r=13.5问题定义本节将对基于动态速率分配的JSCC优化问题进行详述.在实际应用过程中,视频编码器无法实现频率过快的编码速率调整.因此,本文以GoP为单位,基于信道状况、FEC编码速率和延迟限制调节源速率.为使视频编码速率能够快速适应视频内容的突然变化,该参数在已编码视频序列中的每一GoP中通过上述等式可计算特定调度方案下的传输损失率.根据文献[40]中的计算式(11)可以得出计算式(12)中πtran的表达式,其中,Probnr-1q∈{G,B}表示a个连续FEC数据包中的任意b个丢失的概率,其详细计算过程请参考文献[40].3.4.2过期损失率假设路径pr上的端到端数据包延迟由瓶颈链路(bottlenecklink)的排队延迟决定,该延迟服从指数分布[41-42]:其中,Γ表示避免播放缓存“饥渴”的最大延迟上限.dr可由如下等式得出:B·Probnr-1其中,μr(1-πr)表示pr的“无损”(loss-free)带宽,即未将路径传输丢失率计算在内,S表示数)G+πr)G+πrB·Probi-1B·Probnr-1都会被更新一次,通常情况下每0.25s更新一次(J=8frames,F=30frames/s).本文目标是将由损失、延迟和带宽限制导致的总失真Dtotal最小化.因此,DRA-JSCC方法的优化目的可定义为对于每一图像组,确定Φ、Ω、V、n的值以使得下式的值最小:Dtotal=D0+αsubjectto:该问题为受线性条件约束的非线性优化问题.Page7考虑到计算复杂度和收敛性,在实际中很难求得该问题的精确最优解,本文中将求解过程分解为:FEC冗余度计算、编码速率调整以及动态速率分配.根据已有的JSCC理论[12,14],信源(视频压缩)以及信道(FEC冗余)编码速率需要分别根据给定条件以及目标参数进行求解以获取最优视频质量,而信源与信道编码之间的速率权衡问题一直是研究难点[12,14].对于实时视频应用,当视频数据丢失率超过1%时,视频质量下降十分明显[29].从理论上分析,FEC冗余度越大,则视频数据丢失率越低,但由于信道可用带宽限制以及过多的冗余数据包会造成更大的端到端延迟,进而降低视频质量.因此,FEC冗余度计算的目的是根据信道状态估算满足可容忍丢失率所需的冗余编码率,以此保证视频传输质量;在计算得出FEC冗余度之后,对视频编码速率进行分析,其中同样涉及视频失真的平衡关系,增大编码速率从理论上可减少数据压缩所产生的信源失真,但是过大的编码速率同样会造成网络链路拥塞以及增大视频流的端到端延迟降低视频质量,因此本文进行信源编码控制是在所给定延迟上限范围内将速率最大化.最后一个步骤,即动态速率分配算法,是图4DRA-JSCC客户端与服务器端组件设计示意在客户端,经过FEC解码的视频帧将被存储在播放缓存中.帧序列重排可以调整乱序到达客户端的视频帧顺序.由于每一个视频帧都含有一个解码期限,过期的帧将会被丢弃并使用最近收到的帧取而代之.本文的剩余章节将详细描述系统的核心组件及其工作步骤.4.1FEC冗余度估算为确定FEC编码冗余度,本文将多条无线链路本文创新点所在.在解决多路径选择时,本文使用贪婪搜索方法,即从所有可用链路中选出一个最优子集,该组合能使端到端视频失真最小化.在下一节方法设计中将根据具体视频应用及传输方法说明有效求解步骤.4DRA-JSCC方法设计本节将对DRA-JSCC方法的详细设计及其功能组件进行介绍.方法设计如图4所示,其包含服发送端和接收端的组件.为解决优化问题(17),DRA-JSCC在发送端(服务器端)主要操作步骤包括:(1)FEC冗余度估算;(2)视频源(编码)速率调整;(3)动态速率分配.其中,FEC冗余度(n)和视频源速率(V)基于速率分配向量(Φ)得到.输入和反馈信息(例如损失、延迟限制和信道状况)是计算步骤所必需的.视频应用设定损失与延迟要求以达到服务所需的QoS要求.编码所产生的FEC数据包通加权轮(WeightedRoundRobin)分配组件被分发到多条无线链路上,数据包传输单元将FEC数据包分配到不同的信道中.视为一条有效损失率为πtransmissionlink),因此需要考虑n个FEC数据包(每个负荷长度为S)在虚拟传输链路上的传输情况.令n-()k/k表示FEC冗余度(例如冗余FEC数据包在一个FEC块中所占比例).需要权衡考虑的一点是,冗余数据包越多,接收端进行错误恢复的能力越强,但会导致更高的端到端延迟并给网络带来更大的负荷[30].所以DRA-JSCC冗余度调整算法Page8设计的核心思想是添加一定数量的冗余数据包并恰好能满足视频应用的可容忍丢失率.因此,FEC冗余度的计算式可表达为其中,diff(Δ-πB的详细表达式可由式(4)、式(12)以及式(16)求π得.因此,在且只在Φ确定的情况下,可以得出FEC冗余度.4.2视频编码速率调整由信息论[43]可知,提高视频编码速率可有效减少视频的信源失真.然而,提高编码速率会增加视频流传输流量,视频流量的增大一方面会增加网络负载,发生中间路由节点缓存溢出、数据包丢失等情况,另一方面在网络带宽受限的情况下,会导致更高的视频流端到端延迟造成质量下降.从上述分析中可以看出,信源失真和信道失真存在内在冲突.所以,源速率适应的关键是寻找可满足应用和不超过信道限制的上界.应用的限制包括延迟要求.在实时视频应用中,降低延迟是提升视频质量的关键.若一个视频帧超过其解码时间限制之后到达客户端,则该帧会被认为丢失.本文提出了一种延迟要求下的源速率适应算法,其中考虑了上节提到的FEC冗余度.在最大可接受延迟Γ下可通过pr的最大数据包数可表示为ωr=μr·(1-πr)·(Γ-tr)其中,x表示小于x的最大整数.将加权轮数据包分发器中pr的权值设为ωr·r,1r.基于有效损失率计算FEC解码失败率,进而确定码速率.首先,可计算通过虚拟路径传输的数据包数量上限,计算式如下客户端每个图像组的播放时间可通过计算J/F得到,其中,J表示图像组长度,即所包含视频帧数量,F表示视频播放速率(单位为frames/s).因此在该播放时间内,一个FEC编码块的最大视频源速率V表达式如下4.3动态速率分配本文所描述的视频数据流由源数据包和冗余数据包组成.动态速率分配的目标是从候选的无线链路中选出合适的无线链路以使端到端视频失真最小化:Dtotal(Φ)=D0+α通过4.1节以及4.2节中的推导,k和V的表达式已确定.根据文献[16]中的定理1,最优的视频动态速率分配方案的形式为一系列连续的“1”而后紧随一系列连续的“0”,例如:Φ=[1,1,…,1,0,0,…,0].从理论上分析,使用高延迟、低带宽、易错的无线接入网络进行传输会增大Dtotal并且浪费接入网络所使用的带宽,因为克服路径丢失需要增加FEC编码的冗余度.因此,为求出最优方案,首先对所有可用无线链路按照“无损”(loss-free)带宽μr·(1-πr)进行排序,该参数在已有的研究工作中被证明可以很好地反映链路传输质量[30].然后,最优动态速率分配向量可由如下的简单但有效的搜索算法求出在实际的无线视频应用场景中,受用户终端电池电量、移动性、网络流量费用等条件的限制,一个移动终端只含有少量的网络接口.因此,尽管上述方法中使用了贪婪搜索,其计算复杂度以及开销在实际应用过程中依旧处于可接受范围内.4.4信道状态监测端到端网络状态测量是近年来的研究热点.在异构无线网环境中,为高效地利用信道资源,实时获取并分析信道的物理特征十分重要.可用带宽、路径传播延迟以及路径丢失率对于传输高质量视频流是非常重要的状态参数.近年来许多相关研究中都提出了无线/有线网络可用带宽的测量算法,例如文献[33,45-46].在建立端到端连接的初始状态下,当客户端所发送的链接建立请求到达发送端后,服务器在固定时间内按指数分布时间间隔向每条无线链路发出一些探测数据包.根据探测数据包到达的时间间隔,客户端使用pathChirp算法(详细内容可参考文献[33])计算出可用带宽.在稳定状态,视频数据包按照固定的间隔传输,客户端使用一个滑动窗口连续监控到达间隔并根据这些间隔计算可用带宽.通过每个数据包报头的时间戳可以计算出路径的传播延迟.通过上述步骤可获得如下信道状态信息:Page9μ={μ1,μ2,…,μ},π={π1狋={t1,t2,…,t}.客户端周期性地向服务器端反馈每条物理路径的信息.这些信息被用于FEC冗余度估算、编码速率调整和动态速率分配.DRA-JSCC的步骤如算法1所示.算法1.基于动态速率分配的联合信源信道编码方式(DRA-JSCC).输入:,μ,狋,π,ξ,k,S,Δ,,J,F输出:n,犞,Φ={1,…,},Ω={ω1,…,ω}1.FOREACHGoPDOFEC冗余度计算:2.πtran=Equation(12);3.πB=πtran+(1-πtran)·πover;4.n(Φ)=argmindiff(Δ-πB{});视频编码速率调整:5.FORr1TODO6.ωr=μr·(1-πr)·(Γ-tr)7.ENDFOR8.Θ=∑9.V(Φ)=∑动态速率分配:10.根据μr·1-π()r取值对Ρ=p{}rr∈重新排序11.Φ=0,…,{}0,Dtotal=;12.FORr1TODO13.r=1,Dtotal()Φ=D0+α14.IFDtotal()Φ<DtotalTHEN15.DtotalDtotal()Φ;16.ENDIF17.ENDFOR18.ENDFOR4.5讨论为讨论DRA-JSCC方法所求出的次优解与最优解之间的关系,本文使用Mathematica①软件对优化问题最优解进行计算,输入数据为实验过程中所采集的信道状态以及视频测试序列常量等参数,实验对比结果如图5.从图5中实验结果可以看出使用DRA-JSCC方法所得的视频质量非常接近于最优分析值.经过多次实验,每次求解最优解的执行时间为0.213s,而一个图像组的播放时间一般为0.25s~0.5s,因此求解最优解时间开销在实际系统运行时并不可行.经过多次测试执行DRA-JSCC算法的C++代码,得出其平均时间开销处于微秒级别,相对于视频播放以及传输延迟而言可忽略不计.图5DRA-JSCC算法与理论分析最优值对比5实验分析本节基于实时H.264视频流的仿真实验对所提出的DRA-JSCC方法进行性能分析.首先在5.1节中对实验方法进行描述,包括实验环境设置、对比方法、实验参数以及实验场景.在5.2节中对实验结果进行详细分析与讨论.5.1实验方法5.1.1仿真环境本文的仿真实验中使用Exata和JSVM分别作为网络仿真器和视频编解码器.仿真实验的系统架构如图6所示,主要设置如下.(1)网络模拟器.Exata2.1②在实验中作为网络环境仿真平台.Exata是QualNet③的高级版本,可进行半实物仿真.为了实现基于实时H.264视频流的实验,本文将JSVM的源代码与Exata相整合并开发名称为“VideoTransmission”的应用层协议.开发过程的细节描述可参考Exata开发手册[49].仿真实验架构如图6所示.在网络拓扑中,视频服务器配有一个有线网接口,移动终端配有3个无线网络接口(HSDPA,WLAN以及WiMAX),通过绑定一对IP地址可在无线网络接口上建立服务器与客户端之间的端到端连接.有线网络部分的背景流量参数配置如表2所示.仿真环境中的服务器和客户端分别映射到本地实体计算机,并通过Exata的连接管理工具ExataConnectionManager连接到仿真服务器.表3中列出了异构无线网络的主要参数.①②③Page10图6仿真实验系统架构表2网络背景(干扰)流量参数设置参数FTPRand[0,30]Rand[0,100]CBRRand[0,30]Rand[0,100]ParetoRand[0,50]Rand[0,100]表3无线网络参数配置Commoncontrolchannelpower33dBSamplingfactor8/7Maximumcontentionwindow32Totalcellbandwidth3.84Mc/sSymbolduration2048averageburstlength20msInter/intracellinterferenceratio0.55averagelossrate2.5%Backgroundnoisepower-106dBaverageburstlength15ms(2)视频编解码器.本文所实现的仿真实验使用H.264/SVC标准参考软件JSVM9.18①作为视频编码器.使用该编码器的原因是为了方便代码整合工作,因为Exata与JSVM都是使用C++语言开发的,而H.264/AVC编码器JM②是使用C语言开发的.视频播放速率为30frames/s,图像组长度为8frames.视频测试序列为City、Crew、Harbor以及Soccer,测试序列都为300frames的QCIF(QuarterCommonInterchangeFormat)格式.每个15005001000视频序列在帧间运动和空间特性上各具特点,使用上述测试序列能表示不同编码速率情况下视频客观质量.为取得有效的统计数据,本文将视频拼接10次,产生一段3000frames的视频.损失要求(Δ)和延迟上限(T)分别设置为1%和250ms[5].①②Page115.1.2对比方法视频传输方法进行比较:本文将DRA-JSCC与以下异构无线网/多路径(1)VPS[5].文献[5]中所提出的方法基于喷泉码构建异构无线网的端到端视频流传输路径,本文称之为基于喷泉码的虚通路传输系统(VirtualPathSystem).在VPS方法实现过程中,其控制参数每隔0.5s更新一次.喷泉码符号长度和数据包大小分别设置为8Byte和512Byte.(2)FMS[17].该方法基于最大使用率算法计算多路径场景下可伸缩视频传输的最优视频编码速率和FEC冗余度.在本文实验中,因为未使用H.264/SVC编码的可伸缩性,因此视频质量层数被设定为1.(3)DMUS[19].该方法在每条路径上建立一个TCP连接的方式利用该路径信道资源进行视频传输.服务器端将待发数据数据包送至发送队列.在任何时刻,只有一条TCP连接可访问发送队列.该TCP连接将持续发送数据包直至该链接繁忙(拥塞)为止.此时,另一条可用的TCP连接将获取发送队列的访问权限并继续视频数据包传输.为公平地比较各方法的性能,本文基于所有可用无线网的整合带宽动态调整视频编码速率.5.1.3实验参数本文使用以下性能指标评估各对比方案的性能:(1)峰值信噪比.PSNR(PeakSignal-to-NoiseRatio)是一种测量视频客观质量的标准参数,其数值由计算原始视频帧和接收视频帧的均方差函数求得.若视频帧在传输过程中丢失或超过其解码时间,则认为该帧失效.但失效帧可通过差错隐藏方法进行修复及复制之前所成功接收的视频帧.(2)平均端到端延迟.视频帧的端到端延迟包括网络传输延迟以及客户端重新排序的时间开销,该时间段从视频帧编码开始到客户端被解码为止.(3)有效损失率.如3.4节所述,有效损失率πB包括传输损失和过期损失.PSNR参数在进行差错隐藏后计算视频客观质量,而有效损失率目的是为了对比不同方法对于缓解突发丢包以及减少延迟的综合能力.5.1.4实验场景本文所进行的所有仿真实验在移动场景下实现,所使用的4种移动轨迹如图6中所示并且每种轨迹代表了用户在异构无线网中不同的可用网络选择,例如:在轨迹1上移动时,用户可以同时通过HSDPA和WiMAX两种方式.当移动客户端进入网络覆盖范围之内时,移动客户端通过无线接口向服务器发出请求并建立连接.在所有实验场景中,客户端移动速度都设置为2m/s.为取得置信结果,本文使用不同的视频序列对每一组仿真实验重复进行5次以上并获得置信区间为95%的平均值.而对于时间序列分析(timeseriesanalysis)结果,则在多次重复的实验结果中选取噪声干扰最小的典型数据.5.2仿真结果为验证文本所提出的DRA-JSCC方法的动态选择性,本节首先对动态速率分配算法性能进行分析,选择的实验结果为通信终端沿轨迹2移动时所采集的瞬时值,具体如图7所示.在[0,50]秒内,移动终端在HSDPA以及WLAN网络的覆盖范围内,在实验过程中,FEC冗余度以及视频编码速率的控制算法一致,只是路径选择向量不同.例如:WLAN表示视频流只能单独通过该网络传输到客户端,WLAN+HSDPA表示一直使用两种网络进行并发传输,而DRA-JSCC则是动态选择最可靠网络集合.从图7(a)中可以看出所提出的DRA-JSCC算法因为能灵活选择WLAN以及HSDPA路径,因此所估算的冗余度介于单独使用两种无线网络之间.图7(b)中的实验结果曲线同样能反映算法的动态性,有效选择两种网络进行并发数据传输能增大估算的可用带宽,因此DRA-JSCC所调整的编码速率明显高于单独使用两种网络.图7(c)中的PSNR结果则反映了DRA-JSCC并不等同于固定使用两种无线网络进行视频流的并发传输.在引言部分已经提到:在某些情况下,单独使用一种更为可靠的无线网络比多路径并发传输能获取更高的视频质量.5.2.1峰值信噪比如图8所示,与其他方法相比,DRA-JSCC的PSNR平均值更高并且数值波动更低.由于WLAN的链路稳定性低于WiMAX,轨迹2的平均视频PSNR低于轨迹1的数值.实验结果验证了图1中的实例以及相关文献[5-6]中的结论.除此之外,在轨迹3和4中,由于存在更多的可选择无线接入网络,DRA-JSCC和VPS相比于其余两种方案的优势更为明显.实验结果中DRA-JSCC的优势证明了将联合信源信道编码与动态速率分配相结合的重要性.DRA-JSCC优于VPS的原因是Reed-Solomon码相对于喷泉码而言更适用于实时视频应用,因为Page12图7动态速率分配算法性能分析结果其编码块长度(FECblocksize)更小以及编解码时间更短.为能从微观角度更细致地分析实验结果,本文中给出了终端沿移动轨迹4运动时所接收视频的平均值、标准差和瞬时值,如表4和图9所示.表4各对比方法在移动轨迹4时的平均PSNR值及标准差对比方法DRA-JSCC40.30.5735.30.5736.10.5341.50.83VPS36.20.6832.60.7533.50.7237.10.97FMS28.10.6329.20.6126.80.6530.20.98DMUS25.30.7325.80.7725.70.7326.70.895.2.2平均端到端延迟图10(a)中给出了平均端到端延迟及其置信区间结果.DRA-JSCC在所有实验模型中延迟最小.由于喷泉编码块长度较大且编码效率较低,VPS在延迟性能方面的实验结果劣于DRA-JSCC和FMS方法.同时也证明Reed-Solomon编码比喷泉编码更适合实时视频应用.图10(b)绘制了单次实验中端到端视频帧延迟的累积分布函数(CDF).可以发现,本文所提出方法的每帧延迟明显低于其他3种对照方案.尽管DMUS中并未采用FEC编码,但是其丢失的视频帧需要被重新传送,因此端到端延迟将会增加.实时应用中每一个视频帧都含有一个解码期限,图10(c)中给出了超过200ms解码时限到达客户端的视频帧比例.5.2.3有效损失率图11给出了各种方法在不同移动轨迹下的有Page13图9Soccer视频序列0~500帧PSNR瞬时值对比图10各方法的延迟性能对比Page14图11各对比方法的有效损失率实验结果效损失率.其特性与图8十分类似,因为PSNR值与丢失的视频帧数量成正比关系.由于同时考虑了损失要求与延迟要求,DRA-JSCC方法性能明显优于其他对比方案.然而,与端到端延迟的结果不同,由于VPS内部包含物理路径选择算法,VPS在降低有效损失率方面优于FMS和DMUS.因此,传输损失明显减少.图11(b)中给出了有效损失率在[30,80]秒的瞬时值.需要注意的是,视频的PSNR值不仅与有效损失率相关,同时也和所丢失视频帧的权重、具体的仿真场景等密切联系,因此有效损失率的趋势在一定程度上能反应视频质量的变化.6总结及进一步研究工作随着移动互联网视频服务与无线网基础设施的飞速发展,在异构无线网络环境下端到端的移动视频可靠传输成为亟待解决的研究课题.联合信源信道编码在视频传输系统中普遍用于对数据进行差错保护,以保障传输质量.为了优化联合信源信道编码方式,使其适用于异构无线网的并发视频流传输,本文提出了一种基于动态速率分配的联合信源信道编码方式.通过建模和分析得出了FEC冗余度计算、编码速率调整和动态速率分配的具体方案.实验结果表明本文提出的DRA-JSCC能够从候选无线链路中动态选择合适的无线链路并能有效提升视频PSNR.本文的进一步研究工作将考虑:(1)设计针对移动视频分发的垂直切换算法,针对在WLAN、WiMAX以及蜂窝数据网组成的混合网络中进行无缝切换以达到视频质量最优化;(2)在DRA-JSCC方法中使用间隔数据包发送方式以克服路径突发损失情况.
