Page1计算广告:以数据为核心的Web综合应用周傲英周敏奇宫学庆(华东师范大学软件学院上海200062)(上海高可信重点实验室上海200062)摘要计算广告是随着互联网应用发展起来的一个综合多学科的研究领域,这多学科包括数据管理、信息检索、数据挖掘、统计分析、机器学习、分布式系统等.由于其广泛的应用和巨大的市场价值,计算广告学已逐步发展成一个独立的研究方向.目前,计算广告学涵盖在线广告投放、移动终端广告投放、社会网络应用广告投放、用户信息分析等.文中主要介绍计算广告学的演化过程,包括计算广告投放模式的演化(由按合约投放演变为实时竞价投放)、计价模式的演化(由按展示计价演变为按点击计价、按交易计价等)、投放目标的演化(由品牌效果展示演变为直接市场营销);计算广告学的组成部分,包括计算广告产业链(如广告主、网络媒体、联盟网络、广告交换、需求方平台、销售方平台等)、计算广告的分类(如条幅展示广告、赞助商搜索、联盟广告等).此外,文中还重点讨论了广告检索、排序投放算法以及广告离线分析、实时投放平台等关键技术和平台.最后,还将讨论在移动计算环境下的移动终端的广告投放、基于位置信息的广告投放、基于社会网络的广告投放等新型应用模式对计算广告学发展的影响.关键词计算广告;广告检索;广告竞价;广告定向1引言广告有着悠久的历史,从古希腊时期叫卖奴隶和牲畜的雏形广告,到古罗马时期角斗场内以商标和字号形式展示的图形化广告以及从中国宋代起采用活字印刷制作的印刷化广告,到当代报刊、电台和电视台播出的媒体化广告,广告的内容和投放方式始终在跟随人类社会的进步不断地发展变化.近十多年来互联网的飞速发展,为广告的投放提供了新的平台,也从根本上改变了广告的投放模式,形成了一个拥有巨大市场价值的互联网广告产业.据尼尔森统计,2010年上半年中国互联网广告价值估算已达95.6亿元人民币,相比2009年同期增长了27.9%[1];而在美国,2010年互联网广告支出已达258亿美金,首度超过了报纸平面广告[2].最初的互联网广告多采用类似于传统媒体广告的投放方式,通过在页面中嵌入固定的图片和文字来展示广告内容.这种广告投放方式对于互联网平台来说不够灵活,很难与不断变化的网页内容相匹配,广告投放的效果较差.根据网页的内容和访问用户的特点,实现广告的定向投放是互联网广告投放机制的发展趋势.计算广告(ComputationalAdvertisement)是根据给定的用户和网页内容,通过计算得到与之最匹配的广告并进行精准定向投放的一种广告投放机制.采用该机制可以大幅度地提高广告主所投放广告的点击率(ClickThroughRate,CTR),增加广告所投放网站的访问量,帮助用户获取优质信息,从而构建出一个良性和谐的广告投放产业链.互联网计算广告的发展始于20世纪90年代.当时,DoubleClick公司(2008年被Google收购)提出了动态广告报告与目标定向(DynamicAdvertisingReportingTargeting)技术.该技术将条幅广告和Cookies分析相结合,利用条幅广告的Cookies长期追踪和记录用户的上网行为,并将其作为依据来投放符合用户兴趣的广告.1998年成立的Goto.com公司(2001改名为Overture,2003年被Yahoo!收购)采用了根据网页内容进行广告匹配的文字广告投放技术,开启了文字广告投放的新篇章.这种技术具体又可以分成赞助商搜索(Spon-soredSearch)和内容匹配(ContentMatch)两类,前者是根据搜索引擎的搜索结果进行广告匹配;后者是根据所发布网页的内容进行匹配.同时,该公司还提出了基于关键词竞拍的广告投放方式,创造了一种新的互联网广告盈利模式.2005年以后,互联网广告行业中先后出现了广告联盟网络、广告交换、需求方平台、销售方平台、媒体买卖平台等多种角色,计算广告技术得到了快速的发展,互联网广告投放的效果不断得到优化,形成了一个深度细分的产业链.时至今日,随着计算广告技术的不断发展,互联网广告行业的整个产业链已经日渐成熟,行业内的竞争也日趋激烈,所提供的广告服务也日臻完善.与过去相比,整个互联网广告行业在多个方面都发生了转变:(1)广告的售卖逐渐由传统的合约方式转变为实时竞价方式.这里的实时竞价既包括实时竞价销售,也包括实时竞价购买.这种转变促使需求方平台和销售方平台加入到了整个产业链中;(2)广告的定向投放逐渐由基于网页内容的定向转变为基于受众的定向.广告投放的最终目标是针对每个特定的用户,根据其所处的互联网环境,为其提供最适合的广告内容.随着产业链中数据交换和数据提供者角色的出现,使得基于受众的广告精准定向投放成为可能;(3)广告的目的逐渐由品牌展示转变为直接市场营销.随着广告定向技术的不断优化以及用户参与程度的不断加强,对于广告受众的定向也越来越精准,使得广告主在互联网上投放广告的目的逐渐由品牌展示转变为直接市场营销;(4)广告的营销逐渐由单一广告营销方案转变为整体广告营销方案.整体广告营销一方面是指针对同一用户,通过不同的终端(如PC、智能手机和平板电脑等)同时进行广告投放的方案;另一方面是指为同一广告主的不同商品(如一次广告战役)同时进行广告投放的方案.以上这些转变使得互联网广告行业成为一个与传统广告行业不同的新兴市场领域.在这个领域中,能够实现广告精准定向投放的计算广告技术占据着不可替代的核心位置.首先,计算广告可以有效地提高广告定向投放的精度,从而将广告由骚扰信息变为有用的信息.广告之父大卫·奥格威曾说过“广告是一种信息的载体”[3],而经济学家飞利浦·尼尔森也认为“广告就是信息”[4].但每条广告只有针对适合的客户,在特定场合投放才是有用的信息,否则便为骚扰信息.计算广告正是实现广告精准投放的主要技术手段.其次,计算广告技术的发展有助于完善互联网广告产业链并营造良性、和谐、共赢的产业环境.计算广告可以提高广告定向投放的精度,这有助于提高所发布页面的有效信息量,从而吸引更多用Page3户的访问,最终达到抬高广告位竞价并增加网页发布者收入的目的;计算广告可以提高广告的点击率,这有助于提升商品知名度和销量,最终为广告主达到增加商品销量的目的;计算广告可以提高网络广告联盟的信誉,进而吸引更多的网页发布者和广告主参与广告竞标;计算广告还能够帮助用户获取有用的信息.最后,计算广告推动了第三方付费模式的发展.第三方付费是指由作为第三方的广告主为用户向软件开发者(或服务提供者)支付使用软件(或服务)的费用.在该付费模式下,软件开发者(或服务提供者)可以获得发布广告的收入,用户可以获得免费的软件(或服务),而广告主则可以通过精准定位的广告来销售更多的产品.计算广告是支撑互联网广告产业链发展的基础,其涉及的技术主要包括广告检索、用户数据分析和广告投放算法等.近年来,信息检索、机器学习和数据密集型计算等领域的研究工作为计算广告的发展提供了技术支持,例如,基于信息检索的关键词抽取技术,基于机器学习算法的广告检索技术和点击率估计技术,基于分布式数据密集型计算系统的海量数据分析处理平台和实时广告检索排序平台等.这些技术不仅使得广告系统能够实现精准定向,并且能够在毫秒级的时间范围内处理上百万并发的实时广告检索、排序和投放需求.本文第2节将对互联网广告产业链进行详细介绍,包括产业链中各角色的分工及其演化过程、计算广告的计费方式及其演化过程以及广告的实时竞拍机制;第3节主要介绍三种类型互联网广告的检索及排序算法,即条幅展示广告,赞助商搜索以及联盟广告;第4节介绍互联网广告处理平台,包括离线分析平台以及实时广告检索平台;第5节介绍计算广告技术发展的趋势和动向;最后,在第6节中将对全文进行总结.2计算广告产业链2.1角色及其演化互联网计算广告的发展起始于1995年,当时产业链中仅包含有三个角色,即广告主、发布者(网络媒体)和用户.产业链中的每个角色均希望自身获得最大的效用(Utility)①.例如,广告主的效用是希望最终能够销售更多的商品,这又可以分为即时效用和长期效用.即时效用是指用户点击了广告主所投放的广告,并购买了相应的商品,为广告主带来销售收入;而长期效用是指通过广告展示,提升商品的品牌价值,从而吸引更多的用户购买商品.发布者的效用是希望通过投放广告能够有更多的收入.该效用一般是通过为用户提供有效信息来吸引更多的用户访问(流量),最终达到提高广告位单价来实现.用户的效用是指在浏览网页时能够获取尽可能多的有用信息.2000年左右,互联网上涌现出大量的网络媒体,其中一部分的网络媒体没有自己的广告投放平台,必须依赖于广告联盟网络(AdNetwork)来进行广告投放.广告联盟网络主要可以分为两类,一类是连接广告主和网络媒体的广告中介;另一类是拥有大量广告“存量”的网络媒体,如搜索引擎等.前者的效用是通过租用网络媒体的广告位,为广告主投放广告,并从中赚取广告费差价来实现;后者的效用是通过有效投放广告,提升广告位的价值,最终增加广告收益.2005年左右,互联网上广告联盟网络的数量已经颇具规模,但是多数的广告联盟网络仅服务于一小部分的广告主和网络媒体,很难在广告主和网络媒体之间实现广告、广告位资源的有效分配.一方面,部分网络媒体的广告位大量闲置;另一方面,部分广告主难以购买到合适的广告位.广告交换(AdEx-change)平台的出现有助于在多个广告联盟网络之间实现资源的有效分配.广告交换平台能够帮助网络媒体降低广告位闲置率;能够帮助网络媒体提高广告位售价;能够帮助广告主提高广告投放的效果.广告交换平台的效用是通过提高网络媒体和广告主的效用来实现的.据Forrester统计,72%未使用广告交换平台的广告买卖双方将尽快考虑使用广告交换平台②.2010年前后,广交换平台的服务已经无法满足广告主和网络媒体的需求,在产业链中出现了需求方平台(DemandSidePlatform)等多种新的角色.需求方平台能够较好地理解广告主的需求,并通过实时竞价系统(RealTimeBidding)为广告主竞拍到投资回报率较高的广告位.相对应的,针对网络媒体也出现了销售方平台(SaleSidePlatform),通过实时销售系统(RealTimeSale),实现网络媒体广告位库存的实时销售.此外,数据交换(DataExchange)①②Page4的主要作用是为产业链中的各方提供用户相关的数据,用于支持广告的精准投放.媒介买卖平台(MediaBuyingPlatform)是销售方平台和需求方平台的综合,同时为网络媒体和广告主提供实时销售和实时竞价服务,在同一平台上实现广告实时销售与投放.图1给出了计算广告产业链中各个角色的演化过程,由最初的网络媒体和广告主这两层角色(如虚线所示)逐步演化为加入了销售方平台、需求方平台、广告网络和广告交换的四层角色(如实线所示).产业链中角色之间的分工也变得越来越细,其中销售方平台主要处理网络媒体方的需求,实现网络媒体广告位存量的实时销售;而需求方平台、广告网络和广告交换主要处理广告主方的需求,实现广告主对广告位的实时竞拍和购买.通过中间这两层角色,可以使互联网上广告的定向投放更加精准.2.2广告计价模式互联网广告产业链中各角色的数量在互联网广告发展过程中有过较大的变化,这种变化直接影响到了广告投放的计价方式.互联网广告的计价方式经历了从按展示计费(CPM)、按点击计费(CPC)到按交易计费(CPT/CPA)①的转变过程.图2给出了最近20年间,互联网用户数量、网站数量和互联网广告投入之间的发展对比,并标明了广告投放计价方式的演变过程.1997年之前,互联网上网络媒体的数量较少,因此广告主仅能通过为数不多的网络媒体实现广告投放.在这一阶段,网络媒体占据了产业链的主导地位,拥有了广告投放的定价权.此阶段中,广告投放的定价均采用合约(Contract)方式,即广告主通过合约要求网络媒体按照规定次数展示相关广告,这种方式也被称为确定投放(GuaranteedDelivery).图2互联网用户、网站数量和广告投入之间的对比这种以展示次数计费的模型与在传统媒体上投放广告的计价方式类似,比较适合用于建立产品的品牌效应.随着网络媒体数量的增长,广告合约也由起初的非定向广告投放转换为定向广告投放.所谓非定向广告合约是指仅规定了广告投放次数的合约,而定向广告合约是指针对特定的用户群(特定的年龄、性别、职业、薪资等)约定相关广告的投放次数.通常,广告合约会在广告投放之前签署,因此网络媒体需要对未来一段时间内该网站特定用户的流量进行预先估计.如果网络媒体低估了相关流量,会造成广告位的浪费;相反,如果高估了相关流量,会导致网络媒体在约定的时间内无法完成广告展示合约.随着网络媒体的数量进一步增长,网络媒体在产业链中的优势地位不断下降.与此同时,互联网用户的数量出现了大幅度的增长(参见图2),使得单位时间内广告被展示的次数也出现大幅度增长,直接导致了广告主广告费用的激增.在这一阶段,广告主对于广告的展示效果提出了更高的要求,而信息检索和WEB数据挖掘技术的应用,使得按页面内容为广告主投放广告成为可能.1997年Goto.com率先提出了按点击量计费的广告计价模式.基于点击的广告计价有两种模型,统一费率模型(Flat-rateModel)[21]和基于拍卖的模型(Bid-basedModel)[22].统一费率模型是指广告主与网络媒体之间预先签署关于单次点击费用的合约,然后网络媒体在广告投放后按广告的点击量向广告主收取费用.这种方式会促使网络媒体将广告投放在内容相关的网页上以提高广告的点击率.基于拍卖的模型是指广告主与网络媒体或广告联盟网络之间签署合约,通过在线拍卖工具实时调整当前愿意支付的最高单次广告点①NazerzadehH,SaberiA,VohraR.Dynamiccost-per-ac-tionmechanismsandapplicationstoonlineadvertising.Page5击费用.网络媒体或者广告联盟网络通过预测不同广告的点击率并结合广告主的竞拍价格来决定所投放的广告.按点击量计费的方式能够大幅度地提高广告的投放效果,降低小广告主的风险[25],使得广告主的效用得到进一步扩展.同时,这种计费方式会促使网络媒体和广告联盟网络不断提高广告投放技术,使用户能够由此获得更多有用的信息,从而提高所投放广告的点击率.按点击量计费的方式也存在一定的不足,首先,广告主需要在用户点击广告之前出价(合约或者竞拍),因此广告主需要准确估计用户点击的转换率(ConversionRate),这具有一定的难度;其次,这种方式对行业的监管提出了挑战,例如,如何避免网络媒体和广告联盟网络伪造点击(FraudClick)[24].随着产业链中网络媒体和广告联盟网络数量的进一步增长,行业竞争愈加激烈,在2003年左右出现了按广告投放效果进行计费的模式.广告主与网络媒体或广告联盟网络通过合约来对广告投放的效果(Action)进行约定,可以是帮助广告主获取新客户(Acquisition)、获得新用户注册(Lead)、产生下载(Download)、产生交易(Transaction)或者是促进销售(Sale)等等.与其他计费方式相比,按广告投放效果计费有诸多优势.首先,所有的广告效果均在广告主一端进行处理,因此广告主能够准确统计广告的投放效果,从而具备更高的竞拍表达能力;其次,采用这种方式可以使广告主进一步规避广告投放的风险,获得更好的效用.当然,按广告投放效果计费的方式也存在着一些不足.一方面,由于这种计费方式忽略了广告展示的长期效用,会导致部分广告主利用不计费的广告展示(即不产生效果)来为产品建立品牌效应[25],却逃避广告费用;另一方面,由于广告投放效果的数据全部都维护在广告主一端,使得网络媒体和广告联盟网络难以通过对这一部分数据进行分析来提高广告投放的效果.随着互联网广告行业竞争的白热化,产业链中不同角色数量的变化导致了竞争优势的迁移,使互联网广告投放的计费模式也随之发生转变,按广告投放效果进行计费将最终取代其他计费方式,成为现阶段互联网广告行业中最主要的计费模式.2.3广告竞拍互联网广告在发展过程中逐渐形成了几种不同形态的广告形式,包括条幅图片广告(Banner)、赞助商广告和联盟广告等.广告主在发布广告的过程中,争夺广告显示权的方式也逐渐从合约式(Contract)转变为实时竞拍式(Biding).针对不同形态的广告形式,广告主实时竞拍的内容也各不相同.对于条幅图片广告,广告主可以针对展示竞拍(Impression),针对展示位置竞拍(Slot)[26]、针对广告受众属性竞拍,以及针对它们的组合进行竞拍;对于赞助商广告,广告主可以针对展示竞拍,针对展示位置竞拍,针对关键词竞拍以及针对它们的组合进行竞拍;而对于联盟广告,广告主可以针对关键词竞拍,针对受众属性竞拍,针对展示位置竞拍以及针对它们的组合进行竞拍.传统商品的竞拍规则主要有4种:第一价格密封投标、第二价格密封投标、开放式递增投标和开放式递减投标.互联网广告的竞拍与传统商品竞拍有所不同,主要体现在如下4个方面:(1)互联网广告的竞拍是一个持续的过程,只要网络媒体有流量(即有用户访问),就可以进行拍卖;(2)针对不同形态的广告,虽然竞拍的内容各不相同,但实际上竞拍的均是网络媒体的流量;(3)如果竞拍中出现流拍,相关的流量是无法保留到未来进行再次竞拍,这会造成流量的浪费;(4)由竞拍所产生的过度广告投放将会有损于用户的效用.因此,传统的竞拍规则不一定适合于互联网广告的竞拍,但无论采取何种竞拍规则,竞拍所追求的最终目标都应是一致的:(1)如果竞拍者拥有占优策略(DominantStrategy)[23],则应该使用占优策略.此时无论其他竞拍者如何选择策略,占优策略均能使该竞拍者获得最大效用.使用占优策略能够让每个竞拍者按照心理价位出价,体现出竞拍者的真实意愿(Truthfulness)[23];(2)拍卖规则应体现出纳什均衡(NashEquilibrium)[23]特性,也就是在给定其他竞拍者策略的前提下,每个竞拍者都选择自己的最优策略.显然,传统商品的四种竞拍规则并不一定都适合于互联网广告的竞拍.1997年Goto.com首先在广告竞拍中采用了通用第一价格密封投标(GeneralizedFirst-priceAuction)[89]规则,即让竞拍者各自出价,然后根据最高出价依次获得不同位置的广告展示,并按各自的最高出价进行付费.采用这种竞拍规则时,竞拍者往往需要出比心理价位更高的价格,并且必须一次比一次出价更高,才能获得广告展示的机会.因此,通用第一价格密封投标规则无法体现出竞拍者的真实意愿,也不具备纳什均衡的特性.在连续竞拍的过程中,当竞拍价格在竞拍者可承受范围之内时,竞拍者不断推高的出价会使中标价格不断攀升,当竞拍价格超出竞拍者可承受范围后,会出现因无人出价而Page6导致中标价格跌落的情况.由此可见,通用第一价格密封投标规则对于互联网广告的拍卖来说不够稳定,往往会导致中标价格的频繁波动.类似的竞拍规则还有通用Vickrey竞拍(GeneralizedVickreyAuction)规则,也称为VCG(Vickrey-Clark-Groves)竞拍规则,是让竞拍者各自出价,然后根据最高出价依次获得不同位置的广告展示,并按第二高出价进行付费.VCG竞拍规则能够体现竞拍者的真实意愿,即各竞拍者能够按照心理价位出价,但是不具备纳什均衡特性.2002年起Goolge开始采用通用第二价格竞拍(GeneralizedPriceAuction)规则,随后Goto.com和Yahoo!也转到采用该规则.针对不同计费模式,通用第二价格竞拍有两种排序方式,一种是按照竞拍的出价排序(BidRanking)后在不同的广告位置展示,这主要是针对按展示计费或按显示位置计费;另一种是按照收入排序(RevenueRanking)后在不同的广告位置展示,这里所说的收入是按竞拍人的出价乘以所投广告的点击率来计算的,这主要针对按点击计费或按广告投放效果计费.在为互联网广告竞拍选择竞拍规则时,不仅要求所选的竞拍规则能够体现出竞拍者的真实意愿以及具备纳什均衡特性,还要求该竞拍规则具备丰富的表达能力(Expressiveness).竞拍规则的表达能力是指一个竞拍规则不仅仅能够支持对广告展示机会的拍卖,还能够针对用户的需求方便地支持对不同内容的组合进行拍卖.近年来,出现了多种具有丰富表达能力的互联网广告竞拍规则.例如,针对条幅图片广告的拍卖,可以按网络媒体所属的类型、用户所属的区域、用户的性别、用户的职业和用户的收入等多种内容以及它们的组合进行竞拍[27],并通过竞拍树(BiddingTree)的形式为用户提供了用于出价的竞拍语言(BiddingLanguage)[27].又如,针对广告战役(AdvertisingCampaign)层次的竞拍规则及相关的投放策略优化规则[28].而针对关键词竞拍,同样也有具备丰富表达力的竞拍规则,不仅能够支持对单个关键词和组合关键词的竞拍,还能够提供不同关键词组合的概率以及向竞拍者推荐关键词组合,
