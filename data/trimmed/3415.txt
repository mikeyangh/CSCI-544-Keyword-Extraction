Page1多信道无线网络中优化QoM吉布斯采样信道选择算法夏娜1)陈秀珍1)徐朝农2)郑榕3)1)(合肥工业大学计算机与信息学院合肥230009)2)(中国石油大学计算机科学与技术系北京102249)3)(休斯顿大学计算机系美国休斯顿77204)摘要在无线网络中采用专用节点对用户的通信活动进行监测可实现网络的故障诊断和资源管理.由于硬件资源受限,无线节点通常在一个时刻只能工作在一个信道上,因此优化各个节点的信道选择使整个网络收集的用户信息量达到最大,即网络监测质量(QoM)达到最优是一个关键问题.文中提出一种基于吉布斯采样(GibbsSampler)的分布式节点信道选择算法.根据优化目标构造了能量函数,以计算各个信道的选择概率,并完成对信道的优化选择.该算法复杂度低,具有可证明的收敛性,大量实验结果表明该算法可以实现无线网络QoM最优化问题的分布式求解,而且解的质量近似达到了集中式算法的性能.关键词物联网;多信道无线网络;信道选择;监测质量;吉布斯采样;能量函数1引言物联网(TheInternetofThings)是把具有标识、感知和智能处理能力的物体,借助通信技术互连而成的网络[1-3].无线网络(WiFi、WiMax、Mesh、WLAN等)是物联网的重要组成部分.随着无线网络应用的深入,准确、实时地监测无线网络的状况并实施有效的管理变得越来越重要,因此无线网络监测已成为物联网研究领域的一个重要分支.在无线网络中,通常采用专用监测设备获取监测区域内无线设备的传输信息,保存帧信息或者物理层信息,并进行分布式或集中式分析.无线监测通常基于SNMP和基站日志来实现,由于它们能显现PHY(如信号强度、光谱密度)和MAC(如冲突、重发)层的行为细节以及时间信息,因此可以对无线网络的诊断和管理发挥重要作用[4-11].无线监测设备通常是单电台多信道设备[12-14],即具有多个可选信道①,因此如何为这些监测设备优化配置信道等资源,从而使整个网络的监测质量达到最优是一个关键课题[15-20].文献[21]证明了在用户中心模式下,为网络中的监测设备(节点)分配最优信道是一个NP-hard问题.由于在广域无线网络和基础设施建设不完备的地区,节点无法通过有线以太网进行互联,因此难以通过集中式算法求解上述问题,而节点利用本地信息分布式求解该问题则具有重要意义,它对物联网技术的广泛应用和性能提升具有推动作用.本文第2节对近几年的相关工作进行分析;第3节形式化地描述无线监测网络信道选择问题;第4节提出一种分布式的吉布斯采样(GibbsSampler)算法用于解决第3节提出的问题;第5节是仿真实验及实际网络测试;第6节总结全文.2相关工作近年来,无线网络监测已成为研究的热点.研究内容主要包括监测设备的研制、系统的设计、故障诊断技术的开发等[4-11].2004年,Yeo等人[4-5]首次提出了应用多个无线传感器节点进行被动监测的技术,分析了无线被动监测的优势和所面临的挑战,并初步设计了一种应用系统,多个节点通过时间同步和数据融合实现了网络的故障诊断.2005年,Ro-drig等人[6]利用传感器节点获取无线信息以分析802.11WiFi网络的性能特征.2006年,Cheng等人[7]对150个节点组成的大规模监测网络进行了研究,讨论了分布式节点时钟同步方法.2007年,杨文国等人[8]研究了无线监测传感器网络的寿命模型,通过实时调整监测节点的感知/通信半径达到最大化网络寿命的目标.2010年,Liu等人[9]研究了无线传感器网络中监测节点个数与误报率之间的关系,并基于poller-pollee结构提出一种限定误报率的最小化监测节点数的算法.目前,通过优化监测节点的信道选择以提高无线网络的监测质量已成为一个重要课题.2009年,Shin等人[22]研究了无线Mesh网中监测节点的信道选择问题,其优化目标是使用户得到最大化覆盖,作者将该问题描述成基于群预算限制的最大化覆盖问题[23-24],进而采用贪婪算法和线性规划算法进行了求解,得到了较好的性能.在以上研究的基础上,2010年,Scalosub等人[21]在通用网络模型下以最大化无线网络的监测质量(QualityofMonitoring,QoM)为优化目标,公式化描述了节点信道分配问题,证明了它是一个NP-hard问题,并采用贪婪算法和线性规划算法加以求解.贪婪算法以集中方式实现,在解决问题过程中追求当前利益最大化,很难得到全局最优解;线性规划算法也是一种集中式算法,虽然解的质量较高,但对于分布式无线网络可实现性不好.无线网络本身的多信道选择技术也已取得一些成果[15-20].2006年,Wormsbecker等人[16]研究了信道选择技术对系统通信性能的影响,采用软信道预留技术进行信道选择,减少了链路层数据帧的损失,提高了TCP吞吐量.2007年,Kanthi等人[17]基于Spanner概念提出了一种结合网络拓扑结构的信道选择算法,用于解决多电台多信道Mesh网中的信道分配问题,该算法可以提高通信链路层的数据吞吐量.2009年,You等人[18]研究了无线蜂窝网中点到点数据传输和无线信道资源优化配置问题,并采用随机准梯度法初步解决了该问题.2010年,Hou等人[19]研究了认知无线电(CognitiveRadio)网络中节点信道选择问题,将其描述成一个二进制整数非线性优化问题,并设计了一种基于优先序列的信道选择算法,可以优化网络中二级节点的信道利用①IEEE802.11.b/gWLAN有3个非重叠信道,IEEE802.11.aPage3率.2011年,杜振国等人[20]针对多电台多信道无线Mesh网提出一种域内集中式信道分配(ICCA)方案,在一定程度上避免了干扰与碰撞,提高了网络吞吐量并降低了传输时延.以上研究主要针对无线网络本身,而不是无线监测节点,所采用的方法均为集中式算法,难以分布式实现,且方法的理论基础较薄弱.本文引入吉布斯采样理论解决无线监测网络最大化QoM的节点信道选择问题,设计了分布式可实现的退火吉布斯采样信道选择算法.基于完备的吉布斯采样理论体系,算法具有可证明的收敛性,大量仿真实验和实际测试结果验证了算法的有效性.3问题描述3.1网络模型假设在一个无线网络中有m个监测节点,n个用户,k个信道,S={s1,s2,…,sm}表示监测节点集合,U={u1,u2,…,un}表示用户集合,C={c1,c2,…,ck}表示信道集合.在同构网络中,节点具有相同的传播特性,并具有读取帧信息的能力,可以分析来自用户或其它节点的信息;节点在一个时刻只能工作于一个信道.用户uj(j=1,2,…,n)在一段时间内固定工作于某个信道c(uj)∈C,并以信息传输概率puj进行数据传输.这些用户可以是无线路由器、接入点或手机用户等.如果一个用户在时刻t通过某个信道发送信息,那么称之为时刻t的活动用户.在无线网络中,节点和用户的关系可以用一个无向二分图G=(S,U,E)来表示,如图1所示.在G中,若uj在si的监测范围内,则它们之间有一条连线,用e=(si,uj)表示;当节点si和用户uj工作于同一信道时,si可以获取来自uj的信息,此时我们称uj被si覆盖.E表示所有连线的集合.若某个用户不在任何一个节点的监测范围之内,则它被排除在G以外.G中的顶点v是节点或用户,即v∈S∪U.N(v)表示顶点v的邻居,若顶点是用户uj,N(uj)表示它的邻居节点的集合;若顶点是节点si,N(si)表示其邻居用户的集合.当一个节点在另一个节点的通信范围内,则称这两个节点相邻,称其中一个节点是另一个节点的相邻节点,V(si)表示节点si的相邻节点的集合,Bsi表示si相邻节点下标的集合.本文假设节点间通信半径等于节点监测范围半径的两倍.3.2问题公式化描述用犪:S→C表示无线监测网络中一种节点对信道的选择方案,用A表示所有可能的信道选择方案集合.犪可用向量表示,即犪=(a(s1),a(s2),…,a(sm)),其中a(si)∈C表示节点si选择的信道.当si选择信道a(si)后,它可以和工作于信道a(si)的邻居用户进行通信.给定一个信道选择方案犪,则S=∪kq=1Scq,U=∪k集合,Ucq表示工作于信道cq的用户集合.用无向二分图Gcq=(Scq,Ucq,Ecq)表示工作在信道cq的所有节点和用户的关系.定义1.节点的监测质量(MonitoringQualityofNode,MQN).当无线监测网络工作于某信道选择方案犪∈A时,节点si的监测质量定义为Qsi(犪)=∑u∈N(si)pu·1(c(u)=a(si))其中1(·)是指示函数,当条件满足时它等于1,否则为0.由式(1)可见,节点si的邻居用户中与节点工作在同一信道的用户越多,这些用户的信息传输概率越大,并且覆盖这些用户的其它节点越少,则节点si的监测质量越大.节点的监测质量反应了当节点选择某个信道后,能与其进行通信的活动用户的个数.活动用户指的是处于信息发送状态的用户.量(QoM)为给定信道选择方案犪,无线监测网络的监测质可见,无线监测网络的QoM越大,则网络中可被监测到的活动用户越多,无线监测网络的服务质量就越高.问题1.最大化无线网络监测质量(MaximizingofQoM,MQM)问题就是在有限的节点和用户的情况下,寻找一种信道选择方案使无线网络的QoM达到最大,从而使节点最大可能地获取活动用户传Page4输的信息.无线监测网络会在不同时间段依概率变换信道选择方案,所以无线监测网络在较长时间内获取的信息量最大可以表示为式中,π(犪)为无线监测网络工作于信道选择方案犪的概率.由式(3)可得,最优信道选择方案为由式(1)~(4)可见,计算Q(犪)需要用到各节点的监测质量,而要计算Qsi(犪),只需知道节点si的邻居用户N(si)和相邻节点V(si)的信息,这使得分布式求解MQM问题成为可能.以下我们将提出一种分布式信道选择算法用于解决该问题.4吉布斯采样信道选择算法本文提出一种吉布斯采样信道选择算法(GibbsSamplerbasedChannelSelectionalgorithm,GSCS).首先概述吉布斯采样基本理论.4.1GibbsSamplerGibbsSampler的基本理论来源于物理学,1902年由Gibbs提出.在此基础上,1984年,Geman提出了GibbsSampler算法,该算法是一种特殊的蒙特卡罗(MCMC)算法,它最显著的特点是通过沿一系列互补的方向来构建条件分布序列的方式构造此算法的马尔可夫链.该算法适用于对离散的多维问题进行分布式求解,在无线通信领域已得到应用,解决了802.11WLAN中AP的信号发射功率控制和最小化用户端干扰等问题[25-26].GibbsSampler的分布函数如下:犡表示系统的一个状态向量,Λ表示所有状态向量的集合,则犡∈Λ,T>0表示温度,能量函数ε(犡)表示状态向量犡的能量,0<ε(犡)<+[27-28].ZT=∑犡′∈ΛGibbsSampler通过以下的方式来更新它的状态向量:假设状态向量犡分为d个分量,即犡=(x1,…,xd).设第t次迭代的状态向量为犡(t)=(x(t)1,…,x(t)1,2,…,d),依条件概率分布p(xix(t+1)i-1,x(t)x(t+1)条件概率分布可由GibbsSampler分布函数得到[28-29].可以证明,根据以上步骤进行足够多次状态向量的更新,状态向量犡(0),犡(1),…,犡(t),犡(t+1),…近似服从目标分布π.这样便实现了从一个给定分布采样随机样本(但这些样本是相关的)的目标[27-29].GibbsSampler是一种机制,它确保系统从一个随机的状态向量开始,最终收敛到目标分布(5).由GibbsSampler分布函数可见,某个状态的能量函数值越小,其选择概率越大.Gibbs采样理论中“子团”是相互之间有紧密关系的元素的集合.一个单独的元素组成的集合{s}是一个子团;一个非空集合L,其中的元素两两相邻,则L是一个子团.势函数将一个非负实数V(L)与L联系在一起,V(L)仅与L中的元素的状态相关,若L不是一个子团,那么V(L)等于0.对于所有的犡∈Λ和所有的L,能量函数将一个实数ε(犡)与状态向量犡相联系.如果以下等式成立,则称能量函数是由势函数{VL}构造而成的:在本文问题中,无向二分图G包含m个节点s1,s2,…,sm.每个节点si(i=1,2,…,m)都具有一个状态xsi,即节点所选择的信道,所有可能的状态组成一个集合C,那么G的状态可用一个状态向量犡=(xs1,xs2,…,xsm)(xsi∈C,i=1,2,…,m)来表示.当ε(犡)可以表示为式(6)时,节点si(i=1,2,…,m)的本地能量将由与si相关的L的势函数组成:将节点si的本地能量εsi与GibbsSampler分布函数联系,得到节点si选择信道xsi的概率:μsi(xsi)=由上式可见,节点si根据邻居节点的状态来更新自身的状态,即节点si在已知邻居节点工作信道的情况下,在C中依概率μsi选择自身的信道,完成一次状态更新.同时可见,某个状态对应的本地能量越低,节点选择它的可能性越大.节点根据本地能量进行状态更新是一个分布式Page5的过程,经过足够多次迭代,无向二分图G将逐渐收敛到具有较低全局能量的状态向量.4.2算法设计以下将论证本文问题符合GibbsSampler理论应用条件,并设计吉布斯采样信道选择算法(GSCS).本文的设计目标是最大化无线网络的监测质量(MQM),目标函数如下:Q(犪)=∑si∈S=∑si∈S∑u∈N(si)pu·1(c(u)=a(si))烅烄烆研究目标是找到一种信道选择方案犪,使得目标函数值Q(犪)达到最大.若节点分布式求解该问题,则目标函数为节点的监测质量:Qsi(犪)=∑u∈N(si)pu·1(c(u)=a(si))设节点si和sj(i,j=1,2,…,m,且i≠j),定义以下函数:Nshare(u,si)=1+∑t∈BsiR(si,sj)=∑u∈N(si)∩N(sj)pu·1(c(u)=a(si),a(si)=a(sj))根据式(10)和(12),Qsi(犪)可以写为根据式(9)和(13),用补值方法构造能量函数:V是以下方式构造的关于L的势函数:V(L)=T(si)-M(si)forL={si}V(L)=R(si,sj)forL={si,sj}V(L)=0可见,能量函数E可由势函数加和构造而成,因此符合GibbsSampler理论应用的充要条件[25-26].节点si选择a(si)对应的本地能量可以表示为εsi(a(si),a(sj)j∈Bsi)=Esi(a(si),a(sj)j∈Bsi)=∑si∈L,LS根据4.1节中GibbsSampler理论框架,将以上能量函数代入式(8)可得到节点选择各个信道的条件概率分布,即p(xix(t+1)通过多次信道选择后,所有节点将选择到具有较低能量的信道,此时整个网络就得到了具有较低能量的信道选择方案,也就得到了具有较高目标函数值的信道选择结果.为了使GSCS算法可以更好地收敛到具有全局最低能量的信道选择方案,引入退火策略:式中,T0为初始温度,t为算法迭代次数.算法收敛性分析:本文算法基于GibbsSampler理论,能量函数的设计符合该理论应用的充要条件,同时引入了退火策略.根据文献[25-26]的应用模式可知,当t→时,算法依概率收敛到具有全局最小能量的状态向量,即最优信道选择方案.此类证明过程在文献[27]中有详细论述,限于篇幅本文不做赘述.以下是具有退火策略的GSCS算法描述.4.3算法步骤1.计算当前温度:T=T0log(2+t);2.节点si根据式(16)分别计算各个信道c1,c2,…,ck的本地能量εsi(a(si),a(sj)j∈Bsi3.节点si依以下概率计算结果选择信道:μsi(a(si))=5实验结果及分析5.1仿真实验为了充分验证本文GSCS算法求解MQM问题的有效性,将其与遗传算法(GA)、文献[21]采用的线性规划算法(LP)、贪婪算法(Greedy)以及确定性算法(Deterministic)进行了对比实验.遗传算法.在已知网络全局信息的条件下,以信道选择方案为染色体并构成种群,以网络的QoMPage6为适应度函数.种群进行多次进化得到最优或近似最优的染色体(信道选择方案).线性规划算法.求解来源于式(4)的整数规划问题.贪婪算法.分别对每个节点进行信道选择,节点选择信道使得自身的监测质量MQN最大,这可以是分布式算法.确定性算法.每个节点根据式(16)计算本地能量,然后选择具有最小能量的信道,再将自身的信道选择结果发送给相邻节点.吉布斯采样信道选择算法、贪婪算法和确定性算法都是分布式算法,遗传算法和线性规划算法是集中式算法.其中,吉布斯采样信道选择算法的复杂度为O(2k·I),贪婪算法的复杂度为O(k),确定性算法的复杂度为O(2k·I).其中k为可选信道个数;I为算法迭代次数.可见,GSCS算法复杂度低,易于节点分布式实现.另外,虽然遗传算法是集中式算法,对于节点可实现性差,但是它经过足够多次迭代,能找到最优解或近似最优解,因此它的求解结果可以评价其它算法解的性能.表1给出了算法参数设置.T0(GSCS)pc(GA)pm(GA)初始温度T0是退火GibbsSampler的主要参数,当T0较大时,算法收敛速度较慢,全局搜索能力较强;当T0较小时,算法可能会快速收敛到局部最优解.大量实验结果显示,当T0在0.1到1之间取值时,算法求解性能较好.pc和pm分别为遗传算法的交叉和变异概率.多次实验结果表明,当pm=0.53,pc=0.1时,算法收敛速度较快,解的质量较优.本文在OPNET平台上进行了算法的仿真实验.OPNETModeler采用三层建模机制,最上层为网络模型,定制网络的拓扑结构;其次为节点模型,由相应的协议模型构成,定义设备特性;最底层为进程模型,以有限状态机模型来描述协议和算法.本文分别建立了网络级、节点级和进程级模型,对上述5种信道选择算法进行了仿真和比较.在网络级模型中,在500m×500m的区域内随机分布500个用户,用户的信息传输概率在[0,0.05]内取值①,在该区域内布置25个节点用于监测区域内用户的通信活动,如图2所示.由于仿真网络规模较大,图2仅给出网络级模型的一部分,其中两个深色图标为监测节点,其余浅色图标为用户.实验中,我们为监测节点都配备了单射频IEEE802.11.b接口卡,数据传输率为11Mbps,节点监测半径为120m,可选信道3个②,并且假设每个正交信道的带宽相同.仿真结果如图3和图4所示.由图3和图4可见,GA算法经过20s进化,收敛到近似最优解(QoM=15.89),但由于算法运行需要全局信息,且算法复杂度高,因此难以在实际网络中实现;LP算法也是集中式算法,虽然所求解的质量较高(QoM=15.03),但同样存在难以实现的①②Page7问题.在分布式算法中,本文GSCS算法比Greedy算法和Deterministic算法具有明显的性能优势.GSCS算法能在较短的时间内收敛到比较优的解(QoM=14.5),接近集中式算法的性能,而Greedy和Deterministic所求解的QoM分别为11.95和10.11.需要说明的是由于GSCS算法求解过程的随机性,所求解呈现出波动特性,且随着迭代次数的增加,波动幅度越来越小,波动频率越来越低,趋向稳定.由于无线设备信道切换操作延时非常小①,几乎不会对网络监测质量造成影响,因此本文在实验部表2多组实验统计结果平均最优QoM平均最优QoM14.5934.42515.87129.12410.1424.21314.9566.02111.9042.045本文还进行了可选信道数为12的比较实验.实验初始数据(用户的分布和信息传输概率)相同,但多个用户分别工作在12个信道上,运行GSCS算法实现监测节点的优化信道选择,算法收敛过程如图5所示.由于信道个数增加,工作于同一信道的用户个数减少,因此整个无线监测网络的QoM相对较小;同时,因为可选信道数增加,算法复杂度增加,所以算法需要更长时间才能收敛.图5可选信道数不同时GSCS算法性能比较由以上实验结果可见,本文GSCS算法基于GibbsSampler理论,利用节点和邻居节点之间的关系,以节点监测质量MQN构造能量函数,并引入退火策略,实现了最大化无线网络监测质量(MQM)问题的分布式求解,并且在解的质量和收敛速度方面均达到了良好的性能.本文GSCS算法引入了退火策略,见式(5)和(17).初始温度T0是退火策略的主要参数.以下拓展实验显示了退火策略对算法性能的影响.图6给出了在实验中未引入退火策略以及引入退火策略(不同T0参数)的GSCS算法收敛过程的比较.可见,未引入退火策略时,算法所求解会在一个较好解的附近跳动,难以收敛;引入退火策略后,算法的收敛分不对其进行评估.表2示出了多组实验的统计结果.其中,GSCS、GA和Deterministic算法在每组实验中均运行20次,得到平均的最优解QoM值;LP和Greedy算法因为是确定方法,所以只需运行一次.由表2可见,GSCS算法的解均近似达到了集中式算法GA和LP解的性能,明显优于分布式算法Greedy和Deterministic的解.另外,GSCS算法复杂度低,程序运行时间短.运行时间/s(1000iter.)性能得到改善.大量实验结果显示,当T0在0.1~1间取值时,算法综合性能较优.图6退火策略及初始温度T0对算法性能的影响5.2实际网络实验下面基于校园无线网络(IEEE802.11.bWLAN)的实际测试来评估本文GSCS算法性能.在一栋楼内布置了21个WiFi节点,监测时间为①GSM跳频通信应用中,无线设备信道切换频率可大于Page81pm~6pm共5个小时,每个节点可以获取约320000个MAC帧,这些节点总共可以监测到622个工作在3个非重叠信道的用户.其中工作于第1、2、3信道的用户数分别为349、118、155个.在622个用户中,信息传输概率(在单位时间内用户活动时间的百分比)在0~0.01、0.01~0.02、0.02~0.04之间的用户数分别为578、15、29.可见,除了少数用户活动比较频繁外,大部分用户的信息传输概率小于0.01,平均信息传输概率为0.0026.图7给出了在不同监测节点规模下网络监测质量的变化.可见,当节点数从5增加到21时,网络监测质量(被监测到的活动用户数)逐渐增加.在不同节点规模的实验中,改变节点位置进行多次实验,统计出网络监测质量QoM均值.由于用户的平均活动概率为0.0026,因此在每个时间段内活动用户数不超过1.7个.由5种算法实际运行结果可见,本文GSCS算法明显优于Greedy和Deterministic算法,接近于集中式算法GA和LP的性能.在节点数为21的测试实验中,GSCS算法的收敛过程如图8所示,与之前的仿真结果基本一致.图8在实际网络中节点数为21时算法收敛过程6结论无线网络是物联网的重要组成部分.本文重点研究了无线网络的分布式监测技术,定义了节点监测质量,描述了最大化无线网络监测质量MQM问题,并引入退火GibbsSampler理论提出了求解算法.以节点监测质量构造本地能量函数,计算各信道的选择概率,完成对信道的优化选择.节点运行本文GSCS算法仅需要本地信息和与其相邻节点的信道信息(为获取该信息的通信开销甚微).该算法设计符合GibbsSampler的理论框架,具有可证明的收敛性,同时算法复杂度低,易于节点分布式实现.大量实验结果证明该算法可以实现MQM问题的分布式求解,算法收敛速度快,且解的质量近似达到了集中式算法的性能.作为下一步工作,我们将进一步引入相关理论增强监测节点的学习能力,使其可以感知和预测用户信息,并基于此完成对信道的动态优化选择.
