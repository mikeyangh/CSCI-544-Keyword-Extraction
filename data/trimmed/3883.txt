Page1未来互联网试验平台梁军学1)林昭文1)马严1),2)1)(北京邮电大学网络技术研究院信息网络中心北京100876)2)(北京邮电大学智能通信软件与多媒体北京重点实验室北京100876)摘要相对于互联网上层应用和底层通信技术的蓬勃繁荣,互联网的基本网络架构并没有得到同步发展,还是基于设计之初的TCP/IP协议.随着应用环境、用户需求和底层设施的不断发展变化,现有的网络结构已暴露出越来越多的缺陷.针对这些问题,研究人员提出了许多新的网络架构、概念、服务、协议和算法,以构建不同于现有互联网的新型未来互联网.不过,任何一种新的思想在实现或部署到真实的网络之前,都必须经过严格的测试和验证.因此,构建大规模的、真实的、可控的试验平台不仅是未来互联网研究的基础,也是对未来互联网本身探索和研究的一种途径.文中从规模、功能、开放性等基本特性以及科学实验要素、网络元素类型三个方面对试验平台进行了归纳和分类;分析了试验平台的结构化原则和分层结构;重点分析和总结了构建试验平台的关键技术,包括实验描述语言、控制框架和网络资源分片技术;分析了国内试验平台的发展现状;最后探讨了未来互联网试验平台的发展趋势.关键词未来互联网;试验平台;全球网络创新环境;控制框架;资源分片;下一代互联网1引言经过40多年的发展,互联网已经成为与人们工作、生活息息相关、不可缺少的基础设施之一.然而,相对于互联网上层应用和底层通信技术的蓬勃繁荣,互联网的基本网络架构并没有得到同步发展,还是基于设计之初的TCP/IP协议.随着应用环境、用户需求和底层设施的不断发展变化,现有的网络结构已暴露出越来越多的缺陷.例如,互联网的商业化带来了网络安全问题,无线通信的发展引入了设备的移动性问题,物联网的兴起又使低能耗成为关注点之一.此外,IP地址资源的枯竭、服务质量的保证、网络管理的部署、路由的可扩展性问题,都给现有互联网的发展带来巨大挑战.针对上述问题和挑战,研究人员提出了许多新的网络架构、概念、服务、协议和算法,以构建不同于现有互联网的新型未来互联网.从研究思路来看,这些研究可分为三种路线:一种是“改良式”[1],即针对现有互联网体系结构存在的不足进行增量式修补;第二种是“革命式”,即构建一套全新的网络体系架构,以从根本上解决互联网面临的问题[1];第三种是介于两者之间的“演进式”路线[2],即保持互联网的核心和设计原则相对稳定,谨慎地改变约束其扩展的基本要素.改良式路线具有较强的延续性与可操作性,短期内能够取得较好的效果,但是长期来看,补丁式的改进反而可能会降低整个互联网架构的灵活性、可靠性和可管理性,难以从根本上解决互联网所面临的问题.革命式路线虽然有良好的愿景,但需要重新构建网络,在实际中难以大规模部署和验证,提出的很多方案由于部署代价难以承受,至今尚未得到大规模的实际应用.演进式路线试图在两种路线之间取得较好的折衷和平衡,以在满足互联网需求不断扩展的同时又能实现稳定过渡,但能否找到一个为各方所接受的平衡点,目前来看也面临着不小的困难.无论采用何种路线,任何一种新的算法、协议或体系架构在部署或应用前,都必须经过严格的测试和验证,都需要构建相应的实验验证平台.从互联网的发展历史来看,互联网本身就起源于实验网,作为互联网雏形的阿帕网,最初就是只有几个节点规模的实验网.因此,未来互联网的发展也必须且只能通过试验平台的构建来支持和推动.从一定意义上说,这些试验平台就是新型未来互联网的雏形,对试验平台的研究本身就是对未来互联网探索的一种重要方式.本文第2节归纳和总结试验平台的分类;第3节分析试验平台的体系架构;第4节至第6节分别分析和总结构建试验平台的关键技术,包括实验描述语言、控制框架和网络资源分片技术;第7节分析国内试验平台的发展现状;第8节展望未来互联网试验平台的发展趋势.2试验平台分类未来互联网试验平台,顾名思义,就是为未来互联网的研究、测试、验证而提供的计算机硬件和软件操作环境.关于试验平台的分类,目前还没有统一的标准,也未见相关文献分析.一般而言,我们可根据试验平台的功能、规模和开放性等基本特性进行分类,但这种分类无法反映试验平台的技术特点和对未来互联网研究的支持作用.因此,除按照上述特性对试验平台进行基本分类外,本文还从实验要素和网络元素两个方面对试验平台进行了归纳和分类.2.1基本分类根据试验平台的部署规模划分,可分为全球级、国家/地区级、本地级三类.全球级试验平台如Planet-Lab等是分布于世界各地的、具有全球影响力的大规模试验平台,是各个国家和地区间开展网络研究合作的重要依托.国家/地区级试验平台一般由国家/地区的政府、高校和相关科研机构发起和建设的较大规模试验平台,如美国的GENI(GlobalEnvironmentforNetworkingInnovations)、欧盟的FIRE(FutureInternetResearchandExperimenta-tion)、日本的JGN-X(JapannewGenerationNet-worktestbed)①、韩国的K-GENI(KoreaGENI)[3]①JGN-X.http://www.jgn.nict.go.jp/Page3以及我国的CNGI(ChinaNextGenerationInternet)等.本地级试验平台通常由某一高校或科研机构独立建设,其规模受限于本地站点的资源数量,典型的有美国华盛顿大学的开放网络实验室(OpenNet-workLaboratory,ONL)[4]、美国海军研究实验室开发的CORE(CommonOpenResearchEmulator)①、意大利那不勒斯费德里克二世大学开发的Neptune②等平台.根据试验平台的功能划分,可分为专用型和通用型两类.专用型试验平台是指为了某种特殊网络实验而构建的平台.以欧盟的FIRE项目为例,其中的BonFIRE③主要为大规模的云应用、服务和系统提供测试环境;SmartSantander④的主要目标是为智慧城市相关的应用和服务提供城域网规模的实验设施;EXPERIMEDIA⑤则主要为未来媒体网络(FutureMediaInternet,FMI)[5]提供大规模的研究设施.通用型试验平台一般提供可由用户定制的虚拟网络环境,并提供相应的编程接口,允许实验人员上传其开发的实验软件.当然,通用型试验平台并非支持所有类型的实验,所提供的实验环境也受其底层采用的技术限制.例如,由于PlanetLab的节点是重叠在现有的IP网络之上,因此任何网络层的实验都会受到底层真实网络的影响而难以控制.而Emulab、NetKit[6]、Modelnet[7]等平台则采用软件来仿真网络设备的功能,难以保证较高的真实性和性能.根据试验平台的开放性划分,可分为完全开放、有限共享和私有平台三类.完全开放是指试验平台开放给所有的实验人员,如美国的PlanetLab、Emulab、ONL、欧盟的OFELIA(OpenFlowinEuropeLinkingInfrastructureandApplications)⑥等,实验人员只需注册为成员并提供实验目的等说明,就可以申请实验资源并完成实验.有限共享是指实验资源仅在特定的组织或机构间共享,如欧盟的OneLab⑦允许欧洲范围内的科研机构使用,我国的DragonLab[8]则在会员单位之间共享实验资源.私有平台则仅限于建设试验平台的组织或机构内部使用,如以上提到的CORE、Neptune、NetKit、Modelnet等试验平台均为私有平台.2.2根据实验要素分类试验平台首先是一种科学实验工具,因此可以根据科学实验中的三要素,即实验者、实验对象、实验手段来分析.实验者是实验活动和认识的主体,不同实验者由于拥有的资源、服务的对象、研究的主体不同,其对试验平台或工具的要求也不同.未来互联网的推动力量来自两个阵营,一是网络服务的提供者,即电信运营商,另一方是网络服务的使用者,即互联网用户.一般而言,电信运营商所构建的试验平台多基于真实的物理设备和用户流量,功能上侧重于对传输等服务的优化及网络的管理,如欧盟的PII(PanlabInfrastructureImplementation)⑧项目,其主要目标就是开发高效的技术和机制来实现欧洲现有电信试验网的联合,为验证新的运营级服务、网络技术和商业模型提供真实的测试环境.互联网用户或社区所构建的试验平台多基于虚拟化和仿真技术,功能上侧重于新应用、协议和算法的验证,如欧盟的FEDERICA(FederatedE-infrastructureDedicatedtoEuropeanResearchersInnovatinginComputingnetworkArchitectures)[9]项目,其主要目标就是将分布在欧洲范围内的计算机和网络实验资源联合起来,构建一个端到端隔离的实验环境,用于验证网络安全、分布式协议和应用以及Clean-Slate式的未来互联网体系结构.实验对象是实验者所要研究的对象,是实验活动和认识的客体.未来互联网研究中的实验对象就是研究人员为了改进或变革网络所提出的新的网络架构、概念、服务、协议和算法等.以未来互联网体系架构为例,目前学术界已围绕互联网的可扩展性、动态性、安全可控性等问题提出了多种解决方案[10],如以CCN(Content-CentricNetwork)[11]/NDN(NamedDataNetwork)[12]为代表的面向可扩展性的体系结构、以MobilityFirst[13]为代表的面向动态性的体系结构、以SOFIA(ServiceOrientedFutureInternetArchitecture)[14]为代表的面向服务体系结构、以及国内张宏科教授等提出的两层可信网络体系结构[15]、汪斌强教授等提出的可重构柔性网络架构[16]等.为了研究这些体系结构的可行性,都需要有相应的试验平台来支持.实验手段是实验者和实验对象之间的中介,由实验仪器、工具、设备等客观物质条件组成,在一定①②③④⑤⑥⑦⑧Page4意义上就是试验平台本身.根据不同的实验手段和验证方法,可将试验平台分为模拟软件、仿真平台、试验床和实验网络四种.模拟软件(NS2、NS3等)是一种面向对象的网络模拟器,可根据实验的网络拓扑和特性建立相应的数学模型,并允许用户通过实验脚本来控制实验.模拟软件虽具有控制灵活、成本低等优点,但其最大的缺点是缺乏真实性,无法反映真实网络的状态和影响.仿真平台如Emulab、CORE等采用虚拟化的服务器集群来仿真分布式的网络,在一定程度上解决了真实性问题,但仿真平台一般采用基于软件的方式来仿真网络设备,其性能难以与真实硬件相比,另外仿真平台多数是单个站点内的封闭系统,因此部署规模受到限制,难以支持大规模的网络实验.试验床一般通过重叠网等技术将分布在多个站点的实验网络连接起来,并通过真实的互联网来传输实验流量,因此在真实性和规模上都有较好的保证,但对实验的部署、控制以及回放缺少有效的支持,典型的试验床有PlanetLab、OneLab等.实验网络是指具有实验性质的生产网络,如美国的Internet2和我国的CERNET2(ChinaEducationandResearchNetwork)等,它们既作为与商业运行网络类似的基础设施,同时又承担着科学研究项目的实验和验证工作,为保证网络的正常运行,实验网络所承载的实验都有严格的要求,一般不承载具有破坏性创新的实验.2.3根据网络元素分类试验平台包括计算、存储、网络等资源,其中网络资源的特性决定了试验平台功能和性能,因此可根据组成网络资源的网络元素(设备)来分析.试验平台中的网络元素可分为软件和硬件两类,其中软件包括模拟器和仿真器,硬件包括商业网络设备、基于NetFPGA(FieldProgrammableGateArray)的网络设备、基于网络处理器的网络设备以及新型的OpenFlow①交换机等.网络模拟器是一种脱离真实网络而独立运行的软件程序,它通过建立实际网络系统的数学模型并按照相同的运行机理来模拟真实系统的动态行为.例如NS2模拟器中的网络元素就是一个面向对象的类实例,通过相应的成员变量和方法来提供网络状态的控制以及与其它网络元素的交互.网络仿真器使用仿真接口作为真实网络应用程序和仿真对象之间的桥梁,它可以接收与被仿真对象一样的数据,执行同样的程序并获得相应的结果.与模拟器不同的是,仿真器与真实网络之间存在交互,它通过软件的方式为网络协议或应用构建一个虚拟的网络运行环境并影响真实的数据流.如Emulab、CORE、Nep-tune等仿真平台就采用软件交换机和TC/Netem、Dummynet[17]等链路仿真工具来仿真网络设备和链路.商业网络设备是指由制造商提供的用于生产网络的硬件设备,与模拟器和仿真器相比,它具有较高的包处理性能和更好的规模扩展性,但现有的网络设备都是封闭的系统,仅提供有限的功能和已知的服务,只能转发标准的或预定义的数据包,不具有动态性和灵活性.为支持研究人员对已有的数据包进行修改或引入自定义的数据包,需要网络设备提供可编程的网络接口.典型的可编程网络设备有NetFPGA和网络处理器(NetworkProcessor,NP),如ONL就使用了基于网络处理器的路由器作为用户可定制的IP处理设备.OpenFlow(OF)交换机是一种新型的可编程网络设备,其基本原理是将网络设备的控制面从硬件中独立出来,交由一个集中式的软件控制器来决定每个数据包的流向,从而实现了数据转发和路由控制的分离[18].表1总结了不同类型网络元素的性能和灵活性等特性,从表中可以看出,OF交换机具有与商业网络设备同等的性能、易扩展性以及实现的低复杂性,同时又具有开放的、灵活的可编程能力,因而逐渐成为构建未来互联网试验平台的首要技术[19],许多试验平台如GENI、OFELIA、OpenLab②等都采用了OpenFlow技术.模拟器中中好中否是仿真器低差好中是是商业网络设备高好差低是否NetFPGA高差中高是是网络处理器高中中高是是OF交换机高好好低是是3试验平台体系架构从以上对试验平台的分类研究中可以看出,试验平台不仅在规模、功能和开放性上具有多样性特点,而且由于参与的实验要素和采用的网络元素不同而呈现出复杂多变的特点.为更好地认识这种多①②Page5化技术逻辑切片,以允许多个实验共享资源;(2)可分片性.指试验平台的资源可通过虚拟(3)隔离性.指用户的实验之间互不影响,若试验平台构建于生产网络之上,还指用户的实验不会影响生产网络;(4)可编程性.指提供给用户的资源应具有可编程能力,以允许用户开发和部署新的架构、应用、协议和算法;样性和复杂性,需要理解隐藏在各种平台背后的体系架构.根据SunTone体系架构方法学的定义,“体系架构是一组结构化原则,这些原则使得系统能够由一些较为简单的系统组成,它们有彼此独立的环境,但作为一个整体的大系统时又能彼此保持一致”.因此,分析试验平台的体系架构,就是根据其设计目标或结构化原则,将试验平台划分为若干独立的层次或模块,通过分析这些层次或模块之间的交互机制,进而理解和把握构建试验平台的关键技术.3.1试验平台的结构化原则根据对GENI、FIRE等项目系统需求和建设目标的分析,试验平台的结构化原则可归纳为以下5个:(1)统一性.指试验平台应为用户提供统一的实验抽象模型,以允许用户定义符合标准的、可重用的实验描述;(5)扩展性.指试验平台的规模和资源类型是易于扩展的,以满足实验对大规模的、真实异构的资源需求.3.2试验平台的分层结构试验平台本质上是构建于现有互联网上的一种服务平台,因此其分层结构可以按照互联网的用户、服务提供商、基础设施提供商三层模型划分为实验表示层、实验服务层和实验设施层.其中实验表示层是用户实验的抽象模型,它通过一组规范化的语义抽象描述了一个实验的本质属性和生命周期,为实验服务层提供了服务的对象实体.实验服务层是实验服务的提供者,它利用基础设施提供的实验资源,通过动态的调度组合实现资源的优化分配,并将抽象的实验对象实体映射到相应的资源分片上,同时通过一定的机制实现实验的隔离、控制、监测和管理等功能.实验设施层是实验服务的承载者,它通过虚拟化等技术,屏蔽底层物理资源的异构性,为实验服务提供抽象的资源池和访问资源的统一接口.3.3试验平台的关键技术根据上述结构化原则和体系架构描述,在设计未来互联网试验平台时,需着重解决如下3个关键问题:(1)实验描述语言,它提供了一组规范化的语义来描述网络实验的网络拓扑和实验的部署、控制、输出等特性,为用户管理实验的生命周期提供统一的视图.实验描述语言是用户和试验平台之间交互的接口,它解决的是试验平台的统一性问题;(2)控制框架,它定义了一组管理实体和实体间的通信接口及流程,负责调配、组装试验平台的资源和服务,以为用户提供隔离的、可编程的、可扩展的实验环境.控制框架是试验平台的核心,它解决的是试验平台的隔离性、可编程性和扩展性问题;(3)网络资源分片,即底层的实验网络可同时被多个用户共享,且每个用户都认为独占所分配的资源分片.网络资源分片是试验平台的基础,它解决的是试验平台的可分片性问题.4实验描述语言作为试验平台的重要组成部分,实验描述语言的研究目前还没有受到足够的重视,除传统的网络模拟软件具有较完善的实验描述语言外,大多数试验平台的实验描述语言还在发展的过程中.本节首先对实验描述语言进行分类,然后按照分类逐一进行分析.4.1实验描述分类如2.2节所述,试验平台根据其所采用的实验手段不同,可分为模拟软件、仿真平台、试验床和实验网络四种.模拟软件一般采用标准化的编程语言或脚本语言来描述实验,并通过模拟器来解释和执行实验过程.这种实验描述语言与模拟器的执行具有很高的耦合度,可完整地定义和描述实验中的每个元素和过程,本文称之为面向过程的实验描述.试验床在本质上是一种分布式网络平台,往往分布于不同的研究机构,分属于不同的管理域,因而难以实现自动的实验软件部署和实验过程的控制管理,目前大多数试验床仅能提供对实验资源的描述,本文称之为面向资源的实验描述.仿真平台对实验的控制和管理能力介于模拟平台和试验床之间,因此其实验描述与仿真平台内在的实现机制紧密相关,除可采用面向资源和面向过程的实验描述之外,还可采用一种混合的描述方法,如在资源描述的基础上增加实验软件的部署等描述,但实验的控制或结果输出等仍然交由用户手动完成,本文称之为面向平Page6台的实验描述.实验网络由于是一种生产网络,因此其实验通常不需要描述,而是直接部署到网络中.下面分别分析三种不同的实验描述.4.2面向过程的实验描述OMNeT++(ObjectiveModularNetworkTestbedinC++)①是一种面向对象的离散事件模拟工具,在模型描述、网络拓扑定义、模型实现、跟踪支持、调试等方面都有较强的优势.OMNeT++采用NED(NetwrokDescription)和C++两种语言来建模.其中,NED用来描述模型的拓扑结构,NED虽然简单,但具有丰富的拓扑定义功能,且可以实现动态加载,便于更新仿真模型的拓扑结构;C++则用来实现模型的构建和消息的处理等功能.SSFNet②是一个Internet网络及其协议的建模软件,由基于JavaSSF(ScalableSimulationFramework)的组件构成,主要支持IP包级别上的细粒度模拟.SSFNet使用领域建模语言(DomainModelLanguage,DML)程序建模网络.DML程序利用简化过的语言表示各种网络设备、连接和协议,而不是强制网络建模者使用SSF实现语言(通常是C++或Java)进行编程.与标准的编程语言相比,DML具有更强的结构性,并对网络模拟制定了标准的格式,因而具有更强的可读性.其它的模拟软件,如NS2、NS3、J-SIM③、GloMoSim④、OPNET⑤、QualNet⑥,在网络建模的能力上各有区别,但就其建模语言或实验描述而言,都采用了基于高级编程语言或脚本语言的方式,因此均属于面向过程的实验描述.4.3面向资源的实验描述以GENI为代表的试验床多数采用了面向资源的实验描述.这里的资源既可以是物理资源,如路由器和交换机,也可以是逻辑资源,如CPU时间或无线频段.从用途来看,资源描述可用于站点的资源发布、用户的资源请求和平台的资源分配三方面.可见,资源描述是用户、基础设施提供者和实验服务提供者三者之间的黏合剂,是试验平台中各实体间交互的基础.RDF(ResourceDescriptionFramework)⑦是W3C(WorldWideWebConsortium)在XML(ExtensibleMarkupLanguage)的基础上推荐的一种标准,用于表示任意的资源信息.NDL(NetworkDescriptionLanguage)⑧是在RDF的基础上发展起来的一种用于描述物理网络的描述语言.NDL定义了一组实体和属性,为描述复杂的网络拓扑提供了一组共享的通用语义,被广泛应用于需要描述网络的项目中.例如,GENI的子项目集ORCA就采用了NDL-OWL⑨来描述网络资源,NDL-OWL利用OWL(OntologyWebLanguage)对NDL作了进一步扩展,增加了新的类层以描述服务器、虚拟机、云服务、存储服务器等边缘资源.为了在各子项目间提供资源共享和互操作服务,GENI定义了统一的资源规范RSpec(ResourceSpecification)瑏瑠,不仅对异构资源(如计算机网络、无线网络、传感器网络和存储网络等)的描述作了统一的规范,也将测量等带有资源性质的服务纳入到描述框架中.与GENI类似,FIRE子项目PII也在其Teagle瑏瑡架构中利用RADL(ResourceAdapterDescriptionLanguage)[20]来描述资源适配器(ResourceAdapter,RA)中间件,其中RA是用户和试验床资源间的代理,用于资源的请求、发布和分配.4.4面向平台的实验描述资源描述是实验描述的基础,但仅有资源描述对于试验平台而言还远远不够.例如对于大规模的网络实验,如果实验软件的部署和软件命令控制均由人工完成,则实验的效率和效果将大打折扣.Emulab采用了以Tcl编写的扩展NS脚本来配置实验,但由于NS中的实体与Emulab中的虚拟资源具有复杂的关系,因此在句法层次上难以准确解析.OEDL(OMFExperimentDescriptionLanguage)[21]是OMF控制框架的实验描述语言.它是一种特定领域的叙述性语言,它除了可以描述需要的资源以及配置和连接方式外,还可以定义实验本身的协调和相关上下文.OMF的实验描述以Ruby语言编写,可分为资源描述/配置和事件/任务描述两部分,OMF的实验控制器在实验运行期间会监视定义的事件,并在事件发生时执行相关的任务.NEPI(NetworkExperimentationProgrammingInter-face)[22]的目标与OEDL类似,它是一个网络实验生命周期的管理工具,其长远目标是为任意试验平台提供一致的接口,使研究人员可以使用统一的工①②③④⑤⑥⑦⑧⑨瑏瑠瑏瑡Page7具就可以在模拟平台、仿真平台和试验床甚至三种的混合平台上完成实验.NEPI使用Python脚本来描述实验,目前已支持NS3模拟平台、Netns仿真平台①和PlanetLab试验床.5试验平台控制框架控制框架的主要任务是管理底层的资源和服务,由于试验平台的资源可能分布在不同的站点,所提供的服务可能采用不同的技术,同时多个试验平台之间也需要共享资源和服务,因此控制框架除管理本地资源和服务外,还需要管理跨站点、跨平台的资源和服务.本节首先介绍GENI的通用控制框架,然后以PlanetLab为例,介绍多平台的联邦框架,最后介绍PanLab的基于Web的联邦框架及其演进.5.1GENI通用控制框架GENI的控制框架可分为两种,一种是通用控制框架,规定了控制框架实现的一般架构;另一种是专用控制框架,是特定试验平台控制框架的具体实现.本文仅介绍通用控制框架,专用的控制框架实现可参阅相关文献[23-24].GENI通用控制框架主要包括组件管理器、集合管理器、服务管理器和结算中心.其中组件管理器实现了组件内的资源虚拟化和资源分隔,并提供可编程能力和安全保证;集合管理器负责集合内的资源管理(如授权、资源调度分配)以及集合间的资源共享;服务管理器则为用户实验提供特定的服务支持;结算中心是控制框架的核心,它是一个管理和注册中心,负责维护用户、资源切片和组件的信息,这些信息可用于组件或集合的访问控制、控制策略、信任机制和联邦机制,另外还包含了可选的票据日志和软件仓库,以保存资源使用记录和管理GENI提供的软件.此外,控制框架还定义了所有实体之间的接口、消息类型、实验过程中实体之间的消息流以及在实体之间传送消息的控制接口.5.2多平台联邦框架PlanetLab的联邦架构可分为以下四种,其中前两种是同构平台间的联邦,后两种是异构平台间的联邦.多集合联邦.多个平台共享同一个注册表,PlanetLab的分片管理器从注册表中获取各个平台上的资源授权,然后利用PlanetLab的集合管理器来创建分片.完全联邦.每个试验平台都实现了分片管理和注册表功能,因此每个平台都可独立于其它平台.使用某个试验平台的用户可以在另一个试验平台上的组件内创建和管理资源切片.基于替代分片管理器.其它试验平台的用户通过自身的分片管理器访问PlanetLab的注册表以获得资源授权,然后通过与PlanetLab的集合管理器和组件管理器交互来完成分片的创建和管理.基于通用注册表.PlanetLab和其它试验平台共享同一个通用注册表,所有资源分片的授权仍由PlanetLab的注册表集中管理,但其它试验平台可直接调用自己的集合管理器来完成分片的创建和管理.5.3基于Web的联邦框架及演进PanLab各站点间的联邦采用了基于Web服务的方式,用户可以通过Web来查询和请求可用的资源.可用的资源通过元数据的形式保存在数据库中,PanLab需要提供处理机制来标识、定位和分配多个站点的资源.为平滑地将多个异构的试验平台联邦为一个统一的平台,PanLab采用了逐步演进的方法,以逐步提高资源发现和分配的自动化水平,PanLab演进分为以下3个阶段:(1)集中式.这是演进的第一阶段,每个参与的站点在Web门户上手动公布其试验床的描述和共享资源的细节.目前PanLab已实现了基于Web的搜索服务Teagle,实验用户向Teagle提交实验资源的请求,由Teagle在试验床元数据库中查找匹配的资源;(2)手动配置.在这个阶段中,参与的站点利用特殊的中间件发布其试验床元数据,并对外提供一个基础设施服务接口.Teagle查询元数据库并通过该服务接口请求所需的资源,由于采用了虚拟化技术,资源的真实位置将会被隐藏;(3)按需配置.在此最后阶段中,Teagle将根据用户的资源请求直接与虚拟资源层交互以自动地分配所需资源.Teagle将提供尽力而为的配置服务,但复杂的配置可能仍需要用户直接访问分配的资源来完成.6网络资源分片资源分片主要是以虚拟化技术为基础,目前服①Netnsemulator.http://yans.pl.sophia.inria.fr/trac/Page8务器虚拟化和存储虚拟化已相对成熟,而网络虚拟化还有许多问题需要解决.本文主要讨论网络虚拟化中的网络资源分片机制,包括以PL-VINI①为代表的基于重叠网的分片机制和以FlowVisor[25]为代表的基于代理的分片机制.6.1可分片网络资源为了虚拟化一个网络,首先要确定哪些资源需要被虚拟化或分片,Sherwood等人[25]认为主要有以下5种资源:(1)带宽.目前有几种较常见的方法来提供带宽的分割,如光网络中的WDM、分组交换网络中的链路仿真等;(2)拓扑.每个分片应拥有自己的网络节点以及链路视图,能“感受”虚拟网络分片上的网络事件(例如链路失效和转发循环);(3)业务流.广义的业务流既可以是从/到某个地址集的所有分组,也可以是所有属于某个用户组的所有业务或者特定的分组流,如所有的Http流量、所有具有奇数以太网地址的流量等;(4)设备CPU.交换机和路由器的计算资源也需要被分片,如果没有适当的CPU分片,交换机将停止转发低速路径上的分组和更新统计计数器,更重要的是,将停止处理转发表的更新(如路由变动);(5)转发表.网络设备一般都支持固定数目的转发规则,转发表的分片应保证多个分片的包转发不会互相影响.6.2基于重叠网的分片机制PL-VINI是在PlanetLab基础上构建的一个虚拟化服务层.PlanetLab的节点采用了LinuxVServer虚拟化技术,VServer提供了基于切片的资源控制,如CPU调度和带宽分割.PlanetLab的CPU调度器保证了每个切片能够“公平共享”节点的可用CPU资源,并支持临时的共享增长机制.PlanetLab中的网络分割由Vnet模块来提供.Vnet记录并复用进出的业务流量,为每个分片提供对底层网络设备根级别的访问视图,每个分片都仅能访问属于自己的流量和特定的网络端口.PL-VINI的虚拟网络设备采用了UML(UserModeLinux)②,在每个用户的虚拟网络切片中,PL-VINI为网络拓扑中的每条链路在端点的UML实例中创建了一个隧道,因此运行在UML中的路由软件就可以在重叠的网络上拥有一个虚拟的网络.PL-VINI还修改了Linux的TUN/TAP设备内核以允许网络实验分片中的应用能够在重叠的虚拟网络上收发分组.6.3基于代理的分片机制FlowVisor是一个特殊的OpenFlow控制器,可看作是OpenFlow交换机和多个OpenFlow控制器间的透明代理.FlowVisor通过流空间(flow-space)来分片业务流量.所谓流空间就是属于某个分片的一组OpenFlow流表项.FlowVisor通过确保两个分片的流空间在拓扑中不重叠来分割两个分片.例如,两个实验人员分别通过控制器A和B来控制它们的OpenFlow网络分片,B中发送到交换机的消息被FlowVisor截获,然后FlowVisor根据预定义的资源分配策略对消息进行透明地重写并发送到分片B所对应的交换机端口.与此类似,从交换机到客户控制器的消息也要先通过FlowVisor匹配,然而再转发到匹配的控制器.FlowVisor对带宽和CPU的分片依赖于具体的硬件或软件支持,如使用VLAN标签中的优先级比特位来实现带宽分割,使用速率限制器来实现交换机的CPU分割等,但这些分割机制目前还并不完善,需要在未来工作中进一步研究.7国内试验平台发展现状我国政府和学术界也十分重视未来互联网及其试验平台的建设,如《“十二五”产业技术创新规划》明确将互联网新技术作为信息产业发展的重点,并早在2003年就启动了以CNGI(ChinaNextGener-ationInternet)③为代表的下一代互联网项目.在平台建设方面,目前主要取得以下成果:一是以CNGI为依托,搭建了以IPv6为核心的新一代互联网试验平台CERNET2,目前已成为世界上最大的纯IPv6网络.二是由国家宽带网络与应用工程技术研究中心等单位建设的下一代广播电视网(NextGenera-tionBroadcastingnetwork,NGB)国家试验床,重点支持柔性网络技术、三网融合技术、NGB技术、新型业务和商业模式的实验.目前已在上海等长三角城市展开规模部署,可支持网络电视、视频点播等大规模并发流媒体业务.三是由清华大学和锐捷网络等发起、国内多所高校共建的DragonLab项目,它采用了基于联邦架构的资源开发模型,重点集中于对①②③Page9流量研究、主动测量和BGP路由研究的支持,并提供了专用的客户端,以支持用户在远程以可视化的方式定制实验环境.总体来看,与国外发达国家相比,我国在未来互联网试验平台建设上还存在一定差距.主要表现在以下几个方面:一是先进性和前瞻性不足,所建实验网络大部分主要是为了解决眼前和短期的问题,无论是CERNET2还是NGB都是基于原有的IP架构,缺乏对后IP时代网络的考虑;二是规模偏小,影响力不足,除CERNET2和NGB等具有商业特性的实验网络外,其它的试验平台无论是在资源数量还是连接站点数量都无法与国外PlanetLab等项目相比;三是缺乏与国外的合作和交流,除IPv6实验网与国外有部分合作外,很少有跨国的试验平台项目.近期,国家高技术研究发展计划(863计划)启动了“未来网络体系结构和创新环境”项目.该项目由清华大学牵头,汇集中国科学院计算技术研究所、北京邮电大学、东南大学、北京大学、工业与信息化部电信研究院、解放军信息工程大学、国防科学技术大学等国内重点科研院校和中兴、华为、华三、神州数码、锐捷等国内知名网络设备厂商,目标为构建支持未来网络体系结构和新协议创新的网络平台,即未来网络体系结构创新环境FINE(FuturenetworkINnovationEnvironment),为网络技术创新提供支撑.可以预见,FINE的建设将进一步缩小我国与发达国家在未来互联网试验平台上的差距,加快我国未来互联网的技术创新和应用,提高我国在未来互联网乃至整个信息技术领域的核心竞争力.8总结未来互联网演进的复杂性、不确定性,决定了试验平台的建设必然是一个长期的、复杂的、逐步演进的过程.现有试验平台在资源类型、平台接口、实验服务等方面所呈现的多样性也反映出未来互联网试验平台还处于动态探索阶段,需要我们及时分析总结,以理解现有试验平台的体系架构和关键技术,把握未来互联网及其试验平台的发展趋势.通过以上的调研和分析,结合当前云计算、Web服务以及软件定义网络等技术的发展,本文认为在建设我国未来互联网试验平台的过程中,需要把握以下3个趋势:(1)Web服务尤其是语义Web理论和技术的发展为研究开发统一的网络实验描述语言提供了可能.目前的试验平台采用了不同的实验描述语言,不同平台之间的实验描述脚本很难共享,使得大量的研究成果难以被同行验证或采用,不利于形成开放、透明、高效的研究体制.正因如此,未来互联网试验床的构建者已开始探索统一的实验描述语言,如GENI项目的RSpec首先从实验资源的层面进行统一,OEDL和NEPI在实验的部署和控制方面进行了初步探索,NEPI还试图对三种类型的平台语言进行统一,目前也取得了一定的进展;(2)以OpenFlow为代表的软件定义网络技术(SoftwareDefinedNetwork,SDN)[26]为未来互联网试验平台的构建提供了新的思路和方法.现有网络设备的封闭性使得网络技术的发展和创新受到很大的局限,SDN旨在实现网络互联和网络行为的可编程和开放式接口,从而支持未来各种新型网络体系结构和新型业务的创新.OpenFlow技术作为SDN转发抽象的实现之一,已经受到学术界和工业界的普遍关注.目前包括GENI、FIRE计划中的很多项目已开始采用SDN/OpenFlow来构建试验平台.我国的FINE项目也采用SDN作为基础,并将实现具有中国自主知识产权的软件定义网络技术作为研究目标之一;(3)云计算尤其是基础设施云将成为构建试验平台基础设施的重要途径.目前的试验平台大多采用专有的资源管理机制,给各个平台间的融合带来了很大困难.近年来,Eucalyptus①、OpenStack②、OpenNebula③、CloudStack④等开源云平台蓬勃发展,它们对异构虚拟资源管理的能力为开发各种云计算平台提供了良好的基础设施服务.使用开源云平台构建试验平台可以使实验服务的提供与基础设施的提供相分离,基础设施的服务由开源的IaaS软件来提供,而实验服务只作为其上的一种应用.这种架构使得试验平台很容易集成各种网络资源和第三方软件,因而具有更好的扩展性.如美国的ExoGENI[27]项目就采用OpenStack开放云平台作为构建试验平台的基础.致谢在本文撰写和修改过程中,审稿专家和编辑部老师提出了许多宝贵意见,在此表示衷心感谢!①②③④Page10
