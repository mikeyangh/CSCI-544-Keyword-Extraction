Page1一种具有业务感知的多路径QoS路由策略符琦(湖南科技大学计算机科学与工程学院湖南湘潭411201)摘要在基于IEEE802.11e协议的无线Mesh网络多路径数据传输过程中,为了有效区分不同类型的多媒体数据,802.11e协议的EDCA机制采用了4个具有固定信道竞争参数的AC队列来实现不同业务类型数据包的存储转发,这种参数预设的竞争机制在多跳环境下不能提供有效的业务区分与QoS性能保障.同时,传统的多路径路由大多因为采用了最小跳数为其路由度量,未能反映实时的链路质量和节点状态,因而无法为不同类型的业务流提供其所需的高质量传输路径.为此,文中提出一种基于具有业务感知的多路径QoS路由策略TA2P(Traffic-AwareAOMDVProtocol),该策略对静态EDCA信道竞争参数分配机制进行了改进,并提出了适用于不同业务类型数据传输的路由判据,以便TA2P能及时地根据MAC层反馈来的统计数据进行高质量路由的选择.仿真结果表明,该策略有效地实现了不同类型业务流之间对信道及无线链路的公平使用.关键词802.11e;无线Mesh网络;多媒体;多路径路由;业务感知1引言随着多媒体业务在无线Mesh网络应用中的迅Page2务对不同传输QoS的要求,因此,研究人员提出了多路径数据路由相关技术,该技术在提高传输可靠性的同时,有效地保障了多媒体服务对可用资源(如信道、无线链路等)的需求,并已被证明是提高网络性能的一种有效途径[2-3].虽然多路径数据路由能解决不同类型业务流对带宽、时延等QoS的相关要求,但是由于不同的多路径发现、建立与选择策略的不同,网络资源在多个用户之间的分配与使用效率也不尽相同.因此,如何在多路径中选择适合的可用路径,以实现网络资源合理、有效地最优分配,在既保障业务传输公平性的同时,又能有效地实现对其的区分服务,提高网络的整体性能,是目前多路径路由协议设计与实现的一个研究热点问题.目前,研究人员从并行多路径、备份多路径、机会路由、网络编码、多信道多接口等角度对多路径路由协议进行了大量的研究,如文献[4]在AODV协议的基础上提出一种基于链路不相交的AOMDV(Ad-hocOn-DemandMultipathDistanceVectorRouting)协议.AOMDV利用不同RREQ副本中存储的所经路径上不同节点的信息来发现与建立不相交的多条可用路径,并可根据路由具体的选择策略,既可以并行多路径的方式使用,也可以备份多路径的方式使用,且只有在所有路径均失效时才重新启动路由发现过程.以AODV为基础的多路径路由协议还有AODV-BR(AODVwithBackupRoutes)、AODV-ABR(AODVwithAdaptiveBackupRoutes)、AODV-DM(AODV-BasedDecoupledMulitpath)等[5-7].文献[8]提出了一种面向QoS路由的TBP协议.TBP采用选票方式来逐跳地寻找多条可用路径,各中间节点根据统计结果来决定选票的处理方式,并由目的节点返回多路径结果.文献[9]提出了基于数据包高速缓存与最短多路径相结合的多路径路由协议CHAMP(CachingandMulipathRouting).在CHAMP中,数据源节点通过泛洪RREQ包来发现路由,而目的节点只处理具有最短路径长度的RREQ包,但CHAMP对相邻节点的监听及其RREQ包的处理消耗了过度的网络资源.文献[10]提出了一种基于机会主义多路径路由的优化框架.该框架综合了流量控制、网络编码路由机制、链路调度与速率控制等网络各层的相关QoS控制机制,并在实际协议上进行了实现.文献[11]基于路径的可靠性和编码机会提出了一种基于网络编码的多路径路由CAMP.CAMP能够向源节点返回多条具有不同的ETX(ExpectedTransmissionCount,期望传输次数)值的可用路径,并可以通过路径间的动态转换来创造而非仅仅等待编码机会,从而实现网络流量的负载均衡,以及路径转换收益的最大化,提升网络的吞吐量.文献[12]提出了一种多信道多路径相结合的路由协议ERC,ERC通过在多路径上使用多个正交信道,对当前链路上的负载和剩余容量进行估算,并将其作为Dijkstra选路算法的路由度量,从而选具有较高传输质量的链路进行数据传输.上述多路径路由机制的研究主要是从网络流量工程的角度出发,利用网络效用最大化等理论对多路径数据路由的不同的约束目标进行了研究,以解决数据传输的公平性及其拥塞控制、流量控制等问题,而针对具体弹性(如Email/Web服务等)和非弹性(如VoIP、VoD服务等)业务与多路径路由传输相结合的网络资源分配与数据路由问题的研究相对较少.2网络模型与问题描述2.1业务感知问题的提出由于无线Mesh网络包括了弹性(如FTP等传统数据服务)和非弹性(如VoIP等实时多媒体服务)两种对数据传输能力和质量有不同QoS要求的数据业务,因而其网络资源的分配主要包括两个方面的内容:(1)如何充分利用现有有限资源,以满足用户对数据传输服务的需求;(2)如何在网络用户之间有效地均衡网络的服务能力.前者主要考量了网络资源的使用效率,后者则主要关心网络资源的公平使用问题.为了有效区分网络中的业务类型,IEEE802.11e标准的EDCA机制采用了4个具有不同信道竞争参数的数据缓存队列来实现不同类型数据包的存储转发,并通过虚拟冲突的方式进行物理信道的争用.如图1所示,非弹性服务(如实时要求较高的语音、视频服务等业务)的数据包可以分配到具有最高优先级的AC0和AC1队列,而弹性服务(如实时不敏感的FTP/Email等业务)的数据包则可以分配到AC2和AC3这两个具有较低优先级的队列中,以实现不同类型业务对时延等QoS性能指标的要求.不足的是,具有固定参数预设值的EDCA机制只在单跳通信范围具有较好的业务区分功能,在多跳环境下未能提供有效的业务区分与QoS性能保障策略.Page3与此同时,传统的多路径路由(如AOMDV等)在路由发现与建立过程中,更多的是采用了最小跳数为其路由度量,这未能反映实时的链路质量和节点状态,因而无法为不同类型的业务提供其所需的高质量传输路径.如图1所示,节点S2与D2之间已经存在一条FTP数据,这时,节点S1需要向D1发送一条语音(Voice)数据流.由于S1与D1之间已经建立了3条可用路由信息,路径P1(S1→F→D1)为最短路径,因为Voice数据流选择P1进行数据传输.由于F节点位置在FTP数据流传输的干扰范围之内,因此,Voice和FTP两条数据流在传输时,将产生路径间干扰而导致传输路径上网络吞吐量的下降.如果此时,S1需要再向D1发送一条新的视频(Video)数据流,由于同样的路径选择策略,路径P1成为了首选传输路径,从而加重了P1上数据流和FTP数据流的干扰,而此时P2和P3则被闲置,直到P1出现严重丢包,S1需要重新寻路时,才会在P2(S1→C→E→D1)和P3(S1→A→B→E→D1)之间进行路由选择.研究表明[13],这种以跳数为路由度量的简单策略除了会导致路径使用的不公平外,还无法对数据流所属业务类型进行区分,不能有效地在多条可用路径间进行具有业务感知的数据分发.与此同时,虽然MAC层标准802.11e的相关机制能对业务进行区分,但无法为其决定传输路径.因此,可以考虑将网络层与MAC层协议相关机制进行联合操作,以实现具有业务感知的多路径数据分发机制.2.2网络模型描述在WMNs网络中同时存在弹性服务与非弹性服务两类多媒体业务流,其中:(1)弹性服务可分为交互式弹性服务与传统弹性服务两类,前者对网络最小带宽值有一定要求,如Web服务,当网速过慢时,用户可能无法打开所需页面,此时服务效用为零.因此,当服务所需最小带宽不能满足时,弹性服务的效用将为零,反之,效用函数将是一个连续可微的凹函数;后者对最小带宽没有要求,当无可用带宽时,效用函数为零;(2)非弹性服务主要是对带宽和时延有较高敏感度的多媒体服务,根据其对时延等QoS性能指标的不同要求,可以分为软实时(SoftReal-Time,SRT)和硬实时(HardReal-Time,HRT)两类服务.对前者而言,其带宽需求和时延变化的适应度存在一定的灵活性,当服务质量(如传输速率)超过某个性能参数的阈值时,效用函数为凹函数(如视频服务数据流的传输),反之为凸函数形式;而后者对带宽的需求比较明确,属于不连续的效用函数类型,当服务质量(如传输速率)低于规定的性能参数阈值时,效用为零,反之为一个正常数(如语音服务数据流的传输).因此,结合多路径数据传输的特点,可将多路径网络资源分配与数据传输归结为以下基于效用函数的规划优化问题,公式中的符号含义如表1所示:s.t.p1∈Prt~(l),p2∈Prt(l),l∈E,Cl∈∑p1rt∈SRT,k∈K,i,j∈N,J(rt,k)Page4表1多路径路由规划优化问题的符号与说明符号SRT~弹性服务集合SRT非弹性服务集合Urt~(·)弹性服务的效用函数,rt~∈SRT~Urt(·)非弹性服务的效用函数,rt∈SRTP(s,d)rtrt~源节点s到目的节点d的弹性服务业务rt~(rt~∈SRT~)可P(s,d)Prt(l)非弹性服务所用数据传输路径中经过链路l的路径Prt~(l)弹性服务所用数据传输路径中经过链路l的路径p(t)非弹性服务rt在路径p上的传输速率,p∈P(s,d)xrtφrt(t)非弹性服务rt的总传输速率φrt(t)=∑pp(t)弹性服务rt~在路径p上的传输速率,p∈P(s,d)xrt~φrt~(t)弹性服务rt~的总传输速率φrt~(t)=∑pQp各类服务的最大可用路径数,p∈P(s,d),|P(s,d)|QpQp(rt)非弹性服务rt的可用路径数Qp(rt~)弹性服务rt~的可用路径数pkt非弹性服务rt数据包的最大转发次数Hrtpkt非弹性服务rt的数据包时延阈值Drtpkt非弹性服务rt的数据包时延抖动阈值Jrt其中,非弹性服务和弹性服务效用函数的具体定义见文献[14-15];约束(2)和(3)说明所有服务均使用多路径进行数据传输;约束(4)说明服务所用链路的总流量不能超过链路的最大带宽;约束(5)、(6)和(7)则对非弹性服务的服务质量进行了约束,其数据包最大转发次数、数据包可接受最大时延及时延抖动均不能超过用户所规定的QoS阈值;约束(8)则对服务的最大可用路径数进行了约束,以减少路由协议在路由发现的时间.上述问题的定义表明,网络中的通信节点之间建立了可以满足一定QoS约束要求的多条可用路径,其网络的整体目标就是在组成可用路径的所有链路带宽一定的条件下,根据不同的QoS约束目标,最大化网络中所有服务的聚合效用,满足不同用户对网络资源分配及服务满意度的不同要求.由于具有最多K个可用路径的K-Path路由(K-PathRouting,KPR)问题已被证明是NP-Hard问题[13],因此难以对上述规划问题进行直接求解.为此,本文提出了一个基于业务感知的分布式多路径路由解决方案,以提高多路径数据路由的业务感知和服务区分的能力,实现有效的分布式网络资源分配.3基于业务感知的TA2P策略由图1可知,当语音流和视频流均以最小跳数作为路由判据时,二者将使用P1作为其共同的数据传输路径;如果二者分别以最小跳数和路径传输时延为路由判据时,则语音流将使用P1进行数据路由,而视频流则在P2和P3中选择时延较小的路径进行数据路由.为此,本文提出一种基于AOMDV的业务感知多路径QoS路由策略TA2P(Traffic-AwareAOMDVProtocol),该策略是一种跨层的QoS解决方案.首先,TA2P改进了已有MAC层相关机制(如802.11e的EDCA机制等),以获取该层QoS统计数据(如丢帧率、转发时延等),同时对EDCA机制中的静态参数(如竞争窗口、传输机会等)分配策略进行了动态自适应改进,以提高其对不同类型业务流进行公平传输的能力;然后,网络层通过MAC层反馈的相关统计信息来进行路由判据的计算与更新、同时进行路由发现、路径选择和数据转发等过程,从而使其具有一定的业务感知能力,有效地实现了业务区分与多路径数据传输相关功能.具体设计与实现如下所述.3.1TA2P中路由判据的设计由于在AOMDV所用的路径数据结构中(如图2(a)所示),仅仅通过跳数计数字段HopCount来记录源、目地节点的转发次数,不能有效地反映节点所属路径的当前状态与质量,不利于路由选择策略采用其他以单个路由判据(如以路径时延为路由判据)或综合路由判据(如以路径最小可用带宽和路径可靠度相结合为路由判据)为准则的路径选择操作.因此,TA2P对其进行了扩展,在路由表结构中增加链路及路径信息相关记录字段(如图2(b)所示,在这里,将扩展后的路径状态相关信息记为PStatep={HC,minBW,FLR,D,PR},p∈P(s,d)),以便源节点和中间节点获取源、目的节点间不同路径的相关质量信息,从而为不同类型的业务数据流提供合适的传输路径.Page5在上述相关路径信息PStatep中:(1)路径可用最小带宽minBW:主要指组成路径的节点剩余可用带宽的最小值,即minBW=min(BW1,BW2,…,BWj),其中,j∈N,为路径长度,BWj为节点的当前剩余带宽情况.由于本文只考虑单速率数据传输的情况,因此,节点的初始带宽相同.此时,BWj的值可用节点的剩余带宽与数据速率的比值来替代.BWj的获取一般可采用主动探测(如定期发送Hello探测包)和被动监测(如MAC层监听)[16]两种方式.由于主动探测要向网络注入探测包,增加了网络的开销,因此,TA2P采用了文献[16]中基于NAV(NetworkAllocationVector,网络分配矢量)的估计方法,即通过跨层的方式,在路由协议中调用MAC层通过监听(Overhear)收集的邻居节点的NAV时间、帧间间隔DIFS时间以及节点自身的冲突退避时间等相关信息的计算来完成BW的估算值,并记录到相关路径列表及相关数据包(RREQ)内,从而获得单个节点可用带宽及整条路径的最小可用带宽(即瓶颈链路处的带宽情况),以便为数据路由提供决策.(2)路径丢帧率FLR(FrameLossRadio):主要指MAC层发送数据帧失败的情况的统计.FLR根据MAC层是否收到ACK应答包来统计路径上数据帧丢失的百分比(TA2P不考虑RTS/CTS/DATA/ACK的4次握手情况),即其中,L(p)表示路径p的长度,P(s,d)为源节点s和目的节点d之间的可用路径集合,flrp上节点i向节点j发送数据帧的失效率,该信息可通过在MAC层启动相关计时器,对时间T内的数据帧发送情况进行统计来获取.(3)路径时延Delay:指源、目的节点间的端到端数据时延.该数据通过计算RREQ包从发送到目的节点接收之间的时间差ΔD来获取.为此,中间节点收到并转发的RREQ包中的Delay字段主要用于记录当前的累积时延,该信息将在中间节点收到目的节点发送的RREP包后进行更新.(4)路径可靠度PR(PathReliability):由于相邻节点的链路间存在着干扰,因此,为了反映可用路径的传输质量,可考虑通过对路径上节点收到的SINR(SignaltoInterferenceplusNoiseRatio,信号与干扰加噪声比)强度信息进行几何平均来计算路径上的干扰程度.因此,RM可定义为如下形式:其中,L(p)表示路径p的长度,P(s,d)为源节点s和目的节点d之间的可用路径集合,xp节点j的干扰程度,其取值范围如式(12)所示(SINRp3.2TA2P的路由发现与选择策略3.2.1TA2P的路由发现过程在TA2P中,当源节点的路由表中没有到达到目的节点的路由信息时,将发送路由请求数据包RREQ以启动路由发现过程(如图3所示),其基本思想如下:(1)源节点S首先产生RREQ包,并填写目的节点地址、目的序列号、包产生时间等,并初始化与路径状态相关的PState信息;然后向邻居节点广播此RREQ包,并等待接收RREP来确定可用路由信息.(2)中间转发节点I收到广播的RREQ包后,首先判断是否重复收到该RREQ,若是则丢弃;否则,利用RREQ所携带的最新PState信息来更新现有节点的路由表数据(如更新已有路径的PState信息,增加新路径信息,通过调用跨层方法获取flr和SINR来更新相关路径状态信息等).与AOMDV发现过程中只记录转发跳数信息不同的是,TA2P记录了路径的更多信息(如时延、当前节点的干扰度和丢包率等),且不丢弃具有相同跳数及较大跳数信息的RREQ包,从而使TA2P为不同业务类型数据提供不同传输质量的可用路径成为了可能.(3)若中间节点具有达到目的节点的可用路由,将更新后的RREQ包转发给目的节点D.需要说明的是,由于无线Mesh网络中的节点(特别是Mesh路由节点)通常是静止的,因此,一次路由发现过程得到的可用路径通常是稳定的(在此不考虑因Mesh路由硬件故障而出现的失效等问题),变化的是其上的网络负载相关情况.因此,为了准确了解已有可用路径的当前状态与质量,中间节点需要周期性向网络发送Hello探测包,以更新路径的各项状态数据(如时延、丢包率FLR,当前的可靠度PRPage6图3TA2P路由发现与数据传输过程示意图等),从而了解节点周边的局部网络状态信息.由于向网络注入探测包有可能导致网络负载加重,因此,只有在MAC层EDCA优先级数据队列AC0的当前长度小于探测包发送的阈值Lhello时,中间节点才会沿着路由表中的所有可用路径向网络中注入包含了PState信息的Hello探测包,以减少网络负载的增加.(4)目的节点D在收到RREQ时,首先判断用于收集来自同一数据源S的RREQ的计时器是否超时,若超时,则丢弃(此计时器的作用主要是为了避免产生过多的RREP);否则,判断收集到的来自同一数据源S的RREQ包是否已满足产生最多Qp(见表1)条可用路径的要求,若满足,则丢弃此包;否则,接收此RREQ包,利用RREQ包的相关路径信息建立反向数据路由信息,同时生成并向数据源S反向传输其所需的RREP包.(5)源节点S收到目的节点D发回的多个RREP包时,即可从中提取相关的可用路径信息并更新节点的路由表,同时查看缓存队列中是否有数据等待发送,若有则按业务类型选择不同的路由决策函数,以确定合适的路径进行数据传输.与此同时,路径上的转发节点I也利用RREP的反向传输时间,提取RREP中相关的路径信息(如路径可用最小带宽、平均时延、平均丢包率、路径可靠度等),Page7及时地更新自身路由表中的相关路径信息.3.2.2TA2P的路由选择策略为了满足不同服务业务数据传输所需的不同QoS约束(如最小跳数、最小时延、最小丢包率、最高可靠性等)要求,在上述路由判据及路由发现机制的基础上,需要对各类服务业务采用不同的路由判据准则(单一或联合判据),以选择当前网络环境下最佳的传输路径.由于网络中有弹性和非弹性两大类服务业务,因此,TA2P首先对这两类服务在EDCA等待队列的分配进行了规定,如表2所示(表中参数为EDCA原有队列参数).AC队列AC0非弹性AC1AC2AC3弹性在定义相关路由判据之前,本节先给出一个表示节点周边局部网络状态的路由判据LNS(LocalNetworkState)的定义:LNSp=whcHCp+wmbwminBWp+|whc|+|wmbw|+|wflr|+|wd|+|wpr|=1(14)即LNSp为当前节点缓存的所有可用路径相关信息的加权平均值,其中,p∈P(s,d),HCp,minBWp,FLRp,Dealyp,PRp为当前节点到某一目的节点的所有可用路径信息(跳数、最小带宽、丢包率、时延、可靠度)的平均值;whc,wmbw,wflr,wd,wpr为各路径信息的加权因子,其具体取值与服务类型相关,可根据服务的QoS要求进行调整.为了简化处理,这些加权因子的取值为|whc|=|wmbw|=|wflr|=|wd|=|wpr|=0.2,其中,由于路由选择的目的是要选择丢包率较小的传输路径,因此wflr一般取负值.在此基础上,TA2P为非弹性服务和弹性服务类数据路由定义了如下几种联合判据选择策略:(1)AC0队列(语音类服务数据/Hello探测包):为了保证语音服务的清晰度,即满足其较高的实时要求,TA2P在采用最小跳数路由判据的同时,综合考量了路径平均时延路由判据,以避免或减轻因最短路径负载过重带来的时延增长的情况(如图1中的流间干扰).同时,为了加快Hello探测包的发送与回复,Hello探测包与语音类数据包共享同一队列及其信道竞争参数.因此,此类队列数据的联合路由判据RMvo可定义为如下形式:(2)AC1队列(视频类服务数据):由于视频服务对信道带宽和时延抖动,以及丢包率非常敏感,因此为了保证视频服务的实时性与流畅性,此类队列数据的联合路由判据RMvi可以定义为如下形式:RMp(3)AC2队列(网游等服务类数据):由于此类业务数据对实时性的要求不高,因此可以为其选择丢包率较低和具有一定可靠度的路径进行传输.因此,该类队列数据的路由判据可以定义为(4)AC3队列(Web、Email等弹性服务类数据):由于此类服务带宽和时延的要求较低,因此可以根据节点周围局部网络的平均状态来为此选择合适的路径,以满足网络负载均衡的要求.因此,其路由判据可以定义为RMp|whc|+|wmbw|+|wflr|+|wd|+|wpr|=1(22)在上述路由判据定义的基础上,当源节点(或中间转发节点)的网络层路由实体收到应用层(或数据链路层)传来的多媒体数据包时,将提取其中的业务类型信息,并以此来选择合适的路由判据进行路径选择,具体选择策略如图4所示.若某条路径对于多个服务业务数据包来说都是当前的最佳传输路径时,这些服务业务将共享同一个传输路径,直到该共享路径的状态(如时延、丢包率等)发生改变时,才由路由选择策略来重新为不同的业务选择合适的其他数据传输路径.Page8图4TA2P路由选择策略示意图3.3TA2P的信道竞争参数自适应策略TA2P除了采用上述联合多判据的路由选择策略外,还对MAC层802.11e标准中的EDCA业务区分机制进行了自适应改善.从表3的AC各队列采用的信道竞争参数可知,由于网络中的每个节点均在EDCA中采用了相同的竞争参数,这样有可能导致两表3TA2P信道竞争参数AC队列AC0AC1AC2AC3为此,TA2P对原有EDCA的信道竞争参数中最小及最大CW值进行了修改,然后对冲突发生及传输成功时CW的变化规则进行定义,以期减少数3.2646.016个相邻的节点在发送冲突(或发送成功)时所用的竞争窗口CW变化的计算结果一样,从而出现再次发生发送冲突的可能.这种静态的EDCA参数分配方案只能在一跳范围内具有较好的业务区分效果,对于多跳环境下不同节点及路径的实际情况均未做考量,因而不能高效地应用于多跳数据传输环境.据冲突发生的次数,提高无线多跳环境下的EDCA性能.具体初始参数定义及退避规则见表1及式(23)和(24).Page9CWnCWncollision=CWnsuccess=CWn在上述信道竞争参数的定义下,TA2P对冲突发生时竞争窗口的增长规则做出了如式(23)和(24)的定义(其中,Ncollision为节点连续发生冲突的次数,Nsuccess为连续成功传送的次数,Nmax的最大冲突重传次数,在这里为7),使其能以一种平滑的方式在更大的范围内进行变化.以数据包发送冲突为例,如图5和图6所示,从图可以看出TA2P的CW变化比EDCA原有的CW变化增长较小,这种平滑处理后的效果使得信道的空闲总时间槽数量减少,因而提高了信道忙的时间比,减少了数据传输的时延,从而使相邻节点因为能具有不同的CW值而获得更高的信道占用概率,能有效地减少节点间的数据冲突.与之类似的是,经过式(24)的处理,连续数据包发送成功时,TA2P中CW的减少也呈现出一种缓慢地下降趋势,而不是像EDCA中一图5数据包连续冲突时的CW[0]/CW[1]大小变化示意图图6数据包连续冲突时的CW[2]/CW[3]大小变化示意图样,CW被直接初始化为CW的最小值.虽然,这种CW的下降变化较之EDCA机制会增加一定的时延,但由于节点选择的下降程度不一样,因而可以错开彼此的信道等待时间,从而减少因冲突导致的数据包丢包的情况,因此,牺牲一定的时延增长是可以接受的.经过上述处理,TA2P的AC队列CW的实际变化范围为CW[0]∈[7,143]、CW[1]∈[143,285]、CW[2]∈[285,829]、CW[3]∈[829,1023].4性能仿真与分析为了测试TA2P在数据丢包和传输时延这两个方面的性能,作者在NS-2仿真软件环境下,设计了两组仿真实验:第1组仿真主要对AOMDV和TA2P两个协议所导致的数据丢包的情况进行了对比分析;第2组仿真则主要对TA2P协议在不同信道竞争参数环境下的丢包及时延等情况进行了对比分析.在第1组测试中,仿真拓扑如图7所示,网络负载由一组视频流和一组干扰数据流组成.其中,为了测试联合判据对多路径选择的效果,选择了MPEG-4的视频流数据.该视频流由一系列GoP(GroupofPicture)组成,每组GoP均包含了I、P和B3种类型的视频帧.其中,I帧为独立可自解压的数据帧信息,不需要其他两帧的相关信息;P帧为需要其I帧或P帧信息才能进行解压的数据帧;B帧则是需要I帧和P帧的相关信息才能进行正确解压的数据帧.因此,3种视频帧的重要性依次为I>P>B,从而可以为不同重要度的数据包分配不同的队列优先级和不同质量的传输路径,以保证视频Page10流的实时性要求.结合GOP与AC队列的优先级分配,本组测试对TA2P的路径自适应性及数据丢包情况进行仿真测试,相关仿真参数如表4所示,其仿真结果如图8所示.仿真场景大小通信半径数据速率基本速率最大路径数AC队长最大数据包大小MPEG-4流速(VBR流)FTP流速(CBR流)路由判据各加权因子|whc|=|wmbw|=|wflr|=|wd|=|wpr|EDCA参数图8TA2P与MEPG-4视频流仿真结果示意图如图8所示,视频流的总体丢包情况要低于干扰流,这主要是因为视频流的数据帧优先级要比干扰流(干扰流的优先为AC3)的高,因而获得信道的机会更大;而且当视频流在路径P1上的数据传输受到干扰时,TA2P能根据Hello探测包收集到的路径信息,发现虽然P1的跳数最小,但其时延有所增大,当其不能满足视频流的时延要求时,及时地根据路由判据的结果,将数据包转发到其他可用路径上去,因此减轻了P1的网络负载及丢包状况.在第2组仿真测试中,在相同的仿真场景大小中随机分布了60个节点,语音流(其数据包大小为128Bytes,数据速率为120Kbps)和视频流的数量在1~5的范围内变化,干扰流的数据速率为1Mbps,其他仿真参数与表4相同.为了区分TA2P采用何种信道竞争参数,在这里,将采用原有EDCA参数的TA2P记为sTA2P,采用TA2P自身参数的记为dTA2P.仿真结果如图9和图10所示.从图9、图10可知,虽然dTA2P的丢包率随着网络中多媒体流量的增加而增加,但其整体数量小于sTA2P.这是因为dTA2P采用了平滑的竞争窗口变化机制,使得不同节点在冲突发生或成功发送数据包后,能在不同的CW取值范围内进行取值,因而减少了由于冲突带来的丢包数量.当网络负载较小时,由于dTA2P有意减缓了CW的增大或减少时的窗口值的变化程度,因此,在一定程度上增加了数据包在队列中的等待时延,但这种较小的时延增长开销是以减少数据包冲突为目的的,只要在时延可接受的范围内,这种开销的增加仍然是有利于多媒体流的传输质量的;而且随着网络负载的逐步变大,这种平滑的CW变化处理有效地抑制了节点间的数据包发送冲突,及其冲突丢包的现象.因此,采用CW平滑处理的dTA2P的性能无疑会优于sTA2P,更有利于多媒体服务在丢包率、时延及时延抖动等方面的QoS要求和多路径间的网络负载均衡.5结论与进一步工作本文在现有802.11e标准EDCA机制和多路径路由相关问题分析的基础上,利用跨层优化的设计思想,定义了适应于多业务多路径传输的联合路由判据,使网络层的路由选择策略能够根据数据的业务类型及当前可用路径的状态与质量信息,合理Page11地选择能满足不同业务类型QoS要求的数据传输路径,同时对EDCA静态的信道竞争参数分配方案进行了自适应改进,使其能适应于无线多跳的数据传输环境,减少了网络中数据包传输的冲突,有效地提高和满足了各类媒体业务数据的传输质量,以及网络传输的公平性.与此同时,由于节点及链路间仍然采用单一信道进行数据传输,因此,不论是采用的节点不相关多路径还是链路不相关多路径数据路由,在相邻的节点及并行链路上仍然存在较严重的信道干扰,因此,如何利用多信道多接口技术进行有效的多路径负载均衡,实现有限可用信道与无线接口在多路径上的利用最大化,以减少不同数据传输链路上的信道冲突,提高数据在多路径上的成功传递率是本文要深入研究的一个问题;另外,由于多媒体业务流具有自相似性,在这种情况下一旦网络拥塞发生便更加难以恢复,因此,如何在自相似特性的业务模型提供多路径数据流的公平共享调度保障也是一个要深入探讨的课题.致谢中南大学软件学院陈志刚教授及同门师兄弟对本文所述研究提供了帮助,同行们对本文工作提出了宝贵意见,在此一并感谢!
