Page1面向移动社交网络的协作式内容分发机制胡海洋1),2)李忠金1)胡华1)赵格华3)1)(杭州电子科技大学计算机学院杭州310018)2)(南京大学软件新技术国家重点实验室南京210093)3)(香港中文大学计算机科学与工程系香港)摘要在移动社交网络中,具有相似兴趣爱好的移动用户之间可通过移动计算设备连接起来,形成虚拟社区,它们常需要和基站及社区内其他用户间交互以实现数据内容的传送与分发.因此需要提供高效、低费用的内容分发机制,来及时更新移动社交网络中用户所携带的内容.该文将社区内当前处于邻近物理位置的用户组成临时的虚拟用户组,并以协作的方式通过基站从内容服务商处下载内容,然后在组内完成内容分发.在对用户组的内容传播时间和支付费用这两方面进行优化时,该文首先分析了面向内容分发完成时间的两种优化策略:用户组中内容分发的最大传播时间最小化策略、非服务性用户的内容平均传播时间最小化策略.在此基础上,综合考虑所需支付的内容获取费用与网络连接费用,来制定优化的内容分发机制.该文给出了相应的算法,并通过仿真实验分析了所提出方法的特点.关键词移动社交网络;移动计算;移动用户组;协作下载;内容分发;社会计算;移动互联网1引言社交网络(socialnetworks)是信息科学、社会科学研究领域等所关注的议题之一,它已引起社会科学工作者、软件开发者、在线游戏提供商、政治分析者的广泛兴趣.近年来,随着移动计算与社交网络的有效交联,移动社交网络(MobileSocialNet-works,MSN,本文简称移动社交网)技术得到了广泛的发展与应用[1].在移动社交网络中,具有相似兴趣爱好的移动用户之间可通过移动计算设备连接起来,形成虚拟社区,并进行内容的传输与分发.一般说来,移动社交网有两种基本类型[2-3]:(1)基于Web的社交网.这类移动社交网主要在传统的Internet社交网基础上,通过增加无线移动设备的访问功能,来实现对移动社交网络技术的支持;(2)基于ad-hoc方式的移动社交网.该类型的移动社交网主要基于移动用户彼此之间的“偶遇”(encounter)而自发式建立.后一种无线社交网现已经成为科研工作者关注的焦点.在移动社交网络中,内容提供商通过从网络运营商购买无线网络连接,并使用无线网络基础设施(如无线通信基站)来传送与分发移动用户所订阅的内容.例如,目前有许多服务商提供了各种网络服务,可帮助移动用户及时获取股票行情、交通拥塞、天气预报等方面的最新信息;移动用户可以向其订购,并通过无线通信基站获取信息.此外,对相同主题感兴趣的移动用户之间则可通过蓝牙等无线通信协议传送相关的内容,从而使得彼此间所携带的信息内容均得以更新.为了在移动社交网中有效地实现内容更新与信息共享,需要考虑到如下两方面的问题:(1)如何高效地实现数据内容的分发,使得移动用户能及时更新自身所携带的数据内容;(2)如何有效地减低移动用户更新内容所需的总体费用,包括支付给服务提供商的费用及维持无线网络连接所需支付给网络运营商的费用.目前的工作主要针对前一个问题展开研究,它们从两方面来考虑:(1)文献[3-5]主要基于时延容忍网(DelayTolerantNetworks,DTN)的思想,考虑了移动用户的活动规律,设计了移动用户间交互内容的路由协议和规则,可使得用户能及时更新自身所需的信息内容;(2)文献[6-7]则主要从服务提供商的角度来解决这一问题,他们制定了相应的分发策略,来及时更新用户所持有的过时信息,并减轻服务提供商的网络负载.然而,现有的研究工作很少涉及如何同时优化移动用户更新内容所需支付的费用及完成内容分发所需的时间.本文则针对此方面展开工作,通过设计高效、低费用的内容分发机制来及时更新移动社交网中用户所携带的内容.在本文所提出的方法中,虚拟社区内彼此间处于邻近物理位置的部分移动用户将组成临时的虚拟用户组,并以协作的方式通过基站从内容服务商处下载内容,然后彼此间进行内容分发.在对用户组中内容分发的完成时间和所需支付费用这两方面进行优化时,本文首先分析了面向内容传播时间的两种优化策略:用户组中内容分发的最大传播时间最小化策略和非服务性用户的内容平均传播时间最小化策略.在此基础上,进一步综合考虑所需支付给服务提供商的内容获取费和支付给基站的无线网络连接费,来制定优化的内容分发方案.此外,本文还考虑了如何在用户组支付费用最低的情形下,优化组内的内容传播时间.针对上述内容分发策略,本文分别给出了相应算法并进行实验分析.本文第2节对相关工作进行概述;在第3节中给出基于移动社交网络的用户组内容分发模型,并对基本问题进行描述;在第4节中对用户组中内容分发的最大传播时间最小化策略、平均传播时间最小化策略及支付总费用最低情形下的传播时间优化策略等方面进行分析与讨论,并给出相应的算法;在第5节中,本文对所提出的方法进行仿真实验分析与比较.2相关工作文献[2]统计了移动用户的运动模式和他们之间相遇的时间,在此基础上挑选出相应的移动用户作为内容载体,从而在内容传输方面可缩减端对端的通信延迟,对具有时限的应用起到优化作用.文献[5]根据移动社交网会发生中断的情形,设计出相应的内容路由协议MANET.该协议根据移动用户在社交网络中所处的位置,首先标识出那些具有中心位置和桥接作用的用户,然后依据用户之间的社会关系将其划分成若干组,并在其中间进行内容分发.由于服务提供商需要从网络运营商处购买无线网络连接,来提供移动用户所需的内容.文献[6]则针对此方面展开研究,根据移动用户的数目及他们之间相遇的间隔,提出一种基于受限Markov决策过程的内容分发机制,可使得持有”新鲜”内容的移动用户数目达到最大化.Page3文献[7]同样从服务提供商的角度出发,设计出一种服务提供商联盟(coalition)的方式来提供网络带宽的利用率,降低服务提供商所需支持的费用.文献[8]提出一种优化网络带宽分配的策略,以便将服务提供商处存储的内容能有效地转送给移动用户.该策略的目标是最大化所有用户的收益.其中用户的收益被定义成与数据内容时限相关的函数,即用户持有的数据内容越旧,其所拥有的收益就越低.文献[9]提出一种基于社区的数据传送策略,用以限制内容的分发和缩减系统开支.在该策略中,移动用户依据他们之间交互的频度被划分成若干个社区.在每个社区内,数据内容副本的数目可依据当前社区的情况进行适应性调整.文献[10]针对邻近移动社交网中,用户会通过蓝牙、WIFI进行交互这一场景,设计了一种细粒度的私密匹配协议.这样的协议可以在不揭露过多私有信息的前提下,匹配用户间的个人数据,从而为用户间的交互提供方便.此外,作者还对该协议的安全性与运算开销也进行了分析与考虑.文献[11]针对移动社交网中位置共享这一方面展开研究,设计了相应的MobiShare系统.该系统可支持范围查询、及用户自定义的控制访问协议.此外MobiShare系统还提供了相应的私密保护功能,可在具有社会信任关系的用户间共享位置信息,并向陌生用户及恶意用户屏蔽相应的信息.文献[12]针对移动社交网中用户可分享共同爱好的内容,设计了PrefCast这一面向用户爱好的内容分发协议.该协议考虑到社交网中移动用户间连接的非持久性、联系时间比较有限这些特征,形式化定义了用户间完成内容转发的最大效益模型,并给出算法来使得每个用户可以分布地选择内容转发策略,并预测自身所能获取的最大效益.目前国内的研究者[13-16]也对移动社交网展开了研究.文献[13]针对移动社交网的拓扑结构、隐私保护、发展趋势等问题进行了思考与研究.文献[14]基于上下文、信任网络和协作过滤算法,提出了面向移动社交网络的服务选择机制,并将上下文相似度与信任度相结合,给出了协作过滤服务选择模型.文献[15]从社会工程学的角度研究社交网络蠕虫的传播机制,通过量化影响用户行为的要素,给出了基于用户安全意识的行为博弈模型,并构建了相应的社交网络访问模型.文献[16]根据移动社交网中用户的移动轨迹(trace)建立用户的移动模型,在此基础上进一步设计出相应的数据分发与数据查询算法,并进行了相应的性能分析与比较.与现有工作不同之处在于,本文首先将虚拟社区中彼此间处于邻近物理区域的部分移动用户组成临时的虚拟移动用户组,然后从组内当前的移动用户数、所需下载内容的大小、移动用户的内容分发能力等方面入手,综合考虑用户组所需支付给服务提供商的费用和维持无线网络连接时所需支付给网络运营商的费用等方面,来制定优化的内容分发策略.3系统模型在移动社交网中(如图1所示),移动用户通过基站来获取自身感兴趣的数据内容.若所有用户均采用直接从基站下载内容的方式,则一方面将大大增加虚拟社区内用户所需支付给内容提供商的下载费用,另一方面,将造成基站处无线网络带宽的拥塞.因此,本文将采用基于移动用户间协作下载的方式,来优化它们的下载时间和所需支付的费用.具体而言,在基站的附近物理区域内,某个移动用户需要下载与更新数据内容时,它首先通过GPS定位、基站无线定位服务等技术发现在邻近物理区域内,是否存在着虚拟社区内的其他用户.若发现了相应的移动用户,它们彼此间将通过蓝牙、WIFI等方式发送询问消息,那些期望以协作方式从基站处下载共同感兴趣内容的移动用户将自主地组成一个临时的虚拟用户组.然后,用户组将确定某些用户首先通过蜂窝通信网络从基站下载所需的内容(如图1中用户a1,a2和a3,本文称之为服务性用户),而组内的其他用户(如b1和b2,本文称之为非服务性用户)再通过蓝牙、WIFI等方式从这些服务性用户处下载已获得的内容.为了在用户组中确定服务性用户,本文采用如下的方法:首先用户组通过选举法[16]产生组内的协调者(coordinator),协调者计算每个用户i成为服务性用户的概率为pi=BSi-BSminBSmax-BSminBSmin分别为当前用户组中接受基站信号的最大与Page4最小强度,BSi为用户i处接受的基站信号强度.显然,若用户i处接受的基站信号强度越大,则其成为候选服务性用户的概率就越大.然后对每个用户i,协调者从(0,1)中取随机值p,若有p<pi,则用户i成为候选服务性用户.若上述过程中所产生的候选者数目大于用户组在采用优化策略时所需的实际服务性用户数,则那些能接收到较高基站信号强度的候选者将被选为正式的服务性用户.此外,用户组下载数据内容时需要向基站支付相应的费用,该费用将由组内的移动用户平均分配.为了激励移动用户主动分发数据内容,并且避免某些非服务性用户拒付相关费用,移动用户组可采用基于信誉度(reputation)[17-18]的协作策略,则那些主动分发数据内容的移动用户将依据其贡献度被授予较高的信誉度,而那些拒付相关费用的移动用户的信誉度将被减低.当相关的数据内容下载完成后,这样的临时虚拟用户组将被解散,各移动用户将依据自身需求做自主性移动.此后,当某些移动用户需要再次更新数据内容时,它们同样将首先搜索自身当前所处的物理区域中是否存在虚拟社区内的其他用户;若存在的话,这些用户将组成新的虚拟用户组(如图1所示,用户a3运动到新的物理区域后,与a4,b3组成新的虚拟用户组).此外,对于虚拟社区内的其他一些未获得内容的用户,它们可依据自身运动模式及社区内移动用户之间相遇的时间规律,采用容忍延迟网(DTN)的协议方式[2,5],从那些已完成内容更新的移动用户处获取内容.这样通过组建临时用户组的协作下载方式,一方面使得从服务提供商处下载内容的支付费用可由用户组中所有成员平均支付,从而减少了每个移动用户的费用支出;另一方面,用户组以协作方式来进行下载时,仅需要少数用户通过无线网络连接到基站上,从而可改善基站的无线带宽使用情况,并减少支付给基站的无线网络连接费.此外,由于用户组内下载与传播数据内容的时间较短,这样的临时协作方式并不需要移动用户间长时间地保持彼此之间连通,从而可提供更大的灵活性.一般说来,上述临时移动用户组可表示为G=(GS,GU)的形式,其中GS={a1,a2,…,aNS}(NS=|GS|)为用户组中选出的可以直接从基站处下载内容的服务性用户,它们需要把下载到的内容传播给其他用户,起到了一定的服务器的作用;而GU={b1,b2,…,bNU}(NU=|GU|)则表示移动用户组中从服务性用户处下载内容的其他非服务性用户.此外,本文做出如下假设:(1)服务性用户从基站处下载数据内容的同时,便立刻将已获取的数据传播给非服务性用户;(2)非服务性用户可采用并发的方式从多个其他用户处下载内容,以缩短自身获取内容的时间;(3)非服务性用户在下载内容的过程中,将把自身获取的内容同时传播给GU中其他用户,直至自己完成内容下载为止;(4)服务性用户将一直向非服务性用户传播内容,直至所有的非服务性用户完成下载时为止.当GS中的服务性用户从基站处获得内容时,就立即把它们传播给GU中的用户.因此,移动用户组内成员通过协作的方式进行内容分发时,用户组所需支付的费用包括两类:(1)通过基站从服务提供商处获取NS份内容副本时,所需支付的费用ED.设每份内容副本的大小为D,下载单位字节的内容时所需费用为β,则用户组G所需的支付费用为ED=βNSD.(2)移动用户组在完成内容的传播与共享时,需要一定的时间,因此需要维持用户与基站之间、用户彼此之间的无线网络连接;而维持用户与基站之间的持续无线网络连接也需要移动用户向基站支付一定的费用.在用户下载内容过程中,令α为移动用户维持与基站间的无线网络连接时单位时间内所需支付的费用,TS为GS中服务性用户从基站下载内容所需的时间.由于服务性用户通过基站下载内容的时间为TS=NS·D链路带宽),则移动用户组维持与基站间无线网络连接所需付出的费用为ET=αTSNS.故移动用户组所需支付的总费用为一般说来,移动用户组G=(GS,GU)中的NS=|GS|较大时,则表明许多用户将直接从基站处下载相关内容和数据,这将在一定程度上减小移动用户组内的内容传播时间,但将增加整个移动用户组支付给服务提供商的费用ED;另一方面,若NS=|GS|较小时,则表明仅有少数计算用户充当服务性用户的角色,这将减少整个移动用户组的支付费用ED,但会延长整个移动用户组完成内容分发的时间.因此,对移动用户组而言,它们需要确定出合适大小的NS,从而实现对用户组支付费用及内容传播时间的联合优化.令TU为GU中非服务性用户从GS中服务性用户处获取内容、完成传播所需的平均时间,NU=|GU|为临时移动用户组中非服务性用户数.显然,当GU中所有用户下载完相应的内容时,则标志着整个用户组顺利完成内容分发.因此,当对用户Page5组支付费用及内容传播时间实施联合优化时,其目标方程为min(NUTU,EG).由于min(NUTU,EG)为多目标优化问题(multi-objectoptimization),在考虑相应的解决方案时,较为直接的做法是:建立起移动用户组关于内容传播时间、支付费用的开销函数并加以分析.令Ψ(NUTU)为用户组关于内容传播时间的非减式(non-decreasing)开销函数,Φ(EG)为关于用户组支付费用的非减式开销函数,则移动用户组完成内容分发所需的总开销函数可定义为Ψ(NUTU)+Φ(EG).然而Ψ(NUTU)与Φ(EG)的具体函数定义将依赖于实际的应用场景.例如:在移动用户获取股票行情、交通拥塞等实时信息方面,Ψ(NUTU)将会得到较大的关注,而在移动用户获取娱乐视频等方面,Φ(EG)将引起较多的开销,因此很难给出Ψ(NUTU)与Φ(EG)的具体函数定义.目前,在解决上述多目标优化问题时,较为常用的一种方法是通过给不同目标设置权值,将其转化为单一目标优化问题并加以解决[19],本文采用相同的思路,将上述多目标优化的方程重新定义为μ=WF(αTSNS+βNSD)+WTNUTU,WF+WT=1其中WF与WT为相应的权值.显然,若有WF=1,WT=0,则表明用户组仅关心获取内容时所需支付的费用αTSNS+βNSD,而不关心分发内容的完成时间;反之若有WF=0,WT=1,则表明用户组仅关心完成内容分发所需的时间,而不关心获取内容时所需支付的费用.我们将在第4节中讨论相关的策略,用以最小化总开销μ的取值,从而实现对用户组支付费用及内容传播时间的联合优化.此外,表1给出了本文所用到的主要数学符号及其定义.符号β从服务提供商处下载单位字节内容时所需支付的费用α单位时间成本B基站下行链路(downlink)的带宽N用户组内当前的移动用户数G当前的移动用户组D数据内容的平均大小U用户组总的内容分发能力GS服务性用户集合,GSGGU非服务性用户集合,GUGNS服务性用户个数,NS=GSNU非服务性用户个数,NU=GU4算法描述本文在制定面向移动用户组的内容分发机制时,将综合考虑对用户组的支付费用及内容传播时间两方面进行优化.具体而言,本文首先分析用户组完成内容分发所需时间的两种衡量方法,即用户组中完成内容分发所需的最大传播时间(MaximumDisseminationTime)TMDT和非服务性用户组中完成内容分发所需的平均传播时间(AverageDissem-inationTime)TADT.在对TMDT和TADT分别进行优化分析的基础上,进一步综合考虑所需支付给服务提供商和基站的内容获取费用与无线网络连接费用,选择合适大小的GS以实现对用户组总开销μ进行优化.此外,本文还考虑了在用户组支付总费用最低的情形下,如何优化组内的内容传播时间,从而达到优化用户组总体开销μ的目的.4.1基于最大传播时间最小化的优化策略在移动用户组G=(GS,GU)中,GS中每个用户首先各自从基站下载一份内容副本,然后分别传输给GU中的其他用户;GU中的用户一方面从GS处下载相应的内容,同时彼此之间也共享下载到的内容.当GU中所有用户下载完相应的内容时,则标志着整个用户组顺利完成内容分发.显然GU中所有用户下载完内容所需的时间,就是整个用户组G中完成内容分发所需的最大传播时间TMDT.下面我们将对TMDT进行分析,使得用户组的TMDT值可达到最小.我们令这个最小的最大传播时间为TM2DT,并在此基础上对μ进行优化.4.1.1理论分析设GS中某用户ai的内容分发能力为U(ai)(U(ai)依赖于ai所携带无线设备的硬件性能及其所处的无线网络环境),它将内容传播给GU中用户所需的总时间为t(ai);用户bi(bi∈GU)的内容分发能力为U(bi),它从GS中的用户处进行内容下载并传播给GU中其他用户所需的总时间为t(bi).由于用户组采用协作的方式进行内容的分发与共享,因此当GU中有用户在下载内容时,也必定会有其他用户在传送相应的内容.因此,整个用户组完成内容分发所需的最大传播时间可定义为TMDT=max{t(ai),t(bi)}:ai∈GS,bi∈GU.由于GU中用户获得内容时,须依赖于GS中用户及GU中其他用户的传送,因此有∑ai∈GS由于我们需要求TMDT的最小值,则在理想的情况下,当所有用户的上传时间都相同时,能满足最大传播时间的最小化[20]:TM2DT=min(TMDT),即U(ai)·t(ai)+∑bj∈GUPage6ai∈GS,bj∈GU,TM2DT=t(ai)=t(bj)(4)由式(3)和(4)可得,用户组最大传播时间的理想最小值为其中U=∑ai∈GS内容分发能力的总和.令TU为GU中用户完成下载所需的平均时间,TS为GS中用户从基站处完成下载所需的时间,下面本文将讨论TS与TU之间的关系.由于GS中用户从基站开始下载内容后,GU中的用户才会从服务性用户处获得相关内容,故显然有TUTS.则由TS=NS·DB和式(5)可得NSD式(6)表明NS的大小不应超过B·NNS值过大,则用户组需要从基站下载多份内容副本,而这将引起TS值的增大;另一方面,若NS值过大,则用户组所需支付给服务提供商的费用ED也会随之变高.4.1.2对用户组总开销的分析本节将讨论当NSB·NNS值来优化移动用户组的总体开销μ.令μM2DT(NS)为用户组关于NS的总开销函数,则由式(2)可得μM2DT(NS)=WFβNSD+WFαNS·D首先求μM2DT(NS)关于NS的一阶导数得μM2DT(NS)NS=WFβU-2WTαN由式(8)可得(1)若2WTαNWFβU,则有μM2DT(NS)这表明此时用户组的开销函数μM2DT(NS)为单调非减型函数,故当NS取整数为1时,用户组所花费的总开销最小,即此时NS的最优值为NS=1.(2)若2WTαN>WFβU时,由式(8)求其二阶导数得显然有2μM2DT(NS)户组开销函数μM2DT(NS)在定义域内是关于NS的一个凸函数,故存在着最小值.则令μM2DT(NS)可得2DWFα可解得由于服务性用户数NS需要是一个整数,我们需求得式(10)中NS值附近的整数,使得开销函数μM2DT(NS)在式(7)中可达到极小值.因此,需要比较2WTαN-WFβU2WFαU+2WTBB附近的整数2WTαN-WFβU2WFαU+2WTBB.令x=2WTαN-WFβU和2WTαN-WFβU则有(1)若μM2DT(x)μM2DT(x),则令x=x;(2)若有μM2DT(x)<μM2DT(x),则令x=x.再综合前述的限制条件NSB·N则最终可确定NS的最优值为下面我们给出相应的算法.算法1.M2DT(Minimizing_Maximal_Dissemi-nation_Time).1.Themobileusersthatareinterestedinthesame2.Amobileuserisrandomlyselectedasthescheduler3.seobtainsthevalueofαfromthecontentprovider,4.if2WTαNWFβU5.sesetsNS··=1andselectstheuserholdingthe6.else7.if2WTαN>WFβU8.seobtainsx=2WTαN-WFβU9.ifμM2DT(x)μM2DT(x)10.x··=x;11.else12.x··=x;13.endif14.sesetstheoptimalvalueofNSasNS=Page715.mobileusersinthegrouparesortedinade-16.endif17.endif18.theusersinGSdownloadthecontentfrombase4.2基于平均传播时间最小化的优化策略在本文所提出的协作式下载过程中,GS中的用户首先从基站处获取内容,然后再分发给非服务性用户组GU中的其他用户.因此,GU中用户完成内容传播的进度决定了整个用户组中内容分发的完成时间.在本节中,我们将对GU中用户完成内容传播所需的平均时间TADT进行分析,使得用户组的TADT值可达到最小(我们令这个最小的平均传播时间为TMADT),然后在此基础上对μ进行优化,并给出相应的算法.4.2.1理论分析设t(bi)为GU中用户bi完成内容下载并分发给GU中其他用户的时间,则GU组中所有用户完成内容分发的平均时间为TADT=1服务性用户总的内容分发能力为UGS=∑ai∈GS将GU={bj}中的用户按他们的内容分发能力{U(bj)}从高到低进行排列,由文献[21]可知,GU中任一用户bj完成内容下载所需的最短时间至少为TD=DUGS有的服务性用户均向bj提供下载.我们称TD为用户bj获取内容所需的最短时间.由于服务性用户从基站处完成内容下载的所需时间为TS=NS·Dbj而言,其完成内容下载的最短完成时间不会低于TS,即TDTS;又因为基站提供的内容下载带宽为B,且NS为正整数,则有令TMADT为GU中用户完成内容传播的最小平均时间,则可用线性规划(linearprogramming)来建立关于TMADT的数学模型,其目标函数为由于在下载过程中每个用户均会不断上传自己已获得的内容,假设GU中最后下载完成的是用户bk,其完成内容传播所用时间为t(bk)(即bj∈GU,t(bj)t(bk)),则有NUDUGS·t(bk)+∑bj∈GU其中UGS·t(bk)为所有服务性用户总的内容传播量,∑bj∈GU同时又传播给其他用户的内容量.由TDTS可得由式(13)~(15),可得完整的线性规划方程,并可解得GU中用户的最小平均下载时间TMADT.4.2.2对用户组总开销的分析当选择好一个NS后,根据4.2.1节中的线性规划方程可求得GU中用户完成内容传播所需的最小平均传播时间TMADT,即TU=TMADT.则此时根据式(2)得到用户组所需付出的总开销函数为μMADT(NS)=WFβNSD+αNSD由4.2.1节可知,任意一个非服务性用户完成内容传播所需时间至少为TD=D可知:在按照内容分发能力从高到低排列好的N=NS+NU个用户中,存在整数M(MNU)个用户完成内容传播的时间为TD,当且仅当M满足下式并且在此策略下可满足GU中TMADT值取得最小化.当NS选定时,内容分发能力高的前NS个移动用户将被挑选出作为服务性节点,从而可得服务性用户的总上传能力UGS,并可通过式(17)得到M的值.M值确定后,便可减少式(13)中目标函数内的未知数个数,从而降低线性规划的算法复杂程度.我们在算法2的具体过程,用以确定最终的NS值以达到优化用户组中总开销μMADT的目的.算法2.MADT(Minimizing_Average_Dissem-ination_Time).1.Themobileusersthatareinterestedinthesame2.Amobileuserisrandomlyselectedasthescheduler3.seobtainsthevalueofαfromthecontentprovider,Page84.sesortsallthemobileusersinadescendingorder5.forNS··=1toNdo6.thefirstNSusersareselectedastheservicing7.calculatetheUGS;8.calculatethevalueofMaccordingtoEq.(17);9.foreachbj∈GMdo10.t(bj)··=TD;11.endfor;12.calculateEq.(13)~(15)bylinearprogram-13.computethevalueofTMADT;14.calculatethevalueofμMADT(NS)accordingto15.ifμ16.NS=NS;μ17.endif18.endfor19.thefirstNSusersareselectedastheserviceusers,4.3基于最小支付费用的优化策略本节将首先分析用户组支付费用最低的情形,然后在此基础上进一步优化用户组的总开销μ.由式(1)可得EG=ED+ET=βNSD+αNS·D显然EG在NS>0上是关于NS单调递增的二次函数;故在NS=1时,可取得EG的最小值βD+αD面我们将基于4.1节和4.2节中提出的最大传播时间最小化策略及平均传播时间最小化策略分别来分析:当用户组支付费用EG最低时,如何优化总开销μ.我们将相关的优化策略分别命名为FM2DT和FMADT.若使用最大传播时间最小化的策略FM2DT时,则由式(5)可得,当NS=1时,用户组的最小内容分发时间为此时组内服务性用户完成内容下载的时间为TS=NS·D完成内容下载的时间无法快于服务节点,即有TFM2DTTS.因此,所有用户都完成内容下载的最小时间为T用户组最小总开销μFM2DT=WFβD+α()Dμ若使用平均传播时间最小化的优化策略FMADT时,则由NS=1,可根据式(17)计算出线性规划中的M值.设这M个用户组成的集合为GM,由文献[21]可得,GM中用户完成内容传输的最短时间为TD=D性用户完成内容传播的最小平均时间,则可用线性规划来建立关于TFMADT的数学模型,其目标函数为由于在下载过程中每个用户均会不断传播自己获得的内容,假设GU中最后完成内容下载的是用户bk,其完成内容下载所用时间为t(bk)(即bj∈GU\GM,t(bj)t(bk)),则有NUDUGS·t(bk)+∑bj∈GM其中UGS·t(bk)为服务性用户的内容传播量,∑bj∈GMU(bj)·TD为GM中非服务性用户的内容传播总量,∑bj∈GU\GM户在获取内容的同时又传播给其他非服务性用户的内容总量.由TDTS可得由式(20)~(22),可得完整的线性规划方程,并可解得GU\GM中用户完成内容分发的最小平均传播时间T下,若采用平均传播时间最小化的优化策略,整个节点组最小总开销为μ5仿真实验结果及分析在本节中我们通过仿真实验来对M2DT,MADT,FM2DT,FMADT算法进行分析与比较.仿真环境为T75002.20GHzCPU、2GB内存.仿真代码用MATLAB7.10编写.移动用户组中的用户数为N=10,WT=WF=0.5,它们各自的内容分发Page9能力在区间[0.01Mb/s,0.1Mb/s]中随机挑选.用户需要获取内容的大小为D=100K,下载每K字节内容所需的费用为β=0.001.基站的下行链路带宽B=1Mb/s.此外,在5.3节中我们还针对WT与WF的不同权重取值做了相应的仿真实验,并分析与比较了它们对算法结果的影响.5.1对M2DT算法的测试在本节中我们测试了参数(α,β,B)对M2DT算法中用户组总开销的影响.针对4.1.2节中2WTαN>WFβU的情况,我们在图2中考察了2WTαN/WFβU={1.5,2.0,2.5}这3种情形下:服务性用户数NS值大小、用户组总开销μM2DT的变化情况.如图2所示(为了表示方便,在图2、图3中我们令θ=2WTαN/WFβU),当2WTαN>WFβU时μM2DT是一个关于NS的凸函数,随着2WTαN/WFβU值的增加,用户组选择最优策略时的服务性用户个数NS也随之增加;此外当NS>NS时,μM2DT值也将随之增加,这标志着用户组为了购买多份内容副本将需支付更多的费用.图22WTαN>WFβU时用户组总开销μM2DT图32WTαN<WFβU时用户组总开销μM2DT针对4.1.2节中2WTαN<WFβU的情况,我们考察了θ=2WTαN/WFβU={0.3,0.6,0.9}这3种情形下:服务性用户数NS的大小、用户组总开销μM2DT变化情况.从图3中可以看出,当2WTαN<WFβU时,用户组所选择的最优策略始终为NS=1,此时用户组所需付出的总开销最小.这是因为当2WTαN<WFβU时EG是一个关于NS的单调增函数,因此用户组最优策略始终是NS=1.在测试基站下行链路带宽B对用户组关于内容分发时间的总开销的影响时,我们考虑了两方面的时间开销:(1)服务性用户从基站处下载内容的所需时间为TS,在此期间,它们需维持与基站间的无线连接并支付相应费用;(2)非服务性用户完成内容传播的平均所需时间为TU.因此,用户组关于内容分发时间的总开销可定义为γ=WFαTSNS+WTTUNU.我们考察了B={1Mb/s,5Mb/s,10Mb/s}这3种情况.从图4中可以看出,当B增大时,用户组关于内容分发时间的总开销γ减少.这是因为γ=WFαN2S·D个二次函数,其对称轴为NB时,用户组的内容分发能力U与B相差不大,则对称轴NBWFαU+WTB会向NS的负方向移动,表现出γ随着NS的增大从下降变成上升趋势.当B较大时,U与B值相差较大,此时关于γ的对称轴WFαU+WTB会向NS的正方向移动,表现出γ随着NS的增大而下降.NB图4B对用户组的内容分发时间开销γ的影响5.2对MADT算法的测试在本节中我们测试了参数(α,β,B)对MADT算法中用户组总开销μMADT的影响.在测试过程中,我们首先用迭代的方式,算出NS所有可能取值情况下的TMADT,并在此基础上计算出相应的μMADT值,最后通过比较来确定最小开销下的NS.在测试参数(α,β)对MADT算法中用户组μMADT的影响时,针对4.1.2节中2WTαN>WFβU的情况,我们考察了θ=2WTαN/WFβU={0.5,2.0,4.0}这3种情形下,服务性用户数NS的大小、用户组总开销μMADT的变化情况.如图5中所示,在这3种情形下,NS的值分别为{4,3,1}.此外,随着NS的增加,μMADT也随之增加,这是因为用户组为了获取多份副本需要支付较多的费用给服务提供商.Page10在图6中,我们通过算出M,来减少MADT算法中线性规划的未知变量个数,从而减少迭代次数和算法的执行复杂度.从图中可以看出,当选取的服务性用户个数NS较小时,线性规划的变量较多,此时M值较大;而随着NS的增加,非服务性用户的数量将下降,因此也带来M值的减少.在测试B对用户组γ的影响时,我们考虑了B=(1Mb/s,5Mb/s,10Mb/s)这3种情况.从图7中可以看出,当B=1Mb/s时,用户组总的内容分发能力U与B相差不大,因此当NS>4时,则出现γ从下降趋势迅速变成为上升的趋势;当B=5Mb/s,10Mb/s时,用户组的内容分发能力UB,故当NS增加时(即更多的用户选择直接从基站处下载),用户组关于内容分发时间的总开销γ呈下降趋势.5.3对比仿真实验在本节中我们将文中提出的M2DT,MADT,FM2DT,FMADT算法,与非合作情形下的内容分发策略(即所有的移动用户均采用直接从基站处下载内容的策略)进行分析对比.我们测试了内容大小图7B值对用户组的内容分发时间开销γ的影响D和基站带宽B变化时,对用户组的总开销μ、支付给服务提供商的内容获取费用ED=βNSD和用户组关于内容分发时间总开销γ的影响.我们还将WT与WF设置成不同的权重取值,并测试其对用户组总开销所带来的影响.在图8~图10中,D值从10Kb变化至100Kb,基站下行链路带宽B=1Mb/s,2WTαN/WFβU=2.从图中可以看出,当D增大时,5种算法下用户组的总开销呈线性增加;然而在非合作(non-cooperative)情形下,每个移动用户都需要向服务提供商支付内容获取费用,从而使得最终的总开销最高.而在FM2DT与FMADT方法中,用户组包含一个服务性用户,即NS=1,故其内容获取费用ED最低;而这也使得用户组最终完成内容传播需要较长的时间,从而使得整个用户组的γ较大.此外,我们还可以看出,非合作方法中用户组的γ值大于M2DT和MADT中γ的相应值.这是因为在非合作方法中,所有的移动用户均直接连接到基站下载内容,它们图9D对用户组的内容获取费用ED的影响图10D对用户组的内容分发时间开销γ的影响Page11在获取内容的过程中将保持与基站之间的持续网络连接,而这样的网络连接过程需要每个用户都向基站支付相应的费用,从而导致γ=WFαTSNS(在非合作方法中WTTUNU的值为0)的值较大.在图11~图13中,我们让B从1Mb/s变化至10Mb/s,下载内容大小为D=100Kb,2WTαN/WFβU=2.从图11中看出,当B增大时,用户组在保持NS不变的情况下,所需的下载时间大为减少,从而减低了整体的开销.另一方面,从图13中可以看出,随着B的增加,非合作方法中用户组的γ值要低于其它几种方法;这是因为当B值增加时,用户从基站处下载数据内容所需时间TS迅速下降,即每个用户连接在基站上的时间大为缩短,从而降低了αTSNS的值.此外我们还可以发现,在FM2DT和FMADT中,尽管用户组的ED费用值最低,但是用户组总开销μ较大.这是因为在FM2DT和FMADT图14WT与WF的权重值改变时B对用户组总开销的影响中,只有一个服务性用户连接在基站上,其他用户均需要从该用户处获取内容;而在仿真实验中,尽管B的值变大,但移动用户之间的内容分发能力并没有提高,从而导致FM2DT和FMADT方法中最终完成内容传播需要较长的时间,即使得用户组的γ较大.图13B对用户组的内容分发时间开销γ的影响在图14~图15中,我们将(WT,WF)的权重值分别设置为(0.2,0.8)、(0.6,0.4)和(0.8,0.2),并比较了在不同权重值下用户组总开销的变化情况.从图中可以看出,随着WF权重值的增加,非合作方法中用户组总开销迅速上升.这是因为在非合作方法中,用户组总开销为WFβNSD+αNS·D故当WF值增大时,整个用户组的总开销也随之增加.另一方面,从图14(a)可以看出,随着网络带宽B的增加,M2DT、MADT方法中的用户组总开销μ逐渐低于非合作方法中的μ值.这是因为在M2DT、MADT方法中,用户组支付给服务提供商的内容获取费较低,并且随着B的增加,用户组从基站处获取内容的时间大为缩短,从而使得所需支付给基站的网络连接费用WFαTSNS也较低.从图14~图15中我们还可以看出,当WT的权重值减低时,FM2DT和FMADT方法中的用户组总开销也随之迅速减低.这是因为,在FM2DT和FMADT方法中,用户组的总开销主要由WTTUNU决定,其直接受到WT权重值的影响.此外,从图14(c)中可以看出,随Page12图15WT与WF的权重值改变时D对用户组总开销的影响着B的增加,M2DT、MADT方法中用户组总开销μ与FM2DT、FMADT方法中的μ值非常接近.这是因为在FM2DT、FMADT方法中,只有一个服务性用户连接在基站上,其他用户均需要从该用户处获取内容.这一方式尽管减低了用户组所需支付给服务提供商及基站的相应费用,但却导致用户组的WTTUNU值较大,从而影响了用户组的总开销μ.6结束语在移动社交网络中为了实现高效、低费用的内容分发,本文将处于邻近物理位置、对共同内容感兴趣的移动用户组成虚拟用户组,以协作的方式通过基站从内容服务商处下载内容,并在彼此之间进行内容传播.在对用户组中内容传播时间和所需支付费用这两方面进行优化时,我们首先考虑了两种关于内容分发时间的优化策略:用户组中内容分发的最大传播时间最小化策略和非服务性用户的内容平均传播时间最小化策略.在此基础上,进一步考虑所需支付给基站的无线网络连接费和支付给服务提供商的内容获取费,来制定相应的优化策略.此外,本文还考虑了在用户组支付费用最低的情形下,如何优化组内的内容分发时间.我们分别给出了相关算法,来实现上述的内容分发策略,从而可提高用户组的整体效益.最后还通过相应的仿真实验来分析了所提出算法的特点.
