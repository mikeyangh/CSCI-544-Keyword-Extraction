Page1信息-物理融合系统动态行为模型构建方法周兴社杨亚磊杨刚(西北工业大学计算机学院西安710072)摘要信息-物理融合系统(Cyber-PhysicalSystem,CPS)特有的计算、通信、控制的联合动态性,计算与物理的多尺度融合性,系统环境及状态的时空交互性以及系统动态行为的非确定性,不但使面向CPS的模型驱动设计与验证方法在CPS系统设计中更为重要,而且也向其提出了新的技术挑战.论文在结合典型实例分析CPS系统特征及其模型构建具体挑战的基础上,研究并总结了CPS动态行为建模的主要方法:一体化建模方法从CPS系统层面描述计算过程与物理过程的交互与融合;时空交互建模方法关注CPS系统行为与时间及空间关系的语义表示;功能和实现兼容建模方法侧重刻画CPS系统的逻辑设计和物理实现的映射与支撑;而集成建模方法则重点解决多异构模型的交互方式与语义的一致表达.论文基于多异构实体的CPS系统建模框架,提出了一种CPS系统结构与动态行为的协同建模方法,并用CPS-ADL对其进行了实现和验证.关键词信息-物理融合系统;动态行为建模;一体化模型;集成建模;协同方法1引言随着嵌入式计算、无线感知网络、网络化控制等技术的快速发展和持续融合,美国国家科技委员会于2006年提出了信息-物理融合系统(Cyber-PhysicalSystems,CPS).CPS是一个计算过程与物理过程融合的复杂系统,其通过计算、通信和控制的有机融合与深度协作,实现信息域和物理域的紧密结合[1-3],已成为当今计算机学科前沿交叉研究的重点方向之一,具有广泛的应用前景[1,4].随着CPS系统研究的进展,一些在通用计算领域较少关注的系统建模关键问题逐渐呈现出来.在CPS系统中,离散的计算过程与连续的物理过程并存在系统之中.物理过程往往由许多并行/并发的物理活动或事件组成,而计算过程本质上是一个串行单步执行过程,难以用单一模型刻画二者的融合特征.计算过程与物理过程的融合使得系统行为与状态具有更鲜明的时空性和动态非确定性,现有建模方法的语义表示难以适应.除此之外,还需要深化解决异构模型集成等问题.本文的主题是分析和总结目前CPS系统动态行为模型构建方法.针对CPS系统的计算过程与物理过程融合特征,论述和分析与之适应的动态行为模型,以便支持设计人员更好地分析网络化计算过程在与物理过程融合、与物理环境交互中的动态行为,为系统的设计与实现奠定基础.本文第2节结合月球车自主行走控制子系统典型实例,分析和总结CPS系统的关键特性及其动态行为建模面临的挑战;本文第3节深入分析和总结目前正在研究的CPS动态行为建模方法及其实现技术;第4节在提炼CPS建模核心要素的基础上,给出一种CPS系统结构和行为协同建模方法和实现;第5节对全文进行总结,并简要分析CPS的发展趋势与技术影响.2CPS系统特点分析及其建模挑战2.1一个典型的CPS系统实例具有“3C(ComputationCommunicationControl)”紧密结合、计算过程与物理过程深度融合等特性的CPS系统在数字医疗、航空航天、智能交通、基础设施等领域有所体现.我们以月球车为例说明其工作机理.月球车是一种在月面环境下执行探测任务的自主运动系统,其控制模式是在深空遥操作下的自主行走控制模式.月球车自主实现环境识别、行走避障、姿态控制、深空通信等功能[5].其组成包含了多摄像头等感知设备、实时任务计算机、内部网络通信与外部数据链通信以及六轮协同运动等子系统.其环境感知、数据处理与轮系控制紧密交互、深度融合,是一个典型的CPS系统应用实例.月球车在自主行走场景中的处理流程如图1所示.月球车通过深空通信链路接收地面指令进入自主行走模式,在该模式下,其通过摄像头及其他传感器周期性采集月球物理环境参数和车体运动参数,通过内部通信网络实时传输到数据处理计算机完成数据处理与轨迹计算.如果判断系统处于安全状态,则通过通信网络向轮系控制器发送继续行走指令;如果存在翻车等危险可能性,则立即发送停车指令,并要求在规定时间内执行完停车动作.在每一处理周期结束时,将自身状态通过数据链发回地面监控系统.在月球车自主行走过程中,计算、通信、控制过程依据严格的时空约束在持续地融合,并与物理环境不断交互,共同确定月球车下一时刻的行为.通过上述的例子可以看出,月球车自主行走系统的多个并发计算过程和物理过程之间通过传感器、通信网络、作动器实时交互和深度融合,通过网络化精确控制实现协同操作.系统设计与实现涉及实时并发计算、感知网络以及自主控制的紧密融合,系统设计不仅要考虑计算、通信和控制过程中的时间约束,还必须考虑所处的特殊物理环境(月面地形、温度等因素).2.2CPS系统主要特性分析CPS系统内在特性,主要体现在以下几点:Page3(1)“3C”联合动态性.CPS系统通常由多类物理过程、感知器与控制器、并发计算实体以及实时通信网络所构成,计算、通信与控制实体的变化都会影响整个系统的动态行为.(2)多尺度融合性.CPS系统结构的层次性及其组成的异构性,使得离散计算过程和连续物理演化过程的融合在系统规模、逻辑层次、组成元素和非功能属性等方面呈现多尺度特性.(3)系统行为的非确定性.CPS系统的状态与行为非确定性主要缘于计算过程并发、物理过程随机、物理环境扰动以及网络通信延迟等因素.(4)环境与过程的时空特性.CPS系统行为的响应不仅与所经历的时间相关,同时也和其所处空间相关.具体表现为计算过程要求严格的时间约束,而物理过程具有空间依赖性.例如,在月球车自主行走系统中,安全监测参数具有时间属性,且与月面地形地貌的物理空间有关.(5)非功能需求的多样性.多数CPS系统属于任务关键或安全关键应用,不但具有鲜明的时间约束性,往往也要求很高的状态安全性(Safety)以及运行可靠性,系统呈现出多维服务质量需求.CPS系统与物联网以及传感网相关,但有本质区别.物联网通过射频识别、红外感应等多种信息传感设备实现物品与互联网的连接,是互联网在“物物互联”的延伸和扩展,以追求物品的智能化识别、定位、跟踪和管理为目标;传感网是多个感知节点通过自组织方式构成网络,实现对指定区域或具体物理对象的监测,以获得被监测者的实时状态和动态行为为目标;而CPS系统是在环境感知基础上,深度融合了计算、通信和控制能力的网络化物理设备系统,其具有感、知、传、控一体化能力,以追求开放动态环境下系统行为可预测、系统特性综合优化为目标.当然,物联网和传感网的快速发展,为实现计算过程与物理过程的有效交互与融合,为CPS应用系统设计和实现提供了更为良好的基础.2.3CPS系统动态行为建模面临的挑战基于模型的分析和设计方法可对复杂系统属性和特征建立模型,构成严谨的系统规格说明、反映系统行为演化、支持系统关键属性证明,已成为保障系统研发质量的重要方法和技术途径.其与传统的原型方法相比,能够支持在系统早期设计中分析关键属性是否满足需求、是否存在设计缺陷.CPS系统所具有的上述内在特性,使得构建CPS系统动态行为模型成为科学设计CPS应用系统的关键,也成为CPS系统研究热点和难点之一.其面临理论方法与实现技术的挑战主要体现在以下几个方面:(1)为了适应CPS系统的计算过程与物理过程的交互与融合,系统模型需要包括多个物理模型与计算模型,例如对月球车自主行走过程动态行为建模时,传感器数据采集过程可用事件模型、数据驱动的计算过程采用数据流模型,而轮系运动控制过程宜用混成自动机模型.因此,必须确定合适的模型集成框架,实现异质异构模型的有机集成和一体化建模.在CPS行为建模过程中,涉及计算过程的物理化与物理过程的信息化,还必须考虑计算过程串行执行语义与物理过程并发执行语义的融合问题.(2)CPS系统模型需要融入通信网络模型,分析通信延迟对计算过程和物理实体网络化精确控制的影响.而通信延迟不仅与网络层的通信协议、通信带宽等因素有关,还与网络所处的物理环境有关,如月球车例子中,网络通信与月球的温度变化等因素相关,需从多层面分析通信网络对系统的影响.CPS系统所具有的时空特性,需在系统模型中扩展显式的时间与空间属性,并分析其对系统功能与性能的影响.(3)CPS应用系统的实时性、可靠性、安全性等非功能特性比传统的计算系统要求更高,分析参数更为复杂.计算过程和物理过程交互融合,过程变量相互影响,并与通信延迟直接相关,所建模型应能够有效支持这些非功能特性的分析.例如,月球车自主行走的安全性参数与轮系控制周期以及通信网络时延密切相关,设计支持非功能属性分析方法是CPS系统模型构建需要着重考虑的.(4)CPS系统建模不仅应支持系统功能设计,也要考虑对系统实现的支撑.不同领域的CPS系统应用具有各自不同的具体需求与特点,模型构建及其分析方法既要考虑多领域共有特点,也要具有面向具体领域的扩展能力.3CPS系统动态行为建模方法自信息-物理融合系统概念提出以来,其系统动态行为模型构建方法及其工具实现一直是国际相关研究计划和研究团队关注和研究的热点,并已取得阶段性创新成果和研究进展.基于CPS建模面临的主要挑战,论文在分析目前主要研究成果的基础上,将其提炼为以下4类,并指出了进一步的研究重点.3.1一体化建模CPS系统包含了共存且相互作用的连续物理系统和离散计算系统.传统方式是两者分别建立各Page4自模型,物理过程采用微分方程、差分方程等动力学行为模型,而计算过程则用有限状态机、数据流等离散模型.而信息-物理融合系统的行为模型需要对计算过程和物理过程及其交互进行一体化建模[6].CPS系统一体化建模首先要考虑物理过程连续性、并发性与计算过程的离散性、顺序性之间的本质区别,建模语言要适应计算模型串行执行语义与物理模型并发执行语义的融合;其次应考虑计算过程依赖于物理过程的参数选择,即计算模型的行为依赖于连续的物理过程时间步长的选择;还应预防有可能出现的芝诺(Zeno)行为,即在有限的时间间隔内发生无穷多个事件,类似颤动行为;并应考虑具体领域的特性,具体应用领域已有相关比较成熟的物理控制模型,如何将这些模型和计算模型有效融合,实现特定CPS应用系统的建模.CPS系统一体化建模方法目前主要有基于服务的一体化建模、基于Agent的一体化建模和基于混成系统的一体化建模等.3.1.1基于服务的一体化建模基于服务的一体化建模是将面向服务的体系结构思想引入CPS系统建模之中,将物理过程、交互过程以及计算过程以服务的形式进行封装和集成,实现计算过程和物理过程的异构集成.La等人[7]将CPS系统自底向上分为物理层、控制层和服务层3层架构,如图2所示.物理层是深度嵌入到物理环境中的物理实体,控制层通过通信网络实现物理过程与计算过程的交互,服务层包含了一组分布式实时计算服务.其中控制层是系统设计的关键,它从底层物理层得到服务请求,向服务层查询或者更新服务,之后再反馈给物理层,实现计算和物理的融合.图2基于服务的CPS系统三层建模框架[7]在基于服务的建模过程中,不仅需要定义面向计算过程的服务模型,还要定义面向物理实体的服务模型,而且由于同样的物理实体在不同时间、不同空间提供的服务可能是不同的,因此这类服务与物理环境以及时空特性密切相关.例如:HuangJian①基于SOA的思想对CPS系统中物理实体提供的服务进行建模,将物理实体作为服务的提供者,通过对物理实体的情景信息建模以解决物理实体提供服务的动态性和不确定性问题.基于服务的建模方法具有良好的可扩展性和灵活性.然而每一次物理过程和计算过程的交互均需要服务组合和调度过程,该方法难以保证CPS系统时间约束.在CPS系统行为建模中,需要对SOA架构模型的服务进行更高层次的抽象和封装,以反映物理过程和计算过程的紧密融合.3.1.2基于Agent的一体化建模基于Agent的一体化建模[8-10]是利用Agent固有的行为自主性、作用交互性、运行持续性、环境协调性以及结构分布性来刻画计算过程和物理过程的交互融合.图3中CPS-Agent是包括传感器和作动器处于某一环境中的计算实体,其通过传感器感知环境,通过作动器作用于环境,运用所拥有的实时知识实现问题求解,并与其他Agent进行信息交流和协同.Lin等人[10]利用Agent对典型CPS应用实例-智能水利系统进行建模,实现了水流量及其分布的网络化实时控制.文献[11]利用多Agent完成智能电网应用实例的建模.采用该方法,可利用已有Agent编程语言及其建模工具[12-13].然而Agent方法存在固有的缺陷.首先,用Agent构成的CPS系统模型具有非确定性,这是因为Agent的自主性可使其在一定程度上自由地做出决策,可能导致Agent之间的交互无法准确预测和管理.其次,系统的性质和行为在设计阶段难以确定,虽然设计者可以给出个体Agent的行为规范,但系统动态行为只有在运行时才能体现.因此,此类建模方法需要着重解决CPS系统行为难以预测的问题,并扩展和增强Agent的物理过程交互①https://utd.edu/~ilyen/course/service/project/jian.pdfPage5语义表示能力.3.1.3基于混成模型的一体化建模混成系统(HybridSystem)是一类同时具有离散和连续行为特征的复杂系统[14-15].混成自动机是对该类系统建模的有效手段,它是基于连续时间的物理模型和基于有限状态机的计算模型的结合,适应CPS系统物理过程与计算过程的交互与融合模型构建需求与特点.目前,混成建模方法主要分为两类:第1种是基于离散事件动态系统(DEDS)的建模方法,其思想是将连续动态系统的模型嵌入到离散行为模型中.Henzinger[14]提出的混成自动机模型将每个离散状态中连续变量的行为通过相应的微分方程组进行描述.第2种是基于连续变量动态系统(CVDS)的建模方法,其思想是将离散行为描述嵌入到连续动态的模型中.Johansson等人[15]提出通过连续与离散特性相互依赖的物理规律、逻辑法则和操作约束共同描述系统的混成逻辑动态系统模型,目前在CPS建模中使用较多的混成建模方法是上述第一种方法,首先将CPS系统的计算过程用有限状态机进行建模,之后利用微分方程表达的连续物理过程对状态进行扩展和精化,采用事件机制实现状态之间的变迁.文献[16]提出了一种基于HybridProgram的CPS建模方法,该方法的特点是通过一组定义的规则将HybridUML转换为HybridProgram,为采用差分动态逻辑进行属性验证奠定了基础.文献[17]以安全分析为建模需求,利用混成建模方法对CPS典型实例医疗系统进行建模和分析,提出了一个能够描述时间和空间的混成建模框架,在该框架中按照系统的关键变量(药物浓度以及注射速率)将系统划分为多个状态,每个状态都利用偏微分方程进行描述,在这些方程中体现了时间以及空间对系统行为的影响;在描述系统状态时按照系统安全的需求,将超出变量安全范围的系统状态作为一个确定的状态,给出系统的一些输入值,通过可达性分析验证系统的安全性.文献[18]基于混成自动机模型,提出了一个事件驱动的CPS系统性质监控模型.采用混成系统建模方法可有效解决CPS系统中连续的物理过程和离散的计算过程融合建模问题.但传统的混成模型大多局限于时间域内的分析,没有考虑计算过程和物理过程通过网络实时交互对系统行为所带来的影响,因此需要扩展现有混成模型以刻画CPS系统中的网络交互、时空相关以及多模型结合等问题.3.1.4其他一体化建模方法文献[19]提出了一种面向CPS系统的统一时钟理论,支持对计算与物理过程事件的同步.文献[11]基于全局时间的一体化建模方法解决了智能电网中的连续物理过程和计算过程融合问题.伴随着一体化建模技术的发展,也陆续出现了CPS系统一体化的建模工具.Berkeley研发的PtolemyII[20]基于Actor的设计方法,对基于端口通信的构件进行建模和仿真.PtolemyII中的Actor不但可执行,也可与其他Actor进行通信,各Actor之间的交互规则由计算模型定义.文献[21]面向CPS系统的需求框架建模,提出了一种基于本体制导的系统需求一体化建模方法,探讨了CPS系统需求的一体化建模问题.在CPS系统计算过程和物理过程一体化建模中,需要进一步深化研究的是通过实施信息化物理过程与物理化计算过程[4],对物理子系统进行软件化抽象封装,使物理子系统具有与计算过程可交互的特性;同时扩展软件组件和网络组件,使它们具有物理世界的时间特性.3.2时空交互建模物理世界的时间流逝性是信息-物理融合系统的内在属性,但已有的计算模型和网络抽象并没有体现出这种时间属性.同时,CPS模型构建应综合考虑计算实体和物理实体在空间及时间上的相关性,通过时间和空间位置来确定事件执行顺序、确保系统状态和行为的正确性.例如:在CPS实例-化疗输液控制系统中[17],由计算机精确控制输液速度,以保证血液中的药物浓度在要求的范围内;控制算法从药物在人体扩散过程中得到反馈,药物浓度扩散是连续的动力学过程,而浓度控制是离散的计算过程,药物浓度以注射点为中心依次递减.此外,随着时间推移,越来越多的药物被注入,药物在血液中的特定位置的浓度不断发生变化,关键是在人体的特定区域中通过注射时间的限制来控制药物的剂量.信息-物理融合系统中的时间主要是用来预测、度量和控制物理世界的一些属性.已知一个物理模型的起始状态、输入、已经运行的时间,就可以计算该物理模型目前的状态.然而,基于目前主流的编程模式,给出程序的源代码、程序初始状态和运行时间,是难以准确预测出程序未来的状态.当处理程序和物理动力学集成在一个系统中时,系统设计与分Page6析更为困难.而且,物理实体的动态性和程序运行的不确定性可能会导致灾难性的系统失效,传统方法是通过台架测试(TestBed)的方法测量系统最坏执行时间(WCET)以验证系统设计的完备性与健壮性,然而在CPS中由于系统行为和物理环境密切相关,环境的改变可能对系统的行为产生重要影响,因而难以通过台架方法进行全面的模拟和测试.为了解决CPS系统时空特性所带来的挑战,一些学者扩展了现有的模型.文献[22-24]扩展了传统的事件模型,在事件模型中添加了时间和空间的属性,其中时间属性包括点时间及时间段两种形式;空间属性包括点和区域两种形式,时空属性作为事件多元组中的一部分,共同构成事件的表达.文献[25-26]为了解决计算模型中的逻辑时间和物理过程中的物理时间一致性问题,利用物理时间来刻画事件的时间戳属性,解决了CPS系统模型时间一致性问题.文献[27]针对CPS系统组件可替换性判定问题,提出了一种时空π演算理论,可描述CPS系统组件的时空依赖性.目前这些方法部分解决了时空特性所带来的一些问题,但仍有一些关键问题亟待解决.例如,在模型中添加时间属性的方法中,如何解决多个异构模型中的时间转换,如何实现物理过程的连续时间和计算过程的离散时间统一;在基于事件的描述中,如图4CPS功能模型和实现模型集成[28]文献[29-30]利用面向方面编程的策略,将独立维护和开发的不同模型编织在一起,实现了系统行为的联合建模.引入了定量管理器(QuantityManagers)对实现细节进行管理,如CPU能耗、网络带宽等,并将数据管理者和功能模型绑定.传统物理控制系统建模时往往忽略了计算平台何扩展事件的时空属性.为此,还需要继续深化研究CPS时空特性表达与分析方法,主要研究途径有:扩展现有模型的时空语义,增强对时空的支持能力;定义连续时间与离散时间之间的映射;构建时空信息的表示方法、传递与转换规则;基于时空特性的模型自适应调整等.3.3功能与实现兼容建模以上CPS系统行为建模没有考虑具体的系统实现,然而CPS系统的非功能属性依赖于实现平台的选取.例如,时间特性依赖于网络平台的网络拓扑、通信带宽以及通信协议.实现模型和功能模型从分析角度来讲是正交的,前者并非是后者不可缺少的一部分,但综合考虑两者因素,有利于系统的具体设计与实现.因而,在系统行为模型构建时,应尽量考虑对应的实现模型的需求与特点.目前,该方面的研究工作还比较少,主要是一些尝试性的研究.文献[28]采用基于语义的方法对功能模型和实现模型进行集成,如图4所示,将CPS系统中的计算模型、物理模型和实现模型结合.实现模型主要是特定网络化计算平台及其软件与物理设备接口;这些计算平台及其软件通过各类接口实现与物理系统的交互,同时物理系统又与环境进行交互.该文献提出的集成框架强调实现模型和功能模型的早期集成.和通信网络等实现细节,它们假设数据的计算和传输不消耗时间,因此网络和软件的动态性对系统行为没有影响.CPS系统建模中必须考虑实现平台软件及其网络动态性对系统行为的影响,在CPS建模框架中集成实现平台模型,可采用QoS(QualityofService)方式描述其非功能属性,也可利用AOPPage7(AspectOrientedProgramming)方法对功能模型和实现模型进行编织.3.4异构模型集成建模CPS具有的计算、通信、控制的“3C”融合特点,使得其难以用一个具体模型表示;CPS与具体领域密切相关,不同领域的物理过程和非功能特性差异很大,因此CPS动态行为模型构建往往需要集成多种异构模型.模型异构性主要体现在:面向不同应用领域、实现不同功能、具有不同物理语义、采用不同的模型语言等.异构模型进行集成需要重点考虑以下问题:(1)异构模型之间的互操作.CPS系统中模型可能采用不同的开发语言,模型处理的数据格式不同,模型之间的集成首先要解决这些异构模型之间数据互操作问题.此外,部分模型之间采用的通信协议也可能不同,如何高效实现模型之间的通信在建模过程中必须予以考虑.(2)模型组件演化与转换的一致性.在基于模型的CPS系统设计中,建模过程往往经过从简单到复杂、从抽象到具体的演化过程.模型的演化可以分为两种情况:一种是单一模型到单一模型的演化;另一种是单一模型组件演化成复杂模型中的多个组件.在这些演化过程中,测试模型和最终模型的设计匹配性如何保证;单一模型更新后,多个后续演化模型一致性如何检测均是应进一步深化研究的问题.同时还要保证多个异构模型融合时对模型数据、通信协议以及语义转换的正确性.(3)模型组件之间的正确连接.表示同一CPS系统的多个模型组件具有逻辑上的高度关联性,所以其连接关系出错概率也会增加.错误连接包括量图5模型总线建模的元模型转换图[32]纲单位错误、语义错误和转换错误3种类型.当一个发送端口和接收端口数据量纲不同时,则发生了量纲单位错误;当一个端口接收到的数据在本端口的语义和发送端口语义不一致时,则发生了语义错误.当端口之间连接颠倒时,则会发生转换错误.因而需要对模型组件的连接正确性进行有效检验.针对上述模型集成需要解决的问题,一些学者已进行了相关研究.文献[31]将CPS系统划分为控制域、物理域、软件域和硬件域,提出了多域模型的集成框架.不同域中的模型又由相互交互的组件构成,该方法可以看成是一个带有语法和语义的集成框架.不同域模型通过框架视图集成到一个通用的基本框架中.一个具体的CPS应用系统是CPS多域模型框架的一个实例,包括了计算和物理组件以及连接器.该模型框架提供了一种CPS异构模型集成方法,不足之处是:(1)从模型到视图需要抽象原模型中哪些信息难以确定;(2)在基本框架中如何实现视图封装,多个连接器如何保证接口的一致性;(3)为了处理复杂系统,需要对视图进行不同的组合,有可能导致视图更新不一致的问题.文献[32]采用模型总线的方法对异构模型进行集成.模型总线框架通过元模型实现模型工具之间的数据共享.首先按照系统研发过程将模型工具划分成多个域,如需求域、开发域以及测试域等.每一个域中包含了多个模型工具.为了实现这些工具的共享,定义了元模型,如图5所示.工具1和工具2属于同一个域,工具3则属于另一域.每一个工具将各自的内部数据按照元模型实现一个实例,并将其存储在模型库中.不同域模型之间通过元模型建立映射关系,实现了不同模型工具之间的转换和共享.Page8PtolemyII[20]也实现了多域异构模型的集成.它按照计算模型将系统划分成离散事件域、连续时间域、有限状态自动机域、进程网络域等,采用Actor机制实现了不同域各模型之间的交互.文献[12]给出的基于多Agent与多视图结合的模型集成方法具有某些良好的特性.如多视图建模具有用户友好性,能有效地描述系统行为;多Agent具有形式化的严谨性、易于实施仿真,多视图建模更接近现实系统.异构模型集成要在进一步完善模型集成框架基础上,强化具有良好定义的模型组合与交互语义,以支持可扩展的、开放语义的异构模型融合和集成.4一种CPS结构与行为协同建模方法4.1CPS系统建模要素分析通过对信息-物理融合系统特点及其对现有建模方法的分析,我们提炼出信息-物理融合系统建模的核心要素如下:(1)模型集成是基础.信息-物理融合系统建模面向不同的应用领域,不同特性的计算过程需要采用不同的计算模型;不同领域的物理过程需要相应的物理模型;在计算过程物理化、物理过程信息化的基础上,模型集成在更高抽象层上通过多尺度异构模型的一体化建模,需支持从不同层面、不同角度刻画信息-物理融合系统的组织与行为;必须能够集成丰富的模型、定义模型构件间的交互与转换、具有面向领域的模型灵活扩展能力.(2)模型语义是灵魂.为了刻画信息-物理融合系统鲜明的时空特性,必须在系统模型语义中显式定义时间与空间属性,增强对时空的支持能力.例如,定义连续时间与离散时间之间的映射;构建时空信息的表示方法、传递与转换规则;并用于预测、度量和控制计算过程与物理过程及其所处环境的交互图6CPS系统中各实体关系图和融合.在信息-物理融合系统的设计中,不同领域的物理过程需要相应的物理模型,多样化模型的细节与特征不同,需要精确定义具体模型的行为语义,并实现语义保持的模型转换与映射.(3)结合领域是关键.信息-物理融合系统具有鲜明的领域应用特点.例如,航空器燃油控制系统、航天器飞行控制系统、智能电网系统、智能给水监管系统、数字医疗监控系统以及智能车辆控制系统等属于不同应用领域的典型CPS实例[33-35],各自的功能需求和性能指标差异较大,通用平台难以高效支撑具体领域的计算过程与物理过程的交互与融合,建模与分析工具有效性不易验证.因此需要结合具体领域特点及其实际应用场景,深化信息-物理融合系统建模与分析研究.信息-物理融合系统建模研究的相关文献均结合具体应用领域或实际应用案例也说明这一点.4.2基于CPS-ADL的CPS协同建模方法及其实现CPS系统中的物理过程和计算过程通过传感器、作动器和网络通信相互影响和作用.为此,本文将CPS的构成元素抽象为3种不同特性的建模实体,分别为计算实体、物理实体和交互实体.在此基础上,结合已有研究基础和典型实例,论文提出了一种基于CPS-ADL的CPS结构与动态行为协同建模方法.(1)三类实体内涵及其关系本文将CPS系统静态结构定义为(C,P,I),其中:C={C1,C2,…,Cn},Ci表示了CPS系统中的计算实体,即实现计算功能的软硬件,例如:线程、进程及其相应的运行平台等;P={P1,P2,…,Pm},Pj表示CPS系统中各类处于特定物理环境下的物理过程;I={I1,I2,…,It},Ik表示CPS系统中实现计算与物理过程交互的各类传感器、作动器以及通信网络.多个计算实体之间、物理实体和计算实体之间可以通过多种具体交互实体实现融合.图6描述了一个典型的三类实体融合关系.Page9(2)CPS结构与行为的协同建模框架为了实现CPS系统的结构与行为的协同建模,必须在对CPS系统中三类实体建立一致的规约化描述和行为表示的基础上,采用多种动态行为模型对实体行为及其融合关系进行建模和精化,以支持图7CPS系统结构与行为协同模型(3)CPS-ADL实现AADL(ArchitectureAnalysis&DesignLan-guage)[36]是一种嵌入式实时系统体系结构设计及非功能属性分析的主流标准.AADL采用基于构件的层次化建模方法,具有丰富的嵌入式硬/软件构件描述能力,并通过附录的形式提供了灵活的可扩展性.但AADL在物理过程、网络通信以及模型交互等方面,难以适应CPS的建模需求.我们通过扩展AADL的标准和附录,增强了其对CPS系统中各类实体及动态行为的描述能力,形成了CPS-ADL.标准扩展.标准扩展表现为对AADL已有构件的内涵扩展以及增加新类型构件.如对AADL的BUS构件内涵(属性以及行为)进行扩展,使其具有网络实体描述能力;重新定义AADL的Device,实现CPS系统中的感知构件和作动构件;在AADL标准中添加物理构件支持物理实体建模.附录扩展.为了支持系统行为的表达与分析,基于AADL附录方式扩展CPS行为模型和分析工对系统的非功能属性分析和仿真验证.图7所示的协同模型包含了CPS系统运行时计算、物理和交互实体的结构与行为信息.该模型通过绑定机制实现了实体行为模型和结构模型之间的联系,并可支持异构模型的集成.具,并与结构模型实施绑定.例如,利用有限状态机建立实体错误行为模型,按照结构模型中的实体接口和数据连接关系组合形成系统的错误模型,以便支持对系统的可靠性分析;以附录形式扩展混成自动机行为模型,描述离散计算过程与连续物理过程的交互与融合,则可支持混成建模工具基础上的仿真.(4)应用实例结合前述月球车自主行走典型应用实例,采用CPS-ADL对其自主控制系统组成实体进行结构建模,描述各实体及其构件之间的逻辑交互关系,如图8所示;在CPS-ADL的附录[37]中扩展离散混成自动机模型,支持轮系控制实体的行为建模;扩展实时网络模型,实现计算实体、感知与作动实体的动态交互;通过结构模型中的实体行为属性与附录扩展中的行为模型建立的对应关系,实现了行为模型与结构模型的绑定,支持两者的协同建模.如图9所示.Page10图8月球车轮系控制系统的CPS-ADL模型图9CPS-ADL模型与离散混成自动机绑定关系图Page115结束语本文面向信息-物理融合系统的特点及其对系统建模技术的挑战,重点论述了CPS系统动态行为建模的研究进展,指出了需要进一步研究的关键问题,并提出了一种基于扩展AADL的结构与行为协同建模方法.自信息-物理融合系统概念提出以来,引起了信息领域相关研究方向的高度关注,开展了相应的理论方法、平台设计以及典型应用验证等研究,取得了阶段创新研究成果,其进一步的深化研究主要是CPS系统异构模型协同设计方法及其集成工具、“3C”融合的CPS运行平台与实现机制、时空相关的非功能属性形式化分析方法以及领域应用CPS系统优化开发等方面.信息-物理融合系统技术对于相关学科方向和领域应用具有重要影响.CPS可推动传统嵌入式计算更加关注深度嵌入、环境开放以及在线监控等能力;使得感知系统扩展为分布式感知与实时协同感知;控制系统研究则以网络化远程精确控制及其鲁棒性为重点,信息系统设计注重强化与物理过程及其所处环境的交互.CPS发展也将促进计算机、通信、自动控制以及机械工程等多学科交叉与融合研究.CPS发展不仅为航天/航空无人飞行器、智能医疗系统等复杂应用系统,也为智能交通、智能电网等重要基础设施提供综合优化设计支撑,可使这些复杂应用系统获得更佳的系统品质和综合性能.我们相信,信息-物理融合系统将在物联时代得到深化研究与广泛应用,并在未来的人-机-物和谐计算环境愿景中发挥重要作用.
