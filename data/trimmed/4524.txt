Page1三值汉明码检错纠错原理和方法沈云付潘磊(上海大学计算机工程与科学学院上海200444)(上海大学高性能计算中心上海200444)摘要随着光通信技术的应用和千位三值光学计算机系统研究的推进,确保数据信息免受各种干扰以及系统的可靠运行显得十分重要.该文给出了三值汉明码的一种分组形式,提出了三值汉明码的检错原理和出错位置的确定方法.基于给出的三值汉明码的两个纠错码表,提出了三值汉明码的纠错原理,画出了基于三值光学计算机的三值汉明码检错纠错概念结构图.该工作为三值光学信息的检错纠错奠定了理论基础.关键词三值光学计算机;三值汉明码;检错纠错码;纠错码表1引言现代社会中信息的处理和存储主要是由电子计算机来完成的.随着电子计算机集成度的提高、集成Page2的器件.与电子计算机相比,光学计算机的制作门槛较低,在数据处理宽度、无进位加法器设计等多个方面有一定优势,因此全球基于光学的计算机研究形成了多个分支和流派[1-5],其中光学计算机是引人注目的一种未来计算工具.随着各种光器件如光开关、光逻辑门、空间光调制器、光放大器、波分复用器和光交换器等的研制成功,光纤通信已在远程通信和城域网中成为主角,全光网将成为新一代通信网络.在光学计算机领域,光技术己经在液晶显示器、光存储、数据传输等方面特别是在运算器设计中得到应用.中国科学院杨林等人[6]早于国际同行开展硅基集成光学矩阵处理器的研究,提出了硅基集成光学矩阵处理器的结构并实现了器件的原理验证,其计算速度达8000万次乘加运算/秒,研制出了调制速率为40Gbit/s的低功耗硅基马赫-曾德尔(Mach-Zehnder)光调制器[7].Thomson等人[8]也给出了相应的硅基光调制器,近来文献[9]提出了消光率为3.1db、调制速率为50Gbit/s的硅基Mach-Zehnder光调制器.高速光调制器的进展大大提高了光纤的信道传输速率,但信号传输时也受到色度色散、非线性效应等光学特性的限制,需要探测、隔离和纠正传输过程中产生的任何错误.林榕慧[10]对在时钟同步条件下三值光信号的异步传输和同步传输方式进行讨论,对三值光纤通信原理及电路设计进行了研究,但未涉及传输中的错误.王岩等人[11]提出了光通信系统可靠性设计的硬件和软件方法,设计和实现了一种新的高可靠性代码存储方法,通过将代码存放在铁电随机存储器FRAM(FerroelectricRandomAccessMemory)中,用串行外围接口SPI(SerialPeripheralInterface)引导加载的方法有效提高了代码存储加载的安全性.金翊、何华灿等人利用光的偏振态,调制产生三值码元进行信息传输(即利用两个相互垂直的偏振光态和无光态实现光的三值编码),对提高光纤的通信容量提供了一个新的途径.自2000年起,金翊[12-13]领导的研究团队开创了以计算机原理和光特性为出发点、光电混合、逐代提高的三值光学计算机研究分支,目前正在构建面向应用研究的千位三值光学计算机系统.这个系统既可以作为一个独立的计算机来使用,也可以将它直接纳入高性能计算机系统,成为其中的一个应用节点,其控制系统实现对电子部件和光学部件的控制,光学部件的编码器以千位并行方式接收数据,光学运算器以千位并行和三值运算的形式高效地处理数据,运算结果由解码器采集,并以千位并行方式输出到存储阵列[14].随着千位三值光学计算机系统研究的推进,系统的复杂程度在不断增加,设计过程中错误和缺陷在所难免,这些缺陷不仅影响系统的可靠运行而且影响运行效率和安全,甚至导致系统失败.因此,三值光学计算机的可靠性和稳定性成为倍受关注的新课题.在这种情况下作者开展了对三值汉明码检错和纠错技术的研究.2三值汉明码构成形式纠错码是指在信息传输过程中发生错误后能在接收端自行发现或纠正的码,检错码是指能在接收端发现错误的码.为使一种码具有检错或纠错能力,须对原信息码字增加校验码元.1950年汉明(HammingR)提出了可以纠正一个独立错误的线性分组码-汉明码,后经扩展后可以检测出两位错误、纠正一位错误.汉明码由于编码和译码容易实现,抗干扰能力较强,至今仍是应用最广泛的一类码[15-16].1960年Avizienis[17]提出了MSD(ModifiedSignedDigit)冗余表示计数法,通过冗余表示法使加法没有进位过程,1986年Drake等人[18]将MSD加法运算引入到光学计算领域,这极大地加快了光学加法器的设计进程[19-22].任意一个整数或小数都可用下面的MSD数表示其中xi的取值为1,0或1,符号1表示-1.无光态、垂直偏振光态、水平偏振光态这3种物理状态可以以任何方式与1、0、1这三值信息建立一一对应关系.在我们研究的三值光学系统中,发生的错误主要是指液晶板上某些像素位的输出未必是希望得到的结果,如某位应输出0,1,1之一,但输出恰为其它两个值之一.因此,对于三值系统而言,存在6种可能的静态故障,即“0→1”,“0→1”,“1→0”,“1→1”,“1→0”与“1→1”.本文只考虑这些故障.考虑各个位置由MSD数符{0,1,1}构成的n位三值信息码M=anan-1…a6a5a4a3a2a1.三值汉明码由信息码位和校验码位两部分构成.假设信息码位数为n,校验码位数为k,那么校验码位数k可选取满足下列不等式的最小整数将第i个校验位(或称校正子)bi放置在2i码位上,并将信息码位从低到高依次插入,所得的n+kPage3位三值码称为三值(n+k,n)汉明码(或简称三值汉明码).三值汉明码的构成如表1所示.码位信息码校验码三值汉明码an…bi…a5b4a4a3a2b3a1b2b1校验过程是通过分组来实现的,具体过程如下:(1)首先根据校验位的个数k确定k组:S1,S2,…,Sk.(2)其次将表1中汉明码各码元的码位用二进制表示,然后根据各码元所在码位二进制中1的出现与否由低位向高位进行分组;如b1所在的码位为1,二进制表示为(0001)2,因此b1被分在S1组,仅参与S1组的校验;a4所在的码位为7,二进制表示为(0111)2,因此a4分别被分在S1组、S2组和S3组中,参与S1,S2,S3组的校验,不编入除此之外的其余组,也不参与其余组的校验;其余码元的分组类似.具体如表2所示.码位n+k…2i…987654321分组S1S2S3S4…Si…表2中,y表示an或空.对于每一个分组Si而言,校验位bi是未知的并且只有1个,而分在该组的所有信息位是已知的,用每组中已知的所有信息位按照某个合适的运算“”计算该组中未知的校验位bi.如b1所在的分组为S1,将S1组中除b1外其余所有信息位按照某个合适的运算“”计算b1(对于S1组,码元所在码位的二进制表示的最低位必须为1,如a2,a4等).上述分组模式与二进制汉明码的分组模式相同.以下以8位三值信息码M=a8a7a6a5a4a3a2a1为例进行说明.取k=4,即取4个校验位,对应的三值汉明码形式为H=a8a7a6a5b4a4a3a2b3a1b2b1,如表3所示.校验过程是通过分组实现的,分组过程与表2一致.分组方式如表4所示.码类信息码a8a7a6a5校验码三值汉明码a8a7a6a5b4a4a3a2b3a1b2b1行分组1S12S23S3a84S4a8a7a6a5b4表4中校验位值是由每组中已知的全部信息位通过下列公式计算而得为方便起见,称为三值汉明码校验位生成运算,满足交换律和结合律.经验证,对MSD表示形式而言,可用于三值汉明码校验位的生成运算只有3个,即:(1)xy=x+y;(2)xy=x+y+1;(3)xy=x+y-1.本文取为模3绝对值最小剩余系{0,1,1}上的加法运算,即xy=x+y,运算规则如表5所示.假定汉明码H经传输后变为H=a8a7a6a5b4a4a3a2b3a1b2b1.对H按如下分组方式计算各组对应的值,即计算S1,S2,S3,S4,并称它们为监督位,相应的等式称为监督关系式:其中,运算称为监督位生成运算.这里令满足如表6所示的运算规则,前面的符号S1,S2,S3,S4仅用于分组,未计算它们的值.表5的运算规则011易见,是模3绝对值最小剩余系{0,1,1}上的减法运算,满足如下关系:对任何三值数x,y,xy=x-y.Page43三值汉明码的检错原理及错误位置确定在校验位b1,b2,…,bk计算完成后,得到三值汉明码H,同时经传输后变为新三值汉明码H.以下假定传输过程中仅发生一位数据错误.对H按分组方式计算S1,S2,…,Sk的值.有如下的结论.定理1.如果S1,S2,…,Sk不全为0,那么汉明码H中的第(|Sk|…|S2||S1|)2位发生错误.这里,|x|是通常意义下x的绝对值,(y)2表示y的二进制表示.证明.为书写清楚起见,以下以三值(12,8)汉明码为例进行证明,对一般的三值(n+k,n)汉明码,其证明方法是相同的.设经传输后的三值汉明码为H=a8a7a6a5b4a4a3a2b3a1b2b1.记c1=a1a2a4a5a7烄c2=a1a3a4a6a7烅c3=a2a3a4a8c4=a5a6a7a烆为叙述方便起见,这里称c1,c2,…,ck为验证位.情况1.信息位中有一位错误.此种情况下,校验位数据完全正确,即bi=bi,i=1,2,3,4.又假定at有跳变,即at→at,at≠at;而对其他的位,ai=ai.设at码位的二进制表示为(t4t3t2t1)2.根据汉明码分组规则,at至少分在2组中,于是t4,t3,t2,t1中至少有2个取值为1.对不含有at的任何分组号j,易见bj=cj,且Sj=cjbj=bjbj=bj-bj=0.含有at的每个分组(如含组号i)必使二进制(t4t3t2t1)2中的ti=1.如0101表示第1组、第3组中含有at,其t1=1,t3=1.现设第i组含有at,那么可写bi=atx,ci=atx,其中x是信息码中除了at外的位经运算而得的结果.因bi=bi,所以有Si=cibi=cibi.根据运算和的规定,uv=u+v,uv=u-v,下文总假定在模3绝对值最小剩余系意义下进行运算.因此Si=cibi=ci-bi=(atx)-(atx)=这表明(t4t3t2t1)2中使ti=1的组i在汉明码分组方式表中对应的Si都取同一个不为0的值at-at.由此可以判定第(|S4||S3||S2||S1|)2位数据at有误.情况2.校验位有一位错误,但信息位中无错误.由于a1,a2,…,an不变,因此经传输后,ci=bi.假如某bi有跳变,即bi→bi,bi≠bi,而其它校验位bj不变,即bj=bj.很显然Si=cibi=ci-bi=bi-bi≠0,而其余的Si=cibi=ci-bi=bi-bi=0.这表明,新三值汉明码H中的第(|S4||S3||S2||S1|)2位(即数据bi)发生错误.综上所述,定理得证.4三值汉明码的纠错方法和纠错码表根据上述分析,一旦发现S1,S2,…不全为0,那么汉明码数据传输发生一位错误.更进一步地,S1,S2,…只有两种可能,即0或非0值.情况1.如果校验位bi有跳变bi→bi,那么S1,S2,…中仅有一个为非0值,即Si=cibi=ci-bi=bi-bi≠0.根据三值二元运算表6中取值1和1这两种情况:(1)01=10=11=1;(2)01=11=10=1,构造两个纠错码表7和表8.表7纠错码表A当前值011如果经计算后Si=1,那么用纠错码表A进行校验;否则,当Si=1时用纠错码表B进行校验.情况2.如果信息位at有跳变at→at,此时at为当前值,at为原值(正确值),那么S1,S2,…中至少有2个不等于0的值,且均取值atai=at-ai.如果该值为1,那么用纠错码表B纠错,否则用纠错码表A进行纠错.例1.设三值信息码为M=11101101,相应的12位汉明码为H=111011101111.假设H=111011101111.经计算得c4=1,c3=1,c2=1,c1=1.由Si=cibi得S4=0,S3=1,S2=1,S1=1.故在(|S4||S3||S2||S1|)2=(0111)2位,即第7位上发生错误.因Si中不为0的值为1,所以用纠错码表B进行纠错,将当前值1改为1,错误得到修正.Page55三值汉明码纠错的实现概念结构图以下以8位信息位为例给出三值汉明码的纠错过程.三值汉明码检错纠错概念结构图如图1所示,包括光源、编码器、校验位生成器、汉明码接收器、验证位生成器、监督位生成器与纠错部件等.其基本工作流程是:光源发出的自然光进入编码器;编码器在通过8位数据输入线送来的编码信号控制下,把自然光调制成表示用户输入运算数据的三态光信号a8a7a6a5a4a3a2a1;这些三态光信号经校验位生成运算部件的处理(计算)后输出相应的校验码位结果光信号b4b3b2b1,得到12位汉明码a8a7a6a5b4a4a3a2b3a1b2b1;然后将这12位汉明码通过光传输网络传送到(远程)汉明码接收器;经过汉明码的验证位生成器生成验证位c4c3c2c1,再经监督码图1三值(12,8)汉明码检错纠错概念结构对一般的(n+k,k)三值汉明码,每个校验位bi至多是n个一位数的和,因此通过MSD加法器在二叉迭代加法模式下用3logn个时钟周期可以并行地计算所有k个校验位b1,b2,…,bk;对验证位计算同法处理.而每个监督位计算可通过其真值表至多需要6个基元构建模3减法处理器,仅需几个时钟周期.如所有的监督位都无光表明无错误发生;如某些监督位透光,则通过光电转换与编码确定错误位置,并用查表方式纠错.6结论随着千位三值光学计算机应用系统研究的推进,确保三值光学计算机系统的正确性和可靠性,已生成器生成监督码信息S4S3S2S1,确定错误出现的位置,如有错,则通过纠错部件进行纠错;最后对正确信息进行下一步的处理(如正确信息的光信号转换成表示同一信息的电信号,再对这些电信号通过输出线存储到输出存储阵列等).校验位生成器与验证位生成器:对输入的信号经模3加法运算后生成相应的校验码位和验证码位.监督位生成器:通过4个一位数模3减法生成4位监督码位.纠错部件:通过计数器统计监督码信息S4S3S2S1中0的个数,如为0,那么信息传输无误;如为1,那么校验位有误,可不必处理;否则信息位出现错误.然后根据纠错码表A或B进行纠错.纠错处理过程实际是一个加1或减1过程,光学实现很容易.根据如图1所示的三值汉明码检错纠错概念结构图画出如图2所示的三值汉明码检错纠错框架图.成为三值光学计算机理论和设计研制中的重要问题.本文对三值光学计算机可靠性有关技术进行了研究,提出了基于MSD表示的三值汉明码的检错纠错原理和一位错误位置的判定和纠错方法,但该方法不能实现检二纠一功能.本文给出了基于三值光学计算机的三值汉明码检错纠错概念结构图,从目前光学处理器研究进展来看,本文的检错纠错的实现已不存在技术问题.本文所给出的校验位分组模式易于扩展以提高检错性能,但编码效率不高,对扩展三值汉明码以及其他较高效率的编码方式的相关研究正在进行之中.致谢感谢金翊教授、彭俊杰副教授、欧阳山博士及课题组其他老师和博士、硕士研究生,他们在本文写作过程中给予了帮助!Page6图2三值(12,8)汉明码检错纠错框架
