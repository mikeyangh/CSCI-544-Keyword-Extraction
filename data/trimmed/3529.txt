Page1用户体验质量(QoE)的模型与评价方法综述林闯胡杰孔祥震(清华大学计算机科学与技术系北京100084)摘要随着信息时代的到来,新的多样性的信息服务大量涌现,人们对信息服务的要求也越来越高.为了获得用户对服务的认可,服务提供商必须确保良好的用户体验质量.因此,用户体验质量不仅成为学术界重要的研究课题之一,而且也成为工业界关键的服务评价指标之一.文中综述了用户体验质量的模型与评价方法等方面的工作.介绍了该领域的研究现状与进展,总结归纳了用户体验质量的影响因素、量化方法及三类评价方法学,重点讨论了几种具体的基于不同学科的用户体验质量的模型和评价方法.基于这些讨论,该文以视频流媒体服务为背景,提出了基于隐马尔可夫的用户体验质量模型,建立了基于随机模型的评价方法,对未来的研究方向进行了展望.关键词用户体验质量;统计学模型;心理学模型;人工智能模型;随机模型1引言随着计算机技术与网络技术的飞速发展,大量多样性的服务涌现出来,服务提供商之间的竞争日Page2包括网络的吞吐率、时延、丢包率、抖动、误码率等.显然这些指标仅仅反映了服务技术层面的性能,甚至仅仅是网络传输层面的性能,忽略用户主观因素,因此它不能直接反映用户对服务的认可程度.用户体验质量(QualityofExperience,QoE)是一种以用户认可程度为标准的服务的评价方法.它综合了服务层面、用户层面、环境层面的影响因素,直接反映了用户对服务的认可程度.目前关于QoE的研究主要分为以下几个部分:QoE的定义及影响因素、QoE量化方法、QoE评价指标、QoE评价方法与模型以及基于QoE的网络管理及服务的管理与优化.由于QoE的影响因素包含服务、用户、环境3个层面,而且不同用户对同一服务的要求也不相同.因此,这就给QoE的研究带来了非常大的挑战.首先,QoE的研究需要涉及计算机科学、心理学、社会学、统计学等多学科的相关知识和理论;其次,QoE的部分影响因素难以量化,如用户的主观因素及环境的影响因素;最后,对不同的服务难以统一建模处理.鉴于以上几个难点,目前关于QoE的研究呈现出以下特点:(1)由于用户的主观因素(如期望、体验经历)和环境因素对QoE的影响难以量化评价,目前的研究方法大多都集中在对服务的研究上;(2)QoE的评价指标分布在不同层次上,而且多数文献更多地从网络层、应用层去讨论评价指标,而没有从用户或者服务的角度出发来研究;(3)对QoE评价指标的讨论还是基于具体的服务,不同服务的评价指标往往差异较大;(4)QoE的理论还不成熟,不同的研究人员试图从不同的角度对QoE做出量化和评价,因此涌现出了许多不同的量化方法和评价方法;(5)大多数关于QoE评价的研究集中在视频和音频业务中.鉴于以上现状,本文试图在现有文献的基础上,给出一个较为全面的QoE定义,分析概括QoE的影响因素,总结现有的QoE的量化方法和评价方法,并且分析比较其优缺点.最后在这些评价方法的基础上,以视频流媒体为背景,提出了随机模型的QoE评价方法.本文第2节对QoE的定义和影响因素进行论述;第3节总结和讨论现有的QoE的量化方法,并且简要介绍QoE评价方法学的分类;第4节讨论4种基于不同学科的QoE评价方法,并在对这些评价方法与模型进行分析和比较的基础上,讨论如何建立基于随机模型的QoE评价方法;最后对全文进行总结,并提出下一阶段的研究方向.2QoE的定义及影响因素现有的文献给出了许多关于QoE定义和影响因素的讨论,但是没有形成一个统一的论述.下面我们将在这些文献的基础上,给出一个更为全面的QoE定义,并且对QoE的影响因素进行概括和分析.2.1QoE的理解与定义QoE最初被理解为用户对提供给OSI模型不同层次的QoS机制整体感知的度量[1].例如在文献[2]中,QoE被定义为:确保通过IP网络平稳传输音频和视频质量的QoS机制的整体性能.因此,可以将QoE理解为在用户角度对QoS机制的评价.之后,国际电信联盟等对QoE的定义进行了扩展,它不再是对QoS机制进行评价,而是对整个服务进行评价.国际电信联盟对QoE的定义为:终端用户对应用或者服务整体的主观可接受程度[3].文献[4]中,QoE被定义为:从用户角度体验到的一个系统的整体性能.分析上述几个定义,可以总结出QoE是一种主观感受,是用户在与服务或者应用交互的过程中,由用户产生的对服务的一种主观感受.因此QoE有两个直接的影响因素:用户和服务.但是用户和服务交互的过程肯定会处在一定的客观环境中,而且客观环境对用户和服务的交互过程具有较大的影响.因此我们有必要在QoE定义中阐明这一因素.综上所述,我们将QoE定义为用户在一定的客观环境中对所使用的服务或者业务的整体认可程度.2.2QoE的影响因素QoE的影响因素的研究对于QoE的评价至关重要.因为QoE评价的基本目标就是要从已知或者容易测量的影响因素来预测难以直接测量的QoE.下面,我们先对QoE的影响因素做一个较为全面的讨论.文献[5-7]详细讨论了QoE的影响因素,我们在这些文献的基础上,结合2.1小节中的讨论,将QoE影响因素分为3个层面:服务层面、环境层面及用户层面,如图1所示.服务层面的影响因素又包括网络(或者传输)层、应用层及服务层的参数[5].传输层的参数反映网络传输的状况,如延迟、带宽、丢包率、误码率、抖动等.应用层的参数反映没有经过传输的服务的性能,包含了OSI模型中会话层、表示层、应用层对服务的影响,如IPTV服务中的内容分辨率、编解码类型等.服务层的参数确定了通信的语义、内容、优先级、Page3重要性以及定价,如服务层的配置(内容类型、服务的应用级别)及质量保证.环境层面的影响因素包括自然环境(如光照条件、噪声的大小、环境的固定或移动),人文与社会环境(如社会观念、文化规范)以及服务运行环境(包括软硬件环境)等.用户层面的因素包括用户的期望、体验经历、用户体验时所处的身心状态和自身背景(如年龄、性别、受教育程度、价值观念等).文献[8-9]对这些影响因素如何相互作用进行了分析和讨论,这里不再赘述.3QoE的量化与评价方法学分类为了更好地研究QoE与其影响因素的关系,我们需要将QoE进行量化,也就是要建立QoE到实数的映射关系.这样就可以研究QoE关于其影响因素的函数模型,从而更准确地反映QoE与其影响因素的关系.在3.1节中,我们将介绍几种常用的量化方法.在将QoE量化之后,我们就需要研究如何获得QoE关于其影响因素的函数模型.因此在3.2节我们将介绍几类基本的思路,也就是几类QoE的评价方法学.3.1QoE的量化在文献[10]中,Stevens将测量(或者量化)的水平分为4个等级,每一等级的测量水平都与一量表对应,即类别量表、顺序量表、等距量表及等比量表.这4种量表的测量水平依次增强.等比量表是最高级别的量表,它具有相等的单位和绝对零点,而且测量值之间的比值也是有意义的,因此它并不符合QoE的特征,一般不用等比量表来对QoE进行量化.通常采用类别量表、顺序量表、等距量表对QoE进行量化.文献[11-12]采用类型量表的方法,将QoE分为可接受(Acceptable)和不可接受(Unacceptable)两个级别.这种量化方法(以下称为两类别法)不够精细,但是方便用户进行评价,因为用户对这两种级别具有较大的辨识度.文献[13]提出了用成对比较法(pairedcompar-ison)对QoE进行量化,属于等距量表法.成对比较法的大致思想为:首先准备N种样本,让用户对这N种样本进行两两比较,即共进行M=N()2次比较,记录每次比较的结果.运用Bradley-Terry-Luce(BTL)模型[14]处理M次比较得出的数据,从而给出每种样本的评分.目前较广泛采用的是国际电信联盟(ITU)建议的“平均评估分值[15]”(MOS,即MeanOpinionScore).它将QoE的主观感受分为5个层次,如表1所示,此量化方法较为细致地描述了用户的主观感受,是一种顺序量表法.MOS54321表2中给出了3种方法的比较.两类别法虽然简单而且准确性高,但是它存在一些明显的缺陷.将QoE仅仅分为可接受和不可接受两个类别,显然不能满足用户以及供应商对业务及服务评价的要求.虽然成对比较法比MOS方法更加精确,但是它要求的工作量较大.比如一个业务有20个测试样本,用MOS方法只需要做出20次判断,而成对比较法需要做出190次判断.综合上述一系列的原因,MOS方法仍然是目前最广泛使用的方法.量化方法两类别法MOS成对比较法Page43.2QoE的评价方法学分类现有的关于QoE的研究一般集中在音频、视频业务中.下面我们就以音频、视频业务为例,介绍几类QoE评价方法学.按照是否有用户直接参与评价及是否给出QoE与其影响因素之间的关联模型可以将现有的评价方法分为主观评价方法、客观评价方法及主客观结合的方法,其中主客观结合的方法又可以称为伪主观评价方法(在一些文献中,伪主观的评价方法和客观评价方法都被称为客观的评价方法).这种评价方法分类和第4节中根据不同学科的评价方法分类相比,层次更高,也更加抽象.因此,为了避免混淆,本文把这种角度的评价方法分类称为评价方法学分类.主观评价方法是让用户直接对所使用的业务做出评价,因此它最准确,一般可以作为评价其它评价方法的标准.但是由于主观评价方法所需的测试环境较为严格、不可以实时地应用、可移植性差,而且消耗的代价较大,因此并未得到广泛的应用.客观评价方法通过计算输出序列相对于输入序列的失真程度,来对业务做出评价.因此客观评价方法并没有考虑用户的因素,不能直接、准确地反映用户对业务的评价.现有的一些客观评价方法做出了一些改进,将人类质量感知模型运用到对业务的评价中,评价结果有了很大的改善.例如,峰值信噪比(PeakSignaltoNoiseRatio,PSNR)是一种传统的客观的视频质量的评价方法,它没有考虑人的视觉掩蔽的现象,也就是说,每一个像素的错误都会影响最后的评价结果,而实际上这样的错误是完全不能被人眼觉察到的[16].MPQM[16-18]将人类视觉特征考虑在内,更准确地反映了用户对业务的主观体验.伪主观评价方法将主观评价方法和客观评价方法结合起来.它的基本思路是分析给定业务的特性,确定其重要的QoS参数,通过改变这些QoS参数,得到评价的样本.然后选择一定的测试人员进行评价,将最终的结果与这些QoS参数关联起来,这样就得到了QoE与QoS的关联模型.从而可以用这个关联模型对此业务进行评价.下面详细介绍这几类评价方法.3.2.1主观评价方法文献[15]以语音业务为背景,最先提出了主观评价的方法.主观评价的方法就是要直接从用户感知出发,对业务进行评价.为了获得用户的感知,就需要选择一定数量的测试人员,让他们来使用给定的业务,并按照MOS方法给出分数.ITU陆续提出了一些关于音频、视频的主观评价方法.例如ITU-TRecP.830、P.835和P.840给出了语音业务的主观评价方法,ITU-TRecBT500给出了视频业务的主观评价方法.下面以ITU-TRecP.800中建议的语音评价的ACR测试方法为例来简介主观评价方法.ACR测试方法分为4个部分,首先是记录测试源,这一部分主要考虑记录的环境、记录的介质、发送系统、语音材料的要求、记录的过程、说话人的选择等;其次是链路状态的选择,这一部分主要考虑语音输入、参考条件等;再次是实验的设计;最后是听力测试的部分.这一部分主要考虑听力测试的环境、听力测试的系统、听力测试人员的选择、评分的标准以及统计分析和汇报结果.综上所述,主观评价的方法虽然可以直接、准确地反映用户对业务的主观体验,但是由于它需要考虑太多的因素、实施步骤较复杂、代价大,而且没有建立QoE关于其影响因素的函数模型,不可以实时地应用,不能移植,所以主观评价方法没有得到广泛的应用.但是,由于它具有准确、直接的特点,所以可以用它来对其它的评价方法进行验证和矫正.3.2.2客观评价方法客观评价方法是通过度量输出序列相对于原始序列的失真程度来对业务进行评价.一般来说,视频和音频业务的QoE客观评价方法根据其特定的应用可以选择以下3种方法[4]:(1)全参考.通过对系统输出序列(测试序列)和输入序列(参考序列)的比较获得质量评价.这种方法结果精确度高,但计算复杂度较大.这种方法不能应用在分组交换网络中.国际电信联盟使用这种方法来获得有线数字电视业务中用户对视频质量的要求[19].文献[20]对原序列和语音序列的比较是在每一帧之间进行的,这样就需要将这两个序列在时间上进行对准.如果系统中存在时延抖动的话,这样的比较就会存在一些问题.(2)部分参考.在这种方法中,选择输入、输出序列的部分参数进行比较从而获得质量评价.如文献[21],作者仅仅使用参数丢包率和延迟来研究它们与质量评价的关系.(3)无参考.仅仅输出序列用来进行质量评价.目前,一些研究者[4,22]试图通过研究QoS与QoE之间的关联模型来对QoE进行评价.文献[4]将IPTV的QoE分为两个组成部分:(1)与网络相关的QoE,用QoEN表示;(2)与用户相关的QoE,用QoEU表示.与网络相关的QoE主要由网络延迟、丢Page5包、抖动这些因素决定,它的函数模型如式(1)所示.与用户相关的QoE主要由视音频质量、视音频的同步及转换频道所用的时间决定,它的函数模型如式(2)所示.但是这篇文献没有给出如何用QoEN和QoEU来计算最终的QoE.式中:Delay为网络延迟;Jitter为网络抖动;K1为调节网络延迟和抖动之间的相对重要程度;pack-etLoss为丢包率.式中:vq为视频质量;tzap为转换频道所用的时间;K1为调节tzap和tsync之间的重要程度;tsync表示视音频之间的同步误差.文献[22]中讨论了IPTV业务中视频的QoE和QoS之间的关系,并给出了视频质量的QoE与QoS之间的关联模型.如式(3)所示.值得注意的是,它给出的并不是IPTV业务的QoE评价模型,而是IPTV业务中视频的QoE评价模型.式中:Qr为终端分辨率;QoS(X)为标准化的QoS的值,如式(4)所示;A为预订服务的等级;R为代表帧的结构.QoS(X)=K{L×Wl+U×Wu+J×Wj+式中:K为整个QoS决定因子,由IPTV业务的类型而定;L为丢包率;Wl为丢包率的权重;U为突发性;Wu突发性的权重;J为抖动;Wj为抖动的权重;D为延迟;Wd为延迟的权重;B为带宽;Wb为带宽的权重;综上所述,客观评价具有简单、实用的特点.所以它是目前QoE评价方法研究中重要的一部分.但值得注意的是,为了更准确地反映用户对业务或者服务的主观感受,客观评价方法需要考虑人类的感知模型,这就给QoE的客观评价带来了一定的难度.3.2.3伪主观评价方法伪主观的评价方法[23-24]结合了主观评价方法和客观评价方法的优点.它既有主观评价方法与用户感知一致的特点,又具有客观评价方法简便、可实时应用、可移植的特点.伪主观评价方法的基本步骤如图2所示[11].(1)分析业务类型,确定此业务的QoE相应指标.如一个IPTV业务的QoE的指标包括音频质量、视频质量以及音频视频之间的同步关系等.(2)确定决定这些QoE指标的相应QoS的参数.确定QoE指标之后,需要找出影响每个评价指标的全部QoS参数或者关键的QoS参数.这种关系可以通过QoE评价指标与QoS参数的关联矩阵表示出来.(3)准备测试的环境以及测试的样本.测试环境可以有多种选择,测试环境可以选择在实验室的环境中[11-12],也可以选择在真实的生活环境中[25].这两种选择各有利弊.前者因为脱离了真实的生活环境,测试人员对服务的体验可能和真实环境中对服务的体验存在差距,不能准确地反映真实的生活环境中用户对服务的体验质量.但是由于在实验室有相关人员的监督,态度可能会相对认真.后者则会出现相反的情况.(4)挑选一定数量的测试人员进行业务评价,获取数据.测试人员应该从此业务的真实用户中选取,并且注意从不同年龄、不同性别、不同教育背景的用户群体中选择.文献[13]提出的一种获取数据的框架,可以很好地解决上面出项的问题.它将数据获取的任务放在互联网的环境中,并利用成对比较法,让广大的互联网用户参与测试,根据用户提供数据的一致性程度给予其相应的奖励.但是它要求的工作量较大.(5)分析数据的合理性,进行数据筛选.文献[26]给出了一个数据筛选的方法.在数据筛选之后,还要对筛选后的数据进行分析,判断其是否在统计上有意义.如果没有的话,还需要进一步进行数据获取的步骤.(6)利用得到数据,采用合适的数据模型将Page6QoS与QoE关联起来.数学模型可以有多种选择.如采用基于统计学的判别分析方法[11]、回归分析[27-29]、人工智能中的支持向量机[12,30]、决策树[12,25,31]、粗糙集的方法[32].伪主观的评价方法由于有人工智能以及统计学等学科作为理论支撑,而且可以实时运用、准确性较高,目前受到研究人员越来越多的关注和运用.但是它也有一些不足之处,如需要获取足够的数据,进行较为复杂的模型训练等.4几种QoE的评价方法在第3节中,我们介绍了3类QoE评价方法学.这3类评价方法学给出了3类基本的QoE评价思路.本章在这3类评价思路的基础上,讨论几种具体的基于不同学科的QoE评价方法,并且对这些评价方法进行优缺点分析.按照评价方法所采用的学科知识,可以将评价方法分为基于统计学的评价方法、基于心理学的评价方法及基于人工智能学的评价方法.本章将详细讨论这些评价方法.4.1基于统计学的评价方法将统计学的方法应用于QoE评价,最主要的特点是可以进行QoE评价指标之间的相关性分析及QoE评价指标与QoE相关性的分析.这样就可以降低QoE评价问题的复杂度,简化QoE评价模型.另外,在QoE评价模型的选择时,可以采用统计学中的判别分析、回归分析方法.这一小节将详细讨论这些统计学的方法.4.1.1QoE评价指标之间相关性的分析在QoE评价问题的研究中,为了能对QoE有一个比较全面、完整的把握与认识,往往需要尽可能多地收集影响QoE的多个变量.但是这就带来了两个较大的问题:(1)收集数据的工作量变得十分庞大;(2)对研究QoE评价模型带来了很大的挑战.而且这些选取的变量往往存在着相关性,也就是不经过分析处理,直接使用这些变量就会做很多不必要的工作.因此可以利用统计学中因子分析[33]的方法来对这些QoE的变量进行分析,从而简化问题和避免做一些不必要的工作.下面将介绍因子分析的基本步骤.首先,对这些QoE的变量进行KMO检验.KMO检验的目的是为了分析是否有必要对这些变量进行因子分析.KMO统计量如式(5)所示,取值范围在0与1之间.一般认为,KMO大于0.6以上,就可以进行因子分析.式中:r2ij为两变量间的简单相关系数;a2ij为两变量间的偏相关系数.简单相关系数计算如(6)所示.偏相关系数可以通过求解所有变量的相关矩阵的逆矩阵来获得.r=∑n]EX槡2∑n∑n其次,利用主成分分析法[33]进行因子提取,并且进行旋转.主成分分析法(PrincipalComponentsAnalysis,PCA)是一种对数据集进行降维的方法.它通过一个线性变换将变量映射为一组因子.然后依次取方差最大的前m个因子,并确保这m个因子累计贡献率达到85%~95%.对因子载荷矩阵实行正交旋转的目的是使其结构简化,确保容易对每个因子进行恰当的解释.最后,进行结果处理.首先要对得到的每个因子进行命名.因子的命名应能解释其代表的含义.其次还要计算每个因子的值,以便以后利用这些因子进行问题的研究.文献[27]对QoE的主观参数进行了因子分析.它将主观参数分为质量层面和情绪层面.由于篇幅所限,本文仅介绍质量层面主观参数的分析.首先对质量层面的主观参数进行KMO检验,如表3所示.由于KMO值大于0.6,所以可以用PCA方法进行数据降维.它的主要过程是,首先将这些数据进行标准化处理;其次利用PCA方法和方差极大旋转方法进行处理;最后对这些主成分进行可靠性分析,得出的最终结果如表4所示.这样,通过PCA方法,就可以将质量层面的参数用两个不相关的参数,即空间质量(spatialquality)和时间质量(temporalquality)代替.由于经过变换之后,质量层面的参数从6个变成了2个,所以大大降低了原问题的复杂度.Page7方差解释43.26%问题条目内容音频质量合适性图像质量方差解释18.91%问题条目流畅性视/音频同步4.1.2QoE评价指标与QoE之间的相关性分析由于QoE是一个多指标评价的问题,在QoE评价问题的研究中,势必会遇到判断提出的一个评价指标对QoE是否有影响或者影响多大的问题.解决这个问题,可以利用统计学中的相关性分析[33]和方差分析[33].在研究QoE评价指标与QoE之间的相关性时可以用到Pearson相关模型.相关系数r定义如式(6)所示.从实践角度而言,相关系数r仅是根据样本数据而不是总体数据计算出来的,存在着抽样误差.因此,不能根据r值的大小来判断两变量间的相关关系,必须进行显著性检验.文献[27]给出了QoE的5个评价指标与QoE之间的相关性分析,如表5所示.表5QoE的5个评价指标与QoE之间的相关性主成分皮尔逊相关系数显著性空间质量时间质量满意程度关注级别除此之外,文献[27-28]还利用单因素方差分析法(ANOVA)来分析QoE与位置之间的关系.在这里就不再做详细讨论.4.1.3QoE统计学模型与模型验证在进行了QoE评价指标之间的相关性分析和QoE评价指标与QoE之间相关性的分析之后,就需要给出QoE的评价模型,也就是给出将QoE的这些评价指标映射为最终QoE的函数模型.可以采用统计学中回归分析[27-29]和判别分析[11,33]的方法来解决这个问题.若将QoE映射为一连续的值,则应该采用回归分析的方法.QoE评价模型一般采用线性回归模型、指数回归模型以及对数回归模型[27-29].模型的选取与服务或业务的类型有关.文献[28]指出,实时交互的业务适合用指数回归模型进行分析,而传统的网页浏览的业务则适合用对数回归模型进行分析.回归分析的基本研究方法[33]是:首先,做散点图以观察曲线的形状.若坐标轴相关点呈团状分布,则表示两变量没有任何关系.如果两变量有关系,则它们可能是最简单的直线线性关系或非线性关系.非线性关系又分两种:一种是本质线性关系或拟线性关系,可转换成线性关系,用最小二乘法求出相关系数;另一种是本质非线性关系,不可转换成线性关系,仅能用迭代方法或分段平均值方法求解.若将QoE映射为离散的值,则QoE的评价问题就等价为一个分类问题,这时可以采用判别分析法[11].判别分析的具体步骤为:(1)选择研究对象的指标,即QoE的评价指标;(2)收集数据,得到训练样本,并利用训练样本,给出判别函数;(3)对判别函数进行验证分析;(4)输出结果,根据研究对象的实际情况分析输出结果,得出结论.根据上述步骤就可以得到QoE的评价模型.在得到QoE的函数模型以后,往往需要对其进行验证.常用的验证方法有自身验证、外部数据验证、样本二分法以及交互验证等.4.2基于心理学的评价方法韦伯-费希纳定律[34]是心理学领域的一个重要原理,它描述了物理刺激的程度和它被人感受的强度之间的关系,适用于中等强度的刺激.在许多场景,这种关系都呈现一种对数的特征.可以利用这一性质来研究QoE的评价[35].4.2.1韦伯-费希纳定律韦伯-费希纳定律是由德国物理学家、心理物理学创始人费希纳在韦伯研究的基础上,提出的一个描述连续意义上心理量与物理量关系的定律.1834年,德国的生理学家韦伯首次提出人类感觉系统中的“最小可觉差”的理论.最小可觉差是指当物理刺激程度的变化超过了它实际刺激程度的一定比例时,感觉系统能够区分出变化.这个比例是个常数,如式(7)所示,其中ΔS为物理刺激的变化量,S为物理刺激,k为常数.大量的实验表明,当我们手中的物体的重量增加接近3%时,我们可以感觉到重量的增加,和初始物体重量的绝对值无关.1860年,费希纳在韦伯研究的基础上提出了一Page8个假定:把最小可觉差作为感觉量的单位,即每物理刺激增加一个差别阈限,心理量增加一个单位.上述假定用微分的形式表示,如式(8)所示,其中dP表示感觉的变化,而用dS/S表示物理刺激的相对变化.由式(8)可以推出式(9),其中S0指可被感觉到的最小的物理刺激的程度.韦伯-费希纳定律是人类感觉系统的非常基础的一个原理,适用于生理和精神层面,比如人的视觉(恒心亮度在对数级别进行度量)、听觉(声音的强度用分贝进行度量)、味觉、嗅觉、触觉、时间感知等[35].因此,可以利用韦伯-费希纳定律来进行QoE的相关研究.4.2.2韦伯-费希纳定律与QoE评价文献[35]通过两个例子描述了韦伯-费希纳定律在QoE评价问题中的意义.第1个例子讨论了语音业务的QoE与比特率的关系,如图3所示.它将比特率作为唯一变化的因素,变化范围从2.4kbps到24.8kbps,并且利用PSQA(Pseudo-SubjectiveQualityAssessment)方法计算出了语音业务的MOS分数.由于图3中横坐标表示比特率,并且经过了对数处理,因此可以看出语音业务的QoE与比特率成对数的关系.如果将比特率理解为物理刺激,而语音业务的QoE理解为人的感觉,则运用韦伯-费希纳定律,可以得出式(10).可以看出利用韦伯-费希纳定律得出的结论和实验数据相符,也就是说利用韦伯-费希纳定律可以直接解释语音业务的QoE与比特率之间的关系.图3语音业务的QoE与比特率之间的对数关系第2个例子讨论了QoE评价的IQX假设[35-36].IQX假设将QoE描述为一个网络级别的QoS参数(如丢包率、延迟等)的函数,如式(11)所示.在这里,同样以语音业务的QoE评价为例,控制其它因素不变,而只考虑丢包率,并利用PESQ算法,给出其QoE的MOS分数,结果如图4所示.图中纵坐标QoE进行了对数处理.可以用指数回归来描述图中给出的结果,如式(12)所示.图4语音业务的QoE(MOS分数)与丢包率(ploss)的关系很遗憾,在这里就不能将丢包率作为物理刺激,QoE作为人的感觉,利用韦伯-费希纳定律来直接解释这一现象,但是这同韦伯-费希纳定律有着一定的联系.IQX假设的前提是用户对QoS的敏感度跟当前QoE有关.也就是说,一定程度的QoS的变化对最终QoE的改变是不同的,与当前用户的QoE有关,如式(11)所示.文献[35]通过令QoE=QoE-γ,将式(11)变形为式(13),从而发现了一个规律:即和韦伯-费希纳定律相比,QoE与QoS互换了位置.这是因为韦伯-费希纳定律是基于这样一个假设,物理刺激的改变量需要是当前物理刺激程度的一定比例.而IQX的假设是对一定的物理刺激的改变量,人感觉的变化是与当前人感觉所处的级别有关.韦伯-费希纳定律和IQX假设存在以下关系,如图5所示.首先,韦伯-费希纳定律和IQX假设分别适用于不同的QoS与QoE之间的关系.其次,当技术层面的参数较小时,用户感觉随着技术层面的参数变化较快,当用户体验的技术层面的参数较大时,用户感觉随着技术层面的参数变化较慢;最后,QoE与QoS之间总存在对数的关系,或者QoE是QoS的对数函数,或者QoS是QoE的对数函数.但是如何从心理学的角度对IQX假设进行解释,它和韦伯-费希纳定律有什么更深层次的关系,现有文献中并没有给出,还需要进一步的研究和探索.4.3基于人工智能学的评价方法本文将基于人工智能的评价方法分为两类,即Page9图5语音业务QoE与QoS参数之间的关系基于模糊层次分析法[37](FuzzyAnalyticHierarchyProcess,FAHP)的评价方法和基于机器学习[38]的评价方法,下面分别对这两种评价方法进行详细地讨论.4.3.1基于FAHP的QoE评价层次分析法(AnalyticHierarchyProcess,AHP)是由美国运筹学家Thomas首次提出,它是用来解决多指标综合问题的一种方法.它结合定性和定量的方法,同时减少了主观因素的影响,确保系统和模型的合理性.它提供了一个科学和合理的评价分析方法.模糊层次分析法结合AHP和模糊逻辑,在一定程度减少了主观因素对评价的影响.下面介绍FAHP中的一些主要的定义和定律[32,37].定义1.假设矩阵犃=(aij)n×n中0aij1,定义2.如果模糊矩阵犃=(aij)n×n中aij+定义3.如果模糊互补矩阵犃=(aij)n×n和任意的整数k满足aij=aik-ajk+0.5,则犃称为模糊一致性矩阵.假设模糊互补矩阵犃,计算矩阵每行的和,如式(14)所示:则犃是一个模糊矩阵.aji=1,则犃称为模糊互补矩阵.进行如式(15)所示的数学变换:这样一个模糊矩阵犅=(bij)n×n就建立了.计算矩阵犅每行的和,并进行标准化,就获得了权重向量狑=(w1,w2,…,wn).计算公式如式(16)所示.wi=∑n利用模糊层次分析法解决问题的基本步骤如下所示.(1)根据决策的条件建立评价问题的层次模型.一般来说,一个层次模型包括目标层,指标层以及方案层.如果有必要的话,还可以在指标层下面加入子指标层.(2)建立模糊互补的判断矩阵.评价专家和决策者给出指标之间的两两比较的值,可以采用如表6所示的0.1~0.9标度.(3)计算权重向量.通过上面所述的方法,就可以将模糊互补矩阵转换成模糊一致矩阵,每一层的权重向量就可以得到.(4)根据步骤3的结果,计算出最终的值.标度0.50.60.70.80.90.1,0.2若元素ai与元素aj相比较得到判断rij,则元素0.3,0.4ai与元素aj相比较得到的判断为rji=1-rij文献[32]根据FAHP方法,建立了短信服务QoE的评价体系结构,如图6所示.它首先将短信服务的QoE评价指标归纳为可访问性、即时性、完整性、内容质量及可持续性.其次,找出了与每一个QoE评价指标关联的QoS参数.这样就建立了短信服务QoE的评价体系结构.在建立QoE评价体系结构之后,还需要确定与短信服务QoE相关的各个QoS参数的权重.这时,需要首先确定QoE评价指标两两比较的值以及每Page10一个QoE评价指标下相关的QoS参数两两比较的值,然后按照上面所述的方法,就可以得出的最后结果,如图7所示.从上述讨论中,可以发现,FAHP方法可以很好地解决多指标以及多层次的问题,但是它需要依赖专家的经验,并且无法描述同一层次指标之间的关系(需要保证同一层指标之间是相互独立的).4.3.2基于机器学习的QoE评价QoE的评价问题本质上是一个把众多的影响因素,包括客观环境、用户的主观因素以及业务或者服务的技术性能因素映射到用户感觉层面的一个问题.因此上QoE的评价问题必须要研究人的感觉与这些因素之间的映射关系.这就造成了QoE评价问题的两大难点:(1)需要研究人的感觉与这些因素之间的关系.虽然在4.2小节中,给出了一些关于人的感觉与物理刺激的讨论,但这些讨论还远远不能解决QoE的评价问题;(2)QoE的影响因素较多,难以给出一个具体的函数将这些影响因素映射为QoE.运用机器学习的方法可以较好地避开这两个问题,但是机器学习的过程较为复杂,需要大量的计算,这也给采用机器学习进行QoE评价的工作带来了较大的难度.用向量狓表示影响QoE的因素或者QoE的评价指标,y表示QoE.那么机器学习的目的就是利用现有的一些机器学习的方法,生成一个将狓映射为y的函数f,即y=f(狓).下面将分别讨论决策树[12,25,31]、支持向量机[12,25,30-31]的方法.1)决策树决策树[38]是一个分层的树状结构的模型.每一个中间节点要选定一个属性(即狓中的一个分量),并根据这个属性部署一个测试(或者一个问题),而每一个叶子节点表示一个决策(一个类型或者一个标记).决策树中一个非常重要的算法是ID3算法,它是后来提出的其它算法的基础.ID3算法是一个迭代的算法,对决策树中每一个节点按照选定的属性部署一个测试.属性的选择依据信息增益的度量.对每一个属性可能的值,都要产生一个分支.针对每个分支,使用剩下的训练数据重复进行上述过程.当没必要继续对训练数据进行分类时,这个算法完成了一个路径.这时候,叶子节点就被增加,并且将其和剩下的数据中数量最多的那一类型进行关联.C4.5算法是继ID3算法之后被提出的,它和ID3的原理大致相同,但是克服了许多ID3算法的弱点,比如它可以处理连续值的属性,训练的数据可以有丢失的值,有许多对待过度拟合的修剪算法.因此可以采用C4.5算法进行QoE的评价.C4.5算法的步骤如下所示:(1)对数据进行预处理,将连续型的数据进行(2)计算每个属性的信息增益,从而求出其信息增益率,选择信息增益率最大的属性,作为当前属性节点,从而获得决策树的根节点;离散化处理,形成训练集;(3)根节点属性每一个可能的取值对应一个样本子集,对样本子集重复上述过程,直到每一个样本子集不需要再进行分类;(4)验证决策树的性能,如有出现过度拟合的现象,要对决策树进行修剪.文献[12]给出了用决策树解决QoE评价问题的方法,并获得了较高的准确率.它将时间信息(temporalinformation)、空间信息(spatialinforma-tion)、比特率(bitrate)以及帧频率(framerate)作为视频业务的QoE评价指标,并通过C4.5算法,得到了视频业务的QoE评价模型.2)支持向量机支持向量机[38](SupportVectorMachine,SVM)是从线性可分情况下的最优分类面发展而来的,采用了保持经验风险值固定而最小化置信界限的策略.SVM在分类问题上具有良好的性能.支持向量机是线性的两类分类器中的一种.两类分类问题中的数据可以用两个标记中表示,简记为+1和-1.记号X表示由一组分量xi组成的向量.记号犡i表示在数据集中的第i个向量,yi表示数据犡i的标记.向量犡的集合称为特征空间.一个二Page11元组(犡i,yi)表示一个样本.一个线性的分类器是基于一个线性的鉴别函数,如式(17)所示.其中狑称为权向量,b称为偏移.支持向量机的基本思路就是要找到这样一个鉴别函数:首先,每个类别的样本点到鉴别函数所对应的超平面的最小距离相等并且最大;其次,令这些到超平面距离最小的样本点对应的鉴别函数值为1或-1.这样支持向量机解决的分类问题就可以转换为带有约束条件的优化问题,如式(18)所示.Minimize1Subjectto:yi(狑T犡i+b)1,i=1,…,n引入一组拉格朗日因子λi,可以上面的优化问题转换成下面的优化问题,如式(19)所示.Subjectto:0λi,i=1,…,N,∑N在这个优化问题中的限制条件保证了分类器的正确性.但是数据不都是线性可分的,如果遇到线性不可分的数据,就不能采用上述的限制条件,即使是线性可分的数据,也可以通过错分一些数据,来增大超平面到两类样本之间的距离.考虑到这样,通过引入松弛因子ξi>0(其中i=1,…,n),上面的问题就变为式(20)所示的优化问题.Minimize1Subjectto:yi(狑T犡i+b)1-ξi,i=1,…,n其中,C>0.题就转换为式(21)所示的优化问题.同样,引入一组拉格朗日因子λi,上面的优化问Subjectto:0λiC,i=1,…,N利用SMO算法[39]就可以解决式(19)和式(21)的优化问题,从而得到最后的结果.以上介绍的都是线性支持向量机.当然也可以构造非线性的支持向量机,它的基本思路就是利用一组非线性函数将原特征空间映射到新特征空间,在新的特征空间设计线性支持向量机.文献[12]也给出了用支持向量机解决QoE评价问题的方法.它同样将时间信息(temporalinfor-mation)、空间信息(Spatialinformation)、比特率(Bitrate)以及帧频率(Framerate)作为视频业务的QoE评价指标,并通过SMO方法,得到了视频业务的QoE评价模型.由于支持向量机是一个两类的分类问题,所以利用支持向量机解决QoE评价的问题有一个限制,那就是它只能将QoE分成两个级别,即可接受和不可接受.如果将QoE分为n(n>2)个级别,就需要在每两个类别之间构造一个超平面,即共需构造n()2个超平面.这给支持向量机的使用带来了较大的不便.值得注意的是,在用机器学习解决实际问题时,往往不是仅仅使用一种方法,而是采用多种方法,如上面提到的决策树、支持向量机,然后对这几种方法得到的结果进行比较,选择合适的模型.4.4基于随机模型的评价方法研究在提出基于随机模型的评价方法之前,我们先对前面介绍的3种基于不同学科的评价方法做一些分析和讨论.基于统计学的评价方法的主要优点是可以利用统计学中因子分析等方法来研究QoE评价指标或者影响因素之间的相关性,进而可以达到数据降维和问题简化的效果.同时可以利用统计学中的回归分析和判别分析给出QoE的评价模型,虽然精确度可能不如机器学习的方法[12].基于FAHP的方法可以较好的解决QoE多指标的问题,计算也较简单,但是它需要依赖于专家知识,这给FAHP方法的运用带来了较大的不便.基于机器学习的方法有较高的精确度,但是训练过程较为复杂.另外,本文也讨论了基于心理学的评价方法.基于心理学的评价方法是基于心理学中的一些定律,不需要进行复杂的训练以及计算的过程.但它主要研究的是QoE与某些单一的QoS参数的函数模型,无法解决QoE多影响因素的问题,这给基于心理学的QoE评价方法的应用带来了一定的限制.值得注意的是,现有评价方法的模型都忽略一个这样一个事实:用户之前的体验会对当前体验造成较大的影响.因此我们提出了基于隐马尔可夫的QoE评价模型,可以更合理地模型用户体验的过程,从而建立一个更适用的QoE评价体系结构.下面我们以3G/4G网络中的视频流媒体业务为例介Page12绍基于隐马尔可夫(HiddenMarkovModel,HMM)的QoE评价模型.4.4.1评价参数体系流媒体评价参数体系,如图8所示.文献[40]提出了一个在3G/4G中通用的视频QoE参数是从用户角度定义的业务总体的性能参数,难以量化或者测量.它实际上只起一个从QoE到QoS参数的桥梁的作用,它是为了获得QoE对应的QoS参数.ESQoS参数反映的是端到端的业务,它是从QoE参数映射得到,可以量化和测量.SQoS参数反映的是网络为业务提供服务的能力.文献[40]详细地讨论了ESQoS和SQoS参数的选取、测量和计算的问题,但是它并没有给出如何通过这些已计算出的ESQoS参数得到最终QoE.接下来我们将详细讨论如何利用隐马尔可夫模型将这些ESQoS参数映射为最终的QoE.4.4.2评价模型的建立下面首先简要介绍隐马尔可夫模型[41-42].隐马尔可夫模型是一种统计概率模型.它是一个双重随机过程,即马尔可夫链[43]和一般的随机过程.马尔可夫链用来描述状态的转移,用转移概率描述.一般随机过程用来描述状态和观察序列间的关系,用观察概率描述.隐马尔可夫模型用五元组λ=(N,M,π,犃,犅)来描述,或者可以简写为λ=(π,犃,犅),其中N表示隐马尔可夫模型状态的数目,也就是隐马尔可夫模型中马尔可夫链的状态数目;M表示隐马尔可夫模型中每个状态可能的观察值的数目;犃表示隐马尔可夫模型中状态之间的转移概率矩阵;犅表示每一个状态下每一个观测值对应概率矩阵;π表示初始时,每个状态的概率.隐马尔可夫模型有3个基本的问题,评估问题、解码问题以及学习问题.评估问题是指如何计算给定的观察序列的概率.解码问题是指如何计算出最有可能产生给定观察序列的状态序列.学习问题是指如何根据观察序列求得模型参数或者调整模型参数.解码问题和学习问题分别可以采用Viterbi算法和Baum-Welch算法进行求解.为了解决前面讨论的几种模型的缺陷,我们就必须要将用户之前体验对当前体验造成的影响考虑在内.为了简化问题,我们做出以下两个假设:(1)用户对服务的主观体验能够以会话为单位进行讨论,也就是说每经过一次会话,用户就可以形成对服务的一个整体感知;(2)仅仅前一次会话的用户体验会对当前的体验造成影响.在上述两个假设的基础上,我们就可以建立基于隐马尔可夫的QoE评价模型.首先,以会话为单位,将用户的体验序列化.即有几次会话,就可以有几次完整的用户体验,而且这些体验存在先后顺序.其次,我们利用前面提到的MOS方法,将每次会话的用户体验进行量化,将MOS中的5个等级分别作为隐马尔可夫模型的5个状态,如图9所示.最后,将每次会话ESQoS参数作为隐马尔可夫模型的观测值.这样我们就确定了隐马尔可夫模型中的状态和观测值表示的含义.另外还需要确定π,犃,犅等参数.由于ESQoS具有多个分量,而且是连续的.直接利用ESQoS参数进行训练可能会使问题变得非常复杂,因此可以利用前面提到的PCA方法对ES-QoS参数进行处理,然后将得到的主成分进行离散化.将离散化后的主成分作为隐马尔可夫模型的观测值,这样就可以用Baum-Welch算法进行求解.Baum-Welch估计算法是一种迭代的算法.利用Baum-Welch算法时,需要由用户自己初始化各个参数的值,然后通过不断的迭代,当误差到了一定范围之内时,就得到了模型中各个参数的值.通过以上步骤,我们就建立了基于隐马尔可夫的QoE评价模型.4.4.3评价模型的验证与应用在得到QoE的评价模型之后,我们就可以利用Page13自身验证、外部数据验证以及交互验证等一些验证方法对模型的性能进行分析和讨论.上述的模型将MOS方法中QoE的5个级别分别对应隐马尔可夫模型的5个状态,而经过处理的每次会话的ESQoS参数值则对应隐马尔可夫模型的观测向量.在获得QoE评价模型的具体参数值之后,QoE的评价问题,就等价于如何利用一次或者连续的多次会话的ESQoS参数形成的观测序列对隐马尔可夫模型状态序列进行估计,这就等价于HMM的解码问题,可以利用Viterbi算法[41-42]进行求解.Viterbi算法是一种动态规划的算法,其复杂度为O(K2L),其中K表示状态个数;L表示序列长度.由于K为常数5,所以在此算法可以在线性时间内得到问题的解.基于隐马尔可夫的QoE评价模型可以克服现有模型的共有缺陷,可以较好地对用户体验的过程建模.但是它也存在一些缺点.首先,基于隐马尔可夫的QoE评价模型基于前面提出的两个假设,若这两个假设不符合实际,或和实际情况差别较大,那么基于隐马尔可夫的QoE评价就失去了合理性.其次,模型的训练也比较复杂.由于Baum-Welch算法是一种迭代的算法,所以需要较长时间来得到问题的解.最后,对某些服务,用户可能不会在较短的时间内连续体验多次,这时基于隐马尔可夫的QoE评价模型和前面提到的其它评价模型相比就不再具有优越性.当然,基于隐马尔可夫的QoE评价模型还处于理论阶段,还没有应用于实践.对它的验证和完善还需要进一步的研究.5总结本文在现有文献的基础上,给出了QoE的定义以及影响因素,并且综述了QoE的量化方法和评价方法.其中详细介绍了基于统计学、心理学及人工智能的QoE评价方法,并且分析比较了这几种方法之间的优缺点.在分析和总结现有评价模型和方法的基础上,本文以视频流媒体业务为例,运用隐马尔可夫模型对用户体验的过程进行建模,提出了基于隐马尔可夫的QoE评价模型,能够更合理地描述用户体验的过程,从而可以为构建更准确的QoE评价方法奠定基础.QoE评价还存在很多的问题需要进一步解决:(1)QoE多属性融合的问题.QoE是一个多属性融合的问题,现有文献中解决QoE多属性的问题只有统计学和人工智能学的一些方法.但这些方法是基于大量的样本数据,计算较为复杂,而且并不能揭示QoE与其属性之间本质上的关系.(2)人的主观因素以及环境因素对QoE的影响仍需进一步的研究和探索.由于人的主观因素与环境因素难以测量以及量化,所以这些因素对QoE的影响难以评价.需要借助心理学以及社会学的相关理论对这些影响因素进行研究和探索.(3)对不同的服务建立一套通用的评价指标还需要进一步的探索.文献[32,44-45]给出了一些讨论,但是没有对这些评价指标的合理性和完备性进行分析.
