Page1基于随机网络演算的LTE网络端到端时延分析陈昕1)张磊2)向旭东3)万剑雄3)1)(北京信息科技大学信息管理学院北京100101)2)(北京信息科技大学计算机学院北京100101)3)(北京科技大学计算机与通信工程学院北京100083)摘要长期演进计划LTE(LongTermEvolution)由第三代合作伙伴计划(The3rdGenerationPartnershipProject,3GPP)提出,是下一代高速无线网络通信的重要标准.LTE网络中的数据传输性能评价是学术界与工业界重要问题.但是,无线信道的时变性使得LTE网络中性能评价的复杂度大大增加.文中利用随机网络演算对LTE网络中不同数据流的到达和服务进行建模,建立了对LTE网络进行数据传输时端到端(End-to-End,E2E)时延分析的框架,并通过数值分析验证了所建立框架的有效性.关键词随机网络演算;长期演进计划;服务质量;性能评价;LTE1引言近年来,各种新应用(比如移动电视、多媒体在Page2经过认真讨论制定了长期演进计划LTE(LongTermEvolution).LTE的无线接入网称为演进的通用无线通信系统地面无线接入网(EvolvedUniversalTerrestrialRadioAccessNetwork,E-UTRAN),LTE主要致力于无线接入网的演进,其目的是满足未来无线宽带服务,为用户提供高速率、低时延的数据传输服务,和更好的用户体验.LTE项目是第三代移动通信技术(3G,3rd-Generation)的演进,改进了3G的空中接口技术,其关键技术包括:采用正交频分复用(OrthogonalFrequencyDivisionMultiplexing,OFDM)和多输入多输出(Multiple-InputandMultiple-Output,MIMO).LTE以期为基于IP的实时数据流提供端到端(End-to-End,E2E)的服务质量(QualityofService,QoS)[1].语音通信作为一种实时业务将主要通过网络电话(VoiceoverIP,VoIP)来实现,可以更好地与其它多媒体业务结合.MIMO技术通过高频谱利用率和链路可靠性提供高数据吞吐量和链路范围,在现代无线通信中得到广泛应用,比如IEEE802.11n、LTE和WiMAX(WorldwideInteroperabilityforMicrowaveAccess)等.MIMO可以工作在以下几种模式:(1)空间复用模式,即通过在多个天线上并行发送多个数据流获得复用增益来提高峰值速率和小区吞吐量;(2)空间分集模式,即通过在多个天线上重复发送一个数据流的不同版本来获得分集增益来改善小区的覆盖;(3)空分多址模式,即多个并行数据流用于多个用户来提高系统用户容量;(4)波束赋形模式:利用空间信道的强相关性,利用波的干涉原理产生强方向性的方向图,从而提高信噪比,增加系统容量或覆盖范围.本文假设MI-MO工作在空间复用模式.本文在分析研究随机网络演算[2-3]的基础上,结合LTE网络数据流的特点,通过采用合适的到达模型和服务模型,建立对LTE网络进行数据传输时性能分析的框架,并利用该框架分析LTE网络中贯穿数据流的随机E2E时延.随机网络演算作为尚在演进的一种网络分析工具,可以分析计算机网络的随机服务保证,并且得到了广泛的应用[4-8].本文第2节简要介绍MIMO技术和随机网络演算;第3节运用随机网络演算建立到达模型和服务模型并分析数据流的E2E时延;第4节通过数值分析贯穿数据流的E2E时延,验证所建立模型的有效性;最后一节总结全文.2理论基础2.1随机网络演算随机网络演算[3]作为尚在演进的一种网络分析工具,是分析网络系统随机服务保证的理论,该理论的2个核心概念是随机达到曲线(StochasticArriveCurve,SAC)和随机服务曲线(StochasticServiceCurve,SSC).前者刻画达到数据流特征,后者则刻画对数据流的服务特征.在本文中,假设所有的到达曲线和服务曲线是非负广义递增函数,所有的界限函数都是非负广义递减函数.记A(t)、A(t)和S(t)分别为到达过程、离开过程和服务过程,分别表示系统在时间间隔(0,t]内的累积到达、输出和服务量,并且假设A(0)=A(0)=S(0)=0.SAC和SSC的定义如下.定义1.如果对所有的0st,x0,均有成立,则称数据流A具有界限函数为f的vbc.随机到达曲线α,记为A~vb〈f,α〉.定义2.如果对所有t,x0,均有成立,则称系统S为数据流A提供界限函数为g的弱随机服务曲线β,记为S~ws〈g,β〉.本文主要关注的QoS度量是时延.下面是具有vbc.到达曲线的数据流通过提供弱SSC的系统所具有的性质.定义3.系统S在时刻t的时延定义为定理1.如果系统S的输入数据流A具有vbc.随机到达曲线A~vb〈f,α〉,且系统S为输入数据流A提供弱随机服务曲线S~ws〈g,β〉,则对所有t,x0,系统的随机延迟上界为其中,h(α(t),β(t))表示α(t)和β(t)之间的最大水平距离,定义为h(α,β)≡sups0{inf{d0:α(s)β(s+d)}}定理2.如果系统S的输入数据流A具有vbc.Page3随机到达曲线,即A~vb〈f,α〉,系统S为输入数据流A提供弱随机服务曲线,即S~ws〈g,β〉,则对所有θ>0,A具有vbc.随机到达曲线A~vb〈fgθ,αθβ-θ〉,其中αθ(t)=α(t)+θ·t,β-θ=β(t)-θ·t,gθ(x)=g(x)+1定理3.如果一条数据流经过由N个系统串联而成的网络,且系统n(n=1,2,…,N)为其输入数据流提供随机服务曲线Sn~ws〈gn,βn〉,那么整个网络为该数据流提供随机服务曲线S~ws〈g,β〉.其中对任意θ,θ1,…,θN>0β(t)=β1β2g(x)=g1,θ1g2,θ2…gN,θN(x),其中-(n-1)θ(t)=βn(t)-(n-1)θt,n=1,…,N,βngn,θn(x)=gn(x)+1gN,θN(x)=gN(x).定理4.如果系统S的输入数据流A是由数据流A1和A2组成的聚合流,且数据流A2具有vbc.随机到达曲线A~vb〈f,α〉,系统S为数据流A提供服务曲线β,则系统S为数据流A1提供弱随机服务曲线S1~ws〈f2,β-α2〉.定理5.考虑N条具有到达过程Ai(t)(i=1,2,…,N)的数据流及其组成的聚合流A(t).若i,Ai~vb〈fi,αi〉,则A~vb〈f,α〉,其中α(t)=∑Nf(x)=f1…fN(x).定理6.记Z=∑nX2,…,Xn之和,无论X1,X2,…,Xn是否相互独立,Z的互补累积分布函数都有下式成立定理7.如果系统采用的调度策略是优先级调度(StrictPriority,SP),服务器所提供的服务为S(t),i<j表示数据流i的优先级比j高,并且在同一种数据流中采用先进先出(FIFO)的策略.记Aj(t)为数据流j的到达过程,则对j=1,…,n数据流j的服务曲线βj为为了简化最小加卷积的计算,引入如下引理[9].引理1.任何正数ak,bk,k=1,2,…,K,对于任意x0,则有infx1+x2+…+xK=x∑K其中ω=∑K2.2MIMO在LTE中,MIMO的空间复用模式下,用户设备(UserEquipment,UE)端多个接收天线和eNodeB(evolvedNodeB)端多个发送天线相结合可以提高峰值速率和小区容量.信道矩阵的每个元素表示MIMO中每个天线对之间的信道增益和相位等信息,即对于一个M×NMIMO系统,对应一个有N×M个元素的矩阵犎N×M.M×NMIMO系统的容量可以表示为[10]CMIMO=Elog2det犐N+ρ其中:犐N是N维单位向量,[·]表示矩阵的转置,ρ=PN0图1是一个2×2MIMO系统,其中hij表示发送端j到接收端i的信道增益信息.本文利用马尔可夫链(Markovchain)来描述无线网络的环境信息.假设每个空间信道是独立同分布的Gilbert-Elliott(GE)信道.为了便于描述,假设每个信道只有2种状态:good(g)状态或bad(b)状态.记S(hn,m)为信道(n,m)的状态,则有S(hn,m)∈{g,b},m,n=1,2,…,M.若S(hn,m)=g表明天线对之间的信道状态很好;若S(hn,m)=b表示信道受到某种阻碍.在GE信道中,记pgb(pbg)为good(bad)状态转换到bad(good)状态的概率,则信道处于good状态的稳态概率为这里,不考虑自动重传机制.若与某一发送天线相关的信道都处于bad状态时,则需要发送的数据将重定向到其它发送天线.由于每个天线对之间的信道都是2个状态的Page4GE信道,则对于M×N的MIMO系统来说,马尔可夫链中将有2N×M个状态.随着天线数目的增加,状态个数会以指数递增.故在本文中根据信道的状态来进行计算.具体方法是,对于N×N的MIMO系统来说,则分别计算有n(0,1,…,N)个天线对之间的信道处于good状态的稳态概率π,记Ri(i=0,1,…,N×N)为状态i的速率,则信道容量为其中,Ri=珚Ci,珚Ci是由式(9)得到的状态i的容量.3LTE网络性能分析本节在分析研究随机网络演算的基础上,结合LTE网络数据流的特点,通过采用合适的到达模型和服务模型,建立对LTE网络进行数据传输时性能分析的框架,并利用该框架分析LTE网络中贯穿数据流的随机E2E时延.3.1LTE网络拓扑LTE网络中的业务可划分为2类:实时业务和非实时业务.流媒体、VoIP等实时业务,能容忍一定量的数据丢失,但对时延敏感;而网页浏览和文件传输服务等非实时业务,主要关注的是吞吐量.在如图2中的LTE网络场景中,其核心网络(CoreNetwork,CN),即系统架构演进(SystemArchitectureEvolution,SAE)中部署有不同的服务器,提供实时和非实时服务.在核心网络的边缘是移动性管理实体和网关(MobilityManagementEntity/Gateway,MME/GW)[11].图中从右至左穿过有线核心网络的数据流称为贯穿流,而只是流经有线核心网络的数据流称为交叉流.贯穿流和交叉流分别可能既包含实时数据流又包含非实时数据流.本文主要分析LTE-SAE网络架构中贯穿流的随机E2E时延.3.2流量模型本文中,假设数据流的到达过程A(t)是具有界限函数为f,速率为ρ的vbc.随机到达曲线,即A(t)~vb〈f,ρt〉,则对所有0st,x0,{Psup0stA(s,t)-ρ(t-s)>}xf(x)成立.记N1t和N2t分别为贯穿实时数据流和贯穿非实时数据流的数目.根据所采用的到达过程,记Ai,1t为贯穿实时数据流i的到达过程,表示为Ai,1t~vb〈fi1t(x)=aie-bix.fi同理,记Aj,2t为贯穿非实时数据流i的到达过程,表示为Aj,2t~vb〈fjmje-njx.同理,所有贯穿非实时数据流S2t聚合到达过程基于上述每条贯穿实时数据流S1t的到达曲线,应用定理5,可得所有贯穿实时数据流聚合到达过程A1t,即A1t~vb〈f1t,α1t〉,其中f1t=f1fN1t1t,α1t(t)=∑i∈S1tA2t为A2t~vb〈f2t,α2t〉,其中f2t=f1α2t(t)=∑j∈S2t3.3服务模型在无线接入网中,用户设备和eNodeB之间由MIMO系统提供服务,其信道容量可根据有关的参数,通过式(11)分析得到.核心网络采用优先级调度,每个路由器d,提供的服务速率为R,且工作保留(WorkConserving),即只要路由器中有数据需要处理,路由器就以速率R提供服务,其服务模型如图3所示.假设实时数据流具有优先级1,其优先级高于具有优先级2的非实时数据流.输入队列q1和q2分别用于缓冲实时数据流和非实时数据流,每个队列内部采用FIFO调度算法.如果队列溢出,则到达的分组就被丢弃,不作任何处理.Page5假设每一个路由器的输入数据流之间是相互独立的.这里假设聚合交叉实时数据流集合Sd到达过程是Ad1c=∑i∈Sdαd程是Ad2c~vb〈fdc,αd同理,聚合交叉非实时数据流集合Sd2c的到达过根据SP的特性,每个路由器d为所有实时数据流提供的服务曲线是βd所有输入的实时数据流,则每个路由器为所有的非实时数据流提供的服务曲线是βd根据定理4,路由器d为S1t提供弱随机服务曲1t~〈fd线Sdc,βd〈fd2t〉,其中1t=βdβd2t=βdβd3.4核心网络时延分析为了简化LTE-SAE架构的时延分析,将整个核心网络看作一个单一的黑盒子.贯穿实时数据流和贯穿非实时数据流的随机时延上界描述如下.命题1.考虑如图2中的核心网络,输入流S1t和S2t伴随着Sd流量模型和SP服务模型,可得核心网络中S1t和S2t的随机时延上界为其中r1t,θ=min1nNβnr2t,θ=min1nNβn其中,N是输入路由器d的数据流数目,对于n=1,…,N-1,g1t(x)=g2t(x)=f2,θ2c…fN,θNc(x),fn,θnc(x)=fn=1+1fN,θNc(x)=fNc(x)=ke-ax.证明.由定理3可知,整个核心网络为S1t提供弱随机服务曲线S1t~〈g1t,β1t〉,对n=1,…,N-1,β1t(t)=β1g1t(x)=f2,θ2c…fN,θNc(x),其中fn,θnc(x)=fnfN,θNc(x)=fNc(x)=ke-ax.已知A1t~vb〈f1t,α1t〉和式(14),利用定理1,可P{D1t,cn>h(α1t+x,β1t)}f1tg1t(x)(15)得S1t在核心网络中的随机时延上界是根据式(5),有将式(16)代入式(15)的左端,即可得到式(12).成立.同理,可证式(13).3.5接入网时延分析根据无线信道的随机特征和时变性,可采用随机系统进行建模.在无线接入网中假设对实时数据流和非实时数据流不进行区分,而是公平调度.命题2.在无线接入网中,假设无线信道为贯穿数据流提供弱随机服务曲线S~ws〈g,β〉,其中g(x)=ue-vx,β=Ct.记Dan为贯穿数据流在接入网中的随机时延.可得贯穿流在接入网中的随机时延上界为其中,f(x)=f1tgθθ∫1xg1t(y)dy,gθ证明.考虑输入流S1t和S2t在MME/GW的输出.由定理2,S1t的输出为A1t~vb〈f1tgθ1t,α1t,θβ1t,-θ〉,其中α1t,θ=α1t(t)+θt=∑i∈S1tβ1t,-θ=β1t(t)-θt=(r1t,θ-θ)t,gθS2t的输出为A2t~vb〈f2tgθ其中α2t,θ=α2t(t)+θt=∑i∈S2tPage6β2t,-θ=β2t(t)-θt=(r2t,θ-θ)t,根据定理5,无线接入网的输入聚合流的到达过程为A~vb〈f,α〉,其中α(t)=α1t,θβ1t,-θ(t)+α2t,θβ2t,-θ(t)f(x)=f1tgθ由A~vb〈f,α〉,S~ws〈g,β〉,根据定理1,贯穿流在无线接入网的时延上界为根据式(5),有将式(19)代入式(18)的左端,即可得式(17).3.6E2E时延分析命题1和命题2分别分析出贯穿实时数据流和贯穿非实时数据流在核心网络和无线接入网络中的随机时延上界,下面的命题3描述了贯穿实时数据流和贯穿非实时数据流的随机E2E时延上界.命题3.条件如命题1和命题2,记D1t和D2t分别为贯穿流S1t和S2t的随机E2E时延,则贯穿流S1t和S2t的随机E2E时延上界为P{D1t>d}=P{D1t,cn+D1t,an>d}P{D2t>d}=P{D2t,cn+D2t,an>d}其中D1t,an=D2t,an=Dan.可得证明.显然D1t=D1t,cn+D1t,an,根据定理6或者P{D1t,cn+D1t,an>d}P{D1t,cn>d}P{D1t,an>d}由命题1和2,通过计算式(22)的右端,易得式(20).同理可得式(21).上述所建立的框架,对LTE网络中的贯穿实时数据流和贯穿非实时数据流的随机E2E时延上界进行了分析.如果将该框架应用于实际的LTE网络中,只要对实际应用环境进行分析,即可得到上述各个参数,可以简化LTE-SAE架构的性能分析,保证贯穿实时数据流和贯穿非实时数据流的随机E2E时延.4数值验证为验证上述LTE-SAE网络性能分析框架的有这里,假设所有与到达曲线和服务曲线相关的效性,本节进行有关的数值分析.界限函数为e-x,参数θ,θ和θ设为1.考虑下面的网络场景:在核心网络中,路由器为2个,每个路由器的容量为100Mbps;贯穿实时数据流的到达速率为200pkts/s,其中每个数据包的大小为128Bytes;贯穿非实时数据流的到达速率为100pkts/s,其中每个数据包的大小为256Bytes;这里有贯穿实时数据流和交叉实时数据流个数分别为100,贯穿非实时数据流和交叉非实时数据流个数分别为50;每个交叉流的到达速率为200pkts/s,每个数据包的大小为128Bytes.在无线接入网中,假设天线为2×2的MIMO系统,使用频率为20MHz的信道,信噪比设定为25dB,下行链路提供的速率可达到100Mbps.假设在GE信道中,从good状态转换到bad状态的转移概率pgb=0.1,从bad状态到good状态的转移概率pbg=0.01.各个状态的速率随着信道矩阵的变化而变化,依据马尔可夫链,按照式(11)计算出信道的容量为90.909Mbps.根据上述的参数设置和计算结果,应用命题1和引理1,可以得到贯穿实时数据流和贯穿非实时数据流在核心网络中的时延界限分别为利用命题2和引理1,可以得到贯穿数据流在接入网中的随机时延界限为然后,计算贯穿数据流的E2E随机时延界限.根据式(23)和式(25),运用命题3得到贯穿实时数据流的E2E时延界限为同理可得,贯穿非实时数据流的E2E时延界限为图4描绘了上述分析结果所表示的贯穿实时数据流和贯穿非实时数据流的随机端到端时延上界.从图4中可以看出,数据流的可允许时延违约概率是端到端时延的递减函数,从而与随机网络演算理论中的定义相符.从图4也可以看出,当时延违约概率相同时,实时数据流的随机E2E时延小于非Page7实时数据流的随机E2E时延,这是由于在上述所建立的框架中,对贯穿实时和非实时数据流通过采用优先级调度的调度规则进行了区分,说明了上述的建模框架是合理的、可行的,有效地保证了贯穿实时数据流和非实时数据流的随机E2E时延.5结语本文主要以3GPP的长期演进计划和系统架构演进为背景,在分析研究随机网络演算的基础上,结合LTE网络数据流的特点,对LTE网络拓扑进行分析,采用合理的到达模型和服务模型,并在此基础之上,提出了分析LTE网络中的贯穿数据流的端到端时延的框架,并进一步通过数值分析证明了该框架的有效性.
