Page1模糊随机环境下的无线传感器网络多约束多路径路由王小明1)卢俊岭1)李英姝2)郝克刚3)1)(陕西师范大学计算机科学学院西安710062)2)(佐治亚州立大学计算机科学系美国亚特兰大30303)3)(西北大学软件工程研究所西安710069)摘要无线传感器网络路由约束同时存在模糊性和随机性,传统路由算法只考虑随机性,不能准确刻画无线传感器网络路由约束.文中引入模糊随机过程理论和模糊随机规划方法,对无线链路时延和可靠性的模糊性、随机性以及时变性进行统一建模,提出了一种模糊随机多约束多路径路由模型,能够更真实地反映无线传感器网络链路特征.在此基础上,设计了一种同时考虑模糊性、随机性和时变性的无线传感器网络多项式复杂度路由算法.仿真实验结果表明,文中所提出的算法能够灵活地调节路由约束强度,满足具体应用对不同服务质量的需要.关键词物联网;无线传感器网络;不确定性;多路径路由;约束;算法1引言无线传感器网络(WirelessSensorNetwork,WSN)的数据传输受信号衰减、干扰和通信环境等不确定因素的影响.无线链路的可靠性是否受噪声干扰是随机的,而对链路质量和干扰程度的估计是模糊的.事实上,无线链路的时延和可靠性同时具有模糊性和随机性.例如,在考虑服务质量(QualityofService,QoS)的WSN应用中,人们可能要求WSN链路时延明显小于40ms,这种约束条件同时具有模糊性和随机性.传统的研究方法将数据传输的不确定性笼统地归结为单一的随机性或者单一的模糊性,因此不可能准确刻画真实的链路特征,无法满足WSN的应用需求.对链路质量的评估只强调随机性而忽略模糊性是不合理的,主要原因有:(1)模糊性和随机性反映了不同性质的不确定性,而且往往同时存在.在上述WSN应用中,链路时延小于40ms本身是确定的,但时延小于40ms是否发生是不确定的,这是随机性;修饰词“明显”刻画了小于的程度,但“明显”并没有准确的定义,可根据实际应用约定“明显”的程度,因此,对“程度”的估计是不确定的,这是模糊性.(2)由于设备误差和方法近似等不确定性因素的存在,链路时延和可靠性的真实值通常是无法获取的,但结合实际应用需求,对链路时延和可靠性进行模糊估计更符合实际情景.在数据传输过程中,链路时延和可靠性的模糊性和随机性是随着时间的推移不断变化的.因此,模糊性、随机性和时变性是无线链路时延和可靠性同时具有的不确定性特征.我们知道,模糊随机过程理论能够同时刻画事件的模糊性、随机性和时变性[1],可应用于WSN数据传输的QoS不确定性的分析和建模.路由是从源节点到Sink节点选择一条或多条由节点构成的路径用于数据传输.QoS路由是满足一种或多种应用约束条件的路由,QoS路由研究一直是WSN领域的研究热点[2-5].WSN的节点资源和计算能力有限,节点随机布设,无线链路稳定性差,节点通信相互干扰等特点,决定了WSN路由涉及到时延、可靠性、能量和带宽等多种约束.因此,WSN的QoS路由研究只考虑其中某一种约束条件是无法满足实际应用需求的.然而,同时满足多种约束条件的WSN路由路径选择是NP完全问题[6].多路径路由是选择多条路径进行数据传输的路由,为了提高WSN数据传输的可靠性,可将同一数据分组的多个副本使用多条路径同时进行传输.另一方面,为了实现负载均衡,可建立源节点到Sink节点的多条不相交的路径轮流进行数据传输.因此,多路径路由可提高系统的容错性,使节点消耗的能量均衡,并且能够降低端到端的数据传输时延.在近期的WSN多约束多路径路由研究中,Huang等人提出的多约束多路径路由(MulticonstrainedMultipathrouting,MCMP)模型和路由算法具有代表性[7].与通常端到端的QoS机制相比较,MCMP通过对路径质量的近似估计,将端到端的QoS约束转化为局部链路的QoS约束,从而把NP完全问题转化为复杂度适中的近似问题,进而把WSN路由问题表示为时延和可靠性软约束下的随机优化问题,并基于已有的近似方法将上述随机优化问题转化为确定的线性规划问题,从而降低了问题求解的计算复杂度.然而,MCMP模型及其路由算法仅仅刻画了链路QoS不确定性中的随机性和时变性,忽略了同时存在的模糊性,这是不尽合理的.本文以MCMP模型为基础,同时考虑WSN的QoS路由约束的模糊性、随机性和时变性,利用模糊随机规划和模糊随机过程理论进行分析和建模,从而把WSN多约束路由问题表示为模糊随机非线性规划问题,提出了一种新的模糊随机多约束多路径路由模型(FuzzyRandomMultiConstrainedMultiPathrouting,FRMCMP),用模糊随机变量刻画链路时延和可靠性的模糊性和随机性,用模糊概率表示QoS软约束[8],期望更真实地反映链路的不确定性因素.为了降低模型求解的计算复杂度,利用文献[7]的约束线性化思路和Nanda等人针对模糊机会约束规划问题提出的求解方法[9]把FRMCMP模型的模糊随机非线性约束转化为确定的线性约束.在此基础上,设计了相应的多项式时间复杂度路由算法FRMCMP.基于NS2的仿真实验结果表明,基于FRMCMP模型的路由算法在不同QoS约束要求下,具有良好的鲁棒性.在WSN路由中,同时考虑模糊性、随机性和时变性的优势在于:(1)链路质量的模糊感知更符合WSN的实际情况,而且用模糊概率描述QoS软约束比单个实数刻画QoS软约束更为合理.(2)通过在FRMCMP模型和路由算法中引入模糊数,利用模糊数的截集运算的置信水平调节Page3QoS约束的强弱程度,能够满足不同及时分组递交率和平均时延约束的WSN应用需求.(3)把FRMCMP模型中的QoS路由约束的模糊数退化为确定的实数,则FRMCMP模型相应地转化为MCMP模型,因此MCMP模型成为FRMCMP模型的特例,表明FRMCMP模型具有更好的自适应性.(4)用模糊随机过程描述QoS路由约束,能够更好地反映无线链路的QoS约束的时变性.本文第2节介绍WSN的QoS路由相关研究工作;第3节提出FRMCMP模型,并讨论FRMCMP模型模糊随机约束的线性化;第4节描述FRMCMP路由算法;第5节是仿真实验与结果分析;最后总结全文.2相关工作当前大多数WSN的路由算法将QoS的不确定性笼统地归结为单一的随机性或模糊性,分别采用概率论或模糊数学的方法进行研究[7,10-12].在同一个路由算法中既考虑QoS约束的随机性,又考虑其模糊性和时变性的研究工作目前尚未见文献报导.文献[7]与本文工作紧密相关.在文献[7]中,Huang等人基于链路状态信息将多约束多路径路由表示为时延和可靠性软约束下的随机优化问题,提出了一种基于本地邻居节点的分布式QoS路由模型,并利用已有的近似方法对模型进行了线性化,在满足QoS约束要求的前提下,降低了模型求解的复杂度.该文的MCMP模型形式描述为其中,min表示取最小值函数;xj是路由选择的决策变量,xj=1表示选择链路lij,xj=0表示不选择链路lij;N(i)是节点i的邻居节点集合;随机变量dij用于刻画链路lij的时延特征,λi是节点i一跳的时延要求,δ是时延软约束的概率阈值;随机变量rij用于刻画链路lij的可靠性特征,ζi是节点i一跳的可靠性要求,ν是可靠性软约束的概率阈值.文献[7]通过引入链路lij时延的随机变量dij的均值和方差以及单侧切比雪夫不等式进行概率估计,从而对模型的时延约束进行线性化,将时延非线性约束转化为决策变量xj的线性约束;通过引入链路lij可靠性的随机变量rij的均值和方差,假设链路lij上已完成传输的所有数据和是近似服从正态分布的随机变量,对约束式两边取对数运算并进行正态分布标准化,从而对模型的可靠性约束进行线性化,将可靠性非线性约束转化为决策变量xj的线性约束.在此基础上,设计了相应的MCMP路由算法.仿真结果验证了MCMP路由算法在及时分组递交率、平均时延、超期率和单个分组传输代价方面的有效性.但文献[7]的模型和路由算法仅仅刻画了链路时延和可靠性不确定性中的随机性和时变性,而忽略了同时存在的模糊性,这是很不合理的.文献[10]从模糊逻辑的角度提出了一种在线多路径路由算法,期望获得最长的网络生命周期,其基本思想是将节点剩余能量定义为语言变量,把网络生命周期定义为模糊集合,并将指定的语言变量值映射到对应模糊集合的隶属函数值,从而给出模糊生命周期的模糊隶属函数,通过模糊隶属函数刻画WSN生命周期的良好程度.仿真结果表明,该算法能够有效延长网络生命周期.文献[10]突出了WSN生命周期的模糊性,但是忽略了WSN生命周期同时存在的随机性和时变性,这仍然是不合理的.Nanda针对模糊机会约束规划问题提出了一种用于同时考虑模糊性和随机性的优化模型的求解方法,适用于约束中存在模糊随机变量的情形.其基本思路是通过定义模糊随机变量均值和方差的α截集(0α1)运算和模糊数的偏序关系,给出一种将不确定约束转化为确定非线性约束的方法,能够将FRMCMP模型的模糊随机QoS约束转化为确定的非线性约束.3FRMCMP模型3.1预备知识以下叙述建立在读者已具有模糊数学基本知识的基础上.本文涉及到的模糊数的偏序关系、模糊随机变量及其事件、均值与方差的α截集和独立性等概念和相关定理引用文献[9],在后续模型构造和约束线性化中被引用.定义1.设A和B是两个模糊数,其α截集是两个区间数,分别记为A[α]=[a-(α),a+(α)]和B[α]=[b-(α),b+(α)],其中a-(α)和a+(α)分别是A[α]的下限和上限,均为实数而且满足a-(α)Page4a+(α),b-(α)和b+(α)分别是B[α]的下限和上限,均为实数而且满足b-(α)b+(α),则两个模糊数之间的偏序关系定义为AB,当且仅当对任意α∈[0,1],有a+(α)b-(α).定义2.模糊随机变量是从概率空间到模糊变量集合的可测函数,是取值为模糊数的随机变量.设连续随机变量X的概率密度函数为f(x,θ),其中θ为刻画概率密度函数的参数.设模糊数θ是θ生成并用置信水平估计的不确定参数,则X为连续模糊随机变量,其概率密度函数为f(x,θ).定义3.设连续模糊随机变量X的概率密度函数为f(x,θ),θ[α]为模糊数θ的α截集,c和d均为实数,定义X的事件{cXd}的概率是一个模糊数,该事件概率的α截集为P(cXd)[α]=[p-(α),p+(α)]=∫d其中,区间下限p-(α)和上限p+(α)分别为p-(α)={min∫dp+(α)={max∫d定义4.设连续模糊随机变量X的概率密度函数为f(x,θ),mX(θ)为X对应的连续随机变量X的均值,定义X的均值mX(θ)和方差σ2数,mX(θ)和σ2mX(θ)[α]={∫dX(θ)[α]=∫d定义5.设连续模糊随机变量Xi(i=1,2,…,n)的联合密度函数为f(x1,x2,…,xn;θ),f(xi;θ)是Xi的边缘密度函数,则X1,X2,…,Xn是独立的当且仅当对任意θ∈θ[α],有f(x1,x2,…,xn;θ)=∏nf(xj,θ).j=1在上述定义的基础上,定理1和定理2分别给出模糊随机变量线性组合的均值和方差的性质.定理1.设X,Y和Z是连续模糊随机变量,X、Y和Z的均值分别为mX(θ)、mY(θ)和mZ(θ),a和b均为实数,且Z=aX+bY,则有mZ(θ)=σ2amX(θ)+bmY(θ).定理2.设X,Y和Z是连续模糊随机变量,X、Y和Z的方差分别为σ2Y是独立的,a和b均为实数,且Z=aX+bY,则有Z(θ)=a2σ2σ2定理3是模糊数函数截集的性质.定理3.设y=f(x1,x2,…,xn)为n元实连续函数,Ai为实数域上的有界闭模糊数(i=1,2,…,n),Ai[α]为Ai的α截集,则对α∈(0,1],有f(A1,A2,…,An)[α]=f(A1[α],A2[α],…,An[α]).3.2模型构造MCMP模型将链路的不确定性归结为随机性,主要表现在链路的时延和可靠性均为随时间变化的随机变量(即随机过程),时延和可靠性两个约束均使用概率表示为软约束.我们认为,WSN链路时延和可靠性同时具有随机性、模糊性和时变性,因此,引入模糊随机规划方法和模糊随机过程理论将MCMP模型扩展为FRMCMP模型.具体表现在:(1)将链路的时延和可靠性约束的不确定性区分为随机性和模糊性,采用模糊随机变量描述链路QoS的双重不确定性,时延和可靠性两个约束均采用模糊概率(模糊数)加以刻画.(2)在模糊和随机双重不确定性基础上考虑链路时延和可靠性的时变性,将WSN链路lij的时延和可靠性约束描述为模糊概率空间(Ω,,P)上的二元模糊随机过程{Dij(t,ω),Rij(t,ω),t∈T=(0,+)},其中,Ω为基本事件空间,为Ω上的事件域,P为可测空间(Ω,)上的模糊概率,t为时间参数,ω为基本事件,对任意t∈T(T是时间参数集),时延Dij(t,ω)和可靠性Rij(t,ω)约束均是(Ω,,P)上的模糊随机变量.与MCMP模型相似的是,本文也假设随机过程{Dij(t,ω),t∈T}和{Rij(t,ω),t∈T}在模糊概率空间(Ω,,P)上是相互独立的,不同的是链路时延和可靠性的值是模糊数而不是实数,从而能够更好地刻画链路的实际特征,并通过模糊数置信水平调节QoS约束的强弱程度,满足不同QoS约束的应用需求.为了简化讨论,我们在模型描述时省略t和ω.下面具体描述FRMCMP模型的构造过程.首先,FRMCMP模型和MCMP模型的目标函数是相同的.多路径路由可提高数据传输的可靠性,但每个节点向多条路径发送同一个分组,这样会增加节点的能量消耗.为了尽可能降低能量消耗,希望在满足QoS约束的前提下,每次路由选择的路径数Page5最少,于是目标函数为FRMCMP模型的时延约束在MCMP模型的基础上进行了扩展.为了同时描述链路时延的模糊和随机双重不确定性,引入模糊随机变量dij表示链路lij上的时延(模糊数),则xjdij表示未选择或选择链路lij进行数据传输需要的时延.由于链路lij上的时延是模糊数,则分组从源节点传输到节点i的实际时延Di也是模糊数,用三角模糊数(Di-,Di#,Di+)表示,其中Di-为时延模糊估计的下限,Di#为实测的时延,Di+为时延模糊估计的上限,Di-、Di#和Di+均为实数而且满足Di-Di#Di+.本文以下内容涉及到的三角模糊数均满足类似条件,不再重复说明.设D表示分组从源节点到Sink节点的时延要求,hi表示从节点i到Sink节点的最小跳数,则节点i到Sink节点的中间各跳节点平均分担的时延λi表示为λi作为xjdij的比较上限.于是,在节点i选择链路lij应满足的时延约束可表示为模糊随机变量dij的事件{xjdijλi},根据定义3,其概率为模糊数.引入模糊数δ表示事件{xjdijλi}发生至少应满足的概率阈值.于是,当λi>0时,节点i选择链路lij应满足的时延软约束为最后,我们采用与时延约束类似的思路来扩展MCMP模型中的可靠性约束.为了同时描述链路可靠性的模糊和随机双重不确定性,引入模糊随机变量rij表示链路lij上的可靠性(模糊数),则1-rij表示分组在链路lij上没有成功传输的概率(不可靠性).由于WSN链路本身可靠性不高,而且一条端到端的路径的可靠性由组成路径的各条链路的可靠性的乘积决定,因此单条路径的可靠性通常很难满足数据传输的可靠性要求,需要在源节点和每个中间节点确定由多少个前向邻居节点(即邻居节点j的hj小于当前节点i的hi)转发分组来保证可靠性约束.引入R表示分组从源节点到Sink节点的端到端的可靠性要求,Ri表示分组通过中间节点i的路径上分配到的可靠性要求.由于链路lij上的可靠性是模糊数,则Ri也是模糊数,用三角模糊数(Ri-,Ri#,Ri+)表示,其中Ri-为可靠性模糊估计的下限,Ri#为实测的可靠性,Ri+为可靠性模糊估计的上限.于是节点i到Sink节点的中间各跳节点平均分担的可靠性ζi表示为ζi作为节点i的可靠性约束的比较下限.节点i所分担的可靠性τi由通过节点i的多条链路保证,于是有用Rij表示链路lij分担的可靠性,ζi由通过节点i的多条链路保证,于是有对式(7)两边取对数有节点i应满足的可靠性约束可表示为模糊随机变量rij的事件{τiζi},根据定义3,其概率为模糊数.引入模糊数ν表示事件{τiζi}发生至少应满足的概率阈值,则节点i应满足的可靠性软约束为于是,FRMCMP模型概括为其中,xj=0或1,τi=1-∏j∈N(i)xj(1-rij),λi=(D-Di#)/hi,ζi=hiRi槡#.式(10)与式(1)中含义不同的符号总结如下:dij为同时刻画链路lij上时延模糊性和随机性的模糊随机变量,δ为时延约束满足的模糊概率阈值(模糊数);rij为同时刻画链路lij上可靠性的模糊性和随机性的模糊随机变量,ν为可靠性约束满足的模糊概率阈值(模糊数);D为数据分组从源节点到Sink节点的时延要求,Di#为分组从源节点到节点i的实际时延(三角模糊数最大隶属度对应的值),hi为节点i到Sink节点的最小跳数,Ri#为分组通过中间节点i的路径上分配到的可靠性要求(三角模糊数最大隶属度对应的值).3.3模型线性化3.3.1时延约束的线性化链路时延dij是未知分布的模糊随机变量,根据定义2,它们是取值为模糊数的随机变量,根据定义4,它们的均值和方差也是模糊数.设dij的均值mij、方差σ2ij和模糊概率阈值δ均为三角模糊数,分别记为mij=(m-,m#,m+),σ2ij=(σ2(δ-,δ#,δ+),其中m-、m#和m+分别是mij的下限、最大隶属度对应的值和上限,σ2的下限、最大隶属度对应的值和上限,δ-、δ#和δ+Page6分别是δ的下限、最大隶属度对应的值和上限,而且满足0δ-δ#δ+1.由三角模糊数截集运算可知,mij、σ2ij和δ的α截集mij[α]、σ2ij[α]和δ[α]分别为mij[α]=[m-+α(m#-m-),m+-α(m+-m#)]烄σ2ij[α]=[σ2烅δ[α]=[δ-+α(δ#-δ-),δ+-α(δ+-δ#烆为便于求解,对式(4)作如下变换.令U=xjdij,则式(4)可表示为由于xj的值只能是0或1,则有xj=x2均值mud和方差σ2ud的α截集分别为mud[α]和σ2ud[α],根据定理1和2,有由式(11)和式(13)得其中,mud-(α)和mud+(α)分别是mud[α]的下限和上限,σ2ud-(α)和σ2ud+(α)分别是σ2ud[α]的下限和上限.设U是模糊随机变量U对应的随机变量,f(u,θ)是U的概率密度函数,mud和σ2ud分别是U的均值和方差.对式(12)左端取截集,由定义3得P(Uλi)[α]=P(Uλi)|θ∈θ[α],∫{=1-P(Uλi)|θ∈θ[α],∫设ξ是随机变量,E(ξ)、Var(ξ)分别是ξ的均值和方差,η是实数,且η>0,由单侧切比雪夫不等式得则令则引入新的区间数(λi-mud)2对mud和σ2ud均是递减的,于是{σ2ud+(λi-mud)2(λi-mud)2为使式(12)成立,由式(16)、式(11)和定义1得(λi-mud+(α))2σ2ud+(α)+(λi-mud+(α))2δ+-α(δ+-δ#)(17)将式(14)右端的上限代入式(17)得其中,Cm=m+-α(m+-m#),Cσ2=σ2+-α(σ2+-#),Cp=δ+-α(δ+-δ#).σ2由于xj=x2其中,Cd=2λiCm-(Cm)2+Cp1-CpCσ2.由于式(19)中Cd是常数,因此这是线性约束,从而实现了时延约束的线性化.3.3.2可靠性约束的线性化链路lij的可靠性rij是未知分布的模糊随机变量,根据定义2,rij是取值为模糊数的随机变量.根据定义4,rij的均值和方差也是模糊数.将分组在链路lij上的一次传输看作一次试验,每次传输成功的概率可能不相同.可以将一次传输成功的概率看作为模糊数ε,则一次传输失败的概率为1-ε.设K表示链路lij上已经完成的分组传输的次数,分组在链路lij上每次传输是相互独立的,则链路lij上执行K次分组传输之后,成功传输的分组次数可用模糊随机变量nij表示,并且nij=Krij.由于rij的取值是模糊数,所以nij服从模糊二项分布,表示为nij~B(K,ε).考虑到正态分布的普遍性,我们利用模糊正态分布N(Kε,Kε(1-ε))近似表示模糊二项分布B(K,ε),以便于链路可靠性的计算[8].为使近似计算更合理,设ε为三角模糊数表示的模糊概率ε的最大隶属度对应的值,并且满足Kε>5和K(1-ε)>5,此时,用模糊正态分布近似表示模糊二项分布的误差较小.为了降低可靠性约束的计算复杂度,先定义如下概念.Page7定义6[13].设正三角模糊数Q=(a,b,c),LR型正三角模糊数Q=(b-a,b,c-b),其中a、b和c均为实数,而且满足0<abc,定义Q和Q的对数分别为lgQ=(lg(b/a),lgb,lg(c/b)),lgQ=(lga,lgb,lgc).对任意两个正三角模糊数Q1和Q2,则Q1和Q2的乘积的对数满足lg(Q1×Q2)=lgQ1+lgQ2.定义7.设区间数I=[a,b],其中a和b均为实数,而且满足0<ab,数a也可表示为[a,a],定义I的映射h(I)=[h(a),h(b)].定义8.设区间数序列Ii=[ai,bi],其中ai和bi均为实数,而且满足0<aibi,1iN,N是正整数,定义区间数序列之和∑N它仍然是一个区间数.在上述概念基础上,对可靠性约束作如下变换.把式(9)左端的模糊随机事件{τiζi}进一步加强为∪j∈N(i){xjrijxjRij},将Rij看作正三角模糊数(Rij,Rij,Rij),设Mij表示rij的均值,此时Rij满足假设分组在链路lij上每次传输的可靠性rij是相互独立的,于是有将式(21)代入式(9),则可靠性约束可表示成设式(22)左端模糊概率满足定义6,对式(22)两边取对数得当xj=0时,P(xjrijxjRij)=1,则lgP(xjrijxjRij)=0,因此lgP(xjrijxjRij)=xjlgP(rijRij);当xj=1时,P(xjrijxjRij)=P(rijRij),则lgP(xjrijxjRij)=lgP(rijRij),因此lgP(xjrijxjRij)=xjlgP(rijRij);综合xj取值的两种情形,则lgP(xjrijxjRij)=xjlgP(rijRij).于是,式(23)可写成令Aj=xjlgP(rijRij),则式(24)左端可写成∑j∈N(i)Aj.用|N(i)|表示节点i的邻居节点的个数,记f(A1,A2,…,A|N(i)|)=∑j∈N(i)Aj.设β∈(0,1],Aj[β]为Aj的β截集,由定理3得令Bj=P(rijRij),Bj[β]为Bj的β截集,则Aj=xjlgBj,把定义7中的映射h实例化为对数函数,则由定理3和定义7得将式(26)代入式(25)得f(A1,A2,…,A|N(i)|)[β]=∑j∈N(i)xjlg(Bj[β])(27)设rij的均值为Mij,rij的方差为ρ2ij,由3.3.2节已知nij服从模糊正态分布,得又Bj可变换为Bj=P(rij-Rij0)=P(nij-KRij0),令uj=nij-KRij,由定理1、2和式(28),则有uj~N(KMij-KRij,K2ρ2ij),设uj的均值Muj和方差ρ2uj的β截集分别为Muj[β]和ρ2uj[β],Mij和ρ2ij的β截集分别为Mij[β]和ρ2ij[β],根据定理1和2,则有设rij的均值Mij、rij的方差ρ2ij和式(22)右端模糊概率阈值ν均为三角模糊数,分别记为Mij=(M-,M#,M+),ρ2ij=(ρ2ν+),其中M-、M#和M+分别是Mij的下限、最大隶属度对应的值和上限,ρ2限、最大隶属度对应的值和上限,ν-、ν#和ν+分别是ν的下限、最大隶属度对应的值和上限,而且0<ν-ν#ν+1.由三角模糊数截集运算可知,Mij、ρ2ij和ν的β截集Mij[β]、ρ2ij[β]和ν[β]分别为Mij[β]=[M-+β(M#-M-),M+-β(M+-M#)]烄ρ2ij[β]=[ρ2烅ν[β]=[ν-+β(ν#-ν-),ν+-β(ν+-ν#烆由式(20)、式(30)和定义1,得由式(29)和式(30)得Muj[β]=[KM-+Kβ(M#-M-)-KRij,烄KM+-Kβ(M+-M#)-KRij]烅ρ2uj[β]=[K2ρ2K2ρ2烆由于Bj=P(uj0),由定义3得Bj[β]=P(uj0)[β]=[bj-(β),bj+(β)](33)用Φ表示正态分布函数,muj-(β)和muj+(β)分别表示Muj[β]的下限和上限,ρuj-(β)和ρuj+(β)分别表示均方差ρuj的β截集ρuj[β]的下限和上限,则Bj[β]Page8的下限bj-(β)和上限bj+(β)分别为将式(33)代入式(27),由定义7和定义8得式(24)左端的β截集为(∑j∈N(i)xjlgP(rijRij∑j∈N(i)xjlg(bj-(β[由式(30)、定理3和定义7,并把定义7中的映射h用对数函数实例化,则式(24)右端的β截集为(lgν)[β]=[lg(ν-+β(ν#-ν-)),lg(ν+-β(ν+-ν#))](36)为使式(24)成立,由式(35)、式(36)和定义1得∑j∈N(i)xjlg(bj-(β))lg(ν+-β(ν+-ν#))(37)将式(34)和式(32)代入式(37)整理得∑j∈N(i)xjlgΦCM-Rij其中,CM=M-+β(M#-M-),Cρ2=ρ2-).式(38)左端括号中是常数,因此这是线性约ρ2束,实现了可靠性约束的线性化.3.4链路时延和可靠性的时变性为了描述链路的时延和可靠性随时间变化的特征,我们扩展文献[7]的均方差加权公式,使其适用于三角模糊数的情形.把链路lij的时延用三角模糊数表示为dij=(dij-,dij#,dij+),其中dij-为时延模糊估计的下限,dij#为实测的时延,dij+为时延模糊估计的上限;dij的均方差表示为σij=(σ-,σ#,σ+),其中σ-为时延均方差模糊估计的下限,σ#为实际的时延均方差,σ+为时延均方差模糊估计的上限.类似地,链路lij的可靠性表示为rij=(rij-,rij#,rij+),其中rij-为可靠性模糊估计的下限,rij#为实测的可靠性,rij+为可靠性模糊估计的上限;rij的均方差表示为ρij=(ρ-,ρ#,ρ+),其中ρ-为可靠性均方差模糊估计的下限,ρ#为实际的可靠性均方差,ρ+为可靠性均方差模糊估计的上限.则链路lij的时延均方差计算公式为其中,wd用于平滑链路lij的时延的均方差变化程度,并且0wd1.链路lij的可靠性均方差计算公式为其中,wr用于平滑链路lij的可靠性的均方差变化程度,并且0wr1.链路lij的时延和可靠性的均方差的变化既受参数wd和wr的影响,也受模糊数置信水平α和β的影响.参数wd和wr取较小的值,可降低wd和wr对链路时延和可靠性均方差的影响,从而突出算法模糊性扩展的有效性.4FRMCMP算法FRMCMP路由算法建立在FRMCMP模型基础上,同时考虑了链路时延和可靠性的模糊性、随机性和时变性.以下先给出路由节点选择算法,在此基础上,设计模糊随机多约束多路径路由算法.算法1.路由节点选择.输入:端到端时延要求D,端到端可靠性要求R,当前节点i及其邻居列表N(i),链路lij的时延约束概率阈值δ,节点i的可靠性约束概率阈值ν,链路lij的时延约束模糊数置信水平α,节点i的可靠性约束模糊数置信水平β,链路lij的时延均方差更新计算权值wd,链路lij的可靠性均方差更新计算权值wr输出:节点i的满足约束的下一跳节点集合NQ(i)1.初始化,置N(i)中每个节点j对应的链路lij是否满足约束的标记FQoSij为-1,表示约束未被满足;2.将节点i的前向邻居节点标记为候选下一跳节点,即置FQoSij为0;的模糊均方差;3.根据式(3)和(5)分别计算λi和ζi;4.根据式(39)和(40)分别更新链路lij的时延和可靠性排序;5.根据式(19)判断FQoSij为0的链路lij是否满足时延约束,如果满足则标记节点j为满足时延约束的下一跳节点,即置FQoSij为1,否则FQoSij仍为0;6.将N(i)中FQoSij为1的链路按可靠性Rij由大到小7.根据式(38)和式(8)依次判断FQoSij为1的链路是否满足可靠性约束,如果满足则标记节点j为同时满足时延和可靠性约束的下一跳节点,即置FQoSij为2,否则FQoSij仍为1;Page9NQ(i),转步5;5.如果节点i的NQ(i)集合为空,则转步6;否则,从当前节点i向NQ(i)中的所有节点发送同一分组的副本,NQ(i)中所有节点入队列RNQ,转步7;6.如果节点i是源节点,则SUCC←0,转步8;否则,转步7;8.返回所有FQoSij为2的链路lij对应的节点集合NQ(i).算法1的正确性是容易验证的,其时间复杂度为O(|N(i)|log(|N(i)|)),其中|N(i)|表示节点i的邻居节点个数.以算法1为基础,设计模糊随机多约束多路径路由算法.算法2.模糊随机多约束多路径路由.输入:源节点,Sink节点,源节点待发送的数据分组输出:路由成功或失败1.置节点路由选择队列RNQ队列为空,置分组传输成功计数器SUCC为0;2.将源节点作为当前节点i,然后节点i入队列RNQ;3.从RNQ中取一个节点作为当前节点i,如果节点i是Sink节点,则SUCC←SUCC+1,转步3;否则,转步4;4.调用算法1,得到节点i的所有下一跳节点集合由失败.7.如果队列RNQ为空,则转步8;否则,转步3;8.如果SUCC的值大于等于1,则路由成功;否则,路算法2中调用了算法1,于是在算法1的基础上,算法2的正确性也是容易验证的,其在最坏情形下的时间复杂度不超过O(V×S2logS),其中V表示WSN的节点数,S表示所有节点的邻居节点个数的最大值.FRMCMP算法对MCMP算法的扩展体现在以下两点:(1)算法1中步5对时延约束判断使用扩展后的式(19),步7对可靠性约束判断使用扩展后的式(38),这两个线性约束式是引入模糊随机变量和模糊数后的FRMCMP模型线性化的结果.(2)算法1对链路时延和可靠性的比较阈值以及均方差计算公式进行适当的模糊性扩展,包括步3中λi和ζi分别使用新的式(3)和(5)进行计算,步4中σij和ρij更新分别使用扩展后的式(39)和(40)进行计算.FRMCMP算法对链路时延和可靠性约束的判断同时考虑模糊性、随机性和时变性,既能够更真实地反映链路的实际特点,又可以通过调整模糊数置信水平改变链路约束的强弱程度,从而更好地满足不同QoS约束的路由.MCMP算法在仿真时的性能指标与WSN路由算法God最为接近,God路由算法是在假设每个节点都知道链路时延和可靠性的精确信息的基础上进行路径选择的,普遍认为God算法是最优路由算法的评价参照文献[7].当置信水平α和β取1时,则FRMCMP算法中的式(19)和(38)就转化为MCMP模型线性化的结果.我们的仿真实验结果表明,FRMCMP算法在最好情形下比MCMP算法在及时分组递交率和平均时延方面具有明显的优势,而在最坏情形下二者比较接近.因此,可以认为FRMCMP算法具有更好的灵活性和自适应性,与最优算法God的性能接近.5仿真结果及分析5.1仿真目标和仿真环境为了验证FRMCMP算法的有效性,我们在满足端到端时延和可靠性约束的情形下,分析WSN的平均及时分组递交率、平均时延和单个分组传输代价.其中平均及时分组递交率是指Sink节点接收的满足端到端时延约束的分组数与源节点发送的分组数的比值;平均时延是指Sink节点收到的满足端到端时延约束的所有分组的端到端时延的平均值;单个分组传输代价是指单个分组的平均传输数.主要目标包括:(1)WSN在链路时延和可靠性的随机性基础上引入模糊性后,采用FRMCMP算法的平均及时分组递交率和平均时延与采用MCMP算法相比,随着链路QoS的模糊感知,是否具有较好的区间变化,是否更符合WSN的实际情况.(2)随着值为模糊数的链路时延和概率的置信水平的变化,WSN的平均及时分组递交率和平均时延在不同端到端时延约束下是否符合某种变化趋势,从而可方便地通过调整置信水平改变链路约束的强弱程度,更好地适应不同的WSN应用场景.(3)通过单个分组传输代价观察FRMCMP算法与MCMP算法相比,节点能量消耗是否有明显变化.仿真实验采用NS2,将传感器节点随机部署在矩形区域中,Sink节点定位于仿真区域的右下角,每次实验源节点在区域中随机产生,实验结果为5次实验的平均数据,仿真参数设置如表1所示.本文讨论在链路时延约束同时具有模糊和随机变化的情形下,采用FRMCMP算法的WSN在不同端到端时延要求下的平均及时分组递交率和平均时延,同时选用仿真和建模常用的均匀分布[7].端到端时延Page10要求在闭区间[470,530](单位为ms)变化,每隔10ms取一次值,共有7个时延要求等级.链路时延在闭区间[1,40](单位为ms)随机变化,链路时延上限分两种情况:明显小于给定时延40ms的三角模糊数(36,36,40)和略微大于给定时延40ms的三角模糊数(40,40,42).模糊概率也分两种情形:明显小于指定概率阈值0.95的三角模糊数(0.85,0.85,0.95)和略微大于指定概率阈值0.95的三角模糊数(0.95,0.95,0.99).置信水平α在闭区间[0,1]取值,间隔为0.2,共有6个等级水平.链路可靠性在闭区间[0.8,1]内随机变化,可靠性约束的概率阈值为0.95.由于时延约束的线性化过程利用了切比雪夫不等式,因此时延约束的概率阈值需通过乘以小于1的正数因子进行调节,从而得到路由问题的可行解[7].5.2仿真结果为了方便叙述,FRMCMP算法在链路QoS约束和模糊概率变化较大,即链路时延上限明显小于给定时延,模糊概率明显小于指定概率阈值的情形用case1表示;在链路QoS约束和模糊概率变化较小,即链路时延上限略微大于给定时延,模糊概率略微大于指定概率阈值的情形用case2表示.图1和图2分别给出了WSN在链路QoS约束和模糊概率变化情形下,当模糊数置信水平α=0.8时,在不同端到端时延要求下,采用FRMCMP算法的及时分组递交率和平均时延的变化情况,并与采用MCMP算法的及时分组递交率和平均时延进行比较.从图1可看出,与采用MCMP算法相比,采用FRMCMP算法的及时分组递交率随着链路QoS的模糊感知具有较好的区间变化,尤其在case1情形下效果更为明显.随着端到端时延要求的增大,采用FRMCMP算法的及时分组递交率受满足时延约束的概率要求和链路时延模糊变化影响的程度逐渐减弱.从图2可看出,采用FRMCMP算法的平均时延在65ms附近的区间内变化,较小幅度地扩展了MCMP算法的平均时延.随着端到端时延要求的增大,采用FRMCMP算法的平均时延受满足时延约束的概率要求和链路时延模糊变化影响的程度也逐渐减弱,但与及时分组递交率相比,变化幅度较小.及时分组递交率和平均时延受端到端时延要求、满足时延约束的概率要求和链路时延变化三个因素的影响.当端到端时延要求增大,满足时延约束的概率要求降低,则时延约束放松,会有更多的分组被转发;链路时延变化范围小,意味着链路质量稳定,于是及时分组递交率增大.但更多分组会导致较多的冲突和排队等待,分组的平均时延也会增加.图3和图4分别给出了采用FRMCMP算法的WSN在case1情形下,当α在0到1之间变化时,在不同端到端时延要求下的及时分组递交率和平均时延的变化情况.从图3可看出,当α水平从0逐渐增大到1时,采用FRMCMP算法的WSN在不同时延要求下的及时分组递交率逐渐增大.当端到端时延要求为470ms时,采用FRMCMP算法的及时分组递交率随着α的增大明显提高;当端到端时延要求为510ms时,采用FRMCMP算法的及时分组递交率则仅有细微变化.从图4可看出,当α水平从0逐渐Page11增大到1时,采用FRMCMP算法的WSN在不同时延要求下的平均时延逐渐增大.当端到端时延要求从470ms增大到510ms时,采用FRMCMP算法的平均时延在小区间内变化,并随着α的增大而进一步减小.随着α的增大,满足时延约束的概率要求降低,链路时延变化范围缩小,于是及时分组递交率就会提高,但更多分组冲突和排队会增加平均时延.随着端到端时延要求的增大,时延约束放松,则降低了及时分组递交率和平均时延受满足时延约束的概率要求和链路时延模糊变化影响的程度.图3置信水平对及时分组递交率的影响(FRMCMP:case1)图4置信水平对平均时延的影响(FRMCMP:case1)图5和图6分别给出了采用FRMCMP算法的WSN在case2情形下,当α在0到1之间变化时,在不同端到端时延要求下的及时分组递交率和平均时延的变化情况.从图5可看出,当α水平从0逐渐增大到1时,采用FRMCMP算法的WSN在不同时延要求下的及时分组递交率逐渐增大,但低于case1情形的值.当端到端时延要求为510ms和470ms时,采用FRMCMP算法的及时分组递交率随着α的增大仅有略微提高;当端到端时延要求为490ms时,采用FRMCMP算法的及时分组递交率则明显提高.虽然端到端时延要求的增大会降低及时分组递交率受满足时延约束的概率要求和链路时延模糊变化影响的程度,但端到端时延要求为470ms是比较强的约束,此时发送的数据分组有限,而且满足时延约束的概率要求和链路时延变化范围较小,因此,此时的及时分组递交率受满足时延约束的概率要求和链路时延模糊变化的影响不大.从图6可看出,当α水平从0逐渐增大到1时,采用FRMCMP算法的WSN在端到端时延要求为490ms和510ms下的平均时延逐渐增大.但是,当端到端时延要求为470ms时,采用FRMCMP算法的平均时延在α为0和0.2时出现了异常波动.实际上,当α为0和0.2时,由于端到端时延要求为470ms和α的取值导致时延约束的增强,因此,随机选择的个别源节点会无法发送分组或仅发送极少数分组到Sink节点,前者导致统计结果上平均时延的减小,后者由于Sink节点收到的极少数分组具有较大时延,从而造成统计结果上平均时延的增大.这也说明在满足不同QoS需求的应用时,端到端时延要求和模糊数置信水平的调整需要综合考虑.图5置信水平对及时分组递交率的影响(FRMCMP:case2)图6置信水平对平均时延的影响(FRMCMP:case2)表2给出了FRMCMP算法和MCMP算法的单个分组传输代价.从表2可看出,二者的单个分组平均传输数没有明显的变化,因此传输一个分组的Page12能量消耗可认为在相同的水平.算法FRMCMPcase1,α=0.8MCMP6结论本文在考虑WSN链路时延和可靠性的不确定性时,区分链路QoS的模糊性、随机性和时变性,引入模糊随机变量,在MCMP模型的基础上给出具有双重不确定性的FRMCMP模型,并设计了相应的路由算法.考虑到WSN节点的能量和计算能力有限,完成了模糊随机约束的线性化.仿真实验结果验证了FRMCMP算法的有效性和实用性,随着QoS约束的模糊感知,其及时分组递交率和平均时延两个性能指标比MCMP算法具有更好的区间变化,通过α置信水平的变化可在不同程度上调节及时分组递交率和平均时延,从而更好地满足不同WSN应用场景的需要.本文的工作初步验证了区分WSN链路QoS不确定性中模糊性与随机性的思路和方法的有效性与合理性.在后续工作中,我们将针对WSN链路间干扰同样存在模糊和随机双重不确定性的事实,探索新的模型和方法,分析区分模糊性和随机性的WSN链路间的相互干扰对多种性能指标带来的影响,从而更好地满足不同的WSN应用.致谢感谢本文审稿专家和编辑所提出的宝贵意见和建议!
