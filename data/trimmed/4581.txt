Page1PhysiolCompToolkit:一个生理计算交互工具箱的分析与设计1)(中国科学院软件研究所人机交互北京市重点实验室北京100190)2)(中国科学院大学计算机与控制学院北京100049)摘要人机交互技术与生理计算技术的结合成为计算机应用领域的一个重要方向.然而,基于生理计算的交互应用研究和开发过程普遍存在缺乏生理计算知识、硬件种类繁杂、软件逻辑和平台复杂度高等难题,为此我们设计了一个生理计算交互工具箱PhysiolCompToolkit,提出了生理计算交互逻辑的设计框架,定义了较为完善的交互信息处理流程以及组件设计方法,并且以该工具箱中手部动作和生理状态监测组件为例深入讨论了交互组件的设计方法.研究人员可以使用PhysiolCompToolkit方便地建立生理计算交互应用框架,选择使用工具箱中提供的交互组件快速高效地完成系统搭建和应用开发.关键词人机交互;生理计算;交互工具箱;交互组件1引言随着计算机应用和交互领域的发展和成熟,越来越多的新技术被应用到人机交互技术领域,其他学科的研究成果也被融入其中.生理计算(Physio-logicalComputing,PhysiolComp)作为可反应人体内在本质的生理活动的重要手段,在近几年得到了人机交互技术领域的高度关注.软硬件技术的发展也推动生理计算从医疗专业性走向大众化,从单纯的医疗用途转变为一种重要的人机交互技术.由于其具有可穿戴性、隐式交互性、移动性和可靠性,可以被大多数交互式应用和生理信息驱动式应用所支持和使用的特点,现已逐步成为未来人机交互技术领域一个重要方向.在国内外,已经有一些关于生理计算理论和方法应用于人机交互技术领域的研究,比如Benko等人[1]提出利用肌肉电作为交互桌面的补充,Farry等人[2]和Peleg等人[3]提出使用肌肉电作为输入控制机械手.现在的机器学习和模式识别等技术也让肌肉电手势成为可能[4].但是,纵观这些已有的研究工作,大多比较松散,没有形成一个统一、可适配和综合性的系统和工具箱.研究人员在研究和开发一个新的交互任务及应用的时候,需要学习大量生理计算知识,例如如何分析心电中各个波段、处理和提取脑电中各种频率波形信息等.同时,由于生理计算设备种类和品牌较多,各种设备之间并没有一致的数据协议,因此开发人员需要从硬件层到软件层进行重新适配、重新设计和重新开发等工作,门槛较高且需要大量的工作量和时间.除此之外,由于各种生理平台和传感器的差异和不兼容问题,很多早期工作并不能被后期工作所使用,从而需要重新迭代开发,浪费了大量的人力物力.因此,需要分析和设计一个综合性的生理计算交互工具箱.此工具箱可以对多种生理信号采集硬件设备进行适配,形成生理信号处理和分析模块及平台,为上层基于生理计算的应用提供交互逻辑支持.我们设计了这样的工具箱,屏蔽了应用的复杂逻辑,将重复性的复杂逻辑包含在工具箱内部,而基于该工具箱开发的应用将具有较低的复杂度,研究人员可以更加高效、便捷地开展人机交互新技术研究,开发人员可以快速设计开发基于生理计算的实用人机交互技术应用.本文首先对工具箱的整体结构进行了全局的设计,提出了生理计算交互工具箱的体系结构,明确了工具箱的设计准则.其次着重分析了生理计算用于交互设计的原语生成方法,以及如何在交互任务生成之前对交互原语进行解析,分析了基于生理计算交互工具箱的交互任务生成和分派框架.然后基于以上分析和设计的生理计算交互工具箱体系结构,以手部动作和用户状态监测两个组件为例,说明了工具箱中组件的分析和结构设计方法.最后提出了基于生理计算交互工具箱的人机交互应用实例,说明如何使用工具箱来高效地、简单地设计实用人机交互系统和应用,并提炼应用构造要点,指导更多交互应用的设计和开发.2生理计算及相关工作2.1生理计算理论生理计算是一种人体生理与计算机系统直接沟通和交流的方式,最典型的生理计算方式有脑机接口(Brain-ComputerInterface,BCI)[5]、肌肉-机接口(Muscle-ComputerInterface,MuCI)[4]等.生理计算的目标是将人类神经系统的生物信号实时转换为计算机系统的输入,来增强和丰富计算机系统的交互体验[6].现代的生理传感器可以感知中枢神经系统(如脑、脊柱)、躯体神经系统(如肌肉)、植物性神经系统(如腺体和器官)等部位的生理信号[6].首先,在脑电图(Electroencephalogram,EEG)中,几种特殊频率的波(如Alpha波、Beta波、Delta波、Theta波)可以用来监测用户完成任务的参与度,评估任务对于用户的难度以及用户完成任务时的注意力情况[7],进而可以利用用户脑波中体现的工作强度信息动态调整人机交互系统的复杂程度和任务难度来提升用户参与度和使用表现[8].除了特殊波段的波形,事件诱发电位(Event-RelatedPotentials,ERPs)也是脑电生理计算的重要组成部分,通过大脑皮层特殊部位的事件诱发电位可以在用户做动作之前就感知到用户的运动意愿[9],这些技术对于以用户为中心的人机交互系统有巨大潜力.其次,通过在皮肤上放置导电电极,可以记录肌肉运动产生的电信号———肌肉电(Electromyogram,EMG),这些电信号可以被用来推断用户肌肉的收缩和放松程度,进而结合多个肌肉群的数据推断用户的动作.研究表明,肌肉电Page3可以很好地预测运动倾向[10].除了运动功能相关的肌肉电,也有研究发现,面部的肌肉电可以用来反映用户的愉悦情况[11].另外,眼电(Electrooculogram,EOG)是一种感知眼睛运动的重要手段,通过检测角膜和视网膜之间的电位差来判断眼球的移动,Vertegaal[12]在现在用户需要关注的移动设备越来越多的情况下提出了AttentiveUserInterfaces,然后如何判断用户对什么设备或电子标识感兴趣,很大一块需要眼动的技术来辅助识别.有研究表明,瞳孔大小的变化和情感计算的关联性[13],同时,眼电可以检测的眨眼动作被证明与用户正在完成的任务[14]和用户疲劳程度[15]有关.然后,心电(Electrocardiogram,ECG)是生理计算领域中普通人日常接触相对最多的一种生理计算方法.从心电信号中,我们可以检测到用户的心率(HeartRate)与计算心率变异性(HeartRateVariability)[16].用户的心率不但与运动情况相关,而且和用户的情绪[17]及驾驶中的认知情况[18]有关联,这些运动、情绪和认知相关的要素,可以给基于生理计算的人机交互技术提供支持.比如在用户玩游戏的过程中,通过用户心率的变化情况来调整游戏的难度[19].最后,呼吸模式、皮电反应、血压等也作为生理计算的重要理论可以被用于多通道人机交互技术的设计中.2.2人机交互技术中的生理计算人机交互技术中,多通道交互以及上下文感知具有举足轻重的地位[20].生理计算作为多通道交互和感知中的重要环节,已有大量相关研究.近几年,微软雷德蒙德研究院做了一些关于肌肉电手势的研究,开始将肌肉电与人机交互技术相结合.Saponas等人[4]首先展示了肌肉-机接口的可行性,使用了一个可佩带在前臂的一个10导肌肉电腕带,由BioSemiActiveTwo改装而来,在实验中请被试做4组任务,分别为:(1)用食指或中指做伸展或弯曲的动作;(2)使用5个手指做敲击桌面的动作;(3)使用食指或中指用力或轻轻按压桌面;(4)抬起5个手指头.作者使用了两种方式来进行手势分类,按照单个时间窗口分类和按照时间窗口投票方式分类,其结果正确率平均达到80.5%,说明肌肉电用于肌肉-机接口交互是可行的,但准确率有待提高.Benko等人[1]将肌肉电的识别交互技术与交互桌面相结合,传统交互桌面只有在手指触碰到桌面后才会有相应动作,但是,通过结合肌肉电交互,计算机系统可以得知是哪个手指在触碰桌面,用了多大的力,而且可以在用户手指离开桌面的情况下,进行一定的交互动作.文章中识别了4种不同的肌肉电手势:触摸压力、手指判别、捏合手势和用力挥动手势.最终实验说明,用户可以较为准确地利用肌肉电与交互桌面进行交互.以上工作都需要用户在实验环境下完成,对于实际的应用有一定的限制,所以有工作研究在非实验环境下,如何利用手势与环境及计算机进行交互[21],设计了一套可以在真实生活场景中使用的手势集,甚至手在做一件另外的事,而不必将手放在桌子上,大大提高了肌肉点交互技术的可用性.还有工作从用户体验和穿戴舒适性方面进行了研究[22],在肌肉电感知硬件和交互模型方面进行了创新和优化,提升用户的交互体验.通过用户生理信号,提取用户生理状态,对用户交互行为进行一定的提示和引导也成为热点话题.研究认为通过脑电设备监测少年儿童在阅读时专心程度,对阅读材料进行一定的调整,可以提高他们的阅读专注度[23].还有研究通过分析脑电信息获知用户的情绪状态,使用一些可穿戴设备自然地对用户进行一定的反馈,如手链的颜色变化反馈等,从而达到帮助用户调整自身情绪的目的[24].另外,生理计算还被应用到其他交互应用中去,比如用于肌肉控制缺失的康复训练,四肢瘫痪病人用脸部肌肉电控制计算机[25],用于假肢的控制逻辑[26].2.3软件工具箱平台随着人们交互需求的提升,软件被设计得越来越庞大,逻辑关系越来越复杂,传感器等多种硬件设备和跨领域跨学科的知识被越来越多地融合在一起,Hartmann等人[27]研究了如何让系统设计人员将直接的操作和模式识别技术结合起来,通过直观的操作对泛化的底层交互逻辑进行设计与修改,隐藏了模式识别等比较专业算法的逻辑细节,达到通过表现层设计程序交互逻辑,实现快速迭代开发的目的.他们从一个比较宏观的角度阐述了这种新型软件设计方法,并形成了初步的软件工具箱平台.在笔式用户界面的设计方面,PIBGToolkit[28]以笔交互为研究对象,具体提出了适用于笔式用户界面的交互范式,定义了纸、框等多种交互组件,形成了笔式应用开发平台的整体结构和机制,可以帮助开发者更关注于笔式用户界面的设计和开发,而更多的细节由工具箱和开发平台去处理.文献[29]针对触觉设备及开发方向多样化的探索现状,从与认知空Page4间相对应的计算空间角度,提出了一种融合触、听、视觉的多通道交互分层处理模型,把界面设计从程序核心功能中分离出来,提供了灵活的可扩展空间,简化了相应的多通道交互设计和研究工作.所以不论是在传统软件设计方法领域还是在笔式用户界面及触觉交互等领域,研究人员都尝试构建统一的工具平台来简化应用逻辑的设计.从以上相关研究工作来看,作为计算机理解人类行为的另一个重要方法,基于生理计算的人机交互技术将成为下一代人机交互技术的发展方向.但是这些基于生理计算理论和方法的交互应用还相对比较独立,没有形成一个统一的结构设计方法,导致了很高的入门门槛、学习成本和开发成本.基于此,本文研究并提出了一个生理计算交互工具箱PhysiolCompToolkit,可以让研究和开发人员高效简单地利用工具箱中的组件实现交互研究或交互应用.PhysiolCompToolkit中包含手部动作和生理状态监测等多种交互组件,定义了较为完善的交互信息处理流程以及组件设计方法.研究和开发人员可以使用PhysiolCompToolkit建立生理计算交互应用框架,选择使用工具箱中提供的交互组件快速迭代开发,并高效完成系统搭建.3PhysiolCompToolkit体系结构设计3.1总体设计PhysiolCompToolkit是一种基于生理计算的综合开发交互工具箱.它不仅可以对多种生理信号采集硬件设备进行适配,方便对硬件设备进行扩展,而且集成了生理计算应用于人机交互设计的算法和分析处理模块,并且可以根据用户需求对相关模块进行自定义,方便、快速、高效地生成交互应用,让研究人员和开发人员快捷高效地进行基于生理计算的人机交互新技术的研究和应用开发.它可以实现多设备快速适配、通信协议的统一、逻辑单元的复用、算法的综合和应用程序的快速开发等.工具箱主要由一系列的交互组件组成.定义1.交互组件.一系列的生理采集设备的抽象、通信协议的转换、逻辑处理、交互原语分析、交互任务分类、交互反馈等环节综合组成的完成特定行为逻辑的系统单元.这些组件被统一包含在一个设计系统里面,并进行有机的组合、配置和融合,形成生理计算交互工具箱.研究人员和开发者可以利用这个工具箱进行交互任务设计和应用实例开发,把精力集中于交互逻辑的制定和交互功能的实现上,而不必关注软硬件体系结构的过多细节以及详细的生理计算领域的专业知识.要达到这个目标,首先需要对生理信号采集设备所能提供的数据进行统一的综合定义和处理,生理信号采集设备可以提供什么样的数据,多种型号设备产生的数据如何采用一个一致的协议和格式来表示、传输、保存和处理.其次,对用户在生理计算维度的交互原语进行分析,从交互信息(生理信号)中提取和分析用户的生理计算交互原语.定义2.交互原语.人体生理信号(交互信息)的最小可处理单元,是各种生理信号特征的综合表征,体现了交互信息中的信息组成,可被解析成用户状态及交互意图等.定义3.交互任务.通过分析用户生理交互原语,生成的针对于用户的反馈或系统自身逻辑的调整命令.是对用户生理信息输入的响应,被交互应用用于交互逻辑的构造和交互方式的设计.在得到交互原语后,需要基于这些交互原语,结合用户需求及意图和当前交互环境和上下文设计相应的交互任务,分析各个任务需要用到哪些交互原语,以及这些交互原语之间如何组合,如何搭配,从而达到理解用户交互意图,对交互环境和上下文做出正确调整,对用户做出正确反馈决策的目的.最后,基于以上的设计,提出一个生理计算交互工具箱,包含处理设备、通信、逻辑、交互原语和交互任务等环节的交互组件.此工具箱让用户高效地、简单地使用这些实用工具来实现最终的应用,从而达到让研究人员和开发者不必了解底层系统实现和过多生理计算专业知识,而只需要关注具体应用程序的需求和实现的目的.根据以上需求,可以使用一个层次结构来表示基于生理计算的人机交互系统的框架.在此框架上进行设备、数据、算法、逻辑的处理和各种交互工具的设计.此框架结构主要包含生理计算硬件层、数据通信和交互信息产生层、交互原语分析层、交互任务识别层、交互组件封装层和面向最终用户的生理计算交互应用等部分.如图1所示.PhysiolCompToolkit中交互组件的设计需要遵从该框架结构,满足其定义的设计原则.生理信息硬件层.可以采集人体生理信号的设Page5备构成了生理信息硬件层,这些硬件包括采集人体心电(ECG)、肌电(EMG)、脑电(EEG)等生理电信号的采集设备.通过对这些信号的分析和处理,可以监测人体一些隐式状态,也可以做一些显式操控,这些隐式状态和显式操控的组合和实现共同支撑了生理计算的交互应用.数据通信和交互信息产生层.在数据通信和交互信息产生层,负责生理信号采集的各种硬件设备采集到人体生理信号之后,将数据传输到上位机.上位机对各设备采集的生理信号进行初步的组合和过滤,有目的地调整相应信号的采样频率,调度各路信号的时序,对可能出现的部分数据缺失和错误进行判断和处理,最后根据一定的规则将这些原始数据打包综合,使其成为可以供分析和识别的交互信息.该层的另一个重要作用是对各种生理信号采集设备进行适配,在引入一个新的设备时,只需要对该层进行一定的修改和定制就可以满足新硬件在系统中的使用.这解决了生理计算硬件种类繁杂的问题.交互原语分析层.交互原语分析层是交互逻辑产生与分析阶段重要的一步,它将一系列生理计算理论和生理信号处理方法应用到已经归一化、格式统一的交互信息上,提取出可以用于交互任务识别的交互原语,如心率变异性、肌肉受力情况和肌肉群收缩情况等.这些信息的提取需要大量的生理计算相关知识,对于开发人员来说,需要较高门槛.工具箱通过此层对交互原语分析进行封装,解决了开发过程中缺乏生理计算知识的问题.交互任务识别层.交互任务识别层是交互逻辑产生于分析阶段另一个重要的步骤.这一层包含很多机器学习、数据挖掘、模式识别的理论和方法,对相对初级的交互原语进行组合和进一步的分析、识别,产生一个个可以独立使用或组合的交互任务.这些交互任务有的将作为交互环境和上下文处理模块的输入,实时调整系统和环境状态,实时改变交互上下文,对后续交互信息的产生、交互原语的分析和交互任务的识别形成反馈.另一部分将直接作为系统输出提供给用户.交互组件控制层.将交互任务识别层分析和识别得到的交互任务组合和封装成一个个有特定功能的生理计算交互组件,并对组件的逻辑结构进行综合控制,形成交互工具封装层.此层作为PhysiolCompToolkit的表现层,在一个较高的层次展示生理计算理论用于人机交互技术的方法,并且将生理信号处理理论与方法、生理计算交互原语识别等复杂的过程封装和隐藏起来,形成较为方便使用的工具箱,供应用开发和研究使用.它降低了最终应用开发的复杂度,提高复杂逻辑的复用性.基于多种交互组件,研究人员和开发人员可以方便地以一个较低的门槛接触、操作和使用生理计算来进行人机交互技术的研究和应用开发.在PhysiolCompToolkit中,交互逻辑的产生和分析是重中之重,其中的交互原语分析和交互任务识别又是核心.这两部分的存在,使得工具箱的最终用户不必了解过多的生理计算理论和方法,也不必了解过多的机器学习、数据挖掘和模式识别算法和实现方法,可以直接使用工具箱中的组件和工具实现目标应用.下文将着重分析生理计算的交互原语和交互任务的设计流程.3.2交互原语分析工具箱体系结构设计框架的一个核心是交互原语分析模型.它将由硬件采集传输来并进行过初步处理的生理计算交互信息转换成可以供交互任务识别的交互原语.如图2所示.生理计算交互原语是生理计算的最小计算和识别单元.以心电为例,各种心电采集硬件设备传输到上位机的一般为原始心电信号,正常的心电信号由P、Q、R、S、T和U等波形组成.QRS波群的振幅较高,所以R-R间期一般用来计算用户的心率(HeartRate,HR),再由用户R-R间期变化情况来计算心率变异性(HeartRateVariability,HRV).所以从心电信号中,我们可以提取到很多有价值的反应人体生理状态的信息.这些生理信息将作为生理计算交互技术的最小计算和识别单元,统称为心电信号交互原语.在人机交互技术的研究中,我们主要关注用户Page6的心电、肌电和脑电.从人体电信号中提取心电原语(EcgPrimitive)、肌电原语(EmgPrimitive)和脑电原语(EegPrimitive)做进一步的分析和识别.下面表达式表示了交互原语(InteractionPrimitive)的结构以及心电原语中包含的主要成分.InteractionPrimitive={[EcgPrimitive,]EcgPrimitive=HeartRate|RR_Interval|HRV|在生理计算交互原语的提取和分析过程中,主要任务是处理生理信号,由两个单元分别做基础信号处理和高级信号处理.在基础信号处理单元中,主要是根据生理计算的信号处理理论和用户在PhysiolCompToolkit中对处理流程和方法的自定义,对原始的信号在时域和频域进行信号处理和分析.从经过预处理的原始生理信号中直接提取有用的可以作为用户状态和交互分析的特征,比如波峰波谷信息、特殊波段信息、频率分布信息、生理计算理论中提及的波形信息等.在高级信号处理单元中,将使用初级信号处理单元的结果作进一步的分析和计算.它也包括时域分析和频域分析两部分,只是在实际处理中,这两部分信息都采用信号模板匹配来进行处理,将输入的时域信号或者频域分布信息和信号模板集中的模板进行对比,找出最佳匹配,并生成更为高级的交互原语.这个模板集是一个可扩展的结构,用户可以根据新的设备、新交互需求、新算法逻辑对模板集进行添加和修改,从而保证了整个系统的可扩展性.PrimitiveExtraction=BasicProcessingUnit,BasicProcessingUnit=>BasicPrimitive;AdvancedProcessingUnit=>AdvancedPrimitive;BasicPrimitive={Peak,Trough,Max,Min,Mean,AdvancedPrimitive={HandGestures,αBrainWave,上述表达式说明了交互原语提取结构,交互原语提取(=>)的逻辑关系以及基础原语(BasicPrimi-tive)和高级原语(AdvancedPrimitive)的主要组成.在交互原语分析和提取完毕以后,这些原语将被输入到交互任务处理单元,同时也直接输出到交互环境和系统中,作为下一时刻的交互原语提取的上下文信息,形成交互式的反馈,以便后续时刻可以更加准确地、快速地、方便地对交互原语进行分析和提取.3.3交互任务设计工具箱体系结构设计框架的另一个核心是交互任务的识别和生成模型.这个模型以交互原语作为输入,对交互原语进行识别和计算后,根据交互环境和上下文信息,生成新的交互任务.其结构如图3所示.生理计算交互任务是指生理计算系统对人体生理信息进行一系列处理和识别之后,产生的可直接用于人机交互系统处理的任务,比如生理紧张程度、手指点击手势、思维专注程度等.以肌电为例,人体大脑在接收到外界输入后进行判断,脑神经产生电信号,通过脊柱传到身体的各个肌肉群,肌肉产生收缩运动,从而控制我们身体的运动.所以大部分肌电反应了人体的运动情况,可以从中提取用户的交互手势信息.这些肌电信息的产生要先于用户实际的身体动作,可以在用户实际做动作之前就感知到用户的手势和意图,而且相对于语音及视觉等交互方式,它更加注重用户的隐私,对周围环境的要求更低,用户与系统的交互更加和谐自然.在PhysiolCompToolkit中,用户可以通过工具组件,对如何处理这些交互任务进行定义.在交互任务生成之前,首先要对从交互原语分析层输入的交互原语进行理解和处理.在本层中,首先将交互原语分为两大类,学习型原语和数值型原语,使用不同的处理单元分别处理.学习型原语是指需要通过机器学习和模式识别等技术进行一定的学习以后,完成分类和匹配才能得到交互任务的原语,比如用户的手势,是食指做了一个敲击的动作,还是Page7图3生理计算交互任务生成过程中指做了一个捏合的动作等.在学习型原语处理过程中,将用户当前生理计算交互原语与系统事先训练的状态集和手势集中的用户生理状态和手势动作进行匹配预测,判断检测到的是用户的什么类型、种类及属性的生理信息,从而系统进行判断产生相应的交互任务.数值型原语是指本身就有一定交互意义的原语,比如心电中的HRV可以体现人体的紧张程度,脑电中的α波可以体现放松状态,β波可以体现脑神经专注情况等.在数值型原语处理过程中,将交互原语与系统中预先设定的生理计算指标库进行对比,判断是否存在这样的指标,如果存在,数值上在什么范围,针对存在与否和不同的范围,系统将生成不同的交互任务.交互任务生成单元生成了两种类型的交互任务,一是系统型交互任务,是对交互环境和上下文的输入,交互环境和系统收到这种交互任务后,将调整自身的状态,并将这些信息用于系统自身的学习和对用户的理解;另一种是用户型交互任务,将产生对用户的实时反馈,使用户能够实时掌握自己的生理状态并获得丰富的生理计算交互体验.4PhysiolCompToolkit组件结构设计PhysiolCompToolkit中包含很多处理各种生理计算信息、交互原语、交互任务的工具.在第3节中针对这些组件的设计原则和体系结构做出了详细的定义,本节以手部/上肢动作组件和生理状态监测组件为例,介绍PhysiolCompToolkit中组件结构的设计方法.4.1手部/上肢动作组件结构设计人体大部分动作都由手和上肢来完成,手部和上肢交互动作的处理是一个非常重要的环节,手部/上肢动作组件也是最为复杂的组件之一,几乎包含除生理状态监测特有的模块外所有的PhysiolCompToolkit设计流程,在组件结构设计方法中非常有代表性和参考性.手部动作组件的信号来源主要是肌电的采集设备,目前已有一些硬件厂商提供商用级、研究级和医疗级的传感设备.一个或多个这样的设备采集了人体肌电信号以后,传输到上位机进行信息的综合处理.如果有多种型号的设备,则在处理波形产生交互信息之前对各设备的采样频率进行一定的适配和调整,以满足计算平台的统一性,这一点保证了平台可以适配多种不同的采集设备.包含用户手部动作的生理数据经过初步处理得到手部动作交互信息后,将进入手部动作组件的核心流程,分析结构和流程如图4所示.按照PhysiolCompToolkit的设计要求,手部动作组件的核心是交互原语生成、处理和交互任务生成和处理单元.用户在实际使用Physiol-CompToolkit设计出的应用时,PhysiolComp平台中所有开发者设计的组件都会同时捕获用户的生理信息,并各自按照自身设计生成交互任务.这些任务之间有预先制定的可扩展优先级判断模块,而手部动作的优先级比一般任务优先级高,如果手部动作组件根据当前上下文和交互环境信息和手势信息检测到了合法的交互任务,将对这个交互任务进行解析和分派,根据任务类型对任务进行独占或与其它交互组件共享.与此同时,实时通知交互环境和上下文,以采取相应的更新或触发相应的操作.Page8图4手部/上肢动作组件设计流程4.2生理状态监测组件结构设计生理状态监测组件是生理计算的另一个重要组件.相对于手部动作组件处理用户与计算机系统的显式交互信息不同,生理状态监测组件处理的是用户与计算机系统的隐式交互信息,在用户不知不觉中,监测用户实时的生理状态.系统对这些状态、交互环境和上下文进行综合分析,对系统自身参数进行适当的调整,并在合适的时候给用户直接的反馈,使用用户的隐式交互信息帮助用户,提升用户体验并增强系统的交互性.用户生理状态监测组件信号源可以是用户的心电、肌电或者脑电,很多情况需要这些各种信号源的信号统一协作才能对用户生理信息进行准确的判断.比如,心电分析组件监测到心跳速度短期内高于普遍水平,并且运动肌电分析组件监测到用户肌肉没有大运动量的活动,就可以初步判断用户处于紧张或高压状态.如果加上面部肌电分析组件监测到图5生理状态监测组件设计流程用户的眼跳和面部肌肉抽搐,就可以对用户的紧张状态进行相对准确的判断,并根据这种监测结果,对系统自身、交互环境和交互上下文进行相应的调整和反馈.生理状态监测组件的设计流程如图5所示.生理状态监测组件的交互原语生成单元、交互原语处理单元、交互任务生成和处理单元与手部动作组件的类似,只是使用相关算法模块和参考库会有相应的变化.此组件的一个重要特点是需要更多地和其他交互组件、交互环境上下文进行信息交换,通过这些上下文信息的辅助,更加准确地对用户生理状态进行判断.如果有必要,此组件还会与分布在环境中的传感器、其他设备上的传感器进行信息交换.正因为有这些额外的信息交换,此组件相比其他组件多一个信息交换处理单元,根据当前识别的交互原语和可能的生理状态,综合选择使用所需的额外信息进行必要的组合运算来分析确定用户的生理状态.Page95PhysiolCompToolkit应用场景使用PhysiolCompToolkit可以高效简单地创建实用的生理计算交互系统,研究者和开发人员几乎不需要了解非常深入的生理计算专业知识,就可以方便地实现自己的想法,开发自己的应用.目前已使用PhysiolCompToolkit开发了一些颇具实用价值的原型应用,在这些应用的开发过程中,使用了Physiol-CompToolkit中的组件来加快应用逻辑的实现.下面将以MobileHR和上肢动作识别为例,说明Physiol-CompToolkit如何提高开发效率.并以基于生理信息的隐式交互环境调节与反馈系统和运动健身指导系统的说明,描述PhysiolCompToolkit的应用潜力.最后总结了使用该工具箱构造应用程序时的要点.5.1MobileHRMobileHR是一个基于移动设备的心率监测应用,如图6(a)所示,它通过移动设备(如手机或平板等)的闪光灯照射用户手指,再利用移动设备自带的摄像头拍摄光透过手指后产生的视频,计算视频图像适当区域的平均灰度值或特定颜色通道的颜色值变化,产生类似于脉搏的波形,再将此波形利用PhysiolCompToolkit中的脉搏/心电处理组件进行处理,提取波峰原语,计算出用户的心率,系统如图6(b)所示.提取的波峰原语可以再被输入到类R-R图7脉搏处理组件输入输出及内部机制在PhysiolCompToolkit的评估中,我们对系统的开发效率进行了对比.我们选取了没有生物医学背景的计算机工程师6人进行了用户实验.6名被试具有相近的编程水平,对于心率/脉搏的计算和处理都只具有初步的常识,他们分为两组:第1组先不使用PhysiolCompToolkit实现MobileHR,后使用PhysiolCompToolkit实现MobileHR;第2组实现方式的顺序与第1组相反.我们记录了被试在生理计算开发和交互逻辑开发两个阶段的工作用时,并间期序列组件中计算心率变异性等相关参数.在实际的交互应用系统中,可以根据这些参数对用户身体状况做出提示,并设计相应交互行为,引导用户健康生活.在利用PhysiolCompToolkit开发此应用的过程中,移动设备摄像头采集到的视频流和一些上下文参数作为输入,由脉搏处理组件进行分析和处理,输出波峰点和心率等交互原语和根据交互原语和用户设定生成的交互任务,如图7所示.在系统实现过程中,相关细节(波形处理和分析算法、心率相关的生理计算理论等)被屏蔽,开发人员只需要关注组件的输入输出即可.在完成开发后进行了被试进行了半结构化用户访谈.在实现过程中,生理计算开发阶段,不使用PhysiolCompToolkit的工作用时平均约为19h,使用PhysiolCompToolkit的工作用时平均为57min,第1组和第2组没有明显的差异.交互逻辑开发阶段,使用PhysiolCompToolkit(平均用时3h26min)比不使用(平均用时3h50min)快,但差异不明显.经半结构化用户访谈得知,不使用Toolkit的被试的主要时间用在了生理知识调研和学习、生理信号Page10处理实现和调试等方面,使用Toolkit的被试的主要时间用在了PhysiolCompToolkit相关接口的学习上.另外由于用户新学习生理计算知识的不熟练,导致在交互逻辑开发时也需要花一部分精力在生理计算的开发上,对其进行调整和纠错,带来了连带成本,所以不使用工具箱在交互逻辑开发阶段的耗时会相对较长.从结果可知,PhysiolCompToolkit通过对生理计算专业知识的屏蔽和生理计算基础逻辑支持,使用该工具箱后,生理计算开发的时间明显缩短,用户可以把更多的精力放在交互逻辑的开发上,从而提高基于生理计算的交互应用的开发效率.5.2上肢动作识别———肌-机接口探究肌电的一个重要应用方向是可以方便地识别用户动作.我们设计了一个基于肌-机接口的上肢动作识别探究性环境,通过在手臂上佩戴电极,采集肌肉的电流,识别用户动作,如图8所示.在环境运行过程中,PhysiolCompToolkit中肢体运动捕获组件识别出动作原语,据此对用户的交互意图进行判断和理解,形成针对用户的交互任务,与用户进行相应的交互.针对上肢的大幅度运动,我们选取了6个交互动作原语,进行初步的动作原语实验验证.分别为(a)水平左右挥动手臂;(b)画圈;(c)左右画弧线;(d)画水平8字;(e)画三角形;(f)旋转手掌等,如图9所示.通过PhysiolCompToolkit上肢运动捕获组件分析出交互原语,再对6种交互原语进行解析,目前工具箱中的上肢运动捕获组件对肌电信号(交互信息)在时域和频域上提取了20余个特征,原语的识别率达到了70%~85%,未来将对特征和识别模型进行优化以进一步提高准确率.另外,在Physio-logicalToolkit的设计中考虑了用户添加自定义原语,用户可以对组件中的识别模板进行编辑,完成自定义原语的添加.完成原语解析后,根据用户对交互组件中交互任务的自定义,生成相应的交互任务.比如,左右挥动手臂定义为显示桌面,画三角形代表播放音乐,画圈代表对当前界面进行截图等.通过这些动作可以简单地与计算机进行交互.这将作为肌电识别的基础,提供给用户一个全新的交互通道.图9基于肌电的动作识别交互原语示例(圆点为起始点)我们也通过上肢运动识别的实例对Physiol-CompToolkit进行了评估.当被试不使用工具箱进行系统实现时,普遍遇到了一个重要的难题:生理计算的学习成本过大.在肌电图的处理过程中,用户需要对肌电信号的专业知识有较多的了解才能对肌电信号中的特征进行有效的提取,继而构建上肢运动识别的模型.在我们实验给定的有限时间里,6名被试在不借助PhysiolCompToolkit的情况下,都无法构建一个可用的应用.而在使用工具箱后,被试无需过多了解肌电信号机制,无需自己构建上肢运动识别模型.被试只需要在肌电信号的读取、传输,动作识别之后的交互逻辑产生方面进行相应的开发即可,6名被试在一天半的时间里,都可以基本完成一个可用的肌-机接口交互原型.5.3基于生理信息的隐式交互环境调节与反馈系统人机交互的发展越来越注重人机物的三元融合,传统交互界面只考虑了用户的显式交互信息,如点击鼠标,敲击键盘等,但人机物的三元融合不单需要这些显式的信息.更多的,系统需要主动地去理解从环境中和用户身上获得的信息.其中一个重要方面就是人体的生理信息,体现了用户当前的生理和心理方面的独特状态.针对这样的需求,本文提出设计了基于用户生理信息的环境调整与反馈系统.该系统主要使用PhysiolCompToolkit的生理状态监测组件和隐式交互组件,对用户的内在生理心理状态进行评估,并根据设计开发人员的设定对用户给予相应的反馈和用户当前交互环境的相关属性的改变.比如生理状态监测组件根据用户生理信息分析出其心率变异性(HeartRateVariability,HRV)特Page11征,再根据事先对HRV交互逻辑进行的定义,产生交互任务.由于HRV反映了用户自主神经活性,并且是评估心脏交感神经和副交感神经张力的无创性指标,交互应用可以根据PhysiolCompToolkit中的HRV分析组件得出的数据对用户神经生理状态进行判断.根据判断识别结果调整环境音乐类型和音量、光线背景和环境通风条件、温度及气味等,对用户施加有利刺激,进而调整用户神经生理状态到正常水平,并对用户状态进行进一步的监测和理解.5.4运动健身指导系统现在越来越多人的工作依赖于计算机和网络,在计算机前久坐而缺乏运动,引发腰椎和颈椎等多种疾病,甚至导致猝死.运动健康问题越来越受到大家的关注,但什么时候需要运动,运动量和运动强度应该多大往往缺乏提醒和指导,很多情况下,人们还是忽视了运动健康问题.针对这样的问题,设计了基于用户生理信息的运动健身指导系统.在人体肌肉群的相应部位放置能够采集肌肉电信号的电极,在PhysiolCompToolkit的肌肉运动组件中设置采集肌肉电信号的阈值,以减少某些非运动情况下微动作的影响.当系统长时间检查到阈值以下的肌肉电信号时,会提醒用户进行相应的运动.根据用户历史运动记录(时间、运动时长、运动强度等)制定运动计划,并且实时监测运动过程中的肌肉电信号的情况,以提醒用户避免长时间高强度的运动对身体造成伤害.5.5应用构造要点根据上述几个应用场景的构造,我们总结了使用PhysiolCompToolkit构造应用程序时的一些要点,为更多的基于PhysiolCompToolkit的应用设计和开发提供指导.(1)系统架构的设计要求生理计算模块和交互逻辑模块分离,充分利用PhysiolCompToolkit已有组件对生理信息进行处理分析,将主要工作重点放在交互逻辑的设计和实现上.(2)根据PhysiolCompToolkit的数据协议,适配直接从生理计算硬件设备中读取的原始数据,将数据导入到工具箱中.(3)根据交互场景需求,合理配置组件中的识别模型和特征库.PhysiolCompToolkit提供了基础的识别模型和特征库,能够满足大多数基础交互逻辑需求.如果用户需要定制特殊交互逻辑,需要根据组件接口对识别模型和特征库进行定制.(4)在依赖于交互环境的应用中,实时准确更新上下文信息,为PhysiolCompToolkit提供完备的交互数据.(5)合理利用交互组件的输出,根据不同交互组件的性质,将数据传输管线连接到系统自身或对用户的反馈上,将交互任务分配给系统或用户.6结论随着计算机软硬件技术的发展,生理计算从专业性走向大众化,从单纯的医疗用途转变为一种重要的人机交互技术通道.在技术高速发展,各学科领域高度融合的今天,基于生理计算的多通道人机交互技术将成为技术发展进步的主流,越来越多的人关注到这个领域的发展.本文从生理计算在人机交互技术领域的应用出发,提出了一个基于生理计算的交互工具箱Physiol-CompToolkit.阐述了该工具箱的体系结构设计方法,并从体系结构出发,进一步说明了如何从生理信号中提取交互原语,说明了解析交互原语并生成交互任务的流程.PhysiolCompToolkit中包含大量的可扩展交互组件,各种组件的架构满足标准PhysiolCompToolkit体系结构,但根据所处理信息的不同,获取的交互原语不同,所要生成的交互任务不同,会有细微的差别.文章以手部动作组件和生理信息监测组件这两种典型的组件为例讨论了工具箱中组件的设计方法.工具箱中原语生成单元,原语解析单元,交互任务生成和分派单元的设计满足可扩展需求,用户可以根据所涉及的硬件对各单元进行扩展.并且也可以对工具箱中的组件进行拓展,根据组件体系结构对已有组件进行组合和修改,生成满足需求的定制化组件.文章还展示了基于Physiol-CompToolkit开发的应用,显示了可以利用此工具箱高效便捷地设计交互应用.另外,根据应用场景的构造,总结了使用PhysiolCompToolkit构造交互应用的要点,指导更多交互应用的设计和开发.基于PhysiolCompToolkit,研究人员和开发人员不必深入了解生理计算领域的专业知识,不必对处理、分析和识别生理信号的流程和方法特别了解,就可以便捷地开发出基于生理计算理论的人机交互应用,快速实现自己的想法.这将提高研究人员想法的转化速度和研究效率,降低开发人员的开发门槛,有助于基于生理计算的人机交互技术的推广和发展,有助于推进计算机领域与生理计算领域的融合发展.Page12
