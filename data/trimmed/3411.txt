Page1基于位置的服务:架构与进展周傲英1),2)杨彬2)金澈清1)马强2)1)(华东师范大学上海市高可信计算重点实验室上海200062)2)(复旦大学上海市智能信息处理重点实验室上海200433)摘要随着无线通信技术和智能移动终端的快速发展,基于位置的服务(Location-basedServices,LBS)在军事、交通、物流等诸多领域得到了广泛应用,它能够根据移动对象的位置信息提供个性化服务.目前,主流的定位技术大致可分为卫星定位、基于网络基础设施的定位和感知定位三类.LBS使用有效的移动对象时空索引技术来高效处理服务查询请求,并且采用不同隐私保护策略以有效保护用户的位置隐私.近年来,由于应用场景趋于复杂、多定位技术协同、数据规模迅速扩大等因素影响,室内LBS、不确定位置信息管理、新型隐私保护技术、云计算平台下的LBS、社会化LBS等也越来越重要.文中介绍了LBS系统的架构及其各个组成部分的关键技术,回顾了近几年来LBS技术的研究进展,探讨了未来的研究方向.关键词基于位置的服务;定位技术;移动对象;隐私保护1引言随着无线通信技术和智能移动终端的广泛应用,基于位置的服务(Location-basedService,LBS)得到飞速发展与普及.基于位置的服务是指移动终端利用各种定位技术获得当前位置信息,再通过无线网络得到某项服务.早期的LBS系统主要用于在紧急情况下快速定位求助者的位置,以实施救援,比如美国的E911系统和欧洲的E112系统[1].当前,LBS已经广泛应用在军事、交通、物流、医疗、民生等领域中.例如,司机可以利用内置GPS功能的智能手机查找最近的加油站,也可制定行车线路.在大型博物馆(例如故宫博物馆)内,游客可以借助一个能感知位置的语音导游器来欣赏对各个藏品的讲解.LBS区别于其它传统网络服务的一大特点就是上下文感知性(contextaware)以及应对上下文变化的适应性(adaption).上下文是指描述某个实体状态的任何信息.Nivala等人对基于地图的移动服务提出了9种上下文信息[2]:移动地图用户、位置、时间、运动方向、导航历史、使用目的、社会和文化状况、物理环境和系统属性.根据上下文的状况和变化,需要动态适应LBS的服务内容和表达形式.Reichenbacher将适应性划分为4个级别:信息级别、技术级别、用户界面级别和显示级别[3].1.1LBS的系统架构图1描述了LBS系统的一般性架构.先进的定位技术可以实时获取用户/移动对象的位置信息,并发送到LBS系统中去.当前应用最广泛的定位技术无疑就是GPS了,此外也不乏其它定位技术,例如GSM、Wi-Fi、RFID(RadioFrequencyIDentifica-tion)等.LBS系统将这些位置信息保存在移动对象数据库(MovingObjectDatabase,MOD)之中,通过构建特定的索引来提高访问效率.此外,LBS系统还需要保留一些静态GIS信息.用户向LBS系统发出服务请求,并获取服务.LBS中间件是用户与LBS系统之间的通信媒介,它具有多种模型,包括基于内容的模型(content-basedmodel)、基于主题空间的模型(subjectspace-basedmodel)和元组空间模型(tuplespacemodel)等,前两个模型又被称为发布/订阅模型(publish/subscribemodel)[4].LBS系统的查询处理引擎访问移动对象数据库和静态数据库,从而提供用户所需的服务.为了保护用户的隐私,LBS系统一般还有位置隐私保护模块,从而不会在向用户提供服务的过程中泄露用户的隐私.位置隐私保护模块有时也涉及到与第三方可信机构之间的交互.虽然LBS中的许多功能和传统的GIS(Geo-graphicInformationSystems)系统相似,但是LBS和GIS有许多本质的区别[1].GIS系统通常可以利用较多的计算资源,为少数专业技术人员提供专业的地理数据的分析和处理.而LBS则是为大量普通用户提供有限的地理数据服务,并且这些服务要在资源有限的移动终端上运行.因此,一个LBS服务提供商通常具备如下几方面特点:高性能.快速处理用户的查询请求,以避免长可扩展性.能够支持大规模用户和数据;高可靠性.保证系统长时间稳定运行;实时性.支持实时查询动态信息;移动性.无论移动终端在任何地点都可以为其开放性.支持多种公告协议和标准;安全性.保护服务提供商的数据和用户的隐私;互操作性.LBS通常需要和其它电子商务服务时间等待;提供服务;集成在一起,因此需要有良好的互操作性.1.2LBS的分类根据服务信息的投递是否需要用户的直接交互,LBS可以分为拉动服务(pullservices)和推送服务(pushservices)[4].拉动服务是指由用户主动发送明确的服务请求,服务提供商把所需信息返回给用户,就如同用户把所需要的信息从服务提供商那里“拉”到用户自己这里.比如,用户发送一个请求“离我最近的饭店在哪里?”给服务提供商,服务提供商根据用户当前位置,找到最近的饭店返回给用户.推送服务则和拉动服务相反,用户没有明确发送服务请求,而是当某一条件满足时,服务提供商自动将相关信息返回给用户.推送服务可以分为用户事先Page3同意和用户事先未同意两个子类.用户事先同意的服务通常是通过向服务提供商订阅(subscription)实现,比如:用户订阅根据当前位置提供天气预报信息的服务.当用户从上海到达北京时,服务提供商就将北京的天气资料发给该用户.用户未事先同意的服务一般指的是广告投递服务,比如:服务提供商将某商场的促销信息发送给周边的用户.根据服务对象的不同,LBS又可以分为特定服务和通用服务.特定服务是指为特定人群或特定地区提供的服务,例如医院的残疾人跟踪服务、景点的自助导游服务等.特定服务需要服务提供商维护特定数据集合,比如旅游景点的相关信息.通用服务是指通信提供商对其所有用户提供的通用服务.OGC(OpenGeospatialConsortium)的OpenLS(OpenLocationServices)标准规定了6种基本的通用服务:目录服务、网关服务、位置工具(地理编码和反地理编码)服务、显示服务、路径服务和导航服务.根据服务处理技术的不同,LBS又可以分为快照查询服务(snapshotqueries)和连续查询服务(continuousqueries).快照查询服务根据查询条件,一次执行,返回结果;连续查询根据移动对象的位置变换信息持续更新查询结果.通常情况下,推送服务通过连续查询来实现.目前已经有一些LBS相关技术的综述文献.D’Roza和Bilchev[5]总结了LBS中常见的室外定位技术,综述了LBS中数据传递的格式和协议.Liu等人[6]描述了主流的室内定位技术.Jiang和Yao[1]分析了LBS的常见应用情景和特点,指出了LBS与GIS系统之间的差异.Mokbel等人[7]对如何提高LBS查询的可扩展性进行了综述,提出了共享执行策略.Lee等人[8]初步探讨了室内、室外空间不同的位置系统模型和相应的查询.潘晓等人[9]则对LBS中的隐私保护方法进行了综述.Schiller和Voisard[4]编辑的书较为全面地介绍了LBS系统,该书出版于2004年,无法收录之后的LBS研究进展.本文围绕LBS的架构,介绍关键技术,特别是新近的研究进展.本文第2节回顾主流定位技术;第3节介绍针对移动对象的索引技术;第4节描述3个主要的中间件模型;第5、6节分别介绍LBS系统的查询处理技术和位置隐私保护技术;第7节着重叙述近期LBS的研究进展;第8节探讨未来的研究方向;最后,在第9节总结全文.2定位技术基于位置的服务的基础是高质量地获取位置信息.定位技术主要有3类:卫星定位技术、基于网络的定位技术和感知定位技术.卫星定位技术是指利用太空中的人造卫星对移动对象进行定位,典型代表是GPS.基于网络的定位技术是指利用网络基站(或者接入点)等基础设施对移动对象进行定位.当移动终端被某一网络覆盖区域感知时,由网络基站或控制点计算出该移动终端的位置,典型代表是移动通信网络(如GSM,CDMA等).感知定位技术指在指定空间内部署传感器,当移动对象进入传感器的检测区域时,则能判定该对象的位置,典型代表是无线射频识别技术(RFID).卫星定位技术.目前在室外空间最为广泛使用的卫星定位技术是GPS(GlobalPositioningSystem).GPS全球定位系统是由美国国防部于1978年设计研制的,起初只用于军事用途[5].美国于2000年全面放开GPS对普通民众的使用权限,使得GPS广泛应用于民用交通导航.类似定位系统有欧洲的伽利略系统、俄罗斯的GLONASS系统.我国也已经实验开发了北斗1定位系统,北斗2定位系统正在研究中.GPS能将终端的位置限制在经度、纬度、高度组成的三维坐标系统内.其它改进型技术还包括差分GPS技术和辅助GPS技术等.差分GPS(DifferentialGPS)系统可以纠正卫星信号在电离层和对流层传输时的时间误差,进而提高精度.辅助GPS(Assistant-GPS)系统是指使用一些辅助数据(例如地面的移动网络基站)来提高GPS在弱信号下的定位精度.当外部条件良好时,GPS能够获得较佳的定位效果.但是GPS的精度较易受到周围环境的影响,例如高大建筑、室内空间等.基于网络的定位技术.这种定位技术往往依赖于移动通信网络设施.移动通信网络通常通过COO(CellOfOrigin)[5]进行定位,将移动终端定位在其注册的基站的覆盖范围内.因此,移动通信网络COO定位的精度和基站覆盖范围紧密相关.尽管使用一些辅助手段有助于提升精度,但总体来说这类定位技术的精度较低.此外,还可以依赖无线局域网进行定位,如Wi-Fi等.基于Wi-Fi的定位通常根据Wi-Fi访问点(AccessPointorHotspot)的已知部署位置和信号强弱进行定位,主要有基于三边测量的方法[10]和基于信号强度指纹的方法[11].基于三边Page4测量的方法通过信号传递模型,将接收到的信号强度转换为到访问点的距离,进而利用三边测量法定位.但是由于室内影响信号强度的因素很多,这使得建立一个通用的信号传播模型并不简单,而模型的好坏直接影响到定位的效果.基于信号强度指纹的方法首先将事先选择的室内空间每个参考点到所有Wi-Fi访问点的信号强度(即指纹)记录到数据库,终端根据当前自身到所有访问点的信号强度信息在指纹数据库中查找与其最接近的参考点,并用该参考点的位置定位移动终端.这种方法的精度在很大程度上取决于参考点选取的数量和位置.感知定位技术.感知定位技术适用于短距离识别.一般而言,需要一个信号发送端和一个信号接收端.当信号发送端和信号接收端相互间距离很小时,则能够被识别.RFID就是一种典型的感知定位技表1定位技术对比中高基于网络的定位技术GSM,3G,CDMA,Wi-Fi中低高由于室内、室外的环境不同,定位技术的工作原理不同,使得很难有一种定位技术能同时广泛地支持室内和室外定位.为了给服务提供商进行统一的室内外定位信息,需要在室内室外定位技术之间进行切换.Hansen等人[12]对这一问题进行了研究,提出了针对室外GPS定位和室内Wi-Fi定位之间的4种切换策略.相对于室外空间的成熟定位技术,近年来对室内空间的各类定位技术的研究比较集中.但大部分研究集中在如何提高某一个特定技术的定位精度.如何通过多种室内定位技术获得更精确的位置信息也有较高的研究价值,即提供一种通用的室内定位模型.3索引技术索引技术是移动对象数据库的核心技术,决定了LBS的查询性能.对空间数据的索引技术的研究工作已经开展了20余年的时间,出现了R-tree家族[13-14]、KD-tree家族[15-16]和Quard-tree家族[17]等代表性的索引技术.这类空间索引技术能够有效实现对静态空间对象的索引.然而,当移动对象频繁移动时,上述索引技术的性能显著下降.因此,近年来术.RFID系统通常包括两个组成部分:RFID阅读器和RFID标签.RFID阅读器能感知其覆盖区域内出现的RFID标签.当携带RFID标签的对象被某一RFID阅读器感知时,即可对该对象定位.该方法与移动通信网络的COO方法类似,但是RFID的覆盖区域要小很多,主要用于室内空间.这使得RFID定位的位置通常被限制在符号系统中.符号系统比几何坐标系统更适合描述室内空间,比如人们通常用房间号码来指示一个室内位置,而不是通过经纬度.另一方面,通过RFID读卡器的部署信息,可以将符号系统的坐标转化为几何坐标系统.因此,为了更好地利用RFID进行室内定位,需要综合考虑室内空间的平面规划和RFID阅读器的部署.此外,蓝牙、红外等也是比较典型的感知定位技术.表1总结了各类定位技术的特点.出现了一批有针对性的移动对象历史轨迹索引技术和移动对象当前/将来位置索引技术.历史轨迹索引技术不仅考虑对象的空间位置,也考虑时间维度;当前-将来位置索引技术则对于移动对象位置的更新操作具有良好的适应性.3.1历史轨迹索引技术首先我们来讨论索引移动对象历史轨迹的方法.历史轨迹的索引方法可以分为两类:基于R-tree的索引和基于Hash的索引.基于R-tree的历史轨迹索引方法将时间维视为一个普通维,将移动对象的轨迹表示成多维空间内的一组线段,再用R-tree进行索引.如图2所示,一个移动对象的轨迹被表现在二维几何空间范围(x,y)和一个时间维(t)的三维空间内.图2室外移动对象在几何坐标下的移动轨迹[22]Page53DR-tree[18]把时间维当作一个额外的空间维,不区分空间维和时间维,用一个3DR-tree统一对在这个三维空间内的轨迹进行索引,使得空间查询、时间查询、时空查询在3DR-tree上统一实现.MR-tree[19]和HR-tree[20]对每一个时刻的移动对象的位置建立一个R-tree.为了节省索引的空间,对连续时刻内位置未发生改变的移动对象不再进行保存,而是通过指针指向前一个节点.MV3R-tree[21]同时维护两棵树:MVR-tree和3DR-tree,其中MVR-tree用于处理时间参数为时刻的时空查询,3DR-tree用于处理时间参数为时间间隔的时空查询.为了处理针对轨迹的查询,TB-tree[22]利用类似R-tree的结构,但是它要求每个节点只保存来自于同一移动对象轨迹的时空数据.这样,在时空上临近但不属于一个移动对象轨迹的数据将被分别保存在不同的节点内.基于Hash的索引结构通常将空间维和时间维分开处理.SETI[23]把空间维和时间维区分开:使用静态、无重叠的网格划分空间维度(如图3所示);使用一维R-tree索引各空间网格内的时间维度.Song在其相关研究中也是先按照空间维度使用静态的网格划分[24],而对每个空间网格内的对象的时间属性进行转化,用SEB-tree[25]进行索引.3.2当前位置索引技术移动对象的位置随时间不停变化,这就要求索引结构能够应对大量更新操作.2+3R-tree[26]是一种既能索引历史轨迹,又能索引当前位置的方法,它维护了两个R-tree,一个2DR-tree用于索引移动对象当前位置,另一个3DR-tree用于索引移动对象的历史轨迹.当移动对象的位置改变时,一条新的轨迹线段被构造出来并插入至3DR-tree中,与此同时,新位置插入到2DR-tree中,且旧位置从2DR-tree中移除.LUR-tree[27]通过R-tree索引移动对象的当前位置,以满足移动对象频繁的位置更新操作.一旦移动对象的位置改变,新的位置将及时更新到R-tree中.如果新位置仍然在其原先节点的MBR内,只需更改该目录的位置;如果新的位置超出其节点的MBR,则根据不同策略选择是将该对象的目录删除后再插入,或者是将该节点的MBR进行扩展以包含该对象的新位置.为了应对移动对象频繁的更新操作,RUM-tree[28]利用保存在内存的特定信息,在更新时能避免访问磁盘来实现删除旧条目.而过期的旧条目将以批处理方式移除,从而提高了更新操作的效率.3.3将来位置索引技术为了索引未来时刻的移动对象位置,通常情况下需要根据移动对象的速度V对移动对象的未来位置建模,即locationnew=locationold+V×(tnew-told).对移动对象将来位置的索引技术分为两类:基于R-tree的索引结构和基于B+-tree的索引结构.TPR-tree[29]和TPR-tree[30]使用时间参数的MBR来组织移动对象,在组织节点时不仅考虑移动对象当前的位置,也考虑移动对象的速度,因而MBR能随时间的变化而扩展.当移动对象的位置更新时,则重新计算包含该对象的MBR.由于这类索引结构保存了速度信息,因而能预测移动对象的将来位置.REXP-tree[31]是TPR-tree的一种扩展,它针对部分移动对象长时间不更新位置信息导致MBR不断扩大的缺点,设定一个失效时间以删除失效的移动对象或重新计算.VCIR-tree[32]额外保持每个R-tree节点的所有对象的最大速度,在查询处理时,根据查询时间和最大速度对MBR或查询本身进行扩展,如图4所示.图4VCIR-tree处理范围查询时的MBR扩展和查询扩展[32]利用B+-tree对移动对象建立索引也是一种重要的方法.Bx-tree[33]是第一个基于B+-tree索引移动对象的方法.整个空间被划分为若干个单元格,借助于空间填充曲线(spacefillingcurve),每个单元Page6格被赋予一个标识符.移动对象所在的单元格的标识符值被B+-tree进行索引.当处理范围查询时,需要通过移动对象的速度和相对时间对范围进行扩展.Jensen等人[34]提出了支持更精确的范围查询的扩展算法.Yiu等人[35]提出了Bdual-tree,将一个二维的移动对象映射到四维的对偶空间进行索引.Chen等人[36]针对移动对象经常在时空范围内发生变化的特点,提出了一种可自适应调节的ST2B-tree索引结构.此外,STRIPES[37]是一个对位置和速度进行索引的对偶索引,它将在二维空间移动的移动对象映射到四维的对偶空间,并对四维空间进行PRQuad-tree[17]索引.这样的结构提高了更新效率,但是却对查询效率有所影响.针对不同的当前/将来位置索引技术,Chen等人[38]提出了一个测试基准,并对主要的当前/将来位置索引方法的特性进行了详细的比较.4LBS中间件模型中间件技术广泛地用于移动计算环境之中.LBS系统将LBS中间件作为服务处理引擎与终端用户之间的软件载体,隐藏了具体技术细节,便于向客户端提供服务.主要的LBS中间件模型有三种,包括基于内容的模型(content-basedmodel)、基于主题空间的模型(subjectspace-basedmodel)和元组空间模型(tuplespacemodel).前两个模型又可被归为发布/订阅模型(publish/subscribemodel).发布/订阅模型是移动计算中应用最为广泛的中间件模型之一.该模型中有两个角色:发布者和订阅者(也称消费者),二者之间通过事件交换信息.发布者产生事件,订阅者向发布者发送订阅请求.当特定事件发生时,即可将该事件通知订阅者.发布者与订阅者之间的联系并不紧密,是松耦合的;换言之,当订阅者暂时无法工作时,发布者仍可发布事件[4,39].4.1基于内容的模型在本模型中,一个事件被描述为一组(属性,值)对子,而订阅请求则被描述为一个事件相关的谓词.对于任一事件,检查所有订阅请求的谓词;当谓词为真时,则将该事件发布给订阅者[4].例如,假设某个LBS系统中某个移动对象产生的事件为{(id,"救护车"),(location,(100,200))},表明某一辆救护车的当前坐标是(100,200).订阅者的请求是:(location,(x>100)and(x<120)and(y>150)and(y<180)),表示订阅者对于空间上矩形框(左下角坐标(100,150),右上角坐标(120,180))内的移动对象感兴趣.因此,这个事件不会发送到订阅者.基于内容的模型比较简单,但是无法记录发布者或者订阅者的状态.例如,假设某用户(订阅者)不愿一天之内接连看两场电影,则最好不要在一天内多次向他发送电影放映通知.由于基于内容的模型并不记录历史事件,无法满足这个需求,因此可以应用基于主题空间的模型.4.2基于主题空间的模型基于主题空间的模型的核心概念是主题空间.一个主题空间实际上是一个多维空间,空间中的每个维度分别被定义为一个元组d={name,type},其中name是维度的唯一标识符,type表示数据类型.例如,关于位置的主题空间可以被描述为{(x,double),(y,double)}.此外,兴趣区域(interestregion)表示订阅者感兴趣的一个子域,在某个主题空间中;对象区域(objectregion)表示一个对象的状态或者属性.订阅者的订阅请求指定一组兴趣区域和一个过滤函数,以查看对象区域是否符合订阅标准;发布者的发布准则指定了一组对象区域和一个过滤函数,以查看兴趣区域是否与本次发布匹配.可以通过订阅请求和发布准则来判定是否匹配[40].在基于主题空间的模型中,信息在发布之后仍旧会保留在系统之中,而不是直接被移除,因此该模型支持有状态的发布/订阅.此外,也有助于实现对称的发布/订阅系统.换句话说,仅当发布准则与订阅请求匹配时才会向订阅者发送信息.这个特性能有效降低信息发布量,避免了冗余信息的传播.4.3元组空间模型元组空间模型最早被用于并行编程领域,以协调并发执行的任务.一个元组是一个包含多项值的矢量,元组空间是一个包含许多元组的集合.多个任务共享一个元组空间,可以通过改变元组空间中的各个元组值(或插入新元组)来实现任务间通信.因此,一般情况下任务间通信是松耦合、匿名化的.如果想实现同步化通信的目的,则在任务向元组空间发送信息之后,必须等待目标任务产生响应元组[41].一般来说,元组空间模型需要支持3个原子write(t):向元组空间插入一个元组t;extract(p):从元组空间中取出符合谓词p的操作.元组;Page7read(p):从元组空间中读取符合谓词p的元LBS系统可以很方便地使用元组空间模型,信组,但该元组仍旧保留在元组空间中.息发布者和订阅者通过元组空间进行通信.5服务处理方法5.1快照查询和连续查询如前所述,从查询处理的技术角度,基于位置的服务通常包含两类查询服务:快照查询和连续查询.快照查询访问移动对象数据库后立即返回查询结果.典型的快照查询如:“查询当前离我最近的快餐店”.连续查询根据周围环境变化情况持续刷新查询结果.例如,“监控未来一小时内某路口车流量变化”就是一个典型的连续查询.快照查询的处理较为简单.根据查询对象的时效性不同,快照查询大致可分为历史查询、当前查询和未来查询三类.历史查询用于查询过去时间内发生的事件,例如“查找哪些车辆昨天出现在停车场”;当前查询用于查询正在发生的事情,例如“查找哪些车辆现在出现在停车场”;将来查询则查询将要发生的事件,例如“查找哪些车辆将在五分钟后出现在停车场”.为了提高快照查询的执行效率,需要创建各种索引结构.对于历史查询,需要在时间-空间维度上对移动对象的历史运动轨迹进行索引.对于当前查询和未来查询,则需要对移动对象的当前位置进行索引,并维护移动对象的移动模型.这一类索引结构需要支持较多的更新操作.这两种索引结构已经在第3节中做详细综述.相比而言,连续查询的处理更为复杂,常用的策略有周期性快照查询法[32]、增量处理法和查询感知处理法.周期性快照查询法.该方法是最朴素的连续查询处理方法,定期执行快照查询(通常是当前快照查询),并刷新查询结果.缺点是难以有效地定义周期值:过小的周期值将增加系统负荷,而过大的周期值会降低查询结果精度.增量处理法.根据初始结果,动态增加新数据或者删除过期数据.SINA[42]定义了两类更新:正更新和负更新(从当前结果集内增加或删除一个移动对象),从而增量地更新查询结果.SINA通过散列、验证和连接3个步骤完成对连续查询的正负更新,从而有效地执行连续查询.Q-index[32]是另一种处理连续查询的索引结构.和通常的索引构建策略相反,Q-index为所有查询建立索引,当移动对象的位置变化时,通过Q-index可以找到受影响的查询,并更新相应的查询结果.查询感知处理法.该方法根据连续查询的查询条件计算出“安全区域”[32,43],只有当移动对象离开或进入“安全区域”时,才会影响查询结果.因此,系统可以忽略很多不影响查询结果的位置更新操作,进而降低系统负荷.如图5所示,给定5个范围查询,对象A的安全区域表示为一个以A为圆心的圆,而对象B的安全区域则是一个矩形.文献[32,43]基于欧式空间距离计算安全区域,而在实际应用中许多时候需要基于道路网络进行计算.针对这一特点,Yiu等人[44]针对道路网络上的kNN连续查询提出了新的方法.该方法首先通过确定能够影响当前kNN结果的路段,当移动对象离开该路段时则更新连续查询结果.该方法同时支持共享查询处理.5.2分布式查询处理方法按照移动终端是否参与查询处理,服务处理方法可以分为集中式和分布式两种处理方式.在集中式方式中,仅服务提供商处理连续查询,移动终端并不参与查询处理.分布式方式中,服务提供商与移动终端协作完成连续查询处理.Gedik等人[45]提出了一种分布式连续查询处理架构MobiEyes,其核心思想是由移动终端来计算和判断是否是一个连续查询的结果,而中心服务器负责注册和维护连续查询的相关参数,并将参数传到相关移动终端.移动终端维护一个注册表以记录临近的一组连续查询,并周期性地检查自己是否属于这些查询的结果之中.若是,则向服务器报告.为减少服务器和移动终端之间的通信代价和移动终端的计算开销,该文还提出了3种优化策略.Cai等人[46]则考虑到每个移动终端的计算和存储能力有差别,针对每个移动终端最多能处理的查询个数确定一个Page8存在区域,仅当移动对象离开存在区域时,才向中心服务器发送位置更新,并获取新的存在区域.移动终端在存在区域移动时,需要自己计算并检查是否是与该存在区域相关的连续查询的结果.与集中式方式相比,分布式方式通常需要在服务器与移动终端之间传递更多的消息,这带来两个问题:一是大量移动终端可能造成网络拥塞;二是网络通信会消耗移动终端的能量,缩短充电周期.另外,该方法无法适用于无计算能力的移动终端,如仅携带RFID标签的移动对象.6隐私保护隐私保护是LBS的重要内容.用户并不期望由于接受了服务而向外界泄露了位置信息,这既包括当前的具体位置,也包括对象的移动习惯等.最常用的位置隐私解决方案是空间伪装(spatialcloa-king)[47],即用户将位置伪装成为一个区域之后再发送给服务提供商,服务提供商则根据用户所提供的区域信息为用户提供服务.在这种方式下,服务提供商无法准确得知用户的位置.事实上,用户隐私和服务质量是一对矛盾关系,需根据具体情况进行权衡.Tan等人[48]提出了量化分析隐私保护和服务质量比例的方法.本节回顾两大类隐私保护技术[49],即依赖于可信赖的第三方机构的技术(简称TTP-based)和不依赖于可信赖的第三方机构的技术(简称非TTP-based).6.1依赖可信赖第三方机构的隐私保护方法在TTP-based技术中,用户将位置信息发送给TTP(TrustedThirdParty),由TTP对位置信息做变换,之后再连同服务请求一起发送给服务提供商;服务提供商基于不精确的位置信息进行处理,并将服务结果返回给TTP.TTP经过过滤、取精后返回给用户,如图6所示.在此过程中,TTP的主要任务是将原始的、准确的位置信息转化为不准确的位置信息,以保护用户的隐私.一种简单的方法是TTP直接用虚假标识符表示真实的用户标识符,再发送给服务提供商[44].但是,服务提供商仍可借助其它辅助信息进行破解,比如通过电话号码或家庭住址来推测真实用户信息.k-匿名方法是另外一种使用较广泛的方法[50],其核心思想是以一个覆盖移动对象的矩形来描述该对象的真实位置,该矩形同时还包含另外k-1个对象,使得服务提供商无法将该对象与其余k-1个对象区分开来.Gedik等人[51]提出了整合时间和空间区域的k-匿名方法CliqueCloak,在一个时空立方体内部至少仍然存在其它k-1个对象.林欣等人[52]发现k-匿名方法对连续攻击保护效果较弱,提出了一种能够有效保护连续查询时用户隐私的基于熵理论的度量方式AD(anonymitydegree).Mokbel等人[53]提出了Casper方法,利用金字塔数据结构将整个空间划分成大小不等的单元,若移动对象较为密集,则单元面积较小;反之,则单元面积较大.Kalnis等人[54]提出了HilbertCloak方法,利用Hilbert曲线将二维空间映射成一维空间,再利用B+-tree对移动对象建立索引.通过选取具有连续Hilbert值的k个对象进行隐私保护.Privacy-Grid[55]使用网格进行k-匿名,并在此基础上增加了l-多样性,进而又提高了隐私的保护程度.依赖于可信赖第三方的隐私保护技术的有效性在很大程度上取决于第三方机构是否可信.近年来,陆续出现了一些有关第三方机构的丑闻事件,使得第三方机构的独立性与权威性大打折扣.该技术的另一个缺点是集中式处理方式,即所有用户请求均发送到TTP,使得TTP成为系统性能瓶颈.因此,当前的发展趋势越来越倾向于不依赖可信第三方的隐私保护方法.6.2不依赖可信赖第三方机构的隐私保护方法目前,有一些隐私保护技术并不依赖于TTP,其基本思想是用户和其它用户之间交互位置信息,进而构造伪装的位置,如图6所示.主要步骤如下[56]:(1)请求服务的用户A首先将自身位置模糊化,并向周围的邻居广播;(2)邻居对象将模糊化之后的位置信息发送给用户A,直到A至少搜集到k-1个移动用户的位置信息;(3)用户A随机选取k-1个对象,与自身构成一个含k个对象的集合,并将包含这些对象的MBR或任意一个非用户A对象Page9的位置发送给服务提供商;(4)服务提供商根据接收到的位置提供服务.Chow等人[57]在此基础上提出了一种基于点对点(P2P)架构的基于合作的隐私保护技术.MobiHide[58]方法也利用点对点构架,把用户的二维空间信息通过Hilbert曲线映射到一维空间,通过在映射后的一维空间内选取连续的k个对象以保护用户的隐私.Solanas等人[59]也提出了一个无需借助TTP的网络传输协议.尽管上述方法不再依赖TTP,但是仍然需要和至少k-1个可信用户交互[60],增加了整个方法的通信复杂度,并且在实际应用中无法有效保证参与隐私保护的其它k-1个用户是可信的.最近,一些学者提出了新的解决方案,并不借助与临近节点的交互.我们将在下一节中详细叙述.7近期研究进展7.1室内LBS技术随着大型建筑物的内部空间趋于大型化和复杂化,室内LBS(例如室内导航等)得到了越来越多的关注[8,61].例如,博物馆的自动导游指引服务、基于乘客移动模式分析的机场商铺规划等.为了支持此类服务,亟需发展室内空间建模技术、索引技术和连续查询处理技术.室内空间模型.一般来说,室内空间的拓扑关系比室外空间复杂得多,因而更适合用符号化的坐标系统[62]对室内空间结构建模.三维几何网络模型[63]区分对待室内实体(房间)之间水平和垂直的连通关系.3DPoincareDuality[64]通过对偶转换,把三维空间内的实体的连通关系转换为对偶空间,可以应用于室内空间紧急疏散线路的计算.为了支持室内导航,一种三维可测量拓扑模型[65]被提出,该模型同时考虑空间实体的形状和连通关系.Li等人提出基于栅格的语义模型[66],可以维持不同室内位置间的最短路径.Jensen等人[61]提出了一种基于图模型的方法,不仅维持室内实体间的拓扑结构,还能有效管理基于感知定位的室内定位数据.室内轨迹索引技术.由于室内空间表示为符号化系统,因此室内轨迹表达方式也和室外轨迹不同.室内移动对象的轨迹可以表示在一个包含空间维和时间维的多维空间.空间维用符号化的地理位置编号表示,例如房间号、RFID阅读器编号等.这样,移动对象的轨迹可以表示为若干水平线段,进而利用R-tree索引这些线段,如图7所示.Jensen、Lu和Yang[61]提出了一种基于图的室内移动对象的跟踪算法,用于确定室内移动对象的轨迹,并且提出了两种基于R-tree的索引结构RTR-tree和TP2R-tree[67].RTR-tree将室内移动对象的轨迹表示为若干水平的线段,TP2R-tree则把轨迹表示为一个带时间参数的点.这两种索引结构均可有效支持室内空间的范围查询和室内轨迹查找.图7室内移动对象在符号空间下的轨迹以及连续查询处理.针对室内移动对象的连续查询处理,Yang等人[68]提出了一种查询感知的、增量的方法.该方法适用于基于符号化存在感应器的室内定位技术(如RFID).针对每个连续范围查询,作者提出了关键设备的概念,即在符号空间中的安全区域[32].仅当关键设备有新的读数产生时,会对查询结果进行增加或删除操作.这样,非关键设备的新读数将不会被用于增量更新查询结果.7.2不确定的位置服务位置信息的不确定性源于多种因素.首先,非连续的定位采样会带来不确定性.一般来说,定位技术会定期汇报位置信息,因而移动对象的位置在相邻两次采样之间存在不确定性[69-70].其次,定位技术自身具有精度限制[71].再次,当以物体的历史运动轨迹和附加信息来预测其未来行为时也存在不确定性[72].最后,出于隐私保护目的,需将数据模糊化[47],人为地引入不确定性.不确定位置信息管理技术大致可分为如下几种Page10情况.定的移动对象.(1)查询发出点精确,被查询的数据点是不确这类不确定查询在LBS中最常见.Cheng等人[71]提出了一套针对室外移动对象的查询处理框架.首先,根据定位的精度,将移动对象可能出现的区域限制在一个不确定区域内.在此基础上定义了概率范围查询和概率NN查询.并对直线运动模型和自由移动模型的移动对象的不确定性进行了总结与分析,进而有效地处理概率范围查找和概率NN查询.在此基础上,Cheng等人[73]又提出了概率阈值kNN查询,根据提出的k-bound概念进行过滤(k-bound为查询发出点到不确定对象的第k个最大距离,如图8所示),并且提出了3种优化处理该查询的方法.基于树的U-Tree[74]和基于网格的U-Grid[75]等索引方法可以索引多维不确定数据.Yang等人[68]提出了针对室内移动对象的查询处理技术,将范围查询的结果划分为两类:确定结果和不确定结果.给定移动对象的最大移动速度和室内空间的拓扑结构,对不确定结果集上的概率分析也做了基本讨论.Yang等人在其最新的研究中,针对定位系统的精度不确定性,提出了室内移动对象的不确定区域的定义,并在此基础上提出了基于精确查询发出点的概率阈值kNN查询处理方法.图8查询发出点精确的不确定移动对象kNN查询,k=3[73](2)查询发出点是不确定的移动对象,被查询的数据点是精确的.Chen等人[76]针对范围查询提出了3种优化方法:首先通过查询扩展,过滤掉一些不可能成为查询结果的数据点;接着通过互换查询发出点和数据点的角色,提高查询效率;最后针对阈值概率查询,提出了p-bound以限制查找空间,进而提高查询效率.Ishikawa等人[77]则考虑了室内机器人这一应用场景,范围查询从不确定的机器人位置发出,并且假设该机器人的位置服从正态分布.针对这一特殊的分布,提出了3种优化的策略.此问题的定义虽然是在室内的机器人应用,但是其使用的模型仍然是室外空间常用的几何模型,并未考虑室内符号空间.Hu等人[78]则针对最近邻查询进行了研究,并提出了EXO-tree提高查询效率.(3)查询发出点和被查询数据点都是不确定的.Kriegel等人[79-80]研究了查询出发点和被查询数据点都存在不确定性的查询处理技术,定义了概率kNN查询和概率连接查询,并对MonteCarlo抽样点建R-tree索引以提高查找效率.Chen等人[76]提出的p-bound则可以用于提高范围查询效率.(4)不确定的移动速度.Huang等人[81]考虑移动对象速度变化的不确定性,提出了一种支持连续kNN查询的方法.Lian等人[82]定义了概率RNN查询,并提出了基于双曲线的启发式查询处理算法.给定移动对象当前位置和速度的分布,移动对象不确定性的模型[72]可以被确定.根据该模型,可以用于预测未来移动对象的位置.7.3非合作策略的不基于TTP的隐私保护方法非合作策略的不基于TTP的隐私保护方法是近几年出现的一种新型隐私保护方法,该方法无需用户与其它用户之间的交互,而仅由用户自己完成整个操作.SpaceTwist[83]使用一个锚点来代替移动对象的真实位置,通过对服务商不断查找锚点的k最近邻的感兴趣点(POI),进而最终确定离真实位置最近的POI.在这一过程中,服务提供商只获得锚点的位置,而不能获得移动对象的真实位置.Ghinita等人[84]提出的基于私人信息恢复(PIR-based)的技术也是非合作策略的方法.如图9所示,它通过把隐私信息使用加密技术处理再发出查询请求,得到查询结果后再在客户端解密,保证了用户信息的私密性.这一方法不仅保护了单次查询的隐私,同时还可以很好地保护多次关联查询的隐私,以防止对手分析多次查询之间的关联性来窃取用户隐私.在找朋友应用中需要检测朋友之间的空间临近性,这就要求用户隐私数据被保护的同时,还需要保Page11证其空间临近性被保存下来.Ruppel等人[85]提出了一种位置保存映射方法,但是Liu等人[86]在随后的研究中发现该方法可以被攻破.一种能够保护用户位置隐私,又能保证检测到用户之间临近性的算法在文献[87]中提出.该方法首先将用户的坐标映射到一个网格中,并将该网格的标识符进行加密发送到LBS服务提供商,服务提供商仅仅可以利用这种加密后网格标识符进行临近性的检测,却无法反推出用户的实际位置,用户位置隐私因此得到保护.7.4云计算平台下的LBS通常情况下移动终端受限于计算能力和电池资源,无法完成较复杂的运算,如何利用强有力的云计算平台来提供更高效的基于位置的服务富有挑战.海量历史轨迹数据管理.大量的室外空间轨迹数据已经堆积,最新的研究[88]已经对多达1亿个室外移动对象进行了轨迹索引研究.另一方面,室内轨迹数据也在快速增长,例如地铁站、飞机场等场所每天的数据量达到百万量级.对大量的历史轨迹数据进行分析和查询,能够为改进LBS的服务质量提供很好的帮助.MapReduce框架为大规模的分布式的轨迹处理提供了良好的基础.Yang和Ma等人[89-90]利用分布式平台,提出了基于MapReduce架构的大规模历史轨迹数据处理算法,该方法将时空系统分区,把轨迹数据存储在不同节点上.在处理查询时,按照同样的分区策略,把查询分布在不同的节点上执行,最后合并出最终结果.隐私保护.云计算平台为LBS提供了一种新的运营模式,即LBS服务提供商并不一定拥有自己的云计算平台,而是将自己的数据和服务外包到云计算平台(由云计算平台服务提供商提供)上运行.这就带来了新的隐私保护问题,即如何在利用不可信的云计算平台的同时,获得可信的基于位置的服务.这类隐私保护方法需要保证两方面安全[91-92]:既要求保证被外包的时空数据是隐私的(privacy),即云计算平台服务提供商无法破解外包的时空数据;同时也要求用户能对查询的结果完整性(integrity)进行验证,即用户能验证结果是正确并且是完整的,以防止云计算平台服务提供商篡改和删除某些结果.7.5社会化LBS随着Web2.0技术的迅速普及,Flicker、Deli-cious、YouTube和Facebook等服务允许用户参与并共享自己的数据.由于这些数据通常包含3种信息———时间、空间和人物,因而也常被视为是时间-空间-社会数据[93].针对这一类型数据的分析可以更深入地掌握用户的兴趣爱好,并进一步地提供个性化LBS服务.通过对具有空间信息标注的图片的分析,WorldExplorer提供了一种新的基于地图的探索服务[94].用户可以对已有的空间对象加文字标注,或者对其它对象进行具有空间、时间信息的标注.这产生了一种空间关键字查询服务,即结合空间信息的信息检索.Cong等人[95]提出了一种算法,综合考虑空间上的相似度和标注文字的相关程度,通过倒排表和R-tree索引,返回最相关的k个空间对象.Zhang等人[96]提出了m最近关键字查询和bR-tree索引结构,可以找到m个空间上最近、并满足m个用户给定的关键字的空间对象.7.6针对紧急情况的LBS不少学者最近也在关注如何在紧急情况下提供高质量的LBS服务,例如地震、火灾等.在紧急情况下,周围环境更为恶劣,往往也要求用户快速做出反应,因而对LBS服务的要求更苛刻.例如,火灾现场充满烟雾、光线黯淡且有很多障碍物[97].当前,许多科研机构均对本问题进行探索,提出了不少方案.SummitSafety公司的Pathfinder系统利用了超声波技术,能为消防员在黑暗空间中快速找到安全出口.超声波无法穿墙而过,但是能够绕过墙角或通过门缝传播.该系统在安全出口处放置若干超声波发射器,发送不同频率信号.消防员手持超声波接收仪,分析接收到的信号即可快速制定安全的路径[98].美国国家标准和技术协会(NIST)利用RFID技术研发的flipside系统有助于消防员在黑暗空间快速定位.与传统的RFID系统不同,在这个系统中,RFID标签是静态的,各消防员穿戴移动的RFID阅读器.读到临近的RFID标签时,即可定位[99].Klann[100]设计的LifeNet系统能够为消防员在黑暗空间中寻找一条安全路径.该系统也采用超声波技术,在室内空间布置若干个标杆.消防员可以携带一个设备,感知临近的信标,并依赖感知到的信标构造路径,显示到头盔上去.其它代表性的系统还包括PPL[101]、HeadSLAM[102]等.这个方向的研究工作尚未成熟,上述提及的系统中大多处于实验室环境之中,仅有Pathfinder系统已经商业化.8未来的研究工作基于位置的服务在近几年得到了广泛的研究,Page12并且取得了较大的进展.在未来一段时间内,受应用场景趋于复杂、定位技术种类繁多、数据规模迅速扩大等因素影响,以下几点仍将会成为研究热点.8.1室内移动对象管理支持多定位方法的统一室内定位模型.现代室内空间通常部署多种定位基础设施,不同定位基础设施的覆盖区域不同且可能存在重叠.综合考虑多种室内定位技术,可以提供更为全面和准确的服务.所谓的全面是指多定位技术条件下总体覆盖区域面积增大;精确是指在重叠区域内综合运用多种定位技术能提高定位精度.室内定位技术的定位方式、坐标空间不尽相同,如何提供一个统一的室内定位模型并不容易.室内移动对象的索引技术.相对于大量的室外移动对象索引技术,当前对室内移动对象的索引技术研究还不是很多.特别是针对不同定位技术,需要设计不同的索引方法.当前的研究集中在室内符号空间中[64-65],专门针对室内几何空间的索引技术目前还没有.而室内拓扑结构的限制使得室外几何空间的索引技术又不能直接应用于室内几何空间,这也是室内移动对象索引技术的一个难点.另一方面,不同的定位技术,会导致不同形式的不确定性的存在,索引室内移动对象时还需要考虑不同类型的不确定性.例如RFID读卡器的漏读误读可能造成存在不确定性,而Wi-Fi定位可能造成定位数据精度的不确定性.当前还没有利用B+-tree对室内移动对象当前位置索引的相关研究,可以考虑通过空间填充曲线将符号空间线性化,其一可以用于改进基于R-tree索引结构的符号空间维的顺序,其二可以直接进行构建类似的基于B+-tree的索引.室内移动对象的隐私保护.当前的隐私保护方法尚未有针对性地考虑室内空间.比如利用k-匿名方法,如果k个对象都在一个房间内,这样的隐私保护效果就不好.结合室内空间的拓扑结构,攻击者也可以根据先后两次的匿名空间进行移动位置推测.另外,针对基于感知定位的室内移动对象,其终端没有计算存储能力,这就使得当前很多隐私保护策略无法进行,进而隐私保护的架构需要进行相应的调整.8.2无缝化的LBS在一些大型应用中,室外/室内相结合的无缝化服务也非常重要.例如,上海世博会既有室内展区也有室外展区,需分别采用室内/室外定位技术;乘客启程去机场乘坐飞机时,室外位置服务可以在去机场的途中提供导航服务,室内位置服务可为其提供在候机大厅的服务.无缝化LBS的难点在于室外/室内空间的定位技术切换和统一数据管理.室外/室内定位切换.一种方法是直接使用同时能够为室外和室内空间定位的方法,如Wi-Fi.另一种方法是按照某种策略进行室外定位和室内定位的切换.而切换的时机并不好掌握,在Hansen对这一问题的研究[12]中可以发现,切换时刻的定位精度均有不同程度下降.而在不同定位技术之间的切换,经常需要不同的策略.一种支持室外/室内不同类型定位技术的位置模型也能够为室外/室内定位切换提供帮助.室内室外空间统一数据管理.由于室内室外空间的表达方式和定位技术的不同,导致室内外移动对象的轨迹表达形式也不同.如何进行室内室外空间的统一数据管理存在挑战.为了进行统一的移动对象数据管理,需要把某一类型的移动对象数据转换为另一类型的数据.比如,把室内移动对象的基于符号空间的轨迹数据转换为室外移动对象的基于几何空间的数据,进而统一对转换后的室外移动对象数据进行管理.但是,在这一转化过程中会导致部分的信息丢失,引进新类型的不确定性数据.另一种可能的方法是进行合适的室内/室外交接,即当查询室内空间时,使用室内移动对象的模型,当查询室外空间时,使用室外移动对象的模型.而这一方法需要中间件把查询分发到适当的模型中进行查询处理,并且将查询结果组织成统一的格式返回给用户.8.3云计算下的LBS挑战海量移动对象当前/将来位置索引.如何在云计算平台上对海量的移动对象的当前/将来位置进行索引,进而有效提高查询效率.基于磁盘的索引结构无法适应移动对象频繁的对当前位置的更新操作.而大量使用内存则非常昂贵.因此,利用云计算平台成为解决索引移动对象当前位置的一个有效途径.Google的Latitude项目利用云计算平台提供了“找朋友”等服务,这一服务要求对移动对象当前位置的索引.已有的当前/将来位置索引技术并不一定能够有效地应用在云计算平台上,因此需要对原有索引技术进行改进或设计全新的索引技术.云计算下的隐私保护.云计算平台下的隐私保护也亟待加强,尤其是开发出更好的隐私保护算法来解决7.4节中提到的基于外包数据的隐私保护问Page13题.另外,可以在云计算平台上实现传统的TTP-based方法.建立在云计算平台上的TTP通常可以拥有较好的可扩展性和可靠性,进而避免TTP成为系统的瓶颈.但另一方面,同时需要更强的保护方法来保证在云计算平台上的TTP可信.8.4高效的社会化LBSWeb2.0技术和LBS的结合,带来了许多新的应用,社会化的LBS正在成为一个应用和研究的热点.为了提供高效的时间-空间-社会信息检索技术,新的索引结构、查询处理方法需要研究.而这些新的方法都应该能够很好地应用在越来越广泛使用的云计算平台上.另外,社会化LBS的隐私保护也需要研究,在社会化的LBS中,除了保护用户位置信息隐私外,还需要综合考虑用户的社会化隐私信息.9小结LBS是移动设备、因特网、空间数据库等多学科交叉的产物.最近十多年以来,相关学科发展迅速、社会需求很紧迫,因而LBS的发展非常迅速,其发展过程主要有以下4个特点[103]:(1)从被动式到主动式.早期的LBS服务可称为是被动式的,即终端用户发起一个服务请求,服务提供商再向用户传送服务结果.这种模式基于快照查询,简单但不灵活.主动式LBS基于连续查询处理方法,能不断更新服务内容,因而更为灵活.(2)从自引用到交叉引用.在早期阶段,服务请求者的位置信息仅限于为该用户提供服务,而没有其它用途.在新近的LBS应用中,服务请求者的位置信息还将被用于为其它用户提供查询服务,从而凸显了位置隐私保护的重要性.(3)从单目标到多目标.在早期阶段,用户的电子地图中仅可显示单个目标(可以是自身,也可以是其它用户/对象)的位置和轨迹.随着应用需求发展,需要在电子地图中同时显示/跟踪多个目标对象.(4)服务呈现方式从面向内容到面向应用.“面向内容”是指需要借助于其它应用程序向用户发送服务内容,例如短信等.“面向应用”则强调利用专有的应用程序呈现LBS服务,且这些程序往往可以自动安装或者移除组件.
