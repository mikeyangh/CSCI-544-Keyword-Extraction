Page1一种基于领域知识的非功能需求建模辅助方法邵飞彭蓉(武汉大学软件工程国家重点实验室武汉430072)(武汉大学计算机学院武汉430072)摘要随着信息化的普及,人们对软件系统质量要求越来越高,由于体现涉众对软件质量要求的非功能需求具有抽象、主观、不确定等特性,纯粹依赖人工方式对非功能需求建模是一项十分困难的任务.利用领域工程具有的内聚性和稳定性,提出一种基于领域知识的非功能需求建模辅助方法,通过挖掘隐含领域知识,层次化地组织领域知识,能够弥补个人知识的不足,更准确、完整地建模非功能需求.该方法包含两个部分:(1)基于不确定性理论的领域知识获取及分析模块;(2)基于NFR(Non-FunctionalRequirements)框架的非功能需求辅助建模模块.通过建立非功能属性分解树、设计基于三角模糊数的评价语言值量化机制和传递依赖关系计算方法,实现了对领域知识的准备;建立了非功能属性及非功能需求间依赖关系的形式化定义和推理规则,提出了基于RE-Tools的NFR扩展,实现了对领域知识的应用.案例研究表明,文中方法具有良好的可操作性,能够辅助建模需求关联,减轻需求工程师的工作负荷;同时,交叉实验结果表明,该方法可提升传统NFR框架方法的效率和准确度.关键词非功能需求;非功能属性;需求建模;传递依赖;领域知识1引言需求工程是近年来受到广泛关注且蓬勃发展的研究领域之一.随着网络软件应用与人们的生产生活关系日益紧密,构建能够在开放的互联网环境中运行的高质量、高可信软件对需求工程提出了新的挑战.一般将软件中涉及软件质量和可信性方面的需求统称为非功能需求.相对于内容明确、条理清晰的功能需求而言,非功能需求具有抽象、含糊,与功能需求密不可分等特点.因此,非功能需求的研究存在以下困难:(1)捕获困难.非功能需求的界限不明确.一些需求既可以看作功能需求,又可以看作非功能需求.比如,关键数据保密性方面的需求,如果目标系统将部署在网上银行这类安全敏感性应用中,那么一般应将它视作功能需求,因为它是网上银行系统必需具备的功能;若目标系统是一种单机软件,则可将其视为提高软件质量和可信性的非功能需求.与本文具有相同研究对象的NFR框架是专门用来建模和分析非功能需求的.该框架由Chung等(2)分析困难.非功能需求分析阶段的主要活动是将利益相关者的原始需求转变成准确的非功能需求模型,分析其中可能存在的关联关系、不完整性和不一致性等.构建准确的非功能需求模型是降低分析困难的最直接途径.然而,相对于功能性需求而言,非功能需求描述的抽象和模糊性,导致了确定它们之间关联关系成为一项困难的任务,这也是非功能需求建模面临的一个主要障碍.为此,我们提出一种辅助确定非功能需求之间关联关系的方法,并将它用于辅助建模非功能需求,进而降低需求分析的困难性正是本文的研究动机之一.(3)决策和验证困难.非功能需求的满足具有可伸缩性,如何进行决策以选择最佳方案、验证所构建的需求模型是否符合系统期望,都是目前需求工程研究的热点和难点.人[1-2]提出,使用软目标表达非功能需求,并通过分解、依赖两类关联关系建模软目标之间关联.但是,由于软目标涉及到安全性、可信性、可靠性、可用性及性能等多种领域知识,单纯由需求建模人员独自建模软目标之间的关联关系存在较大难度.另外,软件复用的研究和实践表明,特定领域的软件复用活动较容易取得成功[3-4].这里的领域是指一组具有相同或相近软件需求的应用系统.领域的内聚性和稳定性为软件复用活动提供了可供复用的软件资产和潜在的经济利益.具体到需求建模、分析过程中,利用领域知识辅助分析原始需求是其常用的一种手段.这些领域知识包括构建系统必须满足的法律法规、政策条例、行业规范、组织规则.除此之外,还包括那些构建同类系统所累积的项目经验、需求模型等.其中具有代表性的一种利用领域知识的途径是将非功能需求映射到确定的非功能属性[2,5],从而实现基于非功能属性的领域知识重用.综上所述,本文试图提出一种面向领域的非功能需求建模辅助方法.该方法利用领域专家建立基于语言值评估的非功能属性关联矩阵;并基于模糊集理论将语言值评估矩阵转换为模糊数评估矩阵,从而为构造综合多个领域专家评估意见的总体评估矩阵提供支持;同时利用关联关系传递规则,发现评估矩阵中缺失的潜在关联关系,完善评估矩阵,为辅助需求建模提供支持.本文第2节对非功能需求界定和非功能需求建模方法的现状进行介绍;第3节从辅助建模准备阶段和领域知识应用阶段两个方面详细阐述面向领域的非功能需求建模辅助方法;第4节阐述案例研究与分析;第5节对该方法的合理性及有效性进行探讨;最后对全文进行总结,并对将来的研究方向进行展望.2相关工作2.1非功能需求的界定在各式各样的软件需求中,除了功能需求之外,Page3根据研究问题的侧重,存在可信性需求、质量需求、安全需求等不同种类的非功能需求.事实上,对于软件的非功能需求至今还没有一致的定义,但存在几个比较经典的表述:(1)George等人[6]认为“功能需求是指一个系统的行为,该系统必须能够做什么,系统必须能够通过它们来运行.非功能需求是指超出系统行为之外的系统质量,描述系统会做得怎样,包括如精确性、性能、效率、可维护性、安全性等”.(2)Rosa等人[7]认为“软件的功能需求定义了软件期望‘做什么’,而非功能需求则指定了关于软件如何运行和功能如何展示的全局限制”.即非功能需求是相对于功能需求而言的.(3)Franch等人[8]认为“非功能需求对应软件的一种属性,是可以用来描述、评价软件的一种方式”.这更像是在软件质量评价中的表述.此外,可信性需求是应近几年可信软件的兴起而发展出的新概念,北京大学金芝教授等认为可信性需求是各种可能的威胁所驱动、并涉及软件质量的需求,如可用性、可靠性、可靠安全性、保密性等[9-10];刘春、王越等人[11-12]将软件可信性需求上层本体作为软件可信性需求的概念框架,并以此为基础,开发了一个软件可信性需求知识库,帮助提取可信需求.2.2非功能需求关联关系建模方法在以往较长时间内,非功能需求都是使用自然语言的方式描述的,具有很大的随意性.Chung等人[1-2]第一次就非功能需求的表示和描述方法进行了较为深入而全面的探讨,提出了著名的NFR框架.在该框架中,使用软目标来表示非功能需求,例如,“好的性能”就是一个软目标.在每个软目标上有一个可满足断言,以表达此非功能需求是否会被满足,并使用该断言进行相关需求满足性分析,之后又有研究对它进行量化扩展,并实现了需求满意度分析[13-17].Chung等人还研究了软目标之间的关联关系,并将同种类型软目标之间的关联关系称为显式关联(分解关系),例如父目标和子目标之间的关联;不同类型的软目标之间的关联称为隐式关联(依赖关系),又称为相关性[1-2].NFR框架包含一套自定义的完整的图形表达法SIG(SoftgoalsIndependenciesGraph),图9即为使用SIG描述的案例.其后,Wei等人[15-17]提出一种基于NFR框架的自动推理机制,以概率的方式对根节点软目标的满足性进行自动判断,并且区分了封闭世界假设和开放世界假设,提高了对环境建模的能力.Burgess等人[18]提出使用IR(InterdependencyRuleset)结构存储NFR目标之间的非标准关联关系(标准关联关系有AND、OR两种),并基于此提出一种非功能需求模型自动化分析和优化方案决策方法.该方法的前提假设是IR中的内容已知,并且非功能需求模型的架构已经搭建起来,而本文的研究可以看作是提出一种确定IR中内容的方法,以及非功能需求模型框架的搭建方法.因此,本文中建模方法的输出将可以作为上述方法的输入.此外,为了实现功能需求及其关联关系的重用,朱卫星等人[19]提出了一种基于领域知识复用的功能需求建模方法,基于本体复用领域知识、建立目标模型、表达用户需求,此类研究试图通过引入知识工程,以辅助功能需求建模.鉴于非功能需求的不确定性,如何获取和利用领域知识建模非功能需求还有待研究.Supakkul等人[20-22]通过建立4类结构化的NFR模式,即ObjectivePattern、ProblemPattern、AlternativesPattern和SelectionPattern,提出了一种基于NFR模式收集、组织和重用非功能需求知识的方法,并开发了可视化工具.Lopez等人[23]将非功能属性之间关系转换为NDR(NFRandDesignRationale)本体的形式,以支持属性关联关系的重用.以上提出的各种非功能需求的重用策略都能够降低需求建模难度,但在如何充分利用领域知识的内聚性、挖掘领域知识内的隐含信息方面还有待加强.综上所述,非功能需求的求精及它们之间的相关性分析是非功能需求建模与分析中最重要的两个方面.由于其涉及到性能、安全性、可靠性等方方面面,要求需求工程师全面掌握各领域的知识以完成非功能需求获取与分析工作是困难的.因此,丰富和完善非功能属性求精和非功能属性关联关系知识库是需求工程研究中的一个重要方面.本文主要研究如何获取并建模非功能属性间相关关系,并以此辅助非功能需求建模的方法.3一种辅助非功能需求建模的方法3.1方法概述该方法框架如图1所示.在准备阶段,首先,确定非功能属性的内涵与分类,为将非功能需求准确地映射到非功能属性,实现原始非功能需求的映射和组织提供基础;其次,研究领域知识的定量化技Page4术,完成领域知识从定性描述到定量描述的转换,从而支持非功能属性关系间的领域知识聚合和传递依赖的计算,获得辅助非功能需求建模所需的扩展领域知识.在应用阶段,利用准备阶段建立的非功能属性间的分解和依赖关系,建立原始非功能需求到非功能属性的映射,辅助建模非功能需求间关联关系,完善非功能需求模型.图1基于领域知识的非功能需求建模辅助方法设计框架3.2准备阶段准备阶段的主要任务是收集、分析、组织领域知识.首先,建立非功能属性分解树,为非功能需求和非功能属性分类组织提供依据;其次,通过基于三角模糊数的定性定量数据转换方法,支持非功能属性间关联关系语言评估值的量化,进而支持对领域知识的聚合,为领域知识分析做准备;然后,定义基于矩阵交集运算的传递函数,通过调用该函数挖掘领域知识中的隐含信息,获得新的依赖关系,实现领域知识的扩充;最后,通过定量定性数据转换,方便领域知识的重用.3.2.1非功能需求的界定非功能属性、非功能需求、软目标3个概念之间的关系如图2所示,其中非功能需求与软目标一一对应,而非功能属性可以泛化出不同的非功能需求.例如,非功能属性“保密性”可以泛化出“强的数据保密性”、“强的通信保密性”等非功能需求,而每个非功能需求都可以作为一个软目标.相关文献[2,7-8]给出了非功能属性的多种定义和分类形式,但还没有一种公认的非功能属性划分标准.表1ISO25010:2011中的安全属性和CC比较ISO25010:2011Authenticity,integrity,confidentiality,non-repudiation,accountability本文参考国际标准ISO25010:2011①和CC(CommonCriteria)②,构建了非功能属性分解树NFADT(Non-FunctionalAttributesDecompositionTree).NFADT采纳的标准ISO25010:2011包含了最新的软件质量属性及其解释说明,而CC标准针对安全属性进行了更为详细的界定和全面的分类,并且明确给出了安全子属性间的依赖关系(见表1).因此,融合ISO25010:2011和CC标准,能够使NFADT更好地支持安全属性间相关关系的界定;另一方面,由于所有的术语定义都有严格、详细的说明以及案例,便于普通用户理解和区分,从而使基于NFADT的非功能需求分类具有更高的可用性和认可度.构造出的NFADT如图3所示.它将非功能属①②logue_detail.htm?csnumber=35733Page5性NFAs(Non-FunctionalAttributes)按照抽象程度的不同分为3层,第1层为根节点NFA,第2层称为一级非功能属性,第3层为二级子属性.这种分层结构能够降低相关性分析的复杂度.3.2.2非功能属性依赖关系收集和语言值定量化非功能属性关联关系包含分解和依赖两种类型,其中NFADT给出了分解关系.接下来,为了支持非功能需求辅助建模,识别需求之间的依赖关系,需要建立面向领域的非功能属性依赖关系矩阵.由于专家在评估非功能属性间的依赖关系时大多习惯使用语言值,如何将基于语言值的评估信息定量化,是对依赖关系进一步推导的关键.基于已有文献[2-4],本文将依赖关系分为3类:(1)正相关依赖(促进关系“Cooperation”):表示正向影响,即一个非功能属性的满足会对另一非功能属性的满足产生正面作用.(2)不确定依赖(未知关系“Unknown”):非功能属性间影响方向不确定,可能产生正面、反面或不存在任何影响.(3)负相关依赖(抑制关系“Conflict”):负向影响,即一个非功能属性的满足会对另一个非功能属性的满足产生负面作用.由于客观事物的复杂性和不确定性以及人类思维的模糊性,人们在对诸如系统的易用性、性能等非功能属性满意程度进行评价时,一般喜欢直接用“优”、“良”、“中”、“差”等语言值形式给出.本文中信息收集的主体是人,因此评估者以语言值“Cooperation”、“Unknown”和“Conflict”的形式给出评估信息,符合评估者的使用习惯,且可提高方法的易用性.非功能属性之间的依赖关系是单向的,且不具自反性.例如安全性往往影响性能,但性能并不一定影响安全性;同时安全性对其自身的影响不予考虑.后面第4节给出一个包含一级非功能属性依赖关系的语言值评估矩阵示例.对语言评估信息进行测度时,一般需要事先确定适当的语言评估标度,也就是将语言值进行量化或序列化的准则.目前存在多种量化方法[24]:(1)定义一种语言术语下标均为非负整数且术语个数为奇数的语言评估标度,并把它们转换成三角模糊数、梯形模糊数或语言术语与数值组成的二元模型进行计算;(2)给出一种语言下标以零为中心对称且术语个数为奇数的语言评估标度,并且直接利用语言变量进行运算和分析;以及(3)非均匀积型和加型语言评估标度.考虑本文研究的是依赖关系评估,第2种方法不能反映语言术语的模糊性和重叠性,我们采用第3种方法中的非均匀加型语言评估标度和第1种的三角模糊数转换方法相结合的方法,首先将语言值转换为三角模糊数,然后根据其隶属度分布产生非均匀量化值,从而更好地体现术语的内聚性.为了更好地理解本文中介绍的方法,首先给出如下定义.定义1.语言值的三角模糊数.对于任何语言值Y,定义其三角模糊数为(n1,n2,n3).其中,模糊数区间为[n1,n3],n2表示该区间内对应语言值Y隶属度为1的数值.定义2.数值对于语言值的隶属度.数值x对于语言值Y的隶属程度称为隶属度μY(x),它的计算方法如式(1)所示:μY(x)=其中,(n1,n2,n3)为语言值Y所对应的三角模糊数.以语言值促进关系“Cooperation”、未知关系“Unknown”和抑制关系“Conflict”为例,假如其对应的三角模糊数定义如表2所示,则对于数值d而言,其对于语言值“Unknown”的隶属度为1.语言值Cooperation“+”Unknown“0”Conflict“-”一般情况下,同一个数值元素x隶属于不同语μCooperation(x)≠μUnknown(x)≠μConflict(x).言值的隶属度是不同的,即图4展示了表2中所述语言值的三角模糊数隶属度分布图的样式.其中,既存在重叠区域即模糊区域,如[a2,b1]和[a3,b2],也拥有各自的独立区间[a1,a2],[b1,a3]和[b2,b3].重叠区域的大小取决于概念的模糊程度.如果两个语言值概念之间差异度越大,则重叠区域越小或根本没有重叠区域;反之,则重叠区域越大.Page63.2.3语言评估信息的定量化基于三角模糊数,可以将语言值去模糊化转换为量化值.但由于语言评估值很大程度上受到评估者认知水平和语言习惯差异的影响,还需根据其差异设计校正过程对量化值进行处理.假定某个语言值Y的三角模糊数可表示为(n1,n2,n3)且存在n个评估者,其中评估者evali(i=1,…,n)配对语言值Y所对应的量化值用Devali(Y)表示,则n位评估者配对语言值Y的量化值分别为Deval1(Y),Deval2(Y),…,Devaln(Y).定义3.基于评估者从业时间的评估语言量化值.本文将评估者evali的从业时间ti作为校正参数,Devali(Y)的计算公式如式(2)所示:Devali(Y)=(n2-n3)timax{t1,t2,…,tn}+n3,Y=Conflict烄n2,烅(n2-n1)timax{t1,t2,…,tn}+n1,Y=Coop烆此处是通过Devali(Y)向隶属度为1的元素n2的逼近距离大小来体现出评估者认知水平的差异.若从业时间较长,则对于“Conflict”和“Cooperation”判断的模糊性会减小,语言评估值的确定性增加,因而Devali(Y)的值会更逼近n2;反之则Devali(Y)的值会距离n2较远;对于“Unknown”而言,由于每个评估者给出评估值Y=“Unknown”时,均表示其不确定该依赖关系,此处Devali(Y)(i=1,…,n)值都等于n2.例如,依照图4中三角模糊数的划分方式,评估者evali对应的赋值函数为Devali(Conflict)=(b1-a1)timax{t1,t2,…,tn}+a1;Devali(Unknown)=d;Devali(Cooperation)=(b3-a3)timax{t1,t2,…,tn}+a3.从而,评估者evali将会拥有一个量化值组合Devali(Cooperation)、Devali(Unknown)和Devali(Conflict).由于该算法在生成量化值的过程中,考虑了隶属度分布特性和评估者专业程度,体现出不同语言评估值的区别,而评估者从业时间使量化值根据评估者个体专业程度的高低不同而产生差异,即通过量化值向元素n2的逼近距离大小来体现个体差异.3.2.4聚合处理当n位评估专家根据NFADT给出n组语言值评估矩阵犕eval1,犕eval2,…,犕evaln且已经根据式(2)将矩阵中语言值量化后,将得到n个量化值矩阵犙犕eval1,犙犕eval2,…,犙犕evaln.接下来,根据式(3)计算,可得到代表群体评估的聚合矩阵犕:3.2.5传递依赖关系的计算由于非功能属性众多、专家领域知识与精力有限,单纯依靠人工建立非功能属性两两之间的依赖关系十分困难.如何利用已知的非功能属性间的依赖关系计算推导,以获得尽可能多且准确的其他依赖关系,是本节的重点.如图5所示,其中A、B、C、D、E分别表示不同类型非功能属性,依赖符号“-”表示负相关,“+”表示正相关,箭头的起点表示被依赖属性,终点表示依赖属性,虚线表示新增的传递依赖.当判断传递依赖时,图5(a)所示的情形可以采用定性的逻辑推理,即由图5(a)直接推出图5(b)中非功能属性C正相关依赖于A,即非功能属性A的满足能够促进对CPage7的满足.而在图5(c)所示的情形中,由于出现了正相关依赖与负相关依赖的多路复合情况,采用定性的逻辑推理方法已经不能分析A与C之间的依赖关系,此时通过将依赖方向和程度使用数值的形式表示,使得依赖程度在传递过程中可以进行叠加和乘积处理,最终得到一个综合值再根据定义好的规则进行判断即可.定义4.属性依赖关系传递函数.k[a][c]=犕transferm=(1烄烅0,烆其中,犕transfer值矩阵;元素犕transfer依赖传递所计算得到的非功能属性a与c之间的依赖关系增量值,称为传递依赖关系值;b1,b2,…,bm是连接非功能属性a到c的传递链路的中间m个非功能属性,mk,且链路必须满足约束条件constraint:loop(a,b1,…,c)=false,即传递链路中不存在环路;传递可信度r∈[0,1],rm表示传递深度为m的传递依赖关系值增量对整体关系值影响缩减rm倍,从而反映“传递所产生信息的准确度随着传递深度的增加而下降”这一信息传递的规律.3.2.6定性化处理为了便于重用领域知识建模非功能需求,需要将量化矩阵犕transfer中量化值是基于语言值所对应的模糊数计算而产生的,因此可以基于不同语言值隶属度分布进行判断,模糊数区间中不重叠区域的数值元素可以直接映射为对应的语言值,而重叠区域的元素取其相应隶属度较大者所对应的语言值.关系矩阵(2.1)目标系统:软目标间的分解关系(2.2)目标系统:软目标之间依赖关系(2.3)目标系统:软目标、非功能属性间约束关系知识所属层次:知识类型(1.1)领域知识:非功能属性分解树Contains(NFA,{NFA1,NFA2,…,NFAm})非功能属性NFA包含子属性NFA1,NFA2,…,NFAm;(1.2)领域知识:非功能属性依赖表3非功能属性、软目标关系描述以表2所对应的语言值三角模糊数定义为例,其对应的隶属度曲线如图4所示,不妨设“Conflict”与“Unknown”的隶属度曲线交叉点处的横坐标值为c1,它满足μConflict(c1)=μUnknown(c1),同理,“Unknown”和“Cooperation”交点横坐标c2满足μUnknown(c2)=μCooperation(c2),那么,量化值q转换为语言值的计算公式如式(5)所示.Lang(q)=经过处理后,增量值矩阵犕transfer矩阵犕transfer后,所产生的语言值矩阵犕内包含着原始依赖关系的聚合评估值.最后,通过合并犕transfer语言值领域知识扩展矩阵犈犕.犈犕不仅包含评估者给出的原始依赖关系,还包括通过传递规则计算得到的隐含依赖关系.3.3应用阶段应用阶段的主要任务是调用非功能属性分解树NFADT和已建立的领域知识扩展矩阵犈犕,用来分类原始需求或初始需求模型中的非功能需求,识别、完善非功能需求之间的关联关系.图6为非功能需求建模辅助方法的数据流图.首先根据原始需求建立初始需求模型;然后,依照NFADT及相应启发式关联规则在原始需求的基础上进行归纳整理或发现新的非功能需求,并结合领域知识生成扩展的需求模型.该模型主要包含的是非功能属性和软目标之间的映射关系,非功能属性间、软目标间的分解、依赖关联关系(见表3).在非功能建模辅助模块使用过程中积累的反馈信息,包括新的启发式规则和对非功能属性间依赖关系的补充与修订,将进一步完善启发式规则和领域知识.非功能属性NFA1的满足度正相关依赖于非功能属性NFA2;非功能属性NFA1的满足度负相关依赖于非功能属性NFA2;软目标SG能够满足,当且仅当G1,…,Gn中所有软目标都满足;软目标SG能够满足,只要G1,…,Gn中存在一个满足的软目标;软目标SG2的满足会促进软目标SG1的满足;软目标SG2的满足会抑制软目标SG1的满足;软目标SG的满足能提高非功能属性NFA的满足度;软目标SG的满足会降低非功能属性NFA的满足度;Page8为了利用非功能属性分解树及其依赖关系矩阵完善目标系统的非功能需求建模,发现潜在的软目标与非功能属性间的约束关系以及软目标之间的约束关系,在按照表3中对非功能属性、软目标关系描述的基础上定义如下规则:规则1.非功能属性间的分解关系导致的软目标与非功能属性间约束关系推广规则.Contains(NFA,{NFA1,…,NFAn})∧±(NFAi,SG),其中,i=1,…,n.规则2.非功能属性间的约束关系导致的软目标与非功能属性间约束关系推广规则2a和2b:规则2a.如果SG的满足将促进NFA2的满足且NFA2的满足将促进或抑制NFA1的达成,则SG的满足也将促进或抑制NFA1的达成.规则2b.如果SG的满足将抑制NFA2的满足,且NFA2的满足将促进或抑制NFA1的达成,则SG的满足将抑制或促进NFA1的达成.规则3.软目标间AND分解关系与非功能属性间约束关系导致的软目标与非功能属性间约束关系推广规则:±(NFA,SG)∧AND(SG,{SG1,SG2,…,SGn})±(NFA,SG1),±(NFA,SG2),…,±(NFA,SGn).规则4.非功能属性与软目标间约束关系及软目标间OR分解关系导致非功能属性与软目标间的约束关系推广规则:±(NFA,SG)∧OR(SG,{SG1,SG2,…,SGn})±(NFA,SG1),±(NFA,SG2),…,±(NFA,SGn).规则5.软目标间依赖关系导致的软目标与非功能属性间约束关系推广规则5a和5b:规则5a.如果SG2的满足将促进SG1的满足且SG1的满足将促进或抑制NFA的达成,则SG2的满足也将会促进或抑制NFA的达成.规则5b.如果SG2的满足将抑制SG1的满足且SG1的满足将促进或抑制NFA的达成,则SG2的满足将会抑制或促进NFA的达成.规则6.非功能属性与软目标之间约束关系导致的软目标间冲突关系推广规则:根据规则1至5推导获得的非功能属性与软目标之间的依赖关系,均可用于进行规则6的推导,即识别潜在的软目标间的冲突关系.例如:+(NFA,SG1)∧(+(NFA,NFA2)∧-(NFA2,SG2))+(NFA,SG1)∧-(NFA,SG2)(运用规则2b)-(SG1,SG2)∧-(SG2,SG1)(运用规则6)规则7.软目标分解关系导致的软目标间约束关系推广规则:AND(SG,{SG1,SG2,…,SGn})OR(SG,{SG1,SG2,…,SGn})规则8.由软目标之间依赖关系导致的软目标间约束关系推广规则8a和8b:规则8a.软目标SG1的促进、冲突依赖关系所导致的软目标间冲突关系推广规则:规则8b.软目标间约束关系传递所导致的软目标间冲突关系推广规则:根据上述规则编制算法,即可有效利用建立的领域知识库完善目标系统的非功能需求建模,发现潜在的软目标与非功能属性间的约束关系以及软目标之间的约束关系.但从上述推断过程不难推知:生成的扩展依赖关系的准确程度依赖于领域知识和目标系统已有知识的正确性.由于领域知识只是以往经验的总结,具有一定的时效性、抽象性和主观性,因此对于获得的扩展依赖关系还需要由需求工程师Page9根据特定目标系统的特征进行确认.3.4工具设计RE-Tools①是一个基于starUML工具的需求建模开源软件包,它实现了对NFR框架、i以及KAOS等的支持.以此为基础,设计一种建模辅助图7展示了该工具的业务流程,该工具的用户为评估者和需求工程师,其中评估者贡献领域知识,需求工程师与RE-Tools及辅助功能执行交互操作,引导建模过程,辅助功能中领域知识的转换过程为:①→②→③→④→⑤.4案例研究和分析图7非功能需求建模辅助功能(虚线内)的业务流图4.1领域知识准备该案例中的评估团队,即领域知识提供者群体由20人组成,其中包含高校教师、研究生、计算机从业人员及该领域相关涉众(买家、卖家)等组成,该网购交易软件系统属于B2C领域.步骤1.由评估者对该领域的非功能属性依赖关系进行评估,评估者评估一级非功能属性之间的依赖关系.假设某评估者i给出了一个依赖关系评估(初始)矩阵犕evali,如表4所示,其中的符号决定了行属性X与列属性Y间的依赖关系,比如“+”表本节以开发一个在线商品交易系统为例,对上面提出的建模辅助方法如何使用进行示例.表4依赖关系评估(初始)矩阵犕犲狏犪犾6属性YFunctionality0Reliability0Performance0Operability0Security0Compatibility0Maintainability0Portability0Safety0功能(其业务流程如图7虚线内所示)实现对NFR框架的扩展.利用表3中的关系描述语句结构化领域知识库,使用RE-Tools中NFR框架建立初始需求模型后,建模辅助功能会根据面向领域的非功能属性知识库对初始非功能需求模型进行扩展和优化.属性X00000000+①http://www.utdallas.edu/~supakkul/tools/RE-Tools/index.htmlPage10示属性X正相关依赖于属性Y.由于认知差异和个体主观性,20位评估者会给出20个不同的依赖关系矩阵犕eval1,犕eval2,…,犕eval20.步骤2.图8(a)是20位评估者的从业时间分布;依照表5中对语言值三角模糊数的定义,可以得到图8(b)中20位评估者对应的评估语言值量化分布,其自上而下分别表示评估者配对的“Cooperation”、“Unknown”和“Conflict”量化值.图8评估者个体特征和配对量化值分布表6聚合矩阵犕属性X表7传递依赖关系(扩展)矩阵犈犕属性YFunctionality0Reliability0Performance0Operability0Security0Compatibility0Maintainability0Portability0Safety0属性YFunctionality0Reliability0Performance0Operability0Security0Compatibility0Maintainability0Portability0Safety0步骤3.对这20个传递依赖关系值矩阵犙犕eval1,犙犕eval2,…,犙犕eval20进行聚合处理生成聚合矩阵犕.另外,将表5中三组三角模糊数分别代入隶属度计算式(1)得到交点横坐标c1=-2和c2=2,从而可以将区间[-10,10]划分为3段,以此作为定性化转换判断条件,其中区间[-10,-2)内的值由“Conflict”替换,[-2,2]区间内的值替换为“Unknown”,区间(2,10]中的值归类为“Cooperation”.Cooperation“+”Unknown“0”(-2.25,0,2.25)Conflict“-”(-10,-10,-1)依据图8(b)中评估者量化值分布,分别将20个矩阵从定性向定量化转换,生成依赖关系值矩阵犙犕eval1,犙犕eval2,…,犙犕eval20.00000000+属性X++000-+-+定性的聚合矩阵犕如表6所示.步骤4.为了充分利用评估信息,获得尽量多的传递依赖,设置传递可信度r=0.1,将最大传递深度设置为k=5,接下来,调用传递函数,在依赖关系值聚合矩阵犕的基础上计算传递依赖,得到传递依赖关系值矩阵犕transfer步骤5.对矩阵犕transfer留聚合矩阵犕中原始依赖信息,获得一个依赖关系Page11扩展矩阵犈犕,如表7所示.该矩阵既包含评估者直接给出的领域知识,即原始的依赖关系,同时又包含了隐含传递依赖(阴影部分).至此,B2C领域知识的准备阶段结束.4.2非功能需求辅助建模在应用阶段,首先构建如图9(a)所示的原始非功能需求模型,内部的节点称为软目标,其中根节点软目标‘highperformance’和非功能分解树中一级非功能属性“Performance”相对应,并可分解为若干子软目标.‘nobackup’、‘tagsearch’、‘textcontent’、‘networkeddisks’为可操作性任务,用来实现其父亲节点代表的软目标.‘nobackup’、‘tagsearch’分别表示“不备份用户账户或操作信息”、“商品标签搜索功能”,它们的实现可以为系统节省一定响应时间;‘textcontent’、‘networkeddisks’分别表示“商品只有文本描述”和“使用网络硬盘保存系统数据”,它们可以减少系统资源的负担.其它软目标也可以像‘highperformance’一样进行分解、精化,例如软目标‘highsecurity’表示系统需要具有强安全性,包括数据保密性、用户隐私、系统安全等等.本文中限于篇幅将不再一一介绍.建立初始需求模型之后,接下来根据表7中的领域知识和表3中的形式化方法建模一级非功能属图9非功能需求建模辅助过程:(a)→(b)→(c)→(d)性及其所对应的软目标之间的关系.利用推导规则1~规则8,可以逐步精华得到更加完善的非功能需求模型9(b)、9(c)和9(d).需要注意的是,当领域知识有限或有多个子目标可选时,需要人工进行交互式的选择和确认.例如,按照已定义规则进行推导,可以得出可操作性软目标‘nobackup’与‘highsecurity’以及另一软件周境系统安全性软目标‘highsafety’之间都存在冲突关系,但通过需求工程师的确认,‘nobackup’与‘highsecurity’之间没有直接关联关系,这是因为‘highsecurity’关注的是数据的保密性,而‘highsafty’更关注该软件对周境系统的安全性,即‘nobackup’与‘highsafety’之间确实存在冲突关系.通过上面的示例可以看出,随着软目标不断精化,可能会遇到当前领域知识不能解决或存在多种选择的问题,比如由图9(c)转换为图9(d)过程中,需要人工执行一定的辅助工作,以决定哪些子目标或任务可以继承父节点的依赖关系.可以看出,当收集的领域知识越是接近底层任务时,人工辅助工作量将会变得越小.由于领域知识只能起到辅助建模的目的,最终方案的模型还是需要当事人进行决策.由图9(b)推出图9(d)是一个知识转换、关系推理以及人工决策的过程,下面给出了其中一部分关系的推导过程.Page12首先列出已知的领域知识以及目标系统的一些基本信息,并依照表3中定义的关系描述语言进行形式化表示:(1)软目标‘highperformance’的实现能提升非功能属性的“Performance”满足度,即+(“Performance”,‘highperformance’).(2)软目标‘highsecurity’的实现能提升非功能属性的“Security”满足度,即+(“Security”,‘highsecurity’).(3)非功能属性“Security”的满足会抑制非功能属性“Performance”的满足度,即-(“Performance”,“Security”).(4)软目标‘networkeddisks’会促进软目标‘highperformance’的满足,即+(‘highperformance’,‘networkeddisks’).并依据相应的规则,利用以上知识进行关系推理的过程为+(“Performance”,‘highperformance’)∧+(“Security”,‘highsecurity’)∧-(“Performance”,“Security”)∧+(‘highperformance’,‘networkeddisks’)-(“Performance”,‘highsecurity’)∧(运用规则2a)+(“Performance”,‘networkeddisks’)∧(运用规则5a)-(‘highperformance’,‘highsecurity’)∧(运用规则6)-(‘highsecurity’,‘highperformance’)∧(运用规则6)-(‘networkeddisks’,‘highsecurity’)∧(运用规则8a)-(‘highsecurity’,‘networkeddisks’)(运用规则8a)5讨论5.1方法的敏感性分析本文所提出的非功能需求辅助建模方法中所包含的计算操作主要处在准备阶段,即领域知识的分析和生成阶段.该计算过程中包含两个动态参数,分别是三角模糊数和传递可信度r.其中,三角模糊数具有两个作用,分别是:(1)量化评估值.对于不同的评估者,按照评估者从业时间对“Conflict”和“Cooperation”进行量化处理.假设产生的量化值所处区间分别为[a1,b1]和[a3,b3],比如[-10,b1]、[a3,10].如果b1=-10,那么所有评估者对应的评估值“Conflict”将量化为同一个数值-10,如果b1=-1,那么“Conflict”的量化值将是区间[-10,-1]中的某个数值,且存在不同的量化值分别对应不同的评估者.因此对评估者认知水平的区分程度随着b1向-10的逼近而不断降低.(2)定性化处理.以某个阈值作为判断条件,将数值形式的评估值转化为语言评估值“Cooperation”和“Conflict”.该定性化判断条件为c1、c2,即“Unknown”隶属曲线分别与“Conflict”、“Cooperation”隶属曲线的交点的横坐标.一般情况下,|c1|=|c2|.这里设定评估语言值“Conflict”和“Cooperation”对应的三角模糊数区间分别为[-10,-1]、[1,10],如图10所示,随着定性化判断条件c2由小变大,原始聚合依赖的数量不断减少、传递依赖的数量在c2>1后不断减少.当c2=0时由于原始聚合依赖中被转换为“Conflict”和“Cooperation”关系的最多,能够由其衍生的传递依赖相对较少;而当c2=2时,通过被转换为“Conflict”和“Cooperation”的原始依赖,能计算出的传递依赖比率达到峰值.传递可信度r的作用是度量依赖关系传递1次后的可信程度,范围为从0~1.依赖关系传递1次与传递10次后信息的可信程度是不同的.由于每次传递都可能存在一定程度的误差.因此,传递n次后所得传递依赖关系的量化值q,需要基于传递可信度r校正为qrn.图11、图12分别为传递可信度按照不同步长从0~1、从0~0.1,所生成传递依赖的数目变化情况,传递可信度为0时,即表示传递不可信,不会产生任何传递依赖.而当传递可信度为逐步图11传递可信度在[0,1]且步长为0.1时对依赖数目的影响Page13增长时,产生的传递依赖数目基本相等.实际上,通过我们对数据的比较,发现其传递依赖的分布是不同的.不过,仍可观察出,传递可信度为[0.08,0.2]段内产生的依赖数目相对较多.因此,建议依据领域专家给出的非功能属性间依赖关系数量多少和质量高低调整三角模糊数和r,以更好地利用传递依赖扩展能力.5.2方法的有效性与原NFR框架相比,使用本文中辅助建模方法建立的模型可以通过最小的工作量在最大程度上完善非功能需求依赖关系网,为后续需求分析和方案决策提供更充分和有力的支持.为了证明该辅助方法的有效性,首先在没有领域知识的情况下,统计使用NFR框架建立非功能需求模型所花费的时间以及所建立非功能需求之间关系的正确率,然后统计使用辅助方法建立模型所花费的时间及其中需求关系的正确率.步骤1.选择两个系统作为建模对象,系统1为铁路售票系统,系统2为微博系统,分别归类为B2C和社交网络系统.在对这两个系统进行了简化的基础上,实验负责人与需求工程、相关领域专业人士进行合作,事先已经分别建立了正确的非功能需求模型Railway-TicketNFRModel(RTM)、Wei-BoNFRModel(WBM)(各包含20条关联关系)用来对实验结果进行验证.步骤2.按照本文方法,分别建立B2C、社交网络系统的领域知识.步骤3.将RTM、WBM关联关系全部删掉,只保留节点(软目标、可操作化软目标),将节点和节点的简要说明分发给所有参与人,参与人为4名本课题组学生(M1,M2,M3,M4)和4名其它课题组学生(G1,G2,G3,G4).步骤4.依照表8和表9的工作安排,参与人独立构建这些节点之间的关联关系,实验负责人收集、统计相关信息,包括参与人的完成工作所用时长、正确率(正确的关联关系/20).实验统计结果如表8和表9所示,相对于其它研究方向的参与人员,本课题组成员更快更好地完成了建模工作.同时,使用辅助方法后,尽管需要掌握若干推理规则,但是,无论对于相同系统,还是不同系统的建模,依然减少了建模时间,且大幅度提高了建模正确率.时长/min正确率/%人员编号M14665M23970G18030G27225系统1的需求建模(使用辅助方法)人员编号M318M424G345G4375.3未来研究方向(1)有效性验证.通过进一步与软件企业合作开展真实案例对比验证,检验该方法的正确性和发现不足之处,将有利于得到对将来改进有帮助的反馈信息.(2)领域知识获取方法.首先,以评估者直接评估的方式收集领域知识,对评估者而言要求太高,且工作量太大,可能会因为各种主客观因素降低结果准确度;其次,尽管大样本可以在一定程度上提高领域知识的可信度,但现实情况中多是中等甚至是小样本,因此需要研究小样本信息来源的组成和构成比例,以保证领域知识的准确和全面性;再者,样本中可能有错误信息和噪声的存在,它们的引入会影响领域知识的正确性.鉴于此,我们下一步将会对知识的重用机制、知识的质量评估方法、知识的抽取方法和多元知识的融合方法以及知识的更新(生命周期、演化)机制进行研究.另外基于从业时间、社会身份等多因素探讨专家权威度评价方法,从而帮助获得更准确的领域知识.(3)对NFR框架的全面兼容.事实上,在RE-Tools及NFR框架中,依赖关系存在多种类型,比如:Equal、SatificingContrib.、Some+、MAKE、HELP、Some-、BREAK、HURT.本文对此进行了简化,只考虑其中的HELP与HURT关系.将来计Page14划按照同样的方法增加对其它类型依赖关系的领域知识收集、组织和应用.(4)领域知识扩展.目前论文主要是基于标准中一级非功能属性进行了分析和建模,一级非功能属性总共有9个,二级中有38个属性.当前使用这9个一级属性既可以满足粗粒度分析的基本的需要,又可以降低分析的复杂度,同时这种分析和建模方法可以递归的应用到二级属性或者是新扩展的属性上.但如何充分利用高抽象程度的领域知识,辅助获取更具体或者混合层次领域知识,如何根据非功能属性抽象程度和分解关系,构造更充实的领域知识网络都还值得进一步研究.(5)自动化.目前本文领域知识准备阶段和应用阶段主要工作还没实现完全的可视化,还需要人工运行大量的命令作为辅助,自动化程度不高.因此,为了提高用户友好性,我们下一步工作将会开发基于starUML平台的可视化工具包.6结论提出了一种非功能需求建模时基于非功能属性的领域知识的组织和应用方法,并设计相应的建模辅助模块作为NFR框架的扩展,可以沿着非功能需求自抽象到具体的分解方向重用领域知识.其中通过非功能属性的界定使得非功能需求的组织更规范,能更准确将非功能需求映射到非功能属性;提出了一种基于三角模糊数的评估信息定量定性转化技术,为基于语言评估值的依赖关系聚合及传递依赖关系计算提供了支持;通过对非功能属性及软目标间依赖关系的形式化建模及推理规则的定义,使得利用领域知识自动辅助建模非功能需求成为可能,不仅降低了建模的难度,也提高了建模的准确性,从而为需求分析提供了有力的支持.未来工作的重心是解决5.3节中提到的若干问题,并将该方法移植到网络需求获取和分析平台SKLSEWiki上,对其与需求获取及需求分析过程的整合机制进行研究.
