Page1空间数据上Top-犽关键词模糊查询算法胡骏范举李国良陈姗姗(清华大学计算机科学与技术系数据库研究组北京100084)摘要基于位置的服务(LBS)变得日益普及,越来越多的研究开始关注如何对空间中的兴趣点(POI)做有效的检索.现有的方法提出了空间数据上的关键词检索,研究如何根据查询的位置和关键词找到相关的POI点.然而,现有方法主要对查询关键词进行精确匹配,不能支持模糊查询:当查询关键词与底层数据存在微小差异的时候,LBS系统不能返回相关的结果.为了满足移动用户的模糊查询需求,文中对空间数据上的Top-k关键词模糊查询问题进行研究:给定一组POI点,检索与查询关键词近似匹配且空间上距离相近的Top-k个结果.为了提供高效的模糊查询,文中首先定义了一种新型的相关性函数,综合考虑了文本相似性和空间距离,进而提出了一种有效的索引结构RegionTrie,并基于RegionTrie设计了高效的Top-k算法.真实数据集上的实验结果表明,文中提出的Top-k算法十分高效,性能远好于对比方法.关键词基于位置的服务;空间数据上的关键词检索;字符串近似匹配1引言近年来,由于移动设备(如智能手机)上全球定Page2现有的LBS系统采用关键词检索的方式帮助用户从空间数据库中找到位置相关的结果[1-11].具体来说,假设空间数据库中有一组兴趣点(PointsOfInterest,POI点),其中每个POI点都包含位置信息和一定的文本信息.给定用户的位置和一组查询关键词,LBS系统返回从空间和文本上都与查询相关的POI点.举例来说,假设用户希望找到附近的星巴克咖啡店,她可以输入关键词“starbucks”,系统会根据POI点与查询位置的距离以及是否包含关键词“starbucks”返回相关的POI点作为结果.现有方法需要POI点精确地匹配到查询关键词,不支持关键词的模糊匹配.然而,由于移动设备自身的特点,如屏幕小、键盘输入不方便等,用户很可能在输入关键词的时候出现错误.例如,用户可能将关键词“starbucks”误输为“sterbuck”,从而无法得到想要的结果.针对这一问题,Yao等人[6]提出了空间数据上的字符串近似匹配方法,该方法使用编辑距离来度量查询与POI点中关键词的相似性,并设定一个阈值:编辑距离小于等于该阈值时,则认为相应的关键词彼此近似.例如,给定阈值2,关键词“sterbuck”与“starbucks”彼此近似,因为它们的编辑距离为2,小于等于阈值.因此,当查询关键词为“sterbuck”时,也可以模糊匹配到包含“starbucks”的POI点,从而实现容错的目的.该方法存在以下两点局限性:首先,对于不同的查询关键词,很难设定一个统一的阈值:较长的查询可能需要比较大的阈值;相反,较短的查询需要的阈值也会小一些.其次,Yao等人仅提供了一种近似的解法,即结果可能存在着一定的误差,可能会引入错误以及遗漏结果.本文提出一种空间数据上Top-k关键词模糊查询方法,帮助用户在输入存在错误的情况下,找到最相关的Top-k个POI点.提出的方法同样使用编辑距离来度量关键词之间的相似性.然而,与现有方法相比,该方法不需要设定阈值,而是将编辑距离融入到结果的排序函数中,因此比现有的方法更加灵活.另一方面,本文提出的方法能够根据排序函数找到精确的Top-k结果,避免了近似算法可能引入的错误.提供空间数据上的Top-k关键词模糊查询存在以下几点挑战:首先,需要设计支持容错的相关性函数,从而判断哪些POI点与查询更加相关;其次,需要设计高效的Top-k算法,为移动用户返回实时的查询结果.针对这些挑战,本文首先提出了一种新型的相关性函数,综合考虑编辑距离、关键词权重和空间距离.给定相关性函数,设计了一种有效的结构RegionTrie对空间数据库中的POI点进行索引,该索引根据文本的前缀和空间分布将数据中的POI点组织成一个层次的结构.基于RegionTrie,我们设计了高效的Top-k算法,该算法可以通过增量的方式对编辑距离进行计算,并有效地估计查询与POI点的空间距离.此外,本文还设计了有效的剪枝策略,从而进一步提高算法的效率.综上所述,本文的贡献在于:(1)首次提出了空间数据上的Top-k关键词模糊查询问题,从而支持查询的容错.(2)提出了有效的索引结构RegionTrie,并基于该结构设计了高效的Top-k算法.(3)在真实数据集上进行了实验,实验结果表明,提出的方法具有很高的检索效率.本文第2节对相关的工作进行综述;第3节给出问题的形式化描述;第4节提出RegionTrie的索引结构,并给出基于该索引的Top-k算法;第5节进一步对Top-k算法进行优化,提出增量计算的方案;第6节报告实验的结果;最后,第7节对全文进行总结.2相关工作本节对两方面的相关工作:空间数据上的关键词检索和字符串近似查询进行综述.空间数据上的关键词检索得到了非常广泛的研究[1-11].根据查询模型的不同可以将现有研究分为:(1)k近邻查询,返回与查询文本相关且距离最近的k个POI结果.这方面现有的工作多将文本索引融合到空间的R树索引中[3,5];(2)区域查询,返回与查询文本上相关且空间上在一定区域内的POI结果[1-2].为了支持容错,Yao等人[6]提出了空间数据上的字符串近似匹配方法,通过设定编辑距离的最大阈值找到与查询关键词不一定完全一致的POI点,并基于R树给出了一种近似的检索算法.与现有的研究相比,本文主要研究Top-k关键词模糊查询问题,将编辑距离融合到排序的相关性函数中,因而无需给定编辑距离的阈值,提供了更加灵活的查询容错方式;同时,研究精确的Top-k算法,避免了近似算法带来的错误.字符串近似查询也得到了广泛的研究[12-17],主要考虑给定一组字符串,如何从中找到与查询字符串最相似的字符串.很多工作都使用编辑距离来衡Page3量字符串的相似性,计算相似性大于一定阈值的字符串.Xiao等人[11]讨论了一种Top-k方法,即找到与查询最相似的k个字符串,其基本的思路是不断地变化编辑距离的阈值,从而找到前k个结果.本文讨论的问题与字符串近似查询也有着显著的不同.除了文本相似性,本文研究的问题需要进一步考虑空间距离,因为其更为复杂.3问题的形式化描述数据模型:空间数据库中的一组POI对象O={o1,o2,…,o|O|}.其中任一对象o∈O包含空间位置信息l和文本信息T,表示为o=(l,T).具体来说,空间信息ol为二维空间内的地理位置点(xl,yl);本文信息oT={t1,t2,…,t|T|}为一组关键词的集合.每个关键词t∈oT都带有一个权重w(t),用来表示关键词t对于o的重要程度.本文采用信息检索领域经典的TF-IDF模型计算关键词的权重,即其中,词频tf(t,T)为t出现在oT中的频率count(t,T)|T|;逆文档频率idf(t,O)为包含关键词t的对象个数的倒数,可以通过log|O|行计算.图1给出了7个对象o1~o7的示例,以对象o1为例,它包含了空间上的一个位置点和两个关键词t1和t2.通过式(1),可以计算出这两个关键词的权重.图1空间数据上Top-k模糊关键词查询示例查询模型:空间相关的关键词查询q,同样包含空间位置ql和文本信息qT.为了对问题进行简化,本文主要讨论单关键词的情况,即查询q仅包含一个关键词qt,并把多关键词查询问题作为下一步的研究工作.查询的结果是集合O中在空间和文本上都与查询q最相关的前k个对象(简称为Top-k结果).下面具体定义文本和空间相关性.对于文本,本文允许查询关键词qt与对象中的关键词ot不完全一致,存在微小的差异.具体来说,
