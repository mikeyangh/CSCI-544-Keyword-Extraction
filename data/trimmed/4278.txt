Page1利用回放场景和情感激励检测足球视频精彩镜头于俊清1),2)张强1)王赠凯1)何云峰1)1)(华中科技大学计算机科学与技术学院武汉430074)2)(华中科技大学网络与计算中心武汉430074)摘要足球视频精彩镜头的检测和语义识别是实现基于内容的足球视频检索的关键技术之一,具有很高的学术价值和广泛的应用前景.文中改进了现有的回放场景和球门检测方法,通过回放因子特征的构造改进了情感激励模型的事件检测性能.针对不同用户的观看需求,给出3种不同粒度的精彩镜头边界.对足球视频中进球、射门和犯规事件的特点进行了分析,基于事件规则实现了这3类事件的语义识别.实验结果表明,加入了回放场景特征的情感激励曲线可以更精确地反应足球比赛的激烈情况.对于语义事件的识别,特别是对进球事件的识别具有较高的准确率和查全率.关键词回放场景;情感激励模型;事件检测1引言随着多媒体、网络和存储技术的快速发展,视频Page2段视频节目,而是希望观看视频中的精彩部分,即精彩镜头.以足球视频为例,人们通常更加关注进球、射门、妙传、犯规等精彩镜头.因此,从原始的足球视频中检测和识别出不同类型的精彩镜头,可以满足广大足球爱好者和工作者的不同需求,也是基于内容的足球视频摘要生成和检索研究的关键技术之一,具有很高的学术价值和广泛的应用前景.众所周知,“语义鸿沟”即视频底层特征与高级语义之间缺乏有效的内在联系,是基于内容的视频分析领域无法回避的基本问题.为了跨越这一鸿沟,研究人员尝试在低级特征层和高级语义层之间构造一个中间描述层作为纽带.中间描述层通常会融入足球视频这个特定领域的一些先验知识和规则,进而实现对足球视频的高级语义分析.图1描述了常用的三层结构的体育视频分析框架[1].其中高级语义分析是目前制约基于内容的视频检索实用化的主要难题,为了解决这一难题,国内外许多学者做了大量的研究工作,并已经取得一些研究进展.Ekin等人[2]通过提取视频的中低级特征,提出了一种有效的足球视频摘要生成框架,能够生成慢速运动、进球和基于对象特征分类的慢速运动3类摘要.文献[3]从视觉和听觉两个方面提取摄像机运动和大音量特征,基于受控马尔可夫链检测足球视频中的进球事件.该方法虽然能够检测出进球镜头,但误检率比较高.文献[4]在对视频底层特征分析的基础上,提取音视频关键字作为中级特征,基于隐马尔科夫模型来检测精彩视频片段.其中视觉关键字包括静态视觉关键字和动态视觉关键字两类.静态视觉关键字是指根据摄像机所拍摄的场地区域面积大小划分的镜头类型,包括远镜头、中镜头、特写镜头、观众镜头等;动态视觉关键字主要包括根据运动特征对摄像机运动状态的估计,包括静止、平移、快速平移、缩放等.Chen等人[5-6]提取音量、能量和频谱等音频特征以及镜头类型特征,采用C4.5决策树来实现对进球事件的检测.文献[7]利用图像处理技术检测球场线、比分牌、拥挤图像,并计算运动活性特征,利用支持向量机实现曲棍球、橄榄球和足球等体育视频事件的检测,准确率和查全率分别为56%和95%,但其并未实现事件的识别.文献[8]提取多种足球视频中低级特征,建立贝叶斯网络和动态贝叶斯网络分别在帧级和镜头级两个语义级别来识别进球事件、角球事件、点球事件和黄红牌事件.Tjondronegoro等人[9]对不同类型的事件进行统计分析,选择6个具有区分性的特征,根据统计结果建立一系列规则把足球视频事件分为进球、射门和犯规3类.文献[10]根据足球视频镜头类型、场地标志线和对镜头的全局运动估计,基于隐马尔科夫模型识别任意球事件.文献[11-12]结合网络直播文本对体育视频事件进行检测,实验表明检测到的事件类型更加丰富,准确率也得到较大提升.但网络直播文本的获取和文本事件与视频事件的对齐是此方法的关键和难点.上述的事件检测方法要么没有充分挖掘出对事件检测有效的视频内部或外部特征,要么需要通过学习训练建立复杂的模型来实现事件的检测,也不能对事件重要性进行量化分级.在足球比赛中,相同事件也会给用户带来不同的感受.例如,一场比赛中有多次射门,几乎进球的射门、打偏的射门或离谱的射门对于观众来说,其精彩程度显然不同.Hanjalic等人[13-14]从视觉和听觉两方面提取短时能量、镜头切换率和运动强度等特征,建立基于情感激励的精彩体育视频分析模型,该方法可以有效检测精彩事件和计算事件重要性,并且易于扩展到其他类型的体育视频,但运动强度特征的计算非常耗时.为了提高Hanjalic情感激励模型的计算效率,于俊清等人[15]事先对不同类型镜头的运动强度特征进行统计分析,得出每类镜头的激烈度值.在视频分析时,直接用不同类型镜头的激烈度值来替代运动强度的计算.实验表明,该方法不但能够避免大量的计算,而且没有降低模型的查全率和准确率.然而,这两种情感激励模型对精彩事件感知的灵敏性和定位的准确性方面仍需进一步提高.针对以上存在的问题,本文通过选择和提取足球视频中有效的底层特征和中层特征,如回放场景、球门等,有效地改进了文献[15]的情感激励模型,并根据足球领域知识,采用基于规则的方法实现了足球视频事件的语义识别.相比现有工作,本文的主要贡献在于:(1)设计了回放场景的自动和半自动检测方法,Page3构造了回放情感特征,并将其融入情感激励模型,提高了情感激励模型对事件检测和定位的准确性.(2)改进了文献[18]的球门检测方法,提高了球门检测的查全率和准确率.(3)提出了基于规则的事件分类方法,将精彩事件进一步分类为进球、射门和犯规,达到了不错的识别性能.本文第2节介绍回放场景特征的自动和半自动检测两种方法,以及改进的球门特征检测方法.回放场景是经过人工编辑对视频精彩事件的重现,富含情感和语义;基于回放特征的提取,第3节提出基于高斯函数构造回放情感特征,利用该特征有效改进了现有的情感激励模型,并利用回放场景定位精彩镜头;为了进一步对精彩镜头的事件类型进行识别,第4节提出基于规则的精彩事件识别方法,将事件进一步分类为进球、射门和犯规;第5节分别给出自动回放场景检测和改进的球门检测结果,分析了改进的情感激励模型的检测性能,并给出了基于规则的精彩事件识别结果.实验表明,本文提出的方法相比现图2具有固定运动模式的徽标转换示例图这些徽标转换过程具有固定的运动模式(比如以一个具有固定大小、颜色和亮度信息的徽标从左到右滑过屏幕).本文利用运动向量检测出徽标区域,基于徽标改进了文献[16]中的回放场景检测算法.如图3所示,回放场景的检测包括学习阶段和检测阶段.在学习阶段,通过镜头边界检测算法把足球视频划分切变镜头序列和渐变镜头序列.徽标的转换属于渐变,其转换过程大约持续1秒钟左右.把持续时间在一定范围内的渐变序列作为候选徽标转换集.利用光流法计算候选徽标转换集内每个渐变序列相邻帧之间的块运动向量.然后根据动态规划序有工作有较大提高;第6节对本文工作进行总结.2特征提取2.1回放场景检测为了使观众能够观看到更多的比赛细节,增强观众的体验,当精彩事件发生时,视频制作者往往会从多种拍摄角度进行拍摄,反复将从不同角度观察到的比赛细节展现给观众.或者用高速摄像机拍下事件发生时的情景,再以常速播放的方式使观众观看到事件发生时的慢动作画面.据此可以认为,具有回放场景的事件已经是经过人工选择的精彩事件.回放场景对于精彩事件具有强烈的暗示意义,回放场景是检测精彩事件的一个极其重要的特征.2.1.1基于运动特征和徽标的自动回放场景检测世界各大知名足球赛事的转播中通常都用固定的徽标转换特效,来提示观众其间是对比赛过程的回放.图2展示了2010~2011赛季法甲联赛和2010年南非世界杯的徽标转换过程.列匹配算法,计算候选徽标转换集内所有渐变序列之间的匹配度即相似度,从中选取一个最为可信的渐变序列作为徽标序列模板.文献[16]简单直接地选择具有最大相似度的渐变序列作为徽标序列模板.由于运动向量和序列相似度的计算存在一定的误差,这种方法并不能保证所选取的徽标序列模板是最为可信的.不同于这一做法,本文采用基于统计的方法确定徽标序列模板.查找候选序列间的最大相似度SCmax,统计每个候选序列与其余序列相似度大于1/3SCmax的序列个数ci,i为候选序列的序号.对于第j个选序列,如果cj>1/2max(ci),i∈1,2,…,N,N为候选序列Page4的个数,则把第j个序列归属到高可信度的徽标序列集中.进而选取高可信度徽标序列集合中与其余序列相似度之和最大的序列作为徽标序列模板,并选取徽标序列模板中相似度大于一定阈值的图像帧作为徽标模板帧,检测出徽标模板帧中的徽标对象的像素点集,记为L-pixels.在检测阶段,扫描候选徽标序列转换集中所有渐变序列,计算每个渐变序列中图像帧与L-pixels的颜色差.选择差值较小的帧组成候选徽标帧序列.计算其与学习阶段选取的徽标模板序列的相似度,据此判断其是否为真实的徽标序列.根据启发式规则,对得到的真实徽标序列进行配对,进而确定回放场景.回放镜头长度一般不超过一分钟,根据这一观察,本文改进了文献[16]中的回放场景识别方法.按图4没有固定运动模式的Logo转换示例图照徽标序列在视频中出现的先后顺序依次扫描,若两个相邻序列的距离,即两个序列首帧帧号之差,小于给定阈值(本文对于帧率为25fps的视频设置为1600),则认为这两个徽标序列是配对的徽标序列,记录该回放场景,跳过两个徽标序列继续向后扫描.若两个相邻序列的距离大于阈值,则这两个序列配对不成功,不能确定一个回放场景,跳过一个徽标序列继续向后扫描.直到所有候选徽标序列扫描完毕.由于限定了配对徽标序列之间的距离,因此,在出现的个别徽标误检或漏检的情况下,可能会造成回放场景的错误检测,但这种错误不会影响其余徽标的配对过程,确保其他回放场景的正确检测.2.1.2基于徽标像素模板的半自动回放场景检测大部分足球比赛视频中,徽标都以图2所示的固定运动模式从屏幕一侧滑向另一侧.但也有例外,如图4所示的2010~2011赛季德甲(图4第1行)和意甲联赛(图4第2行)视频中,其回放场景的徽标转换过程并不遵循固定的运动模式.对于这类视频,本文设计了一个半自动回放场景检测方法.在足球比赛视频回放场景中,徽标与比赛背景画面在视觉上存在明显的差别.利用图像分割技术可以将背景与徽标进行分离.基于OpenCV的GrabCut算法[17]利用图像中的纹理和边界信息,辅以少量的用户交互操作即可得到比较好的分割结果.对于运动模式复杂不固定的足球视频,基于GrabCut算法设计一个半自动检测徽标像素模板的工具,来分割出徽标像素模板.计算足球视频中每帧图像与徽标模板的平均颜色差.对于平均颜色差小于给定阈值(这里为10)的所有图像帧,如果其相隔帧号小于20,则认为属于同一个渐变序列,得到徽标帧集合.通过徽标帧的检测可以方便地识别出回放场景.Page52.2球门检测球门可以认为是足球比赛中最为重要的语义元素.大部分精彩事件发生在球门附近,有效检测球门对精彩事件的检测具有重要意义.为了适应多角度、远近距离均有效的镜头级的球门检测,我们对文献[18]的球门检测算法提出了3点改进:(1)文献[18]检测单幅图像中的球门,而本文要检测一个镜头中是否出现球门.由于镜头内的连续图像帧间内容相似度非常高,没有必要对镜头内的每一帧都进行球门检测.在同一镜头内,每隔10帧检测一次球门,可以大大提高球门的检测效率.(2)在对图像帧进行二值化时,部分像素可能被错误标记为白色像素.若这些被错位标记为白色像素的像素形成柱状区域时,很可能被误认为是球门柱.而图像中的球门不管光照如何,始终都是白色.因此,检测球门柱时,同时检查当前列连通区域中点及其左右两像素点RGB分量,若都大于阈值,则认为是候选球门柱.(3)由于摄像机拍摄角度和距离的不同,球门柱表现在图像上的宽度也不同,但其取值应该在一定的范围内.把候选球门柱在图像上的宽度值也作为球门检测的特征.图5给出了球门特征向量的提取流程.本文在图6事件-回放结构示意图文献[18]的基础上增加了两个候选球门柱的宽度,作为球门检测的特征.加上原有的5个特征,即两候选球门柱长度之差与图像高度的比值、两候选球门柱水平距离与图像宽度的比值、两候选球门柱纵坐标最大值与图像高度比值,两候选球门柱纵坐标最小值与图像高度的比值、两候选球门柱最大长度与图像高度的比值,构成球门检测的七维特征向量.利用学习能力和泛化能力较强的支持向量机训练球门模型,实现图像帧中是否有球门的二值分类.3改进的足球视频情感激励模型情感激励是Dietz等人[19]在1999年提出的三维连续情感空间模型中的一个维度.这种模型利用诱力维(valance)、激励维(arousal)和控制维(control)来描述情感.诱力维描述情感的类型(愉快-不愉快);激励维描述情感的强度(激动-平和);控制维描述情感的控制力度(紧张-松弛).足球视频主要在情感激励维上有很大的变化,因此,在提取足球视频精彩镜头时只考虑情感的激励维,通过提取情感激励特征并对其处理,使其满足可比性和平滑性标准后,建立情感激励模型,基于生成的情感激励曲线来提取精彩镜头.为了使情感激励曲线能够精确地反映比赛的激烈程度,将回放场景融入情感激励模型,进一步改进文献[15]的工作.3.1回放场景特征构造对大量足球视频进行观察,其中的精彩事件一般具有图6所示的特定语法结构.事件-回放结构(Event-ReplayStructure)的第一个节点是远镜头或中镜头,用来从整体上描述正常的比赛场景;连接节点是用于展现教练、观众或主要球员在事件发生后的动作或表情的特写镜头或场外观众镜头,最后是对事件进行各个角度具体反复展现的回放节点.Page6根据大量的观察发现,越是精彩的事件,其后的回放场景持续时间就越长.由于回放场景是一种滞后的反应足球视频情感变化的特征,也就是说回放场景与足球视频的真实情感变化并不同步.为了使情感激励曲线变化与事件发生的真实时刻同步以更精确地感知足球视频事件,采用类似高斯函数构造回放场景特征.以回放场景起始帧对应高斯曲线的波峰,曲线值向回放起始帧的两个方向逐渐递减.考虑到回放场景持续时间越长,所描述的事件越精彩,把回放场景的长度也作为一个重要因素.这里,回放场景特征的计算公式如下:其中,R(ki)为第k个回放场景中第i帧的回放场景特征值,i的取值范围为[-L(k),L(k)],L(k)为第k个回放场景的帧数,可以通过2.1节的回放场景检测算法得到.-L(k)表示从当前回放场景起始帧向前偏移的帧数.Lconst是用于把L(k)缩放到0~1之间的常量,这里,根据回放场景的一般持续时间,把Lconst设为2000.k0表示回放场景的起始帧.α用来控制回放场景特征值的递减速度,α的值越大,其峰值前后特征值的递减速度越快,本文α取值为5.3.2情感激励建模改进的情感激励模型,在现有情感激励模型中采用的镜头激烈度、镜头变换率和短时声音能量3个特征的基础上,加入了回放场景情感特征,构成新的情感激励因子.3.2.1特征预处理人的情感是连续变化的,不会出现瞬时的陡变.因此,情感激励特征值应该满足平滑性要求.这里,我们首先对情感激励特征值进行归一化,然后利用Kaiser窗对特征值进行卷积操作,使其满足平滑性要求,如式(2)~(4)所示.其中,gi(k)为原始特征点,gi(k)为归一化的特征点,K(l1,β1)为Kaiser窗.本文中,Kaiser窗的长度参数l1设置为300,形状参数β1设置为5.珟gi(k)表示用Kaiser窗平滑后的特征值.最后,用式(4)对珟gi(k)进行最大值归一化得到特征点Gi(k).3.2.2情感激励模型构建根据式(5)所示,对上述4个特征进行线性融合:其中,ηi表示第i个情感特征的权重,这里我们认为4个特征具有同等的重要性,因此设为1/4.Gi(k)表示第i个情感特征在第k帧处的激励值.为了满足情感状态的连续性和可比性,根据式(6)、(7)对线性融合后的结果再进行平滑和归一化处理.这里,式(6)中Kaiser窗K(l2,β2)和式(3)中Kaiser窗K(l1,β1)的参数不同.实际上,在足球视频中,这4个情感特征在精彩事件发生后,并非完全同步达到各自的峰值.一般来说,当精彩事件发生时,球场上观众的欢呼声和解说员的激昂解说声几乎随着精彩事件的进展最先达到峰值,即短时声音能量特征值最先达到峰值;紧接着,导播快速切换镜头以及较多地运用中、近和特写镜头来表现向观众传递精彩信息,镜头切换率和镜头激烈度特征值达到峰值;一旦精彩事件完成,导播会利用回放再次展现精彩细节,回放情感特征值达到峰值.同时,由于比赛节奏的紧凑,4个情感特征的峰值相距又很近,使得我们可以对4个情感激励特征的波峰进行处理,使其在融合后的曲线上表现出一致的特性.因此,这里的Kaiser窗K(l2,β2)的窗长参数l2应该比Kaiser窗K(l1,β1)的窗长参数l1稍大.但如果l2过大,又容易使紧邻的精彩事件产生重叠效应.结合实际实验,将l2设为700,β2设为5.3.3基于回放场景的精彩镜头定位方法根据前述的分析,本文认为回放场景的出现可以作为精彩镜头发生的重要依据.对于足球视频,精彩事件即将发生时,一般运用远镜头或中镜头从整体上描述正常比赛状况;事件发生后,用连续若干个特写镜头来展现主要球员、教练和裁判的动作或表情.紧接着,导播会利用回放镜头从多个角度再次展现精彩事件发生时的细节.根据这一观察,同时考虑到用户不同的观看需求,提出精彩镜头的短、中、长3种不同粒度的边界确定方法.(1)短边界.仅对精彩事件发展过程进行整体描述,即对应事件发生时的远镜头.(2)中边界.不仅可以欣赏精彩事件的整体发Page7展过程,而且可以感受到事件发生后裁判、教练和主要球员对事件的反应.对应精彩事件发生时的远镜头、中镜头和回放场景前的特写镜头或镜头.(3)长边界.可以欣赏精彩事件的整体过程,感受关键人员的反应,还可以反复从不同角度具体了解事件发生的细节.从事件发生时的远镜头、中镜头、特写镜头直到回放场景结束时的所有镜头都包含在长边界中.4基于规则的精彩事件识别4.1进球事件规则进球事件一定有球门出现.进球事件发生前,随着进攻方球员将球向防守方禁区的推进,现场观众的欢呼、呐喊声不断增大,解说员的解说声也越来越兴奋.进球事件发生后,安装在球场上不同位置的摄像机从各种角度拍摄进球细节,导播用多个特写镜头来渲染比赛场景,将比赛推进至高潮.回放时,至少会用一个远镜头从整体上描述双方的攻防策略,用多个中镜头或特写镜头再次展现相关球员、守门员和教练等在进球前后的细节表现.因此,在进球事件的回放中,镜头数较多,回放持续时间较长.根据上述分析,进球事件识别规则如下:(1)进球事件片段中有球门镜头出现.(2)回放场景前的镜头数目至少有5个,并且都是中镜头或特写镜头.(3)回放场景中的镜头数目至少有5个,并且至少有一个远镜头.(4)回放场景中包含特写镜头.(5)回放场景持续时间大于30s.(6)进球事件片段中的情感激励最大值大于0.6.4.2射门事件规则射门事件通常发生在禁区附近,根据球门是否出现判断是否在禁区附近.射门事件发生前用远镜头描述球员的跑位策略.射门事件发生后,用中镜头或特写镜头展现相关球员和教练失落的表情动作.在回放中,主要运用中镜头和远镜头再次描述射门时的细节.根据上述分析,射门事件的识别规则如下:(1)如果回放场景中和回放场景前均有球门镜头出现,且回放场景中只存在远镜头和中镜头,则认为该事件是射门事件.(2)如果回放场景中和回放场景前仅出现一个球门镜头,并且回放场景中只包含远镜头,则认为该事件是射门事件.4.3犯规事件规则犯规事件可能发生在球场的任何位置,没有区域限制,并且事件的发生比较突然,事先没有迹象表明即将发生犯规事件.事件发生后,一般用中镜头近距离展现犯规、被犯规球员的动作和裁判判罚.其回放场景中,仍以中镜头和特写镜头居多.为了不使比赛中断过长时间,比赛会快速进行.因此,其后的回放持续时间较短,镜头数目较少.根据这些观察,犯规事件识别规则如下:(1)如果回放场景中和回放场景前均没有出现球门镜头,并且回放场景中不存在远镜头,则为犯规事件.(2)如果回放场景中只有中镜头,个数小于等于3个,并且回放场景前的镜头数目大于等于3个,则为犯规事件.5实验结果与分析5.1基于运动特征和徽标的自动回放场景检测结果与分析实验选取南非世界杯和2010~2011赛季欧冠、西甲、德甲、法甲、意甲、英超联赛等国际重大足球赛事视频,共计7种赛事的10段比赛视频.表1为徽标帧和回放场景检测的详细结果.序号为1~8的视频,其徽标和回放场景的检测准确率和查全率均达到100%.视频9和10的查全率没有达到100%,原因在于:(1)视频9中,有两个回放场景只有一个徽标转换序列,虽然徽标识别的是完全正确的,但是由于没有与之配对的徽标转换序列,造成这两个回放场景没有被检测出来.从另一方面来说,虽然视频有缺失的徽标转换序列,但这种缺失没有造成其他回放场景的误检,这表明本文对回放场景检测的限制是合理的.(2)对第10个视频(英超联赛)观察发现,视频中表示回放场景的徽标一共有两种.一种用于进球事件回放,另一种用于其他类型事件回放.而本文的检测算法实际上假设同一视频中所有回放使用相同的徽标,不能处理同一视频多种徽标的情况.因而,视频10中进球事件回放被漏检.同时,由于其他类型事件占多数,故其余徽标和回放全部被正确检测.Page8表1徽标及回放场景检测结果徽标查全率/%视频序号11400010010070001001002620010010031001001003520010010026001001004500010010025001001005580010010029001001006600010010030001001007460010010023001001008540010010027001001009220010010010021001024081005.2球门特征向量提取算法与球门检测结果分析5.2.1球门特征向量提取算法球门特征向量的提取过程如图5所示,具体步骤如下:素进行增强.(1)读入视频帧,将彩色图像转换成灰度图像.(2)利用Top-Hat变换对灰度图像中的白色像(3)对步(2)得到的增强图像进行二值化.(4)球门柱的位置获取.逐列扫描步(3)得到的二值图像,统计每列白色像素的最大连通长度,把最大连通长度的区域作为球门柱1,次大连通长度的区域作为球门柱2,且球门柱1与球门柱2的水平距离大于18像素.对于白线区域像素,检查当前列最大连通线段中点及其左右相邻的两个像素点的RGB分量是否均大于给定阈值(设为200),若3个像素点的RGB分量均大于给定阈值,则认为该连通线段是候选球门柱.(5)球门特征向量提取.添加两个候选球门柱的宽度值作为检测球门的两个新特征.提取两候选球门柱长度之差与图像高度的比值、两候选球门柱水平距离与图像宽度的比值、两候选球门柱纵坐标分别用本文方法和文献[18]方法,对2段50min的足球视频进行镜头级的球门检测,结果如表2所示.可以看出,改进后的方法,球门检测的查全率和准确率大幅提升,分别达到了98.8%和91.3%,比文献[18]方法的结果要好不少.对检测错误的情况进行分析,漏检情况的发生主要是由于在一些镜头中,球门柱被遮挡或者摄像机没有拍摄到完整的球门.另外,一些图像中,身穿白色队服的球员以及球场周边广告牌上的白色文字经过图像处理后,容易形成类似球门的特征,对球门检测造成了干扰.表2镜头球门检测结果南非世界杯葡萄牙VS朝鲜下半场490本文方法1212898.493.8欧冠联赛流浪者VS曼联下半场310本文方法12111599.289.05.3精彩镜头定位算法与情感激励模型性能分析5.3.1基于回放场景的精彩镜头定位算法提取镜头关键帧,利用文献[20]的方法把足球视频镜头分为远镜头、中镜头、特写镜头和场外镜回放检测最大值与图像高度的比值、两候选球门柱纵坐标最小值与图像高度的比值、两候选球门柱最大长度与图像高度的比值、两个候选球门柱的宽度构成球门检测的七维特征向量.5.2.2球门检测实验结果分析根据摄像机拍摄时视角和远近的不同,人工从多个视频中选取400幅球门图像和600幅非球门图像作为训练集.采用C_SVC型支持向量机作为分类器,选取RBF核函数,设置惩罚因子为10.0,误差为0.1.头.根据回放场景来确定精彩事件起止点,结合用户不同的观看需求,给出精彩事件的短边界、中边界和长边界.精彩事件边界检测步骤如下:(1)对于当前回放场景,选取其起始帧作为查Page9找参考点.(2)跳过查找参考点前的第一个镜头向前寻找远镜头,确定精彩镜头的起始点.一般来讲,回放场景前的第一个镜头不会是精彩事件的起始镜头,故忽略该镜头,向前查找远镜头.如果在遇到上一个回放场景之前找到远镜头,就把该远镜头的起始帧作为精彩镜头的起始点;如果直到遇到上一个回放场景也没有找到远镜头,就把上一个回放场景结束帧的后一帧作为精彩镜头的起始点.把该起始点作为短、中、长3种边界共同的起始点.(3)以上一步查找到的远镜头的结束帧作为精彩事件短边界的终止点;以当前回放场景的前一帧作为精彩事件中边界的终止点;以当前回放场景的结束帧作为精彩事件长边界的终止点.5.3.2精彩镜头定位实验结果分析不同的人对精彩镜头的理解不同,有人认为只有进球和射门是精彩镜头,有人认为犯规也同样精彩.本文所指精彩镜头包括进球、射门、角球、任意表3基于回放场景的精彩镜头定位实验结果2010年世界杯决赛荷兰VS西班牙2010年世界杯小组赛葡萄牙VS朝鲜2010~2011赛季欧冠联赛流浪者VS曼联2010~2011赛季欧冠联赛国际米兰VS特温特12实验结果表明,本文提出的精彩镜头定位算法能够比较准确地确定精彩镜头的位置,结合3种起始边界的确定方法为以后生成面向用户观看时间的个性化的足球视频摘要奠定了基础.5.3.3改进的情感激励模型性能分析本文选取4段20min来自不同足球比赛的视频,对改进的情感激励模型性能进行分析.实验结果如图7所示,其中实线为改进后的情感激励曲线,双画线为改进前的情感激励曲线,垂直虚线表示人工标定的精彩镜头中点.对图7的实验结果进行观察分析,改进后的情感激励曲线与改进前的情感激励曲线相比,两者的走势比较相似,但前者的情感激励值比后者的情感激励值整体偏低.加入回放场景特征后,一方面,精彩事件的情感激励峰值得到了增强,另一方面拉低了一般事件的情感激励值.这突出了精彩事件,使其更易被检测.如图7(b)中14980帧处、19876帧处和27105帧处、(d)中16394帧处均为精彩的进球事件,改进后的情感激励曲线在这些事件处的表现球、换人、红/黄牌、越位、犯规等所有能够引起比赛明显暂停的事件.利用基于回放场景精彩镜头定位算法对不同类型的4段20min的足球视频的精彩镜头进行定位检测,实验结果如表3所示.由于本文提出的回放场景检测算法具有很高的查全率和准确率,因此,基于回放场景的精彩镜头定位算法也取得了不错的准确率,平均检测准确率达到了90.7%,其中对2010年世界杯小组赛葡萄牙VS朝鲜的准确率达到了100%.精彩镜头定位查全率不高以及少许精彩镜头定位不够准确的原因是这些精彩事件的镜头转换模式不完全符合图6所示的事件-回放结构.比如在2010年世界杯决赛荷兰VS西班牙的比赛中有一个危险的抢断事件和一个换人事件没有回放镜头而导致两次漏检;有一个射门事件的回放镜头滞后太多而导致漏检和误检各一次;有一个射门和一个犯规事件分别有连续两个回放镜头而导致两次误检.1814111154比其他位置更显独特.虽然改进前的情感激励曲线在这些位置的激励值也较高,但与其他位置激励值相差不大,没有很好地体现出进球事件的独特性.图7(a)和(c)所表示的足球视频没有进球事件,但其改进后的情感激励曲线分别有两处明显的波峰对应于对观看者来说精彩程度不亚于进球的事件.如图7(a)中5951帧和28960帧的波峰分别对应于角球形成的门前头球攻门和进攻球员突入禁区内正面球门的单刀射门事件,图7(c)中15203帧和18720帧的波峰都对应于禁区内极具威胁的射门事件.这些波峰所在的位置及其激励值的大小符合观看者的感受.此外,图7(a)中5000~10000帧之间实际有4个精彩事件,但改进前的情感激励曲线仅表现出2个波峰,而改进后的情感激励曲线具有4个明显的波峰.改进前的情感激励曲线由于没有使用回放场景特征,加之这几个事件发生时间非常相近,以至于改进前的情感激励曲线将这4个事件的波峰融合成了2个.观察图7(b)中2000~12000帧处,改进Page10图7改进前与改进后情感激励曲线比较前的情感激励曲线在这段区间内波动幅度明显比改进后曲线的波动幅度要小,没有正确反映这段时间激烈起伏赛况的变化过程.综合上述观察,改进后的情感激励曲线相对于改进前对事件的感知更加灵敏.5.4基于规则的精彩事件识别结果与分析选取2010年南非世界杯、2010~2011赛季欧冠联赛、法甲联赛、德甲联赛共7段足球比赛视频来验证基于规则的精彩事件识别方法性能.对进球、射门和犯规3类事件进行识别,实验结果如表4所示.其中,除了“2010年世界杯决赛-荷兰VS西班牙”的比赛视频中没有进球事件以外,对其余比赛视频中的进球事件全部正确识别,查全率和准确率均达到了100%.而对于射门和犯规事件,出现了容易相互误检的情况.经过观察发现,如果犯规事件发生在禁区区域内有可能被误检为射门事件;有些射门事件由于发生比较突然,同时为了追求拍摄角度,摄像机没有抓拍到完整的球门,容易被误检为犯规事件.整体来讲,本文所提出的的基于规则的精彩事件识别方法具有一定可行性,但仍需进一步发掘射门和犯规事件的本质特征,以提高识别率.文献[9]针对足球视频中的进球、射门和犯规事件,分别搜集了一些样本进行统计分析,进而建立一系列规则实现了这3类事件的识别,和我们的方法类似.将文献[9]的方法在本文数据集上进行测试,结果如表5所示.可以看到,文献[9]方法除了犯规事件查全率较本文方法高4个百分点之外,其余指标均低于本文方法.这表明,本文建立的识别规则更加具有区分性.对文献[9]中规则的进一步分析,发现其是在将足球视频序列划分成比赛(play)-暂停(break)片段的基础上对事件进行分类.这种比赛-暂停片段的持续时间实际上主要由现场的比赛进程决定,而与某个特定事件的类型并无明显关系.例如一个进球事件可能是经过长时间的巧妙配合完成的,也有可能是突发性的.建立在这种粗粒度边界基础上的一些时间特征(如事件持续时间)或比率特征(如比赛进行率)的区分性不明显.而经过情感激励模型,可以提取出事件真正精彩的部分.显然,对这种精彩事件片段建立识别规则相对容易些.Page11表4本文方法事件识别结果表5文献[9]方法事件识别结果2010年世界杯决赛2010年世界杯小组赛2010~2011赛季欧冠联赛2010~2011赛季欧冠联赛国际米兰VS特温特2010~2011赛季法甲联赛圣日耳曼VS布雷斯特2010~2011赛季法甲联赛2010~2011赛季德甲联赛沙尔克04VS拜仁2010年世界杯决赛2010年世界杯小组赛2010~2011赛季欧冠联赛2010~2011赛季欧冠联赛国际米兰VS特温特2010~2011赛季法甲联赛圣日耳曼VS布雷斯特2010~2011赛季法甲联赛2010~2011赛季德甲联赛沙尔克04VS拜仁6结束语本文实现了基于运动特征和徽标的回放场景检07202103103003303202102310010914814413723722912382847测和基于徽标像素模板的半自动回放场景检测以及基于支持向量机的球门检测算法.从视频观看者的角度巧妙地设计了一个能够反映比赛激烈程度变化的回放场景特征,将该特征有效地融合到原有的情Page12感激励模型从而改进了原有情感激励曲线的性能.提出了基于回放场景的精彩镜头定位算法,针对不同用户的观看需求,给出三种不同粒度的精彩镜头边界.基于足球视频编辑规则实现了精彩镜头的语义识别.实验结果表明,在较高的回放场景检测准确率的基础上,对进球、射门、犯规事件检测具有较高的查全率和准确率,尤其是实现了进球事件的完美识别.如何提取出更多有效的中级语义特征,填充视频“语义鸿沟”,准确检测更多高级语义事件,并实现事件的富语义标注,为有效的视频检索奠定基础,是未来的研究重点.
