Page1犽-选择网和Pi演算的表达能力李向宁1)郝克刚2)郭小群2)1)(西安电子科技大学电子装备结构实验室西安710071)2)(西北大学信息科学与技术学院西安710069)摘要文中定义了Petri网的一子类系列:k-选择网,它形成一个后类包含前类的Petri网子类的无穷序列,证明了此无穷序列的并集等于Petri网类,自由选择网是k=1的k-选择网,即1-选择网.在证明自由选择网系统可以用Pi演算表达的基础上,文中进一步证明了所有2-选择网系统可以用Pi演算表达.关键词Pi演算;Petri网;自由选择网;表达1引言vanderAalstWil曾向力主使用Pi演算[1-2]的学者提出了7个挑战[3],其中第4个挑战给出了一个Petri网系统的例子,问它是否能用Pi演算表达.这个挑战本质上是关于Petri网和Pi演算两个形式化系统相互表达的问题.我们曾证明了所有自由选择网系统都可以用Pi演算表达[4],通过在Pi演算中建立位置表达式和转移表达式,用它们之间的一系列通信归约过程来表达Petri网系统中转移激发的执行.Aalst的例子属自由选择网系统,因此可以Page2类.在此基础上,本文证明了所有2-选择网系统都可以用Pi演算表达.作为进一步研究的方向,本文最后提出一个猜测:3-选择网系统无法用Pi演算表达,k=2是k-选择网能用Pi演算表达的最高界限.3-选择网系统才是替代Aalst挑战的恰当例子.2基本定义定义1(自由选择网FreeChoiceNet).一个Petri网N=(P,T,F)称为是自由选择网,如果对于所有的p∈P,当|p·|>1时,p·中所有的t满足条件|·t|=1.为讨论方便,本文假定Petri网中位置的容量不受限制,弧的权值均等于1.定义2(k-选择网,k-ChoiceNet).一个Petri网N=(P,T,F)是一个k-选择网,如果对于所有的p∈P,当|p·|>1时,p·中所有的t满足条件|·t|k.其中k=1,2,3,…是自然数.根据以上定义,可以得出以下推论.推论1.自由选择网是k=1的k-选择网,即1-选择网.因为对于p·中所有的t,不可能有|·t|<1,所以|·t|=1同|·t|1等价.推论2.对任何k,k-选择网类是k+1-选择网类的真子类.从定义即可证明k-选择网类是k+1-选择网类的子类,要证明是真子类,只要构造一个k+1-选择网,使某|p·|>1且有t∈p·满足条件|·t|=k+1即可,显然此例不属于k-选择网类.推论3.对于任何一个Petri网,都存在一个k,此Petri网是k-选择网.因为要讨论的任何一个Petri网的P,T都是有穷集,所以总能找到一个足够大的k,使得对于所有的p∈P,当|p·|>1时,p·中所有的t,满足条件|·t|k,即此Petri网属于k-选择网.由推论3可知,Petri网类可以按照k-选择网的k值,排成一个后类包含前类的无穷序列,即1-选择网类(自由选择网)2-选择网类3-选择网类…Petri网类.图1是一个2-选择网的例子,图2是一个3-选下面引用文献[4]中相关表达的定义.设有Petri网系统N=(P,T,F,m0),用M={m|m:P→N}表示其所有标识组成的集合,其中择网的例子.N={0,1,2,…}是自然数集合.定义3(表达).我们说Petri网系统N能被Pi演算表达,是指在Pi演算的表达式集合E中能定义一个关于归约封闭的子集SEE,称为状态表达式集合,并且能定义一个SE的结构等价类SE≡到M上的映射φ:SE≡→M,使得下述两个条件成立(注:能定义一个SE的结构等价类SE≡到M上的映射φ:SE≡→M,也可以等同地说成是定义一个SE到M上的映射φ:SE→M,使得如果s结构等价于s∈SE,即s≡s,则φ(s)=φ(s)):(1)如果在Pi演算中有状态表达式s,s∈SE,使得s→s,则或者φ(s)=φ(s),或者令φ(s)=m,φ(s)=m,在Petri网系统N中有转移t使得m[t>m.(2)对于Pi演算中任何状态表达式s∈SE,令φ(s)=m,如果有t·∈P使m[t>m成立,则在Pi演算中有状态表达式序列s=s1,…,sk∈SE,使演算的归约式s1→…→sk-1→sk成立,且φ(s1)=…=φ(sk-1)=m,φ(sk)=m.32-选择网系统的Pi演算表达为证明任何2-选择网系统均可以用Pi演算表达,我们引入如下定义和引理.设有任意2-选择网系统N=(P,T,F,m0).定义4(2-选择网系统的状态表达式).在Pi演算中为2-选择网系统N中每个位置和每个转移分别定义一系列带状态的位置表达式和带状态的转移表达式.对每个位置取一个带状态的位置表达式,Page3对每个转移取一个带状态的转移表达式,然后把这些表达式用并行算子“|”连起来所构成的表达式称为2-选择网系统的状态表达式.根据定义4,2-选择网系统N的状态表达式集合SE定义为所有状态表达式的集合的结构等价关系闭包,显然它是Pi演算的表达式集合E的子集:SEE,而且从下述具体定义可知SE关于归约是封闭的.2-选择网系统的状态表达式按如下方法构造.首先对2-选择网系统N中每个满足|·tk|=2的转移tk(我们称这样的转移为2入转移,见图3),做如下标注:令·tk={pi,pj},在每个pi上设有标注集合Ai.在Ai中添加标注〈j,k〉(由于pi,pj中的地位是对等的,也可以在Aj中添加标注〈i,k〉,可以随意决定).令Ri=g-I,hi,珔hj(其中〈j,k〉∈Ai)为第一前缀),N中每个位g-置pi带状态的位置表达式(pi,q,Ai)定义如下:(pi,q,Ai)=!fi·Ri|其中q∈N,Ai是Ai的一个多重集.位置表达式(pi,q,Ai)的状态q等于表达式中Ri的并列个数.Ai是标注集合Ai的一个多重集.表达式中以珋lk为前缀的子表达式(珋lk·0)并列的个数等于〈j,k〉在Ai中的重数.根据Pi演算的归约规则,有下述归约式成立(省略结构等价的规约)(q=0,1,2,…):(pi,q,Ai)f-(pi,q+1,Ai)g→i(pi,q,Ai),(pi,q+1,Ai)h→j(pi,q,Ai+〈j,k〉),〈j,k〉∈Ai,(pi,q+1,Ai)珔h→i(pi,q,Ai),(pi,q,Ai)l→k(pi,q,Ai-〈j,k〉),〈j,k〉∈Ai.N中每个转移tk带状态的转移表达式(tk,h)的定义方式根据其入度的不同而不同.对于非2入转移tk,假定·tk={pi1,…,pis},tkTk=defgi1·…·gis·f-(tk,{})=Tk=gi1·…·gis·f-(tk,{gi1})=gi2·…·gis·f-(tk,{gj1,gi2})=gj3·…·gjs·f-…(tk,{gi1,…,gis-1})=gis·f-(tk,{f-(tk,{f-…(tk,{f-对于2入转移,假定·tk={pi1,pi2},tkpjr},Tk=deflk·f-(tk,{})=Tk.同样有从以上定义可知,转移表达式的状态是个集合,它可以是空集,也可以含有若干gi或若干f-移表达式的状态是空集,表明转移表达式尚未进行通信;如果转移表达式的状态含有若干gi,则表明转移是非2入转移,而且这些gj已经进行了通信;如果转移表达式含有若干f-lk(2入转移)或所有gj(非2入转移)已经通信过了,而这些f-tk有下述归约式:显然,根据Pi演算的归约规则,对于2入转移对于非2入转移tk有下述归约式:(tk,{})g-i→1(tk,{gi1})g-i→2(tk,{gi1,gi2})…g-is→-1(tk,{gi1,…,gis-1})g-→is(tk,{f-而所有情况都有(tk,{f-fjr→-1(tk,{f-对于非2入转移tk,我们把最后进入到(tk,{f-j1,…,f-发归约.对于2入转移tk,我们把下述同时进行的归约,称为tk的激发归约:Page4(pi,qi+1,Ai)h→j(pi,qi,Ai+〈j,k〉),〈j,k〉∈Ai,(pj,qj+1,Aj)珔h→j(pj,qj,Aj).以上定义中引入的(pi,q,Ai),(tk,h)只是为了论证而引入的代表某类表达式的记号,并不是新定义的带参数的进程名,归约时它们并不在表达式中出现.定义5(2-选择网系统Pi演算表达的映射φ).SE到M上的映射φ定义如下:假设Petri网系统N中有l个位置和n个转移,s是任意状态表达式,按照定义2,s可以表达为s=(p1,q1,A1)|…|(pl,ql,Al)|(t1,h1)|…|(tn,hn).其中qi,Ai是相应位置表达式的状态(i=1,…,l);hk是相应转移表达式的状态(k=1,…,n)集合.假设有某转移tk的后继位置集是tk令h0k={f-m=φ(s)定义为m(pi)=qi+∑n其中C(gi,hk),C(f-是否属于相应的hj和h0k(1表示属于,0表示不属于).C(k,Aj)表示〈x,k〉在多重集Aj中出现的重数.假设有任一个标识m,可以构造一个状态表达式s=(p1,m(p1),0)|…|(pl,m(pl),0)|(t1,{})|…|(tn,{}),即所有的位置表达式的状态qk等于标识m中相应位置的Token数,Aj都是空的多重集0,而所有的转移表达式的状态hk都是空集,显然有φ(s)=m,称为标准状态表达式.可见φ是SE到M上的映射(也称满射).另外从Pi演算的结构等价规则不难验证此映射φ满足:如果s≡s∈SE,则φ(s)=φ(s).引理1(映射φ满足条件1).如果在Pi演算中有状态表达式s,s∈SE,使得s→s,令φ(s)=m,φ(s)=m,则或者m=m,或者在Petri网系统N中有转移t使得m[t>m.证明.假定在Pi演算中有状态表达式s,s∈SE,使得归约式s→s成立,且令φ(s)=m,φ(s)=m.由状态表达式的定义可知,s到s的归约只能是某转移表达式的前缀f同某位置表达式的前缀f-的通信,或者是某位置表达式的前缀g-同某转移表达式的前缀g的通信,或者是相对于2入转移情况的两个位置表达式之间的前缀珔h,h的通信以及之后沿通道l的通信.如果是前两者,由于按照φ的定义,m(pi)=qi+∑n归约后第4项保持不变,可以类似于文献[4]证明:有φ(s)=φ(s)或者φ(s)[t>φ(s).对于后一种相对于2入转移的情况.如果是在两个位置表达式的前缀珔hj,hj之间进行通信,则归约后m(pi)中qi减1,同时m(pj)中qj减1,但由于C(k,Ai)加1,从而与转移tk的后继位置pj1,…,pjr相应的表达式中,由于C(f-正是tk激发后的标识,即φ(s)[t>φ(s).证毕.之后沿通道l的通信,尽管Ai中减少了一重〈j,k〉,但是转移状态表达式的状态却由(tk,{})变成了(tk,{f-了作用,因此φ(s)=φ(s).引理2(映射φ满足条件2).对于Pi演算中任何状态表达式s∈SE,如果有t·∈P,φ(s)[t>φ(s),则在Pi演算中有状态表达式序列s=s1,…,sk∈SE,使s1→…→sk-1→sk,φ(s)=φ(s1)=…=φ(sk-1)和φ(sk-1)[t>φ(sk)成立.证明.在2选择网的条件下,位置和后继的转移之间的关系仅有两种情况(如图4):|p·|1,或者对于所有的t∈p·有|·t|2.第1种情况,设|p1·=p2p1来证明映射φ满足条件2.唯一的不同是某些pi的前驱转移可能是2入转移的情况,这种情况我们在下面讨论.第2种情况,假定p·={t1,t2,…,ts},对于所有的i=1,…,s有|·ti|2.t属于其中之一.如果|·t|=1,·t={p},则应m(p)1.如果|·t|=2,令·t={pi,pj},则m(pi)1和m(pi)=qi+∑nm(pj)1均应大于1.按照φ的定义:Page5首先证明,如果φ(s)中m(pi)1,总可以从s进行一些归约,s→…→su,φ(s)=…=φ(su)保持不变,使得在su中m(pi)的qi1.查看φ的定义式,由于|piC(gi,hk)=0,因此第2项肯定为0.如果第4项1,即有k0,j0使〈j,k〉∈Aj而i∈h0k,即(珋lk,·0)并列出现在位置表达式(pj,q,f-Aj)中,进行沿通道l通信的归约,使得φ(s)保持不变而且f-得位置表达式中Ri并列项增加,从而使qi1.如果第3项1,进行沿通道f通信的归约,使qi1意味着位置表达式中Ri并列项至少有一项,由于Ri=g-gi·f-通信进行激发归约.在|·t|=1的情况下,转移表达式(t,{})=Tk=j1·…·f-在|·t|=2的情况下,与pi,pj相应的位置表达式中Ri并列项至少各有一项,相互沿通道hi通信进行激发归约.综上所述,有在Pi演算中有状态表达式序列s=s1,…,sk∈SE,使s1→…→sk-1→sk,φ(s)=φ(s1)=…=φ(sk-1)和φ(sk-1)[t>φ(sk)成立.证毕.定理1.任何2-选择网系统均可以用Pi演算表达.证明.设有任意2-选择网系统N=(P,T,F,m0).按照定义4,在Pi演算中定义关于归约封闭的状态表达式集合SEE,再按照定义5定义一个SE到M上的映射φ:SE→M.由引理1可知φ满足条件1,再根据引理2,对于2-选择网,映射φ满足条件2.根据定义3可知N可在Pi演算中表达.证毕.4结束语文献[4]曾证明Petri网的一个子类———自由选择网可以用Pi演算表达.本文将自由选择网加以扩展,定义了Petri网的一子类系列:k-选择网.本文首先证明了k-选择网将Petri网类分成了无穷个一层包含一层的无穷子类序列,进一步证明了所有2-选择网系统都可以用Pi演算表达.文献[4]提出的表达方法无法用于2-选择网的表达的原因在于,Pi演算一次只允许一个发送进程和一个接收进程进行通信,也就是说,只能保证两个进程之间通信的同步.而2-选择网中,2入转移的激发需要进程之间通信的多次同步,Pi演算无法保证.本文提出的方法首先让两个前驱位置表达式相互进行通信,接着与相应的转移表达式通信,然后再与后继位置表达式通信.在两个前驱位置表达式相互进行通信后,立刻把Token记在后继的位置的计数中,而不是在后来与相应的转移表达式通信以及与后继位置表达式通信后再计入,从而实现了对2-选择网系统的表达.显然这仍然是两个表达式的通信,没有超出Pi演算只允许两个进程通信的局限.因此本文提出的方法无法用于表达其它k-选择网,如3-选择网.Pi演算只允许两个进程通信同步,无法实现3个及以上进程之间的同步,因此文献[4]引入Pi+演算,以支持多进程之间的同步.我们猜测如图2所示的3-选择网系统是无法用Pi演算表达的,也就是说,k=2是可以用Pi演算表达的k-选择网的最高界限.我们将在进一步工作中对此猜测给出严格的证明.
