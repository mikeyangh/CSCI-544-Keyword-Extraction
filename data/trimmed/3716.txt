Page1低冗余主动测量IP级Internet拓扑的一种数据修正方法张昕1)赵海2)李晓光1)1)(辽宁大学信息学院沈阳110036)2)(东北大学信息科学与工程学院沈阳110004)摘要Internet拓扑的研究对于网络的应用与发展具有重要意义.由于交叉路由的存在,目前主动测量Internet拓扑大多采用多源点高冗余探测的方法,以发现单探测点情况下相对隐藏的链路.为降低探测难度与代价,避免由架设多探测点所带来的高度复杂性及重复性,给出一种针对单点测量数据的修正方法.基于授权的海量实测数据,提取隐藏链路的多核连接特征,使产生的测量结果更完整.实验表明,该方法可以大幅提高单点测量Internet拓扑的精确性,从而增强低冗余测量数据的可用性.关键词IP级Internet拓扑;单点测量;交叉路由;网络核数1引言趋复杂[1].拓扑的变化对网络的扩展、性能、安全等方面都具有重要影响,如何及时准确地获得网络拓扑即成为网络研究的重要一环[2].Internet拓扑测随着Internet规模的飞速增长,其拓扑结构日量及分析近年来得到许多研究人员的关注,在多个Page2角度和层面取得大量的成果[3-5].目前测量方式主要分为主动测量与被动测量,其中被动测量只能在固定点收集数据,测量范围狭窄,难以获得对网络整体的认识,且主要用于性能测量.因本文研究内容为大范围Internet拓扑,故此文中对被动测量方法不做更多讨论.由于BGP数据的开放,早期的研究工作主要基于BGP更新报文来获得AS级Internet拓扑[6],由于其测量的不完全性以及对路由级拓扑发现的需求,研究人员开始利用traceroute等机制获取拓扑,研究热点也逐渐向路由级拓扑转移.国外的研究工作主要有美国的NIMI(NationalInternetMeasure-mentInfrastructure)项目[7],利用traceroute等多种工具进行主动测量;IMP(InternetMappingPro-ject)①项目主要进行单点测量;采用公共traceroute服务器进行多点测量的Rocketfuel工具[8];通过自主开发引擎进行多点测量的CAIDA(CooperativeAssociationforInternetDataAnalysis)②Skitter项目等.本文工作基于CAIDASkitter项目,该项目在世界范围内的参与者共有二十余家,主要分布在北美洲、欧洲、亚洲的许多国家中的研究院所、军事机构及高等学府中.与其它项目相比,其选取的目标集范围更大,可以达到更高的测量覆盖率.国内的国防科学技术大学、西南交通大学等单位在基于ICMP协议的IP拓扑探测方面的技术比较成熟,但未见有针对大范围Internet,尤其是网络拓扑的相关研究较少[3,9].中国科学院计算技术研究所信息网络室开发的Internet网络测量与分析系统NIPMAS[9],其主要应用在于网络性能状态的监测,而不是拓扑发现.哈尔滨工业大学计算机科学与工程系通过自主实现的原型测量系统,对中国教育和科研计算机网(ChinaEducationandResearchNetwork)进行了测量[3,4,9],并获得与实际拓扑相近的结果,但其工作集中于国内单ISP范围,未有面向Internet整体的大规模扩展.在测量技术方面,由于单源点测量只能获得类树形的结构,造成测量结果不完全[10],故大多研究方案均采用多源点高冗余测量.多点测量弊端在于需要远距离(多跳数)架设测量源点,测量代价巨大.且由于路由级拓扑数据量巨大(以Skitter项目为例,每源点每天的测量数据集大小约为100M~200M),各点数据汇总的国际带宽代价与数据合并的计算代价也很大.而且多点测量数据中有相当程度的重复测量情况存在,以文献[4]为例,其3点测量结果与单点测量结果相比,重复数据约占70%.同时,文献[4]的研究结果还表明,单点测量与多点测量的结果虽有较大差异,但二者间仍具有可观的相似性,因此对其进行修正是可行的.本文由CAIDASkitter全球海量实测数据出发,分析单点测量误差所在,并进一步对其提出修正算法,从而给出在较小测量代价的前提下,获得高精度拓扑测量数据的方法.CAIDASkitter是基于traceroute机制的自主测量引擎,同时,这种机制也是目前较为主流的IP级拓扑测量方法.就已知的文献来看,其拓扑测量数据虽然来源各异,但分析结果比较一致(如幂率性质、聚集性质、层次性质等),网络的各项度量也十分接近,这说明各探测平台所的数据情况基本类似.由于测量范围、时间及地域跨度、数据量级都十分可观,Skitter获得的拓扑结果是各方研究成果中有代表性的一员,基于其测量数据的本文分析结论显然也可以体现traceroute机制下单源点测量的种种特性.这也就说明本文修正算法扩展到其它测量平台是很方便的,且对自主建立单测量源点进行IP级Internet拓扑数据收集和分析工作也有很高的实际应用价值.本文第2节介绍相关概念及数据特征;第3节分析单点测量误差分布性质;第4节给出具体修正算法及实验结果;第5节为全文总结与未来工作展望.2背景知识本文所用数据是由CAIDA授权获得,包括共计21个测量源点的Internet拓扑测量数据,覆盖110余万个IP地址,并包含这些地址间的290余万条连接.需要说明的是,本文所研究的Internet拓扑是指以Internet基础设施为支撑的拓扑,是一种逻辑拓扑结构,而不是物理拓扑结构.同时由于多接口路由器的存在,所得拓扑中路由部分实际上是接口级结构,为避免叙述混乱,本文称测量所得原始拓扑为IP级拓扑.通常对Internet拓扑进行分析研究时,如路由级拓扑数据分析,需要进行进一步的路由提取(如别名解析、主机IP去除等)工作,而AS级拓扑分析则可能需要IP地址与AS间的映射转①②ternetDataAnalysis.Page3换[10].一份相对来说完整可靠的IP拓扑数据对于进一步的研究工作具有重要意义,因此本文对单点测量的IP级拓扑进行修正,并通过实验论证本文修正方法的有效性.2.1相关概念首先给出本文所需定义的形式化描述如下.定义1.测量集/覆盖集/补全集.令S为测量源点集合,设i为集合中的一个元素,其可测的有效IP范围为Ni,则称由i出发测量所得Ni间连接的集合为i的测量集,记为Mi;称由S中所有元素出发测量所得Ni间连接的集合为i的覆盖集,记为Ci;Ci与Mi的差集为i的补全集,记为Pi.图1给出一个单点测量拓扑的例子.设其中a节点为测量源点,由a出发探测范围为节点集{b,c,d,e,f,g},依最优选路可知a对应的测量集为{ab,ac,ad,ag,ae,fg}.若令节点d为测量源点,则可探测到a节点未能发现的{cd,ef}(图中双细实线部分),故a的覆盖集为{ab,ac,ad,ag,cd,de,ef,fg},a的补全集为{cd,ef}.将IP级Internet拓扑抽象为一个无向图,各个IP地址看作图中单个的点,IP间的互联关系看作图中的边,给出主要的拓扑度量定义如下.定义2.节点度/节点度分布.一个节点i的度是指与其连接的其它节点的数目,记作ki.网络的节点度分布指的是网络中节点的度的分布情况,通常用分布函数P(k)来描述.P(k)是指随机选定一个节点i,恰好使得ki=k的概率.度分布是网络的重要几何性质,其中规则网络的各节点的度值相同,符合δ分布,随机网络各节点的度分布则为泊松分布.目前研究普遍认为Internet符合无标度分布,通常也称为幂律分布,是指网络的节点度分布可以用幂律形式来描述.幂律性描述了网络中节点度分布的极度扭曲现象,常用的幂律分布规律有frequency-degree和CCDF(d)-degree.文献[6]指出,由于frequency-degree幂律相当于考察度值k的概率密度函数(ProbabilityDensityFunction,PDF),而补累积分布比概率密度的统计对于分析样本的鲁棒性更好,故CCDF(d)-degree幂律能够更好地体现数据的拓扑特征.因此本文仅考察测量数据集的CCDF(d)-degree幂律,其形式如下:其中D(k)指度大于k的节点所占比例,也称补累积度分布函数.d为常数,称为补累积度指数.除幂律性质外,Internet网络还具有其它重要性质,其一是聚集性,也就是是图的成团特性,一般由聚集系数来衡量,同时富人俱乐部连通性通常也可看作是聚集性的一种体现,二者具体定义如下.定义3.局部聚集系数/聚集系数.图中节点的局部聚集系数为该节点所有相邻节点之间连接的数目占可能的最大连接数目的比例,所有节点的局部聚集系数的平均值为图的平均聚集系数,简称聚集系数.定义4.富人俱乐部连通性.图中有少量的节点具有大量的连接,这些节点被称为“富节点(richnodes)”.这些富节点们倾向于彼此之间相互连接,构成“富人俱乐部”.富人俱乐部连通性Φ(r)可以刻画富人俱乐部现象,它表示的是网络中前r个度最大的节点之间,实际存在的边数L与这r个节点之间最大可能存在的边数r(r-1)/2的比值.Internet网络还具拓扑意义上的层次结构,通常用核数来描述结点在网络中的层次深度.定义5.k-核.图的k-核是指在图中反复去掉度值小于等于k的节点及与其连接的边,所余下的子图.k值越大意味着该核在图中位置更靠近核心.由于图的各核间存在包含关系,因此本文用节点核数来描述网络层次,文中提到的不同拓扑层次即是指不同节点核数的节点集.定义6.节点核数/图核数.节点核数表示包含该节点的最核心的核,即指若节点核数为k,则该节点存在于k-核中,而不存在于(k+1)-核中.图中节点核数的最大值为该图的核数.以往按节点度值划分网络层次的方法存在一定偏差,节点度值与其层次深度并不完全一致,且在节点度阈值的确定方面主观性较强,不能很好地体现网络的客观性质,而核数作为网络拓扑特征值之一,较之节点度值具有更好的层次性质刻画能力.2.2单点测量的误差虽然文献[4]中的研究说明单点测量数据的图谱与多点合并数据的图谱十分相似,可以比较正确Page4地反映拓扑的内在本质,但在聚集系数方面则差异较大.为了进一步分析单点测量的不足,表1给出不同测量源点的测量集与覆盖集在多项拓扑度量方面表1若干不同测量源点数据的测量集与覆盖集度量对比补累积度测量源点覆盖IPriselingMirootMarinMerootM补全集的大小(覆盖集与测量集连接数之差)可以反映单点测量的连接发现能力,该集越大则发现能力越弱.由表1中可以看出,各源点补全集的大小均为测量集的40%左右,说明单源点测量的确是有很大不足.同时,各源点覆盖的IP地址空间大小相近,说明各源点之间并没有明显的探测能力的差异.在节点度方面,覆盖集与测量集的计算结果差别很大,尤其是度最大的1%的节点,由两个集合得出的平均度相差80~90左右,这也表明补全集更倾向于分布在高度值的节点当中.补累积度指数的差别表现为覆盖集结果偏小,这是因为单源点得到的测量集由于测量路径呈树状结构,其幂律倾向较之多源点的覆盖集数据更为严重.而在聚集系数和富人俱乐部连通性两个度量方面,覆盖集的计算结果较大,与测量集的计算结果差值十分明显.这是由于高度值的“富”节点获得了来自补全集的连接,从而加强了这些节点间的连通性.由文献[11]可知,这种连接的增强,直接影响到拓扑整体聚集性的提升,表现为平均聚集系数的提高.图核数通常用来考察网络的拓扑层次性质.在4个样本中,覆盖集的图核数较之测量集均有提升,同样也是因为高核数节点的度通常也较高,当连接增加时,这些节点获得更多连接,使得核数上升.其中arin源点数据的覆盖集图核数提升较多.由定义可知图核数取决于最高核,而最高核节点数通常都很少(几十个左右),这些节点间的连接稍微紧密一些,则其节点核数就会有所上升,因此较大的图核数提升幅度是正常的,不影响本文将其作为分析的基础.另外,各覆盖集的最高核平均度均有下降,这是因为与测量集相比,并非所有高度值节点都存在连接的增加,而是有相当部分的高度值节点连接增加很少或没有增加,其核数也就提升很少或没有提升,的比较.限于篇幅,由21个CAIDASkitter测量源点任选4个,将其所得测量数据的各项拓扑度量计算结果列出.平均聚集指数从而这部分节点没有出现在覆盖集的最高核中,使得最高核节点平均度下降.这同时也说明节点度并非影响补全集分布的唯一主要因素.平均最短路径长度也是考察网络的一个重要度量,但该指标需统计任意节点对之间的最短路径长度,计算量巨大.考虑到一般路由的优先机制,通常用平均跳数代替该度量.而拓扑测量的过程,正是由测量源点出发到各目的节点进行,对测量所得跳数求平均值,可认为是网络平均跳数的一次采样.更改源点并重复该过程,则可以获得另一次采样结果.当重复试验次数等于网络所含IP数时,其采样结果的平均值即是平均跳数的精确值.换个角度看,只要源点选择是随机的(不是位于网络中的特殊位置,如根服务器、核心路由等),则每个源点的统计结果与精确结果相比,也具有一定的代表性,而与单点或多点测量无关.因此本文在对单点测量方法进行分析和修正的过程中,不对平均跳数做更详细讨论.综合看来,表1中列出的4个测量数据集无论在基本情况如覆盖范围大小、平均度等方面,还是进一步统计的网络聚集性质、幂率性质、层次性质等方面,其表现都十分一致,各数据集的测量集与覆盖集的差异也十分相似.4个测量源点的地理位置与网络逻辑位置间隔均很远,但数据统计情况十分相似,据此可以认为单点测量数据具有相当的普遍性质,以部分源点的数据作为分析样本是充分的.故此本文不进一步列出其它测量源点的数据.3补全集分布分析对单点测量结果进行修正,主要是在测量覆盖IP范围内选择节点对并增加其间的连接,从而得到测量集与补全集的累加结果(即覆盖集)的过程.由Page52.2小节的分析可以看出,补全集的规模基本上可以确定,故修正方法的设计重点在于明确补全集的分布,即集合中各元素(连接)与其两端节点各项属性的关系,以此作为修正(增加连接)时选择目标节点的依据.3.1个体度量选择分析连接与节点的关系需要考察节点的属性.在常用的几个重要度量中,可以体现单个节点属性的主要有3个:节点度、局部聚集系数和节点核数.显然,如此表1所示规模的补全集,其分布必然十分复杂,其中的连接应与节点的各项属性均有关系.但为了更清晰地体现集合的分布,突出测量误差的主要倾向,并考虑到最终算法的复杂程度,本文对以上3个主要度量进行定性比较,选择其中特征最明显的一个作为分析的重点.(1)节点度节点度是拓扑分析最常用的度量之一,其可以标明节点在网络中邻居的数量,从而说明该节点的热门程度.一个路由器的节点度值越大,则说明在IP级拓扑中该路由连接着越多的子网或路由,其负担的路由任务也越繁重复杂.所以高度值节点也就很容易出现交叉路由,从而导致拓扑测量时连接相对“遗失”.2.2小节的数据分析也证明了这一观点,即高度值节点的“遗失”连接数目相对更高一些.但节点的高度值高遗失性质只是一种宏观现象,并非每个节点都符合该情况,这点在2.2小节对网络高核数部分的平均度做分析时已经指出.实际上,以riseling数据集为例,其最高度值节点在补全集中没有涉及任何连接,即该节点未产生测量误差,而极少数叶子结点却在补全集中有过百的连接.同时,节点度的大小跨度很大(由度值为1的叶子节点,到度值高达几千的核心节点),其中度值较高的部分节点的频数基本为1,所以通过节点度来区分不同节点在补全集的不同情况,过分严格地确定了个体性质,不易区分特例与共性,并会导致在算法中出现过细的执行粒度.即使按度值大小对节点聚类,也只是人为地指定分析粒度,重复工作量大,且很难找出最佳阈值.(2)局部聚集系数节点的局部聚集系数用其邻居间连接的紧密程度来说明该节点的聚簇状况.可以想象,一个聚簇性很强的节点,其遗失连接的可能性也就越小.同时文献[5]与文献[11]都指出Internet中存在十分明显的度簇负相关的情况,即是说节点的度值越大,其聚簇性越低(局部聚集系数越小).这印证了聚簇性与补全连接负相关的猜想,同时也说明局部聚集系数作为选择依据,具有与节点度相似的缺点,主要在于变化范围由计算精度决定,而高精度的计算会导致过宽的分析区间和过细的分析粒度,反之又会因过于粗略而无法区分不同性质的节点集.(3)节点核数核数主要体现节点在拓扑中的深度,深层次即高核数的节点所拥有的连接通常数量较多,即核数与节点度之间也有强的相关性[5].这种相关性使核数可以体现节点度所拥有的补全集分布性质,这一点在2.2小节的数据中有所体现,即高核数节点拥有较多的补全集连接.但更主要的是高核数体现拓扑层次复杂,并关系到连接遗失问题.举个简单的例子,一个星型网络的中心节点核数为0,它的度值再大也不会在测量结果中出现遗失连接的情况.所以核数性质对补全集分布有着不可替代的重要意义.并且网络核数通常不是很高(大约在几十左右),这样的分析粒度不至于太细,可以更好地体现整体规律,且更容易进行复杂分析并得出隐含的规律.综合看来,节点度、局部聚集系数与节点核数之间有着十分紧密的关联,因此在一定程度上可以进行取舍,而不会遗漏过多的有用信息.鉴于节点核数拥有对节点层次复杂性的刻画能力,并可以自然形成合适的分析粒度,本文选择其作为重点分析度量.3.2核间分析由2.2小节可知各测量源点的数据情况十分相似,选择其中之一做分析不会产生较大的个体偏差,同时考虑到分析的复杂性,本小节及随后的3.3小节均以riseling源点测量数据集为分析元数据来考察补全集分布特征.本小节对补全集中节点的核数分布概率进行统计分析.图2给出不同核数的补全集节点数目情况,图3则给出不同核数的补全集节点概率分布.其中图3纵坐标为对数刻度.图2中可以看出低核数节点的数目众多,图3则进一步指出大多数的补全集连接发生在低核数节点之间.为便于进一步的分析,通过曲线拟合,给出Page6核数与连接概率间的数学表达式,式中P为连接概率,C为节点核数:大多数Internet抽象模型都认为连接的两个端点是独立的[12-14],其给出的算法在建立连接时只是按同样方法进行两次节点选择.但本文涉及的连接集合(补全集)是以往文献未曾研究过的,因此需要进一步验证连接端点对核数的分布是否独立.将拓扑图中的无向边看作一对有向边,并将一对端点看作两个离散型随机变量,则其联合分布矩阵为一对称阵,记作犇0,该矩阵的边缘分布即是图3所示的分布.将边缘分布按行列相乘得到矩阵犇1,与原对称阵犇0相减得到误差值,而后为了表示方便取误差绝对值后按列相加,得到图4(a)所示的不同核数独立性误差情况.同时,为考察拟合式(2)的误差情况,也给出其独立性假设下的联合分布概率,即各核依式(2)计算结果的乘积,按其核数确定行列得到的对称阵,记作犇2.再将犇2与犇0相减得到另一组误差值,同样取绝对值后按列相加,得到图4(b)所示的不同核数拟合误差情况.很显然,图4(a)所示误差偏大,因此独立性假设存在误差.而图4(b)误差更大,即是说拟合函数的联合分布误差较原有误差更大,需要进一步优化才能加以利用.图4实测数据及拟合数据的各核数连接概率误差为避免最终概率公式过于复杂,本文延用端点独立性假设,通过优化式(2)的方法来达到降低拟合误差及独立性误差的目的.为选取除节点核数外的其它参量来优化式(2),需要细致观察各核的连接概率分布.同时为便于图示,选择了节点核数分别为0、5、10、15的节点集,在图5中给出其核数/概率曲线.图5不同核数的节点与其它核数节点的连接概率图5所示各核数节点的规律十分一致,即除横轴两端外,连接概率呈随核数上升而下降的趋势.这与图2和图3的规律一致,同时也表示除核数外仍有影响连接概率的重要因素存在.由图2与图3的对比可以看出,各核的节点数目同连接概率一样,也是随核数上升而下降,并在最低核数及最高核数两处呈相反趋势.通过对图5的分析可以看出,不同核数的节点数目应该是影响分布曲线的一个参数,但其数量级较大,且不同核之间的差值也十分巨大,不可直接用于优化连接概率函数,需要进一步调整,具体调整方法如下:(1)考察到核数与节点数目间基本呈幂率关系,先给出一个参考的节点数目表达式,式中N0为参考节点数目,R1、R2为参数:(2)由数据分析可以发现,在高核处由于节点数量较少,轻微的节点数目变化也会对连接概率产生影响,因此在对比各核实际节点数目与参考节点数目后,要通过与核数的幂做乘积运算,放大核数作为参数在高核部分的影响力.具体公式如下,式中P0为补偿概率,R3为幂参数,分母用于调整数量级.考虑到节点核数取值区间包含0值,因此加1后再作幂率运算:(3)最终的联合分布概率为式(2)与式(4)的组合,其中C1、C2和N1、N2分别为两个端点的核数与Page7节点数:P=(P(C1)+P0(C1,N1))×(P(C2)+P0(C2,N2))(4)由于式(5)中参数众多,因此本文通过浮点型遗传算法[15]来确定其中各参数最终值,遗传个体为向量(R1,R2,R3).将各核数及节点数目代入式(5),再依行列相乘后确定的概率矩阵记作犇3,算法评估函数即为∑i,j交、变异、选择操作,直至最优个体的评估函数稳定在某个区间.个体初始值范围及优化结果如表2所示.遗传个体R1R2R3表2中R1的初始值范围主要考虑了0核节点数目,R2由进一步的拟合得出大体范围,而R3则由犇0观察得出大致范围.图6为优化后重新计算的犇3与犇0相减得到的不同核数拟合误差,显然采用优化图7不同核数的节点在测量集与补全集的度值对比图7中可以看到,在低核数节点中无论测量集度值还是补全集度值,高度值节点极少,同时补全集分布集中于低测量度值节点,少数节点甚至获得了参数的式(5)虽然仍采用独立性假设,但已经可以很好的还原补全集节点在不同核数上的概率分布.3.3核内分析在确定补全集节点的核数概率分布后,为更精确地还原拓扑,还需要进一步确定在核数相同的节点之间连接是如何分布的.在同一层内描述连接的分布,应该考察节点核数以外的度量,基于3.1小节的分析,本文选择节点度作为考察对象.图7是不同核数节点在测量集与覆盖集的度值对比情况,子图(a)~(d)分别对应核数为0、5、10、15的数据,其中横轴为节点在测量集的度值,纵轴为同一节点在补全集的度值,通过二者的比较即可看出补全集的分布规律.为方便对比,统一了4幅子图的坐标轴范围.极高的补全集连接,使得图中点基本呈L型的密集状况.随着核数增加,节点度值逐渐增加,高度值节点的比例也开始增多,而补全集分布则愈加分散,图Page8中点分布逐渐向方形扩展,呈均匀化趋势.虽然由于高核数节点数目很少,在高核数部分该规律体现的不是十分明显,但仍可以看出随补全集分布核数增加的扩散趋势.由图7还可以发现,无论节点核数如何,补全集连接都不倾向于高度值节点,这说明节点度值对于补全集连接没有明显的吸引.图8给出的是在固定核数下,测量度值不同的节点在测量集与补全集中出现的频数对比,子图(a)~(d)分别对应核数为0、5、10、15的数据,以对数坐标显示,且为方便对比,统一了4幅子图的坐标轴范围.图8中明显可以看出,在测量集中和补全集中节点度值的频数分布十分相似.在低核数部分节点度呈清晰的幂律分布,低度值节点数量众多.而这部分节点在补全集中出现频数也是很高,即占有补全连接的数量大.同样,在高核数部分节点度的幂律分布不清晰,不同度值节点分布相对均匀,而同时节点在补全集中的频数也相对平均.这说明在核数相同的情况下,相对节点度来说补全连接是近似均匀分布的,而主要是由不同度值节点的频数大小,来决定该度值的节点拥有补全连接的数目多少.虽然补全集分布相对节点度来说基本是均匀的,但并非均匀分布到所有节点.图7中就可以看出补全集连接向少数节点集中的倾向,可以看作是一种分配不均的“马太效应”的体现,这种情况在网络图8不同核数的节点度值与频数关系分配连接作为补全集初始化;拓扑相关文献中多次出现[4-6],即大量连接向少数节点集中分布,而多数节点仅占有少量连接.在本文的补全集连接分布当中,这种倾向表现为少数低度值节点拥有相对多数的补全连接,借鉴已有Internet拓扑建模方法的连接优先分配设计思路,本文给出一种补全连接分配方法,来重现实际数据所表现的规律.设共L条补全边连接至核数为C的节点,分配方法如下:(1)在核数为C的节点中任选若干节点,对其(2)依补全连接的数目多少,依优先概率选择节点继续分配连接,直至L条连接分配完毕.该方法可以形成补全连接向少数节点集中的倾向,且考虑到图8所示的节点度分布,在低核数部分由于低度值节点数量巨大,这种倾向集中于低度值节点,易形成低度值高补全的结果;随着核数增加,节点度分布的倾向愈发不明显,同时因节点数目减少,则依该方法步(1)分配连接的节点比例增大,使得依优先概率分配的补全连接不在集中于低度值节点,从而形成较为均匀的分布.显然这种分配结果与图7所示实际数据是一致的.该方法与已有的连接优先分配方法相比,不同之处在于仅考虑补全连接优先,而不考虑节点原度值.本文所用优先概率公式如式(6)所示,其来源于文献[14],经实验验证表明,当δ=0.7时适用于本文的补全集分布规律,故未加Page9以改动,且经反复实验确定初始化节点数目为每核数50个(若核中节点数少于50则表示该核数的所有节点均参与初始化).图9是依照式(6),分别在单点测量数据集中,图9不同核数的节点算法补全与测量集度值对比对比图7可以看出,在低核数部分,补全集高度倾向低度值节点,图形呈近似的L型,与图7所示较为接近,仅是图形略显低矮,高补全连接的节点偏少;而随核数增大,补全集分布渐为均匀,在高核数部分则呈近似的方形,除个别节点外,其它部分与图7十分接近.由图7所示结果来看,可以认为本文的补全分配方法能够很好地还原实际数据的补全集分布规律.4修正方法及实验4.1具体修正方法设计在第3节对补全集分布的分析结果基础上,本节给出具体的单点测量结果拓扑修正方法.以下是具体算法:输入:IP级Internet单点测量拓扑输出:IP级Internet补全拓扑核数为0、5、10、15的节点上进行的补全连接分配实验结果.其中子图(a)~(d)分别代表核数由小至大各数据集补全前后的节点度值对比,与图7相同,横轴为节点在测量集的度值,纵轴为同一节点在覆盖集的度值.同样为方便对比,统一了4幅子图的坐标轴范围.1.L=输入拓扑中边的总数×43.8%;//依分析结果计算补全集边的数目L2.for(c=1;c<C;c++)//补全集分布初始化,C为输入拓扑的核数3.对输入拓扑中不同核数的节点集,从中各任选50//按不同核数初始化4.依式(4)计算各核间连接概率矩阵犇3;5.依式(6)计算各核内节点优先连接概率;6.for(l=1;l<(L-25×C);l++)//对补全集中初始化后剩余的连接选择端点7.{依犇3确定端点的核数C1、C2;8.在核数为C1的节点中依步5所得概率选择端点n1;9.do10.在核数为C2的节点中依步5所得概率选择端点n211.while(所选两节点n1、n2间没有连接);12.n1、n2间增加连接;//增加补全连接}13.endPage10算法的步1中的参数43.8%,是补全集连接的数目与单点测量结果连接的数目比例,其来源是对表1中数据的计算后取平均值.步2、3则是3.3小节给出的补全集分配方法的初始化部分,目的在于调整补全连接的倾向以及便于后续式(4)的执行.步4对应3.2小节核间连接分析结果,步5则对应3.3小节核间连接分析结果.步6至算法末尾为拓扑的具体修正部分,其中步7为选择补全连接所在的层,步8为在所选层内进一步选择连接的第一端点,而步9~11则是选择第2端点.4.2实验结果及分析为反映本文修正方法的效果,选择riseling和图10算法修正数据与原测量集及覆盖集数据的各度量对比图10给出了8个主要度量在修正前(即测量集)、修正后以及覆盖集中的相对值,图中纵坐标的数值用来体现修正前后的度量值与覆盖集计算结果的比值.图中各项修正结果中,仅节点平均度的修正结果不在测量集与覆盖集结果之间,而是略有超出,这是由于算法中的参数选择基于各测量点数据的平均值,从而使得算法在不同测量点上存在个体偏差.但该偏差幅度极小(小于2%),完全不影响修正效果.从图中可以明显地看出,修正算法很好的减少了测量集中存在的误差.具体的来说,droot节点数据在修正前其8项度量的平均相对误差(相对于覆盖集,按度量分别归一化后取绝对值,再对8项结果取平均值)为29.75%,修正后则减少为9.63%;reseling节点数据的修正前平均相对误差为85.63%,droot两个测量源点的原始数据作为输入拓扑,分别进行修正.其中riseling节点数据作为本文分析的主要数据源,可以验证算法的还原程度,而droot节点数据未曾进行过具体分析计算,因此对其修正的效果可以体现算法的普适程度.具体实验结果如图10所示,其中上图为riseling源点数据的计算结果,下图为droot源点数据的计算结果.为显示方便,图中各度量值均依照其各自数据的覆盖集计算值归一化,且由于riseling节点测量集数据的最高核节点平均度的规一化值较大(大于5),故图中只给出其示意结果.修正后为17.13%.而且两个源点的数据经修正后在各个度量方面均向覆盖集结果大幅靠拢,这意味本文修正算法对各测量源点均适用,可以广泛用于CAIDASkitter各单源点的拓扑测量方法,大大提高其测量结果的可用性.同时,由于traceroute机制在IP级拓扑测量方面的广泛应用,以及各主要数据源在目前所表现出的数据一致性,基于CAIDA自主traceroute测量引擎———Skitter实测数据的本文修正算法,可以进一步扩展到类似的主流测量平台.5总结与展望主动测量Internet拓扑中最常用的是多源点高冗余测量方法,从本文的对比可以看出单源点测量在各个方面都有很大不足,因此尽管单源点测量更Page11为经济便捷,但其应用价值有相当大的局限.本文通过分析单源点与多源点测量的差集,即补全集的分布,结合网络拓扑核数相关性质,得出单源点测量误差的近似的数学描述,并进一步给出具体算法对误差进行修正.实验表明,该修正方法可以极大地消除单源点测量拓扑的误差,使得其应用价值大大提高,从而可以十分方便地由单源点数据获得较为准确的Internet拓扑,或通过建立单测量源点对Internet进行有效的主动测量与分析.本文主要工作与贡献有:(1)统计对比了单源点与多源点测量结果数据的差别,定性分析了节点核数对于补全集的意义;(2)通过对实际数据的统计计算,量化补全集连接概率的端点独立性误差,并进一步结合各核节点数目分布,对连接概率拟合公式进行遗传优化,抽象出连接概率的具体分布公式;(3)在拓扑各层内,结合节点度值及其频数分析,进一步抽象出补全集在同核节点间的分布公式;(4)给出单源点测量数据的修正算法,可以大幅提高数据的可用性,且算法能方便地扩展到其它类似的测量平台.本文并未选取更多不同源点、不同时段的数据集进行计算,并且主要针对若干主要度量进行了统计,未作更为全面的考察.通过对CAIDA数据的分析,可以看出不同数据集之间的差别虽然存在,但仅体现在部分细节上,且相关研究表明[16],Internet演化近年来趋于平稳,尤其是近期不同时段数据的差别很小,因此可以认为本文所考察数据的量级以及范围是充分的.同时由文献[16]还可以看出,大规模拓扑分析仍以经典的若干特性为主,特征度量大多围绕主要特性进行描述,目前未见有全新的度量角度及相关度量方法出现,因此可以认为本文所考察的度量种类能够满足Internet拓扑分析之所需.尽管选取了充分、合理的考察范围与角度,但本文工作在其它方面仍存在一些不足,一是虽然本文方法可以扩展至其它测量平台,但不同地区、不同网段或不同测量方法可能会在修正算法及公式中有些许差别,因此在未来工作中要与更多的测量分析机构合作,对其数据加以分析并对修正算法加以完善;二是一些后续的研究工作可能需要更高精度的基本测量数据,同时还要尽量降低的测量代价,因此需要研究扩展的数据修正算法,通过架设多于一个(但又远远少于目前的数量)的测量源点,在测量代价少量增加的前提下,获取更高精度的测量数据,达到“按需索取”的自主平衡.
