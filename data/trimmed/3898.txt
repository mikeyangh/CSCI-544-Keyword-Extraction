Page1面向核心网的多层网络能耗优化方法伍元胜1)郭兵1)沈艳2)王继禾1)刘云本1),2)刘啸滨1)1)(四川大学计算机学院成都610065)2)(成都信息工程学院控制工程学院成都610225)摘要随着网络规模和流量的迅速增长,Internet的能耗问题变得日益严重.文中研究IP(InternetProtocol)overTDMoverWDM核心网的能耗问题,首先对多层网络的节能机制进行了分析,在此基础上,提出了一种多层网络能耗优化的ITO模型,充分考虑多层网络的体系结构和网络设备的模块化特性,协同使用网络业务流控制和网络资源配置与管理的方法,实现业务流在多个网络层合理的分配和路由以及网络设备的多粒度模块睡眠,以达到降低网络能耗的目的.实验结果表明,ITO模型能有效降低网络的能耗,在网络业务量较低时,可将网络功耗降到业务高峰期时的24%~38%.此外,该文还通过实验探讨了业务的疏导和旁通、不同的网络层组合、网络设备的动态功耗以及网络设备的模块化结构对网络能耗优化的影响,为构建节能高效的绿色网络提供了参考.关键词绿色网络;能耗优化;核心网;多层网络;IPoverTDMoverWDM;绿色计算1引言ICT(InformationCommunicationTechnology)行业作为全球增长最快的行业之一,其碳排放也不断增长.根据Gartner公司2007年一份名为《绿色IT:新一波产业冲击》的报告,计算机和电信设备每年的碳排放量约占全球碳排放总量的2%,而这一比例到2020年将翻番,节能减排已成为ICT领域必须面对的紧迫课题.随着互联网的快速发展,视频和语音等业务大量涌现,人们对网络带宽的需求呈指数级增长,这导致了互联网流量的迅猛增加.美国互联网流量监测机构Telegeography提供的数据显示,2008~2012年全球互联网的流量和带宽以超过50%的年平均增长率强劲增长①.为了满足不断增长的带宽需求,网络运营商必须不断投入更多、性能更强的网络设施,结果导致了互联网能耗②的高速增长.按照目前的增长趋势,2050年网络领域的能耗将达到2006年水平的13倍[1],其中核心网的能耗增长最快,未来将超过接入网成为互联网能耗的主体[2],因此,对核心网的节能研究变得十分必要.波长交换技术的应用使传统点到点光纤链路逐步演变为具有组网能力的光网络层.核心网由原来的IPoverTDM(TimeDivisionMultiplexing)(如IPoverSDH/SONET)发展到IPoverTDMoverWDM(WavelengthDivisionMultiplexing)(如IPoverOTNoverWDM)和IPoverWDM,演变成一个多层网络,其中,IPoverTDMoverWDM技术近年来为越来越多的运营商所采用.此外,出于可扩展性、兼容性和灵活性等方面的考虑,核心网的网络设备通常采用模块化体系结构.网络的多层结构和网络设备的模块化为网络的节能研究提供了新机遇.本文着眼于核心网络的能耗优化问题,研究IPoverTDMoverWDM网络的能耗优化技术.第2节介绍目前网络节能方面的相关工作;第3节讨论多层网络模型、节能机制以及功耗模型,在此基础上,第4节建立一个多层网络能耗优化模型———ITO模型;第5节讨论各个网络层、业务疏导和旁通、网络设备的动态功耗以及网络设备的模块化结构对多层网络能耗优化的影响,对ITO模型的有效性进行验证;最后是对全文的总结和未来工作的展望.2相关工作有线网络的能耗问题直到Gupta和Singh[3]的工作才开始被人们重视,此后,出现了大量关于有线网络的节能研究.文献[4]对近年来有线网络的节能研究工作进行了综述,本文仅介绍核心网节能研究方面的最新相关工作.核心网由多个网络层组成,核心网的节能研究也可以分为针对单个网络层的节能研究和针对多个网络层的节能研究.核心网的功耗主要来自IP层,因此,大量工作[5-8]致力于降低IP层的功耗.IP层的节能方法主要包括流量合并和流量分配两类.流量合并方法的主要思路是:通过对业务路由的调节,对网络中的流量进行汇聚,让尽量多的链路或结点空闲,并使空闲的链路或结点进入睡眠状态(或低功耗状态)以降低能耗.流量合并问题可形式化建模为一个数学规划问题,如混合整数线性规划(MixedIntegerLinearProgramming,MILP)问题[5]和整数线性规划(IntegerLinearProgramming,ILP)问题[6].这些问题通常是NP难问题,因此需要设计相应的启发式算法求解,如文献[5]的分布式算法和文献[6]的LR&HS算法.流量分配方法的主要思想是:假设链路有多种工作速率并对应多种功率,利用业务路由为每条链路分配流量,使链路工作在最佳的速率模式,从而使网络的功耗最小.文献[7]将此问题形式化为一个MILP问题,并设计贪婪算法求解.此外,①②Page3由于核心网汇聚了边缘网络的流量,结点很难完全空闲,文献[8]基于Floyd-Warshall算法提出一种路由Standby算法,为路由器引入Standby模式,通过调节业务路由将路由器转入Standby状态节能.多层网络方面的节能研究[9-12]主要针对IPoverWDM网络,主要思路是利用光交换传输技术的高能效优势,通过业务疏导和旁通技术使流量尽量由下层的WDM交换传输,减少IP层的流量以降低网络能耗.对IPoverWDM网络的高能效设计或能耗优化涉及IP层的路由和虚拟拓扑设计问题、WDM层的路由和波长分配问题以及WDM层的物理拓扑设计和再生器放置问题.这些问题可形式化建模为MILP问题[9-10]或ILP[11-12]问题,并以最小化网络的功耗为目标函数.TDM技术具有WDM技术所无法比拟的运管维能力,在当前的核心网中,SONET/SDH和OTN等TDM技术仍然被大量使用,但是对IPoverTDMoverWDM网络节能研究却较少.文献[13]使用基于流的形式化和基于接口的形式化两种方法分别对IPoverTDMoverWDM网络的结点进行功耗建模,但其实验案例网络则是一个静态网络,IP层和TDM层的拓扑都预先配置不能变动,这与单层IP网络路由问题相似.文献[14]的工作与我们的工作相似,作者针对IP/MPLSoverOTN/WDM网络建立了一个网络功耗优化模型,并使用候选路径分别实现IP/MPLS层、OTN层和WDM层的路由,但缺乏实验对模型的验证.本文主要探讨具有IP层、TDM层和光层的多层网络能耗优化问题,提出了一种多层网络能耗优化的ITO模型,通过对网络业务流进行合理的控制和对网络资源进行合理的配置与管理来实现对多层网络能耗的优化.我们通过实验对ITO模型的有效性进行了验证,并讨论了网络层、动态功耗和网络设备的模块化结构对网络能耗优化的影响.3多层网络模型及节能机制3.1网络模型本文的多层网络模型由IP层、TDM层和光层3个网络层组成(如图1所示),该模型的实例包括IPoverSONET/SDHoverWDM和IPoverOTNoverWDM网络.多层网络的每个结点通常由一组网络设备构成,包括IP设备、TDM设备和光网络设备(见图2),结点间通过光纤链路相连,结点处的网络设备通过物理线路相连(图1中以实线表示).TDM层和IP层的网络结点间没有直接的物理链路,使用下层网络提供的虚拟通路(如光层提供的光通路和TDM层提供的电路)建立自己的逻辑链路(图1中以虚线表示).各个网络层的链路集合通常不同(如图1所示),各个网络层的网络结点集合也不必相同,上层网络的结点集合是下层网络结点集合的子集.目前,核心网的网络设备通常采用模块化结构,网络设备被设计成由机框和模块卡两部分组成.根据实际的组网需求,可通过向机框添加相应的模块卡组建所需的网络设备.模块化设计使网络设备的灵活性和扩展性得以增强,可通过增加或替换模块卡实现对单个网络设备的扩容升级.此外,还可以通过多框集群的方式突破单个设备的容量限制,满足海量业务的处理需求.本文着眼于网络设备的模块化特性,根据业务负载与模块的关系以及模块间的层次关系,可将网络设备分为机框、线卡和接口3类模块.接口包括网络设备的物理端口以及与物理端口一同处于工作和空闲状态的相关组件;线卡是网络设备的众多模块的一类,它由一组接口所共享,能够与这组接口一同Page4处于工作和空闲状态;除接口和线卡以外的部分都属于机框的范畴.因此,本文的接口、线卡和机框是一种更抽象的概念,不一定与实际网络设备的接口、线卡和机框一一对应.如图2所示,网络设备的接口分为线路接口和支路接口两类,在多层网络中上层网络设备的线路接口与下层网络设备的支路接口相连.3.2节能机制在多层网络中,根据网络的多层结构和网络设备的模块化结构,可以通过以下4种节能机制实现网络功耗与网络业务负载相适应,达到降低网络能耗的目的.(1)多粒度的模块睡眠.根据前文的模块划分,可从接口、线卡和机框3个层次使空闲模块睡眠,即当接口空闲时,则接口睡眠;当线卡的所有接口都空闲时,则线卡睡眠;当机框的所有线卡都空闲时,则机框睡眠.当网络从业务高峰期转入业务低峰期时,通过合理的业务路由可使大量的接口、线卡和机框都处于空闲状态,让这些空闲模块睡眠,将有效降低网络的能耗.(2)业务到接口/线卡的动态映射.在网络的运行过程中,业务的时变特性将导致网络设备的活跃接口零散地分布于多个线卡、活跃的线卡零散地分布于多个机框.通过将所有的活跃接口聚集到单个线卡和将所有的活跃线卡聚集到单个机框可以降低功耗[7].对于多层网络结点处互联的多个网络设备,可通过设备间的密切配合,解除业务负载与接口的耦合关系,实现业务到线卡/接口的动态映射,以解决业务变动导致的接口和线卡的零散分布问题,降低网络的能耗.(3)业务的多级疏导与旁通.如果多个低速业务流①的传输路径具有公共重叠的部分,可将这些低速的业务流汇聚复用到高速的传输通路,从而提高传输通路的利用率,这种将多个低速的业务流汇聚复用到高速的传输通路的过程称为业务疏导.业务疏导是由业务路由实现的,业务路由决定业务流的传输路径和业务流到传输通道的汇聚和复用.通常,业务流传输路径的跳数越多,业务流的汇聚复用能力越强,即业务疏导能力越强,单跳路由和多跳路由对应的业务疏导分别称为单跳疏导和多跳疏导.在图1的多层网络中,IP层和TDM层都具有业务疏导能力,能够在分组和电路层面对业务进行两级疏导,提高链路带宽利用率,从而使更多的链路空闲,有利于降低网络的能耗.业务旁通是指多层网络中的业务流由下层网络设备处理和交换而不经过(即“穿通”)上层网络设备的过程.业务旁通可降低上面网络层的业务负载.在相同容量下,更上层的网络设备通常具有更高的功耗,因此利用光层和TDM层都具有的业务旁通能力,实现业务的两级旁通,减少TDM层和IP层的业务负载,可降低网络的能耗.(4)能量感知的路由.业务的旁通和疏导以及多粒度模块睡眠等节能机制间存在复杂关系,如业务的旁通可以减少上层网络设备的业务负载,减少上层网络设备的接口、线卡等模块使用量,能够降低功耗;同时,上层网络设备的业务处理也包括业务疏导,业务疏导的减少,使得下层网络链路的利用率降低,这意味着相同的业务量需要更多的链路传输,使用更多的接口、线卡等模块,增加了网络的功耗.能量感知的路由以网络能耗的最小化为目标,在多个结点和多个网络层合理的分配业务流,协调旁通与疏导、静态功耗与动态功耗等诸多因素,计算满足业务需求的最优路径和网络资源配置.3.3功耗模型网络设备的功耗pd可以分为静态功耗和动态功耗两部分,动态功耗pt(t)与网络设备的实际业务负载t相关,静态功耗ps为独立于业务负载的常量.对于模块化的网络设备,静态功耗又分为机框功耗pc、线卡功耗pl和接口功耗pp3部分,即网络结点功耗pn等于结点处的所有网络设备的功耗之和,即pd=ps+pt(t)=pc+pl+pp+pt(t);整个网络层的功耗②pnl等于所有网络结点功耗之和,即多层网络的功耗P等于每个网络层功耗之和:4多层网络能耗优化的建模如果将能量看成一种系统资源,则对能耗的管理和控制可归结为资源的配置和管理问题,而对资源的配置则需要以业务需求为依据.因此,在网络环①②Page5境下,可以通过网络业务流的控制和网络资源的配置与管理的方法降低网络的能耗.下面我们对IP层、TDM层和光层组成的多层网络的能耗优化问题进行建模,并将该优化模型命名为ITO(IP-TDM-Optical)模型.ITO模型实现了网络业务流控制与网络资源配置与管理的协同,通过路由的方法在多个网络层之间和网络层内部合理分配业务流,网络设备根据到达的业务负载对网络资源进行合理的配置和管理,将空闲的模块转入睡眠模式,以达到降低网络能耗的目的.ITO模型以网络流规划理论为基础,加入对核心网络的多层结构和网络设备的模块化特性的考虑,进而转化为一个线性多品种流规划问题,最终形式化成一个MILP问题.假设多层网络的所有IP设备、TDM设备和光网络设备具有相同的类型,并采用多框集群技术满足网络业务的大容量传输需求.IP设备具有多种类型的线路接口,下层的TDM设备为每个IP设备的线路接口建立相应的电路,因此,IP层设备的线卡/接口类型也称作电路类型.由于多层网络能耗优化不影响IP层的支路接口的工作状态,因此形式化过程中不考虑IP设备的支路接口.TDM设备通过单种类型的线路接口与底层的光网络设备相连,底层光网络也使用单种类型的光纤链路.底层光网络具有波长转换能力,光网络结点可以自由的分配波长.由于多层网络按照峰值业务需求供应资源,本文假设网络结点配备足够的机框和线卡等模块.4.1符号定义N3N2.和业务需求集合.(1)索引和集合x,y∈N1:光层的结点和结点集合.u,v∈N2:TDM层的结点和结点集合,N2N1.i,j,ii,jj∈N3:IP层的结点和结点集合,e1(x,y)∈E1:光层的链路(有向弧)和链路集合.d(ii,jj)∈D:IP层的结点ii到jj的业务需求r∈R:IP设备的线卡/接口类型和类型集合.(2)参数cp(r):IP设备的r类型线路接口的容量,r∈R.3(r):IP设备的r类型线卡具有的接口数.mp3(r):IP设备的r类型线卡的功耗.pl3(r):IP设备的r类型线路接口的功耗.pp2(r):TDM设备的r类型支路接口的功耗.pbpmw:光层的每条物理链路的波长数.c:光层每个波长的容量.n3(i,j,r)∈Z+f21(u,v,x,y)∈Z+电路的数目.层的业务需求)所使用的光层链路(x,y)提供的光通路数目,即光层的业务流.f32(i,j,r,u,v)∈Z+TDM层的业务需求)所使用的TDM链路(u,v)提供的r类型电路数目,即TDM层的业务流.需求流经IP层链路(i,j)的流量,即IP层的业务流.其中R+f(ii,jj,i,j)∈R+2:TDM层每个机框具有的线卡数.ml2:TDM层每个线卡具有的接口数.mp3:IP层每个机框具有的线卡数.ml2:TDM层每个机框的功耗.pc2:TDM层每个线卡的功耗.pl2:TDM层每个线路接口的功耗.pp1:光层每个支路接口的功耗.pbp2:TDM层单位业务的功耗,用于计算动态功pt3:IP层每个机框的功耗.pc3:IP层单位业务的功耗,用于计算动态功耗,pt单位为W/Gbps.(3)决策变量n2(u,v)∈Z+路数目,其中Z+耗,单位为W/Gbps.线卡数.2(u)∈Z+nc2(u)∈Z+nl2(u)∈Z+npt2(u)∈R+3(i)∈Z+nc3(i,r)∈Z+nl3(i,r)∈Z+np接口数.t3(i)∈R+4.2目标函数在ITO模型中,多层网络能耗优化的目标是最小化多层网络的功耗,即Pmin.TDM设备和光网络设备的支路接口直接与上层设备的线路接口相连,支路线卡无法自由分配支路接口,因此,支路线卡被纳入机框功耗考虑,支路接口功耗与上层的线路接口的功耗一并计算.由于相同容量的光网络设备的功耗Page6远比TDM和IP设备的小,而光收发器是光网络设备的主要耗能组件,因此,我们只考虑光网络设备支路接口(即光收发器)的功耗.用线性函数近似网络设备动态功耗与业务负载的关系[15],则目标函数为Pmin=min∑u∈N2∑i∈N3∑r∈R其中TDM层和IP层的功耗等于该层所有网络结点功耗之和,因此分别对u∈N2和i∈N3求和,网络设备的功耗包括:(1)机框功耗,分别为nc(2)线卡功耗,分别为nl(3)接口功耗由本网络层的线路接口和下面网3(r);pl络层的支路接口功耗两部分组成,分别为np(pp2+pbp(4)动态功耗,分别为t2(u)·pt由于IP层的线卡和接口有多种类型,因此计算功耗时需要对类型r∈R求和.光层只考虑支路接口功耗并与TDM层的线路接口功耗一并计算,即2(u)·(ppnp4.3约束条件在ITO模型中,每个网络层都有相应的约束条件,包括业务路由约束、链路容量约束和资源分配约束.相邻网络层并不是独立的,上层网络的逻辑链路即为下层网络的业务需求.下面介绍每个网络层的约束条件:(1)IP层约束∑j∈N3-{i}f(ii,jj,i,j)-∑j∈N3-{i}f(ii,jj,j,i)=t3(i)=∑ii,jj,j∈N3:d(ii,jj)>0∧j≠i∑ii,jj∈N3:d(ii,jj)>0∑j∈N3-{i}n3(i,j,r)np∑j∈N3-{i}n3(j,i,r)np3(i,r)mpnp等式(2)为IP层的业务路由约束,将每个业务需求看作一种商品,则路由约束即为多品种流量守恒约束.对于IP层的每个结点i和每个业务需求d(ii,jj):①如果结点i是业务需求的源结点,即i=ii,当网络中不存在环路时,从结点ii流出的所有业务流之和应该等于业务需求d(ii,jj),而流入该结点的所有业务需求之和应该为0,即②如果结点i是业务需求的目的结点,即i=jj,当网络中不存在环路时,流入该结点的所有业务流之和应该等于业务需求d(ii,jj),流出该结点的所有业务流之和应该为0,即③如果结点i为其它结点,即i≠ii∧i≠jj,此时,流入该结点的业务流之和应该等于流出该结点的业务流之和,即∑j∈N3-{i}f(ii,jj,j,i)=∑j∈N3-{i}f(ii,jj,i,j).以上3种情况可统一由等式(2)表示,而且与网络中是否有路由环路无关,该约束实现了IP层业务需求在IP层链路上的路由.等式(3)为网络结点的转发流量等式,近似等于所有流入该结点的业务流之和.等式(4)为链路容量约束,对于网络中的每条链路(i,j),所有流经该链路的业务需求的业务流之和(即该链路的总流量)不能超过链路的容量.等式的右边为链路的容量,注意此链路为IP层的逻辑链路,由TDM层的电路组成,因此,等式(4)中直接用TDM层的电路请求n3(i,j,r)表示逻辑链路.由于存在多种类型的电路,故需对电路类型r∈R求和.等式(4)在实现链路容量约束的同时,还将IP层的逻辑链路转换为TDM层的电路请求(即TDM层的业务需求),从而隐含实现了IP层和TDM层的层间约束.Page7等式(5)~(8)为资源分配约束.其中:等式(5)和(6)表示网络设备为链路分配足够的活跃接口,一个接口既是正向链路的发送端,又是逆向链路的接收端,因此分配的活跃接口数量不应该小于正向或逆向链路的数量;等式(7)为接口分配足够的活跃线卡,等式(8)为线卡分配足够的活跃机框.∑v∈N2-{u}f32(i,j,r,u,v)-∑v∈N2-{u}f32(i,j,r,v,u)=(2)TDM层约束i,j∈N3,r∈R,u∈N2:i≠j(9)t2(u)=∑i,j∈N3,r∈R,v∈N2:i≠j∧v≠uu∈N2∑i,j∈N3,r∈R:i≠ju,v∈N2:u≠v(11)∑v∈N2-{u}n2(v,u)np∑v∈N2-{u}n2(u,v)np2(u)mpnp2(u)mlnlTDM层的业务需求为IP层建立逻辑链路所产生的电路请求.TDM层业务的基本单位为电路,而IP层业务的基本单位为分组,除此之外,TDM层的约束条件与IP层的是类似的.等式(9)为TDM层的业务路由约束,经过每个结点的每种类型的电路数守恒.TDM层的电路有多种类型,因此每种电路类型r∈R都应该满足业务路由约束.等式(9)实现了IP层的电路请求在TDM层链路上的路由.等式(10)为TDM层结点的转发流量等式,TDM层的转发流量与IP层的转发流量具有相同的单位,因此需乘以电路容量将电路数转化为流量.等式(11)为TDM层的链路容量约束,与IP层相似,用光层的光通路请求表示TDM层的逻辑链路,实现TDM层与光层的层间约束.等式(12)~(15)为资源分配约束,其中等式(12)和(13)为TDM层链路分配充足的活跃接口,等式(14)~(15)分别为TDM层结点的接口分配充足的活跃线卡、线卡分配充足的活跃机框.(3)光层约束∑y∈N1:e(x,y)∈E1∑u,v∈N2:u≠v光层只考虑支路接口的功耗,因此不需要资源分配约束.光层的业务需求为TDM层建立逻辑链路所产生的光通路请求,业务的基本单位为光通路,约束条件与TDM层的类似.等式(16)为光层的业务路由约束,实现TDM层的光通路请求在光纤链路上的路由,由于光层网络结点具有波长转换能力,故不用考虑波长一致性约束.等式(17)为光层网络的链路容量约束,确保链路使用的波长数小于链路的总波长数.4.4ITO模型复杂性分析ITO模型所描述的3层网络能耗优化问题是一个MILP问题,比单层和两层网络的能耗优化模型[5,6-8]的复杂性更高.ITO模型的解空间随着整数变量数量组合增长,因此可用整数变量的数量刻画ITO模型的复杂性.的整数变量数量根据4.1节变量的定义,容易计算出ITO模型Ψ=(1+|E1|)·A2其中,排列A2数量.根据4.1节,有以下关系成立:|N3||N2||N1|=n,|E1|A2Ψ(|R|+1)·n4-(2·|R|+2)·n3+因此,Ψ的渐进上界为O(|R|·n4).第5节的模拟实验使用6个结点16条有向链路的网络,|R|为3,共有3660个整数变量,在最坏情况下,进行一次网络能耗优化的求解时间超过1h,内存消耗超过2GB,这在一定程度上体现了ITO模型的复杂性.5实验结果分析5.1实验环境本模拟实验使用数学工具GAMS/CPLEX求Page8解.CPLEX是一种高性能的MILP求解器,采用较高执行效率的分枝定界算法,通过计算一系列的线性规划子问题求解ITO模型.实验参数设置如下.(1)网络拓扑和业务需求.由于MILP问题是NP难的,因此实验使用6个结点16条有向链路的多层网络(如图3所示).每个结点对(ii,jj)的业务需求d(ii,jj)为[0,2·Davg]区间内均匀分布的随机数,其平均值为Davg,调节参数Davg的值为10Gbps,20Gbps,…,100Gbps,可获得不同大小的业务需求.(2)IP层参数.IP层设备以思科CRS3-4/S路由器的规格参数为参考,最大功耗为3080W,转发容量为560Gbps,机框的功耗为696W,每个机框可容纳4个线卡,每个线卡的功耗为446W.线卡有3种类型:14个10Gb/s的以太网接口的线卡,每个接口的功耗为10W;单个100Gb/s的以太网接口的线卡,接口功耗为100W;单个40Gb/s的POS接口的线卡,接口功耗为80W.(3)TDM和光层参数.TDM层设备以华为OptiXOSN8800的规格参数为参考,最大功耗为2052W,转发容量为640Gbps,机框的功耗为750W,每个机框可配备6个线卡.每个线卡的功耗为80W,每个线卡仅有1个容量为100Gbps的线路接口,接口的功耗为70W.TDM层设备的支路接口的功耗为与之相连的上层IP设备接口功耗的2/3,光层设备的支路接口的功耗与上层TDM层设备的线路接口的功耗相同.光层网络的光纤链路的波长数为40,每个波长的带宽为100Gbps.(4)动态功耗参数.动态功耗参数η表示网络设备动态功耗占最大功耗的百分比,即根据网络设备的动态功耗和转发容量可得到IP层和TDM层的单位业务功耗分别为3080η/560(W/Gbps)、2052η/640(W/Gbps).前面的机框、线卡和接口的功耗值包括动态功耗,需乘以系数(1-η)转化为静态功耗.5.2网络层与多层网络功耗通过为多层网络的每个网络层添加新的路由约束,禁用网络层的交换能力,从而研究各个网络层以及网络层组合在网络能耗优化中的作用.此外,禁用网络层的交换能力可使该网络层的业务需求经单跳路径传输,降低该网络层业务疏导能力(即由多跳疏导变成单跳疏导),使业务在下面的网络层旁通,达到研究业务疏导和业务旁通对网络能耗优化影响的目的.在4.4小节的基础上分别为光层、TDM层和IP层添加以下路由约束(见式(18)~(20)),并使用网络层参数ω(一个3位的二进制数)表示是否启用这3个路由约束,则可得到7种有意义的组合,每种组合的意义如表1所示.本次实验参数η取值为20%,分别对以上7种组合进行模拟实验,结果如图4所示.f21(u,v,x,y)=0,u,v∈N2,x,y∈N1:u≠v∧(x≠u∨y≠v)(18)f32(i,j,r,u,v)=0,i,j∈N3,r∈R,u,v∈N2:i≠j∧(u≠i∨v≠j)(19)f(ii,jj,i,j)=0,ii,jj,i,j∈N3:d(ii,jj)>0∧(i≠ii∨j≠jj)参数ω的值0(000)3个网络层都具有业务交换能力,即IPoverTDM4(100)禁用光层的交换能力,即IPoverTDM网络2(010)禁用TDM层的交换能力,即IPoverWDM网络1(001)禁用IP层的交换能力,即TDMoverWDM网络3(011)只有光层具有交换能力,即光网络5(101)只有TDM层具有交换能力,即TDM网络6(110)只有IP层具有交换能力,即IP网络(1)业务疏导与旁通对能耗优化的影响.当网络业务量低时,业务疏导可将业务汇聚到少数的链路传输,减少活跃的接口、线卡和机框数量,因此,业务疏导对网络的能耗优化起主导作用.但是由于光Page9层的功耗远小于IP层和WDM层,对光层而言业务疏导的节能效果非常有限,所以,电交换网络(ω=5,6)的能耗优化效果比光网络(ω=3)好,纯电交换的两层网络(ω=4)比光电混合网络(ω=1,2)的效果好.当业务量较高时,业务疏导在能耗优化的作用减小,业务旁通起主导作用,由于光网络能够实现业务在光域的波长交换,具有比电交换低得多的功耗,因此光网络(ω=3)的效果比电交换网络(ω=5,6)的效果好,光电混合的两层网络(ω=1,2)比纯电交换的两层网络(ω=4)的效果好.(2)网络层对能耗优化的影响.不同的网络层组合的能耗优化效果是不同的.如图4所示,3层网络(ω=0)好于两层网络(ω=1,2,4),两层网络好于单层网络(ω=3,5,6),不同网络层组合的网络能耗差异最大达30%.3层网络的能耗优化效果与两层网络(ω=1,2)相比优势并不明显,光电混合的两层网络(如IPoverWDM)能够很好地发挥电交换网络的疏导作用和光交换网络的旁通作用,增加额外的TDM层对网络能耗优化几乎没有提升,而且3层网络能耗优化的求解时间比2层网络的长得多.因此,从网络能耗优化效果和求解时间两方面考虑,IPoverWDM网络是比较理想的核心网络技术.5.3动态功耗与多层网络功耗我们使用3层网络(即ω=0),分别对动态功耗参数η的不同取值(取值分别为0%,20%,40%,…,100%)进行模拟实验,实验结果如图5、图6所示.结果表明,网络设备的动态功耗越大,网络的能耗优化效果越好,具体表现在以下两个方面.首先,当业务量不变时,动态功耗越大,网络的功耗就越低,当动态功耗由0%增长到100%时,网络功耗平均减少了10118W(见图5).其次,网络设备的动态功耗越大,业务低峰期时的网络功耗占网络最大功耗的比例越小(见图6).图6网络设备动态功耗对业务低峰期时网络功耗的影响5.4模块化结构与网络功耗网络设备的模块化设计会对网络的功耗优化产生影响.不同的网络设备设计,功能在线卡和机框间的划分是不同的,结果导致机框功耗与线卡功耗的比例也不相同.在5.1节的基础上,用模块化参数ζ表示机框功耗pc占机框和线卡功耗pc+pl的百分比,即ζ=pc/(pc+pl).动态功耗参数η的值为20%,参数ζ分别取值0%,20%,…,100%,模拟实验结果如图7所示.图7网络设备模块化结构对能耗优化的影响结果表明,机框功耗所占比例越小,网络的能耗优化效果越好,网络功耗就越小.当网络的业务需求较小时,网络设备的模块化结构对网络能耗优化的影响较大(最大达13461W).随着业务需求的增大,这种影响逐渐变小,并存在某些业务需求值(如Davg=80Gbps),使得这种影响达到极小值(影响不超过2399W).分析最优解可以发现这种影响达到极小所满足的条件是:网络各结点的接口和线卡的使用量(即处于活跃状态的数量)与活跃状态的机框上的接口和线卡总量(即配备的数量)非常接近.Page10容易理解,当业务量低时,少量的接口和线卡分担机框的功耗,当机框的功耗所占比例降低时,原有的部分机框功耗转移到线卡,而大量的线卡处于睡眠,因而网络的功耗得以降低.当前面的极小值条件满足时,活跃的机框的所有线卡和接口几乎都在工作,因而机框的功耗比例对网络的功耗影响也达到极小.目前核心网的平均链路利用率很低,优良的模块化设计的网络设备将有助于网络的功耗优化,减低网络的能耗.以上3个实验比较全面地验证了ITO模型的有效性.在图4中,ω的7种取值下的网络功耗都随业务需求的减小逐渐降低,在业务需求低峰期时(Davg=10Gbps)网络功耗可减小到业务高峰期(Davg=100Gbps)时功耗时的24%~38%.在图5和图7中,无论网络设备的动态功耗和模块化结构如何变动,网络的功耗随业务需求减小而降低这一结论始终保存一致.6结束语本文对多层网络的能耗优化问题进行了研究,讨论了多粒度的模块睡眠、业务的多级疏导与旁通和能量感知的路由等多种节能机制,建立了具有IP层、TDM层和光层3层结构的多层网络的能耗优化模型(即ITO模型).依据实际网络设备的规格参数,我们通过相应的实验探讨不同的网络层组合、网络设备的动态功耗和网络设备的模块化结构对多层网络能耗优化的影响.实验结果表明ITO模型能够有效降低网络的功耗,可将业务低峰期的网络功耗降低到业务高峰期时的24%~38%.本文的多粒度模块睡眠属于网络级睡眠,出于简化问题的目的,本文的优化模型没有考虑结点级节能机制,因此得出的优化结果实际上是一个上限值.接下来的工作可考虑业务量随时间变化的网络能耗优化技术,对网络的功耗进行更精准的建模,开发求解该模型的启发式算法,在大型网络环境中研究多层网络的能耗优化以及研究网络能耗优化与可靠性、拥塞和服务质量等因素的关系.
