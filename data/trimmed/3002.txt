Page1Web服务流程相容性和相似性分析李喜彤范玉顺(清华大学自动化系北京100084)摘要服务组合和服务替换是面向服务计算的研究热点,服务流程的相容性和相似性分析是其中的两个密切相关的问题,具有较大实用价值.基于着色Petri网建模Web服务流程,定义服务流程的正确性和相容性.提出服务良构性的概念,证明良构性能够保证组合服务可达终止状态的正确性.在相容性分析的基础上,提出服务流程相似性的定义,证明若新服务与要被替换的服务流程相似,则所进行的替换是上下文无关的,替换后无须再做组合正确性验证,给出相似性的判定算法.文中结论和算法改进了现有服务组合验证和服务替换方法的不足.关键词Web服务;服务组合;服务替换;相容性;相似性1引言Web服务是目前面向服务体系架构最流行的Page2服务或系统以满足用户的复杂需求.服务组合已成为构建面向服务、松散耦合、高适应性的应用系统的主要途径[1-2].组合服务的流程能否正确执行直接影响到用户需求是否能够得到满足,因此需要分析和验证组合服务流程的正确性,这方面的研究是当前面向服务计算领域的一个热点.服务组合的正确性可以通过分析参与组合的各成员服务流程的相容性来进行验证[3-4].另一方面,服务替换是与服务组合密切相关的一个问题[5].如果某个成员服务由于自身的软硬件故障或者外部环境改变(如网络阻塞、病毒威胁)等原因不能继续提供服务,那么将导致整个组合服务无法正确执行,用户需求也就无法得到满足.此时需要发现并选取一个与失效服务的流程相似的服务来替换,以确保替换后的组合服务仍然能够正确执行,也即需要保证替换服务与服务组合系统中的其他成员服务的流程相容.由此可见,服务流程的相容性和相似性分析是两个密切相关的问题,对于研究服务组合和服务替换具有较大的应用价值.由于验证服务流程之间的相容性通常需要对整个组合服务的流程进行分析,在服务替换频繁发生的情况下,不断重复的服务组合验证将耗费大量时间和资源,严重影响系统运行效率[5].因此服务相似性定义要与上下文无关,即在不需要验证组合服务全局流程的情况下就能判断选取的替换服务如果与被替换服务相似,那么就能够与服务组合系统中的其他成员服务相容,从而保证替换后的组合服务的流程仍然是正确的.分析Web服务的流程通常需要借助某种形式化方法,主要有基于有限状态机的方法[3]、基于进程代数(或PI-演算)的方法[4]和基于Petri网的方法[2,6-7]等.由于Petri网适合于对Web服务这种松散耦合的分布式系统进行建模,因此本文采用Petri网作为服务流程分析的理论基础.文献[2]提出了基于着色Petri网的Web服务模型,给出了4种主要的组合运算.文献[6]以着色Petri网为基础提出了面向消息的Web服务模型,该模型侧重于对Web服务元消息的描述及其对服务协同通信的影响.文献[8]借助工作流理论对Web服务流程进行建模,研究了基于信任关系的Web服务工作流服务质量调度方法.虽然Petri网能够对组合服务进行分析和验证,但是上述研究成果都没有对此进行深入讨论,没有指出具有哪些性质的两个或多个服务的流程是相容的.进一步地,这些研究工作也都没有涉及到服务流程的相似性和等价性分析.本文将组合服务看作是全局模型,而把各个参与组合的成员服务看作是局部模型.现有研究工作大多是对组合服务的全局模型直接进行建模,较少考虑单个服务流程的正确性,因此无法揭示组合服务流程与单个服务流程之间的内在关系.本文从组合服务的局部模型出发,基于着色Petri网建立单个服务流程模型,给出服务流程正确性的形式化定义.该定义不仅适用于单个Web服务,同时也适用于刻画组合服务的流程正确性.本文提出Web服务良构性的概念,并指出成员服务的良构性能够保证组合服务可达终止状态是正确的,从而简化了服务流程相容性分析的验证条件.为了研究具有哪些性质的两个服务可以进行替换,本文提出服务流程相似性和等价性的定义,并证明两个流程相似的良构的服务可以进行与上下文无关的替换,替换后的组合服务的流程仍然是正确的.本文讨论了相似性与相容性之间的关系,并给出服务流程相似性判定算法.本文第2节给出有关的基本定义;第3节分别讨论服务流程的相容性和相似性;第4节介绍相关工作并进行对比讨论;第5节给出结论和未来的工作.2基本定义Petri网具有直观的图形符号表示和坚实的理论分析技术,适合对Web服务这种异步并发系统进行建模.然而基本Petri网在实际建模过程中存在一些固有不足[9],因此本文采用着色Petri网建模Web服务的流程.有关着色Petri网的详细内容可参见文献[9].定义1(Web服务).Web服务是一个带标记的着色Petri网S=(N,A,L),其中N为一着色Petri网,且满足(1)P是有限库所集,P=PIC∪PIM∪PEM,其中:PIC是服务流程内部控制逻辑库所集,PIM是内部通信库所集,PEM是服务与外界通信库所集,PIC、PIM和PEM两两互不相交;(2)P中有两个特殊的库所,即起始库所i和终止库所o,满足·i=,o·=;(3)如果去除库所集PEM以及所有与PEM关联的弧,由此得到的Petri网称为服务S对应的工作流网N,记为N=Φ(S).若在N上添加一个连接库Page3所o到库所i的变迁t(即·t=o,t·=i),则N是强连通的;(4)p∈P,p≠i,满足Mi(i)≠且Mi(p)=,其中Mi是初始标识;(5)A是标记的非空有限集,a∈A为一字符串型的标识,其中τ∈A为一空标记;(6)L是标记函数,满足L:T→A.在定义1中,PEM中的每个库所都对应一个与外界通信的消息缓存区,每个与PEM连接的变迁称为通信变迁,对应一个与外界环境通信的操作(如发送或接收消息);服务流程内部库所包括PIC和PIM两部分,其中PIC表示内部控制逻辑的状态,而PIM表示内部的消息缓存区;标记集A表示该服务所有可能的操作语义,A中的每一非空标记字符串对应该服务的一个操作命名;标记函数L将服务模型中的每一个变迁映射到一个服务操作命名.而映射到空标记τ上的变迁所代表的操作行为是服务的内部行为,即不被外界观察到的行为.目前工业界已存在一些支持Web服务的业务流程建模语言,其中应用最多的是业务流程执行语言(BusinessProcessExecutionLanguage,BPEL),该语言已被OASIS组织宣布为描述Web服务流程的标准.需要指出的是,基于BPEL标准描述的Web服务流程可以方便地转换为本文定义1中的形式化模型.文献[10-11]提出了基于BPEL的服务流程向Petri网服务模型转换的具体方法,在此不再复述.本文主要研究如何利用定义1中的服务模型来形式化地分析Web服务流程的相容性和相似性.一个变迁t在标识M下使能,记作M[t〉.若服务在标识M下通过实施变迁t后到达标识M,记作M[t〉M.若服务在标识M下经过实施一个变迁序列σ∈T到达标识M,记作M[σ〉M.所有从标识M可达的标识集记为R(M)={M|σ∈T,M[σ〉M}.若标识Mf满足Mf∈R(Mi)∧Mf(o)≠,则称Mf为终止标识,所有终止标识的集合记为MF.定义2(正确的终止标识).服务S的终止标识Mf若满足p∈PIC,p≠o:Mf(p)=,则称Mf为正确的终止标识,记为Mcf.所有可达的正确终止标识的集合记为MCF.由定义2可知,正确的终止标识要求终止库所o中存在令牌,且其它的内部控制逻辑库所内不能含有令牌.反之,如果终止库所o与某个内部控制逻辑库所同时含有令牌,则表明该服务流程并没有正确结束.定义2中的正确终止状态并不要求所有非终止库所都不能含有令牌,而可以在外部或内部通信库所中留有未被消耗的令牌.这样的要求符合Web服务基于消息通信且彼此松散耦合的本质特性.定义3(可达变迁序列).若变迁序列σ=〈t1,t2,…,tn〉∈T满足M:Mi[σ〉M,则称σ为服务S的一个可达变迁序列.所有可达变迁序列的集合记为Σ(S).定义4(流程正确性).服务S的流程是正确的,当且仅当在外界环境总是能够满足服务S对外部消息的需求的情况下,下列两个条件同时满足:(1)M∈R(Mi),如果MMF,则σ∈Σ(S),使得M[σ〉Mf∈MF;(2)MCF=MF.定义4要求外界环境总是能够满足服务S对外部消息的需求,也即:当服务需要接收(或发送)消息时,外界环境总是能够适时地发送(或接收)该消息.在这种情况下,排除了因外界环境导致服务流程出现死锁的情况.这样的前提是合理且可行的[12].在实际分析过程中,只需要将服务的外部通信库所PEM以及所有与PEM关联的弧去除即可,即只需要考察服务S对应的工作流网N=Φ(S).根据定义4,服务流程正确需要满足两个条件.第1个条件要求服务流程总是能够到达终止标识,不会发生死锁;第2个条件则要求服务流程到达的终止标识都必须是正确的终止标识.3相容性和相似性分析3.1相容性分析如果参与组合的若干成员服务中某个成员服务的流程不正确,那么该服务必将导致整个组合服务的流程无法正确执行.因此,本文在后续讨论中均默认所有参与组合的成员服务的流程是正确的.此时组合服务的流程能否正确执行取决于各成员服务的流程是否相容.本组已有工作提出了Web服务组合的形式化定义[11,13],本文在此基础上给出Web服务流程相容性的定义.定义5(服务流程相容).设两个服务S1和S2能够组合,其组合服务S=S1S2.服务S1和S2的流程是相容的,记为S1~S2,当且仅当组合服务S的流程是正确的.Page4不难看出上述服务流程的相容性定义满足对称性,即S1~S2S2~S1.为了简化相容性的验证条件,本文考察一类具有良好结构的Web服务,即“良构”的Web服务.工作流理论通常要求所研究的工作流网是良构的,即要求网结构中由And-Split发出的两个并行分支必须由And-Join汇合,由Or-Split发出的两个选择分支必须由Or-Join汇合.在工作流网“良构性”定义的基础上[14],本文提出Web服务良构性的定义.定义6(服务良构性).服务S是良构的,当且仅当S对应的工作流网N=Φ(S)是良构的.根据上述定义,易知图1所示的服务S1是良构的,而图2所示的服务S2则是非良构的.下面给出一个关于良构的Web服务及其组合的重要结论.定理1.设两个服务S1和S2能够组合,其组合服务S=S1S2.如果服务S1、S2是良构的,那么服务S从初始标识可达的任一终止标识都是正确的,即MCF=MF.证明(反证法).由于MCFMF,若MCF≠MF,则Mf∈MF,但MfMCF.由Mf∈MF可知,Mf∈R(S,Mi)且Mf(o)≠.由于MfMCF,根据定义2可知,p∈PIC,p≠o且Mf(p)≠.根据服务组合的定义可知[11],PIC=PIC1∪PIC2∪{i,o},若p=i,则Mf∈MF,使得Mf(i1)≠且Mf(i2)≠.因此不妨假设p∈PIC1.由Mf∈MF可知,服务S1存在某个可达的终止标识M1f使得M1f(o1)≠且M1f(p)≠.因为服务S1对应的工作流网N1=Φ(S1)是强连通的,那么网N1中存在一条从i1到o1的基本路径C1使得pC1,并且存在一条从i1到o1的基本路径C2使得p∈C2,C2≠C1.进而可知,存在变迁t∈C1∩C2,而库所o1∈C1∩C2.这就与服务S1是良构的前提产生矛盾.因此原命题得证.证毕.根据定义4和定义5,判定两个服务的流程是否相容需要验证两个条件,即组合服务的流程总是能够到达终止标识,并且所有可达的终止标识都是正确的.而定理1的结论实际上指出,由良构的服务组合构成的服务,如果从初始标识能够到达某个终止标识,那么该终止标识一定是正确的.由此可见,成员服务的良构性有效地保证了组合服务可达终止标识的正确性.因此,不难得到下面的结论.定理2.设两个良构的服务S1和S2能够组合,其组合服务S=S1S2.服务S1和S2的流程是相容的,即S1~S2,当且仅当在外界环境总是能够满足服务S对外部消息的需求的情况下,M∈R(Mi),如果MMF,则σ∈Σ(S),使得M[σ〉Mf∈MF.证明.由定义4和定理1可直接得证.利用定理2的结论,在判定两个良构的服务是否流程相容时,只需要验证其组合服务从初始标识是否总是能够到达终止标识,而不会在某个标识下发生死锁的现象.需要指出的是,定理1和定理2的结论可以直接推广到3个或3个以上服务组合的情况.据我们观察,现实中独立开发的大多数服务(如基于BPEL的服务流程)都能够遵循良构性,因此利用定理2的结论可以大大简化服务流程相容性的分析过程.3.2相似性分析分析服务流程的相似性对于研究服务发现和服务替换技术具有重要意义[15].当参与组合的某个成员服务由于某些原因不能继续提供服务时,将导致组合服务无法正确执行.此时需要发现并选取一个与失效服务的流程相似的服务来替换.在服务组合研究中,替换服务与被替换服务的流程相似就必须Page5要保证替换之后的组合服务仍然是正确的,也即需要保证替换服务的流程与服务组合系统中其他成员服务的流程相容.可见,服务流程的相似性分析与相容性分析密切相关.由于相容性分析通常需要验证组合服务全局流程的正确性.若替换频繁发生,不断重复的服务组合验证将耗费大量系统时间和资源[5].因此,服务相似性定义需要与上下文无关,即在不需要验证组合服务全局流程的情况下就能判断选取的替换服务如果与被替换服务相似,那么就能够与服务组合系统中的其他成员服务相容,从而保证替换后的组合服务的流程仍然是正确的.两个服务相似并不一定要求两者的内部流程完全一致,而只需要两者在与外界环境交互通信的过程中表现出一定的相似性.因此,服务相似性的定义和分析主要关注服务表现出来的外部行为特性.下面给出几个关于服务外部行为特性的定义.定义7(通信变迁序列).对于某个可达变迁序列σ∈Σ(S),若忽略σ中可能存在的内部变迁,则得到相应的通信变迁序列ε=〈t1,t2,…,tk〉,其中L(tl)≠τ,l=1,2,…,k.记得到相应的通信变迁序列的操作算子为ε.定义8(相似变迁序列).两个可达变迁序列σ1,σ2∈Σ(S),其对应的通信变迁为ε1=ε(σ1)=〈t11,t12,…,t1k〉,ε2=ε(σ2)=〈t21,t22,…,t2l〉.σ1,σ2相似,记为σ1≈σ2,当且仅当k=l,j={1,…,k},L(t1L(t2j),φ(t1定义9(对偶变迁序列).两个可达变迁序列σ1,σ2∈Σ(S),其对应的通信变迁为ε1=ε(σ1)=〈t11,t12,…,t1k〉,ε2=ε(σ2)=〈t21,t22,…,t2l〉.σ1,σ2互为对偶变迁序列,记为σ1=σ2,当且仅当k=l,j={1,…,k},L(t1G(σ2).在定义8和定义9中,变迁的极性函数φ:T→{+1,0,-1}定义为:若变迁t向外界发送消息,则φ(t)=-1;若变迁t从外界接收消息,则φ(t)=+1;若变迁t不是通信变迁,则φ(t)=0.另外,本文将着色Petri网定义中的警卫(Guard)函数的定义域从单个变迁集扩展到可达变迁序列集.可达变迁序列的警卫函数G:Σ(S)→BoolExpression,即σ∈Σ(S),σ=〈t1,…,tn〉:G(σ)=G(t1)∧…∧G(tn).在此基础上,本文给出两个服务流程相似和等价的定义.定义10(服务流程相似).给定两个服务S1、S2,服务S2的流程与服务S1的流程相似,记为S2S1,当且仅当σ2∈Σ(S2),M2i[σ2〉M2,则σ1∈Σ(S1),M1i[σ1〉M1,σ1≈σ2,并且满足:(1)如果M1∈M1F或M1[τ〉M1f∈M1F,那么M2∈M2F或M2[τ〉M2f∈M2F;(2)如果t1∈T1,t1≠τ,使得M1[τ〉M1M1F,M1[t1〉,那么t2∈T2,t2≠τ,L(t2)=L(t1),φ(t2)=φ(t1),使得M2[τ〉M2M2F,M2[t2〉.定义11(服务流程等价).两个服务S1和S2的流程等价,记为S1≈S2,当且仅当S1S2且S2S1.如定义10所述,服务S2的流程与服务S1的流程相似并不能得出服务S1的流程与服务S2的流程相似.可见两个服务流程的相似关系并不满足对称性.而定义11所述的服务流程等价关系则满足对称性,即S1≈S2S2≈S1.需要指出的是,根据定义10和定义11不难证明服务流程的相似关系和等价关系均满足传递性,即S1S2,S2S3S1S3;S1≈S2,S2≈S3S1≈S3.如前所述,服务流程的相似性定义需要与上下文无关.下面将证明给出的定义10对于良构的服务是上下文无关的.引理.设两个良构的服务S1和S2能够组合,服务S1和S2的流程是相容的,即S1~S2,当且仅当:对于σ1∈Σ(S1),σ2∈Σ(S2),M1i[σ1〉M1,M2i[σ2〉M2,如果从σ1(σ2)中去除那些与σ2(σ1)无关的通信变迁之后,分别得到变迁序列σ1和σ2,σ1和σ2互为对偶变迁序列,那么下列两个条件必有一个满足(1)M1∈M1F或M1[τ〉M1f∈M1F,且M2∈M2F或M2[τ〉M2f∈M2F;(2)t1∈T1,t1≠τ,t2∈T2,t2≠τ,L(t1)=L(t2),φ(t1)=-φ(t2),使得M1[τ〉M1M1F,M1[t1〉,M2[τ〉M2M2F,M2[t2〉.证明.记服务S1和S2的组合服务为S.一方面,如果已知服务S1和S2的流程相容,σ1和σ2互为对偶变迁序列,那么此时组合服务S到达某个可达标识M.如果M是终止标识,则M1∈M1F且M2∈M2F.反之,根据定理2可知,服务S1和S2均没有到达终止标识,并且在标识M下存在某个变迁可以使能触发.因此命题的必要性得证.另一方面,如果σ1和σ2互为对偶变迁序列,不妨设组合服务S到达某个可达标识M.如果M不是一个终止标识,那么或者M1[τ〉M1f∈M1F且Page6M2[τ〉M2f∈M2F,或者t1∈T1,t1≠τ,t2∈T2,t2≠τ,L(t1)=L(t2),φ(t1)=-φ(t2),使得M1[τ〉M1M1F,M1[t1〉,M2[τ〉M2M2F,M2[t2〉.无论哪种情况,都可知σ∈Σ(S),使得M[σ〉Mf∈MF.根据定理2可知,命题的充分性得证.证毕.定理3.设服务S1,S2和S是良构的,如果S2S1,S~S1,那么S~S2.证明.对于σ∈Σ(S),σ2∈Σ(S2),Mi[σ〉M,M2i[σ2〉M2,从σ(σ2)中去除那些与σ2(σ)无关的通信变迁之后,分别得到变迁序列σ和σ2,σ和σ2互为对偶变迁序列.因为S2S1,根据定义10可知,σ1∈Σ(S1),M1i[σ1〉M1,σ1≈σ2.因此,当σ1中去除那些与σ无关的通信变迁之后得到变迁序列σ1,可知σ1和σ互为对偶变迁序列.又因为S~S1,根据引理结论知,M∈MF或M[τ〉Mf∈MF,且M1∈M1F或M1[τ〉M1f∈M1F;或者t∈T,t≠τ,t1∈T1,t1≠τ,L(t)=L(t1),φ(t)=-φ(t1),使得M[τ〉MMF,M[t〉,M1[τ〉M1M1F,M1[t1〉.因为S2S1,根据定义10可知,若M1∈M1F或M1[τ〉M1f∈M1F,则M2∈M2F或M2[τ〉M2f∈M2F.反之,若t1∈T1,t1≠τ使得M1[τ〉M1M1F,M1[t1〉,则t2∈T2,t2≠τ使得M2[τ〉M2M2F,M2[t2〉,且L(t2)=L(t1),φ(t2)=φ(t1).根据引理结论可知,S和S2的流程是相容的,即S~S2.定理3的结论表明,在服务都是良构的前提下,如果某个服务S2与另一个服务S1相似,那么对于所有与服务S1流程相容的服务S,服务S2与服务S的流程必然也是相容的.这一点在进行服务替换的过程中非常有用.如果服务S1是某个组合服务系统中的一个成员服务,当S1由于某些原因无法继续提供服务或者无法保证服务质量要求而需要被替换时,只需要找到一个与S1相似的服务S2进行替换即可,而不需要再对替换后的组合服务进行正确性验证.这是因为定理3的结论保证了用S2替换S1之后的服务组合仍然是正确的.由此可见,本文给出的服务相似性的定义是与上下文无关的.一些分析服务相容性的方法用到了“反(oppo-site)”服务的概念[16].对于一个服务S,改变其中所有与外部通信库所关联的弧的方向即可得到服务S的反服务,记为珚S.可见得到反服务的操作非常简单,并且易知一个服务与其反服务总是流程相容的,即S~珚S.下面给出与反服务有关的两个结论.这两个结论对已有的基于反服务概念来分析服务相容性的方法具有一定应用价值.反服务为珚S.如果S1S,那么S1~珚S.推论1.设服务S和S1是良构的,服务S的证明.因为S~珚S,S1S,由定理3可知S1~珚S.推论2.设服务S1,S2和S是良构的,服务S的反服务为珚S.如果S1S,S2珚S,那么S1~S2.证明.因为S1S,由推论1可知:S1~珚S.又因为S2珚S,由定理3可知:S1~S2.证毕.下面给出一个算法用于判断两个Web服务流程之间是否存在相似关系,即判断服务S2的流程是否与服务S1的流程相似.该算法本质上需要分别遍历服务S1和S2的通信可达树[11],并根据定义10来判断是否存在相似性.由于通信可达树的节点个数有限,且通信变迁个数也有限,因此该算法是可以终止的.服务流程相似性判定算法如下:SetT(S,M);//foralltransitionsofserviceSthatareSetU2=;//thesetofmarkingsofserviceS2thatSetM1=M1i,M2=M2i;IsSimilar(S2,S1)1.ifM2∈M2FifM1∈M1ForM1[τ〉M1f∈M1FelsereturnFALSE;2.foreacht2∈T(S2,M2)andM2U2ift2=τ,M2[τ〉M2elseM2[t2〉M2根据上述判定算法可以判断得到:图3所示的服务S3与图1所示的服务S1相似.实际上可以进一步得到,服务S1和S3是等价的.图4给出了服务S1的反服务S4,不难发现服务S1与服务S4是相容的,服务S3与服务S4也是相容的,从而验证了前面得到的结论.Page74相关工作及讨论组合服务流程的正确性验证是当前面向服务计算领域的一个研究热点.文献[14]以工作流网为基础,给出了工作流网正确性的定义,即要求同时满足可终止条件、正确终止条件以及无死变迁条件.文献[12]指出Web服务流程正确可以允许流程内部存在死变迁,由此提出“弱合理性(weaksoundness)”概念.文献[17]讨论了服务流程相容的3种不同的定义,并指出“完成(completing)相容”能够正确验证出所有异步服务流程死锁的问题.然而,这些定义并不能完全反映Web服务基于消息通信以及松散耦合的本质特性.由于Petri网适合于对分布式异步系统进行建模,因此许多研究工作均采用Petri网作为服务流程建模和分析的理论基础.文献[18]给出了一个基于Petri网的Web服务模型,提出了10种不同的服务组合方式,并指出可以借助Petri网的分析技术对组合服务进行验证.文献[2]提出了基于着色Petri网的Web服务模型,给出了4种主要的组合运算,并讨论了这4种组合运算以及组合模型的某些性质.文献[6]以着色Petri网为基础提出了面向消息的Web服务模型,该模型侧重于对Web服务元消息的描述及其对服务协同通信的影响.文献[7]提出了一种基于Petri网的语义Web服务自动组合方法,该方法能够同时考虑服务的输入/输出以及服务的行为约束.虽然Petri网能够对组合服务进行分析和验证,但是上述研究成果都没有对此做深入讨论,没有指出具有哪些性质的两个或多个服务的流程是相容的.文献[19]借助“虹(siphons)”理论研究了基于Petri网模型的Web服务流程相容性.然而,上述研究工作大都没有涉及到服务流程的相似性和等价性分析.服务流程相似性分析是与相容性分析密切相关的一个问题.文献[15]提到了研究服务流程相似和等价的必要性,区分了服务发现和服务替换两种不同应用背景下的相似性定义,但是作者没有讨论相似性与相容性之间的关系,也没有分析所给出的相似性定义在进行服务替换时是否与上下文无关.执行路径(trace)相似和互模拟(bisimulation)相似是异步并发系统行为相似性研究中两个最常用的概念[20].但是这两个概念并不能完全反映Web服务流程相容的特性和需求.执行路径相似的要求过于宽松,而互模拟相似的要求则过于苛刻[21].文献[16]主要研究两个服务流程的相容性和可替换性(substitutability).作者借助标记变迁系统(LTS)对Web服务的行为进行建模,提出了3个不同概念意义下的相容性定义,并相应地给出了3种不同的可替换性定义,同时指出可替换性定义分为与上下文相关和与上下文无关两种.但是作者并没有深入讨论与上下文无关的可替换性需要满足的充分条件.文献[5]采用进程代数建模Web服务流程,给出了与上下文无关的服务流程一致性的定义及其验证算法.作者指出Web服务需要为每种接收到的消息类型设置缓存区,然而基于进程代数的方法无法显式地建模这些消息缓存区.文献[22]使用Martin类型论(MartinTypeTheory,MTT)建模Web服务行为,研究了Web服务行为一致性与相容性的判定方法.但是基于进程代数或MTT的方法并不能对服务的内部选择操作进行精细的刻画,也无法建模和分析Web服务的结构性质(如良构性等).上述相关工作为本文展开服务流程相容性和相似性研究提供了很好的启示和基础.与之相比,本文Page8研究工作的特色在于:(1)采用着色Petri网建模Web服务流程,该模型能够对服务流程的消息缓存区和内部选择操作进行精细的刻画,较其他建模方法更为直观.在此基础上给出了服务流程正确性的定义,该定义允许服务流程正确结束时其内部或外部消息缓存区(也即通信库所)中留有未被消耗的消息.与现有正确性定义相比,该定义的要求更为宽松,更符合Web服务基于消息通信、松散耦合的本质特性;(2)分析了Web服务的结构性质,提出了Web服务良构性的概念,并指出成员服务的良构性有效地保证了组合服务可达终止标识的正确性,从而简化了服务流程相容性分析的条件;(3)基于着色Petri网模型提出了服务流程相似性的定义,该定义考虑了服务流程的内部选择操作.证明了该定义在进行服务替换时是与上下文无关的,并且讨论了服务流程相似性与相容性之间的关系.5结束语在服务组合验证研究中,服务流程的相容性和相似性分析是两个密切相关的问题,具有较大的实用价值.本文采用着色Petri网建模Web服务的流程,给出了服务流程正确性的定义,并在此基础上定义了服务流程的相容性.提出了服务良构性的概念,并指出成员服务的良构性能够保证组合服务可达终止状态是正确的,从而简化了相容性分析的条件.在服务流程相似性分析方面,本文给出了相似性的定义,证明了满足相似关系的两个服务在进行替换时是上下文无关的,并给出了相似性判定算法.本文工作对于研究服务发现、服务组合和服务替换具有重要参考价值.未来工作主要在3个方面展开:(1)本文中相似性判定算法的复杂度随通信可达树节点个数呈指数增长,未来将考虑采用稳固集(stubbornsets)的方法提高算法在产生状态空间方面的性能;(2)将研究当两个Web服务的流程不完全相容时,是否可以通过产生中介器(mediator)来帮助两者实现流程相容.目前学术界针对该问题已经有了一些研究成果,但是还没有一个系统化的解决办法;(3)本研究组正在开发和完善一套Web服务组合工具,以便自动化或半自动化地实现服务流程的建模、组合以及相容性和相似性分析.
