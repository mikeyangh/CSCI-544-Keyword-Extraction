Page1大数据驱动的自适应路由服务定制机制1)(东北大学软件学院沈阳110819)2)(东北大学信息科学与工程学院沈阳110819)摘要随着多种多样新型网络应用的涌现,传统的路由配置模式越来越难以适应用户多样化的数据通信需求.因此,需要依据用户对不同类型应用差异化的通信需求,在数据分组的传输路径上配置合适的路由功能,自适应地合成满足分组传输特性的路由服务,改善用户体验.根据由大数据带来的数据间关联关系新范式,文中试图从大量的应用通信流状态数据中,分析和获取用户体验与路由服务各属性之间的依赖关系,促进高效地实现路由服务的定制化.鉴于此,文中提出了大数据驱动的自适应路由服务定制机制(BigdatadrivenAdaptiveRoutingserviceCustomizationscheme,BARC),以网内大量流状态数据为驱动,建立了用户需求属性模型,挖掘用户体验对路由需求的依赖关系,获得候选路由功能集合;考虑商业化运营模式下用户和网络服务提供商之间的利益关系,提出了双方利益共赢的博弈策略,获得符合双方利益的最佳路由服务定制化方案.仿真实现和性能评价表明,文中提出的大数据驱动的自适应路由服务定制机制是可行和有效的.关键词路由服务;自适应;定制化;大数据;共赢;博弈1引言随着互联网技术的迅速发展,新型网络应用大量涌现,传统的路由配置模式越来越难以满足多样化应用的通信请求,网络服务提供商(InternetServiceProvider,ISP)需要在应用的数据通信路径上自适应地配置合适的路由功能(如带宽分配、差错控制、队列管理等),合成满足其分组传输特性的路由服务.例如,邮件应用的分组传输只需要路径计算和差错重传功能,可视电话则需要带宽分配、流量整形和可靠性保证等较复杂的路由功能来满足其服务质量(QualityofService,QoS)[1]需求.而且,随着网络用户数量的大规模增长,用户个体之间的差异也会导致对应用的通信需求更加纷繁复杂[2].因此,ISP面临着如何准确且高效地分析用户对不同类型应用的通信需求,并以此自适应地定制路由服务,从而优化用户服务体验的问题.由于大多数用户并不具备所需的专业知识来准确地描述其对路由服务的需求,通常只能以模糊的需求来表述,例如响应速度快、画面比较清晰、安全性高等,但这些需求往往难以被ISP识别并作为组装用户所需路由服务的依据,因此需要能把用户的模糊需求映射为ISP使用的准确信息机制.另外,用户对某类应用的通信需求往往是多方面的,而每方面的需求对用户服务体验的影响程度不同,因此如何有效且快速地分析用户体验对不同需求的依赖情况,也是ISP实现路由服务定制化的关键.越来越多的用户通过网络应用进行愈加频繁的通信活动,网络中应用之间通信流的数量大规模增长,使ISP所维护的流状态相关信息呈现出大数据特征[3].多种多样类型的应用对通信质量差异化的路由请求,不同类型应用(如邮件、IP电话、视频点播等)在传输过程中相关参数的实时值、变化量及用户体验变化情况等的数据,均在爆炸式增长,例如,仅阿里巴巴邮件服务系统每小时就要产生30~50G的服务跟踪日志[4],呈现出大数据的海量化(Volume)特征;不同用户的通信需求有很大差异,不仅导致通信过程中不同参数的重要程度以及参数设置、组合和调整方式更加复杂,而且用户需求和通信流状态的描述及存储方式也变得更加丰富多样,例如,不仅可以按二维表形式的结构化模式,还可以按文档、示例图片和示例视频等非结构化的模式进行描述及存储,呈现出大数据的多样化(Variety)特征;大量新接入的通信流、网络状态的变化和用户需求的调整,都会引起流的状态数据快速、动态变化,特别是对时间敏感型应用,ISP需要依据流的状态变化情况快速地做出响应,进行参数调节,例如,网络通话类应用对抖动的敏感性达到毫秒级[5],呈现出大数据的快速化(Velocity)特征;等等.近年来,互联网中应用之间的流通信量呈爆炸式增长,预计到2016年视频流类型的通信量将会占到互联网总通信流量的86%[6].这给传统的路由配置模型带来了巨大的挑战,例如,更加复杂的路由决策优化、成本控制优化和网络性能优化等NP难问题[6].然而,指数级增长的全网流状态数据给设计以用户服务体验为中心的路由服务带来新的机遇,以大量流状态信息及用户的体验反馈数据为驱动,实现ISP自适应路由服务的定制化.一些研究结果也表明,可以有效利用从网内大数据中获取的数据间关联关系,促进更高效地分配网内资源和最大化收益[7-8].因此,网络中流状态信息数据已经成为一种新型的网络资源[9],可以从中获取用户对不同类型应用的通信需求集合,挖掘用户体验对各项需求的内在依赖关系等有价值的信息[10],促进路由服务定制决策的准确性和自适应能力.考虑到在商业化网络运营模式下,对于不同的网络环境和网络状态,ISP选择不同的路由功能来合成不同特性的路由服务,其所付出的成本(如时间、费用)以及用户获得的服务体验也有很大差异,因此,用户和ISP双方利益的共赢问题[11]也应该是定制路由服务时需要关注的.本文提出大数据驱动的自适应路由服务定制机制.该机制以用户的服务体验为核心,利用网络中各类型应用的大量通信流状态数据为驱动,实现自适应路由服务的定制化目标,主要贡献如下:(1)提出了大数据驱动的用户需求属性分析模型,用来识别并标准化用户对不同类型应用的通信需求;(2)提出了大数据驱动的用户体验与各项需求的依赖关系模型,作为ISP选择合适候选路由功能和实时调整用户体验的依据;(3)提出了用户和ISP对路由服务的偏好评估方案,作为双方选择满意的服务组装和定价策略的依据;(4)提出了使用户和ISP利益均衡的博弈策略,实现定制使双方利益达到共赢的路由服务的目标.2相关工作网络环境中多样化的路由功能为ISP合成具有不同特性的路由服务提供了支持和便利,促进了许Page3多融合自适应思想的路由服务配置方案的提出.文献[12]考虑了内部网关协议和QoS感知策略来配置路由元素,提出了一种基于策略的QoS自适应路由决策;文献[13]提出了一个自适应的路由功能组装框架—网络即服务,通过动态地组合分布式路由功能组件,实现更优化和更灵活的网络效用管理;文献[14]利用可重构的服务组件,提出了一种组合决策流程来实现以QoS为驱动的服务合成,并与多目标进化算法相结合,提高组装效率;文献[15]通过接纳控制和端到端带宽预留,提出了一种自适应带宽重配置的QoS框架,以保证端到端每条流的QoS;文献[16]提出了一种基础设施即服务工作流管理器的机制,可以利用不同的设备平台为用户配置一套满足其QoS需求的工作流.然而,以上研究主要还是从改善网络性能的角度自适应地配置路由,并没有从用户需求的角度进行考虑,因此难以实现针对不同用户差异化的需求来定制路由服务的目标.本文提出的机制不仅考虑了定制化目标,而且利用网内大量通信流状态与用户体验之间的关联关系,优化路由服务配置条件,规划路由服务设计方案.当前也有一些关注用户需求,对服务进行定制化的研究工作.文献[17]提出了一个特征模型,依据高层抽象出的用户需求,实现原子网络服务的定制;文献[18]针对用户多样化需求问题,利用模块化的细粒度程序组件,提出一种基于粒度计算的多用户服务定制方案;文献[19]考虑用户倾向,借鉴基于属性的访问控制方法,提出一种用户服务定制模型;文献[20]基于用户偏好和用户决策策略,设计了一种以非功能性需求为依据的服务选择系统;文献[21]提出了一种上下文感知型可信云服务选择模型,能够有效地反映潜在用户的定制化需求.虽然以上工作从用户角度进行了服务的定制化,但没有考虑其端到端通信中的路由需求问题.本文的机制针对用户的路由需求,进行路由服务定制化,从而保证用户的服务体验,并考虑了网内大数据来优化定制方案.以上工作都没有考虑用户和ISP之间的利益关系.目前也有一些研究工作考虑了双方利益.文献[22]提出了效用感知型边缘路由选择机制,支持端用户和ISP进行协作式域内路由;文献[23]提出了一种路由带宽分配和定价模型,用来使用户和ISP在双赢的合作环境中尽量提高各自收益;文献[24]提出了一种改进的网络服务收费方案,目的是使ISP为用户提供更好的QoS服务并最大化自身利润;文献[25]考虑了用户的QoS需求和ISP的约束条件,提出了一个域间路由算法进行端到端专有路径规划.本文提出的机制不仅关注用户和ISP的收益问题,而且通过提出的利益均衡策略支持双方的共赢.3系统框架基于SDN控制平面和数据平面分离的设计理念[26],本文提出大数据驱动的自适应路由服务定制框架,如图1所示.控制平面作为定制路由服务的逻辑决策中心,其内部每个构件运行各自的方案,输出相关结果作为下一个构件的输入信息,最终获得当前网络状态下能够最佳满足用户和ISP利益的路由服务定制方案.数据平面不具备独立决策能力,只能根据控制平面的决策进行路由功能组装.控制平面是整个框架模型的决策中心,内部结构划分为模型分发层和服务定制层.其中,模型分发层从宏观角度出发,流状态信息数据构件负责获取和统计ISP所维护的大量各类型流传输时的状态信息数据(如用户对各类应用通信流的需求、流各相关参数的实时值、变化量及用户的体验反馈),并依据大量数据样本生成用户需求领域知识和用户体验对各项需求的依赖关系.需求领域知识包含用户对路由服务所有可能的需求信息,通过用户需求属性分析构件,对需求信息进行多维度和多粒度划分,生成用户的需求属性模型,来描述用户的通用性和可变性需求属性,从而为准确地识别和映射用户需求提供参照.用户体验对各项需求的依赖关系是指流的各项需求参数对用户体验的影响程度.服务组装和定价构件提供多套组装和定价策略,用于对候选功能进行服务组装和定价.服务评估构件根据用户和ISP各自利益需求,分别为双方提供偏好评估模型,用于进一步均衡博弈.基于模型分发层的整体规划,服务定制层从微观角度具体地为每一个用户的应用通信请求定制路由服务.体验—需求依赖性分析构件对获取的用户需求进行分析处理,获取可实现各项需求的候选路由功能集合.博弈策略构件以用户和ISP之间的利益均衡为目标,获取当前网络状态下最佳满足双方利益的路由服务定制策略.数据平面不具备分析和决策的能力,只需要根据控制平面既定的路由服务定制方案,在应用的通信路径上配置路由功能,合成路由服务.路由服务定制化流程描述如下:(1)ISP接收用户对某类应用的通信需求;(2)对接收的用户需求依据需求属性模型进行映射,获得可被ISP识别的Page4图1自适应路由服务定制框架需求集合;(3)对此需求集合利用体验—需求关联模型进行分析,经过体验—需求依赖性分析构件获得用户体验对各项需求的依赖程度;(4)依据上述结果选择可满足上述需求的候选路由功能;(5)依据服务组装和定价构件获得组装和定价策略对;(6)根据与策略对相应的多套服务和价格组合,依据偏好评估模型分别得到用户和ISP对各服务和价格组合的偏好程度;(7)依据当前网络资源状态,资源充足时利用纳什均衡博弈,资源不足时利用混合式策略博弈,获得最佳路由服务定制方案.4路由服务需求分析模型依据大量用户对不同类型应用的通信请求,获取用户对各类型应用通信的需求领域知识,即所有可能影响用户体验的需求集合.同时,面对大量不同类型应用的通信流,传输过程中各流的状态由其各项参数的实时值、变化量以及由此引起的用户体验变化数据表示.在大量的通信请求数据和不同类型流的状态数据采集及预处理过程中,主要特点是并发数非常高、数据量非常大以及数据的产生速度非常快.而且,用户对各类通信的需求也呈现出多维化特点,比如,地理因素、心理因素和行为因素等都是影响用户体验的关键;另外,对于不同类型的通信流,各项需求参数的重要程度也有差别,比如,通话类应用对延迟和抖动敏感,而邮件类应用对出错率敏感.因此,需要大数据相关采集及预处理技术,能够高效采集海量数据,具备高扩展能力,并且能够对多样化的需求及参数进行多维度分类和归并,从而获得大量不同类型应用的通信需求和通信流的状态数据样本,进而驱动需求属性的分析和体验—需求依赖关系的挖掘.比如,基于批处理技术的Hadoop状态数据进行采集及存储,其数据并行处理模型可用于对不同类型请求和流状态数据进行划分、合并及排序操作.4.1用户需求属性分析需求属性分析是指,由用户对不同类型应用差异化的通信需求数据,通过软件产品线[28]的属性分析方法,对所有可能影响用户体验的需求进行分析和归并,组织形成用户需求属性模型[29-30].然而,面对海量通信请求所涉及的需求数据,不仅需要对不同类型的请求进行特征分类,进而归纳不同类型应用的通用性和可变性通信需求,还需要面向用户的多维度(地理、心理、行为等)需求特性,进行更全面的需求属性分析,构建更细粒度的用户需求属性模型.显然,以结构化的数据模型(如二维表)来描述用户的需求属性不仅难以涵盖上述如此众多的信息,而且无法从多粒度、多维度、可视化及易匹配的角度表现出面向不同用户请求和针对不同类型应用时模型的可变性与自适应选择性.因此,以大数据相关分析技术(如分类分析与统计分析)和半结构化(如树Page5状结构)、非结构化(如多维关联型图)数据模型,结合软件产品线属性描述方法,驱动用户需求属性模型的构建.以应用的通信类型为特征对请求进行分类分析,对大量某类型的请求所携带的需求信息进行统计,获取用户对此类应用通信的通用性需求和可变性需求.其中,通用性需求是指用户使用某类应用进行通信时的普遍需求,例如,所有支持语音通话类应用的服务都需要交互属性,所有支持视频直播类应用的服务都需要音频与视频的同步属性.可变性需求是指用户可主动选择的属性,从较小粒度的属性,如用户对服务的响应时间的容忍程度选择,到较大粒度的属性,如用户对服务等级的不同需求等.本文中可变属性分为二选一属性和多选属性,比如路由服务的连接属性是二选一属性,要么是面向连接的,要么是无连接的;QoS属性则是多选属性,因为根据不同类型的应用,用户对带宽、抖动、延迟、出错率等参数的需求,可以是多个,也可以是单个,因此面向被选择的需求参数,调用能够调整相应参数的路由功能.可变性需求是用户个性化路由服务定制的基图2用户需求属性模型4.2体验—需求依赖性分析ISP提供路由服务,支持用户通过网络应用(如邮件、网络通话、视频点播等)进行数据通信,记录各类型应用通信流的流状态数据,并获取用户对服务的主观感受,即用户服务体验.用户的服务体验受到多项需求参数的影响,对于不同类型应用的通信,各项需求参数对用户体验的影响程度有很大差别[5].面向大量不同类型应用通信流的状态数据,以大数据相关处理技术(如MapReduce)进行分类分析及归并,获取大量流状态数据样本(包含其各项需求参数的实时值、变化量以及用户反馈).基于上述大量础,以大量通信需求数据为驱动,创建需求属性数据模型,从而依据不同用户对不同类型应用的差异化通信请求,系统自适应地为其请求匹配各项合适的可选需求.其中,各项需求属性的多粒度特性由树状结构进行刻画;用户在多维度下不同状态时的独特需求由多维关联图形式进行刻画.本文提出的用户需求属性模型如图2所示,并假设用户的3个维度:地理因素(如所在位置:家里、商场、车里等)、心理因素(如悠闲、愉悦、焦急等)和行为因素(如散步、跑步、乘车等),用户在各维度不同状态时,系统为其匹配的各项需求属性不同;树状模型上多粒度地列举了连接性、交互性、QoS、服务等级(GradeofService,GoS)、弹性质量(QualityofResilience,QoR)等需求属性.其中,GoS[31]是指对不同类型的应用,用户所需的服务等级有差别,例如,差异化的服务等级意味着连接建立延迟、端到端阻塞概率等参数的差异.QoR[32]是指服务的故障恢复能力,例如,对可选择的恢复层次,从底层恢复,恢复速度快但花费高,从高层恢复,恢复速度慢但花费低;又如,对备用资源,专用资源使得恢复速度快但花费高,共享资源使得恢复速度慢但健壮性高.不同类型流的状态数据,本文对用户体验和各项需求参数之间的数据关系进行关联性分析,并提出了两者间依赖性关系挖掘方案,进而驱动生成体验对需求参数的依赖性关系分布模型,为路由功能的自适应选择提供依据.假设对于某类应用的数据通信,影响用户体验的需求参数集合为SR={SR1,…,SRl},各参数在各自值域的不同取值点被调整时,对用户体验的影响程度也不同,例如,对于弹性类型应用,其带宽参数值与服务效用关系曲线[33]如图3所示.当带宽值为bn时,对分配的带宽做小范围调Page6整,对服务效用的影响不明显;当带宽值为bi或bj时,对带宽做同样范围调整,则能明显影响服务效用,而且,在bi处调整对用户体验的影响高于在bj处.因此,调整同样大小的带宽量,服务效用对这3个取值点的依赖关系(被影响的程度)由大到小依次为bi、bj和bn.本文提出以流状态大数据为驱动,挖掘体验对每个需求参数取值区间中各取值点的依赖关系.当前被广泛应用于用户体验的评测方法是平均主观评分(MeanOpinionScore,MOS)[34],MOS采用的5、4、3、2、1这5个等级分别表示主观感受的优、良、中、差、劣,本文把用户的评估值MOS映射到[0,1]区间来反映用户的服务体验UE,具体如下:设置阈值Δt,由上述大量流状态数据样本中获取需求参数SRi可被统计出的取值点为SRi={SR1SRj过近,用户的体验变化不明显).设UEi(j)是SRi的值为SRji,…,SRjiΔt(Δt是为了避免相邻取值点SRjSRi在SRjUECi(j)=烄mi∑12烄烆烅∑kj∑烆其中,mj为SRi的值由SRj据样本数量,kj为SRi的值由SRj的数据样本数量;且j=1和j=n时,分别有kj=0和mj=0.用户的服务体验对SRi取SRjUEDi(j)定义如下:UEDi(j)对SRi中所有元素的依赖程度之和满足:虽然总体数据样本量很大,仍然有可能遇到某些取值点被统计出的数量相对较少,导致依赖程度计算不准确的问题,例如,SRi的实际值被统计取到其取值区间中间部分取值点的数据样本量较多,而取到区间边缘部分取值点的样本量相对较少,尽管假设总体用户的体验反馈是理性的,但若存在少数用户的体验反馈不准确或不真实的情况,用户体验对样本量相对较少取值点的依赖程度则可能不完全可信(因为当样本量相对较少时,少数用户的不真实评价影响要远大于样本量多时少数不真实的用户评价的影响);另外,除了上述依赖关系不完全可信的取值点,还可能存在一些对用户体验有影响,但没被统计在SRi取值集合中的取值点.因此,需要对上述情形(依赖关系不完全可信的取值点和未被统计出的取值点)作进一步处理.古德-图灵估计(Good-TuringEstimate)[35]是对这种不完全可信统计数据的相关概率做减量处理,并把减少的概率给予未被统计出的数据的估计方法,可应用于解决上述问题.设置阈值TC∈N,当mj+kj<TC时,需要为SRjUEDi(j)分配一个相对小一点的值UEDΔi(j)=UEDi(j)-ε,由UEDΔi(j)替代UEDi(j),则有i∈SRi是指在SRi中被统计出的取值点,用户体SRj验对这些点依赖程度之和小于1,由此余下的概率分配给上面所述情形下的取值点:因此,可得用户体验对需求参数SRi取值区间各取值点的依赖程度MUEDi(j)为MUEDi(j)=其中,mj+kj=0的情况是指没被统计在SRi中但可Page7能对用户体验存在影响的取值点,Num(SRj此类型取值点数量.由此,可获得用户的服务体验对其每项需求参数各取值点的依赖程度.依据不同类型通信流的状态大数据,以上述提出的数据间依赖性关系挖掘方案为驱动,可生成各类型应用通信随某项需求参数取值的变化,用户的服务体验值分布情况(体验—参数值分布)以及用户体验对该参数各取值点的依赖程度(用户体验随着取值变化而发生变化的程度,即体验对参数的依赖性分布).其中,体验—参数值分布作为自适应选择合适的候选路由功能,从而进行服务组装的依据;体验对参数的依赖性分布作为在通信过程中根据用户变化的需求自适应调整参数值的依据.例如,对于体验—参数值分布,如果分布曲线起伏明显,说明该项需求参数能明显影响用户体验,则可把能调整该参数的功能作为候选功能;反之,如果分布曲线几乎无起伏,即某参数在不同取值点时用户体验几乎无变化,则调整该参数的功能不作为候选.依据体验对参数的依赖性分布,可得各参数在不同取值点处对用户体验的影响程度,并以此自适应地调整当前参数值,从而改善用户的服务体验.5路由服务策略选择5.1策略对评估在商业化网络运营模式下,不仅需要在技术上解决路由服务的合成,还需要关注ISP和用户的经济利益.如上,可获得ISP组装该类型路由服务的候选功能集合,但实现同等的用户服务体验,ISP利用不同组装策略定制服务所付出的成本也不同,而且ISP在不同的定价策略下获得的利润也不同,用户对服务价格的接受程度也不同.假设ISP的服务组装策略集合为R={R1,…,Ri,…,Rm},定价策略集合为γ={γ1,…,γj,…,γz},则依据定价策略γj,ISP依照Ri组装服务,用户需付出的价格为Priγj由此得到策略对矩阵[〈Ri,γj〉]m×z,通过从经济利益角度评估ISP和用户分别对策略对的偏好程度,从而获得最佳服务定制方案.5.1.1ISP偏好评估对于ISP来说,其主要关注能获得的利润,即选用哪套定价策略为用户组装哪套路由服务能使自身利润达到最大.对[〈Ri,γj〉]m×z,ISP以利润为导向对其元素〈Ri,γj〉进行评估.假设ISP依照〈Ri,γj〉进行服务组装和定价,在Ri下服务的成本为Cost(Ri),在γj下服务的定价为Priγj由服务获得的利润ProγjISP对〈Ri,γj〉的偏好程度定义如下:SDegISPγj显然,ISP以γj为用户提供Ri下的路由服务时,期望由此获得的利润越高,其对〈Ri,γj〉的偏好程度越高.5.1.2用户偏好评估用户对〈Ri,γj〉的偏好程度反映了用户希望系统选择该策略对的倾向.根据4.2节中用户对各项需求参数不同取值点处的体验值即体验—参数值分布,若ISP以Ri为用户组装服务,此路由服务各参数值对应到体验—参数值分布上得到用户对各参数值的体验值即MOS评估值,由式(1)映射到[0,1]区间得到用户对此服务各参数值的满意程度分别为UE1(Ri),…,UEj(Ri),…,UEl(Ri),则用户对Ri下组装的路由服务总体质量满意程度为其中,ωj为各项参数的权值,∑用户对所获得服务的价格满意程度同样需要考虑.当服务价格达到用户无法接受时,用户宁愿放弃此服务,而当服务价格降低时用户对服务的兴趣会变大.假设用户对路由服务的最高可接受价格为Primax,则在〈Ri,γj〉下用户对此服务的价格满意程度定义如下:SDegPriγj1,烄PriγjPrimax-Cost(Ri)1-烅ε,0,烆其中,0<ε1.综上,用户对〈Ri,γj〉的偏好程度定义如下:SDegPage8其中,ωQua和ωPri分别为服务体验和价格因素对用户重要程度的权值,0ωQua,ωPri1,且ωQua+ωPri=1.5.2博弈策略用户最偏好的策略对可能并不是ISP最偏好的,反之亦然.系统不能只关注单方选择,还需要通过均衡化的方法实现用户和ISP双方利益的共赢,获得当前网络资源状态下符合双方利益的最佳策略对.因此,本文根据当前网络资源供给情况,提出资γ1…γj…γz(R1),SDegUser(Ri),SDegUser(Rm),SDegUser图4用户和ISP的策略对偏好矩阵矩阵的元素〈SDegISPISP和用户分别对〈Ri,γj〉的偏好程度.博弈过程是获得使[〈SDegISP纳什均衡的策略对〈Ri,γj〉:SDegISP烄烅SDegUser烆即在〈Ri,γj〉下,无论哪一套服务定制策略,总存在γj,使ISP偏好达到最大;相应地,无论在哪一套ISP定价策略下,总存在Ri,使用户偏好达到最大.此时,〈Ri,γj〉可作为ISP和用户的最佳均衡策略对.5.2.2基于混合式策略的博弈当多个用户同时提出对某类应用相似的通信需求时,面对网络资源不足以为所有用户都提供相同的最佳服务的情况,本文提出基于混合式策略博弈的方案.对于网络资源供小于求的情况,ISP的自主性要强于用户,即ISP根据自身利益选择策略对的主动性更强,如何使单位资源利用率和利润达到最优是ISP当前的目标.因此,混合式服务定制策略的目标是为用户群体提供一系列不同的定制化服务,既满足用户群体对单位资源利用率需求,又优化ISP由单位资源获得的利润.假设混合策略σR={σR元素比例的集合,即σR中元素满足:t(Ri)为σR其中,σRt(Ri)1.例如,在σRσR源充足时利用纳什均衡博弈而资源不足时利用混合式策略博弈的方案.5.2.1基于纳什均衡的博弈当网络资源充足时,ISP利用基于纳什均衡的博弈为每个用户独立地组装路由服务,实现每个用户与ISP之间的利益均衡.根据得到的〈Ri,γj〉以及ISP和用户对每个策略对的偏好程度,构成如图4所示m×z的ISP和用户策略对偏好矩阵.……γjγjγj(R1)…SDegISP(Ri)…SDegISP(Rm)…SDegISP源需要提供A个路由服务,则以Ri组装的服务数量为σRt(Ri)·A.ISP在σR务定价PriσRPriσRISP对σR度定义如下:ISPSDegσRt0,烄烅PriσRt烆用户对在〈σR均满意程度定义如下:SDeg若在σR当前可用资源为AR,用户对获得服务的质量平均满意度阈值为QT,则在满足式(19)的前提下寻求式(17)最大:此时获得最优的σRPage9不足以为每个用户提供最佳服务时,ISP以σR一系列R中的路由服务,使当前单位资源利用率和利润达到最优.6仿真实现和性能评价6.1仿真实验设置本文实验选择视频点播类型的网络应用,以点播视频的大量流状态信息及用户的体验反馈数据作为实验测试数据.本文选取被点播的视频流在路由传输过程中相关QoS需求的状态数据,包括带宽B、丢失率L、抖动J和延迟D这4个参数各自不同的取值点、变化量以及由此引起的用户体验变化情况.实验中点播视频的流状态数据来源于EPFL-PoliMI①和VQEG②两个数据库,选取以H.264/AVC方式编码的100个视频点播通信流的各状态数据.其中,EPFL-PoliMI中包含流的丢失率参数在其区间不同取值点取值时,相应的用户的体验反馈情况;VQEG中包含流的带宽、延迟和抖动参数在各自区间不同取值点取值时,相应的用户的体验反馈情况.各参数的取值点及相邻取值点的间隔规律依据ITU③和ETSI④进行设定,具体设置如表1所示.取值点带宽值从0Mbps开始,每间隔0.1Mbps取值,至5Mbps结束;丢失率从0开始,每间隔0.4%取值,至10%结束;抖动从1ms开始,每间隔0.1ms取值,至4ms结束;延迟从100ms开始,每间隔100ms取值,到900ms结束.本文路由服务定制的仿真实验使用C++语言实现,以MicrosoftVisualStudio2010为开发工具,在Windows7Ultimate平台下运行.本文在应用的路由通信路径上,可供ISP选择的路由功能包括接纳控制、服务等级、资源预留、带宽分配、排队调度、差错控制、流量监管和流量整形,并以功能构件形式实现,ISP调用候选功能构件合成路由服务.为模拟真实网络环境,本文选用两种实际的网络拓扑,分别为中国教育和科研计算机网(CERNET)和欧洲教育科研网(GéANT2),如图5所示,CERNET拓扑具有36个节点、46条边,GéANT2拓扑具有34个节点、52条边.为评价本文提出的BARC机制的性能,本文选取尽力型服务(Best-EffortServices,BES)和集成型服务(IntegratedServices,IntServ)机制进行对比.对3种机制在两种网络拓扑下进行性能比较.6.2性能评价6.2.1体验—参数值分布根据4.2节,通过实验获得视频点播类应用之间通信流的需求参数(带宽、丢失率、抖动和延迟)与用户体验之间的对应关系,其中,用户体验利用MOS方法评估,结果如图6所示.由图6(a)所示,随着带宽参数取值点增大,用户体验的评估值也增大,当带宽取值达到3.7Mbps时,用户体验的评估值达到最大;由图6(b)和(c)所示,随着丢失率和抖动参数取值点增大,用户体验的评估值减小,并分别于7.2%和3.4ms,用户体验的评估值达到最小;由图6(d)所示,对于延迟参数,其取值点变化对用户体验几乎无影响.因此,对于视频点播类应用的QoS需求,能够调节带宽、丢失率和抖动参数的功能是组装路由服务的候选功能.6.2.2体验对参数的依赖性分布依据6.2.1节中需求参数取不同值时用户体验的评估结果,根据4.2节,获得用户体验对参数各取值点依赖程度的分布曲线,作为ISP实时调整用户体验的依据(依赖程度越高,ISP在该取值点调节参数能使用户获得的单位体验收益越高),如图7所示.①②③④Page10图6用户体验—需求参数值分布图7用户体验对需求参数的依赖性分布Page11由图6可知延迟对视频点播应用的用户体验几乎无影响,因此图7仅给出带宽、丢失率和抖动各取值点参数调节时对用户体验的影响.从图7可以看出,带宽由0.2Mbps到2.5Mbps、丢失率由0到5%、抖动由0ms到2.2ms时,每单位参数量改变导致用户获得的体验变化程度相对较大,其他区间每单位参数量改变对用户体验影响程度相对较小.6.2.3用户满意度评估当前许多研究工作以用户对服务的体验质量来评价ISP提供的路由服务[36],但在商业化网络运营模式下,经济利益也是影响用户服务选择和体验的关键因素,例如,不同网络负载状态下实现相同的服务体验,用户所付出的价格不同(单位带宽价格随着网络负载变化[37]).因此,本文综合考虑用户的服务质量和经济因素即所付价格,比较用户在不同网络图8用户对服务质量的满意度图9用户对服务价格的满意度负载下对BARC、IntServ和BES这3种机制提供路由服务的满意程度.将用户所得路由服务的带宽、丢失率、抖动和延迟实际值分别映射到图6(a)~(d),得到用户对此服务实际提供带宽、丢失率、抖动和延迟的MOS评估值,然后把各参数的MOS评估值由式(1)映射到[0,1]区间后代入式(10),其中带宽、丢失率、抖动和延迟的权值分别设置为11.1%、58.9%、15.1%和14.9%[36],获得用户对服务质量的满意程度如图8所示.把路由服务实际价格代入式(11)获得用户对服务价格的满意度,结果如图9所示.综合考虑质量和价格因素,假设两者对用户同等重要,即质量和价格重要程度的权值都设为0.5,由式(12)获得用户对服务的总体满意程度,结果如图10所示.Page12图10用户对服务的总体满意度随着网络负载的增大,3种机制下用户的满意度都减小,BARC和IntServ的变化趋势比较稳定,而BES下降较快,特别是在网络重载之后.这是因为BARC和IntServ都提供保证型服务,当它们无法满足用户最低需求时就不接纳服务请求.然而,用户对BARC的满意度高于IntServ,这是因为BARC能够根据网络状态,以用户体验为中心,自适应地定制最佳满足用户需求的路由服务,而IntServ只提供通用化的路由服务,没有自适应调节能力.图11ISP对所获利润的满意度随着网络负载的提高,3种机制下ISP对利润的满意度都增大,由于BARC和IntServ提供保证型服务,因此利润明显高于BES.由于BARC具备根据网络状态自适应选择服务组装和定价策略的能力,其在网络从轻载、中载向重载过渡过程中能够有效地利用单位资源提高利润,而IntServ不具备这种特性,因此BARC又优于IntServ.6.2.5用户和ISP的满意度均衡率基于用户和ISP对路由服务的满意度,以两者6.2.4ISP满意度评估ISP为用户提供路由服务,不仅需要满足用户的通信需求,还需要考虑自身的经济利润.不同的组装策略下,调用功能和资源所付出的成本不同.定价策略的选择既要优化ISP的经济利益,也不应使ISP因价格过高而失去用户.根据式(8)可得ISP的期望利润.以ISP为用户提供路由服务实际获得的利润对其期望利润之比作为ISP对获得的实际利润的满意度,结果如图11所示.之比刻画双方对服务满意程度的均衡率,结果如图12所示.该值越接近于1,两者的满意度越均衡.对于BARC和IntServ,用户和ISP的满意度均衡率相对稳定且接近于1,而且BARC优于IntServ;BES的满意度均衡率不稳定,在多数情况下与1相距较大,仅在网络负载为80%左右时才与1接近,而且优于BARC和IntServ.这是因为BARC和IntServ均考虑了对QoS的支持,而且BARC同时考虑了用户和ISP的体验,并通过博弈促进双方共赢,BESPage13图12用户和ISP的满意度均衡率则未考虑对QoS的支持,然而,当网络负载达到80%左右时,BARC和IntServ为保证QoS会较大幅度提升服务价格,这样做使得ISP满意度增大但用户满意度减小,从而导致双方满意度差值变大.6.2.6时间开销本文比较了运行3种机制的相对平均时间开销(以最大的平均时间开销设为1,其他为对其的相对值),比较结果如图13所示.BES不需要建立连接,其时间开销主要为选路所花费的时间,时间开销最小;IntServ需要建立连接,执行路径计算和接纳控制等功能,时间开销高于BES;BARC不仅需要建立连接,而且需要分析用户的服务需求和体验,考虑ISP的经济利润,调用相应的路由功能定制均衡双方利益的路由服务,时间开销最大.7总结本文针对传统路由配置模式难以适应当前互联网中用户对多样化网络应用日益差异化和复杂化的通信需求的现状,提出了一种大数据驱动的自适应路由服务定制机制.如何准确而有效地分析用户纷繁复杂的各项需求并且获得各项需求对用户服务体验的重要程度成为解决问题的前提.通过对不同类型网络应用的通信流状态相关的大数据进行分析和挖掘,提出了用户需求属性模型和体验—需求依赖关系模型,获取候选路由功能集合.同时,考虑用户和ISP之间的利益共赢,通过分析双方对组装和定价策略的偏好,基于博弈进行策略选择,实现路由服务的定制化.对于本文提出的机制,网络应用之间端到端通信流的状态数据由ISP端收集和存储,用户体验反馈信息(如实时服务体验、服务调整需求等)可由用户端返回给ISP的确认报文携带,用户端不需要额外发送用户体验反馈报文,并且数据的统计过程可由ISP离线完成,因此数据收集和统计对网络性能的影响不大.然而,在实际应用中,控制器需要同时为大规模、甚至超大规模的用户分析通信请求、定制路由服务和解析反馈信息,如果使用单控制器,则会面临严重的可扩展性问题,需要研究多控制器分域管控的方式加以解决.本文提出的大数据驱动的自适应路由服务定制机制,是对多样化的路由功能进行自适应组装,在应用的通信路径上为其数据流的传输提供路由服务.在此基础上,可以进一步考虑为应用的通信流进行路由资源的自适应分配,并且根据网络状态和用户需求自适应地对路由资源和路由功能进行一体化装配以更好地实现路由服务定制化的目标.开展原型实现并在实际网络中进行验证以提高本文工作的实用性也是今后研究与开发工作的重点.Page14
