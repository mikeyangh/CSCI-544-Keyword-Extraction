Page1LBSN中基于元路径的兴趣点推荐曹玖新董羿杨鹏伟周涛刘波(东南大学计算机科学与工程学院计算机网络和信息集成教育部重点实验室(93K-9)南京211189)摘要兴趣点(Point-Of-Interest,POI)推荐是基于位置的社交网络(Location-BasedSocialNetworks,LBSN)中的一项重要个性化服务.由于LBSN中数据的极度稀疏性,基于协同过滤的算法推荐精度不高,文中提出基于元路径的兴趣点推荐算法.首先根据LBSN结构特征构建带权异构网络模型,其次引入元路径来描述节点间不同类型关联关系,基于三度影响力设置用户-兴趣点间元路径特征集,然后通过随机游走方法计算元路径特征值以度量实例路径中的首尾节点间关联度,并利用监督学习方法获得各特征的权值,最后计算特定用户将来在各兴趣点的签到概率从而生成推荐列表.文中在3个真实LBSN签到数据集上进行了实验,结果表明该算法可以有效缓解LBSN中的极度稀疏性问题,比传统推荐算法有更好的推荐效果.关键词基于位置的社交网络;异构网络;兴趣点推荐;元路径;数据挖掘;社会媒体1引言近年来,卫星通信、GPS设备、无线传感器网络、物联网通信等移动互联网技术不断进步,人们日常使用的智能终端提供的位置定位功能越来越精确、便捷,如智能手机、平板电脑等.在此背景下,基于位置的社交网络[1](Location-BasedSocialNetworks,LBSN)服务得到迅速发展,且受到广大用户的喜爱,如国外的Foursquare、Gowalla,国内的街旁、嘀咕等.LBSN与传统在线社交网络(OnlineSocialNetworks,OSN)的主要区别在于其增加了地理位置信息,用户可以对当前访问的兴趣点(如餐厅、电影院、旅游景点等)签到,并与好友分享自己的签到信息.在LBSN中,兴趣点推荐服务旨在为用户推荐一些新的可能感兴趣的位置,促使用户更好地了解其所在城市,提高平台的用户体验.目前个性化推荐技术在不同应用领域受到工业界和学术界的广泛关注[2],如电子商务网站为用户推荐商品[3]、视频网站为用户推荐电影[4].随着社交网络和智能终端的普及,基于社交网络的推荐系统[5]和移动推荐系统[6]的研究得到越来越多的关注.推荐技术较好地解决了互联网信息过载的问题,方便用户快速有效地找到自己需要的内容、信息和服务.LBSN同时包含用户和兴趣点节点,并且兴趣点规模巨大,而每个用户访问的兴趣点数量很有限,所以签到数据极度稀疏.LBSN的异质性和签到数据的极度稀疏性给兴趣点推荐问题带来了新的挑战.基于以上考虑,本文提出了一种基于元路径的兴趣点推荐算法.首先根据LBSN结构特征构建带权异构网络模型,其次引入元路径来描述节点间不同类型关联关系,基于三度影响力设置用户-兴趣点间元路径特征集,然后通过随机游走方法计算元路径特征值以度量实例路径中的首尾节点间关联度,并利用逻辑回归方法获得特征的权值,最后计算特定用户将来在各候选兴趣点的签到概率从而生成推荐列表.针对用户签到数据稀疏性问题,本文引入元路径概念,通过好友关系和兴趣点相关属性来增加元路径数量,从而丰富有效数据,缓解稀疏性问题,提高了推荐的精确度,且时间复杂度较低.本文第2节介绍LBSN中兴趣点推荐技术的相关工作;第3节介绍针对LBSN构建的异构网络模型;第4节提出异构网络中基于元路径的兴趣点推荐算法;第5节介绍实验的数据集和方案设计;第6节对算法进行横、纵向的对比分析,验证算法的有效性;第7节总结并探讨将来的研究工作.2相关工作近年来,LBSN中的推荐技术备受国内外学者的关注.兴趣点推荐所采用数据集可以分为基于GPS的轨迹数据和LBSN中的签到数据.文献[7-12]均基于GPS轨迹数据进行推荐研究,其首要工作就是从轨迹数据中挖掘出兴趣点.而LBSN中的签到数据已经包含带有语义信息的兴趣点,不再需要兴趣点挖掘,并且具有丰富的用户、兴趣点属性以及好友关系,因此受到研究者的青睐.文献[13-19]属于基于签到数据的兴趣点推荐研究.推荐技术发展至今已取得不少成果,从技术方法角度主要可分为以下3个方面:(1)基于上下文的推荐.其特点在于利用用户属性(如性别、爱好等)和兴趣点属性(如类别、标签等)构建推荐模型.Bao等人[13]将推荐系统分成线下、线上模块,线下模块利用用户、兴趣点属性准确挖掘用户个人偏好和本地专家信息,线上模块快速选取推荐候选兴趣点集合和计算兴趣点评分,从而进行推荐.(2)基于链路分析的推荐.特点在于从网络拓扑结构角度挖掘节点关联性.Long等人[7]在分析了签到和好友之间的关系后,提出基于HITS的兴趣点推荐算法.Cheng等人[14]将个人签到序列看作马尔科夫模型并考虑地理区域限制,实现短期的兴趣点推荐.李雯等人[15]借鉴马尔可夫模型对移动对象的历史轨迹建模,并结合对象的运动趋势综合推荐.(3)基于协同过滤的推荐.特点在于从用户历史签到记录角度进行推荐,可进一步分为基于记忆的推荐和基于模型的推荐.基于记忆的推荐就是传统的基于用户的协同过滤和基于项的协同过滤.Zheng等人[8]首次运用基于用户的协同过滤方法进行兴趣点推荐,之后在文献[9-10]中参考基于项的协同过滤思想提出基于兴趣点的协同过滤推荐算法.Ye等人[11]认为用户签到受个人偏好、好友关系和兴趣点距离三方面影响,综合基于用户的协同过滤、基于好友的协同过滤和基于地理信息的推荐方法提出混合协同过滤算法,大大提高了推荐精度.基于模型的推荐通过构建用户评分生成模型实现评分Page3预估以完成推荐.Liu等人[16]认为用户评分由用户属性、兴趣点属性、兴趣点间距离共同决定,在此基础上构建贝叶斯图模型来预估用户对新兴趣点的喜好程度.Hu等人[17]首次将时空话题模型运用于兴趣点推荐,将用户属性与签到的时空规律相结合来提高推荐精度.以上推荐技术均基于用户历史记录数据,数据的稀疏性对推荐精度都具有一定程度的影响.有些学者专注于解决数据稀疏性问题的研究,典型的方法有矩阵的奇异值分解[18-19],在此基础上,Lian等人[12]对其改进并提出加权矩阵分解算法.文献[20]运用PageRank思想以及改进的cosine相似度度量方法来缓解数据稀疏性.本文提出一种基于元路径的兴趣点推荐算法.其优势在于,不仅考虑了用户与兴趣点的直接关系,还考虑了网络中各类节点之间的潜在关联性.在兼顾用户的签到记录、好友关系和兴趣点相关的基础上,本文引入元路径来刻画节点间关系类型,利用元路径特征计算用户签到概率.该算法通过考虑多种元路径来丰富目标用户的有效数据,从而缓解LBSN中数据极度稀疏的问题,因此可以较好地提高推荐效果.3LBSN异构网络模型异构网络是指存在不同性质节点的网络,一般定义为三元组G〈V,E,A〉,其中V是节点集合,E是边的集合,A是节点类型集合.LBSN是典型的异构网络,包括两类节点:用户和兴趣点节点以及三类边:用户-用户边、用户-兴趣点边以及兴趣点-兴趣点边.其中用户-用户边表示用户之间的好友关系;用户-兴趣点边表示用户对兴趣点的访问签到;兴趣点-兴趣点边表示兴趣点之间的相关性.其网络结构示意图如图1所示.本文将LBSN建模为带权值的异构网络,用四元组G〈U,L,E,W〉表示,其中:(1)U={u1,u2,…,un}为用户节点集合.(2)L={l1,l2,…,lm}为兴趣点节点集合.(3)E=EUU∪EUL∪ELL是网络中所有边的集合,本文认为LBSN中所有边都是无向的,其中,EUU={(ui,uj)|ui∈U,uj∈U}表示用户-用户边集合,即好友关系,EUL={(ui,lj)|ui∈U,lj∈L}表示用户-兴趣点边集合,即用户签到行为,ELL={(li,lj)|li∈L,lj∈L}表示兴趣点-兴趣点边集合,即兴趣点相关.(4)W=WUU∪WUL∪WLL是网络中边的权值集合,其中,WUU={w(ui,uj)|(ui,uj)∈EUU}为用户-用户边的权值集合,w(ui,uj)表示用户之间的亲密程度,WUL={w(ui,lj)|(ui,lj)∈EUL}为用户-兴趣点边的权值集合,w(ui,lj)表示用户对兴趣点的偏好程度,WLL={w(li,lj)|(li,lj)∈ELL}为兴趣点-兴趣点边的权值集合,w(li,lj)表示兴趣点之间的相关度.在异构网络LBSN的三类边中,兴趣点-兴趣点边所体现的兴趣点相关性较难度量.本文从用户行为角度考虑,认为经常短时间内被连续先后签到的两兴趣点在现实世界中是相互关联的.比如,一个学校的多个校区之间距离可能很远,但是经常会被该校师生连续先后访问.兴趣点相关的定义如下.定义1.兴趣点相关.给定时间阈值Δt,若存在用户对兴趣点li和lj进行连续签到且签到时间间隔小于Δt,则认为兴趣点li和lj是相关的.本文采取如下策略给定三类边的权值.对于用户-用户边,即用户之间存在好友关系,权值均为1.对于用户-兴趣点边和兴趣点-兴趣点边的权值,考虑使用多种方法计量,并在实验部分确定最优方法,包括:(1)计数计量.用户-兴趣点边的权值为该用户对该兴趣点的签到总次数;兴趣点-兴趣点边的权值为所有用户的签到记录中,两兴趣点在时间阈值内被连续先后访问的总次数.(2)二值计量.用户-兴趣点边,即用户、兴趣点之间有过签到,权值均为1;兴趣点-兴趣点边,即两兴趣点间存在相关性,权值均为1.(3)对数计量.对计数计量法中的总次数求对数作为权值.Page44基于元路径的兴趣点推荐算法4.1元路径元路径(meta-path)主要用来描述异构网络中任意两节点间的不同路径类型[21].在LBSN中,两个节点之间可以存在不同类型不同长度的路径.比如,两个用户之间的路径可以存在以下形式:用户-用户-用户、用户-兴趣点-用户以及用户-兴趣点-兴趣点-用户等.不同路径代表的物理意义不同,所体现出的节点间关联程度也不同.这样的路径可以用元路径来描述,元路径的相关定义如下.定义2.元路径.在异构网络G〈V,E,A〉中,元路径定义为如下形式的路径P=A1An+1,其中Ai∈A,Ri表示不同节点类型间的Rn→关系.在LBSN中,节点类型分为用户节点U和兴趣点节点L,关系类型Ri∈{U-U,U-L,L-L},由于认为LBSN中所有边都是无向的,所以关系U-L与关系L-U是一致的,反映的都是用户签到行为.定义3.实例路径.在异构网络G〈V,E,A〉中,对于元路径P=A1在真实路径p=(v1,v2,…,vn+1),vi∈V,其中对任意i,节点vi的类型为Ai,vi与vi+1之间关系类型为Ri,那么路径p称为元路径P的一条实例路径,所有这样的真实路径称为元路径P的实例路径集P.元路径本质上描述的是两节点之间路径的类型,不同的元路径体现两节点间不同类型的关联性.为了方便描述,本文给出元路径特征值的概念,定义如下.定义4.元路径特征值.若网络中节点v1与vn+1间有元路径P=A1元路径P的特征值为其所体现出的节点v1与vn+1间的关联程度,用Eig(P)表示.4.2基于元路径的兴趣点推荐算法兴趣点推荐是为用户推荐未曾访问过但可能感兴趣的兴趣点.对于该问题,本文提出基于元路径的兴趣点推荐算法,基本思想为:首先确定始于用户节点类型且终于兴趣点节点类型的元路径集,以此作为预测的特征集;然后定义元路径特征值的计算方法,进而使用监督学习获得不同元路径特征的相应权值,据此计算出用户将来在各兴趣点的签到概率从而生成推荐列表.4.2.1LBSN中元路径集的确定基于LBSN的网络模型,确定始于用户节点类型且终于兴趣点节点类型的元路径集,如表1所示.根据小世界现象[22]和三度影响力理论[23]可以推断,长度大于3的元路径体现的关联关系非常弱,所以本文只考虑路径长度为2、3的元路径.其中,U-U-L体现了基于用户的协同过滤思想,U-L-L体现了基于项的协同过滤思想.以往的研究大多基于这两类路径,当用户签到很少时,有效数据的不足将大大降低传统推荐算法的准确度.本文考虑了3跳以内的另外4条元路径,可以通过好友关系和兴趣点相关大大丰富有效数据,从而缓解数据稀疏性.元路径U-L-L用户可能喜欢与访问过的兴趣点相关的兴趣点U-U-L用户可能喜欢好友喜欢的兴趣点U-L-U-LU-U-U-LU-L-L-LU-U-L-L用户可能喜欢与好友访问过的兴趣点相关的兴趣点4.2.2元路径特征值的计算基于给定的元路径集,本文提出考虑边上具有权值情况下的元路径特征值计算方法.给定LBSN网络G〈U,L,E,W〉,针对元路径P及其实例路径集P,元路径P的特征值为所有实例路径体现的关联程度之和,计算公式为其中cor(p)为实例路径p体现出的节点间关联度.对实例路径p=(a1,a2,…,an+1),a1∈U为用户节点,an+1∈L为兴趣点节点,其他ai为实例路径中的1个中间节点.路径p体现的节点间关联度cor(p)基于随机游走思想计算[24],假设一个粒子从节点a1出发,在网络中随机游走,定义cor(p)为粒子按照实例路径p游走到节点an+1的概率.随机游走中每一跳游走的概率都认为是相互独立的,因此粒子按照实例路径p游走的概率等于各跳的概率之积,cor(p)的计算公式如下:Page5其中Pro(ai,ai+1)表示随机游走过程中从节点ai直接到节点ai+1的概率.在带权值的异构网络中,本文定义Pro(ai,ai+1)的计算公式如下:其中N(ai)表示是节点ai的邻居且与节点ai+1的类型一致的节点集合.4.2.3兴趣点推荐算法根据之前确定的用户-兴趣点之间的元路径集M={P1,P2,…,P6},任意用户兴趣点对(u,l)都可以通过元路径特征值计算方法得到一个特征值向量α={Eig(P1),Eig(P2),…,Eig(P6),1},其中常数1仅为了使用逻辑分布公式而添加.之后,基于逻辑回归的逻辑分布公式可知,用户u去兴趣点l签到的概率为其中向量θ中相应的权值,可以基于训练集运用监督学习方法获得.在此基础上依据概率大小选取TOP-N的兴趣点集作为推荐结果.综上,基于元路径的兴趣点推荐算法描述如算法1所示.其中,LC表示为用户u0推荐的候选兴趣点集合,LR表示为用户u0最终推荐的兴趣点集合.算法1.基于元路径的兴趣点推荐算法.输入:元路径集M={P1,P2,…,P6},LBSN网络G〈U,输出:兴趣点推荐结果LR1.LC=initializeCandidateSet(u0);2.FOREACHPOIl∈LCDo3.i=0;4.FOREACHmeta-pathP∈MDo5.eigP=0;6.P=findInstancePathSet(u0,P);7.FOREACHinstance-pathp∈PDo8.corp=ComputeCor(p);9.eigP+=corp;10.ENDFOR11.α[i++]=eigP;12.ENDFOR13.α[i]=1;14.ρl=eαθ/(eαθ+1);15.ENDFOR16.LR=TOP-N(LC,ρ);17.RETURNLR;算法第1行:依据给定元路径集初始化目标用户的推荐候选兴趣点集合;第6行:在给定元路径P的基础上,确定对应的实例路径集;第7~10行:通过计算每个实例路径反映的关联度获得元路径P的特征值;第14行:根据学习得到的权值向量θ算签到概率;第16~17行,从候选集中选取概率最大的N个兴趣点作为最终推荐结果.假设网络G〈U,L,E,W〉有n个用户,r个兴趣点,m条边,基于元路径的兴趣点推荐算法时间复杂度分析如下:算法时间复杂度主要体现在3层FOR循环,第1层时间复杂度为O(r),第2层时间复杂度为O(c),c为元路径集大小,本文为常数6,第3层时间复杂度为O(m),所以,该算法总的时间复杂度为O(rcm),即O(rm).5实验设计5.1数据集本文实验部分将在3个数据集上验证算法的有效性,这3个数据集是来源于两个典型LBSN服务平台(Foursquare和Gowalla)的真实签到数据:(1)Gowalla公开数据集①.该数据集为斯坦福大学研究人员在Gowalla平台抓取的真实签到数据.该数据集中兴趣点和用户分布于世界各地,未经过处理公开在互联网上.(2)Foursquare全球数据集(FoursquareAll).该数据集是本文项目组通过公开的API抓取的,是遍布全球的Foursquare签到数据的随机采样.(3)Foursquare纽约数据集(FoursquareNY).所有的签到兴趣点都在纽约范围内.对全球数据集过滤得到在纽约范围内的签到记录,再通过已有用户集合进一步抓取签到记录而获得.每个数据集都包括好友关系和签到记录.好友关系由若干条边组成,每条边的形式为:〈用户ID,好友用户ID〉;每条签到记录的形式为:〈签到序号,用户ID,兴趣点ID,签到时间〉.在获得数据集之后,对短时间内进行了大量签到的虚假行为进行了过滤.预处理后,3个数据集的基本信息如表2所示.其中,签到密度计算公式如式(5)所示:①https://snap.stanford.edu/data/loc-gowalla.htmlPage6数据集GowallaFoursquareAll10903012787742680516127334279.1E-5FoursquareNY237817795051796015703258.5E-4可见3个数据集的签到密度都较低,反映了LBSN中兴趣点推荐的极度稀疏性问题.5.2训练集与测试集的划分本实验在获得数据集后,需要划分训练集和测试集,从训练集中通过逻辑回归学习方法获得推荐算法的权值向量θ的效果.首先根据签到时间先后将签到记录分为3个集合:T1、T2和T3,使它们数量比约为811.此外,实验中假设用户的好友关系是不变的.生成训练集和测试集的方法如下:(1)训练集.基于签到数据T1和好友关系数据构建LBSN网络,对于每个用户确定其通过元路径可达的兴趣点集合.然后在T2中查找该用户是否对各兴趣点进行了签到,若存在签到,则生成正例样本,否则生成负例样本.(2)测试集.与获取训练集方法类似,基于签到数据T1、T2,对用户确定可达兴趣点集合.若用户在T3中存在签到,则生成测试样本.基于以上划分,计算所有正负例、测试样本的元路径特征值向量,获得训练集正负例样本的信息包括:用户ID、兴趣点ID、元路径特征值向量以及正负例标识.6实验结果分析6.1评价指标为了评价兴趣点推荐算法的效果,本文选用推荐问题通用的指标:准确率、召回率.准确率指推荐结果中用户将来真正去的数量占推荐总数的比例,反映了推荐的准确性.召回率指推荐结果中用户将来真正去的数量占用户将来访问兴趣点总量的比例,反映了推荐的全面性.对用户u进行兴趣点推荐的准确率和召回率定义如下:其中,R(u)为对用户u进行推荐的兴趣点集合,T(u)为用户u在测试集上实际的签到集合.准确率和召回率相互制约,综合利用二者可以对预测结果做出客观的评价.6.2不同推荐算法的对比为验证本文提出的基于元路径的兴趣点推荐算法的推荐效果以及引入兴趣点相关的合理性,本实验将与文献[11]中的多个典型兴趣点推荐算法进行比较和分析,各对比算法介绍如表3.User-basedCF(U)Friend-basedCF(S)GI-basedR(G)MixedR(USG)Meta-pathbasedR(M)Meta-pathbasedRwithoutL-L(NO_LL)其中U、S、G和USG均为文献[11]涉及算法.另外,根据后文实验结果分析,M和NO_LL选取最优参数设定:将兴趣点相关定义中的时间阈值设为4h,使用二值计量方法来表示LBSN中用户-兴趣点边和兴趣点-兴趣点边的权值.针对3个数据集,在进行相同预处理的前提下,本文实现并比较了以上6个推荐算法,推荐结果的准确率和召回率分别如图2所示.其中(a)(b)对应Gowalla数据集,(c)(d)对应Foursquare全球数据集,(e)(f)对应Foursquare纽约数据集.图2中展示了各算法TOP-N(N=5,10,20)的推荐性能.由图2可以看出,无论N取何值,本文所提出的基于元路径的推荐算法在3个数据集上准确率、召回率普遍优于其他推荐算法.此外,该算法相比于不考虑兴趣点相关的情况效果提升显著,说明根据用户行为给出的兴趣点相关定义符合实际,对推荐效果有较大的影响.比较各算法在Foursquare不同的数据集上的推荐结果可以发现,相比于纽约数据集,所有算法在全球数据集上的推荐精度都有一定程度的降低,如表4所示.本文提出的基于元路径的推荐算法推荐精度降低比例在15%~20%之间,而其他算法的推荐精度普遍降低20%以上.由此可见,本文所提出的基于元路径的兴趣点推荐在一定程度上缓解了数据稀疏性对推荐结果带来的不利影响,更适用于LBSN这种极度稀疏的复杂网络.Page7图23个数据集的算法对比结果表4各推荐算法在Foursquare不同数据集上的准确率推荐算法NUSGUSGM6.3本算法中不同参数的对比6.3.1兴趣点相关定义中时间阈值的选取时间阈值的大小决定着兴趣点之间相关性的判断,进而影响推荐算法的推荐结果.该部分实验基于Foursquare纽约数据集,权值采用二值计量,观测在时间阈值取不同值时基于元路径的推荐算法的效果,结果如图3所示.在另外两个数据集上也有类似结果.由图3可知,当时间阈值为4h左右时,可以同时获得最高的推荐精度和召回率,即最准确地反映两个兴趣点之间的相关性.6.3.2权值计量方法的选取在LBSN网络模型中,用户-兴趣点边和兴趣点-兴趣点边的权值计算方法对推荐算法的效果也有一定的影响.该部分实验在Foursquare纽约数据集上,时间阈值设为4h,运行推荐算法,观测采用不同的权值计量方法时的推荐效果,如图4所示.在另外两个数据集上也有类似结果.由图4可知,二值表示权值的方法获得了最佳的推荐结果.二值表示权值本质上其实是忽略了边上的权值信息,但反而更好地刻画了复杂网络并提高了推荐精度.目前的研究[25-26]发现,在复杂网络的链路预测问题上使用权值信息并不能带来预测精度的显著提升,而本文的结果和其研究是相符的.此外,本文还使用基于好友的协同过滤对3种权值计量方法进行了实验比较,实验结果相同,也是二值表Page8图3Foursquare纽约数据集上,兴趣点相关定义中不同时间阈值的推荐结果对比图4Foursquare纽约数据集上,不同权值计量方法的推荐结果对比示权值的方法获得了最佳推荐精度.二值计量相比于其他两种计量方法,实质是削弱了强连接的影响,间接表现出复杂网络中弱连接的作用.7总结本文针对LBSN中的兴趣点推荐问题,提出基于元路径的兴趣点推荐算法.将LBSN视为异构网络,引入元路径描述用户与兴趣点节点间的关联性,并给出元路径特征值的定义及其计算方法,再通过逻辑回归方法学习各特征权重,最后计算用户将来在各兴趣点的签到概率从而生成推荐列表.实验表明,本文提出的算法在LBSN真实数据集上相比于其他推荐算法有更高的准确率和召回率,有效地缓解了数据的稀疏性问题.将来的工作主要在以下几个方面进行.首先,我们将考虑如何有效地运用数据集中的时间因素,挖掘用户行为的时空模式,以提高推荐效果.其次,我们将在推荐兴趣点时考虑用户所处的情景上下文信息,如季节、天气等,使得推荐结果更加人性化.致谢审稿专家和编辑提出了宝贵意见和建议,在此表示感谢!
