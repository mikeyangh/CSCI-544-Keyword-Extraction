Page1一种基于多维服务质量的局部最优服务选择模型胡建强1),2),3)李涓子2)廖桂平1)1)(湖南农业大学信息学院长沙410128)2)(清华大学计算机科学与技术系北京100084)3)(武汉大学软件工程国家重点实验室武汉430072)摘要全局最优和局部最优是服务选择的两种策略.现有的全局最优服务选择算法提供端对端约束下最优单解而非可接受的多解,既无法充分体现用户偏好和服务个性,也不利于激励服务提供者优化服务质量.首先,在引入序数效用函数作为局部服务排序的数值尺度的基础上,提出一种基于多维服务质量的局部最优服务选择模型MLOMSS(Multi-QoSbasedLocalOptimalModelofServiceSelection),为自动选取优质服务提供重要依据.然后,构造客观赋权模式、主观赋权模式和主客观赋权模式来确定各服务质量属性的权重,既体现用户偏好和服务质量的客观性,又有助于快速生成聚合服务链.最后,通过语义Web服务集成平台SEWSIP(SemanticEnableWebServ-iceIntegrationPlatform)证明MLOMSS模型的有效性和灵活性.关键词局部最优服务选择模型;序数效用函数;主客观赋权模式1引言开放的网络化应用和“软件作为服务”的理念必将导致基于Internet环境下软件系统的主要形态、运行方式、生产方式和使用方式发生巨大的变化.未来网络软件的一种趋势表现为构造若干服务动态聚合、渐趋稳定的软件应用系统[1].随着服务数量的爆炸性成长,存在大量的服务功能相同、非功能特性各异的服务,这一类服务称为服务本体[2].服务聚合过程实现由服务本体到具体服务的绑定,其中,服务选择直接关系到服务聚合的全局质量以及绑定关系是否需要动态调整.服务质量作为非功能特性的重要组成部分,基于服务质量的服务选择问题倍受学术界和工业界的关注.服务聚合主要有两种服务选择策略:全局最优策略和局部最优策略.以基于流程的服务聚合为例,全局最优策略只是关注服务聚合后服务质量的全局优化效果,不强调局部服务的优劣;局部最优策略以活动为粒度,基于局部最优原则从服务本体中选择合适的局部服务.(1)全局最优策略其在端对端的服务质量的约束下,通常将服务选择的全局服务质量优化问题转化为整数规划、多选择背包算法和模拟退火等数学求解问题.文献[3-4]定义了五维的服务质量模型,基于整数规划论提出了满足全局最优的服务选择算法;文献[5]在综合考虑系统负载和代价的基础上,定义了效用函数来选择服务使得服务聚合的端对端响应时间的效用最大化;面向服务网络的模拟退火算法[6]、基于信任感知的蚁群系统优化算法[2]和基于多目标遗传算法GODSS[7]都针对全局最优选择服务,并且求解效率会制约服务动态绑定的性能.这类方法构造的聚合服务链是满足约束条件的目标最优单解而非可接受的多解,用户无法根据偏好选择聚合服务链,不能充分体现服务个性和激励服务提供者优化服务质量.(2)局部最优策略其基于局部最优原则对候选服务的服务质量加权和打分,为每个活动选择得分最优的局部服务,其中如何确定评价因子和权重是关键.文献[8]提出由领域专家根据领域经验定制评价因子(包括服务质量属性和服务业务属性),利用先验知识采用机器学习算法计算权重;文献[9]提出基于动态偏好的服务选择算法,针对每次服务配置的最大请求效用来确定权重,并结合声明式逻辑匹配来克服随机选择服务的不足;文献[10]提出面向分布式环境的迭代选择算法聚合局部最优服务以适应网络环境变化.这类方法未能有效保证服务个性和用户偏好的平衡,更重视服务选择的理论研究而在实用性和通用性方面略显不足.针对上述问题,我们在引入真实度作为附加属性来增强多维服务质量模型的合理性和公正性的基础上,提出了一个基于多维服务质量的局部最优服务选择模型MLOMSS(Multi-QoSbasedLocalOptimalModelofServiceSelection),为自动选取优质服务提供重要依据.主要工作包括:引入序数效用函数作为服务排序的数值尺度;构造客观赋权模式、主观赋权模式和主客观赋权模式来确定各服务质量属性的权重;构造实验证明MLOMSS模型的有效性和灵活性.本文第2节建立了多维服务质量模型,在引入序数效用函数的基础上给出局部最优服务选择模型;第3节将线性局部最优服务选择模型的权重确定问题建模为多属性决策问题,设计了客观赋权模式、主观赋权模式和主客观赋权模式;第4节构造相关实验证明模型的方法的灵活性和有效性,说明服务局部优先选择算法能有效缩小全局最优服务选择的求解空间;最后对全文的内容进行总结.2局部最优服务选择模型2.1多维服务质量模型服务质量的建模对刻画服务聚合的质量需求和系统质量评估至关重要.当前对服务质量的建模呈现出一些特点:(1)针对不同应用需求,服务质量属性集合的组成存在差异性.文献[11]只定义四维通用的服务质量属性,包括执行代价、执行时间、可靠性和可用性;文献[4]认为服务质量属性应包括可用性、可靠性、费用、吞吐量、精确性和声誉等;文献[12]定义了五维服务质量属性,包括执行代价、执行时间、可靠性、可用性和声誉;文献[13]将服务质量属性分为通用属性(包括执行代价、执行时间和声誉等)和业务相关属性(事务、补偿率和惩罚率).(2)注重服务整体服务质量的真实性,但没有度量各个服务质量属性的可信程度.目前获取服务质量信息主要采用探针法和客户收集法[14].文献[12]使用客户收集法收集服务质量信息;文献[13,15]通过探针法收集信息并采用自动Page3化的计算服务质量信息,从而保证服务质量的真实性;文献[16]基于Web服务服务质量的管理体系结构对UDDI中的服务质量信息进行检测和自动更新.由于服务的自治和分布等特点,实际应用中存在很大局限性.很多服务提供商直接将服务质量信息直接扩展到服务描述中,但容易存在主观的和非公正的因素,通常采用声誉度[16]或信任度来度量整个服务的可信程度.针对上述问题,可构造一种多维服务质量模型来提高应用的通用性,并引入真实度作为附加属性来增强服务质量属性的合理性和公正性.定义1.多维服务质量模型是一个n维可扩充的向量:犙狅狊={q1,q2,…,qn}.定义2(真实度fidelity).设服务s的真实度qfid(s)是用户对n维服务质量属性的评价,即qfid(s)={fid1(s),fid2(s),…,fidn(s)},其中fidi(s)=∑mi的评价,rij(s)表示第i个服务质量属性被第j次访问给出的评价值,mi表示第i个服务属性被评价的总次数.一个包括执行代价qcost(s)、执行时间qtime(s)、可靠性qrel(s)和可用性qav(s),并以真实度为附加属性的四维服务质量模型可记为犙狅狊={qcost(s),qtime(s),qrel(s),qav(s)}∪{qfid(s)}多维服务质量模型的主要优点:(a)良好的开放性和可扩充性:主要表现在应用可灵活定制或加入新的服务质量属性而无需改变模型结构.(b)具有合理性和公共性:针对当前服务选择算法中假定服务质量整体可信的不足,利用真实度增强每个服务质量属性的公正性,可以更合理地指导和监督服务聚合.(c)具有适应服务质量动态变化的能力:受网络环境和服务升级等影响,服务质量可能发生变化,真实度能及时反映服务质量的变化趋势,促进服务提供者提高服务质量.2.2多维服务质量属性的规范化处理由于多维服务质量属性有不同类型的取值范围,需要对服务质量数据进行规范化处理,将所有服务质量属性的值域调整到统一的区间.由于多数服务质量属性的效用评估与它的值域具有线性变化的特点,因此可采用最小-最大规范化方法[17]来规范化评价数据.假设待评估的服务本体存在多个服务实例,max(vi)是服务质量属性qi(s)取值的最大值,min(vi)是服务质量属性qi(s)取值的最小值.如果vi的取值越大时服务质量越好,例如服务的可靠性,则采用式(2)进行规范化:max(vi)-vimax(vi)-min(vi),max(vi)-min(vi)≠0烄vi=烅1,烆如果vi的取值越小时服务质量越好,例如服务的响应时间,则根据式(3)进行规范化:vi=烄max(vi)-min(vi),max(vi)-min(vi)≠0烅1,烆经过数据规格化后,每个服务质量属性qi(s)的取值范围由原来[min(vi),max(vi)]区间转换到[0,1]区间.需要说明的是,对于枚举字符串类型数据,需要领域专家同时给出每种枚举字符串的质量评分映射表,根据这张映射表来完成服务质量属性从枚举型到数值型的转换过程;对于语言化表示的数据采用去模糊化[10]转化为实值.2.3序数效用函数序数效用函数是微观经济学的重要概念,按实值大小给出候选服务的“弱序关系”,促进理性消费服务.序关系“”,则具有以下性质:满足;定义3.若服务本体S={s1,s2,…,sm}满足弱(1)连通性.si,sj∈S,sisj或sjsi或两者都(2)传递性.si,sj,sk∈S,若sisj且sjsk,则(3)无差异性.sisk当且仅当sisj且sjsi.定理1.设“”是服务本体S={s1,s2,…,sm}上的弱序关系,则存在实值的序数效用函数f,si,sj∈S有[18]sisk;很容易证明以下两个命题.命题1.设f是服务本体S上满足式(4)的实值的序数效用函数,t是f的严格单调递增价值函数,即si,sj∈S有[18]命题2.设f1,f2是服务本体S上的序数效用Page4函数,则f1,f2的和函数f为序数效用函数,即si,sj∈S有上述命题表明,计算候选服务的“弱序关系”的效用函数是存在且不是唯一的.序数效用函数的任何严格单调递增变换后仍是序数效用函数,序数效用函数的和函数仍是序数效用函数.文献[18]从经济学角度严格证明“弱序关系”和序数效用函数存在性.相应地,容易得到服务集S上的序数效用函数.命题3.设f1(q1(si)),f2(q2(si)),…,fn(qn(si))分别是S={s1,s2,…,sm}上满足弱序关系“”的序数效用函数,则单调递增复合函数f(S)=f(f1(q1(si)),f2(q2(si)),…,fn(qn(si)))是服务本体S上的序数效用函数.2.4局部最优服务选择模型序数效用函数作为局部服务排序的数值尺度,刻画出局部服务消费的最优预案,从而促进服务聚合成为一种理性消费服务行为.结合多维服务质量模型,可建立一般的局部最优服务选择模型.定义4(基于多维服务质量的局部最优服务选择模型MLOMSS).设服务本体S={s1,s2,…,sm},犙狅狊={q1,q2,…,qn}∪{qfid}为n维服务质量模型,f1(q1(si)),f2(q2(si)),…,fn(qn(si))分别是S上满足弱序关系“”的序数效用函数,则服务本体S以f(S)=f(f1(q1(si)),f2(q2(si)),…,fn(qn(si)))为排序数值尺度,服务按大小顺序依次选择.为简单起见,定义第j维服务质量属性的序数效用函数fj(qj(si))=wjqj(si).定义5(线性局部最优服务选择模型MLOMSS).设犃=[aij]m×n表示服务质量决策矩阵,其中aij=qi(sj)是服务sj∈S在服务质量属性qi∈犙狅狊的取值,犃按最小-最大规范化得到标准矩阵犅=(B1B2…Bm),选择线性序数效用函数f(S)=∑n犅k狑,则sisj当且仅当犅i狑犅j狑,狑=(w1,w2,…,wn),i,j=1,2,…,m.局部最优服务选择模型的主要优点:(a)服务消费以最优的预算方案推荐使用,大大提高服务消费的质量.服务聚合作为一种典型的服务消费场景,每个活动的局部最优更容易满足端对端的服务质量约束.(b)易于体现服务个性和用户偏好.序数效用函数源自经济学消费理论,通过用户参与确定权重,在保证服务效用最大化的同时能充分体现用户偏好.(c)能有效提高预留服务的利用率,有利于调整服务消费者和服务提供者的服务级别协定(ServiceLevelAgreement,SLA),激励服务提供者优化服务质量.3决策模式给定序数效用函数为f(S)=∑n∑nwj=1,wj0,j=1,2,…,n,则基于线性局部最j=1优服务选择问题就可转化为多属性决策问题,其中至关重要的是确定各属性的权重.根据确定权重的不同方法,主要有3种决策模式:主观赋权模式、客观赋权模式、主客观赋权模式.用户根据确定的权重得到一个有序服务本体Ssort.(1)主观赋权模式设权重完全由用户偏好确定,按最优权w{∑nwj=1,wj0,j=1,2,…,j=1定义6(主观赋权模式).设wj是服务属性qj的权重,w用户给出属性比较矩阵为犇=[dkj]n×n(式(8)),其中dkj表示qk较qj的相对重要程度,则有序服务本体Ssort满足si,sj∈Ssort,sisj当且仅当犅i狑犅j狑,狑=(w1,w2,…,wn),i,j=1,2,…,m.(2)客观赋权模式设权重由客观数据确定,完全不考虑用户偏好,按最优权w选择服务.定义7(客观赋权模式).设wj是服务属性qj的权重,wj=max{b1j,b2j,…,bmj}表示属性qj在决策矩阵中b的理想值,目标函数f2要求理想值与其它候选服务Page5对应qj属性值的方差达到最小,则有序服务本体Ssort满足si,sj∈Ssort,sisj当且仅当犅i狑犅j狑,狑=(w1,w2,…,wn),i,j=1,2,…,m.(3)主客观赋权模式主观赋权模式和客观赋权模式各有优缺点.主观赋权模式确定各属性的权重,虽然体现用户偏好,但是决策或评价结果具有很大的主观随意性;客观赋权模式确定各属性间的权重,虽然决策或评价结果具有较强的数学理论依据,但是没有体现用户偏好.因此,结合主观赋权模式和客观赋权模式两者的长处,采用主客观赋权模式来确定属性的权重.设权重由服务质量信息的客观性和用户偏好综合确定,按最优权w1,2,…,}n选择服务.定义8(主客观赋权模式).设wj是服务属性qj的权重,w由式(10)确定权值,则有序服务本体Ssort满足si,sj∈Ssort,sisj当且仅当犅i狑犅j狑,狑=(w1,w2,…,wn),i,j=1,2,…,m.为求解模型(10),构造如下多目标规划minf3=α∑n烄subjectto∑n烅wj0,j=1,2,…,烆其中α,β表示主、客观赋权模式相对重要程度,并且满足暂不考虑对n个权重(wj0,j=1,2,…,n)的非负约束,构造Lagrange函数L=α∑nk=1∑n2λ∑n设L[α∑nβ∑n结合约束∑ni=1形式其中W=(w1,w2,…,wn),犣=[zij]n×n,犲=(1,1,…,1),犗=(0,0,…,0),犣的元素形式zij=-α(dij+dji),i≠j;i,j=1,2,…,n烄烅zii=α∑n烆求解方程(15),可得其中狑就是主客观模式确定的权值.4实验分析语义Web服务集成平台SEWSIP(SemanticEnableWebServiceIntegrationPlatform)[19]提供一个类似澳大利亚新南威尔士大学SELF-SERV[20]的快速服务聚合环境,可通过服务编辑器指定服务聚合的流程模型.服务聚合引擎支持两种策略:采用全局最优服务选择算法构造聚合服务链;采用局部最优选择服务算法和全局最优服务选择算法相结合快速构造聚合服务链,其中,服务质量信息主要来自服务描述信息,并通过服务代理动态收集用户反馈来构造真实度属性以保证服务质量信息的公正性.旅游业务集成是服务消费的一种典型应用场景,通过集成分布在互联网上的服务为出行规划提供支持.容易构建旅游业务集成的有向无环图G(E,V),包括活动:旅游路线选择WS1、国内飞机预订WS2、国际飞机预订WS3、旅游胜地选取WS4和汽车出租[20].实验环境为IntelCore(TM)21.86GHz,WS5Page6RAM2GB,硬盘160GB,100MB网络带宽.(1)局部最优服务选择以WS4为例,生成满足服务功能需求的10个候选服务作为服务本体(见表1),并给出四维通用服务质量属性和真实度属性信息,即执行代价、执行时间、可靠性、可用性存在取值,真实度作为附加属性对服务质量信息进行自动更新,缩小服务提供商声明和实际值的差距.用户给出了属性比较阵犇1和犇2来反映偏好.执行代价s10.141750.900.92(0.99,0.94,0.90,0.95)s20.201500.950.98(0.95,0.89,0.93,0.92)s30.101580.920.91(0.95,0.85,0.90,0.91)s40.151520.850.95(0.88,0.90,0.90,0.88)s50.181650.920.98(0.85,0.90,0.95,0.95)s60.201750.900.88(0.99,0.94,0.92,0.90)s70.151900.940.92(0.95,0.95,0.92,0.95)s80.161550.880.96(0.95,0.88,0.95,0.90)s90.181500.920.92(0.92,0.92,0.90,0.95)s100.151450.920.88(0.92,0.90,0.92,0.90)犇1=按主观赋权模式、客观赋权模式和主客观赋权模式来选择服务:(a)主观赋权模式按照属性比较阵犇1和式(7),利用单纯形法可得权重狑=(0.08,0.48,0.24,0.2),10个相似服务排序是s2s9s10s5s3s8s4s1s7s6.如果用户选用属性比较阵犇2,则可得权重狑=(0.13,0.15,0.33,0.39),候选服务排序结果为s2s5s3s8s9s7s1s4s10s6.因此对于不同的属性比较阵,排序结果变化比较大,排序结果呈现出较大的随意性.(b)客观赋权模式由式(9),利用单纯形法可得权重狑=(0.15,0.35,0.31,0.19),则候选服务排序结果为s2s3s5s10s9s8s4s1s7s6,并且结果与属性比较阵无关.(c)主客观赋权模式取α=0.3,β=0.7分别为主观决策模式和客观决策模式的相对重要程度以及选用属性比较阵犇1,可得权重狑=(0.10,0.42,0.27,0.21),服务排序s2s9s5s10s8s3s4s1s7s6;若选用属性比较矩阵犇2,可得权重狑=(0.10,0.42,0.27,0.21),服务排序是s2s9s5s10s8s3s4s1s7s6.s10.38190.4105s20.78690.7400s30.57190.6012s40.52320.4490s50.60320.5872s60.26080.2523s70.31270.4001s80.57130.5217s90.63450.5813s100.62340.5836选取前4个候选服务分别计算执行代价、执行时间、可用性和可靠性来比较3种决策模式的优劣,具体计算结果如图1所示.客观赋权模式在执行代价、执行时间和可靠性达到最优,但可用性不是最佳;对于主观赋权模式分别在执行代价、执行时间和可用性达到最大,但可靠性偏低,用户偏好直接造成服务质量信息的效用实际表现不足;主客观赋权模式展示良好的中间特性,既反映了用户偏好又体现服务质量的客观特性,更具有灵活性.需要说明的是,局部最优服务选择模型MLOMSS存在以下隐含前提假设:每个服务质量属性的效用是线性的,任意两个属性都是效用独立的;每个服务的任一属性的效用无论多差都可用其它属性的价值来补偿.事实上,属性的效用是线性的以及效用独立性条件很难验证.服务质量属性间的可补偿性通常只能是部分的、有条件的.Page7影响(2)局部最优服务选择对全局最优服务选择的基于用户偏好的全局最优服务选择,即在给定的端对端服务质量约束和用户偏好条件下,追求聚合服务综合质量的最大化,其本质仍是NP-hard问题.SEWSIP采用局部最优服务选择和基于整数规划[4]的全局最优服务选择算法相结合,解决服务聚合求解空间增大构造聚合服务链的效率问题.以主客观赋权模式为例,考察局部最优对全局最优服务聚合的影响,在相同业务流程的活动数目的情况下,调整每个活动的候选服务数目对构造服务聚合链的成功率和性能的影响.以旅游业务集成为例,每一活动分别有10,20,30,40,50,60个候选服务,对于每个活动统一采用或不采用局部最优服务选择,构造服务聚合链的成功率和计算代价.每种情况进行20次平均值,随着候选服务数目的变化,构造服务聚合链成功率和时间代价的趋势如图2、图3所示.图2候选服务数目对服务聚合成功率的影响图3候选服务数目对构造服务聚合链时间代价的影响图2表明当候选服务数在10~60调整时,是否采用局部最优选择算法对构造服务聚合链的成功率影响不明显.这表明全局最优构造的聚合服务链是由局部最优服务选择的服务组成[21].图3采用全局最优服务选择算法构造聚合服务链时随着候选服务数目的增长时间代价极速递增,而先采用局部最优过滤候选服务再由全局最优算法构造服务聚合链的时间代价增长趋势较缓.前者全局最优服务选择算法(整数规划)对服务本体的空间大小敏感,而后者的时间代价增长主要来自局部最优选择算法对候选服务的效用排序.这表明,局部最优选择有助于缩小服务聚合的求解空间并提高构造服务聚合链的效率.5结论服务选择是影响用户对服务聚合体验的关键问题.针对目前全局最优服务选择算法不能充分体现用户偏好,在引入序数效用函数作为局部服务排序的数值尺度的基础上,提出一种基于多维服务质量的局部最优服务选择模型MLOMSS,为自动选取优质服务提供重要依据,并构造客观赋权模式、主观赋权模式和主客观赋权模式来确定各服务质量属性的权重.通过语义Web服务集成平台SEWSIP证明MLOMSS模型的有效性和灵活性,并证明局部优先服务选择算法能极大缩小全局优先服务选择的求解空间.先采用局部优先服务选择算法对候选服务效用排序,然后采用全局优先服务选择算法快速构造服务聚合链.MLOMSS对服务聚合带来以下好处:充分体现用户偏好和服务质量信息的客观性;不要求所有的候选服务的服务质量信息存储在同一注册实体;提高构造服务聚合链的效率以适应网络环境的不确定性和有利于服务提供者优化服务质量;能有效提高预留服务的利用率;适用于服务聚合执行前或执行中等.除服务聚合应用场景外,本文所设计的基于多维服务质量的局部最优服务选择模型MLOMSS可用到一般的服务消费场景中,也同样适用于网格资源和构件的选择问题.
