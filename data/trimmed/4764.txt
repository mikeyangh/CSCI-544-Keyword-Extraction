Page1基于用户签到行为的兴趣点推荐任星怡宋美娜宋俊德(北京邮电大学计算机学院信息网络工程研究中心教育部重点实验室北京100876)摘要随着大数据技术的快速发展,推荐系统成为大数据领域里的一个重要的研究方向.随着基于位置社交网络(Location-BasedSocialNetworks,LBSN)的快速发展,兴趣点(Point-Of-Interest,POI)推荐成为一个重要的研究热点,帮助人们发现有趣的并吸引人的位置,特别是当用户在异地旅行的时候.由于用户的签到行为具有高稀疏性,为兴趣点推荐带来很大的挑战.为处理用户签到数据的稀疏性问题,越来越多的研究结合地理影响、时间效应、社会相关性、内容信息和流行度影响这些方面的因素为提高兴趣点推荐的性能.然而,目前的研究缺乏一种综合分析上述所有因素共同作用的方法来处理兴趣点的数据稀疏问题,特别是异地推荐场景被目前大多数研究工作所忽略.针对以上所述的挑战,文中提出一种联合概率生成模型,称为GTSCP,模拟用户签到行为的决策过程,该模型有效地融合上述因素来处理数据稀疏性,特别是异地推荐场景.文章所提的兴趣点推荐方法包含离线模型和在线推荐两个部分.文中所提的GTSCP联合模型支持本地和异地两种推荐场景.文章在多个真实LBSNs的大规模签到数据集上进行实验,结果表明该算法相比其它先进的兴趣点推荐算法具有更好的推荐效果.关键词基于位置的社交网络;兴趣点推荐;概率生成模型;用户签到行为;联合模型1引言随着Web2.0的快速发展,无线通信与位置采集技术促生很多基于位置的社交网络,例如,Foursquare、Yelp、FacebookPlaces等.用户能够以“签到”的形式发布他们的地理标签信息和物理位置,并对已访问的兴趣点(例如,商场、餐厅、博物馆、娱乐场所、酒店等)与朋友分享他们的体验与经验.关于基于位置的社交网络的个性化推荐,利用用户签到数据是至关重要的,帮助用户探索新的区域与发现新的兴趣点,促进广告商对目标用户推送移动广告,从而使基于位置的社交网络更具有吸引力.不同于传统推荐任务,兴趣点推荐是一个基于上下文信息的位置感知的个性化推荐.通过下面的场景进行详细描述.例如,星怡居住在中国北京,早晨她通常会去她家附近的庆丰包子铺吃早餐,中午她通常会去她工作附近的东北风味餐馆吃午餐,晚上在回家之前她通常会约她的朋友去酒吧娱乐,周末她有时会与家人去朝阳公园散步或者去西单购物.现在,如果星怡想去杭州度假,那么在旅行中什么样的兴趣点她会感兴趣呢?这样的兴趣点推荐一定是基于上下文信息的位置感知的个性化推荐.相比传统推荐系统的发展,兴趣点推荐系统的发展更加复杂.兴趣点推荐面临一些新的挑战.第一,用户-POI的签到矩阵是高稀疏的,因为在基于位置的社交网络中用户访问兴趣点占有非常小的比例,因此兴趣点推荐面临数据稀疏性问题.第二,随着不同的时间与地理位置的变化,用户的兴趣是动态变化的.第三,兴趣点推荐包含不同类型的上下文信息,例如兴趣点的地理坐标、签到的时间、用户的社会关系、兴趣点的分类以及兴趣点的流行度等,与传统推荐不同的是和兴趣点相关的文本信息是不完整且模糊的.用户-POI矩阵极端稀疏是兴趣点推荐需要解决的一个最重要的问题.在基于位置的社交网络中有数百万的POIs,但用户只能访问有限数量的POIs.基于位置的社交网站数据显示用户在异地生成的签到记录只占用户在本地生成的签到记录的0.47%[1],这个观察凸显了数据稀疏问题[2-3].协同过滤(CollaborativeFiltering,CF)是推荐系统最流行的方法[4].目前大量的研究工作[1-2,5-7]存储用户的历史签到数据到用户-POI矩阵当中.基于用户-POI矩阵,利用基于CF的方法推断用户对每个未访问的POI的偏好.CF的核心思想是根据相似的用户所提供的线索进行推荐.由于用户移动位置的原因,大多数这些相似的用户更有可能与目标用户居住在同一地区.考虑到这种推荐方法是通过相似用户已访问的POIs推荐给目标用户,大多数这些推荐给目标用户的POIs的物理位置位于目标用户的本地.因此,对于异地推荐场景,这些基于CF的方法不能直接应用到兴趣点推荐中.此外,兴趣点推荐不同于传统的GPS轨迹[8-9],用户的时间顺序签到记录是低采样率的,用户移动信息的细节会被丢失.在兴趣点推荐中任何两个连续签到的POI点之间的空间距离通常在1公里的范围内,然而在GPS轨迹中任何两个连续记录的GPS点之间的空间距离通常是5m~10m.而且,在兴趣点推荐中的两个连续签到的时间间隔远远大于在GPS轨迹中的两个连续记录点的时间间隔.因此,现有的序列模式挖掘方法如马尔科夫链模型不能直接应用于用户签到数据稀疏的兴趣点推荐中.随着基于位置的服务应用日益流行,关于兴趣点推荐,在地理、时间、社会、内容与流行度等方面的因素中,基于位置的社交网络为研究人类的移动行为提供一个前所未有的机会.虽然有一些研究利用上述一个或几个因素来改善兴趣点推荐的效果,但目前已有的研究工作缺乏一种综合分析上述所有因素共同作用的方法来处理兴趣点的数据稀疏问题,特别是异地推荐场景被目前大多数研究工作所忽略.针对以上所述的挑战,我们提出一种联合概率生成模型模拟用户签到行为的决策过程,称为GTSCP,该模型有效地融合地理影响、时间效应、社会关系、内容信息以及流行度影响,并构建用户签到Page3行为的联合效应模型.我们利用地理与流行度影响建模用户的移动模式.首先,我们通过用户历史已访问的POIs的位置分布或者用户的当前位置推断用户的活动范围.特别是,我们将地理空间划分成几个区域,并计算个人用户可能访问的每个区域的概率.然后,我们通过POI与区域中心的距离以及此区域的公众签到活动(即考虑地理影响和POI的区域级别流行度),推算每个区域的POI生成概率.其次,通过整合区域级别流行度影响(即群众的智慧),从而我们所提的GTSCP模型可以解决用户兴趣漂移问题.跨地理区域的数据表明用户在一个区域的兴趣推测不能总是被应用于另一个区域的推测.例如,一个用户生活在中国北京,他从来没有赌博行为,但是当他去澳门或者拉斯维加斯旅行时,他是最有可能去赌场的.为了进一步处理数据稀疏问题,GTSCP融合了空间索引结构,即树型结构的空间金字塔,这是第一个划分空间项目位置到不同层次不同大小的空间网络中的模型.我们利用兴趣点的内容信息、时间效应和社会图1本文兴趣点推荐体系结构框架图为了显示GTSCP的适用性,我们研究它是如何以一种联合的方式支持两种推荐场景:(1)本地推荐的目的是当目标用户在本地时需满足用户日常生活的信息需求;(2)异地推荐的目的是当目标用户在异地旅行时需满足用户外出旅行的信息需求,尤其是当目标用户在不熟悉的区域的时候.值得一关系建模用户的兴趣模式.我们通过用户已访问的POIs的内容信息推断用户的个人兴趣.因此,我们所提的GTSCP模型缓解了数据稀疏,特别是用户到异地旅行的场景.不幸的是,基于位置的社交网络当前的数据显示[10],大约所有POIs的30%缺乏任何有意义的文本描述.我们利用用户活动内容的时间效应来处理此问题,因为签到时间为POIs的内容信息提供了重要的线索.用户的社会关系也会影响用户签到行为.我们同时利用用户的社会关系处理数据稀疏问题.我们所提的兴趣点推荐方法包含离线模型和在线推荐两个部分.离线模型此部分的目的是利用用户的签到行为并捕捉POIs的同现模式,学习每个用户的兴趣和每个地区的当地偏好.在线推荐部分需要查询用户、查询时间以及查询区域作为输入,并自动结合已学习的查询用户的兴趣和区域的当地偏好生成top-k推荐列表.我们利用一个可伸缩的查询处理技术通过扩展的阈值算法(ThresholdAlgorithm,TA)加速在线推荐过程.如图1所示.提的是,这两个推荐场景应该是定位的、时间感知的、个性化的兴趣点推荐,目标用户在不同的位置与时间时,会推荐给同一目标用户不同的POIs排名列表.给定一个目标查询用户uq、目标查询用户的当前位置lq与时间tq,关于每个兴趣点,在线推荐部Page4分将计算得分排名,通过离线模型GTSCP来学习,自动结合用户兴趣模型、当地偏好模型、面向用户主题模型、用户社会相关性模型、用户空间模式模型、时间感知主题模型和流行度感知用户移动模型.为了加快在线推荐的过程,关于top-k推荐,我们提出一个扩展查询过程技术,从在线评分计算中分离出离线评分计算从而减少查询时间.特别是,在一个给定的区域划分兴趣点.如图1所示,关于每个地理位置,我们存储此处地理位置的K个兴趣点列表.在查询时间tq,我们检索目标查询用户uq的当前位置lq的所有兴趣点,然后利用扩展阈值算法(TA)通过结合K个候选项的分数来得出top-k个兴趣点.本文中我们的研究工作的主要贡献总结如下:(1)我们提出一个联合概率生成模型,称为GTSCP,是第1个同时融合地理影响、时间效应、社会相关性、内容信息和流行度影响的研究,并构建用户签到行为的联合效应模型.(2)我们所提的GTSCP是以一种联合模型的方式支持两种推荐场景,即本地推荐和异地推荐.(3)我们利用地理相关性,通过一个设计良好的空间索引结构即空间金字塔,对当地偏好进行平滑优化,进一步缓解数据稀疏问题.(4)我们所提的兴趣点推荐方法包括离线模型和在线推荐两个部分,然后利用一个可扩展的查询过程技术阈值算法加速在线推荐过程.(5)我们在一个真实LBSN的大规模签到数据集上进行大量的实验,评估我们所提的GTSCP的性能,实验结果清晰地表明GTSCP在本地和异地两种推荐场景下的推荐任务优于其它先进的兴趣点推荐.本文第2节介绍LBSN中兴趣点推荐技术的相关工作;第3节提出GTSCP模型;第4节部署GTSCP到兴趣点推荐中;第5节介绍实验的方案设计与性能对比,验证该算法的有效性;第6节总结本文并探讨将来的研究工作.2相关工作兴趣点推荐被认为是推荐系统领域中的一个重要任务,也称为位置推荐[11].最近,关于在LBSNs上的大规模用户签到行为记录,当前许多研究试图利用并融合地理影响、社会影响、时间效应、内容信息与流行度影响来提高兴趣点推荐的效果.2.1兴趣点推荐随着基于位置社交网络的快速发展,兴趣点推荐为人们提供了更好的基于位置的服务,受到学术界和工业界的广泛关注.基于记忆的协同过滤技术,如基于用户的协同过滤和基于项目的协同过滤被应用到兴趣点推荐中.由于兴趣点推荐的签到数据具有高稀疏性,基于记忆的协同过滤方法很容易遭受数据稀疏问题.因此,应用基于记忆的协同过滤技术不能有效地进行兴趣点推荐.基于模型的协同过滤技术同样被应用到兴趣点推荐中,但是在这些研究的工作中,几乎都只考虑了显示反馈.最近,一些研究工作开始考虑签到数据的隐式反馈.Lian等人[6]提出一种结合地理影响的加权矩阵分解方法.另外,Cao等人[12]通过随机游走方法计算元路径特征值,以度量实例路径中的首尾节点间关联度的方式,利用监督学习方法获得各个特征的权值,计算特定用户在兴趣点的签到概率.Jiang等人[13]提出一种基于模型的协同过滤的作者主题模型,关于社会用户该模型全面促进了兴趣点推荐的性能.最新的兴趣点推荐开始应用多媒体数据.Jiang等人[14]利用旅游指南和社区提供的照片以及与这些照片相关的异构元数据(如标签、地理位置和日期),提出一种个性化旅行序列兴趣点推荐.兴趣点推荐同样需要解决推荐系统的冷启动问题,一些研究工作[13-17]很大程度地解决了兴趣点推荐的冷启动问题.2.2基于地理社会影响的兴趣点推荐地理社会信息表明,人们倾向于探索用户或者用户朋友已访问的POI邻近的POIs[12].Ference等人[2]设计了一个协同推荐框架,通过用户朋友和相似用户生成的活动记录,构建一种混合的方式.Lian等人[6]结合由地理影响所导致的空间聚类现象到一个加权矩阵分解框架中处理矩阵稀疏的问题.最近兴趣点推荐的一些研究工作开始对社会媒体用户的信息进行挖掘.Qian等人[15]利用3种社会因素即个人兴趣、人际关系之间的兴趣相似性和人际关系之间的影响,并基于概率矩阵分解将这3种社会因素融合到一个统一的个性化推荐模型中.Zhao等人[16]充分利用移动用户位置的敏感特点进行评分预测,挖掘用户评分与用户-项目地理位置距离之间的相关性以及用户评分之间的差异与用户-用户地理位置距离之间的相关性.Zhao等人[17]利用社会用户评分行为提出一种用户评分预测方法,并将四种因素即用户个人兴趣、人际交往之间的兴趣相似性、人际交往之间的评分行为和人际交往之间的评Page5分行为相似性融合扩散到一个统一的矩阵分解框架中.最近许多研究[18-20]表明用户签到行为与地理距离以及社会关系之间存在很强的相关性,所以大多数当前的兴趣点推荐工作主要集中利用地理社会影响提高推荐的精确度.Ye等人[18]研究位置之间的地理影响并提出一个结合用户偏好、社会影响和地理影响的系统.关于位置推荐,Cheng等人[19]通过结合一个多中心高斯分布模型、矩阵分解和社会影响来研究地理影响.2.3基于时间效应的兴趣点推荐在LBSNs中用户签到行为的时间效应也吸引了研究人员的关注.在LBSNs中,兴趣点推荐具有时间序列模式和时间循环模式.Gao等人[7]依据时间是非统一、连续的特性,研究用户签到的时间循环模式.Cheng等人[21]通过嵌入时间序列模式,介绍了在LBSNs中的连续、个性化的兴趣点推荐任务.关于时间感知的兴趣点推荐,Yuan等人[22]融合时间循环模式到一个基于用户的协同过滤框架中.2.4基于内容信息的兴趣点推荐最近大多数研究人员探讨POIs的内容信息来缓解数据稀疏问题.关于基于位置的社交网络,Ye等人[10]利用个体位置的显性模式和相似位置间的隐式相关性,提出一种用分类标签标注位置的语义注释工作.Jiang等人[13]提出一种基于用户信息挖掘的协同过滤兴趣点推荐方法.Ferrari等人[23]分析Twitter上的帖子,并在数据集上执行LDA算法提取城市模式,例如热点与人群行为.一些研究人员结合矩阵分解方法与主题模型来挖掘每个兴趣点相关的文本信息.Gao等人[24]和Zhao等人[25]在兴趣点推荐中利用了POIs相关的内容信息与用户的情绪信息.2.5基于流行度影响的兴趣点推荐POIs的流行度反映了POIs所提供的服务和产品的质量.因此,关于兴趣点推荐利用POIs的流行度是有用的.当前大多数研究普遍认为POIs的流行度是用户对POIs的先验偏好.Ying等人[26]对于未访问的POIs,在完全二部图中,利用用户的先验偏好作为用户与POIs之间的加权边.其它一些研究工作[22,27-29]利用地理信息获取先验偏好来调整后验偏好.然而,在这些研究中,先验偏好不是个性化的用户偏好.如上所述,这些研究工作缺乏一种综合分析上述所有因素共同作用的方法来处理兴趣点的数据稀疏问题,特别是异地推荐场景被目前大多数研究工作所忽略.我们提出一种联合概率生成模型,称为GTSCP,融合地理影响、时间效应、社会关系、内容信息以及流行度影响,有效地解决了数据稀疏问题,特别是异地推荐场景.3用户签到行为联合模型3.1问题定义本节定义数据结构、阐述研究问题与展示模型框图.从LBSN的丰富信息中提取数据结构即POIs上的用户历史签到数据,包括POIs的地理信息、POIs上的用户签到时间,用户间的社会关系、POIs的内容信息以及POIs的流行度.为了便于说明,表1列出用于本文的输入数据的符号.u,v,l,s,t,r用户,POI,位置,社会关系,时间段,区域符号U,V用户集合,POIs集合LU,LV用户本地位置集合,POIs位置集合N,M用户的数量,POIs的数量L,P位置、POIs位置的数量K,W主题的数量,唯一词的数量R,T区域的数量,时间段的数量定义1.兴趣点.一个兴趣点(POI)定义为一个具有唯一标识符的与地理位置有关的特定地点.在我们的模型中,一个兴趣点有3个属性:标识符、位置和内容.我们使用v代表兴趣点的标识符,lv代表兴趣点的位置即经纬度坐标.请注意的是,许多不同的POIs会共享相同的经纬度坐标.另外,一个POI有很多相关的语义信息,例如分类和标签.我们使用符号Wv描述POI的词集合.然后我们使用空间金字塔划分并索引整个地理区域.粒度取决于应用的性质和从城市到街道的范围.定义2.用户本地位置.根据文献[30],给定一个用户u,我们定义用户的本地位置为用户所居住的地理位置,用符号lu代表.在我们的模型中,我们假设用户居住的地理位置是“固定”的.换言之,用户本地位置是静态的,而实时位置是动态的,即用户旅行时与其相关的地理位置是暂时的.由于隐私问题,用户居住的位置并不总是可以获取的.由于用户居住的位置不能很明确地给定,我们采用文献[31]的方法,在大多数用户签Page6到的范围内,我们划分25km×25km的区域作为空间金字塔的单元格.定义3.签到行为.用户签到行为由5个元组(u,v,lv,Wv,t)组成,表明用户u访问POIv,在时间t,位置在lv,由Wv所描述.定义4.用户配置文件.关于每一个用户u,我们创建一个用户配置文件Du,其是关于用户u的签到行为的集合.在我们的模型中,数据集D由用户配置文件组成,即D={Du:u∈U}.我们所提的兴趣点推荐模型支持本地和异地推荐场景.在我们的模型中,给定一个数据集D作为用户配置文件的集合,公式化我们所提的问题,并以一种统一的方式考虑了两种推荐场景.定义5.主题.给定一个词的集合W,一个主题z被定义为关于W的多项分布,即z={z,w:w∈W},每一个z,w中,w代表主题z生成词w的概率.通常,一个主题是一个语义连贯的词的软集群.问题1.兴趣点推荐.给定一个用户签到行为数据集D、一个目标查询用户uq、目标查询用户的当前位置lq与时间tq,即查询q=(uq,tq,lq),我们的目标是推荐给用户POIs的列表即目标查询用户uq感兴趣的POIs.给定一个距离阈值d,如果用户当前位置与其本地位置的距离大于d,即|lq-lu|>d,则问题变成异地推荐.否则,问题为本地推荐.根据相关研究[2,20],在我们的工作中,我们设置d=100km,因为100km左右的距离是人们“到达”的典型半径,是需要开车1~2h的距离.3.2模型描述为模仿用户在决策过程中的签到行为,我们提出一个联合概率生成模型,并融合地理、时间、社会、内容和流行度信息.GTSCP模型的框图如图2所示.N,L,K,R分别代表用户、位置、主题和区域的数量.表2介绍了我们的模型参数符号.符号θu用户u兴趣,由主题集合上的多项分布所表达θl位置l的当地偏好,由主题集合上的多项分布所表达u用户u的社会相关性,由社会关系集合上的多项分布所表达u用户u的活动范围,由区域集合上的多项分布所表达z词具体对应到主题z上的多项分布ψz时间具体对应到主题z上的贝塔分布φrPOIs具体对应到区域r的区域级别流行度分布μr区域r的位置平均值Σr区域r的位置协方差λu特定于用户u混合加权:关于采样二进制变量a的参数b,b生成λu的贝塔先验α,α,δ,γ,β,τθu,θl,u,u,z,ψz,φr多项分布的狄利克雷先验在我们的方法中,输入数据,即用户的签到记录,被建模为观察随机变量,在图2中显示为阴影圈.签到记录的社会、区域和主题指数被考虑为潜在随机变量,表示为s,r,z.特别是,GTSCP模型由7个部分组成:用户兴趣模型、当地偏好模型、面向用户主题模型、用户社会相关性模型、用户空间模式模型、时间感知主题模型和流行度感知用户移动模型,将在下文分别描述.本文提出的GTSCP算法是一个灵活的模型,由上述的7个部分组成,由于兴趣点推荐会受多种因素的影响,本文所提的模型可以灵活地增减各个因素,所以这7个部分模型之间的因素是相互独立的.3.2.1用户兴趣模型关于用户兴趣模型,由以前的研究工作[3,32]所启发,我们利用潜在主题模型提取用户的兴趣解决数据稀疏问题.我们通过主题提取用户配置文件,将每个用户签到的POIs的所有文本评论聚集到一个用户文档.因此,我们得到一个大的文档集合,每个文档对应一个用户.特别是,利用在主题集合上对应的用户签到的POIs的内容(即分类和标签),我们推导个体用户的兴趣分布,表示为θu.因此,用户兴趣与主题分布相关,从签到行为的主题中提取用户兴趣.3.2.2当地偏好模型当用户访问一个城市,尤其是一个新的城市,他们更有可能参加那个城市受欢迎的活动以及参观当地的景点.因此,给用户推荐兴趣点时,其他旅行者在这个城市旅行进行查询时所留下来的签到行为历史记录是有价值的资源,特别是用户前往一个陌生的城市,他们对邻近的区域几乎没有认识的经验.位置l的当地偏好由θl所表示,即主题集合上的多项Page7分布.这个模型可以捕捉当地的民俗风情和当地具有吸引力的地方,从而解决用户兴趣漂移问题.3.2.3面向用户主题模型在大量的签到POIs的内容文档的采集过程中,我们利用主题模型算法是用来识别潜在主题信息.我们通过主题提取POI配置文件,将所有用户在相同POI上的文本评论聚集到一个POI文档.因此,我们得到一个大的文档集合,每个文档对应一个POI.它是一个语料库的生成概率模型,基本的思想是文档被表示为潜在主题上的随机混合物,通过词分布提取主题特征.给定一组词集合W,主题z被定义为W上的多项分布,表示为z.这个主题分布为面向用户主题模型.3.2.4用户社会相关性模型朋友通常会分享相似的兴趣.这是一个常见的假设,源于“同质性”理论,阐明用户会连接相似的用户,通过“社会影响”理论,阐明连接的用户相比其他未连接的用户会更加具有相似性.这些同质性与社会影响的现象相互作用,他们的集体效应被称为“社会相关性”.另外,用户朋友的兴趣对用户在POIs进行签到的决策时起到重要的作用[33].例如,北京故宫为一个兴趣点,其在北京属于旅游分类中的热门旅游景点.如果一个用户u评论了北京故宫,然后用户u就属于旅游分类的圈子中了.在旅游分类中,用户u的朋友用户v会受其影响,由于用户u和用户v之间存在着社会关系,彼此之间存在信任感并互相影响对方,则用户v会对北京故宫此兴趣点产生兴趣,很有可能对北京故宫进行访问并签到加以评论.Fu代表用户u的朋友的集合.在分类中,用户u与用户v之间的直接或者加权的社会关系通过一个正值su,v∈[0,1]来表示,s代表社会关系.我们使用高斯分布u来建模用户与其朋友之间的社会相关性,即s~Multi(u)=N(犮T狊,ε),犮是n维的权值向量,狊是n维的相似度向量,ε是高斯模型中的方差.该建模方法可以检测与用户相似的兴趣以及与POIs相似的功能来处理冷启动问题.3.2.5用户空间模式模型空间聚类现象表明用户最有可能访问的一些POIs的地理位置,并且这些POIs通常仅限于某些地理区域[18].在本文中,地理空间划分为R个区域.我们采用一个多项分布u在区域上建模用户u的空间模型.依据文献[28,34],用户在所有区域上遵循一个多项分布r~P(r|ηu),ηu是用户u在潜在区域上的用户从属分布.每一个POI的位置lv是从一个区域从属多元正态分布lv~N(μr,Σr)中提取的.建模POI空间密度的一个简单方法是使用一个高斯密度函数,如下:P(lv|μr,Σr)=1其中μr和Σr代表平均值向量和协方差矩阵.3.2.6时间感知主题模型最近,在基于位置社交网络的用户签到数据中显示,大约所有POIs的30%是缺乏任何有意义的文本信息.为处理这个问题,我们利用已签到的POIs的内容信息与签到时间之间的相关性,挖掘用户活动内容与用户活动时间的同现模式.直观上,那些被大多数用户在相同或者相似的时间签到的POIs具有相同或者相似的内容和功能.因此,使用签到时间推断POIs的主题是有用的.技术上,在我们所提的GTSCP模型中,每个主题z不仅与词z的多项分布相关而且与时间ψz的连续分布相关.这个方法使得z与ψz可以在主题的发现过程中相互影响并彼此增强相关性.另外,这个方法的优点是推断个人兴趣时不仅是语义感知的而且是时间感知的.为了在主题发现过程中融合签到时间的信息,时间分割的设计是至关重要的.现有的离散时间分解方法是把时间分割成基于小时的时间片段[7,22].然而我们的方法与其不同的是,我们处理的时间为连续的真实值,并正则化一天的时间范围为0~1,考虑以下两点:(1)时间的本质是连续的;(2)时间离散化通常回避了选择恰当的时间间隔问题,这些时间的间隔总是太大或者太小.依据文献[35],我们采用贝塔分布来描述主题z的时间分布.3.2.7流行度感知用户移动模型流行度在很大程度上也会影响用户签到行为.当用户到异地旅行时,尤其是一个新的区域,用户的决策很大程度受当地的口碑意见所影响,即POIs的流行度.我们采用多项分布φr建模区域级别的POIs的正则化流行度,即φr,v代表区域r的POIv的正则化流行度.当地流行的POIs代表当地具有吸引力的地方,有可能为用户提供更好的体验.这就是为什么在同一地区内的具有相同语义的两个POIs的评价会不同.3.2.8GTSCP模型的概率生成过程我们将上述7个部分通过概率生成过程集成到GTSCP模型中.为了避免过度拟合,我们设置了多项分布θu的狄利克雷先验,由参数α所表示:Page8其中Γ(·)是伽马函数.相似的,多项分布θl,z,u,u,φr的狄利克雷先验,分别由参数α,β,δ,γ,τ所表示如下:我们在算法1中正式地描述了GTSCP模型算法的概率生成过程.算法1.GTSCP模型的概率生成过程.FOR每个主题zDO抽取z~Dirichlet(·|β);ENDFOR每个区域rDO抽取φr~Dirichlet(·|τ);ENDFOR每个社会相关性sDO抽取u~Dirichlet(·|δ);ENDFOR每个用户uDO抽取θu~Dirichlet(·|α);抽取u~Dirichlet(·|γ);ENDFOR每个位置lDO抽取θl~Dirichlet(·|α);ENDFOR在D集合中的每个文档DuDOFOR每个签到(u,v,lv,Wv,t)∈DuDO抛一枚硬币a通过伯努利(a)~beta(b,b)IFa=1THEN抽取一个主题指数z~Multi(θu);ENDIFa=0THEN抽取一个主题指数z~Multi(θl);END抽取一个时间指数t~Beta(ψz,1,ψz,2)FOR每个令牌w∈WvDO抽取w~Multi(z);END抽取一个社会相关性指数s~Multi(u);抽取一个区域指数r~Multi(u);抽取一个POI指数v~Multi(φr);抽取一个位置lv~N(μr,Σr);ENDEND最终,我们根据式(8)的描述,推导出观察潜在变量的联合分布.P(v,lv,wv,t,z,r,sα,α,β,γ,τ,ψ,μ,Σ)=P(zα)P(zα)P(rγ)P(sδ)P(wvz,β)P(vr,τ)P(tz,ψ)P(lvr,μ,Σ)=∫P(zθ)P(θα)dθ∫P(zθ)P(θα)dθ∫P(r)P(γ)d∫P(s)P(δ)dδ∫P(wvz,)P(β)d∫P(vr,φ)P(φτ)dφP(tz,ψ)P(lvr,μ,Σ)3.3模型推理3.3.1模型参数学习我们的目的是学习观察潜在随机变量v,lv,Wv和t的最大边缘对数似然参数.精确推断GTSCP模型是困难的,由于对后验分布常量进行正则化是棘手的,因此我们利用马尔可夫链蒙特卡洛方法(MCMC)最大化式(8)中的完全数据似然性.请注意我们采用共轭先验狄利克雷多项分布,因此我们很容易集成出θ,θ,,φ,和.为了方便采样,我们根本不需要采样θ,θ,,φ,和.至于超参数α,α,β,δ,γ,τ,b和b为简单起见,我们采用固定值,即α=α=50/K,γ=50/R,δ=β=τ=0.01,b=b=0.5.在吉布斯采样过程中,关于每一个用户签到行为(u,v,lv,Wv,t),我们需要获取正在采样的潜在社会相关性s、潜在主题z、潜在区域r的后验概率.我们从式(8)所显示的观察潜在变量的联合概率分布开始,采用贝叶斯链式法则,可以方便地获得条件概率.首先,我们通过以下后验概率采样社会相关性s:P(s|s-u,v,z,r,v,lv,Wv,t,u,·)∝n-u,v其中:s-u,v代表除了当前所有用户关系的社会相关性;nu,s代表从用户u的社会相关性分布中采样潜在社会相关性s的次数;n-u,v的上标-u,v代表除了当前所有签到记录的数量.然后我们采用两步吉布斯采样过程从而保证主题的一致性,首先根据后验概率采样硬币a如下:Page9P(a=1|a-u,v,z,u,·)∝P(a=0|a-u,v,z,u,·)∝Σz(n-u,v其中:nu,a1是在用户配置文件Du中当a=1时被采样的次数;nu,a0在用户配置文件Du中当a=0时被采样的次数;nu,z代表从用户u的兴趣分布中采样潜在主题z的次数;nl,z代表从位置l的当地偏好分布中采样潜在主题z的次数.然后,我们使采样主题z通过下面的后验概率,当a=1时:P(z|a=1,z-u,v,s,r,v,lv,Wv,t,u,·)∝P(z|a=0,z-u,v,s,r,v,lv,Wv,t,u,·)∝u,z+α)·(1-t)ψ-1n-u,vu,z+αΣz(n-u,v当a=0时:l,z+α)·(1-t)ψ-1n-u,vl,z+αΣz(n-u,v其中:z-u,v代表除了当前所有签到记录的主题配置;nz,w代表从主题z生成词w的次数.P(r|r-u,v,s,z,v,lv,Wv,t,u,·)∝n-u,vΣr(n-u,v最终,我们通过以下后验概率采样区域r:其中:nu,r代表从用户u的空间活动分布中采样区域r的次数;nr,v代表区域r生成的POIv的次数.为了简化并加速,我们根据配置的潜在变量r和z在每次迭代后采用矩量法更新贝塔分布与高斯分布的参数μ,Σ和ψ.特别是,参数μr和Σr通过式(15)与(16)所更新.Σr=D(r)=1其中,sr代表配置在潜在区域r的POIs的集合.更新贝塔分布参数ψ如下:其中,tz和s2z分别代表配置在主题z的时间戳的采样平均值和采样协方差.3.3.2模型推理框架经过大量采样迭代后,通过检验s,r和z的数量,使用近似后验输出估计参数.模型推理框架如算法2所示.我们首先使用K-Means方法初始化地理位置的聚类(算法中3~4行).然后基于签到记录随机初始化主题配置(5~9行).然后,关于每一次迭代,每个签到记录(u,v,lv,Wv,t),通过式(9)~(14)更新社会相关性、主题和区域配置(算法中12~18行).在每一次迭代后,我们更新高斯分布和贝塔分布的参数(算法中19~20行).重复迭代直至收敛(算法中11~26行),另外,在初始几百次的迭代中引入一个老化过程来移除不可靠的采样结果,并且仅在周期性采样之后,我们又引入采样滞后(即老化过程后样本之间的间隔),以避免样本之间的相关性(算法中21~25行).根据已有的数据来递归估计似然函数.参数估计法能在数据模型未知参数和确实数据之间建立一种关系.如果已知缺失变量与其他变量间的关系,则可直接估计该分布模型的未知参数.若已知分布模型参数,则可以获得缺失值的无偏估计值.这样模型参数与缺失值之间的相互依赖关系可以用迭代方法得到.本文模型首先假定参数值来预测POI的缺失特征值,然后再用预测值更新模型的参数估计值,反Page10复进行,直到模型的参数估计最终收敛.所以本文所提的GTSCP模型在一定程度上可以解决POI特征缺失问题.算法2.GTSCP模型的推理框架.输入:用户签到集合D,迭代次数I,老化次数Ib,采样输出:估计参数θ^,θ^,^,^,^,φ^,ψ^,μ^,Σ^,λ^1.创建临时变量θsum,θsum,sum,2.创建临时变量ψ^,μ^,Σ^;3.使用K-Means方式初始化地理位置聚类;4.分别通过式(15)和(16)更新μ和Σ;5.FOR每个Du∈DDO6.FOR每个签到记录(u,v,lv,Wv,t)∈DuDO7.随机配置主题;8.END9.END10.初始化变量计数为零;11.FOR迭代=1到IDO12.FOR每个Du∈DDO13.FOR每个签到记录(u,v,lv,Wv,t)∈Dudo14.使用式(9)更新社会相关性配置;15.使用式(10)~(13)更新主题配置;16.使用式(14)更新区域配置;17.END18.END19.分别通过式(15)和(16)更新μ和Σ;20.通过式(17)和(18)更新ψ;21.IF(迭代>Ib)并且(迭代modIs==0)THEN22.计数=计数+1;23.更新θsum,θsum,sum,24.通过式(19)~(28)计算θsum25.END26.END27.RETURN模型参数θ^=θsum3.3.3时间复杂度我们分析以上GTSCP模型推理框架的时间复杂度.假设过程需要O(K)次迭代才能达到收敛.在每次迭代中都需要所有的用户签到记录.关于每一次签到记录,首先对于采样潜在社会相关性需要O(S)操作计算后验分布,然后对于采样潜在主题需要O(K)操作计算后验分布,最后关于采样潜在区域需要O(R)操作计算后验分布.因此,总的时间复杂度为O(I(S+K+R)Σu|Fu|Σu|Du|).3.4空间平滑优化为处理用户兴趣漂移问题,我们构建当地偏好模型.为进一步处理数据稀疏问题,我们利用树型结构,称为空间金字塔,划分空间项目位置到不用层次不同大小的空间网络中.更具体地说,空间金字塔分解空间成H个水平层.第0层只有一个空间网格.对于一个给定的第h层,空间被划分成4h个面积相等的网格.因此,空间可以递归地划分成很多不同层次不同粒度的单元格.空间金字塔的图解如图3所示.在空间数据挖掘中的一个基本假设是一切事物都与其他事物相关联,附近的事物比遥远的事物更加具有相关性,此理论为地理学第一定律[36].这个定律被称为“空间自相关”.空间金子塔可以有效地执行这个定律.换言之,对于每个位置l,其可以表示为一条从根节点到其相对应的叶节点的路径.我们使用一个向量(l1,l2,…,lh,…,lH)来描述路径.基于位置向量的表示,我们可以很容易地计算出两个位置之间的邻近度.如果两个位置在空间金子塔共享越多的祖先,那么这两个位置就越邻近.当在位置l的用户活动数据非常稀疏时,则当地偏好θl就不能被准确地评估.为了处理这个问题,我们利用地理相关性来增强模型参数θl的先验知识.在地理空间中,如果两个位置l和l是邻近的,则当地偏好θl和θl更加相似.为了融合地理相关性信息到我们的Page11GTSCP模型中,基于路径向量来计算位置l的当地偏好θl.给定一个位置l,当地偏好表示如下:根据上面的公式,一个位置的当地偏好取决于它的所有祖先的根.通过这种表达方式表明邻近位置分享相似的偏好,即通过空间金字塔对当地偏好进行平滑优化.同时,如果在一个位置有很少或者几乎没有活动时,我们仍可以通过它们的祖先推断它们的偏好.另外,一旦每个层级的当地偏好被学习后,就不用再重新训练参数,通过改变模型中的最低层级,该模型可以在不同的粒度之间进行快速且方便地转换.在模型推理的过程中,我们需要优化当地偏好.因为当地偏好参数的计算为每个层级相对应的参数的和,我们需要计算每个层级参数的粒度.因此,我们推断当地偏好如下:ρu,l,z=n-u,vθu,zθl,zθlh,z其中:d(u,z)代表在Du中有多少活动被分配到主题z;d(l,z)代表在位置l发生的活动的数量;uj代表用户生成的第j个活动记录;d(lh,z)代表在位置lh配置到主题z的活动记录的数量;Dlh是在位置lh发生的活动记录集合.4利用GTSCP模型的兴趣点推荐4.1兴趣点推荐的查询过程给定一个查询用户uq以及查询用户的当前位置lq和查询时间tq,即查询q=(uq,tq,lq),当我们已经学习完模型参数集合Ω^={θ^,θ^,^,^,^,φ^,ψ^,μ^,Σ^,λ^}后,我们计算用户uq在每个POIv签到的概率,然后选择top-k列表中的最高概率的POIs推荐给查询用户.特别是,给定查询用户的查询时间tq和当前位置lq以及学习过的模型参数^Ω,我们计算用户uq在每个POIv签到的概率如下:P(v,lv,Wv|uq,tq,lq,^Ω)∝∑rP(v,lv,Wv|uq,tq,lq,^Ω)=P(v,lv,Wv,tq|uq,lq,^Ω)P(v,lv,Wv,tq|uq,lq,^Ω)∝P(v,lv,Wv,tq|uq,lq,^Ω)∑vP(v,lv,Wv,tq|uq,lq,^Ω)计算如下:P(v,lv,Wv,tq|uq,lq,^Ω)=∑r其中,P(r|lq,^Ω)代表用户u的当前位置lq在区域r的概率,并通过贝叶斯法则由式(32)计算,通过式(33)估计潜在区域r的先验概率如下:P(r|lq,^Ω)=P(r)P(lq|r,^Ω)P(r)=∑u其中,Nu代表有用户u所生成的签到数量.为避免过度拟合,我们引入狄利克雷先验参数ξ.P(v,lv,Wv,tq|uq,r,^Ω)被定义如下:P(v,lv,Wv,tq|uq,r,^Ω)=P(lv|r,^Ω)P(v|r,^Ω)∑s∏u∈Fu∑zP(w|z,^Ω(∏w∈Wv我们利用关于主题z所生成的词集合Wv的概率几何平均值,即P(Wv|z,^Ω)=∏w∈Wv虑到与不同的POIs相关的词的数量可能是不同的.通过式(35)~(39),初始的式(34)可以表述为式(40)如下:P(v,lv,Wvuq,tq,lq,^Ω)∝∑r∑[r∑s∏u∈Fu∑zP(wz,^Ω(∏w∈WvPage12∑r∑s∏u∈Fu∑z4.2有效在线的兴趣点推荐我们所提的兴趣点推荐方法是训练离线的GTSCP模型,并获得包含用户兴趣、签到行为和POI属性的必要信息的知识模型,然后在实时查询q时,利用知识模型检索top-k列表中推荐的POIs.为了加速在线查询过程,基于式(40),我们提出一个排名框架公式如下:S(q,v)=∑rW(q,r)F(v,r)∑s查询偏好如下:POIv的属性如下:关于查询q,需要匹配查询偏好与POIv的属性.S(q,v)代表POIv的排名分数.每个区域、社会相关性或者主题被认为是一个属性(即a=r,s或者z),W(q,a)代表q在属性a上的权重,F(v,a)代表与属性a相关的POIv的分数.这个排名框架从在线分数计算中分离了离线分数计算.因为F(v,a)是独立的查询,它可以在离线中被计算.尽管查询权重W(q,a)可以在线计算,但它主要的时间消耗部分(即θ^uq,z,θ^lq,z,ψ^z,tq,(μ^r,^Σr))同样是离线计算的,在线计算只是一个简单的组合过程.这个设计考虑了最大预先计算问题,进而减少查询时间.简单的方法生成top-k列表中的POIs,需要通过式(41)计算所有POIs的排名分数,并选择排名分数最高的top-k个POIs.然而这样的计算方法效率低,特别是当POIs的数量或者POIs属性的数量变大时.基于查询偏好稀疏性的观察,一个查询q只喜欢少量的属性(即3~5个潜在维度),在大多数属性中查询权重是极其小的.因此,关于top-k推荐[3,37],我们采用基于阈值算法(TA)的查询过程技术来提高在线推荐的有效性.因为W(q,a)是非负的,给定一个查询q,我们所提的排名式(36)是单调上升的,满足了基于阈值算法的查询过程技术的要求.该技术具有良好的性能,不需要扫描所有的POIs,通过检查少量的POIs的数量,能够正确地找到top-k结果,使得GTSCP模型能够扩展应用到大规模的数据集.5实验5.1实验设置5.1.1数据集描述Foursquare数据集.其是一个大规模的基于位置的社交网络站点.它允许用户在不同的位置进行签到,通过分析这些签到数据相关的空间、时间、社会、文本与流行度信息,报导人们移动模式的定量评估.我们使用文献[38]所提供的数据集中的Four-square的数据集,如图4的地图所示,显示了在我们的实验室中,签到时间跨度从2010年9月到2011年11月,所有美国和欧洲用户的签到记录以及一个特定用户的签到记录.关于每个用户,该数据集包含了用户的社交网络关系,签到POIs的IDs、每个签到的POI的地理位置(即经纬度坐标)、签到时间和每个POI的内容.每个签到的存储形式为用户-ID、POI-ID、POI-位置、签到时间、POI-内容.在社交网络关系中的每个记录的存储形式为用户-ID、朋友-ID和社会关系的总数量为512643.为了清洗并移除较少发生的异常数据,我们过滤掉少于10次签到的用户,并要求每个POI应该被用户至少访问10次.此外,我们还限制了用户应至少访问5个不同的POIs.总结如下,在我们实验中的Foursquare数据集包含5468个用户总共访问了7286个POIs.数据集的统计数据如表3所示.Twitter数据集.Twitter支持第3方的位置共享服务如Foursquare,Gowalla,这些服务的用户可以在Twitter上分享他们的签到.我们使用文献[38]所提供的数据集中的Twitter的数据集.但是原始的数据集不包含每个POI的分类与标签信息,所以我们通过Foursquare的公共API,获取每个POI的内容信息.每个签到记录的存储形式与上述的Foursquare数据集的每个签到记录存储形式相同.Twitter数据集包含114508个用户总共访问了62462个POIs.数据集的统计数据如表3所示.Page13图4本文Foursquare数据集的签到地域分布数据集Foursquare54687286Twitter表3数据集的统计豆瓣数据集.豆瓣网是中国最大的基于事件的社交网站,用户可以发布和参与社交活动.我们使用文献[3]所提供的豆瓣数据集.在豆瓣网上,某个用户可以通过指定事件的内容、时间和地点来创建一个社会事件,其他用户可以通过在线回复表达他们的意愿来参与到事件当中.该数据集包含100000个用户,300000个事件和3500000个正确定义的发请帖.记录采集的数据集的存储形式如下:(1)用户信息,包括用户-ID,用户-名字,和用户-所在城市;(2)事件信息,包括事件-ID,事件-名称,事件-经度,事件-维度,事件-总结及分类;(3)用户反馈信息,包括用户-ID,事件-ID.本论文所提的方法是一个灵活通用的算法,同样适用于文献[15]中所提及的点评网数据如Yelp,Douban等数据集来进行实验评估.5.1.2评估方法因为我们所提的GTSCP模型的设计支持本地和异地两个推荐场景,我们分别在两个场景中对GTSCP模型进行有效地推荐评估.依据用户签到行为的集合,给定一个用户配置文件,我们将用户签到行为数据划分成训练集和测试集.关于异地推荐场景,当用户到异地旅行时,我们随机选择用户生成的签到数据的20%作为测试集,其余用户生成的签到数据作为训练集.同样,关于本地推荐场景,我们随机选择在本地用户生成的签到数据的20%作为测试集,其余用户生成的签到数据作为训练集.为了决定一个活动记录发生在本地还是异地,我们测量POI的位置与用户本地位置的距离(即|lq-lu|).如果距离大于阈值d,我们假设用户的活动发生在异地,否则,用户的活动发生在本地.另外,为了模仿更Page14真实的兴趣点推荐情景,我们选择一个位置坐标作为目标用户在访问POIv之前的当前所处位置.特别是,关于每个(u,v,lv,Wv,t)的测试情况,我们使用一个高斯函数生成一个以lv为中心、圆半径为d的地理坐标l.它代表目标用户u的当前所处位置.因此,根据测试情况,生成一个查询q=(uq,tq,lq).根据以上划分方法,我们划分用户签到行为数据集D为训练集Dtrain和测试集Dtest.我们利用评估方法和测量Precision@K和Recall@k来评估推荐方法的效果.特别是,关于在测试集Dtest中的每个签到行为记录(u,v,lv,Wv,t)以及相关的查询q,首先,我们计算关于POIv以及其他未被用户u之前访问的并在以lv为中心、圆半径为d范围内的POIs的排名分数.然后,我们通过他们的排名分数来排序这些POIs生成一个排名列表.让p代表POIv在这个列表中的位置.在这种情况下,最好的结果是POIv优于其他未被访问的POIs,则p=1.最后,我们从列表中挑选k个最高排名的POIs生成top-k推荐列表.如果pk,我们就有一次命中(即真实的POIv推荐给用户).否则,我们就有一次丢失.在我们的方法对比试验中,采用两种指标准确率Precision@K和召回率Recall@k来评估兴趣点推荐的质量.Precision@K定义如下:其中:K是推荐给用户的POIs的数量;R(u)是推荐给用户POIs的top-k列表;T(u)是用户实际访问的POIs的数量.关于一次测试情况,如果真实的POIv出现在top-k列表中,我们就定义hit@k的值为1,否则,hit@k的值为0.平均所有测试情况总的Recall@k定义如下:其中:#hit@k代表测试集中的命中的次数;|Dtest|为所有测试集的数量.定义通过一个标准的5倍交叉验证证明.5.1.3对比方法推荐技术的对比如下:我们所提的GTSCP模型和其他先进的兴趣点(1)TACF.TACF融合了时间效应,是先进的时间感知的协同过滤兴趣点推荐方法[22].特别是,TACF分裂时间成基于小时的时间片段,并在一个时间片段内通过已访问的POIs建模用户对POIs的时间偏好.给定一个用户和一个具体的时间,TACF会找到与用户分享相似的时间偏好.(2)GeoMF.GeoMF是一种矩阵分解模型,利用用户签到行为的空间聚类现象[6].特别是,GeoMF增强了用户和POIs的潜在因素以及用户的活动区域向量和POIs的影响区域向量,从二维核密度评估方面捕捉空间聚类现象并将其融合到矩阵分解中.(3)UPS-CF.UPS-CF是一个协同推荐框架,特别为异地用户而设计的[2].这个框架考虑了用户偏好、社会关系、地理相似性,并结合基于用户的协同过滤和基于社会的协同过滤方法,通过相似的用户或者用户的朋友的签到记录推荐POIs给目标用户.(4)LCA-LDA.LCA-LDA是位置-内容感知的推荐模型,支持用户到新城市旅行场景的兴趣点推荐[3].此模型通过POIs的内容和POI的共访问模式考虑了个人兴趣和每个城市的当地偏好.与我们所提的GTSCP模型相比,该模型忽略了地理影响、社会关系和时间效应.(5)TGSC-PMF.TGSC-PMF是一种上下文感知的概率矩阵分解兴趣点推荐算法.此模型利用兴趣点的地理、文本、社会、分类与流行度信息,并将这些因素进行有效地融合.该模型是本文作者之前研究工作所提出的模型.与现在该文所提的GTSCP模型相比,该模型忽略了时间效应.(6)SVDFeature.SVDFeature是一个机器学习工具包旨在解决基于特征的矩阵分解[39].基于这个工具包,构建一个融合更多的边信息的分解模型,即融合POI的地理位置,POI的内容信息,社会相关性,时间动态(即签到时间)和POI的流行度,与我们所提的GTSCP模型进行公平地对比.SVDFeature的局限性是它不能处理连续的位置和时间,因此我们利用文献[22,40]中的离散方法把它们分割成箱子和网格方块.我们设计5种基线方法进一步验证分别利用地理影响、时间效应、社会相关性、内容信息和流行度影响所带来的好处.TSCP是第1个GTSCP模型的简化版即没有考虑地理影响.GSCP是第2个GTSCP模型的简化版移除了签到时间信息,关于每个签到记录潜在变量z只生成词集合Wv.GTCP是第3个GTSCP模型的简化版即没有考虑社会相关性.GTSP是第4个GTSCP模型的简化版移除了POIs的内容信息,潜在变量z只生成签到时间.GTSC是第5个GTSCP模型的简化版即没有考虑流行度影响,所以潜在变量r只生成POIv的ID,则流行度感知用Page15户移动模型退化为一个基于模型的协同过滤方法.5.2实验结果5.2.1推荐效果在这部分中,在调优参数的情况下,我们呈现了对比推荐方法的实验结果.依据top-k的准确率和召回率,明显显示了对比推荐方法的不同性能.从图中所示,我们可以观察到准确率的值是随着k值的增加而下降的,召回率的值是随着k值的增加而上升的.这是因为返回越多的用户签到行为,就越有可能发现更多的用户可能愿意访问的POIs.请注意我们只显示当k值设置为1,5,10,15,20时的推荐性能.关于top-k推荐任务,更大的k值通常被忽略.Foursquare数据集上的异地推荐场景.图5(a)显示了在Foursquare数据集上的异地推荐场景下的准确率.当k=10时,GTSCP的准确率大约为0.099,当k=20时,其准确略大约为0.069.这就意味着当推荐一个有吸引力的POI分别在Top-10和Top-20时GTSCP模型分别有9.9%和6.9%的准确率.图5(b)显示了在Foursquare数据集上的异地推荐场景下的召回率.当k=10时,GTSCP的召回率大约为0.128,当k=20时,其召回率大约为0.156.这就意味着当推荐一个有吸引力的POI分别在Top-10和Top-20时GTSCP模型分别有12.8%和15.6%的召回率.很明显,我们所提的GTSCP模型明显优于其他的对比推荐方法,证明GTSCP的优势超过其他对比方法.一些观察结果如下:(1)TACF,GeoMF和UPS-CF的性能落后于GTSCP,SVDFeature,TGSC-PMF和LCA-LDA的性能,显示了潜在分类模型融合签到的POIs的内容信息的优势.这是因为用户在异地区域有很少的签到行为记录,因此在异地推荐场景中这些基于CF或者基于矩阵分解的方法会遭受到严重的数据稀疏问题.而GTSCP,SVDFeature,TGSC-PMF和LCA-LDA是潜在分类模型并融合了POIs的内容信息,可以很大程度地缓解数据稀疏问题;(2)UPS-CF的性能优于TACF和GeoMF的性能,显示了利用社会影响的好处.在异地推荐场景中通过社会朋友的签到记录可以较小程度地缓解数据稀疏问题,因为我们有时候去异地旅行时会看望我们的朋友;(3)GTSCP和SVDFeature的性能优于LCA-LDA的性能.这是因为LCA-LDA相比于GTSCP和SVDFeature忽略了地理影响、时间效应和社会相关性;(4)GTSCP和SVDFeature的性能优于TGSC-PMF的性能.这是因为TGSC-PMF相比于GTSCP和SVDFeature忽略了时间效应;(5)TGSC-PMF的性能优于LCA-LDA的性能.这是因为LCA-LDA相比于TGSC-PMF忽略了地理影响和社会相关性;(6)GTSCP所达到的推荐精确度远高于SVDFeature,尽管它们使用相同类型的特征和信息,显示了概率生成模型的优势胜过基于特征的矩阵分解.其中可能的原因是当离散化时间和地理位置时会丢失一些重要的信息.图5Foursquare数据集上的异地推荐top-k性能Foursquare数据集上的本地推荐场景.图6显示了在本地推荐场景中所有对比的推荐模型的性能.一些观察结果如下:(1)从结果中可以观察到图6中的所有方法的推荐精确度都高于图5中所示;(2)另外,图5中LCA-LDA的性能胜过TACF的性能,然而图6中TACF的性能略超过LCA-LDA,UPS-CF和GeoMF的性能,由于其融合了时间模式,显示了时间感知的协同过滤方法更适合于用户-POI矩阵不稀疏的时候,然而基于模型的方法,特别是结合用户签到行为的语义模式更有能力克服异地推荐场景的数据稀疏问题;(3)图5与图6中比较的LCA-LDA和GeoMF,我们可以观察到在异地推荐场景中利用语义模式更有利,然而在本地Page16推荐场景中利用空间模式更有利;(4)另一个观察是图6中的GTSCP模型和其它对比的推荐方法之间的性能差距小于图5中所示,显示了当数据稀疏问题不严重的时候,推荐方法之间的性能差异就变得不那么明显.图5和图6之间的比较显示这两个推荐场景本质上是不同的,应该被分开单独评估.图6Foursquare数据集上的本地推荐top-k性能Twitter数据集上的异地与本地推荐场景.图7和图8显示了在Twitter数据集上的对比推荐模型的性能.从图7和图8中,观察的结果与图5和图6的趋势相似.主要的区别为在本文实验的Twitter数据集上的所有推荐方法的精确度比在Foursquare数据集上的所有推荐方法的精确度低.这可能是由于用户在Foursquare数据集上的平均签到记录超过用户在Twitter数据集上的平均签到记录,能够使模型更加准确地捕捉用户的兴趣.豆瓣数据集上的异地与本地推荐场景.图9和图10显示了在豆瓣数据集上的对比推荐模型的性能.从图9和图10中,观察的结果与图5和图6的趋势相似.主要的区别为在本文实验的豆瓣数据集上的所有推荐方法的精确度比在Foursquare数据集上的所有推荐方法的精确度高.这可能是由于用户在豆瓣数据集上的平均签到记录超过用户在图7Twitter数据集上的异地推荐top-k性能图8Twitter数据集上的本地推荐top-k性能Page17图10豆瓣数据集上的本地推荐top-k性能Foursquare数据集上的平均签到记录,能够使模型更加准确地捕捉用户的兴趣.5.2.2不同因素的影响为了分别研究GTSCP模型融合地理影响、时间效应、社会相关性、内容信息和流行度影响对我们所提的兴趣点推荐模型性能的影响.我们对比了我们所提的GTSCP模型的5个基线方法,TSCP、GSCP、GTCP、GTSP和GTSC.对比的结果如图11和图12所示.从结果中,我们首先观察到在异地和本地两个推荐场景中GTSCP始终优于5个基线方法,并表明在两个推荐场景中GTSCP受益于同时考虑5个因素来提高推荐精确度的程度是不同的.此外,另一个观察是同一个因素在两个不同的推荐场景中的影响程度是不同的.图11Foursquare数据集上的不同因素影响异地推荐精度特别是,在异地推荐场景的情况下,根据5个因素的重要性,它们的影响程度排列如下:内容影响>流行度影响>社会相关性>时间效应>地理影响;然而在本地推荐场景的情况下,它们的影响程度排列如下:时间效应>地理影响>流行度影响>社会相关性>内容影响.显然,内容信息在异地推荐场景中对于克服数据稀疏问题起着主导的作用,然而时间效应在本地推荐场景中却起着最重要的作用.这Page18图12Foursquare数据集上的不同因素影响本地推荐精度是因为两个推荐场景有不同的特征:(1)在本地推荐场景中有足够的用户签到记录,然而在异地推荐场景中却有为数不多的用户签到记录;(2)在本地推荐场景中的限制没有在异地推荐场景中的限制那么多;(3)当用户在异地旅行时,用户的日常行为有可能会改变.5.2.3模型参数的影响调整模型参数,即区域的数量R和主题的数量K对于GTSCP模型的性能是至关重要的.因此,在这一部分我们在Foursquare数据集上研究模型参数的影响.关于超参数α,α,β,δ,γ,τ,b和b,我们设置固定值α=α=50/K,γ=50/R,β=δ=τ=0.01,b=b=0.5.我们尝试不同的设置,发现GTSCP模型的性能对这些超参数是不敏感的,但是GTSCP模型的性能对区域和主题的数量是敏感的.因此,我们通过设置区域和主题的数量来测试GTSCP模型的性能,结果如图13和图14所示.从结果中,首先我们观察到GTSCP的推荐准确率值随着区域的数量R增加而下降,而推荐召回率值随着区域的数量R增加而增加,然后当区域的数量大于50时推荐的准确率值和召回率值的变化图13Foursquare数据集上当Precision@10和Recall@10图14Foursquare数据集上当Precision@10和Recall@10Page19就不明显了.类似的观察,随着主题的数量K增加,GTSCP的推荐准确率值下降而召回率值增加,当主题的数量大于50时推荐准确率值和召回率值的变化也不明显.原因是R和K代表模型的复杂度.因此,一方面,当R和K的值太小时,模型描述数据的能力受限;另一方面,当R和K的值超过阈值时,模型的复杂度足以处理数据.在这一点上,增加R和K的值对提高模型性能的帮助就不明显了.请注意的是,在我们实验的性能报告中已达到50个潜在区域(即R=50)和50个潜在主题(即K=50).为了研究在空间平滑优化中的两个参数H和K的影响,我们尝试了这两个参数的不同设置.由于空间限制,我们只显示异地推荐场景中在Foursquare数据集上的实验结果.我们通过改变金子塔的高度H的值从2到7和主题的数量K的值从20到70.结果如图15所示.图15Foursquare数据集上当Precision@10和Recall@10时异地推荐场景中参数K和H的影响从结果中,我们观察到随着H值的增加,GTSCP模型的准确率值和召回率值,都是先增加然后再下降.一个可能的原因是,早期准确率值和召回率值随着高度H值的增加而增加,是由于利用了空间影响,使得当地偏好的推断更具有预知性.然后,召回率值随着高度H值的增加而下降,是由于高度的增加使得用户活动数据在区域单元格中变得稀疏.当空间金子塔的高度设置为5时,为两个因素的权衡,GTSCP模型达到最好的性能.另外,我们也观察到准确率值随着主题数量K值的增加而下降,而召回率值随着主题数量K值的增加而增加,当主题的数量大于50时推荐准确率值和召回率值的变化就不明显了.原因是K值代表模型的复杂度.因此,当K值太小时,模型描述数据的能力受限;然而当K值超过阈值(即K=50)时,模型的复杂度足以处理数据.在这一点上,增加K值对提高模型性能的帮助就不明显了.因此,在Foursquare数据集上,我们选择H=5,K=50作为模型效果与准确度之间最好的权衡.5.2.4冷启动问题测试我们进一步进行实验,研究不同的推荐算法对解决冷启动问题的有效性.冷启动是推荐领域里的一个关键问题,即用户没有访问任何POIs或者只访问了极少数的POIs.关于冷启动用户,我们在Foursquare数据集上测试了推荐效果,显示结果如图16和图17所示.图16显示了用户少于5次活动图16Foursquare数据集上关于冷启动用户少于Page20图17Foursquare数据集上关于冷启动用户没有记录的结果,图17显示了用户没有任何活动记录的结果.我们对比图5、图6和图16、图17的结果.一些观察结果如下:(1)尽管所有对比推荐方法的推荐效果不同程度地降低,但我们所提的GTSCP模型的性能依然是最好的.值得注意的是,从目标用户访问数量极少的POIs中,很难捕捉冷启动用户的偏好.这就是为什么只使用用户历史活动记录的GeoMF和TACF的性能最差.GTSCP,SVDFeature,TGSC-PMF,LCA-LDA和UPS-CF分别利用群体的智慧和用户社会朋友克服了用户历史活动记录的数据稀疏问题.群体的智慧和用户社会朋友为目标区域提供许多有价值的参考和线索,对兴趣点推荐起着潜在的作用;(2)GTSCP的性能优于TGSC-PMF,LCA-LDA的性能是因为其区分了当地偏好和用户偏好,并且在目标区域中目标用户更有可能访问与其有相同角色的群体偏好的POIs.值得注意的是,在Foursquare数据集上的所有用户的本地信息是已知的.因此,对于没有任何签到记录的用户,在目标区域中,GTSCP模型同样可以识别目标用户是旅游者还是本地人,然后通过其他旅行者或者本地人偏好的POIs推荐给目标用户;(3)另一个观察是GTSCP,SVDFeature,TGSC-PMF和LCA-LDA的性能优于UPS-CF的性能.这是因为UPS-CF是一个基于记忆的方法,遭受了严重的数据稀疏问题,然而GTSCP,SVDFeature,TGSC-PMF和LCA-LDA是潜在分类模型通过减少维数与融合内容信息可以很大程度地处理数据稀疏问题;(4)GTSCP达到的推荐精确度远高于SVDFeature,尽管他们使用相同类型的特征和信息,显示了在冷启动问题的情况下概率生成模型同样优于基于特征的矩阵分解模型.在本地和异地推荐场景中,关于冷启动用户,图18说明了GTSCP的性能.n代表每个冷启动用户在训练集中的签到活动记录的最大数值.从结果中,我们观察到关于冷启动用户,GTSCP在异地推荐场景中比在本地推荐场中所达到的性能更好.另外,当n值从0到5时,GTSCP模型在本地推荐场景中比在异地推荐场景中得到一个更大的性能提升.结果表明关于冷启动用户,在异地推荐场景中当地偏好对提高推荐效果所起的作用比在本地推荐场景中用户偏好对提高推荐效果所起的作用更重要.这是因为用户的访问行为在本地时更个性化与多样图18Foursquare数据集上关于冷启动用户在本地和Page21化,而用户的访问行为在外地时往往趋向于一致性.也就是说,一方面,不同的用户当在相同的异地区域旅行时趋向访问相同的POIs;另一方面,结果显示:用户的个性化兴趣在本地推荐场景中比在异地推荐场景中的影响要大.这就是为什么本地推荐场景对于用户历史活动的数量更加敏感.5.2.5推荐效率这部分实验是评估在线推荐的效率.关于GTSCP的在线推荐,我们利用两种方法.第1种方法称为GTSCP-TA,利用基于TA的查询过程技术生成在线推荐.第2种方法称为GTSCP-BF,利用一个朴素蛮力算法通过线性扫描生成一个top-k推荐.由于基于特征的矩阵分解模型SVDFeature可以无缝地融合文献[41]中所提的度量树检索算法,我们对比GTSCP-TA与SVDFeature-MT.关于SVDFeature和GTSCP的潜在因素的数量设置为120(即K=50和R=70).请注意在SVDFeature中的排名函数不是单调的,因此基于TA的查询过程技术不能应用于SVDFeature算法中.关于在Foursquare数据集上的测试集Dtest创建的所有查询,表4给出了3种不同方法的平均在线有效性.我们显示了当k设置为1,5,10,15,20时的性能.在top-10推荐时,GTSCP-TA平均在30.59ms.从结果中,我们观察到:(1)GTSCP-TA显著优于GTSCP-BF,证明了基于TA的查询处理技术带来的好处.在top-10推荐时,它只需要平均访问大约所有POIs的18%,因为在查询偏好时它充分利用了稀疏性;(2)GTSCP-TA的时间消耗成本随着推荐的数量k值的增加而增加,在推荐任务中,即使当k=20时,它的时间消耗成本依然远低于GTSCP-BF;(3)在我们的推荐任务中,SVDFeature-MT的时间成本高于朴素线性扫描方法GTSCP-BF,尽管在设置50个潜在因素数量时,Koenigstein等人[41]报导度量树检索算法的优良性能,但当k=10时,它的时间消耗成本仍是朴素线性扫描方法的1.9倍.这个结果表明,当POIs有数以百计的维度或者属性时,度量树检索算法仍然不能克服维数多的困难.方法GTSCP-TA10.2219.0230.5938.3945.63GTSCP-BF149.84150.26150.41149.63149.77SVDFeature-MT178.47230.37283.28323.77359.976总结本文我们提出一个联合概率生成模型GTSCP,建模基于位置的社交网络的用户签到行为,有效地融合地理影响、时间效应、社会相关性、内容信息和流行度影响这些方面的因素,有效地克服了数据稀疏问题和用户兴趣漂移问题,特别是在异地推荐场景中.然后通过空间金字塔的方法利用地理相关性对当地偏好进行平滑优化,进一步缓解了数据稀疏和用户兴趣漂移问题.我们所提的兴趣点推荐由离线模型和在线推荐两部分组成.为证明GTSCP的灵活性和适用性,我们研究了在一个联合的模型中是如何支持本地和异地两个推荐场景的.在真实的大规模数据集上,我们进行了大量的实验,在效果和效率两个方面对GTSCP模型的性能进行了评估.结果表明GTSCP的推荐精确度相比于其他当前先进的兴趣点推荐方法有了明显地提高.此外,我们在同一框架下,关于本地和异地两种推荐场景,研究了每个因素对改善推荐性能所起到的重要性,发现内容信息在异地推荐场景中起主导作用,而时间效应在本地推荐场景中却是最重要的.本文做为我们未来工作的一部分,我们将进一步完善解决兴趣点特征缺失的问题,从而进一步提高兴趣点推荐的性能.致谢特别感谢本文审稿专家和编辑所提出的宝贵意见和建议!
