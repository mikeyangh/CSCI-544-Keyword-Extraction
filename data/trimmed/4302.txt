Page1圆柱形硅通孔的二维解析电容模型张青青1),2)喻文健2)骆祖莹1)1)(北京师范大学信息科学与技术学院北京100875)2)(清华大学计算机科学与技术系北京100084)摘要精确提取三维芯片中硅通孔(ThroughSiliconVia,TSV)电容在三维芯片设计中至关重要.使用后钻孔工艺(Via-lasttechnology)制造的TSV将贯穿导体层,使得TSV和互连线之间的耦合电容需要精确建模.文中提出的解析公式方法可以快速提取圆柱形TSV与互连线间的二维耦合电容.对于较短的互连线,文中采用基于最小二乘拟合得到的解析公式,而对于较长的互连线,使用基于电场模拟得到的解析公式.数值实验表明和商业软件Raphael相比,文中方法可以在结果误差不超过9.1%的情况下获得至少三千倍的加速.关键词圆柱形硅通孔;三维芯片;解析模型;电容提取1引言三维芯片(3DIC)将多层晶圆片(Die)进行堆Page2低的功耗.与此同时,3D芯片可将不同类型电路(如数字电路、射频电路、模拟电路、存储器等)进行堆叠,实现高封装密度的片上系统(SoC).因此,3D芯片已经成为国内外的研究热点[1].作为3D芯片中的特殊互连结构,前人已经对TSV的基本电路特征(电容、电阻和电感)及其对电路的影响进行了研究.研究结果表明电阻及电感对于电路的影响极其有限,而电容将直接影响芯片的时钟、可靠性和功耗等各项指标[2].因此,对TSV进行准确的电容建模是物理设计中的关键一步.目前,大多数工作只研究了TSV与TSV之间的耦合电容[3-6].而在后钻孔工艺(Via-lastTechnology)中除了TSV与TSV之间的耦合电容,TSV与互连线之间的耦合电容也至关重要.文献[7]中首次对Via-last工艺中TSV与互连线之间的耦合电容进行了研究,但其只考虑了方形TSV,其方法无法适用于实际的圆柱形TSV.本文研究了圆柱形TSV与互连线之间的耦合电容,对其中最重要的二维耦合电容提出了快速、准确的解析公式.数值实验结果表明,与采用有限差分法的著名商业软件Raphael[8]相比,本文的解析公式可以在误差不超过9.1%的情况下获得至少3000倍的加速比.本文第2节介绍三维芯片TSV互连结构;第3节介绍解析公式的推导,重点是基于场模拟的方法;第4节给出相关的实验结果;最后第5节总结全文.2TSV结构及其耦合电容组成目前有两种常用的TSV制造工艺:先钻孔工艺(Via-firstTechnology)和后钻孔工艺(Via-lastTechnology).在Via-first工艺中,半导体器件和TSV被首先制造出来,刻蚀出金属互连线之后再将不同的晶圆片层叠封装.因此,使用Via-first工艺的TSV仅处于器件层和基底层(图1).而Via-last工艺将先制造半导体器件和金属互连线,将晶圆片层叠之后再钻孔制造TSV.Via-last工艺中的TSV将穿过器件层和基底,还将穿过整个金属层并与最顶层的互连线相连(图2).这时TSV耦合电容主要由以下几部分构成:(1)TSV接触块(LandingPad)与互连线之间(2)TSV与TSV之间的耦合电容(图1、图2中(3)TSV与互连线之间的耦合电容(图1、图2的耦合电容(图1中的CPW);的CTT);中的CTW);(4)TSV与半导体器件之间的耦合电容(图1、图2中的CTD).其中CPW为导线与金属平板之间的电容,已有成熟技术对其进行提取[3].CTD为TSV和半导体器件源、漏极之间的耦合电容.由于CTD的耦合路径主要在硅基(SiliconBuck)表面,因此可通过加入衬底接触(SubstrateContact)进行有效减小[2].研究人员已对CTT进行了深入的研究.文献[4-5]等都提出了计算CTT的解析公式.而对于CTW的研究非常少,文献[7]中研究了方形TSV和互连线之间的耦合电容,本文将考虑实际的圆柱形TSV,研究它和互连线之间的二维横截面耦合电容.3圆柱形TSV的二维横电容建模在考虑圆柱形TSV与互连线的耦合电容时,最主要地应计算如图3所示的二维横截面电容,其中r为TSV的半径,d为互连线表面到TSV中心点的距离,L为互连线长度.这是一对称的二维结构,对其进行电容提取的结果既可以直接用于估计实际电容值,也可以为更精确的三维电容提取提供基础.下面先分别介绍基于函数拟合与基于场模拟Page3的方法,然后分析它们的优缺点,并提出将两者结合的方法.3.1函数拟合方法不失一般性,可以将d和L看成可变化的参数.函数拟合方法就是根据一系列离散的函数值得到电容解析公式C(L,d),其中的离散函数值使用数值电容提取工具软件来计算,函数拟合的方法可以使用线性、或非线性最小二乘法.假设根据不同的L,d参数采样值得到离散函数值fi(i=1,…,m),而要拟合的函数通过线性空间Φ=span{φ1(L,d),…,φn(L,d)}来逼近,其中φ1(L,d),…,φn(L,d)称为拟合基函数,则可使用线性最小二乘方法,它可最小化逼近误差的2-范数[9].对于图3所示的二维电容结构,由于TSV和互连线之间的耦合电容与互连线长度成一定正比关系,而与间距成一定反比关系,我们可以定义拟合基函数φ1(L,d),…,φn(L,d)为L的多项式函数,1/(d-r)的多项式函数,以及它们的组合.假设多项式的次数不超过3次,则得到表1列出的基函数.根据这些基函数以及L,d采样点的值可形成设计矩阵,然后使用法方程方法或者基于矩阵正交变换的方法解出拟合系数.对于表1所示的基函数,得到的拟合电容公式为C(L,d)=c0φ1(L,d)+c1φ2(L,d)+…+c15φ16(L,d)φ1(L,d)1φ9(L,d)1/(d+r)2φ2(L,d)Lφ10(L,d)L/(d+r)2φ3(L,d)L2φ11(L,d)L2/(d+r)2φ4(L,d)L3φ12(L,d)L3/(d+r)2φ5(L,d)1/(d+r)φ13(L,d)1/(d+r)3φ6(L,d)L/(d+r)φ14(L,d)L/(d+r)3φ7(L,d)L2/(d+r)φ15(L,d)L2/(d+r)3φ8(L,d)L3/(d+r)φ16(L,d)L3/(d+r)33.2场模拟方法TSV和互连线之间的电场分布决定了它们之间的耦合电容值,图4为通过数值模拟软件得到的TSV二维结构的等势面分布图.文献[10]基于电场模拟的思想提出了针对一般互连线的二维解析电容模型,本文将该方法加以推广,考虑圆柱形TSV结构.根据等势面的分布,我们将TSV和互连线之间的电容近似地分为五个部分(如图5所示):TSV到较近的互连线表面的电容Cplate;TSV到较远的互连线表面的电容Cplate_back;TSV到互连线端面的电容Cfringe;TSV到较近互连线端点的电容Cupper_corner以及TSV到较远互连线端点的电容Clower_corner.考虑到TSV的尺寸(约5μm)比当前互连线的宽度(约0.08μm)大得多,Cfringe、Cplate_back及Clower_corner对总电容的贡献将非常有限,下面仅考虑Cplate与Cupper_corner的解析电容模型.3.2.1Cplate的推导电场强度沿着电力线的积分:在静电场中,电势降和场强的关系可以表示为其中ΔV为电势降,E(l)为电场强度,D为电力线长度.假设电场强度沿着电力线线性变化,可以将上述公式化简为求和公式:ΔV=∫D而在TSV和互连线表面,电场强度和电量满足如下关系:Page4其中E(0)、E(D)分别为TSV表面及互连线表面的电场强度;dQc、dQp分别为TSV及互连线单位表面积上的电荷量;ε为介电常数.由于同一根电力线连接的两端的电量相等,即dQc=-dQp.从而电势降可以表示为ΔV=D根据电容定义,可以得到TSV电容为如图6所示,假设Cplate部分的电力线都是标准圆弧,则可以得到如下方程:其中xc为电力线圆弧的圆心坐标.进而得到θ与x的关系如下:而根据式(7)也可求得电力线长度为将式(8)、(9)代入式(6)可得到Cplate=2∫L/2(x2+d2-r2)[2r(d+r)+(d+r)2+x2]tan-1x使用复合辛普森公式[9]可将式(10)化简为解析公式:Cplate=εL其中:G(x)=(x2+d2-r2)[2r(d+r)+(d+r)2+x2]tan-1x3.2.2Cupper_corner的推导Cupper_corner的电力线分布类似于点电荷.如图7所示,电力线从互连线端点出发结束于TSV.Cupper_corner中最短的电力线垂直于AB并从B点出发结束于E点;而最长的电力线垂直于BC并从B点出发,结束于F点.同样假设电力线都是圆弧,则当L>2r时(图7(a))可以得到rcosπ烄烅Rcosπ烆可求解得同样,当L<2r时(图7(b))有Rsinθmax-π()2+rcosθmax-π()2=LRcosθmax-π()2+R=d+rsinθmax-π()烄烅烆进而:由之前的假设及上一节的推导可得到最短电力线长度和最小的θ值:由于实际上端点处出发的电力线并非圆弧,而是会向中轴线扭曲,使得实际Dmax和Dmin较标准圆弧更小.本文将Cupper_corner部分所有电力线长度估计为Dmin,即D=Dmin.将θmax及式(17)、(18)代入下式[10]:Page5可得Cupper_corner:Cupper_corner=ε∫θmax3.3耦合方法前文3.1、3.2节中提出的方法均属于使用解析公式求解电容方法.与场求解器相比,解析方法具有速度快,所需内存小的优点.但是解析公式法往往无法达到和场求解器一样的精度.而且解析公式法有一定局限性:某种解析公式只适用于少数几种场合.下面我们将分析两种解析公式法的适用场合,并提出将两种解析方法耦合使用的方法.3.1节中介绍的函数拟合方法由于缺乏物理意义,适用范围有限.具体来说,当互连线长度较长,特别是超过TSV直径时,它并没有直接相对的圆柱面,因此随互连线长度增长带来的电容增长将越来越小.要精确描述此现象,需要使用高阶的多项式,但这将带来计算量与数值稳定性的困难.而且函数拟合方法需要事先有足够多的拟合数据点,在有些场合下这是不实用的.与此相反,场模拟方法物理意义明确,在给定参数值之后可直接计算出电容值.但其缺点在于要求精确计算出积分区间的电力线长度.在3.2节中,我们将电力线假设为标准圆弧来估算电力线长度,而在实际情况中,只有互连线长度无限长时电力线才是标准的圆弧.且当互连线长度较短时,需考虑Cfringe、Clower_corner等较多的电容分量,公式复杂,无法保证精度.基于上述分析,本文提出将上述两种方法耦合使用的方法.即当互连线长度小于TSV直径时使用拟合方法得到解析电容公式(式(1)),而当互连线长度大于TSV直径时使用场模拟方法(式(11)、式(20)).这样,在较宽的参数范围内都能得到很好的准确度,适合于实际的TSV电容建模.针对互连线不关于中轴线对称的结构,如中轴线左半边互连线长度为a、右半边长度为b的结构,可以使用耦合方法分别计算出互连线长度为2a及2b对称结构的电容值,并以它们的算术平均值估计原结构的电容值.4实验本节将使用商业软件SynopsysRaphael验证上述方法.所有实验均在SunUltraV880服务器(主频750MHz)上进行.考虑目前常用工艺尺寸[2,7,10].本文选取如下参数:TSV半径r=5μm,互连线宽w=0.08μm.L和d的取值如表2所示.0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1,1.6,2.2,3,5,7,10,13,16,20首先使用Raphael求解72个离散点(表3),并使用3.2节中的方法获得拟合公式.之后使用表2中的所有参数对此拟合公式进行验证.图8为拟合公式得到的结果和Raphael标准结果相比的相对误差.与之前分析相符,拟合方法计算结果误差随着L的增大而普遍增加.当L2r时,拟合方法误差将不超过8.9%.但是当L超过2r之后,误差开始显著增大,L=4r时,误差已经高达300%左右.图9是场模拟方法计算结果相对误差.可以看到当L偏小时,相对误差较大.总体上,场模拟方法计算误差不超过15%,而在L>2r情况下,其误差不超过9.1%.0.2,0.6,1,1.6,2.2,3,5,7,105.1,5.2,5.3,5.6,6,7,8.5,10根据3.3节提出的将最小二乘拟合与基于场的方法相耦合的方法,对表2中所有值进行测试,所得Page6电容值误差均不超过9.1%.表4列出了一些对称结构的计算结果,表5中列出了一些非对称结构的计算结果.从两表中可以看到,相对与商业软件Raphael,本文提出的耦合解析公式方法可以在误差不超过9.1%的前提下获得至少3000倍的加速比.几何参数方法结果(F)误差/%时间/sr=5;d=5.3;L=0.2;w=0.08r=5;d=5.6;L=1;w=0.08r=5;d=7;L=3;w=0.08r=5;d=8.5;L=10;w=0.08r=5;d=8.5;L=13;w=0.08r=5;d=10;L=20;w=0.08几何参数方法结果(F)误差/%时间/sr=5;d=5.3;a=2;r=5;d=5.6;a=3;r=5;d=8.5;a=7;b=3;w=0.08b=6;w=0.08b=9;w=0.085结论本文针对三维芯片圆柱形TSV电容提取问题,提出一种将函数拟合与场模拟进行耦合的解析二维电容提取方法.该方法对于短互连线结构采用最小二乘拟合得到的解析公式,而对于长互连线结构采用基于场模拟的解析公式,从而在较大范围内准确地计算圆柱形TSV的二维横截面电容.数值实验表明,该方法计算误差不超过9.1%,而相对商业软件Raphael加速比提升在3000倍以上.
