Page1物联网体系结构与实现方法的比较研究陈海明1)崔莉1)谢开斌1),2)1)(中国科学院计算技术研究所北京100190)2)(中国科学院大学北京100049)摘要构建物联网设计与实现的统一方法是目前物联网研究领域亟待解决的问题之一.物联网体系结构是设计与实现物联网系统的首要基础.文中从功能角度将目前已经提出的物联网体系结构分为“后端集中式”和“前端分布式”两种类型,并以水平性、可扩展性、环境感知性、环境交互性和自适应性等为指标对这两类体系结构进行了比较分析,指出了USN和IoT-A具有更多符合物联网特征的属性,对未来物联网的设计与实现具有更好的参考价值.文中还从物品连接模式、通信协议和服务机制3个方面对这两类物联网体系结构指导下的物联网实现方法进行了分层归纳,总结了目前建立后端集中式和前端分布式物联网系统的常用方法.最后还指出,为形成物联网设计与实现的统一方法,未来还需要在物联网体系结构的形式化说明与验证、物联网服务机制的实现方面,深入开展一些研究工作.关键词物联网;体系结构;连接模式;通信协议;服务机制1引言2005年11月国际电信联盟(ITU)发布了题为《ITUInternetreports2005—theInternetofthings》的报告①,正式提出了物联网(InternetofThings,IoT)一词,引起了世界各国的广泛关注.这一报告虽然没有对物联网做出明确的定义,但是从功能与技术两个角度对物联网的概念进行了解释.从功能角度,ITU认为“世界上所有的物体都可以通过因特网主动进行信息交换,实现任何时刻、任何地点、任何物体之间的互联、无所不在的网络和无所不在的计算”;从技术角度,ITU认为“物联网涉及射频识别技术(RFID)、传感器技术、纳米技术和智能技术等”.可见,物联网集成了多种感知、通信与计算技术,不仅使人与人(HumantoHuman,H2H)之间的交流变得更加便捷,而且使人与物(HumantoThing,H2T)、物与物(ThingtoThing,T2T)之间的交流变成可能,最终将使人类社会、信息空间和物理世界(人-机-物)融为一体.因此,物联网被认为是继计算机、互联网之后,世界信息产业的第三次浪潮.近年来,各国政府部门对物联网相关技术与产业进行了广泛的调研,制订了一系列发展计划.比如,2008年4月,美国国家情报委员会(NIC)将物联网列入“到2025年对美国利益具有重大影响的6项颠覆性民用技术”之一②;2009年1月,IBM与美国信息技术与创新基金会(ITIF)共同向奥巴马政府提交了题为《数字化复兴之路:创造工作、提升生产力和复兴美国》的报告③,建议政府投资新一代的智能型基础设施,包括宽带网络、智能医疗和智能电网三大领域,以改善经济,增加就业,带动美国经济长期发展;同年2月,美国议会通过了《经济复苏和再投资行动法案》④,其中包括了对上述三大领域的投资与发展计划;2009年6月,欧盟执委会发布了《欧洲物联网行动计划》⑤,提出了包括监管、隐私保护、芯片、基础设施保护、标准修改、技术研发等在内的14项保障物联网加速发展的技术;2009年7月,日本信息技术战略本部发布了《i-Japan战略2015》(简称为“i-Japan”)⑥,将目标聚焦在三大公共事业,即电子化政府治理、医疗健康信息服务、教育与人才培育,提出到2015年,通过物联网技术达到“新的行政改革”,使行政流程简化、效率化、标准化、透明化,同时推动电子病历、远程医疗、远程教育等应用的发展;同年10月,韩国通信委员会出台了《物联网基础设施构建基本规划》⑦,确定了通过实施“构建物联网基础设施、发展物联网服务、研发物联网技术、营造物联网推广环境”4大领域相关的12项课题,实现“到2012年构建世界最先进的物联网基础设施”的目标;2011年7月,我国科学技术部发布了《国家“十二五”科学和技术发展规划》⑧,将物联网作为新一代信息技术纳入国家重点发展的战略性新兴产业,同时将物联网列入“新一代宽带移动无线通信网”国家科技重大专项中.以上这些国家制订的物联网发展计划为各国科研机构、高等院校和企业从事物联网研究与开发工作提供了很好的技术指引和应用领域,但是都没有指出设计与实现物联网系统的方法.体系结构可以精确地定义系统的组成部件及其之间的关系,指导开发者遵循一致的原则实现系统,以保证最终建立的系统符合预期的需求.因此,物联网体系结构是设计与实现物联网系统的首要基础.为此,欧盟第七框架计划(FrameworkProgram7,简称FP7)专门设立了两个关于物联网体系结构的项目,一个是SENSEI[1],其目标是通过Internet将分布在全球的传感器与执行器网络(WS&AN)连接起来,组成一个真正的世界互联网(RealWorldInternet,RWI),并定义开放的服务访问接口与相应的语义规范来提供统一的网络与信息管理服务,还提供能量管理、安全、隐私保护、信任管理与记账机制,实现高能效、精准、可靠的环境信息获取以及与物理世界的交互;另一个是IoT-A[2],其目标是建立物联网体系结构参考模型和定义物联网关键组成模块,并通过一个实验范例,采用仿真与原型系统验证体系结构的设计原理和设计准则,探索不同体系结构对物联网实现技术的影响.此外,近年来国①②③④tent-detail.html⑤i-JapanStrategy2015.2009.http://www.kantei.go.jp/⑥⑦⑧Page3内外的研究人员也对物联网体系结构进行了广泛深入的研究,提出了多种具有不同样式的体系结构.比如,由美国麻省理工学院和英国剑桥大学等7个高校组成的Auto-ID实验室提出的网络化自动标识系统(NetworkedAuto-ID)体系结构[3]、由日本东京大学发起成立的uID中心提出的基于uID的物联网体系结构(uIDIoT)[4]、由韩国电子与通信技术研究所(ETRI)提出的泛在传感器网络(UbiquitousSensorNetwork,USN)体系结构[5]、由美国弗吉尼亚大学提出的Physical-net[6]、由欧洲电信标准组织(ETSI)正在制订的M2M体系结构[7]、由法国巴黎第六大学提出的自主体系结构(AutonomicOrientedArchitecture,AOA)[8]以及由北京航空航天大学和苏州大学基于类人体神经网(ManlikeNeutralNetwork,MNN)和社会组织架构(SocialOrganizationFramework,SOF)提出的体系结构(MNN&SOF)[9].除了以上这些体系结构外,近年来还针对一些特定的应用领域提出了一些建立物联网系统的参考架构(Framework),比如为实现基于电子产品编码(EPC)的物品跟踪提出的EPCglobal[10],为实现电气化设备之间的互联提出的DPWS[11]以及为实现嵌入式设备之间的互联提出的CoRE[12].与体系结构相比,这些参考架构更加具体,因为它们不仅指出了系统的组成部件及其之间的关系,还指出了系统的实现方法.可见,这些参考架构既可以被看作是体系结构,又可以被看作是实现方法.经过分析,我们发现这些参考架构包含的体系结构都可以被归类到上述几种体系结构中,但是它们所采用的实现方法却各不相同(见表2).因此,本文将这些参考架构作为物联网实现方法的实例来进行研究.需要指出的是,目前还没有对这些体系结构做统一的比较分析,也没有对这些实现方法做分层归纳,更没有将这些体系结构与实现方法对应起来,使得现在人们在开发物联网系统时还是难以选择采用哪种体系结构和实现方法作为参考.因此,目前世界各国的研发人员大都从各自的需求出发,设计不同的物联网体系结构,并在这些体系结构的指导下,采用不同的通信协议和软件技术实现不同的服务机制,从而使目前建立的物联网系统具有一定的专用性.这不仅增加了物联网系统的开发难度,也不利于未来跨国界、跨行业和跨领域之间的系统集成与信息融合,不利于建立一个真正“实现物与物、物与人之间进行信息交换与通信”的物联网系统.为此,形成可以指导未来物联网系统设计与实现的统一方法是目前物联网研究领域亟待解决的问题之一.本文将首先给出物联网体系结构的概念及其评价指标;然后对目前提出的物联网体系结构进行定性的比较分析,指出那些更加符合物联网特性和未来物联网发展需求的体系结构;接着对这些体系结构指导下的物联网实现方法进行分层归纳,总结出目前最为常用的实现方法;最后指出为形成物联网系统设计与实现的统一方法,未来在体系结构和实现方法方面还将面临的挑战与需要开展的研究工作.2物联网体系结构的概念与评价指标体系结构(Architecture)的本意是“统一的或一致的形式或结构”①.对于网络化计算系统而言,这种统一的形式或结构是指“说明系统组成部件及其之间的关系,指导系统的设计与实现的一系列原则的抽象”[13].体系结构可以保证系统开发人员在开发过程中所做的每一个技术选择都与系统的预期需求相符合.因此,建立体系结构是设计与实现网络化计算系统的首要前提.作为一种新的网络化计算系统,物联网体系结构的概念与以上所给出的网络化计算系统的体系结构一样.因此,在设计与实现物联网系统之前需要先建立物联网体系结构,以使最终建立的物联网系统的性能与预期需求一致.建立物联网体系结构的最主要过程是从各种应用需求中统一抽取出组成系统的部件以及部件之间的组织关系.需要指出的是,通常可以从不同角度抽取系统的组成部件及其之间的关系,比如功能角度、模型角度和处理过程角度等.目前,对于物联网系统而言,常用的抽取角度有如下两种:(1)功能角度.将组成系统的部件按照功能分解成若干层次,一般由下(内)层部件为上(外)层部件提供服务,上(外)层部件可以对下(内)层部件进行控制.比如,在引言中提到的NetworkedAuto-ID、uIDIoT、USN、Physical-net、M2M、SENSEI、IoT-A和AOA这7个体系结构都是从这个角度建立的物联网体系结构.(2)模型角度.按照一定的建模方法,将系统分①Architecture.2012.http://www.merriam-webster.com/Page4解为用某一领域的模型描述的组成部件,部件之间的连接关系用模型编排(Orchestration)来表示.比如,在引言中提到的MNN&SOF这个体系结构就是从信息模型的角度建立的物联网体系结构.需要指出的是,从不同的功能角度或模型角度建立的体系结构具有不同的样式和性能.一般以某一体系结构指导下设计与实现的物联网系统的性能作为评价该物联网体系结构的指标.目前常用的指标有:(1)水平性(Horizontality).指系统可以集成不同的通信、传输和信息处理技术,应用于不同的领域.(2)可扩展性(Scalability).指系统的性能不会随着设备数量的增加而快速降低.(3)环境感知性(Context-awareness).指系统具有周围环境参数的采集、语义表达、语义查询解析和语义推理的能力.(4)环境交互性(Interactivity).指系统可以根据环境感知数据做出决策和触发任务,产生相关操作命令,对感知对象进行控制.(5)自适应性(Adaptability).指系统可以根据环境的变化自动调节自身配置参数和功能.(6)安全性(Security).指系统可以保证数据的私密性,对用户的访问权限进行控制,并具有一定的抗攻击能力.(7)抗毁性(Resilience).指在设备受损的情况下保证系统正常工作的能力.(8)互操作性(Interoperability).指不同系统可以按照协定的规则互相访问数据、执行任务和共享资源.其中,(1)和(2)是评价物联网系统基本属性的指标;(3)、(4)和(5)是评价物联网系统特有属性的指标;(6)、(7)和(8)是评价物联网系统必要属性的指标.3物联网体系结构的研究进展与比较分析本节将分别从功能和模型角度,对目前已经提出的物联网体系结构进行分类介绍,并采用上述评价指标对它们进行比较分析.3.1从功能角度建立的物联网体系结构从功能来看,物联网是一个具有感知(含标识)、互联、计算和控制能力的网络化智能计算系统[14].因此,从功能角度抽取的物联网体系结构一般包含感知、传输、处理和执行等部件.下面介绍几种从功能角度抽取的物联网体系结构.3.1.1NetworkedAuto-IDNetworkedAuto-ID[3]体系结构(如图1所示)于1999年由美国麻省理工学院Auto-ID实验室提出,目的是“把所有物品通过射频识别(RFID)和条码等信息传感设备与互联网连接起来,实现智能化识别和管理”.一般由标识标签(如磁条、条码、二维码、射频标识等)、阅读终端(磁条读卡器、红外扫描器、光学识别器、射频读写器等)、信息传输网络(Intranet、Internet等)、标识解析服务器和信息服务器组成.图1中的序号表示信息处理的次序:(1)阅读终端采用接触或非接触方式读取存储在标识标签中的物品标识(ID);(2)通过标识解析服务获得与该标识相应的信息服务器的地址(AddressofIS);(3)阅读终端根据该地址访问信息服务器(IS);(4)获得相应的信息服务,完成对物品的智能识别、定位、跟踪和管理.这一体系结构最先在物流系统中得到实现,并成为物联网发展的雏形.3.1.2uIDIoTuIDIoT[4]是由日本东京大学发起的非盈利标准化组织uID中心制订的物联网体系结构,目的是“通过RFID和二维码来标识物体,由网络化传感器采集周围环境信息(Context),并根据采集的环境信息调整信息服务”.可见,与NetworkedAuto-ID本质不同的地方在于uIDIoT不仅包括物体的标识,还包括环境信息.图2是uIDIoT体系结构的示意图.该体系结构由Ucode、Context、用户终端、互联网、Ucode解析服务器和应用信息服务器组成.需要指出的是,Ucode解析服务器不同于NetworkedAuto-ID中的标识解析器,因为它不仅可以根据物体的Ucode查询获得相关信息服务器的地址,而且可以采用Context和ucR(UcodeRelation)操作符,Page5通过查询ucR数据库(ucRDB),获得相关的多个信息服务器的地址.比如,ucR操作为“adjacent”,该操作可以基于物品的位置信息,获得邻近物品的Ucode,以此可以进一步获得与本物品及所有邻近物品相关的信息服务器的地址.显然,uIDIoT比NetworkedAuto-ID具有更好的环境感知性.3.1.3USNUSN体系结构[5]是在2007年9月瑞士日内瓦召开的ITU-T下一代网络全球标准举措会议(NGN-GSI)上由韩国的电子与通信技术研究所(ETRI)提出的.该体系结构自底向上将物联网分为五层(如图3左边所示):感知网、接入网、网络基础设施、中间件和应用平台.每一层的功能定义如下:(1)感知网用于采集与传输环境信息;(2)接入网由一些网关或汇聚节点组成,为感知网与外部网络或控制中心之间的通信提供基础设施;(3)网络基础设施是指基于后IP技术的下一代互联网(NGN);(4)中间件由负责大规模数据采集与处理的软件组成;(5)应用平台涉及未来各个行业,它们将有效使用物联网以提高生产和生活的效率.USN体系结构与Shim等人[15]提出的传感器与RFID网络集成架构SARIF(SensorAndRFIDIntegrationFrame-work)具有一定的继承性,因为SARIF也是考虑将传感器与RFID网络集成起来,并将采集到的数据在后端服务器中通过中间件(包括网络管理器、任务管理器和信息处理管理器等)进行处理,然后再提供给应用平台.USN与SARIF的不同之处在于前者将互联网作为网络基础设施,而后者局限于本地局域网络.由于USN体系结构按照功能层次比较清楚地定义了物联网的组成,因此目前被国内工业与学术界广泛接受.一些科研人员还将该体系结构进行修改后,提出了一些经过演化的物联网体系结构.如Wu等人[16]提出的五层体系结构,就是将业务(Business)的概念引入中间件层,并将该层定义为业务层(BusinessLayer),用于统一管理各种物联网应用所涉及的业务模型和用户隐私.文献[17-18]中提到的四层物联网体系结构(如图3右边),即感知层、传输层、处理层和应用层,也是从该体系结构演化而来的.沈苏彬等人[19]从信息物品、自主网络、智能应用3个维度提出了一个物联网体系结构,其实质还是由感知、传输和处理这3个物联网核心模块组成的.孙利民等人[20]提出的一种包含感知、传输、决策和控制四个过程的开放式循环物联网体系结构,也是在USN体系结构的基础上引入闭环控制的概念而建立的.需要指出的是,虽然USN是作为一种物联网体系结构提出的,但是它并没有对各层之间的接口,如感知网与接入网之间的通信接口、中间件与应用平台之间的数据接口等,做出统一的规则定义.因此,USN还有待于进一步完善.3.1.4Physical-netPhysical-net[6]是由美国弗吉尼亚大学的Vicaire等人针对多用户多环境下管理与规划异构传感和执行资源的问题,提出的一个分层物联网体系结构,如图4所示.可见,该体系结构自底向上分别为服务提供层、网关层、协调层和应用层.与NetworkedAuto-ID、uID和USN不同的是:(1)Physical-net由底层感知设备直接提供服务,并由网关层进行服务的收集和分发,从而将应用需求与资源分配分离开来,支持动态移动管理和实时应用配置;(2)通过协调层实现多个应用程序在同一资源上或跨网络和管理域并发运行;(3)通过一个细粒度访问控制和冲突解析机制来保护资源的共享,并支持在线权限分配;(4)采用一个通用的编程抽象模型Bundle来屏蔽底层细节,以便于编程实现.值得注意的是,Physical-net定义了各层之间进Page6行服务调用的统一接口,即远程方法调用(RMI),因此从体系结构的定义来看,Physical-net对设计与实现物联网系统具有更好的指导意义.3.1.5M2MM2M[7]是欧洲电信标准组织(ETSI)正在制订的一个关于机器与机器之间进行通信的标准体系结构,尤其是非智能终端设备通过移动通信网络与其他智能终端设备(IntelligenceTerminal,IT)或系统进行通信,包括服务需求、功能架构和协议定义3个部分.M2M的功能架构如图5所示:在具有存储模块的设备、网关和网络域中部署M2M服务能力层(ServiceCapacityLayer,SCL);设备和网关中的应用程序通过dIa接口访问SCL;网络域中的应用程序通过mIa接口访问SCL;设备或网关与网络域中的SCL交互由mId接口实现.3.1.6SENSEISENSEI[21]是欧盟FP7计划支持下建立的一个物联网体系结构.SENSEI自底向上由通信服务层、资源层与应用层组成(如图6所示).各层的功能定义如下:(1)通信服务层将现有网络基础设施的服务,如地址解析、流量模型、数据传输模式与移动管理等,映射为一个统一的接口,为资源层提供统一的网络通信服务;(2)资源层是SENSEI体系结构参考模型的核心,包括真实物理世界的资源模型、基于语义的资源查询与解析、资源发现、资源聚合、资源创建和执行管理等模块,为应用层与物理世界资源之间的交互提供统一的接口;(3)应用层为用户及第三方服务提供者提供统一的接口.需要指出的是,Physical-net、M2M与SENSEI都将底层感知网络抽象为服务或资源,这样降低了后端信息服务器的计算需求,因此比NetworkedAuto-ID、uIDIoT和USN具有更好的可扩展性.3.1.7IoT-A作为欧盟FP7计划项目———物联网体系结构(IoT-A)的初步研究结果,Zorzi等人[22]主要针对大规模、异构物联网环境中由无线与移动通信带来的问题,提出了一个沙漏形的物联网参考模型(如图7所示).该模型将不同的无线通信协议栈统一为一个物物通信接口(M2MAPI),结合互联通信协议(IP)支持大规模、异构设备之间的互联,支持大量的物联网应用.基于该模型,作者提出了一种将物联网中的资源(Resource)与物理世界中的物品(Entity)连接起来的体系结构.与SENSEI相比,IoT-A在以下几个方面进行了细化:(1)IoT-A的M2MAPI层更加明确地定义了资源之间进行交互的方式和接口;(2)IoT-A的IP层更加明确地指出了广域范围内实现大规模资源共享的互联技术.但是,在资源查询与解析、资源发现、资源聚合、资源创建和执行管理等方面,SENSEI比IoT-A定义得更加清楚.Page73.1.8AOAAOA[8]是由法国巴黎第六大学的Pujolle针对目前在Internet上广泛使用的TCP/IP协议在能耗、可靠性与服务质量保证方面的问题,为物联网的数据传输层提出的自主体系结构(AutonomicOrientedArchitecture).图8是AOA体系结构的示意图,包括知识层、控制层、数据层和管理层.这些层都基于自主件(Selfware)的构建原理与技术组合而成.具体来讲,以知识层为指导,由控制层确定数据层中的通信协议,如STP/SP(SmartTransportProtocol/SmartProtocol)协议,执行已知的或者新出现的任务,并保证整个系统的自组织、自管理和可进化特性.以上8个物联网体系结构都是从功能角度抽取出来的,因此具有很好的层次性,易于理解与实现.此外,目前还从模型角度抽取了一个物联网体系结构,即基于类人体神经网(ManlikeNeutralNet-work,MNN)和社会组织架构(SocialOrganizationFramework,SOF)提出的体系结构(MNN&SOF)[9].3.2从模型角度建立的物联网体系结构目前,从模型角度建立的物联网体系结构不是很多,而且大都是以人体信息处理模型为参考而建立的.下面以MNN&SOF为例对该类物联网体系结构进行简要介绍.MNN&SOF体系结构分为两级,一级是基于类人体神经网络模型(ManlikeNeutralNetwork,MNN),将物联网的组成部件抽象为分布式控制与数据节点(DistributedControl&DataNodes)和管理与数据中心(Manager&DataCenter,M&DC)两层,并由M&DC代表每一个本地物联网(如图9左边所示);另一级是基于社会组织架构(SocialOrganizationFramework,SOF),将多个本地物联网集成为更高层次的物联网,即以行业管理与数据中心(iM&DC)为代表的行业物联网和以国家管理与数据中心(nM&DC)为代表的国家物联网(如图8右边所示).可见,这一体系结构是依据人体信息处理模型而建立的.简要来讲,它将物联网中的感知节点看作是人体的感受器官,将信息网络看作是神经网络,将信息服务器看作是中枢系统;将物联网采集、传输和处理信息的过程看作是人体处理信息的过程,即环境中的各种信息由感受器官接受后,通过神经网络传递到中枢进行整合,再经神经网络控制和调节机体各器官的活动,以维持机体与内、外界环境的相对平衡.这一体系结构虽然也给出了物联网的感知、传输和处理三级组成模块,但是对于各级模块的具体组成、模块之间的信息交互方式与接口都非常抽象,因此不易于实现.3.3物联网体系结构比较分析图10是对本节所介绍的物联网体系结构的分类总结.从图10可以看出,以功能角度抽象建立的物联网体系结构分为“后端集中式”与“前端分布式”两种类型.“后端集中式”体系结构是指物联网中的大部分信息处理任务和用户服务请求是由后端信息服务器或服务支撑平台完成的,如NetworkedAuto-ID、uIDIoT和USN;反之,“前端分布式”体系结构是指物联网中的大部分信息处理任务和用户服务请求是由前端感知设备或网关设备完成的,如Physical-net、M2M、SENSEI、IoT-A和AOA.不同的信息处理方式决定了不同的系统性能.Page8需要指出的是,由于从模型角度建立的体系结构只是从概念上说明了物联网的组成,在真正设计与实现物联网系统过程中所起的指导作用并不是很大,因此难以用本文给出的几个指标来评价MNN&SOF的性能.因此,以下就不再讨论这种体系结构.为说明哪个体系结构具有更多符合物联网特征表1物联网体系结构性能比较NetworkedAuto-IDuIDIoTUSNPhysical-netM2MSENSEIIoT-AAOA在水平性方面,由于USN、Physical-net、M2M、SENSEI和IoT-A可以集成不同类型的标识与感知网络,支持各种通信协议,因此具有较好的水平性.相反,由于NetworkedAuto-ID和uIDIoT只包含基于标识的信息网络,AOA只支持基于自主件的网络,因此,相比而言它们的水平性较弱.在可扩展性方面,由于NetworkedAuto-ID、uIDIoT和USN采用后端集中式信息处理,随着物联网规模的不断扩大,后端信息服务器需要处理的数据将会急剧增加,系统的规模将受限于后端信息服务器的数据处理能力.因此,相比而言可支持的网络规模不如其它5个采用前端分布式信息处理方式的体系结构.在环境感知性方面,由于NetworkedAuto-ID只支持物品标识信息的采集与处理,AOA只定义了数据传输层的功能,因此不具有环境感知性.uIDIoT可以基于环境感知信息(Context)和ucR操作获得用户感兴趣的所有物品的信息,USN可以通过中间件层对感知信息进行处理,Physical-net和M2M可以将环境信息作为资源进行分发与处理,因此都具有较好的环境感知性.此外,由于SENSEI与IoT-A支持基于语义的资源查询与解析等操作,因此也具有良好的环境感知性.在环境交互性方面,由于NetworkedAuto-ID和uIDIoT都只是通过标识阅读终端获取与物品相关的信息,不产生操作或控制命令,因此不具有这一性质.M2M主要考虑设备与设备之间的资源互联,AOA只说明了对数据层的通信协议进行控制的功的属性,对未来物联网的设计与实现具有更好的参考价值,我们采用第2节中提出的8个指标对这些体系结构进行比较分析.表1是通过比较分析这8个物联网体系结构所包含的功能模块和组织结构而得到的结果.表中的“√”表示对应的体系结构具有较好的相应属性.下面简要阐述比较分析的思路.√√√√能,但是都不能对感知环境进行控制,因此也都不具有环境交互性.相反,USN能够通过后端的信息服务器分析,处理环境感知数据,并进行决策和触发相关操作命令对感知对象进行控制;Physical-net、SENSEI和IoT-A能够在前端的感知设备上处理感知信息、做出决策和触发控制操作.因此,相比而言它们的环境交互性更强一些.在自适应性方面,由于NetworkedAuto-ID不具有感知环境的能力,因此无法根据环境的变化调节系统的配置参数和功能.uIDIoT虽然可以采集周围环境数据,但这些数据只是用于获得相关物品的信息,而不是用于调节系统配置参数和功能.因此,这3个体系结构不具有自适应性.相反,USN的中间件层、Physical-net的服务提供层和M2M的能力服务层都可以根据环境感知数据进行自我调节,因此它们具有一定的自适应性.此外,SENSEI和IoT-A还支持基于语义的资源发现和资源聚合等操作,因此它们具有更好的自适应性.AOA的控制层能够基于知识层维护的本地及邻居的状态信息自动调节数据层的协议参数,因此也具有一定的自适应性.在安全性方面,只有SENSEI和IoT-A提出了比较具体的保证系统安全的规则,因此目前只有这两个体系结构具有一定的安全性.需要指出的是,其它几个体系结构不需要做本质上的修改,只需要加入一些安全规则,比如在NetworkedAuto-ID和uIDIoT中加入ID的加密机制,就可以使其具备一定的安全性.Page9在抗毁性方面,因为Physical-net、M2M、SENSEI、IoT-A和AOA不强依赖于后端集中式的信息服务平台,所以即使局部的系统毁坏,也不会对整个系统的正常运行带来影响.因此,与其它3个体系结构相比,它们具有更好的抗毁性.在互操作性方面,由于Physical-net明确定义了RMI作为互相访问服务的接口,M2M和IoT-A都将M2MAPI作为资源互访的接口,因此依据其中任一体系结构设计的物联网系统之间可以通过约定的接口进行互操作.相反,NetworkedAuto-ID、uIDIoT、USN、SENSEI和AOA都没有说明各层之间以及系统之间进行数据与服务互访的规则,因此与其它3个体系结构相比,它们的互操作性要略差一些.通过以上比较分析,可以看出在3个“后端集中式”体系结构(表1中的前3个)中,USN具有更多符合物联网特征的属性;在5个“前端分布式”体系结构(表1中的后5个)中,IoT-A具有更多符合未来物联网发展需求的属性.因此,我们认为可以将USN和IoT-A分别作为建立后端集中式和前端分布式物联网系统的参考体系结构.未来还可以基于这两个体系结构衍生出满足不同应用需求的物联网体系结构.这样既可以保证未来建立的物联网系统具有一定的统一性,便于实现系统之间的互联与融合,也可以满足不同系统的各自需求.在这些体系结构的指导下,如何建立与预期需求相一致的物联网系统是下面将要介绍的内容.4体系结构指导下的物联网实现方法研究进展与分层归纳美国加州大学伯克利分校的Culler教授等人[23]认为“体系结构是存在于不同层次的抽象.在最高层,体系结构将一个问题域分解为一系列的服务,包括功能组件以及相应的机制,同时也可以定义这些服务的接口,以说明服务提供的结构和功能;在最低层,体系结构可以定义协议,包括数据包格式、通信交换和状态机.”将这句话与上一节中给出的物联网体系结构的定义结合起来,我们可以得出这样的结论:体系结构包含的抽象原则可以分为服务和协议两个层次来指导系统的设计与实现.此外,在设计与实现物联网服务与协议之前,还需要考虑物联网中设备之间的物理连接关系,因为这决定了系统对各设备的资源需求.因此,在体系结构指导下建立物联网系统时需要在物品连接模式、通信协议和服务机制3个层次确定具体的实现方法.下面,我们将按照“自底向上”的原则,归纳目前在这3个层次上已经提出的各种实现方法.4.1物品连接模式赋予日常使用的物品计算和通信的能力,以在其它物品或计算机的帮助下实现彼此间状态信息的交换,构成智能物品(SmartObject)是组成物联网的基础.Kortuem等人[24]按照感知、表述和交互这三个指标的级别高低,将目前已有的智能物品分为三类:(1)活动感知(Activity-aware)的智能物品:以汇聚函数来表述规则,一般不具有交互性.(2)规则感知(Policy-aware)的智能物品:为不同的事件建立对应的处理规则,具有一定的交互性,比如根据环境状况给用户发出一些提示消息等.(3)流程感知(Process-aware)的智能物品:通过具有情景感知的工作流模型表述规则,定义活动的触发条件与时间顺序,具有很强的交互性.物联网可以看成是“智能物品”的互联.在物联网环境下,智能物品间可以通过自组织的模式建立更高级的协同智能模型.物品之间的连接模式决定了系统对智能物品的计算、组网和网关方面的需求,并且也决定了对智能物品的状态和业务模型进行配置的灵活性.Vazquez等人[25]将物品连接模式分为三种:(1)直接连接.智能物品直接接入网络(Intra-net或Internet)与其它物品和服务器相连.这种连接模式对智能物品在计算和组网方面的需求比较高,对网关的需求比较低,对节点和业务模型的配置不是很灵活.(2)网关辅助连接.智能物品通过网关接入后与其它物品和远程服务器相连.这种连接模式对智能物品在计算和组网方面的需求比较低,对网关的需求比较高,对节点和业务模型的配置很灵活.(3)服务器辅助连接.智能物品通过一个公共的本地支撑服务器汇聚以后与远程服务器相连.这种连接模式对智能物品的计算能力和网关的要求比较低,对智能物品的组网能力要求比较高,对节点和业务模型的配置很灵活.图11给出了这3种连接模式的直观示意,其中网关辅助连接和服务器辅助连接这两种模式的区别在于前者中的各智能物品需直接与网关进行通信,而后者中的各智能物品还能以中继方式与本地支撑Page10服务器进行通信.但是,从整体来看,两种连接模式中的智能物品都是通过中间设备实现互联,因此接下去我们将这两种连接模式统称为网关连接模式.由于智能物品的泛在性,一般而言智能物品的计算和组网能力有限,因此目前常见的连接模式是网关连接.在该连接模式下,网关是实现物品互联的核心设备.至今已经提出了多种物联网网关,比如Gronbaek提出的主机标识标签网关(HostIdentityTagGateway,HITGW)[26]和Tompros等人[27]提出的家庭网关(ResidentialGateway).(1)主机标识标签网关用于将智能物品组成的设备网(DeviceNetwork)和基于Internet的骨干网(Backbone)连接起来.设备网络中的物品采用HIT(HostIdentityTag)定义标识,并采用HIP协议[28]进行通信.HIT网关自顶向下分为应用层、Web服务、HTTP、传输层、扩展的IP层与链路层,其中扩展的IP层包括组播、广播、QoS控制、安全保证等功能,通过API接口为上层提供名字解析、路由以及物品的移动管理等服务.(2)家庭网关将家庭内的各种电器通过电力监测设备(EnergyMonitoringDevice,EMD)集成起来.网关与电器之间的通信采用主从模式,即网关端的EMD为主设备,电器端的EMD为从设备.主从设备之间的通信可以采用KNX、IEEE802.3、IEEE802.11、IEEE802.15系列协议(具体说明见下一小节).该网关还可以通过Internet与终端用户进行通信.由于不需要对现在的电器进行改造,该网关具有很好的易部署性,是未来实现家庭以及更大规模的物联网的必要设备之一.4.2通信协议不同的连接模式决定了智能物品需要实现的通信协议栈,比如在直接连接模式下,智能物品需要实现物理层、链路层、网络层、传输层和应用层;而在网关连接模式下,网关需要实现这5个层次的通信协议,但智能物品可以不包含网络层与传输层.在文献[29]中也提出了类似的建议.他们将物联网中的节点分为无源CPS节点、有源CPS节点和互联网节点三种,其中无源节点只有物理层;有源节点包括物理层、数据链路层与应用层;互联网节点除了有源节点包含的三层协议外,还包括网络层与传输层.可见,以上所指的无源CPS节点相当于只具有基本收发能力的智能物品,有源CPS节点相当于具有计算与组网能力的智能物品,互联网节点相当于网关.由于物联网需要集成各种采用不同通信协议的感知、通信和计算设备,因此通过网关可以解决骨干网(如Internet)和智能物品(如智能电器)之间以及智能物品之间协议异构带来的互联问题.下面以物联网网关为示例,按“自顶向下”的原则介绍目前已经提出的物联网各层通信协议(如图12所示).4.2.1应用层HTTP是现在互联网提供Web服务所采用的应用层协议,也可以作为物联网的应用层协议.但是,考虑到HTTP在计算复杂性、数据传输量和能量消耗等方面的代价以及智能物品在这些方面的受限性,目前一些科研机构还专门设计了一些轻量级的应用层协议,如CoAP[30]、EBHTTP[31]和LTP[32].CoAP(ConstrainedApplicationProtocol)是IETF专门针对物联网中资源受限的嵌入式设备正在制订的一种应用层协议.CoAP与HTTP的根本不同之处体现在以下方面:前者基于UDP传输协议,而后者基于TCP传输协议.由于TCP采用复杂的流量控制和重传机制实现可靠传输,因此并不适用于资源受限的物联网感知设备.为支持可靠的数据传输,CoAP由以下两个子层组成:一是请求/回复(Requests/Responses)子层,它负责客户端请求和服务端回复的建立;二是消息(Messages)子层,它负责将请求/回复封装成消息,并通过UDP协议进行传输.此外,CoAP还支持多播、异步通信和订阅通信模式.异步通信是指服务端收到不能立即处理的请求时,可先发送ACK,然后再发送回复.订阅Page11通信是指客户端通过GET方法发送自己感兴趣的资源信息,当资源状态改变时,将感兴趣的资源状态返回给相应的客户端.目前,已经在Contiki和TinyOS系统中分别实现了CoAP协议[37].此外,为实现与现有Web服务之间的无缝连接,Colitti等人[38]建立了一种HTTP-CoAP代理服务器,用于实现HTTP协议与CoAP协议之间的相互转换.EBHTTP(EmbeddedBinaryHTTP)也是IETF专门针对物联网中资源受限的嵌入式设备正在制订的一种应用层协议.EBHTTP采用压缩的二进制消息代替标准HTTP采用的ASCII消息,压缩后的EBHTTP头部包括4个字节的信息,并以UDP代替TCP,来降低传输开销,同时保持了标准HTTP的简单性、无状态性和可扩展性.目前,EBHTTP还处于草案阶段,未来将在资源命名规则、资源描述、资源发现、HTTP-EBHTTP服务代理、内容缓存和发布订阅模式等方面制订更加明确的标准协议.LTP(LeanTransportProtocol)协议是由德国Luebeck大学的研究人员提出的.该协议缩短了消息的长度,并结合XML压缩技术,支持资源受限的网络(RCNs)之间进行Web服务消息交换.简要来讲,LTP协议具有以下特点:数据包格式不固定,由形式化语言定义,采用可选的序列化类型;地址类型可以为标准的URL或压缩的别名;支持数据包拆分与合并;平台无关的消息交换.需要指出的是,应用层协议与实现物联网服务的软件技术直接相关(具体说明见下一小节),因此,随着软件技术的发展,以上这些应用层协议也会不断改进.4.2.2传输层由于物联网的核心骨干网是基于现在的互联网建立的,且TCP/IP是互联网的基础,因此物联网的传输层与互联网一样,即采用的主要传输协议为TCP和UDP.由于TCP协议比较复杂,不易在资源受限的设备上实现,因此目前大多数物联网采用UDP协议.但是,UDP是不可靠传输机制,为此需要与应用层结合,以提高物联网数据传输的可靠性.4.2.3网络层如果物联网的核心骨干网采用IPv4协议,则由智能物品构成的前端感知网络一般采用uIP[33]或IP/SLIP[34]协议.uIP是由瑞典计算机科学研究所(SICS)的研究人员专门为使用8位或16位低端处理器构建的嵌入式系统设计的组网协议.它实质上是有针对性地实现了IP协议的核心功能,因此代码长度和存储器使用空间都比传统的IP协议要小很多.IP/SLIP(SerialLineIP)是由美国麻省理工学院的研究人员为使传统的电子设备能够直接接入互联网而提出来的.SLIP是在IP之下的一个数据比特处理层,它对IP数据包进行串行化处理转化成传统的ASCII码,或将ASCII码数据封装成IP数据,以使传统的电子设备能够基于IP协议进行通信.如果物联网的核心骨干网采用IPv6协议,则由智能物品构成的前端感知网络一般采用6LowPAN[35]和RPL[36].6LowPAN是IPv6技术在低速无线个域网中的应用,它通过报头压缩、数据包拆分和重组等技术以使长数据报文能够在802.15.4网络中进行传输,并通过编址模式和地址映射实现无状态地址分配,从而使现成的一些网络诊断、管理和授权工具都可以在物联网中使用.此外,IETFROLL工作组专门为6LowPAN网络制订了路由协议RPL(IPv6RoutingProtocolforLowpowerandLossyNet-works).4.2.4链路层与物理层由于物联网涉及人类生产和生活的各个方面,因此从广义上来讲,物联网的链路层和物理层可以包括所有目前常见的有线与无线通信技术以及工业控制和电气自动化领域内使用的数据通信技术.比如,局域网中采用的IEEE802.3和802.11协议,个域网中采用的802.15系列协议和Z-Wave协议,工业控制领域常用的HART(HighwayAddressableRemoteTransducer)协议和电气自动化领域常用的PLC(PowerLineCommunication)、LonTalk、KNX协议等.由于这些链路层与物理层协议对实现物联网服务机制来说是透明的,因此在建立物联网系统时不需要深入理解这些协议的工作机制.为节省篇幅,这里不对其进行详细介绍.需要指出的是,上面介绍的各层通信协议也可以在采用直接连接模式的智能物品中实现,但是要求物联网中的所有智能物品实现完全一致的通信协议栈,包括网络层、传输层和应用层.比如,假设骨干网为IPv6网络,则所有智能物品都需实现6LowPAN/RPL和CoAP/UDP(或者EBHTTP/UDP、HTTP/TCP、LTP),以保证物品之间的互联互通.Page124.3服务机制在一定的连接模式下,基于上述通信协议,可以采用不同的软件技术实现各种物联网服务机制.目前主要的物联网服务机制有以下3种,即Web服务(WebService,WS)、远程对象(RemoteObject,RO)和多智能体(Multi-Agent,MA),其中Web服务可基于简单对象访问协议(SimpleObjectAccessProtocol,SOAP)或表述性状态转移(REpresentationalStateTransfer,REST)实现;远程对象可基于远程方法调用(RemoteMethodInvocation,RMI)实现;多智能体可采用任一分布式计算技术(如CORBA、RPC和DCOM)实现.下面将分别介绍这几种服务机制的实现技术及其实现的实例系统.4.3.1基于SOAP的物联网Web服务机制SOAP是在互联网环境下以Web服务形式实现分布式计算系统的一种常用软件技术.简要来讲,它以一种松耦合的方式,将可重用软件组件分布于标准的Internet中以供编程访问,主要包括3个模块:SOAP①(简单对象访问协议)、WSDL②(Web服务描述语言)和UDDI③统一描述、发现和集成协议).WSDL定义了如何描述一个Web服务;SOAP定义了怎样调用并触发一个Web服务;UDDI则定义了如何发布、管理及查找Web服务的描述信息.SOAP最早被用于实现后端集中式物联网Web服务机制,一般采用HTTP/TCP作为数据传输协议,传输的数据采用XML格式封装,比如EPCglobal[10]、SO[39-40]和SWIFT[41].EPCglobal是由全球非营利组织机构GS1下属的EPCglobal公司制订的物联网系统实现架构,目的是采用电子产品编码(ElectronicProductCode,EPC),为相关行业实现精确、实时和低成本的供应链信息跟踪与处理提供统一的服务.该系统中除了RFID标签和RFID阅读器外,还主要包括EPC信息系统(EPCIS)和本地对象名字服务(ONS)[57],其中EPCIS采用SOAP技术实现数据订阅(Subscrip-tion)接口和数据查询(Query)接口,以提供信息推送与查询服务;ONS根据物品的EPC找到对应的EPCIS地址.SmartObject(SO)是由英国剑桥大学Auto-ID实验室的研究人员建立的将具有自动标识、感知、通信与计算功能的节点集成起来的物联网系统.该系统的后端信息基础设施主要包括网络结构信息库和感知信息数据库.网络结构信息库用于保存网络中相邻节点的感知环境(Context)信息,感知信息库用于存储各节点的感知数据,并可以通过查询(Query)接口以应答方式或通过订阅(Subscription)接口以触发方式获得网络结构信息和感知信息.以上接口采用SOAP标准描述和访问,并采用XML格式封装数据.SWIFT是一个用于将通信网集成起来的安全广域标识系统.它通过标识函数扩展,包括标识代理、标识管理、标识认证和属性管理、增强标识的安全性和互操作性以及在移动环境下的标识管理和标识解析功能,实现不同类型的通信网(如TISPAN、3GPP和3GPPIMS)服务、应用和内容的融合.该系统的后端服务中间件也采用SOAP技术实现.以上介绍的3个物联网系统实例都是在后端服务端采用SOAP技术提供集中的信息服务和统一的访问接口.目前一些研究人员把这种技术直接应用于智能物品上,让每个物品都可以提供Web服务,即采用SOAP实现前端分布式物联网Web服务机制,比如SensorWeb[44-45]、DPWS[11]、SOCRADES[46-48]、Smew[49].SensorWeb中的每个感知节点可以产生结构化数据供给不同的应用使用,网关和移动代理采用SOAP技术提供一个统一的访问感知节点的接口,并由协调层负责任务的调度与数据的管理,数据转换层负责对原始数据进行处理和显示.TinySensorWeb[45]对SensorWeb所采用的TCP/IP协议进行了性能优化,降低了延迟与能量开销,并在家庭用电监测系统中进行了应用验证.SensorWeb是最早采用SOAP技术实现的前端分布式物联网系统,它使演进式部署物联网成为可能,即可以将不同种类、不同接入方式、不同数据公开性和安全性的感知节点集成起来,并保证系统具有一定的可扩展性.DPWS(DeviceProfileWebService)是由德国WS4D项目组为资源受限的设备提供安全的Web服务而提出的实现方法.它还是基于SOAP服务访问机制,但在数据表示、服务描述、服务发现、消息传输等方面进行了扩展.如图13所示,与传统的SOAP系统相比,DPWS比较显著的一个扩展是可以直接用UDP协议传输消息.目前,DPWS在2009年由①②③Page13国际标准化组织OASIS正式发布.SOCRADES(Service-OrientedCross-layerinfRAstructureforDistributedsmartEmbeddeddevices)是在欧盟FP6计划的支持下提出的一种将支持Web服务的设备与企业信息化平台(如ERP)集成起来的方法.简要来讲,就是底层设备采用DPWS标准方法提供服务与通信机制,在此基础上加入SOCRADES中间件服务层,提供设备管理与监测、服务发现、服务生命周期管理、跨层服务目录和安全支持等功能,实现与企业信息化平台的集成.可见,该系统实质上还是通过SOAP技术将分布在各智能物品(或设备)上的服务集成起来而建立的.Smew是Duquennoy等人建立的一个提供轻量级Web服务的物联网系统.它的特点在于以事件驱动的方式优化HTTP/TCP/IP层的性能,并通过编译时页面预处理技术(包括内容、报文头部与校验位),在计算与存储资源受限的节点上实现PULL/PUSH(如AJAX/Comet)形式的Web服务.以上介绍的基于SOAP的物联网Web服务机制实现方法和实例,都是采用HTTP/TCP数据传输协议和XML数据交换格式.由于TCP采用复杂的控制机制实现可靠数据传输,XML包含schema以说明XML文件的结构,因此对感知设备或智能物品的资源要求较高.为此,Moritz等人[50]提出了一种采用CoAP/UDP数据传输协议和EXI(Exten-sibleXMLInterchange)数据交换格式实现基于SOAP的物联网Web服务的方法(SOAP-over-CoAP).同时,作者还提出了一种基于路由器与代理服务器相结合的方法,实现XMLSOAP-over-HTTP与EXISOAP-over-CoAP之间的数据格式与协议的转化,以提高系统的易部署性和可扩展性.尽管采用SOAP-over-CoAP方法可以在一定程度上降低实现基于SOAP的物联网Web服务对感知设备或智能物品的资源需求,但是在物联网中实现SOAP中包含的3个基本模块,即SOAP、WSDL和UDDI仍然具有较大的复杂度.因此,一些研究者提出采用REST技术实现物联网Web服务,主要原因在于REST能够基于已有的互联网基础设施与协议,如资源标识使用URI,数据传输和资源操作使用HTTP(包括GET/PUT/POST/DELETE四种操作),资源描述和发布选用RSS、Atom/AtomPub等,数据表示可用XML、EXI和JSON等.4.3.2基于REST的物联网Web服务机制REST将一切需要被引用的事物都看成是资源.资源是应用进程控制下的可用服务的抽象,每一个资源可通过一个URI(唯一资源标识)来进行唯一标识和链接,并具有一个或多个Representation(表述)来刻画资源的当前状态[58].服务端的资源信息通常以表述的形式发送到客户端,客户端在收到表述信息后,从一个状态转移到另一个状态.这也就是该技术被称为“表述性状态转移”的主要原因.这一技术最先被用于实现后端集中式物联网Web服务,如RESTfulEPCIS[42]和BIT[43].在上一小节中提到,现在大都采用SOAP技术实现EPCglobal中的EPC信息系统(EPCIS),即EPCIS提供的数据订阅(Subscription)接口和数据查询(Query)接口都遵循SOAP技术架构的规范.近来,Guinard等人[42]采用REST技术重新构建了一个EPC信息服务系统,即RESTfulEPCIS,以使用户能采用现有的Web语言(如HTML)操作RFID数据,并与现有的各种互联网Web服务聚合(Mashup)起来.BIT(BrowserfortheInternetofThings)是一个以智能手机为基础设施,为用户、后端服务提供者、产品厂家三者之间进行交互而建立的统一的物联网平台.该平台以小程序(Applet)为基本构件,以Lua脚本语言实现Applet的功能,以BIT标记语言(BITMakeupLanguage,BITML)定义Applet的用户界面,通过脚本运行时模块(ScriptingRuntime)来解释执行Applet.脚本运行时模块可以通过BIT应用程序接口(BITAPI)调用底层提供的资源管理功能,包括Applet发现(AppletDiscoverer)、存储引擎(StorageEngine)、阅读器管理(ReaderManager)、通信管理(CommunicatonManager)和情景获取(ContextGrabber).Applet发现模块采用Page14REST技术架构与开放查询基础设施(OpenLookupInfrastrcture,OLI)交互,获得指定物品的相关信息;数据存储引擎用于管理Applet存取的数据;阅读器管理模块负责将各类阅读器读取到的符合EAN/UPC标准的物品代码(如EAN/UPC、EPC等)封装成统一的数据格式;通信管理模块支持手机采用不同协议(如Bluetooth、NFC等)与物品标签进行通信;情景感知模块收集用户相关的环境信息(如地理位置).可见,BIT的核心是后端服务器通过REST提供信息服务,在手机端采用REST获得物品及感知环境相关的信息服务.以上介绍的两个系统都是将REST技术用于实现物联网中信息服务器与用户应用程序之间的交互.此外,M2M系统结构中的服务提供层(SCL)与dIa、mIa和mId接口,SENSEI中的资源模型和IoT-A中的M2MAPI也都可以采用REST技术实现.依此实现的系统如pREST[51]、TinyREST[52]、SmartGateway[53]和ZeroConfig[54].pREST(pico-REST)将所有的可唯一标识、通信的数据源和终端对象抽象为资源,用户采用统一的界面,即HTTP的GET/PUT/POST/DELETE方法,对资源进行操作,还可以通过订阅服务(SUB-SCRIBE)将各资源连接起来.目前,已经在MicaZ节点上基于uIP协议栈实现了pREST,约占37KB的EPROM和2KB的RAM.可见,采用REST技术在资源受限的嵌入式物联网终端上实现Web服务是可行的.基于同样的REST技术,结合Servlet/AJAX技术,Zou等人[59]建立了一个校园建筑环境监测应用系统,并对该系统的平均响应时间进行了评价.结果表明,当连接建立之后,响应时间趋于平稳.可见,采用REST技术实现的物联网Web服务系统可以保证一定的服务质量.TinyRESTGateway是一个采用REST技术将不同类型的传感网、自动化家居与消费电子设备集成起来提供Web服务的物联网网关.该网关自顶向下由服务与应用(Service&Applications,S&A)、家庭服务架构(HomeServiceFramework,HSF)和设备控制协议(DeviceControlProtocol,DCP)3个部分组成.其中S&A负责将资源请求操作,即POST、GET和SUBSCRIBE,转发给指定的设备;HSF负责设备及其位置管理等;DCP支持多种设备间通信方式,如ZigBee,UPnP(即插即用)和Smart-IP.与TinyRESTGateway类似,Guinard等人[53]提出了一个智能网关(SmartGateway)将各种设备集成起来,采用REST技术提供数据缓存、格式转换和PULL/PUSH形式的Web服务.该网关还可以将不同设备提供的服务聚合起来(PhysicalMashup)以快速建立用户自定义的应用.以家用电器用电量监测应用为例(Plogg),验证了采用该网关建立的物联网系统具有较低的数据延迟.ZeroConfig是Schor等人[54]提出的一种以即插即用(Plug-and-Play)方式支持设备加入网络的楼宇物联网系统.该系统采用6LoWPAN协议实现设备的大规模接入和地址的自动配置,并采用一种层次化结构(RootCollection/Collection/Member)描述设备提供的服务,采用JSON封装数据,采用mDSN(multicastDSN-ServiceDiscovery)进行服务发现.同时,还考虑了设备工作在低功耗模式下的场景,并对该系统在不同数据包长度下的平均响应时间进行了评价.与SOAP技术相比,REST对设备资源的要求已经有所降低,但是以上介绍的基于REST的物联网Web服务实现方法都采用HTTP/TCP协议进行数据传输.由于TCP协议的复杂性,因此基于HTTP/TCP数据传输协议实现REST的方法仍然会对系统的性能造成一定的影响.针对这一问题,目前又提出了一些基于轻量级数据传输协议的物联网Web服务实现方法,如CoRE[12]、BWS[55]和sMAP[56].CoRE(ConstrainedRESTfulEnvironment)是IETF正在制订的关于在嵌入式设备上实现Web服务的标准草案,包括高效的Web服务传输协议、负载编码、资源发现与安全.目前,它采用的Web服务传输协议为CoAP/UDP,以降低传输开销,并支持订阅模式等特性;负载编码采用EXI(ExtensibleXMLInterchange),由于EXI的元数据包含数据语法与状态机,因此不再需要复杂的XML解析器;采用URI和一个预先设置的、公认的路径前缀(/.well-known/)作为资源发布、集成与发现的默认机制;采用POST/GET操作来发布和获取需要的服务标识.BWS(BinaryWebService)基于IEEE802.15.4和6LowPAN网络协议栈,采用EXI消息编码,使物联网的每个嵌入式设备都可以通过二进制Web服务器(BinaryWebService,BWS)、资源发布接口Page15(ResourcePublishInterface,RPI)、资源访问接口(ResourceAccessInterface,RAI)和统一资源标识符(UniversalResourceIdentifier,URI)实现资源发布、集成、发现和访问,支持的操作包括GET(获取某一资源的状态)、PUT(修改某一资源的状态)和POST(按照一定的准则订阅某一资源的状态).需要说明的是,BWS只指出它所采用的传输层协议为UDP,而没有指出采用的应用层协议,但是我们认为BWS采用CoAP作为应用层协议最为合适.sMAP是一个建立在EBHTTP/UDP协议栈之上的物联网系统.该系统的特点在于采用URI命名资源,并将每个感知设备的资源统一归为四类:数据(data)、状态(status)、环境(context)和报告(reporting),其中前3个资源可以通过GET方法来进行访问,最后一个资源可通过POST方法创建(create)订阅/报告任务,由感知设备定时将数据推送给客户端.对于每个感知设备提供的数据资源(data),还包含格式(formatting)、参数(parameter)和轮廓(Profile)3个子资源,并可以用GET和POST方法对formatting子资源进行操作,以查看和设置数据的格式;用GET和POST方法对parameter子资源进行操作,以查看和设置定时数据采集的参数;用GET方法对Profile子资源进行操作,以查看历史数据.数据的表达采用JSON对象描述语言,并将描述数据格式的元数据存放在独立的服务器中.为进一步降低传输开销,文中还提出了一种JSON包压缩格式.以上分别总结了采用SOAP和REST技术实现物联网Web服务的方法.可见,不管是在提供后端集中式信息服务还是前端分布式信息服务的物联网中,Web服务、SOAP和REST是目前基于现有的互联网基础设施建立物联网系统最为常用的服务机制与实现技术.以下两种物联网服务机制与实现技术不太常见,因此本文只做简要介绍.4.3.3物联网RO服务机制在Physical-net体系结构中,作者将网关层、协调层与应用层提供的服务抽象为远程对象(RO),它们之间通过远程方法调用(RMI)进行互操作.简要来讲,RMI通过远程接口句柄调用远程对象的方法.调用时传递的参数需要进行编组和解组操作,以使其能够被请求的对象使用和处理.此外,在RMI调用中,传递的参数和返回值不仅可以是预定义的数据类型(DATA),还可以是完整的对象(OBJ).虽然这些编组、解组和传递过程对用户是透明的,但是这将要求设备具有更高的计算和数据传输能力.由于RMI一般是以同构的Java虚拟机环境为基础,因此在异构环境下采用该技术实现物联网RO服务机制时要求所有物联网设备或网关安装Java虚拟机,这将使物联网系统更加依赖于Java技术.4.3.4物联网MA服务机制AOA体系结构以多智能体(MA)为基础建立.MA中的每个节点都维护本地及邻居状态信息,知识层的主智能体(MasterAgent)根据这些信息选择相应的控制算法并设置算法的参数;控制层中的多个被动智能体(ReactiveAgent)实现不同的控制算法,包括报文调度、队列管理、准入控制、报文分类等;在数据层运行智能传输协议(STP/SP),以满足异构物联网设备之间的联网需求.这些智能体可采用任一分布式计算技术(如CORBA、RPC和DCOM)实现.由于AOA只从数据传输的功能角度描述了物联网的组成,并对各系统实现多智能体的方法也没有做统一的规定,因此实际上目前还没有真正按此体系结构和服务机制建立的物联网系统.4.4物联网实现方法分层归纳表2以“后端集中式”和“前端分布式”体系结构为分类准则,总结了目前可选用的物联网实现方法,包括物品连接模式、服务机制、数据传输协议和数据格式.需要注意的是,表中将基于SOAP的物联网Web服务简称为SOAP,同样将基于REST的物联网Web服务简称为REST;还有表中“服务机制”与“数据传输协议”这两列中的顿号表示“或者”,比如NetworkedAuto-ID、uIDIoT和USN这3个体系结构分别采用不同的物品连接模式,但是都可以采用SOAP或者REST来实现;再比如SENSEI和IoT-A可以基于HTTP/TCP或者CoAP/UDP或者EBHTTP/UDP实现基于REST的物联网Web服务.还有,第1列中的Physical-net用星号()进行了标注,这是因为在文献[6]中提出的Physical-net只采用网关连接模式,并且只采用RMI技术实现物联网RO服务机制,而我们认为该体系结构也可以直接在底层感知设备中或通过网关采用SOAP技术提供Web服务,因此对该体系结构进行了扩展.Page16表2体系结构指导下的物联网实现方法物联网体系结构连接模式服务机制数据传输协议数据交换格式NetworkedAuto-IDuIDIoTUSNPhysical-netCoAP/UDPEXIM2MSENSEIIoT-AAOA注:星号()表示扩展的体系结构;顿号(、)表示或者;减号(-)表示无.CoAP/UDP、EXI从表2可以看出,如果以“后端集中式”物联网体系结构为指导建立物联网系统,目前常用的方法是采用现有的互联网数据传输协议(HTTP/TCP)和数据交换格式(XML),实现基于SOAP的物联网Web服务;如果以“前端分布式”物联网体系结构为指导建立物联网系统,目前常用的方法是采用轻量级的数据传输协议(CoAP/UDP或EBHTTP/UDP)和数据交换格式(EXI或JSON),实现基于REST的Web服务机制.5研究挑战与未来工作从以上对物联网体系结构和实现方法的总结可以看出,多种物联网体系结构和实现方法并存是目前物联网发展阶段所具有的特性,这也是物联网发展必然经历的过程.未来,随着物联网相关研究工作的深入开展和标准化工作的不断推进,本文总结指出的两类物联网体系结构(即“后端集中式”和“前端分布式”)将会不断完善、细化和规范化,并在这两类体系结构指导下形成物联网设计与实现的统一方法.这是未来的发展趋势与目标,但是达到这一目标还需要面临以下挑战并开展相应的研究工作.5.1体系结构从第3节对目前已经提出的物联网体系结构的介绍和比较分析可以看出,目前提出的物联网体系结构都还是处于对物联网功能构造的具体描述阶段,还没有对其进行形式化说明(Specification)与验证(Verification).也就是说,目前提出的这些体系结构大都只是从功能角度定义了物联网的组成,并没有用形式化方法(如自动机Automata、通信系统演算CCS和通信顺序进程CSP等)[60]对这些功能模块以及模块之间的连接关系进行抽象的定义和说明,也因此无法对这些体系结构的属性进行严格的验证.因此,未来还需要采用合适的形式化方法为各种物联网体系结构建立静态属性和动态行为的语义模型[61],以对其进行更加精确的分析和改进.5.2实现方法从以上对物品连接模式和通信协议的介绍可以看出,它们是实现物联网服务机制的基础.未来的主要工作是在不同连接模式下基于不同通信协议实现物联网系统内及系统之间的服务互连与交互.为此,在服务机制的实现方面,尤其是基于SOAP和REST的物联网Web服务机制,还需要针对物联网特性,深入开展一些研究工作,主要包括服务发现、语义服务和安全服务.5.2.1服务发现不论是采用SOAP技术还是REST技术实现物联网Web服务机制,服务(或资源)的发现问题是建立大规模物联网系统必须解决的问题之一.目前,一些研究机构的科研人员已经开始关注该问题.比如,在EPCglobal系统中,由于其采用一个分布式架构存储物品和环境信息,因此对某一物品的查询操作可能涉及多个组织的EPC信息系统.为发现所有的相关信息仓库,以组成一个完整的查询操作结果,BRIDGE项目[62]提出了两种服务发现架构:一种基于同步信息资源模型,另一种基于查询中继模型.Evdokimov等人[63]对目前已经提出的EPC-global系统的四种服务发现机制,即BGIDGE、Afilias、ID@URI和DHT-P2P进行了比较分析.前面3种机制都是采用一组集中式的后端服务器或代理维护系统中的服务资源,客户端通过一定的协议来查询与指定的EPC对应的服务;而后一种方法采用分布式Hash表(DHT)维护和查询系统中的服务资源.作者采用7个功能性指标以及可靠性、可扩Page17展性、可维护性与可移植性等非功能性指标,对这四个机制进行了比较分析.结果表明,DHT-P2P具有更好的可靠性、可扩展性和可维护性.刘洪涛等人[64]提出了一种类似的基于DHT的物联网服务命名与发现机制,以提高服务的查询速度和系统的可扩展性.?stmark等人[65]对比了以下四种服务发现机制:SLP、Jini、UPnP和mDSN-SD(multicastDSN-ServiceDiscovery).由于mDSN-SD采用多播方式声明和查询服务,不需要维护集中的服务目录,并且可以采用主动轮询或被动通告的方式来更新服务状态,因此适于作为感知与执行网络内部的服务发现机制.作者还建议将mDSN-SD与一个公共的DSN服务器结合起来,建立物联网的服务发现机制.可见,基于DHT和DSN等机制建立分布式物联网服务集成、维护与发现平台是未来的趋势,同时考虑到物联网服务的异构和动态等特性,如何进一步提高服务发现的效率和系统的可扩展性是未来面临的重要挑战之一.5.2.2语义服务现在基于Web服务机制实现的物联网一般采用XML、JSON和EXI语言来描述数据,并通过预先定义的规则来对数据进行处理.为使系统能够自动进行数据处理与集成,一些研究机构的科研人员提出了将语义网的概念移植到物联网中,以提供物联网语义服务,主要是通过资源描述框架(ResourceDescriptionFramework,RDF)①描述数据所表达的确切含义,通过网络本体语言(WebOntologyLanguage,OWL)②或其他语言描述数据分类与推理规则.以下是4个基于这一方法建立的物联网系统实例.SWE(SensorWebEnablement)[66]是由OGC设计的提供语义服务的地理空间网.SWE将地理空间网中传感器提供的服务抽象为四类,即观察服务、警告服务、规划服务和提醒服务,并定义了描述感知数据模型和响应模型的语言SensorML[66].SWE基于以上服务机制与数据模型,定义了快速发现传感器与感知数据的机制、访问感知数据的标准方法、订阅感知任务和发送警告的机制.SSW(SemanticSensorWeb)[67]是对OGCSWE的扩展,将RDFa嵌入到用XML表示的观测数据中,以准确描述数据的语义,采用OWL建立物联网本体,并采用SWRL③规则语言进行本体推论,增强应用级表达.SmartProduct[68]是一个将具有异构信息源的智能产品集成起来的智能系统.每个智能产品由两个模块组成:先验知识模块(ProactiveKnowledgeModule)和推理模块(ReasonerModule).先验知识模块中的数据分为元数据模型(MetaModel)、时间模型(TimeModel)、用户模型(UserModel)、情境模型(ContextModel)和领域模型(DomainModel).推理模块基于知识模块采用RDF/OWL进行本体推理.SenaaA[69]是一个在后端提供语义服务的物联网系统.它使用SensorML语言描述感知对象间的连接关系,并通过SensorOntology将其转化为OWL.OWL可以基于领域知识将物理与非物理过程作为语言加强的感知服务,实现服务的创建、读取、写入、删除与自动推理,从而对连接的感知对象的动态事件进行处理、推理和反馈.可见,语义服务可以大大增强物联网的智能性,但是在一定程度上也增加了实现的复杂性,因此未来还需要解决由此带来的实现问题.5.2.3安全服务保证标识与感知数据的安全性是物联网发展面临的重要挑战之一.与传统互联网中的数据安全问题不同的是,物联网不仅需要保证数据在传输过程中的安全,还要保证数据在采集过程中的安全.目前,已经针对一些具体的物联网系统提出了一些保证安全的机制.比如,Jara等人[70]以智能化的居室和健康监护系统(AmbientAssistantLiving,AAL)为例,针对6LoWPAN的移动性问题和RFID/NFC的安全性问题,提出了安全消息交换机制.吴振强等人[71]为EPCglobal系统提出了一种安全传输模型,以满足ONS查询和物品信息传输两个环节的安全需求.Urien等人[72]提出了一个基于HIP协议[28]的安全标识系统HIP-Tags(HostIdentityProtocolinactivetags),它为每个射频标签赋予一个主机标识(HostIdentity,HI),HI可以是一个唯一的128位标识(HostIdentityTag,HIT),或者是32位或128位的局域标识(LocalScaleIdentifier,LSI).射频标①②③Page18签与阅读器之间的信息交换基于T-BEX(HIP-TagsBasicEXchange)协议.作者还指出可以采用以下3种方式保证数据的安全:(1)基于对称密钥的伪随机数加密机制;(2)基于对称密钥的密码树机制;(3)基于非对称密钥的GPS信息加密机制.可见,目前主要针对提供后端集中式信息服务的物联网系统设计一些保证数据传输和采集过程安全的机制,而没有对提供前端分布式信息服务的物联网系统提出相应的安全机制.因此,未来需要将安全机制融入到各嵌入式设备和智能物品中.但是,由此带来的安全机制实现问题将变得更加重要和不易解决.6总结本文从功能角度将目前已经提出的物联网体系结构分为“后端集中式”和“前端分布式”两种类型,并以水平性、可扩展性、环境感知性、环境交互性和自适应性等为指标对这些体系结构进行了比较分析,指出了USN和IoT-A具有更多符合物联网特征和未来物联网发展需求的属性,因此可将这两个体系结构分别作为建立后端集中式和前端分布式物联网系统的参考体系结构.未来还可以基于这两个体系结构衍生出满足不同应用需求的物联网体系结构.这样既可以保证未来建立的物联网系统具有一定的统一性,便于实现系统之间的互联与融合,也可以满足不同系统的各自需求.此外,本文还从物品连接模式、通信协议和服务机制3个方面对这两类物联网体系结构指导下的物联网实现方法进行了分层归纳,总结出以下结论:如果以“后端集中式”物联网体系结构为指导建立物联网系统,目前比较常用的方法是采用现有的互联网通信协议(HTTP/TCP)和数据交换格式(XML),实现基于SOAP的物联网Web服务;如果以“前端分布式”物联网体系结构为指导建立物联网系统,目前比较常用的方法是采用轻量级的数据传输协议(CoAP/UDP或EBHTTP/UDP)和数据交换格式(EXI或JSON),实现基于REST的Web服务.为形成物联网设计与实现的统一方法,未来还需要在物联网体系结构的形式化描述与验证、物联网服务机制的实现方面,深入开展一些研究工作.致谢审稿专家和编辑部老师为本文提出了宝贵的修改意见和建议,作者在此表示衷心的感谢!
