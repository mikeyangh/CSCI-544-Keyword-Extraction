Page1云计算数据中心的新能源应用:研究现状与趋势1)(华中科技大学计算机科学与技术学院服务计算技术与系统教育部重点实验室,集群与网格计算湖北省重点实验室武汉430074)邓维1)刘方明1)金海1)李丹2)2)(清华大学计算机科学与技术系北京100084)摘要随着大规模云计算数据中心在全球范围内的广泛部署,其高能耗、高费用、高污染等问题日益突出.为了节能减排,越来越多的云服务商尝试利用绿色新能源,像太阳能或风能,为其数据中心供电.然而,不同于稳定供电的传统电网,新能源往往具有不稳定性、间歇性和随时变化等特点,这使得新能源在数据中心中的高效可靠应用面临诸多新挑战.本文剖析了新能源应用的机遇与挑战,回答了为什么、何时、何地及如何在云计算数据中心利用新能源.从绿色数据中心现状与新评价标准、新能源产电模型与预测机制、绿色数据中心能源配额规划、数据中心内负载调度机制、跨区域云数据中心间负载均衡机制五个关键方面,对新能源在云计算数据中心应用的最新研究成果进行分类、对比与总结,并展望了未来研究趋势.关键词新能源;云计算;绿色数据中心;预测模型;作业调度;负载均衡;绿色计算1引言在云计算席卷全球、云计算产业发展浪潮风起云涌的背景下,建设绿色数据中心、实现节能减排成为了近年来学术界和产业界关注的话题之一.传统数据中心企业原有的数据中心如何尽快转变成适合云计算要求的云计算中心,也是迫切需要解决的问题.以谷歌、亚马逊为代表的互联网巨头在从传统内容服务商向云计算服务转型的过程中,需要规划和建设规模巨大的数据中心.与传统数据中心相比,云计算数据中心的新特性主要体现在:(1)模块化的标准基础设施.针对数据中心的云服务需求,云数据中心对服务器、存储设备、网络等设施按工业标准进行模块化配置设计,使其具有适应性与可扩展性;(2)虚拟化资源与环境.云数据中心广泛采用虚拟化技术将物理资源聚集形成一个共享虚拟资源池,从而更加灵活高效、低成本地使用资源;(3)高可靠自动化管理.云计算数据中心应是24×7无人值守的、可远程管理的,实现设备到应用端到端的统一管理.为确保稳定、安全、持续的系统连接,云数据中心需建立高度可信赖的计算平台、网络安全威胁防范,建设数据复制与备份、容灾中心;(4)快速的可扩展能力.随着大数据爆炸式增长以及用户需求的可变多样性,云数据中心必须根据业务应用需求和服务质量来动态配置、定购、供应虚拟资源,具有资源利用的快速扩展能力;(5)节能与节省空间.云计算数据中心将大量使用节能服务器、存储和网络设备,并通过先进的供电系统和散热技术,实现供电、散热和计算资源的无缝集成和管理,解决传统数据中心的过量制冷和空间不足的问题.然而,高能耗、高污染一直制约着云数据中心的发展.据统计,如果将全球的数据中心整体看成一个“国家”的话,那么其总耗电量将在世界国家中排名第15位[1].由于数据中心60%的运营成本来自于能耗,因此如何降低能耗以节省云服务商不断攀升的电费成本、缓解日益严重的碳排放污染,是云数据中心可持续发展过程中亟需解决的问题.本文从绿色数据中心评价标准、新能源的特性、新能源产电模型与预测机制、数据中心能源配额规划、作业调度机制以及负载均衡机制等方面,对云计算数据中心的绿色能源应用研究进行分析.本文第2节介绍绿色云数据中心的现状与挑战;第3节分析新能源评价标准、新能源的特性和可选择利用种类;第4节介绍研究分类评价标准,并据此对目前研究现状进行对比分析;第5节分别从新能源模型和预测机制、数据中心能源配额规划、新能源数据中心内作业调度机制和新能源数据中心间负载均衡机制4个方面,对绿色数据中心的最新研究进展进行分类比较,并总结国内绿色数据中心的研究现状;最后对全文进行总结,并提出未来值得进一步研究的方向.2绿色云数据中心的现状与挑战2.1云数据中心不断增长的能耗日本经济贸易产业省METI预测,全球IT能耗将于2025年翻5倍,而到2050年将增长12倍①.大量的能耗使得像Google、Microsoft和Facebook这样的IT公司每年的电费就高达几百万美元.虽然近年来低功耗服务器和数据中心能效优化领域已经取得了显著进步,但随着数据中心系统规模和服务器数量的增长,其总体能耗仍然呈持续快速增长趋势.例如,Facebook基础设施的规模大约每6个月就翻1倍———从2008年4月的10K台服务器增长到2009年11月的30K台服务器,并于2010年6月达到了60K台服务器②.表1显示了典型企业和机构的服务器数量、能耗需求及电费.面对上述巨大能耗需求,目前电力能源主要还是源自于化石燃料,如表2所示,化石燃料发电量占到全球电能比例的2/3.尽管不同地区的各种能源比例不尽相同,但绿色能源还远未得到广泛应用,①②Page3特别是为数据中心配备绿色能源更是充满了机遇与挑战.表1典型IT企业、家庭、学校等机构拥有的服务器数量、每年电量、电费、总电力开销(包括电费、电网传输和配送费用及其它费用如核电站报废均摊开销)[2]机构名称服务器数量/K电量/GWh电费/总电力开销/eBayRackspace501609.6M20Facebook6019011.5M25Akamai6521012.5M25MMicrosoft>200>600>36M>75MGoogle>800>1120>67M>135MUSA(2006)10.961K4.5B—1×104个USA家庭—<160—<30MMIT校园—270—62M表22008年全球电力能源来源及其使用比例[3]能源核能煤天然气石油水能其它总量2.2云数据中心对新能源的需求最新统计数据表明,平均建设一个额定功率为100MW的电厂将花费60~100百万美元,并在其生命周期中排放超过50百万吨的CO2下,全球数据中心在2007年排放了116百万吨的CO2,而且IT设备的碳排放量占据了全球碳排放量的2%[5].随着二氧化碳排放量剧增、全球气候变暖日趋严重,云计算相关企业或机构无疑都将受到越来越多的成本约束和环境法规限制.近年来,学术界和工业界一直通过各种方法改善数据中心能效(EnergyEfficiency),如利用更好的能耗均增(EnergyProportional)计算技术(包括虚拟化、动态开关服务器、负载整合、IT设备的深度休眠和功耗模式控制),更高效的电力配送及冷却系统.但是,改善能效并不等于就实现了绿色计算,因为数据中心消耗的仍然是传统的高碳排放量的能源.绿色和平组织(GreenPeace)定义实现绿色IT的方式是“高能效加新能源”(GreenIT=EnergyEfficiency+RenewableEnergy)[5].为了减少能耗开销和碳排放量以实现绿色计算,充分利用新能源才是根本途径.新能源一般是指在新技术基础上加以开发利用的可再生能源,包括太阳能、生物质能、风能等.随着常规能源(煤炭、石油、天然气)的有限性以及环境问题的日益突出,环保、可再生的新能源越来越得到各国的重视.能源领域对于绿色可再生能源的研究(如太阳能、生物能的利用)从未停歇,而这股潮流随着云计算的到来,同样走向了数据中心.绿色和平组织通过对全球IT公司的数据中心清洁能源进行评级,来倡导和激励数据中心使用新能源.同时,各国政府也纷纷制定鼓励节能减排的法规和政策.例如,美国加利福尼亚州规定到2020年其市政电力中33%要来源于新能源[6].此外,美国还提出多种激励补贴方式鼓励新能源的应用.例如,生产税收抵免(ProductionTaxCredit,PTC)政策规定在新能源设施运营的前10年内,每生产一千瓦时清洁能量将获得2.2美分补贴.新能源不但能够显著减少高碳电厂的温室气体排放,而且具有光明的经济前景,是减轻未来电力价格上涨压力的一种新途径.例如,用户在安装了新能源或者购买了新能源产品之后,可以在多年内(如20年)拥有固定的能量价格.如果数据中心所在地区需要征收烟碳排放税,或者实行限额与交易(cap-and-trade)政策(每家企业都给了一定量的排碳限额,在限额之内排碳免费;未用完限额可以卖给那些碳排量超过配额的企业),那么对新能源的投资将具有较高的性价比.2.3当前云数据中心不够“绿色”随着不断下降的工艺制造费用以及大规模的投资和政府激励,部署建设新能源的设备(如太阳能光伏电板和风涡轮)费用不断减低.例如,太阳能的安装建设费用从1998年的10.87/Watt下降到2010年的7/Watt①.风涡轮电能的价格更是达到历史最低值:2011年价格仅为1.33/(m·MW-1),相比于2009年的1.06(m·MW-1)下降了7%,而相比于2007年的1.21(m·MW-1)下降了19%②.现在,越来越多的IT企业和机构正在逐步实现完全或者部分新能源驱动的数据中心,例如GreenHouseData建在美国怀俄明州的风能供电数据中心③和Facebook建在俄勒冈州的太阳能数据中心④.eBay在2012年4月份决定使用30个BloomEnergy的燃料电池来为其在犹他州的数据中心供能⑤.Apple将使用太阳能厂和燃料电池站生产60%的电力来①②③④⑤Page4驱动其在南加州的数据中心①.2012年4月,绿色和平组织发布了一份名为《HowCleanisYourCloud?》的报告[5],对著名IT企业的数据中心做了绿色能源评估.其中,在清洁能源所占比例上,戴尔公司以56.3%的比例排在首位,Google和Facebook分别以39.4%和36.4%排在二、三位.由于戴尔是近几年才转型到数据中心解决方案业务,所以其新型数据中心清洁能源所占比例较高.相比于老牌的IBM、Microsoft、Oracle公司等,Google和Facebook则是近来发展起来的互联网巨头,更容易采用新技术和转变能源来源,因此其绿色能源占据的比例较高也在情理之中.在其它指标中(如数据中心选址、能源效率及温室气体排放、能源回收二次利用),能够达到代表绿色环保的A和B级别的企业很少.此外,大部分中小型IT公司由于资金和技术原因,其数据中心更难采用新能源.综上所述,新能源在数据中心的应用还有很长一段路要走.2.4云数据中心仍然需要混合能源2012年6月29日,大规模雷暴雨袭击了美国东一区,导致著名的亚马逊云服务Amazon’sWebServices(AWS)中断,严重影响了基于AWS的应用服务商,如Netflix,Instagram和Pinterest②.此前,亚马逊在2010年就曾经历了一周内4次电力故障,导致所提供的云服务中断③.这些促使人思考一个问题:现在是时候让数据中心的运营者考虑完全使用非电网的能源吗?尤其是现在部分运营商已经成功实现自己生产部分电能,而用传统电网作为备用电能.显然,电网仍然是为数据中心供电的最重要和最优先方式.电网更加稳定可靠,而且考虑到数据中心能耗一般在20MW到100MW之间,这样大规模的需求很难通过新能源来满足.亚马逊Web基础架构专家JamesHamilton指出,Facebook在俄勒冈州建设的100KW的太阳能电站对于其能耗25MW的数据中心来说仍然远远不够④,仅够用来为数据中心照明,或者仅相当于一个高密度服务器机架的能耗.此外,Apple的iDatacenter使用20MW的太阳能电厂来为100MW的数据中心提供部分电能.为此,Apple需要清理掉171英亩的土地来放置足够多的太阳能电板.太阳能电厂在夜晚不能发电,而且在白天太阳能也是变化的,这导致了仅仅只有部分可用的电能产出.据Hamilton估算,额定20MW的太阳能电厂只有15.8%的产出,即约3.2MW.据此,如果Apple想要为整个数据中心供电的话,需要扩建24.4倍大的太阳能电厂,达到额定488MW,占地4172英亩.由此可见,目前数据中心仍然不适合完全脱离传统电网.虽然利用新能源能够改善数据中心带来的环境问题,但是不能完全代替传统高碳电能.如何协同配合传统电网和新能源的各自特点,仍然是未来的一个研究方向.2.5绿色云数据中心研究面临的挑战不同于依赖传统高碳能源的稳定供给电网,新能源往往是不稳定的、间歇性的、动态变化的.为了缓和这种可变性,数据中心可以将绿色能源存储在电池中或者直接连上电网.但是这些方法会导致能量损失和昂贵的电池费用.尤其是能量储存设备比较昂贵、改进过程也比较缓慢,不宜大规模采用.此外,建设新能源电厂需要大量的土地.比如,使用太阳能来生产1MW的电能需要5~10英亩的土地(具体数值依赖于安装的太阳能电板的不同密集程度和不同发电效率).同样,风能也需要使用大量的土地,风能项目的平均产电能力为2W/m2⑤.最大化使用新能源的办法是根据新能源的供应量来匹配相应的能耗需求(计算任务).匹配能耗供应与需求有很多待研究的问题:什么样的计算负载适合于绿色数据中心?采取什么样的有效技术来匹配动态变化的能耗需求与供应?是否可以允许程序员定制使用哪类节能技术?如何准确预测太阳能和风能的可用量?如何有效管理电池等储能设备?能否通过全球范围内的任务分发与调度来最大化利用多区域的新能源?如何选址配额来实现最佳的数据中心收益与开支平衡?3数据中心采用新能源的途径及特征3.1新能源种类及其在数据中心中的应用途径在数据中心部署使用新能源有就地(on-site)电站和离站(off-site)电厂两种方式.就地新能源发电厂生产的电力可直接为数据中心供能,例如Facebook建在俄勒冈州的太阳能数据中心.其优势在于几乎①②③④⑤larPowerBut.aspxPage5没有电力传输和配送损失.但是位置最好的数据中心(土地价格、水电价格、网络带宽、可用的劳动力、税收等因素),并不一定具有最佳的资源来部署就地新能源电站.利用新能源的另一种模式就是将新能源电厂建设在具有丰富资源(如风速大或日照强)的离站地区,然后通过电网将新能源产生的电力传送到需要用电的数据中心.尽管这种方式具有较大的传输损失和电网传送、储存的费用,但是其电产量更大,而且选址更灵活.由于新能源的不稳定性,上述两种方式均需要采用储能设备来缓解产量/供应与消费/需求之间的不匹配,因此相应的储能开销(购买费用和管理储能费用)也被纳入当前研究的权衡考虑之中.由于地区原因,许多企业没有机会自己生产新能源.除了直接参与新能源电厂的建造和使用,还有其它间接的方法实现数据中心节能减排的目的.第一,购买新能源证书(RenewableEnergyCertificates,RECs).这是指数据中心与新能源项目签订长期合同,以较便宜的协议价格购买部分新能源项目的产电量.例如,Google与新纪元能源公司NextEra签订的PPA协议规定,Google可以从爱荷华州艾姆斯市的新能源项目中购买20年的114MW的风能,为Google在爱荷华州的数据中心供电①.第二,与第三方新能源提供商签订能源购买协议(PowerPurchaseAgreements,PPAs)来间接获得新能源.可再生能源证书RECs也称为绿色标签,是一种可以在市场上交易的能源商品.由专门的认证机构给可再生能源产生的每1000kWh电力颁发一个专有的号码,证明其有效性.即1MWh电力对应于1个单位的证书.绿色证书是可再生能源比例标准的重要一环,它借用市场机制形成了一项对使用者的补贴,并以此鼓励绿色能源的广泛应用.第三,购买碳补偿(carbonoffset)来抵消非清洁能源使用.购买者计算日常运营直接或间接制造的二氧化碳排放量,并计算抵消这些二氧化碳所需的经济成本.然后,付款给专门企业或机构,由他们通过植树或其它环保项目抵消大气中相应的二氧化碳量.总之,云计算数据中心采用新能源的途径有多种.不同方式在开销、复杂度、资助直接性和公共关系价值等方面不尽相同.如图1所示,这些途径分为4个层次:第1种途径是直接建设就地新能源电站,这种方式最直接支持利用新能源,因此也得到更多的直接资助;第2种途径是与新能源开发商签订使用协议或者成为合作伙伴,获得离站的新能源,例如能源购买协议PPA;第3种途径是购买高质量的新能源补偿,如碳补偿;第4种途径是购买新能源市场产品,如新能源证书RECs.第3种和第4种途径相对前两种途径更加便宜且简单方便,但是所获得的资助和公共关系价值相对较少.3.2绿色数据中心新能源衡量标准———犆犝犈数据中心主要的3个子系统包括:IT设备(服务器、存储设备、网络硬件);冷却系统(冷却装置和风扇);配电系统(不间断电源UPS、配电装置PDU等).电能使用效率(PowerUsageEfficiency,PUE)是衡量数据中心能效的工业标准,其定义为PUE=数据中心总能耗/IT设备能耗.尽管PUE长期作为数据中心运营者衡量其电力使用效率的标准,但它没有涉及性能和开销,更没有考虑评价绿色环保程度(如消耗的能源的碳含量).例如,相比于主要依赖煤燃料供能而具有较低PUE的数据中心,一个主要依靠新能源供能的数据中心尽管可能具有较高的PUE,但其产生的污染更少.为了给出标准的方法来评价数据中心的碳强度,绿色网格组织GreenGrid采用碳使用效率(CarbonUsageEffectiveness,CUE)表示每千瓦时用电产生的碳排放密集程度[8].CUE值的计算方法为数据中心总的CO2排放量(kgCO2eq)除以IT设备能耗(kWh):根据CUE的定义,其计算方法也可以转化为能源的碳排放量因子乘以能源的耗用量:CUE=∑碳排放因子Fi×能源Ei消耗量(2)碳排放因子是相应能源的碳密度,即消耗单位能量所排放的碳量(kgCO2eq/kWh).表3给出了最常见的几种电力能源的碳排放因子,其中石油和天①②Page6然气等化石燃料能源的碳排放因子最大.PPA和REC作为新的绿色能源产品,其开销与碳排放因子与电网和柴油发电机(DieselGenerator,DG)的对比如表4所示.更多绿色IT评价标准参见文献[9].能源碳排放因子/核能煤天然气440石油能新能源产量的62%和13%①.由于风能和太阳能发电量与环境条件紧密相关,如风速和日照强度,因此可用电量是不稳定的、随时间变化的.相应地,它们的容量因子也远低于传统电厂(容量因子(capacityfactor)是指实际产出与最大的额定产出的比值).由于有稳定的化石燃料供应,传统电厂的容量因子可达80%甚至更高.依据年平均风速的不同,风能的容量因子在20%~45%之间②.风能发电的开销主要是前期的安装部署开销,其资金支出占据了生命周期总开销的75%.比较而言,传统化石燃料电厂(如天然气电厂),其燃料和管理运维开销则占据40%~70%.太阳能光伏发电系统的光伏电板比风能和其它新能源技术更加昂贵.与风能类似,管理运维开销只是光伏发电系统总开销的一小部分③.新能源最主要的优点就是一旦建设好电厂就可以源源不断的提供电能,而且管理费用较低,运营过程中不会排放碳等污染物质.尽管在在生产、传输、安装、设备回收利用过程中也会产生碳污染,但是与传统电网的碳排放因子585gCO2e/kWh相比,风能29gCO2e/kWh和太阳能53gCO2e/kWh的碳排放因子仍然低得多.风能和太阳能的显著特性对比如表5所示.表5风能和太阳能的显著特性能源种类安装成本/(·kW-1)管理运维开销/(·kWh-1)寿命/years碳排放因子/(gCO2e·kWh-1)风能太阳能能源单位开销/(·kWh-1)碳排放因子/(gCO2e·kWh-1)电网PPARECDG30.03.3风能、太阳能等绿色能源的特征太阳能和风能是给数据中心供能的最有前景的两种绿色能源,原因在于:(1)这两种能源在全球大部分地区广泛存在;(2)它们不会像水力发电那样引起环境影响(大面积的植被被破坏);(3)它们不会像核能那样引起核泄漏和废物堆积问题.因此,目前关于新能源在数据中心应用的研究主要是考虑风能和太阳能.据统计,风能和太阳能分别占全球非水一方面,风能在地理上具有更小的相关性,而且不管白天还是黑夜都能发电.因此,对于面向互联网规模服务的多区域分布式数据中心而言,风能的可用性具有更小的波动.另一方面,太阳能与数据中心负载都是在白天达到峰值,具有更佳的匹配性.所以,根据当地风能资源的质量及各个数据中心的负载特性,最佳的新能源组合是主要使用风能,而配合使用相对较少的太阳能来处理白天时段的高峰需求[10].此外,燃料电池是另一种具有巨大前景的新能源.例如,新能源公司BloomEnergy生产一种固体氧化物燃料电池,能够通过电化反应将燃料转化为电.这种新型燃料电池的发电效率是美国电网的两倍,而且清洁程度比燃煤电厂高出60%.虽然目前燃料电池较为昂贵,但是其经济效益正在不断改善,而且不像其它新能源那样受限于间歇性.4新能源研究现状的分类与比较基于目前大量针对数据中心如何利用新能源的研究,本节首先总结相关的评价标准,并据此对现有研究进展进行分类对比.4.1新能源使用策略分类标准表6归纳了目前数据中心使用新能源策略的分类和评价标准.首要的标准就是时间尺度,它决定采用的机制和策略的更新频率,可以分为在线策略和离线策略.在线策略是在系统运行过程中实时执行的,时间尺度一般较小,如毫秒或者秒级.离线策略是在系统运行之前就指定好的,时间尺度一般较大,①②③Page7如每小时级的,这类策略通常用于系统设计和资源部署中[9].第二,根据数据中心系统结构的不同层次,可以分为单机部件级策略、数据中心整体策略和跨区域数据中心之间的策略.不同层次的策略需要不同的通信量.有些策略需要跨层次的信息通信,或者需要多层之间相互协作.第三,也可以根据策略所需信息的来源进行分类.例如,策略所作决策可以基于即时信息,也可以基于历史观测值,或者基于预测信息(预测一般即取决于即时信息和历史记录信息).第四,根据数据中心的负载类型不同,策略可以分为即时交互性型服务策略和批处理延迟容忍型服务策略.不同的作业对于性能的要求不同,要求的服务响应时间也不同.例如,Web服务一般要求实时响应,而后台处理和科学计算等作业就属于延迟容表6新能源使用策略分类评价标准分类标准时间尺度能源种类信息输入研究方法负载类型4.2研究分类比较依据表6的分类标准,表7对比了近年来数据中心应用新能源策略的研究进展.不同的机制策略可归类为:第一,新能源模型和预测机制.由于不同研究方面文献能源种类时间负载信息表7云计算数据中心新能源利用机制与策略综合比较Carbon-Awareplanning[4]ReRack[11]风能、太阳能、配额规划EnergyPortfolioSimulation[12]CapacityPlanningandPowerManagement[13]ConcentratingRenewableEnergy[14]历史预测历史预测历史历史预测历史忍型服务,只需要在一定时间段完成.第五,数据中心可以选择多种能源,不同的策略针对的新能源种类也不尽相同.例如,前面介绍的就地新能源和离站新能源;太阳能、风能、燃料电池;可再生能源补贴金RECs、碳补偿等多种形式的绿色能源选择.有的策略考虑完全利用新能源为数据中心供电,而有的策略则采用多种新能源组合为数据中心供能.最后一种重要的分类标准是研究方法,它反映方案的现实可用性和评测方法.具体分为离散时间模拟方法、设计原型系统、形式化建模分析以及数值模拟方法等.所有方法均有其局限性和优缺点.例如,相对于真实系统平台或原型系统,理论分析和模拟的研究给出了不依赖于具体平台和实现的结果,但是真实原型系统则反映了相应研究领域的成熟程度.新能源具有不同的特性(如前面介绍的发电量和碳排放量因素、因此间歇性和动态变化等),因此,为了最大化利用新能源,我们需要建模预测未来可用的新能源量,以此来调度作业,匹配能耗供应与需求.建模、trace实验ReRack模拟器建模、基于trace模拟Page8研究方面文献能源种类时间负载GreenSlot[15]太阳能、GreenHadoop[16]太阳能、Blink[17]iSwitch[18-19]风能、电网在线网络SolarCore[20]太阳能、负载调度EnergyAgileComputingCluster[21]UtilizingGreenEnergyPrediction[22]RenewableandCoolingAware[23]It’sNotEasyBeingGreen[3]GeographicalLoadBalancingwithRenewables[10]GreeningGeographicalLoadBalancing[24]GreenWare[25]太阳能、FreeLunch[26]太阳能、SomeJoulesAreMorePreciousThanOthers[27]ServerSelectionforCarbonEmissionControl[28]ManagingtheCost[29]CappingtheBrown[30]负载均衡AdaptiveGreenHosting[31]BenefitsofGreenEnergyandProportionality[32]信息中心预测基于SLURM调度器原型中心预测Hadoop原型实验中心实时Blink原型系统实验中心实时iSwitch原型系统trace实验中心预测原型集群系统中心预测建模、模拟中心预测建模、trace实验中心实时原型系统FORTE实时、模型预测实时、模型预测实时、模型预测原型系统GreenWare中心实时FreeLunch实时、中心实时建模、模拟实验建模、真实和模拟实验实时和预测实时和预测建模、trace实验中心预测建模、trace实验第二,数据中心能源配额规划:主要涉及研究新建数据中心或者新增新能源时,如何选择最佳的能源组建模、trace-driven实验建模、trace-driven实验架构合来最小化开销和碳排放量,并同时满足相应能耗需求.第三,新能源数据中心内作业调度机制:主要Page9研究如何依据新能源可用量,来分级调度交互性和延迟容忍型作业、调节服务功耗状态以最大化利用新能源.第四,新能源数据中心间负载均衡机制:针对不同地区数据中心的不同新能源可用量和不同碳排放量,负载均衡器将请求分发到不用的地区进行执行处理,从而最大化新能源的利用、减少能耗开销和碳排放量.下面,将分别详细阐述图2数据中心利用绿色新能源的机制策略分类电流电压特性为5.1新能源模型与预测机制5.1.1风能发电模型风涡轮正在全球范围内大量安装部署.据预测,2030年美国的电力将有20%来源于风能[25].风能电站中风涡轮的发电量是实际风速的函数.例如,在风速为v的情况下,一个风涡轮的发电量pwind近似模型为pwind=其中vr和pr分别是风涡轮的额定风速和能量,vin和vout是切入和切出风速.切入风速是指涡轮开始旋转并发电的风速,典型值为3~4m/s.切出风速是制动系统为了避免不断上升的风速使涡轮毁坏而让涡轮停止的风速,一般在25m/s.在大规模的风力发电厂,假设有大量的风涡轮,数量为mw,那么整个系统的发电量大约是每个风涡轮发电量的总和:其中,pkwind是第k个风涡轮在风速为v的时候的发电量[25].5.1.2太阳能发电模型光伏太阳能发电量在全球呈指数级增长.在不同的天气条件下(例如日照强度和温度),光伏电板的发电量是不同的.单向二极管反应式被广泛应用来模拟单向光伏电板发电量.具体而言,光伏电板的这4类研究.5新能源利用机制与策略本节首先对新能源在数据中心应用的4个方面进行阐述,如图2所示.然后,我们分析总结国内绿色数据中心的研究现状.其中:Iph是光照产生的电流;Io是周围天气模式的饱和暗电流.单向二极管模型也考虑了光伏电板的串联和并联的电阻Rs和Rsh.Vth是结合点热电压,如Vth=kT/q,其中k是波尔兹曼常数,q是电子电荷,而T是环境温度.ns是光伏电板上的串联的单元格数目,如典型电板上ns=72.为了表示变化的天气条件对光伏电板发电量的影响,往往通过引入两个关键因素———日照和温度,将式(5)转变为式(6)即可.饱和暗电流Io只与环境温度有关而与日照强度无关.对于高质量的太阳能电板,它的串联电阻Rs一般较小而并联电阻Rsh很大.因此,在太阳能发电模型中只考虑串联电阻,而将并联电阻假设为无穷大(Rsh=).进而,Iph可以简化为Isc,其中Isc是短路电流.Isc与日照强度和周围温度成正比例关系.如下式:i(G,T)=Isc(G,T)-Io(T)·e其中,电流Isc(G,T)=GIo(T)=Isc1+ki100·(T-T0和T0分别是在标准测试条件下的日照强度和温度,G0=1000W/m2,T0=25,Isc、Voc、kv和ki分别为短路电流、开路电压和标准测试条件下的短路和开路温度系数.光伏电板在变化的温度和日照条件下的太阳Page10能,是基于式(5)中伏安特性下的输出电压和电流的乘积,即psolar=v(G,T)·i(G,T).在均匀的日照和温度环境下,太阳能产量Psolar的最大值是唯一的[29].光伏电板的最大太阳能产量mpp是在最佳负载rmp和相应的电流imp下取得的,其中rmp=Rs+ns·VthIscG,()T+I0()T-imp.因此,mpp=i2mp·rmp.假设一共有ms个光伏电板,在变化的日照和温度下,太阳能发电厂的发电量为其中mppk是第k个光伏电板在温度T和日照G的条件下的最大发电量[25].5.1.3可用新能源预测模型将新能源融入电网的挑战之一就在于新能源是间歇性的,而且是不可控的.因此,预测未来新能源的可用量是极为重要的.随着新能源产电量的变化,电网必须动态调度发电机来满足能耗需求.同时,通过预测新能源产量的变化趋势,可以指导作业调度和能耗管理机制来充分利用可用的新能源.对于太阳能的预测,文献[22]使用多种时间序列预测算法,例如估计加权移动平均(EstimatedWeightedMovingAverage,EWMA)算法和天气条件移动平均(Weather-ConditionedMovingAverage,WCMA)算法.由于太阳能变化的连续性和周期性,EWMA算法在天气条件稳定的时候可以准确预测可用太阳能.但是,当天气频繁变化的时候,算法的准确度较差,平均预测错误率高达32.6%.WCMA算法考虑了最近几天发电量的平均值以及天气条件与前几天的对比.其在天气条件极差的情况下也具有较高的准确率.例如,当预测窗口为30min时,平均预测错误率仅为9.6%.但是,WCMA算法只能预测未来一个时段的值.文献[33]基于天气预报服务,利用机器学习方法,提出了一种自动的太阳能预测模型.利用多种回归预测技术,包括线性最小二乘法和支持向量机(SupportVectorMachines,SVM)的负荷预测方法,最后得出预测模型为式(10)所示.该方法的准确性比传统时间序列预测模型高27%.SolarIntensity=1.18×Day+77.9×Temp+33.11×DewPoint+22.8×WindSpeed-96.9×SkyCover-49.15×Precipitation-43.4×Humidity尽管上述太阳能预测策略较为准确,但是计算复杂度较高.文献[15-16]假设预测太阳能发电量是与云覆盖面(CloudCover)成反比的,其表达式为Ep(t)=B(t)(1-CloudCover),其中Ep(t)是在t时刻预测可用的太阳能量,B(t)是在阳光充足的理想状况下的太阳能量,CloudCover是预测的被云覆盖的比例(在0~1之间取值).可利用历史数据来初始化计算B(t),并利用天气预报来预测CloudCover.然而,天气预报也存在错误.例如,对风暴的预测经常是不准确的.此外,天气也不是影响太阳能发电的唯一因素.为了提高预测的准确性,也可以使用过去(如1小时前)的观测值来预测当前的CloudCover.对于风能的预测,文献[22]依据风速和风向,设计了一种新的预测可用风能的预测器.其算法根据每30min间隔的风速和风向数据,制定加权最近邻居表以生成风能曲线.通过给不同时间的结果赋予不同的权值,加权表可以使得算法适应于季节变化.而能量曲线具有灵活性,使得算法可以适用于不同的风能电场.合适的能量曲线应该依据最近的风量、风向和发电量来不断更新:Pnew(v,d)=α×Pobs(v,d,t)+(1-α)×Pold(v,d)其中,Pnew(v,d)是在风速为v、风向为d的时候的能量曲线表记录,Pold(v,d)是相同风速和风向的条件下的现存能耗曲线记录,而Pobs(v,d,t)是在时刻t的观测能量值.α在0~1之间取值,实现结果发现α=0.75的时候预测结果与真实值最一致.这表示应该给予最近观测值更高的权重.未来时段风能的预测通过风速和风向来查找表中数值:Ppred(v,d,t+k)=P(v(t+k),d(t+l))(10)通过一年的真实数据实验发现,该算法在预测窗口为30min时的平均错误率为17.2%,比传统时间序列预测算法更准确而且计算开销较小.5.2绿色云数据中心能源配额规划在数据中心升级、考虑引用新能源来节能减排,或者新建数据中心时,数据中心运营者面临如下问题:如何规划供电系统的能源组合?如何选择各种新能源额定功率大小(配额)?而这需要考虑不同的新能源来源(风能或太阳能、直接可用新能源或间接的新能源市场产品)、不同能源的不同费用和单位碳排放量、储电设备、负载、不同地区的天气条件、激励政策、服务协议SLA、税收以及电网功率等等因素.这使得制定因地制宜的能源组合、配额规划方案更具挑战性.ReRack[11]是一个可以输入上述不同因素的模Page11拟优化器,可用来评估使用新能源的数据中心的能耗开销.ReRack主要包含两个部分:一是模拟器,用来分析新能源的效益,其模型既可以表示数据中心的能耗需求也可以模拟不同地区的新能源变动情况;二是优化器,用来寻找对于给定地区和负载的开销最佳的求解空间.文献[4]提出的碳感知能源规划方法可以帮助数据中心操作人员设计可持续发展的新能源驱动的系统.该方法假设数据中心内部的IT设备、冷却设备、供电设备都齐全,而需要规划的决策是多种新能源的配额以及储能设备(EnergyStorageDevices,ESD)的大小.能源来源包括就地新能源、离站新能源、电网、就地柴油发电机、储能设备和间接的新能源市场的产品(如REC和PPA).通过考虑不同碳足迹指标、新能源特性、激励政策、税费,该方法的目标优化函数是最小化上述所有能源组合的费用开销.基于此优化框架,大量真实数据(trace)驱动的仿真实验显示:(1)新能源不仅可以减少数据中心的碳排放量,而且可以减少开支;(2)就地新能源可以减少开销的原因在于它们能直接为数据中心供电,而减少对电网的峰值需求,而传统的作法则是运用更昂贵的ESDs来实现相同的目标;(3)减少碳排放量的最有效方式取决于碳足迹的目标:对于比较低的减排目标(不超过30%),最好使用就地可用的新能源;更高的碳排放减少目标就需要使用离站新能源;而零碳排放目标就必须借助于新能源产品,如RECs.然而,上述能源供应规划方案忽视了对数据中心能耗需求的考虑.文献[13]提出了一种能耗管理规划方案,使得数据中心的负载能耗需求与供应相匹配.电能供应可以来源于电网、新能源和储能设备.其中,新能源的供应是随时间变化的,依赖于新能源来源、发电机地理位置和天气条件.能耗需求主要取决于随时间变化的数据中心负载和所采取的能耗管理策略.该方法采用DVFS和服务器整合技术来调节CPU功耗和服务器个数,并设置能耗上限来控制能耗需求.储能技术用来储存多余的电能,并用来平滑由于间歇性新能源导致的不稳定电能供应.以上几种配额规划方案都没有考虑新能源对公众健康及地区经济效益的影响.为此,文献[12]提出了一种系统最佳能源组合模型,能够考虑电网的可靠性、电力开销、污染对健康的影响、对建筑环境的影响、对景点的影响、对当地财富和环境的影响.而且,该模型可以模拟这些因素之间的交互影响,提供决策信息来设计最佳的电力能源组合.但是该模型只是概念模型,并没有严格的形式化数学表达.虽然现在越来越多的数据中心使用新能源来减少碳排放量,但是只有少数的绿色环保客户才对新能源感兴趣,而大部分的普通用户并不关心数据中心是否使用绿色能源.为此,数据中心可以提供差异性服务:新能源仅仅为服务绿色环保客户的服务器供能.在新能源加入数据中心供电系统时,应该规划哪些服务器提供的服务由新能源支持,哪些服务器提供的服务由传统电网支持.在相关研究[14]中,新能源通过并网设备(gridtie)将就地新能源并入电网,而电网作为备用能源,当新能源不足的时候才使用电网,而当新能源富余时就存储在电网中.在并网的数据中心中,新能源在供电系统的比例取决于新能源的产量,以及并网设备下的服务器数量.该方法能够量化不同的并网设备放置方案对于新能源利用率的影响.例如,在机架级别放置并网设备可以增加每小时新能源利用率的1.76倍.5.3绿色云数据中心内作业调度机制5.3.1延迟处理作业机制为了研究数据中心如何利用不稳定的新能源、如何匹配负载的能耗需求与变化的新能源供应,美国罗格斯大学的研究者设计并实现了太阳能驱动的小型数据中心μdatacenter———Parasol[34].最近,他们又为绿色数据中心设计了两个负载调度系统:GreenSlot[15]和GreenHadoop[16].这两个系统均假设:(1)数据中心既与太阳能电站连接也与电网连接;(2)没有蓄电设备.系统目标都是最大化利用太阳能.非清洁能源只在太阳能不足的时候才被利用.GreenSlot[15]是一个批处理作业调度器,它扩展了SLURM模拟器(SLURM是一种可用于大型计算节点集群的高度可伸缩和容错的集群管理器和作业调度系统).用户提交作业时需要设定所需的结点数、期望的运行时间和截止期限.基于历史数据和天气预报,GreenSlot首先预测未来太阳能的可用量.在满足作业的延时要求情况下,GreenSlot尽可能将作业延迟到未来新能源可用的时候再执行,如图3所示.其中,回填算法是在先来先服务算法的基础上,将队列中较小的作业回填到空闲CPU,以提高CPU利用率.每个长方形代表结点的个数和每个作业大概需要的时间.垂直线为作业的最后完成期限.GreenSlot延迟部分作业的执行(只要不超过截止期限)以保证新能源的利用.例如,GreenSlot延迟作业J1到截止期限之前,从而尽可能多地利用可用的新Page12能源[15].如果为了满足延时要求而不得不使用传统电网时,GreenSlot则选择电价较为便宜的时候执行作业.图3在调度3个作业(J1,J2,J3)时,回填(Backfill)类似地,GreenHadoop在Hadoop数据处理的框架下改进作业调度器来最大化新能源的利用.但是调度管理Hadoop作业的能耗更加困难,因为Hadoop作业不设定需要使用的服务器个数、运行时间和所需能耗等信息.此外,能耗调度器需要保证管理的服务器上具有运行作业所需的数据.但是,GreenSlot[15]和GreenHadoop[16]调度系统不适合交互式延迟敏感型应用.文献[22]既考虑批处理这样的延迟容忍型作业,又考虑Web服务这样的延迟敏感型应用.对于这两种不同类型的作业,调度器设置两个不同的队列.对于Web服务,系统限定每个服务器上的请求个数,并在计算资源可用时立即执行,以满足响应时间要求.而对于批处理作业,则利用前面5.1.3小节总结的风能和太阳能可用量预测机制,自适应地延迟调度每个服务器的作业来充分利用新能源.虽然该方法使用的新能源预测算法相对于GreenSlot和GreenHadoop系统更为复杂,但是准确性更高,调度失误率更低.类似地,加州大学伯克利分校的研究者也同时针对批处理任务和交互型服务设计了能源敏捷型集群[21].对于批处理任务,该方法同样通过新能源感知的松弛调度来最大化风能的利用.不同的是,对于交互型服务,系统通过降低服务质量(如增加响应时间、选择性地拒绝部分请求)来减少能耗.其代价是影响服务质量.5.3.2调节硬件状态方式除了通过延迟处理作业来匹配可用新能源的方式外,另一种利用新能源的调度方式就是调节处理器或者服务器的功耗状态来调节能耗需求,从而匹配可用的新能源.在处理器层次,佛罗里达大学的IDEAL实验室设计了SolarCore[20],一种太阳能驱动的多核体系架构下的能耗管理方案.SolarCore依据可用的太阳能动态地设置处理器的能耗预算,并利用DVFS技术根据吞吐率和能耗的比值来动态调节每个核的负载,以充分利用新能源实现最佳的性能.当太阳能利用率低于一定阈值时就开启备用电源(电网).类似地,对于服务器集群,Blink[17]基于变化的可用新能源电量,利用快速休眠状态,动态调节每个服务器的功耗状态来匹配能耗供应.不同的是,该方法假设集群完全依赖绿色能源,不与电网连接.但是,目前数据中心仅仅依靠绿色能源是不实际的,原因在于间歇、不稳定的新能源可能会导致无法控制的性能损失、服务中断和断电.5.3.3迁移负载调度资源上述这几种延迟处理作业或者调节硬件功耗状态的方式会一定程度上影响服务质量.IDEAL实验室的另一个研究成果是iSwitch[18-19].为了最大化利用间歇、不稳定的新能源,iSwitch在两组服务器之间动态调节负载:一组服务器依靠新能源供能,而另一组依靠传统电网供能.根据能源波动利用虚拟机迁移技术,当新能源不足时就将负载迁移到电网服务器组;当新能源充足时就将任务迁移到新能源服务器组.但是,能耗需求的波动性和新能源的不稳定性导致引入了很多不必要的负载调度开销.文献[23]在管理负载时集中考虑了新能源供应、动态的电价、冷却方式等因素,来改善数据中心运营的节能环保可持续性.系统首先预测可用的新能源和IT需求,然后依据这些预测数据来产生IT负载管理策略———依据变化的能源供应和冷却效率在数据中心中调度负载和分配资源.真实数据驱动的实验显示该方法在保证服务质量SLA的同时,可以减少60%的能耗开销和非清洁能源的使用量.实验回答了3个关键问题:(1)通过新能源和冷却感知的负载管理方式能获得多少益处(减少电力开支和环境影响)?(2)零电网能耗可能实现吗?(3)哪种新能源更有价值?最优的新能源组合是怎样的?5.4绿色云数据中心间负载均衡机制云服务提供商通常在全球多个地区拥有自己的数据中心:一是为了尽可能快地为全球客户服务;二是为了故障恢复(数据在不同地区的数据中心复制多份);三是为了更好利用不同地区的能源供应、电价、冷却方式、税费之间的差异.当然,不同地区的数据中心的可用新能源量是不同的、波动趋势也不尽相同,所以越来越多的研究者发现在跨区域数据中Page13心之间合理地进行负载迁移和请求分发,不仅可以减少总体费用,而且可以充分利用各地的可用新能源、减少碳排放量.5.4.1跨数据中心请求分发节能减排的可行性剑桥大学的学者提出了FreeLunch[26]架构.他们假设多个数据中心拥有新能源,而这些产出不稳定的新能源不被使用就会被浪费.数据中心之间通过专有网络连接.FreeLunch根据可用能源来无缝执行和迁移虚拟机,将任务迁移到有富余新能源的数据中心.但是,实现FreeLunch这种通过虚拟机迁移负载来充分利用新能源的思想有以下5点挑战:(1)虚拟机在线迁移具有很大性能开销.例如,在新西兰和澳大利亚的数据中心之间迁移的最小延时是67ms.(2)FreeLunch假设系统中所有服务器都连接到网络附加存储(NetworkAttachedStorage).在单个数据中心这个假设是合理的,但是在多个不同地区的数据中心之间,虚拟机的迁移需要保证虚拟机磁盘状态和数据的一致.(3)多个数据中心之间的虚拟机磁盘镜像放置也是一个挑战.虚拟机的正常运行需要磁盘镜像随时可访问.虚拟机只能被放置或迁移到具有镜像的数据中心中.(4)FreeLunch比较适用于无状态的、非交互型、访问数据量小的应用.大量的网络延时使其难以满足延迟敏感和交互型应用的服务等级协议SLA.尤其是当负载具有大量的磁盘访问操作时,负载迁移的时间和数据处理使其开销更大.(5)FreeLunch假设数据中心的计算资源与绿色能源来源是在一个地点的.因此,更合理地利用不同地区数据中心的新能源、减少碳排放量的方式,是分发用户网络请求,依据可用新能源或碳排放量的不同来均衡各个数据中心的请求数量.加州理工学院的Wierman等人从理论和实验上证明这种方法的可行性.他们在文献[10]中研究互联网系统完全利用新能源的可行性.研究发现小规模的储能设备配合分布式请求转发机制,对于完全依赖于新能源的数据中心就足够了.最佳的新能源组合是主要用风能,而使用相对较少的太阳能来处理白天时段的高峰需求.他们在文献[24]中研究跨数据中心的负载均衡能否刺激新能源的利用、减少化石燃料的使用.此研究主要针对新能源输出的电量接入到电网,进而为数据中心供电的情形.研究发现负载均衡机制的好处取决于新能源加入电网后的定价方式.例如,一个地区饿电价p定义为其中,pb表示非清洁能源的价格,pg表示清洁能源的价格,a(t)表示清洁能源在电网中所占的比例.如果pb=pg则表示静态电价,那么各个数据中心之间的请求转发并不会刺激新能源的引入.而如果pg≠pb,电价与非清洁能源所占比例成正相关,那么请求转发将大大减少非清洁能源的使用.pg=0表示最佳的定价.5.4.2跨数据中心请求分发机制首先面对的问题就是多少请求、哪些请求应该被转发.文献[27]提出了一种准确评估每个请求所需能耗的模型.基于从性能计数器(Performancecounter)收集每个CPU周期的3个指标:L2级cache访问次数Ccache、内存事务数Cmem和非停止CPU周期数比例Cnonhalt,请求能耗模型如下:pidle+pcache·CcacheCceilcache+pmem·CmemCceilmem+pnonhalt·CnonhaltCceilnonhalt其中参数p是该线性模型的系数,带有ceil上标的C符号分别表示3个指标的上限.依据不同请求的不同能耗,服务商可以基于不同数据中心中可用的新能源电量来决策如何分发哪些请求来充分利用新能源.由于目前新能源单位电量价格仍然比电网价格高,因此为了减少碳排放量而使用新能源可能会导致云服务商的预算超支.为此,文献[25]提出了GreenWare系统,用于解决两个问题:(1)如何动态地分发请求到不同的数据中心,依据当地的天气和气候条件来最大化地利用新能源;(2)如何保证服务运营的预算不超支.如图4所示,GreenWare在云服务商的费用预算内动态分发请求,从而最大化新能源的使用比例.此目标函数被形式化为受约束的优化问题:i=1∑N(其中,Wi,Si,Bi分别表示第i(1iN)个数据中心的风能、太阳能、非清洁能源供电比例,PWi,PSi,Page14图4GreenWare云计算数据中心请求分发机制[25]PBi分别表示这些能源的单价.约束条件(14)表示分发到N个数据中心的请求之和与到达数据中心系统的请求数λ相等.约束条件(15)保证能耗费用不超过预算Budget.基于线性分数规划(Linear-FractionalProgramming,LFP)方法,GreenWare利用Matlab中的linprog解决方案求得最优解.类似地,文献[29-30]考虑在设置非清洁能源使用量上限情况下,如何依据不同地区的不同电价和碳抵消交易市场来分发请求,实现充分利用绿色能源并最小化能耗开销,并同时满足服务质量SLA.文献[28]考虑不同地区处理请求的不同碳排放量和网络延时对服务质量(QualityofService,QoS)的影响,对碳排放和QoS之间的权衡作了优化处理.文献[3]设计的FORTE优化框架依据负载和碳足迹的变动来动态控制每个数据中心的用户请求比例.它允许运营商操控3个方面的权衡:访问延时、碳足迹和电量开销.5.4.3新能源感知的路由算法目前,大量的研究工作关注于优化数据中心计算的能耗,而较少研究者关注连接大规模分布式数据中心的网络的能耗.数据中心运营者和网络提供商如何以最小的开销提供期望的性能是设计分布式服务的关键挑战.主干网的总能耗是所有链路和路由器能耗之和.其中,链路的能耗是距离的函数,主要用于信号放大.路由器的能耗大部分固定在额定值,是主干网能耗的主要部分.目前,网络路由主要采用最短路径算法.随着路由器改进为能耗均增方式(EnergyProportional),未来路由器需要根据负载状态和可用新能源量来动态路由.文献[32]提出了新能源感知的路由算法以改善网络系统的能效.该算法选择那些具有最低非清洁能源消耗量且同时满足带宽要求的路径来路由请求.实验结果表明,使用能耗均增的路由器和新能源感知的路由算法能将路由器的能效提高10倍,并增加36%的作业完成率.5.5国内绿色数据中心研究现状国内在数据中心节能减排、新能源应用方面的相关研究起步晚于国外.但在国家大力倡导资助和国内科研工作者的刻苦攻关下,迄今已取得了一定的成果.在综述方面,2009年四川大学郭兵教授发表了题为“绿色计算的重定义与若干探讨”的文章[35].文章提出了绿色计算的一些基本思路和一般性方法,为下一步研究绿色计算的具体模型、方法与工具打下了必要的基础.2011年清华大学的林闯教授发表了题为“绿色网络和绿色评价节能机制、模型和评价”的文章[9].文章提出了随机模型的绿色评价框架,为构建绿色网络和节能减排计算系统的评价体系奠定了基础.2012年浙江大学的叶可江博士和吴朝晖教授发表了题为“虚拟化云计算平台的能耗管理”的文章[36],总结对比了云计算中心的节能减排模型和机制.在研究上,清华大学的林闯教授利用随机佩特里网(StochasticPetriNets)为数据中心的能耗管理进行了理论建模和分析,提出了开销感知的作业调度算法[37].在新能源的应用上,林闯教授研究了将太阳和风能在储能设备帮助下加入电网的可行性.为了解决能量供应和需求都不稳定的问题,他们应用随机网络演算(StochasticNetworkCalculus)分析了各种新能源配置条件下能量供应的可靠性[38].清华大学的李丹老师对比分析了数据中心网络的能效[39],提出了数据中心网络中能耗感知的路由算法[40].中国科学院计算技术研究所的刘志勇研究员设计了基于离散开销函数的网络路由算法[41].在科研项目上,2011年清华大学林闯教授和中国科学院计算技术研究所刘志勇研究员主持负责了国家自然科学基金重大国际合作项目“绿色网络———降低网络能耗的理论与技术”.同年上海交通大学陈贵海教授联合清华大学和华中科技大学负责研究自然基金重点项目“大型数据中心的低能耗可扩展理论与关键技术”.浙江大学冯培恩教授在2012年两会提交的《关于加快发展云计算的提案》中提出大力推广云计算中心对新能源的采用.国家“十二五”科技发展规划大力培育和发展以节能环保、新一代信息技术、新能源为代表的战略性新兴产业.6总结与展望本文综述了新能源在云计算数据中心的应用机Page15制和策略.本文首先分析了新能源在数据中心中应用的必要性、挑战和途径,然后分类对比了最新相关研究成果.本文从新能源模型和预测机制、数据中心能源配额规划、数据中心内作业调度和数据中心间负载均衡4个关键方面对研究现状进行总结.其中,新能源的发电模型刻画了产电量与各种相关因素的关系,这不但可以指导预测模型选择参数,也可以指导新能源的配额规划.新能源预测机制是数据中心应用不稳定新能源的重要一环,其预测的准确性会影响资源调度的合理性.作业调度和负载均衡是实现数据中心内部及多区域数据中心之间充分利用新能源的有效机制.这4个方面关系密切,相互衔接,构成了云计算数据中心采用新能源的整体解决方案.目前,新能源在数据中心的应用还处于起步阶段,相关研究成果主要集中在近3年.很多问题和难点都需要进一步的研究.具体总结如下:(1)多种能源协同组合.目前研究主要针对风能、太阳能,均需要大量的土地和资金.如何提高产电效率并减少费用是能源界面临的重要挑战.沼气、生物质能等可再生能源也可以为数据中心供电.数据中心购买REC、PPA和碳补偿的机制尚不成熟.数据中心运营商如何因地制宜地选择最佳能源组合是首先面临的问题.(2)新能源建设规划.依据数据中心负载特性来估算能耗需求,从而决策采用多少新能源.从技术资源、投资回报率、社会效应等多方面考虑,选取最适合的新能源电站建设方案.(3)适量的储能设备.新能源的不稳定性严重阻碍了新能源的广泛应用.依据新能源发电量、数据中心负载、储能设备资金投入等多方面因素,选择合适大小和规模的储能设备来储存新能源的产电量,能够在需要时释放.这是利用新能源的关键措施之一.(4)数据中心能耗需求与新能源供应相匹配.由于数据中心负载和新能源供应都是不稳定的,负载能耗需求的波动对新能源的利用有什么影响,新能源的间歇性对数据中心服务质量有什么影响,如何匹配需求与供应都是需要解决的实际问题.(5)智能准确的可用新能源预测机制.可用的新能源电量影响到数据中心作业调度及资源分配决策.准确的预测机制是自适应作业调度的关键.(6)作业调度的多目标优化.为了充分利用不稳定新能源,调度作业来匹配能源供应需要考虑作业类型、作业服务质量SLA和QoS、作业状态一致性、服务稳定性和可靠性等.(7)请求分发的数据可访问性.在多个数据中心之间分发请求,将不同用户映射到不同的数据中心,而不同的数据中心具有不同的数据库.仅仅依据新能源或者碳排放来决策分发机制,可能会导致请求被分发到不具有要访问数据的数据中心.分发机制应该综合考虑用户、数据中心和数据的对应关系.(8)由于数据中心采用新能源加传统电网的供电方式,因此,新能源与电网之间如何切换、切换频率大小、切换开销大小、如何协同给数据中心供电都是这种混合供电方案需要回答的难题.(9)新能源数据中心的评价标准.数据中心如果仅仅考虑PUE标准,就会忽视碳排放和性能.而新制定的CUE标准也只是考虑碳排放,而没有涉及开销和性能.此外,Performance/Watt或者Dollar/Watt指标分别评价的是数据中心单位能耗所提供的性能和收益.目前,尚没有全面的、多维度综合考虑的新型数据中心评价标准.
