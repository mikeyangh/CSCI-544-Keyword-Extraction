Page1布料动画方法研究进展及问题石敏1),2),3)毛天露2)夏时洪2)王兆其2)1)(华北电力大学控制与计算机工程学院北京102206)2)(中国科学院计算技术研究所北京100190)3)(中国科学院研究生院北京100049)摘要布料动画技术是计算机动画领域的热点研究方向,可以广泛应用于数字娱乐、三维游戏以及服装工业等多个领域.布料动画技术最为核心的研究问题是布料动画方法,其旨在构建动画模型,驱动布料产生形变,继而生成连续动画.好的布料动画方法是保证富有动感、且视觉逼真的布料动画生成的根本因素.近年,由于实际应用对布料动画模拟逼真性与实时性等需求的迫切增长,许多新技术和新方法应运而生.文中重点围绕布料动画方法的研究进展进行介绍.首先在对国内外研究工作进行全面分析与总结的基础上,根据生成布料动画所采用的技术不同,将其分为几何法、物理法、混合法、自适应网格法、约束动力学法、实例数据法、并行计算法等7大类,详细阐述每一类方法的原理及特点,并重点介绍每类方法近期出现的新工作;其次,对各类方法的优缺点及产业影响进行对照分析;最后,结合实际应用需求,针对目前工作中存在的不足,提出一些可继续深入研究的问题,并指出布料动画技术研究与应用的前景方向.关键词计算机图形学;布料动画;服装动画;材质模拟;虚拟现实1引言布料动画技术,即模拟虚拟场景中布料在各种自然力作用下随时间产生持续形变的计算机动画技术.作为20世纪80年代兴起的一门新技术,布料动画技术的发展一直紧密围绕相关领域的实际需求,并逐渐应用于电影电视、游戏娱乐以及服装工业等领域.三维数字电影中,布料动画技术作为增强虚拟角色视觉逼真性的一种必要技术手段,能够驱动服装模型跟随角色的肢体运动产生逼真的、服装所特有的动态效果,使得角色整体具有非常细腻、真实的视觉效果.三维游戏中,漫步于场景中的着装虚拟角色,更进一步提高了虚拟场景的“沉浸度”,使游戏玩家可以体会到真正的“身临其境”之感.服装工业中,以布料动画技术为基础的三维服装CAD和虚拟试衣技术,提供了一种全新的服装设计与展示模式,它克服了传统设计模式难于在短时间内生产出合体服装的困难,可以使试衣者在产品成形之前体验新衣的合体程度,以虚拟的手段展现人体穿着特定服装后的动态效果,从而辅助设计师设计或顾客挑选到满意的服装.布料动画技术在相关领域的成功应用,使其在学术领域中得到了广泛关注和进一步深入的研究.布料动画技术的两个核心问题是布料动画方法与碰撞处理方法,涉及到数学、物理学、材料学、艺术、计算机视觉、图形学等多学科领域知识,其最终目标是生成富有动感且视觉逼真的实时布料变形与运动.其中,布料动画方法旨在构建动画模型,驱动布料产生形变,继而生成连续的动画;而碰撞处理方法,则力求建立合理的碰撞检测-响应机制,以避免布料与环境以及布料自身之间发生不合理的穿透,从而保证其正确的位置关系,获取视觉效果逼真的动画结果.布料动画技术至今已经过近30年的发展,早期的研究通常将布料看作简单几何模型或弹性力学模型,模拟通常局限于布料悬垂等简单运动.近年来,随着虚拟现实及计算机动画技术的快速发展,应用领域对模拟逼真人体服装动画的需求日益迫切,这对布料动画系统的真实性、有效性及稳定性等各方面也相应提出了更高的要求,并促使了许多新技术和新方法的产生.国外的很多研究机构,如瑞士日内瓦大学MIRALab实验室、CMU机器人研究所、首尔国立大学图形和媒体实验室等,已对布料动画技术进行了多年研究,并已将多项重要的研究成果产业化.与之相比,国内的研究历史相对较短,主要研究机构包括浙江大学CAD&CG国家重点实验室、中山大学、东华大学、中国科学院自动化研究所以及中国科学院计算技术研究所等,最近也探索出一些有价值的研究成果.所有这些研究成果已在ACMSiggraph、SCA、Eurographics、PacificGraphics等著名国际会议以及ACMTransactionsonGraphics、IEEETransac-tionsonVisualizationandComputerGraphics、IEEEComputerGraphicsandApplications、ComputerGraphicsForum、TheVisualComputer等国际期刊上进行了报道,其代表的如文献[1-4].目前,已有一些文献对布料动画技术进行了综述[5-6],但都侧重于早期研究工作的总结,缺乏对近期新工作和新方法的介绍,以至限制了其相关研究.由于布料动画方法是布料动画技术中最为根本的核心问题,因此本文重点围绕布料动画方法进行介绍.本文在对国内外研究工作进行全面分析与总结的基础上,根据生成动画所采用的技术不同,将布料动画方法分为几何法、物理法、混合法、自适应网格法、约束动力学法、实例数据法、并行计算法等7大类.首先详细阐述每一类方法的原理及特点,并重点介绍每类方法中近期出现的新工作;其次,通过列表对照了各类方法的优缺点及其产业化分析;最后,结合实际应用需求,针对目前工作中存在的不足,提出一些未来挑战性的问题,并指出布料动画技术研究与应用的前景方向.2布料动画方法所谓布料动画方法,即构建布料动画模型,描述布料在内外力作用下的状态变化,是布料动画中最基本、同时也是最为关键的核心问题[7].几何法和物理法是经典的两种布料动画方法,它们都产生于布料动画发展初期.到了发展中期,为了同时保持物理法和几何法的优点,部分研究者将两者进行了有机结合,形成混合法.最近几年,传统方法不断与新技术融合应用,演化出许多新的布料动画方法.本文按照生成动画所采用的技术不同,从几何法、物理法、混合法、自适应网格法、约束动力学法、实例数据法、并行计算法等7个方面进行分类介绍,并对各类方法的优缺点进行对照分析.表1列出了各类方法的技术目标与发展进程.Page3表1各类方法的发展进程分类技术目标几何法高效率悬链线模型[8]空心圆柱体衣袖模型[9]全局-局部混合模型[25]物理法逼真性混合法效率与自适应网格法效率与约束动力学法稳定性实例数据法逼真性并行计算法高效率2.1几何法几何法,仅考虑布料的几何属性,利用悬链线、样条曲线等几何变形方法模拟布料局部或服装整体的造型.最早提出的几何模型是悬链线模型[8],通过计算两个约束点之间的悬链线描述曲面形状,然后通过松弛迭代对曲面进行光顺,以描述布料的悬垂状态.之后,Agui等人[9]用一系列空心圆柱体模拟了弯曲的衣袖,而Ng等人[10]则建立了交叉截面模型表示服装,并通过建立正弦曲线来模拟服装褶皱.早期的纯几何模型通常较为简单、粗糙,因此很难模拟逼真连贯的布料变形动画.近年来,随着柔体变形技术的不断发展,以及工业应用领域对布料动画实时性和稳定性的迫切需求,基于几何方法的布料动画模拟呈现出新的优势.Stumpp[11]提出一种自适应形状匹配方法模拟布料变形,模拟过程分为两个阶段:在预处理阶段,将网发展进程格分割为一组重叠的簇集;在模拟阶段,首先计算质点在重力作用下的无约束位置,其次将之与刚性变换之后的簇集进行匹配,确定其目标位置及偏移,并将质点变换到目标位置.该方法在簇集规模不是很大的情况下,可以保持较高的计算效率.Chen等人[12]受拉普拉斯变换启发,提出一种基于网格插值的纯几何方法,并采用能量最小化方法求解布料或服装的最终悬垂状态.该方法避免了布料动画的不稳定性问题,并可适用于交互性要求比较高的环境.Rohmer等人[13]利用几何方法模拟了服装面上的褶皱.首先以平面拉伸张量为引导确定褶皱产生区域,并通过定义参数化曲线模拟褶皱,然后基于上一时刻的褶皱曲线和当前时刻的拉伸分布计算当前时刻的褶皱曲线,最后采用隐式变形器计算最终精化的变形平面.图1为Rohmer方法的过程和实验结果.Page4图1增广粗网格的布料动画褶皱[13]由于几何法不考虑布料本身的物理特性,无需求解复杂的动力学方程组,只是通过建立一些经验方程表示布料的几何特征,因此计算稳定,生成动画的效率也很高.但几何法的固有特性,使得它模拟的褶皱比真实效果更加规则、均匀,且比较适合于模拟布料静止变形状态(如布料悬垂效果),对于合成的连续布料动画缺乏动感.2.2物理法物理法,即考虑布料在真实世界中的各种物理属性,建立物理受力模型及标准动力学方程或拉格朗日方程,通过受力分析,求解各时刻的布料变形状态.主要包括物理受力模型、模型参数学习及数值求解技术3方面内容.(1)物理受力模型在布料动画中,通常有两类物理模型:连续体模型[14-16]和离散质点模型[18-19].连续体模型,即将布料看作分片连续的物体,运图2基于精确非线性建模的布料动画[1]连续体模型可以构建布料应变-应力之间复杂的非线性关系,真实地反映不同布料的材质特性,从而保证生成动画效果的逼真性.这类技术存在的主要问题是:为了模拟布料材质的非线性特征,通常需要构建非线性的布料物理模型,且需要采用有限元或有限差分方法进行数值求解,因此,计算复杂性与计算代价通常很高,系统性能难于保证.离散质点模型,将布料看作一组离散质点的集合,布料的力学行为通过质点之间的相互作用力进用连续体力学理论进行运动状态求解.Etzmuss等人[16]基于连续体理论推导应变-应力模型,对其进行线性化处理,采用有限差分法求解偏微分方程,并通过修改应力张量中非对角线元素建模布料的横向收缩变形,模拟了布料的各向异性特征.Volino[1]认为基于连续体理论构建的线性应变-应力模型是布料材质实际行为的粗糙近似,为此,作者基于Green-Lagrange应变张量推导受力模型,得到经纬向应变和应变率二次函数形式,并进一步进行非线性计算,以准确刻画布料物理真实的材质特性.利用该方法可以有效模拟超弹性St.Venant-Kirchhoff布料材质,也支持较精确的非线性和各向异性布料建模,实验结果如图2所示.Thomaszewski等人[17]提出了一种基于正弦细分有限元的一致弯曲模型,利用该模型可以有效重构不同材质或不同精度布料的特征化弯曲变形行为,促进了不同材质布料弯曲变形逼真性的进一步提高.行描述,布料面的形状通过邻接质点之间的几何形状来表示.最近的许多研究工作,在深入分析织物变形特征和稳定性的基础上,发展了经典质点模型,提升了布料变形的模拟效果和稳定性.Choi等人[20]分析认为柔性布料在瞬时受压之后,能够很快经过不稳定状态,进入到稳定的弯曲状态.在此理论分析基础上,Choi等人扩展了Provot质点弹簧模型,将压缩和弯曲受力进行了统一,用圆弧近似估算弯曲稳定后的变形曲率,并进一步推导了弯曲受力.在Page5Choi的工作基础上,Zhou等人[3]考虑了布料大旋转变形中可能导致的震荡问题,对模型进行了修正,将质点平移和质点旋转运动进行分离,分别推导了质点转动向心力和平移弹簧拉伸力,保证了布料大旋转运动的稳定性.后来,Zhou又进一步区分了结构弯曲变形和剪切弯曲变形,揭示了两者不同的生成原理:结构弯曲变形是由压缩产生的,而剪切弯曲变形是由纺线之间的挤压导致的.在此基础上,将一般剪切变形和剪切弯曲进行了统一,从而有效模拟了布料真实的剪切行为;同时,Zhou等人[21-22]对布料弯曲变形中的刚度变化也进行了深入分析,基于薄壳理论建立了物理真实的动态刚度结构弯曲模型,并采用修正的非线性质点弹簧模型和自适应时间步长非线性数值求解方法进行了实施,最终得到了物理真实的布料动画效果.除上述经典质点模型的发展之外,对于特殊材质和特殊环境下布料的建模,也有了突破性进展.一项工作是Kaldor等人[23]提出的基于B样条曲线的质点模型,促进了具有复杂纺线结构布料模型的发展;另一项工作是Ozgen等人[24]提出的分数阶质点模型,通过分数阶微积分的使用模拟了水下布料运动.与连续体模型相比,离散质点模型采用相对简洁的力学形式描述了布料变形的动力学特性,计算复杂性相对较低,是实时交互性应用中的主流方法.(2)模型参数学习利用物理方法模拟布料动画时,为了保证模型的有效性和仿真结果的真实性,通常需要设置一些参数.早期获取模型参数的手段,或者是利用织物力学性能测量装置进行测量[18],或者从三维静态扫描数据进行学习[45],方法都有很大局限性.近年来,基于视频捕获或者运动捕获数据的学习方法,逐渐被用于布料模型的参数学习中.Bhat等人[46]对布料上褶皱进行量化描述和对比,通过分析布料运动视频中褶皱信息,利用模拟退火方法,优化得到包括各种阻尼系数在内的全部模型参数.不足之处是,视频数据丢失了部分运动细节,使得学习得到的参数准确性受到影响.Charfi等人[47]在布料运动模型参数学习中,首次利用了运动捕获数据,通过捕获布料自由落体的过程,利用迭代最小化技术学习了布料运动模型中的阻尼参数.该方法的不足是:仅得到60帧左右的有效数据,无法使优化过程全局收敛.Mao等人[48]提出了一种基于实例数据的布料运动动力学模型参数学习方法,通过运动捕获设备Vicon获取实例数据,并将仿真数据与实例数据对齐、比较,利用遗传算法逐步进化,学习得到了布料运动模型的全部参数.最近,Kunitomo等人[49]同样采用Vicon设备获取实例数据,并定义了与布料形状、速度以及弯曲曲率相关的误差函数,通过最小化误差函数的优化计算确定布料拉伸刚度、弯曲刚度、阻尼系数、密度以及厚度五种参数.该方法的最大优点是不依赖于特定的布料模拟器,可适用性好.基于视频捕获或运动捕获数据进行参数学习,数据来源准确可靠,且与静态扫描数据相比,动态采集的运动数据隐含了更多的运动规律,因此,可以提取出更为精确的模型参数.目前,该类方法存在的不足之处是:通常都以线性模型为基础,很难直接套用于非线性模型的参数学习中,而获取的参数也并不适用于非线性的布料模型.(3)数值求解技术基于物理方法的布料动画,本质上需要求解动力学方程,即根据布料质点所受内外力,求得质点速度及其位置.常用的3种数值求解技术是:显式积分、隐式积分和混合积分.最简单的积分方法当属显示欧拉法[19],它形式简洁、计算速度快,但精度和稳定性相对较差,多用于早期布料动画模拟中.显式中值法[50]和四阶Runge-Kutt法[51]通过在每一步计算中进行多次推导,获得了更高的运算精度.但所有的显示积分方法都具有一个共同的缺陷:由于在计算下一时刻状态时只考虑系统前面时刻的信息,因此其稳定性受到时间步长的限制,当步长超过临界值时,算法将会失稳.与之相比,隐式积分法[52-54]在计算下一时刻状态时考虑整个系统的信息,因此在大步长动画模拟中具有更好的稳定性,是近年来布料动画中较为流行的一种数值方法.但隐式积分仍然存在不足:积分过程中需要求解大规模线性方程组,计算较为复杂.结合上述两种方法优点的混合积分方法[55-56],将系统中的刚性部分采用隐式积分计算,以保持稳定性,系统中的非刚性部分采用显式积分计算,以降低数值计算开销,从而获取布料动画稳定性和计算效率的折中.基于物理的方法,通过建立布料受力模型来计算其变形与动画,是模拟逼真布料动画最为有效的技术手段.该方法的难点在于:柔性布料在现实世界中的变形复杂多样,几乎无法为其建立完全精确的物理模型,而且,过度复杂的物理模型也很难进行数值求解.为此,通常需要对复杂的布料模型进行有效简Page6化.简化模型不仅需要保持布料主要的物理特性及其关键变形特征,而且能够进行有效可行的数值求解.2.3混合法混合法,以实时性为研究目标,将物理法和几何法有机地结合在一起,在不降低逼真性的前提下,提高计算效率.一种解决方案是采用全局和局部混合的策略[25],利用物理的方法对服装运动的总体趋势进行模拟,再利用几何的方法对模型进行平滑处理或生成褶皱等局部细节;另外一种是采用区域混合的策略[57],根据一定的准则对服装模型进行区域分割,然后分区域进行动画建模,在保证实时计算前提下,尽可能提高动画的视觉效果.混合法作为保持布料动画效率和效果的一种折中方式,近年来被不断地发展和应用.Kand等人[26]提出一种全局-局部的混合法模拟褶皱裙摆的变形.该方法将裙摆悬垂分解为大范围变形和局部褶皱,图3基于变形映射的新颖混合方法[28]混合法通过物理和几何方法的有效结合,能够显著提高服装动画模拟效率,但由于服装不同区域采用的运动驱动技术不同,容易造成变形的不平滑.因此,保持不同区域之间的变形平滑与连续是这类方法需要克服的难点问题.2.4自适应网格法自适应网格法,是动画效率和效果的另外一种折中解决方案.通过在发生较多弯曲变形、有丰富褶皱的区域采用高密度网格,其它区域采用相对稀疏的网格,在保持一定动画效果的前提下,提高动画的制作效率.建立自适应网格模型,通常采用的方法是,动态计算顶点(或面片)的曲率,依据手工设定的阈值,确定不同区域网格当前所需的精化程度,并进行迭代精化;在精化过程中,通过对不同层质点质量和受力大范围变形通过力学方程确定,局部细节褶皱通过求解简化椭圆方程来确定,然后将两种变形进行叠加,模拟裙摆的悬垂运动.由于椭圆方程描述的变形比较规则,因此该方法可适用于较为规则的裙摆变形.毛天露等人[27]对早期Corder的混合机制进行了改进,利用动画实例数据,基于服装运动与人体运动的相关性对服装模型进行更加合理的区域划分,对于容易产生碰撞的服装区域基于皮肤变形算子进行驱动,对于较少产生碰撞的服装区域采用物理方法模拟,从而提高了动画效率和动画稳定性.Feng等人[28]提出了一种基于变形映射的新颖混合方法.该方法首先基于布料模型中提取出来的旋转不变量,学习低维粗网格和高维精网格变形之间的非线性关系,然后采用动力学方法计算粗网格布料模型的变形,最后将该变形映射到高维布料模型上.基于这一方法,获得了实时有效的服装动画效果,如图3所示.设置约束,来保证系统稳定的动力学特性.大量的研究工作[29,58-59]采用了此类精化方法,并模拟了布料或服装的动画.比较新颖的一种建模方法是,Lee等人[30]提出的基于逆向简化思想的自适应网格模型.首先建立高精度布料模型,并根据布料变形程度将其分割为两类区域:动态平滑区域和动态褶皱区域;然后通过简化动态平滑区域降低线性系统规模,并求解简化的线性系统;最后通过线性插值重构系统原始解,并进行误差修正.该方法适用于LOOP曲面细分构造的初始高精度模型,当选用边分解精化策略构造初始模型时,产生的低频误差不易消除.自适应网格布料动画方法,能够通过建立动态自适应的多精度网格模型,保持动画逼真性和较高的动画效率.其涉及的研究重点有两方面:首先,建立布料的多精度几何模型和动力学模型,并研究其Page7数值求解方法,即解决多精度布料动画的可计算问题.其次,估算布料面上可能出现的高变形区域,并对该区域网格进行动态精化,即解决多精度网格模型的动态自适应问题,以实现计算资源的合理有效利用.在构建多精度网格模型时,经常需要处理不同精度区域边界的畸变问题,以保证最终变形动画的逼真度.2.5约束动力学法约束动力学法,即将几何约束以拉格朗日乘子和约束力的形式增加到动力学系统中,构建约束动力学方程,并通过求解该方程得到布料最终变形状态.约束动力学方程形式如下:这里,q、犕、犉A分别表示系统状态、质量矩阵以及系统受力,(q,t)是约束矢量,λ和T日乘子和约束梯度.在布料动画中,通常可以将某些刚性成分定义图4基于隐式约束处理高速度、大步长布料动画模拟中的碰撞问题[32]基于约束动力学的变形处理方法,常常通过迭代进行求解:首先计算无约束受力下的目标状态,然后求λ及相应的约束力T生的偏移,最后将该偏移增加到系统中,获得约束下的系统目标状态.它本质上是一种全局约束的方法,通过对整个布料系统进行整体约束来保持系统稳定,在一定程度上有效避免了局部不收敛问题.使用该方法的难点在于:约束模型和约束个数通常很难控制,不合理的约束模型和过约束控制将导致“刚性”动画,甚至导致不可满足约束的严重病态问题,而不足的约束控制容易导致其它失真的变形效果.此外,这类方法通常需要对大规模线性方程组进行求解,由此增加系统的开销.因此,如何定义合理的约束并将其与布料模型、碰撞处理进行有机结合,保证系统稳定性,同时设计有效的数值求解方法,降低求解复杂性,都是需要考虑的关键问题.2.6实例数据法实例数据法,即基于捕获的视频数据或三维运为约束,以在模拟刚性变形的同时保持系统稳定性.典型的一项工作是Goldenthal等人[31]提出的无拉伸布料变形方法,将布料拉伸定义为约束,并通过投影迭代方法求解约束动力学方程,从而有效解决了布料动画过程中的过度拉伸问题.Ye[4]基于冲量的方法建立了无拉伸约束,并将其与碰撞约束同时增加到布料动力学系统中,有效模拟了布料无拉伸变形运动.后来,Ye等人[60]又巧妙地将约束线性系统变换为可以直接求解的非奇异无约束系统,并提出了一种直接-迭代的混合求解方法,获取了更高的求解速度.Otaduy等人[32]将布料动画中的碰撞定义为约束,通过约束动力学方法有效处理了高速度、大步长布料动画模拟中的碰撞问题,图4给出了实验结果.此外,一些研究工作通过定义弯曲、拉伸等多种类型约束,实现了完全基于约束的布料变形求解器[2,33],与基于弹性模型的布料动画模拟器相比,具有更好的稳定性,能够支持游戏以及其它更广泛的应用.动数据,重构服装模型及其运动,或者基于已有动画实例数据,合成新的动画.随着运动捕获技术及基于实例的动画合成技术在计算机动画领域的快速发展,部分研究者开始尝试在布料动画中引入此方法,对布料动画的重构及其数据重用问题进行了初步研究和探讨,获得了一些研究成果.一些工作以动画重构为研究重点,基于捕获的视频数据或三维运动数据,重构服装模型及其运动.White等人[34]在实际服装上打印细致的彩色格子作为特征标识,利用这些特征标识从视频数据中重构服装模型与运动过程.在模型重构过程中,利用Sumner等人[61]提出的变形梯度方法计算捕获中丢失的信息,并利用MeshIK技术重构服装面片,从而在实例数据基础上实现服装模型的驱动与动画合成,如图5所示.Bradley等人[35]则利用16个环形摄像机和特殊光照环境,无需设置服装表面特征标识(mark),在人体运动较为缓慢且肢体动作必须舒展的情况下,能够顺利重构服装的三维几何模型与Page8运动过程,如图6所示.Popa等人[36]通过视频捕获数据重构了低频的服装变形和运动,然后从视频中图5有标识服装运动捕获与合成结果[34]图6无标识服装运动捕获与合成结果[35]通过运动捕获技术获取的实例数据通常真实有效,可靠性很高,为逼真服装动画合成提供了保障.但经常也会由于运动过程中的遮挡造成信息丢失,使得后续的“补漏”工作量巨大.为此,设计合理的运动模式以避免过度遮挡以及设计有效的“补漏”方法都是这类工作中需要考虑的关键问题.另外一些工作以动画数据重用为研究重点,基于已有的布料模拟器获取动画实例数据,在此基础上合成新的动画.Sumner等人[37]提出了一种基于网格逆向运动学(MeshIK)原理的变形体运动模拟方法.首先采用布料模拟器获取有意义的变形网格图7基于实例数据的布料动画褶皱合成[39]实例数据重用技术,能够基于有限的动画数据,合成类型丰富的多种动画,是近几年服装动画合成技术的一种新趋势.其面临的难点问题是:服装模型通常是高维模型,从已有大量的动画数据中合成新动画,通常需要较高的时间代价.因此,合理选择较少典型的实例数据,并采用有效合理的方法进行模型降维,是保证该方法有效可行的关键.2.7并行计算法并行计算法,即基于并行体系结构或多核处理提取褶皱信息,将其以二次高频运动叠加的方法加入服装模型中,模拟了动态变化的服装褶皱.实例,并用变形梯度特征向量表示这些数据,然后通过实例特征向量的非线性融合构建新姿态.该方法的不足是:复杂变形合成需要的典型实例数据较难提取;此外,太多的实例数据将会降低系统性能.deAguiar等人[38]提出了一种增广线性动力学系统的新方法,能够快速合成稳定的服装动画,支持实时性群体服装动画的模拟.Wang等人[39]则利用大量实例数据,模拟了多褶皱的紧身衣动画.该方法首先将关节影响的服装不同区域的褶皱进行预计算、并存储,其次根据人体关节变形姿态,通过实例数据插值合成新类型褶皱.图7所示为实验结果.系统等多种计算资源构建布料动画的并行计算模型,以加速动画模拟计算,提高动画效率.并行计算法是适应于实际应用中迫切增长的实时性需求而逐步发展起来的.Gutiérrez等人[40]报告了NUMA上的并行布料模拟方法,但由于是基于共享地址空间的并行计算机实现,因此扩展性不好.Zara等人[41]提出了一种基于PC集群的并行布料动画模拟器.该方法采用负载均衡的动态调度策略,将布料质点系统动态Page9分割为不同的“块”,并将质点位置、速度、系数矩阵等作相应的分解;对于块内的本地作用力,通过一个计算模式进行处理,而对于块间的相互作用力,通过并行任务进行处理;最后采用共轭梯度法进行隐式积分并行求解.方法的最大贡献在于:提出了一种基于对象空间结构的物理模拟问题的分解策略,以及基于共轭梯度法的隐式积分并行计算方案.Keckeisen等人[42]同样提出基于PC集群的布料并行模拟方法.该方法利用图分解技术进行数据分割,以保持处理器之图8高精度布料动画的并行计算[44]基于并行计算法的布料动画模拟,多用于解决布料动画中的数值计算或碰撞检测两大技术瓶颈问题,通常需要的运行成本较高,但也能够有效提高计算效率,促使实时布料动画的快速向前发展,使得高精度布料仿真更加可行.并行计算法的关键问题是:构建有效的布料并行计算模型,合理、方便地分割任务,使得不同任务之间的通讯量保持最小化,从而实现系统效率的最大提升.表2各类方法的优缺点对照及应用分析各类方法几何法优点:计算稳定,动画效率高物理法优点:动画逼真度高混合法优点:效果较逼真,动画效率较高自适应网格法优点:效果较逼真,动画效率较高约束动力学法优点:计算稳定、有效实例数据法优点:可重用数据并行计算法优点:计算效率高缺点:不同区域交界处容易畸变需要较高效率和较好效果的应用影视动画、游戏娱乐缺点:不同区域边界处容易畸变需要较高效率和较好效果的应用影视动画、游戏娱乐缺点:较难获取有效实例数据需要快速合成多种动画的应用影视动画、游戏娱乐3未来挑战与研究展望布料动画的两大目标是:真实性与实时性.过去的几十年,研究者们围绕着这两个目标开展了大量间通讯量的最小化,有效解决了布料建模的并行计算问题.之后,该研究组进一步研究布料碰撞的并行技术,提出了基于完全动态问题分解的任务并行化方法[43],有效解决了高度不规则布料碰撞的并行计算问题.最近,Selle等人[44]提出了一种精确的布料-物体摩擦力模型以及基于历史数据的碰撞/响应框架,并基于分布式内存体系结构进行了碰撞处理的并行计算.利用该方法模拟具有200万个三角形网格的高精度布料动画,获得了相当高的真实感,如图8所示.2.8各类方法比较上述7类方法,由于各自的技术特点和技术目标不同,因此其优缺点和可适用的场景也不尽相同.各类方法中新技术的出现,都在一定程度上促进了有效性、实时性、稳定性等一个或多个问题的解决,同时推进了布料动画技术的产业化发展进程.表2对照列出了各类方法的优缺点及其产业分析.适用场景的研究工作,并获取了一些研究成果.虽然目前的布料动画在效果和效率上都有了显著提高,但依然很难满足更广泛的应用需求.两个富有挑战性的应用是:基于布料动画技术的虚拟试衣与影视娱乐中复杂服装的动画制作.在未来几年,可分别结合各自应Page10用的需求,从若干方面继续开展深入的研究和探讨.3.1虚拟试衣虚拟试衣可通过展示试衣者的虚拟穿着效果,辅助其挑选到满意适身的服装.布料动画技术是虚拟试衣的关键技术之一,应支持以下功能:①模拟不同体型虚拟人着装的逼真动画效果;②模拟不同材质服装的多样化动画效果;③实时的服装动画模拟.围绕这些功能,针对现有技术存在的局限性,未来可开展以下几方面的研究工作.(1)建立精确的非线性布料模型通常,同一件服装穿着在不同体型的人体上,其变形程度和动态效果并不完全相同.由于布料变形主要由其受力所决定,因此,分析真实的布料变形和受力特征、并据此构建准确的布料变形-受力关系模型,是模拟不同人体真实着装效果的必要条件.真实的布料除拉伸和弯曲变形之外,还具有迟滞、横向收缩等更为复杂的变形特性,其受力不仅与变形程度相关,还要受到纺线变形方向的影响.已有的线性弹性模型或者简单的非线性模型,很难对布料这种各向异性且高度非线性的变形特征进行准确建模.因此,考虑构建基于连续介质理论的可计算高次非线性布料模型将会是一种更为有效的手段.它有望重构精确的服装变形行为,并可进一步模拟不同体型人体着装的逼真动画效果.(2)获取准确的布料模型参数现实生活中的服装布料材质通常具有上百种,其穿着的动态效果也千差万别;即使同一种布料材质,编织方式的不同也会影响其细节的动态效果.为此,需要在虚拟试衣系统中为物理动画模型设置不同的模型参数值,以逼真地反映由于面料材质或编织方式导致的效果差异.一种可行的方法是将布料的真实运动和模拟运动进行对照分析,从中学习出模型参数.已有的相关工作通常以线性模型为基础进行参数学习,并且只考虑了少数几种参数类型,参数的适用性极其有限,学习结果误差较大.为此,在下一步研究中,可考虑非线性布料模型的参数学习问题,并可考虑湿度、迟滞等参数对模型精确性的影响,通过将其加入系统,提高布料模拟的精度,以便更精确地模拟不同材质布料的非线性变形运动,从而真实地展现不同材质服装的多样化动态效果.(3)构建快速的布料并行计算模型虚拟试衣要求快速展现物理真实的服装动画效果.为此,一方面需要对服装进行高精度建模,另一方面还需进行快速准确的服装动画计算.为解决这一矛盾,考虑基于并行计算技术实现布料动画模拟的加速,是一种有效可行的方法.已有的并行布料模拟方法,主要基于CPU的“中央处理”进行计算.未来几年,随着图形处理器的功能越来越强大,基于GPU的高性能计算必将成为主流.因此,考虑基于CUDA构建布料动画的并行计算模型,实现动画模拟的加速,有望实现完全实时的逼真服装动画模拟.3.2影视娱乐中的复杂服装动画制作在三维影视动画以及游戏娱乐中,虽然已有一些成熟的布料动画制作软件获得了成功的应用,但在复杂服装动画制作方面,仍然有一些挑战性的问题亟待解决.(1)构建逼真稳定的布料动画模型现实生活中的大部分布料具有面内“弱拉伸”的刚性特征,因此,构建无拉伸的布料动画模型,是生成逼真服装动画的必要保证.一种有效的解决方法是,将布料中的刚性成分定义为约束,以约束力的形式增加到布料动力学系统中.已有的相关工作,在定义约束时只考虑布料宏观的几何变形特征,忽略了其物理特性,由此导致最终生成的服装动画效果不够逼真.针对此问题,可考虑从布料材质特性入手,在分析布料变形力学行为的基础上,推导物理真实的约束模型,并进一步构建有效、稳定的布料约束动力学系统,以保证最终服装动画模拟的逼真性和稳定性.(2)构建逼真的多层服装动画模型实际生活中,人体通常都会覆盖两层以上的服装,特别是在冬季.已有的服装动画方法通常将内层服装直接附着在皮肤上,并不进行复杂的仿真模拟计算,大大降低了整体动画效果的逼真性.分析可知,在多层服装运动中,外层和内层服装不断接触并产生摩擦力,继而制约其变形行为.这种变形约束作用与体型、相接触的布料材质等多种因素紧密相关.为此,构建多层服装的动画模型,不仅需要考虑外层服装的物理模型,还需考虑内-外层服装之间的摩擦力模型,以保证最终动画结果的逼真性.(3)构建实时的群体服装动画模型随着3D技术的发展,动画作品中越来越多地出现角色规模几十个以上的群体场景.相应于此,群体服装动画模拟成为一个极具挑战性的新问题.由于人体运动及其着装的多样化,相应的服装运动也千差万别,很难为每个服装模型构建单独的动画模型.基于实例数据合成的方法为该问题提供了一种解决思路.但存在的问题是,已有简单的线性融合技Page11术很难保证新动画的逼真性,而非线性融合技术又将大大降低系统性能.线性动力学系统,在不降低计算效率的同时,可以一定程度上保持系统的动力学特性,有望保证新生成服装动画的动态逼真性.因此,可考虑基于线性动力学系统构建群体服装动画模型,并进一步实现多样化的群体服装动画模拟.4结束语布料动画作为计算机动画领域的重要研究内容,神奇而充满魅力.它涉及的研究内容非常丰富,跨越的研究领域非常广泛,其研究手段也极其多样化,最终目标是生成富有动感而逼真实时的布料变形与运动.本文主要围绕布料动画方法,对近年来的主要工作进行了分类介绍,阐述了各自方法的原理和优缺点.同时,结合实际应用需求,针对目前工作中存在的不足,提出一些未来挑战性的问题,这些问题的解决,将促使生成的布料动画质量和动画效率不断提高,从而进一步推动布料动画在各领域的深入推广与应用.
