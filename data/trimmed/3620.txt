Page1一种用于多信道AdHoc网络MAC协议的匹配策略宋煜1),2)左德承1)杨孝宗1)向琳1)1)(哈尔滨工业大学计算机学院哈尔滨150001)2)(中国人民解放军第65047部队沈阳110001)摘要在adhoc网络中,使用多个正交信道,并行地传输数据是一种提高网络吞吐率,降低数据时延的有效手段.目前多广播域类协议,由于不需要额外的硬件,同时也不需要在网络结点之间建立时间同步机制,比其他多信道MAC协议具备更好的灵活性.经过研究发现,传递广播数据包,将加重多广播域协议解决死锁、发送等待和匹配效率等问题的协议开销,从而制约adhoc网络的实际性能.采用支持广播/多播的匹配策略MAMR(MatchingAl-gorithmforMultipleRendezvous),将有助于解决广播问题.MAMR根据adhoc网络的数据传送需求,将任一网络收敛至一个无冲突,无死锁的匹配状态.在该策略的收敛状态下所有非广播结点的入度不大于1,并且任两个相邻的广播结点间不会有匹配的边存在,从而避免了广播结点间可能出现的数据发送冲突.进一步证明,该策略可以在O(4m)步内收敛,并且可以在限定条件下达到极大匹配状态;在无广播结点时,该策略与Hsu和Huang提出的分布式网络中的极大匹配策略等价.仿真显示,在具有5%的广播数据需求时,该策略可以使MAXM、BTMC协议性能提高10%.关键词多跳分布式无线网络;多址接入协议;广播需求;匹配策略;极大匹配1引言设计媒质接入控制(MAC)协议是adhoc网络的一个关键问题.按照协议所需信道数的多少,可以将MAC分为单信道、双信道以及多信道协议.单信道MAC协议[1-4],包括IEEE802.11[5]其后续研究在内的单信道协议,虽然提出了一些解决隐藏终端[6]、暴露终端[4]、侵入终端[7]问题的方法来提高网络性能.但由于所有移动结点均共享使用一个物理信道而必然产生的竞争和冲突,使得网络性能仍会随着结点增多/网络规模扩大而急剧下降.双信道、多信道协议就是解决上述问题一种方法;在多信道图1多信道MAC协议基本原理图(1)独立控制信道(dedicatedcontrolchannel):所有结点使用独立的无线收发器时刻监控控制信道.优点:①无需时间同步;②相对单信道协议而言,系统效率仅受限于控制信息之间的竞争关系和协议中,相邻节点对之间通过适当的控制机制,可以使用不同的信道同时进行传输数据分组,从而更好地减少数据冲突,提高网络的吞吐率,同时与单、双信道协议相比接入控制更加灵活.目前绝大多数双信道MAC协议可以作为多信道MAC协议的一个特例,即具有一个控制信道和一个数据信道的多信道协议,如DBTMA[7]、PAMAS[8]、DUCHA[9]等.控制方法,是设计多信道协议的一个关键点,目前的多信道协议在控制方法(principlesofopera-tion)上都有许多独特的地方;将多信道协议根据控制方法不同可分成以下4类[10].图1为4类控制方法的基本原理图示,其中RTS/CTS仅代表收发双方为传输数据而进行的控制信息交互过程.可利用的信道数,从而达到较高的系统性能;缺点:①需要一个独立的无线接收器和独立的控制信道,与其它协议相比提高了成本,并且的系统信道数不多时,显著影响整体的信道利用率;②系统规模较Page3大时,控制信息之间的竞争,有可能成为提高系统效率的瓶颈.(2)同步转移(CommonHopping):所有结点使用相同的信道转移序列快速同步转移,当收发双发达成一致即暂停转移用于数据传输,数据传输结束后恢复同步转移.优点:①与独立控制信道相比,所有的信道都可以用于数据交换;②仅需要一个无线接收器.缺点:①信道转移频繁;②全系统要求紧密的时间同步;③所有结点的控制信息之间的信道竞争关系没有改变,控制信息虽然较短,但是用于交换控制信息的时隙也不会很长,因此,与独立控制信道相比,控制信息之间的竞争,将更加制约系统效率.(3)区分时隙(splitphase)转移:所有结点周期性转移至控制信道序列,用于收发双方达成一致.优点:与独立控制信道相比,仅需要一个无线接收器.缺点:①全系统要求紧密的时间同步;②所有结点的控制信息之间的信道竞争关系没有改变.(4)多广播域(MultipleRendezvous):发送结点转向接收结点所在的“中心”信道或慢速信道转移序列.这一类协议,与前3类协议有很大不同,这类协议可以同时让多对收发结点在不同的信道上达成一致,其目的之一是避免控制信息之间的竞争.优点:①只需要一个无线接收器;②全系统可以不要求紧密的时间同步;③与前3类协议相比,可以减少控制信息之间的竞争.缺点:与前3类协议相比,需要更加复杂的控制方法.在多广播域协议中,可以把控制方法抽象成两方面问题[11-15]:①信道分配问题,即如何为所有结点分配“中心”,并让相应的邻居结点知道自己的“中心”位置;②接入控制问题,即采用何种握手机制或匹配策略保证信道利用率,提高吞吐率和数据到达率,降低平均延时.第一个问题,目前已有了许多解决方法,例如SSCH[13],由各结点保存一个随机数的种子用于表示“中心”慢速信道转移序列,发信端使用一种随机数种子的广播机制获得接收端的随机数种子.McMac[14],由各结点保存一个随机数的种子用于表示“中心”慢速信道转移序列,并在所有报文中加入发送者的随机数种子,最终所有结点将获得它所有邻居结点的随机数种子.另外,还有一些竞争“中心”信道的方法,如所有结点周期性转移到一个公共的慢速信道序列发布自已选定的“当前中心信道”,并根据听到的其它结点选定的“信道”,选择自己认为最可能空闲的信道作为自己的“中心信道”.然而,我们的研究发现,接入控制存在3个相互影响的问题,可能制约大多数多广播域类MAC协议性能的提高.问题1.死锁(deadlock).如图2所示,由于发送结点A,在转向收信结点B的过程时,结点B有可能转向其他收信结点,从而形成死锁.问题2.匹配效率(matching).如图3所示,由于发送结点A,在转向收信结点B的过程时,结点B有可能转向正在通信的结点C,使得A、B、C处在不同的信道上,因此即使B结点没有进行数据通信,A和B之间也存在空闲信道资源,同时A也正常转向了B,但由于AB无法完成为达成通信而进行的控制信息交互,所以AB间无法达成通信匹配,浪费了资源.问题3.数据广播(databroadcast).如图4所示,结点C有一个需要发送到结点B、D、E的广播/多播数据,由于B、D、E可能不在同一信道上,简单的一次数据发送将不可能同时到达多个接收结点的中心信道,因此与单信道以及其它多信道协议不同,需要在协调接收结点信道转向次数或增加数据发送次数之间作出选择.图3匹配效率问题图图4数据广播问题图Page4解决问题1是通常多广播协议必须面对的,其基本方法是使用发送等待或依概率进行发送,如SNDR[11]使用了双倍等待的方法来避免死锁,SSCH使用了等待直至收发结点跳至同一信道才开始发送的方法,McMAC使用的依概率进行发送的方法来降低了死锁发生的可能.Hsu等人[12]发现这些方法并不能充分利用信道资源,当系统负载较高时,问题2将成为性能瓶颈,于是采用了Hsu和Huang[16]的匹配策略,同时解决了问题1和问题2,即MAXM[12]协议.然而Hsu和Huang的策略使得任一个广播/多播数据只能通过多次单播实现.显然,这将为采用MAXM协议作为MAC协议的实际系统带来沉重的路由协议开销和基于广播机制的应用协议开销,从而使问题3成为了系统性能瓶颈.然而,无论系统采用依概率发送还是使用发送等待解决问题1,问题3都将会扩大问题1及问题2对系统性能的制约,从而使问题3也成为系统的性能瓶颈.首先如果图4中结点C不协调多个接收结点转向,系统就只能接受沉重的路由协议开销和基于广播机制的应用协议开销.其次如果结点C协调多个接收结点转向,广播数据发送必然产生巨大的等待延时,结点B如果在这期间有数据向C发送,B则不得不接受很长的等待延时,使得避免死锁的开销变得很大,结点C将成系统中的一个“忙”点.此外,Elhawary和Haas等人[15]还提出了一种基于忙音控制的多广播域协议BTMC.BTMC协议中每个结点,使用随机数控制生成散列表用于信道分配,当空闲结点遇到默认监听信道忙时,空闲结点依次选取散列表的信道作为监听信道;同时BTMC为每个结点增加一个简单的特定硬件信号发送装置,当结点忙时,向外发送忙音信号;BTMC使用RTS-CTS-DATA-ARK实现接入控制.BTMC通过引入忙音信号,使得发送转向过程与SNDR、MAXM利用空闲信号的过程相近似,从而有效地降低了死锁概率.然而BTMC的方法,并不能解决数据广播,文献中任一个广播/多播数据仅只能通过多次单播实现.本文所提出的策略MAMR(MachingAlgo-rithmforMultipleRendezvous)就是一种为多信道MAC协议解决上述3个接入控制问题而提出的一种的分布策略.目前分布式系统中常见的结点对极大匹配策略,主要有下面两类:Hsu和Huang于1992年发表了一套在分布式网络中建立极大匹配(maximalmatching)的策略[16-18],此后出现了面向结点度的匹配策略(b-matching)[19-21].目前由Hsu和Huang建立的策略无法实现大出度结点的匹配.然而在任何一个adhoc网络中,广播信息的传送都将无法避免,同时为了降低数据冲突,所有结点还需要避免同时接收来自多个结点的数据包(特例说明:multipacketreception概念中,数据包也不是在同一个时间到达的);由于adhoc网络中各结点之间完全对等,因此在各种面向结点度的匹配策略中,不仅很难定义b-matching策略中的函数b(v),同时收敛结果中可能会有一个结点需要同时接收两组广播信息,或两个广播结点直接相邻,由此引起数据冲突.我们的研究表明,MAMR策略的收敛结果,可以保证所有非广播结点的入度不大于1,并且任两个相邻的广播结点间不会有匹配的边存在,从而避免了广播结点间可能出现的数据发送冲突,进而达到冲突避免.当网络的初始状态中没有广播结点时,该策略与Hus和Huang的策略等价.MAMR策略可以在O(4m)内收敛,并在限定条件下达到极大匹配状态.为验证本文所提出的匹配策略是否能有效地在现在多信道协议中进行应用.我们分别采用了MAXM和BTMC的协议假设进行协议改进研究.并对MAXM与BTMC协议应用了MAMR策略进行接入控制改进.模拟结果显示,在具有5%的广播/多播数据需求时,采用MAMR策略吞吐率比MAXM协议提高10%,比McMac协议提高30%;当具有20信道、5%的广播/多播数据时,采用MAMR策略吞吐率比BTMC协议提高13%.2MAMR匹配策略2.1网络假设及策略描述本文采用与Hus和Huang的策略相近的网络模型,网络用一个无向图G=(V,E)表示.其中V是所有结点的集合,E是所有边的集合.每个结点保持决定结点状态的局部变量,系统状态为所有结点状态的集合.系统的状态变化可以用一系列的变化步(movies)表示,并且假设不存在两个同时变化的结点.如果i是网络中的一点,令N(i)为结点i的开放邻结点(openneighorhood)的集合.任一结点j∈N(i),称j为结点i的一个邻结点.在Hua和Huang的策略中,每个结点仅保存一个单指针变量,当指针为空时,表示为i→null;当指针指向一个邻结点j,表示为i→j.MAMR策略中的每个结点Page5将保存一个指针变量集合,当集合中所有指针为空时,表示为i→null;集合中每一个指向邻结点j的指针,表示为一个逻辑关系i→j,同一个结点指针集合中的任意两个不同指针不会同时指向一个相同的邻结点.同时称具有多于一个指向邻结点指针的结点为广播结点,令Bt为t时刻所有广播结点的集合,B0为初始状态时所有广播结点的集合,表示MAC协议中所有具有广播需求的结点.在MAMR中延用Stephen等人[18]在HusHuang()中对结点变化步的分类方法,将变化步分成4类并用(i,j,Rk)来表示规则Rk的执行,1k4,统称这些变化过程为ij-movie.令m1,m2,…,mq为全部变化的集合.令e=i,}{j表示无向图中的一条边,令C(i,j)表示所示ij-movie的总数,可知C(e)=C(i,j)+C(j,i).将不再发生ij-move或ji-move的边称为不再移动.算法1.HusHuang().R1:if(i→null)∧(j∈N(i))(j→i)thenset(i→j)R2:if(i→null)∧(k∈N(i))((k→i))∧(j∈N(i))(j→null)Thenset(i→j)R3:if(i→j)∧(j→k)∧(k≠i)thenset(i→null)定理1.HusHuang()的收敛结果中所有结点的入度1.证明.设ms为HusHuang()收敛过程中的最后一步.假设收敛结果中存在结点i的入度>1,即k,l∈N(i)使得k→i∧l→i∧k≠i.此时结点i的状态可分成两类:(1)i→null则因为R1规则,所以将可发生(i,k,R1)或(i,l,R1)与收敛相矛盾.(2)i→j则因为k≠i,所以有(m∈k,{}l)(m→i)∧(i→j)∧(m≠j)与R3规则相矛盾.证毕.算法2.MAMR().R1:if(i→null)∧(iB0)∧(j∈N(i))(j→i)Thenset(i→j)R2:if(i→null)∧(k∈N(i))((k→i))∧(j∈N(i))((j→null)∧(i→j)∧(jB0))|(i∈B0)∧(k∈N(i))((k→i)|((i→k)∧(k→i)))∧(j∈N(i))((j→null)∧(i→j)∧(jB0))Thenset(i→j)R3:if(i→j)∧(j→k)∧((j→i))|(i→j)∧(j→k)∧((k≠i)∧(i→l)∧(l≠j))|(i→j)∧(j∈B0)∧((j→i))Thendelete(i→j)R4:if(i∈B0)∧(i→null)∧((m∈N(i)))((m→i))∧(((k∈N(i))∧(kB0)))((l∈N(k))((k→l)(l→k)))∧(j∈N(i))((j∈B0))Thenset(i→j)∧(j→i)2.2MAMR()收敛过程定理2.MAMR()中任一时刻的广播结点集BtB0,t>0.证明.假设存在mt步,mt步发生前,Bt-1=B0,而mt发生后,使得(i∈Bt)(iB0).显然由系统模型定义可知,mt步前后系统中结点为i的状态一定发生了发化.所有mt步可能包括(i,j,R1)、(i,j,R2)、(i,j,R3)、(i,j,R4)、(j,i,R4).如发生(i,j,R1)、(i,j,R2)、(i,j,R4),(j,i,R4).可知mt步前i→null|i∈B0,显然i∈B0与假设矛盾,因此mt步后i→j,结点i出度为1,iBt,仍与假设矛盾.如发生(i,j,R3),可知mt步前i→j,又由假设iB0,Bt-1=B0,所以显然mt步前结点i出度为1,mt步后,结点i→null,iBt,与假设矛盾.证毕.定理3.MAMR()中的任一结点i执行(i,j,R1)后,将不再移动.证明.设结点i在mt步执行(i,j,R1).显然在mt前一时刻结点i→null∧iB0.由定理2知mt步后iBt.下面对结点j进行讨论.情况1.jB0,知mt步前j出度为1,j→i,mt步后i→j∧j→i结点i,j的出度都为1.假设ms为结点i和边{i,j}在mt步后发生的第一个变化步,则ms共可能发生8种可能变化.(i,l,R1),(i,l,R2),(i,l,R4),(j,i,R1),(j,i,R2),(j,i,R4),(i,j,R3),(j,i,R3),l∈N(i).其中(i,l,R1),(i,l,R2),(i,l,R4),(j,i,R1),(j,i,R2)(j,i,R4)与i→j∧j→i∧iB0矛盾.其中(i,j,R3)由i→j∧j→i结点i,j的出度都为1,且i出度为1知式(i→l)∧(l≠j)=false,(j→i)=false.(i,j,R3)发生的条件公式:(i→j)∧(j→k)∧((j→i))|(i→j)∧(j→k)∧((k≠i)∧(i→l)∧(l≠j))|(i→j)∧(j∈B0)∧((j→i))=false.同理(j,i,R3)与假设矛盾.Page6(j,i,R3)发生的条件公式:j,R1)或(j,i,R1)后,将不再移动.其中(j,i,R3)由i→j∧j→i且i出度为1.情况2.j∈B0,mt步后i→j∧j→i,假设ms为结点i和边{i,j}在mt步后发生的第一个变化步,则ms共可能发生8种可能变化.(i,l,R1),(i,l,R2),(i,l,R4),(j,i,R1),(j,i,R2),(j,i,R4),(i,j,R3),(j,i,R3),l∈N(i).其中(i,l,R1),(i,l,R2),(i,l,R4),(j,i,R1),(j,i,R2)(j,i,R4)与i→j∧j→i∧iB0矛盾.其中(i,j,R3)由i→j∧j→i且i出度为1知式(i→l)∧(l≠j)=false,(j→i)=false.(i,j,R3)发生的条件公式:(i→j)∧(j→k)∧((j→i))|(i→j)∧(j→k)∧((k≠i)∧(i→l)∧(l≠j))|(i→j)∧(j∈B0)∧((j→i))=false.(j→i)∧(i→k)∧(k≠j)=false.(i→j)=false.(j→i)∧(i→k)∧((i→j))|(j→i)∧(i→k)∧((k≠j)∧(j→l)∧(l≠i))|(j→i)∧(i∈B0)∧((i→j))=false.与假设矛盾.推论1.MAMR()中的任一边{i,j}执行(i,证明.由定理3证明过程同理可证.推论2.MAMR()中的任一结点i,如(j∈N(i))(iB0∧i→j∧j→i),结点i将不再移动.证明.由定理3证明过程同理可证.定理4.MAMR()中的任一结点i执行(i,j,R4)后,边{i,j}和结点i将不再移动.证明.设结点i在mt步执行(i,j,R4),显然mt步前有(((k∈N(i))∧(kB0)))((l∈N(k))(k→l)(l→k))成立,由推论2可知mt步后,(((k∈N(i))∧(kB0)))((l∈N(k))(k→l)(l→k))也将成立.假设ms为结点i和边{i,j}在mt步后发生的第1个变化步,显然ms步前结点i出度为1.有j→i∧i→j∧i∈B0∧j∈B0∧(((k∈N(i))∧(kB0)))((l∈N(k))(k→l)(l→k))成立.则ms共可能发生8种可能变化.(i,l,R1),(i,l,R2),(i,l,R4),(j,i,R1),(j,i,R2),(j,i,R4),(i,j,R3),(j,i,R3),l∈N(i).其中(i,j,R3),(j,i,R3)同理可由定理3的证明过程,证明(i,j,R3),(j,i,R3)将不会首先发生.其中(i,l,R1)、(j,i,R1)、(i,l,R4)、(j,i,R4)、(j,i,R2)与状态i→j∧j→i矛盾不会首先发生.其中(i,l,R2)与状态(((k∈N(i))∧(kB0)))((l∈N(k))(k→l)(l→k))矛盾不会首先发生.定义1.结点i执行(i,j,R1)后如结点jB0称结点i,j互相单独匹配.定义2.结点i执行(i,j,R1)或(i,j,R4)后如结点j∈B0称结点i匹配了结点j的一广播需求.定义3.任一结点i执行(i,j,R1)或(i,j,R4),称边{i,j}m-匹配.推论3.MAMR()中的任一边{i,j}m-匹配后,边{i,j}将不再移动.证明.由定理3证明过程同理可证.定理5.MAMR()任意结点i,如执行了(i,j,R2),那么在其后,至多发生一次ij-move,如发生,则必然发生(i,j,R3).证明.令ms=(i,j,R2),同时假设s时刻后至少发生一次ij-move.令mt=(i,j,Rk)是s时刻后接下来发生的ij-move.显然mt=(i,j,R3).在时刻s后时刻t前,显然有i→j∧jB0,而在时刻t前由于(i,j,R3)规则发生的必要条件显然有i→j∧j→k|j∈B0.所以t时刻前有(k∈N(j))(i→j∧j→k)下面我们对k进行讨论.情况1.(k∈N(j))(k=i∧i→j∧j→k).显然在时刻s后,时刻t之前,发生了(j,i,R1)、(j,i,R2)、(j,i,R4).因为时刻s后,时刻t之前i→j,所以(j,i,R2)、(j,i,R4)不能发生.因此只能是发生了(j,i,R1),由定理3及推论1知(i,j,R3)不会在(j,i,R1)后发生,与假设矛盾.由此可以得出结论,如假设成立,情况1不会发生,无需要讨论;如假设不成立,定理5成立.情况2.(k∈N(j))(k≠i∧i→j∧j→k∧((j→i))).显然在时刻s后,时刻t之前,发生了(j,k,R1)、(j,k,R2)、(j,k,R4).因为时刻s后,时刻t之前(i→j)∧((j→i)),所以(j,k,R2)、(j,k,R4)不能发生.因此只能是发生了(j,k,R1),由定理3知t时刻后结点j状态再不会变化.同时由定理2可知j出度为1.由此可知时刻t后结点j将保持j→k∧k≠i,(i,j,R1)或(i,j,R2)将不可能发生.由于t时刻后,式i→j=false,(i,j,R3)也将不可能发生.同时由于jB0,(i,j,R4)也不可能发生.由此可以得出结论,如假设成立,并出现情况2时,定理5成立;如假设不成立,定理5成立.定理6.MAMR()任意结点i,如执行了(i,j,Page7R2),那么在其后,在边{i,j}上发生并且仅发生一次移动,不是(i,j,R3)就是(j,i,R1).证明.假设如果从t时刻起边{i,j}上没有移动,将有i→j∧(j→i)∧(jB0),如j→null,(j,i,R1)将发生,与假设矛盾.如果j→k∧k≠i,(i,j,R3)将发生.与假设矛盾.所以可以得出结论如果结点i在时刻t执行了(i,j,R2),那么边{i,j}上至少发生一次移动.显然从t时刻起,如果首先发生ij-move,由定理5的证明过程知,则只能先发生且仅发生一次(i,j,R3),结点j在(i,j,R3)后也将不再移动,也不会发生ji-move.如果首先发生ji-move,则只能先发生(j,i,R1),由定理3及推论1知,(j,i,R1)后,边{i,j}将不再移动.定理7.MAMR()任意结点i,如执行了(i,j,R3),那么在其后,在边{i,j}上将最多发生3次移动.证明.设结点i在时刻t执行了(i,j,R3),下面将就执行(i,j,R3)前边{i,j}的状态进行讨论.情况1.j→i.显然如果边{i,j}上发生移动,那么首先发生的只有以下几种可能:(i,j,R1)、(i,j,R2)、(i,j,R4)、(j,i,R1)、(j,i,R2)、(j,i,R4),由定理3,4,推论1,定理5知,情况1下边{i,j}最多再发生两次移动.情况2.j→i.显然如果边{i,j}上发生移动,那么首先发生的只有以下几种可能:(i,j,R1)、(j,i,R3),由定理3,推论1知(i,j,R1)后边{i,j}不再移动.如发生(j,i,R3)则边{i,j}将变成与情况1相同.综合上述,任意结点i,如执行了(i,j,R3),那么在其后,在边{i,j}上将最多发生3次移动.证毕.定理8.MAMR()对于网络中每一条边,C(e)4.证明.假设C(e)>0,那么在边e上至少将发生一次移动m,显然对于任意的m=(i,j,Rk),由定理7、定理6、定理3、推论1可知,其后最多再移动3次.推论4.对于任意一个具有m条边和n个结点的网络,MAMR()最多经过4m步收敛.证明.由定理8可以直接得出结论.3MAMR性质定义4.任一条边{i,j},如在MAMR()收敛过程中未移动,在收敛结束后,具有状态(i→j)∧(j→i),称边{i,j}i-匹配.定义5.MAMR()收敛后任一条边{i,j},具有状态(i→j)∧(j→i),称边{i,j}为一条匹配的边.性质1.MAMR()收敛后,任一条边{i,j}上状态只种两种可能,不是边{i,j}匹配,就是((i→j))∧((j→i)).证明.假设MAMR()收敛后存在结点i,j满足(i→j)∧((j→i)),下面对结点j的状态进行讨论.情况1.j∈B0:满足(i→j)∧((j→i))∧(j∈B0),(i,j,R3)将发生,与收敛矛盾.情况2.(jB0)∧(j→null):满足(jB0)∧(j→null)∧(i→j),(j,i,R1)将发生,与收敛矛盾.情况3.(jB0)∧(j→k):满足(i→j)∧(j→k)∧((j→i)),(i,j,R3)将发生,与收敛矛盾.性质2.MAMR()收敛后,任一非广播结点的入度1.证明.假设MAMR()收敛后存在非广播结点i,满足(k→i)∧(l→i)∧(l≠k).由性质1知必存在(i→k)∧(i→l)∧(l≠k),i为广播结点,与假设矛盾.性质3.MAMR()收敛后,任两个广播结点之间不会有边匹配.证明.假设MAMR()收敛后存在两个广播结点i,j满足(i→j)∧(j→i).显然存在条件(i→j)(j→k)(k≠i)(i→l)(l≠j),(i,j,R3)将发生,与收敛矛盾.性质4.如网络的初始状态中没有广播结点,MAMR()与HusHuang()等价.证明.如网络初始状态下没有广播结点,则B0=,由定理1知MAMR()收敛过程的任一时刻Bt=.由Bt=∧B0=,iB0=true,jB0=true,(j→k)∧((j→i))(j→k)∧(k≠i),delete(i→j)(i→null).将上面4式分别代入R1,R2,R3得到与HusHuang()相同的R1,R2,R3.显然任一个初始条件下没有广播结点的网络中,在HusHuang()下收敛过程的变化步顺列(i0,j0,Rk0),(i1,j1,Rk1),…,(in,jn,Rkn),在MAMR()下的变化步顺列(i0,j0,Rk0),(i1,j1,Rk1),…,(in,jn,Rkn)将可以发生,并将网络收敛到与HusHuang()下相同的状态.反之,在MAMR()下收敛过程的变化步顺列Page8(i0,j0,Rk0),(i1,j1,Rk1),…,(in,jn,Rkn),在HusHuang()下的变化步顺列(i0,j0,Rk0),(i1,j1,Rk1),…,(in,jn,Rkn)将可以发生,并将网络收敛到与MAMR()下相同的状态.性质5.MAMR()收敛后,对于任一结点i,如i∈B0,那么有下面的公式成立.(((k∈N(i))∧(kB0)))((l∈N(k))((k→l)(l→k))).证明.假设存在结点k满足(kB0)((l∈N(k))((k→l)(l→k))),由性质1显然可知k→null∧kB0,(i,k,R2)将发生,与收敛矛盾.证毕.性质6.设M为一个具有性质2,3的匹配边集合,其中广播结点的集合为B,M为MAMR()收敛后的一个匹配边集合,B0为收敛过程的初始广播结点集.如果B0B,那么必有MM.证明.假设存在M为一个具有性质2,3的匹配边集合,其中广播结点的集合为B,有(B0∩B)∧(MM0).显然(e={i,j})(e∈M∧eM)由性质3知i,j不同时为广播结点,下面认为结点jB.显然j在M中唯一连接的边为e,由eM∧eM,j在M中没有连接的边.j在M中的状态为j→null.下面对i的状态进行讨论.情况1.iB0.显然iB在M中有i→null∧j→null∧iB0(k∈N(j))((k→j)),符合(j,i,R2)发生条件.与M收敛矛盾.情况2.i∈B0∧jB0.在M中有性质1知(k∈N(i))((k→i)∧(i→k)|((i→k)∧(k→i)))所以必有条件(i∈B0)∧(k∈N(i))((k→i)|((i→k)∧(k→i)))∧成立,(i,j,R2)将发生.与M收敛矛盾.情况3.i∈B0∧j∈B0.在M中有性质5知(((k∈N(j))∧(kB0)))((l∈N(k))((k→l)(l→k))).由于j→null从性质1显然可知((m∈N(j)))((m→j)).同时i∈B0∧j∈B0∧j→null,(j,i,R4)将发生.与M收敛矛盾.即在限定条件下,MAMR是一个极大匹配策略.4策略应用的仿真结果及分析4.1仿真指标及仿真环境采用以下指标评估多信道MAC协议接入控制策略性能:(1)数据吞吐率(AverageThroughput):单位时间内,成功接收的数据量(bit/s).(2)数据时延(AverageDelay):成功接收到数据包的平均时延(单位:s).(3)丢失率(AveragePacketLostRadio):丢失数据包数占参与通信过程数据包总数的比率,用百分比表示.仿真环境使用OPNET共设置200个结点,结点最高连通度16;场景1使用依概率发送策略,无冲突信道分配分法,即McMac协议;场景2使用HusHuang策略,无冲突信道分配分法,即MAXM协议;场景3使用MAMR策略替换MAXM协议的接入控制部分,在匹配的广播需求后,接收结点转向发送结点,称MAMR协议.场景4使用忙音控制策略,20条有效信道,即BTMC协议;场景5,使用MAMR策略替换BTMC协议的接入控制部分,20条有效信道,特定硬件除表达忙音信号外还可以表达空闲信号,在匹配的广播需求后,接收结点转向发送结点,称BT-MAMR协议.仿真假定上层数据达到率服从均值为λA的泊松分布,广播数据包到达服从均值为λp的泊松分布;所有数据包长度均服从均值为λS的指数分布;控制参数见表1.数据达到率(λA)20packet/s数据包长度(λS)1024bit广播比例(λp/λA)5%节点度(Deg)信道转换时间(Sifts)50μs单一数据信道带宽(Speed)100Kbit/s最大重发次数(retry)4IdleTonePeriod200μsMAXM,MAMR,回避时间(peer)500μs发送概率(1+Sqrt(λS/Speed/peer))/繁忙程度轻载中载重载超载注记符号Busy1Busy≈1/2Busy→1Busy>1取值范围[0,0.25][0.25,0.75][0.75,1][1,+]4.2仿真结果及分析定义系统Busy=λA×(λS×(2+(λp/λA)×Deg/100)/Speed).由于公平发送原因,一次数据发送将消耗多个结点的处理能力,显然当Busy>1时,任何控制策略都将发散.假设系统繁忙程度符合表2约定的Busy取值范围.Page9图5吞吐率变化趋势Page10图6数据到达率的影响(数据包长度=1024,广播比例=5%)图7数据包长度的影响(数据到达率=20,广播比例=5%)图5描述了数据吞吐率在不同控制参数下的变化趋势;图6~8描述了3种不同接入控制策略条件(RTS-CTS-DATA-ARK,HusHuang,MAMR)下,协议性能指标随单一控制参数的变化趋势;表明任一种策略条件下,数据吞吐率、数据时延、丢失率都均会随数据包长度,数据到达率,广播比例增加而增长.MAMR的数据吞吐率、丢失率均不弱于McMac和MAXM;但MAMR的数据时延在某些控制参数下将大于MAXM.为清楚表示MAMR的特性,图6~图8中除对3种接入控制策略的数据时延进行比较外,还对MAMR和MAXM的数据时延进行了单独比较.当Busy1时,5种策略的数据吞吐率没有太大的区别,因为几乎所有的数据都可以在有限时间内被发送出去.当Busy≈1/2、Busy→1或Busy>1时,McMac、BTMC的吞吐率几乎不受数据到达率、广播比例的影响,仅当数据包长度变化时,McMac、BTMCPage11图8广播比例的影响(数据包长度=1024,数据到达率=20)数据吞吐率才发生显著变化.因为,依概率发送的接入策略和使用忙音的控制策略并不能完全克服死锁问题,当系统较为繁忙时,死锁将会以较大的概率发生,待发数据列队也将以较低概率排空,因而数据到达率不会显著影响数据吞吐率,对于McMac、BT-MC来讲广播比例变化相当于数据到达率变化,因而也不会显著影响数据吞吐率.当Busy≈1/2、Busy→1时,MAXM、MAMR、BT-MAMR的数据吞吐率,与McMac相比较,当数据到达率变化时,将发生显著变化;同时MAXM的数据吞吐率几乎不受广播比例的影响,MAMR、BT-MAMR当广播比例变化时,将发生显著变化.一方面,因为MAXM、MAMR、BT-MAMR策略克服了死锁问题,待发数据列队能够以较高的概率排空,从而获得较高的数据吞吐率.另一方面,因为MAMR、BT-MAMR一次数据发送则可能到达多个目的结点,而MAXM一次数据发送只能到达一个目的结点,在MAMR策略下广播开销远小于MAXM,待发队列中的广播数据也不会显著影响其后的数据发送时间,从而当广播比例增加时,获得比MAXM大的数据吞吐率,同时维持较小的数据时延和丢失率.当Busy>1时,MAMR数据时延将接进或大于MAXM,但将维持较小的丢失率.因为MAMR策略下广播数据具有比MAXM小的丢失概率,当网络非常繁忙时,MAXM能够从一个广播数据包中丢弃较多的广播目的结点,获得比较稳定的数据时延.5结论传统的多信道MAC协议,死锁问题及由其引发的发送等待问题是制约协议性能提高的瓶颈.通过某些收方控制的匹配策略,牺牲了无线网络本身做为广播介质的特性,解决死锁问题,增加了广播数据开销,为实际系统带来沉重的路由协议开销和基于广播机制的应用协议开销.当系统中的结点可以为其邻居结点,提供空闲状态时,MAMR就可以在为系统提供收发结点间极大匹配的同时,在广播数据源和多个空闲的目的结点间也建立匹配,而不必增加时钟同步或其他特别硬件控制.它可以降低多信道MAC协议的数据开销,提高数据吞吐率.模拟结果显示,该策略在具有5%的广播数据需求时,可以使MAXM、BTMC协议吞吐率提高超过10%,McMac协议提高30%,在非超载时使MAXM平均数据时延降低约50%.
