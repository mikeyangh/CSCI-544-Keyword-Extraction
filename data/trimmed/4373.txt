Page1基于任务精确预测的实时功耗温度管理赵国兴1)闫佳琪2)骆祖莹1)1)(北京师范大学信息科学与技术学院北京100875)2)(伊利诺伊理工大学计算机科学系芝加哥美国60616-3793)摘要实时功耗温度管理(DPTM)通过对任务的准确预测与合理调度,可以有效降低片上系统的运行能耗与峰值温度.为了获得更好的DPTM调度效果,文中提出了一种精确的组合式任务预测算法和一种任务调度算法VP-TALK,进而构建了一个完整的DPTM原型系统.为了对复杂任务进行精确的任务预测,文中DPTM系统先将复杂任务按频谱长短分类为随机/周期/趋势3种成分,然后采用灰色模型/傅里叶模型/径向基函数(RBF)神经网络模型分别对这3种成分进行组合分析,以获得精确的预测效果;基于精确预测的任务负载量,文中所提出的VP-TALK算法可以计算出最优电压-频率对的理想值,进而选择出两组与理想值相邻的电压-频率对,以获得两个现实的工作状态,并考虑核心温度和任务实时性的条件,VP-TALK算法将任务负载分配到这两个工作状态,以获得最优的DPTM效果;最后基于机器学习方法,综合4种源算法构建了一套完整的DPTM原型系统.实验结果表明:(1)文中系统的任务预测组合方法的平均误差仅为2.89%;(2)在相同的设定峰值温度约束下,与已有调度算法的能耗值相比,尽管假设了更为敏感的功率-温度影响关系,但对于较高的工作负载率,文中所提出的VP-TALK调度算法仍能够获得平均14.33%的能耗降低;(3)文中所提出的DPTM原型系统可以获得接近于理想状态的能耗优化效果.关键词实时功耗管理;实时温度管理;任务预测;任务调度1引言当前,面向复杂应用的高性能片上系统为了规避和减轻功耗墙(powerwall)问题[1],必须在芯片运行中,通过合理任务调度来降低芯片的运行能耗和峰值工作温度.因此,对芯片进行实时功耗温度管理(DPTM)的算法研究就具有重要的理论意义与广阔的应用前景,这也是目前电子设计自动化(EDA)研究的一个热点问题[2-7].最初为了降低芯片运行功耗、延长设备电池的使用寿命,研究人员提出了运用动态电压调节技术(DVS)对系统动态功耗进行实时功耗管理(DPM)[2,8-10].随着IC进入纳米工艺,漏电流静态功耗已经超过动态功耗,成为芯片功耗的主要来源,而且漏电流和工作温度之间存在指数关系①[11-12],如对于65nm工艺,当温度从60增加到80,芯片漏电流会增加21%.为此,研究人员开始针对微处理器和大型服务器系统进行实时温度管理(DTM)[13-15].为了对片上系统进行功耗、温度的统一调度与管理,最近开始出现了实时功耗温度管理(DPTM)的研究报道[4-7,16],在考虑漏电流、温度相互作用关系和实时任务的时间限制这两个前提下,采用不同的DPTM策略来达到最小化运行能耗的目的.在DPTM研究中,为了提高DPTM系统的降温降耗效果,必须对系统的任务负载进行精确地预测[4-7,13-16],事实上,任务负载的轻重决定了不同方法的DPTM效果[4-7,16].目前,任务预测分为在线预测与离线预测两类,其中在线预测的速度快但精度差,而离线预测的速度慢但精度高.为了构建一个高效的DPTM系统,本文不仅提出了一种具有高精度的组合式任务预测方法,而且还提出一种新的DPTM任务调度算法VP-TALK,并进一步集成了一个基于负载预测的DPTM原型系统,该系统主要包括工作负载预测、任务实时调度两大模块:(1)基于组合任务预测方法的负载预测模块.根据频率范围,先将对应于复杂应用的任务分为随机/周期/趋势3种组分,然后采用灰色模型/傅里叶模型/RBF神经网络模型分别对这3种组分进行精确分析,最后将3部分预测结果合成为复杂任务的预测值.(2)基于多种调度算法的实时调度模块.先根据对工作负载率的精确预测值计算出最优工作状态的电压/频率理想值,再从系统的电压/频率对的实际设定值中选取相邻的两个工作状态,最后考虑系统实时性、温度上限限制、静态功耗与温度的敏感关系以及芯片模式切换代价等多种因素,利用机器学习的方法,选择一种最优的调度策略.大量的模拟实验表明:(1)在负载预测方面,本文DPTM系统所采用的组合任务预测方法胜过众多的相关模型及算法,平均误差仅为2.89%;(2)在节能效果方面,当负载率高于55%时,基于相同的峰值温度约束,本文所提出的VP-TALK算法分别比Pattern-based、M-oscillating和TALK对比算法节能约20.5%、11.0%、11.5%;(3)本文DPTM原型系统的调度效果接近于理想调度效果.本文第2节论述本文研究所使用的系统模型与功耗-温度模型;第3节简单讨论若干种已有调度算法的优缺点;第4节介绍本文所提出的VP-TALK算法调度;第5节介绍本文所提出DPTM原型系统;第6节介绍基于组合模型的工作负载预测模块;第7节给出大量实验验证数据;最后给出结论.①http://www.device.EECS.Berkeley.edu/bsim3/Page32研究模型2.1实时系统的工作负载模型本文讨论的实时系统可以周期性地分配一段时间D作为执行某一任务的截止时间,该任务在最坏情况下所需要的执行时间为W.不失一般性,我们假设任务的截止时间等于系统周期性分配的时间片,并且等价地只考虑一个周期内的任务.文献[17-18]根据任务的性质研究了如何决定(D,W)数据对的值.本文中,由于可以预测出发送至实时系统的数据量,工作负荷便可以被认为是网络流量的归一化形式.2.2实时系统的热分析模型为了研究处理器内核(die)的热传导特性,文献[19]采用了等效RC电路方法进行热分析建模.该模型采用如下公式进行工作温度的求解:f=Vdd-V()tμ由于与工作电压成正比,我们可以得到动态功耗的计算公式为通过HSPICE软件进行曲线拟合,与温度、电压相关的漏电流可写为Ileakage=I(V0,T0)(AT2eαVdd+β式中,A,B,α,β,γ,δ,μ,η是经验参数,由生产工艺所决定(本文的模拟实验默认选择采用65nm的工艺参数).当工作温度T在300K~380K的正常范围内变化时,e1献[4]通过引入两个参考温度TH和TL进一步将漏电流简化为温度的二次函数.于是,与漏电流相关dTdt=P式中,T和Tamb分别代表芯片的温度与环境温度,P代表时间t时芯片的功耗,Rth、Cth分别为等效热阻与等效热容.2.3实时系统的功耗分析模型处理器的系统状态可以分为工作状态和休眠状态.只有在工作状态下处理器才执行任务;否则,处理器将进入休眠状态以减少功耗并降低自身温度.工作状态下的功耗:式中的第1项代表动态功耗,第2项代表静态功耗.当给定供电电压Vdd后,工作频率f为的静态功耗可以用下式计算:其中,A^=Ileakage(TH,Vdd)-Ileakage(TL,Vdd)B^=Ileakage(TL,Vdd)-A^×TL2此外,处理器的工作状态切换是通过改变工作电压来实现的,状态切换所带来的开销包括能耗开销pr与延时开销cr大,其能耗和时间的开销也就越大.3已有的DPTM调度算法3.1TALK算法TALK及其改进算法[16]根据工作负载和截止时间的不同,来控制不同时间段处理器的工作/休息状态:当负载量大并且温度较低时,处理器处于激活工作状态;当负载量小并且温度较高时,处理器切换到睡眠状态以减小能耗,降低温度.3.2Pattern-Based算法(简称PB算法)PB算法将任务的截止时间或者运行周期D等分为n个时间片段,每段长Δ=D/n,采用PB算法的处理器将工作于特定规则的模式中[4]:执行Δ×W/n时间后便切入休眠模式,以减少功耗并降低温度.文献[4,19]证明,如果重复这种运行模式足够多次,处理器将达到温度的平衡值,并进入稳定状态,即每个周期的初始温度和结束温度将趋向于稳定值,以便于分析.3.3M-Oscillating算法(简称MO算法)上面介绍的TALK算法和PB算法都要求处理器的工作速度大于或者等于负载率W/D.文献[18]证明,如果采用两个最接近的速度完成分配给处理器的任务,那么相对于采用其他的工作速度组合,处于该速度组下处理器的温度是最优的.如果进一步地将这种两步策略应用在m个时间片中,不仅温度可以进一步优化,还可以将D时间内的总功耗表达为m的函数,而且必然存在能耗最小化的m值[6].由于要考虑电压切换所付出的时间开销和能耗开销,文献[6]给出了m所具有确定的上限值Ceil.3.4对已有算法的评估作为温敏调度算法,TALK参照剩余任务量与当前温度来合理地调度任务.然而,简单的开关模式无法利用DVS技术,只能工作在固定速度.而且状Page4态切换所导致的时间、能耗开销也是不可避免的.根据切换时间和能耗开销[5],从全速工作转变为零电压将产生最大的能耗和时间开销.无论采用TALK还是PB算法,都要求处理器工作在大于W/D的速度上.大多数具有DVS或DVFS功能的实时系统通常只允许芯片的电压为若干离散值,根据负载率来调整电压工作档.这往往会导致芯片实际工作在高于任务所需的速度,不仅增加了近似与电压三次方成正比的动态功耗和与电压近似成正比的静态功耗,而且加速了温度的攀升,抬高了平衡态时的温度,进一步导致漏电流近似平方速度的增长.Quan等人[6]提出的MO算法存在两个主要缺陷.首先,假设功率为温度的线性函数,使得峰值温度较PB算法有很大降低.其次是在实际应用中不能忽略低工作负载率情况:当W/D小于处理器支持的最低工作速度时,MO算法只能退化为PB算法,以防止不必要的功耗增加.4基于电压预测的TALK算法:VP-TALK根据我们在DPTM领域的研究经验,可以获得如下几点关于DPTM改进的经验准则:(1)必须考虑温度对静态功耗的影响.本文将功耗定为温度的二次函数.在温度限制下,DPTM系统最好具有温敏调控功能.(2)如果能够准确预测负载量,确定任务所需的工作频率或者工作电压,就可以提前调度,更好地满足实时性.(3)芯片电压选取.由于工作电压决定了运行速度,应该采用MO的电压选取方法,即使得芯片运行速度刚好满足工作负载的需求,以最大程度地利用DVFS技术来降低能耗.(4)调度过程中,必须考虑电压切换(状态切换)所带来的额外能耗、时间开销.基于以上观察,我们提出一种改良后的TALK算法,即具有电压选择的TALK算法,本文称为VP-TALK,其算法流程图如图1所示.与MO相似,VP-TALK首先需要假设电压可以连续调节,以获得理论上的最优工作速度Scon.在SconLS(芯片最低工作速度)时,VP-TALK等同于原始的TALK算法.在Scon>LS时,该算法选用两档邻接的速度S1和S2,使得S1Scon<S2.不同于MO的等分M段时间段,VP-TALK采用更灵活的、电压可调的温敏TALK来对每一小段的工作状态进行调度.由于M的数量由切换工作状态的代价和任务的实时性所限制,其上下限分别记为Ceil和Floor[16].VP-TALK的应用前提是假设我们已经通过某种预测方法预测出了任务负载量,从而在任务到达前调度就已经开始,所以认为是实时性的.5DPTM原型系统5.1启发性示例在之前的分析中,我们已经指出,较轻工作负载时的MO必然要退化至PB的方法,这是因为当工作所需电压低于可选的最小电压值时,MO中阶梯型工作电压策略无法通过逼近最优工作电压的方式节省动态功耗.为了探究工作量与最优调度算法之间的关系,我们设定任务长度为10s,并考虑比Page5文献[16]更强的温度对漏电流影响,我们在工作负载率全区间(10%~95%)范围内,对TALK、PB与MO这3种已有调度源算法的调度效果进行了考察.图2给出了能耗的数据,图3给出了温度数据.图2不同负载率下已有调度算法的能耗比较图3不同负载率下已有调度算法的温度比较我们可以得出如下结论:(1)当工作负载率(W/D)低于50%(近似值)时,3种源算法的峰值温度低于310K(37),峰值温度对系统的性能与可靠性没有影响;在系统能耗方面,PB算法(也即MO算法)的调度效果要胜过TALK算法.因此,PB算法具有最佳的调度效果.(2)当工作负载率(W/D)处于50%~70%区段(近似值)时,3种源算法的峰值温度低于320K(47),峰值温度对系统的性能与可靠性也没有影响;在系统能耗方面,TALK算法的调度效果要胜过PB和MO算法.因此,TALK算法具有最佳的调度效果.(3)当工作负载率(W/D)大于70%(近似值)时,3种源算法的峰值温度高于320K(47),最高可超过380K(107),峰值温度对系统的性能与可靠性具有明显影响,其中MO算法具有最低的峰值温度;在系统能耗方面,MO算法的调度效果要明显胜过其他两种源算法,MO算法具有最佳的调度效果.由此可见,最优的DPTM调度算法与工作负载率有直接关系.我们将以此关系作为理论基础,用于DPTM调度原型系统的构建,即根据对实时系统工作负荷的精确预测结果,来选择效果最佳的调度算法,并对DPTM调度效果进行评价.5.2基于机器学习的DPTM原型系统根据调度算法性能与工作负载大小相关的观察,我们提出了基于工作负载预测结果来选择DPTM调度算法的调度策略,并以此构建了本文的DPTM原型系统,整个系统由工作负载预测、调度策略选择和调度策略评价三大模块组成,其具体的架构及其工作原理如图4所示.在该系统工作中,其三大模块主要完成如下功能:(1)工作负载预测模块.我们根据负载变化周期的长短,提出了一种组合式的负载预测方法,采用多种不同拟合方法来分别对任务的不同物理意义成分进行精确预测,以获得对复杂任务的精确预测;(2)调度策略选择模块.我们综合考虑实时完成任务、温度上限、能耗最小化、漏电流与温度相关以及芯片模式切换代价等多种因素,选用不同的任务调度策略;(3)调度策略评价模块.对每种策略的系统能耗与峰值温度进行评价,并将其作为DPTM系统的反馈量,供调度策略选择模块参考.5.2.1DPTM系统的机器学习方法调度策略选择的学习主要通过后期性能评价的评价值完成.假设存在N类DPTM,编号为1,2,…,N.它们在某一时刻t的得分或者权重为wt=(w1t,w2t,w3t,…,wNt),对其中任一个权重分量wkt可以采用下式进行计算式中,Ei,j代表芯片使用第i类DPTM在时刻j的Page6负载情况下消耗的能量,λj为一可调整的参数,代表时刻j的能耗情况对决策的影响程度,t0是可以变动的初始值,它的取值意味着选取从何时开始的能耗情况作为以后决策的参考.在预测出工作负荷值后,则开始进行决策:式中,DPTMt为t时刻选择出的动态功耗温度调度策略.考虑到温度上的限制,我们需要考察所选的调度源算法是否会超过温度上限.如果能耗的节约是在很高的峰值温度的代价下换取的,我们将放弃该源算法,而选择次优的但是有较低峰值温度的调度源算法.与3种已有源算法和本文提出的VP-TALK算法相比,本文DPTM系统的主要扩展改进点在于:具有高精度的任务预测模块,为根据负载量而进行的策略选择提供前提基础;通过基于调度效果评价的机器学习,自适应地根据负载量的轻重选择调度策略.5.3基于单一调度策略的DPTM原型系统值得一提的是,如果我们选定某一种调度策略,省略机器学习模块,就构成了基于单一调度策略的DPTM原型系统.在该DPTM原型系统中,输入量为任务负载的历史值,通过这些历史值,利用第6节所述的任务负载预测模型,可以得到对于下一时刻任务量的预测值.进而,可以确定完成预测任务值所需要的芯片电压或者频率,并利用上文所述的某一种算法进行调度.不论是基于机器学习的DPTM系统,还是基于单一调度策略的DPTM系统,都要求提前预知任务负载的大小.因此下一节中,本文将提出一种全新的组合式任务负载预测模型.6基于组合模型的任务负载预测6.1基于时间序列分解任务流量实时系统的任务犡(t)从其本质属性来讲,可以分为3种不同的成分,即工作负载中包含:(1)趋势成分犜(t),对应任务量随着时间而平稳增长、衰减的性质;(2)周期成分犘(t),对应任务量随时间变化表现出的规律性;(3)随机成分犚(t),对应任务量之中不确定的随机性.从而可以将任务犡(t)看作三者之和:犡(t)=犜(t)+犘(t)+犚(t).基于对3种基本成分的分析,本文提出了基于灰色模型、傅里叶级数分解模型以及径向基函数(RBF)人工神经网络理论的组合预测数学模型.具体流程框图如图5所示.该预测方法将历史任务流量数据依次分解为这3种成分,之后根据这3种数学模型分别进行预测,最后将预测值组合起来,构成对于任务流量的整体预测值.该方法将作为前文所述的DPTM系统中的任务负载预测模块.6.2灰色模型灰度模型GM(1,1)可以通过累加原始数据数列,弱化随机扰动因素影响,发现该序列的指数增长规律[7].设流量序列为犡(t)=犡(0)={x(0)(k)|k=1,…,n},对其做依次累加,得到犡(1)={x(1)(k)=∑ki|k=1,…,n}.因此,该序列的均值生成序x(0)i=1列为{犣(1)=z(1)(k)=x(1)(k)+x(1)k()-1由于GM(1,1)模型的白化形式为由此我们可以推导出离散递推方程x(1)(k+1)=β1x(1)(k)+β2,其中β1=(2-a)/(2+a),β2=b.通过最小二乘法可以得到β的估计值β^=(犅T犅)-1犅TY.从而给定初值后,通过递推公式可以求得进而可以确定累加序列,得出趋势预测值:t(0)(k+1)=x(0)(k+1)=x(1)(k+1)-x(1)(k)6.3傅里叶模型我们提出周期成分的概念来描述工作负载中的周期性质.对于一个周期函数,最成熟的分析方法就是用傅里叶级数展开或者傅里叶变换[20].假定周期成分可以被认为是一个周期为T的函数f(x).所以可以将之做傅里叶级数展开:Page7f(x)=a0+∑m通过去除了趋势成分的历史数据X(t)来构造出矩阵方程,拟合出傅里叶系数ak,bk.将X(j)=f(xj),1jn代入f(x)表达式,得到矩阵方程:1c11c12…s11s12…s1m熿1c12c22…s21s22…s2m1cn1cn2…sn1sn2…s燀式中,cij=cos2πjxiT,sij=sin2πjxiT.由于函数族{1,sinx,cosx,…,sinmx,cosmx}的正交性,使得上述方程组有特殊解法.经过推导,不难得到进而得到周期成分的拟合函数表达式:6.4RBF神经网络模型众所周知,任何服务系统的工作任务都会有一定的随机性,称之为任务负载中的随机成分.RBF神经网络通过非线性基函数的线性组合,对非线性函数关系具有良好的逼近能力,适用于描述网络流量的非线性、时变性的复杂因素,并可克服BP神经网络训练时间长及计算复杂度高的不足[21].设N维空间有P个输入向量犡p(p=1,2,…,P),它们在输出空间相应的目标值为dP,P对输入-输出样本构成训练样本集.寻找某个非线性映射函数F(犡),使其满足插值条件F(犡p)=dp.函数F描述了一个插值曲面,即所有训练数据点都必须通过该插值曲面.许多突发事件的响应,比如电路中的冲击响应、药理学上的药物消除动力过程,都可以认为是一个指数衰减的过程.网络流量在某一点出现剧烈突变也会对未来的流量值产生类似的效果.因此,RBF网络选择高斯指数函数作为其插值的径向基函数:式中,r=犡-犡p,σ称为基函数的扩展常数.式(10)暗合了根据有限的历史突变值来拟合突变影响(随机成分)的需要.设各边突触权值为ωj,j=0,1,2,…,P,则任务中的随机成分近似为RBF网络输出值:7实验结果为了验证本文所提出的预测任务负载模型、VP-TALK调度算法以及DPTM原型系统,我们进行了3组模拟实验.实验运行平台为配有IntelCore2Q9550CPU、4GBRAM的Windows764位操作系统,预测模型以及各DPTM算法在MATLAB①软件中模拟实现.7.1工作负载组合预测方法的精度验证本文所提出的各种调度算法主要针对高性能、高复杂度的处理器芯片.目前,这一类芯片主要被大规模地使用于企业级的网络路由以及通信服务设备中.所以,多数设备的任务量事实上与网络的流量息息相关.因此,本文采用真实的网络流量②作为DPTM系统的工作量负载输入,用于验证本文所提出的负载预测算法的精确度.实验中我们截取出2004年7月~9月的数据用来作为数据源,选取合适程度的历史数据预测该部分历史数据之后的一个已知负载值,然后滑动历史数据(即舍弃历史数据中的第一个值,添入新的真实负载),再次预测,如此重复进行工作负载的一步预测,就可以得到预期长度的预测值序列.通过对比预测值序列与真实值序列来衡量预测效果的精确度与稳定性.设置傅里叶级数展开长度为10,神经网络的训练样本个数为7,扩展长度为4,观察用14天的历史样本数据,滑动预测3天数据的效果.图6对比了工作负载的预测值与真实值.①②Page8从图6中可以看出:本文的DPTM原型系统所使用的预测算法具有很高的预测精度.为进一步量化本文预测算法的精度,本文计算了平均相对误差和归一化方差式中N为采样点的总数,truthi代表第i个样本点处的真实流量,predicti表示对应采样点的预测值.表1比较了本文所提出预测方法与已有预测方法的预测精度比较.同文献[17]中所提出的各种方法相比,本文预测方法具有更低的平均误差EMRE与较好的方差抖动ENMSE.算法平均相对误差(EMRE)方差(ENMRE)CTARIMAW-ARIMAWGC本文方法7.2VP-TALK算法的DPTM效果验证本文通过与现有的TALK、PB、MO算法进行对比,来验证本文提出的VP-TALK算法的优越性.实验中pr、cr取值分别为0.001s/V和0.01J/V2,温度最高上限设为390K,任务周期固定为10s.支持DVFS芯片的电压值从0.6V到1.4V可调,步长0.1V.根据电压可以得到归一化的速度序列为{0.574,0.6611,0.7324,0.7926,0.8446,0.8901,0.930,0.9670,1}.任务负载率为5%~95%,变化步长为5%.对于4种对比算法,我们分别将能耗情况(单位为焦耳J)和峰值温度情况(单位为绝对温度K)绘制于图7和图8.从图7可以看出,对于能耗:当负载率小于55%时,VP-TALK优于TALK,PB与MO等价.这是因为,在负载率不高于芯片最低运行速度(0.574)时,VP-TALK相当于使用DVS技术的TALK,PB相当于使用单一速度的MO.此时,TALK与PB的调度效果相差无几;在负载率为25%~50%时,PB略优于VP-TALK算法,原因是VP-TALK在电压和时间切换上付出了更大的代价;然而,随着负载率的增加,当负载率大于55%时,VP-TALK的调度效果全面优于其他3种算法,比PB、MO以及TALK的平均能耗分别节省大约20.54%、11.04%、11.42%.表2列出了当负载率大于55%时,能耗节省数据的统计信息,具体说明了VP-TALK在能耗节约方面的优势.TALK平均值从图8中可以看出,当工作负载率小于50%时,各种算法所达到的峰值温度都不超过310K,4种调度算法在峰值温度方面的差距基本小于1,并在最大负载率时近似共同终结于384K.7.3基于机器学习的DPTM原型系统的验证统功耗与温度的调度效果,我们做了两组实验.为了评价本文基于机器学习的DPTM原型系首先,基于图6所示的每个时刻工作负载预测值,我们分别采用4种对比源算法,即TALK[16]、PB[4]、MO[6]、VP-TALK,算出每个时刻每种算法的能耗值与峰值温度;然后将4种对比源算法每个时刻的能耗值与峰值温度进行平均,得到4种对比源Page9算法每个时刻的平均调度效果;最后使用图9分别比较了本文原型系统与4种对比源算法平均调度效果的能耗(单位J)和峰值温度(单位).其次,同样基于图6所示的每个时刻工作负载真实值,采用4种源算法,分别算出每个时刻的能耗值与峰值温度,取其中的最优值作为DPTM调度的理想值;然后使用这批理想值来客观评价集成了TALK、PB、MO以及VP-TALK算法的DPTM原型系统的调度效果;最后使用图10分别比较了本文原型系统与4种对比源算法理论最优调度效果的能耗(单位J)和峰值温度(单位).从图9(a)和图9(b)可以直观地看出:与4种源算法平均调度效果相比,本文原型系统择优式地组合DPTM算法可以明显拉低实时系统的运行能耗曲线和峰值温度曲线,这表明相比于4种DPTM源算法,本文基于机器学习的DPTM原型系统获得了“取其长、去其短”的优化效果.同时从表3的比较数据可以得出“本文原型系统可以获得近似最优的调度效果”的结论,其实验依据如下:(1)与4种DPTM源算法的平均效果相比(图9(a)),本文原型系统采用的择优式组合DPTM算法可获得更优的能耗优化效果,所有时间采样点能耗的累加值ETOTAL(总能耗)可获得18.39%的改进,所有时间采样点中的最大值EMAX(最大能耗)可获得18.77%的改进.整体改进效果非常明显.(2)与4种DPTM源算法相比(图9(b)),本文原型系统可以获得更优的峰值温度优化效果,所有时间采样点中的最大峰值温度TPMAX是最优,所有时间采样点峰值温度的平均值TPAVG比算法均值稍弱.与4种DPTM源算法调度效果平均值相比,本文原型系统可以获得TPMAX1.81的改进,但TPAVG有-1.31的退化.从拉低最大峰值温度的角度来讲,改进效果较为明显.(3)通过图10对本文原型系统的调度效果与理想值进行的直观比较,可以看出本文原型系统获得比4种源算法均值更接近于理想值的优化效果.与表3中理想值的ETOTAL/EMAX/TPAVG/TPMAX参数相比,4种DPTM源算法调度效果平均值会产生28.64%/30.09%/7.70/9.73的差距,而本文原型系统只产生了12.55%/13.93%/9.02/7.91差距.Page10表3DPTM原型系统与源算法、理想情况对比的综合指标评价指标ETOTAL/KJ60.89638.30949.57835.74346.13237.64618.39%32.63228.64%12.55%EMAX/J192.46260.56192.46257.25225.68183.3218.77%157.7830.09%13.93%TPAVG/50.6448.8947.1139.7146.5947.90-1.3138.887.709.02TPMAX/106.87112.93106.4993.33103.65101.841.8193.939.737.918结论本文深入分析与评估了已有的主流调度算法,提出了一系列调度准则和经验.基于这些对芯片工作休眠状态调度的经验准则,我们提出一种在能耗节省方面更具优势的DPTM调度算法VP-TALK,以此算法为基础,综合本文所提出的预测任务负载模型,构建了一个基于负载预测的DPTM系统.仿真实验表明:(1)本文的组合模型在负载预测方面胜过众多的相关模型及算法,平均误差仅为2.89%;(2)本文所提出的VP-TALK算法在较高的工作负载率和共同的峰值温度约束下,比Pattern-Based、M-Oscillating、TALK分别节能20.54%、11.04%、11.42%;(3)本文所提出的综合4种源算法基于机器学习的DPTM原型系统较为接近理想值,与其ETOTAL/EMAX/TPAVG/TPMAX参数相比,只产生了12.55%/13.93%/9.02/7.91的差距.致谢伊利诺伊理工大学的在读博士杨旭,中国电子科技集团24所的黄琨师兄,同实验组的唐亮同学,他们在本文的理论分析、实验方法的讨论中给予了很多建议,在此一并感谢!
