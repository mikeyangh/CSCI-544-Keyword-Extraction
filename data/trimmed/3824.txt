Page1车载自组织网络中一种连通度感知的可靠数据分发机制张利锋1),2)金蓓弘1)禚伟1),2)1)(中国科学院软件研究所北京100190)2)(中国科学院大学北京100190)摘要车载自组织网络可以通过多跳无线广播实现远距离的数据传输,但网络拓扑的快速变化和无线通信质量的不稳定会导致数据传输性能的不稳定.为了应对这些挑战,文中提出了一种适用于城市场景的可靠的、连通度感知的数据分发机制.该机制利用实时收集的交通流量数据,建立路口车辆排队长度变化的马尔可夫模型,并基于此模型估算路段间无线网络连通度的实时变化,以便数据沿最小延迟路径进行转发.该机制还考虑到城市环境对无线信号的干扰,用覆盖消除规则改进了贪心广播算法,通过多候选转发策略增强了路段间数据传输的可靠性.模拟实验结果表明,与基于传染病的数据分发协议、基于静态节点的自适应数据分发协议相比,文中提出的机制能实现高可靠、低延迟的数据分发.关键词车载自组网络;数据分发;连通度感知;可靠传递1引言车载自组织网络(VehicularAdhocNETwork,VANET)是一个以车载无线通信单元为节点、按自组织方式建立的移动通信网络.基于VANET及相关技术(如传感器技术、智能处理技术等),可以实现对车辆运行状态和交通状况的全面感知,进而实现车辆主动安全、智能交通管理、车载娱乐等应用.此外,VANET还能为紧急救援(地震、交通拥堵等)的指挥调度提供数据传输支持[1-3].可以预见,随着VANET的发展,VANET相关应用将快速兴起,发展前景广阔.可靠有效的远距离数据分发机制是诸如城市交通信息采集、道路拥塞通知或查询、出行时间预测、停车位查询等多种VANET应用的关键.VANET应用中的这种数据分发可以通过车车(VehicletoVehicle,V2V)之间的多跳无线通信实现,也可以依托车路通信(VehicletoInfrastructure,V2I)方式实现.在V2I方式中,需要部署路边单元(RoadsideUnit,RSU)等基础设施作为VANET的节点,而且这些RSU可以连接到骨干网络(如Internet,3G).我们注意到VANET中车辆运动速度快导致车流时空分布变化剧烈、车流密度不均匀等固有特征都会导致无线通信链路出现间断连通现象,因此完全基于V2V方式的数据分发会产生不同程度的传输延迟、数据丢失等性能不稳定现象,从而严重影响VANET数据传输的QoS(QualityofServices).而路边单元的大规模部署和维护使其成本相当高昂,这大大妨碍了完全基于V2I方式的应用的实施.目前,能适应于不同交通流量的可靠的远距离数据分发仍然是VANET应用面临的重要挑战之一[4].目前已有多种可用于VANET环境下基于V2V通信的路由和数据分发协议,其中,有些协议需要车辆自身维护路由信息[5-7],由于VANET固有的高动态性会导致路由信息很快过时,所以这些协议需要花费较多的更新消息来维护路由信息,因此实现有效数据分发的代价比较高.而另一些协议使用交通流量的历史统计信息(如VADD[8]将交通流量的历史数据记录在电子地图中)作为转发依据,但VANET固有的高动态性使得历史信息无法反映当前实时的交通流量,这导致这些协议进行数据分发的性能不理想.为了应对VANET拓扑的快速变化和无线通信不稳定等挑战,本文提出了一种可靠的连通度感知的数据分发(ConnectivityAwareReliabledataDissemination,CARD)机制,该机制能适应城市交通流量的动态变化,实现数据的可靠有效分发.CARD机制需要在道路主要路口部署RSU,这些RSU实时收集路口各方向车流的变化情况,并且起中继节点(RelayNode)的作用.本文提出的CARD机制采用如下的工作模式:各个RSU节点周期性地与邻近RSU节点交换各自拥有的流量数据,同时,缓存一定时间段内的历史流量数据,并构造当前的可见视图(即当前RSU节点和与其进行流量数据交换的节点构成的图),若RSU节点未能在交换周期内收到邻近节点的流量数据,那么RSU节点将采用非参数回归的方法预测邻近节点未送达的交通流量数据.同时,RSU节点基于采集到的流量数据使用马尔可夫链建立路口各个方向车辆排队长度的动态变化模型,并据此进一步估算各路段间VANET连通性的实时变化,从而计算出路段间的数据传输延时.这样,RSU节点在收到要传递的数据后,将基于当前可见视图为其提供最小延迟转发路径并进行数据转发.此外,本文还提出了融合覆盖消除规则的贪心广播算法来确保数据在路段内被可靠传递,即数据发送者在广播数据给所有1跳邻居时携带其邻居列表,接收者根据覆盖消除结果及与发送者的距离来自主决策是否转发数据,以保证数据被可靠地传递到下一个路口.本文第2节介绍相关工作;第3节描述基于连通度分析的数据转发方法;第4节给出了融合覆盖消除规则的贪心算法;第5节是对数据分发机制的实验评估;最后一部分是全文的总结.2相关工作网络拓扑变化快、链路生存期短、网络分区频繁是VANET中数据分发面临的最大挑战[9].同时,城市密集的路边建筑、公共设施和各种不同类型车辆及车辆间相对运动,会加剧VANET无线通信信道质量的不稳定性,从而增加VANET中数据分发的不可靠性.广播是VANET通信的基本机制,它能实现最大无线覆盖和快速的数据传播,但它也存在广播风暴、吞吐率低等问题.为了改进广播机制的性能,文献[10]提出了3种用于VANET的广播抑制技术,其基本思想是接收节点根据发送数据的节点距离自Page3身的远近计算转发概率或当前所处的时间槽并设置转发等待时间,发送节点在给定时间内收不到数据副本则重新广播数据.但该方法未考虑城市场景下路口交通流的特性,并且不能很好地应对节点分布不均匀的场景.文献[11]利用局部周期性的信标消息构造节点的连通支配集,并对在支配集内的节点设置较短的定时器用于广播数据,当定时器触发时,如果该节点发现有邻居未收到数据则再次广播数据.该方法能有效提高广播的可靠性,但不适合节点拓扑变化剧烈的场景,同时构造连通支配集的开销较大.基于传染病的数据分发协议[12]在节点相遇时通过2次握手来交换数据,能实现数据的快速传播.不过,传染病协议是一种尽力而为的数据分发方法,在节点密度高时会导致无线信道的过度竞争而使通信性能快速的衰退.利用广播机制可以实现VANET高速路场景下数据的分发[13],但它无法适应城市场景下数据分发的特点.城市场景下,目前更多的研究集中在通过车辆节点之间相互协助获得特定路段车流密度信息从而确定数据分发策略,这种方式无需基础设施的支持,但无法有效适应车流随时间的动态变化,也未考虑红绿灯信号对车流连通性的破坏作用.文献[5-6]通过周期性地发送连通性探测数据包来收集各个路段的车辆密度,并将此车流密度广播到指定的区域中,从而使路段中车辆节点获取路段无线网络状态的实时信息.但是,广播车流密度数据会产生大量的通信开销,同时这种定期广播策略也无法应对车流密度的快速变化.文献[7]中,数据发送方发起路由发现过程,即广播路由发现消息,收到路由发现消息的车辆节点将自己的位置、速度信息填入该消息并再次广播,当该消息到达部署在路边的网关时,由该网关选择最佳中继车辆并发送回复消息给请求者.请求者使用回复消息中的路由路径来分发数据.但车辆运动导致该方法需要不断重复路由发现过程,车流密集时会产生严重的广播风暴,伸缩性差.文献[8]假设已在电子地图上标注了路段车流量的历史统计数据,当待发送数据到达路口后,依概率选择延时最短的路径转发数据,但地图上的统计数据并不能准确反映当前路段的实际动态车流情况.为了改善这一情况,文献[14]提出了基于静态节点的自适应数据分发协议(简称SADV协议),它在交叉路口部署静态节点,当路口无车或没有前往最优路径的车辆时,数据存储在静态节点中,等待前往最优路径的车辆.不过,它没有考虑车流的分布特征对VANET连通性的影响,也没有考虑红绿灯对车流的干扰作用.关于VANET下可靠的数据传输中,文献[15]中为了使数据传播可靠性最大化的同时减少广播风暴和隐藏节点的问题,在节点接到消息时只允许距离发送者最远的节点转发该消息.接收者节点收到消息后发出黑场信号(blackburst),信号持续时间正比于接收者到发送者的距离,当它发送完该信号后,如果不再能侦测到其它的黑场信号,则由当前节点广播数据.文献[15]通过上述类似RTS/CTS的RTB/CTB机制来解决隐藏节点的问题,同时通过确认消息提高可靠性,但此方案在节点密度高时可能需要多轮碰撞解决过程从而会导致较长的延迟和通信开销,而且消息到达路口后会沿多条路径广播数据,也会带来大量的消息传递开销.为了实现VANET中有效的数据分发,有一些研究工作引入了VANET的连通度.VANET的连通度是指车辆节点之间能够通过无线网络进行通信的概率,通常节点i,j之间的1跳连通度可以用概率p(d(i,j)<R)来表示,其中d(i,j)表示节点间的欧几里得距离,R为无线传输范围.考虑到连通度是影响通信性能的关键因素,文献[16]研究了城市场景下VANET通信的连通性问题,其仿真实验表明,形成连续的多跳通信链路的概率随道路的长度增加而指数下降.当车辆密度为4辆车/(250m)时,在1000m路段内无线网络连通的概率为68%,而2000m内无线网络连通的概率仅为42%.当车辆密度为2辆车/(250m)时,则对应的概率仅为21%和7%.文献[16]中认为没有基础设施(如RSU)的支持实现可靠的数据分发是行不通的.文献[17]使用元胞自动机模型作为车辆运动模型推导出了城市车流连通度分析模型,同时通过仿真实验验证了在车辆的密度低于特定阈值(60辆/km2)时,仅依赖V2V通信,VANET的连通度将无法支持上层应用.文献[18]提出了分布式的车辆广播协议,根据不同的连通度条件动态选择不同的工作模式.在连通度良好的场景下采用文献[10]中的方法;在车辆稀疏的场景下车辆节点接收到消息后立即广播给相反方向的车辆,相反方向的车辆如果找不到下一跳则传回原方向;否则车辆节点工作在全不连通的状态,此时它携带数据直到找到邻居.该方法利用反方向的车辆来中继消息,但它同样存在文献[10]中的问题.文献[19]提出利用线路固定、行驶规律可预测的公交车作为移动网关来中继从RSU到移动节点的Page4数据,使用马尔可夫决策过程计算最优期望延迟转发路径,从而降低数据分发的延迟和抖动.而文献[20]提出当某个RSU无法在通信范围内把移动节点所需的数据全部发送时,由邻居RSU选择合适的前往该RSU的车辆节点,用于协助下载未完成的数据,文献[20]给出了协助车辆节点的选择算法.VANET中有效的数据分发需要准确的连通度模型刻画车流时变的特性.目前关于VANET环境下连通度模型的研究主要集中在高速公路场景下[21-22],通常假设车流为自由流,车辆间距服从特定分布(比如指数分布).文献[23]使用元胞自动机作为车辆运动模型,基于离散时间的马尔可夫链来估计车辆速度变化,并据此估算网络是否会发生分区.此方法计算过程复杂,大量的计算开销严重影响了该方法的伸缩性.文献[24]引入交通流理论中流量、密度和速度的关系,建立了城市场景下考虑车辆间相互作用的连通度分析模型,讨论了交通信号灯对车流速度和分布的影响.它使用确定性的流体动力学模型(守恒方程)和随机模型结合的方法推导连通度模型,但由于文献[24]在实际计算路段上连通度时需要所有出入口的交通流量数据,这导致它无法直接用于VANET应用中.可以看到,已有的VANET数据分发协议未能充分考虑车辆到达路口的随机时变特性以及城市场景中车流的周期性中断、连通的特点,而车流的中断会严重影响VANET通信的连通度[25],进而影响数据分发的性能.3基于连通度分析的数据转发我们提出的CARD机制需要在主要路口设置RSU节点.这些RSU节点不仅周期性采集交通流量数据、计算车辆的到达率,而且与邻居RSU节点相互交换这些流量数据.在此基础上,RSU节点预测各路口的车辆排队长度,估算路段间VANET连通度的实时变化,并据此计算路段间的多跳传输延迟.这样,当RSU节点收到需要发送到某目的地的数据后,它将根据预测到的各路段数据传输延迟来决定数据转发的路径.值得注意的是,RSU节点的潜在功能是多方面的,它若与路口信号灯集成,不仅可以实现数据的采集、中继、路口辅助安全驾驶,而且通过自组织的交通流量数据的交换,可以实现智能交通诱导、出行时间规划等[4].3.1路口车辆到达率采集与交换路口RSU通过周期性的信标消息通知进入其通信范围的车辆报告当前的位置,路口j的RSU节点Rj通过车辆将各个方向车辆到达率周期性地传播给邻近的k跳(此处1跳是指相邻的2个路口)路口的RSU节点.RSU节点根据τ时段内各个方向到达车辆的报告来估算各个方向车辆的到达率,这里假定车辆以泊松流到达路口[26].若Rj在某个广播周期内没有接收到邻居路口RSU节点Ri传送的到达率数据,则Rj通过非参数回归的方法即下面的K近邻核函数法预测路口i的到达率数据.若路口i的到达率数据经过一段时间后到达RSU节点Rj后,Rj使用此到达率数据更新其缓存中的估算到达率数据.交通流量的变化常呈现周期性[27],比如每天同一时间段内交通流量数据往往具有相似性.这里,我们使用K近邻(KNN)的方法[28]来检索邻居路口的到达率历史数据并估算当前的缺失到达率.状态向量包括t-1时刻到达率、t-2时刻到达率、时间、日期属性(星期几,是否节假日),当前数据与历史样本数据中状态向量相似度度量采用欧氏距离,度量d=∑4为当前特征分量,q为历史数据中的特征分量.为减少KNN的计算开销,使用KD树存储邻近路口的到达率历史相关数据以提高检索速度,搜索历史数据时选择最近的4组数据,分别用λh1,λh2,λh3,λh0表示.在获得路口特定方向的历史到达率数据后,依据式(1)估算其当前到达率.(pk-qk)(k=1上式的计算过程中,di表示第i个匹配的历史样本数据的状态向量与当前状态向量的相似度距离.3.2基于连通度的数据转发数据到达路口后,RSU节点以最小延迟为目标为数据选择转发路径,而路段间延迟依赖于路段间VANET的连通度.CARD机制通过估算网络连通度来计算路段间的传输延迟,主要包括下面3个步骤:首先,根据路口采集的交通流量数据建立各个路口排队长度变化的马尔可夫模型.在t0时刻,RSU节点以周期τ根据相邻路口的排队长度变化来估算[t0,t0+τ]时段内路段间车辆的密度,以便获得VANET连通度的实时变化,在估算的过程中,不仅考虑了路口红绿灯对车流的控制作用,还考虑了车Page5流建立无线连通链路的条件.然后,基于路段间车流密度估算网络连通度,进而估计数据沿当前路段传递产生的延迟.最后,使用Dijkstra算法根据从当前路口到达目的地vd途经的各个路段的传输延迟计算最短延迟的转发路径,其中vd是指距离真实目的地最近且在当前路口RSU节点可见视图中的RSU节点,下文提到的目的地都是指vd.下面分别介绍基于马尔可夫链的路口排队长度预测、路段间数据传递的延时计算以及最短延迟路径计算过程.3.2.1基于马尔可夫链的路口排队长度预测车辆到达路口的过程可用一个随机过程描述,车辆到达路口的过程服从特定概率分布,在绿灯期间车辆离开率是一个常数G.于是,任意时刻t路口车辆排队长度可以用随机变量L(t)表示为其中,A表示[t-τ,t]内车辆到达路口数目的随机变量,D为离开路口的车辆数目.从式(2)可以看出上述排队过程在时刻t的排队长度只与t-τ时刻的排队长度、[t-τ,t]内到达率以及离开车辆数目有关,因此是一个更新过程.为了计算的简化,这里通过迭代方式计算绿灯期间内排队长度的变化.假设τ时段内车辆到达率为常数,将一个绿灯持续期划分为n个时长为τ的时段,通过kτ内采集到的车辆到达率和排队长度推算(k+1)τ时段的路口排队长度变化(其中k,n为整数,0<k<n).设绿灯信号时,在ω(τ=u×ω,u为正整数)时段内排队长度从i到j的转移概率(i,j>0),用qij(ω)表示,那么排队长度从i到0的转移概率为qi0(ω)=∑ωD-i而排队长度从i到j的转移概率为qij(ω)=Pr(A(ω)=j-i+ωD),j>i-ωD假定车辆以泊松流到达路口[26],任意时段ω内有i辆车到达的概率:其中λ为单位时间段内车辆的到达率,其值在τ内为常数.设绿灯信号开始后kτ时刻车辆排队长度的概率分布向量犘(0)=[P(0)l表示排队长度为l的概率,而m在实验中取值P(0)为50),kτ+ω时刻车辆排队长度的概率分布向量犘(1)=犘(0)qij(ω),那么,迭代u步之后,车辆排队长度概率可以表示为已知kτ时刻的排队长度,则根据式(6)、(7)可以算出(k+1)τ时刻的车辆排队长度的期望为在红灯时,只需将上面式(4)中的D设为0即其中t=(k+1)τ,m为转移矩阵的维数.仍可按式(7)求出期望的路口车辆排队长度.3.2.2数据传递延迟模型下面基于路口排队长度模型分析路段间时变的VANET连通性,并推导数据传递的延迟模型.假设路段ij之间为双向单车道,长度为Lij,此路段车辆的平均速度为vij,无线通信单元的通信半径为R,相邻路口间交通信号灯是同步的.绿灯持续期路段内车流主要由绿灯信号开始后直行进入的车流和上一红灯信号持续期左、右转进入当前路段的车流组成.绿灯信号开始后,直行从路口i,j通过的车辆在路段ij建立通信链路的最短时间为MTij=(Lij-R)/(2×vij).绿灯信号开始MTij时间以后直行进入路段ij的车辆间距服从指数分布[8,24,29],则在t时刻(t>MTij且t=mτ,在τ的整数倍时计算数据传递延迟)其1跳连通概率为其中,ρij(t)为路段ij之间的直行车流密度,x为节点间距离.下面通过估算路段间的车辆数目来计算ρij(t),我们把在t时刻直行进入路段ij的车辆数目期望记为E(Nij(t)).绿灯信号开始后从路口i出发的直行车辆经过时间Lij/vij后到达路口j,计算从i到j方向的车辆数目时不考虑停在路口j的车辆.在t时刻后,时段τ内从路口i直行通过的车辆数目期望为E(Pi(τ))=αmax{E(Ni(τ))+E(Li(t-τ)),τD},其中E(Ni(τ))为时段τ内到达路口i的期望车辆数目,α为直行率.于是t时刻直行进入路段ij间车辆数目为E(Nij(t))=E(Nij(t-τ))+E(Pi(τ))-E(Aj(τ))也就是说,t时刻直行进入路段ij的车辆数目与t-τ时刻的车辆数目、τ时段内直行从路口i进入路段的车辆数目以及到达路口j的车辆数E(Aj(τ))有关,但E(Aj(τ))只有在t>Lij/vij才需要计算,因为这之前从路口i直行进入路段的车辆节点不会到达路口j.然后,绿灯信号后进入路段ij的车辆密度可用下式计算:Page6ρij(t)=(E(Nij(t))+E(Nji(t)))/Lij(10)下面考虑红灯方向路段间VANET连通性情况.路段ij在红灯开始后MTij时间内可能是连通的,另外,考虑到从绿灯方向车道左、右转进入红灯方向车道的车流E(Ti(t)),其值与直行的车流具有比例关系(其值为1-α).此时红灯方向路段的车辆数目可以表示为E(Nij(t))=E(Nij(0))-E(Aj(t))+E(Ti(t))即红灯开始时刻路段上的车辆数与转向进入的车辆数之和减去[0,t]时段内到达j路口的车辆数.而值得注意的是直行车流在绿灯信号开始后MTij才有可能建立无线链路,考虑到路段ij红灯期间从绿灯方向车流转向进入路段ij对连通度的影响,我们把绿灯方向路段ij间数据传递看做是直行和转向车流分别传递的结果.即路段ij之间在绿灯信号开始后时刻t从路口i到j的数据多跳传输延迟表达为dij(t)=σij(t)+D(1)式(12)表明在直行车流建立无线链路条件未满足之前,由红灯阶段转向进入的车流和当前直行车流共同传递数据.其中σij(t)为通过转向进入路段ij的车流携带转发数据的延迟,其车流密度ρ(2)是依据拐弯前道路上在绿灯阶段通过与路段ij相交的路口的车流来估计,其值ρ(2)E(Tj(t)))/(Lij-2vijt).σij(t)=(1-e-Rρ(2)其中d0表示一跳无线传输的延迟,e-Rρ(2)间距大于R导致需要暂时通过车辆携带数据的概率.而D(1)ij(t)=(1-e-Rρ(1)D(1)其中直行车流密度ρ(1)(2vijt).当直行车流经过MTij后车辆间距在全路段内可通过指数分布刻画,此时数据传递主要通过直行车流的无线多跳通信和携带相结合来实现,传输延时通过式(15)计算:Dij(t)=(1-e-Rρij(t))LijRd0+e-Rρij(t)Lijvij式(13)~(15)表明,数据传输延时为通过多次1跳无线传递延时与车辆携带数据的延时之和.我们把在一时间段内由多次车-车一跳通信和一辆/多辆车自身行驶形成的从路口i到j的通信链路称为在此时间段内实现路段ij间数据传递的基本通信条件.3.2.3最短延迟路径计算数据到达路口i的RSU节点后,RSU节点根据当前路口i到目的地vd之间各个路段的延迟使用基于优先级队列实现的Dijkstra算法来计算延迟最短的转发路径.特别地,考虑到低车流密度条件下应主要关注与路口i距离近的路段延迟,故为最短延迟计算过程引入式(16),其中参数β∈(0,1)用来调整各路段延迟dk,k+1的权重,l为Dijkstra算法从i出发到目的地vd的搜索深度.计算总延迟时距离路口i近的路段具有较大的权重,其中参数β的取值与各路段的车流平均密度有关,车流密度高的路段β的值较大.式(17)给出了β与平均无线传输半径R内车流密度ρijR的关系,其中的偏移量θ是形成连续多跳连通无线链路的车流密度下限[16],实验中取θ=6,即在长度为无线传输半径R的道路上有6辆车才能确保多跳无线链路的连通性.4相邻路口间的数据可靠传递在城市环境中,VANET无线信号会受到各种因素的影响,比如路边建筑、公共设施以及路面上各种类型和各个方向的车辆的影响.因此,很多VANET应用在期望数据传递延迟最小化的同时,往往还要求保证数据传递的可靠性.而此时,VANET下数据传递的特点,即数据由车辆节点携带或传递,使得如何分布式地确定合适的用于数据转发的车辆节点成为实现数据可靠传递的关键.CARD机制基于改进的贪心广播算法选择转发节点,即发送节点广播数据包消息.该消息包含了要传递的数据、发送节点的1跳邻居列表、刚经过的RSU节点的位置、发送节点和该RSU节点之间的距离等.如果1跳范围内没有任何邻居,则发送节点继续携带数据并等待转发机会;否则,在收到数据包消息后,邻居节点检查自己的邻居是否已被发送者邻居列表覆盖,如已被覆盖,则丢弃该数据;否则,该节点成为候选转发节点.这种覆盖消除规则可以有Page7效实现邻居消除,减少广播次数[30].而候选转发节点根据自己到发送者的距离设置定时器(图1中第18,19行),距离越远,定时器越短,其中,T为1跳等待的最长时间.这样,一方面,距离发送者最远的节点最先有机会转发数据;另一方面,在较远的节点失效时,次远的节点能自动承担数据转发的角色.注意由于相对运动,源节点可能收不到通信范围边缘节点发送的确认数据,从而导致源节点再次发送数4.//Mdenotesthedatapacketwhichneedstobedelivered,andconsistsofID,data,sendernodes,aneighborlistofsN(s),thecoordinatesofO,andthedistancebetweenOands图1融合了覆盖消除规则的贪心广播算法下面讨论算法传递数据的可靠性.假设数据包M需要从路口i传递到路口j,且两路口相距Lij,路段间车辆的平均速度为vij,则存在以下3种情形:(1)假设节点S携带数据M从路口i驶向路口j,并且在行驶过程中没有任何其它车辆节点出现在通信范围内.如果节点S成功行驶到路口j的RSU节点的通信范围内,则M一定会被成功传输给路口j的RSU节点,传输最大延时为Lij/vij.如果节点S在到达路口j的RSU节点的通信范围之前停下来,则只要S的无线通信单元不发生故障,数据M生命期没结束,且有节点C经过节点S,则M仍然可被C接收到并向路口j的方向传递.(2)假设节点S携带数据M从路口i驶向路口j,S的通信范围内有一同方向节点k且该数据不是来自节点k,则将数据转发给节点k.如果没有同方向行驶的节点但存在反方向即从j驶向i的节点B,那么,B也会接收M,B接收到M后,如果其后方(靠近j的方向)有节点存在,则数据会被继续向据,进而增加系统的通信开销,理论分析表明在节点间相向运动速度达到20m/s时,源节点重传数据的概率不超过1%,因此这部分开销是可以接受的(相关分析见附录).此外,转发节点将自己到RSU节点的距离更新到数据包中(图1中第21行),以防止反方向车辆转发数据时出现数据回流的现象.图1给出了具体的算法描述,每个移动车辆节点都部署有如图1所示的算法,用于传递数据.路口j的方向传递.否则由B携带M,当节点B比节点S离路口i更近后,M会被重新传回给节点S来携带.(3)假设节点S通信范围内有多个车辆节点.我们通过图2所示的数据转发典型场景来说明算法的执行.图2中,节点S发送数据时携带1跳邻居列表{A,B,C,D}.根据覆盖消除规则,由于A的邻居都已被S覆盖,则A不会转发M.B、C、D都有邻居节点未被S的邻居列表覆盖,但车辆节点D距离S最远,于是它最有可能转发数据.如果D成功转发数据,则{S,A,B,C}都会再次收到D发送的数据包M,该数据包与M具有相同的ID,于是{S,B,C}取消各自的定时器.如果D未能转发数据,则一小段时隙后节点C的定时器触发数据转发,同时,若节点S发送数据时,它的邻居列表中的节点D已不在其通信范围内,这种情况并不影响数据的传输,因为节点C会完成数据的转发.也就是说,该算法能够容忍转发节点的失效.如果节点S在一段时间T后Page8没有收到来自其它节点发送的相同ID的数据包(可能是由于节点S的隐藏节点问题或节点间相对运动),则S会再次转发此数据,重复转发的数据到达路口后会被RSU节点过滤.定时器最大等待时间T是算法设计的重要参数之一,T的大小与1跳的无线传输时间、节点密度、节点的通信范围以及MAC层队列长度有关.文献[10]采用了类似的等待技术,通过实验(基于802.11a协议)统计了不同车流密度条件下一跳无线传输的延时,认为在车流密度为100台/km车道下等待时间T取值应不小于5ms.多车道车流密度可以近似认为是单车道的叠加,考虑到实际场景中车道、VANET通信范围等因素,实验中将T设置为一个上限值.通过缩短T可以一定程度降低总传输延迟,下一步研究将考虑基于车流密度和传输范围来动态调整T的大小从而优化T的设置.上述讨论说明了CARD机制能在基本通信条件下保证消息在路段间的可靠传输,特别是,它允许反方向车辆来中继数据,能有效提高连通度,增加转发的效率.其次,CARD机制中数据包转发的次数并不会随着车辆密度的上升而增加,因此可以有效地避免广播风暴,具有良好的伸缩性.此外,当车辆密度很大时,为了避免邻居列表的增长而导致数据包不断变大,在实现上可以使用概率数据结构(如bloomfilter)来标识邻居.同时,可以根据车流密度动态调整信标消息的发送间隔以减少信标通信开销[31-32].5实验评价本节评估CARD机制的性能和开销.我们用数据从源节点到达目的节点所需的传输延迟、数据成功分发到达目的地的比率即数据到达率来衡量数据分发机制的性能,并用数据从源节点传输到目的节点所需的总消息数量衡量数据分发机制的开销.我们选取了基于传染病的数据分发协议[12](下文简称为EBDD协议)和SADV协议[14]作为对比对象.5.1实验搭建我们基于真实的地图构造模拟实验中的道路布局.我们在北京市地图上,选择了中关村地区一块6000m×4000m的区域,通过Google地图获得了该区域内的道路拓扑结构、路段长度等数据.模拟实验中道路均为双向车道,并在其中的35个主要路口设置了交通信号灯和RSU节点,其中,RSU节点能同步获得信号灯周期.为了仿真城市中的路边建筑,我们在路边设置了阻挡无线信号的障碍墙.图3显示了实验所使用的部分道路拓扑,图上黑色圆点表示RSU节点.我们基于NCTUns6.0[33-34]平台编写了相关的实验程序(NCTUns集成了交通模拟和无线通信仿真,能较方便地实现VANET的仿真实验).实验中,车辆的移动遵循了有交叉口管理的智能驾驶员模型(IDM-IM).目前,已有随机模型、交通流模型、跟驰模型、流交互模型[4]等多种运动模型来刻画车辆的运动特征,它们基于不同的假设,关注车辆运动的某些方面的特征,适合不同的应用场景,比如随机模型、交通流模型比较适合刻画高速公路场景.在城市场景中,道路拓扑和交通规则对车辆运动的约束使得车辆间的相互作用、交叉路口不同车流的相互影响对车辆的运动特征产生不可忽视的影响[25],而智能驾驶员模型能够重现城市场景中的这些特征,所以为我们所选用.实验中,车辆节点均安装GPS接收器,这些节点的无线通信协议设置为802.11,其它参数设置见表1,RSU节点使用相同的通信协议和参数配置.实验开始前,先随机部署一定数量(100~1035)的车辆节点,并让车辆在路口以一定概率转向,在一个信号灯周期(默认周期为50s)中,红灯时间和绿灯时间相等.实验开始后,移动节点每隔1s以10%的概率产生数据传输请求,其目的地随机生成,其中SADV协议和CARD机制的目的地为RSU节点,Page9而EBDD协议的目的地为随机选取的35个车辆节点.每个实验持续1个小时.无线通信半径车辆速度路段平均长度车辆数目信号灯周期数据传输请求发生率连通度估算周期信标发送率数据TTL5.2实验结果和分析我们进行了3组总共48h的实验.从获得的实验数据,我们分析了车流密度、信号灯周期和连通度估算周期/延迟更新周期对数据分发的性能和消息开销代价的影响.(1)不同车流密度下的数据分发车流密度是影响VANET连通度最重要的因素.本组实验主要测试了3种机制在不同车流密度下的性能表现.本组实验为SADV协议、CARD机图4不同车流密度下数据分发性能对比图4(b)记录了在不同车流密度下3种机制的数据分发延迟.EBDD协议在中低密度车流时传输延时一直表现突出,但随着车流密度的不断增大,传输延迟开始增加,这表明该协议的可伸缩性不甚理想.同时,我们看到SADV协议随着车流密度增大,其传输延时迅速降低,这是因为SADV协议通过反向车流携带路段间的传输延迟更新,车流密度大时将提高相邻路口传输延迟更新的及时性,从而减少数据分发的总延迟.图4(b)中CARD机制的传输延迟一直小于SADV协议,而且,随着车流密度的增加,CARD机制的延迟呈现近似线性的降低,表现出了较好的伸缩能力.这也说明了CARD机制中以最小延迟为目标的转发策略的有效性.图4(c)记录了第1组实验中3种机制各自消制设置了35个RSU节点和100~1000个车辆节点,为EBDD协议设置了135~1035个车辆节点.从图4(a)可以看到,当节点数目从135到1035的变化过程中,3种机制的数据到达率都有较大幅度的提高.其中,EBDD协议对车流密度最为敏感,在节点数为635时数据到达率达到峰值.随后,随着节点数目的增加,EBDD协议的数据到达率有缓慢的回落,这主要是由于EBDD协议在节点间相遇后采用尽力而为的方式交换彼此没有的数据.当车流密集时会导致大量的数据包碰撞,从而不可避免地产生丢包.而SADV协议和CARD机制由于在路口设置了静态RSU节点,随着转发车辆的增多,它们能够获得数据到达率的稳步提升.CARD机制在路段间还使用了可靠的转发算法,极大地减少了丢包的概率,从而获得较高的数据到达率.注意到,CARD机制中数据仍然有约4%~35%未能到达目的地,主要的原因是车流的密度往往分布得很不均匀,使得部分数据在到达RSU节点后会遇到长时间没有车辆来中继的情况,从而导致数据在其生命周期(即TTL)结束时被丢弃.耗的消息总数量.从图4(c)可以看到,整体上,SADV协议的消息开销最小,这是由于它无需信标消息,除了传输数据的开销外,它仅需要邻居RSU节点之间交换路段间数据传输延迟数据.而CARD机制的消息开销高于SADV协议的主要原因是CARD机制车辆为了获得邻居列表需要通过车-车之间的信标消息周期性与邻居车辆交换信息,除此之外,CARD机制并不会比SADV协议引入更多的消息开销.考虑到车-车之间的信标消息是许多VANET应用必须发送的基本消息,所以,在这些VANET应用中,CARD机制并不会增加实质性的消息开销.图4(c)中,EBDD协议的消息开销不断持续地急剧增长,这是由于按照EBDD协议,每次节点相遇时都要交换消息摘要列表和消息项,而且Page10列表的长度随着节点密度的上升而急剧增加.(2)信号灯周期对数据分发的影响路口信号灯造成交通流的周期性中断,也对VANET连通度造成了显著的影响.因此,第2组实图5信号灯周期对数据分发的影响如图5(a)、(c)所示,在低密度车流时,随着信号灯周期从20s增加到60s,SADV协议和CARD机制的数据到达率均降低了约5%,同时传输延迟均增加了约10%,这说明低密度车流时信号灯对VANET连通度的影响较大,长的信号灯周期不仅导致停车时间增加而且增加了传输延时;但EBDD协议的数据到达率随着信号灯周期的增加却提高了约10%,这主要是由于按照EBDD协议,车辆节点等待信号灯时可以为节点相互传染提供了更多的机会.从图5(b)、(d)可以看到,高密度车流下,随着信号灯周期的增加,CARD机制的传输延迟在信号灯周期为40s时达到最小,而且此时的数据到达率与信号灯周期为20s时相比提高了约8%.而SADV机制的整体传输延时比CARD机制高约20%,我们认为这是由于SADV机制在计算数据传输延迟时仅依靠历史延时信息,没有考虑信号灯的干扰作用,未利用信号灯周期变化信息,而CARD机制在考虑VANET连通性及通信延迟时,区分了红灯、绿灯的情况并考虑了无线通信链路建立所需的时间,从而减少了传输延迟.而EBDD协议在信验考察了信号灯周期对数据分发的影响.图5(a)~(f)分别记录了在低密度车流(200台)及高密度车流(1000台)情况下数据到达率、数据传输延迟及消息开销随信号灯周期变化而变化的情况.号灯周期为40s附近达到最大的数据到达率和最小延迟,当信号灯周期为50s时,延迟增加,数据到达率也略有下降.根据图5(d)的数据,可以看到,高密度车流下,短的信号灯周期会导致数据传输延迟增加.这是因为绿灯信号开始后形成多跳连通网络需要一段时间,如果信号灯周期过短,那么可能多跳链路尚未形成,车流就已被信号灯中断,这种情况下,数据传输延迟会增加.另外,从图5(e)、(f)上的数据,我们发现信号灯周期对SADV协议的消息开销几乎没有影响,对CARD机制的影响也很有限,其消息开销的变化率不超过2%.而EBDD协议,在低密度车流下,随着信号灯周期的增加,消息开销有小幅上升,而车流密度高时消息开销上升较明显,最多达10%左右.(3)连通度估算周期/延迟更新周期对数据分发的影响CARD机制中以周期τ计算路口车辆排队长度的变化,并据此进一步推算路段间数据传输的延迟,此周期称为连通度估算周期.在SADV协议中,相邻路口静态节点周期性传递当前路段间数据传输延Page11迟数据,该传输延时被SADV协议用作转发数据的依据.鉴于两者具有类似的作用,所以我们设计了下面这一组实验,主要考察CARD机制中,连通度估算周期τ和SADV协议中相邻静态节点延迟更新周期η对数据分发性能的影响.总体上看,随着τ和η的增加,CARD机制和SADV协议的到达率都有所下降,但它们在不同车流密度条件下(图6(a)为200辆,(b)为1000辆)到达率下降的幅度很小,CARD机制下降约1%,而SADV协议下降约2%.这是因为二者都在路口部署RSU节点来暂存数据,有效避免了数据到达路口时没有可用移动节点中继数据而导致数据丢失的情况.CARD机制中τ对数据的传输延迟性能的影响更为明显,在低密度车流时,随着τ的增加,CARD机制的传输延迟有所增加,而在高密度车流下传输延迟的增加更为显著.如图6(c)、(d)所示,在τ从5s增加到20s的过程中,高密度车流下CARD机制的数据分发延迟增加图6估算周期/更新周期对数据分发的影响6结论关于消息开销,从图6(e)和(f)可以看出,不同车流密度条件下,CARD机制中的τ和SADV协议中的η对消息开销的影响极为微小,这是因为它们的变化只影响了相邻路口交换到达率数据和延迟更新数据的频率,而这部分数据的开销相对于总通信量来说是很小的.约5.6%,低密度车流下,仅增加2%.这里延迟的增加主要是由于τ的增加导致了RSU节点估算路段间连通度的准确性下降,从而无法有效应对车流密度时变的特性.低密度车流时τ内到达路口的车辆数目很有限,所以τ的增加对估算的准确性的影响有限;而在高密度车流时车辆到达率变化较大,τ的变化对路段间连通度的估算的准确性影响较大.SADV协议中η增加时,同样导致传输延迟在高密度时增加了约9%,而在低密度车流时增加了4%.与CARD机制的τ相比,SADV协议中η对性能的影响更明显,这是因为SADV协议中,η增加后,静态节点所获得的路段间的延迟数据无法准确反映当前路段间数据传递延迟,同时η的增加也增加了延迟更新数据不能及时送达的概率.另一方面,CARD机制中,若τ增加使得邻近路口的车辆到达率数据不能按时送达,那么其车辆到达率情况将通过该路口的历史数据来估计,而SADV协议没有类似的机制.可靠有效的远距离数据分发机制是很多VANET应用的基础,而城市场景下车流的运动特征、道路拓扑、交通规则不仅决定了VANET时变的连通度属Page12性,也对VANET上可靠有效的远距离数据分发提出了挑战.本文以数据传递的低延迟和高可靠为目标,依托在主要路口设置中继节点,并利用路口实时采集的交通流量数据,提出了一种基于路段间连通度模型的支持数据远距离传递的数据分发机制即CARD机制.本文的主要贡献有:建立了路口车辆排队的马尔可夫模型,给出了基于路段间VANET连通度的数据传输延迟计算方法,从而为数据在路口的转发提供了决策支持;提出了一种融合了覆盖消除规则的贪心广播算法,该算法能在基本通信条件下保证数据的可靠传输.大量的模拟实验表明:与SADV协议相比,CARD机制其数据传递到达率能提高约10%,传输延迟降低了约5%~12%,并具有基本相当的消息开销;与EBDD协议相比,CARD机制具有更稳定的性能和开销,特别是,EBDD协议在高密度车流情况下,传输延迟增加并且消息开销急剧上升,这表明它的伸缩性较差.本文下一步的工作主要有:将数据分发扩展到分发目标为动态节点的情况;优化车辆节点用于数据重发的定时器最长等待时间的设置;考虑RSU节点的最小化部署策略以及RSU节点中(如路况信息采集应用中的)数据聚合的方法.
