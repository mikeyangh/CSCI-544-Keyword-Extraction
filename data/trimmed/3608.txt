Page1干扰约束和负载均衡的无线Mesh网络网关部署策略吴文甲杨明罗军舟王维(东南大学计算机科学与工程学院南京211189)摘要网关部署是无线Mesh网络规划面临的重要挑战之一.在Mesh路由器(MR)已完成部署的前提下,如何计算同时满足网络性能要求和用户流量需求的最小网关(GW)集合,已经被证明是一个NP-hard问题.文中提出了一种满足干扰约束和支持负载均衡的网关部署策略ICLB-GPS,在部署网关时消减链路干扰并实现网关负载均衡.ICLB-GPS策略综合网关选择、转发树构建和转发树间的节点迁移来完成负载均衡的网关部署,主要包含覆盖重叠和干扰消减的网关选择、基于树间节点迁移的网关负载均衡两个算法.仿真实验将ICLB-GPS算法与其它算法在网关数量、MR-GW路径长度、链路干扰程度及负载均衡指数方面进行比较,其结果表明该算法在不增加部署成本,不提高MR-GW路径长度的情况下,消减了链路干扰,实现了网关负载均衡.关键词无线Mesh网络;网关部署;负载均衡;干扰约束1引言随着无线网络应用的不断发展和普及,为移动用户提供无处不在的无线宽带接入已成为一个广泛并且迫切的需求.无线Mesh网络[1-2](WirelessMeshNetwork,WMN)有着高带宽、高可靠性、覆盖范围广、部署成本低和接入便利等优势,具有广阔的应用前景.WMN是一种具有自组织、自配置和自愈特点的多跳无线网络,由Mesh路由器(MeshRouter,MR)和Mesh终端(MeshClient,MC)两种类型的节点构成,其中MR以无线多跳的方式互连,形成网状的无线骨干网;MR不仅作为接入点(AccessPoint,AP)为其覆盖范围内的MC提供无线连接,还作为路由器为其它MR转发数据流量.一些MR以有线方式与Internet相连,这些特殊的MR称为网关(Gateway,GW).每个MC(Desktop,Laptop,PDA,Phone等终端节点)与覆盖其区域的MR建立连接,从而以多跳无线的方式通过网关实现Internet的接入.图1为WMN的一种典型的拓扑结构,虚线和实线分别表示无线链路和有线链路.如图中所示,WMN拓扑结构分为3个层次:Internet、骨干网和终端接入网.其中,WMN骨干网由Mesh路由器和网关构成,不仅是整个WMN的核心与关键,也是本文研究的对象.WMN作为一种无线宽带的Internet接入网,其显著特点是网络的大部分流量汇聚于网关.网关成为WMN中的关键节点,制约着网络性能的提高,常常成为整个系统的性能瓶颈.增加网关的部署可以提高网络的吞吐量,然而,网关也不是越多越好,由于无线链路有限的带宽以及多跳无线链路之间的干扰对网络性能的影响,过多的网关只会增加部署成本而不能进一步改善性能.同时,相同数量的网关,其部署位置不同,网络性能也会有很大差异.因此,合理的网关部署对于WMN的设计与规划至关重要,是实现WMN与Internet高效整合的关键.网关部署问题就是在WMN骨干网拓扑中,在MR的数量及位置已确定的前提下,选择最小数量的MR作为网关并优化网络拓扑,以满足用户带宽和网络性能的要求.目前,已有一些学者开展了关于网关部署的研究,将网关部署问题描述成联合优化问题并用整数线性规划对其形式化,提出了一些启发式的网关部署算法[3-6],也有一些基于智能算法(遗传算法、粒子群算法等)的解决方法[7-9].从给定的WMN骨干网拓扑中选择网关是一个复杂的问题,除了部署成本和用户带宽需求以外,还有许多因素需要考虑,如网关间的负载均衡、传输链路之间的干扰、节点的负载能力、传输路径的长度(跳数)等等.可是,现有的研究很少能全面地考虑这些因素.为此,本文提出了一种满足干扰约束和支持负载均衡的网关部署策略,考虑到链路干扰消减和网关负载均衡两个影响网络性能的重要因素.该策略综合网关选择、转发树构建和转发树间的节点迁移来完成负载均衡的网关部署,主要包括以下两个算法:算法1为覆盖重叠和干扰消减的网关选择算法,算法2为基于树间节点迁移的网关负载均衡算法.本文的第2节是相关工作的介绍;第3节描述网络模型及网关部署问题;第4节提出干扰约束和负载均衡的网关部署策略;第5节是算法的性能评估;最后一节总结全文.2相关工作在WMN的研究领域中,网关部署问题是一个重要并且具有挑战性的问题.虽然WMN中网关部署的研究才刚刚起步,但是其它领域类似问题的研究早已开展,并取得了很多成果.例如,Internet上如何部署Web代理服务器和冗余Web服务器来优化用户访问的性能[10-12]以及蜂窝移动通信网络里如何部署基站[13-14],等等.然而,无线链路不同于有线链路、无线多跳通信也不同于单跳通信,WMN中的网关部署问题要比上述类似问题复杂得多.网关部署问题是一个联合优化问题,已被证明是NP-hard问题[6].目前对WMN网关部署的研究已有不少成果,所采用的方法大致可分为两类:基于启发式算法的方法以及基于智能算法的方法.Page3基于启发式算法的方法主要是按照一定的启发式规则,以迭代的方式进行网关位置的选择.文献[3]中的网关部署是在保证各个节点带宽要求的前提下,试图最小化网关的数量.作者在用线性规划的方法对问题进行建模的基础上,提出了一种贪心算法.该算法通过多次迭代,每次迭代以最大化网络流为目标选择一个网关,直到满足用户流量需求为止.Bejerano在文献[4]中提出了一种基于节点分簇的网关部署算法,将WMN中的MR节点分成最小数量的不相交的簇,每个簇中的簇头节点便是网关.在每个簇中,建立以网关为根的生成树,簇中各节点以生成树中的路径来进行数据转发.文献[5-6]在文献[4]的基础上,做了进一步的研究.文献[5]同样采用了节点分簇的思想,但方法有所不同.作者提出了一种QoS约束的网关部署迭代算法.该算法每一次迭代在前一次迭代结果基础上构造满足QoS约束的最小支配集,最后得到满足QoS约束的网关数量最少的部署方案.He等人在文献[6]中则提出了一种网关部署优化的启发式算法.优化的目标不仅仅是最小化网关的数量,还包括最小化MR-GW路径长度(跳数).基于智能算法的方法主要是将网关部署问题抽象成一个联合优化问题,并使用遗传算法、粒子群算法等智能算法来解决.Marco等人在文献[7]中利用遗传算法在目标优化方面的优势,根据网关部署离散运算的特点,对选择、交叉、变异、适应度函数进行了相应的设计,提出了优化网关部署的遗传算法.文献[8]则提出了一种基于粒子群算法的网关部署方法.文献[8]将QoS约束的费用最小网关部署问题归结为图的最小权有限支配集问题,分别提出了基于贪心算法的GREEDY_LDS和基于粒子群算法的PSO_LDS这两种方法,并对两者进行分析比较.GREEDY_LDS以网关的部署性价比作为启发信息,依次选择部署性价比高的节点为网关,最后得到权值较小的有限支配集.该算法执行速度快,但由于网关的选择不能回溯,因此只能获取局部最优解.PSO_LDS利用粒子群算法全局寻优的优势,可以得到更优的解,但是要以增加执行时间为代价.WMN网关部署中,除了部署成本和用户带宽需求,还有许多因素需要考虑.为了能更好地优化网络性能,还需要考虑到网关间的负载均衡以及链路间的干扰.负载均衡是WMN中解决网络拥塞的一种重要方法,也是一个研究的热点.到目前为止,学者们提出了一些负载均衡的方法.在文献[15]中,Hsiao等人为无线接入网络提出了一种负载均衡的路由算法,这种算法通过构建负载均衡的骨干树来减少拥塞,以提高网络带宽的利用效率.文献[16]提出了一种分布式的算法,该算法根据节点的负载信息进行信道分配和拓扑发现,从而实现负载均衡的路由.文献[17]提出了一种无线局域网中通过调整接入点AP发送功率来实现负载均衡的方法.Bejerano在文献[18]中提出了一种近似算法来均衡网络中节点的负载,提高网络利用率,为用户提供公平服务和QoS保证.文献[19]提出了一种CircularSailing的路由方法,将网络中平面上的节点映射到球面上,把节点间的球面距离作为路由的判据,从而避免过多的路径经过网络中心,造成中心节点负载过重.文献[20]使用Min-Max负载均衡的方法来均衡链路负载,通过多次迭代不断降低拥塞严重的链路的负载,直至全网络达到一个均衡的状态.文献[21]提出了一种WMN中均衡网关负载的算法.算法分为两个阶段:第1阶段为网络初始划分阶段,根据网络拓扑和流量,将每一个MR通过多跳连接到最近的网关上,形成多个以网关为根的树.第2阶段为网关负载调整阶段,将一个或多个MR从一个过载的网关调整到另一个网关下,直到网关负载达到一个稳定的均衡状态.但是,以上的工作主要是负载均衡路由方面的研究,而对于结合网关部署来均衡网关负载,目前的研究还很少.文献[9]提出了一种负载均衡的网关部署方法,但没有考虑链路干扰对网络性能的影响.基于以上讨论,本文研究WMN网关部署问题,不仅考虑部署成本、用户带宽需求等因素,还考虑到网关负载均衡以及链路干扰.首先,使用非线性整数规划对网关部署问题进行形式化描述,然后提出一种基于两阶段优化的网关部署策略,最后通过仿真实验来表明该算法的有效性和优势.3网络模型和问题描述本节给出网关部署的网络模型和问题描述,涉及相关的假设和符号说明,其中相关符号的说明如表1所示.3.1网络模型本文用无向图G(V,E)来表示由n个MR构成的WMN骨干网,其中V={v1,v2,…,vn}为MR节点集合,E为节点之间的无线链路集合.假设所有节点分布在一个二维平面上且不具有移动性,任意节点viPage4表1相关符号的说明符号G(V,E)犃={a1,1,…,an,n}图G的邻接矩阵h(vi,vj)EI(vi,vj)Γ(vg)V(vg)犡=(x1,x2,…,xn)网关选择向量的位置坐标可用二元组(γi,ηi)表示,则节点vi与vj之间的物理距离d(vi,vj)=(γi-γj)2+(ηi-ηj)由于无线信号的强度随着传播距离的增加而不断减弱,所以节点之间直接的无线通信受到距离的限制.假设每个节点的信号传输半径为rT,超出此距离则信号强度太弱而不能被其它节点正确接收.因此,无线链路集合E={(vi,vj)|d(vi,vj)rT∧i≠j}.根据节点集V和边集E的定义,图G的邻接矩阵记为a1,1a1,2…a1,n熿a2,1a2,2…a2,n犃=an,1an,2…an,燀vj之间是否存在无线链路,即如果(vi,vj)∈E,则ai,j=1;否则,ai,j=0.另外,节点vi的邻居节点集合用N(vi)表示,即N(vi)={vj|(vi,vj)∈E}.在节点集V中,存在一些通过有线方式与Internet相连的节点,这些节点称作为网关,其集合记为VG,网关数量记为m;其它不具有网关功能的MR节点称为非网关节点,其集合则为V\VG.除了数据发送节点的距离远近之外,信号干扰同样会影响节点对数据的正确接收.目前主要有两类描述干扰关系的模型,即物理模型[22]和协议模型[23].物理模型更接近于真实环境,能更准确地反映节点之间的干扰,但是由于计算复杂性大,不适合大规模的WMN[24].因此,本文采用协议模型,根据节点之间的距离来确定干扰是否存在,用rI表示节点的干扰半径.对于节点vi,存在一个以vi为中心,半径为rI(rI>rT)的干扰区域,该区域内其它节点的集合用NI(vi)表示.由于MAC层采用RTS/CTS/DATA/ACK机制,链路上任何数据通信的信V={v1,v2,…,vn}d(vi,vj)(vi,vj)N(vi)NI(vi)l(vi)E(vg)t(vg)犢={y1,1,…,yn,n}号传输都是双向的,因此,链路上成功的数据通信要求链路两端节点的干扰范围内都没有其它节点正在发送数据.对于任意链路(vi,vj)∈E,该链路可以进行无干扰传输的充分必要条件是,NI(vi)∪NI(vj)中的所有节点都不在发送数据,即与NI(vi)∪NI(vj)中节点相关联的其它链路都是链路(vi,vj)的可干扰链路,其集合记为EI(vi,vj)={(vp,vq)|(vp,vq)∈E∧({vp,vq}∩(NI(vi)∪NI(vj))≠)}\{(vi,vj)}如图2所示,两个虚线圆圈分别划定了节点v6和v10的干扰范围,则NI(v6)={v3,v5,v9,v10},NI(v10)={v6,v9},因此,EI(v6,v10)={(v1,v3),(v2,v5),(v3,v5),(v3,v6),(v5,v6),(v5,v8),(v5,v9),(v8,v9),(v9,v10)}.WMN骨干网是一种多跳无线网络,节点不仅可以与其邻居节点进行直接的无线通信,还可以通过多跳无线链路与其非邻居节点进行通信.节点vi和vj之间传输路径的长度(跳数)记为h(vi,vj).由Page5于大多数WMN用户主要获取Internet上的信息与服务,WMN骨干网的流量特征不同于一般的多跳无线网络,其流量不是均匀分布在每个节点对之间,而是主要从非网关节点流向网关或从网关流回非网关节点.鉴于WMN的流量特征,可以构建网关为根的树来进行流量转发[6],非网关节点通过连接到相应的树来实现到网关的多跳无线连接.定义1.MR-GW路径.在WMN骨干网中,假设非网关节点vi连接到以网关vg为根的树上,则节点vi的MR-GW路径就是该树中从节点vi到根节点vg的路径.多跳的MR-GW路径扩大了网关的服务范围,可以减少部署网关的数量.然而,MR-GW路径长度又不宜过大.根据文献[25]所述,随着路径长度的增加,源节点可获带宽也在急剧地降低.另外,路径长度越长,传输的时延也就越大.为了保证多跳无线传输的性能,本文对MR-GW路径的长度进行约束,记其上界为R.在WMN骨干网中,节点负载不仅包括聚合移动终端流量所承担的本地负载,还包括转发其它节点流量所承担的转发负载.节点vi的本地负载记为l(vi).本文对非网关节点和网关的负载进行约束,记其上界分别为CM和CG,通常CM<CG.定义2.网关为根的转发树.在WMN骨干网中,以网关vg为根的转发树Γ(vg)=G({vg}∪V(vg),E(vg)),其中,V(vg)表示该转发树中的非网关节点集合,E(vg)表示该转发树中的链路集合.同时,转发树Γ(vg)还必须满足以下3方面的约束:(1)Γ(vg)中所有节点的本地负载之和不能超过CG.(2)对于Γ(vg)中的非网关节点,其本地负载和(3)对于Γ(vg)中的非网关节点,其MR-GW路径长度不能超过R.定义3.转发森林.在WMN骨干网中,分别构建以网关vg1,vg2,vg3,…,vgm为根的转发树Γ(vg1),Γ(vg2),Γ(vg3),…,Γ(vgm).如果满足如下的3个条件,则称{Γ(vg1),Γ(vg2),Γ(vg3),…,Γ(vgm)}为WMN转发森林,记为Ψ.(1)V(vg1)∪V(vg2)∪V(vg3)∪…∪V(vgm)=(2)E(vg1)∪E(vg2)∪E(vg3)∪…∪E(vgm)E.(3)V(vgi)∩V(vgj)=,E(vgi)∩E(vgj)=,转发负载之和不能超过CM.V\VG.1i,jm,i≠j.定义4.转发森林的链路干扰程度.采用转发森林中链路的可干扰链路集大小的均值来衡量转发森林的链路干扰程度,记为δ.其中,Λ为转发森林的链路集,即Λ=E(vg1)∪E(vg2)∪E(vg3)∪…∪E(vgm).定义5.网关负载与网络总负载.网关负载是网关的本地负载与转发负载之和,相当于以该网关为根的转发树中所有节点的本地负载之和.对于网关vg,其网关负载t(vg)=∑vj∈{vg}∪V(vg)l(vj).网络总负载L是指WMN骨干网中所有节点的本地负载之和.根据转发森林的定义,非网关节点必然在某个转发树中,其本地负载则成为该转发树中网关的转发负载.因此,网络总负载L相当于所有网关负载之和,如式(3)所示定义6.网关负载向量.网关负载向量是一个n元向量犣={z1,z2,…,zn},其中zi对应节点vi.如果节点vi是网关,则zi表示其网关负载,即zi=t(vi);如果节点vi是非网关节点,则zi用零表示,即zi=0.3.2问题描述在WMN中,网络的主要流量汇聚于网关,部分网关的过载将会严重影响网络资源的利用效率和网络整体性能.因此,网关负载均衡对于保证WMN网络性能显得尤为重要.现有的研究大多数通过负载均衡路由来实现网关负载均衡[15-21],而网关部署对网关负载均衡的实现同样有重要影响.例如,图3所示的两个WMN骨干网拓扑,其中实心圆表示网关,而空心圆表示非网关节点.拓扑(1)和(2)中节点的数量和位置一样,不同的是网关的位置和以网关为根的转发树.假设每个节点的本地负载相同,则拓扑(1)中两个网关的负载差异明显,而拓扑(2)实现了两网关间的负载均衡.定义7.网关负载的均衡指数.为衡量网关之间负载均衡的程度,本文采用如下的均衡指数[15],记为β=m·∑vg∈VGt(vg())2=∑vg∈VGPage6由上述公式可推得β1.当网关之间的负载完全均衡时β=1;网关间负载差异越大,β值也越大.本文研究负载均衡的网关部署问题,就是在给定WMN骨干网拓扑的前提下,在满足用户带宽需求和网络性能要求的基础上,以降低部署成本和实现网关负载均衡为目标,兼顾到降低MR到网关的延迟和消减链路干扰,从所有MR中选择最少数量的节点作为网关,并进一步构建和优化转发森林.由于每个网关的部署成本大致相同,可用网关数量来反映部署成本;而网关负载的均衡程度则可用网关负载的均衡指数(定义7)来表示.因此,该问题有如下两个优化目标:最小化网关数量和最小化网关负载的均衡指数,此外,还需兼顾到降低MR到网关的延迟和消减链路干扰,即对MR-GW的路径长度进行约束(其上界为R)以及对转发森林的链路干扰程度进行约束,记其上界为Imax.下面将给出问题的数学模型,用非线性整数规划的方法对问题的目标和约束条件进行描述.该模型用n个决策变量来决定网关数量和位置,这些变量构成了网关选择向量犡,即犡=(x1,x2,…,xn),其中xi取值为1或0:xi=1表示节点vi被选作为网关;xi=0表示节点vi是非网关节点.模型用n2个决策变量来决定转发森林,这些变量构成了转发森林矩阵犢,即犢=,其中yi,j取值为1或0:yi,j=1表示节点vi是vj的父节点;yi,j=0表示节点vi不是vj的父节点.此外,还定义了两组中间变量λki,j和zi,i,j,k=1,2,…,n.λki,j取值为1或0:λki,j=1表示节点vk聚合的用户流量经过转发树链路(vi,vj),其中节点vi是节点vj的父节点;λki,j=0表示节点vk聚合的用户流量不经过转发树链路(vi,vj).zi为网关负载向量犣中的第i个元素,如定义6所述.这两组中间变量,可用犡和犢中的两组决策变量来表示,其表达式见下面的式(9)、式(10)和式(14).根据以上的变量定义,网关部署问题的具体数学模型如式(5)~(15)所示.优化目标:约束条件:yi,jai,j,i,j∈{1,2,…,n}(7)i=1∑nλji,j=yi,j,i,j∈{1,2,…,n}(9)λki,j=yi,j·∑nλki,j+yk,i1,i,j,k∈{1,2,…,n}(11)∑ni=1∑nl(vi)+∑nzi=xi·l(vi)+∑n∑ni=1∑nn-∑n式(5)和(6)是该模型的两个优化目标,即最小化网关的数量和最小化网关负载的均衡指数.进行目标优化的同时,必须满足以下一系列约束条件.式(7)表明节点vj选择节点vi为父节点的必要条件是两节点之间存在直接通信的链路,是邻接节点.式(8)表明在转发森林中非网关节点只有一个父节点,而网关没有父节点.式(9)和(10)用来定义中间变量Page7λki,j的计算.式(11)确保以网关为根的转发树中不存在回路.式(12)确保所有MR-GW路径的长度不超过R跳.式(13)对非网关节点和网关的负载进行约束,不得超过其容量的上界.式(14)定义了网关负载的计算.式(15)是关于链路干扰的约束,也就是转发森林的链路干扰程度不能超过其上界Imax.根据上面的讨论,网关部署问题可以形式化为一个多目标优化问题.由于多个目标之间不可避免存在冲突和此消彼长,所以多目标优化模型最后的结果一般不存在单一的最优解,只能得到多个满足约束条件的Pareto最优解[26].定义8.Pareto最优解.对于一个多目标优化问题,s是决策变量,f1(s),f2(s),…,fk(s)是k个目标函数,S是该问题的可行解集.该问题的优化目标是最小化目标函数,并且要满足所有的约束条件.s∈S被称为Pareto最优解,当且仅当不存在s∈S满足如下条件:(i∈{1,2,…,k},fi(s)fi(s))∧网关部署的多目标优化模型有两个目标函数,即最小化网关数量和最小化均衡指数.如图4所示,每个点都表示问题的一个可行解,那些深色节点则是该问题的Pareto最优解.4干扰约束和负载均衡的网关部署策略(ICLB-GPS)4.1基于两阶段优化的网关部署策略对于多目标优化问题,直接求解十分困难,可以将多目标的优化转换为多阶段的单目标优化,依次对其的多个目标进行优化.每个阶段都是单目标优化的子问题,对应于原问题的一个优化目标,具有与原问题相同的约束条件.定理1.对于有两个优化目标的多目标优化问题,可将两目标的优化转换为两个阶段的单目标优化,其所得的解是原问题的一个Pareto最优解.证明.不妨用P来表示一个多目标优化问题,S为P的可行解集,该问题有两个优化目标,f1(s)和f2(s)为P的目标函数,优化目标是最小化这两个目标函数,则P可以转换为一个两阶段的单目标优化,不妨设P1为第1阶段的优化问题,P2为第2阶段的优化问题.f1(s)为P1的目标函数,f2(s)为P2的目标函数.且P、P1和P2的约束条件相同.由于约束条件一样,P1的可行解集S1=S,P1的最优解为s,则任意s∈S,使得f1(s)f1(s).在解决P1的基础上求解P2,则要求目标函数f1(s)为定值,所以,P2的可行解集为S2={s|s∈S且f1(s)=f1(s)}.此时,P2的最优解s.对于任意s∈S2,都有f2(s)f2(s).因为f1(s)=f1(s),则任意s∈S,f1(s)f1(s).假设s不是问题P的Pareto最优解,存在s∈S满足以下两个条件之一:条件1.f1(s)<f1(s)且f2(s)f2(s).条件2.f1(s)f1(s)且f2(s)<f2(s).因为任意s∈S,f1(s)f1(s),所以条件1不可能满足.条件2演变为f1(s)=f1(s),f2(s)<f2(s).当f1(s)=f1(s),s∈S2,因此f2(s)f2(s),与条件2中的f2(s)<f2(s)矛盾,条件2也不能满足.综上所述,假设不成立,s是问题P的一个Pareto最优解.根据定理1,本文可将网关部署问题中的两目标优化转换成两阶段优化,每个阶段为一个单目标优化:先对网关数量进行优化,在第1个目标最优的基础上,再优化第2个目标,即负载均衡指数.具体来说,首先以最小化网关数量为目标,进行网关选择,确定网关位置和转发森林,满足网关部署问题的所有约束;在解决网关选择问题的基础上,在网关位置已经确定的前提下,以最小化网关负载的均衡指数为目标,对转发森林进行负载均衡优化,也必须满足网关部署问题的所有约束.因此,本文提出了基于两阶段优化的网关部署策略,先后解决网关选择和负载均衡这两个单目标优化问题,同时考虑链路干扰约束,具体流程如图5所示.首先,进行全局网络信息的获取(如MR节点的位置信息等)并完成参数的设定(如Imax、CM、CG和R等).然后,从MR节点中选择最小数量的节点作为网关,并构建以网关为根的转发树,满足CM、CG和R的约束.接着,进行网关负载均衡的优化,优Page8化后的转发森林必须满足CM、CG和R的约束.在网关选择和负载均衡优化的过程中,考虑到链路干扰的约束,尽量消减链路干扰.最后,对转发森林的链路干扰程度进行检验,若满足Imax的约束,输出结果;否则,对参数Imax、CM、CG和R进行调整,重新进行网关选择和负载均衡优化.可以通过增大Imax来松弛干扰约束;也可以通过减小CM、CG和R来减小转发森林的链路干扰程度,后面的实验可以说明这一点.从上述的网关部署策略不难看出,解决网关部署问题的关键在于如何解决网关选择和负载均衡优化这两个单目标优化问题.因此,本文对网关选择和负载均衡这两个优化问题分别进行分析,根据问题的特点,寻求解决问题的具体策略.(1)网关选择策略对于WMN的网关部署,所有MR都是网关的候选节点,则网关位置选择有2n-1种组合.穷举法的时间复杂度高,不适用于大规模WMN的网关选择.因此,本文提出一种基于启发式算法的网关选择策略,下面首先给出相关的定义.定义9.R跳连接图.本文用无向图GR(VR,ER)来表示R跳连接图,其中,VR是MR节点集合;ER是边的集合,两个节点之间存在无向边则表示它们在WMN骨干网中是R跳可达的,即对于任意节点vi,vj,如果h(vi,vj)R,则(vi,vj)∈ER;否则,(vi,vj)ER.节点vi在GR中的邻居节点集合,也就是vi在网络中的R跳邻居节点集合,用NR(vi)表示,即NR(vi)={vj|(vi,vj)∈ER}.定义10.网关覆盖.在WMN骨干网中,对于任意的网关vi和非网关节点vj,如果h(vi,vj)R,则节点vj可以连接到网关vi,也就是说网关vi能够覆盖节点vj.因此,网关vi覆盖的节点集合就是节点vj在GR中的邻居节点集合NR(vi).网关选择是指从所有的MR节点中进行网关位置的选择,并完成以网关为根的转发树的构建.因为MR-GW路径的上界为R,当网关节点的位置选定之后,非网关节点必须R跳可达其中的某一个网关.因此,网关集合必然是WMN骨干网R跳连接图GR(VR,ER)的一个支配集.为了节约部署成本,最小化网关数量是网关选择优化的重要目标,则网关选择问题也就是一个图GR的最小支配集问题.图的最小支配集问题是一个NP-hard问题,可以通过启发式贪心算法来获得一个近似最优解,即以迭代的方式选择节点,在每次迭代中选择节点度数最大的那个节点[27].因此,本文借鉴启发式最小支配集算法来解决网关选择问题,但是,网关选择问题要比图的最小支配集问题复杂得多,还需要考虑MR-GW路径长度的差异[6]、转发树的构建、链路干扰的约束以及负载均衡等多种因素.因此,在进行网关选择时,要考虑网关负载均衡优化的需要,保证网关覆盖区域的适度重叠,为转发树间的节点迁移提供条件;构建转发树时,加入链路应尽可能地消减链路干扰.(2)网关负载均衡策略WMN骨干网的拓扑是一个转发森林,由多个以网关为根的转发树组成.通过转发树之间的节点迁移,将流量从负载较重的网关迁移到负载较轻的网关,可以实现网关负载均衡.定义11.节点迁移π(vi,vj).节点迁移π(vi,vj)表示将节点vi迁移到节点vj所在的转发树中并以节点vj为父节点,其中节点vi是某转发树中的叶节点,节点vj为节点vi的邻居节点且在另一转发树中.定义12.网关负载向量的降序投影.网关负载向量犣的降序投影D(犣)是一个m元的向量,通过将犣中m个非零zi(网关负载)按降序排列而得,即D(犣)={α1,α2,…,αm},其中α1α2…αm>0.定义13.网关负载向量的字典序比较.对于两个网关负载向量犣p和犣q,其字典序比较的定义如下:分别对这两个向量进行降序投影,得D(犣p)和D(犣q).D(犣p)={αpPage9m>0;D(犣q)={αqαpm>0.如果存在km,使得αpαqk,αpi=αq例如网关负载向量犣p={7,0,4,0,0,0,6,0,8,0,3,0}和犣q={5,0,8,0,0,0,2,0,6,0,7,0},则D(犣p)={8,7,6,4,3},D(犣q)={8,7,6,5,2}.因为4=4,αqαp犣p犣q.定义14.最小网关负载向量.当网关负载向量为犣时,如何不存在任何节点迁移使节点迁移后的负载向量犣犣,则此时的网关负载向量犣最小.定理2.网关负载向量最小时,网关负载的均衡指数最小.证明.假设网关负载向量最小时,网关负载的均衡指数不是最小,则存在节点迁移方案使得均衡指数更小.最小网关负载向量为犣,网关负载的均衡指数为βz.存在一个节点迁移π(vp,vq),使得节点迁移后的网关负载向量为犣,此时网关负载的均衡指数为βz.βz<βz.节点vp当前所在转发树的根节点为vi,节点vq所在转发树的根节点为vj,则π(vp,vq)将节点vp从网关vi的转发树迁移到网关vj的转发树,则网关vj的新负载zj=zj+l(vp);网关vi的新负载zi=zi-l(vp),网关负载向量中其它值不变.βz-βz==m·((zi-l(vp))2+(zj+l(vp))2-zi2-zj=m·(2·l(vp)2-2·zi·l(vp)+2·zj·l(vp))=2·m·l(vp)·(l(vp)-(zi-zj))因为βz<βz,所以zi-zj>l(vp).D(犣)={α1,α2,…,αk,…,αs,…,αm},其中αk=zi,αs=zj.D(犣′)由m个值组成,由D(犣)中除αk和αs这两个值以外的m-2个值,加上αk-l(vp)和αs+l(vp)构成,将这m个值按降序排列,因此D(犣)和D(犣)的前k-1个值相同,D(犣)的第k个值αk是αk-l(vp),αs+l(vp)或αk+1.①当αk=αk-l(vp)时,因为αk-l(vp)<αk,所以犣′犣;②当αk=αs+l(vp)时,因为αk-αs>l(vp),αs+l(vp)<αk,所以犣犣;③当αk=αk+1,αk+1αk.若αk+1<αk,则犣犣;若αk+1=αk,则考虑αk+1=αk+2与αk+1的关系,若相等,再依次往后考虑,最多到αk+b=αk-l(vp)或αs+l(vp),此时αk+b<αk=αk+b.所以犣犣.由于犣是最小网关负载向量,不存在任何节点迁移方案,使得网关负载向量犣犣.因此,结论与条件矛盾,假设不成立.不存在网关负载向量犣,使得βz<βz.因此,网关负载向量犣最小时,网关负载的均衡指数βz也是最小的.定理2表明网关负载向量的最小化可以使得网关负载达到均衡状态(均衡指数最小).因此,在进行节点迁移时,需要遵循以下原则:尽量减少产生拥塞的网关的负载,同时不能增加比其负载更重或负载相当的网关的负载.也就是,合理的节点迁移必须使得网关负载向量变小,即节点迁移前的网关负载向量犣和节点迁移后的网关负载向量犣满足犣犣.4.2网关选择和负载均衡算法本文根据上述的网关选择策略和网关负载均衡策略,分别提出相应的算法:覆盖重叠和干扰消减的网关选择算法、基于树间节点迁移的网关负载均衡算法.(1)覆盖重叠和干扰消减的网关选择算法根据上述的网关选择策略,本文提出覆盖重叠和干扰消减的网关选择算法,如图6所示.该算法借鉴启发式最小支配集算法的思想,以迭代的方式选择网关节点的位置.每次迭代从候选节点(未加入任何转发树的节点)中选择权值最大的节点作为一个网关,并构建以其为根的转发树.转发树的构建从网关开始,以广度优先遍历的顺序遍历其R跳邻居节点,同时兼顾到链路干扰的消减.节点加入转发树算法1.覆盖重叠和干扰消减的网关选择算法.输入:Mesh路由器(MR)节点集V={v1,v2,…,vn}及其位置信息输出:网关集合VG,转发森林Ψ1.构建R跳连接图GR(VR,ER),VG←,Ψ←,U←V,Vleaf←2.whileU≠3.计算U中每个节点v的w(v)4.找出U中权重最大的节点vg5.VG←VG∪{vg}6.初始化以vg为根的树Γ(vg),并从节点vg开始,在U中进行7.whiletrue8.以广度优先遍历的顺序遍历到节点v9.若节点v已经超出了节点vg的R跳范围,跳出该循环10.节点v选择可干扰节点集最小的链路加入到Γ(vg)中,且11.End12.Ψ←Ψ∪{Γ(vg)}13.Vleaf←Vleaf∪Lfg,其中Lfg是树Γ(vg)中叶节点的集合14.U←U\({vg}∪V(vg))15.endwhile16.返回VG和ΨPage10时,选择可干扰链路集最小的链路,且加入节点后的转发树要满足CM、CG和R的约束.在进行网关选择时,不能简单依据节点度数来选择网关,还需要综合考虑MR-GW路径、网关覆盖重叠等多种因素.因此,节点权重的定义如下其中:U是未加入任何转发树的节点的集合;Vleaf是已构建的转发树中叶节点的集合.该权重计算不是简单的统计节点vi的R跳范围(网关覆盖范围)内的节点数量,还考虑到这些R跳邻居距离节点vi的远近.这样,有利于选择在覆盖范围内具有较多短路径邻居的节点作为网关[6].同时,该权重计算不仅考虑未加入任何转发树的节点,还考虑已构建转发树中的叶节点.这样,在选择网关的时候,被选中的节点可能更加接近已构建的转发树,从而实现邻近网关之间覆盖区域的适度重叠,有利于通过重叠区域中节点的迁移来实现网关之间的负载均衡.该算法首先要计算出每个节点的R跳邻居节点,即构建R跳连接图GR(VR,ER),可以通过计算每个节点对之间的最短路径来实现.本文使用Floyd算法[28]来实现,其时间复杂度为O(n3).由于网关数量不可能超过n,因此算法的核心循环最多执行n次.每选择一个网关,先要计算集合U中所有节点的权重,其时间复杂度为O(n2);选择网关的时间复杂度为O(n);由于转发树的规模受R,CM,CG的限制,构建转发树为常数时间.因此,选择一个网关并构建其转发树,其时间复杂度为O(n2).综上所述,该算法的时间复杂度为O(n3+n·(n2))=O(n3).(2)基于树间节点迁移的网关负载均衡算法根据上述的网关负载均衡策略,本文提出基于树间节点迁移的网关负载均衡算法,如图7所示.该算法以迭代的方式进行转发树间的节点迁移,直到不存在节点迁移使得网关负载向量变小为止.每次迭代都从合理的节点迁移中选择权重最大的进行节点迁移.节点迁移π(vi,vj)的权重定义如下wm(vi,vj)=t(gw(vi))-t(gw(vj))其中:节点迁移wm(vi,vj)表示节点迁移π(vi,vj)的权重值;gw(vi)、gw(vj)分别表示节点vi和vj所在转发树的根(网关);parent(vi)表示节点vi在迁移前的父节点.因此,两转发树的网关之间的负载差越大,权重值越大;节点迁移后,链路干扰消减幅度越大(|EI(vi,parent(vi))∩Λ|的值越大,|EI(vi,vj)∩Λ|的值越小),权重值越大.算法2.基于树间节点迁移的网关负载均衡算法.输入:网关集合VG,转发森林Ψ输出:优化后的转发森林ΨLB1.初始化网关负载向量犣和转发森林的链路集Λ2.whiletrue3.migration←null,max_weight←04.foreachvi∈Vleaf5.Γ(vg1)是节点vi所在的转发树6.foreachvj∈N(vi)\({vg1}∪V(vg1))7.Γ(vg2)是节点vj所在的转发树8.if节点迁移π(vi,vj)使得负载向量犣变小,且满足9.ifwm(vi,vj)>max_weight10.migration←π(vi,vj)11.max_weight←wm(vi,vj)12.endif13.endif14.endfor15.endfor16.ifmigration≠null17.实施节点迁移migration18.更新Ψ、Z、Λ和Vleaf19.else20.break21.endif22.endwhile23.ΨLB←Ψ图7基于树间节点迁移的网关负载均衡算法该算法以迭代的方式进行节点迁移,以实现网关负载均衡.网络中节点数量为n,网关数量为m(m<n),节点的最大度数(邻居节点的数量)为Nd(Ndn).由于节点负载的迁移只能由负载重的转发树迁移到负载轻的转发树,不会无序反复地迁移,则每个节点进行迁移的次数不会超过m次.因此,算法进行不超过n·m次的节点迁移,就能使得网关负载向量达到最小.对于每次节点迁移,需考虑的叶节点数量小于n,每个叶节点可选的新父节点数量不会超过Nd,因此每次节点迁移的时间复杂度为O(n·Nd).综上所述,该算法的时间复杂度为O(n2·m·Nd).4.3算法实例说明本节给出一个例子来对所提出的两个算法做进一步的说明.本例子针对一个由18个MR节点组成的WMN骨干网拓扑,假设每个MR的本地负载为1,R=2,CM=4,CG=16.为了说明覆盖重叠对网关负载均衡的影响,这里给出了网关选择算法在不考虑覆盖重叠时的执行情况,也就是节点进行权重计算时,不考虑已在转发树中的叶节点.在图8中,(a)-(b)-(c)-(d)是不考虑覆盖重叠的情况,而(a)-(e)-(f)-(g)是考虑覆盖重叠的情况.如图8(a)所示,在对初始拓扑的节点权重计算中,两种情况是一致的,因为拓扑中还没有已构建的转发树;根据图8Page11(a)中所示节点权重,v7被选择为网关,并构建以v7为根的转发树,并对拓扑中剩余节点进行权重计算.此时,图8(e)中的权重节点计算由于考虑了v11和v12这两个v7转发树的叶节点,结果与图8(b)中有所不同.所以,两种情况在第二个网关的选择上出现了差异,在图8(c)中,v16被选择为网关;而在图8(f)中,更靠近第一个转发树的v13被选择为网关.第二个网关位置的不同,也对负载均衡优化产生了影响.图8算法运行实例5仿真实验本文利用MATLAB工具对所提出的ICLB-GPS算法进行仿真,并在仿真的基础上对算法的有效性和性能进行分析.在仿真实验中,设定无线信号的传输半径rT为250m,干扰半径rI为450m.设定所有MR节点的本地负载为1,即网关的负载相当于其转发树中节点的数量.每个实验都重复做20次,所得结果的平均值作为最终结果.5.1参数犚、犆犕和犆犌对链路干扰程度δ的影响参数R是MR-GW路径长度的上界,CM是MR容量的上界,CG则是网关容量的上界.在网关部署在图8(d)中,v7和v16转发树无法通过节点迁移实现两网关负载的均等,而在图8(g)中,v7和v13转发树则通过节点迁移实现了两网关负载的均等.上述例子说明了本文提出的两个算法可以有效地完成网关节点的选择,转发树的构建及网关负载均衡的优化.此外,还说明了在网关选择算法中考虑覆盖重叠可以在不增加网关数量的情况下为负载均衡优化提供更多节点迁移的选择,有利于负载均衡的实现.中,这3个参数约束着转发树的构建,因而影响到转发森林的链路干扰程度.实验通过设定不同的参数值来分别执行算法,其中参数的设定如下:R=1,2,3和4,CM=2,4,6,8和10,CG=4CM.在不同参数值的约束下,使用ICLB-GPS算法进行网关选择,转发森林构建及优化,最后所得的转发森林,其链路干扰程度如图9所示.从图中可以看出,减小R、CM和CG的值,可以降低所得转发森林的链路干扰程度.因此,ICLB-GPS中通过调整R、CM和CG的值来满足干扰约束的做法是有效的.5.2算法性能对比实验将ICLB-GPS算法与文献[5]所提的WeightedRecursive算法以及文献[6]所提的Page12WeightbasedGDTSP算法进行比较,主要是在网关数量、MR-GW路径长度、链路干扰程度以及负载均衡指数方面进行比较分析.设定算法参数R=3,CM=6和CG=24,并且设定Imax的取值使得前面的算法参数(R、CM和CG)设定能够满足干扰约束.实验比较了这些算法在不同网络规模情况下的性能.根据网络规模的不同,共设定6个模拟场景,如表2所示.每个场景的节点密度大致相同,随着部署范围的不断扩大,节点数量分别为100、200、500、1000、2000和3000.节点在场景的范围之内随机分布,且满足任意两个节点之间的距离必须大于0.6×rT,因为在实际场景中不会紧挨着部署MR节点[5].图10不同网络规模下的算法性能比较场景1场景2场景3场景4场景5场景611000×11000图10(a)反映了这3个算法在不同网络规模的情况下部署网关的数量.从图中可以看出,随着网络部署范围的扩大,MR节点数量的增多,这些算法部署网关的数量也随之增多.同时也可以看出,在MR节点数量较少时,3个算法的网关数量差不多,而随着MR节点的数量不断增多,WeightedRecursive算法部署网关的数量要比其它两个算法多一些.因此,从网关数量来看,本文所提的ICLB-GPS算法和WeightbasedGDTSP算法的表现差不多,比WeightedRecursive算法部署的网关要少.图10(b)反映了这3个算法在不同网络规模的情况下MR-GW路径长度的变化.从图中可以看出,随着网络规模的扩大,MR-GW路径长度几乎没有什么变化,主要是因为节点密度没有变化,转发树中各个层次节点的比例不会变化太大.ICLB-GPSPage13算法的MR-GW路径长度与WeightbasedGDTSP算法差不多.WeightedRecursive算法的MR-GW路径长度比其它两个算法要小,但这是因为其部署的网关较多,一些MR到网关的跳数要少一些.图10(c)反映了这3个算法在不同网络规模的情况下链路干扰程度的变化.随着网络规模的不断扩大,链路干扰程度有所增加,但增长幅度较小,主要是因为节点密度变化不大,每个节点干扰范围内的节点数量不会增加太多,则每条链路的可干扰链路集中链路也不会显著增加.ICLB-GPS算法的链路干扰程度比其它两算法要低,可见,该算法起到了消减链路干扰的作用.由图10(d)可以看出,3种算法的负载均衡指数差异很大,在不同的网络规模下,ICLB-GPS算法的均衡指数都远远低于其他算法,并且始终维持在与1比较接近的水平上.由此可见,ICLB-GPS算法能够很好地实现不同规模网络的网关负载均衡.此外,实验还比较了这些算法在不同节点密度情况下的性能.设定部署范围为4000m×4000m,节点数量分别为200、300、400、600、900和1200,且满足任意两个节点之间的距离必须大于0.3×rT.实图11不同节点密度情况下的算法性能比较验结果如图11所示.图11(a)反映了这3个算法在不同节点密度的情况下部署网关的数量.从图中可以看出,随着节点密度的增大,MR节点数量的增多,这些算法部署网关的数量也随之增多.同时也可以看出,WeightedRecursive算法部署网关的数量要比其它两个算法多,而且随着节点密度的增大,差距也不断增大.因此,从网关数量来看,本文所提的ICLB-GPS算法和WeightbasedGDTSP算法的表现差不多,比WeightedRecursive算法部署的网关要少.图11(b)反映了这3个算法在不同节点密度的情况下MR-GW路径长度的变化.从图中可以看出,随着节点密度的增大,MR-GW路径长度有所减小,主要是因为节点更加密集,转发树中一跳到达网关的节点增多.WeightedRecursive算法的MR-GW路径长度比其它两个算法要小,这是因为其部署的网关数量多,一些MR到网关的跳数要少一些.随着节点密度的增大,ICLB-GPS算法的MR-GW路径长度要略大于WeightbasedGDTSP算法,但相差不大.图11(c)反映了这3个算法在不同节点密度的情Page14况下链路干扰程度的变化.随着节点密度的增大,链路干扰程度急剧增加,这是因为节点密度的增加导致每条链路的可干扰链路集变大.ICLB-GPS算法的链路干扰程度比其它两算法要低,可见,在不同节点密度情况下,该算法都能起到了消减链路干扰的作用.由图11(d)可以看出,随着节点密度的增加,3个算法的负载均衡指数均有所下降.在不同节点密度的情况下,ICLB-GPS算法的均衡指数都低于其他算法,并且始终维持在与1比较接近的水平上.由此可见,ICLB-GPS算法能够很好地实现不同节点密度情况下的网关负载均衡.综合以上的比较分析,在不同网络规模,不同节点密度的情况下,ICLB-GPS算法在网关数量和MR-GW路径长度方面的表现与其它算法差不多,但降低了链路干扰的程度,并在网关负载均衡方面有着明显的优势.因此,ICLB-GPS算法在不增加部署成本,不提高MR-GW路径长度的情况下,消减了链路干扰,实现了网关负载均衡.6结论本文研究了WMN设计与规划中的网关部署问题,在满足用户带宽和网络性能要求的前提下,以降低部署成本和实现网关负载均衡为目标,兼顾到降低MR到网关的延迟和消减链路干扰.首先,使用多目标非线性整数规划对该问题进行了形式化描述.其次,提出了一种满足干扰约束和支持负载均衡的网关部署策略ICLB-GPS,通过综合网关选择,转发树构建以及转发树间节点迁移来实现负载均衡的网关部署.该策略主要包括以下两个算法:算法1为覆盖重叠和干扰消减的网关选择算法,完成对网关位置的选择和网关为根的转发树的构建;算法2为基于树间节点迁移的网关负载均衡算法,通过树间节点迁移,将流量从负载较重的网关迁移到负载较轻的网关,从而实现网关负载均衡.实验结果表明ICLB-GPS在不增加部署成本,不提高MR-GW路径长度的情况下,消减了链路干扰,实现了网关负载均衡.下一步的工作是研究多射频多信道无线Mesh网络的网关部署问题,联合网关选择、转发树构建和信道分配来实现网关部署,从而更加有效地消减链路干扰,进一步优化网络性能.
