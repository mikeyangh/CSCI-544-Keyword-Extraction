Page1一种基于马尔可夫博弈的能量均衡路由算法董荣胜1)马争先2)郭云川1),3)古天龙1)1)(广西可信软件重点实验室(桂林电子科技大学)广西桂林541004)2)(格力电器股份有限公司广东珠海519070)3)(中国科学院信息工程研究所北京100093)摘要针对无线传感器网络中耗能不均问题,引入马尔可夫博弈理论,构建了无线传感器网络的马尔可夫博弈模型.在能量均衡路由分析的基础上,给出了一种基于马尔可夫博弈的能量均衡路由算法,该算法从无线传感器网络整体耗能出发,兼顾节点之间的合作.定义了能量和信誉值的二元收益函数,给出了节点转发的状态转移概率,根据收益函数进行能量调节,求解出能量和收益之间的均衡系数———纳什均衡,实现了节点能量的均衡消耗,延长了网络的生命周期.使用PRISM概率仿真工具进行仿真,验证了该博弈模型存在纳什均衡点,同时表明该模型能促进节点之间合作,最大化无线传感器网络的生命周期.关键词马尔可夫博弈;纳什均衡;能耗;网络生命周期;路由算法;绿色网络1引言无线传感器网络由大量微型传感器组成,传感Page2有节点都向汇聚节点传输数据,属于多对一的通信网络.到汇聚节点距离不同可能导致能量使用不均,从而使局部节点过早死亡,引起网络拓扑结构的变化.拓扑结构的变化导致路由查询不断变化,节点的发射功率和传输范围也要做出相应地调整[1],从而使得网络能耗增加致使全局网络寿命缩短,浪费能量没有耗尽的节点,不利于“绿色网络”的建设.因此,在设计保证网络服务质量(QoS)的无线传感网络时,要研究能耗不均问题,避免节点的过早死亡,进行有效的全局能耗管理,达到“绿色网络”的目的[2].无线传感器网络存在如下特点:(1)节点耗能只与该节点当前所处的状态和采取的行动有关,与节点历史耗能无关.因此,节点的能耗行为具有马尔可夫性;(2)只有所有节点有效地参与协作才能有助于实现全局范围内网络寿命最大,但节点的协作和转发会带来能量的消耗,进而降低节点自身的寿命.这样节点自身与全局网络之间存在寿命的博弈.因此,基于无线传感网络能耗的这两个特点,我们借鉴马尔科夫博弈论对无线传感器网络节点的耗能行为进行建模,寻找博弈的纳什均衡点,让剩余能量较大的节点参与做更多的工作,从而达到最大限度地延长网络寿命的目的.根据以上思想,本文分析了无线传感器网络中能耗问题的研究现状,建立了基于马尔可夫博弈的能耗均衡路由形式模型(MarkovGameTheory-basedEnergyBalanceRouting,MGTEBR),构建了关于收益和能量的收益函数.通过收益函数的性质,证明了纳什均衡点的存在.MGTEBR作为能耗、数据转发和节点合作的统一框架,能够有效地降低能量均衡问题研究的复杂性.实验结果表明,MGTEBR能够有效延长无线传感器网络的生命周期.2相关工作目前,国内外关于无线传感器网络能耗管理的主要工作包括:(1)能量均衡消耗方面为确保能量的均衡消耗,需要在路由寻址中进行能量分析和优化配置,尽可能使剩余能量较多的节点转发数据包,保护能量剩余较少的节点,避免节点因过早死亡而影响网络通信[3].这方面研究主要包括三类:能量有效路由协议设计、MAC协议、簇结构和拓扑控制机制[4].文献[5]提出了能量均衡的无线传感器网络短路径路由算法(Energy-BalancedShortPathRouting,EB-SPR),该算法通过使用剩余能量较多的节点作为下一跳节点,从而有效地均衡网络能耗,提高网络生命周期.但在EB-SPR中节点只利用局部范围的节点信息,从而导致能耗局部均衡,不能达到整体最优.文献[6]将路由问题转化为线性规划问题,提出了基于PSO(ParticleSwarmOptimizationAlgorithm)的无线传感器路由优化算法,该算法有效地避免了能量空洞,防止了漏洞效应.但文献[6]没有充分优化网络生命周期,未能在最大范围内延长网络生命周期.文献[7]对马尔可夫决策Petri网和随机博弈网模型进行了深入研究.文献[8]提出了一种自适应能耗均衡路由策略,并给出了相应的数学最优化模型及求解算法,使无线传感器网络整体能耗趋向均衡,尽可能地延长网络生命周期.文献[9]分析了不同能量消耗算法,提出了多项式时间算法,从数学建模角度研究网络耗能,进行网络生命周期的分析.文献[10]建议采用分层处理,把每一层都细化成一个子问题,并构建优化函数,以此协调各层之间的问题,对复杂网络给出统一的设计方法.文献[11-12]综合考虑了网络层和数据链路层,从跨层的角度权衡网络耗能与传输数据,给出效能最大化的网络框架,以此解决网络拥塞问题,并通过最大最小策略调节网络能量,使网络生命周期最大化.文献[13]将1跳网络推广到一般k跳网络,分析得到了最优能量均衡的k跳网络的k选择公式,提出能够保障能量均衡并提高网络寿命的TDMA调度算法.文献[14]把网络生命周期建模为最优化问题,提出相应的传输策略来决定最优环半径大小和跳数,并重新定义了最优占空比的跳数变化和环中节点跳数,给出两个改进策略,使用统一能量值,延长了网络生命周期.文献[15]给出两种分布式算法.第一种假设传感器节点拥有数据的先验概率,并采用汇聚节点收集和处理所有信息,计算协议参数的有效值;然后把该值传送给传感器节点,传感器节点单独计算直接或者邻近传送的概率.第二种协议避开了数据的先验概率,通过数据路径的观察推导出相关信息.两种算法均可延长网络生命周期.(2)博弈论在均衡耗能方面文献[16]针对无线传感器网络能耗不均匀的问题,提出了GTEBR(GameTheory-basedEnergyBalanceRouting)算法,通过引入仲裁机制及自信概率,将不完全信息的静态博弈转换为完全但不完美的信息静态博弈,采用静态博弈的方法,设计计算机制,解决无线传感器网络中能耗不均的问题.Page3文献[17]提出了基于随机博弈模型的网络攻防实验整体架构(随机博弈模型,也称为马尔可夫博弈(MarkovGame),是一种包含一个或多个参与者的具有状态概率转移的动态博弈过程),给出了由网络连接关系、脆弱性信息等输入数据到网络攻防博弈模型的快速建模方法.该方法引用了随机博弈模型,是随机博弈在网络中的成功应用.纵观这些工作,为解决能耗不均匀问题,文献[5-15]给出了不同的解决方法.这些方法均达到了局部优化,在一定范围能解决能耗不均匀问题,但没能达到网络耗能的全局最优.文献[16]使用博弈论进行节点能耗的研究,文献[17]应用随机博弈策略进行网络安全的研究.本文结合随机博弈策略,在GTEBR算法的基础上,给出MGTEBR算法.该算法从全局角度出发,考虑网络的整体收益,从而实现网络全局均衡耗能,达到延长网络生命周期的目的.3MGTEBR模型在无线传感器网络中,节点耗能只与该节点当前所处的状态和采取的行动有关,与节点历史耗能无关.因此,该行为具有马尔可夫性.因此,可引入马尔可夫博弈进行无线传感网络能量均衡的研究.需要说明的是:Ad-hoc网络中节点移动是影响网络性能的重要因素,而无线传感器网络的节点变化区域范围不大,故本文不考虑节点的移动性.马尔可夫博弈由多个博弈阶段组成.在每个初始阶段,博弈处在某个特定状态,参与者选择自身的策略并获得由当前状态和策略决定的报酬.博弈按照概率的分布和参与者策略随机转移到下一个阶段.在新的阶段,重复上一次的策略选择过程,博弈继续进行,直至节点选择的策略使博弈处于一种最优状态为止,该最优状态即纳什均衡点.最后,通过计算各个阶段报酬的贴现值或报酬平均值的下限来给出参与者在随机博弈中获得的全部报酬.为了利用马尔可夫博弈特点解决能耗不均问题,我们需要建立符合现实环境的马尔可夫博弈能量均衡路由模型,并降低能量分析的复杂性.为此,首先给出MGTEBR模型的假设和形式化定义.假设1.面积Sl×m的区域中随机分布了N个传感器节点,每个节点的传输半径为r.定义1.MGTEBR模型Γ是一个五元组Γ=(A,U,R,W,P),其中:(1)A={a1,…,an}为参与路由节点的集合,ai表示第i个路由节点,其中,1iN;(2)U={0,1}表示各个阶段路由节点所处的状态,其中,1表示节点愿意合作,0表示节点不合作;(3)R={Ra1,…,Ran}为所有节点的收益集合,Rai表示节点ai的收益,其中,1iN;(4)W={Wa1,…,Wan}表示所有节点的能量集合,对每个节点ai,其能量包含两个参数Wcostai∈Wai和Wremainai∈Wai,分别表示节点ai消耗和剩余能量,其中,1iN;(5)P节点转发数据的概率,Paiaj∈P表示节点ai向节点aj转发信息的概率,其中1i,jN.初始条件下节点通过广播通知邻节点的自身信息,从获取而实现全局节点的信息.节点广播所付出的代价为自身能量消耗,由于广播所消耗的能量很小,且仅在组网时发生,故广播后剩余能量近似等于初始能量,后文不再讨论.为讨论MGTEBR模型的优越和进行博弈策略的选择,首先进行模型中各个参数的确定.同时为了描述简洁,后文中我们用i表示第i个路由节点,即用i代替ai.3.1参与节点的确定无线传感器网络的形成方式不同决定了传感器节点的分布.在无人或危险区域一般通过飞行器把传感器节点撒播到目标区域,传感器节点位置在固定区域一般成二项分布或均匀分布.本文讨论更具有代表性的二项分布.无线传感网络中,节点信息采集的信息需要向汇聚节点传输.为保证这种传输的可靠性,首先应确定信息采集节点和汇聚节点之间的路由节点位置和数目.3.1.1通信距离内节点的确定假设2.MGTEBR模型中,实验区域为l×l,每个节点的传输范围为SC=πr2,且通信范围内节点位置服从二项分布.在上述假设下,通信范围内节点的个数mc≈ρSC,其中,ρ为平均密度.证明.由假设知,源节点拥有k个节点的概率为P(k)=N-1()k当N1时,ρ=N/Sl×l,(N-1)/Sl×l≈ρ为常数,同理(N-1)SC/Sl×l近似为常数.当SCSl×l,二项分布式(1)近似为泊松分布,即Page4期望节点的分布如图1所示.符合此假设的节点集合应满足AC={(x,y)|(x-x0)2+(y-y0)3.1.2指向目的节点的节点确定假设3.MGTEBR模型中,不考虑节点分度的垂直分量,并用二维标量来表示节点坐标,设节点i的坐标为(x,y),源节点坐标为(x0,y0),目的节点坐标为(xE,yE).定理1.符合假设1、2、3的节点个数mq=ρπ-22r2.证明.如图2所示,圆弧包围的区域面积通过积分公式知S=πr2/2-r2,mq=S/(πr2)=(πr2/2-r2)/(πr2)=π-2=ρπ-2符合条件的节点应满足(x-x0)2+(y-y0)2(xE-x0)2+(yE-y0)2并且(x-xE)2+(y-yE)2(xE-x0)2+(yE-y0)2.指向目的节点的节点集合Aq={(x,y)|(x-x0)2+(y-y0)2(xE-x0)2+其中mq=|Aq|.定义2.满足上述两假设条件的参与节点集合mp=|Ap|,其中Ap=Aq∩AC.初始条件下,满足节点i通信范围的节点集合为Ai.无线传感器网络组网阶段,节点通过广播通知邻节点的自身信息.为采用MGTEBR模型进行网络性能分析,假设初始条件下节点通过广播自身信息消耗的能量为[Wcost1,Wcost2,…,Wcostn],Wcost1≈Wcost2≈…≈Wcostn.由于初始能量相等,在消耗[Wcost1,Wcost2,…,Wcostn]后,节点剩余能量几乎相等.在不影响网络性能的情况下,忽略广播耗能.3.2其它参数的确定定义3.参与节点ai∈Ap中状态集合U取值为1或者0.状态矩阵为犅U=[u1,…,um],si∈{0,1}.初始条件下,节点的剩余能量为常量,消耗能量为0,即Wremaini=const,Wcosti=0.经过数据传输后节点i的剩余能量为由于传输功率与通信距离服从参数为γ的指数增长,2γ4,当γ=2,能量洞问题不可避免;当γ=4时,由于节点最大传输距离的限制,难以实现整个网络区域完全的能量平衡.故,选取γ=3[4],这样Wcosti∝c3其中,kW为耗能系数,datam表示数据的大小.耗能矩阵为犅犠costi=[Wcost1,…,Wcostm]T,能量剩余矩阵犅犠remain=[Wremain1,…,Wremainm]T,cl为源节点到目的节点的距离.定义4.节点i的收益值其中,Ri表示节点i在下一次迭代之后的收益值.初始条件下,收益值Ri=0.ΔR表示补偿收益值,是实际通信距离cl和传输数据的大小datam的函数.节点通过转发信息来提高其收益值.由于转发信息的代价为能耗,则Ri=tWcosti,其中t为补偿系数.由式(5)知令kR=t×kW,则其中,kR为校正补偿系数.其收益值矩阵为犅R=[R1,…,Rm]T.定义5.参与节点的集合为Ap,元素个数为Page5m.节点转发概率矩阵为对角阵,即犘=其中,Pi为节点i向下相邻节点转发数据的概率,是源节点k收益值Rk和待转发节点i剩余能量Wremaini的函数.具体计算为Pi=(αRk+βWremaini)∑m此时Wremainj>0;否则Pi=0.其中α为收益权值,β为能量权值,且α+β=1.4马尔可夫博弈策略无线传感器网络中,节点的能量决定了网络的寿命,若节点的死亡个数过多,节点之间的传输就会中断,网络的寿命也将结束.此时,有些节点的能量并没有耗完,造成了能量的浪费.MGTEBR模型策略就是尽可能地使网络的节点均匀消耗,最大限度地延长网络的寿命.4.1节点信息获取MGTEBR模型中传感器节点的初始能量和收益均相等且固定.转发过程中消耗能量和改变收益值,并把本节点所剩余能量和收益值在发送过程中传递给下一节点,该传输过程需要增加剩余能量和收益值两个字节,但保证整个网络的透明度,有利于节点下次转发时进行转发概率的判断.4.2策略的选择无线传感器网络节点为保证网络系统的运行需要消费自身能量进行数据转发,然而由于自身能量限制使得节点不乐意转发,这样存在一种自身寿命和网络寿命之间的博弈.在MGTEBR模型中,需要找到这个博弈均衡,即纳什均衡点.MGTEBR模型中定义了收益值Ri和剩余能量Wremaini,当节点进行数据的转发就增加其收益值Ri,根据式(10)知,下次节点i进行转发的概率Pi,Pi即节点在博弈过程中采取的策略.该策略主要均衡节点的耗能,从而延长网络寿命.体现网络寿命的形式即节点剩余能量的均衡程度,MGTEBR模型中用方差D(犅Wremain)表示.当方差最小时,理论上等于零时,网络的寿命TWSN最长.下面给出本文所采用的无线传感器网络寿命定义.定义6.无线传感器网络寿命TWSN是指从网络拓扑结构形成到任意节点采集的数据无法直接或间接传输到汇聚节点且传输过程不可恢复的时间间隔.在MGTEBR模型中,网络寿命与方差D(犅Wremain)有关,方差越小,网络中各节点的剩余能量就越均衡,网络的寿命TWSN也就越长.4.3能量的计算节点剩余能量为犅Wremain=[Wremain1,Wremain2,…,WremainN]T(11)对于任意节点i,第一次传输所消耗的能量期望矩阵为犈(Wcosti)=犘×犅Wcost剩余能量期望矩阵为犈(Wremaini)=[const2,…,const2]-每次传输后剩余能量期望矩阵为其中,犈(Wremaini)为传输数据后剩余的能量,犈(Wremaini)为当前的能量,犈(Wcosti)为传输消耗的能量.定义最终节点的能量剩余矩阵:犅Wremain=[Wremain1,Wremain2,…,WremainN]T(15)通过式(14)依次迭代计算犅Wremain.初始条件下收益值矩阵为4.4收益值的计算犚i=[const1+ΔR1,…,const1+ΔRm]T(17)对于任意节点i传输之后的收益值矩阵为同理,所有节点的收益值矩阵4.5纳什均衡存在性随机博弈中纳什均衡存在定理[18]:当状态和行动的数量有限时,随机博弈中存在马尔可夫完美均衡.定理2.在传感器的总数为N的MGTEBR模型中,对于P,P(表示集合中的一个特定元素),使得TWSN最大.即存在纳什均衡点,其中,TWSN为传感器网络的寿命,P=f(α,β).证明.能量剩余矩阵:犅Wremain=[Wremain1,Wremain2,…,WremainN]T(19)犅Wremain是α,β的函数.Page6对于整个网络来说如果节点的死亡率为ε(0ε<1),设节点i的成功传输率为Λ,则如果源节点到目的节点之间的距离为L,通信距离为r,最小通信次数为NTimes,则NTimes=[L/r]+1,其中[x]表示不大于x的最大整数.在死亡率为ε的情况下,从源节点到目的节点成功传输的概率考虑两种情况下,节点的均衡耗能:(1)没有节点死亡的情况此时整个网络没有出现节点死亡现象,其剩余能量平均值和方差分别为D(犅Wremain)=E{Wremaini-E(犅Wremain)}标准差为标准差能反映一个数据集的离散程度,它是衡量能量均衡消耗程度的量.如果耗能越均匀,其标准差也就越小,网络的寿命也就越长.当σ(犅Wremain)=0时,网络寿命最长.由于Wremain是α,β的函数,由上述公式知:σ(犅Wremain)也为α,β的函数.由标准差的定义知,σ(犅Wremain)为凹函数.由于α+β=1,所以σ(犅Wremain)为α的一维函数,当σ(犅Wremain)=0,即最小值时,应满足此方程的解α为满足σ(犅Wremain)=0的值,即是满足博弈模型的解.根据α+β=1,求出(α,β)为纳什均衡点.(2)节点死亡率为ε时由式(20)知,此时节点传输的成功率为Λ.若需要保证网络的顺利传输成功率Λ90%,即Λ=90%.此时,具有转发功能节点的剩余能量为犅Wremain=[Wremain1,Wremain2,…,Wremainm]T(25)其中m具有转发功能的剩余节点数.犅Wremain=[W1,W2,…,Wn]×90%该情况下:D(犅Wremain)=E{Wremaini-E(犅Wremain)}其中0im.标准差为σ(犅Wremain)=D(犅Wremain槡),且σ(犅Wremain)0.同理求出σ(犅Wremain)=0时的纳什均衡点(α,β).MGTEBR模型中主要研究满足上述两种情况下,网络寿命达到最长过程中,节点转发概率Pi的确定,而Pi=f(α,β),最终MGTEBR模型纳什均衡点为(α,β),每次节点转发信息均根据式(10)进行转发概率调节,实现网络均衡耗能的最大化,延长网络的生命周期TWSN.5MGTEBR的实现MGTEBR路由算法包括三部分:能量的计算、邻居节点信息收集和数据转发过程.算法1~算法3给出节点i向节点j发送数据包的具体算法.算法1.初始化节点表算法.//所有节点收集邻居节点表信息1.所有节点广播hellomessage,并设置定时器;给出2.while在有效时间T内收到邻居节点hello报文的3.提取报文中有效信息:邻节点的能量和具体坐标、4.获取对应邻居节点的路由表信息,更新节点的本地5.endwhile算法2.数据发送算法.//节点i向节点j传送数据的计算1.while判断数据没有到达目的节点do2.调用节点i的邻节点信息;3.根据论文3.1节确定指向性目的节点的有效邻节点;4.根据式(7)计算各个有效邻节点的转发概率;5.通过转发概率进行节点选择;6.while数据没有转发成功do7.重新发送或续传数据;8.endwhile9.根据数据包和发送距离更新节点参数;10.根据最优策略调节补偿参数;11.endwhile算法3.最优策略算法.//调节补偿参数,实现网络生命周期最大化1.if没有节点死亡2.{3.结合4.3节第1种情况,4.}5.else6.{Page77.根据通信成功率,8.}9.endif6实验仿真及相关比较本文实验采用PRISM工具进行仿真分析,PRISM是英国伯明翰大学Kwiatkowska教授领导研发的概率模型检测工具,该工具可有效地用于含有随机或概率行为的系统建模和分析.目前,它支持三种概率模型:离散马尔可夫链(Discrete-TimeMarkovChain,DTMCs)、连续马尔可夫链(Continuous-TimeMarkovChain,CTMCs)、马尔可夫决策过程(MarkovDecisionProcess,MDPs).6.1场景实验场景如表1所示.仿真中每次随机选择两个节点作为源节点和目的节点,当数据传输结束时再次随机获取源节点和目的节点.6.2节点分布为使研究模型更具有一般性,我们在场景的通信范围内,随机生成100个节点.图3给出了一次节点的随机分布图.6.3纳什均衡点存在性MGTEBR模型中,由于节点的合作将消耗自身的能耗,不利于自身的生存,所以节点合作与能量存在矛盾.模型用节点的收益值来表示节点受欢迎的程度,如果收益值高说明该节点付出了很多能量进行转发,当该节点需要转发信息时其邻节点就会优先考虑.根据前面的证明,节点的能量和收益值之间存在一种均衡关系———纳什均衡点.仿真结果如图4所示.当(α,β)=(0.6,0.4)时方差最小,仿真过程中方差的变化范围也最小.权值(α,β)=(0.6,0.4)为模型的纳什均衡点,即(α,β)=(0.6,0.4).6.4节点剩余能量及其方差图5给出了GTEBR[16]和MGTEBR两种不同算法下节点能量剩余曲线.由该图可知,MGTEBR算法中节点的能量剩余波动比GTEBR小,更有利于节点能量的均衡消耗,可有效地延长网络生命周期.通过多次实验及式(20),我们给出了两种情况下的剩余能量方差比较,如图6所示.Page8图6表明:MGTEBR算法的剩余能量方差比GTEBR小,变化幅度也小,与图5中的能量剩余情况相吻合.6.5平均跳数图7给出了3种算法的路由平均跳数随仿真次数的变化.由图7可知MGTEBR算法在平均跳数方面优于GTEBR模型,而EAMHR路由算法[20]最优.这是因为EAMHR是最短路径路由,没有考虑节点的能量均衡问题,只是要求在最短路径情况下进行数据的传输.虽然EAMHR算法提高了节点数据传输的速度,但是不利于延长网络生命周期.MGTEBR模型和GTEBR算法充分考虑网络的生命周期,网络生命周期是现实网络的重要特性,两种模型都是最大范围地延长了网络生命周期,而且博弈算法比GTEBR算法的平均跳数少,因此,无论在网络生命周期方面还是数据传输的延时方面MGTEBR算法的网络生命周期都优于GTEBR算法.7结论本文针对无线传感器网络中耗能不均问题,在能量均衡路由的基础上,将马尔可夫博弈论引入无线传感器网络能耗问题研究中,建立了基于马尔可夫博弈的能耗均衡路由形式模型MGTEBR,提出了基于马尔可夫博弈的能量均衡路由算法,该算法通过引入概率模型进行能量均衡研究,并在支付函数中定义了能量和收益值的二元函数.通过收益函数计算出博弈模型的纳什均衡点,找出能量和收益值之间的均衡系数.实验表明:模型存在纳什均衡点.实验也表明:所提出的模型能均衡网络能量和加强节点之间的合作,能延长网络的生命周期,实现了无线传感器网络的低碳节能,有助于绿色网络的推广.
