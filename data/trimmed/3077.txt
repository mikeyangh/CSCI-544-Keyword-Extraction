Page1基于人工鱼群的ABC支持型QoS单播路由机制王兴伟秦培玉黄敏(东北大学信息科学与工程学院沈阳110004)摘要下一代互联网NGI(NextGenerationInternet)需要提供服务质量QoS(QualityofService)路由能力,支持总最佳连接ABC(AlwaysBestConnected).但是,由于链路状态的难以精确测量与用户QoS需求的难以准确表达,因此QoS路由基于的信息实际上是模糊的.同时,在网络运营日益商业化的环境下,支持ABC需要兼顾用户和网络提供方利益,考虑双方效用共赢.为此,文中引入模糊数学、概率论和博弈论知识,设计了一种ABC支持型QoS单播路由机制.该机制采用区间形式描述用户QoS需求和边(链路)参数,引入用户满意度和边评价,通过博弈分析,基于人工鱼群算法,寻找使用户和网络提供方效用达到或接近Nash均衡下Pareto最优的QoS单播路径.仿真结果表明,该机制是可行和有效的.关键词服务质量;单播路由;总最佳连接;人工鱼群算法;Nash均衡;Pareto最优1引言近年来,随着Internet、多媒体内容、移动通信技术等的发展与融合,下一代互联网NGI(NextGenerationInternet)很可能发展成为地面网与空天网、固定网与移动网等异构多段多提供方网络融合而成的一体化网络,出现主干和接入链路多样化的局面.在通信端到端路径上,每一跳都可能存在多种不同类型链路供用户选择,从而使得在通信开始时和进行期间支持用户对NGI的总最佳连接ABC(AlwaysBestConnected)成为可能[1],实现服务质量QoS(QualityofService)全局无缝漫游[2-3].ABC意味着用户在任何时间和任何地点都可以获得当前最佳可用连接,通过当前最佳方式使用NGI,而且每当有更好的连接方式出现时就可以自适应透明切换.然而,“最佳”本身就是一个模糊概念,依赖很多因素(如用户QoS需求、愿付费用、偏爱、终端能力、接入点可用情况等).在网络运营日益商业化的环境下,ABC也不是用户一厢情愿的事,需要兼顾用户和网络提供方利益,支持双方效用共赢[4].此外,NGI组成部分的异构与动态、终端乃至网络移动等的影响和信息传递不可避免的时延及其不确定性等,都导致路由所依赖的链路状态信息难以精确测量.另一方面,用户QoS需求受主观因素影响较大,难以准确表达,需要体现一定柔性.这些都使ABC支持型QoS路由变得非常复杂.受两个或两个以上加性或乘性参数约束的QoS单播路由问题是NP完全的[5],需采用启发式或智能优化算法解决.在文献[5]中,设计了一种算法,先在网络拓扑中剪掉带宽不满足要求的边,而后以延迟为权值使用Dijkstra算法[6]计算带宽约束最短延迟路径.在文献[7]中,设计了一种分布式启发算法,通过构造延迟和费用向量完成路由计算.在文献[8]中,基于概率论把延迟和费用整合成一个参数用于路由选择.在文献[9]中,把QoS参数分为敏感和非敏感两类,简化路由计算.在文献[10]中,引入量化费用函数,基于Bellman-Ford算法[11]设计了一种路由预计算方法.在文献[12]中,设计了一种延迟受限的分布式路由算法.在文献[13]中,设计了一种多约束源路由算法.在文献[14]中,提出了一种可在逐跳路由协议中使用的K近似算法,用来寻找多加性QoS参数约束路径.在文献[15]中,通过引入单一混成指标求解多约束QoS路由.在文献[16]中,提出了两个基于贡献区域的算法求解多约束QoS路由.在文献[17]中,把QoS指标平均和广度优先搜索相结合来求解多QoS约束路由.在文献[18-20]中,把遗传、蚁群和模拟退火这3个智能优化算法分别用于寻找QoS路径.在文献[21]中,引入Pareto最优,设计了两可加QoS约束动态权重系数单播路由算法.在文献[22]中,提出了一种基于概率的不精确链路信息下QoS单播路由算法,寻找延迟与带宽受限费用最小QoS路由.在文献[23]中,把不精确信息下带宽与延迟约束路径问题分解成带宽约束路径和延迟约束路径两个子问题,首先获得非劣解集,而后基于效用函数从中选取特定路径作为问题解.在文献[24]中,针对不精确信息下多加性QoS约束路径问题,采用模糊逻辑从一组候选路径中选择符合要求的QoS路由.在文献[25]中,提出了一种基于模糊塔的QoS单播路由算法,寻找两节点之间既满足用户QoS需求又试图最大化网络提供方概率收益的路径.在文献[26]中,提出了一种基于微观经济学的模糊QoS单播路由机制,采用启发式选路算法,使得找到的路径不仅满足用户QoS需求,而且双方在其上的效用达到或接近Nash均衡下的Pareto最优.但是,上述算法尚未从支持ABC的角度出发充分考虑在链路状态信息难以精确测量与用户QoS需求难以准确表达的情况下,如何实现支持用户和网络提供方效用共赢的QoS单播路由机制.本文引入模糊数学、概率论和博弈论知识,设计了一种ABC支持型QoS单播路由机制,采用区间形式描述用户QoS需求和边(链路)参数,引入用户满意度和边评价,通过博弈分析,基于人工鱼群算法[27],寻找使用户和网络提供方效用达到或接近Nash均衡下Pareto最优的QoS单播路径.仿真结果表明,该机制是可行和有效的.2问题描述2.1网络模型与路由请求网络建模为图G(V,E),V是节点集,E是边集.vi,vj∈V(i,j=1,2,…,|V|),其间可能存在多条边.简单起见,本文把节点参数归并到边参数中.el∈E,考虑如下参数:网络提供方编号Nlp、可用带宽[BwlL,BwlH]、延迟[DllL,DllH]、出错率[LslL,LslH]、带宽单位成本ctl.用户QoS单播路由请求表示为〈vs,vd,[bw_rqL,bw_rqH],[dl_rqL,dl_rqH],[ls_rqL,ls_rqH],Pu〉,其元素依次代表源节点、目的节点、带宽、延迟、出错率需求区间和愿付Page3费用上限.采用区间形式表示带宽、延迟和出错率是为了适应边(链路)参数值的难以精确测量和用户QoS需求的难以准确表达.2.2边参数概率与用户满意度el向用户提供带宽bwl的概率GBl与用户对在el上实际得到带宽bwl的满意度SBl分别定义如下:GBl=SBl=GBl的定义表明,越接近边可用带宽区间下限,则边越可能向用户提供此带宽;SBl的定义表明,越接近用户带宽需求区间上限,则用户对从边实际得到的带宽越满意.设延迟取值在[DllL,DllH]上均匀分布[28],则el的延迟等于dll的概率GDl和用户对在el上实际经历延迟dll的满意度SDl分别定义如下:设出错率取值在[LslL,LslH]上均匀分布,则el的出错率等于lsl的概率GLl和用户对在el上实际经历出错率lsl的满意度SLl分别定义如下:GDl=SDl=GLl=出错率[Ls1,Ls2]〈PF11[Ls2,Ls3]〈PF21[Lsr,Lsr+1]〈PFr1其中,αB、αD和αL分别代表带宽、延迟和出错率对用户QoS需求的相对重要性,0αB,αD,αL1,αB+αD+αL=1.ECl反映了用户对el提供的QoS的满意度.2.4博弈分析在本文中,用户和网络提供方在边上博弈.2.4.1带宽定价带宽定价由基价和浮动价组成,前者根据边的网络提供方确定,不参加博弈;后者根据边的延迟和出错率通过用户和网络提供方博弈确定.表1是边延迟与出错率同带宽浮动价之间的对照关系.例如,若el的延迟与出错率分别位于[Dl1,Dl2]和[Ls1,Ls2],则〈PF11m套带宽浮动价.表1边的延迟与出错率同带宽浮动价对照关系l1,PF12l2,…,PF12l2,…,PF22l1,PF22l1,PFr2l2,…,PFr2SLl=GDl和GLl的定义表明,边在延迟区间和出错率区间各点取值机会均等;SDl和SLl的定义表明,越接近用户延迟和出错率需求区间的下限,则用户对在边实际经历的延迟和出错率越满意.在上述定义中,k>0,ε是远小于1的纯小数.2.3边评价边评价函数表征边对用户QoS需求的适合隶属度.设用户在el上实际占用带宽、实际经历延迟和实际经历出错率分别为bwl、dll和lsl,则定义bwl、dll和lsl对用户带宽、延迟和出错率需求的适合隶属度函数即边带宽、延迟和出错率评价函数EBl、EDl和ELl如下:上述定义表明,带宽、延迟和延迟抖动在一条边上实际取某值的概率越高,用户对在该边上取该值的满意度越大,则该边越适合满足用户的QoS需求.定义边质量综合评价函数ECl如下:延迟[Dl2,Dl3]Page42.4.2博弈策略用户有n种策略,表示为〈bwl1,bwl2,…,bwln〉,bwlx表示用户在第x种策略下在el上实际占用的带宽.网络提供方有m种策略,表示为〈PBl+PFijPBl+PFij和[Dlj,Dlj+1]下的m套带宽定价,其中,PBl是网络提供方在el上的带宽基价.2.4.3费用和成本在策略对〈bwlx,PBl+PFij的带宽而支付的费用EPlxy和网络提供方因向用户提供带宽而承担的成本CTlxy分别计算如下:2.4.4效用和Pareto优势定义用户和网络提供方在el上的效用矩阵为[〈uulxy,nulxy〉]n×m,矩阵的n行与m列分别对应用户和网络提供方的n种与m种博弈策略,则在〈bwlx,PBl+PFij效用uulxy和nulxy分别计算如下:上述定义表明,用户对所用边的质量的综合评价越高,用户因使用该边而实际付出的费用越接近网络提供方因提供该边而实际承担的成本(即用户被网络提供方实际赚取的利润越低),则用户效用越高;网络提供方因提供该边而实际从用户赚取的利润越高,实际承担的成本越低,则网络提供方效用越高.假设图中的边(即网络中的链路)是由Q个网络提供方提供的,则用户和第h个网络提供方在路径P上的效用分别计算如下:效用对〈uulxy,nulxy〉在el上的Pareto优势定义如下:在式(17)中,βu和βn分别代表对用户和网络提供方的倾斜权值,0βu,βn1,βu+βn=1.PDlxy值越小,双方效用越大且越均衡,对应的策略对越能使双方效用Pareto最优.2.4.5博弈过程在边上博弈的目的是通过确定最佳策略对使双方效用达到或接近Nash均衡下的Pareto最优.在[〈uulxy,nulxy〉]n×m中达到Nash均衡的〈uulxy〉应该满足[29]nul在[〈uulxy,nulxy〉]n×m中,若只有一个这样的xy,nul〈uul方最佳策略对.若存在多个这样的〈uul或不存在这样的〈uulPareto优势,选择与PDlxy最小值对应的策略对作为最佳策略对(若有多对,则任选其一).2.5数学模型本文模式的目标是在满足用户QoS需求的前提下使双方效用在所选路径上达到或接近Nash均衡下的Pareto最优,数学描述如下:s.t.这里,路径P的可用带宽BwP、延迟DlP、出错率LsP和用户支付的费用EPP分别计算如下:3算法设计人工鱼群算法是一种模拟鱼群行为的群体智能方法[27].它主要模拟鱼的觅食、聚群和追尾行为,通过人工鱼个体局部寻优,达到在人工鱼群中突现全局最优.本文设计的基于人工鱼群的QoS单播路由Page5算法描述如下.3.1解的表达、生成和适值函数在本文中,人工鱼对应问题解即QoS单播路径,采用向量表示形式,组成路径的边按从源到目的地的方向依次作为向量元素.采用如下随机路径算法生成初始解.1.当前访问节点Nc=vs,上次访问节点Np=Null,将Np压栈;标记图中所有节点状态均为“未访问”.2.若Nc=Null,则失败结束;若Nc≠vd,则转步3,否则转步5.3.置Nc状态为“已访问”.若Nc的所有相邻节点都处于“已访问”状态,则弹出栈顶元素给Np,Nc=Np,转步2.4.从Nc的相邻节点中任选一处于“未访问”状态的节点Nn;从Nc与Nn之间的边中任选一条作为从vs到vd路径的组成边;将Nc压栈,Nc=Nn,转步2.结束;否则,失败结束.5.若路径满足式(22)~(25),则把其作为初始解,成功与人工鱼fk对应的解的适值函数定义如下:显然,适值越小,解越优.3.2人工鱼距离、行为及其选择两条人工鱼fk和fv间的距离定义如下:式(31)表示在与fk和fv对应的向量中有d(k,v)对分量不相同.本文将fk中这样的分量即边的集合记为Dk(k,v).设VDk表示fk的感知距离,则满足d(k,v)<VDk的所有fv构成fk的邻域.Sp表示人工鱼移动步长,θ表示拥挤度因子.fk觅食行为描述如下:1.设定CN,Cn=0.2.对fk,在其邻域内任选一fv.3.若FT(fv)FT(fk),则转步4,否则fk向fv方向移动一步:随机产生整数s(1sSp),若s>d(k,v),则s=d(k,v);在Dk(k,v)中任选s条边进行变换,使其与fv中的对应边相同,觅食行为结束.4.Cn=Cn+1.若Cn<CN,则转步2;否则,fk随机移动一步:随机产生整数s(1sSp),在fk中任选s条边进行随机变换,觅食行为结束.fk聚群行为描述如下:1.确定fk邻域内所有人工鱼组成的集合Rk.2.确定Rk的中心位置fc=(ecRk中的人工鱼在第x个分量上使用最多的边(若有多条这样的边,则任选其一).3.若FT(fc)方法同觅食行为步3;否则,执行觅食行为.聚群行为结束.fk追尾行为描述如下:1.从Rk中选出适值最小的fv(若有多个,则任选其一),fmin=fv,FTmin=FT(fv).2.确定与fmin对应的Rmin.若FTmin向fmin方向移动一步,方法同觅食行为步3;否则,执行觅食行为.追尾行为结束.行为选择采用试探法,即对fk分别模拟执行觅食、聚群和追尾行为,得到fkp、fks和fkf:若fkp、fks或fkf对应的路径不连通,则FT(fkp)、FT(fks)或FT(fkf)置为正无穷大;若fkp、fks或fkf对应的路径存在环路,则去环;若fkp、fks或fkf对应的路径不满足式(22)~式(25),则FT(fkp)、FT(fks)或FT(fkf)置为正无穷大;若FT(fkp)、FT(fks)和FT(fkf)三者不全为正无穷大,则选择执行与最小适值对应的行为.3.3算法流程本文设计的基于人工鱼群的QoS单播路由算法流程描述如下.1.设定人工鱼群规模N,根据3.1节生成N条人工鱼.对每条fk,设定VDk、Sp和θ.2.对每条fk,根据式(30)计算FT(fk),记当前适值最小的fk为fk.3.设定迭代次数I,j=1.4.对每条fk,根据3.2节执行选定的行为,若FT(fk)<FT(fk),则k=k.5.若j=I,则把fk作为问题解,结束;否则,j=j+1,转步4.4仿真实现与性能评价基于NS2(NetworkSimulator2)[30]仿真实现了上述路由机制.仿真时,在路径每一跳上都有卫星、蜂窝和固网3个不同网络提供方提供的链路供选择,在多个实际和虚拟网络拓扑上仿真运行本文机制、基于博弈论方法的模糊QoS单播路由机制[31](同本文机制相比,该机制考虑了链路状态不精确和效用双赢,但未考虑不精确用户QoS需求,也未考虑对ABC的支持)以及基于Dijkstra算法[6]的单播路由机制(以下分别简称A机制、G机制和D机制).仿真时主要参数取值如下:k=2,ε=0.001;αB=αD=αL=0.333,表示带宽、延迟和出错率在用户QoS需求中同等重要;βu=βn=0.5,表示Page6在选路时既不向网络提供方倾斜也不向用户倾斜;VDk=5,Sp=3,θ=0.618.表2是3种机制在CERNET2拓扑(拓扑1)、CERNET拓扑(拓扑2)、G?ANT拓扑(拓扑3)和使用Waxman2模型[32]生成的平均节点度数为3.5的拓扑(拓扑4)上的性能比较结果.这里,QoS路由请求成功率指成功完成QoS路由的请求数占QoS路由请求总数的百分比,Nash均衡下Pareto最优表2性能比较拓扑2AGDQoS路由请求成功率0.9500.8010.7200.9000.7420.6840.9280.8030.7140.9120.8200.701卫星提供方效用0.1580.1520.1460.1620.1540.1480.1600.1520.1460.1630.1540.145蜂窝提供方效用0.1750.1650.1570.1860.1760.1540.1940.1780.1570.2000.1840.158固网提供方效用0.1700.1580.1540.1840.1690.1580.1860.1710.1550.1890.1760.156网络提供方总效用0.5030.4750.4570.5320.4990.4600.5400.5010.4580.5520.5140.459Nash均衡下Pareto最优比0.9120.6280.1710.9220.7430.1990.9380.7250.1830.9540.7500.1765结论本文引入模糊数学、概率论和博弈论相关知识,基于人工鱼群算法,设计并仿真实现了一种ABC支持型QoS单播路由机制,寻找使用户和网络提供方效用达到或接近Nash均衡下Pareto最优的QoS单播路由.仿真结果表明,本文机制是可行和有效的.算法与模型的实用化、原型系统的开发及对组播的扩展是今后研究的重点.
