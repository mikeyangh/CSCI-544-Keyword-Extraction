Page1三分之二模拟拓扑马艳芳1)张敏2)陈仪香2)1)(淮北师范大学计算机科学与技术学院安徽淮北235000)2)(华东师范大学软件学院上海200062)摘要三分之二模拟为验证系统的实现满足其规范提供了抽象描述.为了刻画系统的实现逐渐接近于规范,该文利用网极限的观点,以三分之二模拟为基础,建立系统实现的收敛机制,说明系统规范是其实现的极限形式.首先提出三分之二极限模拟和三分之二模拟极限的定义,建立三分之二模拟的极限理论.其次,建立三分之二极限模拟的拓扑结构,包括子网闭包、尾闭包、自然延拓和复合,证明三分之二模拟极限构成一个收敛类,并诱导一个拓扑,给出三分之二模拟极限的拓扑理论.最后,证明三分之二模拟极限在各种复合算子下的拟同余性(pre-congruence),进而说明各种复合算子关于三分之二模拟极限的连续性.关键词正确性;极限;拓扑;进程代数;三分之二模拟1引言为了讨论复杂系统的交互和并发行为[1-2],Page2论的经典模型,其中最基本的概念是互模拟等价和观测等价,其抽象描述了系统的实际行为与其想要行为之间的一致关系.在进程代数理论的实际应用中,系统的实际行为用系统实现表示,其想要的行为用系统规范描述,并且将实现和规范都抽象为进程,若他们之间存在互模拟等价或观测等价,则在一定程度上认为系统是正确的.基于进程代数理论研究系统的正确性已经得到很多研究成果[11],如应明生[12]提出了近似强互模拟的度量模型,用来描述系统的正确程度.Larsen等人[13-14]基于权重转换系统(weightedtransitionsystem),建立了模拟关系的距离模型.考虑到环境对系统运行的影响,马艳芳、陈仪香等人[15-17]提出了参数化互模拟的极限理论和拓扑理论,并建立了基于环境系统正确性模型.Larsen和Skou[18]为了刻画当两个进程对于所有的测试拥有相同的可观测集合时,这两个进程是不可区分的,提出了三分之二互模拟.何积丰和Hoare[19]在CCS模型中考虑了三分之二互模拟,其目的是证明模拟等价、相互加细和测试等价是一致的,并称其为三分之二模拟.三分之二模拟是进程之间的二元关系,且满足:如果一个进程P能执行一个可观测动作,则另一个进程Q也能执行此动作;如果P能拒绝一些动作,则Q也能拒绝这些动作.在本文中,采用文献[19]中的三分之二模拟.原因在于互模拟是两方面的行为,而三分之二模拟中所考虑的关系不是互模拟,只是一方模拟另一方,并且还满足拒绝的条件,由此称为三分之二模拟也是合理的.根据文献[19],三分之二模拟等价弱于互模拟等价.在实际应用中,对一些特殊的用户来说,使用互模拟等价验证系统的正确非常严格,可以选择三分之二模拟等价作为验证系统实现满足其规范的标准.然而,在系统的需求分析、软件设计、程序编码、软件测试等各个阶段,都需要不断地验证系统的实际行为是否与其想要的行为相一致.而从进程代数理论的观点,在系统开发过程中,需要不断验证系统实现与系统规范之间的满足关系.注意到,系统实现的初始版本未必能够满足规范,为了保证系统的正确性,需要对系统实现进行不断的修改,使得系统越来越正确,所以说系统的正确性是一个动态的过程.在文献[20]中,应明生在互模拟等价的基础上描述了系统的动态正确性,而在实际中有时需要使用三分之二模拟来刻画系统的正确性.本文主要以三分之二模拟为基础,在CCS的框架内试图建立系统动态正确性的收敛机制,建立三分之二模拟的极限理论和拓扑理论.首先提出三分之二极限模拟和三分之二模拟极限的定义,其目的是描述在三分之二模拟下系统规范是其实现的极限形式;其次,建立三分之二极限模拟的拓扑结构,如子网闭包、尾闭包、自然延拓等,证明三分之二模拟极限满足收敛类的定义,可以诱导一个拓扑,从而建立三分之二模拟的拓扑理论.最后,为了刻画系统的模块化和分层设计方法,给出三分之二模拟极限的拟同余性(pre-congruence),其也证明了三分之二模拟极限在三分之二模拟拓扑下的连续性.本文第2节中主要介绍一些预备知识,包括CCS的语法和语义以及三分之二模拟的定义;第3节给出三分之二极限模拟和三分之二模拟极限的定义;第4节建立三分之二极限模拟的拓扑结构,证明三分之二模拟极限构成一个收敛类,建立三分之二模拟拓扑;第5节证明三分之二模拟极限的拟同余性;第6节陈述后续研究工作.2基础知识2.1CCS的语法和语义义为所有动作名构成的集合用Δ表示,a,b,c,…表示其中的元素.用Δ={珔a|a∈Δ}表示补动作构成的集合.规定a=a.令=Δ∪珚Δ,用λ,μ,…表示其中的元素,称中的动作是可观测动作.令τ表示不可观测动作,规定珋τ=τ,Act=∪{τ},用α,β,…表示其中的元素.令映射f:→,如果f满足对于任意λ∈有f(珔λ)=f(λ),则称f为重新标号函数.如果增加f(τ)=τ,重新标号函数可延拓到集合Act上.对于的任何一个子集X,定义珡X=def{α-|α∈X},Xτ=defX∪{τ}.同时,进程变量构成的集合用表示,X,Y,…表示其中的元素.进程常量集合用表示,A,B,…表示其中元素.I或J是索引集.根据Milner提出的通讯系统演算,进程表达式集合可以定义如下.定义1(CCS语法)[6].一个进程表达式E定E····=α.E|E1|E2|∑i∈I其中E,Ei可以是变量也可以是常量.将所有进程表达式构成的集合记为.在进程表达式中有5种算子:前缀α.、和∑i∈I合|、限制\L和重新标号[f].前缀α.表示执行完动Page3作α,然后执行E;和算子“∑i∈I了一种非确定选择,并允许I是无限集,当I=时,用0表示和进程,即0=def∑i∈允许两个成分交错执行,同时也允许通过补动作进行通信或同步;限制算子“\L”使动作L成为局部动作;重新标号算子“[f]”给动作进行重命名.若A∈是一个常量,则A可以定义为:A=defPA,其中PA∈.例如A=defa.A,A=defc.A.如果进程表达式中根本不含变量,称这样的表达式是一个进程.用表示所有进程构成的集合,P,Q,…表示其中的元素.定义2(CCS的操作语义)[6].标号转换系统(Labeltransitionsystem)是一个三元组(,Act,{→α|α∈Act}),转换关系→α(α∈Act)由下面规则给出:α.E→αESumj:Ej→αEj∑i∈IAct:E|F→αE|FCom2:F→αFCom1:E→αECom3:E→λEF→λ-FRel:E→αEE[f]→f(α)E[f]Con:P→αP根据转换规则,自然地可以定义含有一串标号的转换.如果t=α1…αn∈Act=∪E1,…,En-1∈使得E→α1E1→α2…→αn-1En-1→αnE,记为E→tE,称t是E的一个动作序列,E是E的一个t阶导出.若t∈Act,用^t表示在t中删除所有内部动作所得的可观测动作序列,即^t∈,则e=→τ…→λ1→τ…→λn→τ…表示在λi前后可λn∈以执行零个或多个内部动作τ.当n=0时,在e中没有可观测动作,所以e=,表示在执行过程中允许只出现内部动作.在接下来的讨论中主要考虑标号转换系统(,Act,{→α|α∈Act})在上的限制(,Act,{→α||α∈Act}),其中每一个α∈Act,→α|=→α∩(×).在不引起混淆的情况下,用→α来表示→α|.2.2三分之二模拟在文献[19]中,用init(P)表示P在开始时可能执行的所有动作构成的集合,init(P)=def{α∈Act|存在P∈使得P→αP}.使得λ∈init(P)且珔λ∈init(Q)}.推论1[19].(1)init(α.P)={α|α∈Act}.(2)init(∑i∈I(3)init(P|Q)=init(P)∪init(Q)∪{τ|存在λ(4)init(P\L)=init(P)\(L∪珚L).(5)init(P[f])={f(α)|α∈init(P)}(6)init(A)=init(PA),若A=defPA.定义3.稳定[19].如果τinit(P),则称P是稳定的.定义4.拒绝[19].令X是的子集,→τ是→τ的自反传递闭包,则P能拒绝X定义为存在P∈使得P→τP,init(P)∩珡Xτ=.从定义4可知,P能拒绝X也意味着X能被P拒绝.由CCS的操作语义Com3可以看出,当X表示环境,P能拒绝X表示P不能与环境进行交互,即P执行的动作a在环境中找不到相应的匹配a-.j∈J,使得Qj能拒绝X.(L∪珚L).{α∈Act|f(α)∈X}.定理1[19].(1)∑i∈I(2)∑i∈I(3)P\L能拒绝X当且仅当P能拒绝X\(4)P[f]能拒绝X当且仅当P能拒绝f-1(X)=(5)A能拒绝X,当且仅当PA也能拒绝X.定义5.三分之二模拟[19].令(,Act,{→α|α∈Act})是一个标号转换系统,则上的一个二元关系S称为三分之二模拟,如果(P,Q)∈S,λ∈,X满足:(1)若PλP,则存在Q∈使得QλQ且(2)若X能被P拒绝,则X也能被Q拒绝.如果(P,Q)∈S,且S是三分之二模拟,则称Q三分之二模拟P,用P23P,则P和Q三分之二模拟等价.Q2由定义5知,当用动作集合表示环境,条件(2)体现了进程与环境之间的交互.命题1.归约刻画[19].P2λ∈,X,(1)若PλP,则存在Q∈使得QλQ且(P,Q)∈S.Page4P23Q;(2)若P能拒绝X,则Q也能拒绝X.命题2[19].如果P→τP,则P2例如,进程P和Q如图1所示,则P2若将P定义为系统规范,Q定义为系统实现,则规范与实现之间的三分之二模拟表现为:规范要求执行的动作,实现都能够执行,规范要求拒绝的动作,实现也都能够拒绝.之所以称为三分之二模拟是因为,实现所能执行的动作未必一定是规范所要求的,所以,其在三分之二程度上满足了规范.3三分之二模拟极限3…2对一些特别的用户来说,有时会选择三分之二模拟对系统的正确性进行验证.若能够证明系统实现与系统规范保持三分之二模拟,则可以说系统是正确的.但是由于系统的开发过程是一个非常复杂的过程,开发使用的语言、多人合作等因素都可能导致初次开发得到的系统实现与规范之间未必能够满足三分之二模拟.从而为了保证系统的正确性,需要不断地修改实现.对小规模的系统而言,修改后得到的一系列实现之间构成一个序列,如P12P32统的正确性.更加一般地,对于大规模的系统,由于复杂程度较高,需要多模块多人合作完成,对系统实现进行不断修改后得到的实现不再是一个序列,而是一个网状结构.由此,将借助于拓扑学中的网来刻画这种系统实现的模式.对系统实现进行不断修改的最终目的是使其能与规范之间保持三分之二模拟,因此根据拓扑学中极限的观点,系统规范可以看成是系统实现的三分之二模拟极限.本节中将以拓扑学中的网为基础,首先引入三分之二极限模拟,刻画当选择三分之二模拟验证系统正确性时,系统的实现与规范之间的动态近似关系.其次建立三分之二模拟极限,形式化描述系统规范是其实现的极限形式.3.1三分之二极限模拟下面首先介绍网的定义.关系满足下面的性质,则称(D,)为定向集,定义6.定向集[20].若非空集合D上的二元(1)自反性:若m∈D,则mm.(2)传递性:若m,n,p∈D且mn,np,则(3)任意m,n∈D,存在p∈D满足mp,np.定义7.网[20].从定向集合(D,)到非空集合U的映射S称为U在D上一个网,用{Sn|n∈D}表示,其中每一个n∈D,Sn=S(n)∈U.定义8.最终[21].如果存在n0∈D满足:任意nn0,Qn具有性质pro,则称{Qn|n∈D}最终具有性质pro.进程集合上的所有进程网用N表示.任意{Pn|n∈D}∈N,D是定向集合,Pn∈.进程网可以用来描述系统的实现在修改过程中获得的若干实现版本.定义9.令S×N.如果每一个(P,{Qn|n∈D})∈S,任意可观测动作λ∈,X,下面条件成立,则称S是三分之二极限模拟,(1)如果PλP,则存在{Qn|n∈D}∈N和n0∈D,使得每一个nn0,QnλQn且(P,{Qn|n∈D})∈S.(2)如果P能拒绝X,则{Qn|n∈D}最终能拒绝X,即存在n0∈D,使得每一个nn0,Qn能拒绝X.从定义9可知,虽然三分之二模拟本身是一个无限演化形式,但其演化侧重于执行动作的深度演化.而三分之二极限模拟体现了在实际应用时,系统规范与实现之间的无限演化,即通过不断修改实现版本,使其不断满足其规范的量化形式,来逐步近似三分之二模拟.如果实现与其规范没有达到完全满足,则需要继续修改实现,使其能够达到完全满足.直观地说,这个定义意味着,如果规范P和一些实现{Qn|n∈D}是三分之二模拟相关,则修改{Qn|n∈D}的极限三分之二模拟P.同时,规范P能拒绝的动作就是{Qn|n∈D}最终能拒绝的动作.存在一些特殊的进程集合和进程网集合上的二元关系是三分之二极限模拟.S={(P,{Qn|n∈D})|{Qn|n∈D}最终等于P},其中,{Qn|n∈D}最终等于P表示:存在n0∈D使得任意nn0,Qn=P.则S是三分之二极限模拟.事实上,若(P,{Qn|n∈D})∈S,则{Qn|n∈D}mp.命题3.令P是一个进程,集合Page5最终等于P.由定义8知,存在n0∈D使得任意nn0,Qn=P.(1)若PλP,则对于nn0,取Qn=P.而对不满足nn0的n,可以取中的任意进程作为Qn.这样构造{Qn|n∈D}∈N和n0∈D,使得任意nn0,QnλQn,且(P,{Qn|n∈D})∈S.(2)若P能拒绝X,则存在n0∈D,使得任意nn0,Qn能拒绝X,即{Qn|n∈D}最终能拒绝X.命题3体现了在实际设计开发过程中,若对设计的实现进行有限次修改后所得的实现与规范完全相同,此时规范是这些实现的三分之二模拟极限.以后对实现无需再进行修改.命题4.令P是一个进程,集合S={(P,{Qn|n∈D})|P2则S是三分之二极限模拟.事实上,若(P,{Qn|n∈D})∈S,则P2终成立,即存在n0∈D使得任意nn0,P2(1)若PλP,则每一个nn0,由P2知,存在Qn∈使得QnλQn且P2nn0的n,可以取中的任意进程作为Qn.这样存在{Qn|n∈D}∈N和n0∈D,使得任意nn0,QnλQn,且(P,{Qn|n∈D})∈S.(2)若P能拒绝X,则由任意nn0,P2知,Qn能拒绝X,即{Qn|n∈D}最终能拒绝X.命题4陈述了若经过有限次修改软件的实现能够满足:规范所要求执行的动作,实现都能够完成;而规范要求不能执行的动作,实现也没有执行,此时,为了保证系统在三分之二模拟下的正确性,以后对实现的修改都要与规范之间保持三分之二模拟关系.3.2三分之二模拟极限在本节中给出三分之二模拟极限的定义,其刻画在三分之二模拟下系统实现的收敛机制,即系统规范是系统实现的三分之二模拟极限.定义10.三分之二模拟极限.令P∈,{Qn|n∈D}∈N.如果存在三分之二极限模拟S使得(P,{Qn|n∈D})∈S,则称P为{Qn|n∈D}的三分之二模拟极限,记为P2令3lim={(P,{Qn|n∈D})|P∈且P22则23lim是三分之二极限模拟.例1.设进程P=defλ.P,λ∈,则P2λ.0,其中λ出现n次,且0=∑i∈事实上,可以构造一个二元关系S={(P,{λkn|n∈ω})|任意n∈ω,kn∈ω且limn→kn=},其中,把任意n∈ω,λ.λ…λ.0(λ出现n次)记为λn,则(P,{λn|n∈ω})∈S.任取(P,{λkn|n∈ω})∈S,limn→kn=.如果PλP,则需要证明存在{Qn|n∈ω}和n0∈ω使得任意nn0,λknλQn且(P,{Qn|n∈ω)∈S.注意到,任意n∈ω,kn∈ω且limn→kn=,limn→max{0,kn-1}=,由S的定义知,(P,{λ(max{0,kn-1})|n∈ω})∈S,且存在n0∈ω使得kn1且任意nn0,λknλλ(max{0,kn-1}),因此存在{Qn|n∈ω}={λ(max{0,kn-1})|n∈ω}和n0∈ω使得任意nn0,有λknλQn且(P,{Qn|n∈ω})∈S.另一方面,设X,且P能拒绝X,即珔λX,由此可知任意n∈ω,λkn能拒绝X.进一步根据定义9可知,S是一个三分之二极限模拟.命题5.P2(1)如果PλP,则存在{Qn|n∈D}∈N和n0∈D使得每一个nn0,QnλQn且P2义,下面给出一个例子..如果∑n∈Dn,λn≠λn,则∑n∈DλnPn2绝X.(2)如果P能拒绝X,则{Qn|n∈D}最终能拒证明.()如果P2极限模拟S使得(P,{Qn|n∈D})∈S.由三分之二极限模拟的定义可知,任一λ∈,定义9中条件(1)和(2)成立.而由(P,{Qn|n∈D})∈S得P2同时定义9中的条件(2)保证了,如果P能拒绝X,则{Qn|n∈D}最终能拒绝X,所以命题5成立.()令S={(P,{Qn|n∈D})|任意λ∈,X,(P,{Qn|n∈D})满足命题5中的条件(1)和(2)}.如果(P,{Qn|n∈D})∈S,则任意λ∈,X,命题5中的(1)和(2)都成立,故P2步,由()的证明可得(P,{Qn|n∈D})∈S.同时(2)的成立使得:若X能被P拒绝,则X最终也能被{Qn|n∈D}拒绝.因此由定义9可知,S是三分之二极限模拟且P2为了更好地说明三分之二模拟极限的归约定例2.令(D,)是定向集,每一个n∈D,Pn∈Page6证明.如果∑n∈Dλn0Pn0λP.由转换规则可知λ=λn0且Pn0P.每一个n∈D,令Qn=P,则任意nn0,∑mn由命题3可知,P2如果∑n∈D而对∑mnD,∑mn{λmPm|mn}能拒绝X,即{∑mnn}n∈D}最终能拒绝X.故由命题5知∑n∈DλnPn2例3.进程P和进程网{Qn|n∈D}如图2所示,其中D是自然数集合按照小于等于关系构成的定向集.由三分之二模拟的定义知,P2因为,进程P可以执行a并继续执行b,再执行d,而进程Q1在执行b后不能执行d.但进程Q2的执行动作与进程P完全相同,所以P2出,任意n2,Q22Q22模拟极限是P.3Q32命题6.令P是一个进程,{Qn|n∈D}是一个3.3三分之二模拟极限的性质进程网,且最终等于P,则P2证明.由命题3可证.此命题表明若进程网中除有限个元素不等于P,则它的三分之二模拟极限就是P.Qn最终成立,则P2命题7.令P∈,{Qn|n∈D}∈N.若P2证明.由命题4可证.如果一个进程网中除有限项均与P三分之二模拟相关,命题7表明此进程网的三分之二模拟极限是P.命题8.如果P2limn∈DQn.证明.因为Q2极限模拟R使得(Q,{Qn|n∈D})∈R.构造集合R={(W,{Vnn∈D})存在V∈,使得W2只需证明R是三分之二极限模拟.假设(W,{Vn|n∈D})∈R,则存在V∈使得W2n∈D})∈R.(1)如果WlW,由W2在V∈使得VlV且W2n∈D})∈R,故由定义9可知,存在{Vn|n∈D}∈N和n0∈D使得任意n>n0,VnlVn且(V,{Vn|n∈D})∈R.因而(W,{Vn|n∈D})∈R.(2)如果W能拒绝X,则由W2可知V也能拒绝X.又由(V,{Vn|n∈D})∈R和定义9可知,{Vn|n∈D}最终能拒绝X.进一步,再由定义9可得,R是三分之二极限模拟,故P2若在实际开发过程中,对系统规范进行分析后初步设计了一个实现版本,而这个实现版本满足:规范要执行的,其能够执行;规范要拒绝的,其能够拒绝.但是对于用户来说,此实现版本可能不够具体,需要进一步进行开发,由此得到一系列具体的实现版本,而这一系列实现版本也要满足最开始的规范.命题8基于三分之二模拟给出上述情况的抽象描述.命题9.如果存在n0∈D,每一个nn0,Pn2Qn且P2证明.类似于命题8可证.从命题9可知,如果两个进程网最终是三分之二模拟相关,则它们的三分之二模拟极限是相同的.在实际开发中,同时有两个团队A和B进行开发设计,而团队A的实现能够执行的动作,团队B的实现也能执行,同时团队A的实现能够拒绝的动作,团队B也能拒绝,它们之间构成三分之二模拟关系,则团队A的三分之二模拟极限是团队B的三分之二模拟极限,即它们具有相同的规范.4三分之二模拟拓扑在本节中,根据三分之二极限模拟和三分之二模拟极限建立三分之二模拟拓扑.首先介绍三分之二极限模拟的一些拓扑结构,这些结构有利于从数学角度更好地理解三分之二极限模拟,进而丰富系统实现与规范之间关系的数学基础,并且为建立三Page7分之二模拟拓扑提供了有力的依据.4.1子网闭包定义11.共尾[21].令C,D是定向集合.如果N:C→D是一个映射且满足任意n∈D存在m∈C,使得满足每一个pm,Np(=N(p))n,则称(C,N)为D的共尾.定义12.共尾子集[21].令(D,)是定向集,CD也是定向集.如果任意n∈D,存在m∈C,使得nm,即(C,inC)是D的共尾,则称C为D的共尾子集.定义13.子网[21].令{Sn|n∈D},{Tm|m∈C}是网.如果存在映射N:C→D使得(1)Tm=SNm,m∈C;(2)(C,N)是D的共尾,则称{Tm|m∈C}为{Sn|n∈D}的子网.如果S是D上的一个网,C是D的共尾子集,则S|C={Sn|n∈C}是S的子网.令S×N.则S的子网闭包sub(S)定义为sub(S)={(P,{Qn|n∈D})|存在(P,{Rm|m∈C})∈S,定理2.如果S×N,则sub(S)是三分之二极限模拟当且仅当每一个(P,{Qn|n∈D})∈S,任意λ∈L,X,满足:(1)如果PλP,则存在{Qn|n∈D}∈N和n0∈D,使得每一个nn0,QnλQn且(P,{Qn|n∈D})∈sub(S).(2)如果X能被P拒绝,则存在n0∈D满足:任意nn0,X也能被Qn拒绝.证明.()由sub(S)是三分之二极限模拟可知,每一个(P,{Qn|n∈D})∈S,(P,{Qn|n∈D})∈sub(S).由三分之二极限模拟定义知定理2中的(1)和(2)成立.()令(P,{Rp|p∈E})∈sub(S).则存在(P,{Qn|n∈D})∈S使得{Rp|p∈E}是{Qn|n∈D}的子网,从而存在映射N:E→D使得(E,N)是D的共尾且每一个p∈E,Rp=QNp.不妨设N是增加的,即p1p2,Np1Np2,则(1)如果PλP,则存在{Qn|n∈D}∈N和n0∈D,使得每一个nn0,QnλQn且(P,{Qn|n∈D})∈sub(S).因为(E,N)是D的共尾,所以存在p0∈E使得每一个pp0,Npn0.对每一个p∈E,令Rp=QNp,则任意pp0,Rp=QNpλQNp=Rp成立,并且{Rp|p∈E}是{Qn|n∈D}的子网,且(P,{Rp|p∈E})∈sub(S).(2)如果X能被P拒绝,则存在n0∈D,使得任意nn0,X也能被Qn拒绝.由共尾的定义可知,存在p0∈E使得每一个pp0,Npn0.又因为p∈E,QNp=Rp,因此当Npn0,Rp能拒绝X,即存在p0∈E,每一个pp0,Rp能拒绝X.证毕.推论2.如果S是三分之二极限模拟,则sub(S)也是三分之二极限模拟.4.2尾闭包如果D是定向集且n∈D,令D[n)={m∈D|mn},则D[n)是D的共尾子集.令S×N.定义tail(S)={(P,{Qn|n∈D})|存在n0∈D定理3.如果S×N,则tail(S)是三分之二极限模拟当且仅当每一个(P,{Qn|n∈D})∈S,任一动作λ∈,X,满足:(1)如果PλP,则存在{Qn|n∈D}∈N和n0∈D,使得每一个nn0,QnλQn且(P,{Qn|n∈D})∈tail(S);(2)如果P能拒绝X,则存在n0∈D,使得每一个nn0,Qn能拒绝X.证明.()如果tail(S)是三分之二极限模拟,则任意(P,{Qn|n∈D})∈Stail(S),进而定理3中(1)和(2)成立.()假设(P,{Qn|n∈D})∈tail(S),则存在n0∈D使得(P,{Qn|n∈D[n0)})∈S.(1)如果PλP,因为(P,{Qn|n∈D[n0)})∈S,所以存在{Qn|n∈D[n0)}∈N和n1∈D[n0),使得任意nn1,QnλQn且(P,{Qn|n∈D[n0)})∈tail(S).再由tail(S)的定义,存在n2∈D[n0)使得(P,{Qn|n∈D[n0)[n2)})∈S,即(P,{Qn|n∈D[n2)})∈S.由此可知任意nn0,{Qn|n∈D[n0)}是进程网,而对不满足nn0的n,可以选择中的任一元素作为Qn,这样得到进程网{Qn|n∈D}∈N,且对{Qn|n∈D}∈N来说存在n1使得每一个nn1,QnλQn,并且存在n2,使得(P,{Qn|n∈D[n2)})∈S,从而(P,{Qn|n∈D)})∈tail(S).(2)如果P能拒绝X,则由假设,存在n1∈D[n0),使得每一个nn1,Qn能拒绝X.由D[n)的定义可知,存在n1∈D,使得每一个nn1,Qn能拒绝X.推论3.如果S是三分之二极限模拟,则tail(S)也是三分之二极限模拟.Page84.3自然延拓定义14[20].令{Pm|m∈C},{Qn|n∈D}∈N.如果(C,N)是D的共尾,对每一个n∈D存在mn∈C,使得Nmnn,且Qn=Pmn,则称{Qn|n∈D}为{Pm|m∈C}的自然延拓.ext(S)={(P,{Qn|n∈D})|存在{Pm|m∈C}∈N设S×N.令命题10.如果S是三分之二极限模拟,则ext(S)也是三分之二极限模拟.证明.假设(P,{Qn|n∈D})∈ext(S),由定义可知存在{Pm|m∈C}∈N,使得(P,{Pm|m∈C})∈S且{Qn|n∈D}是{Pm|m∈C}的自然延拓.因此存在映射N使得(C,N)是D的共尾.同时,由自然延拓的定义可知,每一个n∈D,存在mn∈C使得Nmnn且Qn=Pmn.下面证明满足定义9中的条件(2).对于定义9中条件(1)可参考文献[20]中的第42页的证明.(2)如果P能拒绝X,则存在m0∈C使得每一个mm0,Pm能拒绝X.对每一个n∈D,存在mn∈C使得Nmnn且Qn=Pmn,从而每一个nNm0,NmnnNm0成立.一般地假定N是增加的,即n1n2mn1mn2,所以mnm0.从而存在Nm0使得每一个nNm0,{Qn|n∈D}能拒绝X.4.4迭代结构下面讨论三分之二极限模拟的迭代结构.每一个i∈I,令(Di,i)是定向集,则{(Di,i)|i∈I}的乘积是×i∈I(Di,i)=(×i∈IDi,),其中定义为d,e∈×i∈IDi,de当且仅当任一i∈I有d(i)e(i),因此(×i∈IDi,)也是定向集合.令D是定向集,每一个m∈D,Em是定向集,且令F=D××m∈DEm.如果每一个m∈D,{R(m,n)|n∈Em}是Em上的网,则{R(m,n)|n∈Em}(m∈D)的迭代∏m∈Df(m))|(m,f)∈F}.S和{Tm|m∈D}的合成S{Tm|m∈D}定义为S{Tm|m∈D}={(P,∏m∈D令S×N,每一个m∈D,Tm×N.则定理4.如果S和Tm(m∈D)是三分之二极限模拟,则S{Tm|m∈D}也是三分之二极限模拟.证明.令(P,∏m∈Dm∈D}.则存在Qm∈(m∈D)使得(P,{Qm|m∈D})∈S,且每一个m∈D,(Qm,{R(m,n)|m∈Em})∈Tm.下面证明满足定义9中的条件(2).对于定义9中的条件(1)的证明参考文献[20]第43页.(2)假定P能拒绝X.因为(P,{Qm|m∈D})∈S,所以存在m0∈D使得任一mm0,Qm能拒绝X.同时每一个mm0,存在f0(m)∈Em使得任一nf0(m),R(m,n)能拒绝X.对任一不满足mm0的m,可以选择Em中的任何一个元素作为f0(m),这样就有f0∈×m∈DEm.对任一(m,f)(m0,f0)有mm0,f(m)f0(m),所以R(m,n)能拒绝X.进而,S{Tm|m∈D}也是三分之二极限模拟.定理4描述了系统模块间的复合性质.若给定系统的规范P,对其规范进行分析初步设计出系统的实现版本{Qn|n∈D},有时这些实现版本不够具体,需要依据这些实现再进行具体的开发设计,这样,初步设计的实现与后面设计的实现复合出来的实现最终目的是满足最开始的规范.这种方法在需求分析中应用广泛.命题11.令I是索引集合.若Si(i∈I)是三分之二极限模拟,则∪i∈ISi也是三分之二极限模拟.4.5不动点令S×N,定义η:2×N→2×N为η(S)={(P,{Qnn∈D})每一个λ∈,推论4.(1)η是增加的,即若S1S2,则η(S1)η(S2);(2)S是三分之二极限模拟当且仅当Sη(S);(3)23lim且η(S)=S蕴含S22如果S×N,令p(S)表示S的性质:(P,{Pm|m∈C})S蕴含存在一个{Pm|m∈C}的子网{Qn|n∈D}使得且对{Qn|n∈D}的任何一个子网{Rp|p∈E},(P,{Rp|p∈E})S.下面的性质表明在进程和进程网之间任何关系的自然延拓在η下的象都满足性质pro.推论5.设S×N,则pro(η(ext(S)))成立.证明.如果(P,{Pm|m∈C}η(ext(S)),则存在λ∈,X,存在下面两种情况.下面需要找到Page9{Pm|m∈C}的子网{Qn|n∈D}使得任何{Qn|n∈D}的子网{Rp|p∈E},(P,{Rp|p∈E})η(ext(S)).情况1.存在P∈,使得PλP且任意{Pm|m∈C}∈N,任意k∈C,(P,{Pm|m∈C})∈ext(S)蕴含:存在nk使得PnλPn不成立.对于情况1的证明可参考文献[20]第53页.下面给出情况2的证明.情况2.如果P能拒绝X,则每一个k∈C存令Φ={Pm|m∈C,Pm不能拒绝X}.在nk使得Pn不能拒绝X.则定义Φ×C={(Pn,k)}上的关系:M=(Pn,k),M=(Pn,k),定义MM当且仅当kk,则Φ×C是定向集,且对任意M∈Φ×C,存在mMk使得PmM不能拒绝X.令QM=PmM,则{QM|M∈Φ×C}是{Pm|m∈C}的子网.下面只需证明对{QM|M∈Φ×C}的任何一个子网{Rp|p∈E},(P,{Rp|p∈E})η(ext(S)).事实上,假定(P,{Rp|p∈E})∈η(ext(S)),则因为P能拒绝X,因此存在p0,任意pp0,Rp能拒绝X.不妨设N:E→Φ×C是增加的.任意p∈E,令Rp=QNp.由于(E,N)是Φ×C的共尾,则(E,projCN)是C共尾,其中projC:Φ×C→C,任意T∈Φ,m∈C,projC(T,m)=m.令m0=projC(Np0)∈C,则存在mMm0使得PmM不能拒绝X.进而(PmM,m0)∈Φ×C,故存在p∈E使得Np(PmM,m0).由于N是增加的,所以pp0.又因为Rp=QNp,由{QM|M∈Φ×C}的定义知,QNp=PmNp.由于PmNp不能拒绝X,从而Rp不能拒绝X,这与pp0时Rp能拒绝X矛盾.4.6三分之二模拟拓扑在前面几节中,为了刻画系统规范是其实现的极限形式,借助于拓扑学中网极限的定义,建立了三分之二模拟极限.根据拓扑学理论,可以根据网及其极限所构成的收敛类构造拓扑,这个拓扑更好地体现了网收敛在拓扑学中的重要作用.在这一节中,主要以三分之二模拟极限为基础构造三分之二模拟拓扑.本节中的主要结果是定理7,陈述了三分之二模拟极限产生一个收敛类,且在这个收敛类的基础上诱导了一个拓扑.首先回忆一下拓扑学中如何从网收敛来定义拓扑的.根据拓扑学的知识,收敛类在构造拓扑时起到关键作用,下面回顾一下收敛类的定义及其重要的性质.首先,介绍一下拓扑和闭包算子的定义以及相关的定理,具体内容请参考文献[22-23].定义15.拓扑[23].设X是一个集合,是X的一个子集簇.如果满足如下的条件,则称是X的一个拓扑:(1)X,∈;(2)若A,B∈,则A∩B∈;(3)若I是一个索引集,且任意i∈I,Ai∈,则∪i∈IAi∈.如果是集合X上的拓扑,则称(X,)是一个拓扑空间.上的每个元素称为拓扑空间(X,)中的一个开集.任意FX,F称为拓扑空间(X,)的一个闭集当且仅当X-F是拓扑空间(X,)的一个开集.接下来介绍集合上的闭包算子[23],这个算子在一定条件下可以定义一个拓扑.所谓集合X上的闭包算子是将X的任意子集A映射为Ac,AcX,且满足下面的条件,即Kuratowski的闭包公理:(1)c=;(2)AAc;(3)Acc=Ac;(4)(A∪B)c=Ac∪Bc.定理5[23].设c为X上的闭包算子,又设是所有X的满足Ac=A的子集A组成的族,再设为所有中元的余集族,则为关于X的拓扑,称为与闭包算子相伴随的拓扑,并且对X的每一个子集A,Ac为A的-闭包.最后回顾一下网收敛类的定义以及如何根据这个收敛类来构造拓扑,这部分内容主要来自文献[23].令是一个由(S,s)组成的类,其中S是集合X中网,s是点,称为关于X的收敛类当且仅当满足下面的4个条件.为方便起见,又称S()收敛于s或limsSn≡s()当且仅当S()收敛于s;收敛于s;该子网没有收敛于s的子网;(1)若S是这样的网它使得每一个n,Sn=s,则(2)若S()收敛于s,则S的每一个子网也()(3)若S不()收敛于s,则S的一个子网使得(4)设D是定向集,又设D中的每一个m,Em也是定向集,再设F为乘积D××{Em|m∈D}并且对F中的(m,f),令U(m,f)=(m,f(m)).若limmlimnS(m,n)≡s(),则SU()收敛到s.某个拓扑所诱导的.下面的定理6给出了每一个收敛类实际上是由定理6[23].设为关于集X的一个收敛类,又Page10对X的每一个子集A,命Ac为所有这样的点s的集,它使得对A中的某个网S有S()收敛于s,则c为一个闭包算子,并且(S,s)∈当且仅当S关于与c相伴随的拓扑收敛于s.由定理5和定理6可知,要想从收敛类来定义一个拓扑,首先要找到一个收敛类,同时还要根据收敛类定义一个闭包算子,那么这个拓扑就是闭包算子的相伴随拓扑.定理7.(1)如果P∈,{Qn|n∈D}∈N,且P2终成立,则P2(2)如果{Qn|n∈D}是{Pm|m∈C}的子网且3limm∈CPm,则P2(3)P2P2子网{Qn|n∈D},使得对于{Qn|n∈D}的任何子网{Wp|p∈E},P2(4)令D是定向集,对每个m∈D,Em是定向集.令F=D××m∈DEm,且(m,f)∈F,U(m,f)=(m,f(m)).如果每一个m∈D,Qm2且Q2证明.(1)、(2)和(4)可根据命题4、推论2和(3)由ext(·)的定义可知23lim)2定理4得证.又因为2ext(23lim,由推论4可知,22η(ext(2定理7表明三分之二模拟极限满足收敛类的条件,从而由进程网及其三分之二模拟极限构成的类形成了一个收敛类.根据定理5和定理6中定义拓扑的方法,接下来定义由这个收敛类产生的拓扑.令U,定义cl(U)={P∈存在一个网{Qnn∈D}使得P2可以证明cl是上的闭包算子.由三分之二模拟极限所决定的闭包算子诱到了一个进程集合上的拓扑称为三分之二模拟拓扑,记为()2假设(X,τ)是一个拓扑空间,UX,x∈X,如果存在一个开集V∈τ使得x∈VU,则U被称为x的邻域.令S={Sn|n∈D}是X上网,如果S最终在x的每个邻域内,即对x的每一个邻域,存在n0∈D使得对任意nn0,Sn∈U,则称S关于拓扑τ收敛于x.在这种情况下记为x=(τ)limn∈DSn.因此,由文献[21]中的定理2.9和定理7可知,由三分之二模拟拓扑决定的收敛和三分之二模拟极限相一致,也就是说,任意P∈,任意{Qn|n∈D},P2且仅当{Qn|n∈D}关于拓扑()25关于各种运算的连续性在本节中,主要关注进程的各种复合算子在三分之二模拟极限下的连续性.由于进程的各种算子可看成进程集合上的函数,所以这些函数的连续性也体现了在三分之二模拟拓扑下的连续性.同时,算子在极限下的连续性也保证了系统的逐层进化和逐层分解的正确性,并抽象描述了系统的模块化和分层设计的方法.定理8.(1)若P2其中M是一个和进程,每个和子都是形如β.Q的形式,且α≠β;(2)若P2(3)若P2(4)若P2(5)若P2(6)如果A=defPA,其中PA是和进程,并且每个和子都是Guarded进程,则A2情况:证明.(1)根据α是否等于τ,可以分为两种情况1.α≠τ.①假设α.P+MlP,则α.PlP或者MlP.如果α.PlP,则l=α,PP.由于当P→τP,3P,所以由命题2和P2P2limn∈DQn.由定义2,任意n∈D,α.Qn+MlQn,所以存在{Qn|n∈D}∈N和n0∈D使得任意nn0,α.Qn+MlQn且P2MlP,则任意n∈D,α.Qn+MlP.对任意n∈D,令Qn=P,由命题6知P2能拒绝X.这样任意n∈D,α.Qn+M能拒绝X.②如果α.P+M能拒绝X,则根据定理1知M情况2.α=τ.Page11①假设α.P+MlP,则α.PlP或者MlP.如果α.PlP,则PlP.因为P2以存在n0∈D和{Qn|n∈D}∈N使得任意nn0,QnlQn且P2MlQn.如果MlP,则任意n∈D,α.Qn+MlP.任意n∈D,令Qn=P,由命题6知P2P2②如果α.P+M能拒绝X,则根据定理1知P能拒绝X.因为P2任意nn0,Qn能拒绝X.这样任意nn0,α.Qn+M也能拒绝X.由此,根据命题5可知α.P+M2(2)构造集合R={(P|V,{(Qn|V)n∈D})|3limn∈DQn}.①假设P|VlU.则存在P∈和V∈使得U=P|V成立.分为以下4种情况:情况1.PlP且V→τV;情况2.VlV且P→τP;情况3.存在一个可见动作序列〈l1,…,ln〉使得P〈l1,…,ln,l〉P且V〈珋l1,…,珋ln〉·→τV;情况4.存在一个可见动作序列〈l1,…,ln〉使得V〈l1,…,ln,l〉V且P〈珋l1,…,珋ln〉·→τP.情况1.因为P2N和n0∈D使得任意nn0,QnlQn且P2limn∈DQn.由转换规则可知任意nn0,Qn|VlQn|V,进而(P|V,{(Qn|V)n∈D})∈R;情况2.因为P→τP,故由命题2知P2而P2VlV,由转换规则知,任意n∈D,Qn|VlQn|V.因此(P|V,{(Qn|V)n∈D})∈R;情况3.类似于情况1;情况4.类似于情况2.②下面证明要满足的第2个条件,假设P|V能拒绝X,能拒绝U=P|V使得P|V→τU且init(U)∩珡Xτ=.则分为两种情况:情况1.P→τP且V→τV;情况2.存在一个可见动作序列〈l1,…,ln〉使得P〈l1,…,ln〉·→τP,且V〈珋l1,…,珋ln〉·→τV.P|V2(3)V|P2(4)由于P2所以init(P|V)=init(P)∪init(V).又由于P2limn∈DQn且P→τP,由命题2和命题8知,P2因为P能拒绝Y=Γ\{l|珋l∈init(P)},故存在n0∈D,任意nn0,Qn能拒绝Y.由定义4知,存在一个稳定进程Qn∈使得Qn→τQn且Qn能拒绝Y的每个动作.这表明init(Qn)init(P).因此(Qn|V)也是稳定的,即τinit(Qn|V).事实上,若τ∈init(Qn|V),则由推论1可知,存在l∈init(Qn),珋l∈init(V).又由init(Qn)init(P)可知,l∈init(P),从而τ∈init(P|V),这与τinit(U)矛盾.故init(Qn|V)=init(Qn)∪init(V).又由init(P|V)∩珡Xτ=,即(init(P)∪init(V))∩珡Xτ=知,(init(Qn)∪init(V))∩珡Xτ=init(Qn|V)∩珡Xτ=.从而任何nn0,Qn|V也能拒绝X,即{(Qn|V)n∈D}最终能拒绝X.情况2.类似于情况1.综合以上可知,R是三分之二极限模拟,所以限模拟R使得(P,{Qnn∈D})∈R,构造一个集合R={(P\L,{(Qn\L)n∈D})(P,{Qnn∈D})∈R}.下面只需证明R是三分之二极限模拟.①假设P\LlP,则由转换规则可知l,珋lL且PlP,P=P\L.由于(P,{Qnn∈D})∈R,所以存在{Qnn∈D}∈N和n0∈D使得任意nn0,QnlQn且P2知Qn\LlQn\L=Qn,所以(P,{Qnn∈D})∈R.②若P\L能拒绝X,则P能拒绝X\(L∪珚L).由于(P,{Qnn∈D})∈R,所以存在n0∈D使得任意nn0,Qn能拒绝X\(L∪珚L).再由定理1可知{Qn\Ln∈D}最终能拒绝X.综合以上两点可知,R是一个三分之二极限模拟,所以P\L2(5)由于P2限模拟R使得(P,{Qnn∈D})∈R.构造一个集合R={(P[f],{Qn[f]n∈D})(P,{Qnn∈D})∈R}.下面只需证明R是三分之二极限模拟.①令P[f]lP,则由定义2中转换规则可知存在l∈和P∈,使得PlP且l=f(l),P=P[f].由于(P,{Qnn∈D})∈R,所以存在{Qn|n∈Page12D}∈N和n0∈D使得任意nn0,QnlQn且(P,{Qnn∈D})∈R.再由定义2中的转换规则知Qn[f]lQn[f]=Qn,因此(P,{Qnn∈D})∈R.②如果P[f]能拒绝X,则P能拒绝f-1(X).由于(P,{Qnn∈D})∈R,所以存在n0∈D,任意nn0,Qn能拒绝f-1(X).由定理1可知{Qn[f]|n∈D}最终能拒绝X.故R是一个三分之二极限模拟,即P[f]2(6)由三分之二模拟的定义知A2A.再由命题6可证明(6)成立.在本定理的性质(1)中,选择了将前缀算子和和算子放在一起讨论,主要是因为对于和算子,当转换关系是弱转换时,其不满足封闭性[6],所以在讨论和算子时,其每个和子都是Guarded进程,这样才能保证在和算子下的封闭性.注1.由定理8知,进程的各种算子关于三分之二模拟拓扑是连续的,但这种连续性有一定的条件,对于和算子,其每个和子要求是Guarded进程.同时通过定理8可知,其中f是各种复合算子.事实上,由于f是连续的.令P是{Pn|n∈D}的三分之二模拟极限,则由文献[22]中的命题1.4.1,对f(P)的任意邻域V,存在P的邻域U使得f(U)V.由于P2Pn∈U,进而f(Pn)∈V.这样任意nn0,f(Pn)∈V,由此f(P)2注2.在文献[20]的命题3.1.16给出了方程解的极限表示,其刻画了从任何一个进程Q开始的方程Pn+1=E{Pn/X}的解,其中P0=Q,X是进程变量,E是进程表达式,E{Pn/X}表示在进程表达式E中将X出现的地方替换为Pn.进而得到的进程序列的极限是方程X~E的不动点.在此命题证明的证明中用到一个关键的性质是强互模拟极限是唯一.然而,在本文对三分之二模拟极限是否唯一还没有给出很好的结论.我们试图证明:若P2limn∈DPn,则P2没有找到合适的三分之二极限模拟S使得(P,Q)∈S.由此本文对不动点问题还没有得到很好的技术来解决.这些问题将为本文的后续工作提供了方向.6结论在本文中主要以CCS模型为基础,给出了系统实现与其规范之间动态近似的抽象描述,建立了三分之二模拟的无限演化形式,讨论了进程的三分之二极限模拟的拓扑性质,如闭包、自然延拓、复合等.同时,通过极限刻画了系统规范是其实现的极限形式,建立了三分之二模拟的极限理论,并根据极限构造了三分之二模拟拓扑.在本文的最后证明了进程的各种复合算子在三分之二模拟拓扑下的连续性.从而对递归进程A=P(A)中的P是连续的.但我们还没有想到很好的技术来解决P的不动点问题.在接下来的工作中,我们将试图改进本文建立的三分之二模拟拓扑,进而考察递归进程的不动点性质.在本文中,我们主要考察了系统的动态正确性.而在实际中,由于资源配置,硬件设备等原因,系统的实现未必能够完全满足规范,而系统实现与其规范之间的满足程度从静态角度刻画了系统的正确程度.在接下来的工作中,我们将以三分之二模拟为基础,建立系统实现与规范之间正确程度的度量模型.
