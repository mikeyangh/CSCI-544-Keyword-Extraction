Page1云计算环境下云服务用户并发量的区间预测模型孟煜张斌郭军闫永明(东北大学计算机科学与工程学院沈阳110819)摘要云计算环境下服务用户并发量的预测是云环境自适应资源调整的重要依据,但传统的单值预测所包含的信息量过少,受并发量不确定性影响明显,所以其不足以支持完备的自适应调整策略制定,因而会引发过多无效的调整动作.针对上述问题,该文提出一种云服务用户并发量区间预测模型,通过预测并发量的区间量化其不确定性.该模型利用梯度下降粒子群优化的支持向量机作为主要预测方法.为了更有效地预测不同类型的并发量,提出了一种基于自相关系数以及功率谱分析的AC-PS并发量特征判定规则,并针对不同特征并发量采取不同的区间构造方法.该文通过一个实例分析该区间预测模型对解决自适应资源调整无效问题的有效性,最后利用对比实验验证预测区间的准确性.结果表明,相对于其它方法文中提出的区间预测模型对各类并发量数据的预测精度均达92%以上,其预测效率有76.11%~96.15%的提升,因此提出的并发量区间预测方法能够为避免自适应资源调整无效问题提供可靠支撑.关键词云服务;并发量;区间预测;云环境;资源调整1引言云计算模式强调的按需付费模式要求云环境下的服务系统能够为用户提供不同服务等级(ServiceLevelAgreement,SLA)的服务[1],在初始部署云服务时,为满足云服务的SLA,云服务环境需要针对特定用户并发量制定最佳虚拟资源配置方案.但是由于云服务用户并发量经常实时变化,初始的资源配置无法使云服务一直保持满足SLA的运行状态,因此云服务需要运行时在资源代价最小的情况下动态调整资源配置来保证云服务的SLA[2].自适应的资源调整能够更加有效地应对云环境的实时变化,从而为云服务系统持续的性能保障提供更加有效的支持[3].在适应用户并发量变化的自适应资源调整过程中,云服务用户并发量的获取方式对资源调整的有效性具有很大的影响[4].云环境下服务用户并发量的获取方式主要分为两种:一种方法是实时获取云服务用户并发量[5-6],根据当前云服务的用户并发访问情况得到并发量的当前值,由于云环境状态的不断变化,这种方式会具有无法避免的滞后性,容易产生大量的不必要调整.另一种获取方式是采用预测的方法获取[7-8],利用并发量的历史数据通过预测得到未来一段时间内的并发量.这种方式能够支持主动的自适应资源调整,减少不必要调整的数量,为调整的有效性提供保障.因此目前并发量的预测方法是云环境自适应资源调整研究中的重点.在并发量预测领域中,目前的研究主要分为两类.一类是自回归移动平均法[9]、灰色模型[10]以及排队论[11]等传统的序列分析方法,另一类是模式匹配[12]、基于神经网络[13-14]以及支持向量机[15]等机器学习对并发量进行预测.无论是序列分析方法还是机器学习方法都是针对未来一段时间内与时间点相对应并发量的特定值的预测.将这些方法应用到针对适应并发量变化所做的自适应资源调整问题的解决上,可能导致自适应调整过程的无效调整问题,其主要表现为由于预测不准确导致产生不该有的调整以及由于并发量频繁快速变化导致调整方案在调整动作执行后的短时间内失效两个方面.产生不该有的调整的原因是由于云服务会受到用户行为、业务内容以及服务时间等因素的影响,导致其用户并发量的产生具有很强的不确定性,因此对于并发量预测的误差是无法避免的,其预测结果不可能很准确.无效的资源调整不仅会导致云环境资源的浪费,而且会引发新的违反SLA的问题,反而对云服务产生负面影响.如果在并发量的预测过程中,将并发量预测的不确定性也表示出来,进而在自适应调整中将预测的不确定性考虑在内,则能从根本上解决因为预测误差导致的自适应资源调整失误问题.但是传统的单值预测方法无法表示预测的不确定性,而预测的不确定性可以用一个范围以及概率量化出来.另一方面,由于SLA中所界定的是并发量的一个范围,通过SLA评价云服务性能不需要单个的数值,所以相对于单个预测值而言如果给出一个范围其准确度会提升.因此在处理并发量不确定性的问题上,对于并发量可能产生的范围预测会比单值预测更有效.在不考虑并发量不确定性的情况下,即使预测结果非常准确,由于并发量在短时间内的频繁快速变化,会出现调整方案在调整动作执行之后立即失效的问题.这样就需要在预测过程中衡量出并发量在一段时间内的变化,然而仅仅依靠单个并发量预测的数值无法表示并发量在短时间内的频繁快速的变化.而如果用上下界限的形式来表示预测结果,则可以衡量出并发量的变化范围,使自适应调整能够从这个范围中提取并发量变化信息,从而避免因为并发量变化过快而引发的调整失效的发生.Page3解决以上两种自适应资源调整无效问题都要求预测算法不能只给出一个预测值,需要给出一个并发量的区间及其置信度,为此,本文提出一种云服务用户并发量区间预测模型.该模型能够预测未来一段时间内的并发量真实值可能存在的区间及其置信度.利用此模型能够为解决自适应资源调整无效问题提供有效支持.为了使区间预测模型适用于各种类型的并发量数据,通过分析服务用户并发量历史数据,根据并发量数据的分布趋势,本文提出基于自相关系数以及功率谱分析的AC-PS(Autocorrelation-PowerSpectrum)并发量特征判定规则.利用此模型可将并发量分为平稳型、趋势型和周期型共3种特征类型.为了精确地预测3种特征类型的并发量区间,本文提出一种面向多种并发量类型的基于梯度下降粒子群优化[16]的支持向量机的服务用户并发量区间预测方法,针对不同的特征采取不同的区间构造方式,并通过查找支持向量机的参数的最优解来确保并发量预测区间的准确性,进而提高多种类型并发量预测的效率与灵活性.本文第2节介绍云服务并发量预测方法以及区间预测方法的相关工作;第3节给出云服务用户并发量区间预测模型及并发量类型判定规则;第4节给出云服务用户并发量区间预测的主要过程及详细算法;第5节通过云环境用户并发量区间预测模型的应用实例分析模型的有效性;第6节通过不同区间预测算法的对比分析云环境用户并发量区间预测算法的准确性;第7节对全文进行总结,并简要介绍下一步研究的主要方向.2相关工作2.1用户并发量预测方法目前并发量预测的研究主要集中在两类:一类是通过序列分析的方法预测并发量,Xiong等人[17]根据服务的CPU需求、I/O需求利用开放式排队网络分析预测在线负载;Calheiros等人[9]利用自回归模型预测虚拟机负载作为动态分配资源的依据.Chiang等人[18]利用排队论算法预测应用的并发量来为数据中心的资源分配提供支持.另一类是利用机器学习的方法,Huang等人[19]基于线性回归分析对云环境下资源进行了动态调整,可以使云环境下的应用更好地满足SLA需求;Yang等人[12]提出基于模式匹配方法的负载预测模型并用于云资源的弹性计算中.Jiang等人[20]根据应用的历史和实时的性能数据,基于回归分析建立用户行为和负载的模型,通过分析和评估来描述用户行为和负载特性.从目前的研究可以看出,在分析预测服务性能判定触发条件时,主要是利用排队论、协同过滤以及回归分析预测并发量,无论是序列分析方法还是机器学习方法都是针对未来一段时间内与时间点相对应的并发量特定值的预测.无法针对并发量的特点给出并发量的不确定性以及变化范围.2.2区间预测方法区间预测是一种将预测目标的固有不确定性利用区间的形式表达的预测方法.在区间预测过程中含有两个关键的不确定性量化方式,置信区间(ConfidenceInterval,CI)和预测区间(PredictionInterval,PI).置信区间表示在给定预测目标的指定设置中目标概率分布的平均值可能落入的范围.预测区间表示在给定预测目标的指定设置中单个观测值可能落入的范围[21].所以在实际的预测过程中预测区间被认为是表示真实值所在区域的更加有效的表示方式.与置信区间相比,由于预测区间包含了未来更多的不确定性信息,较宽的预测区间表示实际的不确定性较高,反之较窄的预测区间表示实际的不确定性较低.因此自适应资源调节需要谨慎地使用较宽预测区间的结果作为参考,而较窄的预测区间结果则可以被信任的利用.由于区间预测能够表达预测目标的不确定性,所以区间预测被广泛应用于金融[22]、气象[23]、化学[21]、医疗[24]以及电力[25]等诸多领域,但是在云环境用户并发量预测的研究中尚未提及.传统的区间预测方法主要包括线性回归法[26]、分布假设法[27]、朴素贝叶斯法[28]及分类回归树[29].线性回归将历史数据回归成线性函数,以此来构建预测区间.分布假设模型是预先假设了一个预测误差的分布情况,然后通过计算预测目标的误差来确定预测区间.朴素贝叶斯法通过建立先验分布模型,然后利用基于历史数据的最大化分析构造预测区间.分类回归树则是通过使用信息增益来决定回归树的最优划分,然后以每个叶子节点作为学习模型对目标进行预测及区间划分.这些方法都是先进行单值回归预测再利用置信度分位进行区间构建,所以需要各种不确定的数据分布假设,导致预测区间的精确度不理想.而目前一些更复杂的神经网络的方法被用于区间预测中来估计预测目标的不确定性.基于卡尔曼滤波的神经网络也被用于预测区间Page4的估计中,其中卡尔曼滤波通过将神经网络的参数作为一个状态向量,训练并更新出一个前馈的神经网络,以此来突破不能在区间预测中产生动态的协方差的限制[30].基于神经网络的上下界估计法[31]利用一个双输出的神经网络使预测区间的计算避免了对于历史数据分布规律的假设.但神经网络方法通常具有预测结果受限于局部极小值、参数调整过量以及漫长的计算时间等限制.基于支持向量机的方法被很多学者用于不确定性估计中.支持向量机是一种基于统计学理论的监督学习模型,由Cortes和Vapnik[32]于1995年首先提出.支持向量机构建了一种超平面,由此可以有效地解决非线性及样本数量少等问题,被广泛地应用于数据分类以及回归预测模型的构建中[33].支持向量机的核心思想是将输入空间Rn非线性地映射到一个高维空间D上,从而将低维特征空间的非线性回归问题转化为高维特征空间的线性回归问题.本文利用支持向量机的回归模型来预测并发量的区间.由于支持向量机在解决回归问题上的突出表现,很多研究将其作为主要的回归模型用于区间预测当中.在非线性条件异方差预测过程中支持向量机被用于预测电力价格[34].为了确定异方差误差的方差函数,一种半参数混合影响的最小二乘支持向量机被用于置信区间与预测区间的预测中[35].然而这些方法都将重点放在提高预测区间对真实值的覆盖率上,但忽略了预测区间的宽度,这样对于云服务用户并发量的预测而言,很容易因为预测区间过宽而导致决策无法准确制定的问题.本文的目标是利用梯度下降粒子群优化的支持向量机构建一种非参数、分布自由的云服务用户并发量预测模型.支持向量机使用的是全局极小值,突破了神经网络中局部最小值的限制.而选择合适的参数会使支持向量机的性能得到很大提升.为了提高预测效率,本文利用梯度下降粒子群算法对支持向量机的参数做出最优化选择.3云服务用户并发量区间预测模型云服务用户并发量区间预测模型使用支持向量机作为主要的机器学习方法,相对于其它区间预测方法,支持向量机在查找全局最小值、结果重复筛选以及基础函数自动选取等方面有着突出优势.在确定支持向量机参数过程中,引入粒子群算法查找参数的最优解以降低支持向量机的训练误差.为了更为准确地预测各种特征的云服务用户并发量的区间,预测模型引入本文提出的AC-PS并发量特征判定规则对并发量历史数据分类.针对不同并发特征类型,在预测模型中选取不同的区间构造方法以提高预测区间的精度.3.1模型基本结构云服务用户并发量区间预测模型结构如图1所示.模型主要分为并发量历史数据区间序列构建以及并发量区间生成两个部分.并发量历史数据区间序列构建是将一个并发量时间序列划分为两个时间序列,这两个序列分别表示历史并发量的上界及历史并发量的下界.并发量区间生成是利用生成的并发量历史数据区间序列预测出给定时间内的并发量区间.并发量历史数据区间序列构建为其预测区间生成提供数据基础,历史数据区间能够直接影响到预测结果,因此历史数据区间需要准确地包含并发量序列的变化特征.但是在云环境下不同云服务需要承载的并发量特征是有所不同的,而随着时间的推移,同一服务在不同时间内的并发量也会有显著的差异.所以需要对并发量历史数据按照其变化特点进行分类,这样才能准确地量化出并发量变化的特征.为了分析云服务用户并发量特征,根据其数据分布趋势,提出了AC-PS判定规则.此方法将并发量分为平稳型、趋势型和周期型这3种类型,进而可以按照并发量的不同类型利用不同的方法构建其历史数据的区间.对于并发量预测区间的生成,本文选用基于梯度下降粒子群优化的支持向量机作为主要的训练及预测方法.为了得到两个输出结果构建出预测区间的上下界,需要引入两个支持向量机模型:一个支持Page5向量机模型利用历史数据区间的上界预测出预测区间的上界;另一个支持向量机模型则用来预测区间下界.两个支持向量机模型都选择径向基函数(RadialBasisFunction,RBF)作为其核函数.选择径向基核函数的原因是径向基核函数可以用较少的超参数来表示高维数据,这样就减少了模型选择的复杂度.径向基核函数可以被表示为k(x,y)=exp(-γx-y2),其中γ是核参数.在基于径向基核函数的支持向量机中,支持向量机的惩罚因子C与核参数γ对于支持向量机的精确度有很大的影响[33].由于预测模型中使用两个支持向量机预测区间的上界和下界,为了使预测区间既能满足预期的置信度又能减小区间宽度,每个支持向量机都需要最优的惩罚因子C与核参数γ,所以模型中需要确定四个参数的数值.为了获得一个最佳的参数组合使预测区间满足给定的置信度,并在此基础上最小化其预测区间的宽度,需要确定一个合适的参数选择策略.最基础的方法是网格搜索,这种方法是在参数可能存在的范围内顺序的搜索来确定适当的参数.由于并发量的预测需要实时地应用于云环境的资源自适应调整中,所以这种在线预测方式需要对运算的实时性有较高要求.基于网格的最优化查找方法计算复杂度过高,所以非常耗时.这样就需要选择一种优化方法,这里我们选择使用粒子群优化算法作为参数最优解的查找方法.粒子群优化算法是由Venter等人[36]首先提出的一种源于对鸟群觅食行为研究分析而产生的群智能算法.为了进一步提高算法的运算效率,在粒子群算法中引入梯度变化思想[16],利用粒子在历史迭代中收敛强度的梯度信息作为其移动速度的更新依据,减少粒子速度及位移的随机性,从而加快粒子群的收敛速度,提高预测算法的实时性.3.2基于自相关系数及功率谱的AC-PS判定规则云服务用户并发量是指单位时间内用户对服务的请求数.并发量con的定义如下.内的请求数,则并发量con=r定义1.并发量.如果用r表示服务在t时间通常情况下,t以s为单位,并发量则为云服务每秒的用户请求数.为了分析云服务用户并发量在时间维度上的特征,需要用到一段时间内相同时间步长下时间点的并发量数据集,也就是并发量时间序列,可如下定义.定义2.并发量时间序列.并发量的时间序列是一个按照时间顺序排列的时间与并发量的二元组的集合,即并发量时间序列S={〈t1,con1〉,〈t2,con2〉,…,〈tn,conn〉}其中:n为并发量个数;coni为ti时间的并发量,ti需要满足ti<ti+1.coni的大小与定义1中t的取值相关,t的取值会影响coni的精度.t越小coni越接近ti时刻的并发量的真实值,t越大coni越能代表一段时间内的平均水平.为了减小并发量个别噪声对特征分析造成的影响,本文中coni的取值为时间步长内的平均并发量,即coni=riti-ti-1时间内云服务的用户请求数.为了在预测过程中判定云服务用户并发量类型,本文提出一种基于自相关系数及功率谱综合判定的AC-PS判定规则.AC-PS判定规则的结构如图2所示.自相关系数能够反映时间序列中不同时期观测值之间的相互关系,通过计算不同延迟步长下的自相关系数,可以从不同角度评价云服务用户并发量的特征.由定义2可知,con1,con2,…,coni,…,conn是过去n个时间点对应的云服务用户并发量.将这个序列按照延迟步长为1的间隔可化分为n-1个二元组:〈con1,con2〉,〈con2,con3〉,…,〈coni,coni+1〉,…,〈conn-1,conn〉.其延迟步长为1的自相关系数为ρ1=γ(i,i+1)=∑n-1Page6其中,coni=1自相关系数的含义不同于两个变量间的相关系数,并发量自相关系数ρ1用来度量并发量时间序列上一时间段并发量观测值与下一时间段并发量观测值之间的关系,从定量的角度来研究上一时间段对下一时间段并发量观测值的影响程度的大小.自相关系数的延迟步长是组成二元组的两个数值在序列中的间隔数,如果延迟步长为k,则组成的二元组为〈coni,coni+k〉,由此可知,并发量时间序列可被划分出n-k个二元组,这样可以得到并发量的自相关系数序列.定义3.并发量自相关系数序列.并发量自相关系数序列是一个由各延迟步长下自相关系数组成的序列Pm={ρ1,ρ2,…,ρm}={ρk}m发量时间序列在延迟步长为k下的自相关系数:ρk=∑n-k其中,k=1,2,…,m.m为最大延迟步长,一般情况下m=n通过分析并发量时间序列的自相关系数集合Pm,可以确定并发量时间序列的波动特征.为了直观地分析并发量序列平稳性特征,选取景点语音导航云服务系统中,景区推荐服务2016年3月2日上午9:00~9:50间以1min为步长并发量数据序列.此序列共包含51个并发量值,变化趋势具有平稳型序列的代表性.其自相关系数序列的延迟步长的取值为k=1,2,…,m,m=1,2,…,17,则此用户并发量序列的Pm如图3所示.平稳型云服务用户并发量的第一个自相关系数ρ1为Pm中的最大值.并且ρ1与零有显著性的差异,其余延迟步长下的自相关系数都在零的上下不规则波动,且与零没有显著性差异.对于趋势型序列,选取有代表性的GPS景区识别服务2016年3月2日上午9:00~11:30以2min为步长的用户并发量序列.该序列共有76个并发量值,变化趋势为递增,具有明显的趋势型序列代表性.其自相关系数序列的延迟步长的取值为k=1,2,…,m,m=1,2,…,25,用户并发量的Pm如图4所示.趋势型云服务用户并发量的第1个自相关系数ρ1也为Pm中的最大值,但整个Pm序列呈单调递减趋势,大多数延迟步长的自相关系数与零有显著性差异.对于周期型序列,分别选取有代表性的景点图像识别服务与景点路线获取服务2016年3月1日至3月12日每天早6:00到晚6:00间步长为1h的并发量序列,每个服务的并发量序列均包含13×12=156个数值,景点图像识别服务的并发量序列在此时间段内有明显的周期性,且趋势平稳,可以代表一般周期型序列.景点路线获取服务在此时间段内也有明显的周期性,且还具有增长的趋势,可以代表趋势周期型序列,这两种序列的Pm如图5所示.周期型云服务用户并发量的自相关系数也具有明显的周期性,规律的交替出现波峰和波谷,并且在波峰至波谷单调递减,波谷至波峰单调递增.随着延迟步长的增加,每个周期的振幅不断减少.周期型序列又可分为两种,一般周期型和趋势周期型.如果并发量数据在某一常数上下周期性波动,则自相关系数会如图5(a),在零值上下均匀波动最后趋近于零,这种序列属于一般周期型.如果并发量周期性的递增或周期性的递减,则自相关系数会如图5(b),其自相关系数会呈周期性递减趋势,这种序列属于Page7趋势周期型.由以上3种类型并发量时间序列自相关系数分析得知,自相关系数能够明显地区分平稳型序列与趋势型序列.如果时间序列在某一常数上下随机波动,那么其自相关系数序列与零有显著相关性(差异性不显著)[37].时间序列的功率谱能够通过其谱峰反映时间序列的周期性,本文利用周期图法来估计并发量时间序列的功率谱序列.定义4.并发量功率谱序列.并发量功率谱序列是一个由各频率下实现序列的功率谱组成的序列Q={^p1,^p2,…,^pn}={^pv}n列频率为v的功率谱:Fv为离散傅里叶变换,表示为Fv=∑nWn被称为旋转因子,Wn=e-j2π由于功率谱序列在v=n只分析v∈1,n务用户并发量功率谱序列Q如图6所示.从图6中不难看出,在周期型云服务用户并发量功率谱序列中包含功率谱突出高的谱峰,这个谱峰则为序列的周期峰.利用功率谱序列可以得到并发量序列的周期.定义5.并发量序列周期数.并发量序列周期数为周期型并发量序列在一个周期内的数值个数nperiod=1非周期型云服务用户并发量功率谱序列Q如图7所示.从图7中可以看出非周期型云服务用户并发量功率谱序列中没有突出高的谱峰,且各频率下的功率谱大小各异,即无增减性趋势也无规律性.通过对云服务用户并发量时间序列的自相关系数以及功率谱的分析可知,通过比较自相关系数序列与零值的显著性差异可以判别出并发量时间序列的趋势性,通过检测功率谱序列中是否存在突出峰值可以判别并发量时间序列的周期性.t检验Page8(t-Test)[38]是一种最常见检验序列显著性差异的方法,其利用t分布可推断出并发量自相关系数序列Pm与零发生差异的总体代表性的过错概率Pρ.当Pρ0.05时,表示自相关系数序列与零差异性不显著;当Pρ<0.05时,表示自相关系数序列与零差异性显著[38].对于功率谱序列突出峰值的识别,本文引入基于3σ准则的序列突变奇异值检测方法,将3σ准则作用于相邻数据变化序列中,从而找出突出的峰值.定义6.相邻数据变化序列.相邻数据变化序列为序列相邻数据之差的序列.则功率谱序列Q的相邻数据变化序列其中hv=2^pv-(^pv+1+^pv-1),v=2,3,…,n由于当v=1时^pv的值可能会出现突出峰值,当时间序列为趋势型时这个峰值尤为突出,但这个峰值表示整个时间序列只有一个周期,因此这个值不能代表序列的周期性,所以在识别突出峰值时不考虑v=1时的功率谱.如果用μc代表H的平均值,用σc代表其标准差,则根据3σ准则,当hv-μc>3σc时,^pk为奇异值,否则为非奇异值.因此综合以上两种检测方法,可得到云服务用户并发量类型的准确定义.定义7.平稳型并发量序列.当并发量序列Pρ0.05且不存在^pv使hv-μc>3σc时称此并发量序列为平稳型并发量序列.定义8.趋势型并发量序列.当并发量序列Pρ<0.05且不存在^pv使hv-μc>3σc时称此并发量序列为趋势型并发量序列.定义9.周期型并发量序列.当并发量序列存在^pv使hv-μc>3σc时称此并发量序列为周期型并发量序列.4云服务用户并发量区间预测算法运用云服务用户并发量区间预测模型对并发量预测的主要过程如下.过程1.云服务用户并发量区间预测主要过程.(1)云服务用户并发量分类;(2)并发量历史数据区间构建;(3)支持向量机参数优化;(4)预测并发量区间.为了给并发量分类提供判定依据,首先需要分别计算并发量历史数据的自相关系数以及功率谱.自相关系数序列以及功率谱序列包含了并发量序列的特征,需要分别对两个序列进行特征提取.最后利用提出的AC-PS并发量判定规则判定并发量的类型.AC-PS判定规则需要分别计算云服务并发量时间序列在不同延迟步长下的自相关系数序列以及在不同频率下的功率谱密度序列.然后分别用两种分析方法对两组序列进行分析.计算自相关系数序列对于零值的显著性差异,并且对功率谱序列进行奇异值检测.最后利用两组序列分析结果做综合判定,从而确定并发量的类别.云服务用户并发量分类具体算法见算法1.算法1.云服务用户并发量分类算法.输入:云服务用户并发量历史数据时间序列S输出:并发量序列类型Kcon,并发量序列周期period(如1.fori=1;im;i++2.{ri=PS(S,i);//计算延迟步长为i的自相关系数3.Pm.add(ri);}4.fori=1;iint(length(S)/2);i++5.{qi=PS(S,i);//计算频率为i的功率谱6.Q.add(qi);}//功率谱加入自相关功率谱序列中7.Pρ=Ttest(Pm,0);//计算与0的差异概率8.fori=2;iint(length(Q)/2);i++9.{hi=abs(qi2-(qi-1+qi+1));10.H.add(qi);}//生成相邻数据变化序列11.avg=average(H);//H的平均值12.s=std(H);13.period=0;//初始化周期14.fori=1;ilength(H);i++15.{ifhi-avg>s316.then{17.period=length(H)/i;18.Kcon=‘periodType’;//判断为周期型19.Break;}}20.ifPρ0.0521.thenKcon=‘smoothType’;//判断为平稳型22.elseKcon=‘tendencyType’;//判断为趋势型23.returnKcon,period;并发量历史数据区间构建是将并发量历史序列划分成区间的形式,这样原历史序列S被划分成为两个序列,Su={〈ti,conuSu是并发量历史数据区间的上界序列,Sl是并发量历史数据区间的下界序列.并发量历史数据区间是要将真实值包含在内的,所以并发量的上下界是在原数据序列S的基础上依照并发量序列的分类特点采用不同的方式增加及减少得到.由于这个区间Page9的生成既要避免预测过程中的不必要的计算,又要防止区间设置过大或过小对于区间特征的干扰,更要使区间能够代表并发量的变化特征,因此区间的构建对于并发量的预测是尤为重要的.为了体现不同类型并发量的变化特征,每个类型的并发量序列构建区间的方式是不同的.各种类型并发量的区间构造方式见算法2.算法2.并发量区间构建算法.输入:S,Kcon,period输出:Su,Sl1.Smax=max(S),Smin=min(S),S_len=length(S);2.ifKcon==‘smoothType’3.then{fori=1;iS_len;i++4.{Su.add(0.5×(S[i]+Smax));5.Sl.add(0.5×(S[i]+Smin));}}6.ifKcon==‘tendencyType’7.then{forj=1;jS_len-1;j++8.{interval.add(abs(S[j+1]-S[j]));9.interval_avg=average(interval);}10.fori=1;iS_len;i++11.{iftendencytype==‘up’;12.then{Su.add(S[i]+interval_avg+(Smax-13.Sl.add(S[i]-interval_avg);}14.iftendencytype==‘low’15.then{Su.add(S[i]+interval_avg);16.Sl.add(S[i]-interval_avg-(S[i]-Smin)/17.ifKcon==‘periodType’18.then{fori=1;iS_len;i++19.{if(iint(period/2)+1)20.then{forj=1;jperiod-1;j++21.{interval.add(abs(S[j+1]-S[j]));}22.interval_avg=average(interval);}23.if((i>int(period/2)+1)and(i<S_len-24.then{forj=i-int(period/2);25.{interval.add(abs(S[j+1]-S[j]));}26.interval_avg=average(interval);}27.if(iS_len-(int(period)/2-1))28.then{forj=S_len-period;jS_len-1;j++)29.{interval.add(abs(S[j+1]-S[j]));}30.interval_avg=average(interval);}31.Su.add(S[i]+interval_avg);32.Sl.add(S[i]-interval_avg);}}33.returnSu,Sl;在支持向量机优化参数优化之前需要分别将已经构造出的并发量历史数据区间的上界集合Su与下界集合Sl划分成训练集SuSltest.训练集将被用来训练及调整模型,测试集用于支持向量机模型的测试.支持向量机参数优化主要分为初始化粒子群参数、训练模型、粒子适应度评价、更新局部最优解与全局最优解等过程.粒子群中每个粒子都包含4个元素,也就是两个支持向量机的惩罚因子C与核参数γ.一般情况下C的取值范围为[10-5,105],γ的取值范围为[0,10].这两个参数的合适范围不是预知的.由于在粒子群迭代过程中运用到了梯度下降的方法,所以参数的查找先从两个宽泛的范围开始,根据适应度函数的梯度下降信息决定粒子的移动方向及速度,从而缩小查找范围.这样做一方面减少了计算量,提高了收敛速度,另一方面保证了全局最优解的覆盖广度以及局部最优解的精确度.支持向量机优化算法见算法3.算法3.支持向量机参数优化.输入:Su输出:C_u_Gbest,Gamma_u_Gbest,C_l_Gbest,Gamma_l_1.init(maxParticles,maxIterator,position,velocity);2.trainBag_u,testBag_u=fold(Su3.trainBag_l,testBag_l=fold(Sltrain,5);4.fori=1;imaxIterator;i++5.{C_u,Gamma_u,C_l,Gamma_l=PSOtrain(SVM6.fitness=CWC(C_u,Gamma_u,C_l,Gamma_l,7.G=gradient();//计算梯度信息8.iffitness<fitness_Pbest9.then{fitmess_Pbest=fitness;10.C_u_Pbest,Gamma_u_Pbest,C_l_Pbest,Gamma_Page1011.ifmin(fitness_Pbest)<fitness_Gbest12.then{fitmess_Gbest=min(fitness_Pbest);13.C_u_Gbest,Gamma_u_Gbest,C_l_Gbest,Gamma_14.position,velocity=update(position,velocity,G);15.}16.returnC_u_Gbest,Gamma_u_Gbest,C_l_Gbest,在算法3中,评价粒子适应度需要一个适应度函数,这个适应度函数既要保证预测区间的精度达到给定的置信度,又要尽可能缩小其区间宽度.由两个支持向量机组合成的区间预测模型要同时优化预测区间置信度与区间宽度两个优化目标,使用一般的适应度函数是无法准确地评判参数的适应性的.这里引入一种覆盖宽度评价标准(CWC)[34]作为粒子的适应度评价准则.定义10.覆盖宽度评价标准[34].覆盖宽度评价标准为其中,η和β为两个控制fCWC规模的超参数,η是惩罚因子,为一个正数,β为目标范围覆盖概率,也就是给定的区间置信度.在训练过程中αCP=1,在对测试集预测结果的评估中αCP=0,fCPβCWC标准是一种综合的评价标准,其涉及到了区间范围覆盖概率fCP与标准化区间平均宽度占比[34].区间范围覆盖概率是真实值落在预测区间fNAW内的百分比,能够体现预测区间包含真实值的准确程度.标准化区间平均宽度占比是区间宽度的平均值与潜在区间宽度的比值,其能够体现区间的宽度.在粒子群训练过程中,根据定义7、定义8与定义9,可以得出如下结论.定理1.当fCP没有达到目标范围覆盖概率时,fCWC恒大于fNAW,且大于的倍数由fCP与目标范围覆盖概率β的偏差和惩罚因子η决定.证明.设flow=fCP-β,当fCP<β时,flow<0,e(-η(fCP-β))>0,于是有fCWCe(-ηflow)>1,并且fNAW>0,因此fCWC>fNAW,且的数值由η与flow共同决定.证毕.粒子群中的每一个粒子需要被覆盖宽度评价标fCWCfNAW准重复的评价,由定理1可以得出推论1.推论1.在迭代过程中当fCP与β差距较大时,粒子的查找首先以提高fCP为目的.随着fCWC的减少,fCP不断接近β,当fCP与β差距不大时,fCWC则会因为fNAW的减小而减少,也就是区间的减小.又因为fCP与fNAW经常是矛盾的,所以fCWC调节fNAW与fCP平衡的倾向由η决定,η越大最优解的结果越倾向于fCP,相反η越小最优解的结果越倾向于较窄的区间.由推论1在实际操作中η一般取值范围为[10,100].这样通过迭代可以保证fNAW与fCP的平衡,最后随着粒子fCWC的最小值的产生得到参数的最优解.预测区间算法使用支持向量机回归模型分别对并发量区间的上界及下界进行预测.其中区间上界与区间下界的预测过程完全相同,以区间上界为例,依据定义2,并发量区间上界时间序列训练样本为{〈ti,conU表示为式中:狑是权重向量;φ(xi)表示从输入空间Rn映射到目标空间的非线性函数;〈,〉是内积符号;b为偏差.权重向量狑与偏差b需要从样本训练得出.利用从梯度下降粒子群优化算法中得到的C_u_Gbest,Gamma_u_Gbest,C_l_Gbest,Gamma_l_Gbest作用于两个支持向量机,对并发量测试数据的上下界做出预测,最终得出并发量的预测区间.预测区间算法见算法4.算法4.预测区间算法.输入:C_u_Gbest,Gamma_u_Gbest,C_l_Gbest,Gamma_输出:Yu,Yl1.svm_u=SVM(kernel=‘RBF’,C=C_u_Gbest,2.model_u=svm_u.fit(Su3.Yu=model_u.predict(Su4.svm_l=SVM(kernel=‘RBF’,C=C_l_Gbest,Page115.model_l=svm_l.fit(Su6.Yl=model_l.predict(Sl7.returnYu,Yl;5实例分析为了表明并发量区间预测模型在解决自适应资源调整无效问题上的效果,引入一个实例分别用并发量单值预测与区间预测来触发自适应调整,通过分析一段时间内的性能与资源消耗的代价/收益,来对比两种预测方法对自适应资源效果的影响,以此来验证区间预测在解决自适应调整无效问题上的有效性.为了评价云环境下自适应资源调整的收益,需要综合考虑自适应资源调整成本CR与违反SLA的补偿代价PC.定义11.云环境的综合成本.云环境的综合成本为云环境资源成本CR与违反SLA的补偿代价PC之和.与其协定的SLA可被表示为由此可知云环境需要通过自适应资源调整来最小化CE从而使收益最大化.在一个应用实例中,对于一个云服务A,云环境(1)租期TR的租金为PR元.(2)在租期内,保证云服务A的并发量在区间[0,conm]内的响应时间低于tresp.(3)在租期内,如果响应时间高于tresp,云环境需要为云服务A补偿PC元.PC的大小由超过tresp的时间长度TC而定,具体定义为PC=本SLA的定义参照了rackspace、AmazonEC2及阿里云等大型云计算提供商的SLA中部分内容.其中补偿金PC采用根据违约时间比例分段计算的方式定义.相对于大型云计算提供商SLA所针对的长租期而言,本实例中的租期较短.所以具体的违约时间占比与惩罚比例在大型云计算提供商SLA中定义的基础上,根据本实例中的租期总时长略有调整.云环境为云服务A分配资源的最小粒度为1个搭载服务A的虚拟机副本,所有为云服务A分配的虚拟机副本的配置均相同,负载均衡使云服务A的用户并发量均分,每个虚拟机副本在保证响应时间少于tresp的前提下最多能处理的并发量为conv.云环境自适应调整通过增删云服务A的虚拟机副本来平衡服务性能与资源成本.这样云环境的资源成本就由云环境为云服务A开辟虚拟机副本的个数决定,如果一个云服务A的虚拟机副本在单位时间Tunit内的成本为PV元,则云环境的资源成本CR为其中:i为云服务A使用虚拟机副本的个数,Ti为云服务A占用i个虚拟机副本的总时间,N为租期内云环境为云服务A开辟虚拟机副本的最大值.在自适应资源调整策略中,由于单值预测与区间预测的结果所包含的并发量预测信息量不同,所以触发方式有所不同,因此调整动作也有所差异,最终会导致不同的代价产生.本文实例中两种预测方法的触发方式均使用某一时间点所对应的预测信息作为触发依据.规定单值预测的自适应调整的触发方法为:如果并发量预测序列中存在一点conj满足其中nnow为云环境中正在为云服务A提供支持的虚拟机副本数量.自适应资源调整方案见表1.conj>nnow×conv增加conj-nnow×convconj<(nnow-1)×conv减少(nnow-1)×conv-conj区间预测比单值预测包含了更多的信息,其自适应资源调整触发方法为:如果并发量预测区间上界conuj与下界conlPage12其自适应资源调整方案见表2.conuj-nnow×convnnow×conv-conl(nnow-1)×conv-conlj-(nnow-1)×convconu为了进一步分析两种预测方法的效用,在两个真实的云环境资源自适应调整场景中分别对比单值预测与区间预测对云环境总体成本的影响.两个场景的并发量数据分别来源于景点语音导航云服务系统的景区推荐服务(以下简称服务A)中两个不同时间段内的用户并发量数据.场景1.云环境中共有3个虚拟机副本在为云服务A提供支持,即nnow=3.每个虚拟机副本在保证响应时间少于tresp的前提下最多能处理的并发量conv=100.利用单值预测与区间预测两种方法分别对同样的157个单位时间内的云服务A用户统计并发量.单值预测与区间预测的效果如图8所示.根据式(12)单值预测的触发条件,从图8(a)中可以看出,从箭头指向的第46个时间开始触发自适应资源调整,第46个时间对应的数值为308,即con46=308,代入表1中的自适应资源调整方案可得,动态资源调整动作为增加1个A服务的虚拟机副本.根据式(13)区间预测的触发条件,从图8(b)中可以看出,从箭头指向的第124个区间开始触发自适应资源调整,第124个区间的上界与下界分别是338和268,即conu中的调整方案可得,调整动作为增加1个A服务的虚拟机副本.通过两种预测方法得出自适应调整效果如图9所示.图9场景1中单值预测与区间预测自适应调整效果由于对比两种算法对自适应调整的效用,两种算法的运行环境一致,所以不考虑自适应动作执行的时间成本及其它干扰因素的影响.从图9中可以看出两种预测方法都有效地避免了违反SLA的发生.计算云环境在这段时间内违反SLA补偿代价PC=0,因此云环境的综合成本为资源成本CR,即CE=CR.在这157个单位时间内,单值预测的自适应资源调整下云环境在前42个单位时间用了3个虚拟机副本,从第43个单位时间之后用了4个虚拟机副本,因此其资源成本CsCs同理,区间预测的自适应资源调整下云环境在前123个单位时间用了3个虚拟机副本,从第124个单位之后开始用了4个虚拟机副本,则其资源成本Page13R为CdCd显然Cd整的云环境成本明显低于单值预测,区间预测为云环境带来了更高的收益,原因是由于并发量的不确定性导致单值预测不会很准确,从第43个单位时间开始预测值高于阈值上限,但是真实值并没有达到阈值上限,这就产生了无效的调整动作,造成成本浪费.而基于区间预测能够准确地将并发量的不确定性量化成区间形式,使得触发方法可以用真实值出现的概率来判定自适应资源调整的触发,这样能使触发依据更加客观、有效.场景2.云环境中共有3个虚拟机副本在为云服务A提供支持,即nnow=3.每个虚拟机副本在保证响应时间少于tresp的前提下最多能处理的并发量conv=100.利用单值预测与区间预测两种方法分别对同样租期(165个单位时间)内的云服务A用户统计并发量.单值预测与区间预测的效果如图10所示.根据式(12)单值预测的触发条件,从图10(a)中可以看出,从箭头指向的第69个时间开始触发自适应资源调整,第69个时间对应的数值为310,即con69=310,代入表1中的调整方案可得,调整动作为增加1个A服务的虚拟机副本.从图10(b)中可以看出,区间预测的结果并没有符合触发条件的区间,所以没有任何资源调整动作生成.通过两种预测方法得出自适应资源调整效果如图11所示.图11场景2中单值预测与区间预测自适应资源调整效果在此场景中也不考虑自适应动作执行的时间成本及其它干扰因素的影响.从图11(a)中可以看出,基于单值预测的自适应资源调整在整个时间段内没有违反SLA的情况产生.所以其综合代价为资源代价,Cs165个单位时间内,云环境在前68个单位时间用了3个虚拟机副本,从第69个单位时间之后用了4个虚拟机副本,因此其资源成本CsE=CsCs区间预测没有触发自适应资源调整,因此其资源成本Cd然而,通过图11(b)可以看出,基于区间预测的自适应资源调整的云环境在一些时间内云环境违反了SLA,则需要产生相应的补偿代价,在整个租期165个单位时间中云环境总共有9个单位时间违反了SLA,则TR=165,Tc=9,而通过式(10)得出SLA的补偿代价PC为0元.这说明短时间的违反Page14SLA行为是可以被云服务A接受的.因此区间预测的自适应资源调整的云环境综合成本为Cd495Pv.显然,在本场景中基于区间预测自适应资源调整的云环境的综合成本同样低于单值预测.虽然在区间预测的云环境中有违反SLA的情况出现,但只是短暂的,是由于并发量数据的不稳定造成的,这种违反SLA的情况云服务A是可以接受的.而在本场景中,单值预测尽管较为准确,但由于其单个数值的限制,无法识别并发量变化,所以导致在一段频繁快速的并发量到来时触发了自适应资源调整策略,增加了虚拟机副本.但是在频繁快速的并发量持续一段后,并发量又低于之前的阈值上限,这样就造成了调整之后的很长时间内虚拟机副本过剩的情况,导致了成本的增加.因此相对于单点预测,区间预测能够利用区间优势很好地识别出频繁快速的波动情况,这是因为在相同的置信度内,如果预测值频繁不稳定波动,预测区间会比平稳的预测区间宽,从而表示数据波动的可能性大小.通过上述两个场景可以得知,区间预测在处理常见的因为并发量不确定性与频繁快速变化而导致的自适应资源调整无效的问题上的效果要优于单值预测.6实验及结果分析6.1实验数据及环境本文中所有服务并发量数据均来自于景点语音导航云服务系统(DiTingv3.0),此云服务系统由东北大学云计算研究实验室开发,其服务端部署于由20台物理服务器组成的云环境中,并通过云环境中多个虚拟机副本为该云服务系统提供支持.景点语音导航云服务系统包含众多子服务,第3.2节、第4节以及下文对比实验所用到的服务均来自于此系统.该系统采用Nginx作为服务的负载均衡服务器,从中可获取每一个服务的用户并发量数据.该系统的客户端为手机App,用户可通过手机客户端对各种服务发出请求.本文中各实验算法均利用Python语言编写并在配置为Intel(R)Core(TM)i7-4790CPU3.60GHz、8GB内存、搭载64位Windows7操作系统的计算机中运行.6.2区间预测准确性对比为了进一步验证提出的并发量区间预测模型预测结果的准确性,选择目前主流的7种区间预测方法与本文提出的区间预测方法进行对比.分别利用3种不同的区间质量评估方法对比各算法的区间预测效果.实验数据分别选取景点语音导航云服务系统中景区推荐服务、GPS景区识别服务以及景点语音讲解服务这3个不同特征的云服务并发量.实验中分别利用线性回归(LinearLegression)[39]、朴素贝叶斯(NaiveBayes)[28]、最小二乘法回归(OLS)[20]、分类回归树(ClassificationAndRegressionTree,CART)[29]、未经过参数优化的支持向量机算法(SVM)[35]、随机森林(RandomForest)[40]、梯度提升决策树(GradientBoostingDecisionTree,GBDT)[41]以及本文提出的基于用户并发量特征分类的梯度下降粒子群优化支持向量机(ACPS-GPSO-SVM)对各云服务并发量区间做出预测,并比较预测区间的效果.其中基于线性回归、朴素贝叶斯、最小二乘法、分类回归树以及支持向量机的区间预测模型属于较为传统的区间预测方法,而基于随机森林与梯度提升决策树的区间预测模型法则是目前较为流行且精确度较高的区间预测方法.分类回归树、支持向量机、随机森林及梯度提升回归树的区间预测精度有赖于其参数的选取,而这些方法的参数主要取决于训练样本的大小及数据变化特征.为了与本文提出的面向多种特征数据的区间构造方法及基于梯度下降粒子群优化的参数自动选取方法作比较,其它对比算法的参数在预测之前会根据训练数据的规模人为确定为最佳数值.在实验中,景区推荐服务的并发量选取2016年3月5日上午9:00~10:40间以10s为间隔的用户并发量时间序列.根据定义1与定义2,并发量时间序列中每个时间点所对应的并发量数据为上一时间点到该点的时间段内用户并发量的平均值,即coni=riti-ti-1求量,ti-ti-1为时间序列中相邻点的时间间隔,则在此时间序列中ti-ti-1为10s.此时间序列在100min内总共含有600个并发量样本,时间序列中前450个样本作为训练样本,后150个点作为测试样本,测试样本在训练过程中是不可见的.GPS景区识别服务选取2016年3月5日至2016年3月8日间每天9:00~10:15以30s为时间间隔的平均并发量数据.同样将时间序列中的600个样本分成两组,其中的150个数据作为测试样本.景点语音讲解服务选取2016年3月5日至2016年3月14日间每天8:00~18:00时间间隔为10min的平均并发量时间Page15序列.以前7d的数据作为训练样本,后3d的数据作为测试样本.本文提出的ACPS-GPSO-SVM并发量预测模型对以上3种数据的预测结果如图12所示.图12ACPS-GPSO-SVM并发量区间预测模型从图12中不难看出,在对3个不同云服务并发量预测过程中,ACPS-GPSO-SVM区间预测模型能够将大部分并发量真实值包含在内,并在此基础上将区间保持较小的范围.有较小数量的真实数据落在了预测区间的外面,但可以从图12(a)与(b)中看出这些超出预测区间的数值存在明显的单独突发性,因为这导致非常短时间的违反SLA,这种单独的峰值在自适应资源调整过程中是可以忽略的.而对于频繁快速波动的情况,如图12(c)所示,并发量在每个波峰达到峰值的时候都会频繁的波动并能持续一段时间,对此ACPS-GPSO-SVM有良好的预测能力,能够将频繁快速的变化包含在区间内,并且用较大的区间代表其变化的可能性,因此从并发量不确定性的度量到频繁快速变化的表达,ACPS-GPSO-SVM都有良好的能力.为了进一步分析区间预测效果,通过计算各算法结果的区间范围覆盖概率fCP、标准化区间平均宽度占比fNAW与综合覆盖宽度标准fCWC,能够精确地对比出各算法区间预测的精度.区间范围覆盖概率是真实值落在预测区间内的百分比,能够代表预测区间的准确度.标准化区间平均宽度占比是对区间宽度的衡量标准,这个值越大,区间越宽,但是区间的宽度和准确度是矛盾的,大的区间能够有较高准确度,而小区间的准确度会降低,所以在准确度相同的情况下,区间越小说明区间预测的越精确.综合覆盖宽度标准是对前两个评价标准的综合表达,其能够在准确度较低的时候体现出一个较大的数值,而随着准确度的提高,其数值越能趋近于标准化区间平均宽度占比,在达到目标区间范围覆盖概率时fCWC=fNAW.本实验中目标区间范围覆盖概率(给定的目标置信度)β设置为90%.β设定为90%的原因是期望的预测区间置信度为90%,这个置信度是一个公认的准确度相对较高的预测区间评价标准,常常作为区间预测的优化目标与评价标准[42].在预测过程中梯度下降粒子群按照β=90%的fCWC优化支持向量机的参数,同样按照此标准来评价预测的结果.各算法对景区推荐服务并发量区间预测结果的评价见表3.表3各算法对景区推荐服务并发量预测区间的评价linearregression87.3358.60280.90NaiveBayes90.6758.8258.82RandomForest90.0058.1158.11CARTGBDTACPS-GPSO-SVM92.0058.5058.50景区推荐服务序列具有平稳型的特性,从表3可以看出,每种算法的fCP均在86.67%以上,预测区间都具有较高的准确性.其中fCP最高的是本文提出的ACPS-GPSO-SVM算法,表明真实值落在其区间的数量最多.对比fCWC不难发现,linearregression、OLS、CART、未经参数优化的SVM与GBDT的fCWC均明显高于其它3个算法,这是由于这5个算Page16法结果的fCP未达到β导致的,而在预测结果的区间范围覆盖概率高于β的3个算法中,RandomForest的fNAW最小,表明其区间宽度相对较小.对于平稳型数据的预测,由于其数据的波动范围较小,所以各算法预测区间的宽度较为相近,ACPS-GPSO-SVM算法的fNAW与RandomForest只相差0.39%,而ACPS-GPSO-SVM的fCP比RandomForest高出了2%,这表明对于平稳型并发量的区间预测,ACPS-GPSO-SVM算法的预测结果能够在保证区间宽度与其它算法相近的基础上,使其预测区间的准确性达到较高精度.各算法对GPS景区识别服务并发量区间预测的评价结果见表4.表4各算法对GPS景区识别服务并发量预测区间的评价linearregression87.3320.7383.28NaiveBayes76.6716.5412521.66RandomForest89.3320.4346.20CARTSVMGBDTACPS-GPSO-SVM97.3316.8516.85GPS景区识别服务并发量序列含有递增趋势型特征.从表4中不难看出fCP最高的是CART与ACPS-GPSO-SVM模型,准确率都达到了97.33%.对比这两个算法的fNAW可以发现,ACPS-GPSO-SVM的fNAW为16.85%,比CART低,表明ACPS-GPSO-SVM的区间宽度更小.因此虽然准确率一致,但是ACPS-GPSO-SVM与CART相比,在控制区间宽度上还是占有优势的.各算法对景点语音讲解服务并发量区间预测的评价结果见表5.表5各算法对景点语音讲解服务并发量预测区间的评价linearregression45.5623.631.78838E+11NaiveBayes50.5629.578282137325.00RandomForest86.6723.99CART78.3323.67SVMGBDT88.8923.67ACPS-GPSO-SVM92.7823.16对景点语音讲解服务并发量的预测,样本选取了较长时间的数值,其特点是具有周期性,1天为一个周期.通过表5可以看出,对于周期型序列的区间预测ACPS-GPSO-SVM模型无论从fCP角度还是fCWC的角度分析其相对于其它算法都具有较强优势.其预测效果好的原因是ACPS-GPSO-SVM模型中能够识别出并发量序列的周期,并能够根据每个周期内的特征构建区间,这进一步说明特征分类对区间预测是至关重要的.同时,还需要注意一点的是在这里未经参数优化的SVM算法的预测效果较差,说明在不调整参数的情况下其找不到序列的周期特征,这也进一步印证了参数优化的重要性.通过对以上云服务用户并发量预测区间的实验与评价指数的分析得知,由于本文提出的ACPS-GPSO-SVM模型在生成预测区间的过程中使用基于序列特征分类的区间构建方法以及基于梯度下降粒子群参数最优化的支持向量机,使其在预测准确度与区间宽度控制方面均有较强的优势,能够为各种时延下的各种类型云服务并发量提供较强的区间预测支持.6.3区间预测效率对比由于并发量的预测结果服务于实时的资源自适应调整,所以对预测算法的实时性要求较高,需要对其预测效率进行评估.影响本文提出的区间预测方法效率最主要的因素在于支持向量机参数优化过程.对6.2节中每组服务并发量数据分别利用网格搜索(GridPSO)[25]、普通粒子群算法(PSO)[34]以及本文使用的梯度下降粒子群算法(GPSO)优化支持向量机的参数并完成区间预测.各算法优化效果及效率对比见表6.预测数据优化景区推荐服务并发量GPS景区识别服务并发量景点语音讲解服务并发量表6中对比了利用3种参数搜索方式的支持向量机对各服务并发量数据区间预测的适应度函数最小值、达到最小值的迭代次数以及预测时间.其中适应度函数最小值是在迭代优化中以fCWC为适应度函数的最小值,预测时间为完成并发量预测的总耗时.从表中可以看出,前两组实验中网格搜索的最小值较小,但是其迭代次数与运行时间均远高于两种粒子群算法.与PSO相比,GPSO在前两组实验中的适应度函数最小值表现较差,但差距不明显,且均Page17能保证支持向量机区间预测的准确性达到给定的置信度.在景点语音讲解服务实验中的GPSO的优化结果要优于其它算法,这有赖于梯度下降这种有向的粒子移动方法.3组实验中GPSO达到最小值迭代次数与预测时间均明显低于其它两种算法,GPSO比PSO预测时间少的主要原因是其迭代次数较少,能够保证其快速收敛的原因是粒子梯度下降移动的引入,所以梯度下降方法在对整体预测过程的加速起到了至关重要的作用.综合来看,虽然网格搜索一定程度上有较强的全局搜索能力且每次迭代的用时较短,但由于其遍历式的无针对性查找导致其迭代次数过多而对预测的效率影响较为严重,不适用于实时系统中.对于GPSO与PSO而言,两种算法的优化结果相似,但基于GPSO优化的预测用时比PSO快76.11%以上,3组实验的预测时间就能保持在18.56~25.85s之间,更适合于云环境的实时资源自适应调整.对于支持向量机而言,影响其预测效率的主要因素是输入数据的维度[33],输入数据的维度越多,超平面的非线性变换越复杂,而本文中的支持向量机仅使用时间这一个维度作为输入数据,所以数据量在几百甚至几千范围内的变化对支持向量机效率的影响不明显.在服务并发量变化周期较长,数据量极高的情况下,可以采取较长时间间隔的并发量作为实验数据(如本文中景点语音讲解服务并发量的预测),这样不仅能够提高预测效率而且能够避免个别异常数据对整体趋势的干扰,从而突出序列的变化特征.7结论本文针对云计算环境下由于传统的单值预测提供信息不足而引发的无效资源自适应调整动作过多的问题,提出一种云服务用户并发量区间预测模型.利用支持向量机作为主要学习方法分别预测并发量区间的上界和下界.为了提高支持向量机预测的精度及优化效率,模型引入了梯度下降粒子群优化算法来在线查找支持向量机参数的最优解.为了使模型适用于各种类型的并发量序列,本文提出了一种基于自相关系数以及功率谱分析的AC-PS云服务用户并发量特征判定规则.通过AC-PS判定规则可有效地根据并发量序列的数据特征对其分类,从而根据不同类型特征采用不同的并发量序列区间构建方法.通过实验证明,相对于其它方法本文提出的区间预测模型对各类并发量数据的预测精度均达92%以上,其预测效率有76.11%~96.15%的提升.在自适应资源调整过程中能够有效地避免无效调节动作的产生,一方面有效地保障了云服务的服务性能,另一方面为降低云环境的运营成本、提高云环境的运转效益提供有力支撑.由于本文对云环境并发量区间预测的研究目前还处于初始阶段,所以还有很多不足需要进一步完善.在未来的研究中,将进一步优化并发量判定规则及区间预测方法,使其能够对特征更复杂的并发量数据做出更有效的区间预测.致谢各位审稿专家及责任编辑对本文的改进提出了宝贵意见,在此一并致谢!
