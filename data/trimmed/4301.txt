Page1一种基于迭代PTM模型的电路可靠性评估方法肖杰1),2)江建慧2)朱旭光2)1)(浙江工业大学计算机科学与技术学院杭州310023)2)(同济大学软件学院上海201804)摘要纳米工艺的快速发展既给电路设计创造了新的机会,同时也带来了新的挑战,基于纳米器件的电路可靠性设计便是主要挑战之一,因此有必要研究在设计的早期阶段便能准确地评估电路可靠性的方法.考虑到经典的概率转移矩阵方法在电路可靠性计算中的优势与不足,文中提出了宏门的概念和以宏门为单位的迭代概率转移矩阵模型,并设计了相应的电路可靠性评估算法,可计算从原始输入到任意引线位置的电路可靠度,该算法的复杂性与宏门的数目成线性关系.理论分析与在74系列电路和ISCAS85基准电路上的实验结果证明了文中所提方法的准确性、有效性及潜在的应用价值.关键词门级电路可靠性评估;宏门;逻辑划分;概率方法;迭代概率转移矩阵模型1引言尺寸不断缩小,电路密度不断提高,尤其是深亚微米、纳米工艺的应用,给芯片的可靠性带来了严重影响.在本文中,逻辑电路的可靠性指电路对永久性故超大规模集成(VLSI)电路规模不断扩大,特征障、间歇性故障和瞬时性故障的敏感性的度量.因Page2此,在电路的设计阶段,对其进行准确的可靠性分析可以尽早发现存在的问题,以便改善设计,这对提高集成电路的可靠性和降低生产成本至关重要.目前,电路可靠性的评估方法一般有可靠性寿命实验方法、基于模拟的故障注入方法和基于概率模型的方法等.可靠性寿命实验方法通常采用平均失效时间来估计在互连线或栅氧化层的硬故障影响下的电路寿命[1];在门级,基于模拟的故障注入方法应用到的故障类型主要有固定0故障、固定1故障和翻转故障等[2];在实际电路中,有些故障难以通过传统的方法进行检测,如瞬时故障,它随时可能发生在电路的任意位置,目前只有概率模型才能较准确地对其进行度量,故近年来,基于概率模型的方法受到了国内外学者越来越多的关注[3-4].基于故障概率的电路可靠性评估模型的应用前提是一些基本电路参数已给定,如基本门电路的故障概率[5-6].已有的研究结果表明,典型的基于概率转移矩阵(ProbabilisticTransferMatrix,PTM)的方法能精确评估门级电路的可靠性[3],它假设所有基本门电路的故障概率为同一常数,并把电路视为一个不可分割的整体.针对组合电路,PTM方法首先建立所有输入组合对应的所有输出的矩阵模型,再根据基本门电路的串并联关系选择相应的矩阵乘或张量积运算,以获得整个电路的PTM,最终算得其可靠度.概率门模型(ProbabilisticGateModel,PGM)以门为单位,通过迭代方法求得输出为1的概率作为电路的可靠度[7].若电路不带有扇出分枝,该模型可用于较大规模电路的可靠性评估,否则,由于采用多路径算法[8]来计算扇出分枝结构的可靠度,其时空复杂度随着扇出分枝数的增加而呈现指数级增长的趋势.该方法未完全考虑电路结构对故障所具有的屏蔽特性,并忽略了输出为0的概率对可靠性的影响,使计算精度受到了一定程度的影响.基于离散时间Markov链的概率模型检验(ProbabilisticModelChecking,PMC)方法与PGM方法高度相似[9],因此它们存在着相同的问题.文献[10]运用WAA(WeightedAveragingAlgorithm)方法[11]和关联系数方法[8],分析了电路扇出分枝的相关性,从而提高了可靠度的计算精度.但是,对于各基本门的输入概率分布,该方法无论是采用模拟方法还是BDD(BinaryDecisionDiagrams)方法都有着较大的计算开销;另外,互连线关联系数的估计复杂度较大,且为近似值.因此,该模型的计算精度还有改善空间.基于Bayesian的电路可靠性评估模型的理论基础是条件概率[12],其本质与PTM模型类似,故能准确评估电路的可靠性.对于规模较大的电路,该方法借鉴MonteCarlo方法的思想,利用两个优化的随机抽样算法来统计电路发生故障的频率,并将所得结果作为电路的失效率.它也是一种近似的电路可靠性评估方法.对于规模较大的电路,PTM方法的时空开销随电路引线数的增加呈指数级增长.于是,我们在PTM方法中引入电路分块的思想,提出了一种基于PTM的串行电路可靠度计算方法[4],它采用PTM方法计算各模块的可靠度,再把所有模块可靠度的乘积作为整个电路的可靠度.在PC上开发的相应软件可以用来评估ISCAS85电路规模的电路可靠性.但是,分块后电路结构容易遭到破坏,且各模块间的关联性及其各自的输入概率分布均没有得到较好的保护,这使得计算精度受到了一定程度的影响.为了解决上述问题,本文提出了宏门的概念,并设计了一个以宏门为单位的、基于迭代PTM模型的电路可靠性评估算法.该算法的基本思想是先通过PTM计算宏门层的可靠度,再把结果加载到与其连接的下一层宏门的PTM,然后逐层进行迭代,最终获得从原始输入(PI(s))到电路任意引线(包括电路原始输出(PO(s)))位置之间电路模块的可靠度.该算法的计算复杂度与宏门的数目呈线性关系.在小规模电路上的实验结果表明,本文方法的计算结果与PTM模型得到的结果相同;本文所提方法的计算结果和PGM、文献[10,12]方法的计算结果与MonteCarlo的计算结果之间的偏差比较证明了本文方法的准确性、有效性及潜在的应用价值.本文第2节介绍PTM方法原理;第3节给出宏门的概念;第4节提出迭代的PTM模型和基于该模型的电路可靠性评估算法;第5节对在基准电路上的实验结果进行分析和讨论;第6节给出本文方法的一个应用;第7节是结论.2PTM方法原理PTM模型最早源于文献[13],文献[3]中开始用该模型及矩阵乘和张量积运算来分析门级电路的行为.它假设各基本门的故障概率和电路的原始输入概率分布已知,建立基本门的PTM与理想转移矩阵(IdealTransferMatrix,ITM),然后根据电路Page3的结构,由相应矩阵运算规则生成整个电路的PTM与ITM,再结合原始输入概率分布,计算获得电路的可靠度.一个有m个PI,n个PO的电路的概率行为用PTM是这样表示的,它的第i(i∈[0,2m-1])行与第j(j∈[0,2n-1])列对应的值p(j|i)指在输入值为i的信号I=i0,i1,…,im-1时输出值为j的信号J=j0,j1,…,jn-1的故障概率.例如,给定电路的输入为(0,0,1)时输出(1,0)的故障概率为p(1,0|0,0,1),记作p(2|1).因此,假设在所有可能的输入下,基本门对应的输出均有相同的故障概率p,则一个2输入与门有图1所示的PTM.特别地,一个无故障电路对应所有输入得到错误输出的概率为0,则称这个无故障电路的PTM为ITM.一个门级电路的PTM是由组成该电路的基本门的PTM依据门之间的互连结构计算得到的,所用的矩阵运算主要有矩阵乘和张量积.(1)串联电路若基本门g1与g2串联,且二者对应的PTM分别为M1与M2,则串联电路的输入信号值为i,输出信号值为j时的故障概率p(j|i)=∑k其中,pk表示门gk对应的故障概率.因此,g1与g2串联后的电路的PTM为M1×M2.(2)并联电路若基本门g1与g2并联,且二者对应的PTM分图3一个由4个宏门所组成的电路别为M1与M2,则并联电路的输入信号值为i,输出信号值为j时的故障概率p(j|i)=p1(j1|i1)×p2(j2|i2),其中,pk指门gk的故障概率.因此,g1与g2并联后的电路的PTM为M1M2.若两个子电路的PTM分别为M1与M2,则它们串联后电路的PTM为M1×M2,并联后电路的PTM为M1M2.需要说明的是,PTM模型默认互连导线为无故障的,因此,扇出、单线、缓冲器等的PTM均等于其ITM,对应n输出的扇出门的ITM记作Fn,例如,2分枝的扇出门F2=[1,0,0,0;0,0,0,1];单线或缓冲器的ITM为2维的单位矩阵犐=[1,0;0,1].同理,取基本门的故障概率为0,即可计算获得相对应的门级电路的ITM.图2给出了基于PTM模型的电路可靠度计算流程.3宏门的概念宏门是由一个基本门或这样一组基本门所组成的单元,它从电路的PI端或扇出源起到汇聚门或汇聚层或电路的PO端结束.在划分宏门前,首先需要对电路进行分层.以图3所示电路为例,用数字标识引线,依据文献[14]中的分层算法将电路划分成10层,用虚线标识,第i层记为Li(i=1,2,…,10).每一层均有若干条输出引线,如第1层的引线包括1、2,3、4、5、6,第2层为7、8、9、5、10.Page4一个电路可由m个宏门组成,其组成集合GM={Gj|1jm}.对于图3所示的电路,GM={G1,G2,G3,G4}.PIk表示电路的第k个PI,k=1,2,3,4;WGLji表示Gj在电路第Li层的宽度,即Gj在电路第Li层的输出信号端数,如WGL12=2,WGL34=2,WGL46=3;WGj表示Gj的宽度,它为Gj所处的电路相应层中的最大宽度,如WG1=3、WG2=1、WG3=2、WG4=4;WLi表示电路在第Li层的宽度,它等于在第Li层的所有宏门宽度之和,如WL1=6、WL2=5、WL3=4、WL4=3、WL5=4、WL6=3、WL7=4、WL8=3、WL9=4、WL10=2;W表示电路的宽度,它等于WLi中的最大值,图3所示电路有W=6;dGLji表示Gj在第Li层的深度,当dGLji≠0时,它满足dGLji=dGLj(i-1)+1,其中,宏门在它的起始层的深度为1,dGLj0=0,若WGLji=0,则dGLji=0,如dGL11=1、dGL12=2、dGL13=3、dGL14=4、dGL15=0;dGj表示Gj的深度,它的值等于dGLji中的最大者,如dG1=4、dG2=1、dG3=5、dG4=6;LIPGLji和UIPGLji分别表示Gj在电路第Li层的下端和上端的外部输入信号端,如图3中的LIPGL13和LIPGL46分别表示G1和G4分别在第L3层和第L6层存在下端的外部输入信号端;RGLji表示从PI到Gj的第Li层之间电路模块的可靠度.该宏门划分方法保证了宏门之间不会出现交叠现象,即每一个基本门仅属于一个宏门,同时又不会破坏原始电路固有的逻辑结构,这就使得电路的可靠性不会由于模块划分的原因而导致计算精度受损.宏门有两种类型,第1类是由扇出所关联的基本门所构成,其深度大于1,如图3中的G1,G3和G4;第2类就是单个基本门,其深度为1,如图3中的G2.4基于迭代PTM模型的电路可靠度计算4.1不带有扇出的电路可靠度计算不失一般性,把电路中第Li层的第j(j1)个宏门Gk记为双输入单输出的基本门gij,gij的两个输入分别为宏门Gp(gp1q1)和Gq(gp2q2)的输出,其中,p1,p2<i.gij对应的PTM与ITM分别记为PMij与IMij,两个输入的概率分布分别记为gin1ij,输出的概率分布与可靠度分别记为goij与与gin2Rij,其中,Rij是指从PI(s)到宏门gij之间的电路模块的可靠度;且对应的可靠度加载矩阵记为犕狉1ij,它是以与相应输入连接的电路模块的可靠度犕狉2作为输入线的无故障概率而构成的PTM.gp1q1与gp2q2输出的概率分布分别记为gop1q1与gop2q2,它们的输出可靠度分别记为Rp1q1与Rp2q2,且对应的可靠度传播矩阵分别记为犕犚p1q1与犕犚p2q2,它是以相应宏门的输出可靠度作为输出线的无故障概率而构成的PTM,它们的关联关系如图4所示.从图4中不难发现,gp1q1与gp2q2的输出即为gij的输入,故有关系gin1犕犚p1q1=犕狉1门为单位的基于迭代PTM模型的电路可靠度计算方法,它通过可靠度的加载和迭代方式求得了从PI(s)到电路中任意宏门的可靠度,并在PO(s)获得了整个电路的可靠度.定理1.若逻辑电路的每个基本门具有独立的故障概率p,则用PTM模型计算的电路整体可靠度可由迭代PTM模型把宏门的可靠度加载到下一层的邻接宏门,并通过逐层迭代的方式计算获得.宏门可靠度的加载与迭代可用式(1)表示.Rij=(gin1ijgin2其中,犕狉1矩阵,其对应于宏门gp1q1与gp2q2把可靠度Rp1q1与Rp2q2加载到宏门gij的可靠度传播矩阵犕犚p1q1与犕犚p2q2.对于原始输入,通常认为其输出可靠度为1,输入满足均匀分布.下面以图5所示电路为例来说明定理1所述方法的一个应用.图中实线所围区域表示宏门,记为Gi(i=1,2,…,13).根据宏门的定义可知,图5中所标记的每一个宏门其实就是一个基本门,这是因为图5所示电路不带有扇出,它们的深度均为1.根据定理1可计算得到从PI到任意宏门的可靠度,如当p=0.01时,有RGLj1=0.99(j=1,2,3,4),RGLj2=0.9802(j=5,6,7,8),RGLj3=0.9802(j=9,10),RGLj4=0.9706(j=11,12),RGL(13)5=0.9858.当0p0.05时,图6比较了用本文所提方法和PTM模型计算的图5所示电路的可靠度.Page5图6两种方法计算的图5所示电路的可靠度的比较从图6不难看出,对于在[0,0.05]内所选取的26个不同的p,用上述两种方法计算的图5所示电路的可靠度是一致的,且本文所提方法还可用来估计从PI到任意宏门之间电路模块的可靠度,计算结果如RGLji所示.从结果中不难发现,针对图5所示电路,从其PI到同层宏门的可靠度都相等,这是因为组成电路的基本门的类型单一,且同层宏门间相互独立.本文所提方法的这种性质可用来及时评估所设计电路的可靠性,以便尽快改进设计.4.2带扇出的宏门可靠度计算对带扇出宏门的分析将直接影响电路整体可靠度的计算精度.在分析过程中发现,宏门的PTM规模会随着扇出分枝的增加而呈指数级增长,并导致在现有的PC环境下无法计算的困境.为了降低PTM的计算规模,但又不影响计算精度,且可获得从PI到宏门内任意层的准确可靠度,本文构建了宏门内层的传播矩阵,考虑到张量积满足结合律运算,可以对层内过大的扇出分枝进行逻辑划分,并通过层间迭代PTM的方法来解决上述问题.具体方法如定理2与引理1所示.定理2.若逻辑电路的每个基本门具有独立的故障概率p,则从扇出源起到宏门内的第Li层的可靠度RFi可通过传播矩阵犚犘犕i与犚犐犕i利用式(2)所示的层间迭代PTM方法计算获得.RFi=VFi×(犚犘犕i.×犚犐犕i)烄犚犘犕i=((犈犘犕ui犚犘犕i-1犈犘犕di)×LPMi)犚犐犕i=((犈犐犕ui犚犐犕i-1犈犐犕di)×LIMi)烅LPOj=((EPinujLPOj-1EPindj)×LIMj)VFi=EPinui(VF(i-1)×LIMi-1)EPin烆其中,i1,j2;VFi表示宏门内的第Li层对应的输入概率分布,VF0为扇出源的输入概率分布;犚犘犕i与犚犐犕i分别表示宏门内第Li层对应的传播矩阵与理想传播矩阵;犚犘犕0与犚犐犕0分别为扇出源对应的传播矩阵与理想传播矩阵;LPMi与LIMi分别表示宏门内第Li层对应的PTM与ITM;LPOi表示宏门内第Li层对应的输出概率分布;犈犘犕ui与犈犘犕di分别表示宏门第Li层的上端与下端对应的外部输入的传播矩阵;犈犐犕ui与犈犐犕di分别表示宏门第Li层的上端与下端对应的外部输入的理想传播矩阵;EPinui与EPindi分别表示宏门第Li层的上端与下端对应的外部输入的概率分布.引理1[15].对于矩阵犃、犅与犆,式(3)成立.为了计算带扇出宏门从扇出源到任意层的可靠度,先利用分层算法对宏门进行分层,并根据引理1,在层内对过大的扇出分枝进行逻辑分块;采用定理2的方法构建层的传播矩阵,对规模过大的传播矩阵进行分块,再利用式(2)的层间迭代PTM方法计算从扇出源到第Li层之间的电路模块的可靠度.注意到由扇出分枝构建而成的矩阵存在着大量相同的元素.例如,有n个分枝的扇出门,它的ITM的每一行只有一个元素为1,而其它元素均为0.基于带扇出宏门的这种特殊性质,可以利用ADD(AlgebraicDecisionDiagram)方法对以上划分的各矩阵块进行压缩,这将极大地降低矩阵所要求的存储空间,同时又能较大地提升运算的速度[3,16].该方法使得宏门内基本门之间的关联关系不至于遭到破坏,而又使其可靠度的计算规模不会由于扇出分枝过大而导致在现有的实验环境下无法计算的困境.总之,该方法是对宏门内的门电路结构进行逻辑分块,而非物理划分.这既使得宏门内门电路的拓扑结构保持完整,又使得宏门由于扇出分枝过大而导致未实施的运算得以展开,从而可以逐层地计算带扇出宏门的可靠度.具体算法如下.算法1.带扇出的宏门可靠度计算.输入:宏门网表Page6输出:宏门的可靠度与输出概率分布1.运用分层算法对宏门(G)分层并标识它的深度dG与2.初始化宏门的输入概率分布VF0;3.遍历宏门的第Li层(LidG)并计算3.1.VFi;3.2.LPMi和LIMi.若WGLi>Wmax,层划分逻辑块,3.3.犚犘犕i和犚犐犕i.分别与LPMi和LIMi作矩阵乘3.4.RFi,通过VFi乘以犚犘犕i与犚犐犕i的点乘求得;3.5.LPOi,通过VFi与LIMi的矩阵乘求得;3.6.VF(i+1),Li=Li+1,删除步3.1、步3.2、步3.44.输出RFdG和LPOdG.在现有的实验环境下,宏门中层的逻辑划分宽度Wmax要不至于由于扇出分枝过大而导致运算无法展开;矩阵块的维数d1max和d2max要使矩阵不至于由于维数过大而无法开展张量积或矩阵乘运算.对宏门的扇出分枝进行逻辑分块,使得在做张量积运算时至多只需对第一个矩阵分块,又不至于由于矩阵维数过大而频繁分块.对于矩阵乘的分块算法已有许多研究,但对于张量积的分块算法还未见有报道,下面给出张量积的分块算法.算法2.矩阵犃与犅的张量积分块运算.输入:矩阵犃与犅输出:犃犅1.提取矩阵犃与犅的维数分别记作a1×a2与b1×b2;2.给定矩阵划分的维数d1max;3.若a1>d1max,把犃的行划分成a1/d1max块;4.若a2>d1max,把犃的列划分成a2/d1max块;5.划分后的子矩阵逐个与犅作张量积运算,其中i=1,2,…,a1/d1max,j=1,2,…,a2/d1max;5.1.Cij=Aij犅;5.2.删除Aij;6.删除犅;7.计算矩阵犆的维数.该算法的时间复杂度是O(a1×a2×b1×b2),这是因为犃中的每一个元素都需要做b1×b2次乘法运算,而在犃中共有a1×a2个元素.实际上,算法的时间复杂度要比O(a1×a2×b1×b2)降低不少,因为考虑到扇出分枝所构造的矩阵的特殊性,本文对矩阵块采用了ADD压缩方法,减少了大量不必要的重复运算.从算法1可知,在宏门的任意层,都可以计算得到从扇出源到该位置的可靠度,而PTM模型只能对电路整体进行可靠性评估.4.3电路可靠度计算实际电路的结构通常是以图3这种混合宏门的形式存在的,电路中既有不带扇出的宏门,也有带扇出的宏门.故在可靠度计算过程中,应对这两类宏门加以区分.下面给出电路可靠度计算的算法.算法3.电路可靠度的计算.输入:电路网表输出:电路的可靠度1.运用分层算法对电路分层并把电路划分成由宏门所1.1.从PI到PO,标识电路的层号并标记各个宏门;1.2.遍历电路各层,在各层中计算宏门的宽度与深度;2.计算电路第Li层各宏门的输出可靠度和输出概率分布2.1.若宏门的宽度与深度均为1,根据定理1可计算2.2.转到Li+1层;3.计算电路整体的可靠度3.1.若电路只有单个宏门的输出,则直接输出其可在上述算法中,电路被划分成由宏门所构成的逻辑结构,且电路中所有的基本门仅属于一个宏门.该算法通过层中宏门的宽度与深度来辨别其是否带有扇出.若宏门不带扇出,即为单个基本门.根据宏门在层中宽度与深度的定义可知,不带扇出的宏门在层中的宽度与深度同时为1;而带有扇出的宏门,它在层中的宽度与深度不可能同时为1.在电路的PO端,若有多个宏门的输出作为电路的最终输出,则根据宏门的划分规则可知,这些宏门之间相互独立,而独立事件的概率等于各事件概率的乘积,所以,电路的可靠度等于各宏门可靠度的乘积.由于该算法基于宏门与迭代的PTM模型,故可以求得从PI到电路任意位置的可靠度,且算法的复杂度与宏门的数目成线性关系.对于带扇出的宏门,由于采用的是层间迭代的PTM方法,故计算复杂性与宏门的层数成线性关系.以图7为例来说明电路可靠度计算算法的应用.遍历图7所示电路的各层可知,宏门G1与G2在相应层的宽度与深度均为1,故G1与G2为单个基本门,G3在相应层的宽度与深度记为(Li,WGL3i,dGL3i)(i=1,2,…,7),即G3((L2,5,1),(L3,5,2),(L4,5,3),(L5,3,4),(L6,2,5),(L7,1,6)).根据电路可靠度的计算算法,当p=0.01时,计算得到各Page7宏门从PI到相应位置的可靠度RGLji(j=1,2,3;i=1,2,…,7),分别为RGL11=0.99,RGL23=0.99,RGL32=0.99,RGL33=0.9703,RGL34=0.9512,RGL35=0.9421,RGL36=0.9356,RGL37=0.9478.当0p1时,图8比较了用本文所提方法与文献[3]中PTM模型计算的图7所示电路的可靠度,图8的横坐标为基本门的故障概率p,纵坐标为电路可靠度.图8两种方法计算的图7所示电路的可靠度的比较从图8中不难看出,本文所提方法与PTM模型计算的图7所示电路的可靠度完全一致.注意到当p=1时,电路的可靠度虽然小于0.5,但不为0,这是因为逻辑电路的结构对故障具有一定的屏蔽能力.在上述算法中,最大维数的PTM出现在扇出的最大分枝处,考虑到电路的实际驱动能力,往往扇出分枝不会太大,这使得在计算带扇出宏门的传播矩阵时,矩阵的分块次数不会过于频繁,因此本文算法具有较高的计算效率.4.4与PTM模型的差异性分析迭代PTM方法与PTM模型主要存在如下差别:(1)计算方法不同,PTM模型是先计算电路各层的PTM,再计算整个电路的PTM,最后才求得电路的可靠度;而迭代PTM方法则借助可靠度的传播矩阵,只需计算宏门某层的PTM,即可求得从PI到该位置的电路可靠度;(2)计算的基本单位不同,虽然都要建立基本门的PTM,但PTM模型是以整个电路为计算的基本单位;而对于迭代PTM方法,若基本门无扇出关联,则以基本门为计算的基本单位,否则,以宏门的层的逻辑块为计算的基本单位;(3)内存开销不同,PTM模型同时驻留内存的是电路各层的PTM;而迭代PTM方法在内存驻留的主要是参与运算的两个矩阵块和与运算相关的一些电路信息;(4)时间开销不同,由于计算的基本单位与计算方法的差别,使得PTM模型的时间开销随电路引线数的增加而呈指数级增长,而本文方法的时间开销则与宏门的数目成线性关系;(5)适用范围不同,在现有的PC环境下,PTM模型只适用于较小规模的电路,而迭代PTM方法可用于计算规模较大电路的可靠度,并且还可用于电路的动态设计.5实验与分析为了验证本文所提方法的准确性和有效性,在DELLPC(CPU为Core2@3.0GHz,内存1.98GB)的实验环境下,选取了实验的参照对象;比较分析了基于PTM模型的电路可靠度计算结果;并以MonteCarlo的计算结果作为参照对象,把本文方法和其它几种主要的基于概率模型的电路可靠性评估方法的计算结果与参照对象之间的偏差进行了比较;最后,还利用本文所提的新方法,进一步分析了电路对p的敏感性.在本文的实验中,设参数Wmax=10、d1max=32、d2max=1024,综合考虑程序的执行效率与计算精度,分割宽度选为6.5.1参照对象的选取PTM模型、美国军用标准MIL-HDBK-217及MonteCarlo方法均可用来评估逻辑电路的可靠性,但它们有着各自的最佳适用范围.美国军用标准MIL-HDBK-217用式(4)计算常数失效率λ:其中,πL、πQ、πT、πE、πP分别为学习、质量、温度、环境、引脚因子;C1与C2是与电路中基本门的数量有关的复杂因子.式(4)只适用于基本门的数量在100~1300之间的逻辑电路,而其它参数只能依据经验在一定的区间范围内选取,然后,通过R(t)=e-λt即可求得电路的可靠度.然而,该方法既容易引入人为误差,也未能准确反映电路的输入值、拓扑结构等因素对可靠性的影响,且式(4)的适用范围有限.MonteCarlo方法是通过伪随机的方式在电路中随机注入单故障并以统计的电路发生故障的概率Page8作为电路的失效率.实际上,电路在任意位置随时都有可能发生故障,并且还有MonteCarlo未能模拟的瞬时性与间歇性故障;另外,它还未能模拟电路的输入概率分布,因此该方法所得结果也是近似值,但它在某种程度上反映了电路的拓扑结构及输入值对可靠性的影响,且不受人为因素的干扰.然而,穷举式的故障注入方式对于规模较大的电路,其时间开表1PTM模型与MonteCarlo方法的计算结果的比较Full-adderSchneider图3电路图7电路从表1可知,采用穷举式的故障注入方法,无论是从时间开销、内存开销,还是从平均相对误差来看,MonteCarlo方法在较小规模电路上的模拟结果与PTM模型的计算结果都存有一定的差异.因此,在较小规模电路上,采用MonteCarlo方法的模拟结果作为实验参照对象将会降低分析的准确性.综上分析,由于本文方法评估的是所有可能的输入值在一定的输入概率分布条件下,电路拓扑结构对可靠性的影响,因此选取PTM模型作为较小规模电路的实验参照对象,而MonteCarlo方法则被选作较大规模电路的实验参照对象.表2在较小规模电路上的实验数据(狆=0.001)电路C17175200.5931.683590.05910.0463.500.0781.71875Full-adder163200.5781.679690.08740.0313.550.0631.66797Schneider193200.5791.679690.09340.1873.570.2181.69531图3电路254200.6091.695310.11990.3283.610.2501.68750图7电路215100.5931.687500.47520.1093.610.2971.69141从表2可知,PTM模型和文献[4]方法的平均时间开销要小于本文所提方法;而文献[4]方法的平均时间开销有时又小于PTM模型.但文献[4]方法的平均内存开销要大于本文方法与PTM模型,本文方法的平均内存开销与PTM模型相当.本文方法的平均相对误差为0,而文献[4]方法的计算结果则存有一定的误差.图9给出了用PTM模型、本文方法和文献[4]方法计算的表2中的5个电路在p处于[0,0.1]范围内的可靠度.图的横坐标为基本门的故障概率p,纵坐标为电路可靠度,箭头标注了电路名称,不同曲线上标注的同一电路名称表示用不同方法计算的该销将会难以接受.通常都是事先设定实验的样本数,并通过随机故障注入的方式以控制时间开销.在C17、Full-adder、Schneider、图3电路和图7电路等5个较小规模电路上,以PTM模型的计算结果为参照对象,比较了MonteCarlo方法模拟结果的平均相对误差,结果如表1所示,其中,p=0.001,MonteCarlo的实验样本数为5000.时间开销/s内存开销/MB平均相对误差/%0.10998100.02879690.03533660.26752000.28499105.2电路可靠度的计算本文首先选取了C17、Full-adder、Schneider、图3电路和图7电路等5个较小规模电路为对象,取p=0.001,进行了50次重复实验,求取了本文所提方法、PTM模型及文献[4]方法分别在上述5个电路上的平均时空开销和以PTM模型的计算结果为参照对象的平均相对误差,结果见表2,其中第1列为电路名,第2列为电路属性,第3、4列分别给出了本文所提方法、文献[4]的方法的平均时空开销以及电路可靠度的平均相对误差,第5列给出了PTM模型的平均时空开销.相对误差/%电路的可靠度.从图9可知,对于表2所示的电路,用本文方法计算的电路可靠度与用PTM模型计算的结果是一致的;而用文献[4]方法计算的电路可靠度要小于用PTM模型计算的结果.随着p的不断增大,电路的可靠度不断减小.我们还用本文方法、文献[4]方法在74系列和ISCAS85基准电路上进行了实验,以进一步对这两种基于PTM原理的方法进行比较.其中,对每一个电路的每一个p,都进行了50次重复实验,以获得时间开销与内存开销的平均值,实验结果如表3所示.Page9表3使用本文方法和文献[4]的方法计算的电路可靠度比较电路7414881940.9994120.9941420.9969060.9694620.7190.2961.781256.217415547680.9987630.9877140.9985510.9855980.6250.1251.734384.7574157421040.9997380.9973810.9985010.9851050.6250.2181.738285.127418270950.9993440.9934610.9981040.9811720.6560.0931.757815.39741851081130.9996860.9968690.9967090.9675250.7960.5621.781258.3974283104950.9976090.9763960.9964060.9646240.7350.1561.769536.56C4324323670.9992760.9927960.9841360.8520662.8758.1413.4101637.87C49949941320.9989180.9893720.9800100.8170232.3754.9374.1914132.52C88088060260.9966280.9669290.9649500.6996734.03112.6106.0429763.01C1355135541320.9994050.9941550.9499310.5979696.20321.1106.31250107.04C1908190833260.9964780.9656680.9310030.48882711.48447.2349.30859194.88C267026702331400.9905040.9098720.9053420.36947911.39123.42210.0664029.53C3540354050220.9886560.8936780.8657520.20483719.07868.15015.0742043.84C531553151781230.9927780.9305830.8196970.13658225.625129.94525.4219087.23C6288628832320.9848890.8751800.7859620.08955243.547315.89027.92190162.32C755275522071080.9825610.8459180.7429440.05108531.641106.75036.8945081.01从表3中可以看出,在74系列和ISCAS85基准电路上,用本文方法计算的电路可靠度要高于用文献[4]方法计算的结果.在一些规模较小的电路上,如74电路、表2所列的电路,文献[4]方法要快于本文方法;而在规模较大的电路上,如ISCAS85电路,本文方法要快于文献[4]方法.在参与实验的电路上,与文献[4]方法相比,本文方法的内存开销更小.这与表2和图9上的比较结果相一致.PTM模型通过建立整体电路的概率转移矩阵以计算电路的可靠度,故所适用的电路规模非常有限.按照给定的分割宽度,文献[4]方法把电路划分成若干个可能存在交叠的独立模块,再把各模块的可靠度的乘积作为整个电路的可靠度,这容易造成计算精度受损,使求得的电路可靠度低于PTM模型的计算结果.本文所提方法有着和PTM模型一样的计算精度,这是因为本文划分的宏门之间不存在交叠现象,并且宏门完整地继承了原始电路基本门之间的逻辑关联关系.通过把构建的宏门的可靠文献[4]方法度传播矩阵加载到与其连接的下一层宏门的输入端的迭代方式以继承宏门之间的逻辑关系.而在宏门内,又借助层的传播矩阵通过层间迭代的方式继承了层间基本门的逻辑关联.PTM模型的时空开销随电路引线数的增加呈指数级增长,本文方法对于带有过大扇出分枝的宏门进行了逻辑划分,并对与宏门相对应的相关矩阵进行了ADD压缩,由于是迭代计算,故驻留在内存的主要是参与运算的两个矩阵块和与运算相关的一些电路信息,因此,本文方法的内存开销主要是与电路的规模有关,规模越大,内存开销也就越大;而它的时间开销除了与电路规模有关外,还受电路结构的影响,因为带有过大扇出分枝的宏门需要进行额外的处理,如C6288的时间开销就大于C7552.文献[4]方法按事先设定的宽度对电路进行分割,并把得到的电路所有模块的相关信息、参与运算的模块各层的PTM以及相关的其它矩阵等都保留在了内存,再采用PTM模型计算各模块的可靠度,最后求取各模块可靠度的乘积.该方法的时间开销和内存开销不仅与电路规模和电路结构相关,还与分割后的电路模块大小有关.在分割宽度为6时,对于规模较大的电路,如ISCAS85电路,本文方法有更小的时空开销,因为针对同一个电路,无论是驻留在内存的信息还是运算量,本文方法都要小于文献[4]方法;在规模较小的电路上,如74电路,由于电路的层数较少,文献[4]方法比本文方法在时间开销上更具优势.由于本文方法和文献[4]方法主要针对的都是PTM模型解决不了的规模较大电路的可靠性评估问题,故这两种方法在计算结构较简单的电路的可Page10靠度时,因可能存在一些额外的运算,其有部分指标不如PTM模型.总之,电路规模和电路结构是影响本文所提方法时空开销的主要因素;除上述两因素外,文献[4]方法的计算精度和时空开销还受电路分割宽度的影响.5.3方法比较为了进一步验证本文方法的有效性,选择表4本文方法与文献[4,7,10,12]方法的比较(狆=0.001)电路C4323.987310.75301.1237-C4995.144213.17200.11345.30C13558.333234.83930.42104.50C19087.495353.08054.60131.40C26701.627060.052910.37060.89C35404.798375.97958.41502.20从表4可知,当p=0.001时,相比其它4种方法,文献[4]方法的计算结果与参照对象之间的相对偏差最大;本文方法、文献[7,10,12]方法的计算结果与参照对象之间的相对偏差较为接近.虽然MonteCarlo方法模拟的电路的可靠度是近似值,但借助N模冗余系统的思想,根据裁决器的少数服从多数的原则,可以认为,用本文方法计算的电路的可靠度是合理的.5.4电路对狆的敏感性分析为了进一步分析电路的拓扑结构对故障的敏感性,选取了C432、C1355、C6288等3个电路为实验对象,在p的增量Δp=0.00001时,用本文方法分别计算了p和p+Δp、p+2Δp、p+3Δp取不同值(p取值分别为0.05、0.005、0.0005)时的电路可靠度,并分别求得了各电路在Δp、2Δp、3Δp增量下的可靠度增量(记为ΔR).为了消除由电路的规模效应而引起的△R的累积现象,且注意到定理1和定理2假设每个基本门具有独立的故障概率,故可通过ΔR/电路门数的方法计算由单个基本门的Δp所引起的整个电路的可靠度增量的均值,它更合理地反映了规模与结构不同的电路对p的敏感性,其中折线表示在单个基本门的Δp影响下电路可靠度的变化趋势,结果如图10所示.从图10可以看出,随着p的减小,Δp对电路可靠性的影响逐渐增强,这是因为p与Δp的差的绝对值在不断地缩小.C432在除p=0.0005之外,ΔR与单个基本门的Δp近似成线性关系.对于p的3个不同取值,C432的可靠度受p的影响均较明C432、C499、C1355、C1908、C2670、C3540等6个电路,以MonteCarlo方法的模拟结果作为参照对象,将本文方法、文献[4,7,10,12]方法的电路可靠度计算结果与参照对象之间的相对偏差进行了比较,结果如表4所示.其中,“-”表示相关文献中没有给出相应的值;MonteCarlo方法的实验样本数为50000,p=0.001.显,尤其是在p取值为0.0005时;相比其它两个电路,C1355的可靠度受p的影响最小;C6288的可靠度在p=0.005时受p的影响也较为明显,而p的另外两个取值对它的可靠度的影响则相对较弱.根据实验结果及其分析可知,有些电路的可靠性对p较为敏感,如C432;而有些电路的可靠性却对p反应较为迟钝,如C1355;也存在这样的电路,它的可靠性对不同的p的敏感性不一样,如C6288,这主要是由电路的拓扑结构所决定的.因此,依据电路的上述特点,在电路设计阶段,可以根据电路所要应用的环境而选择不同的拓扑结构或选择不同工艺下的电路器件,以达到改善电路可靠性的目的.为了深入分析p对电路可靠性的影响,还比较了电路可靠性对几种典型基本门的p的敏感性.实验选取了C432与C1355两个电路,在某种基本门的故障概率为p时,假设其它种类的基本门均处于Page11理想状态,即无故障,再用本文方法分别计算各电路在Δp、2Δp、3Δp增量下的可靠度增量ΔR,并通过ΔR/相应基本门的门数的方法以计算某种单个基本门的Δp所引起的整个电路的可靠度增量的均值,以比较规模和结构不同的电路的可靠性受某类单个基本门的p的影响程度,并用折线反映了ΔR与某类单个基本门的Δp之间的变化关系,其中p=0.005,Δp=0.00001,结果如图11所示.图11电路对不同基本门的p的敏感性比较从图11可以发现,C432的可靠性受单个基本门(AND、NAND、NOT)的p的影响比C1355更为明显,这与电路本身的拓扑结构相关,这也和图10的结果相一致.在图11的3类基本门中,AND对C432的可靠性的影响最为明显;在C1355中,NOT对其可靠性的影响最弱.在p的取值为0.005时,除了C1355的NOT,其它各类单个基本门的Δp与ΔR近似成线性关系.因此可知,不同种类的基本门对同一电路可靠性的影响也各不相同,不同规模和结构的电路的可靠性受同类基本门的影响程度也不相同.结合图10的结论可知,对于同种类的基本门的p,电路可靠性随p取值的不同,对其敏感性也是会存有差异的,这主要归因于电路的拓扑结构.根据电路的这种特点,在各类基本门的p一定时,可以适当加固这类基本门,电路可靠性对它的p较敏感,降低p,便可以较小的代价换取电路可靠度较大幅度的提高.总之,电路对p的敏感性分析主要是为了能在电路的设计阶段,根据电路的应用环境,选择更经济、更合理的方式来改善电路的可靠性.6方法的应用本文所提方法不仅可用于计算从电路的PI到任意宏门的可靠度,还可以计算从PI到带扇出宏门任意层的可靠度.因此,在电路设计阶段,当有到宏门或宏门中层的可靠度低于电路设计要求的可靠度时,电路设计人员可以选择停止当前的设计并为电路选择更合适的其它结构以提高电路的可靠度.图12给出了用本文所提方法计算的3种电路结构不同的全加器(XOR/AND、NAND、Majority)在p=0.01时对应电路各层的可靠度,同时给出了电路可靠度的设计要求.当p=0.01时,只有全加器(XOR/AND)满足电路可靠度的设计要求,而其它两个全加器却不满足设计要求.因此,全加器(XOR/AND)被选作电路结构设计的一部分.从图12还可以知道全加器(XOR/AND、NAND、Majority)在电路各层的可靠度变化趋势及影响它们可靠度变化的主要电路单元(即敏感单元).7结论PTM模型的矩阵规模随着电路引线端数的增加而呈指数级增长,在现有的PC环境下无法用于评估规模较大的电路的可靠性.本文提出了宏门的概念和以宏门为单位的迭代PTM模型,借助可靠度的传播矩阵求得了从原始输入到任意宏门或宏门的任意层之间电路模块的可靠度;采用逻辑划分策略解决了带有过大扇出分枝的宏门的计算困难问题;ADD方法也被用于对宏门的相关矩阵进行压缩;基于上述模型提出了电路可靠性的评估算法,从而实现了VLSI电路可靠性的准确评估,其时空开销与宏门的数目成线性关系.在较小规模电路上的实验结果表明,本文方法的计算结果与PTM模型相同,且本文方法还可以用于评估规模较大的电路的可靠性.理论分析与实验结果证明了本文方法的准确性、合理性及潜在的应用价值.Page12
