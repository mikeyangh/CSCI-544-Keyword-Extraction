Page1/ 基于/ 路网/ 的/ 移动/ 对象/ 动态/ 双层/ 索引/ 结构/ 乔少杰/ 1/ )/ 韩楠/ 2/ )/ 王超/ 1/ )/ 祝峰/ 3/ )/ 唐常杰/ 4/ )/ 1/ )/ (/ 西南/ 交通/ 大学/ 信息科学/ 与/ 技术/ 学院/ 成都/ 610031/ )/ 2/ )/ (/ 西南/ 交通/ 大学/ 生命科学/ 与/ 工程学院/ 成都/ 610031/ )/ 3/ )/ (/ 闽南/ 师范大学/ 福建省/ 粒/ 计算/ 及其/ 应用/ 重点/ 实验室/ 福建/ 漳州/ 363000/ )/ 4/ )/ (/ 四川大学/ 计算机/ 学院/ 成都/ 610065/ )/ 摘要/ 为了/ 支持/ 对/ 大规模/ 不确定性/ 移动/ 对象/ 当前/ 及/ 将来/ 位置/ 的/ 查询/ ,/ 亟需/ 设计/ 更加/ 有效/ 和/ 高效/ 的/ 索引/ 结构/ ./ 当前/ 索引/ 算法/ 主要/ 考虑/ 索引/ 建立/ 和/ 维护/ 的/ 效率/ 问题/ 或/ 关注/ 基于/ 索引/ 进行/ 查询/ 时/ 的/ 准确性/ ,/ 对/ 索引/ 建立/ 维护/ 以及/ 查询/ 时/ 性能/ 综合/ 考虑/ 的/ 研究/ 较少/ ./ 针对/ 已有/ 方法/ 的/ 不足/ ,/ 提出/ 基于/ 路网/ 的/ 移动/ 对象/ 动态/ 双层/ 索引/ 结构/ DISC/ -/ tree/ ,/ 对/ 静态/ 路网/ 信息/ 采用/ R/ / -/ tree/ 索引/ ,/ 对/ 实时/ 更新/ 的/ 移动/ 对象/ 运动/ 轨迹/ 采用/ 结点/ 更新/ 代价/ 较/ 小/ 的/ R/ -/ tree/ 进行/ 索引/ ,/ 设计/ 哈希/ 表/ 和/ 双向/ 链表/ 辅助/ 结构/ 对/ 索引/ 协同/ 管理/ ./ 成都市/ 真实/ 地图/ 数据/ 集上/ 的/ 实验/ 结果表明/ :/ 相比/ 于/ 经典/ 的/ NDTR/ -/ tree/ ,/ DISC/ -/ tree/ 在/ 索引/ 建立/ 和/ 维护/ 方面/ 时间/ 代价/ 平均/ 减少/ 39.1/ %/ ,/ 移动/ 对象/ 轨迹/ 查询/ 时间/ 代价/ 平均/ 减少/ 24.1/ %/ ;/ 相比/ 于/ FNR/ -/ tree/ ,/ DISC/ -/ tree/ 的/ 范围/ 查询/ 准确率/ 平均/ 提高/ 约/ 31.6/ %/ ./ 关键词/ 移动/ 对象/ 数据库/ ;/ 路网/ ;/ 索引/ ;/ 范围/ 查询/ 1/ 引言/ 随着/ 无线通信/ 、/ 传感器/ 网络/ 和/ 定位/ 技术/ 的/ 高速/ 发展/ ,/ 人们/ 对/ 持续/ 移动/ 物体/ 所/ 处/ 空间/ 位置/ 的/ 跟踪/ 能力/ 不断加强/ ,/ 推动/ 相关/ 应用领域/ 的/ 研究/ ,/ 如/ 智能/ 交通/ 控制/ 、/ 智能/ 导航/ 和/ 旅游/ 路线/ 推荐/ 等/ 不断深入/ ./ 此类/ 应用/ 系统/ 往往/ 基于/ 移动/ 对象/ 数据库/ (/ MovingObjectsDatabases/ ,/ MODs/ )/ ./ 作为/ 移动/ 计算技术/ 的/ 重要/ 分支/ 以及/ 位置服务/ 类/ 应用/ 的/ 底层/ 支撑/ 技术/ ,/ 移动/ 对象/ 数据库/ 技术/ 得到/ 了/ 广泛/ 的/ 关注/ 和/ 研究/ [/ 1/ ]/ ./ 相比/ 于/ 时空/ 数据库/ ,/ 移动/ 对象/ 数据库/ 不仅/ 支持/ 查询/ 当前/ 时间/ 有效/ 的/ 空间/ 对象/ ,/ 而且/ 可以/ 对/ 随/ 时间/ 而/ 发生/ 位置/ 变化/ 的/ 移动/ 对象/ 的/ 历史/ 轨迹/ 进行/ 管理/ ./ 对/ 移动/ 对象/ 的/ 位置/ 信息/ 提供/ 高效/ 的/ 索引/ 和/ 查询/ ,/ 在/ 地理信息系统/ 、/ 精确定位/ 技术/ 方面/ 具有/ 很/ 高/ 的/ 科学/ 意义/ ./ 现实生活/ 中/ 人们/ 真实/ 的/ 运动/ 场景/ 往往/ 被/ 限制/ 在/ 某/ 一/ 固定/ 区域/ 内/ ,/ 即/ 道路交通/ 网络/ (/ 简称/ 路网/ )/ ,/ 因此/ 研究/ 路网/ 中/ 移动/ 对象/ 索引/ 结构/ 具有/ 现实意义/ ./ 路网/ 是/ 一个/ 动态/ 复杂/ 的/ 系统/ ,/ 系统/ 中/ 存在/ 规模/ 巨大/ 、/ 种类/ 繁多/ 的/ 移动/ 对象/ ,/ 而且/ 构成/ 网络/ 的/ 街道/ 错综复杂/ ,/ 并/ 不/ 都/ 是/ 汇集/ 成/ 十字型/ 路口/ ,/ 某些/ 道路/ 往往/ 是/ 三/ 分支/ 或者/ 五/ 分支/ 的/ ./ 利用/ R/ -/ tree/ 或者/ R/ / -/ tree/ 对/ 移动/ 对象/ 进行/ 索引/ ,/ 往往/ 忽略/ 了/ 静态/ 路网/ 自身/ 的/ 结构/ 特点/ ,/ 得不到/ 令人满意/ 的/ 查询/ 结果/ ./ 基于/ 路网/ 的/ 移动/ 对象/ 时空/ 索引/ 和/ 范围/ 查询/ 技术/ 目前/ 是/ 一个/ 充满/ 挑战性/ 的/ 课题/ ./ 衡量/ 索引/ 性能/ 的/ 主要/ 指标/ 包括/ :/ 索引/ 建立/ 和/ 维护/ 的/ 效率/ 、/ 轨迹/ 查询/ 时间/ 、/ 时空/ 范围/ 查询/ 的/ 效率/ 和/ 准确性/ ./ 面临/ 的/ 主要/ 困难/ 是/ :/ 简单/ 索引/ 结构/ 能够/ 提高/ 索引/ 维护/ 的/ 效率/ ,/ 减少/ 时空/ 范围/ 查询/ 访问/ 结点/ 的/ I/ // O/ 代价/ ,/ 但是/ 会/ 降低/ 查询/ 的/ 准确性/ ;/ 复杂/ 索引/ 有助于/ 提高/ 查询/ 准确率/ ,/ 但/ 增加/ 了/ 维护/ 的/ 时间/ 开销/ ./ 针对/ 当前/ 路网/ 索引/ 结构/ 的/ 不足/ ,/ 本文/ 提出/ 一种/ 新型/ 索引/ 结构/ DISC/ -/ tree/ (/ atwo/ -/ tieredDynamicIndexStructureofmovingobjectsbasedonConstrainednetworks/ )/ ./ 相比/ 于/ 具有/ 代表/ 意义/ 的/ FNR/ -/ tree/ [/ 2/ ]/ ,/ 克服/ 了/ FNR/ -/ tree/ 在/ 时空/ 范围/ 查询/ 精度/ 上/ 的/ 不足/ ;/ 相比/ 于/ NDTR/ -/ tree/ [/ 1/ ]/ ,/ 索引/ 更新/ 时间/ 开销/ 和/ I/ // O/ 代价/ 更/ 小/ ,/ 克服/ NDTR/ -/ tree/ 对/ 移动/ 对象/ 轨迹/ 查询/ 时间/ 性能/ 上/ 的/ 不足/ ./ 2/ 相关/ 工作/ 索引/ 技术/ 是/ 移动/ 对象/ 数据库/ 领域/ 的/ 关键/ 研究/ 内容/ ,/ 移动/ 对象/ 的/ 位置/ 查询/ 、/ 基于/ 位置/ 的/ 服务/ 、/ 移动/ 对象/ 位置/ 预测/ 都/ 依赖于/ 移动/ 对象/ 索引/ [/ 3/ ]/ ./ 移动/ 对象/ 的/ 静态/ 索引/ 已经/ 有/ 比较/ 成熟/ 的/ 技术/ [/ 4/ ]/ ,/ 如/ R/ -/ tree/ 、/ R/ +/ -/ tree/ 、/ R/ / -/ tree/ 、/ KD/ -/ tree/ 等/ ./ 移动/ 对象/ 索引/ 按照/ 空间/ 范围/ 分为/ 两类/ :/ 不/ 受/ 空间/ 约束/ 和/ 受限/ 路网/ 中/ 位置/ 索引/ ./ 不受/ 空间/ 约束/ 是/ 指/ 移动/ 对象/ 的/ 运动/ 不/ 依赖于/ 具体/ 的/ 道路/ ,/ 其/ 可以/ 在/ 空间/ 任意/ 范围/ 内/ 运动/ ./ 这类/ 索引/ 技术/ 在/ 国内外/ 已经/ 取得/ 一系列/ 研究成果/ [/ 5/ ]/ ./ 根据/ 移动/ 对象/ 当前/ 位置/ 建立/ 索引/ 的/ 技术/ 瓶颈/ 是/ 提高/ 索引/ 更新/ 的/ 效率/ ,/ 为了/ 解决/ 这一/ 问题/ ,/ 吴岑/ 等/ 人/ [/ 6/ ]/ 提出/ 了/ 一种/ 基于/ GRID/ 文件/ 的/ 移动/ 对象/ 索引/ 方法/ ,/ 其/ 优势/ 在于/ :/ 在/ 结点/ 合并/ 和/ 分裂/ 过程/ 中/ ,/ 分裂/ 位置/ 选择/ 具有/ 随机性/ ,/ 因此/ 索引/ 更新/ 的/ 代价/ 较/ 小/ ./ 但/ 相比/ 基于/ R/ -/ tree/ 的/ 索引/ ,/ 其/ 查询/ 时间/ 提高/ 不大/ ./ 为了/ 进一步/ 减少/ 移动/ 对象/ 索引/ 更新/ 的/ 代价/ ,/ Silva/ 等/ 人/ [/ 7/ ]/ 提出/ 了/ 一种/ 基于/ 内存/ 的/ R/ -/ tree/ 索引/ 结构/ RUM/ -/ tree/ ,/ 在/ 进行/ 结点/ 更新/ 操作/ 时仅/ 需要/ 一次/ 结点/ 插入/ 操作/ ./ Saltenis/ 等/ 人/ [/ 8/ ]/ 提出/ TPR/ -/ tree/ 对/ 移动/ 对象/ 未来/ 位置/ 进行/ 索引/ ,/ 结点/ 分裂/ 时/ 不仅/ 考虑/ 对象/ 的/ 位置/ 而且/ 考虑/ 包含/ 速度/ 和/ 方向/ 的/ 运动/ 矢量/ ./ Tao/ 等/ 人/ [/ 9/ ]/ 对/ TPR/ -/ tree/ 中/ 结点/ 插入/ 和/ 更新/ 操作/ 进行/ 改进/ ,/ 提出/ 了/ TPR/ / -/ tree/ ,/ 借助/ 改进/ 的/ 压缩/ 技术/ 对/ 结点/ 进行/ 删除/ ./ Chen/ 等/ 人/ [/ 10/ ]/ 提出/ 一种/ 动态/ 的/ 称为/ 自/ 调整/ 单元/ (/ AdaptiveUnit/ )/ 的/ 结构/ 来/ 扩展/ R/ -/ tree/ ,/ 根据/ 移动/ 对象/ 的/ 运动/ 特征/ (/ 位置/ 、/ 速度/ 和/ 方向/ )/ 对/ 其/ 进行/ 分组/ ,/ 达到/ 预测/ 整组/ 对象/ 运动/ 轨迹/ 的/ 目的/ ./ 相比/ 于/ 不受/ 空间/ 约束/ 移动/ 对象/ 的/ 索引/ 技术/ ,/ 基于/ 受限/ 路网/ 的/ 索引/ 技术/ 尚/ 处于/ 起步/ 阶段/ ,/ 国内外/ 成果/ 较/ 少/ ,/ 具有/ 代表/ 意义/ 的/ 工作/ 如下/ :/ 针对/ Pfoser/ 等/ 人/ [/ 11/ ]/ 提出/ 的/ 受限/ 公路/ 网络/ 中移/ Page3/ 动/ 对象/ 索引/ 方法/ 的/ 不足/ ,/ Frentzos/ 等/ 人/ [/ 2/ ]/ 提出/ 双层/ 索引/ 结构/ FNR/ -/ tree/ ,/ 由/ 一个/ 2DR/ -/ tree/ 和/ 一个/ 1DR/ -/ tree/ 森林/ 构成/ ,/ 2DR/ -/ tree/ 用于/ 管理/ 整个/ 路网/ 中/ 的/ 边/ ./ FNR/ -/ tree/ 存在/ 以下/ 两/ 方面/ 不足/ [/ 5/ ]/ :/ (/ 1/ )/ 上下/ 两层/ 索引/ 的/ 粒度/ 相同/ ,/ 均/ 针对/ 于/ 路网/ 中/ 的/ 边/ ,/ 上层/ 叶子/ 结点/ 记录/ 与/ 下层/ R/ -/ tree/ 的/ 对应/ 关系/ 为/ 11/ ,/ 导致/ 下层/ R/ -/ tree/ 的/ 规模/ 庞大/ ;/ (/ 2/ )/ 由于/ 仅/ 存储/ 对象/ 进入/ 和/ 离开/ 边/ 的/ 数据/ ,/ 会/ 遗漏掉/ 在/ 边上/ 运动/ 并/ 停止/ 的/ 移动/ 对象/ 位置/ 信息/ ,/ 导致/ 窗口/ 范围/ 查询/ 结果/ 的/ 准确性/ 较/ 低/ ./ MON/ -/ tree/ [/ 12/ ]/ 是/ 对/ FNR/ -/ tree/ 进行/ 改进/ 而/ 提出/ 的/ 索引/ 结构/ ,/ 对/ 道路/ 网络/ 建立/ 索引/ 不再/ 基于/ 直线/ 边/ ,/ 而是/ 基于/ 折线/ 道路/ ,/ 减小/ 了/ 对象/ 跨越/ 不同/ 边/ 的/ 更新/ 代价/ ./ 不足/ 在于/ :/ 对/ 路网/ 建立/ 索引/ 是/ 基于/ 道路/ 信息/ ,/ 会/ 造成/ 结点/ MBR/ (/ MinimumBoundaryRectangle/ )/ 的/ 重合/ ./ 查询/ 效率/ 随/ 结点/ MBR/ 重合/ 程度/ 增加/ 而/ 降低/ ./ NDTR/ -/ tree/ [/ 1/ ]/ 的/ 上层/ 结构/ 对/ 路网/ 中/ 原子/ 路段/ 建立/ 索引/ ,/ 下层/ R/ -/ tree/ 用于/ 索引/ 在/ 原子/ 路段/ 上/ 运动/ 的/ 移动/ 对象/ 轨迹/ 片段/ ./ 这一/ 结构/ 的/ 不足/ 在于/ [/ 5/ ]/ :/ (/ 1/ )/ 索引/ 维护/ 代价/ 较/ 高/ ,/ 每当/ 发生/ 位置/ 更新/ 请求/ 时/ ,/ 需要/ 进行/ 两次/ 结点/ 插入/ 和/ 一次/ 删除/ 操作/ ./ 此外/ ,/ 每次/ 删除/ 操作/ 均/ 需/ 遍历/ 整个/ R/ -/ tree/ 森林/ ./ (/ 2/ )/ 不/ 支持/ 对/ 移动/ 对象/ 轨迹/ 的/ 高效/ 查询/ ,/ 当/ 查询/ 指定/ 的/ 运动/ 轨迹/ 时/ ,/ 需/ 遍历/ 整个/ 下层/ R/ -/ tree/ 森林/ ./ (/ 3/ )/ 实际/ 路网/ 中/ 道路/ 的/ 相交/ 部分/ 较/ 多/ ,/ 采用/ R/ -/ tree/ 组织/ 索引/ ,/ 结点/ 插入/ 时会/ 产生/ 大量/ 索引/ 空间/ 的/ 重叠/ ,/ 不利于/ 查询/ ./ 近期/ 移动/ 对象/ 索引/ 研究/ 仍然/ 得到/ 学术界/ 的/ 广泛/ 关注/ ./ 针对/ 移动/ 对象/ 速度/ 分布/ 的/ 偏离/ 特性/ ,/ Nguyen/ 等/ 人/ [/ 13/ ]/ 提出/ 了/ 新型/ 速度/ 划分/ 技术/ ,/ 借助/ PCA/ 和/ k/ -/ means/ 聚类/ 技术/ 识别/ DVA/ (/ DominantVelocityAxe/ )/ ,/ 然后/ 基于/ DVA/ 建立/ 索引/ ,/ 提高/ 了/ 移动/ 对象/ 查询/ 的/ 效率/ ./ 为了/ 查询/ 移动/ 对象/ 过去/ 、/ 当前/ 及/ 未来/ 位置/ ,/ Zhu/ 等/ 人/ [/ 14/ ]/ 利用/ 哈希/ 表/ 自下而上/ 对/ 移动/ 对象/ 进行/ 位置/ 更新/ ,/ 对于/ 路网/ 中/ 道路/ 采用/ 邻接矩阵/ 存储/ 每条/ 道路/ 相邻/ 道路/ 信息/ ./ 但是/ 这一/ 结构/ 没有/ 考虑/ 移动/ 对象/ 频繁/ 更新/ 的/ 索引/ 维护/ 的/ 代价/ ./ Appathurai/ 等/ 人/ [/ 15/ ]/ 利用/ 线性/ 函数/ 刻画/ 移动/ 对象/ 的/ 位置/ 信息/ ,/ 设计/ 了/ 新型/ 结点/ 更新/ 和/ 合并/ 算法/ ,/ 可以/ 在/ 某/ 一/ 时刻/ 处理/ 更/ 多/ 对象/ 的/ 位置/ 更新/ 信息/ ,/ 达到/ 提高/ 结点/ 更新/ 效率/ 的/ 目的/ ./ 但是/ ,/ 对象/ 速度/ 并/ 不/ 总是/ 遵循/ 线性/ 分布/ ,/ 不能/ 应用/ 于/ 真实/ 的/ 路网/ 环境/ 中/ ./ 3/ 受限/ 路网/ 中/ 移动/ 对象/ 运动/ 模型/ 本节/ 将/ 介绍/ DISC/ -/ tree/ 中/ 采用/ 的/ 数学模型/ 和/ 主要/ 概念/ ,/ 并/ 给出/ 形式化/ 定义/ ,/ 如下/ 所示/ ./ 定义/ 1/ ./ 路网/ ./ G/ =/ (/ E/ ,/ N/ )/ ,/ E/ 是/ 路网/ 中/ 所有/ 封闭/ 路段/ 的/ 集合/ ,/ N/ 是/ 路段/ 交点/ 的/ 集合/ ./ 定义/ 2/ ./ 道路/ 交点/ ./ n/ =/ (/ nid/ ,/ x/ ,/ y/ )/ ,/ nid/ 是/ 道路/ 交点/ 的/ 标识/ ,/ x/ 和/ y/ 为/ 交点/ 在/ 二维/ 空间/ 平面/ 上/ 的/ 坐标/ ./ 定义/ 3/ ./ 封闭/ 路段/ ./ e/ =/ (/ eid/ ,/ rid/ ,/ ns/ ,/ ne/ ,/ len/ ,/ w/ ,/ poss/ )/ ,/ e/ 表示/ 路网/ 中/ 的/ 一条/ 封闭/ 路段/ ,/ “/ 封闭/ ”/ 的/ 含义/ 指从/ 路段/ 起点/ 到/ 终点/ 的/ 范围/ 内/ 不/ 含有/ 任何/ 道路/ 的/ 交点/ ,/ eid/ 是/ 该/ 封闭/ 路段/ 的/ 标识/ ,/ rid/ 为/ 该/ 封闭/ 路段/ 所在/ 道路/ 的/ 标识/ ,/ ns/ 和/ ne/ 表示/ 封闭/ 路段/ 的/ 起点/ 和/ 终点/ ,/ len/ 为此/ 路段/ 的/ 长度/ ,/ w/ =/ e/ ./ len/ // r/ ./ len/ (/ r/ 为/ 该/ 封闭/ 路段/ 所属/ 的/ 道路/ )/ ,/ 表示/ 该/ 封闭/ 路段/ 在/ 其/ 所属/ 道路/ 中/ 的/ 比重/ ,/ poss/ ∈/ [/ 0/ ,/ 1/ ]/ 为/ 起点/ 在/ 街道/ 中/ 的/ 位置/ ./ 定义/ 4/ ./ 道路/ ./ r/ =/ (/ rid/ ,/ S/ ,/ l/ )/ ,/ r/ 表示/ 路网/ 中/ 的/ 一条/ 道路/ ,/ 道路/ 通常/ 包含/ 一条/ 或者/ 多条/ 封闭/ 路段/ ,/ rid/ 为/ 道路/ 的/ 标识/ ,/ S/ 为/ 该/ 道路/ 所/ 包含/ 封闭/ 路段/ 的/ 集合/ ,/ l/ 表示/ 道路/ 的/ 长度/ ./ 本文/ 通过/ 封闭/ 路段/ 、/ 道路/ 、/ 道路/ 交点/ 来/ 描述/ 复杂/ 交通网络/ 和/ 交通网络/ 中/ 的/ 道路/ 联接关系/ ./ 定义/ 5/ ./ 移动/ 对象/ 位置/ 更新/ 信息/ ./ m/ =/ (/ mid/ ,/ type/ ,/ t/ ,/ v/ ,/ x/ ,/ y/ )/ ,/ mid/ 表示/ 移动/ 对象/ 标识/ ,/ type/ 为/ 移动/ 对象/ 类型/ ,/ t/ 为/ 采集/ 运行/ 矢量/ 的/ 时间/ 点/ ,/ v/ 表示/ 移动/ 对象/ 的/ 速度/ ,/ x/ 和/ y/ 为/ 对象/ 所/ 处/ 二维/ 位置/ 信息/ ./ 定义/ 6/ ./ 移动/ 对象/ 运行/ 矢量/ ./ mv/ =/ (/ mid/ ,/ type/ ,/ t/ ,/ v/ ,/ rid/ ,/ pos/ )/ ,/ mid/ 为/ 移动/ 对象/ 的/ 标识/ ,/ type/ 表示/ 移动/ 对象/ 类型/ ,/ t/ 为/ 采集/ 该/ 运行/ 矢量/ 的/ 时间/ ,/ v/ 表示/ 该/ 移动/ 对象/ 在/ t/ 时刻/ 的/ 速度/ ,/ rid/ 为/ 该/ 移动/ 对象/ 所/ 处/ 道路/ 的/ 标识/ ,/ pos/ ∈/ [/ 0/ ,/ 1/ ]/ 为/ 对象/ 所/ 处/ 道路/ 的/ 相对/ 位置/ ./ 已知/ 查询/ 窗口/ 与/ 封闭/ 路段/ 的/ 交点/ c/ 到/ 封闭/ 路段/ 起点/ 的/ 距离/ 为/ k/ ,/ 封闭/ 路段/ 长度/ 为/ e/ ,/ 那么/ 运行/ 矢量/ 中/ pos/ 取值/ 为/ 移动/ 对象/ 当前/ 位置/ 距离/ 道路/ 起点/ 的/ 长度/ 除以/ 整条/ 道路/ 的/ 长度/ ,/ 计算方法/ 如式/ (/ 1/ )/ 所示/ :/ 其中/ ,/ poss/ 表示/ 对象/ 初始/ 位置/ ,/ w/ 为/ 封闭/ 路段/ 在/ 其/ 所属/ 道路/ 中/ 的/ 比重/ ,/ 计算方法/ 见/ 定义/ 3/ ./ 定义/ 7/ ./ 移动/ 对象/ 轨迹/ 单元/ ./ 两个/ 运行/ 矢量/ 之间/ 的/ 线段/ 称为/ 轨迹/ 单元/ U/ ./ 连续/ 轨迹/ 单元/ 表示/ 为/ U/ (/ mvs/ ,/ mve/ )/ ,/ mvs/ 和/ mve/ 表示/ 运动/ 矢量/ 的/ 起点/ 和/ 终点/ ./ 活动/ 运行/ 矢量/ 所/ 形成/ 的/ 轨迹/ 单元/ 是/ 对应点/ 作为/ 端点/ 发出/ 的/ 一条/ 射线/ ,/ 记/ 为/ 活动/ 轨迹/ 单元/ U/ (/ mvn/ )/ ./ 移动/ 对象/ 的/ 轨迹/ 利用/ rid/ ×/ pos/ ×/ t/ 三维/ 坐标/ 系统/ 描述/ ,/ 如图/ 1/ (/ a/ )/ 所示/ ./ 随/ 时间/ 的/ 变化/ 移动/ 对象/ 在/ Page4/ 道路/ 中/ 的/ 位置/ 不断/ 变化/ ,/ 对于/ rid/ 坐标/ 的/ 每/ 一个/ 切面/ 形成/ 一个/ pos/ ×/ t/ (/ 位置/ 和/ 时间/ )/ 的/ 坐标/ 平面/ ,/ 表示/ 移动/ 对象/ 在/ 具体/ 道路/ 上/ 的/ 时空/ 轨迹/ ./ 移动/ 对象/ 可以/ 跨越/ 不同/ 的/ 道路/ ,/ 其/ 轨迹/ 可以/ 表示/ 为/ 一条/ rid/ ×/ pos/ ×/ t/ 图/ 1/ 路网/ 下/ 移动/ 对象/ 三维/ 时空/ 轨迹/ 及/ 二维/ 投影/ [/ 5/ ]/ 定义/ 8/ ./ 链表/ 轨迹/ 单元/ ./ 用/ LU/ =/ (/ U/ ,/ uid/ )/ 表示/ ,/ U/ 表示/ 为/ U/ (/ mvs/ ,/ mve/ )/ 或者/ U/ (/ mvn/ )/ ,/ uid/ 表示/ 轨迹/ 单元/ 在/ 下层/ R/ -/ tree/ 中/ 的/ 位置/ 标识/ ./ 链表/ 轨迹/ 单元/ 保存/ 在/ 移动/ 对象/ 所/ 对应/ 的/ 双向/ 链表/ 中/ ,/ 目的/ 是/ 加速/ 下层/ R/ -/ tree/ 索引/ 的/ 建立/ 和/ 维护/ ./ 4DISC/ -/ tree/ 的/ 数据结构/ 4.1/ DISC/ -/ tree/ 双层/ 索引/ 结构/ DISC/ -/ tree/ 分为/ 上下/ 两层/ ,/ 上层/ 是/ 基于/ xy/ 平面/ 的/ R/ / -/ tree/ 索引/ ,/ 用于/ 索引/ 路网/ 中/ 的/ 封闭/ 路段/ ,/ 其/ 叶子/ 结点/ 的/ 数据结构/ 为/ 〈/ M/ ,/ id/ ,/ e/ 〉/ ./ M/ 表示/ 包含/ 该/ 封闭/ 路段/ 的/ 最小/ 边界/ 矩形/ MBR/ ,/ id/ 为/ 该/ 叶子/ 结点/ 在/ 索引/ 中/ 的/ 标识/ ,/ e/ 为/ 表示/ 封闭/ 路段/ ./ 中间/ 结点/ 用/ 〈/ M/ ,/ id/ ,/ p/ 〉/ 表示/ ,/ M/ 为/ 包含/ 下层/ 结点/ 的/ 最小/ 边界/ 矩形/ ,/ id/ 为/ 结点/ 在/ 索引/ 中/ 的/ 标识/ ,/ p/ 为/ 指向/ 下层/ 结点/ 的/ 指针/ ./ 其中/ ,/ 一个/ MBR/ 包含/ 一条/ 封闭/ 路段/ ./ 采用/ R/ / -/ tree/ 的/ 主要/ 原因/ 在于/ ,/ 相比/ 于/ R/ -/ tree/ ,/ 在/ 索引/ 建立/ 时/ ,/ R/ / 树/ 不仅/ 考虑/ 了/ 索引/ 空间/ 的/ “/ 面积/ ”/ ,/ 而且/ 考虑/ 了/ 空间/ 的/ 重叠/ 部分/ ./ 此外/ ,/ 本文/ 采用/ “/ 强制/ 重新/ 插入/ ”/ 的/ 方法/ 使树/ 的/ 结构/ 得到/ 优化/ ./ 图/ 2/ 为/ 交通网络/ 在/ DISC/ -/ tree/ 上层/ 索引/ 中/ 的/ 对应/ 关系/ ,/ 道路/ r4/ 包含/ 3/ 个/ 封闭/ 路段/ (/ r4/ ./ a1/ ,/ r4/ ./ a2/ ,/ r4/ ./ a3/ )/ ,/ 于是/ 形成/ 3/ 条/ 记录/ 存储/ 于/ 包含/ 各/ 封闭/ 路段/ MBR/ 信息/ 的/ 叶子/ 结点/ 中/ ./ 图/ 2/ 上半/ 部分/ 矩形框/ 示例/ 给出/ MBR3/ 和/ MBR4/ 的/ 范围/ ./ DISC/ -/ tree/ 下层/ 结构/ 是/ 一组/ 与/ 每条/ 道路/ 对应/ 的/ R/ -/ tree/ 索引/ ,/ 基于/ pos/ ×/ t/ 平面/ ,/ 用于/ 索引/ 移动/ 对象/ 轨迹/ 单元/ ,/ 根据/ 位置/ 更新/ 信息/ 动态/ 地/ 进行/ 维护/ ./ 下层/ 三维空间/ 中/ 不断/ 变化/ 的/ 曲线/ ./ 参考/ 定义/ 7/ ,/ 图/ 1/ (/ b/ )/ 表示/ 移动/ 对象/ 在/ 具体/ 道路/ 上/ 的/ 轨迹/ ,/ 其/ 由/ 若干个/ 轨迹/ 单元/ 构成/ ,/ 虚线/ 部分/ 为/ 活动/ 轨迹/ 单元/ ./ 叶子/ 结点/ 的/ 数据结构/ 为/ 〈/ M/ ,/ id/ ,/ mvs/ ,/ mve/ ,/ o/ 〉/ ,/ M/ 表示/ 包含/ 该/ 轨迹/ 的/ 最小/ 边界/ 矩形/ ,/ id/ 为/ 叶子/ 结点/ 的/ 标识/ ,/ mvs/ 和/ mve/ 分别/ 表示/ 轨迹/ 单元/ 起始/ 和/ 结束/ 运行/ 矢量/ ,/ 如果/ 为/ 活动/ 轨迹/ 单元/ ,/ 则/ mve/ 为空/ ./ o/ 表示/ 移动/ 对象/ 信息/ ,/ 由/ 对象/ 标识/ mid/ 和/ 对象/ 类型/ type/ 组成/ ./ 中间/ 结点/ 数据结构/ 为/ 〈/ Mpos/ ×/ t/ ,/ id/ ,/ p/ 〉/ ,/ Mpos/ ×/ t/ 是/ 包含/ 下层/ 结点/ 的/ 最小/ 边界/ 矩形/ ,/ id/ 为/ 中间/ 结点/ 标识/ ,/ p/ 为/ 指向/ 下层/ 结点/ 的/ 指针/ ./ DISC/ -/ tree/ 下层/ 结构/ 如图/ 3/ 所示/ ,/ 下层/ R/ -/ tree/ 森林/ 管理/ 移动/ 对象/ 基于/ pos/ ×/ t/ 平面/ 的/ 轨迹/ 片段/ ./ 例如/ 移动/ 对象/ m1/ 仅/ 在/ 道路/ r/ 上/ 运动/ ,/ 于是/ 其/ 所有/ 轨迹/ 单元/ 被/ 道路/ r/ 对应/ 的/ R/ -/ tree/ 管理/ (/ 参见/ 图/ 3/ (/ b/ )/ )/ ./ 图/ 3/ (/ a/ )/ 中/ 虚线/ 部分/ 表示/ 活动/ 轨迹/ 单元/ ,/ 如果/ 对象/ 从/ 一条/ 道路/ 运动/ 到/ 另/ 一条/ 道路/ ,/ 那么/ 它/ 的/ 轨迹/ 单元/ 将/ 被/ 两条道路/ 的/ R/ -/ tree/ 管理/ ./ DISC/ -/ tree/ 上下/ 两层/ R/ -/ tree/ 的/ 对应/ 关系/ 为/ 1n/ ,/ 1/ 代表/ 上层/ 索引/ 仅/ 由/ 一个/ R/ / -/ tree/ 构成/ ,/ n/ 为/ 路网/ 中/ 道路/ r/ 的/ 数目/ ,/ 下层/ 索引/ 含有/ n/ 个/ R/ -/ tree/ ./ 利用/ 上层/ 索引/ 叶子/ 结点/ 中/ 的/ 信息/ 可以/ 搜索/ 到/ 下层/ 索引/ 中/ 的/ 某/ Page5/ 个/ R/ -/ tree/ ./ 例如/ ,/ 已知/ 交大/ 路/ 包含/ 两个/ 封闭/ 路段/ ,/ 则/ 上层/ R/ / -/ tree/ 叶子/ 结点/ 中有/ 两条/ 记录/ 指向/ 下层/ 索引/ 中/ 属于/ 交大/ 路/ 的/ R/ -/ tree/ ./ 查询/ 某个/ 时间段/ Δ/ t/ 内/ 交大/ 路上/ 所有/ 移动/ 对象/ 的/ 轨迹/ 时/ ,/ 首先/ 从/ 上层/ R/ / -/ tree/ 自顶向下/ 查询/ ,/ 找到/ 叶子/ 结点/ 中/ 交大/ 路/ 的/ 所有/ 封闭/ 路段/ ,/ 然后/ 定位/ 到/ 下层/ 索引/ 中/ 交大/ 路/ 的/ R/ -/ tree/ ,/ 根据/ 查询/ 条件/ 搜索/ Δ/ t/ 时间/ 内/ 的/ 下层/ 索引/ ./ 4.2/ DISC/ -/ tree/ 的/ 辅助/ 结构/ 为了/ 提高/ 索引/ 维护/ 效率/ ,/ 本文/ 采用/ 如下/ 2/ 个/ 哈希/ 表/ 和/ 1/ 个/ 双向/ 链表/ 作为/ DISC/ -/ tree/ 的/ 辅助/ 结构/ [/ 5/ ]/ ./ 图/ 4/ (/ a/ )/ 中/ 的/ 哈希/ 表/ RoadHashTable/ 对/ DISC/ -/ tree/ 下层/ 基于/ 道路/ 的/ R/ -/ tree/ 森林/ 进行/ 管理/ ,/ 其中/ key/ 的/ 值/ 为/ 道路/ 标识/ rid/ ,/ value/ 为/ 道路/ 对应/ 的/ R/ -/ tree/ 索引/ ./ 图/ 4/ (/ b/ )/ 中/ 的/ 哈希/ 表/ TrajectoryHash/ -/ Table/ 用于/ 管理/ 移动/ 对象/ 的/ 轨迹/ 单元/ ,/ key/ 取值/ 为/ 移动/ 对象/ 标识/ mid/ ,/ value/ 为/ 一个/ 双向/ 链表/ ,/ 用/ linkedlist/ 表示/ ,/ 包含/ 具体/ 移动/ 对象/ 的/ 所有/ 轨迹/ 单元/ LU/ ,/ 其/ 按/ 时间/ 先后顺序/ 加入/ 到/ 链表/ 中/ ,/ 根据/ 移动/ 对象/ 提供/ 的/ 位置/ 信息/ 不断/ 进行/ 更新/ ./ 当/ 收到/ 一条/ 位置/ 更新/ 信息/ 时/ ,/ 首先/ 形成/ 轨迹/ 单元/ U/ ,/ 将/ 其/ 插入/ 到/ R/ -/ tree/ 中/ ,/ 并/ 返回/ 在/ R/ -/ tree/ 中/ 的/ 位置/ 标识/ uid/ ,/ 形成/ 链表/ 轨迹/ 单元/ LU/ (/ U/ ,/ uid/ )/ 插入/ 到/ linkedlist/ 中/ ,/ 在/ 维护/ 索引/ 的/ 同时/ 对/ linkedlist/ 和/ TrajectoryHashTable/ 进行/ 维护/ ./ 应用/ 本文/ 所/ 提出/ 的/ 辅助/ 结构/ 具有/ 如下/ 优势/ :/ (/ 1/ )/ 因为/ 移动/ 对象/ 轨迹/ 具有/ 不确定性/ ,/ 遍布/ 在/ 整个/ 路网/ 中/ ,/ 导致/ 其/ 轨迹/ 可能/ 被/ 相当/ 多条/ 道路/ 的/ R/ -/ tree/ 索引/ ,/ 如果/ 采用/ 不/ 恰当/ 的/ 数据结构/ ,/ 对/ 移动/ 对象/ 的/ 轨迹/ 查询/ 将/ 是/ 极其/ 低效/ 的/ ./ 例如/ ,/ 移动/ 对象/ 的/ 运动/ 轨迹/ 跨越/ 了/ 多条/ 道路/ ,/ 为了/ 查询/ 其/ 历史/ 运动/ 轨迹/ ,/ 需要/ 自上/ 向下/ 遍历/ 整个/ R/ -/ tree/ 森林/ ./ 而/ 采用/ 哈希/ 表/ 和/ 双向/ 链表/ 构成/ 的/ 辅助/ 结构/ 后/ ,/ 仅/ 需/ 将/ 其/ 加载/ 到/ 缓存/ 中/ 进行/ 维护/ ,/ 查找/ 移动/ 对象/ 轨迹/ 不/ 需要/ 遍历/ R/ -/ tree/ 森林/ ,/ 极大地提高/ 了/ 查询/ 的/ 效率/ ./ (/ 2/ )/ 在/ 无/ 哈希/ 冲突/ 的/ 情况/ 下/ ,/ 由/ LU/ 构成/ 的/ 哈希/ 双向/ 链表/ 插入/ 、/ 查找/ 、/ 删除/ n/ 个/ 结点/ 的/ 时间/ 复杂度/ 均/ 为/ O/ (/ n/ )/ ,/ 构建/ 哈希/ 双向/ 链表/ 的/ 时间/ 复杂度/ 为/ O/ (/ n/ )/ ,/ n/ 表示/ 轨迹/ 单元/ 的/ 数量/ ./ 辅助/ 结构/ 的/ 建立/ 和/ 维护/ 时间/ 代价/ 较/ 低/ ./ 4.3/ DISC/ -/ tree/ 与/ NDTR/ -/ tree/ 对比/ 分析/ NDTR/ -/ tree/ 的/ 轨迹/ 查询/ 效率/ 不高/ ,/ 查找/ 移动/ 对象/ 的/ 历史/ 轨迹/ 需/ 遍历/ 一个/ 甚至/ 多个/ R/ -/ tree/ 的/ 所有/ 结点/ ,/ 找到/ 移动/ 对象/ 的/ 轨迹/ 单元/ ./ DISC/ -/ tree/ 采用/ 哈希/ 表加/ 双向/ 链表/ 的/ 数据结构/ ,/ 提高/ 轨迹/ 查找/ 和/ 删除/ 的/ 效率/ ./ 双向/ 链表/ 中/ 包含/ 移动/ 对象/ 的/ 轨迹/ 单元/ ,/ 当/ 需要/ 访问/ 对象/ 在/ 某些/ 时刻/ 的/ 轨迹/ 信息/ 时/ ,/ 仅/ 需/ 访问/ 哈希/ 表/ ,/ 取出/ 移动/ 对象/ 对应/ 的/ 链表/ 进行/ 查询/ ./ 此外/ ,/ 双向/ 链表/ 的/ 好处/ 在于/ 可以/ 快速访问/ 某一/ 时刻/ 的/ 前/ 一/ 时刻/ 和/ 后/ 一/ 时刻/ 的/ 轨迹/ 单元/ ,/ 为/ 查询/ 提供/ 便利/ ./ DISC/ -/ tree/ 结合/ R/ -/ tree/ 和/ R/ / -/ tree/ 索引/ ,/ 对/ 静态/ 路网/ 建立/ R/ / -/ tree/ 索引/ ,/ 对/ 动态/ 轨迹/ 单元/ 建立/ R/ -/ tree/ 索引/ ./ 对/ 静态/ 路网/ ,/ 采用/ 更新/ 操作/ 中/ 结点/ 分裂/ 次数/ 较少/ 的/ R/ / -/ tree/ ,/ 查询/ 对象/ 将/ 更加/ 高效/ 和/ 准确/ ./ R/ -/ tree/ 索引/ 建立/ 和/ 维护/ 的/ 计算/ 代价/ 较/ 小/ ,/ 适用/ 于/ 管理/ 频繁/ 更新/ 的/ 移动/ 对象/ 轨迹/ 单元/ ./ 而/ NDTR/ -/ tree/ 中/ 对/ 变化/ 较/ 小/ 的/ 路网/ 和/ 更新/ 频率/ 较/ 高/ 的/ 移动/ 对象/ 轨迹/ 单元/ 均/ 采用/ R/ -/ tree/ 索引/ ./ 在/ NDTR/ -/ tree/ 中/ 为了/ 寻找/ 移动/ 对象/ 的/ 前/ 一个/ 运动/ 轨迹/ 单元/ ,/ 需要/ 遍历/ 多条/ 道路/ 所/ 对应/ 的/ 多个/ R/ -/ tree/ 索引/ ./ DISC/ -/ tree/ 对此/ 做出/ 改进/ [/ 5/ ]/ :/ 将/ 每个/ 对象/ 上/ 一次/ 更新/ 后/ 的/ 最后/ 一个/ 轨迹/ 单元/ 在/ R/ -/ tree/ 中/ 的/ 索引/ 标识/ uid/ 存储/ 到/ 与其/ 对应/ 的/ 链表/ 结点/ LU/ 中/ ,/ 需要/ 对/ 其/ 操作/ 时/ 可以/ 直接/ 定位/ 到/ R/ -/ tree/ 的/ 某个/ 叶子/ 结点/ ,/ 进而/ 找到/ 轨迹/ 单元/ ,/ 极大地提高/ 了/ 索引/ 维护/ 的/ 效率/ ,/ 第/ 6.3/ ./ 2/ 节/ 的/ 实验/ 证明/ 了/ 这/ 一点/ ./ Page65DISC/ -/ tree/ 中/ 应用/ 的/ 算法/ 5.1/ 索引/ 建立/ 和/ 维护/ 算法/ 算法/ 1/ ./ DISC/ -/ tree/ 的/ 建立/ 和/ 维护/ 算法/ ./ 输入/ :/ 移动/ 对象/ 位置/ 更新/ 信息/ m/ ./ 输出/ :/ 更新/ 后/ 的/ DISC/ -/ tree/ ./ 1/ ./ FOR/ (/ 每条/ 更新/ 信息/ m/ =/ (/ mid/ ,/ type/ ,/ t/ ,/ v/ ,/ x/ ,/ y/ )/ )/ 2/ ./ 遍历/ 上层/ 以/ 封闭/ 路段/ 为/ 索引/ 单位/ 的/ R/ / -/ tree/ ,/ 3/ ./ mv/ ←/ (/ mid/ ,/ type/ ,/ t/ ,/ v/ ,/ rid/ ,/ pos/ )/ ;/ 4/ ./ R/ ←/ searchRoadTable/ (/ rid/ )/ ;/ 5/ ./ linkedlist/ ←/ searchTrajectoryTable/ (/ mid/ )/ ;/ 6/ ./ t/ ←/ moveToTail/ (/ linkedlist/ )/ ;/ 7/ ./ IF/ (/ t/ =/ =/ null/ )/ THEN8/ ./ LU/ ←/ insert/ (/ R/ ,/ U/ (/ mv/ )/ )/ ;/ 9/ ./ insertLinkedList/ (/ LU/ )/ ;/ 10/ ./ ELSE11/ ./ U/ (/ mvn/ )/ ←/ t/ ./ uid/ ;/ 12/ ./ delete/ (/ U/ (/ mvn/ )/ )/ ;/ 13/ ./ LU1/ ←/ insert/ (/ R/ ,/ U/ (/ mvs/ ,/ mve/ )/ )/ ;/ 14/ ./ LU2/ ←/ insert/ (/ R/ ,/ U/ (/ mvn/ )/ )/ ;/ 15/ ./ delete/ (/ linkedlist/ )/ ;/ 16/ ./ insertTail/ (/ LU1/ )/ ;/ 17/ ./ insertTail/ (/ LU2/ )/ ;/ 18/ ./ ENDIF19/ ./ ENDFORDISC/ -/ tree/ 首先/ 利用/ 真实/ 路网/ 数据/ 建立/ 上层/ 静态/ R/ / -/ tree/ 索引/ ,/ “/ 静态/ ”/ 是/ 指路/ 网/ 信息/ 的/ 更新/ 几率/ 远/ 小于/ 移动/ 对象/ 轨迹/ 单元/ 的/ 更新/ 概率/ ,/ 大多数/ 情况/ 下仅/ 需/ 一次/ 构建/ ,/ 不/ 需要/ 频繁/ 更新/ ./ 然后/ ,/ 根据/ 移动/ 对象/ 提交/ 的/ 位置/ 更新/ 信息/ 建立/ 并/ 维护/ 下层/ 动态/ 索引/ ./ “/ 动态/ ”/ 是/ 指/ 整个/ 索引/ 结构/ 不断更新/ ./ 本文/ 重点/ 关注/ 下层/ 动态/ 索引/ 的/ 建立/ 和/ 维护/ ,/ DISC/ -/ tree/ 建立/ 和/ 维护/ 过程/ 如/ 算法/ 1/ 所示/ ,/ 主要/ 步骤/ 为/ :/ (/ 1/ )/ 根据/ 移动/ 对象/ 位置/ 更新/ 信息/ m/ 查找/ 基于/ xy/ 平面/ 的/ 上层/ 索引/ ,/ 进而/ 找到/ 移动/ 对象/ 所处/ 的/ 封闭/ 路段/ e/ ,/ 取出/ 其/ 相关/ 信息/ (/ 第/ 1/ ~/ 2/ 行/ )/ ;/ (/ 2/ )/ 求取/ 对象/ 在/ e/ 所属/ 道路/ r/ 上/ 的/ 位置/ pos/ ,/ 形成/ 运行/ 矢量/ mv/ =/ (/ mid/ ,/ type/ ,/ t/ ,/ v/ ,/ rid/ ,/ pos/ )/ (/ 第/ 3/ 行/ )/ ;/ (/ 3/ )/ 通过/ rid/ 访问/ 辅助/ 结构/ RoadHashTable/ ,/ 取得/ 道路/ 所/ 对应/ 的/ R/ -/ tree/ (/ 第/ 4/ 行/ )/ ;/ (/ 4/ )/ 根据/ mid/ 访问/ 哈希/ 表/ TrajectoryHash/ -/ Table/ ,/ 获得/ 轨迹/ 单元/ 链表/ ,/ 访问/ 链表/ 尾/ 结点/ t/ (/ 第/ 5/ ~/ 6/ 行/ )/ ;/ (/ 5/ )/ 若/ t/ 为空/ ,/ 表示/ 初次/ 收到/ 该/ 对象/ 位置/ 信息/ ,/ 则/ 插入/ 活动/ 轨迹/ 单元/ U/ (/ mvn/ )/ 到/ R/ -/ tree/ 中/ ,/ 并/ 记录/ 它/ 在/ R/ -/ tree/ 中/ 的/ 位置/ uid/ ,/ 通过/ (/ U/ ,/ uid/ )/ 生成/ 链表/ 轨迹/ 单元/ LU/ ,/ 并/ 插入/ 到/ 的/ 链尾/ (/ 第/ 7/ ~/ 9/ 行/ )/ ;/ (/ 6/ )/ 若/ t/ 不为/ 空/ ,/ 根据/ t/ 中/ 的/ uid/ 信息/ 找到/ 并/ 删除/ R/ -/ tree/ 中/ 的/ 活动/ 轨迹/ 单元/ U/ (/ mvn/ )/ ./ 插入/ 连续/ 轨迹/ 单元/ U/ (/ mvs/ ,/ mve/ )/ ,/ 插入/ 活动/ 轨迹/ 单元/ U/ (/ mvn/ )/ ,/ LU1/ ,/ LU2/ 为/ 生成/ 的/ 链表/ 轨迹/ 单元/ (/ 第/ 10/ ~/ 14/ 行/ )/ ,/ 最后/ 在/ 链表/ 中/ 删除/ t/ (/ 第/ 15/ 行/ )/ ;/ (/ 7/ )/ 将/ LU1/ 和/ LU2/ 相继/ 添加/ 到/ 链表/ 尾部/ ,/ 进而/ 建立/ 索引/ 的/ 同时/ 并/ 维护/ 链表/ 信息/ (/ 第/ 16/ ~/ 17/ 行/ )/ ./ 5.2/ 移动/ 对象/ 时空/ 范围/ 查询/ 时空/ 范围/ 查询/ 是/ 衡量/ 移动/ 对象/ 索引/ 结构/ 好坏/ 的/ 指标/ ./ 本文/ 采用/ 如下/ 所示/ 的/ 时空/ 范围/ 查询/ 算法/ [/ 5/ ]/ ./ 算法/ 2/ ./ 移动/ 对象/ 时空/ 范围/ 查询/ 算法/ ./ 输入/ :/ 查询/ 区域/ (/ Δ/ x/ ,/ Δ/ y/ ,/ Δ/ t/ )/ ,/ 索引/ 哈希/ 表/ RoadHash/ -/ 输出/ :/ 满足/ 查询/ 条件/ 的/ 移动/ 对象/ 标识/ 集合/ S/ ./ 1/ ./ 根据/ (/ Δ/ x/ ,/ Δ/ y/ )/ 查询/ 上层/ R/ / -/ tree/ 求得/ 查询/ 窗口/ 与/ 2/ ./ (/ rid/ ,/ pos/ )/ ←/ calculatePos/ (/ e/ ,/ x/ ,/ y/ )/ ;/ // // 通过/ e/ 中/ 的/ 属/ 3/ ./ 对/ 每/ 一个/ 交点/ 重复/ 步骤/ 2/ 的/ 计算/ ,/ 得到/ 一系列/ 偶对/ 4/ ./ FOREACH/ (/ qinQ/ )/ 5/ ./ R/ ←/ searchRoadTable/ (/ rid/ )/ ;/ 6/ ./ 根据/ periodi/ ×/ Δ/ t/ 查询/ R/ 中/ 叶子/ 结点/ 记录/ U/ ;/ 7/ ./ IF/ (/ U/ ∩/ (/ periodi/ ×/ Δ/ t/ )/ ≠/ null/ )/ 8/ ./ I/ ←/ U/ 对应/ 的/ mid/ ;/ 9/ ./ ENDIF10/ ./ ENDFOR/ 以/ 成都/ 路网/ 中/ 指定/ 范围/ 查询/ 为例/ ,/ 具体/ 过程/ :/ (/ 1/ )/ 根据/ 查询/ 窗口/ [/ (/ x1/ ,/ y1/ )/ ,/ (/ x2/ ,/ y2/ )/ ]/ ,/ 搜索/ 上层/ R/ / -/ tree/ ,/ 遍历/ 到/ 叶子/ 结点/ ,/ 借助/ 叶子/ 结点/ 中/ 封闭/ 路段/ 信息/ e/ ,/ 求得/ 查询/ 窗口/ 与/ 封闭/ 路段/ 的/ 交点/ ./ 对于/ 一个/ 封闭/ 路段/ ,/ 查询/ 窗口/ 与/ 之/ 相交/ 的/ 个数/ 可能/ 不/ 唯一/ ./ 例如/ ,/ 查询/ 窗口/ 与/ 万/ 和/ 路/ 的/ 交点/ 有/ 2/ 个/ ,/ 形成/ 两条/ 查询/ 信息/ ./ 从/ 索引/ 文件/ 中/ 读出/ 存储/ 该/ 封闭/ 路段/ 信息/ 的/ 字符/ 数组/ ,/ 反/ 序列化/ 为/ 封闭/ 路段/ e/ 的/ 信息/ ,/ 交点/ 信息/ 用/ (/ e/ ,/ x/ ,/ y/ )/ 表示/ (/ 第/ 1/ 行/ )/ ./ (/ 2/ )/ 计算/ 出/ 交点/ 在/ 街道/ 中/ 的/ 位置/ pos/ (/ 第/ 2/ 行/ )/ ,/ 需要/ 用到/ 定义/ 3/ 中/ 的/ 属性/ :/ w/ ,/ len/ ,/ poss/ ./ (/ 3/ )/ 查询/ 区域/ 与/ 一个/ 道路/ 可能/ 有/ 多个/ 交点/ ,/ 对应/ 于/ 一个/ 偶对/ (/ rid/ ,/ period/ )/ (/ 第/ 3/ 行/ )/ ,/ 其中/ period/ 包含/ 一个/ 或者/ 多个/ pos/ 信息/ ./ 查询/ 区域/ 与/ 多条/ 道路/ 相交/ ,/ 则/ 对应/ 于/ 一组/ 偶对/ ,/ 在/ rid/ 对应/ 的/ 下层/ R/ -/ tree/ 中/ 查询/ 与/ (/ period/ ,/ Δ/ t/ )/ 相交/ 的/ 轨迹/ 单元/ ,/ 最终/ 输出/ 轨/ Page7/ 迹/ 单元/ 对应/ 移动/ 对象/ 的/ 标识/ (/ 第/ 4/ ~/ 10/ 行/ )/ ./ 6/ 实验/ 及/ 性能/ 分析/ 6.1/ 实验/ 环境/ 及/ 数据/ 集/ 描述/ 实验/ 采用/ 的/ 数据/ 集/ 来源于/ 成都市/ 真实/ 矢量/ 地图/ ,/ 包含/ 成都/ 二环/ 内/ 的/ 232/ 条/ 主干道/ ,/ 将/ 地图/ 数据/ 进行/ 转换/ ,/ 得到/ 如表/ 1/ 所示/ 的/ 数据格式/ ./ 标识/ 速度/ x/ 坐标/ y/ 坐标/ 移动/ 对象/ 对象/ 7204682645123362/ 在/ 实验/ 中/ ,/ 通过/ 加载/ Edge/ (/ 路网/ 边/ 集合/ )/ 和/ Node/ (/ 路网/ 结点/ 集合/ )/ 两个/ 文件/ 后/ 生成/ 成都市/ 二环/ 内/ 的/ 真实/ 路网/ ./ Edge/ 文件/ 包含/ 每个/ 封闭/ 路段/ 边/ 的/ 信息/ ,/ 表示/ 为/ (/ i/ ,/ ns/ ,/ ne/ ,/ eid/ ,/ rid/ )/ ,/ i/ 为/ 自/ 增字段/ ,/ ns/ 和/ ne/ 为/ 封闭/ 路段/ 的/ 起点/ 和/ 终点/ 标识/ ,/ eid/ 为/ 封闭/ 路段/ 标识/ ,/ rid/ 为/ 道路/ 标识/ ./ Node/ 文件/ 表示/ 为/ (/ nid/ ,/ x/ ,/ y/ )/ ,/ nid/ 表示/ 道路/ 交点/ 标识/ ,/ x/ 和/ y/ 为/ 二维/ 平面/ 下/ 的/ 横/ 纵坐标/ ./ 本文/ 通过/ 对/ 文献/ [/ 16/ ]/ 提出/ 的/ 移动/ 对象/ 轨迹/ 生成器/ 改进/ 后/ 设计/ 实现/ 了/ 一个/ 新/ 的/ 轨迹/ 生成/ 系统/ ,/ 改进/ 之/ 处/ 在于/ :/ 生成/ 轨迹/ 数据/ 时/ 考虑/ 道路/ 位置/ 信息/ ,/ 不再/ 基于/ 边/ 生成/ 轨迹/ 片段/ ,/ 而是/ 基于/ 道路/ 生成/ 轨迹/ ,/ 使/ 生成/ 轨迹/ 的/ 数据结构/ 与/ 本文/ 所提/ 算法/ 相符/ ./ 本文/ 中/ 所有/ 算法/ 利用/ Java/ 程序设计/ 语言/ 实现/ ./ 实验/ 硬件平台/ 为/ AMDAthlon5000/ +/ ,/ 2.6/ GHzCPU/ ,/ 2GB/ 内存/ ,/ 操作系统/ 平台/ 为/ WindowsXP/ ./ 表/ 2/ 给出/ 轨迹/ 生成器/ 的/ 参数设置/ ./ 实验/ 中/ 主要/ 对比/ DISC/ -/ tree/ 、/ FNR/ -/ tree/ 和/ NDTR/ -/ tree/ 的/ 性能/ 差异/ ,/ 其中/ FNR/ -/ tree/ 是/ 基于/ 路网/ 的/ 移动/ 对象/ 索引/ 方法/ 中/ 性能/ 较/ 好/ 的/ 一种/ ,/ 能/ 支持/ 高效/ 的/ kNN/ 查询/ 和/ 时空/ 范围/ 查询/ ;/ NDTR/ -/ tree/ 是/ 移动/ 对象/ 时空/ 范围/ 查询/ 性能/ 较/ 好/ 的/ 索引/ ,/ 因此/ 选择/ 这/ 两种/ 索引/ 进行/ 对比/ 实验/ ./ NDTR/ -/ tree/ 与/ DISC/ -/ tree/ 的/ 索引/ 基于/ 道路/ 构建/ ,/ FNR/ -/ tree/ 的/ 轨迹/ 索引/ 基于/ 封闭/ 路段/ ./ 为了/ 保证/ 算法/ 可比性/ ,/ FNR/ -/ tree/ 进行/ 轨迹/ 查询/ 时/ 将/ 不会/ 用到/ 表/ 1/ 中/ 移动/ 对象/ 所属/ 道路/ 标识/ ./ 6.2/ PathFinder/ 轨迹/ 查询/ 系统/ 简介/ 为了/ 便于/ 比较/ 上述/ 3/ 种/ 索引/ 结构/ ,/ 本文/ 开发/ 了/ 基于/ 路网/ 的/ 移动/ 对象/ 轨迹/ 查询/ 系统/ PathFinder/ [/ 5/ ]/ ,/ 包含/ 3/ 个/ 主要/ 功能模块/ :/ (/ 1/ )/ 轨迹/ 生成/ 模块/ ,/ 根据/ 静态/ 路网/ 生成/ 均匀分布/ 在/ 整个/ 路网/ 中/ 移动/ 对象/ 的/ 动态/ 运动/ 轨迹/ ;/ (/ 2/ )/ 索引/ 构建/ ,/ 构建/ 基于/ 路网/ 的/ 索引/ 结构/ ;/ (/ 3/ )/ 对象/ 查询/ ,/ 提供/ 时空/ 范围/ 等/ 查询/ 功能/ ./ 图/ 5/ 界面/ 左侧/ 为/ 利用/ 轨迹/ 生成器/ 生成/ 的/ 成都/ 二环/ 内/ 路网/ 数据/ ,/ 圆点/ 表示/ 移动/ 对象/ ,/ 利用/ 不同/ 颜色/ 来/ 区分/ 移动/ 对象/ 的/ 类型/ ,/ 例如/ :/ 红色/ 代表/ 速度/ 较/ 快/ 的/ 移动/ 对象/ ,/ 如/ 小型车/ ./ 以/ 移动/ 对象/ 时空/ 范围/ 查询/ 模块/ 为例/ ,/ 首先/ ,/ 用户/ 需要/ 确定/ 查询/ 的/ 窗口/ 范围/ ;/ 然后/ ,/ 选择/ 查询/ 的/ 时间/ 片段/ ;/ 最后/ ,/ 点击/ “/ 开始/ 查询/ ”/ 进行/ 时空/ 范围/ 查询/ ./ 查询/ 返回/ 结果/ 信息/ 包括/ :/ 移动/ 对象/ 标识/ 、/ 速度/ 、/ 移动/ 对象/ 所处/ 的/ 街道/ 等/ ,/ 结果/ 在/ 系统/ 界面/ 中/ 输出/ ./ 本文/ 应用/ 该/ 系统/ 比较/ DISC/ -/ tree/ 、/ NDTR/ -/ tree/ 、/ FNR/ -/ tree/ 进行/ 索引/ 构建/ 和/ 时空/ 范围/ 查询/ 的/ 性能/ ./ 6.3/ 索引/ 建立/ 和/ 维护/ 代价/ 比较/ 6.3/ ./ 1/ 索引/ 建立/ 及/ 维护/ 代价/ 理论/ 分析/ 式/ (/ 2/ )/ ~/ 式/ (/ 4/ )/ 给出/ 了/ FNR/ -/ tree/ 、/ DISC/ -/ tree/ 、/ NDTR/ -/ tree/ 在/ 索引/ 建立/ 和/ 维护/ 过程/ 中/ 结点/ 的/ 访问/ 次数/ ./ 其中/ ,/ Ti/ ,/ Ti/ 和/ T/ / i/ 表示/ 3/ 种/ 索引/ 中/ 第/ i/ 个/ 移动/ 对象/ 的/ 轨迹/ 数目/ ;/ Ninsert/ ,/ Ninsert/ 和/ N/ / insert/ 分别/ 表示/ 3/ 种/ 索引/ 进行/ 一次/ 插入/ 操作/ 结点/ 访问/ 的/ 次数/ ;/ Ndelete/ ,/ Ndelete/ ,/ N/ / delete/ 表示/ 3/ 种/ 索引/ 进行/ 一次/ 删除/ 操作/ 结点/ 访问/ 的/ 次数/ ;/ n/ 表示/ 移动/ 对象/ 的/ 数量/ ,/ mj/ 表示/ 树中/ 第/ j/ 层/ 包含/ 结点/ 的/ 数目/ ,/ h/ 为/ 树/ 的/ 高度/ ./ NodeAccess/ (/ FNR/ -/ tree/ )/ =/ ∑/ nNodeAccess/ (/ DISC/ -/ tree/ )/ =/ ∑/ n2/ ×/ Ninsert/ +/ N/ (/ Page8NodeAccess/ (/ NDTR/ -/ tree/ )/ =/ ∑/ n/ ∑/ h/ 随着/ 移动/ 对象/ 数量/ 的/ 增加/ ,/ DISC/ -/ tree/ 与/ NDTR/ -/ tree/ 索引/ 建立/ 和/ 维护/ 时/ 结点/ 访问/ 的/ 次数/ 远高于/ FNR/ -/ tree/ ,/ 原因/ 在于/ :/ (/ 1/ )/ 只有/ 移动/ 对象/ 离开/ 封闭/ 路段/ 时/ FNR/ -/ tree/ 才/ 触发/ 一次/ 轨迹/ 更新/ 事件/ ,/ 当/ 移动/ 对象/ 运动/ 在/ 封闭/ 路段/ 上时/ ,/ 其/ 活动/ 轨迹/ 单元/ 没有/ 保存/ 在/ FNR/ -/ tree/ 中/ ./ 相反/ ,/ 对于/ DISC/ -/ tree/ 和/ NDTR/ -/ tree/ ,/ 不管/ 移动/ 对象/ 是否/ 发生/ 路段/ 转移/ 事件/ ,/ 均/ 需/ 记录/ 对象/ 的/ 全部/ 轨迹/ 信息/ ./ 对象/ 在/ FNR/ -/ tree/ 的/ 轨迹/ 数目/ 要/ 少于/ 其/ 在/ DISC/ -/ tree/ 和/ NDTR/ -/ tree/ 下/ 的/ 轨迹/ 数目/ ,/ 即式/ (/ 2/ )/ 中/ 的/ Ti/ 值/ 小于/ 式/ (/ 3/ )/ 和/ 式/ (/ 4/ )/ 中/ 的/ Ti/ 和/ T/ / i/ 值/ ./ (/ 2/ )/ 在/ DISC/ -/ tree/ 与/ NDTR/ -/ tree/ 中/ ,/ 下层/ 索引/ 中/ 的/ 每个/ 树均/ 基于/ 包含/ 多个/ 封闭/ 路段/ 的/ 道路/ r/ 构建/ ,/ 而/ FNR/ -/ tree/ 的/ 下层/ 索引/ 基于/ 封闭/ 路段/ e/ 构建/ ,/ 其/ 空间/ 单位/ 较/ 小/ ./ 由于/ r/ 与/ e/ 的/ 关系/ 是/ 1n/ (/ n/ 值/ 由/ r/ 中/ 包含/ e/ 的/ 个数/ 确定/ )/ ,/ DISC/ -/ tree/ 与/ NDTR/ -/ tree/ 的/ 下层/ 索引/ 中/ 每个/ 树/ 的/ 规模/ 远大于/ FNR/ -/ tree/ ,/ 因此/ 在/ FNR/ -/ tree/ 中/ 进行/ 一次/ 插入/ 操作/ 需要/ 访问/ 的/ 结点/ 数目/ 要/ 小于/ 同样/ 的/ 操作/ 在/ DISC/ -/ tree/ 和/ NDTR/ -/ tree/ 中所/ 访问/ 的/ 结点/ 次数/ ,/ 式/ (/ 2/ )/ 中/ 的/ Ninsert/ 小于/ 式/ (/ 3/ )/ 和/ 式/ (/ 4/ )/ 中/ 的/ Ninsert/ 和/ N/ / insert/ ./ (/ 3/ )/ DISC/ -/ tree/ 和/ NDTR/ -/ tree/ 每次/ 更新/ 索引/ 时/ 都/ 需要/ 删除/ 之前/ 的/ 活动/ 轨迹/ 单元/ ,/ 并/ 插入/ 新/ 的/ 活动/ 轨迹/ 单元/ ,/ FNR/ -/ tree/ 无需/ 进行/ 上述/ 操作/ ./ 6.3/ ./ 2/ 索引/ 建立/ 及/ 维护/ 代价/ 实验/ 本/ 节/ 统计/ 不同/ 移动/ 对象/ 数量/ 下/ ,/ FNR/ -/ tree/ ,/ NDTR/ -/ tree/ ,/ DISC/ -/ tree/ 索引/ 建立/ 和/ 维护/ 的/ I/ // O/ 及/ 时间/ 开销/ ./ 3/ 种/ 索引/ 基于/ 6.1/ 节/ 介绍/ 的/ 成都/ 二环路/ 路网/ 生成/ 相同/ 的/ 轨迹/ 数据/ 集/ ,/ 避免/ 由于/ 轨迹/ 随机性/ 造成/ 实验/ 环境/ 的/ 不同/ ,/ 结果/ 如图/ 6/ 和/ 图/ 7/ 所示/ ./ 如图/ 6/ 所示/ ,/ 随着/ 移动/ 对象/ 数目/ 增多/ ,/ DISC/ -/ tree/ 索引/ 建立/ 及/ 维护/ 的/ 性能/ 明显/ 优于/ NDTR/ -/ tree/ ,/ 原因/ 在于/ :/ NDTR/ -/ tree/ 每次/ 接收/ 到/ 位置/ 更新/ 请求/ 对/ 下层/ R/ -/ tree/ 进行/ 更新/ 时/ ,/ 需要/ 遍历/ 下层/ R/ -/ tree/ 找到/ 移动/ 对象/ 的/ 活动/ 轨迹/ 单元/ 并/ 进行/ 删除/ ,/ 式/ (/ 4/ )/ 中/ ∑/ hj/ =/ 1mj/ 表示/ 每次/ 遍历/ 过程/ 中/ NDTR/ -/ tree/ 访问/ 结点/ 的/ 数目/ ./ 移动/ 对象/ 数目/ 越/ 多/ ,/ 下层/ R/ -/ tree/ 规模/ 越/ 庞大/ ,/ 将/ 产生/ 巨大/ 的/ I/ // O/ 开销/ ./ 而/ DISC/ -/ tree/ 采用/ 了/ 哈希/ 表/ 和/ 双向/ 链表/ 辅助/ 结构/ ,/ 寻找/ 移动/ 对象/ 活动/ 轨迹/ 单元/ 仅/ 需/ 访问/ 链表/ 尾/ 结点/ ,/ 查找/ 其/ 在/ 下层/ R/ -/ tree/ 中/ 的/ 位置/ ,/ 删除/ 活动/ 轨迹/ 单元/ ./ 此/ 操作/ 不/ 需要/ 遍历/ R/ -/ tree/ ,/ 极大/ 地/ 减少/ 了/ I/ // O/ 开销/ ./ FNR/ -/ tree/ 的/ I/ // O/ 要远/ 低于/ 其他/ 两种/ 索引/ 结构/ ,/ 图/ 6/ 中/ 几乎/ 显示/ 不/ 出来/ ./ 当/ 对象/ 数量/ 达到/ 5000/ 时/ ,/ NDTR/ -/ tree/ 的/ I/ // O/ 是/ FNR/ -/ tree/ 的/ 262.7/ 倍/ ,/ 是/ DISC/ -/ tree/ 的/ 5.3/ 倍/ ./ 如图/ 7/ 所示/ ,/ 当/ 移动/ 对象/ 数量/ 规模较/ 小/ ,/ 为/ 500/ 左右/ 时/ ,/ DISC/ -/ tree/ 索引/ 建立/ 时间/ 略低于/ NDTR/ -/ tree/ ./ 因为/ DISC/ -/ tree/ 采用/ R/ / -/ tree/ 索引/ 静态/ 路网/ ,/ 相比/ 于/ NDTR/ -/ tree/ 采用/ R/ -/ tree/ 索引/ 结构/ ,/ 虽然/ 前者/ 的/ 一次/ 建立/ 开销/ 略大于/ 后者/ ,/ 但是/ 采用/ 辅助/ 结构/ 节省/ 删除/ 轨迹/ 单元/ 的/ 时间/ 开销/ ./ 当/ 移动/ 对象/ 数量/ 增加/ 到/ 1500/ 后/ ,/ DISC/ -/ tree/ 的/ 辅助/ 结构/ 作用/ 明显/ ,/ 极大/ 地/ 节省/ 了/ 删除/ 活动/ 轨迹/ 单元/ 的/ 时间/ 代价/ ./ 相比/ 于/ NDTR/ -/ tree/ ,/ DISC/ -/ tree/ 在/ 索引/ 建立/ 和/ 维护/ 方面/ 时间/ 代价/ 平均/ 减少/ 39.1/ %/ ./ FNR/ -/ tree/ 仍然/ 具有/ 时间/ 性能/ 上/ 的/ 优势/ ,/ 移动/ 对象/ 数量/ 从/ 500/ 增加/ 到/ 5000/ 的/ 过程/ 中/ ,/ DISC/ -/ tree/ 的/ 平均/ 时间/ 约/ 为/ FNR/ -/ tree/ 的/ 5.14/ 倍/ ,/ NDTR/ -/ tree/ 的/ 平均/ 时间/ 约/ 为/ FNR/ -/ tree/ 的/ 9.78/ 倍/ ./ FNR/ -/ tree/ 索引/ 建立/ 和/ 维护/ 的/ 时间/ 性能/ 优势/ 不如/ I/ // O/ 性能/ 优势/ 大/ 的/ 原因/ 在于/ :/ FNR/ -/ tree/ 需要/ 维护/ 的/ 动态/ 索引/ 树/ 基于/ 封闭/ 路段/ 构建/ ,/ 而/ NDTR/ -/ tree/ 和/ Page9DISC/ -/ tree/ 的/ 动态/ 索引/ 树/ 基于/ 道路/ 构建/ ,/ 一条/ 道路/ 包含/ 多个/ 封闭/ 路段/ 的/ 实际/ 情况/ 导致/ FNR/ -/ tree/ 下层/ 索引/ 中/ 虽然/ 每个/ 树所/ 占/ 空间/ 较/ 小/ ,/ 但是/ 整个/ 森林/ 规模/ 更为/ 庞大/ ,/ 增加/ 了/ 时间/ 开销/ ./ 6.4/ 移动/ 对象/ 轨迹/ 查询/ 性能/ 比较/ 轨迹/ 查询/ 是/ 指/ 查询/ 在/ 给定/ 道路/ 上/ 所有/ 出现/ 的/ 移动/ 对象/ 的/ 运动/ 轨迹/ 单元/ ./ 相比/ 于/ NDTR/ -/ tree/ 和/ DISC/ -/ tree/ ,/ 如果/ 移动/ 对象/ 一直/ 没有/ 离开/ 某条/ 封闭/ 路段/ ,/ FNR/ -/ tree/ 不/ 记录/ 其/ 轨迹/ 信息/ ,/ 其所/ 包含/ 的/ 轨迹/ 数量/ 少/ 而且/ 不/ 准确/ ,/ 因此/ 实验/ 中/ 比较/ NDTR/ -/ tree/ 与/ DISC/ -/ tree/ 的/ 轨迹/ 查询/ 性能/ ./ 为了/ 获取/ 移动/ 对象/ 的/ 运动/ 轨迹/ ,/ NDTR/ -/ tree/ 需要/ 访问/ 下层/ 所有/ R/ -/ tree/ (/ n/ 条/ 道路/ 对应/ n/ 个/ R/ -/ tree/ )/ ,/ 将/ 包含/ 移动/ 对象/ 轨迹/ 单元/ 的/ 所有/ 记录/ 取出/ ,/ 进而/ 得到/ 完整/ 轨迹/ ./ 而/ DISC/ -/ tree/ 首先/ 根据/ 移动/ 对象/ 标识/ 访问/ 哈希/ 表/ ,/ 取出/ 移动/ 轨迹/ 单元/ 链表/ ,/ 然后/ 访问/ 双向/ 链表/ ,/ 逐一/ 取出/ 链表/ 单元/ ,/ 按/ 时间/ 顺序/ 将/ 轨迹/ 片段/ 连接起来/ 形成/ 完整/ 轨迹/ ./ 如图/ 8/ 所示/ ,/ 由于/ DISC/ -/ tree/ 无需/ 访问/ 下层/ R/ -/ tree/ 森林/ ,/ 其/ 轨迹/ 查询/ 时间/ 一直/ 维持/ 在/ 一定/ 范围/ 内/ ,/ 当/ 对象/ 数量/ 大于/ 2500/ (/ 横坐标/ 为/ 5/ )/ 时/ ,/ 近似/ 呈/ 线性/ 增长/ ;/ 而/ NDTR/ -/ tree/ 的/ 查询/ 时间/ 随/ 对象/ 的/ 增加/ 及/ R/ -/ tree/ 结构/ 增大/ ,/ 变得/ 越来越/ 长/ ./ 相比/ NDTR/ -/ tree/ ,/ 图/ 9/ 时空/ 范围/ 查询/ 准确性/ 比较/ DISC/ -/ tree/ 的/ 平均/ 查询/ 效率/ 提高/ 约/ 24.1/ %/ ./ 6.5/ 时空/ 范围/ 查询/ 性能/ 分析/ 为了/ 比较/ FNR/ -/ tree/ 、/ NDTR/ -/ tree/ 、/ DISC/ -/ tree/ 时空/ 范围/ 查询/ 的/ 准确性/ 和/ 时间/ 效率/ ,/ 实验/ 分别/ 以/ 查询/ 窗口/ 大小/ 占/ 地图/ 的/ 10/ %/ 、/ 20/ %/ 、/ 30/ %/ 、/ 40/ %/ 范围/ 进行/ 查询/ ,/ 比较/ 查询/ 准确率/ 和/ 时间/ 两个/ 性能指标/ ./ 6.5/ ./ 1/ 时空/ 范围/ 查询/ 准确性/ 分析/ 3/ 种/ 索引/ 结构/ 在/ 不同/ 查询/ 窗口/ 下/ 查询/ 结果/ 的/ 准确率/ 如图/ 9/ 所示/ ./ 虽然/ NDTR/ -/ tree/ 和/ DISC/ -/ tree/ 采用/ 不同/ 的/ 索引/ 结构/ ,/ 但是/ 均/ 基于/ 道路/ 构建/ 双层/ 索引/ ,/ 因此/ 这/ 两种/ 索引/ 得到/ 的/ 查询/ 结果/ 一致/ ,/ 即/ 两种/ 索引/ 的/ 查询/ 准确率/ 曲线/ 重合/ ./ FNR/ -/ tree/ 基于/ 封闭/ 路段/ 构/ Page10/ 建/ 索引/ ,/ 查询/ 返回/ 的/ 结果/ 要/ 少于/ 上述/ 两种/ 索引/ ,/ 导致/ 预测/ 不够/ 准确/ ./ 当/ 查询/ 窗口/ 为/ 地图/ 的/ 10/ %/ 时/ ,/ FNR/ -/ tree/ 的/ 查询/ 准确率/ 平均/ 为/ 73.2/ %/ ,/ 而/ NDTR/ -/ tree/ 和/ FNR/ -/ tree/ 的/ 查询/ 准确率/ 较/ 高/ ,/ 维持/ 在/ 95/ %/ 以上/ ./ 当/ 查询/ 窗口/ 增大/ 到/ 20/ %/ 时/ ,/ NDTR/ -/ tree/ 和/ DISC/ -/ tree/ 保持/ 平均/ 98/ %/ 以上/ 的/ 准确率/ ,/ FNR/ -/ tree/ 的/ 准确率/ 为/ 83/ %/ ./ 当/ 查询/ 窗口/ 增大/ 到/ 40/ %/ 时/ ,/ 3/ 种/ 索引/ 查询/ 准确率/ 相差/ 不大/ ./ 在/ 小/ 范围/ 窗口/ 下/ ,/ FNR/ -/ tree/ 查询/ 准确率/ 不高/ 的/ 原因/ 在于/ [/ 5/ ]/ :/ 其仅/ 保存/ 移动/ 对象/ 进入/ 和/ 离开/ 一个/ 封闭/ 路段/ 时/ 的/ 轨迹/ 信息/ ./ 假设/ 移动/ 对象/ o/ 运动/ 到/ 道路/ r/ 的/ 子/ 路段/ r/ ./ d1/ 则/ 到达/ 目的地/ ,/ 并/ 没有/ 离开/ 该/ 路段/ ,/ 于是/ o/ 在/ r/ ./ d1/ 上/ 的/ 运动/ 轨迹/ 不会/ 保存/ 在/ FNR/ -/ tree/ 中/ ,/ 当/ 查询/ 窗口/ 较/ 小时/ 包含/ 的/ 路段/ 较/ 少/ ,/ 出现/ 漏查/ 的/ 情况/ ./ 随着/ 查询/ 窗口/ 的/ 增大/ ,/ 其/ 包含/ 的/ 封闭/ 路段/ 数目/ 将会/ 增多/ ,/ 仍/ 以/ 道路/ r/ 为/ 例子/ ,/ 查询/ 窗口/ 增大/ 后/ ,/ 可能/ 包含/ r/ 的/ 多个/ 封闭/ 路段/ ,/ 在/ r/ ./ d1/ 中/ 查不到/ 移动/ 对象/ o/ ,/ 但/ 在/ 其他/ 路段/ 上/ 可能/ 会/ 查找/ 到/ o/ ./ 实验/ 发现/ :/ 当/ 查询/ 窗口/ 小于/ 10/ %/ 时/ ,/ DISC/ -/ tree/ 相比/ 于/ FNR/ -/ tree/ 在/ 查询/ 准确率/ 上/ 平均/ 提高/ 约/ 31.6/ %/ ./ 6.5/ ./ 2/ 时空/ 范围/ 查询/ 时间/ 代价/ 分析/ 图/ 10/ 显示/ 了/ 在/ 不同/ 的/ 查询/ 窗口/ 下/ FNR/ -/ tree/ 、/ 图/ 10/ 时空/ 范围/ 查询/ 时间/ 比较/ NDTR/ -/ tree/ 、/ DISC/ -/ tree/ 三种/ 索引/ 时空/ 范围/ 查询/ 的/ 时间/ 开销/ ./ 可以/ 发现/ :/ 当/ 移动/ 对象/ 从/ 500/ 增加/ 到/ 5000/ 时/ ,/ DISC/ -/ tree/ 时空/ 范围/ 查询/ 时间/ 性能/ 优于/ NDTR/ -/ tree/ ./ 原因/ 在于/ 时空/ 范围/ 查询/ 过程/ 中/ ,/ 首先/ 通过/ 指定/ 窗口/ 范围/ 对/ 路网/ 进行/ 查询/ ,/ 由于/ DISC/ -/ tree/ 采用/ R/ / -/ tree/ 索引/ 管理/ 路段/ ,/ 查询/ 效率/ 要/ 高于/ NDTR/ -/ tree/ ./ 然后/ ,/ 通过/ (/ period/ ,/ Δ/ t/ )/ 遍历/ 指定/ 道路/ 的/ R/ -/ tree/ 索引/ ,/ 这/ 一步/ 中/ 两者/ 查询/ 效率/ 相当/ ./ 而/ FNR/ -/ tree/ 的/ 下层/ 索引/ 是/ 基于/ 封闭/ 路段/ 构建/ 的/ R/ -/ tree/ 森林/ ,/ 相比/ 于/ NDTR/ -/ tree/ 和/ DISC/ -/ tree/ 基于/ 道路/ 的/ R/ -/ tree/ 森林/ ,/ 其/ 下层/ 索引/ 中/ 包含/ 更/ 多/ 的/ R/ -/ tree/ ,/ 规模/ 较大/ 不利于/ 查询/ ,/ 查询/ 时间/ 与/ DISC/ -/ tree/ 相当/ ./ 但是/ FNR/ -/ tree/ 下层/ 索引/ 中/ 每个/ 树/ 包含/ 的/ 记录/ 数量/ 小于/ NDTR/ -/ tree/ 和/ DISC/ -/ tree/ ,/ 在/ 查询/ 过程/ 中/ ,/ NDTR/ -/ tree/ 和/ DISC/ -/ tree/ 对树/ 的/ 遍历/ 操作/ 更/ 消耗/ 时间/ ./ 由于/ 后/ 一/ 因素/ 起/ 主要/ 作用/ ,/ 因此/ FNR/ -/ tree/ 的/ 查询/ 时间/ 优于/ NDTR/ -/ tree/ 和/ DISC/ -/ tree/ ./ 如图/ 10/ 所示/ ,/ 随着/ 查询/ 窗口/ 的/ 增大/ ,/ FNR/ -/ tree/ 查询/ 时间/ 增加/ 的/ 趋势/ 要/ 大于/ NDTR/ -/ tree/ 和/ DISC/ -/ tree/ ,/ 原因/ 在于/ NDTR/ -/ tree/ 和/ DISC/ -/ tree/ 下层/ 每个/ R/ -/ tree/ 对应/ 的/ 是/ 一条/ 道路/ ,/ 上层/ 叶子/ 结点/ 与/ 下层/ R/ -/ tree/ 的/ 对应/ 关系/ 为/ n1/ ./ 而/ FNR/ -/ tree/ 的/ 上层/ 索引/ 基本/ 单位/ 是/ 封闭/ 路段/ ,/ 每个/ 下/ Page11/ 层/ R/ -/ tree/ 对应/ 一个/ 封闭/ 路段/ ,/ 上层/ 叶子/ 结点/ 与/ 下层/ R/ -/ tree/ 的/ 对应/ 关系/ 为/ 11/ ./ 随着/ 查询/ 窗口/ 增大/ ,/ 包含/ 的/ 封闭/ 路段/ 增多/ ./ 例如/ ,/ 查询/ 到/ 道路/ r/ 的/ 3/ 个/ 封闭/ 路段/ (/ r/ ./ b1/ ,/ r/ ./ b2/ ,/ r/ ./ b3/ )/ ,/ 在/ FNR/ -/ tree/ 中/ 需要/ 对/ r/ ./ b1/ ,/ r/ ./ b2/ ,/ r/ ./ b3/ 在/ 下层/ 索引/ 森林/ 中/ 的/ 3/ 个树/ 分别/ 进行/ 查询/ ,/ 而/ NDTR/ -/ tree/ 和/ DISC/ -/ tree/ 只/ 需要/ 对/ 下层/ 索引/ 森林/ 中/ r/ 所在/ 的/ 树/ 进行/ 查询/ 即可/ ./ 为了/ 进一步/ 比较/ 当/ 移动/ 对象/ 数量/ 规模/ 较大/ 时/ 3/ 种/ 索引/ 查询/ 时间/ 的/ 性能/ 差异/ ,/ 图/ 11/ 给出/ 了/ 查询/ 窗口/ 大小/ 占/ 地图/ 的/ 30/ %/ ,/ 移动/ 对象/ 数量/ 从/ 5500/ 变化/ 到/ 10000/ 时/ ,/ NDTR/ -/ tree/ 和/ DISC/ -/ tree/ 索引/ 时空/ 范围/ 查询/ 的/ 时间/ 代价/ ./ 图/ 11/ 大规模/ 移动/ 对象/ 下/ 时空/ 范围/ 查询/ 时间/ 比较/ 实验/ 结果表明/ :/ (/ 1/ )/ DISC/ -/ tree/ 随着/ 移动/ 对象/ 数量/ 增加/ 其/ 查询/ 时间/ 波动/ 没有/ NDTR/ -/ tree/ 剧烈/ ;/ (/ 2/ )/ 当/ 移动/ 对象/ 数量/ 规模/ 较大/ 时/ (/ 从/ 5500/ 变化/ 到/ 10000/ 时/ )/ ,/ DISC/ -/ tree/ 性能/ 优势/ 明显/ ,/ 查询/ 效率/ 可以/ 提高/ 23.5/ %/ ./ 原因/ 与/ 本节/ 之前/ 介绍/ 的/ 小规模/ 移动/ 对象/ 数量/ 下/ 的/ 时空/ 范围/ 查询/ 相同/ ./ 7/ 结论/ 目前/ 路网/ 中/ 移动/ 对象/ 索引/ 技术/ 的/ 研究成果/ 较/ 少/ ,/ 仍/ 处于/ 起步/ 阶段/ ./ 考虑/ 到/ 现有/ 路网/ 中/ 移动/ 对象/ 索引/ 技术/ 的/ 不足/ ,/ 本文/ 在/ 提高/ 索引/ 建立/ 维护/ 和/ 移动/ 对象/ 轨迹/ 查询/ 性能/ 方面/ 进行/ 了/ 深入研究/ ./ 针对/ NDTR/ -/ tree/ 在/ 索引/ 维护/ 和/ 轨迹/ 查询/ 方面/ 的/ 不足/ ,/ FNR/ -/ tree/ 针对/ 时空/ 范围/ 查询/ 准确性/ 不高/ 的/ 缺点/ ,/ 提出/ 了/ 新型/ 基于/ 路网/ 的/ 移动/ 对象/ 动态/ 双层/ 索引/ 结构/ DISC/ -/ tree/ ,/ 对/ 更新/ 较少/ 的/ 静态/ 路网/ 信息/ 采用/ R/ / -/ tree/ 索引/ 管理/ ,/ 对/ 实时/ 更新/ 代价/ 较/ 高/ 的/ 移动/ 对象/ 运动/ 轨迹/ 采用/ 结点/ 更新/ 代价/ 较/ 小/ 的/ R/ -/ tree/ 进行/ 索引/ ./ 大量/ 的/ 实验/ 结果/ 证明/ 了/ DISC/ -/ tree/ 在/ 索引/ 维护/ 和/ 查询/ 性能/ 上/ 领先/ 于/ NDTR/ -/ tree/ ,/ 在/ 查询/ 精度/ 上/ 优于/ FNR/ -/ tree/ ./ 由于/ DISC/ -/ tree/ 建模/ 中/ 没有/ 考虑/ 真实/ 客观/ 环境因素/ ,/ 如/ 红绿灯/ ,/ 高峰/ 路段/ ,/ 车辆/ 限行/ 等/ ,/ 这些/ 因素/ 对/ 路网/ 中/ 移动/ 对象/ 运动/ 趋势/ 会/ 产生/ 影响/ ,/ 未来/ 工作/ 将/ 对/ 影响/ 移动/ 对象/ 运动/ 的/ 主客观/ 因素/ 建模/ ,/ 集成/ 到/ DISC/ -/ tree/ 中/ ,/ 进一步提高/ 查询/ 结果/ 的/ 准确性/ ./ 

