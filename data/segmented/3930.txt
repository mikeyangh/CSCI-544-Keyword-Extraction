Page1/ 基于/ 双色/ 反射/ 模型/ 的/ 彩色/ 结构/ 光/ 颜色/ 识别/ 的/ 研究/ 汤一平/ 1/ )/ 宗/ 明理/ 2/ )/ 吴立娟/ 1/ )/ 1/ )/ (/ 浙江工业大学/ 信息/ 工程学院/ 杭州/ 310014/ )/ 2/ )/ (/ 浙江工业大学/ 计算机/ 学院/ 杭州/ 310014/ )/ 摘要/ 为了/ 快速/ 准确/ 地/ 识别/ 出/ 彩色/ 结构/ 光/ 系统/ 中/ 的/ 投射/ 光/ 颜色/ 信息/ ,/ 该文/ 提出/ 了/ 基于/ 双色/ 反射/ 模型/ 的/ 投射/ 光/ 颜色/ 识别/ 算法/ ./ 首先/ 通过/ 对/ 数码相机/ 和/ 投影设备/ 进行/ 色度/ 标定/ ,/ 以/ 消除/ 两者之间/ 的/ 耦合/ 性/ 差异/ ;/ 接着/ 通过/ 估计/ 物体/ 三/ 颜色/ 通道/ 光谱/ 反射率/ 以及/ 分离/ 镜面反射/ 成分/ 和/ 漫反射/ 成分/ ,/ 来/ 修正/ 物体/ 本身/ 颜色/ 和/ 镜面反射/ 对/ 投射/ 光源/ 颜色/ 的/ 影响/ ./ 实验/ 结果表明/ ,/ 该文/ 提出/ 的/ 投射/ 光/ 颜色/ 识别/ 算法/ 对于/ 双色/ 反射/ 模型/ 条件/ 下/ 的/ 彩色/ 结构/ 光/ 颜色/ 识别/ 具有/ 鲁棒性/ 高/ 、/ 计算速度/ 快/ 、/ 识别/ 准确度/ 高等/ 优点/ ./ 关键词/ 彩色/ 结构/ 光/ ;/ 光源/ 颜色/ 识别/ ;/ 双色/ 反射/ 模型/ ;/ 物体/ 光谱/ 反射率/ ;/ 颜色/ 修正/ 算法/ 1/ 引言/ 在/ 结构/ 光/ 三维/ 视觉/ 中/ ,/ 颜色/ 编码/ 结构/ 光/ 三维/ 测量/ 技术/ 由于/ 具有/ 重建/ 精度高/ 、/ 特征/ 信息提取/ 简单/ 、/ 实/ Page2/ 彩色/ 编码/ 结构/ 光/ 三维/ 测量/ 中/ ,/ 对/ 测量/ 物体/ 表面/ 颜色/ 中性/ 和/ 漫反射/ 的/ 假设/ ,/ 使/ 结构/ 光/ 颜色/ 识别/ 更为/ 容易/ ,/ 但/ 测量/ 系统/ 的/ 实用性/ 和/ 鲁棒性/ 受到/ 某些/ 限制/ ./ 实际/ 颜色/ 测量/ 中/ ,/ 结构/ 光/ 颜色/ 受/ 物体/ 本身/ 颜色/ 、/ 高光/ 以及/ 环境光/ 等/ 因素/ 的/ 影响/ ,/ 使得/ 结构/ 光/ 颜色/ 的/ 识别率/ 大大降低/ ,/ 有时/ 会/ 出现/ 误/ 识别/ 现象/ ,/ 其/ 原因/ 主要/ 是/ 物体/ 表面/ 颜色/ 由/ 物体/ 光谱/ 反射率/ 、/ 光源/ 的/ 光谱/ 成分/ 和/ 观察者/ 光谱/ 敏感度/ 等/ 3/ 个/ 要素/ 共同/ 决定/ 的/ ./ 国内外/ 许多/ 学者/ 对/ 彩色/ 结构/ 光/ 颜色/ 识别/ 问题/ 进行/ 相关/ 研究/ ./ 刘维/ 一等/ 人/ [/ 3/ ]/ 提出/ 用/ RGB/ 三个/ 分量/ 中/ 的/ 最小值/ 减去/ 另/ 两个/ 分量/ ,/ 得到/ 该/ 像素点/ 的/ 光谱色/ ,/ 在/ HSI/ 颜色/ 空间/ 进行/ 分色/ 处理/ ,/ 将/ 亮度/ 和/ 颜色/ 信息/ 分离/ ,/ 通过/ 设定/ 固定/ 的/ 阈值/ 将/ 红/ 、/ 绿/ 、/ 蓝/ 、/ 青/ 、/ 品/ 、/ 黄/ 几种/ 颜色/ 有效/ 地区/ 分开/ 来/ ,/ 问题/ 是/ 该/ 算法/ 不/ 适合/ 用于/ 对/ 物体/ 表面/ 颜色/ 的/ 结构/ 光/ 颜色/ 的/ 识别/ ./ Sato/ [/ 4/ ]/ 设计/ 了/ 一种/ 多谱线/ 投影仪/ 测距仪/ ,/ 通过/ 向/ 物体/ 投射/ 周期/ 彩虹/ 图案/ 3/ 次/ ,/ 每次/ 移动/ 相位/ 1/ // 3/ 个/ 周期/ ,/ 最后/ 将/ 拍摄/ 的/ 三幅/ 图像/ 线性/ 地/ 组合成/ 一幅/ 叠加/ 图像/ ,/ Sato/ 证明/ 了/ 合并/ 后/ 叠加/ 图像/ 上/ 的/ 每/ 一个/ 像素/ 色调/ 值/ 与/ 第一幅/ 图像/ 的/ 色调/ 值/ 相等/ ,/ 接着/ 进行/ 匹配/ 工作/ ,/ 该/ 设计/ 能/ 有效/ 克服/ 被测/ 物体/ 表面/ 反射/ 的/ 影响/ ,/ 但是/ 由于/ 需要/ 多次/ 投射/ 图像/ 多次/ 进行/ 匹配/ 计算/ ,/ 因此/ 只/ 适合/ 静态/ 场景/ 的/ 识别/ ./ Pan/ 等/ 人/ [/ 5/ ]/ 提出/ 了/ 基于/ 5/ 种颜色/ 的/ 二进制/ 格雷/ 码/ 图案/ ,/ 并/ 设计/ 一种/ 自/ 适应/ 阈值/ 的/ 方法/ ,/ 使/ 被/ 测/ 物体/ 不/ 受/ 本身/ 表面/ 颜色/ 和/ 不连续性/ 的/ 影响/ ,/ 提高/ 了/ 测量/ 系统/ 的/ 鲁棒性/ ./ Wegiel/ 等/ 人/ [/ 6/ ]/ 提出/ 了/ 可/ 适应性/ 的/ 三维/ 测量方法/ ,/ 采用/ 格雷/ 码/ 结合/ 相移/ 技术/ ,/ 向/ 被/ 测/ 物体/ 投射/ 三幅/ 图像/ ,/ 其中/ 两幅/ 是/ 格雷/ 码/ 图案/ ,/ 另外/ 一幅/ 正弦曲线/ 颜色/ 可以/ 根据/ 物体/ 颜色/ 进行/ 选择/ ,/ 从而/ 克服/ 物体/ 本身/ 颜色/ 的/ 影响/ ./ Johji/ [/ 7/ ]/ 提出/ 基于/ 双色/ 反射/ 模型/ 的/ 光源/ 色度/ 估计/ 方法/ ,/ 对/ 图像/ 每个/ 像素点/ 在/ 颜色/ 空间/ 进行/ 色度/ 分割/ 代替/ 图像/ 物理/ 空间/ 颜色/ 分割/ ,/ 根据/ 每个/ 像素点/ 的/ 反射/ 分量/ 都/ 是/ 由/ 镜面反射/ 成分/ 和/ 漫反射/ 成分/ 的/ 线性组合/ 的/ 原理/ ,/ 其/ 镜面反射/ 成分/ 的/ 光谱/ 分布/ 与/ 光源/ 十分/ 相近/ ./ 因此/ ,/ 将/ 同一/ 色度/ 空间/ 上/ 的/ 像素点/ 投影/ 到/ 色度图/ 上/ ,/ 根据/ 两种/ 反射/ 成分/ 权重/ 的/ 不同/ 来/ 拟合/ 一条/ 从/ 物体/ 色度/ 趋向/ 光源/ 色度/ 的/ 色度/ 直线/ ,/ 理论/ 上/ 只要/ 场景/ 中/ 存在/ 两种/ 以上/ 的/ 物体/ 颜色/ ,/ 就/ 可以/ 通过/ 色度图/ 中/ 两条/ 拟合/ 直线/ 延长线/ 上/ 的/ 交点/ 来/ 估计/ 光源/ 的/ 色度/ ./ 该/ 方法/ 在/ 单一/ 光源/ 的/ 情况/ 下/ 能够/ 较/ 准确/ 地/ 估计/ 出/ 光源/ 色度/ ./ 但/ 存在/ 多/ 光谱/ 光源/ 或者/ 物体/ 表面/ 纹理/ 较/ 复杂/ 的/ 情况/ 下/ ,/ 直线/ 拟合/ 会受/ 干扰/ 影响/ ,/ 光源/ 色度/ 也/ 难以估计/ 得/ 比较/ 准确/ ;/ 此外/ ,/ 该/ 方法/ 也/ 受到/ 场景/ 中/ 颜色/ 类别/ 的/ 约束/ ./ Cas/ -/ pi/ [/ 8/ ]/ 提出/ Phone/ 模型/ 下/ 光源/ 颜色/ 修正/ 算法/ ,/ 该/ 算法/ 通过/ 估计/ 物体/ 表面/ 反射率/ 、/ LCD/ 投影仪/ 和/ 3/ -/ CCD/ 数码相机/ 在/ 三/ 颜色/ 通道/ 光谱/ 范围/ 的/ 相关性/ 、/ 投影仪/ 的/ 非线性/ 投影/ 误差/ 的/ 方法/ 来/ 提高/ 投影/ 光源/ 颜色/ 识别/ 的/ 准确性/ ,/ 也/ 取得/ 了/ 较/ 好/ 的/ 效果/ ./ 但/ 该/ 方法/ 假设/ 物体/ 表面/ 只/ 存在/ 漫反射/ 的/ 情况/ ,/ 并未/ 考虑/ 存在/ 镜面反射/ 的/ 情况/ 下/ 光源/ 颜色/ 信息/ 的/ 修正/ ./ 针对/ 上述/ 方法/ 所/ 存在/ 的/ 不足/ ,/ 本文/ 提出/ 一种/ 基于/ 双色/ 反射/ 模型/ 的/ 投射/ 光/ 颜色/ 识别/ 算法/ ./ 该/ 算法/ 的/ 优势/ 在于/ 无需/ 事先/ 了解/ 被/ 测量/ 物体/ 表面/ 材质/ 和/ 结构/ 光/ 的/ 编码方式/ ,/ 直接/ 从/ 光度学/ 的/ 途径/ 解决/ 每个/ 像素/ 点光源/ 颜色/ 识别/ 问题/ ,/ 通过/ 对/ 数码相机/ 和/ 投影仪/ 进行/ 色度/ 标定/ ,/ 修正/ 估计/ 耦合/ 性/ 差异/ 对/ 光源/ 颜色/ 识别/ 的/ 影响/ ;/ 通过/ 对/ 物体/ 表面/ 光谱/ 反射率/ 的/ 估计/ ,/ 修正/ 物体/ 固有/ 色/ 对/ 光源/ 颜色/ 的/ 影响/ ;/ 通过/ 分离/ 镜面反射/ 成分/ 和/ 漫反射/ 成分/ 来/ 修正/ 高光/ 对/ 光源/ 颜色/ 的/ 影响/ ./ 理论/ 和/ 实验/ 证明/ 即使/ 存在/ 着/ 物体/ 的/ 固有/ 颜色/ 、/ 环境/ 自然光/ 和/ 镜面反射/ 的/ 情况/ 下/ ,/ 依然/ 能/ 准确/ 识别/ 投射/ 光/ 的/ 光源/ 颜色/ ,/ 较/ 好地解决/ 了/ 物体/ 的/ 固有/ 色/ 、/ 条件/ 色/ 和/ 光源/ 颜色/ 的/ 快速/ 区分/ 问题/ ,/ 具有/ 鲁棒性/ 高/ 、/ 计算速度/ 快/ 、/ 识别/ 精度/ 高等/ 优点/ ./ 2/ 投影/ 光/ 颜色/ 修正/ 算法/ 原理/ 物体/ 表面/ 的/ 颜色/ 是/ 由/ 投影/ 光/ 的/ 光谱/ 成分/ 、/ 物体/ 表面/ 光谱/ 反射率/ 以及/ 观察者/ 对/ 光谱/ 的/ 敏感度/ 共同/ 决定/ 的/ ,/ 如图/ 1/ 表示/ 的/ 是/ 一种/ 投射/ 光/ 颜色/ 修正/ 模型/ ./ 首先/ 根据/ 相机/ 模型/ 建立/ 投影/ 编码/ 颜色/ (/ r/ ,/ g/ ,/ b/ )/ 与/ 真实/ 投影/ (/ r/ ,/ g/ ,/ b/ )/ 之间/ 的/ 关系/ ;/ 然后/ 通过/ 光照/ 模型/ 建立/ ./ 真实/ 投影/ (/ r/ ,/ g/ ,/ b/ )/ 与/ 反射光/ (/ R/ ,/ G/ ,/ B/ )/ 之间/ 的/ 关系/ 以及/ 相机/ 模型/ 建立/ 反射光/ (/ R/ ,/ G/ ,/ B/ )/ 与/ 相机/ 读入/ 的/ 颜色/ 信息/ (/ R/ ,/ G/ ,/ B/ )/ 之间/ 的/ 关系/ ,/ 利用/ 投射/ 光/ 颜色/ 修正/ 模型/ 进行/ 修正/ ,/ 最后/ 得到/ 投射/ 光/ 的/ 编码/ Page3/ 烅/ 烆/ 颜色/ 信息/ ;/ 通过/ 该/ 模型/ 以及/ 颜色/ 修正/ 算法/ 即使/ 在/ 复杂/ 成像/ 环境/ 下/ 仍/ 能/ 准确/ 地/ 识别/ 出/ 光源/ 的/ 颜色/ ./ 2.1/ 基于/ 双色/ 反射/ 模型/ 的/ 投射/ 光/ 颜色/ 修正/ 模型/ 双色/ 反射/ 模型/ 可以/ 用来/ 描述/ 非匀/ 质/ 物体/ 表面/ 的/ 物理/ 光照/ 现象/ ,/ 光线/ 在/ 经过/ 物体/ 表面/ 反射/ 后/ 可能/ 发生/ 漫反射/ 和/ 镜面反射/ 两种/ 情况/ ,/ 反射光/ 的/ 光谱/ 成分/ 由/ 这/ 两/ 部分/ 光/ 的/ 光谱/ 成分/ 共同/ 决定/ ./ 漫反射/ 是/ 入射光/ 线/ 进入/ 物体/ 表面/ 经过/ 多次/ 折/ 反射/ 吸收/ 后/ 返回/ 物体/ 表面/ 的/ 光/ ,/ 其/ 光谱/ 成分/ 由/ 物体/ 材质/ 的/ 反射/ 特性/ 决定/ ./ 镜面反射/ 是/ 入射光/ 线/ 在/ 物体/ 表面/ 的/ 直接/ 反射/ ,/ 它/ 与/ 物体/ 表面/ 相对/ 于/ 光源/ 位置/ 的/ 朝向/ 、/ 粗糙/ 程度/ 有关/ ,/ 其/ 光谱/ 成分/ 近似于/ 光源/ 的/ 光谱/ 成分/ ./ 根据/ 双色/ 反射/ 模型/ (/ DRM/ )/ [/ 9/ ]/ ,/ 物体/ 表面/ 的/ 光照/ 现象/ 可以/ 描述/ 为/ R/ =/ md/ ∫/ λ/ Ι/ tR/ (/ λ/ )/ k/ (/ λ/ )/ d/ (/ λ/ )/ +/ ms/ ∫/ λ/ Ι/ tR/ (/ λ/ )/ k/ (/ λ/ )/ d/ (/ λ/ )/ 烄/ G/ =/ md/ ∫/ λ/ Ι/ tG/ (/ λ/ )/ k/ (/ λ/ )/ d/ (/ λ/ )/ +/ ms/ ∫/ λ/ Ι/ tG/ (/ λ/ )/ k/ (/ λ/ )/ d/ (/ λ/ )/ B/ =/ md/ ∫/ λ/ Ι/ tB/ (/ λ/ )/ k/ (/ λ/ )/ d/ (/ λ/ )/ +/ ms/ ∫/ λ/ Ι/ tB/ (/ λ/ )/ k/ (/ λ/ )/ d/ (/ λ/ 其中/ ,/ md/ 和/ ms/ 分别/ 代表/ 漫反射/ 权重/ 和/ 镜面反射/ 权重/ ,/ k/ (/ λ/ )/ 是/ 物体/ 光谱/ 反射率/ ,/ md/ ∫/ λ/ Ι/ ti/ (/ λ/ )/ k/ (/ λ/ )/ d/ (/ λ/ )/ 表示/ 第/ i/ 颜色/ 通道/ 的/ 漫反射/ 成分/ 强度/ ,/ ms/ ∫/ λ/ Ι/ ti/ (/ λ/ )/ k/ (/ λ/ )/ d/ (/ λ/ )/ 表示/ 第/ i/ 颜色/ 通道/ 的/ 镜面反射/ 成分/ 强度/ ,/ R/ ,/ G/ ,/ B/ 表示/ 三/ 颜色/ 通道/ 反射光/ 的/ 强度/ ./ 由于/ 不同/ 的/ 观察者/ 对/ 光谱/ 能量/ 的/ 感应/ 也/ 是/ 不同/ 的/ ,/ 因此/ 对/ 颜色/ 的/ 认识/ 也/ 不/ 一致/ ./ 假设/ 当前/ 数码相机/ 三/ 颜色/ 通道/ 滤色片/ 对/ 光谱/ 波长/ 的/ 敏感度/ 为/ fR/ (/ l/ )/ ,/ fG/ (/ λ/ )/ ,/ fB/ (/ λ/ )/ ,/ 投射/ 光/ 颜色/ 修正/ 模型/ 如式/ 2/ 所示/ ./ R/ 燄/ 熿/ G/ =/ 燀/ 燅/ ︸/ BD/ ∫/ fR/ (/ λ/ )/ ItR/ (/ λ/ )/ d/ (/ λ/ )/ ∫/ fR/ (/ λ/ )/ ItG/ (/ λ/ )/ d/ (/ λ/ )/ ∫/ fR/ (/ λ/ )/ ItB/ (/ λ/ )/ d/ (/ λ/ )/ 熿/ ∫/ fG/ (/ λ/ )/ ItR/ (/ λ/ )/ d/ (/ λ/ )/ ∫/ fG/ (/ λ/ )/ ItG/ (/ λ/ )/ d/ (/ λ/ )/ ∫/ fG/ (/ λ/ )/ ItB/ (/ λ/ )/ d/ (/ λ/ )/ ∫/ fB/ (/ λ/ )/ ItR/ (/ λ/ )/ d/ (/ λ/ )/ ∫/ fB/ (/ λ/ )/ ItG/ (/ λ/ )/ d/ (/ λ/ )/ ∫/ fB/ (/ λ/ )/ ItB/ (/ λ/ )/ d/ (/ λ/ 燀/ 烏/ mdkR/ +/ ms00/ 熿/ 0mdkG/ +/ ms0/ 燀/ 00mdks/ +/ m/ 烏/ 矩阵/ 犃/ 是/ 反映/ 投影仪/ 和/ 数码相机/ 之间/ 的/ 耦合/ ·/ 性/ 差异/ 的/ 关联矩阵/ ,/ 如果/ 犃/ 近似/ 等于/ 对角/ 单位矩阵/ ,/ 说明/ 投影仪/ 三/ 颜色/ 通道/ 发出/ 的/ 光谱/ 曲线/ 和/ 数码相机/ 三/ 颜色/ 通道/ 光谱/ 敏感度/ 曲线/ 一致/ ,/ 数码相机/ 三/ 颜色/ 通道/ 之间/ 的/ 窜扰/ 现象/ 比较/ 小/ ./ 矩阵/ 犘/ 是/ 反映/ 投影/ 指令/ 与/ 真实/ 投影/ 值/ 之间/ 关系/ 的/ 转换/ 矩阵/ ,/ 由/ 3/ 个/ 单调/ 非线性/ 转换/ 函数/ 组成/ ./ 矩阵/ 犓/ 是/ 反映/ 物体/ 表面/ 的/ 光照/ 物理现象/ 的/ 光照/ 模型/ 矩阵/ ,/ 反映/ 了/ 物体/ 表面/ 入射光/ 和/ 反射光/ 之间/ 的/ 关系/ ./ 矩阵/ 犃/ 和/ 矩阵/ 犘/ 都/ 可以/ 通过/ 比色/ 标定/ 实验/ 提前/ 获取/ ,/ 矩阵/ 犓/ 可以/ 根据/ 估计/ 物体/ 表面/ 反射/ 特性/ 来/ 求得/ ./ 2.2/ 修正/ 数码相机/ 和/ 投影仪/ 之间/ 耦合/ 性/ 差异/ 的/ 影响/ 由于/ LCD/ 投影仪/ 三/ 颜色/ 通道/ 的/ 光谱/ 功率/ 分布/ 和/ 3/ -/ CCD/ 数码相机/ 三/ 颜色/ 通道/ 光谱/ 敏感度/ 曲线/ 不同/ [/ 10/ ]/ ,/ 造成/ 数码相机/ 三/ 颜色/ 通道/ 的/ 窜扰/ 现象/ ,/ 本文/ 称之为/ 数码相机/ 与/ 投影仪/ 之间/ 的/ 耦合/ 性/ 差异/ ./ 对于/ 不同/ 的/ 数码相机/ 和/ 投影仪/ ,/ 它们/ 之间/ 的/ 耦合/ 性/ 差异/ 都/ 存在/ 并且/ 是/ 不同/ 的/ ,/ 对/ 色彩/ 还原/ 要求/ 高/ 的/ 场合/ ,/ 需要/ 事先/ 进行/ 色度/ 标定/ ./ 针对/ 这部分/ 差异/ ,/ 本文/ 提出/ 色度/ 标定/ 进行/ 校正/ ,/ 具体/ 实现/ 算法/ 如下/ ./ 1/ ./ 将/ 红/ (/ 255/ ,/ 0/ ,/ 0/ )/ 、/ 绿/ (/ 0/ ,/ 255/ ,/ 0/ )/ 、/ 蓝/ (/ 0/ ,/ 0/ ,/ 255/ )/ 3/ 种颜色/ 编码/ 的/ 光/ 模板/ 和/ 白色/ 光/ 模板/ 进行/ 组合/ ,/ 用/ 投影仪/ 同时/ 投射/ 到/ 色卡/ 的/ 白色/ 色块/ 上/ ,/ 对/ 各种/ 光/ 模板/ 照射/ 下/ 的/ 白色/ 色块/ 进行/ 采样/ ,/ 并/ 记录/ 采样/ 点/ 的/ 颜色/ 信息/ ;/ 2/ ./ 根据/ 白色/ 光/ 模板/ 照射/ 下/ 的/ 采样/ 点/ 颜色/ 信息/ 对红/ 、/ 绿/ 、/ 蓝/ 3/ 种颜色/ 光/ 模板/ 照射/ 下/ 的/ 采样/ 点/ 颜色/ 信息/ 进行/ 白平衡/ 处理/ ;/ 3/ ./ 对红/ 、/ 绿/ 、/ 蓝/ 3/ 种颜色/ 光/ 模板/ 照射/ 下/ 采样/ 点/ 的/ 三/ 颜色/ 通道/ 分量/ 值/ 都/ 减去/ 通道/ 最小值/ 的/ 方法/ [/ 3/ ]/ 来/ 去除/ 自然光/ 的/ 颜色/ 成分/ ,/ 并/ 做/ 归一化/ 处理/ ;/ 4/ ./ 将/ 采样/ 点/ 修正/ 后/ 的/ 颜色/ 值/ 与/ 编码/ 值/ 进行/ 对比/ ,/ 计算/ 数码相机/ 和/ 投影仪/ 之间/ 的/ 关联矩阵/ 犃/ ./ 根据/ 式/ (/ 3/ )/ ,/ 将/ 矩阵/ 犇/ 和/ 矩阵/ 犃/ 的/ 逆/ 矩阵/ 相乘/ ,/ 就/ 可以/ 修正/ 数码相机/ 和/ 投影仪/ 耦合/ 性/ 差异/ 带来/ 的/ 影响/ ./ 校正/ 后/ 的/ 投射/ 光/ 颜色/ 信息/ 可以/ 用/ 向量/ 珟/ 犇/ 表示/ :/ 式/ (/ 3/ )/ 中/ r/ ,/ g/ ,/ b/ 分别/ 表示/ 投影仪/ 每个/ 颜色/ 通道/ 的/ 真实/ 输出/ ,/ 矩阵/ 犃/ -/ 1/ 是/ 数码相机/ -/ 投影仪/ 关联矩阵/ 犃/ 的/ 逆/ 矩阵/ ,/ 矩阵/ 犇/ 是/ 数码相机/ 实际/ 获取/ 到/ 图片/ 中/ 像素点/ 的/ 颜色/ 信息/ ./ 经过/ 校正/ 后/ ,/ 数码相机/ 读入/ 的/ 光/ 模板/ 照射/ 下/ 的/ 颜色/ 值/ 更/ 接近/ 于光/ 模板/ 颜色/ 本身/ 的/ 编码/ 值/ ,/ 即使/ 投影仪/ 表达/ 的/ 颜色/ 信息/ 和/ 数码相机/ 认识/ 的/ 颜色/ 更/ 相近/ ./ 2.3/ 修正/ 物体/ 表面/ 反射/ 特性/ 对/ 光谱/ 成分/ 的/ 影响/ 物体/ 表面/ 的/ 反射/ 特性/ 是/ 决定/ 反射光/ 光谱/ 成分/ 的/ 重要/ 因素/ 之一/ ./ 投射/ 光在/ 经过/ 不同/ 物体/ 表面/ 反射/ 后/ ,/ 颜色/ 已经/ 发生/ 很大/ 变化/ ./ 基于/ 双色/ 反射/ 模型/ ,/ 物体/ 表/ Page4/ 面/ 反射光/ 成分/ 可以/ 分为/ 漫反射/ 成分/ 和/ 镜面反射/ 成分/ ./ 对于/ 漫反射/ 成分/ ,/ 它/ 取决于/ 材质/ 对/ 光谱/ 的/ 吸收率/ ;/ 对于/ 镜面反射/ 成分/ ,/ 它/ 取决于/ 物体/ 表面/ 的/ 朝向/ 和/ 粗糙/ 程度/ ./ 因此/ ,/ 要/ 识别/ 出/ 物体/ 表面/ 投射/ 光/ 的/ 颜色/ 信息/ ,/ 必须/ 先/ 得到/ 物体/ 表面/ 的/ 反射/ 特性/ ./ 根据/ 镜面反射/ 成分/ 和/ 漫反射/ 成分/ 权重/ 的/ 不同/ ,/ 以及/ 物体/ 表面/ 光谱/ 反射率/ 的/ 不同/ ,/ 入射光/ 与/ 反射光/ 两者/ 的/ 关系/ 可以/ 表示/ 如下/ 式/ 中/ ,/ Vs/ ,/ i/ (/ p/ )/ 表示/ 像素点/ p/ 第/ i/ 个/ 颜色/ 通道/ 的/ 入射光/ 线/ 强度/ ,/ Vi/ (/ p/ )/ 表示/ 像素点/ p/ 第/ i/ 个/ 颜色/ 通道/ 的/ 反射/ 光线/ 强度/ ./ 根据/ 式/ (/ 4/ )/ 分析/ 可/ 得/ :/ 由于/ 满足/ md/ +/ ms/ =/ 1/ ,/ 当/ ms/ =/ 1/ 时该/ 像素点/ 为/ 镜面反射/ 点/ ,/ 此时/ 反射光/ 的/ 颜色/ 就是/ 光源/ 的/ 颜色/ ;/ 当/ md/ =/ 1/ 时该/ 像素/ 为/ 漫反射/ 点/ ,/ 此时/ 反射光/ 的/ 颜色/ 只/ 取决于/ 材质/ 光谱/ 反射系数/ ;/ 介于/ 这/ 两者之间/ 的/ 像素点/ 包含/ 了/ 漫反射/ 成分/ 和/ 镜面反射/ 成分/ ,/ 此时/ 的/ 反射光/ 颜色/ 由/ 以上/ 3/ 个/ 参数/ 共同/ 决定/ ,/ 对于/ 部分/ 像素点/ 可以/ 分离/ 出/ 镜面反射/ 成分/ 和/ 漫反射/ 成分/ :/ 根据/ 镜面反射/ 成分/ 估计/ ms/ ,/ 根据/ 漫反射/ 成分/ 估计/ 该点/ 材质/ 对/ 光源/ 的/ 反射系数/ ,/ 理论/ 上/ 就/ 可以/ 根据/ 反射光/ 的/ 颜色/ 信息/ 恢复/ 出/ 入射光/ 的/ 颜色/ 信息/ ./ 下面/ 给出/ 物体/ 表面/ 光谱/ 反射率/ 的/ 计算方法/ 以及/ 镜面反射/ 和/ 漫反射/ 的/ 分离/ 方法/ ./ 2.3/ ./ 1/ 物体/ 表面/ 光谱/ 反射率/ 的/ 估计/ 对于/ 只/ 存在/ 漫反射/ 的/ 光照/ 物体/ 表面/ ,/ 只/ 需要/ 估计/ 出/ 物体/ 表面/ 的/ 光谱/ 反射率/ ,/ 就/ 能/ 消除/ 物体/ 表面/ 反射/ 特性/ 对/ 反射光/ 光谱/ 成分/ 的/ 影响/ ./ 物体/ 表面/ 的/ 光谱/ 反射率/ ,/ 一般/ 可以/ 通过/ 光谱/ 仪器/ 在/ 标准/ 光源/ 下/ 直接/ 测量/ 得到/ ;/ 也/ 有/ 研究者/ 提出/ 了/ 利用/ 数码相机/ 获取/ 到/ 物体/ 表面/ 的/ RGB/ 颜色/ 信息/ ,/ 然后/ 通过/ 算法/ 恢复/ 出/ 物体/ 表面/ 光谱/ 反射/ 曲线/ [/ 11/ ]/ ,/ 但/ 都/ 需要/ 复杂/ 的/ 运算/ ./ 本文/ 从/ 标准/ 色卡/ 不同/ 色块/ 的/ 光谱/ 反射/ 曲线/ 分析/ ,/ 认为/ 在/ 数码相机/ 三/ 通道/ 各自/ 的/ 响应/ 波长/ 范围/ 内/ (/ 例如/ R/ 通道/ 感应/ 波长/ 范围/ 为/ 590nm/ ~/ 700nm/ )/ ,/ 同/ 一种/ 材质/ 对/ 光谱/ 反射率/ 基本/ 是/ 相同/ 的/ ;/ 此外/ ,/ 认为/ 投影仪/ 三/ 通道/ 的/ 光谱/ 也/ 较为/ 集中/ ./ 据此/ ,/ 本文/ 提出/ 了/ 用/ 数码相机/ 三/ 颜色/ 通道/ 反射率/ 近似/ 的/ 材质/ 代替/ 对/ 不同/ 波长/ 光谱/ 的/ 反射率/ ,/ 用式/ (/ 5/ )/ 表示/ 对于/ 每个/ 颜色/ 通道/ 反射率/ ki/ 的/ 求解/ ,/ 本文/ 中/ 采用/ 以下/ 方法/ 来/ 实现/ :/ 在/ 数码相机/ 和/ 投影仪/ 耦合/ 性/ 差异/ 已知/ 的/ 情况/ 下/ ,/ 获取/ 白色/ 光/ 模板/ (/ 255/ ,/ 255/ ,/ 255/ )/ 照射/ 下/ 的/ 场景/ 图片/ ,/ 提取/ 出/ 光照/ 区域/ 部分/ 的/ 图像/ ,/ 根据/ 每个/ 像素点/ 的/ 三/ 颜色/ 通道/ 灰度/ 值/ 除以/ 编码/ 值得/ ki/ ./ 2.3/ ./ 2/ 分离/ 漫反射/ 成分/ 和/ 镜面反射/ 成分/ 对于/ 镜面反射/ 和/ 漫反射/ 成分/ 共存/ 的/ 光照/ 物体/ 表面/ ,/ 需先/ 分离/ 出/ 镜面反射/ 成分/ 和/ 漫反射/ 成分/ ./ 根据/ 漫反射/ 成分/ 估计/ 物体/ 表面/ 光谱/ 反射率/ ,/ 根据/ 镜面反射/ 成分/ 计算/ 镜面反射/ 权重/ ./ Tan/ 等/ 人/ [/ 12/ ]/ 提出/ 利用/ 一幅/ 图像/ 分离/ 镜面反射/ 成分/ 和/ 漫反射/ 成分/ 的/ 方法/ ./ 本文/ 在/ 此基础/ 上/ ,/ 对/ 漫反射/ 成分/ 和/ 镜面反射/ 成分/ 的/ 特性/ 进行/ 研究/ ,/ 归纳如下/ :/ 不/ 一定/ 相等/ ;/ 总是/ 大于/ 镜面反射/ 点/ 最大/ 色度/ ;/ 灰度/ 值/ ,/ 但/ 其/ 逆命题/ 不/ 一定/ 成立/ ;/ (/ 1/ )/ 相同/ 颜色/ 物体/ 表面/ 的/ 漫反射/ 点/ 的/ 最大/ 色度/ (/ 2/ )/ 具有/ 镜面反射/ 成分/ 的/ 像素点/ 都/ 具有/ 较/ 高/ 的/ (/ 3/ )/ 不同/ 颜色/ 物体/ 表面/ 的/ 漫反射/ 成分/ 最大/ 色度/ (/ 4/ )/ 相同/ 颜色/ 物体/ 表面/ ,/ 镜面反射/ 成分/ 权重/ 不同/ 表现/ 在/ 像素点/ 灰度/ 值/ 和/ 饱和度/ 上/ ./ 基于/ 漫反射/ 点/ 和/ 镜面反射/ 点/ 在/ 色度/ 空间/ 中/ 最大/ 色度/ 和/ 灰度/ 的/ 关系/ ,/ 根据/ 在/ 同一/ 颜色/ 的/ 物体/ 表面/ 漫反射/ 点/ 和/ 镜面反射/ 点/ 的/ 不同/ 特征/ ,/ 本文/ 提出/ 了/ 一种/ 快速/ 准确/ 分离/ 漫反射/ 分量/ 和/ 镜面反射/ 分离/ 的/ 算法/ ,/ 具体/ 计算/ 步骤/ 如下/ :/ 1/ ./ 根据/ 特性/ (/ 3/ )/ ,/ 基于/ HIS/ 颜色/ 空间/ 对/ 图像/ 中/ 每个/ 像素点/ 根据/ 色调/ 值/ H/ 简单/ 快速/ 分为/ 6/ 个/ 彩色/ 区域/ (/ 如/ 彩色/ 区域/ 1/ 的/ 色调/ 值为/ 0/ ~/ 30/ 和/ 330/ ~/ 360/ ,/ 色调/ 值/ 相隔/ 60/ 为/ 一个/ 彩色/ 区域/ )/ ,/ 如/ 最大/ 色度/ (/ 计算方法/ 如式/ (/ 6/ )/ )/ 小于/ 0.36/ 并且/ 饱和度/ 小于/ 0.15/ 的/ 像素点/ 判定/ 为/ 中性/ 区域/ ./ 统计/ 每个/ 彩色/ 区域/ 所属/ 像素点/ 的/ 平均/ 最大/ 色度/ 和/ 最小/ 通道/ 平均/ 灰度/ 值/ ;/ 2/ ./ 根据/ 特性/ (/ 2/ )/ 和/ (/ 4/ )/ ,/ 通过/ 比较/ 当前/ 像素点/ 最小/ 通道/ 灰度/ 与/ 它/ 所属/ 颜色/ 分区/ 的/ 最小/ 通道/ 均值/ ,/ 本文/ 选用/ 1.5/ 倍/ 的/ 均值/ 灰度/ 作为/ 阈值/ ,/ 如/ 大于/ 该/ 阈值/ 的/ 初步判断/ 为/ 具有/ 镜面反射/ 成分/ 的/ 像素点/ ;/ 3/ ./ 根据/ 特性/ (/ 1/ )/ ,/ 通过/ 统计/ 镜面反射/ 点/ 占/ 图像/ 总/ 像素点/ 的/ 比例/ ,/ 估计/ 场景/ 高光/ 因子/ 并/ 计算/ 每个/ 颜色/ 分区/ 的/ 最大/ 色度/ ./ 如高光/ 因子/ 小于/ 0.05/ ,/ 每个/ 颜色/ 区域/ 的/ 最大/ 色度/ 可以/ 用/ 平均/ 色度/ 代替/ ;/ 否则/ ,/ 根据/ 权衡/ 因子/ 重新/ 调整/ ,/ 计算方法/ 由式/ (/ 7/ )/ 给出/ ;/ 4/ ./ 对/ 具有/ 镜面反射/ 成分/ 的/ 像素点/ 计算/ 其/ 镜面反射/ 成分/ 和/ 漫反射/ 成分/ ./ 根据/ 当前/ 像素/ 所属/ 颜色/ 分区/ 的/ 最大/ 漫反射/ 色度/ ,/ 利用/ 式/ (/ 8/ )/ 计算/ 漫反射/ 成分/ 灰度/ 值/ ,/ 利用/ 式/ (/ 9/ )/ 计算/ 镜面反射/ 成分/ ./ 其中/ ,/ 计算/ 步骤/ 中/ 的/ 最大/ 色度/ 定义/ 由式/ (/ 6/ )/ 给出/ :/ 步/ 3/ 中/ 的/ 权衡/ 因子/ η/ 与/ 高光/ 程度/ 相关/ ,/ 对于/ 大多数/ 非/ 均匀/ 材质/ 取/ η/ =/ 0.5/ ,/ 最大/ 色度/ 计算公式/ :/ Page5/ 彩色/ 区域/ 平均/ 最大/ 色度/ ;/ μ/ 为/ 所属/ 彩色/ 区域/ 最大/ 色度/ 方差/ ./ 对于/ 标准/ 光照/ 下/ 的/ 图像/ ,/ 漫反射/ 成分/ 的/ 灰度/ 计算方法/ [/ 12/ ]/ ,/ 由式/ (/ 8/ )/ 给出/ :/ 式/ 中/ ,/ 珘/ I/ (/ p/ )/ 是/ 像素点/ p/ 最大/ 通道/ 灰度/ 值/ ;/ 珘/ δ/ (/ p/ )/ 是/ 像素点/ p/ 的/ 当前/ 色度/ ./ 像素点/ p/ 镜面反射/ 成分/ 各/ 颜色/ 通道/ 的/ 分量/ 值/ 计算公式/ 如下/ :/ 因此/ ,/ 漫反射/ 成分/ 的/ 三/ 颜色/ 通道/ 分量/ 值为/ Vi/ (/ p/ )/ -/ β/ (/ p/ )/ ./ 在/ 分离/ 出/ 镜面反射/ 成分/ 和/ 漫反射/ 成分/ 后/ ,/ 就/ 可以/ 根据/ 镜面反射/ 成分/ 灰度/ 值/ 占/ 像素/ 灰度/ 值/ 的/ 比例/ 计算/ 镜面反射/ 权重/ ,/ 根据/ 漫反射/ 成分/ 估计/ 物体/ 光谱/ 反射率/ ./ 根据/ 式/ (/ 4/ )/ ,/ 就/ 可以/ 修正/ 物体/ 表面/ 反射/ 特性/ 对/ 投射/ 光/ 颜色/ 的/ 影响/ ./ 由于/ 估计/ 的/ 最大/ 色度/ 与/ 真实/ 值/ 存在/ 一定/ 的/ 误差/ ech/ ,/ 误差/ 公式/ 可以/ 表示/ 为/ err/ =/ =/ 13/ 颜色/ 识别/ 算法/ 和/ 计算/ 流程/ 由于/ 物体/ 的/ 镜面反射/ 取决于/ 物体/ 表面/ 相对/ 于/ 光源/ 朝向/ 、/ 粗糙度/ ,/ 而/ 物体/ 的/ 光谱/ 反射率/ 也/ 是/ 物体/ 的/ 一种/ 本征/ 属性/ ,/ 取决于/ 物体/ 材质/ ,/ 这/ 两者/ 都/ 与/ 光源/ 光谱/ 成分/ 无关/ ./ 本文/ 在/ 投影仪/ 、/ 数码相机/ 、/ 测量/ 物体/ 三者/ 相对/ 位置/ 以及/ 外界/ 光照/ 环境/ 不变/ 的/ 情况/ 下/ ,/ 通过/ 增加/ 一幅/ 在/ 白色/ 光源/ 照射/ 下/ 的/ 场景/ 图像/ 估计/ 物体/ 光谱/ 反射系数/ ,/ 以及/ 判断/ 彩色/ 光源/ 照射/ 下/ 场景/ 图像/ 中/ 镜面反射/ 像素点/ 所在/ 的/ 位置/ 来/ 修正/ 投影/ 光源/ 的/ 颜色/ ./ 投影/ 光/ 颜色/ 修正/ 算法/ 步骤/ 如下/ ./ 机与/ 投影仪/ 之间/ 的/ 耦合/ 性/ 差异/ ,/ 并/ 计算/ 耦合/ 性/ 矩阵/ ;/ 1/ ./ 进行/ 数码相机/ 和/ 投影仪/ 色度/ 校正/ 处理/ ,/ 估计/ 数码/ 相/ 2/ ./ 获取/ 白色/ 光/ 光源/ 照射/ 下/ 的/ 场景/ 图片/ ,/ 提取/ 光照/ 下/ 的/ 场景/ ,/ 判断/ 该/ 像素点/ 是否是/ 镜面反射/ 点/ ./ 如果/ 是/ ,/ 分离/ 镜面反射/ 成分/ 和/ 漫反射/ 成分/ ,/ 镜面反射/ 成分/ 用于/ 计算/ 镜面反射/ 权重/ ;/ 否则/ ,/ 转入/ 步/ 3/ ;/ 3/ ./ 根据/ 像素点/ 的/ 颜色/ 信息/ ,/ 计算/ 物体/ 三/ 通道/ 光谱/ 反射率/ ;/ 4/ ./ 获取/ 彩色/ 光源/ 照射/ 下/ 的/ 场景/ 图片/ ,/ 提取/ 光照/ 下/ 的/ 场景/ ,/ 读入/ 每个/ 像素点/ 的/ RGB/ 颜色/ 信息/ ,/ 根据/ 先前/ 计算/ 出/ 的/ 三/ 通道/ 反射率/ 和/ 镜面反射/ 权重/ 修正/ 光源/ 的/ 颜色/ 信息/ ;/ 5/ ./ 通过/ 基于/ 阈值/ 和/ HSI/ 颜色/ 空间/ 的/ 分色/ 算法/ 识别/ 光源/ 颜色/ ./ 其中/ ,/ 步/ 1/ 可以/ 在/ 色度/ 校正/ 处理/ 中/ 完成/ ,/ 步/ 2/ 和步/ 3/ 都/ 在/ 额外/ 的/ 白色/ 光源/ 照射/ 下/ 的/ 场景/ 图片/ 中/ 完成/ (/ 如图/ 2/ 的/ 计算/ 流程/ )/ ,/ 步/ 4/ 是/ 颜色/ 修正/ 算法/ 的/ 核心/ (/ 如图/ 3/ 的/ 计算/ 流程/ )/ ,/ 步/ 5/ 可以/ 根据/ 不同/ 的/ 编码/ 策略/ 选用/ 不同/ 的/ 分色/ 算法/ ./ 图/ 2/ 光谱/ 反射率/ 及/ 镜面反射/ 权重/ 的/ 计算/ 流程图/ 4/ 实验/ 研究/ 为了/ 验证/ 本文/ 所/ 提出/ 的/ 光源/ 颜色/ 识别/ 以及/ 修正/ 等/ 算法/ 的/ 准确性/ ,/ 本文/ 设计/ 了/ 如下/ 实验/ 验证/ 环境/ ./ 实验/ 环境/ 由/ SonyVPL/ -/ DX15/ 投影仪/ 、/ 佳能/ PowerShotSX30/ 彩色/ 数码相机/ 、/ PC机/ 、/ 标准/ 24/ 色卡/ 以及/ PC机/ 上/ 相关/ 光源/ 颜色/ 校正/ 软件/ 所/ 组成/ ,/ 如图/ 4/ 所示/ ./ 实验/ 前/ ,/ 首先/ 将/ 标准/ 24/ 色卡/ 固定/ 在/ 投影仪/ 的/ 投影/ 屏幕/ 范围/ 内/ ,/ 然后/ 将/ 数码相机/ 的/ 图像/ 采集/ 的/ 分辨率/ 设置/ 为/ 640/ ×/ 480/ 像素/ ,/ 接着/ 为了/ 进行/ 有效/ 的/ 实验/ 数据/ 的/ 采集/ ,/ 关闭/ 数码相机/ 自动/ 白平衡/ 功能/ ;/ 在/ 控制/ 投影仪/ 的/ 输出/ 方面/ ,/ 我们/ 预先/ 准备/ 了/ 一套/ 彩色/ 光/ 模版/ 和/ 一个/ 白色/ 光/ 模板/ ./ 实验/ 中/ ,/ 在/ 相同/ 的/ 自然光/ 环境/ 下/ ,/ 分别/ 将/ PC/ 上/ 编码/ 后/ 的/ 彩色/ 光/ 模板/ 和/ 白色/ 光/ 模板/ 用/ 投影仪/ 投射/ 到/ 标准/ 色/ 24/ 卡上/ ,/ 用/ 数码相机/ 采集/ 在/ 各种/ 光/ 模板/ 照射/ 下/ 标准/ 24/ 色卡/ 的/ 图像/ ,/ PC机/ 通/ Page6/ 过/ USB/ 接口/ 读取/ 数码相机/ 中/ 所/ 采集/ 的/ 图像/ ,/ 最后/ 用/ 本文/ 所/ 开发/ 的/ 颜色/ 识别/ 软件/ 对/ 投影/ 光/ 模板/ 的/ RGB/ 颜色/ 进行/ 识别/ ./ 4.1/ 修正/ 数码相机/ 与/ 投影仪/ 之间/ 的/ 耦合/ 性/ 差异/ 数码相机/ 与/ 投影仪/ 之间/ 的/ 耦合/ 性/ 差异/ 会/ 影响/ 光源/ 颜色/ 的/ 识别/ ,/ 所以/ 首先/ 需要/ 进行/ 数码相机/ 和/ 投影仪/ 颜色/ 校正/ ./ 根据/ 本文/ 2.2/ 节所/ 提出/ 的/ 方法/ 对/ 数码相机/ 与/ 投影仪/ 之间/ 的/ 耦合/ 性/ 差异/ 进行/ 修正/ ,/ 实验/ 数据/ 如表/ 1/ 所示/ ,/ 从表中/ 数据/ (/ 斜体/ 部分/ )/ 可以/ 看出/ ,/ 除去/ 自然光/ 干扰/ 的/ 彩色/ 光/ 模版/ 颜色/ 的/ 数据/ 具有/ 较/ 好/ 的/ 重现/ 性/ ./ 光源/ 颜色/ 编码/ 红/ (/ 255/ ,/ 0/ ,/ 0/ )/ 25588792452492502558676255130/ 绿/ (/ 0/ ,/ 255/ ,/ 0/ )/ 482559818725024263255101025549/ 蓝/ (/ 0/ ,/ 0/ ,/ 255/ )/ 134175255244250250137174255080255/ 如果/ 数码相机/ 获取/ 到/ 白色/ 光/ 模板/ 照射/ 下/ 白色/ 色块/ 的/ 三/ 通道/ 颜色/ 分量/ 并/ 不/ 相等/ ,/ 需要/ 进行/ 白平衡/ 校准/ ./ 校准/ 后/ 的/ 彩色/ 光/ 模板/ RGB/ 颜色/ 信息/ 中/ ,/ 除了/ 光源/ 本身/ 的/ 颜色/ 成分/ ,/ 还/ 掺杂/ 了/ 自然光/ 颜色/ 成分/ ,/ 通常/ 是/ 白光/ ./ 一般/ 情况/ ,/ 认为/ 白色/ 色块/ 三/ 通道/ 反射率/ 相等/ ,/ 并且/ 自然光/ 三/ 颜色/ 通道/ 分量/ 值/ 也/ 相等/ ,/ 本文/ 采用/ 将/ 每个/ 颜色/ 通道/ 分量/ 值/ 都/ 减去/ 三/ 颜色/ 通道/ 最小值/ 的/ 方法/ [/ 3/ ]/ 来/ 去除/ 自然光/ 的/ 颜色/ 成分/ ,/ 并/ 做/ 归一化/ 处理/ ./ 经过/ 以上/ 处理/ 后/ ,/ 可以/ 认为/ 数码相机/ 获取/ 到/ 的/ 颜色/ 值/ 就是/ 投影仪/ 表达/ 的/ 颜色/ 值/ ,/ 与/ 光源/ 编码/ 进行/ 对比/ 就/ 可以/ 估计/ 数码相机/ 和/ 投影仪/ 的/ 耦合/ 性/ 差异/ ,/ 可以/ 用/ 耦合/ 性/ 矩阵/ 犃/ 表示/ ./ 本文/ 求得/ 的/ 矩阵/ 犃/ 如下/ :/ 犃/ =/ 将/ 矩阵/ 犃/ 代入/ 式/ (/ 3/ )/ ,/ 就/ 可以/ 校正/ 摄像机/ 和/ 投影仪/ 耦合/ 性/ 差异/ 带来/ 的/ 误差/ ,/ 经过/ 校正/ 后/ 的/ 数码相机/ 读入/ 的/ 光/ 模板/ 颜色/ 值/ 更/ 接近/ 于光/ 模板/ 颜色/ 编码/ 值/ ,/ 提高/ 了/ 光源/ 颜色/ 识别/ 的/ 准确性/ ./ 4.2/ 修正/ 物体/ 本身/ 颜色/ 造成/ 的/ 干扰/ 实验/ 中/ 分别/ 将/ 红/ 、/ 黄/ 、/ 绿/ 、/ 青/ 、/ 蓝/ 、/ 紫/ 6/ 种颜色/ 的/ 光/ 模板/ 分别/ 投射/ 到/ 标准/ 24/ 色卡/ 上/ ,/ 选取/ 标准/ 色卡/ 第/ 3/ 行/ 的/ 6/ 个/ 色块/ 上/ 的/ 像素点/ 进行/ 采样/ ,/ 用/ 基于/ 阈值/ 和/ HSI/ 空间/ 的/ 分色/ 算法/ [/ 12/ ]/ 对/ 采样/ 点/ 进行/ 颜色/ 识别/ ,/ 记录/ 颜色/ 识别/ 结果/ 如表/ 2/ 所示/ ./ 表/ 2/ 未经/ 反射率/ 修正/ 处理/ 的/ 光源/ 颜色/ 识别/ 结果/ 光源/ 颜色/ ①/ 红/ (/ 255/ ,/ 0/ ,/ 0/ )/ 红红/ 红红/ 红红/ ②/ 绿/ (/ 0/ ,/ 255/ ,/ 0/ )/ 绿绿/ 绿绿/ 绿绿/ ③/ 蓝/ (/ 0/ ,/ 0/ ,/ 255/ )/ 蓝/ 青蓝/ 青青/ \/ 蓝青/ \/ 蓝/ ④/ 黄/ (/ 255/ ,/ 255/ ,/ 0/ )/ 绿绿/ \/ 黄红黄/ 黄绿/ ⑤/ 青/ (/ 0/ ,/ 255/ ,/ 255/ )/ 青绿/ 青绿/ 青青/ ⑥/ 紫/ (/ 255/ ,/ 0/ ,/ 255/ )/ 蓝蓝/ 红红/ 紫蓝/ 由于/ 物体/ 本身/ 颜色/ 的/ 干扰/ ,/ 某些/ 色块/ 上/ 的/ 采样/ 点/ 出现/ 颜色/ 误/ 识别/ 情况/ ./ 通过/ 表/ 2/ 所示/ 的/ 结果/ 分析/ 发现/ ,/ 表格/ 中/ 的/ 斜体/ 部分/ 是/ 误/ 识别/ 的/ 情况/ ,/ 占据/ 了/ 44/ %/ ,/ 识别/ 精度/ 不高/ ./ 例如/ 黄色/ 光/ 模板/ (/ 255/ ,/ 255/ ,/ 0/ )/ 投影/ 情况/ 下/ ,/ 标准/ 24/ 色卡/ 上/ 的/ 绿色/ 的/ 色块/ 容易/ 被误/ 识别/ 为/ 绿色/ 投影/ 光/ ,/ 红色/ 的/ 色块/ 误/ 识别/ 为/ 红色/ 投影/ 光/ ;/ 青色/ 光/ 模板/ (/ 0/ ,/ 255/ ,/ 255/ )/ 投影/ 情况/ 下/ ,/ 标准/ 24/ 色卡/ 上/ 的/ 绿色/ 和/ 黄色/ 的/ 色块/ 容易/ 被误/ 识别/ 为/ 绿色/ 投影/ 光/ ;/ 紫色/ 光/ 模板/ (/ 255/ ,/ 0/ ,/ 255/ )/ 投影/ 情况/ 下/ ,/ 标准/ 24/ 色卡/ 上/ 的/ 红色/ 和/ 黄色/ 的/ 色块/ 容易/ 被误/ 识别/ 为/ 红色/ 投影/ 光/ ,/ 蓝色/ 的/ 色块/ 容易/ 被误/ 识别/ 为/ 蓝色/ 投影/ 光/ ./ 这/ 是因为/ 对于/ 光谱/ 分布/ 较广/ 的/ 混/ 色光/ ,/ 经过/ 不同/ 光谱/ 反射率/ 的/ 色块/ 表面/ 反射/ 后/ 光源/ 本身/ 的/ 光谱/ 成分/ 会/ 发生/ 某些/ 变化/ ./ 如/ 投影/ 光/ 的/ 黄色/ 光/ 模板/ 光谱/ 波长/ 分布/ 在/ 700nm/ ~/ 550nm/ 之间/ ,/ 而/ 标准/ 24/ 色卡/ 上/ 的/ 青色/ 色块/ 主要/ 反射/ 波长/ 的/ 光谱/ 在/ 550nm/ ~/ 470nm/ 之间/ ,/ 从而/ 使得/ 反射/ 光波长/ 主要/ 集中/ 在/ 550nm/ 附近/ ,/ 因此/ 容易/ 被误/ 识别/ 成/ 绿色/ 光/ 模板/ 的/ 投影/ 光/ ./ 鉴于/ 上述情况/ ,/ 本文/ 通过/ 2.3/ ./ 1/ 节所/ 介绍/ 的/ 物体/ 表面/ 光谱/ 反射率/ 的/ 估计/ 算法/ 进一步/ 对/ 光源/ 颜色/ 进行/ 修正/ ,/ 以/ 减少/ 投影/ 光源/ 颜色/ 的/ 误/ 识别率/ ;/ 实验/ 的/ 原始数据/ 和/ 实验/ 方法/ 与表/ 2/ 完全相同/ ,/ 所/ 不同/ 的/ 是/ 增加/ 了/ 反射率/ 修正/ 算法/ ,/ 表/ 3/ 记录/ 了/ 修正/ 后/ 的/ 颜色/ 识别/ 结果/ ./ 通过/ 对表/ 3/ 的/ 识别/ 结果/ 进行/ 分析/ ,/ 采用/ 三/ 通道/ 反射率/ 修正/ 后/ ,/ 投影/ 光/ 识别/ 精度/ 明显改善/ ,/ 误/ 识别率/ Page7/ 明显/ 减少/ ;/ 总体/ 来看/ ,/ 从/ 原先/ 表/ 2/ 所示/ 的/ 44/ %/ 误/ 识别率/ 降低/ 到表/ 3/ 所示/ 的/ 11/ %/ 误/ 识别率/ ./ 其中/ ,/ 黄/ 、/ 青/ 、/ 紫/ 3/ 种颜色/ 的/ 光源/ 识别/ 准确率/ 得到/ 了/ 明显/ 的/ 改善/ ,/ 但是/ 对红/ 、/ 绿/ 、/ 蓝/ 3/ 种/ 单色光/ 颜色/ 的/ 识别/ 准确率/ 没有/ 得到/ 有效/ 提高/ ./ 这是/ 由于/ 红/ 、/ 绿/ 、/ 蓝是/ 单色光/ ,/ 其/ 光谱/ 分布/ 相对/ 比较/ 集中/ ,/ 经过/ 物体/ 表面/ 反射/ 后/ ,/ 反射光/ 光谱/ 成分/ 变化/ 不/ 大/ ,/ 表现/ 为/ 具有/ 较/ 好/ 的/ 抗干扰性/ ,/ 如表/ 2/ 所示/ ./ 另一方面/ 由于/ 红/ 、/ 绿/ 、/ 蓝/ 都/ 仅/ 是/ 单色光/ ,/ 其/ 反射光/ 光谱/ 成分/ 容易/ 受到/ 外界/ 自然环境/ 光/ (/ 如/ 日光/ )/ 的/ 干扰/ ,/ 通过/ 三/ 通道/ 反射率/ 修正/ 后/ ,/ 反而/ 会/ 放大/ 自然光/ 部分/ 干扰/ 因素/ 的/ 影响/ ,/ 从而/ 造成/ 光源/ 颜色/ 误/ 识别/ ./ 例如/ 蓝色/ 色块/ 上/ 的/ 蓝色/ 光/ 模板/ 在/ 未经/ 修正/ 时/ 识别/ 正确/ ,/ 修正/ 后/ 绿色通道/ 分量/ 被/ 放大/ ,/ 因而/ 被误/ 识别/ 为/ 青色/ ./ 由于/ 篇幅/ 有限/ ,/ 这/ 类/ 分析/ 和/ 修正/ 算法/ 在/ 今后/ 的/ 研究/ 论文/ 中/ 给出/ ./ 表/ 3/ 经过/ 反射率/ 修正/ 后/ 的/ 光源/ 颜色/ 识别/ 结果/ 光源/ 颜色/ ①/ 红/ (/ 255/ ,/ 0/ ,/ 0/ )/ 红红/ 红红/ 红红/ ②/ 绿/ (/ 0/ ,/ 255/ ,/ 0/ )/ 绿绿/ 绿绿/ 绿绿/ ③/ 蓝/ (/ 0/ ,/ 0/ ,/ 255/ )/ 青青/ 蓝蓝/ 青青/ ④/ 黄/ (/ 255/ ,/ 255/ ,/ 0/ )/ 黄黄/ 黄黄/ 黄黄/ ⑤/ 青/ (/ 0/ ,/ 255/ ,/ 255/ )/ 青青/ 青青/ 青青/ ⑥/ 紫/ (/ 255/ ,/ 0/ ,/ 255/ )/ 紫/ 紫/ 紫/ 紫/ 紫/ 紫/ 4.3/ 修正/ 镜面反射/ 造成/ 的/ 误差/ 由于/ 投影/ 光源/ 是/ 具有/ 方向性/ 的/ ,/ 所以/ 数码相机/ 采集/ 到/ 的/ 图片/ 可能/ 存在/ 镜面反射/ 的/ 情况/ ./ 对于/ 存在/ 镜面反射/ 成分/ 的/ 像素点/ ,/ 首先/ 需要/ 分离/ 镜面反射/ 成分/ 和/ 漫反射/ 成分/ ./ 本文/ 采用/ 2.3/ ./ 2/ 节所/ 介绍/ 的/ 漫反射/ 成分/ 和/ 镜面反射/ 成分/ 的/ 分离/ 算法/ 进行/ 了/ 实验/ 研究/ ,/ 实验/ 结果/ 如图/ 5/ 和/ 图/ 6/ 所示/ ,/ 图/ 5/ 是/ 包含/ 有/ 镜面反射/ 成分/ 和/ 漫反射/ 成分/ 的/ 色卡/ 图像/ ,/ 图/ 6/ 是/ 将/ 镜面反射/ 成分/ 和/ 漫反射/ 成分/ 进行/ 分离/ 后/ 得到/ 的/ 镜面反射/ 成分/ 图像/ ,/ 实验/ 结果表明/ 本文/ 采用/ 的/ 算法/ 能/ 有效/ 地/ 分离/ 出/ 镜面反射/ 成分/ ,/ 适用/ 于/ 大多数/ 场景/ 的/ 高光/ 提取/ ./ 但/ 不/ 太/ 适合/ 物体/ 表面/ 存在/ 多种/ 相近/ 颜色/ 的/ 情况/ ./ 图/ 5/ 中/ 色块/ 的/ 颜色/ 区域/ 从/ 上/ 往/ 下/ 从左到右/ 分别/ 是/ 5/ 、/ 1/ 、/ 6/ 、/ 3/ 、/ 1/ 、/ 2/ ,/ 表/ 4/ 记录/ 了/ 各个/ 颜色/ 区域/ 的/ 平均/ 最大/ 色度/ 、/ 平均/ 最小/ 通道/ 灰度/ 、/ 像素点/ 个数/ 以及/ 估计/ 最大/ 色度/ ./ 而/ 高光/ 区域/ 的/ 平均/ 最大/ 色度/ 和/ 平均/ 最小/ 通道/ 灰度/ 分别/ 为/ 0.35/ 和/ 112/ ./ 颜色/ 区域/ 平均/ 最大/ 色度/ 平均/ 最小/ 10.5386/ ./ 030.581788320/ ./ 4192.060/ ./ 41883030.43109/ ./ 710.4387214050/ ./ 45109.430/ ./ 45879060.3780/ ./ 870.378661/ 本文/ 实验/ 中/ 每个/ 像素点/ 的/ 最大/ 漫反射/ 色度/ 是/ 根据/ 高光/ 因子/ 和/ 平均/ 最大/ 色度/ 估计/ 的/ ,/ 与/ 真实/ 珟/ Λ/ (/ )/ p/ 存在/ 一定/ 的/ 误差/ ech/ ,/ 根据/ 误差/ 式/ (/ 9/ )/ 可以/ 看出/ :/ (/ 1/ )/ 珟/ Λ/ (/ )/ p/ -/ 珟/ Γ/ 其值/ 越/ 小/ ,/ 误差/ 越大/ ./ 说明/ 像素点/ 最大/ 漫反射/ 色度/ 如果/ 接近/ 光源/ 的/ 色度/ ,/ 误差/ 会/ 增大/ ./ (/ 2/ )/ a/ (/ )/ p/ 是/ 漫反射/ 分量/ 值/ ./ 说明/ 漫反射/ 成分/ 的/ 灰度/ 值越/ 大/ ,/ 误差/ 也/ 会/ 增大/ ./ 另外/ ,/ 镜面反射/ 特别/ 强烈/ 的/ 物体/ 表面/ 可能/ 会/ 引起/ 数码相机/ 的/ 光/ 饱和/ 现象/ ,/ 会/ 严重/ 影响/ 颜色/ 识别/ ,/ 因此/ 在/ 不同/ 的/ 应用/ 场合/ 应该/ 注意/ 调整/ 数码相机/ 光圈/ 大小/ 和/ 曝光/ 时间/ ,/ 或者/ 采用/ 宽/ 动态/ 摄像/ 技术/ ./ 一般/ 情况/ 下/ ,/ 镜面反射/ 成分/ 接近/ 于/ 光源/ 本身/ 的/ 颜色/ ,/ 因此/ 本文/ 提出/ 一种/ 近似/ 求解/ 的/ 方法/ :/ 如果/ 判断/ 该/ 像素点/ 是/ 过/ 饱和点/ ,/ 根据/ 邻域/ 内/ 的/ 非饱和/ 点/ 进行/ 替换/ ;/ 如果/ 判断/ 该/ 像素点/ 是/ 非饱和/ 高/ 光点/ ,/ 则/ 不/ 需要/ 经过/ 物体/ 反射率/ 修正/ 进行/ 投射/ 光/ 颜色/ 识别/ ./ 4.4/ 光源/ 颜色/ 识别/ 本文/ 选取/ 了/ 标准/ 色卡/ 中/ 第/ 3/ 行/ 的/ 6/ 种/ 具有/ 不同/ 光谱/ 反射率/ 的/ 色块/ 作为/ 物体/ 表面/ ,/ 分别/ 对红/ (/ 255/ ,/ 0/ ,/ 0/ )/ 、/ 绿/ (/ 0/ ,/ 255/ ,/ 0/ )/ 、/ 蓝/ (/ 0/ ,/ 0/ ,/ 255/ )/ 、/ 黄/ (/ 255/ ,/ 255/ ,/ 0/ )/ 、/ 青/ (/ 0/ ,/ 255/ ,/ 255/ )/ 、/ 紫/ (/ 255/ ,/ 0/ ,/ 255/ )/ 以上/ 6/ 种/ 编码/ 的/ 光源/ 进行/ 颜色/ 识别/ ./ 并/ 将/ 本文/ 算法/ 修正/ 后/ 的/ 实验/ 结果/ 与/ 直接/ 在/ HIS/ 空间/ 分色/ 算法/ 结果/ 进行/ 比较/ ,/ 实验/ 结果/ Page8/ 如图/ 7/ 、/ 图/ 8/ 所示/ ,/ 图/ 7/ 是/ 直接/ 在/ HIS/ 空间/ 分色/ 算法/ 的/ 实验/ 结果/ ,/ 图/ 8/ 是/ 本文/ 的/ 实验/ 结果/ ./ 5/ 小结/ 与/ 展望/ 要/ 提高/ 计算机/ 视觉/ 的/ 鲁棒性/ ,/ 光/ 、/ 色/ 与/ 计算机/ 视觉/ 的/ 关系/ 是/ 绕/ 不/ 过去/ 的/ 瓶颈/ ./ 镜面反射/ 问题/ 已经/ 成为/ 计算机/ 视觉/ 应用/ 中/ 的/ 一个/ 障碍/ ,/ 主要/ 问题/ 是/ 在/ 光滑/ 物体/ 表面/ 上/ 的/ 镜面反射/ 通常/ 会/ 产生/ 不/ 期望/ 的/ 高亮度/ 区域/ 同时/ 改变/ 了/ 在/ 成像/ 平面/ 上/ 像素/ 颜色/ 的/ 属性/ ,/ 给/ 对象/ 识别/ 过程/ 带来/ 了/ 干扰/ ./ 另一方面/ ,/ 快速/ 准确/ 地区/ 分/ 物体/ 的/ 固有/ 色/ 、/ 条件/ 色/ 和/ 光源/ 颜色/ 也/ 是/ 计算机/ 视觉/ 中/ 的/ 一个/ 前沿/ 课题/ ./ 本文/ 研究/ 了/ 彩色/ 结构/ 光在/ 复杂/ 环境/ 中/ 的/ 颜色/ 识别/ ,/ 从/ 光度学/ 上/ 提出/ 了/ 投射/ 光/ 的/ 颜色/ 修正/ 模型/ ,/ 涉及/ 物体/ 表面/ 光谱/ 反射率/ 的/ 估计/ 、/ 镜面反射/ 成分/ 和/ 漫反射/ 成分/ 的/ 分离/ 、/ 数码相机/ 和/ 投影仪/ 耦合/ 性/ 差异/ 的/ 估计/ ./ 在/ 此基础/ 上/ ,/ 针对/ 干扰/ 投射/ 光/ 颜色/ 识别/ 的/ 各种/ 情况/ ,/ 提出/ 了/ 相关/ 的/ 颜色/ 修正/ 算法/ ./ 各种/ 实验/ 结果表明/ 本文/ 提出/ 的/ 投射/ 光/ 颜色/ 识别/ 算法/ 对于/ 双色/ 反射/ 模型/ 条件/ 下/ 的/ 彩色/ 结构/ 光/ 颜色/ 识别/ 具有/ 鲁棒性/ 高/ 、/ 计算速度/ 快/ 、/ 识别/ 准确度/ 高等/ 优点/ ./ 今后/ 的/ 研究/ 工作/ 将/ 依托/ 本项/ 研究成果/ 为/ 实时性/ 要求/ 高/ 、/ 应用环境/ 复杂/ 的/ 行走/ 机器人/ 、/ 无人/ 车/ 等/ 应用/ 对象/ 提供/ 最新/ 的/ 智能/ 视觉/ 解决方案/ ./ 致谢/ 本文/ 工作/ 得到/ 了/ 实验室/ 其他/ 同仁/ 的/ 帮助/ ,/ 在/ 此/ 表示感谢/ !/ 

