Page1/ 互联网/ 自治/ 域/ 商业/ 关系/ 推测/ 算法/ 范琪琳/ 尹浩林/ 闯/ 董加卿/ 宋伟/ (/ 清华大学/ 计算机科学/ 与/ 技术/ 系/ 北京/ 100084/ )/ (/ 清华大学/ 信息科学/ 与/ 技术/ 国家/ 实验室/ (/ 筹/ )/ 北京/ 100084/ )/ 摘要/ 随着/ 互联网/ 进入/ 商业化/ 发展/ 阶段/ ,/ 不同/ 管理机构/ 的/ 自治/ 域/ 通过/ 商业/ 合作/ 关系/ 来/ 共同/ 路由/ 互联网/ 中/ 的/ 流量/ ./ 从/ 工程/ 上/ 来看/ ,/ 获取/ 全面/ 准确/ 的/ 自治/ 域/ 商业/ 关系/ 可以/ 指导/ 有效/ 的/ 流量/ 工程/ 管理/ 和/ 资源/ 部署/ 从而/ 均衡/ 网络/ 负载/ ,/ 提高/ 服务/ 可靠性/ ,/ 减少/ 网络/ 运营/ 成本/ ;/ 从/ 理论/ 上/ 来看/ ,/ 获取/ 全面/ 准确/ 的/ 自治/ 域/ 关系/ 可以/ 分析/ 互联网/ 的/ 演进/ 模型/ ,/ 指导/ 设计/ 新/ 的/ 路由/ 协议/ 和/ 互联网/ 架构/ ./ 虽然/ 互联网/ 路由/ 注册/ 中心/ 会/ 记录/ 自治/ 域/ 之间/ 的/ 商业/ 关系/ ,/ 但是/ 由于/ 商业/ 敏感/ 以及/ 注册/ 中心/ 缺乏/ 维护/ 更新/ ,/ 公开/ 的/ 自治/ 域/ 商业/ 关系/ 并/ 不/ 全面/ 准确/ ,/ 因而/ 通过/ 推测/ 算法/ 获得/ 更加/ 全面/ 准确/ 的/ 自治/ 域/ 商业/ 关系/ 成为/ 了/ 学术界/ 与/ 产业界/ 关注/ 的/ 热点/ ./ 文中/ 系统地/ 综述/ 了/ 现有/ 的/ 互联网/ 自治/ 域/ 商业/ 关系/ 推测/ 算法/ 及其/ 存在/ 的/ 问题/ ,/ 并/ 对/ 该/ 领域/ 有待/ 进一步/ 研究/ 的/ 问题/ 和/ 可能/ 的/ 解决方案/ 给出/ 了/ 一些/ 建议/ ./ 关键词/ 自治/ 域/ 商业/ 关系/ ;/ 推测/ 算法/ ;/ 有效/ 路径/ ;/ 路由/ 策略/ ;/ 互联网/ 1/ 引言/ 自从/ 20/ 世纪/ 90/ 年代/ 互联网/ 商业化/ 以来/ ,/ 互联网/ 规模/ 飞速发展/ ,/ 进入/ 到/ 了/ 一个/ 新/ 时期/ ./ 不同/ 管理机构/ (/ 网络/ 服务提供商/ 、/ 公司/ 、/ 大学/ 、/ 内容/ 提供商/ 等/ )/ 的/ 自治/ 域/ 系统/ (/ AutonomousSystem/ ,/ AS/ )/ 通过/ 商业/ 合作/ 关系/ 来/ 共同/ 管理/ 互联网/ 中/ 的/ 流量/ ./ 边际/ 网关/ 协议/ (/ BorderGatewayProtocol/ ,/ BGP/ )/ 作为/ 自治/ 域/ 之间/ 的/ 路由/ 协议/ ,/ 允许/ 每个/ AS/ 独立/ 地/ 配置/ 路由/ 策略/ 来/ 选择/ 路由/ 和/ 宣告/ 路由/ 信息/ ./ AS/ 作为/ 互联网/ 的/ 重要/ 组成部分/ ,/ 研究/ 人员/ 认为/ 不论/ 未来/ 网络/ 的/ 体系/ 架构/ 如何/ 变化/ ,/ 受/ 政治经济/ 因素/ 影响/ 形成/ 的/ AS/ 不会/ 消失/ [/ 1/ ]/ ,/ 因此/ 研究/ AS/ 之间/ 的/ 商业/ 关系/ 非常/ 必要/ ./ 早期/ 的/ Internet/ 拓扑/ 研究/ 都/ 是/ 将/ Internet/ 抽象/ 为/ 以/ AS/ 为点/ ,/ 域/ 间连接/ 关系/ 为边/ 的/ 无/ 向/ 图/ ,/ 进而/ 研究/ 网络拓扑/ 特性/ ,/ 包括/ 幂律/ 分布/ 特性/ [/ 2/ ]/ 、/ 鲁棒且/ 脆弱性/ [/ 3/ ]/ 、/ “/ 小/ 世界/ ”/ 特性/ [/ 4/ ]/ 等/ ./ 但是/ AS/ 之间/ 的/ 连接/ 关系/ 并/ 不能/ 表示/ AS/ 之间/ 的/ 实际/ 路由/ ,/ 比如/ 自治/ 域/ A/ 拥有/ 两个/ 提供者/ (/ Provider/ )/ B/ 和/ C/ ,/ 虽然/ A/ 和/ B/ 相互/ 可/ 达/ ,/ A/ 和/ C/ 也/ 相互/ 可/ 达/ ,/ 但是/ A/ 的/ 路由/ 策略/ 却/ 不/ 允许/ B/ 经由/ A/ 到达/ C/ ./ 自治/ 域/ 商业/ 关系/ 的/ 引入/ 会/ 对/ 互联网/ 的/ 路由/ 策略/ 、/ 服务质量/ 保证/ (/ QoS/ )/ 和/ 流量/ 工程/ 等/ 产生/ 全局/ 的/ 影响/ ,/ 因而/ 近些年/ ,/ 各/ 领域/ 的/ 研究者/ 都/ 开始/ 关注/ AS/ 之间/ 的/ 商业/ 关系/ [/ 5/ -/ 17/ ]/ ./ 从/ 工业界/ 来看/ ,/ 获取/ 全面/ 准确/ 的/ 自治/ 域/ 关系/ 可以/ 指导/ 有效/ 的/ 流量/ 工程/ 管理/ 和/ 资源/ 部署/ ,/ 从而/ 均衡/ 网络/ 负载/ ,/ 提高/ 服务/ 可靠性/ ,/ 减少/ 网络/ 运营/ 成本/ ./ 比如/ 内容/ 分发/ 网络/ 服务提供商/ 在/ 拥有/ 了/ 自治/ 域/ 关系/ 的/ 全局/ 视图/ 之后/ 可以/ 更好/ 地/ 选择/ 边缘/ 服务器/ 的/ 位置/ 以及/ 流量/ 计费/ ./ 从/ 学术界/ 来看/ ,/ 获取/ 全面/ 准确/ 的/ 自治/ 域/ 关系/ 可以/ 分析/ Internet/ 的/ 演进/ 模型/ [/ 18/ ]/ ,/ 指导/ 设计/ 新/ 的/ 路由/ 协议/ 和/ 互联网/ 架构/ [/ 19/ ]/ ./ 虽然/ 互联网/ 路由/ 注册/ 中心/ (/ InternetRoutingRegistry/ ,/ IRR/ )/ 是/ 一个/ 全球/ 维护/ 注册/ 自治/ 域/ 关系/ 的/ 机构/ ,/ 但是/ 一方面/ 许多/ 自治/ 域/ 由于/ 商业/ 敏感/ 的/ 因素/ 并/ 不/ 愿意/ 公布/ 其/ 全部/ 的/ 商业/ 关系/ ;/ 另一方面/ ,/ 注册/ 信息/ 缺乏/ 更新/ 和/ 维护/ ./ 所以/ ,/ IRR/ 中/ 公共/ 的/ 自治/ 域/ 关系/ 并/ 不/ 全面/ 和/ 准确/ ./ 由此/ ,/ 自治/ 域/ 关系/ 的/ 推测/ 算法/ 应运而生/ ./ 目前/ 自治/ 域/ 关系/ 的/ 推测/ 算法/ 已经/ 取得/ 了/ 很多/ 有/ 意义/ 的/ 研究成果/ ,/ 但是/ 目前/ 还/ 缺乏/ 相关/ 文献/ 系统地/ 归纳/ 和/ 总结/ 其/ 发展/ 现状/ 和/ 趋势/ ./ 本文/ 在/ 现有/ 文献/ 的/ 基础/ 上/ ,/ 从/ 自治/ 域/ 商业/ 关系/ 分类/ 及/ 链路/ 选择/ 入手/ ,/ 归纳/ 了/ 获取/ 源/ 数据/ 集/ 和/ 验证/ 数据/ 集/ 的/ 关键技术/ ,/ 对/ 自治/ 域/ 商业/ 关系/ 推测/ 算法/ 进行/ 了/ 总结/ 和/ 分析/ ,/ 阐述/ 了/ 各种/ 推测/ 算法/ 的/ 性能/ 及/ 有待/ 解决/ 的/ 问题/ ,/ 并/ 指出/ 该/ 领域/ 需要/ 进一步/ 探索/ 的/ 方向/ 及/ 问题/ ./ 2/ 自治/ 域/ 商业/ 关系/ 和/ 链路/ 选择/ 2.1/ 自治/ 域/ 商业/ 关系/ 分类/ 互联网/ 主要/ 由/ 3/ 类/ 自治/ 域/ 构成/ :/ 过渡/ (/ Transit/ )/ 自治/ 域/ 、/ 末端/ (/ Stub/ )/ 自治/ 域/ 和/ 多/ 宿主/ (/ Multi/ -/ homed/ )/ 自治/ 域/ ./ 过渡/ 自治/ 域/ 为/ 相邻/ 的/ 域/ 之间/ 提供/ 穿越/ 服务/ ;/ 末端/ 自治/ 域/ 只/ 与/ 一个/ 自治/ 域/ 相连/ ,/ 需要/ 依赖/ 过渡/ 自治/ 域/ 访问/ 其他/ 自治/ 域/ ;/ 多/ 宿主/ 自治/ 域/ 与/ 多个/ 自治/ 域/ 相连/ ,/ 可以/ 实现/ 备份/ 路由/ ./ 自治/ 域/ 之间/ 的/ 商业/ 关系/ 可以/ 主要/ 划分/ 为/ 3/ 类/ [/ 5/ ]/ :/ P2C/ (/ 提供者/ -/ 客户/ ,/ Provider/ -/ to/ -/ Customer/ )/ 、/ P2P/ (/ 对等体/ -/ 对等体/ ,/ Peering/ -/ to/ -/ Peering/ )/ 和/ S2S/ (/ 同胞/ -/ 同胞/ ,/ Sibling/ -/ to/ -/ Sibling/ )/ ./ (/ 1/ )/ P2C/ 关系/ ./ 提供者/ (/ Provider/ )/ 向/ 客户/ (/ Cus/ -/ tomer/ )/ 提供/ 互联网/ 穿越/ 服务/ ,/ 即/ 允许/ 客户/ 通过/ 它/ 到达/ 其他/ 网络/ 并/ 根据/ 流量/ 向/ Customer/ 收费/ ./ (/ 2/ )/ P2P/ 关系/ ./ 两个/ 自治/ 域/ 及其/ 它们/ 的/ 客户/ 之间/ 相互/ 可/ 达/ ,/ 并且/ Peer/ 连接/ 所/ 产生/ 的/ 流量/ 也/ 由/ 两个/ AS/ 共同/ 承担/ [/ 20/ ]/ ./ (/ 3/ )/ S2S/ 关系/ ./ 两个/ 自治/ 域同/ 属于/ 一个/ 管理机构/ ,/ 这种/ 关系/ 通常/ 产生/ 于/ 兼并/ 与/ 收购/ ./ 它们/ 及其/ 它们/ 的/ 提供者/ 、/ 客户/ 、/ 对等体/ 之间/ 相互/ 可/ 达/ 并且/ 不/ 计费/ ./ 图/ 1/ 展示/ 了/ 互联网/ 自治/ 域/ 商业/ 关系/ 的/ 层次结构/ ,/ 末端/ 自治/ 域/ AS6/ 通过/ P2C/ 关系/ 连接/ 到/ 穿越/ 自治/ 域/ AS3/ 来/ 获得/ 穿越/ 服务/ ./ 自治/ 域/ AS3/ 和/ 自治/ 域/ AS4/ 同/ 属于/ AS1/ ,/ 它们/ 是/ S2S/ 关系/ ./ 自治/ 域/ AS1/ 和/ 自治/ 域/ AS2/ 之间/ 可以/ 建立/ 对等关系/ 以/ 提供/ 相互/ 穿越/ 服务/ ./ AS8/ 是/ 多/ 宿主/ 自治/ 域/ ,/ 有/ 两个/ 提供者/ AS4/ 和/ AS5/ ./ 2.2/ 路由/ 信息/ 选择/ 导出/ 原则/ 不同/ 的/ 自治/ 域/ 商业/ 关系/ 决定/ 了/ 每个/ 自治/ 域/ 路由/ 信息/ 通过/ BGP/ 会话/ 向/ 其/ 邻居/ 自治/ 域/ 的/ 选择/ 导出/ 原/ Page3/ 则/ (/ SelectiveExportRule/ )/ [/ 21/ ]/ (/ 如表/ 1/ 所示/ )/ ./ (/ 1/ )/ 向/ 提供者/ (/ 或/ 对/ 等体/ )/ 的/ 导出/ 原则/ ./ 自治/ 域会/ 将/ 自己/ 及其/ 客户/ 的/ 路由/ 信息/ 导出/ 给/ 提供者/ (/ 或/ 对/ 等体/ )/ ,/ 但/ 不会/ 将/ 自己/ 从/ 某个/ 提供者/ 或者/ 对等体/ 学习/ 到/ 的/ 路由/ 信息/ 导出/ 给/ 其他/ 提供者/ (/ 或/ 对/ 等体/ )/ ./ 自己/ 学习/ 到/ 的/ 所有/ 路由/ 导出/ 给/ 客户/ (/ 或/ 同胞/ )/ ./ (/ 2/ )/ 向/ 客户/ (/ 或/ 同胞/ )/ 的/ 导出/ 原则/ ./ 自治/ 域会/ 将/ ProviderPeerSibling/ √/ √/ √/ Customer/ √/ √/ √/ 向/ 提供者/ 和/ 对/ 等体/ 导出规则/ 是/ 一样/ 的/ ,/ 向/ 客户/ 和/ 同胞/ 导出规则/ 也/ 是/ 一样/ 的/ ,/ 但是/ 提供者/ 与/ 对/ 等体/ (/ 客户/ 与/ 同胞/ )/ 的/ 唯一/ 区别/ 在于/ 非/ 对称性/ ./ 商业/ 利益驱动/ 了/ 自治/ 域/ 之间/ 商业/ 关系/ 的/ 发展/ ./ 如果/ 一个/ 客户/ 自治/ 域/ 为/ 一个/ 提供者/ 路由/ 数据/ 至/ 另/ 一个/ 提供者/ ,/ 按/ 流量/ 计算/ 它/ 需要/ 支付/ 双倍/ 的/ 费用/ ,/ 因此/ 客户/ 自治/ 域/ 不/ 愿意/ 将/ 自己/ 从/ 某个/ 提供者/ 学习/ 到/ 的/ 路由/ 导出/ 给/ 其他/ 提供者/ ./ 而/ 提供者/ 自治/ 域/ 为/ 客户/ 路由/ 可以/ 收取/ 穿越/ 服务/ 的/ 费用/ ,/ 因此/ 提供者/ 自治/ 域/ 愿意/ 将/ 自己/ 学习/ 到/ 的/ 所有/ 路由/ 提供/ 给/ 客户/ ./ 2.3/ AS/ 路径/ 规则/ 选择/ 导出规则/ 使得/ 路由表/ 中/ 的/ AS/ 路径/ 存在/ 一定/ 的/ 模式/ 规则/ ,/ Gao/ [/ 5/ ]/ 将/ 其/ 归纳/ 为/ 无/ 低谷/ (/ Valley/ -/ Free/ )/ 原则/ :/ Valley/ -/ Free/ 原则/ ./ 一条/ AS/ 路径/ (/ u1/ ,/ u2/ ,/ …/ ,/ un/ )/ 是/ Valley/ -/ Free/ 的/ 当且/ 仅/ 当/ 以下/ 两个/ 条件/ 同时/ 满足/ :/ (/ 1/ )/ 如果/ (/ ui/ ,/ ui/ +/ 1/ )/ 是/ P2C/ 关系/ ,/ 那么/ 对于/ i/ </ j/ </ n/ ,/ (/ uj/ ,/ uj/ +/ 1/ )/ 只能/ 是/ P2C/ 或者/ S2S/ 关系/ ./ (/ 2/ )/ 如果/ (/ ui/ ,/ ui/ +/ 1/ )/ 是/ P2P/ 关系/ ,/ 那么/ 对于/ i/ </ j/ </ n/ ,/ (/ uj/ ,/ uj/ +/ 1/ )/ 只能/ 是/ P2C/ 或者/ S2S/ 关系/ ./ 符合/ Valley/ -/ Free/ 原则/ 的/ 路径/ 也/ 被/ 称之为/ 有效/ 路径/ ,/ 相反/ 的/ ,/ 不/ 符合/ Valley/ -/ Free/ 原则/ 的/ 路径/ 则/ 被/ 称之为/ 无效/ 路径/ ./ 有效/ 路径/ 的/ 形式化/ 描述/ 如下/ :/ 有效/ 路径/ ./ 令/ →/ 表示/ C2P/ 关系/ ,/ ←/ 表示/ P2C/ 关系/ ,/ -/ 表示/ P2P/ 关系/ ,/ / 表示/ S2S/ 关系/ ,/ 则/ 一条/ AS/ 路径/ 是/ 有效/ 的/ 当且/ 仅/ 当/ 它/ 可以/ 表示/ 为/ 如下/ 正则表达式/ :/ {/ →/ ,/ / }/ / {/ ←/ ,/ / }/ / ∪/ {/ →/ ,/ / }/ / -/ {/ ←/ ,/ / }/ / ./ 如图/ 2/ 所示/ ,/ AS6/ 会/ 将/ 自己/ 的/ 所有/ 路由/ 信息/ 宣告/ 给/ 提供者/ AS5/ ,/ 同时/ AS5/ 也/ 为/ AS4/ 提供/ 穿越/ 服务/ ,/ 所以/ AS4/ →/ AS5/ →/ AS6/ 是/ 一条/ 有效/ 路径/ ./ AS4/ 不会/ 将/ 从/ 提供者/ AS5/ 学习/ 到/ 的/ 路由/ 信息/ 宣告/ 给/ 提供者/ AS3/ ,/ AS3/ →/ AS4/ →/ AS5/ 构成/ 了/ 路径/ 上/ 的/ 低谷/ ,/ 所以/ AS1/ →/ AS2/ →/ AS3/ →/ AS4/ →/ AS5/ →/ AS6/ 是/ 一条/ 无效/ 路径/ ./ 3/ 推测/ 算法/ 数据/ 集/ 3.1/ 源/ 数据/ 集/ 自治/ 域/ 关系/ 源/ 数据/ 集是/ 自治/ 域/ 商业/ 关系/ 推测/ 算法/ 的/ 基础/ ,/ 因此/ 数据/ 采集/ 方法/ 是/ 首先/ 需要/ 考虑/ 的/ 问题/ ./ 根据/ 数据/ 集/ 的/ 来源/ 可以/ 划分/ 为/ 以下/ 3/ 类/ :/ BGP/ 路由表/ 和/ 更新/ 、/ 互联网/ 交换/ 点/ 数据库/ 、/ 互联网/ 路由/ 注册/ 中心/ 数据库/ ./ (/ 1/ )/ BGP/ 路由表/ 和/ 更新/ ./ BGP/ 路由表/ 和/ 更新/ 根据/ 获取/ 方法/ 的/ 不同/ ,/ 可以/ 分为/ 以下/ 3/ 类/ :/ ①/ 路由表/ 快照/ ./ 获取/ BGP/ 路由表/ 最/ 直接/ 的/ 方法/ 是/ 登录/ 到/ 自治/ 域/ 的/ 边界/ 路由器/ 上/ ,/ 使用/ 路由器/ 操作系统/ 所/ 提供/ 的/ show/ 或者/ dump/ 命令/ 获得/ BGP/ 路由表/ 快照/ (/ snapshot/ )/ ,/ 由于/ 这种/ 方法/ 不仅/ 可以/ 获得/ 该/ 边界/ 路由器/ 的/ 最优/ 路由/ 和/ 次优/ 路由/ ,/ 而且/ 还/ 可以/ 获得/ 各条/ 路由/ 的/ 全部/ 路径/ 属性/ ,/ 因此/ 可以/ 获得/ 最为/ 全面/ 的/ 数据/ ./ 但/ 由于/ 需要/ 登录/ 到/ 自治/ 域/ 的/ 不同/ 边界/ 路由器/ 上/ ,/ 该/ 方法/ 也/ 是/ 操作/ 最为/ 繁琐/ 和/ 权限/ 要求/ 最高/ 的/ 数据/ 采集/ 方法/ ./ ②/ 路由器/ 对/ 等/ 监听/ ./ 这种/ 方法/ 在/ 专门/ 的/ 路由/ 信息/ 采集/ 设备/ 上/ 运行/ BGP/ 协议/ ,/ 与/ 要/ 监测/ 的/ 自治/ 域/ 边界/ 路由器/ 建立/ 对等关系/ ,/ 被/ 监测/ 路由器/ 会/ 把/ 路由/ 信息/ 采集/ 设备/ 看成/ 它/ 的/ 邻居/ ,/ 发送/ BGP/ 数据/ 更新/ 报文/ 和/ BGP/ 路由表/ 信息/ ./ 由于/ 这种/ 方法/ 较为/ 灵活/ 方便/ ,/ 因此/ 是/ 路由/ 信息/ 采集/ 的/ 主要/ 方法/ ./ 但/ 由于/ BGP/ 只会/ 宣告/ 最优/ 路由/ ,/ 与/ 路由表/ 快照/ 方法/ 相比/ ,/ 这种/ 方法/ 只能/ 获得/ 对/ 等/ 边界/ 路由器/ 的/ 最优/ 路由/ 信息/ ./ RouteView/ ①/ 和/ RIPE/ -/ RIS/ ②/ 项目/ 都/ 提供/ 了/ 路/ ①/ ②/ Page4/ 由表/ 快照/ 和/ 路由器/ 对/ 等/ 监听/ 的/ 实时/ 数据/ 查询/ ./ ③/ 公开/ 列表/ 查询/ ./ 部分/ ISP/ 或者/ 网络管理/ 机构/ 提供/ LookingGlass/ 服务/ ,/ 它/ 允许/ 外部/ 用户/ 通过/ 通用/ 网关/ 界面/ (/ CommonGatewayInterface/ ,/ CGI/ )/ 的/ Web/ 形式/ ,/ 查询/ 路由表/ 信息/ 和/ 其它/ 路由/ 设置/ ./ 路由/ 服务器/ (/ RouteServer/ )/ 通过/ 与/ 连接/ 到/ 互联网/ 交换/ 点/ (/ InterneteXchangePoints/ 或者/ NetworkAccessPoints/ )/ 上/ 的/ ISP/ 路由器/ 交换/ 路由/ 信息/ ,/ 保存/ 每个/ ISP/ 的/ 单独/ 路由/ 策略/ 要求/ ./ 目前/ Internet/ 上/ 有/ 一些/ 公开/ 的/ RouteServer/ ①/ 和/ LookingGlass/ ②/ 列表/ ./ (/ 2/ )/ 互联网/ 交换/ 点/ (/ InterneteXchangePoint/ ,/ IXP/ )/ 是/ 一个/ 物理/ 基础架构/ ,/ 它/ 允许/ 不同/ 的/ 互联网/ 服务提供商/ 直接/ 地/ 互联/ ,/ 通过/ 交换/ 来/ 减少/ 对/ 各自/ 上行/ 提供商/ 的/ 依赖/ ,/ 进而/ 减少/ ISP/ 的/ 运营/ 成本/ ,/ 降低/ 用户/ 的/ 互联网/ 访问/ 费用/ ./ 互联网/ 交换/ 点/ 为了/ 吸引/ 更/ 多/ 的/ 服务提供商/ 互联互通/ ,/ 会/ 将/ 其/ 基本/ 信息/ (/ 如/ 位置/ 、/ 费用/ 、/ 互联/ 的/ 自治/ 域/ 列表/ 等/ )/ 公布/ ./ PacketClearingHouse/ (/ PCH/ )/ ③/ ,/ Peeringdb/ ④/ 和/ Euro/ -/ IX/ ⑤/ 项目/ 收集/ 了/ 各/ IXP/ 的/ 基本/ 信息/ 并/ 提供/ 公开/ 数据库/ 查询/ ./ (/ 3/ )/ 互联网/ 路由/ 注册/ 中心/ (/ InternetRoutingRegistry/ ,/ IRR/ )/ ⑥/ 是/ 为了/ 维护/ 互联网/ 路由/ 的/ 稳定性/ 、/ 一致性/ 和/ 安全性/ 而/ 由/ 各/ 网络/ 注册/ 单位/ 自发/ 组织/ 起来/ 的/ 机构/ ./ 每个/ 网络/ 注册/ 单位/ (/ 如/ RIPE/ 、/ ARIN/ )/ 都/ 可以/ 发布/ 路由/ 策略/ 和/ 公告/ ./ IRR/ 中/ 的/ 路由/ 策略/ 通过/ 路由/ 策略/ 规范/ 语言/ (/ RoutingPolicySpecificationLanguage/ ,/ RPSL/ )/ 来/ 描述/ ./ IRR/ 是/ 获得/ 自治/ 域/ 商业/ 关系/ 最/ 快捷/ 的/ 方式/ ,/ 但是/ 一方面/ 许多/ 自治/ 域/ 不/ 愿意/ 公布/ 其/ 商业/ 关系/ ,/ IRR/ 数据库/ 信息/ 并/ 不/ 全面/ ;/ 另一方面/ 分布式/ 的/ IRR/ 数据库/ 由于/ 缺乏/ 更新/ 和/ 维护/ 存在/ 信息/ 冲突/ 以及/ 过时/ 问题/ ./ 3.2/ 验证/ 数据/ 集/ 关于/ 自治/ 域/ 商业/ 关系/ 推测/ 结果/ 的/ 验证/ ,/ 目前/ 仍/ 没有/ 公开/ 的/ 准确/ 数据/ 可/ 直接/ 用于/ 推测/ 结果/ 验证/ ./ 在/ 许多/ 相关/ 文献/ 中/ ,/ 研究者/ 都/ 是/ 使用/ 从/ 各种/ 非/ 公开/ 渠道/ 获得/ 的/ 网络/ 服务提供商/ 内部/ 自治/ 域/ 商业/ 关系数据/ 来/ 验证/ 其/ 推测/ 结果/ ./ 例如/ 文献/ [/ 5/ ]/ 中/ 使用/ 了/ AT&T/ 与其/ 邻居/ AS/ 的/ 商业/ 关系数据/ 来/ 验证/ 其/ 推测/ 结果/ ,/ 该/ 数据/ 是/ 直接/ 从/ AT&T/ 内部/ 获得/ 的/ ,/ 并/ 不/ 公开/ ;/ 文献/ [/ 9/ ]/ 中/ 使用/ 的/ 验证/ 数据/ 则/ 是/ 通过/ 调研/ 的/ 形式/ 从/ 各个/ 网络/ 提供商/ 处/ 获得/ 的/ ./ Xia/ 等/ 人/ [/ 14/ ]/ 提出/ 了/ 一种/ 验证/ AS/ 商业/ 关系/ 推测/ 结果/ 的/ 方法/ :/ 从/ IRR/ 数据库/ 中/ 的/ BGP/ 团体/ (/ Community/ )/ 属性/ [/ 22/ ]/ 、/ AS/ -/ SET/ 对象/ 以及/ 显式/ 路由/ 策略/ 描述/ 得到/ 部分/ 准确/ 的/ 自治/ 域/ 商业/ 关系/ ./ 但是/ 因为/ BGP/ 团体/ 、/ 路由/ 策略/ 描述/ 等/ 并/ 没有/ 标准化/ 的/ 规则/ 限制/ ,/ 所以/ 需要/ 大量/ 的/ 人工/ 甄别/ 、/ 筛选/ 才能/ 获取/ 到/ 部分/ 准确/ 的/ 自治/ 域/ 商业/ 关系数据/ ,/ 缺乏/ 可行性/ ./ CAIDA/ ⑦/ 公开/ 了/ 对/ 2012/ 年/ 6/ 月/ 1/ 日/ 自治/ 域/ 之间/ 商业/ 关系/ 的/ 推测/ 结果/ ⑧/ ./ CAIDA/ 使用/ 收集/ 到/ 的/ 5815/ 组/ 准确/ 的/ 自治/ 域/ 商业/ 关系数据/ 验证/ 了/ 该/ 推测/ 结果/ ,/ 证明/ 其/ P2C/ 准确率/ 达到/ 99.1/ %/ ,/ P2P/ 准确率/ 也/ 达/ 94.7/ %/ ./ 这是/ 目前/ 能够/ 找到/ 的/ 且/ 已/ 公开/ 的/ 自治/ 域/ 商业/ 关系数据/ 中/ 最为/ 准确/ 的/ ,/ 然而/ 由于/ 该/ 结果/ 并非/ 严格/ 准确/ 的/ ,/ 因此/ 只能/ 用于/ 不/ 严格/ 的/ 简单/ 验证/ ./ 4/ 自治/ 域/ 商业/ 关系/ 推测/ 算法/ 自治/ 域/ 商业/ 关系/ 推测/ 算法/ 的/ 流程/ 如图/ 3/ 所示/ ./ 推测/ 算法/ 首先/ 确定/ 使用/ 的/ 数据/ 集/ :/ BGP/ 路由表/ 和/ 路由/ 更新/ (/ 如图/ 4/ 所示/ )/ ,/ 互联网/ 路由/ 注册/ 中心/ 数据库/ (/ 如图/ 5/ 所示/ )/ ,/ 互联网/ 交换/ 点/ 数据库/ ./ 通过/ 对/ IXP/ 的/ 反向/ DNS/ 解析/ ,/ 对/ BGP/ 路由表/ 和/ 路由/ 更新/ 中/ AS/ 路径/ 和/ Community/ 属性/ 的/ 提取/ 以及/ 对/ IRR/ 中/ Community/ 属性/ 的/ 释义/ 获得/ AS/ 连接/ 对/ 以及/ 部分/ 关系/ ,/ 从而/ 构造/ 图/ G/ (/ V/ ,/ E/ )/ ,/ 其中/ ,/ V/ 节点/ 表示/ 自治/ 域/ AS/ ,/ E/ 表示/ AS/ 之间/ 存在/ 的/ 关系/ ./ 最后/ 依据/ 不同/ 的/ 推测/ 策略/ ,/ 为边/ 赋值/ 商业/ 关系/ ./ 按照/ 推测/ 算法/ 所/ 采用/ 的/ 策略/ ,/ 可以/ 将/ 推测/ 算法/ 分为/ 以下/ 3/ 类/ :/ 排序/ 法/ 、/ 组合/ 最优/ 法/ 以及/ 局部/ 确定性/ 法/ ./ 本节/ 将/ 详细/ 讨论/ 这/ 3/ 类/ 推测/ 算法/ ./ id/ =/ tools/ :/ ipv4/ _/ route/ _/ servers/ ①/ ②/ ③/ ④/ ⑤/ ⑥/ ⑦/ ⑧/ Page54/ ./ 1/ 网络/ 特征/ 排序/ 法/ 网络/ 特征/ 排序/ 法/ 的/ 主要/ 思想/ 是/ 提取/ 所有/ 的/ 自治/ 域/ 的/ 网络/ 特征/ ,/ 进行/ 从大到/ 小/ 的/ 排名/ ,/ 排名/ 高/ 的/ 自治/ 域/ 为/ 排名/ 低/ 的/ 自治/ 域/ 提供/ 穿越/ 服务/ ,/ 而/ 排名/ 相当/ 的/ 自治/ 域/ 之间/ 建立/ 对/ 等/ 连接/ ./ Gao/ [/ 5/ ]/ 使用/ OregonRouteView/ 的/ BGP/ 路由表/ 和/ 更新/ 数据/ ,/ 第一次/ 提出/ 了/ 自治/ 域/ 商业/ 关系/ 的/ 推测/ 算法/ ./ Gao/ 算法/ 基于/ 这样/ 的/ 一个/ 直观/ 现象/ :/ 一个/ 自治/ 域/ 的/ 重要/ 程度/ 与其/ 在/ 互联网/ 拓扑图/ 中/ 的/ 度数/ 成正比/ ,/ 因而/ 提供者/ 的/ 度数/ 比/ 客户/ 的/ 度数/ 大/ ./ Gao/ 算法/ 首先/ 对/ 路由表/ 中/ 每条/ AS/ 路径/ 进行/ 遍历/ ,/ 统计/ 每个/ AS/ 的/ 度数/ ./ 将/ 一条/ AS/ 路径/ 中/ 度数/ 最大/ 的/ AS/ 作为/ 提供者/ ,/ 结合/ Valley/ -/ Free/ 策略/ 统计/ AS/ 对/ 之间/ 的/ 穿越/ 关系/ ,/ 从而/ 为/ 每条/ AS/ 路径/ 上/ 的/ 每/ 对/ AS/ 赋值/ P2C/ ,/ C2P/ 或/ S2S/ 关系/ ./ 但是/ 由于/ 存在/ 少量/ 配置/ 错误/ 的/ BGP/ 路由器/ ,/ 它们/ 会/ 宣布/ 错误/ 路由/ 信息/ ,/ Gao/ 算法/ 采用/ 统计学/ 方法/ 设定/ 阈值/ L/ 过滤/ 少量/ 错误/ 的/ 路由/ 信息/ ./ 对于/ P2P/ 关系/ 的/ 确立/ ,/ Gao/ 算法/ 首先/ 根据/ P2P/ 关系/ 在/ AS/ 路径/ 中/ 只/ 出现/ 一次/ 且/ 紧跟/ P2C/ 或者/ S2S/ 关系/ 的/ 原则/ ,/ 排除/ 不是/ P2P/ 关系/ 的/ AS/ 对/ ./ 其次/ ,/ 由于/ AS/ 倾向/ 于/ 选择/ 度数/ 与/ 自己/ 相当/ 的/ AS/ 建立/ 对等关系/ ,/ 因而/ 在/ 剩余/ 的/ AS/ 对/ 中/ ,/ 如果/ 两个/ AS/ 度数/ 之/ 比/ 符合/ 阈值/ R/ ,/ 则/ 将/ AS/ 对/ 关系/ 调整/ 为/ P2P/ 关系/ ./ 但是/ Gao/ 算法/ 存在/ 如下/ 缺陷/ ./ 首先/ AS/ 度/ 的/ 大小/ 关系/ 不能/ 完全/ 反映/ AS/ 之间/ 的/ 穿越/ 关系/ ./ 比如/ 有/ 的/ AS/ 拥有/ 一些/ 很/ 重要/ 的/ 提供者/ 或者/ 对等体/ ,/ 它/ 的/ 客户/ 必须/ 使用/ 私有/ AS/ 号/ 或者/ 内部/ 路由/ 协议/ ,/ 就/ 不会/ 出现/ 在/ BGP/ 路由表/ 中/ ,/ 因此/ 该/ AS/ 虽然/ 重要/ ,/ 但/ 由于/ 它/ 度数/ 较/ 小/ ,/ 较易/ 引起/ 推测/ 误差/ ./ 其次/ ,/ 由于/ P2P/ 关系/ 不能/ 被/ 宣布/ 给/ 邻居/ 的/ 邻居/ ,/ 大多数/ P2P/ 关系/ 通常/ 只能/ 在/ 采集/ 点/ 被/ 发现/ ,/ 所以/ 对于/ 大多数/ AS/ ,/ 拥有/ 很多/ P2P/ 关系/ 的/ AS/ 和/ 拥有/ 很少/ P2P/ 关系/ 的/ AS/ 不能/ 根据/ 度来/ 衡量/ 其/ 重要性/ ./ 最后/ ,/ 参数/ 的/ 调节/ 也/ 会/ 影响/ 最终/ 的/ 结果/ ,/ 比如/ 阈值/ R/ 的/ 大小/ 会/ 影响/ P2P/ 关系/ 的/ 比例/ ./ 通过/ 对/ 2003/ 年/ 3/ 月/ 至/ 12/ 月/ RouteView/ 项目/ 中/ 路由表/ 的/ 分析/ ,/ 当/ R/ 设定/ 为/ 60/ 时/ ,/ P2P/ 关系/ 的/ 比例/ 为/ 7.2/ %/ ,/ 而/ 当/ R/ 设定/ 为/ 无穷大/ 时/ ,/ P2P/ 关系/ 的/ 比例/ 上升/ 为/ 7.98/ %/ ./ 当然/ 随着/ BGP/ 路由表/ 的/ 增多/ ,/ 参数/ 的/ 影响/ 程度/ 会/ 逐渐/ 变小/ ./ Subramanian/ 等/ 人/ [/ 6/ ]/ 的/ 思想/ 如下/ ./ 从/ 不同/ 的/ 监测点/ 观察/ AS/ 的/ 关系/ 会/ 有所不同/ ,/ 因而/ 可以/ 通过/ 收集/ 多个/ 位置/ 的/ 部分/ 拓扑/ 信息/ 来/ 构建/ Internet/ 的/ 全面/ 拓扑/ 并/ 推测/ AS/ 之间/ 关系/ ./ 从/ 一个/ 位置/ 观测/ 到/ 的/ 所有/ 路径/ 可以/ 构成/ 一张/ 有向图/ ./ 根据/ Valley/ -/ Free/ 原则/ ,/ 有向图/ 的/ 叶子/ 节点/ 很/ 有/ 可能/ 是/ 其/ 父亲/ 节点/ 的/ Customer/ ,/ 因而/ 依次/ 删去/ 有向图/ 中/ 的/ 叶子/ 节点/ 并/ 赋予/ rank/ 值/ ,/ 越/ 早/ 删去/ 的/ 叶子/ 节点/ rank/ 值越/ 低/ ,/ 这一/ 过程/ 称之为/ 逆向/ 剪枝/ ./ 对/ 每/ 一个/ 位置/ 的/ 有向图/ 进行/ 逆向/ 剪枝/ 后/ ,/ 可以/ 将/ 每/ 一个/ AS/ 映射/ 到/ 一个/ N/ 维/ 向量/ 犮/ (/ i/ )/ =/ (/ ri1/ ,/ …/ ,/ riN/ )/ ,/ rij/ 表示/ 从/ 位置/ j/ 观察/ 到/ ASi/ 的/ rank/ 值/ ./ 为了/ 确定/ AS/ 之间/ 的/ 关系/ (/ 比如/ ASi/ 和/ ASj/ )/ ,/ 令/ l/ (/ i/ ,/ j/ )/ 表示/ rik/ >/ rjk/ 的/ 数量/ ,/ e/ (/ i/ ,/ j/ )/ 表示/ rik/ =/ rjk/ 的/ 数量/ ./ Subramanian/ 采用/ 如下/ 策略/ :/ (/ 1/ )/ 等价/ (/ Equivalence/ )/ ./ 如果/ ASi/ 和/ ASj/ 满足条件/ e/ (/ i/ ,/ j/ )/ >/ N/ // 2/ ,/ 则/ 认为/ 它们/ 是/ 等价/ 的/ ./ 如果/ 它们/ 之间/ 有/ 边/ 连接/ ,/ 则/ i/ 和/ j/ 是/ P2P/ 关系/ ;/ (/ 2/ )/ 支配/ (/ Dominance/ )/ ./ 如果/ ASi/ 和/ ASj/ 满足条件/ l/ (/ i/ ,/ j/ )/ >/ l/ (/ j/ ,/ i/ )/ =/ 0/ ,/ 则/ 认为/ ASi/ 支配/ ASj/ ,/ 即/ i/ 和/ j/ 是/ P2C/ 关系/ ./ 对于/ 不/ 满足/ 等价/ 或者/ 支配/ 策略/ 的/ 边/ ,/ 则/ 使用/ 以下/ 的/ 概率/ 策略/ :/ (/ 1/ )/ 概率/ 等价/ (/ ProbabilisticEquivalence/ )/ ./ 如果/ ASi/ 和/ ASj/ 满足条件/ 1/ // δ/ E/ / l/ (/ i/ ,/ j/ )/ // l/ (/ j/ ,/ i/ )/ / δ/ E/ ,/ 则/ 认为/ i/ 和/ j/ 是/ P2P/ 关系/ ;/ (/ 2/ )/ 概率/ 支配/ (/ ProbabilisticDominance/ )/ ./ 如果/ ASi/ 和/ ASj/ 满足条件/ l/ (/ i/ ,/ j/ )/ // l/ (/ j/ ,/ i/ )/ >/ δ/ D/ ,/ 则/ 认为/ i/ 和/ j/ 是/ P2C/ 关系/ ./ Subramanian/ 算法/ 相比/ 于/ Gao/ 算法/ 可以/ 发现/ 更/ 多/ 的/ 开放/ 对/ 等/ 策略/ (/ OpenPeeringPolicy/ )/ ./ 开放/ 对/ 等/ 策略/ 允许/ 网络/ 内容/ 服务提供商/ (/ InternetContentProvider/ )/ 等/ 与/ 较大/ 网络/ 运营商/ 建立/ 对等关系/ 从而/ 达到/ 节约/ 穿越/ 成本/ 的/ 双赢/ 局面/ ./ 由于/ 小型/ AS/ 更/ 愿意/ 与/ 大型/ AS/ 建立/ 对等关系/ ,/ 在/ Gao/ 算法/ 中/ 这样/ 的/ 对等关系/ 往往/ 会/ 被/ 判定/ 为/ P2C/ 关系/ ./ 但是/ Subramanian/ 算法/ 也/ 存在/ 局限性/ :/ 首先/ 监测点/ 位置/ 的/ 选择/ 影响/ 着/ AS/ 的/ rank/ 值/ 从而/ 影响/ 着/ 推测/ 的/ 准确性/ ;/ 其次/ ,/ 有些/ Page6AS/ 对/ 在/ 任何/ 一个/ 监测点/ 都/ 没有/ 边/ 相连/ ,/ 但是/ 算法/ 却/ 为/ 它们/ 设立/ 了/ P2C/ 或/ P2P/ 关系/ ,/ 这样/ 的/ 关系/ 可能/ 在/ 实际/ 中/ 并/ 不/ 存在/ ./ 最后/ ,/ 参数/ 选择/ 也/ 缺乏/ 理论/ 支撑/ ,/ 过分/ 依赖/ 经验值/ ./ 网络/ 特征/ 排序/ 法/ 基于/ 互联网/ 本身/ 的/ 特征/ 来/ 推测/ 自治/ 域/ 商业/ 关系/ ,/ 该/ 算法/ 往往/ 实现/ 比较简单/ ,/ 执行/ 的/ 时间/ 复杂度/ 也/ 较/ 低/ ./ 由于/ 影响/ 自治/ 域/ 商业/ 关系/ 的/ 因素/ 有/ 很多/ ,/ 如何/ 提取/ 合适/ 的/ 网络/ 特征/ ,/ 如何/ 设置/ 经验/ 参数/ 等/ 是/ 该/ 算法/ 所/ 面临/ 的/ 挑战/ ./ 4.2/ 组合/ 最优/ 法/ 组合/ 最优/ 法/ 的/ 思想/ 是/ 将/ 所有/ AS/ 关系/ 的/ 赋值/ 转化/ 为/ 数学/ 上/ 的/ 组合/ 最优/ 问题/ ,/ 采用/ 数学/ 上/ 的/ 近似/ 或者/ 随机/ 算法/ 来/ 快速/ 求解/ ./ Subramanian/ 等/ 人/ [/ 6/ ]/ 将/ AS/ 关系/ 推测/ 抽象/ 为/ 关系/ 类型/ (/ TypeofRelation/ ,/ ToR/ )/ 组合/ 优化/ 问题/ ./ BGP/ 路由表/ 中/ 的/ 路径/ 集合/ P/ 构成/ 了/ 图/ G/ (/ V/ ,/ E/ )/ ,/ 图中/ 每/ 条边/ 赋值/ 为/ P2C/ 或者/ P2P/ 关系/ ,/ 使得/ P/ 中/ 的/ 无效/ 路径/ 最小化/ ./ Subramanian/ 推断/ 该/ 问题/ 是/ NP/ 难/ 的/ ,/ 但是/ 没有/ 给出/ 严格/ 证明/ ./ Erlebach/ 等/ 人/ [/ 7/ ]/ 证明/ 了/ ToR/ 是/ NP/ 难/ 的/ ,/ 并/ 将/ ToR/ 问题/ 简化/ 为/ 路径/ 长度/ k/ 受限/ (/ k/ / 4/ )/ 的/ MAX2SAT/ 问题/ ./ Erlebach/ 等/ 人/ 首先/ 对/ 所有/ 路径/ 预处理/ ,/ 迭代/ 式/ 地/ 删除/ 入度/ 和/ 出度/ 为/ 0/ 的/ 边/ ./ 在/ 有效/ 地/ 缩短/ 了/ 平均/ 路径/ 后/ ,/ 采用/ 2SAT/ 问题/ 的/ 算法/ 检验/ 是否/ 存在/ 使得/ 所有/ 路径/ 都/ 有效/ 的/ 解/ ./ 如果/ 无/ 解/ ,/ 则/ 采用/ Lewin/ 等/ 人/ [/ 24/ ]/ 提出/ 的/ MAX2SAT/ 近似算法/ 求解/ ToR/ 问题/ ,/ 在/ 平均/ 路径/ 长度/ 不/ 大于/ 2/ 的/ 情况/ 下/ ,/ 该/ 算法/ 可以/ 在/ 多项式/ 时间/ 内/ 得到/ 近似/ 因子/ 为/ 0.940/ 的/ 近似/ 解/ ./ Battista/ 等/ 人/ [/ 8/ ]/ 也/ 单独/ 证明/ 了/ ToR/ 问题/ 是/ NP/ 难/ 的/ ,/ 并且/ 提出/ 在/ 不/ 存在/ 异常/ AS/ 关系/ 的/ 情况/ 下/ ,/ ToR/ 问题/ 可以/ 转化/ 为/ 2SAT/ 问题/ 从而/ 在/ 线性/ 时间/ 内可解/ ./ 构造/ 2SAT/ 图/ 的/ 过程/ 如下/ :/ 对于/ 每条/ 边/ (/ vi/ ,/ vj/ )/ 引入/ 布尔/ 变量/ xi/ ,/ j/ ,/ 如果/ 边/ 的/ 方向/ 是/ vi/ →/ vj/ ,/ 则/ xi/ ,/ j/ 为/ 真/ ,/ 如果/ 边/ 的/ 方向/ 是/ vj/ →/ vi/ ,/ 则/ xi/ ,/ j/ 为/ 假/ ./ 对于/ 一条/ 路径/ 上/ 的/ 连续/ 3/ 个点/ ,/ 可以/ 如表/ 2/ 所示/ 构造/ 子句/ ./ ○/ vi/ →/ / / / / -/ 1/ ○/ v/ ←/ / / / / i/ ○/ vi/ +/ 1xi/ -/ 1/ ,/ i/ ∨/ xi/ +/ 1/ ,/ i/ ○/ vi/ ←/ / / / / -/ 1/ ○/ v/ →/ / / / / i/ ○/ vi/ +/ 1x/ -/ i/ ,/ i/ -/ 1/ ∨/ x/ -/ i/ ,/ i/ +/ 1/ ○/ vi/ →/ / / / / -/ 1/ ○/ v/ →/ / / / / i/ ○/ vi/ +/ 1xi/ -/ 1/ ,/ i/ ∨/ x/ -/ i/ ,/ i/ +/ 1/ ○/ vi/ ←/ / / / / -/ 1/ ○/ v/ ←/ / / / / i/ ○/ vi/ +/ 1x/ -/ i/ ,/ i/ -/ 1/ ∨/ xi/ +/ 1/ ,/ iBattisa/ 给出/ 了/ 一种/ 推测/ P2C/ 关系/ 的/ 启发式/ 算法/ ./ 定义/ 最小/ 覆盖/ 边/ (/ covering/ )/ 是/ 经过/ 无向边/ (/ vi/ ,/ vj/ )/ 的/ 路径/ 总数/ ./ Battisa/ 算法/ 为/ BGP/ 路由表/ 中/ 的/ 路径/ 集合/ P/ 构建/ 2SAT/ 图/ G2SAT/ ,/ 利用/ 强/ 连通/ 分量/ 的/ 方法/ [/ 25/ ]/ 检验图/ G/ (/ V/ ,/ E/ )/ 是否/ 存在/ 解/ 使得/ 所有/ 子句/ 都/ 成立/ ./ 如果/ 无/ 解/ ,/ 则/ 说明/ 存在/ 异常/ AS/ 关系/ ,/ 选择/ 最小/ 覆盖/ 边/ (/ vi/ ,/ vj/ )/ 并/ 删除/ 其/ 包含/ 的/ 所有/ 路径/ ,/ 重复/ 上述/ 操作/ 直至/ 图/ G/ (/ V/ ,/ E/ )/ 有解/ ./ 同时/ 为了/ 最大化/ 有效/ 路径/ 数/ ,/ Battisa/ 算法/ 逐条/ 检验/ 被/ 删除/ 的/ 路径/ ,/ 在/ 不/ 引入/ 异常/ AS/ 关系/ 的/ 情况/ 下/ 重新/ 将/ 路径/ 加入/ 集合/ ./ 同时/ 为了/ 引入/ P2P/ 关系/ ,/ Battisa/ 提出/ 可以/ 将/ 寻找/ k/ 条/ P2P/ 边/ 转化/ 为/ 寻找/ k/ -/ 独立/ 集/ 的/ 问题/ 求解/ ./ 但是/ Erlebach/ 等/ 人/ [/ 7/ ]/ 仅/ 局限于/ P2C/ 关系/ ,/ Battista/ 等/ 人/ [/ 8/ ]/ 的/ 算法/ 也/ 未/ 考虑/ S2S/ 关系/ ,/ 而/ 忽略/ P2P/ 关系/ 和/ S2S/ 关系/ 会/ 降低/ 推测/ 算法/ 的/ 准确性/ ./ 如图/ 6/ 所示/ ,/ AS1/ -/ AS2/ -/ AS4/ 是/ 一条/ 有效/ 路径/ ,/ 实际上/ AS1/ 和/ AS2/ 是/ S2S/ 关系/ ,/ AS4/ 和/ AS2/ 是/ P2C/ 关系/ ,/ 但是/ 如果/ 忽略/ 了/ S2S/ 关系/ 将/ AS1/ 和/ AS2/ 确定/ 为/ P2C/ 关系/ ,/ 那么/ AS4/ 和/ AS2/ 只能/ 是/ C2P/ 关系/ ./ 再/ 如图/ 7/ 所示/ ,/ AS3/ -/ AS1/ -/ AS2/ -/ AS4/ 是/ 一条/ 有效/ 路径/ ,/ 实际上/ AS1/ 和/ AS2/ 是/ P2P/ 关系/ ,/ 但是/ 如果/ 忽略/ 了/ P2P/ 关系/ 将/ AS1/ 和/ AS2/ 确定/ 为/ P2C/ 关系/ ,/ AS3/ 和/ AS1/ 可能/ 会/ 被/ 误/ 推测/ 为/ P2C/ 关系/ ./ 其次/ ,/ 最大化/ 有效/ 路径/ 的/ 推测/ 算法/ 由于/ 过分/ 依赖于/ 图/ 特性/ ,/ 会/ 扭曲/ 真实/ 的/ AS/ 商业/ 关系/ ,/ 虽然/ 大多数/ AS/ 符合/ Valley/ -/ Free/ 原则/ ,/ 但是/ 也/ 不/ 排除/ 有/ 的/ AS/ 并/ 没有/ 遵守/ 该/ 原则/ 的/ 情况/ ./ 同时/ ,/ 针对/ ToR/ 问题/ 的/ 算法/ 在/ 面对/ 多解时/ 并/ 不能/ 决定/ 最/ 符合实际/ 情况/ 的/ 方案/ ./ 因此/ 基于/ 以上/ 存在/ 的/ 问题/ ,/ Dimitropoulos/ 等/ 人/ [/ 9/ ]/ 提出/ 了/ 一种/ 更/ 符合实际/ 的/ 推测/ 算法/ ./ 因为/ S2S/ 关系/ 对/ P2C/ 和/ P2P/ 关系/ 的/ 判定/ 有/ 决定性/ 作用/ ,/ 该算/ Page7/ 法/ 首先/ 使用/ 互联网/ 路由/ 注册/ 中心/ 数据库/ [/ 23/ ]/ 查询/ 具有/ S2S/ 关系/ 的/ AS/ 对/ ./ 对于/ P2C/ 关系/ ,/ 该/ 算法/ 引入/ 边/ 的/ 奖励/ (/ bonus/ )/ ,/ 用/ f/ (/ d/ +/ 系边/ 是/ 由/ 度数/ 小/ 的/ AS/ 指向/ 度数/ 大/ 的/ AS/ ,/ 则/ 给予/ 奖励/ (/ 度数/ 相差/ 越大/ ,/ 奖励/ 越大/ )/ ;/ 否则/ 奖励/ 为/ 0/ ./ f/ (/ d/ +/ i/ ,/ d/ -/ f/ (/ d/ +/ Dimitropoulos/ 算法/ 将/ ToR/ 问题/ 和/ 奖励/ 机制/ 相结合/ ,/ 通过/ 求解/ 多/ 目标/ 最优化/ 问题/ 来/ 推测/ 更/ 准确/ 的/ P2C/ 关系/ ./ 目标/ O1/ :/ 最大化/ 有效/ 路径/ ;/ 目标/ O2/ :/ 最大化/ 奖励/ ./ Dimitropoulos/ 算法/ 使用/ 表/ 2/ 方法/ 为/ 目标/ O1/ 构造/ 子句/ ,/ 使用/ 表/ 3/ 方法/ 为/ 目标/ O2/ 构造/ 子句/ ,/ 通过/ 调节/ 子句/ 权值/ ,/ 此/ 最优化/ 问题/ 可以/ 转换/ 为/ MAX2SAT/ 求解/ ./ 对于/ P2P/ 关系/ ,/ Dimitropoulos/ 算法/ 将/ 路径/ 上/ 最大/ 度数/ AS/ 的/ 左右/ 邻居/ 都/ 作为/ 备选/ 并/ 计算/ 边/ 的/ 权值/ g/ (/ d/ +/ i/ ,/ d/ -/ 的/ 表达式/ 如下/ :/ 其中/ ,/ c/ =/ 1/ // maxi/ ∈/ Efd/ +/ 通过/ 给定/ 权值/ 的/ 阈值/ 可以/ 删除/ 不/ 实际/ 的/ P2P/ 关系/ ,/ 最后/ 通过/ 求解/ 最大/ 权重/ 独立/ 集/ 问题/ (/ MaximumWeightIndependenceSet/ ,/ MWIS/ )/ 来/ 确定/ 可靠/ 的/ P2P/ 关系/ ,/ 该/ NP/ 难/ 的/ MWIS/ 问题/ 可以/ 在/ 多项式/ 时间/ 复杂度/ 内/ 近似/ 求解/ ①/ ./ 该/ 算法/ 的/ 缺点/ 是/ 复杂度/ 太高/ ./ 对比/ Battisa/ 等/ 人/ [/ 8/ ]/ 和/ Erlebach/ 等/ 人/ [/ 7/ ]/ 的/ 工作/ ,/ Mao/ 等/ 人/ [/ 10/ ]/ 提出/ 了/ 基于/ 随机/ 行走/ 的/ RouteScope/ 算法/ ./ RouteScope/ 算法/ 不仅/ 要求/ 观察/ 到/ 的/ 路径/ 尽量/ 是/ 有效/ 的/ ,/ 而且/ 要求/ 没有/ 使用/ 的/ 路径/ 尽量/ 是/ 无效/ 的/ ./ 该/ 算法/ 形式化/ 自治/ 域/ 关系/ 推测/ 问题/ ,/ 对于/ 边/ ei/ =/ 〈/ x/ ,/ y/ 〉/ ,/ 引入/ 变量/ relation/ (/ ei/ )/ ,/ 定义/ 如下/ :/ relation/ (/ ei/ )/ =/ 设/ er/ 是/ ei/ 的/ 反向/ 边/ ,/ 有效/ 路径/ 上/ 的/ 每条/ 连接/ 和/ 连接/ 对/ (/ ei/ ,/ ej/ )/ 需要/ 满足/ 以下/ 有效/ 约束/ :/ 如果/ 有/ 一条/ 比/ 实际/ 路径/ 更/ 短/ 的/ 路径/ ,/ 那么/ 该/ 路径/ 无效/ ,/ 即/ 根据上述/ 最优化/ 目标/ 和/ 约束/ ,/ RouteScope/ 算法/ 首先/ 初始化/ 每条/ 连接/ 为/ P2C/ 关系/ ,/ 然后/ 采用/ Selman/ 提出/ 的/ 随机/ 行走/ 算法/ [/ 26/ ]/ 进行/ 迭代/ 操作/ ./ 每次/ 迭代/ 可以/ 随机/ 地/ 选择/ 修改/ 一条/ 不/ 满足/ 有效/ 约束/ (/ 4/ )/ 、/ (/ 5/ )/ 的/ 连接/ 关系/ ,/ 或者/ 在/ 所有/ 不/ 满足/ 有效/ 约束/ 的/ 连接/ 中/ ,/ 选择/ 修改/ 使得/ 无效/ 约束/ (/ 6/ )/ 减少/ 最多/ 的/ 连接/ 关系/ ./ 同时/ 为了/ 减少/ 推测/ 的/ 规模/ ,/ RouteScope/ 算法/ 进行/ 了/ 删除/ 叶子/ 节点/ (/ 出度/ 为/ 0/ 的/ AS/ )/ 的/ 预处理/ 操作/ ./ 但是/ 考虑/ 到/ 路由/ 策略/ 的/ 偏好/ 设置/ 等/ ,/ 路由/ 策略/ 并不一定/ 是/ 按照/ 最短/ 路径/ 选择/ ./ 而且/ 总有/ 一些/ 路由/ 路径/ 由于/ 监测点/ 的/ 限制/ 无法/ 观察/ 到/ ,/ 但/ 并/ 不/ 表示/ 这些/ 路径/ 无效/ ./ 因而/ RouteScope/ 算法/ 存在/ 假设/ 上/ 的/ 缺陷/ ./ 自治/ 域/ 商业/ 关系/ 除了/ Valley/ -/ Free/ 原则/ ,/ Kosub/ 等/ 人/ [/ 11/ ]/ 又/ 引入/ 了/ 无环/ (/ Acyclicity/ )/ 属性/ ./ 无环/ 属性/ 是/ 指/ 在/ 真实/ 自治/ 域/ 商业/ 关系/ 中/ ,/ 不/ 存在/ 一些/ 不合理/ 的/ 环路/ 情况/ ./ 比如/ 图/ 8/ 所示/ ,/ 虽然/ AS1/ →/ AS2/ →/ AS3/ →/ AS4/ →/ AS5/ 和/ AS1/ →/ AS2/ →/ AS4/ →/ AS5/ 是/ 两条/ 有效/ 路径/ ,/ 但是/ AS2/ →/ AS3/ →/ AS4/ 却/ 组成/ 了/ 环路/ ,/ AS3/ 是/ AS2/ 的/ 提供者/ ,/ AS4/ 是/ AS3/ 的/ 提供者/ ,/ 而/ AS2/ 又/ 是/ AS4/ 的/ 提供者/ ,/ 这/ 与/ 商业/ 策略/ 不符/ ./ 将/ 无环/ 属性/ 与/ ToR/ 问题/ 相结合/ ,/ Kosub/ 等/ 人/ 提出/ 了/ 无环/ 关系/ 类型/ (/ Acyclicall/ -/ pathsTypeofRela/ -/ tion/ ,/ AToR/ )/ 问题/ :/ 给定/ 无向/ 图/ G/ ,/ 路径/ 集合/ P/ ,/ 类型/ 集合/ K/ 和/ 属于/ 类型/ 集合/ K/ 的/ 先验/ 关系/ R/ ,/ 能否/ 使用/ 类型/ 集合/ U/ 中/ 的/ 关系/ 类型/ 补全/ 图/ G/ 的/ 关系/ 使/ 之/ 既/ 满足/ Valley/ -/ Free/ 原则/ 又/ 满足/ 无环且/ K/ ,/ U/ / {/ →/ ,/ -/ ,/ / }/ ./ ①/ QUickALmostEXactmaximumweightclique/ // independentPage8AToR/ (/ K/ ,/ U/ )/ 问题/ 的/ 时间/ 复杂度/ 如表/ 4/ 所示/ ,/ 其中/ N/ 表示/ 输入/ 规模/ ,/ N/ =/ V/ (/ G/ )/ +/ E/ (/ G/ )/ +/ P/ +/ R/ ./ Kosub/ 等/ 人/ 证明/ 了/ AToR/ (/ / ,/ {/ →/ }/ )/ 问题/ 在/ 线性/ 时间/ 复杂度/ 内可解/ 并/ 给出/ 了/ 对应/ 算法/ ./ 该/ 推测/ 算法/ 首先/ 标记/ 每个/ 节点/ v/ 作为/ 中间/ 节点/ 所/ 经过/ 路径/ p/ 的/ 总数/ count/ (/ v/ )/ ,/ 循环/ 删除/ count/ (/ v/ )/ =/ 0/ 的/ 节点/ 即/ 叶子/ 节点/ 并/ 为/ 与/ 之/ 相邻/ 的/ 节点/ 调整/ count/ (/ v/ )/ 值/ ,/ 标记/ C2P/ 关系/ ./ 如果/ 所有/ 的/ 节点/ 都/ 能够/ 删除/ 则/ 找到/ 了/ 一个/ 可行/ 解/ ./ 但是/ Kosub/ 等/ 人/ 也/ 证明/ 了/ 如果/ 加入/ S2S/ 关系/ 的/ 推测/ ,/ 会/ 使得/ 大多数/ 问题/ 变成/ NP/ 难/ 的/ ./ K/ / O/ (/ N/ )/ O/ (/ N/ )/ O/ (/ N/ )/ O/ (/ N/ )/ O/ (/ N/ )/ O/ (/ N/ )/ O/ (/ N/ )/ →/ O/ (/ N/ )/ O/ (/ N/ )/ O/ (/ N/ )/ O/ (/ N/ )/ NP/ 难/ O/ (/ N/ )/ NP/ 难/ -/ O/ (/ N/ )/ O/ (/ N/ )/ O/ (/ N/ )/ O/ (/ N/ )/ NP/ 难/ NP/ 难/ NP/ 难/ / O/ (/ N/ )/ O/ (/ N/ )/ O/ (/ N/ )/ O/ (/ N/ )/ O/ (/ N/ )/ O/ (/ N/ )/ O/ (/ N/ )/ →/ ,/ -/ O/ (/ N/ )/ O/ (/ N/ )/ O/ (/ N/ )/ O/ (/ N/ )/ NP/ 难/ NP/ 难/ NP/ 难/ →/ ,/ / O/ (/ N/ )/ O/ (/ N/ )/ O/ (/ N/ )/ O/ (/ N/ )/ NP/ 难/ O/ (/ N/ )/ NP/ 难/ -/ ,/ / O/ (/ N/ )/ O/ (/ N/ )/ O/ (/ N/ )/ O/ (/ N/ )/ NP/ 难/ NP/ 难/ NP/ 难/ →/ ,/ -/ ,/ / O/ (/ N/ )/ O/ (/ N/ )/ O/ (/ N/ )/ O/ (/ N/ )/ NP/ 难/ NP/ 难/ NP/ 难/ Hummel/ 等/ 人/ [/ 12/ ]/ 在/ AToR/ 问题/ 上/ 进行/ 扩展/ ,/ 提出/ 了/ 更/ 一般化/ 的/ 最大/ 无环/ 关系/ 类型/ (/ MaximumAcyclicToR/ ,/ MAToR/ )/ 问题/ :/ 给定/ 无向/ 图/ G/ ,/ 路径/ 集合/ P/ ,/ 对图/ G/ 中/ 的/ 一些/ 边/ 指定/ 方向/ ,/ 使得/ 最大化/ 无环且/ 符合/ Valley/ -/ Free/ 原则/ 的/ AS/ 路径/ 数/ ./ 虽然/ MAToR/ 问题/ 是/ NP/ 难/ 的/ ,/ 但是/ 在/ 路径/ 长度/ 受限/ 为/ k/ 的/ 情况/ 下/ ,/ 通过/ 近似/ 因子/ 为/ 2k/ // (/ k/ +/ 1/ )/ !/ 的/ 近似算法/ 该/ 问题/ 在/ 多项式/ 时间/ 内可解/ ,/ 随着/ 路径/ 长度/ 的/ 增加/ ,/ 近似/ 因子/ 衰减/ 地/ 很快/ ./ Hummel/ 等/ 人/ 在/ Kosub/ 等/ 人/ [/ 11/ ]/ 基础/ 上/ 提出/ 了/ 改进/ 算法/ AHeu/ ,/ 如果/ 不能/ 使得/ 所有/ 路径/ 有效/ 且/ 无/ 环即/ 还有/ 部分/ 节点/ 无法/ 删除/ ,/ 则/ 选择/ count/ (/ v/ )/ 最小/ 的/ 节点/ 并/ 将/ 与/ 之/ 关联/ 的/ 路径/ p/ 都/ 删除/ 后/ 继续/ 重复/ Kosub/ 算法/ ./ 对于/ 从/ IRR/ 数据库/ 已知/ 的/ 关系/ u/ →/ v/ ,/ 添加/ 对应/ 的/ 虚拟/ 路径/ (/ u/ ,/ v/ ,/ ⊥/ )/ ,/ 其中/ ⊥/ 是/ 虚拟/ 自治/ 域/ 节点/ 且/ count/ (/ ⊥/ )/ =/ ./ 虚拟/ 路径/ 的/ 引入/ 使得/ 算法/ 无需/ 改变/ 即可/ 隐式/ 有效/ 地/ 利用/ 先验/ 信息/ (/ Pre/ -/ knowledge/ )/ ./ 同时/ 借鉴/ Battista/ 的/ 思想/ ,/ AHeu/ 算法/ 引入/ 了/ 重新/ 添加/ 已/ 删除/ 边/ 的/ 机制/ 来/ 最大化/ 有效/ 无环/ 路径/ ./ 由于/ 一条/ 无效/ 路径/ 可能/ 包含/ 多个/ 低谷/ (/ 如图/ 9/ 所示/ )/ 或者/ 一个/ 低谷/ 可能/ 包含/ 多条/ 无效/ 路径/ (/ 如图/ 10/ 所示/ )/ ,/ Cohen/ 等/ 人/ [/ 13/ ]/ 对/ MAToR/ 问题/ 稍加/ 变化/ ,/ 将/ 最小化/ 无效/ 路径/ 转换/ 为/ 最小化/ 低谷/ (/ valley/ )/ 数/ ,/ 并且/ 给出/ 了/ 一种/ 近似/ 因子/ 为/ 2/ // 3/ 的/ 近似算法/ ./ 该/ 算法/ 将/ 每/ 一条/ 路径/ p/ 分割/ 成/ 路径/ 长度/ 为/ 2/ 的/ 子/ 路径/ ./ 然后/ 构建/ 如下/ 两个/ 集合/ :/ Ev/ :/ v/ 作为/ 端/ 节点/ 的/ 子/ 路径/ 集合/ ;/ Mv/ :/ v/ 作为/ 中间/ 节点/ 的/ 子/ 路径/ 的/ 集合/ ./ Cohen/ 算法/ 不断/ 地/ 选择/ |/ Mv/ |/ // |/ Ev/ |/ 比值/ 最小/ 的/ 节点/ ,/ 为/ 其/ 标记/ 层次/ 值/ π/ (/ v/ )/ 并/ 删除/ 包含/ v/ 的/ 子/ 路径/ ,/ 直至/ 子/ 路径/ 集合/ 为空/ ,/ 越/ 早/ 删除/ 的/ 节点/ 层次/ 值/ π/ (/ v/ )/ 越低/ ./ 剩余/ 点/ 的/ 层次/ 值/ π/ (/ v/ )/ 都/ 赋值/ 为/ 最高/ ./ 如果/ π/ (/ u/ )/ </ π/ (/ v/ )/ ,/ 则/ 表明/ u/ 是/ v/ 的/ 客户/ ,/ 如果/ π/ (/ u/ )/ =/ π/ (/ v/ )/ ,/ 表明/ u/ 和/ v/ 是/ P2P/ 关系/ ./ 当/ 最小/ 比值/ |/ Mv/ |/ // |/ Ev/ |/ >/ 0/ 即/ 至少/ 有/ 一条/ 子/ 路径/ 经过/ 低谷/ 时/ ,/ 为了/ 最小化/ 低谷/ 数/ ,/ 将/ 经过/ 低谷/ 的/ 边/ 作为/ 备选/ S2S/ 关系/ ./ 最后/ 根据/ 拥有/ S2S/ 关系/ 的/ 两个/ 节点/ 度数/ 较/ 相近/ 这一/ 选择/ 偏好/ 确定/ S2S/ 关系/ ./ 图/ 11/ (/ a/ )/ 和/ (/ b/ )/ 都/ 是/ 符合/ Valley/ -/ Free/ 原则/ 的/ 可行/ 方案/ ,/ 但是/ 由于/ 互联网/ 中/ 绝大多数/ 是/ 小型/ 自治/ 域/ ,/ 一般/ 中间/ 节点/ 是/ 顶层/ 的/ 提供者/ ,/ Cohen/ 算法/ 利用/ |/ Mv/ |/ // |/ Ev/ |/ 值/ 可以/ 推测/ 更为/ 实际/ 的/ 自治/ 域/ 关系/ (/ 如图/ 11/ (/ b/ )/ 所示/ )/ ./ 组合/ 最优/ 法/ 算法/ 主要/ 是/ 基于/ 由/ 互联网/ 抽象/ 出来/ 的/ 以/ 自治/ 域/ 为/ 节点/ 、/ 自治/ 域/ 之间/ 的/ 连接/ 为边/ 的/ 无/ 向/ Page9/ 图/ ./ 该/ 算法/ 执行/ 时间/ 复杂度/ 一般/ 很/ 高/ ./ 由于/ 其/ 理论/ 难度/ ,/ 能够/ 推测/ 的/ 关系/ 种类/ 一般/ 也/ 比较/ 单一/ ./ 如果/ 不/ 借助于/ 网络/ 特征/ 的/ 提取/ 或/ 先验/ 确定性/ 商业/ 关系/ ,/ 推测/ 算法/ 的/ 准确率/ 比较/ 难/ 保证/ ./ 4.3/ 局部/ 确定/ 法/ 局部/ 确定/ 法/ 的/ 思想/ 是/ 利用/ 公开/ 数据库/ 中/ 存在/ 或者/ 监测器/ 可以/ 监测/ 到/ 的/ 部分/ 确定性/ 关系/ 来/ 推测/ 其余/ 的/ 自治/ 域/ 关系/ ./ 为了/ 评估/ 文献/ [/ 5/ -/ 6/ ]/ 两种/ AS/ 关系/ 推测/ 算法/ 的/ 准确性/ ,/ Xia/ 等/ 人/ [/ 14/ ]/ 提取/ IRR/ 数据库/ 中/ 的/ BGP/ 团体/ (/ Community/ )/ 属性/ [/ 22/ ]/ ,/ AS/ -/ SET/ 对象/ 以及/ 显式/ 路由/ 策略/ 描述/ ,/ 得到/ 部分/ 准确/ 的/ 自治/ 域/ 商业/ 关系/ ,/ 对比/ 发现/ 算法/ [/ 5/ -/ 6/ ]/ 在/ P2P/ 关系/ 推测/ 上/ 准确率/ 很/ 低/ ,/ 小型/ 自治/ 域/ 上/ 表现/ 得/ 更/ 明显/ ./ GAO/ 进而/ 提出/ 了/ PTE/ (/ PartialnessToEntireness/ )/ 算法/ ./ 该/ 算法/ 从/ 已知/ 的/ AS/ 关系/ 出发/ ,/ 先/ 过滤/ 不/ 符合/ Valley/ -/ Free/ 原则/ 的/ 无效/ 路径/ ,/ 再/ 依据/ 以下/ 规则/ 推测/ 其余/ 的/ AS/ 关系/ :/ 推测/ 规则/ ./ 在/ 一条/ AS/ 路径/ 上/ ,/ P2C/ 关系/ 之后/ 是/ P2C/ 关系/ ;/ C2P/ 关系/ 之前/ 是/ C2P/ 关系/ ;/ P2P/ 关系/ 之前/ 是/ C2P/ 关系/ ,/ 之后/ 是/ P2C/ 关系/ ./ 更新/ 规则/ ./ 如果/ (/ u/ ,/ v/ )/ 和/ (/ v/ ,/ u/ )/ 都/ 被/ 标记/ 为/ P2C/ 关系/ ,/ 则/ 它们/ 都/ 被/ 更新/ 为/ S2S/ 关系/ ./ 最后/ 使用/ Gao/ 算法/ [/ 5/ ]/ 推测/ 剩余/ 自治/ 域/ 商业/ 关系/ ./ 受到/ Xia/ 等/ 人/ [/ 14/ ]/ 想法/ 的/ 启发/ ,/ Shavitt/ [/ 15/ ]/ 利用/ 额外/ 的/ 数据源/ 进行/ 补充/ ,/ 提出/ 了/ 一种/ 确定性/ 算法/ 来/ 推测/ 更为/ 实际/ 的/ 自治/ 域/ 关系/ ./ Shavitt/ 算法/ 首先/ 利用/ CAIDA/ 为/ 连接/ 赋值/ S2S/ 关系/ ./ Shavitt/ 算法/ 构造/ 一个/ 中心/ (/ core/ )/ ,/ 该/ 中心/ 由/ 顶级/ 供应商/ 组成/ ,/ 相互之间/ 用/ P2P/ 关系/ 连接/ ./ 中心/ 构造/ 算法/ 有/ 很/ 多种/ ,/ 比如/ Tau/ -/ ro/ 等/ 人/ [/ 27/ ]/ 提出/ 的/ 贪心/ 最大/ 团/ (/ GreedyMaxClique/ )/ 算法/ ,/ Carmi/ 等/ 人/ [/ 28/ ]/ 提出/ 的/ k/ -/ 剪枝/ (/ k/ -/ pruning/ )/ 算法/ ,/ CAIDA/ 提供/ 的/ AS/ 排名/ ,/ Hasan/ 等/ 人/ [/ 29/ ]/ 提出/ 的/ TC/ (/ TemporalCone/ )/ 算法/ ./ 随后/ ,/ 对于/ 每/ 一条/ 穿越/ 中心/ 的/ 路径/ ,/ 穿越/ 之前/ 的/ 连接/ 全都/ 标记/ 为/ C2P/ ,/ 穿越/ 之后/ 的/ 连接/ 都/ 标记/ 为/ P2C/ ;/ 对于/ 没有/ 穿越/ 中心/ 的/ 路径/ ,/ 根据/ 已/ 标记/ 的/ 关系/ 采取/ 投票/ 技术/ [/ 5/ ]/ 推测/ 其余/ 连接/ 关系/ ./ 该/ 算法/ 核心/ 在于/ 中心/ 大小/ 的/ 选取/ ,/ 如果/ 太小/ 会/ 遗漏/ 一些/ 顶级/ 运营商/ ,/ 从而/ 导致/ 无效/ 路径/ 的/ 增多/ ./ 如果/ 太/ 大/ ,/ 一条/ 路径/ 可能/ 会/ 在/ 中心/ 经历/ 多/ 跳/ ./ 实验/ 表明/ ,/ 中心/ 大小/ 在/ 20/ 左右/ 比较/ 适合/ ./ Wikipedia/ ①/ 提供/ 了/ Tier/ -/ 1/ 的/ AS/ 而且/ 为了/ 互联网/ 的/ 可达性/ ,/ 它们/ 之间/ 必须/ 是/ P2P/ 关系/ ./ Oliveira/ 等/ 人/ [/ 16/ ]/ 基于/ 这一/ 数据源/ 也/ 提出/ 了/ 一种/ 确定性/ 算法/ ./ 假设/ Tier/ -/ 1AS/ 的/ 监视器/ 发现/ 了/ 一条/ a0/ -/ a1/ -/ a2/ -/ …/ -/ an/ 的/ 路径/ ,/ 由于/ a0/ 是/ 顶级/ 供应商/ ,/ a0/ -/ a1/ 可能/ 是/ P2P/ 关系/ 也/ 有/ 可能/ 是/ P2C/ 关系/ ./ 如果/ a0/ -/ a1/ 是/ P2P/ 关系/ ,/ 那么/ 其余/ 的/ Tier/ -/ 1AS/ 不/ 能够/ 监测/ 到/ 该/ 连接/ ;/ 如果/ a0/ -/ a1/ 是/ P2C/ 关系/ ,/ 那么/ 其余/ 的/ Tier/ -/ 1AS/ 也/ 可以/ 监测/ 到/ 该/ 连接/ ./ 剩余/ 的/ 连接/ a1/ -/ a2/ ,/ a2/ -/ a3/ ,/ an/ -/ 1/ -/ an/ 根据/ Valley/ -/ Free/ 原则/ 都/ 标记/ 为/ P2C/ 关系/ ./ 但是/ Tier/ -/ 1AS/ 监测/ 不到/ 低层次/ 的/ P2P/ 关系/ ,/ 因而/ Oliveira/ 从/ Routeview/ ,/ RIPE/ -/ RIS/ ,/ PacketClearingHouse/ ,/ Peeringdb/ ,/ Euro/ -/ IX/ 多处/ 收集/ 数据/ 集/ ./ 如果/ 某条/ 连接/ 不能/ 被/ 任何/ 高层次/ 的/ AS/ 所/ 监测/ 到/ ,/ 那么/ 该条/ 连接/ 就是/ P2P/ 关系/ ./ 如图/ 12/ 所示/ ,/ AS2/ 的/ 监测器/ 可以/ 监测/ 到/ AS2/ →/ AS5/ →/ AS6/ →/ AS8/ 和/ AS2/ →/ AS7/ →/ AS9/ 路径/ ,/ AS4/ 监测器/ 可以/ 监测/ 到/ AS4/ →/ AS2/ →/ AS7/ →/ AS9/ ,/ 但是/ AS1/ ,/ AS3/ ,/ AS4/ 都/ 不能/ 监测/ 到/ AS2/ →/ AS5/ →/ AS6/ →/ AS8/ 子/ 路径/ ./ 因此/ AS2/ -/ AS7/ 是/ P2C/ 关系/ ,/ 而/ AS2/ -/ AS5/ 是/ P2P/ 关系/ ./ 由于/ P2P/ 关系/ 发现/ 的/ 数量/ 与/ 监测器/ 数量/ 有关/ ,/ 因而/ 当前/ 公开/ 的/ 监视器/ 会/ 丢失/ 90/ %/ 的/ P2P/ 连接/ ./ 互联网/ 路由/ 注册/ 中心/ 由于/ 信息/ 冲突/ 、/ 过时/ 等/ 问题/ ,/ 准确性/ 受到/ 质疑/ ./ 为此/ ,/ Battista/ 等/ 人/ [/ 17/ ]/ 提出/ 了/ 一种/ 更加/ 全面/ 的/ BGP/ 关系/ 提取/ 的/ 方法/ ./ 该/ 方法/ 分为/ 4/ 个/ 步骤/ :/ 首先/ 计算/ 各/ 网络/ 注册/ 单位/ 的/ 基本/ 信息/ ,/ 比如/ 自治/ 域/ 号/ (/ AUT/ -/ NUMS/ )/ 数目/ 、/ 自治/ 域/ 集合/ (/ AS/ -/ SETS/ )/ 、/ 注册/ 信息/ 随/ 时间/ 的/ 变化/ 情况/ 等/ ;/ 其次/ 依据/ 信息/ 最后/ 改变/ 的/ 时间/ 戳/ 来/ 管理/ 维护/ 各/ 网络/ 注册/ 单位/ 之间/ 信息/ 的/ 一致性/ ;/ 然后/ 分析/ RPSL/ 语法/ 并且/ 提取/ 备选/ BGP/ 关系/ ;/ 最后/ 从/ 备选/ BGP/ 关系/ 中/ 选择/ 合适/ 的/ 关系/ 构造/ BGP/ 关系/ 图/ ./ 该/ 方法/ 发现/ 的/ 关系/ 总数/ 远远/ 超过/ 前人/ 发现/ 的/ 关系/ 总数/ [/ 30/ -/ 31/ ]/ ./ 但是/ 该/ 方法/ 仅/ 局限/ 在/ ①/ Tier/ -/ 1ASes/ ./ http/ :/ // // en/ ./ wikipedia/ ./ org/ // wiki/ // Tier/ _/ 1/ _/ carrierPage10/ 无向/ 关系/ 的/ 提取/ ,/ 为了/ 更好/ 地/ 对/ AS/ 商业/ 关系/ 推测/ 算法/ 进行/ 验证/ ,/ 还/ 应该/ 充分/ 挖掘/ import/ 和/ export/ 属性/ ./ 局部/ 确定/ 法/ 利用/ 部分/ 先验/ 信息/ ,/ 进而/ 推测/ 剩余/ 的/ 商业/ 关系/ ,/ 该/ 算法/ 实现/ 较为简单/ ,/ 执行/ 时间/ 复杂度/ 也/ 较/ 低/ ,/ 而且/ 先验/ 信息/ 可以/ 帮助/ 推测/ 出/ 更加/ 准确/ 实际/ 的/ 商业/ 关系/ ./ 但是/ 该/ 算法/ 难点/ 在于/ 如何/ 提取/ 准确/ 表/ 5/ 自治/ 域/ 关系/ 推测/ 算法/ 的/ 比较/ 推测/ 算法/ Subramanian/ [/ 6/ ]/ BGP/ 路由表/ Erlebach/ [/ 7/ ]/ BGP/ 路由表/ Dimitropoulos/ [/ 9/ ]/ 无/ 异常/ 关系/ ,/ O/ (/ m/ +/ n/ +/ p/ )/ 有/ 异常/ 关系/ ,/ Polynomial/ 和/ 更新/ P2C/ ,/ P2PPolynomialLM/ 算法/ 简单/ ,/ Hummel/ [/ 12/ ]/ BGP/ 路由表/ P2CPolynomialML/ 和/ 更新/ P2C/ ,/ P2P/ ,/ S2SO/ (/ p/ )/ HM/ 准确率/ 较/ 高/ ,/ 网络/ 特征/ 排名/ 法/ 组合/ 最优/ 法/ 局部/ 确定/ 法注/ :/ n/ 是/ 节点/ 数/ ,/ m/ 是/ 边数/ ,/ p/ 是/ 所有/ 路径/ 的/ 长度/ 5/ 总结/ 与/ 展望/ 本文/ 在/ 现有/ 文献/ 的/ 基础/ 上/ ,/ 从/ 自治/ 域/ 商业/ 关系/ 分类/ 及/ 链路/ 选择/ 入手/ ,/ 归纳/ 了/ 获取/ 源/ 数据/ 集/ 和/ 验证/ 数据/ 集/ 的/ 关键技术/ ,/ 对/ 自治/ 域/ 商业/ 关系/ 推测/ 算法/ 进行/ 了/ 总结/ 和/ 分析/ ./ 其中/ 详细/ 介绍/ 了/ 网络/ 特征/ 排序/ 法/ ,/ 组合/ 最优/ 法及/ 局部/ 确定/ 法/ ,/ 阐述/ 了/ 各种/ 推测/ 算法/ 的/ 性能/ 及/ 优缺点/ ./ 互联网/ 自治/ 域/ 商业/ 关系/ 推测/ 算法/ 还/ 存在/ 很多/ 的/ 可用/ 的/ 先验/ 信息/ ./ 4.4/ 算法/ 比较/ 表/ 5/ 给出/ 了/ 自治/ 域/ 商业/ 关系/ 推测/ 算法/ 的/ 比较/ ,/ 每个/ 算法/ 都/ 以/ 第一/ 作者/ 命名/ ,/ 用/ H/ 、/ L/ 、/ M/ 分别/ 表示/ 商业/ 关系/ 推测/ 的/ 准确性/ 和/ 无效/ 路径/ 比例/ 的/ 高/ 、/ 中/ 、/ 低/ ,/ 并/ 总结/ 了/ 每种/ 算法/ 的/ 复杂度/ 以及/ 优缺点/ ./ LM/ 路径/ 利用率/ 高/ P2P/ 关系/ 计算/ 效率/ 和准/ H/ —/ 准确率/ 较/ 高/ 需要/ 广泛/ 的/ 数据/ 集/ 支撑/ —/ —/ 能够/ 发现/ 问题/ 需要/ 进一步/ 解决/ ,/ 以下/ 总结/ 了/ 一些/ 自治/ 域/ 商业/ 关系/ 推测/ 算法/ 研究/ 目前/ 所/ 面临/ 的/ 关键性/ 问题/ 及/ 未来/ 可能/ 的/ 发展/ 方向/ ./ (/ 1/ )/ 适合/ 更加/ 多样化/ 的/ 自治/ 域/ 商业/ 关系/ ./ 传统/ 的/ 自治/ 域/ 商业/ 关系/ 推测/ 算法/ 只/ 基于/ P2C/ ,/ P2P/ ,/ S2S/ 这/ 3/ 种/ 基本/ 关系/ ,/ 但是/ 随着/ 网络/ 环境/ 的/ 日益/ 复杂/ ,/ 自治/ 域/ 商业/ 关系/ 也/ 在/ 向/ 更加/ 多样化/ 的/ 形式/ 发展/ [/ 32/ ]/ ./ 以下/ 总结/ 了/ 一些/ 新型/ 自治/ 域/ 商业/ 关系/ ./ ①/ 混合/ 关系/ ./ 传统/ 的/ 自治/ 域/ 商业/ 关系/ 模型/ 假设/ 自治/ 域/ 之间/ 只/ 存在/ 一种/ 商业/ 关系/ ,/ 但/ 实际上/ ,/ 针对/ 底/ Page11/ 层/ 不同/ 的/ 物理/ 连接/ ,/ 自治/ 域/ 之间/ 可能/ 存在/ 不同/ 的/ 商业/ 关系/ ./ 比如/ ,/ IPv6/ 的/ 路由/ 策略/ 和/ 路径/ 可能/ 与/ IPv4/ 的/ 完全/ 不同/ ,/ 因此/ 两个/ 自治/ 域/ 如果/ 在/ IPv4/ 和/ IPv6/ 平面/ 都/ 存在/ 连接/ ,/ 它们/ 之间/ 可能/ 是/ 混合/ 关系/ ./ 最近/ 已有/ 研究/ 将/ IPv6/ 网络/ 的/ 自治/ 域/ 商业/ 关系/ 推测/ 与/ IPv4/ 网络/ 的/ 加以/ 区分/ [/ 33/ ]/ ./ 由于/ IPv6/ 需要/ 快速/ 接入/ 现有/ 网络/ ,/ 经济/ 因素/ 已经/ 不是/ 主要/ 驱动力/ ,/ Valley/ -/ Free/ 原则/ 也/ 就/ 不/ 一定/ 适用/ 于/ IPv6/ 网络/ [/ 34/ ]/ ;/ 另外/ 入/ 网点/ (/ Points/ -/ of/ -/ Presence/ ,/ POP/ )/ 的/ 位置/ 也/ 会/ 影响/ 自治/ 域/ 商业/ 关系/ ,/ 当/ 两个/ 自治/ 域/ 同时/ 与/ 多个/ 网络/ 接入点/ (/ NetworkAccessPoints/ ,/ NAP/ )/ 或者/ 互联网/ 交换/ 点/ 连接/ 时/ ,/ 它们/ 之间/ 也/ 有/ 可能/ 是/ 混合/ 关系/ ./ ②/ 部分/ 穿越/ ./ 部分/ 穿越/ 关系/ 是/ 一般/ 穿越/ 关系/ 的/ 一种/ 特例/ ,/ 提供者/ 只/ 为/ 客户/ 提供/ 限定/ 地理/ 区域/ 的/ 穿越/ 服务/ ./ 一个多/ 宿主/ 的/ 客户/ 可以/ 通过/ Communities/ 属性/ 指导/ 国内/ 提供商/ 只/ 提供/ 国内/ 穿越/ 服务/ ,/ 指导/ 国际/ 提供商/ 只/ 提供/ 国际/ 穿越/ 服务/ ,/ 从而/ 节约/ 穿越/ 成本/ ./ ③/ 间接/ 对等关系/ ./ 间接/ 对等关系/ 是/ 指/ 两个/ 自治/ 域/ 都/ 与/ 相同/ 的/ IXP/ 路由/ 服务器/ 建立/ 对等关系/ 但是/ 它们/ 之间/ 却/ 没有/ 实际/ 的/ 物理/ 链接/ ./ 间接/ 对等关系/ 中/ 的/ 两条/ P2P/ 连接/ 可以/ 用/ 一条/ “/ 虚拟/ ”/ P2P/ 连接/ 代替/ ,/ 从而/ 使得/ Valley/ -/ Free/ 原则/ 仍然/ 有效/ ./ 新型/ 自治/ 域/ 商业/ 关系/ 的/ 出现/ 对/ 现有/ 推测/ 算法/ 的/ 完备/ 性/ 提出/ 了/ 挑战/ ./ 针对/ 新型/ 自治/ 域/ 商业/ 关系/ 的/ 推测/ ,/ 今后/ 的/ 研究/ 可以/ 考虑/ 对源/ 数据/ 集/ 进行/ 语义/ 学习/ 和/ 推测/ (/ 如/ BGP/ 路由表/ 和/ 更新/ 中/ 的/ Communities/ 和/ LocPrf/ 属性/ )/ ./ (/ 2/ )/ 提高/ 源/ 数据/ 集/ 采集/ 的/ 全面性/ ./ 现有/ 的/ 自治/ 域/ 商业/ 关系/ 推测/ 算法/ 的/ 数据/ 集/ 主要/ 基于/ 公开/ 的/ IRR/ 数据库/ 、/ IXP/ 数据库/ 、/ 部署/ 节点/ 的/ BGP/ 路由表/ 和/ 更新/ ,/ 会/ 丢失/ 许多/ 小型/ 自治/ 域/ 之间/ 的/ 商业/ 关系/ ./ BGP/ 路由表/ 和/ 更新/ 通过/ 被动/ 测量/ 监测/ BGP/ 边界/ 路由器/ 的/ 方式/ 获得/ ./ 而/ traceroute/ 工具/ 可以/ 主动/ 地/ 对/ IP地址/ 列表/ 发送/ 探测/ 包/ 获得/ 路由器/ 级别/ 的/ 路径/ ,/ 通过/ IP/ 映射/ 转换/ 为/ AS/ 级别/ 的/ 路径/ 信息/ ./ CAIDA/ (/ CooperativeAssociationforInternetDataAnalysis/ )/ 在/ 全球/ 的/ 不同/ 地点/ 放置/ 了/ 很多/ 监测器/ 器/ ,/ 每个/ 监测器/ 上/ 都/ 通过/ Skitter/ ①/ 软件/ 发送/ 探测/ 报文/ 来/ 收集/ 拓扑/ 信息/ ./ 在/ PlanetLab/ [/ 35/ ]/ 平台/ 上/ 部署/ 的/ iPlane/ ②/ 也/ 采用/ 了/ 相同/ 的/ 思想/ ./ DIMES/ ③/ 是/ 一个/ 分布式/ 的/ 科学研究/ 项目/ ,/ 志愿者/ 下载/ DIMES/ 软件/ ,/ 并/ 作为/ 代理点/ 将/ 探测/ 结果/ 返回/ 给/ 中心/ 服务器/ ./ DIMES/ 目前/ 已经/ 在/ 网络/ 中/ 部署/ 了/ 25393/ 个/ traceroute/ 探测/ 代理/ 来/ 探测/ 更/ 多/ 的/ 路径/ ,/ 对/ DIMES/ 的/ 运行/ 结果/ 进行/ 分析/ ,/ 发现/ 了/ 许多/ 小型/ 自治/ 域/ 之间/ 的/ 链路/ [/ 36/ ]/ ./ 我们/ 分别/ 利用/ Planet/ -/ Labtraceroute/ 和/ RouteViewBGP/ 路由表/ 数据源/ 测量/ 中国/ 互联网/ 自治/ 域/ 的/ 拓扑/ 结构/ [/ 37/ ]/ ,/ 我们/ 发现/ trac/ -/ eroute/ (/ 560/ 条/ )/ 可以/ 发现/ 比/ BGP/ 路由表/ (/ 278/ 条/ )/ 更/ 多/ 的/ AS/ 连接/ ./ 但是/ traceroute/ 的/ 难点/ 在于/ 如何/ 正确/ 地/ 将/ IP地址/ 映射/ 为/ 所/ 对应/ 的/ AS/ [/ 38/ ]/ ./ 因此/ ,/ 如何/ 将/ traceroute/ 等/ 主动/ 测量/ 的/ 结果/ 转换成/ 可靠/ 的/ 自治/ 域/ 商业/ 关系/ 推测/ 的/ 源/ 数据/ 集是/ 未来/ 研究/ 的/ 一个/ 发展趋势/ [/ 39/ ]/ ./ (/ 3/ )/ 克服/ 现有/ 研究/ 方法/ 的/ 局限性/ ./ 现有/ 自治/ 域/ 关系/ 推测/ 算法/ 大多/ 基于/ 自治/ 域/ 度数/ 准则/ ,/ 但是/ 这一/ 准则/ 并/ 不能/ 准确/ 判断/ 一个/ AS/ 的/ 大小/ [/ 40/ ]/ ,/ 最近/ 有/ 研究/ 提出/ 引入/ 混合性/ 的/ 评价/ 准则/ [/ 41/ ]/ ,/ 考虑/ 加入/ 地址/ 空间/ 范围/ 、/ 重要/ 网址/ 数目/ 、/ 用户数量/ 等/ 因素/ 来/ 综合/ 评价/ 一个/ 自治/ 域/ 的/ 大小/ ;/ 另外/ ,/ 数据/ 集/ 路径/ 的/ 准确性/ 和/ 实时性/ 直接/ 影响/ 着/ 自治/ 域/ 关系/ 推测/ 算法/ 的/ 准确性/ ./ 不/ 正确/ 的/ 路径/ 可能/ 是/ 由/ 配置/ 错误/ 或者/ 过时/ 的/ 自治/ 域/ 合作/ 关系/ 导致/ 的/ ,/ 为了/ 减小/ 已经/ 不/ 存在/ 路径/ 对/ 推测/ 算法/ 正确性/ 的/ 影响/ ,/ 研究/ 可以/ 引入/ 过滤/ 机制/ 来/ 过滤/ 路由表/ 中较/ 少/ 出现/ 的/ 路径/ [/ 42/ ]/ 或者/ 使用/ 生灭/ 过程/ 的/ 理论/ 模型/ 来/ 计算/ 路径/ 的/ 可信/ 程度/ [/ 18/ ]/ ./ (/ 4/ )/ 借助/ 机器/ 学习/ 的/ 推理/ 技术/ ./ 将/ 有/ 关联/ 的/ 两个/ 自治/ 域间/ 的/ 关系/ 作为/ 需要/ 推理/ 的/ 值/ ,/ 可以/ 通过/ 机器/ 学习/ 的/ 方法/ 来/ 进行/ 推理/ ./ 自治/ 域间/ 商业/ 关系/ 需要/ 考虑/ 的/ 因素/ 很多/ ,/ 比如/ 自治/ 域/ 的/ 地理位置/ 、/ 自治/ 域/ 的/ 客户/ 数目/ 、/ 自治/ 域/ 的/ 服务/ 性能/ 等/ ,/ 我们/ 可以/ 利用/ 机器/ 学习/ 的/ 归一化/ 处理/ 作为/ 特征/ ,/ 那么/ 自治/ 域间/ 商业/ 关系/ 可以/ 用/ 一个/ 特征向量/ 表示/ ,/ 作为/ 问题/ 的/ 输入/ ./ 一方面/ ,/ 我们/ 可以/ 引入/ 机器/ 学习/ 中/ 的/ 贝叶斯/ 、/ 决策树/ 、/ SVM/ 等/ 分类/ 模型/ ,/ 通过/ 部分/ 已/ 标注/ 的/ 自治/ 域/ 商业/ 关系/ 集/ 作为/ 训练/ 集/ ,/ 对/ 分类/ 模型/ 进行/ 训练/ ,/ 学习/ 特征/ 权重/ ,/ 利用/ 学习/ 到/ 的/ 模型/ 对/ 未知/ 的/ 自治/ 域/ 商业/ 关系/ 进行/ 推理/ ,/ 从而/ 获得/ 全面/ 的/ 自治/ 域间/ 商业/ 关系/ ./ 另一方面/ ,/ 我们/ 也/ 可以/ 基于/ 自治/ 域/ 拓扑/ 网/ ,/ 将/ 自治/ 域/ 商业/ 关系/ 的/ 特征向量/ 作为/ 可/ 观测/ 数据/ 节点/ ,/ 通过/ 特征向量/ 推测/ 自治/ 域/ 商业/ 关系/ 即隐/ 变量/ 节点/ ,/ 那么/ 该/ 问题/ 转化/ 为/ 在/ 因子/ 图/ 等/ 概率/ 图/ 模型/ 中/ 的/ 学习/ 与/ 推测/ 问题/ ./ 通过/ 部分/ 已/ 标注/ 的/ 自治/ 域/ 商业/ 关系/ ,/ 基于/ 信息/ 传播/ ,/ 通过/ 监督/ 学习/ 或者/ 半/ 监督/ 学习/ 获得/ 特征/ 权重/ ,/ 然后/ 基于/ 已经/ 学习/ 的/ 因子/ 图/ 模型/ ,/ 根据/ 输入/ 的/ 特征向量/ ,/ 输出/ 自治/ 域/ 商业/ 关系/ ./ ①/ ②/ ③/ iPlane/ ./ http/ :/ // // iplane/ ./ cs/ ./ washington/ ./ edu/ // Page12/ 

