Page1/ 一种/ 位置服务/ 测试数据/ 生成/ 技术/ 研究/ 侯可佳/ 黄军/ 白晓颖周/ 立柱/ (/ 清华大学/ 计算机科学/ 与/ 技术/ 系/ 北京/ 100084/ )/ (/ 清华大学/ 信息科学/ 与/ 技术/ 国家/ 实验室/ 北京/ 100084/ )/ 摘要/ 随着/ 移动/ 互联网/ 的/ 高速/ 发展/ ,/ 移动/ 服务/ 越来越/ 成为/ 人们/ 生活/ 、/ 工作/ 中/ 不可或缺/ 的/ 一部分/ ,/ 绝大部分/ 移动/ 服务/ 都/ 要/ 以/ 用户/ 的/ 位置/ 信息/ 为/ 基础/ ,/ 位置服务/ (/ Location/ -/ BasedServices/ ,/ LBS/ )/ 则/ 通过/ 调用/ GPS/ 等/ 服务/ 在/ 确定/ 用户/ 位置/ 的/ 基础/ 上/ ,/ 向/ 用户/ 提供/ 导航/ 、/ 服务/ 推荐/ 等/ 功能/ ./ 位置服务/ 的/ 基础性/ 使得/ 其/ 正确性/ 和/ 完整性/ 至关重要/ ,/ 同时/ 其/ 开放性/ 和/ 复杂性/ 对/ 测试/ 提出/ 了/ 更/ 高/ 的/ 要求/ ./ 文中/ 以反/ 地理/ 编码/ 服务/ 为例/ ,/ 探讨/ 了/ 位置/ 空间/ 测试数据/ 的/ 生成/ 方法/ ./ 基于/ 模拟退火/ 算法/ (/ SimulatedAnnealing/ ,/ SA/ )/ 的/ 优化/ 过程/ ,/ 提出/ 了/ 两种/ 适应度/ 函数/ 定义方法/ ,/ 一种/ 是/ 基于/ 有效/ 点/ 密集区/ 假设/ ,/ 以/ 提高/ 位置/ 空间/ 覆盖率/ 为/ 优化/ 目标/ ;/ 另/ 一种/ 是/ 基于/ LBS/ 故障/ 模式/ 假设/ ,/ 以/ 提高/ 潜在/ 故障/ 的/ 检测/ 能力/ 为/ 优化/ 目标/ ./ 研究/ 引入/ 了/ 贝叶斯/ 分类器/ ,/ 将/ 预测值/ 作为/ 探索/ 点/ 的/ 能量/ 值/ ,/ 指导/ 搜索/ 过程/ ./ 研究/ 选取/ 了/ 实际/ 应用/ 的/ 位置/ 服务平台/ 进行/ 了/ 实验/ 验证/ ,/ 实验/ 表明/ ,/ 与/ 简单/ 随机/ 算法/ 相比/ ,/ 该/ 方法/ 在/ 可容忍/ 的/ 时间/ 代价/ 下/ ,/ 可以/ 有效/ 提高/ 测试/ 效率/ 和/ 错误/ 检测/ 能力/ ./ 关键词/ 移动/ 平台/ 服务/ ;/ 位置服务/ ;/ 朴素/ 贝叶斯/ 理论/ ;/ 数据/ 生成/ ;/ 模拟退火/ 算法/ 1/ 引言/ 移动/ 云/ 计算/ 作为/ 一种/ 计算/ 模型/ ,/ 能够/ 实现/ 对/ 移动/ 设备/ 计算能力/ 透明/ 、/ 弹性/ 的/ 扩展/ ,/ 通过/ 无处不在/ 的/ 无线网络/ 访问/ 云/ 存储/ 和/ 计算资源/ [/ 1/ ]/ ./ 移动/ 云/ 计算/ 为/ 用户/ 提供/ 了/ 强大/ 的/ 计算/ 及/ 数据/ 存储/ 能力/ ,/ 降低/ 了/ 对/ 移动/ 计算/ 终端/ 在/ 计算能力/ 和/ 存储/ 能力/ 等/ 方面/ 的/ 要求/ ,/ 拓展/ 了/ 移动/ 终端/ 的/ 业务范围/ ./ 由于/ 移动/ 计算/ 终端/ 的/ 移动/ 特性/ ,/ 使得/ 位置/ 信息/ 成为/ 各种/ 移动/ 应用/ 正常/ 运行/ 的/ 基础/ ,/ 移动/ 应用/ 能够/ 利用/ 用户/ 的/ 位置/ 信息/ 为/ 用户/ 提供/ 路径/ 导航/ 、/ 服务/ 推荐/ 等/ 功能/ ./ 目前/ ,/ 很多/ 移动/ 平台/ 均/ 提供/ 开放/ 的/ 位置服务/ (/ LocationBasedService/ ,/ LBS/ )/ ,/ 例如/ 在/ 国内/ 得到/ 广泛应用/ 的/ Baidu/ 、/ Tencent/ 和/ Amap/ 等/ ,/ 每个/ 服务提供商/ 均/ 面向/ Web/ 和/ 手机/ 终端/ 提供/ 两种/ 不同/ 的/ 接口/ 服务/ ./ 不同/ 服务提供商/ 提供/ 的/ 服务/ 之间/ 以及/ 同一个/ 服务提供商/ 提供/ 的/ 两种/ 不同/ 服务/ 版本/ 之间/ ,/ 均/ 可能/ 存在/ 较大/ 差异/ ./ 不同/ 服务/ 提供/ 的/ 位置/ 查询/ 服务/ 在/ 查询/ 范围/ 和/ 精度/ 上/ 会/ 存在/ 差异/ ,/ 例如/ 服务/ 可以/ 提供/ 在/ 某个/ 矩形/ 或者/ 圆形/ 区域/ 的/ 位置/ 查询/ ,/ 或者/ 提供/ 在/ 某个/ 行政区域/ 划分/ 内/ 的/ 位置/ 查询/ ./ 移动/ 应用/ 的/ 位置/ 服务质量/ 也/ 会/ 在/ 正确性/ 、/ 完整性/ 、/ 时效性/ 等/ 方面/ 存在/ 较大/ 差异/ [/ 2/ -/ 3/ ]/ ./ 我们/ 用/ 1000/ 组/ 随机/ 生成/ 的/ 位置/ 数据/ 对/ 上述/ 服务提供商/ 所/ 提供/ 的/ 位置服务/ 进行/ 了/ 初步/ 测试/ ,/ 通过/ 对比/ 发现/ :/ 对于/ 任意/ 两个/ 服务/ ,/ 其/ 结果/ 均/ 存在/ 显著/ 差异/ (/ 差异/ 能/ 达到/ 10/ %/ 以上/ )/ ./ 移动/ 位置服务/ 具有/ 如下/ 特性/ :/ (/ 1/ )/ 位置服务/ 需要/ 具备/ 快速/ 响应/ 能力/ ./ 当/ 用户/ 在/ 移动/ 过程/ 中/ 使用/ 应用服务/ 时/ ,/ 位置服务/ 必须/ 能够/ 实时/ 显示/ 出/ 用户/ 的/ 位置/ 变化/ ./ (/ 2/ )/ 位置服务/ 必须/ 能够/ 提供/ 轻量级/ 的/ 数据/ 信息/ ./ 移动/ 终端/ 的/ 屏幕/ 、/ 内存/ 均/ 比较/ 小/ ,/ 移动/ 通信/ 网络带宽/ 窄/ 并且/ 费用/ 昂贵/ ,/ 因此/ 位置服务/ 提供/ 的/ 位置/ 信息/ 必须/ 进行/ 压缩/ 和/ 精简/ ,/ 去除/ 不必要/ 的/ 信息/ ,/ 为/ 用户/ 节省/ 费用/ 及/ 等待时间/ ,/ 提高/ 用户/ 使用/ 体验/ ./ 位置服务/ 的/ 基础性/ ,/ 使得/ 其/ 正确性/ 和/ 完整性/ 至关重要/ ,/ 同时/ ,/ 平台/ 服务/ 的/ 开放性/ 和/ 复杂性/ 又/ 对/ 传统/ 的/ 测试/ 技术/ 提出/ 了/ 新/ 的/ 挑战/ :/ (/ 1/ )/ 位置服务/ 测试/ 工作量/ 大/ ./ 位置服务/ 具有/ 广阔/ 的/ 输入/ 空间/ ,/ 即使/ 在/ 一个/ 较/ 小/ 的/ 区域/ 内/ ,/ 仍然/ 存在/ 无数个/ 不同/ 的/ 位置/ 点/ ,/ 因此/ ,/ 如何/ 定义/ 地理/ 区域/ 覆盖率/ ,/ 如何/ 生成/ 和/ 选择/ 优质/ 的/ 测试数据/ 以/ 发现/ 更/ 多/ 的/ 软件缺陷/ ,/ 就/ 成为/ 位置服务/ 测试/ 的/ 一个/ 难题/ ./ (/ 2/ )/ 位置服务/ 的/ 运行/ 结果/ 难以/ 评价/ ./ 位置服务/ 的/ 运行/ 结果/ 依赖于/ 服务/ 的/ 位置/ 信息/ 数据库/ ,/ 数据库/ 为/ 位置/ 点/ 存储/ 与/ 之/ 对应/ 的/ 经纬度/ 地理/ 编码/ 、/ 行政/ 地址/ 编码/ 等/ 相关/ 信息/ ,/ 数据库/ 的/ 正确性/ 和/ 完整性/ 将/ 直接/ 影响/ 位置服务/ 的/ 运行/ 结果/ ,/ 测试人员/ 无法/ 获得/ 完整/ 、/ 准确/ 的/ 数据库/ 信息/ ,/ 因此/ 难以/ 对/ 位置服务/ 的/ 运行/ 结果/ 进行/ 评价/ ./ (/ 3/ )/ 位置服务/ 需要/ 持续/ 在线/ 测试/ ./ 由于/ 位置/ 地理信息/ 的/ 不断/ 变化/ ,/ 位置服务/ 需要/ 及时/ 更新/ 、/ 升级/ ./ 例如/ 在/ 城市/ 中/ ,/ 某一/ 地点/ 的/ 经营/ 主体/ 和/ 内容/ 会/ 发生/ 频繁/ 变化/ ,/ 或者/ 某个/ 经营/ 主体/ 由于/ 搬迁/ 使/ 其/ 地址/ 信息/ 发生/ 了/ 变化/ ,/ 再/ 如/ 新建/ 建筑/ 也/ 会/ 使/ 地址/ 信息/ 发生变化/ ./ 针对/ 上述/ 问题/ ,/ 本文/ 将/ 位置服务/ 的/ 测试/ 生成/ 问题/ 转化/ 为/ 优化/ 搜索/ 问题/ ,/ 分别/ 以/ 区域/ 覆盖/ 和/ 故障/ 检测/ 为/ 优化/ 目标/ ,/ 生成/ 一系列/ 位置/ 数据/ 作为/ 位置服务/ 的/ 输入/ 参数/ ,/ 这些/ 输入/ 数据/ 能够/ 对/ 区域/ 达到/ 一定/ 的/ 覆盖率/ 要求/ ,/ 或者/ 有/ 较大/ 概率/ 能够/ 发现/ 服务/ 的/ 隐藏/ 缺陷/ ./ 本文/ 提出/ 的/ 算法/ 将/ 建立/ 在/ 有效/ 点/ 聚集/ 假设/ 和/ 缺陷/ 密集/ 假设/ 的/ 基础/ 上/ ,/ 利用/ 已/ 生成/ 数据/ 推测/ 未/ 生成/ 数据/ 的/ 概率/ ,/ 并/ 指导/ 搜索/ 过程/ 的/ 推进/ ./ 本文/ 第/ 2/ 节/ 介绍/ 位置服务/ 和/ 模拟退火/ 算法/ 两/ 方面/ 的/ 背景/ 知识/ ;/ 第/ 3/ 节对/ 位置服务/ 测试/ 问题/ 进行/ 形式化/ 定义/ ,/ 并/ 提出/ 基于/ 贝叶斯/ 分类器/ 的/ 模拟退火/ 搜索算法/ ,/ 利用/ 该/ 算法/ 从/ 有效/ 点/ 生成/ 效率/ 和/ 故障/ 探测/ 效率/ 两/ 方面/ 探讨/ 算法/ 的/ 具体/ 实现/ ;/ 第/ 4/ 节/ 报告/ 实验/ 的/ 开展/ 和/ 结果/ 评价/ ;/ 第/ 5/ 节对/ 相关/ 工作/ 进行/ 总结/ 和/ 讨论/ ;/ 第/ 6/ 节是/ 对/ 本/ 研究/ 工作/ 的/ 总结/ 讨论/ ./ 2/ 背景/ 知识/ 2.1/ 位置服务/ 位置服务/ ,/ 又/ 称为/ 定位/ 服务/ ,/ 以/ GPS/ 服务/ 为/ 基础/ ,/ 是/ 一种/ 典型/ 的/ 移动/ 平台/ 服务/ ,/ 服务/ 被/ 部署/ 在/ 移动/ 云/ 平台/ 上/ ,/ 利用/ 强大/ 的/ 云/ 计算能力/ 为/ 用户/ 提供/ 位置/ 查询/ 、/ 兴趣/ 点/ 查询/ 、/ 位置/ 导航/ 、/ 地理/ 编码/ 及/ 反/ 地理/ 编码/ 等/ 与/ 位置/ 相关/ 的/ 服务/ 接口/ ./ 目前/ 几乎/ 所有/ 的/ 移动/ 应用程序/ 都/ 需要/ 利用/ 位置服务/ 来/ 辅助/ 其/ 完成/ 功能/ ,/ 或者/ 通过/ 位置服务/ 来/ 拓展/ 业务范围/ ,/ 提升/ 服务质量/ ./ 例如/ 用户/ 可以/ 在/ 聊天/ 软件/ 中/ 调用/ 位置服务/ 确定/ 自己/ 所处/ 的/ 位置/ ,/ 然后/ 发送给/ 朋友/ ,/ 免去/ 了/ 手动/ 输入/ 地址/ 的/ 繁琐/ 和/ 可能/ 出现/ 的/ 错误/ ;/ 再/ 如/ 移动/ 应用/ 可以/ 在/ 获取/ 用户/ 所处/ 的/ 位置/ 后/ ,/ 为/ 其/ 按照/ 距离/ 远近/ 推荐/ 餐饮/ 、/ 娱乐/ 等/ 用户/ 需要/ 的/ 服务/ ./ 由此可见/ ,/ 位置服务/ 已经/ 渗/ Page3/ 透到/ 了/ 我们/ 生活/ 的/ 方方面面/ ,/ 为/ 我们/ 的/ 工作/ 和/ 生活/ 提供/ 了/ 便利/ ./ 基于/ 移动/ 云/ 计算/ 的/ 位置服务/ 通过/ 大量/ 接口/ 为/ 用户/ 提供/ 服务/ ,/ 其/ 工作/ 过程/ 如下/ :/ 首先/ 移动/ 终端/ 上/ 的/ 应用程序/ 向云/ 服务提供商/ 发送/ 请求/ 来/ 调用/ 他们/ 的/ 接口/ ;/ 其次/ 服务提供商/ 接收/ 请求/ ,/ 利用/ 其/ 强大/ 的/ 计算能力/ 处理/ 用户/ 请求/ ,/ 并/ 将/ 结果/ 返回/ 给/ 移动用户/ ./ 位置服务/ 的/ 运行/ 依赖于/ 服务/ 内部/ 的/ 编码/ 数据库/ ,/ 该/ 数据库/ 中/ 存储/ 了/ 物理/ 位置/ 信息/ ,/ 也/ 就是/ 位置/ 的/ 经纬度/ 信息/ 与/ 行政/ 位置/ 信息/ ,/ 例如/ 某个/ 城市/ 某条/ 街道/ 之间/ 的/ 映射/ 关系/ ,/ 将/ 行政/ 位置/ 信息/ 转化/ 为/ 物理/ 位置/ 信息/ 的/ 服图/ 1/ 反/ 地理/ 编码/ 服务/ 2.2/ 模拟退火/ 算法/ 模拟退火/ 算法/ (/ SimulatedAnnealing/ ,/ SA/ )/ [/ 4/ -/ 5/ ]/ 的/ 基本/ 思想/ 是/ 模拟/ 固体/ 退火/ 过程/ ./ 固体/ 退火/ 是/ 将/ 固体/ 加热/ ,/ 使/ 其/ 温度/ 达到/ 充分/ 高/ ,/ 随着/ 温度/ 的/ 升高/ ,/ 固体/ 内部/ 的/ 粒子/ 逐渐/ 变为/ 无序/ 状态/ ,/ 然后/ 再/ 将/ 固体/ 徐徐/ 降温/ ,/ 在/ 降温/ 的/ 过程/ 中/ ,/ 固体/ 内部/ 的/ 粒子/ 逐渐/ 趋于/ 有序/ 状态/ ,/ 在/ 每个/ 温度/ 都/ 达到/ 平衡/ ,/ 直至/ 常温/ ,/ 固体/ 达到/ 基础/ 状态/ ./ 类比/ 优化/ 搜索/ 过程/ ,/ 在/ 一定/ 温度/ 下/ ,/ 搜索/ 从/ 一个/ 状态/ 随机/ 地/ 变化/ 到/ 另/ 一个/ 状态/ ,/ 随着/ 温度/ 的/ 不断/ 降低/ ,/ 直至/ 最低温度/ ,/ 搜索/ 过程/ 以/ 接近/ 1/ 的/ 概率/ 停留/ 在/ 最优/ 解/ ./ SA/ 算法/ 是/ 对/ 爬山/ 算法/ [/ 5/ ]/ 的/ 优化/ 改进/ ,/ 爬山/ 算法/ 在/ 搜索/ 过程/ 中/ 只/ 接受/ 更优/ 的/ 邻近/ 解/ ,/ 直至/ 搜索/ 不到/ 更优/ 解/ 为止/ ,/ 算法/ 简单/ 易/ 实现/ ,/ 但是/ 却/ 极/ 有/ 可能/ 停止/ 在/ 局部/ 最优/ 解/ ./ SA/ 算法/ 引入/ 一个/ 温度/ 参数/ ,/ 当/ 搜索/ 到/ 较差/ 的/ 邻近/ 解时/ ,/ 利用/ 温度/ 参数/ 和/ 目标/ 函数/ 值之差/ 共同/ 确定/ 一个/ 概率/ 参数/ ,/ 利用/ 此/ 概率/ 参数/ 决定/ 是否/ 接受/ 较差/ 的/ 邻近/ 解/ ,/ 概率/ 参数/ P/ 的/ 定义/ 为/ 其中/ ,/ δ/ 为/ 邻近/ 解与/ 当前/ 解/ 的/ 目标/ 函数/ 之差/ ,/ t/ 为/ 温度/ 参数/ ,/ 该/ 参数/ 对应/ 于/ 固体/ 退火/ 过程/ 中/ 的/ 温度/ ,/ 随着/ 搜索/ 过程/ 的/ 不断/ 推进/ 而/ 不断/ 减小/ ,/ 直至/ 算法/ 达到/ 终务为/ 地理/ 编码/ 服务/ ,/ 将/ 物理/ 位置/ 信息/ 转化/ 为/ 行政/ 位置/ 信息/ 的/ 服务/ 为/ 反/ 地理/ 编码/ 服务/ ./ 图/ 1/ 展示/ 了/ 反/ 地理/ 编码/ 服务/ 的/ 一般/ 工作/ 过程/ ,/ 该/ 服务/ 将/ 从/ GPS/ 定位/ 服务/ 获取/ 的/ 物理/ 位置/ 信息/ ,/ 即/ 经纬度/ 坐标/ 转化/ 为/ 相应/ 的/ 行政/ 地址/ 信息/ ,/ 例如/ 经纬度/ 坐标/ (/ 29.919136379842868/ ,/ 117.05622844224358/ )/ 指示/ 的/ 地点/ 为/ “/ 安徽省/ 池州市/ 东至县/ 安庆/ 高速公路/ ”/ ,/ 经纬度/ 坐标/ (/ 28.30449900496494/ ,/ 113.93426589494133/ )/ 指示/ 的/ 地点/ 为/ “/ 湖南省/ 长沙市/ 浏阳市/ 官渡/ 镇/ 桃树/ 坪/ ”/ ./ 该/ 服务/ 以/ 经纬度/ 为/ 输入/ 参数/ ,/ 这些/ 输入/ 参数/ 可以/ 手工/ 直接/ 输入/ ,/ 也/ 可/ 通过/ GPS/ 服务/ 获得/ ./ 止/ 条件/ ./ 在/ 温度/ 下降/ 足够/ 慢时/ ,/ 算法/ 找到/ 全局/ 最优/ 解/ 的/ 概率/ 接近/ 1.3/ 基于/ 模拟退火/ 的/ 位置/ 测试数据/ 生成/ 本文/ 对/ 位置服务/ 的/ 测试方法/ 如图/ 2/ 所示/ ,/ 从图/ 中/ 可以/ 看出/ ,/ 该/ 方法/ 将/ 服务/ 的/ 运行/ 结果/ 作为/ 输入/ 数据/ 生成/ 的/ 反馈/ 信息/ ,/ 为/ 进一步/ 生成/ 输入/ 数据/ 提供/ 参考/ 信息/ 和/ 指导作用/ ./ 其中/ “/ 位置/ 服务平台/ ”/ 节点/ 可能/ 包含/ 一个/ 或/ 多个/ 位置服务/ ,/ “/ 服务/ 结果/ 评价/ ”/ 则/ 根据/ 不同/ 的/ 测试/ 目的/ ,/ 从/ 不同/ 角度/ 对/ 服务/ 的/ 运行/ 结果/ 进行/ 评价/ ./ “/ 贝叶斯/ 分类器/ ”/ 用来/ 预测/ 在/ 某个/ 区域/ 中取/ 到/ 特定/ 类型/ 位置/ 点/ 的/ 概率/ ,/ 服务/ 运行/ 结果/ 和/ 贝叶斯/ 分类器/ 共同/ 为/ 搜索/ 的/ 进一步/ 优化/ 提供/ 指导/ ./ Page43/ ./ 1/ 问题/ 定义/ 对/ 一个/ 给定/ 的/ 地理/ 区域/ D/ ,/ S/ =/ {/ s1/ ,/ s2/ ,/ …/ }/ 是/ D/ 中/ 一系列/ 位置/ 点/ 的/ 集合/ ,/ D/ 的/ 覆盖/ 区域/ 通过/ 经纬度/ 的/ 范围/ 来/ 限定/ ,/ 即/ D/ ./ rangeLng/ =/ [/ Lngl/ ,/ Lngh/ ]/ ,/ D/ ./ rangeLat/ =/ [/ Latl/ ,/ Lath/ ]/ ,/ 其中/ Lngl/ 和/ Latl/ 分别/ 是/ 经度/ 和/ 纬度/ 的/ 下限/ ,/ Lngh/ 和/ Lath/ 则/ 分别/ 为/ 经度/ 和/ 纬度/ 的/ 上限/ ./ si/ ./ lng/ 为点/ si/ 的/ 经度/ 值/ ,/ si/ ./ lat/ 为点/ si/ 的/ 纬度/ 值/ ,/ 对于/ si/ ∈/ S/ ,/ 则/ 有/ Lngl/ / si/ ./ lng/ / Lngh/ ,/ 并且/ Latl/ / si/ ./ lat/ / Lath/ ./ L/ =/ {/ l1/ ,/ l2/ ,/ …/ }/ 为/ 一系列/ 开放/ 的/ 位置服务/ ,/ 这些/ 服务/ 以/ 位置/ 点/ si/ 为/ 输入/ ,/ 我们/ 将/ 服务/ lj/ 对于/ 输入/ si/ 的/ 返回/ 结果/ 定义/ 为/ R/ (/ lj/ ,/ si/ )/ ./ 根据/ 服务/ 测试/ 的/ 不同/ 目的/ 需要/ 为/ 服务/ 生成/ 不同/ 类型/ 的/ 测试数据/ ,/ 这些/ 数据/ 具有/ 不同/ 的/ 属性/ 特征/ ,/ 我们/ 通过/ 示性/ 函数/ value/ (/ s/ )/ 来/ 评价/ 数据/ 的/ 属性/ 特征/ ,/ 函数/ 的/ 不同/ 定义/ 能够/ 表示/ 不同/ 的/ 数据/ 属性/ ,/ 根据/ 函数/ 取值/ 的/ 不同/ 能够/ 实现/ 对/ 测试数据/ 的/ 划分/ ./ 本/ 研究/ 的/ 目标/ 就是/ 针对/ 示性/ 函数/ value/ (/ s/ )/ 的/ 某个/ 特定/ 取值/ v/ ,/ 以/ 尽量少/ 的/ 代价/ 生成/ 尽量/ 多/ 的/ 数据/ ,/ 使得/ value/ (/ s/ )/ =/ v/ ./ 在/ 算法/ 执行/ 过程/ 中/ ,/ 已/ 生成/ 测试数据/ 能够/ 指导/ 测试/ 生成/ 过程/ 的/ 执行/ ,/ 根据/ 已/ 生成/ 数据/ s1/ ,/ s2/ ,/ …/ ,/ sj/ 的/ 示性/ 函数/ 值来/ 预测/ 即将/ 生成/ 的/ 数据/ sj/ +/ 1/ 是否/ 同样/ 能够/ 满足/ value/ (/ sj/ +/ 1/ )/ =/ v/ 的/ 要求/ ,/ 从而/ 大幅提高/ 特定/ 数据/ 的/ 生成/ 效率/ ./ 3.2/ 模拟退火/ 算法/ 生成/ 过程/ 测试/ 生成/ 算法/ 对/ 输入/ 域/ 进行/ 划分/ ,/ 根据/ 测试/ 目的/ 为/ 位置/ 点/ 定义/ 属性/ 特征/ ,/ 基于/ 朴素/ 贝叶斯/ 理论/ (/ NaveBayes/ )/ [/ 6/ ]/ 对/ 位置/ 点/ 进行/ 分类/ ,/ 并/ 计算/ 位置/ 点/ 的/ 类别/ 概率/ ,/ 并/ 利用/ 此/ 概率/ 定义/ 位置/ 点/ 的/ 能量/ 值/ 函数/ ,/ 利用/ 能量/ 函数/ 引导/ 模拟退火/ 算法/ 的/ 进行/ ./ 假设/ 被测/ 服务/ 的/ 输入/ 域/ 是/ 地理/ 区域/ D/ ,/ 测试/ 生成/ 的/ 过程/ 如下/ :/ (/ 1/ )/ 将/ D/ 等/ 分为/ n/ ×/ m/ 个/ 小/ 的/ 子/ 区域/ ,/ 每个/ 子域/ 为/ Dij/ (/ 0/ </ i/ / n/ ,/ 0/ </ j/ / m/ )/ ,/ 用/ Matrix/ (/ D/ ,/ n/ ,/ m/ )/ 表示/ 这样/ 的/ 划分/ ./ (/ 2/ )/ 按照/ 不同/ 的/ 测试/ 目的/ ,/ 为/ 区域/ 内/ 的/ 点/ s/ ,/ 定义/ 示性/ 函数/ value/ (/ s/ )/ ,/ 利用/ 示性/ 函数/ 定义/ 位置/ 点/ s/ 的/ 属性/ ,/ value/ (/ s/ )/ =/ (/ 3/ )/ 利用/ 示性/ 函数/ 定义/ 贝叶斯/ 分类器/ (/ NaveBayesClassifier/ ,/ NBC/ )/ ,/ 测试/ 目的/ 不同/ ,/ 则/ 贝叶斯/ 分类器/ 的/ 含义/ 不同/ ,/ 具体/ 含义/ 将/ 在/ 后序/ 章节/ 的/ 具体/ 实现/ 中/ 介绍/ :/ P/ (/ Dij/ |/ value/ (/ s/ )/ =/ 1/ )/ =/ ∑/ s/ ∈/ DijP/ (/ value/ (/ s/ )/ =/ 1/ )/ =/ ∑/ s/ ∈/ DP/ (/ Dij/ )/ =/ |/ Dij/ |/ // |/ D/ |/ ,/ P/ (/ value/ (/ s/ )/ =/ 1/ |/ Dij/ )/ =/ P/ (/ Dij/ |/ value/ (/ s/ )/ =/ 1/ )/ ×/ (/ 4/ )/ 利用/ 贝叶斯/ 分类器/ 确定/ 在/ 某个/ 区域/ 取到/ 某/ 一类/ 位置/ 点/ 的/ 概率/ ,/ 以/ 每个/ 位置/ 点/ 的/ 概率/ 值/ 定义/ 其/ 能量/ 值/ ,/ 采用/ 模拟退火/ 算法/ 生成/ 测试数据/ ,/ 以/ 能量/ 值/ 函数/ 作为/ 搜索算法/ 的/ 目标/ 函数/ ,/ 指导/ 算法/ 搜索/ 过程/ 的/ 推进/ ./ 对于/ 区域/ Dij/ 内/ 已/ 探索/ 的/ q/ 个点/ History/ =/ {/ s1/ ,/ s2/ ,/ …/ ,/ sq/ }/ ,/ 搜索/ 得到/ sq/ 的/ 邻近/ 点/ sq/ +/ 1/ ,/ 且/ sq/ +/ 1/ ∈/ Dij/ ,/ 则/ 其/ 能量/ 值/ 的/ 定义/ 为/ Energy/ (/ sq/ +/ 1/ )/ =/ value/ (/ sq/ +/ 1/ )/ ×/ P/ (/ value/ (/ sq/ +/ 1/ )/ =/ 1/ |/ Dij/ )/ ,/ 能量/ 值/ 的/ 变化/ 为/ Δ/ Energy/ =/ Energy/ (/ sq/ +/ 1/ )/ -/ Energy/ (/ sq/ )/ ./ 模拟退火/ 算法/ 根据/ 能量/ 值/ 的/ 变化/ 来/ 确定/ 下/ 一步/ 搜索/ 是/ 继续/ 在/ 本/ 区域/ 进行/ 还是/ 进入/ 新/ 的/ 未/ 探索/ 区域/ 重新/ 开始/ 搜索/ ./ 如果/ 能量/ 值/ 增大/ ,/ 则/ 继续/ 在/ 本/ 区域/ 搜索/ ;/ 如果/ 能量/ 值/ 减小/ ,/ 则/ 以/ 一定/ 概率/ 继续/ 在/ 本/ 区域/ 进行/ 搜索/ ,/ 否则/ 在/ 其余/ 未/ 探索/ 子/ 区域/ 中/ 选取/ Dij/ 重新/ 开始/ 搜索/ ,/ 并且/ 在/ 所有/ 未/ 探索/ 子/ 区域/ 中/ P/ (/ value/ (/ s/ )/ =/ 1/ |/ Dij/ )/ 最大/ ./ 算法/ 的/ 具体/ 过程/ 如下/ :/ 算法/ 1/ ./ 生成/ 具有/ 某/ 特定/ 属性/ 的/ 测试数据/ ./ 输入/ :/ 指定/ 区域/ D/ ,/ 用/ 经纬度/ 范围/ 表示/ 输出/ :/ 指定/ 区域/ 选取/ 的/ 若干点/ 的/ 经纬度/ 值/ SelectasetofpointsHistory/ =/ {/ s1/ ,/ s2/ ,/ …/ ,/ sq/ }/ inDrandomlySelectaninitialtemperaturet/ >/ 0REPEATPage5UNTILtreachedthethresholdorDissmallenough/ 在/ 算法/ 1/ 中/ 包含/ 3/ 层/ 循环/ ,/ 最/ 内层/ 循环/ 表示/ 在/ 一个/ 子域/ 中/ 的/ 搜索/ 过程/ ,/ 由/ 能量/ 值/ 的/ 变化/ 来/ 引导/ ,/ 每/ 生成/ 一个/ 令/ value/ (/ s/ )/ =/ 1/ 的/ 点将/ 增加/ 该/ 区域/ 的/ 置信度/ ,/ 而/ 生成/ 一个/ value/ (/ s/ )/ =/ 0/ 的/ 点/ 则/ 会/ 降低/ 该/ 区域/ 的/ 图/ 3/ 算法/ 执行/ 示意图/ 置信度/ ./ 本层/ 循环/ 终止/ 有/ 3/ 种/ 情况/ :/ (/ 1/ )/ 不/ 接受/ 新/ 生成/ 的/ 较差/ 解/ ;/ (/ 2/ )/ 在/ 该/ 子域/ 中取/ 到/ 足够/ 多/ 的/ 点/ ;/ (/ 3/ )/ 在/ 该/ 划分/ 层次/ 的/ 循环/ 次数/ 已/ 达到/ 最大/ 限制/ ./ 中间层/ 循环/ 表示/ 对/ 区域/ D/ 的/ 各个/ 子域/ 进行/ 搜索/ ,/ 直到/ 在/ D/ 中/ 取得/ 了/ 足够/ 的/ 点/ ./ 最/ 外层/ 循环/ 则/ 是/ 对/ 子域/ 进行/ 迭代/ 划分/ 的/ 过程/ ,/ 本层/ 循环/ 的/ 终止/ 条件/ 包含/ 两种/ 情况/ :/ (/ 1/ )/ 温度/ 参数/ 减小/ 到/ 预设/ 定/ 的/ 阈值/ ;/ (/ 2/ )/ 区域/ 划分/ 细化/ 到/ 了/ 预定/ 程度/ ./ 3.3/ 以/ 区域/ 覆盖/ 为/ 优化/ 目标/ 的/ 算法/ 对/ 被/ 测/ 服务/ 输入/ 域/ 的/ 覆盖/ 分为/ 两个/ 算法/ 来/ 完成/ ,/ 首先/ 是/ 对/ 有效/ 点/ 密集区/ 的/ 探索/ ,/ 该/ 算法/ 的/ 目的/ 是/ 要/ 尽可能/ 多/ 的/ 找到/ 有效/ 点/ ,/ 有效/ 点/ 聚集区/ 的/ 确定/ 是/ 后续/ 测试/ 生成/ 的/ 基础/ ,/ 使/ 测试/ 生成/ 能够/ 直接/ 在/ 算法/ 确定/ 的/ 有效/ 点/ 聚集区/ 进行/ ,/ 大大/ 提升/ 了/ 有效/ 点/ 的/ 生成/ 概率/ ./ 如果/ 在/ 探索/ 有效/ 点/ 聚集区/ 的/ 过程/ 中/ 已经/ 生成/ 了/ 足够/ 多/ 的/ 有效/ 点/ ,/ 也/ 可以/ 直接/ 利用/ 这些/ 数据/ 对/ 服务/ 进行/ 测试/ ./ 利用/ 有效/ 点/ 对/ 多个/ 位置服务/ 接口/ 进行/ 测试/ ,/ 通过/ 对比/ 不同/ 接口/ 的/ 返回/ 结果/ ,/ 评价/ 服务/ 的/ 正确性/ ./ 图/ 3/ 为/ 探索/ 有效/ 点/ 密集区/ 算法/ 执行/ 过程/ 中/ 一个/ Page6/ 片段/ 的/ 示意图/ ,/ 图中/ (/ a/ )/ 表示/ 的/ 地理/ 范围/ 最大/ ,/ 包含/ 乌鲁木齐/ 及其/ 周边地区/ ,/ 将/ 该/ 地区/ 划分/ 为/ 3/ ×/ 3/ 个子/ 域/ ,/ 包含/ 有效/ 点/ 密集区/ 和/ 稀疏/ 区/ ,/ 从图/ 中/ 可以/ 看出/ ,/ 该/ 算法/ 能够/ 在/ 有效/ 点/ 密集区/ 取得/ 更/ 多/ 的/ 点/ ,/ 从而/ 保证/ 生成/ 参数/ 的/ 质量/ ./ 图中/ 的/ 箭头/ 表示/ 搜索/ 路径/ ,/ 说明/ 对/ 各个/ 子域/ 的/ 搜索/ 顺序/ ./ 其中/ D21/ 为/ 有效/ 点/ 密集区/ ,/ 在/ 该/ 子域/ 中/ 得到/ 的/ 点/ 最/ 多/ ,/ (/ b/ )/ 即/ 是/ 对/ D21/ 进一步/ 划分/ 得到/ 的/ 结果/ ,/ 在/ 对此/ 区域/ 进一步/ 划分/ 后/ ,/ 能够/ 看出/ 在/ 此/ 区域/ 仍然/ 可以/ 区分/ 出/ 有效/ 点/ 密集区/ 和/ 稀疏/ 区/ ,/ 同样/ 的/ ,/ 在/ 有效/ 点/ 密集区/ 能够/ 取得/ 更/ 多/ 的/ 点/ ./ (/ c/ )/ 显示/ 了/ (/ a/ )/ 中/ D33/ 区域/ 放大/ 后/ 的/ 情况/ ,/ 从图/ 中/ 可以/ 清楚/ 的/ 看出/ 该/ 区域/ 为/ 有效/ 点/ 稀疏/ 区/ ,/ 因此/ 不/ 对/ 该/ 区域/ 进行/ 进一步/ 的/ 划分/ ./ 其次/ 是/ 对/ 有效/ 点/ 稀疏/ 区/ 的/ 探索/ ,/ 有效/ 点/ 稀疏/ 区域/ 往往/ 包含/ 很少/ 的/ 有效/ 点/ ,/ 因此/ 服务/ 也/ 常常/ 会/ 在/ 这样/ 的/ 区域/ 遗留/ 数据/ 空白/ ,/ 导致/ 服务/ 数据/ 信息/ 的/ 不/ 完整/ ./ 该/ 算法/ 的/ 目的/ 是/ 尽可能/ 广/ 的/ 覆盖/ 有效/ 点/ 稀疏/ 区/ ,/ 利用/ 有效/ 点/ 稀疏/ 区内/ 取/ 的/ 点/ 来/ 检验/ 服务/ 信息/ 的/ 完备/ 程度/ ./ 算法/ 认为/ 在/ 有效/ 点/ 密集区/ 选取/ 少量/ 的/ 点/ 即可/ 代表/ 该/ 区域/ ,/ 而/ 在/ 有效/ 点/ 稀疏/ 区/ 却/ 需要/ 选取/ 大量/ 的/ 点/ 对/ 服务/ 进行/ 测试/ ,/ 以/ 发现/ 服务/ 的/ 潜在/ 问题/ ./ 该/ 算法/ 与/ 探索/ 有效/ 点/ 聚集区/ 算法/ 存在/ 以下/ 明显/ 区别/ :/ (/ 1/ )/ 此/ 算法/ 搜索/ 过程/ 朝/ 能量/ 值/ 减少/ 的/ 方向/ 进行/ ./ 当/ 算法/ 认为/ 当前/ 搜索/ 区域/ 为/ 有效/ 点/ 聚集区/ 时/ ,/ 则/ 在/ 剩余/ 的/ 子域/ 中/ 选取/ 一个/ 无效/ 点/ 概率/ 最大/ ,/ 并且/ 与/ 当前/ 搜索/ 区域/ 距离/ 最远/ 的/ 区域/ 进行/ 搜索/ ./ (/ 2/ )/ 子/ 区域/ 探索/ 完成/ 的/ 标准/ 包括/ 两种/ :/ ①/ 算法/ 认为/ 该/ 区域/ 为/ 有效/ 点/ 聚集区/ ;/ ②/ 算法/ 认为/ 该/ 区域/ 为/ 有效/ 点/ 稀疏/ 区/ ,/ 并且/ 在/ 该/ 区域/ 已/ 探索/ 足够/ 多/ 的/ 点/ ./ 3.3/ ./ 1/ 有效/ 点/ 聚集区/ 假设/ 在/ 地球/ 上/ 存在/ 人口稠密/ 的/ 人类/ 聚集区/ ,/ 也/ 存在/ 人口/ 稀疏/ 区/ ,/ 这/ 两类/ 区域/ 在/ 经纬度/ 定义/ 方面/ 是/ 一致/ 的/ ,/ 但/ 在/ 行政/ 地址/ 编码/ 方面/ 却/ 存在/ 着/ 巨大/ 差异/ :/ (/ 1/ )/ 人口稠密/ 区域/ ,/ 例如/ 城市/ ,/ 行政/ 地址/ 编码/ 的/ 区域/ 粒度/ 较/ 小/ ,/ 距离/ 很近/ 的/ 两个/ 建筑/ 通常/ 都/ 会/ 有/ 不同/ 的/ 地址/ 信息/ ,/ 也就是说/ 经纬度/ 的/ 较/ 小/ 改变/ 也/ 会/ 使/ 服务/ 返回/ 不同/ 的/ 输出/ 结果/ ,/ 我们/ 称/ 这样/ 的/ 区域/ 为/ 有效/ 点/ 聚集区/ ./ (/ 2/ )/ 人口/ 稀疏/ 区域/ ,/ 例如/ 沙漠/ 、/ 戈壁/ 、/ 海洋/ 等/ ,/ 通常/ 不/ 存在/ 行政/ 地址/ 编码/ 信息/ ,/ 也就是说/ 服务/ 返回/ 结果/ 为空/ ./ 由于/ 这样/ 的/ 区域/ 通常/ 非常广阔/ ,/ 就/ 导致/ 相差/ 巨大/ 的/ 两组/ 输入/ 参数/ 也/ 可能/ 返回/ 相同/ 的/ 执行/ 结果/ ,/ 我们/ 称/ 这样/ 的/ 区域/ 为/ 有效/ 点/ 稀疏/ 区/ ,/ 例如/ 太平洋/ ,/ 纬度/ 跨过/ 151/ 度/ ,/ 经度/ 横跨/ 177/ 度/ ,/ 在/ 这个/ 区域/ 内/ 就/ 可能/ 生成/ 大量/ 导致/ 输出/ 结果/ 为空/ 的/ 数据/ ./ (/ 3/ )/ 有效/ 点/ 稀疏/ 区域/ 也/ 可能/ 存在/ 小/ 范围/ 的/ 有效/ 点/ 聚集区/ ,/ 例如/ 在/ 太平洋/ 中/ 分布/ 着/ 众多/ 岛屿/ ,/ 这些/ 岛屿/ 包括/ 人口/ 稀疏/ 岛屿/ 和/ 人口稠密/ 岛屿/ ,/ 人口稠密/ 岛屿/ 则/ 必然/ 是/ 有效/ 点/ 聚集区/ ,/ 例如/ 台湾岛/ 就是/ 太平洋/ 中/ 的/ 一个/ 人口稠密/ 岛屿/ ./ 区域/ 覆盖/ 算法/ 建立/ 在/ 两个/ 基本/ 假设/ 的/ 基础/ 上/ :/ (/ 1/ )/ 在/ 某/ 区域/ 内/ 发现/ 的/ 有效/ 点越/ 多/ ,/ 则/ 该/ 区域/ 越有/ 可能/ 是/ 有效/ 点/ 聚集/ 区域/ ;/ (/ 2/ )/ 有效/ 点/ 密集区/ 附近/ 的/ 区域/ 也/ 极/ 有/ 可能/ 是/ 有效/ 点/ 密集区/ ./ 3.3/ ./ 2/ 贝叶斯/ 分类器/ 设计/ 区域/ 覆盖/ 算法/ 主要/ 关注/ 服务/ 对/ 一个/ 给定/ 的/ 点/ 是否/ 能够/ 返回/ 一个/ 有效/ 的/ 地址/ 信息/ ,/ 因此/ 对于/ 每个/ 选定/ 的/ 点/ s/ ,/ 定义/ 示性/ 函数/ 如下/ :/ 其中/ s/ ./ addr/ 为点/ s/ 的/ 行政/ 地址/ 编码/ ,/ 为/ 被/ 测/ 服务/ 反/ 地理/ 编码/ 服务/ 运行/ 的/ 输出/ 结果/ ./ 对于/ 点/ s/ ,/ 如果/ 返回/ 的/ 地址/ 信息/ 不为/ 空/ ,/ 则/ 示性/ 函数/ value/ (/ s/ )/ 的/ 返回值/ 为/ 1/ ,/ 说明/ 该点/ 为/ 有效/ 点/ ;/ 否则/ 为/ 0/ ,/ 说明/ 该点/ 为/ 无效/ 点/ ./ 根据/ 某个/ 点所处/ 的/ 区域/ ,/ 利用/ 贝叶斯/ 分类器/ 能够/ 预测/ 该点/ 为/ 有效/ 点/ // 无效/ 点/ 的/ 概率/ ./ 为/ 预测/ 有效/ 点/ 概率/ ,/ 贝叶斯/ 分类器/ 的/ 具体/ 设计/ 如下/ :/ (/ 1/ )/ 在/ 区域/ D/ 中/ 随机/ 选取/ q/ 个点/ 作为/ 训练样本/ ,/ 并且/ 对于/ 划分/ Matrix/ (/ D/ ,/ n/ ,/ m/ )/ ,/ 落/ 在/ 每个/ 子域/ 中/ 的/ 点/ 的/ 个数/ 相同/ ,/ 即/ |/ D11/ |/ =/ |/ D12/ |/ =/ …/ =/ |/ Dnm/ |/ ,/ 并且/ |/ D11/ |/ +/ |/ D12/ |/ +/ …/ +/ |/ Dnm/ |/ =/ q/ ,/ 其中/ |/ Dij/ |/ 表示/ 在/ 子域/ Dij/ 中/ 选取/ 的/ 点/ 的/ 个数/ ;/ (/ 2/ )/ 计算/ 样本/ 中/ 有效/ 点落/ 在/ 区域/ Dij/ 中/ 的/ 概率/ P/ (/ Dij/ |/ value/ (/ s/ )/ =/ 1/ )/ =/ ∑/ s/ ∈/ Dij/ (/ 3/ )/ 计算/ 训练样本/ 中/ 有效/ 点/ 的/ 概率/ (/ 4/ )/ 计算/ 训练样本/ 中/ 的/ 点/ 落/ 在/ 区域/ Dij/ 中/ 的/ 概率/ P/ (/ Dij/ )/ =/ |/ Dij/ |/ // |/ D/ |/ ;/ (/ 5/ )/ 根据/ 以上/ 计算/ ,/ 预测/ 区域/ Dij/ 中点/ s/ 为/ 有效/ 点/ 的/ 概率/ P/ (/ value/ (/ s/ )/ =/ 1/ |/ Dij/ )/ =/ P/ (/ Dij/ |/ value/ (/ s/ )/ =/ 1/ )/ ×/ P/ (/ value/ (/ s/ )/ =/ 1/ )/ // P/ (/ Dij/ )/ ./ 由于/ 无效/ 点/ 的/ 示性/ 函数/ 值为/ 0/ ,/ 因此/ 定义/ 无效/ 点/ 的/ 贝叶斯/ 分类器/ 时/ 需要/ 借助/ 有效/ 点/ 的/ 数量/ ,/ 具体/ 定义/ 为/ P/ (/ Dij/ |/ value/ (/ s/ )/ =/ 0/ )/ =/ |/ Dij/ |/ -/ ∑/ s/ ∈/ DijP/ (/ value/ (/ s/ )/ =/ 0/ )/ =/ 1/ -/ ∑/ s/ ∈/ DP/ (/ Dij/ )/ =/ |/ Dij/ |/ // |/ D/ |/ ,/ Page7P/ (/ value/ (/ s/ )/ =/ 0/ |/ Dij/ )/ =/ P/ (/ Dij/ |/ value/ (/ s/ )/ =/ 0/ )/ ×/ 其中/ P/ (/ Dij/ |/ value/ (/ s/ )/ =/ 0/ )/ 为/ 无效/ 点落/ 在/ D/ 中/ 的/ 先验概率/ ,/ P/ (/ value/ (/ s/ )/ =/ 0/ )/ 为/ 训练样本/ 中/ 无效/ 点/ 的/ 概率/ ,/ P/ (/ value/ (/ s/ )/ =/ 0/ |/ Dij/ )/ 是/ 区域/ Dij/ 中/ 的/ 点/ s/ 为/ 无效/ 点/ 的/ 后验/ 概率/ ./ 3.4/ 以/ 故障/ 检测/ 为/ 优化/ 目标/ 的/ 算法/ 测试人员/ 并/ 没有/ 关于/ 全国/ 甚至/ 全球/ 所有/ 地理坐标/ 及其/ 行政/ 地址/ 编码/ 信息/ 的/ 数据库/ ,/ 因此/ 当/ 服务/ 对/ 某/ 一组/ 输入/ 数据/ 返回/ 执行/ 结果/ 后/ ,/ 测试人员/ 也/ 无法/ 判断/ 其/ 结果/ 是否/ 正确/ ,/ 测试/ 是否/ 通过/ ./ 为/ 判定/ 测试/ 结果/ ,/ 本文/ 引入/ 投票/ 机制/ ,/ 不同/ 服务提供商/ 提供/ 的/ 反/ 地理/ 编码/ 服务/ 具有/ 功能/ 上/ 的/ 等价/ 性/ ,/ 在/ 互联网/ 上/ 能够/ 形成/ 互为/ 备份/ 的/ 容错/ 体系/ 架构/ ,/ 服务/ 的/ 运行/ 结果/ 具有/ 可比性/ ,/ 用户/ 可以/ 对/ 不同/ 服务/ 的/ 结果/ 进行/ 对比/ 判断/ ,/ 从中/ 选取/ 用户/ 认为/ 最优/ 的/ 结果/ ./ 利用/ 相同/ 的/ 输入/ 数据/ 调用/ 不同/ 的/ 反/ 地理/ 编码/ 服务/ ,/ 将/ 这些/ 服务/ 的/ 运行/ 结果/ 进行/ 对比/ ,/ 如果/ 所有/ 服务/ 的/ 运行/ 结果/ 均/ 相同/ ,/ 则/ 认为/ 这些/ 结果/ 均/ 正确/ ,/ 如果/ 存在/ 不同/ 的/ 返回/ 结果/ ,/ 则/ 认为/ 存在/ 隐藏/ 故障/ ,/ 需要/ 进一步/ 研究/ 分析/ ./ 本文/ 将/ 服务/ 故障/ 总结/ 为/ 以下/ 3/ 类/ :/ (/ 1/ )/ SF1/ :/ 对于/ 同一个/ 位置/ 点/ x/ ,/ 服务/ A/ 返回/ 结果/ 为空/ ,/ 认为/ 其为/ 无效/ 点/ ,/ 而/ 服务/ B/ 返回/ 结果/ 为/ 一个/ 有效/ 的/ 行政/ 地址/ ,/ 即/ 认为/ 该点/ 为/ 有效/ 点/ ;/ (/ 2/ )/ SF2/ :/ 对于/ 同一个/ 位置/ 点/ x/ ,/ 被测/ 服务/ 的/ 返回值/ 均/ 不/ 为/ 空/ ,/ 但/ 服务/ A/ 返回/ 结果/ 为/ 服务/ B/ 返回/ 结果/ 的/ 子串/ ,/ 也就是说/ 服务/ A/ 的/ 结果/ 指示/ 的/ 行政区域/ 较/ 服务/ B/ 的/ 结果/ 范围/ 更大/ ,/ 而/ 服务/ B/ 的/ 返回/ 结果/ 指示/ 的/ 地址/ 更加/ 精确/ ;/ (/ 3/ )/ SF3/ :/ 对于/ 同一个/ 位置/ 点/ x/ ,/ 被测/ 服务/ 的/ 返回值/ 均/ 不/ 为/ 空/ ,/ 但/ 服务/ A/ 和/ 服务/ B/ 的/ 返回/ 结果/ 不同/ ,/ 并且/ 此/ 错误/ 类型/ 不/ 包含/ SF2/ 的/ 情况/ ./ 3.4/ ./ 1/ 位置服务/ 故障/ 模型/ 假设/ 故障/ 驱动/ 算法/ 要/ 以/ 尽量少/ 的/ 测试数据/ 发现/ 尽量/ 多/ 的/ 服务/ 潜在/ 缺陷/ ,/ 我们/ 称/ 能够/ 发现/ 服务/ 潜在/ 缺陷/ 的/ 数据/ 为/ 缺陷/ 数据/ ./ 位置/ 点/ 的/ 行政/ 地址/ 编码/ 具有/ 一定/ 的/ 区域/ 连续性/ ,/ 例如/ “/ 北京市/ 海淀区/ 清华大学/ 南楼/ 11/ 号楼/ ”/ 和/ “/ 北京市/ 海淀区/ 清华大学/ 南楼/ 12/ 号楼/ ”/ 是/ 位于/ 清华大学/ 校内/ 南北/ 相邻/ 的/ 两栋/ 楼/ ,/ 地址/ 编码/ 也/ 是/ 相邻/ 的/ ,/ 如果/ 某/ 位置服务/ 为/ 其中/ 一个/ 地点/ 的/ 返回/ 结果/ 是/ 错误/ 的/ ,/ 则/ 为/ 另/ 一个/ 地点/ 的/ 返回/ 结果/ 也/ 极/ 有/ 可能/ 是/ 不/ 正确/ 的/ ./ 由此/ 我们/ 可以/ 为/ 位置服务/ 的/ 故障/ 模型/ 提出/ 如下/ 假设/ :/ (/ 1/ )/ 缺陷/ 密集/ 假设/ ,/ 我们/ 认为/ 缺陷/ 数据/ 存在/ 一定/ 的/ 聚集/ 效应/ ,/ 也就是说/ 如果/ 点/ s/ 为/ 缺陷/ 数据/ ,/ 则/ 其/ 附近/ 的/ 点/ 为/ 缺陷/ 数据/ 的/ 概率/ 也/ 较/ 高/ ;/ (/ 2/ )/ 对于/ 某个/ 区域/ Dij/ ,/ 如果/ 在/ 其中/ 找到/ 的/ 缺陷/ 数据/ 占/ 比/ 很/ 低/ ,/ 则/ 认为/ 在/ 该/ 区域/ 搜索/ 到/ 缺陷/ 数据/ 的/ 概率/ 也/ 很/ 低/ ,/ 应该/ 转移/ 到/ 其他/ 区域/ 进行/ 搜索/ ./ 3.4/ ./ 2/ 贝叶斯/ 分类器/ 设计/ 根据/ 故障/ 驱动/ 算法/ 的/ 目的/ ,/ 将/ 位置/ 点/ s/ 的/ 示性/ 函数/ 定义/ 为/ valueF/ (/ s/ )/ =/ 该/ 函数/ 的/ 含义/ 为/ :/ 对于/ 给/ 定点/ s/ 及/ 一组/ 被测/ 服务/ ,/ 如果/ 这些/ 服务/ 的/ 返回/ 结果/ 均/ 相同/ ,/ 则/ 示性/ 函数/ valueF/ (/ s/ )/ 的/ 值/ 为/ 0/ ;/ 只要/ 这些/ 结果/ 中/ 存在/ 差异/ ,/ 则/ 函数/ 值为/ 1/ ./ 当/ 示性/ 函数/ 值为/ 1/ 时/ ,/ 说明/ 不同/ 服务/ 对于/ 同样/ 的/ 输入/ 产生/ 了/ 不同/ 结果/ ,/ 也就是说/ 该/ 输入/ 点/ s/ 能够/ 发现/ 服务/ 缺陷/ ,/ 为/ 缺陷/ 数据/ ./ 根据/ 示性/ 函数/ 的/ 定义/ ,/ 地图/ 中/ 的/ 点/ 可以/ 分为/ 两类/ :/ 缺陷/ 数据/ 和/ 非/ 缺陷/ 数据/ ./ 根据/ 某个/ 点所处/ 的/ 区域/ ,/ 利用/ 贝叶斯/ 分类器/ 能够/ 预测/ 该点/ 为/ 缺陷/ 数据/ 的/ 概率/ ./ 叶斯/ 分类器/ 的/ 设计/ 同/ 3.3/ ./ 2/ 节/ 类似/ ,/ 只是/ 其中/ 的/ 示性/ 函数/ 定义/ 不同/ ,/ 即/ P/ (/ Dij/ |/ valueF/ (/ s/ )/ =/ 1/ )/ =/ ∑/ s/ ∈/ DijP/ (/ valueF/ (/ s/ )/ =/ 1/ )/ =/ ∑/ s/ ∈/ DP/ (/ Dij/ )/ =/ |/ Dij/ |/ // |/ D/ |/ ,/ P/ (/ valueF/ (/ s/ )/ =/ 1/ |/ Dij/ )/ =/ P/ (/ Dij/ |/ valueF/ (/ s/ )/ =/ 1/ )/ ×/ P/ (/ Dij/ |/ valueF/ (/ s/ )/ =/ 1/ )/ 为/ 从/ 区域/ Dij/ 中取/ 到/ 缺陷/ 数据/ 的/ 先验概率/ ,/ 而/ P/ (/ valueF/ (/ s/ )/ =/ 1/ |/ Dij/ )/ 则/ 是从/ 区域/ Dij/ 中/ 随机/ 选取/ 一个点/ x/ ,/ 该点/ 是/ 缺陷/ 数据/ 的/ 后验/ 概率/ ./ 3.5/ 案例/ 分析/ 本节/ 将/ 具体/ 介绍/ 以上/ 两种/ 优化/ 搜索算法/ 的/ 执行/ 过程/ ./ 将/ 经纬度/ 范围/ 分别/ 为/ [/ 110/ ,/ 150/ ]/ 和/ [/ 35/ ,/ 53/ ]/ 的/ 矩形/ 区域/ 作为/ 输入/ 域/ ,/ 首先/ 将/ 该/ 区域/ 划分/ 为/ 2/ ×/ 2/ 个子/ 区域/ ,/ 分别/ 为/ D1/ (/ [/ 110/ ,/ 130/ ]/ ,/ [/ 35/ ,/ 44/ ]/ )/ 、/ D2/ (/ [/ 110/ ,/ 130/ ]/ ,/ (/ 44/ ,/ 53/ ]/ )/ 、/ D3/ (/ (/ 130/ ,/ 150/ ]/ ,/ [/ 35/ ,/ 44/ ]/ )/ 、/ D4/ (/ (/ 130/ ,/ 150/ ]/ ,/ (/ 44/ ,/ 53/ ]/ )/ ,/ 从/ 每个/ 子/ 区域/ 中/ 随机/ 选取/ 25/ 个点/ ,/ 共/ 100/ 个点/ 对/ 贝叶斯/ 分类器/ 进行/ 训练/ ,/ 从中/ 选取/ 一个/ 概率/ 值/ 最高/ 的/ 子/ 区域/ 进行/ 优化/ 搜索/ ./ (/ 1/ )/ 以/ 区域/ 覆盖/ 为/ 优化/ 目标/ 的/ 算法/ 利用/ 训练/ 数据/ 集/ 计算/ 从/ D1/ 、/ D2/ 、/ D3/ 、/ D4/ 中取/ 到/ 有效/ 点/ 的/ 概率/ ,/ 分别/ 为/ 0.07/ 、/ 0.09/ 、/ 0/ 、/ 0/ ,/ 可以/ 看出/ 从/ D2/ 中/ 能够/ 取/ 到/ 有效/ 点/ 的/ 概率/ 最高/ ,/ 因此/ 首先/ 对/ D2/ 进行/ 进一步/ 优化/ 搜索/ ./ 表/ 1/ 是从/ 搜索/ 过程/ 中/ 截取/ 的/ 一个/ 片段/ ,/ 其中/ 第/ 1/ 行/ ,/ 虽然/ 返回值/ 不为/ 空/ ,/ 但/ 在/ 该子/ 区域/ 取/ 到/ 有效/ 点/ 的/ 概率/ 为/ 0/ ,/ 因此/ 其/ 能量/ 值为/ 0/ ;/ 第/ 2/ 行则/ 因为/ 其/ 返回/ 结果/ 为空/ ,/ 因此/ 能量/ 值为/ 0/ ./ 当/ Page8/ 搜索/ 得到/ 的/ 新解/ 不/ 被/ 接受/ 时/ ,/ 则/ 转向/ 下/ 一个/ 子/ 区域/ 进行/ 继续/ 搜索/ ,/ 直到/ 达到/ 算法/ 要求/ 的/ 终止/ 条件/ ./ 步骤/ 序号/ 12345/ [/ 110/ ,/ 120/ ]/ ,/ (/ 44/ ,/ 48.5/ ]/ [/ 110/ ,/ 120/ ]/ ,/ (/ 48.5/ ,/ 53/ ]/ (/ 120/ ,/ 130/ ]/ ,/ (/ 44/ ,/ 48.5/ ]/ (/ 120/ ,/ 130/ ]/ ,/ (/ 44/ ,/ 48.5/ ]/ (/ 120/ ,/ 130/ ]/ ,/ (/ 44/ ,/ 48.5/ ]/ (/ 2/ )/ 以/ 故障/ 检测/ 为/ 优化/ 目标/ 的/ 算法/ 利用/ 训练/ 数据/ 集/ 计算/ 从/ D1/ 、/ D2/ 、/ D3/ 、/ D4/ 中取/ 到/ 缺陷/ 数据/ 的/ 概率/ ,/ 分别/ 为/ 0.09/ 、/ 0/ 、/ 0/ 、/ 0/ ,/ 可以/ 看出/ 从/ D1/ 中取/ 到/ 缺陷/ 数据/ 的/ 概率/ 最大/ ,/ 因此/ 首先/ 对/ D1/ 进行/ 优化/ 搜索/ ./ 表/ 2/ 是从/ 搜索/ 过程/ 中/ 截取/ 的/ 一个/ 片段/ ,/ 其中/ 第/ 3/ 行/ 的/ 新解/ 被/ 接受/ ,/ 由于/ 此时/ 已/ 达到/ 该子/ 区域/ 的/ 采样/ 上限/ ,/ 因此/ 转向/ 下/ 一个/ 子/ 区域/ 进行/ 搜索/ ;/ 第/ 4/ 行/ 的/ 解/ 虽然/ 使/ 能量/ 值/ 降低/ ,/ 但/ 仍然/ 被/ 接受/ ,/ 这是/ 由于/ 模拟退火/ 算法/ 能够/ 以/ 一定/ 概率/ 接受/ 较差/ 的/ 解/ ./ 步骤/ 序号/ 12345/ [/ 110/ ,/ 120/ ]/ [/ 35/ ,/ 39.5/ ]/ [/ 110/ ,/ 120/ ]/ [/ 35/ ,/ 39.5/ ]/ [/ 110/ ,/ 120/ ]/ [/ 35/ ,/ 39.5/ ]/ (/ 120/ ,/ 130/ ]/ ,/ (/ 39.5/ ,/ 44/ ]/ (/ 120/ ,/ 130/ ]/ ,/ (/ 39.5/ ,/ 44/ ]/ 4/ 实验/ 与/ 评估/ 4.1/ 实验/ 设置/ 本/ 实验/ 以高德/ AndroidLocationAPI/ 、/ 百度/ AndroidMapAPI/ 、/ 百度/ Web/ 、/ 腾讯/ AndroidMapSDK/ 这/ 4/ 个/ 位置服务/ 为/ 被/ 测/ 服务/ ,/ 以/ 算法/ 1/ 生成/ 的/ 测试数据/ 集/ 分别/ 调用/ 这/ 4/ 个/ 服务/ ,/ 通过/ 对/ 输出/ 结果/ 的/ 比较/ ,/ 评价/ 服务/ 的/ 正确性/ ./ 算法/ 中/ 各/ 参数/ 具体/ 取值/ 的/ 设定/ 如下/ :/ (/ 1/ )/ 输入/ 参数/ 的/ 取值/ 范围/ ,/ 经度/ 范围/ 为/ [/ 110/ ,/ 150/ ]/ ,/ 纬度/ 范围/ 为/ [/ 35/ ,/ 53/ ]/ ./ (/ 2/ )/ 在/ 输入/ 域/ 范围/ 内/ 随机/ 选取/ 的/ 初始/ 点集/ 的/ 规模/ 为/ 100/ 个点/ ,/ 即/ 参数/ q/ 为/ 100/ ./ (/ 3/ )/ 经过/ 多次/ 实验/ ,/ 将/ 区域/ 划分/ 参数/ n/ 和/ m/ 的/ 取值/ 确定/ 为/ n/ =/ m/ =/ 2/ ,/ 此时/ 算法/ 能/ 达到/ 更加/ 理想/ 的/ 收缩/ 效果/ ./ (/ 4/ )/ 初始/ 温度/ t/ 设定/ 为/ 250/ ,/ 降温/ 系数/ 为/ 0.98/ ./ (/ 5/ )/ 算法/ 最/ 内层/ 循环/ 的/ 循环/ 次数/ 上限/ 设定/ 为/ 100/ ./ (/ 6/ )/ 每个/ 子域/ 中/ 采样/ 点/ 的/ 数量/ 上限/ 设定/ 为/ 10/ ,/ 区域/ 划分/ 每/ 一层/ 采样/ 点/ 的/ 数量/ 上限/ 设定/ 为/ 100/ ./ (/ 7/ )/ 算法/ 终止/ 条件/ 中/ 温度/ 系数/ 的/ 阈值/ 为/ 0.05/ ,/ 区域/ 划分/ 的/ 阈值/ 为/ 经度/ 或者/ 纬度/ 跨度/ 为/ 0.05/ ./ 以上/ 循环/ 次数/ 以及/ 采样/ 点/ 阈值/ 的/ 设定/ 均/ 考虑/ 了/ 移动/ 终端/ 以及/ 无线网络/ 的/ 限制/ 条件/ ,/ 将/ 对/ API/ 的/ 访问/ 次数/ 控制/ 在/ 一个/ 可以/ 接受/ 的/ 范围/ 内/ ./ 4.2/ 实验/ 结果/ 实验/ 选取/ 的/ 输入/ 域/ 在/ 地球/ 上/ 南北/ 跨度/ 大约/ 为/ 2000/ 公里/ ,/ 东西/ 跨度/ 大约/ 为/ 3500/ 公里/ ,/ 覆盖面积/ 约/ 为/ 700/ 万平方公里/ ,/ 其中/ 包括/ 人口稠密/ 的/ 城市/ 、/ 农村/ 以及/ 人烟稀少/ 的/ 森林/ 、/ 海洋/ 等/ ./ 下面/ 总结/ 了/ 有效/ 点/ 聚集区/ 探索/ 算法/ 和/ 故障/ 驱动/ 算法/ 的/ 实验/ 结果/ ,/ 实验/ 结果/ 基于/ 算法/ 的/ 多次/ 运行/ ,/ 对/ 多次/ 运行/ 结果/ 取/ 平均值/ 获得/ ./ 4.2/ ./ 1/ 以/ 区域/ 覆盖/ 为/ 优化/ 目标/ 的/ 算法/ 贝叶斯/ 分类器/ 训练/ 过程/ 的/ 训练/ 数据/ 集中/ 包含/ 100/ 组/ 数据/ ,/ 除此之外/ 有效/ 点/ 密集区/ 探索/ 算法/ 在/ 确定/ 有效/ 点/ 聚集区/ 的/ 过程/ 中/ ,/ 共/ 生成/ 661/ 组/ 测试数据/ ,/ 其中/ 包含/ 有效/ 点/ 614/ 个/ ,/ 无效/ 点/ 47/ 个/ ./ 测试数据/ 可以/ 从/ 这/ 661/ 组/ 数据/ 中/ 选取/ ,/ 或者/ 可以/ 从/ 已/ 确定/ 的/ 有效/ 点/ 聚集区/ 中/ 重新/ 生成/ ./ 由于/ 在/ 确定/ 有效/ 点/ 聚集区/ 时/ 已/ 生成/ 大量/ 有效/ 点/ ,/ 因此/ 本次/ 实验/ 将/ 直接/ 利用/ 这/ 661/ 组/ 数据/ 进行/ 测试/ ,/ 分别/ 调用/ 4.1/ 节中/ 介绍/ 的/ 4/ 个/ 位置服务/ ,/ 然后/ 对比/ 这/ 4/ 个/ 服务/ 返回/ 结果/ 的/ 异同/ ./ 由于/ 商业/ 数据/ 的/ 敏感性/ 问题/ ,/ 本文/ 将/ 上述/ 4/ 个/ 服务/ 随机/ 排序/ ,/ 并/ 在/ 进行/ 结果/ 对比/ 时/ 将/ 服务/ 名称/ 隐/ 去/ ,/ 以/ API1/ 、/ API2/ 、/ API3/ 、/ API4/ 来/ 指代/ 上述/ 4/ 个/ 服务/ ./ 服务/ 执行/ 结果/ 分列/ 于表/ 3/ ~/ 表/ 6/ 中/ ,/ 对/ 上述/ 4/ 个/ 服务/ 的/ 输出/ 结果/ 进行/ 比较/ ,/ 结果/ 不同/ 的/ 测试数据/ 的/ 数量/ 总结/ 在/ 表/ 3/ 中/ ,/ 表中/ 数字/ 的/ 含义/ 为/ 对应/ 行和列/ 所/ 表示/ 的/ 接口/ 之间/ 输出/ 结果/ 不同/ 的/ 个数/ ,/ 例如/ 第/ 1/ 行第/ 2/ 列/ 的/ 数字/ 142/ 表示/ API1/ 和/ API2/ 的/ 输出/ 结果/ Page9/ 中/ ,/ 有/ 142/ 组/ 结果/ 不同/ ,/ 第/ 1/ 行第/ 3/ 列则/ 表示/ API1/ 和/ API3/ 的/ 输出/ 结果/ 中有/ 603/ 组/ 不同/ ./ 表/ 4/ ~/ 表/ 6/ 则/ 是/ 对/ 3.4/ 节/ 定义/ 的/ 3/ 种/ 服务/ 故障/ 进行/ 的/ 统计/ ./ API1API2API3API4API1API2API3API4API1API2API3API4API1API2API3API4/ 从/ 以上/ 结果/ 对比/ 可以/ 得出结论/ 如下/ :/ (/ 1/ )/ 通过/ 对/ 4/ 个/ 服务/ 结果/ 进行/ 对比/ ,/ 发现/ API3/ 与/ 这/ 3/ 个/ 服务/ 的/ 差异性/ 很大/ ,/ 基本/ 都/ 达到/ 了/ 91.23/ %/ ,/ 仅/ 考察/ 结果/ 的/ 差异性/ ,/ 还/ 很/ 难/ 评价/ 服务/ 的/ 质量/ ,/ 必须/ 将/ 这些/ 不同/ 的/ 结果/ 进行/ 分类/ ,/ 分别/ 从/ SF1/ 、/ SF2/ 、/ SF3/ 这/ 3/ 个/ 方面/ 进行/ 考察/ ./ (/ 2/ )/ SF1/ :/ 对于/ 无效/ 点/ 的/ 判定/ ,/ 各/ 服务/ 之间/ 差别/ 很小/ ./ 差别/ 最大/ 的/ 是/ API1/ 和/ API4/ 以及/ API2/ 和/ API4/ ,/ 有/ 8/ 个/ 不同/ 的/ 结果/ ,/ 占/ 全部/ 测试数据/ 的/ 1.21/ %/ ./ 差别/ 最小/ 的/ 为/ API1/ 和/ API3/ 以及/ API1/ 和/ API4/ ,/ 有/ 2/ 个/ 不同/ 的/ 结果/ ,/ 占/ 全部/ 测试数据/ 的/ 0.30/ %/ ./ (/ 3/ )/ SF2/ :/ API3/ 与/ 其他/ 3/ 个/ 服务/ 相差/ 较大/ ,/ 结果/ 不同/ 的/ 数据/ 最多/ 占/ 到/ 测试数据/ 的/ 90.17/ %/ ./ 通过/ 对/ 原始数据/ 的/ 分析/ ,/ 发现/ API3/ 确定/ 的/ 地址/ 信息/ 更加/ 详细/ ,/ 也就是说/ API3/ 定义/ 地址/ 信息/ 的/ 区域/ 粒度/ 更/ 小/ ./ (/ 4/ )/ SF3/ :/ 相差/ 最多/ 的/ 两个/ 服务/ 为/ API1/ 和/ API3/ ,/ 包含/ 140/ 个/ 不同/ 的/ 输出/ 结果/ ,/ 占/ 全部/ 测试数据/ 的/ 21.18/ %/ ,/ 相差/ 最少/ 的/ 两个/ 服务/ 为/ API2/ 和/ API3/ ,/ 包含/ 3/ 个/ 不同/ 的/ 输出/ 结果/ ,/ 占/ 全部/ 测试数据/ 的/ 0.45/ %/ ,/ 此类/ 错误/ 说明/ 结果/ 不同/ 的/ 两个/ 服务/ 中/ 至少/ 有/ 一个/ 服务/ 存储/ 的/ 地址/ 信息/ 是/ 错误/ 的/ ./ 通过/ 以上/ 比较/ ,/ 我们/ 发现/ 目前/ 市场/ 上/ 主流/ 的/ 反/ 地理/ 编码/ 服务/ 通常/ 都/ 能够/ 提供/ 正确/ 的/ 地址/ 信息/ ,/ 但/ 有/ 很多/ 服务/ 提供/ 的/ 地址/ 信息/ 不够/ 详细/ ,/ 例如/ API1/ 、/ API2/ 和/ API4/ ,/ 只能/ 定位/ 到/ 一个/ 比较/ 宽泛/ 的/ 区域/ 范围/ ,/ 这样/ 的/ 结果/ 对于/ 下/ 一步/ 的/ 地址/ 导航/ 、/ 服务/ 推荐/ 等/ 结果/ 的/ 正确性/ 均/ 有/ 不同/ 程度/ 的/ 影响/ ./ 4.2/ ./ 2/ 以/ 故障/ 检测/ 为/ 优化/ 目标/ 的/ 算法/ 故障/ 驱动/ 算法/ 共/ 生成/ 730/ 组/ 数据/ ,/ 其中/ 包括/ 100/ 组/ 贝叶斯/ 分类器/ 训练/ 数据/ ,/ 及/ 630/ 组/ 测试数据/ ./ 用/ 生成/ 的/ 这/ 630/ 组/ 测试数据/ 调用/ 被测/ 服务/ ,/ 表/ 7/ 是/ 对/ API1/ 、/ API2/ 、/ API3/ 、/ API4/ 这/ 4/ 个/ 服务/ 返回/ 的/ 不同/ 结果/ 的/ 比较/ ,/ 从表中/ 可以/ 看出/ 在/ 任意/ 两个/ 服务/ 之间/ 均/ 存在/ 不同/ 数量/ 的/ 结果/ 差异/ ,/ 差异/ 最大/ 的/ 是/ API1/ 和/ API1/ 以及/ API3/ 和/ API4/ ,/ 结果/ 不同/ 的/ 数据/ 占/ 总/ 数据量/ 的/ 93.81/ %/ ./ API1API2API3API4/ 表/ 8/ 、/ 表/ 9/ 、/ 表/ 10/ 则/ 是/ 分别/ 针对/ SF1/ 、/ SF2/ 、/ SF3/ 这/ 3/ 种/ 故障/ 类型/ 进行/ 的/ 对比/ 统计/ ,/ 从表中/ 数据/ 可以/ 看出/ :/ (/ 1/ )/ SF1/ :/ 接口/ 之间/ 差异/ 最大/ 的/ 有/ 141/ 个/ 结果/ 不同/ ,/ 占/ 全部/ 测试数据/ 的/ 22.38/ %/ ,/ 差异/ 最小/ 的/ 有/ 2/ 个/ 结果/ 不同/ ,/ 占/ 测试数据/ 的/ 0.32/ %/ ./ (/ 2/ )/ SF2/ :/ API3/ 与/ 其他/ 几个/ 服务/ 的/ 结果/ 相差/ 很大/ ,/ 其中/ 与/ API2/ 的/ 差异/ 最大/ ,/ 包含/ 584/ 个/ 不同/ 的/ 返回/ 结果/ ,/ 占/ 全部/ 测试数据/ 的/ 92.70/ %/ ./ (/ 3/ )/ SF3/ :/ 相差/ 最多/ 的/ 两个/ 服务/ 是/ API1/ 和/ API3/ ,/ 包含/ 82/ 个/ 不同/ 结果/ ,/ 占/ 全部/ 数据/ 的/ 13.02/ %/ ,/ 相差/ 最少/ 的/ 两个/ 服务/ 是/ API2/ 和/ API3/ ,/ 包含/ 2/ 个/ 不同/ 结果/ ,/ 占/ 全部/ 数据/ 的/ 0.32/ %/ ./ API1API2API3API4Page10API1API2API3API4API1API2API3API4/ 通过/ 上述/ 比较/ 发现/ ,/ 两种/ 算法/ 生成/ 的/ 测试数据/ 对/ 服务/ 进行/ 测试/ ,/ 测试/ 结果/ 基本一致/ ,/ 测试/ 结果/ 能够/ 反映/ 算法/ 的/ 缺陷/ 发现/ 能力/ ,/ 说明/ 这/ 两种/ 算法/ 缺陷/ 发现/ 的/ 能力/ 相当/ ./ 4.3/ 结果/ 评估/ 4.3/ ./ 1/ 以/ 区域/ 覆盖/ 为/ 优化/ 目标/ 的/ 算法/ 作为/ 比较/ 基准/ ,/ 本/ 实验/ 利用/ 随机/ 算法/ (/ RandomAlgorithm/ ,/ RA/ )/ 在/ 指定/ 区域/ 中/ 生成/ 了/ 660/ 组/ 数据/ ,/ 其中/ 包含/ 有效/ 点/ 218/ 个/ ,/ 无效/ 点/ 442/ 个/ ./ 我们/ 用/ 有效/ 点/ 占/ 比来/ 定义/ 该/ 算法/ 测试数据/ 的/ 生成/ 效率/ :/ 其中/ ,/ (/ 1/ )/ S/ =/ {/ si/ }/ 为/ 算法/ 生成/ 的/ 全部/ 测试数据/ ,/ |/ S/ |/ 为/ 生成/ 的/ 测试数据/ 的/ 数量/ ;/ (/ 2/ )/ SValid/ =/ {/ sj/ }/ 为/ 生成/ 数据/ 中/ 的/ 有效/ 点/ 集合/ ,/ 也/ 就是/ 对于/ / sj/ ∈/ SValid/ ,/ sj/ ∈/ S/ ,/ 并且/ value/ (/ sj/ )/ =/ 1/ ./ |/ SValid/ |/ 为/ SValid/ 中/ 包含/ 的/ 测试数据/ 的/ 数量/ ./ 利用/ 上述/ 公式/ 分别/ 计算/ SA/ 和/ RA/ 的/ 数据/ 生成/ 效率/ :/ EfficiencySA/ =/ EfficiencyRA/ =/ SA/ 生成/ 的/ 数据/ 数量/ 由/ 多种/ 因素/ 共同/ 决定/ ,/ RA/ 生成/ 的/ 数据/ 数量/ 只能/ 依靠/ 循环/ 次数/ 控制/ ,/ 因此/ 不/ 一定/ 能够/ 生成/ 与/ SA/ 相同/ 数量/ 的/ 数据/ ./ 通过/ 以上/ 计算/ 可以/ 看出/ SA/ 的/ 数据/ 生成/ 方法/ 能够/ 更好/ 地/ 按照/ 测试人员/ 的/ 意图/ 生成/ 符合要求/ 的/ 数据/ ,/ 并且/ 能够/ 在/ 算法/ 早期/ 就/ 生成/ 足够/ 多/ 符合要求/ 的/ 数据/ ,/ 使/ 算法/ 能够/ 提前/ 终止/ 搜索/ ,/ 节约/ 了/ 宝贵/ 的/ 测试/ 资源/ ./ 本文/ 还/ 通过/ 修改/ 每层/ 采样/ 上限/ 和/ 每个/ 子/ 区域/ 采样/ 上限/ 两个/ 参数值/ ,/ 探讨/ 这/ 两个/ 参数/ 取值/ 对/ 算法/ 的/ 影响/ ./ 表/ 11/ 的/ 实验/ 结果/ 是/ 将/ 每个/ 子/ 区域/ 采样/ 上限/ 确定/ 为/ 10/ ,/ 增加/ 每层/ 采样/ 上限/ ,/ 从表中/ 可以/ 看出/ 随着/ 每层/ 采样/ 上限/ 的/ 增加/ ,/ SA/ 算法/ 的/ 参数/ 生成/ 效率/ 也/ 有所提高/ ,/ 该/ 参数/ 从/ 50/ 增加/ 到/ 100/ 、/ 从/ 100/ 增加/ 到/ 200/ ,/ 生成/ 效率/ 分别/ 增加/ 了/ 0.94/ 和/ 0.1/ 个/ 百分点/ ./ 对于/ RA/ ,/ 该/ 参数/ 的/ 改变/ 也/ 提高/ 了/ 参数/ 的/ 生成/ 效率/ ,/ 从表中/ 可以/ 看出/ ,/ 参数值/ 从/ 50/ 增加/ 到/ 100/ ,/ 生成/ 效率/ 增加/ 了/ 5.62/ 个/ 百分点/ ,/ 参数值/ 从/ 100/ 增加/ 到/ 200/ ,/ 生成/ 效率/ 增加/ 了/ 0.35/ 个/ 百分点/ ./ SA/ -/ 50RA/ -/ 50SA/ -/ 100RA/ -/ 100SA/ -/ 200RA/ -/ 200/ 表/ 12/ 的/ 实验/ 结果/ 是/ 将/ 每层/ 采样/ 上限/ 固定/ 为/ 200/ ,/ 然后/ 增加/ 每个/ 子/ 区域/ 的/ 采样/ 上/ 限值/ ,/ 考察/ 该/ 参数/ 对/ SA/ 算法/ 的/ 影响/ ./ 从表中/ 可以/ 看出/ ,/ 随着/ 参数值/ 的/ 增加/ ,/ 测试数据/ 的/ 生成/ 效率/ 会/ 随之/ 增加/ :/ 参数值/ 从/ 5/ 增加/ 到/ 10/ ,/ 生成/ 效率/ 增加/ 了/ 3.86/ 个/ 百分点/ ,/ 参数值/ 从/ 10/ 增加/ 到/ 20/ ,/ 生成/ 效率/ 增加/ 了/ 2.41/ 个/ 百分点/ ./ 表/ 12/ 增加/ 每个/ 子/ 区域/ 采样/ 上限/ 对/ 算法/ 的/ 影响/ SA/ -/ 5SA/ -/ 10SA/ -/ 204.3/ ./ 2/ 以/ 故障/ 检测/ 为/ 优化/ 目标/ 的/ 算法/ 作为/ 基准/ 比较/ ,/ 同样/ 用/ RA/ 生成/ 630/ 组/ 数据/ ,/ 对/ 上述/ 4/ 个/ 服务/ 进行/ 测试/ ,/ 并/ 统计/ 返回/ 结果/ 不同/ 的/ 数据/ 数量/ ,/ 如表/ 13/ 所示/ ./ API1API2API3API4/ 图/ 4/ (/ a/ )/ 呈现/ 了/ SA/ 和/ RA/ 生成/ 的/ 测试数据/ ,/ 探测/ 出/ 的/ 任意/ 两个/ 接口/ 之间/ 结果/ 差异/ 的/ 对比/ ./ 图/ 4/ (/ b/ )/ 是/ 能够/ 探测/ 出/ 不同/ 种类/ 结果/ 差异/ 的/ 测试数据/ 的/ 数量/ 对比/ ,/ 其中/ nT/ (/ n/ =/ 1/ ,/ 2/ ,/ 3/ )/ 表示/ 能够/ 探测/ 出/ n/ (/ n/ =/ 1/ ,/ 2/ ,/ 3/ )/ 种/ 结果/ 差异/ 的/ 测试数据/ 的/ 数量/ ./ 从图/ 中/ 可以/ 看出/ ,/ SA/ 生成/ 的/ 测试数据/ 比/ RA/ 能够/ 探测/ 出/ 更/ 多/ 的/ 结果/ 差异/ ,/ 也/ 就是/ 能够/ 发现/ 更/ 多/ 的/ 潜在/ 服务/ 缺陷/ ./ Page11/ 我们/ 将/ 故障/ 驱动/ 算法/ 测试数据/ 的/ 生成/ 效率/ 定义/ 为/ 其中/ ,/ (/ 1/ )/ S/ =/ {/ si/ }/ 为/ 算法/ 生成/ 的/ 全部/ 测试数据/ ,/ |/ S/ |/ 为/ 生成/ 的/ 测试数据/ 的/ 数量/ ;/ (/ 2/ )/ SDiff/ =/ {/ sj/ }/ 为/ 能够/ 探测/ 出/ 服务/ 结果/ 差异/ 的/ 测试数据/ ,/ 也/ 就是/ 对于/ / sj/ ∈/ SDiff/ ,/ sj/ ∈/ S/ ,/ 并且/ valueF/ (/ sj/ )/ =/ 1/ ./ |/ SDiff/ |/ 为/ SDiff/ 中/ 包含/ 的/ 测试数据/ 的/ 数量/ ./ 利用/ 上述/ 公式/ 计算/ SA/ 和/ RA/ 的/ 数据/ 生成/ 效率/ ,/ 通过/ 计算结果/ 可以/ 看出/ ,/ SA/ 的/ 生成/ 效率/ 要/ 优于/ RA/ ./ EfficiencySA/ =/ EfficiencyRA/ =/ 针对/ 以/ 故障/ 检测/ 为/ 优化/ 目标/ 的/ 算法/ ,/ 同样/ 修改/ 了/ 每层/ 采样/ 上限/ 和/ 每个/ 子/ 区域/ 采样/ 上限/ 两个/ 参数值/ ,/ 进行/ 了/ 多次/ 实验/ 并/ 对比/ 结果/ ./ 表/ 14/ 的/ 实验/ 结果/ 是/ 将/ 每个/ 子/ 区域/ 采样/ 上限/ 确定/ 为/ 10/ 的/ 基础/ 上/ ,/ 改变/ 每层/ 采样/ 上限/ ,/ 从表中/ 可以/ 看出/ 随着/ 每层/ 采样/ 上限/ 参数/ 的/ 增加/ ,/ SA/ 算法/ 的/ 参数/ 生成/ 效率/ 有所提高/ ,/ 该/ 参数/ 从/ 50/ 增加/ 到/ 100/ ,/ 生成/ 效率/ 增加/ 了/ 0.19/ 个/ 百分点/ ,/ 而/ 从/ 100/ 增加/ 到/ 200/ ,/ 生成/ 效率/ 只/ 增加/ 了/ 0.09/ 个/ 百分点/ ./ 对于/ RA/ ,/ 该/ 参数/ 的/ 改变/ 并/ 没有/ 对/ 实验/ 结果/ 有/ 明确/ 的/ 影响/ ,/ 从表中/ 可以/ 看出/ ,/ 参数值/ 从/ 50/ 增加/ 到/ 100/ ,/ 生成/ 效率/ 增加/ 了/ 0.99/ 个/ 百分点/ ,/ 而/ 当/ 参数值/ 从/ 100/ 增加/ 到/ 200/ ,/ 生成/ 效率/ 反而/ 减少/ 了/ 2.69/ 个/ 百分点/ ./ SA/ -/ 50RA/ -/ 50SA/ -/ 100RA/ -/ 100SA/ -/ 200RA/ -/ 200/ 表/ 15/ 的/ 实验/ 结果/ 是/ 将/ 每层/ 采样/ 上限/ 固定/ 为/ 200/ ,/ 然后/ 增加/ 每个/ 子/ 区域/ 的/ 采样/ 上/ 限值/ ,/ 考察/ 该/ 参数/ 对/ SA/ 算法/ 的/ 影响/ ./ 从表中/ 可以/ 看出/ ,/ 随着/ 参数值/ 的/ 增加/ ,/ 测试数据/ 的/ 生成/ 效率/ 会/ 随之/ 增加/ ,/ 参数值/ 从/ 5/ 增加/ 到/ 10/ ,/ 生成/ 效率/ 增加/ 了/ 4.25/ 个/ 百分点/ ,/ 而/ 当/ 参数/ 从/ 10/ 增加/ 到/ 20/ 时/ ,/ 生成/ 效率/ 增加/ 了/ 2.56/ 个/ 百分点/ ./ 表/ 15/ 增加/ 每个/ 子/ 区域/ 采样/ 上限/ 对/ 算法/ 的/ 影响/ SA/ -/ 5SA/ -/ 10SA/ -/ 205/ 相关/ 工作/ 5.1/ 移动/ 应用/ 测试/ 移动/ 互联网/ 和/ 移动/ 终端/ 的/ 飞速发展/ ,/ 使得/ 相应/ 的/ 移动/ 应用/ 也/ 呈现出/ 井喷式/ 的/ 增长/ 趋势/ ./ 文献/ [/ 7/ ]/ 给出/ 了/ 移动/ 应用/ 通俗易懂/ 的/ 定义/ :/ 专门/ 为/ 智能手机/ 、/ 平板/ 电脑/ 等/ 可/ 移动/ 设备/ 开发/ 的/ 软件应用/ ,/ 并且/ 这些/ 软件应用/ 能够/ 以/ 情景/ 信息/ 为/ 输入/ ./ 该/ 文献/ 将/ 移动/ 应用/ 分为/ 两大类/ :/ 运行/ 于/ 移动/ 终端/ 的/ 应用/ 和/ 通过/ 网络/ 访问/ 的/ 应用/ ./ 分析/ 了/ 移动/ 应用/ 测试/ 面临/ 的/ 挑战/ ,/ 并/ 提出/ 解决/ 这些/ 问题/ 的/ 方法/ 以及/ 今后/ 的/ 发展趋势/ ./ 目前/ 移动/ 应用/ 测试/ 研究/ 主要/ 分布/ 在/ 以下/ 几个/ 领域/ :/ 移动/ 应用/ 的/ 白盒/ 测试/ 和/ 单元测试/ ,/ 移动/ 应用/ 的/ 黑盒/ 测试/ 和/ GUI/ 测试/ ,/ 移动/ 应用/ 的/ 服务质量/ 需求/ 测试/ ,/ 无线网络/ 测试/ ,/ 移动/ 可用性/ 测试/ 以及/ 移动/ 测试/ 自动化/ 框架/ 等/ ./ 文献/ [/ 8/ ]/ 总结/ 了/ 4/ 类/ 主流/ 的/ 移动/ 测试/ 技术/ :/ (/ 1/ )/ 基于/ 仿真/ 的/ 测试/ ,/ 利用/ 移动/ 终端/ 仿真器/ 进行/ 模拟/ ,/ 使得/ 测试/ 过程/ 能够/ 在/ 个人/ 计算机/ 上/ 进行/ ;/ (/ 2/ )/ 基于/ 设备/ 的/ 测试/ ,/ 将/ 测试/ 直接/ 部署/ 在/ 真实/ 的/ 移动/ 终端/ Page12/ 上/ ;/ (/ 3/ )/ 云/ 测试/ ,/ 其/ 核心/ 是/ 要/ 构建/ 移动/ 设备/ 云/ ,/ 使/ 用户/ 能够/ 以/ 按/ 需/ 租用/ 的/ 方式/ 使用/ 测试/ 服务/ ;/ (/ 4/ )/ 基于/ 群智/ 的/ 测试/ 技术/ ,/ 其/ 核心/ 是/ 利用/ 群众/ 的/ 智慧/ ,/ 通过/ 网络/ 利用/ 来自/ 世界各地/ 的/ 自由职业者/ 或者/ 签约/ 软件测试/ 工程师/ 来/ 共同完成/ 测试/ 任务/ ./ 文献/ [/ 9/ ]/ 对/ 位置服务/ 测试/ 进行/ 了/ 相关/ 研究/ ,/ 针对/ 移动/ 设备/ 现实/ 应用环境/ 的/ 复杂/ 多变性/ 以及/ 测试/ 实验/ 开展/ 的/ 安全性/ 和/ 合法性/ 等/ 问题/ ,/ 为/ 移动/ 位置服务/ 创建/ 了/ 一种/ 测试环境/ ,/ 用来/ 考察/ 移动/ 设备/ 、/ 设备/ 使用者/ 以及/ 设备/ 所/ 处/ 环境/ 之间/ 的/ 交互/ 活动/ ,/ 测试环境/ 包括/ :/ (/ 1/ )/ 城市/ 虚拟现实/ 模型/ ./ 能够/ 按照/ 测试/ 目的/ 创建/ 街道/ 、/ 指示牌/ 以及/ 标志性/ 建筑/ 等/ ,/ 能够/ 模拟/ 用户/ 在/ 街道/ 中/ 穿梭/ 等/ 个体/ 活动/ ;/ (/ 2/ )/ 移动/ 设备/ ./ 作为/ 信息/ 提供/ 源/ ,/ 能够/ 模拟/ 位置服务/ 应用程序/ ;/ (/ 3/ )/ 软件/ ./ 用来/ 记录/ 参与者/ 的/ 行为/ 及其/ 与/ 测试环境/ 之间/ 的/ 交互/ 活动/ ./ 虚拟现实/ 环境/ 的/ 创建/ 能够/ 保持/ 环境/ 的/ 稳定/ ,/ 在/ 相同/ 环境/ 下/ ,/ 对/ 不同/ 用户/ 行为/ 进行/ 对比/ 分析/ ,/ 从而/ 给出/ 位置/ 服务质量/ 的/ 评价/ ./ 5.2/ 模拟退火/ 算法/ 模拟退火/ 算法/ 最初/ 由/ Metropolis/ 等/ 人/ 在/ 1953/ 年/ 研究/ 二维/ 相变/ 时/ 提出/ ,/ Kirkpatrick/ 等/ 在/ 1983/ 年/ 利用/ 该/ 算法/ 设计/ 大规模/ 集成电路/ ,/ 并/ 最早/ 将/ 其/ 应用/ 于/ 优化/ 问题/ 的/ 求解/ 中/ [/ 10/ ]/ ./ 另外/ ,/ Cern/ '/ y/ 独立/ 提出/ 了/ SA/ 算法/ ,/ 将/ 其/ 用于/ 求解/ TSP/ 问题/ ,/ 并/ 获得成功/ ./ 1987/ 年/ Szu/ [/ 12/ ]/ 提出/ 一种/ 退货/ 率/ 与/ 时间/ 成反比/ 的/ 快速/ 模拟退火/ 算法/ FSA/ ./ 1988/ 年/ Aarts/ 等/ 人/ [/ 13/ ]/ 出版/ 的/ 书籍/ 以及/ Laarhoven/ 等/ 人/ [/ 14/ ]/ 出版/ 的/ 书籍/ 系统/ 全面/ 地/ 介绍/ 了/ 模拟退火/ 算法/ ,/ 这/ 标志/ 着/ 该/ 算法/ 的/ 描述/ 和/ 应用/ 得到/ 了/ 广泛/ 的/ 验证/ ./ 迄今为止/ ,/ SA/ 算法/ 已经/ 在/ 计算机领域/ 中/ ,/ 包括/ 人工智能/ 、/ 网络通信/ 等/ 许多/ 涉及/ 优化/ 问题/ 的/ 领域/ 中/ 得到/ 广泛应用/ [/ 15/ -/ 16/ ]/ ,/ 也/ 衍生/ 出/ 了/ 各种/ 不同/ 的/ 改进/ 版本/ [/ 17/ -/ 19/ ]/ ./ Gallego/ 等/ 人/ [/ 20/ ]/ 则/ 提出/ 一种/ 模拟退火/ 算法/ 的/ 并行/ 化/ 实现/ 方法/ ,/ 该/ 方法/ 将/ 模拟退火/ 算法/ 应用/ 于/ 网络/ 传输/ 的/ 扩展/ ,/ 并/ 将/ 传统/ 模拟退火/ 算法/ 部署/ 在/ 分布式/ 处理器/ 中/ ,/ 在/ 温度/ 参数/ 的/ 每/ 一档/ ,/ 分别/ 在/ 每个/ 处理器/ 上/ 利用/ 模拟退火/ 算法/ 进行/ 搜索/ ,/ 然后/ 每个/ 处理器/ 分别/ 将/ 其/ 搜索/ 的/ 结果/ 发送给/ 其中/ 一个/ 处理器/ ,/ 该/ 处理器/ 从/ 这些/ 解中/ 选出/ 最优/ 解/ ,/ 并/ 将/ 此/ 解分/ 发给/ 其他/ 所有/ 处理器/ ,/ 所有/ 处理器/ 以此/ 解/ 作为/ 初始/ 解/ 进行/ 新一轮/ 的/ 搜索/ 过程/ ./ 将/ 模拟退火/ 算法/ 应用/ 于/ 软件工程/ 中/ 需要/ 解决/ 的/ 两个/ 基本/ 问题/ 是/ :/ (/ 1/ )/ 问题/ 的/ 描述/ ;/ (/ 2/ )/ 目标/ 函数/ 的/ 定义/ ./ 通常/ 情况/ 下/ ,/ 软件/ 工程师/ 对于/ 其要/ 解决/ 的/ 软件工程/ 问题/ 都/ 能/ 找到/ 合适/ 的/ 表达形式/ ,/ 在/ 目标/ 函数/ 定义/ 的/ 确定/ 上/ 则/ 有/ 很多/ 不同/ 的/ 选择/ ,/ 如何/ 确定/ 一个/ 目标/ 函数/ ,/ 使/ 其/ 方便/ 度量/ ,/ 并/ 能/ 准确/ 评价/ 搜索/ 结果/ 的/ 优劣/ 是/ 应用/ 模拟退火/ 算法/ 的/ 关键/ [/ 21/ ]/ ./ 文献/ [/ 22/ ]/ 将/ 模拟退火/ 算法/ 应用/ 于/ 软件/ 的/ 缺陷/ 查找/ ,/ 将/ 软件/ 规约/ 形式化/ 地/ 定义/ 为/ 前置/ // 后置/ 条件/ ,/ 并/ 利用/ 前置/ // 后置/ 条件/ 定义/ 搜索算法/ 的/ 目标/ 函数/ ,/ 利用/ 目标/ 函数/ 指导/ 搜索/ 过程/ 的/ 进行/ ./ 该/ 文献/ 利用/ 类似/ 算法/ 形式化/ 定义/ 软件/ 运行/ 异常/ 的/ 前提条件/ ,/ 并/ 以此/ 作为/ 搜索算法/ 的/ 目标/ 函数/ ./ 文献/ [/ 23/ ]/ 介绍/ 了/ 一种/ 测试数据/ 自动/ 生成/ 工具/ GADGET/ ,/ 该/ 工具/ 最初/ 仅/ 应用/ 遗传算法/ 来/ 实现/ 测试数据/ 的/ 生成/ ,/ 但/ 之后/ 该/ 工具/ 实现/ 了/ 包括/ 模拟退火/ 算法/ 在内/ 的/ 四种/ 优化/ 算法/ ,/ 实现/ 复杂/ 软件程序/ 测试数据/ 的/ 自动/ 生成/ ./ 文献/ [/ 24/ ]/ 利用/ 模拟退火/ 算法/ 等/ 构建/ 覆盖/ 数组/ 完成/ 组合/ 测试/ ,/ 算法/ 的/ 当前/ 解即/ 为/ 目前/ 已/ 产生/ 的/ 测试数据/ 集合/ ,/ 将/ 参数/ 中未/ 被/ 覆盖/ 的/ 组合/ 数/ 作为/ 算法/ 的/ 目标/ 函数/ 值/ ,/ 搜索/ 的/ 方向/ 为/ 目标/ 函数/ 值/ 降低/ 的/ 方向/ ,/ 直至/ 目标/ 函数/ 值为/ 0/ 时/ 算法/ 终止/ ./ 本/ 问题/ 中/ ,/ 我们/ 将/ 测试/ 生成/ 过程/ 类比/ 为/ 寻优/ 过程/ ,/ 基于/ SA/ 算法/ ,/ 加入/ 贝叶斯/ 分类器/ 来/ 预测/ 和/ 评判/ 较/ 好/ 区域/ 的/ 概率/ ,/ 从而/ 为/ 状态/ 评价/ 提供/ 依据/ ,/ 为/ 新/ 状态/ 选择/ 提供/ 方向/ ,/ 是/ 对/ SA/ 算法/ 的/ 改进/ 和/ 优化/ ./ SA/ 算法/ 的/ 参数/ 选择/ 对/ 算法/ 效率/ 影响/ 较大/ ,/ 温度/ T/ 的/ 初始值/ 设置/ 过高/ ,/ 则/ 搜索/ 到/ 全局/ 最优/ 解/ 的/ 可能性/ 大/ ,/ 但/ 将/ 耗费/ 大量/ 计算/ 时间/ ,/ 反之/ 虽可/ 节约/ 计算/ 时间/ ,/ 但/ 全局/ 搜索/ 性能/ 可能/ 受到/ 影响/ ,/ 实际/ 使用/ 中/ 一般/ 需要/ 若干次/ 实验/ 调整/ 初始/ 温度/ ./ SA/ 算法/ 的/ 优点/ 是/ 质量/ 高/ ,/ 初始值/ 鲁棒性/ 强/ ,/ 简单/ 通用/ 易/ 实现/ ./ 其/ 缺点/ 也/ 十分/ 明显/ ,/ 由于/ 要求/ 较/ 高/ 的/ 初始/ 温度/ 、/ 较慢/ 的/ 降温/ 速率/ 、/ 较/ 低/ 的/ 终止/ 温度/ 以及/ 各/ 温度/ 下/ 足够/ 多次/ 的/ 抽样/ ,/ 因此/ 优化/ 过程/ 较长/ ./ 由于/ 我们/ 并/ 不是/ 要/ 寻找/ 最优/ 解/ ,/ 而是/ 记录/ 寻优/ 过程/ ,/ 因此/ 最终/ 停留/ 状态/ 的/ 好坏/ 对本/ 问题/ 并/ 不/ 十分/ 重要/ ,/ 我们/ 通过/ 引入/ 贝叶斯/ 分类器/ 提高/ 退火/ 效率/ ,/ 并/ 对/ 抽样/ 数据/ 的/ 数量/ 加以/ 限制/ ,/ 在/ 可/ 接受/ 的/ 时间/ 代价/ 下/ 大大提高/ 了/ 原有/ SA/ 算法/ 中/ 退火/ 过程/ 产生/ 可行/ 解/ 的/ 数量/ 和/ 概率/ ./ 6/ 总结/ 移动/ 服务/ 已经/ 成为/ 很多/ 人/ 工作/ 、/ 生活/ 不可/ 获取/ 的/ 一部分/ ,/ 移动/ 服务/ 测试/ 对/ 保证/ 移动/ 服务/ 的/ 正确性/ 、/ 可用性/ 等/ 有/ 非常/ 重要/ 的/ 作用/ ./ 本文/ 以/ 一个/ 典型/ 的/ 移动/ 位置服务/ 为例/ ,/ 采用/ 基于/ 贝叶斯/ 分类器/ 的/ 模拟退火/ 搜索/ 方法/ 为/ 服务/ 生成/ 测试数据/ ,/ 并/ 对/ 所选/ 的/ 4/ 个/ Page13/ 服务/ 进行/ 输出/ 结果/ 对比/ ,/ 通过/ 结果/ 对比/ 判定/ 服务/ 的/ 正确性/ 和/ 返回/ 结果/ 的/ 精确性/ ./ 

