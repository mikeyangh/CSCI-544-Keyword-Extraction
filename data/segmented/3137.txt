Page1/ 面向/ 业务流程/ 的/ 数据模型/ 异常/ 检测/ 方法/ 刘之强/ 李红燕/ 王磊/ 曲强/ (/ 北京大学/ 信息/ 科学技术/ 学院/ 北京/ 100871/ )/ (/ 机器/ 感知/ 与/ 智能/ 教育部/ 重点/ 实验室/ 北京/ 100871/ )/ 摘要/ 当前/ ,/ 流程/ 驱动/ 的/ 信息系统/ 构建/ 方式/ 得到/ 了/ 越来越/ 广泛/ 的/ 应用/ ./ 在/ 流程/ 驱动/ 的/ 方式/ 中/ ,/ 流程/ 模型/ 对/ 数据模型/ 有着/ 不可/ 忽视/ 的/ 影响/ ./ 但是/ 当前/ 的/ 数据模型/ 异常/ 检测/ 方法/ 都/ 是/ 针对/ 数据模型/ 本身/ 的/ 特点/ 而/ 未/ 考虑/ 流程/ 模型/ ./ 同样/ ,/ 流程/ 模型/ 的/ 验证/ 方法/ 也/ 缺乏/ 对/ 数据模型/ 的/ 考虑/ ./ 文中/ 提出/ 并/ 分析/ 了/ 面向/ 业务流程/ 的/ 数据模型/ 的/ 异常/ 问题/ ,/ 并/ 给出/ 了/ 其/ 3/ 种/ 基本/ 类型/ ./ 为了/ 检测/ 这些/ 异常/ ,/ 文中/ 提出/ 了/ Data/ -/ processGraph/ (/ DP/ -/ Graph/ )/ 模型/ ,/ 将/ 数据模型/ 和/ 流程/ 模型/ 放在/ 统一/ 的/ 架构/ 下/ 进行/ 研究/ ./ 而后/ ,/ 基于/ DP/ -/ Graph/ ,/ 文中/ 提出/ 了/ DPGT/ 算法/ ,/ 有效/ 地/ 实现/ 了/ 面向/ 业务流程/ 的/ 数据模型/ 异常/ 检测/ ./ 文章/ 中/ 的/ 实验/ 结果/ 验证/ 了/ DPGT/ 算法/ 对于/ 这些/ 异常/ 的/ 高/ 检出率/ ./ 关键词/ 数据模型/ 异常/ 检测/ ;/ 业务流程/ 管理/ ;/ 工作/ 流/ 模型/ 验证/ ;/ 信息系统/ 构建/ 1/ 引言/ 传统/ 的/ 信息系统/ 构建/ 方式/ 是/ 数据/ 驱动/ (/ data/ 近年来/ ,/ 随着/ 业务流程/ 管理/ [/ 1/ ]/ (/ businessprocessPage2management/ )/ 越来越/ 受到重视/ ,/ 流程/ 驱动/ 的/ 构建/ 方式/ 得到/ 了/ 广泛/ 的/ 应用/ ./ 这种/ 构建/ 方式/ 是/ 指/ 将/ 业务流程/ 模型/ 作为/ 整个/ 系统/ 构建/ 的/ 出发点/ ,/ 通过/ 对/ 流程/ 模型/ 的/ 精化/ ,/ 衍生/ 出/ 诸如/ 数据模型/ 等/ 其它/ 的/ 模型/ ./ 传统/ 的/ 数据模型/ 的/ 异常/ 检测/ 方法/ 主要/ 关注/ 于/ 数据模型/ 本身/ 的/ 静态/ 属性/ ,/ 比如/ 数据模型/ 本身/ 的/ 约束/ 、/ 是否/ 满足/ 范式/ 要求/ 等/ ./ 但是/ ,/ 这些/ 方法/ 没有/ 考虑/ 业务流程/ 对/ 数据模型/ 的/ 影响/ ./ 对于/ 业务流程/ 驱动/ 的/ 信息系统/ 中/ 数据模型/ 的/ 异常/ 检测/ ,/ 需要/ 综合/ 考虑/ 数据模型/ 和/ 业务流程/ 模型/ 的/ 特点/ ./ 因为/ 即使/ 在/ 数据模型/ 和/ 业务流程/ 模型/ 本身/ 均/ 正确/ 的/ 情况/ 下/ ,/ 仍会/ 出现/ 数据模型/ 相对/ 于/ 流程/ 模型/ 的/ 不/ 一致/ ,/ 即/ 出现/ 数据模型/ 的/ 异常/ ./ 本文/ 立足于/ 面向/ 业务流程/ 的/ 数据模型/ 异常/ 检测/ ,/ 提出/ 了/ 自己/ 的/ 模型/ 和/ 方法/ 并/ 给出/ 了/ 相应/ 的/ 实验/ 图/ 1CCTV/ 物资/ 管理系统/ 模型/ 片段/ (/ 2/ )/ 条件/ 不能/ 被/ 满足/ ./ 由于/ 数据/ 约束条件/ value/ / 500/ 的/ 存在/ ,/ 任务/ “/ 材料/ 管理/ ”/ 和/ “/ 退货/ ”/ 永远/ 不能/ 被/ 执行/ ./ (/ 3/ )/ 数据/ 前提/ 冲突/ ./ 任务/ “/ 使用/ 申请/ ”/ 有/ 一个/ 前提/ 数据/ 对象/ Assetrecord/ ./ 但/ 这个/ 数据/ 对象/ 是/ 由/ 一个/ 不/ 被/ 触发/ 的/ 任务/ “/ 库房/ 登记/ ”/ 创建/ 的/ ./ 这样/ 任务/ “/ 使用/ 申请/ ”/ 就/ 会/ 执行/ 失败/ ./ 从/ 以上/ 的/ 应用/ 场景/ ,/ 可以/ 发现/ 在/ 面向/ 业务流程/ 的/ 时候/ ,/ 数据模型/ 会/ 发生/ 一些/ 与/ 流程/ 模型/ 的/ 不/ 一致/ ,/ 即/ 异常/ ./ 通过/ 日常/ 的/ 项目/ 工作/ ,/ 可以/ 发现/ 这些/ 异常/ 具有/ 如下/ 的/ 3/ 个/ 特点/ :/ (/ 1/ )/ 这些/ 异常/ 在/ 数据模型/ 中是/ 普遍存在/ 的/ ./ 在/ 结果/ ./ 为了/ 直观/ 地/ 说明/ 面向/ 业务流程/ 时/ 数据模型/ 会/ 发生/ 的/ 异常/ ,/ 本文/ 给出/ 图/ 1/ 所示/ 的/ 来自/ CCTV/ (/ ChinaCentralTelevision/ )/ 物资/ 管理系统/ 的/ 模型/ 片段/ ./ 图/ 1/ 展示/ 了/ 系统/ 中/ 的/ 一个/ 数据模型/ 片段/ 及其/ 对应/ 的/ 流程/ 模型/ 片段/ (/ 使用/ BPMN/ 符号/ [/ 2/ ]/ 表示/ )/ ./ 综合/ 考虑/ 数据模型/ 与/ 流程/ 模型/ 之间/ 的/ 交互性/ ,/ 在/ 此例/ 中/ 可以/ 发现/ 以下/ 几种/ 由于/ 数据模型/ 不合理/ 导致/ 流程/ 模型/ 出现/ 的/ 异常/ :/ (/ 1/ )/ 数据/ 创建/ 失败/ ./ 在/ 业务流程/ 中/ 的/ 任务/ “/ 设备/ 录入/ ”/ 创建/ Equipmentinfo/ 数据/ 对象/ ,/ 但是/ 此时/ 数据模型/ 中/ Equipmentinfo/ 其/ 依赖/ 的/ 数据/ 对象/ Treatment/ 还/ 未/ 创建/ ./ CCTV/ 物资/ 管理系统/ (/ 业务流程/ 模型/ 包含/ 6/ 个子/ 流程/ ,/ 97/ 个/ 任务/ ,/ 数据模型/ 包含/ 124/ 个/ 实体/ )/ 中/ ,/ 在/ 数据模型/ 与/ 流程/ 模型/ 各自/ 均/ 正确/ 的/ 前提/ 下/ ,/ 发现/ 上述/ 3/ 种/ 错误/ 43/ 个/ ./ 在/ 实际/ 的/ 医院/ 信息系统/ 中/ (/ HospitalInformationSystem/ )/ 仅/ 住院/ 管理/ 部分/ 就/ 发现/ 了/ 上述/ 错误/ 101/ 个/ ./ 可见/ 在/ 实际/ 的/ 信息系统/ 构建/ 过程/ 中/ ,/ 数据模型/ 异常/ 的/ 发生/ 是/ 具有/ 普遍性/ 的/ ./ (/ 2/ )/ 某些/ 异常/ 会/ 直接/ 导致系统/ 运行/ 时/ 出错/ ./ 而/ 解决/ 这次/ 错误/ 要/ 涉及/ 代码/ 级/ 的/ 改动/ ./ 系统/ 也/ 必须/ 在/ 进行/ 代码/ 改动/ 后/ 重新/ 上线/ ./ (/ 3/ )/ 利用/ 人工/ 的/ 方法/ 来/ 检测/ 这些/ 异常/ 对/ 工作人员/ 素质/ 要求/ 较/ 高/ ./ 这项/ 工作/ 需要/ 工作人员/ 既/ 熟悉/ 数/ Page3/ 据/ 模型/ 又/ 熟悉/ 业务流程/ 模型/ ./ 并且/ 从/ 上面/ 的/ CCTV/ 物资/ 管理系统/ 和/ HIS/ 的/ 例子/ 也/ 可以/ 发现/ ,/ 实际/ 项目/ 中/ 数据模型/ 和/ 业务流程/ 模型/ 的/ 庞大/ 也/ 使得/ 人工/ 检测/ 这些/ 异常/ 变得/ 枯燥乏味/ ./ 因此/ ,/ 寻求/ 自动化/ 的/ 方法/ 来/ 高效/ 而/ 准确/ 地/ 发现/ 这些/ 异常/ 十分/ 具有/ 现实意义/ ./ 解决/ 面向/ 业务流程/ 的/ 数据模型/ 异常/ 检测/ 问题/ 是/ 具有/ 挑战性/ 的/ ./ 发生/ 这些/ 异常/ 的/ 时候/ ,/ 数据模型/ 和/ 业务流程/ 模型/ 本身/ 都/ 是/ 正确/ 的/ ./ 这些/ 异常/ 的/ 产生/ 从/ 根源/ 上/ 来说/ 是/ 由于/ 数据模型/ 与/ 流程/ 模型/ 之间/ 的/ 不一致性/ ./ 因此/ ,/ 想要/ 检测/ 这些/ 异常/ 就/ 必须/ 将/ 数据模型/ 和/ 流程/ 模型/ 二者/ 联系/ 在/ 一起/ ./ 但/ 此前/ 并/ 没有/ 建立/ 这/ 两者之间/ 联系/ 的/ 方法/ ./ 为了/ 解决/ 这个/ 问题/ ,/ 本文/ 提出/ 了/ Data/ -/ ProcessGraph/ (/ DP/ -/ Graph/ )/ 模型/ 来/ 联系/ 这/ 两个/ 模型/ ,/ 并/ 给出/ 了/ DPGT/ 方法/ 来/ 检查/ 这些/ 异常/ ./ 本文/ 第/ 2/ 节/ 主要/ 讨论/ 一些/ 相关/ 工作/ ;/ 第/ 3/ 节/ 具体分析/ 并/ 给出/ 面向/ 业务流程/ 的/ 数据模型/ 异常/ 问题/ 的/ 分类/ ;/ 第/ 4/ 节/ 提出/ DP/ -/ Graph/ 模型/ 来/ 联系/ 数据模型/ 与/ 业务流程/ 模型/ ;/ 第/ 5/ 节/ 给出/ DPGT/ 方法/ 来/ 检测/ 面向/ 业务流程/ 模型/ 的/ 数据模型/ 异常/ ;/ 第/ 6/ 节/ 给出/ 相应/ 的/ 实验/ 结果/ ./ 最后/ 是/ 对/ 全文/ 的/ 总结/ ./ 2/ 相关/ 工作/ 2.1/ 数据模型/ 异常/ 检测/ 对于/ 数据模型/ 本身/ 的/ 正确性/ 检测/ ,/ 已经/ 有/ 非常/ 成熟/ 的/ 工具/ [/ 3/ -/ 4/ ]/ ./ 常见/ 的/ 数据/ 建模/ 工具/ 都/ 提供/ 针对/ 诸如/ ER/ 模型/ 或者/ 关系/ 模型/ 的/ 检查/ 功能/ ,/ 比如/ SybasePowerDesigner/ 、/ ERWin/ 、/ RationalRoseEnterprise/ 等/ ./ 这些/ 针对/ 数据模型/ 的/ 检测/ 主要/ 针对/ 数据模型/ 结构/ 方面/ 的/ 异常/ ,/ 例如/ 数据模型/ 的/ 自洽/ 、/ 约束/ 的/ 一致性/ 、/ 是否/ 满足/ 范式/ 要求/ 等/ 静态/ 特征/ ./ 但/ 这些/ 检测/ 完全/ 没有/ 考虑/ 业务流程/ 对/ 数据模型/ 的/ 影响/ ./ 在/ 本文/ 后续/ 篇幅/ 中/ 讨论/ 数据模型/ 异常/ 检测/ 问题/ 时/ ,/ 假定/ 所/ 讨论/ 的/ 数据模型/ 已经/ 通过/ 了/ 这些/ 检查/ ,/ 是/ 自身/ 静态/ 结构/ 正确/ 的/ 数据模型/ ./ 2.2/ 业务流程/ 验证/ 实现/ 面向/ 业务流程/ 的/ 数据模型/ 异常/ 检测/ ,/ 应该/ 了解/ 一些/ 传统/ 的/ 业务流程/ 验证/ 方法/ ./ 近年来/ ,/ 业务流程/ 验证/ 在/ 流程/ 模型/ 管理/ 领域/ 引起/ 了/ 极大/ 的/ 关注/ ./ 以往/ 有/ 从/ 多个/ 不同/ 的/ 视角/ 来/ 针对/ 业务流程/ 的/ 研究/ ,/ 比如/ 控制流/ (/ controlflow/ )/ 、/ 数据流/ (/ dataflow/ )/ 和/ 业务流程/ 的/ 时间/ 坐标/ 等/ ./ 业务流程/ 模型/ 中/ 的/ 控制流/ 的/ 验证/ 方法/ 主要/ 是/ 针对/ 业务流程/ 模型/ 本身/ 来/ 分析/ 其/ 控制流/ 中/ 的/ 异常/ 问题/ ./ 典型/ 的/ 方法/ 有/ Petri/ -/ net/ [/ 5/ -/ 6/ ]/ 、/ YAWL/ [/ 7/ ]/ 和/ UML/ 活动/ 图/ [/ 8/ -/ 9/ ]/ 等/ ./ 为了/ 分析/ 流程/ 模型/ 中/ 的/ 异常/ ,/ 一系列/ 方法/ 比如/ 线性代数/ [/ 10/ ]/ (/ linearalgebraic/ )/ 、/ 有限/ 状态/ 验证/ [/ 11/ ]/ (/ finitestateverification/ )/ 以及/ 可覆盖图/ 形/ 分析/ [/ 12/ ]/ (/ coverabilitygraphanalysis/ )/ 等/ 方法/ 被/ 提出/ 来/ ./ 一些/ 流程/ 模型/ 验证/ 的/ 工具/ 也/ 被/ 设计/ 并/ 实现/ 了/ ,/ 比如/ Wofan/ [/ 13/ ]/ 、/ WofanYAWL/ [/ 12/ ]/ 等/ ./ 但/ 这类/ 方法/ 的/ 主要/ 问题/ 是/ 仅仅/ 考虑/ 了/ 流程/ 模型/ 本身/ ,/ 并未/ 考虑/ 与/ 流程/ 模型/ 相关/ 的/ 数据模型/ ,/ 从而/ 并/ 不/ 支持/ 数据模型/ 的/ 异常/ 检测/ ./ 当前/ 也/ 有/ 一些/ 基于/ 数据流/ (/ dataflow/ )/ 的/ 业务流程/ 模型/ 验证/ 方法/ [/ 14/ -/ 15/ ]/ ./ 这类/ 方法/ 可以/ 检测/ 并/ 发现/ 诸如/ 数据/ 丢失/ (/ missingdata/ )/ 、/ 数据/ 冲突/ (/ conflictingdata/ )/ 以及/ 数据/ 冗余/ (/ redundantdata/ )/ 等/ ./ 这类/ 方法/ 仅仅/ 考虑/ 了/ 在/ 工作/ 流/ 模型/ 中/ 的/ 数据/ ,/ 并未/ 对/ 静态/ 的/ 数据模型/ 有所/ 考虑/ ,/ 忽略/ 了/ 数据/ 对象/ 之间/ 的/ 相关性/ ./ 例如/ 数据模型/ 中/ 的/ 依赖性/ 问题/ ,/ 这/ 类/ 方法/ 并/ 不能/ 检测/ 出/ ./ 在/ 文献/ [/ 16/ ]/ 中/ 给出/ 了/ 数据模型/ 与/ 业务流程/ 模型/ 之间/ 的/ 相互/ 关系/ ,/ 提出/ 了/ 结合/ 业务流程/ 模型/ 来/ 进行/ 数据模型/ 验证/ 的/ 重要性/ ./ 但是/ 并/ 没有/ 给出/ 面向/ 业务流程/ 模型/ 的/ 数据模型/ 异常/ 检测/ 方法/ ./ 3/ 面向/ 业务流程/ 模型/ 的/ 数据模型/ 异常/ 分析/ 的/ 数据/ 产品/ 是/ 由/ 数据模型/ 定义/ 的/ ./ 作为/ 流程/ 的/ 控制/ 条件/ ./ 主要/ 有/ 两种/ 情况/ :/ 流程/ 中/ 任务/ 的/ 执行/ 常常/ 依赖/ 特定/ 的/ 数据/ 对象/ [/ 16/ ]/ ./ 为了/ 分析/ 面向/ 业务流程/ 的/ 数据模型/ 异常/ ,/ 首先/ 要/ 理解/ 数据模型/ 和/ 业务流程/ 模型/ 之间/ 的/ 交互方式/ ./ 这种/ 交互方式/ 可以/ 分成/ 两大类/ :/ (/ 1/ )/ 数据/ 产品/ (/ dataproducts/ )/ ./ 业务流程/ 所/ 操作/ (/ 2/ )/ 基于/ 数据/ 的/ 控制/ (/ data/ -/ basedcontrol/ )/ ./ 数据/ ①/ 任务/ 的/ 数据/ 前提/ (/ tasks/ ’/ datapreconditions/ )/ ./ ②/ 数据/ 驱动/ 的/ 流程/ 控制/ (/ data/ -/ basedcontrol/ )/ ./ 业务流程/ 的/ 控制结构/ 可以/ 被/ 数据/ 影响/ [/ 16/ ]/ ./ 面向/ 业务流程/ 模型/ 的/ 时候/ ,/ 数据模型/ 之所以/ 后/ 发生/ 异常/ 正是/ 由于/ 这/ 两者之间/ 的/ 交互性/ ,/ 图/ 2/ 从/ 流程/ 模型/ 影响/ 数据模型/ 和/ 数据模型/ 影响/ 流程/ 模型/ 两个/ 维度/ 来/ 分析/ 面向/ 业务流程/ 时/ 数据模型/ 中/ 可能/ 出现/ 的/ 异常/ ./ Page4/ 从图/ 2/ 的/ 分析/ ,/ 可以/ 得到/ 基于/ 业务流程/ 模型/ 的/ 数据模型/ 3/ 种/ 基本/ 的/ 异常/ :/ (/ 1/ )/ 数据/ 依赖/ 关系/ 异常/ DDA/ (/ DataDependenceAnomaly/ )/ ./ 对应/ 第/ 1/ 部分/ 实例/ 中/ 的/ 第/ 1/ 个/ 错误/ ./ 由于/ 数据/ 对象/ 所/ 依赖/ 的/ 数据/ 对象/ 未/ 创建/ ,/ 流程/ 模型/ 中/ 的/ 任务/ 创建/ 的/ 数据/ 对象/ 不能/ 成功/ 插入/ 数据模型/ ./ 根本原因/ 是/ 该/ 数据/ 对象/ 所在/ 的/ 数据模型/ 中/ 的/ 依赖/ 关系/ 设计/ 不合理/ ./ (/ 2/ )/ 数据/ 对象/ 定义/ 冲突/ DDC/ (/ DataDefinitionContradiction/ )/ ./ 对应/ 第/ 1/ 部分/ 的/ 第/ 3/ 个/ 错误/ ./ 流程/ 中/ 的/ 某个/ 任务/ 的/ 前提/ 数据/ 对象/ 在/ 任务/ 触发/ 的/ 时候/ 仍然/ 未/ 创建/ ,/ 导致/ 任务/ 不能/ 继续执行/ ./ 这个/ 异常/ 的/ 出现/ 是/ 由于/ 有些/ 数据/ 对象/ 在/ 定义/ 时未/ 考虑/ 到/ 创建/ 该/ 数据/ 对象/ 的/ 任务/ 和/ 将/ 该/ 数据/ 对象/ 作为/ 前提/ 的/ 任务/ 之间/ 的/ 关系/ ./ 该/ 数据/ 对象/ 必须/ 根据/ 流程/ 的/ 实际/ 情况/ 进行/ 重新/ 定义/ ./ (/ 3/ )/ 数据/ 约束条件/ 冲突/ DCC/ (/ DataCondition/ 图/ 3Data/ -/ processGraph/ 实例/ E/ =/ Ddepend/ ∪/ DCvariable/ ∪/ Pprecedence/ ∪/ CTtrue/ ∪/ CTfalse/ ∪/ 定义/ 1/ (/ DP/ -/ Graph/ )/ ./ DP/ -/ Graph/ 是/ 一个/ 有向图/ ,/ DP/ -/ Graph/ =/ 〈/ V/ ,/ E/ 〉/ ,/ 其中/ V/ 为/ 顶点/ 集/ :/ V/ =/ Dataos/ ∪/ D/ _/ Constrains/ ∪/ Task/ ∪/ Gateways/ ∪/ Conditions/ ,/ Contradiction/ )/ ./ 定义/ 第/ 1/ 部分/ 中/ 的/ 第/ 2/ 个/ 错误/ ./ 该/ 错误/ 发生/ 的/ 主要/ 原因/ 是/ 数据/ 约束条件/ 的/ 不合理/ ./ 由于/ 某些/ 不合理/ 的/ 数据/ 约束条件/ ,/ 流程/ 中/ 的/ 某些/ 分支/ 将会/ 永远/ 无法/ 达到/ ./ 为了/ 检测/ 这/ 3/ 种/ 基本/ 异常/ ,/ 下文/ 提出/ 了/ DP/ -/ Graph/ 以/ 建立/ 数据模型/ 和/ 流程/ 模型/ 之间/ 的/ 联系/ 并/ 给出/ 了/ DP/ -/ Graph/ 的/ 构造方法/ ./ 而后/ 基于/ DP/ -/ Graph/ ,/ 本文/ 提出/ 了/ 面向/ 业务流程/ 的/ 数据模型/ 异常/ 检测/ 方法/ DPGT/ ./ 4Data/ -/ ProcessGraph/ (/ DP/ -/ Graph/ )/ 在/ 实际/ 的/ 信息系统/ 构建/ 过程/ 中/ ,/ 数据模型/ 与/ 业务流程/ 模型/ 是/ 两个/ 分离/ 的/ 部分/ ./ 为了/ 对/ 数据模型/ 中/ 的/ 面向/ 流程/ 模型/ 的/ 异常/ 进行/ 检测/ ,/ 必须/ 给出/ 数据模型/ 与/ 业务流程/ 模型/ 之间/ 关系/ 的/ 统一/ 描述/ 模型/ ./ 通过/ 这个/ 模型/ ,/ 才能/ 把/ 数据模型/ 和/ 流程/ 模型/ 放在/ 一个/ 统一/ 的/ 框架/ 下/ 研究/ ,/ 从而/ 检测/ 出/ 面向/ 业务流程/ 的/ 数据模型/ 中/ 的/ 异常/ ./ 本文/ 给出/ 了/ 一种/ DP/ -/ Graph/ (/ Data/ -/ ProcessGraph/ )/ 模型/ 来/ 描述/ 数据模型/ 与/ 业务流程/ 之间/ 的/ 关系/ ./ DP/ -/ graph/ 由/ 一组/ 顶点/ 集/ 和/ 一组/ 边集/ 构成/ ,/ 顶点/ 集/ 包含/ 了/ 从/ 数据模型/ 和/ 业务流程/ 模型/ 中/ 抽取/ 的/ 对象/ ,/ 边集/ 用来/ 表达/ 各种/ 对象/ 之间/ 的/ 关系/ ./ 构建/ 的/ DP/ -/ Graph/ 实例/ ./ 图/ 3/ 是/ 一个/ 根据/ 图/ 2/ 中/ 的/ 数据模型/ 和/ 流程/ 模型/ DPpreconditions/ ∪/ PDcreate/ ∪/ PDdelete/ ∪/ Cvariable/ ./ 顶点/ 集/ V/ 由/ 5/ 个/ 子集/ 组成/ :/ Dataos/ ,/ D/ _/ Constrains/ 这/ 两个/ 集合/ 包含/ 了/ 从数/ (/ 1/ )/ Dataos/ =/ {/ d1/ ,/ d2/ ,/ …/ ,/ dv/ }/ (/ v/ / 0/ )/ ,/ 是/ 数据/ 对据/ 模型/ 中/ 抽象/ 出来/ 的/ 元素/ ./ Page5/ 象/ 集合/ ,/ 其中/ di/ 是/ 数据/ 对象/ ./ (/ 2/ )/ D/ _/ constrains/ =/ {/ dc1/ ,/ dc2/ ,/ …/ ,/ dcp/ }/ (/ p/ / 0/ )/ ,/ 是/ 数据/ 约束条件/ 集合/ ,/ 其中/ dcp/ 是/ 一个/ 数据/ 约束条件/ ,/ 由/ 关于/ 数据/ 对象/ 的/ 谓词/ 表示/ ./ Tasks/ ,/ Gateways/ ,/ Conditions/ 这/ 3/ 个/ 集合/ 包含/ 了/ 从/ 业务流程/ 模型/ 中/ 抽象/ 出来/ 的/ 元素/ ./ (/ 3/ )/ Tasks/ =/ {/ t1/ ,/ t2/ ,/ …/ ,/ tm/ }/ (/ m/ / 1/ )/ ,/ 是/ 业务流程/ 中/ 任务/ 的/ 集合/ ,/ 其中/ ti/ 是/ 任务/ ./ (/ 4/ )/ Gateways/ =/ {/ g1/ ,/ g2/ ,/ …/ ,/ gn/ }/ (/ n/ / 0/ )/ ,/ 是/ 流程/ 控制/ 节点/ 集合/ ,/ 其中/ gi/ 是/ 控制/ 节点/ 对象/ ./ (/ 5/ )/ Conditions/ =/ {/ c1/ ,/ c2/ ,/ …/ ,/ cu/ }/ (/ u/ / 0/ )/ ,/ 是/ 业务流程/ 中/ 控制/ 条件/ 的/ 集合/ ,/ 其中/ ci/ 是/ 一个/ 控制/ 条件/ ,/ 表示/ 为/ 关于/ 数据/ 对象/ 的/ 谓词/ ./ 素/ 之间/ 的/ 关系/ :/ 边集/ E/ 由/ 9/ 个/ 子集/ 组成/ :/ Ddepend/ 、/ DCvariable/ 这/ 两个/ 集合/ 包含/ 了/ 数据模型/ 元/ (/ 1/ )/ Ddepend/ / Dataos/ ×/ Dataos/ ,/ 表示/ 数据/ 对象/ 之间/ 的/ 依赖/ 关系/ ,/ 〈/ d1/ ,/ d2/ 〉/ ∈/ Ddepend/ ,/ 表示/ 数据/ 对象/ d1/ 依赖于/ d2/ ./ (/ 2/ )/ DCvariable/ / D/ _/ Constrains/ ×/ Dataos/ ,/ 如果/ 〈/ dc/ ,/ d/ 〉/ ∈/ DCvariable/ ,/ 表示/ 数据/ 对象/ d/ 是/ 数据/ 约束/ dc/ 的/ 一个/ 变量/ ./ Pprecedence/ 、/ CTtrue/ 、/ CTfalse/ 这/ 3/ 个/ 集合/ 表示/ 业务流程/ 模型/ 元素/ 之间/ 的/ 关系/ :/ (/ 3/ )/ Pprecedence/ / (/ Tasks/ ∪/ Gateways/ )/ ×/ (/ Tasks/ ∪/ Gateways/ ∪/ Conditions/ )/ ,/ 是/ 流程/ 元素/ 的/ 前驱/ -/ 后继/ 关系/ ./ (/ 4/ )/ CTtrue/ / Conditions/ ×/ (/ Tasks/ ∪/ Gateways/ ∪/ Conditions/ )/ ,/ 是/ 触发/ 关系/ ,/ 指/ 的/ 是/ Condition/ 满足/ 时要/ 触发/ 的/ 流程/ 元素/ ./ (/ 5/ )/ CTfalse/ / Conditions/ ×/ (/ Task/ ∪/ Gateways/ ∪/ Conditions/ )/ ,/ 是/ 触发/ 关系/ ,/ 指/ 的/ 是/ Condition/ 不/ 满足/ 时要/ 触发/ 的/ 流程/ 元素/ ./ DPpreconditions/ 、/ PDcreate/ 、/ PDdelete/ 和/ Cvariable/ 这/ 4/ 个/ 集合/ 表示/ 了/ 业务流程/ 模型/ 元素/ 与/ 数据模型/ 元素/ 之间/ 的/ 关系/ ./ (/ 6/ )/ DPpreconditions/ / (/ Tasks/ ∪/ Gateways/ )/ ×/ Dataos/ ,/ 是/ 业务流程/ 元素/ 对/ 数据/ 对象/ 的/ 依赖/ 关系/ ./ (/ 7/ )/ PDcreate/ / Tasks/ ×/ Dataos/ ,/ 如果/ 〈/ t/ ,/ d/ 〉/ ∈/ PDcreate/ ,/ 任务/ t/ 创建/ 数据/ 对象/ d/ ./ (/ 8/ )/ PDdelete/ / Tasks/ ×/ Dataos/ ,/ 如果/ 〈/ t/ ,/ d/ 〉/ ∈/ PDdelete/ ,/ 任务/ t/ 删除/ 数据/ 对象/ d/ ./ (/ 9/ )/ Cvariable/ / Conditions/ ×/ Dataos/ ,/ 如果/ 〈/ c/ ,/ d/ 〉/ ∈/ Cvariable/ 表示/ 数据/ 对象/ d/ 是/ 数据/ 约束/ c/ 的/ 一个/ 变量/ ./ Gateway/ 定义/ 了/ 流程/ 控制流/ 的/ 逻辑/ 节点/ ,/ 与/ 流程/ 的/ 基本/ 控制结构/ 模式/ 相对/ 应/ ,/ Gateway/ 能/ 表达/ 各种/ 控制流/ 的/ 逻辑/ 分支/ 以及/ 合并/ 的/ 语义/ ./ 定义/ 2/ (/ Gateways/ )/ ./ Gateway/ 是/ 一个/ 5/ 元组/ :/ Gateway/ =/ 〈/ Type/ ,/ ControlRules/ 〉/ ,/ 其中/ ControlRules/ 是/ 一组/ 控制流/ 的/ 触发/ 规则/ ,/ 采用/ Datalog/ 形式/ 定义/ ,/ 型/ 如/ 这条/ 规则/ 表示/ “/ 如果/ ta/ 完成/ 而且/ 条件/ cab/ 满足/ ,/ 则/ 触发/ 任务/ tb/ ”/ ./ 控制流/ 的/ 路由/ 通过/ 触发/ 规则/ 表示/ ./ 以上/ 给出/ 了/ DP/ -/ Graph/ 的/ 定义/ ,/ 现在/ 分析/ 给出/ DP/ -/ Graph/ 的/ 特点/ :/ (/ 1/ )/ DP/ -/ Graph/ 是/ 一个/ 形式化/ 的/ 图/ 定义/ ./ 它/ 将/ 数据模型/ 与/ 业务流程/ 模型/ 之间/ 的/ 关系/ 通过/ 图/ 的/ 边/ 抽象地/ 表示/ 出来/ ./ (/ 2/ )/ DP/ -/ Graph/ 是/ 一个/ 面向/ 分析/ 的/ 图/ ./ 它/ 的/ 定义/ 是/ 为了/ 检测/ 数据模型/ 中/ 相对/ 于/ 业务流程/ 模型/ 的/ 异常/ ,/ 忽略/ 了/ 对于/ 该/ 分析/ 没有/ 价值/ 的/ 信息/ ./ (/ 3/ )/ DP/ -/ Graph/ 独立/ 于/ 特定/ 的/ 数据模型/ 和/ 流程/ 模型/ 描述语言/ ./ 只要/ 有/ 关于/ 数据模型/ 和/ 流程/ 模型/ 足够/ 多/ 的/ 信息/ ,/ 就/ 可以/ 创建/ 出/ DP/ -/ Graph/ ./ 为了/ 实现/ 基于/ DP/ -/ Graph/ 的/ 异常/ 检测/ ,/ 首先/ 要/ 构建/ DP/ -/ Graph/ ./ 下面/ 讨论/ DP/ -/ Graph/ 的/ 构建/ 算法/ ./ 对于/ 一种/ 业务流程/ 构建/ 方式/ 而言/ ,/ 需要/ 根据/ 它/ 的/ 数据模型/ 和/ 流程/ 模型/ 来/ 构建/ DP/ -/ Graph/ ./ DP/ -/ Graph/ 本质/ 上/ 是/ 一个/ 有向图/ ,/ 可以/ 用/ 邻接/ 表/ 和/ 邻接矩阵/ 的/ 数据结构/ 来/ 表示/ ./ 根据/ 流程/ 模型/ 和/ 数据模型/ 来/ 构建/ DP/ -/ Graph/ ,/ 可以/ 首先/ 通过/ 对/ 数据模型/ 中/ Ddepend/ 的/ 分析/ ,/ 生成/ DP/ -/ Graph/ 中/ 数据模型/ 对应/ 的/ 邻接/ 表/ D/ -/ Graph/ ./ 然后/ 再/ 对/ 流程/ 模型/ 中/ 的/ Pprecedence/ 、/ CTtrue/ 、/ CTfalse/ 元素/ 进行/ 分析/ ,/ 生成/ DP/ -/ Graph/ 与/ 流程/ 模型/ 中/ 对应/ 的/ 邻接/ 表/ P/ -/ Graph/ ./ 而后/ DCvariable/ 和/ Cvariable/ 两种/ 元素/ 可以/ 用/ 邻接矩阵/ 表示/ ./ 最后/ 再用/ 3/ 组共/ 6/ 个/ 邻接/ 表来/ 表示/ D/ -/ Graph/ 和/ P/ -/ Graph/ 之间/ 的/ 关系/ DPpreconditioins/ 、/ PDcreate/ 、/ PDdelete/ ,/ 便/ 构建/ 出/ 了/ 完整/ 的/ DP/ -/ Graph/ ./ 可见/ 一个/ DP/ -/ Graph/ 共/ 包括/ 8/ 个/ 邻接/ 表/ 和/ 两个/ 邻接矩阵/ ./ 具体/ 的/ 构建/ 算法/ 如/ 算法/ 1/ 所示/ ./ 算法/ 1/ ./ DP/ -/ GraphConstruction/ ./ 输入/ :/ 数据模型/ dm/ ,/ 流程/ 模型/ pm/ 输出/ :/ DP/ -/ GraphDPG/ 变量/ 定义/ :/ 邻接/ 表/ DG/ ,/ PG/ ,/ DP1/ ,/ DP2/ ,/ PDC1/ ,/ PDC2/ ,/ 邻接矩阵/ 犆/ 犞/ ,/ 犇/ 犆/ 犞/ 1/ ./ 创建/ 邻接/ 表/ D/ -/ GraphDG/ ,/ DG/ 的/ 每个/ 节点/ 对应/ 于/ Page62/ ./ ForeveryDdepend/ 中/ 的/ 元素/ 〈/ Dm/ ,/ Dn/ 〉/ 3/ ./ DG/ [/ m/ ]/ 链接/ n/ ;/ 4/ ./ 创建/ 邻接/ 表/ P/ -/ GraphPG/ ,/ 5/ ./ ForeveryPprecedure/ 中/ 的/ 元素/ 〈/ Pm/ ,/ Pn/ 〉/ 和/ CTtrue/ 中/ 的/ 6/ ./ PG/ [/ m/ ]/ 链接/ n/ ;/ 7/ ./ ForeveryCTfalse/ 中/ 的/ 元素/ 〈/ Pm/ ,/ Pn/ 〉/ 8/ ./ PG/ [/ m/ ]/ 链接/ n/ ;/ 9/ ./ 创建/ 邻接/ 表/ DP1/ 和/ DP2/ 来/ 表示/ DPpreconditions/ ,/ 两个/ 10/ ./ 同理/ 创建/ 邻接/ 表/ PDC1/ 和/ PDC2/ 来/ 表示/ PDcreate/ ;/ 11/ ./ 同理/ 创建/ 邻接/ 表/ PDD1/ 和/ PDD2/ 来/ 表示/ PDdelete/ ;/ 12/ ./ 创建/ 邻接矩阵/ 犆/ 犞/ 和犇/ 犆/ 犞/ ;/ 13/ ./ 犆/ 犞/ 矩阵/ 的/ 每/ 一行/ 对应/ 一个/ Conditions/ ,/ 每/ 一列/ 对应/ 14/ ./ 犇/ 犆/ 犞/ 矩阵/ 的/ 每/ 一行/ 对应/ 一个/ Constraints/ ,/ 每/ 一列/ 对/ 15/ ./ 将/ 犆/ 犞/ 和犇/ 犆/ 犞/ 的/ 所有/ 元素/ 初始化/ 为/ 0/ ;/ 16/ ./ ForeveryDCvariable/ 的/ 元素/ 〈/ DCm/ ,/ DOn/ 〉/ 17/ ./ 犇/ 犆/ 犞/ [/ m/ ]/ [/ n/ ]/ ←/ 1/ ;/ 18/ ./ ForeveryCvariable/ 的/ 元素/ 〈/ Cm/ ,/ DOn/ 〉/ 19/ ./ 犆/ 犞/ [/ m/ ]/ [/ n/ ]/ ←/ 1/ ;/ 20/ ./ DG/ ,/ PG/ ,/ DP1/ ,/ DP2/ ,/ PDC1/ ,/ PDC2/ ,/ PDD1/ ,/ PDD2/ ,/ 下面/ 分析/ DP/ -/ Graph/ 构建/ 算法/ 的/ 复杂度/ ./ 该/ 算法/ 共/ 需要/ 构建/ 8/ 个/ 邻接/ 表/ 和/ 两个/ 邻接矩阵/ ./ 设/ 流程/ 模型/ 任务/ 数为/ t/ ,/ 流程/ 控制/ 条件/ 数为/ k/ ,/ 控制变量/ 数为/ l/ ./ 数据模型/ 数据/ 对象/ 数为/ d/ ,/ 数据/ 约束条件/ 数为/ m/ ,/ 约束/ 变量/ 数为/ n/ ./ 复杂度/ 为/ O/ (/ 4t/ +/ 4d/ +/ kl/ +/ mn/ )/ ./ 图/ 4DP/ -/ Graph/ 状态/ 空间/ 5/ 基于/ DP/ -/ Graph/ 的/ 数据模型/ 异常/ 检测/ 本文/ 提出/ 的/ 异常/ 检测/ 方法/ 的/ 主要/ 思想/ 是/ 基于/ DP/ -/ Graph/ ,/ 应用/ 一组/ 状态/ 转移/ 规则/ ,/ 搜索/ 系统/ 的/ 状态/ 空间/ ,/ 从而/ 发现异常/ 状态/ ./ 首先/ ,/ 本文/ 给出/ DP/ -/ Graph/ 的/ 状态/ 空间/ ./ 这些/ 状态/ 空间/ 可以/ 看作/ 是/ 真实/ 系统/ 状态/ 的/ 仿真/ ./ 然后/ ,/ 相关/ 的/ 异常/ 状态/ 的/ 定义/ 也/ 会/ 被/ 给出/ ./ 最后/ ,/ 本文/ 给出/ 了/ 一些/ 推动/ 算法/ 进程/ 的/ 状态/ 转移/ 规则/ ./ 5.1/ 状态/ 空间/ DP/ -/ Graph/ 的/ 状态/ 由/ 任务/ 、/ 数据/ 对象/ 和/ 控制/ 条件/ 的/ 状态/ 构成/ ./ 本节/ 给出/ 了/ 任务/ 、/ 数据/ 对象/ 和/ 控制/ 条件/ 状态/ 定义/ ,/ 并/ 以此/ 为/ 基础/ 定义/ 了/ DP/ -/ Graph/ 的/ 状态/ 空间/ ./ 定义/ 3/ (/ DP/ -/ Graph/ 状态/ 空间/ )/ ./ DP/ -/ Graph/ 的/ 状态/ 空间/ 定义/ 为/ 笛卡尔/ 积/ :/ 犛/ dpg/ =/ TS/ ×/ DS/ ×/ CS/ ,/ 其中/ TS/ ,/ DS/ 和/ CS/ 分别/ 是/ Tasks/ ,/ Dataos/ 和/ Condi/ -/ tions/ 的/ 状态/ 空间/ ./ 其中/ TS/ =/ Tasks/ / {/ initial/ ,/ ready/ ,/ waiting/ ,/ running/ ,/ DS/ =/ Dataos/ / {/ defined/ ,/ undefined/ ,/ waiting/ }/ ,/ CS/ =/ Conditions/ / {/ undefined/ ,/ waiting/ ,/ 图/ 4/ 展示/ 了/ 任务/ 、/ 数据/ 对象/ 和/ 控制/ 条件/ 的/ 状态/ 转移/ 图/ ./ 其中/ 灰色/ 表示/ 的/ 是/ 与/ 数据/ 和/ 流程/ 一致性/ 异常/ 有关/ 的/ 状态/ ,/ 这/ 将/ 在/ 定义/ 6/ 中/ 详细/ 解释/ ./ 状态/ 之间/ 的/ 转移/ 即/ 推理/ 规则/ 将会/ 在/ 5.2/ 节中/ 给出/ 详细/ 定义/ ./ Page7/ 在/ 系统/ 状态/ 中/ ,/ 有/ 两个/ 特殊/ 的/ 状态/ 需要/ 专门/ 定义/ ,/ 分别/ 是/ 初始状态/ 和/ 结束/ 状态/ ./ 初始状态/ 标志/ 着/ 系统/ 执行/ 最初/ 的/ 状态/ ,/ 结束/ 状态/ 标志/ 着/ 系统/ 执行/ 的/ 完成/ ./ 定义/ 4/ (/ 初始状态/ )/ ./ 初始状态/ (/ startstate/ )/ 是/ 一个/ 状态/ 向量/ 犛/ 犞/ start/ =/ 〈/ TSV/ ,/ DSV/ ,/ CSV/ 〉/ ∈/ 犛/ dpg/ ,/ 其中/ 并且/ 定义/ 5/ (/ 结束/ 状态/ )/ ./ 结束/ 状态/ (/ successfulstate/ )/ 是/ 一个/ 状态/ 向量/ 犛/ 犞/ successful/ =/ 〈/ TSV/ ,/ DSV/ ,/ CSV/ 〉/ ∈/ Sdpg/ ,/ 其中/ TSV/ (/ t/ )/ =/ complete/ ,/ t/ =/ TendDP/ -/ Graph/ 可以/ 看作/ 是/ 对/ 业务流程/ 模型/ 和/ 数据模型/ 构成/ 的/ 系统/ 的/ 一种/ 抽象/ 描述/ ./ 系统/ 执行/ 过程/ 中所能/ 到达/ 的/ 状态/ 是/ 整个/ DP/ -/ Graph/ 状态/ 空间/ 的/ 子集/ ./ 在/ 第/ 3/ 部分/ 所/ 给出/ 的/ 基于/ 流程/ 模型/ 的/ 数据模型/ 3/ 种/ 异常/ 反应/ 在/ DP/ -/ Graph/ 的/ 状态/ 空间/ 中/ ,/ 就是/ 本文/ 定义/ 6/ 要/ 定义/ 的/ 异常/ 状态/ ./ 常/ 状态/ :/ 定义/ 6/ (/ 异常/ 状态/ )/ ./ 下面/ 3/ 种/ 状态/ 即/ 为/ 基于/ 流程/ 模型/ 的/ 数据模型/ 异/ (/ 1/ )/ 数据/ 依赖/ 关系/ 异常/ DDA/ (/ DataDependenceAnomaly/ )/ 状态/ ,/ 当且/ 仅/ 当/ (/ ∧/ D/ _/ Constrains/ →/ true/ (/ c/ )/ )/ ∨/ (/ ∧/ D/ _/ Constrains/ →/ f/ (/ )/ alsec/ )/ ,/ 其中/ “/ ∧/ D/ _/ Constrains/ ”/ 代表/ D/ _/ Constrains/ 集合/ 中/ 所有/ 元素/ 的/ 合取/ ./ (/ 2/ )/ 数据/ 对象/ 定义/ 冲突/ DDC/ (/ DataDefinitionContradiction/ )/ 状态/ ,/ 当且/ 仅/ 当/ / dwaiting/ (/ )/ d/ ∨/ / tsuspended/ (/ t/ )/ ./ (/ 3/ )/ 数据/ 约束条件/ 冲突/ DCC/ (/ DataConditionContradiction/ )/ 状态/ ,/ 当且/ 仅/ 当/ / cwaiting/ (/ )/ c/ ∨/ / twaiting/ (/ t/ )/ ./ 在/ 图/ 4/ 中/ ,/ 灰色/ 标出/ 的/ 状态/ 是/ 与/ 基于/ 流程/ 模型/ 的/ 数据模型/ 异常/ 有关/ 的/ 状态/ ./ 5.2/ 推理/ 规则/ 定义/ 本/ 节/ 定义/ 了/ 一组/ 状态/ 转移/ 规则/ ,/ 用来/ 表达/ DP/ -/ Graph/ 的/ 状态/ 转换/ ./ 应用/ 这组/ 规则/ ,/ 可以/ 进行/ 推理/ ,/ 从而/ 检测/ 可能/ 到达/ 的/ 异常/ 状态/ ./ 一条/ 状态/ 转移/ 规则/ 表示/ 为/ 一条/ 逻辑/ 语句/ ,/ 形/ 如/ :/ a/ / b/ ,/ 其中/ a/ 是/ 条件/ ,/ b/ 表示/ 应用/ 规则/ 的/ 结果/ ,/ 下面/ 用/ t/ ,/ c/ ,/ d/ ,/ g/ 来/ 分别/ 表示/ task/ ,/ condition/ ,/ dataos/ 和/ gateway4/ 种元素/ ./ 状态/ 转移/ 规则/ 定义/ 如下/ ,/ 根据/ 它们/ 实际/ 语义/ 的/ 不同/ 分为/ 5/ 个/ 规则/ 组/ ,/ 分别/ 与/ 流程/ 执行/ 的/ 不同/ 环节/ 对应/ ./ 规则/ 组/ 1/ (/ 选择/ )/ ./ 规定/ 处在/ 当前/ 状态/ 的/ 流程/ 可以/ 选择/ 执行/ 的/ 任务/ ./ ready/ (/ t/ )/ ∧/ Pdpd/ (/ t/ )/ / running/ (/ t/ )/ ,/ 其中/ Pdpd/ (/ t/ )/ / / d/ (/ 〈/ t/ ,/ d/ 〉/ ∈/ DPprecondition/ →/ defined/ (/ d/ )/ )/ ./ 如果/ 任务/ t/ 的/ 全部/ 前提/ 数据/ 都/ 存在/ ,/ 则/ t/ 进入/ 运行/ 状态/ ./ ready/ (/ t/ )/ ∧/ / Pdps/ / waiting/ (/ t/ )/ ./ 规则/ 组/ 2/ (/ 操作/ )/ ./ 表示/ 任务/ 执行/ 数据/ 操作/ 引起/ 的/ 状态/ 转移/ ./ undefined/ (/ d/ )/ ∧/ / t/ (/ running/ (/ t/ )/ ∧/ 〈/ t/ ,/ d/ 〉/ ∈/ PDcreate/ ∧/ Pddd/ (/ d/ )/ )/ / defined/ (/ d/ )/ ,/ 其中/ Pddd/ (/ )/ d/ / / d/ (/ 〈/ d/ ,/ d/ 〉/ ∈/ Ddepend/ →/ defined/ (/ d/ )/ )/ ./ 如果/ 数据/ d/ 所/ 依赖/ 的/ 数据/ 全部/ 存在/ ,/ 则/ 任务/ t/ 可以/ 创建/ 数据/ d/ ./ undefined/ (/ d/ )/ ∧/ running/ (/ t/ )/ ∧/ 〈/ t/ ,/ d/ 〉/ ∈/ PDcreate/ →/ / Pddd/ (/ d/ )/ / waiting/ (/ d/ )/ ∧/ suspended/ (/ t/ )/ ./ 数据/ d/ 所/ 依赖/ 的/ 数据/ 未/ 创建/ ,/ 则/ t/ 进入/ suspen/ -/ ded/ 状态/ ,/ d/ 进入/ waiting/ 状态/ ,/ 发生/ 异常/ ./ running/ (/ t/ )/ ∧/ defined/ (/ d/ )/ ∧/ 〈/ t/ ,/ d/ 〉/ ∈/ PDdelete/ / undefined/ (/ d/ )/ ;/ defined/ (/ d/ )/ ∧/ / d/ ,/ / t/ (/ 〈/ d/ ,/ d/ 〉/ ∈/ Ddepend/ ∧/ running/ (/ t/ )/ ∧/ defined/ (/ d/ )/ ∧/ 〈/ t/ ,/ d/ 〉/ ∈/ PDdelete/ )/ / undefined/ (/ d/ )/ ./ 删除/ 数据/ d/ 的/ 同时/ 删除/ 所有/ 依赖/ d/ 的/ 数据/ 对象/ ./ 规则/ 组/ 3/ (/ 唤醒/ )/ ./ 表示/ 数据/ 状态/ 的/ 改变/ 触发/ 相应/ 流程/ 元素/ 状态/ 的/ 变化/ ./ waiting/ (/ t/ )/ ∧/ / d/ (/ 〈/ t/ ,/ d/ 〉/ ∈/ DPpreconditions/ →/ defined/ (/ d/ )/ )/ / ready/ (/ d/ )/ ;/ waiting/ (/ c/ )/ ∧/ / d/ (/ 〈/ c/ ,/ d/ 〉/ ∈/ Cvariable/ →/ defined/ (/ d/ )/ )/ / uncertain/ (/ c/ )/ ;/ waiting/ (/ d/ )/ ∧/ / d/ (/ 〈/ d/ ,/ d/ 〉/ ∈/ Ddepend/ →/ defined/ (/ d/ )/ )/ / defined/ (/ d/ )/ ;/ suspended/ (/ t/ )/ ∧/ / d/ (/ 〈/ t/ ,/ d/ 〉/ ∈/ PDcreate/ →/ / waiting/ (/ d/ )/ )/ / running/ (/ t/ )/ ./ 规则/ 组/ 4/ (/ 完成/ )/ ./ 表示/ 任务/ 完成/ 时/ 状态/ 的/ 改变/ ./ running/ (/ t/ )/ ∧/ / d/ (/ (/ 〈/ t/ ,/ d/ 〉/ ∈/ PDcreate/ →/ defined/ (/ d/ )/ )/ ∧/ (/ 〈/ t/ ,/ d/ 〉/ ∈/ PDdelete/ →/ undefined/ (/ d/ )/ )/ )/ / complete/ (/ t/ )/ ./ 规则/ 组/ 5/ (/ 触发/ )/ ./ 表示/ 对/ 后续/ 任务/ 的/ 触发/ ./ Page8Pprecedence/ / over/ (/ t/ )/ ∧/ ready/ (/ t/ )/ ;/ complete/ (/ t/ )/ ∧/ (/ over/ (/ t/ )/ ∨/ initial/ (/ t/ )/ )/ ∧/ 〈/ t/ ,/ t/ 〉/ ∈/ t/ 执行/ 完成/ 后/ ,/ 开始/ 执行/ t/ 的/ 后续/ 任务/ t/ ./ complete/ (/ t/ )/ ∧/ 〈/ t/ ,/ g/ 〉/ ∈/ Pprecedence/ / g/ ./ ControlRules/ ;/ Pttc/ (/ t/ ,/ c/ )/ ∧/ true/ (/ c/ )/ ∧/ 〈/ c/ ,/ t/ 〉/ ∈/ CTtrue/ ∧/ (/ over/ (/ t/ )/ ∨/ initial/ (/ t/ )/ )/ / over/ (/ t/ )/ ∧/ ready/ (/ t/ )/ ,/ 其中/ Pttc/ (/ t/ ,/ c/ )/ / complete/ (/ t/ )/ ∧/ 〈/ t/ ,/ c/ 〉/ ∈/ Pprecedence/ ;/ Pttc/ (/ t/ ,/ c/ )/ ∧/ false/ (/ c/ )/ ∧/ 〈/ c/ ,/ t/ 〉/ ∈/ CTfalse/ ∧/ (/ over/ (/ t/ )/ ∨/ initial/ (/ t/ )/ )/ / over/ (/ t/ )/ ∧/ read/ (/ t/ )/ ;/ Pttc/ (/ t/ ,/ c/ )/ ∧/ uncertain/ (/ c/ )/ ∧/ PcanBeTure/ (/ c/ )/ ∧/ 〈/ c/ ,/ t/ 〉/ ∈/ CTtrue/ ∧/ (/ over/ (/ t/ )/ ∨/ initial/ (/ t/ )/ )/ / over/ (/ t/ )/ ∧/ ready/ (/ t/ )/ ∧/ true/ (/ c/ )/ ,/ 其中/ Pcanbeture/ / / (/ ∧/ D/ _/ Constrains/ →/ false/ (/ c/ )/ )/ ;/ Pttc/ (/ t/ ,/ c/ )/ ∧/ uncertain/ (/ c/ )/ ∧/ PcanBeFalse/ (/ c/ )/ ∧/ 〈/ c/ ,/ t/ 〉/ ∈/ CTfalse/ ∧/ (/ over/ (/ t/ )/ ∨/ initial/ (/ t/ )/ )/ / over/ (/ t/ )/ ∧/ ready/ (/ t/ )/ ∧/ false/ (/ c/ )/ ,/ 其中/ Pcanbefalse/ / / (/ ∧/ D/ _/ Constrains/ →/ ture/ (/ c/ )/ )/ ./ 检测/ 是否/ 存在/ 不可/ 达/ 分支/ ./ Pttc/ (/ t/ ,/ c/ )/ ∧/ undefined/ (/ c/ )/ / waiting/ (/ c/ )/ ./ 5.3/ DPGT/ :/ 基于/ DP/ -/ Graph/ 的/ 数据模型/ 异常/ 检测/ 方法/ 根据/ 前面/ 定义/ 的/ 推理/ 规则/ ,/ 本文/ 提出/ 了/ 面向/ 业务流程/ 模型/ 的/ 数据模型/ 异常/ 检测/ 算法/ DPGT/ (/ DP/ -/ GraphbasedDetection/ )/ ./ DPGT/ 的/ 基本/ 思想/ 是/ 在/ DP/ -/ Graph/ 的/ 基础/ 上/ ,/ 应用/ 前面/ 定义/ 的/ 状态/ 转换规则/ ,/ 搜索/ DP/ -/ Graph/ 的/ 状态/ 空间/ ,/ 检查/ 前面/ 定义/ 的/ 异常/ 状态/ ,/ 从而/ 发现/ 面向/ 流程/ 模型/ 的/ 数据模型/ 异常/ ./ DPGT/ 基本/ 过程/ 是从/ 初始状态/ 开始/ ,/ 应用/ 状态/ 转换规则/ ,/ 得出/ 所有/ 可能/ 到达/ 的/ 状态/ ,/ 当/ 所有/ 可/ 达/ 状态/ 搜素/ 完毕/ 时/ 算法/ 结束/ ./ 过程/ 中/ 记录/ 下/ 发现/ 的/ 异常/ 状态/ ./ 下面/ 是/ 基本/ 的/ DPGT/ 算法/ ./ 算法/ 2/ ./ DP/ -/ GraphBasedDetection/ ./ 输入/ :/ DP/ -/ Graphdpg/ ,/ 状态/ 向量/ 狊/ 狏/ 输出/ :/ 错误/ 状态变量/ 定义/ :/ StackSVstack/ ,/ 状态/ 向量/ 狋/ 犲/ 犿/ 狆/ 狊/ 狏/ ,/ 狋/ 犲/ 犿/ 狆/ 狊/ 狏/ 2/ ,/ 1/ ./ SVstack/ ./ push/ (/ SVstart/ )/ ;/ 2/ ./ whileSVstack/ 非空/ 3/ ./ 狊/ 狏/ =/ SVstack/ ./ pop/ (/ )/ ;/ 4/ ./ 检查/ 狊/ 狏/ 是否/ 异常/ 状态/ ;/ 5/ ./ if/ 狊/ 狏/ 不是/ “/ 结束/ 状态/ ”/ ;/ 6/ ./ rs/ ←/ 所有/ “/ 就绪/ ”/ 状态/ 的/ 任务/ ;/ 7/ ./ if/ (/ rs/ 非空/ )/ 8/ ./ 报告/ 非正常/ 终止/ (/ 死锁/ )/ ;/ 9/ ./ else10/ ./ forrs/ 中/ 的/ 每个/ 任务/ 11/ ./ 犜/ 犲/ 犿/ 狆/ 狊/ 狏/ ←/ 狊/ 狏/ ;/ 12/ ./ 应用/ “/ choose/ ”/ (/ dpg/ ,/ 狋/ 犲/ 犿/ 狆/ 狊/ 狏/ )/ ;/ 13/ ./ 应用/ “/ operation/ ”/ (/ dpg/ ,/ 狋/ 犲/ 犿/ 狆/ 狊/ 狏/ )/ ;/ 14/ ./ 应用/ “/ awaken/ ”/ (/ dpg/ ,/ 狋/ 犲/ 犿/ 狆/ 狊/ 狏/ )/ ;/ 15/ ./ 应用/ “/ complete/ ”/ (/ dpg/ ,/ 狋/ 犲/ 犿/ 狆/ 狊/ 狏/ )/ ;/ 16/ ./ for/ 每个/ “/ trigger/ ”/ 规则/ 17/ ./ 狋/ 犲/ 犿/ 狆/ 狊/ 狏/ 2/ ←/ 狋/ 犲/ 犿/ 狆/ 狊/ 狏/ ;/ 18/ ./ 应用/ “/ trigger/ ”/ (/ dpg/ ,/ 狋/ 犲/ 犿/ 狆/ 狊/ 狏/ 2/ )/ ;/ 19/ ./ if/ 狋/ 犲/ 犿/ 狆/ 狊/ 狏/ 2/ 未/ 访问/ 过/ 20/ ./ SVstack/ ./ push/ (/ 狋/ 犲/ 犿/ 狆/ 狊/ 狏/ 2/ )/ ;/ 21/ ./ endfor22/ ./ endfor23/ ./ endwhile/ 以下/ 是/ 对/ DPGT/ 算法/ 进行/ 复杂度/ 分析/ ./ DPGT/ 算法/ 的/ 本质/ 是/ 按照/ 多个/ 不同/ 的/ 执行/ 序列/ 来/ 依次/ 模拟/ 地/ 执行/ 流程/ 中/ 的/ 各个/ 任务/ ,/ 在/ 执行/ 的/ 过程/ 中/ 发现/ 数据模型/ 的/ 异常/ ./ 不妨/ 设/ 执行/ 一个/ 任务/ 的/ 平均/ 时间/ 为/ 1/ ,/ 算法/ 复杂度/ 的/ 关键/ 便是/ 检测/ 并行/ 分支/ 中/ 的/ 不同/ 任务/ 执行/ 序列/ 的/ 个数/ ./ 假如/ 有/ m/ 个/ 并行/ 分支/ ,/ 每个/ 分支/ 有/ n/ 个/ 任务/ ,/ 可能/ 的/ 执行/ 序列/ 个数/ 是/ Cn3n/ ×/ …/ ×/ CnCn/ 的/ 状态/ ,/ 故/ 总/ 的/ 复杂度/ 为/ O/ (/ Cnmn/ ×/ mn/ )/ ./ Cn6/ 实验/ 本次/ 实验/ 是/ 基于/ CCTV/ 物资/ 管理系统/ 来/ 进行/ 的/ ./ 中央电视台/ 物资/ 管理系统/ 包含/ 了/ 复杂/ 的/ 业务流程/ 模型/ 和/ 数据模型/ ,/ 业务流程/ 模型/ 包含/ 6/ 个子/ 流程/ ,/ 97/ 个/ 任务/ ,/ 数据模型/ 包含/ 124/ 个/ 实体/ ./ 业务流程/ 的/ 构建/ 以及/ 任务/ 操作/ 的/ 描述/ 在/ PASE/ [/ 17/ ]/ 中/ 完成/ ./ 该/ 系统/ 是/ 一个/ 典型/ 的/ 信息系统/ ./ 首先/ 用/ 文献/ [/ 14/ ]/ 中/ 提出/ 的/ 工作/ 流/ 模型/ 中/ 的/ data/ -/ flow/ 验证/ 方法/ 进行/ 实验/ ./ 在/ 相关/ 工作/ 部分/ 已经/ 分析/ 过该/ 方法/ 是/ 基于/ 流程/ 模型/ 中/ 的/ 动态数据/ ,/ 并/ 不/ 针对/ 于/ 数据模型/ ./ 这种/ 方法/ 对于/ 数据/ 对象/ 定义/ 冲突/ (/ DDC/ )/ 异常/ (/ 对应/ 于/ 该/ 方法/ 中/ 的/ missingdata/ 情况/ )/ 在/ 流程/ 模型/ 中/ 可以/ 检测/ 出来/ ./ 但/ 由于/ 其/ 并未/ 考虑/ 数据模型/ 中/ 的/ 依赖/ 关系/ 和/ 约束条件/ ,/ 其/ 对于/ 其它/ 两类/ 异常/ 是/ 无能为力/ 的/ ./ 表/ 1/ 是/ 这种/ 方法/ 在/ CCTV/ 物资/ 管理系统/ 中/ 的/ 实验/ 结果/ ./ 该/ 表列出/ 了/ 异常/ 发现/ 的/ 数量/ ./ 这些/ 异常/ 便是/ 第/ 3/ 部分/ 提出/ 来/ 的/ 数据/ 依赖/ 关系/ 异常/ (/ DDA/ )/ 、/ 数据/ 对象/ 定义/ 冲突/ (/ DDC/ )/ 以及/ 数据/ 约束条件/ 冲突/ (/ DCC/ )/ ./ Page9/ 检测/ 项目/ 实际/ 数量/ 检测/ 数量/ 异常/ 检出率/ // %/ DDA/ 数量/ 10DDC/ 数量/ 21DCC/ 数量/ 12/ 异常/ 总数/ 43/ 下面/ 便/ 对/ DPGT/ 方法/ 实现/ 的/ 模型/ 验证/ 器/ 在/ 系统/ 设计/ 中/ 进行/ 了/ 试用/ ./ 表/ 2/ 是/ DPGT/ 方法/ 的/ 实验/ 结果/ ./ 表/ 2DPGT/ 在/ CCTV/ 物资/ 管理系统/ 上/ 的/ 实验/ 结果/ 检测/ 项目/ 实际/ 数量/ 检测/ 数量/ 异常/ 检出率/ // %/ DDA/ 数量/ 10DDC/ 数量/ 21DCC/ 数量/ 12/ 异常/ 总数/ 43DPGT/ 方法/ 对于/ 这/ 3/ 种/ 异常/ 均/ 有/ 较/ 高/ 的/ 检出率/ ,/ 即/ 其/ 在/ 检测/ 面向/ 业务流程/ 的/ 数据模型/ 异常/ 方面/ 是/ 非常/ 有效/ 的/ ./ 这些/ 异常/ 有/ 很多/ 是/ 隐蔽/ 的/ ,/ 在/ 模型/ 设计/ 中/ 经常/ 被/ 忽略/ ./ DPGT/ 方法/ 的/ 应用/ 减少/ 了/ 这种/ 错误/ ,/ 使得/ 系统/ 模型/ 更加/ 规范/ ,/ 增强/ 了/ 系统/ 健壮性/ ,/ 减轻/ 了/ 系统/ 测试/ 和/ 修改/ 的/ 工作/ ./ 有些/ 异常/ DPGT/ 方法/ 并/ 没有/ 检出/ ,/ 但是/ 可以/ 通过/ 系统/ 测试/ 发现/ ,/ 经过/ 分析/ 仍然/ 划归/ 流程/ -/ 数据/ 一致性/ 导致/ 的/ 数据模型/ 异常/ ./ 异常/ 的/ 检出率/ 并未/ 达到/ 100/ %/ ,/ 原因/ 在于/ CCTV/ 物资/ 管理系统/ 流程/ 中/ 包含/ 一些/ 现阶段/ 的/ DPGT/ 算法/ 尚未/ 完全/ 支持/ 的/ 高级/ 流程/ 模式/ [/ 18/ ]/ 和/ 即席/ 流程/ [/ 17/ ]/ 定义/ ./ 7/ 总结/ 和/ 展望/ 随着/ 流程/ 驱动/ 的/ 建模/ 方式/ 的/ 广泛应用/ ,/ 数据模型/ 面向/ 业务流程/ 的/ 异常/ 也/ 越来越/ 频繁/ 地/ 出现/ ,/ 而/ 并/ 没有/ 现成/ 方法/ 来/ 自动化/ 地/ 检测/ 这些/ 异常/ ./ 本文/ 提出/ 并/ 分析/ 了/ 基于/ 流程/ 模型/ 的/ 数据模型/ 异常/ 并/ 将/ 这些/ 异常/ 分成/ 数据/ 依赖/ 关系/ 异常/ 、/ 数据/ 对象/ 定义/ 冲突/ 、/ 数据/ 约束条件/ 冲突/ 三类/ ./ 为了/ 实现/ 自动化/ 地/ 对/ 这些/ 异常/ 进行/ 检测/ ,/ 本文/ 提出/ 了/ DP/ -/ Graph/ 模型/ 来/ 联系/ 数据模型/ 和/ 流程/ 模型/ 并/ 基于/ DP/ -/ Graph/ 提出/ 了/ DPGT/ 异常/ 检测/ 方法/ ./ 文章/ 给出/ 了/ DPGT/ 算法/ 在/ CCTV/ 物资/ 管理系统/ 项目/ 中/ 应该/ 的/ 实验/ 结果/ ,/ 验证/ 了/ DPGT/ 算法/ 检测/ 面向/ 流程/ 模型/ 的/ 数据模型/ 异常/ 的/ 高/ 检出率/ ,/ 证明/ 了/ 该/ 方法/ 在/ 实际/ 模型/ 构建/ 中/ 的/ 实用性/ ./ 在/ 以后/ 的/ 工作/ 中/ ,/ 会/ 增加/ DPGT/ 检测/ 算法/ 对/ 即席/ 流程/ [/ 15/ ]/ 的/ 支持/ ./ 

