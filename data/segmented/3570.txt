Page1/ 实时/ 响应/ 物/ 联网/ 中/ 基于/ 查询/ 的/ 数据/ 转发/ 方案/ 李英龙/ 1/ )/ ,/ 2/ )/ ,/ 3/ )/ 陈红/ 1/ )/ ,/ 2/ )/ 莫尚丰/ 1/ )/ ,/ 2/ )/ ,/ 3/ )/ 1/ )/ (/ 教育部/ 数据/ 工程/ 与/ 知识/ 工程/ 重点/ 实验室/ (/ 中国人民大学/ )/ 北京/ 100872/ )/ 2/ )/ (/ 中国人民大学/ 信息/ 学院/ 北京/ 100872/ )/ 3/ )/ (/ 湖南/ 科技/ 大学/ 数学/ 与/ 计算/ 科学/ 学院/ 湖南/ 湘潭/ 411201/ )/ 摘要/ 在/ 许多/ 基于/ 传感器/ 网络/ 技术/ 的/ 物/ 联网/ 应用/ 中/ ,/ 用户/ 需要/ 快速/ 的/ 查询/ 响应/ ,/ 比如/ 智能/ 交通/ 物/ 联网/ 应用/ 中/ ,/ 行驶/ 在/ 路上/ 的/ 司机/ 即时/ 查询/ 附近/ 的/ 空/ 停车位/ 信息/ ./ 如何/ 为/ 此类/ 物/ 联网/ 设计/ 一种/ 符合/ 传感器/ 网络/ 特性/ (/ 如/ 能量/ 有效/ 等/ )/ 的/ 快速/ 数据/ 转发/ 方案/ 是/ 一项/ 重要/ 的/ 挑战性/ 工作/ ./ 已有/ 的/ 传感器/ 网络/ 实时/ 数据/ 转发/ 协议/ 大都/ 因未/ 解决/ 好/ 转发/ 断路/ 带来/ 的/ 额外/ 开销/ 、/ 孤立/ 节点/ 处理/ 耗时/ 、/ 难以/ 适应/ 网络拓扑/ 动态变化/ 等/ 关键性/ 问题/ 而/ 未/ 取得/ 理想/ 的/ 实时性/ 效果/ ./ 为此/ ,/ 该文/ 提出/ 一种/ 新/ 的/ 基于/ 查询/ 的/ 快速/ 数据/ 转发/ 方案/ ,/ 利用/ 查询/ 消息/ 为/ 每个/ 传感器/ 节点/ 建立/ 最/ 快速/ 的/ 数据/ 转发/ 路径/ (/ 有/ 向/ 无/ 环图/ )/ ,/ 此外/ 文中/ 给出/ 的/ 综合/ 路径/ 代价/ 模型/ 可以/ 均衡/ 网络/ 能量/ 和/ 减少/ 网络/ 拥塞/ 延时/ ,/ 最后/ 设计/ 了/ 贪婪/ 的/ 分布式/ 数据/ 转发/ 算法/ 及其/ 改进/ 算法/ ,/ 并用/ 仿真/ 实验/ 验证/ 了/ 该/ 方案/ 的/ 有效性/ 和/ 高效性/ ./ 关键词/ 物/ 联网/ ;/ 实时/ 数据/ 转发/ ;/ 转发/ 断路/ ;/ 孤立/ 节点/ ;/ 优先/ 转发/ 节点/ ;/ 备份/ 转发/ 节点/ ;/ 连通/ 度/ ;/ 无线/ 传感器/ 网络/ 1/ 引言/ 物/ 联网/ (/ InternetofThings/ ,/ IoT/ )/ 是/ 以/ 感知/ 为/ 目的/ ,/ 实现/ 人/ 与/ 人/ 、/ 人与物/ 、/ 物与物/ 全面/ 互联/ 的/ 网络/ ,/ 其/ 特征/ 是/ 通过/ 传感器/ 、/ 射频/ 识别/ (/ RFID/ )/ 等/ 方式/ 获取/ 物理/ 世界/ 的/ 各种/ 信息/ ,/ 结合/ 互联网/ 、/ 移动/ 通信网/ 等/ 网络/ 进行/ 信息/ 的/ 传送/ 与/ 交互/ ,/ 采用/ 智能/ 计算技术/ 对/ 信息/ 进行/ 分析/ 处理/ ,/ 从而/ 提高/ 对/ 物质/ 世界/ 的/ 感知/ 能力/ ,/ 实现/ 智能化/ 的/ 决策/ 和/ 控制/ [/ 1/ ]/ ./ 物/ 联网/ 广泛应用/ 于/ 安防/ 、/ 电力/ 、/ 交通/ 、/ 医疗/ 等/ 许多/ 领域/ ./ 在/ 许多/ 物/ 联网/ 应用/ 中/ ,/ 用户/ 需要/ 得到/ 快速/ 而/ 可靠/ 的/ 查询/ 响应/ ./ 比如/ 智能/ 交通/ 物/ 联网/ 应用/ 中/ ,/ 行驶/ 在/ 道路/ 上/ 的/ 司机/ 即时/ 查找/ 附近/ 的/ 空闲/ 停车位/ 信息/ ;/ 在/ 安防/ 物/ 联网/ 视频/ 监控/ 应用/ 系统/ 中/ 获取/ 指定/ 区域/ 的/ 实时/ 音频/ // 视频/ 监控/ 信息/ ;/ 国家/ 核电站/ 监控/ 物/ 联网/ 中/ 查询/ 实时/ 的/ 放射/ 物/ 辐射/ 水平/ ;/ 在/ 闭环控制/ 物/ 联网/ 系统/ 中/ 快速/ 查找/ 事故/ 点/ [/ 2/ ]/ ;/ 在/ 国防军/ 事物/ 联网/ 中/ ,/ 搜集/ 敌对/ 区域/ 的/ 实时/ 情报/ 等等/ ./ 在/ 此类/ 实时/ 响应/ 的/ 物/ 联网/ 应用/ 中/ ,/ 数据/ 需要/ 非常/ 及时/ 地/ 转发给/ 用户/ ,/ 否则/ 就/ 会/ 失效/ (/ 数据/ 的/ 有效期/ 很/ 短/ )/ ./ 如何/ 为/ 此类/ 物/ 联网/ 设计/ 一种/ 快速/ 的/ 数据/ 转发/ 方案/ 是/ 一项/ 亟待解决/ 的/ 挑战性/ 工作/ ./ 物/ 联网/ 体系结构/ 包括/ 应用层/ 、/ 通信/ 网络层/ (/ 包括/ 互联网/ ,/ 2G/ 、/ 3G/ 、/ 4G/ 等/ 移动/ 通信/ 网络/ )/ 和/ 感知/ 层/ ,/ 其中/ 感知/ 层/ 主要/ 由/ 各类/ 同构/ 或/ 异构/ 传感器/ 网络/ (/ Wire/ -/ lessSensorNetworks/ ,/ WSNs/ )/ 组成/ [/ 3/ ]/ ,/ 这些/ 传感器/ 网络/ 负责/ 各类/ 物理/ 目标/ 的/ 感知/ 、/ 监控/ 以及/ 感知/ 数据/ 的/ 转发/ 和/ 上传/ ,/ 它们/ 是/ 物/ 联网/ 实现/ 物与物/ 、/ 人与物/ 等/ 互联/ 通信/ 的/ 基础设施/ ,/ 是/ 物/ 联网/ 的/ 核心/ 组成部分/ 之一/ ./ 物/ 联网/ 底层/ 的/ 数据/ 转发/ 主要/ 依靠/ 传感器/ 网络/ 完成/ ./ 近年来/ ,/ 有/ 许多/ 研究/ [/ 4/ -/ 20/ ]/ 试图/ 提高/ 传感器/ 网络/ 数据/ 转发/ 的/ 实时性/ 、/ 能量/ 有效性/ 、/ 可靠性/ 等/ 方面/ 的/ 服务质量/ ,/ 但/ 由于/ 这些/ 数据/ 转发/ 策略/ 和/ 算法/ 未能/ 较/ 好地解决/ 数据/ 转发/ 断路/ 带来/ 的/ 额外/ 时间/ 和/ 能量/ 的/ 开销/ 、/ 孤立/ 节点/ 处理/ 耗时/ 、/ 难以/ 适应/ 网络拓扑/ 结构/ 动态变化/ 等/ 关键性/ 问题/ ,/ 因此/ 它们/ 都/ 未能/ 在/ 实时性/ 方面/ 取得/ 理想/ 效果/ ,/ 难以/ 满足/ 物/ 联网/ 感知/ 层中/ 数据/ 转发/ 的/ 实时性/ 要求/ ./ 文献/ [/ 4/ ]/ 提出/ 了/ 传感器/ 网络/ 中/ 可调/ 的/ 局部/ 最优/ 地理/ 转发/ 策略/ (/ tunableLocally/ -/ OptimalGeograph/ -/ icalForwardingpolicy/ ,/ LOGF/ )/ ,/ 包括/ 一个/ 简化/ 的/ 数据/ 转发/ 数学模型/ 和/ 一个/ 简单/ 的/ 单步/ 前瞻/ 数据/ 转发/ 规则/ ./ LOGF/ 可以/ 在/ 端/ 到/ 端/ 数据包/ 延迟/ 和/ 转发/ 跳数/ 之间/ 取得/ 较/ 好/ 的/ 平衡/ ,/ 但/ 该/ 策略/ 基于/ 一个/ 很/ 苛刻/ 的/ 假设/ 前提/ ,/ 即/ 在/ LOGF/ 中/ ,/ 假设/ 每个/ 节点/ 至少/ 有/ 一个/ 离/ 汇聚/ 节点/ (/ Sink/ )/ 近于/ 自己/ 的/ 邻居/ 节点/ ,/ 使得/ 沿/ 此类/ 邻居/ 节点/ 转发/ 数据/ 时/ 总能/ 到达/ Sink/ ./ 虽然/ 这个/ 假设/ 前提/ 可以/ 较/ 好/ 地/ 回避/ 转发/ 断路/ 问题/ ,/ 但/ 相同/ 跳数/ 邻居/ 节点/ 之间/ 的/ 数据/ 转发/ 也/ 会/ 影响/ 查询/ 响应/ 的/ 实时性/ ./ 文献/ [/ 5/ ]/ 基于/ 一种/ 虚拟/ 队列/ 结构/ 为/ 传感器/ 网络/ 设计/ 了/ 一个/ 机会/ 调度/ 算法/ ,/ 可以/ 控制/ 单跳/ 和/ 多/ 跳/ 网络/ 中/ 最坏/ 情况/ 下/ 的/ 延迟/ ,/ 但/ 不适/ 用于/ 实时性/ 要求/ 高/ 的/ 应用/ ./ 文献/ [/ 6/ ]/ 提出/ 了/ 通过/ 贪婪/ 嵌入/ 机制/ 以/ 确保/ 基于/ 嵌入/ 坐标/ 的/ 路由/ 总能/ 找到/ 目的/ 节点/ ,/ 但/ 没有/ 有效/ 地/ 解决/ 能量/ 有效/ 和/ 传输/ 延迟/ 问题/ ./ 文献/ [/ 7/ ]/ 提出/ 一种/ 无线网络/ 中非/ 编码/ 传输/ 协助/ 的/ 编码方案/ 来/ 减少/ 多播/ 流/ 数据传输/ 跳数/ ,/ 同样/ 存在/ 转发/ 断路/ 问题/ ./ 文献/ [/ 8/ ]/ 引入/ “/ 睡眠/ -/ 唤醒/ ”/ 调度/ 机制/ 以/ 减少/ 端到/ 端的/ 延迟/ ,/ 但/ 不能/ 保证数据/ 以/ 最小/ 跳数/ 方式/ 转发/ ,/ 从而/ 影响/ 了/ 实时性/ ./ 文献/ [/ 9/ ]/ 通过/ 减少/ 每个/ 节点/ 的/ 先进先出/ 队列/ 积压/ 和/ 实际/ 物理/ 队列/ 出队/ 连接数/ ,/ 提出/ 一种/ 镜像/ 架构/ 来/ 改进/ 背压/ (/ back/ -/ pressure/ )/ 调度/ 算法/ 的/ 延迟/ 性能/ ./ SPEED/ [/ 10/ ]/ 是/ 传感器/ 网络/ 一种/ 著名/ 的/ 实时性/ 地理/ 路由/ ,/ 它/ 只/ 选择/ 满足要求/ 的/ 快速/ 连接/ 作为/ 转发/ 路径/ ,/ 并/ 采用/ 局部/ 反馈/ 控制/ 以/ 应对/ 不断/ 变化/ 的/ 负载/ 和/ 拥塞/ ./ MMSPEED/ [/ 11/ ]/ 是/ SPEED/ 的/ 扩充/ ,/ 除了/ 在/ 转发/ 速率/ 等/ 方面/ 的/ 改进/ 之外/ ,/ MMSPEED/ 还/ 支持/ 数据/ 的/ 可靠/ 传输/ ./ SPEED/ 和/ MMSPEED/ 虽然/ 在/ 数据/ 转发/ 时/ 采用/ 了/ 局部/ 反馈/ 控制/ ,/ 但/ 都/ 没有/ 解决/ 转发/ 断路/ 问题/ ,/ 而且/ 缺少/ 对/ 延迟/ 、/ 可靠性/ 和/ 能效/ 的/ 均衡/ 考虑/ ./ 目前/ ,/ 有/ 不少/ 研究/ [/ 16/ -/ 20/ ]/ 也/ 关注/ 传感器/ 网络/ 基于/ 查询/ 的/ 路由/ ./ 文献/ [/ 16/ ]/ 提出/ 了/ 在/ 间歇性/ 的/ 连接/ 移动/ 传感器/ 网络/ 中/ 分别/ 利用/ 数据/ 对象/ 和/ 查询/ 的/ 空间信息/ 来/ 指引/ 数据/ 聚集/ 和/ 转发/ 的/ 方法/ ,/ 但/ 该/ 方法/ 没有/ 考虑/ 多/ 跳/ 数据/ 转发/ 的/ 情况/ ,/ 也/ 未能/ 较/ 好地解决/ 网络拓扑/ 结构/ 变化/ 问题/ ./ 定向/ 扩散/ (/ DirectedDiffusion/ ,/ DD/ )/ [/ 17/ ]/ 是/ 一个/ 著名/ 的/ 基于/ 查询/ 的/ 路由/ 协议/ ,/ 该/ 路由/ 包含/ (/ 查询/ )/ 兴趣/ 传播/ 阶段/ 、/ 初始/ 梯度/ 建立/ 阶段/ 和/ 沿/ 加强/ 路径/ 传输数据/ 阶段/ ./ DD/ 虽然/ 可以/ 解决/ 转发/ 断路/ 问题/ ,/ 但/ 梯度/ 中/ 会/ 存在/ 跳数/ 相同/ 的/ 邻/ 节点/ (/ 有时/ 还/ 存在/ “/ 环/ ”/ )/ ,/ 影响/ 了/ 数据/ 转发/ 的/ 实时性/ ./ 文献/ [/ 18/ ]/ 提出/ 优先/ 调度/ 策略/ 以/ 改进/ DD/ ,/ 但/ 仍/ 未/ 解决/ 上述/ 问题/ ./ 谣传/ 路由/ (/ rumorrouting/ )/ [/ 19/ ]/ 提出/ 了/ 基于/ 查询/ 消息/ 的/ 随机/ 单播/ 数据/ 转发/ 机制/ ./ 在/ 谣传/ 路由/ 中/ ,/ 事件/ 区域/ 内/ 的/ 传感器/ 节点/ 产生/ 的/ 代理/ 消息/ 和/ Sink/ 发送/ 的/ 查询/ 消息/ 都/ 沿/ 随机/ 路径/ 传播/ ,/ 当/ 它们/ 相遇/ 时/ ,/ 一条/ 从/ SinkPage3/ 到/ 事件/ 点/ 的/ 完整/ 路径/ 被/ 建立/ ./ 谣传/ 路由/ 机制/ 减少/ 了/ 利用/ 洪泛/ 方法/ 建立/ 数据/ 转发/ 路径/ 的/ 大量/ 开销/ ,/ 但是/ 随机/ 方法/ 建立/ 的/ 转发/ 路径/ 不是/ 最优/ 的/ ,/ 并且/ 存在/ 环路/ ,/ 从而/ 影响/ 数据/ 转发/ 的/ 实时性/ ./ 文献/ [/ 20/ ]/ 通过/ 引入/ 第二层/ 地理/ 路由/ 改进/ 谣传/ 路由/ ,/ 用/ 到达/ 角度/ (/ AngleofArrival/ ,/ AoA/ )/ 天线/ 和/ 信号强度/ 探测器/ 来/ 代替/ 定位/ 装置/ ,/ 但/ 由于/ 转发/ 路径/ 并非/ 最优/ ,/ 导致/ 了/ 平均/ 转发/ 跳数/ 和/ 能量消耗/ 仍然/ 很大/ ./ 我们/ 不难看出/ ,/ 目前/ 已有/ 的/ 实时/ 数据/ 转发/ 研究/ 难于/ 满足/ 物/ 联网/ 中/ 数据/ 转发/ 的/ 高/ 实时性/ 要求/ ./ 为此/ 本文/ 提出/ 一种/ 新/ 的/ 基于/ 查询/ 的/ 快速/ 数据/ 转发/ 方案/ ,/ 该/ 方案/ 主要/ 包括/ 以下/ 工作/ :/ (/ 1/ )/ 提出/ 了/ 一种/ 新/ 的/ 优先/ // 备份/ 转发/ 节点/ 策略/ 及/ 算法/ ,/ 并/ 给出/ 了/ 该/ 策略/ 下/ 网络/ 连通/ 度/ 的/ 近似/ 分析/ ./ (/ 2/ )/ 构建/ 了/ 综合/ 路径/ 代价/ 模型/ ,/ 以/ 实现/ 数据/ 转发/ 时能/ 做到/ 均衡/ 能量/ 和/ 避免/ 拥塞/ ./ (/ 3/ )/ 基于/ 优先/ // 备份/ 转发/ 节点/ 方案/ 提出/ 贪婪/ 的/ 分布式/ 数据/ 转发/ 算法/ 及/ 改进/ 算法/ ,/ 并/ 通过/ 仿真/ 实验/ 验证/ 了/ 本/ 数据/ 转发/ 方案/ 的/ 有效性/ 和/ 高效性/ ./ 本文/ 第/ 2/ 节是/ 网络/ 模型/ 和/ 问题/ 的/ 定义/ ;/ 第/ 3/ 节中/ 给出/ 优先/ // 备份/ 转发/ 节点/ 策略/ 、/ 算法/ 和/ 连通/ 度/ 分析/ ;/ 第/ 4/ 节/ 提出/ 基于/ 优先/ // 备份/ 转发/ 节点/ 策略/ 的/ 分布式/ 数据/ 转发/ 算法/ 及/ 改进/ 算法/ ;/ 第/ 5/ 节为/ 实验/ 结果/ 分析/ ;/ 第/ 6/ 节/ 给出/ 结论/ 和/ 进一步/ 的/ 研究/ 工作/ ./ 2/ 网络/ 模型/ 和/ 问题/ 定义/ 2.1/ 网络/ 模型/ 本文/ 研究/ 对象/ 为物/ 联网/ 感知/ 层/ 的/ 传感器/ 网络/ (/ WSNs/ )/ ,/ 是/ 由/ 一个/ 位置/ 固定/ 的/ Sink/ 和/ 随机/ 均匀分布/ 在/ 事件/ 区域/ 内/ 的/ n/ 个/ 可/ 移动/ 的/ 传感器/ 节点/ 组成/ ./ 每个/ 节点/ (/ 我们/ 用/ “/ 节点/ ”/ 表示/ 传感器/ 节点/ 或/ Sink/ )/ 都/ 有/ 唯一/ 的/ 标识/ (/ ID/ )/ ./ 节点/ i/ 和/ 节点/ j/ 可以/ 直接/ 通信/ 当且/ 仅/ 当/ 它们/ 的/ 距离/ d/ (/ i/ ,/ j/ )/ 不/ 超过/ 无线通信/ 半径/ R/ ,/ 即/ d/ (/ i/ ,/ j/ )/ / R/ ,/ 并称/ i/ 和/ j/ 互为/ 邻/ 节点/ ./ d/ (/ i/ ,/ j/ )/ 为/ 基于/ 地理位置/ (/ GPS/ )/ 的/ 欧式/ 距离/ ,/ 或/ 通过/ 无线通信/ 电磁波/ 的/ 传输速率/ 和/ 时间/ 计算/ 获得/ (/ GPS/ 失效/ 的/ 室内环境/ 下/ )/ ./ 数据/ 链路层/ (/ 如/ MAC/ )/ 等/ 底层/ 的/ 协议/ 以及/ “/ 睡眠/ -/ 唤醒/ ”/ 等/ 协议/ 都/ 较/ 好/ 地被/ 自动/ 管理/ [/ 4/ ,/ 8/ ]/ ./ 2.2/ 问题/ 定义/ 定义/ 1/ ./ 转发/ 断路/ ,/ 当/ 一个/ 节点/ i/ 沿着/ 某/ 一条/ 路径/ L/ 转发/ 数据/ D/ ,/ D/ 到达某/ 一/ 节点/ j/ 处/ 再也/ 无法/ 被/ 继续/ 转发/ ,/ 除非/ 按/ 原路/ L/ 返回/ i/ 改走/ 其它/ 路径/ ,/ 否则/ 不能到达/ 目的/ 节点/ ./ 那么/ 称/ L/ (/ i/ →/ j/ )/ 为/ 转发/ 断路/ ./ 在/ 许多/ 地理/ 路由/ 算法/ [/ 4/ ,/ 10/ -/ 11/ ]/ 中/ ,/ 每个/ 节点/ 选择/ 离/ Sink/ 更近/ 的/ 邻/ 节点/ 转发/ 数据/ ,/ 这/ 可能/ 导致/ 出现/ 转发/ 断路/ ,/ 如图/ 1/ 中/ ,/ S9/ ,/ S11/ 和/ S15/ 都/ 是/ S12/ 的/ 候选/ 转发/ 节点/ ,/ 当/ S12/ 选择/ S15/ 转发/ 数据/ ,/ S15/ 再/ 选择/ S16/ 转发/ 数据/ 时/ ,/ 就/ 会/ 形成/ 一个/ 转发/ 断路/ S12/ →/ S15/ →/ S16/ ,/ 因为/ 当/ 数据包/ 到达/ S16/ 时/ ,/ 再也/ 没有/ 候选/ 转发/ 节点/ 了/ ,/ 除非/ 由/ 原路/ 返回/ 至/ S12/ 改走/ 其它/ 的/ 路径/ ,/ 否则/ 数据/ 不能/ 转发/ 到/ Sink/ ./ 不难/ 得出/ ,/ 转发/ 断路/ 只会/ 增加/ 不必要/ 的/ 耗时/ 和/ 耗能/ ,/ 严重/ 影响/ 了/ 查询/ 的/ 实时/ 响应/ 和/ 能量/ 有效性/ ,/ 而/ 这个/ 问题/ 存在/ 于/ 大部分/ 现有/ 数据/ 转发/ 路由/ 协议/ 中/ (/ 详见/ 第/ 1/ 节/ “/ 引言/ ”/ 中/ 的/ 阐述/ )/ ./ 定义/ 2/ ./ 孤立/ 节点/ ,/ 随着/ 网络/ 部署/ 时间推移/ ,/ 越来越/ 多/ 的/ 节点/ 因/ 能量/ 耗尽/ 而/ 失效/ ,/ 如果/ 网络/ 中/ 某/ 节点/ i/ 的/ 通信/ 范围/ 内/ 没有/ 任何/ 有效/ (/ 具有/ 足够/ 能量/ 转发/ 一个/ 数据包/ )/ 的/ 邻/ 节点/ ,/ 无论/ 采用/ 什么/ 策略/ ,/ i/ 的/ 数据/ 都/ 不能/ 被/ 转发/ ,/ 则/ 称/ i/ 为/ 孤立/ 节点/ ./ 如图/ 1/ 中/ ,/ 由于/ 失效节点/ S18/ 和/ S19/ ,/ 节点/ S20/ 成为/ 孤立/ 节点/ ,/ 无论/ 采用/ 什么/ 策略/ ,/ S20/ 的/ 数据/ 都/ 不能/ 被/ 转发/ ./ 采用/ 如/ 文献/ [/ 10/ -/ 11/ ]/ 等/ 提出/ 策略/ ,/ 只会/ 耽误/ 查询/ 响应/ 的/ 时间/ ./ 很多/ 路由/ 算法/ 如/ 定向/ 扩散/ [/ 17/ -/ 18/ ]/ 中/ ,/ 为了/ 达到/ 能量/ 平衡/ 或/ 其它/ 目的/ ,/ 数据/ 转发/ 路径/ 中/ 会/ 存在/ 环/ 和/ 跳数/ 相同/ 的/ 邻/ 节点/ ,/ 如图/ 1/ 中/ ,/ S11/ 的/ 一条/ 转发/ 路径/ S11/ →/ S10/ →/ S9/ →/ S11/ →/ S8/ 中/ 存在/ 环路/ ,/ S11/ 的/ 另/ 一条/ 转发/ 路径/ S11/ →/ S9/ →/ S8/ 存在/ 两个/ 跳数/ 相同/ 的/ 邻/ 节点/ (/ S11/ 和/ S9/ 的/ 跳数/ 都/ 为/ 2/ )/ ,/ 这/ 都/ 会/ 增加/ 数据/ 转发/ 时间/ 和/ 能耗/ ./ 由于/ 物/ 联网/ 中/ 的/ 传感器/ 节点/ 能量/ 受限/ ,/ 节省/ 耗能/ 是/ 另外/ 一个/ 重要/ 的/ 问题/ ./ 传感器/ 网络/ 中/ 一个/ 通用/ 的/ 能耗/ 模型/ [/ 13/ ]/ 如下/ ET/ (/ i/ ,/ j/ )/ =/ k/ ·/ (/ Eelec/ +/ ε/ fs/ ·/ d2/ (/ i/ ,/ j/ )/ )/ ,/ d/ (/ i/ ,/ j/ )/ </ dcoPage4/ 其中/ ,/ ε/ fs/ 和/ ε/ mp/ 分别/ 代表/ 在/ 自由空间/ 模型/ 和/ 多路径/ 模型/ 中/ 的/ 节点/ 发射功率/ 放大器/ ;/ k/ 为/ 数据包/ 的/ 比特/ 数/ ;/ Eelec/ 表示/ 发送/ 或/ 接受/ 一个/ 比特/ 数据/ 的/ 能耗/ ;/ ET/ (/ i/ ,/ j/ )/ 为/ 节点/ i/ 发送/ k/ 比特/ 数据包/ 到/ j/ 节点/ 的/ 传输/ 耗能/ ;/ dco/ 为/ 通信/ 阈值/ ./ 从式/ (/ 1/ )/ 和/ 文献/ [/ 21/ ]/ 可知/ ,/ 短距离/ 多/ 跳/ 传输数据/ 比/ 直接/ 长距离/ 传输/ 更/ 节省/ 能量/ ./ 因此/ 如果/ 能/ 将/ 逐跳/ 数据传输/ 的/ 通信/ 距离/ 控制/ 在/ 阈值/ dco/ 以内/ ,/ 便/ 可/ 降低/ 能耗/ ,/ 而且/ 较/ 短距离/ 的/ 数据传输/ 可以/ 降低/ 接收端/ 的/ 冲突/ 概率/ (/ 较少/ 的/ 来自/ 多个/ 发送/ 端的/ 数据包/ 传输/ 重叠/ )/ [/ 22/ ]/ ,/ 对于/ 提高/ 数据传输/ 的/ 可靠性/ 也/ 有/ 好处/ ./ 然而/ 过/ 小/ 的/ 传输/ 距离/ (/ 小于/ dmin/ )/ 对于/ 降低/ 能耗/ 的/ 作用/ 却/ 很小/ ,/ 反而/ 会/ 影响/ 数据包/ 传输/ 的/ 实时性/ ./ 如图/ 2/ 中/ ,/ A/ 为/ 数据包/ 发送者/ ,/ B/ 和/ C/ 为/ A/ 的/ 候选/ 转发/ 节点/ ,/ 假设/ 它们/ 间/ 的/ 距离/ 都/ 小于/ dco/ ,/ 并且/ d/ (/ A/ ,/ B/ )/ </ dmin/ ./ 根据/ 式/ (/ 1/ )/ ,/ 只有/ 在/ 图/ 2/ (/ b/ )/ 所示/ 的/ 情况/ 下/ ,/ 转发/ 路径/ A/ →/ B/ →/ C/ 比/ A/ →/ C/ 节省/ 能量/ ,/ 但/ 更/ 耗时/ ,/ 假设/ 两邻/ 节点/ 传输/ 通道/ 延迟/ (/ Channel/ ./ delay/ )/ 为/ 100ms/ (/ 包括/ 数据包/ 的/ 排队/ 、/ 转发/ 处理/ 和/ MAC/ 冲突/ 处理/ 等/ 耗时/ )/ ,/ 则/ 路径/ A/ →/ B/ →/ C/ 的/ 耗时/ 为/ 200ms/ ,/ 而/ 路径/ A/ →/ C/ 只/ 需要/ 100ms/ ./ 我们/ 同样/ 可以/ 得出/ ,/ 图/ 2/ (/ b/ )/ 和/ (/ c/ )/ 中/ 的/ 路径/ A/ →/ B/ →/ C/ 不但/ 不能/ 减少/ 能耗/ ,/ 反而/ 降低/ 了/ 数据/ 转发/ 的/ 实时性/ ./ 图/ 2/ 中/ 的/ 3/ 种/ 情况/ 对于/ 实时性/ 来说/ ,/ 一跳/ 的/ 转发/ 路径/ A/ →/ C/ 都/ 会/ 更好/ ./ 路径/ 文献/ [/ 13/ ]/ 给出/ 了/ 一种/ 过/ 小/ 通信/ 距离/ 定义/ dmin/ =/ (/ Eelec/ // ε/ )/ 1/ // σ/ ,/ σ/ ∈/ {/ 2/ ,/ 4/ }/ ,/ ε/ 为/ 发射功率/ 放大器/ ./ 图/ 23/ 种过/ 小/ 距离/ 数据传输/ 情况/ (/ d/ (/ A/ ,/ B/ )/ </ dmin/ )/ 我们/ 认为/ ,/ 应该/ 根据/ 网络/ 分布/ 密度/ 情况/ 和/ 具体/ 的/ 应用/ 设置/ 过/ 小/ 通信/ 距离/ dmin/ ,/ 本文/ 将/ 设置/ 如/ [/ dmin/ ,/ dco/ )/ (/ dco/ </ R/ 时/ )/ 区间/ 的/ 数据/ 转发/ 通信/ 范围/ ./ 3/ 优先/ // 备份/ 转发/ 节点/ 策略/ 和/ 算法/ 3.1/ 优先/ // 备份/ 转发/ 节点/ 策略/ 定义/ 3/ ./ 查询/ 消息/ (/ QueryMessage/ ,/ QM/ )/ ,/ 是/ 由/ Sink/ 广播/ 的/ 能够/ 表达/ 用户/ 查询/ 要求/ 的/ 消息/ ./ 查询/ 消息/ 由/ 标识号/ (/ QM/ _/ ID/ )/ 、/ 发送/ 节点/ 标识号/ (/ SN/ _/ ID/ )/ 、/ 发送/ 节点/ 跳数/ (/ SN/ _/ HOP/ )/ 以及/ 具体/ 查询/ (/ QUERY/ )/ 组成/ ,/ 如图/ 3/ 所示/ ./ 定义/ 4/ ./ 优先/ 转发/ 节点/ (/ PreferredForwardingNodes/ ,/ PFNs/ )/ ,/ 节点/ i/ 的/ 所有/ PFNs/ (/ 记作/ PFNs/ (/ i/ )/ )/ 是/ i/ 的/ 部分/ 邻/ 节点/ (/ partofNNs/ (/ i/ )/ ,/ pNNs/ (/ i/ )/ )/ ,/ 并/ 满足/ 如下/ 条件/ :/ (/ 1/ )/ 节点/ i/ 经由/ pNNs/ (/ i/ )/ 转发/ 数据/ 不会/ 出现/ 转发/ 断路/ ;/ (/ 2/ )/ HOP/ (/ pNNs/ (/ i/ )/ )/ </ HOP/ (/ i/ )/ ;/ (/ 3/ )/ d/ (/ pNNs/ (/ i/ )/ ,/ i/ )/ ∈/ [/ dmin/ ,/ dco/ )/ (/ 部分/ 符号/ 说明/ 见表/ 2/ )/ ./ 定义/ 5/ ./ 备份/ 转发/ 节点/ (/ BackupForwardingNodes/ ,/ BFNs/ )/ ,/ 节点/ i/ 的/ 所有/ BFNs/ (/ 记作/ BFNs/ (/ i/ )/ )/ 是/ i/ 的/ 所有/ 不/ 属于/ PFNs/ (/ i/ )/ 的/ 邻/ 节点/ ,/ BFNs/ (/ i/ )/ 可以/ 被/ 形式化/ 地/ 描述/ 如下/ BFNs/ (/ i/ )/ =/ {/ nodej/ |/ nodej/ / PFNs/ (/ i/ )/ ∧/ d/ (/ i/ ,/ j/ )/ / R/ }/ ./ PFNs/ 通过/ 减少/ 转发/ 跳数/ 提高/ 数据/ 转发/ 的/ 实时性/ 和/ 可靠性/ 等/ 服务质量/ ,/ 当某/ 节点/ i/ 的/ PFNs/ (/ i/ )/ 失效/ 时/ ,/ i/ 的/ BFNs/ (/ i/ )/ 参加/ 数据/ 转发/ 以/ 最大/ 程度/ 地/ 延长/ 网络/ 生命周期/ ,/ 每个/ 节点/ 在/ QM/ 广播/ 阶段/ 根据/ PFNs/ // BNFs/ 策略/ 和/ 算法/ (/ 见/ 第/ 3/ 节/ )/ 获得/ 它/ 的/ 所有/ PFNs/ 和/ BFNs/ ./ 我们/ 为/ 每个/ 节点/ 定义/ 一张/ 本/ 地表/ ,/ 以/ 保存/ 一些/ 有用/ 信息/ ,/ 如表/ 1/ 所示/ ./ V/ _/ PFNV/ _/ BFNPFN/ _/ NEXT/ 其中/ ,/ HOP/ 的/ 初始值/ 为/ 0/ ./ V/ _/ PFN/ 和/ V/ _/ BFN/ 为/ 结构/ 体/ 向量/ ,/ 如图/ 4/ 所示/ ,/ 分别/ 存放/ 节点/ 的/ 优先/ 和/ 备份/ 转发/ 节点/ 的/ 标识/ (/ ID/ )/ 和/ 节点/ 到/ 其/ 优先/ 和/ 备份/ 转发/ 节点/ 之间/ 的/ 综合/ 路径/ 代价/ (/ HybridLinkCost/ ,/ HLC/ )/ ,/ 其中/ HLC/ 将/ 在/ 4.1/ 节中/ 详细/ 阐述/ ./ 图/ 4/ 节点/ 内/ 的/ 优先/ // 备份/ 转发/ 节点/ 向量/ 结构/ PFN/ _/ NEXT/ 是/ 该/ 节点/ 下次/ 转发/ 数据/ 时/ 能否/ 成为/ 其它/ 节点/ 的/ PFN/ 的/ 标志/ ,/ 初始值/ 为/ TRUE/ ,/ 当某/ 节点/ 或/ 其/ 所有/ PFNs/ 的/ 能量/ 耗尽/ 时/ ,/ 其/ PFN/ _/ NEXTPage5/ 变为/ FALSE/ ,/ 此时/ 该/ 节点/ 不能/ 成为/ 其它/ 节点/ 的/ PFN/ ./ PFN/ _/ NEXT/ 可以/ 保证/ 整个/ 网络/ 中/ 的/ PFNs/ 被/ 优先/ 地/ 用于/ 转发/ 数据/ ./ 基于/ 查询/ 的/ 数据/ 转发/ 的/ 一个/ 挑战/ 是/ Sink/ 不/ 知道/ 哪些/ 传感器/ 节点/ 有/ 满足/ 查询/ 要求/ 的/ 数据/ ,/ 所以/ Sink/ 需要/ 将/ QM/ 洪泛/ (/ flooding/ )/ 地/ 广播/ 到/ 所有/ 的/ 传感器/ 节点/ ./ 尽管/ 洪泛/ 广播/ 有/ 耗能/ 较/ 多/ 等/ 缺点/ ,/ 但/ 洪泛/ 广播/ 仍/ 作为/ 鲁棒性/ 很/ 好/ 的/ 信息/ 传播/ 技术/ 被/ 广泛应用/ ./ 在/ QM/ 广播/ 阶段/ ,/ 每个/ 节点/ 按/ 如下/ 优先/ // 备份/ 转发/ 节点/ 策略/ (/ PFNs/ // BFNs/ 策略/ )/ 得到/ 其/ 所有/ 的/ PFNs/ 和/ BFNs/ ./ PFNs/ // BFNs/ 策略/ :/ 在/ QM/ 广播/ 阶段/ ,/ 当某/ 节点/ i/ 广播/ QM/ 时/ ,/ i/ 所有/ 的/ 邻/ 节点/ 都/ 会/ 收到/ 该/ QM/ 并/ 根据/ 它们/ 自己/ 的/ HOP/ 以及/ i/ 的/ HOP/ 来/ 决定/ i/ 是/ 它们/ 的/ PFN/ 还是/ BFN/ ./ 如果/ 接收者/ j/ 是/ 第一次/ 接收/ QM/ (/ 此时/ j/ 的/ HOP/ =/ 0/ )/ 并且/ i/ 和/ j/ 的/ 距离/ 属于/ [/ dmin/ ,/ dco/ )/ ,/ 则/ i/ 为/ j/ 的/ PFN/ 并/ 修改/ j/ 的/ 跳/ 数为/ i/ 的/ 跳/ 数加/ 1/ ,/ 否则/ i/ 为/ j/ 的/ BFN/ ./ 如图/ 5/ ,/ 当/ 节点/ m/ 广播/ QM/ 时/ ,/ 假设/ m/ 的/ HOP/ 为/ h/ ,/ c/ 和/ d/ 为/ 第一次/ 收到/ QM/ (/ c/ 和/ d/ 的/ HOP/ 为/ 0/ )/ ,/ 如果/ d/ (/ m/ ,/ c/ )/ 和/ d/ (/ m/ ,/ c/ )/ 属于/ [/ dmin/ ,/ dco/ )/ ,/ 则/ m/ 为/ c/ 和/ d/ 的/ PFN/ ,/ 并且/ c/ 和/ d/ 的/ HOP/ 由/ 0/ 变为/ h/ +/ 1/ ./ 节点/ e/ 也/ 是/ 第一次/ 收到/ QM/ ,/ 但/ 由于/ e/ 和/ m/ 的/ 距离/ 超过/ dco/ ,/ 所以/ m/ 为/ e/ 的/ BFN/ ,/ 且/ e/ 的/ HOP/ 保持/ 不变/ ./ 如果/ QM/ 的/ 接收/ 节点/ 的/ HOP/ 比/ 发送/ 节点/ 的/ 大/ ,/ 而且/ 它们/ 之间/ 的/ 距离/ 属于/ [/ dmin/ ,/ dco/ )/ ,/ 则/ 发送/ 节点/ 为/ 接收/ 节点/ 的/ PFN/ ,/ 其余/ 的/ 情况/ 发送/ 节点/ 都/ 是/ 接收/ 节点/ 的/ BFN/ ./ 如图/ 5/ ,/ 节点/ d/ 因为/ 第一次/ 接收/ 了/ m/ 发送/ 的/ QM/ 而/ 使/ 它/ 的/ HOP/ 变为/ h/ +/ 1/ ,/ 当/ 它/ 接收/ 到/ n/ 节点/ 发送/ 的/ QM/ 时/ ,/ 它/ 的/ 跳数/ 比/ n/ 大/ ,/ 如果/ d/ (/ n/ ,/ d/ )/ 属于/ [/ dmin/ ,/ dco/ )/ ,/ 则/ n/ 也/ 为/ d/ 的/ PFN/ ,/ 其它/ 情况/ 比如/ a/ 和/ b/ 的/ 跳数/ 比/ m/ 小/ ,/ 则/ m/ 为/ a/ 和/ b/ 的/ BFN/ ./ QM/ 广播/ 从/ Sink/ 开始/ ,/ 直到/ 所有/ 节点/ 都/ 完成/ 一次/ QM/ 广播/ 结束/ ,/ 更/ 详细/ 的/ 描述/ 见/ 3.2/ 节/ 的/ PFNs/ // BFNs/ 获取/ 算法/ (/ 算法/ 1/ )/ ./ 3.2/ PFNs/ // BFNs/ 获取/ 算法/ 本文/ 将/ 用到/ 的/ 一些/ 符号/ 和/ 描述/ 如表/ 2/ 所示/ ./ 符号/ NNs/ (/ i/ )/ HOP/ (/ i/ )/ PA/ (/ i/ )/ V/ _/ PFN/ (/ i/ )/ V/ _/ BFN/ (/ i/ )/ thrd/ _/ pfnthrd/ _/ bfn/ 其中/ ,/ thrd/ _/ pfn/ 为/ 一个/ 节点/ 是否/ 为/ 其它/ 节点/ 的/ PFN/ 的/ 阈值/ ,/ 如果/ 两邻/ 节点/ 间/ 的/ HLC/ 值/ 大于/ 或/ 等于/ thrd/ _/ pfn/ ,/ 则/ 它们/ 不能/ 互为/ PFN/ ,/ thrd/ _/ bfn/ 具有/ 类似/ 的/ 意义/ ./ 根据/ 3.1/ 节/ 描述/ 的/ PFNs/ // BFNs/ 策略/ ,/ 我们/ 可以/ 得到/ 相应/ 的/ PFNs/ // BFNs/ 获取/ 算法/ ./ 算法/ 1/ ./ 每个/ 节点/ 得到/ PFNs/ 和/ BFNs/ ./ 输入/ :/ Sink/ 广播/ QM/ 输出/ :/ 每个/ 节点/ i/ 得到/ V/ _/ PFN/ (/ i/ )/ 和/ V/ _/ BFN/ (/ i/ )/ 1/ ./ Sink/ 广播/ QM/ ;/ // // NNs/ (/ Sink/ )/ 都/ 能/ 收到/ 此/ QM2/ ./ do3/ ./ for/ 每个/ 接收/ 到/ QM/ 的/ 节点/ j/ // // 假设/ 发送/ 节点/ 为/ i4/ ./ ifHOP/ (/ j/ )/ =/ 0then/ // // j/ 第一次/ 收到/ QM5/ ./ j/ 计算/ d/ (/ i/ ,/ j/ )/ ;/ 6/ ./ ifd/ (/ i/ ,/ j/ )/ ∈/ [/ dmin/ ,/ dco/ )/ then/ // // 如果/ dco/ >/ R/ ,/ 则/ dco/ =/ R7/ ./ V/ _/ PFN/ (/ j/ )/ / push/ _/ back/ (/ i/ ,/ 0/ )/ ;/ // // HLC/ 初值/ 为/ 08/ ./ HOP/ (/ j/ )/ ←/ HOP/ (/ i/ )/ +/ 1/ ;/ j/ 保存/ QM/ 中/ 的/ QUERY/ ;/ 9/ ./ elseV/ _/ BFN/ (/ j/ )/ / push/ _/ back/ (/ i/ ,/ 0/ )/ ;/ 10/ ./ elseifHOP/ (/ j/ )/ >/ HOP/ (/ i/ )/ then11/ ./ j/ 计算/ d/ (/ i/ ,/ j/ )/ ;/ 12/ ./ ifd/ (/ i/ ,/ j/ )/ ∈/ [/ dmin/ ,/ dco/ )/ thenV/ _/ PFN/ (/ j/ )/ / push/ _/ back/ (/ i/ ,/ 0/ )/ ;/ 13/ ./ elseV/ _/ BFN/ (/ j/ )/ / push/ _/ back/ (/ i/ ,/ 0/ )/ ;/ 14/ ./ else/ // // HOP/ (/ j/ )/ / HOP/ (/ i/ )/ 15/ ./ V/ _/ BFN/ (/ j/ )/ / push/ _/ back/ (/ i/ ,/ 0/ )/ ;/ 16/ ./ j/ 广播/ QM/ ;/ 17/ ./ endfor18/ ./ while/ (/ 所有/ 节点/ 完成/ 一次/ QM/ 广播/ )/ 根据/ 算法/ 1/ ,/ 每个/ 节点/ 都/ 可以/ 得到/ 它/ 的/ PFNs/ ./ 如图/ 6/ 为/ 图/ 1/ 中/ 所有/ 节点/ 到/ Sink/ 的/ 转发/ 路径/ ./ 在/ 图/ 6/ 中/ ,/ 每个/ 节点/ 到/ Sink/ 的/ 转发/ 路径/ 都/ 是/ 无/ 相同/ 跳数/ 邻/ 节点/ 的/ 有/ 向/ 无/ 环图/ (/ 节点/ 下/ 方括号/ 内/ 的/ 数字/ 为/ 节点/ 相对/ 于/ Sink/ 的/ 跳数/ )/ ,/ 比如/ S14/ 有/ 查询/ 数据/ 时/ ,/ 它/ 的/ 数据/ 将/ 只会/ 沿着/ 图/ 6/ 中/ “/ 实线/ ”/ 某条/ 路径/ 转发/ ,/ 将/ 不会/ 出现/ 转发/ 断路/ 和/ 相同/ 跳数/ 邻/ 节点/ 之间/ 转发/ 数据/ 的/ 情况/ ./ S12/ 的/ 一/ 跳/ 邻/ 节点/ (/ 通信/ 范围/ [/ dmin/ ,/ dco/ )/ 内/ )/ 有/ S7/ 、/ S9/ 、/ S11/ 、/ S13/ 和/ S15/ ,/ 但/ S12/ 的/ PFNs/ 只有/ S9/ 和/ S11/ ,/ S15/ 不会/ 成为/ S12/ 的/ PFN/ ,/ 这/ 将/ 避免/ 形成/ 转发/ Page6/ 断路/ ./ S11/ 的/ PFNs/ 分别/ 是/ S8/ 和/ S10/ ,/ 而/ S9/ 不是/ S11/ 的/ PFN/ ,/ 这/ 可以/ 避免/ 相同/ 跳数/ 的/ 邻/ 节点/ 之间/ 转发/ 数据/ ./ 另外/ 如果/ 孤立/ 节点/ S20/ (/ 如图/ 1/ )/ 接收/ 不到/ QM/ ,/ S20/ 就/ 不会/ 参与/ 数据/ 转发/ ,/ 因而/ 数据/ 转发/ 程序/ 不/ 需要/ 处理/ 它/ 而/ 节省时间/ ./ 3.3/ PFNs/ 连通性/ 分析/ 传感器/ 网络/ 中/ 的/ 一个/ 基本/ 问题/ 就是/ 覆盖/ 和/ 连通/ 问题/ ,/ 基于/ PFNs/ // BFNs/ 策略/ 下/ 每个/ 节点/ 得到/ 的/ PFNs/ 和/ BFNs/ 可以/ 覆盖/ 以/ 它/ 为/ 圆心/ ,/ 以/ R/ 为/ 半径/ 的/ 整个/ 圆形/ 区域/ ,/ 这/ 类/ 网络/ 的/ 覆盖/ 和/ 连通性/ 问题/ 已经/ 有/ 很多/ 研究/ [/ 23/ -/ 25/ ]/ ./ 我们/ 知道/ 为/ 随机/ 分布/ 的/ 传感器/ 网络/ 构建/ 一个/ 稳定/ 的/ 连通/ 覆盖/ 集是/ 一个/ NP/ 困难/ 问题/ ,/ 因此/ 本文/ 尝试/ 给出/ 基于/ PFNs/ 策略/ 的/ 随机/ 均匀分布/ 网络覆盖/ 和/ 连通性/ 近似/ 分析/ ./ 定义/ 6/ ./ 节点/ 连通/ 度/ ,/ 如果/ 一个/ 节点/ 有/ h/ 个/ 邻/ 根据/ PFNs/ // BFNs/ 策略/ ,/ 在/ 给定/ 的/ 通信/ 范围/ 之内/ ,/ 当/ 节点/ i/ 第一次/ 收到/ QM/ (/ HOP/ (/ i/ )/ =/ 0/ )/ 或者/ i/ 的/ HOP/ 大于/ QM/ 发送者/ j/ 的/ HOP/ 时/ ,/ j/ 即为/ i/ 的/ 一个/ PFN/ ,/ 如图/ 7/ 所示/ ,/ 假设/ Sink/ 逆时针/ 顺序/ 广播/ QM/ ,/ 节点/ 间/ 的/ 距离/ 为/ dco/ ,/ Sink/ 、/ i/ 坐标/ 分别/ 为/ (/ 0/ ,/ 0/ )/ ,/ (/ 2dco/ ,/ dco/ )/ ./ 以/ Sink/ 为/ 圆心/ ,/ dco/ 为/ 半径/ 圆上/ 的/ 点/ a/ 的/ 坐标/ 为/ (/ s/ ,/ t/ )/ ,/ 点/ c/ 为/ 圆/ (/ x/ -/ s/ )/ 2/ -/ (/ y/ -/ t/ )/ 2/ =/ d2co/ 和/ 圆/ 节点/ ,/ 则/ 称/ 该/ 节点/ 的/ 连通/ 度为/ h/ ./ 数学方法/ 求得/ i/ 的/ PFNs/ 覆盖/ 最大/ 夹角/ θ/ 近似/ 为/ 125.7/ °/ (/ 此时/ t/ 和/ s/ 都/ 近似/ 为/ 槡/ 2dco/ // 2/ )/ ,/ 如图/ 7/ 中/ 阴影/ 区域/ 所示/ ./ 有/ 文献资料/ [/ 24/ -/ 25/ ]/ 表明/ ,/ 传感器/ 节点/ 的/ 邻居/ 节点/ 数目/ 过多/ 或/ 过少/ ,/ 都/ 会/ 对/ 整个/ 网络/ 有/ 不利/ 影响/ ./ 邻居/ 太/ 少/ ,/ 容易/ 导致/ 连通性/ 和/ 可达率/ 太低/ ,/ 出现/ 较/ 多/ 的/ 孤立/ 节点/ ;/ 反之/ ,/ 太多邻/ 节点/ 容易/ 增加/ 信息冗余/ 、/ 通信/ 负担/ 和/ 信号/ 干扰/ ./ 因此/ 通常/ 根据/ 具体/ 应用/ 选定/ 固定/ 的/ 连通/ 度/ h/ ,/ 要求/ 每个/ 节点/ 的/ 邻居/ 数越/ 接近/ h/ 越好/ ./ 所以/ 我们/ 的/ 问题/ 可以/ 描述/ 为/ :/ 在/ 面积/ 为/ Q/ 的/ 区域/ 中/ 随机/ 均匀分布/ N/ 个/ 传感器/ 节点/ ,/ 通信/ 距离/ 范围/ 为/ [/ dmin/ ,/ dco/ )/ 时/ ,/ N/ 为/ 多/ 大/ ,/ 可/ 使/ 基于/ PFNs/ 策略/ 的/ 每个/ 节点/ 的/ 连通/ 度为/ 指定/ 值/ h/ 的/ 概率/ 最大/ ?/ 定理/ 1/ ./ 在/ 给定/ 的/ 传输/ 半径/ 范围/ 内/ ,/ 要/ 使/ PFNs/ 策略/ 下/ 的/ 网络/ 连通性/ 为/ 指定/ 值/ h/ 的/ 概率/ 最大/ ,/ 网络/ 节点/ 个数/ 是/ 不/ 采用/ 该/ 策略/ 的/ 网络/ (/ 每个/ 节点/ 的/ 所有/ 邻/ 节点/ 都/ 是/ 它/ 的/ 转发/ 节点/ )/ 节点/ 数/ 的/ 近/ 3/ 倍/ ./ 证明/ ./ 由于/ 讨论/ 的/ 传感器/ 网络/ 是/ 随机/ 均匀分布/ 的/ ,/ 因此/ 网络/ 近似/ 服从/ 二维/ 泊松/ 分布/ ,/ 传感器/ 节点/ 的/ 分布/ 密度/ 为/ μ/ =/ N/ // Q/ ,/ 0/ </ μ/ </ ,/ 根据上述/ PFNs/ 最大/ 覆盖/ 夹角/ 分析/ ,/ 我们/ 可以/ 得到/ 每个/ 节点/ 的/ PFNs/ 覆盖/ 区域/ S/ 的/ 面积/ 近似/ 为/ S/ =/ π/ (/ d2co/ -/ d2min/ )/ // 3/ (/ θ/ 取/ 近似值/ 120/ °/ )/ ,/ 则/ S/ 内恰/ 有/ h/ 个/ 传感器/ 节点/ 的/ 概率/ [/ 23/ ]/ 为/ 也就是说/ ,/ 在/ S/ 域/ 内/ 含有/ 传感器/ 节点/ 的/ 数目/ 近似/ 服从/ 均值/ 为/ μ/ ·/ S/ 的/ 泊松/ 分布/ ./ 从式/ (/ 2/ )/ 可知/ ,/ 在/ [/ dmin/ ,/ dco/ )/ 固定/ 不变/ 情况/ 下/ ,/ 要/ 提高/ 区域/ S/ 内/ 恰好/ 有/ h/ 个/ 节点/ 的/ 概率/ ,/ 需要/ 增加/ 传感器/ 节点/ 的/ 分布/ 密度/ ./ 稍前/ 也/ 讨论/ 过/ ,/ 节点/ 数目/ 不能/ 过多/ ,/ 所以/ 通常/ 根据/ 具体/ 应用/ 场合/ 选定/ 节点/ 连通/ 度/ 期望值/ 为/ 固定值/ h/ ,/ 要求/ 基于/ PFNs/ 策略/ 的/ 每个/ 节点/ 的/ 邻/ 节点/ 数目/ 越/ 接近/ h/ 越好/ ./ 即/ 在/ [/ h/ -/ u/ ,/ h/ +/ v/ ]/ (/ 0/ / u/ </ h/ -/ 1/ ,/ v/ / 0/ )/ 之间/ 的/ 概率/ 值/ P/ (/ h/ -/ u/ / x/ / h/ +/ v/ )/ 越大越/ 好/ ,/ 也/ 即求/ P/ (/ h/ -/ u/ / x/ / h/ +/ v/ )/ =/ ∑/ h/ +/ v/ 关于/ N/ 的/ 极值/ 问题/ ./ 令/ ξ/ =/ N/ // Q/ ·/ S/ ,/ 则/ 有/ P/ (/ h/ -/ u/ / x/ / h/ +/ v/ )/ =/ ∑/ h/ +/ v/ 对/ P/ 关于/ ξ/ 求导/ ,/ 得/ d/ ξ/ =/ ∑/ h/ +/ vdPx/ =/ h/ -/ uPage7/ 令/ dPd/ ξ/ ξ/ =/ ξ/ 0/ 整理/ 得/ 可以/ 证明/ ,/ 当/ ξ/ =/ ξ/ 0/ 时/ ,/ 有/ d/ ξ/ 2/ =/ e/ -/ ξ/ ·/ ∑/ h/ +/ vd2P/ =/ e/ -/ ξ/ ·/ ξ/ h/ -/ u/ -/ 2/ 上式/ 表明/ 概率/ P/ (/ h/ -/ u/ / x/ / h/ +/ v/ )/ 可以/ 在/ ξ/ =/ ξ/ 0/ =/ [/ (/ h/ +/ v/ )/ !/ // (/ h/ -/ u/ -/ 1/ )/ !/ ]/ 1/ // (/ u/ +/ v/ +/ 1/ )/ 处取/ 极大值/ ./ 由/ ξ/ =/ N/ ·/ π/ (/ d2co/ -/ d2min/ )/ // 3Q/ 可知/ ,/ 在/ Q/ 和/ 通信/ 距离/ 范围/ [/ dmin/ ,/ dco/ )/ 已知/ 时/ ,/ 要/ 使/ 基于/ PFNs/ 策略/ 的/ 节点/ 连通/ 度/ 在/ 区间/ [/ h/ -/ u/ ,/ h/ +/ v/ ]/ 内/ 的/ 概率/ 最大/ ,/ 传感器/ 节点/ 的/ 数目/ N/ 应为/ 由式/ (/ 5/ )/ 可知/ 定理/ 1/ 的/ 正确性/ ,/ 因为/ 不/ 采用/ 本文/ PFNs/ 策略/ ,/ 则/ 需要/ 的/ 节点/ 数为/ Q/ ξ/ 0/ // π/ (/ d2co/ -/ d2min/ )/ ./ 4/ 贪婪/ 的/ 数据/ 转发/ 算法/ 4.1/ 综合/ 路径/ 代价/ 模型/ 为了/ 实现/ 网络/ 能量/ 均衡/ 和/ 避免/ 网络/ 拥塞/ ,/ 我们/ 给出/ 了/ 一个/ 基于/ 剩余/ 能量/ 和/ 路径/ 拥塞/ 程度/ 的/ 综合/ 路径/ 代价/ (/ HybridLinkCost/ ,/ HLC/ )/ 模型/ ./ 节点/ i/ 发送/ k/ 比特/ 数据/ 到/ 节点/ j/ 的/ 主要/ 能耗/ E/ (/ i/ ,/ j/ )/ 包括/ 两/ 部分/ [/ 13/ ]/ :/ 发送/ 端/ i/ 的/ 发送/ 耗能/ ET/ (/ i/ ,/ j/ )/ 和/ 接收端/ j/ 的/ 接收/ 耗能/ ER/ (/ j/ )/ ./ 其中/ 接收/ 耗能/ ER/ (/ j/ )/ =/ k/ ·/ Eelec/ ,/ 由于/ 本文/ 设定/ 传输/ 距离/ 小于/ dco/ ,/ 根据/ 2.2/ 节/ 的/ 式/ (/ 1/ )/ ,/ ET/ (/ i/ ,/ j/ )/ =/ k/ ·/ (/ Eelec/ +/ ε/ fs/ ·/ d2/ (/ i/ ,/ j/ )/ )/ ./ 因此/ E/ (/ i/ ,/ j/ )/ =/ ER/ (/ i/ )/ +/ ET/ (/ i/ ,/ j/ )/ =/ 2k/ ·/ Eelec/ +/ k/ ·/ ε/ fs/ ·/ d2/ (/ i/ ,/ j/ )/ 定义/ 7/ ./ 拥塞/ 程度/ (/ CongestionDegree/ ,/ CD/ )/ ,/ 节点/ i/ 和/ j/ 之间/ 的/ 路径/ 拥塞/ 程度/ CD/ (/ i/ ,/ j/ )/ 包括/ 两/ 部分/ :/ 路径/ i/ →/ j/ 信道/ 占用/ 情况/ 以及/ 节点/ j/ 内/ 转发/ 队列/ 缓冲区/ 占用/ 情况/ ./ CD/ (/ i/ ,/ j/ )/ ∈/ [/ 0/ ,/ 1/ )/ 由/ 底层/ 协议/ 如/ MAC/ 自动/ 管理/ 和/ 获取/ [/ 26/ -/ 28/ ]/ ,/ 即/ 每个/ 节点/ 可以/ 通过/ 探测/ 消息/ 获取/ 与/ 周围/ 邻/ 节点/ 路径/ 的/ 拥塞/ 程度/ ./ 定义/ 8/ ./ 综合/ 路径/ 代价/ (/ HLC/ )/ 模型/ 可以/ 形式化/ 定义/ 如下/ HLC/ (/ i/ ,/ j/ )/ =/ ω/ ·/ Ε/ (/ i/ ,/ j/ )/ ·/ PA/ (/ j/ )/ -/ α/ +/ (/ 1/ -/ ω/ )/ ·/ CD/ (/ i/ ,/ j/ )/ 其中/ ,/ ω/ 是/ 一个/ 可调/ 的/ 权重/ ,/ 可以/ 根据/ 能量/ 均衡/ 和/ 拥塞/ 延迟/ 要求/ 确定/ ,/ 比如/ 对于/ 查询/ 实时/ 响应/ 系统/ 来说/ ,/ ω/ 可以/ 设置/ 小/ 一些/ ./ α/ 是/ 和/ 拥塞/ 程度/ 定义/ 有关/ 的/ 剩余/ 能量/ 系数/ ,/ α/ 取值/ 范围/ 一般/ 为/ [/ 0.5/ ,/ 1/ ]/ ./ 不难/ 得出/ ,/ 当/ 各/ 节点/ 的/ 剩余/ 能量/ 较大/ 时/ ,/ 式/ (/ 7/ )/ 前半部/ 分值/ 较/ 小/ ,/ 因而/ 拥塞/ 程度/ 对/ 转发/ 路径/ 选择/ 影响/ 较大/ ,/ 这/ 可以/ 减少/ 拥塞/ 延迟/ ,/ 提高/ 响应/ 实时性/ ;/ 反之/ ,/ 如果/ 节点/ 的/ 剩余/ 能量/ 较/ 小/ ,/ 则/ 式/ (/ 7/ )/ 中/ 前半部/ 分值/ 会/ 比较/ 大/ ,/ 因而/ 能量/ 均衡/ 对/ 转发/ 路径/ 选择/ 影响/ 较大/ ,/ 这/ 可以/ 最大化/ 传感器/ 网络/ 生命期/ ./ 因此/ HLC/ 模型/ 可以/ 起到/ 能量/ 均衡/ 和/ 拥塞/ 避免/ 的/ 作用/ ./ 4.2/ 基于/ PFNs/ // BFNs/ 策略/ 的/ 数据/ 转发/ 算法/ 定义/ 9/ ./ 数据包/ 结构/ ,/ 数据包/ (/ DataPacket/ ,/ DP/ )/ 由/ 数据包/ 标识/ (/ DP/ _/ ID/ )/ 、/ 发送/ 节点/ 标识/ (/ SN/ _/ ID/ )/ 、/ 数据/ (/ DATA/ )/ 和/ 其它/ 信息/ (/ OTHER/ _/ INFO/ )/ 组成/ ,/ 如图/ 8/ 所示/ ./ QM/ 广播/ 结束/ 后/ ,/ 每个/ 节点/ 都/ 会/ 根据/ PFNs/ // BFNs/ 策略/ (/ 算法/ 1/ )/ 得到/ 其/ 所有/ 的/ PFNs/ 和/ BFNs/ ,/ 此时/ 满足/ 查询/ 要求/ 的/ 节点/ 开始/ 转发/ 数据/ (/ 在/ 某些/ 特殊/ 应用/ 中/ ,/ 如/ 即时/ 查找/ 停车位/ 的/ 智能/ 交通/ 物/ 联网/ 中/ ,/ Sink/ 发出/ 查询/ 空/ 停车位/ 的/ QM/ ,/ 只要/ 某个/ 停车位/ 上/ 传感器/ 节点/ 上/ 检测/ 到/ 停车位/ 是/ 空闲/ 的/ ,/ 就/ 可以/ 立即/ 转发/ 结果/ 数据/ 给/ Sink/ ,/ 而/ 不必/ 等/ QM/ 广播/ 结束/ 才/ 开始/ 数据/ 转发/ ,/ 因为/ Sink/ 只/ 需要/ 一个/ 满足/ 查询/ 要求/ 的/ 结果/ ,/ 可以/ 提前结束/ 该/ 查询/ 过程/ ./ )/ ./ 具体/ 的/ 基于/ PFNs/ // BFNs/ 数据/ 转发/ 算法/ (/ PFNs/ // BFNsbasedDataForwarding/ ,/ P/ // BDF/ )/ 如下/ ./ 算法/ 2/ ./ 基于/ PFNs/ // BFNs/ 策略/ 的/ 数据/ 转发/ ./ 输入/ :/ Sink/ 广播/ QM/ 输出/ :/ 查询/ 结果/ 1/ ./ for/ 每个/ 有/ 满足/ QM/ 要求/ 数据/ 的/ 节点/ i2/ ./ i/ 广播/ MAR/ ;/ 3/ ./ for/ 每个/ 收到/ MAR/ 的/ 节点/ j4/ ./ ifj/ =/ =/ SinkthenHLC/ (/ i/ ,/ j/ )/ ←/ 0/ ;/ // // Sink/ 为/ 最/ 优先/ 转发/ 节点/ 5/ ./ elseifj/ ’/ sPFN/ _/ NEXT/ =/ =/ TRUE/ &&/ PA/ (/ j/ )/ >/ 0then6/ ./ j/ 根据/ HLC/ 模型/ 计算/ HLC/ (/ i/ ,/ j/ )/ ;/ 7/ ./ else8/ ./ HLC/ (/ i/ ,/ j/ )/ ←/ thrd/ _/ pfn/ ;/ 9/ ./ j/ 发送/ RRM/ 给/ i/ ;/ // // HLC/ (/ i/ ,/ j/ )/ 在/ MRR/ 中/ Page810/ ./ endfor11/ ./ NNs/ (/ i/ )/ 返回/ MRR/ 后/ i/ 从/ 其/ V/ _/ PFN/ 向量/ 中/ 选取/ HLCmin/ ;/ 12/ ./ ifHLCmin/ / thrd/ _/ pfnthen13/ ./ i/ 的/ PFN/ _/ NEXT/ ←/ FALSE/ 并/ 启动/ i/ 的/ BFNs/ 转发/ 数据/ ;/ 14/ ./ else15/ ./ i/ 发送/ DP/ 给/ 对应/ HLCmin/ 的/ PFNk/ ;/ // // RN/ _/ ID/ =/ k16/ ./ PA/ (/ i/ )/ ←/ PA/ (/ i/ )/ -/ E/ (/ i/ ,/ k/ )/ ;/ 17/ ./ ifk/ =/ =/ Sinkthen18/ ./ continue/ ;/ // // 选择/ 其它/ 有/ 数据/ 转发/ 的/ 节点/ 作为/ i/ ;/ 19/ ./ elsei/ ←/ k/ ;/ 20/ ./ endfor/ (/ 所有/ 的/ 查询/ 结果/ 数据/ 转发/ 到/ Sink/ )/ BFNs/ 转发/ 数据/ :/ 21/ ./ i/ 从/ 它/ V/ _/ BFN/ 向量/ 中/ 选取/ HLCmin/ ;/ 22/ ./ ifHLCmin/ / thrd/ _/ bfnthen23/ ./ 存在/ 异常/ 孤立/ 节点/ ,/ 查询/ 失败/ ;/ 24/ ./ endSimulation/ (/ )/ ;/ 25/ ./ elsei/ 同/ 14/ ~/ 19/ 行/ 各/ 语句/ 进行/ 处理/ ;/ endBFNs/ 算法/ 2/ 的/ 一个/ 运行/ 例子/ 如下/ :/ 当/ 一个/ 节点/ i/ (/ 图/ 9/ 中/ 的/ S13/ )/ 有/ 数据/ (/ S13/ 也/ 可能/ 聚集/ 收到/ 其它/ 节点/ 的/ 数据/ )/ 待/ 转发/ ,/ i/ 发出/ 一个/ 建立/ 路由/ 请求/ 消息/ (/ MessageofAskingforRouting/ ,/ MAP/ )/ ,/ 接收/ 到/ 此/ MAP/ 的/ NNs/ (/ i/ )/ (/ 图/ 9/ 中/ S10/ ,/ S11/ ,/ S12/ 等/ )/ 首先/ 判断/ 它们/ 是否/ 为/ “/ Sink/ ”/ ,/ 如果/ “/ 是/ ”/ ,/ 则/ 设置/ 对应/ 的/ HLC/ 为/ 0/ ,/ 否则/ 再/ 判断/ 它们/ 的/ PFN/ _/ NEXT/ ,/ 如果/ 为/ “/ 真/ ”/ ,/ 则/ 根据/ HLC/ 模型/ 计算/ 相应/ 的/ HLC/ 值/ (/ 图中/ HLC/ (/ S13/ ,/ S10/ )/ 等/ )/ ,/ 否则/ HLC/ 为/ thrd/ _/ pfn/ ,/ 然后/ 通过/ 回答/ 路由/ 消息/ (/ MessageofReplyingforRouting/ ,/ MRR/ )/ 返回/ HLC/ 给/ i/ ./ 当/ i/ 收到/ 所有/ NN/ (/ i/ )/ 返回/ 的/ MRR/ ,/ 则/ i/ 首先/ 从/ 它/ 的/ V/ _/ PFN/ 向量/ 中/ 选取/ 最小/ 的/ HLC/ 值/ HLCmin/ ,/ 如果/ HLCmin/ 大于/ 或/ 等于/ thrd/ _/ pfn/ ,/ 这/ 意味着/ i/ 的/ 所有/ PFNs/ 失效/ ,/ 则/ 修改/ i/ 的/ PFN/ _/ NEXT/ 图/ 9/ 基于/ 优先/ // 备份/ 转发/ 节点/ 策略/ 的/ 数据/ 转发/ 为/ “/ 假/ ”/ ,/ 并且/ 启动/ i/ 的/ BFNs/ 转发/ 数据/ ,/ 否则/ i/ 选择/ HLCmin/ (/ 当/ i/ 的/ 一个/ PFN/ 为/ Sink/ 时/ ,/ 这时/ HLCmin/ 为/ 0/ )/ 对应/ 的/ PFN/ 作为/ 数据/ 转发/ 节点/ (/ 通过/ DP/ 的/ RN/ _/ ID/ 实现/ )/ ./ 当/ BFNs/ 转发/ 数据/ 时/ ,/ 同样/ 地/ 选取/ 最小值/ HLCmin/ 对应/ 的/ BFN/ 来/ 转发/ 数据/ ,/ 当/ 所有/ 节点/ 的/ 查询/ 结果/ 数据/ 都/ 已/ 返回/ Sink/ 时/ ,/ 则/ 该/ 查询/ 成功/ 结束/ ,/ 或者/ 存在/ “/ 异常/ 孤立/ 节点/ ”/ (/ 可以/ 接收/ 到/ QM/ 的/ 孤立/ 节点/ )/ 时/ ,/ 该/ 查询/ 以/ 失败/ 而/ 结束/ ./ 4.3/ 改进/ 的/ 数据/ 转发/ 算法/ 从/ 算法/ 2/ 中/ 我们/ 不难看出/ ,/ 数据/ 转发/ 过程/ 中/ 建立/ 路由/ 消息/ (/ MAR/ )/ 和/ 路由/ 应答/ 消息/ (/ MRR/ )/ 比较/ 多/ ,/ 尽管/ 这些/ 消息/ 占用/ 字节数/ 较/ 小/ ,/ 但/ 仍会/ 消耗/ 比较/ 多/ 的/ 能量/ ./ 因此/ 我们/ 尝试/ 通过/ 减少/ MAR/ // MRR/ 数量/ 来/ 改进/ 算法/ 2/ ,/ 以/ 达到/ 节省/ 能量/ 的/ 目的/ ./ 由于/ 无线通信/ 具有/ 泛播/ (/ anycast/ )/ 特性/ [/ 8/ ]/ ,/ 当/ 一个/ 节点/ 发送/ DP/ 时/ ,/ 理论/ 上/ 在/ 其/ 通信/ 范围/ R/ 内/ 的/ 所有/ 邻/ 节点/ 都/ 可以/ 接收/ 到/ (/ 在/ 算法/ 2/ 中/ ,/ 我们/ 通过/ RN/ _/ ID/ 让/ 指定/ 的/ 节点/ 来/ 响应/ 接收/ DP/ )/ ./ 我们/ 知道/ 一个/ 节点/ V/ _/ PFN/ 和/ V/ _/ BFN/ 中/ 的/ HLC/ 主要/ 由/ 邻接/ 点/ 的/ 剩余/ 能量/ (/ PA/ )/ 变化/ 而/ 改变/ ,/ 而/ 一个/ 节点/ PA/ 的/ 变化/ 主要/ 是/ 由/ 接收/ 和/ 发送/ DP/ 引起/ 的/ ./ 若/ 在/ 一个/ 节点/ 发送/ DP/ 时/ ,/ 我们/ 把/ 它/ 的/ PA/ 放入/ DP/ (/ DP/ 结构/ 将/ 发生变化/ )/ ,/ 则/ 它/ 所有/ 的/ 邻/ 节点/ 都/ 可以/ 更新/ PFN/ 和/ BFN/ 向量/ 中/ 相应/ 的/ HLC/ 值/ ,/ 这样/ 每个/ 节点/ 只/ 需/ 在/ 第一次/ 转发/ 数据/ 时/ 发送/ 建立/ 路由/ 请求/ 消息/ ,/ 就/ 可以/ 得到/ 它/ 所有/ PFNs/ 和/ BFNs/ 的/ HLC/ ./ 之后/ 根据/ 本地/ V/ _/ PFN/ 和/ V/ _/ BFN/ 就/ 可/ 贪婪/ 地/ 转发/ 数据/ ,/ 不再/ 需要/ 重新/ 请求/ 建立/ 路由/ 的/ 消息/ ,/ 从而/ 减少/ 大量/ 的/ MAR/ 和/ MRR/ ./ 在/ 给出/ 改进/ 算法/ 之前/ ,/ 我们/ 需要/ 修改/ 数据包/ 的/ 结构/ ,/ 即/ 增加/ 发送/ 节点/ 的/ 剩余/ 能量/ (/ SN/ _/ PA/ )/ 到/ DP/ 结构/ 中/ ,/ 新/ 的/ 数据包/ (/ DP/ / )/ 结构/ 如图/ 10/ 所示/ ./ 改进/ 的/ 数据/ 转发/ 算法/ (/ IMprovedP/ // BDFalgo/ -/ rithm/ ,/ IM/ -/ P/ // BDF/ )/ 和/ 算法/ 2/ 的/ 区别/ 是/ :/ 节点/ 每次/ 发送数据/ 时/ 把/ 自己/ 的/ PA/ 加入/ DP/ / (/ 结构/ 如图/ 10/ 所示/ )/ 中/ ,/ 以/ 动态/ 更新/ 其/ 邻居/ 与/ 之/ 对应/ 的/ HLC/ 值/ ,/ 每个/ 节点/ 除了/ 第一次/ 通过/ 路由/ 消息/ 获得/ 它/ 的/ PFNs/ 和/ BFNs/ 的/ HLC/ 值外/ ,/ 之后/ 的/ 数据/ 转发/ 将/ 根据/ 本地/ V/ _/ PFN/ 或/ V/ _/ BFN/ 向量/ 中/ 的/ HLC/ 值/ 转发/ 数据/ ,/ 详见/ 算法/ 3/ ./ Page9/ 算法/ 3/ ./ 改进/ 的/ 数据/ 转发/ 算法/ (/ IM/ -/ P/ // BDF/ )/ ./ 输入/ :/ Sink/ 广播/ QM/ 输出/ :/ 查询/ 结果/ 1/ ./ do2/ ./ for/ 每个/ 有/ 数据/ 待/ 转发/ 的/ 节点/ i3/ ./ ifi/ 是/ 第一次/ 转发/ 数据/ then4/ ./ i/ 通过/ MAR/ // MRR/ 获得/ 其/ PFNs/ 或/ BFNs/ 的/ 5/ ./ else6/ ./ 据/ 算法/ 2/ 和/ 本地/ V/ _/ PFN/ 或/ V/ _/ BFN/ 转发/ 数据/ ;/ 7/ ./ endfor8/ ./ for/ 每个/ 接收/ 到/ DP/ / 的/ 节点/ j9/ ./ j/ 根据/ DP/ / 中/ 的/ PA/ 更新/ V/ _/ PFN/ 或/ V/ _/ BFN10/ ./ endfor11/ ./ while/ (/ 所有/ 的/ 查询/ 结果/ 数据/ 转发/ 到/ Sink/ )/ 5/ 实验/ 分析/ 我们/ 使用/ OMNET/ ++/ 仿真/ 平台/ 来/ 评估/ 我们/ 的/ P/ // BDF/ 和/ IM/ -/ P/ // BDF/ 算法/ 性能/ ./ 我们/ 在/ 100m/ ×/ 100m/ 区域/ 内/ 随机/ 均匀分布/ 了/ 20/ 、/ 30/ 、/ 50/ 、/ 70/ 、/ 80/ 和/ 100/ 个/ 传感/ 节点/ ,/ Sink/ 被/ 固定/ 在/ 区域/ 边缘/ ./ 为了/ 尽可能/ 地/ 覆盖/ 整个/ 网络/ ,/ 我们/ 随机/ 选取/ 了/ 离/ Sink/ 节点/ 最远/ 的/ 几个/ 节点/ 作为/ 源/ 节点/ ./ 为/ 简单/ 起/ 见/ ,/ 假设/ 节点/ 在/ 一个/ 查询/ 过程/ 中/ 保持/ 静止/ (/ 该/ 假设/ 不是/ 强制性/ 的/ ,/ 如果/ 传感器/ 节点/ 在/ 一个/ 查询/ 过程/ 中/ 移动/ 而/ 改变/ 网络拓扑/ 结构/ 的话/ ,/ 则/ 只/ 需/ 重发/ QM/ )/ ./ 其它/ 的/ 仿真/ 参数设置/ [/ 15/ ]/ 详见/ 表/ 3/ ,/ 由于/ R/ 小于/ dco/ ,/ 所以/ 本文/ 方案/ 的/ 通信/ 范围/ 为/ [/ dmin/ ,/ R/ ]/ ./ dco/ 信道/ 延迟/ (/ Channel/ ./ delay/ )/ 5.1/ 性能/ 对比/ 我们/ 评估/ 算法/ 2/ (/ P/ // BDF/ )/ 、/ 算法/ 3/ 以及/ 采用/ 转发/ 集合/ 的/ LOGF/ [/ 4/ ]/ 算法/ (/ 详细/ 阐述/ 见/ 引言/ 部分/ )/ 在/ 转发/ 跳数/ (/ 影响/ 实时性/ 的/ 主要/ 因素/ )/ 、/ 能耗/ 、/ 拥塞/ 延迟/ 三/ 方面/ 的/ 表现/ ./ 假设/ 一个/ 数据包/ 大小/ 为/ 40/ 字节/ ,/ 包括/ 30/ 字节/ 数据/ ,/ 10/ 字节/ 如/ “/ 包头/ ”/ 等/ 其它/ 信息/ ./ 当源/ 节点/ 有/ 600/ 字节/ 的/ 查询/ 结果/ 数据/ 待/ 转发/ 时/ (/ 不/ 考虑/ 网/ 内/ 聚集/ )/ ,/ 在/ P/ // BDF/ 算法/ 中/ 需要/ 20/ 个/ 数据包/ (/ DP/ )/ ,/ 而/ 在/ IM/ _/ P/ // BDF/ 算法/ 中/ ,/ 数据包/ 中/ 增加/ 的/ SN/ _/ PA/ 占用/ 两个/ 字节/ ,/ 所以/ 至少/ 需要/ 22/ 个/ DP/ / 才能/ 转发/ 完/ 600/ 个/ 字节/ 的/ 数据/ ./ 另外/ ,/ 设置/ MAR/ 的/ 大小/ 为/ 2/ 字节/ ,/ MPP/ 的/ 大小/ 为/ 4/ 字节/ (/ 其中/ HLC/ 占/ 2/ 字节/ )/ ./ 即使/ 没有/ 像/ LOGF/ 那样/ 苛刻/ 的/ 假设/ (/ 引言/ 部分/ 有/ 详细/ 阐述/ )/ ,/ 我们/ 的/ P/ // BDF/ 和/ IM/ -/ P/ // BDF/ 算法/ 仍/ 比/ LOGF/ 算法/ 的/ 转发/ 跳数/ 更少/ ,/ 如图/ 11/ 所示/ ,/ 这/ 是因为/ 基于/ PFNs/ 策略/ 的/ 每条/ 转发/ 路径/ 上/ 没有/ 相同/ 跳数/ 的/ 邻/ 节点/ ./ 由于/ IM/ -/ P/ // BDF/ 算法/ 中/ 的/ 数据包/ 数有/ 少量/ 增加/ ,/ 使得/ 其/ 转发/ 总跳数/ 比/ P/ // BDF/ 算法/ 稍/ 多/ ,/ 如图/ 11/ 所示/ ,/ 而且/ 当/ 单个/ 的/ 数据包/ 大小/ 越大/ ,/ IM/ -/ P/ // BDF/ 需要/ 的/ 总/ 跳/ 数越/ 接近/ P/ // BDF/ ./ 转发/ 一定/ 数量/ 的/ 数据包/ 到/ Sink/ 节点/ ,/ LOGF/ 耗能/ 最大/ ,/ P/ // BDF/ 的/ 能耗/ 比/ IM/ -/ P/ // BDF/ 大/ ,/ 如图/ 12/ 所示/ ./ LOGF/ 允许/ 跳数/ 相同/ 的/ 邻/ 节点/ 之间/ 转发/ 数据/ 使得/ 总/ 转发/ 跳数/ 增加/ ,/ 因而/ 消耗/ 更/ 多/ 能量/ ,/ 由于/ 在/ IM/ -/ P/ // BDF/ 中/ 减少/ 了/ 大量/ 的/ 路由/ 消息/ (/ MAR/ 和/ MRR/ )/ ,/ 因而/ 比/ P/ // BDF/ 更/ 节省/ 能量/ ./ 从/ 4.1/ 节中/ ,/ 我们/ 知道/ CD/ (/ i/ ,/ j/ )/ 可以/ 由/ 传感器/ 节点/ 内置/ 缓存/ 区/ 模块/ 以及/ 底层/ 协议/ 自动/ 管理/ 获得/ ,/ 因此/ 我们/ 用/ [/ 0/ ,/ 1/ ]/ 之间/ 的/ 随机数/ 模拟/ 每条/ 路径/ 的/ 即时/ 拥塞/ 程度/ 来/ 测试/ 转发/ 数据/ 时/ 的/ 拥塞/ 避免/ 性能/ ./ 采用/ HLC/ 模型/ (/ ω/ =/ 0.8/ )/ 的/ 数据/ 转发/ 算法/ P/ // BDF/ 和/ IM/ -/ P/ // BDF/ 可以/ 更好/ 地/ 避免/ 路径/ 拥塞/ ,/ 而/ 由于/ P/ // BDF/ 转发/ 的/ 总/ 数据包/ 比/ IM/ -/ P/ // BDF/ 更少/ ,/ 因此/ P/ // BDF/ 的/ 拥塞/ 避免/ 效果/ 最好/ ,/ 如图/ 13/ 所示/ ,/ 而且/ ω/ 取值/ 越小/ ,/ 采用/ HLC/ 模型/ 来/ 避免/ 拥塞/ 的/ 效果/ 越/ 好/ (/ 见/ 5.2/ (/ 3/ )/ )/ ./ Page105/ ./ 2OQDF/ (/ P/ // BDF/ )/ 的/ 性能/ 评价/ (/ 1/ )/ 能量/ 均衡/ 表现/ ./ 首先/ 我们/ 选取/ 靠近/ Sink/ 的/ 4/ 个/ 节点/ (/ 它们/ 的/ PFN/ 为/ Sink/ )/ 来/ 考察/ 它们/ 的/ 剩余/ 能量/ 变化/ (/ 以/ 50/ 个/ 节点/ 分布/ 为例/ )/ ,/ 如图/ 14/ ,/ 节点/ 7/ (/ WSN/ :/ sNode/ [/ 7/ ]/ )/ 的/ 初始/ 能量/ 最大/ ,/ 但/ 由于/ 它/ 到/ Sink/ 的/ 距离/ 以及/ 路径/ 拥塞/ 情况/ 使得/ HLC/ (/ 7/ ,/ Sink/ )/ 小于/ HLC/ (/ 50/ ,/ Sink/ )/ ,/ 所以/ 在/ 前/ 8/ 次/ 数据/ 转发/ 中/ ,/ 节点/ 50/ 成为/ 转发/ 节点/ ./ 之后/ 节点/ 7/ 和/ 50/ 根据/ 他们/ 的/ HLC/ 值/ (/ ω/ =/ 0.8/ )/ 轮流/ 转发/ 数据/ ,/ 直到/ 它们/ 对应/ 的/ 路径/ 代价/ 比/ 节点/ 38/ 或/ 42/ 小/ ,/ 这时/ 这/ 4/ 个/ 节点/ 都/ 参与/ 数据/ 转发/ ./ 如果/ 其它/ 节点/ 的/ 能量/ 足够/ 多/ ,/ 这/ 4/ 个/ 节点/ 的/ 能量/ 终将/ 均衡/ 地被/ 耗尽/ ,/ 如图/ 14/ ./ 我们/ 再/ 随机/ 选取/ 跳数/ 相同/ 的/ 两个/ 中间/ 节点/ ,/ 考察/ 他们/ 的/ 能量/ 变化/ 情况/ ,/ 如图/ 15/ ,/ 我们/ 可以/ 看出/ 节点/ 29/ 和/ 34/ (/ HOP/ 都/ 为/ 4/ )/ 的/ 能量消耗/ 比较/ 均衡/ ,/ 更/ 多/ 类似/ 的/ 实验/ (/ 由于/ 篇幅/ 限制/ ,/ 未/ 列出/ )/ 可以/ 验证/ 本文/ 算法/ 具有/ 较/ 好/ 的/ 能量/ 均衡/ 效果/ ./ (/ 2/ )/ 整体/ 性能/ 表现/ ./ 随着/ 时间推移/ ,/ 可能/ 会/ 有/ 更/ 多/ 的/ BFNs/ 参与/ 数据/ 转发/ ,/ 使得/ 网络/ 后期/ 数据/ 转发/ 跳数/ 、/ 能耗/ 等/ 剧增/ ,/ 从而/ 影响/ 网络/ 整体/ 性能/ ./ 但/ 实验/ 表明/ 在/ 整个/ 网络/ 生命/ 期内/ 只有/ 很少/ 的/ BFNs/ 参与/ 数据/ 转发/ ,/ 这/ 是因为/ 靠近/ Sink/ 的/ 邻/ 节点/ 的/ 能量/ 容易/ 耗尽/ ,/ 这/ 也/ 是/ 传感器/ 网络/ 中/ 一个/ 普遍/ 的/ 难题/ ./ 在/ 以/ 70/ 个/ 节点/ 分布/ 为例/ 的/ 实验/ 中/ ,/ 当/ 第/ 47/ 个/ 数据包/ 到达/ 节点/ 67/ 时/ (/ 74.1/ ×/ 100ms/ )/ ,/ 节点/ 67/ 所有/ 的/ PFNs/ 失效/ ,/ 这时/ 它/ 的/ BFNs/ 开始/ 转发/ 数据/ ,/ 同时/ 67/ 的/ PFN/ _/ NEXT/ 变为/ FALSE/ ,/ 以/ 保证/ 它/ 将/ 不会/ 成为/ 其它/ 节点/ 的/ PFN/ ./ 同样/ 地/ ,/ 在/ 148.8/ ×/ 100ms/ 时/ ,/ 节点/ 17/ 和/ 18/ 的/ PFN/ _/ NEXT/ 同时/ 被/ 置/ 为/ FALSE/ ,/ 并/ 分别/ 启动/ 各自/ 的/ BFNs/ 工作/ ,/ 其它/ 节点/ 按照/ 算法/ 2/ 转发/ 数据/ ,/ 直到/ 网络/ 生命周期/ 结束/ 为止/ (/ 此时/ ,/ Sink/ 节点/ 总共/ 收到/ 109/ 个/ 数据包/ ,/ 如图/ 18/ )/ ,/ 网络/ 的/ 转发/ 跳数/ 和/ 能耗/ 的/ 整体/ 性能/ 表现/ 试验/ 结果/ 分别/ 如图/ 16/ 和/ 图/ 17/ 所示/ ,/ 网络/ 生命/ 期内/ ,/ 只有/ 少数几个/ BFNs/ 参与/ 了/ 数据/ 转发/ ./ Page11/ (/ 3/ )/ 参数/ ω/ 对/ 能量/ 均衡/ 和/ 拥塞/ 避免/ 的/ 影响/ ./ 在/ Sink/ 节点/ 收到/ 一定/ 数量/ 的/ 数据包/ (/ 本/ 实验/ 为/ 50/ 个/ DPs/ )/ 时/ ,/ 分别/ 选取/ 不同/ 的/ ω/ 值/ ,/ 考察/ 网络/ 的/ 能量/ 均衡/ 和/ 拥塞/ 避免/ 表现/ ./ 如果/ ω/ 值较/ 小/ ,/ 则/ 能量/ 均衡/ 性能/ 较差/ ,/ 如图/ 19/ ,/ 随机/ 考察/ 中间/ 节点/ 29/ 和/ 34/ ,/ 它们/ 的/ 剩余/ 能量/ 并/ 不/ 均衡/ ,/ 但/ 此时/ 拥塞/ 避免/ 效果/ 更好/ ,/ 如图/ 21/ ,/ 在/ 不同/ 的/ 网络/ 中/ ,/ ω/ =/ 0.2/ 的/ 拥塞/ 总/ 延时/ 都/ 比/ ω/ =/ 0.8/ 时/ 更/ 小/ ./ 反之/ ω/ 取值/ 较大/ ,/ 能量/ 均衡/ 性能/ 就/ 会/ 较/ 好/ (/ 如图/ 20/ )/ ,/ 但/ 拥塞/ 避免/ 效果/ 会/ 更/ 差/ (/ 如图/ 21/ )/ ,/ 这/ 说明/ 根据/ 具体/ 的/ 应用/ 要求/ ,/ 通过/ 调整/ HLC/ 模型/ 参数/ ,/ 可以/ 满足/ 能量/ 均衡/ 或/ 拥塞/ 避免/ 的/ 不同/ 需求/ ./ 6/ 结论/ 本文/ 为/ 实时/ 响应/ 物/ 联网/ 提出/ 一种/ 新/ 的/ 基于/ 查询/ 的/ 数据/ 转发/ 方案/ (/ PFNs/ // BFNs/ 方案/ )/ 和/ 算法/ (/ P/ // BDF/ 及其/ 改进/ 算法/ )/ ./ PFNs/ 方案/ 利用/ 广播/ 的/ QM/ (/ 不/ 增加/ 额外/ 开销/ 的/ 情况/ 下/ )/ 为/ 每个/ 节点/ 建立/ 最/ 快速/ 的/ 查询/ 结果/ 返回/ 路径/ ,/ 很/ 好地解决/ 了/ 转发/ 断路/ 额外/ 开销/ 和/ 孤立/ 节点/ 处理/ 耗时/ 等/ 问题/ ;/ BFNs/ 方案/ 可以/ 最大/ 程度/ 地/ 延长/ 网络/ 生命周期/ ./ 另外/ 我们/ 还/ 尝试/ 在/ PFNs/ 方案/ 中/ 设定/ 通信/ 范围/ 以/ 节省/ 能量/ 和/ 减少/ 干扰/ ,/ 并/ 给出/ 了/ 综合/ 路径/ 代价/ (/ HLC/ )/ 模型/ 以/ 实现/ 数据/ 转发/ 时/ 节点/ 能量/ 均衡/ 和/ 拥塞/ 避免/ ./ 基于/ PFNs/ // BFNs/ 方案/ 和/ HLC/ 模型/ ,/ 我们/ 分别/ 给出/ 了/ 贪婪/ 的/ 分布式/ 数据/ 转发/ 算法/ (/ P/ // BDF/ )/ 及其/ 改进/ 算法/ (/ IM/ -/ P/ // BDF/ )/ ,/ 最后/ 我们/ 通过/ 大量/ 的/ 仿真/ 实验/ 验证/ 了/ 本/ 方案/ 和/ 算法/ 可以/ 实现/ 非常/ 快速/ 的/ 数据/ 转发/ ,/ 同时/ 具有/ 良好/ 的/ 能量/ 有效性/ 和/ 传输/ 可靠性/ ./ 在/ 整个/ 网络/ 生命/ 期内/ ,/ BFNs/ 很少/ 参与/ 数据/ 转发/ ,/ 一般/ 情况/ 下/ PFNs/ 可以/ 完成/ 数据/ 转发/ 任务/ ,/ 这/ 是因为/ 影响/ 网络/ 生命期/ 的/ 主要/ 原因/ 是/ 靠近/ Sink/ 的/ 传感器/ 节点/ 的/ 能量/ 最/ 容易/ 耗尽/ ,/ 而/ 这种/ Sink/ 周围/ 的/ 能量/ 空洞/ (/ 这时/ Sink/ 成为/ 孤立/ 节点/ )/ 问题/ 是/ 传感器/ 网络/ 中/ 的/ 一个/ 普遍存在/ 的/ 难题/ ./ 虽然/ 本文/ 的/ 改进/ 算法/ (/ IM/ -/ P/ // BDF/ )/ 可以/ 节省/ 能量/ ,/ 但会/ 增加/ 少量/ 的/ 数据包/ ,/ 从而/ 会/ 一定/ 程度/ 地/ 影响/ 到/ 查询/ 实时/ 响应/ 效果/ ./ 所以/ 未来/ 工作/ 的/ 一个/ 方向/ 是/ ,/ 设计/ 更好/ 的/ 路径/ 代价/ 更新/ 方法/ 来/ 减少/ 路由/ 消息/ ,/ 以/ 实现/ 在/ 不/ 增加/ 查询/ 响应/ 时间/ 开销/ (/ 与/ P/ // BDF/ 比/ )/ 的/ 情况/ 下/ 节省/ 能量/ ,/ 另外/ ,/ 还/ 可以/ 将/ 本文/ 提出/ 的/ 方案/ 应用/ 到/ 三维空间/ 下/ 的/ 实时/ 响应/ 物/ 联网/ 中/ ./ 

