Page1/ 一种/ 缩短/ 下载/ 时间/ 优先/ 的/ 自/ 适应/ BitTorrent/ 激励/ 协议/ 李/ 治军/ 姜守旭/ (/ 哈尔滨工业大学/ 计算机/ 科学技术/ 学院/ 哈尔滨/ 150001/ )/ 摘要/ BitTorrent/ 激励机制/ 的/ 目标/ 是/ 保证/ 节点/ 上传/ 和/ 下载/ 之间/ 的/ 公平性/ ,/ 但/ 相比/ 公平性/ 而言/ ,/ 实际/ 应用/ 中/ 的/ 节点/ 更/ 优先/ 考虑/ 的/ 是/ 文件/ 下载/ 时间/ ,/ 据此/ 文中/ 提出/ 了/ 一种/ 缩短/ 文件/ 下载/ 时间/ 优先/ 的/ 自/ 适应/ BitTorrent/ 激励/ 协议/ AIPS/ ./ 文中/ 首先/ 基于/ Markov/ 模型/ 对/ BitTorrent/ 现有/ 激励机制/ 的/ 效果/ 给出/ 了/ 定量分析/ ,/ 分析/ 了/ 激励机制/ 下/ 的/ 文件传输/ 结构/ ,/ 并用/ 概率分析/ 方法/ 给出/ 了/ 该/ 传输/ 结构/ 下/ 最小化/ 文件/ 下载/ 时间/ 的/ 条件/ ./ 应用/ 分析/ 结果/ 文中/ 定义/ 了/ 一个/ 以/ 缩短/ 文件/ 下载/ 时间/ 为/ 效用/ 的/ 博弈/ ,/ 在/ 该/ 博弈/ 达到/ Nash/ 平衡/ 时/ 各/ 节点/ 采用/ 的/ 策略/ 就是/ 激励/ 协议/ AIPS/ ./ 模拟实验/ 表明/ 文中/ 提出/ 的/ AIPS/ 较/ 现有/ 的/ BitTorrent/ 激励/ 协议/ 能/ 明显提高/ 文件共享/ 系统/ 性能/ ,/ 提高/ 文件/ 下载/ 效率/ ./ 关键词/ BitTorrent/ ;/ 激励机制/ ;/ 自/ 适应/ 激励/ ;/ Nash/ 平衡/ 1/ 引言/ eMule/ ②/ 中/ ,/ 下载/ 到/ 部分/ 文件/ 的/ 节点/ 就/ 能/ 给/ 其它/ 节点/ 上传/ ,/ 正是/ 由于/ 每个/ 节点/ 都/ 能/ 提供/ 上传/ 服务/ ,/ 所以/ 系统/ 总/ 的/ 服务/ 能力/ 会/ 随着/ 下载/ 节点/ 个数/ 的/ 增加/ 而/ 增加/ ,/ 使/ 系统/ 具有/ 良好/ 的/ 可扩展性/ [/ 1/ ]/ ./ 这/ 也/ 是/ P2P/ 在/ 现有/ 的/ P2P/ 文件共享/ 系统/ ,/ 如/ BitTorrent/ ①/ 、/ Page2/ 网络/ 和/ P2P/ 文件共享/ 系统/ 得到/ 广泛应用/ 的/ 根本原因/ ,/ 德国/ 互联网/ 调研/ 机构/ ipoque/ 的/ 统计/ 结果表明/ ,/ 2007/ 年/ 互联网/ 总流量/ 中/ 的/ 50/ %/ ~/ 90/ %/ 都/ 来自/ P2P/ 程序/ ,/ 而/ 在/ 这些/ P2P/ 程序/ 里/ ,/ BitTorrent/ 占据/ 了/ P2P/ 流量/ 中/ 的/ 50/ %/ ~/ 70/ %/ ,/ 在/ 2008/ 年/ 的/ 统计/ 结果/ 中/ ,/ BitTorrent/ 仍然/ 占据/ P2P/ 流量/ 的/ 第一位/ ①/ ./ 激励机制/ 对/ 提高/ BitTorrent/ 的/ 性能/ 具有/ 非常/ 重要/ 的/ 作用/ ,/ 如果/ 没有/ 激励机制/ ,/ BitTorrent/ 中/ 的/ 许多/ 节点/ 就/ 会/ 变成/ 只/ 下载/ 文件/ 而/ 拒绝/ 上传/ 的/ freeriders/ (/ 搭便车/ 节点/ )/ ,/ 系统/ 不再/ 是/ 一个/ P2P/ 系统/ ,/ 而/ 退化/ 为/ 传统/ 的/ C/ // S/ 系统/ ,/ 系统/ 的/ 总/ 服务/ 能力/ 会/ 显著/ 降低/ [/ 2/ ]/ ./ 目前/ BitTorrent/ 采用/ 的/ 激励机制/ 包括/ tit/ -/ for/ -/ tat/ (/ 以下/ 简称/ TFT/ )/ 和/ optimisticunchoking/ (/ 以下/ 简称/ OU/ )/ 两个/ 策略/ ./ 在/ 节点/ 选择/ 给/ 哪些/ 节点/ 进行/ 上传/ 时/ ,/ TFT/ 策略/ 选择/ 提供/ 最大/ 下载/ 带宽/ 的/ nut/ (/ 默认/ nut/ =/ 4/ )/ 个/ 节点/ 上传/ ,/ OU/ 策略/ 随机/ 选取/ nuo/ (/ 默认/ nuo/ =/ 1/ )/ 个/ 节点/ 上传/ ./ TFT/ 策略/ 可以/ 保证/ 提供/ 上传/ 带宽/ 的/ 节点/ 才能/ 交换/ 到/ 下载/ 带宽/ ,/ 有效/ 地/ 抑制/ 了/ 搭便车/ 行为/ ,/ 而/ OU/ 策略/ 的/ 目的/ 是/ 试探/ 那些/ 未/ 连接/ 过/ 的/ 节点/ ,/ 找到/ 更/ 适合/ 的/ 带宽/ 交换/ 节点/ [/ 2/ ]/ ./ 不难看出/ ,/ TFT/ 激励机制/ 会/ 导致/ 节点/ 贡献/ 的/ 上传/ 带宽/ 接近/ 于/ 其/ 获得/ 的/ 下载/ 带宽/ ,/ 实现/ 了/ 公平性/ ,/ 但/ 相比/ 这个/ 公平性/ 而言/ ,/ 实际/ 系统/ 中/ 的/ 节点/ 更/ 关心/ 文件/ 下载/ 时间/ :/ 如果/ 能/ 缩短/ 文件/ 下载/ 时间/ ,/ 节点/ 愿意/ 贡献/ 比其/ 下载/ 带宽/ 更/ 多/ 的/ 上传/ 带宽/ ./ 而/ 现在/ 的/ BitTorrent/ 激励机制/ 只是/ 根据/ 带宽/ 这/ 一个/ 因素/ 来/ 制定/ 激励/ 策略/ ,/ 无法/ 实现/ 面向/ 缩小/ 文件/ 下载/ 时间/ 的/ 激励机制/ ,/ 据此/ 本文/ 针对/ BitTorrent/ 设计/ 了/ 一种/ 以/ 最小化/ 文件/ 下载/ 时间/ 为/ 目标/ 的/ 自/ 适应/ 激励/ 协议/ AIPS/ (/ self/ -/ AdaptiveIncentiveProtocolsforfileSwarming/ )/ ./ AIPS/ 的/ 核心/ 是/ 将/ 文件/ 下载/ 时间/ 作为/ 效用函数/ ,/ 将/ 节点/ 带宽/ 分配/ 作为/ 策略/ 进行/ 相互/ 博弈/ (/ 传统/ 的/ BitTorrent/ 激励/ 是/ 一种/ 以/ 公平性/ 为/ 效用/ ,/ 带宽/ 分配/ 为/ 策略/ 的/ 博弈/ [/ 3/ ]/ )/ ,/ 而/ 在/ 这个/ 博弈/ 达到/ Nash/ 均衡/ 时/ 各/ 节点/ 采用/ 带宽/ 分配/ 策略/ 就是/ 本文/ 给出/ 的/ 以/ 最小化/ 文件/ 下载/ 时间/ 为/ 目标/ 的/ 自/ 适应/ 激励/ 协议/ AIPS/ ./ 本文/ 的/ 主要/ 贡献/ 如下/ :/ (/ 1/ )/ 本文/ 用/ 马尔可夫/ 过程/ 分析/ 了/ TFT/ 作用/ 下/ 进行/ 文件/ 块/ 相互/ 传输/ 的/ 节点/ 集合/ 具有/ 的/ 数量/ 特征/ ,/ 用/ fluid/ 模型/ 分析/ 了/ 激励机制/ 作用/ 下/ 的/ 文件共享/ 结构/ ,/ 揭示/ 了/ 文件共享/ 结构/ 对/ 文件/ 交换/ 效率/ 的/ 影响/ ,/ 为/ BitTorrent/ 激励机制/ 的/ 分析/ 和/ 改进/ 奠定/ 了/ 量化/ 基础/ ./ (/ 2/ )/ 本文/ 提出/ 了/ 以/ 最小化/ 文件/ 下载/ 时间/ 为/ 效用函数/ 的/ 节点/ 博弈/ 模型/ ,/ 分析/ 了/ 该/ 博弈/ 的/ Nash/ 平衡点/ ,/ 给出/ 了/ 达到/ Nash/ 平衡/ 时/ 各类/ 节点/ 采取/ 的/ 激励/ 策略/ ,/ 完成/ 了/ BitTorrent/ 激励机制/ 的/ 改进/ ./ (/ 3/ )/ 本文/ 设计/ 了/ 一种/ 易于/ 实现/ 的/ 自/ 适应/ 激励/ 协议/ AIPS/ ,/ 并用/ 模拟实验/ 验证/ 了/ AIPS/ 对/ 文件/ 下载/ 性能/ 的/ 影响/ ,/ 平均/ 能/ 提高/ 文件/ 下载/ 效率/ 20/ %/ 左右/ ./ 本文/ 第/ 2/ 节/ 介绍/ 相关/ 工作/ ;/ 第/ 3/ 节对/ 现有/ BitTorrent/ 激励机制/ 进行/ 理论/ 建模/ 和/ 定量分析/ ;/ 第/ 4/ 节对/ 激励/ 下/ 的/ BitTorrent/ 文件传输/ 结构/ 进行/ 建模/ 分析/ ,/ 据此/ 定义/ 了/ 以/ 最小化/ 文件/ 下载/ 时间/ 为/ 效用/ 的/ 博弈/ 模型/ 并/ 得出/ 其/ Nash/ 平衡/ ,/ 最后/ 设计/ 了/ 一个/ 可/ 直接/ 用于/ BitTorrent/ 的/ 自/ 适应/ 激励/ 协议/ AIPS/ ;/ 第/ 5/ 节是/ 对/ AIPS/ 的/ 模拟实验/ 结果/ ;/ 第/ 6/ 节是/ 本文/ 的/ 结论/ ./ 2/ 相关/ 工作/ 针对/ 文件传输/ 和/ 激励机制/ 进行/ 分析/ 是/ P2P/ 网络/ 和/ P2P/ 文件共享/ 的/ 一项/ 重要/ 研究/ ,/ Qiu/ 等/ 人/ [/ 3/ ]/ 用/ fluid/ 模型/ 对/ BitTorrent/ 的/ 文件传输/ 性能/ 进行/ 了/ 详细/ 的/ 理论/ 分析/ ,/ 针对/ 激励机制/ ,/ 文献/ [/ 3/ ]/ 得出/ 的/ 结论/ 是/ 节点/ 在/ 带宽/ 分配/ 博弈/ 中/ 存在/ Nash/ 平衡点/ :/ 具有/ 相同/ 上传/ 带宽/ 的/ 节点/ 会/ 形成/ 一个组/ 相互/ 传输/ ,/ 但/ 文献/ [/ 3/ ]/ 并/ 没有/ 定量分析/ 激励机制/ 对/ 文件传输/ 性能/ 的/ 具体/ 影响/ ./ 其它/ 针对/ BitTorrent/ 的/ 研究/ 也/ 都/ 没有/ 给出/ 激励机制/ 对/ 文件共享/ 性能/ 影响/ 的/ 定量分析/ 结果/ ,/ 如/ Clevenot/ 等/ 人/ [/ 4/ ]/ 使用/ fluid/ 模型/ 对/ P2PWeb/ 缓存/ 系统/ 的/ 性能/ 进行/ 了/ 理论/ 分析/ ,/ Clevenot/ 等/ 人/ [/ 5/ ]/ 使用/ 多阶/ fluid/ 模型/ 对/ 异构/ P2P/ 文件共享/ 系统/ 进行/ 建模/ 分析/ ,/ 但/ 给出/ 的/ 分析/ 结果/ 都/ 没有/ 考虑/ 激励机制/ ./ Liao/ 等/ 人/ [/ 6/ ]/ 给出/ 了/ 激励机制/ 下/ BitTorrent/ 系统/ 的/ 分析/ ,/ 但/ 该文/ 得到/ 的/ 结果/ 不够/ 精确/ ,/ 如/ 该文/ 仍然/ 没有/ 量化/ 地/ 描述/ 系统/ 平稳/ 时/ 的/ 状态/ ,/ 另外/ 在/ 文献/ [/ 6/ ]/ 的/ 分析/ 中/ 假设/ 高/ 、/ 低/ 带宽/ 节点/ 之间/ 的/ 比例/ 为定值/ ,/ 由于/ 不同/ 带宽/ 节点/ 在/ 系统/ 中/ 的/ 停留时间/ 不/ 一样/ ,/ 所以/ 这个/ 比例/ 应该/ 不断/ 变化/ ,/ 导致/ 文献/ [/ 6/ ]/ 仍然/ 没有/ 精确/ 描述/ P2P/ 文件共享/ 的/ 结构/ ./ Legout/ 等/ 人/ [/ 7/ ]/ 就/ 激励机制/ 对/ BitTorrent/ 的/ 影响/ 给出/ 详细/ 的/ 实验/ 分析/ ,/ 由于/ 只有/ 实验/ 结果/ ,/ 无法/ 实现/ 对/ BitTorrent/ 激励机制/ 的/ 深入/ 改进/ ./ 本文/ 定量/ 地/ 分析/ 了/ 激励机制/ 对/ P2P/ 文件/ ①/ Ipoque/ ./ http/ :/ // // www/ ./ ipoque/ ./ com/ // resources/ // internet/ -/ studies/ // internet/ -/ study/ -/ 2007/ ,/ 2009Page3/ 共享/ 结构/ 及其/ 性能/ 的/ 具体/ 影响/ ,/ 并/ 以此/ 为/ 基础/ 给出/ 以/ 提高/ 文件共享/ 性能/ 为/ 目标/ 的/ BitTorrent/ 激励机制/ ./ 通过/ 改进/ 激励机制/ 来/ 提高/ BitTorrent/ 性能/ 也/ 是/ 一类/ 重要/ 研究/ ,/ Zhao/ 等/ 人/ [/ 8/ ]/ 给出/ 了/ 一个/ 一般性/ 的/ 框架/ 来/ 分析/ 具有/ 自/ 适应能力/ 的/ 激励/ 协议/ ,/ 但/ 文献/ [/ 8/ ]/ 的/ 分析/ 针对/ 了/ 系统/ 鲁棒性/ ,/ 而/ 本文/ 的/ 目标/ 是/ 提高/ 文件共享/ 性能/ ./ Huang/ 等/ 人/ [/ 9/ ]/ 给出/ 了/ 一种/ 称为/ 动态/ 配额/ 分配/ 的/ 上传/ 节点/ 选择/ 策略/ ,/ 其/ 基本/ 思想/ 是/ 动态/ 调整/ 节点/ 上传/ 带宽/ 分配/ 中/ TFT/ 和/ OU/ 所/ 占/ 的/ 配额/ (/ BitTorrent/ 中/ 这个/ 配额/ 固定/ 为/ 41/ )/ ,/ 用来/ 解决/ 该文/ 中/ 提出/ 的/ 供应/ 和/ 需求/ 之间/ 的/ paradox/ 问题/ ./ 虽然/ 本文/ 对/ 激励机制/ 的/ 改进/ 采用/ 了/ 相似/ 的/ 思想/ ,/ 但/ 本文/ 的/ 研究/ 以/ 严格/ 的/ 理论/ 分析/ 为/ 基础/ ,/ 并/ 以/ 文件共享/ 性能/ 优化/ 为/ 目标/ ,/ 而/ 不是/ 解决/ 供求/ paradox/ 问题/ ./ Fan/ 等/ 人/ [/ 10/ ]/ 也/ 给出/ 通过/ 控制/ TFT/ 和/ OU/ 之间/ 的/ 配额/ 来/ 实现/ 文件/ 平均/ 下载/ 时间/ 和/ 系统/ 公平性/ 之间/ 的/ 折中/ ,/ 但/ 该/ 研究/ 假设/ 文件/ 下载/ 时间/ 和/ 系统/ 公平性/ 之间/ 相互/ 独立/ ,/ 而/ 实际/ 系统/ 中差/ 的/ 公平性/ 会/ 导致/ 大量/ 搭便车/ 节点/ ,/ 降低/ 共享/ 效率/ (/ 文献/ [/ 10/ ]/ 没有/ 考虑/ 这种/ 情况/ )/ ,/ 所以/ 合适/ 的/ 激励/ 协议/ 应该/ 以/ 保证/ 公平/ 为/ 基础/ ,/ 同时/ 能/ 将/ 单纯/ 的/ 公平性/ 扩展/ 为/ 对系统/ 性能/ 的/ 提高/ ,/ 这/ 正是/ 本文/ 的/ 主要/ 工作/ ./ 3/ 激励机制/ 下/ 的/ BitTorrent/ 文件传输/ 模型/ 3.1/ BitTorrent/ 激励/ 定义/ 1/ ./ 集合/ D/ (/ p/ ,/ t/ )/ 为/ t/ 时刻/ 向/ 节点/ p/ 提供/ 下载/ 的/ 节点/ 集合/ ;/ 集合/ U/ (/ p/ ,/ t/ )/ 为/ t/ 时刻/ 从/ 节点/ p/ 处/ 下载/ 数据/ (/ 即/ 节点/ p/ 提供/ 上传/ )/ 的/ 节点/ 集合/ ./ 节点/ p/ 从/ D/ (/ p/ ,/ t/ )/ 中/ 的/ 节点/ 下载/ 数据/ ,/ 给/ U/ (/ p/ ,/ t/ )/ 中/ 的/ 节点/ 上传/ 数据/ ,/ 如图/ 1/ 所示/ ./ 由于/ D/ (/ p/ ,/ t/ )/ 决定/ 了/ 节点/ p/ 收到/ 的/ 下载/ 速率/ ,/ 所以/ D/ (/ p/ ,/ t/ )/ 直接/ 决定/ p/ 的/ 文件/ 下载/ 时间/ ,/ 这/ 就/ 需要/ 分析/ D/ (/ p/ ,/ t/ )/ 的/ 变化/ ./ 根据/ BitTorrent/ 的/ 激励/ 策略/ TFT/ 和/ OU/ ,/ p/ 从/ D/ (/ p/ ,/ t/ )/ 中/ 选择/ nut/ 个/ 提供/ 下载/ 带宽/ 最大/ 的/ 节点/ 、/ 随机/ 选择/ nuo/ 个/ 节点/ 形成/ U/ (/ p/ ,/ t/ +/ 1/ )/ (/ 记/ |/ U/ (/ p/ ,/ t/ )/ |/ =/ m/ ,/ BitTorrent/ 中/ nut/ =/ 4/ ,/ nuo/ =/ 1/ ,/ m/ =/ 5/ )/ ./ 而/ U/ (/ p/ ,/ t/ +/ 1/ )/ 中/ 的/ 节点/ 在/ 时刻/ t/ +/ 1/ 会/ 根据/ 同样/ 的/ 策略/ 调整/ 时刻/ t/ +/ 2/ 给/ 节点/ p/ 的/ 上传/ 带宽/ ,/ 也/ 就是/ 会/ 影响/ D/ (/ p/ ,/ t/ +/ 2/ )/ ,/ 所以/ 就/ 有/ D/ (/ p/ ,/ t/ )/ 影响/ U/ (/ p/ ,/ t/ +/ 1/ )/ ,/ 而/ U/ (/ p/ ,/ t/ +/ 1/ )/ 又/ 影响/ D/ (/ p/ ,/ t/ +/ 2/ )/ ,/ 等等/ ,/ 该/ 依赖/ 关系/ 表示/ 为/ 图/ 2/ ./ 图/ 1/ 节点/ p/ 的/ 下载/ 节点/ 集合/ D/ (/ p/ ,/ t/ )/ 和/ 上传/ 节点/ 集合/ U/ (/ p/ ,/ t/ )/ 类似/ 于/ 很多/ 相关/ 研究/ [/ 6/ -/ 10/ ]/ ,/ 本文/ 根据/ 上传/ 带宽/ 将/ 节点/ 分为/ 两类/ :/ 高/ 上传/ 带宽/ 节点/ 集/ Ph/ 和/ 低/ 上传/ 带宽/ 节点/ 集/ Pl/ ,/ 对应/ 上传/ 带宽/ uh/ 和/ ul/ ,/ 本文/ 记/ Nh/ =/ |/ Ph/ |/ ,/ Nl/ =/ |/ Pl/ |/ ,/ N/ =/ Nh/ +/ Nl/ ./ 由于/ 激励/ 策略/ 表现/ 为/ nut/ 和/ nuo/ 之间/ 的/ 比值/ [/ 8/ -/ 10/ ]/ ,/ 所以/ 为了/ 建模/ 分析/ 的/ 方便/ ,/ 本文/ 假定/ nuo/ 等于/ 1/ ,/ nut/ =/ m/ -/ 1/ ,/ 由于/ 此时/ m/ / 2/ ,/ 所以/ 该/ 假设会/ 导致/ nut/ :/ nuo/ / 1/ ,/ 表示/ 激励/ 占据/ 更大/ 的/ 比重/ ,/ 这/ 对于/ 无/ 中心/ 控制/ 的/ 开放/ P2P/ 系统/ 而言/ 是/ 合理/ 的/ ./ 此时/ 节点/ 在/ 执行/ OU/ 时/ ,/ 找到/ nuo/ =/ 1/ 个/ 高/ (/ 低/ )/ 上传/ 带宽/ 节点/ 的/ 概率/ 为/ α/ =/ Nh/ // N/ (/ 1/ -/ α/ =/ Nl/ // N/ )/ ./ 3.2/ 高带宽/ 节点/ 的/ 上传/ 节点/ 集/ 定义/ 2/ ./ 定义/ Up/ (/ nh/ ,/ nl/ ,/ t/ )/ 为/ 节点/ p/ 在/ t/ 时刻/ 的/ 上传/ 状态/ ,/ 其中/ nh/ 和/ nl/ 分别/ 表示/ U/ (/ h/ ,/ t/ )/ 中/ 高/ 上传/ 带宽/ 节点/ 个数/ 和/ 低/ 上传/ 带宽/ 节点/ 个数/ ./ 由/ BitTorrent/ 激励/ 策略/ 可知/ ,/ 节点/ p/ 选择/ 哪些/ 节点/ 上传/ 文件/ 只/ 与/ p/ 前/ 一/ 时刻/ 的/ 下载/ 节点/ 集/ D/ (/ p/ ,/ t/ )/ 有关/ ,/ 因此/ 以/ 状态/ 集合/ Up/ (/ nh/ ,/ nl/ |/ nh/ +/ nl/ =/ m/ )/ (/ 即/ {/ Up/ (/ 0/ ,/ m/ )/ ,/ Up/ (/ 1/ ,/ m/ -/ 1/ )/ ,/ …/ ,/ Up/ (/ m/ ,/ 0/ )/ }/ )/ 形成/ 马尔可夫/ 链/ ,/ 本文/ 将/ 该/ 链/ 记为/ {/ Up/ (/ t/ )/ :/ t/ =/ 0/ ,/ 1/ ,/ 2/ ,/ …/ }/ ,/ 其/ 概率/ 转移/ 矩阵/ 记/ 为/ 犘/ u/ (/ p/ )/ ./ 定理/ 1/ ./ 对于/ 高带宽/ 节点/ h/ ,/ 其/ 概率/ 转移/ 矩阵/ 犘/ u/ (/ h/ )/ 为/ (/ 0/ ,/ m/ )/ (/ 1/ ,/ m/ -/ 1/ )/ …/ (/ m/ -/ 1/ ,/ 1/ )/ (/ m/ ,/ 0/ )/ (/ 0/ ,/ m/ )/ (/ 1/ ,/ m/ -/ 1/ )/ (/ 2/ ,/ m/ -/ 2/ )/ (/ m/ -/ 1/ ,/ 1/ )/ (/ m/ ,/ 0/ )/ …/ 证明/ ./ 以/ 犘/ u/ (/ h/ )/ [/ (/ 2/ ,/ m/ -/ 2/ )/ ,/ (/ 2/ ,/ m/ -/ 2/ )/ ]/ 为例/ ,/ 即当/ t/ 时刻/ 节点/ h/ 的/ 上传/ 节点/ 集/ U/ (/ h/ ,/ t/ )/ 中/ 高/ 、/ 低/ 上传/ 带宽/ 节点/ 的/ 个数/ 分别/ 为/ 2/ 与/ m/ -/ 2/ 时/ ,/ U/ (/ h/ ,/ t/ +/ 2/ )/ Page4/ 中高/ 、/ 低/ 上传/ 带宽/ 节点/ 个数/ 仍为/ 2/ 与/ m/ -/ 2/ 的/ 概率/ ./ 事件/ “/ U/ (/ h/ ,/ t/ +/ 2/ )/ 中/ 高/ 、/ 低/ 上传/ 带宽/ 节点/ 个数/ 分别/ 为/ 2/ 与/ m/ -/ 2/ ”/ 按全/ 概率/ 公式/ 可/ 分为/ 两种/ 情况/ :/ (/ 1/ )/ 节点/ h/ 从/ D/ (/ h/ ,/ t/ +/ 1/ )/ 中/ 根据/ TFT/ 协议/ 选择/ 2/ 个/ 高/ 上传/ 带宽/ 节点/ 和/ m/ -/ 3/ 个/ 低/ 上传/ 带宽/ 节点/ (/ 该/ 事件/ 用/ T2/ 表示/ )/ ,/ 再用/ OU/ 协议/ 随机/ 选择/ 到/ 1/ 个/ 低/ 上传/ 带宽/ 节点/ (/ 该/ 事件/ 用/ O0/ 表示/ )/ ;/ (/ 2/ )/ 节点/ h/ 从/ D/ (/ h/ ,/ t/ +/ 1/ )/ 中/ 根据/ TFT/ 协议/ 选择/ 1/ 个/ 高/ 上传/ 带宽/ 节点/ 和/ m/ -/ 2/ 个/ 低/ 上传/ 带宽/ 节点/ (/ 该/ 事件/ 用/ T1/ 表示/ )/ ,/ 再用/ OU/ 协议/ 随机/ 选择/ 1/ 个/ 高/ 上传/ 带宽/ 节点/ (/ 该/ 事件/ 用/ O1/ 表示/ )/ ./ 由于/ TFT/ 和/ OU/ 进行/ 独立/ 选择/ ,/ 所以/ 犘/ u/ (/ h/ )/ [/ (/ 2/ ,/ m/ -/ 2/ )/ ,/ (/ 2/ ,/ m/ -/ 2/ )/ ]/ =/ 因为/ U/ (/ h/ ,/ t/ )/ 中/ 高/ 、/ 低/ 上传/ 带宽/ 节点/ 个数/ 分别/ 为/ 2/ 与/ m/ -/ 2/ ,/ 根据/ TFT/ 协议/ U/ (/ h/ ,/ t/ )/ 中/ 的/ 节点/ 都/ 会/ 选择/ 向/ 高带宽/ 节点/ (/ 节点/ h/ 是/ 高带宽/ 节点/ )/ 上传/ ,/ U/ (/ h/ ,/ t/ )/ / D/ (/ h/ ,/ t/ +/ 1/ )/ ,/ 所以/ D/ (/ h/ ,/ t/ +/ 1/ )/ 中/ 至少/ 有/ 2/ 个/ 高/ 上传/ 带宽/ 节点/ ./ 用/ 事件/ D2/ 和/ D3/ +/ 分别/ 表示/ D/ (/ h/ ,/ t/ +/ 1/ )/ 中有/ 2/ 个/ 高/ 上传/ 带宽/ 节点/ 的/ 事件/ 和/ 有/ 不少/ 于/ 3/ 个/ 高/ 上传/ 带宽/ 节点/ 的/ 事件/ ./ 出现/ D3/ +/ 是因为/ 有/ 高/ 上传/ 带宽/ 节点/ OU/ 到/ 了/ 节点/ h/ ./ 事件/ D2/ 的/ 概率/ 为/ Nh/ 个/ 高/ 上传/ 带宽/ 节点/ 都/ 没有/ OU/ 到/ 节点/ h/ 的/ 概率/ ,/ 由于/ 节点/ 之间/ 相互/ 独立/ 且/ 节点/ h/ 被/ 另/ 一/ 节点/ hOU/ 到/ 的/ 概率/ 为/ 1/ // N/ ,/ 所以/ Pr/ (/ D2/ )/ =/ (/ 1/ -/ 1/ // N/ )/ Nh/ =/ 1/ -/ α/ +/ o/ (/ α/ )/ ≈/ 1/ -/ α/ ;/ 又/ 由于/ D/ (/ p/ ,/ t/ +/ 1/ )/ 只能/ 出现/ 上述/ 这/ 两种/ 情况/ ,/ 所以/ Pr/ (/ D3/ +/ =/ α/ )/ ./ 根据/ TFT/ 协议/ ,/ Pr/ (/ T2/ |/ D3/ +/ )/ =/ 0/ ,/ 同理可知/ Pr/ (/ T2/ |/ D2/ )/ =/ 1/ ./ 因此/ Pr/ (/ T2/ )/ =/ Pr/ (/ T2/ |/ D3/ +/ )/ ×/ Pr/ (/ D3/ +/ )/ +/ 当/ m/ -/ 1/ / 2/ 时/ ,/ 由于/ D/ (/ h/ ,/ t/ +/ 1/ )/ 中/ 的/ 高/ 上传/ 带宽/ 节点/ 个数/ 至少/ 为/ 2/ ,/ 根据/ TFT/ 协议/ 有/ Pr/ (/ T1/ )/ =/ 0/ ./ 因此/ ,/ 当/ m/ / 4/ 时/ 犘/ u/ (/ h/ )/ [/ (/ 2/ ,/ m/ -/ 2/ )/ ,/ (/ 2/ ,/ m/ -/ 2/ )/ ]/ =/ (/ 1/ -/ α/ )/ ×/ (/ 1/ -/ α/ )/ +/ 0/ ×/ α/ =/ (/ 1/ -/ α/ )/ 2/ ./ 当/ m/ =/ 2/ 时/ ,/ 节点/ h/ 用/ TFT/ 协议/ 从/ D/ (/ h/ ,/ t/ +/ 1/ )/ 中/ 选出/ 1/ 个/ 节点/ ,/ U/ (/ h/ ,/ t/ )/ / D/ (/ h/ ,/ t/ +/ 1/ )/ 导致/ 该/ 节点/ 一定/ 是/ 高/ 上传/ 带宽/ 节点/ ,/ 所以/ Pr/ (/ T2/ )/ =/ 0/ ,/ Pr/ (/ T1/ )/ =/ 1/ ,/ 所以/ 犘/ u/ (/ h/ )/ [/ (/ 2/ ,/ m/ -/ 2/ )/ ,/ (/ 2/ ,/ m/ -/ 2/ )/ ]/ =/ α/ ./ 当/ m/ =/ 3/ 时/ ,/ 节点/ h/ 会用/ TFT/ 协议/ 从/ D/ (/ h/ ,/ t/ +/ 1/ )/ 中/ 选出/ 2/ 个/ 节点/ ,/ U/ (/ h/ ,/ t/ )/ / D/ (/ h/ ,/ t/ +/ 1/ )/ 导致/ 这/ 2/ 个/ 节点/ 一定/ 都/ 是/ 高/ 上传/ 带宽/ 的/ 节点/ ,/ Pr/ (/ T2/ )/ =/ 1/ ,/ Pr/ (/ T1/ )/ =/ 0/ ,/ 有/ 犘/ u/ (/ h/ )/ [/ (/ 2/ ,/ m/ -/ 2/ )/ ,/ (/ 2/ ,/ m/ -/ 2/ )/ ]/ =/ 1/ -/ α/ ./ 由于/ 概率/ 转移/ 矩阵/ 与/ m/ 有关/ ,/ 因此/ 可用/ 犘/ u/ ,/ m/ (/ h/ )/ 来/ 表示/ 不同/ m/ 取值/ 下/ 的/ 概率/ 转移/ 矩阵/ ,/ 有/ 犘/ u/ ,/ 3/ (/ h/ )/ =/ 找到/ 这些/ 矩阵/ 的/ 共同/ 规律/ 即/ 得出/ 式/ (/ 1/ )/ ./ 证毕/ ./ 对于/ BitTorrent/ ,/ {/ Uh/ (/ t/ )/ :/ t/ =/ 0/ ,/ 1/ ,/ 2/ ,/ …/ }/ 上/ 的/ 状态/ 转移/ ,/ 如图/ 3/ 所示/ ./ 图/ 3BitTorrent/ 中/ {/ Uh/ (/ t/ )/ :/ t/ =/ 0/ ,/ 1/ ,/ 2/ ,/ …/ }/ 上/ 的/ 状态/ 转移/ 3.3/ 高带宽/ 节点/ 犝/ 犺/ (/ 狋/ )/ :/ 狋/ =/ 0/ ,/ 1/ ,/ 2/ ,/ …/ 的/ 极限/ 分布/ 定理/ 2/ ./ 令/ 犘/ u/ (/ h/ )/ =/ limn/ →/ 犘/ n/ (/ 0/ ,/ m/ )/ (/ 1/ ,/ m/ -/ 1/ )/ …/ (/ m/ -/ 1/ ,/ 1/ )/ (/ m/ ,/ 0/ )/ (/ 0/ ,/ m/ )/ (/ 1/ ,/ m/ -/ 1/ )/ …/ (/ m/ -/ 1/ ,/ 1/ )/ (/ m/ ,/ 0/ )/ 证明/ ./ 令/ 犘/ kUh/ (/ l/ )/ =/ i/ )/ ,/ 犘/ u/ (/ h/ )/ [/ ij/ ]/ =/ limk/ →/ 犘/ k/ 时刻/ 0/ 从/ 状态/ i/ 出发/ 在/ 时刻/ k/ 首次/ 到达/ 状态/ j/ 的/ 概率/ ./ 以/ m/ =/ 5/ (/ 即/ BitTorrent/ )/ 为/ 例来/ 分析/ ,/ 为了/ 描述/ 的/ 方便/ ,/ 将/ 状态/ Uh/ (/ 0/ ,/ 5/ )/ ,/ Uh/ (/ 1/ ,/ 4/ )/ ,/ Uh/ (/ 2/ ,/ 3/ )/ ,/ Uh/ (/ 3/ ,/ 2/ )/ 记为/ 0/ ,/ 1/ ,/ 2/ ,/ 3/ ,/ 将/ 状态/ Uh/ (/ 4/ ,/ 1/ )/ ,/ Uh/ (/ 5/ ,/ 0/ )/ 记为/ 4/ ,/ 5/ ,/ 将/ 犘/ k/ 状态/ 0/ ,/ 1/ ,/ 2/ ,/ 3/ 为/ 非常/ 返态/ ,/ 状态/ 4/ ,/ 5/ 为常/ 返态/ ,/ 因此/ 犘/ ij/ =/ 0/ |/ i/ ∈/ {/ 0/ ,/ 1/ ,/ 2/ ,/ 3/ ,/ 4/ ,/ 5/ }/ ;/ j/ ∈/ {/ 0/ ,/ 1/ ,/ 2/ ,/ 3/ }/ ./ 接下来/ 需要/ 计算/ 犘/ ij/ |/ i/ ∈/ {/ 0/ ,/ 1/ ,/ 2/ ,/ 3/ ,/ 4/ ,/ 5/ }/ ;/ j/ ∈/ {/ 4/ ,/ 5/ }/ ./ 44/ =/ ∑/ 5/ 犘/ 22/ (/ 1/ -/ α/ )/ α/ +/ (/ 1/ -/ α/ )/ ×/ (/ 1/ -/ α/ )/ +/ (/ 1/ -/ α/ )/ ×/ α/ =/ 1/ -/ α/ ,/ 同样/ 的/ 方法/ 得出/ ,/ 犘/ 2/ 学/ 归纳法/ 假设/ 犘/ k44/ =/ ∑/ 5/ 据/ 犘/ k/ +/ 11/ -/ α/ ./ 同样/ 归纳/ 出/ 犘/ 现在/ 求/ 犘/ limk/ →/ ∑/ Kt/ =/ 1Page5t/ =/ 1limk/ →/ ∑/ Kft44/ +/ limk/ →/ ∑/ k/ 犘/ 44/ =/ ∑/ 犘/ t/ =/ 1/ 显然/ ,/ ∑/ t/ =/ 1/ 这一/ 事件/ 记为/ A/ )/ 的/ 概率/ ,/ 定义/ B1/ 为/ 从/ 状态/ 1/ 出发/ 且/ 在/ 到达/ 状态/ 5/ 之前/ 先/ 到达/ 状态/ 4/ 的/ 事件/ ;/ 而/ B2/ 为/ 从/ 状态/ 1/ 出发/ 且/ 在/ 到达/ 状态/ 4/ 之前/ 先/ 到达/ 状态/ 5/ 事件/ ./ 由/ 状态/ 迁移/ 图/ 3/ 可知/ ,/ 从/ 状态/ 1/ 出发/ 最终/ 必定/ 到达/ 状态/ {/ 4/ ,/ 5/ }/ ,/ 所以/ Pr/ (/ B1/ ∪/ B2/ )/ =/ 1/ ,/ 而/ 显然/ 有/ B1/ 和/ B2/ 不/ 可能/ 同时/ 发生/ ,/ 即/ Pr/ (/ B1/ ∩/ B2/ )/ =/ 0/ ./ 因此/ 可用/ 全/ 概率/ 公式/ 得出/ ∑/ Pr/ (/ A/ |/ B2/ )/ Pr/ (/ B2/ )/ ,/ 而/ 其中/ Pr/ (/ A/ |/ B1/ )/ =/ 1/ ;/ Pr/ (/ A/ |/ B2/ )/ =/ ∑/ 54/ =/ (/ 1/ -/ α/ )/ +/ (/ 1/ -/ α/ )/ α/ +/ (/ 1/ -/ α/ )/ α/ 2/ +/ …/ =/ ft/ (/ 1/ -/ α/ )/ // (/ 1/ -/ α/ )/ =/ 1/ ./ 因此/ 就/ 有/ ∑/ Pr/ (/ B2/ )/ =/ 1/ ,/ 也/ 就/ 有/ 犘/ 以求/ 出/ 犘/ 对于/ 其它/ m/ 取值/ ,/ 由于/ 满足/ 犘/ 2/ (/ m/ -/ 1/ )/ (/ m/ -/ 1/ )/ =/ ∑/ m/ 犘/ (/ m/ -/ 1/ )/ x/ ×/ 犘/ x/ (/ m/ -/ 1/ )/ =/ 0/ +/ 0/ +/ …/ +/ 0/ +/ (/ 1/ -/ α/ )/ ×/ x/ =/ 0/ (/ 1/ -/ α/ )/ +/ (/ 1/ -/ α/ )/ ×/ α/ =/ 1/ -/ α/ ,/ 其中/ 的/ 0/ 项是/ 由于/ 犘/ (/ m/ -/ 1/ )/ x/ =/ 0/ 或/ 犘/ x/ (/ m/ -/ 1/ )/ =/ 0/ ,/ 所以/ 求出/ 的/ 犘/ u/ ,/ m/ (/ h/ )/ [/ ij/ ]/ 和/ m/ =/ 5/ 时有/ 类似/ 的/ 结果/ ,/ 即式/ (/ 2/ )/ ./ 证毕/ ./ 3.4/ 高/ 上传/ 带宽/ 节点/ 的/ 聚簇/ 定理/ 3/ ./ 高/ 上传/ 带宽/ 节点/ h/ 其/ {/ Uh/ (/ t/ )/ :/ t/ =/ 0/ ,/ 1/ ,/ 2/ ,/ …/ }/ 的/ 极限/ 分布/ π/ u/ (/ h/ )/ =/ (/ 0/ ,/ …/ ,/ 1/ -/ α/ ,/ α/ )/ ,/ 并且/ 与/ 初始/ 分布/ 无关/ ./ 证明/ ./ 设高/ 上传/ 带宽/ 节点/ h/ 的/ 初始/ 上传/ 状态/ 的/ 分布/ 为/ ω/ ,/ 则/ 其/ 极限/ 分布/ :/ 定理/ 3/ 的/ 结果表明/ ,/ 随着/ TFT/ 和/ OU/ 对/ 上传/ 节点/ 的/ 逐步/ 选择/ ,/ 具有/ 高/ 上传/ 带宽/ 的/ 节点/ 最终/ 将/ 选择/ 给/ 同样/ 具有/ 高/ 上传/ 带宽/ 的/ 节点/ 进行/ 数据/ 上传/ ./ 定量/ 地说/ ,/ 一个/ 高/ 上传/ 带宽/ 节点/ 平均/ 会/ 将/ 其/ (/ 1/ -/ α/ )/ ×/ (/ m/ -/ 1/ )/ // m/ +/ α/ ×/ m/ // m/ =/ (/ m/ -/ 1/ +/ α/ )/ // m/ 的/ 上传/ 带宽/ 分配/ 给/ 其它/ 高带宽/ 节点/ ./ 3.5/ 节点/ 聚簇/ 后/ 的/ 宏观/ 带宽/ 分配/ 特征/ 由于/ BitTorrent/ 文件共享/ 系统/ 中/ 的/ 总/ 上传/ 带宽/ 等于/ 总/ 下载/ 带宽/ ,/ 在/ 这样/ 的/ 平衡条件/ 下/ ,/ 可以/ 分析/ 出/ 节点/ 聚簇/ 以后/ 高带宽/ 节点/ 集合/ Ph/ 和/ 低/ 带宽/ 节点/ 集合/ Pl/ 上/ 带宽/ 分配/ 的/ 宏观/ 特征/ ,/ 该/ 特征/ 如图/ 4/ 所示/ ,/ 其中/ 的/ Uhl/ 表示/ Ph/ 提供/ 给/ Pl/ 的/ 总/ 上传/ 带宽/ ./ 根据/ 定理/ 3/ 聚簇/ 以后/ 的/ 高带宽/ 节点/ 会以/ (/ 1/ -/ α/ )/ 的/ 概率/ 将/ 其/ 带宽/ 的/ 1/ // m/ 分配/ 给/ Pl/ 节点/ ,/ 以/ α/ 的/ 概率/ 不/ 分配/ 带宽/ 给/ Pl/ 中/ 的/ 节点/ ,/ 所以/ 图/ 4/ 高/ 、/ 低/ 上传/ 带宽/ 节点/ 簇/ 在/ 文件共享/ 系统/ 中/ 的/ 传输/ 结构/ 现/ 通过/ 对/ D/ (/ h/ )/ 的/ 分析/ 来求/ Ull/ 和/ Ulh/ :/ 由于/ 节点/ h/ 是/ 高/ 上传/ 带宽/ 节点/ ,/ 所以/ U/ (/ h/ )/ 中/ 的/ 节点/ 给/ h/ 提供/ 下载/ 带宽/ (/ TFT/ 的/ 结果/ )/ ,/ 所以/ D/ (/ h/ )/ 中将/ 至少/ 有/ m/ 个/ 节点/ 形成/ {/ n1/ ,/ n2/ ,/ …/ ,/ nm/ -/ 1/ ,/ nm/ }/ ,/ 其中/ {/ n1/ ,/ n2/ ,/ …/ ,/ nm/ -/ 1/ }/ 是/ 高带宽/ 节点/ (/ 这是/ 定理/ 3/ 的/ 结果/ )/ ./ 系统/ 中/ 其它/ N/ -/ 1/ -/ m/ (/ 节点/ h/ 和/ n1/ ,/ n2/ ,/ …/ ,/ nm/ -/ 1/ ,/ nm/ 除外/ )/ 个/ 节点/ 也/ 可能/ 给/ 节点/ h/ 上传/ ,/ 因为/ 这些/ 节点/ OU/ 到/ 节点/ h/ ,/ 而/ 任一/ 节点/ OU/ 到/ 节点/ h/ 的/ 概率/ 为/ 1/ // N/ ./ 对于/ 节点/ nm/ ,/ 该/ 节点/ 是/ 低/ 上传/ 带宽/ 节点/ 的/ 概率/ 为/ 1/ -/ α/ ,/ 所以/ 该/ 节点/ 对/ Ulh/ 的/ 贡献/ 的/ 期望/ 为/ (/ 1/ -/ α/ )/ ul/ // m/ ./ 对于/ 剩下/ 的/ 节点/ ni/ |/ i/ =/ m/ +/ 1/ ,/ …/ ,/ N/ -/ 1/ ,/ 这些/ 节点/ 是/ 低/ 带宽/ 节点/ 的/ 概率/ 为/ 1/ -/ α/ ,/ 都/ 以/ 1/ // N/ 的/ 概率/ 给/ 节点/ h/ 提供/ 上传/ ,/ 这些/ 节点/ 对/ Ulh/ 的/ 贡献/ 为/ ∑/ i/ =/ m/ +/ 1/ ,/ …/ ,/ N/ -/ 1ul/ // m/ =/ (/ 1/ -/ α/ )/ (/ N/ -/ m/ -/ 1/ )/ // N/ ×/ ul/ // m/ ≈/ (/ 1/ -/ α/ )/ ul/ // m/ (/ 假定/ m/ / N/ )/ ,/ 所以/ 分析/ 结果表明/ Ph/ 和/ Pl/ 之间/ 的/ 数据传输/ 相比/ 集合/ 内部/ 的/ 传输/ 要少/ 很多/ ,/ 且/ 这种/ 聚类/ 会/ 随着/ m/ 的/ 增大/ 而/ 加剧/ ./ 式/ (/ 4/ )/ ~/ 式/ (/ 7/ )/ 定量/ 地/ 说明/ 了/ 激励/ 协议/ 对/ BitTorrent/ 文件传输/ 的/ 影响/ ,/ 而/ 这些/ 数量/ 结果/ 正是/ Page6/ 本文/ 的/ 研究/ 基础/ ./ 3.6/ 激励机制/ 下/ 的/ 文件传输/ 结构/ 对于/ fileswarming/ 系统/ 而言/ ,/ 影响/ 文件传输/ 性能/ 的/ 关键/ 是/ 下载/ 同一/ 文件/ 的/ 节点/ 集合/ (/ 记/ 为/ Ψ/ F/ )/ 内/ 各/ 节点/ 间/ 文件/ 块/ 交换/ 的/ 效率/ ./ 由于/ 节点/ 会/ 动态/ 加入/ ,/ 会/ 在/ 下载/ 完成/ 后/ 离开/ ,/ 所以/ Ψ/ F/ 是/ 一个/ 随/ 时间/ 变化/ 的/ 动态/ 系统/ ,/ 记/ Ψ/ F/ (/ t/ )/ 为/ t/ 时刻/ 的/ Ψ/ F/ ./ 在/ BitTorrent/ 激励机制/ 下/ ,/ Ψ/ F/ (/ t/ )/ 根据/ 节点/ 上传/ 带宽/ 形成/ 若干个/ 紧密/ 连续/ 的/ 部分/ :/ 高/ (/ 低/ )/ 上传/ 带宽/ 节点/ 更/ 多/ 的/ 是/ 和/ 高/ (/ 低/ )/ 上传/ 带宽/ 节点/ 进行/ 传输/ ./ 不失/ 一般性/ ,/ 此处/ 仍/ 假定/ Ψ/ F/ (/ t/ )/ 中/ 包含/ 高/ 上传/ 带宽/ 节点/ 和/ 低/ 上传/ 带宽/ 节点/ 两类/ ,/ 并令/ t/ 时刻/ Ψ/ F/ (/ t/ )/ 中/ 高/ 上传/ 带宽/ 节点/ 的/ 个数/ 为/ h/ (/ t/ )/ ,/ 低/ 上传/ 带宽/ 节点/ 的/ 个数/ 为/ l/ (/ t/ )/ ./ 由于/ 一个/ 新/ 的/ 下载者/ 会以/ 参数/ 为/ λ/ 的/ 泊松/ 过程/ 进入/ Ψ/ F/ (/ t/ )/ ./ 所以/ h/ (/ t/ )/ (/ l/ (/ t/ )/ )/ 会以/ 参数/ (/ h/ (/ t/ )/ +/ l/ (/ t/ )/ )/ h/ (/ t/ )/ l/ (/ t/ (/ )/ )/ =/ -/ μ/ h/ η/ h/ -/ μ/ h/ η/ l/ // m0/ -/ (/ m/ -/ 1/ )/ μ/ h/ η/ h/ // m/ -/ μ/ l/ η/ l/ // m/ λ/ h/ λ/ h4/ 缩短/ 下载/ 时间/ 优先/ 的/ BitTorrent/ 激励/ 协议/ 4.1/ BitTorrent/ 文件/ 下载/ 时间/ 定义/ 3/ ./ 对于/ 任意/ 节点/ p/ ∈/ Ψ/ F/ ,/ p/ 的/ 文件/ 下载/ 时间/ tF/ (/ p/ )/ 就是指/ 通过/ Ψ/ F/ 中/ 节点/ 间/ 的/ 文件/ 块/ 交换/ 使/ 节点/ p/ 下载/ 完成/ F/ =/ {/ c1/ ,/ c2/ ,/ …/ ,/ ck/ }/ 的/ 时间/ ./ 定义/ 4/ ./ 从/ P2P/ 文件共享/ 系统/ 角度/ ,/ 文件传输/ 性能/ 体现/ 为/ 平均/ 文件/ 下载/ 时间/ TF/ :/ 节点/ p/ 以/ 参数/ 为/ λ/ 的/ 泊松/ 过程/ 在/ t1/ 时刻/ 进入/ 系统/ ,/ 会/ 在/ t2/ 时刻/ 下载/ 完/ 文件/ F/ 后/ 马上/ 离开/ Ψ/ F/ ,/ 显然/ tF/ (/ p/ )/ =/ t2/ -/ t1/ ,/ TF/ 是/ 系统/ 平稳/ 后/ 节点/ 在/ 系统/ Ψ/ F/ (/ t/ )/ 中/ 停留/ 的/ 平均/ 时间/ ./ 4.2/ BitTorrent/ 激励/ 对/ 文件/ 下载/ 时间/ 的/ 影响/ 在/ 激励机制/ 下/ ,/ Ψ/ F/ (/ t/ )/ 会/ 根据/ 其/ 带宽/ 而/ 汇聚/ 成/ 多个/ 节点/ 类/ ,/ 而/ 节点/ 类/ 内部/ 的/ 文件/ 块/ 交换/ 就/ 成为/ BitTorrent/ 文件/ 块/ 交换/ 的/ 绝对/ 主体/ ./ 由于/ 交换/ 对方/ 没有/ 的/ 文件/ 块/ 是/ 文件/ 块/ 交换/ 的/ 前提/ ,/ 而/ 交换/ 节点/ 集合/ 的/ 规模/ 又/ 会/ 随着/ 节点/ 聚簇/ 而/ 缩小/ ,/ 所以/ 节点/ 找到/ 提供/ 感兴趣/ 文件/ 块/ 的/ 节点/ 的/ 机会/ 就/ 会/ 减少/ ,/ 导致/ 有些/ 下载/ 周期/ 会/ 因/ 找/ 不到/ 有效/ 下载/ 节点/ 而/ 浪费/ ,/ 使文为/ λ/ h/ (/ λ/ l/ )/ 的/ 泊松/ 过程/ 变成/ h/ (/ t/ )/ +/ 1/ (/ l/ (/ t/ )/ +/ 1/ )/ ,/ 其中/ λ/ h/ +/ λ/ l/ =/ λ/ ./ 本文/ 假定/ 节点/ 在/ 下载/ 完/ F/ 后/ 马上/ 离开/ 系统/ ,/ 且/ 不/ 在/ 下载/ 中途/ 离开/ ,/ seed/ 节点/ 只/ 对/ 文件/ 交换/ 初始化/ 起/ 作用/ ,/ 并令/ 高/ 、/ 低/ 上传/ 带宽/ 节点/ 的/ 下载/ 带宽/ 分别/ 为/ ch/ 和/ cl/ ,/ 高/ 、/ 低/ 上传/ 带宽/ 节点/ 的/ 文件共享/ 效率/ 为/ η/ h/ 和/ η/ l/ ,/ 借助/ 文献/ [/ 3/ -/ 4/ ,/ 11/ ]/ 采用/ 的/ fluid/ 模型/ ,/ 可以/ 构造/ :/ dh/ (/ t/ )/ // dt/ =/ λ/ h/ -/ min/ (/ chh/ (/ t/ )/ ,/ η/ hUhh/ +/ η/ lUlh/ )/ ,/ dl/ (/ t/ )/ // dt/ =/ λ/ l/ -/ min/ (/ cll/ (/ t/ )/ ,/ η/ lUll/ +/ η/ hUhl/ )/ ,/ 其中/ Uij/ |/ {/ i/ ,/ j/ }/ ∈/ {/ h/ ,/ l/ }/ 就是/ 式/ (/ 4/ )/ ~/ (/ 7/ )/ 给出/ 的/ 结果/ ,/ 只是/ 其中/ 的/ Nh/ 和/ Nl/ 在/ 这里/ 相应/ 地/ 变成/ h/ (/ t/ )/ 和/ l/ (/ t/ )/ ,/ 而/ α/ =/ h/ (/ t/ )/ // (/ h/ (/ t/ )/ +/ l/ (/ t/ )/ )/ ./ 对于/ 通常/ 的/ 网络/ ,/ 上传/ 带宽/ 是/ 网络/ 的/ 瓶颈/ ,/ 如/ ADSL/ 的/ 上行/ 带宽/ 就/ 和/ 下行/ 带宽/ 不/ 对称/ ,/ 且/ 大多数/ P2P/ 系统/ 和/ 研究/ 都/ 做/ 同样/ 假定/ [/ 3/ -/ 4/ ,/ 11/ -/ 12/ ]/ ,/ 所以/ 有/ chh/ (/ t/ )/ / η/ hUhh/ +/ η/ lUlh/ ./ 此时/ 有件/ 下载/ 时间/ 增长/ ./ 首先/ 需对/ 这/ 一/ 影响/ 进行/ 定量分析/ ,/ 其/ 定量/ 特征/ 就/ 体现/ 为式/ (/ 8/ )/ 中/ 的/ η/ ,/ 就是/ 概率/ 值/ :/ Pr/ {/ 节点/ p/ 能/ 向/ 其/ 连接/ 节点/ 提供/ 感兴趣/ 文件/ 块/ }/ =/ 1/ -/ ∏/ q/ ∈/ N/ (/ p/ )/ Pr/ (/ C/ (/ p/ )/ / C/ (/ q/ )/ )/ =/ 1/ -/ Pr/ (/ C/ (/ p/ )/ / C/ (/ q/ )/ )/ |/ N/ (/ p/ )/ |/ ,/ 其中/ N/ (/ p/ )/ 是/ 节点/ p/ 连向/ 的/ 邻居/ 节点/ ,/ C/ (/ p/ )/ 是/ 节点/ p/ 已经/ 下载/ 获得/ 的/ 文件/ 块/ 集合/ ,/ 上式/ 的/ 推导/ 中/ 假定/ 各/ 节点/ 的/ 文件/ 下载/ 是/ 独立/ 的/ ./ 文献/ [/ 3/ ]/ 得出/ η/ 值/ 接近/ 1/ ,/ 表明/ 在/ BitTorrent/ 中/ 的/ rarestfirst/ 块/ 选择/ 策略/ 下/ ,/ 文件/ 交换/ 效率/ 很/ 高/ ,/ 但/ 在/ 文献/ [/ 3/ ]/ 的/ 分析/ 中/ 假定/ 所有/ 文件/ 块/ 都/ 能/ 交换/ 的/ 事实/ ,/ 当/ 出现/ 节点/ 聚簇/ 时/ ,/ 文件/ 块/ 集合/ 也/ 会聚/ 簇/ ,/ 导致/ 一个/ 节点/ 类/ 集合/ 内/ 并不一定/ 总能/ 交换/ 所有/ 的/ 文件/ 块/ ,/ 更/ 可能/ 的/ 情况/ 是/ 当/ 一个/ 节点/ 簇中/ 的/ 文件/ 块/ 交换/ 完成/ 时/ ,/ 其它/ 簇向/ 该/ 簇/ 引入/ 的/ 文件/ 块/ 数量/ 可能/ 不/ 满足/ 簇内/ 带宽/ 的/ 消费/ ,/ 此时/ 就/ 会/ 出现/ 下载/ 带宽/ 浪费/ ./ 对于/ 由/ 高/ 、/ 低/ 两类/ 带宽/ 组成/ 的/ 共享/ 系统/ 中/ ,/ 由于/ 高带宽/ 节点/ 簇能/ 很快/ 将/ 簇/ 中/ 的/ 文件/ 块/ 交换/ 完/ ,/ 所以/ 高带宽/ 节点/ 集合/ 会/ 出现/ 上述/ 饥饿/ 现象/ ./ 为/ 保证/ 文件/ 块/ 交换/ 的/ 效率/ ,/ 要求/ 低/ 带宽/ 节点/ 集合/ 向/ 高带宽/ 节点/ 集合/ 引入/ 的/ “/ 新/ 文件/ 块/ ”/ 数量/ 大于/ 高带宽/ 节点/ 集合/ 的/ 总/ 下载/ 能力/ ,/ 即/ Page7Y/ ×/ S/ ×/ |/ Ph/ |/ / S/ // ul/ ×/ uh/ ×/ |/ Ph/ |/ / Y/ / uh/ // ul/ 其中/ ,/ Y/ 是/ 低/ 带宽/ 给/ 高带宽/ 节点/ 引入/ 的/ 新/ 文件/ 块/ 数量/ ;/ S/ 是/ 每个/ 文件/ 块/ 的/ 大小/ ;/ Y/ ×/ S/ ×/ |/ Ph/ |/ 表示/ 低/ 带宽/ 节点/ 集合/ 向/ 高带宽/ 节点/ 集合/ 引入/ 的/ 可供/ 传输/ 的/ 新/ 数据量/ ;/ S/ // ul/ 是/ Y/ 个/ 文件/ 块/ 由/ 低/ 带宽/ 节点/ 并行/ 上/ 传给/ 高带宽/ 节点/ 的/ 时间/ ,/ 乘以/ uh/ 和/ |/ Ph/ |/ 是/ 这/ 段时间/ 高带宽/ 节点/ 集合/ 所/ 能/ 下载/ 的/ 总/ 数据量/ ,/ 也/ 就是/ 下载/ 能力/ ./ 式/ (/ 10/ )/ 中/ 的/ Y/ 与/ 高/ 、/ 低/ 带宽/ 节点/ 集合/ 之间/ 的/ 连接/ 数量/ 、/ 节点/ 集合/ 已经/ 下载/ 的/ 文件/ 块/ 数量/ 、/ 文件/ 块/ 在/ 节点/ 上/ 的/ 分布/ 等/ 因素/ 有关/ ./ 令/ C/ (/ p/ )/ 表示/ 节点/ p/ 已经/ 下载/ 到/ 的/ 文件/ 块/ 集合/ ,/ 高/ 、/ 低/ 带宽/ 节点/ 集合/ 之间/ 的/ 连接/ 一个/ 割/ L/ [/ Ph/ ,/ Pl/ ]/ ./ 通过/ 割/ L/ 中/ 的/ 边/ 将/ C/ (/ Pl/ )/ 中/ 的/ 不/ 在/ C/ (/ P/ )/ 中/ 的/ 新块/ 加入/ C/ (/ P/ )/ 中/ ,/ 这个/ 新块/ 数量/ 是/ 一个/ 随机变量/ ,/ 本文/ 将/ 分析/ 其/ 期望/ (/ 即/ Y/ )/ ./ 图/ 5/ 给出/ L/ 、/ “/ 新块/ ”/ 、/ C/ (/ P/ )/ 、/ C/ (/ Pc/ )/ 、/ c/ (/ p/ )/ 等/ 对象/ 之间/ 的/ 关系/ (/ 其中/ 的/ P/ 就是/ Ph/ )/ ./ 图/ 5C/ (/ P/ )/ ,/ C/ (/ Pc/ )/ ,/ 割/ L/ 等/ 集合/ 之间/ 的/ 关系/ 对于/ 割/ L/ 中/ 的/ 连接/ l/ =/ (/ p/ ,/ p/ )/ ,/ 定义/ 随机变量/ Xl/ 为/ 为/ 完成/ L/ 共/ 引入/ 新块/ 个数/ 的/ 计算/ ,/ 不失/ 一般性/ 假定/ l/ 引入/ 新块/ 的/ 过程/ 是/ 有序/ 的/ ,/ 规定/ 这个/ 连接/ 顺序/ 为/ 1/ ,/ 2/ ,/ …/ ,/ l/ ,/ …/ ./ 再/ 将/ 上面/ 的/ Xl/ =/ 1/ 修改/ 为/ 在/ 1/ ,/ 2/ ,/ …/ ,/ l/ -/ 1/ 完成/ 加入/ 后/ ,/ l/ 又/ 引入/ 一个/ “/ 新块/ ”/ ./ 定义/ Yl/ -/ 1/ =/ X1/ +/ X2/ +/ …/ +/ Xl/ -/ 1/ 后/ 有/ Pr/ (/ Xl/ =/ 1/ |/ Yl/ -/ 1/ =/ 0/ )/ / (/ |/ C/ (/ p/ )/ -/ C/ (/ P/ )/ |/ )/ // (/ |/ C/ (/ p/ )/ -/ C/ (/ p/ )/ |/ )/ ,/ 相应/ 就/ 有/ Pr/ (/ Xl/ =/ 1/ |/ Yl/ -/ 1/ =/ i/ )/ / (/ |/ C/ (/ p/ )/ -/ C/ (/ P/ )/ |/ -/ i/ |/ C/ (/ p/ )/ |/ // |/ C/ (/ PcL/ )/ |/ )/ // (/ |/ C/ (/ p/ )/ -/ C/ (/ p/ )/ |/ )/ ./ 其中/ |/ C/ (/ p/ )/ |/ // |/ C/ (/ PcL/ )/ |/ 表示/ 已经/ 被/ 连接/ 1/ ,/ 2/ ,/ …/ ,/ l/ -/ 1/ 引入/ 到/ C/ (/ P/ )/ 的/ 新块/ 再/ 落入/ C/ (/ p/ )/ 中/ 的/ 概率/ ,/ 这是/ 由于/ (/ 文献/ [/ 3/ ]/ 表明/ 采用/ 了/ )/ rarestfirst/ 块/ 选择/ 策略/ 后/ ,/ 每个/ 节点/ 下载/ 到/ 的/ 文件/ 块/ 可/ 认为/ 是/ F/ 上/ 的/ 均匀分布/ ,/ 即任/ 一块/ 等/ 概率/ 的/ 出现/ 在/ C/ (/ p/ )/ ∪/ C/ (/ p/ )/ 中/ (/ 均匀分布/ 的/ 并/ 仍然/ 是/ 均匀分布/ )/ ,/ 所以/ 每个/ 块/ 将/ 等/ 概率/ 地/ 属于/ C/ (/ PcL/ )/ ./ 而/ 被/ 连接/ 1/ ,/ 2/ ,/ …/ ,/ l/ -/ 1/ 引入/ 的/ 某块/ b/ 落入/ C/ (/ p/ )/ 中/ 的/ 概率/ 就是/ Pr/ (/ b/ ∈/ C/ (/ p/ )/ |/ b/ ∈/ C/ (/ Pc/ =/ Pr/ (/ b/ ∈/ C/ (/ p/ )/ ∩/ C/ (/ Pc/ =/ Pr/ (/ b/ ∈/ C/ (/ p/ )/ )/ // Pr/ (/ b/ ∈/ C/ (/ Pc/ =/ |/ C/ (/ p/ )/ |/ // |/ C/ (/ Pc/ 据此/ 可以/ 求出/ Yl/ 的/ 数学/ 期望/ (/ 详细/ 推导/ 见/ 附录/ I/ )/ :/ E/ [/ Yl/ ]/ / c1/ (/ 1/ -/ (/ 1/ -/ c2/ )/ l/ )/ // c2/ ,/ c1/ =/ E/ [/ (/ |/ C/ (/ p/ )/ -/ C/ (/ P/ )/ |/ )/ // (/ |/ C/ (/ p/ )/ -/ C/ (/ p/ )/ |/ )/ ]/ c2/ =/ E/ [/ |/ C/ (/ p/ )/ |/ // (/ |/ C/ (/ Pc/ 因此/ 在/ 满足/ 下面/ 条件/ 时/ ,/ 高/ 、/ 低/ 带宽/ 节点/ 聚簇/ 不会/ 对/ 文件/ 下载/ 时间/ 产生/ 大/ 的/ 影响/ ./ 由于/ 只有/ 高带宽/ 节点/ 交换/ 完簇/ 内/ 文件/ 块/ 以后/ 才/ 需要/ 从/ 低/ 带宽/ 节点/ 引入/ 新/ 文件/ 块/ (/ 此时/ C/ (/ p/ )/ =/ C/ (/ P/ )/ )/ ,/ 代入/ 后/ 有/ c1/ =/ 1/ ,/ 此时/ 式/ (/ 12/ )/ 的/ 左边/ 随/ c2/ 单调/ 递减/ :/ (/ 1/ )/ 当/ c2/ =/ o/ (/ 1/ // |/ L/ |/ )/ 时/ ,/ 条件/ (/ 12/ )/ 变为/ c2/ =/ o/ (/ 1/ // |/ L/ |/ )/ 意味着/ |/ C/ (/ P/ )/ |/ 较/ 小/ ,/ 割/ L/ 对应/ 的/ 低/ 带宽/ 节点/ 下载/ 到/ 的/ 文件/ 块/ 集合/ 不/ 相交/ ,/ OU/ 和/ rarestfirst/ 机制/ 下/ 此时/ 的/ |/ L/ |/ 应该/ 很小/ ,/ 在/ 系统/ 中/ 的/ 节点/ 规模/ 较大/ 时/ ,/ 该/ 条件/ 发生/ 的/ 可能性/ 很/ 低/ ./ (/ 2/ )/ 当/ c2/ 是/ 一个/ 属于/ (/ 1/ // |/ L/ |/ ,/ uh/ // ul/ )/ 的/ 常数/ 时/ ,/ 条件/ (/ 12/ )/ 变为/ (/ 3/ )/ 而/ 当/ c2/ / uh/ // ul/ 时/ ,/ 条件/ (/ 12/ )/ 不/ 满足/ ,/ 此时/ 高带宽/ 节点/ 内部/ 没有/ 可/ 供/ 交换/ 的/ 文件/ 块/ ,/ 尽量/ 和/ 低/ 带宽/ 节点/ 相连/ ./ 4.3/ 以/ 文件/ 下载/ 时间/ 为/ 效用/ 的/ 博弈/ BitTorrent/ 的/ 文件/ 下载/ 是/ 一个/ 典型/ 的/ 博弈/ 过程/ :/ 不同/ 种类/ 的/ 节点/ 通过/ 不断/ 调整/ 其/ 带宽/ 分配/ 策略/ 来/ 达到/ 收益/ 的/ 最大化/ ,/ 虽然/ 一些/ 相关/ 工作/ 也/ 定义/ 和/ 分析/ 了/ 这个/ 博弈/ [/ 3/ ]/ ,/ 但/ 文献/ [/ 3/ ]/ 的/ 博弈/ 效用/ 定义/ 为/ 节点/ 付出/ 带宽/ 与/ 接收/ 带宽/ 的/ 差值/ (/ 即/ 公平性/ )/ ,/ 相比/ 这一/ 公平性/ ,/ 在/ 实际/ 的/ BitTorrent/ 文件共享/ 中/ ,/ 用户/ 更/ 关心/ 的/ 节点/ 收益/ 应该/ 是/ 文件/ 下载/ 时间/ ,/ 因此/ 本文/ 将/ 分析/ 以/ 文件/ 下载/ 时间/ 为/ 效用/ 、/ 以上/ 传/ 节点/ 选择/ 为/ 策略/ 的/ 文件/ 块/ 交换/ 博弈/ ./ 定理/ 4/ ./ 在/ 节点/ 理性/ 假设/ 下/ ,/ P2P/ 文件/ 交换/ 系统/ 中/ 的/ 高带宽/ 节点/ h/ 采用/ 如下/ 上传/ 节点/ 选择/ 策略/ 时/ 节点/ h/ 达到/ Nash/ 平衡/ :/ (/ 1/ )/ 当/ |/ C/ (/ h/ )/ |/ </ YP/ 时/ ,/ h/ 选取/ 上传/ 节点/ 时/ m/ 值/ Page8/ 应/ 满足/ ρ/ λ/ // (/ (/ 1/ -/ 1/ // m/ )/ (/ uh/ -/ ul/ )/ )/ / (/ 2/ )/ 当/ |/ C/ (/ h/ )/ |/ >/ YP/ 时/ ,/ h/ 全/ 选择/ 低/ 带宽/ 节点/ 进行/ 上传/ ./ 其中/ YP/ 是/ 一个/ 临界值/ YP/ =/ k/ -/ β/ ,/ k/ 是/ 文件/ F/ =/ {/ c1/ ,/ c2/ ,/ …/ ,/ ck/ }/ 的/ 块/ 数/ ,/ β/ =/ uh/ // ul/ ./ 证明/ ./ 根据/ 式/ (/ 12/ )/ 和/ (/ 14/ )/ ,/ c2/ =/ 1/ // β/ 就是/ 临界/ 条件/ ./ 在/ rarestfirst/ 机制/ 下/ 可以/ 认为/ |/ C/ (/ p/ )/ |/ // |/ C/ (/ PcL/ )/ |/ ≈/ 1/ // 2/ ,/ 而/ 对于/ 文件/ 块/ ci/ ,/ Pr/ (/ ci/ ∈/ C/ (/ p/ )/ )/ ×/ Pr/ (/ ci/ / C/ (/ p/ )/ )/ =/ (/ k/ -/ |/ C/ (/ p/ )/ |/ )/ // 2k/ ,/ 根据/ 数学/ 期望/ 的/ 加/ 和/ 特性/ ,/ |/ C/ (/ p/ )/ -/ C/ (/ p/ )/ |/ 的/ 均值/ 为/ (/ k/ -/ |/ C/ (/ p/ )/ |/ )/ // 2/ ./ 联立/ 以后/ 就/ 有/ 临界/ 条件/ C/ (/ h/ )/ =/ k/ -/ β/ ./ 此时/ c2/ ≈/ 1/ // (/ k/ -/ |/ C/ (/ h/ )/ |/ )/ ,/ 将/ 该值/ 代入/ 式/ (/ 15/ )/ 有/ |/ L/ |/ / log1/ -/ 1/ // (/ k/ -/ |/ C/ (/ h/ )/ |/ )/ 1/ -/ β/ // (/ k/ -/ |/ C/ (/ h/ )/ |/ )/ ./ 现/ 分析/ |/ L/ |/ ,/ 应该/ 有/ |/ L/ |/ =/ Ulh/ // (/ ul/ // m/ )/ ,/ 但/ 不能/ 用式/ (/ 6/ )/ 的/ Ulh/ 代入/ 计算/ ,/ 这是/ 由于/ 在/ 以/ 文件/ 下载/ 时间/ 为/ 效用/ 的/ 博弈/ 下/ ,/ 低/ 带宽/ 节点/ 会/ 采取/ 不同于/ 以往/ 的/ 节点/ 选择/ 策略/ ./ 在/ 以/ 下载/ 时间/ 为/ 效用/ 的/ 博弈/ 中/ ,/ 高带宽/ 节点/ 之所以/ unchoking/ 低/ 带宽/ 节点/ 原因/ 是/ 内部/ 已/ 无/ 文件/ 可/ 传/ ,/ 而/ 不是/ 由于/ 低/ 带宽/ 节点/ OU/ 到/ 了/ 高带宽/ 节点/ ,/ 因此/ 在/ 该/ 博弈/ 的/ Nash/ 平衡/ 时低/ 带宽/ 选择/ 的/ 策略/ 只/ OU/ 低/ 带宽/ 节点/ ,/ 只有/ 在/ 高带宽/ 节点/ OU/ 到/ 低/ 带宽/ 节点/ 时才/ TFT/ 到/ 高带宽/ 节点/ ./ 根据/ 低/ 带宽/ 节点/ 在/ 博弈/ 中/ 选择/ 的/ 策略/ ,/ 式/ (/ 6/ )/ 变成/ Ulh/ =/ (/ 1/ -/ α/ )/ ulNh/ // m/ ,/ 将/ 其/ 代入/ 后/ 可得/ 条件/ h/ (/ t/ )/ (/ 1/ -/ α/ )/ / log1/ -/ 1/ // (/ k/ -/ |/ C/ (/ h/ )/ |/ )/ 1/ -/ β/ // (/ k/ -/ |/ C/ (/ h/ )/ |/ )/ ./ 再/ 综合/ 式/ (/ 8/ )/ 的/ 结果/ ,/ 在/ 系统/ 稳定/ 时/ 就/ 有/ 条件/ (/ 15/ )/ (/ 详细/ 证明/ 见/ 附录/ II/ )/ ./ 当/ 1/ // (/ k/ -/ |/ C/ (/ h/ )/ |/ )/ 很/ 小时/ ,/ (/ 1/ -/ 1/ // (/ k/ -/ |/ C/ (/ h/ )/ |/ )/ )/ β/ ≈/ 1/ -/ β/ // (/ k/ -/ |/ C/ (/ h/ )/ |/ )/ ,/ 此时/ log1/ -/ 1/ // (/ k/ -/ |/ C/ (/ h/ )/ |/ )/ 1/ -/ β/ // (/ k/ -/ |/ C/ (/ h/ )/ |/ )/ ≈/ β/ ,/ 1/ // (/ k/ -/ |/ C/ (/ h/ )/ |/ )/ 很小/ 是/ 由于/ k/ 通常/ 很大/ ,/ 如/ 1000/ (/ 文件/ 块/ 大小/ 通常/ 为/ 256KB/ ,/ 一个/ 数百/ MB/ 的/ 文件/ 有/ 1000/ 块/ 左右/ )/ ./ 此时/ 式/ (/ 15/ )/ 可以/ 近似/ 为/ 应用/ 式/ (/ 20/ )/ ,/ h/ (/ t/ )/ =/ m/ ρ/ λ/ // (/ (/ m/ -/ 1/ )/ uh/ )/ ,/ l/ (/ t/ )/ =/ (/ (/ m/ -/ 1/ -/ m/ ρ/ )/ λ/ )/ // (/ (/ m/ -/ 1/ )/ ul/ )/ 和/ N/ =/ h/ (/ t/ )/ +/ l/ (/ t/ )/ ,/ 式/ (/ 16/ )/ 变为/ Nm/ / (/ β/ -/ 1/ )/ (/ 1/ +/ β/ // ρ/ -/ β/ )/ m/ -/ β/ (/ β/ -/ 1/ )/ // ρ/ (/ 17/ )/ 表/ 1/ 给出/ 了/ 两类/ 典型/ 场景/ 下/ m/ 的/ 取值/ (/ 其中/ ρ/ 设为/ 0.2/ )/ ./ 从表/ 1/ 的/ 数值/ 可以/ 看出/ :/ (/ 1/ )/ 对于/ 一定/ 的/ β/ ,/ 如果/ N/ 足够/ 大/ (/ 大于/ 表/ 1/ 中/ 给出/ 的/ “/ N/ 的/ 临界值/ ”/ )/ ,/ m/ 可以/ 任意/ 取值/ ,/ 这是/ 由于/ 此时/ 很大/ 的/ N/ 使得/ h/ (/ t/ )/ 也/ 大到/ 无需/ 从/ l/ (/ t/ )/ 那里/ 获得/ 新/ 数据/ 块/ 来/ 维持/ 下载/ 效率/ ;/ (/ 2/ )/ 随着/ β/ 的/ 增大/ ,/ 对/ N/ 的/ 要求/ 迅速/ 增大/ (/ 随/ O/ (/ β/ 2/ )/ 增大/ )/ ,/ 实际上/ 当/ β/ 很大/ 时/ ,/ 如/ β/ / 100/ 时/ ,/ OU/ 的/ 比率/ 必需/ 很大/ ,/ 否则/ 会/ 导致/ 高带宽/ 节点/ 无/ 文件/ 可/ 传/ ,/ 而/ OU/ 比率/ 很大/ 时高/ 节点/ 处/ 的/ 公平性/ 会/ 很/ 差/ ,/ 但/ 在/ 实际/ 文件系统/ 中/ 还是/ 应该/ 选择/ 加大/ OU/ 比率/ ,/ 因为/ 可以/ 缩短/ 下载/ 时间/ ,/ 这/ 也/ 是/ 本文/ 工作/ 的/ 出发点/ ;/ (/ 3/ )/ 在/ β/ 适中/ 时/ ,/ 如/ 10/ / β/ / 30/ 时/ (/ 是/ 有线/ P2P/ 网络/ 中/ 的/ 典型/ 情况/ )/ ,/ 适当/ 控制/ swarm/ 的/ 规模/ 和/ 适当/ 控制/ m/ 的/ 大小/ 都/ 能/ 显著/ 提高/ 文件/ 下载/ 效率/ ,/ 文献/ [/ 13/ ]/ 的/ 工作/ 从/ 侧面/ 反映/ 了/ 这/ 一/ 结果/ 的/ 正确性/ ,/ 另/ 一个/ 有趣/ 的/ 现象/ 是/ β/ 和/ N/ 适中/ 时/ ,/ 此处/ 的/ m/ 和/ 5/ (/ 这是/ 实际/ BitTorrent/ 协议/ 中/ 采用/ 的/ 数值/ )/ 相差/ 不/ 大/ ,/ 在/ β/ =/ 10/ ,/ N/ =/ 280/ 时算出/ 的/ m/ 正好/ 是/ 5/ ./ β/ N/ (/ 节点/ 规模/ )/ N/ 的/ 临界值/ m/ 取值/ 58010300369m/ / 6.51001000039699/ m/ / 1.67100/ 定理/ 5/ ./ 在/ 节点/ 理性/ 的/ 假设/ 下/ ,/ 对于/ P2P/ 文件/ 交换/ 系统/ 中/ 的/ 低/ 带宽/ 节点/ l/ 而言/ ,/ 当/ l/ 采取/ 的/ 上传/ 节点/ 选择/ 策略/ 为/ :/ 节点/ l/ 只/ 选择/ 低/ 带宽/ 节点/ 进行/ OU/ ,/ 并/ 采用/ 和/ TFT/ 一样/ 的/ choking/ 策略/ 时/ ,/ 节点/ l/ 将/ 在/ 本文/ 提出/ 的/ BitTorrent/ 文件/ 交换/ 博弈/ 模型/ 下/ 达到/ Nash/ 平衡/ ./ 证明/ ./ 在/ 定理/ 4/ 的/ 证明/ 中/ 已/ 给出/ ,/ 此处/ 略去/ ./ 4.4/ 缩短/ 下载/ 时间/ 优先/ 的/ 激励/ 协议/ 综合/ 上面/ 给出/ 的/ 理论/ 分析/ 结果/ ,/ 本文/ 针对/ BitTorrent/ 设计/ 了/ 一个/ 缩短/ 下载/ 时间/ 优先/ 的/ 自/ 适应/ 激励/ 协议/ AIPS/ (/ self/ -/ AdaptiveIncentiveProtocolsforfileSwarming/ )/ ,/ 如图/ 6/ 所示/ ,/ 其/ 核心/ 是/ 高带宽/ 节图/ 6/ 缩短/ 下载/ 时间/ 优先/ 激励/ 协议/ AIPS/ 的/ 会/ 话/ 图/ Page9/ 点要/ 根据/ |/ C/ (/ p/ )/ |/ 、/ k/ -/ β/ 的/ 关系/ 和/ 式/ (/ 17/ )/ 对应/ 的/ 等式/ 来/ 决定/ 上传/ 连接/ 中/ OU/ 的/ 数量/ ,/ 低/ 带宽/ 节点/ 只/ 向/ 低/ 带宽/ 节点/ 发起/ OU/ ,/ 两类/ 节点/ 的/ TFT/ 原则/ 和/ 现在/ 的/ BitTorrent/ 一样/ ./ 5/ 实验/ 验证/ 及/ 结果/ 分析/ 5.1/ 模拟实验/ 平台/ 及/ 参数/ 本文/ 采用/ NetLogo/ 模拟/ 工具/ 对/ PLXU/ 进行/ 实验/ 验证/ ./ NetLogo/ 是/ 一个/ 基于/ 多/ Agent/ 的/ AI/ 群落/ 模拟/ 工具/ ①/ ,/ 由于/ Agent/ 对象/ 间/ 的/ 通信/ 轻便/ ,/ 特别/ 合适/ 于/ 模拟/ 大规模/ 系统/ 在/ 应用层/ 上/ 的/ 性能/ 表现/ ,/ TFT/ 和/ OU/ 机制/ 对/ BitTorrent/ 文件/ 交换/ 性能/ 的/ 影响/ 都/ 是/ 典型/ 的/ 应用层/ 表现/ ./ 用/ NetLogo/ 中/ 的/ 一个/ Agent/ 来/ 模拟/ BitTorrent/ 中/ 的/ 一个/ leecher/ ,/ 并/ 给/ 每个/ 进入/ 系统/ 的/ 节点/ 初始化/ 随机/ 分配/ 若干/ 文件/ 块/ ./ 实验/ 中/ 假定/ 低/ 带宽/ 类/ 节点/ 的/ 带宽/ 为/ 256kbps/ ,/ 假定/ 文件/ 块/ 数为/ 1000/ ,/ 文件/ 块/ 大小/ 为/ 256kb/ ./ 模拟/ 时/ 将/ 时间/ 分为/ 周期/ ,/ 每个/ 模拟/ 周期/ 所有/ 节点/ 执行/ 一遍/ TFT/ 算法/ ,/ 每隔/ 一定/ 数量/ 的/ 模拟/ 周期/ 后/ (/ 实验/ 中设/ 为/ 3/ )/ 所有/ 节点/ 执行/ 一遍/ OU/ 算法/ ./ 实验/ 中/ 用到/ 的/ 符号/ 如表/ 2/ 所示/ ./ 符号/ N/ β/ 高低/ 带宽/ 节点/ 的/ 带宽/ 之/ 比/ ρ/ 进入/ 系统/ 中/ 高带宽/ 节点/ 所/ 占/ 的/ 比率/ 0.2/ m/ 上传/ 节点/ 选择/ 中/ TFT/ 和/ OU/ 之比/ (/ m/ -/ 11/ )/ 55.2/ 实验/ 结果/ 与/ 分析/ 5.2/ ./ 1/ 节点/ 按/ 带宽/ 聚类/ 的/ 效果/ 当/ 节点/ 按/ 带宽/ 聚类/ 时/ ,/ 和/ 节点/ 交互/ 节点/ 的/ 带宽/ (/ 表现/ 为/ 节点/ 收到/ 的/ 带宽/ )/ 会/ 接近/ 节点/ 自身/ 的/ 带宽/ ,/ 所以/ 图/ 7/ 用/ 节点/ 获得/ 带宽/ 和/ 自身/ 带宽/ 之间/ 的/ 差/ 说明/ 节点/ 聚类/ 特性/ ,/ 由于/ 这个/ 插值/ 随/ 时间/ 下降/ 且/ 停到/ 一个/ 较/ 小/ 的/ 数值/ 上/ ,/ 说明/ BitTorrent/ 激励机制/ 下/ 的/ 节点/ 会/ 出现/ 聚类/ 现象/ ./ 另一方面/ ,/ 该/ 差值/ 并/ 不/ 收敛/ 到/ 0/ ,/ 这是/ 由于/ 高/ 、/ 低/ 带宽/ 节点/ 之间/ 发生/ 的/ 少量/ 数据传输/ 造成/ 的/ ,/ 高带宽/ 节点/ 上述/ 差值/ 的/ 理论/ 计算结果/ 为/ |/ Uhh/ +/ Ulh/ -/ Nhuh/ |/ // Nh/ =/ (/ 1/ -/ α/ )/ (/ β/ -/ 2/ )/ ul/ // m/ ;/ 对/ 低/ 带宽/ 节点/ 该/ 理论值/ 为/ |/ Ull/ +/ Uhl/ -/ Nlul/ |/ // Nl/ =/ α/ (/ β/ -/ 2/ )/ ul/ // m/ ./ 图/ 7/ 的/ 实验/ 参数/ 设定/ 为/ β/ =/ 10/ ,/ α/ =/ 0.2/ ,/ m/ =/ 5/ ,/ ul/ =/ 256/ ,/ 可算出/ |/ Uhh/ +/ Ulh/ -/ Nhuh/ |/ // Nh/ =/ 327.68/ ,/ |/ Ull/ +/ Uhl/ -/ Nlul/ |/ // Nl/ =/ 81.92/ (/ 图/ 7/ 中/ 的/ 两条/ 横线/ )/ ,/ 侧面/ 验证/ 了/ 本文/ 给出/ 的/ 理论/ 分析/ 结果/ ,/ 另外/ 图/ 7/ 的/ 结果/ 说明/ 低/ 带宽/ 节点/ 收敛/ 结果/ 平稳/ ,/ N/ 越大/ 收敛/ 结果/ 越/ 平稳/ ,/ 这是/ 随机/ 过程/ 的/ 必然结果/ ./ 图/ 7/ 节点/ 在/ BitTorrent/ 文件传输/ 中/ 按/ 带宽/ 聚类/ 的/ 现象/ 5.2/ ./ 2AIPS/ 对/ 高带宽/ 节点/ 文件/ 下载/ 时间/ 的/ 影响/ AIPS/ 和/ BitTorrent/ 激励机制/ 的/ 本质区别/ 在于/ BitTorrent/ 中/ 的/ TFT/ 和/ OU/ 所/ 占/ 的/ 配额/ 是/ 固定/ 的/ ,/ 而/ AIPS/ 是/ 自/ 适应/ 变化/ 的/ ,/ 是/ 随着/ 环境/ (/ 如/ 网络/ 规模/ ,/ 高低/ 带宽/ 节点/ 所/ 占/ 比例/ 等/ )/ 的/ 变化/ 而/ 自/ 适应/ 地/ 发生变化/ ./ 所以/ 分析/ AIPS/ 对/ 下载/ 效率/ 的/ 影响/ 集中/ 在/ 下载/ 效率/ 与/ m/ 关系/ 上/ ./ 表/ 3/ 给出/ 了/ 几类/ 典型/ 环境/ (/ 不同/ 的/ β/ ,/ N/ ,/ ρ/ )/ 下/ BitTorrent/ 和/ AIPS/ 对/ 高带宽/ 节点/ 文件/ 下载/ 时间/ 的/ 对比/ ,/ 由于/ AIPS/ 的/ 核心思想/ 是/ 用/ 带宽/ 换取/ 文件/ 块/ ,/ 所以/ AIPS/ 对/ 高带宽/ 节点/ 下载/ 的/ 效率/ 提高/ 是/ 显著/ 的/ ./ 结果表明/ 在/ 这个/ 环境/ 下/ ,/ AIPS/ 对/ 高带宽/ 节点/ 文件/ 下载/ 效率/ 的/ 提高/ 接近/ 20/ %/ ./ 环境/ 参数设置/ 高带宽/ 节点/ 平均/ 下载/ 时间/ // s/ β/ =/ 10/ ,/ N/ =/ 300/ ,/ ρ/ =/ 0.21988159719/ ./ 6/ β/ =/ 10/ ,/ N/ =/ 300/ ,/ ρ/ =/ 0.12233184417/ ./ 4/ β/ =/ 10/ ,/ N/ =/ 400/ ,/ ρ/ =/ 0.12184179118/ β/ =/ 20/ ,/ N/ =/ 300/ ,/ ρ/ =/ 0.21565123621/ β/ =/ 20/ ,/ N/ =/ 1000/ ,/ ρ/ =/ 0.21559125719/ ./ 4/ ①/ WilenskyU/ ./ Netlogo/ ./ http/ :/ // // ccl/ ./ northwestern/ ./ edu/ // netlogoPage10/ 图/ 8/ 给出/ 了/ β/ =/ 10/ ,/ N/ =/ 300/ ,/ ρ/ =/ 0.2/ 和/ β/ =/ 20/ ,/ N/ =/ 1000/ ,/ ρ/ =/ 0.2/ 两类/ 环境/ 中/ 文件/ 下载/ 时间/ (/ time/ )/ 随/ m/ 的/ 变化/ 关系/ ./ 式/ (/ 17/ )/ 的/ 计算/ 结果表明/ 在/ 下载/ 时间/ 优先/ 的/ 激励机制/ 下/ 两类/ 条件/ 下/ m/ 的/ 取值/ 分别/ 为/ 6.5/ 和/ 3.5/ ./ 图/ 8/ 的/ 实验/ 结果表明/ 当/ m/ 小于/ 理论/ 计算/ 阈值/ (/ 式/ (/ 17/ )/ 的/ 计算结果/ )/ 时/ ,/ 会/ 使/ 过/ 多/ 的/ 高带宽/ 上传/ 连接/ 被/ unchoking/ 到/ 低/ 带宽/ 节点/ 那里/ ,/ 当然/ 同时/ 也/ 从/ 低/ 带宽/ 节点/ 获得/ 了/ 大量/ 的/ 新/ 文件/ 块/ ,/ 因此/ 此时/ 高带宽/ 节点/ 的/ 下载/ 时间/ 会/ 因为/ 用过/ 多/ 的/ 高/ 上传/ 带宽/ 换取/ 了/ 低/ 下载/ 带宽/ 而/ 增加/ ,/ 当然/ 低/ 带宽/ 节点/ 的/ 文件/ 下载/ 时间/ 会/ 减小/ ,/ 此时/ 由于/ 高低/ 带宽/ 节点/ 之间/ 的/ 文件/ 块/ 交换/ 频繁/ ,/ 不会/ 由于/ 文件/ 块/ 缺乏/ 而/ 导致/ 带宽/ 浪费/ ,/ 系统/ 平均/ 下载/ 时间/ 会/ 减小/ ./ 另一方面/ ,/ 当/ m/ 大于/ 计算/ 阈值/ 时/ ,/ 尤其/ 是/ m/ 很大/ 时/ ,/ 高带宽/ 节点/ 从/ 低/ 带宽/ 节点/ 那里/ 换取/ 的/ 新/ 文件/ 块/ 不足以/ 支持/ 满负荷/ 下载/ ,/ 所以/ 文件/ 的/ 下载/ 时间/ 要/ 增加/ ,/ 而/ 低/ 带宽/ 节点/ 由于/ 很少/ 能/ 从/ 高带宽/ 节点/ 那里/ 获取/ 高/ 下载/ 带宽/ ,/ 其/ 文件/ 下载/ 时间/ 也/ 要/ 增加/ ,/ 当然/ 平均/ 文件/ 下载/ 时间/ 也/ 增加/ ./ 因此/ 合适/ 的/ m/ 取值/ 对系统/ 中/ 各类/ 节点/ 文件/ 下载/ 效率/ 的/ 提高/ 与/ 折中/ 具有/ 重要/ 影响/ ./ 5.2/ ./ 3/ 非/ 诚实/ 环境/ 下/ AIPS/ 的/ 效果/ 分析/ 如果/ 是/ 在/ 诚实/ 环境/ 下/ ,/ 单从/ 系统/ 平均/ 文件/ 下载/ 时间/ 出发/ ,/ 应该/ 是/ 让/ m/ 越小越/ 好/ ,/ 此时/ 文件/ 块/ 可/ 在/ 系统/ 中/ 的/ 所有/ 节点/ 之间/ 频繁/ 交换/ ,/ 因/ 没有/ 文件/ 块/ 交换/ 而/ 导致/ 下载/ 效率/ 降低/ 的/ 可能性/ 很/ 低/ ./ 但/ 另一方面/ ,/ 很小/ 的/ m/ 导致/ 大量/ 的/ OU/ ,/ 而/ OU/ 正是/ 导致/ freeriders/ 的/ 根本原因/ [/ 2/ ,/ 14/ ]/ ,/ 所以/ 在/ 存在/ 大量/ 搭便车/ 节点/ 的/ 非/ 诚实/ 环境/ 下/ ,/ m/ 值/ 的/ 选取/ 又/ 是/ 越大越/ 好/ ,/ 而/ AIPS/ 激励/ 协议/ 是/ 折中/ 上述/ 两种/ 情况/ 的/ 结果/ ,/ 从/ 缩短/ 文件/ 下载/ 时间/ 角度/ ,/ 要求/ m/ 满足/ 定理/ 4/ ;/ 从/ 公平性/ 角度/ (/ 抵抗/ 搭便车/ 行为/ )/ ,/ 要求/ m/ 尽量/ 大/ ,/ 所以/ 本文/ 的/ AIPS/ 就/ 采用/ 满足/ 定理/ 4/ 的/ 那个/ 临界值/ ,/ 虽然/ 文献/ [/ 9/ -/ 10/ ]/ 也/ 讨论/ 了/ OU/ 和/ TFT/ 配额/ 对/ 共享/ 效率/ 的/ 影响/ ,/ 但/ 都/ 没有/ 在/ 非/ 诚实/ 环境/ 下面/ 向/ 系统/ 效率/ 针对/ 这一/ 配额/ 给出/ 定量/ 结果/ ./ 图/ 9/ 给出/ 了/ 搭便车/ 环境/ 下/ AIPS/ 和/ 其它/ 配额/ 调整/ (/ 包括/ 了/ 文献/ [/ 9/ -/ 10/ ]/ 的/ 调整/ 方法/ )/ 对系统/ 效率/ 影响/ ,/ 选择/ β/ =/ 10/ ,/ N/ =/ 300/ ,/ ρ/ =/ 0.2/ ;/ β/ =/ 20/ ,/ N/ =/ 1000/ ,/ ρ/ =/ 0.2/ 两类/ 参数/ 进行/ 实验/ ,/ 并/ 假定/ 其中/ 随机/ 选取/ 20/ %/ 节点/ 作为/ 搭便车/ 节点/ ./ 结果表明/ 存在/ 搭便车/ 节点/ 时/ AIPS/ 能/ 显著/ 缩短/ 平均/ 下载/ 时间/ ./ 图/ 9/ 搭便车/ 环境/ 下/ 不同/ m/ 取值/ 对/ 文件/ 下载/ 时间/ 的/ 影响/ 6/ 结束语/ 由于/ 上传/ 节点/ 的/ 选择/ 会/ 直接/ 导致/ 节点/ 接收/ 到/ 的/ 下载/ 带宽/ ,/ 所以/ 选择/ 哪些/ 节点/ 进行/ 上传/ 将/ 直接/ 影响/ Page11BitTorrent/ 中/ 的/ 节点/ 下载/ 时间/ 以及/ 文件共享/ 系统/ 的/ 效率/ ./ BitTorrent/ 系统/ 中/ 的/ 节点/ 采用/ TFT/ 协议/ ,/ 用大/ 的/ 上传/ 带宽/ 去/ 换取/ 大/ 的/ 下载/ 带宽/ ,/ 提高/ 公平性/ ,/ 但/ 从/ 节点/ 的/ QualityofExperience/ 角度/ 出发/ ,/ 用/ “/ 大/ 的/ 上传/ 带宽/ 换取/ 到/ 大/ 的/ 下载/ 带宽/ ”/ 目标/ 是/ 为了/ 提高/ 文件/ 下载/ 效率/ ,/ 此时/ 必需/ 满足条件/ :/ 从/ 换取/ 到/ 下载/ 带宽/ 的/ 节点/ 那里/ 得到/ 想要/ 的/ 文件/ 块/ ./ 因此/ 相比/ 上述/ 抽象/ 的/ 公平性/ 而言/ ,/ 实际/ 使用/ 中/ 更加/ 合理/ 的/ 选择/ 策略/ 是/ 用/ 带宽/ 去/ 换取/ 有用/ 的/ 数据/ 块/ 下载/ ./ 为了/ 完成/ 这一/ 问题/ 的/ 形式化/ 定义/ 与/ 求解/ ,/ 本文/ 扩展/ 了/ 传统/ 的/ 以/ 公平性/ 为/ 效用/ 的/ BitTorrent/ 节点/ 选择/ 博弈/ 模型/ ,/ 提出/ 了/ 以/ 缩短/ 文件/ 下载/ 时间/ 为/ 效用/ 的/ 博弈/ 模型/ ,/ 综合/ 地/ 刻画出/ 了/ 带宽/ 换/ 带宽/ 以及/ 带宽/ 换/ 文件/ 块/ 的/ 更/ 符合实际/ 环境/ 的/ 节点/ 间/ 博弈/ 结构/ ./ 综合/ 随机/ 过程/ 与/ 博弈论/ 等/ 数学/ 手段/ 得出/ 节点/ 在/ 以/ 其/ 缩短/ 文件/ 下载/ 时间/ 优先/ 的/ 博弈/ 中/ 应该/ 采取/ 的/ 策略/ :/ (/ 1/ )/ 高带宽/ 节点/ h/ 在/ 满足/ k/ -/ |/ C/ (/ h/ )/ |/ </ β/ 条件/ 时/ ,/ 选择/ 满足条件/ Nm/ / (/ β/ -/ 1/ )/ (/ 1/ +/ β/ // ρ/ -/ β/ )/ m/ -/ β/ (/ β/ -/ 1/ )/ // ρ/ 的/ 参数/ m/ 来用/ 其/ 高带宽/ 换取/ 一定量/ 的/ 高带宽/ 及/ 一定量/ 的/ 新/ 文件/ 块/ ;/ 在/ 满足条件/ k/ -/ |/ C/ (/ h/ )/ |/ >/ β/ 时/ ,/ 选择/ 完全/ 用/ 其/ 高带宽/ 来/ 换取/ 有用/ 文件/ 块/ ./ (/ 2/ )/ 低/ 带宽/ 节点/ 总/ 采取/ 用/ 其/ 文件/ 块/ 换取/ 高带宽/ 的/ 策略/ ./ 其中/ 的/ N/ ,/ ρ/ ,/ β/ 都/ 是/ 能/ 从/ 实际/ 系统/ 中/ 测量/ 出来/ 的/ 参数/ ./ 最后/ 的/ 模拟实验/ 结果/ 可/ 反映/ 出/ 本文/ 给出/ 的/ 理论/ 结果/ 及/ 相应/ 策略/ 的/ 正确性/ 和/ 有效性/ ./ 

