Page1/ 基于/ 预/ 采样/ 的/ 模块/ 级/ 热/ 分析方法/ 1/ )/ (/ 北京师范大学/ 信息科学/ 与/ 技术/ 学院/ 北京/ 100875/ )/ 2/ )/ (/ 伊利诺伊/ 理工大学/ 计算机科学/ 系/ 芝加哥/ 美国/ 60616/ -/ 3793/ )/ 摘要/ 对片/ 上/ 多/ 核/ 系统/ (/ MPSoC/ )/ 进行/ 高效/ 结构/ 级/ 热/ 分析/ 是/ 进行/ 温敏布/ 图/ 规划/ 与/ 实时/ 功耗/ 温度/ 管理/ 研究/ 的/ 关键/ ./ 由于/ 需要/ 预先/ 使用/ HotSpot/ 提取/ 布图/ 规划/ 中/ 功能模块/ 之间/ 的/ 相关/ 热阻/ 参数/ ,/ 最新/ 的/ 结构/ 级/ 热/ 分析/ 算法/ BloTAM/ 在/ 温敏布/ 图/ 规划/ 中/ 的/ 热/ 分析/ 效率/ 并/ 不/ 理想/ ./ 对于/ 散热/ 条件/ 与/ 内核/ 尺寸/ 确定/ 的/ 温敏布/ 图/ 规划/ ,/ 该文/ 提出/ 了/ 一种/ 预/ 采样/ 的/ 结构/ 级/ 热/ 分析/ 算法/ PS/ -/ BloTAM/ ,/ 它/ 先/ 使用/ HotSpot/ 为/ 采样/ 模块/ 阵列/ 建立/ 相关/ 热阻/ 预/ 采样/ 矩阵/ 犛/ (/ 即/ 相关/ 热阻/ 库/ )/ ,/ 温敏布/ 图/ 规划/ 产生/ 一个/ 方案/ 后/ ,/ PS/ -/ BloTAM/ 可以/ 根据/ 方案/ 中/ 模块/ 的/ 大小/ 与/ 位置/ 直接/ 使用/ 犛/ 计算/ 出/ 模块/ 之间/ 的/ 相关/ 热阻/ 矩阵/ 犚/ ,/ 然后/ 使用/ 犚/ 计算/ 出/ 不同/ 工作/ 模式/ 下/ 的/ 模块/ 温度/ ./ 采用/ 传统/ 的/ 设计/ 库/ 思想/ ,/ PS/ -/ BloTAM/ 能够/ 快速/ 计算/ 出/ 不同/ 布图/ 规划/ 方案/ 所/ 产生/ 的/ 热点/ 温度/ ./ 实验/ 数据/ 表明/ :/ (/ 1/ )/ 与/ HotSpot/ 相比/ ,/ PS/ -/ BloTAM/ 的/ 平均误差/ 与/ 最大/ 误差/ 分别/ 小于/ 1.65/ %/ 和/ 6.64/ %/ ,/ 可以/ 获得/ 43/ 倍/ 的/ 加速/ 效果/ ;/ (/ 2/ )/ 与/ BloTAM/ 相比/ ,/ PS/ -/ BloTAM/ 可以/ 获得/ 3.4/ 倍/ 的/ 加速/ 效果/ ;/ (/ 3/ )/ 在/ 温敏布/ 图/ 规划/ 的/ 应用/ 中/ ,/ PS/ -/ BloTAM/ 以/ 小于/ 1.24/ %/ 误差/ 的/ 代价/ 、/ 获得/ 了/ 比/ HotSpot/ 快近/ 10/ 倍/ 的/ 加速/ 效果/ ./ 关键词/ 多/ 核片/ 上/ 系统/ ;/ 结构/ 级/ ;/ 热/ 分析/ ;/ 建模/ ;/ 布图/ 规划/ 1/ 引言/ 近年来/ 随着/ 集成电路/ 的/ 快速/ 发展/ ,/ 芯片/ 制造/ 工艺/ 也/ 在/ 不断/ 提高/ ,/ 为了/ 规避/ 高功耗/ 与/ 高/ 工作温度/ 所/ 带来/ 的/ 可靠性/ 降低/ 和/ 设计/ 复杂度/ 增高/ 的/ 问题/ ①/ ,/ 业界/ 大多/ 采用/ 多核/ 并行/ 架构/ 来/ 提高/ 性能/ ,/ 降低/ 芯片/ 功耗/ 、/ 工作温度/ 以及/ 设计/ 复杂度/ [/ 1/ -/ 3/ ]/ ./ 多核/ 并行/ 架构/ 被/ 称为/ MPSoC/ ,/ 即/ 多/ 核片/ 上/ 系统/ ,/ 它/ 的/ 热点/ 分散/ ,/ 运行/ 时/ 每/ 一个/ 核都会/ 产生/ 一个/ 局部/ 热点/ [/ 1/ ]/ ./ 鉴于/ 存在/ 多个/ 的/ 局部/ 热点/ ,/ 为了/ 保障/ 芯片/ 工作/ 在/ 安全/ 温度/ 阈值/ 内/ ,/ 设计者/ 必须/ 在/ 芯片/ 设计/ 和/ 测试阶段/ ,/ 在/ 模块/ 级/ 对/ 芯片/ 的/ 功耗/ 分布/ 进行/ 不断/ 优化/ [/ 2/ -/ 7/ ]/ ,/ 需要/ 对/ MPSoC/ 进行/ 快速/ 准确/ 的/ 结构/ 级/ 热/ 分析/ [/ 4/ -/ 7/ ]/ ./ 由于/ 电热/ 分析/ 的/ 相似性/ ,/ 为了/ 获得/ 芯片/ 温度/ 分布/ 的/ 精确/ 解/ ,/ 可/ 使用/ 有限/ 差分/ 方法/ (/ FDM/ )/ 对/ 芯片/ 进行/ 全/ 芯片/ 三维/ 热/ 分析/ [/ 8/ ]/ ;/ 在/ 考虑/ 温度/ 对/ 芯片/ 功耗/ 影响/ 的/ 情况/ 下/ ,/ 需要/ 进一步/ 采用/ 迭代/ 方法/ 来/ 逼近/ 精确/ 解/ [/ 9/ ]/ ./ 目前/ 被/ 广泛/ 采用/ 的/ 模块/ 级/ 热/ 分析/ 软件/ HotSpot/ 就是/ 基于/ FDM/ 对/ MPSoC/ 进行/ 结构/ 级/ 热/ 分析/ ,/ 并/ 采用/ 迭代/ 方法/ 对受/ 电热/ 耦合/ 效应/ 影响/ 的/ MPSoC/ 进行/ 精确/ 热/ 分析/ [/ 9/ ]/ ./ 尽管/ FDM/ 方法/ 可以/ 得到/ 精确/ 解/ ,/ 但/ 其/ 算法/ 复杂度/ 高/ ,/ 在/ 实时/ 功耗/ 温度/ 管理/ 和/ 布图/ 规划/ 领域/ 不能/ 满足/ 对/ MPSoC/ 进行/ 快速/ 热/ 分析/ 的/ 需求/ [/ 4/ ,/ 10/ ]/ ./ 为了/ 对/ 结构/ 级/ MPSoC/ 的/ 温度/ 分布/ 进行/ 快速/ 求解/ ,/ 出现/ 了/ 多种/ 加速/ 算法/ [/ 1/ -/ 2/ ,/ 5/ -/ 6/ ,/ 10/ -/ 11/ ]/ ./ 基于/ 物理/ 距离/ 的/ 温度/ 求解/ 方法/ [/ 2/ ]/ 具有/ 简单/ 、/ 直观/ 的/ 优点/ ,/ 求解/ 速度/ 最快/ ,/ 但/ 精度/ 最差/ ./ 文献/ [/ 1/ ,/ 5/ -/ 6/ ]/ 忽略/ 模块/ 与/ 模块/ 之间/ 的/ 侧向/ 热阻/ 、/ 以/ 简化/ 模块/ 的/ 温度/ 求解/ ,/ 其/ 结果/ 是/ 速度/ 快/ 但/ 精度/ 差/ ./ 基于/ 学习/ 的/ 自/ 回归/ 算法/ [/ 11/ ]/ 也/ 以/ 降低/ 精度/ 的/ 代价/ 来/ 提升/ 求解/ 速度/ ,/ 用以/ 实现/ 在线/ 温度/ 分析/ ./ 为了/ 提高/ 分析/ 精度/ ,/ 最新/ 文献/ [/ 10/ ]/ 给出/ 了/ 一种/ 高效/ 的/ 结构/ 级/ 热/ 分析/ 求解/ 器/ LightSim/ ,/ 它/ 先/ 将/ 侧向/ 热阻/ 等效/ 为/ 一个/ 以/ 距离/ 为/ 自变量/ 的/ 线性/ 函数/ ,/ 再/ 采用/ 基于/ FFT/ 快速/ 求解/ 的/ 格林/ 函数/ 算法/ 进行/ 快速/ 求解/ ,/ 在/ 求解/ 过程/ 中/ ,/ 该/ 方法/ 还/ 采用/ 卷积/ 计算技术/ 来/ 解决/ 温度/ 对漏/ 电流/ 功耗/ 影响/ 的/ 电热/ 耦合/ 问题/ ,/ 从/ 实验/ 结果/ 可以/ 看出/ :/ LightSim/ 对/ 瞬态/ 热/ 分析/ 的/ 加速/ 效果/ 好/ ,/ 但/ 对于/ 结构/ 级/ 热/ 分析/ 主流/ 的/ 稳态/ 分析/ 的/ 加速/ 效果/ 一般/ ,/ 只能/ 达到/ 3.48/ 倍/ 加速/ ./ 为了/ 提高/ 结构/ 级/ 热/ 分析/ 的/ 效率/ ,/ 我们/ 提出/ 了/ 一种/ 模块/ 级/ 热/ 分析方法/ BloTAM/ [/ 12/ ]/ ,/ 对于/ 具有/ N/ 个/ 模块/ 的/ 布图/ 规划/ ,/ 先/ 采用/ HotSpot/ 对/ N/ 个/ 模块/ 进行/ N/ 个/ 热阻/ 向量/ 的/ 提取/ ,/ 以/ 构建/ 一个/ N/ ×/ N/ 的/ 相关/ 热阻/ 矩阵/ 犚/ ,/ 然后/ 根据/ 第/ i/ 种/ 工作/ 模式/ 所/ 产生/ 的/ 热量/ 注入/ 向量/ 犘/ 、/ 来/ 直接/ 求解/ 其/ 模块/ 温度/ 分布/ 向量/ 犜/ i/ ./ 采用/ 迭代/ 逼近/ 的/ 方法/ ,/ BloTAM/ 可以/ 在/ 温度/ 分析/ 中/ 考虑/ 温度/ 与/ 静态/ 功耗/ 之间/ 的/ 相互影响/ ./ 由于/ BloTAM/ 对任/ 一种/ 布图/ 规划/ 方案/ ,/ 都/ 需要/ 采用/ HotSpot/ 进行/ N/ 次/ 热阻/ 向量/ 的/ 提取/ ,/ 而/ 在/ 温敏布/ 图/ 规划/ 中/ 需要/ 尝试/ 大量/ 的/ 布图/ 规划/ 方案/ ,/ 所以/ BloTAM/ 无法/ 高效/ 地/ 用于/ 温敏布/ 图/ 规划/ 的/ 热/ 分析/ ./ 为了/ 能够/ 在/ 布图/ 规划/ 中/ 进行/ 结构/ 级/ 高效/ 热/ 分析/ ,/ 本文/ 对/ 已有/ 的/ BloTAM/ [/ 12/ ]/ 进行/ 了/ 改进/ ,/ 提出/ 了/ 一种/ 基于/ 预/ 采样/ 的/ 模块/ 级/ 热/ 分析方法/ PS/ -/ BloTAM/ ,/ 它/ 包括/ 如下/ 3/ 个/ 算法/ 步骤/ :/ (/ 1/ )/ 使用/ HotSpot/ 为/ 采样/ 模块/ 阵列/ 建立/ 相关/ 热阻/ 预/ 采样/ 矩阵/ 犛/ =/ {/ ai/ ,/ j/ }/ ,/ i/ ,/ j/ ∈/ [/ 0/ ,/ M/ )/ (/ 即/ 相关/ 热阻/ 库/ )/ ,/ M/ 是/ 采样/ 模块/ 的/ 个数/ ,/ 为了/ 保证/ 算法/ 精度/ ,/ M/ >/ 10N/ ;/ (/ 2/ )/ 温敏布/ 图/ 规划/ 产生/ 一个/ 方案/ 后/ ,/ PS/ -/ BloTAM/ 可以/ 根据/ 方案/ 中/ 模块/ 的/ 大小/ 与/ 位置/ 直接/ 使用/ 犛/ 计算/ 出/ 模块/ 之间/ 的/ 相关/ 热阻/ 矩阵/ 犚/ =/ {/ Rp/ ,/ q/ }/ ,/ p/ ,/ q/ ∈/ [/ 0/ ,/ N/ )/ ;/ (/ 3/ )/ 使用/ 犚/ 计算/ 出/ 不同/ 工作/ 模式/ 下/ 的/ 模块/ 温度/ ,/ 最终/ 统计/ 出/ 芯片/ 的/ 最高/ 温度/ 作为/ 这种/ 布图/ 规划/ 的/ 温度/ 值/ ./ 本文/ 工作/ 的/ 贡献/ 主要/ 体现/ 如下/ 几点/ :/ (/ 1/ )/ 在/ 布图/ 规划/ 前/ ,/ 采用/ 传统/ 的/ 设计/ 库/ 思想/ ,/ 根据/ 散热/ 系统/ 和/ 芯片/ 内核/ 尺寸/ 建立/ 一个/ 相关/ 热阻/ 库/ 犛/ =/ {/ ai/ ,/ j/ }/ ,/ i/ ,/ j/ ∈/ [/ 0/ ,/ M/ )/ ./ 本文/ 采用/ HotSpot/ 构建/ 犛/ ,/ 在/ 实际/ 应用/ 中/ ,/ 也/ 可以/ 采用/ 更/ 精确/ 的/ 全/ 芯片/ 三维/ 热/ 分析/ 算法/ 来/ 构建/ 犛/ ,/ 以/ 提高/ 结构/ 级/ 热/ 分析/ 的/ 精度/ ./ (/ 2/ )/ 根据/ 相关/ 热阻/ 的/ 定义/ ,/ 本文/ 推导/ 了/ 一套/ 完整/ 的/ 采样/ 热阻/ 矩阵/ 犛到/ 实用/ 热阻/ 矩阵/ 犚/ 的/ 数学/ 映/ ①/ WilsonL/ ,/ MangumS/ ./ InternationalTechnologyRoadmapPage3/ 射/ 方法/ ,/ 以/ 获取/ 尽可能/ 精确/ 的/ 相关/ 热阻/ 矩阵/ 犚/ ./ (/ 3/ )/ 实验/ 数据/ 表明/ :/ 与/ HotSpot/ 相比/ ,/ PS/ -/ BloTAM/ 的/ 平均误差/ 与/ 最大/ 误差/ 分别/ 小于/ 1.65/ %/ 和/ 6.64/ %/ ,/ 可以/ 获得/ 43/ 倍/ 的/ 加速/ 效果/ ;/ 与/ BloTAM/ 相比/ ,/ PS/ -/ BloTAM/ 可以/ 获得/ 3.4/ 倍/ 的/ 加速/ 效果/ ./ 在/ 温敏布/ 图/ 规划/ 的/ 应用/ 中/ ,/ PS/ -/ BloTAM/ 以/ 小于/ 1.24/ %/ 误差/ 的/ 代价/ ,/ 获得/ 了/ 比/ HotSpot/ 快近/ 10/ 倍/ 的/ 加速/ 效果/ ./ 2/ 研究/ 基础/ 2.1/ 芯片/ 的/ 多/ 核/ 架构/ 当前/ 集成电路/ 设计/ 已经/ 从/ 单核/ 架构/ 进入/ 到/ 多/ 核/ 架构/ 时代/ ./ 目前/ CPU/ 基本上/ 采用/ 同构/ 处理器/ 核/ 进行/ 多核/ 设计/ ,/ 即/ 每个/ 核/ 拥有/ 相同/ 面积/ 的/ 逻辑/ 功能模块/ 、/ 相同/ 容量/ 的/ 独立/ 缓存/ 等/ 功能模块/ ./ 同时/ 为/ 减少/ 芯片/ 总体/ 功耗/ ,/ CPU/ 中/ 每个/ 核均/ 拥有/ 相同/ 数目/ 的/ 工作/ 模式/ ,/ 不同/ 工作/ 模式/ 产生/ 的/ 功耗/ 分布/ 也/ 不同/ ./ 除了/ 高功耗/ 的/ 全速/ 工作/ 模式/ 外/ ,/ 每个/ 核/ 还/ 可以/ 工作/ 在/ 多个/ 低速/ 的/ 节能/ 工作/ 模式/ ./ 对于/ 图/ 1/ 所示/ 的/ Alpha21264/ 芯片/ 物理布局/ [/ 13/ ]/ ,/ HotSpot/ 求解/ 出/ 的/ 模块/ 温度/ 分布/ 如图/ 2/ 所示/ ,/ 可以/ 看出/ 功耗/ 密度/ 高/ 的/ 逻辑/ 模块/ 产生/ 了/ 一个/ 局部/ 高/ 温度/ 区域/ ,/ 即/ 产生/ 了/ 一个/ 热点/ ./ 因此/ ,/ 在/ 芯片/ 设计阶段/ ,/ 鉴于/ 功耗/ 密度/ 较大/ 的/ 逻辑/ 功能模块/ 产生/ 较/ 高/ 的/ 工作温度/ ,/ 为了/ 降低/ 芯片/ 温度/ ,/ 设计者/ 一般/ 会/ 将/ 功耗/ 密度/ 较大/ 的/ 逻辑/ 功能模块/ 布/ 放在/ 散热/ 性能/ 好/ 的/ 芯片/ 边沿/ 处/ ,/ 而/ 将/ 功耗/ 密度/ 较/ 小/ 的/ L2/ 缓存/ 布/ 放在/ 散热/ 性能/ 差/ 的/ 芯片/ 中央/ 位置/ ./ 2.2/ 芯片/ 热/ 分析/ 及/ HotSpot/ 模块/ 级/ 模型/ 为了/ 降低/ MPSoC/ 的/ 结构/ 级/ 热/ 分析/ 复杂度/ ,/ 芯片/ 温度/ 的/ 计算/ 一般/ 采用/ 稳态/ 热/ 分析方法/ [/ 6/ -/ 7/ ]/ ./ 如图/ 3/ 所示/ ,/ 根据/ 芯片/ 中/ 功能模块/ 的/ 位置/ 与/ 面积/ 可以/ 获得/ 芯片/ 的/ 热导/ 矩阵/ 犌/ ,/ 对于/ 输入/ 的/ 功耗/ 密度/ 分布/ 向量/ 犘/ ,/ 采用/ 如下/ 公式/ 计算/ 各/ 模块/ 的/ 温度/ 分布/ 向量/ 犜/ :/ 在/ 多/ 核/ 芯片/ DPTM/ 研究/ 中/ [/ 4/ ,/ 14/ ]/ ,/ 一般/ 是/ 先/ 采用/ 等效/ 热导/ 模型/ 、/ 将/ 芯片/ 模块/ 等效/ 为/ 一个/ 节点/ ,/ 通过/ 物理/ 建模/ 获得/ 热导/ 矩阵/ 犌/ [/ 14/ ]/ ,/ 然后/ 采用/ 式/ (/ 1/ )/ 计算/ 得到/ 芯片/ 模块/ 的/ 温度/ 分布/ 向量/ 犜/ ./ 如图/ 3/ 所示/ ,/ HotSpot/ 根据/ 内核/ 的/ 物理布局/ 与/ 芯片/ 的/ 热/ 封装/ 物理/ 结构/ 来/ 构建/ 热导/ 矩阵/ 犌/ ,/ 先/ 将/ 芯片/ 散热/ 系统/ 分为/ 4/ 层/ :/ 内核/ 层/ 、/ 扩热层/ 、/ 散热片/ 层/ 以及/ 热/ 对流层/ ;/ 再/ 将/ 散热/ 层/ 进一步/ 细分/ 为/ 物理/ 块/ :/ (/ 1/ )/ 内核/ 层/ 根据/ 芯片/ 的/ 几何/ 布局/ 被/ 分为/ 16/ 块/ (/ 序号/ 为/ 1/ ~/ 16/ )/ ,/ 导热/ 层/ 相应/ 地/ 也/ 被/ 分为/ 16/ 块/ (/ 序号/ 为/ 17/ ~/ 32/ )/ ;/ (/ 2/ )/ 扩热层/ 分为/ 5/ 块/ ,/ 包括/ 与/ 内核/ 层/ 完全/ 对应/ 的/ 第/ 33/ 号/ 中心/ 块/ 及其/ 4/ 块/ 呈/ 梯/ 形状/ 的/ 环绕/ 块/ (/ 序号/ 为/ 34/ ~/ 37/ )/ ;/ (/ 3/ )/ 散热片/ 层/ 按照/ 与/ 扩热层/ 相似/ 的/ 划分/ 方法/ ,/ 分为/ 第/ 38/ 号/ 中心/ 块/ 及其/ 两层/ 8/ 块/ 呈/ 梯/ 形状/ 的/ 环绕/ 块/ (/ 序号/ 为/ 39/ ~/ 46/ )/ ./ 如图/ 3/ 所示/ ,/ 在/ HotSpot/ 结构/ 级/ 热/ 分析/ 中/ [/ 15/ ]/ ,/ 所有/ 模块/ 均/ 被/ 视为/ 一个/ 节点/ ,/ 即将/ 模块/ 物理/ 中心点/ 的/ 温度/ 作为/ 该/ 模块/ 的/ 节点/ 温度/ ,/ 注入/ 模块/ 的/ 热量/ 被/ 加到/ 该/ 模块/ 的/ 中心点/ 上/ ,/ 作为/ 该/ 节点/ 的/ 输入/ 激励/ ,/ 以/ 获取/ 节点/ 热流/ 注入/ 向量/ 犘/ ;/ 同时/ 将/ 相邻/ 两个/ 模块/ 中心点/ 之间/ 的/ 热导/ 作为/ 相邻/ 节点/ 之间/ 的/ 热导/ ,/ 以/ 构建/ 节点/ 之间/ 的/ 热导/ 矩阵/ 犌/ ./ 使用/ 式/ (/ 1/ )/ 就/ 可以/ 求解/ 出节/ Page4/ 图/ 3HotSpot/ 热/ 分析/ 等效/ 模型/ [/ 5/ ]/ 点/ 温度/ 分布/ 向量/ 犜/ ,/ 一个/ 模块/ 的/ 节点/ 温度/ 就是/ 该/ 模块/ 的/ 温度/ ./ 2.3/ 电热/ 耦合/ 效应/ :/ 温度/ 对漏/ 电流/ 功耗/ 的/ 影响/ 芯片/ 功耗/ 由/ 动态/ 功耗/ Pdynamic/ 与/ 静态/ 功耗/ Pleakage/ 两/ 部分/ 组成/ ./ 近年来/ 随着/ 集成电路/ 的/ 快速/ 发展/ ,/ 芯片/ 的/ 主要/ 能耗/ 开销/ 大部分/ 来源于/ 静态/ 功耗/ Pleakage/ ./ 如下/ 式/ 所示/ ,/ 静态/ 功耗/ 随/ 温度/ 升高/ 而/ 快速/ 增加/ [/ 14/ ]/ :/ Pleakage/ (/ T/ )/ =/ VddI/ (/ V0/ ,/ T0/ )/ AT2e/ 其中/ :/ Vdd/ 和/ T/ 分别/ 是/ 供电/ 电压/ 和/ 工作温度/ ;/ V0/ 和/ T0/ 则/ 是/ 额定/ 供电/ 电压/ 和/ 设定/ 的/ 工作温度/ ,/ I/ (/ V0/ ,/ T0/ )/ 是/ 设定/ 条件/ 下/ 的/ 工作/ 电流值/ ,/ α/ ,/ β/ ,/ γ/ ,/ δ/ ,/ μ/ ,/ η/ ,/ A/ ,/ B/ 为/ 经验/ 参数/ ,/ 其值/ 如表/ 1/ 所示/ ./ 参数/ α/ 取值/ 466.4/ -/ 1224.76/ ./ 286.91/ ./ 191.201/ ./ 143E/ -/ 121.013/ E/ -/ 14/ 进而/ 计算/ 出/ 运行/ 时/ 的/ 模块/ 功耗/ Pmodule/ 与/ 温度/ 之间/ 的/ 关系式/ :/ 式/ 中/ 的/ 第/ 1/ 项为/ 动态/ 功耗/ ,/ 第/ 2/ 项为/ 静态/ 功耗/ ./ 对于/ 本文/ 4.1/ 节测例/ 3/ 所/ 定义/ 的/ 16/ 核/ CPU/ ,/ 如图/ 4/ 所示/ ,/ 在/ 考虑/ 温度/ 对/ 静态/ 功耗/ 影响/ 的/ 电热/ 耦合/ 效应/ 时/ ,/ 必须/ 采用/ 迭代/ 方法/ 逼近/ 精确/ 解/ ,/ 随着/ 迭代/ 的/ 进行/ ,/ 静态/ 功耗/ 和/ 芯片/ 温度/ 均/ 有/ 明显/ 的/ 增加/ ,/ 这/ 表明/ 在/ 热/ 分析/ 中/ 必须/ 考虑/ 温度/ 对/ 静态/ 功耗/ 影响/ ,/ 否则/ 其/ 分析/ 结果/ 与/ 实际/ 结果/ 相比/ 将会/ 产生/ 较大/ 误差/ ./ 同时/ ,/ 温度/ 分析/ 算法/ 在/ 考虑/ 电热/ 耦合/ 情况/ 下/ 需要/ 7/ 次/ 迭代/ 才能/ 得到/ 最终/ 的/ 精确/ 解/ ,/ 与/ 不/ 考虑/ 电热/ 耦合/ 效应/ 的/ 算法/ 相比/ ,/ 考虑/ 电热/ 耦合/ 效应/ 将/ 使/ 热/ 分析/ 算法/ 的/ 复杂度/ 增大/ 7/ 倍/ ,/ 因此/ 在/ 考虑/ 电热/ 耦合/ 效应/ 的/ 情况/ 下/ ,/ 降低/ 热/ 分析/ 算法/ 的/ 复杂度/ 就/ 具有/ 重要/ 的/ 研究/ 意义/ ./ 图/ 4/ 考虑/ 电热/ 耦合/ 效应/ 的/ 多/ 核/ 芯片/ 最高/ 温度/ 2.4/ BloTAM/ :/ 基于/ 实用/ 热阻/ 矩阵/ 犚/ 的/ 结构/ 级/ 热/ 分析/ 的/ 解析/ 求解/ 算法/ 为了/ 有效/ 地/ 计算/ 不同/ 功耗/ 模式/ 下/ 的/ 模块/ 温度/ 分布/ 犜/ ,/ 文献/ [/ 12/ ]/ 提出/ 基于/ 等效电路/ 的/ BloTAM/ 方法/ ,/ 即/ 根据/ 式/ (/ 1/ )/ ,/ 可知/ 犜/ =/ 犌/ -/ 1/ 犘/ =/ 犚/ 犘/ ,/ 因此/ 可以/ 通/ Page5/ 过/ 提取/ 实用/ 热导/ 矩阵/ 犚/ =/ 犌/ -/ 1/ 来/ 解析/ 求解/ 犜/ ./ 文献/ [/ 12/ ]/ 先/ 采用/ HotSpot/ 对/ N/ 个/ 模块/ 所/ 进行/ 的/ N/ 次/ 热阻/ 向量/ 提取/ ,/ 以/ 构建/ 一个/ 相关/ 热阻/ 矩阵/ 犚/ =/ {/ Tq/ }/ ,/ q/ ∈/ [/ 0/ ,/ N/ )/ ,/ 对于/ 给定/ 位置/ 和/ 面积/ 的/ N/ 模块/ 版图/ ,/ 单位/ 热量/ 注入/ 模块/ p/ ,/ 通过/ HotSpot/ 计算/ 得到/ 所有/ 模块/ 的/ 温度/ 升高/ 向量/ 犜/ =/ {/ Tq/ }/ ,/ q/ ∈/ [/ 0/ ,/ N/ )/ ,/ 其中/ 模块/ q/ 的/ 温度/ 升高/ Tq/ =/ Rp/ ,/ q/ ./ 当/ 注入/ 对应/ 于/ 一种/ 工作/ 模式/ 的/ 功耗/ 分布/ 向量/ 犘/ 时/ ,/ BloTAM/ 通过/ 式/ (/ 4/ )/ 来/ 解析/ 计算/ 出/ 各个/ 模块/ 相应/ 的/ 升高/ 温度/ ./ 如图/ 5/ 所示/ ,/ BloTAM/ 先/ 使用/ HotSpot/ 构建/ 相关/ 热阻/ 矩阵/ 犚/ ,/ 再/ 调用/ 如图/ 6/ 所示/ 的/ R2T/ 子程序/ ,/ 以/ 使用/ 迭代/ 方法/ 来/ 解决/ 电热/ 耦合/ 效应/ 的/ 非线性/ 影响/ ./ 在/ 每次/ 迭代/ 中/ ,/ BloTAM/ 先/ 使用/ 式/ (/ 4/ )/ 来/ 计算/ 犜/ ,/ 然后/ 再/ 使用/ 式/ (/ 2/ )/ 和/ 式/ (/ 3/ )/ 来/ 刷新/ 功耗/ 密度/ 向量/ 犘/ ,/ 累加/ 所有/ 模块/ 的/ 功耗/ 来/ 获得/ 芯片/ 功耗/ Pchip/ ,/ 当/ 迭代/ 后/ 的/ Pchip/ 变化/ 低于/ 阈值/ ε/ ,/ 就/ 结束/ 迭代/ ,/ 输出/ 收敛/ 后/ 的/ 犜/ 和/ Pchip/ ./ 3/ 基于/ 相关/ 热阻/ 预/ 提取/ 的/ 模块/ 级/ 热/ 分析方法/ PS/ -/ BloTAM3/ ./ 1PS/ -/ BloTAM/ 方法/ PS/ -/ BloTAM/ 采用/ 预/ 提取/ 方法/ 来/ 构建/ 热阻/ 矩阵/ 犚/ 的/ 预/ 采样/ 热阻/ 矩阵/ 犛/ ./ 如图/ 7/ (/ a/ )/ 所示/ ,/ 本文/ 使用/ 边长/ 为/ h/ 的/ 正方形/ 采样/ 质元/ 对/ 芯片/ 内核/ 进行/ 离散/ 化/ ,/ 可以/ 得到/ M/ =/ nx/ ×/ ny/ 个/ 采样/ 质元/ (/ 或/ 质点/ )/ ,/ 其中/ nx/ 和/ ny/ 是/ 内核/ 离散/ 化后/ 在/ X/ 和/ Y/ 轴/ 的/ 质元/ 数目/ ./ 使用/ HotSpot/ 对/ M/ 个/ 模块/ 所/ 进行/ 的/ M/ 次/ 热阻/ 提取/ ,/ 就/ 可以/ 获得/ 预/ 采样/ 热阻/ 矩阵/ 犛/ =/ {/ ai/ ,/ j/ }/ ,/ i/ ,/ j/ ∈/ [/ 0/ ,/ M/ )/ ./ 本文/ 将/ 犛/ =/ {/ ai/ ,/ j/ }/ ,/ i/ ,/ j/ ∈/ [/ 0/ ,/ M/ )/ 简称/ 为/ 采样/ 热阻/ 矩阵/ ,/ 是/ 采样/ 质元/ i/ 与/ 采样/ 质元/ j/ 之间/ 的/ 互阻/ ,/ 是/ 采样/ 质元/ i/ 的/ 自阻/ ./ 本文/ 工作/ 根据/ 相关/ 热阻/ 的/ 定义/ 来/ 推导/ 采样/ 热阻/ 矩阵/ 犛到/ 实用/ 热阻/ 矩阵/ 犚/ 的/ 映射/ 关系/ ./ 为了/ 求取/ 模块/ p/ 与/ 模块/ q/ 之间/ 的/ 相关/ 热阻/ Rp/ ,/ q/ ,/ 必须/ 将/ 单位/ 激励/ 加/ 到/ 模块/ p/ 上/ ,/ 来/ 计算/ 模块/ q/ 中心点/ 的/ 温度/ 升高/ Tp/ ,/ q/ ,/ Tp/ ,/ q/ 就是/ Rp/ ,/ q/ ./ 为此/ ,/ 必须/ 先/ 将/ 单位/ 激励/ 分配/ 给/ 图/ 7/ (/ b/ )/ 所示/ 的/ 模块/ p/ 所/ 包含/ 的/ 采样/ 单元/ 上/ ;/ 然后/ 基于/ 热阻/ 矩阵/ 犛/ =/ {/ ai/ ,/ j/ }/ ,/ i/ ,/ j/ ∈/ [/ 0/ ,/ M/ )/ ,/ 使用/ 这些/ 受到/ 激励/ 的/ 采样/ 单元/ 去/ 计算/ 模块/ q/ 中心点/ 的/ 温度/ 升高/ ,/ 如果/ 模块/ q/ 中心点/ 不/ 在/ 采样/ 单元/ 的/ 中心/ ,/ 如图/ 7/ (/ c/ )/ 所示/ ,/ 就/ 需要/ 计算/ 模块/ q/ 中心点/ 的/ 4/ 个/ 相邻/ 采样/ 单元/ 的/ 温度/ ,/ 再用/ 4/ 个/ 相邻/ 采样/ 单元/ 的/ 温度/ 进行/ 插值/ 来/ 获得/ 模块/ q/ 中心点/ 的/ 温度/ 升高/ Tp/ ,/ q/ ./ 本文/ 3.2/ 节/ 重点/ 推导/ 了/ 采样/ 热阻/ 矩阵/ 犛到/ 实用/ 热阻/ 矩阵/ 犚/ 的/ 映射/ 关系/ ./ 基于/ 求出/ 的/ 实用/ 热阻/ 矩阵/ 犚/ ,/ PS/ -/ BloTAM/ 使用/ BloTAM/ 算法/ 来/ 计算/ 不同/ 工作/ 模式/ 下/ 的/ 模块/ 温度/ ./ 设/ 一种/ 工作/ 模式/ 下/ 的/ 热量/ 注入/ 向量/ 为/ 犚/ =/ {/ Tq/ }/ ,/ q/ ∈/ [/ 0/ ,/ N/ )/ ,/ 可以/ 采用/ 下/ 式/ 计算/ 出/ 模块/ 温度/ 向量/ 犜/ =/ {/ Tp/ }/ ,/ p/ ∈/ [/ 0/ ,/ N/ )/ 基于/ 获得/ 的/ 模块/ 温度/ 向量/ 犜/ ,/ 我们/ 可以/ 采用/ 式/ (/ 2/ )/ 和/ (/ 3/ )/ 对/ 热量/ 注入/ 向量/ 犘/ 进行/ 更新/ ,/ 通过/ 迭代/ 计算/ Page6/ 获得/ 考虑/ 电热/ 耦合/ 效应/ 的/ 模块/ 温度/ 向量/ 精确/ 解/ ./ 3.2/ 采样/ 热阻/ 矩阵/ 犛到/ 实用/ 热阻/ 矩阵/ 犚/ 的/ 映射/ (/ 1/ )/ 模块/ p/ 的/ 单位/ 热量/ 均匀/ 注入/ ./ 如图/ 7/ (/ b/ )/ 所示/ ,/ 模块/ p/ 含有/ 内部/ 、/ 边/ 、/ 角/ 三类/ 采样/ 质元/ ,/ 对于/ 左下角/ 和/ 右上角/ 坐标/ 分别/ 为/ (/ x1/ ,/ p/ ,/ y1/ ,/ p/ )/ 和/ (/ x2/ ,/ p/ ,/ y2/ ,/ p/ )/ 的/ 模块/ p/ ,/ 采用/ 边长/ 为/ h/ 正方形/ 对/ 其/ 进行/ 采样/ 离散/ 化/ ,/ 则/ 其/ 左下角/ 与/ 右上角/ 坐标/ 分别/ 为/ (/ X1/ ,/ p/ =/ x1/ ,/ p/ // h/ ,/ Y1/ ,/ p/ =/ y1/ ,/ p/ // h/ )/ 和/ (/ X2/ ,/ p/ =/ x2/ ,/ p/ // h/ ,/ Y2/ ,/ p/ =/ y2/ ,/ p/ // h/ )/ ./ 为了/ 计算/ 模块/ p/ 的/ 内部/ 质元/ 数目/ n1/ ,/ p/ ,/ 我们/ 定义/ 其下/ // 上/ // 左/ // 右/ 边界/ 分别/ 为/ Y/ ^/ floor/ (/ Y2/ ,/ p/ )/ ,/ X/ ^/ 则/ 内部/ 采样/ 质元数/ n1/ ,/ p/ =/ (/ XY/ ^/ 1/ ,/ p/ )/ ./ 同时/ 为了/ 计算/ 模块/ p/ 的/ 边质/ 元/ 和/ 角质/ 元/ 数目/ n2/ ,/ p/ 和/ n3/ ,/ p/ ,/ 本文/ 定义/ 模块/ p/ 在/ 下/ // 上/ // 左/ // 右边/ 采样/ 质元/ 的/ 实际/ 面积/ 占/ 比/ 分别/ 为/ rdown/ =/ Y/ ^/ ^/ Y2/ ,/ p/ -/ Y/ 块/ p/ 的/ 边/ 采样/ 质元数/ n2/ ,/ p/ =/ (/ Xceil/ (/ rdown/ )/ ]/ +/ (/ Y/ 角/ 采样/ 质元数/ n3/ ,/ p/ =/ [/ ceil/ (/ rup/ )/ +/ ceil/ (/ rdown/ )/ ]/ ×/ [/ ceil/ (/ rleft/ )/ +/ ceil/ (/ rright/ )/ ]/ ./ 因此/ ,/ 模块/ p/ 涵盖/ 的/ 采样/ 质元/ 的/ 数目/ np/ =/ n1/ ,/ p/ +/ n2/ ,/ p/ +/ n3/ ,/ p/ ./ 由于/ 模块/ p/ 的/ 面积/ 离散/ 值为/ Ap/ =/ x1/ ,/ p/ )/ ×/ (/ y2/ ,/ p/ -/ y1/ ,/ p/ )/ ,/ 所以/ 模块/ p/ 在/ 采样/ 质元/ 上/ 产生/ 的/ 平均/ 激励/ 值/ bp/ 为/ bp/ =/ 对于/ 模块/ p/ 所/ 占/ 的/ 质元/ 而言/ ,/ 其/ 内部/ 质元/ 的/ 激励/ 值为/ bp/ ,/ 上边/ // 下边/ // 左边/ // 右边/ 采样/ 质元/ 的/ 激励/ 值/ 分别/ 为/ rupbp/ ,/ rdownbp/ ,/ rleftbp/ ,/ rrightbp/ ,/ 右上角/ // 右下角/ // 左上角/ // 左下角/ 采样/ 质元/ 的/ 激励/ 值/ 分别/ 为/ ruprrightbp/ ,/ rdownrrightbp/ ,/ ruprleftbp/ ,/ rdownrleftbp/ ./ (/ 2/ )/ 确定/ 模块/ 中心/ 采样/ 空间/ 的/ 投影/ 及其/ 对/ 其/ 产生/ 影响/ 的/ 相邻/ 质点/ ./ 对于/ 左下角/ 物理/ 坐标/ 为/ (/ x/ ,/ y/ )/ 的/ 采样/ 质元/ ,/ 它/ 的/ 中心点/ 物理/ 坐标/ 为/ (/ x/ +/ 0.5/ h/ ,/ y/ +/ 0.5/ h/ )/ ./ 因此/ ,/ 模块/ p/ 中心点/ 的/ 物理/ 坐标/ 为/ (/ xc/ ,/ p/ ,/ yc/ ,/ p/ )/ (/ =/ y1/ ,/ p/ +/ y2/ ,/ p/ )/ 2xc/ ,/ p/ -/ 0.5/ ,/ Yc/ ,/ p/ =/ h/ ^/ c/ ,/ p/ =/ floor/ (/ Yc/ ,/ p/ )/ ,/ X/ ^/ Y/ 则/ 对/ 模块/ p/ 中心点/ 产生/ 影响/ 的/ 左下/ 、/ 右/ 下/ 、/ 左/ 上/ 以及/ 右上/ 邻点/ 分别/ 为点/ (/ X/ ^/ c/ ,/ p/ ,/ Y/ ^/ (/ X/ 下面/ 分/ 4/ 种/ 情况/ 来/ 分析/ 对/ 模块/ 中心点/ 温度/ 升高/ Tp/ 产生/ 影响/ 的/ 邻点/ 数目/ 及其/ 影响/ 系数/ :/ 第/ 1/ 种/ 情况/ ./ 如图/ 7/ (/ c/ )/ 所示/ ,/ 如果/ Y/ ^/ c/ ,/ p/ ≠/ X/ ^/ X/ 点到/ 左下/ 、/ 右/ 下/ 、/ 左/ 上/ 、/ 右上/ 邻点/ 的/ 距离/ 分别/ 为/ Dld/ =/ (/ Xc/ ,/ p/ -/ XDlu/ =/ (/ Xc/ ,/ p/ -/ XDrd/ =/ (/ Xc/ ,/ p/ -/ X/ ^/ Dru/ =/ (/ Xc/ ,/ p/ -/ X/ ^/ 设/ Δ/ =/ 上/ 邻点/ 对/ 模块/ p/ 中心点/ 的/ 影响/ 系数/ 分别/ 为/ 1/ // DldCld/ =/ 第/ 2/ 种/ 情况/ ./ 如果/ Y/ 块/ p/ 中心点/ 只有/ 左右两个/ 邻点/ (/ XYc/ ,/ p/ )/ ./ 模块/ p/ 中心点/ 到/ 左/ 、/ 右/ 两个/ 邻点/ 的/ 距离/ 分别/ 为/ Dlt/ =/ Xc/ ,/ p/ -/ X/ 个/ 邻点/ 对/ 模块/ p/ 中心点/ 的/ 影响/ 系数/ 分别/ 为/ Clt/ =/ 第/ 3/ 种/ 情况/ ./ 如果/ Y/ 块/ p/ 中心点/ 有下/ 两个/ 邻点/ (/ Xc/ ,/ p/ ,/ Y/ ^/ 模块/ p/ 中心点/ 到/ 上/ 、/ 下/ 两个/ 邻点/ 的/ 距离/ 分别/ 为/ Dup/ =/ Y/ ^/ c/ ,/ p/ -/ Yc/ ,/ p/ 和/ Ddown/ =/ Yc/ ,/ p/ -/ Y/ 对/ 模块/ p/ 中心点/ 的/ 影响/ 系数/ 分别/ 为/ Cup/ =/ 第/ 4/ 种/ 情况/ ./ 如果/ Y/ 块/ p/ 中心点/ (/ Xc/ ,/ p/ ,/ Yc/ ,/ p/ )/ 正好/ 是/ 一个/ 采样/ 质元/ 的/ 中心点/ ,/ 该/ 采样/ 质元/ 中心点/ 对/ 模块/ p/ 中心点/ 的/ 影响/ 系数/ 为/ 1/ ./ (/ 3/ )/ 模块/ 空间/ 内/ 模块/ p/ 对/ 模块/ q/ 的/ 相关/ 热阻/ 为/ 犚/ p/ ,/ q/ ./ 对/ 模块/ p/ ,/ 它/ 的/ 热量/ 激励/ 共/ 覆盖/ np/ 个/ 采样/ 质元/ ,/ 对于/ 模块/ q/ 中心点/ 的/ 影响/ 点/ j/ ,/ 它/ 对点/ j/ 温度/ 升高/ Tp/ ,/ j/ 的/ 贡献/ 为/ Page7/ 式/ 中/ :/ AIp/ (/ i/ )/ 是/ 模块/ p/ 所/ 包含/ 的/ 第/ i/ 个/ 采样/ 质元/ 的/ 地址/ ;/ aA/ 块/ p/ 所/ 包含/ 的/ 第/ i/ 个/ 采样/ 质元/ 的/ 激励/ 值/ ./ 对/ 模块/ q/ 中心点/ 的/ 所有/ 邻点/ 温度/ 升高/ Tp/ ,/ j/ 进行/ 插值/ ,/ 可以/ 获得/ 其/ 温度/ 升高/ Tp/ ,/ q/ ,/ 即/ 模块/ p/ 对/ 模块/ q/ 之间/ 的/ 相关/ 热阻/ 为/ Rp/ ,/ qRp/ ,/ q/ =/ Tp/ ,/ q/ =/ ∑/ 式/ 中/ :/ AIq/ (/ j/ )/ 为/ 模块/ q/ 中心点/ ncq/ 个/ 邻/ 点中/ 的/ 第/ j/ 个/ 邻点/ 的/ 地址/ ;/ Cq/ (/ j/ )/ 为/ 模块/ q/ 中心点/ 的/ 第/ j/ 个/ 邻点/ 对/ 其/ 的/ 影响/ 系数/ ./ 3.3/ PS/ -/ BloTAM/ 算法/ 流程/ 如图/ 8/ 所示/ ,/ 根据/ PS/ -/ BloTAM/ 的/ 工作/ 原理/ ,/ 本文/ 设计/ 了/ 它/ 的/ 算法/ 流程/ ,/ 主要/ 包括/ 如下/ 3/ 个/ 步骤/ :/ (/ 1/ )/ 采样/ 热阻/ 矩阵/ 犛的/ 预/ 提取/ 模块/ ./ 输入/ 芯片/ 内核/ 的/ 设计/ 尺寸/ ,/ 先/ 使用/ 边长/ 为/ h/ 的/ 正方形/ 采样/ 质元/ 对/ 内核/ 进行/ 离散/ ,/ 获得/ M/ =/ nx/ ×/ ny/ 个/ 采样/ 质元/ (/ 或/ 质点/ )/ ,/ 其中/ nx/ 和/ ny/ 是/ 内核/ 离散/ 化后/ 在/ X/ 和/ Y/ 轴/ 的/ 质元/ 数目/ ;/ 再/ 使用/ HotSpot/ 对/ M/ 个/ 模块/ 所/ 进行/ 的/ M/ 次/ 相关/ 热阻/ 向量/ 提取/ ,/ 获得/ 预/ 采样/ 热阻/ 矩阵/ 犛/ =/ 图/ 8PS/ -/ BloTAM/ 的/ 算法/ 流程/ 4/ 实验/ 数据/ 及其/ 分析/ 4.1/ 实验/ 平台/ 与/ 测例/ 说明/ 为了/ 验证/ PS/ -/ BloTAM/ 方法/ 的/ 精度/ 与/ 效率/ ,/ 文本/ 构建/ 了/ 如下/ 的/ 5/ 个/ 测例/ ,/ 并/ 选用/ 热/ 分析/ 软件/ HotSpot/ {/ ai/ ,/ j/ }/ ,/ i/ ,/ j/ ∈/ [/ 0/ ,/ M/ )/ 作为/ 相关/ 热阻/ 采样/ 空间/ ,/ ai/ ,/ j/ 是/ 采样/ 质元/ i/ 与/ 采样/ 质元/ j/ 之间/ 的/ 互阻/ ,/ ai/ ,/ i/ 是/ 采样/ 质元/ i/ 的/ 自阻/ ./ (/ 2/ )/ 根据/ 犛/ 求取/ 实用/ 热阻/ 矩阵/ 犚/ 的/ 映射/ 模块/ ./ 将/ 采样/ 热阻/ 矩阵/ 犛/ 作为/ 参数/ 库/ 输入/ ./ 输入/ 布局/ 方案/ 中/ 模块/ 的/ 面积/ 与/ 位置/ ,/ 先/ 根据/ 模块/ 的/ 角/ 坐标/ 来/ 确定/ 每个/ 模块/ 所/ 占/ 的/ 所有/ 质元/ 序号/ 及其/ 占/ 比/ ,/ 再/ 根据/ 模块/ 的/ 中心/ 坐标/ 来/ 确定/ 影响/ 其/ 温度/ 的/ 相邻/ 质元/ 序号/ 及其/ 影响/ 系数/ ,/ 然后/ 根据/ 犛/ 参数/ 库所/ 提供/ 的/ 质元间/ 相关/ 热阻/ ai/ ,/ j/ ,/ 来/ 计算/ 任意/ 模块/ p/ 对/ 所有/ 模块/ 中心点/ 的/ 相邻/ 质元/ 所/ 产生/ 的/ 温度/ 升高/ Tp/ ,/ j/ ,/ 用/ 任意/ 模块/ q/ 中心点/ 的/ 相邻/ 质元/ 温度/ 升高/ Tp/ ,/ j/ 来/ 计算/ 模块/ p/ 在/ 模块/ q/ 中心点/ 上/ 产生/ 的/ 温度/ 升高/ Tp/ ,/ q/ ,/ 即/ 模块/ p/ 和/ 模块/ q/ 之间/ 的/ 相关/ 热阻/ Rp/ ,/ q/ ./ 最后/ 所有/ 的/ Rp/ ,/ q/ 构成/ 了/ 实用/ 空间/ 犚/ ,/ 进行/ 输出/ ./ (/ 3/ )/ 根据/ 犚/ 计算/ 芯片/ 温度/ 犜/ chip/ 模块/ ./ 将/ 实用/ 空间/ 犚/ 作为/ 参数/ 库/ 输入/ ./ 输入/ 不同/ 工作/ 模式/ 所/ 对应/ 的/ 热量/ 注入/ 向量/ 犘/ 序列/ ,/ 使用/ 犘/ 和/ 犚/ 计算/ 模块/ 温度/ Tq/ ,/ 并/ 将/ 模块/ 温度/ 的/ 最高值/ 作为/ 芯片/ 温度/ Tchip/ ,/ 输出/ Tchip/ 序列/ 中/ 的/ 最高值/ Tmax/ ,/ 来/ 评价/ 布图/ 设计方案/ 的/ 热/ 性能/ ./ 作为/ 验证/ 基准/ 来/ 进行/ 测试数据/ 的/ 对比/ 分析/ ./ 本文/ 的/ 硬件平台/ 为/ Windows7/ 系统/ 的/ PC机/ ,/ 配有/ Intel/ 公司/ 4/ 核/ CPU/ ,/ 内存/ 为/ 16GRAM/ ./ 测例/ 1/ ./ 如图/ 9/ (/ a/ )/ 所示/ ,/ 本文/ 基于/ 图/ 1/ 所示/ 的/ Alpha21264/ 架构/ [/ 13/ ]/ 生成/ 了/ 一个/ 单核/ 处理器/ 测例/ ,/ 包括/ 逻辑/ 模块/ core/ 和/ 3/ 个/ 高速缓存/ 模块/ L2/ _/ Right/ ,/ Page8L2/ _/ Left/ ,/ L2/ ,/ 各/ 模块/ 的/ 面积/ 与/ 功耗/ 赋值/ 如表/ 2/ 所示/ ./ 测例/ 2/ ./ 如图/ 9/ (/ b/ )/ 所示/ ,/ 本文/ 基于/ Alpha21264/ 架构/ [/ 13/ ]/ 生成/ 了/ 一个/ 4/ 核/ 处理器/ 测例/ ./ 为了/ 使/ 测例/ 2/ 与/ 测例/ 1/ 具有/ 相同/ 的/ 面积/ 与/ 芯片/ 功耗/ ,/ 我们/ 将/ 测例/ 2/ 中/ 所有/ 模块/ 的/ 面积/ 与/ 功耗/ 缩小/ 为表/ 2/ 所/ 示值/ 的/ 1/ // 4/ ./ 为了/ 降低/ 局部/ 热点/ 的/ 温度/ ,/ 4/ 核/ 处理器/ 的/ 4/ 个/ 逻辑/ 模块/ 被布/ 放在/ 散热/ 条件/ 好/ 的/ 4/ 个角/ 区域/ ,/ 同时/ 将/ 功耗/ 密度/ 低/ 的/ 4/ 个/ L2/ 模块/ 放到/ 散热/ 条件/ 差/ 的/ 芯片/ 中央/ ./ 表/ 2Alpha21264/ 架构/ 中/ 的/ 各/ 功能模块/ 的/ 参数设置/ 功能模块/ CoreL2/ _/ leftL2/ _/ right/ 图/ 9/ 基于/ Alpha21264/ 架构/ 的/ 3/ 个/ 测例/ 的/ 版图/ 测例/ 3/ ./ 如图/ 9/ (/ c/ )/ 所示/ ,/ 本文/ 基于/ Alpha21264/ 架构/ [/ 13/ ]/ 生成/ 了/ 一个/ 16/ 核/ 处理器/ 测例/ ./ 为了/ 使/ 测例/ 3/ 与/ 测例/ 1/ 具有/ 相同/ 的/ 面积/ 与/ 芯片/ 功耗/ ,/ 我们/ 将/ 测例/ 3/ 中/ 所有/ 模块/ 的/ 面积/ 与/ 功耗/ 缩小/ 为表/ 2/ 所/ 示值/ 的/ 1/ // 16/ ./ 为了/ 降低/ 局部/ 热点/ 的/ 温度/ ,/ 16/ 个/ 逻辑/ 模块/ 被/ 分为/ 4/ 组/ ,/ 布/ 放在/ 散热/ 条件/ 好/ 的/ 4/ 个角/ 区域/ ./ 测例/ 4/ ./ 采用/ 8/ 核/ IntelSandyBridge/ -/ E/ 架构/ 芯片/ ①/ ,/ 其长/ // 宽/ 分别/ 为/ 20.9/ mm/ 、/ 20.8/ mm/ ,/ 面积/ 为/ 435mm2/ ./ 本文/ 结构/ 布局/ 是/ 按照/ 其/ 实际/ 布局/ 精简/ 所得/ ,/ 并/ 根据/ 其/ 芯片/ 结构/ 对/ 各/ 模块/ 的/ 面积/ 与/ 功耗/ 进行/ 设定/ ./ 测例/ 5/ ./ 为了/ 对/ 异构/ 多核/ 芯片/ 进行/ 测试/ ,/ 本文/ 采用/ Intel/ 公司/ 2013/ 年/ 推出/ 的/ 第/ 4/ 代酷/ 睿/ 处理器/ i7/ -/ 4790/ ②/ ,/ 它/ 采用/ 面向/ CPU/ +/ GPU/ 协同/ 计算/ 的/ haswell/ 架构/ ,/ 包括/ 4/ 个/ CPU/ 核/ 、/ 1/ 个/ GPU/ 处理器/ 、/ 4/ 块/ 2MB/ 所/ 构成/ 的/ 8MB/ 容量/ L3Cache/ 和/ 内存/ 控制器/ 与/ PCI/ 总线/ 控制器/ 模块/ ,/ 芯片/ 的/ 内核/ 面积/ 为/ 177mm2/ ,/ 长度/ 和/ 宽度/ 分别/ 为/ 21.8/ mm/ 、/ 8.8/ mm/ ,/ 呈/ 长方形/ ./ 本文/ 结构/ 布局/ 是/ 按照/ 其/ 实际/ 布局/ 精简/ 所得/ ,/ 并/ 根据/ 其/ 结构/ 对/ 各/ 模块/ 的/ 面积/ 与/ 功耗/ 进行/ 设定/ ./ 4.2/ 本文/ 方法/ 的/ 精度/ 验证/ 本文/ PS/ -/ BloTAM/ 通过/ 预采/ 相关/ 热阻/ 矩阵/ 犛来/ 计算/ 实际/ 相关/ 热阻/ 矩阵/ 犚/ ,/ 尽管/ 是/ 通过/ 数学/ 推导/ 获得/ 的/ 结果/ ,/ 但/ 由于/ 在/ 推导/ 过程/ 中/ 进行/ 了/ 近似/ ,/ 所以/ 必然/ 会/ 引入/ 一定量/ 的/ 误差/ ./ 为了/ 考查/ 犛/ →/ 犚/ 过程/ 中/ 引入/ 的/ 误差/ 量/ ,/ 本文/ 采用/ HotSpot/ 提取/ 测例/ 1/ 的/ 相关/ 热阻/ 矩阵/ 作为/ 基准/ ,/ 以/ 计算/ 出/ PS/ -/ BloTAM/ 计算/ 出/ 的/ 相关/ 热阻/ 的/ 相对偏差/ 值/ ,/ 设/ RH/ 出/ 的/ 模块/ p/ 和/ 模块/ q/ 之间/ 的/ 相关/ 热阻/ ,/ RS/ 用/ 犛/ 计算/ 出/ 的/ 值/ ,/ RSp/ ,/ q/ ,/ 如表/ 3/ 所示/ ,/ 测例/ 1/ 中/ 所有/ 模块/ 之间/ 的/ 相关/ 热/ RH/ 阻/ 的/ 相对误差/ 均/ 小于/ 4.73/ %/ ,/ 这/ 表明/ 本文/ 犛/ →/ 犚/ 过程/ 中/ 引入/ 的/ 误差/ 量/ 基本上/ 可以/ 接受/ ./ 模块/ CoreL2/ _/ leftL2L2/ _/ right/ 按照/ 表/ 3/ 中/ 的/ 参数/ 设定/ ,/ 本文/ 产生/ 1000/ 个/ PowerMap/ (/ 功耗/ 密度/ 分布/ 向量/ )/ ,/ 分别/ 使用/ 经典/ 的/ HotSpot/ 算法/ 、/ 文献/ [/ 12/ ]/ 给出/ 的/ BloTAM/ 算法/ 和/ 本文/ 提出/ 的/ PS/ -/ BloTAM/ 算法/ 来/ 求解/ 各测例/ 芯片/ 的/ 模块/ 温度/ 分布/ 向量/ ,/ 其中/ 这个/ 核/ 的/ 局部/ 热点/ 温度/ 是/ 它/ 的/ Core/ 模块/ 温度/ ./ 设/ Tambient/ 是/ 环境温度/ ,/ THotSpot/ 是/ HotSpot/ 的/ 测值/ ,/ T/ 是/ BloTAM/ 和/ PS/ -/ BloTAM/ 计算/ 出/ 的/ 温度/ 值/ ,/ 本文/ 使用/ δ/ T/ =/ 算/ BloTAM/ 和/ PS/ -/ BloTAM/ 算法/ 所/ 计算出来/ 的/ 模块/ 温度/ 的/ 相对偏差/ ,/ 使用/ ET/ =/ |/ δ/ T/ |/ 来/ 计算/ 这/ 两种/ 方法/ 的/ 相对/ 温度/ 误差/ ET/ ./ 由图/ 10/ 所示/ ,/ 对/ 测例/ 1/ 各个/ 模块/ 而言/ ,/ PS/ -/ BloTAM/ 算法/ 所/ 计算出来/ 的/ 模块/ 温度/ 误差/ 最大/ 不/ 超过/ 2.8/ %/ ,/ 均/ 在/ 误差/ 的/ 允许/ 范围/ 内/ ,/ 但/ core/ 模块/ 的/ 误图/ 10PS/ -/ BloTAM/ 所/ 计算/ 出/ 的/ 测例/ 1/ 各/ 功能/ ①/ ②/ Page9/ 差/ 大于/ BloTAM/ 方法/ 的/ 误差/ ,/ 这/ 是因为/ core/ 模块/ 的/ 功耗/ 密度/ 很大/ ,/ 其/ 产生/ 的/ 电热/ 耦合/ 效应/ 偏高/ ,/ 受/ 电热/ 耦合/ 效应/ 的/ 影响/ 较/ 小/ ,/ 而/ PS/ -/ BloTAM/ 算法/ 是/ 基于/ 预/ 提取/ 热阻/ 矩阵/ 犛来/ 解析/ 计算/ 出/ 实用/ 热阻/ 矩阵/ 犚/ ,/ 所以/ 与/ BloTAM/ 相比/ ,/ PS/ -/ BloTAM/ 的/ core/ 模块/ 偏差/ 较大/ ,/ 但/ 其/ 精度/ 仍/ 满足要求/ ./ 如表/ 4/ 所示/ ,/ 与/ BloTAM/ 算法/ 相比/ ,/ 本文/ PS/ -/ BloTAM/ 算法/ 的/ 平均误差/ (/ / 1.65/ %/ )/ 均/ 小于/ 对比/ 算法/ (/ / 1.98/ %/ )/ ,/ 但/ 最大/ 误差/ (/ </ 6.64/ %/ )/ 均/ 大于/ 对比/ 算法/ (/ </ 4.864/ %/ )/ ,/ 这/ 表明/ 本文/ 通过/ 预/ 采样/ 相关/ 热阻/ 矩阵/ 犛来/ 计算/ 实际/ 相关/ 热阻/ 矩阵/ 犚/ 的/ 方法/ 具有/ 很/ 高/ 的/ 精度/ ,/ 体现/ 了/ 犛/ →/ 犚/ 的/ 理论/ 推导/ 是/ 准确/ 的/ ,/ 引入/ 了/ 较/ 小/ 的/ 误差/ ./ 由于/ 最大/ 误差/ 小于/ 6.7/ %/ ,/ 对于/ 一种/ 结构/ 级/ 热/ 分析/ 算法/ 而言/ ,/ PS/ -/ BloTAM/ 可以/ 提供/ 满意/ 的/ 热/ 分析/ 精度/ ./ 分析/ 算法/ 测例/ 1/ 测例/ 2/ 测例/ 3/ 测例/ 4/ 测例/ 54.3/ 本文/ 方法/ 的/ 速度/ 测试/ 因为/ PS/ -/ BloTAM/ 算法/ 时间/ 复杂度/ 很/ 低/ ,/ 我们/ 只/ 采用/ 结构/ 较为/ 复杂/ 的/ 测例/ 3/ 对/ PS/ -/ BloTAM/ 算法/ 的/ 热/ 分析/ 速度/ 进行/ 验证/ ./ 在/ 速度/ 方面/ ,/ 由于/ BloTAM/ 算法/ 要/ 采用/ HotSpot/ 对/ 相关/ 热阻/ 进行/ 提取/ ,/ 其中/ 芯片/ 共有/ 中/ 64/ 个/ 模块/ ,/ 所以/ 在/ BloTAM/ 算法/ 中/ ,/ HotSpot/ 进行/ 参数/ 抽取/ 时/ 需要/ 64/ 次/ ,/ 所/ 消耗/ 的/ 时间/ 被/ 称为/ 建模/ 时间/ RTModel/ ,/ 在/ 相同/ 系统/ 中/ ,/ 测得/ RTModel/ =/ 2.122/ s/ ./ 通过/ 提取/ 出/ 的/ 相关/ 热阻/ 矩阵/ 犚/ 以及/ 1000/ 个/ 输入/ 向量/ 犘/ ,/ BloTAM/ 方法/ 采用/ 式/ (/ 2/ )/ ~/ (/ 3/ )/ 计算/ 芯片/ 温度/ ,/ 所/ 消耗/ 的/ 时间/ 被/ 称为/ 热/ 分析/ 时间/ RTanalysis/ ./ 总/ 耗时/ RTtotal/ =/ RTModel/ +/ RTanalysis/ ,/ 最后/ 得出/ 总/ 耗时/ RTtotal/ 为/ 2.617/ s/ ./ PS/ -/ BloTAM/ 算法/ 由于/ 采用/ 的/ 是/ 采样/ 矩阵/ 犛预/ 提取/ 方法/ ,/ 故/ 只/ 需要/ 考虑/ PS/ -/ BloTAM/ 算法/ 热/ 分析/ 时间/ 和/ 犛/ →/ 犚/ 热阻/ 矩阵/ 映射/ 时间/ ,/ 时间/ 为/ 0.277/ s/ ,/ 即/ RTModel/ =/ 0.277/ s/ ,/ 热/ 分析/ 时间/ RTanalysis/ 为/ 0.492/ s/ ,/ 总/ 耗时/ RTtotal/ =/ 0.769/ s/ ./ 如表/ 5/ 所示/ ,/ 可以/ 得到/ :/ 与/ HotSpot/ 对比/ ,/ 本文/ 所/ 提出/ 的/ PS/ -/ BloTAM/ 算法/ 既/ 满足/ 热/ 分析/ 中/ 所/ 要求/ 的/ 精度/ 要求/ ,/ 也/ 能/ 提供/ 令人满意/ 的/ 算法/ 加速/ 效果/ ,/ PS/ -/ BloTAM/ 算法/ 耗时/ 的/ 加速/ 比/ Xtotal/ 最大/ 为/ 43/ 倍/ ,/ 而/ BloTAM/ 算法/ 仅为/ 13/ 倍/ ,/ PS/ -/ BloTAM/ 算法/ 效率/ 是/ BloTAM/ 算法/ 的/ 3.4/ 倍/ ;/ 与/ BloTAM/ 算法/ 相比/ ,/ PS/ -/ BloTAM/ 建模/ 时间/ 加速/ 比/ XModel/ 可以/ 达到/ 7.66/ 倍/ ,/ 很大/ 程度/ 上/ 减少/ 了/ 建模/ 时间/ ./ 表/ 51000/ 次/ 热/ 分析/ 的/ 各个/ 算法/ 耗时/ Runtime/ (/ s/ )/ 及其/ 分析/ 算法/ RTtotalXtotalRTModelXModelRTanalysisXanalysisHotSpot33/ ./ 15BASENBBloTAM2/ ./ 617132.122/ BASE0/ ./ 495PS/ -/ BloTAM0/ ./ 769430.2777/ ./ 660.492/ 如图/ 11/ 所示/ ,/ 由于/ BloTAM/ 算法/ 需要/ 进行/ 64/ 次/ HotSpot/ 模拟/ 对/ 犚/ 进行/ 建模/ ,/ 所以/ 随着/ 分析/ 次数/ 从/ 1000/ 次/ 降低/ 到/ 100/ 次/ ,/ BloTAM/ 算法/ 所/ 能/ 提供/ 的/ 加速/ 比/ 从/ 13/ 倍/ 降低/ 到/ 与/ HotSpot/ 近似/ 的/ 速度/ ./ 相反/ ,/ 由于/ PS/ -/ BloTAM/ 算法/ 将/ 建模/ 时间/ 降低/ 到/ 0.277/ s/ ,/ 仅/ 相当于/ 8.4/ 次/ HotSpot/ 模拟/ 时间/ ,/ 所以/ 随着/ 分析/ 次数/ 从/ 1000/ 次/ 降低/ 到/ 100/ 次/ ,/ PS/ -/ BloTAM/ 算法/ 所/ 能/ 提供/ 的/ 加速/ 比/ 从/ 43/ 倍/ 降低/ 到/ 10/ 倍/ ./ 这/ 表明/ :/ 在/ 布局/ 规划/ 过程/ 中/ ,/ 通过/ 压缩/ 热阻/ 矩阵/ 犚/ 的/ 建模/ 时间/ ,/ 可以/ 有效/ 地/ 改进/ 热/ 分析/ 的/ 效率/ ,/ 即使/ 对/ 工作/ 模式/ 较少/ 的/ 布局/ 规划/ ,/ 也/ 可以/ 获得/ 满意/ 的/ 加速/ 效果/ ./ 图/ 11BloTAM/ 与/ PS/ -/ BloTAM/ 算法/ 加速/ 对比/ 图/ 由于/ 都/ 是/ 采用/ 相同/ 的/ 结构/ 级/ 热/ 分析/ 软件/ Hotspot5/ ./ 01/ 作为/ 比较/ 标准/ ,/ 因此/ 可以/ 将/ 文献/ [/ 12/ ]/ 提出/ 的/ BloTAM/ 、/ 文献/ [/ 10/ ]/ 所/ 提供/ 的/ LightSim/ 和/ 本文/ 提出/ 的/ PS/ -/ BloTAM/ 算法/ 进行/ 加速/ 比/ 和/ 最大/ 误差/ 比较/ ./ 为此/ ,/ 本文/ 将表/ 4/ 和表/ 5/ 中/ 列出/ 的/ PS/ -/ BloTAM/ 与/ BloTAM/ 的/ 最大/ 误差/ 与/ 加速/ 倍数/ 提出/ 来/ ,/ 与/ 文献/ [/ 10/ ]/ 所/ 给出/ 的/ LightSim/ 相关/ 参数/ 放到/ 一起/ 进行/ 比较/ ./ 如表/ 6/ 所示/ ,/ 对于/ 布图/ 规划/ 中/ 所用/ 到/ 的/ 稳态/ 热/ 分析/ 而言/ ,/ 本文/ 提出/ 的/ PS/ -/ BloTAM/ 可以/ 获得/ 43/ 倍/ 的/ 加速/ ,/ 明显/ 好于/ BloTAM/ 的/ 13/ 倍/ 和/ LightSim/ 的/ 3.48/ 倍/ 加速/ 效果/ ,/ 但/ 由于/ 在/ 空间/ 热阻/ 矩阵/ 犛向/ 实用/ Page10/ 热阻/ 矩阵/ 犚/ 的/ 映射/ 过程/ 中/ 引入/ 了/ 少量/ 误差/ ,/ PS/ -/ BloTAM/ 的/ 6.64/ %/ 最大/ 误差/ 要/ 明显/ 大于/ BloTAM/ 的/ 4.86/ %/ 和/ LightSim/ 的/ 1.80/ %/ ./ 但/ 正如/ 文献/ [/ 10/ ]/ 所说/ 的/ 那样/ ,/ 结构/ 级/ 热/ 分析/ 算法/ 更多地/ 关注/ 算法/ 的/ 加速/ 效果/ ,/ 而/ 对/ 算法/ 的/ 精度/ 损失/ 不作/ 过/ 多/ 的/ 要求/ ,/ 本文/ PS/ -/ BloTAM/ 算法/ 的/ 6.64/ %/ 最大/ 误差/ 是/ 基本上/ 可以/ 满足/ 结构/ 级/ 热/ 分析/ 对/ 精度/ 的/ 要求/ ,/ 而/ 它/ 提供/ 的/ 43X/ 加速/ 则/ 很/ 好/ 地/ 满足/ 结构/ 级/ 热/ 分析/ 对/ 速度/ 的/ 需求/ ./ 总而言之/ ,/ 本文/ 提出/ 的/ PS/ -/ BloTAM/ 算法/ 是/ 一种/ 全/ 解析/ 的/ 热/ 分析/ 算法/ ,/ 具有/ 理论性/ 强/ 、/ 兼容/ 基于/ 参数/ 库/ 的/ 传统/ 设计/ 方法/ 、/ 并/ 提供/ 了/ 最好/ 的/ 加速/ 效果/ ,/ 可以/ 说/ :/ 本文/ 提出/ 的/ PS/ -/ BloTAM/ 算法/ 给/ 结构/ 级/ 稳态/ 热/ 分析/ 的/ 研究/ 画上/ 了/ 句号/ ./ LightSim/ [/ 10/ ]/ BloTAM/ [/ 12/ ]/ PS/ -/ BloTAM4/ ./ 4PS/ -/ BloTAM/ 算法/ 在/ 温敏布/ 图/ 规划/ 中/ 的/ 应用/ 为了/ 综合/ 验证/ PS/ -/ BloTAM/ 算法/ 在/ 温敏布/ 图/ 规划/ 的/ 应用/ 效果/ ,/ 本文/ 采用/ 模拟/ 褪火/ 算法/ 对/ 测例/ 3/ 进行/ 温敏布/ 图/ 规划/ ,/ 具体/ 结果/ 如表/ 7/ 所示/ ./ 如图/ 9/ (/ c/ )/ 所示/ ,/ 在/ 实验/ 中/ ,/ 对于/ 四角/ 的/ 4/ 个/ 核/ ,/ 将/ 产生/ 最高/ 功耗/ 密度/ 的/ 逻辑/ 模块/ 分别/ 固定/ 在/ 芯片/ 的/ 4/ 角/ ./ 因此/ ,/ 在/ 布图/ 规划/ 中/ ,/ 需要/ 对/ 剩余/ 的/ 12/ 个/ 核/ 进行/ 模块/ 位置/ 的/ 优化/ ,/ 如图/ 12/ 所示/ ,/ 每个/ 核/ 的/ 模块/ 位置/ 有/ 4/ 种/ 选项/ ,/ 由于/ 需要/ 对/ 412/ 个/ 布局/ 方案/ 进行/ 穷举/ 才能/ 找到/ 全局/ 最优/ 的/ 布图/ 规划/ 方案/ ,/ 所以/ 本文/ 采用/ 模拟/ 褪火/ 算法/ 来/ 搜寻/ 局部/ 最优/ 解/ ,/ 获取/ 芯片/ 工作温度/ 最低值/ 的/ 近似/ 解/ ./ 以下/ 是/ 本文/ 采用/ 的/ 模拟/ 褪火/ 算法/ 的/ 自然语言/ 表述/ :/ 1/ ./ 输入/ 布局/ 信息/ ./ 2/ ./ 随机/ 产生/ 一个/ 布局/ 方案/ ,/ 采用/ HotSpot/ 或/ PS/ -/ BloTAM/ 算法/ 计算/ 模块/ 温度/ ,/ 并/ 将/ 模块/ 温度/ 的/ 最高值/ 作为/ 芯片/ 温度/ Tchip/ ;/ 设/ 改进/ 失败/ 次数/ 为/ 0/ ,/ 改进/ 失败/ 次数/ 阈值/ 为/ 30.3/ ./ 随机/ 从/ 12/ 个/ 核中/ 找出/ 一个/ 核/ ,/ 试探/ 该核/ 的/ 其他/ 3/ 种/ 布局/ ,/ 采用/ HotSpot/ 或/ PS/ -/ BloTAM/ 算法/ 计算/ Tchip/ ,/ 取/ Tchip/ 最低/ 的/ 布局/ 作为/ 优选/ 方案/ ./ 4/ ./ 如果/ 试探/ 该/ 核后/ 所/ 获得/ 的/ Tchip/ 确有/ 降低/ ,/ 则/ 将/ 改进/ 失败/ 次数/ 置/ 0/ ,/ 返回/ 步骤/ 3/ ;/ 否则/ 将/ 改进/ 失败/ 次数/ 增/ 1.5/ ./ 如果/ 改进/ 失败/ 次数/ 小于/ 改进/ 失败/ 次数/ 阈值/ ,/ 返回/ 步骤/ 3.6/ ./ 输出/ 最佳/ 的/ 布图/ 规划/ 方案/ 、/ 芯片/ 温度/ Tchip/ 和/ 优化/ 时间/ ./ 其中/ 在/ 模拟/ 褪火/ 算法/ 的/ 步骤/ 2/ 和/ 步骤/ 3/ ,/ 对于/ 一种/ 布局/ 方案/ ,/ 需要/ 针对/ 100/ 种/ 工作/ 模式/ 所/ 产生/ 的/ 100/ 个/ 功耗/ 密度/ 分布图/ (/ powermap/ )/ ,/ 先/ 使用/ HotSpot/ 或/ PS/ -/ BloTAM/ 算法/ 计算/ 每种/ 工作/ 模式/ 的/ Tchip/ ,/ 再/ 从/ 100/ 种/ 工作/ 模式/ 所/ 产生/ 的/ Tchip/ 中/ 统计/ 出/ 最大值/ 、/ 作为/ 这个/ 布局/ 方案/ 所/ 对应/ 的/ 芯片/ 温度/ Tchip/ ./ 如表/ 7/ 所示/ ,/ 本文/ 进行/ 了/ 5/ 次/ 模拟/ 褪火/ ,/ 用于/ 搜寻/ 最佳/ 的/ 布局/ 结果/ ,/ 将/ 芯片/ 峰值/ 温度/ Tchip/ 降得/ 尽可能/ 地低/ ./ 从/ Tchip/ 的/ 优化/ 效果/ 可以/ 看出/ ,/ 与/ HotSpot/ 模拟/ 算法/ 相比/ ,/ 本文/ 的/ PS/ -/ BloTAM/ 算法/ 取得/ 近似/ 的/ 优化/ 效果/ ,/ 绝对误差/ 小于/ 0.49/ ,/ 相对误差/ 小于/ 1.24/ %/ ,/ 这/ 表明/ 该/ 算法/ 具有/ 足够/ 高/ 的/ 模拟/ 精度/ ./ 从/ 运行/ 时间/ 可以/ 看出/ ,/ 与/ HotSpot/ 模拟/ 算法/ 相比/ ,/ 本文/ 的/ PS/ -/ BloTAM/ 算法/ 取得/ 了/ 7.28/ ~/ 11.93/ 倍/ 的/ 加速/ ,/ 这/ 表明/ 本文/ 算法/ 提供/ 了/ 近/ 10/ 倍/ 的/ 加速/ ,/ 加速/ 效果/ 令人满意/ ./ 因此/ ,/ PS/ -/ BloTAM/ 算法/ 能够/ 满足/ 温敏布/ 图/ 规划/ 对/ 结构/ 级/ 温度/ 分析/ 精度/ 与/ 速度/ 的/ 要求/ ./ 褪火/ 序号/ 123455/ 结论/ 本文/ 提出/ 了/ 一种/ 预/ 采样/ 的/ 结构/ 级/ 热/ 分析/ 算法/ PS/ -/ BloTAM/ ,/ 使用/ HotSpot/ 为/ 采样/ 模块/ 阵列/ 建立/ 相关/ 热阻/ 库/ ,/ 根据/ 布图/ 规划/ 方案/ 中/ 模块/ 的/ 大小/ 与/ 位置/ 完成/ 采样/ 空间/ 热阻/ 矩阵/ 犛向/ 实用/ 热阻/ 矩阵/ 犚/ 的/ 映射/ ,/ 进而/ 使用/ 犚/ 来/ 快速/ 计算/ 出/ 不同/ 工作/ 模式/ 下/ 的/ 模块/ 温度/ ./ 与/ HotSpot/ 对比/ ,/ 本文/ 所/ 提出/ 的/ PS/ -/ BloTAM/ 算法/ 既/ 满足/ 热/ 分析/ 中/ 所/ 要求/ 的/ 精度/ 要求/ ,/ 也/ 能/ 提供/ 令人满意/ 的/ 算法/ 加速/ 效果/ ,/ PS/ -/ BloTAM/ 算法/ 耗时/ 的/ 加速/ 比/ Xtotal/ 最大/ 为/ 43/ 倍/ ;/ 而/ 与/ BloTAM/ 算法/ 相比/ ,/ PS/ -/ BloTAM/ 由于/ 是/ 采用/ 预/ 提取/ 方法/ ,/ 然后/ 将/ 根据/ 方案/ 中/ 模块/ 的/ 大小/ 与/ 位置/ 直接/ 使用/ 犛/ 计算/ 出/ 模块/ 之间/ 的/ 相关/ 热阻/ 矩阵/ 犚/ ,/ 芯片/ 布局/ 变化/ 后/ 无需/ 再次/ 提取/ 芯片/ 模块/ 的/ 相关/ 热阻/ ,/ 在/ 建模/ 时间/ 上/ Page11PS/ -/ BloTAM/ 获得/ 7.66/ 倍/ 加速/ 效果/ ,/ 在/ 算法/ 整体/ 运行/ 时间/ 上/ PS/ -/ BloTAM/ 可以/ 获得/ 3.4/ 倍/ 加速/ 效果/ ./ 从/ 温敏布/ 图/ 规划/ 的/ 应用/ 实验/ 可以/ 看出/ :/ 在/ 小于/ 1.24/ %/ 误差/ 的/ 前提/ 下/ ,/ PS/ -/ BloTAM/ 算法/ 可以/ 为布图/ 规划/ 设计方案/ 快速/ 计算/ 出/ 模块/ 温度/ ,/ 获得/ 近/ 10/ 倍/ 的/ 加速/ 效果/ ./ 

