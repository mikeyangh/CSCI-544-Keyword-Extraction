Page1/ 基于/ 相点/ 分析/ 的/ 移动/ 数据/ 索引/ 技术/ 叶小平/ 1/ )/ 郭欢/ 2/ )/ 汤庸/ 1/ )/ 陈罗武/ 2/ )/ 周畅/ 1/ )/ 廖/ 青云/ 1/ )/ 1/ )/ (/ 华南/ 师范大学/ 计算机/ 学院/ 广州/ 510631/ )/ 2/ )/ (/ 中山大学/ 计算机科学/ 系/ 广州/ 510275/ )/ 摘要/ 一维/ (/ 有效/ )/ 时间/ 区间/ (/ VT/ )/ 和/ 二维/ 最小/ 限定/ 矩形/ (/ MBR/ )/ 是/ 移动/ 数据/ 基本/ 的/ 时空/ 单元/ ,/ 两者/ 性质/ 不同/ ,/ 应用/ 中/ 也/ 有/ 差异/ ./ 现有/ 移动/ 数据/ 查询/ 通常/ 是/ 将/ 相关/ 数据/ 转换/ 为/ 高出/ 原/ 空间/ 情形/ “/ 一维/ ”/ 的/ 空间数据/ ,/ 其/ 优势/ 在于/ 可/ 充分/ 使用/ 现有/ 空间数据/ 索引/ 技术/ ./ 文中/ 主要/ 贡献/ 在于/ 研究/ 基于/ 过去/ 和/ 当前/ 时间/ 查询/ 的/ 移动/ 数据/ 索引/ 模式/ ,/ 该/ 索引/ 模式/ 能够/ 表征/ 时空/ 各自/ 特性/ 并/ 实现/ 时空/ 模块/ 的/ 整合/ 配置/ ./ 首先/ ,/ 文中/ 将/ 有效/ 时间/ 期间/ VT/ 和/ 空间/ MBR/ 统一/ 描述/ 为/ 广义/ 区间/ ,/ 并/ 通过/ 区间/ 数将/ 其/ 转化/ 为/ 平面/ 上/ 相点/ ,/ 实现/ 了/ 数学/ 上/ 的/ 整合/ 表述/ 与/ 刻画/ ;/ 同时/ ,/ 根据/ VT/ 和/ MBR/ 各自/ 反映/ 的/ 时空/ 特征/ ,/ 引入/ 了/ 基于/ 时态/ 拟序/ 的/ 时间/ 相点/ 线序/ 划分/ 和/ 基于/ 扩展/ KD/ -/ tree/ 的/ 空间/ 相点/ MBR/ 分类/ ,/ 建立/ 时空/ 相点/ 分析/ 基本/ 框架/ ;/ 然后/ ,/ 在/ 相点/ 分析/ 框架/ 内/ 实现/ 时间/ 和/ 空间/ 索引/ 模块/ 组建/ 和/ 整合/ 配置/ ,/ 实现/ 了/ 移动/ 数据/ 索引/ 模式/ Modim/ ;/ 另外/ ,/ 研究/ 了/ 基于/ 当前/ 与/ 现在/ 时间/ Modim/ 数据/ 查询/ 以及/ 索引/ 增量/ 式/ 更新/ 算法/ ,/ 并/ 建立/ 相点/ 编码方案/ 以/ 实现/ 最终/ 查询/ 结果/ 的/ 重构/ ;/ 最后/ ,/ 设计/ 相关/ 仿真/ 以/ 实现/ 对/ Modim/ 性能/ 评估/ ,/ 与/ 现有/ 相关/ 工作/ 进行/ 基本/ 比较/ 的/ 结果表明/ 文中/ 工作/ 是/ 可行/ 的/ 和/ 有效/ 的/ ./ 关键词/ 广义/ 区间/ 和/ 相点/ 分析/ ;/ 移动/ 数据/ 索引/ ;/ 基于/ 过去/ 与/ 当前/ 数据/ 查询/ ;/ 增量/ 式/ 动态/ 更新/ 1/ 引言/ 时空/ 数据/ 具有/ 时间/ 和/ 空间/ 双重/ 特征/ ./ 时间/ 特征/ 通常/ 通过/ 时间/ 期间/ (/ period/ )/ 例如/ 有效/ 时间/ 期间/ VT/ 描述/ ;/ 空间/ 特征/ 通过/ 近似/ 基本/ 图形/ 例如/ 最小/ 限定/ 矩形/ MBR/ 描述/ ./ VT/ 和/ MBR/ 分别/ 是/ 欧氏/ 空间/ 中一/ 维和/ 二维/ 基本/ 图形/ ,/ 两者/ 差别/ 较大/ ,/ 在/ 实际/ 应用/ 中/ ,/ 数据/ 实体/ 的/ 时间/ 和/ 空间/ 特征/ 信息/ 相互/ 关联/ ,/ 需要/ 统一/ 刻画/ 和/ 管理/ ./ 自/ 20/ 世纪/ 90/ 年代/ 初期/ 以来/ ,/ 作为/ 一种/ 处理/ 时空/ 对象/ 的/ 新型/ 数据管理/ 技术/ ,/ 时空/ 数据库/ (/ STDB/ )/ 迅速/ 兴起/ 发展/ ./ 进入/ 21/ 世纪/ ,/ 随着/ 车载/ 定位/ 设备/ 、/ PDA/ 和/ 移动电话/ 等/ 无线/ 移动/ 定位/ 技术设备/ 快速/ 发展/ ,/ 移动/ 数据管理/ 的/ 应用/ 需求/ 越来越/ 迫切/ ,/ 涉及/ 领域/ 也/ 越来越/ 广阔/ ,/ 相关/ 研究/ 已经/ 成为/ STDB/ 研究/ 热点/ ,/ 并/ 形成/ 对/ 移动/ 数据/ (/ 位置/ 信息/ 随/ 时间/ 变化/ 的/ 空间/ 实体/ )/ 进行/ 管理/ 的/ 专门/ 研究/ 领域/ —/ —/ —/ 移动/ 对象/ 数据库/ (/ MovingObjectsDatabases/ ,/ MOD/ )/ ./ 移动/ 点/ 对象/ 空间/ 特征/ 由/ 空间/ 点来/ 描述/ ,/ 随着/ 时间/ 变化/ 相应/ 空间/ 点/ 在/ 三维/ 时空/ (/ x/ ,/ y/ ,/ t/ )/ 中/ 形成/ 的/ 曲线/ 称为/ 轨迹/ 线/ (/ trajectory/ )/ ./ 为了/ 便于/ 进行/ 数据库/ 处理/ ,/ 人们/ 提出/ 采样/ 处理/ 和/ 函数/ 描述/ 两种/ 方式/ 来/ 处理/ 轨迹/ 线/ [/ 1/ ]/ ./ MOD/ 需要/ 管理/ 庞大/ 移动/ 数据/ ,/ 为了/ 减小/ 搜索/ 空间/ ,/ 提高/ 查询/ 性能/ ,/ 研究/ 和/ 开发/ 有效/ 的/ 数据/ 索引/ 已/ 成为/ MOD/ 数据/ 查询/ 的/ 基本/ 途径/ ./ 从/ 时态/ 角度/ 考虑/ ,/ 现有/ 索引/ 可/ 分为/ 基于/ 过去/ 、/ 基于/ 过去/ 和/ 当前/ 以及/ 基于/ 当前/ 和/ 未来/ 位置/ 信息/ 的/ 三种/ 类型/ ./ 基于/ 过去/ 时间/ 索引/ 主要/ 有/ 基于/ 传统/ 空间/ 索引/ [/ 2/ -/ 4/ ]/ 、/ 基于/ 多/ 版本/ 结构/ 与/ 重叠/ 技术/ 索引/ [/ 2/ ,/ 5/ -/ 7/ ]/ 及/ 面向/ 移动/ 对象/ 轨迹/ 查询/ 等/ [/ 4/ ,/ 8/ -/ 9/ ]/ ;/ 基于/ 过去/ 和/ 当前/ 时间/ 索引/ 主要/ 有/ 2/ +/ 3R/ -/ tree/ 等/ [/ 10/ -/ 14/ ]/ ;/ 基于/ 当前/ 和/ 未来/ 时间/ 的/ 预言性/ 索引/ 主要/ 有/ PMR/ -/ Quadtree/ 等/ [/ 15/ -/ 18/ ]/ ./ 上述/ 工作/ 具有/ 以下/ 特征/ :/ (/ 1/ )/ 基于/ 过去/ 时间/ 数据/ 索引/ 是/ MOD/ 数据/ 查询/ 的/ 基础/ ./ 对于/ 数据库/ 而言/ ,/ 其/ 管理/ 对象/ 主要/ 是/ 已经/ 成为事实/ 的/ 数据/ 实体/ 即/ 历史数据/ ,/ 它们/ 既/ 是/ 数据库/ 海量/ 数据/ 的/ 主体/ ,/ 也/ 是/ 确定/ 当前/ 数据/ 和/ 预测/ 未来/ 数据/ 的/ 基础/ ./ 在/ 实际/ 应用/ 中/ ,/ 通常/ 会/ 出现/ 大量/ 的/ 和/ 经常性/ 的/ 对/ 移动/ 对象/ 在/ 过去/ 某/ 时间/ 位置/ 的/ 回溯/ 查询/ ./ (/ 2/ )/ 数据库/ 本质/ 上/ 不能/ 存储/ 和/ 管理/ 基于/ 当前/ 和/ 未来/ 时间/ 的/ 数据/ ,/ 在/ 实际/ 过程/ 中/ ,/ 只能/ 根据/ 过去/ 信息/ 对/ 其/ 进行/ “/ 判断/ ”/ 或/ “/ 预测/ ”/ ,/ 其/ 结果/ 具有/ 某种/ 不确定性/ ./ 在/ 基于/ 过去/ 和/ 当前/ 时间/ 索引/ 中/ ,/ 主要/ 使用/ 过去/ 信息/ 对/ “/ 当前/ ”/ 进行/ 判断/ ;/ 在/ 基于/ 当前/ 和/ 未来/ 索引/ 中/ ,/ 则/ 将/ 移动/ 对象/ 位置/ 表示/ 为/ 时间/ 函数/ 进行/ 未来/ 预测/ ,/ 这/ 两种/ 模式/ 本质/ 上/ 应该/ 不/ 属于/ 数据/ 索引/ 范畴/ ,/ 但/ 移动/ 数据/ 频繁/ 更新/ 和/ 应用/ 需求/ 会/ 导致/ 在/ “/ 过去/ ”/ 、/ “/ 当前/ ”/ 和/ “/ 未来/ ”/ 之间/ 进行/ 常规性/ 转换/ 、/ 参照/ 与/ 整合/ ,/ 实际/ 应用/ 的/ 推动/ 和/ 理论/ 研究/ 的/ 挑战/ 使得/ 它们/ 成为/ 当前/ MOD/ 领域/ 的/ 热点/ ./ (/ 3/ )/ 与/ 时空/ 数据/ 索引/ 类似/ ,/ 现有/ 移动/ 数据/ 索引/ 工作/ 主要/ 是从/ 空间/ 角度/ 出发/ ,/ 将/ 时间/ 看做/ 新增/ 空间/ 维/ ,/ 将/ 移动/ 数据/ 看做/ 是/ 比/ 原有/ 空间/ 更高/ 一维/ 的/ 纯/ 空间数据/ ./ 由此/ 可/ 充分/ 借鉴/ 空间数据/ 索引/ 技术/ 特别/ 是/ R/ 树/ 技术/ ,/ 有效/ 展开/ 相关/ 研究/ 与/ 应用/ 开发/ ./ 但/ 如何/ 更好/ 体现/ 一维/ VT/ 和/ 二维/ MBR/ 之间/ 的/ 差异/ 还有/ 待/ 探讨/ ./ 例如/ ,/ 时间/ 总是/ 一维/ 的/ ,/ 而/ 空间/ 是/ 多维/ 的/ ;/ 时间/ 维是/ 单向/ 而/ 空间/ 维是/ 双向/ ;/ 时间/ 维有/ 有效/ 时间/ 维和/ 事务/ 时间/ 维之分/ ,/ 而/ 所有/ 空间/ 维/ 却/ 无/ 本质/ 上/ 差异/ 等/ ./ “/ 二维/ ”/ 空间/ 和/ “/ 一维/ ”/ 时间/ 组成/ 的/ 三维/ “/ 时空/ ”/ 和/ 三维/ “/ 纯/ ”/ 空间/ 不/ 完全/ 等同/ ,/ 这种/ 本体/ 差异/ 会/ 影响/ 相关/ 索引/ 技术/ 的/ 查询/ 效率/ ,/ 有/ 必要/ 将/ 移动/ 对象/ 的/ 时间/ 和/ 空间/ 属性/ 进行/ 区别/ 处理/ 和/ 有效/ 整合/ ./ 本文/ 主要/ 贡献/ 是从/ 时间/ 和/ 空间信息/ 配置/ 整合/ 出发/ ,/ 研究/ 一种/ 基于/ 过去/ 时间/ 的/ 移动/ 对象/ 数据/ 索引/ 技术/ ,/ 该/ 索引/ 辅助/ 以/ 适当/ 机制/ ,/ 还/ 可/ 实现/ 基于/ 过去/ 和/ 当前/ 时间/ 的/ 移动/ 数据/ 查询/ ./ 首先/ ,/ 本文/ 建立/ 时空/ 信息/ 统一/ 分析/ 处理/ 的/ 数学/ 框架/ ,/ 即将/ 时间/ 区间/ VT/ 和/ 空间/ MBR/ 分别/ 看做/ 一阶/ 和/ 二阶/ “/ 广义/ ”/ 区间/ ,/ 并/ 通过/ 一阶/ 和/ 二阶/ 区间/ 数/ (/ 一阶/ 区间/ 数/ 的/ 有序/ 对/ )/ 将/ 其/ 转换/ 为/ 相/ 平面/ 上/ 的/ 一阶/ 和/ 二阶/ 相点/ ,/ 从而/ 将/ 数据/ 时间/ 和/ 空间信息/ 进行/ “/ 统一/ ”/ 描述/ 和/ 分析/ ;/ 其次/ ,/ 建立/ 基于/ 相点/ 分析/ 的/ 索引/ 实现/ 机制/ ,/ 即/ 通过/ 引入/ 时态/ 拟序/ 建立/ 时间/ 相点/ 划分/ ,/ 通过/ 基于/ MBR/ 分类/ 的/ 扩展/ KD/ -/ Tree/ 完成/ 空间/ 相点/ 划分/ ;/ 第三/ ,/ 按照/ “/ 先/ 时间/ 再/ 空间/ ”/ 方式/ ,/ 通过/ 较为/ 精细/ 的/ 方式/ 研究/ 了/ 基于/ “/ 区间/ 套接/ ”/ 的/ Page3/ 时间/ 和/ 空间/ 索引/ 配置/ 机制/ ,/ 建立/ 一种/ 基于/ 时空/ 整合/ 的/ 移动/ 对象/ 过去/ 和/ 当前/ 数据/ 索引/ 模型/ Modim/ ,/ 讨论/ 了/ 基于/ Modim/ 的/ 数据/ 查询/ 和/ 更新/ 算法/ ,/ 同时/ 研究/ 基于/ 相点/ 编码/ 的/ 最终/ 查询/ 结果/ 重构/ ;/ 最后/ ,/ 通过/ 采用/ 适当/ 数据/ 进行/ 基本/ 仿真/ ,/ 完成/ 了/ Modim/ 与/ 现有/ 相关/ 工作/ 的/ 比较/ 评估/ ,/ 其中/ 包括/ 查询/ 仿真/ 、/ 更新/ 仿真/ 以及/ 索引/ 空间/ 耗费/ 和/ 整合/ 机制/ 仿真/ ,/ 实验/ 结果表明/ 了/ 本文/ 工作/ 的/ 可行性/ 和/ 有效性/ ./ 本文/ 研究/ 实际上/ 涉及/ 时态/ 信息/ 和/ 应用/ 场景/ 的/ 有效/ 整合/ ./ 由于/ 一般/ 时态/ 数据管理/ 通常/ 都/ 需要/ 有效/ 处理/ 数据/ 时态/ 信息/ 和/ 应用/ 过程/ 本身/ 确定/ 的/ 场景/ 信息/ ,/ 例如/ 时态/ 对象/ 数据/ 中/ 的/ 时态/ 和/ 面向对象/ 场景/ 、/ 时态/ XML/ 数据/ 中/ 的/ 时态/ 和/ 文档/ 结构/ 场景/ 、/ 时态/ 数据/ 空间/ 中/ 的/ 时间/ 和/ 多种/ 共存/ 的/ 实际/ 场景/ 等/ ,/ 因此/ ,/ 本文/ 工作/ 对/ 此类/ 问题/ 的/ 讨论/ 也/ 可/ 提供/ 借鉴/ ./ 本文/ 第/ 2/ 节/ 讨论/ 时间/ 相点/ 与/ 空间/ 相点/ 分析/ ,/ 为/ 时空/ 分析/ 提供/ 基本/ 数学/ 框架/ ;/ 第/ 3/ 节/ 研究/ 移动/ 对象/ 数据/ 区间/ 树型/ 模型/ Modam/ 和/ 基于/ Modam/ 的/ 索引/ 模式/ Modim/ ;/ 第/ 4/ 节/ 讨论/ 基于/ Modim/ 数据/ 操作/ (/ 数据/ 查询/ 和/ 索引/ 更新/ )/ ;/ 第/ 5/ 节/ 完成/ 实验/ 仿真/ 和/ 基本/ 评估/ ./ 2/ 相点/ 分析/ 在/ 二维/ 欧氏/ 空间/ 中/ ,/ 坐标轴/ 上/ 区间/ [/ x1/ ,/ x2/ ]/ (/ [/ y1/ ,/ y2/ ]/ )/ 称为/ 一阶/ 区间/ ;/ 两条/ 相邻/ 边/ 分别/ 平行/ 于/ 坐标轴/ 的/ 矩形/ 称为/ 二阶/ 区间/ ./ 设/ (/ x1/ ,/ y1/ )/ 和/ (/ x2/ ,/ y2/ )/ 分别/ 为/ 二阶/ 区间/ w/ 的/ 左下/ 和/ 右/ 上/ 顶点/ 坐标/ ,/ 则/ 可/ 将/ w/ 看做/ 两个/ 一阶/ 区间/ [/ x1/ ,/ y1/ ]/ 和/ [/ x2/ ,/ y2/ ]/ 的/ 有序/ 对/ ,/ 即/ w/ =/ (/ [/ x1/ ,/ y1/ ]/ ,/ [/ x2/ ,/ y2/ ]/ )/ 并/ 简记/ 为/ w/ =/ [/ x1/ ,/ y1/ ;/ x2/ ,/ y2/ ]/ ./ 一阶/ 和/ 二阶/ 区间/ 统称/ 为/ 广义/ 区间/ (/ generalintervals/ )/ ,/ 其/ 意义/ 在于/ 可/ 将/ 其/ 转换/ 为/ “/ 区间/ 数/ ”/ 和/ “/ 区间/ 数对/ ”/ ./ 定义/ 1/ (/ 一阶/ 区间/ 数/ 和/ 一阶相点/ )/ ./ 一阶/ 区间/ w/ =/ [/ x1/ ,/ x2/ ]/ 对应/ 的/ 一阶相点/ R1/ (/ w/ )/ =/ R1/ (/ [/ x1/ ,/ x2/ ]/ )/ =/ (/ x1/ ,/ x2/ )/ =/ (/ Sta/ (/ w/ )/ ,/ End/ (/ w/ )/ )/ ,/ Sta/ (/ w/ )/ =/ x1/ ,/ End/ (/ w/ )/ =/ x2/ 分别/ 称为/ 相点/ R1/ (/ w/ )/ 的/ 水平/ 与/ 竖直/ 坐标/ ./ 一阶/ 区间/ w/ =/ [/ x1/ ,/ x2/ ]/ 对应/ 的/ 一阶/ 区间/ 数/ Fnum/ (/ w/ )/ =/ Lnum/ (/ [/ x1/ ,/ x2/ ]/ )/ =/ f1/ (/ x1/ ,/ x2/ )/ ×/ 10/ α/ +/ f2/ (/ x1/ ,/ x2/ )/ ,/ 其中/ ,/ f1/ 和/ f2/ 分别/ 是/ 关于/ [/ x1/ ,/ x2/ ]/ 的/ 1/ -/ 1/ 映射函数/ ,/ α/ 是/ 所/ 涉及/ 一阶/ 区间/ 端点/ 数/ 最大者/ 的/ 数位/ ./ 一阶/ 区间/ 、/ 一阶/ 区间/ 数/ 和/ 一阶相点/ 相互/ 唯一/ 确定/ ./ 定义/ 2/ (/ 二阶/ 区间/ 数/ 和/ 二阶/ 相点/ )/ ./ 二阶/ 区间/ w/ =/ [/ x1/ ,/ y1/ ;/ x2/ ,/ y2/ ]/ 对应/ 的/ 两个/ 二阶/ 区间/ 数/ (/ secondintervalnumber/ )/ S1/ (/ [/ x1/ ,/ y1/ ;/ x2/ ,/ y2/ ]/ )/ 和/ S2/ (/ [/ x1/ ,/ y1/ ;/ x2/ ,/ y2/ ]/ )/ 如下/ :/ S1/ (/ w/ )/ =/ S1/ (/ [/ x1/ ,/ y1/ ;/ x2/ ,/ y2/ ]/ )/ S2/ (/ w/ )/ =/ S2/ (/ [/ x1/ ,/ y1/ ;/ x2/ ,/ y2/ ]/ )/ 其中/ ,/ s11/ ,/ s12/ 和/ s21/ ,/ s22/ 分别/ 是/ x1/ ,/ y1/ ,/ x2/ ,/ y2/ 的/ 函数/ ,/ α/ 是/ 所/ 涉及/ 二阶/ 区间/ 端点/ 数/ 最大者/ 的/ 数位/ ./ 二阶/ 区间/ w/ =/ [/ x1/ ,/ y1/ ;/ x2/ ,/ y2/ ]/ 对应/ 的/ 二阶/ 相点/ 定义/ 为/ 两个/ 二阶/ 区间/ 数/ 的/ 有序/ 对/ :/ 理论/ 研究/ 和/ 实际/ 应用/ 中/ 的/ 数据/ 对象/ 通常/ 会/ 涉及/ 到/ 一阶/ 区间/ 之间/ 或/ 二阶/ 区间/ 之间/ 的/ 相交/ 、/ 相/ 离/ 、/ 包含/ 等/ 各种/ 关系/ ,/ 其中/ 比较/ 基本/ 的/ 是/ 包含/ 关系/ ,/ 在/ 一定/ 意义/ 下/ ,/ 其它/ 关系/ 可/ 转化/ 为/ 包含/ 关系/ ./ 以下/ 以相点/ 分析/ 为/ 基础/ ,/ 研究/ 区间/ 之间/ 的/ 包含/ 关系/ ./ 2.1/ 一阶相点/ 分析/ 设/ 数据/ u/ 的/ 区间/ 属性/ Intval/ (/ u/ )/ 为/ 一阶/ 区间/ [/ Sta/ (/ Intval/ (/ u/ )/ )/ ,/ End/ (/ Intval/ (/ u/ )/ )/ ,/ 其中/ ,/ Sta/ (/ Intval/ (/ u/ )/ )/ / End/ (/ Intval/ (/ u/ )/ )/ ./ 所/ 考虑/ 区间/ 集合/ 记/ 为/ Γ/ ./ 在/ 不/ 引起/ 混淆/ 时/ ,/ 本文/ 除/ 特别/ 说明/ ,/ Γ/ 可/ 同时/ 表示/ 数据/ 点/ 集合/ 与/ 相应/ 区间/ 集合/ ,/ u/ 可/ 同时/ 表示/ 数据/ 点/ 与/ 相应/ 区间/ Intval/ (/ u/ )/ ,/ 并且/ 简记/ Intval/ (/ u/ )/ =/ [/ Sta/ (/ u/ )/ ,/ End/ (/ u/ )/ )/ ./ 2.1/ ./ 1/ 相点/ 关系/ 间/ 关系/ :/ 定义/ 3/ (/ 区间/ 关系/ )/ ./ 在/ Γ/ 上/ 引入/ 如下/ 两个/ 区/ (/ 1/ )/ u/ / v/ / Intval/ (/ u/ )/ / Intval/ (/ v/ )/ ,/ 其中/ u/ ,/ v/ ∈/ (/ 2/ )/ u/ / ~/ v/ / (/ Sta/ (/ u/ )/ </ Sta/ (/ v/ )/ )/ ∨/ (/ Sta/ (/ u/ )/ =/ Sta/ (/ v/ )/ ∧/ End/ (/ u/ )/ / End/ (/ v/ )/ )/ ,/ 其中/ u/ ,/ v/ ∈/ Γ/ ,/ u/ =/ Intval/ (/ u/ )/ =/ [/ Sta/ (/ u/ )/ ,/ End/ (/ u/ )/ )/ ,/ v/ =/ Intval/ (/ v/ )/ =/ [/ Sta/ (/ v/ )/ ,/ End/ (/ v/ )/ )/ ./ 可验证/ ,/ “/ / ”/ 和/ “/ / ~/ ”/ 是/ Γ/ 上/ 满足/ 自反性/ 和/ 传递性/ 的/ 拟序/ 关系/ (/ pseudo/ -/ order/ )/ ,/ 本文/ 同时/ 以/ Γ/ 表示/ 相应/ 拟序集/ ./ 当拟序/ 是/ 线序/ 时/ ,/ 则/ 称/ 其/ 为/ 拟/ 线序/ (/ pseudo/ -/ linearorder/ )/ ,/ 简称/ 线序/ (/ linearorder/ )/ ./ 定义/ 4/ (/ 拟序/ 矩阵/ )/ ./ 设/ u/ =/ Intval/ (/ u/ )/ =/ [/ Sta/ (/ u/ )/ ,/ End/ (/ u/ )/ )/ =/ [/ i/ ,/ j/ )/ ,/ i1/ / i/ / in/ ,/ j1/ / j/ / jm/ ,/ i1/ =/ min/ Γ/ {/ Sta/ (/ u/ )/ }/ ,/ in/ =/ max/ Γ/ {/ Sta/ (/ u/ )/ }/ ,/ j1/ =/ min/ Γ/ {/ End/ (/ u/ )/ }/ ,/ jm/ =/ max/ Γ/ {/ End/ (/ u/ )/ }/ ./ uij/ =/ [/ i/ ,/ j/ )/ =/ ij/ 看作/ 在/ i/ -/ j/ 平面/ 上/ 的/ 点/ ,/ 由/ Γ/ 在/ i/ -/ j/ 平面/ 确定/ 的/ 如图/ 1/ 所示/ (/ 反上/ 三/ Γ/ ;/ 若/ / (/ u/ / v/ ∨/ v/ / u/ )/ ,/ 则/ 称/ u/ ,/ v/ 互不/ 相容/ Page4/ 角/ )/ 矩阵/ 称为/ 基于/ Γ/ 的/ 拟序/ 矩阵/ 并/ 记为/ TOM/ (/ Γ/ )/ ./ 对/ ui0j0/ ∈/ TOM/ (/ Γ/ )/ ,/ 通过/ ui0j0/ 将/ TOM/ (/ Γ/ )/ 分为/ 4/ 个/ 区域/ :/ UL/ (/ ui0j0/ )/ =/ {/ vij/ |/ i/ / i0/ ,/ j0/ / j/ }/ ,/ UR/ (/ ui0j0/ )/ =/ {/ vij/ |/ i0/ / i/ ,/ j0/ / j/ }/ ,/ DL/ (/ ui0j0/ )/ =/ {/ vij/ |/ i/ / i0/ ,/ j/ / j0/ }/ 和/ DR/ (/ ui0j0/ )/ =/ {/ vij/ |/ i0/ / i/ ,/ j/ / j0/ }/ ./ 上述/ 各式/ 中/ 如果/ 仅/ “/ </ ”/ 成立/ ,/ 则/ 称/ 相应/ 区域/ 为开/ 区域/ 并/ 分别/ 记为/ OUL/ ,/ OUR/ ,/ ODL/ 和/ ODR/ ./ 易知/ ,/ TOM/ (/ Γ/ )/ =/ UL/ ∪/ ODL/ ∪/ DR/ ∪/ OUR/ ./ 同时/ ,/ 给定/ 一个/ 线序/ 分支/ L/ ,/ 可以/ 将/ 时态/ 矩阵/ 划分/ 为/ 4/ 个闭/ 区域/ UL/ (/ L/ )/ =/ UL/ (/ maxL/ )/ ,/ UR/ (/ L/ )/ =/ ∪/ vi/ ∈/ LUR/ (/ vi/ )/ ,/ DL/ (/ L/ )/ =/ ∪/ vi/ ∈/ LDL/ (/ vi/ )/ 和/ DR/ (/ L/ )/ =/ DR/ (/ minL/ )/ ,/ 相应/ 的/ 开/ 区域/ 可/ 类似/ 定义/ ./ 定理/ 1/ (/ 拟序/ 矩阵/ 性质/ )/ ./ / u0/ ,/ v0/ ∈/ TOM/ (/ Γ/ )/ ,/ (/ 1/ )/ u0/ / v0/ / v0/ ∈/ UL/ (/ u0/ )/ ;/ (/ 2/ )/ v0/ / u0/ / v0/ ∈/ DR/ (/ u0/ )/ ;/ (/ 3/ )/ u0/ ,/ v0/ 不相容/ / v0/ ∈/ OUR/ (/ u0/ )/ ∨/ v0/ ∈/ ODL/ (/ u0/ )/ ./ 证明/ ./ (/ 1/ )/ 设/ u0/ =/ [/ i0/ ,/ j0/ )/ ,/ v0/ =/ [/ k0/ ,/ l0/ )/ ,/ u0/ / v0/ / k0/ / i0/ ,/ j0/ / l0/ / v0/ ∈/ UL/ (/ u0/ )/ ./ 同理可证/ (/ 2/ )/ 和/ (/ 3/ )/ ./ 2.1/ ./ 2/ 线序/ 划分/ 定义/ 5/ (/ 线序/ 划分/ )/ ./ 设/ L/ / Γ/ ,/ L/ 为/ Γ/ 中/ 线序/ 分支/ (/ LinearOrderBranch/ ,/ LOB/ )/ / / u/ ,/ v/ ∈/ L/ ,/ u/ / v/ ∨/ v/ / u/ ∨/ v/ =/ u/ ./ L/ 中/ 最大/ 、/ 最小/ 元/ 分别/ 记为/ maxL/ 和/ minL/ ./ 设/ Δ/ 是/ LOB/ 组成/ 的/ 集合/ 且/ ∪/ Li/ ∈/ Δ/ 称/ Δ/ 为/ Γ/ 的/ 一个/ 线序/ 划分/ (/ LinearOrderPartition/ ,/ LOP/ )/ ./ {/ u1/ ,/ u2/ ,/ …/ ,/ un/ }/ ./ 令/ i/ =/ 1/ ,/ j/ =/ 1/ ;/ 算法/ 1/ ./ LOP/ 并行算法/ —/ —/ —/ 下/ 优先/ 算法/ ./ 输入/ :/ 时间/ 区间/ 集合/ Γ/ =/ {/ u1/ ,/ u2/ ,/ …/ ,/ un/ }/ 输出/ :/ 线性/ 划分/ LOP1/ ./ 将/ Γ/ 所有/ 元素/ 按照/ “/ / ~/ ”/ 排序/ ,/ 不妨/ 设/ 排序/ 后/ 就/ 为/ Γ/ =/ 2/ ./ LOBi/ =/ / ,/ 添加/ uj/ 到/ LOBi/ 队列/ 末尾/ ,/ j/ =/ j/ +/ 1/ ;/ 3/ ./ 若/ j/ >/ |/ Γ/ |/ ,/ 算法/ 结束/ ;/ 否则/ ,/ k/ =/ 1/ ,/ Tail/ (/ LOBi/ )/ 表示/ 3.1/ ./ 若/ k/ </ i/ 且/ uj/ / Tail/ (/ LOBi/ )/ ,/ 添加/ uj/ 到/ LOBi/ 队列/ 3.2/ ./ 若/ k/ >/ i/ ,/ 则/ i/ =/ i/ +/ 1/ ,/ 转步/ 2/ ;/ 3.3/ ./ 若/ uj/ / Tail/ (/ LOBi/ )/ ,/ i/ =/ i/ +/ 1/ ,/ 转步/ 3.1/ ;/ 4/ ./ 分别/ 输出/ 各/ LOBm/ (/ 1/ / m/ / i/ )/ 中/ 所有/ 元素/ ,/ 这些/ 元素/ 组成/ 一个/ 线性/ 分支/ ,/ 且/ 所有/ LOBm/ (/ 1/ / m/ / i/ )/ 组成/ Γ/ 上/ 的/ 一/ LOBi/ 队尾/ 元素/ :/ 末尾/ ,/ j/ =/ j/ +/ 1/ ,/ 转步/ 3/ ;/ 个/ LOP/ ./ Γ/ 上/ 可/ 有/ 多个/ LOP/ ,/ 从/ 时态/ 查询/ 效率/ 而言/ ,/ 需/ 考虑/ “/ 最小/ ”/ 的/ LOP/ (/ 见/ 4.1/ ./ 2/ 节中/ 算法/ 2/ 后/ 的/ 分析/ )/ ./ 定义/ 6/ (/ “/ 最小/ ”/ 线序/ 划分/ )/ ./ 设/ Δ/ 0/ 是/ Γ/ 上/ LOP/ ,/ Δ/ 为/ Γ/ 上任/ 一/ LOP/ ,/ Δ/ 0/ 是/ Γ/ 上/ “/ 最小/ ”/ LOP/ (/ Least/ -/ LOP/ )/ / |/ Δ/ 0/ |/ / |/ Δ/ |/ ,/ 其中/ ,/ |/ Δ/ |/ 表示/ Δ/ 的/ 基数/ ./ 定理/ 2/ (/ 最小/ LOP/ )/ ./ 由/ 算法/ 1/ 得到/ LOP/ 具有/ 最小/ 性/ ./ 证明/ ./ 设/ Δ/ 0/ =/ 〈/ L1/ ,/ L2/ ,/ …/ ,/ Ln/ 〉/ 由/ 算法/ 1/ 获得/ ,/ 其中/ Li/ 具/ 计算/ 顺序/ ./ 以下/ 证明/ / Li/ ,/ Lk/ ∈/ Δ/ 0/ ,/ (/ i/ ≠/ k/ ,/ 不妨/ 设/ i/ </ k/ )/ Tail/ (/ Li/ )/ 和/ Tail/ (/ Lk/ )/ 互不/ 相容/ ./ 反设/ Tail/ (/ Li/ )/ 与/ Tail/ (/ Lk/ )/ 相容/ ./ (/ 1/ )/ 若/ Tail/ (/ Li/ )/ / Tail/ (/ Lk/ )/ ,/ 由/ 定理/ 1/ 可知/ Tail/ (/ Li/ )/ ∈/ DR/ (/ Tail/ (/ Lk/ )/ )/ ,/ 故/ Tail/ (/ Lk/ )/ / ~/ Tail/ (/ Li/ )/ ,/ 由/ 算法/ 1/ 搜索/ 顺序/ Tail/ (/ Lk/ )/ 先于/ Tail/ (/ Li/ )/ 被/ 搜索/ 到/ ,/ 且/ 搜索/ 到/ Tail/ (/ Li/ )/ 时/ ,/ Tail/ (/ Li/ )/ / Tail/ (/ Lk/ )/ ,/ 所以/ Tail/ (/ Li/ )/ 会/ 被/ 添加/ 到/ Lk/ 尾端/ ,/ 这/ 与/ Tail/ (/ Lk/ )/ 矛盾/ ./ (/ 2/ )/ 若/ Tail/ (/ Lk/ )/ / Tail/ (/ Li/ )/ ,/ 则/ Tail/ (/ Lk/ )/ ∈/ DR/ (/ Tail/ (/ Li/ )/ )/ ,/ 由/ 算法/ 1/ 搜索/ 顺序/ 可知/ Tail/ (/ Li/ )/ 必定/ 先于/ Tail/ (/ Lk/ )/ 被/ 搜索/ 到/ ,/ 且/ 搜索/ 到/ Tail/ (/ Lk/ )/ 时/ ,/ Tail/ (/ Lk/ )/ / Tail/ (/ Li/ )/ ,/ 故/ Tail/ (/ Lk/ )/ 会/ 被/ 添加/ 到/ Li/ 的/ 尾端/ ,/ 这/ 与/ Tail/ (/ Li/ )/ 矛盾/ ./ 由此可知/ 至少/ 存在/ |/ Δ/ 0/ |/ 个/ 不相容/ 元素/ Tail/ (/ Lj/ )/ (/ 1/ / j/ / n/ )/ ,/ 其中/ 每个/ 元素/ 在/ 任何/ 一种/ LOP/ 构造方法/ 中/ 都/ 会/ 确定/ 一个/ LOB/ ,/ 因此/ 任何/ LOP/ 至少/ 有/ |/ Δ/ 0/ |/ 个/ LOB/ ./ 算法/ 1/ 的/ 时间/ 复杂度/ 分析/ 如下/ :/ 步/ 1/ 排序/ 复杂度/ 为/ O/ (/ nlogn/ )/ ;/ 步/ 2/ 和步/ 3/ 为/ 常数/ 复杂度/ ;/ 步/ 4/ 需/ 扫描/ n/ 个/ 时间/ 区间/ ,/ 对于/ 当前/ 扫描/ 的/ 时间/ 区间/ Pj/ ,/ LOP/ 中/ 至多/ 有/ j/ 个/ 线性/ 分支/ ,/ 每次/ 循环/ 最多/ 需/ 执行/ j/ 次/ 判定/ 操作/ ,/ 因此/ 步/ 4/ 复杂度/ 为/ 1/ +/ 2/ +/ …/ +/ n/ =/ n/ (/ n/ +/ 1/ )/ // 2/ =/ O/ (/ n2/ )/ ;/ 步/ 5/ 复杂度/ 为/ O/ (/ n/ )/ ./ 所以/ 算法/ 1/ 时间/ 复杂度/ 为/ O/ (/ n2/ )/ ./ 算法/ 1/ 则/ 给出/ 一个/ 并行/ 获取/ LOP/ 所有/ LOB/ 的/ 下/ 优先/ 算法/ ,/ 即/ 一次/ 扫描/ 可/ 获取/ 所有/ LOB/ ./ 在/ 并行算法/ 中/ ,/ 当/ 时间/ 区间/ VT/ 可/ 并入/ 多个/ LOB/ 时/ ,/ VT/ 将/ 被/ 并入/ 第一个/ 包含/ 其/ 的/ LOB/ ./ 定理/ 3/ ./ 设由/ 算法/ 1/ 得到/ LOP/ 〈/ L1/ ,/ L2/ ,/ …/ ,/ Ln/ 〉/ (/ Li/ 具/ 计算/ 顺序/ )/ ,/ 则/ / Li/ (/ 1/ / i/ </ n/ -/ 1/ )/ ,/ Li/ +/ 1/ 位于/ OUR/ (/ Li/ )/ ./ 证明/ ./ (/ 1/ )/ 假设/ Li/ +/ 1/ ∈/ ODL/ (/ Li/ )/ ,/ 若/ Sta/ (/ max/ (/ Li/ +/ 1/ )/ )/ </ Sta/ (/ max/ (/ Li/ )/ )/ ,/ 由/ 算法/ 1/ 中/ LOB/ 的/ 生成/ 顺序/ 可知/ ,/ Li/ +/ 1/ 一定/ 先于/ Li/ 生成/ ;/ 若/ Sta/ (/ max/ (/ Li/ +/ 1/ )/ )/ / Page5Sta/ (/ max/ (/ Li/ )/ )/ ,/ 设/ Li/ =/ {/ u1/ ,/ …/ ,/ un/ }/ 且/ ui/ 是/ Li/ 中/ 最后/ 一个/ 位于/ UL/ (/ Li/ +/ 1/ )/ 区域/ 内/ 的/ 元素/ ,/ 则/ {/ u1/ ,/ …/ ,/ ui/ ,/ Li/ +/ 1/ }/ 构成/ 一个/ 线序/ 分支/ ./ 与/ 已知/ 矛盾/ ./ (/ 2/ )/ 假设/ Li/ +/ 1/ ∈/ UL/ (/ Li/ )/ ,/ 则/ 有/ min/ (/ Li/ +/ 1/ )/ ∈/ UL/ (/ max/ (/ Li/ )/ )/ ,/ 即/ max/ (/ Li/ )/ / min/ (/ Li/ +/ 1/ )/ ,/ 此时/ {/ Li/ +/ 1/ ,/ Li/ }/ 可以/ 归并/ 为/ 一个/ LOB/ ,/ 与/ 已知/ 矛盾/ ./ (/ 3/ )/ 假设/ Li/ +/ 1/ ∈/ DR/ (/ Li/ )/ ,/ 则/ 有/ max/ (/ Li/ +/ 1/ )/ ∈/ DR/ (/ min/ (/ Li/ )/ )/ ,/ 即/ max/ (/ Li/ +/ 1/ )/ / min/ (/ Li/ )/ ,/ 此时/ {/ Li/ ,/ Li/ +/ 1/ }/ 可以/ 归并/ 为/ 一个/ LOB/ ,/ 与/ 已知/ 矛盾/ ./ 由/ 上述/ (/ 1/ )/ (/ 2/ )/ (/ 3/ )/ 可知/ Li/ +/ 1/ 位于/ 区域/ OUR/ (/ Li/ )/ 内/ ./ 推论/ 1/ ./ 在/ 定理/ 3/ 条件/ 下/ ,/ {/ Sta/ (/ maxLi/ )/ |/ 1/ / i/ / n/ }/ 和/ {/ End/ (/ minLi/ )/ |/ 1/ / i/ / n/ }/ 均/ 按/ 升序/ 排列/ ./ 2.2/ 二阶/ 相点/ 分析/ 对/ 二阶/ 区间/ w/ =/ [/ x1/ ,/ y1/ ;/ x2/ ,/ y2/ ]/ ,/ 在/ 定义/ 2/ 中取/ s11/ =/ x2/ ,/ s12/ =/ x/ =/ x2/ -/ x1/ ,/ s21/ =/ y2/ ,/ s22/ =/ y/ =/ y2/ -/ y1/ ,/ 此时/ R2/ (/ w/ )/ =/ R2/ (/ x1/ ,/ y1/ ;/ x2/ ,/ y2/ )/ =/ (/ x2/ ×/ 10/ α/ +/ x/ ,/ y2/ ×/ 10/ α/ +/ y/ )/ =/ (/ x2x/ ,/ y2y/ )/ ./ 二阶/ 相点/ 所在/ 平面/ 称为/ 空间/ 相/ 平面/ (/ PhasePlane/ ,/ PPL/ )/ ./ PPL/ 中/ 水平/ 轴/ 和/ 垂直轴/ 分别/ 称为/ 0/ -/ 相轴/ 和/ 1/ -/ 相轴/ ./ 二阶/ 区间/ 到/ 二阶/ 相点/ 存在/ 1/ -/ 1/ 对应/ ,/ 以下/ 将/ 不/ 区分/ ./ 2.2/ ./ 1/ 二阶/ 相点/ 性质/ 定理/ 4/ (/ 二阶/ 区间/ 相互/ 关系/ 的/ 相点/ 描述/ )/ ./ 设/ R2/ (/ i/ )/ =/ [/ x1/ (/ i/ )/ ,/ y1/ (/ i/ )/ ;/ x2/ (/ i/ )/ ,/ y2/ (/ i/ )/ ]/ ,/ R2/ (/ j/ )/ =/ [/ x1/ (/ j/ )/ ,/ y1/ (/ j/ )/ ;/ x2/ (/ j/ )/ ,/ y2/ (/ j/ )/ ]/ ,/ x/ (/ i/ )/ =/ x2/ (/ i/ )/ -/ x1/ (/ i/ )/ ,/ y/ (/ i/ )/ =/ y2/ (/ i/ )/ -/ y1/ (/ i/ )/ ,/ x/ (/ j/ )/ =/ x2/ (/ j/ )/ -/ x1/ (/ j/ )/ ,/ y/ (/ j/ )/ =/ y2/ (/ j/ )/ -/ y1/ (/ j/ )/ ./ 若/ R2/ (/ i/ )/ / R2/ (/ j/ )/ ,/ 则/ x2/ (/ j/ )/ x/ (/ j/ )/ / x2/ (/ i/ )/ x/ (/ i/ )/ ∧/ y2/ (/ j/ )/ y/ (/ j/ )/ / y2/ (/ i/ )/ y/ (/ i/ )/ ./ 证明/ ./ 设/ α/ 为/ 坐标值/ 中/ 最大/ 位数/ ,/ 由/ 矩形/ 的/ 包含/ 关系/ 可知/ x/ (/ i/ )/ / x/ (/ j/ )/ ∧/ y/ (/ i/ )/ / y/ (/ j/ )/ ,/ 从而/ 有/ R2/ (/ i/ )/ / R2/ (/ j/ )/ / x2/ (/ j/ )/ / x1/ (/ i/ )/ ∧/ y2/ (/ j/ )/ / y1/ (/ i/ )/ / (/ x2/ (/ j/ )/ ×/ 10/ α/ +/ x/ (/ j/ )/ / x2/ (/ i/ )/ ×/ 10/ α/ +/ x/ (/ i/ )/ )/ ∧/ (/ y2/ (/ j/ )/ ×/ 10/ α/ +/ y/ (/ j/ )/ / y2/ (/ i/ )/ ×/ 10/ α/ +/ y/ (/ i/ )/ )/ / x2/ (/ j/ )/ x/ (/ j/ )/ / x2/ (/ i/ )/ x/ (/ i/ )/ ∧/ y2/ (/ j/ )/ y/ (/ j/ )/ / y2/ (/ i/ )/ y/ (/ i/ )/ ./ 推论/ 2/ ./ x2/ (/ j/ )/ x/ (/ j/ )/ </ x2/ (/ i/ )/ x/ (/ i/ )/ ∨/ y2/ (/ j/ )/ y/ (/ j/ )/ </ y2/ (/ i/ )/ y/ (/ i/ )/ / / (/ R2/ (/ i/ )/ / R2/ (/ j/ )/ )/ ./ 2.2/ ./ 2MBR/ 划分/ 对/ 给定/ 空间/ 点/ P/ (/ x2x/ ,/ y2y/ )/ ,/ 以点/ P/ 的/ x/ 坐标/ 为/ 基点/ 按/ y/ 轴/ 方向/ 可/ 将相/ 平面/ 划分/ 为/ Px/ (/ I/ )/ (/ 横标/ 大于/ x/ 的/ 区域/ )/ 和/ Px/ (/ II/ )/ (/ 横标/ 小于/ 等于/ x/ 的/ 区域/ )/ ;/ 同时/ ,/ 以点/ P/ 的/ y/ 坐标/ 为/ 基点/ 按/ x/ 轴/ 方向/ 可/ 将相/ 平面/ 划分/ 为/ Py/ (/ I/ )/ (/ 纵标/ 大于/ y/ 的/ 区域/ )/ 和/ Py/ (/ II/ )/ (/ 纵标/ 小于/ 等于/ y/ 的/ 区域/ )/ ,/ 如图/ 2/ 所示/ ./ 由/ 定理/ 4/ ,/ 给定/ 空间/ 相点/ Q/ ,/ 包含/ Q/ 的/ 相点/ P/ 只能/ 位于/ Qx/ (/ II/ )/ 或/ Qy/ (/ II/ )/ ,/ 而/ 被/ Q/ 包含/ 的/ 相点/ P/ 只能/ 位于/ Qx/ (/ I/ )/ 或/ Qy/ (/ I/ )/ ./ 设/ {/ M0/ ,/ M1/ ,/ M2/ ,/ …/ ,/ Mn/ }/ 是/ 所/ 考虑/ 轨迹/ 线段/ 的/ MBR/ 集合/ 对应/ 的/ 空间/ 相点/ 集合/ ./ 由/ M0/ 以/ x/ 坐标/ 为/ 基点/ 对/ 相/ 平面/ 进行/ 划分/ ,/ 其中/ 每个/ 划分/ 区域/ 对应/ M0/ 一个/ 子/ 结点/ 位置/ (/ M0x/ (/ II/ )/ 为/ 左子/ 结点/ ,/ M0x/ (/ I/ )/ 为/ 右子/ 结点/ )/ ./ 考察/ M1/ 位于/ M0/ 划分/ 位置/ 情况/ ,/ 例如/ ,/ M1/ ∈/ M0x/ (/ II/ )/ ,/ 将/ M1/ 置于/ M0/ 左子/ 结点/ ,/ 然后/ M1/ 以/ y/ 坐标/ 为/ 基点/ 将/ 区域/ M0x/ (/ II/ )/ 进行/ 划分/ ,/ 然后/ 依次/ 考虑/ 其它/ 相点/ 情形/ ./ 此时/ ,/ 每层/ 结点/ 划分/ 基点/ 对应/ 的/ 坐标轴/ 定义/ 为/ levelimod2/ ,/ 其中/ ,/ leveli/ 表示/ 结点/ 所在/ 层次/ ,/ 且/ 0/ 为/ x/ 轴/ ,/ 1/ 为/ y/ 轴/ ./ 这里/ 假设/ 树根/ 结点/ 所在/ 层为/ 0/ 层/ ,/ 其子/ 结点/ 为/ 第/ 1/ 层/ ,/ 依此类推/ 等/ ,/ 相关/ 情形/ 如图/ 3/ 所示/ ./ 按照/ 文献/ [/ 19/ ]/ 基本/ 思想/ ,/ 由/ 上述/ 循环/ 可/ 建立/ 相/ 平面/ 上/ 的/ KD/ -/ Tree/ (/ KD/ -/ TreebasedonPhasePlane/ ,/ PPKDT/ )/ ./ PPKDT/ 根/ 结点/ 和/ 内/ 结点/ 都/ 至多/ 具有/ 两个/ 子/ 结点/ ,/ 每个/ 子/ 结点/ Mc/ 都/ 位于/ 其父/ 结点/ Mf/ 相应/ 划分/ 区域/ 内/ ,/ 如果/ Mc/ ∈/ Mf/ (/ II/ )/ (/ Mf/ (/ I/ )/ )/ ,/ 则/ 称/ Mc/ 为/ Mf/ 的/ 左/ (/ 右/ )/ 子/ 结点/ ,/ 由/ 左/ (/ 右/ )/ 子/ 结点/ Mc/ 开始/ 的/ 子树/ 称为/ Mf/ 的/ 左/ (/ 右/ )/ 子树/ ./ Page62/ ./ 3/ 一阶相点/ 编码/ 定义/ 7/ (/ 区间/ 树型/ 结构/ )/ ./ 如果/ 一个/ 数据文件/ D/ 能够/ 表示/ 为树型/ 结构/ 且/ 满足/ 下述/ 条件/ ,/ 则/ 称/ 该/ 数据文件/ D/ 具有/ 区间/ 树型/ 结构/ ,/ 简称/ 为/ 区间/ 树/ 并/ 记为/ IntD/ ./ (/ 1/ )/ 结点/ 入边/ 标记/ 为/ 该/ 数据/ 结点/ 的/ 某个/ 基于/ 一阶/ 区间/ 的/ 属性/ 标签/ ./ (/ 2/ )/ 结点/ u/ 是/ v/ 的/ 父/ 结点/ ,/ 则/ u/ ,/ v/ 满足/ 定义/ 3/ 中拟序/ 关系/ :/ v/ / u/ ,/ 即/ Intval/ (/ u/ )/ / Intval/ (/ v/ )/ ./ 定义/ 8/ (/ 相点/ 编码/ ,/ Intcode/ (/ u/ )/ )/ ./ u/ ∈/ IntD/ ,/ 相点/ 编码/ Intcode/ (/ u/ )/ =/ 〈/ Code/ (/ u/ )/ ,/ Erf/ (/ u/ )/ 〉/ ,/ 其中/ (/ 1/ )/ Code/ (/ u/ )/ 为/ u/ 在/ f1/ (/ End/ (/ u/ )/ ,/ Sta/ (/ u/ )/ )/ =/ End/ (/ u/ )/ -/ Sta/ (/ u/ )/ ,/ f2/ (/ End/ (/ u/ )/ ,/ Sta/ (/ u/ )/ )/ =/ Sta/ (/ u/ )/ 时/ 的/ 一阶/ 区间/ 数/ ,/ 即/ Code/ (/ u/ )/ =/ (/ End/ (/ u/ )/ -/ Sta/ (/ u/ )/ )/ ×/ 10/ α/ +/ Sta/ (/ u/ )/ ,/ α/ 是/ IntD/ 所有/ 区间/ 跨度/ 最大者/ 数位/ ./ (/ 2/ )/ Erf/ (/ u/ )/ 为/ u/ 扩展/ 先序/ 编码/ ,/ 即/ 常规/ 先序/ 遍历/ 过程/ 中/ ,/ 在/ 保证/ 严格/ 单调/ 增加/ 情况/ 下/ 结点/ 编号/ 非/ 连续/ 取值/ ,/ 其/ 作用/ 是/ 为/ 数据/ 更新/ (/ 插入/ )/ 预留/ 必要/ 编码/ 空间/ ./ 设/ Dproc/ (/ u/ )/ 表示/ 在/ 扩展/ 先序/ 遍历/ 中/ u/ 的/ 直接/ 前驱/ ;/ j/ -/ Dproc/ (/ u/ )/ 表示/ u/ 在/ IntD/ 中/ 第/ j/ 层上/ 在/ 扩展/ 先序/ 编号/ 最小/ 的/ 前驱/ (/ depth/ (/ u/ )/ </ j/ )/ ;/ j/ -/ ancestor/ (/ u/ )/ 表示/ u/ 在/ IntD/ 第/ j/ 层/ 的/ 祖先/ 结点/ ./ 由/ 定义/ 8/ 可知/ ,/ 结点/ 区间/ 属性/ 和/ 相应/ 相点/ 编码/ 相互/ 确定/ ,/ 即/ 由/ 结点/ 的/ 区间/ 属性/ (/ 相点/ 编码/ )/ 可以/ 推知/ 该/ 结点/ 的/ 相点/ 编码/ (/ 区间/ 属性/ )/ ./ u/ =/ j/ -/ Dproc/ (/ v/ )/ ∧/ depth/ (/ v/ )/ </ j/ ;/ u/ =/ j/ -/ ancestor/ (/ v/ )/ ∧/ depth/ (/ u/ )/ =/ (/ depth/ (/ v/ )/ +/ 1/ )/ ;/ / depth/ (/ v/ )/ =/ depth/ (/ u/ )/ ∧/ u/ =/ Dproc/ (/ v/ )/ ./ 定理/ 5/ (/ 相点/ 编码/ 性质/ )/ ./ (/ 1/ )/ u/ =/ j/ -/ ancestor/ (/ v/ )/ / (/ Code/ (/ v/ )/ / Code/ (/ u/ )/ )/ ∧/ (/ 2/ )/ u/ =/ father/ (/ v/ )/ / (/ Code/ (/ v/ )/ / Code/ (/ u/ )/ )/ ∧/ (/ 3/ )/ u/ =/ proceeding/ -/ sibling/ (/ v/ )/ 左/ 兄弟/ 结点/ 证明/ ./ (/ 1/ )/ 必要性/ ./ 若/ u/ 是/ v/ 的/ j/ -/ 祖先/ 结点/ ,/ 则/ 由/ 定义/ 7/ 中/ “/ (/ 2/ )/ ”/ 可知/ Intval/ (/ v/ )/ / Intval/ (/ u/ )/ ,/ 故/ Code/ (/ v/ )/ / Code/ (/ u/ )/ ,/ 再/ 由于/ v/ 在/ 第/ j/ 层/ 只能/ 有/ 一个/ 祖先/ 结点/ 可知/ u/ =/ j/ -/ Dproc/ (/ v/ )/ 充分性/ ./ 由/ Code/ (/ v/ )/ / Code/ (/ u/ )/ ,/ 则/ u/ 不能/ 是/ v/ 的/ 后裔/ 结点/ ;/ 由/ depth/ (/ v/ )/ </ j/ ,/ 有/ 两种/ 情形/ :/ ①/ v/ 在/ 以/ u/ 为根/ 的/ 子/ 树上/ ,/ 因此/ u/ 是/ v/ 的/ 祖先/ 结点/ ./ ②/ u/ 位于/ v/ 所/ 处子/ 树/ 左上方/ ,/ u/ 所在/ 第/ j/ 层/ 存在/ 先序/ 编号/ 小于/ u/ 编号/ 的/ 结点/ u0/ 作为/ v/ 的/ 前驱/ ,/ 这/ 与/ u/ =/ j/ -/ Dproc/ (/ v/ )/ 矛盾/ ./ (/ 2/ )/ 是/ “/ (/ 1/ )/ ”/ 的/ 推论/ ,/ (/ 3/ )/ 由/ 扩展/ 先序/ 概念/ 即可/ 得到/ ./ 定理/ 5/ 表明/ ,/ 相点/ 编码/ 同时/ 确定/ 了/ IntD/ 数据/ 结点/ 区间/ 属性/ 和/ 结构/ 信息/ ,/ 可/ 提升/ 数据/ 重构/ 效率/ ./ 对于/ 上述/ 区间/ 树/ ,/ 常规/ 情形/ 下/ 需/ 同时/ 建立/ 和/ 存储/ 结点/ 语义/ 标签/ 、/ 区间/ 属性/ 标签/ 和/ 用于/ 查询/ 结果/ 重构/ 的/ 编码/ 信息/ ,/ 对于/ IntD/ 中/ 结点/ ,/ 只/ 需/ 相应/ 语义/ 标签/ 和/ 相点/ 编码/ ,/ 进行/ 数据/ 更新/ 时/ ,/ 原有/ 相点/ 编码方案/ 也/ 可不/ 需/ 经常/ 改变/ ./ 3/ 移动/ 数据/ 索引/ 模型/ 移动/ 对象/ 与/ 其它/ 时空/ 对象/ 相比/ ,/ 位置/ 总在/ 连续/ 发生/ 改变/ ,/ 如果/ 限于/ 一般/ 时空/ 模型/ 框架/ ,/ 需/ 周期性/ 刷新/ 以/ 保证/ 位置/ 信息/ 随时/ 有效/ ./ 这种/ 频繁/ 变动/ 会/ 带来/ 巨大/ 更新/ 开销/ ./ Sistla/ [/ 20/ ]/ 和/ 美国/ 伊立诺/ 依/ 大学/ 芝加哥/ 分校/ 的/ Wolfson/ 等/ [/ 21/ ]/ 针对/ 移动/ 对象/ 数据/ 特性/ 分别/ 提出/ 相应/ 数据模型/ ./ 本文/ 建立/ 一种/ 基于/ 相点/ 分析/ 的/ 移动/ 对象/ 数据模型/ ./ 3.1/ 数据模型/ 为/ 有效/ 存储/ 和/ 管理/ 移动/ 对象/ 轨迹/ ,/ 通常/ 预设/ 一系列/ 时间/ 点/ t1/ ,/ t2/ ,/ …/ ,/ tn/ 对/ 移动/ 对象/ 位置/ 和/ 速度/ 等/ 基本/ 信息/ 进行/ 取样/ ./ 设/ 移动/ 对象/ 对应/ 于/ 上述/ 时间/ 点/ 的/ 位置/ 为/ P1/ ,/ P2/ ,/ …/ ,/ Pn/ ,/ 将/ Pi/ 和/ Pi/ +/ 1/ 通过/ 直线/ 段/ 相联/ ,/ 由此/ 得到/ 的/ 折线/ 段/ (/ polyline/ )/ 称为/ 移动/ 对象/ 轨迹/ (/ 线/ )/ ,/ 连接/ 相邻/ 两/ 取样/ 点/ 的/ 直线/ 段/ 称为/ 轨迹/ 线段/ (/ linesegment/ ,/ 线段/ )/ ;/ 轨迹/ 线段/ 端点/ 称为/ 更新/ 点/ ,/ 更新/ 点/ P/ 对应/ 的/ 采样/ 时间/ 称为/ 更新/ 时间/ ,/ 记为/ UT/ (/ P/ )/ ./ 为了/ 简化/ 表述/ 层次/ ,/ 本文/ 中/ 研究/ 的/ 数据/ 单元/ 是/ 轨迹/ 线/ ,/ 基元/ 是/ 轨迹/ 线段/ ./ 设/ 轨迹/ 线段/ u/ 以/ P1/ (/ x1/ ,/ y1/ )/ ,/ P2/ (/ x2/ ,/ y2/ )/ 为/ 始点/ 和/ 终点/ ,/ u/ 的/ 有效/ 时间/ 为/ VT/ (/ u/ )/ =/ [/ VTs/ (/ u/ )/ ,/ VTe/ (/ u/ )/ )/ ,/ 其中/ VTs/ (/ u/ )/ =/ UT/ (/ P1/ )/ ∧/ VTe/ (/ u/ )/ =/ UT/ (/ P2/ )/ ,/ u/ 的/ 最小/ 限定/ 矩形/ 为/ MBR/ (/ u/ )/ =/ [/ x1/ ,/ y1/ ;/ x2/ ,/ y2/ ]/ ./ 轨迹/ 线/ Trj/ 有效/ 时间/ 是/ Trj/ 的/ 生命周期/ ,/ Trj/ 最小/ 限定/ 矩形/ 为/ 其/ 所有/ 轨迹/ 线段/ MBR/ 的/ MBR/ ,/ 分别/ 记为/ VT/ (/ Trj/ )/ =/ [/ VTs/ (/ Trj/ )/ ,/ VTe/ (/ Trj/ )/ )/ 和/ MBR/ (/ Trj/ )/ ./ 轨迹/ 线/ Trj/ 和/ 轨迹/ 线段/ u/ 都/ 分别/ 具有/ 相应/ 的/ 一阶/ 区间/ 属性/ (/ VT/ )/ 和/ 二阶/ 区间/ 属性/ (/ MBR/ )/ ./ 轨迹/ 线/ 和/ 其/ 包含/ 轨迹/ 线段/ 满足/ 如下/ 时间/ 约束/ :/ (/ 1/ )/ 设/ ui/ -/ 1/ 和/ ui/ 是/ 两/ 相邻/ 轨迹/ 线段/ ,/ 则/ VTe/ (/ ui/ -/ 1/ )/ / (/ 2/ )/ 轨迹/ 线/ Trj/ 有效/ 时间/ 是/ 其/ 所有/ 轨/ 线段/ 有效/ 当/ VTe/ (/ Trj/ )/ =/ Now/ ,/ 则/ 称/ Trj/ “/ 在线/ ”/ (/ online/ )/ ,/ VTs/ (/ ui/ )/ ./ 时间/ 并集/ :/ ∪/ ui/ ∈/ TrjVT/ (/ ui/ )/ / VT/ (/ Trj/ )/ ./ Page7/ 否则/ 称/ Trj/ “/ 离线/ ”/ (/ offline/ )/ ,/ 分别/ 记为/ Trjon/ 和/ Trjoff/ ,/ Trjon/ 表示/ 相关/ 对象/ “/ 截止/ ”/ 当前/ 时间/ (/ CurrentTime/ ,/ CT/ )/ 仍然/ 运动/ ./ 本文/ 将/ Now/ 绑定/ 于/ CT/ ./ 定义/ 9/ (/ 最新更新/ 点/ 与/ 最新/ 轨迹/ 线段/ )/ ./ 设/ P/ 是/ 轨迹/ 线/ Trj/ 的/ 更新/ 点/ ,/ 如果/ UT/ (/ P/ )/ / Now/ ∧/ (/ / UT/ ≠/ UT/ (/ P/ )/ ,/ UT/ / UT/ (/ P/ )/ / Now/ )/ ,/ 则/ 称/ P/ 是/ Trj/ 的/ 最新更新/ 点/ ,/ 记为/ PLAST/ ./ 以/ PLAST/ 为/ 终点/ 的/ 轨迹/ 线段/ 称为/ 最新/ 轨迹/ 线段/ (/ lastlinesegment/ )/ 并/ 记为/ u/ =/ Slat/ (/ Trj/ )/ 定义/ 10/ (/ 移动/ 对象/ 查询/ 数据模型/ ,/ Modam/ )/ ./ 移动/ 对象/ 数据模型/ Modam/ =/ (/ MT/ (/ Modam/ )/ ,/ AU/ (/ Modam/ )/ )/ :/ 结点/ ;/ (/ 1/ )/ MT/ (/ Modam/ )/ 是/ 具/ 四层/ 结点/ 的/ 树型/ 结构/ :/ ①/ 根/ 结点/ 层/ ./ 第/ 1/ 层中/ 结点/ 为/ 唯一/ (/ 虚拟/ )/ 根/ ②/ 移动/ 对象/ 层/ ./ 第/ 2/ 层中/ 结点/ 为/ 各个/ 移动/ 对象/ 结点/ O/ ;/ ③/ 轨迹/ 线层/ ./ 第/ 3/ 层中/ 结点/ 为/ 各个/ 移动/ 对象/ 轨迹/ 线/ 结点/ Trj/ ;/ ④/ 轨迹/ 线段/ 层/ ./ 第/ 4/ 层中/ 结点/ 为/ 各个/ 轨迹/ 线中/ 的/ 线段/ 结点/ S/ ./ (/ 2/ )/ AU/ (/ Modam/ )/ ./ 当前/ 时间/ 位置/ 信息/ 辅助/ 处理/ 机制/ ./ 设/ PNEXT/ 为/ Trj/ 最新更新/ 点/ PLAST/ 之后/ 下/ 一个/ 更新/ 点/ ,/ 有/ UT/ (/ PLAST/ )/ / Now/ / UT/ (/ PNEXT/ )/ ,/ 由于/ 已知/ PLAST/ 信息/ ,/ 而/ PNEXT/ 未知/ ./ 如果/ 需/ 查询/ 当前/ 时间/ 信息/ ,/ 需要/ “/ 预测性/ ”/ 构建/ PNEXT/ ./ 本文/ 采用/ 线性/ 函数/ 方法/ [/ 1/ ]/ 构建/ PNEXT/ 以/ 得到/ 当前/ 时间/ 位置/ 的/ (/ 不/ 确定/ )/ 信息/ ./ 待/ 当前/ 时间/ Now/ 超过/ UT/ (/ PNEXT/ )/ 后/ ,/ 再/ 将/ 实际/ 更新/ 点/ PNEXT/ 正式/ 存入/ 数据库/ ./ 由/ 历史/ 信息/ 判断/ 当前/ 时间/ 位置/ 主要/ 是/ 将/ 文献/ [/ 1/ ]/ 中/ 方法/ 进行/ 适当/ 技术/ 扩充/ ,/ 同时/ ,/ 由于/ AU/ (/ Modam/ )/ 本质/ 上/ 并/ 不/ 属于/ 数据/ 索引/ 范畴/ ,/ 本文/ 对此/ 不/ 进行/ 具体/ 讨论/ ./ 为/ 简化/ 叙述/ ,/ 本文/ 以下/ 提及/ 的/ Modam/ 是/ 指/ MT/ (/ Modam/ )/ ./ 对/ Modam/ 中/ 结点/ u/ 赋予/ 有效/ 时间/ VT/ (/ u/ )/ (/ 一阶/ 区间/ )/ 属性/ 和/ 最小/ 限定/ 矩形/ MBR/ (/ u/ )/ (/ 二阶/ 区间/ )/ 属性/ ,/ 其中/ ,/ 非叶/ 结点/ 的/ 有效/ 时间/ 为/ 其/ 所有/ 子/ 结点/ 有效/ 时间/ 的/ 并/ 集/ ,/ MBR/ (/ u/ )/ 为/ 包含/ 其/ 所有/ 子/ 结点/ MBR/ 的/ MBR/ ./ 由/ 定义/ 10/ ,/ Modam/ 是/ 一种/ 树型/ 结构/ ,/ Modam/ 中/ 结点/ n/ (/ j/ )/ =/ (/ ID/ (/ n/ (/ j/ )/ )/ ,/ VT/ (/ n/ (/ j/ )/ )/ ,/ MBR/ (/ n/ (/ j/ )/ )/ ,/ Stru/ (/ n/ (/ j/ )/ )/ )/ =/ (/ ID/ (/ n/ (/ j/ )/ )/ ,/ Intcode/ (/ n/ (/ j/ )/ )/ ,/ MBR/ (/ n/ (/ j/ )/ )/ )/ ,/ 其中/ ,/ ID/ (/ n/ (/ j/ )/ )/ 和/ Stru/ (/ n/ (/ j/ )/ )/ 分别/ 表示/ 结点/ 的/ ID/ 和/ 结构/ 信息/ ,/ Intcode/ (/ n/ (/ j/ )/ )/ 表示/ 基于/ VT/ (/ n/ (/ j/ )/ )/ 和/ Stru/ (/ n/ (/ j/ )/ )/ 的/ 相点/ 编码/ ,/ 而/ 1/ / j/ / 4/ 分别/ 表示/ 相应/ 结点/ 为根/ 、/ 移动/ 对象/ 、/ 轨迹/ 线/ 和/ 轨迹/ 线段/ ./ 不失/ 一般性/ ,/ 本文/ 以下/ 设/ Modam/ 仅由根/ 、/ 轨迹/ 线/ 和/ 线段/ 三层/ 组成/ ./ 例/ 1/ ./ 设/ 移动/ 对象/ 生成/ 10/ 条/ 轨迹/ 线/ ,/ 对应/ 的/ Modam/ 如表/ 1/ 所示/ ,/ Sij/ 表示/ 第/ i/ 条/ 轨迹/ 线/ 的/ 第/ j/ 个/ 线段/ ./ 表/ 1/ 移动/ 对象/ 轨迹/ 线/ NoVT/ (/ x1x2/ ,/ y1y2/ )/ TcodeNoVT/ (/ x1x2/ ,/ y1y2/ )/ TcodeTrj1/ [/ 1/ ,/ 15/ ]/ [/ 16/ ,/ 17/ ]/ 1401/ ,/ 0010Trj6/ [/ 2/ ,/ 12/ ]/ (/ 23/ ,/ 24/ )/ 1002/ ,/ 0220S11S12S13Trj2/ [/ 1/ ,/ 12/ ]/ (/ 26/ ,/ 38/ )/ 1101/ ,/ 0050Trj7/ [/ 1/ ,/ 12/ ]/ (/ 38/ ,/ 28/ )/ 1102/ ,/ 0260S21S22S23Trj3/ [/ 1/ ,/ 12/ ]/ (/ 27/ ,/ 36/ )/ 1101/ ,/ 0090Trj8/ [/ 1/ ,/ 12/ ]/ (/ 38/ ,/ 37/ )/ 1101/ ,/ 0300S31S32S33Trj4/ [/ 1/ ,/ 12/ ]/ (/ 16/ ,/ 26/ )/ 1101/ ,/ 0140Trj9/ [/ 1/ ,/ 12/ ]/ (/ 16/ ,/ 38/ )/ 1101/ ,/ 0340S41S42S43Trj5/ [/ 1/ ,/ 15/ ]/ (/ 28/ ,/ 17/ )/ 1401/ ,/ 0180Trj10/ [/ 1/ ,/ 15/ ]/ (/ 36/ ,/ 18/ )/ 1401/ ,/ 0380S51S52S533/ ./ 2/ 索引/ 模型/ 定义/ 11/ (/ 移动/ 数据/ 索引/ 模型/ ,/ Modim/ )/ ./ 移动/ S61S62S63S71S72S73S81S82S83S91S92S93S101S102S103/ 数据/ 索引/ 模型/ Modim/ =/ (/ root/ ,/ Tindex/ ,/ Sindex/ ,/ Integ/ )/ 为/ 时态/ 索引/ 和/ 空间/ 索引/ 整合/ 的/ 四层/ 树型/ 结/ Page8/ 构/ ,/ 首层/ 结点/ 为根/ 结点/ root/ ;/ Tindex/ 是/ 针对/ Modam/ 中/ 第二/ 、/ 三层/ 的/ 时态/ 索引/ 模块/ ,/ Sindex/ 是/ 空间/ 索引/ 模块/ ,/ Integ/ 是/ 时态/ 和/ 空间/ 索引/ 模块/ 的/ 整合/ 机制/ ./ (/ 1/ )/ 时态/ 索引/ 模块/ ./ Tindex/ =/ (/ NT/ ,/ VT/ ,/ ET/ )/ 为/ 基于/ 一阶相点/ 分析/ 的/ 两层/ 结构/ ./ ①/ 轨迹/ 线层/ ./ 轨迹/ 线/ 结点/ 按照/ “/ / ”/ 得到/ 的/ LOB/ ;/ ②/ 轨迹/ 线段/ 层/ ./ 由/ 轨迹/ 线层/ 中/ 每个/ 结点/ 中/ 元素/ 在/ Modam/ 中/ 的/ 子/ 结点/ 按照/ “/ / ”/ 得到/ 的/ LOB/ ./ NT/ 是/ Tindex/ 所有/ 索引/ 结点/ 相点/ 编码/ 集/ ;/ VT/ 是/ Tindex/ 中/ 所有/ 结点/ (/ LOB/ )/ 集合/ ;/ ET/ 为/ 相应/ 边/ 集合/ ./ 时态/ 索引/ 结点/ (/ LOB/ )/ nt/ =/ (/ Intcode/ (/ nt/ )/ ,/ 〈/ max/ (/ nt/ )/ ,/ min/ (/ nt/ )/ 〉/ )/ ,/ 其中/ Intcode/ (/ nt/ )/ 为/ nt/ 相点/ 编码/ ,/ min/ (/ nt/ )/ ,/ max/ (/ nt/ )/ 分别/ 为/ nt/ 最小/ 和/ 最大/ 元/ ./ (/ 2/ )/ 空间/ 索引/ 模块/ ./ Sindex/ =/ (/ NS/ ,/ QS/ ,/ ES/ )/ ,/ NS/ 是/ Sindex/ 中/ 所有/ 索引/ 结点/ 相点/ 编码/ 集合/ ;/ QS/ 是/ 对/ Sindex/ 中叶/ 结点/ 层/ 每个/ LOB/ 基于/ KD/ -/ Tree/ 而/ 做出/ PPKDT/ 集合/ ;/ ES/ 为/ 相应/ 边/ 集合/ ./ 空间/ 索引/ 结点/ ns/ =/ (/ Pcode/ (/ ns/ )/ ,/ R2/ (/ ns/ )/ )/ ,/ Intcode/ (/ ns/ )/ 和/ R2/ (/ ns/ )/ 为/ ns/ 相点/ 编码/ 和/ 二阶/ 相点/ ./ 在/ Modim/ 中/ 每条/ 轨迹/ 线段/ 的/ 时间/ 和/ 空间数据/ 只/ 存储/ 一次/ ,/ 因此/ Modim/ 的/ 空间/ 复杂度/ 为/ O/ (/ n/ )/ ,/ 其中/ n/ 为/ 轨迹/ 线段/ 数/ ./ (/ 3/ )/ 时空/ 索引/ 整合/ 模块/ Integ/ ./ 为/ 提高/ 时空/ 查询/ 效率/ ,/ 一个/ 时态/ 索引/ 叶/ 结点/ LOB/ 通常/ 需要/ 对应/ 多棵/ 空间/ 索引/ 树/ ./ 如果/ 只/ 对/ 时态/ 索引/ 结点/ LOB/ 建立/ 一棵/ 空间/ 索引/ 树/ ,/ 当/ LOB/ 只有/ 较/ 少数/ 据点/ 满足/ 时态/ 查询/ 条件/ 时/ ,/ 仍/ 需/ 对/ 其中/ 所有/ 数据/ 进行/ 空间/ 搜索/ ,/ 从而/ 降低/ 了/ 查询/ 效率/ ./ 此时/ 可/ 有/ 多种/ 配置/ 方法/ ,/ 本文/ 采用/ 区间/ 套接/ 技术/ (/ intervlenet/ )/ ,/ 即/ 由/ minLOB/ 开始/ 取/ 分割/ 点将/ LOB/ 进行/ 适当/ 分割/ ,/ 再/ 对/ 由/ minLOB/ 到/ 每个/ 分割/ 点/ 的/ LOB/ 片段/ 对应/ 的/ 数据/ 点/ 分别/ 建立/ 空间/ 索引/ ,/ 使得/ 每个/ LOB/ 对应/ 一个/ 空间/ 索引/ 序列/ ,/ 其中/ 可/ 基于/ “/ 等距/ ”/ 选取/ 分割/ 点/ ,/ 而/ 分割/ 点/ 数目/ 可/ 由/ 实际/ 表/ 3/ 时间/ 线序/ 分支/ 模式/ 索引/ 节点/ nt/ (/ 1/ )/ STDBnt/ (/ 2/ )/ Trj/ (/ [/ 1/ ,/ 15/ ]/ ,/ [/ 1/ ,/ 12/ ]/ ,/ (/ 2/ ,/ 12/ ]/ )/ nt/ (/ 3/ )/ Tseg/ (/ [/ 1/ ,/ 7/ ]/ ,/ [/ 1/ ,/ 5/ ]/ ,/ (/ 1/ ,/ 3/ ]/ ,/ [/ 2/ ,/ 3/ ]/ )/ (/ S31/ ,/ S51/ ,/ S71/ )/ ,/ (/ S21/ ,/ S91/ )/ ,/ (/ S11/ ,/ S81/ ,/ S101/ )/ ,/ (/ S41/ ,/ S61/ )/ nt/ (/ 4/ )/ Tseg/ (/ [/ 3/ ,/ 11/ ]/ ,/ [/ 3/ ,/ 9/ ]/ ,/ (/ 5/ ,/ 9/ ]/ ,/ [/ 7/ ,/ 9/ ]/ )/ (/ S62/ ,/ S82/ )/ ,/ (/ S12/ ,/ S42/ ,/ S102/ )/ ,/ (/ S22/ ,/ S92/ )/ ,/ (/ S32/ ,/ S52/ ,/ S72/ )/ nt/ (/ 5/ )/ Tseg/ (/ [/ 9/ ,/ 15/ ]/ ,/ [/ 9/ ,/ 12/ ]/ ,/ (/ 11/ ,/ 12/ ]/ )/ 各个/ LOB/ (/ n2/ (/ 3/ )/ ,/ n2/ (/ 4/ )/ ,/ n2/ (/ 5/ )/ )/ 中/ 元素/ 对应/ 的/ 空间/ 映射/ 数对/ 如表/ 4/ 所示/ ,/ PPKDT/ 如图/ 6/ 所示/ ./ 问题/ 确定/ ./ 分割/ 点/ 与/ 空间/ 索引/ 树/ 相互/ 对应/ ,/ 分割/ 点/ 可/ 标识/ 相应/ 空间/ 索引/ 树/ (/ 例如/ 给出/ 相应/ 编号/ )/ ,/ 对于/ 满足/ 时态/ 查询/ 的/ 数据/ ,/ 比较/ 其/ 与/ 分割/ 点/ 关系/ ,/ 可/ 确定/ 需/ 查找/ 的/ 空间/ 索引/ 树/ ./ 设有/ LOB/ 如图/ 4/ 所示/ ,/ 选取/ 分割/ 点为/ VT2/ ,/ VT4/ ,/ VT6/ ,/ 相应/ 空间/ 索引/ 树记/ 为/ Sindex1/ ,/ Sindex2/ ,/ Sindex3/ ./ 设具/ 时间/ 区间/ VTi/ 的/ 数据/ 点/ 对应/ 的/ 空间/ 相点/ 为/ Pi/ (/ 1/ / i/ / 2/ )/ ,/ 各/ 索引/ 树/ 和/ 索引/ 点如表/ 2/ 所示/ ./ 其中/ ,/ Sindex1/ 是/ 对/ LOB/ 中前/ 两个/ 点/ 建立/ 索引/ ,/ Sindex2/ 对/ LOB/ 前/ 4/ 个点/ 建立/ 索引/ ,/ 而/ Sindex3/ 则/ 是/ 对/ 整个/ LOB/ 建立/ 空间/ 索引/ ./ 查询/ 时/ 如果/ 该/ LOB/ 满足/ 时态/ 条件/ 的/ LOB/ 片段/ 为/ {/ VT1/ ,/ VT2/ ,/ VT3/ ,/ }/ ,/ 则/ 应/ 查询/ 空间/ 索引/ 树/ Sindex2/ ./ 空间/ 索引/ 树/ 索引/ 值/ Sindex12Sindex24Sindex36/ (/ P1/ ,/ P2/ ,/ P3/ ,/ P4/ ,/ P5/ ,/ )/ P6/ 对/ LOB/ 建立/ 多棵/ 空间/ 索引/ 树/ ,/ 通常/ 会/ 提升/ 查询/ 效率/ ,/ 但/ 空间/ 耗费/ 也/ 随之/ 增加/ ./ 空间/ 索引/ 树/ 数量/ 确定/ 需要/ 根据/ 实际/ 问题/ 要求/ 和/ 索引/ 中/ LOB/ 的/ 规模/ 确定/ ./ 本文/ 5.2/ ./ 1/ 节/ 将/ 对/ 空间/ 索引/ 树/ 个数/ 增加/ 时/ 索引/ 的/ 空间/ 耗费/ 和/ 查询/ 效率/ 进行/ 具体/ 探讨/ ./ 空间/ 索引/ 树具/ 相同/ 结构/ 和/ 操作/ (/ 查询/ ,/ 更新/ )/ ,/ 为/ 突出/ 基本思路/ ,/ 本文/ 以下/ 举例/ 均/ 假设/ 对/ 整个/ LOB/ 建立/ 空间/ 索引/ ./ 例/ 2/ ./ 例/ 1/ 中/ 移动/ 对象/ 数据/ 对应/ 时间/ 线序/ 分支/ 如表/ 3/ 所示/ ,/ 时态/ 索引/ 模式/ 如图/ 5/ 所示/ ./ (/ Trj1/ ,/ 5/ ,/ 10/ )/ ,/ (/ Trj2/ ,/ 3/ ,/ 7/ ,/ 8/ ,/ 9/ )/ ,/ (/ Trj4/ ,/ 6/ )/ (/ S13/ ,/ S53/ ,/ S103/ )/ ,/ (/ S23/ ,/ S33/ ,/ S43/ ,/ S73/ ,/ S93/ )/ ,/ (/ S63/ ,/ S83/ )/ 最终/ 移动/ 对象/ 数据/ 索引/ 模型/ 如图/ 7/ 所示/ (/ 为/ 简明/ 起/ 见/ ,/ 空间/ 索引/ 中叶/ 结点/ 的/ 4/ 个空/ 指针/ 未画/ 出/ )/ ./ Page9/ 图/ 5/ 时态/ 索引/ 模式/ Tindex/ 图/ 6PPKDT/ 构造/ 图/ 7/ 移动/ 数据/ 索引/ 模式/ ModimPage104/ 数据/ 操作/ 4.1/ 数据/ 查询/ 数据/ 索引/ 是/ 对/ 数据库/ 中/ 已有/ 数据/ (/ 称为/ 历史/ 的/ 过去/ 数据/ )/ 的/ 查询/ 技术/ ,/ 在/ 整个/ 移动/ 数据/ 查询/ 领域/ ,/ 历史数据/ 查询/ 是/ 对/ 当前/ 时间/ 位置/ 判断/ 和/ 未来/ 位置/ 预测/ 的/ 基础/ 和/ 出发点/ ./ 对于/ 移动/ 对象/ 数据/ 查询/ Q/ =/ (/ ID/ (/ Qt/ )/ ,/ VT/ (/ Q/ )/ ,/ R/ (/ Q/ )/ )/ 来说/ ,/ 如果/ VTe/ (/ Q/ )/ -/ VTs/ (/ Q/ )/ ≠/ 0/ ,/ 则/ 称为/ 时空/ 区域/ 查询/ ,/ 否则/ 称为/ 时间/ 片/ 查询/ ./ 从/ 应用/ 角度/ 考虑/ ,/ 移动/ 数据/ 查询/ 主要/ 是/ 关于/ 轨迹/ 信息/ 查询/ ,/ 此时/ 需/ 根据/ 时空/ 数据/ 自身/ 特征/ ,/ 检查/ 一个/ 对象/ 轨迹/ 中/ 的/ 多条/ 线段/ ./ 实际/ 应用/ 中/ ,/ 移动/ 数据/ 查询/ 基本/ 时间/ 粒度/ 是/ “/ 时间/ 点/ ”/ 和/ “/ 时间/ 区间/ ”/ ,/ 而/ 空间/ 查询/ 粒度/ 是/ “/ 轨迹/ 线/ 片段/ ”/ 和/ “/ 轨迹/ 线段/ ”/ ./ 时间/ 点/ 可/ 看作/ 特殊/ 时间/ 区间/ ,/ 轨迹/ 线段/ 组成/ 轨迹/ 线/ 片段/ (/ 轨迹/ 线/ )/ ,/ 因此/ “/ 搜索/ 给定/ 时间/ 区间/ P/ 内/ 与/ 给定/ 空间/ MBR/ 具有/ 某种/ 拓扑/ 关系/ 的/ 轨迹/ 线段/ ”/ 可/ 作为/ 移动/ 对象/ 数据/ 基本/ 查询/ ./ 不失/ 一般性/ ,/ 本文/ 考虑/ 上述/ 两种/ 基本/ 查询/ :/ (/ 1/ )/ 轨迹/ 线段/ 查询/ ./ Qts/ =/ (/ ID/ (/ Qts/ )/ ,/ VT/ (/ Qts/ )/ ,/ R/ (/ Qts/ )/ )/ ;/ (/ 2/ )/ 轨迹/ 线/ 片段/ 查询/ ./ Qt/ =/ (/ ID/ (/ Qt/ )/ ,/ VT/ (/ Qt/ )/ ,/ R/ (/ Qt/ )/ )/ ,/ 其中/ ,/ ID/ (/ Q/ )/ 为/ 查询/ 对象/ (/ 轨迹/ 线段/ 或/ 片段/ )/ 标识/ ,/ (/ VT/ (/ Q/ )/ ,/ R/ (/ Q/ )/ )/ 为/ 时空/ 查询/ 窗口/ ,/ VT/ (/ Q/ )/ =/ [/ VTs/ ,/ VTe/ )/ ,/ (/ VTs/ 可/ 与/ VTe/ 相等/ ,/ 此时/ 时间/ 区间/ 退化/ 为/ 时间/ 点/ )/ ,/ R/ (/ Q/ )/ =/ [/ x1/ ,/ y1/ ;/ x2/ ,/ y2/ ]/ ./ 对/ Q/ 来说/ ,/ 查询/ 输出/ D/ =/ (/ ID/ (/ D/ )/ ,/ VT/ (/ D/ )/ ,/ R/ (/ D/ )/ )/ ,/ 其中/ ,/ ID/ (/ Q/ )/ =/ ID/ (/ D/ )/ ∧/ VT/ (/ D/ )/ / VT/ (/ Q/ )/ ∧/ R/ (/ D/ )/ / R/ (/ Q/ )/ ./ 4.1/ ./ 1/ 轨迹/ 线段/ 查询/ 算法/ 2/ ./ 轨迹/ 线段/ 查询/ 算法/ ./ 输入/ :/ 查询/ Q/ =/ (/ ID/ (/ Q/ )/ ,/ VT/ (/ Q/ )/ ,/ R/ (/ Q/ )/ )/ ,/ 其/ 对应/ 平面/ 输出/ :/ 满足/ 查询/ 要求/ 轨迹/ 线段/ 1/ ./ LOB/ 时态/ 查询/ ./ 1.1/ ./ 时态/ 过滤/ ./ 设/ 各/ 索引/ 结点/ 对应/ LOB/ 集合/ 为/ {/ Li0/ }/ (/ 为了/ 简便/ 记/ ,/ 也/ 以/ Li0/ 记/ 相应/ 时空/ 索引/ 结点/ )/ ;/ 索引/ 结点/ Li0/ =/ (/ ni0/ (/ j/ )/ ,/ 〈/ max/ (/ Li0/ )/ ,/ min/ (/ Li0/ )/ 〉/ )/ ,/ 其中/ ni0/ (/ j/ )/ 和/ 〈/ max/ (/ Li0/ )/ ,/ min/ (/ Li0/ )/ 〉/ 分别/ 表示/ Li0/ 的/ 先序/ 结点/ 编号/ 、/ 最大/ 及/ 最小/ 时间/ 期间/ ./ 由/ 推论/ 1/ 可知/ ,/ 在/ LOP/ {/ Li1/ ,/ Li2/ ,/ …/ ,/ Lin/ }/ 中/ ,/ {/ VTe/ (/ minLi/ )/ |/ 1/ / i/ / n/ }/ 按/ 升序/ 排列/ ./ 首先/ 在/ {/ VTe/ (/ minLi/ )/ |/ 1/ / i/ / n/ }/ 中/ 执行/ 二分/ 查找/ ,/ 找到/ 最后/ 一个/ 满足/ VTe/ (/ minLi/ )/ / VTe/ (/ Q/ )/ 的/ 线序/ 分支/ ,/ 不妨/ 设该/ 线序/ 分支/ 为/ Lin/ ;/ 然后/ 在/ {/ Li1/ ,/ Li2/ ,/ …/ ,/ Lin/ }/ 中/ 依次/ 判定/ 满足/ VTs/ (/ minLi/ )/ / VTs/ (/ Q/ )/ 的/ 线序/ 分支/ ,/ 此时/ 得到/ 的/ 所有/ 线序/ 分支/ 均/ 为/ 时态/ 过滤/ 结果/ ./ 1.2/ ./ 时态/ 查询/ ./ 由步/ 1.1/ 可知/ ,/ 所有/ 候选/ 索引/ 结点/ Li0/ 均/ 满足/ min/ (/ Li0/ )/ / VT/ (/ Q/ )/ ,/ 即/ 候选/ 结点/ 中/ 一定/ 存在/ 满足/ 时间/ 约束/ 的/ 数据/ 实体/ ./ ①/ 如果/ max/ (/ Li0/ )/ / VT/ (/ Q/ )/ ,/ 则/ Li0/ 中/ 元素/ 都/ 是/ 查询/ 结果/ ./ ②/ 否则/ ,/ 将/ Li0/ 中/ 结点/ 按/ 时间/ 包含/ 关系/ 排序/ 为/ [/ u/ ]/ i1/ ,/ [/ u/ ]/ i2/ ,/ …/ ,/ [/ u/ ]/ in/ (/ 即/ [/ u/ ]/ i1/ / [/ u/ ]/ i2/ / …/ / [/ u/ ]/ in/ )/ ,/ 其中/ [/ u/ ]/ ii/ 表示/ 时间/ 期间/ 相同/ 的/ 结点/ 集合/ ./ 通过/ 对/ {/ [/ u/ ]/ i1/ ,/ [/ u/ ]/ i2/ ,/ …/ ,/ [/ u/ ]/ in/ }/ 的/ 结束/ 时间/ 执行/ 二分/ 查找/ ,/ 选取/ 满足/ VTe/ (/ [/ u/ ]/ ii/ )/ / VTe/ (/ Q/ )/ 的/ 最后/ 一个/ 结点/ [/ u/ ]/ ii/ ,/ 则/ 线序/ 分支/ 片段/ LOBs/ =/ {/ VT/ (/ [/ u/ ]/ i1/ )/ ,/ VT/ (/ [/ u/ ]/ i2/ )/ ,/ …/ ,/ VT/ (/ [/ u/ ]/ ii/ )/ }/ 中/ 的/ 所有/ 元素/ 都/ 是/ 时态/ 查询/ 结果/ ./ 2/ ./ 基于/ PPKDT/ 空间/ 查询/ ./ 对/ 经过/ 时间/ 筛选/ 的/ LOB/ 或/ LOBs/ ,/ 在/ 相应/ PPKDT/ 中/ 进行/ 空间/ 查找/ ./ 设/ 线序/ 分支/ L0/ 对应/ 的/ PPKDT/ 为/ T0/ ,/ 而/ M0/ =/ root/ (/ T0/ )/ ,/ 设/ M0k/ 表示/ 点/ M0/ 以/ 坐标轴/ k/ 为/ 平面/ 划分/ 基点/ (/ k/ =/ x/ ,/ y/ )/ ,/ 根据/ 定理/ 4/ 可/ 得到/ 下述/ 查询/ 情形/ ./ 2.1/ ./ 如果/ PQ/ ∈/ M0x/ (/ II/ )/ ,/ 则/ 此时/ M0/ 的/ 左子/ 树为/ 查询/ 候选/ 结果/ ./ 如果/ PQ/ / x/ =/ M0/ / x/ ∧/ PQ/ / y/ / M0/ / y/ ,/ 则/ M0/ 为/ 空间/ 查询/ 候选/ 结果/ ./ 设/ M0/ 左子/ 树/ 的/ 根/ 结点/ 为/ M1/ ,/ M1/ 将/ M0x/ (/ II/ )/ 区域/ 分为/ M1y/ (/ I/ )/ 和/ M1y/ (/ II/ )/ ,/ 此时/ 判断/ PQ/ 在/ M1/ 的/ 位置/ :/ ①/ 如果/ PQ/ ∈/ M1y/ (/ II/ )/ :/ 如果/ PQ/ / x/ =/ M0/ / x/ ∧/ PQ/ / y/ =/ M1/ / y/ ,/ 则/ M1/ 和/ M1y/ (/ II/ )/ 区域/ 内/ 的/ 所有/ 元素/ 均/ 为/ 空间/ 查询/ 候选/ 结果/ ,/ 查询/ 结束/ ;/ 否则/ ,/ 需在/ M1y/ (/ II/ )/ 区域/ 内/ 递归/ 查找/ 结果/ ,/ 即/ 在/ M1/ 的/ 左子/ 树/ 查找/ ,/ 同时/ ,/ 如果/ PQ/ / y/ =/ M1/ / y/ ∧/ PQ/ / x/ >/ M1/ / x/ ,/ 则/ M1/ 为/ 空间/ 查询/ 候选/ 结果/ ./ ②/ 如果/ PQ/ ∈/ M1y/ (/ I/ )/ ,/ 则/ 需要/ 在/ M1y/ (/ I/ )/ 和/ M1y/ (/ II/ )/ 区域/ 内/ 递归/ 查找/ 结果/ ,/ 即/ 分别/ 在/ M1/ 左子/ 树/ 和/ 右子/ 树/ 查找/ ,/ 同时/ ,/ 如果/ PQ/ / x/ >/ M1/ / x/ ,/ 则/ M1/ 为/ 空间/ 查询/ 候选/ 结果/ ./ 2.2/ ./ 如果/ PQ/ ∈/ M0x/ (/ I/ )/ ,/ 则/ M0/ 的/ 左子/ 树/ 和/ 右子/ 树/ 都/ 为/ 查询/ 候选/ 结果/ ;/ 同时/ ,/ 如果/ PQ/ / y/ / M0/ / y/ ,/ 则/ M0/ 为/ 空间/ 查询/ 候选/ 结果/ ./ 设/ M0/ 的/ 左子/ 树/ 的/ 根/ 结点/ 为/ M1/ ,/ M1/ 将/ M0/ (/ II/ )/ 区域/ 分为/ M1y/ (/ I/ )/ 和/ M1y/ (/ II/ )/ ;/ M0/ 右子/ 树/ 的/ 根/ 结点/ 为/ M2/ ,/ M2/ 将/ M0x/ (/ I/ )/ 区域/ 分为/ M2y/ (/ I/ )/ 和/ M2y/ (/ II/ )/ ,/ 此时/ 判断/ PQ/ 在/ M1/ 和/ M2/ 的/ 位置/ :/ ①/ PQ/ ∈/ M2y/ (/ I/ )/ ,/ 如果/ PQ/ / x/ / M2/ / x/ ,/ 则/ M2/ 为/ 空间/ 查询/ 候选/ 结果/ ;/ 然后/ 分/ 如下/ 3/ 种/ 情况/ 考虑/ :/ (/ i/ )/ 若/ PQ/ / y/ =/ M1/ / y/ ,/ 则/ M1y/ (/ II/ )/ 中/ 所有/ 元素/ 均/ 为/ 空间/ 查询/ 候选/ 结果/ ,/ 然后/ 在/ M2y/ (/ I/ )/ 和/ M2y/ (/ II/ )/ 中/ 递归/ 查找/ ./ (/ ii/ )/ 若/ PQ/ / y/ >/ M1/ / y/ ,/ 则/ M1/ 和/ M1y/ (/ II/ )/ 中/ 所有/ 元素/ 均/ 为/ 空间/ 查询/ 候选/ 结果/ ,/ 然后/ 在/ M1y/ (/ I/ )/ ,/ M2y/ (/ I/ )/ 和/ M2y/ (/ II/ )/ 中/ 递归/ 查找/ ./ (/ iii/ )/ 若/ PQ/ / y/ </ M1/ / y/ ,/ 则/ 需要/ 在/ M1y/ (/ II/ )/ ,/ M2y/ (/ I/ )/ 和/ M2y/ (/ II/ )/ 中/ 递归/ 查找/ ./ ②/ PQ/ ∈/ M2y/ (/ II/ )/ ,/ 如果/ PQ/ / y/ =/ M2/ / y/ ∧/ PQ/ / x/ / M2/ / x/ ,/ 则/ M2/ 为/ 空间/ 查询/ 候选/ 结果/ ;/ 分/ 下述/ 3/ 种/ 情况/ 考虑/ :/ (/ i/ )/ 若/ PQ/ / y/ =/ M1/ / y/ ,/ 则/ M1/ 和/ M1y/ (/ II/ )/ 中/ 所有/ 元素/ 为/ 空间/ Page11/ (/ ii/ )/ 若/ PQ/ / y/ >/ M1/ / y/ ,/ 则/ M1/ 和/ M1y/ (/ II/ )/ 中/ 所有/ 元素/ 均/ 为/ 空间/ 查询/ 候选/ 结果/ ,/ 再/ 在/ M1y/ (/ I/ )/ 和/ M2y/ (/ II/ )/ 中/ 递归/ 查找/ ./ (/ iii/ )/ 若/ PQ/ / y/ </ M1/ / y/ ,/ 则/ 需/ 在/ M1y/ (/ II/ )/ 和/ M2y/ (/ II/ )/ 中/ 递归/ 查询/ 候选/ 结果/ ,/ 再/ 在/ M2y/ (/ II/ )/ 中/ 递归/ 查找/ ./ 查找/ ./ 3/ ./ 空间/ 查询/ 结果/ 确定/ ./ 设/ 时空/ 索引/ 得到/ 查询/ 结果/ 集/ 为/ {/ Di/ }/ ,/ 此时/ 得到/ 的/ 只是/ “/ 可能/ ”/ 结果/ ,/ 还/ 需/ 进行/ 最后/ 确定/ ./ 已知/ (/ Q/ (/ x2/ )/ / Di/ (/ x2/ )/ )/ ∧/ (/ Q/ (/ y2/ )/ / Di/ (/ y2/ )/ )/ ,/ 因此/ 只/ 需/ 考察/ (/ Q/ (/ x1/ )/ / Di/ (/ x1/ )/ )/ ∧/ (/ Q/ (/ y1/ )/ / Di/ (/ y1/ )/ )/ 是否/ 成立/ ,/ 再/ 由/ 适当/ 数据编码/ 将/ 结果/ 进行/ 装配/ 得到/ 所/ 需/ 轨迹/ 线或/ 轨迹/ 线/ 片段/ ./ 4/ ./ 时态/ 查询/ 和/ 空间/ 查询/ 整合/ ./ 当时/ 态/ 查询/ 结果/ 为/ 整个/ LOB/ 时/ ,/ 由/ 空间/ 查询/ 结果/ 对应/ 的/ ID/ 即可/ 得到/ 满足/ 时空/ 索引/ 查询/ 的/ 结果/ ;/ 当时/ 态/ 查询/ 结果/ 为/ LOB/ 片段/ ,/ 则/ 将/ 空间/ 查询/ 结果/ 的/ ID/ 与/ LOB/ 片段/ 中/ ID/ 比较/ 得到/ 索引/ 的/ 时空/ 查询/ 结果/ ./ 通过/ 基于/ LOB/ 时态/ 查询/ 和/ PPKDT/ 空间/ 查询/ ,/ 分别/ 得到/ 满足/ 时态/ 要求/ 轨迹/ 线段/ ID/ 集合/ 和/ 满足/ 空间/ 要求/ 轨迹/ 线段/ ID/ 集合/ ,/ 通过/ 求/ 两/ 集合/ 交集/ 得到/ 最终/ 满足/ 时空/ 要求/ 的/ 轨迹/ 线段/ ID/ 集合/ ./ 特别/ ,/ 在/ 时态/ 查询/ 中/ ,/ 若/ 整个/ LOB/ 都/ 是/ 时态/ 查找/ 结果/ ,/ 则/ 对/ 该/ LOB/ 进行/ 空间/ 查询/ 后/ ,/ 所得/ 空间/ 查询/ 结果/ 都/ 最终/ 满足/ 时态/ 和/ 空间/ 查询/ 要求/ ,/ 这部分/ 空间/ 查询/ 结果/ 不需/ 进行/ 求/ 交集/ ,/ 直接/ 加入/ 最终/ 结果/ 集中/ ./ 求/ 交集/ 过程/ 采用/ Hashing/ 方法/ :/ 先对/ Tindex/ 查询/ 结果/ 集中/ ID/ 进行/ Hashing/ 存储/ ,/ 再/ 对/ Sindex/ 查询/ 结果/ 集中/ ID/ 进行/ Hashing/ 查找/ ,/ 在/ 线性/ 时间/ 内/ 求得/ 两/ 集合/ 交集/ ,/ 从而/ 提高/ 求/ 交集/ 效率/ ./ 由/ 算法/ 2/ 中步/ 1/ 中/ 的/ 时态/ 查询/ 过程/ 可知/ ,/ 给定/ 时间/ 区间/ 集/ Γ/ ,/ 当/ LOB/ 越/ 少时/ ,/ 单个/ LOB/ 包含/ 的/ 时间/ 区间/ 越/ 多/ ,/ 通过/ LOB/ 的/ 最大/ 或/ 最小/ 元/ 或/ 执行/ 二分/ 查找/ 可/ 确定/ 或/ 排除/ 的/ 满足/ 时态/ 约束/ 的/ 结点/ 就/ 越/ 多/ ,/ 相应/ 时态/ 查询/ 效率/ 也/ 越/ 高/ ./ 这/ 也/ 是/ 2.2/ ./ 2/ 节中/ 讨论/ 最小/ LOP/ 的/ 原因/ ./ 算法/ 2/ 时间/ 复杂度/ 分析/ :/ 步/ 1/ 中/ ,/ 步/ 1.1/ 时态/ 过滤/ 耗时/ 主要/ 是/ 对/ {/ VTe/ (/ minLi/ )/ |/ 1/ / i/ / n/ }/ 的/ 二分/ 查找/ 和/ 后序/ 判定/ 过程/ ,/ 假设/ 共有/ k/ 个/ 线序/ 分支/ ,/ 则/ 该/ 部分/ 的/ 查询/ 时间/ 复杂度/ 最大/ 为/ O/ (/ logk/ )/ +/ O/ (/ k/ )/ ./ 步/ 2.2/ 时态/ 查询/ 耗时/ 主要/ 是/ 对/ 满足/ 时态/ 排序/ 的/ LOB/ 中/ 元素/ 时间/ 终点/ 执行/ 二分/ 查找/ ,/ 设/ LOB/ 含有/ n/ 个/ 元素/ ,/ 则/ 相应/ 时间/ 复杂度/ 最大/ 为/ k/ ×/ O/ (/ logn/ )/ ;/ 步/ 2/ 是/ 对步/ 1/ 中/ 满足/ 时态/ 约束/ LOB/ 对应/ 的/ PPKDT/ 执行/ 空间/ 查询/ ,/ 设/ 相应/ LOB/ 含有/ n/ 个/ 元素/ ,/ 且/ 所有/ 元素/ 满足/ 空间/ 约束/ ,/ 此时/ KD/ -/ Tree/ 查询/ 时间/ 复杂度/ 最大/ 为/ O/ (/ n1/ // 2/ +/ n/ )/ ,/ 故步/ 2/ 的/ 查询/ 时间/ 复杂度/ 最大/ 为/ k/ ×/ O/ (/ n1/ // 2/ +/ n/ )/ ;/ 经过/ 空间/ 查询/ 得到/ 的/ 满足/ 空间/ 约束/ 的/ 元素/ 最多/ 有/ kn/ 个/ ,/ 此时/ 步/ 3/ 和步/ 4/ 的/ 时间/ 复杂度/ 最大/ 均/ 为/ O/ (/ kn/ )/ ,/ 算法/ 2/ 时间/ 复杂度/ 为/ O/ (/ kn/ )/ ./ 4.1/ ./ 2/ 轨迹/ 线/ 查询/ 算法/ 3/ ./ 轨迹/ 线/ 片段/ (/ 轨迹/ 线/ )/ 查询/ 算法/ ./ 输入/ :/ 查询/ 条件/ Q/ =/ (/ ID/ (/ Q/ )/ ,/ VT/ (/ Q/ )/ ,/ R/ (/ Q/ )/ )/ ,/ 其/ 对应/ [/ 5/ ,/ 12/ ]/ ,/ R/ (/ Q/ )/ =/ [/ 3/ ,/ 5/ ;/ 7/ ,/ 8/ ]/ 的/ 轨迹/ 线/ 片段/ ./ 输出/ :/ 满足/ 查询/ 要求/ 轨迹/ 线/ 片段/ 1/ ~/ 4/ ./ 同/ 算法/ 25/ ./ 轨迹/ 线段/ 装配/ ./ 设/ 经过/ 上述/ 步/ 1/ ~/ 4/ 获取/ 的/ 满足/ 查询/ 条件/ 的/ 轨迹/ 线/ 片段/ 集合/ 为/ {/ S1/ ,/ S2/ ,/ …/ ,/ Sn/ }/ ,/ 根据/ 各/ 轨迹/ 线段/ 的/ 时态/ 编码/ 将/ 属于/ 同/ 一条/ 轨迹/ 线/ 的/ 连续/ 轨迹/ 线段/ 装配/ 为/ 一条/ 轨迹/ 片段/ ./ 例/ 3/ ./ 在/ 例/ 2/ 中/ 查询/ 符合/ 时空/ 约束/ VT/ (/ Q/ )/ =/ 步/ 1/ ~/ 2/ ./ 时态/ 过滤/ 与/ 查询/ ./ 由于/ min/ (/ nt/ (/ 3/ )/ )/ / VT/ (/ Q/ )/ ,/ 故/ nt/ (/ 3/ )/ 中/ 的/ 所有/ 数据项/ 都/ 不/ 满足/ 时态/ 要求/ ;/ 由于/ max/ (/ nt/ (/ 4/ )/ )/ / VT/ (/ Q/ )/ ,/ 但/ min/ (/ nt/ (/ 4/ )/ )/ / VT/ (/ Q/ )/ ,/ 则/ 对/ 线序/ 分支/ nt/ (/ 4/ )/ 进行/ 二分/ 查找/ ,/ 获取/ 满足/ 时态/ 要求/ 的/ 线段/ 集为/ T4/ =/ {/ S22/ ,/ S92/ ,/ S32/ ,/ S52/ ,/ S72/ }/ ;/ 由于/ max/ (/ nt/ (/ 5/ )/ )/ / VT/ (/ Q/ )/ ,/ 但/ min/ (/ nt/ (/ 5/ )/ )/ / VT/ (/ Q/ )/ ,/ 则/ 对/ 线序/ 分支/ nt/ (/ 4/ )/ 进行/ 二分/ 查找/ ,/ 获取/ 满足/ 时态/ 要求/ 的/ 线段/ 集为/ T5/ =/ {/ S23/ ,/ S33/ ,/ S43/ ,/ S73/ ,/ S93/ ,/ S63/ ,/ S83/ }/ ;/ 步/ 3/ ./ 空间/ 查询/ ./ 计算/ R/ (/ Q/ )/ 对应/ 的/ 平面/ 相点/ 为/ PQ/ =/ (/ 74/ ,/ 83/ )/ :/ (/ 1/ )/ 对/ nt/ (/ 4/ )/ 对应/ 的/ PPKDT/ 进行/ 搜索/ :/ PQ/ 位于/ PPKDT/ 根/ 结点/ 对应/ 相点/ (/ 52/ ,/ 51/ )/ Ix/ -/ 区域/ 中/ ,/ 由于/ PQ/ / y/ >/ 63/ ,/ (/ 52/ ,/ 51/ )/ 为/ 空间/ 查询/ 候选/ 结果/ ,/ 由于/ (/ 52/ ,/ 51/ )/ 左子/ 树不空/ ,/ (/ 52/ ,/ 51/ )/ 左/ 、/ 右子/ 树为/ 查询/ 候选/ 结果/ ./ (/ 52/ ,/ 51/ )/ 左/ 、/ 右子/ 树根/ 结点/ 分别/ 为/ (/ 41/ ,/ 62/ )/ 和/ (/ 72/ ,/ 62/ )/ ,/ 下面/ 考虑/ PQ/ 与/ (/ 41/ ,/ 62/ )/ 和/ (/ 72/ ,/ 62/ )/ 位置/ 关系/ :/ PQ/ 位于/ (/ 72/ ,/ 62/ )/ Iy/ -/ 区域/ 中/ ,/ 由于/ PQ/ / x/ >/ 72/ ,/ (/ 72/ ,/ 62/ )/ 为/ 空间/ 查询/ 候选/ 结果/ ;/ PQ/ / y/ >/ (/ 41/ ,/ 62/ )/ / y/ ,/ (/ 41/ ,/ 62/ )/ 和/ 其/ IIy/ -/ 区域/ 内/ 元素/ 为/ 空间/ 查询/ 候选/ 结果/ ,/ 然后/ 在/ (/ 41/ ,/ 62/ )/ Iy/ -/ 区域/ 、/ (/ 72/ ,/ 62/ )/ Iy/ 和/ IIy/ 区域/ 内/ 进行/ 查找/ :/ ①/ (/ 41/ ,/ 62/ )/ 的/ Iy/ -/ 区域/ ./ (/ 41/ ,/ 62/ )/ 右子/ 树根/ 节点/ 为/ (/ 51/ ,/ 63/ )/ ,/ PQ/ 位于/ (/ 51/ ,/ 63/ )/ Ix/ -/ 区域/ 中/ ,/ 由于/ PQ/ / y/ >/ 63/ ,/ (/ 51/ ,/ 63/ )/ 为/ 空间/ 查询/ 候选/ 结果/ ,/ 由于/ (/ 52/ ,/ 51/ )/ 左子/ 树不空/ ,/ (/ 52/ ,/ 51/ )/ 左子/ 树/ 和/ 右子/ 树/ 都/ 为/ 查询/ 候选/ 结果/ ./ (/ 52/ ,/ 51/ )/ 左子/ 树根/ 结点/ 为/ (/ 41/ ,/ 72/ )/ ,/ 右子/ 树为/ 空/ ,/ 由于/ PQ/ / y/ >/ 72/ ,/ (/ 41/ ,/ 72/ )/ 为/ 空间/ 查询/ 候选/ 结果/ ./ 由于/ (/ 41/ ,/ 72/ )/ 左右/ 子树均/ 为/ 空/ ,/ 该/ 查询/ 分支/ 结束/ ./ ②/ (/ 72/ ,/ 62/ )/ 的/ Iy/ 和/ IIy/ 区域/ ./ (/ 72/ ,/ 62/ )/ 的/ 左右/ 子树/ 的/ 根/ 节点/ 分别/ 为/ (/ 53/ ,/ 51/ )/ 和/ (/ 62/ ,/ 72/ )/ ,/ PQ/ 位于/ (/ 62/ ,/ 72/ )/ Ix/ -/ 区域/ 中/ ,/ 由于/ PQ/ / y/ >/ 72/ ,/ 所以/ (/ 62/ ,/ 72/ )/ 为/ 空间/ 查询/ 候选/ 结果/ ./ 由于/ PQ/ / x/ >/ 53/ ,/ 所以/ (/ 72/ ,/ 62/ )/ 的/ 左子/ 树中/ 的/ 所有/ 元素/ 均/ 为/ 空间/ 查询/ 候选/ 结果/ ./ 由于/ (/ 62/ ,/ 72/ )/ 左子/ 树不为/ 空/ ,/ (/ 62/ ,/ 72/ )/ 左子/ 、/ 右子/ 树为/ 查询/ 候选/ 结果/ ./ (/ 62/ ,/ 72/ )/ 左子/ 树根/ 结点/ 为/ (/ 62/ ,/ 73/ )/ ,/ 右子/ 树为/ 空/ ,/ 由于/ PQ/ / y/ >/ 73/ ,/ (/ 62/ ,/ 73/ )/ 为/ 空间/ 查询/ 候选/ 结果/ ./ 由于/ (/ 62/ ,/ 73/ )/ 左右/ 子树均/ 为/ 空/ ,/ 该/ 查询/ 分支/ 结束/ ./ 此时/ 空间/ 查询/ 得到/ 候选/ 结果/ 集/ 为/ {/ (/ 51/ ,/ 63/ )/ ,/ (/ 42/ ,/ 51/ )/ ,/ (/ 41/ ,/ 62/ )/ ,/ (/ 62/ ,/ 73/ )/ ,/ (/ 62/ ,/ 72/ )/ ,/ (/ 41/ ,/ 72/ )/ ,/ (/ 53/ ,/ 51/ )/ ,/ (/ 52/ ,/ 51/ )/ ,/ (/ 52/ ,/ 41/ )/ ,/ (/ 72/ ,/ 62/ )/ }/ ,/ 对应/ 的/ 轨迹/ 线段/ 为/ {/ S102/ ,/ S42/ ,/ S62/ ,/ S72/ ,/ Page12S92/ ,/ S22/ ,/ S12/ ,/ S32/ ,/ S52/ ,/ S82/ }/ ,/ 由/ 各/ 线段/ 始点/ 与/ 空间/ 查询/ 窗口/ 左/ 下/ 顶点/ 确定/ 最后/ 的/ 空间/ 查询/ 结果/ 为/ S4/ =/ {/ S72/ ,/ S92/ ,/ S22/ }/ ./ (/ 2/ )/ 对/ nt/ (/ 5/ )/ 对应/ 的/ PPKDT/ 进行/ 搜索/ :/ PQ/ 位于/ PPKDT/ 根/ 结点/ 对应/ 相点/ (/ 72/ ,/ 61/ )/ Ix/ -/ 区域/ 中/ ,/ 由于/ PQ/ / y/ >/ 61/ ,/ (/ 72/ ,/ 61/ )/ 为/ 空间/ 查询/ 候选/ 结果/ ,/ 由于/ (/ 72/ ,/ 61/ )/ 左子/ 树不为/ 空/ ,/ (/ 72/ ,/ 61/ )/ 左/ 、/ 右子/ 树为/ 查询/ 候选/ 结果/ ./ (/ 72/ ,/ 61/ )/ 左/ 、/ 右子/ 树根/ 结点/ 为/ (/ 61/ ,/ 72/ )/ 和/ (/ 83/ ,/ 73/ )/ ,/ 下面/ 考虑/ PQ/ 与/ (/ 61/ ,/ 72/ )/ 和/ (/ 83/ ,/ 73/ )/ 位置/ 关系/ :/ PQ/ 位于/ (/ 83/ ,/ 73/ )/ IIy/ -/ 区域/ 中/ ,/ 由于/ PQ/ / y/ >/ (/ 61/ ,/ 72/ )/ ,/ (/ 61/ ,/ 72/ )/ 和/ 其/ IIy/ -/ 区域/ 内/ 元素/ 为/ 空间/ 查询/ 候选/ 结果/ ;/ 然后/ 在/ (/ 61/ ,/ 72/ )/ 的/ Iy/ -/ 区域/ ,/ (/ 83/ ,/ 73/ )/ Iy/ 和/ IIy/ 区域/ 内/ 进行/ 查/ :/ ①/ (/ 61/ ,/ 72/ )/ Iy/ -/ 区域/ ./ (/ 61/ ,/ 72/ )/ 的/ 右子/ 树根/ 节点/ 为/ (/ 62/ ,/ 81/ )/ ,/ PQ/ 位于/ (/ 62/ ,/ 81/ )/ Ix/ -/ 区域/ 中/ ,/ 由于/ PQ/ / y/ >/ 81/ ,/ (/ 62/ ,/ 81/ )/ 为/ 空间/ 查询/ 候选/ 结果/ ./ 由于/ (/ 62/ ,/ 81/ )/ 左子/ 树不为/ 空/ ,/ (/ 62/ ,/ 81/ )/ 左/ 、/ 右子/ 树为/ 查询/ 候选/ 结果/ ./ (/ 52/ ,/ 51/ )/ 左右/ 子/ 树根/ 结点/ 为/ (/ 61/ ,/ 82/ )/ 和/ (/ 71/ ,/ 81/ )/ :/ PQ/ 位于/ (/ 71/ ,/ 81/ )/ Ix/ -/ 区域/ 中/ ,/ 由于/ PQ/ / y/ >/ (/ 71/ ,/ 81/ )/ / y/ ,/ (/ 71/ ,/ 81/ )/ 为/ 空间/ 查询/ 候选/ 结果/ ./ 由于/ PQ/ / y/ >/ (/ 61/ ,/ 82/ )/ / y/ ,/ (/ 61/ ,/ 82/ )/ 和/ 其/ IIy/ 区域/ 内/ 所有/ 元素/ 为/ 空间/ 查询/ 候选/ 结果/ ./ 然后/ 在/ (/ 61/ ,/ 82/ )/ Iy/ -/ 区域/ ,/ (/ 71/ ,/ 81/ )/ Iy/ 和/ IIy/ 区域/ 内/ 进行/ 查找/ ./ 相应/ 区域/ 为空/ ,/ 该/ 查询/ 分支/ 结束/ ./ ②/ (/ 83/ ,/ 73/ )/ Iy/ 和/ IIy/ 区域/ ./ (/ 83/ ,/ 73/ )/ 左右/ 子/ 树根/ 结点/ 分别/ 为/ (/ 81/ ,/ 71/ )/ 和/ (/ 82/ ,/ 81/ )/ ,/ PQ/ 位于/ (/ 82/ ,/ 81/ )/ IIx/ -/ 区域/ 中/ ,/ 且/ PQ/ / x/ </ (/ 81/ ,/ 71/ )/ / x/ ,/ 只/ 需/ 分别/ 查询/ (/ 82/ ,/ 81/ )/ 和/ (/ 81/ ,/ 71/ )/ IIx/ -/ 区域/ ./ (/ 81/ ,/ 71/ )/ IIx/ -/ 区域/ :/ (/ 81/ ,/ 71/ )/ 左子/ 树根/ 结点/ 为/ (/ 73/ ,/ 71/ )/ ,/ PQ/ 位于/ (/ 73/ ,/ 71/ )/ Iy/ -/ 区域/ 中/ ,/ 且/ PQ/ / x/ >/ (/ 73/ ,/ 71/ )/ / x/ ,/ (/ 73/ ,/ 71/ )/ 为/ 空间/ 查询/ 候选/ 结果/ ./ 由于/ (/ 81/ ,/ 71/ )/ 的/ IIx/ -/ 区域/ 和/ (/ 73/ ,/ 71/ )/ Iy/ 和/ IIy/ 区域/ 均/ 为/ 空/ ,/ 该/ 查询/ 分支/ 结束/ ./ 此时/ 空间/ 查询/ 候选/ 结果/ 集/ 为/ {/ (/ 73/ ,/ 71/ )/ ,/ (/ 62/ ,/ 61/ )/ ,/ (/ 72/ ,/ 61/ )/ ,/ (/ 62/ ,/ 81/ )/ ,/ (/ 61/ ,/ 72/ )/ ,/ (/ 71/ ,/ 81/ )/ ,/ (/ 61/ ,/ 82/ )/ }/ ,/ 对应/ 轨迹/ 线段/ 为/ {/ S63/ ,/ S43/ ,/ S33/ ,/ S23/ ,/ S13/ ,/ S93/ ,/ S103/ }/ ./ 由/ 各/ 线段/ 始点/ 与/ 空间/ 查询/ 窗口/ 的/ 左下/ 顶点/ 确定/ 最后/ 空间/ 查询/ 结果/ 为/ S5/ =/ {/ S63/ ,/ S43/ ,/ S33/ ,/ S23/ ,/ S13/ ,/ S93/ ,/ S103/ }/ ./ 步/ 4/ ./ 时空/ 整合/ ./ 时空/ 查询/ 最终/ 结果/ 为/ 时态/ 查询/ 与/ 空间/ 查询/ 结果/ 的/ 交集/ ,/ ST4/ =/ S4/ ∩/ T4/ =/ {/ S72/ ,/ S92/ ,/ S22/ }/ ,/ ST5/ =/ S5/ ∩/ T5/ =/ {/ S63/ ,/ S43/ ,/ S33/ ,/ S23/ ,/ S93/ }/ ,/ 最终/ 查询/ 结果/ 集为/ ST/ =/ ST4/ ∪/ ST5/ =/ {/ S72/ ,/ S92/ ,/ S22/ ,/ S63/ ,/ S43/ ,/ S33/ ,/ S23/ ,/ S93/ }/ ./ 步/ 5/ ./ 轨迹/ 线/ 片段/ 装配/ ./ 根据/ 结果/ 集/ ST/ 中/ 各/ 线段/ 对应/ 时态/ 编码/ (/ 此时/ 各/ 线段/ 均/ 在/ 同/ 一层/ )/ 和/ 定理/ 5/ 可知/ ,/ S22/ (/ Intcode/ =/ 〈/ 0405/ ,/ 0070/ 〉/ )/ 是/ S23/ (/ Intcode/ =/ 〈/ 0309/ ,/ 0080/ 〉/ )/ 的/ 左/ 兄弟/ ,/ S92/ (/ Intcode/ =/ 〈/ 0405/ ,/ 0360/ 〉/ )/ 是/ S93/ (/ Intcode/ =/ 〈/ 0309/ ,/ 0370/ 〉/ )/ 的/ 左/ 兄弟/ ,/ 因此/ S22/ 和/ S23/ 为/ 属于/ 同一/ 轨迹/ 线/ 的/ 连续/ 线段/ ,/ 装配/ 为/ 一条/ 轨迹/ 片段/ ,/ 同理/ S92/ 和/ S93/ 可/ 装配/ 为/ 一条/ 轨迹/ 片段/ ./ 查询/ 输出/ 结果/ 为/ {/ {/ S72/ }/ ,/ {/ S92/ ,/ S93/ }/ ,/ {/ S22/ ,/ S23/ }/ ,/ {/ S63/ }/ ,/ {/ S43/ }/ ,/ {/ S33/ }/ }/ ./ 4.2/ 索引/ 更新/ 由于/ MOD/ 通过/ 传感器/ 采集/ 数据/ ,/ 移动/ 对象/ 数据库/ 中/ 数据/ 更新/ 主要/ 是/ 随着/ 时间/ 演进/ ,/ 更新/ 点/ 向前/ 推移/ 而/ 导致/ 的/ 轨迹/ 线/ 插入/ 操作/ ./ Modim/ 采用/ 分层/ 索引/ 方式/ ,/ 轨迹/ 线段/ 插入/ 首先/ 导致/ Tindex/ 更新/ ,/ 即/ LOB/ 更新/ ./ 因为/ 基于/ Tindex/ 中/ 每个/ LOB/ 构建/ Sindex/ ,/ 由此/ 又/ 导致/ Sindex/ 更新/ ./ 本文/ Sindex/ 基于/ PPKDT/ 构建/ ,/ Sindex/ 更新/ 通过/ KD/ -/ Tree/ 更新/ 机制/ 实现/ [/ 19/ ]/ ./ 因此/ ,/ 以下/ 仅/ 讨论/ Tindex/ 的/ 增量/ 式/ 更新/ ,/ 即/ 插入/ 新/ 数据/ 后/ ,/ 索引/ 在/ 尽可能/ 小/ 数据/ 范围/ 内/ 进行/ 调整/ ,/ 并/ 使得/ 调整/ 后/ 结果/ 与/ 对/ 整个/ 数据/ 重建/ 索引/ (/ 完全/ 式/ 更新/ )/ 一致/ ./ 注意/ 到/ 离线/ 轨迹/ 线/ 本身/ 不/ 涉及/ 任何/ 更新/ 运算/ ,/ 移动/ 对象/ 的/ 数据/ 插入/ 操作/ 实际上/ 可/ 分为/ 在线/ 轨迹/ 线/ 延伸/ 和/ 新/ 轨迹/ 线/ 插入/ 两种/ 类型/ ./ 4.2/ ./ 1/ 在线/ 轨迹/ 线/ 延伸/ 非/ 最近/ 轨迹/ 线段/ 上方/ 区域/ ./ 定理/ 6/ ./ 在/ TOM/ (/ Γ/ )/ 中/ ,/ 最新/ 轨迹/ 线段/ 在/ 所有/ 证明/ ./ 由于/ UT/ (/ PLAST/ )/ / Now/ </ UT/ (/ PNEXT/ )/ ,/ 当下/ 一个/ 更新/ 点/ PNEXT/ 到来/ 时/ 产生/ 的/ 最新/ 轨迹/ 线段/ Slat/ (/ Trj/ )/ 的/ 有效/ 时间/ 终点/ 为/ UT/ (/ PNEXT/ )/ ./ 因此/ ,/ 在/ 时间/ 相/ 平面/ 中/ ,/ 相点/ VT/ (/ Slat/ (/ Trj/ )/ )/ 的/ 纵坐标/ VTe/ (/ Slat/ (/ Trj/ )/ )/ 大于/ 所有/ 已有/ 相点/ 的/ 纵坐标/ ./ 证毕/ ./ 在线/ 轨迹/ 线/ 插入/ 就是/ 对/ 原有/ 轨迹/ 线/ 延伸/ ./ 对于/ 在线/ 轨迹/ 线/ ,/ 其/ 延伸/ 过程/ 是/ ,/ 将/ Now/ 绑定/ 于/ 进行/ 数据/ 操作/ 的/ 当前/ 时间/ CT1/ ,/ 设/ CT0/ 是/ 前次/ 插入/ 时间/ ,/ 对/ 每条/ 轨迹/ 线/ Trj/ ,/ 找出/ 相对/ 于/ CT0/ 和/ CT1/ 的/ 最近/ 更新/ 时间/ UTCT0/ (/ Trj/ )/ 和/ UTCT1/ (/ Trj/ )/ ,/ 由/ UTCT0/ (/ Trj/ )/ 和/ UTCT1/ (/ Trj/ )/ 之间/ 的/ 更新/ 点/ 可以/ 确定/ 一条/ 新/ 的/ 轨迹/ 线段/ ./ 设/ up/ 是/ 这样/ 的/ 轨迹/ 线段/ ,/ 由/ 定理/ 6/ ,/ up/ 的/ 插入/ 可/ 分为/ 如下/ 两种/ 情况/ ./ (/ 1/ )/ DR/ (/ VT/ (/ up/ )/ )/ =/ / ,/ 此时/ VT/ (/ up/ )/ 单独/ 构成/ 一个/ LOB/ ./ (/ 2/ )/ DR/ (/ VT/ (/ up/ )/ )/ ≠/ / ,/ 由/ 定理/ 6/ 可知/ ,/ / LOB0/ ,/ max/ (/ LOB0/ )/ 在/ VT/ (/ up/ )/ 下方/ ,/ 此时/ ,/ 将/ VT/ (/ up/ )/ 添加/ 到/ LOB0/ 构成/ 新/ 的/ LOB1/ ,/ 且/ VT/ (/ up/ )/ =/ max/ (/ LOB1/ )/ 对于/ 多个/ up/ 情形/ (/ 如图/ 8/ 所示/ )/ ,/ 先/ 针对/ 其/ 进行/ 构建/ 新/ 的/ LOB/ ,/ 再/ 将/ 各个/ min/ (/ LOB/ )/ 按照/ 始点/ 递增/ 排序/ ,/ 依次/ 应用/ 上述/ 两种/ 情况/ 即可/ ./ 由/ 推论/ 1/ 可知/ ,/ 所有/ 线序/ 分支/ 最大/ 元/ 的/ 始点/ 是/ 按/ 升序/ 排列/ 的/ ,/ 上述/ 轨迹/ 线段/ 插入/ 分类/ 中/ ,/ 通过/ 对/ 所/ Page13/ 需要/ 插入/ 的/ 新/ 轨迹/ 线/ 可以/ 分为/ 在线/ 和/ 离线/ 两种/ 有/ 线序/ 分支/ 最大/ 元/ 的/ 始点/ 进行/ 二分/ 查找/ 即可/ 判定/ 相应/ 的/ 操作/ ./ 因此/ 轨迹/ 线/ 延伸/ 的/ 时间/ 复杂度/ 为/ O/ (/ logk/ )/ ,/ 其中/ k/ 为/ 线序/ 分支/ 数/ ./ 4.2/ ./ 2/ 新/ 轨迹/ 线/ 插入/ 情形/ ./ (/ 1/ )/ 新/ 插入/ 在线/ 轨迹/ 线/ ./ 此时/ 将/ 新/ 插入/ 轨迹/ 线/ 的/ 所有/ 轨迹/ 线段/ 分为/ 在线/ 和/ 离线/ 两/ 部分/ ,/ 对于/ 离线/ 部分/ 采用/ 同/ 下述/ (/ 2/ )/ 同样/ 的/ 处理/ 方式/ ,/ 而/ 对于/ 在线/ 部分/ 则/ 按照/ 4.2/ ./ 1/ 节中/ 在线/ 轨迹/ 线/ 延伸/ 相同/ 的/ 处理/ 方式/ ./ (/ 2/ )/ 新/ 插入/ 离线/ 轨迹/ 线/ ./ 此时/ 主要/ 是/ 将/ 轨迹/ 线/ 和/ 轨迹/ 线段/ 插入/ 相应/ 层/ 的/ LOP/ 中/ ./ 由于/ 索引/ 各层/ LOP/ 的/ 动态/ 更新/ 方式/ 相同/ ,/ 而/ 轨迹/ 线段/ 是/ 轨迹/ 线/ 的/ 组成/ 基元/ ,/ 为/ 突出/ 基本/ 思想/ ,/ 不妨/ 假设/ 插入/ 单个/ 轨迹/ 线段/ u0/ ,/ 即/ 索引/ 更新/ 仅/ 发生/ 在/ 叶/ 结点/ 层/ ,/ 设叶/ 结点/ 层/ 的/ LOP/ =/ {/ L1/ ,/ L2/ ,/ …/ ,/ Lk/ }/ 且/ 按/ 生成/ 顺序/ 排序/ ./ 结点/ u0/ 的/ 插入/ 过程/ 可能/ 会/ 引起/ 相关/ 线序/ 分支/ 的/ 分裂/ 和/ 新/ 线序/ 分支/ 的/ 建立/ ,/ 该/ 算法/ 的/ 总体/ 思想/ 为/ :/ 从/ L1/ 开始/ 查找时间/ 区间/ VT/ (/ u0/ )/ 应/ 插入/ 的/ 第一个/ 线序/ 分支/ Li/ ,/ 将/ VT/ (/ u0/ )/ 插入/ ,/ 同时/ 根据/ 线序/ 分支/ 的/ 性质/ 调整/ Li/ 中/ 的/ 元素/ ,/ 即将/ Li/ 中/ 属于/ OUR/ (/ VT/ (/ u0/ )/ )/ 的/ 分支/ 片段/ 移出/ 至/ subL/ ;/ 如果/ Li/ 不/ 存在/ ,/ 即/ 线序/ 分支/ L1/ ,/ L2/ ,/ …/ ,/ Lk/ 中/ 的/ 所有/ 时间/ 区间/ 均/ 位于/ OUR/ (/ VT/ (/ u0/ )/ )/ 或/ ODL/ (/ VT/ (/ u0/ )/ )/ 内/ ,/ 则/ VT/ (/ u0/ )/ 单独/ 构成/ 一个/ 线序/ 分支/ ./ 如果/ subL/ 不为/ 空/ ,/ 则/ 从/ Li/ +/ 1/ 开始/ 对/ subL/ 做/ 类似/ 处理/ ,/ 直至/ subL/ 为空/ ./ 具体/ 算法/ 如/ 算法/ 4/ 所示/ ./ 算法/ 4/ ./ 基于/ 插入/ 的/ 线序/ 分支/ 更新/ 算法/ ./ 输入/ :/ 按/ 生成/ 顺序/ 排序/ 的/ 线序/ 分支/ L1/ ,/ L2/ ,/ …/ ,/ Lk/ ,/ 新/ 插/ 输出/ :/ 更新/ 后/ 的/ 线序/ 分支/ 序列/ 1/ ./ 令/ i/ =/ 1/ ;/ subL/ =/ {/ VT/ (/ u0/ )/ }/ ;/ 2/ ./ 如果/ maxLk/ ∈/ ODL/ (/ subL/ )/ 或者/ minLk/ ∈/ ODL/ (/ subL/ )/ ,/ 则/ subL/ 单独/ 构成/ 一个/ 线序/ 分支/ Lk/ +/ 1/ ,/ 转步/ 9/ ;/ 3/ ./ 如果/ i/ >/ k/ 或者/ maxLi/ ∈/ OUR/ (/ subL/ )/ ∧/ minLi/ ∈/ 图/ 9subL/ 单独/ 构成/ 一个/ LOBOUR/ (/ subL/ )/ ,/ 则/ subL/ 独立/ 构成/ 一个/ 线序/ 分支/ Lk/ +/ 1/ ,/ 转步/ 9/ ;/ 4/ ./ 如果/ maxLi/ ∈/ ODL/ (/ subL/ )/ 或者/ minLi/ ∈/ ODL/ (/ subL/ )/ ,/ i/ =/ i/ +/ 1/ ,/ 转步/ 3/ ;/ 5/ ./ 如果/ maxLi/ ∈/ DR/ (/ subL/ )/ ,/ 则/ Li/ =/ {/ subL/ ,/ u1/ ,/ …/ ,/ um/ }/ ,/ 转步/ 9/ ;/ 转步/ 9/ ;/ 6/ ./ 如果/ minLi/ ∈/ UL/ (/ subL/ )/ ,/ 则/ Li/ =/ {/ u1/ ,/ …/ ,/ um/ ,/ subL/ }/ ,/ 7/ ./ 如果/ maxLi/ ∈/ UL/ (/ subL/ )/ ,/ 找到/ Li/ 中/ 属于/ UL/ (/ subL/ )/ 区域/ 的/ 最后/ 一个/ 元素/ uj/ :/ 7.1/ ./ 如果/ uj/ +/ 1/ ∈/ ODL/ (/ subL/ )/ ,/ i/ =/ i/ +/ 1/ ,/ 转步/ 3/ ;/ 7.2/ ./ 如果/ uj/ +/ 1/ ∈/ DR/ (/ subL/ )/ ,/ 则/ Li/ =/ {/ u1/ ,/ …/ ,/ uj/ ,/ subL/ ,/ uj/ +/ 1/ ,/ …/ ,/ um/ }/ ,/ 转步/ 9/ ;/ 7.3/ ./ 如果/ uj/ +/ 1/ ∈/ OUR/ (/ subL/ )/ ∧/ minLi/ ∈/ OUR/ (/ subL/ )/ ,/ 则/ Li/ =/ {/ u1/ ,/ …/ ,/ uj/ ,/ subL/ }/ ,/ subL/ =/ {/ uj/ +/ 1/ ,/ …/ ,/ um/ }/ ,/ i/ =/ i/ +/ 1/ ,/ 转步/ 3/ ;/ 7.4/ ./ 如果/ uj/ +/ 1/ ∈/ OUR/ (/ subL/ )/ ∧/ minLi/ ∈/ DR/ (/ subL/ )/ ,/ 找到/ 位于/ DR/ (/ subL/ )/ 区域/ 的/ 第一个/ 元素/ uk/ ,/ Li/ =/ {/ u1/ ,/ …/ ,/ uj/ ,/ subL/ ,/ uk/ ,/ …/ ,/ um/ }/ ,/ subL/ =/ {/ uj/ +/ 1/ ,/ …/ ,/ uk/ -/ 1/ }/ ,/ i/ =/ i/ +/ 1/ ,/ 转步/ 3/ ;/ 8/ ./ 如果/ maxLi/ ∈/ OUR/ (/ subL/ )/ ∧/ minLi/ ∈/ DR/ (/ subL/ )/ ,/ 找到/ 位于/ DR/ (/ subL/ )/ 区域/ 的/ 第一个/ 元素/ uj/ ,/ Li/ =/ {/ subL/ ,/ uj/ ,/ …/ ,/ um/ }/ ,/ subL/ =/ {/ u1/ ,/ …/ ,/ uj/ -/ 1/ }/ ,/ i/ =/ i/ +/ 1/ ,/ 转步/ 3/ ;/ 9/ ./ 按顺/ 依次/ 输出/ 所有/ 线序/ 分支/ ./ 算法/ 4/ 的/ 时间/ 复杂度/ 分析/ :/ 设/ 所有/ 线序/ 分支/ 共/ 包含/ n/ 个/ 时间/ 区间/ ,/ 步/ 1/ ~/ 步/ 9/ 至多/ 对/ 每个/ 时间/ 区间/ 访问/ 一次/ ,/ 所以/ 算法/ 4/ 时间/ 复杂度/ 为/ O/ (/ n/ )/ ./ 考虑/ 分支/ 片段/ subL/ 的/ 插入/ 过程/ ,/ 对于/ 当前/ 的/ 线序/ 分支/ Li/ ,/ 算法/ 4/ 主要/ 考虑/ 以下/ 3/ 类/ 情况/ :/ (/ 1/ )/ subL/ 单独/ 构成/ 一个/ 新/ 的/ 线序/ 分支/ :/ ①/ 所有/ 线序/ 分支/ 均/ 位于/ OUR/ (/ subL/ )/ 区域/ 内/ (/ 步/ 3/ )/ ,/ 如图/ 9/ (/ a/ )/ 所示/ ;/ ②/ 所有/ 线序/ 分支/ 均/ 位于/ subL/ 的/ 左下方/ (/ 步/ 2/ )/ ,/ 如图/ 9/ (/ b/ )/ 所示/ ;/ ③/ 线序/ 分支/ {/ L1/ ,/ L2/ ,/ …/ ,/ Li/ }/ 中/ 的/ 所有/ 元素/ 都/ 位于/ subL/ 的/ 左下方/ ,/ 线序/ 分支/ {/ Li/ +/ 1/ ,/ Li/ +/ 2/ ,/ …/ ,/ Ln/ }/ 中/ 所有/ 的/ 元素/ 都/ 位于/ OUR/ (/ subL/ )/ 区域/ 内/ (/ 步/ 3/ ,/ 步/ 4/ ,/ 步/ 7.1/ )/ ,/ 如图/ 9/ (/ c/ )/ 所示/ ./ Page14/ (/ 2/ )/ subL/ 直接/ 并入/ Li/ 内/ :/ 图/ 10/ (/ a/ )/ 所示/ ;/ ①/ subL/ 作为/ Li/ 的/ 最大/ 元/ 并入/ Li/ 中/ (/ 步/ 5/ )/ ,/ 如/ ②/ subL/ 作为/ Li/ 的/ 最小/ 元/ 并入/ Li/ 中/ (/ 步/ 6/ )/ ,/ 如图/ 10subL/ 直接/ 并入/ Li/ (/ 3/ )/ subL/ 并入/ Li/ 内/ ,/ 且/ 需/ 分裂/ Li/ :/ uj/ }/ 和/ Li2/ =/ {/ uj/ +/ 1/ ,/ …/ ,/ um/ }/ :/ (/ 步/ 7.3/ )/ ,/ 如图/ 11/ (/ a/ )/ 所示/ ;/ ①/ Li/ 分裂/ 为/ 两个/ 线序/ 分支/ 片段/ Li1/ =/ {/ u1/ ,/ …/ ,/ (/ i/ )/ 将/ subL/ 插入/ Li1/ 的/ 尾部/ ,/ 并/ 递归/ 插入/ Li2/ (/ ii/ )/ 将/ subL/ 插入/ Li2/ 的/ 首部/ ,/ 并/ 递归/ 插入/ Li1/ 图/ 11subL/ 并入/ Li/ 内/ 并/ 分裂/ Li5/ 仿真/ 与/ 评估/ 本文/ 实验/ 硬件/ 环境/ 为/ 处理器/ IntelPentiumDual1/ ./ 602Hz/ ,/ 内存/ 2GB/ ;/ 软件/ 环境/ 为/ :/ 操作系统/ WinXPSP2/ ,/ 编程语言/ Java/ ,/ 集成/ 开发/ 环境/ 采用/ Eclipse3/ ./ 4/ ./ 本文/ 数据/ 集由/ GSTD/ [/ 22/ ]/ 生成/ ,/ 相关/ 参数设置/ 如下/ :/ 数据/ 时间/ 和/ 空间/ 域/ 为/ (/ 0/ ,/ 1/ )/ ,/ 移动/ 点/ 对象/ 初始/ 空间/ 位置/ 分布/ 和/ 快照/ 间/ 的/ 时间/ 间隔/ 采用/ Gaussian/ 分布/ ,/ 移动/ 对象/ 初始/ 数目/ 为/ 2000/ ,/ 再/ 以/ 每次/ 2000/ 的/ 步长/ 递增/ 至/ 20000/ ./ 此外/ ,/ 对/ GSTD/ 生成/ 数据/ 集/ 进行/ 必要/ 处理/ ,/ 即将/ 一个/ 对象/ 相继/ 两/ 快照/ 合并/ 成/ 一条/ 线段/ (/ tid/ ,/ sid/ ,/ ts/ ,/ te/ ,/ xs/ ,/ xe/ )/ ,/ 其中/ tid/ ,/ sid/ 分别/ 表示/ 考虑/ 对象/ 的/ 标识/ 和/ 编码/ ,/ ts/ 和/ xs/ 以及/ te/ 和/ xe/ 分别/ 为/ 前后/ 两个/ 快照/ 的/ 时刻/ 和/ 空间/ 位置/ ,/ 从而/ GSTD/ 数据/ 集/ 被/ 转换/ 为/ 由/ 移动/ 对象/ 轨迹/ 线段/ 组成/ 的/ 集合/ ./ 在/ 数据/ 查询/ 和/ 更新/ 处理/ 中/ ,/ 索引/ 实现/ 和/ 相应/ 数图/ 10/ (/ b/ )/ 所示/ ;/ 图/ 10/ (/ c/ )/ 所示/ ./ ③/ 将/ subL/ 插入/ Li/ 中间/ 的/ 位置/ (/ 步/ 7.2/ )/ ,/ 如/ (/ 步/ 8/ )/ ,/ 如图/ 11/ (/ b/ )/ 所示/ ./ ②/ Li/ 分裂/ 为/ 3/ 个/ 线序/ 分支/ 片段/ Li1/ =/ {/ u1/ ,/ …/ ,/ uj/ }/ ,/ Li2/ =/ {/ uj/ +/ 1/ ,/ …/ ,/ uk/ -/ 1/ }/ 和/ Li3/ =/ {/ uk/ ,/ …/ ,/ um/ }/ ,/ 然后/ 将/ {/ Li1/ ,/ subL/ ,/ Li3/ }/ 构成/ 一个/ 完整/ 的/ 线序/ 分支/ ,/ 并/ 递归/ 插入/ Li1/ (/ 步/ 7.4/ )/ ,/ 如图/ 11/ (/ c/ )/ 所示/ ./ 据/ 结构/ 装载/ 于/ 主存/ 当中/ ./ 实验/ 对/ Modim/ 、/ TB/ -/ tree/ 和/ 遍历/ 查询/ (/ Erg/ )/ 中/ 的/ 区域/ 和/ 时间/ 片/ 查询/ 进行/ 比较/ ./ 每类/ 查询/ 包含/ 1000/ 个/ 查询/ 实例/ ,/ 统计/ 结果/ 取/ 1000/ 个/ 查询/ 的/ 平均值/ ,/ 而/ 每类/ 更新/ 包含/ 100/ 次/ 更新/ 实例/ 统计/ 结果/ 取/ 100/ 次/ 更新/ 的/ 平均值/ ./ 另外/ ,/ 在/ 查询/ 和/ 更新/ 仿真/ 中/ ,/ Modim/ 中/ 时空/ 整合/ 采用/ 两棵/ KD/ -/ Tree/ ,/ 其/ 理由/ 见/ 5.2/ 节/ ./ TB/ -/ tree/ [/ 4/ ]/ 是/ 由/ Pfoser/ 等/ 提出/ 的/ 用来/ 保存/ 移动/ 对象/ 的/ 历史/ 轨迹/ 信息/ 的/ 索引/ 结构/ ,/ 作为/ 管理/ 轨迹/ 线/ 的/ 典型/ 索引/ 结构/ ,/ 其叶/ 结点/ 仅/ 包含/ 属于/ 同一/ 轨迹/ 线/ 的/ 线段/ ,/ 这种/ 存储/ 方式/ 使得/ TB/ -/ tree/ 对于/ 纯粹/ 时空/ 查询/ 具有/ 较/ 高/ 查询/ 效率/ ,/ 因此/ 本文/ 采用/ TB/ -/ tree/ 作为/ 仿真/ 比较/ 对象/ ./ 5.1/ 时空/ 数据/ 查询/ 5.1/ ./ 1/ 时空/ 区域/ 查询/ 时空/ 区域/ 查询/ 分为/ 时空/ 窗口/ 同时/ 变/ 、/ 时间/ 窗口/ 变/ 空间/ 窗口/ 不变/ 、/ 时间/ 窗口/ 不变/ 空间/ 窗口/ 变/ 3/ 种/ 情形/ ./ Page15/ (/ 1/ )/ 时空/ 查询/ 窗口/ 同时/ 变化/ ./ 设/ 时空/ 平台/ 为/ 单位/ 立方体/ (/ STUC/ )/ ,/ 考察/ 时间/ 维/ 、/ 空间/ x/ 维和/ 空间/ y/ 维/ 跨度/ 分别/ 为/ STUC/ 相关/ 跨度/ 的/ 1/ %/ ,/ 10/ %/ 和/ 20/ %/ 的/ 时空/ 区域/ 查询/ 窗口/ ./ 实验/ 结果/ 如图/ 12/ ~/ 14/ 所示/ ./ 图/ 12/ 查询/ 窗口/ 跨度/ 为/ STUC/ 的/ 1/ %/ 的/ 情形/ 图/ 13/ 查询/ 窗口/ 跨度/ 为/ STUC/ 的/ 10/ %/ 的/ 情形/ 图/ 14/ 查询/ 窗口/ 跨度/ 为/ STUC/ 的/ 20/ %/ 的/ 情形/ 由图/ 12/ ~/ 14/ 可知/ ,/ Modim/ 、/ TB/ -/ tree/ 和/ Erg/ 查询/ 耗时/ 随/ 数据量/ 增加/ 而/ 呈/ 近似/ 线性/ 增长/ ,/ 以/ Modim/ 为/ 优/ ./ (/ 2/ )/ 时间/ 变化/ 空间/ 不变/ ./ 采用/ 10000/ 个/ 移动/ 对象/ ,/ 固定/ 空间/ 查询/ 跨度/ 为/ 时空/ 单位/ 立方体/ 空间/ 相应/ 跨度/ 的/ 10/ %/ ,/ 时间/ 查询/ 跨度/ 按照/ 其/ 取值/ 分别/ 为/ 1/ %/ ,/ 5/ %/ ,/ 10/ %/ ,/ 15/ %/ ,/ 20/ %/ ,/ 实验/ 结果/ 如图/ 15/ 所示/ ./ 图/ 15/ 空间/ 维/ 跨度/ 固定/ 为/ STUC/ 的/ 10/ %/ 的/ 情形/ (/ 3/ )/ 空间/ 变化/ 时间/ 不变/ ./ 采用/ 10000/ 个/ 索引/ 对象/ ,/ 固定/ 时间/ 查询/ 跨度/ 10/ %/ ,/ 变化/ 空间/ 查询/ 跨度/ ,/ 其/ 取值/ 分别/ 为/ 1/ %/ ,/ 5/ %/ ,/ 10/ %/ ,/ 15/ %/ ,/ 20/ %/ ,/ 实验/ 结果/ 如图/ 16/ 所示/ ./ 此时/ ,/ 当/ 时间/ 查询/ 跨度/ 保持/ 不变/ 时/ ,/ 由于/ TB/ 树/ 空间/ 查询/ 机制/ 基于/ R/ -/ 树/ ,/ 当/ 空间/ 查询/ 跨度/ 增加/ 时/ ,/ 相应/ 搜索/ 范围/ 将会/ 缩小/ ,/ 查询/ 效率/ 会/ 随之/ 提高/ ;/ Modim/ 空间/ 查询/ 机制/ KD/ -/ Tree/ 与/ TB/ 树/ 不同/ ,/ 相应/ 查询/ 耗时/ 基本/ 平稳/ ./ 另外/ ,/ 还/ 可知/ 若/ 将/ modim/ 和/ TB/ -/ Tree/ 用于/ 一个/ 时间跨度/ 固定/ 的/ “/ 纯粹/ ”/ 空间/ 部分/ 查询/ (/ 切块/ 查询/ )/ ,/ modim/ 性能/ 也/ 较/ TB/ -/ Tree/ 为/ 优/ ,/ 即/ Modim/ 为/ 纯/ 空间/ 查询/ 提供/ 了/ 新思路/ ./ 5.1/ ./ 2/ 时间/ 片/ 查询/ 此时/ ,/ 时空/ 查询/ 在/ STUC/ 时间轴/ 上/ 投影/ 为/ 时间/ 点/ ,/ 空间/ 查询/ 在/ 各维上/ 投影/ 分别/ 为/ STUC/ 对应/ 跨度/ 的/ 1/ %/ 、/ 10/ %/ 和/ 20/ %/ ,/ 相应/ 结果/ 如图/ 17/ ~/ 19/ 所示/ ./ 由图/ 17/ ~/ 19/ 可知/ ,/ Modim/ 、/ TB/ -/ tree/ 查询/ 耗时/ 随/ 数据量/ 增加/ 呈/ 近似/ 线性/ 增长/ ,/ 其中/ 以/ Modim/ 性能/ 为/ 优/ ./ 图/ 17/ 查询/ 空间/ 投影/ 为/ STUC/ 相应/ 维/ 的/ 1/ %/ 的/ 情形/ 图/ 18/ 查询/ 空间/ 投影/ 为/ STUC/ 相应/ 维/ 的/ 10/ %/ 的/ 情形/ Page16/ 图/ 19/ 查询/ 空间/ 投影/ 为/ STUC/ 相应/ 维/ 的/ 20/ %/ 5.2/ 索引/ 空间/ 与/ 整合/ 机制/ 5.2/ ./ 1/ 索引/ 空间/ 如前所述/ ,/ 本文/ 索引/ 贡献/ 在于/ 时空/ 处理/ 模块/ 的/ 分置/ 与/ 整合/ ,/ 其中/ 整合/ 对/ 索引/ 查询/ 性能/ 有着/ 重要/ 影响/ ./ 通过/ 实验/ 发现/ ,/ 若/ 在/ 索引/ 中/ 直接/ 由/ 时间/ 模块/ 的/ LOB/ 直接/ 进行/ 空间/ 索引/ 树/ 构建/ ,/ 则/ 系统/ 查询/ 效率/ 可/ 低于/ 遍历/ ./ 但/ 较为/ 精细/ 的/ 整合/ 会/ 带来/ 索引/ 规模/ 扩大/ ./ 近年来/ “/ 索引/ 规模/ 大于/ 实际/ 数据/ ”/ 问题/ 已/ 引起/ 人们/ 关注/ ,/ 这/ 一方面/ 是/ 由于/ 包括/ 移动/ 数据/ 在内/ 的/ 各类/ 新型/ 数据/ 具有/ 更加/ 复杂/ 的/ 结构/ ,/ 其/ 查询/ 和/ 更新/ 突破/ 了/ 常规/ 数据管理/ 框架/ ;/ 其次/ ,/ 由于/ 硬件/ 功能/ 快速/ 提高/ ,/ “/ 以/ 空间/ 换/ 时间/ ”/ 已经/ 成为/ 可能/ ./ 实际上/ ,/ TB/ -/ Tree/ 的/ 数据/ 规模/ 就/ 远远/ 大于/ 实际/ 数据/ 规模/ ./ 这里/ 的/ 问题/ 在于/ ,/ 较/ 大规模/ 的/ 索引/ 结构/ 能否/ 带来/ 更为/ 有效/ 的/ 查询/ 效应/ ./ 本文/ 采用/ LOB/ 分段/ 对应/ 空间/ 索引/ 树/ 情形/ ./ 时空/ 整合/ 中/ 采用/ KD/ -/ tree/ 个数/ 建立/ Modim/ 所/ 占用/ 空间/ (/ MB/ )/ 与/ TB/ -/ tree/ 占用/ 空间/ 情形/ (/ 取/ 2/ ,/ 4/ ,/ 6/ ,/ 8/ ,/ 10/ 和/ 12/ 棵/ KD/ -/ tree/ )/ 占用/ 空间/ 比较/ 如图/ 20/ 所示/ ,/ 由此可知/ ,/ 在/ 对应/ 1/ ,/ 2/ ,/ 4/ ,/ 6/ 棵/ KD/ -/ tree/ 时/ ,/ Modim/ 空间/ 占有/ 情况/ 均/ 小于/ TB/ -/ tree/ ;/ 当取/ 8/ 棵/ KD/ -/ tree/ 时/ ,/ 与/ TB/ -/ tree/ 相当/ ;/ 而/ 在/ 超过/ 8/ 棵/ 时/ ,/ Modim/ 的/ 空间/ 占有/ 情况/ 大于/ TB/ -/ tree/ ./ 采用/ 不同/ KD/ -/ tree/ 个数/ 建立/ 相应/ Modim/ 在/ 时间/ 区域/ 查询/ (/ 10/ %/ 时间跨度/ )/ 耗费/ 时间/ 与/ TB/ -/ tree/ 查询/ 时间/ 耗费/ 比较/ (/ 取/ 2/ ,/ 4/ ,/ 6/ ,/ 8/ ,/ 10/ 和/ 12/ 棵/ KD/ -/ tree/ )/ 时间/ 耗费/ 比较/ 如图/ 21/ 所示/ ./ 由图/ 21/ 可知/ ,/ 当/ KD/ -/ tree/ 个数/ 增加/ 时/ ,/ Modim/ 查询/ 效率/ 也/ 在/ 增加/ ,/ 且/ 相对/ TB/ -/ tree/ 查询/ 效率/ 增长/ 较快/ ./ 5.2/ ./ 2/ 整合/ 机制/ 由图/ 20/ 和/ 图/ 21/ 可知/ ,/ 在/ 整合/ 机制/ 中/ 增加/ KD/ -/ Tree/ 个数/ 会/ 有效/ 提高/ 查询/ 效率/ ,/ 但/ 相应/ Modim/ 所/ 占用/ 空间/ 也/ 会/ 增加/ ./ 因此/ ,/ 需要/ 深入/ 考察/ KD/ -/ Tree/ 增加/ 时/ ,/ Modim/ 空间/ 占用/ 和/ 查询/ 时间/ 之间/ 联系/ ./ 本文/ 中/ 查询/ 效率/ 和/ 空间/ 消耗/ 的/ 增长率/ 分别/ 采用/ 下述/ 公式/ (/ k/ =/ 2/ ,/ 4/ ,/ 6/ ,/ 8/ ,/ 10/ ,/ 12/ ,/ 分别/ 表示/ 采用/ KD/ -/ Tree/ 个数/ )/ :/ 时间/ 增长率/ =/ (/ QueryTime1/ -/ QueryTimek/ )/ // Query/ -/ Time1/ ,/ 空间/ 增长率/ =/ (/ IndexSizek/ -/ IndexSize1/ )/ // IndexSize1/ ./ 其中/ ,/ QueryTimek/ 和/ IndexSizek/ 分别/ 表示/ 有/ k/ 棵/ 空间/ 索引/ 树时/ 移动/ 数据/ 索引/ 结构/ k/ -/ Modim/ 的/ 查询/ 时间/ 和/ 索引/ 结构/ 大小/ ./ 给定/ k/ (/ k/ =/ 2/ ,/ 4/ ,/ 6/ ,/ 8/ ,/ 10/ ,/ 12/ )/ 棵/ KD/ -/ Tree/ ,/ 对/ 2000/ 个/ 移动/ 对象/ 以/ 2000/ 增量/ 增加/ 到/ 20000/ 时/ 得到/ 的/ 时间/ 和/ 空间/ 增长率/ 进行/ 平均/ ,/ 得到/ 相应/ 平均/ 时间/ 和/ 空间/ 增长率/ 变化/ 图/ 22/ 所示/ ./ 由图/ 22/ 可知/ ,/ 随着/ 整合/ 机制/ 的/ 强化/ 即/ KD/ -/ Tree/ 个数/ 增加/ ,/ Modim/ 查询/ 效率/ 增加/ 幅度/ 小于/ 索引/ 空间/ 的/ 增加/ 幅度/ ./ 按照/ 公式/ TS/ -/ rate/ =/ (/ Query/ -/ Time1/ -/ QueryTimek/ )/ // (/ IndexSizek/ -/ IndexSize1/ )/ 得到/ 查询/ 时间/ 与/ 索引/ 空间/ 变化/ 的/ 比值/ (/ 按/ 各种/ 轨迹/ 线/ 个数/ 情况/ 进行/ 平均/ )/ 如图/ 23/ 所示/ ./ 由图/ 23/ 可知/ ,/ 查询/ 效率/ 的/ 增长/ 总体而言/ 会/ 随着/ 整合/ 机制/ 强化/ 而/ 低于/ 索引/ 空间/ 的/ 增长/ ,/ 这/ 就/ 为/ 实际/ 应用/ 中/ 的/ 情形/ 提供/ 了/ 灵活/ 的/ 选择/ ,/ 即/ 对/ 资源/ 较为/ 丰富/ 而/ 对/ 查询/ 效率/ 要求/ 较/ 高/ 的/ 情形/ ,/ 可以/ 选择/ 较/ 多/ 的/ KD/ -/ Tree/ 个数/ ;/ 反之/ ,/ 则/ 可以/ 选择/ 较少/ 的/ KD/ -/ Tree/ ./ 当然/ ,/ 较强/ 的/ 整合/ 机制/ 会/ 带来/ 索引/ 更新/ 的/ 复杂性/ ,/ 因此/ ,/ 需要/ 结合实际/ 情况/ 综合/ 考虑/ ./ 由图/ 22/ 和/ 图/ 23/ 可知/ ,/ 当/ k/ =/ 2/ 时/ ,/ Modim/ 查询/ 效率/ 的/ 增长/ 高于/ 索引/ 空间/ 的/ 消耗/ ,/ 这/ 就是/ 在/ 查询/ 和/ 更新/ 实验/ 中/ 选用/ 两棵/ KD/ -/ Tree/ 的/ 原因/ ./ Page175/ ./ 3/ 增量/ 式/ 更新/ 5.3/ ./ 1/ 在线/ 轨迹/ 线/ 更新/ 随着/ 时间/ 的/ 消逝/ ,/ 如果/ 移动/ 对象/ 继续/ 运动/ ,/ MOD/ 会/ 不断/ 地/ 接收/ 和/ 存储/ 已有/ 移动/ 对象/ 新/ 的/ 轨迹/ 线段/ 信息/ ,/ 而/ 新/ 插入/ 轨迹/ 线段/ 的/ 时间/ 信息/ 也/ 是/ 递增/ 的/ ,/ 新/ 插入/ 轨迹/ 线段/ 的/ 端点/ 时间/ 也/ 随之/ 递增/ ,/ 因此/ 新/ 插入/ 轨迹/ 线段/ 时间/ 区间/ 的/ 端点/ 时间/ 会/ 大于/ 等于/ 数据库/ 中/ 已有/ 的/ 时间/ 点/ ./ 插入/ 一条/ 轨迹/ 线段/ 时/ ,/ 随着/ 数据量/ 变化/ 增量/ 式/ 更新/ 与/ 完全/ 式/ 更新/ 所/ 耗费/ 时间/ 比较/ 如图/ 24/ 所示/ ./ 数据量/ 为/ 10000/ ,/ 插入/ 轨迹/ 线条/ 数/ 变动/ 时/ ,/ 增量/ 式/ 与/ 完全/ 式/ 更新/ 时间/ 耗费/ 情形/ 如图/ 25/ 所示/ ,/ 其中/ 采用/ 100/ 次/ 实验/ 的/ 平均/ 数据/ ./ 从图/ 24/ ~/ 25/ 可知/ ,/ 基于/ Modim/ 的/ 增量/ 式/ 更新/ —/ —/ —/ 插入/ 平均/ 耗时/ 几乎/ 为/ 0/ ,/ 而/ 完全/ 式/ 更新/ 则/ 耗时/ 将要/ 高出/ 许多/ ,/ 但/ 两者/ 总体/ 趋势/ 大都/ 保持/ 不变/ ./ 5.3/ ./ 2/ 插入/ 新/ 轨迹/ 线/ Modim/ 的/ 插入/ 更新/ 主要/ 分为/ 移动/ 对象/ 历史/ 轨迹/ 线/ 的/ 插入/ 以及/ 移动/ 对象/ 轨迹/ 线段/ 的/ 插入/ ./ 插入/ 新/ 的/ 历史/ 轨迹/ 线会/ 打乱/ 原有/ LOB/ 的/ 部署/ ,/ 但/ 采用/ 4.2/ 节中/ 插入/ 算法/ ,/ 仍然/ 可以/ 做到/ 增量/ 式/ 更新/ ./ 图/ 26/ 是/ 插入/ 一条/ 轨迹/ 线/ 而/ 数据量/ 增加/ 的/ 情形/ ,/ 图/ 27/ 表示/ 在/ 数据量/ 为/ 10000/ 时/ ,/ 新/ 插入/ 轨迹/ 线/ 由/ 100/ 增加/ 到/ 1000/ 时/ 情形/ ,/ 其中/ ,/ 轨迹/ 线/ 仍/ 由/ GSTD/ 生成/ ,/ 每条/ 轨迹/ 大约/ 包含/ 15/ 个/ 轨迹/ 线段/ ./ 在/ 增量/ 式/ 更新/ 中/ ,/ 时态/ 索引/ 模块/ 按照/ 算法/ 4/ 进行/ ,/ 空间/ 索引/ 模块/ 按照/ KD/ -/ Tree/ 进行/ [/ 19/ ]/ ./ 从图/ 26/ 可知/ ,/ 每次/ 插入/ 一条/ 历史/ 轨迹/ 线时/ ,/ 基于/ Modim/ 的/ 增量/ 式/ 更新/ 耗时/ 几乎/ 为/ 零/ ;/ 而/ 由/ 图/ 27/ 可/ 看出/ ,/ 当/ 每次/ 插入/ 多条/ 轨迹/ 线时/ ,/ 基于/ Modim/ 的/ 增量/ 式/ 更新/ 和/ 完全/ 式/ 更新/ 所/ 耗费/ 的/ 时间/ 都/ 在/ 增加/ ,/ 但/ 增量/ 式/ 更新/ 耗时/ 远/ 小于/ 完全/ 式/ 更新/ ,/ 这/ 是因为/ 完全/ 式/ 更新/ 是/ 通过/ 重新/ 建立/ 索引/ 来/ 实现/ 对/ 历史/ 轨迹/ 线段/ 的/ 插入/ ,/ 而/ 基于/ Modim/ 的/ 增量/ 式/ 更新/ 是/ 按照/ 算法/ 4/ 对/ 时态/ 索引/ 模型/ Tindex/ 进行/ 更新/ ,/ 这/ 也/ 说明/ 了/ 算法/ 4/ 的/ 有效性/ ./ 6/ 结语/ 现有/ MOD/ 索引/ 多/ 是/ 将/ 时间/ 维/ 看作/ 普通/ 空间/ 维/ 处理/ ,/ 即将/ 时间/ 维/ “/ 统一/ ”/ 在/ 空间/ 维/ 框架/ 中/ ./ 实际上/ ,/ 还/ 可以/ 从/ 本体/ 角度/ 出发/ ,/ 研究/ 体现/ 时间/ 维和/ 空间/ 维/ 基本/ 固有特征/ 和/ 有效/ 整合/ 的/ 索引/ 机制/ ./ 这里/ 需要/ 讨论/ 两个/ 基本/ 问题/ ,/ 一是/ 充分体现/ 时间/ 和/ 空间/ 本身/ 特点/ ,/ 由此/ 会/ 带来/ 理论/ 研究/ 和/ 技术/ 提升/ 的/ 一些/ 基本/ 课题/ ;/ 二是/ 研究/ 将/ 时空/ 整合/ 一体/ 的/ 构建/ 机制/ ./ 本文/ 主要/ 工作/ 是/ 将/ 时间/ 属性/ 和/ 空间/ 属性/ 分别/ 看做/ 一阶/ 和/ 二阶/ 区间/ 属性/ ,/ 并/ 将/ 它们/ 转化/ 为/ 相/ 平面/ 中/ 的/ 相点/ ,/ 研究/ 了/ Page18/ 相点/ 分析/ 技术/ 和/ 基于/ 相点/ 编码方法/ ./ 以此/ 为/ 基础/ ,/ 本文/ 研究/ 一种/ 新颖/ 移动/ 数据/ 索引/ 模式/ Modim/ ./ Modim/ 可较/ 好/ 反映/ 时间/ 和/ 空间/ 各自/ 特点/ ,/ 能够/ 实现/ 基于/ 过去/ 和/ 当前/ 轨迹/ 线/ 查询/ ,/ 且/ 表现/ 出/ 较为/ 优越/ 的/ 查询/ 性能/ ;/ 同时/ 能够/ 实现/ 增量/ 式/ 的/ 动态/ 更新/ ,/ 具有/ 较为理想/ 的/ 索引/ 更新/ 时间/ 和/ 空间/ 复杂度/ ./ 本文/ 的/ 相点/ 分析/ 技术/ 有利于/ 描述/ 和/ 研究/ 时态/ 和/ 空间/ 索引/ 各自/ 特性/ ,/ 其中/ 的/ 时空/ 模块/ 配置/ 有助于/ 对/ 时空/ 整合/ 机制/ 进一步/ 研究/ ,/ 也/ 有/ 可能/ 为/ 处理/ 时态/ 和/ 其它/ 重要/ 应用/ 中场/ 境/ 整合/ 研究/ (/ 例如/ 时态/ 对象/ 数据/ 中/ 的/ 时态/ 和/ 对象/ 场景/ ,/ 时态/ XML/ 中/ 时态/ 和/ 半/ 结构/ 场景/ 以及/ 时态/ 数据/ 空间/ 中/ 的/ 时态/ 和/ 多种/ 共存/ 场景/ 等/ )/ 提供/ 借鉴/ ./ 

