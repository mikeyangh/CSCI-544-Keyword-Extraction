Page1LabelCast/ :/ 一种/ 普适/ 的/ SDN/ 转发/ 平面/ 抽象/ 吕高锋/ 孙志刚/ 李韬/ 毛健彪/ 杨安/ (/ 国防科技大学/ 计算机/ 学院/ 长沙/ 410073/ )/ 摘要/ 在/ 互联网/ 体系结构/ 演进/ 过程/ 中/ 试验/ 和/ 部署/ 新型/ 网络协议/ 比较/ 困难/ ,/ 基于/ Openflow/ 的/ 软件/ 定义/ 网络/ SDN/ 提供/ 了/ 一种/ 简单易行/ 的/ 方法/ ./ OpenFlow/ 基于/ 流表/ 实现/ 了/ 多级/ 流水/ 转发/ 处理/ ,/ 然而/ Openflow/ 不/ 支持/ 对/ 网络/ 中/ 计算/ 和/ 存储/ 等/ 资源/ 的/ 描述/ ,/ 因此/ 很难/ 支持/ 以/ 内容/ 为/ 中心/ 的/ 新型/ 网络/ ./ 为/ 扩展/ SDN/ 能力/ ,/ 提出/ 了/ 一种/ 普适/ 的/ 转发/ 平面/ 抽象/ LabelCast/ ,/ 以/ 将/ 多态/ 网络/ 地址映射/ 到/ 定长/ 标签/ ./ 转发/ 平面/ 基于/ Label/ 表来/ 查找/ 和/ 调度/ 弱/ 语义/ 的/ 转发/ 操作/ 相关/ 的/ 指令/ ,/ Cast/ 表对/ 网络协议/ 语义/ 或/ 状态/ 相关/ 的/ 服务/ 进行/ 组织/ ,/ 支持/ 动态/ 扩展/ 新型/ 服务/ 以/ 满足/ 新型/ 网络体系结构/ 复杂/ 的/ 处理/ 功能/ ./ LabelCast/ 能够/ 支持/ 基于/ 流/ 的/ 端/ 到/ 端的/ 交换/ 和/ 以/ 数据/ 或/ 服务/ 为/ 中心/ 的/ 非端/ 到/ 端的/ 新型/ 网络体系结构/ ,/ 为/ SDN/ 提供/ 了/ 一种/ 普适/ 的/ 转发/ 平面/ 抽象/ ./ 关键词/ 软件/ 定义/ 网络/ ;/ 转发/ 平面/ 抽象/ ;/ 标签/ ;/ 服务/ 1/ 引言/ 在/ 互联网/ 演化过程/ 中/ ,/ 研究/ 人员/ 提出/ 了/ 众多/ 新型/ 协议/ 和/ 技术/ ,/ 然而/ 很难/ 在/ 生产/ 网络/ 中/ 试验/ 和/ 部署/ ,/ 主要/ 是/ 由于/ 网络设备/ 和/ 协议/ 开发/ 环境/ 由/ 设备/ 制造商/ 控制/ ./ 为了/ 加速/ 网络协议/ 创新/ 和/ 开发/ ,/ 人们/ 提出/ 了/ 软件/ 定义/ 网络/ SDN/ (/ SoftwareDefinedNetwork/ )/ ./ SDN/ 基于/ Openflow/ [/ 1/ ]/ 转发/ 层/ 抽象/ 统一/ 了/ 网络/ 转发/ 层/ 配置/ 接口/ ,/ 通过/ 引入/ 网络操作系统/ 向/ 网络应用/ 控制器/ 提供/ 了/ 简单/ 统一/ 的/ 编程/ 开发/ 和/ 配置/ 接口/ 以及/ 全局/ 网络/ 视图/ 等/ ./ SDN/ 支持/ 网络/ 虚拟化/ 等/ 技术/ ,/ 便于/ 开发人员/ 在/ 已有/ 网络/ 隔离/ 的/ 资源/ 中/ 开发/ 和/ 试验/ 新型/ 网络协议/ ./ Openflow/ 作为/ SDN/ 的/ 转发/ 层/ 抽象/ ,/ 采用/ 三元组/ 规则/ 〈/ Matching/ ,/ Instructions/ ,/ Counters/ 〉/ 构成/ 的/ 流表/ 描述/ 网络/ 转发/ 功能/ ,/ Openflow/ 控制器/ 通过/ 下载/ 规则/ 到/ Openflow/ 交换机/ 来/ 控制/ 转发/ 行为/ ./ Openflow/ 交换机/ 提取/ 关键字/ 过程/ 中/ 需要/ 根据/ 已知/ 协议/ 类型/ 来/ 解析/ 报文/ ,/ 无法/ 识别/ 新型/ 网络协议/ ,/ 而且/ 基于/ 变长/ 的/ 三元组/ 规则/ 的/ 查表/ 转发/ 的/ 硬件/ 实现/ 复杂/ ./ Openflow/ 交换机/ 多级/ 流水/ 结构/ 功能/ 简单/ ,/ 将/ 新型/ 网络协议/ 的/ 处理/ 映射/ 到/ 已有/ 的/ 多级/ 流水/ 处理/ 结构/ 又/ 比较复杂/ ,/ 存在/ 多级/ 流水/ 处理/ 不/ 支持/ 新型/ 网络协议/ 所/ 需要/ 的/ 数据/ 存储/ 和/ 名字/ 转发/ 等/ 特殊/ 处理/ 、/ 流/ 表项/ 与/ 新型/ 网络协议/ 表项/ 不/ 匹配/ 等/ 问题/ ./ 另一方面/ ,/ 下一代/ 互联网/ 新型/ 协议/ 试验/ 和/ 部署/ 对/ SDN/ 网络/ 转发/ 层/ 抽象/ 提出/ 了/ 更/ 高/ 的/ 要求/ ./ 目前/ ,/ 下一代/ 互联网/ 体系结构/ 演进/ 是/ 网络/ 领域/ 研究/ 的/ 热点/ ,/ 如/ NDN/ [/ 2/ ]/ 、/ XIA/ [/ 3/ ]/ 、/ Nebula/ [/ 4/ ]/ 等/ FIA/ 研究/ 项目/ ,/ 其中/ ,/ XIA/ 提出/ 了/ 有向图/ 地址/ 、/ NDN/ 提出/ 了/ 支持/ EverythingoverName/ 的/ 名字/ 网络/ ,/ Nebula/ 提出/ 了/ 网络/ 数据中心/ 云/ 概念/ ./ 新型/ 互联网/ 体系结构/ 设计/ 目标/ 是/ 保持/ 沙漏/ 型/ 体系结构/ 和/ 可/ 扩展/ 的/ 端/ -/ 端/ 模式/ ,/ 开发新/ 的/ 控制/ 功能/ ,/ 如/ 内容/ 路由/ 功能/ ./ 新型/ 网络协议/ 开发/ 和/ 试验/ 需要/ 改变/ 数据/ 平面/ 转发/ 行为/ ,/ 而已/ 有/ 网络/ 硬件/ 无法/ 满足/ 新型/ 网络协议/ 需要/ 的/ 计算/ 和/ 存储/ 等/ 特殊/ 处理/ ./ 下一代/ 互联网/ 细腰/ 演进/ 不再/ 是/ 打补丁/ ,/ 而是/ 在/ 网络层/ 解决/ 制约/ 互联网/ 能力/ 扩展/ 的/ 命名/ 和/ 寻址/ 等/ 基本/ 问题/ [/ 5/ -/ 6/ ]/ ,/ 新型/ 网络协议/ 设计/ 实现/ 、/ 试验/ 部署/ 等/ 面临/ 多方面/ 的/ 挑战/ ,/ 需要/ 一种/ 普适/ 的/ 转发/ 平面/ 抽象/ ./ 而/ 普适/ 的/ 转发/ 平面/ 抽象/ 需要/ 具备/ 如下/ 特点/ :/ (/ 1/ )/ 适应/ 网络地址/ 的/ 演化/ ;/ (/ 2/ )/ 支持/ 转发/ 平面/ 功能/ 扩展/ ;/ (/ 3/ )/ 为/ 控制/ 平面/ 提供/ 统一/ 的/ 管理/ 配置/ 接口/ ./ 我们/ 提出/ 了/ 一种/ 新型/ 网络/ 转发/ 平面/ 抽象/ Label/ -/ Cast/ ,/ 用/ Label/ 表/ 和/ Cast/ 表/ 分别/ 表示/ 网络/ 节点/ 转发/ 操作/ 和/ 处理/ 服务/ 的/ 能力/ ./ 转发/ 平面/ 基于/ Label/ 表来/ 查找/ 和/ 调度/ 弱/ 语义/ 的/ 转发/ 操作/ 相关/ 的/ 指令/ ,/ Cast/ 表对/ 网络协议/ 语义/ 或/ 状态/ 相关/ 的/ 特殊/ 处理/ 的/ 服务/ 进行/ 组织/ ,/ 支持/ 动态/ 扩展/ 新型/ 服务/ 以/ 支持/ 新型/ 网络体系结构/ 特殊/ 处理/ 的/ 需求/ ./ 逻辑/ 集中式/ LabelCast/ 控制器/ 将/ 多态/ 网络/ 地址映射/ 到/ 定长/ 标签/ ,/ 以/ 支持/ SDN/ 中/ 新型/ 网络协议/ 开发/ 和/ 试验/ ./ LabelCast/ 转发/ 平面/ 包括/ 基于/ OLV/ (/ OffsetLengthValue/ )/ 的/ 基本/ 报文/ 选项/ 修改/ 和/ 输出/ 控制/ 等/ 动作/ 指令/ ,/ 以及/ 基于/ 计算/ 和/ 存储资源/ 的/ 面向/ 任意/ 字/ 段/ 修改/ 和/ 匹配/ 的/ 服务/ ,/ 分别/ 实现/ 弱/ 语义/ 的/ 通用/ 操作/ 和/ 网络协议/ 语义/ 或/ 状态/ 相关/ 的/ 特殊/ 处理/ ./ 转发/ 平面/ 基于/ 弱/ 语义/ 定/ 长/ 标签/ 来/ 聚合/ 不同/ 端系统/ 的/ 请求/ 同一/ 内容/ 或/ 服务/ 的/ 报文/ ,/ 并/ 调度/ 动作/ 指令/ 和/ 服务/ ,/ 具有/ 硬件/ 实现/ 简单/ 等/ 优点/ ./ 另外/ ,/ 服务/ 能够/ 灵活/ 重组/ ,/ 实现/ 关键/ 数据/ 路径/ 上/ 协议/ 相关/ 的/ 报文/ 特殊/ 处理/ 的/ 服务/ ,/ 如/ 新型/ 网络体系结构/ 需要/ 的/ 数据/ Cache/ 和/ 标签/ 替换/ 等/ ,/ 又/ 能够/ 以/ 计算/ 和/ 存储资源/ 为/ 基础/ 动态/ 更新/ 服务/ 以/ 支持/ 未来/ 新型/ 网络协议/ 特殊/ 处理/ 需求/ ,/ 具有/ 良好/ 的/ 可扩展性/ ./ LabelCast/ 能够/ 支持/ 基于/ 流/ 的/ 端/ 到/ 端的/ 转发/ 和/ 以/ 数据/ 或/ 服务/ 为/ 中心/ 的/ 非端/ 到/ 端/ 等/ 多种/ 网络体系结构/ ,/ 为/ SDN/ 提供/ 了/ 一种/ 普适/ 的/ 转发/ 平面/ 抽象/ ,/ 支持/ 新型/ 网络协议/ 的/ 开发/ 和/ 试验/ ./ 文献/ [/ 7/ ]/ 与/ LabelCast/ 思想/ 不同/ ,/ 提出/ 了/ 一种/ 支持/ 普适/ 服务/ 的/ 传输层/ 架构/ ,/ 主要/ 针对/ 端系统/ 传输层/ 协议/ ./ 本文/ 第/ 2/ 节/ 介绍/ 相关/ 研究/ ;/ 第/ 3/ 节/ 提出/ 普适/ 转发/ 平面/ 抽象/ LabelCast/ ,/ 设计/ 了/ Label/ 表/ 、/ Cast/ 表/ 、/ 服务/ 扩展/ 机制/ 以及/ 基于/ 标签/ 的/ 多/ 协议/ 统一/ 承载/ 机制/ ;/ 第/ 4/ 节/ 基于/ LabelCast/ 设计/ 基于/ 规则/ 的/ 报文/ 转发/ 和/ 基于/ 名字/ 的/ NDN/ 报文/ 转发/ ,/ 并/ 与/ 其它/ 实现/ 方法/ 进行/ 比较/ 和/ 分析/ ;/ 第/ 5/ 节/ 设计/ 实现/ LabelCast/ 转发/ 原型/ 系统/ NetMagic/ -/ Pro/ ;/ 最后/ 是/ 总结/ 和/ 下/ 一步/ 工作/ ./ 2/ 相关/ 研究/ IETF/ 提出/ 的/ 转发/ 与/ 控制/ 分离/ 模型/ ForCES/ (/ ForwardingandControlElementSeparation/ )/ [/ 8/ ]/ 是/ 最早/ 关于/ 网络/ 转发/ 与/ 控制/ 平面/ 的/ 抽象/ ./ 在/ ForCES/ 中/ 转发/ 平面/ 在/ FIB/ 表中/ 查找/ 目的/ IP地址/ 获得/ 输出/ Page3/ 端口号/ 来/ 转发/ 报文/ ,/ 而/ 控制/ 平面/ 运行/ 路由/ 协议/ ,/ 计算/ 路由/ 来/ 配置/ 转发/ 平面/ FIB/ 表/ ./ ForCES/ 模型/ 提出/ 了/ 转发/ 与/ 控制/ 平面/ 的/ 接口/ ,/ 支持/ 控制器/ 对/ 不同/ 网络/ 节点/ 转发/ 单元/ 的/ 控制/ ,/ 简化/ 了/ 路由器/ 设计/ 与/ 实现/ ./ OpenRouter/ [/ 9/ ]/ 模型/ 进一步/ 细化/ 了/ 转发/ 与/ 控制/ 接口/ ,/ 与/ ForCES/ 功能/ 相似/ ./ Openflow/ 提供/ 了/ 以/ 三元组/ 规则/ 〈/ Matching/ ,/ Instructions/ ,/ Counters/ 〉/ 表示/ 的/ 网络/ 转发/ 层/ 抽象/ ./ 在/ Openflow/ 发展/ 过程/ 中/ 对/ 规则/ 进行/ 不断/ 扩展/ ./ 匹配/ 域/ 从/ Openflow/ 规范/ 1.0/ 中/ 以太网/ 、/ IP/ 和/ TCP/ 等/ 选项/ 构成/ 的/ 12/ 元组/ 扩展/ 到/ Openflow/ 规范/ 1.1/ 中/ 15/ 元组/ ,/ 现在/ 又/ 扩展/ 成/ Openflow/ 规范/ 1.2/ 中/ 基于/ TLV/ 表示/ 的/ 可变/ 的/ 匹配/ 域/ ./ 交换机/ 硬件/ 实现/ 复杂/ 的/ 匹配/ 操作/ ,/ 试图/ 支持/ 未来/ 新型/ 网络协议/ ./ 然而/ ,/ 仅/ 扩展/ 匹配/ 域/ 选项/ 并不一定/ 能够/ 预测/ 并/ 适应/ 未知/ 的/ 新型/ 网络协议/ 开发/ 和/ 部署/ 的/ 需求/ ./ Openflow/ 交换机/ 功能/ 也/ 在/ 不断/ 发展/ ,/ 但/ 还/ 只是/ 局限于/ 对/ 基本/ 报文/ 选项/ 的/ 处理/ ,/ 如/ 修改/ 和/ 替换/ 等/ ,/ 并/ 不能/ 提供/ 新型/ 网络应用/ ,/ 如/ 数据/ cache/ 等/ ./ Openflow/ 处理/ 流程/ 也/ 从/ 以前/ 的/ 单/ 表处理/ 扩展/ 到/ 多表/ 流水/ 处理/ ,/ 而多表/ 流水/ 处理/ 结构/ 主要/ 是/ 为了/ 解决/ 规则/ 扩展/ 过程/ 中/ 组合/ 爆炸/ 问题/ ,/ 以/ 简单/ 的/ 流水/ 处理/ 方式/ 实现/ 单级/ 复杂/ 处理/ ./ Openflow/ +/ [/ 10/ ]/ 针对/ Openflow/ 流表/ 实现/ 复杂/ 等/ 问题/ ,/ 从/ 转发/ 功能/ 、/ 控制/ 功能/ 、/ 转发/ 与/ 控制/ 交互/ 接口/ 和/ 流表/ 等/ 方面/ 对/ Openflow/ 进行/ 扩展/ ,/ 引入/ TLV/ 表示/ 方法/ ,/ 支持/ 将/ 规则/ 分解/ 到/ ACL/ 和/ FIB/ 等表/ ,/ 能够/ 在/ 商用/ 路由器/ 中/ 实现/ 基于/ 规则/ 的/ 报文/ 转发/ ./ Openflow/ +/ 简化/ 了/ Openflow/ 实现/ ,/ 能够/ 加速/ Openflow/ 商业化/ 部署/ ./ Openflow/ 试图/ 提出/ 通用/ 的/ 网络/ 转发/ 层/ 抽象/ ,/ 以/ 支持/ 网络体系结构/ 演进/ ./ 然而/ ,/ 不断/ 扩展/ 匹配/ 域/ 的/ 方法/ 只/ 使得/ 匹配/ 域/ 变长/ ,/ 硬件/ 实现/ 更加/ 复杂/ ./ 仅仅/ 在/ 转发/ 层/ 的/ 扩展/ 并/ 不能/ 解决/ 未来/ 新型/ 网络协议/ 开发/ 和/ 部署/ 中/ 遇到/ 的/ 问题/ ./ 另外/ ,/ Openflow/ 报文/ 解析/ 以/ 已知/ 协议/ 类型/ 为/ 基础/ ,/ Openflow/ 交换机/ 不/ 支持/ 新型/ 网络协议/ 报文/ 的/ 解析/ ,/ 需要/ 集中式/ Openflow/ 控制器/ 来/ 处理/ ./ Juniper/ 从/ 服务/ 角度/ 对/ 网络/ 转发/ 平面/ 进行/ 了/ 扩展/ ,/ 提出/ 了/ 服务/ 平面/ [/ 11/ ]/ 的/ 概念/ ,/ 通过/ 在/ 路由器/ 中/ 集成/ 计算/ 和/ 存储模块/ ,/ 提供/ 计算/ 和/ 存储/ 等/ 能力/ ,/ 为/ 第三方/ 服务/ 提供/ 了/ 运行/ 平台/ ,/ 同时/ 提供/ 了/ 开发工具/ SDK/ ./ 在/ Juniper/ 路由器/ 中/ 支持/ 第三方/ 服务/ 驻留/ 路由器/ 服务/ 平面/ ./ Juniper/ 服务/ 平面/ 能够/ 支持/ 多种/ 服务/ ,/ 并/ 具有/ 良好/ 的/ 可扩展性/ ./ Juniper/ 服务/ 平面/ 提供/ 了/ 与/ 网络/ 节点/ 紧/ 耦合/ 的/ 计算/ 和/ 存储资源/ ,/ 提供/ 的/ 服务/ 主要/ 是/ 网络管理/ 相关/ 方面/ 的/ 服务/ ,/ 不/ 涉及/ 关键/ 数据/ 路径/ 上/ 深度/ 报文/ 处理/ ,/ 如/ 缓存/ 或/ 组播/ 等/ ./ 另外/ ,/ Juniper/ 服务/ 平面/ 应用/ 的/ 开发者/ 仅限于/ 经过/ Juniper/ 认证/ 的/ 合作者/ ,/ 缺乏/ 开放性/ ./ 下一代/ 互联网/ 体系结构/ ,/ 如/ XIA/ 、/ NDN/ 和/ Nebula/ 等/ ,/ 提出/ 了/ 不同/ 的/ 转发/ 平面/ 抽象/ ./ NDN/ 面向/ 名字/ 转发/ ,/ 将/ 交换机/ 硬件/ 抽象/ 为/ ContentStore/ 表/ (/ CS/ )/ 、/ PendingInterest/ 表/ (/ PIT/ )/ 和/ 转/ 发表/ ./ NDN/ 在/ CS/ 表中/ 提供/ 名字/ 对应/ 的/ 数据/ 的/ 存储状态/ ,/ 在/ PIT/ 表中/ 记录/ Interest/ 的/ 请求/ ,/ 用于/ 消除/ 冗余/ 的/ 请求/ ,/ 根据/ FIB/ 表/ 转发/ Interest/ 报文/ ./ NDN/ 的/ 转发/ 层/ 抽象/ 不仅/ 要/ 支持/ 转发/ ,/ 还要/ 支持/ 存储/ 和/ 冗余/ 请求/ 的/ 消除/ 等/ 高级/ 处理/ 功能/ ,/ 这些/ 功能/ 是/ Openflow/ 转发/ 平面/ 无法/ 提供/ 的/ ./ XIA/ 采用/ 有向图/ 标识/ 源/ 和/ 目的/ 通信地址/ ./ 有向图/ 中/ 的/ 每个/ 节点/ 为/ 一个/ 实体/ 标识/ ,/ 支持/ 的/ 实体/ 标识/ 类型/ 包括/ 地址/ 、/ 服务/ 标识/ 、/ 内容/ 标识/ 等/ ./ 在/ 有向图/ 中/ 通过/ 增加/ “/ fallback/ ”/ 机制/ 实现/ 分组/ 在/ 不同/ 的/ 寻址/ 机制/ 中/ 切换/ ./ 有向图/ 表示/ 地址/ 的/ 机制/ 可以/ 有效/ 解决/ 路由器/ 对端/ 到/ 端/ 通信/ 和/ 非端/ 到/ 端/ 通信/ 的/ 统一/ 处理/ 问题/ ./ AIP/ [/ 12/ ]/ 提出/ 了/ 管理/ 域/ ID/ 加/ 端系统/ ID/ 的/ 层次/ 地址/ 结构/ ,/ 首次/ 采用/ 完全/ 自/ 验证/ 的/ 编址/ 方式/ ,/ 把/ 安全/ 作为/ 网络层/ 第一/ 考虑/ 的/ 要素/ ,/ 支持/ 接入/ 路由器/ 对/ 用户/ 身份/ 的/ 验证/ ,/ 提供/ 管理/ 域/ 边界/ 路由器/ 对/ 跨域/ 的/ 分组/ 的/ 身份验证/ ,/ 可以/ 有效/ 防止/ 身份/ 欺骗/ 和/ DOS/ 攻击/ 等/ ./ 新型/ 网络体系结构/ 不仅/ 需要/ 转发/ 平面/ 实现/ 基本/ 的/ 转发/ 功能/ ,/ 还/ 需要/ 转发/ 平面/ 有/ 一定/ 的/ 报文/ 深度/ 处理/ 能力/ ./ 而且/ 新型/ 网络协议/ 对/ 网络/ 演进/ 目标/ 有/ 不同/ 的/ 见解/ ,/ 对于/ 网络/ 实体/ 命名/ 和/ 寻址/ 、/ 协议/ 承载/ 层/ 等/ 有/ 不同/ 的/ 设计/ ,/ 因此/ 新型/ 网络/ 转发/ 平面/ 应/ 具有/ 良好/ 的/ 可扩展性/ ./ 3/ 普适/ 的/ 转发/ 平面/ 抽象/ LabelCast/ 随着/ 微处理器/ 设计/ 和/ 制造/ 工艺水平/ 的/ 发展/ ,/ 通用/ 多核/ 处理器/ 的/ 性能/ 越来越/ 高/ ,/ 能够/ 高速/ 实现/ 越来越/ 复杂/ 的/ 网络/ 处理/ ./ 另一方面/ ,/ 下一代/ 互联网/ 演化/ 提出/ 了/ 以/ 内容/ 或/ 服务/ 为/ 中心/ 的/ 新型/ 网络体系结构/ ,/ 需要/ 转发/ 平面/ 性能/ 更高/ ,/ 功能/ 更加/ 灵活/ ./ 新型/ 互联网协议/ 服务/ 与/ Openflow/ 多级/ 流水/ 处理/ 结构/ 的/ 映射/ 很/ 复杂/ ,/ 如图/ 1/ (/ a/ )/ 所示/ ,/ 存在/ 多级/ 流水/ 处理/ 不/ 支持/ 新型/ 网络协议/ ,/ 以及/ 流表/ 与/ 新型/ 网络协议/ 规则/ 表项/ 不/ 匹配/ 等/ 问题/ ./ 面向/ SDN/ 中/ 新型/ 网络协议/ 开发/ ,/ 为/ 减小/ 硬件/ 查找/ 匹配/ 实现/ 的/ 复杂度/ ,/ 扩展/ 网络/ 转发/ 平面/ 功/ Page4/ 能/ ,/ 我们/ 提出/ 了/ 普适/ 的/ 转发/ 平面/ 抽象/ LabelCast/ ./ 以定/ 长/ 标签/ 为/ 基础/ ,/ 调度/ 网络/ 状态/ 无关/ 的/ 对/ 报文/ 转发/ 操作/ 的/ 动作/ 指令/ 和/ 状态/ 相关/ 的/ 对/ 报文/ 深度/ 处理/ 的/ 服务/ ,/ 统一/ 承载/ 多种/ 网络协议/ ,/ 支持/ 基于/ 流/ 的/ 端/ 到/ 端的/ 转发/ 和/ 以/ 内容/ 或/ 服务/ 为/ 中心/ 的/ 非端/ 到/ 端的/ 新型/ 网络图/ 1Openflow/ 模型/ 与/ LabelCast/ 模型/ 比较/ 3.1/ 转发/ 平面/ 抽象/ 随着/ 网络/ 处理器/ 性能/ 的/ 不断/ 提高/ 和/ 存储资源/ 的/ 增加/ ,/ 网络/ 节点/ 除了/ 基本/ 的/ 转发/ 操作/ (/ ForwardingOperations/ )/ ,/ 还/ 具有/ 强大/ 的/ 计算/ 和/ 存储/ 能力/ [/ 13/ ]/ ,/ 能够/ 为/ 网络/ 服务例程/ 运行/ 提供/ 平台/ ,/ 从而/ 实现/ 丰富/ 的/ 关键/ 数据/ 路径/ 深度/ 报文/ 处理/ 功能/ (/ ProcessingFunctions/ )/ ./ 定义/ 1/ ./ 指令/ ./ 转发/ 平面/ 中/ 对/ 报文/ 基本/ 选项/ 的/ 修改/ ,/ 报文/ 输入输出/ 控制/ 等/ 转发/ 操作/ (/ ForwardingOperations/ )/ ./ 转发/ ./ 如图/ 1/ (/ b/ )/ 所示/ ,/ LabelCast/ 能够/ 有效/ 利用网络/ 节点/ 中/ 的/ 计算/ 和/ 存储资源/ ,/ 分别/ 实现/ 新型/ 网络协议/ 语义/ 或/ 状态/ 相关/ 的/ 特殊/ 处理/ 和/ 弱/ 语义/ 的/ 通用/ 操作/ ,/ 而且/ 服务/ 原语/ 能够/ 动态/ 扩展/ 以/ 满足/ 新型/ 网络体系结构/ 特殊/ 处理/ 需求/ ./ 定义/ 2/ ./ 服务/ ./ 基于/ 网络/ 中/ 集成/ 的/ 计算/ 和/ 存储资源/ 运行/ 的/ 数据/ 路径/ 上/ 的/ 报文/ 的/ 任意/ 字/ 段/ 查找/ 和/ 修改/ 等/ 特殊/ 处理/ (/ ProcessingFunctions/ )/ ,/ 与/ 网络协议/ 语义/ 或/ 状态/ 相关/ ./ 服务/ 是/ 对/ 计算/ 和/ 存储资源/ 的/ 抽象/ ,/ 为/ 用户/ 自定义/ 服务/ 开发/ 提供/ 系统/ 库/ 和/ 应用/ 库级/ 支持/ ,/ 表示/ 为/ atomService/ ,/ 即/ atomService/ =/ app/ (/ compResouce/ ,/ storeResource/ ,/ pkt/ )/ ./ LabelCast/ 用/ Label/ 表/ 和/ Cast/ 表对/ 报文/ 转发/ 等/ 操作/ 和/ 基于/ 网络/ 节点/ 集成/ 的/ 计算/ 和/ 存储资源/ 的/ 深度/ 处理/ 等/ 网络服务/ 进行/ 描述/ 和/ 管理/ ,/ 如图/ 2/ 所示/ ./ Page5/ 定义/ 3/ ./ Label/ 表/ ./ 表示/ 转发/ 平面/ 处理/ 报文/ 的/ 动作/ 指令/ 或者/ 服务/ 索引/ ,/ 表项/ 包括/ 标签/ 、/ 选项/ 域/ 、/ 动作/ 指令/ 域/ 、/ 服务/ 索引/ ID/ 域/ ,/ 记/ 为/ 〈/ Labels/ ,/ Instructions/ ,/ ServiceID/ 〉/ ./ 定义/ 4/ ./ Cast/ 表/ ./ 表示/ 转发/ 平面/ 深度/ 处理/ 报文/ 的/ 服务/ ,/ 表项/ 包括/ 服务/ 域/ 、/ 状态/ 域/ 和/ 资源/ 约束/ 域/ ,/ 记/ 为/ 〈/ Services/ ,/ Status/ ,/ Restrictions/ 〉/ ./ Label/ 表项/ 包括/ 标签/ ID/ 、/ 指令/ 域/ 、/ 服务/ 索引/ ./ 匹配/ 域/ 是/ 报文/ 标签/ ,/ 指令/ 域/ Instructions/ 表示/ 转发/ 报文/ 的/ 动作/ 集合/ ./ Label/ 聚合/ 不同/ 端系统/ 请求/ 数据/ 或/ 服务/ 的/ 报文/ ,/ 并/ 标识/ 转发/ 平面/ 服务/ ./ 输入/ 报文/ 匹配/ 表项/ 后/ ,/ 根据/ 表项/ 中/ 的/ 指令/ 进行/ 处理/ ,/ 如/ 修改/ 标签/ 状态/ 属性/ 、/ 端口/ 状态/ 属性/ 、/ 替换/ 标签/ 和/ 输出/ 等/ 通用/ 的/ 弱/ 语义/ 操作/ ./ 服务/ 索引/ 指向/ 实现/ 特殊/ 处理/ 的/ 服务/ ./ Label/ -/ Cast/ 控制器/ 用/ Label/ 表/ 控制/ LabelCast/ 转发/ 平面/ 处理/ 行为/ ./ 图/ 2LabelCast/ 控制/ 与/ 处理/ 模型/ 3.2/ Label/ 表在/ LabelCast/ 中/ ,/ 标签/ 与/ 报文/ 选项/ 是/ 关联/ 的/ ,/ 如/ 将/ 目的/ 地址映射/ 到/ 定长/ 标签/ ./ 在/ Label/ 表中用/ 标签/ 对/ 处理/ 报文/ 的/ 指令/ 进行/ 标识/ 和/ 调度/ ./ 3.2/ ./ 1/ 标签/ 映射/ LabelCast/ 控制器/ 将/ 新型/ 网络体系结构/ 中/ 节点/ 地址/ 或/ 报文/ 选项/ 映射/ 到/ 标签/ ,/ 并/ 与/ 处理/ 报文/ 的/ 指令/ 一/ 起来/ 配置/ Label/ 表/ ,/ 如图/ 3/ 所示/ ./ 标签/ 可以/ 作为/ 报文/ 网络层/ 协议/ 头/ ,/ 并/ 与/ 新型/ 网络体系结构/ 中/ 节点/ 地址/ 对应/ ./ 标签/ 由/ 两/ 部分/ 构成/ :/ 值/ 和/ 选项/ ./ 标签/ 值/ 是/ 为/ 网络应用/ 分配/ 的/ 定长/ 标识/ ,/ 与/ 网络应用/ 一一对应/ ,/ 选项/ 是/ 与/ 网络应用/ 弱/ 语义/ 标识/ 关联/ 的/ 状态/ 信息/ ,/ 是/ 对/ 标识/ 的/ 补充/ 信息/ ,/ 因此/ 网络应用/ 的/ 标签/ 对应/ 于/ 标签/ 空间/ 的/ 一部分/ ./ 以/ NDN/ 为例/ 对/ 标签/ 映射/ 进行/ 说明/ ,/ 对于/ 结构化/ 命名/ ,/ 标签/ 域/ 是/ 结构化/ 名字/ 前缀/ 的/ Hash/ 值/ ,/ 如/ parc/ // videos/ // WidgetA/ ./ mpg/ // v2/ // s1/ ,/ 用/ 前缀/ parc/ // videos/ // WidgetA/ ./ mpg/ 的/ Hash/ 值/ 作为/ 标签/ ;/ 对于/ 〈/ P/ :/ L/ 〉/ 形式/ 的/ 非/ 结构化/ 命名/ ,/ 标签/ 用/ 真实/ 实体/ 标识/ RWI/ 公钥/ 的/ Hash/ 结果/ P/ 表示/ ./ Cast/ 表项/ 包括/ 服务/ 域/ 、/ 状态/ 域/ 和/ 资源/ 约束/ 域/ ./ 服务/ 域/ 表示/ 深度/ 处理/ 报文/ 的/ 服务/ ./ 服务/ 基于/ 网络单元/ 集成/ 的/ 计算/ 和/ 存储资源/ 实现/ 新型/ 网络协议/ 语义/ 或/ 状态/ 相关/ 的/ 特殊/ 处理/ 功能/ ,/ 如/ 任意/ 字段/ 的/ 修改/ 和/ 查表/ 、/ 存取数据/ 等/ ./ 状态/ 域/ 包含/ Metadata/ 、/ 资源/ 使用/ 状态/ 和/ 统计/ 计数器/ ./ LabelCast/ 控制器/ 用/ Cast/ 表对/ 转发/ 平面/ 服务/ 进行/ 调度/ ./ Openflow/ 转发/ 采用/ 多级/ 流水/ 方式/ ,/ 主要/ 实现/ 报文/ 选项/ 修改/ 等/ 操作/ ./ 将/ 新型/ 网络协议/ 处理/ 映射/ 到/ 固定/ 的/ 多级/ 流水/ 处理/ 很/ 复杂/ ./ LabelCast/ 中/ 动作/ 指令/ 实现/ 弱/ 语义/ 的/ 对/ 报文/ 的/ 通用/ 操作/ ,/ 服务/ 实现/ 网络协议/ 语义/ 或/ 状态/ 相关/ 的/ 深度/ 处理/ ,/ 能够/ 根据/ 新/ 网络协议/ 需求/ 动态/ 增加/ Cast/ 表项/ ,/ 扩展/ 支持/ 新型/ 协议/ 特殊/ 处理/ 的/ 服务/ 原语/ ,/ 具有/ 良好/ 的/ 可扩展性/ ./ 标签/ 分配/ 方式/ 能够/ 为/ 请求/ 相同/ 目的/ 节点/ 中/ 数据/ 或/ 服务/ 的/ 报文/ 分配/ 相同/ 的/ 标签/ ,/ 实现/ 不同/ 端系统/ 间/ 请求/ 报文/ 的/ 聚合/ 和/ 转发/ ,/ 能够/ 支撑/ 以/ 数据/ 或/ 服务/ 为/ 中心/ 的/ 非端/ 到/ 端的/ 新型/ 网络体系结构/ ./ 另外/ ,/ Label/ -/ Page6Cast/ 将/ 可变/ 的/ 网络/ 地址映射/ 到/ 了/ 定长/ 标签/ ,/ 可以/ 在/ 报文/ 已有/ 选项/ 或/ 扩展/ 选项/ 中/ 携带/ ./ 3.2/ ./ 2/ 指令/ 设计/ 转发/ 平面/ 报文/ 处理/ 通常/ 采用/ 多级/ 流水/ 处理/ 方式/ ,/ 包括/ 简单/ 的/ 报文/ 基本/ 选项/ 修改/ (/ 如/ TTL/ 减/ 1/ )/ 和/ 查表/ 输出/ ,/ 以及/ 标签/ 替换/ 等/ 操作/ ./ 我们/ 将/ 多级/ 流水/ 处理/ 分解/ 为/ 粗粒度/ 处理/ 流程/ ,/ 首先/ 是/ 报/ 文弱/ 语义/ 的/ 基本/ 选项/ 修改/ 、/ 规则/ 匹配/ 等/ 操作/ ,/ 然后/ 是/ 语义/ 关联/ 的/ 深度/ 报文/ 处理/ ,/ 最后/ 是/ 弱/ 语义/ 输出/ 控制/ ./ 在/ LabeCast/ 中/ ,/ 将/ 报文/ 基本/ 选项/ 修改/ 和/ 输出/ 控制/ 等/ 转发/ 操作/ 作为/ 指令/ ,/ 将/ 中间/ 阶段/ 深度/ 报文/ 处理/ 作为/ 网络服务/ ./ 指令/ 由/ 若干/ 基本/ 处理/ 报文/ 动作/ 构成/ ,/ 如/ 输出/ 和/ 丢弃/ 动作/ 等/ ,/ 指令/ 实现/ 了/ 无/ 状态/ 报文/ 转发/ 等/ 操作/ ./ 在/ LabelCast/ 处理/ 模型/ 中/ ,/ 首先/ 是/ 查找/ Label/ 表/ ,/ 对/ 报文/ 进行/ 快速/ 转发/ ./ 根据/ 报文/ 携带/ 的/ 标签/ 查找/ Label/ 表/ ,/ 执行/ 对应/ 的/ 处理/ 报文/ 指令/ ,/ 实现/ 转发/ 操作/ 等/ 简单/ 处理/ ./ 基于/ 流表/ 的/ Openflow/ 转发/ 采用/ 了/ 多级/ 流水/ 方式/ ,/ 利用/ 15/ 元组/ 查找/ 流/ 表项/ 选择/ 规则/ ,/ 确定/ 报文/ 处理/ 动作/ ,/ 其中/ 包括/ 精确/ 匹配/ 和/ 带/ 掩码/ 匹配/ ./ 与/ Openflow/ 转发/ 相比/ ,/ LabelCast/ 快速/ 转发/ 采用/ 精确/ 匹配/ 的/ 方式/ ,/ 根据/ 定/ 长/ 标签/ 查找/ Label/ 表/ ,/ 查表/ 实现/ 简单/ ./ 3.3/ Cast/ 表在/ LabelCast/ 中/ ,/ Cast/ 表对/ 报文/ 深度/ 处理/ 等/ 网络服务/ 进行/ 组织/ ,/ 如图/ 3/ 所示/ ,/ 包括/ 服务/ 、/ 服务/ 状态/ 和/ 资源/ 约束/ 等/ ./ 服务/ 能够/ 扩展/ ,/ 用户/ 可以/ 利用/ 服务/ 原语/ 开发/ 自定义/ 服务/ ,/ 实现/ 新型/ 网络/ 报文/ 处理/ 功能/ ./ 3.3/ ./ 1/ 服务/ 原语/ LabelCast/ 定义/ 了/ 基本/ 的/ 服务/ 原语/ atomService/ ,/ 作为/ 用户/ 开发/ 自定义/ 服务/ 的/ 应用/ 库/ ,/ 用户/ 也/ 可以/ 定义新/ 的/ 服务/ 原语/ ./ 定义/ 5/ ./ 缓冲区/ 原语/ ./ 表示/ 申请/ 用户/ 共享/ 缓冲区/ 或/ 专用/ 缓冲区/ 的/ 内存/ 操作/ ,/ 记为/ bufferAlloc/ ,/ atomService/ =/ bufferAlloc/ (/ restrictions/ )/ 对/ 服务/ 申请/ 存储资源/ 的/ 操作/ 进行/ 抽象/ ./ 定义/ 6/ ./ 线程/ 原语/ ./ 表示/ 创建/ 线程/ 的/ 操作/ ,/ 记为/ createThd/ ,/ atomService/ =/ createThd/ (/ restrictions/ )/ 对/ 服务/ 申请/ 计算资源/ 的/ 操作/ 进行/ 抽象/ ./ 定义/ 7/ ./ 注册/ 原语/ ./ 表示/ 将/ 用户/ 自定义/ 的/ 功能/ 加入/ 到/ 创建/ 的/ 线程/ 中/ 的/ 操作/ ,/ 记为/ registerFun/ ,/ atomService/ =/ registerFun/ 对/ 服务/ 功能/ 的/ 动态/ 加载/ ./ 在/ 报文/ 处理过程/ 中/ 涉及/ 多种/ 服务/ ./ 如/ IPoverMPLS/ [/ 14/ ]/ 处理过程/ 中/ ,/ 首先/ 是/ 报文/ 特定/ 字段/ 的/ 修改/ ,/ 然后/ 是/ 标签/ 的/ 出栈/ 或/ 入栈/ 操作/ ,/ 最后/ 是/ 输出/ 控制/ 等/ 操作/ ./ 多/ 服务/ 原语/ 顺序/ 执行/ 构成/ 服务/ 序列/ ,/ 实现/ 更/ 复杂/ 的/ 处理/ ,/ 服务/ 序列/ 中/ 服务/ 原语/ 之间/ 通过/ Metadata/ 传递/ 中间/ 处理结果/ ,/ Metadata/ 在/ Cast/ 表项/ 的/ 状态/ 域/ 中/ 记录/ ./ 3.3/ ./ 2/ 服务/ 扩展/ LabelCast/ 中/ 网络服务/ 以/ 网络/ 节点/ 中/ 计算/ 和/ 存储资源/ 为/ 运行/ 基础/ ,/ 以/ 转发/ 平面/ 服务例程/ 方式/ 实现/ 网络协议/ 相关/ 的/ 关键/ 数据/ 路径/ 上/ 深度/ 报文/ 处理/ ./ 转发/ 平面/ 服务程序/ 能够/ 动态/ 升级/ ,/ 扩展/ 新/ 的/ 服务/ ,/ 支持/ 新型/ 网络协议/ 相关/ 的/ 报文/ 处理/ ,/ 避免/ 转发/ 平面/ 硬件/ 不断/ 升级/ ./ 服务/ 是/ 基于/ 扩展/ 的/ LabelCast/ 资源/ 容器/ 开发/ 和/ 运行/ 的/ ./ 扩展/ 的/ LabelCast/ 资源/ 容器/ 提供/ 服务/ 运行/ 所/ 需/ 的/ 计算/ 、/ 存储/ 和/ 网络资源/ ,/ 利用/ 缓冲区/ 原语/ 和/ 线程/ 原语/ 等/ 对/ 网络/ 中/ 存储/ 和/ 计算/ 等/ 资源/ 进行/ 管理/ 和/ 配置/ ,/ 为/ 服务/ 运行/ 提供/ 了/ 独立/ 的/ 资源/ 空间/ ./ 扩展/ 的/ LabelCast/ 资源/ 容器/ 还/ 提供/ 了/ 基本/ 的/ 系统/ 功能/ ,/ 如/ 消息/ 服务/ 和/ 传输服务/ ,/ 能够/ 确保/ 网络应用/ 的/ 控制/ 消息/ 能够/ 传递/ 给/ Cast/ 服务/ ,/ 同时/ 将/ Cast/ 服务/ 收到/ 的/ 未能/ 处理/ 的/ 报文/ 转发给/ 网络应用/ ./ 扩展/ 的/ LabelCast/ 资源/ 容器/ 实现/ 了/ LabelCast/ 控制/ 平面/ 与/ 数据/ 平面/ 的/ 控制/ 与/ 数据/ 交互/ ,/ 为/ 用户/ 自定义/ 的/ 网络应用/ 程序/ 提供/ 了/ 运行/ 平台/ ./ 在/ LabelCast/ 处理/ 模型/ 中/ ,/ 在/ 快速/ 转发/ 之后/ ,/ 转发/ 平面/ 根据/ Cast/ 表/ 进行/ 转发/ 决策/ ,/ 调度/ 对/ 报文/ 深度/ 处理/ 的/ 服务/ ./ 服务/ 实现/ 了/ 复杂/ 的/ 报文/ 处理/ 功能/ ,/ 如/ 报文/ 任意/ 字/ 段/ 修改/ 、/ 标签/ 替换/ 、/ 基于/ 规则/ 的/ 转发/ 控制/ 和/ 报文/ 存储/ 等/ 语义/ 或/ 状态/ 相关/ 的/ 深度/ 报文/ 处理/ ,/ 还/ 实现/ 了/ 报文/ 的/ 单播/ 、/ 组播/ 或/ 基于/ 内容/ 的/ 转发/ 等/ ./ 服务/ 根据/ 协议/ 状态/ 和/ 处理/ 策略/ 可以/ 动态/ 修改/ 转发/ 平面/ Label/ 表/ 规则/ ,/ 调整/ 后续/ 报文/ 的/ 处理/ 动作/ ./ 另外/ ,/ 服务/ 可以/ 解析/ 报文/ ,/ 产生/ 新/ 报文/ ./ 服务/ 增强/ 了/ 网络/ 转发/ 平面/ 处理/ 报文/ 的/ 能力/ ,/ 能够/ 满足/ 新型/ 网络协议/ 特殊/ 的/ 处理/ 报文/ 的/ 功能/ 需求/ ./ 3.4/ 基于/ LabelCast/ 的/ 多/ 协议/ 承载/ 在/ LabelCast/ 控制器/ 中/ 可以/ 将/ 多种/ 网络体系结构/ 中/ 节点/ 地址映射/ 到/ 标签/ ,/ 如图/ 4/ 所示/ ./ 当未/ 命中/ 的/ 报文/ 被/ 送到/ LabelCast/ 控制器/ 后/ ,/ 控制器/ 根据/ 报文/ 中/ 地址/ ,/ 分配/ 定/ 长/ 标签/ ,/ 并/ 调用/ 相应/ 的/ 网络应用/ 控制器/ (/ 程序/ )/ 解析/ 报文/ 和/ 计算/ 报文/ 处理/ 规则/ ,/ 即/ 动作/ 指令/ 或/ 服务/ ,/ 最后/ 将/ 报文/ 标签/ 与/ 规则/ 中/ 对/ 报文/ 处理/ 动作/ 等/ 下载/ 到/ 转发/ 平面/ Label/ 表/ ,/ 同时/ 构造/ Cast/ 表来/ 组织/ 服务/ 序列/ ,/ 实现/ 网络协议/ 相关/ 的/ 深度/ 处理/ ./ 另外/ ,/ 控制器/ 中/ 网络应用/ 控制器/ (/ 程序/ )/ 还会/ 计算/ 报文/ 转发/ Page7/ 路径/ ,/ LabelCast/ 控制器/ 根据/ 转发/ 路径/ 计算/ 出/ 标签/ ,/ 将/ 标签/ 替换/ 等/ 输出/ 控制/ 写入/ Label/ 表/ ./ 网络应用/ 控制器/ 在/ 解析/ 报文/ 时/ 获得/ 了/ 标签/ 选项/ 的/ 偏移量/ ,/ 采用/ 图/ 4/ 多/ 协议/ 统一/ 承载/ 在/ 转发/ 平面/ 标签/ 与/ 处理/ 报文/ 的/ 服务/ 关联/ ,/ 实现/ 对/ 报文/ 协议/ 相关/ 的/ 处理/ ,/ 在/ 控制/ 平面/ 标签/ 与/ 处理/ 报文/ 的/ 网络应用/ 控制器/ 关联/ ,/ 实现/ 对/ 报文/ 转发/ 的/ 控制/ ./ 标签/ 只有/ 在/ 报文/ 转发/ 和/ 控制/ 处理/ 中才/ 与/ 特定/ 网络体系结构/ 的/ 处理/ 流程/ 和/ 控制/ 方式/ 映射/ ,/ 是/ 一种/ 弱/ 语义/ 的/ 承载/ 层/ ,/ 能够/ 支持/ 基于/ 流/ 的/ 端/ 到/ 端的/ 转发/ 和/ 以/ 数据/ 或/ 服务/ 为/ 中心/ 的/ 非端/ 到/ 端的/ 转发/ 等/ ,/ 支持/ 多/ 协议/ 统一/ 承载/ ,/ 能够/ 简化/ 硬件/ 实现/ ,/ 增强/ 网络/ 节点/ 的/ 可扩展性/ ./ 4LabelCast/ 应用/ LabelCast/ 支持/ 基于/ 规则/ 的/ 报文/ 转发/ 和/ 基于/ 名字/ 的/ NDN/ 报文/ 转发/ 等/ ,/ 能够/ 支持/ 多种/ 网络/ 类型/ ,/ 简化/ 报文/ 转发/ 处理/ ./ 4.1/ 基于/ 规则/ 的/ 报文/ 转发/ 4.1/ ./ 1/ 规则/ 与/ 标签/ 映射/ 基于/ 规则/ 的/ 报文/ 转发/ 控制器/ 作为/ LabelCast/ 控制器/ 中/ 一种/ 网络/ 控制/ 应用/ 来/ 运行/ ,/ LabelCast/ 控制器接收/ 到/ packet/ -/ in/ 事件/ 后/ 根据/ 报文/ 类型/ 以及/ 注册/ 的/ 网络应用/ ,/ 选择/ 对应/ 的/ 网络应用/ 控制程序/ ./ 规则/ 转发/ 控制器/ 根据/ 报文/ 头/ 选项/ 以及/ 管理策略/ 设计/ 报文/ 转发/ OLV/ (/ OffsetLengthValue/ )/ 表示/ 规则/ 的/ 匹配/ 域/ ,/ 避免/ 了/ 转发/ 平面/ 查找/ 匹配/ 时/ 对/ 报文/ 的/ 解析/ ,/ 且/ 增强/ 匹配/ 操作/ 的/ 灵活性/ ./ 规则/ ,/ 并/ 将/ 规则/ 通告/ 给/ LabelCast/ 控制器/ ./ LabelCast/ 控制器/ 为/ 基于/ 规则/ 的/ 报文/ 转发/ 应用/ 分配/ 标签/ Label/ ,/ 并/ 采用/ Hash/ 方式/ 计算/ 规则/ 匹配/ 域/ 的/ ID/ ,/ 将/ ID/ 作为/ 与/ 规则/ 转发/ 应用/ 关联/ 的/ 标签/ 的/ 选项/ ./ LabelCast/ 控制器/ 将/ 规则/ 转发/ 控制器/ 产生/ 的/ 规则/ 中/ 匹配/ 域用/ 标签/ 替换/ ,/ 规则/ 中/ 动作/ 域/ 保持/ 不变/ ,/ 来/ 配置/ 转发/ 平面/ Label/ 表/ ,/ 如图/ 5/ (/ a/ )/ 所示/ ./ LabelCast/ 控制器/ 将/ 与/ 规则/ 对应/ 的/ 标签/ 通告/ 给/ 端系统/ ,/ 端系统/ 在/ 后续/ 发送/ 的/ 报文/ 中/ 携带/ 该/ 标签/ ./ 由于/ 规则/ (/ 匹配/ 域/ 除/ 输入/ 端口号/ 外/ )/ 在/ 转发/ 路径/ 上/ 多/ 跳/ 节点/ 中是/ 一致/ 的/ ,/ 处理/ 报文/ 的/ 动作/ 也/ 是/ 相同/ 的/ ,/ LabelCast/ 控制器/ 对/ 转发/ 路径/ 中/ 所有/ 节点/ 下载/ 相同/ 的/ 与/ 标签/ 关联/ 的/ 转发/ 规则/ ./ 基于/ 规则/ 的/ 报文/ 转发/ 处理过程/ 不仅/ 涉及/ 输入/ 控制/ 和/ 输出/ 控制/ 等/ 简单/ 操作/ ,/ 还/ 可能/ 包括/ MPLS/ 标签/ 替换/ 、/ 出栈/ 和/ 入栈/ ,/ VLANID/ 处理/ 和/ 流量/ 整形/ 等/ 复杂/ 处理/ ,/ 在/ LabelCast/ 中/ 设计/ 规则/ 转发/ 服务/ 实现/ 复杂/ 的/ 报文/ 处理/ ,/ 并/ 以/ 该/ 服务/ 和/ 服务/ 状态/ 等/ 来/ 配置/ Cast/ 表/ ./ 4.1/ ./ 2/ 与/ Openflow/ 的/ 比较/ Openflow/ 规范/ 1.2/ 定义/ 了/ 以/ 十五元/ 组/ 作为/ 匹配/ 域/ 的/ 转发/ 规则/ ,/ 并/ 采用/ TLV/ 〈/ Type/ ,/ Length/ ,/ Value/ 〉/ 表示/ ,/ 支持/ 灵活/ 扩展/ ./ 通常/ ,/ 在/ 转发/ 功能/ 实现/ 中/ ,/ 将/ Page8/ 十五元/ 组/ 匹配/ 域/ 组织/ 成/ 树形/ 结构/ ./ 树形/ 结构/ 减小/ 了/ 规则/ 存储/ 的/ 空间/ ,/ 具有/ 很/ 好/ 的/ 扩展性/ ,/ 但是/ 增加/ 了/ 查表/ 的/ 次数/ ,/ 另外/ ,/ 需要/ 在/ 树/ 的/ 每/ 一级/ 进行/ 带/ 掩码/ 的/ 模糊/ 匹配/ 或/ 精确/ 匹配/ ,/ 因此/ Openflow/ 转发/ 实现/ 较为/ 复杂/ ./ 对于/ LabelCast/ 中/ 基于/ 规则/ 的/ 报文/ 转发/ ,/ 由/ LabelCast/ 控制器/ 中/ 规则/ 转发/ 控制器/ 实现/ 转发/ 控制/ ,/ 图/ 5LabelCast/ 规则/ 配置/ 4.2/ 基于/ 名字/ 的/ 报文/ 转发/ 4.2/ ./ 1/ 名字/ 聚合/ 与/ 标签/ 分配/ 在/ NDN/ 网络/ 中/ Interest/ 报文/ 根据/ FIB/ 表/ 转发/ ,/ Data/ 报文/ 根据/ PIT/ 表/ 转发/ [/ 15/ ]/ ./ PIT/ 表是/ 根据/ Interest/ 报文/ 以及/ 其/ 输入/ 端口号/ 产生/ ,/ 并/ 采用/ 最长/ 前缀/ 匹配/ 查表/ 方式/ ,/ 这/ 是因为/ 内容/ 提供者/ 仅仅/ 发布/ 内容/ 的/ 名字/ ,/ 不/ 包括/ 内容/ 的/ 数据/ 块/ ,/ 而且/ 提供者/ 保证/ 了/ 内容/ 中/ 不同/ 数据/ 块/ 在/ 同一/ 节点/ 中/ 存储/ ./ 对于/ 结构化/ 的/ 名字/ 可以/ 采用/ 前缀/ 方式/ 聚合/ ,/ 将/ 名字/ 的/ 前缀/ 映射/ 到/ 固定/ 长度/ 的/ 标签/ ./ 采用/ 基于/ 前缀/ 分配/ 标签/ 的/ 方式/ 使得/ 端系统/ 后续/ 访问/ 该/ 内容/ 中/ 不同/ 数据/ 块/ 的/ Interest/ 报文/ 能够/ 分配/ 同一个/ 标签/ ,/ 并/ 按照/ 相同/ 的/ 路径/ 和/ 处理/ 方式/ 等/ 转发/ 策略/ 在/ 网络/ 中/ 转发/ ,/ 实现/ 访问/ 同一/ 内容/ 的/ Interest/ 报文/ 名字/ 的/ 聚合/ ./ 如给/ 访问/ 不同/ 视频/ 片段/ // parc/ ./ com/ // videos/ // WidgetA/ ./ mpg/ // s0/ 和/ // parc/ ./ com/ // videos/ // WidgetA/ ./ mpg/ // s1/ 的/ Interest/ 报文/ 分配/ 相同/ 的/ 标签/ L12/ ,/ 后续/ 报文/ 只/ 需/ 通过/ 标签/ 匹配/ 进行/ 转发/ ./ 4.2/ ./ 2Label/ 表/ 和/ Cast/ 表/ 配置/ LabelCast/ 控制器/ 用/ 分配/ 的/ 标签/ 和/ NDN/ 服务/ LabelCast/ 控制器/ 将/ 报文/ 转发/ 规则/ 映射/ 到/ 与/ 定长/ 标签/ 关联/ 的/ LabelCast/ 规则/ ./ 报文/ 携带/ 的/ 标签/ 表明/ 了/ 报文/ 按照/ 规则/ 转发/ 处理/ ,/ 标签/ 选项/ 指出/ 了/ 处理/ 该报/ 文/ 的/ 规则/ ,/ 根据/ 定/ 长/ 标签/ 查找/ Label/ 表/ 获得/ 的/ 动作/ 指令/ 和/ 服务/ 表明/ 处理/ 报文/ 的/ 方式/ ,/ 因此/ LabelCast/ 基于/ 定/ 长/ 标签/ 的/ 转发/ 更加/ 简单/ ./ 索引/ 配置/ Label/ 表/ ,/ 如图/ 5/ (/ b/ )/ 所示/ ./ LabelCast/ 控制器/ 用/ Store/ 服务/ 构造/ Cast/ 表/ 转发/ 规则/ ,/ 实现/ PIT/ 表/ 功能/ 以/ 转发/ Data/ 报文/ ,/ 还/ 可以/ 配置/ Data/ 报文/ 的/ 处理/ 策略/ ,/ 如/ 缓存/ 概率/ 等/ ./ 另外/ ,/ 用/ Load/ 服务/ 构造/ Cast/ 表/ 转发/ 规则/ ,/ 实现/ CS/ 表/ 功能/ 以/ 转发/ Interest/ 报文/ ,/ 也/ 可以/ 确定/ Interest/ 报文/ 是否/ 需要/ 访问/ 网络/ 节点/ 中/ 缓存/ 的/ 数据/ ./ 若/ Interest/ 报文/ 不/ 访问/ 缓存/ 的/ 数据/ ,/ 则/ 实现/ 端/ -/ 端的/ 通信/ 模式/ ./ Interest/ 报文/ 和/ Data/ 报文/ 的/ 转发/ 路径/ 是/ 由/ LabelCast/ 控制器/ 计算/ ./ 为了/ 简化/ 计算/ ,/ 为/ EgressData/ 报文/ 和/ IngressInterest/ 报文/ 分配/ 相同/ 的/ 标签/ ,/ 即/ Data/ 报文/ 按照/ Interest/ 报文/ 的/ 路径/ 返回/ ./ 对于/ 能够/ 聚合/ 的/ 名字/ ,/ 当/ Interest/ 报文/ 到达/ 时/ ,/ 更新/ 该/ 标签/ 和/ 端口/ 的/ 请求/ 状态/ ,/ 即/ 向/ 端口/ 的/ 状态/ 集合/ 中/ 增加/ 新/ 的/ 数据/ 块/ 号/ (/ Chunknumber/ )/ ./ 当/ Data/ 报文/ 到达/ 时/ ,/ 修改/ 标签/ 和/ 选择/ 输出/ 端口号/ ,/ 并/ 从/ 端口/ 的/ 状态/ 集合/ 中/ 删除/ 到达/ 的/ Data/ 报文/ 对应/ 的/ 数据/ 块/ 号/ ./ 用/ Bloomfilter/ [/ 16/ ]/ 记录/ 端口/ 的/ 状态/ 集合/ ,/ Bloomfilter/ 作为/ NDN/ 报文/ 转发/ 规则/ 中/ 状态/ 域/ Status/ ./ Page95LabelCast/ 原型/ 系统/ NetMagic/ -/ Pro5/ ./ 1/ 原型/ 系统/ 设计/ 5.1/ ./ 1/ 原型/ 系统结构/ 基于/ 通用/ 多核/ 处理器/ FT1000/ 和/ 网络/ 加速/ 引擎/ NPE/ 设计/ 实现/ 了/ 支持/ LabelCast/ 转发/ 的/ 原型/ 系统/ NetMagic/ -/ Pro/ ,/ 如图/ 6/ 所示/ ./ 在/ NPE/ 中/ 设计/ 了/ Label/ 表/ ,/ 在/ 转发/ 平面/ 调度/ 报文/ 转发/ 操作/ ,/ 以及/ 报文/ 输出/ 控制/ 等/ 指令/ ./ 同时/ 利用/ 通过/ PCI/ -/ E/ 总线/ 连接/ 的/ FT1000/ 提供/ 的/ 计算/ 和/ 存储资源/ ,/ 设计/ 了/ Cast/ 表/ ,/ 实现/ 协议/ 、/ 状态/ 相关/ 的/ 深度/ 处理/ 等/ 服务/ ./ LabelCast/ 以/ Label/ 表/ 和/ Cast/ 表向/ 控制/ 平面/ 提供/ 了/ 统一/ 的/ 管理/ 和/ 配置/ 接口/ ,/ 以及/ 计算/ 、/ 存储/ 和/ 网络资源/ 状态/ 等/ 信息/ ./ 基于/ 统一/ 的/ 网络/ 转发/ 平面/ 接口/ ,/ LabelCast/ 控制器/ 向/ 在/ 其/ 上/ 运行/ 的/ 网络应用/ 控制器/ (/ 程序/ )/ 提供/ 了/ 统一/ 的/ 视图/ ,/ 以及/ 转发/ 平面/ 编程/ 接口/ ./ LabelCast/ 控制器接收/ 到/ 查表/ 未/ 命中/ 的/ 报文/ 后/ ,/ 经过/ 报文/ 解析/ 将/ 报文/ 提交/ 给/ 新型/ 网络体系结构/ 对应/ 的/ 网络应用/ 控制器/ (/ 程序/ )/ ./ 网络应用/ 控制器/ (/ 程序/ )/ 生成/ 报文/ 处理/ 规则/ ,/ LabelCast/ 控制器/ 为/ 报文/ 分配/ 标签/ ,/ 并/ 将/ 规则/ 中/ 匹配/ 域/ 替换/ 为/ 标签/ ,/ 最后/ 下载/ 规则/ 到/ 转发/ 平面/ ./ 标签/ 对/ 访问/ 相同/ 内容/ 的/ 报文/ 聚合/ ,/ LabelCast/ 控制器/ 上/ 网络应用/ 控制器/ (/ 程序/ )/ 只/ 需要/ 根据/ 网络协议/ 类型/ 对首/ 报文/ 进行/ 处理/ 和/ 分配/ 标签/ ,/ 后续/ 报文/ 在/ 转发/ 平面/ 由/ 标签/ 指示/ 的/ 网络协议/ 相关/ 的/ 服务/ 进行/ 处理/ ./ 原型/ 系统/ NetMagic/ -/ Pro/ 硬件/ 实现/ 简单/ ,/ 且/ 支持/ 全局/ 服务/ 的/ 动态/ 调度/ 和/ 扩展/ ./ 图/ 6LabelCast/ 转发/ 原型/ 系统/ NetMagic/ -/ Pro5/ ./ 1.2/ 服务/ 开发/ 模型/ 在/ 数据/ 平面/ ,/ 根据/ 报文/ 标签/ 查找/ 对应/ 的/ 服务/ Cast/ 表/ ,/ 调度/ 服务/ 来/ 处理/ 报文/ ,/ 如/ IPv4/ 与/ IPv6/ 共存/ 与/ 过渡/ ,/ 基于/ 名字/ 的/ 报文/ 转发/ ,/ 基于/ 规则/ 的/ 转发/ 等/ ./ 以/ 可/ 扩展/ 的/ 资源/ 容器/ 为/ 平台/ ,/ 用户/ 能够/ 扩展/ 自定义/ 的/ 报文/ 转发/ 处理/ 服务/ ,/ 在/ 服务/ 开发/ 中/ 可以/ 调用/ LabelCast/ 原型/ 系统/ 提供/ 的/ 应用/ 组件/ 库/ 和/ 系统/ 库/ ,/ 来/ 加速/ 应用/ 开发/ ./ 在/ 原型/ 系统/ NetMagic/ -/ Pro/ 设计/ 中/ ,/ 实现/ 了/ 扩展/ 的/ Linux/ 容器/ XLC/ (/ eXtensionLinuxContainer/ )/ 对/ 计算/ 和/ 存储/ 等/ 资源/ 进行/ 虚拟化/ 和/ 分配/ ,/ 简化/ 用户/ 自定义/ 服务/ 的/ 开发/ ./ 在/ 控制/ 平面/ ,/ 用户/ 基于/ XLC/ 接口/ 开发/ Label/ -/ Cast/ 网络/ 控制器/ (/ 程序/ )/ ./ XLC/ 接口/ 与/ 网络/ 处理器/ 论坛/ NPF/ 定义/ 的/ NPAS/ 以及/ IETF/ 定义/ 的/ ForCES/ 等/ 转发/ 与/ 控制/ 层/ 通信/ [/ 17/ ]/ 具有/ 相似/ 的/ 功能/ ,/ 向/ 控制程序/ 提供/ 管理/ 接口/ API/ ,/ 监控/ 数据/ 转发/ 平面/ 统计/ 计数器/ ,/ 还/ 提供/ 服务/ API/ ,/ 维护/ 数据/ 平面/ 转/ 发表/ 项/ ,/ 实现/ 转发/ 平面/ 与/ 控制/ 平面/ 之间/ 的/ 消息/ 和/ 状态/ 传递/ ./ 5.1/ ./ 3/ 开放/ 的/ 服务/ 注册/ 接口/ XLC/ 还/ 提供/ 了/ 统一/ 开放/ 的/ 用户/ 自定义/ 服务/ 注册/ 接口/ ,/ 即/ 服务/ 原语/ registerFun/ ,/ 支持/ 用户/ 开发/ 的/ 自定义/ 网络服务/ 的/ 动态/ 注册/ ./ 对于/ 用户/ 实现/ 的/ 自定义/ 网络/ 服务程序/ ,/ 需要/ 通过/ 该/ 统一/ 开放/ 的/ 服务/ 注册/ 接口/ 向/ 转发/ 平面/ 注册/ ,/ 就/ 可以/ 加载/ 到/ LabelCast/ 转发/ 平面/ 中/ 运行/ ./ 该/ 接口/ 与/ 操作系统/ 提供/ 的/ 钩子/ 函数/ 具有/ 相同/ 的/ 功能/ ./ 服务/ 注册/ 接口/ registerFun/ 包含/ 用户/ 自定义/ 服务/ 的/ 名称/ name/ 、/ 用户/ 自定义/ 服务程序/ 的/ 句柄/ user/ _/ serv/ _/ proc/ 、/ 用户/ 自定义/ 服务/ 运行/ 的/ 中间状态/ Meta/ -/ data/ 以及/ LabelCast/ 规则/ 中/ 资源/ 约束/ Restrictions/ ./ 资源/ 约束/ 主要/ 包括/ thread/ _/ Priority/ 、/ buffer/ _/ amount/ 、/ virtual/ _/ queue/ ,/ 分别/ 对/ 服务/ 使用/ 的/ 计算/ 、/ 存储/ 和/ 带宽/ 等/ 资源/ 进行/ 限制/ ./ 用户/ 可以/ 通过/ 该/ 接口/ 中/ 消息/ 传递函数/ npe/ _/ read/ 和/ npe/ _/ write/ 读取/ 或者/ 修改/ 当前/ 服务/ 的/ 状态/ ,/ 还/ 能够/ 增加/ 、/ 删除/ 用户/ 自定义/ 服务/ 中/ 规则/ ./ 5.2/ IO/ 性能/ 测试/ 与/ 分析/ 在/ LabelCast/ 转发/ 中/ 转发/ 平面/ 提供/ 了/ 对/ 报文/ 转发/ 的/ 基本操作/ 和/ 深度/ 处理/ (/ 服务/ )/ ./ 基本/ 转发/ 操作/ 由/ 转发/ 平面网络/ 加速/ 引擎/ NPE/ 实现/ ,/ 提供/ 弱/ 语义/ 的/ 通用/ 的/ 报文/ 处理/ 动作/ 指令/ ,/ 包括/ 查表/ 、/ 基本/ 报文/ 选项/ 修改/ 和/ 输出/ 控制/ 等/ ./ 深度/ 处理/ (/ 服务/ )/ 由/ 在/ 与/ NPE/ 紧/ 耦合/ 的/ 通用/ 多核/ 处理器/ FT1000/ 之中/ 运行/ 的/ 服务/ 实现/ ,/ 提供/ 与/ 数据/ 路径/ 上/ 网络协议/ 语义/ 或/ 状态/ 关联/ 的/ 深度/ 报文/ 处理/ 的/ 服务/ ,/ 如/ 报文/ 特定/ 字/ 段/ 替换/ 、/ 报文/ 缓存/ 和/ 基于/ 矩阵/ 的/ 路由/ 计算/ 等/ 功能/ ./ 因此/ ,/ 在/ 原型/ 系统/ NetMagic/ -/ Pro/ 中/ NPE/ 与/ FT1000/ 间/ 总线/ 传输/ 效率/ 是/ 系统/ 性能/ 提高/ 的/ 关键/ ./ 在/ 原型/ 系统/ NetMagic/ -/ Pro/ 设计/ 实现/ 中/ ,/ 针对/ NPE/ 与/ FT1000/ 间/ 传输/ 机制/ 进行/ 优化/ ,/ 设计/ 实现/ 了/ Page10/ 高效/ 的/ PacketDirect/ 机制/ ,/ 以/ 提高/ 系统/ 吞吐/ 率/ ./ 利用/ 测试仪/ 2/ 个/ 10Gbps/ 端口/ 发包/ ,/ 对/ 原型/ 系统/ Net/ -/ Magic/ -/ Pro/ 在/ 不同/ 线程/ 数及/ 报文/ 长度/ 情况/ 下/ IO/ 性能/ 进行/ 测试/ ,/ 结果/ 如图/ 7/ 所示/ ./ 随着/ 转发/ 线程/ 的/ 数目/ 增加/ ,/ 处理/ 能力/ 的/ 增强/ 导致/ 不同/ 长度/ 报文/ 转发/ 率/ 都/ 有/ 一定/ 提升/ ;/ 1024Bytes/ 报文/ 在/ 1/ 线程/ 、/ 512Bytes/ 在/ 3/ 线程/ 、/ 256Bytes/ 在/ 4/ 线程/ 时/ 达到/ 最高/ 转发/ 率/ 的/ 原因/ 在于/ 此时/ 报文/ 流量/ 已/ 基本/ 达到/ 测试仪/ 端口/ 最大/ 带宽/ ,/ 即/ 20Gbps/ ;/ 64Bytes/ 报文/ 转发/ 率/ 相对/ 较/ 高/ ,/ 原因/ 在于/ 在/ 内部/ 报文/ 缓冲区/ 大小/ 一定/ 情况/ 下/ ,/ 可/ 缓存/ 小/ 报文/ 数目/ 相对/ 较/ 多/ ./ 对于/ 系统/ 吞吐/ 率/ ,/ 同一/ 线程/ 数目/ 下/ ,/ 报文/ 长度/ 越大/ ,/ 吞吐/ 率越/ 高/ ,/ 原因/ 在于/ 报文/ 转发/ 率/ 相同/ 情况/ 下/ ,/ 系统/ 流量/ 和/ 报文/ 长度/ 成正比/ ;/ 而/ 当/ 报文/ 长度/ 达到/ 1024Bytes/ 时/ ,/ 单线程/ 即可/ 达到/ 测试仪/ 流量/ 上限/ ;/ 其他/ 长度/ 报文/ 随着/ 线程/ 数目/ (/ 处理/ 能力/ )/ 增加/ ,/ 系统/ 吞吐/ 率/ 也/ 会/ 增加/ ./ 测试/ 结果表明/ ,/ 在/ PacketDirect/ 机制/ 支撑/ 下/ ,/ 原型/ 系统/ NetMagic/ -/ ProIO/ 系统/ 满足/ 端口/ 吞吐/ 率/ 等/ 性能/ 要求/ ./ 6/ 总结/ 和/ 下/ 一步/ 工作/ LabelCast/ 是/ 一种/ 普适/ 的/ 转发/ 平面/ 抽象/ ,/ 用/ Label/ 表/ 和/ Cast/ 表/ 分别/ 表示/ 网络/ 节点/ 转发/ 和/ 服务/ 的/ 能力/ ./ 转发/ 平面/ 基于/ 定长/ Label/ 查找/ 和/ 调度/ 服务/ ,/ 包括/ 基于/ OLV/ 的/ 报文/ 基本/ 选项/ 的/ 匹配/ 和/ 修改/ 等/ 弱/ 语义/ 的/ 通用/ 动作/ 指令/ ,/ 基于/ 集成/ 的/ 计算/ 和/ 存储资源/ 实现/ 数据/ 路径/ 上/ 任意/ 字/ 段/ 查找/ 和/ 修改/ 等/ 网络协议/ 语义/ 或/ 状态/ 相关/ 的/ 特殊/ 处理/ 的/ 服务/ ,/ 并且/ 能够/ 动态/ 扩展/ 新/ 服务/ 以/ 支持/ 新型/ 网络体系结构/ 特殊/ 处理/ 的/ 需求/ ./ LabelCast/ 基于/ 标签/ 实现/ 了/ 多/ 协议/ 统一/ 承载/ ,/ 以/ 标签/ 来/ 聚合/ 和/ 转发/ 不同/ 端系统/ 的/ 请求/ ,/ 能够/ 支持/ 基于/ 流/ 的/ 端/ 到/ 端的/ 转发/ 和/ 以/ 数据/ 或/ 服务/ 为/ 中心/ 的/ 非端/ 到/ 端的/ 新型/ 网络/ 转发/ ,/ 为/ SDN/ 提供/ 了/ 一种/ 普适/ 的/ 转发/ 平面/ 抽象/ ./ 下/ 一步/ 基于/ 通用/ 多核/ 处理器/ 和/ 网络/ 加速/ 引擎/ 继续/ 完善/ LabelCast/ 转发/ 的/ 原型/ 系统/ NetMagic/ -/ Pro/ ,/ 以/ 实现/ NDN/ 转发/ ./ 同时/ ,/ 研究/ LabelCast/ 利用/ 缓冲区/ 原语/ 和/ 线程/ 原语/ 等/ 对/ 网络/ 中/ 集成/ 的/ 计算/ 和/ 存储/ 等/ 资源/ 进行/ 抽象/ 和/ 隔离/ ,/ 为/ 服务/ 扩展/ 提供/ 开放/ 的/ 开发/ 接口/ ,/ 进一步/ 增强/ LabelCast/ 可扩展性/ ./ 

