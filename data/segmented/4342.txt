Page1/ 基于/ 上下文/ 偏好/ 的/ Web/ 数据库/ 查询/ 结果/ Top/ -/ 犓/ 排序/ 方法/ 孟祥福/ 1/ )/ 马宗民/ 2/ )/ 李昕/ 3/ )/ 张霄雁/ 1/ )/ 王星/ 1/ )/ 1/ )/ (/ 辽宁/ 工程技术/ 大学/ 电子/ 与/ 信息/ 工程学院/ 辽宁/ 葫芦岛/ 125105/ )/ 2/ )/ (/ 东北大学/ 信息科学/ 与/ 工程学院/ 沈阳/ 110819/ )/ 3/ )/ (/ 辽宁/ 工业/ 大学/ 计算中心/ 辽宁/ 锦州/ 121001/ )/ 摘要/ 为了/ 解决/ Web/ 数据库/ 多/ 查询/ 结果/ 的/ 问题/ ,/ 该文/ 提出/ 了/ 一种/ 基于/ 上下文/ 偏好/ 的/ 查询/ 结果/ top/ -/ k/ 排序/ 方法/ ./ 首先/ 提出/ 了/ 一种/ 带/ 偏好/ 程度/ 的/ 上下文/ 偏好/ 模型/ :/ i1/ / i2/ ,/ d/ |/ X/ ,/ 表示/ 在/ 上下文/ 条件/ X/ 下/ ,/ 项/ i1/ 与/ i2/ 相比/ ,/ 用户/ 偏好/ 项/ i1/ 的/ 程度/ 为/ d/ (/ 0.5/ / d/ / 1/ )/ ,/ 带/ 偏好/ 程度/ 的/ 上下文/ 偏好/ 通过/ 在/ 查询/ 历史/ 中/ 使用/ 关联/ 规则/ 挖掘/ 获得/ ./ 基于/ 上下文/ 偏好/ ,/ 提出/ 了/ 一种/ 查询/ 结果/ top/ -/ k/ 排序/ 方法/ ,/ 给出/ 了/ 相应/ 的/ 元组/ 排列/ 创建/ 、/ 聚类/ 和/ top/ -/ k/ 排序/ 算法/ ./ 实验/ 结果表明/ ,/ 提出/ 的/ 上下文/ 偏好/ 模型/ 具有/ 较强/ 的/ 偏好/ 表达能力/ ,/ top/ -/ k/ 排序/ 方法/ 能够/ 较/ 好/ 地/ 满足用户/ 需求/ 和/ 偏好/ 并且/ 具有/ 较/ 高/ 的/ 执行/ 效率/ ./ 关键词/ Web/ 数据库/ ;/ 上下文/ 偏好/ ;/ 元组/ 聚类/ ;/ top/ -/ k/ 排序/ 1/ 引言/ 随着/ Internet/ 的/ 普遍/ 应用/ 和/ Web/ 数据库/ 中/ 蕴含/ 信息量/ 的/ 快速增长/ ,/ 访问/ Web/ 数据库/ 已/ 成为/ 人们/ 获取信息/ 的/ 重要/ 手段/ [/ 1/ ]/ ./ 由于/ Web/ 数据库/ 通常/ 蕴含/ 海量/ 数据/ ,/ 如果/ 用户/ 查询/ 不/ 很/ 严格/ ,/ 则/ 会/ 导致/ 多/ 查询/ 结果/ 的/ 问题/ ,/ 这种/ 情况/ 下/ 大多数/ 用户/ 希望/ Web/ 数据库/ 查询/ 系统/ 能够/ 对/ 查询/ 结果/ 进行/ 排序/ ,/ 并且/ 快速/ 返回/ 前/ k/ 个/ 最为/ 相关/ 的/ 结果/ ./ 因此/ ,/ 查询/ 结果/ top/ -/ k/ 排序/ 方法/ 的/ 研究/ 具有/ 十分/ 重要/ 的/ 意义/ ./ 近年来/ ,/ 一些/ 研究者/ 提出/ 了/ 基于/ 用户/ 偏好/ 的/ 查询/ 结果/ 排序/ 方法/ [/ 2/ -/ 6/ ]/ ./ 这些/ 方法/ 在/ 排序/ 中/ 考虑/ 了/ 用户/ 偏好/ ,/ 但/ 却/ 没有/ 考虑/ 产生/ 偏好/ 的/ 上下文/ 条件/ ,/ 而/ 实际上/ 用户/ 偏好/ 与/ 上下文/ 密切相关/ ,/ 在/ 不同/ 的/ 上下文/ 条件/ 下/ ,/ 偏好/ 及其/ 程度/ 通常/ 有所不同/ ;/ 文献/ [/ 7/ -/ 8/ ]/ 的/ 排序/ 方法/ 考虑/ 了/ 用户/ 偏好/ 的/ 上下文/ 条件/ ,/ 但/ 偏好/ 模型/ 只能/ 表达/ 二元/ 偏序/ 关系/ 而/ 不能/ 体现/ 出/ 偏好/ 程度/ ,/ 这/ 将/ 导致/ 大量/ 偏好/ 共存/ 的/ 情况/ 下/ ,/ 很难/ 协调/ 多个/ 偏好/ 之间/ 的/ 矛盾/ ./ 本文/ 提出/ 一种/ 带/ 偏好/ 程度/ 的/ 上下文/ 偏好/ (/ 简称/ 上下文/ 偏好/ )/ 模型/ ,/ 其/ 形式/ 为/ i1/ / i2/ ,/ d/ |/ X/ ,/ 表示/ 在/ 上下文/ 条件/ X/ 下/ ,/ 项/ i1/ 与/ i2/ 相比/ ,/ 用户/ 偏好/ 项/ i1/ 的/ 程度/ 为/ d/ (/ 0.5/ / d/ / 1/ )/ ./ 下面/ 给出/ 一个/ 上下文/ 偏好/ 例子/ ./ 例/ 1/ ./ 给定/ 一个/ 来自/ Yahoo/ 网站/ 的/ 二手/ 汽车/ 销售/ 数据库/ ,/ 其/ 关系/ 模式/ 为/ CarDB/ (/ Make/ ,/ Model/ ,/ Price/ ,/ Color/ ,/ Engine/ ,/ Year/ ,/ Mileage/ )/ ,/ CarDB/ 中/ 的/ 每条/ 元组/ 代表/ 一个/ 二手车/ ./ 对于/ CarDB/ ,/ 假设/ 有/ 如下/ 上下文/ 偏好/ :/ {/ Model/ =/ Accord/ / Model/ =/ Camry/ ,/ 0.6/ |/ Price/ {/ Model/ =/ Camry/ / Model/ =/ Accord/ ,/ 0.8/ |/ Price/ 上述/ 偏好/ 表明/ ,/ 在/ “/ 价格/ 为/ 13000/ ~/ 15000/ 美元/ ”/ 的/ 情况/ 下/ ,/ Accord/ 与/ Camry/ 相比/ ,/ Accord/ 更受/ 偏好/ (/ 程度/ 为/ 0.6/ )/ ;/ 在/ “/ 价格/ 为/ 10000/ ~/ 12000/ 美元/ ”/ 的/ 情况/ 下/ ,/ Camry/ 更受/ 偏好/ (/ 程度/ 为/ 0.8/ )/ ./ 该例/ 说明/ 在/ 不同/ 上下文/ 条件/ 下/ ,/ 人们/ 对/ 某个/ 实体/ 的/ 偏好/ 及其/ 程度/ 是/ 不同/ 的/ ,/ 因此/ 实体/ 的/ 排序/ 与/ 产生/ 偏好/ 的/ 上下文/ 条件/ 密切相关/ ./ 本文/ 利用/ 带/ 偏好/ 程度/ 的/ 上下文/ 偏好/ 对/ 查询/ 结果/ 进行/ top/ -/ k/ 排序/ ./ 该/ 方法/ 分为/ 两个/ 处理/ 阶段/ :/ 在/ 离线/ 处理/ 阶段/ 中/ ,/ 利用/ 关联/ 规则/ 从/ Web/ 数据库系统/ 的/ 查询/ 历史/ (/ queryhistory/ )/ 中/ 获取/ 用户/ 的/ 上下文/ 偏好/ ,/ 这些/ 偏好/ 用于/ 创建/ 元组/ 预/ 排列/ ,/ 然后/ 通过/ 聚类/ 方法/ 保留/ 其中/ 少数/ 代表性/ 排列/ ,/ 每个/ 代表性/ 排列/ 对应/ 一个/ 上下文/ 集合/ ./ 在/ 在线/ 处理/ 阶段/ 中/ ,/ 对于/ 一个/ 给定/ 查询/ ,/ 首先/ 评估/ 该/ 查询/ 与/ 上下文/ 条件/ 集合/ 之间/ 的/ 相似性/ ,/ 然后/ 利用/ 阈值/ 算法/ (/ ThresholdAlgorithm/ ,/ TA/ )/ 快速/ 提供/ 尽可能/ 满足/ 代表性/ 排列/ 的/ top/ -/ k/ 个/ 有序/ 查询/ 结果/ ./ 对于/ 一个/ 大型/ Web/ 数据库/ 来说/ ,/ 通常/ 会/ 存在/ 大量/ 的/ 上下文/ 偏好/ 并且/ 偏好/ 之间/ 可能/ 存在/ 回路/ 和/ 矛盾/ ./ 这种/ 情况/ 下/ ,/ 对于/ 查询/ 结果/ 的/ 排序/ 处理/ ,/ 一方面/ 需要/ 协调/ 上下文/ 偏好/ 之间/ 的/ 矛盾/ ,/ 另一方面/ 还要/ 考虑/ 如何/ 在/ 大量/ 偏好/ 共存/ 的/ 情况/ 下/ 确保/ 排序/ 的/ 执行/ 效率/ ./ 本文/ 第/ 2/ 节/ 介绍/ 相关/ 工作/ ;/ 第/ 3/ 节/ 定义/ 上下文/ 偏好/ ,/ 给出/ 上下文/ 偏好/ 的/ 获取/ 和/ 处理/ 方法/ ;/ 第/ 4/ 节/ 定义/ 查询/ 结果/ 排序/ 问题/ 并/ 给出/ 解决方案/ ;/ 第/ 5/ 节/ 给出/ 查询/ 结果/ top/ -/ k/ 排序/ 的/ 实现/ 算法/ ;/ 第/ 6/ 节是/ 性能/ 与/ 效果/ 实验/ 评价/ ;/ 第/ 7/ 节是/ 结论/ 与/ 展望/ ./ 2/ 相关/ 工作/ 工作/ 可/ 分为/ 如下/ 几类/ :/ Web/ 数据库/ 查询/ 结果/ 排序/ 方法/ 的/ 代表性/ 研究/ (/ 1/ )/ 基于/ 用户/ 相关/ 反馈/ 的/ 排序/ 方法/ ./ 文献/ [/ 9/ -/ 12/ ]/ 利用/ 用户/ 相关/ 反馈/ 评估/ 查询/ 与/ 结果/ 之间/ 的/ 相似/ 度/ 并/ 以此/ 对/ 查询/ 结果/ 进行/ 排序/ ./ 相关/ 反馈/ 在/ 一定/ 程度/ 上/ 体现/ 了/ 用户/ 偏好/ ,/ 但/ 用户/ 偏好/ 的/ 表达/ 受到/ 了/ 很大/ 限制/ (/ 如/ 用户/ 偏好/ 只能/ 用/ 简单/ 模糊/ 词/ 标记/ 元组/ 或/ 属性/ 的/ 方式/ 表达/ )/ ,/ 并且/ 反馈/ 过程/ 需要/ 用户/ 参与/ ,/ 从而/ 导致/ 查询/ 效率/ 不高/ ./ (/ 2/ )/ 基于/ 显式/ 用户/ 偏好/ 的/ 排序/ 方法/ ./ 用户/ 偏好/ 的/ 表示/ 方法/ 可/ 分为/ 两种/ :/ 一种/ 是/ 定性/ 方法/ ,/ 元组/ 之间/ 的/ 偏好/ 关系/ 直接/ 以/ 二元/ 偏序/ 关系/ 表示/ ;/ 另/ 一种/ 是/ 定量/ 方法/ ,/ 元组/ 之间/ 的/ 偏序/ 关系/ 通过/ 对/ 元组/ 打分/ 而/ 间接/ 体现/ ./ Kie/ β/ ling/ [/ 13/ ]/ 首次/ 提出/ 了/ 定性/ 偏好/ 模型/ ,/ 该/ 模型/ 定义/ 了/ 基本/ 偏好/ 构造/ 符/ 以及/ 由/ 它们/ 构成/ 的/ 复杂/ 偏好/ ./ Chomicki/ [/ 14/ ]/ 使用/ 了/ 一套/ 完整/ 的/ 逻辑/ 框架/ 实现/ 偏好/ 的/ 形式化/ 表示/ 并/ 将/ 其/ 嵌入/ 到/ 结构化/ 查询语言/ 中/ ./ 文献/ [/ 15/ ]/ 在/ 现有/ 定性/ 偏好/ 模型/ 基础/ 上/ 提出/ 了/ 定性/ 偏好/ 的/ 表示/ 与/ 推理方法/ ,/ 能够/ 表示/ 复杂/ 偏好/ 关系/ 并/ 能/ 对/ 偏好/ 之间/ 的/ 隐含/ 关系/ 进行/ 推理/ ./ Koutrika/ 等/ 人/ [/ 16/ -/ 18/ ]/ 提出/ 了/ 定量/ 偏好/ 模型/ ,/ 允许/ 用户/ 在/ 每个/ 属性/ 值上/ 关联/ 一对/ 数值/ 表达/ 其/ 原子/ 偏好/ ,/ 通过/ 原子/ 偏好/ 的/ 结合/ 可/ 实现/ 复杂/ 偏好/ 的/ 表达/ ./ 文献/ [/ 19/ -/ 20/ ]/ 在/ 定量/ 用户/ 偏好/ 模型/ 基础/ 上/ 提出/ 了/ 关系数据库/ (/ 特别/ 是/ 高维/ 情况/ 下/ )/ 的/ top/ -/ k/ 个性化/ 查询/ 方/ Page3/ 法/ ./ 上述/ 偏好/ 表示/ 与/ 处理/ 方法/ 为/ 后续/ 研究/ 和/ 实际/ 应用/ 奠定/ 了/ 坚实基础/ ./ 然而/ ,/ 定性/ 和/ 定量/ 方法/ 都/ 存在/ 各自/ 不足/ ,/ 定性/ 方法/ 使用/ 二元/ 偏好/ 关系/ 表达/ 偏好/ 的/ 方式/ 过于/ 严格/ 并且/ 不能/ 体现/ 偏好/ 程度/ ,/ 定量/ 方法/ 使用/ 打分/ 函数/ 定义/ 的/ 偏好/ 关系/ 虽/ 能够/ 体现/ 偏好/ 程度/ ,/ 但/ 一些/ 复杂/ 的/ 偏好/ 关系/ 又/ 很/ 难/ 通过/ 打分/ 函数/ 捕获/ ./ 此外/ ,/ 现实/ 中显式/ 的/ 用户/ 偏好/ 很难/ 获取/ ,/ 因为/ 用户/ 不想/ 或/ 根本/ 不能/ 准确/ 指定/ 他们/ 的/ 偏好/ (/ 如果/ 他们/ 能够/ 准确/ 表达/ 偏好/ ,/ 那么/ 就/ 能/ 形成/ 合适/ 的/ 查询/ ,/ 进而/ 也/ 就/ 无需/ 对/ 查询/ 结果/ 进行/ 排序/ 和/ 分类/ )/ [/ 21/ ]/ ./ 基于/ 上述/ 原因/ ,/ 挖掘/ 隐式/ 用户/ 偏好/ 并/ 以此/ 对/ 查询/ 结果/ 进行/ 排序/ 的/ 研究/ 开始/ 受到/ 研究者/ 的/ 关注/ ./ (/ 3/ )/ 基于/ 隐式/ 用户/ 偏好/ 的/ 排序/ 方法/ ./ 文献/ [/ 2/ ]/ 提出/ 了/ 在/ 查询/ 历史/ 中/ 挖掘/ 隐式/ 用户/ 偏好/ 对/ 查询/ 结果/ 进行/ 排序/ 的/ 方法/ ;/ 文献/ [/ 3/ ]/ 在/ 查询/ 历史/ 中/ 利用/ 概率/ 信息检索/ 模型/ 挖掘/ 隐式/ 用户/ 偏好/ ,/ 然后/ 根据/ 以往/ 用户/ 在/ 未指定/ 属性/ 上/ 的/ 偏好/ 区分/ 多个/ 查询/ 结果/ 元组/ ;/ 文献/ [/ 22/ ]/ 认为/ 用户/ 对于/ 结果/ 元组/ 的/ 相关性/ 评估/ 通常/ 需要/ 综合/ 考虑/ 多个/ 属性/ (/ 包括/ 被/ 查询/ 指定/ 的/ 属性/ 和/ 未/ 被/ 查询/ 指定/ 的/ 属性/ )/ ,/ 提出/ 了/ 一种/ 基于/ KL/ 距离/ 的/ 查询/ 结果/ 排序/ 方法/ ./ 文献/ [/ 23/ -/ 24/ ]/ 从/ 查询/ 历史/ 中/ 利用/ 关联/ 规则/ 挖掘/ 隐式/ 用户/ 偏好/ ,/ 然后/ 根据/ 用户/ 偏好/ 和/ 数据/ 内容/ 对/ 数据库/ 中/ 的/ 元组/ 进行/ 归类/ 并/ 提取/ 各类/ 数据/ 的/ 特征/ 信息/ ,/ 最后/ 根据/ 特征/ 信息/ 与/ 用户/ 偏好/ 之间/ 的/ 相关性/ 对/ 查询/ 结果/ 排序/ ./ 文献/ [/ 25/ ]/ 从/ 查询/ 历史/ 、/ 用户/ 背景/ 信息/ 以及/ 用户/ 与/ 系统/ 之间/ 的/ 交互/ 动作/ 中/ 获取/ 隐式/ 用户/ 偏好/ 并/ 以此/ 对/ 关键字/ 查询/ 结果/ 进行/ 排序/ ./ (/ 4/ )/ Top/ -/ k/ 检索/ 方法/ ./ 近年来/ 与/ 排序/ 密切相关/ 的/ top/ -/ k/ 检索/ 技术/ 得到/ 了/ 广泛/ 而/ 深入/ 的/ 研究/ ./ top/ -/ k/ 检索/ 的/ 目标/ 是从/ 大量/ 查询/ 结果/ 中/ 快速/ 检索/ 到/ 与/ 当前/ 查询/ 最为/ 相关/ 的/ 前/ k/ 个/ 结果/ ./ 为了/ 实现/ 高效/ 的/ top/ -/ k/ 检索/ ,/ Fagin/ 等/ 人/ [/ 26/ ]/ 首先/ 提出/ 了/ 阈值/ 算法/ (/ ThresholdAlgorithm/ ,/ TA/ )/ ,/ 该/ 算法/ 的/ 最大/ 特点/ 是/ 不/ 需要/ 检查/ 所有/ 结果/ 元组/ 就/ 能够/ 快速/ 识别/ 出前/ k/ 个/ 具有/ 最高/ 排序/ 分数/ 的/ 结果/ 元组/ ./ 文献/ [/ 27/ -/ 30/ ]/ 研究/ 了/ 大规模/ 数据/ 下/ 基于/ 用户/ 偏好/ 和/ TA/ 算法/ 的/ top/ -/ k/ 检索/ 方法/ ./ Top/ -/ k/ 排序/ 问题/ 还/ 在/ Web/ 信息检索/ [/ 31/ ]/ 、/ 不/ 确定/ // 概率/ 数据库/ 查询/ [/ 32/ -/ 33/ ]/ 以及/ XML/ 查询/ [/ 34/ ]/ 背景/ 下/ 也/ 得到/ 了/ 广泛/ 的/ 研究/ 与/ 讨论/ ,/ 相应/ 地/ 也/ 有/ 多种/ 实现/ 算法/ 被/ 提出/ ./ 文献/ [/ 35/ ]/ 对/ top/ -/ k/ 检索/ 技术/ 作出/ 了/ 详细/ 的/ 分析/ 和/ 总结/ ./ 通过/ 对/ 上述/ 排序/ 工作/ 的/ 分析/ 可以/ 发现/ ,/ 虽然/ 已有/ 大量/ 的/ 研究/ 工作/ 致力于/ 用户/ 偏好/ 的/ 表示/ 与/ 处理/ ,/ 但/ 显式/ 用户/ 偏好/ 很难/ 应用/ 到/ 实际/ 中/ ,/ 挖掘/ 隐式/ 用户/ 偏好/ 并/ 将/ 其/ 应用/ 到/ 查询/ 结果/ 排序/ 中/ 的/ 研究/ 最近/ 几年/ 逐渐/ 增多/ ,/ 但/ 这些/ 方法/ 在/ 偏好/ 的/ 表示/ 与/ 处理/ 以及/ 结合/ 偏好/ 的/ 查询/ 结果/ 排序/ 算法/ 的/ 执行/ 效率/ 等/ 方面/ 大都/ 存在/ 各自/ 的/ 不足/ ./ 3/ 上下文/ 偏好/ 3.1/ 上下文/ 偏好/ 定义/ 定义/ 1/ ./ 上下文/ 偏好/ ./ 给定/ 关系/ 模式/ R/ (/ A1/ ,/ A2/ ,/ …/ ,/ Am/ )/ ,/ 包含/ n/ 条/ 元组/ {/ t1/ ,/ t2/ ,/ …/ ,/ tn/ }/ ,/ Dom/ (/ Ai/ )/ 为/ 属性/ Ai/ 的/ 值域/ ,/ / 为/ R/ 上/ 的/ 偏序/ 关系/ ,/ 则/ 称为/ R/ 上/ 的/ 上下文/ 偏好/ ,/ 其中/ X/ =/ ∧/ j/ ∈/ l/ (/ Aj/ θ/ aj/ )/ ,/ ai1/ ,/ ai2/ ∈/ Dom/ (/ Ai/ )/ ,/ l/ / {/ 1/ ,/ 2/ ,/ …/ ,/ m/ }/ ,/ θ/ ∈/ {/ >/ ,/ </ ,/ =/ ,/ ≠/ ,/ / ,/ / ,/ between/ }/ 且/ aj/ ∈/ Dom/ (/ Aj/ )/ ,/ d/ 代表/ 偏好/ 程度/ (/ 即项/ ai1/ 与/ ai2/ 相比/ ,/ 用户/ 偏好/ 项/ ai1/ 的/ 程度/ 为/ d/ (/ 0.5/ / d/ / 1/ )/ ./ 任给/ 一个/ 偏好/ p/ 和/ 关系/ 表/ R/ 中/ 的/ 一对/ 元组/ (/ ti/ ,/ tj/ )/ ,/ 根据/ 偏好/ p/ ,/ 元组/ ti/ 和/ tj/ 之间/ 存在/ 3/ 种/ 关系/ :/ (/ 1/ )/ 元组/ ti/ 比/ tj/ 更受/ 偏好/ ,/ 用/ ti/ / tj/ 表示/ ;/ (/ 2/ )/ 元组/ tj/ 比/ ti/ 更受/ 偏好/ ,/ 用/ tj/ / ti/ 表示/ ;/ (/ 3/ )/ 元组/ ti/ 和/ tj/ 不/ 存在/ 偏好/ 关系/ ,/ 用/ ti/ ~/ tj/ 表示/ ./ 因此/ ,/ 偏好/ p/ 定义/ 在/ 任意/ 一对/ 元组/ (/ t/ ,/ t/ )/ 上/ 的/ 偏好/ 程度/ dpref/ 可/ 表示/ 成/ 其中/ ,/ d/ 表示/ t/ 与/ t/ 相比/ ,/ t/ 受/ 偏好/ 的/ 程度/ ./ 3.2/ 上下文/ 偏好/ 获取/ 本文/ 通过/ 在/ Web/ 数据库/ 查询/ 系统/ 的/ 查询/ 历史/ 上/ 使用/ 关联/ 规则/ 获取/ 上下文/ 偏好/ ./ 查询/ 历史/ 是/ 以往/ 使用/ 过/ 系统/ 的/ 用户/ 提交/ 过/ 的/ 查询/ 记录/ 集合/ ,/ 可/ 看成/ 是/ 一个/ 关系/ 表/ ,/ 其中/ 包含/ 了/ 多条/ 历史/ 查询/ 记录/ ./ 上下文/ 偏好/ 的/ 获取/ 方法/ 为/ :/ 如果/ Conf/ (/ X/ / a/ )/ >/ Conf/ (/ X/ / b/ )/ ,/ 则/ 其中/ ,/ Conf/ (/ X/ / a/ )/ 是/ 指/ 在/ 查询/ 历史/ 关系/ 表中/ 属性/ 值/ a/ 在/ 上下文/ 条件/ X/ 下/ 出现/ 的/ 概率/ (/ 也/ 就是/ 关联/ 规则/ X/ / a/ 的/ 信任度/ )/ ,/ 即/ Conf/ (/ X/ / a/ )/ =/ Sup/ (/ X/ ∪/ a/ )/ Sup/ (/ X/ ∪/ a/ )/ 是/ 指/ 在/ 查询/ 历史/ 关系/ 表中/ 属性/ 值/ a/ 与/ 上下文/ 条件/ X/ 共同/ 出现/ 的/ 概率/ ./ 式/ (/ 3/ )/ 表明/ ,/ 当/ Page4d/ >/ 0.5/ 时/ ,/ 说明/ 在/ 上下文/ 条件/ X/ 下/ ,/ 属性/ 值/ a/ 比/ b/ 更受/ 偏好/ ,/ 受/ 偏好/ 的/ 程度/ 为/ d/ ./ 例/ 2/ ./ 给定/ 关系/ 表/ CarDB/ ,/ 假设/ CarDB/ 中/ 包含/ 了/ 表/ 1/ 所示/ 的/ 元组/ 并/ 存在/ 如下/ 的/ 上下文/ 偏好/ ./ TidModelColorEngine/ // LMakePriceYeart1AccordSilver2/ ./ 4Honda309992008t2AccordBlue3/ ./ 5Honda319992007t3CR/ -/ VBlack3/ ./ 0Honda325002007t4CamryBlue3/ ./ 5Toyota229992007t5MatrixGray3/ ./ 3Toyota239992007p1/ =/ {/ Model/ =/ Accord/ / Model/ =/ CR/ -/ V/ ,/ 0.7/ |/ Make/ =/ Honda/ ∧/ Pricebetween30000and33000/ }/ p2/ =/ {/ Color/ =/ Sliver/ / Color/ =/ Black/ ,/ 0.6/ |/ Make/ =/ Honda/ ∧/ Pricebetween30000and33000/ }/ p3/ =/ {/ Engine/ =/ 3.0/ L/ / Engine/ =/ 2.4/ L/ ,/ 0.9/ |/ Make/ =/ Honda/ ∧/ Pricebetween30000and33000/ }/ p4/ =/ {/ Model/ =/ Camry/ / Model/ =/ Matrix/ ,/ 0.8/ |/ Make/ =/ Toyota/ ∧/ Pricebetween22000and25000/ }/ 偏好/ p1/ 表明/ ,/ 在/ 上下文/ 条件/ “/ Make/ =/ Honda/ ∧/ Pricebetween30000and33000/ ”/ 下/ ,/ 元组/ t1/ 和/ t2/ 比/ t3/ 更受/ 偏好/ ,/ t1/ 和/ t2/ 受/ 偏好/ 的/ 程度/ 为/ 0.7/ ;/ 在/ 相同/ 的/ 上下文/ 条件/ 下/ ,/ p2/ 表明/ t1/ 比/ t3/ 更受/ 偏好/ ,/ t1/ 受/ 偏好/ 的/ 程度/ 为/ 0.6/ ;/ p3/ 表明/ t3/ 比/ t1/ 更受/ 偏好/ ,/ t3/ 受/ 偏好/ 的/ 程度/ 为/ 0.9/ ;/ 在/ 上下文/ 条件/ “/ Make/ =/ Toyota/ ∧/ Pricebetween22000and25000/ ”/ 下/ ,/ p4/ 表明/ t4/ 比/ t5/ 更受/ 偏好/ ,/ t4/ 受/ 偏好/ 的/ 程度/ 为/ 0.8/ ./ 3.3/ 偏好/ 类/ 划分/ 对于/ 任意/ 两个/ 上下文/ 条件/ X1/ =/ ∧/ j/ ∈/ l1/ (/ Aj/ θ/ aj/ )/ 和/ X2/ =/ ∧/ j/ ∈/ l2/ (/ Aj/ θ/ bj/ )/ ,/ l1/ ,/ l2/ / {/ 1/ ,/ 2/ ,/ …/ ,/ m/ }/ ,/ 当且/ 仅/ 当/ l1/ =/ l2/ =/ l/ 并/ 对于/ / j/ ∈/ l/ ,/ θ/ aj/ =/ θ/ bj/ 时/ ,/ 称/ 上下文/ 条件/ X1/ 和/ X2/ 等价/ ./ 对于/ 两个/ 偏好/ p1/ =/ {/ Ai/ =/ ai1/ / Ai/ =/ ai2/ ,/ d1/ |/ X1/ }/ 和/ p2/ =/ {/ Aj/ =/ aj1/ / Aj/ =/ aj2/ ,/ d2/ |/ X2/ }/ ,/ 如果/ X1/ =/ X2/ =/ X/ ,/ 则/ 称/ p1/ 和/ p2/ 属于/ 同一个/ 偏好/ 类/ ./ 同一个/ 偏好/ 类中/ ,/ 所有/ 偏好/ 的/ 上下文/ 条件/ 都/ 相同/ ,/ 本文/ 用/ X/ 表示/ 某个/ 偏好/ 类/ 的/ 上下文/ 条件/ ,/ PX/ 表示/ 相应/ 的/ 偏好/ 类/ ./ 例如/ ,/ 假设/ 上下文/ 条件/ X1/ =/ {/ Make/ =/ Honda/ ∧/ Pricebetween30000and33000/ }/ ,/ X2/ =/ {/ Make/ =/ Toyota/ ∧/ Pricebetween22000and25000/ }/ ,/ 则/ 偏好/ p1/ ,/ p2/ 和/ p3/ 都/ 属于/ 偏好/ 类/ PX1/ ,/ 而/ 偏好/ p4/ 属于/ 偏好/ 类/ PX2/ ./ 一个/ 偏好/ 类/ PX/ 将/ 关系/ 表中/ 的/ 所有/ 元/ 组分/ 成/ 两个/ 集合/ :/ 一个/ 是/ 与/ 偏好/ 类/ 相关/ 的/ 元组/ 集合/ ,/ 另/ 一/ 是/ 与/ 偏好/ 类/ 无关/ 的/ 元组/ 集合/ ./ 对于/ 元组/ t/ ,/ 如果/ / p/ ∈/ PX/ ,/ 使得/ / t/ ≠/ t/ ,/ dpref/ (/ t/ ,/ t/ ,/ p/ )/ ≠/ ⊥/ ,/ 则/ 称/ t/ 与/ 偏好/ 类/ PX/ 相关/ ;/ 对于/ 元组/ t/ ,/ 如果/ / p/ ∈/ PX/ ,/ 使得/ / t/ ≠/ t/ ,/ dpref/ (/ t/ ,/ t/ ,/ p/ )/ =/ ⊥/ ∧/ dpref/ (/ t/ ,/ t/ ,/ p/ )/ =/ ⊥/ ,/ 则/ 称/ t/ 与/ 偏好/ 类/ PX/ 无关/ ./ 在/ 一个/ 偏好/ 类中/ ,/ 如果/ 存在/ 一个/ 或/ 多个/ 偏好/ 显式/ 地/ 把/ 元组/ t/ 与/ 其他/ 元组/ 相/ 比较/ ,/ 那么/ t/ 与/ 该/ 偏好/ 类/ 相关/ ;/ 否则/ ,/ t/ 与/ 该/ 偏好/ 类/ 无关/ ./ 例如/ ,/ 表/ 1/ 中/ 的/ 元组/ t1/ ,/ t2/ 和/ t3/ 明确/ 地被/ 偏好/ 类/ PX1/ 中/ 的/ 一个/ 或/ 多个/ 偏好/ 所/ 指定/ ,/ 则/ t1/ ,/ t2/ ,/ t3/ 是/ 与/ 偏好/ 类/ PX1/ 相关/ 的/ 元组/ ,/ 而/ t4/ 则/ 是/ 无关/ 元组/ ./ 3.4/ 有效/ 偏好/ 支持/ 度/ 虽然/ 根据/ 偏好/ 可以/ 确定/ 元组/ 之间/ 的/ 排序/ 关系/ ,/ 但/ 由于/ 用户/ 对于/ 不同/ 元组/ 的/ 偏好/ 程度/ 存在/ 差别/ ,/ 因此/ 需要/ 量化/ 偏好/ p/ 定义/ 在/ 一对/ 元组/ 上/ 的/ 偏好/ 程度/ 及其/ 在/ 偏好/ 类中/ 的/ 重要/ 程度/ ./ 对于/ 任意/ 一对/ 元组/ (/ t/ ,/ t/ )/ ,/ 偏好/ 类/ PX/ 中/ 的/ 偏好/ 为/ 其/ 定义/ 了/ 有效/ 偏好/ 支持/ 度/ Peff/ -/ p/ (/ t/ ,/ t/ ,/ PX/ )/ ,/ 表示/ 偏好/ 类/ PX/ 中/ 的/ 一个/ 偏好/ 支持/ t/ / t/ 的/ 程度/ 在/ PX/ 中/ 所有/ 偏好/ 支持/ 下/ 所/ 占/ 的/ 比例/ ./ 下面/ 分/ 3/ 种/ 情况/ 讨论/ :/ (/ 1/ )/ 对于/ 任意/ 一对/ 元组/ (/ t/ ,/ t/ )/ ,/ 若/ / p/ ∈/ PX/ ,/ 使得/ dpref/ (/ t/ ,/ t/ ,/ p/ )/ +/ dpref/ (/ t/ ,/ t/ ,/ p/ )/ =/ 1/ ,/ 则/ Peff/ -/ p/ (/ t/ ,/ t/ ,/ PX/ )/ =/ ∑/ p/ ∈/ PX/ (/ 2/ )/ 对于/ 任意/ 一对/ 元组/ (/ t/ ,/ t/ )/ ,/ 若/ // / p/ ∈/ PX/ ,/ 使得/ dpref/ (/ t/ ,/ t/ ,/ p/ )/ +/ dpref/ (/ t/ ,/ t/ ,/ p/ )/ =/ 1/ ,/ 则/ Peff/ -/ p/ (/ t/ ,/ t/ ,/ PX/ )/ =/ Peff/ -/ p/ (/ t/ ,/ t/ ,/ PX/ )/ =/ 1/ (/ 3/ )/ 对于/ 任意/ 一对/ 元组/ (/ t/ ,/ t/ )/ ,/ 若/ t/ 和/ t/ 在/ PX/ 下/ 不/ 存在/ 偏好/ 关系/ ,/ 则/ 以表/ 1/ 所示/ CarDB/ 上/ 的/ 偏好/ 类/ PX/ 为例/ ,/ 这里/ X/ =/ {/ Make/ =/ Honda/ ∧/ Pricebetween30000and33000/ }/ ,/ 按照/ 上述/ 计算方法/ ,/ 可/ 得/ 元组/ 的/ 有效/ 偏好/ 支持/ 度为/ :/ (/ 1/ )/ Peff/ -/ p/ (/ t1/ ,/ t2/ ,/ PX/ )/ =/ Peff/ -/ p/ (/ t2/ ,/ t1/ ,/ PX/ )/ =/ 1/ // 2/ ;/ 该/ 情况/ 表明/ ,/ 虽然/ 元组/ t1/ 和/ t2/ 是/ PX/ 所/ 涉及/ 的/ 元组/ ,/ 但/ PX/ 中/ 并/ 不/ 存在/ 明确/ 指定/ 在/ 这/ 两个/ 元组/ 任何/ 属性/ 值上/ 的/ 偏好/ ./ (/ 2/ )/ Peff/ -/ p/ (/ t1/ ,/ t3/ ,/ PX/ )/ =/ (/ 0.7/ +/ 0.6/ +/ 0.1/ )/ // 3/ =/ 7/ // 15/ ,/ Peff/ -/ p/ (/ t3/ ,/ t1/ ,/ PX/ )/ =/ (/ 0.3/ +/ 0.4/ +/ 0.9/ )/ // 3/ =/ 8/ // 15/ ;/ 该/ 情况/ 表明/ ,/ 虽然/ p1/ 和/ p2/ 都/ 表明/ 元组/ t1/ 比/ t3/ 更受/ 偏好/ ,/ 只有/ p3/ 表明/ t3/ 比/ t1/ 更受/ 偏好/ ,/ 但/ 有效/ 偏好/ 支持/ 度/ 却/ 表明/ t3/ 比/ t1/ 更受/ 偏好/ ,/ 这/ 是因为/ 每个/ 偏/ Page5/ 好/ 的/ 程度/ 不同/ ,/ 偏好/ 程度/ 对/ 调节/ 多个/ 偏好/ 之间/ 的/ 矛盾/ 起着/ 重要/ 作用/ ./ 3/ // 10/ ./ (/ 3/ )/ Peff/ -/ p/ (/ t2/ ,/ t3/ ,/ PX/ )/ =/ 7/ // 10/ ,/ Peff/ -/ p/ (/ t3/ ,/ t2/ ,/ PX/ )/ =/ (/ 4/ )/ 对于/ 所有/ 其他/ 元组/ ,/ Peff/ -/ p/ (/ …/ ,/ …/ ,/ PX/ )/ =/ ⊥/ ./ 上述情况/ 表明/ ,/ 对于/ 任意/ 一对/ 与/ 偏好/ 类/ PX/ 相关/ 的/ 元组/ (/ t/ ,/ t/ )/ ,/ 如果/ 它们/ 之间/ 存在/ 偏好/ 关系/ ,/ 则/ Peff/ -/ p/ (/ t/ ,/ t/ ,/ PX/ )/ 的/ 值/ 介于/ [/ 0/ ,/ 1/ ]/ 之间/ ;/ 否则/ ,/ 表示/ 用户/ 对/ 元组/ t/ 和/ t/ 的/ 偏好/ 程度/ 是/ 相同/ 的/ ,/ 规定/ 其/ 有效/ 偏好/ 支持/ 度为/ 1/ // 2.3/ ./ 5/ 偏好/ 关系/ 图/ 根据/ 元组/ 之间/ 的/ 偏好/ 关系/ ,/ 属于/ 同一/ 偏好/ 类/ 的/ 元组/ 可/ 构成/ 一个/ 偏好/ 关系/ 图/ ./ 给定/ 关系/ R/ 和/ 其/ 上/ 的/ 一个/ 偏好/ 类/ PX/ ,/ 偏好/ 关系/ 图/ GX/ (/ VX/ ,/ EX/ )/ 可定义/ 为/ :/ 节点/ 是/ 由/ 关系/ R/ 中/ 所有/ 与/ PX/ 中/ 的/ 偏好/ 相关/ 的/ 元组/ 构成/ ,/ 对于/ 每/ 一个/ 节点/ 有序/ 对/ (/ t/ ,/ t/ )/ ,/ 存在/ 一条/ 带有/ 权重/ 的/ 有/ 向/ 边/ e/ (/ t/ →/ t/ )/ ∈/ EX/ ,/ 边/ 的/ 权重/ 为且/ wX/ (/ t/ →/ t/ )/ +/ wX/ (/ t/ →/ t/ )/ =/ 1/ 图/ 1/ 给出/ 了/ 在/ 上下文/ 条件/ X/ =/ {/ Make/ =/ Honda/ ∧/ Pricebetween30000and33000/ }/ 下/ ,/ 偏好/ p1/ ,/ p2/ 和/ p3/ 在/ 关系/ 表/ CarDB/ 上/ 的/ 偏好/ 关系/ 图/ (/ 偏好/ 类/ PX/ 中/ 的/ 偏好/ 不/ 涉及/ 到/ 元组/ t4/ 和/ t5/ )/ ./ 4Top/ -/ 犽/ 排序/ 本/ 节/ 首先/ 定义/ 查询/ 结果/ 排序/ 问题/ ,/ 然后/ 提出/ 基于/ 上下文/ 偏好/ 的/ 查询/ 结果/ top/ -/ k/ 排序/ 解决方案/ ./ 4.1/ 排序/ 问题/ 定义/ 给定/ 关系/ 模式/ R/ (/ A1/ ,/ A2/ ,/ …/ ,/ Am/ )/ ,/ 包含/ 元组/ {/ t1/ ,/ t2/ ,/ …/ ,/ tn/ }/ ,/ 令/ R/ 上/ 的/ 一个/ 合取/ 查询/ 为/ Q/ =/ σ/ ∧/ j/ ∈/ {/ 1/ ,/ 2/ ,/ …/ ,/ k/ }/ Cj/ ,/ 其中/ Cj/ 代表/ 一个/ 基本/ 查询/ 条件/ ,/ 并且/ k/ / m/ ,/ Q/ (/ R/ )/ / R/ 是/ R/ 上/ 满足/ 查询/ Q/ 的/ 结果/ 元组/ ./ 本文/ 要/ 解决/ 的/ 问题/ 是/ 根据/ 上下文/ 偏好/ 对/ 查询/ 结果/ 进行/ 排序/ ,/ 问题/ 定义/ 如下/ ./ 问题/ 1/ ./ 查询/ 结果/ 排序/ 问题/ :/ 给定/ 关系/ R/ 上/ 的/ 一个/ 偏好/ 集合/ Π/ =/ {/ PX1/ ,/ …/ ,/ PXm/ }/ 和/ 一个/ 合取/ 查询/ Q/ ,/ 找出/ 在/ 查询/ 结果/ 集/ Q/ (/ R/ )/ 上/ 的/ 一个/ 排列/ τ/ ,/ 使得/ τ/ =/ argmax/ τ/ ∑/ m/ 其中/ ,/ Agree/ (/ τ/ ,/ PX/ )/ =/ ∑/ (/ t/ ,/ t/ )/ :/ τ/ (/ t/ )/ </ τ/ (/ t/ )/ Peff/ -/ p/ (/ t/ ,/ t/ ,/ PX/ )/ ./ 式/ (/ 7/ )/ 的/ 含义/ 是/ 找到/ 一个/ 对于/ 查询/ 结果/ 的/ 排列/ τ/ ,/ 使/ 其/ 尽/ 最大/ 可能/ 满足/ 所有/ 偏好/ ./ 排列/ τ/ 对/ 偏好/ 的/ 满足/ 程度/ 受到/ 偏好/ 所/ 基于/ 的/ 上下文/ 条件/ X/ 与/ 查询/ Q/ 之间/ 的/ 相似/ 度/ 影响/ ./ 为了/ 解决问题/ 1/ ,/ 需要/ 量化/ 查询/ Q/ 与/ 上下文/ 条件/ X/ 之间/ 的/ 相似/ 度/ ./ 首先/ 构造/ 向量/ 空间/ 模型/ :/ 统计/ 关系/ R/ 中/ 所有/ 不同/ 的/ 〈/ 属性/ ,/ 值/ 〉/ ,/ 它们/ 构成/ 了/ 集合/ Δ/ =/ {/ 〈/ Ai/ ,/ a/ 〉/ |/ / i/ ∈/ {/ 1/ ,/ 2/ ,/ …/ ,/ m/ }/ 且/ / a/ ∈/ Dom/ (/ Ai/ )/ }/ ./ 由于/ Dom/ (/ Ai/ )/ 是/ 属性/ Ai/ 的/ 值域/ ,/ 所以/ 集合/ Δ/ 的/ 基数/ 为/ 有限/ 集/ ,/ 故可令/ N/ =/ |/ Δ/ |/ ,/ 即/ 集合/ Δ/ 中/ 所有/ 不同/ 〈/ 属性/ ,/ 值/ 〉/ 的/ 个数/ ./ 令/ OD/ 是/ 对于/ Δ/ 中/ 所有/ 〈/ 属性/ ,/ 值/ 〉/ 的/ 一个/ 随机/ 排列/ ,/ 在/ 该/ 排列/ 中/ 每个/ 〈/ 属性/ ,/ 值/ 〉/ 都/ 有/ 一个/ 固定/ 位置/ ,/ 用/ Δ/ [/ i/ ]/ 表示/ Δ/ 中/ 按/ OD/ 排列/ 的/ 第/ i/ 个/ 元素/ ./ 基于/ 此/ ,/ 分别/ 构造/ X/ 和/ Q/ 的/ 向量/ 表示/ ./ X/ =/ ∧/ j/ ∈/ l/ (/ Aj/ θ/ aj/ )/ 的/ 向量/ 表示/ 是/ 一个/ 包含/ N/ 个/ 元素/ 的/ 二元/ 向量/ 犞/ X/ ,/ 向量/ 犞/ X/ 中/ 的/ 第/ i/ 个/ 元素/ 对应/ Δ/ 中/ 的/ 〈/ 属性/ ,/ 值/ 〉/ Δ/ [/ i/ ]/ ./ 如果/ Δ/ [/ i/ ]/ 满足/ X/ 中/ 的/ 一个/ 基本/ 条件/ ,/ 则/ VX/ [/ i/ ]/ =/ 1/ ;/ 否则/ VX/ [/ i/ ]/ =/ 0/ ./ 同理/ ,/ Q/ 的/ 向量/ 表示/ 是/ 一个/ 包含/ N/ 个/ 元素/ 的/ 二元/ 向量/ 犞/ Q/ ,/ 向量/ 犞/ Q/ 的/ 第/ i/ 个/ 元素/ 对应/ OD/ 中/ 的/ 〈/ 属性/ ,/ 值/ 〉/ Δ/ [/ i/ ]/ ./ 如果/ Δ/ [/ i/ ]/ 满足/ Q/ 中/ 的/ 一个/ 基本/ 条件/ ,/ 则/ VQ/ [/ i/ ]/ =/ 1/ ;/ 否则/ VQ/ [/ i/ ]/ =/ 0/ ./ 下面/ 根据/ 下/ 式/ 计算/ X/ 与/ Q/ 之间/ 的/ 相似/ 度/ :/ 在/ 此基础/ 上/ ,/ 查询/ Q/ 和/ 上下文/ 条件/ 集合/ χ/ 之间/ 的/ 相似/ 度/ 定义/ 为/ 利用/ 式/ (/ 7/ )/ 对/ 查询/ 结果/ 元组/ 进行/ 排序/ ,/ 对于/ 关系/ R/ 中/ 的/ 每/ 一对/ 元组/ ,/ 任何/ 算法/ 都/ 需要/ 遍历/ 所有/ 偏好/ ./ 假设/ R/ 中/ 包含/ n/ 条/ 元组/ ,/ m/ 条/ 偏好/ ,/ 则/ 算法/ 的/ 时间/ 复杂度/ 为/ O/ (/ n22m/ )/ ,/ 即/ 指数/ 级/ 的/ ./ 由此可见/ ,/ 对于/ 一个/ 包含/ 海量/ 数据/ 并且/ 具有/ 大量/ 偏好/ 的/ Web/ 数据库/ 来说/ ,/ 这样/ 的/ 时间/ 复杂度/ 是/ 不可/ 接受/ 的/ ,/ 为此/ 本文/ 基于/ 文献/ [/ 7/ ]/ 提出/ 如下/ 解决方案/ ./ Page64/ ./ 2/ 解决方案/ 解决方案/ 分为/ 3/ 个/ 步骤/ :/ 元组/ 排列/ 创建/ 、/ 元组/ 排列/ 聚类/ (/ 选取/ 代表性/ 排列/ )/ 和/ top/ -/ k/ 排序/ ./ 前/ 两个/ 步骤/ 在/ 离线/ 阶段/ 完成/ ,/ 在线/ 阶段/ 进行/ top/ -/ k/ 排序/ ./ 步骤/ 1/ ./ 对于/ 每个/ 偏好/ 类/ PXi/ ,/ 从/ R/ 中/ 找出/ 一个/ 对于/ 相关/ 元组/ 的/ 排列/ τ/ i/ ,/ 使/ 其/ 满足/ 对于/ m/ 个/ 不同/ 的/ 偏好/ 类/ ,/ 该步/ 输出/ 一个/ 包含/ m/ 个/ 〈/ 上下文/ ,/ 排列/ 〉/ 的/ 集合/ ,/ 这里/ 把/ 〈/ 上下文/ ,/ 排列/ 〉/ 表示/ 为/ 〈/ Xi/ ,/ τ/ i/ 〉/ ,/ 其中/ Xi/ 是/ 偏好/ 的/ 上下文/ 条件/ ,/ τ/ i/ 是/ (/ 近似/ )/ 满足/ 式/ (/ 10/ )/ 的/ 一个/ 元组/ 排列/ ./ 根据/ 输出/ 的/ 元组/ 排列/ ,/ 每个/ 元组/ t/ 在/ 它/ 对应/ 的/ 排列/ τ/ i/ 中/ 都/ 具有/ 一个/ 与其/ 位置/ 相关/ 的/ 排序/ 分值/ ,/ 即/ 元组/ t/ 在/ 排列/ τ/ i/ (/ τ/ i/ 对应/ 于/ 上下文/ 条件/ Xi/ )/ 中/ 的/ 排序/ 分值/ 为/ 其中/ ,/ τ/ i/ (/ t/ )/ 代表/ t/ 在/ τ/ i/ 中/ 的/ 位置/ ./ 步骤/ 2/ ./ 为了/ 减少/ 步骤/ 1/ 输出/ 的/ 〈/ Xi/ ,/ τ/ i/ 〉/ 个数/ ,/ 从/ m/ 个/ 最初/ 的/ 〈/ Xi/ ,/ τ/ i/ 〉/ 集合/ 中/ ,/ 找出/ l/ 个/ 代表性/ 排列/ 2/ ,/ …/ ,/ τ/ -/ 1/ ,/ τ/ -/ τ/ -/ 集合/ 划分/ 成/ l/ 个/ 子集/ ,/ 每个/ 子集/ i/ 可/ 由/ 排列/ τ/ -/ 交/ 的/ 上下文/ 条件/ 集合/ 珡/ Xi/ / {/ X1/ ,/ X2/ ,/ …/ ,/ Xm/ }/ 表示/ ,/ 使得/ 对于/ 任一/ Xj/ ∈/ 珡/ Xi/ ,/ 排列/ τ/ i/ 是/ 对/ 原始/ 排列/ τ/ i/ 的/ 最佳/ 替代/ ./ 选取/ 代表性/ 排列/ 问题/ 也/ 可/ 看成/ 是/ 排列/ 聚类/ 问题/ ./ 对于/ 代表性/ 排列/ τ/ -/ i/ (/ t/ )/ 代表/ t/ 在/ τ/ -/ 其中/ ,/ τ/ -/ 步骤/ 3/ ./ 对于/ 给定/ 查询/ Q/ ,/ 使用/ 步骤/ 2/ 的/ 输出/ ,/ 得到/ 查询/ 结果/ Qk/ (/ R/ )/ / Q/ (/ R/ )/ / R/ ,/ 其中/ |/ Qk/ (/ R/ )/ |/ =/ k/ ,/ 使得/ 对于/ / t/ ∈/ Qk/ (/ R/ )/ 和/ t/ ∈/ (/ R/ -/ Qk/ (/ R/ )/ )/ ,/ 都/ 有/ Score/ (/ t/ ,/ Q/ )/ >/ Score/ (/ t/ ,/ Q/ )/ ,/ 其中/ ,/ Score/ (/ t/ ,/ Q/ )/ 代表/ 元组/ t/ 对于/ 查询/ Q/ 的/ 最终/ 排序/ 分值/ ,/ 定义/ 为/ Score/ (/ t/ ,/ Q/ )/ =/ ∑/ 珡/ Xi5/ 实现/ 算法/ 5.1/ 元组/ 排列/ 创建/ 考虑/ 最大/ 无/ 环子/ 图/ 问题/ ,/ 对于/ 一个/ 加权/ 有向图/ G/ ,/ 从中/ 找出/ 具有/ 最大/ 权重/ 的/ 无/ 环子/ 图是/ 一个/ NP/ -/ hard/ 问题/ ./ 实质/ 上/ ,/ 通过/ 偏好/ 关系/ 图/ ,/ 可/ 将/ 创建/ 元组/ 排列/ 问题/ 与/ 发现/ 最大/ 无/ 环子/ 图/ 问题/ 联系/ 到/ 一起/ ./ 对于/ 一个/ 给定/ 的/ 偏好/ 关系/ 图/ GX/ (/ R/ ,/ EX/ )/ ,/ 找出/ 关系/ R/ =/ {/ t1/ ,/ t2/ ,/ …/ ,/ tn/ }/ 上/ 所有/ 元组/ 的/ 一个/ 排列/ τ/ ,/ 该/ 排列/ 能够/ 产生/ 一个/ 无/ 环子/ 图/ GT/ (/ V/ ,/ ET/ )/ ,/ 使得/ ET/ 中边/ 的/ 权重/ 之/ 和/ 最大/ ./ 这是/ 一个/ 在/ 偏好/ 关系/ 图/ GX/ 上/ 发现/ 最大/ 无/ 环子/ 图/ 的/ 问题/ ,/ 因此/ 创建/ 元组/ 排列/ 问题/ 与/ 发现/ 最大/ 无/ 环子/ 图/ 问题/ 属于/ 同类/ 问题/ ./ 在/ 一个/ 加权/ 有向图/ 上/ 发现/ 最大/ 无/ 环子/ 图/ 问题/ 是/ 一个/ NP/ -/ hard/ 问题/ ./ 由于/ 最大/ 无/ 环子/ 图/ 问题/ 既/ 满足/ 最优/ 子结构/ 性质/ 也/ 满足/ 贪心/ 选择/ 性质/ ,/ 因此/ 采用/ 贪心/ 算法/ 解决/ 元组/ 排列/ 创建/ 问题/ ./ 算法/ 1/ ./ 创建/ 元组/ 排列/ 的/ 贪心/ 算法/ ./ 输入/ :/ 关系/ R/ =/ {/ t1/ ,/ t2/ ,/ …/ ,/ tn/ }/ ,/ 偏好/ 类/ PX/ 输出/ :/ 〈/ X/ ,/ τ/ 〉/ ,/ 其中/ τ/ 是/ 对于/ R/ 中/ 与/ 偏好/ 类/ PX/ 相关/ 元组/ 1/ ./ S/ =/ {/ t1/ ,/ t2/ ,/ …/ ,/ tn/ }/ 2/ ./ rank/ =/ 03/ ./ FORALLi/ ∈/ {/ 1/ ,/ 2/ ,/ …/ ,/ n/ }/ DO4/ ./ p/ (/ ti/ )/ =/ ∑/ n5/ ./ ENDFOR6/ ./ WHILES/ ≠/ / DO7/ ./ rank/ +/ =/ 18/ ./ tv/ =/ argmaxtu/ ∈/ Sp/ (/ tu/ )/ 9/ ./ τ/ (/ tv/ )/ =/ rank10/ ./ S/ =/ S/ -/ {/ tv/ }/ 11/ ./ FORALLt/ ∈/ SDO12/ ./ p/ (/ t/ )/ =/ p/ (/ t/ )/ -/ wX/ (/ t/ →/ tv/ )/ 13/ ./ ENDFOR14/ ./ ENDWHILE/ 算法/ 1/ 首先/ 计算/ 每条/ 元组/ ti/ (/ 即/ 在/ 偏好/ 关系/ 图中/ 的/ 节点/ )/ 在/ 给定/ 偏好/ 类下/ 的/ 出度/ 之/ 和/ p/ (/ ti/ )/ (/ 第/ 3/ ~/ 4/ 步/ )/ ,/ 这里/ 称为/ 综合/ 偏好/ 程度/ ./ 元组/ 的/ 综合/ 偏好/ 程度/ 越大/ ,/ 说明/ 它/ 对/ 这个/ 偏好/ 类下/ 所有/ 偏好/ 的/ 满足/ 程度/ 越大/ ,/ 在/ 排列/ 中/ 的/ 位置/ 就/ 越/ 靠/ 前/ ./ 然后/ ,/ 循环/ 计算/ 每条/ 元组/ 的/ 排序/ 分值/ ,/ 每次/ 循环/ 首先/ 选出/ 剩余/ 元组/ 中/ 具有/ 最大/ 综合/ 偏好/ 程度/ 的/ 元组/ tv/ (/ 第/ 8/ 步/ )/ ,/ 并/ 赋予/ 一个/ 排序/ 分值/ (/ 第/ 9/ 步/ )/ ,/ 接下来/ 把/ tv/ 从/ 元组/ 集合/ 中/ 去除/ (/ 第/ 10/ 步/ )/ ,/ 重新/ 计算/ 每条/ 剩余/ 元组/ 的/ 综合/ 偏好/ 程度/ (/ 第/ 11/ ~/ 13/ 步/ )/ ,/ 重复/ 上述/ 过程/ ,/ 直到/ 所有/ 元组/ 都/ 被/ 选出/ 为止/ ./ 每次/ 重新/ 计算/ 综合/ 偏好/ 程度/ 时/ ,/ 每条/ 剩余/ 元组/ 都/ 要/ 减去/ 它/ 对/ 上/ 一次/ 选出/ 元组/ 的/ 出度/ ./ 该/ 算法/ 的/ 时间/ 复杂度/ 为/ O/ (/ n2/ )/ ,/ 其中/ n/ 为/ 关系/ R/ 中/ 与/ 偏好/ 类/ PX/ 相关/ 的/ 元组/ 数/ ./ 5.2/ 元组/ 排列/ 聚类/ 5.2/ ./ 1/ 元组/ 排列/ 聚类/ 问题/ 由于/ 欧式/ 距离/ 是/ 常用/ 的/ 向量/ 之间/ 距离/ 的/ 评估/ 方法/ ,/ 因此/ 这里/ 使用/ 欧式/ 距离/ 来/ 衡量/ 在/ 相同/ 元组/ 集合/ 上/ 的/ 两个/ 排列/ τ/ 和/ ρ/ 之间/ 的/ 距离/ ,/ dE/ 代表/ 距离/ 函数/ :/ Page7/ 根据/ 欧式/ 距离/ 的/ 性质/ 可知/ ,/ dE/ 满足/ 三角/ 不等式/ ,/ 即/ 如果/ τ/ 1/ ,/ τ/ 2/ 和/ τ/ 3/ 是/ 任意/ 3/ 个/ 在/ n/ 个/ 对象/ 上/ 的/ 排列/ ,/ 则/ 如下/ 不等式/ 成立/ 基于/ 上述/ 定义/ ,/ 步骤/ 2/ 中/ 的/ 元组/ 排列/ 聚类/ 问题/ 可定义/ 为/ :/ 假设/ 输入/ 由/ m/ 个/ 〈/ Xi/ ,/ τ/ i/ 〉/ 构成/ ,/ 令/ Tm/ 是/ 在/ R/ 元组/ 上/ 的/ m/ 个/ 排列/ 的/ 集合/ :/ Tm/ =/ {/ τ/ 1/ ,/ τ/ 2/ ,/ …/ ,/ τ/ m/ }/ ,/ 在/ Tm/ 中/ 选取/ l/ 个/ 排列/ Tl/ =/ {/ τ/ -/ 最小/ ./ 一个/ 排列/ τ/ 与/ 排列/ 集合/ T/ 之间/ 的/ 距离/ 定义/ 为/ d/ (/ τ/ ,/ T/ )/ =/ min/ ρ/ ∈/ Td/ (/ τ/ ,/ ρ/ )/ ./ 式/ (/ 15/ )/ Tl/ 中/ 的/ 排列/ 称为/ 代表性/ 排列/ ,/ 并且/ 每个/ 代表性/ 排列/ τ/ -/ 合/ 珡/ Xj/ 相关联/ :/ 5.2/ ./ 2/ 元组/ 排列/ 聚类/ 算法/ 排列/ 聚类/ 问题/ 实质/ 上/ 是/ k/ -/ median/ 问题/ ,/ 观察/ k/ -/ median/ 问题/ 的/ 解会/ 发现/ ,/ 解中/ 的/ 任意/ 单个/ 代表性/ 元组/ 排列/ 均/ 与/ Tm/ 中/ 的/ 若干个/ 其他/ 排列/ (/ 用/ 集合/ 珡/ Ti/ 表示/ )/ 连接/ ,/ 它们/ 的/ 连接/ 关系/ 类似/ 星形/ 结构/ ,/ 称其为/ Star/ [/ 36/ ]/ ./ 在/ 此基础/ 上/ ,/ 用/ 如下/ 方法/ 解决/ 元组/ 排列/ 聚类/ 问题/ :/ 令/ U/ 是/ 对于/ Tm/ 中/ 所有/ 排列/ 的/ Star/ 集合/ ,/ 即/ U/ =/ {/ 〈/ τ/ i/ ,/ 珡/ Ti/ 〉/ |/ τ/ i/ ∈/ Tm/ ,/ 珡/ Ti/ / Tm/ }/ ./ 每个/ Stars/ 〈/ τ/ i/ ,/ 珡/ Ti/ 〉/ ∈/ U/ 的/ 代价/ 表示/ 为/ cs/ =/ ∑/ τ/ j/ ∈/ 珚/ Ti/ 表/ 性价比/ ./ 问题/ 的/ 目标/ 是/ ,/ 寻找/ 价值/ 之/ 和/ 最小/ 的/ 一组/ Star/ 集合/ S/ (/ S/ / U/ )/ ,/ 使得/ S/ 中/ 至多/ 出现/ l/ 个/ 不同/ 的/ 代表性/ 元组/ 排列/ ,/ 且/ 保证/ 任一/ 原始/ 排列/ τ/ j/ ∈/ Tm/ 至少/ 出现/ 在/ 一个/ Stars/ ∈/ S/ 中/ ./ 在/ 求解/ 前/ ,/ 需要/ 有/ 一个/ 预处理/ 步骤/ ,/ 预先/ 为/ Tm/ 上/ 的/ 每个/ 排列/ τ/ i/ ∈/ Tm/ 构建/ 一个/ 有序/ 序列/ li/ =/ {/ τ/ i1/ ,/ τ/ i2/ ,/ …/ ,/ τ/ im/ }/ ,/ 其中/ li/ 中/ 的/ 排列/ 依照/ 它/ 与/ τ/ i/ 之间/ 连接/ 代价/ 由小到大/ 排列/ ,/ 即/ dE/ (/ τ/ i/ ,/ τ/ i1/ )/ / dE/ (/ τ/ i/ ,/ τ/ i2/ )/ / …/ / dE/ (/ τ/ i/ ,/ τ/ im/ )/ ,/ 这样/ 在/ 建立/ 所有/ Star/ 的/ 集合/ U/ 时/ 就/ 不必/ 处理/ 所有/ 的/ 组合/ ,/ 只/ 需/ 处理/ 代价/ 较/ 小/ 的/ 前/ i/ 个/ Star/ 即可/ (/ i/ 可以/ 由/ 阈值/ 确定/ )/ ./ 预处理/ 算法/ 时间/ 复杂度/ 是/ O/ (/ m2logm/ )/ ,/ 其中/ |/ Tm/ |/ =/ m/ ./ 算法/ 2/ ./ 元组/ 排列/ 聚类/ 算法/ (/ Greedy/ -/ RF/ 算法/ )/ ./ 输入/ :/ 原始/ 排列/ 集合/ Tm/ =/ {/ τ/ 1/ ,/ τ/ 2/ ,/ …/ ,/ τ/ m/ }/ ,/ U/ =/ {/ 〈/ τ/ i/ ,/ 珚/ Ti/ 〉/ |/ 输出/ :/ l/ 个/ 代表性/ 排列/ 的/ 集合/ Tl/ =/ {/ 〈/ τ/ -/ 1/ ,/ 珚/ T1/ 〉/ …/ 〈/ τ/ -/ l/ ,/ 珚/ Tl/ 〉/ }/ 1/ ./ 令/ B/ =/ {/ }/ 为/ 一个/ 能够/ 存储/ m/ 个/ 〈/ τ/ i/ ,/ 珚/ Ti/ 〉/ 的/ 缓存/ 2/ ./ WHILE/ (/ Tm/ ≠/ / ∧/ l/ >/ 0/ )/ DO3/ ./ B/ ←/ / 4/ ./ FORALL/ τ/ i/ ∈/ TmDO5/ ./ 从/ Ui/ =/ {/ 〈/ τ/ i/ ,/ 珚/ Ti/ 〉/ |/ 珚/ Ti/ / Tm/ ,/ |/ 珚/ Ti/ |/ =/ [/ 2/ ,/ |/ Tm/ |/ -/ 6/ ./ B/ ←/ B/ +/ {/ si/ }/ 7/ ./ ENDFOR8/ ./ 从/ B/ 中/ 选出/ 具有/ 最小/ rs/ 的/ s/ =/ 〈/ τ/ i/ ,/ 珚/ Ti/ 〉/ 9/ ./ Tm/ ←/ Tm/ -/ 珚/ Ti/ -/ {/ τ/ i/ }/ 10/ ./ Tl/ ←/ Tl/ +/ s11/ ./ l/ ←/ l/ -/ 112/ ./ ENDWHILE13/ ./ RETURNTl/ 该/ 算法/ 把/ 输入/ 的/ m/ 个/ 原始/ 排列/ 作为/ 候选/ 代表性/ 排列/ ;/ 然后/ ,/ 每次/ 循环/ 都/ 从/ 当前/ 的/ 候选/ 代表性/ 排列/ 中/ 移除/ 一个/ 对/ 总/ 代价/ 增长/ 影响/ 最小/ 的/ 排列/ ;/ 当/ 找出/ 的/ 代表性/ 排列/ 个数/ 为/ l/ 或/ 集合/ Tm/ 为/ 空集/ 时/ ,/ 算法/ 停止/ ./ 在/ 返回/ 的/ 结果/ 集中/ ,/ 每个/ 代表性/ 排列/ 都/ 对应/ 一个/ 它/ 所/ 代表/ 的/ 排列/ 集合/ 和/ 相应/ 的/ 上下文/ 集合/ ./ 经过/ 预处理/ 后/ 聚类/ 算法/ 时间/ 复杂度/ 为/ O/ (/ ml/ )/ ,/ 其中/ m/ 为/ 原始/ 排列/ 数/ ,/ l/ 为/ 代表性/ 排列/ 数/ ./ 除了/ 上述/ 方法/ ,/ 使用/ 反/ 贪心/ 算法/ 也/ 可/ 获得/ 代表性/ 排列/ ./ Furthest/ 算法/ 的/ 基本/ 思想/ 是/ :/ 从/ 原始/ 排列/ 中/ 随机/ 选取/ 一个/ 排列/ 作为/ 代表性/ 排列/ ,/ 并/ 将/ 其/ 从/ 原始/ 排列/ 中/ 移除/ ;/ 然后/ ,/ 从/ 剩余/ 排列/ 中/ 找出/ 与/ 上/ 一次/ 移除/ 的/ 排列/ 距离/ 最大/ 的/ 排列/ 作为/ 下/ 一个/ 代表性/ 排列/ ,/ 循环/ 执行/ 此/ 过程/ 直到/ l/ 个/ 代表性/ 排列/ 全部/ 找到/ ;/ 最后/ ,/ 对于/ 剩余/ 的/ 每/ 一个/ 原始/ 排列/ ,/ 把/ 它/ 分配/ 给/ 代表性/ 排列/ 中/ 与其/ 距离/ 最小/ 的/ 那个/ 排列/ ./ 算法/ 3/ ./ 元组/ 排列/ 聚类/ 的/ 反/ 贪心/ 算法/ —/ —/ —/ Furthest/ ./ 输入/ :/ 原始/ 排列/ 集合/ Tm/ =/ {/ τ/ 1/ ,/ τ/ 2/ ,/ …/ ,/ τ/ m/ }/ 输出/ :/ l/ 个/ 代表性/ 排列/ 的/ 集合/ Tl/ =/ {/ τ/ -/ 1/ ,/ τ/ -/ 2/ ,/ …/ ,/ τ/ -/ l/ }/ 1/ ./ Tl/ ≠/ / 2/ ./ 从/ Tm/ 中/ 随机/ 选取/ 一个/ 排列/ τ/ -/ 3/ ./ Tl/ ←/ Tl/ ∪/ {/ τ/ -/ }/ 4/ ./ Tm/ ←/ Tm/ -/ {/ τ/ -/ }/ 5/ ./ FORi/ =/ 1tol/ -/ 1DO6/ ./ τ/ -/ =/ argmax/ τ/ d/ (/ τ/ ,/ Tl/ )/ 7/ ./ Tl/ ←/ Tl/ ∪/ {/ τ/ -/ }/ 8/ ./ Tm/ ←/ Tm/ -/ {/ τ/ -/ }/ 9/ ./ ENDFOR10/ ./ FOREACH/ τ/ -/ ∈/ TmDO11/ ./ 将/ 其/ 分配/ 给/ Tl/ 中/ 与其/ 距离/ 最小/ 的/ 那个/ 代表性/ 排列/ 12/ ./ ENDFOR5/ ./ 2.3/ Top/ -/ k/ 排序/ Top/ -/ k/ 排序/ 所/ 要/ 解决/ 的/ 问题/ 是/ 根据/ 排列/ 聚类/ 产生/ 的/ 代表性/ 排列/ 及/ 当前/ 查询/ 与/ 每个/ 偏好/ 类/ 对应/ 上下文/ 的/ 相似/ 度/ ,/ 计算/ 出/ 每条/ 结果/ 元组/ 在/ 每个/ 偏好/ 类/ 偏好/ 作用/ 下/ 的/ 分数/ ,/ 然后/ 计算/ 出/ 每条/ 元组/ 的/ 总体/ 排序/ Page8/ 分值/ ,/ 最后/ 基于/ Fagin/ 的/ TA/ 算法/ [/ 26/ ]/ 返回/ 前/ k/ 个/ 最能/ 满足用户/ 偏好/ 的/ 结果/ 元组/ ./ 通过/ 元组/ 排列/ 聚类/ ,/ 可/ 得到/ 关系/ R/ 上/ 的/ l/ 个/ 代表性/ 排列/ ,/ 每个/ 代表性/ 排列/ τ/ -/ 珡/ Xi/ / {/ X1/ ,/ X2/ ,/ …/ ,/ Xm/ }/ ,/ 形成/ l/ 个/ 〈/ 珡/ Xi/ ,/ τ/ -/ t/ (/ t/ ∈/ R/ )/ 在/ 每个/ 〈/ 珡/ Xi/ ,/ τ/ -/ 义/ 的/ 排序/ 分值/ s/ (/ t/ |/ 珡/ Xi/ )/ ./ 因此/ ,/ 可/ 使用/ TA/ 算法/ 检索/ 出/ top/ -/ k/ 个/ 结果/ 元组/ (/ 算法/ 4/ )/ ./ 算法/ 4/ ./ Top/ -/ k/ 排序/ 算法/ ./ 输入/ :/ 代表性/ 排列/ Tl/ =/ {/ τ/ -/ 1/ ,/ τ/ -/ 2/ ,/ …/ ,/ τ/ -/ l/ }/ ,/ 每个/ τ/ -/ i/ 对应/ 的/ 上/ 输出/ :/ Top/ -/ k/ 个/ 结果/ 元组/ 1/ ./ 令/ B/ =/ {/ }/ 是/ 一个/ 能够/ 存储/ k/ 个/ 元组/ 的/ 缓存/ 2/ ./ 令/ L/ 是/ 个/ 一个/ 大小/ 为/ l/ 的/ 数组/ ,/ 存储/ 来自/ 每个/ 排列/ 3/ ./ REPEAT4/ ./ FORALLi/ ∈/ {/ 1/ ,/ 2/ ,/ …/ ,/ l/ }/ DO5/ ./ 从/ 排列/ τ/ -/ i/ 中/ 检索/ 下/ 一个/ 元组/ t6/ ./ 计算/ 元组/ t/ 的/ 分数/ :/ 7/ ./ 用/ 元组/ t/ 在/ 排列/ τ/ -/ i/ 中/ 的/ 分数/ 更新/ L/ 中/ 对应/ 于元/ 8/ ./ IFt/ ∈/ Q/ (/ R/ )/ THEN9/ ./ 通过/ 随机/ 访问/ 方式/ ,/ 获取/ 元组/ t/ 在/ 其他/ 排列/ 10/ ./ tscore/ (/ t/ ,/ Q/ )/ ←/ 所有/ 检索/ 到/ 的/ 分数/ 之/ 和/ 11/ ./ 按照/ 降序/ 方式/ ,/ 将/ 〈/ t/ ,/ tscore/ (/ t/ ,/ Q/ )/ 〉/ 插入/ 到/ 缓/ 12/ ./ ENDFOR13/ ./ UNTILB/ [/ K/ ]/ ./ tscore/ / ∑/ l14/ ./ RETURNBTA/ 算法/ 提供/ 两种/ 访问/ 数据/ 模式/ :/ 随机/ 访问/ 和/ 顺序/ 访问/ ./ 算法/ 4/ 的/ 具体/ 处理过程/ 分成/ 以下/ 3/ 步/ :/ (/ 1/ )/ 循环/ 访问/ 每个/ 代表性/ 排列/ ./ 在/ 每次/ 循环/ 过程/ 中/ ,/ 当/ 一个/ 元组/ t/ (/ t/ ∈/ Q/ (/ R/ )/ )/ 在/ 某个/ 排列/ τ/ -/ 现时/ ,/ 计算/ 它/ 在/ 该/ 排列/ 中/ 的/ 分数/ ,/ 计算公式/ 为/ 该/ 分数/ 由/ 两/ 部分/ 构成/ :/ 一部分/ 是/ sim/ (/ Q/ ,/ 珡/ Xi/ )/ ,/ 表示/ 查询/ Q/ 与/ 上下文/ 集合/ 珡/ Xi/ 之间/ 的/ 相似/ 度/ ;/ 另/ 一部分/ 是/ s/ (/ t/ |/ 珡/ Xi/ )/ ,/ 表示/ 元组/ t/ 在/ 〈/ 珡/ Xi/ ,/ τ/ -/ 的/ 排序/ 分值/ ./ 然后/ ,/ 通过/ 随机/ 访问/ 获取/ 该/ 元组/ 在/ 其他/ j/ 中/ 的/ 分数/ ,/ 这些/ 分数/ 之/ 和/ 就/ 构成/ 了/ 元组/ t/ 对/ 排列/ τ/ -/ 于/ 查询/ Q/ 的/ 总体/ 排序/ 分值/ ,/ 由式/ (/ 18/ )/ 计算/ :/ tscore/ (/ t/ ,/ Q/ )/ =/ ∑/ 珡/ Xi/ (/ 2/ )/ 令/ s/ (/ tj/ |/ 珡/ Xi/ )/ 为/ 第/ j/ 次/ 循环/ 结束/ 后/ ,/ 在/ 每个/ 排/ i/ 中/ 最后/ 被/ 访问/ 元组/ 的/ 分数/ ./ TA/ 算法/ 的/ 阈值/ 列/ τ/ -/ threshold/ 确定/ 为/ threshold/ =/ ∑/ 珡/ Xi/ 即/ ,/ 阈值/ threshold/ 为/ 第/ j/ 次/ 循环/ 结束/ 后/ 数组/ L/ 中/ 的/ 分数/ 之/ 和/ ./ 当/ 缓存/ B/ 中/ 存在/ k/ 个/ 元组/ 且/ 它们/ 的/ 总体/ 排序/ 分值/ 都/ 不/ 小于/ 该/ 阈值/ 时/ ,/ 算法/ 停止/ ./ 通过/ 设定/ 阈值/ threshold/ ,/ 使得/ 第/ 1/ 步/ 无/ 需要/ 遍历/ 每个/ 代表性/ 排列/ 中/ 的/ 所有/ 元组/ ./ (/ 3/ )/ 在/ 所有/ 被/ 发现/ 的/ 元组/ 中/ ,/ 输出/ 前/ k/ 个/ 具有/ 最高/ 总体/ 排序/ 分值/ 的/ 元组/ ./ 注意/ ,/ 当/ 第/ 2/ 步/ 完成/ 后/ ,/ 对于/ 任/ 一个/ 没有/ 在/ 循环/ 访问/ 中/ 被/ 发现/ 的/ 元组/ t/ ,/ 它/ 的/ 总体/ 排序/ 分值/ 都/ 将/ 小于/ 设定/ 的/ 阈值/ ,/ 即/ tscore/ (/ t/ ,/ Q/ )/ </ threshold/ ./ 算法/ 4/ 的/ 复杂度/ 与/ 输入/ 的/ 元组/ 排列/ 数/ 呈/ 线性关系/ ./ 考虑/ 关系/ R/ (/ A1/ ,/ A2/ ,/ …/ ,/ Am/ )/ ,/ 若令/ Dom/ (/ Ai/ )/ 代表/ 每个/ 属性/ 的/ 值域/ 且/ 基数/ 为/ |/ Dom/ (/ Ai/ )/ |/ ,/ 则/ 将/ 存在/ 2/ |/ Dom/ (/ A1/ )/ |/ +/ |/ Dom/ (/ A2/ )/ |/ +/ …/ +/ |/ Dom/ (/ Am/ )/ |/ 个/ 不同/ 的/ 上下文/ 条件/ ./ 如果/ 每个/ 上下文/ 都/ 对应/ 一个/ 不同/ 的/ 元组/ 排列/ ,/ 则/ TA/ 算法/ 的/ 时间/ 复杂度/ 为/ O/ (/ 2/ |/ Dom/ (/ A1/ )/ |/ +/ |/ Dom/ (/ A2/ )/ |/ +/ …/ +/ |/ Dom/ (/ Am/ )/ |/ )/ ./ 本文/ 通过/ 聚类/ 将/ 2/ |/ Dom/ (/ A1/ )/ |/ +/ |/ Dom/ (/ A2/ )/ |/ +/ …/ +/ |/ Dom/ (/ Am/ )/ |/ 个/ 元组/ 排列/ 减少/ 到/ l/ 个/ 代表性/ 排列/ ,/ top/ -/ k/ 排序/ 算法/ 的/ 时间/ 复杂度/ 最终/ 降低/ 到/ O/ (/ nl/ )/ ,/ 其中/ n/ 为/ 代表性/ 排列/ 中/ 的/ 元组/ 数/ ,/ l/ 为/ 代表性/ 排列/ 数/ ./ 因为/ 该/ 算法/ 的/ 最坏/ 情况/ 是/ 计算/ 出/ 所有/ 元组/ 的/ 总体/ 排序/ 分值/ 后/ 才能/ 确定/ 前/ k/ 个/ 最高/ 分数/ 元组/ ./ 6/ 效果/ 与/ 性能/ 实验/ 评价/ 6.1/ 实验/ 环境/ 数据/ 集/ ./ 测试数据/ 使用/ 了/ 两个/ 不同/ 应用领域/ 的/ 数据/ 集/ ,/ 一个/ 是从/ Yahoo/ ./ Autos/ 网站/ 随机/ 抽取/ 的/ 1000000/ 条/ 二手车/ 记录/ ,/ 合成/ 数据/ 集/ CarDB/ (/ Make/ ,/ Model/ ,/ Year/ ,/ Color/ ,/ Engine/ ,/ Price/ ,/ Mileage/ )/ ,/ 其中/ Make/ 、/ Year/ 、/ Model/ 和/ Color/ 是/ 文本/ 型/ 属性/ ,/ Engine/ 、/ Price/ 和/ Mileage/ 是/ 数值/ 型/ 属性/ ;/ 另/ 一个/ 是从/ Yahoo/ ./ Realestate/ 网站/ 随机/ 抽取/ 的/ 237620/ 条/ 房产信息/ ,/ 合成/ 数据/ 集/ HouseDB/ (/ City/ ,/ Price/ ,/ Area/ ,/ Bedrooms/ ,/ Bathrooms/ ,/ Schooldistrict/ ,/ View/ ,/ Neigh/ -/ borhood/ ,/ Buildyear/ )/ ,/ 其中/ City/ ,/ Schooldistrict/ ,/ View/ 和/ Neighborhood/ 是/ 文本/ 型/ 属性/ ,/ Price/ ,/ Area/ ,/ Bedrooms/ ,/ Bathrooms/ 和/ Buildyear/ 是/ 数值/ 型/ 属性/ ./ 偏好/ 类/ ./ 邀请/ 同事/ 和/ 学生/ 基于/ 数据/ 集/ 提交/ 查询/ ,/ 得到/ 一定/ 规模/ 的/ 查询/ 历史/ ,/ 通过/ 在/ 查询/ 历史/ 上/ 使用/ 1.2/ 节/ 的/ 上下文/ 偏好/ 获取/ 方法/ ,/ 分别/ 为/ CarDB/ 和/ HouseDB/ 获取/ 上下文/ 偏好/ 和/ 划分/ 偏好/ 类/ ,/ 用于/ 下面/ 的/ 实验/ 测试/ ./ 在/ 获取/ 偏好/ 类/ 的/ 过程/ 中/ ,/ 分别/ 将/ 信任度/ Page9/ 阈值/ 设置/ 为/ 0.5/ 、/ 0.45/ 、/ 0.4/ 、/ 0.35/ 、/ 0.3/ 、/ 0.25/ 和/ 0.2/ ,/ 然后/ 观察/ 不同/ 阈值/ 情况/ 下/ ,/ 每个/ 偏好/ 类/ 所/ 包含/ 的/ 偏好/ 数量/ 以及/ 偏好/ 的/ 合理性/ ./ 在/ 本文/ 实验/ 环境/ 下/ ,/ 当/ 信任度/ 阈值/ 设置/ 较/ 高时/ (/ 0.4/ 以上/ )/ ,/ 会/ 导致/ 某些/ 偏好/ 类/ 包含/ 的/ 偏好/ 数量/ 太/ 少/ ,/ 这/ 将/ 导致/ 偏好/ 类/ 所/ 涉及/ 的/ 相关/ 元组/ 过少/ 而/ 使/ 结果/ 元组/ 的/ 排序/ 分值/ 不能/ 得到/ 有效/ 区分/ ;/ 如果/ 信任度/ 阈值/ 设置/ 过低/ (/ 0.2/ 以下/ )/ ,/ 又/ 会/ 导致/ 一些/ 不合理/ 的/ 偏好/ 产生/ ,/ 由于/ 这些/ 不合理/ 偏好/ 也/ 会/ 与/ 合理/ 偏好/ 一起/ 参与/ 结果/ 元组/ 排序/ 分值/ 的/ 计算/ ,/ 因此/ 会/ 在/ 一定/ 程度/ 上/ 影响/ 到/ 排序/ 效果/ ./ 本文/ 把/ 信任度/ 设置/ 为/ 0.25/ ./ 6.2/ 偏好/ 模型/ 表达能力/ 测试/ 该/ 实验/ 目的/ 是/ 测试/ 本文/ 提出/ 的/ 带/ 偏好/ 程度/ 的/ 上下文/ 偏好/ 模型/ 与/ 文献/ [/ 7/ ]/ 提出/ 的/ 不带/ 偏好/ 程度/ 的/ 上下文/ 偏好/ 模型/ 在/ 偏好/ 表达能力/ 上/ 的/ 差别/ ./ 偏好/ 模型/ 的/ 表达能力/ 体现/ 在/ 同类/ 偏好/ 下/ ,/ 通过/ 偏好/ 模型/ 建模/ 后/ ,/ 所有/ 与/ 该/ 偏好/ 类/ 相关/ 的/ 元组/ 在/ 有效/ 偏好/ 支持/ 度/ 上/ 的/ 区分度/ ,/ 区分度/ (/ Difference/ )/ 使用/ 具有/ 不同/ 有效/ 偏好/ 支持/ 度/ 的/ 元组/ 数/ 与/ 所有/ 与/ 该/ 偏好/ 类/ 相关/ 的/ 元组/ 数/ 的/ 比值/ 表示/ ./ 区分度/ 越高/ ,/ 说明/ 偏好/ 模型/ 对/ 不同/ 偏好/ 的/ 区分/ 能力/ 越强/ ,/ 进而/ 在/ 此基础/ 上/ 计算/ 出/ 的/ 排序/ 结果/ 越/ 贴近/ 用户/ 偏好/ ./ 在/ 有效/ 偏好/ 支持/ 度/ 上/ 的/ 区分度/ 可由/ 下式/ 表示/ ,/ 即/ Difference/ (/ A/ )/ =/ #/ tuplesassertedbydifferenteffective/ #/ relevanttuplesassertedbypreferences/ 其中/ ,/ A/ 代表/ 偏好/ 模型/ ,/ A/ =/ {/ 带/ 偏好/ 程度/ 的/ 偏好/ 模型/ ,/ 不带/ 偏好/ 程度/ 的/ 偏好/ 模型/ }/ ./ 首先/ 在/ CarDB/ 的/ 偏好/ 类中/ 随机/ 选出/ 15/ 个/ 偏好/ 类/ ,/ 实验/ 的/ 测试数据/ 使用/ 这/ 15/ 个/ 偏好/ 类下/ 的/ 所有/ 偏好/ 以及/ CarDB/ 中/ 与/ 这/ 15/ 个/ 偏好/ 类/ 相关/ 的/ 所有/ 元组/ ./ 在/ 该/ 实验/ 环境/ 下/ ,/ 将/ 每个/ 偏好/ 类中/ 的/ 偏好/ 划分/ 为/ 10/ 组/ ,/ 每组/ 的/ 偏好/ 个数/ 分别/ 为/ 10/ ,/ 20/ ,/ 30/ ,/ 40/ ,/ 50/ ,/ 60/ ,/ 70/ ,/ 80/ ,/ 90/ ,/ 100/ ;/ 然后/ ,/ 使用/ 两种/ 偏好/ 模型/ 对/ 这些/ 偏好/ 建模/ ,/ 得出/ 与/ 每个/ 偏好/ 类/ 相关/ 的/ 每条/ 元组/ 的/ 有效/ 偏好/ 支持/ 度/ ,/ 统计/ 出/ 具有/ 不同/ 有效/ 偏好/ 支持/ 度/ 的/ 元组/ 个数/ ,/ 然后/ 用式/ (/ 20/ )/ 进行/ 计算/ ;/ 最后/ 对/ 这/ 15/ 个/ 偏好/ 类上/ 相同/ 偏好/ 个数/ 情况/ 下/ 得到/ 的/ 区分度/ 求/ 平均/ ,/ 得出/ 如图/ 2/ (/ a/ )/ 所示/ 的/ 比较/ 结果/ ./ HouseDB/ 上/ 的/ 比较/ 结果/ 如图/ 2/ (/ b/ )/ 所示/ ./ 实验/ 结果表明/ ,/ 提出/ 的/ 带/ 偏好/ 程度/ 的/ 偏好/ 模型/ 在/ 两个/ 不同/ 应用领域/ 测试数据/ 集上/ 的/ 区分度/ 都/ 明显/ 优于/ 不带/ 偏好/ 程度/ 的/ 偏好/ 模型/ ,/ 其/ 主要/ 原因/ 是/ 带/ 偏好/ 程度/ 的/ 偏好/ 模型/ 既/ 能/ 体现/ 元组/ 之间/ 的/ 二元/ 偏序/ 关系/ ,/ 又/ 能/ 表达/ 用户/ 对/ 不同/ 元组/ 的/ 偏好/ 程度/ ./ 实验/ 结果/ 还/ 表明/ ,/ 在/ 相关/ 元组/ 数/ 固定/ 的/ 情况/ 下/ ,/ 偏好/ 数越/ 少/ 区分度/ 越小/ ./ 这/ 是因为/ 在/ 偏好/ 数较/ 少/ 的/ 情况/ 下/ ,/ 明确/ 被/ 偏好/ 指定/ 的/ 元组/ 数/ 就/ 较/ 少/ ,/ 不/ 具有/ 偏好/ 关系/ 的/ 元组/ 数/ 就/ 较/ 多/ ,/ 从而/ 具有/ 相同/ 有效/ 偏好/ 支持/ 度/ (/ Peff/ -/ p/ (/ t/ ,/ t/ ,/ PX/ )/ =/ 1/ // 2/ )/ 的/ 元组/ 数/ 就/ 较/ 多/ ./ 但是/ ,/ 偏好/ 数过/ 多/ 也/ 会/ 导致/ 区分度/ 有所/ 下降/ ,/ 这/ 是因为/ 当/ 多个/ 偏好/ 共存/ 的/ 情况/ 下/ ,/ 它们/ 之间/ 容易/ 产生矛盾/ 进而/ 造成/ 元组/ 之间/ 具有/ 相同/ 的/ 有效/ 偏好/ 支持/ 度/ ./ 6.3/ 元组/ 排列/ 聚类/ 算法/ 测试/ 该/ 实验/ 目的/ 是/ 测试/ 元组/ 排列/ 聚类/ 算法/ 产生/ 的/ 代表性/ 排列/ 的/ 准确性/ ./ 首先/ 使用/ 以下/ 步骤/ 产生/ 本/ 实验/ 的/ 测试数据/ 集/ :/ 每个/ 数据/ 集/ 包含/ 4/ 个/ 参数/ :/ n/ ,/ m/ ,/ l/ 和/ noise/ ,/ 其中/ n/ 是/ 每个/ 排列/ 中/ 的/ 元组/ 数/ ,/ m/ 是/ 输入/ 的/ 排列/ 数/ ,/ l/ 是/ 聚类/ 完成/ 后/ 的/ 排列/ 数/ ./ 首先/ ,/ 在/ n/ 个/ 元组/ 上/ 随机/ 产生/ l/ 个/ 排列/ ,/ 用/ 集合/ L/ 表示/ ,/ 这/ l/ 个/ 排列/ 就/ 构成/ 了/ l/ 个/ 聚类/ 中心/ ./ 给定/ 一个/ 聚类/ 中心/ ,/ 来自/ 这个/ 聚类/ 的/ 所有/ 排列/ 可以/ 看做/ 是/ 在/ 聚类/ 中心/ 上/ 加入/ 一定/ 数量/ 的/ 噪声/ (/ noise/ )/ 而/ 产生/ 的/ ./ 本/ 实验/ 中/ 的/ noise/ 是/ 通过/ 交换/ 一些/ 元组/ 的/ 排序/ 位置/ 来/ 实现/ 的/ ,/ noise/ 的/ 数量/ 就是/ 交换/ 的/ 元组/ 数/ ,/ 使用/ 此/ 方法/ 来/ 产生/ 试验/ 数据/ 集/ S/ ./ 使用/ 本文/ 聚类/ 算法/ (/ Greedy/ -/ RF/ )/ 、/ 贪心/ 算法/ (/ GreedyAlgorithm/ )/ 和/ 反/ 贪心/ 算法/ (/ FurthestAlgo/ -/ rithm/ )/ 分别/ 在/ 数据/ 集/ S/ 上/ 产生/ 聚类/ 排列/ ,/ 然后/ 比较/ 由/ 不同/ 算法/ 产生/ 的/ 聚类/ 排列/ 与/ 原/ 排列/ L/ 的/ 距离/ ./ 通过/ 比较/ 这个/ 距离/ 来/ 衡量/ 算法/ 的/ 准确性/ ./ Page10/ 在/ CarDB/ 和/ HouseDB/ 上/ ,/ 使用/ 具有/ 如下/ 参数/ 的/ 数据/ 集来/ 进行/ 试验/ :/ n/ =/ 300/ ,/ m/ =/ 600/ ,/ l/ =/ {/ 8/ ,/ 16/ }/ ,/ noise/ =/ {/ 2/ ,/ 4/ ,/ 8/ ,/ …/ ,/ 128/ }/ ./ 使用/ F/ (/ A/ )/ // F/ (/ Inp/ )/ 表示/ 算法/ 的/ 准确性/ ,/ 其中/ A/ =/ {/ GreedyAlgorithm/ ,/ FurthestAlgorithm/ ,/ Greedy/ -/ RF/ }/ ,/ F/ (/ A/ )/ 表示/ 算法/ A/ 产生/ 的/ 聚类/ 排列/ 与/ 原/ 排列/ 的/ 距离/ ,/ F/ (/ Inp/ )/ 表示/ 产生/ 测试数据/ 的/ 基准/ 聚类/ 的/ 距离/ ./ 两个/ 排列/ 的/ 距离/ 使用/ 式/ (/ 15/ )/ 计算/ ./ F/ (/ A/ )/ // F/ (/ Inp/ )/ 的/ 值/ 越/ 接近/ 1/ ,/ 表示/ 由/ 聚类/ 算法/ 产生/ 的/ 代表性/ 排列/ 与/ 生成/ 测试数据/ 的/ 基准/ 排列/ 越/ 接近/ ,/ 则/ 聚类/ 算法/ 越/ 准确/ ;/ 反之/ ,/ F/ (/ A/ )/ // F/ (/ Inp/ )/ 的/ 值/ 越/ 大/ ,/ 则/ 聚类/ 算法/ 越/ 不/ 准确/ ./ 图/ 3/ 给出/ 了/ 在/ 代表性/ 排列/ 数/ l/ 分别/ 取/ 8/ 和/ 16/ 的/ 情况/ 下/ ,/ 上述/ 3/ 种聚类/ 算法/ 对应/ 于/ 不同/ 交换/ 数/ (/ swaps/ )/ 的/ 准确性/ ./ 从图/ 中/ 可以/ 看出/ ,/ Greedy/ -/ RF/ 算法/ 的/ 准确性/ 最高/ ./ 6.4/ 返回/ top/ -/ 犽/ 个/ 元组/ 的/ 准确性/ 测试/ 该/ 实验/ 的/ 目的/ 是/ 测试/ 利用/ 本文/ 元组/ 排列/ 聚类/ 算法/ 产生/ 的/ 代表性/ 排列/ 检索/ 到/ 的/ top/ -/ k/ 个/ 元组/ 的/ 准确性/ ./ 同时/ ,/ 还/ 与/ 利用/ Greedy/ 算法/ 和/ Furthest/ 算法/ 产生/ 的/ 代表性/ 排列/ 检索/ 到/ 的/ top/ -/ k/ 个/ 元组/ 的/ 准确性/ 进行/ 对比/ ./ 也就是说/ ,/ 该/ 实验/ 要/ 测试/ 在/ 压缩/ 了/ 多个/ 原始/ 排列/ 后/ ,/ 排序/ 结果/ 的/ 准确性/ 丢失/ 程度/ ,/ 使用/ Jaccard/ 系/ 数量化/ top/ -/ k/ 排序/ 算法/ 的/ 准确性/ :/ J/ (/ R/ (/ Opt/ ,/ k/ )/ ,/ R/ (/ A/ ,/ k/ )/ )/ =/ |/ R/ (/ Opt/ ,/ k/ )/ ∩/ R/ (/ A/ ,/ k/ )/ |/ 其中/ ,/ R/ (/ Opt/ ,/ k/ )/ 代表/ 使用/ 所有/ 可用/ 的/ 元组/ 排列/ 产生/ 的/ top/ -/ k/ 个/ 元组/ 的/ 集合/ ,/ R/ (/ A/ ,/ k/ )/ 代表/ 只/ 使用/ 代表性/ 元组/ 排列/ 产生/ 的/ top/ -/ k/ 个/ 元组/ 的/ 集合/ ,/ R/ (/ Opt/ ,/ k/ )/ ∩/ R/ (/ A/ ,/ k/ )/ 表示/ 两个/ 集合/ 中/ 相同/ 的/ 元组/ 数/ ./ Jaccard/ 系数/ 的/ 值/ 在/ 0/ ~/ 1/ 之间/ ,/ 值越/ 高/ 表明/ 两个/ 集合/ 中/ 相同/ 元组/ 数越/ 多/ ./ 该/ 实验/ 使用/ 的/ 测试数据/ 集/ 的/ 产生/ 方法/ 与/ 聚类/ 算法/ 的/ 准确性/ 实验/ 中/ 测试数据/ 集/ 的/ 产生/ 方法/ 相同/ ./ 这里/ ,/ 令聚类/ 后/ 的/ 代表性/ 排列/ 个数/ l/ =/ {/ 8/ ,/ 16/ }/ ,/ 固定/ 噪声/ 值/ noise/ 为/ 64/ 个/ 交换/ (/ swaps/ )/ ,/ n/ 和/ m/ 的/ 值/ 被/ 分别/ 固定/ 为/ 300/ 和/ 600/ ./ 然后/ 在/ CarDB/ 和/ HouseDB/ 上/ ,/ 分别/ 测试/ 对应/ 于/ 不同/ k/ 值/ 情况/ 下/ ,/ 由/ 3/ 种/ 不同/ 聚类/ 算法/ 产生/ 的/ 代表性/ 排列/ 得到/ 的/ top/ -/ k/ 个/ 元组/ 的/ 平均/ 准确性/ ./ 实验/ 结果/ 如图/ 4/ 所示/ ./ 从图/ 4/ 可以/ 看出/ ,/ 在/ Greedy/ -/ RF/ 算法/ 产生/ 的/ 代表性/ 排列/ 基础/ 上/ ,/ 产生/ 的/ top/ -/ k/ 个/ 元组/ 的/ 准确性/ 优于/ Greedy/ 算法/ 和/ Furthest/ 算法/ ,/ 并且/ 当/ l/ 取/ 8/ 和/ 16/ 时/ ,/ 准确性/ 差异/ 并/ 不/ 明显/ ./ 此外/ 还/ 可/ 看出/ ,/ 随着/ k/ 值/ 增大/ ,/ 平均/ 准确性/ 逐渐/ 提高/ ;/ 但/ 即使/ 在/ k/ 值/ 很小/ 的/ 情况/ 下/ ,/ top/ -/ k/ 排序/ 的/ 准确性/ 也/ 很/ 高/ ./ 6.5/ Top/ -/ 犽/ 排序/ 算法/ 的/ 性能/ 测试/ 该/ 实验/ 主要/ 从/ 两个/ 方面/ 考察/ top/ -/ k/ 排序/ 算法/ 的/ 性能/ :/ 一是/ 代表性/ 排列/ 数/ 与/ top/ -/ k/ 排序/ 算法/ 执行/ 时间/ 的/ 关系/ ;/ 二是/ top/ -/ k/ 中/ 的/ k/ 值/ 与/ top/ -/ k/ 排序/ 算法/ 执行/ 时间/ 的/ 关系/ ./ Page11/ (/ 1/ )/ 代表性/ 排列/ 数/ 的/ 改变/ 对/ top/ -/ k/ 排序/ 的/ 影响/ ./ 首先/ 将/ k/ 值/ 固定/ (/ 这里/ 设置/ k/ =/ 100/ )/ ,/ 然后/ 对于/ 每种/ 代表性/ 排列/ 数/ (/ 包括/ 6/ ,/ 12/ ,/ 25/ ,/ 50/ ,/ 100/ ,/ 200/ ,/ 400/ )/ ,/ 分别/ 在/ CarDB/ 和/ HouseDB/ 上/ 进行/ 10/ 次测试/ 查询/ ,/ 并/ 由/ 系统/ 记录/ 查询/ 的/ 响应/ 时间/ ,/ 最后/ 取其/ 平均值/ 作为/ 统计/ 结果/ ./ 图/ 5/ 给出/ 了/ 代表性/ 排列/ 数/ 与/ top/ -/ k/ 排序/ 算法/ 执行/ 时间/ 的/ 关系/ ./ 图/ 5/ 不同/ 代表性/ 排列/ 数下/ 的/ top/ -/ k/ 排序/ 算法/ 执行/ 时间/ 排序/ 算法/ 执行/ 时间/ 的/ 增长/ 几乎/ 是/ 线性/ 的/ ./ 由图/ 5/ 可见/ ,/ 随着/ 代表性/ 排列/ 数/ 的/ 增加/ ,/ top/ -/ k/ (/ 2/ )/ Top/ -/ k/ 中/ 的/ k/ 值/ 改变/ 对/ top/ -/ k/ 排序/ 的/ 影响/ ./ 在/ 该/ 实验/ 中/ ,/ 将/ CarDB/ 和/ HouseDB/ 两个/ 数据/ 集中/ 的/ 代表性/ 排列/ 数都/ 固定/ 为/ 30/ 个/ ./ 在/ 此基础/ 上/ ,/ 测试/ top/ -/ k/ 排序/ 算法/ 对应/ 于/ 每/ 一个/ k/ 值/ 情况/ 下/ 的/ 执行/ 时间/ ,/ 执行/ 时间/ 取/ 10/ 个/ 测试/ 查询/ 执行/ 时间/ 的/ 平均值/ ./ 图/ 6/ 分别/ 给出/ 了/ 在/ CarDB/ 和/ HouseDB/ 上/ 不同/ k/ 值/ 情况/ 下/ top/ -/ k/ 排序/ 算法/ 的/ 平均/ 执行/ 时间/ ./ 图/ 6/ 不同/ k/ 值下/ 的/ top/ -/ k/ 排序/ 算法/ 执行/ 时间/ 从图/ 6/ 可以/ 看出/ ,/ top/ -/ k/ 排序/ 算法/ 随着/ k/ 值/ 的/ 增大/ 而/ 性能/ 逐渐/ 下降/ ./ 这/ 是因为/ 当/ k/ 值/ 增大/ 时/ ,/ top/ -/ k/ 排序/ 算法/ 需要/ 处理/ 的/ 每个/ 代表性/ 排列/ 中/ 的/ 元组/ 数就会/ 相应/ 地/ 增加/ ./ 此外/ 还/ 可/ 发现/ ,/ top/ -/ k/ 排序/ 算法/ 在/ CarDB/ 上/ 的/ 执行/ 时间/ 在/ 很大/ 程度/ 上/ 高于/ HouseDB/ 上/ 的/ 执行/ 时间/ ,/ 这/ 是因为/ CarDB/ 中/ 的/ 元组/ 数/ 相对/ 较/ 多/ ,/ 而/ 每个/ 代表性/ 排列/ 又/ 都/ 包含/ 了/ CarDB/ 中/ 的/ 所有/ 元组/ ID/ 及其/ 分数/ ,/ 因此/ 增加/ 了/ top/ -/ k/ 排序/ 算法/ 的/ 顺序/ 访问/ 和/ 随机/ 访问/ 执行/ 时间/ ,/ 从而/ 导致/ 算法/ 执行/ 时间/ 增加/ ./ 7/ 结论/ 与/ 展望/ 本文/ 主要/ 围绕/ 带/ 偏好/ 程度/ 的/ 上下文/ 偏好/ 建模/ 及/ 基于/ 上下文/ 偏好/ 的/ 查询/ 结果/ top/ -/ k/ 排序/ 问题/ 展开/ 了/ 深入/ 具体/ 的/ 研究/ ./ 结合/ 定性/ 和/ 定量/ 偏好/ 表示/ 方法/ ,/ 提出/ 了/ 带/ 偏好/ 程度/ 的/ 上下文/ 偏好/ 模型/ 以及/ 上下文/ 偏好/ 的/ 获取/ 和/ 处理/ 方法/ ;/ 在/ 此基础/ 上/ ,/ 给出/ 了/ 基于/ 上下文/ 偏好/ 的/ 查询/ 结果/ top/ -/ k/ 排序/ 解决方案/ ,/ 以及/ 相应/ 元组/ 排列/ 创建/ 、/ 聚类/ 和/ 查询/ 结果/ top/ -/ k/ 排序/ 算法/ ./ 实验/ 结果表明/ ,/ 提出/ 的/ 偏好/ 模型/ 具有/ 较强/ 的/ 偏好/ 表达能力/ ,/ 排序/ 方法/ 具有/ 较/ 高/ 的/ 排序/ 质量/ 和/ 执行/ 效率/ ./ 本文/ 主要/ 贡献/ 为/ :/ (/ 1/ )/ 提出/ 了/ 带/ 偏好/ 程度/ 的/ 上下文/ 偏好/ 模型/ 及其/ 处理/ 方法/ ;/ (/ 2/ )/ 提出/ 了/ 基于/ 上下文/ 偏好/ 的/ 查询/ 结果/ top/ -/ k/ 排序/ 方法/ ./ 下/ 一步/ 将/ 研究/ 如何/ 有效/ 地/ 对/ Web/ 数据库/ 多/ 查询/ 结果/ 进行/ 个性化/ 分类/ ,/ 并/ 将/ 排序/ 与/ 分类/ 方法/ 相结合/ 解决/ Web/ 数据库/ 查询/ 中/ 出现/ 的/ 信息/ 过载/ 问题/ ./ 

