Page1/ 基于/ 时间/ 多/ 栈下推/ 网络/ 的/ 实时/ 系统验证/ 1/ )/ (/ 桂林/ 电子科技/ 大学/ 广西/ 可信/ 软件/ 重点/ 实验室/ 广西/ 桂林/ 541004/ )/ 2/ )/ (/ 中国科学院/ 信息工程/ 研究所/ 北京/ 100093/ )/ 摘要/ 多/ 栈下推/ 网络/ (/ MPDN/ )/ 是/ 利用/ 多个/ 栈来/ 描述/ 并发/ 递归/ 程序/ 线程/ 之间/ 交互/ 的/ 一种/ 下推/ 系统/ 模型/ ./ 为了/ 描述/ 基于/ 线程/ 之间/ 交互/ 的/ 实时/ 并发/ 递归/ 程序/ ,/ 首先/ 将/ 描述/ 连续/ 时间/ 的/ 时钟/ 引入/ 到/ MPDN/ ,/ 提出/ 了/ 时间/ 多/ 栈下推/ 网络/ (/ TMPDN/ )/ ,/ 并/ 给出/ 了/ 语法/ 及其/ 操作/ 语义/ ;/ 其次/ 利用/ 基于/ 时间/ 关键点/ 的/ 时钟/ 等价/ 优化/ 技术/ ,/ 缩减/ 等价/ 域/ 状态/ 空间/ ;/ 然后/ 通过/ 静态/ 转换方法/ ,/ 获得/ 所有/ 的/ 可达域/ 状态/ 格局/ ,/ 将/ 连续/ 时间/ 的/ TMPDN/ 模型/ 转换成/ 离散/ 的/ MPDN/ 模型/ ./ 在/ 此基础/ 上/ ,/ 基于/ on/ -/ the/ -/ fly/ 技术/ ,/ 采用/ 动态/ 转换方法/ ,/ 仅/ 关心/ 栈顶域/ 状态/ 转换/ ,/ 进一步/ 缩减/ 转换/ 后/ 的/ 状态/ 空间/ ./ 同时/ 证明/ 了/ 状态/ qF/ 在/ TMPDN/ 可达/ 当且/ 仅/ 当/ 其/ 转换/ 状态/ qF/ 在/ MPDN/ 可达/ ,/ 并/ 给出/ 了/ 模型/ 转换/ 算法/ ;/ 最后/ 可/ 采用/ 现有/ 模型/ 检验/ 工具/ 验证/ 转换/ 后/ 的/ MPDN/ ./ 关键词/ MPDN/ ;/ TMPDN/ ;/ 并发/ 递归/ 程序/ ;/ 时钟/ 等价/ ;/ 可达性/ 1/ 引言/ 随着/ 多核/ 处理器/ 技术/ 日益/ 发展/ ,/ 并发/ 软件/ 已/ 渗透到/ 国民经济/ 和/ 国防建设/ 的/ 各个领域/ ,/ 然而/ 在/ 某些/ 安全/ 攸关/ 的/ 领域/ ,/ 诸如/ 交通/ 控制/ 和/ 航空航天/ 等/ 领域/ ,/ 软件/ 上/ 的/ 微小/ 错误/ 可能/ 导致/ 重大事故/ ,/ 甚至/ 危及/ 人身安全/ ./ 如何/ 提高/ 软件系统/ 的/ 可靠性/ 和/ 安全性/ 已/ 成为/ 当前/ 紧迫/ 问题/ ./ 对于/ 一些/ 安全/ 攸关/ 的/ 实时/ 系统/ 来说/ ,/ 其/ 安全性/ 要求/ 更高/ ,/ 需/ 充分/ 验证/ 软件系统/ 的/ 某些/ 关键/ 性质/ ,/ 这种/ 背景/ 下/ ,/ 对/ 其/ 形式化/ 分析/ 验证/ 显得/ 尤为重要/ ./ 目前/ ,/ 诸多/ 学者/ 已/ 致力于/ 实时/ 系统分析/ 与/ 验证/ 的/ 研究/ ,/ 为了/ 描述/ 不同/ 类型/ 的/ 实时/ 系统/ ,/ 提出/ 了/ 时间/ 自动机/ 、/ 时间/ 下推/ 自动机/ 、/ 时间/ 递归/ 状态/ 自动机/ 、/ 嵌套/ 时间/ 自动机/ 等/ 理论/ 模型/ ./ 具体/ 而言/ ,/ 1994/ 年/ Alur/ 和/ Dill/ [/ 1/ ]/ 在/ 自动机/ 的/ 基础/ 上/ ,/ 引入/ 描述/ 连续/ 时间/ 的/ 时钟/ ,/ 提出/ 了/ 时间/ 自动机/ ,/ 并/ 采用/ 时钟/ 等价/ 技术/ 实现/ 模型/ 检验/ 时间/ 自动机/ [/ 2/ ]/ ./ 为了/ 解决/ 含有/ 递归/ 的/ 实时/ 系统/ 建模/ ,/ Abdulla/ 等/ 人/ [/ 3/ ]/ 提出/ 时间/ 下推/ 自动机/ ,/ 并/ 通过/ 时间/ 离散/ 化/ ,/ 将/ 其/ 转换/ 为/ 下推/ 自动机/ 后/ 进行/ 分析/ ,/ 并/ 在/ 文献/ [/ 4/ -/ 5/ ]/ 中/ 加入/ 权值/ ,/ 求解/ 最小/ 时间/ 开销/ 的/ 可达性/ 问题/ ;/ 2013/ 年/ [/ 6/ ]/ 将/ 时间/ 下推/ 自动机/ 的/ 研究/ 对象/ 扩展/ 到/ 无限/ 迁移/ 的/ 实时/ 系统/ 上/ ,/ 同时/ 证明/ 了/ 该/ 情况/ 下/ 的/ 实时/ 系统/ 可达性/ 分析/ 为/ EXPTIME/ 完全/ 问题/ ;/ 2014/ 年/ Cai/ 和/ Ogawa/ [/ 7/ ]/ 给出/ 了/ 一个/ 时间/ 下推/ 自动机/ 的/ 实例/ ;/ Trivedi/ 和/ Wojtczak/ [/ 8/ ]/ 和/ Benerecetti/ 等/ 人/ [/ 9/ ]/ 提出/ 了/ 时间/ 递归/ 状态/ 自动机/ ,/ 通过/ 相互/ 调用/ 来/ 实现/ 递归/ 描述/ ,/ 调用/ 过程/ 中/ ,/ 时钟/ 通过/ 值/ 或者/ 引用/ 的/ 方式/ 传递/ ;/ 2013/ 年/ Li/ 等/ 人/ [/ 10/ ]/ 提出/ 了/ 嵌套/ 时间/ 自动机/ (/ NeTAs/ )/ ,/ 其/ 整体/ 是/ 一个/ 下推/ 自动机/ ,/ 栈/ 的/ 每/ 一层/ 为/ 时间/ 自动机/ ,/ 利用/ 嵌套/ 的/ 思想/ 来/ 解决/ 实时/ 系统/ 中/ 的/ 递归/ 问题/ ./ 上述/ 模型/ 能/ 描述/ 实时/ 系统/ 的/ 并发/ 及/ 递归/ 问题/ ,/ 但是/ 无法/ 描述/ 实时/ 并发/ 系统/ 中线/ 程间/ 交互/ 的/ 情况/ ./ 另外/ ,/ Atig/ 等/ 人/ [/ 11/ -/ 12/ ]/ 给出/ 的/ 序列/ 多/ 栈下推/ 自动机/ (/ OMPA/ )/ ,/ 其/ 在/ 栈/ 上/ 增加/ 了/ 线性/ 序列/ 描述/ 线程/ 间/ 交互/ ,/ 并/ 证明/ 了/ OMPA/ 的/ 可达性/ 为/ 2ETIME/ 完全/ 问题/ ;/ Torre/ 等/ 人/ [/ 13/ -/ 14/ ]/ 给出/ 基于/ 上下文/ 限界/ 的/ 多/ 栈下推/ 系统/ (/ SMPDS/ )/ ,/ 并/ 分析/ 及/ 论证/ 了/ 系统/ 可达性/ 为/ PSPACE/ 完全/ 问题/ ./ 这/ 一类/ 模型/ 能/ 描述/ 并发/ 递归/ 程序/ 的/ 线程/ 间/ 交互/ ,/ 但/ 不能/ 描述/ 实时性/ ./ 时间/ 下推/ 自动机/ 相当于/ 在/ 时间/ 自动机/ 上/ 增加/ 了/ 栈/ ,/ 能够/ 有效/ 地/ 解决/ 时间/ 自动机/ 难于/ 描述/ 递归/ 的/ 情况/ ,/ 其/ 缺点/ 是/ 无法/ 很/ 好/ 的/ 描述/ 线程/ 间/ 的/ 交互/ ./ 为了/ 能/ 对/ 实时/ 并发/ 系统/ 中/ 的/ 递归/ 机制/ 及/ 线程/ 间/ 交互进行/ 建模/ ,/ 本文/ 结合/ 时间/ 下推/ 自动机/ 与/ 多/ 栈下推/ 网络/ 的/ 优点/ ,/ 类似/ 于/ 在/ 时间/ 下推/ 自动机/ 中/ 增加/ 了/ 栈/ 的/ 数目/ ,/ 通过/ 栈/ 之间/ 交互/ 来/ 模拟/ 并发程序/ 运行/ 时/ 线程/ 间/ 操作/ ,/ 提出/ 时间/ 多/ 栈下推/ 网络/ (/ TMPDN/ )/ ,/ 并/ 利用/ 多/ 栈下推/ 系统/ 理论/ 来/ 验证/ 实时/ 并发/ 递归/ 程序/ 中/ 的/ 可达性/ ./ 形式化/ 验证/ 实时/ 系统/ 将/ 可能/ 产生/ 状态/ 空间/ 爆炸/ 问题/ ,/ 从而/ 给/ 验证/ 带来/ 极大/ 困难/ ./ 当前/ 验证/ 实时/ 系统/ 的/ 主要/ 思想/ :/ 将/ 实时/ 系统/ 的/ 连续/ 模型/ 转换/ 为/ 不/ 含/ 时间/ 约束/ 的/ 离散/ 模型/ ./ 离散/ 模型/ 的/ 状态/ 用/ 等价/ 域/ 描述/ ,/ 域/ 等价/ 的/ 基本/ 思想/ 都/ 是/ 把/ 状态/ 位置/ 和/ 时钟/ 区间/ 结合/ ,/ 形成/ 一个/ 新/ 的/ 状态/ ,/ 主要/ 方法/ 是域/ 图/ (/ RegionGraph/ )/ 和/ 带/ 图/ (/ ZoneGraph/ )/ [/ 15/ ]/ ./ 由于/ 带图/ 生成/ 的/ 符号/ 状态图/ 具有/ 不稳定性/ ,/ 产生/ 的/ 符号/ 状态/ 迁移/ 序列/ 存在/ 不确定性/ ,/ 故/ 本文/ 将/ 采用/ 域图/ 方法/ ./ 通过/ 基于/ 时钟/ 关键点/ 的/ 时钟/ 域/ 优化/ 等价/ 技术/ ,/ 将/ TMPDN/ 转换/ 为/ 对/ 并发程序/ 研究/ 较为/ 成熟/ 的/ MPDN/ 模型/ ./ 通常/ 时钟/ 域/ 等价/ 使用/ 实数/ 取整/ 、/ 小数/ 部分/ 大小/ 比较/ 来/ 划分/ 时间/ 域/ ./ 为了/ 获得/ 更少/ 的/ 时钟/ 域/ ,/ 本文/ 采用/ 时钟/ 关键点/ 技术/ ,/ 对/ 时钟/ 域/ 划分/ 进行/ 优化/ ,/ 从而/ 缩减/ 转换/ 后/ 的/ 模型/ 状态/ 空间/ ./ 为了/ 进一步/ 缩减/ 转换/ 后/ 的/ MPDN/ 状态/ 空间/ ,/ 在/ 静态/ 转换/ 的/ 基础/ 上/ ,/ 采用/ on/ -/ the/ -/ fly/ 技术/ ,/ 给出/ 了/ 仅/ 关心/ 栈顶/ 及其/ 下/ 一层/ 的/ 动态/ 转换方法/ ,/ 状态/ 空间/ 仅于/ 栈顶/ 及其/ 下/ 一层/ 的/ 项集/ 相关/ ,/ 而/ 与/ 整个/ 项集/ 无关/ ,/ 从而/ 大幅度/ 缩减/ 转换/ 后/ 的/ 状态/ 空间/ ./ 本文/ 第/ 2/ 节/ 介绍/ 相关/ 基础知识/ ;/ 第/ 3/ 节/ 提出/ TMPDN/ 模型/ ;/ 第/ 4/ 节/ 从/ 静态/ 和/ 动态/ 两个/ 角度/ 分析/ TMPDN/ 转换/ 为/ MPDN/ 的/ 转换/ 过程/ ;/ 第/ 5/ 节/ 证明/ TMPDN/ 与/ 转换/ 后/ 的/ MPDN/ 可达性/ 等价/ ;/ 第/ 6/ 节/ 给出/ TMPDN/ 转换/ 为/ MPDN/ 的/ 具体/ 算法/ ;/ 第/ 7/ 节为/ TMPDN/ 的/ 上下文/ 限界/ 验证/ ;/ 第/ 8/ 节/ 给出/ 一个/ 具体/ 实例/ 分析/ ;/ 第/ 9/ 节为/ 全文/ 总结/ ./ Page32/ 基础知识/ MPDN/ 模型/ 是/ 一种/ 描述/ 并发/ 递归/ 程序/ 的/ 下推/ 系统/ ,/ 利用/ 栈/ 之间/ 的/ 操作/ 来/ 模拟程序/ 中线/ 程间/ 的/ 交互/ ./ MPDN/ 是/ 一个/ 五元/ 组/ M/ =/ (/ n/ ,/ Q/ ,/ q0/ ,/ Γ/ ,/ Δ/ )/ ,/ 其中/ n/ ∈/ 瓔/ 表示/ 系统/ 栈/ 的/ 数量/ ,/ Q/ 表示/ 有限/ 状态/ 集/ ,/ q0/ ∈/ Q/ 表示/ 初始状态/ ,/ Γ/ 表示/ 有限/ 栈内/ 字符集/ ,/ Δ/ =/ Δ/ int/ Δ/ pushi/ ∪/ Δ/ popi/ / (/ Q/ ×/ Q/ )/ 描述/ 第/ i/ 个栈/ 的/ 内部/ 转换/ ,/ Δ/ pushn/ ,/ Δ/ inti/ / (/ Q/ ×/ Γ/ ×/ Q/ )/ 表示/ 第/ i/ 个栈/ 的/ 压栈/ 和/ 出栈/ ./ 为/ Δ/ pop/ 了/ 描述/ 方便/ ,/ 文中/ 用/ [/ n/ ]/ 表示/ 1/ 到/ n/ 的/ 集合/ ./ MPDN/ 格局/ C/ =/ 〈/ Work/ [/ n/ ]/ ,/ q/ ,/ {/ ω/ i/ }/ i/ ∈/ [/ n/ ]/ 〉/ ,/ 其中/ Work/ [/ n/ ]/ / [/ n/ ]/ 为/ [/ n/ ]/ 的/ 子集/ ,/ 表示/ 当前/ 工作栈/ 集/ ,/ q/ ∈/ Q/ 表示/ 状态/ ,/ ω/ i/ ∈/ (/ Γ/ )/ / 表示/ 第/ i/ 个栈/ 的/ 栈/ 内/ 字符集/ ,/ C0/ =/ 〈/ Work/ [/ n/ ]/ ,/ q0/ ,/ {/ ω/ i/ }/ i/ ∈/ [/ n/ ]/ 〉/ 表示/ MPDN/ 的/ 初始/ 格局/ ./ 第/ i/ 个栈/ 的/ 格局/ 转换/ 描述/ 〈/ Work/ [/ n/ ]/ ,/ q/ ,/ {/ ω/ i/ }/ i/ ∈/ [/ n/ ]/ 〉/ →/ / / 作/ δ/ 包括/ 空/ 操作/ nop/ 、/ 压栈/ 操作/ push/ (/ γ/ )/ 和/ 出栈/ 操作/ pop/ (/ γ/ )/ ,/ 格局/ 转换/ 成立/ 当且/ 仅/ 当/ 满足/ 以下/ 条件/ :/ (/ 1/ )/ Δ/ =/ Δ/ int/ [/ n/ ]/ ,/ 表示/ 内部/ 转换/ ,/ 描述/ 状态/ 迁移/ 而栈/ 内/ 字符/ 未/ 发生/ 改变/ ./ (/ 2/ )/ Δ/ =/ Δ/ push/ ω/ i/ =/ γ/ ./ ω/ i/ ,/ ω/ j/ =/ ω/ j/ ,/ j/ ∈/ [/ n/ \/ i/ ]/ ,/ 表示/ 当前/ 栈/ i/ 压栈/ 时/ ,/ 其栈/ 内/ 字符/ 新增/ 栈符/ γ/ ,/ 其他/ 栈/ 的/ 栈/ 内/ 字符/ 未/ 变化/ ./ (/ 3/ )/ Δ/ =/ Δ/ pop/ γ/ ./ ω/ i/ ,/ ω/ j/ =/ ω/ j/ ,/ j/ ∈/ [/ n/ \/ i/ ]/ ,/ 表示/ 当前/ 栈/ i/ 出栈/ 时/ ,/ 其栈/ 内/ 字符/ 删除/ 了/ 栈符/ γ/ ,/ 其他/ 栈/ 的/ 栈/ 内/ 字符/ 未/ 变化/ ./ 一个/ 上下文/ 定义/ 为/ 在/ 单一/ 线程/ 中/ 的/ 计算/ 或/ 变迁/ 序列/ ./ 栈/ i/ 的/ 一个/ 上下文/ 可/ 表示/ 成/ ∏/ =/ C0t1C1t2/ …/ tmCm/ ,/ 其中/ t1/ …/ tm/ ∈/ Δ/ i/ ./ 计算/ 从/ 一个/ 线程/ 切换/ 至/ 另/ 一个/ 线程/ ,/ 定义/ 为/ 上下文/ 切换/ ./ 用/ ∏/ i/ 和/ ∏/ j/ 分别/ 表示/ 栈/ i/ ,/ j/ 上/ 的/ 上下文/ ,/ 两者/ 发生/ 上下文/ 切换/ 用/ ∏/ i/ ·/ ∏/ j/ 表示/ ./ 当/ 上下文/ 切换/ 限制/ 为/ k/ 时/ ,/ 称之为/ 上下文/ k/ 限界/ ./ 3/ 时间/ 多/ 栈下推/ 网络/ (/ TMPDN/ )/ 为了/ 描述/ 实时/ 系统/ 中/ 并发/ 递归/ 机制/ 以及/ 线程/ 之间/ 的/ 交互/ ,/ 在/ MPDN/ 的/ 基础/ 上/ 引入/ 了/ 时钟/ ,/ 提出/ 了/ TMPDN/ 模型/ ./ 时钟/ 是/ 在/ 正/ 实数/ 范围/ 内/ 取值/ 的/ 变量/ ./ 定义/ 1/ ./ 给/ 定时钟/ 集/ T/ 以及/ 时钟/ t1/ ,/ t2/ ∈/ T/ ,/ 则/ 在/ T/ 上/ 的/ 时钟/ 约束/ 定义/ 为/ σ/ ·/ σ/ ∧/ σ/ ,/ 其中/ c/ ∈/ 瓗/ ,/ / ∈/ {/ </ ,/ / }/ ./ 时钟/ 解释/ v/ :/ T/ →/ 瓗/ +/ ,/ 表示/ 时钟/ t/ ∈/ T/ 在/ 当前/ 的/ 取值/ ./ 假设/ 实数/ c/ ∈/ 瓗/ ,/ v/ (/ t/ )/ +/ c/ 表示/ 解释/ 后/ 的/ 时钟/ 值加/ c/ ,/ 在/ 没有/ 歧义/ 的/ 情况/ 下/ ,/ 用/ v/ +/ c/ 表示/ ./ 定义/ 2/ ./ TMPDN/ 是/ 一个/ 六元/ 组/ MT/ =/ (/ n/ ,/ Q/ ,/ q0/ ,/ Γ/ ,/ T/ ,/ Δ/ )/ ,/ 其中/ n/ 表示/ 系统/ 中栈/ 的/ 个数/ ;/ Q/ 表示/ 有限/ 状态/ 集/ ;/ q0/ 表示/ 初始状态/ ;/ Γ/ 表示/ 有限/ 栈/ 符集/ ;/ T/ =/ TG/ ∪/ TL/ 表示/ 有限/ 时钟/ 集/ ,/ 其中/ TG/ 表示/ 全局/ 时钟/ ,/ 用于/ 标识/ 实时/ 并发/ 系统/ 中/ 全局变量/ 或/ 事务/ 的/ 时间/ ,/ TL/ 表示/ 栈内/ 局部/ 时钟/ ,/ 用于/ 标识/ 系统/ 中/ 局部变量/ 或子/ 事务/ 的/ 时间/ ;/ 迁移/ 关系/ Δ/ / 2/ [/ n/ ]/ ×/ Q/ ×/ TG/ ×/ (/ Γ/ ×/ TL/ )/ / ×/ 2/ [/ n/ ]/ ×/ Q/ ×/ TG/ ×/ (/ Γ/ ×/ TL/ )/ / 为/ 描述/ 系统/ 格局/ 的/ 迁移/ ./ TMPDN/ 的/ 格局/ C/ =/ 〈/ Work/ [/ n/ ]/ ,/ q/ ,/ {/ wi/ }/ i/ ∈/ [/ n/ ]/ ,/ v/ 〉/ ,/ 其中/ q/ ∈/ Q/ ,/ Work/ [/ n/ ]/ / [/ n/ ]/ 为/ [/ n/ ]/ 子集/ ,/ 表示/ 当前/ 工作栈/ 集/ ,/ wi/ 为栈/ i/ 的/ 字/ ,/ 表示/ 栈/ i/ 的/ 内容/ ,/ 描述/ 为/ wi/ ∈/ (/ Γ/ ×/ 瓗/ +/ )/ / ,/ v/ 表示/ 时钟/ 当前/ 取值/ ./ TMPDN/ 作为/ 实时/ 并发程序/ 的/ 模型/ ,/ 能/ 描述/ 多个/ 栈/ 同时/ 产生/ 迁移/ ,/ 迁移/ 关系/ Δ/ 分为/ 栈内/ 迁移/ Δ/ in/ 、/ 栈间/ 切换/ Δ/ inter/ 和/ 并发/ 执行/ Δ/ ‖/ ./ 为了/ 表述/ 方便/ ,/ 首先/ 讨论/ 一个/ 栈/ i/ 内/ 迁移/ 的/ 执行/ ,/ 用/ 形式/ 〈/ {/ i/ }/ ,/ q/ ,/ {/ wi/ }/ i/ ∈/ [/ n/ ]/ ,/ v/ 〉/ opin/ 为栈/ 内/ 迁移/ 的/ 动作/ 集/ ,/ 包括/ 空/ 操作/ nop/ 、/ 时间/ 约束/ 判断/ t/ ∈/ I/ ?/ 、/ 时钟/ 重置/ t/ ←/ I/ 、/ 时间/ 流逝/ Time/ ←/ c/ 、/ 压栈/ 操作/ push/ (/ a/ ,/ I/ )/ 和/ 出栈/ 操作/ pop/ (/ a/ ,/ I/ )/ ,/ 其中/ I/ 表示/ 时钟/ 取值/ 范围/ ,/ t/ ∈/ T/ ,/ 故栈/ 内/ 迁移/ 关系/ Δ/ in/ 可/ 表示/ 为/ Δ/ nop/ ∪/ Δ/ ?/ ,/ Δ/ =/ ,/ Δ/ ├/ ,/ Δ/ push/ ,/ Δ/ pop/ 分别/ 表示/ 上述/ 操作/ 的/ 迁移/ ./ 下/ Δ/ 文/ 根据/ 不同/ 的/ 栈/ 内/ 迁移/ 动作/ opin/ 给出/ 其/ 执行/ 含义/ ./ (/ 1/ )/ Δ/ in/ =/ Δ/ nop/ :/ opin/ =/ nop/ ,/ wi/ =/ wi/ ,/ v/ =/ v/ ,/ 表示/ 格局/ 内/ 元素/ 未/ 发生变化/ ./ (/ 2/ )/ Δ/ in/ =/ Δ/ I/ ,/ 表示/ 当/ t/ 的/ 时钟/ 值/ 在/ I/ 范围/ 内时/ ,/ 执行/ 该/ 操作/ ,/ 格局/ 内/ 元素/ 未/ 发生变化/ ./ (/ 3/ )/ Δ/ in/ =/ Δ/ =/ :/ opin/ =/ t/ ←/ I/ ,/ wi/ =/ wi/ ,/ v/ =/ v/ [/ t/ ←/ c/ ]/ ,/ c/ ∈/ I/ ,/ 表示/ 给/ 时钟/ t/ 指定/ I/ 范围/ 内/ 的/ 任意/ 值/ c/ ,/ 其他/ 格局/ 内/ 元素/ 未/ 发生变化/ ./ (/ 4/ )/ Δ/ in/ =/ Δ/ ├/ :/ opin/ =/ Time/ ←/ c/ ,/ wi/ =/ w/ +/ cwi/ =/ 〈/ a1/ ,/ v1/ 〉/ 〈/ a2/ ,/ v2/ 〉/ …/ 〈/ an/ ,/ vn/ 〉/ ,/ 那么/ w/ +/ cv1/ +/ c/ 〉/ 〈/ a2/ ,/ v2/ +/ c/ 〉/ …/ 〈/ an/ ,/ vn/ +/ c/ 〉/ ,/ v/ =/ v/ +/ c/ ,/ 表示/ 格局/ 内/ 所有/ 时钟/ 增加/ c/ ,/ 格局/ 内非/ 时钟/ 内容/ 未/ 发生变化/ ./ (/ 5/ )/ Δ/ in/ =/ Δ/ push/ :/ opin/ =/ push/ (/ a/ ,/ I/ )/ ,/ wi/ =/ w/ ·/ Page4c/ ∈/ I/ ,/ v/ =/ v/ ,/ 表示/ 将/ 变量/ a/ 压入/ 栈顶/ ,/ 并/ 设定/ 相应/ 时钟/ 为/ c/ ,/ 其/ 时钟/ 值为/ I/ 范围/ 内/ 的/ 任意/ 值/ ./ (/ 6/ )/ Δ/ in/ =/ Δ/ pop/ :/ opin/ =/ pop/ (/ a/ ,/ I/ )/ ,/ wi/ =/ w/ ·/ c/ ∈/ I/ ,/ v/ =/ v/ ./ 表示/ 将/ 栈/ 顶/ 内/ 时钟/ 值为/ I/ 范围/ 的/ 变量/ a/ 弹出/ ./ 其次/ 描述/ 栈间/ 切换/ Δ/ inter/ ./ 假设/ 栈间/ 切换/ 操作/ opinter/ =/ i/ / j/ 表示/ 栈/ i/ 切换/ 到/ 栈/ j/ ,/ 表示/ 形式/ 为/ 〈/ {/ i/ }/ ,/ q/ ,/ {/ wi/ }/ i/ ∈/ [/ n/ ]/ ,/ v/ 〉/ q/ ,/ q/ ∈/ Q/ ;/ v/ =/ v/ ;/ wi/ ,/ wj/ 分别/ 表示/ 栈/ i/ ,/ j/ 的/ 字/ ,/ i/ ,/ j/ ∈/ [/ n/ ]/ 且/ i/ ≠/ j/ ./ 上下文/ 切换/ 时/ ,/ 将/ 栈/ j/ 从/ 等待/ 栈/ 切换/ 到/ 工作栈/ ,/ 同时/ 将/ 栈/ i/ 从/ 工作栈/ 切换/ 到/ 等待/ 栈/ ,/ 则/ 切换/ 后/ 的/ 工作栈/ Work/ [/ n/ ]/ =/ Work/ [/ n/ ]/ \/ {/ i/ }/ ∪/ {/ j/ }/ ./ 最后/ 描述/ 并发/ 操作/ Δ/ ‖/ ./ 假设/ op/ =/ opin/ ∪/ opinter/ 为栈/ 迁移/ 动作/ 集/ ,/ 并发/ 执行/ 用/ 形式/ 〈/ Work/ [/ n/ ]/ ,/ q/ ,/ 图/ 1TMPDN/ 中栈/ 内/ 操作/ 下/ 的/ 格局/ 迁移/ (/ 1/ )/ 并发/ 操作/ ./ 从/ 格局/ C0/ 到/ 格局/ C1/ ,/ 将/ ci/ 压入/ 栈/ i/ ,/ 且/ 时钟/ 赋值/ 为/ 2.7/ ∈/ [/ 26/ )/ ,/ 同时/ 将/ cj/ 压入/ 栈/ j/ ,/ 且/ 时钟/ 赋值/ 为/ 2.7/ ∈/ [/ 26/ )/ ./ (/ 2/ )/ 时钟/ 重置/ ./ 从/ 格局/ C1/ 到/ 格局/ C2/ ,/ 时钟/ t1/ 的/ 时钟/ 值/ 重置/ 为/ 7.5/ ∈/ [/ 610/ )/ ./ (/ 3/ )/ 时间/ 流逝/ ./ 从/ 格局/ C2/ 到/ 格局/ C3/ ,/ 栈内/ 所有/ 全局/ 时钟/ 、/ 全局变量/ 相关联/ 的/ 时钟/ 、/ 局部变量/ 相关联/ 的/ 时钟/ ,/ 其/ 时钟/ 值/ 都/ 增加/ 3.8/ 个/ 时间/ 单位/ ./ (/ 4/ )/ 出栈/ 操作/ ./ 从/ 格局/ C3/ 到/ 格局/ C4/ ,/ 在/ 出栈/ 操作前/ ,/ 检查/ cj/ 值/ 是否/ 属于/ 区间/ [/ 610/ )/ ,/ 由于/ cj/ =/ 6.5/ 满足条件/ ,/ 则/ 执行/ 出栈/ 操作/ ./ 4TMPDN/ 的/ 模型/ 转换/ 分析/ 因/ TMPDN/ 的/ 时钟/ 取值/ 为/ 正/ 实数/ 域/ ,/ 故/ 在/ 求解/ 可/ 达/ 状态/ 格局/ 时/ ,/ 可能/ 会/ 出现/ 状态/ 空间/ 爆炸/ 问题/ ,/ 从而/ 使/ 可达性/ 分析/ 变得/ 异常/ 困难/ ./ 为了/ 分析/ TMPDN/ {/ wi/ }/ i/ ∈/ [/ n/ ]/ ,/ v/ 〉/ {/ wi/ }/ i/ ∈/ [/ n/ ]/ ,/ v/ 〉/ 表示/ ,/ Work/ [/ n/ ]/ 为/ 当前/ 工作栈/ 集/ ,/ 如果/ 不/ 发生/ 栈间/ 切换/ ,/ 则/ Work/ [/ n/ ]/ =/ Work/ [/ n/ ]/ ,/ 如果/ 发生/ 栈间/ 切换/ i/ / j/ ,/ 则/ Work/ [/ n/ ]/ =/ Work/ [/ n/ ]/ \/ {/ i/ }/ ∪/ {/ j/ }/ ./ 其他/ 类似/ 一个/ 栈/ 的/ 情况/ ./ 为了/ 进一步/ 理解/ 栈/ 的/ 迁移/ 关系/ ,/ 通过/ 实例/ 描述/ 入栈/ 、/ 出栈/ 、/ 时间/ 重置/ 、/ 时间/ 流逝/ 和/ 并发/ 的/ 动作/ ,/ 如图/ 1/ 所示/ ./ 假定/ 有/ n/ 个栈/ ,/ 全局/ 时钟/ t1/ ,/ 全局变量/ g/ ,/ 其/ 相关联/ 时钟/ 为/ tg/ ,/ {/ a1/ ,/ b1/ ,/ ai/ ,/ bi/ ,/ ci/ ,/ aj/ ,/ bj/ ,/ cj/ }/ / Γ/ ,/ 其中/ i/ ,/ j/ ∈/ [/ n/ ]/ ,/ 时钟/ 区间/ 分别/ 表示/ 为/ [/ vi/ :/ vj/ ]/ ,/ [/ vi/ :/ vj/ )/ ,/ [/ vi/ :/ )/ ,/ 其中/ [/ vi/ :/ vj/ ]/ 表示/ vi/ 到/ vj/ 区间/ 内/ (/ 包含/ vj/ )/ 的/ 所有/ 时钟/ 值/ ,/ [/ vi/ :/ vj/ )/ 表示/ vi/ 到/ vj/ 区间/ 内/ (/ 不/ 包含/ vj/ )/ 的/ 所有/ 时钟/ 值/ ,/ [/ vi/ :/ )/ 表示/ vi/ 到/ 无限大/ 的/ 所有/ 时钟/ 值/ ./ 的/ 可达性/ ,/ 本文/ 利用/ 时钟/ 等价/ 技术/ 将/ 无限/ 状态/ 格局/ 抽象/ 转换/ 为/ 有限/ 状态/ 格局/ ,/ 也就是说/ 将/ TMPDNMT/ =/ (/ n/ ,/ Q/ ,/ q0/ ,/ Γ/ ,/ T/ ,/ Δ/ )/ 转换/ 为/ MPDNMM/ =/ (/ nM/ ,/ QM/ ,/ qM4/ ./ 1/ 域/ 0/ ,/ Γ/ M/ ,/ Δ/ M/ )/ ./ 把/ TMPDN/ 转换/ 为/ MPDN/ ,/ 最/ 主要/ 的/ 问题/ 是/ 把/ TMPDN/ 中/ 的/ 栈符/ 以及/ 描述/ 栈符/ 的/ 时钟/ 抽象/ 为/ MPDN/ 的/ 栈/ 符集/ ./ 为了/ 描述/ 转换/ 后/ 的/ 栈/ 符集/ ,/ 需/ 把/ TMPDN/ 的/ 时钟/ 和/ 栈符/ 转换/ 为域/ ,/ 转换/ 后/ 的/ 域/ 用/ 符号/ R/ 表示/ ./ 域/ R/ 是/ 由/ 时钟/ 关键点/ 和/ 项集/ 组成/ ,/ 首先/ 定义/ 时钟/ 关键点/ 及时/ 钟/ 等价/ ,/ 然后/ 定义/ 项集/ ./ 为了/ 把/ 描述/ 连续/ 时间/ 的/ TMPDN/ 转换/ 为/ 离散/ 的/ MPDN/ ,/ 采用/ 离散/ 的/ 时钟/ 区间/ 描述/ 连续/ 时间/ ./ Alur/ 和/ Dill/ [/ 1/ ]/ 在/ 1994/ 年/ 提出/ 时钟/ 等价/ 技术/ ,/ 采用/ 连续/ 正整数/ 作为/ 时钟/ 区间/ 划分/ ./ 因/ 实时/ 系统/ 动作/ 迁移/ 及/ 事件/ 通常/ 在/ 关键/ 的/ 时间/ 点/ 触发/ ,/ 时钟/ 关键点/ 是非/ 连续/ 正整数/ ,/ 与/ 原/ 时钟/ 等价/ 技术/ 相比/ ,/ 甚至/ 减少/ 一/ 、/ Page5/ 两个/ 数量级/ ,/ 并/ 在/ 多个/ 时钟/ 的/ 情况/ 下/ ,/ 划分/ 的/ 等价/ 区域/ 将/ 减少/ 几个/ 数量级/ ./ 基于/ 此/ ,/ 本文/ 给出/ 了/ 优化/ 的/ 时钟/ 等价/ 技术/ ,/ 依据/ 时钟/ 关键点/ 作为/ 时钟/ 区间/ 划分/ 的/ 界限/ ,/ 减少/ 时钟/ 区间/ 划分/ 区域/ ,/ 从而/ 达到/ 缩减/ 等价/ 后/ 的/ 状态/ 空间/ ./ 时钟/ 关键点/ 为/ 系统/ 动作/ 迁移/ 及其/ 他/ 事件/ 的/ 时间/ 触发/ 点/ ,/ 用/ ki/ 表示/ MT/ 时钟/ 上/ 的/ 关键点/ ,/ kmax/ 表示/ 时钟/ 关键点/ 上限/ 阈值/ ,/ k/ >/ kmax/ 表示/ 所有/ 大于/ kmax/ 的/ 值/ ,/ 时钟/ 关键点/ 集合/ 可/ 描述/ 为/ key/ =/ {/ 0/ ,/ k1/ ,/ …/ ,/ ki/ ,/ …/ ,/ kmax/ ,/ k/ }/ ./ 为了/ 描述/ 时钟/ 等价/ ,/ 实数/ 时钟/ 值/ t/ =/ t/ +/ re/ (/ t/ )/ 分成/ 两个/ 部分/ ,/ 关键点/ 部分/ t/ :/ 实数/ 时钟/ 值/ 向下/ 取/ 最近/ 关键点/ 的/ 值/ ;/ 剩余/ 部分/ re/ (/ t/ )/ :/ re/ (/ t/ )/ =/ t/ -/ t/ ./ 给/ 定时钟/ 集/ T/ ,/ 假设/ 有/ 任意/ 两个/ 时钟/ ti/ ,/ tj/ ∈/ T/ ,/ 并且/ 存在/ 关键点/ key/ =/ {/ 0/ ,/ k1/ ,/ …/ ,/ ki/ ,/ …/ ,/ kmax/ ,/ k/ }/ ./ 当/ 满足/ 如下/ 规则/ 的/ 时钟/ 值/ ,/ 为/ 等价/ 时钟/ :/ (/ 1/ )/ v/ (/ ti/ )/ >/ kmax/ 当且/ 仅/ 当/ ti/ =/ k/ ,/ 即/ ti/ 的/ 时钟/ 值/ 大于/ 关键点/ 上限/ 阈值/ 时/ ,/ ti/ 取/ 无穷大/ k/ ./ (/ 2/ )/ ki/ / v/ (/ ti/ )/ </ ki/ +/ 1/ 当且/ 仅/ 当/ ti/ =/ ki/ ,/ 即/ ti/ 的/ 时钟/ 值/ 小于/ 关键点/ ki/ +/ 1/ 且/ 大于/ 等于/ ki/ 时/ ,/ ti/ 取/ 关键点/ ki/ ./ (/ 3/ )/ 假定/ ti/ =/ ki/ ,/ tj/ =/ kj/ ,/ v/ (/ ti/ )/ -/ ki/ </ v/ (/ tj/ )/ -/ kj/ 当且/ 仅/ 当/ re/ (/ ti/ )/ </ re/ (/ tj/ )/ ,/ 即/ ti/ 取/ 关键点/ ki/ ,/ tj/ 取/ 关键点/ kj/ ,/ 当/ ti/ 的/ 时钟/ 值/ 与/ 关键点/ ki/ 的/ 差值/ 小于/ tj/ 的/ 时钟/ 值/ 与/ 关键点/ kj/ 的/ 差值/ 时/ ,/ 记为/ re/ (/ ti/ )/ </ re/ (/ tj/ )/ ./ 假设/ 时钟/ 集/ T/ ,/ 有/ 任意/ 两个/ 时钟/ ti/ ,/ tj/ ∈/ T/ 和/ key/ =/ {/ 0/ ,/ k1/ ,/ k2/ ,/ …/ ,/ k/ }/ ,/ 在/ (/ 0/ </ ti/ </ k1/ ,/ k1/ </ tj/ </ k2/ )/ 区域/ 内/ ,/ 基于/ 时钟/ 关键点/ 的/ 时钟/ 域/ 等价/ 规则/ ,/ 在/ ti/ =/ 0/ ,/ tj/ =/ k1/ ,/ 且/ re/ (/ ti/ )/ </ re/ (/ tj/ )/ 这/ 区间/ 内/ 的/ 时钟/ 值为/ 等价/ 时钟/ ,/ 如图/ 2/ 所示/ 的/ 阴影/ 部分/ ./ 下面/ 描述/ 域/ R/ 的/ 另/ 一部分/ —/ —/ —/ 项集/ ./ 普通/ 项集/ Y/ 包含/ :/ (/ 1/ )/ 时钟/ T/ ,/ T/ 用来/ 描述/ MT/ 的/ 全局/ 时钟/ ;/ (/ 2/ )/ 栈/ 字符/ Γ/ ,/ Γ/ 用来/ 描述/ MT/ 的/ 栈顶/ 字符/ ;/ (/ 3/ )/ 基础/ 时钟/ 字符/ ├/ ,/ 用来/ 描述/ 栈/ 的/ 基础/ 时钟/ ,/ 是/ 栈/ 内域/ 中/ 其他/ 项/ 的/ 时间/ 参照/ 点/ ,/ 初始值/ 为/ 0/ ;/ 故/ 普通/ 项集/ Y/ 描述/ 为/ Y/ =/ T/ ∪/ Γ/ ∪/ {/ ├/ }/ ./ 标识/ 项集/ Y/ ·/ 表示/ 普通/ 项/ Y/ 的/ 时/ |/ a/ ∈/ Γ/ }/ ,/ ├/ 间/ 流逝/ ,/ 在/ 普通/ 项上/ 添加/ 上标/ 阴影/ ·/ 的/ 方式/ 表示/ ,/ 描述/ 为/ Y/ ·/ =/ T/ ·/ {/ a/ ·/ 要/ 用于/ 动态/ 转换/ ,/ 当/ 时间/ 流逝/ 时/ ,/ 非栈/ 顶域/ 中/ 的/ 时钟/ 无法/ 随/ 时间/ 流逝/ 进行/ 更新/ ,/ 故/ 在/ 栈/ 顶域/ 中/ 增加/ ├/ 记录时间/ 的/ 流逝/ ,/ 当栈/ 顶域/ 进行/ 出栈/ 操作/ 时/ ,/ 对栈/ 顶/ 下/ 一层/ 域/ 中/ 的/ 时钟/ 进行/ 同步/ 更新/ ./ TMPDN/ 模型/ 转换/ 为/ MPDN/ 可/ 采用/ 两种/ 方法/ :/ 静态/ 转换/ 和/ 动态/ 转换/ ./ 使用/ 静态/ 转换/ 时/ ,/ 项集/ Z/ 为/ 普通/ 项集/ Y/ ,/ 即/ Z/ ·/ 为/ 普通/ 项集/ Y/ 和/ 标识/ 项集/ Y/ ·/ 的/ 并/ 集/ ,/ 即/ Z/ ·/ Y/ ·/ ./ 假定/ 栈/ i/ ,/ 栈/ 深度/ 为/ d/ ,/ 域/ Ri/ =/ Ri1/ …/ Rij/ …/ Rid/ ∈/ (/ 2Z/ ×/ key/ )/ +/ ,/ 其中/ i/ ∈/ [/ n/ ]/ ,/ j/ ∈/ [/ d/ ]/ ,/ Rij/ =/ 〈/ zj/ ,/ kj/ 〉/ ,/ zj/ ∈/ Z/ ,/ kj/ ∈/ key/ ,/ 从而/ 可得域/ R/ =/ {/ Ri/ }/ i/ ∈/ [/ n/ ]/ ./ 域/ Ri/ 存在/ ,/ 当且/ 仅/ 当域/ Ri/ 中/ 包含/ 以下/ 3/ 类/ :/ (/ 1/ )/ {/ |/ 〈/ Γ/ ,/ key/ 〉/ ∩/ Ri/ |/ =/ 1/ }/ ∧/ {/ |/ 〈/ Γ/ 1/ }/ ,/ 表示/ 域/ Ri/ 与/ 普通/ 栈符/ 和/ 标识/ 栈符/ 的/ 交集/ 非空/ ,/ 换/ 而言/ 之/ ,/ 域/ Ri/ 中/ 一定/ 存在/ 普通/ 栈符/ 和/ 标识/ 栈符/ ;/ (/ 2/ )/ {/ |/ 〈/ ├/ ,/ key/ 〉/ ∩/ Ri/ |/ =/ 1/ }/ ∧/ {/ |/ 〈/ ├/ 1/ }/ ,/ 表示/ 域/ Ri/ 与/ ├/ 和/ ├/ Ri/ 中/ 一定/ 存在/ ├/ 和/ ├/ (/ 3/ )/ {/ |/ 〈/ T/ ,/ key/ 〉/ ∩/ Ri/ |/ =/ 1/ }/ ∧/ {/ |/ 〈/ T/ ·/ ,/ key/ 〉/ ∩/ Ri/ |/ =/ 1/ }/ ,/ 表示/ 域/ Ri/ 与/ 时钟/ 字符/ 和/ 时钟/ 标识符/ 的/ 交集/ 非空/ ,/ 换/ 而言/ 之/ ,/ 域/ Ri/ 中/ 一定/ 存在/ 时钟/ 字符/ 和/ 时钟/ 标识符/ ./ 4.2/ TMPDN/ 转换/ 为/ MPDN/ 为了/ 描述/ TMPDN/ 模型/ 转换/ 为/ MPDN/ ,/ 通过/ 上/ 节/ 给出/ 的/ 时钟/ 等价/ 优化/ 技术/ ,/ 把/ MT/ 栈/ 符及/ 记录/ 栈符/ 的/ 时钟/ 等价/ 为域/ ,/ 表示/ MM/ 的/ 栈符/ ./ TMPDN/ 与/ MPDN/ 的/ 转换/ 分为/ 静态/ 转换/ 和/ 动态/ 转换/ 两种/ ,/ 其中/ 静态/ 转换/ 是/ 把/ TMPDN/ 模型/ 整体/ 抽象/ 转换/ 为/ MPDN/ 模型/ ,/ 获得/ 所有/ 可达/ 的/ 域/ 状态/ 格局/ ,/ 在/ 每个/ 抽象/ 状态/ 格局/ 中/ ,/ 栈/ 的/ 每/ 一层/ 都/ 需/ 抽象/ 域/ 描述/ ,/ 故/ 构造/ 过程/ ,/ 其/ 状态/ 空间/ 及/ 时间/ 耗费/ 都/ 较为/ 庞大/ ;/ 而/ 动态/ 转换/ 采用/ on/ -/ the/ -/ fly/ 技术/ ,/ 无需/ 整体/ 计算/ 抽象/ MPDN/ 模型/ ,/ 而是/ 依据/ TMPDN/ 模型/ 的/ 状态/ 迁移/ 过程/ ,/ 动态/ 计算/ 与其/ 等价/ 的/ MPDN/ 域/ 状态/ ,/ 并且/ 只/ 关注/ 栈/ 顶层/ 及其/ 下/ 一层/ ,/ 不/ 关心/ 整个/ 栈/ 内容/ ,/ 因此/ 降低/ 了/ 转换/ 状态/ 空间/ 规模/ 及/ 时间/ 耗费/ ./ 由于/ 动态/ 转换/ 仅/ 对/ 栈/ 顶域/ 操作/ ,/ 故需/ 增加/ 基础/ 时钟/ 字符/ 和/ 标识/ 项/ ,/ 在/ 非栈/ 顶域/ 成为/ 栈顶域/ 时/ 对/ 时钟/ 值/ 正确/ 更新/ ,/ 跟/ 静态/ 转换/ 相比/ ,/ 增加/ 了/ 额外/ 更新/ 操作/ ./ MM/ 的/ 栈间/ 切换/ Δ/ inter/ 与/ MT/ 类似/ ./ MT/ 的/ 并发/ 操作/ Δ/ ‖/ 转换/ 时/ ,/ 工作栈/ 集/ Work/ [/ n/ ]/ 内/ 的/ 每个/ 栈/ ,/ 调用/ 栈内/ 迁移/ 转换/ ./ Page64/ ./ 2.1/ 静态/ 转换/ 假定/ 模型/ TMPDNMT/ =/ (/ [/ n/ ]/ ,/ Q/ ,/ q0/ ,/ Γ/ ,/ T/ ,/ Δ/ )/ ,/ 通过/ 静态/ 转换/ 获得/ 的/ 模型/ MPDNMM/ =/ (/ [/ n/ ]/ M/ ,/ QM/ ,/ 0/ ,/ Γ/ M/ ,/ Δ/ M/ )/ ,/ 具体/ 转换/ 如下/ :/ qM/ (/ 1/ )/ 栈/ 个数/ [/ n/ ]/ M/ 的/ 转换/ ./ [/ n/ ]/ M/ =/ [/ n/ ]/ ,/ 即/ MM/ 的/ 栈/ 数量/ 与/ MT/ 的/ 栈/ 数量/ 相等/ ./ (/ 2/ )/ 状态/ QM/ 的/ 转换/ ./ QM/ =/ Q/ ,/ 即/ MT/ 的/ 状态/ 集/ 与/ MM/ 的/ 状态/ 集/ 相同/ ./ (/ 3/ )/ 初始状态/ qM/ 状态/ 与/ MT/ 的/ 初始状态/ 相同/ ./ (/ 4/ )/ 栈/ 字符/ Γ/ M/ 的/ 转换/ ./ Γ/ M/ =/ 2Z/ ×/ key/ ,/ 其中/ Z/ 为/ 普通/ 项集/ Y/ ,/ 即/ Z/ ·/ (/ 5/ )/ 迁移/ 关系/ Δ/ 到/ Δ/ M/ 的/ 转换规则/ ./ 图/ 3MT/ 的/ 格局/ 静态/ 转换/ 为/ MM/ 的/ 格局/ (/ 1/ )/ Δ/ =/ Δ/ nop/ 时/ ,/ op/ =/ nop/ ,/ 如果/ 〈/ {/ i/ }/ ,/ q/ ,/ {/ wi/ }/ i/ ∈/ [/ n/ ]/ ,/ p/ 〈/ {/ i/ }/ ,/ q/ ,/ {/ wi/ }/ i/ ∈/ [/ n/ ]/ ,/ v/ 〉/ ∈/ Δ/ ,/ 那么/ 在/ MM/ 中有/ no/ →/ / / v/ 〉/ 〈/ {/ i/ }/ ,/ q/ ,/ {/ Ri/ }/ i/ ∈/ [/ n/ ]/ 〉/ 对应/ ,/ 即/ 两者/ nop/ 操作/ 相同/ ./ (/ 2/ )/ Δ/ =/ Δ/ Δ/ M/ ?/ 与/ Δ/ {/ Ri/ }/ i/ ∈/ [/ n/ ]/ 〉/ 示/ MM/ 域/ R/ 中/ 任意子/ 域/ ,/ 迁移/ 关系/ Δ/ M/ ?/ 表示/ 在/ {/ Ri/ }/ 上/ 进行/ 判断/ 操作/ ./ (/ 3/ )/ Δ/ =/ Δ/ =/ 时/ ,/ op/ =/ t/ ←/ I/ ,/ 在/ MM/ 中有/ 迁移/ 关系/ Δ/ M/ =/ 与/ Δ/ =/ 相对/ 应/ ,/ 此时/ MM/ 的/ 格局/ 迁移/ 为/ 〈/ {/ i/ }/ ,/ q/ ,/ {/ Ri/ }/ i/ ∈/ [/ n/ ]/ 〉/ Δ/ M/ =/ 表示/ 在/ 对/ {/ Ri/ }/ 进行/ t/ ←/ v/ (/ t/ )/ 赋值/ 操作/ ,/ v/ (/ t/ )/ ∈/ I/ 为/ MT/ 赋值/ 时钟/ 值/ ,/ v/ (/ t/ )/ 为/ 赋值/ 时钟/ 值/ 在/ 时间/ 域/ 等价/ 后/ 的/ 关键点/ ,/ t/ ∈/ Z/ 为/ 项内/ 字符/ ,/ t/ ←/ v/ (/ t/ )/ 表示/ 将/ 关键点/ v/ (/ t/ )/ 赋值/ 给/ 字符/ t/ ./ (/ 4/ )/ Δ/ =/ Δ/ ├/ 时/ ,/ op/ =/ Time/ ←/ c/ ,/ 在/ MM/ 中有/ 迁移/ 关系/ Δ/ M/ ├/ 与/ Δ/ ├/ 相对/ 应/ ,/ 此时/ MM/ 的/ 格局/ 迁移/ 为/ 〈/ {/ i/ }/ ,/ q/ ,/ {/ Ri/ }/ i/ ∈/ [/ n/ ]/ 〉/ MT/ 的/ 格局/ 迁移/ 为/ 〈/ {/ i/ }/ ,/ q/ ,/ {/ wi/ }/ i/ ∈/ [/ n/ ]/ ,/ v/ 〉/ 〈/ {/ i/ }/ ,/ q/ ,/ {/ wi/ }/ i/ ∈/ [/ n/ ]/ ,/ v/ 〉/ ∈/ Δ/ ,/ wi/ ∈/ (/ Γ/ ×/ 瓗/ +/ )/ / 称为/ 栈/ i/ 的/ 字/ ,/ 设/ di/ 为栈/ i/ 的/ 栈/ 深度/ ,/ 用/ wij/ 表示/ 栈/ i/ 内/ 第/ j/ 层/ 的/ 子/ 字/ ,/ j/ ∈/ [/ di/ ]/ ,/ wij/ |/ Γ/ 表示/ wij/ 投影/ 在/ Γ/ 的/ 栈/ 字符/ ,/ v/ (/ wij/ |/ Γ/ )/ 表示/ 投影/ 与/ 栈/ 字符/ Γ/ 相关联/ 的/ 时钟/ 值/ ,/ v/ (/ wij/ |/ Γ/ )/ 表示/ 投影/ 与/ 栈/ 字符/ Γ/ 相关联/ 的/ 时钟/ 值/ 在/ 时钟/ 域/ 等价/ 后/ 的/ 关键点/ ,/ TG/ 为/ 全局/ 时钟/ ,/ v/ (/ TG/ )/ 表示/ 全局/ 时钟/ 的/ 时钟/ 值/ 在/ 时钟/ 域/ 等价/ 后/ 的/ 关键点/ ,/ 则/ 可得/ wij/ 在/ MM/ 中/ 等价/ 项/ Rij/ =/ (/ (/ wij/ |/ Γ/ )/ ×/ v/ (/ wij/ |/ Γ/ )/ )/ ∪/ (/ TG/ ×/ v/ (/ TG/ )/ )/ ∈/ Γ/ M/ ,/ 栈/ i/ 内容/ Ri/ =/ Ri1/ …/ Rij/ …/ ,/ 其中/ i/ ∈/ [/ n/ ]/ ,/ j/ ∈/ [/ di/ ]/ ./ 从而/ 可知/ 对应/ 于/ MM/ 的/ 格/ Ridi/ 局/ 迁移/ 为/ 〈/ {/ i/ }/ ,/ q/ ,/ {/ Ri/ }/ i/ ∈/ [/ n/ ]/ 〉/ →/ / / 其中/ q/ ,/ q/ ∈/ QM/ ,/ δ/ 为/ 迁移/ 动作/ ./ 如图/ 3/ 所示/ ./ 表示/ 在/ 对/ {/ Ri/ }/ 中/ 所有/ 字符/ 的/ 时钟/ 值/ 增加/ c/ 后取/ 关键点/ ,/ 对/ 任意/ i/ ∈/ [/ n/ ]/ ,/ Rij/ =/ (/ (/ wij/ |/ Γ/ )/ ×/ v/ (/ wij/ |/ Γ/ )/ +/ c/ )/ ∪/ (/ TG/ ×/ v/ (/ TG/ )/ +/ c/ )/ ,/ Ri/ =/ Ri1/ …/ Rij/ …/ Rid/ ,/ v/ (/ wij/ |/ Γ/ )/ +/ c/ 表示/ 投影/ 出/ 的/ 栈/ 字符/ Γ/ 的/ 时钟/ 值/ 增加/ c/ ,/ v/ (/ TG/ )/ +/ c/ 表示/ 全局/ 时钟/ 的/ 时钟/ 值/ 增加/ c/ ./ (/ 5/ )/ Δ/ =/ Δ/ pop/ 时/ ,/ op/ =/ pop/ (/ a/ ,/ I/ )/ ,/ 在/ MM/ 中有/ 迁移/ 关系/ Δ/ Mpop/ 与/ Δ/ pop/ 相对/ 应/ ,/ 此时/ MM/ 的/ 格局/ 迁移/ 为/ 〈/ {/ i/ }/ ,/ q/ ,/ {/ Ri/ }/ i/ ∈/ [/ n/ ]/ 〉/ 关系/ Δ/ Mpop/ 表示/ 关键点/ 等于/ v/ (/ a/ )/ 的/ 字符/ a/ ∈/ Γ/ 出栈/ ,/ Rij/ =/ (/ (/ (/ (/ wij/ |/ Γ/ )/ -/ a/ )/ ×/ v/ (/ (/ wij/ |/ Γ/ )/ -/ a/ )/ )/ ∪/ (/ TG/ ×/ v/ (/ TG/ )/ )/ )/ ,/ Ri/ =/ Ri1/ …/ Rij/ …/ Rid/ ,/ (/ (/ wij/ |/ Γ/ )/ -/ a/ )/ 表示/ 在/ 投影/ 出/ 的/ 栈/ 字符/ Γ/ 内/ 删除/ 字符/ a/ ./ (/ 6/ )/ Δ/ =/ Δ/ push/ 时/ ,/ op/ =/ push/ (/ a/ ,/ I/ )/ ,/ 在/ MM/ 中有/ 迁移/ 关系/ Δ/ Mpush/ 与/ Δ/ push/ 相对/ 应/ ,/ 此时/ MM/ 的/ 格局/ 迁移/ 为/ 〈/ {/ i/ }/ ,/ q/ ,/ {/ Ri/ }/ i/ ∈/ [/ n/ ]/ 〉/ 移/ 关系/ Δ/ Mpop/ 表示/ 关键点/ 等于/ v/ (/ a/ )/ 的/ 字符/ a/ ∈/ (/ Γ/ ∪/ T/ )/ 入栈/ ,/ Rij/ =/ (/ (/ (/ (/ wij/ |/ Γ/ )/ +/ a/ )/ ×/ v/ (/ (/ wij/ |/ Γ/ )/ +/ a/ )/ )/ ∪/ (/ TG/ ×/ v/ (/ TG/ )/ )/ )/ ∨/ (/ (/ (/ wij/ |/ Γ/ )/ ×/ v/ (/ wij/ |/ Γ/ )/ )/ ∪/ (/ (/ TG/ +/ a/ )/ ×/ v/ (/ TG/ +/ a/ )/ )/ )/ ,/ Ri/ =/ Ri1/ …/ Rij/ …/ Rid/ ,/ (/ (/ wij/ |/ Γ/ )/ +/ a/ )/ Page7/ 表示/ 在/ 投影/ 出/ 的/ 栈/ 字符/ Γ/ 内/ 增加/ 字符/ a/ ,/ (/ TG/ +/ a/ )/ 表示/ 在/ 全局/ 时钟/ 内/ 增加/ 字符/ a/ 的/ 时钟/ ./ (/ 7/ )/ Δ/ =/ Δ/ inter/ 时/ ,/ 在/ MM/ 中有/ 迁移/ 关系/ Δ/ Minter/ 与/ Δ/ inter/ 相对/ 应/ ,/ 此时/ MM/ 的/ 格局/ 迁移/ 为/ 〈/ {/ i/ }/ ,/ q/ ,/ Ri/ }/ i/ ∈/ [/ n/ ]/ 〉/ 分别/ 为栈/ i/ ,/ j/ 的/ 域/ ,/ i/ ,/ j/ ∈/ [/ n/ ]/ 且/ i/ ≠/ j/ ./ 上下文/ 切换/ 时/ ,/ 将/ 栈/ j/ 从/ 等待/ 栈/ 切换/ 到/ 工作栈/ ,/ 同时/ 将/ 栈/ i/ 从/ 工作栈/ 切换/ 到/ 等待/ 栈/ ./ (/ 8/ )/ Δ/ =/ Δ/ ‖/ 时/ ,/ 在/ MM/ 中有/ 迁移/ 关系/ Δ/ M/ ‖/ 与/ Δ/ ‖/ 相对/ 应/ ,/ 此时/ MM/ 的/ 格局/ 迁移/ 为/ 〈/ Work/ [/ n/ ]/ ,/ q/ ,/ {/ Ri/ }/ i/ ∈/ [/ n/ ]/ 〉/ Work/ [/ n/ ]/ 内/ 的/ 每个/ 栈/ ,/ 调用/ 相应/ 的/ 栈/ 内/ 迁移/ 转换/ ,/ 转换/ 后/ 格局/ 为/ 〈/ Work/ [/ n/ ]/ ,/ q/ ,/ {/ Rj/ }/ j/ ∈/ [/ n/ ]/ 〉/ ./ 4.2/ ./ 2/ 动态/ 转换/ 假定/ 模型/ TMPDNMT/ =/ (/ [/ n/ ]/ ,/ Q/ ,/ q0/ ,/ Γ/ ,/ T/ ,/ Δ/ )/ ,/ 使用/ 动态/ 转换/ 获得/ 的/ 模型/ MPDNMM/ =/ (/ [/ n/ ]/ M/ ,/ QM/ ,/ 0/ ,/ Γ/ M/ ,/ Δ/ M/ )/ ,/ 具体/ 转换/ 如下/ :/ qM/ (/ 1/ )/ 栈/ 个数/ [/ n/ ]/ M/ 、/ 状态/ QM/ 、/ 初始状态/ qM/ 分别/ 等同于/ 静态/ 转换/ ./ (/ 2/ )/ 栈/ 字符/ Γ/ M/ 的/ 转换/ :/ Γ/ M/ =/ 2Z/ ×/ key/ ,/ 其中/ Z/ ·/ Y/ ∪/ Y/ ·/ ,/ 增加/ 了/ 标识/ 项/ 以及/ 基础/ 时钟/ 字符/ ,/ key/ 为/ 时钟/ 关键点/ 集/ ./ (/ 3/ )/ 迁移/ 关系/ Δ/ 到/ Δ/ M/ 的/ 转换规则/ ./ MT/ 的/ 格局/ 迁移/ 为/ 〈/ {/ i/ }/ ,/ q/ ,/ {/ wi/ }/ i/ ∈/ [/ n/ ]/ ,/ v/ 〉/ 图/ 4MT/ 的/ 格局/ 动态/ 转换/ 为/ MM/ 的/ 格局/ (/ 1/ )/ Δ/ =/ Δ/ nop/ 时/ ,/ op/ =/ nop/ ,/ 在/ MM/ 中有/ Δ/ Mnop/ 与/ Δ/ nop/ 对应/ ,/ Δ/ Mnop/ =/ Δ/ nop/ 为空/ 操作/ ./ (/ 2/ )/ Δ/ =/ Δ/ 相对/ 应/ ,/ 此时/ MM/ 的/ 格局/ 迁移/ 为/ 〈/ {/ i/ }/ ,/ q/ ,/ Ri/ 〉/ pop/ (/ Rid/ →/ / / / / 〈/ {/ i/ }/ ,/ q/ ,/ {/ wi/ }/ i/ ∈/ [/ n/ ]/ ,/ v/ 〉/ ∈/ Δ/ ,/ wi/ ∈/ (/ Γ/ ×/ 瓗/ +/ )/ / 为栈/ i/ 的/ 字/ ,/ 设/ di/ 为栈/ i/ 的/ 栈/ 深度/ ,/ 用/ wij/ 表示/ 栈/ i/ 内/ 第/ j/ 层/ 的/ 子/ 字/ ,/ widiwij/ 投影/ 在/ Γ/ 的/ 栈/ 字符/ ,/ v/ (/ wij/ |/ Γ/ )/ 表示/ 投影/ 与/ 栈/ 字符/ Γ/ 相关联/ 的/ 时钟/ 值/ ,/ v/ (/ wij/ |/ Γ/ )/ 表示/ 投影/ 与/ 栈/ 字符/ Γ/ 相关联/ 的/ 时钟/ 值/ 在/ 时钟/ 等价/ 后/ 的/ 关键点/ ,/ TG/ 为/ 全局/ 时钟/ ,/ v/ (/ TG/ )/ 表示/ 全局/ 时钟/ 的/ 时钟/ 值/ 在/ 时钟/ 域/ 等价/ 后/ 的/ 关键点/ ./ 由/ 以上/ 设定/ ,/ 则/ 可得/ RidiRidi/ =/ (/ (/ widi/ |/ Γ/ )/ ×/ v/ (/ widi/ |/ Γ/ )/ )/ ∪/ (/ (/ wi/ (/ di/ -/ 1/ )/ |/ Γ/ )/ ·/ ×/ v/ (/ wi/ (/ di/ -/ 1/ )/ |/ Γ/ )/ )/ ∪/ (/ TGdi/ ×/ v/ (/ TGdi/ (/ ├/ 度/ ,/ (/ wi/ (/ di/ -/ 1/ )/ |/ Γ/ )/ ·/ 表示/ 对/ wi/ (/ di/ -/ 1/ )/ 投影/ 在/ Γ/ 的/ 栈/ 字符/ 的/ 标识/ 字符/ ,/ TGdi/ 示域/ Ridi/ 时间/ 流逝/ 字符/ ,/ v/ (/ ├/ 逝/ 的/ 时钟/ 值/ 在/ 时钟/ 域/ 等价/ 后/ 的/ 关键点/ ,/ 栈/ i/ 内容/ Ri/ =/ Ri1/ …/ Rij/ …/ Rididi/ ×/ v/ (/ ├/ ·/ 知/ 对应/ 于/ MM/ 的/ 格局/ 迁移/ 为/ 〈/ q/ ,/ {/ Ri/ }/ i/ ∈/ [/ n/ ]/ 〉/ →/ / / {/ Ri/ }/ i/ ∈/ [/ n/ ]/ 〉/ ,/ 其中/ q/ ,/ q/ ∈/ QM/ ,/ δ/ 为/ 迁移/ 动作/ ,/ 为了/ 描述/ 方便/ ,/ 格局/ 迁移/ 时/ 的/ 中间状态/ 用/ qtmp/ (/ )/ 表示/ ,/ 如/ qtmp/ (/ Ridi/ 入栈/ 时/ 分别/ 用/ pop/ (/ )/ ,/ push/ (/ )/ 表示/ ,/ 如/ pop/ (/ Ridipush/ (/ Ridi/ 所示/ ./ 〈/ {/ i/ }/ ,/ q/ ,/ Ri/ 〉/ ,/ 格局/ 迁移/ 解释/ 为/ :/ 首先/ 将栈/ 顶域/ Ridi/ 栈/ ,/ 转入/ 状态/ qtmp/ (/ Ridi/ 断后/ ,/ 再/ 将/ Ridi/ 中栈/ 内/ 字符/ 并未/ 改变/ ./ (/ 3/ )/ Δ/ =/ Δ/ =/ 时/ ,/ op/ =/ t/ ←/ I/ ,/ 在/ MM/ 中有/ 迁移/ 关系/ Δ/ M/ =/ 与/ Δ/ =/ 相对/ 应/ ,/ 此时/ MM/ 的/ 格局/ 迁移/ 为/ 〈/ {/ i/ }/ ,/ Page8/ →/ / / / / q/ ,/ Ri/ 〉/ push/ (/ Rid/ →/ / / / / 系/ Δ/ M/ =/ 表示/ 对/ {/ Ri1/ }/ 进行/ t/ ←/ v/ (/ t/ )/ 赋值/ 操作/ ,/ v/ (/ t/ )/ ∈/ I/ 为/ MT/ 赋值/ 时钟/ 值/ ,/ v/ (/ t/ )/ 为/ 赋值/ 时钟/ 值/ 在/ 时钟/ 域/ 等价/ 后/ 的/ 关键点/ ,/ t/ 为/ Ridi/ 者/ 全局/ 时钟/ ,/ t/ ←/ v/ (/ t/ )/ 表示/ 将/ 关键点/ v/ (/ t/ )/ 赋值/ 给/ 字符/ t/ ./ Ridiv/ (/ t/ )/ ]/ ./ 对/ 任意/ i/ ∈/ [/ n/ ]/ ,/ Ridi/ =/ (/ (/ (/ widi/ |/ Γ/ )/ ×/ v/ (/ t/ )/ )/ ∪/ (/ TGdi/ ×/ v/ (/ TGdi/ (/ (/ (/ widi/ |/ Γ/ )/ ×/ v/ (/ widi/ |/ Γ/ )/ )/ ∪/ (/ TGdi/ ×/ v/ (/ t/ )/ )/ ∪/ (/ ├/ di/ ×/ 0/ )/ ∪/ (/ ├/ 域/ Ridi/ 时钟/ 或者/ 全局/ 时钟/ t/ ,/ 赋予/ I/ 中/ 任意/ 一个/ 值/ 对应/ 的/ 关键点/ v/ (/ t/ )/ ,/ 之后/ 再/ 将/ Ridi/ 状态/ q/ ./ 出栈/ ,/ 转入/ 状态/ qtmp/ (/ Ridi/ (/ 4/ )/ Δ/ =/ Δ/ ├/ 时/ ,/ op/ =/ Time/ ←/ c/ ,/ 在/ MM/ 中有/ 迁移/ 关系/ Δ/ M/ ├/ 与/ Δ/ ├/ 相对/ 应/ ,/ 此时/ MM/ 的/ 格局/ 迁移/ 为/ 〈/ {/ i/ }/ ,/ [/ t/ ←/ v/ (/ t/ +/ c/ )/ ]/ ,/ t/ 为/ Ridiq/ ,/ Ri/ 〉/ push/ (/ Rid/ →/ / / / / 系/ Δ/ M/ ├/ 表示/ 在/ 对/ {/ Ri/ }/ 中/ 所有/ 字符/ 的/ 时钟/ 值/ 增加/ c/ 后取/ 关键点/ ,/ RidiRidi/ 对/ 任意/ i/ ∈/ [/ n/ ]/ ,/ Ridi/ =/ (/ (/ widi/ |/ Γ/ )/ ×/ v/ (/ widi/ |/ Γ/ )/ +/ c/ )/ ∪/ (/ TGdi/ ×/ v/ (/ TGdic/ )/ ./ 格局/ 迁移/ 解释/ :/ 首先/ 栈顶域/ Ridiqtmp/ (/ Ridi/ 增加/ 时钟/ 值/ c/ 后取/ 关键点/ ,/ 再/ 将/ Ridi/ 栈/ ,/ 最后/ 获得/ 状态/ q/ ./ (/ 5/ )/ Δ/ =/ Δ/ pop/ 时/ ,/ op/ =/ pop/ (/ a/ ,/ I/ )/ ,/ 在/ MM/ 中有/ 迁移/ 关系/ Δ/ Mpop/ 与/ Δ/ pop/ 相对/ 应/ ,/ 此时/ MM/ 的/ 格局/ 迁移/ 为/ 〈/ {/ i/ }/ ,/ q/ ,/ Ri/ 〉/ pop/ (/ Ri/ (/ d/ / / / / / Ri/ (/ di/ -/ 1/ )/ )/ 〉/ Ri/ (/ di/ -/ 1/ )/ +/ (/ Ridi/ +/ Ri/ (/ di/ -/ 1/ )/ )/ )/ 〉/ ,/ 其中/ (/ Ridi/ +/ Ri/ (/ di/ -/ 1/ )/ )/ 为/ Ridi/ 点/ 等于/ v/ (/ a/ )/ 的/ 字符/ a/ ∈/ Γ/ 出栈/ ,/ (/ Ridi/ +/ Ri/ (/ di/ -/ 1/ )/ )/ =/ (/ (/ widi/ |/ Γ/ -/ a/ )/ ×/ v/ (/ widi/ |/ Γ/ -/ a/ )/ )/ ∪/ (/ TGdi/ ×/ v/ (/ TGdi/ (/ wi/ (/ di/ -/ 1/ )/ |/ Γ/ ×/ (/ v/ (/ wi/ (/ di/ -/ 1/ )/ |/ Γ/ )/ +/ v/ (/ ├/ (/ v/ (/ w/ ·/ v/ (/ ├/ i/ (/ di/ -/ 1/ )/ |/ Γ/ )/ +/ v/ (/ ├/ )/ )/ )/ ∪/ (/ ├/ ×/ 0/ )/ ,/ 其中/ (/ (/ widi/ |/ Γ/ )/ -/ a/ )/ 表示/ 投影/ 出/ ·/ di/ 栈/ i/ 的/ 栈/ 顶子/ 字/ widi/ 符/ ./ 当/ MM/ 栈顶域/ 的/ 项内/ 字符/ 出栈/ 时/ ,/ 其下/ 一层/ 域/ 的/ 项内/ 字符/ 的/ 时钟/ 需/ 考虑/ 相对/ 时间/ 流逝/ 情况/ ./ 格局/ 迁移/ 解释/ 为/ :/ 首先/ 栈顶域/ Ridi/ 将/ 下/ 一层/ 域/ Ri/ (/ di/ -/ 1/ )/ 出栈/ ,/ 转入/ 状态/ qtmp/ (/ Ridi/ 最后/ 将/ Ridi/ 转入/ 状态/ q/ ./ 组合/ 域/ 构造/ 规则/ :/ 栈顶域/ Ridi/ 栈时/ ,/ 需将/ RidiRi/ (/ di/ -/ 1/ )/ )/ ./ ①/ 将/ Ridia/ 、/ 全局/ 时钟/ TGdiv/ (/ TGdi/ ②/ 将/ Ri/ (/ di/ -/ 1/ )/ 中/ 所有/ 非/ 全局/ 时钟/ (/ 普通/ 栈内/ 字符/ wi/ (/ di/ -/ 1/ )/ |/ Γ/ 、/ 普通/ 栈内/ 字符/ 的/ 标识/ 字符/ w/ ·/ 础/ 时钟/ 流逝/ 字符/ ├/ 组合/ 域/ 中/ ,/ 其/ 关键点/ 需在/ 原来/ 的/ 时钟/ 值上/ 增加/ 时间/ 流逝/ ,/ 时间/ 流逝/ 为栈/ 顶域/ Ridi/ 到/ 组合/ 域时/ ,/ 其/ 关键点/ 分别/ 为/ (/ v/ (/ wi/ (/ di/ -/ 1/ )/ |/ Γ/ )/ +/ v/ (/ ├/ v/ (/ ├/ ·/ )/ )/ ,/ (/ v/ (/ w/ ·/ di/ ·/ )/ )/ ,/ 0/ ./ di/ 为/ 进一步/ 描述/ 组合/ 域/ 构造/ 规则/ ,/ 通过/ 一个/ 实例/ 来/ 说明/ ,/ 如图/ 5/ 所示/ ,/ 图/ 5/ (/ a/ )/ 中/ R2/ 的/ 普通/ 项栈/ 内/ 字符/ 、/ 基础/ 时钟/ 字符/ 以及/ 全局/ 时钟/ 〈/ ├/ ,/ 0/ 〉/ 、/ 〈/ x/ ,/ 2/ 〉/ 、/ 〈/ y/ ,/ 5/ 〉/ 、/ ·/ ,/ 5/ 〉/ 、/ 〈/ x/ ·/ ,/ ω/ 〉/ 在/ 〈/ c/ ,/ 6/ 〉/ 出栈/ 后/ 保持/ 不变/ ,/ R1/ 中/ 的/ 非/ 〈/ y/ 全局/ 栈/ 字符/ 〈/ a/ ·/ ,/ 5/ 〉/ 、/ 〈/ b/ ·/ ,/ 3/ 〉/ 、/ 〈/ ├/ 增加/ 时间/ 流逝/ (/ R2/ 中/ 〈/ ├/ 〈/ a/ ·/ ,/ ω/ 〉/ 、/ 〈/ b/ ,/ ω/ 〉/ 、/ 〈/ ├/ 如图/ 5/ (/ b/ )/ 中/ 的/ R1/ ./ (/ 6/ )/ Δ/ =/ Δ/ push/ 时/ ,/ op/ =/ push/ (/ a/ ,/ I/ )/ ,/ MM/ 中有/ 迁移/ 关系/ Δ/ Mpush/ 与/ Δ/ push/ 相对/ 应/ ,/ 此时/ MM/ 的/ 格局/ 迁移/ 为/ idi/ |/ Γ/ ×/ v/ (/ widi/ |/ Γ/ )/ )/ ∪/ (/ TGdi/ ×/ v/ (/ TGdi/ 〈/ {/ i/ }/ ,/ q/ ,/ Ri/ 〉/ push/ (/ Rid/ / / / / / 〈/ {/ i/ }/ ,/ q/ ,/ (/ Ri/ +/ Ridi/ 于/ v/ (/ a/ )/ 的/ 字符/ a/ ∈/ Γ/ 入栈/ ,/ Ridi/ =/ (/ a/ ×/ v/ (/ a/ )/ )/ ∪/ (/ w/ ·/ v/ (/ TGdi/ 示新入/ 栈/ 的/ 字符/ 及其/ 关键点/ ,/ w/ ·/ 表示/ 将栈/ 顶域/ Ridi/ 符/ ,/ 其/ 关键点/ 不/ 变化/ ,/ T/ ·/ 域/ Ridi/ 化/ ,/ ├/ ·/ ×/ 0/ 表示/ 将栈/ 顶域/ RidiPage9/ 图/ 5/ Δ/ pop/ 格局/ 迁移/ 转换/ 实例/ 为/ 标识/ 字符/ ,/ 其/ 关键点/ 为/ 零/ ./ 格局/ 迁移/ 解释/ 为/ :/ 首先/ 将栈/ 顶域/ Ridi/ 字符/ a/ 的/ 域/ Ridi/ 用/ 实例/ 进一步/ 说明/ Δ/ Mpush/ 迁移/ 操作/ ,/ 如图/ 6/ 所示/ ,/ 域/ R1/ 为/ 〈/ b/ ,/ 4/ 〉/ 入栈/ 前/ 的/ 栈/ 顶域/ ,/ R1/ 中/ 的/ 普通/ 项/ 包含/ 基础/ 时钟/ 〈/ ├/ ,/ 0/ 〉/ 、/ 全局/ 时间/ 〈/ x/ ,/ 1/ 〉/ 、/ 栈内/ 字符/ 〈/ a/ ,/ 2/ 〉/ ,/ 在/ 〈/ b/ ,/ 4/ 〉/ 入栈/ 后/ ,/ R1/ 中/ 的/ 普通/ 项/ 被/ ·/ 标识/ 成/ 标识/ 项/ ·/ ,/ 0/ 〉/ 、/ 〈/ x/ ·/ ,/ 1/ 〉/ 、/ 〈/ a/ ·/ ,/ 2/ 〉/ ,/ 同时/ 保留/ 〈/ ├/ ,/ 0/ 〉/ 、/ 〈/ x/ ,/ 1/ 〉/ ,/ 〈/ ├/ 最终/ 结果/ 为/ 新/ 的/ 栈/ 顶域/ R2/ ./ (/ 7/ )/ Δ/ =/ Δ/ inter/ 时/ ,/ 转换/ 过程/ 与/ 静态/ 算法/ 类似/ ./ (/ 8/ )/ Δ/ =/ Δ/ ‖/ 时/ ,/ 转换/ 过程/ 与/ 静态/ 算法/ 类似/ ,/ 但是/ 工作栈/ 集/ Work/ [/ n/ ]/ 内/ 的/ 每个/ 栈/ ,/ 调用/ 的/ 栈/ 内/ 迁移/ 转换/ 为栈/ 内/ 动态/ 转换/ ./ 5/ 可达性/ 等价/ 的/ 正确性/ 给出/ TMPDNMT/ =/ (/ [/ n/ ]/ ,/ Q/ ,/ q0/ ,/ Γ/ ,/ T/ ,/ Δ/ )/ ,/ 根据/ 转换规则/ ,/ 可/ 构造/ 出/ MPDNMM/ =/ (/ [/ n/ ]/ M/ ,/ QM/ ,/ qM/ Γ/ M/ ,/ Δ/ M/ )/ ,/ 并/ 参考文献/ [/ 16/ ]/ ,/ 证明/ 状态/ qF/ 在/ TMPDN/ 可达/ 当且/ 仅/ 当/ 其/ 转换/ 状态/ qM/ 表明/ 其/ 转换/ 的/ 正确性/ ./ 定义/ 3/ ./ 给定/ MT/ ,/ 假设/ MT/ 的/ 初始/ 格局/ C0/ =/ 〈/ q0/ ,/ {/ wi/ }/ i/ ∈/ [/ n/ ]/ ,/ v0/ 〉/ ,/ 其中/ q0/ ∈/ Q/ 表示/ 初始状态/ ,/ wi/ 为栈/ i/ 的/ 字/ ,/ 表示/ 栈/ i/ 的/ 初始/ 内容/ ,/ 描述/ 为/ wi/ ∈/ (/ Γ/ ×/ 瓗/ +/ )/ / ,/ v0/ 表示/ 初始/ 时钟/ 值/ ./ 目标/ 格局/ CF/ =/ 〈/ qF/ ,/ {/ wj/ }/ j/ ∈/ [/ n/ ]/ ,/ vF/ 〉/ ,/ 如果/ 存在/ 格局/ 迁移/ 关系/ C0/ →/ / CF/ ,/ 其中/ →/ / 表示/ 经过/ 一步/ 或者/ 多/ 步/ 迁移/ 关系/ ,/ 那么/ 称/ 状态/ qF/ 在/ 迁移/ 系统/ 中可达/ ./ 设/ R/ =/ R0/ …/ Rn/ 是/ MM/ 域/ 集合/ ,/ 域/ R0/ ,/ R1/ ∈/ R/ ,/ Δ/ 为域/ R/ 上/ 的/ 迁移/ 关系/ 集/ ,/ 并且/ Δ/ 是/ 满足/ 自反性/ 、/ 非/ 对称性/ 、/ 传递性/ 的/ 偏序/ 关系/ ,/ 那么/ 如果/ R0/ 经过/ Δ/ 迁移/ 到/ R1/ ,/ 并且/ Δ/ 是/ 严格/ 偏序/ 关系/ ,/ 则/ R0/ ,/ R1/ 的/ 关系/ 记为/ R0/ / R1/ ,/ 如果/ R0/ 经过/ Δ/ 迁移/ 到/ R1/ ,/ 并且/ Δ/ 是非/ 严格/ 偏序/ 关系/ ,/ 则/ R0/ ,/ R1/ 的/ 关系/ 记为/ R0/ / R1/ ./ 对于/ 域/ R/ ,/ 如果/ Ri/ / Ri/ +/ 1/ ,/ 0/ / i/ / n/ ,/ 则/ 称/ R/ 为/ 相关/ 域/ ,/ 如果/ Ri/ / Ri/ +/ 1/ ,/ 0/ / i/ / n/ ,/ 则/ 称/ R/ 为弱/ 相关/ 域/ ./ 如果/ R/ 为/ (/ 弱/ )/ 相关/ 域/ ,/ 则/ 称/ MM/ 的/ 格局/ C/ =/ 〈/ q/ ,/ R/ 〉/ 为/ (/ 弱/ )/ 相关/ 格局/ ./ 设/ R/ =/ R0/ …/ Rn/ 为弱/ 相关/ 域/ ,/ 域/ R/ =/ R0/ …/ Rn/ 为/ 相关/ 域/ ,/ 如果/ Rn/ =/ Rn/ 、/ Ri/ ∈/ R/ ++/ 经/ 时间/ 流逝/ 之后/ 生成/ 的/ 域/ 集/ ,/ 称为/ Ri/ 的/ 时间/ 迁移/ 域/ )/ 、/ 且/ Ri/ / Ri/ +/ 1/ ,/ 0/ / i/ / n/ ,/ 则/ 称域/ R/ 是域/ R/ 的/ 强/ 相关/ 域/ ./ 设/ MM/ 的/ 相关/ 格局/ C/ =/ 〈/ q/ ,/ R/ 〉/ ,/ 且域/ R/ 是/ R/ 域/ 的/ 强/ 相关/ 域/ ,/ 则/ 称/ C/ =/ 〈/ q/ ,/ R/ 〉/ 为/ C/ 的/ 强/ 相关/ 格局/ ./ 定理/ 1/ ./ 对于/ TMPDN/ 任意/ 一个/ 格局/ CT/ ,/ 通过/ 时钟/ 域/ 等价/ 转化/ ,/ 在/ MPDN/ 都/ 存在/ 与/ 之/ 对应/ 的/ 格局/ CM/ ./ 证明/ ./ 设/ MM/ 的/ 一个/ 格局/ CM/ =/ 〈/ qM/ ,/ RM/ 〉/ ,/ MT/ 的/ 一个/ 格局/ CT/ =/ 〈/ qT/ ,/ {/ wi/ }/ i/ ∈/ [/ n/ ]/ ,/ v/ 〉/ ,/ S/ =/ {/ wi/ }/ i/ ∈/ [/ n/ ]/ ∪/ v/ 为/ MT/ 此刻/ 字/ 和/ 时钟/ 集合/ ,/ S/ 经过/ 时间/ 域/ 转换成/ R/ ,/ wi/ =/ 〈/ a1/ ,/ v1/ 〉/ 〈/ a2/ ,/ v2/ 〉/ …/ 〈/ an/ ,/ vn/ 〉/ ,/ R/ =/ R0/ …/ Rn/ ,/ 下面/ 表达式/ 成立/ ./ Page10/ (/ 1/ )/ qM/ =/ qT/ ;/ (/ 2/ )/ (/ (/ wij/ |/ Γ/ )/ ×/ v/ (/ wij/ |/ Γ/ )/ )/ ∈/ Riffwij/ ∈/ S/ ;/ (/ 3/ )/ (/ TG/ ×/ v/ (/ TG/ )/ )/ ∈/ Riffv/ ∈/ S/ ./ 当前/ 仅当/ CT/ / SCM/ ,/ 即/ 对于/ MT/ 任意/ 一个/ 格局/ CT/ ,/ 通过/ 时间/ 域/ 等价/ 技术/ 转化/ 后/ ,/ 在/ MM/ 都/ 存在/ 与/ 之/ 对应/ 的/ 格局/ CM/ ./ 定理/ 2/ ./ 如果/ 目标/ 状态/ qF/ 在/ MM/ 可达/ ,/ 那么/ 存在/ 一个/ 正则/ 可/ 达/ 格局/ CM/ (/ qF/ 为/ 格局/ CM/ 的/ 状态/ )/ ,/ 且/ 可达/ 格局/ CM/ 为弱/ 相关/ 格局/ ,/ 则/ 可得/ 如下/ 结论/ :/ 至少/ 存在/ 一个/ 与/ CM/ 对应/ 的/ 强/ 相关/ 格局/ CM/ =/ 〈/ q/ ,/ R/ 〉/ ./ 证明/ ./ 假设/ MM/ 中/ 存在/ 一个/ 可/ 达/ 目标/ 状态/ qF/ ,/ 显然/ 在/ MM/ 存在/ 一个/ 可/ 达/ 格局/ CM/ =/ 〈/ qF/ ,/ R/ 〉/ ./ 再/ 证明/ MM/ 中/ 所有/ 可/ 达/ 格局/ 都/ 是/ 弱/ 相关/ ,/ 假设/ MM/ 存在/ 一个/ 弱/ 相关/ 域/ R/ =/ R0R1/ …/ Rn/ ,/ 域/ R/ 经过/ 迁移/ 得到/ 域/ R/ =/ R0R1/ …/ Rn/ ,/ 因/ Rn/ -/ 1/ / Rn/ ,/ Rn/ ∈/ R/ ++/ 此时/ 称/ R/ 为弱/ 相关/ 域/ ,/ 因此/ 由/ R/ 构成/ 的/ MM/ 中/ 所有/ 可/ 达/ 格局/ 都/ 为/ 弱/ 相关/ ./ 最后/ 证明/ 至少/ 存在/ 一个/ 与/ CM/ 对应/ 的/ 强/ 相关/ 格局/ CM/ =/ 〈/ q/ ,/ R/ 〉/ ,/ 假设/ 存在/ 域/ R/ =/ R0R1/ …/ Rn/ ,/ 满足/ Rn/ =/ Rn/ ,/ Ri/ ∈/ R/ ++/ Ri/ +/ 1/ ,/ 那么/ 称/ R/ 是/ R/ 的/ 强/ 相关/ 域/ ,/ 因此/ R/ 构成/ 的/ 强/ 相关/ 格局/ CM/ =/ 〈/ q/ ,/ R/ 〉/ 一定/ 存在/ ./ 为了/ 证明/ 可达性/ 的/ 等价/ ,/ 引入/ 如下/ 两个/ 定律/ [/ 16/ ]/ ./ 定律/ 1/ ./ 对于/ 属于/ MM/ 的/ 任意/ 一个/ 正则/ 可/ 达/ 格局/ CM/ ,/ 都/ 有/ 与/ 之/ 对应/ 的/ 强/ 相关/ 格局/ CM/ =/ 〈/ q/ ,/ R/ 〉/ ,/ 此时/ 在/ MT/ 中/ 一定/ 存在/ S/ ,/ 且/ 必定/ 存在/ 与/ S/ 对应/ 的/ 格局/ CT/ ,/ 满足/ 上述/ 条件/ 后/ 则/ 存在/ CT/ / SCM/ 且/ Cinit/ →/ / CF/ ./ 定律/ 2/ ./ 对于/ 属于/ MT/ 的/ 任意/ 一个/ 格局/ CT/ ,/ 在/ MM/ 中/ 必定/ 存在/ 与/ 之/ 对应/ 的/ 格局/ CM/ ,/ 此时/ CM/ 至少/ 存在/ 一个/ 强/ 相关/ 格局/ CM/ =/ 〈/ q/ ,/ R/ 〉/ ,/ 并且/ 存在/ 域/ R/ 的/ 转换/ 集合/ S/ ,/ 满足/ 上述/ 条件/ 后/ 则/ 存在/ CT/ / SCM/ 并且/ CMinit/ →/ / CM/ 定理/ 3/ ./ 状态/ qF/ 在/ MT/ 可达/ 当且/ 仅/ 当/ qF/ 的/ 转换/ 状态/ qF/ 在/ MM/ 可达/ ./ 证明/ ./ 先证/ 后/ 向/ 蕴涵/ 关系/ :/ 状态/ qF/ 在/ MT/ 可达/ / 其/ 转换/ 状态/ qF/ 在/ MM/ 可达/ ./ 由/ 定理/ 2/ 和/ 定律/ 1/ 可知/ ,/ 如果/ MM/ 中/ 存在/ 一个/ 正则/ 格局/ CM/ ,/ 则/ 必定/ 存在/ 一个/ 强/ 相关/ 格局/ CM/ 和/ 转成域/ R/ 的/ 转换/ 集合/ S/ ,/ 那么/ MT/ 中/ 必定/ 存在/ 与/ CM/ 对应/ 的/ 格局/ CT/ ,/ 则/ 存在/ CT/ / SCM/ 并且/ Cinit/ →/ / CF/ ,/ 即/ 状态/ qF/ (/ qF/ 为/ 格局/ CT/ 的/ 状态/ )/ 在/ MT/ 可达/ ./ 再证/ 前/ 向/ 蕴涵/ 关系/ :/ 状态/ qF/ 在/ MT/ 可达/ / 其/ 转换/ 状态/ qF/ 在/ MM/ 可达/ ./ 如果/ 目标/ 状态/ qF/ 在/ MT/ 是/ 可达/ ,/ 由/ 定理/ 1/ 可知/ 在/ MM/ 中/ 必定/ 存在/ 与/ CT/ 对应/ 的/ 格局/ CM/ (/ qF/ 为/ 格局/ CM/ 的/ 状态/ )/ ,/ 因此/ 至少/ 存在/ 一个/ 强/ 相关/ 格局/ CM/ =/ 〈/ q/ ,/ R/ 〉/ ./ 由/ 定律/ 2/ 可知/ ,/ 对于/ MT/ 中/ 的/ 格局/ CT/ ,/ 必定/ 存在/ 一个/ 强/ 相关/ 格局/ CM/ 和/ 转成域/ R/ 的/ 转换/ 集合/ S/ ,/ 从而/ 必定/ 存在/ 与/ CM/ 对应/ 的/ 格局/ CM/ ,/ 满足/ 上述/ 条件/ 则/ 存在/ CT/ / SCM/ 并且/ CM/ 为/ 格局/ CT/ 的/ 状态/ )/ 在/ MM/ 可达/ ./ 因此/ ,/ 状态/ qF/ 在/ MT/ 可达/ 当且/ 仅/ 当/ 其/ 转换/ 状态/ qF/ 在/ MM/ 可达/ ./ 6/ 可达性/ 等价/ 算法/ 基于/ 时钟/ 等价/ 、/ 静态/ 转换/ 和/ 动态/ 转换/ 思想/ ,/ 提出/ 了/ 针对/ 于/ 时间/ 多/ 栈下推/ 网络/ TMPDNMT/ =/ (/ [/ n/ ]/ ,/ Q/ ,/ q0/ ,/ Γ/ ,/ T/ ,/ Δ/ )/ ,/ 转换/ 为/ 对应/ 的/ 多/ 栈下推/ 网络/ MPDNMM/ =/ (/ [/ n/ ]/ M/ ,/ QM/ ,/ qM/ 是/ 连续/ 的/ TMPDN/ 迁移/ 系统/ ,/ 输出/ 是/ 离散/ 的/ MPDN/ 迁移/ 系统/ ./ 迁移/ 系统/ MT/ 的/ 初始/ 格局/ 为/ C0/ =/ 〈/ {/ i/ }/ ,/ q0/ ,/ {/ wi/ }/ i/ ∈/ [/ n/ ]/ ,/ v0/ 〉/ ,/ 其中/ q0/ 表示/ 初始状态/ ,/ {/ wi/ }/ i/ ∈/ [/ n/ ]/ 表示/ 栈/ i/ 的/ 初始/ 内容/ 为空/ ,/ v0/ 表示/ 初始/ 时钟/ 值/ ,/ 其值/ 初始/ 为/ 0/ ./ 转换/ 算法/ 分为/ 静态/ 算法/ 和/ 动态/ 算法/ ,/ 根据/ 各自/ 的/ 转换规则/ 逐步/ 进行/ ,/ 首先/ 初始化/ 工作/ 线程/ 列表/ 以及/ 域/ 内项/ ,/ 再/ 依据/ 转换/ 类型/ 相应/ 的/ 执行/ 静态/ 算法/ 、/ 动态/ 算法/ 以及/ 栈间/ 操作/ 和/ 并发/ 迁移/ 算法/ ./ 算法/ 1/ 中/ 的/ 第/ 1/ ,/ 2/ 行为/ 整体/ 算法/ 的/ 初始化/ ,/ 首先/ 初始化/ 工作/ 线程/ 列表/ worklist/ ,/ 将/ 格局/ 〈/ {/ i/ }/ ,/ q0/ ,/ {/ wi/ }/ i/ ∈/ [/ n/ ]/ ,/ v0/ 〉/ 保存/ 至/ worklist/ 中/ ,/ 然后/ 初始化/ 域/ R/ ,/ 初始/ 域/ Rinit/ 由/ 全局/ 时钟/ 、/ 栈底/ 标识符/ bottom/ 以及/ 基础/ 时钟/ 字符/ 组成/ ,/ 最后/ 将/ 迁移/ 迁移/ 关系/ 〈/ q0/ ,/ push/ (/ Rinit/ )/ ,/ q0/ 〉/ 放入/ 迁移/ 关系/ 集/ Δ/ M/ 中/ ./ 第/ 3/ 行为/ 枚举/ 静态/ 算法/ 与/ 动态/ 算法/ ,/ 第/ 4/ ,/ 5/ 行为/ 静态/ 算法/ 判断/ 执行/ 部分/ ,/ 第/ 6/ ,/ 7/ 行为/ 动态/ 算法/ 判断/ 执行/ 部分/ ,/ 第/ 8/ 至/ 10/ 行为/ 算法/ 结束/ 条件/ ./ 算法/ 1/ ./ 时间/ 多/ 栈下推/ 网络/ 转化/ 为/ 多/ 栈下推/ 网络/ ./ 输入/ :/ 时间/ 多/ 栈下推/ 网络/ MT/ =/ (/ n/ ,/ Q/ ,/ q0/ ,/ Γ/ ,/ T/ ,/ Δ/ )/ 输出/ :/ 对应/ 的/ 多/ 栈下推/ 网络/ MM/ =/ (/ nM/ ,/ QM/ ,/ qM1/ ./ 初始化/ 工作/ 线程/ 列表/ worklist/ ←/ (/ q0/ ,/ {/ wi/ }/ i/ ∈/ [/ n/ ]/ ,/ v0/ )/ ,/ 其/ 2/ ./ MOVE/ (/ q0/ ,/ push/ (/ Rinit/ )/ ,/ q0/ )/ INTO/ Δ/ M/ // // 其中/ q0/ 为/ MM/ 的/ 初始/ 控制/ 状态/ 位/ ,/ 并且/ 把/ 迁移/ 关/ 3/ ./ ENUMAlgType/ {/ Algstatic/ ,/ Algdynamic/ }/ Atype/ ;/ // // 枚举/ 算法/ 类型/ Page114/ ./ IF/ (/ Atype/ =/ =/ Algstatic/ )/ // // 判定/ 选择/ 的/ 算法/ 类型/ ,/ 并/ 执行/ 该/ 算法/ 5/ ./ Algstat/ (/ )/ ;/ 6/ ./ ELSE/ (/ Atype/ =/ =/ Algdynamic/ )/ 7/ ./ Algdyna/ (/ )/ ;/ 8/ ./ FORALL/ Δ/ / Δ/ // // 设/ Δ/ 为/ 迁移/ 关系/ 集合/ Δ/ 里/ 的/ 任意/ 一个/ 迁移/ 关系/ ,/ 9/ ./ WHILE/ Δ/ ≠/ / DO10/ ./ REMOVE/ Δ/ FROM/ Δ/ 静态/ 转换/ 和/ 动态/ 转换/ 算法/ 分别/ 如/ 算法/ 2/ 和/ 算法/ 3/ 所示/ ,/ 两者/ 依据/ MT/ 中/ 不同/ 的/ 迁移/ 关系/ Δ/ 在/ MM/ 中/ 作出/ 相应/ 的/ 转换/ ,/ 将/ MM/ 中/ 相应/ 的/ 迁移/ 关系/ 压入/ 到/ 迁移/ 关系/ 集/ Δ/ M/ 中/ ./ 静态/ 转换/ 时/ 分为/ 栈内/ 迁移/ 转换/ 、/ 栈间/ 操作/ 以及/ 并发/ 迁移/ 转换/ 3/ 类/ ,/ 其中/ 栈内/ 迁移/ 转换/ 是/ 两个/ 模型/ 中栈/ 层间/ 的/ 一一对应/ 转换/ ,/ 如/ 算法/ 2/ 中/ 的/ 第/ 2/ 至/ 17/ 行/ ,/ 栈间/ 操作/ 为/ 上下文/ 切换/ 操作/ ,/ 如/ 算法/ 2/ 中/ 的/ 第/ 20/ 至/ 21/ 行/ ,/ 等同于/ MT/ 中/ 切换/ 操作/ ,/ 并发/ 迁移/ 转换/ 为/ 工作栈/ 集/ Work/ [/ n/ ]/ 内/ 同时/ 调用/ 栈内/ 迁移/ 转换/ ,/ 如/ 算法/ 2/ 中/ 的/ 第/ 22/ 至/ 24/ 行/ ,/ 动态/ 转换/ 同样/ 分栈/ 内/ 迁移/ 转换/ 、/ 栈间/ 操作/ 以及/ 并发/ 迁移/ 转换/ 3/ 类/ ,/ 其中/ 栈内/ 迁移/ 转换/ 只/ 对/ MM/ 模型/ 栈顶/ 及其/ 下/ 一层/ 栈/ 的/ 栈/ 内/ 字符/ 分析/ 讨论/ ,/ 如/ 算法/ 3/ 中/ 的/ 第/ 2/ 至/ 17/ 行/ ,/ 在/ 转换/ 过程/ 中需/ 增加/ 中间状态/ qtmp/ (/ )/ ,/ 如/ 状态/ 〈/ qtmp/ (/ Ridi/ 换/ 与/ 静态/ 算法/ 类似/ ./ 算法/ 2/ ./ 静态/ 算法/ ./ 输入/ :/ MT/ 的/ 迁移/ 关系/ 输出/ :/ MM/ 的/ 静态/ 迁移/ 关系/ 1/ ./ Algstat/ (/ )/ {/ 2/ ./ Alginstat/ (/ )/ {/ // // 栈内/ 迁移/ 转换/ 3/ ./ SWITCH/ (/ Δ/ )/ {/ 4/ ./ CASE/ Δ/ =/ Δ/ nop/ :/ // // 空/ 操作/ ,/ 对应/ MM/ 状态/ 和域/ 5.6/ ./ CASE/ Δ/ =/ Δ/ 7.8/ ./ CASE/ Δ/ =/ Δ/ =/ :/ // // 时间/ 重置/ 操作/ ,/ 对/ {/ Ri/ }/ 进行/ t/ ←/ 9.10/ ./ CASE/ Δ/ =/ Δ/ ├/ :/ // // 时间/ 流逝/ 操作/ ,/ 在/ 对/ {/ Ri/ }/ 中/ 11.12/ ./ CASE/ Δ/ =/ Δ/ pop/ :/ // // 出栈/ 操作/ ,/ 关键点/ 等于/ 13.14/ ./ CASE/ Δ/ =/ Δ/ push/ :/ // // 入栈/ 操作/ ,/ 关键点/ 等于/ 15.16/ ./ }/ 17/ ./ }/ 18/ ./ Algstatconcur/ (/ )/ {/ 19/ ./ SWITCH/ (/ Δ/ )/ {/ 20/ ./ CASE/ Δ/ =/ Δ/ inter/ :/ // // 栈间/ 操作/ ,/ 从/ i/ 号/ 工作栈/ 切/ 21.22/ ./ CASE/ Δ/ =/ Δ/ ‖/ :/ // // 并发/ 迁移/ ,/ 迁移/ 关系/ Δ/ M/ ‖/ 与/ 23.24/ ./ 25/ ./ }/ 26/ ./ }/ 27/ ./ }/ 算法/ 3/ ./ 动态/ 算法/ ./ 输入/ :/ MT/ 的/ 迁移/ 关系/ 输出/ :/ MM/ 的/ 动态/ 迁移/ 关系/ 1/ ./ Algdyna/ (/ )/ {/ 2/ ./ Algindyna/ (/ )/ {/ // // 栈内/ 迁移/ 转换/ 3/ ./ SWITCH/ (/ Δ/ )/ {/ 4/ ./ CASE/ Δ/ =/ Δ/ nop/ :/ // // 空/ 操作/ ,/ 对应/ MM/ 状态/ 和域/ 5.6/ ./ CASE/ Δ/ =/ Δ/ 7.8/ ./ CASE/ Δ/ =/ Δ/ =/ :/ // / 重置/ 操作/ ,/ 对/ {/ Ri/ }/ 进行/ t/ ←/ v/ (/ t/ )/ Page129/ ./ 10/ ./ CASE/ Δ/ =/ Δ/ ├/ :/ // / 时间/ 流逝/ 操作/ ,/ 在/ 对/ {/ Ri/ }/ 中/ 11.12/ ./ CASE/ Δ/ =/ Δ/ pop/ // // 出栈/ 操作/ ,/ 关键点/ 等于/ v/ (/ a/ )/ 13.14/ ./ CASE/ Δ/ =/ Δ/ push/ // // 入栈/ 操作/ ,/ 关键点/ 等于/ v/ (/ a/ )/ 15.16/ ./ }/ 17/ ./ }/ 18/ ./ Algdynaconcur/ (/ )/ {/ 19/ ./ SWITCH/ (/ Δ/ )/ {/ 20/ ./ CASE/ Δ/ =/ Δ/ inter/ :/ // // 栈间/ 操作/ ,/ 从/ i/ 号/ 工作栈/ 切/ 21.22/ ./ CASE/ Δ/ =/ Δ/ ‖/ :/ // // 并发/ 迁移/ ,/ 迁移/ 关系/ Δ/ M/ ‖/ 与/ Δ/ ‖/ 23.24/ ./ 25/ ./ }/ 26/ ./ }/ 27/ ./ }/ 上述/ 算法/ 是/ 可/ 终止/ 的/ ./ 设计/ 静态/ 转换/ 算法/ 时/ ,/ 首先/ 根据/ 静态/ 转换规则/ ,/ 将/ 算法/ 分为/ 栈内/ 迁移/ 转换/ Alginstat/ (/ )/ 和/ 并发/ 转换/ Algstatconcur/ (/ )/ 两/ 部分/ ,/ 其中/ 算法/ Alginstat/ (/ )/ 依据/ 不同/ 的/ 迁移/ 规则/ 调用/ 相应/ 的/ 执行/ 操作/ ,/ 算法/ Algstatconcur/ (/ )/ 包含/ 了/ 栈间/ 操作/ 和/ 并发/ 迁移/ ,/ 在/ 运行/ 并发/ 迁移/ 算法/ 时需/ 调用/ 算法/ Alginstat/ (/ )/ ./ 静态/ 转换/ 算法/ 的/ 时间/ 复杂度/ 与/ 栈/ 深度/ 、/ 栈/ 数量/ 、/ 算法/ 转换/ 时/ 的/ 系统/ 状态/ 集/ 、/ 格局/ 迁移/ 关系/ 集/ 以及/ 时钟/ 集等/ 元素/ 有关/ ,/ 在/ 最坏/ 情况/ 下/ ,/ 算法/ 时间/ 复杂度/ 与/ 项/ 元素/ 集合/ 以及/ 关键点/ 集合/ 的/ 笛卡尔/ 积/ 大小/ 呈/ 指数/ 关系/ ,/ 具体/ 可/ 表示/ 为/ O/ (/ (/ [/ n/ ]/ ×/ d/ )/ |/ Q/ |/ |/ Δ/ |/ |/ MT/ |/ 2Z/ ×/ key/ )/ ,/ 其中/ [/ n/ ]/ ×/ d/ 是/ 时间/ 多/ 栈下推/ 系统/ 中栈/ 的/ 数目/ 与/ 栈/ 深度/ 的/ 乘积/ ,/ |/ Q/ |/ 是/ 时间/ 多/ 栈下推/ 系统/ 状态/ 集/ 的/ 大小/ ,/ |/ Δ/ |/ 是/ 格局/ 迁移/ 关系/ 的/ 个数/ ,/ |/ MT/ |/ 是/ 时间/ 多/ 栈下推/ 系统/ 的/ 大小/ ,/ Z/ ×/ key/ 为项/ 元素/ 集合/ 与/ 关键点/ 集合/ 的/ 笛卡尔/ 积/ ./ 然而/ 在/ 实际/ 检验/ 过程/ 中/ ,/ 由于/ 一般/ 情况/ 下/ 转换/ 后/ 存在/ 不可/ 达/ 等价/ 状态/ ,/ 以及/ 因/ 某些/ 时刻/ 栈/ 并/ 不/ 包含/ 所有/ 项/ 元素/ 集合/ ,/ 存在/ 合并/ 状态/ ,/ 故其/ 时间/ 复杂度/ 小于/ O/ (/ (/ [/ n/ ]/ ×/ d/ )/ |/ Q/ |/ |/ Δ/ |/ |/ MT/ |/ 2Z/ ×/ key/ )/ ./ 动态/ 算法/ 设计/ 思路/ 与/ 静态/ 算法/ 类似/ ,/ 但/ 其/ 转换/ 时/ 只/ 对/ 栈顶/ 操作/ ,/ 与/ 栈/ 深度/ 无关/ ./ 因/ 动态/ 转换/ 只/ 关心/ 栈/ 顶层/ 及其/ 下/ 一层/ 域/ 状态/ 空间/ ,/ 故/ 等价/ 区域/ 空间/ 比/ 静态/ 转换/ 算法/ 缩减/ 很多/ ./ 假设/ 栈顶/ 项/ 元素/ 最大/ 集合/ 为/ Max/ (/ Ztop/ )/ ,/ 理论/ 上/ 最坏/ 情况/ 下/ 其/ 时间/ 复杂度/ 为/ O/ (/ [/ n/ ]/ |/ Q/ |/ |/ Δ/ |/ |/ MT/ |/ 2/ (/ Max/ (/ Ztop7TMPDN/ 的/ 上下文/ 限界/ 验证/ 对/ 并发程序/ 形式化/ 验证/ 时/ ,/ 若/ 每个/ 线程/ 建模/ 成/ 一个/ 有限/ 状态/ 系统/ ,/ 整个/ 程序/ 的/ 状态/ 空间/ 将/ 呈/ 指数/ 增长/ ,/ 其/ 可达性/ 判定/ 为/ PSPACE/ -/ hard/ ./ 若/ 建模/ 成/ 下推/ 系统/ 时/ ,/ 其/ 可达性/ 问题/ 也/ 不可判定/ ,/ 但/ 将/ 线程/ 间/ 的/ 上下文/ 切换/ 限定/ 在/ 有限/ 次数/ 内/ ,/ 使得/ 完备/ 性/ 、/ 精确性/ 、/ 覆盖率/ 、/ 以及/ 效率/ 达到/ 一个/ 很/ 好/ 的/ 平衡/ ./ 上下文/ 限界/ 使/ 递归/ 并发程序/ 的/ 可达性/ 成为/ 可/ 判定/ ,/ 并且/ 程序/ 中/ 的/ 大部分/ 并发/ 错误/ ,/ 如/ 数据/ 竞争/ 和/ 原子/ 性/ 违背/ ,/ 大部分/ 出现/ 在/ 前期/ 的/ 上下文/ 切换/ [/ 14/ ]/ ./ 利用/ TMPDN/ 对/ 实时/ 并发/ 递归/ 程序/ 建模/ ,/ 再/ 将/ TMPDN/ 转换/ 为/ MPDN/ 后/ ,/ 实时/ 并发/ 递归/ 程序/ 的/ 上下文/ 切换/ 限界/ 可达性/ 问题/ 可以/ 转换/ 为/ MPDN/ 的/ 限界/ 可达性/ 问题/ ,/ 之后/ 可/ 利用/ 限界/ 模型/ 检验/ 工具/ 如/ JMOPED/ ,/ CHESS/ [/ 17/ ]/ ,/ ESBMC/ [/ 18/ ]/ 等/ ,/ 对/ 转换/ 后/ 的/ Page13MPDN/ 进行/ 验证/ 分析/ ./ 为了/ 验证/ 与/ 分析/ 基于/ MPDN/ 的/ 并发/ 模型/ ,/ 主要/ 集中/ 在/ 对/ 栈/ 的/ 限定/ 上/ [/ 19/ -/ 20/ ]/ ,/ 通过/ 栈/ 限定/ 使/ 可达性/ 为/ 可/ 判定/ ,/ 诸如/ 上下文/ 限界/ 技术/ [/ 21/ ]/ ,/ 在/ 牺牲/ 少许/ 完备/ 性/ 的/ 情况/ 下/ ,/ 能/ 很/ 好/ 分析/ 栈/ 之间/ 的/ 交互/ 情况/ ./ 2012/ 年/ Abdulla/ 等/ 人/ [/ 22/ ]/ 给出/ 了/ 更/ 多/ 上下文/ 定义/ ,/ 提出/ 了/ 阶段/ 限界/ 方法/ ,/ 并用/ 实验/ 论证/ 了/ 方法/ 的/ 优越性/ ./ 2014/ 年/ Qian/ 等/ 人/ [/ 23/ ]/ 提出/ 了/ 将/ 进程/ 的/ 消息/ 队列/ 约束/ 为/ 良序/ 的/ 思想/ ,/ 使得/ 递归/ 队列/ 并发程序/ 的/ 可达性/ 成为/ 可/ 判定/ 问题/ ./ 在/ 使用/ TMPDN/ 描述/ 并发程序/ 时/ ,/ 将/ 程序/ 分为/ 进程/ P/ (/ process/ )/ 、/ 过程/ F/ (/ procedure/ )/ 及/ 语句/ (/ state/ -/ ment/ )/ 3/ 个/ 部分/ ./ 其中/ 进程/ P/ =/ 〈/ G/ ,/ F1/ …/ Fm/ 〉/ 由/ 全局变量/ 集/ G/ 和/ 过程/ Fi/ 组成/ ,/ 进程/ 有/ 一个/ 入口/ 主/ 过程/ main/ ,/ 过程/ F/ 由/ 参数/ 序列/ 、/ 局部变量/ 集/ 以及/ 语句/ 序列/ 组成/ ,/ 语句/ 包含/ 空语句/ (/ nos/ )/ 、/ 假设/ (/ assume/ )/ 、/ 断言/ (/ assert/ )/ 、/ 原子/ 语句/ (/ atomic/ )/ 等/ 语句/ ./ 并发程序/ CC/ =/ 〈/ S/ ,/ P1/ …/ Pn/ 〉/ 由/ 共享/ 变量/ 集/ S/ (/ sharedvariables/ )/ 和/ 进程/ 序列/ 组成/ ./ 每个/ 进程/ Pi/ 定义/ 一个/ 计数器/ pci/ ,/ 将/ 过程/ F/ 看成/ 一个/ 独立/ 的/ 单元/ ,/ 并/ 把/ F/ 中/ 的/ 每条/ 语句/ 放入/ 到/ 程序执行/ 序列/ 中/ ,/ 并/ 为/ 每条/ 语句/ 增加/ 判断/ 条件/ 以便/ 监视/ 语句/ 是否/ 执行/ ,/ 判断/ 条件/ 包含/ 进程/ 计数器/ pci/ 是否/ 正确/ 和/ 局部/ 布尔/ 变量/ Yn/ 的/ 取值/ ,/ 如果/ pci/ 正确/ 而/ Yn/ 返回/ 失败/ 标识/ false/ ,/ 则/ 表明/ 该/ 语句/ 未/ 执行/ ,/ 如果/ 除/ 当前/ 进程/ 计数器/ 外/ ,/ 其他/ 计数器/ 都/ 返回/ 错误/ ,/ 则/ 表明/ 其他/ 进程/ 未/ 被/ 执行/ ./ 由/ 以上/ 设定/ 可以/ 模拟/ 及/ 监视/ 程序/ 上下文/ 切换/ 操作/ ,/ 并/ 利于/ TMPDN/ 对/ 实时/ 递归/ 并发程序/ 的/ 建模/ ./ 8/ 实例/ 分析/ 本/ 节/ 给出/ 了/ 一个/ 具体/ 实例/ 分析/ ,/ 通过/ 文中/ 所/ 提出/ 的/ 静态/ 和/ 动态/ 转换方法/ ,/ 将/ TMPDN/ 模型/ 转换/ 为/ MDPN/ 模型/ ./ TMPDN/ 模型/ 如图/ 1/ 所示/ ,/ 即/ 时间/ 多/ 栈下推/ 系统/ MT/ =/ (/ n/ ,/ Q/ ,/ q0/ ,/ Γ/ ,/ T/ ,/ Δ/ )/ ,/ 其中/ 全局变量/ 为/ g/ ,/ 时钟/ 为/ t1/ ,/ 栈/ 字符/ 集合/ Γ/ =/ {/ a1/ ,/ b1/ ,/ ai/ ,/ bi/ ,/ ci/ ,/ aj/ ,/ bj/ ,/ cj/ }/ ./ 依据/ 优化/ 的/ 时钟/ 等价/ 技术/ ,/ 可/ 获得/ 时钟/ 关键点/ 集合/ key/ =/ {/ 0/ ,/ 2/ ,/ 6/ ,/ 10/ ,/ }/ ./ 8.1/ 静态/ 转换/ 由于/ 静态/ 转换/ 的/ 状态/ 空间/ 庞大/ ,/ 下文/ 将/ 通过/ 简化/ 状态/ 格局/ 迁移/ 的/ 描述/ ,/ 来/ 表达/ 静态/ 转换/ 的/ 清晰/ 思路/ ./ 为了/ 简化/ 描述/ 过程/ ,/ 对/ 时间/ 流逝/ 进行/ 单独/ 分析/ ,/ 而/ 在/ 其他/ 格局/ 迁移/ 分析/ 时暂/ 不/ 考虑/ 时间/ 流逝/ 的/ 情况/ ,/ 并且/ 也/ 没有/ 具体/ 描述/ 时钟/ 剩余/ 部分/ re/ (/ )/ 的/ 大小/ 关系/ ./ 图/ 7/ (/ a/ )/ 描述/ 入栈/ 操作/ Δ/ push/ 和/ 时间/ 重置/ Δ/ =/ 的/ 静态/ 转换/ ,/ 其中/ 格局/ R0/ 对应/ 图/ 1/ 所示/ 模型/ 的/ 格局/ C0/ ,/ 格局/ R0/ 包含/ 栈/ 1/ …/ i/ ,/ j/ …/ n/ 共/ n/ 个栈/ ,/ 其中/ 栈内/ 的/ 全局变量/ g/ 、/ 时钟/ t1/ 以及/ 栈/ 字符/ a1/ ,/ b1/ ,/ ai/ ,/ bi/ ,/ aj/ ,/ bj/ 对应/ 的/ 时钟/ 关键点/ 分别/ 为/ 0/ ,/ ,/ 2/ ,/ 2/ ,/ 6/ ,/ 2/ ,/ ,/ 6/ ./ 在/ MPDN/ 中/ 与/ TMPDN/ 的/ 迁移/ 关系/ Δ/ push/ 相对/ 的/ 格局/ 迁移/ 关系/ Δ/ Mpush/ 为/ push/ (/ 〈/ ci/ ,/ 2/ 〉/ )/ ‖/ push/ (/ 〈/ cj/ ,/ 2/ 〉/ )/ ,/ R0/ 经过/ Δ/ Mpush/ 迁移/ 至/ 格局/ R1/ ,/ 在/ R1/ 中/ 增加/ 了/ 项/ 元素/ 〈/ ci/ ,/ 2/ 〉/ 和/ 〈/ cj/ ,/ 2/ 〉/ ./ TMPDN/ 的/ 迁移/ 关系/ Δ/ =/ :/ t1/ ←/ [/ 6/ :/ 10/ )/ 表示/ 时钟/ t1/ 的/ 时钟/ 值/ 重置/ 为/ 7.5/ ∈/ [/ 6/ :/ 10/ )/ ,/ 与/ 之/ 对应/ MPDN/ 的/ 迁移/ 关系/ Δ/ M/ =/ 为/ t1/ ←/ 6/ 表示/ 将/ t1/ 赋值/ 为/ 6/ ,/ 因为/ 7.5/ 在/ 关键点/ [/ 6/ ,/ 10/ )/ 之间/ ,/ 所以/ 在/ 对/ t1/ 赋值/ 时/ 向下/ 取/ 关键点/ 6/ ,/ 此时/ t1/ 与/ g/ 取/ 关键点/ 剩余/ 部分/ 关系/ 由/ re/ (/ t1/ )/ >/ re/ (/ g/ )/ 转换/ 为/ re/ (/ t1/ )/ </ re/ (/ g/ )/ ,/ 其他/ 不/ 一一/ 描述/ ./ 图/ 7/ (/ b/ )/ 描述/ TMPDN/ 时间/ 流逝/ Δ/ ├/ 的/ 静态/ 转换/ ,/ 随着/ 时间/ 的/ 流逝/ ,/ R2/ 进入/ R21/ ,/ 即/ 时钟/ 值为/ 大于/ 关键点/ 的/ 区域/ ,/ 例如/ 〈/ ci/ ,/ >/ 2/ 〉/ 表示/ ci/ 时钟/ 值/ 大于/ 时间/ 关键点/ 2/ ,/ 小于/ 下/ 一个/ 时间/ 关键点/ 6/ ;/ 进入/ 此/ 状态/ 后/ ,/ 随/ 时间/ 流逝/ 循环/ ,/ 直到/ bj/ 时钟/ 值/ 到达/ 新/ 时间/ 关键点/ 10/ ,/ 进入/ R22/ ;/ 继续/ 随/ 时间/ 流逝/ ,/ 进入/ R23/ ,/ bj/ 时钟/ 值/ 大于/ 时间/ 关键点/ 10/ ,/ 变为/ ;/ 随/ 时间/ 流逝/ 循环/ ,/ 直到/ a1/ 时钟/ 值/ 到达/ 时间/ 关键点/ 6/ ,/ 进入/ R24/ ;/ 依次/ 类推/ ,/ 经过/ 时间/ 流逝/ 3.8/ 后/ 达到/ 状态/ R3/ ,/ 此刻/ t1/ ,/ g/ ,/ a1/ ,/ b1/ ,/ ai/ ,/ bi/ ,/ ci/ ,/ aj/ ,/ bj/ ,/ cj/ 的/ 关键点/ 分别/ 为/ ,/ 2/ ,/ 6/ ,/ 6/ ,/ ,/ 2/ ,/ 6/ ,/ ,/ ,/ 6/ ./ 图/ 7/ (/ c/ )/ 描述/ TMPDN/ 出栈/ 操作/ Δ/ pop/ 的/ 静态/ 转换/ ,/ 在/ MPDN/ 中/ 与/ 之/ 对应/ 迁移/ 关系/ Δ/ Mpop/ 为/ pop/ (/ 〈/ cj/ ,/ 6/ 〉/ )/ ,/ 将/ 项/ 元素/ 〈/ cj/ ,/ 6/ 〉/ 出栈/ ,/ 此时/ R3/ 经过/ Δ/ Mpop/ 迁移/ 至/ 格局/ R4/ ./ 8.2/ 动态/ 转换/ 动态/ 转换/ 的/ 操作/ 对象/ 为/ TMPDN/ 中栈/ 顶/ 及其/ 下/ 一层/ 的/ 栈/ 内/ 元素/ ,/ 同一/ 栈内项/ 元素/ 按照/ 对应/ 时钟/ 关键点/ 剩余/ 部分/ 的/ 大小/ 关系/ 依次/ 存储/ ./ 初始/ 域/ R1/ 与/ TMPDN/ 中/ 初始/ 格局/ C0/ 相对/ 应/ ,/ 其中/ R1/ 含有/ 基础/ 时钟/ 字符/ 项/ 〈/ ├/ ,/ 0/ 〉/ 、/ 标识/ 基础/ 时钟/ 字符/ 项/ 〈/ ├/ 项/ (/ 标识/ 全局变量/ 〈/ g/ 内/ 字符/ ai/ ,/ aj/ 的/ 标识/ 项/ 〈/ a/ ·/ 所示/ ./ (/ 1/ )/ 描述/ TMPDN/ 入栈/ 操作/ Δ/ push/ 的/ 动态/ 转换/ ./ 执行/ MPDN/ 中/ 与/ TMPDN/ 对应/ 的/ 入栈/ 迁移/ 关系/ Δ/ Mpush/ :/ push/ (/ 〈/ ci/ ,/ 2/ 〉/ )/ ‖/ push/ (/ 〈/ cj/ ,/ 2/ 〉/ )/ ,/ 获得/ 的/ 新域/ R2/ ,/ 首先/ 将/ R1/ 中/ 的/ 普通/ 项/ 〈/ ├/ ,/ 0/ 〉/ 、/ 〈/ bi/ ,/ 2/ 〉/ 、/ 〈/ bj/ ,/ 6/ 〉/ 、/ Page14/ 图/ 7TMPDN/ 静态/ 转换/ 后/ 的/ MPDN/ 〈/ g/ ,/ 0/ 〉/ 、/ 〈/ t1/ ,/ 〉/ 进行/ 标识/ ,/ 然后/ 将/ 普通/ 项/ 标识/ 后/ 的/ 标识/ 项/ 〈/ ├/ 基础/ 时钟/ 项/ 、/ 全局变量/ 和/ 全局/ 时钟/ 的/ 普通/ 项/ 〈/ ├/ ,/ 0/ 〉/ 、/ 〈/ g/ ,/ 0/ 〉/ 、/ 〈/ t1/ ,/ 〉/ 保存/ 至新域/ R2/ 中/ ,/ 最后/ 将/ 新入/ 栈项/ 〈/ ci/ ,/ 2/ 〉/ 、/ 〈/ cj/ ,/ 2/ 〉/ 保存/ 至新域/ R2/ ./ 具体/ 如图/ 9/ 所示/ ./ (/ 2/ )/ 描述/ TMPDN/ 中/ 时钟/ 重置/ 操作/ Δ/ =/ 的/ 动态/ 转换/ ./ 依照/ 关键点/ 转换规则/ ,/ 在/ MPDN/ 中将/ t1/ 赋值/ 为/ 6/ ,/ 对/ t1/ 赋值/ 时/ 只/ 将/ 栈/ 顶域/ R2/ 中/ t1/ 的/ 普通/ 项/ 赋值/ 为/ 6/ ,/ 如图/ 10/ 中/ R2/ 的/ 项/ 〈/ t1/ ,/ 6/ 〉/ 所示/ ./ (/ 3/ )/ 描述/ TMPDN/ 中/ 时间/ 流逝/ Δ/ ├/ 的/ 动态/ 转换/ ./ 在/ 时间/ 流逝/ 转换/ 时/ ,/ MPDN/ 栈内项/ 在/ 不同/ 时间/ 内/ 可能/ 处于/ 不同/ 关键点/ 区域/ 内/ ,/ 但/ 此处/ 只/ 考虑/ 满足/ 迁移/ 条件/ 时栈/ 内项/ 所处/ 的/ 关键点/ 区域/ ,/ 中间/ 过程/ 在/ 此处/ 不/ 进行/ 展开讨论/ ,/ 迁移/ 转换/ 时/ ,/ 基础/ 时钟/ 项/ 〈/ ├/ ,/ 0/ 〉/ 保持/ 不变/ ,/ 其/ 标识/ 项/ 〈/ ├/ 模型/ 中/ 的/ 时间/ 流逝/ ,/ 在/ 实例/ 中其/ 关键点/ 区域/ 为/ [/ 2/ :/ 6/ ]/ ./ 在/ 运行/ Δ/ M/ ├/ 迁移/ 后/ ,/ 之前/ 栈顶域/ 内/ 的/ 项/ 〈/ ├/ 〈/ b/ ·/ 〈/ ci/ ,/ 2/ 〉/ 、/ 〈/ cj/ ,/ 2/ 〉/ ,/ 更新/ 为项/ 〈/ ├/ 〈/ g/ ,/ 2/ 〉/ 、/ 〈/ g/ 图/ 11/ 所示/ ./ i/ ,/ 2/ 〉/ 、/ 〈/ b/ ·/ (/ 4/ )/ 描述/ TMPDN/ 中出/ 栈/ 操作/ Δ/ pop/ 的/ 动态/ 转换/ ./ 利用/ 组合/ 域/ 技术/ ,/ 将栈/ 顶域/ R2/ 及下/ 一层/ 域/ R1/ 更新/ 为域/ R3/ ,/ 如/ 文中/ 组合/ 域/ 所述/ ,/ 首先/ 将栈/ 顶域/ R2/ 中/ 的/ 非/ 出栈/ 的/ 普通/ 项/ 〈/ ├/ ,/ 0/ 〉/ 、/ 〈/ g/ ,/ 2/ 〉/ 、/ 〈/ t1/ ,/ 〉/ 、/ 〈/ ci/ ,/ 6/ 〉/ 以及/ 栈顶/ 下/ 一层/ 域/ R1/ 中/ 的/ 非/ 全局/ 时钟/ 字符/ 项/ 〈/ ├/ Page15/ 图/ 8MPDN/ 初始/ 域/ R1/ 图/ 9MPDN/ 入栈/ 迁移/ Δ/ Mpush/ 图/ 10MPDN/ 时钟/ 重置/ Δ/ M/ =/ 图/ 11MPDN/ 时间/ 流逝/ Δ/ M/ ├/ 图/ 12MPDN/ 出栈/ 迁移/ Δ/ Mpop/ 〈/ bi/ ,/ 2/ 〉/ 、/ 〈/ a/ ·/ 之后/ 组合/ 域/ 中/ 所有/ 项需/ 考虑/ 时间/ 流逝/ 的/ 情况/ ,/ 而/ 时间/ 流逝/ 的/ 时钟/ 值/ 可/ 参考/ 栈顶域/ R2/ 中项/ 〈/ ├/ 基础/ 时钟/ 项/ 〈/ ├/ ,/ 0/ 〉/ 增加/ 的/ 关键点/ ./ 最后/ 转换/ 后/ 的/ 结果/ 如图/ 12/ 所示/ ./ 9/ 总结/ 对/ 实时/ 并发/ 系统/ 形式化/ 分析/ 与/ 验证/ 一直/ 是/ 学界/ 的/ 研究/ 难点/ ./ 之前/ 诸多/ 学者/ 广泛/ 采用/ 时间/ 自动机/ 理论/ 来/ 分析/ 实时/ 并发程序/ ,/ 但/ 这种/ 方式/ 对/ 递归/ 程序/ 建模/ 非常/ 繁琐/ ./ 后来/ 研究者/ 提出/ 了/ 时间/ 下推/ 自动机/ 理论/ ,/ 降低/ 了/ 分析/ 实时/ 递归/ 程序/ 的/ 复杂度/ ,/ 但是/ 该/ 模型/ 很难/ 描述/ 实时/ 并发程序/ 中/ 的/ 线程/ 间/ 交互/ ./ 本文/ 将/ 时间/ 下推/ 自动机/ 模型/ 进行/ 了/ 扩展/ ,/ 提出/ 了/ 时间/ 多/ 栈下推/ 网络/ 来/ 形式化/ 验证/ 实时/ 系统/ 中/ 的/ 并发/ 递归/ 机制/ 及/ 线程/ 间/ 交互/ ,/ 为/ 实时/ 并发/ 系统/ 的/ 分析/ 验证/ 提供/ 了/ 一种/ 新/ 的/ 思路/ ./ 针对/ 下推/ 系统分析/ 并发程序/ 存在/ 效率/ 和/ 完备/ 性/ 难以/ 兼顾/ 的/ 问题/ ,/ 本文/ 采用/ 动态/ 转换方法/ ,/ 可较/ 好/ 的/ 对/ 实时/ 并发/ 递归/ 程序/ 的/ 线程/ 间/ 交互进行/ 分析/ 验证/ ./ 下/ 一步/ 工作/ ,/ 将/ 开发/ 验证/ 工具/ ,/ 实现/ TMPDN/ 到/ MPDN/ 的/ 自动/ 转换/ ,/ 从/ 模型/ 建立/ 到/ 验证/ 分析/ 自动化/ ./ 

