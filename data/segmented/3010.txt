Page1/ 可/ 避免/ 数据包/ 乱序/ 的/ 网络层/ 软/ 切换/ 方法/ 及其/ 性能/ 分析/ 舒童/ 1/ )/ ,/ 2/ )/ 刘敏/ 1/ )/ 李/ 忠诚/ 1/ )/ 1/ )/ (/ 中国科学院计算技术研究所/ 网络/ 技术/ 研究/ 中心/ 北京/ 100190/ )/ 2/ )/ (/ 中国科学院/ 研究生院/ 信息科学/ 与/ 工程学院/ 北京/ 100190/ )/ 摘要/ 随着/ 异构/ 无线网络/ 的/ 融合/ 和/ 全/ IP/ 网络/ 的/ 推广/ ,/ 网络层/ 软/ 切换/ 方法/ 不断/ 演进/ ,/ 用以/ 提高/ 垂直/ 切换/ 的/ 性能/ ./ 但是/ ,/ 现有/ 的/ 软/ 切换/ 方法/ 在/ 下行/ 垂直/ 切换/ 过程/ 中/ 会/ 造成/ 严重/ 的/ 数据包/ 乱序/ ./ 为此/ ,/ 文中/ 在/ 讨论/ 下行/ 垂直/ 切换/ 时/ 数据包/ 乱序/ 的/ 原因/ 之后/ ,/ 提出/ 了/ 一种/ 新型/ 网络层/ 软/ 切换/ 方法/ —/ —/ —/ SHORDER/ ./ 该/ 方法/ 根据/ 移动/ 终端/ 与其/ 家乡/ 代理/ 之间/ 的/ 交互/ 信令/ 对/ 终端/ 所收/ 数据包/ 进行/ 适当/ 的/ 缓存/ ,/ 能/ 有效/ 避免/ 移动/ 终端/ 因/ 下行/ 垂直/ 切换/ 接收/ 到/ 乱序/ 的/ 数据包/ ./ 该/ 方法/ 所/ 具有/ 的/ 网络层/ 独立性/ 使/ 其能/ 与/ 各种/ 传输层/ 协议/ 及其/ 改进/ 协议/ 相/ 兼容/ ./ 此外/ ,/ 文中/ 还/ 从/ 理论/ 上/ 定量/ 地/ 分析/ 了/ 所/ 提/ 方法/ 对/ TCP/ 应用/ 的/ 切换/ 时延/ 、/ 有效/ 吞吐量/ 及/ 拥塞/ 窗口/ 的/ 影响/ ,/ 并/ 与/ 现有/ 的/ 典型/ 网络层/ 软/ 切换/ 方法/ 进行/ 了/ 比较/ ./ 通过/ 比较/ ,/ 得出/ 了/ SHORDER/ 机制/ 的/ 适用/ 条件/ ,/ 并/ 基于/ 此/ ,/ 进一步/ 改进/ 了/ SHORDER/ 方法/ ./ 最后/ ,/ 在/ 原型/ 系统/ 上/ 的/ 实验/ 显示/ 出/ 了/ 所/ 提/ 机制/ 便于/ 部署/ 的/ 优点/ 以及/ 该/ 机制/ 在/ 其/ 适用/ 条件/ 下/ 的/ 良好/ 性能/ ./ 此外/ ,/ 实验/ 结果/ 还/ 显示/ 出/ 与/ 数值/ 分析/ 结果/ 的/ 一致性/ ./ 关键词/ 下行/ 软/ 切换/ ;/ 数据包/ 乱序/ ;/ TCP/ 吞吐量/ ;/ 快速/ 重传/ ;/ 异构/ 无线网络/ 1/ 引言/ 随着/ 无线通信/ 技术/ 的/ 迅猛发展/ ,/ 各种/ 无线通信/ 网络/ 突显出/ 自身/ 优势/ ./ 但是/ ,/ 目前/ 还/ 没有/ 一种/ 单独/ 的/ 网络/ 能够/ 满足/ 移动用户/ 对/ 覆盖/ 无缝/ 化/ 与/ 通信/ 宽带/ 化/ 的/ 双重/ 要求/ ./ 无线/ 广域网/ (/ WWAN/ )/ 以较/ 低/ 的/ 数据/ 传输率/ 可以/ 保证/ 移动/ 终端/ 任意/ 时刻/ 和/ 无处不在/ 的/ 连通性/ ./ 无线/ 局域网/ (/ WLAN/ )/ 以/ 低廉/ 的/ 价格/ 为/ 高密度/ 用户/ 提供/ 较/ 高/ 的/ 数据/ 传输率/ ,/ 但/ 只能/ 覆盖/ 较/ 小/ 的/ 范围/ ./ 由于/ 不同/ 无线网络/ 之间/ 的/ 互补性/ ,/ 4G/ 网络/ 将/ 这/ 两种/ 无线/ 技术/ 整合/ 起来/ ,/ 不仅/ 可以/ 更好/ 地/ 满足/ 移动用户/ 的/ 各种/ 需求/ ,/ 而且/ 能/ 给/ 服务提供商/ 带来/ 更大/ 的/ 经济/ 利益/ ./ 为了/ 实现/ 一个/ 真正/ 的/ 无缝/ 移动/ 环境/ ,/ 除/ 水平/ 切换/ (/ HHO/ )/ 外/ ,/ 垂直/ 切换/ (/ VHO/ )/ 已/ 成为/ 4G/ 网络/ 实现/ 的/ 主要/ 挑战/ ./ HHO/ 是/ 指/ 移动/ 终端/ 在/ 同构/ 网络/ (/ 基于/ 同种/ 链路层/ 技术/ 的/ 网络/ )/ 内/ 不同/ 接入点/ 之间/ 的/ 切换/ ,/ 而/ VHO/ 是/ 指/ 移动/ 终端/ 在/ 异构/ 网络/ (/ 基于/ 不同/ 链路层/ 技术/ 的/ 网络/ )/ 之间/ 的/ 切换/ ./ 从/ 无线/ 重叠/ 网络覆盖/ 的/ 角度/ ,/ VHO/ 又/ 分为/ 上行/ 垂直/ 切换/ (/ UVHO/ )/ 和/ 下行/ 垂直/ 切换/ (/ DVHO/ )/ ./ UVHO/ 是从/ 覆盖面积/ 小/ 的/ 无线网络/ 切换/ 到/ 覆盖面积/ 大/ 的/ 无线网络/ ,/ 如/ 从/ WLAN/ 切换/ 到/ 3G/ 网络/ ./ DVHO/ 则/ 是从/ 覆盖面积/ 大/ 的/ 无线网络/ 切换/ 到/ 覆盖面积/ 小/ 的/ 无线网络/ ,/ 如/ 从/ 3G/ 网络/ 切换/ 到/ WLAN/ [/ 1/ ]/ ./ 传统/ 的/ 切换/ 一般/ 为/ 硬/ 切换/ ,/ 即/ 移动/ 节点/ (/ MN/ )/ 释放/ 与/ 先前/ 接入点/ (/ AP/ )/ 或/ 基站/ (/ BS/ )/ 的/ 无线/ 链路/ 后/ ,/ 再/ 建立/ 起/ 与/ 新/ AP/ 或/ BS/ 的/ 无线/ 链路/ ./ MN/ 如果/ 使用/ 硬/ 切换/ ,/ 那么/ 它/ 在/ 任何/ 时候/ 只能/ 维护/ 与/ 一个/ AP/ 或/ BS/ 的/ 连接/ [/ 2/ ]/ ./ 由于/ 执行/ 硬/ 切换/ 的/ MN/ 先/ 停止/ 从/ 先前/ 网络/ 接收/ 数据包/ 再/ 立即/ 开始/ 等待/ 从/ 新/ 网络/ 接收/ 数据包/ ,/ 所以/ ,/ 有些/ 发/ 向/ 先前/ 网络/ 的/ 数据包/ 会/ 因尚/ 在/ 传输/ 途中/ 而/ 无法/ 被/ MN/ 接收/ ,/ 这些/ 数据包/ 只能/ 由/ 数据源/ 重新/ 发送/ [/ 3/ ]/ ./ 软/ 切换/ 与/ 硬/ 切换/ 不同/ ,/ 它/ 是/ 指/ MN/ 先/ 建立/ 起/ 与/ 新/ AP/ 或/ BS/ 的/ 无线/ 链路/ 之后/ ,/ 再/ 释放/ 与/ 先前/ AP/ 或/ BS/ 的/ 无线/ 链路/ ./ 执行/ 软/ 切换/ 的/ MN/ 在/ 重叠/ 切换/ 区域/ 可以/ 维护/ 与/ 两个/ 以上/ AP/ 或/ BS/ 的/ 连接/ [/ 2/ ]/ ./ MN/ 位于/ 双重/ 覆盖/ 区域/ 是/ 软/ 切换/ 实现/ 的/ 必要条件/ ./ 而/ DVHO/ 恰好/ 满足/ 这一/ 条件/ ./ 然而/ ,/ 软/ 切换/ 会/ 带来/ 数据包/ 的/ 乱序/ ./ 众所周知/ ,/ 数据包/ 乱序/ 会/ 降低/ 上层/ 应用/ 的/ 性能/ ./ Tandjaoui/ 等/ 人/ 讨论/ 了/ 乱序/ 数据包/ 到达/ MN/ 后/ 对/ TCP/ 和/ UDP/ 应用/ 所/ 造成/ 的/ 不良影响/ ./ 他们/ 认为/ 乱序/ 数据包/ 不仅/ 会/ 引起/ TCP/ 接收端/ 返回/ 重复/ 的/ ACK/ ,/ 使/ 发送/ 端/ 启用/ TCP/ 的/ 拥塞/ 控制算法/ ,/ 并/ 调用/ 数据包/ 重传/ 过程/ ,/ 而且/ 还会/ 要求/ 实时/ 业务/ 具备/ 更/ 多/ 的/ 缓冲区/ 和/ 更/ 复杂/ 的/ 机制/ 用于/ 数据流/ 的/ 正确处理/ [/ 4/ ]/ ./ 为了/ 避免/ VHO/ 过程/ 中/ 的/ 数据包/ 乱序/ ,/ 本文/ 提出/ 了/ 一种/ 网络层/ 的/ 软/ 切换/ 方法/ SHORDER/ ./ 它/ 能/ 以/ 很小/ 的/ 消息/ 开销/ 有效/ 地/ 防止/ MN/ 在/ VHO/ 时/ 接收/ 到/ 乱序/ 的/ 数据包/ ./ 与/ 现有/ 文献/ 相比/ ,/ 本文/ 的/ 主要/ 贡献/ 在于/ :/ 所/ 提出/ 的/ 可/ 避免/ 数据包/ 乱序/ 的/ 网络层/ 软/ 切换/ 方法/ 独立/ 于/ 传输层/ 协议/ ,/ 并/ 能/ 与/ 各种/ TCP/ 改进/ 协议/ 相/ 兼容/ ./ 本文/ 从/ 切换/ 时延/ 、/ 有效/ 吞吐量/ 及/ 拥塞/ 窗口/ 等/ 方面/ 分析/ 并/ 比较/ 了/ 所/ 提/ 方法/ 和/ 现有/ 的/ 典型/ 方法/ 对/ TCP/ 性能/ 的/ 影响/ ./ 原型/ 系统/ 实验/ 显示/ 出/ SHORDER/ 方法/ 因/ 无需/ 修改/ 数据/ 发送/ 端/ 而/ 在/ 实际/ 应用/ 方面/ 所/ 带来/ 的/ 优势/ ./ 同时/ ,/ 实验/ 结果/ 还/ 验证/ 了/ 本文/ 理论/ 分析/ 的/ 正确性/ ./ 本文/ 第/ 2/ 节/ 分析/ 国内外/ 的/ 相关/ 研究/ 现状/ ;/ 第/ 3/ 节/ 提出/ 一种/ 可/ 避免/ 数据包/ 乱序/ 的/ 网络层/ 软/ 切换/ 方法/ ,/ 并/ 阐述/ 它/ 的/ 有效性/ 和/ 前提条件/ ;/ 第/ 4/ 节/ 通过/ 与/ 现有/ 方法/ 相/ 比较/ ,/ 分析/ 所提/ 方法/ 对/ TCP/ 性能/ 的/ 影响/ 并/ 讨论/ 它/ 的/ 适用/ 条件/ ;/ 第/ 5/ 节/ 给出/ 实际/ 异构/ 无线/ 环境/ 中/ 的/ 实验/ 结果/ ;/ 第/ 6/ 节/ 根据/ 前文/ 的/ 对比/ 分析/ 和/ 实验/ 结果/ ,/ 进一步/ 改进/ 了/ SHORDER/ 方法/ ;/ 最后/ ,/ 第/ 7/ 节/ 总结/ 全文/ ./ 2/ 现有/ 技术/ 分析/ 国际/ 组织/ IETF/ (/ Internet/ 工程/ 任务/ 组/ )/ 提出/ 的/ 移动/ IPv6/ (/ MIPv6/ )/ 协议/ [/ 5/ ]/ ,/ 可以/ 支持/ 多模/ 移动/ 终端/ 的/ HHO/ 和/ VHO/ ./ 但是/ ,/ 当/ MN/ 切换/ 时/ ,/ 它/ 和/ 通信/ 节点/ (/ CN/ )/ 之间/ 数据包/ 会/ 发生/ 丢失/ ./ 由于/ MN/ 移动/ Page3/ 到/ WLAN/ 中时/ 一般/ 处于/ WWAN/ 的/ 覆盖范围/ ,/ 所以/ 软/ 切换/ 方法/ 可以/ 用于/ DVHO/ 来/ 避免/ 数据包/ 的/ 丢失/ ./ Chakravorty/ 等/ 人/ 改进/ 标准/ 的/ MIPv6/ 机制/ ,/ 提出/ 了/ 基于/ 终端/ 的/ 网络层/ 软/ 切换/ (/ CSH/ )/ 方法/ [/ 3/ ]/ ,/ 用以/ 提高/ VHO/ 的/ 性能/ ./ CSH/ 方法/ 在/ MN/ 的/ 网络层/ 增加/ 了/ 一个/ 软/ 切换/ 模块/ ./ 每当/ MN/ 触发/ VHO/ 后/ ,/ 此/ 模块/ 从/ MN/ 先前/ 的/ 网络接口/ 读取/ CN/ 发给/ 它/ 的/ 数据包/ ,/ 并/ 将/ 其/ 交给/ 上层/ 应用/ ./ 同时/ ,/ MN/ 向/ 家乡/ 代理/ (/ HA/ )/ 进行/ 注册/ ,/ 之后/ 从/ 新/ 网络接口/ 发送/ 数据包/ ./ 该/ 方案/ 在/ CN/ 无需/ 发送/ 重复/ 数据包/ 的/ 情况/ 下能/ 保证/ MN/ 在/ 切换/ 过程/ 中/ 同时/ 从/ 新旧/ 网络接口/ 接收/ 数据包/ ,/ 使得/ 到达/ 先前/ 网络接口/ 的/ 数据包/ 不会/ 被/ 丢弃/ ./ 但是/ ,/ CSH/ 方法/ 却/ 未/ 解决/ DVHO/ 过程/ 中/ 数据包/ 乱序/ 的/ 问题/ ./ Chakravorty/ 等/ 人/ 也/ 指出/ 其所提/ 方法/ 会/ 引起/ DVHO/ 时/ 的/ 数据包/ 乱序/ ,/ 导致/ TCP/ 发送/ 端因/ 接收/ 到/ MN/ 生成/ 的/ 重复/ ACK/ 而/ 进入/ 快/ 重传/ 模式/ ,/ 继而/ 使/ 拥塞/ 窗口/ 减半/ ./ DVHO/ 时/ CSH/ 方法/ 引发/ 数据包/ 乱序/ 的/ 原因/ 在于/ :/ 由于/ 从/ HA/ 经/ WLAN/ 到/ MN/ 的/ 时延/ 小于/ 经/ WWAN/ 的/ 时延/ ,/ 所以/ HA/ 更新/ 绑定/ 之后/ 向/ WLAN/ 转发/ 的/ 部分/ 数据包/ 会/ 先于/ 更新/ 绑定/ 之前/ 向/ WWAN/ 转发/ 的/ 部分/ 数据包/ 而/ 到达/ MN/ ,/ 导致/ MN/ 接收/ 到/ 乱序/ 的/ 数据包/ ./ 目前/ 解决/ 乱序/ 数据包/ 的/ 常见/ 办法/ 是/ 在/ 数据包/ 的/ 网络层/ 报头/ 中/ 加入/ 序列号/ ,/ 由/ 接收/ 方/ 自行/ 匹配/ 或/ 排序/ ./ 这样/ ,/ 网络层/ 每/ 收到/ 一个/ 数据包/ 就/ 需要/ 判断/ 其/ 排序/ 的/ 位置/ ,/ 以及/ 哪些/ 数据包/ 能够/ 提交/ 给/ 上层/ ./ 所以/ ,/ 该/ 方法/ 的/ 时间/ 复杂度/ 为/ O/ (/ nlogn/ )/ ,/ 其中/ n/ 为/ 乱序/ 数据包/ 个数/ ./ 文献/ [/ 4/ ]/ 针对/ 减少/ MN/ 水平/ 切换/ 时/ 的/ 乱序/ 包/ 问题/ ,/ 提出/ 了/ 相应/ 的/ 解决/ 方法/ ./ 当/ 新旧/ 外地/ 代理/ (/ FA/ )/ 与/ HA/ 间/ 的/ 路径/ 时延/ 相近/ 时/ ,/ 数据包/ 乱序/ 的/ 持续时间/ 近似/ 等于/ 新旧/ FA/ 间/ 的/ 链路/ 延时/ ,/ 但/ 这种/ 方法/ 不适/ 用于/ 异构/ 环境/ 下/ 的/ VHO/ 场景/ ,/ 因为/ 在/ 这种/ 情况/ 下/ 新旧/ FA/ 之间/ 的/ 时延/ 一般/ 都/ 很大/ ./ 因而/ ,/ 本文/ 针对/ VHO/ 场景/ 提出/ 了/ 线性/ 时间/ 复杂度/ 的/ 网络层/ 软/ 切换/ 方法/ ./ 还有/ 一些/ 研究者/ 也/ 关注/ 于/ 防止/ DVHO/ 中/ 乱序/ 数据包/ 对/ TCP/ 性能/ 的/ 负面影响/ ,/ 提出/ 了/ 各种/ 解决方案/ ./ 在/ 一些/ 机制/ 中/ ,/ 当/ 切换/ 即将/ 发生/ 时/ ,/ 接收端/ 会/ 通知/ 发送/ 端/ 其/ 接入/ 链路/ 的/ 改变/ ./ 在/ 文献/ [/ 6/ -/ 7/ ]/ 中/ ,/ Daniel/ 等/ 人/ 提出/ 了/ 一种/ 发送/ 端的/ 改进/ 算法/ ,/ 用于/ 抵制/ 从/ 低速/ 链路/ 向/ 高速/ 链路/ 切换/ 时/ 的/ 乱序/ 数据包/ ./ 所提/ 算法/ 根据/ 新/ 链路/ 的/ 带宽/ 和/ 延时/ ,/ 动态/ 改变/ 重复/ 确认/ 的/ 阈值/ ,/ 从而/ 避免/ 不必要/ 的/ 重传/ ./ 王能/ 中等/ 人/ 也/ 提出/ 了/ 一种/ 方法/ [/ 8/ ]/ :/ 当/ 发送/ 端/ 通过/ 新/ 链路/ 收到/ 来自/ 接收端/ 的/ 切换/ 通知/ 时/ ,/ 它/ 可以/ 获得/ 与/ 接收端/ 的/ 往返/ 时延/ (/ RTT/ )/ ,/ 继而/ 暂停/ 某些/ 超时/ 计时器/ 参数/ 并/ 冻结/ 数据传输/ ./ 然后/ ,/ 发送/ 端用/ 指数/ 加权/ 滑动/ 平均/ 方法/ 重新/ 调整/ 慢/ 启动/ 阈值/ ,/ 并/ 根据/ 快速/ 估计/ 的/ 可用/ 带宽/ 来/ 更新/ 拥塞/ 窗口/ 的/ 值/ ./ 然而/ ,/ 这些/ 机制/ 都/ 要求/ 修改/ TCP/ 发送/ 端的/ 协议/ ,/ 因而/ 不/ 易于/ 实际/ 部署/ ./ 所以/ ,/ 本文/ 提出/ 一种/ 无需/ 修改/ 发送/ 端的/ 解决方案/ ./ 另/ 一些/ 研究者/ 以/ 移动/ 接收端/ 为/ 核心/ 设计/ 松散/ 耦合/ 的/ 跨层/ 方案/ ./ 在/ 文献/ [/ 9/ ]/ 中/ ,/ Hansmann/ 等/ 人/ 提出/ 了/ Nodupack/ 方法/ ,/ 该/ 方法/ 在/ 满足/ 一定/ 条件/ 时会/ 抑制/ 切换/ 过程/ 中/ 重复/ 确认/ 的/ 传输/ ./ 其/ 条件/ 包括/ :/ (/ 1/ )/ 从/ 新/ 链路/ 上/ 接收/ 到/ 报文/ ;/ (/ 2/ )/ 传输/ 的/ 重复/ 确认/ 数量/ 小于/ 预定/ 阈值/ ;/ (/ 3/ )/ 新/ 链路/ 上/ 的/ 报文/ 是/ 按/ 顺序/ 接收/ 的/ ./ 在/ 文献/ [/ 10/ ]/ 中/ ,/ Rutagemwa/ 等/ 人/ 还/ 提出/ 了/ 一种/ 主动/ 的/ RTT/ 均衡/ 机制/ ,/ 通过/ 调整/ 所有/ 数据包/ 所/ 经历/ 的/ RTT/ ,/ 来/ 防止/ DVHO/ 过程/ 中/ 乱序/ 数据包/ 所/ 引起/ 的/ 伪/ 快速/ 重传/ ./ 但是/ ,/ 这些/ 方法/ 不适/ 用于/ TCP/ 报文/ 中有/ 时间/ 戳/ 选项/ 的/ 情况/ [/ 11/ ]/ ./ 时间/ 戳/ 选项/ 用于/ TCP/ 序列号/ 的/ 回卷/ 保护/ ,/ 是/ 很/ 重要/ 的/ 任选/ 要求/ ,/ 现已/ 实现/ 在/ 各种/ Linux/ 内核/ 版本/ 中/ ./ 在/ 本文/ 中/ ,/ 所/ 提出/ 的/ 可/ 避免/ 数据包/ 乱序/ 的/ 网络层/ 软/ 切换/ 方法/ 也/ 是/ 以/ 移动/ 接收端/ 为/ 核心/ 的/ ,/ 但是/ 它/ 将/ 独立/ 于/ 传输层/ ,/ 并/ 与/ TCP/ 时间/ 戳/ 选项/ 相/ 兼容/ ./ 3/ 可/ 避免/ 数据包/ 乱序/ 的/ 网络层/ 软/ 切换/ 方法/ 为了/ 解决/ DVHO/ 时/ 的/ 数据包/ 乱序/ 问题/ ,/ 本文/ 以/ 移动/ 终端/ 进行/ 下行/ 垂直/ 切换/ 时/ WWAN/ 本身/ 不/ 产生/ 乱序/ 数据包/ 为/ 前提/ ,/ 改进/ CSH/ 方法/ ,/ 提出/ 了/ 一种/ 新型/ 网络层/ 软/ 切换/ 方法/ —/ —/ —/ SHORDER/ 方法/ ./ 本节/ 将/ 描述/ SHORDER/ 方法/ 的/ 详细/ 步骤/ ,/ 并/ 讨论/ 该/ 方法/ 的/ 性能/ 及其/ 必要条件/ ./ 3.1/ SHORDER/ 方法/ SHORDER/ 方法/ 的/ 核心思想/ 是/ ,/ 一方面/ ,/ 在/ DVHO/ 开始/ 后/ 的/ 一段时间/ 内/ MN/ 和/ HA/ 需要/ 维护/ MN/ 先前/ CoA/ 与/ HA/ 之间/ 的/ 隧道/ ,/ 以/ 保证/ 那些/ 双/ IPv6/ 报头/ 的/ 数据包/ 能/ 被/ 正确/ 解析/ ,/ 从而/ 正常/ 地被/ 接收/ 或/ 转发/ ./ 另一方面/ ,/ 当/ DVHO/ 被/ 触发/ 后/ ,/ MN/ 的/ 网络层/ 需要/ 把/ 从/ 新/ 网络/ 接收/ 的/ 数据包/ 放入/ 缓存/ 队列/ ,/ 暂/ 不/ 提交/ 上层/ ./ 当/ 它/ 把/ HA/ 经/ 先前/ 网络/ 向/ 其/ 转发/ 的/ 数据包/ 全部/ 接收/ 后/ ,/ 才/ 把/ 缓存/ 的/ 数据包/ 按/ 接收/ 顺序/ 提交/ 上层/ ,/ 并且/ 不再/ 缓存/ 从/ 新/ 网络/ 接收/ 的/ 数据包/ ,/ 从而/ 使/ MN/ 的/ 上层/ 无法/ 感知/ 到/ 因/ 切换/ 而/ 产生/ 的/ 数据/ Page4/ 包/ 乱序/ ./ 下面/ 将/ 具体/ 描述/ SHORDER/ 方法/ 的/ 详细/ 步骤/ ,/ 如图/ 1/ 所示/ ./ t1/ :/ 当/ DVHO/ 被/ 触发/ 后/ ,/ MN/ 立即/ 建立/ 一条/ 从/ 新/ CoA/ 到/ HA/ 的/ IPv6/ -/ in/ -/ IPv6/ 隧道/ 接口/ ,/ 并/ 从/ 新/ 网络接口/ 向/ HA/ 发送/ 第一/ 绑定/ 更新/ (/ BU/ )/ 消息/ ,/ 其中/ 的/ 新增/ 标志/ 位/ S/ 被/ 置/ 为/ 1/ ./ 此后/ ,/ MN/ 仍/ 保留/ 着/ 从/ 先前/ CoA/ 到/ HA/ 的/ IPv6/ -/ in/ -/ IPv6/ 隧道/ 接口/ ,/ 并/ 继续/ 通过/ 先前/ 隧道/ 向/ CN/ 发送/ 数据包/ ./ 另外/ ,/ MN/ 创建/ 一个/ 先进先出/ (/ FIFO/ )/ 的/ 缓存/ 队列/ ,/ 若/ 从/ 新/ 网络/ 接收/ 到/ 来自/ CN/ 的/ 数据包/ ,/ 则/ 将/ 其/ 依次/ 放入/ 此/ 缓存/ 队列/ ,/ 暂/ 不/ 提交/ 上层/ ./ t2/ :/ HA/ 接收/ 到/ 标志/ 位/ S/ 为/ 1/ 的/ 第一/ BU/ 消息/ 后/ ,/ 它/ 立即/ 更新/ MN/ 对应/ 的/ 绑定/ 缓存/ 表项/ ,/ 建立/ 一条/ 从/ HA/ 到/ MN/ 新/ CoA/ 的/ IPv6/ -/ in/ -/ IPv6/ 隧道/ 接口/ ,/ 并/ 修改/ 到/ MN/ 家乡/ 地址/ (/ HoA/ )/ 的/ 路由/ ,/ 使得/ 再/ 截获/ 发向/ MN/ 的/ 数据包/ 时/ ,/ 通过/ 新/ 隧道/ 将/ 其/ 转发给/ MN/ ./ 接下来/ ,/ HA/ 向/ MN/ 的/ 新/ CoA/ 和/ 先前/ CoA/ 同时/ 发送/ 同/ 序列号/ 的/ 第一/ 绑定/ 确认/ (/ BA/ )/ 消息/ ,/ 通知/ MN/ 绑定/ 更新/ 成功/ ,/ 其中/ 的/ 新增/ 标志/ 位/ S/ 均/ 置/ 为/ 1/ ./ 此后/ ,/ HA/ 在/ 一段/ 足够/ 长/ 的/ 时间/ 内/ 仍/ 保留/ 到/ MN/ 先前/ CoA/ 的/ IPv6/ -/ in/ -/ IPv6/ 隧道/ 接口/ ./ t3/ :/ 若经/ 新/ 网络/ 的/ 路径/ 时延/ 低于/ 经/ 先前/ 网络/ 的/ 路径/ 时延/ ,/ 则/ 经新/ 网络/ 的/ 第一/ BA/ 消息/ 会/ 先于/ 经/ 先前/ 网络/ 的/ 第一/ 联播/ BA/ 消息/ 而/ 到达/ MN/ ./ 当/ MN/ 从/ 新/ 网络接口/ 接收/ 到/ 先/ 返回/ 的/ 第一/ BA/ 消息/ 时/ ,/ 若/ 消息/ 指示/ 绑定/ 更新/ 成功/ ,/ 则/ MN/ 修改/ 路由/ ,/ 使/ 数据包/ 从/ 新/ 隧道/ 发出/ ,/ 并/ 以/ 先前/ 网络接口/ 上/ 的/ CoA/ 为/ 源地址/ 经/ 先前/ 网络/ 向/ HA/ 发送/ 第二/ BU/ 消息/ ,/ 其中/ 的/ 标志/ 位/ S/ 置/ 为/ 0/ ./ t4/ :/ 当/ MN/ 接收/ 到/ 返回/ 的/ 另/ 一个/ 第一/ BA/ 消息/ 时/ ,/ 它/ 删除/ 从/ 先前/ CoA/ 到/ HA/ 的/ IPv6/ -/ in/ -/ IPv6/ 隧道/ 接口/ ,/ 并/ 判断/ 缓存/ 队列/ 是否/ 为空/ ./ 如果/ 否/ ,/ 则/ 按/ FIFO/ 原则/ 把/ 缓存/ 的/ 数据包/ 提交/ 上层/ ,/ 销毁/ 该/ 缓存/ 队列/ ,/ 之后/ 不再/ 缓存/ 从/ 新/ 网络接口/ 接收/ 到/ 的/ 数据包/ ,/ 而是/ 将/ 其/ 直接/ 提交/ 给/ 上层/ ./ t5/ :/ HA/ 接收/ 到/ 标志/ 位/ S/ 为/ 0/ 的/ 第二/ BU/ 消息/ 后/ ,/ 删除/ 到/ MN/ 先前/ CoA/ 的/ IPv6/ -/ in/ -/ IPv6/ 隧道/ 接口/ ,/ 并/ 向/ MN/ 的/ 先前/ CoA/ 发送/ 第二/ BA/ 消息/ ,/ 其中/ 的/ 标志/ 位/ S/ 置/ 为/ 0/ ./ t6/ :/ MN/ 接收/ 到/ 第二/ BA/ 消息/ ,/ DVHO/ 完成/ ./ 注意/ ,/ 若/ MN/ 从/ 先前/ 网络接口/ 接收/ 到/ 先/ 返回/ 的/ 第一/ BA/ 消息/ ,/ 则/ 说明/ 从/ HA/ 经新/ 网络/ 到/ MN/ 的/ 时延/ 大于/ 经/ 先前/ 网络/ 的/ 时延/ ,/ 不会/ 发生/ 数据包/ 的/ 乱序/ ./ 此时/ ,/ MN/ 不必/ 再/ 发送/ 第二/ BU/ 消息/ ;/ 而/ HA/ 在/ 等待/ 一段/ 足够/ 长/ 的/ 时间/ 后/ ,/ 直接/ 删除/ 到/ MN/ 先前/ CoA/ 的/ IPv6/ -/ in/ -/ IPv6/ 隧道/ 接口/ 即可/ ./ SHORDER/ 方法/ 支持/ MN/ 发生/ 连续/ 的/ 切换/ ./ 所谓/ 连续/ 切换/ ,/ 是/ 指/ 在/ t4/ 时刻/ 前/ ,/ MN/ 又/ 切换/ 到/ 另/ 一个/ 新/ 的/ 网络/ ,/ 并/ 接收/ 到/ 该/ 网络/ 的/ 数据包/ ./ 在/ 这种/ 情况/ 下/ ,/ 后续/ 切换/ 仍/ 可/ 使用/ 相同/ 的/ 切换/ 步骤/ ./ 但/ 不同/ 的/ 是/ ,/ MN/ 要/ 为/ 后续/ 的/ 每次/ 切换/ 另外/ 创建/ 新/ 的/ 缓存/ 队列/ ,/ 并且/ 在/ 需要/ 提交/ 此/ 缓存/ 队列/ 中/ 的/ 数据包/ 时/ ,/ 判断/ 之前/ 切换/ 所建/ 的/ 缓存/ 队列/ 是否/ 存在/ ./ 若/ 存在/ ,/ 则/ 将/ 这些/ 数据包/ 依次/ 放入/ 其中/ 最近/ 一次/ 切换/ 所建/ 的/ 缓存/ 队列/ 里/ ./ 3.2/ 性能/ 分析/ 本节/ 将/ 证明/ SHORDER/ 方法/ 能/ 有效/ 地/ 消除/ DVHO/ 过程/ 中/ 的/ 数据包/ 乱序/ ,/ 并/ 从/ 时间/ 复杂度/ 和/ 时延/ 开销/ 两个/ 方面/ 分析/ 该/ 方法/ 的/ 性能/ ./ 这里/ 假设/ 当/ MN/ 和/ CN/ 之间/ 的/ 路径/ 不/ 改变/ 时/ ,/ MN/ 不会/ 接收/ 到/ 乱序/ 的/ 数据包/ ./ 该/ 假设/ 的/ 有效性/ 将/ 在/ 3.3/ 节/ 加以/ 说明/ ./ 基于/ 这一/ 假设/ ,/ 有/ 如下/ 定理/ ./ 定理/ 1/ ./ 如果/ 从/ CN/ 经/ HA/ 到/ MN/ 的/ 新旧/ 路径/ 上/ 均/ 不/ 发生/ 数据包/ 乱序/ ,/ 那么/ MN/ 用/ SHORDER/ 方法/ 进行/ VHO/ 时/ MN/ 的/ 传输层/ 不会/ 接收/ 到/ 乱序/ 的/ 数据包/ ./ 证明/ ./ 用/ Dp/ 和/ Dn/ 分别/ 表示/ 从/ HA/ 到/ MN/ 先前/ CoA/ 和/ 新/ CoA/ 的/ 路径/ 时延/ ./ 若/ Dp/ / Dn/ ,/ 则/ 路径/ 的/ 改变/ 不会/ 引起/ 数据包/ 的/ 乱序/ ./ 考虑/ Dp/ >/ Dn/ 的/ 情况/ ./ 令发/ 向/ MN/ 的/ 数据包/ 序列/ {/ p1/ ,/ p2/ ,/ …/ ,/ pm/ ,/ …/ ,/ pn/ }/ 于/ 时间/ 序列/ {/ t1/ ,/ t2/ ,/ …/ ,/ tm/ ,/ …/ ,/ tn/ }/ 到达/ HA/ ,/ 其中/ t1/ </ t2/ </ …/ </ tm/ </ …/ </ tn/ ;/ 且/ HA/ 于/ th/ 时刻/ 接收/ 到/ BU/ 并/ 更新/ 了/ MN/ 的/ 绑定/ 注册/ ./ 不失/ 一般性/ ,/ 假设/ tm/ </ th/ </ tm/ +/ 1/ ,/ 因此/ ,/ 数据包/ 序列/ {/ p1/ ,/ p2/ ,/ …/ ,/ pm/ ,/ pm/ +/ 1/ ,/ …/ ,/ pn/ }/ 于/ 时间/ 序列/ {/ t1/ +/ Dp/ ,/ t2/ +/ Dp/ ,/ …/ ,/ tm/ +/ Dp/ ,/ tm/ +/ 1/ +/ Dn/ ,/ …/ ,/ tn/ +/ Dn/ }/ 到达/ MN/ ./ 如果/ ti/ +/ Dn/ </ th/ +/ Dp/ (/ m/ +/ 1/ / i/ / n/ )/ ,/ 那么/ 在/ SHORDER/ 方法/ 中/ ,/ Page5/ 由于/ MN/ 在/ th/ +/ Dp/ 时刻/ 才/ 接收/ 到/ 第一/ BA/ 的/ 第二个/ 副本/ ,/ 所以/ 发向/ MN/ 新/ CoA/ 的/ 数据包/ pi/ 会/ 按/ 顺序/ 地被/ 暂时/ 缓存/ 在/ MN/ 的/ 网络层/ ./ 也就是说/ ,/ 数据包/ 序列/ {/ p1/ ,/ p2/ ,/ …/ ,/ pm/ ,/ pm/ +/ 1/ ,/ …/ ,/ pn/ }/ 是/ 在/ 时间/ 序列/ T/ =/ {/ t1/ +/ Dp/ ,/ t2/ +/ Dp/ ,/ …/ ,/ tm/ +/ Dp/ ,/ max/ (/ tm/ +/ 1/ +/ Dn/ ,/ th/ +/ Dp/ )/ ,/ …/ ,/ max/ (/ tn/ +/ Dn/ ,/ th/ +/ Dp/ )/ }/ 时/ 被/ 提交/ 给/ MN/ 的/ 传输层/ 的/ ./ 而/ 这个/ 时间/ 序列/ T/ 是/ 单调/ 增的/ ,/ 即/ MN/ 的/ 传输层/ 接收/ 到/ 的/ 数据包/ 与/ CN/ 发送/ 数据包/ 的/ 原始/ 顺序/ 相同/ ./ 另外/ ,/ SHORDER/ 方法/ 在/ 解决/ DVHO/ 所/ 带来/ 的/ 乱序/ 数据包/ 方面/ 具有/ 良好/ 的/ 性能/ ./ 这/ 不仅/ 体现/ 在/ 它/ 能/ 避免/ DVHO/ 过程/ 中/ 的/ 数据包/ 乱序/ 上/ ,/ 而且/ 表现/ 在/ 它/ 具有/ 很/ 低/ 的/ 时间/ 复杂度/ 和/ 极短/ 的/ 冗余/ 时延/ 上/ ./ SHORDER/ 方法/ 排序/ 数据包/ 的/ 时间/ 复杂度/ 很/ 低/ ./ 由于/ SHORDER/ 方法/ 把/ 第一/ BA/ 的/ 第二/ 副本/ 到达/ MN/ 作为/ MN/ 已/ 收到/ 来自/ 先前/ 网络/ 所有/ 数据包/ 的/ 重要/ 标志/ ,/ 所以/ 使用/ FIFO/ 队列/ 就/ 可以/ 从/ DVHO/ 引发/ 的/ 乱序/ 数据包/ 中/ 恢复/ 出/ 原始/ 的/ 数据包/ 序列/ ,/ 因而/ ,/ SHORDER/ 方法/ 把/ 数据包/ 整序/ 的/ 时间/ 复杂度/ 降/ 为了/ O/ (/ n/ )/ ./ 随着/ 网络应用/ 流量/ 和/ 异构/ 网络/ 链路/ 时延/ 差/ 的/ 增大/ ,/ DVHO/ 所/ 产生/ 的/ 乱序/ 数据包/ 数目/ 会/ 大幅度/ 增加/ ,/ 而/ SHORDER/ 方法/ 对/ 大量/ 乱序/ 数据包/ 的/ 快速/ 整序/ 能力/ 将/ 表现/ 得/ 更为/ 明显/ ./ 并且/ ,/ 在/ SHORDER/ 方法/ 中/ ,/ 数据包/ 因/ 缓存/ 而/ 被/ 滞后/ 的/ 时延/ 接近/ 于/ 保证/ 数据包/ 顺序/ 接收/ 的/ 最/ 短时/ 延/ ./ 具体来说/ ,/ MN/ 的/ 传输层/ 收到/ 经新/ 网络/ 传输/ 且/ 被/ 缓存/ 的/ 数据包/ 的/ 时间/ 与/ 收到/ 经/ 先前/ 网络/ 发来/ 的/ 最后/ 一个/ 数据包/ 的/ 时间/ 之差/ 是/ 一个/ 从/ 0/ 到/ 数据包/ 发送/ 间隔/ 的/ 均匀分布/ 的/ 随机变量/ ./ 也就是说/ ,/ 从/ 统计/ 意义/ 上/ 讲/ ,/ SHORDER/ 方法/ 所/ 引入/ 的/ 不必要/ 的/ 平均/ 时延/ 是/ 平均/ 数据包/ 发送/ 间隔/ 的/ 一半/ ./ 所以/ ,/ SHORDER/ 方法/ 缓存数据/ 包所/ 带来/ 的/ 时延/ 不会/ 影响/ 上层/ 应用/ 的/ 性能/ ./ 注意/ ,/ 虽然/ SHORDER/ 方法/ 在/ 切换/ 时/ 需要/ MN/ 对/ 数据包/ 进行/ 缓存/ ,/ 但是/ ,/ 切换/ 频率/ 与/ 缓存/ 大小/ 并/ 没有/ 直接/ 的/ 关系/ ./ 为了/ 便于/ 表述/ ,/ 令/ MN/ 先前/ 的/ 网络/ 为/ N0/ ,/ 新/ 网络/ 为/ N1/ ,/ 而后/ MN/ 在/ t2/ +/ T2/ ,/ t2/ +/ T3/ ,/ …/ 时刻/ 依次/ 切换/ 到/ 新/ 网络/ N2/ ,/ N3/ ,/ …/ ;/ 假设/ 从/ HA/ 经/ 网络/ Ni/ 到/ MN/ 的/ 时延/ 和/ 带宽/ 分别/ 为/ Di/ 和/ Bi/ (/ i/ =/ 0/ ,/ 1/ ,/ …/ )/ ./ 若经/ 网络/ N2/ 的/ 数据包/ 在/ t4/ 时刻/ 后/ 到达/ MN/ ,/ 则/ MN/ 已/ 把/ 来自/ 网络/ N1/ 的/ 数据包/ 提交/ 给/ 上层/ ,/ 并/ 销毁/ 了/ 缓存/ 这些/ 数据包/ 的/ 队列/ Q1/ ./ 所以/ ,/ 后续/ 切换/ 不会/ 影响/ 本次/ 切换/ 的/ 缓存/ 大小/ ,/ 即为/ B1/ (/ D0/ -/ D1/ )/ ./ 如果/ 增大/ 切换/ 频率/ ,/ 使得/ 在/ t4/ 时刻/ 前/ MN/ 收到/ 了/ 来自/ 网络/ N2/ ,/ N3/ ,/ …/ ,/ Nr/ 的/ 数据包/ ,/ 那么/ MN/ 需要/ 分/ i/ =/ 2Bimin/ {/ Ti/ +/ 1/ -/ Ti/ ,/ max/ {/ D0/ -/ Di/ -/ Ti/ ,/ 0/ }/ }/ +/ 别为/ 每个/ 新/ 网络/ 分配/ 一个/ 缓存/ 队列/ Qi/ ./ 在/ 这种/ 情况/ 下/ ,/ 本次/ 切换/ 的/ 缓存/ 大小/ 是/ 指/ 在/ t4/ 时刻/ 所有/ 缓存/ 队列/ 的/ 长度/ 之/ 和/ ,/ 为/ B1min/ {/ D0/ -/ D1/ ,/ T2/ }/ +/ ∑/ r/ -/ 1Br/ (/ D0/ -/ Dr/ -/ Tr/ )/ / B1T2/ +/ ∑/ r/ -/ 1BjT2/ +/ ∑/ r/ -/ 1Br/ (/ D0/ -/ Dr/ -/ Tr/ )/ ,/ (/ j/ =/ argmax1/ / i/ / rBi/ )/ =/ Br/ (/ D0/ -/ Dr/ -/ Tr/ )/ +/ BjTr/ 所以/ ,/ 缓存/ 的/ 大小/ 不会/ 随/ 切换/ 频率/ 的/ 增加/ 而/ 增大/ ./ 3.3/ 前提/ 假设/ 的/ 适用范围/ 由于/ 路由器/ 的/ 并行处理/ ,/ 数据流/ 在/ 多路径/ 上/ 的/ 传输/ ,/ 以及/ 无线/ 链路/ 协议/ 的/ 重传/ 机制/ ,/ 使得/ 网络/ 有/ 可能/ 会/ 零星/ 地/ 颠倒/ 一条/ 数据流/ 中/ 几个/ 数据包/ 之间/ 的/ 顺序/ ./ 但是/ ,/ 当前/ 的/ 许多/ 研究/ 都/ 指出/ 当/ 传输/ 路径/ 固定/ 时/ 在/ 绝大多数/ 的/ 情况/ 下/ 实际/ 网络/ 中是/ 不/ 发生/ 数据包/ 乱序/ 的/ ./ 也就是说/ ,/ 本文/ 的/ 假设/ 在/ 大多数/ 场景/ 下/ 都/ 成立/ ./ 从表/ 1/ 中/ 网络/ 内乱/ 序/ 数据包/ 的/ 测量/ 结果/ [/ 12/ ]/ 可以/ 看到/ ,/ 有线网/ 上/ 很少/ 发生/ 数据包/ 的/ 乱序/ ./ 文献/ [/ 13/ ]/ 中/ 所有/ 固定/ 比特率/ UDP/ 流/ 的/ 实验/ 分析/ 显示/ ,/ 在/ 所测/ 的/ CDMA2000/ 网络/ 中/ 没有/ 乱序/ 数据包/ ./ 我们/ 在/ CDMA/ 和/ GPRS/ 公网/ 中/ 对/ 数据包/ 乱序/ 的/ 测试/ 结果/ (/ 参见/ 表/ 7/ )/ 也/ 表明/ 数据包/ 出现/ 乱序/ 的/ 概率/ 很小/ ./ 此外/ ,/ IEEE802/ ./ 11/ 的/ MAC/ 层/ 协议/ 也/ 不会/ 有意/ 地/ 打乱/ MAC/ 服务/ 数据/ 单元/ 的/ 顺序/ ./ 实际上/ ,/ 目前/ 已有/ 许多/ 避免/ 网络/ 中/ 数据包/ 乱序/ 的/ 有效/ 方法/ ./ 在/ 文献/ [/ 14/ ]/ 中/ ,/ 3GPP/ 规定/ 了/ 在/ WCDMA/ 环境/ 中/ 保证/ 数据包/ 顺序/ 传输/ 的/ 方法/ ./ IEEE802/ ./ 11/ 规范/ 也/ 为/ 不/ 容忍/ 乱序/ 的/ 上层/ 协议/ 定义/ 了/ 可选/ 的/ 严格/ 依序/ 服务/ 等级/ [/ 15/ ]/ ./ 4/ 网络层/ 软/ 切换/ 对/ TCP/ 性能/ 的/ 影响/ TCP/ 应用/ 在/ 当今/ 的/ 网络应用/ 中/ 占据/ 着/ 绝对/ 的/ Page6/ 统治/ 地位/ ,/ 所以/ 本文/ 将/ 从/ 理论/ 上/ 分析/ 网络层/ 软/ 切换/ 方法/ 对/ TCP/ 应用/ 性能/ 的/ 影响/ ./ 本节/ 集中/ 探讨/ CSH/ 方法/ 和/ SHORDER/ 方法/ 对/ TCP/ 应用/ 的/ 切换/ 时延/ 、/ 切换/ 过程/ 中/ 有效/ 吞吐量/ 和/ 切换/ 后/ 拥塞/ 窗口/ 的/ 影响/ 以及/ 两种/ 方法/ 各自/ 的/ 适用/ 条件/ ./ 4.1/ TCP/ 应用/ 的/ 切换/ 时延/ 和/ 切换/ 过程/ 中/ 的/ 有效/ 吞吐量/ 为了/ 下文/ 表述/ 的/ 简洁/ ,/ 令/ CN/ 与/ HA/ 之间/ 的/ 双向/ 时延/ 均/ 为/ D/ ,/ 从/ HA/ 经/ WLAN/ 到/ MN/ 的/ 时延/ 为/ DL/ ,/ 带宽/ 为/ BL/ ,/ 而经/ WWAN/ 的/ 时延/ 为/ DW/ (/ >/ DL/ )/ ,/ 带宽/ 为/ BW/ (/ </ BL/ )/ ./ 从/ MN/ 经/ WLAN/ 到/ HA/ 的/ 时延/ 为/ DL/ ,/ 而经/ WWAN/ 的/ 时延/ 为/ DW/ ./ 鉴于/ MN/ 上/ 的/ TCP/ 流量/ 以下/ 行/ 为主/ ,/ 本文/ 重点/ 关注/ CN/ 向/ MN/ 传输数据/ 的/ 情况/ ./ 当/ MN/ 触发/ DVHO/ 时/ ,/ 向/ HA/ 发送/ 一个/ BU/ 消息/ ./ 在/ th/ 时刻/ ,/ HA/ 接收/ 到/ 此/ 消息/ ,/ 并/ 更新/ 了/ 对/ MN/ 的/ 绑定/ ./ 此时/ 从/ HA/ 经/ WWAN/ 到/ MN/ 的/ 链路/ 上/ 还/ 滞留/ 有/ 总/ 数据量/ 为/ BWDW/ 的/ 数据包/ ./ 随后/ ,/ HA/ 继续/ 接收/ 到/ 从/ CN/ 发来/ 的/ 数据包/ ./ 这些/ 数据包/ 被/ HA/ 经/ WLAN/ 转发给/ MN/ ,/ 并于/ th/ +/ DL/ 时刻/ 开始/ 陆续/ 达到/ MN/ ./ 但/ 此时/ 从/ HA/ 经/ WWAN/ 到/ MN/ 的/ 链路/ 上/ 还/ 滞留/ 有/ 数据量/ 为/ BW/ (/ DW/ -/ DL/ )/ 的/ 数据包/ ,/ 所以/ 经/ WLAN/ 的/ 数据包/ 是/ 先于/ CN/ 之前/ 发送/ 的/ 那些/ 数据包/ 而/ 到达/ MN/ 的/ ./ 对于/ CSH/ 方法/ ,/ 从/ th/ +/ DL/ 时刻/ 开始/ ,/ MN/ 上/ 的/ TCP/ 协议/ 层/ 通过/ 判断/ 所收/ 数据包/ 的/ 序列号/ 和/ 时间/ 戳/ 发现/ 了/ 乱序/ 现象/ ,/ 于是/ 不断/ 地向/ CN/ 返回/ 重复/ 的/ ACK/ ./ 这些/ ACK/ 在/ th/ +/ DL/ +/ DL/ +/ D/ 时刻/ 后/ 相继/ 达到/ CN/ ./ CN/ 接收/ 到/ 这些/ 重复/ 的/ ACK/ 后/ ,/ 通过/ WLAN/ 路径/ 先/ 重传/ 数据量/ 为/ BW/ (/ DW/ -/ DL/ )/ 的/ 数据包/ ,/ 再/ 继续/ 发送/ 新/ 数据/ ./ 所以/ ,/ MN/ 在/ th/ +/ DL/ 时刻/ 后/ 先/ 从/ WLAN/ 收到/ 数据量/ 为/ BW/ (/ DL/ +/ DL/ +/ 2D/ )/ 的/ 数据包/ ,/ 再/ 从/ WLAN/ 收到/ 重传/ 的/ 那些/ 数据包/ ./ 这些/ 重传/ 的/ 数据包/ 从/ CN/ 开始/ 发送/ 起/ ,/ 经过/ D/ +/ DL/ +/ [/ BW/ (/ DW/ -/ DL/ )/ // BL/ ]/ 时间/ 后/ ,/ 被/ MN/ 全部/ 接收/ ./ 此后/ ,/ MN/ 会/ 继续/ 从/ WLAN/ 以高/ 数据/ 速率/ 接收数据/ ,/ 切换/ 过程/ 到此结束/ ./ 所以/ ,/ 对于/ TCP/ 应用/ 来说/ ,/ 从/ th/ 时刻/ 起/ ,/ 整个/ DVHO/ 的/ 时延/ 为/ tCSH/ =/ 2DL/ +/ DL/ +/ 2D/ +/ [/ BW/ (/ DW/ -/ DL/ )/ // BL/ ]/ =/ DWBW/ // BL/ +/ DL/ (/ 2/ -/ BW/ // BL/ )/ +/ DL/ +/ 2D/ (/ 1/ )/ 在/ 这/ 段时间/ 内/ MN/ 接收/ 到/ 的/ 数据量/ 为/ 对于/ SHORDER/ 方法/ ,/ MN/ 的/ 网络层/ 会/ 缓存/ 从/ WLAN/ 到达/ 的/ 数据包/ ,/ 等/ th/ +/ DW/ 时刻/ 接收/ 到经/ WWAN/ 到达/ 的/ 全部/ 数据包/ 后/ ,/ 再/ 提交/ 这些/ 从/ WLAN/ 到达/ 的/ 数据包/ ./ 因此/ ,/ 从/ th/ 时刻/ 起/ ,/ TCP/ 应用/ 的/ 整个/ DVHO/ 时延/ 为/ 在/ 这/ 段时间/ 内/ MN/ 接收/ 到/ 的/ 数据量/ 为/ dSHORDER/ =/ BWDW/ +/ BW/ (/ DW/ -/ DL/ )/ =/ 2BWDW/ -/ BWDL/ 如果/ 式/ (/ 5/ )/ 和/ 式/ (/ 6/ )/ 均/ 成立/ ,/ tSHORDER/ </ tCSHdSHORDER/ +/ BL/ (/ tCSH/ -/ tSHORDER/ )/ >/ dCSH/ (/ 6/ )/ 那么/ 移动/ 终端/ 用/ SHORDER/ 方法/ 就/ 可以/ 更快/ 地/ 完成/ DVHO/ ,/ 使得/ TCP/ 应用/ 能/ 更/ 早/ 地/ 享用/ WLAN/ 的/ 高带宽/ ,/ 同时/ 在/ 切换/ 过程/ 中/ 接收/ 到/ 更/ 多/ 的/ 数据/ ./ 将式/ (/ 1/ )/ 和/ 式/ (/ 3/ )/ 代入/ 式/ (/ 5/ )/ ,/ 可得/ DW/ </ (/ 2BL/ -/ BW/ )/ DL/ +/ BLDL/ +/ 2BLD/ 把/ 式/ (/ 1/ )/ ~/ (/ 4/ )/ 代入/ 式/ (/ 6/ )/ ,/ 可知/ 当/ BL/ / 2BW/ 时/ ,/ 式/ (/ 6/ )/ 恒/ 成立/ ;/ 当/ BL/ >/ 2BW/ 时/ ,/ 式/ (/ 6/ )/ 等价/ 于/ DW/ </ (/ 2BL/ -/ 3BW/ )/ DL/ +/ (/ BL/ -/ BW/ )/ DL/ +/ 2/ (/ BL/ -/ BW/ )/ D/ =/ 2DL/ +/ DL/ +/ 2D/ +/ BW/ (/ DL/ +/ DL/ +/ 2D/ )/ 由于/ BW/ / BL/ 且/ DL/ ≈/ DL/ ,/ 所以/ 式/ (/ 7/ )/ 和/ 式/ (/ 8/ )/ 均/ 可简化/ 为式/ (/ 9/ )/ 所以/ ,/ 当式/ (/ 9/ )/ 成立/ 时/ ,/ 用/ SHORDER/ 方法/ 进行/ DVHO/ 可以/ 提高/ TCP/ 应用/ 的/ 有效/ 吞吐量/ ./ 也就是说/ ,/ SHORDER/ 方法/ 适用/ 于/ CN/ 与/ HA/ 的/ 距离/ 很/ 远/ ,/ 或者/ 从/ HA/ 经/ WWAN/ 到/ MN/ 的/ 时延/ 小于/ 3/ 倍/ 的/ 从/ HA/ 经/ WLAN/ 到/ MN/ 的/ 时延/ 的/ 情况/ ./ 在/ 上述/ 分析/ 的/ 基础/ 上/ ,/ 用/ MATLAB/ 分别/ 计算/ 出/ 使用/ CSH/ 和/ SHORDER/ 方法/ 进行/ DVHO/ 的/ TCP/ 应用/ 切换/ 时延/ 和/ 此/ 过程/ 中/ 的/ 平均/ 有效/ 吞吐量/ ./ 这里/ ,/ 切换/ 过程/ 中/ 的/ 平均/ 有效/ 吞吐量/ 是/ 指/ 从/ 切换/ 起始/ 时刻/ th/ 开始/ 到/ 切换/ 完成/ 时刻/ 截止/ ,/ MN/ 所/ 确认/ 收到/ 的/ 数据量/ 与/ 切换/ 时延/ 的/ 比值/ ./ 根据/ IEEE802/ ./ 11/ 规定/ ,/ 802.11/ b/ 系统/ 包括/ 1/ ,/ 2/ ,/ 5.5/ ,/ 11Mbps4/ 种/ 数据/ 速率/ ./ 据/ 有关/ 的/ 产品/ 说明/ 所述/ ,/ 中兴/ ZXTRB30/ 基站/ 的/ 下行/ 最大/ 用户/ 数据/ 速率/ 为/ 384kbps/ ./ 此外/ ,/ 我们/ 在/ CDMA1xEVDO/ 网点/ 的/ 实际/ 测量/ 结果表明/ CDMA1xEVDO/ 终端/ 与其/ 接入/ 路由器/ 之间/ 的/ 往返/ 时延/ (/ RTT/ )/ 约/ 为/ 150ms/ ./ 由此/ ,/ 在/ 数值/ 仿真/ 中/ 选用/ 表/ 2/ 中/ 所示/ 的/ 参数值/ ./ 通常/ ,/ 在/ Page7WLAN/ 中/ ,/ MN/ 与其/ 接入/ 路由器/ 之间/ 的/ 链路/ 时延/ 很/ 短/ ,/ 约/ 为/ 1/ ~/ 2ms/ ,/ 所以/ MN/ 与/ HA/ 之间/ 经/ WLAN/ 的/ 链路/ 时延/ 主要/ 由/ WLAN/ 的/ 接入/ 路由器/ 和/ HA/ 之间/ 的/ 有线网/ 链路/ 时延/ 所/ 引起/ ./ 因而/ ,/ 这里/ 假设/ DL/ 等于/ DL/ ./ 数值/ 仿真/ 的/ 具体/ 参数值/ 详见/ 表/ 2/ ./ 参数/ BL/ 数值/ 2Mbps384kbps80ms/ 图/ 2/ 和/ 图/ 3/ 中/ 显示/ 了/ 数值/ 仿真/ 结果/ ./ 图/ 2/ 显示图/ 2TCP/ 应用/ 的/ 软/ 切换/ 时延/ 图/ 3/ 网络层/ 软/ 切换/ 过程/ 中/ 的/ 平均/ 有效/ 吞吐量/ 在/ 3G/ 网络/ 和/ WiMax/ 网络/ 广泛/ 部署/ 后/ ,/ SHORDER/ 方法/ 将/ 发挥/ 更/ 重要/ 的/ 作用/ ./ 目前/ 各种/ 网络/ 的/ 具体/ 带宽/ 和/ 时延/ 值/ 详见/ 表/ 3/ ./ 与/ 2.5/ G/ 网络/ (/ 如/ CDMA/ 网络/ 和/ GPRS/ 网络/ )/ 相比/ ,/ 3G/ 网络/ 和/ WiMax/ 网络/ 的/ 带宽/ 进一步/ 增加/ ,/ 致使/ DVHO/ 过程/ 中/ 乱序/ 的/ 数据包/ 更/ 多/ ,/ 也/ 更/ 需要/ 解决/ 数据包/ 乱序/ 的/ 问题/ ./ 与此同时/ ,/ 3G/ 网络/ 和/ WiMax/ 网络/ 的/ 下行/ 链路/ 时延/ 进一步/ 降低/ ,/ 使得/ 式/ (/ 9/ )/ 中/ SHORDER/ 方法/ 的/ 适用/ 条件/ 更/ 容易/ 被/ 满足/ ./ 典型/ 的/ 有线网/ 时延/ 在/ 几/ 毫秒/ (/ 本地/ 以太网/ )/ 到/ 上百/ 毫秒/ (/ Internet/ 宽带/ 链路/ )/ 之间/ 变化/ ./ 对于/ 3GLTE/ 网络/ 来说/ ,/ 当/ DW/ 接近/ 10ms/ 时/ ,/ 通常/ 情况/ 下/ ,/ 式/ (/ 9/ )/ 都/ 成立/ ,/ 也就是说/ SHORDER/ 出当/ CN/ 向/ MN/ 进行/ TCP/ 数据传输/ 时/ 网络层/ 软/ 切换/ 的/ 切换/ 时延/ ./ 图/ 3/ 展示/ 了/ 基于/ CSH/ 方法/ 在/ 切换/ 过程/ [/ th/ ,/ th/ +/ tCSH/ ]/ 中/ 的/ 平均/ 有效/ 吞吐量/ (/ goodput/ )/ 以及/ 基于/ SHORDER/ 方法/ 在/ 切换/ 过程/ [/ th/ ,/ th/ +/ tSHORDER/ ]/ 中/ 的/ 平均/ 有效/ 吞吐量/ ./ 从中/ 可以/ 清楚/ 地/ 看出/ ,/ 随着/ D/ 和/ DL/ 的/ 增加/ ,/ SHORDER/ 方法/ 在/ 切换/ 时延/ 和/ 有效/ 吞吐量/ 方面/ 逐渐/ 优于/ CSH/ 方法/ ./ 近似/ 地/ ,/ 当/ 3/ 倍/ 的/ DL/ 与/ 2/ 倍/ 的/ D/ 之/ 和/ 大于/ 80ms/ 时/ ,/ 在/ CN/ 向/ MN/ 的/ 数据传输/ 过程/ 中/ ,/ 基于/ SHORDER/ 方法/ 的/ DVHO/ 时延/ 更/ 短/ ,/ 且/ TCP/ 有效/ 吞吐量/ 更高/ ./ 方法/ 会/ 优于/ CSH/ 方法/ ./ 类似/ 地/ ,/ 这/ 意味着/ 从/ 3G/ 网络/ 或/ WiMax/ 网络/ 切向/ WLAN/ 时/ 在/ 绝大多数/ 场景/ 下/ 使用/ SHORDER/ 方法/ 都/ 能/ 获得/ 更好/ 的/ 性能/ ./ WWANWLANIEEE802/ ./ 11n/ [/ 19/ ]/ 600Mbps1/ ~/ 3/ / HSDPAandbeyond/ ./ 见/ http/ :/ // // faculty/ ./ stut/ ./ edu/ ./ tw/ // ~/ cwycwy/ // 951/ // N9490006/ ./ pdfPage84/ ./ 2/ 拥塞/ 窗口/ 本节/ 将/ 进一步/ 讨论/ 使用/ CSH/ 方法/ 和/ SHORDER/ 方法/ 进行/ DVHO/ 时/ ,/ TCP/ 拥塞/ 窗口/ 的/ 变化/ ./ CWNDW/ 和/ CWNDL/ (/ 以/ 字节/ 为/ 单位/ )/ 分别/ 表示/ WLAN/ 路径/ 上/ 和/ WWAN/ 路径/ 上/ TCP/ 连接/ 的/ 平均/ 拥塞/ 窗口/ 值/ ./ 由于/ BW/ / BL/ ,/ 所以/ 当式/ (/ 9/ )/ 成立/ 时/ ,/ 有/ CWNDW/ </ CWNDL/ ./ 此外/ ,/ 令/ 报文/ 长度/ 为/ S/ 个/ 字节/ ./ 因为/ 平均/ 拥塞/ 窗口/ 等于/ 路径/ 的/ 带宽/ 时延/ 积/ ,/ 于是/ ,/ 有/ 为了/ 计算/ 拥塞/ 窗口/ 的/ 精确/ 值/ ,/ 关注/ 以下/ 时间/ 点/ :/ 在/ th/ 时刻/ ,/ HA/ 接收/ 到/ BU/ ,/ 改变/ 了/ 到/ MN/ 的/ 路径/ ;/ 使用/ CSH/ 方法/ ,/ 在/ t/ / 1/ =/ th/ +/ DL/ +/ DL/ +/ D/ 时刻/ ,/ CN/ 接收/ 到/ 从/ WLAN/ 返回/ 的/ 第一个/ 确认/ ;/ 根据/ CSH/ 方法/ ,/ 在/ t/ / 2/ =/ t/ / 1/ +/ 2S/ // BW/ 时刻/ ,/ CN/ 接收/ 到/ 第/ 3/ 个/ 重复/ 的/ 确认/ ;/ 按照/ CSH/ 方法/ ,/ 在/ t/ / 3/ =/ t/ / 2/ +/ DL/ +/ DL/ +/ 2D/ 时刻/ ,/ 被/ 重传/ 报文/ 的/ 确认/ 到达/ CN/ ;/ 基于/ SHORDER/ 方法/ ,/ 在/ t/ / 4/ =/ th/ +/ DW/ +/ DL/ +/ D/ 时刻/ ,/ CN/ 接收/ 到/ 最后/ 一个/ 经/ WWAN/ 发向/ MN/ 的/ 报文/ 的/ 确认/ ./ 通过/ 分析/ 在/ 不同/ 时段/ 确认/ 返回/ 的/ 情况/ ,/ 可以/ 计算/ 出/ CN/ 发出/ 新/ 报文/ 的/ 数量/ 和/ 重传/ 报文/ 的/ 数量/ ,/ 详见/ 表/ 4/ 和表/ 5/ ./ 时间段/ (/ th/ ,/ t/ / 1/ ]/ BW/ (/ DL/ +/ DW/ +/ D/ )/ (/ t/ / 1/ ,/ t/ / 2/ ]/ 表/ 5/ 基于/ SHORDER/ 方法/ CN/ 所/ 发送/ 的/ 数据量/ 时间段/ (/ th/ ,/ t/ / 4/ ]/ BW/ [/ (/ DW/ +/ DL/ +/ D/ )/ +/ (/ DW/ -/ DL/ )/ +/ (/ DW/ -/ DL/ )/ ]/ 0/ 假设/ th/ 时刻/ 的/ 拥塞/ 窗口/ 值为/ CWNDh/ ∈/ [/ 2CWNDW/ // 3/ ,/ 4CWNDW/ // 3/ ]/ ./ 基于/ 上述/ 计算/ ,/ 能/ 推出/ 用/ CSH/ 方法/ 时/ 在/ t/ / 1/ 时刻/ 的/ 拥塞/ 窗口/ 值为/ CWNDCSH/ (/ t/ / 1/ )/ =/ 基于/ CSH/ 方法/ ,/ TCP/ 发送/ 端会/ 进入/ 快速/ 重传/ 阶段/ ,/ 使得/ 拥塞/ 窗口/ 值/ 在/ t/ / 2/ 时刻/ 变为/ CWNDCSH/ (/ t/ / 2/ )/ =/ 3S/ +/ CWNDCSH/ (/ t/ / 1/ )/ // 2/ ./ 当/ TCP/ 发送/ 端/ 完成/ 快速/ 恢复/ 后/ ,/ 按照/ CSH/ 方法/ ,/ DVHO/ 结束/ ./ t/ / 3/ 时刻/ 的/ 拥塞/ 窗口/ 值为/ CWNDCSH/ (/ t/ / 3/ )/ =/ S/ +/ CWNDCSH/ (/ t/ / 1/ )/ // 2/ 若/ 使用/ SHORDER/ 方法/ ,/ 则/ 不会/ 出现/ 乱序/ 的/ 报文/ 和/ 重传/ 的/ 报文/ ./ 所以/ ,/ DVHO/ 完成/ 后/ t/ / 4/ 时刻/ 的/ 拥塞/ 窗口/ 值为/ CWNDSHORDER/ (/ t/ / 4/ )/ =/ CWNDh/ +/ S2/ ≈/ CWNDh/ +/ SBW/ (/ 2DW/ -/ DL/ +/ DW/ +/ D/ )/ 比较/ 式/ (/ 10/ )/ 和/ 式/ (/ 11/ )/ ,/ 可知/ 当/ CWNDh/ / 2S/ 时/ ,/ CWNDSHORDER/ (/ t/ / 4/ )/ >/ CWNDCSH/ (/ t/ / 3/ )/ ./ 一般/ 地/ ,/ 除了/ 在/ 慢/ 启动/ 初始/ 阶段/ ,/ TCP/ 的/ 拥塞/ 窗口/ 是/ 不会/ 小于/ 2/ 倍/ 的/ 报文/ 长度/ 的/ ./ 因此/ ,/ 用/ SHORDER/ 方法/ 进行/ DVHO/ 后/ 的/ 拥塞/ 窗口/ 将会/ 大于/ 用/ CSH/ 方法/ 完成/ DVHO/ 后/ 的/ 拥塞/ 窗口/ ./ 正是/ 因为/ TCP/ 的/ 发送/ 端/ 基于/ SHORDER/ 方法/ 不会/ 引起/ 拥塞/ 窗口/ 的/ 减半/ ,/ 所以/ ,/ 所提/ 的/ 机制/ 在/ DVHO/ 后/ 不会/ 带来/ 吞吐量/ 的/ 骤减/ ./ 基于/ 上述/ 分析/ ,/ 用/ MATLAB/ 分别/ 计算/ 出/ 基于/ CSH/ 和/ SHORDER/ 方法/ 在/ DVHO/ 后/ TCP/ 拥塞/ 窗口/ 的/ 大小/ ./ 在/ 数值/ 仿真/ 中/ 选用/ 表/ 6/ 中/ 所示/ 参数值/ ./ 参数/ BWDWDWS/ 数值/ 384kbps80ms120ms1400Byte/ 图/ 4/ 和/ 图/ 5/ 中/ 展示/ 了/ 数值/ 仿真/ 结果/ ./ 图/ 4/ 描绘出/ 当/ DL/ 为/ 25ms/ 且/ D/ 为/ 40ms/ 时/ 切换/ 前/ TCP/ 拥塞/ 窗口/ 的/ 不同/ 值/ 所/ 对应/ 的/ 切换/ 后/ TCP/ 拥塞/ 窗口/ 的/ 值/ ./ 图/ 5/ 展现/ 了/ 在/ 切换/ 前/ 拥塞/ 窗口/ 的/ 值/ 等于/ 先前/ 网络/ 中/ TCP/ 连接/ 的/ 平均/ 拥塞/ 窗口/ 值/ 的/ 情况/ 下/ ,/ 当/ DL/ 和/ D/ 为/ 不同/ 值时/ ,/ 切换/ 后/ TCP/ 拥塞/ 窗口/ 值/ 的/ 变化/ ./ 很明图/ 4/ 切换/ 前/ 拥塞/ 窗口/ 值/ 对/ 切换/ 后/ 拥塞/ 窗口/ 值/ 的/ 影响/ Page9/ 显/ ,/ 用/ SHORDER/ 方法/ 切换/ 后/ 的/ TCP/ 拥塞/ 窗口/ 值/ 远高于/ 用/ CSH/ 方法/ 切换/ 后/ 的/ TCP/ 拥塞/ 窗口/ 值/ ./ 这/ 意味着/ 移动/ 终端/ 基于/ SHORDER/ 方法/ 切换/ 到/ WLAN/ 后/ 的/ 一段时间/ 内/ ,/ 它/ 的/ TCP/ 吞吐量/ 更高/ ,/ 因为/ 它/ 在/ 很大/ 程度/ 上/ 省去/ 了/ CSH/ 方法/ 切换/ 后/ TCP/ 拥塞/ 窗口/ 加性/ 增长/ 以/ 匹配/ WLAN/ 高带宽/ 的/ 过程/ ./ 图/ 5/ 新/ 网络/ 路径/ 时延/ 对/ 切换/ 后/ TCP/ 拥塞/ 窗口/ 值/ 的/ 影响/ 图/ 6/ 实验/ 平台/ 拓扑图/ 通过/ 实际/ 测试/ ,/ 移动/ 终端/ 与/ WLAN/ 的/ 接入/ 路由器/ ,/ CDMA/ 网络/ 的/ 接入/ 路由器/ 和/ GPRS/ 网络/ 的/ 接入/ 路由器/ 之间/ 的/ RTT/ 分别/ 约/ 为/ 2/ ~/ 3ms/ ,/ 400ms/ 和/ 800ms/ ./ 此外/ ,/ IPv6/ 局域网/ 中/ 的/ 主机/ 与/ FTP/ 服务器之间/ 的/ RTT/ 约/ 为/ 35ms/ ./ 5.1/ WWAN/ 中包/ 乱序/ 程度/ 的/ 测试/ SHORDER/ 方法/ 防止/ 移动/ 终端/ 在/ DVHO/ 时/ 发生/ 数据包/ 乱序/ 的/ 前提/ 是/ 在/ 移动/ 终端/ 的/ 切换/ 过程/ 中表/ 7/ 经/ WWAN/ 数据包/ 的/ 乱序/ 程度/ CDMA/ 公网/ GPRS/ 公网/ 在/ 试验/ 中/ ,/ 移动/ 终端/ 与/ IPv6/ 主机/ 之间/ 经/ CDMA/ 公网/ 的/ 数据包/ 没有/ 发生/ 乱序/ 现象/ ,/ 从/ IPv6/ 主机/ 经/ GPRS/ 公网/ 到/ 移动/ 终端/ 的/ 数据包/ 也/ 没有/ 出/ 5/ 系统/ 实验/ 为了/ 进一步/ 验证/ 所提/ 方法/ 的/ 可行性/ 和/ 有效性/ ,/ 本文/ 给出/ 原型/ 系统/ 实验/ ./ 基于/ 对/ 支持/ MIPv6/ 协议/ 的/ MIPL/ (/ MobileIPv6forLinux/ )/ 开/ 源代码/ ①/ 的/ 修改/ ,/ 原型/ 系统/ 中/ 分别/ 实现/ 了/ CSH/ 方法/ 和/ SHORDER/ 方法/ ./ 实验/ 环境/ 的/ 网络拓扑/ 如图/ 6/ 所示/ ,/ 是/ 一个/ WWAN/ 和/ WLAN/ 松散/ 耦合/ 的/ 试验台/ ./ 实验/ 平台/ 处于/ WWAN/ (/ CDMA/ 网络/ 和/ GPRS/ 网络/ )/ 的/ 覆盖/ 之下/ ./ 其中/ 布有/ 两个/ AP/ ,/ 它们/ 通过/ IPv6/ 路由器/ 接入/ 到/ 一个/ IPv6/ 局域网/ ,/ 形成/ 两个/ WLAN/ ./ 其中/ ,/ 一个/ WLAN/ 为/ 家乡/ 网络/ ,/ 另/ 一个/ 为/ 外地/ 网络/ ./ 此外/ ,/ IPv6/ 局域网/ 还/ 与/ 公共/ IPv6/ 网络/ 相连/ ,/ 该/ 局域网/ 中/ 的/ 任何/ 一台/ 主机/ 都/ 能/ 通过/ IPv6/ 从公/ 网上/ 的/ 一台/ FTP/ 服务器/ 上/ 下载/ 文件/ ./ WWAN/ 本身/ 不/ 发生/ 数据包/ 的/ 乱序/ ,/ 所以/ ,/ 首先/ 需要/ 在/ 试验/ 台上/ 验证/ 该/ 假设/ 的/ 正确性/ ./ 于是/ ,/ 分别/ 针对/ CDMA/ 公网/ 和/ GPRS/ 公网/ 进行/ 测试/ ./ 移动/ 终端/ 接入/ 到/ CDMA/ 公网/ 或/ GPRS/ 公网/ 后/ ,/ 分别/ 从/ IPv6/ 主机/ 向/ 移动/ 终端/ 和/ 从/ 移动/ 终端/ 向/ IPv6/ 主机/ 以/ 0.1/ s/ 为/ 间隔/ 发送/ 了/ 100000/ 个/ 数据包/ ,/ 并/ 在/ 对/ 端/ 检查/ 接收/ 情况/ ,/ 结果/ 如表/ 7/ 所示/ ./ 现/ 乱序/ ./ 而/ 从/ 移动/ 终端/ 经/ GPRS/ 公网/ 到/ IPv6/ 主机/ 的/ 99748/ 个/ 数据包/ 中有/ 16/ 个/ 包/ 发生/ 了/ 乱序/ ,/ 其中/ 1/ 个/ ①/ http/ :/ // // www/ ./ mobile/ -/ ipv6/ ./ org/ // Page10/ 数据包/ 前移/ 3/ 个/ 包/ 位置/ ,/ 2/ 个/ 数据包/ 前移/ 2/ 个/ 包/ 位置/ ,/ 3/ 个/ 数据包/ 前移/ 1/ 个/ 包/ 位置/ ,/ 10/ 个/ 数据包/ 滞后/ 1/ 个/ 包/ 位置/ ./ 由此可见/ ,/ 在/ 公共/ WWAN/ 中/ ,/ 数据包/ 发生/ 乱序/ 的/ 概率/ 很小/ ,/ 而/ 又/ 恰/ 在/ 移动/ 终端/ 进行/ DVHO/ 时/ 发生/ 数据包/ 乱序/ 的/ 概率/ 就/ 更/ 小/ 了/ ./ 所以/ ,/ SHORDER/ 方法/ 的/ 前提条件/ 在/ 试验/ 台上/ 通常/ 是/ 成立/ 的/ ./ 5.2/ SHORDER/ 方法/ 的/ 实施/ 效果/ 3.2/ 节/ 已经/ 证明/ 了/ 如果/ 从/ CN/ 经/ HA/ 到/ MN/ 的/ 新旧/ 路径/ 上/ 均/ 不/ 发生/ 数据包/ 乱序/ ,/ 那么/ MN/ 用/ SHORDER/ 方法/ 进行/ VHO/ 时/ MN/ 的/ 传输层/ 不会/ 接收/ 到/ 乱序/ 的/ 数据包/ ./ 本节/ 通过/ 实际/ 系统/ 实验/ ,/ 来/ 演示/ SHORDER/ 方法/ 防止/ DVHO/ 过程/ 中/ 发生/ 数据包/ 乱序/ 的/ 良好效果/ ./ 为了/ 便于/ 观察/ 实验/ 现象/ ,/ 此/ 实验/ 选用/ GPRS/ 网络/ 作为/ WWAN/ ./ 在/ 实验/ 中/ ,/ 当/ IPv6/ 主机/ 向/ 移动/ 终端/ 每隔/ 50ms/ 图/ 7/ 网络层/ 软/ 切换/ 时/ MN/ 所/ 接收/ 到/ 的/ 数据包/ 上述/ 实验/ 重复/ 了/ 10/ 次/ ,/ 获得/ 了/ 类似/ 的/ 实验/ 结果/ ./ 这些/ 实验/ 充分说明/ 了/ 在/ 实际/ 环境/ 中/ SHORDER/ 方法/ 能够/ 有效/ 地/ 避免/ 移动/ 终端/ 因/ DVHO/ 而/ 接收/ 到/ 乱序/ 的/ 数据包/ ./ 5.3/ 网络层/ 软/ 切换/ 方法/ 对/ TCP/ 应用/ 吞吐量/ 的/ 影响/ 本节/ 将/ 以/ 文件传输/ 业务/ 为例/ ,/ 比较/ CSH/ 方法/ 和/ SHORDER/ 方法/ 对/ TCP/ 有效/ 吞吐量/ 的/ 影响/ ./ 在/ 随后/ 的/ 实验/ 中/ ,/ 移动/ 终端/ 从/ FTP/ 服务器/ 下载/ 文件/ 的/ 同时/ ,/ 先后/ 用/ CSH/ 方法/ 和/ SHORDER/ 方法/ 进行/ DVHO/ ./ 所得/ 的/ 实验/ 结果/ 可以/ 验证/ 前文/ 对/ CSH/ 和/ SHORDER/ 方法/ 适用/ 场景/ 分析/ 的/ 正确性/ ./ 不过/ ,/ 鉴于/ 实验/ 平台/ 不/ 在/ 3G/ 网络/ 的/ 覆盖/ 下/ ,/ 所以/ 在/ 本节/ 的/ 实验/ 选用/ 与/ GPRS/ 网络/ 相比/ 链路/ 延迟/ 较/ 低/ 的/ CDMA/ 网络/ 作为/ WWAN/ ,/ 以/ 替代/ 3G/ 网络/ ./ (/ 1/ )/ 式/ (/ 9/ )/ 中/ 条件/ 成立/ 的/ 情况/ 为了/ 观察/ 在/ 满足/ 式/ (/ 9/ )/ 要求/ 的/ 情况/ 下/ CSH/ 方/ 发送/ 1/ 个/ 内含/ 序号/ 的/ UDP/ 数据包/ 时/ ,/ 分别/ 用/ CSH/ 方法/ 和/ SHORDER/ 方法/ 进行/ DVHO/ ,/ 并/ 观察/ 此/ 过程/ 中/ 网络接口/ 收到/ UDP/ 包/ 的/ 时间/ 以及/ 网络层/ 提交/ UDP/ 包/ 的/ 时间/ ,/ 如图/ 7/ 所示/ ./ 图/ 7/ (/ a/ )/ 中/ 所示/ 的/ 实验/ 结果表明/ UDP/ 包/ 全部/ 被/ 移动/ 终端/ 接收/ ,/ 但是/ ,/ 由于/ 网络层/ 把/ 收到/ 的/ UDP/ 包/ 立即/ 提交/ 给/ 了/ UDP/ 协议/ 层/ ,/ 使得/ 在/ 1.1/ ~/ 1.3/ s/ 间/ MN/ 的/ UDP/ 协议/ 层/ 所/ 接收/ 到/ 的/ 序号/ 从/ 17/ ~/ 22/ 的/ UDP/ 包/ 依次/ 滞后/ 于/ 序号/ 从/ 23/ ~/ 27/ 的/ UDP/ 包/ ./ 图/ 7/ (/ b/ )/ 中/ 的/ 实验/ 结果显示/ ,/ 移动/ 终端/ 的/ 网络层/ 不仅/ 接收/ 到/ 全部/ 的/ UDP/ 包/ ,/ 而且/ 把/ 它们/ 按/ 发送/ 顺序/ 提交/ 给/ 了/ UDP/ 协议/ 层/ ./ 从图/ 中/ 可以/ 看出/ ,/ 经/ GPRS/ 网络/ 的/ 最后/ 一个/ UDP/ 包/ (/ 序号/ 为/ 23/ )/ 于/ 1.2/ s/ 到达/ 移动/ 终端/ ,/ 过/ 了/ 10ms/ 后/ ,/ 移动/ 终端/ 就/ 向/ UDP/ 协议/ 层/ 提交/ 了/ 缓存/ 队列/ 中/ 序号/ 从/ 24/ ~/ 27/ 的/ UDP/ 包/ ./ 法/ 和/ SHORDER/ 方法/ 对/ TCP/ 有效/ 吞吐量/ 的/ 影响/ ,/ 对图/ 6/ 所示/ 的/ 实验/ 场景/ 进行/ 了/ 调整/ ,/ 在/ HA/ 和/ WLAN/ 外地/ 接入/ 路由器/ 上/ 增加/ 了/ 数据/ 包转发/ 延时/ 模块/ ,/ 使得/ WLAN/ 外地/ 接入/ 路由器/ 与/ HA/ 之间/ 的/ 双向/ 路径/ 时延/ 都/ 变为/ 100ms/ ,/ 而/ HA/ 与/ FTP/ 服务器之间/ 的/ 双向/ 路径/ 时延/ 均/ 增加/ 150ms/ ./ 而后/ ,/ 在/ 调整/ 过/ 的/ 实验/ 环境/ 中/ 进行/ DVHO/ 实验/ ./ 图/ 8/ 记录/ 了/ 移动/ 终端/ 在/ 文件/ 接收/ 过程/ 中/ 返回/ 的/ 所有/ ACK/ ./ 图/ 8/ (/ a/ )/ 和/ (/ b/ )/ 分别/ 反映/ 了/ 在/ 3/ 倍/ 的/ DL/ 与/ 2/ 倍/ 的/ D/ 之/ 和/ 略大于/ DW/ 的/ 情况/ 下/ 基于/ CSH/ 方法/ 和/ SHORDER/ 方法/ 的/ TCP/ 有效/ 吞吐量/ ./ 根据/ 实验/ 结果/ 统计/ ,/ 在/ DVHO/ 开始/ 后/ 的/ 2s/ 内/ ,/ 基于/ CSH/ 方法/ 的/ TCP/ 平均/ 有效/ 吞吐量/ 为/ 92.1/ kbps/ ,/ 而/ 基于/ SHORDER/ 方法/ 的/ TCP/ 平均/ 有效/ 吞吐量/ 为/ 112.4/ kbps/ ./ 明显/ 地/ ,/ 与/ 4.1/ 节中/ 的/ 分析/ 相同/ ,/ 在/ 这种/ 实验/ 条件/ 下/ ,/ SHORDER/ 方法/ 优于/ CSH/ 方法/ ./ Page11/ 图/ 8/ 式/ (/ 9/ )/ 成立/ 时/ 网络层/ 软/ 切换/ 方法/ 对/ TCP/ 性能/ 的/ 影响/ 根据/ 图/ 8/ (/ a/ )/ 所示/ ,/ 移动/ 终端/ 基于/ CSH/ 方法/ 在/ 2.98/ s/ 时/ 发生/ 了/ DVHO/ ,/ 其/ TCP/ 协议/ 层/ 返回/ 了/ 许多/ 重复/ 的/ ACK/ ,/ 导致/ FTP/ 服务器/ 重传/ 了/ 先前/ 经/ CDMA/ 网络/ 传输/ 但/ 尚/ 在/ 途中/ 的/ 那些/ 数据包/ ./ 由于/ 移动/ 终端/ 与/ FTP/ 服务器/ 经/ WLAN/ 的/ 路径/ 时延/ 较/ 高/ ,/ 所以/ FTP/ 服务器/ 在/ 切换/ 发生/ 后用/ 了/ 1.2/ s/ 才/ 完成/ 对/ 旧/ 数据包/ 的/ 重传/ ./ 根据/ 图/ 8/ (/ b/ )/ 所示/ ,/ 移动/ 终端/ 用/ SHORDER/ 方法/ 在/ 2.89/ s/ 时/ 发起/ 了/ DVHO/ ,/ 并/ 一直/ 等待/ 接收/ 并/ 提交/ 完经/ CDMA/ 网络/ 到达/ 的/ 全部/ 数据包/ 后/ ,/ 于/ 3.27/ s/ 时/ 把/ 经/ WLAN/ 接收/ 的/ 数据包/ 提交/ 给/ 上层/ 的/ TCP/ 协议/ 层/ ,/ 而后/ 继续/ 从/ WLAN/ 接收/ FTP/ 服务器/ 发来/ 的/ 新/ 数据包/ ./ 所以/ ,/ 在/ 此/ 场景/ 下/ ,/ 与/ CSH/ 方法/ 相比/ ,/ SHORDER/ 方法/ 可以/ 使/ 移动/ 终端/ 更/ 早/ 地/ 完成/ 切换/ ,/ 同时/ 避免/ 伪/ 快速/ 重传/ 和/ 拥塞/ 窗口/ 减半/ ,/ 从而/ 获得/ 更/ 高/ 的/ 吞吐量/ ./ 图/ 9/ 式/ (/ 9/ )/ 不/ 成立/ 时/ 网络层/ 软/ 切换/ 方法/ 对/ TCP/ 性能/ 的/ 影响/ 根据/ 图/ 9/ (/ a/ )/ 所示/ ,/ 移动/ 终端/ 在/ 2.99/ s/ 时/ 开始/ DVHO/ ,/ 由于/ MN/ 的/ TCP/ 协议/ 层先/ 收到/ 了/ 从/ WLAN/ 到达/ 的/ 后续/ 数据包/ ,/ 并/ 返回/ 了/ 一连串/ 重复/ 的/ ACK/ ,/ 所以/ ,/ FTP/ 服务器/ 重传/ 了/ 先前/ 发送/ 的/ 经/ CDMA/ 网络/ 传输/ 的/ 那些/ 数据包/ ./ 在/ 3.21/ s/ 时/ ,/ FTP/ 服务器/ 完成/ 了/ 数据/ 重传/ ,/ 继续/ 经/ WLAN/ 向/ 移动/ 终端/ 传输数据/ ./ 在/ 3.21/ s/ 后/ ,/ 移动/ 终端/ 返回/ 的/ 重复/ ACK/ 是/ 由/ 从/ WWAN/ 接收/ 到/ 的/ 时间/ 戳/ 已/ 过时/ 的/ 数据包/ 所/ 引起/ 的/ ./ 从图/ 9/ (/ b/ )/ 中/ 可以/ 看出/ ,/ 移动/ 终端/ 在/ (/ 2/ )/ 式/ (/ 9/ )/ 中/ 条件/ 不/ 成立/ 的/ 情况/ 接下来/ ,/ 考察/ 式/ (/ 9/ )/ 不/ 成立/ 的/ 情况/ ./ 此时/ 可以/ 直接/ 使用/ 图/ 6/ 所示/ 的/ 拓扑/ 环境/ 进行/ DVHO/ 实验/ ./ 在/ 此/ 场景/ 中/ ,/ 接入/ CDMA/ 网络/ 的/ 移动/ 终端/ 与/ FTP/ 服务器之间/ 的/ RTT/ 至少/ 为/ 450ms/ ,/ 且/ 随着/ 流量/ 的/ 增大/ ,/ 时延/ 会/ 更长/ ;/ 而/ 接入/ WLAN/ 的/ 移动/ 终端/ 与/ FTP/ 服务器之间/ 的/ RTT/ 一般/ 只有/ 37ms/ ,/ 所以/ 此时/ 式/ (/ 9/ )/ 并/ 不/ 成立/ ./ 图/ 9/ 记录/ 了/ 移动/ 终端/ 在/ 文件/ 接收/ 过程/ 中/ 返回/ 的/ 所有/ ACK/ ./ 图/ 9/ (/ a/ )/ 和/ (/ b/ )/ 分别/ 示例/ 了/ 在/ 3/ 倍/ 的/ DL/ 与/ 2/ 倍/ 的/ D/ 之/ 和/ 远/ 小于/ DW/ 的/ 情况/ 下/ 基于/ CSH/ 方法/ 和/ SHORDER/ 方法/ 的/ TCP/ 有效/ 吞吐量/ ./ 从图/ 中/ 可以/ 看出/ ,/ 在/ 当前/ 的/ 实验/ 条件/ 下/ ,/ 基于/ CSH/ 方法/ 的/ TCP/ 有效/ 吞吐量/ 高于/ 基于/ SHORDER/ 方法/ 的/ TCP/ 有效/ 吞吐量/ ./ 这/ 与/ 4.1/ 节中/ 的/ 分析/ 相一致/ ./ 2.86/ s/ 时/ 触发/ 了/ DVHO/ ,/ 并且/ 一直/ 等待/ 把/ 经/ CDMA/ 网络/ 到达/ 的/ 数据包/ 都/ 接收/ 并/ 提交/ 后/ ,/ 才/ 于/ 5.4/ s/ 时/ 把/ 经/ WLAN/ 接收/ 的/ 数据包/ 提交/ 给/ 上层/ 的/ TCP/ 协议/ 层/ ./ 所以/ ,/ 移动/ 终端/ 的/ TCP/ 协议/ 层/ 按/ 顺序/ 接收/ 到/ 了/ 切换/ 过程/ 中/ 的/ 所有/ 数据包/ ,/ 没有/ 返回/ 重复/ 的/ ACK/ ,/ 也/ 没有/ 引发/ FTP/ 服务器/ 的/ 数据包/ 重传/ ./ 但是/ 由于/ 经/ CDMA/ 网络/ 的/ 路径/ 时延/ 过长/ ,/ 对/ CDMA/ 网络/ 中/ 数据包/ 的/ 等待/ 贻误/ 了/ 移动/ 终端/ 享用/ WLAN/ 高带宽/ 的/ 时机/ ,/ 致使/ 在/ 切换/ 开始/ 后/ 2.5/ s/ ,/ TCP/ 的/ 吞吐量/ 才/ 得以/ Page12/ 提升/ ./ 这个/ 实验/ 表明/ ,/ 在/ 不/ 满足/ 式/ (/ 9/ )/ 的/ 网络/ 环境/ 下/ ,/ 若要/ TCP/ 应用/ 有/ 更/ 高/ 的/ 吞吐量/ ,/ 则/ 使用/ CSH/ 方法/ 更为/ 合适/ ./ 6SHORDER/ 方法/ 的/ 改进/ 近似/ 地/ ,/ 在/ 式/ (/ 9/ )/ 成立/ 时/ ,/ SHORDER/ 方法/ 优于/ CSH/ 方法/ ;/ 而/ 在/ 式/ (/ 9/ )/ 不/ 成立/ 时/ ,/ CSH/ 方法/ 优于/ SHORDER/ 方法/ ./ 由于/ 这/ 两种/ 方法/ 的/ 互补性/ ,/ 如果/ 能/ 将/ 两种/ 方法/ 综合/ 起来/ ,/ 那么/ 将/ 能/ 进一步/ 改善/ DVHO/ 的/ 性能/ ./ 因此/ ,/ SHORDER/ 方法/ 中/ 可以/ 加入/ 对式/ (/ 9/ )/ 成立/ 与否/ 的/ 判断/ ./ 令/ RTTL/ 为/ MN/ 与/ HA/ 间经/ WLAN/ 的/ 往返/ 时延/ ,/ RTTW/ 为/ MN/ 与/ HA/ 间经/ WWAN/ 的/ 往返/ 时延/ ,/ RTT/ 为/ MN/ 与/ CN/ 间经/ WWAN/ 的/ 往返/ 时延/ ./ 假设/ DL/ ≈/ DL/ 且/ DW/ ≈/ DW/ ,/ 则/ 式/ (/ 9/ )/ 可/ 转化/ 为/ RTTW/ </ 3RTTL/ +/ 2/ (/ RTT/ -/ RTTW/ )/ (/ 12/ )/ 下面/ 粗略/ 估计/ RTTL/ ,/ RTTW/ 和/ RTT/ 的/ 值/ ./ 根据/ MIPv6/ 协议/ ,/ 每当/ MN/ 移动/ 到/ 一个/ 新/ 的/ 网络/ 时/ ,/ 或者/ MN/ 的/ 注册/ 即将/ 过期/ 前/ ,/ MN/ 都/ 要/ 向/ HA/ 发送/ BU/ 消息/ ,/ 并/ 接收/ HA/ 返回/ 的/ BA/ 消息/ ./ 这段/ 注册/ 时延/ 即为/ MN/ 与/ HA/ 之间/ 经/ 当前/ 网络/ 的/ 往返/ 时延/ ./ 所以/ ,/ RTTW/ 为/ MN/ 之前/ 最近/ 一次/ 绑定/ 的/ 注册/ 时延/ ./ 若/ MN/ 在/ WWAN/ 中因/ 注册/ 过期/ 而/ 进行/ 了/ 多次/ 绑定/ 更新/ ,/ 则/ 可用/ 这/ 几次/ 注册/ 时延/ 的/ 均值/ 来/ 估算/ RTTW/ 的/ 值/ ./ 在/ 当前/ 的/ 绑定/ 更新过程/ 中/ ,/ 于/ t3/ 时刻/ (/ 参见/ 图/ 1/ )/ ,/ MN/ 从/ 新/ 网络接口/ 接收/ 到/ 第一/ BA/ 消息/ ,/ 即可/ 得到/ 本次/ 绑定/ 的/ 注册/ 时延/ ,/ 于是/ 令/ RTTL/ =/ t3/ -/ t1/ ./ TCP/ 协议/ 定义/ 了/ 一个/ 时间/ 戳/ 选项/ ,/ 其/ 功能/ 之一/ 就是/ 用于/ 测量/ 端到/ 端的/ 往返/ 时延/ ,/ 因此/ RTT/ 的/ 值/ 可/ 通过/ TCP/ 协议/ 的/ 往返/ 时延/ 测量/ 机制/ [/ 11/ ]/ 获得/ ./ 这样/ ,/ 在/ t3/ 时刻/ ,/ MN/ 就/ 能/ 估算/ 出/ RTTL/ ,/ RTTW/ 和/ RTT/ 的/ 值/ ,/ 继而/ 判决/ 是否/ 在/ 网络层/ 缓存/ 从/ 新/ 网络/ 接收/ 的/ 数据包/ ./ 所以/ ,/ 对/ SHORDER/ 方法/ 进行/ 如下/ 改进/ :/ 在/ t3/ 时刻/ ,/ MN/ 估算/ 出/ RTTL/ ,/ RTTW/ 和/ RTT/ 的/ 值/ 后/ ,/ 若式/ (/ 12/ )/ 成立/ ,/ 则/ MN/ 按原/ SHORDER/ 方法/ 继续执行/ 相应/ 操作/ ,/ 否则/ MN/ 修改/ 路由/ ,/ 使/ 数据包/ 从/ 新/ 隧道/ 发出/ ,/ 但/ 不再/ 发送/ 第二/ BU/ 消息/ ,/ 也/ 不再/ 缓存/ 从/ 新/ 网络接口/ 接收/ 到/ 的/ 数据包/ ./ 7/ 结语/ 随着/ 软/ 切换/ 技术/ 的/ 发展/ ,/ 新兴/ 的/ 网络层/ 软/ 切换/ 机制/ ,/ 已/ 可以/ 避免/ 垂直/ 切换/ 过程/ 中/ 的/ 数据包/ 丢失/ ./ 但是/ ,/ 现有/ 的/ 软/ 切换/ 方法/ 仍会/ 引起/ 严重/ 的/ 数据包/ 乱序/ ,/ 从而/ 降低/ 上层/ 应用/ 的/ 性能/ ,/ 尤其/ 影响/ TCP/ 应用/ 的/ 吞吐量/ ./ 为了/ 解决/ 这一/ 问题/ ,/ 本文/ 提出/ 了/ 一种/ 网络层/ 软/ 切换/ 方法/ SHORDER/ ./ 该/ 方法/ 根据/ 移动/ 终端/ 与其/ 家乡/ 代理/ 之间/ 的/ 交互/ 信令/ 对/ 终端/ 所收/ 数据包/ 进行/ 适当/ 的/ 缓存/ ,/ 能/ 有效/ 地/ 防止/ 移动/ 终端/ 因/ 下行/ 垂直/ 切换/ 而/ 接收/ 到/ 乱序/ 的/ 数据包/ ./ 该/ 方法/ 所/ 具有/ 的/ 网络层/ 独立性/ 使/ 其能/ 与/ 各种/ 传输层/ 协议/ 及其/ 改进/ 协议/ 相/ 兼容/ ./ 并且/ ,/ 它/ 恢复/ 乱序/ 数据包/ 原始/ 顺序/ 的/ 时间/ 复杂度/ 仅为/ O/ (/ n/ )/ ,/ 且/ 引入/ 的/ 额外/ 延迟/ 不/ 超过/ 相邻/ 数据包/ 的/ 时间/ 间隔/ ./ 随后/ ,/ 本文/ 通过/ 与/ 现有/ 的/ 典型/ 网络层/ 软/ 切换/ 方法/ CSH/ 相/ 比较/ ,/ 从/ 切换/ 时延/ ,/ 有效/ 吞吐量/ 和/ 拥塞/ 窗口/ 等/ 方面/ 定量/ 地/ 分析/ 了/ 所/ 提/ 机制/ 对/ TCP/ 性能/ 的/ 影响/ ,/ 并/ 指出/ SHORDER/ 机制/ 的/ 适用/ 条件/ 为/ DW/ </ 3DL/ +/ 2D/ ,/ 其中/ ,/ DL/ 和/ DW/ 分别/ 为/ 从/ 家乡/ 代理/ 经/ 先前/ 网络/ 和/ 新/ 网络/ 到/ 移动/ 终端/ 的/ 路径/ 时延/ ,/ 而/ D/ 为/ 通信/ 节点/ 与/ 家乡/ 代理/ 之间/ 的/ 路径/ 时延/ ./ 基于/ 此/ ,/ 本文/ 进一步/ 改进/ 了/ SHORDER/ 方法/ ./ 最后/ ,/ 本文/ 通过/ 原型/ 系统/ 实验/ ,/ 显示/ 出所提/ 方法/ 在/ 其/ 适用/ 场景/ 中/ 的/ 良好/ 性能/ 以及/ 实验/ 结果/ 与/ 数值/ 分析/ 之间/ 的/ 一致性/ ./ 

