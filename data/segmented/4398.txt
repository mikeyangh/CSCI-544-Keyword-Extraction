Page1/ 基于/ 上下文/ 定界/ 的/ 递归/ 队列/ 并发程序/ 可达性/ 分析/ 钱俊彦/ 1/ )/ ,/ 2/ )/ 贾书贵/ 1/ )/ 赵岭忠/ 1/ )/ 郭云川/ 3/ )/ 1/ )/ (/ 桂林/ 电子科技/ 大学/ 广西/ 可信/ 软件/ 重点/ 实验室/ 广西/ 桂林/ 541004/ )/ 2/ )/ (/ 武汉大学/ 软件工程/ 国家/ 重点/ 实验室/ 武汉/ 430072/ )/ 3/ )/ (/ 中国科学院/ 信息工程/ 研究所/ 北京/ 100093/ )/ 摘要/ 基于/ 无界/ FIFO/ 消息/ 队列/ 的/ 通信/ 框架/ 作为/ 一种/ 通用/ 的/ 并发/ 系统/ 模型/ ,/ 常用/ 于/ 事件驱动/ 的/ 并发程序/ 或/ 分布式/ 程序/ 建模/ ./ 然而/ 当/ 模型/ 包含/ 递归/ 过程/ 调用/ 时/ ,/ 即使/ 仅/ 考虑/ 执行/ 有限/ 次/ 上下文/ 切换/ ,/ 其/ 可达性/ 问题/ 仍/ 是/ 不可判定/ 的/ ./ 假定/ 进程/ 的/ 消息/ 队列/ 约束/ 为/ 良序/ ,/ 即仅/ 当/ 进程/ 的/ 局部/ 栈为/ 空时/ 才能/ 从/ 队列/ 中/ 读取/ 消息/ ,/ 则/ 其/ 在/ 上下文/ 切换/ 定界/ 上/ 的/ 可达性/ 为/ 可/ 判定/ ./ 文中/ 以/ 基于/ 队列/ 通信/ 的/ 递归/ 并发程序/ 为/ 对象/ ,/ 研究/ 其/ 可达性/ 问题/ ./ 首先/ 构造/ 能/ 模拟/ 递归/ 队列/ 并发程序/ 执行/ 的/ 多/ 栈下推/ 系统/ ,/ 并/ 提出/ 转换方法/ ;/ 然后/ 给出/ 一种/ 基于/ 多/ 栈下推/ 系统/ 的/ 上下文/ 切换/ 定界/ 可/ 达/ 算法/ ,/ 算法/ 使用/ 标准/ Post/ / 操作/ 描述/ 下推/ 系统/ 的/ 迭代/ ,/ 基于/ 良序/ 排队/ 控制/ 进程/ 对/ 队列/ 的/ 出队/ 操作/ ,/ 穷尽/ 地/ 计算/ k/ 次/ 上下文/ 切换/ 之内/ 的/ 正向/ 可/ 达/ 格局/ ,/ 并/ 证明/ 了/ 构造/ 多/ 栈下推/ 系统/ 方法/ 和/ 上下文/ 切换/ 定界/ 可/ 达/ 算法/ 的/ 正确性/ ;/ 最后/ 对/ 目标/ 状态/ 集合/ 与/ 可达/ 格局/ 状态/ 集合/ 的/ 交集/ 进行/ 判空/ ,/ 确定/ 目标/ 状态/ 是否/ 可/ 达/ ,/ 从而/ 较/ 好地解决/ 此类/ 并发程序/ 的/ 可达性/ 问题/ ./ 关键词/ 上下文/ 定界/ ;/ 良序/ 排队/ ;/ 可达性/ ;/ 递归/ ;/ 并发程序/ 1/ 引言/ 基于/ 消息/ 队列/ 通信/ 框架/ 作为/ 一种/ 通用/ 的/ 并发/ 系统/ 模型/ ,/ 常用/ 于/ 事件驱动/ 的/ 并发程序/ 或/ 基于/ 网络通信/ 的/ 分布式/ 程序/ 的/ 信任/ 建模/ ./ 递归/ 队列/ 并发程序/ 通信/ 框架/ 是/ 一种/ 典型/ 的/ 基于/ 消息/ 队列/ 通信/ 的/ 并发程序/ 模型/ ,/ 其/ 任务/ 通常/ 作为/ 队列/ 中/ 的/ 消息/ ,/ 在/ 发布/ 任务/ 时/ ,/ 进行/ 入队/ 操作/ ;/ 执行/ 任务/ 时/ ,/ 进行/ 出队/ 操作/ ./ 此类/ 程序/ 基于/ 事件驱动/ 可/ 高效/ 、/ 及时/ 地/ 对外部/ 操作/ 进行/ 响应/ ,/ 被/ 广泛/ 地/ 应用/ 于/ 事件驱动/ 下/ 的/ 应用程序/ ,/ 如/ Windows/ 平台/ ./ 为/ 充分发挥/ 多核/ 体系/ 架构/ 的/ 强大/ 处理/ 能力/ ,/ 并发/ 系统/ 往往/ 根据/ 实际/ 负载/ 情况/ ,/ 通过/ 消息/ 队列/ 或/ 网络通信/ 的/ 方式/ ,/ 动态/ 地/ 调度/ 待处理/ 的/ 多个/ 任务/ 进行/ 并发/ 处理/ ./ 然而/ ,/ 在/ 并发/ 处理/ 中/ 任何/ 潜在/ 的/ 缺陷/ 或/ 错误/ 可能/ 造成/ 系统/ 运行/ 异常/ ,/ 甚至/ 导致/ 崩溃/ ./ 为了/ 防止/ 这些/ 问题/ ,/ 一种/ 有效/ 方式/ 是/ 采用/ 模型/ 检验/ 工具/ 来/ 分析/ 此类/ 系统/ 安全性/ [/ 1/ ]/ ./ 目前/ ,/ 研究/ 保障/ 此类/ 系统/ 安全性/ 的/ 模型/ 检验/ 已/ 成为/ 当前/ 学术界/ 的/ 一个/ 研究/ 热点/ 和/ 难点/ ./ 模型/ 检验/ 队列/ 模型/ (/ 即/ 基于/ 消息/ 队列/ 通信/ 的/ 模型/ )/ 的/ 主要/ 难题/ 是/ 无界/ FIFO/ (/ FirstInputFirstOutput/ )/ 队列/ 可能/ 引起/ 状态/ 空间/ 爆炸/ 问题/ ./ 一些/ 研究/ 人员/ 采用/ 基于/ 自动机/ 理论/ 来/ 分析/ 与/ 验证/ 此类/ 系统/ ,/ 譬如/ ,/ 基于/ 有损/ 信道/ 通信/ 的/ 系统/ [/ 2/ ]/ 、/ 队列/ 系统/ 的/ 约束/ 模型/ —/ —/ —/ 基于/ 单个/ 队列/ 通信/ 的/ 系统/ [/ 3/ ]/ 、/ 基于/ 特定/ 类型/ 消息/ 队列/ 通信/ 的/ 系统/ [/ 4/ ]/ 、/ 任意/ 时刻/ 仅/ 单个/ 队列/ 运行/ 的/ 半双工/ 传输/ 系统/ [/ 5/ ]/ 以及/ 基于/ 单个/ 队列/ 通信/ 的/ 多/ 计数器/ 系统/ [/ 6/ ]/ 等/ ./ 另外/ ,/ Jhala/ 等/ 人/ [/ 7/ ]/ 提出/ 基于/ 消息/ 计数器/ 限界/ 分析/ 异步/ 程序/ 的/ 数据流/ ./ 为了/ 进一步/ 有效/ 地/ 抑制/ 状态/ 空间/ 爆炸/ ,/ 一种/ 有效/ 的/ 方式/ 是/ 采用/ 上下文/ 定界/ 的/ 分析方法/ 来/ 限定/ 上下文/ 切换/ 次数/ ./ 实验/ 表明/ :/ 许多/ 并发/ 相关/ 的/ 错误/ 可/ 在/ 极少数/ 上下文/ 切换/ 执行/ 中/ 显现出来/ ,/ 故/ 穷尽/ 搜索/ 有限/ 次/ 上下文/ 切换/ 执行/ 能够/ 高效/ 地/ 查找/ 程序/ 中/ 隐匿/ 的/ 错误/ 和/ 漏洞/ [/ 8/ ]/ ./ 由于/ 上下文/ 定界/ 的/ 有效性/ ,/ 一些/ 研究/ 人员/ 在/ 上下文/ 定界/ 方面/ 开展/ 了/ 许多/ 研究/ ,/ 例如/ 异步/ 动态/ 下推/ 系统/ [/ 9/ ]/ 、/ 包含/ 有限/ 可见/ 堆/ 系统/ [/ 10/ ]/ 及/ 递归/ 布尔/ 程序/ [/ 11/ ]/ 的/ 上下文/ 定界/ 分析/ ./ 然而/ 当/ 并发/ 模型/ 包含/ 递归/ 过程/ 调用/ 时/ ,/ 即使/ 仅/ 考虑/ 执行/ 有限/ 次/ 上下文/ 切换/ ,/ 其/ 可达性/ 问题/ 仍/ 是/ 不可判定/ 的/ ./ 为了/ 使/ 上下文/ 切换/ 定界/ 可达性/ 问题/ 可/ 判定/ ,/ 约束/ 系统/ 进程/ 的/ 消息/ 队/ 列为/ 良序/ :/ 即仅/ 当/ 进程/ 的/ 局部/ 栈为/ 空时/ ,/ 进程/ 才能/ 从/ 队列/ 中/ 读取/ 消息/ ./ Salvatore/ 等/ 针对/ 并发/ 队列/ 系统/ 可达性/ 问题/ 的/ 研究/ 表明/ :/ 任何时刻/ 单个/ 递归/ 进程/ 执行/ 的/ 异步/ 程序/ ,/ 若仅/ 当/ 进程/ 的/ 局部/ 栈为/ 空时/ 才能/ 读取/ 任务/ 时/ ,/ 则/ 其/ 可达性/ 问题/ 是/ 可/ 判定/ 的/ [/ 12/ -/ 13/ ]/ ./ 但/ Salvatore/ 等/ 未能/ 提出/ 相应/ 的/ 可达性/ 求解/ 算法/ ./ Qadeer/ 等/ 人/ [/ 14/ ]/ 在/ 2004/ 年/ 首次/ 提出/ 并发/ 系统/ 的/ 上下文/ 定界/ 分析/ ,/ 并/ 证明/ 了/ 在/ 基于/ 共享内存/ 通信/ 的/ 递归/ 布尔/ 程序/ 上/ ,/ 其/ 上下文/ 定界/ 可达性/ 问题/ 是/ 可/ 判定/ 的/ ,/ 同时/ ,/ 给出/ 了/ 基于/ 该/ 思想/ 的/ KISS/ 框架/ ./ 2005/ 年/ Qadeer/ 等/ 人/ [/ 8/ ]/ 提出/ 了/ 上下文/ 定界/ 可/ 达/ 算法/ ,/ 然而/ 该/ 算法/ 没有/ 考虑/ 消息/ 队列/ 通信/ ,/ 故仅/ 适用/ 于/ 基于/ 共享/ 变量/ 通信/ 的/ 并发/ 系统/ ,/ 不适/ 用于/ 基于/ 消息/ 队列/ 通信/ 的/ 并发/ 递归/ 程序/ 的/ 可达性/ 分析/ ./ 本文/ 基于/ 队列/ 通信/ 并发/ 系统/ 的/ 可/ 判定/ 理论/ ,/ 对/ Qadeer/ 等/ 人/ 的/ 上下文/ 定界/ 可/ 达/ 算法/ 进行/ 了/ 改进/ 、/ 扩展/ ,/ 提出/ 一种/ 适用/ 于/ 多/ 栈下推/ 系统/ 上下文/ 切换/ 定界/ 可/ 达/ 问题/ 的/ 判定/ 算法/ ,/ 使/ 之/ 在/ 计算/ 某/ 一个/ 上下文/ 的/ 正向/ 可/ 达/ 格局/ 集合/ 时/ ,/ 采用/ 基于/ 多/ 栈下推/ 系统/ 的/ 操作/ 语义/ 来/ 处理/ 相应/ 的/ pop/ 、/ push/ 操作/ ./ 该/ 算法/ 同时/ 适用/ 于/ 基于/ 共享/ 变量/ 通信/ 的/ 和/ 基于/ 消息/ 队列/ 通信/ 的/ 并发/ 递归/ 程序/ 可达性/ 求解/ ./ 具体/ 地/ 讲/ ,/ 本文/ 研究/ 基于/ FIFO/ 队列/ 通信/ 的/ 有限/ 状态/ 递归/ 程序/ 的/ 可达性/ 问题/ ./ 方法/ 如下/ :/ 给定/ 一个/ 递归/ 队列/ 并发程序/ ,/ 首先/ ,/ 构造/ 模拟/ 递归/ 队列/ 并发程序/ 执行/ 的/ 多/ 栈下推/ 系统/ ,/ 将/ 其/ 上下文/ 切换/ 定界/ 可达性/ 问题/ 转换/ 为/ 多/ 栈下推/ 系统/ 的/ 阶/ 定界/ 可达性/ 问题/ (/ k/ 上下文/ 切换/ 对应/ 于/ 3k/ +/ 1/ 个阶/ )/ ./ 其次/ ,/ 基于/ 上下文/ 定界/ 思想/ 和/ 良序/ 排队/ 约束/ ,/ 提出/ 一种/ 针对/ 多/ 栈下推/ Page3/ 系统/ 的/ 上下文/ 定界/ 可/ 达/ 算法/ 来/ 作为/ 求解/ 递归/ 队列/ 并发程序/ 可达性/ 问题/ 的/ 算法/ 基础/ ./ 该/ 算法/ 使用/ 标准/ Post/ / 操作/ 描述/ 每个/ 下推/ 系统/ 的/ 迭代/ 过程/ ,/ 基于/ 良序/ 排队/ 定义/ 控制/ 进程/ 对/ 队列/ 的/ 出队/ 操作/ ,/ 通过/ 下文/ 切换/ 函数/ 实现/ 上下文/ 的/ 切换/ ,/ 穷尽/ 地/ 计算/ k/ 次/ 上下文/ 切换/ 内/ 正向/ 可达/ 的/ 格局/ ./ 最后/ 对/ 目标/ 状态/ 集合/ 与/ 可达/ 格局/ 状态/ 集合/ 的/ 交集/ 进行/ 判空/ ,/ 从而/ 较/ 好/ 解决/ 此类/ 递归/ 队列/ 并发程序/ 的/ 可达性/ 问题/ ./ 在/ 此基础/ 上/ ,/ 对/ 上下文/ 切换/ 可/ 达/ 算法/ 的/ 适用性/ 加以/ 扩展/ ,/ 通过/ 局部/ 性质/ 的/ 可达性/ 求解/ ,/ 然后/ 使用/ 组合/ 方法/ 对系统/ 待/ 验证/ 的/ 整体/ 性质/ 进行/ 验证/ ,/ 减少/ 单次/ 可达性/ 求解/ 的/ 时间/ 和/ 空间/ 代价/ ,/ 使得/ 能/ 处理/ 更为/ 复杂/ 的/ 问题/ ./ 本文/ 第/ 2/ 节是/ 队列/ 系统/ 的/ 基础/ 定义/ ,/ 并/ 简要/ 介绍/ 下推/ 系统/ 和/ 多/ 栈下推/ 系统/ ;/ 第/ 3/ 节/ 给出/ 构造/ 可/ 模拟/ 良序/ 排队/ 的/ 递归/ 程序执行/ 的/ 多/ 栈下推/ 系统/ 的/ 转换方法/ ;/ 第/ 4/ 节/ 提出/ 一种/ 针对/ 多/ 栈下推/ 系统/ 的/ 上下文/ 切换/ 定界/ 可/ 达/ 算法/ ,/ 该/ 算法/ 可/ 穷尽/ 地/ 计算/ 多/ 栈下推/ 系统/ 在/ k/ 次/ 上下文/ 切换/ 内/ 正向/ 可达/ 的/ 格局/ 集合/ ,/ 为/ 解决/ 递归/ 队列/ 并发程序/ 的/ (/ 状态/ )/ 可达性/ 问题/ 提供/ 了/ 算法/ 基础/ ;/ 第/ 5/ 节/ 给出/ 基于/ 局部/ 性质/ 可达性/ 求解/ 的/ 组合/ 验证/ 思想/ ;/ 第/ 6/ 节/ 举例说明/ 算法/ 步骤/ ,/ 并/ 对/ 可能/ 的/ 求解/ 结果/ 进行/ 分析/ ;/ 第/ 7/ 节/ 总结/ 全文/ 并/ 指出/ 进一步/ 的/ 研究/ 工作/ ./ 2/ 队列/ 系统/ 与/ 下推/ 系统/ 本/ 节/ 简要/ 介绍/ 基于/ 无界/ FIFO/ 队列/ 和/ 共享内存/ 通信/ 的/ 并发/ 系统/ ,/ 以及/ 下推/ 系统/ 和/ 多/ 栈下推/ 系统/ ./ 此类/ 并发/ 系统/ 含/ 有限/ 个/ 进程/ ,/ 进程/ 之间/ 通过/ 共享内存/ 和/ 消息/ 队列/ 进行/ 通信/ ./ 进程/ 状态/ 由/ 状态/ 格局/ 进行/ 描述/ ,/ 包括/ 进程/ 的/ 控制/ 位置/ 、/ 局部变量/ 及/ 进程/ 所/ 访问/ 共享内存/ 的/ 赋值/ ./ 每个/ 消息/ 队列/ 具有/ 唯一/ 的/ 发送/ 进程/ 和/ 接收/ 进程/ ,/ 其/ 字母表/ 是/ 有限/ 的/ ,/ 但/ 存储/ 的/ 消息/ 数目/ 是/ 无界/ 的/ ./ 定义/ 1/ ./ 体系结构/ ./ 一个/ 体系结构/ 是/ 一个/ 四元组/ (/ P/ ,/ Q/ ,/ Sender/ ,/ Receiver/ )/ ,/ 其中/ P/ 是/ 有限/ 进程/ 集合/ ,/ Q/ 是/ 有限/ 队列/ 集合/ ,/ Sender/ :/ Q/ →/ P/ 和/ Receiver/ :/ Q/ →/ P/ 是/ 两个/ 指派/ 函数/ ,/ 分别/ 为/ 每个/ 队列/ q/ ∈/ Q/ 指派/ 唯一/ 的/ 发送/ 进程/ 和/ 接收/ 进程/ ,/ 并/ 规定/ 每个/ 队列/ 的/ 发送/ 进程/ 和/ 接收/ 进程/ 是/ 不同/ 的/ :/ 即/ 对于/ q/ ∈/ Q/ ,/ Sender/ (/ q/ )/ ≠/ Receiver/ (/ q/ )/ ./ 文中/ 使用/ p/ 、/ p/ 、/ pi/ 等/ 符号/ 表示/ 集合/ P/ 中/ 的/ 进/ Sender/ (/ q/ )/ =/ p/ ./ Receiver/ (/ q/ )/ =/ p/ ./ 程/ ,/ 使用/ q/ 、/ q/ 等/ 符号/ 表示/ 集合/ Q/ 中/ 的/ 队列/ ./ 2.1/ 基于/ 队列/ 通信/ 的/ 递归/ 程序/ 假定/ Π/ 表示/ 有限/ 的/ 消息/ 字母表/ ,/ A/ =/ (/ P/ ,/ Q/ ,/ Sender/ ,/ Receiver/ )/ 是/ 一个/ 体系结构/ ,/ 则/ 进程/ p/ ∈/ P/ 的/ 动作/ 的/ 形式/ 如下/ :/ (/ 1/ )/ p/ :/ send/ (/ q/ ,/ m/ )/ ,/ 其中/ m/ ∈/ Π/ ,/ q/ ∈/ Q/ ,/ 且/ (/ 2/ )/ p/ :/ recv/ (/ q/ ,/ m/ )/ ,/ 其中/ m/ ∈/ Π/ ,/ q/ ∈/ Q/ ,/ 且/ (/ 3/ )/ p/ :/ int/ ,/ 或者/ p/ :/ call/ 或者/ p/ :/ ret/ ./ 其中/ 动作/ p/ :/ send/ (/ q/ ,/ m/ )/ 表示/ 进程/ p/ 向/ 队列/ q/ 中/ 写入/ 消息/ m/ (/ 队列/ q/ 被/ 预先/ 定义/ 为/ 进程/ p/ 的/ 接收/ 队列/ )/ ;/ p/ :/ recv/ (/ q/ ,/ m/ )/ 表示/ 进程/ p/ 从/ 队列/ q/ 中/ 读取/ 消息/ m/ ;/ p/ :/ int/ 表示/ 进程/ p/ 的/ 不/ 处理/ 队列/ 的/ 内部/ 动作/ ;/ p/ :/ call/ 和/ p/ :/ ret/ 为栈/ 动作/ ,/ p/ :/ call/ 相当于/ 进程/ p/ 的/ 局部/ 过程/ 调用/ ,/ 进程/ p/ 将/ 调用/ 地址/ 、/ 局部变量/ 的/ 赋值/ 等/ 数据/ 存储/ 到/ 局部/ 栈/ 的/ 栈顶/ ,/ 并/ 迁移/ 到/ 新/ 状态/ ;/ p/ :/ ret/ 相当于/ 进程/ p/ 中/ 过程/ 调用/ 的/ 返回/ ,/ 弹/ 出/ 局部/ 栈/ 的/ 内容/ 并/ 迁移/ 到/ 新/ 状态/ ,/ 该/ 新/ 状态/ 取决于/ 进程/ p/ 的/ 当前/ 状态/ 和/ 从/ 栈/ 中/ 读取/ 的/ 数据/ ./ 假定/ Actp/ 表示/ 进程/ p/ 的/ 动作/ 集合/ ,/ Act/ =/ ∪/ p/ ∈/ PActp/ 表示/ P/ 中/ 所有/ 进程/ 的/ 动作/ 集合/ ./ Calls/ 表示/ 调用/ 动作/ 的/ 集合/ {/ p/ :/ call/ |/ p/ ∈/ P/ }/ ,/ Rets/ 表示/ 返回/ 动作/ 的/ 集合/ {/ p/ :/ ret/ |/ p/ ∈/ P/ }/ ./ 定义/ 2/ ./ 递归/ 队列/ 并发程序/ [/ 13/ ]/ ./ 给定/ 一个/ 体系结构/ A/ =/ (/ P/ ,/ Q/ ,/ Sender/ ,/ Receiver/ )/ ,/ 其上/ 的/ 递归/ 队列/ 并发程序/ 是/ 一个/ 五元/ 组/ R/ =/ (/ S/ ,/ s0/ ,/ Π/ ,/ Γ/ ,/ {/ Tp/ }/ p/ ∈/ P/ )/ ,/ 其中/ S/ 是/ 有限/ 的/ 状态/ 集合/ ,/ s0/ ∈/ S/ 是/ 初始状态/ ,/ Π/ 是/ 有限/ 的/ 消息/ 字母表/ ,/ Γ/ 是/ 有限/ 的/ 栈字母表/ ,/ Tp/ 是/ 进程/ p/ 的/ 迁移/ 关系/ 集合/ ./ 假定/ Actp/ 是/ 进程/ p/ 在/ 消息/ 字母表/ Π/ 上/ 的/ 动作/ 集合/ ,/ 则/ 迁移/ 关系/ 集合/ Tp/ 形式/ 如下/ :/ Tp/ / (/ S/ ×/ (/ Actp/ \/ {/ p/ :/ call/ ,/ p/ :/ ret/ }/ )/ ×/ S/ )/ ∪/ 给定/ 递归/ 队列/ 并发程序/ R/ ,/ 其/ 格局/ 为/ 一个/ 三元组/ (/ s/ ,/ {/ σ/ p/ }/ p/ ∈/ P/ ,/ {/ μ/ q/ }/ q/ ∈/ Q/ )/ ,/ 其中/ s/ ∈/ S/ 是/ 状态/ ;/ 对于/ 进程/ p/ ∈/ P/ ,/ σ/ p/ ∈/ Γ/ / 是/ 进程/ p/ 的/ 局部/ 栈/ 内容/ ,/ 进程/ p/ 的/ 栈顶/ 内容/ 位于/ σ/ p/ 的/ 最/ 左端/ ,/ 栈底/ 内容/ 位于/ σ/ p/ 的/ 最/ 右端/ ;/ 对于/ 队列/ q/ ∈/ Q/ ,/ μ/ q/ ∈/ Π/ / 是/ 队列/ q/ 的/ 内容/ ,/ 队列/ q/ 的/ 队尾/ 消息/ 位于/ μ/ q/ 的/ 最/ 左端/ ,/ 队头/ 消息/ 位于/ μ/ q/ 的/ 最/ 右端/ ./ 格局/ 之间/ 的/ 迁移/ 关系/ 操作/ 语义/ 如图/ 1/ 所示/ ./ Page4/ 给定/ 递归/ 队列/ 并发程序/ R/ =/ (/ S/ ,/ s0/ ,/ Π/ ,/ Γ/ ,/ 图/ 1/ 递归/ 队列/ 并发程序/ R/ 的/ 操作/ 语义/ {/ Tp/ }/ p/ ∈/ P/ )/ ,/ 其/ 运行/ 是/ 一个/ 迁移/ 序列/ :/ c0actn/ →/ / / / -/ 1cn/ -/ 1/ ·/ ·/ =/ ε/ }/ q/ ∈/ Q/ )/ 表示/ 初始/ 格局/ ,/ 栈/ σ/ p/ 和/ 队列/ μ/ q/ 的/ 初始/ {/ μ/ q/ 化/ 都/ 为/ 空/ ,/ 状态/ 格局/ cn/ =/ (/ s/ ^/ ,/ {/ σ/ p/ }/ p/ ∈/ P/ ,/ {/ μ/ q/ }/ q/ ∈/ Q/ )/ 为/ 可达/ 状态/ 格局/ ,/ 蕴含/ 状态/ s/ ^/ 是/ 可达/ 的/ ./ 基于/ 队列/ 通信/ 的/ 递归/ 程序/ 的/ 可达性/ 问题/ 描述/ 为/ :/ 给定/ 递归/ 队列/ 并发程序/ R/ 和/ 目标/ 状态/ 集合/ T/ / S/ ,/ 确定/ R/ 经过/ 某次/ 运行/ ,/ 状态/ s/ ^/ ∈/ T/ 是否/ 可达/ ./ 2.2/ 上下文/ 切换/ 定界/ 队列/ 系统/ 的/ 上下文/ 定义/ 为/ :/ 对于/ 进程/ ,/ 任意/ 长度/ 的/ 连续/ 执行/ 操作/ ,/ 进程/ 仅/ 可/ 从/ 一个/ 队列/ 中/ 读取/ 消息/ ,/ 但/ 可/ 向/ 所有/ 输出/ 消息/ 队列/ 写入/ 消息/ ./ 其/ 上下文/ 定界/ 的/ 可达性/ 问题/ 可/ 描述/ 为/ :/ 经过/ 有限/ 次/ 上下文/ 切换/ 的/ 运行/ ,/ 某个/ 状态/ 格局/ (/ 或/ 全局/ 状态/ )/ 是否/ 可达/ ./ 基于/ 上下文/ 定界/ 的/ 方法/ 能/ 获得/ 良好/ 的/ 状态/ 空间/ 覆盖度/ [/ 15/ ]/ ,/ 并/ 能/ 高效/ 地/ 搜索/ 进程/ 间/ 的/ 交错/ ./ 由于/ 队列/ 系统/ 的/ 可达性/ 问题/ 通常/ 是/ 不可判定/ 的/ ,/ 故/ 基于/ 上下文/ 切换/ 定界/ 研究/ 队列/ 系统/ 可达性/ 问题/ 显得/ 尤为重要/ ./ 假定/ 进程/ 至多/ 可/ 从/ 一个/ 队列/ q/ 中/ 读取/ 消息/ ,/ 但/ 可/ 向/ 所有/ 的/ 输出/ 队列/ 写入/ 消息/ ,/ 则/ 队列/ 系统/ 的/ 上下文/ 描述/ 可/ 为/ 单个/ 进程/ 的/ 连续/ 执行/ 序列/ ./ 给定/ 满足条件/ Receiver/ (/ q/ )/ =/ p/ 的/ 进程/ p/ 和/ 队列/ q/ ,/ 令/ Actp/ ,/ q/ =/ {/ p/ :/ int/ ,/ p/ :/ call/ ,/ p/ :/ ret/ }/ ∪/ {/ p/ :/ send/ (/ q/ ,/ m/ )/ |/ q/ ∈/ Q/ ,/ Sender/ (/ q/ )/ =/ p/ ,/ m/ ∈/ Π/ }/ ∪/ {/ p/ :/ recv/ (/ q/ ,/ m/ )/ |/ m/ ∈/ Π/ }/ (/ Actp/ ,/ q/ 表示/ 进程/ p/ 从/ 队列/ q/ 中/ 读取/ 消息/ 的/ 动作/ 集合/ )/ ,/ 如果/ 集合/ {/ i/ |/ acti/ ∈/ Actp/ ,/ q/ ,/ acti/ +/ 1/ / Actp/ ,/ q/ ,/ p/ ∈/ P/ ,/ q/ ∈/ Q/ }/ 的/ 基数/ 至多是/ k/ ∈/ / ,/ 则/ 运行/ c0c2/ …/ actn/ →/ / / / -/ 1cn/ -/ 1/ 递归/ 队列/ 并发程序/ 的/ 上下文/ 切换/ 定界/ 可达性/ 问题/ 描述/ 为/ :/ 给定/ 递归/ 队列/ 并发程序/ R/ ,/ 目标/ 状态/ 集合/ T/ 和/ 正整数/ k/ ∈/ / ,/ 确定/ 经过/ 至多/ k/ 次/ 上下文/ 切换/ 的/ 运行/ ,/ T/ 中/ 目标/ 状态/ 是否/ 可达/ ./ 2.3/ 良序/ 排队/ 递归/ 队列/ 并发程序/ 是/ 良序/ 排队/ 的/ ,/ 当且/ 仅/ 当/ 进程/ p/ ∈/ P/ 的/ 局部/ 栈为/ 空时/ ,/ 才/ 可/ 从/ 对应/ 的/ 消息/ 队列/ 中/ 读取/ 消息/ ./ 也就是说/ ,/ 良序/ 排队/ 的/ 递归/ 队列/ 并发程序/ 不/ 存在/ 如下/ 形式/ 的/ 运行/ :/ c0act/ →/ / / ncn/ ,/ 其中/ cn/ -/ 1/ =/ (/ s/ ,/ {/ σ/ p/ }/ p/ ∈/ P/ ,/ {/ μ/ q/ }/ q/ ∈/ Q/ )/ ,/ cn/ -/ 1actn/ -/ 1/ =/ p/ :/ recv/ (/ q/ ,/ m/ )/ ,/ 且/ σ/ p/ ≠/ ε/ ,/ 即/ 进程/ 的/ 局部/ 栈不为/ 空时/ ,/ 不能/ 执行/ 动作/ p/ :/ recv/ (/ q/ ,/ m/ )/ ./ 由于/ 进程/ 处理/ 任务/ 时/ ,/ 直至/ 执行/ 结束/ 时才/ 处理/ 下/ 一个/ 任务/ ,/ 中途/ 不/ 允许/ 被/ 中断/ [/ 16/ ]/ ,/ 故良序/ 排队/ 的/ 约束/ 是/ 适当/ 的/ ./ 2.4/ 下推/ 系统/ 定义/ 3/ ./ 下推/ 系统/ ./ 一个/ 下推/ 系统/ 是/ 一个/ 三元组/ / =/ (/ G/ ,/ Γ/ ,/ Δ/ )/ ,/ 其中/ G/ 是/ 全局/ 状态/ 集合/ (/ 全局/ 状态/ 包括/ 进程/ 的/ 控制/ 位置/ 、/ 局部变量/ 以及/ 进程/ 所/ 访问/ 的/ 共享内存/ 赋值/ )/ ,/ Γ/ 是/ 栈字母表/ ,/ Δ/ / (/ G/ ×/ Γ/ )/ ×/ (/ G/ ×/ Γ/ / )/ 是/ 有限/ 的/ 迁移/ 关系/ 集合/ ./ 下推/ 系统/ / 的/ 格局/ c/ 是/ 一个/ 元组/ 〈/ g/ ,/ w/ 〉/ ,/ 其中/ g/ ∈/ G/ 是/ 全局/ 状态/ ,/ w/ ∈/ Γ/ / 是/ 包含/ 空串/ ε/ 的/ 有限/ 字符串/ ./ 格局/ 之间/ 的/ 迁移/ 系统/ →/ Δ/ 定义/ 如下/ :/ 对于/ 所有/ w/ ∈/ Γ/ / ,/ 〈/ g/ ,/ γ/ w/ 〉/ →/ Δ/ 〈/ g/ ,/ ww/ 〉/ 成立/ ,/ 当且/ 仅/ 当/ (/ 〈/ g/ ,/ γ/ 〉/ ,/ 〈/ g/ ,/ w/ 〉/ )/ ∈/ Δ/ ,/ 符号/ →/ / Δ/ 表示/ →/ Δ/ 的/ 自反/ 传递/ 闭包/ ./ 迁移/ 关系/ Δ/ 包含/ 如下/ 3/ 种/ 下推/ 规则/ :/ (/ 1/ )/ 〈/ g/ ,/ γ/ 〉/ →/ 〈/ g/ ,/ γ/ 1/ γ/ 〉/ 描述/ 栈/ 的/ pop/ 操作/ ,/ 该/ 规则/ 描述/ 某个/ 函数调用/ 或者/ 递归/ 过程/ 调用/ ,/ 即将/ 调用函数/ 的/ 地址/ 和/ 局部变量/ 的/ 值/ (/ 使用/ 符号/ γ/ 1/ 表示/ )/ 存储/ 到/ 栈顶/ ./ Page5/ (/ 2/ )/ 〈/ g/ ,/ γ/ 〉/ →/ 〈/ g/ ,/ ε/ 〉/ 描述/ 栈/ 的/ push/ 操作/ ,/ 该/ 规则/ 描述/ 函数调用/ 返回/ ,/ 即/ 调用/ 的/ 函数/ 或/ 过程/ 执行/ 结束/ 时/ ,/ 从栈/ 顶弹/ 出/ 被/ 调用函数/ 的/ 地址/ 及其/ 局部变量/ 赋值/ ,/ 返回/ 后/ 继续执行/ ,/ 如果/ 被/ 调用函数/ 具有/ 返回值/ ,/ 则/ 使用/ 某个/ 新/ 定义/ 的/ 变量/ 将/ 此/ 返回值/ 传递/ 给/ 调用/ 进程/ 的/ 全局/ 状态/ ./ (/ 3/ )/ 〈/ g/ ,/ γ/ 〉/ →/ 〈/ g/ ,/ γ/ 〉/ 描述/ 递归/ 过程/ 调用/ 和/ 函数/ 返回/ 之外/ 的/ 简单/ 操作/ ,/ 例如/ 赋值/ 语句/ ,/ 即仅/ 改变/ 全局/ 状态/ ,/ 当前/ 栈/ 内容/ 保持/ 不变/ ./ 定义/ 4/ ./ / 自动机/ [/ 17/ ]/ ./ 给/ 定下/ 推/ 系统/ / =/ (/ G/ ,/ Γ/ ,/ Δ/ )/ ,/ 则/ 对应/ 于/ 下推/ 系统/ 的/ / 自动机/ A/ =/ (/ Q/ ,/ Γ/ ,/ δ/ ,/ I/ ,/ F/ )/ 是/ 一个/ 有限/ 状态/ 自动机/ ,/ 其中/ Q/ / G/ 是/ 一个/ 有限/ 状态/ 集合/ ,/ Γ/ 是/ 下推/ 系统/ / 的/ 字母表/ ,/ δ/ / Q/ ×/ {/ Γ/ ,/ ε/ }/ ×/ Q/ 是/ 迁移/ 关系/ ,/ I/ / Q/ 是/ 初始状态/ ,/ F/ / Q/ 是/ 终止/ 状态/ ./ 下推/ 系统/ 接受/ 格局/ 〈/ g/ ,/ w/ 〉/ ,/ 当且/ 仅/ 当/ 存在/ 终止/ 状态/ q/ ∈/ F/ ,/ 使得/ / 自动机/ A/ 满足/ :/ g/ →/ / / w/ / q/ ./ 下推/ 系统/ / 的/ 格局/ 集合/ 是/ 正则/ 的/ ,/ 当且/ 仅/ 当/ 存在/ 某个/ / 自动机/ 接受/ 该/ 格局/ 集合/ ./ 给定/ 初始/ 格局/ 为/ 〈/ gin/ ,/ win/ 〉/ 的/ 下推/ 系统/ / 和/ 格局/ 集合/ S/ / G/ ×/ Γ/ / ,/ 使用/ Post/ / Δ/ (/ S/ )/ 表示/ 格局/ 集合/ S/ 的/ 所有/ 正向/ 可达/ 的/ 格局/ 集合/ ,/ 即/ Post/ / Δ/ (/ S/ )/ =/ {/ c/ |/ / c/ ∈/ S/ ./ c/ →/ / Δ/ c/ }/ ,/ 可知/ 从/ 正则/ 格局/ 集合/ 通过/ 正向/ 可/ 达/ 获得/ 的/ 格局/ 集合/ 也/ 是/ 正则/ 的/ ./ 如果/ 下推/ 系统/ 正向/ 可达/ 的/ 格局/ 集合/ 是/ 正则/ 的/ ,/ 那么/ 其/ 可达性/ 问题/ 是/ 可/ 判定/ 的/ [/ 17/ -/ 18/ ]/ ./ 假定/ / 是/ 一个/ 下推/ 系统/ ,/ A/ 是/ 一个/ 正则/ 的/ 下推/ 自动机/ ,/ 自动机/ A/ 接受/ 的/ 格局/ 集合/ 是/ L/ (/ A/ )/ ,/ 则/ 存在/ 一个/ 满足/ 如下/ 条件/ 的/ 正则/ 下推/ 自动机/ A/ :/ Post/ / Δ/ (/ L/ (/ A/ )/ )/ =/ L/ (/ A/ )/ ./ 此外/ ,/ 根据/ 下推/ 系统/ / 和/ 下推/ 自动机/ A/ 可/ 构造/ 自动机/ A/ ,/ 其/ 时间/ 复杂度/ 与/ / 和/ A/ 的/ 大小/ 呈/ 多项式/ 关系/ [/ 19/ ]/ ./ 2.5/ 多/ 栈下推/ 系统/ 多/ 栈下推/ 系统/ 是/ 标准/ 下推/ 系统/ 的/ 一种/ 自然/ 扩展/ ,/ 系统/ 中/ 包含/ 多个/ 栈/ 结构/ ./ 形式/ 上/ ,/ 多/ 栈下推/ 系统/ (/ MultiStackPushdownSystems/ ,/ MSPS/ )/ 是/ 一个/ 元组/ / =/ (/ S/ ,/ s0/ ,/ St/ ,/ Γ/ ,/ Δ/ )/ ,/ 其中/ S/ 是/ 有限/ 状态/ 集合/ ,/ s0/ ∈/ S/ 是/ 初始状态/ ,/ St/ 是/ 有限/ 的/ 栈/ 集合/ ,/ Γ/ 是/ 栈字母表/ ,/ Δ/ =/ Δ/ int/ ∪/ Δ/ push/ ∪/ Δ/ pop/ 是/ 迁移/ 关系/ ,/ 其中/ Δ/ int/ / S/ ×/ S/ ,/ Δ/ push/ / S/ ×/ St/ ×/ Γ/ ×/ S/ ,/ 并且/ Δ/ pop/ / S/ ×/ St/ ×/ Γ/ ×/ S/ ./ 多/ 栈下推/ 系统/ / 的/ 格局/ c/ 是/ 一个/ 元组/ 〈/ s/ ,/ {/ σ/ st/ }/ st/ ∈/ St/ 〉/ ,/ 其中/ s/ ∈/ S/ 是/ / 的/ 当前/ 状态/ ,/ 包括/ 全局变量/ 的/ 赋值/ 和/ 程序/ 的/ 控制/ 位置/ ,/ 对于/ 任意/ 栈/ st/ ∈/ St/ ,/ σ/ st/ ∈/ Γ/ / 表示/ 栈/ st/ 的/ 内容/ ,/ 同时/ 假定/ 栈顶/ 的/ 符号/ 位于/ 栈/ 内容/ σ/ st/ 的/ 最/ 左端/ ./ / 的/ 初始/ 格局/ 是/ 〈/ s0/ ,/ {/ σ/ st/ }/ st/ ∈/ St/ 〉/ ,/ 对于/ 任意/ 栈/ st/ ∈/ St/ ,/ 每个/ 栈/ 初始化/ 都/ 为/ 空/ ,/ 即/ σ/ st/ =/ ε/ ./ 可/ 通过/ 格局/ 之间/ 的/ 迁移/ 关系/ Δ/ 得出/ / 的/ 操作/ 语义/ ,/ 如图/ 2/ 所示/ ,/ 格局/ 间/ 的/ 迁移/ 关系/ Δ/ 记/ 作/ 〈/ s/ ,/ {/ σ/ st/ }/ st/ ∈/ St/ 〉/ →/ / / δ/ 〈/ s/ ,/ {/ σ/ st/ }/ st/ ∈/ St/ 〉/ ./ 下文/ 如/ 不/ 做/ 特别/ 说明/ ,/ 则/ 对于/ 每个/ st/ ∈/ St/ ,/ σ/ st/ =/ σ/ st/ 成立/ ./ δ/ =/ (/ s/ ,/ s/ )/ ∈/ Δ/ int/ 〈/ s/ ,/ {/ σ/ st/ }/ st/ ∈/ St/ 〉/ →/ / / δ/ 〈/ s/ ,/ {/ σ/ st/ }/ st/ ∈/ St/ 〉/ 〈/ s/ ,/ {/ σ/ st/ }/ st/ ∈/ (/ St/ \/ {/ st/ }/ )/ ∪/ {/ σ/ st/ }/ 〉/ →/ / / δ/ 〈/ s/ ,/ {/ σ/ st/ }/ st/ ∈/ (/ St/ \/ {/ st/ }/ )/ ∪/ {/ a/ ./ σ/ st/ }/ 〉/ [/ Push/ ]/ 〈/ s/ ,/ {/ σ/ st/ }/ st/ ∈/ (/ St/ \/ {/ st/ }/ )/ ∪/ {/ a/ ./ σ/ st/ }/ 〉/ →/ / / δ/ 〈/ s/ ,/ {/ σ/ st/ }/ st/ ∈/ (/ St/ \/ {/ st/ }/ )/ ∪/ {/ σ/ st/ }/ 〉/ [/ Pop/ ]/ 多/ 栈下推/ 系统/ / 的/ 运行/ 是/ 一个/ 迁移/ 序列/ c0/ δ/ →/ / / 2c2/ …/ δ/ →/ / / ncn/ ,/ 如果/ c0/ 是/ / 的/ 初始/ 格局/ ,/ 且/ cn/ =/ c1/ 〈/ s/ ^/ ,/ {/ σ/ st/ }/ st/ ∈/ St/ 〉/ ,/ 则/ 状态/ s/ ^/ ∈/ S/ 是/ 可达/ 的/ ./ 定义/ 5/ ./ 阶段/ ./ 运行/ 的/ 一个/ 阶段/ (/ 简称/ 为阶/ )/ 是/ 运行/ 中/ 对/ 同一个/ 栈/ 执行/ pop/ 操作/ 的/ 执行/ 序列/ ./ 对于/ 正整数/ k/ ∈/ / ,/ 一个/ k/ -/ 阶/ 的/ 运行/ 至多/ 包含/ k/ 个/ 阶段/ ./ 如果/ 可/ 将/ 序列/ δ/ 1/ …/ δ/ n/ 划分/ 为/ 某个/ 新/ 序列/ α/ 1/ …/ α/ k/ ,/ 且/ 该/ 序列/ 满足/ 如下/ 条件/ :/ 对于/ 每个/ i/ =/ 1/ ,/ …/ ,/ k/ ,/ 存在/ 某个/ 栈/ st/ ∈/ St/ ,/ 使得/ 序列/ α/ i/ 包含/ 的/ 所有/ 规则/ δ/ ∈/ Δ/ pop/ 都/ 形如/ (/ s/ ,/ st/ ,/ a/ ,/ s/ )/ ,/ 则/ 多/ 栈下推/ 系统/ / 的/ 运行/ c0/ δ/ →/ / / 2c2/ …/ δ/ →/ / / ncn/ 是/ k/ -/ 阶/ 的/ ./ c1/ 因此/ ,/ 在/ 一个/ k/ -/ 阶/ 的/ 运行/ 中/ ,/ 执行/ pop/ 操作/ 的/ 栈/ 至多/ 切换/ k/ -/ 1/ 次/ (/ 阶/ -/ 切换/ )/ ./ 如果/ 经过/ 一个/ k/ -/ 阶/ 的/ 运行/ 可/ 到达/ 某个/ 状态/ ,/ 则/ 该/ 状态/ 是/ k/ -/ 阶可达/ 的/ ./ 阶/ 定界/ 可达性/ 问题/ 描述/ 为/ :/ 给定/ 多/ 栈下推/ 系统/ M/ ,/ 目标/ 状态/ 集合/ T/ 和/ 正整数/ k/ ∈/ / ,/ 确定/ 经过/ k/ -/ 阶/ 的/ 运行/ ,/ T/ 中/ 的/ 某个/ 状态/ 是否/ 到达/ ./ 多/ 栈下推/ 系统/ 的/ 阶/ 定界/ 可达性/ 问题/ 是/ 可/ 判定/ 的/ ,/ 其/ 时间/ 复杂度/ 与/ 状态/ 数目/ 呈/ 指数/ 关系/ ,/ 与/ 阶/ 的/ 数目/ 呈/ 双/ 指数/ 关系/ [/ 11/ ]/ ./ 3/ 递归/ 程序转换/ 为/ 多/ 栈下推/ 系统/ 本/ 节/ 给出/ 一种/ 递归/ 队列/ 程序/ 到/ 多/ 栈下推/ 系统/ 的/ 转换方法/ ,/ 基于/ 该/ 转换方法/ 可/ 构造/ 模拟/ 良序/ 排队/ 的/ 递归/ 队列/ 并发程序/ 执行/ 的/ 多/ 栈下推/ 系统/ ,/ 并/ 将/ 基于/ 良序/ 排队/ 的/ 递归/ 队列/ 并发程序/ 的/ 上下文/ 切换/ 定界/ 可达性/ 问题/ 转换/ 为/ 多/ 栈下推/ 系统/ 的/ 阶/ 定界/ Page6/ 可达性/ 问题/ ./ 给定/ 递归/ 队列/ 并发程序/ R/ =/ (/ S/ ,/ s0/ ,/ Π/ ,/ Γ/ ,/ {/ Tp/ }/ p/ ∈/ P/ )/ ,/ 可/ 构造/ 多/ 栈下推/ 系统/ / =/ (/ S/ ,/ s0/ ,/ St/ ,/ Γ/ M/ ,/ Δ/ )/ 来/ 模拟/ 良序/ 排队/ 的/ 递归/ 队列/ 并发程序/ R/ 的/ k/ -/ 上下文/ 切换/ 定界/ 执行/ ,/ 其中/ S/ 是/ 有限/ 的/ 状态/ 集合/ ;/ s0/ ∈/ S/ 是/ 初始状态/ ;/ St/ =/ {/ stw/ ∪/ {/ stp/ }/ p/ ∈/ P/ ∪/ {/ stq/ }/ q/ ∈/ Q/ }/ 是/ 栈/ 集合/ ,/ 其中/ stw/ 是/ 工作栈/ ,/ stp/ 是/ 每个/ 进程/ p/ ∈/ P/ 对应/ 的/ 局部/ 栈/ ,/ stq/ 是/ 每个/ 队列/ q/ ∈/ Q/ 对应/ 的/ 栈/ ,/ 各个/ 栈/ 初始化/ 为空/ ;/ Γ/ M/ =/ Π/ ∪/ Γ/ 是/ 字母表/ ,/ 其中/ Π/ 是/ 队列/ 对应/ 的/ 栈字母表/ ,/ Γ/ 是/ 进程/ 对应/ 的/ 局部/ 栈/ 的/ 字母表/ ;/ 迁移/ 关系/ Δ/ =/ Δ/ int/ ∪/ Δ/ pop/ ∪/ Δ/ push/ ,/ 如图/ 3/ 所示/ ,/ 描述/ 了/ 在/ 上下文/ (/ p/ ^/ ,/ q/ ^/ )/ 内/ ,/ 进程/ p/ ^/ 可/ 执行/ 的/ 迁移/ 关系/ 转换/ 为/ 多/ 栈下推/ 系统/ 的/ 迁移/ 关系/ ./ (/ s/ ,/ p/ ^/ :/ int/ ,/ s/ )/ ∈/ Tp/ ^/ (/ s/ ,/ p/ ^/ :/ int/ ,/ s/ )/ ∈/ Δ/ int/ (/ s/ ,/ p/ ^/ :/ send/ (/ q/ ,/ m/ )/ ,/ s/ )/ ∈/ Tp/ ^/ Sender/ (/ q/ )/ =/ p/ ^/ (/ s/ ,/ p/ ^/ :/ call/ ,/ s/ ,/ γ/ )/ ∈/ Tp/ ^/ (/ s/ ,/ p/ ^/ :/ call/ ,/ s/ ,/ γ/ )/ ∈/ Δ/ push/ (/ s/ ,/ p/ ^/ :/ recv/ (/ q/ ^/ ,/ m/ )/ ,/ s/ )/ ∈/ Tp/ ^/ Receiver/ (/ q/ ^/ )/ =/ p/ ^/ (/ s/ ,/ p/ ^/ :/ ret/ ,/ γ/ ,/ s/ )/ ∈/ Tp/ ^/ (/ s/ ,/ p/ ^/ :/ ret/ ,/ γ/ ,/ s/ )/ ∈/ Δ/ pop/ 图/ 3/ 多/ 栈下推/ 系统/ / 迁移/ 关系/ 集合/ Δ/ 的/ 操作/ 语义/ 假定/ 递归/ 队列/ 并发程序/ R/ 的/ 进程/ p/ ^/ 的/ 迁移/ 关系/ 集合/ 是/ Tp/ ^/ ,/ 多/ 栈下推/ 系统/ / 的/ 迁移/ 关系/ 集合/ 是/ Δ/ =/ Δ/ int/ ∪/ Δ/ push/ ∪/ Δ/ pop/ ./ 规则/ [/ internal/ ]/ 将/ p/ ^/ 可/ 执行/ 的/ 内部/ 迁移/ 关系/ 添加/ 到/ 多/ 栈下推/ 系统/ / 的/ 内部/ 迁移/ 集合/ Δ/ int/ ;/ 规则/ [/ pushq/ ]/ 和/ [/ popq/ ]/ 分别/ 将/ p/ ^/ 可/ 执行/ 的/ 队列/ 操作/ 相关/ 的/ 迁移/ 关系/ [/ Send/ ]/ 和/ [/ Receive/ ]/ 添加/ 到/ Δ/ push/ 和/ Δ/ pop/ ;/ 规则/ [/ pushp/ ]/ 和/ [/ popp/ ]/ 分别/ 将/ p/ ^/ 可/ 执行/ 的/ 栈/ 操作/ 相关/ 的/ 迁移/ 关系/ [/ Call/ ]/ 和/ [/ Return/ ]/ 添加/ 到/ Δ/ push/ 和/ Δ/ pop/ ./ 其中/ 规则/ [/ internal/ ]/ 定义/ 进程/ p/ ^/ 的/ 内部/ 迁移/ 关系/ 集合/ ;/ 规则/ [/ pushp/ ]/ 和/ [/ popp/ ]/ 构造/ 进程/ p/ ^/ 的/ 栈/ 操作/ 相关/ 的/ 迁移/ 关系/ 集合/ ;/ 规则/ [/ pushq/ ]/ 和/ [/ popq/ ]/ 构造/ 进程/ p/ ^/ 的/ 队列/ 操作/ 相关/ 的/ 迁移/ 关系/ 集合/ ./ 定理/ 1/ ./ 给定/ 递归/ 队列/ 并发程序/ R/ =/ (/ S/ ,/ s0/ ,/ Π/ ,/ Γ/ ,/ {/ Tp/ }/ p/ ∈/ P/ )/ ,/ 基于/ 良序/ 排队/ 的/ 情况/ 下/ ,/ 根据上述/ 转换方法/ 构造/ 多/ 栈下推/ 系统/ / =/ (/ S/ ,/ s0/ ,/ St/ ,/ Γ/ M/ ,/ Δ/ )/ ,/ / 能/ 正确/ 模拟/ 递归/ 队列/ 并发程序/ R/ 的/ 执行/ ./ 证明/ ./ 由于/ 递归/ 队列/ 并发程序/ 各个/ 进程/ 的/ 执行/ 的/ 操作/ 取决于/ 接收/ 到/ 的/ 消息/ ,/ 因此/ 正确/ 构造/ 多/ 栈下推/ 系统/ 的/ 关键在于/ 如何/ 保证/ 多/ 栈下推/ 系统/ 正确/ 地/ 模拟/ 递归/ 队列/ 并发程序/ 中/ 各个/ 进程/ 之间/ 通信/ 过程/ ./ 假设/ 良序/ 排队/ 的/ 递归/ 队列/ 并发程序/ R/ 中/ 包含/ 进程/ p/ ,/ 及/ 进程/ p/ 接收/ 消息/ 的/ 队列/ q/ ,/ 队列/ q/ 内/ 的/ 消息/ 序列/ 为/ m1m2m3/ …/ mi/ (/ i/ 是/ 正整数/ ,/ m1/ 是/ q/ 头部/ 的/ 消息/ ,/ mi/ 是/ q/ 尾部/ 的/ 消息/ )/ ,/ 进程/ p/ 从/ 队列/ q/ 的/ 头部/ 读取/ 消息/ ,/ 并/ 根据/ 接收/ 到/ 的/ 消息/ 执行/ 相应/ 的/ 操作/ ,/ 进程/ p/ 的/ 局部/ 栈/ 内容/ 为/ s1s2s3/ …/ sj/ (/ j/ 是/ 正整数/ ,/ s1/ 是/ 局部/ 栈/ 顶部/ 的/ 内容/ ,/ sj/ 是/ 局部/ 栈/ 底部/ 的/ 内容/ )/ ,/ 进程/ p/ 从栈/ 中/ 读取/ 内容/ 执行/ 栈/ 相关/ 操作/ ./ 基于/ 上述/ 假设/ ,/ 构造/ 多/ 栈下推/ 系统/ 的/ 栈/ stw/ 模拟/ 进程/ p/ 读取/ 队列/ q/ 中/ 消息/ m1m2m3/ …/ mi/ 以及/ 读取/ 局部/ 栈/ 内容/ s1s2s3/ …/ sj/ 的/ 过程/ ,/ 由于/ 栈/ 和/ 队列/ 的/ 操作/ 次序/ 是/ 完全/ 相反/ 的/ ,/ 即栈/ 中/ 的/ 内容/ 是/ 先进后出/ 的/ ,/ 队列/ 中/ 的/ 内容/ 是/ 先进先出/ 的/ ./ 因此/ ,/ 模拟/ 队列/ 的/ 操作/ 次序/ ,/ 需要/ 将/ 队列/ q/ 中/ 的/ 消息/ 逆序/ 地/ 进行/ 存储/ ,/ 也/ 就是/ 队列/ 的/ 内容/ 必须/ 逆序/ 地/ 存储/ 在/ 栈/ stw/ ,/ 即栈/ 的/ 底部/ 存储/ 队列/ 尾部/ 的/ 内容/ ./ 当/ 队列/ q/ 中/ 的/ 内容/ m1m2m3/ …/ mi/ 在/ 栈/ stw/ 的/ 存储/ 次序/ 为/ mi/ …/ m3m2m1/ (/ mi/ 位于/ 栈/ stw/ 的/ 底部/ )/ 时/ ,/ 能/ 正确/ 地/ 模拟/ 递归/ 队列/ 并发程序/ 基于/ 消息/ 队列/ q/ 的/ 通信/ 过程/ ./ 其次/ ,/ 上述/ 构造方法/ 通过/ 将/ 局部/ 栈/ 的/ 内容/ s1s2s3/ …/ sj/ 存储/ 在/ stw/ 中/ 的/ 队列/ 消息/ m1m2m3/ …/ mi/ 之上/ ,/ 保证/ 从/ stw/ 中/ 读取/ 内容/ 时/ ,/ 首先/ 读取/ 局部/ 栈/ 相关/ 的/ 内容/ s1s2s3/ …/ sj/ ,/ 当/ 局部/ 栈/ 内容/ 完全/ 被/ 读取/ 之后/ ,/ 才能/ 读取/ 栈/ stw/ 存储/ 的/ 队列/ q/ 的/ 消息/ mi/ …/ m3m2m1/ ,/ 进而/ 保证/ 多/ 栈下推/ 系统模拟/ 的/ 递归/ 队列/ 并发程序/ R/ 是/ 良序/ 排队/ 的/ ./ 由于/ 递归/ 队列/ 并发程序/ 各个/ 进程/ 执行/ 的/ 操作/ 取决于/ 基于/ 消息/ 队列/ 传递/ 的/ 消息/ ,/ 因此/ 可/ 根据/ 递归/ 队列/ 并发程序/ 针对/ 不同/ 队列/ 的/ 迁移/ 关系/ 的/ 操作/ 语义/ ,/ 构造/ 出多/ 栈下推/ 系统/ 相应/ 栈/ 的/ 迁移/ 关系/ 集合/ 的/ 操作/ 语义/ ./ 命题/ 1/ ./ 给定/ 递归/ 队列/ 并发程序/ R/ ,/ 通过/ 构造/ 所得/ 对应/ 的/ 多/ 栈下推/ 系统/ / ,/ 则/ R/ 的/ k/ -/ 上下文/ 切换/ 定界/ 可/ 达/ 问题/ 等价/ 于/ / 的/ 3k/ +/ 1/ -/ 阶/ 定界/ 可/ 达/ 问题/ ./ 证明/ ./ 假定/ 当前/ 上下文/ 是/ (/ p/ ^/ ,/ q/ ^/ )/ ,/ 对/ 递归/ 队列/ 并发程序/ R/ 中/ 的/ 每个/ 进程/ p/ ∈/ {/ P/ \/ p/ ^/ }/ ,/ 使用/ 栈/ stp/ 逆序/ 地/ 存储/ 进程/ p/ 的/ 局部/ 栈/ 内容/ ,/ 使用/ 栈/ stq/ 存储/ 每个/ 队列/ q/ ∈/ {/ Q/ \/ q/ ^/ }/ 的/ 内容/ :/ 队尾/ 指向/ 的/ 内容/ 存储/ 在/ 栈顶/ ,/ 队头/ 指向/ 的/ 内容/ 存储/ 在/ 栈底/ ,/ 栈/ stp/ ^/ 和/ 栈/ stq/ ^/ 初始化/ 为空/ ;/ 工作栈/ stw/ 被/ 划分/ 为/ 顶部/ 和/ 底部/ 两个/ 部分/ ,/ 分别/ 存储/ 上下文/ (/ p/ ^/ ,/ q/ ^/ )/ 中/ 进程/ p/ ^/ 的/ 局部/ 栈/ 内容/ 和/ 队/ Page7/ 列/ q/ ^/ 的/ 栈/ 内容/ :/ 栈/ stw/ 的/ 顶部/ 存储/ 进程/ p/ ^/ 的/ 局部/ 栈/ 内容/ ,/ 栈/ stw/ 的/ 底部/ 存储/ 队列/ q/ ^/ 的/ 栈/ 内容/ ,/ 即/ 队列/ q/ ^/ 的/ 栈/ 内容/ 存储/ 在/ stw/ 的/ 底部/ ,/ 进程/ p/ ^/ 的/ 局部/ 栈/ 内容/ 存储/ 在/ stw/ 的/ 顶部/ ./ 多/ 栈下推/ 系统/ 的/ 内部/ 动作/ 模拟/ R/ 的/ 内部/ 动作/ ;/ 向/ 队列/ q/ ∈/ {/ Q/ \/ q/ ^/ }/ 中/ 写入/ 消息/ m/ ,/ 即/ 对/ 栈/ stq/ 执行/ 入栈/ 操作/ ,/ 将/ 符号/ m/ 写入/ 栈顶/ ;/ 工作栈/ stw/ 的/ 入栈/ 和/ 出栈/ 操作/ 分别/ 模拟/ 递归/ 过程/ 的/ 调用/ 和/ 返回/ ./ 当/ 进程/ p/ ^/ 从/ 队列/ q/ ^/ 对应/ 的/ 栈/ 中/ 读取/ 消息/ 时/ ,/ 根据/ 良序/ 排队/ 的/ 定义/ ,/ 仅当/ 进程/ p/ ^/ 的/ 局部/ 栈为/ 空时/ ,/ 从/ 队列/ q/ ^/ 中/ 读取/ 的/ 消息/ 恰好/ 位于/ 工作栈/ stw/ 的/ 顶部/ ,/ 将/ stw/ 顶部/ 存储/ 的/ 消息/ 弹出/ ./ 在/ 一个/ 上下文/ 内/ ,/ 模拟/ R/ 执行/ 的/ 多/ 栈下推/ 系统/ 不/ 发生/ 阶/ 切换/ ./ 当/ 上下文/ (/ p/ ^/ ,/ q/ ^/ )/ 切换/ 为/ 上下文/ (/ p/ ^/ ,/ q/ ^/ )/ 时/ ,/ 对/ 工作栈/ stw/ 的/ 顶部/ 内容/ 和/ 底部/ 内容/ 进行/ 出栈/ 操作/ ,/ 分别/ 存储/ 到/ 栈/ stp/ ^/ 和/ stq/ ^/ 中/ ;/ 然后/ 对栈/ stq/ ^/ 和/ 栈/ stp/ ^/ 的/ 内容/ 进行/ 出栈/ 操作/ ,/ 分别/ 存储/ 到/ 栈/ stw/ 的/ 底部/ 和/ 顶部/ ,/ 其/ 上下文/ 切换/ 函数/ 如图/ 4/ 所示/ ./ Context/ _/ switch/ (/ (/ p/ ,/ q/ )/ ,/ (/ p/ ,/ q/ )/ )/ {/ Inverse/ _/ Move/ (/ stw/ ,/ (/ stp/ ,/ stq/ )/ )/ ;/ Move/ (/ (/ stp/ ,/ stq/ )/ ,/ stw/ )/ ;/ }/ // // 上下文/ (/ pi/ ,/ qi/ )/ 到/ (/ pi/ ,/ qi/ )/ 的/ 切换/ Move/ (/ (/ stp/ ,/ stq/ )/ ,/ stw/ )/ {/ pop/ (/ stq/ )/ ;/ push/ (/ stbottom/ ,/ stq/ )/ ;/ pop/ (/ stp/ )/ ;/ push/ (/ sttop/ ,/ stp/ )/ ;/ }/ // // 将/ 上下文/ (/ p/ ,/ q/ )/ 对应/ 的/ 栈/ 内容/ 弹出/ 并/ 存储/ 到/ stwInverse/ _/ Move/ (/ stw/ ,/ (/ stp/ ,/ stq/ )/ )/ {/ pop/ (/ sttop/ )/ ;/ push/ (/ stp/ ,/ sttop/ )/ ;/ pop/ (/ stbottom/ )/ ;/ push/ (/ stq/ ,/ stbottom/ )/ ;/ }/ // // 将/ stw/ 中/ 的/ 顶部/ 和/ 底部/ 内容/ 弹出/ 并/ 存储/ 到/ stp/ 和/ stq/ 基于/ 上述/ 转换方法/ ,/ 基于/ 良序/ 排队/ 的/ 递归/ 队列/ 并发程序/ 的/ k/ 上下文/ 切换/ 定界/ 可达性/ 问题/ 被/ 转换/ 为/ 多/ 栈下推/ 系统/ 的/ 3k/ +/ 1/ 阶/ 定界/ 可达性/ 问题/ ,/ 其中/ k/ +/ 1/ 个/ 上下文/ 对应/ k/ +/ 1/ 个阶/ ,/ 进行/ k/ 次/ 上下文/ 切换/ 相当于/ 增加/ 额外/ 2k/ 个阶/ ./ 4/ 上下文/ 切换/ 定界/ 可达性/ 问题/ 本/ 节/ 基于/ 良序/ 排队/ 的/ 递归/ 队列/ 并发程序/ 可/ 判定/ 理论/ ,/ 通过/ 改进/ Qadeer/ 等/ 的/ 可达/ 算法/ ,/ 提出/ 一种/ 针对/ 多/ 栈下推/ 系统/ 上下文/ 切换/ 定界/ 可/ 达/ 判定/ 算法/ ,/ 如/ 算法/ 1/ 所示/ ./ 算法/ 对/ 每个/ 下推/ 系统/ 迭代/ 应用/ 标准/ Post/ / 算法/ ,/ 基于/ 良序/ 排队/ 约束/ 控制/ 进程/ 对/ 队列/ 的/ 出队/ 操作/ ,/ 通过/ 上下文/ 切换/ 函数/ 实现/ 上下文/ 间/ 的/ 切换/ ,/ 穷尽/ 地/ 计算/ 多/ 栈下推/ 系统/ 在/ k/ 次/ 上下文/ 切换/ 内/ 的/ 正向/ 可/ 达/ 格局/ ./ 算法/ 1/ ./ 上下文/ 切换/ 定界/ 可/ 达/ 判定/ 算法/ ./ 输入/ :/ 多/ 栈下推/ 系统/ / =/ (/ S/ ,/ s0/ ,/ St/ ,/ Γ/ ,/ Δ/ )/ 和/ 正整数/ k/ 输出/ :/ 可/ 达/ 格局/ 集合/ Reach1/ ./ Letcin/ =/ 〈/ s0/ ,/ {/ σ/ st/ }/ st/ ∈/ St/ 〉/ ;/ // // 各个/ 栈/ 初始化/ 为空/ 2/ ./ WL/ ·/ ·/ =/ {/ (/ 〈/ s0/ ,/ {/ σ/ st/ }/ st/ ∈/ St/ 〉/ ,/ 0/ )/ }/ ;/ // // WL/ 存储/ 待/ 计算/ 的/ 3/ ./ Reach/ ·/ ·/ =/ {/ 〈/ s0/ ,/ {/ σ/ st/ }/ st/ ∈/ St/ 〉/ }/ ;/ // // 初始化/ 时/ Reach/ 包/ 4/ ./ move/ 〈/ σ/ p/ ,/ σ/ q/ 〉/ intostw/ ;/ // // 初始/ 上下文/ (/ p/ ,/ q/ )/ 对应/ 的/ 5/ ./ whileWL/ ≠/ / do/ // // WL/ 非空/ ,/ 继续/ ;/ 否则/ ,/ 输出/ Reach6/ ./ remove/ (/ 〈/ s0/ ,/ {/ σ/ st/ }/ st/ ∈/ St/ 〉/ ,/ i/ )/ fromWL/ ;/ 7/ ./ ifi/ </ kthen/ // // i/ </ k/ ,/ 继续/ ;/ 否则/ ,/ 重新/ 取/ 一个/ 格局/ 项/ 8/ ./ forall/ (/ q/ ∈/ QSender/ (/ q/ )/ =/ =/ p/ )/ 9/ ./ Ap/ =/ Post/ / (/ Ap/ )/ ;/ // // 计算/ 进程/ p/ 的/ 初始/ 格局/ 10/ ./ if/ / a/ ./ δ/ =/ (/ s/ ,/ stq/ ,/ a/ ,/ s/ )/ ∈/ Δ/ push/ 〈/ s/ ,/ σ/ p/ 〉/ ∈/ L/ (/ Ap/ )/ 11/ ./ σ/ q/ ·/ ·/ =/ a/ σ/ q/ ;/ L/ (/ Ap/ )/ =/ L/ (/ Ap/ )/ ∪/ {/ 〈/ s/ ,/ σ/ p/ 〉/ }/ ;/ 12/ ./ if/ / a/ ./ δ/ =/ (/ s/ ,/ stq/ ,/ a/ ,/ s/ )/ ∈/ Δ/ pop/ 〈/ s/ ,/ ε/ 〉/ ∈/ L/ (/ Ap/ )/ 13/ ./ σ/ q/ ·/ ·/ =/ σ/ q/ \/ a/ ;/ L/ (/ Ap/ )/ =/ L/ (/ Ap/ )/ ∪/ {/ 〈/ s/ ,/ ε/ 〉/ }/ ;/ 14/ ./ foralls/ ∈/ S/ (/ Ap/ )/ do/ {/ 15/ ./ x/ ·/ ·/ =/ 〈/ s/ ,/ update/ (/ Ap/ ,/ s/ )/ ,/ rename/ (/ Ap/ ∈/ {/ P/ \/ p/ }/ ,/ 16/ ./ Insert/ (/ x/ ,/ i/ +/ 1/ )/ intoWL/ ;/ // // 将/ 格局/ 项/ (/ x/ ,/ i/ +/ 17/ ./ Reach/ ·/ ·/ =/ Reach/ ∪/ {/ x/ }/ ;/ // // 将/ 格局/ x/ 添加/ 到/ 可/ 18/ ./ Context/ _/ switch/ (/ (/ p/ ,/ q/ )/ ,/ (/ Receiver/ (/ q/ )/ ,/ q/ )/ )/ ;/ 19/ ./ }/ 算法/ 的/ 输入/ 是/ 多/ 栈下推/ 系统/ / 和/ 正整数/ k/ ,/ 正整数/ k/ 限定/ 上下文/ 切换/ 的/ 次数/ ./ 算法/ 的/ 输出/ 是/ 可达/ 格局/ 集合/ Reach/ ,/ 该/ 集合/ 存储/ / 在/ 至多/ k/ 次/ 上下文/ 切换/ 执行/ 内/ 正向/ 可达/ 的/ 格局/ ./ 多/ 栈下推/ 系统/ / 的/ 初始/ 格局/ 是/ cin/ =/ 〈/ s0/ ,/ {/ σ/ st/ }/ st/ ∈/ St/ 〉/ ,/ 即/ 每个/ 栈/ st/ ∈/ St/ 的/ 内容/ σ/ st/ 为空/ ./ WL/ 是/ 工作/ 列表/ ,/ 记录/ 可/ 达/ 格局/ c/ 及其/ 上下文/ 切换/ 的/ 次数/ i/ ,/ 其中/ 0/ / i/ </ k/ ,/ (/ c/ ,/ i/ )/ 称为/ 一个/ 格局/ 项/ ./ 初始化/ 时/ ,/ 可/ 达/ 格局/ 集合/ Reach/ 只/ 包含/ 多/ 栈下推/ 系统/ / 的/ 初始/ 格局/ 〈/ s0/ ,/ {/ σ/ st/ }/ st/ ∈/ St/ 〉/ ./ 假定/ 最初/ 的/ 上下文/ 是/ (/ p/ ,/ q/ )/ ,/ 则/ 将/ 队列/ q/ 和/ 进程/ p/ 对应/ 的/ 栈/ 内容/ 依次/ 存储/ 到/ 工作栈/ stw/ 的/ 底部/ 和/ 顶/ Page8/ 部/ ./ 若/ 工作/ 列表/ WL/ 不为/ 空/ ,/ 计算/ WL/ 的/ 每个/ 格局/ 的/ 可达/ 格局/ ;/ 否则/ ,/ 输出/ 可/ 达/ 格局/ 集合/ Reach/ ./ 算法/ 第/ 6/ 行/ remove/ 操作/ 表示/ 从/ WL/ 中/ 删除/ 一个/ 格局/ 项/ (/ c/ ,/ i/ )/ ,/ 并/ 返回/ 此/ 格局/ 项/ 的/ 值/ ./ 对于/ 每个/ 格局/ 项/ ,/ 若/ 其/ 上下文/ 切换/ 的/ 次数/ i/ </ k/ ,/ 根据/ 接受/ 初始/ 格局/ cin/ 的/ 下推/ 自动机/ Ap/ (/ 即/ L/ (/ Ap/ )/ =/ {/ cin/ }/ )/ 和/ 迁移/ 关系/ 集合/ Δ/ p/ ,/ 使用/ Post/ / 算法/ 构造/ 接受/ 初始/ 格局/ 可达/ 的/ 格局/ 集合/ 的/ 下推/ 自动机/ Ap/ ,/ 即/ L/ (/ Ap/ )/ =/ Post/ / (/ L/ (/ Ap/ )/ )/ ./ 若/ 下推/ 系统/ / 的/ 迁移/ 关系/ 集合/ 存在/ 迁移/ 关系/ δ/ =/ (/ s/ ,/ stq/ ,/ a/ ,/ s/ )/ ∈/ Δ/ push/ ,/ 且/ 下推/ 自动机/ Ap/ 接受/ 格局/ 〈/ s/ ,/ σ/ p/ 〉/ ,/ 则/ 向/ 栈/ stq/ 中入/ 栈/ 消息/ a/ ,/ 并/ 将/ 格局/ 〈/ s/ ,/ σ/ p/ 〉/ 添加/ 到/ L/ (/ Ap/ )/ ./ 若/ 下推/ 自动机/ Ap/ 接受/ 形/ 如/ 〈/ s/ ,/ ε/ 〉/ 的/ 格局/ ,/ 且/ 存在/ 字母/ a/ 使得/ δ/ =/ (/ s/ ,/ stq/ ,/ a/ ,/ s/ )/ ∈/ Δ/ pop/ ,/ 则/ 从/ 工作栈/ stw/ 出栈/ 消息/ a/ ,/ 并/ 将/ 格局/ 〈/ s/ ,/ ε/ 〉/ 添加/ 到/ L/ (/ Ap/ )/ ./ S/ (/ Ap/ )/ =/ {/ s/ |/ / σ/ p/ ./ 〈/ s/ ,/ σ/ p/ 〉/ ∈/ Post/ / (/ L/ (/ Ap/ )/ )/ }/ 是/ 下推/ 自动机/ Ap/ 的/ 状态/ 集合/ ,/ 多/ 栈下推/ 系统/ / 至多/ 包含/ 一个/ 下推/ 自动机/ Ap/ ∈/ P/ 的/ 初始状态/ 是/ s/ ./ 如果/ 下推/ 自动机/ Ap/ ∈/ {/ P/ \/ p/ }/ 的/ 初始状态/ 与/ 状态/ s/ 相同/ ,/ 使用/ rename/ (/ Ap/ ∈/ {/ P/ \/ p/ }/ ,/ s/ )/ 修改/ Ap/ ∈/ {/ / \/ p/ }/ 的/ 初始状态/ 为/ s/ ./ update/ (/ Ap/ ,/ s/ )/ 重命名/ Ap/ 中除/ s/ 之外/ 的/ 其他/ 状态/ ,/ 并/ 更新/ S/ 不/ 包含/ 的/ 状态/ ./ 最后/ 将/ 修改/ 后/ 的/ 可达/ 格局/ 赋值/ 为/ x/ ,/ 将/ 格局/ 项/ (/ x/ ,/ i/ +/ 1/ )/ 添加/ 到/ 工作/ 列表/ WL/ ,/ 并/ 将/ 格局/ x/ 添加/ 到/ 集合/ Reach/ ./ 该/ 算法/ 通过/ 图/ 4/ 所示/ 的/ Context/ _/ switch/ (/ )/ 函数/ 进行/ 上下文/ 的/ 切换/ ./ 对于/ 每个/ 下推/ 系统/ 的/ 下推/ 自动机/ Ap/ ∈/ / 迭代/ 地/ 应用/ Post/ / 算法/ ,/ 从而/ 穷尽/ 地/ 计算/ 多/ 栈下推/ 系统/ / 的/ 正向/ 可达/ 的/ 格局/ ./ 对于/ 多/ 栈下推/ 系统/ / =/ (/ S/ ,/ s0/ ,/ St/ ,/ Γ/ ,/ Δ/ )/ 和/ 正整数/ k/ ,/ 该/ 算法/ 是/ 可/ 终止/ 的/ ,/ 并且/ 该/ 算法/ 的/ 时间/ 复杂度/ 为/ O/ (/ k3/ (/ |/ St/ |/ |/ S/ |/ |/ Δ/ push/ +/ Δ/ pop/ |/ )/ 2k/ |/ M/ |/ 5/ )/ ,/ 其中/ k/ 是/ 上下文/ 切换/ 次数/ ,/ |/ St/ |/ 是/ 多/ 栈下推/ 系统/ 中栈/ 的/ 个数/ ,/ |/ S/ |/ 是/ 多/ 栈下推/ 系统/ 的/ 状态/ 集合/ 的/ 大小/ ,/ |/ Δ/ push/ +/ Δ/ pop/ |/ 是/ 队列/ 栈/ 相关/ 的/ 迁移/ 关系/ 的/ 个数/ ,/ |/ M/ |/ 是/ 多/ 栈下推/ 系统/ 的/ 大小/ ./ 定理/ 2/ ./ 给定/ 多/ 栈下推/ 系统/ / =/ (/ S/ ,/ s0/ ,/ St/ ,/ Γ/ ,/ Δ/ )/ 和/ 正整数/ k/ ,/ k/ 次/ 上下文/ 切换/ 可/ 达/ 算法/ 是/ 可/ 终止/ 的/ ,/ 并/ 能/ 正确/ 求解/ 多/ 栈下推/ 系统/ 的/ 可达性/ 问题/ ./ 证明/ ./ 假设/ Count/ (/ i/ )/ 表示/ 第/ 16/ 行/ Insert/ 操作/ 被/ 调用/ 的/ 次数/ ,/ i/ 是/ 下表/ 参数/ ./ 显然/ ,/ Count/ (/ 0/ )/ =/ 1/ ,/ 且/ Count/ (/ i/ +/ 1/ )/ =/ |/ Sender/ (/ q/ )/ |/ ×/ |/ S/ |/ ×/ Count/ (/ i/ )/ ,/ 由于/ 第/ 8/ 行/ 和/ 第/ 14/ 行/ 分别/ 限定/ 了/ Sender/ (/ q/ )/ 和/ S/ 的/ 大小/ ./ 因此/ ,/ 对于/ 任意/ 的/ i/ ,/ Count/ (/ i/ +/ 1/ )/ / (/ |/ Sender/ (/ q/ )/ |/ ×/ |/ S/ |/ )/ i/ 成立/ ./ 由此/ 可/ 得/ 算法/ 第/ 16/ 行/ 的/ Insert/ 语句/ 只/ 可能/ 执行/ 有限/ 次/ ./ 此外/ ,/ 每次/ 迭代/ 第/ 5/ 行/ 的/ while/ 循环/ 时/ 将/ 从/ 工作/ 列表/ WL/ 中/ 删除/ 一个/ 项/ ,/ 则/ 工作/ 列表/ 最终/ 将/ 为/ 空/ ,/ 因此/ ,/ 该/ 算法/ 是/ 可/ 终止/ 的/ ./ 工作/ 列表/ WL/ 的/ 格局/ 项/ 〈/ s/ ,/ {/ σ/ st/ }/ st/ ∈/ St/ 〉/ 表示/ 多/ 栈下推/ 系统/ 的/ 格局/ ,/ 其中/ 各个/ 栈/ st/ ∈/ St/ 对应/ 的/ 下推/ 自动机/ 接收/ 的/ 字符串/ 为/ σ/ st/ ,/ 〈/ s/ ,/ {/ σ/ st/ }/ st/ ∈/ St/ 〉/ / k/ 〈/ s/ ,/ {/ σ/ st/ }/ st/ ∈/ St/ 〉/ 表示/ 格局/ 〈/ s/ ,/ {/ σ/ st/ }/ st/ ∈/ St/ 〉/ 是/ 多/ 栈下推/ 系统/ 经过/ k/ 次/ 上下文/ 切换/ 可/ 到达/ 的/ ,/ 算法/ 的/ 第/ 9/ 行可/ 正确/ 地/ 计算/ 从/ 初始/ 格局/ 项可达/ 的/ 下推/ 自动机/ 接受/ 的/ 语言/ ,/ 算法/ 的/ 第/ 10/ ~/ 15/ 行/ 通过/ 对/ 队列/ 消息/ 操作/ 进行/ 处理/ ,/ 修改/ 相应/ 下推/ 自动机/ 的/ 格局/ 项/ ,/ 第/ 16/ 行将/ 修改/ 后/ 的/ 可达/ 格局/ 添加/ 到/ 可达/ 格局/ 集合/ Reach/ ./ 算法/ 迭代/ 调用/ Post/ / 算法/ 计算/ 各个/ 下推/ 自动机/ 接受/ 的/ 语言/ L/ (/ Ap/ )/ ,/ 即/ 多/ 栈下推/ 系统/ 在/ k/ 次/ 上下文/ 切换/ 内/ 的/ 可达/ 的/ 格局/ 集合/ Reach/ ./ 5/ 基于/ 局部/ 性质/ 求解/ 的/ 组合/ 验证/ 为了/ 缩减/ 单次/ 可达/ 求解/ 的/ 搜索/ 状态/ 空间/ ,/ 进一步提高/ 处理/ 复杂程度/ 的/ 问题/ ,/ 增强/ 算法/ 的/ 适用性/ ,/ 可先/ 对/ 局部/ 性质/ 进行/ 可/ 达/ 分析/ ,/ 在/ 此基础/ 上/ 通过/ 组合/ 验证/ 来/ 检验/ 整体/ 性质/ ,/ 本节/ 仅/ 阐述/ 基于/ 局部/ 性质/ 求解/ 的/ 组合/ 验证/ 基本/ 思想/ ./ 给定/ 并发/ 系统/ 待/ 验证/ 的/ 整体/ 性质/ ,/ 根据/ 其所/ 包含/ 各个/ 局部/ 性质/ 的/ 逻辑/ 组合/ 关系/ ,/ 依次/ 验证/ 各个/ 局部/ 性质/ ,/ 最后/ 通过/ 局部/ 性质/ 可/ 达/ 求解/ 组合/ 验证/ 整体/ 性质/ 是否/ 满足/ ,/ 具体步骤/ 包括/ :/ (/ 1/ )/ 整体/ 性质/ 合取范式/ 表示/ 基于/ 整体/ 性质/ 所/ 包含/ 各个/ 局部/ 性质/ 的/ 逻辑/ 组合/ 关系/ ,/ 将/ 整体/ 性质/ 转换/ 为/ 各个/ 局部/ 性质/ 组成/ 的/ 合取范式/ ./ 例如/ 系统/ 的/ 待/ 验证/ 性质/ 表示/ 为/ 合取范式/ F/ =/ f1/ ∧/ f2/ ∧/ …/ ∧/ fi/ (/ 其中/ i/ </ N/ ,/ N/ 表示/ 系统/ 中/ 进程/ 或/ 线程/ 的/ 数目/ )/ ,/ 其中/ F/ 是/ 系统/ 的/ 整体/ 性质/ 对应/ 的/ 逻辑/ 公式/ (/ 或/ 全局/ 性质/ )/ ,/ fi/ (/ i/ </ N/ )/ 表示/ 局部/ 性质/ 对应/ 的/ 逻辑/ 公式/ ,/ 可以/ 是/ 一个/ 或/ 多个/ 进程/ 或/ 线程/ 的/ 性质/ ,/ 各个/ 局部/ 性质/ 是/ 不/ 相交/ 的/ ./ (/ 2/ )/ 局部/ 性质/ 可/ 达/ 求解/ 依次/ 调用/ 本文/ 提出/ 的/ 可达/ 求解/ 算法/ ,/ 搜索/ 局部/ 性质/ fi/ 对应/ 的/ 状态/ 空间/ ,/ 记录/ 所有/ 符合/ 局部/ 性质/ fi/ 的/ 路径/ 信息/ 和/ 局部/ 性质/ 涉及/ 进程/ 的/ 状态/ 信息/ ,/ 随后/ 选取/ 符合/ 局部/ 性质/ 的/ 状态/ 信息/ ,/ 进行/ 下/ 一次/ 局部/ 性质/ 可达性/ 求解/ ./ (/ 3/ )/ 局部/ 性质/ 的/ 组合/ 根据/ 上/ 一步/ 得到/ 的/ 各个/ 局部/ 性质/ 可/ 达/ 求解/ 的/ 结/ Page9/ 果/ ,/ 判定/ 符合/ 各个/ 局部/ 性质/ 的/ 执行/ 路径/ 是否/ 满足/ 整体/ 性质/ ./ 6/ 实例/ 分析/ 本/ 节/ 给出/ 一个/ 基于/ 队列/ 通信/ 的/ 递归/ 并发程序/ 的/ 实例/ R/ ,/ 详细/ 阐述/ 如何/ 根据/ 本文/ 提出/ 的/ 方法/ 将/ 其/ 转换/ 为/ 可/ 模拟/ 其/ 执行/ 的/ 多/ 栈下推/ 系统/ / ,/ 随后/ 根据/ 上下文/ 定界/ 可/ 达/ 算法/ 求解/ 其可达/ 格局/ 集合/ ,/ 最后/ 通过/ 判定/ 目标/ 状态/ (/ 或者/ 格局/ )/ 与/ 可达/ 格局/ 集合/ 的/ 判空/ 操作/ ,/ 确定/ 目标/ 状态/ (/ 或者/ 格局/ )/ 的/ 可达性/ ./ 6.1/ 实例/ 描述/ 假定/ A/ =/ (/ P/ ,/ Q/ ,/ Sender/ ,/ Receiver/ )/ 是/ 一个/ 体系/ 图/ 5/ 良序/ 排队/ 的/ 实例/ 程序/ R/ 图/ 6/ 程序/ R/ 的/ 流图/ 6.2/ 转换/ 为/ 多/ 栈下推/ 系统/ 根据/ 3.3/ 节/ 的/ 转换方法/ 可/ 构造/ 出多/ 栈下推/ 系统/ / =/ (/ S/ ,/ s0/ ,/ St/ ,/ Γ/ / ,/ Δ/ )/ ,/ 其中/ S/ 是/ 递归/ 队列/ 并发程序/ 的/ 有限/ 状态/ 集合/ ;/ s0/ =/ (/ l/ )/ 是/ 初始状态/ ,/ 并且/ l/ ∈/ {/ T/ ,/ F/ }/ ;/ St/ =/ {/ stp/ }/ p/ ∈/ P/ ∪/ {/ stq/ }/ q/ ∈/ Q/ 是/ 栈/ 集合/ ,/ 其中/ P/ =/ 结构/ ,/ 其中/ 进程/ 集合/ P/ =/ {/ p0/ ,/ p1/ ,/ p2/ }/ ,/ 队列/ 集合/ Q/ =/ {/ q0/ ,/ q1/ ,/ q2/ }/ ./ 函数/ Sender/ 和/ Receiver/ 定义/ 如下/ :/ Sender/ (/ q1/ )/ =/ p0/ ,/ Sender/ (/ q2/ )/ =/ p0/ ,/ Receiver/ (/ q0/ )/ =/ p0/ ,/ Receiver/ (/ q1/ )/ =/ p1/ ,/ Receiver/ (/ q2/ )/ =/ p2/ ./ 假定/ R/ 为/ 定义/ 在/ 体系结构/ A/ 上/ 的/ 递归/ 队列/ 并发程序/ (/ S/ ,/ s0/ ,/ Π/ ,/ Γ/ ,/ {/ Tp/ }/ p/ ∈/ P/ )/ ,/ 如图/ 5/ 所示/ ,/ 其流/ 图见/ 图/ 6/ 所示/ ./ 其中/ l/ 是/ 预先/ 定义/ 的/ 全局/ 共享/ 变量/ ,/ 程序/ 包含/ 3/ 个/ 事件/ ,/ 分别/ 使用/ 字母/ a/ ,/ b/ ,/ c/ 表示/ ,/ 进程/ p0/ ,/ p1/ 和/ p2/ 的/ 动作/ 集合/ 定义/ 如下/ :/ Act0/ =/ {/ recv/ (/ q0/ ,/ a/ )/ ,/ send/ (/ q1/ ,/ b/ )/ ,/ send/ (/ q2/ ,/ c/ )/ ,/ Act1/ =/ {/ recv/ (/ q1/ ,/ b/ )/ ,/ callg/ (/ n/ )/ ,/ e2/ ·/ ·/ =/ dequeue/ (/ q1/ )/ ,/ Act2/ =/ {/ recv/ (/ q2/ ,/ c/ )/ ,/ e3/ ·/ ·/ =/ dequeue/ (/ q2/ )/ ,/ return/ }/ ./ callf/ (/ 5/ )/ ,/ e1/ ·/ ·/ =/ dequeue/ (/ q0/ )/ ,/ x/ ·/ ·/ =/ f/ (/ 5/ )/ ,/ return/ }/ ;/ m/ ·/ ·/ =/ g/ (/ n/ )/ ,/ return/ }/ ;/ }/ {/ p0/ ,/ p1/ ,/ p2/ }/ ,/ Q/ =/ {/ q0/ ,/ q1/ ,/ q2/ }/ ;/ Γ/ / =/ Π/ ∪/ Γ/ 是/ 有限/ 的/ 字母表/ ,/ 其中/ Π/ =/ {/ a/ ,/ b/ ,/ c/ }/ ,/ Γ/ 是/ 进程/ 对应/ 的/ 局部/ 栈/ 的/ 字母表/ ;/ 迁移/ 规则/ Δ/ =/ Δ/ int/ ∪/ Δ/ pop/ ∪/ Δ/ push/ ./ 程序/ R/ 对应/ 的/ 下推/ 迁移/ 规则/ 如图/ 7/ 所示/ ./ Page10/ (/ 9/ )/ 〈/ (/ l/ )/ ,/ (/ p1/ _/ 1/ ,/ e2/ ,/ m/ ,/ n/ )/ 〉/ →/ 〈/ (/ l/ )/ ,/ (/ g/ _/ 0/ ,/ n/ )/ (/ p1/ _/ 1/ ,/ e2/ ,/ 0/ ,/ 0/ )/ 〉/ l/ ∈/ {/ T/ ,/ F/ }/ ;/ m/ ,/ n/ ∈/ N/ ;/ e2/ ∈/ {/ a/ ,/ b/ ,/ c/ }/ (/ 11/ )/ 〈/ (/ l/ )/ ,/ (/ p1/ _/ 2/ ,/ e2/ ,/ m/ ,/ n/ )/ 〉/ →/ 〈/ (/ l/ )/ ,/ (/ dequeue/ _/ 0/ ,/ q1/ )/ (/ p1/ _/ 2/ ,/ e2/ ,/ m/ ,/ n/ )/ 〉/ l/ ∈/ {/ T/ ,/ F/ }/ ;/ m/ ,/ n/ ∈/ N/ ;/ e2/ ∈/ {/ a/ ,/ b/ ,/ c/ }/ ;/ 图/ 7/ 程序/ R/ 对应/ 的/ 下推/ 规则/ 6.3/ 计算/ 可/ 达/ 格局/ 集合/ 多/ 栈下推/ 系统/ / 的/ 格局/ 是/ 一个/ 元组/ c/ =/ (/ s/ ,/ σ/ st/ ∈/ St/ )/ ,/ 其中/ s/ 是/ 全局变量/ 的/ 赋值/ ,/ 对于/ 每个/ 进程/ 的/ 栈/ stp/ ∈/ St/ ,/ σ/ st/ =/ (/ C/ ,/ L/ )/ / ,/ 其中/ C/ 是/ 程序/ 的/ 控制/ 位置/ ,/ L/ 是/ 局部变量/ 的/ 赋值/ ;/ 对于/ 每个/ 队列/ 对应/ 的/ 栈/ stq/ ∈/ St/ ,/ 栈/ 内容/ σ/ st/ ∈/ Π/ / ;/ 假定/ 全局/ 初始/ 格局/ s0/ =/ (/ (/ l/ )/ ,/ σ/ st/ ∈/ St/ )/ ,/ 即/ 当前/ 全局变量/ 的/ 值/ 是/ l/ ∈/ {/ T/ ,/ F/ }/ ,/ 其他/ 下推/ 系统/ 对应/ 的/ 栈/ 内容/ 为空/ ./ 假定/ 初始化/ 时/ 上下文/ 是/ (/ p0/ ,/ q0/ )/ ,/ 多/ 栈下推/ 系统/ / 在/ 一次/ 上下文/ 切换/ 内/ 正向/ 可达/ 的/ 格局/ 集合/ 为/ Reach/ (/ 1/ )/ =/ Reach/ (/ (/ p0/ ,/ q0/ )/ )/ ∪/ Reach/ (/ (/ p0/ ,/ q0/ )/ →/ 执行/ 上下文/ 表/ 1/ 可达/ 格局/ 集合/ 犚/ 犲/ 犪/ 犮/ 犺/ 〈/ (/ l/ )/ ,/ ε/ ,/ ε/ ,/ ε/ ,/ a/ ,/ ε/ ,/ ε/ 〉/ ;/ 〈/ (/ l/ )/ ,/ (/ p0/ _/ 0/ ,/ ⊥/ ,/ ⊥/ )/ ,/ ε/ ,/ ε/ ,/ a/ ,/ ε/ ,/ ε/ 〉/ ;/ 〈/ (/ l/ )/ ,/ (/ f/ _/ 0/ ,/ 5/ )/ (/ p0/ _/ 1/ ,/ ⊥/ ,/ ⊥/ )/ ,/ ε/ ,/ ε/ ,/ a/ ,/ ε/ ,/ ε/ 〉/ 〈/ (/ l/ ,/ 6/ )/ ,/ (/ f/ _/ 0/ ,/ 4/ )/ (/ f/ _/ 0/ ,/ 5/ )/ (/ p0/ _/ 1/ ,/ ⊥/ ,/ ⊥/ )/ ,/ ε/ ,/ ε/ ,/ a/ ,/ ε/ ,/ ε/ 〉/ ;/ 〈/ (/ l/ ,/ 24/ )/ ,/ (/ f/ _/ 0/ ,/ 5/ )/ (/ p0/ _/ 1/ ,/ ⊥/ ,/ ⊥/ )/ ,/ ε/ ,/ ε/ ,/ a/ ,/ ε/ ,/ ε/ 〉/ 〈/ (/ l/ )/ ,/ (/ enqueue/ _/ 0/ ,/ q1/ ,/ b/ )/ (/ p0/ _/ 3/ ,/ a/ ,/ 120/ )/ ,/ ε/ ,/ ε/ ,/ ε/ ,/ ε/ ,/ ε/ 〉/ ;/ 〈/ (/ l/ )/ ,/ (/ p0/ _/ 3/ ,/ a/ ,/ 120/ )/ ,/ ε/ ,/ ε/ ,/ ε/ ,/ b/ ,/ ε/ 〉/ 〈/ (/ l/ )/ ,/ (/ enqueue/ _/ 0/ ,/ q2/ ,/ c/ )/ (/ p0/ _/ 4/ ,/ a/ ,/ 120/ )/ ,/ ε/ ,/ ε/ ,/ ε/ ,/ b/ ,/ ε/ 〉/ ;/ 〈/ (/ l/ )/ ,/ (/ p0/ _/ 4/ ,/ a/ ,/ 120/ )/ ,/ ε/ ,/ ε/ ,/ ε/ ,/ b/ ,/ c/ 〉/ (/ p0/ ,/ q0/ )/ →/ (/ p1/ ,/ q1/ )/ 〈/ (/ l/ )/ ,/ (/ ε/ ,/ a/ ,/ 120/ )/ ,/ (/ p1/ _/ 0/ ,/ ⊥/ ,/ ⊥/ ,/ ⊥/ )/ ,/ ε/ ,/ ε/ ,/ b/ ,/ c/ 〉/ ;/ 〈/ (/ l/ )/ ,/ (/ ε/ ,/ a/ ,/ 120/ )/ ,/ (/ p1/ _/ 1/ ,/ ⊥/ ,/ 0/ ,/ 0/ )/ ,/ ε/ ,/ ε/ ,/ b/ ,/ c/ 〉/ 〈/ (/ l/ )/ ,/ (/ ε/ ,/ a/ ,/ 120/ )/ ,/ (/ g/ _/ 0/ ,/ 0/ )/ (/ p1/ _/ 2/ ,/ 0/ ,/ 0/ )/ ,/ ε/ ,/ ε/ ,/ b/ ,/ c/ 〉/ ;/ 〈/ (/ l/ )/ ,/ (/ ε/ ,/ a/ ,/ 120/ )/ ,/ (/ p1/ _/ 2/ ,/ ⊥/ ,/ 1/ ,/ 0/ )/ ,/ ε/ ,/ ε/ ,/ b/ ,/ c/ 〉/ (/ p0/ ,/ q0/ )/ →/ (/ p2/ ,/ q2/ )/ 〈/ (/ l/ )/ ,/ (/ ε/ ,/ a/ ,/ 120/ )/ ,/ ε/ ,/ (/ p2/ _/ 0/ ,/ ⊥/ )/ ,/ ε/ ,/ b/ ,/ c/ 〉/ ;/ 〈/ (/ l/ )/ ,/ (/ ε/ ,/ a/ ,/ 120/ )/ ,/ ε/ ,/ (/ dequeue/ _/ 0/ ,/ q2/ )/ (/ p2/ _/ 1/ ,/ ⊥/ )/ ,/ ε/ ,/ b/ ,/ c/ 〉/ (/ p1/ ,/ q1/ )/ )/ ∪/ Reach/ (/ (/ p0/ ,/ q0/ )/ →/ (/ p2/ ,/ q2/ )/ )/ ,/ 其中/ Reach/ (/ (/ p0/ ,/ q0/ )/ )/ 是/ 上下文/ (/ p0/ ,/ q0/ )/ 执行/ 的/ 正向/ 可/ 达/ 格局/ 集合/ ,/ Reach/ (/ (/ p0/ ,/ q0/ )/ →/ (/ p1/ ,/ q1/ )/ )/ 是/ 上下文/ (/ p0/ ,/ q0/ )/ 切换/ 到/ (/ p1/ ,/ q1/ )/ 执行/ 的/ 正向/ 可/ 达/ 格局/ 集合/ ,/ Reach/ (/ (/ p0/ ,/ q0/ )/ →/ (/ p2/ ,/ q2/ )/ )/ 是/ 上下文/ (/ p0/ ,/ q0/ )/ 到/ (/ p2/ ,/ q2/ )/ 切换/ 执行/ 的/ 正向/ 可/ 达/ 格局/ 集合/ ./ 其中/ 全局/ 共享/ 变量/ l/ 的/ 赋值/ 为/ 0/ 或者/ 1/ ,/ 符号/ “/ ⊥/ ”/ 表示/ 变量/ 尚未/ 赋值/ ,/ 符号/ “/ ε/ ”/ 表示/ 进程/ 或者/ 队列/ 对应/ 的/ 栈/ 内容/ 为空/ ,/ 或者/ 当前/ 进程/ 的/ 控制/ 位置/ 的/ 值/ 为/ 空/ (/ 执行/ 结束/ 返回/ )/ ./ 图/ 5/ 中/ 实例/ 通过/ 计算/ 获得/ 可/ 达/ 格局/ 集合/ Reach/ 如表/ 1/ 所示/ ./ 可达/ 格局/ 集合/ ReachPage116/ ./ 4/ 可达性/ 判定/ 分析/ 根据/ 正向/ 可/ 达/ 格局/ 集合/ Reach/ (/ k/ )/ 和/ 给定/ 的/ 目标/ 状态/ 集合/ S/ (/ 错误/ 状态/ 集合/ )/ ,/ 进而/ 计算/ 集合/ Reach/ 和/ 集合/ T/ =/ {/ 〈/ s/ ,/ σ/ st/ 〉/ |/ / st/ ∈/ St/ ./ σ/ st/ / Γ/ / Ms/ ∈/ S/ }/ 的/ 交集/ 是否/ 为空/ :/ (/ 1/ )/ 若/ Reach/ ∩/ T/ 非空/ ,/ 可/ 断定/ 经过/ k/ 次/ 上下文/ 切换/ 的/ 运行/ ,/ 某个/ 目标/ 状态/ s/ ∈/ S/ 是/ 可达/ 的/ ./ 则/ 存在/ 一个/ 起/ 始于/ 初始/ 格局/ 的/ 执行/ 路径/ 能够/ 到达/ 该/ 错误/ 状态/ ,/ 进而/ 根据/ 进程/ 在/ 各个/ 状态/ 的/ 局部/ 栈/ 的/ 内容/ 和/ 消息/ 队列/ 的/ 内容/ ,/ 尝试/ 查找/ 产生/ 错误/ 的/ 原因/ ./ (/ 2/ )/ 若/ Reach/ ∩/ T/ 为空/ ,/ 则/ 经过/ k/ 次/ 上下文/ 切换/ 的/ 运行/ ,/ 目标/ 状态/ s/ ∈/ S/ 是/ 不可/ 达/ 的/ ./ 状态/ s/ 不可/ 达/ 的/ 判断/ 步骤/ 如下/ :/ ①/ 经过/ k/ 次/ 上下文/ 切换/ 的/ 运行/ ,/ 搜索/ 的/ 状态/ 空间/ 覆盖度/ 不足以/ 覆盖/ 目标/ 状态/ ,/ 此时/ 可以/ 增大/ k/ 的/ 值/ 并/ 继续/ 求解/ ,/ 直至/ 耗尽/ 所有/ 可用/ 的/ 计算资源/ ./ ②/ 若/ 使用/ ①/ 中/ 的/ 方法/ 目标/ 状态/ 仍/ 是/ 不可/ 达/ 的/ ,/ 则/ 得出结论/ :/ 在/ 现有/ 计算能力/ 下/ 目标/ 状态/ 是/ 不/ 可能/ 出现/ 的/ ,/ 即/ 错误/ 状态/ 不/ 可能/ 出现/ ./ 7/ 结论/ 随着/ 并发/ 和/ 分布式系统/ 的/ 广泛应用/ ,/ 并发程序/ 的/ 安全性/ 问题/ 面临/ 着/ 严峻/ 挑战/ ./ 由于/ 并发程序/ 中/ 存在/ 不/ 确定/ 的/ 进程/ 交错/ ,/ 故需/ 通过/ 穷尽/ 地/ 进行/ 可达性/ 分析/ 才能/ 确保/ 并发程序/ 的/ 安全性/ ./ 并发程序/ 广泛/ 采用/ 基于/ 事件驱动/ 的/ 编程/ 模式/ ,/ 进程/ 间/ 通过/ 共享内存/ 和/ 消息/ 队列/ 进行/ 通信/ ,/ 然而/ 其/ 可达性/ 问题/ 是/ 不可判定/ 的/ ./ 另外/ ,/ 并发程序/ 引入/ 递归/ 调用/ 后/ 进一步/ 加剧/ 了/ 状态/ 空间/ 爆炸/ ,/ 从而/ 难以/ 通过/ 传统/ 可达性/ 分析/ 确保/ 此类/ 并发程序/ 的/ 安全性/ ./ 在/ 上下文/ 切换/ 定界/ 和/ 良序/ 排队/ 约束/ 下/ ,/ 递归/ 队列/ 并发程序/ 的/ 可达性/ 问题/ 则/ 为/ 可/ 判定/ 的/ ./ 本文/ 提出/ 一种/ 基于/ 多/ 栈下推/ 系统/ 的/ 上下文/ 切换/ 定界/ 可/ 达/ 算法/ ,/ 该/ 算法/ 可/ 作为/ 求解/ 递归/ 队列/ 并发程序/ 可达性/ 问题/ 的/ 算法/ 基础/ ./ 以后/ 将/ 关注/ 于/ 以下/ 方面/ 的/ 工作/ :/ (/ 1/ )/ 是否/ 可以/ 采用/ On/ -/ the/ -/ fly/ 技术/ 进行/ 可达性/ 分析/ ?/ 即/ 在/ 构造/ 状态/ 空间/ 的/ 过程/ 中/ ,/ 实时/ 地/ 判定/ 待/ 验证/ 的/ 状态/ (/ 或者/ 格局/ )/ 的/ 可达性/ ,/ 避免/ 搜索/ 程序/ 实际/ 运行/ 中/ 不可/ 达/ 的/ 状态/ 空间/ ,/ 减少/ 不必要/ 的/ 存储空间/ 的/ 浪费/ ;/ (/ 2/ )/ 给定/ 两个/ 非/ 初始状态/ (/ 或者/ 非/ 初始/ 格局/ )/ 集合/ ,/ 是否/ 可以/ 结合/ 正向/ 分析/ 与/ 逆向/ 分析/ 进行/ 可达性/ 问题/ 求解/ ?/ (/ 3/ )/ 进一步/ 研究/ 基于/ 局部/ 性质/ 可达性/ 求解/ 的/ 组合/ 验证/ ,/ 增强/ 算法/ 的/ 适用性/ ;/ (/ 4/ )/ 开发/ 原型/ 系统/ ./ 

