Page1/ 基于/ 查询/ 意图/ 的/ 长尾/ 查询/ 推荐/ 白露/ 郭嘉丰/ 曹雷程/ 学旗/ (/ 中国科学院计算技术研究所/ 网络/ 数据/ 科学/ 与/ 工程/ 研究/ 中心/ 北京/ 100190/ )/ 摘要/ 查询/ 推荐/ 是/ 一种/ 提升/ 用户/ 搜索/ 效率/ 的/ 重要/ 工具/ ./ 传统/ 的/ 查询/ 推荐/ 方法/ 关注/ 频度/ 较/ 高/ 的/ 查询/ ,/ 但/ 对于/ 那些/ 频度/ 较/ 低/ 的/ 长尾/ 查询/ ,/ 由于/ 其/ 信息/ 的/ 稀疏/ 性而/ 难以/ 产生/ 好/ 的/ 推荐/ 效果/ ./ 另外/ ,/ 传统/ 的/ 方法/ 由于/ 没有/ 考虑/ 查询/ 意图/ 对/ 推荐/ 结果/ 的/ 影响/ ,/ 故对/ 长尾/ 查询/ 的/ 推荐/ 会/ 受到/ 查询/ 中/ 噪声/ 单词/ 的/ 影响/ ./ 该文/ 提出/ 了/ 一种/ 新/ 的/ 关于/ 词项/ 查询/ 图/ (/ term/ -/ querygraph/ )/ 概率/ 混合/ 模型/ ,/ 该/ 模型/ 能够/ 准确/ 地/ 发掘出/ 用户/ 的/ 查询/ 意图/ ./ 另外/ ,/ 文中/ 还/ 提出/ 了/ 一种/ 融合/ 查询/ 意图/ 的/ 查询/ 推荐/ 方法/ ,/ 该/ 方法/ 可以/ 将/ 新/ 查询/ 中/ 单词/ 的/ 推荐/ 结果/ 按/ 查询/ 意图/ 自然/ 地/ 融合/ 起来/ ,/ 从而/ 避免/ 了/ 噪声/ 单词/ 对/ 推荐/ 结果/ 的/ 影响/ ./ 实验/ 结果表明/ ,/ 通过/ 考虑/ 查询/ 意图/ ,/ 可以/ 显著/ 提高/ 长尾/ 查询/ 推荐/ 的/ 相关性/ ./ 关键词/ 查询/ 推荐/ ;/ 长尾/ 查询/ ;/ 概率/ 混合/ 模型/ ;/ 查询/ 意图/ ;/ 词项/ 查询/ 图/ 1/ 引言/ 随着/ 互联网/ 的/ 蓬勃发展/ ,/ 搜索引擎/ 成为/ 用户/ 访问/ 网络资源/ 必不可少/ 的/ 工具/ ./ 用户/ 通过/ 向/ 搜索引擎/ 提交/ 查询/ 来/ 表达/ 自己/ 的/ 信息/ 需求/ ./ 但是/ 构造/ 好/ 的/ 查询/ 并非易事/ ,/ 为了/ 帮助/ 用户/ 构造/ 合适/ 的/ 查询/ ,/ 现代/ 搜索引擎/ 通过/ 分析/ 查询/ 日志/ 来/ 提供/ 查询/ 推荐/ ./ 现阶段/ Page2/ 的/ 查询/ 推荐/ 研究/ 工作/ ,/ 大部分/ 是/ 关注/ 于/ 那些/ 频度/ 较/ 高/ 的/ 用户/ 查询/ ./ 然而/ ,/ 已有/ 研究/ 工作/ 表明/ [/ 1/ ]/ ,/ 用户/ 查询/ 的/ 频度/ 分布/ 服从/ 长尾/ 现象/ (/ “/ LongTail/ ”/ )/ 规律/ ,/ 即/ 很大/ 比例/ 的/ 用户/ 查询/ 的/ 频度/ 都/ 很/ 低/ ,/ 并且/ 大多数/ 用户/ 都/ 会/ 向/ 搜索引擎/ 提交/ 这种/ 长尾/ 查询/ ;/ 但是/ 由于/ 其/ 信息/ 的/ 稀疏/ 性/ ,/ 对于/ 这/ 类/ 查询/ 进行/ 相关/ 查询/ 推荐/ 的/ 结果/ 往往/ 不能/ 令人满意/ ./ 因而/ ,/ 为/ 长尾/ 查询/ 进行/ 有效/ 的/ 相关/ 查询/ 推荐/ ,/ 将会/ 极大地提高/ Web/ 搜索/ 效率/ ,/ 进而/ 提升/ 用户/ 查询/ 体验/ ./ 针对/ 长尾/ 查询/ 的/ 查询/ 推荐/ 的/ 研究/ 工作/ 开展/ 较晚/ ,/ 一些/ 方法/ 通过/ 单词/ 信息/ 扩充/ 查询/ 间/ 的/ 关系/ ,/ 来/ 进行/ 推荐/ ./ 然而/ 这/ 类/ 方法/ 没有/ 考虑/ 到/ 单词/ 在/ 查询/ 中/ 的/ 不同/ 作用/ ,/ 特别/ 是/ 忽略/ 了/ 查询/ 意图/ 对/ 查询/ 推荐/ 的/ 影响/ ,/ 从而/ 导致/ 较差/ 的/ 推荐/ 结果/ ./ 另外/ 查询/ 中有/ 很多/ 词是/ 噪声/ 词/ ,/ 过分/ 考虑/ 这类/ 词会/ 造成/ 推荐/ 结果/ 偏离/ 用户/ 的/ 查询/ 意图/ ./ 实际上/ 一个/ 单词/ ti/ 对于/ 查询/ q/ 是否是/ 噪声/ 单词/ ,/ 是/ 由/ 查询/ q/ 的/ 查询/ 意图/ 决定/ 的/ ./ 比如/ 有/ 这样/ 的/ 两个/ 查询/ “/ wwwconferencedeadline/ ”/ 和/ “/ wwwwikicomnet/ ”/ ,/ 尽管/ 这/ 两个/ 查询/ 均/ 包含/ “/ www/ ”/ 这个/ 单词/ ,/ 但是/ 所起/ 作用/ 明显/ 不同/ ,/ 前者/ “/ www/ ”/ 表示/ 该/ 查询/ 是/ 关于/ 国际/ 互联网/ 大会/ ,/ 而/ 在/ “/ wwwwikicomnet/ ”/ 查询/ 中/ ,/ “/ www/ ”/ 却是/ 无关紧要/ 的/ 噪声/ 词/ ./ 基于/ 以上/ 考虑/ ,/ 本文/ 提出/ 了/ 一种/ 关于/ 词项/ 查询/ 图/ 的/ 概率/ 混合/ 模型/ ./ 具体/ 地/ 讲/ ,/ 该/ 模型/ 用/ 概率/ 的/ 方法/ 建模/ 查询/ 意图/ ,/ 并/ 解释/ 了/ 词项/ 查询/ 图中/ 每个/ 查询/ 、/ 每个/ 单词/ 以及/ 每条/ 边/ 的/ 产生/ 过程/ ./ 通过/ 该/ 模型/ ,/ 我们/ 可以/ 清晰/ 地/ 表示/ 出/ 蕴藏/ 于/ 词项/ 查询/ 图中/ 的/ 不同/ 查询/ 意图/ ./ 另外/ ,/ 我们/ 还/ 提出/ 一种/ 新/ 的/ 长尾/ 查询/ 的/ 推荐/ 方法/ ./ 该/ 方法/ 通过/ 查询/ 意图/ 来/ 衡量/ 单词/ 在/ 查询/ 中所起/ 的/ 作用/ ,/ 将/ 不同/ 单词/ 的/ 推荐/ 结果/ 按/ 查询/ 意图/ 整合/ 起来/ ./ 实验/ 数据/ 表明/ 我们/ 的/ 方法/ 能够/ 推荐/ 出/ 更加/ 相关/ 的/ 查询/ ./ 2/ 相关/ 工作/ 概率/ 混合/ 模型/ 是/ 近年来/ 出现/ 的/ 一种/ 比较/ 流行/ 的/ 数据分析/ 方法/ ./ 借助/ 其/ 清晰/ 的/ 定义/ 和/ 解释/ ,/ 概率/ 混合/ 模型/ 被/ 用到/ 多个/ 研究/ 领域/ ,/ 如/ 文本/ 分析/ [/ 2/ ]/ 、/ 协同/ 过滤/ [/ 3/ ]/ 、/ 社会/ 网络分析/ [/ 4/ ]/ 等等/ ./ 其中/ 比较/ 有/ 代表性/ 的/ 工作/ 是/ Hofmann/ [/ 5/ ]/ 提出/ 的/ PLSA/ 模型/ 和/ Blei/ 等/ 人/ [/ 6/ ]/ 提出/ 的/ LDA/ 模型/ ./ 最近/ 人们/ 开始/ 尝试/ 用/ 混合/ 模型/ 去/ 解决/ 社区/ 发现/ 的/ 问题/ ,/ 并/ 取得/ 了/ 一定/ 的/ 效果/ ./ 其中/ Newman/ 等/ 人/ [/ 7/ ]/ 提出/ 的/ 社区/ 发现/ 算法/ ,/ 能够/ 发现/ 可/ 部分/ 重叠/ 的/ 网络/ 社区/ ./ Ramasco/ 等/ 人/ [/ 8/ ]/ 基于/ Newman/ 的/ 方法/ 提出/ 了/ 一种/ 可以/ 即/ 建模/ 单向/ 和/ 双向/ 边/ 的/ 社区/ 发现/ 算法/ ./ Ren/ 等/ 人/ [/ 9/ ]/ 从/ PLSA/ 的/ 角度/ 出发/ ,/ 给出/ 了/ 一种/ 概率/ 化/ 的/ 社区/ 发现/ 算法/ ,/ 该/ 算法/ 假设/ 有/ 边/ 相连/ 的/ 两个/ 结点/ 来自/ 于/ 同一个/ 社区/ ./ 受/ 以上/ 工作/ 影响/ ,/ 我们/ 构建/ 了/ 一种/ 关于/ 词项/ 查询/ 图/ 的/ 概率/ 混合/ 模型/ ,/ 该/ 模型/ 不仅/ 能够/ 建模/ 查询/ 和/ 查询/ 之间/ ,/ 以及/ 查询/ 和/ 单词/ 之间/ 的/ 关系/ ,/ 而且/ 能够/ 发掘出/ 用户/ 的/ 查询/ 意图/ ./ 查询/ 推荐/ 一直/ 是/ 检索/ 领域/ 中/ 一个/ 重要/ 问题/ ./ 面对/ 不同/ 的/ 推荐/ 需求/ ,/ 人们/ 提出/ 了/ 各种各样/ 的/ 模型/ 和/ 算法/ ./ 比如/ Mei/ 等/ 人/ [/ 10/ ]/ 使用/ hittingtime/ 在/ click/ -/ though/ 图上/ 推荐/ 语义/ 相关/ 查询/ ./ Zhu/ 等/ 人/ [/ 11/ ]/ 通过/ 利用/ 带/ 停止/ 点/ 的/ 流行/ 排序/ 来/ 推荐/ 多样性/ 查询/ ./ Guo/ 等/ 人/ [/ 12/ ]/ 提出/ 了/ 一种/ 结构化/ 的/ 推荐/ 方法/ ,/ 该/ 方法/ 将/ 推荐/ 进行/ 聚类/ 来/ 帮助/ 用户/ 更好/ 地/ 理解/ 推荐/ ./ 最近/ 由/ Boldi/ 等/ 人/ [/ 13/ ]/ 提出/ 的/ 查询/ 流图/ (/ query/ -/ flowgraph/ )/ 也/ 被/ 用于/ 查询/ 推荐/ ,/ 他们/ 用/ 在/ 查询/ 流图/ 上/ 进行/ 个性化/ 随机/ 游走/ 的/ 方法/ 进行/ 查询/ 推荐/ ./ 在/ Boldino/ 等/ 人/ [/ 14/ ]/ 的/ 工作/ 中/ ,/ 他们/ 将/ 查询/ 流图/ 映射/ 到/ 低维/ 的/ 欧式/ 空间/ 中/ 进行/ 查询/ 推荐/ ./ 长尾/ 查询/ 的/ 推荐/ 是/ 近年来/ 人们/ 比较/ 关注/ 的/ 问题/ ./ 尽管/ 这/ 类/ 查询/ 中/ 单个/ 查询/ 发生/ 的/ 频率/ 较/ 低/ ,/ 但/ 其/ 整体/ 却/ 占/ 所有/ 查询/ 中/ 不小/ 的/ 一部分/ ./ Song/ 等/ 人/ [/ 15/ ]/ 利用/ 伪/ 反馈/ 的/ 方法/ 扩展/ 长尾/ 查询/ 的/ 信息/ ,/ 通过/ url/ 信息/ 将/ clickgraph/ 和/ skipgraph/ 的/ 推荐/ 结果/ 融合/ 在/ 一起/ ./ Pandey/ 等/ 人/ [/ 16/ ]/ 对/ 长尾/ 查询/ 中/ 的/ 广告/ 效用/ 进行/ 了/ 分析/ ./ Szpektor/ 等/ 人/ [/ 17/ ]/ 利用/ 模板/ 和/ 额外/ 的/ 本体/ 信息/ 对/ 长尾/ 查询/ 进行/ 推荐/ ./ 在/ Bonchi/ 等/ 人/ [/ 18/ ]/ 的/ 工作/ 中/ ,/ 长尾/ 查询/ 被/ 分解/ 到/ 单词/ ,/ 然后/ 通过/ 随机/ 游走/ 推荐/ 查询/ ./ 受/ 该项/ 工作/ 的/ 启发/ ,/ 我们/ 也/ 使用/ 了/ 查询/ 中/ 的/ 单词/ 信息/ ,/ 但/ 我们/ 的/ 方法/ 建模/ 了/ 查询/ 意图/ ,/ 因而/ 能/ 产生/ 更加/ 相关/ 的/ 推荐/ 结果/ ./ 3/ 基于/ 查询/ 意图/ 的/ 长尾/ 查询/ 推荐/ 方法/ 在/ 这/ 一部分/ ,/ 我们/ 首先/ 介绍/ 词项/ 查询/ 图/ 的/ 定义/ ,/ 然后/ 我们/ 将/ 介绍/ 一种/ 基于/ 词项/ 查询/ 图/ 的/ 概率/ 混合/ 模型/ ,/ 通过/ 该/ 模型/ 可以/ 得到/ 用户/ 的/ 查询/ 意图/ ./ 最后/ ,/ 我们/ 基于/ 查询/ 意图/ ,/ 用词/ 项/ 查询/ 图上/ 的/ 个性化/ 随机/ 游走/ 进行/ 长尾/ 查询/ 推荐/ ./ 3.1/ 词项/ 查询/ 图/ 由于/ 词项/ 查询/ 图是/ 查询/ 流图/ 的/ 一种/ 扩展/ ,/ 因此/ 我们/ 先/ 介绍/ 一下/ 查询/ 流图/ ./ 查询/ 流图/ 是/ 由/ Boldi/ 等/ 人/ [/ 13/ ]/ 提出/ 的/ 一种/ 新/ 的/ 用于/ 挖掘/ 查询/ 日志/ 信息/ 的/ 工/ Page3/ 具/ ./ 查询/ 流图/ 利用/ 查询/ 日志/ 中/ 的/ 会/ 话/ 信息/ ,/ 将/ 不同/ 的/ 查询/ 连接起来/ 构成/ 一/ 同质/ 有向图/ ./ 具体/ 的/ 说/ ,/ 如果/ 我们/ 在/ 查询/ 日志/ 中有/ 一/ 查询/ 会话/ 集合/ S/ ,/ 我们/ 用/ G/ =/ (/ V/ ,/ E/ ,/ W/ )/ 表示/ 与其/ 对应/ 一个/ 查询/ 流图/ ,/ 其中/ 结点/ 集合/ V/ =/ Q/ ∪/ {/ s/ ,/ t/ }/ ,/ Q/ 是/ 集合/ S/ 中/ 的/ 所有/ 查询/ ,/ s/ ,/ t/ 分别/ 表达/ 两个/ 特殊/ 的/ 虚拟/ 结点/ :/ 开始/ 结点/ 和/ 终止/ 结点/ ./ 图/ 1/ 查询/ 流图/ 的/ 构建/ 在/ 查询/ 流图/ 中/ ,/ 查询/ 结点/ 之间/ 的/ 关系/ 只能/ 通过/ 查询/ 会话/ 中/ 连续/ 共现/ 信息/ 来/ 建立/ ./ 实际上/ 在/ 查询/ 流图/ 中/ 有/ 大量/ 的/ 查询/ 虽然/ 没有/ 边/ 相连/ ,/ 但是/ 却/ 因为/ 包含/ 同样/ 的/ 单词/ 而/ 具有/ 相似/ 或/ 相关/ 的/ 语义/ ./ 于是/ ,/ Bonchi/ 等/ 人/ [/ 18/ ]/ 提出/ 一种/ 被/ 称为/ 词项/ 查询/ 图/ 的/ 包含/ 单词/ 信息/ 的/ 扩展/ 查询/ 流图/ ./ 如果/ 还用/ G/ =/ (/ V/ ,/ E/ ,/ W/ )/ 表示/ 某一/ 查询/ 流图/ ,/ 而用/ G/ =/ {/ V/ ,/ E/ ,/ W/ }/ 表示/ 其/ 对应/ 的/ 一个/ 词项/ 查询/ 图/ (/ 如图/ 2/ 所示/ )/ ,/ 那么/ V/ =/ V/ ∪/ T/ ,/ T/ =/ {/ w1/ ,/ w2/ ,/ …/ }/ 表示/ 所有/ 查询/ 中/ 的/ 单词/ 集合/ ./ E/ =/ E/ ∪/ ETQ/ ,/ ETQ/ 表示/ 词到/ 查询/ 的/ 边/ 集合/ ,/ 这样/ 的/ 边/ 可定义/ 为/ ,/ 如果/ 某一/ 查询/ q/ 包含/ 某个/ 词/ wi/ ,/ 那么/ 就/ 有/ 一条/ 边/ wi/ →/ q/ ./ W/ =/ W/ ∪/ WTQ/ ,/ WTQ/ 表示/ 从/ 单词/ 到/ 查询/ 的/ 转移/ 频率/ 集合/ ./ 图/ 2/ 给出/ 了/ 图/ 1/ 对应/ 的/ 词项/ 查询/ 图/ ./ 简洁/ 起/ 见/ ,/ 在/ 词项/ 查询/ 图中/ ,/ 我们/ 没有/ 将/ 起始/ 节点/ s/ 和/ 终止/ 节点/ t/ 绘出/ ./ 3.2/ 基于/ 词项/ 查询/ 图/ 的/ 概率/ 混合/ 模型/ 这/ 一节/ 将/ 具体/ 介绍/ 我们/ 提出/ 的/ 一种/ 新型/ 的/ 关于/ E/ 是/ 查询/ 流图/ 中边/ 的/ 集合/ ,/ 如果/ 两个/ 查询/ qa/ ,/ qb/ 是/ 同一个/ 查询/ 会话/ 中/ 的/ 连续/ 的/ 两个/ 查询/ ,/ 那么/ 在/ 查询/ 流图/ 中/ 就/ 有/ 一条/ 从/ qa/ 指向/ qb/ 的/ 有/ 向/ 边/ ./ W/ 是/ 边/ 的/ 权重/ 集合/ ./ 不同/ 的/ 应用/ 场景/ 权重/ 的/ 定义/ 不同/ ,/ 这里/ 我们/ 仅用/ 查询/ 会话/ 集合/ 中/ 的/ 查询/ 间/ 转移/ 频率/ 来/ 表示/ 边/ 的/ 权重/ ./ 图/ 1/ 展示/ 了/ 从/ 一组/ 查询/ 会话/ 中/ 构建/ 查询/ 流图/ 的/ 过程/ ./ 词项/ 查询/ 图/ 的/ 概率/ 混合/ 模型/ ./ 实际上/ ,/ 我们/ 的/ 模型/ 基于/ 如下/ 几点/ 假设/ :/ (/ 1/ )/ 每一/ 查询/ 都/ 是/ 产生/ 于/ 某种/ 查询/ 意图/ ./ (/ 2/ )/ 在/ 某/ 一/ 查询/ 会话/ 中/ ,/ 相邻/ 的/ 两个/ 查询/ 来自/ 于/ 同样/ 的/ 查询/ 意图/ ./ (/ 3/ )/ 组成/ 某个/ 查询/ 的/ 所有/ 单词/ 都/ 来自/ 同样/ 的/ 查询/ 意图/ ./ 这/ 几条/ 假设/ 比较简单/ 直观/ ,/ 符合/ 人们/ 对/ 查询/ 及/ 查询/ 间/ 关系/ 的/ 理解/ ./ 具体/ 的/ 说/ ,/ 每一/ 查询/ 都/ 是/ 产生/ 于/ 某种/ 查询/ 意图/ ,/ 查询/ 中/ 单词/ 蕴含/ 了/ 该种/ 查询/ 意图/ ,/ 用户/ 在/ 查询/ 提交/ 给/ 搜索引擎/ 之后/ ,/ 如果/ 对/ 搜索/ 结果/ 不/ 满意/ ,/ 将会/ 提交/ 不同/ 的/ 查询/ 来/ 重新/ 表述/ 其/ 查询/ 意图/ ./ 因而/ ,/ 查询/ 会话/ 中/ 连续/ 的/ 查询/ 是/ 用户/ 对/ 其/ 某/ 一/ 查询/ 意图/ 的/ 多种/ 表述/ ./ 基于/ 这样/ 的/ 认识/ ,/ 我们/ 可以/ 分析/ 词项/ 查询/ 图中/ 查询/ 与/ 查询/ 、/ 查询/ 和/ 单词/ 间/ 的/ 关系/ 来/ 挖掘出/ 查询/ 意图/ 和/ 单词/ 的/ 相互/ 关系/ ./ 同/ 传统/ 的/ 话题/ 模型/ 一样/ ,/ 这里/ 我们/ 也/ 采用/ 单词/ 的/ 分布/ 来/ 表达/ 用户/ 的/ 查询/ 意图/ ./ 但是/ ,/ 相对/ 于/ 传统/ 的/ 话题/ 模型/ (/ LDA/ [/ 6/ ]/ ,/ PLSA/ [/ 5/ ]/ )/ ,/ 我们/ 所学/ 得/ 的/ 单词/ 分布/ 不仅/ 能/ 反映/ 出/ 单词/ 的/ 共现/ 语义/ 性质/ ,/ 而且/ 能/ 通过/ 建模/ 词项/ 查询/ 图中/ 查询/ 和/ 查询/ 之间/ 的/ 相互/ 关系/ 来/ 影响/ 查询/ 中/ 单词/ 的/ 产生/ 方式/ ,/ 从而/ 达到/ 建模/ 查询/ 意图/ 的/ 目的/ ./ 图/ 3/ 展示/ 了/ 产生/ 词项/ 查询/ 图/ 的/ 概率/ 图/ 模型/ ./ 具体/ 的/ 说/ ,/ 如果/ 我们/ 有/ 一/ 词项/ 查询/ 图/ G/ ,/ 其中/ 查询/ 节点/ 的/ 个数/ 是/ N/ ,/ 查询/ 和/ 查询/ 之间/ 的/ 边/ 的/ 数目/ 是/ M/ ,/ 单词/ 集合/ 是/ T/ ./ 我们/ 假设/ 这样/ 的/ G/ 是/ 由/ K/ 个/ 查询/ 意图/ 产生/ 的/ ,/ β/ r/ 是/ 关于/ 查询/ 意图/ r/ 的/ |/ T/ |/ 维/ 多项/ 分布/ ,/ |/ T/ |/ 表示/ 单词/ 集合/ 的/ 大小/ ./ 我们/ 用/ eab/ 来/ 表示/ G/ 中/ 连接/ 查询/ a/ ,/ b/ 的/ 边/ ./ gab/ 是/ 一/ 指示器/ 变量/ ,/ 用来/ 说明/ 边/ eab/ 来自/ 于/ 哪个/ 查询/ 意图/ ./ π/ 是/ 整个/ G/ 中/ 关于/ 查询/ 意图/ 的/ K/ 维/ 多项/ 分布/ ./ w/ 表示/ 在/ 查询/ 中/ 出现/ 的/ 单词/ ,/ |/ a/ |/ 和/ |/ b/ |/ 分别/ 表示/ 查询/ a/ 和/ b/ 中/ 单词/ 的/ 个数/ ./ 方便/ Page4/ 起见/ ,/ 我们/ 用/ Qd/ ,/ i/ 来/ 表示/ 在/ 查询/ d/ 中/ 单词/ wi/ 出现/ 的/ 次数/ ,/ 用/ Gab/ 来/ 表示/ 连接/ 节点/ a/ 和/ b/ 边/ 的/ 权重/ ,/ 使用/ 如上/ 的/ 符号/ 的/ 定义/ ,/ 我们/ 给出/ 一条/ 连接/ 查询/ a/ 和/ b/ 的/ 边/ eab/ 的/ 产生/ 过程/ :/ 过程/ 1/ ./ 产生/ 边/ eab/ 的/ 过程/ ./ 1/ ./ 对于/ 边/ eab/ ,/ 我们/ 首先/ 按照/ K/ 维/ 多项/ 分布/ π/ 2/ ./ 对于/ 查询/ a/ ,/ 我们/ 按照/ |/ T/ |/ 维/ 多项/ 分布/ β/ r/ 选取/ 3/ ./ 对于/ 查询/ b/ ,/ 我们/ 按照/ |/ T/ |/ 维/ 多项/ 分布/ β/ r/ 选取/ 根据上述/ 过程/ ,/ 我们/ 可以/ 写出/ 产生/ 边/ eab/ 且/ 选取/ 某个/ 意图/ r/ ./ |/ a/ |/ 个/ 单词/ 组成/ 查询/ a/ ./ |/ b/ |/ 个/ 单词/ 组成/ 查询/ b/ ./ gab/ =/ r/ 的/ 概率/ 如下/ :/ Pr/ (/ eab/ ,/ gab/ =/ r/ )/ =/ Pr/ (/ gab/ =/ r/ )/ ·/ 将/ 变量/ gab/ 积掉/ ,/ 我们/ 可以/ 得到/ 关于/ 边/ eab/ 的/ 概率/ :/ 通过/ 建模/ 每/ 一条/ 边/ 的/ 产生/ 概率/ ,/ 我们/ 可以/ 得到/ 关于/ 整个/ G/ 似然/ 函数/ 如下/ 定义/ :/ Pr/ (/ G/ π/ ,/ β/ )/ =/ ∏/ eab/ ∈/ E/ ∑/ K/ 从/ 上式/ 可以/ 看出/ ,/ π/ 和/ β/ 是/ 控制/ 似然/ 函数/ Pr/ (/ G/ |/ π/ ,/ β/ )/ 参数/ ./ 一般来说/ ,/ 通过/ 最大化/ 似然/ 函数/ 可以/ 将/ 模型/ 参数/ 求/ 出/ ,/ 但是/ 由于/ 上式/ 中/ 连乘/ 的/ 每一项/ 都/ 是/ 由/ 累加/ 计算/ 而/ 来/ ,/ 这/ 使得/ 直接/ 最大化/ 似然/ 函数/ 比较复杂/ ./ 基于/ 这种/ 考虑/ ,/ 这里/ 我们/ 采用/ EM/ 算法/ 来/ 迭代/ 的/ 最大化/ 似然/ 函数/ ,/ 同时/ 求/ 出/ 各个/ 参数/ 的/ 值/ ./ 在/ 模型/ 中/ ,/ 我们/ 用隐/ 变量/ gab/ 指示/ 边/ 属于/ 哪个/ 查询/ 意图/ ./ 令/ η/ ab/ ,/ r/ =/ Pr/ (/ gab/ =/ r/ |/ eab/ )/ ,/ 那么/ 关于/ η/ ab/ ,/ r/ 就/ 可以/ 写成/ :/ η/ ab/ ,/ r/ =/ Pr/ (/ gab/ =/ reab/ )/ =/ Pr/ (/ gab/ =/ r/ ,/ eab/ )/ =/ 从/ 该式/ 可以/ 看出/ η/ ab/ ,/ r/ 反映/ 了/ 第/ r/ 个/ 查询/ 意图/ 对/ 产生/ 边/ eab/ 的/ 贡献/ 程度/ ./ 有/ 了/ 以上/ 的/ 关于/ 隐/ 变量/ gab/ 的/ 后验/ 估计/ ,/ 我们/ 就/ 可以/ 写出/ 如下/ 关于/ G/ 的/ 对数/ 似然/ 函数/ :/ lnPr/ (/ G/ π/ ,/ β/ )/ =/ ∑/ eab/ ∈/ E/ 我们/ 在/ 上式/ 中/ 加入/ π/ 和/ β/ 的/ 概率/ 归一性/ 约束/ ,/ 就/ 得到/ 如下/ 目标/ 函数/ :/ LL/ =/ ∑/ eab/ ∈/ E/ ∑/ K/ α/ ∑/ K/ 其中/ α/ ,/ μ/ 是/ 拉格朗/ 日/ 因子/ ./ 我们/ 将/ 上式/ 分别/ 对/ π/ 和/ β/ 求/ 导数/ ,/ 并令/ 各自/ 结果/ 为/ 0/ ./ 化简/ 后/ 可/ 得到/ 如下/ 的/ 公式/ :/ π/ r/ =/ ∑/ eab/ ∈/ E/ ∑/ Kr/ =/ 1/ ∑/ eab/ ∈/ E/ β/ r/ ,/ i/ =/ ∑/ eab/ ∈/ E/ ∑/ Ti/ =/ 1/ ∑/ eab/ ∈/ E/ 上式/ 中/ ,/ / (/ )/ ·/ 是/ 指示/ 函数/ ,/ 定义/ 如下/ :/ 在/ 实际/ 计算/ 中/ ,/ 我们/ 首先/ 随机/ 初始化/ π/ 和/ β/ 的/ 值/ ,/ 然后/ 按照/ 式/ (/ 4/ )/ 、/ (/ 7/ )/ 、/ (/ 8/ )/ 迭代/ 计算/ ,/ 就/ 可以/ 得到/ 关于/ 模型/ 参数/ π/ 和/ β/ 的/ 估计值/ ./ EM/ 算法/ 保证/ 了/ 迭代/ 的/ 收敛性/ ,/ 并且/ 每次/ 迭代/ 都/ 会/ 使/ 对数/ 似然/ 函数/ 增加/ ./ 因此/ 我们/ 可以/ 通过/ 设定/ 某一/ 阈值/ 作为/ 终止/ 迭代/ 的/ 条件/ ,/ 当/ 对数/ 似然/ 函数/ 的/ 增幅/ 小于/ 这一/ 阈值/ 之后/ 便/ 认为/ 收敛/ ./ EM/ 算法/ 是/ 确定性/ 算法/ ,/ 其/ 迭代/ 终止/ 时/ 得到/ 的/ 结果/ 是/ 由/ 参数/ 初始化/ 值而定/ 的/ ./ 因此/ 我们/ 可以/ 进行/ 多轮/ 迭代/ ,/ 将/ 其中/ 拥有/ 最大/ 似然/ 函数/ 值/ 的/ 那轮/ 迭代/ 的/ 参数/ 作为/ 最后/ 结果/ ./ 3.3/ 结合/ 查询/ 意图/ 的/ 长尾/ 查询/ 推荐/ 在/ 文献/ [/ 18/ ]/ 中/ 作者/ 提出/ 了/ 一种/ 利用/ 词项/ 查询/ 图对/ 长尾/ 查询/ 进行/ 推荐/ 的/ 方法/ ./ 该/ 方法/ 首先/ 从/ 查询/ 会/ Page5/ 话/ 中/ 构建/ 出词/ 项/ 查询/ 图/ ,/ 然后/ 对于/ 某个/ 长尾/ 查询/ q/ =/ {/ t1/ ,/ t2/ ,/ …/ ,/ tm/ }/ ,/ 利用/ 如下/ 概率/ 转移/ 矩阵/ 犃/ i/ 计算/ 每个/ 单词/ ti/ 在/ 词项/ 查询/ 图上/ 通过/ 个性化/ 随机/ 游走/ 而/ 得到/ 的/ PageRank/ 向量/ 狕/ (/ i/ )/ :/ 其中/ ,/ 犠/ 是/ 由/ 犌/ =/ {/ V/ ,/ E/ ,/ W/ }/ 的/ 邻接矩阵/ 按照/ 行进/ 权重/ 归一化/ 得到/ 的/ 矩阵/ ,/ λ/ ∈/ [/ 0/ ,/ 1/ ]/ 是/ 个性化/ 随机/ 游走/ 中/ 远距/ 传输/ 概率/ (/ teleportationprobability/ )/ ./ 犲/ i/ 是/ 一个/ |/ V/ |/ 维/ 的/ 行向量/ ,/ 该/ 向量/ 除了/ 第/ i/ 个/ 元素/ 是/ 1/ ,/ 其余/ 全是/ 0.1/ 是/ 各/ 元素/ 全是/ 1/ 的/ |/ V/ |/ 维/ 行向量/ ./ 传统/ 的/ 方法/ 将/ q/ 中/ 每个/ ti/ 计算出来/ 的/ z/ (/ i/ )/ 按照/ Hadamard/ 积/ 相乘/ :/ 其中/ ,/ zq/ 即/ 是/ G/ 中/ 每个/ 结点/ 关于/ 查询/ q/ 的/ 推荐/ 得分/ ./ 然后/ 将/ 得分/ 较/ 高/ 的/ 结点/ 所/ 对应/ 的/ 查询/ 取出/ 作为/ 查询/ q/ 的/ 推荐/ ./ 从式/ (/ 11/ )/ 可以/ 看出/ ,/ 传统/ 方法/ 使用/ Hadamard/ 积时/ ,/ 将/ 每个/ 单词/ ti/ 等同/ 看待/ ,/ 且/ 不/ 考虑/ q/ 的/ 查询/ 意图/ 和/ 每个/ 单词/ ti/ 的/ 相互/ 关系/ ,/ 这样/ 就/ 会/ 造成/ 一些/ 噪音/ 单词/ z/ (/ i/ )/ 一定/ 程度/ 上/ 影响/ 了/ q/ 的/ 最后/ 推荐/ 结果/ ./ 基于/ 这样/ 的/ 考虑/ ,/ 我们/ 提出/ 利用/ 查询/ 意图/ 来/ 衡量/ 每个/ 单词/ ti/ 对/ 查询/ q/ 的/ 重要/ 程度/ ,/ 从而/ 达到/ 消除/ 或/ 减缓/ 噪音/ 单词/ 对/ 查询/ 推荐/ 的/ 影响/ ./ 在/ 上/ 一节/ 中/ ,/ 我们/ 可以/ 计算/ 出/ 查询/ 意图/ 的/ 分布/ π/ 和/ 查询/ 意图/ 关于/ 单词/ 的/ 分布/ β/ ./ 对于/ 一个/ 新来/ 的/ 查询/ qc/ ,/ 利用/ 贝叶斯/ 公式/ 可/ 得到/ 该/ 查询/ 关于/ 查询/ 意图/ 的/ 分布/ :/ Pr/ (/ rqc/ )/ =/ Pr/ (/ r/ )/ Pr/ (/ qcr/ )/ 因此/ 对于/ 每/ 一种/ 查询/ 意图/ r/ ,/ qc/ 中/ 的/ 每个/ 单词/ ti/ 关于/ 该/ 意图/ 的/ 重要性/ 可以/ 用/ Pr/ (/ ti/ |/ r/ )/ =/ β/ r/ ,/ i/ 来/ 表示/ ./ 利用/ qc/ 中/ 每个/ ti/ 的/ PageRank/ 值/ z/ (/ i/ )/ ,/ 我们/ 可以/ 计算/ 在/ 该种/ 意图/ r/ 下/ qc/ 的/ 推荐/ 得分/ :/ 将/ 不同/ 的/ zr/ 得到/ 最后/ 我们/ 关于/ q/ 的/ 推荐/ 得分/ :/ zqc/ =/ ∑/ K/ 从式/ (/ 14/ )/ 中/ 我们/ 可以/ 看到/ ,/ 不同/ 单词/ 的/ z/ (/ i/ )/ 会/ 由于/ 当前/ 查询/ qc/ 属于/ 不同/ 的/ 查询/ 意图/ r/ 而/ 表现/ 出/ 不同/ 的/ 重要性/ ./ 那些/ 关于/ 意图/ r/ 比较/ 重要/ 的/ 单词/ ti/ ,/ 由于/ 其/ β/ r/ ,/ i/ 比较/ 大/ ,/ 故/ z/ β/ r/ ,/ i/ (/ i/ )/ 中/ 各个/ 结点/ 得分/ 的/ 差异/ 也/ 比/ r/ =/ 1/ 较大/ ,/ 因而/ 能够/ 对/ zr/ 我们/ 用/ Pr/ (/ r/ |/ qc/ )/ 来/ 权衡/ 不同/ 意图/ 的/ 重要/ 程度/ ,/ 故/ 对于/ qc/ 蕴含/ 的/ 那些/ 不/ 明显/ 的/ 意图/ (/ 即/ Pr/ (/ r/ |/ qc/ )/ 比较/ 小/ )/ ,/ 其/ 对/ zqc/ 的/ 最后/ 得分/ 影响/ 也/ 较/ 小/ ./ 4/ 实验/ 4.1/ 数据/ 集/ 我们/ 实验/ 数据/ 来源于/ 某/ 商业/ 搜索引擎/ 3/ 个/ 月/ 的/ 搜索/ 日志/ ./ 我们/ 从中/ 剔除/ 了/ 非/ 英语/ 的/ 查询/ ,/ 并/ 将/ 所有/ 的/ 查询/ 中/ 的/ 单词/ 转化/ 为/ 对应/ 的/ 小写/ 单词/ ./ 我们/ 按照/ 30min/ 的/ 时间/ 间隔/ 将/ 查询/ 切/ 分成/ 查询/ 回话/ ,/ 构建/ 查询/ 流图/ ./ 为了/ 减小/ 噪音/ 所/ 带来/ 的/ 影响/ ,/ 我们/ 去/ 除了/ 所有/ 发生/ 频率/ 小于/ 3/ 次/ 的/ 边/ ,/ 并/ 使用/ nltk/ 工具包/ 中/ 的/ lancaster/ 算法/ 对/ 所有/ 单词/ 提取/ 词干/ ./ 我们/ 选取/ 了/ 其中/ 最大/ 的/ 一个/ 连通/ 子图/ 来/ 构造/ 词项/ 查询/ 图/ ,/ 该子/ 图/ 包含/ 16980/ 个/ 不同/ 的/ 查询/ 、/ 51214/ 条边/ 以及/ 8713/ 个/ 不同/ 的/ 单词/ ./ 实验/ 中/ 我们/ 经验/ 选取/ 意图/ 的/ 个数/ 为/ 60/ ,/ 80/ ,/ 100/ ,/ 120/ ,/ 并/ 均/ 取得/ 相似/ 的/ 实验/ 效果/ ,/ 这里/ 我们/ 仅/ 报告/ 话题/ 个数/ K/ =/ 100/ 的/ 结果/ ./ 4.2/ 评价/ 查询/ 意图/ 在/ 表/ 1/ 中/ ,/ 我们/ 展示/ 了/ 3/ 个/ 随机/ 选取/ 的/ 查询/ 意图/ ,/ 并/ 将/ 每个/ 词/ 按照/ Pr/ (/ wi/ |/ r/ )/ 的/ 大小/ 进行/ 排序/ ,/ 这里/ 我们/ 仅/ 展示/ 了/ 每种/ 查询/ 意图/ 中/ 排序/ 最高/ 的/ 10/ 个/ 单词/ ./ 为了/ 方便/ 辨认/ ,/ 我们/ 将/ 词干/ 还原成/ 对应/ 的/ 单词/ ./ 我们/ 可以/ 看出/ 这些/ 词/ 清晰/ 地/ 反映/ 了/ 各个/ 查询/ 意图/ ,/ 其中/ 第一列/ 是/ 关于/ 移动/ 通信/ 的/ ,/ 第二列/ 是/ 关于/ 汽车/ 的/ ,/ 第三列/ 是/ 关于/ 航空/ 旅行/ 的/ ./ 移动/ 通信/ verizoncingularwirelesssprintmobilenexteltmobilephoneverizonwirelesslexus4/ ./ 3/ 评价/ 长尾/ 查询/ 的/ 推荐/ 这/ 一节/ 我们/ 将/ 评价/ 对/ 长尾/ 查询/ 的/ 查询/ 推荐/ 质量/ ./ 我们/ 将/ 文献/ [/ 18/ ]/ 中/ 提到/ 的/ 方法/ 作为/ 基准/ 方法/ ./ 基准/ 方法/ 和/ 我们/ 的/ 方法/ 均/ 使用/ 相同/ 的/ λ/ =/ 0.7/ 来/ 计算/ 长尾/ 查询/ q/ =/ {/ t1/ ,/ …/ ,/ tm/ }/ 中/ 每词/ ti/ 对应/ 的/ PageRank/ 向量/ 狕/ (/ i/ )/ ./ 表/ 2/ 中/ 列出/ 了/ 两个/ 随机/ 选出/ 的/ 长尾/ 查询/ :/ “/ yahoomailinbox/ ”/ ,/ “/ zipcodeforWashingtondc/ ”/ 为/ 例子/ ,/ 来/ 比较/ 我们/ 的/ 方法/ 和/ 基准/ 方法/ 产生/ 的/ 推荐/ 有效性/ ./ 从/ 这/ 两个/ 例子/ 中/ 我们/ 可以/ 看出/ ,/ 我们/ 方法/ 产/ Page6/ 生/ 的/ 推荐/ 查询/ 同原/ 查询/ 更/ 相关/ ./ 而/ 基准/ 方法/ 给出/ 的/ 查询/ 由于/ 等同/ 看待/ 查询/ 中/ 的/ 每个/ 单词/ ,/ 因而/ 推荐/ 出/ 的/ 查询/ 是/ 那些/ 与/ 每个/ 单词/ 都/ 尽量/ 相关/ 的/ 查询/ ./ 从而/ 导致/ 了/ 在/ 整个/ 词项/ 查询/ 图中/ 比较/ 流行/ 的/ 查询/ (/ 如/ mapquest/ ,/ bankofamerica/ )/ 被/ 推荐/ 出来/ ./ 我们/ 的/ 方法/ 通过/ 查询/ 意图/ 来/ 衡量/ 单词/ 关于/ 查询/ 的/ 重要性/ ,/ 因而/ 对于/ 那些/ 比较/ 重要/ 的/ 单词/ w/ (/ 如/ “/ zipcodeforWashingtondc/ ”/ 中/ 的/ “/ zip/ ”/ 和/ “/ code/ ”/ )/ 赋予/ 更/ 多/ 的/ 权表/ 2/ 两个/ 长尾/ 查询/ 推荐/ 的/ 对比/ z0/ ./ 1rw/ =/ 另外/ ,/ 我们/ 请/ 了/ 3/ 位/ 评价者/ 来/ 人工/ 地/ 标记/ 推荐/ 查询/ 的/ 相关性/ ./ 这里/ 我们/ 采用/ 3/ 级/ 标注/ 法/ ,/ 其中/ 0/ 分/ 表示/ 根本/ 不/ 相关/ ,/ 0.5/ 分/ 表示/ 部分/ 相关/ ,/ 1/ 分/ 表示/ 完全/ 相关/ ./ 我们/ 从/ 已有/ 的/ 查询/ 日志/ 中/ 随机/ 地/ 产生/ 100/ 个/ 在/ 词项/ 查询/ 图中/ 没有/ 出现/ 过/ 的/ 查询/ ,/ 同时/ 要求/ 组成/ 这些/ 查询/ 的/ 单词/ 包含/ 在/ 词项/ 查询/ 图内/ ./ 我们/ 按照/ 式/ (/ 15/ )/ 计算/ 关于/ 查询/ q/ 的/ 相关性/ 得分/ (/ RS/ )/ ./ 其中/ q/ 表示/ 当前/ 查询/ ,/ k/ 表示/ 关于/ q/ 的/ 推荐/ 查询/ 个数/ ,/ L/ =/ {/ l1/ ,/ l2/ ,/ …/ ,/ lk/ }/ 表示/ 各个/ 推荐/ 所得/ 分数/ ./ 其中/ q/ 表示/ 当前/ 查询/ ,/ k/ 表示/ 关于/ q/ 的/ 推荐/ 查询/ 个数/ ,/ L/ =/ {/ l1/ ,/ l2/ ,/ …/ ,/ lk/ }/ 表示/ 各个/ 推荐/ 所得/ 分数/ ./ 我们/ 按照/ 推荐/ 分数/ 进行/ 排序/ ,/ 并/ 选取/ 前/ k/ =/ 1/ ,/ 3/ ,/ 5/ ,/ 7/ ,/ 10/ 个/ 查询/ 让/ 用户/ 标注/ 同源/ 查询/ 的/ 相关性/ ./ 图/ 5/ 展示/ 了/ 我们/ 的/ 方法/ 和/ 基准/ 方法/ 随机/ 选取/ 100/ 个/ 查询/ 的/ 平均/ 相关性/ 得分/ 的/ 对比/ ./ 可以/ 看出/ 随着/ 推荐/ 查询/ 个数/ 的/ 增多/ ,/ 越来/ 愈/ 多/ 的/ 不/ 相关/ 的/ 查询/ 被/ 推荐/ 出来/ ,/ 所以/ 基准/ 方法/ 和/ 我们/ 的/ 方法/ 的/ 相关性/ 得分/ 都/ 在/ 变差/ ./ 但/ 显而易见/ ,/ 由于/ 我们/ 的/ 方法/ 考虑/ 了/ 查询/ 意图/ 的/ 影响/ ,/ 推荐/ 查询/ 的/ 相关性/ 明显/ 好于/ 基准/ 方法/ 的/ 推荐/ 查询/ ./ 重/ (/ Pr/ (/ w/ |/ r/ )/ =/ β/ r/ ,/ w/ 较大/ )/ ,/ 使得/ 计算出来/ 这些/ 节点/ 的/ PageRank/ 值/ 在/ 该/ 权重/ 的/ 作用/ 下/ 具有/ 较强/ 的/ 区分/ 能力/ ,/ 对/ 最后/ 的/ 排序/ 结果/ 的/ 影响/ 也/ 较大/ ,/ 从而/ 推荐/ 效果/ 也/ 就/ 更好/ ./ 如图/ 4/ 的/ 例子/ 所示/ ,/ 我们/ 有/ 一/ PageRank/ 向量/ 狕/ (/ i/ )/ [/ 权重/ β/ r/ ,/ w/ =/ 0.1/ ,/ β/ r/ ,/ w/ =/ 0.9/ 得到/ 的/ 两个/ 排序/ 值/ 对/ 每个/ 节点/ 有/ 明显/ 不同/ 的/ 区分/ 性/ ,/ 那些/ Pr/ (/ w/ |/ r/ )/ =/ β/ r/ ,/ w/ 较大/ 的/ z/ β/ r/ ,/ w/ (/ m/ )/ 区分/ 力/ 较大/ ./ bankofamericaamericanidolyellowpagerealtorcomhomedepot5/ 总结/ 本文/ 提出/ 了/ 一种/ 新/ 的/ 基于/ 查询/ 意图/ 的/ 长尾/ 查询/ 推荐/ 方法/ ./ 不同于/ 以往/ 关于/ 长尾/ 查询/ 的/ 推荐/ 方法/ ,/ 本文/ 提出/ 了/ 一种/ 概率/ 混合/ 模型/ 来/ 挖掘/ 词项/ 查询/ 图中/ 的/ 查询/ 意图/ ,/ 在/ 该/ 模型/ 中/ 我们/ 将/ 查询/ 意图/ 定义/ 为/ 单词/ 的/ 分布/ ,/ 因而/ 可以/ 从/ 单词/ 的/ 角度/ 去/ 预测/ 长尾/ 查询/ 的/ 查询/ 意图/ ./ 此外/ 我们/ 还/ 提出/ 了/ 一种/ 根据/ 查询/ 意图/ 来/ 集成/ 单词/ 的/ 个性化/ 随机/ 游走/ 的/ 方法/ ,/ 该/ 方法/ 通过/ 衡量/ 单词/ 在/ 查询/ 中/ 的/ 重要/ 程度/ ,/ 对/ 长尾/ 查询/ 进行/ 推荐/ ./ 实验/ 验证/ 了/ 我们/ 推荐/ 方法/ 的/ 有效性/ ./ 在/ 以后/ 的/ 工作/ 中/ ,/ 我们/ 将会/ 考虑/ url/ 等/ 信息/ ,/ 进一步提高/ 推荐/ 效果/ ./ 

