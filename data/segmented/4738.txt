Page1/ 抽象/ 精化/ 和/ 可/ 满足/ 性/ 结合/ 的/ EFSM/ 模型/ 测试用例/ 优化/ 生成/ 1/ )/ (/ 苏州市/ 职业/ 大学/ 计算机/ 工程学院/ 江苏/ 苏州/ 215104/ )/ 2/ )/ (/ 上海大学/ 计算机/ 工程/ 与/ 科学/ 学院/ 上海/ 200072/ )/ 3/ )/ (/ 上海市/ 计算机软件/ 测评/ 重点/ 实验室/ 上海/ 201112/ )/ 摘要/ 基于/ 模型/ 的/ 测试/ 是/ 测试/ 自动化/ 的/ 重要/ 手段/ ,/ 通常/ 采用/ 模型/ 检验/ 技术/ 从/ 系统/ 模型/ 自动/ 生成/ 测试用例/ 集/ ,/ 但/ 生成/ 的/ 测试用例/ 集/ 往往/ 存在/ 冗余/ ,/ 这/ 将/ 影响/ 测试用例/ 执行/ 的/ 性能/ 和/ 成本/ ./ 该文/ 以/ 扩展/ 有限/ 状态机/ (/ ExtendedFiniteMachine/ ,/ EFSM/ )/ 为/ 建模/ 工具/ ,/ 根据/ 公式/ 簇/ 建立/ 状态/ 等价关系/ ,/ 构建/ 抽象/ 模型/ ,/ 采用/ 模型/ 检验/ 技术/ 生成/ 抽象/ 反例/ (/ 测试用例/ )/ ;/ 给出/ 了/ 判定/ 生成/ 的/ 抽象/ 反例/ 是否/ 为/ 伪/ 反例/ 的/ 方法/ ;/ 采用/ 反例/ 引导/ 的/ 方法/ 精化/ 抽象/ 模型/ ,/ 删除/ 伪/ 反例/ ;/ 最后/ ,/ 使用/ 我们/ 之前/ 提出/ 的/ 基于/ 可/ 满足/ 性/ 的/ 测试用例/ 生成/ 方法/ 在/ 抽象/ 模型/ 上/ 生成/ 约简/ 的/ 测试用例/ 集/ ./ 实验/ 表明/ :/ 该/ 方法/ 的/ 测试用例/ 数目/ 约简/ 比例/ 最高/ 达/ 76/ %/ (/ 警报/ 侦测/ 组件/ EFSM/ )/ ,/ 总长度/ 约简/ 比例/ 最高/ 达/ 68/ %/ (/ ATMEFSM/ )/ ,/ 同时/ 不会/ 影响/ 测试用例/ 集/ 的/ 迁移/ 覆盖率/ 和/ 查错/ 能力/ ./ 关键词/ 测试用例/ 约简/ ;/ 扩展/ 有穷/ 状态机/ ;/ 公式/ 簇/ ;/ 抽象/ ;/ 反例/ 引导/ 的/ 精化/ ;/ 可/ 满足/ 性/ 1/ 引言/ 软件测试/ 是/ 发现/ 软件/ 错误/ ,/ 保证/ 软件/ 质量/ 的/ 一种/ 重要/ 手段/ ./ 传统/ 软件测试/ 方法/ 所/ 需/ 成本/ 占/ 软件开发/ 总成本/ 的/ 50/ %/ 以上/ [/ 1/ ]/ ./ 测试/ 自动化/ 是/ 一种/ 能够/ 降低/ 测试/ 成本/ 的/ 有效/ 方法/ ./ 测试用例/ 的/ 自动/ 生成/ 是/ 测试/ 自动化/ 的/ 一个/ 重要环节/ 和/ 体现/ ./ 基于/ 模型/ 的/ 测试/ 使/ 测试/ 自动化/ 成为/ 可能/ ./ 它/ 根据/ 指定/ 的/ 测试/ 覆盖/ 准则/ 从/ 软件/ 的/ 行为/ 模型/ 自动/ 生成/ 测试用例/ (/ 抽象/ 测试用例/ )/ ,/ 然后/ 对/ 测试用例/ 进行/ 实例/ 化/ ,/ 最后/ 在/ 实际/ 系统/ 上/ 执行/ 测试用例/ ,/ 观察/ 系统/ 运行/ 的/ 结果/ 是否/ 与/ 测试用例/ 的/ 预期/ 行为/ 一致/ ./ 有时/ 根据/ 指定/ 的/ 测试/ 覆盖/ 准则/ ,/ 从/ 软件/ 行为/ 模型/ 生成/ 的/ 测试用例/ 集/ 规模/ 庞大/ ,/ 导致/ 测试/ 成本/ 高/ 、/ 效率/ 低/ ./ 因此/ ,/ 测试用例/ 集约/ 简是/ 软件测试/ 的/ 一项/ 重要/ 工作/ ./ 模型/ 检验/ [/ 2/ ]/ 是/ 一种/ 自动/ 验证/ 有穷/ 状态/ 系统/ 的/ 方法/ ,/ 在/ 很多/ 领域/ 有着/ 广泛/ 的/ 应用/ ./ 近年来/ ,/ 有人/ 把/ 它/ 应用/ 到/ 软件测试/ 中/ ./ 在/ 模型/ 检验/ 器/ 验证/ 可达性/ 性质/ 的/ 过程/ 中/ ,/ 如果/ 该/ 性质/ 不/ 成立/ ,/ 会/ 生成/ 一条/ 反例/ 作为/ 证据/ 序列/ ,/ 它/ 与/ 覆盖/ 测试/ 目标/ 的/ 测试用例/ 极其/ 相似/ ,/ 所以/ 可以/ 应用/ 模型/ 检验/ 技术/ 自动/ 生成/ 测试用例/ ./ 但/ 使用/ 模型/ 检验/ 技术/ 生成/ 测试用例/ 的/ 一个/ 最/ 主要/ 缺点/ 是/ 生成/ 的/ 测试用例/ 集会/ 存在/ 大量/ 冗余/ ,/ 这/ 增加/ 了/ 测试/ 生成/ 和/ 执行/ 成本/ ./ 抽象/ 是/ 能够/ 约简/ 测试用例/ 的/ 主要/ 技术/ 之一/ ,/ 其/ 主要/ 思想/ 是/ 构造/ 软件/ 行为/ 模型/ 的/ 抽象/ 模型/ ,/ 使/ 状态/ 数/ 和/ 迁移/ 数/ 大大/ 约简/ ./ 抽象/ 模型/ 中/ 的/ 状态/ 称为/ 抽象/ 状态/ ,/ 通过/ 抽象/ 得到/ 抽象/ 模型/ 的/ 软件/ 行为/ 模型/ 称为/ 具体/ 模型/ ,/ 具体/ 模型/ 中/ 的/ 状态/ 称为/ 具体/ 状态/ ./ 抽象/ 移除/ 或/ 简化/ 那些/ 与/ 验证/ 性质/ 无关/ 的/ 细节/ ./ 验证/ 抽象/ 模型/ 比/ 验证/ 具体/ 模型/ 有效/ ,/ 但是/ 在/ 抽象/ 过程/ 中/ 会/ 丢失/ 一些/ 信息/ ,/ 在/ 验证/ 抽象/ 模型/ 的/ 过程/ 中/ 可能/ 会/ 导致/ 错误/ 的/ 结果/ [/ 3/ ]/ ./ 抽象/ 分为/ 欠/ 近似/ 和/ 过/ 近似/ 两种/ ./ 欠/ 近似/ 抽象/ 减少/ 了/ 具体/ 模型/ 中/ 的/ 一些/ 行为/ ,/ 在/ 抽象/ 模型/ 中/ 不/ 成立/ 的/ 性质/ 在/ 具体/ 模型/ 中/ 也/ 不/ 成立/ ;/ 过/ 近似/ 抽象/ 具有/ 性质/ 保留/ 性/ ,/ 即/ 在/ 抽象/ 模型/ 满足/ 的/ 性质/ 在/ 具体/ 模型/ 也/ 满足/ ,/ 它/ 在/ 抽象/ 模型/ 中/ 引入/ 一些/ 额外/ 的/ 行为/ ,/ 因此/ ,/ 当/ 抽象/ 模型/ 违反/ 某一/ 性质/ 时/ ,/ 模型/ 检验/ 器/ 生成/ 的/ 反例/ 可能/ 是/ 抽象/ 模型/ 引入/ 的/ 额外/ 行为/ ,/ 不能/ 说明/ 具体/ 模型/ 也/ 违反/ 该/ 性质/ ,/ 这样/ 的/ 反例/ 我们/ 称为/ 伪/ 反例/ (/ spuriouscounterexample/ )/ ./ 为了/ 能够/ 更/ 准确/ 地/ 验证/ 性质/ ,/ 专家学者/ 提出/ 了/ 反例/ 引导/ 的/ 抽象/ 精化/ (/ CounterExample/ -/ GuidedAbstractionRefinement/ ,/ CEGAR/ )/ 框架/ [/ 4/ ]/ ./ 模型/ 检验/ 器/ 在/ 抽象/ 模型/ 生成/ 反例/ 时/ ,/ 需要/ 判定/ 在/ 具体/ 模型/ 中/ 是否/ 存在/ 对应/ 的/ 反例/ ,/ 一旦/ 为/ 伪/ 反例/ ,/ 则/ 对/ 抽象/ 模型/ 进行/ 精化/ 以/ 删除/ 伪/ 反例/ ./ 本文/ 采用/ 反例/ 引导/ 的/ 抽象/ 精化/ 框架/ 抽象/ 具体/ 模型/ ,/ 在/ 抽象/ 模型/ 上/ 生成/ 优化/ 的/ 测试用例/ 集/ ./ 本文/ 主要/ 完成/ 的/ 是/ :/ (/ 1/ )/ 构造/ 待测/ 软件/ 的/ 抽象/ 模型/ ./ 将/ EFSM/ 模型/ 中/ 迁移/ 上/ 的/ 谓词/ (/ 监护/ 条件/ )/ 划分/ 成/ 公式/ 簇/ (/ FormulaCluster/ )/ ./ 根据/ 公式/ 簇/ 建立/ 状态/ 的/ 等价关系/ ,/ 获得/ 抽象/ 状态/ ,/ 然后/ 分/ 几种/ 情况/ 讨论/ 如何/ 合并/ 相关/ 迁移/ ,/ 最后/ 构造/ 初始/ 抽象/ 模型/ ./ (/ 2/ )/ 反例/ 判定/ 和/ 模型/ 精化/ ./ 对/ 每个/ 测试/ 目标/ ,/ 用/ LTL/ 表示/ 成/ 一个/ 陷阱/ 性质/ (/ TrapProperty/ )/ ,/ 使用/ 模型/ 检验/ 技术/ 在/ 抽象/ 模型/ 上/ 为/ 测试/ 目标/ 生成/ 反例/ ,/ 判定/ 具体/ 模型/ 中/ 是否/ 存在/ 对应/ 的/ 具体/ 反例/ ./ 如/ 存在/ ,/ 则/ 说明/ 抽象/ 反例/ 可以/ 作为/ 测试用例/ ;/ 否则/ ,/ 采用/ 反例/ 引导/ 的/ 精化/ 框架/ 精化/ 抽象/ 模型/ ,/ 删除/ 伪/ 反例/ ,/ 继续/ 为/ 该/ 测试/ 目标/ 反例/ ,/ 直到/ 抽象/ 模型/ 不/ 存在/ 伪/ 反例/ ./ (/ 3/ )/ 约简/ 的/ 测试用例/ 集/ 生成/ ./ 使用/ 我们/ 先前/ 提出/ 的/ 基于/ 可/ 满足/ 性/ 的/ 测试用例/ 优化/ 方法/ [/ 5/ ]/ 在/ 最终/ 的/ 抽象/ 模型/ 上/ 生成/ 约简/ 的/ 测试用例/ 集/ ./ 本文/ 第/ 2/ 节/ 介绍/ 文中/ 用到/ 的/ 一些/ 基本概念/ ;/ 第/ 3/ 节/ 介绍/ 我们/ 之前/ 提出/ 的/ 基于/ 可/ 满足/ 性/ 的/ 测试用例/ 优化/ 方法/ ;/ 第/ 4/ 节/ 给出/ 公式/ 簇/ 的/ 概念/ 和/ 抽象/ 的/ 形式/ Page3/ 定义/ ;/ 第/ 5/ 节为/ 测试用例/ 方法/ ;/ 第/ 6/ 节是/ 判定/ 伪/ 反例/ 和/ 精化/ 抽象/ 模型/ 的/ 方法/ ;/ 第/ 7/ 节是/ 实验/ 及/ 结果/ ;/ 第/ 8/ 节是/ 相关/ 工作/ ;/ 最后/ 是/ 总结/ 和/ 进一步/ 工作/ ./ 2/ 基本/ 概念模型/ 检验/ 需要/ 构造/ 系统/ 模型/ 和/ 描述/ 系统/ 性质/ ./ 我们/ 用/ EFSM/ [/ 6/ ]/ 作为/ 建模/ 工具/ ,/ 用/ 线性/ 时序/ 逻辑/ (/ LinearTemporalLogic/ ,/ LTL/ )/ [/ 7/ ]/ 描述/ 系统/ 性质/ ./ 定义/ 1/ [/ 6/ ]/ ./ EFSMM/ 是/ 一个/ 六元/ 组/ (/ S/ ,/ init/ ,/ 图/ 1EFSM/ 模型/ 示例/ 定义/ 2/ ./ EFSM/ 中/ 长度/ 为/ n/ 的/ 路径/ 是/ 一个/ 状态/ 序列/ π/ =/ 〈/ s0/ ,/ …/ ,/ sn/ 〉/ ,/ 其中/ / 0/ / i/ / n/ -/ 1/ :/ (/ si/ ,/ si/ +/ 1/ )/ ∈/ T/ ,/ s0/ ∈/ init/ ,/ T/ 是/ EFSM/ 中/ 的/ 迁移/ 集/ ,/ si/ 和/ si/ +/ 1/ 分别/ 是/ ti/ ∈/ T/ 的/ 开始/ 状态/ 和/ 结束/ 状态/ ./ 定义/ 3/ [/ 7/ ]/ ./ LTL/ 的/ 语法/ 可/ 表示/ 为/ / ∷/ =/ true/ |/ falsep/ / / / 1/ ∧/ / 2/ / 1/ ∨/ / 2/ / 1/ 其中/ ,/ p/ 是/ 原子/ 命题/ ,/ / 1/ 和/ / 2/ 是/ LTL/ 公式/ ,/ 时序/ 算子/ X/ ,/ F/ ,/ G/ ,/ U/ 分别/ 表示/ 下/ 一/ 状态/ 、/ 将来/ 的/ 某个/ 状态/ 、/ 将来/ 的/ 所有/ 状态/ 和/ 直到/ 某个/ 状态/ ./ 测试/ 覆盖/ 准则/ 是/ 设计/ 测试用例/ 的/ 依据/ ,/ 它/ 表示/ 测试用例/ 执行/ 的/ 基本/ 单元/ ./ 在/ 基于/ 模型/ 的/ 测试/ 中/ 主要/ 有/ 状态/ 覆盖/ 准则/ 、/ 迁移/ 覆盖/ 准则/ 和/ 迁移/ 对/ 覆盖/ 准则/ 等/ [/ 8/ ]/ ./ 这里/ 我们/ 只/ 考虑/ 迁移/ 覆盖/ 准则/ ./ 在/ 基于/ 模型/ 的/ 测试/ 中/ ,/ 测试用例/ 是/ 一条/ 可以/ 覆盖/ 某个/ 测试/ 目标/ 的/ 有/ 穷/ 状态/ (/ 迁移/ )/ 序列/ ./ 模型/ 检验/ 中/ 的/ 可达性/ 分析/ 用来/ 验证/ 可达性/ 性质/ 在/ 模型/ 中/ 是否/ 成立/ ,/ 即/ 是否/ 存在/ 一条/ 有穷/ 状态/ 序列/ 能够/ 到达/ 某个/ 模型/ 元素/ ,/ 这样/ 的/ 状态/ 序列/ 和/ 测试用例/ 很/ 相似/ ,/ 所以/ 可以/ 把/ 模型/ 检验/ 技术/ 用于/ 测试用例/ 的/ 自动/ 生成/ ./ 在/ 用/ 模型/ 检验/ 技术/ 生成/ 测试用例/ [/ 9/ ]/ 的/ 过程/ 中/ ,/ 根据/ 测试/ 覆盖/ 准则/ ,/ 列出/ 测试/ 目标/ ,/ 把/ 测试/ 目标/ 表示/ 成/ 陷阱/ V/ ,/ I/ ,/ O/ ,/ T/ )/ ,/ 其中/ S/ 是/ 一个/ 有穷/ 状态/ 集/ ;/ init/ 是/ 初始状态/ 集/ ;/ V/ 是/ 有/ 穷/ 上下文/ 变量/ 集/ ;/ I/ 是/ 有/ 穷/ 输入/ 集/ ;/ O/ 是/ 有/ 穷/ 输出/ 集/ ;/ T/ 是/ 有/ 穷/ 迁移/ 集/ ./ 迁移/ t/ ∈/ T/ 是/ 一个/ 五元/ 组/ (/ ss/ ,/ i/ ,/ g/ ,/ op/ ,/ st/ )/ ,/ 其中/ ss/ 是/ 迁移/ t/ 的/ 起始/ 状态/ ;/ i/ ∈/ I/ 是/ 输入/ 消息/ ,/ 它/ 可能/ 包含/ 输入/ 参数/ ;/ g/ 是/ 谓词/ ;/ op/ 是/ 顺序/ 操作/ ,/ 它/ 包括/ 赋值/ 语句/ 和/ 输出/ 消息/ ;/ st/ 是/ 迁移/ t/ 的/ 结束/ 状态/ ./ 在/ g/ 和/ op/ 中/ 可以/ 同时/ 包含/ 输入/ 参数/ 和/ 上下文/ 变量/ ./ 本文/ 只/ 考虑/ 确定/ 的/ EFSM/ ./ 图/ 1/ 是/ 一个/ EFSM/ 模型/ 的/ 例子/ ,/ 将/ 用/ 它/ 解释/ 本文/ 的/ 方法/ ./ 性质/ (/ 可达性/ 性质/ 的/ 否定/ )/ ./ 如/ 迁移/ 覆盖/ 准则/ 中/ 的/ 一个/ 测试/ 目标/ 是/ 能够/ 到达/ 迁移/ ti/ ,/ 用/ 陷阱/ 性质/ 表示/ “/ 在/ 模型/ 中/ 不/ 存在/ 到达/ 迁移/ ti/ 的/ 路径/ ”/ ,/ 对应/ 的/ LTL/ 公式/ 为/ G/ / (/ si/ / Xsi/ +/ 1/ )/ ./ 状态/ si/ 和/ si/ +/ 1/ 分别/ 是/ 迁移/ ti/ 的/ 开始/ 状态/ 和/ 结束/ 状态/ ./ 模型/ 检验/ 器/ 验证/ 陷阱/ 性质/ ,/ 事实上/ ,/ 模型/ 中/ 存在/ 到达/ 迁移/ ti/ 的/ 路径/ ,/ 所以/ ,/ 模型/ 检验/ 器/ 生成/ 一条/ 到达/ ti/ 的/ 反例/ 来/ 证明/ 这种/ 情况/ ,/ 从而/ 构成/ 了/ 能够/ 覆盖/ 迁移/ ti/ 的/ 测试用例/ ./ 3/ 基于/ 可/ 满足/ 性/ 的/ 测试用例/ 优化/ 方法/ 用/ 模型/ 检验/ 生成/ 测试用例/ 时/ ,/ 要/ 为/ 每个/ 测试/ 目标/ 的/ 陷阱/ 性质/ 生成/ 一条/ 测试用例/ ./ 这样/ 做/ 可能/ 会/ 导致/ 出现/ 重复/ 的/ 测试用例/ 或/ 一条/ 长/ 的/ 测试用例/ 包含/ 一条/ 短/ 的/ 测试用例/ 的/ 情况/ ,/ 这些/ 重复/ 的/ 或/ 被/ 包含/ 的/ 测试用例/ 是/ 冗余/ 的/ ./ 比如/ ,/ 为/ 迁移/ t5/ 生成/ 的/ 一条/ 测试用例/ 是/ tc1/ =/ 〈/ s0/ ,/ t1/ ,/ s1/ ,/ t3/ ,/ s2/ ,/ t5/ ,/ s3/ 〉/ (/ 这里/ 给出/ 迁移/ 是/ 为了/ 区分/ 不同/ 的/ 路径/ )/ ,/ 为/ 迁移/ t3/ 生成/ 的/ 一条/ 测试用例/ 是/ tc1/ =/ 〈/ s0/ ,/ t1/ ,/ s1/ ,/ t3/ ,/ s2/ 〉/ ,/ 测试用例/ tc1/ 包含/ tc2/ ,/ tc2/ 是/ 冗余/ 的/ ./ 通过/ 约简/ 冗余/ 的/ 测试用例/ 可以/ 降低/ 测试/ 生成/ 和/ 执行/ 的/ 代价/ ./ 为了/ 不再/ 为/ 已/ 被/ 已有/ 测试用例/ 覆盖/ 的/ 陷阱/ 性质/ 生成/ 测试用例/ ,/ 通过/ 可/ 满足/ 性/ 理论/ Page4/ 约简/ 冗余/ 的/ 测试用例/ ./ 限界/ 模型/ 检验/ [/ 10/ ]/ 主要/ 是/ 基于/ 可/ 满足/ 性/ (/ SAT/ )/ 理论/ [/ 11/ ]/ 判定/ 模型/ 是否/ 满足/ 时序/ 逻辑/ 性质/ ,/ 与/ 传统/ 的/ 模型/ 检验/ 不同/ ,/ 它/ 不用/ 搜索/ 状态/ 空间/ ./ 它/ 把/ 系统/ 行为/ 表示/ 成/ 形式/ 模型/ ,/ 要/ 验证/ 的/ 性质/ 表示/ 成/ LTL/ 公式/ ,/ 设定/ 边界/ 上界/ k/ ,/ 状态/ 间/ 的/ 迁移/ 关系/ 和/ LTL/ 公式/ 的/ 否定/ 通过/ 合取/ 构成/ BMC/ 公式/ ,/ 把/ BMC/ 公式/ 编码/ 成/ SAT/ 实例/ (/ CNF/ 公式/ )/ ,/ 通过/ SAT/ 工具/ 进行/ 求解/ ./ 如果/ 该/ 实例/ 有解/ ,/ 则/ 找到/ 反例/ ;/ 反之/ ,/ 如果/ 不可/ 满足/ ,/ 则/ 说明/ 模型/ 在/ 运行/ k/ 步后/ 满足/ 性质/ ./ 这里/ ,/ 我们/ 把/ SAT/ 理论/ 应用/ 于/ 约简/ 模型/ 检验/ 器/ 生成/ 的/ 测试用例/ ./ 首先/ ,/ 根据/ 测试/ 覆盖/ 准则/ (/ 如/ 迁移/ 覆盖/ )/ ,/ 列出/ 所有/ 测试/ 目标/ ,/ 从中/ 选择/ 一个/ 测试/ 目标/ ,/ 把/ 它/ 表示/ 成/ 陷阱/ 性质/ ,/ 通过/ 模型/ 检验/ 器/ 验证/ 该/ 陷阱/ 性质/ 是否/ 成立/ ./ 如果/ 不/ 成立/ ,/ 则/ 生成/ 一条/ 测试用例/ ,/ 表示/ 存在/ 一条/ 状态/ 序列/ 可以/ 到达/ 该/ 测试/ 目标/ (/ 迁移/ )/ ,/ 即/ 这条/ 测试用例/ 可以/ 覆盖/ 该/ 测试/ 目标/ (/ 迁移/ )/ ,/ 把/ 那些/ 还/ 未/ 被/ 覆盖/ 的/ 测试/ 目标/ 表示/ 成/ 陷阱/ 性质/ ,/ 对于/ 每个/ 陷阱/ 性质/ ,/ 把/ 它/ 和/ 测试用例/ 的/ 合取/ 转换成/ CNF/ 公式/ ,/ 通过/ SAT/ 工具/ 求解/ 该/ 公式/ 的/ 可/ 满足/ 性/ ./ 如果/ 该/ 公式/ 不可/ 满足/ ,/ 根据/ 定理/ 1/ 可知/ ,/ 这/ 条/ 测试用例/ 能够/ 覆盖/ 这个/ 陷阱/ 性质/ 所/ 对应/ 的/ 测试/ 目标/ ,/ 不需/ 再/ 调用/ 模型/ 检验/ 器为/ 该/ 测试/ 目标/ 生成/ 测试用例/ ,/ 从而/ 可以/ 约简/ 测试用例/ 的/ 数目/ 和/ 测试用例/ 集/ 的/ 总长度/ ./ 根据/ 什么样/ 的/ 次序/ 选择/ 测试/ 目标/ 来/ 生成/ 测试用例/ 会/ 很大/ 程度/ 的/ 影响/ 测试用例/ 约简/ 的/ 效果/ ,/ 在/ 以往/ 的/ 工作/ 中/ ,/ 都/ 是/ 随机/ 选择/ 测试/ 目标/ ./ 在/ SAT/ 理论/ 中/ ,/ 子句/ 长度/ 越短/ 满足/ 子句/ 的/ 难度/ 就/ 越/ 大/ [/ 11/ ]/ ,/ 基于/ 此/ ,/ 我们/ 根据/ 系统/ 模型/ M/ 与/ 陷阱/ 性质/ / / 的/ 合取/ 式/ 转换/ 得到/ 的/ CNF/ 公式/ 的/ 难度/ 来/ 选择/ 测试/ 目标/ ./ 定义/ 4/ ./ 设/ CNF/ 公式/ 中子/ 句数/ 为/ n/ ,/ 第/ i/ 个子/ 句/ 中/ 的/ 文字/ 数为/ li/ ,/ 则/ CNF/ 公式/ 的/ 难度/ h/ :/ 对于/ 每个/ 陷阱/ 性质/ ,/ 把/ 它/ 与/ 模型/ 进行/ 合取/ ,/ 转换/ 得到/ 相应/ 的/ CNF/ 公式/ ,/ 然后/ 计算/ 每个/ CNF/ 公式/ 的/ 难度/ ,/ 得到/ 的/ 难度/ 集合/ 为/ H/ ./ 测试/ 目标/ 根据/ 他们/ 对应/ 的/ CNF/ 的/ 难度/ 按/ 升序/ 排列/ ,/ 得到/ 测试/ 目标/ 集/ RTG/ ./ 从/ RTG/ 中/ 顺序/ 地/ 选择/ 测试/ 目标/ 生成/ 测试用例/ ./ 对于/ 具有/ 相同/ 难度/ 的/ 测试/ 目标/ ,/ 我们/ 随机/ 地/ 进行/ 选择/ ./ h/ 的/ 值/ 越/ 小/ ,/ 生成/ 的/ 测试用例/ 长度/ 越长/ ,/ 这样/ ,/ 避免/ 生成/ 与/ 已有/ 测试用例/ 相同/ 的/ 或/ 被/ 它/ 包含/ 的/ 测试用例/ ./ 使用/ SAT/ 理论/ 检查/ 已/ 生成/ 的/ 测试用例/ 是否/ 覆盖/ 测试/ 目标/ 集中/ 其余/ 目标/ 的/ 方法/ 主要/ 基于/ 以下/ 定理/ ./ 定理/ 1/ ./ 设/ 对于/ 测试/ 目标/ tg1/ ,/ 生成/ 测试用例/ ·/ =/ 〈/ s0/ ,/ …/ ,/ st/ 〉/ ,/ 在/ 测试/ 目标/ 集/ TG/ 中/ 选择/ 未/ 被覆/ π/ ·/ 盖/ 的/ 测试/ 目标/ tg2/ ,/ 如果/ π/ ∧/ G/ / tg2/ 转换/ 得到/ 的/ CNF/ 公式/ 是/ 不可/ 满足/ 的/ ,/ 则/ 测试用例/ π/ 覆盖/ 测试/ 目标/ tg2/ ./ 证明/ ./ 因为/ π/ ∧/ G/ / tg2/ 转换/ 得到/ 的/ CNF/ 公式/ 是/ 不可/ 满足/ 的/ ,/ 那么/ 也/ 就是/ π/ / // G/ / tg2/ ,/ 从此/ 可以/ 看出/ π/ 是/ G/ / tg2/ 的/ 反例/ ,/ 因而/ π/ 可以/ 作为/ 覆盖/ 测试/ 目标/ tg2/ 的/ 测试用例/ ./ 使用/ SAT/ 理论/ 约简/ 测试用例/ 集/ 的/ 具体/ 过程/ 见/ 算法/ 1/ 和/ 算法/ 2/ ./ 算法/ 1/ ./ TestSuiteReduction/ (/ M/ ,/ TG/ ,/ TS/ )/ ./ 输入/ :/ 模型/ M/ ,/ 测试/ 目标/ 集/ TG/ 输出/ :/ 约简/ 的/ 测试用例/ 集/ TSBEGINH/ =/ {/ }/ ;/ FOReachtestgoal/ / inTGDOBEGINi/ =/ 1/ ;/ // // 生成/ M/ ∧/ / / 的/ CNF/ 公式/ f/ =/ GenerateCNF/ (/ M/ ∧/ / / )/ ;/ // // 计算/ 每个/ CNF/ 公式/ f/ 的/ 难度/ h/ (/ i/ )/ =/ ComputeHardness/ (/ f/ )/ ;/ // // 得到/ 难度/ 集合/ HH/ =/ H/ ∪/ h/ (/ i/ )/ i/ =/ i/ +/ 1/ ;/ END/ // // 按/ CNF/ 的/ 难度/ 排列/ 测试/ 目标/ RTG/ =/ RankAscending/ (/ TG/ ,/ H/ )/ ;/ TS/ =/ {/ }/ ;/ WHILERTG/ !/ =/ emptyDOBEGINSelectatestgoal/ / fromRTG/ ;/ RTG/ =/ RTG/ -/ {/ / }/ ;/ // // 在/ 模型/ M/ 检测/ 测试/ 目标/ 的/ 陷阱/ 性质/ π/ =/ ModelChecking/ (/ M/ ,/ / / )/ ;/ IFTS/ =/ {/ }/ THENTS/ =/ TS/ ∪/ {/ π/ }/ ;/ // // 使用/ 测试用例/ 集/ TS/ 检查/ π/ ,/ 检查/ 它/ 是否/ ELSETS/ =/ Winnow/ (/ TS/ ,/ π/ )/ FOReachremaintestgoal/ φ/ inRTGDOBEGINPage5f/ =/ GenerateCNF/ (/ π/ ,/ φ/ )/ ;/ // // 使用/ SAT/ 求解/ CNF/ 公式/ fresult/ =/ SAT/ (/ f/ )/ ;/ IFresult/ =/ unsatisfiableTHENRTG/ =/ RTG/ -/ {/ φ/ }/ ;/ ENDENDEND/ 算法/ 2/ ./ Winnow/ (/ TS/ ,/ π/ )/ ./ 输入/ :/ 已有/ 的/ 测试用例/ 集/ TS/ 和/ 新/ 生成/ 的/ 测试用例/ π/ 输出/ :/ 新/ 的/ 测试用例/ 集/ BEGINFOReachtestcase/ ζ/ inTSDOBEGIN/ // // 对于/ 新/ 生成/ 的/ 测试用例/ π/ 和/ 测试用例/ 集/ 的/ 测试/ 用/ // // 例/ ζ/ ,/ 求/ 两个/ 测试用例/ 的/ 长度/ 的/ 较/ 小值/ j/ =/ MinLength/ (/ π/ ,/ ζ/ )/ ;/ FORi/ =/ 1tojDOBEGIN/ // // 检查/ 两个/ 测试用例/ 中/ 的/ 第/ i/ 个/ 状态/ 是否/ 相同/ IF/ !/ Match/ (/ π/ (/ i/ )/ ,/ ζ/ (/ i/ )/ )/ // // 如果/ 不同/ 则/ 说明/ 新/ 的/ 测试用例/ 不是/ 冗余/ 的/ THENTS/ =/ TS/ ∪/ {/ π/ }/ ;/ EXIT/ ;/ // // 如果/ ζ/ 被/ π/ 包含/ ELSEIF/ (/ i/ =/ =/ j/ )/ and/ (/ Length/ (/ π/ )/ >/ Length/ (/ ζ/ )/ )/ // // 在/ 测试用例/ 集中/ 删除/ ζ/ 并/ 把/ π/ 添加/ 进去/ THENTS/ =/ TS/ -/ {/ ζ/ }/ ∪/ {/ π/ }/ ;/ ENDENDEND/ 下面/ 采用/ 归纳法/ 分析/ 算法/ 1/ 的/ 正确性/ 和/ 终止/ 性/ ,/ 假设/ 测试/ 目标/ 的/ 数目/ 为/ n/ ./ (/ 1/ )/ 当/ n/ =/ 1/ 时/ ,/ 只有/ 一个/ 测试/ 目标/ ,/ 通过/ 模型/ 检验/ 生成/ 一条/ 测试用例/ ;/ (/ 2/ )/ 假设/ 当/ n/ =/ p/ 时/ ,/ 算法/ 能够/ 正确/ 的/ 约简/ 测试用例/ ;/ (/ 3/ )/ 那么/ 当/ n/ =/ p/ +/ 1/ 时/ ,/ 算法/ 先/ 为/ 每个/ 测试/ 目标/ 生成/ 相应/ 的/ CNF/ 公式/ ,/ 然后/ 计算/ 每个/ CNF/ 公式/ 的/ 难度/ ,/ 假设/ 针对/ 前/ p/ 个/ 测试/ 目标/ ,/ 约简/ 后/ 得到/ 的/ 测试用例/ 数为/ m/ (/ 设该/ 用例/ 集为/ TS/ )/ ,/ 从/ 这/ m/ 条/ 测试用例/ 中/ 选择/ 一条/ ,/ 生成/ 该/ 测试用例/ 与/ 第/ p/ +/ 1/ 个/ 测试/ 目标/ 的/ CNF/ 公式/ ,/ 通过/ SAT/ 求解/ 器/ 检查/ 这/ 条/ 测试用例/ 是否/ 覆盖/ 这个/ 测试/ 目标/ ,/ 如果/ 覆盖/ ,/ 算法/ 终止/ ,/ 最终/ 测试/ 集中/ 有/ m/ 条/ 测试用例/ ,/ 如果/ 不/ 覆盖/ ,/ 取/ TS/ 中/ 的/ 下/ 一条/ 测试用例/ ,/ 直到/ 取完/ TS/ 中/ 的/ 所有/ 测试用例/ ,/ 最终/ 的/ 测试/ 集中/ 有/ m/ +/ 1/ 条/ 测试用例/ ,/ 所以/ 算法/ 1/ 能够/ 正确/ 的/ 约简/ 测试用例/ 集/ 并/ 终止/ ./ 算法/ 1/ 的/ 主要/ 操作/ 有/ 模型/ 检验/ 、/ 生成/ CNF/ 公式/ 、/ SAT/ 求解/ CNF/ 公式/ 可/ 满足/ 性/ 、/ 计算/ CNF/ 公式/ 复杂度/ 、/ 排序/ 测试/ 目标/ 以及/ Winnow/ 过程/ ,/ 其中/ 计算/ CNF/ 公式/ 复杂度/ 、/ 排序/ 测试/ 目标/ 和/ Winnow/ 过程/ 的/ 时间/ 复杂度/ 都/ 是/ 线性/ 的/ ,/ 模型/ 检验/ 的/ 时间/ 复杂/ O/ (/ |/ M/ |/ ×/ 2/ |/ / |/ )/ ,/ 生成/ CNF/ 公式/ 和/ SAT/ 求解/ 的/ 时间/ 复杂度/ 也/ 是/ O/ (/ |/ M/ |/ ×/ 2/ |/ / |/ )/ ,/ 设/ 测试/ 目标/ 数为/ n/ ,/ 算法/ 1/ 的/ 时间/ 复杂度/ 为/ O/ (/ n2/ ×/ |/ M/ |/ ×/ 2/ |/ / |/ )/ ./ 在/ 使用/ SAT/ 求解/ 器/ 求解/ CNF/ 公式/ 的/ 可/ 满足/ 性时/ ,/ 由于/ 设定/ 了/ 边界/ 上界/ 为/ k/ ,/ 所以/ 在/ 公式/ 满足/ 或者/ 不/ 满足/ 时/ ,/ SAT/ 求解/ 过程/ 都/ 能/ 在/ k/ 步内/ 终止/ ./ 4/ 抽象/ 模型/ 抽象/ 的/ 目的/ 是/ 使/ 模型/ 的/ 状态/ 数/ 和/ 迁移/ 数/ 减少/ ,/ 但/ 同时/ 保留/ 要/ 验证/ 的/ 性质/ ./ 本文/ 采用/ EFSM/ 模型/ 中/ 迁移/ 上/ 的/ 谓词/ 来/ 抽象/ 原始/ 模型/ ./ 在/ 给出/ 抽象/ 过程/ 之前/ ,/ 下面/ 列出/ 一些/ 需要/ 用到/ 的/ 概念/ ./ 抽象/ 函数/ α/ 是/ 一个/ 满射/ α/ :/ S/ →/ S/ α/ ,/ S/ α/ 是/ 抽象/ 状态/ 集/ ./ 抽象/ 函数/ α/ 定义/ 了/ 状态/ 集/ S/ 的/ 一个/ 等价关系/ ≡/ α/ ,/ 令/ s/ ,/ s/ ∈/ S/ ,/ 那么/ s/ ≡/ α/ siff/ α/ (/ s/ )/ =/ α/ (/ s/ )/ [/ 12/ ]/ ./ 给定/ 原子公式/ f/ ,/ var/ (/ f/ )/ 是/ 出现/ 在/ 公式/ f/ 中/ 的/ 变量/ 集合/ ./ 例如/ var/ (/ x/ =/ =/ y/ )/ 是/ {/ x/ ,/ y/ }/ ./ 对于/ 原子公式/ 集合/ F/ ,/ var/ (/ F/ )/ =/ ∪/ f2/ 是/ 干扰/ 的/ iffvar/ (/ f1/ )/ ∩/ var/ (/ f2/ )/ ≠/ / ./ 原子公式/ f/ ∈/ F/ 的/ 等价/ 类/ 称为/ f/ 的/ 公式/ 簇/ ,/ 记/ 为/ [/ f/ ]/ ./ 如果/ var/ (/ f1/ )/ ∩/ var/ (/ f2/ )/ ≠/ / ,/ 有/ [/ f1/ ]/ =/ [/ f2/ ]/ ./ 也就是说/ ,/ 一个/ 变量/ v/ 不能/ 出现/ 在/ 属于/ 两个/ 不同/ 公式/ 簇/ 的/ 公式/ 中/ ./ 称/ 两个/ 状态/ s/ ,/ s/ ∈/ S/ 是/ 等价/ 的/ ,/ iff/ ∧/ s/ / f/ ./ 也就是说/ 两个/ 状态/ 是/ 等价/ 的/ 当且/ 仅/ 当/ 它们/ 不能/ 被/ 公式/ 簇中/ 的/ 公式/ 区分/ [/ 12/ ]/ ./ 对于/ EFSM/ 模型/ ,/ 我们/ 采用/ 迁移/ 上/ 的/ 谓词/ 定义/ 等价/ 状态/ ./ 假设/ t/ / g/ 表示/ 的/ 是/ 迁移/ t/ 上/ 的/ 谓词/ 集合/ ,/ t/ / ss/ 是/ 迁移/ t/ 的/ 起始/ 状态/ ./ 令/ ti/ 和/ tj/ 是/ 两条/ 迁移/ ,/ 如果/ var/ (/ ti/ / g/ )/ ∩/ var/ (/ tj/ / g/ )/ ≠/ / ,/ 并且/ 状态/ ti/ / ss/ 和/ tj/ / ss/ 不能/ 被/ ti/ / g/ 所属/ 的/ 公式/ 簇中/ 的/ 公式/ 区分/ ,/ 称/ 两个/ 状态/ 等价/ ,/ 即/ ti/ / ss/ ≡/ α/ tj/ / ss/ ./ 特别/ 地/ ,/ 如果/ ti/ / ss/ ≡/ α/ tj/ / ss/ ,/ ti/ / st/ 和/ tj/ / st/ 都/ 没有/ 输出/ 迁移/ ,/ 那么/ ti/ / st/ ≡/ α/ tj/ / st/ ./ 定义/ 5/ ./ 假设/ EFSMM/ =/ (/ S/ ,/ init/ ,/ V/ ,/ I/ ,/ O/ ,/ T/ )/ 和/ M/ α/ =/ (/ S/ α/ ,/ init/ α/ ,/ V/ α/ ,/ I/ α/ ,/ O/ α/ ,/ T/ α/ )/ ./ M/ α/ 是/ M/ 的/ 抽象/ ,/ 其中/ :/ (/ 1/ )/ S/ α/ 是/ 关于/ α/ 的/ 等价/ 类/ 集合/ ;/ Page6/ (/ 2/ )/ init/ α/ =/ init/ ∪/ {/ s/ |/ / s/ ∈/ S/ ·/ s0/ ∈/ init/ ∧/ α/ (/ s0/ )/ =/ (/ 3/ )/ V/ α/ =/ V/ ;/ (/ 4/ )/ I/ α/ =/ I/ ;/ (/ 5/ )/ O/ α/ =/ O/ ;/ (/ 6/ )/ T/ α/ =/ {/ t/ α/ :/ (/ s/ α/ 其中/ T/ (/ ss/ ,/ st/ )/ 表示/ 状态/ ss/ 和/ st/ 间/ 的/ 迁移/ ./ 对于/ 抽象/ 状态/ 间/ 的/ 迁移/ t/ α/ ,/ 分/ 几种/ 情况/ 讨论/ :/ (/ 1/ )/ 如果/ 存在/ 两条/ 迁移/ ti/ 和/ tj/ 满足/ α/ (/ ti/ / ss/ )/ =/ α/ (/ tj/ / ss/ )/ =/ t/ α/ var/ (/ tj/ / g/ )/ ≠/ / 且/ ti/ / g/ ∧/ tj/ / g/ ≠/ false/ 则/ 保留/ 两条/ 迁移/ ,/ 两条/ 迁移/ 上/ 的/ 操作/ 作为/ 它们/ 目标/ 状态/ 的/ 内部/ 动作/ ./ (/ 2/ )/ 或者/ 假设/ ti/ 的/ 谓词/ 不为/ 空/ ,/ 而/ tj/ 的/ 谓词/ 条件/ 为/ 空即/ 认为/ 是/ true/ ,/ ti/ 和/ tj/ 的/ 开始/ 状态/ 和/ 结束/ 状态/ 分别/ 都/ 等价/ ,/ 那么/ 保留/ 两条/ 迁移/ ,/ 两条/ 迁移/ 上/ 的/ 操作/ 作为/ 它们/ 目标/ 状态/ 的/ 内部/ 动作/ ./ (/ 3/ )/ 或者/ ti/ 和/ tj/ 的/ 谓词/ 条件/ 都/ 为/ 空/ ,/ 并且/ 它们/ 的/ 开始/ 状态/ 和/ 结束/ 状态/ 分别/ 都/ 等价/ ,/ 如果/ ti/ / in/ ≠/ tj/ / in/ ,/ 那么/ 保留/ 两条/ 迁移/ ,/ 否则/ ,/ 合并/ 这/ 两条/ 迁移/ ,/ t/ α/ ti/ / in/ ,/ t/ α/ 结束/ 状态/ 的/ 内部/ 动作/ ./ (/ 4/ )/ 两条/ 迁移/ ti/ 和/ tj/ 上/ 的/ 谓词/ 有/ 共有/ 变量/ ,/ 但/ 谓词/ 条件/ 存在/ 矛盾/ 即/ tj/ ∧/ / / ti/ / g/ ∧/ tj/ / g/ =/ false/ ,/ 并且/ ti/ / in/ =/ tj/ / in/ ,/ 那么/ 对/ 这/ 两个/ 迁移/ 进行/ 合并/ ,/ t/ α/ / g/ =/ ti/ / g/ ∨/ tj/ / g/ ,/ 两条/ 迁移/ 上/ 的/ 操作/ 作为/ 它们/ 目标/ t/ α/ 状态/ 的/ 内部/ 动作/ ./ 迁移/ 的/ 输入/ 序列/ 、/ 谓词/ 条件/ 和/ 操作/ 可以/ 为空/ ./ 根据/ 状态/ 等价/ 的/ 定义/ ,/ 我们/ 可知/ 在/ 图/ 1/ 中/ 的/ 状态/ s0/ ,/ s2/ ,/ s4/ 等价/ ,/ α/ (/ s0/ )/ =/ α/ (/ s2/ )/ =/ α/ (/ s4/ )/ =/ s/ α/ s3/ 等价/ ,/ α/ (/ s1/ )/ =/ α/ (/ s3/ )/ =/ s/ α/ 价类/ ,/ α/ (/ s5/ )/ =/ s/ α/ 5/ 测试用例/ 生成/ 得到/ 抽象/ 模型/ 后/ ,/ 采用/ 模型/ 检验/ 技术/ 在/ 抽象/ 模型/ 上/ 生成/ 测试用例/ ./ 抽象/ 约简/ 了/ 具体/ 模型/ 的/ 状态/ 数/ 和/ 迁移/ 数/ ,/ 但/ 验证/ 的/ 性质/ 在/ 抽象/ 模型/ 上/ 仍/ 保留/ ./ 定理/ 2/ ./ 假设/ 两个/ EFSMM/ 和/ M/ α/ ,/ M/ α/ 是/ M/ 的/ 抽象/ ,/ / 是/ LTL/ 公式/ ,/ M/ α/ / / ,/ 那么/ M/ / / 采用/ 模型/ 检验/ 生成/ 测试用例/ 的/ 过程/ 是/ :/ 根据/ 测试/ 覆盖/ 准则/ ,/ 列出/ 测试/ 目标/ ,/ 把/ 每个/ 测试/ 目标/ 表示/ 成/ 陷阱/ 性质/ ,/ 模型/ 检验/ 器/ 验证/ 陷阱/ 性质/ ,/ 为/ 每条/ 陷阱/ 性质/ 生成/ 一条/ 反例/ ,/ 这些/ 反例/ 可/ 作为/ 测试用例/ 集/ ./ 这里/ ,/ 我们/ 在/ 抽象/ 模型/ 上/ 生成/ 抽象/ 测试用例/ ,/ 使用/ 抽象/ 精化/ 方法/ 对/ 测试用例/ 优化/ 的/ 同时/ 要/ 保证/ :/ (/ 1/ )/ 抽象/ 测试用例/ 能够/ 对应/ 具体/ 模型/ 上/ 的/ 具体/ 测试用例/ ;/ (/ 2/ )/ 满足/ 抽象/ 模型/ 测试/ 覆盖/ 的/ 抽象/ 测试用例/ 也/ 满足/ 具体/ 模型/ 的/ 测试/ 覆盖/ ./ 上述/ 的/ 第/ (/ 1/ )/ 点将/ 在/ 下/ 一节/ 讨论/ ./ 在/ 分析/ 第/ (/ 2/ )/ 点/ 之前/ 我们/ 假定/ 第/ (/ 1/ )/ 点/ 已经/ 满足/ ./ 根据/ 定义/ 4/ ,/ 一个/ 抽象/ 状态/ 对应/ 一个/ 具体/ 状态/ 集/ ,/ 设/ β/ 是/ 抽象/ 函数/ α/ 的/ 逆/ ,/ 通过/ β/ (/ s/ α/ )/ =/ {/ s/ |/ s/ ∈/ S/ }/ 求出/ 与/ 抽象/ 状态/ 对应/ 的/ 具体/ 状态/ 集/ ,/ 所以/ 能够/ 覆盖/ 所有/ 抽象/ 状态/ 的/ 测试用例/ 能够/ 覆盖/ 所有/ 具体/ 状态/ ./ 抽象/ 函数/ 对/ 谓词/ 变量/ 属于/ 同一/ 公式/ 簇且/ 谓词/ 条件/ 矛盾/ 的/ 迁移/ 进行/ 了/ 合并/ ,/ 对/ 其他/ 迁移/ 进行/ 了/ 保留/ ./ 对于/ 迁移/ 覆盖/ 准则/ ,/ 我们/ 定义/ 抽象/ 迁移/ t/ α/ 上/ 的/ 投影/ 函数/ Proj/ (/ t/ α/ )/ =/ {/ (/ β/ (/ s/ α/ β/ (/ s/ α/ t/ )/ }/ ,/ 其中/ i/ 表示/ 抽象/ 迁移/ 的/ 谓词/ 由/ i/ 个/ 具体/ 迁移/ 的/ s/ α/ 谓词/ 合并/ 得到/ ,/ 通过/ 这样/ 的/ 投影/ 操作/ ,/ 能够/ 把/ 抽象/ 迁/ t/ )/ )/ |/ / s/ α/ 移/ 还原成/ 具体/ 模型/ 上/ 的/ 迁移/ ,/ 加上/ 那些/ 保留/ 的/ 迁移/ ,/ 抽象/ 迁移/ 集/ 经过/ 投影/ 操作/ 后/ 可以/ 还原/ 得到/ 所有/ 具体/ 迁移/ ./ 从/ 抽象/ 模型/ 生成/ 的/ 抽象/ 测试用例/ 是/ 抽象/ 状态/ 的/ 序列/ ,/ 对/ 状态/ 序列/ 中/ 的/ 每个/ 抽象/ 状态/ 使用/ 函数/ β/ 求出/ 它/ 所/ 对应/ 的/ 具体/ 状态/ 集/ ,/ 然后/ 对/ 抽象/ 状态/ 间/ 的/ 每条/ 抽象/ 迁移/ ,/ 通过/ 投影/ 函数/ Proj/ 还原成/ 具体/ 状态/ 间/ 的/ 具体/ 迁移/ 集/ ,/ 就/ 得到/ 了/ 与/ 抽象/ 测试用例/ 对应/ 的/ 具体/ 测试用例/ 集/ ./ 例如/ ,/ 为/ 图/ 3/ 中/ 的/ 模型/ 生成/ 了/ 一条/ 抽象/ 测试用例/ 〈/ s/ α/ 具体/ 状态/ 集/ 分别/ β/ (/ s/ α/ 抽象/ 迁移/ t1/ 和/ t8/ 通过/ 投影/ 函数/ Proj/ 还原/ 得到/ 的/ 具体/ 迁移/ 集/ 分别/ 是/ Proj/ (/ t1/ )/ =/ {/ t1/ ,/ t2/ }/ 和/ Proj/ (/ t8/ )/ =/ {/ t8/ }/ ,/ 可以/ 得到/ 两条/ 具体/ 测试用例/ 〈/ s0/ ,/ t1/ ,/ s1/ ,/ t8/ ,/ s4/ 〉/ 和/ 〈/ s0/ ,/ t2/ ,/ s1/ ,/ t8/ ,/ s4/ 〉/ ./ 根据/ 迁移/ 覆盖/ 准则/ 为/ 图/ 3/ 中/ 的/ 模型/ 生成/ 了/ 8/ 条/ 抽象/ 测试用例/ ,/ 经过/ 上述/ 过程/ 得到/ 11/ 条/ 具体/ 测试用例/ ,/ 这/ 11/ 条/ 测试用例/ 可以/ 覆盖/ 图/ 1/ 中/ 的/ 所有/ 具体/ 迁移/ ./ 所以/ 可知/ 与/ 满足/ 抽象/ 模型/ 迁移/ 覆盖/ 的/ 抽象/ 测试用例/ 集/ 对应/ 的/ 具体/ 测试用例/ 集/ 也/ 满足/ 具体/ 模型/ 的/ 迁移/ 覆盖/ ./ 其他/ 的/ 覆盖/ 准则/ 我们/ 也/ 可以/ 进行/ 类似/ 地/ 分析/ ./ Page76/ 反例/ 判定/ 和/ 模型/ 精化/ 如果/ M/ α/ / // / ,/ 那么/ 模型/ 检验/ 器/ 就/ 会/ 返回/ 一个/ 抽象/ 反例/ π/ α/ =/ 〈/ s/ α/ M/ / // / ,/ 需要/ 判定/ 在/ 具体/ 模型/ 中/ 是否/ 存在/ 一个/ 与/ π/ α/ 对应/ 的/ 具体/ 反例/ π/ ./ 如果/ 存在/ 这样/ 的/ 具体/ 反例/ π/ ,/ 那么/ π/ α/ 就/ 可以/ 作为/ 抽象/ 模型/ 的/ 一个/ 测试用例/ ,/ 称/ 这样/ 的/ π/ α/ 为/ 有效/ 反例/ ;/ 否则/ 就/ 认为/ π/ α/ 是/ 一个/ 伪/ 反例/ ,/ 它/ 不能/ 作为/ 抽象/ 模型/ 的/ 一个/ 测试用例/ ,/ 需要/ 对/ 抽象/ 模型/ 进行/ 精化/ 以/ 获得/ 它/ 的/ 测试用例/ 集/ ./ 6.1/ 反例/ 判定/ 由于/ π/ α/ 的/ 每个/ 状态/ s/ α/ 集/ ,/ 因此/ ,/ π/ α/ 对应/ 具体/ 模型/ M/ 中/ 路径/ 的/ 集合/ ,/ 用/ path/ (/ π/ α/ )/ 表示/ :/ path/ (/ π/ α/ )/ =/ {/ 〈/ s0/ ,/ s1/ ,/ …/ ,/ sn/ 〉/ |/ ∧/ β/ (/ s/ α/ i/ )/ =/ si/ ∧/ s0/ ∈/ init/ ∧/ ∧/ π/ α/ 是/ 一个/ 有效/ 的/ 反例/ 当且/ 仅/ 当/ path/ (/ π/ α/ )/ ≠/ / ./ 可以/ 通过/ 迭代/ 的/ 方法/ 判定/ path/ (/ π/ α/ )/ ≠/ / 是否/ 成立/ ./ 用/ RSi/ 表示/ s/ α/ init/ ,/ 对于/ 任意/ 状态/ s/ ∈/ RSi/ ,/ 存在/ RS0/ 中/ 的/ 某/ 一/ 状态/ 到达/ s/ 的/ 一条/ 路径/ ./ 可以/ 通过/ 公式/ RSi/ +/ 1/ =/ β/ (/ s/ α/ {/ s/ |/ / s/ ∈/ β/ (/ s/ α/ 象/ 状态/ 中/ 的/ 可达/ 具体/ 状态/ 集/ ./ 那么/ ,/ 判断/ 一条/ 抽象/ 反例/ 是否是/ 有效/ 反例/ 可以/ 通过/ 定理/ 3/ 完成/ ./ 定理/ 3/ ./ path/ (/ π/ α/ )/ ≠/ / / / 0/ / i/ / n/ :/ RSi/ ≠/ / ./ 证明/ ./ 先证/ “/ / ”/ ,/ path/ (/ π/ α/ )/ ≠/ / 说明/ 存在/ 一条/ 具体/ 路径/ 〈/ s0/ ,/ s1/ ,/ …/ ,/ sn/ 〉/ ,/ 每个/ 状态/ 都/ 属于/ 一个/ 抽象/ 状态/ / 0/ / i/ / n/ :/ si/ ∈/ β/ (/ s/ α/ / ,/ 假设/ RS0/ ≠/ / 且/ si/ ∈/ β/ (/ s/ α/ 义有/ si/ +/ 1/ ∈/ β/ (/ s/ α/ 得/ RSi/ +/ 1/ =/ si/ +/ 1/ ≠/ / ./ 再证/ “/ / ”/ ,/ / 0/ / i/ / n/ :/ RSi/ ≠/ / ,/ 可以/ 从/ 每个/ RSi/ 中/ 选择/ 满足/ T/ (/ si/ ,/ si/ +/ 1/ )/ ∈/ T/ 且/ si/ ∈/ β/ (/ s/ α/ 同时/ 满足/ 初始状态/ 为/ s0/ 来/ 构造/ 具体/ 路径/ 〈/ s0/ ,/ s1/ ,/ …/ ,/ sn/ 〉/ ,/ 则/ path/ (/ π/ α/ )/ ≠/ / ./ 在/ 图/ 2/ 中/ 的/ 抽象/ 状态/ 对应/ 的/ 具体/ 状态/ 集/ 分别/ 为/ 0/ ,/ s/ α/ 0/ =/ {/ s0/ ,/ s2/ ,/ s4/ }/ ,/ β/ α/ β/ 例为/ 〈/ s/ α/ 具体/ 状态/ 集/ 分别/ 为/ RS0/ =/ {/ s0/ }/ ,/ RS1/ =/ {/ s1/ }/ ,/ RS2/ =/ / ,/ 〈/ s/ α/ 0/ ,/ s/ α/ 在/ 出现/ 伪/ 反例/ 的/ 情况/ 下/ ,/ 必须/ 对模型/ 进行/ 精化/ 以/ 删除/ 伪/ 反例/ ./ 6.2/ 模型/ 精化/ 根据/ 定理/ 2/ ,/ 出现/ 伪/ 反例/ 是因为/ :/ (/ 1/ )/ 存在/ 某个/ i/ +/ 1/ )/ 中/ 的/ 状态/ ./ 那么/ 称像/ β/ (/ s/ α/ i/ (/ 0/ / i/ / n/ )/ ,/ / 0/ / j/ / i/ :/ RSj/ ≠/ / ∧/ RSi/ +/ 1/ =/ / ,/ 并且/ 在/ 抽象/ 状态/ s/ α/ i/ ,/ s/ 从/ 初始状态/ 是/ 可达/ 的/ ,/ 但是/ s/ 不能到达/ β/ (/ s/ α/ s/ α/ 中/ 的/ 状态/ ,/ 而/ s/ 从/ 初始状态/ 不可/ 达/ ,/ 不过/ s/ 可以/ 到达/ β/ (/ s/ α/ 死路/ 状态/ (/ dead/ -/ endstate/ )/ ,/ 称像/ β/ (/ s/ α/ 态为/ 坏/ 状态/ (/ badstate/ )/ ,/ 称/ β/ (/ s/ α/ 坏/ 状态/ 的/ 状态/ 为/ 无关/ 状态/ (/ irrelevantstate/ )/ ;/ (/ 2/ )/ 初始状态/ init/ α/ 和/ 状态/ s/ α/ β/ (/ init/ α/ )/ 和/ β/ (/ s/ α/ 删除/ 伪/ 反例/ ,/ 对于/ 第/ 1/ 种/ 情况/ ,/ 需要/ 把/ 死路/ 状态/ 和/ 坏/ 状态/ 划分/ 到/ 不同/ 的/ 抽象/ 状态/ 中/ ;/ 对于/ 第/ 2/ 种/ 情况/ ,/ 增加/ 抽象/ 状态/ s0/ ,/ 并/ 在/ s0/ 和/ init/ α/ 添加/ 迁移/ {/ t/ |/ t/ ∈/ T/ (/ s0/ ,/ β/ (/ init/ α/ )/ )/ }/ ./ 使用/ 抽象/ 函数/ α/ 重新/ 定义/ 等价关系/ ,/ 它/ 是/ 原有/ 抽象/ 函数/ α/ 的/ 精化/ ./ 定义/ 6/ [/ 13/ ]/ ./ 称/ 抽象/ 函数/ α/ 是/ α/ 的/ 精化/ 当且/ 仅/ 当/ / s1/ ,/ s2/ ∈/ S/ :/ (/ α/ (/ s1/ )/ =/ α/ (/ s2/ )/ / α/ (/ s1/ )/ =/ α/ (/ s2/ )/ )/ ./ 为了/ 把/ 死路/ 状态/ 和/ 坏/ 状态/ 划分/ 到/ 不同/ 的/ 抽象/ 状态/ 中/ ,/ 定义/ 抽象/ 函数/ α/ :/ / s1/ ,/ s2/ ∈/ β/ (/ s/ α/ α/ (/ s2/ )/ / (/ / s1/ ,/ s2/ ∈/ β/ (/ s/ α/ s2/ )/ ∈/ T/ )/ ∨/ (/ / s/ ∈/ β/ (/ s/ α/ T/ )/ )/ ,/ 其中/ β/ 是/ α/ 的/ 逆/ ./ 也就是说/ ,/ 状态/ s1/ 和/ s2/ 是/ 等价/ 的/ ,/ 当且/ 仅/ 当/ s1/ ,/ s2/ 同时/ 有/ 或者/ 没有/ 到达/ β/ (/ s/ α/ 样/ ,/ 抽象/ 函数/ α/ 将/ β/ (/ s/ α/ 分到/ 了/ 不同/ 的/ 抽象/ 状态/ ./ 为了/ 去除/ 图/ 2/ 中/ 的/ 伪/ 反例/ 〈/ s/ α/ 是/ 一个/ 死路/ 状态/ ,/ s3/ 是/ 一个/ 坏/ 状态/ ,/ 使用/ α/ 将/ 它们/ 划分/ 到/ 两个/ 不同/ 的/ 抽象/ 状态/ ,/ 精化/ 后/ 的/ 状态/ 等价关系/ 是/ α/ (/ s0/ )/ =/ α/ (/ s2/ )/ =/ α/ (/ s4/ )/ =/ s/ α/ 2/ ,/ α/ (/ s3/ )/ =/ s/ α/ s/ α/ 如果/ 模型/ 中/ 仍然/ 存在/ 伪/ 反例/ ,/ 可以/ 继续/ 使用/ 上述/ 步骤/ 对模型/ 进行/ 精化/ ,/ 直到/ 生成/ 的/ 所有/ 反例/ 能够/ Page8/ 满足/ 具体/ 模型/ 的/ 测试/ 覆盖/ 准则/ ./ 例如/ ,/ 对于/ 迁移/ 覆盖/ 准则/ ,/ 如果/ 为/ 某/ 一/ 迁移/ 对应/ 的/ 测试/ 目标/ 生成/ 的/ 反例/ 是/ 伪/ 反例/ ,/ 那么/ 精化/ 模型/ ,/ 在/ 精化/ 后/ 的/ 模型/ 上/ 再/ 为/ 该/ 迁移/ 对应/ 的/ 测试/ 目标/ 生成/ 反例/ ,/ 直到/ 生成/ 能够/ 覆盖/ 该/ 迁移/ 的/ 真/ 反例/ ./ 可知/ 图/ 3/ 中是/ 图/ 1/ 最后/ 的/ 抽象/ 模型/ ./ 根据/ 迁移/ 覆盖/ 准则/ ,/ 图/ 1/ (/ 具体/ 模型/ )/ 中有/ 11/ 条/ 迁移/ ,/ 根据/ 通过/ 模型/ 检验/ 技术/ 生成/ 测试用例/ 的/ 方法/ ,/ 需要/ 为/ 每个/ 迁移/ 生成/ 一条/ 覆盖/ 它/ 的/ 测试用例/ ,/ 故/ 总共/ 生成/ 11/ 条/ 测试用例/ ,/ 例如/ ,/ 对于/ 迁移/ t7/ ,/ 生成/ 测试用例/ 〈/ s0/ ,/ t1/ ,/ s1/ ,/ t3/ ,/ s2/ ,/ t5/ ,/ s3/ ,/ t7/ ,/ s4/ 〉/ ;/ 图/ 3/ (/ 抽象/ 模型/ )/ 中有/ 8/ 条/ 抽象/ 迁移/ ,/ 那么/ 需要/ 8/ 条/ 测试用例/ ,/ 例如/ ,/ 对于/ 抽象/ 模型/ 中/ 的/ 迁移/ t7/ ,/ 生成/ 测试用例/ 〈/ s/ α/ t7/ ,/ s/ α/ 2/ 〉/ 因为/ 能够/ 覆盖/ 所有/ 抽象/ 迁移/ 的/ 抽象/ 测试用例/ 也/ 能/ 覆盖/ 所有/ 具体/ 迁移/ ,/ 所以/ 这/ 8/ 条/ 迁移/ 能够/ 覆盖/ 图/ 1/ 中/ 的/ 所有/ 迁移/ ;/ 下面/ 对/ 在/ 图/ 3/ 的/ 抽象/ 模型/ 上/ 采用/ 基于/ 可/ 满足/ 性/ 的/ 方法/ 生成/ 测试用例/ 的/ 过程/ 进行/ 详细描述/ ./ 表/ 1/ 中是/ 8/ 个/ 测试/ 目标/ 所/ 对应/ 的/ CNF/ 公式/ 的/ 难度/ 及/ 排名/ ,/ 根据/ 排名/ 升序/ 排列/ 测试/ 目标/ ,/ 我们/ 首先/ 为/ 迁移/ t8/ 生成/ 测试用例/ 〈/ s/ α/ 试/ 目标/ 集中/ 删除/ t8/ 对应/ 的/ 测试/ 目标/ ,/ 然后/ 再/ 把/ 该/ 测试用例/ 与/ 余下/ 的/ 每个/ 测试/ 目标/ 进行/ 合/ 取得/ 到/ CNF/ 公式/ ,/ 使用/ SAT/ 求解/ 器/ Yices/ ①/ 求解/ 每个/ CNF/ 公式/ 的/ 可/ 满足/ 性/ ,/ 可/ 得到/ 该/ 测试用例/ 覆盖/ 迁移/ t1/ ,/ 从/ 测试/ 目标/ 集中/ 删除/ t1/ 对应/ 的/ 测试/ 目标/ ,/ 重复/ 以上/ 过程/ ,/ 直到/ 所有/ 的/ 测试/ 目标/ 都/ 被/ 测试用例/ 覆盖/ (/ 即/ 最后/ 的/ 测试/ 目标/ 集为/ 空/ )/ ,/ 最后/ 生成/ 6/ 条/ 测试用例/ ./ 测试/ 目标/ G/ / t1G/ / t2G/ / t3G/ / t4G/ / t5G/ / t7G/ / t8G/ / t10/ 由此可见/ ,/ 对/ 具体/ 模型/ 进行/ 抽象/ 精化/ 后/ ,/ 测试用例/ 确实/ 得到/ 了/ 约简/ ,/ 结合/ 基于/ 可/ 满足/ 性/ 的/ 测试用例/ 生成/ 方法/ 可以/ 更好/ 地/ 约简/ 测试用例/ ./ 下面/ 以/ 更为/ 详细/ 的/ 实验/ 进行/ 说明/ ./ 7/ 实验/ 及/ 分析/ 我们/ 用/ 5/ 个/ EFSMs/ [/ 1/ ]/ 进行/ 实验/ 分析/ ,/ 然后/ 对/ 自控/ 镇痛/ 泵/ 系统/ ②/ 中/ 的/ 警报/ 侦测/ 组件/ 所/ 包含/ 的/ EFSM/ 模型/ 进行/ 实例/ 分析/ ./ 本文/ 使用/ 模型/ 检验/ 工具/ NuSMV2/ ./ 5.4/ ③/ 生成/ 反例/ (/ 测试用例/ )/ ./ 在/ 实验/ 中/ ,/ 主要/ 讨论/ 以下/ 几个/ 问题/ :/ (/ 1/ )/ 在/ 满足/ 迁移/ 覆盖/ 准则/ 的/ 情况/ 下/ ,/ 以/ 模型/ 检验/ 技术/ 生成/ 的/ 测试用例/ (/ Testcasegenerationbasedonmodelcheckingfromconcretemodel/ ,/ 称为/ 传统/ 方法/ )/ 为/ 基线/ ,/ 分析/ 使用/ 抽象/ 精化/ 方法/ (/ Testcasegenerationbasedonabstractionrefinementfromabstractmodel/ ,/ 称为/ AR/ 方法/ )/ 生成/ 的/ 测试用例/ 数目/ 和/ 总长度/ 的/ 约简/ 情况/ ;/ (/ 2/ )/ 比较/ 我们/ 之前/ 提出/ 的/ 基于/ 可/ 满足/ 性/ 的/ 测试用例/ 生成/ 方法/ [/ 5/ ]/ (/ Testcasegenerationbasedonsatifiabilityfromconcretemodel/ ,/ 称为/ SAT/ 方法/ )/ 和/ AR/ 方法/ ,/ 分析/ 哪/ 种/ 方法/ 能够/ 更/ 有效/ 地/ 约简/ 测试用例/ 集/ ;/ (/ 3/ )/ 结合/ SAT/ 方法/ 和/ AR/ 方法/ (/ SAT/ +/ AR/ )/ 是否/ 比/ 单独/ 使用/ 其中/ 一种/ 方法/ 能够/ 更/ 有效/ 地/ 约简/ 测试用例/ 集/ ;/ (/ 4/ )/ 在/ 约简/ 测试用例/ 集/ 的/ 同时/ ,/ SAT/ 、/ AR/ 和/ SAT/ +/ AR/ 方法/ 的/ 迁移/ 覆盖率/ 是否/ 会/ 减低/ ?/ (/ 5/ )/ SAT/ +/ AR/ 方法/ 的/ 查错/ 能力/ 是否/ 会/ 减低/ ?/ 实验/ 中/ 使用/ 的/ 5/ 个/ EFSM/ 是/ :/ FlightSafetySystemEFSM/ ,/ TransportProtocolEFSM/ ,/ LiftSystemEFSM/ ,/ ATMEFSM/ 和/ InresinitiatorEFSM/ ./ 它们/ 的/ 具体/ 模型/ 如图/ 4/ ~/ 图/ 8/ ./ ①/ ②/ ③/ Page9/ 图/ 4/ ~/ 图/ 6/ 中/ 模型/ 的/ 具体/ 迁移/ 描述/ 参见/ 文献/ [/ 1/ ]/ ./ 实验/ 主要/ 包括/ 以下/ 几个/ 步骤/ :/ (/ 1/ )/ 在/ 具体/ 模型/ 上/ 采用/ 基于/ 模型/ 检验/ 技术/ 生成/ 测试用例/ ./ 把/ 模型/ 中/ 的/ 每/ 一个/ 迁移/ (/ 测试/ 目标/ )/ 表示/ 成/ 一个/ 陷阱/ 性质/ ,/ 然后/ 通过/ 模型/ 检验/ 器为/ 每/ 一个/ 迁移/ 生成/ 一条/ 覆盖/ 它/ 的/ 反例/ ./ (/ 2/ )/ 在/ 具体/ 模型/ 上/ 采用/ 我们/ 在/ 文献/ [/ 5/ ]/ 中/ 提出/ 的/ SAT/ 方法/ 生成/ 测试用例/ ./ 文献/ [/ 5/ ]/ 中/ 的/ 实验/ 表明/ SAT/ 方法/ 对/ 测试用例/ 有/ 很/ 好/ 的/ 约简/ 效果/ ./ 图/ 7ATMEFSM/ (/ 3/ )/ 使用/ 本文/ 中/ 提出/ 的/ 抽象/ 精化/ 过程/ 为/ 每个/ EFSM/ 模型/ 构造/ 抽象/ 模型/ ,/ 然后/ 在/ 抽象/ 模型/ 上/ 采用/ 模型/ 检验/ 方法/ 生成/ 测试用例/ (/ AR/ 方法/ )/ ./ 实验/ 表明/ AR/ 方法/ 也/ 可以/ 很/ 有效/ 地/ 约简/ 测试用例/ ./ Page10/ 图/ 8InresinitiatorEFSM/ (/ 4/ )/ 用/ AR/ 和/ SAT/ 结合/ 的/ 方法/ 来/ 生成/ 测试用例/ ./ 采用/ 抽象/ 精化/ 过程/ 为/ 每个/ EFSM/ 模型/ 构造/ 抽象/ 模型/ ,/ 在/ 抽象/ 模型/ 上/ 采用/ SAT/ 方法/ 生成/ 测试用例/ 集/ ./ 图/ 9/ ~/ 图/ 13/ 是/ 根据/ 本文/ 提出/ 的/ 抽象/ 精化/ 方法/ 为/ 图/ 4/ ~/ 图/ 8/ 生成/ 的/ 抽象/ 模型/ ./ 图/ 9FlightSafetySystemEFSM/ 的/ 抽象/ 模型/ 表/ 2/ 给出/ 了/ 采用/ 本文/ 给出/ 的/ 使用/ 抽象/ 精化/ 过程/ 前后/ 5/ 个/ EFSM/ 模型/ 中/ 模型/ 元素/ 的/ 变化/ 情况/ ./ 其中/ FSS/ 、/ TP/ 、/ LS/ 、/ ATM/ 和/ II/ 分别/ 代表/ FlightSafetySystemEFSM/ ,/ TransportProtocolEFSM/ ,/ 图/ 10TransportProtocolEFSM/ 的/ 抽象/ 模型/ FSSTPLSATMIILiftSystemEFSM/ ,/ ATMEFSM/ 和/ InresinitiatorEFSM/ ./ Page11/ 图/ 12ATMEFSM/ 的/ 抽象/ 模型/ 图/ 13InresinitiatorEFSM/ 的/ 抽象/ 模型/ 在/ 表/ 3/ 中/ 列出/ 了/ 使用/ 这/ 4/ 种/ 方法/ 为/ 5/ 个/ EFSM/ 生成/ 测试用例/ 的/ 情况/ ,/ 包括/ 测试用例/ 的/ 数量/ (/ 表示/ 为/ N/ )/ 和/ 测试用例/ 的/ 总长度/ (/ 表示/ 为/ L/ )/ ./ 在/ 表中/ 传统/ 方法/ 用/ M/ 表示/ ./ 模型/ FSS3150TP2054LS2443ATM301331782IIPage12/ 从表/ 3/ 中/ 可以/ 看出/ ,/ SAT/ 、/ AR/ 、/ AR/ +/ SAT/ 对/ 测试用例/ 的/ 数目/ 和/ 总长度/ 有/ 很/ 好/ 的/ 约简/ 效果/ ./ 对于/ 5/ 个/ EFSM/ 模型/ ,/ AR/ 方法/ 都/ 对/ 具体/ 模型/ 进行/ 了/ 一定/ 程度/ 的/ 抽象/ ./ 对于/ FlightSafetySystem/ 模型/ ,/ AR/ 方法/ 生成/ 的/ 测试用例/ 数/ 和/ 测试用例/ 总长度/ 要/ 比/ 传统/ 方法/ 小/ ,/ 并且/ 也/ 比/ SAT/ 方法/ 的/ 小/ ./ 对于/ LiftSystem/ 模型/ 、/ TransportProtocol/ 模型/ 和/ ATM/ 模型/ ,/ AR/ 方法/ 都/ 对/ 传统/ 方法/ 生成/ 的/ 测试用例/ 集/ 进行/ 了/ 很大/ 的/ 约简/ ,/ 而/ 对于/ Inresinitiator/ 模型/ ,/ AR/ 方法/ 约简/ 效果/ 不佳/ ./ 并且/ 对于/ 除了/ FlightSafetySystem/ 和/ ATM/ 以外/ 的/ 其他/ 模型/ ,/ 它/ 的/ 约简/ 效果/ 要/ 比/ SAT/ 的/ 差/ ,/ 这/ 是因为/ 模型/ 中/ 迁移/ 的/ 共有/ 变量/ 很少/ ,/ 即使/ 迁移/ 有/ 共有/ 变量/ ,/ 但是/ 它们/ 的/ 谓词/ 条件/ 不/ 矛盾/ ,/ 导致/ 它们/ 不能/ 合并/ ,/ AR/ 方法/ 对/ 这/ 几个/ 模型/ 没有/ 很/ 好/ 的/ 约简/ ,/ 所以/ 造成/ 测试用例/ 的/ 约简/ 效果/ 不佳/ ;/ 而/ SAT/ 方法/ 生成/ 的/ 测试用例/ 较长/ ,/ 通过/ 可/ 满足/ 性/ 分析/ 不再/ 生成/ 与/ 已有/ 测试用例/ 相同/ 或/ 被/ 它/ 包含/ 的/ 测试用例/ ,/ 所以/ 对于/ 这/ 3/ 个/ 不能/ 得到/ 很/ 好/ 抽象/ 的/ 模型/ ,/ 它/ 生成/ 的/ 测试用例/ 数/ 和/ 测试用例/ 总长度/ 都/ 要/ 比/ AR/ 方法/ 的/ 小/ ./ AR/ +/ SAT/ 方法/ 具有/ 最佳/ 的/ 约简/ 效果/ ,/ 它/ 首先/ 对模型/ 进行/ 抽象/ 精化/ ,/ 这样/ ,/ 抽象/ 精化/ 对模型/ 的/ 状态/ 和/ 迁移/ 有/ 了/ 一定/ 的/ 约简/ ,/ 然后/ 通过/ SAT/ 方法/ 生成/ 数目/ 更/ 少/ 、/ 总长度/ 更/ 小/ 的/ 测试用例/ 集/ ./ 表/ 4/ 是/ 3/ 种/ 方法/ 的/ 测试用例/ 约简/ 比例/ ./ 对于/ FlightSafetySystem/ 和/ ATM/ 模型/ ,/ AR/ 方法/ 对/ 测试用例/ 的/ 约简/ 比例/ 比/ SAT/ 方法/ 高/ ./ 对于/ 其他/ 3/ 个/ 模型/ ,/ SAT/ 方法/ 对/ 测试用例/ 的/ 约简/ 比例/ 比/ AR/ 方法/ 高/ ./ 对于/ 所有/ 模型/ ,/ AR/ +/ SAT/ 方法/ 在/ AR/ 方法/ 和/ SAT/ 方法/ 的/ 基础/ 上/ 对/ 测试用例/ 进一步/ 约简/ ./ 模型/ FSSTPLSATMII/ 为了/ 在/ 约简/ 的/ 同时/ 保证/ 测试用例/ 集/ 的/ 质量/ ,/ 我们/ 从/ 迁移/ 覆盖率/ 和/ 查错/ 能力/ 两/ 方面/ 对/ 约简/ 的/ 测试用例/ 集/ 进行/ 分析/ ./ 基于/ 模型/ 检验/ 技术/ 的/ 测试用例/ 生成/ 方法/ 为/ 每个/ 迁移/ 都/ 要/ 生成/ 一条/ 测试用例/ ,/ 所以/ 它/ 的/ 迁移/ 覆盖率/ 为/ 100/ %/ ,/ 在/ 此基础/ 上/ ,/ 我们/ 分析/ SAT/ 、/ AR/ 、/ AR/ +/ SAT/ 这/ 3/ 种/ 方法/ 生成/ 的/ 测试用例/ 集/ 是否/ 降低/ 了/ 迁移/ 覆盖率/ ./ 在此之前/ ,/ 首先/ 对/ 本文/ 第/ 5/ 节中/ 提到/ 的/ 能够/ 覆盖/ 所有/ 抽象/ 迁移/ 的/ 抽象/ 测试用例/ 也/ 能够/ 覆盖/ 所有/ 具体/ 迁移/ 进行/ 分析/ ./ 使用/ AR/ 方法/ 分别/ 为/ 5/ 个/ EFSMs/ 的/ 抽象/ 模型/ 生成/ 满足/ 迁移/ 覆盖/ 的/ 抽象/ 测试用例/ 集/ ,/ 然后/ 从/ 抽象/ 测试用例/ 集/ 得到/ 对应/ 的/ 具体/ 测试用例/ 集/ ,/ 分析/ 抽象/ 测试用例/ 集对/ 具体/ 模型/ 中/ 具体/ 迁移/ 的/ 覆盖/ 情况/ ./ 实验/ 结果/ 见表/ 5/ ./ 表/ 5/ 抽象/ 测试用例/ 集对/ 具体/ 迁移/ 的/ 覆盖/ 情况/ 模型/ FSSTPLSATMII/ 从表/ 5/ 可知/ ,/ 满足/ 抽象/ 模型/ 迁移/ 覆盖/ 的/ 抽象/ 测试用例/ 集/ 也/ 能/ 满足/ 具体/ 模型/ 的/ 迁移/ 覆盖/ ./ 因而/ ,/ 针对/ AR/ 和/ AR/ +/ SAT/ 方法/ 我们/ 可以/ 在/ 抽象/ 模型/ 上/ 分析/ 抽象/ 测试用例/ 的/ 迁移/ 覆盖/ ./ 表/ 6/ 是/ 3/ 种/ 方法/ 生成/ 约简/ 的/ 测试用例/ 集/ 针对/ 5/ 个/ EFSM/ 抽象/ 模型/ 的/ 迁移/ 覆盖率/ ./ 模型/ FSSTPLSATMII/ 从表中/ 可知/ 3/ 种/ 方法/ 并未/ 降低/ 针对/ EFSM/ 模型/ 的/ 迁移/ 覆盖率/ ./ 在/ 文献/ [/ 5/ ]/ 的/ 实验/ 中/ 我们/ 采用/ 变异/ 分数/ 来/ 衡量/ 测试用例/ 集/ 的/ 查错/ 能力/ ./ 在/ 模型/ 上/ 采用/ 变异/ 操作/ 在/ 状态/ 和/ 迁移/ 中/ 植入/ 错误/ ,/ 通过/ 比较/ 测试用例/ 集在/ 约简/ 前后/ 发现错误/ 的/ 百分比/ 来/ 分析/ 约简/ 的/ 测试用例/ 集/ 的/ 查错/ 能力/ 是否/ 降低/ ./ 实验/ 结果表明/ SAT/ 方法/ 在/ 约简/ 测试用例/ 同时/ ,/ 查错/ 能力/ 和/ 传统/ 方法/ 相同/ ,/ 同时/ 抽象/ 模型/ 的/ 迁移/ 集/ 保留/ 了/ 具体/ 模型/ 的/ 迁移/ 或者/ 由/ 具体/ 模型/ 的/ 多个/ 迁移/ 合并/ 而/ 来/ ,/ 因而/ AR/ +/ SAT/ 方法/ 的/ 测试用例/ 集/ 的/ 查错/ 能力/ 也/ 与/ 传统/ 方法/ 相同/ ./ 下面/ 我们/ 对/ 自控/ 镇痛/ 泵/ 系统/ 中/ 的/ 警报/ 侦测/ 组件/ 所/ 包含/ 的/ EFSM/ 模型/ 进一步/ 对/ 上面/ 得到/ 的/ 实验/ 结果/ 进行/ 论证/ ./ 警报/ 侦测/ 组件/ 由/ 4/ 个/ 并行/ 子/ 状态机/ 组成/ :/ 警报/ 侦测/ 控制器/ 、/ 第/ 1/ 层/ 警报/ 侦测/ 组件/ 、/ 第/ 2/ 层/ 警报/ 侦测/ 组件/ 和/ 警告/ 侦测/ 组件/ ./ 警报/ 侦测/ 控制器接收/ 由/ 其他/ 子/ 状态机/ 报告/ 的/ 警报/ 、/ 警告/ 并且/ 决定/ 什么/ 通知/ 应该/ 报告/ 给/ 状态/ 控制器/ ./ 第/ 1/ 层/ 警报/ 侦测/ 组件/ Page13/ 接收/ 来自/ 系统/ 模型/ 的/ 传感/ 信号/ 输入/ ,/ 检查/ 信号/ 值/ 的/ 正值/ 表示/ 泵/ 出现/ 关键性/ 失效/ 的/ 这类/ 信号/ 子集/ ,/ 当/ 任何/ 信号/ 子集/ 的/ 值/ 为/ 正时/ 把/ 第一层/ 警报/ 报告/ 给/ 警报/ 侦测/ 控制器/ ./ 第/ 2/ 层/ 警报/ 侦测/ 组件/ 接收/ 来自/ 系统/ 模型/ 的/ 传感/ 信号/ 输入/ ,/ 检查/ 信号/ 值/ 的/ 正值/ 表示/ 当前/ 注射液/ 没有/ 被/ 正确/ 传输/ 的/ 这类/ 信号/ 子集/ ,/ 检查/ 信号/ 值/ 的/ 正值/ 表示/ 泵/ 出现/ 关键性/ 失效/ 的/ 这类/ 信号/ 子集/ ./ 警告/ 侦测/ 组件/ 接收/ 来自/ 系统/ 模型/ 的/ 传感/ 信号/ 输入/ ,/ 检查/ 信号/ 值/ 的/ 正值/ 表示/ 泵/ 出现/ 某些/ 异常/ 但/ 仍/ 能/ 安全/ 工作/ 的/ 这类/ 信号/ 子集/ ./ 4/ 个子/ 组件/ 的/ EFSM/ 模型/ 在/ 这里/ 不再/ 给出/ ./ 图/ 14/ ~/ 图/ 17/ 分别/ 是/ 对/ 4/ 个子/ 组件/ 的/ EFSM/ 模型/ 通过/ 本文/ 的/ 抽象/ 精化/ 方法/ 得到/ 的/ 抽象/ 模型/ ./ 图/ 18/ 是/ 4/ 个/ 抽象/ 模型/ 的/ 并行/ 组合/ ./ 图/ 14/ 警报/ 侦测/ 控制器/ 组件/ EFSM/ 抽象/ 模型/ 图/ 15/ 第/ 1/ 层/ 警报/ 侦测/ 组件/ EFSM/ 抽象/ 模型/ 图/ 16/ 第/ 2/ 层/ 警报/ 侦测/ 组件/ EFSM/ 抽象/ 模型/ 表/ 7/ 是/ 抽象/ 精化/ 前后/ 并行/ EFSM/ 模型/ 中/ 状态/ 数/ 和/ 迁移/ 数/ 的/ 变化/ 情况/ ./ 表/ 7/ 抽象/ 精化/ 前后/ 并行/ 模型/ 元素/ 的/ 变化/ 情况/ 状态/ 数/ 迁移/ 数表/ 8/ 是/ 4/ 种/ 方法/ 为/ 警报/ 侦测/ 组件/ 的/ 并行/ EFSM/ 生成/ 的/ 测试用例/ 情况/ ./ 模型/ 并行/ EFSM119729614429668629284/ 从表/ 8/ 可以/ 看出/ ,/ SAT/ 方法/ 、/ AR/ 方法/ 和/ AR/ +/ SAT/ 结合/ 的/ 方法/ 都/ 在/ 很大/ 程度/ 上/ 约简/ 了/ 测试用例/ 数目/ 和/ 总长度/ ./ SAT/ 方法/ 的/ 约简/ 效果/ 要/ 比/ AR/ 方法/ 的/ 好/ ,/ 主要/ 原因/ 是/ AR/ 方法/ 进行/ 抽象/ 精化/ 时/ ,/ 得到/ 的/ 等价/ 状态/ 较/ 多/ ,/ 但是/ 能够/ 合并/ 的/ 迁移/ 不/ 多/ ,/ 所以/ 导致/ AR/ 方法/ 约简/ 效果/ 比/ SAT/ 方法/ 差/ ./ 但是/ ,/ 通过/ AR/ 方法/ 对/ 各个/ 子/ 组件/ 进行/ 抽象/ 精化/ 后/ 再/ 并行/ 组合/ ,/ 使得/ 覆盖/ 某些/ 抽象/ 迁移/ 的/ 测试用例/ 缩短/ ,/ 所以/ AR/ +/ SAT/ 方法/ 在/ SAT/ 方法/ 的/ 基础/ 上/ 进一步/ 很/ 好/ 的/ 约简/ 了/ 测试用例/ 数目/ 和/ 总长度/ ./ 表/ 9/ 是/ 3/ 种/ 方法/ 为/ 警报/ 侦测/ 组件/ 的/ 并行/ EFSM/ 生成/ 的/ 测试用例/ 的/ 约简/ 比例/ ./ 模型/ 并行/ EFSM49/ 在/ 表/ 3/ 中/ 的/ 数据/ 表明/ ,/ 针对/ 那/ 5/ 个/ EFSM/ 模型/ ,/ SAT/ 方法/ 的/ 约简/ 比例/ 要/ 比/ AR/ 方法/ 的/ 高/ ,/ 表/ 9/ 可/ 得出/ 同样/ 的/ 结论/ ./ 与/ 前面/ 的/ 5/ 个/ EFSMs/ 相比/ ,/ 在/ 并行/ 组合/ 的/ 模型/ 上/ AR/ +/ SAT/ 能够/ 约简/ 更/ 多/ 的/ 测试用例/ 数目/ ,/ 同时/ 也/ 能/ 很/ 好/ 的/ 约简/ 测试用例/ 总长度/ ./ 最后/ ,/ 3/ 种/ 方法/ 的/ 迁移/ 覆盖率/ 都/ 是/ 100/ %/ ,/ 查错/ 能力/ 也/ 与/ 传统/ 方法/ 相同/ ./ 8/ 相关/ 工作/ 有关/ 测试用例/ 优化/ 的/ 研究/ 有/ 很多/ ./ Hamon/ 等/ 人/ [/ 14/ ]/ 在/ 模型/ 检验/ 器/ SAL/ 中/ 集成/ 了/ 测试用例/ 生成/ ,/ 最后/ 得到/ 的/ 测试用例/ 集/ 虽然/ 在/ 测试用例/ 的/ 数目/ 上/ 会/ 减少/ ,/ 但/ 它/ 的/ 总长度/ 不/ 一定/ 会/ 减少/ ,/ 并且/ 也/ 没/ 说明/ 哪/ Page14/ 图/ 18/ 警报/ 侦测/ 组件/ 的/ 并行/ EFSM/ 抽象/ 模型/ 些/ 测试用例/ 可以/ 扩展/ ./ Ammann/ 等/ 人/ [/ 15/ ]/ 把/ 生成/ 的/ 测试用例/ 表示/ 成/ 模型/ ,/ 在/ 该/ 模型/ 上/ 模型/ 检验/ 余下/ 的/ 测试/ 目标/ ,/ 来/ 判定/ 它们/ 是否/ 被/ 该/ 测试用例/ 覆盖/ ,/ 这/ 涉及/ 到/ 频繁/ 地/ 从/ 测试用例/ 到/ 模型/ 的/ 转换/ 及/ 对模型/ 检验/ 器/ 的/ 调用/ ./ Fraser/ 等/ 人/ [/ 16/ ]/ 在/ 生成/ 测试用例/ 后/ ,/ 使用/ LTL/ 重写/ 规则/ 消除/ 目前/ 已/ 被/ 覆盖/ 的/ 测试/ 目标/ ./ Zeng/ 等/ 人/ [/ 13/ ]/ 结合/ CTL/ 重写/ 规则/ 进行/ 了/ 测试/ 目标/ 约简/ 和/ 测试用例/ 集约/ 简/ ./ 其中/ 都/ 没有/ 给出/ 选择/ 测试/ 目标/ 次序/ 的/ 方法/ ,/ 这/ 恰恰/ 会/ 直接/ 影响/ 测试用例/ 约简/ 的/ 效果/ ./ 在/ 文献/ [/ 5/ ]/ 中/ 我们/ 提出/ 一种/ 在/ 测试用例/ 生成/ 时/ 约简/ 的/ 方法/ ,/ 根据/ CNF/ 公式/ 的/ 可/ 满足/ 性/ 约简/ 冗余/ 的/ 测试用例/ ./ 章晓芳/ 等/ 人/ [/ 17/ ]/ 提出/ 了/ 一种/ 基于/ 测试/ 需求/ 的/ 测试用例/ 约简/ 方法/ ./ 郭曦/ 等/ 人/ [/ 18/ ]/ 使用/ 谓词/ 抽象/ 约简/ 测试用例/ ,/ 使用/ 谓词/ 抽象/ 划分/ 等价/ 状态/ ,/ 从/ 抽象/ 模型/ 生/ Page15/ 成/ 测试用例/ ,/ 文中/ 的/ 建模/ 工具/ 是/ 有限/ 状态机/ 模型/ 并且/ 文中/ 没有/ 考虑/ 出现/ 伪/ 反例/ 求精/ 模型/ 的/ 情况/ ./ Gong/ 等/ 人/ [/ 19/ ]/ 基于/ 覆盖/ 矩阵/ 和/ 路径/ 向量/ 约简/ 的/ 方法/ 来/ 约简/ 为/ 程序/ 生成/ 的/ 测试用例/ 集/ ,/ 该/ 方法/ 只/ 分析/ 了/ 约简/ 的/ 测试用例/ 集/ 的/ 查错/ 能力/ 但/ 没有/ 分析/ 它/ 的/ 覆盖/ 情况/ ./ Quentin/ 等/ 人/ [/ 20/ ]/ 基于/ 事件/ 序列/ 的/ 组合/ 覆盖/ 准则/ 进行/ 测试用例/ 约简/ ,/ 并/ 在/ GUI/ 应用/ 上/ 评估/ 了/ 他们/ 的/ 方法/ ./ Ng/ 等/ 人/ [/ 21/ ]/ 使用/ 形式/ 概念分析/ 获得/ 模型/ 中/ 实体/ 的/ 包含/ 关系/ ,/ 从/ 状态机/ 模型/ 生成/ 约简/ 的/ 测试用例/ 集/ ,/ 文中/ 只/ 分析/ 了/ 测试用例/ 集/ 的/ 迁移/ 覆盖/ 但/ 没有/ 分析/ 它/ 的/ 查错/ 能力/ ./ Wu/ 等/ 人/ [/ 22/ ]/ 使用/ 商/ 空间/ 理论/ 对/ 测试/ 集/ 进行/ 划分/ ,/ 使用/ 最小/ 测试/ 集/ 生成/ 算法/ 生成/ 最小/ 测试/ 集/ ,/ 文中/ 没有/ 对/ 提出/ 的/ 方法/ 进行/ 实验/ 评估/ ./ Kumar/ 等/ 人/ [/ 23/ ]/ 使用/ 模糊/ 分簇/ 把/ 相似/ 的/ 测试用例/ 分配/ 到/ 相同/ 的/ 簇/ ,/ 找到/ 冗余/ 的/ 测试用例/ ,/ 该/ 方法/ 是/ 在/ 生成/ 测试用例/ 集后/ 再/ 进行/ 约简/ ./ Harald/ 等/ 人/ [/ 24/ ]/ 使用/ 模型/ 检验/ 技术/ 从/ UML/ 状态图/ 生成/ 测试用例/ 集/ ,/ 然后/ 合并/ 相关/ 用例/ 对/ 得到/ 约简/ 的/ 测试用例/ 集/ ,/ 该/ 方法/ 会为/ 生成/ 那些/ 冗余/ 的/ 测试用例/ 而/ 调用/ 模型/ 检验/ 器/ ,/ 增加/ 了/ 测试用例/ 生成/ 的/ 成本/ ./ 文献/ [/ 25/ -/ 26/ ]/ 把/ 测试用例/ 集约/ 简/ 问题/ 看成/ 是/ 优化/ 问题/ ./ 此外/ ,/ 有/ 很多/ 研究/ 工作/ (/ 例如/ 文献/ [/ 27/ -/ 28/ ]/ )/ 把/ 启发式/ 算法/ 应用/ 到/ 测试用例/ 集/ 选择/ ,/ 即/ 从/ 已有/ 的/ 测试用例/ 集中/ 选择/ 一个/ 子集/ ./ 本文/ 以/ EFSM/ 作为/ 建模/ 工具/ ,/ 根据/ 公式/ 簇/ 建立/ 状态/ 等价关系/ ,/ 使用/ 抽象/ 精化/ 方法/ 构建/ 抽象/ 模型/ ,/ 结合/ SAT/ 方法/ 在/ 生成/ 测试用例/ 的/ 过程/ 中/ 约简/ 测试用例/ 集/ ,/ 一方面/ 减少/ 了/ 调用/ 模型/ 检验/ 器/ 的/ 次数/ ,/ 节省/ 了/ 测试用例/ 生成/ 的/ 成本/ ,/ 另一方面/ 有效/ 地/ 约简/ 了/ 测试用例/ 集/ ,/ 缩减/ 了/ 测试用例/ 执行/ 的/ 成本/ ,/ 此外/ ,/ 在/ 约简/ 测试用例/ 的/ 同时/ 并未/ 降低/ 它/ 的/ 迁移/ 覆盖率/ 和/ 查错/ 能力/ ./ 9/ 总结/ 与/ 进一步/ 工作/ 本文/ 将/ 迁移/ 上/ 的/ 谓词/ 划分/ 成/ 公式/ 簇/ ,/ 根据/ 公式/ 簇/ 建立/ 状态/ 的/ 等价关系/ ,/ 分/ 几种/ 情况/ 讨论/ 了/ 如何/ 合并/ 相关/ 迁移/ ,/ 进而/ 构建/ 初始/ 的/ 抽象/ 模型/ ./ 在/ 抽象/ 模型/ 上/ 通过/ 模型/ 检验/ 技术/ 生成/ 测试用例/ ,/ 并/ 说明/ 了/ 满足/ 抽象/ 模型/ 覆盖/ 的/ 测试用例/ 也/ 能/ 满足/ 具体/ 模型/ 的/ 覆盖/ ./ 给出/ 了/ 判定/ 伪/ 反例/ 和/ 精化/ 模型/ 的/ 方法/ ./ 在/ 最终/ 的/ 抽象/ 模型/ (/ 没有/ 反例/ 的/ 抽象/ 模型/ )/ 上/ 使用/ 基于/ 可/ 满足/ 性/ 的/ 测试用例/ 生成/ 方法/ 生成/ 反例/ ./ 实验/ 表明/ 与/ 传统/ 方法/ 、/ SAT/ 方法/ 、/ AR/ 方法/ 相比/ ,/ 结合/ AR/ 和/ SAT/ 方法/ 能/ 最/ 有效/ 地/ 约简/ 测试用例/ 的/ 数目/ 及/ 总长度/ ,/ 与此同时/ ,/ 并未/ 降低/ 迁移/ 覆盖率/ 和/ 查错/ 能力/ ./ 最后/ 并行/ 组合/ 模型/ 的/ 实例/ 也/ 说明/ ,/ SAT/ +/ AR/ 方法/ 相比/ 单独/ 使用/ AR/ 方法/ 和/ SAT/ 方法/ 都/ 具有/ 更好/ 的/ 约简/ 效果/ ./ 本文/ 的/ 方法/ 既/ 节省/ 了/ 测试用例/ 生成/ 的/ 成本/ ,/ 又/ 缩减/ 了/ 测试用例/ 执行/ 的/ 成本/ ./ 将来/ ,/ 我们/ 将/ 把/ 本文/ 的/ 方法/ 应用/ 到/ 一个/ 较大/ 的/ 实际/ 系统/ ,/ 并/ 开发/ 一个/ 抽象/ 精化/ 和/ SAT/ 结合/ 的/ 测试用例/ 优化/ 工具/ ./ 研究/ 更好/ 的/ 抽象/ 精化/ 过程/ ,/ 获得/ 更/ 约简/ 的/ 抽象/ 模型/ ,/ 从而/ 更好/ 地/ 约简/ 测试用例/ 集/ ./ 

