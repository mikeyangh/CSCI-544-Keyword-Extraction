Page1/ 面向/ InfiniBand/ 数据中心/ 的/ 区别/ 化/ 传输层/ 带宽/ 划分/ 机制/ 张子/ 文吕高锋/ 孙志刚/ 王/ ?/ 臖/ 卢/ 锡/ 城/ (/ 国防科学技术大学/ 计算机/ 学院/ 长沙/ 410073/ )/ 摘要/ 数据中心/ 已经/ 成为/ 提供/ 资源/ 和/ 服务/ 的/ 重要/ 平台/ ,/ 在/ 虚拟化/ 基础/ 上/ 部署/ 的/ 多种/ 应用/ 对/ 网络/ 性能/ 提出/ 了/ 更加/ 严格/ 和/ 多样化/ 的/ 需求/ ,/ 从而/ 促使/ 改变/ 以/ 传统/ TCP/ 为/ 中心/ 的/ 传输层/ 结构/ ./ 文中/ 从/ 数据中心/ 环境/ 的/ 特性/ 出发/ ,/ 归纳/ 得到/ 改进/ 数据中心/ 网络/ 传输层/ 设计/ 的/ 3/ 个/ 方向/ ./ 在/ 深入/ 剖析/ InfiniBand/ (/ IB/ )/ 互联/ 传输/ 优化/ 相关/ 技术/ 的/ 基础/ 上/ ,/ 文中/ 提出/ 了/ 一种/ 更好/ 的/ 支持/ 网络/ 可/ 感知/ 、/ 应用/ 可/ 区分/ 、/ 策略/ 可/ 管理/ 的/ 数据中心/ 网络/ 新型/ 传输/ 控制/ 模型/ ./ 文中/ 对/ IB/ 传输/ 控制/ 核心/ 的/ IB/ 拥塞/ 控制算法/ 及其/ 参数/ 进行/ 了/ 深入/ 的/ 分析/ ,/ 证明/ 了/ 在/ 流级/ 通过/ 区别/ 化/ 的/ 拥塞/ 控制参数/ 配置/ 能够/ 实现/ 成/ 比例/ 的/ 带宽/ 划分/ ./ 最后/ ,/ 在/ 真实/ 系统/ 中/ 的/ 实验/ 验证/ 了/ 通过/ 参数/ 的/ 动态/ 配置/ 能够/ 保持/ 租户/ 级/ 的/ 公平/ 带宽/ 共享/ ,/ 更好/ 支持/ 云/ 数据中心/ 的/ 带宽/ 隔离/ 需求/ ./ 关键词/ 数据中心/ 网络/ ;/ InfiniBand/ ;/ 拥塞/ 控制/ ;/ 带宽/ 隔离/ ;/ 传输/ 策略/ 1/ 引言/ 数据中心/ 通过/ 把/ 计算/ 、/ 存储/ 和/ 网络设备/ 整合/ 成/ 虚拟/ 资源/ 池为/ 用户/ 提供/ 集成/ 服务/ 环境/ ./ 国内外/ 服务提供商/ 建立/ 的/ 云/ 平台/ 发展/ 迅猛/ ,/ 云/ 数据中心/ 规模/ 日益/ 扩大/ ,/ 已经/ 达到/ 10K/ ~/ 100K/ 台/ 服务器/ 的/ 量级/ [/ 1/ ]/ ./ 数据中心/ 网络/ 主要/ 设计/ 目标/ 为/ 高带宽/ 、/ 低/ 延时/ 和/ 高可靠性/ ./ 其它/ 如/ 扩展性/ 、/ 安全性/ 、/ 管理/ 配置/ 、/ 故障诊断/ 等/ 方面/ 也/ 面临/ 着/ 诸多/ 亟待解决/ 的/ 问题/ ./ 传统/ TCP/ 协议/ 在/ 解决/ 低/ 延时/ 数据中心/ 网络/ 拥塞/ 控制/ 、/ 满足/ 多样化/ 用户/ 需求/ 、/ 实现/ 可控/ 可管/ 的/ 传输/ 等/ 方面/ 仍/ 存在/ 较/ 多/ 问题/ ,/ 改进/ 传输/ 控制/ 必须/ 考虑/ 数据中心/ 环境/ 的/ 内在/ 特性/ 和/ 需求/ ./ 首先/ ,/ 传统/ TCP/ 只能/ 实现/ 流级/ 的/ 公平性/ ,/ 而/ 数据中心/ 内/ 应用/ 规模/ 相对/ 有限/ ,/ 需要/ 以较/ 细/ 的/ 粒度/ 将/ 各自/ 的/ QoS/ 需求/ 传达/ 给/ 网络/ 管理者/ ,/ 从而/ 实现/ 相应/ 的/ 传输/ 控制策略/ 和/ 灵活/ 的/ 网络资源/ 划分/ ,/ 同时/ 促进/ 网络/ 定价/ 机制/ 的/ 发展/ ./ 第二/ ,/ 不同于/ TCP/ 基于/ 端到/ 端/ RTT/ 和/ 丢/ 包/ 实现/ 网络/ 探测/ ,/ 由于/ 网络/ 和/ 服务器/ 处在/ 同一/ 管理/ 域/ ,/ 数据中心/ 能够/ 直接/ 将/ 网络/ 信息/ 通告/ 给/ 传输层/ ,/ 如/ 交换机/ 接口/ 的/ 统计/ 计数器/ [/ 2/ ]/ 等/ ,/ 网络/ 对/ 传输层/ 的/ 接口/ 能够/ 优化/ 传输/ 控制/ ./ 第三/ ,/ TCP/ 应用/ 于/ 自/ 组织/ 的/ Internet/ 环境/ ,/ 集中管理/ 的/ 数据中心/ 需要/ 更好/ 的/ 可控性/ ,/ 网络/ 管理者/ 能够/ 为/ 用户/ 配置/ 不同/ 的/ 策略/ ,/ 同时/ 监控/ 传输/ 质量/ ,/ 从而/ 启动/ 流量/ 调度/ 等/ 传输/ 优化/ 机制/ ./ IB/ 是/ 诞生/ 于/ 1999/ 年/ 的/ 一种/ 高带宽/ 低/ 延时/ 互连/ 交换/ 技术/ [/ 2/ ]/ ,/ 其/ 与/ 以太网/ 相比/ 具有/ 更强/ 的/ 异构/ 互联/ 能力/ ,/ 在/ 延时/ 、/ 带宽/ 、/ 虚拟化/ 和/ 管理/ 配置/ 等/ 方面/ 其/ 性能/ 都/ 有/ 显著/ 的/ 提高/ ./ 2011/ 年底/ 最新/ 的/ top500/ 高性能/ 计算机/ 排名/ 中/ ,/ 全球/ 最快/ 的/ 500/ 台/ 计算机/ 中/ 已经/ 有/ 42.6/ %/ 使用/ IB/ 互连/ ./ 近年来/ ,/ IB/ 在/ 数据中心/ 网络/ 中/ 的/ 应用/ 逐渐/ 得到/ 关注/ ./ 2010/ 年/ ,/ Oracle/ 通过/ 在/ 其/ 数据仓库/ 和/ 数据处理/ 平台/ Exadata/ 中/ 使用/ IB/ 交换/ ,/ 处理/ 性能/ 提升/ 10/ 倍/ [/ 3/ ]/ ./ 2010/ 年/ ,/ Google/ 在/ 其/ 研究/ 工作/ 中/ 采用/ IB/ 和/ 蝶形/ 网络拓扑/ 构建/ 数据中心/ ,/ 网络/ 功耗/ 节约/ 85/ %/ [/ 4/ ]/ ./ 2011/ 年/ ,/ Microsoft/ 基于/ IB/ 组建/ 高性能/ 数据中心/ 支持/ 其/ BingMaps/ 应用/ ,/ 与/ 传统/ 基于/ 以太网/ 的/ 架构/ 相比/ 节约/ 80/ %/ 的/ 功耗/ 和/ 50/ %/ 的/ 成本/ [/ 5/ ]/ ./ Stanford/ 课题组/ 通过/ IB/ 互联/ 分布式/ DRAM/ 实现/ 高性能/ 数据中心/ 存储系统/ [/ 6/ ]/ ./ 2012/ 年初/ ,/ Intel/ 通过/ 收购/ 试图/ 将/ IB/ 技术/ 与其/ 至强/ 处理器/ 绑定/ ,/ 进一步/ 扩大/ 在/ 服务器/ 市场/ 的/ 优势/ 地位/ ,/ 推动/ 其/ 在/ 数据中心/ 集群/ 的/ 应用/ ./ IB/ 的/ 传输/ 控制/ 较之/ 传统/ TCP/ 加/ 以太网/ 模式/ 更加/ 适应/ 数据中心/ 环境/ ,/ 本文/ 对/ 基于/ IB/ 的/ 数据中心/ 传输层/ 设计/ 展开/ 深入/ 讨论/ ./ 本文/ 的/ 创新/ 点/ 在于/ :/ (/ 1/ )/ 将/ 目前/ 数据中心/ 网络/ 的/ 主要/ 研究/ 点/ 归纳/ 映射/ 为/ 如何/ 扩展/ 和/ 改进/ 传输层/ 功能/ 以/ 满足/ 数据中心/ 网络/ 传输/ 的/ 设计/ 需求/ ;/ (/ 2/ )/ 基于/ IB/ 提供/ 的/ 传输/ 优化/ 技术/ ,/ 创新性/ 地/ 提出/ 新型/ 传输/ 控制/ 机制/ ,/ 通过/ 定义/ 各/ 功能模块/ 和/ 接口/ 实现/ 网络/ 可/ 感知/ 、/ 应用/ 可/ 区分/ 、/ 策略/ 可/ 管理/ 的/ 数据中心/ 网络/ 传输/ ;/ (/ 3/ )/ 基于/ IB/ 的/ 拥塞/ 控制/ 机制/ ,/ 通过/ 对/ 其/ 相关/ 参数/ 的/ 研究/ 和/ 真实/ 环境/ 的/ 实验/ 证明/ 通过/ 不同/ 的/ 参数/ 配置/ 能够/ 达到/ 区别/ 化/ 的/ 端/ 到/ 端网络/ 传输/ 能力/ ,/ 从而/ 实现/ 管理者/ 的/ 传输/ 控制策略/ ./ 本文/ 第/ 2/ 节/ 综述/ 目前/ 改进/ 传输层/ 设计/ 的/ 相关/ 研究/ ;/ 第/ 3/ 节/ 提出/ 数据中心/ 网络/ 新型/ 传输/ 控制/ 模型/ ;/ 第/ 4/ 节/ 深入研究/ IB/ 拥塞/ 控制算法/ 及其/ 参数/ 配置/ 对流/ 传输/ 能力/ 的/ 影响/ ;/ 第/ 5/ 节/ 通过/ 实验/ 验证/ IB/ 拥塞/ 控制/ 的/ 公平性/ 及/ 区别/ 化/ 带宽/ 划分/ 的/ 有效性/ ./ 2/ 数据中心/ 网络/ 传输层/ 设计/ 相关/ 研究/ 早期/ 数据中心/ 网络/ 研究/ 普遍/ 关注/ 于/ 从/ 体系结构/ 的/ 拓扑/ 、/ 编址/ 、/ 路由/ 等/ 角度/ 解决/ 面临/ 的/ 问题/ ,/ 而/ 近期/ 的/ 很多/ 工作/ 都/ 是/ 围绕/ 着/ 如何/ 设计/ 传输/ 控制/ 机制/ 来/ 满足/ 数据中心/ 传输层/ 的/ 新/ 应用/ 需求/ ./ 针对/ 数据中心/ 的/ 应用环境/ ,/ 其/ 传输层/ 设计/ 的/ 主要/ 需求/ 包括/ :/ (/ 1/ )/ 新型/ 拥塞/ 控制算法/ 完全/ 基于/ 端到/ 端的/ TCP/ 方法/ 面临/ 着/ 在/ 低/ 延时/ 数据中心/ 环境/ 下/ 对/ 突发/ 拥塞/ 响应/ 不/ 及时/ 、/ 窗口/ 限速/ 能力/ 不足/ [/ 7/ ]/ 等/ 问题/ ./ 目前/ 数据中心/ 应用/ 具有/ 很强/ 的/ 流量/ 突发性/ ,/ 如大/ 数据/ 领域/ 的/ Hadoop/ 会/ 产生/ all/ -/ to/ -/ all/ 的/ 流量/ 模式/ [/ 1/ ]/ ,/ many/ -/ to/ -/ one/ 的/ 同步/ 流量/ 场景/ 会/ 造成/ Incast/ [/ 8/ -/ 9/ ]/ 问题/ ./ 出于/ 成本/ 的/ 考虑/ ,/ 数据中心/ 网络/ 通常/ 采用/ 超额/ 认购/ (/ Oversubscription/ )/ [/ 1/ ]/ 的/ 方式/ ,/ 从而/ 导致/ 核心/ 网络/ 成为/ 瓶颈/ ./ 交换/ 网络/ 的/ 报文/ 缓冲区/ 比较/ 小/ 也/ 导致/ 更/ 容易/ 出现/ 拥塞/ [/ 10/ ]/ ./ 目前/ 的/ 很多/ 研究/ 通过/ 基于/ 网络/ 拥塞/ 信息/ 加源/ 限速/ 的/ 方式/ 进行/ 传输/ 拥塞/ 控制/ ./ DCTCP/ [/ 10/ ]/ 针对/ 数据中心/ 的/ 需求/ 修改/ ECN/ (/ ExplicitCongestionNotification/ )/ 机制/ ,/ 采用/ 一个多/ 比特/ 的/ 反馈/ ,/ 同时/ 改进/ TCP/ 发送/ 接收端/ 的/ AIMD/ 速率/ 调整/ 算法/ ,/ 从而/ 保证/ 高/ 的/ 突发/ 容忍性/ 和/ 短流/ 的/ 低/ 延时/ ,/ 同时/ 能够/ 解决/ Incast/ 问题/ ./ 以太网/ 通过/ IEEE802/ ./ 1Qau/ 的/ 标准/ 实现/ 了/ QCN/ (/ Quan/ -/ tizedCN/ )/ ,/ Jiang/ 等/ 人/ [/ 11/ ]/ 对/ 数据中心/ 内/ QCN/ 的/ 稳定性/ 和/ 收敛性/ 进行/ 建模/ 分析/ ,/ 结果显示/ QCN/ 能够/ 改进/ 吞吐量/ 和/ 延时/ ,/ 同时/ 得到/ 比例/ 公平性/ ,/ 但是/ 网络/ 抖动/ 问题/ 比较严重/ ./ Alizadeh/ 等/ 人/ [/ 12/ ]/ 采用/ 了/ 一种/ 当/ Page3/ 出现/ 延时/ 增加/ 时/ 能够/ 使得/ 拥塞/ 控制/ 环回/ 稳定/ 的/ 算法/ AveragingPrinciple/ ,/ 证明/ 该/ 策略/ 在/ QCN/ 以太网/ 能够/ 达到/ 高/ 稳定性/ ./ (/ 2/ )/ 传输层/ 安全/ 和/ 性能/ 隔离/ 由于/ 传统/ TCP/ 协议/ 能够/ 保证/ 流级/ 的/ 公平性/ ,/ 故/ 数据中心/ 内/ 的/ 应用/ 和/ 租户/ 能够/ 通过/ 建立/ 大量/ TCP/ 连接/ 抢占/ 有限/ 的/ 带宽/ 资源/ ./ 虚拟机/ 提供/ 带宽/ 设限/ 机制/ 解决/ 性能/ 隔离/ ,/ 当/ 速率/ 超过/ 分配/ 的/ 带宽/ 时/ 丢弃/ 报文/ ,/ 从而/ 导致/ TCP/ 的/ 降速/ ,/ 但/ 存在/ 的/ 问题/ 是/ 固定/ 的/ 带宽/ 分配/ 阈值/ 导致/ 带宽/ 浪费/ ,/ 同时/ 应用/ 需要/ 假设/ 租户/ 使用/ 的/ 是/ 合理/ 行为/ 的/ TCP/ ./ SecondNet/ [/ 13/ ]/ 通过/ 集中式/ 的/ VDC/ 分配/ 算法/ 确定/ 虚拟机/ 到/ 物理/ 机/ 的/ 匹配/ 、/ 路由/ 以及/ 服务器/ 管理程序/ 对/ 带宽/ 的/ 预留/ 状态/ ,/ 从而/ 在/ 数据中心/ 网络/ 保证/ 了/ 虚拟机/ 对/ 之间/ 的/ 流量/ ./ Seawall/ [/ 14/ ]/ 根据/ 每台/ 虚拟机/ 在/ 当前/ 链路/ 发送数据/ 的/ 权重/ ,/ 通过/ 控制/ 边缘/ 网络/ 服务器/ 虚拟/ 层/ 的/ 分布式/ 限速/ 器为/ 每条/ 链路/ 提供/ 带宽/ 划分/ ,/ 可扩展性/ 好/ ./ 但是/ 这/ 两种/ 机制/ 提供/ 虚拟机/ 对/ 之间/ 的/ 带宽/ 更/ 有利于/ 虚拟机/ 对数/ 多/ 的/ 租户/ ;/ 且/ 数据中心/ 通信/ 模式/ 动态性/ 强/ ,/ 很难/ 指定/ 虚拟机/ 对/ 之间/ 的/ 带宽/ 需求/ ./ NetShare/ [/ 15/ ]/ 实现/ 了/ 各个/ 租户/ 之间/ 的/ 加权/ 层次/ 带宽/ 划分/ ,/ 将/ 问题/ 简化/ 为/ 端点/ 的/ 服务器/ 链路/ 在/ 各个/ 共享/ 的/ 虚拟机/ 之间/ 的/ 分配/ ,/ 但是/ 集中/ 的/ 带宽/ 分配器/ 难/ 适应/ 大规模/ 的/ 数据中心/ 、/ 处理/ 快速/ 的/ 速率/ 变化/ 和/ 虚拟机/ 的/ 迁移/ ./ (/ 3/ )/ 传输服务/ 的/ 应用/ 区分/ 能力/ 在/ 传输/ 层面/ 除了/ 传统/ 的/ 公平/ 带宽/ 性能/ 隔离/ ,/ 目前/ 越来越/ 多/ 的/ 研究/ 关注/ 于/ 如何/ 为/ 应用/ 提供/ 更/ 细粒度/ 的/ 区别/ 化/ 带宽/ 划分/ ,/ 尤其/ 是/ 在/ 资源/ 竞争/ 的/ 场景/ 下/ ./ 近两年来/ 的/ 典型/ 研究/ 包括/ ,/ AF/ -/ QCN/ [/ 16/ ]/ 在/ 维持/ QCN/ 简单/ 性/ 、/ 实时/ 响应/ 能力/ 和/ 稳定性/ 特点/ 的/ 基础/ 上/ ,/ 实现/ 了/ 灵活/ 的/ 流/ 或者/ 流量/ 类/ 的/ 可编程/ 带宽/ 划分/ ./ Fang/ 等/ 人/ [/ 17/ ]/ 提出/ 数据中心/ 网络/ 的/ ECN/ 主动/ 队列/ 管理/ 和/ 基于/ AIMD/ 的/ 限速/ 器/ ,/ 通过/ 区别/ 的/ AIMD/ 参数设置/ 能够/ 实现/ 不同/ 优先级/ 的/ 拥塞/ 控制/ 区分/ ,/ 从而/ 达到/ 区别/ 的/ 带宽/ 利用率/ 控制/ ./ Wilson/ 等/ 人/ [/ 18/ ]/ 认为/ 流/ 的/ 公平性/ 会/ 损害/ 应用/ 的/ 性能/ ,/ 提出/ 了/ 一种/ 在/ 数据中心/ 环境/ 下/ deadline/ 感知/ 的/ 控制协议/ D3/ ./ D3/ 使用/ 显式/ 速率/ 控制/ 为/ 尽快/ 能够/ 结束/ 的/ 任务/ 提供/ 更/ 高/ 的/ 带宽/ ,/ 从而/ 最终/ 优化/ 在/ deadline/ 之前/ 完成/ 的/ 总任务/ 数/ ./ Vattikonda/ 等/ 人/ [/ 19/ ]/ 采用/ 时分/ 多路复用/ (/ TDMA/ )/ 来/ 解决/ 区分/ 服务/ ,/ 通过/ 在/ 商业/ 交换机/ 硬件/ 实现/ 的/ MAC/ 层/ ,/ 以/ TDMA/ 的/ 方式/ 切/ 分流/ 的/ 链路/ 带宽/ 和/ 交换机/ 缓存/ 空间/ ,/ 使得/ 主机/ 能够/ 不/ 需要/ TCP/ 的/ 可靠性/ 和/ 拥塞/ 控制/ 就/ 能够/ 满足/ 带宽/ 、/ 延时/ 等/ 不同/ 的/ 应用/ 需求/ ./ 此外/ ,/ 传统/ 的/ TCP/ 协议/ 无法/ 利用/ 数据中心/ 网络/ 多路径/ 所/ 提供/ 的/ 负载/ 均衡/ 能力/ ,/ 且/ 应用/ 传输/ 对于/ 网络/ 状态/ 的/ 变化/ 缺乏/ 感知/ 能力/ ./ 在/ IB/ 网络/ 传输/ 控制/ 方面/ ,/ Santos/ 等/ 人/ [/ 20/ ]/ 最早/ 对/ 其/ ECN/ 机制/ 进行/ 研究/ ,/ 提出/ 异步/ 的/ 报文/ 标记/ 行为/ 能够/ 改进/ 公平性/ ,/ 放宽/ 的/ 速率/ 增加/ 条件/ 能够/ 改进/ 静态/ 和/ 动态/ 流量/ 场景/ 下/ 的/ 吞吐量/ ./ Pfister/ 等/ 人/ [/ 21/ ]/ 通过/ 模拟/ 验证/ IB/ 拥塞/ 控制/ 如何/ 在/ 胖/ 树结构/ 下/ 解决/ 热点/ 链路/ 的/ 拥塞/ 问题/ ./ Yan/ 等/ 人/ [/ 22/ ]/ 提出/ 在/ IB/ 中/ 改进/ ECN/ 报文/ 标记/ 机制/ 以及/ 新/ 的/ 源/ 响应/ 幂/ 增幂/ 减/ 函数/ ,/ 通过/ 带/ 窗口/ 限制/ 的/ 速率/ 控制/ 减少/ IB/ 网络/ 中有/ 多种/ 优先级/ 类/ 流量/ 的/ 拥塞/ ./ Yan/ 等/ 人/ [/ 23/ ]/ 又/ 提出/ 基于/ 作业/ 阈值/ 的/ 拥塞/ 控制/ 方法/ ,/ 一方面/ 能够/ 减少/ 延时/ 、/ 阻塞/ 概率/ 和/ 平均/ 队列/ 长度/ ,/ 同时/ 提高/ IB/ 网络/ 的/ QoS/ ./ Lugones/ 等/ 人/ [/ 24/ ]/ 通过/ 自/ 适应/ 路由/ 算法/ 将/ 流量/ 分配/ 到/ IB/ 中/ 的/ 多条/ 可/ 选/ 路径/ 以/ 解决/ 拥塞/ 问题/ ,/ 实验/ 验证/ 了/ 该/ 机制/ 同时/ 改进/ 了/ 延时/ 和/ 吞吐量/ ./ Gran/ 等/ 人/ [/ 7/ ]/ 对/ 硬件/ 实现/ 的/ IB/ 拥塞/ 控制/ 进行/ 分析/ 实验/ ,/ 通过/ 调整/ 参数/ 能够/ 有效/ 地/ 解决/ 拥塞/ ,/ 提高/ benchmark/ 性能/ ,/ 并/ 通过/ 解决/ 停车位/ 问题/ 改进/ 公平性/ ./ Gran/ 等/ 人/ [/ 25/ ]/ 还/ 研究/ 了/ 在/ 不/ 丢/ 包/ 网络/ 中/ 拥塞/ 控制/ 、/ 交换机/ 仲裁/ 和/ 公平性/ 之间/ 的/ 关系/ ./ Escudero/ -/ Sahuquillo/ 等/ 人/ [/ 26/ ]/ 通过/ 限制/ 流量/ 注入/ 和/ 隔离/ 拥塞/ 流/ 这/ 两种/ 方法/ 的/ 结合/ 实现/ 对/ 拥塞/ 的/ 快速反应/ ,/ 该/ 机制/ 可扩展性/ 好且/ 对/ 拥塞/ 流/ 公平/ ./ 3IB/ 网络/ 传输/ 控制/ 模型/ 我们/ 认为/ 除了/ 网络/ 本身/ 性能/ 的/ 优势/ ,/ IB/ 中/ 已有/ 的/ 关键技术/ 对/ 数据中心/ 网络/ 扩展/ 传输/ 功能/ 已经/ 提供/ 了/ 各种/ 机制/ 上/ 的/ 支持/ ,/ 满足/ 数据中心/ 网络/ 传输/ 对/ 新型/ 拥塞/ 控制算法/ 、/ 传输/ 性能/ 隔离/ 和/ 传输服务/ 的/ 应用/ 区分/ 能力/ 等/ 要求/ ./ 其中/ ,/ QP/ (/ QueuePair/ )/ 是/ 传输层/ 承上启下/ 的/ 核心/ ,/ IB/ 面向/ 每个/ 单向/ 连接/ 分配/ 发送/ // 接收者/ 对/ QP/ 作为/ 虚拟化/ 的/ 通信/ 端口/ ./ 与/ TCP/ // IP/ 协议/ 相比/ ,/ 其/ 传输层/ 是/ 基于/ 硬件/ 实现/ 的/ ,/ 且/ 完全/ 在/ 用户/ 模式/ 下/ 运行/ ,/ 从而/ 减少/ 了/ 通信协议/ 本身/ 和/ 操作系统/ 引入/ 的/ 开销/ ./ QP/ 在/ 建立/ 时/ 和/ QP/ 号/ 、/ CA/ (/ ChannelAdapters/ )/ 源/ // 目的/ 端口地址/ LID/ (/ LocalIDenti/ -/ fiers/ )/ 、/ SL/ (/ ServiceLevel/ )/ 和/ MTU/ 等/ 信息/ 绑定/ ,/ QP/ 在/ 通信/ 结束/ 后/ 销毁/ ./ 与/ TCP/ 连接/ 不同/ ,/ IB/ 采用/ 基于/ 目的/ LID/ 的/ 确定性/ 路由/ ,/ QP/ 在/ 建立/ 时/ 事实上/ 已经/ 确定/ 了/ 一条/ 源/ 和/ 目的/ 节点/ 之间/ 的/ 路径/ ./ 如图/ 1/ 所示/ ,/ 基于/ IB/ 实现/ 的/ 传输/ 控制/ 模型/ 可以/ 分为/ 用户/ 和/ 网络管理/ 两/ 大部分/ ,/ 用户/ 根据/ 应用/ 需求/ 建立/ 、/ 绑定/ 和/ 销毁/ QP/ ,/ 网络管理/ 负责/ QP/ 的/ 参数/ 及/ Page4/ 其它/ 区/ 分化/ 传输服务/ 的/ 配置/ 接口/ ,/ 同时/ 对/ QP/ 传输/ 质量/ 进行/ 监控/ ,/ 以/ 动态/ 地/ 触发/ QP/ 拥塞/ 控制/ 和/ 应用/ 的/ 多/ QP/ 流量/ 调度/ ./ 我们/ 根据/ 目前/ IB/ 中/ 已有/ 的/ 传输/ 图/ 1IB/ 网络/ 传输/ 控制/ 模型/ (/ 1/ )/ 感知/ 多路径/ 和/ 网络/ 状态/ 的/ 传输/ ./ 首先/ ,/ IB/ 网络/ 的/ 每个/ 端口/ 能够/ 虚拟化/ 出/ 2LMC/ (/ LIDMaskControl/ )/ 个/ 不同/ 的/ LID/ ,/ 在/ 转发/ 的/ 时候/ 对应/ 2LMC/ 条/ 不同/ 的/ 路径/ ,/ 如图/ 1/ 中/ p1/ ,/ p2/ 分别/ 对应/ A/ 、/ B/ 之间/ 数据传输/ 两个/ QP/ 连接/ 的/ 不同/ 路径/ ./ IB/ 的/ 子网/ 建立/ 过程/ ,/ 集中/ 控制器发送/ 探测/ 数据/ 报文/ ,/ 通过/ 节点/ 和/ 端口/ 逐步/ 的/ 自我/ 链式反应/ 发现/ 网络拓扑/ 并/ 分配/ LID/ 地址/ ,/ 这/ 使得/ 应用/ 能够/ 通过/ 管理者/ 的/ 接口/ 获得/ 网络拓扑/ 及/ 路由/ 信息/ ,/ 如/ 应用/ n/ 能够/ 感知/ 两条/ 传输/ 路径/ ./ 多路径/ 提供/ 了/ 更加/ 灵活/ 的/ 流量/ 调度/ ,/ 每个/ 应用/ 能够/ 利用/ 端口/ 的/ 多个/ QP/ 进行/ 传输/ ,/ 如/ p1/ 发生/ 拥塞/ 时/ ,/ ECN/ 反馈/ 会/ 使得/ p1/ 传输/ 流量/ 下降/ ,/ 而/ 更/ 多/ 地/ 切换/ 到/ p2/ 上/ ,/ 通过/ 同时/ 多路径/ 的/ 动态/ 负载/ 均衡/ 实现/ 了/ 带宽/ 分配/ 下/ 的/ 可靠/ 网络/ 传输/ ./ 显式/ 拥塞/ 通告/ ECN/ 为端/ 到/ 端/ 传输/ 本身/ 提供/ 了/ 感知/ 网络/ 拥塞/ 的/ 能力/ ,/ 通过/ 对/ 报文/ 的/ 标记/ 和/ 拥塞/ 反馈/ 使得/ 源/ 发送者/ 能够/ 了解/ 拥塞/ 的/ 发生/ 及/ 程度/ ,/ 根据/ 相应/ 的/ 机制/ 降速/ 以/ 避免/ 拥塞/ 瓶颈/ 点/ ./ 此外/ ,/ IB/ 中/ 还/ 提供/ 了/ 大量/ 关于/ 网络/ 状态/ 的/ 信息/ ,/ 如/ 接口/ 流量/ 的/ 报文/ 计数器/ ,/ 主要/ 是/ 通过/ SA/ (/ SubnetAdministration/ )/ 建立/ 的/ 子网/ 数据库/ 存储/ 子网/ 的/ 状态/ 信息/ ./ SA/ 还/ 通过/ 路径/ 记录/ 的/ 数据结构/ 维护/ 路径/ 信息/ ./ 当/ 端点/ 试图/ 建立/ 一个/ QP/ 时/ 需向/ SA/ 发送/ 请求/ 获得/ 该/ 路径/ 信息/ ,/ 还/ 可以/ 通过/ SA/ 与/ QoS/ 管理器/ 的/ 交互/ 得知/ 路径/ 的/ QoS/ 是否/ 能够/ 满足/ 需求/ ./ (/ 2/ )/ 新型/ 传输/ 模式/ 和/ 拥塞/ 控制/ 机制/ ./ 数据中心/ 应用/ 的/ 性能/ 要求/ 越来越/ 高/ ,/ 端/ 节点/ 开销/ 已经/ 成为/ 通信/ 的/ 瓶颈/ ,/ IB/ 通过/ 无/ 连接/ (/ 数据/ 报/ )/ // 面向/ 连接/ 的/ 传输/ 和/ 可靠/ // 不/ 可靠/ 传输/ 的/ 4/ 种/ 组合/ 定/ 机制/ 提出/ 了/ 其/ 传输/ 控制/ 模型/ ,/ 从/ 网络/ 、/ 传输/ 和/ 应用/ 三者/ 的/ 角度/ 扩展/ 原有/ 机制/ ,/ 该/ 模型/ 提供/ 对/ 以下/ 3/ 个/ 方面/ 的/ 支持/ :/ 义/ 发送/ 和/ 接受/ QP/ 这/ 4/ 种/ 不同/ 交互/ 模式/ ./ 应用/ 在/ 建立/ QP/ 之前/ 首先/ 选择/ 适合/ 的/ 传输/ 模式/ ,/ IB/ 中/ 硬件/ 支持/ 的/ 传输/ 模式/ 与/ TCP/ 和/ UDP/ 相比/ 能够/ 提供/ 更/ 高/ 的/ 传输/ 性能/ ./ IB/ 拥塞/ 控制/ 采用/ 显式/ 拥塞/ 标记/ 的/ ECN/ 机制/ ,/ IB/ 交换机/ 通过/ 监测/ 是否/ 超过/ 阈值/ 感知/ 拥塞/ ,/ 避免/ 了/ 传统/ TCP/ 协议/ 在/ IB/ 这种/ 极低/ 延时/ 网络/ 中/ 对/ 延时/ 反应/ 不/ 及时/ 的/ 问题/ ./ 当/ 报文/ 到达/ 目的/ 节点/ 的/ 路径/ 上/ 遇到/ 拥塞/ (/ 如图/ 1IB/ 交换机/ R/ )/ ,/ 其/ 报文/ FECN/ (/ ForwardECN/ )/ 位会/ 进行/ 标记/ ,/ 在/ 接收端/ 端口/ 感知/ 拥塞/ 标记/ 之后/ 会/ 通过/ ACK/ 或者/ CNP/ 报文/ 中/ 的/ BECN/ (/ BackwardECN/ )/ 位/ 通知/ 相应/ 的/ 源端/ ,/ 使/ 其/ 能够/ 发现/ 到/ 前面/ 发送/ 的/ 报文/ 在/ 该/ VL/ 下/ 遇到/ 了/ 拥塞/ ./ IB/ 采用/ PFC/ (/ PriorityFlowControl/ )/ ,/ 在/ 每个/ 优先级/ ,/ 如果/ 上游/ 的/ 邻居/ 交换机/ 没有/ 接收缓冲区/ 会/ 发送/ 控制/ 帧/ 停止/ 本地/ 交换机/ 数据/ 发送/ ,/ 从而/ 避免/ 丢包/ 对于/ 应用/ 性能/ 的/ 严重/ 影响/ ./ 但是/ 链路层/ 信用/ 量/ 的/ 耗尽/ 会/ 造成/ 头/ 阻塞/ 问题/ ,/ 进而/ 造成/ 拥塞/ 传播/ ,/ 基于/ ECN/ 的/ 拥塞/ 控制/ 机制/ 在/ 数据中心/ 环境/ 下/ 实现/ 传统/ 公平/ 、/ 收敛/ 的/ 拥塞/ 控制/ 同时/ 能够/ 避免/ 拥塞/ 传播/ 对于/ 无辜/ 流/ 的/ 影响/ [/ 7/ ,/ 25/ ]/ ./ (/ 3/ )/ 基于/ QoS/ 管理/ 的/ 区别/ 化/ 传输服务/ 策略/ 配置/ ./ 目前/ ,/ IB/ 中/ 尚未/ 定义/ 如何/ 支持/ 区分/ 的/ 应用服务/ 策略/ 及/ 传输/ 配置/ ,/ IB/ 提供/ 集中/ 的/ 子网/ 管理/ 结构/ ,/ 能够/ 通过/ 在/ 其中/ 增加/ 资源分配/ 功能/ 实现/ 高级/ 的/ 应用/ 优化/ 目标/ ./ 从/ 数据中心/ 应用/ 自身/ 流量/ 特性/ 和/ 不同/ 的/ QoS/ 需求/ 出发/ 要求/ 传输层/ 协议/ 提供/ 区别/ 的/ 服务/ 策略/ ./ 从/ 用户/ 之间/ 的/ 竞争/ 关系/ 出发/ ,/ 它们/ 共享/ 同一个/ 数据中心/ 网络资源/ ,/ 某些/ 用户/ 可能/ 通过/ 建立/ 大量/ 连接/ Page5/ 等/ 方式/ 恶意/ 侵占/ 网络带宽/ ,/ 传输层/ 需要/ 实现/ 用户/ 之间/ 的/ 性能/ 隔离/ ./ 从/ 应用/ 的/ 相对/ 优先级/ 出发/ ,/ 数据中心/ 通过/ 虚拟化/ 为/ 多个/ 租户/ 提供/ 服务平台/ ,/ 区别/ 收费/ 需要/ 传输层/ 为/ 租户/ 提供/ 不同/ 质量/ 的/ 网络服务/ ./ 如图/ 1/ 所示/ ,/ IB/ 协议/ 中/ 已经/ 定义/ 的/ QoS/ 管理器/ 实现/ 了/ 针对/ SA/ 中/ 定义/ 的/ 网络/ 和/ 路径/ 监控/ 信息/ 的/ 主动/ 控制/ ./ 当/ 服务质量/ 达/ 不到/ 时/ ,/ QoS/ 管理/ 调整/ 配置/ 和/ 策略/ 以/ 满足/ 所/ 需要/ 的/ 服务/ ,/ 如/ 通过/ 与/ 子网/ 管理器/ 的/ 交互/ 调整/ 某个/ 端口/ 的/ VL/ (/ VirtualLanes/ )/ 仲裁/ 表/ ./ 这种/ 主动/ 的/ 调整/ 将/ 网络/ 状态/ 与/ 资源分配/ 结合/ 起来/ ,/ 决定/ 最终/ 的/ 带宽/ 分配/ 策略/ 并/ 配置/ 到/ 拥塞/ 控制/ 和/ 流量/ 调度/ 模块/ ,/ 形成/ 了/ 一个/ 闭环/ 的/ 动态/ 控制系统/ ./ IB/ 提供/ 了/ 两种/ 传输/ 质量/ 的/ 配置/ 接口/ ,/ 首先/ 在/ 网络/ 层面/ ,/ 每个/ 物理/ 链路/ 上/ 虚拟化/ 多个/ VL/ ,/ 代表/ 链路/ 级/ 的/ 发送/ 接收缓冲区/ 对/ ,/ 每个/ VL/ 有/ 各自/ 的/ 流控/ 策略/ 和/ 加权/ 优先级/ ,/ 采用/ 高低/ 两级/ 抢占/ 式调度/ ,/ 而/ 同一/ 优先级/ 的/ VL/ 能够/ 进一步/ 区分/ 调度/ ,/ 从而/ 获得/ 不同/ 的/ 带宽/ 性能/ ./ 如图/ 1/ 所示/ ,/ 链路/ 级/ 的/ 性能/ 隔离/ 是/ 通过/ SL/ 到/ VL/ 的/ 匹配/ 策略/ 以及/ VL/ 基于/ 不同/ 加权/ 值/ 的/ 仲裁/ 调度/ 来/ 实现/ 的/ ./ 在/ 用户/ 节点/ 的/ 端/ 到/ 端/ 传输/ 层面/ ,/ IB/ 的/ QP/ 为/ 应用/ 实现/ 了/ 抽象/ 的/ 虚拟/ 通信接口/ ,/ 是/ 应用/ 竞争/ 网络资源/ 以及/ 进行/ 拥塞/ 控制/ 的/ 实体/ ,/ 每个/ QP/ 的/ CCT/ (/ CongestionControlTable/ )/ 是/ 拥塞/ 控制/ 的/ 核心/ ,/ 如何/ 通过/ CCT/ 表/ 相关/ 参数/ 的/ 配置/ 实现/ 区分/ 的/ 应用服务/ 策略/ 是/ 下/ 一节/ 的/ 研究/ 重点/ ./ 综上/ ,/ IB/ 协议/ 定义/ 了/ 比/ 传统/ 以太网/ 加/ TCP/ // IP/ 模式/ 更加/ 强大/ 的/ 传输层/ 功能/ ,/ 对/ 实现/ 网络/ 可/ 感知/ 、/ 应用/ 可/ 区分/ 、/ 策略/ 可/ 管理/ 的/ 新型/ 传输/ 控制/ 模型/ 供/ 了/ 强大/ 的/ 支持/ ./ 4/ 基于/ 拥塞/ 控制/ 的/ 区别/ 化/ IB/ 带宽/ 划分/ 4.1/ IB/ 拥塞/ 控制算法/ 源/ 端的/ 限速/ 策略/ 依赖于/ 每个/ QP/ 的/ CCT/ 表/ ,/ 其中/ 可以/ 配置/ 的/ 相关/ 参数/ 如表/ 1/ 所示/ ,/ CCT/ 的/ 表项/ 为/ IRD/ (/ InjectionRateDelay/ )/ ,/ 它/ 定义/ 了/ 该/ QP/ 向/ 网络/ 中/ 注入/ 报文/ 的/ 时间/ 间隔/ ./ 表项/ IRD/ 在/ CCT/ 表中/ 按照/ 由小至/ 大/ 进行/ 排列/ ,/ 当/ 发送/ 端/ 收到/ BECN/ 时/ ,/ 增加/ CCT/ 表/ 的/ 指针/ CCTI/ (/ CCTIndex/ )/ 指向/ 更大/ 的/ CCT/ 表项/ ,/ 从而/ 降低/ 报文/ 发送/ 速率/ ./ 每次/ 索引/ CCTI/ 增加/ 的/ 单位/ 值/ 是/ CCTI/ _/ Increase/ ,/ 该值/ 事实上/ 实现/ 了/ 类似/ TCP/ 在/ 面对/ 拥塞/ 时/ 的/ 快速/ 回退/ 策略/ ,/ 且/ 通过/ 配置/ 该/ 参数/ 能够/ 控制/ QP/ 发送/ 速率/ 回退/ 的/ 快慢/ 程度/ ./ 为了/ 限制/ 速率/ 变化/ 范围/ ,/ CCTI/ 定义/ 了/ 下界/ CCTI/ _/ Min/ 和/ 上界/ CCTI/ _/ Limit/ ,/ CCTI/ 初始化/ 之后/ 指向/ CCTI/ _/ Min/ ,/ CCTI/ _/ Min/ 的/ 缺省值/ 为/ 0/ ,/ 即/ 不/ 对/ 报文/ 发送/ 速率/ 做/ 任何/ 限制/ ,/ 而/ CCTI/ _/ Limit/ 指向/ 的/ 表项/ 是/ 报文/ 发送/ 的/ 最大/ 间隔/ 即/ 速率/ 的/ 最小值/ ./ CCT/ 参数/ CCTItemCCTI/ _/ IncreaseCCTI/ 每次/ 增加/ 的/ 单位/ 量/ 1CCTI/ _/ LimitCCTI/ 的/ 上界/ CCTI/ _/ MinCCTI/ 的/ 下界/ CCTI/ _/ Timer/ 恢复/ 速率/ 的/ 超时/ 定时器/ 150/ 拥塞/ 控制/ 的/ 另/ 一个/ 问题/ 是/ 在/ 拥塞/ 缓解/ 之后/ 如何/ 通过/ 提高/ 发送/ 速率/ 来/ 充分利用网络/ 带宽/ 资源/ ,/ 其中/ 发送/ 速率/ 的/ 增加/ 是/ 基于/ 超时/ 机制/ ,/ 当/ 在/ CCTI/ _/ Timer/ 时间/ 内/ 没有/ 收到/ 拥塞/ 控制/ 报文/ ,/ 那么/ 相应/ QP/ 流/ 的/ CCTI/ 值/ 减少/ 1/ ,/ 相应/ 的/ IRD/ 值得/ 到/ 增加/ ,/ 提高/ 了/ 源/ 发送/ 速率/ ,/ 直到/ CCTI/ 减少/ 到/ 0/ 不/ 限制/ 报文/ 注入/ 速率/ ./ CCTI/ _/ Timer/ 参数/ 的/ 设置/ 事实上/ 决定/ 了/ 流量/ 的/ 波动/ 快慢/ ,/ 过/ 小/ 的/ CCTI/ _/ Timer/ 会/ 造成/ 流量/ 的/ 波动/ ,/ 反之/ 如果/ 偏大则/ 使得/ 拥塞/ 控制/ 流量/ 快速/ 下降/ 之后/ 难以/ 及时/ 恢复/ ,/ CCT/ 管理/ 配置/ 算法/ 如下/ ./ 算法/ 1/ ./ CCT/ 管理/ ./ 输入/ :/ CCTConfigurationMAD/ ,/ PacketwithBECN/ 输出/ :/ UpdatedIRD1/ ./ Initialize/ :/ ManagerdefinesCCconfigurationfile2/ ./ SMparsesitandsendMADtoconfigureCC3/ ./ StartTimer/ =/ 04/ ./ ifreceiveBECN/ &&/ CCTI/ </ CCTI/ _/ Limitthen5/ ./ CCTI/ =/ CCTI/ +/ CCTI/ _/ Increase6/ ./ IRD/ =/ CCT/ [/ CCTI/ ]/ 7/ ./ Timer/ =/ 08/ ./ endif9/ ./ ifTimer/ =/ CCTI/ _/ Timer/ &&/ CCTI/ >/ CCTI/ _/ Minthen10/ ./ CCTI/ =/ CCTI/ -/ 111/ ./ IRD/ =/ CCT/ [/ CCTI/ ]/ 12/ ./ Timer/ =/ 013/ ./ endif14/ ./ foreverytimeunit15/ ./ Timer/ =/ Timer/ +/ 1/ 源/ 端的/ 限速/ 是/ 累积/ 一定/ 数量/ 的/ 报文/ (/ 如/ IB/ 规范/ 中/ 定义/ 4/ 个/ [/ 2/ ]/ )/ 进行/ 报文/ 间隔/ 计算/ ,/ 如果/ 报文/ 的/ 间隔/ 小于/ CCT/ [/ CCTI/ ]/ ,/ 则/ 会/ 在/ 判定/ 后/ 等待/ 发送/ ,/ 从而/ 保证/ 源/ 的/ 发送/ 速率/ 不/ 超过/ CCT/ 表/ 的/ 定义/ ./ Page6/ 算法/ 2/ ./ 源/ 发送/ 限速/ ./ 输入/ :/ IRD/ 输出/ :/ Controlledpackettransmission1/ ./ Initialize/ :/ arb/ _/ pkt/ _/ num/ =/ 02/ ./ last/ _/ time/ =/ 03/ ./ While/ (/ packet/ _/ to/ _/ send/ )/ 4/ ./ arb/ _/ pkt/ _/ num/ ++/ 5/ :/ if/ (/ arb/ _/ pkt/ _/ num/ =/ aggregate/ )/ 6/ ./ if/ (/ CCT/ [/ CCTI/ ]/ </ (/ current/ _/ time/ -/ last/ _/ time/ )/ )/ 7/ ./ nextaggregatepacketstransmissionstarts8/ ./ else9/ ./ WaitforCCT/ [/ CCTI/ ]/ -/ (/ current/ _/ time/ -/ last/ _/ 10/ ./ last/ _/ time/ =/ current/ _/ time11/ ./ arb/ _/ pkt/ _/ num/ =/ 012/ ./ endif13/ ./ endwhile/ 对于/ FECN/ 标记/ ,/ 交换机/ 主要/ 有/ 两个/ 参数/ ,/ 一个/ 是/ 标记/ 的/ 阈值/ ,/ 另/ 一个/ 是/ 标记/ 报文/ 的/ 比率/ ./ 根据/ IB/ 规范/ 的/ 定义/ ,/ IB/ 交换机/ 的/ 拥塞/ 阈值/ 从/ 0/ ~/ 15/ ,/ 0/ 表示/ 没有/ 拥塞/ 标识/ ,/ 1/ 表示/ 非常/ 高/ 的/ 阈值/ ,/ 拥塞/ 容易/ 发生/ 传播/ ,/ 而/ 15/ 代表/ 非常低/ 的/ 阈值/ ,/ 代表/ 即使/ 互联/ 拥塞/ 程度/ 不高/ 也/ 可能/ 发生/ 标记/ 降速/ ,/ 降低/ 拥塞/ 传播/ 的/ 可能性/ ./ 其中/ 给出/ 的/ 参考/ 是/ 15/ 表示/ 256Bytes/ 的/ 报文/ ,/ 报文/ 之间/ 的/ 间隔/ 为/ 176Bytes/ ,/ 从而/ 达到/ 60/ %/ 的/ 带宽/ 占用率/ ./ 权重/ 从/ 15/ ~/ 1/ 表示/ 从/ 平均/ 60/ %/ 的/ 带宽/ 占用/ 以上/ 的/ 线性/ 增加/ ,/ 阈值/ 设置/ 与/ 交换机/ 体系结构/ 相关/ ./ 4.2/ 区别/ 化/ IB/ 带宽/ 划分/ 相关/ 研究/ [/ 7/ ,/ 25/ ]/ 证明/ 在/ IB/ 网络/ 中若/ 采用/ 相同/ 的/ CCT/ 参数/ 配置/ ,/ 各个/ QP/ 之间/ 能够/ 达到/ 很/ 好/ 的/ 流级/ 公平性/ ,/ 即/ 各个/ QP/ 应当/ 处于/ 相同/ 的/ CCTI/ 值/ ./ 而/ 通过/ 对/ 每个/ QP/ 配置/ 不同/ 的/ CCT/ 相关/ 参数/ 能够/ 实现/ 区别/ 化/ 的/ 传输服务/ 质量/ ./ 定理/ 1/ ./ 基于/ ECN/ 的/ IB/ 拥塞/ 机制/ ,/ 对于/ 任意/ qpi/ 和/ qpj/ ,/ 通过/ 设置/ CCTI/ _/ Increasei/ =/ N/ ×/ CCTI/ _/ Increasej/ ,/ 发生/ 拥塞/ 时/ 两条/ 流/ 稳定/ 之后/ 的/ 发送窗口/ wi/ ,/ k/ :/ wj/ ,/ k/ =/ 1/ :/ N/ ./ 证明/ ./ 对于/ 当前/ 热点/ 链路/ 上/ 的/ 各条/ 流/ i/ (/ i/ =/ 1/ ,/ 2/ ,/ 3/ ,/ …/ ,/ n/ )/ 在/ 时间/ 周期/ k/ 上/ 的/ 报文/ 最小/ 发送/ 间隔/ 限制/ 为/ CCT/ [/ CCTIi/ ,/ k/ ]/ =/ IRDi/ ,/ k/ ./ 设/ Δ/ t/ 周期/ 足够/ 短/ 使得/ 可以/ 认为/ 带宽/ 为/ 某个/ 固定值/ ,/ 第/ k/ 个/ 周期/ 的/ 时间/ tk/ =/ k/ ×/ Δ/ t/ (/ k/ =/ 0/ ,/ 1/ ,/ …/ ,/ m/ -/ 1/ )/ ./ 设/ 平均/ 报文/ 长度/ 为/ l/ ,/ qpi/ 在/ 时间/ k/ 的/ 发送窗口/ 大小/ 是/ wi/ ,/ k/ =/ l/ // CCT/ [/ CCTIi/ ,/ k/ ]/ ./ 设/ α/ 为/ 交换机/ 采取/ FECN/ 的/ 标记/ 报文/ 比例/ ,/ 对于/ 接受/ 端的/ CA/ 网卡/ ,/ 每/ C/ 个/ 报文/ 采用/ ACK/ 或者/ 发送/ CN/ 实现/ BECN/ 携带/ 拥塞/ 标记/ 信息/ ,/ 则/ 可得/ Δ/ CCTIi/ ,/ k/ =/ CCTI/ _/ Increasei/ ×/ BECNi/ ,/ k/ ,/ BECNi/ ,/ k/ =/ (/ α/ ×/ wi/ ,/ k/ )/ // (/ C/ ×/ l/ )/ ,/ BECNi/ ,/ k/ 代表/ QP/ 源/ 收到/ 的/ BECN/ 报文/ 数/ ,/ Δ/ CCTIi/ ,/ k/ 是/ 在/ 时间/ 周期/ k/ 之后/ CCTI/ 的/ 变化/ 量/ ./ 下/ 一/ 周期/ 的/ 发送窗口/ wi/ ,/ k/ +/ 1/ =/ l/ // CCT/ [/ CCTIi/ ,/ k/ +/ Δ/ CCTIi/ ,/ k/ ]/ ./ 对于/ / qpi/ ,/ qpj/ ,/ 如果/ wj/ ,/ k/ </ N/ ×/ wi/ ,/ k/ ,/ 由于/ CCTI/ _/ Increasei/ =/ N/ ×/ CCTI/ _/ Increasej/ ,/ Δ/ CCTIj/ ,/ k/ =/ CCTI/ _/ Increasei/ ×/ BECNi/ ,/ k/ Δ/ CCTIi/ ,/ k/ 满足/ l/ // CCT/ [/ a/ ]/ -/ l/ // CCT/ [/ a/ +/ x/ ]/ >/ l/ // CCT/ [/ b/ ]/ -/ l/ // CCT/ [/ b/ +/ x/ ]/ (/ a/ </ b/ )/ 表示/ CCT/ 表/ 前端/ 的/ 表项/ CCT/ [/ a/ ]/ 导致/ 的/ 限速/ 变化/ 幅度/ 大于/ 后/ 端的/ 表项/ CCT/ [/ b/ ]/ 导致/ 的/ 限速/ 变化/ ,/ 由于/ CCTIi/ ,/ k/ </ CCTIj/ ,/ k/ ,/ 则/ l/ // CCT/ [/ CCTIi/ ,/ k/ ]/ -/ l/ // CCT/ [/ CCTIi/ ,/ k/ +/ Δ/ CCTIi/ ,/ k/ ]/ >/ l/ // CCT/ [/ CCTIj/ ,/ k/ ]/ -/ l/ // CCT/ [/ CCTIj/ ,/ k/ +/ Δ/ CCTIi/ ,/ k/ ]/ ,/ 由于/ 式/ (/ 1/ )/ 中/ Δ/ CCTIi/ ,/ k/ >/ Δ/ CCTIj/ ,/ k/ ,/ 可得/ CCT/ [/ CCTIi/ ,/ k/ ]/ -/ lCCT/ [/ CCTIj/ ,/ k/ ]/ -/ l/ Δ/ wi/ ,/ k/ >/ Δ/ wj/ ,/ k/ ,/ 对于/ wj/ ,/ k/ >/ N/ ×/ wi/ ,/ k/ 的/ 情况/ ,/ 与/ 式/ (/ 1/ )/ 同理/ Δ/ CCTIi/ ,/ k/ // Δ/ CCTIj/ ,/ k/ </ 1/ ,/ 可证/ Δ/ wi/ ,/ k/ </ Δ/ wj/ ,/ k/ ./ 这/ 使得/ qpi/ 和/ qpj/ 有/ 不同/ 的/ 降速/ 快慢/ 直到/ 它们/ 稳定/ 在/ 汇聚/ 点/ wj/ ,/ k/ =/ N/ ×/ wi/ ,/ k/ ./ 定理/ 1/ 说明/ 各个/ 流通/ 过/ 呈/ 比例/ 的/ CCTI/ _/ Increase/ 配置/ 能够/ 达到/ 成/ 比例/ 的/ 带宽/ 划分/ ./ 如果/ 链路/ 上/ 的/ 总流量/ 小于/ 带宽/ B/ ,/ 那么/ 对于/ 流/ i/ ,/ 每/ 经过/ Ti/ 超时/ 周期/ 之后/ 流/ i/ 的/ CCTIi/ 会减/ 1/ ./ S/ 为/ 拥塞/ 控制/ 的/ 阈值/ ,/ 而/ s/ 表示/ 超时/ 增速/ 开始/ 时/ 的/ 缓冲区/ 长度/ ./ 超时/ 的/ 速率/ 恢复/ 过程/ 如下/ 式/ 所示/ :/ i/ =/ 1/ ∑/ T/ // Ti/ -/ 1/ ∑/ n/ 该/ 速率/ 增加/ 过程/ 使得/ 两条/ 流/ i/ ,/ j/ 的/ 报文/ 间隔/ 比/ 从/ CCTI/ [/ CCTIi/ ]/ // CCTI/ [/ CCTIj/ ]/ 变为/ CCTI/ [/ CCTIi/ -/ (/ T/ // Ti/ -/ 1/ )/ ]/ // CCTI/ [/ CCTIj/ -/ (/ T/ // Tj/ -/ 1/ )/ ]/ ,/ 当为/ CCTI/ 较大/ 流/ 设定/ 短/ 的/ 超时/ 时间/ 能够/ 较/ 好/ 地/ 维护/ 原有/ 的/ 带宽/ 比例/ 关系/ ./ 能够/ 通过/ 式/ (/ 2/ )/ 求/ 出/ 经过/ 的/ 超时/ 增速/ 时间/ 周期/ ./ 除了/ CCTI/ _/ Increase/ 外/ ,/ CCT/ 表/ 指针/ CCTI/ _/ Min/ 和/ CCTI/ _/ Limit/ 之间/ 的/ 值/ 表示/ 了/ 报文/ 间隔/ 的/ 变化/ 范围/ ,/ 是/ 实现/ 区别/ 化/ 配置/ 的/ 重要/ 参数/ ./ CCT/ [/ CCTI/ _/ Min/ ]/ 事实上/ 代表/ 报文/ 之间/ 的/ 最小/ 间隔/ ,/ 如/ CCT/ [/ 0/ ]/ 默认/ Page7CCTI/ _/ Minj/ ./ CCTI/ _/ Limitj/ ./ 值为/ 0/ ,/ 说明/ 当前/ 没有/ 任何/ 限速/ ,/ 其它/ 情况/ 下/ 发送/ 的/ 最高/ 速率/ 为/ l/ // CCT/ [/ CCTI/ _/ Min/ ]/ ,/ 而/ 发送/ 的/ 最低/ 速率/ 控制/ 在/ l/ // CCT/ [/ CCTI/ _/ Limit/ ]/ ./ CCTI/ _/ Min/ 和/ CCTI/ _/ Limit/ 为流/ 设定/ 的/ 阈值/ ,/ 导致/ 流/ 的/ 降速/ 和/ 升速/ 受到限制/ ./ 通过/ 设定/ 该值/ 能够/ 限制/ 当前/ QP/ 吞吐量/ 的/ 变化/ 范围/ ,/ 从而/ 达到/ 区/ 分化/ 的/ 带宽/ 分配/ ./ 如果/ CCT/ 表/ 的/ 表项/ 配置/ 相同/ ,/ 可以/ 得到/ 以下/ 结论/ ./ 对于/ / qpi/ ,/ qpj/ ,/ 若/ 其它/ 参数/ 相同/ 则/ 满足/ 以下/ 条件/ :/ (/ 1/ )/ 如果/ CCTIi/ </ =/ CCTI/ _/ Minj/ 则/ CCTIj/ =/ (/ 2/ )/ 如果/ CCTIi/ >/ =/ CCTI/ _/ Limitj/ 则/ CCTIj/ =/ (/ 3/ )/ 其它/ ,/ 则/ CCTIj/ =/ CCTIi/ ./ CCTI/ _/ Min/ 实现/ 对/ 每个/ 网卡/ 的/ 限速/ 阈值/ ,/ 如/ CCTI/ _/ Min/ 设置/ 为/ 1/ 能够/ 使得/ 流/ 初始/ 的/ 发送/ 间隔/ 指向/ CCT/ 表第/ 2/ 项/ ,/ 这样/ 即使/ 不/ 发生/ 拥塞/ ,/ 报文/ 发送/ 的/ 间隔/ 也/ 被/ 固定/ 地/ 限制/ 在/ 最小/ ,/ 为/ CCT/ [/ 1/ ]/ ,/ 从而/ 得到/ 网卡/ 限速/ 的/ 大小/ ./ 分区/ 段/ 的/ CCT/ 配置/ 事实上/ 实现/ 了/ 静态/ 的/ 报文/ 发送/ 速率/ 范围/ ./ 以上/ 分析/ 了/ 为/ 每个/ QP/ 配置/ 不同/ 的/ 拥塞/ 控制参数/ (/ 如/ CCTI/ _/ Increase/ )/ 能够/ 达到/ 区别/ 化/ 的/ 端/ 到/ 端/ 网络带宽/ 资源/ 划分/ ,/ 从而/ 实现/ 传输/ 性能/ 隔离/ 和/ 基于/ 应用层/ 需求/ 的/ 传输/ 机制/ 等/ 目标/ ,/ 如/ 根据/ 各个/ 租户/ 的/ 加权/ 进行/ 成/ 比例/ 的/ 分配/ ,/ 即/ 某个/ 租户/ 无论/ 建立/ 多少/ 流/ ,/ 它/ 所/ 获得/ 的/ 带宽/ 应当/ 是/ 对于/ 当前/ 链路/ 的/ 合理/ 加权/ 划分/ ./ 如下/ 所示/ ,/ 对于/ 瓶颈/ 链路/ 上/ 存在/ 的/ 租户/ t/ ,/ 其/ 获得/ 的/ 带宽/ Bt/ 为/ Bw/ ×/ wt/ ∑/ t/ 当前/ 该/ 链路/ 上/ 租户/ t/ 所有/ 流/ 的/ 带宽/ 求和/ 应当/ 满足/ 其/ 带宽/ 的/ 分配/ ./ 5/ 初步/ 实验/ 结果/ 为了/ 对/ IB/ 在/ 数据中心/ 网络/ 中/ 应用/ 进行/ 研究/ ,/ 验证/ 基于/ 拥塞/ 控制/ 的/ 区别/ 化/ 网络带宽/ 分配/ ,/ 我们/ 搭建/ 了/ 真实/ 的/ IB/ 实验/ 环境/ ./ IB/ 交换机/ IBS108Q/ 和/ HCA/ 网卡/ 是/ 由/ 国防科技大学/ 课题组/ 基于/ Mellanox/ 芯片/ SwitchX/ 和/ ConnectX/ 自主/ 设计/ 研发/ 的/ ,/ 端口/ 支持/ 最高/ 速率/ QDR/ (/ 40Gbps/ )/ ,/ 设备/ 均/ 支持/ 拥塞/ 控制/ ./ 实验/ 节点/ 包括/ 6/ 台宝德/ PowerLeaderPR1760T/ 服务器/ ,/ 服务器/ 配置/ 为/ IntelXeonE5540/ 双核/ CPU/ 、/ 16GBECCRAM/ 、/ 2/ 个/ 8xPCIe2/ ./ 0/ 插槽/ 、/ 400GB/ 硬盘/ ,/ 所有/ 服务器/ 均/ 运行/ RedHatLinux6/ ./ 1x8664/ 位/ 操作系统/ ,/ 其上/ 采用/ 开源/ OFED/ (/ OpenFabricsEnterpriseDistribution/ )/ 1.5/ ./ 4/ 驱动/ 和/ 管理/ HCA/ 设备/ ./ OFED/ 的/ 最新/ 诊断/ 包/ infiniband/ -/ diags/ -/ 1.6/ ./ 0/ 提供/ 了/ ibccquery/ 和/ ibccconfig/ 接口/ 来/ 读写/ 拥塞/ 控制参数/ ./ 我们/ 主要/ 利用/ ibccconfig/ 来/ 根据/ 不同/ QP/ 连接/ 配置/ 各自/ 的/ CCTI/ _/ Increase/ 参数/ ./ IB/ 拥塞/ 控制/ 实验/ 场景/ 如图/ 2/ 所示/ ,/ 我们/ 设计/ 实现/ 了/ 一个/ 集中控制/ 的/ 流量/ 行为/ 发生器/ ,/ 能够/ 控制/ 其它/ 分布式/ 的/ 客户端/ 建立/ TCP/ 连接/ ,/ 并/ 根据/ 来自/ 集中/ 控制器/ 的/ 命令/ 向/ 目的/ 端/ 发送/ 报文/ ,/ 类似/ iperf/ 以/ 尽可能/ 大/ 的/ 速率/ 发送/ 报文/ ./ 由于/ TCP/ 反应/ 较慢/ ,/ 在/ IB/ 拥塞/ 机制/ 工作/ 的/ 情况/ 下/ ,/ TCP/ 拥塞/ 控制/ 事实上/ 不/ 发挥作用/ [/ 7/ ]/ ./ 集中/ 控制器/ 通过/ 一个/ 配置文件/ ,/ 设置/ 客户端/ 执行/ 的/ 命令/ ,/ 如/ 连接/ 开始/ // 持续/ 的/ 时间/ ,/ 被控/ 客户端/ // 连接/ 目的/ 端的/ 地址/ ./ 链路/ 实际/ 工作/ 速率/ 均/ 设置/ 为/ 10Gbps/ ./ 在/ 第/ 1/ 个/ 实验/ 中/ ,/ 为了/ 验证/ QP/ 的/ 公平性/ ,/ 由/ 4/ 台/ 服务器/ 向/ 服务器/ C/ 发送/ 报文/ ,/ 最后/ 一跳/ 成为/ 瓶颈/ ,/ 该/ 模式/ 符合/ 目前/ 在/ 数据中心/ 网络/ 中/ 常见/ 的/ Incast/ [/ 8/ -/ 9/ ]/ 问题/ 场景/ ./ QP/ 流/ 每隔/ 1s/ 建立/ 连接/ ,/ 持续/ 5s/ 时间/ ,/ 按照/ 100ms/ 的/ 粒度/ 统计/ 吞吐量/ ./ 如图/ 3/ (/ a/ )/ ,/ 如果/ 拥塞/ 控制/ 关闭/ ,/ 由于/ 著名/ 的/ 停车位/ 问题/ [/ 27/ -/ 28/ ]/ ,/ 从/ 3s/ ~/ 5s/ ,/ 流量/ A/ →/ C/ 加/ B/ →/ C/ 的/ 和/ 等于/ D/ →/ C/ 或者/ E/ →/ C/ 的/ 流量/ ./ 直到/ A/ →/ C/ 传输/ 结束/ 才/ 达到/ 公平/ 共享/ ./ 如图/ 3/ (/ b/ )/ ,/ 拥塞/ 控制/ 打开/ 后/ 虽然/ 导致/ 吞吐量/ 的/ 小幅/ 抖动/ ,/ 但是/ 使得/ 各条/ 流/ 能够/ 很/ 好/ 地/ 同步/ 增速/ 和/ 减速/ 以/ 达到/ 带宽/ 的/ 公平/ 共享/ ./ 为了/ 测试/ IB/ 中/ CCT/ 表/ 配置/ 对于/ QP/ 连接/ 限速/ 的/ 影响/ ,/ 实验/ 中将/ 某条/ QP/ 连接/ 的/ CCTI/ 指向/ 1/ ,/ 通过/ 设置/ 固定/ 的/ 不同/ CCT/ 表项/ IRD/ 值/ ,/ 实现/ 了/ 不同/ 速率/ 的/ 限制/ ,/ 由于/ 每次/ 发送/ 端/ 聚合/ 4/ 个/ 1024Bytes/ 的/ 报文/ 进行/ IRD/ 比较/ ,/ 如/ 20.48/ μ/ s/ 的/ 表项/ 值/ ,/ 带宽/ 限制/ 在/ (/ 1024/ ×/ 8/ )/ // (/ 20.48/ ×/ 4/ ×/ 10/ -/ 6/ )/ =/ 100MB/ ,/ 同理/ IRD/ =/ 204.8/ μ/ s/ 将/ 带宽/ 限制/ 在/ 10MB/ ,/ 而/ IRD/ =/ 2.048/ μ/ s/ 的/ 带宽/ 为/ 1GB/ ./ 如图/ 4/ 所示/ ,/ CCT/ 对于/ 发送/ 速率/ 限制/ 的/ 效果/ 比较/ 明显/ ./ Page8/ 图/ 3/ 相同/ 配置/ 下/ QP/ 带宽/ 的/ 公平性/ 第/ 2/ 个/ 实验/ 的/ 目标/ 是/ 根据/ 第/ 4.2/ 节/ 的/ 定理/ 和/ 分析/ ,/ 通过/ 为/ 各个/ QP/ 配置/ 不同/ 的/ CCTI/ _/ Increase/ 参数/ 实现/ 租户/ 级/ 的/ 公平/ 带宽/ 共享/ ,/ 即/ 对于/ S1/ 和/ S2/ 之间/ 的/ 瓶颈/ 链路/ ,/ 两个/ 租户/ 无论/ 建立/ 多少/ 条流/ 都/ 应当/ 达到/ 公平/ 的/ 带宽/ 占用/ ./ 实验/ 中/ ,/ 租户/ 1/ 有/ 一个/ 稳定/ 的/ 从/ 服务器/ C/ →/ A/ 的/ QP/ 连接/ ,/ 而/ 租户/ 2/ 的/ QP/ 流/ 顺序/ 地/ 加入/ 和/ 退出/ 网络/ (/ 租户/ 2/ 只有/ D/ →/ B/ 的/ 流/ 存在/ 于/ 整个/ 实验/ 的/ 时间/ 区间/ )/ ./ 实验/ 中/ CCT/ 表项/ 采用/ 参考/ 设计/ 值/ CCT/ (/ i/ )/ =/ 14/ ×/ i2/ // 1062/ (/ μ/ s/ )/ ,/ 可证/ 该值/ 满足/ 第/ 4.2/ 节/ 定理/ 中/ CCT/ 表/ 前端/ 的/ 表项/ 导致/ 的/ 限速/ 变化/ 幅度/ 大于/ 后/ 端的/ 表项/ ./ 我们/ 在/ 集中/ 控制器/ 上/ 定义/ 了/ 参数/ 配置/ 的/ 时间/ 点和值/ ,/ 初始化/ 时/ 所有/ 流/ 的/ CCTI/ _/ Increase/ =/ 1/ ,/ 当/ 租户/ 2/ 有/ 两条/ 流/ 时/ ,/ CCTI/ _/ Increase/ =/ 2/ ,/ 当流/ 的/ 数目/ 增加/ 为/ 3/ 时/ ,/ CCTI/ _/ Increase/ =/ 3/ ,/ 随着/ 流/ 的/ 离开/ 再次/ 修改/ 该/ 参数/ ./ 如图/ 5/ (/ a/ )/ 所示/ ,/ 从/ C/ 到/ A/ 的/ 带宽/ 基本/ 稳定/ 在/ 3.4/ Gbps/ ,/ 没有/ 受到/ 租户/ 2/ 流/ 加入/ 和/ 退出/ 的/ 影响/ ./ 随着/ 流/ E/ 和/ F/ 的/ 加入/ ,/ 租户/ 1/ 应得/ 的/ 带宽/ 在/ 2/ 和/ 3/ 条流/ 之间/ 公平/ 的/ 共享/ ,/ 该流/ 降速/ 收敛/ 过程/ 非常/ 迅速/ 的/ 达到/ 稳定/ ./ 而/ 随着/ 流/ 的/ 离开/ ,/ 租户/ 2/ 当前/ 的/ 活跃/ 流/ 相对/ 缓慢/ 的/ 增速/ ,/ 包括/ 从/ 5s/ ~/ 7s/ 和/ 7s/ ~/ 8s/ 两个/ 阶段/ ,/ 但是/ 最终/ 该/ 过程/ 还是/ 能够/ 达到/ 租户/ 内流/ 的/ 公平/ 共享/ ./ 图/ 5/ 基于/ CCTI/ _/ Increase/ 的/ 流级/ 区别/ 化/ 带宽/ 划分/ 我们/ 利用/ OFED/ 中/ 的/ ibdump/ 工具/ 在/ 服务器/ D/ 上/ 抓取/ 了/ BECN/ 报文/ ,/ D/ →/ B/ 的/ QP/ 连接/ 源/ 收到/ 的/ BECN/ 数目/ 如图/ 5/ (/ b/ )/ 所示/ ,/ 除了/ 在/ 流/ 加入/ 和/ 退出/ 的/ 快速/ 突变/ ,/ BECN/ 保持/ 高度/ 稳定/ ./ 在/ 1/ 条/ 、/ 2/ 条/ 和/ 3/ 条流/ 的/ 情况/ 下/ BECN/ 数目/ 分别/ 为/ 790/ ,/ 480/ 和/ 320/ ./ 所/ 达到/ 的/ 532/ 的/ 比例/ 几乎/ 与/ 带宽/ 分配/ 的/ 目标/ 11/ // 21/ // 3/ 相同/ ,/ 从而/ 验证/ 了/ 第/ 4.2/ 节中/ 分析/ 的/ BECN/ 数目/ 与/ 发送窗口/ 的/ 正比/ 关系/ ./ Page9/ 传统/ 的/ IB/ 拥塞/ 控制/ 机制/ 只/ 能够/ 提供/ 流级/ 的/ 公平性/ ,/ 因而/ 在/ 数据中心/ 网络/ 存在/ 用户/ 通过/ 建立/ 大量/ 连接/ 抢占/ 带宽/ 的/ 情况/ ./ 在/ 以太网/ 领域/ 已经/ 提出/ 静态/ 预约/ 和/ 动态/ 调整/ 的/ 多种/ 算法/ [/ 13/ -/ 15/ ]/ ,/ 但是/ 目前/ 尚/ 没有/ 如何/ 在/ IB/ 从端/ 到/ 端的/ 传输/ 角度/ 保证/ 带宽/ 和/ 提供/ 隔离/ 的/ 机制/ ./ 我们/ 利用/ IB/ 拥塞/ 控制算法/ 的/ 区别/ 化/ 参数/ 配置/ 实现/ 成/ 比例/ 的/ 带宽/ 分配/ ,/ 能够/ 避免/ 限速/ 器/ 划分/ 的/ 带宽/ 浪费/ 问题/ ,/ 实验/ 中/ 我们/ 以/ 租户/ 作为/ 流/ 聚合/ 的/ 单位/ ,/ 动态/ 调整/ 每条/ 拥塞/ 流/ 的/ 少量/ 拥塞/ 控制参数/ ,/ 已较/ 小/ 的/ 开销/ 实现/ 租户/ 级/ 的/ 带宽/ 保证/ 和/ 性能/ 隔离/ ,/ 从而/ 达到/ 本文/ 提出/ 的/ 数据中心/ 对于/ 新型/ 传输/ 控制/ 的/ 要求/ ./ 6/ 下/ 一步/ 工作/ 基于/ IB/ 实现/ 的/ 数据中心/ 网络/ 传输层/ 控制/ 以/ QP/ 为/ 核心/ ,/ 通过/ 拥塞/ 控制/ 相关/ 参数/ 为/ 用户/ 提供/ 了/ 可/ 配置/ 的/ 传输服务/ ,/ 同时/ 利用/ ECN/ 显式/ 拥塞/ 标记/ 能够/ 更/ 及时/ 的/ 对/ 网络/ 拥塞/ 做出/ 反应/ ./ 我们/ 下/ 一步/ 的/ 主要/ 工作/ 首先/ 是/ 研究/ 针对/ IB/ 这种/ 极低/ 延时/ 网络/ 如何/ 配置/ 和/ 改进/ 拥塞/ 控制算法/ ,/ 以/ 适应/ 数据中心/ 存在/ 的/ 突发/ 拥塞/ 抖动/ ,/ 避免/ 拥塞/ 传播/ 的/ 同时/ 减少/ 带宽/ 的/ 浪费/ ./ 此外/ ,/ IB/ 提供/ 了/ QoS/ 传输/ 质量/ 监控/ ,/ 我们/ 需要/ 研究/ 在/ 不能/ 满足/ QoS/ 需求/ 的/ 情况/ 下/ ,/ 如何/ 通过/ 自/ 适应/ 路由/ 等/ 方式/ 在/ 多路径/ 网络/ 进行/ 灵活/ 的/ 流量/ 调度/ ,/ 从而/ 配合/ 拥塞/ 控制/ 机制/ 缓解/ 网络/ 热点/ 链路/ 的/ 拥塞/ ./ 

