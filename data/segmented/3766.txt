Page1/ 一种/ 动态/ 优先级/ 实时/ 任务调度/ 算法/ 夏家莉/ 1/ )/ 陈辉/ 1/ )/ 杨兵/ 2/ )/ 1/ )/ (/ 江西财经大学/ 软件/ 与/ 通信/ 工程学院/ 南昌/ 330013/ )/ 2/ )/ (/ 湖北/ 大学/ 教育/ 学院/ 武汉/ 430062/ )/ 摘要/ 现有/ 实时/ 任务调度/ 算法/ 往往/ 根据/ 任务/ 的/ 时间/ 属性/ 或者/ 价值/ 确定/ 任务/ 优先级/ ,/ 较/ 少/ 同时/ 兼顾/ 任务/ 的/ 价值/ 和/ 执行/ 紧迫性/ ./ 文中/ 根据/ 任务/ 的/ 价值/ 和/ 剩余/ 执行/ 时间/ 讨论/ 任务/ 的/ 剩余价值/ 密度/ ,/ 根据/ 任务/ 的/ 截止期/ 和/ 空余/ 执行/ 时间/ 分析/ 任务/ 的/ 紧迫性/ ;/ 然后/ 综合/ 任务/ 的/ 剩余价值/ 密度/ 和/ 执行/ 紧迫性/ ,/ 提出/ 了/ 动态/ 分派任务/ 优先级/ 的/ DPA/ 策略/ ;/ 最后/ 提出/ 了/ 基于/ DPA/ 的/ 抢占/ 调度/ 算法/ DRTP/ ./ DRTP/ 算法/ 分析/ 了/ 任务/ 抢占/ 调度/ 的/ 各种/ 可能/ 条件/ ,/ 分析/ 了/ 系统/ 中/ 可能/ 出现/ 的/ 颠簸/ 调度/ ,/ 并/ 给出/ 避免/ 颠簸/ 的/ 条件/ ./ 仿真/ 实验/ 结果显示/ ,/ 与/ 其它/ 同类/ 算法/ 相比/ ,/ DRTP/ 算法/ 能够/ 提高/ 系统/ 价值/ 收益/ ,/ 降低/ 任务/ 截止期/ 错失/ 率/ ,/ 并/ 大大减少/ 任务/ 抢占/ 的/ 次数/ ./ 关键词/ 实时/ 任务/ ;/ 剩余价值/ 密度/ ;/ 执行/ 紧迫性/ ;/ 动态/ 优先级/ 分派/ 1/ 引言/ 最近/ 几年/ ,/ 实时/ 任务/ 系统/ 广泛应用/ 到/ 航天/ 控/ Page2/ 理/ 系统/ ,/ 任务/ 处理/ 的/ 主要/ 目标/ 是/ 进行/ 任务调度/ 从而/ 使/ 尽可能/ 多/ 的/ 任务/ 能够/ 在/ 任务/ 截止期/ 前/ 完成/ 执行/ ,/ 并/ 实现/ 系统/ 性能/ 到达/ 最佳/ [/ 12/ ]/ ./ 然而/ ,/ 在/ 时间/ 紧急/ 的/ 实时/ 任务/ 系统/ 中/ 做出/ 调度/ 决策/ 是/ 一项/ 非常/ 困难/ 的/ 工作/ ,/ 因为/ 该/ 决策/ 涉及/ 到/ 大量/ 的/ 实时/ 系统/ 参数/ 和/ 实时/ 任务/ 属性/ [/ 13/ ]/ ./ 截止期/ 最早/ 最/ 优先/ EDF/ [/ 14/ -/ 15/ ]/ 算法/ 根据/ 任务/ 截止期/ 来/ 决定/ 任务/ 执行/ 顺序/ ,/ 让/ 截止期/ 最早/ 的/ 任务/ 优先/ 执行/ ./ 空闲/ 时间/ 最短/ 最/ 优先/ LSF/ [/ 16/ ]/ 算法/ 则/ 将/ 最高/ 优先级/ 指派/ 给/ 最/ 短/ 空闲/ 时间/ 的/ 任务/ ,/ 保证/ 最/ 紧迫/ 的/ 任务/ 优先/ 执行/ ./ Semghouni/ 等/ 人/ [/ 17/ ]/ 在/ EDF/ 算法/ 的/ 基础/ 上/ ,/ 同时/ 考虑/ 任务/ 的/ 重要性/ ,/ 提出/ 了/ 一种/ 新/ 的/ 调度/ 策略/ GEDF/ 来/ 提高/ EDF/ 算法/ 处理/ 系统/ 过载/ 的/ 能力/ ./ 为了/ 提高/ 周期性/ 实时/ 任务/ 系统/ 的/ 效率/ ,/ 文献/ [/ 18/ ]/ 提出/ 了/ 一种/ 更为/ 通用/ 的/ 实时/ 任务模型/ ,/ 允许/ 周期性/ 任务/ 的/ 截止期/ 和/ 周期/ 可以/ 在/ 某些/ 周期/ 内/ 变化/ ./ 文献/ [/ 19/ ]/ 提出/ 了/ 一种/ 计算/ 周期性/ 任务/ 最小/ 截止期/ 的/ 算法/ ./ 文献/ [/ 18/ -/ 19/ ]/ 在/ 保证系统/ 可/ 调度/ 性/ 的/ 基础/ 上/ ,/ 通过/ 动态/ 调整/ 实时/ 任务/ 的/ 截止期/ 和/ 周期/ ,/ 加快/ 任务/ 的/ 调度/ 速度/ ,/ 减少/ 系统/ 的/ 等待时间/ ,/ 从而/ 在/ 系统/ 过载/ 的/ 情况/ 下/ 提高/ 任务/ 的/ 可/ 调度/ 性/ ,/ 进而/ 提高/ 系统/ 的/ 效率/ ./ 为了/ 克服/ EDF/ 算法/ 和/ 可能/ LSF/ 算法/ 存在/ 的/ 不足/ ,/ 文献/ [/ 20/ ]/ 根据/ 任务/ 的/ 相对/ 截止期/ 和/ 空闲/ 时间/ ,/ 采用/ 综合/ 加权/ 的/ 方式/ 综合/ 任务/ 的/ EDF/ 优先级/ 和/ LSF/ 优先级/ 设计/ 任务/ 的/ 优先级/ ,/ 并/ 通过/ 加权/ 参数/ 调节/ 两种/ 优先级/ 策略/ 对表/ 优先级/ 影响/ 的/ 权重/ ./ 随着/ 实时/ 任务/ 系统/ 广泛应用/ 到/ 各种/ 应用领域/ ,/ 具体/ 应用/ 也/ 对/ 实时/ 任务调度/ 的/ 效率/ 和/ 灵活性/ 提出/ 了/ 更/ 高/ 要求/ ,/ 单纯/ 考虑/ 任务/ 的/ 时间/ 属性/ 来/ 确定/ 任务/ 优先级/ 的/ 方式/ 已经/ 不能/ 满足需要/ ./ Burns/ 等/ 人/ [/ 1/ ]/ 指出/ ,/ 提高/ 实时/ 系统/ 灵活性/ 和/ 效率/ 的/ 一种/ 流行/ 方式/ 就是/ 采用/ 基于/ 价值/ 的/ 优先级/ 调度/ 策略/ ./ 简单/ 地/ 讲/ ,/ 基于/ 价值/ 的/ 调度/ 就/ 是从/ 一个/ 任务/ 集合/ 中/ 选择地/ 执行/ 某些/ 任务/ ,/ 从而/ 保证系统/ 具有/ 最佳/ 的/ 价值/ 收益/ ./ 而/ 价值/ [/ 5/ ,/ 12/ ]/ 可以/ 认为/ 是/ 任务/ 成功/ 执行/ 对系统/ 的/ 贡献/ ,/ 其值/ 是/ 应用/ 系统/ 决定/ 的/ ,/ 是/ 任务/ 的/ 固有/ 属性/ ./ 文献/ [/ 5/ ]/ 结合/ 汽车/ 自动/ 导航系统/ 的/ 具体/ 应用/ ,/ 运用/ 计量/ 理论/ 和/ 决策分析/ 方法/ 给出/ 了/ 计算/ 任务/ 价值/ 的/ 系统化/ 、/ 合理化/ 的/ 方法/ ./ 文献/ [/ 2/ ]/ 根据/ 任务/ 的/ 价值/ 高低/ 提出/ 了/ 价值/ 最高/ 最/ 优先/ HVF/ 算法/ ,/ 在/ 系统/ 高/ 负载/ 情况/ 下/ ,/ 让/ 价值/ 最高/ 的/ 任务/ 优先/ 执行/ ./ 为了/ 提高/ 系统/ 在/ 单位/ 时间/ 内/ 的/ 价值/ 收益/ ,/ 文献/ [/ 2/ ,/ 21/ ]/ 根据/ 任务/ 的/ 价值/ 及/ 任务/ 的/ 最大/ 执行/ 时间/ ,/ 确定/ 任务/ 的/ 价值/ 密度/ ,/ 并/ 由此/ 提出/ 了/ 价值/ 密度/ 最大/ 最/ 优先/ HVDF/ 算法/ ,/ 保证/ 对系统/ 价值/ 收益/ 贡献率/ 高/ 的/ 任务/ 优先/ 执行/ ./ 很/ 显然/ ,/ HVF/ 及/ HVDF/ 都/ 是/ 静态/ 优先级/ 分配/ 算法/ ./ 在/ 基于/ 价值/ 的/ 调度/ 系统/ 中/ ,/ 当且/ 仅/ 当/ 实时/ 任务/ 完成/ 并/ 提交/ 时/ ,/ 系统/ 才能/ 获得/ 相应/ 的/ 价值/ 增益/ ./ 当/ 系统/ 采用/ 抢占/ 的/ 调度/ 策略/ 时/ ,/ 不管/ 当前/ 执行/ 任务/ 正/ 执行/ 到/ 哪/ 一个/ 阶段/ ,/ 都/ 有/ 可能/ 被/ 新/ 到达/ 的/ 其它/ 任务/ 抢占/ ,/ 甚至于/ 夭折/ ./ 为了/ 保护/ 执行/ 事务/ 不/ 被/ 其它/ 任务/ 抢占/ 而/ 夭折/ ,/ Aldarmi/ 和/ Burns/ [/ 13/ ]/ 根据/ 任务/ 的/ 价值/ 及其/ 剩余/ 执行/ 时间/ ,/ 提出/ 了/ 一种/ 动态/ 价值/ 密度/ 的/ 实时/ 调度/ 策略/ DVD/ ,/ 优化/ 系统资源/ 的/ 利用率/ ./ 随着/ 执行/ 任务/ 剩余/ 执行/ 时间/ 的/ 减少/ ,/ DVD/ 算法/ 赋予/ 执行/ 任务/ 的/ 优先级/ 会/ 快速/ 增加/ ,/ 直至/ 无穷大/ ./ 因此/ ,/ 不管/ 执行/ 任务/ 在/ 时间/ 紧迫/ 程度/ 如何/ ,/ 它/ 都/ 很/ 难/ 被/ 其它/ 任务/ 抢占/ ,/ 因此/ 可能/ 造成/ 后/ 到达/ 的/ 紧迫/ 任务/ 错失/ 截止期/ ./ 在/ 具体/ 的/ 实时/ 应用/ 系统/ 中/ ,/ 时间/ 紧迫/ 的/ 任务/ 其/ 价值/ 未必/ 高/ ,/ 而/ 价值/ 高/ 的/ 任务/ 其/ 执行/ 时间/ 未必/ 紧迫/ ./ 因此/ ,/ 片面/ 依据/ 任务/ 的/ 时间/ 属性/ 进行/ 任务调度/ 虽能/ 保证/ 时间/ 紧迫性/ 高/ 的/ 任务/ 优先/ 执行/ ,/ 提高/ 任务/ 的/ 成功/ 执行/ 率/ ,/ 但/ 可能/ 使/ 一些/ 价值/ 高/ 的/ 任务/ 错过/ 截止期/ ,/ 降低/ 系统/ 总/ 收益/ ./ 相反/ ,/ 片面强调/ 系统/ 价值/ 收益/ ,/ 则/ 可能/ 使得/ 那些/ 低/ 价值/ 任务/ 得不到/ 执行/ 的/ 机会/ 或者/ 频繁/ 地被/ 高/ 价值/ 任务/ 抢占/ 而/ 错失/ 截止期/ ,/ 降低/ 任务/ 的/ 成功/ 执行/ 率/ [/ 22/ ]/ ./ 为了/ 兼顾/ 公平/ 和/ 效率/ ,/ 本文/ 综合/ 考虑/ 任务/ 价值/ 、/ 截止期/ 与/ 空余/ 时间/ 3/ 个/ 特征参数/ ,/ 提出/ 了/ 一种/ 综合/ 任务/ 动态/ 价值/ 密度/ 与/ 执行/ 紧迫性/ 的/ 动态/ 优先级/ 分派/ 策略/ (/ DynamicPriorityAssignment/ ,/ DPA/ )/ ./ 首先/ ,/ 为了/ 合理/ 保护/ 执行/ 任务/ 不易/ 被/ 其它/ 任务/ 抢占/ ,/ 同时/ 又/ 给/ 其它/ 高/ 紧迫性/ 任务/ 执行/ 的/ 机会/ ,/ DPA/ 策略/ 根据/ 任务/ 的/ 价值/ 和/ 剩余/ 执行/ 时间/ 提出/ 了/ 一种/ 不同于/ 文献/ [/ 13/ ]/ 的/ 动态/ 价值/ 密度/ 计算方法/ ./ 该/ 方法/ 将/ 任务/ 的/ 价值/ 密度/ 控制/ 在/ 一个/ 确定/ 的/ 区间/ [/ VDi/ ,/ p/ ×/ VDi/ )/ 内/ ,/ 其中/ VDi/ =/ ViCi/ 属性/ 有关/ ,/ p/ 是/ 调节/ 任务/ 动态/ 价值/ 密度/ 对/ 优先级/ 影响/ 权重/ 的/ 系数/ ./ 其次/ ,/ 为了/ 提高/ 时间/ 高/ 紧迫性/ 任务/ 的/ 执行/ 机会/ ,/ DPA/ 策略/ 根据/ 任务/ 的/ 截止期/ 和/ 空余/ 时间/ 设计/ 了/ 一个/ 新/ 的/ 实时/ 任务/ 执行/ 紧迫性/ 的/ 评价/ 指标/ δ/ i/ =/ q/ φ/ i/ ,/ 其中/ φ/ i/ 为/ 任务/ 的/ 执行/ 强度/ ,/ δ/ i/ 为/ 任务/ 执行/ 紧迫性/ ,/ 其/ 取值/ 区间/ 为/ (/ 0/ ,/ 1/ ]/ ,/ q/ 是/ 调节/ 任务/ 时间/ 紧迫性/ 对/ 优先级/ 影响/ 权重/ 的/ 系数/ ./ 通过/ 选取/ 不同/ 参数/ p/ 和/ q/ ,/ DPA/ 策略/ 可以/ 改变/ 任务/ 动态/ 价值/ 密度/ 与/ 紧迫性/ 对/ 任务/ 优先级/ 的/ 影响/ 权重/ ,/ 提高/ 了/ 对/ 不同/ 应用环境/ 的/ 适应性/ ./ 第三/ ,/ 在/ DPA/ 策略/ 的/ 基础/ 上/ ,/ 提出/ 了/ Page3/ 一种/ 新/ 的/ 实时/ 任务调度/ 算法/ DRTP/ (/ DynamicReal/ -/ timeTransactionScheduling/ )/ ,/ 该/ 算法/ 详细分析/ 了/ 任务调度/ 中/ 可能/ 出现/ 的/ 情况/ ,/ 讨论/ 了/ 任务/ 抢占/ 与非/ 抢占/ 调度/ 的/ 条件/ ./ 最后/ ,/ 论文/ 还/ 讨论/ 了/ DRTP/ 算法/ 抢占/ 调度/ 中/ 可能/ 出现/ 的/ 系统/ 颠簸/ [/ 16/ ]/ 现象/ ,/ 并/ 通过/ 推理/ 分析/ 给出/ 了/ 避免/ 系统/ 颠簸/ 条件/ ./ 2/ 任务模型/ 假设/ 实时/ 任务/ 系统/ 中/ 实时/ 任务/ 集合/ 为/ T/ =/ {/ T1/ ,/ T2/ ,/ …/ ,/ Tn/ }/ ,/ 其中/ 每个/ 任务/ Ti/ 都/ 具有/ 以下/ 属性/ [/ 23/ ]/ :/ (/ 1/ )/ Pi/ ,/ 表示/ Ti/ 的/ 执行/ 周期/ ,/ 若/ Ti/ 为/ 非/ 周期/ 任务/ ,/ 则/ 假设/ 其/ 周期/ Pi/ 为/ 无穷大/ ;/ (/ 2/ )/ Di/ ,/ 表示/ Ti/ 的/ 相对/ 截止期/ ,/ Di/ / Pi/ ,/ 即/ 系统/ 中/ 同时/ 仅/ 存在/ 任务/ 的/ 一个/ 实例/ ,/ 因此/ 在/ 上下文/ 中/ 不/ 区分/ 任务/ 及其/ 实例/ ;/ (/ 3/ )/ Ci/ ,/ 表示/ Ti/ 的/ 理论/ 执行/ 时间/ ,/ Ci/ / Di/ ;/ (/ 4/ )/ bi/ ,/ 表示/ Ti/ 放行/ 并/ 准备/ 执行/ 的/ 时间/ ;/ (/ 5/ )/ ei/ ,/ 表示/ Ti/ 执行/ 完成/ 时间/ ;/ (/ 6/ )/ di/ ,/ 表示/ Ti/ 的/ 绝对/ 截止期/ ,/ 且/ di/ =/ bi/ +/ Di/ ;/ (/ 7/ )/ Vi/ ,/ 表示/ Ti/ 的/ 预期/ 价值/ ,/ 若/ Ti/ 在/ 截止期/ 前/ 完成/ ,/ 则/ Ti/ 对系统/ 累积/ 价值/ 的/ 贡献/ 为/ Vi/ ;/ 否则/ 为/ 0/ ./ 假设/ τ/ i/ 为/ 系统/ 的/ 当前/ 时刻/ ,/ 那么/ 根据/ 任务/ 在/ 系统/ 中/ 执行/ 状态/ ,/ 可以/ 将/ 系统/ 中/ 实时/ 任务/ 划分/ 为/ 如下/ 几类/ :/ 但/ 尚未/ 执行/ 完成/ 的/ 任务/ ;/ 但/ 目前/ 因/ 被/ 抢占/ 而/ 处于/ 等待/ 状态/ 的/ 任务/ ;/ (/ 1/ )/ 执行/ 任务/ ,/ 表示/ 在/ 当前/ 执行/ 周期/ 内/ 已/ 放行/ (/ 2/ )/ 活动/ 任务/ ,/ 表示/ 在/ 当前/ 执行/ 周期/ 内/ 已/ 开始/ ,/ (/ 3/ )/ 等待/ 任务/ ,/ 表示/ 在/ 当前/ 执行/ 周期/ 内/ 已经/ 放行/ ,/ 但/ 因未/ 获得/ 系统/ 执行权/ 而/ 处于/ 等待/ 状态/ 的/ 任务/ ;/ (/ 4/ )/ 休眠/ 任务/ ,/ 表示/ 在/ 当前/ 执行/ 周期/ 内/ 已/ 完成/ 执行/ 或者/ 已/ 夭折/ ,/ 目前/ 正等待/ 下/ 一个/ 执行/ 周期/ 到来/ 的/ 任务/ ./ 务间/ 无/ 冲突/ 资源/ 与/ 相互依赖/ 关系/ ;/ 此外/ ,/ 针对/ 该/ 任务模型/ 本文/ 还作/ 如下/ 假定/ :/ (/ 1/ )/ 系统/ 中/ 任务/ 间/ 相互/ 独立/ ,/ 即除/ CPU/ 外/ ,/ 任/ (/ 2/ )/ 任务/ 不会/ 自动/ 挂/ 起/ ;/ (/ 3/ )/ 任务/ 切换/ 时间/ 为/ 0/ 或者/ 很小/ 以致/ 可以/ 忽略/ ./ 3/ 任务/ 优先级/ 分派/ 本节/ 将/ 详细/ 讨论/ 影响/ 实时/ 任务/ 优先级/ 的/ 两个/ 最/ 主要/ 因素/ :/ 任务/ 的/ 动态/ 价值/ 密度/ 与/ 执行/ 紧迫性/ ,/ 并/ 提出/ 基于/ 任务/ 价值/ 密度/ 与/ 紧迫性/ 的/ 优先级/ 分派/ 函数/ ./ 3.1/ 任务/ 即时/ 价值/ 在/ 实时/ 任务/ 系统/ 中/ ,/ 系统/ 各种/ 功能/ 总是/ 通过/ 执行/ 相关/ 的/ 任务/ 来/ 完成/ ./ 然而/ ,/ 由于/ 系统/ 各个/ 功能/ 在/ 整个/ 系统/ 中/ 重要性/ 的/ 不同/ ,/ 系统/ 执行/ 各个/ 任务/ 的/ 重要/ 程度/ 也/ 存在/ 着/ 明显/ 的/ 差异/ ./ 为了/ 具体/ 量化/ 某个/ 任务/ 对于/ 系统/ 的/ 重要性/ ,/ 本文/ 使用/ 任务/ 的/ 价值/ (/ Value/ ,/ 简记/ 为/ V/ )/ 表示/ 任务/ 的/ 重要性/ ./ 显然/ ,/ 任务/ 价值/ 是/ 任务/ 本身/ 的/ 固有/ 属性/ ,/ 与/ 任务/ 的/ 时间/ 特征/ 无关/ ;/ 此外/ ,/ 任务/ 的/ 价值/ 也/ 不是/ 在/ 任务/ 成功/ 执行/ 的/ 那个/ 瞬间/ 产生/ ,/ 而是/ 随着/ 任务/ 的/ 执行/ 而/ 逐渐/ 积累/ 的/ 过程/ ./ 定义/ 1/ (/ 即时/ 价值/ )/ ./ 当/ 实时/ 任务/ Ti/ 开始/ 执行/ 后/ ,/ 任务/ 累积/ 产生/ 的/ 价值/ 称为/ 任务/ 的/ 即时/ 价值/ (/ ImmediateValue/ )/ ,/ 记为/ IVi/ ./ 若/ 任务/ Ti/ 执行/ 了/ t/ 个/ 单位/ 时间/ ,/ 则/ Ti/ 的/ 即时/ 价值/ 记为/ IVi/ (/ t/ )/ ./ 假设/ 曲线/ IVi/ (/ t/ )/ =/ k/ ×/ tp/ 表示/ 任务/ Ti/ 即时/ 价值/ 产生/ 的/ 过程/ ,/ 其中/ p/ (/ p/ / 1/ )/ 反映/ 任务/ 即时/ 价值/ 产生/ 速度/ 的/ 变化/ ./ 当/ p/ =/ 1/ 时/ ,/ 表示/ 任务/ 即时/ 价值/ 匀速/ 产生/ ,/ 当/ p/ >/ 1/ 时/ ,/ 表示/ 任务/ 即时/ 价值/ 变/ 加速/ 产生/ ./ 显然/ ,/ 当/ t/ =/ Ci/ 时/ ,/ IVi/ (/ t/ )/ =/ Vi/ ,/ 故有/ Vi/ =/ k/ ×/ CpVi/ ./ 因此/ ,/ 任务/ 的/ 即时/ 价值/ 可以/ 由下式/ 得到/ Cpi/ 在/ 任务/ 成功/ 提交/ 之前/ ,/ 任务/ 所/ 累积/ 产生/ 的/ 即时/ 价值/ 只是/ 一种/ 可能/ 价值/ 收益/ ,/ 并/ 没有/ 给/ 系统/ 带来/ 实实在在/ 的/ 价值/ 收益/ ./ 当且/ 仅/ 当/ 成功/ 执行/ 并/ 正常/ 提交/ 后/ ,/ 任务/ 才/ 能够/ 带给/ 系统/ 大小/ 为/ Vi/ 的/ 价值/ 收益/ ,/ 否则/ 丢弃/ 已/ 产生/ 的/ 即时/ 价值/ ./ 3.2/ 剩余价值/ 密度/ 定义/ 2/ (/ 平均/ 价值/ 密度/ )/ ./ 任务/ 预期/ 价值/ 与/ 任务/ 理论/ 执行/ 时间/ 的/ 比率/ 称为/ 任务/ 的/ 平均/ 价值/ 密度/ ,/ 记为/ VD/ ./ 显然/ ,/ 任务/ Ti/ 的/ 平均/ 价值/ 密度/ VDi/ =/ ViCi/ 与/ 任务/ 本身/ 的/ 属性/ 有关/ ,/ 而/ 与/ 任务/ 的/ 执行/ 过程/ 无关/ ./ 然而/ ,/ 任务/ 的/ 平均/ 价值/ 密度/ 并/ 不能/ 反映/ 任务/ 即时/ 价值/ 产生/ 的/ 动态/ 过程/ ./ 为了/ 反映/ 任务/ 价值/ 产生/ 的/ 变化/ 速度/ ,/ 下面/ 给出/ 了/ 任务/ 剩余价值/ 密度/ 的/ 概念/ ./ 定义/ 3/ (/ 剩余价值/ 密度/ )/ ./ 任务/ 在/ 其/ 剩余/ 执行/ 时间/ 内/ ,/ 单位/ 时间/ 产生/ 的/ 价值/ 称为/ 任务/ 的/ 剩余价值/ 密度/ (/ RemainderValueDensity/ )/ ,/ 记为/ RVD/ ;/ 若/ 任务/ Ti/ 已/ 执行/ t/ 个/ 单位/ 时间/ ,/ 则/ 其/ 剩余价值/ 密度/ 表示/ Page4/ 为/ RVDi/ (/ t/ )/ ./ 得到/ 根据/ 定义/ ,/ 任务/ Ti/ 的/ 剩余价值/ 密度/ 可由/ 下式/ RVDi/ (/ t/ )/ =/ Vi/ -/ IVi/ (/ t/ )/ 其中/ ,/ Vi/ 为/ Ti/ 的/ 预期/ 价值/ ;/ t/ 为/ Ti/ 的/ 已/ 执行/ 时间/ ;/ IVi/ (/ t/ )/ 为/ Ti/ 当前/ 已/ 产生/ 的/ 即时/ 价值/ ;/ Ci/ 为/ 任务/ 的/ 理论/ 执行/ 时间/ ./ 显然/ ,/ 当/ p/ =/ 1/ 时/ ,/ 有/ RVDi/ (/ t/ )/ =/ VDt/ ,/ 与/ Ti/ 的/ 已/ 执行/ 时间/ t/ 无关/ ./ 定理/ 1/ ./ 若/ 0/ / t/ </ Ci/ 且/ t/ 取定值/ 时/ ,/ 任务/ Ti/ 的/ 剩余价值/ 密度/ RVDi/ (/ t/ )/ 关于/ 参数/ p/ 递增/ ./ 证明/ ./ 令/ f/ (/ p/ )/ =/ Cpf/ (/ p/ )/ 为/ 关于/ 参数/ p/ 的/ 增函数/ ,/ 所以/ ,/ RVDi/ (/ t/ )/ =/ f/ (/ p/ )/ ×/ ViCi/ -/ t/ 也/ 关于/ 参数/ p/ 递增/ ./ 故原/ 命题/ 得证/ ./ 证毕/ ./ 定理/ 2/ ./ 若/ 0/ / t/ </ Ci/ ,/ p/ >/ 1/ 且/ p/ 取定值/ 时/ ,/ 任务/ Ti/ 的/ 剩余价值/ 密度/ RVDi/ (/ t/ )/ 关于/ t/ 递增/ ./ 证明/ ./ 令/ f/ (/ t/ )/ =/ Cp/ 再令/ g/ (/ t/ )/ =/ (/ p/ -/ 1/ )/ tp/ +/ Cpp/ (/ p/ -/ 1/ )/ tp/ -/ 2/ (/ t/ -/ Ci/ )/ ,/ 故/ g/ (/ t/ )/ </ 0/ ,/ 即/ g/ (/ t/ )/ 为/ 减/ 函数/ ,/ 因此/ ,/ 有/ g/ (/ t/ )/ >/ g/ (/ Ci/ )/ / g/ (/ t/ )/ >/ 0/ ,/ f/ (/ t/ )/ =/ (/ p/ -/ 1/ )/ tp/ +/ Cp/ 增函数/ ./ 所以/ ,/ RVDi/ (/ t/ )/ =/ f/ (/ t/ )/ ×/ Vi/ 故原/ 命题/ 得证/ ./ 若称/ 任务/ Ti/ 在/ 执行/ t/ (/ 0/ / t/ </ Ci/ )/ 个/ 单位/ 时间/ 时/ 的/ 剩余价值/ 密度/ 与/ 开始/ 时刻/ 剩余价值/ 密度/ 的/ 比率/ 为/ Ti/ 剩余价值/ 增长/ 倍率/ ,/ 记为/ Ri/ (/ t/ )/ ,/ 显然/ ,/ Ri/ (/ t/ )/ =/ RVDi/ (/ t/ )/ RVDi/ (/ t/ )/ t/ =/ 0/ =/ Cpp/ =/ 1/ 时/ ,/ Ri/ (/ t/ )/ =/ 1/ ;/ 当/ p/ >/ 1/ 时/ ,/ Ri/ (/ t/ )/ >/ 1/ ,/ 且/ p/ 的/ 值/ 越/ 大/ ,/ Ri/ (/ t/ )/ 越大/ ./ 当/ t/ →/ Ci/ 时/ ,/ Ti/ 剩余价值/ 密度/ 的/ 增幅/ 达到/ 最大/ ,/ 即/ maxRi/ (/ t/ )/ =/ limt/ →/ Ci/ (/ i/ (/ Ci/ -/ t/ )/ ×/ ∑/ klimt/ →/ CiCp/ -/ 1/ 任务/ Ti/ 执行/ 期间/ ,/ 其/ 剩余价值/ 密度/ 的/ 变化/ 区间/ 为/ [/ VDi/ ,/ p/ ×/ VDi/ )/ ./ 假设/ 任务/ Ti/ 的/ 预期/ 价值/ Vi/ =/ 100/ ,/ 理论/ 执行/ 时间/ Ci/ =/ 10/ ,/ 当/ p/ =/ 1/ ,/ 2/ ,/ 3/ ,/ 4/ 时/ ,/ Ti/ 的/ 即时/ 价值/ 及/ 剩余价值/ 密度/ 变化/ 曲线/ 如图/ 1/ 所示/ ./ 当/ p/ =/ 1/ 时/ ,/ 在/ Ti/ 执行/ 期间/ ,/ Ti/ 即时/ 价值/ 的/ 产生/ 速度/ 稳定/ 不变/ ,/ 剩余价值/ 密度/ 为/ 常数/ ./ 当/ p/ 的/ 值/ 大于/ 1/ 时/ ,/ Ti/ 即时/ 价值/ 与/ 剩余价值/ 密度/ 都/ 随/ Ti/ 执行/ 时间/ 的/ 增加/ 而/ 增大/ ,/ 且/ 当/ p/ 的/ 值/ 越/ 大/ ,/ Ti/ 即时/ 价值/ 及/ 剩余价值/ 密度/ 增速/ 越快/ ./ 任务/ 仅/ 在/ 成功/ 提交/ 之后/ 才/ 能够/ 给/ 系统/ 带来/ 与其/ 预期/ 价值/ 等值/ 的/ 价值/ 收益/ ,/ 否则/ ,/ 其/ 产生/ 的/ 即时/ 价值/ 无效/ ./ 若/ 夭折/ 一个/ 已/ 产生/ 即时/ 价值/ 的/ 任务/ ,/ 不但/ 没有/ 给/ 系统/ 带来/ 收益/ ,/ 相反/ 还/ 浪费/ 了/ 任务/ 执行/ 时/ 消耗/ 的/ 系统资源/ ./ 因此/ ,/ 完全/ 有/ 必要/ 采取/ 一种/ 措施/ 来/ 保护/ 那些/ 已经/ 开始/ 执行/ 的/ 任务/ ,/ 使/ 它们/ 能够/ 尽可能/ 地/ 提交/ ./ 在/ 实时/ 任务/ 系统/ 的/ 四类/ 实时/ 任务/ 中/ ,/ 休眠/ 任务/ 的/ 执行/ 周期/ 尚未/ 到达/ ,/ 可以/ 不用/ 考虑/ ,/ 下面/ 我们/ 比较/ 其它/ 3/ 类/ 任务/ ./ 对于/ 实时/ 系统/ 中/ 的/ 某个/ 任务/ Ti/ ,/ 若/ Ti/ 为/ 等待/ 任务/ (/ Ti/ 已/ 执行/ 时间/ t/ =/ 0/ )/ ,/ Ti/ 的/ 剩余价值/ 密度/ RVDi/ (/ t/ )/ =/ ViCi/ (/ 0/ </ t/ </ Ci/ )/ ,/ Ti/ 的/ 剩余价值/ 密度/ RVDi/ (/ t/ )/ =/ (/ Cpi/ -/ tp/ )/ ×/ Vii/ (/ Ci/ -/ t/ )/ ./ 根据/ 定理/ 2/ ,/ 显然/ 有/ RVDi/ (/ t/ )/ >/ ViCi/ ./ Cp/ 同时/ ,/ p/ 的/ 取值/ 越大/ ,/ RVDi/ (/ t/ )/ 的/ 值/ 也/ 越/ 大/ ./ 因此/ ,/ 可以/ 提高/ Ti/ 的/ 优先级/ ,/ 在/ 一定/ 程度/ 上/ 降低/ 了/ Ti/ 夭折/ 的/ 可能性/ ,/ 提高/ 了/ 系统/ 的/ 成功/ 执行/ 率/ ./ Page53/ ./ 3/ 紧迫性/ 分析/ 在/ 实时/ 系统调度/ 中/ ,/ 不仅/ 要求/ 系统/ 价值/ 收益/ 最大化/ ,/ 同时/ 也/ 要求/ 尽可能/ 满足/ 任务/ 的/ 时间/ 约束/ ,/ 提高/ 任务/ 的/ 成功/ 执行/ 率/ ./ 传统/ 的/ 基于/ 任务/ 时间/ 属性/ 的/ 调度/ 方法/ 往往/ 根据/ 任务/ 的/ 截止期/ [/ 14/ -/ 15/ ]/ 或者/ 空闲/ 时间/ [/ 16/ ]/ 来/ 评判/ 任务/ 执行/ 的/ 紧迫性/ ,/ 然而/ ,/ 仅/ 依据/ 截止期/ 或/ 空余/ 时间/ 并/ 不能/ 准确/ 地/ 反映/ 任务/ 执行/ 的/ 紧迫性/ ./ 本节/ 分析/ 任务/ 截止期/ 、/ 剩余/ 执行/ 时间/ 及/ 空闲/ 时间/ 的/ 关系/ ,/ 提出/ 一个/ 新/ 的/ 评价/ 指标/ 来/ 判定/ 任务/ 执行/ 的/ 紧迫性/ ,/ 即/ :/ 为了/ 保证/ 任务/ 时间/ 约束/ ,/ 任务/ 必须/ 尽快/ 开始/ 执行/ 的/ 紧迫/ 程度/ ./ 定义/ 4/ (/ 执行/ 强度/ )/ ./ 完成/ 任务/ 所/ 需/ 的/ 执行/ 时间/ 与/ 任务/ 空余/ 时间/ 的/ 比/ 称为/ 任务/ 的/ 执行/ 强度/ ,/ 记/ 为/ φ/ ./ 任务/ Ti/ 的/ 执行/ 强度/ φ/ i/ =/ Ci/ -/ t/ 时间/ ,/ t/ 为/ Ti/ 的/ 已/ 执行/ 时间/ ./ 显然/ ,/ 任务/ 执行/ 强度/ 越大/ ,/ 说明/ 为了/ 完成/ 任务/ ,/ 任务/ 空闲/ 时间/ 中需/ 用于/ 执行/ 任务/ 的/ 时间/ 份额/ 越大/ ./ 定义/ 5/ (/ 执行/ 紧迫性/ )/ ./ 为了/ 保证/ 任务/ 截止期/ ,/ 任务/ 需/ 尽快/ 执行/ 的/ 紧迫/ 程度/ 称为/ 任务/ 执行/ 的/ 紧迫性/ (/ Urgency/ )/ ,/ 记/ 为/ δ/ ./ 这时/ ,/ Ti/ 的/ 执行/ 紧迫性/ δ/ i/ (/ t/ )/ 可由/ 下式/ (/ 3/ )/ 得到/ 假设/ 在/ τ/ i/ 时刻/ ,/ 任务/ Ti/ 已/ 执行/ 了/ t/ 个/ 单位/ 时间/ ,/ 迫性/ 随/ 等待时间/ 的/ 增加/ 而/ 增高/ ./ 其中/ q/ (/ q/ / 1/ )/ 为/ 调节/ 任务/ 执行/ 强度/ 对/ 任务/ 执行/ 紧迫性/ 影响/ 大小/ 的/ 参数/ ./ 显然/ ,/ 任务/ 执行/ 强度/ φ/ 的/ 取值/ 区间/ 为/ (/ 0/ ,/ 1/ ]/ ,/ 因此/ 任务/ 执行/ 紧迫性/ δ/ 的/ 取值/ 区间/ 为/ (/ 1/ ,/ q/ ]/ ./ 特别/ 地/ ,/ 当/ q/ =/ 1/ 时/ ,/ 表示/ 任务/ 执行/ 的/ 紧迫性/ 为/ 常数/ ./ 定理/ 3/ ./ 当/ q/ (/ q/ >/ 1/ )/ 取定值/ 时/ ,/ 任务/ 执行/ 的/ 紧/ 证明/ ./ 假设/ 在/ τ/ i/ 时刻/ ,/ 任务/ Ti/ 已/ 执行/ 了/ t/ 个/ 单位/ 时间/ ,/ 其/ Ti/ 放行/ 后/ 的/ 累积/ 等待时间/ (/ 不/ 包括/ Ti/ 的/ 执行/ 时间/ )/ 为/ x/ ./ 因为/ di/ -/ τ/ i/ =/ Di/ -/ x/ -/ t/ (/ 0/ / x/ </ Di/ -/ t/ ,/ 0/ / t/ </ C/ )/ ,/ 其中/ ,/ di/ -/ τ/ i/ 表示/ Ti/ 的/ 空余/ 时间/ ./ 所以/ 上/ 式/ (/ 3/ )/ 可/ 改写/ 为/ δ/ i/ (/ t/ )/ =/ q/ 令/ f/ (/ x/ )/ =/ Ci/ -/ t0/ ,/ 故/ f/ (/ x/ )/ 关于/ x/ 递增/ ./ 所以/ ,/ δ/ i/ (/ t/ )/ =/ qf/ (/ x/ )/ 也/ 关于/ x/ 递增/ ./ 故原/ 命题/ 得证/ ./ 当/ 实时/ 任务/ Ti/ 开始/ 放行/ 时/ ,/ 其/ 已/ 执行/ 时间/ t/ =/ 0/ ,/ 空闲/ 时间/ 为/ Di/ ,/ 这时/ Ti/ 执行/ 的/ 紧迫性/ 最小/ ,/ 为/ qCi/ (/ Ci/ / Di/ )/ ./ 若/ 任务/ Ti/ 一直/ 处于/ 等待/ 状态/ 或者/ 执行/ 一段时间/ 后/ 被/ 抢占/ 而/ 处于/ 等待/ 状态/ ,/ 随着/ 等待时间/ 增加/ ,/ 其/ 执行/ 紧迫性/ 不断/ 增加/ ,/ 到/ 某个/ 时刻/ ,/ Ti/ 的/ 空闲/ 时间/ 恰好/ 仅够/ 用于/ 完成/ 余下/ 的/ 执行/ 任务/ 时/ ,/ 也就是说/ ,/ Ti/ 必须/ 立即/ 转为/ 执行/ 状态/ ,/ 否则/ 将/ 因为/ 没有/ 足够/ 的/ 执行/ 时间/ 而/ 夭折/ ./ 这时/ Ti/ 的/ 执行/ 紧迫性/ 达到/ 最大/ ,/ 等于/ q/ ./ 因此/ ,/ 在/ Ti/ 的/ 执行/ 期间/ 内/ ,/ 其/ 执行/ 紧迫性/ 的/ 变化/ 区间/ 为/ [/ qCi/ 对于/ 实时/ 任务/ 系统/ 各种/ 任务/ ,/ 其/ 执行/ 紧迫性/ 的/ 处理/ 方式/ 也/ 是/ 不同/ 的/ :/ (/ 1/ )/ 仅/ 考虑/ 能/ 满足/ 截止期/ 任务/ 的/ 紧迫性/ ,/ 对于/ 无法/ 满足/ 截止期/ 的/ 任务/ 则/ 直接/ 进/ 夭折/ 处理/ ;/ (/ 2/ )/ 执行/ 任务/ 的/ 紧迫性/ 等于/ 其/ 最近/ 一次/ 开始/ 执行/ 时/ 的/ 紧迫性/ ,/ 并/ 在/ 其/ 执行/ 期间/ 保持/ 不变/ ;/ (/ 3/ )/ 活动/ 任务/ 与/ 等待/ 任务/ 的/ 紧迫性/ 随其/ 等待时间/ 的/ 增加/ 而/ 逐渐/ 增大/ ;/ (/ 4/ )/ 休眠/ 任务/ 的/ 执行/ 周期/ 尚未/ 到达/ ,/ 不/ 考虑/ 其/ 紧迫性/ ./ 3.4/ 动态/ 优先级/ 分派/ DPA/ 前面/ ,/ 我们/ 根据/ 实时/ 任务/ 的/ 价值/ 与/ 执行/ 时间/ 分析/ 了/ 任务/ 的/ 剩余价值/ 密度/ ,/ 根据/ 任务/ 的/ 截止期/ 与/ 空余/ 时间/ 分析/ 了/ 任务/ 的/ 执行/ 紧迫性/ ./ 接下来/ ,/ 我们/ 将/ 综合/ 考虑/ 任务/ 的/ 剩余价值/ 密度/ 与/ 执行/ 紧迫性/ 这/ 两个/ 方面/ 的/ 因素/ ,/ 提出/ 一种/ 实时/ 任务/ 优先级/ 动态/ 分派/ 策略/ DPA/ (/ DynamicPriorityAssignment/ )/ ,/ 该/ 策略/ 将/ 致力于/ 实现/ 系统/ 价值/ 收益/ 与/ 任务/ 成功/ 执行/ 率/ 综合性/ 能/ 最优/ ./ 假设/ 在/ τ/ i/ 时刻/ ,/ 非/ 休眠/ 任务/ Ti/ 已/ 执行/ t/ 个/ 单位/ 时间/ ,/ DPA/ 策略/ 定义/ 任务/ Ti/ 的/ 动态/ 优先级/ 为/ DyPri/ (/ Ti/ )/ ,/ 其/ 理论/ 执行/ 时间/ 为/ Ci/ ,/ 预期/ 价值/ 为/ Vi/ ,/ 截止期/ 为/ di/ ,/ 则/ 称/ Ti/ 在/ τ/ i/ 时刻/ 的/ 动态/ 优先级/ 为/ DyPri/ (/ Ti/ )/ ,/ 且/ DyPri/ (/ Ti/ )/ 可以/ 由下式/ 得到/ ./ DyPri/ (/ Ti/ )/ =/ RVD/ (/ t/ )/ ×/ δ/ (/ t/ )/ =/ (/ Cp/ 定义/ 6/ (/ 基本/ 优先级/ )/ ./ 根据/ DPA/ 策略/ ,/ 实时/ 任务/ 在/ 其/ 执行/ 周期/ 内/ 优先级/ 的/ 最小值/ 称为/ 该/ 任务/ 的/ 基本/ 优先级/ ./ 根据/ 3.2/ 及/ 3.3/ 节/ 的/ 分析/ ,/ 当/ 任务/ Ti/ 放行/ 时/ ,/ 其/ 剩余价值/ 密度/ 及/ 执行/ 紧迫性/ 均/ 为/ 最小值/ ,/ 分别/ 为/ ViCi/ 和/ qCiminDyPri/ (/ Ti/ )/ =/ min/ (/ RVDi/ (/ t/ )/ )/ ×/ min/ (/ δ/ i/ (/ t/ )/ )/ =/ Di/ ×/ ViCi/ ./ 显然/ ,/ Ti/ 的/ 基本/ 优先级/ 仅/ 与/ 任务/ 本身/ 属性/ qCiPage6/ 及/ 参数/ q/ 有关/ ,/ 而/ 与/ Ti/ 运行/ 时/ 的/ 时间/ 参数/ 无关/ ./ 随着/ Ti/ 等待时间/ 或者/ 已/ 执行/ 时间/ 的/ 增加/ ,/ Ti/ 的/ 剩余价值/ 密度/ 或/ 执行/ 紧迫性/ 不断/ 增加/ ,/ 或者/ 二者/ 均/ 增加/ ./ 当/ 某个/ 时刻/ ,/ Ti/ 的/ 剩余价值/ 密度/ 和/ 执行/ 紧迫性/ 均/ 到达/ 最大/ 时/ ,/ Ti/ 的/ 优先级/ 到达/ 最大/ ,/ maxDyPri/ (/ Ti/ )/ =/ max/ (/ RVDi/ (/ t/ )/ )/ ×/ max/ (/ δ/ i/ (/ t/ )/ )/ =/ pq/ ×/ ViCi/ ./ 假设/ 当/ 实时/ 系统/ 开始运行/ 时/ ,/ 所有/ 任务/ 同时/ 放行/ ,/ 这时/ ,/ 基本/ 优先级/ 最高/ 的/ 任务/ 首先/ 获得/ 系统/ 执行权/ ./ 然后/ ,/ 随着/ 系统/ 时间/ 的/ 推移/ ,/ 系统/ 中/ 各个/ 任务/ 的/ 优先级/ 动态变化/ ./ 对于/ 执行/ 任务/ ,/ 其/ 执行/ 紧迫性/ 保持/ 不变/ (/ 3.3/ 节/ )/ ,/ 但/ 其/ 剩余价值/ 密度/ 随着/ 已/ 执行/ 时间/ 的/ 增加/ 而/ 不断/ 增加/ ,/ 这/ 在/ 一定/ 程度/ 上/ 保护/ 了/ 执行/ 任务/ 不/ 被/ 其它/ 任务/ 抢占/ ;/ 对于/ 等待/ 任务/ 与/ 活动/ 任务/ ,/ 其/ 剩余价值/ 密度/ 保持/ 不变/ ,/ 但/ 随着/ 其/ 等待时间/ 的/ 增加/ ,/ 其/ 执行/ 紧迫性/ 不断/ 增加/ ,/ 这/ 给/ 它们/ 提供/ 了/ 抢占/ 系统/ 执行权/ 的/ 机会/ ./ 此外/ ,/ 通过/ 调节/ 参数/ p/ 与/ q/ 的/ 取值/ ,/ 还/ 可以/ 调节/ 任务/ 剩余价值/ 密度/ 及/ 执行/ 紧迫性/ 对/ 任务/ 动态/ 优先级/ 的/ 影响力/ ./ 若/ p/ 值/ 较大/ 时/ ,/ 剩余价值/ 密度/ 大/ 的/ 任务/ 将/ 优先/ 获得/ 系统/ 的/ 执行权/ ,/ 故能/ 提高/ 系统/ 累积/ 价值/ 收益/ ./ 此外/ ,/ 执行/ 任务/ 的/ 剩余价值/ 密度/ 随已/ 执行/ 时间/ 增加/ 而/ 增大/ ,/ 能够/ 减少/ 执行/ 任务/ 被/ 抢占/ 而/ 夭折/ 的/ 概率/ ,/ 进而/ 减少/ 了/ 任务/ 抢占/ 的/ 次数/ ,/ 提高/ 任务/ 的/ 成功/ 执行/ 率/ ./ 若/ q/ 的/ 值/ 较大/ 时/ ,/ 执行/ 紧迫性/ 高/ 的/ 任务/ 将/ 优先/ 获得/ 系统/ 的/ 执行权/ ,/ 可以/ 增加/ 价值/ 密度/ 低/ 的/ 任务/ 参与/ 系统/ 执行/ 的/ 机会/ ./ 但是/ ,/ 等待/ 任务/ 或/ 活动/ 任务/ 的/ 紧迫性/ 随/ 等待时间/ 增加/ 而/ 增高/ ,/ 使/ 任务/ 抢占/ 的/ 概率/ 大大增加/ ,/ 可能/ 会/ 造成/ 部分/ 价值/ 密度/ 大/ 的/ 任务/ 夭折/ 而/ 降低/ 系统/ 累积/ 价值/ 收益/ ./ 4/ 动态/ 抢占/ 调度/ 策略/ DRTP/ 前面/ ,/ 我们/ 已经/ 讨论/ 了/ 基于/ 任务/ 剩余价值/ 密度/ 及/ 执行/ 紧迫性/ 的/ 动态/ 优先级/ 分派/ 策略/ DPA/ ./ 本节/ 中/ ,/ 我们/ 将/ 基于/ 该/ 策略/ 提出/ 一种/ 新/ 的/ 实时/ 任务/ 动态/ 抢占/ 的/ 调度/ 算法/ ./ 4.1/ 系统/ 颠簸/ 及/ 避免/ 在/ 基于/ 动态/ 优先级/ 的/ 实时/ 系统/ 中/ ,/ 两个/ 或/ 多个/ 任务/ 优先级/ 交替/ 上升/ 而/ 导致/ 任务/ 之间/ 反复/ 抢占/ 的/ 现象/ ,/ 称为/ 系统/ 颠簸/ 现象/ [/ 16/ ]/ ./ 实时/ 任务/ 之间/ 的/ 抢占/ 需要/ 进行/ 上下文/ 切换/ ,/ 消耗/ 系统资源/ ./ 而/ 系统/ 颠簸/ 则/ 是/ 一种/ 频繁/ 的/ 任务/ 抢占/ ,/ 将/ 导致系统/ 的/ 额外/ 开销/ 大大增加/ ./ 根据/ 3.4/ 节/ 分析/ ,/ 在/ 基于/ 任务/ 剩余价值/ 密度/ 及/ 执行/ 紧迫性/ 的/ 动态/ 优先级/ 分派/ 策略/ 中/ ,/ 由于/ 参数/ p/ 、/ q/ 取值/ 不/ 同时/ ,/ 可能/ 造成/ 执行/ 任务/ 与非/ 执行/ 任务/ (/ 不/ 包括/ 休眠/ 任务/ )/ 优先级/ 交替/ 增大/ 的/ 现象/ ./ 为了/ 避免/ 可能/ 出现/ 的/ 系统/ 颠簸/ 现象/ ,/ 本文/ 设定/ 一个/ 任务/ 抢占/ 门限/ ,/ 避免/ 优先级/ 差别/ 很小/ 任务/ 间/ 的/ 抢占/ ./ 假设/ 给定/ 一个/ 颠簸/ 避免/ 系数/ β/ (/ β/ / 1/ )/ ,/ 对于/ 任意/ 两个/ 任务/ T2/ 与/ T1/ ,/ T1/ 为/ 执行/ 任务/ ./ 某一/ 时刻/ ,/ 它们/ 的/ 优先级/ 分别/ 为/ DyPri/ (/ T1/ )/ 与/ DyPri/ (/ T2/ )/ ./ 如果/ 仅当/ DyPri/ (/ T2/ )/ / β/ ×/ DyPri/ (/ T1/ )/ 时/ ,/ 方/ 许可/ T2/ 抢占/ T1/ ,/ 那么/ 可以/ 避免/ T2/ 与/ T1/ 之间/ 抢占/ ./ 考虑/ 任务/ T2/ 与/ T1/ 的/ 任意性/ ,/ 根据/ 下面/ 的/ 定理/ 4/ ,/ 总能/ 找到/ 一个/ 能够/ 避免/ 系统/ 颠簸/ 现象/ 的/ 颠簸/ 避免/ 系数/ β/ ./ 定理/ 4/ ./ 给定/ 一个/ 任务/ 集/ ,/ 总/ 存在/ 一个/ 颠簸/ 避免/ 系数/ β/ 能/ 使得/ 系统/ 避免出现/ 系统/ 颠簸/ ./ 证明/ ./ 给定/ 一个/ 实时/ 任务/ 集/ ,/ 记/ 其中/ 平均/ 价值/ 密度/ 最大/ 的/ 任务/ 为/ T1/ ,/ 平均/ 价值/ 密度/ 最小/ 的/ 任务/ 为/ T2/ ./ 假设/ 在/ τ/ i/ 时刻/ ,/ T1/ 为/ 执行/ 任务/ ,/ 且/ 已/ 执行/ 了/ t1/ (/ t1/ >/ 0/ )/ 个/ 单位/ 时间/ ,/ T2/ 为/ 非/ 执行/ 任务/ ,/ 已/ 执行/ 了/ t2/ (/ t2/ / 0/ )/ 个/ 单位/ 时间/ ,/ 这时/ T1/ 与/ T2/ 的/ 优先级/ 分别/ 记为/ DyPri/ (/ T1/ )/ 与/ DyPri/ (/ T2/ )/ ./ 这时/ ,/ 若/ 允许/ 任务/ T2/ 能够/ 抢占/ T1/ ,/ 则/ 有/ 下式/ (/ 5/ )/ 中/ 的/ 条件/ 成立/ :/ 假设/ T2/ 抢占/ T1/ 后/ ,/ 执行/ 了/ x/ 个/ 单位/ 时间/ ,/ 即/ 到/ 了/ τ/ i/ +/ x/ 时刻/ ,/ T1/ 与/ T2/ 的/ 优先级/ 分别/ 为/ DyPri/ (/ T1/ )/ 与/ DyPri/ (/ T2/ )/ ./ 为了/ 避免/ 系统/ 出现/ 颠簸/ 现象/ ,/ 我们/ 强制/ 要求/ ,/ 在/ T2/ 抢占/ T1/ 后/ ,/ T1/ 不能/ 再/ 去/ 抢占/ T2/ ./ 因此/ ,/ 必须/ 满足/ 下/ 式/ (/ 6/ )/ 中/ 的/ 条件/ :/ 根据/ 式/ (/ 6/ )/ ,/ 显然/ 有/ β/ >/ DyPri/ (/ T1/ )/ 下面/ 考虑/ 一种/ 极端/ 情况/ :/ 假设/ 在/ τ/ i/ 时刻/ ,/ 任务/ T1/ 为/ 执行/ 任务/ ,/ 其/ 剩余价值/ 密度/ 最大/ ,/ 为/ p/ ×/ VD1/ ,/ VD1/ =/ V1C1/ 任务/ ,/ 其/ 剩余价值/ 密度/ 最小/ ,/ 为/ VD2/ ,/ VD2/ =/ V2C2/ 行/ 紧迫性/ 也/ 最小/ ,/ 为/ qC2/ 行/ 状态/ 转变/ 为/ 等待/ 状态/ ,/ 其/ 剩余价值/ 密度/ 保持/ 不变/ ,/ 执行/ 紧迫性/ 逐渐/ 增大/ ;/ T2/ 从/ 等待/ 状态/ 转变/ 为/ 执行/ 状态/ ,/ 其/ 执行/ 紧迫性/ 保持/ 不变/ ,/ 剩余价值/ 密度/ 逐渐/ 增大/ ./ 到/ τ/ i/ +/ x/ 时刻/ ,/ T1/ 执行/ 紧迫性/ 从/ 最小值/ 增加/ 到/ 最大值/ q/ ./ 假设/ x/ 足够/ 小/ ,/ T2/ 剩余价值/ 密度/ 增幅/ 足够/ 小/ ,/ 以致/ 可以/ 忽略/ ,/ 因此/ 有/ β/ / maxDyPri/ (/ T1/ )/ Page7maxDyPri/ (/ T1/ (/ minDyPri/ (/ T2/ (/ 因为/ 在/ τ/ i/ 时刻/ ,/ T1/ 为/ 执行/ 任务/ ,/ T2/ 为/ 等待/ 任务/ ,/ 根据/ 3.4/ 节中/ 的/ 分析/ ,/ 显然/ 有/ VD1/ >/ VD2/ ./ 又/ 因为/ q/ / 1/ 且/ C2/ / D2/ ,/ 显然/ 有/ q/ / qC2/ 因此/ ,/ 当式/ (/ 7/ )/ 成立/ 时/ ,/ 系统/ 一定/ 能够/ 避免/ 颠簸/ 现象/ ./ 故原/ 命题/ 得证/ ./ 4.2/ 基于/ 动态/ 优先级/ 的/ 抢占/ 调度/ 在/ 实时/ 任务/ 系统/ 中/ ,/ 休眠/ 任务/ 的/ 执行/ 周期/ 尚未/ 到达/ ./ 因此/ ,/ 在/ 基于/ 动态/ 优先级/ 的/ 实时/ 任务调度/ 时/ ,/ 仅/ 需/ 考虑/ 执行/ 任务/ 、/ 活动/ 任务/ 以及/ 等待/ 任务/ ./ 在/ 任务调度/ 时/ ,/ 通过/ 计算/ 各个/ 任务/ 的/ 动态/ 优先级/ ,/ 并/ 将/ 活动/ 任务/ 及/ 等待/ 任务/ 中/ 优先级/ 最高/ 的/ 任务/ 与/ 执行/ 任务/ 的/ 优先级/ 进行/ 比较/ ,/ 并/ 根据/ 相应/ 的/ 策略/ 调度/ ,/ 从而/ 使/ 系统/ 获得最佳/ 性能/ ./ 假设/ 在/ τ/ i/ 时刻/ ,/ T1/ 为/ 执行/ 任务/ ,/ 且/ 已/ 执行/ 了/ t1/ (/ 0/ / t1/ </ C1/ )/ 个/ 单位/ 时间/ ./ 此时/ ,/ 记/ T1/ 的/ 优先级/ 为/ DyPri/ (/ T1/ )/ ,/ 它/ 保证/ 截止期/ 的/ 基本/ 条件/ 为/ d1/ -/ τ/ i/ / C1/ -/ t1/ ./ T2/ 是/ 所有/ 活动/ 任务/ 及/ 等待/ 任务/ 中/ 优先级/ 最高/ 的/ 任务/ ,/ 且/ 已/ 执行/ 了/ t2/ (/ 0/ / t2/ </ C2/ )/ 个/ 单位/ 时间/ ./ 此时/ ,/ T2/ 的/ 优先级/ 为/ DyPri/ (/ T2/ )/ ,/ 它/ 保证/ 截止期/ 的/ 基本/ 条件/ 为/ d2/ -/ τ/ i/ / C2/ -/ t2/ ./ 那么/ ,/ 基于/ 动态/ 优先级/ 的/ 抢占/ 调度/ 策略/ 说明/ 如下/ :/ (/ 1/ )/ 如果/ DyPri/ (/ T2/ )/ </ β/ ×/ DyPri/ (/ T1/ )/ ,/ 任务/ T2/ 未能/ 满足/ 抢占/ 任务/ T1/ 的/ 条件/ ./ T1/ 继续执行/ ,/ T2/ 保持/ 原/ 状态/ ;/ (/ 2/ )/ 如果/ DyPri/ (/ T2/ )/ / β/ ×/ DyPri/ (/ T1/ )/ ,/ 任务/ T2/ 满足/ 抢占/ 任务/ T1/ 的/ 条件/ ./ 此时/ ,/ 根据/ T2/ 的/ 截止期/ 可/ 有/ 如下/ 两种/ 不同/ 的/ 处理/ 策略/ :/ (/ a/ )/ 如果/ 条件/ d2/ -/ τ/ i/ -/ (/ C1/ -/ t1/ )/ / C2/ -/ t2/ 与/ d1/ -/ τ/ i/ -/ (/ C2/ -/ t2/ )/ / C1/ -/ t1/ 同时/ 成立/ ,/ 说明/ 如果/ T2/ 等待/ T1/ 提交/ 后/ 才/ 开始/ 执行/ ,/ T2/ 仍能/ 保证/ 其/ 截止期/ ;/ 而/ 若/ T2/ 抢占/ T1/ ,/ T1/ 等待/ T2/ 提交/ 后/ 再/ 继续执行/ ,/ T1/ 也/ 能/ 满足/ 截止期/ ,/ 这时/ 可/ 按/ 调度/ 策略/ I/ (/ 参见/ 4.2/ ./ 1/ 节/ )/ 处理/ ;/ (/ b/ )/ 如果/ 条件/ d2/ -/ τ/ i/ -/ (/ C1/ -/ t1/ )/ </ C2/ -/ t2/ 成立/ ,/ 说明/ 若/ T2/ 不/ 抢占/ T1/ ,/ T2/ 将/ 无法/ 保证/ 截止期/ ,/ 因此/ 必须/ 实施/ 抢占/ ./ 这时/ ,/ 根据/ T1/ 被/ 抢占/ 后/ 是否/ 夭折/ ,/ 可/ 分/ 如下/ 两种/ 不同/ 处理/ 策略/ :/ (/ i/ )/ 如果/ 条件/ d1/ -/ τ/ i/ -/ (/ C2/ -/ t2/ )/ / C1/ -/ t1/ 成立/ ,/ 则/ 说明/ T2/ 抢占/ T1/ ,/ T1/ 等待/ T2/ 提交/ 后/ 继续执行/ 仍能/ 满足/ 截止期/ ,/ 这时/ 可/ 按/ 调度/ 策略/ II/ (/ 参见/ 4.2/ ./ 2/ 节/ )/ 处理/ ;/ (/ ii/ )/ 如果/ 条件/ d1/ -/ τ/ i/ -/ (/ C2/ -/ t2/ )/ </ C1/ -/ t1/ 成立/ ,/ 则/ 说明/ T2/ 抢占/ T1/ 后/ ,/ T1/ 将/ 无法/ 满足/ 截止期/ 而/ 夭折/ ,/ 这时/ 则/ 按照/ 调度/ 策略/ III/ (/ 参见/ 4.2/ ./ 3/ 节/ )/ 处理/ ./ 4.2/ ./ 1/ 调度/ 策略/ I/ 实施/ 调度/ 策略/ I/ 的/ 前提条件/ 是/ :/ 任务/ T2/ 满足/ 抢占/ 任务/ T1/ 的/ 基本/ 条件/ ,/ 且/ 在/ 无/ 其它/ 影响/ 条件/ 下/ ,/ 无论/ T2/ 抢占/ T1/ 与否/ ,/ T1/ 与/ T2/ 都/ 能/ 满足/ 截止期/ ./ 这时/ 可/ 有/ 两种/ 不同/ 的/ 处理/ 策略/ :/ 乐观/ 处理/ 策略/ 与/ 悲观/ 处理/ 策略/ ./ (/ 1/ )/ 乐观/ 处理/ 策略/ 乐观/ 处理/ 策略/ 是/ 任务/ T2/ 不/ 抢占/ 任务/ T1/ ,/ T2/ 等待/ T1/ 提交/ 后/ 才/ 开始/ 执行/ ./ 乐观/ 处理/ 策略/ 的/ 处理/ 步骤/ 为/ :/ 任务/ T1/ 继续执行/ ,/ 等到/ T1/ 成功/ 提交/ 后/ ,/ 将/ T2/ 的/ 优先级/ 设定/ 为/ maxDyPri/ (/ T1/ )/ ,/ DyPri/ (/ T2/ 中/ ,/ DyPri/ (/ T1/ )/ 为/ T1/ 等待/ T2/ 执行/ (/ 即/ 等待/ C2/ -/ t2/ 个/ 单位/ 时间/ )/ ,/ 直到/ T2/ 提交/ 时/ 的/ 优先级/ ;/ DyPri/ (/ T2/ )/ 为/ T2/ 等待/ T1/ 执行/ (/ 即/ 等待/ C1/ -/ t1/ 个/ 单位/ 时间/ )/ ,/ 直到/ T1/ 提交/ 时/ 的/ 优先级/ ./ (/ 2/ )/ 悲观/ 处理/ 策略/ 悲观/ 处理/ 策略/ 是/ T2/ 抢占/ T1/ ./ 悲观/ 处理/ 策略/ 的/ 处理/ 步骤/ 为/ :/ 暂停/ 任务/ T1/ 的/ 执行/ 进程/ ,/ 执行/ 任务/ T2/ ,/ T1/ 等待/ 到/ T2/ 提交/ 后/ 再/ 继续执行/ ./ 显然/ ,/ 乐观/ 处理/ 策略/ 可以/ 减少/ 任务/ 间/ 不必要/ 的/ 上下文/ 切换/ ,/ 提高/ 系统/ 的/ 效率/ ,/ 而/ 悲观/ 处理/ 可以/ 避免/ 因/ 其它/ 因素/ 影响/ 导致/ 高/ 优先级/ 任务/ T2/ 无法/ 满足/ 截止期/ ./ 在/ 实际/ 的/ 实时/ 任务/ 系统/ 中/ ,/ 实时/ 任务/ 的/ 数量/ 很多/ ./ 如果/ T2/ 具有/ 较/ 高/ 的/ 基本/ 优先级/ ,/ 即使/ 等待/ T1/ 提交/ 后/ ,/ T2/ 仍然/ 有/ 较大/ 可能性/ 获得/ 系统/ 执行权/ ,/ 那么/ ,/ 则/ 采用/ 乐观/ 处理/ 策略/ ,/ 否则/ ,/ 采用/ 悲观/ 处理/ 策略/ ./ 4.2/ ./ 2/ 调度/ 策略/ II/ 调度/ 策略/ II/ 也/ 称为/ 不/ 夭折/ 抢占/ 调度/ 策略/ ,/ 具体/ 处理/ 步骤/ 为/ :/ 暂停/ 任务/ T1/ 的/ 执行/ 进程/ ,/ 执行/ 任务/ T2/ ,/ T1/ 等待/ 到/ T2/ 提交/ 后/ 再/ 继续执行/ ./ 4.2/ ./ 3/ 调度/ 策略/ III/ 若/ 任务/ T1/ 被/ 任务/ T2/ 抢占/ 后/ 会/ 错过/ 截止期/ 而/ 夭折/ ,/ 那么/ ,/ 夭折/ T1/ 将/ 使/ T1/ 已/ 产生/ 的/ 即时/ 价值/ 无效/ ./ 因此/ ,/ 若/ T2/ 夭折/ T1/ ,/ T2/ 需要/ 弥补/ 因/ T1/ 夭折/ 而/ 损失/ 的/ 即时/ 价值/ ./ 假设/ 在/ τ/ i/ 时刻/ ,/ T1/ 已/ 执行/ 的/ 时间/ 为/ t1/ ,/ T2/ 已/ 执行/ 的/ 时间/ 为/ t2/ ,/ 则/ 若/ T2/ 能/ 抢占/ T1/ ,/ 则/ 还/ 应/ 满足/ 如下/ 条件/ :/ CpPage8/ β/ ×/ (/ CpCp/ (/ 其中/ V2/ -/ V1/ ×/ tp/ 期/ 价值/ ,/ V1/ ×/ tp/ 综上/ 分析/ ,/ 基于/ 动态/ 优先级/ 的/ 实时/ 任务调度/ 算法/ 具体/ 如下/ :/ Notations/ :/ ·/ C/ ,/ V/ ,/ d/ ,/ τ/ i/ ,/ t/ ,/ p/ ,/ q/ ,/ β/ havebeendepictedinthepaper/ ·/ Tctheexecutingtransaction/ ·/ Qthequeueoftransactionsincludingwaitingtransac/ -/ tionsandactivetransactions/ ·/ TithetransactioninQwhichhasthemaximumpriorityProcedure/ :/ PriorityAssignment/ (/ Tj/ )/ // // DPAstrategyBeginif/ (/ TjisTcorTj/ ∈/ Q/ )/ elseEndProcedure/ :/ TransSchudling/ (/ Tc/ ,/ Q/ )/ // // DRTPalgorithmBeginSetthevalueof/ β/ basedonformula/ (/ 7/ )/ ;/ Foreach/ (/ transactionTjintheQ/ )/ DyPri/ (/ Ti/ )/ =/ max/ (/ DyPri/ (/ Tj/ )/ )/ ,/ hereTj/ ∈/ Q/ ;/ ifDyPri/ (/ Ti/ )/ / β/ ×/ DyPri/ (/ Tc/ )/ thenelseEnd5/ 仿真/ 实验/ 所有/ 实验/ 均/ 在/ CPU/ 为/ AMDAthlon2/ ./ 0GHz/ ,/ 内存/ 为/ 512MB/ 的/ PC机/ 上/ 运行/ ,/ 实验/ 程序/ 采用/ C语言/ 实现/ ./ 实验/ 中/ 所有/ 任务/ 的/ 时间/ 参数/ C/ 、/ D/ 与/ P/ 均/ 随机/ 产生/ ,/ 且/ 满足/ C/ </ D/ / P/ ./ 实验/ 首先/ 分析/ 算法/ DRTP/ 的/ 基本/ 性能/ ,/ 然后/ 将/ 其同/ GEDF/ [/ 17/ ]/ 、/ HVF/ [/ 2/ ]/ 及/ DVD/ [/ 13/ ]/ 算法/ 进行/ 对比/ 分析/ ./ 实验/ 中/ 采用/ 3/ 项/ 性能指标/ 来/ 评价/ 算法/ 优劣/ :/ 系统/ 累积/ 价值/ 收益/ [/ 24/ ]/ (/ TotalValue/ ,/ TV/ )/ 、/ 任务/ 抢占/ 次数/ (/ PreemptionNumber/ ,/ PN/ )/ 以及/ 任务/ 截止期/ 错失/ 率/ (/ MissDeadlineRatio/ ,/ MDR/ )/ ./ 5.1/ 基本/ 性能/ 分析/ 在/ 基本/ 性能/ 实验/ 中/ ,/ 我们/ 假定/ 实时/ 系统/ 包括/ 4/ 个/ 实时/ 任务/ (/ 如表/ 1/ 所示/ )/ ,/ 且/ 系统/ 负载/ 为/ 2.0/ ./ 实验/ 中/ ,/ 通过/ 3/ 组/ 实验/ 分别/ 变换/ 参数/ p/ 、/ q/ 以及/ β/ 的/ 值来/ 观察/ DRTP/ 算法/ 的/ 性能指标/ ./ 任务/ CDSVVDT191116606/ ./ 667T278118011/ ./ 429T32784020/ ./ 0T4569306/ ./ 0/ 实验/ 1/ ./ 固定/ 参数/ q/ =/ 2/ ,/ 改变/ 参数/ p/ 的/ 值/ ,/ 分析/ p/ 对/ 算法/ 性能/ 的/ 影响/ ,/ 实验/ 根据/ 式/ (/ 7/ )/ 选取/ 参数/ β/ 的/ 值/ ./ 实验/ 结果/ 如图/ 2/ 所示/ ,/ 随着/ p/ 值/ 增大/ ,/ 任务/ 剩余价值/ 密度/ 对/ 优先级/ 的/ 影响/ 增大/ ,/ 任务/ 执行/ 紧迫性/ 对/ 优先级/ 的/ 影响/ 相对/ 减小/ ./ 因此/ 在/ 任务调度/ 时/ ,/ 剩余价值/ 密度/ 高/ 的/ 任务/ 优先/ 获得/ 执行权/ ,/ 且/ 不易/ 被/ 抢占/ ,/ 大大提高/ 了/ 价值/ 密度/ 大/ 的/ 任务/ 的/ 成功/ 执行/ 率及/ 系统/ 的/ 累积/ 价值/ 收益/ (/ 如图/ 2/ (/ a/ )/ 所示/ )/ ./ 此外/ ,/ q/ 值/ 一定/ 时/ ,/ 颠簸/ 避免/ 系数/ β/ 的/ 值/ 随/ p/ 值/ 增大/ 而/ 增大/ ,/ 使/ 任务/ 间/ 抢占/ 的/ 困难/ 加大/ ./ 因此/ ,/ 如图/ 2/ (/ b/ )/ 所示/ ,/ 当/ p/ 值/ 增大/ 时/ ,/ 任务/ 之间/ 的/ 抢占/ 次数/ 逐渐/ 减少/ ./ 根据/ 3.2/ 节中/ 的/ 分析/ ,/ 当/ p/ 值/ 增大/ 时/ ,/ 执行/ 任务/ 的/ 动态/ 价值/ 密度/ 增幅/ 越大/ ,/ 因而/ 不易/ 被/ 抢占/ ,/ 保证/ 执行/ 任务/ 能够/ 正常/ 完成/ ./ 因此/ ,/ 如图/ 2/ (/ c/ )/ 所示/ ,/ 任务/ 截止期/ 错失/ 率/ 随/ p/ 的/ 增加/ 而/ 减小/ ./ 此外/ ,/ 图/ 2/ 中/ 所示/ 的/ 3/ 项/ 性能指标/ 都/ 说明/ :/ 当/ p/ 增大/ 到/ 一定/ 值/ (/ 等于/ 2.5/ )/ 后/ ,/ 系统/ 性能/ 基本/ 不变/ ./ 这/ 是因为/ ,/ 当/ p/ 值/ 增大/ 到/ 一定/ 值时/ ,/ 任务/ 的/ 剩余价值/ 密度/ 对/ 优先级/ 的/ 影响/ 足够/ 大/ ,/ 以致于/ 可以/ 忽略/ 任务/ 执行/ 紧迫性/ 对/ 优先级/ 的/ 影响/ ./ 这时/ ,/ 即使/ 继续/ 增大/ p/ 值/ ,/ 任务/ 优先级/ 也/ 不会/ 有/ 明显/ 的/ 变化/ ,/ 因此/ 对/ 任务/ 执行/ 的/ 结果/ 也/ 没有/ 明显/ 的/ 影响/ ./ 实验/ 2/ ./ 固定/ 参数/ p/ =/ 2/ ,/ 改变/ 参数/ q/ 的/ 值/ ,/ 分析/ p/ 对系统/ 性能/ 的/ 影响/ ,/ 同样/ 地/ ,/ 根据/ 式/ (/ 7/ )/ 选取/ 参数/ β/ 的/ 值/ ./ 实验/ 结果/ 如图/ 3/ 所示/ ,/ 随着/ q/ 值/ 增大/ ,/ 任务/ 执行/ 紧迫性/ 对/ 优先级/ 的/ 影响/ 增大/ ,/ 任务/ 剩余价值/ 密度/ 对/ 优先级/ 的/ 影响/ 相对/ 减小/ ./ 因此/ 在/ 任务调度/ 时/ ,/ 执行/ 紧迫性/ 高/ 的/ 任务/ 优先/ 获得/ 系统/ 执行权/ ./ 因此/ ,/ 如/ Page9/ 图/ 2/ 负载/ 为/ 2.0/ ,/ 变化/ 参数/ p/ 时/ 的/ 系统/ 性能/ 分析/ 图/ 3/ (/ a/ )/ 所示/ ,/ 系统/ 的/ 价值/ 总/ 收益/ 随着/ q/ 值/ 增大/ 而/ 逐步/ 减小/ ./ 此外/ ,/ 由于/ 执行/ 任务/ 的/ 紧迫性/ 在/ 执行/ 期间/ 保持/ 不变/ ,/ 而/ 非/ 执行/ 任务/ (/ 活动/ 任务/ 与/ 等待/ 任务/ )/ 的/ 紧迫性/ 随着/ 其/ 截止期/ 的/ 临近/ 而/ 不断/ 增加/ ./ 在/ 任务调度/ 过程/ 中/ ,/ 执行/ 任务/ 与非/ 执行/ 任务/ 的/ 优先级/ 可能/ 交替/ 上升/ ,/ 且/ q/ 值越/ 大/ ,/ 这种/ 优先级/ 交替/ 上升/ 的/ 速度/ 越快/ ./ 因此/ ,/ 如图/ 3/ (/ b/ )/ 所示/ ,/ 任务/ 间/ 抢占/ 的/ 概率/ 大大增加/ ./ 此外/ ,/ 由于/ 执行/ 任务/ 与非/ 执行/ 任务/ 频繁/ 相互/ 抢占/ ,/ 很/ 容易/ 造成/ 任务/ 因/ 无法/ 获得/ 足够/ 的/ CPU/ 时间/ 而/ 错过/ 截止期/ ,/ 导致/ 任务/ 截止期/ 错失/ 率/ 增大/ ,/ 结果/ 如图/ 3/ (/ c/ )/ 所示/ ./ 同样/ 地/ ,/ 实验/ 2/ 的/ 3/ 项/ 性能指标/ 都/ 说明/ :/ 当/ 参数/ q/ 增大/ 到/ 一定/ 值/ (/ 3.5/ )/ 以后/ ,/ 任务/ 紧迫性/ 对/ 任务/ 优先级/ 的/ 影响/ 足够/ 大/ ,/ 从而/ 可以/ 忽略/ 任务/ 价值/ 密度/ 对/ 任务/ 优先级/ 的/ 影响/ ./ 这时/ ,/ 即使/ 再/ 增大/ q/ 的/ 值/ ,/ 也/ 不会/ 造成/ 任务/ 优先/ 有/ 明显/ 的/ 变化/ ,/ 因此/ 对/ 任务/ 执行/ 的/ 结图/ 3/ 负载/ 为/ 2.0/ ,/ 变化/ 参数/ q/ 时/ 的/ 系统/ 性能/ 分析/ 图/ 4/ 负载/ 为/ 2.0/ ,/ 变化/ 参数/ β/ 时/ 的/ 系统/ 性能/ 分析/ 果/ 也/ 不会/ 有/ 明显/ 的/ 影响/ ./ 实验/ 3/ ./ 固定/ 参数/ p/ =/ 2/ ,/ q/ =/ 2/ ,/ 改变/ 颠簸/ 避免/ 系数/ β/ 的/ 值/ ,/ 分析/ β/ 对系统/ 性能/ 的/ 影响/ ./ 根据/ 4.1/ 节/ 分析/ ,/ 若/ 保证系统/ 无/ 颠簸/ ,/ β/ 理论/ 取值/ 应/ 不/ 小于/ 7.5/ ./ 如图/ 4/ 所示/ ,/ 当/ β/ 取值/ 很/ 小时/ ,/ 任务/ 间/ 可能/ 出现/ 相互/ 抢占/ 现象/ ,/ 造成/ 任务/ 错失/ 截止期/ 的/ 概率/ 增大/ ,/ 系统/ 累积/ 价值/ 收益/ 减少/ ./ 随着/ β/ 值/ 增大/ ,/ 任务/ 间/ 抢占/ 的/ 难度/ 增大/ ,/ 系统/ 抢占/ 次数/ 以及/ 任务/ 截止期/ 错失/ 率/ 大大减少/ ,/ 系统/ 累积/ 价值/ 收益/ 增大/ ./ 从图/ 4/ 还/ 可以/ 看出/ ,/ 当/ β/ 大于/ 3/ 时/ ,/ 系统/ 的/ 抢占/ 次数/ 、/ 任务/ 截止期/ 错失/ 率及/ 系统/ 价值/ 收益/ 基本/ 保持/ 不变/ ./ 这/ 说明/ 在/ 实验/ 中/ ,/ 当/ β/ 大于/ 3/ 时/ ,/ 系统/ 中/ 出现/ 的/ 抢占/ 都/ 是/ 正常/ 的/ ,/ 基本上/ 不/ 存在/ 任务/ 间/ 相互/ 交替/ 抢占/ 现象/ ./ 这时/ ,/ 继续/ 增大/ β/ 的/ 值/ ,/ 不会/ 明显/ 减少/ 任务/ 之间/ 抢占/ 次数/ ,/ 对系统/ 累积/ 价值/ 收益/ 以及/ 任务/ 截止期/ 错失/ 率/ 影响/ 都/ 很小/ ./ Page105/ ./ 2/ 性能/ 比较/ 分析/ 性能/ 对比/ 实验/ 将/ DRTP/ 算法/ 与/ GEDF/ [/ 17/ ]/ 、/ HVF/ [/ 2/ ]/ 及/ DVD/ [/ 13/ ]/ 算法/ 进行/ 对比/ 分析/ ,/ 实验/ 分别/ 在/ 负载/ 为/ 0.5/ ~/ 3.0/ 的/ 实时/ 系统/ 中/ 进行/ ./ 每种/ 负载/ 条件/ 下/ ,/ 实验/ 选择/ 3/ 组/ 不同/ 任务/ 集/ 分别/ 进行/ 并取/ 平均值/ ,/ 实验/ 结果/ 见图/ 5/ ./ 如图/ 5/ (/ a/ )/ 和/ (/ b/ )/ 所示/ ,/ 当/ 系统/ 负载/ 较/ 小/ (/ / 1/ )/ 时/ ,/ DRTP/ 算法/ 并/ 没有/ 任何/ 优势/ ,/ 系统/ 的/ 价值/ 收益/ TV/ 及/ 截止期/ 错失/ 率/ MDR/ 均/ 比/ GEDF/ 算法/ 差/ ./ 这/ 是因为/ ,/ 当/ 系统/ 负载/ 较/ 低时/ ,/ 只要/ 能够/ 合理安排/ 截止期/ 早/ 的/ 任务/ 优先/ 执行/ 就/ 能/ 保证/ 绝大部分/ 任务/ 正常/ 完成/ ,/ 而/ GEDF/ 算法/ 在/ 这方面/ 做/ 得/ 最好/ ./ 而/ 基于/ 价值/ (/ 密度/ )/ 的/ 调度/ 算法/ 则/ 优先选择/ 价值/ (/ 密度/ )/ 大/ 的/ 任务/ 图/ 54/ 种/ 算法/ 在/ 不同/ 系统/ 负载/ 下/ 的/ 性能/ 对比/ 分析/ 6/ 总结/ 论文/ 研究/ 了/ 任务/ 剩余价值/ 密度/ 及/ 执行/ 紧迫性/ 随/ 时间/ 变化/ 的/ 特性/ ,/ 并/ 综合/ 这/ 两/ 方面/ 因素/ ,/ 提出/ 了/ 动态分配/ 任务/ 优先级/ 的/ DPA/ 策略/ ,/ 由此/ 提出/ 了/ 基于/ 任务/ 动态/ 优先级/ 的/ 实时/ 任务调度/ 算法/ DRTP/ ./ 该/ 算法/ 可/ 通过/ 改变/ 参数/ p/ 与/ q/ 来/ 调节/ 任务/ 剩余价值/ 密度/ 与/ 执行/ 紧迫性/ 对/ 任务/ 优先级/ 影响/ 的/ 权重/ ,/ 提高/ 了/ 算法/ 对/ 满足/ 不同/ 应用/ 需要/ 的/ 灵活性/ ./ 此外/ ,/ 算法/ 还/ 讨论/ 了/ 任务/ 抢占/ 与非/ 抢占/ 调度/ 的/ 条件/ ,/ 讨论/ 了/ 系统/ 可能/ 出现/ 的/ 颠簸/ 现象/ 及/ 避免/ 颠簸/ 的/ 条件/ ./ 最后/ ,/ 实验/ 仿真/ 结果显示/ ,/ 当/ 系统/ 负载/ 较/ 高时/ ,/ DRTP/ 算法/ 能够/ 大大减少/ 任务/ 的/ 抢占/ 次数/ ,/ 降低/ 任务/ 截止期/ 错失/ 率/ ,/ 并/ 提高/ 系统/ 累积/ 价值/ 收益/ ./ 

