Page1S/ -/ RAID5/ :/ 一种/ 适用/ 于/ 顺序/ 数据/ 访问/ 的/ 节能/ 磁盘阵列/ 李元章/ 1/ )/ 孙志卓/ 1/ )/ ,/ 2/ )/ 马忠梅/ 1/ )/ 郑军/ 1/ )/ 谭毓安/ 1/ )/ 1/ )/ (/ 北京理工大学/ 计算机/ 学院/ 北京/ 100081/ )/ 2/ )/ (/ 德州/ 学院/ 计算机系/ 山东/ 德州/ 253000/ )/ 摘要/ 磁盘/ 及其/ 冷却系统/ 是/ 现代/ 存储系统/ 中/ 能耗/ 的/ 主体/ ,/ 已有/ 的/ 节能/ 研究/ 主要/ 面向/ 以/ 随机/ 数据/ 访问/ 为主/ 的/ 存储系统/ ,/ 对于/ 广泛/ 存在/ 的/ 以/ 顺序/ 数据/ 访问/ 为主/ 的/ 存储系统/ ,/ 如/ 视频/ 监控/ 、/ 虚拟/ 磁带库/ (/ VTL/ )/ 、/ 连续/ 数据保护/ (/ CDP/ )/ 等/ ,/ 针对/ 该类/ 系统/ 固有/ 访问/ 模式/ 的/ 节能/ 研究/ 较少/ ./ 为此/ ,/ 提出/ 了/ 适用/ 于/ 顺序/ 数据/ 访问/ 的/ 节能/ 磁盘阵列/ S/ -/ RAID5/ ,/ 采用/ 局部/ 并行/ 策略/ :/ 阵列/ 中/ 的/ 存储/ 区/ 被/ 分成/ 若干组/ ,/ 组内/ 采用/ 并行/ 访问/ 模式/ ,/ 分组/ 有利于/ 调度/ 部分/ 磁盘/ 运行/ 而/ 其余/ 磁盘/ 待机/ ,/ 组内/ 并行/ 用以/ 提供/ 性能/ 保证/ ./ 在/ S/ -/ RAID5/ 磁盘阵列/ 中/ 运行/ 磁盘/ 调度/ 算法/ ,/ 辅以/ 合适/ 的/ Cache/ 策略/ 来/ 过滤/ 少量/ 的/ 随机/ 访问/ ,/ S/ -/ RAID5/ 可/ 获得/ 显著/ 的/ 节能/ 效果/ ./ 在/ 32/ 路/ D1/ 标准/ 的/ 视频/ 监控/ 模拟实验/ 中/ ,/ 在/ 满足/ 性能需求/ 、/ 单盘/ 容错/ 的/ 条件/ 下/ ,/ 24/ 小时/ 功耗/ 测量/ 实验/ 表明/ :/ S/ -/ RAID5/ 的/ 功耗/ 为/ 节能/ 磁盘阵列/ Hibernator/ 功耗/ 的/ 59/ %/ ,/ eRAID/ 功耗/ 的/ 23/ %/ ,/ PARAID/ 、/ GRAID/ 功耗/ 的/ 21/ %/ 左右/ ./ 关键词/ 磁盘阵列/ ;/ 节能/ ;/ 顺序/ 数据/ 访问/ ;/ 数据/ 布局/ ;/ 存储系统/ 1/ 引言/ 随着/ 数字信息/ 的/ 爆炸式/ 增长/ ,/ 存储系统/ 的/ 规模/ 日渐/ 增大/ ,/ 其/ 能耗/ 也/ 随之/ 增大/ ,/ 美国/ 2005/ 年/ 全国/ 数据中心/ 的/ 能源/ 费用/ 达到/ 40/ 亿美元/ [/ 1/ ]/ ,/ 而/ 磁盘驱动器/ 是/ 这些/ 存储系统/ 能耗/ 的/ 主体/ [/ 2/ ]/ ,/ 例如/ 在/ DellPower/ -/ Edge6650/ 系统/ 中/ ,/ 磁盘驱动器/ 的/ 能耗/ 占/ 71/ %/ ,/ 为/ 系统/ 中/ 处理器/ 能耗/ 的/ 18/ 倍/ [/ 3/ ]/ ,/ 因此/ 对/ 存储系统/ 进行/ 节能/ 设计/ 是/ 极其/ 必要/ 的/ ./ 在/ 大规模/ 存储系统/ 中/ ,/ 为了/ 提高/ 存储/ 的/ 可靠性/ 和/ 改善/ I/ // O/ 性能/ ,/ 通常/ 采用/ 独立/ 磁盘/ 冗余/ 阵列/ (/ RedundantArraysofIndependentDisks/ ,/ RAID/ )/ ./ RAID/ 把/ 多个/ 磁盘/ 联合/ 起来/ ,/ 形成/ 统一/ 的/ 逻辑/ 存储设备/ ,/ 常用/ 技术/ 有/ 条带/ 化/ 、/ 磁盘镜像/ 和/ 错误/ 修正/ [/ 4/ -/ 5/ ]/ ./ 如/ RAID4/ 、/ RAID5/ 、/ RAID6/ ,/ 把/ 数据/ 条带/ 化后/ ,/ 分散/ 存储/ 到/ 阵列/ 中/ 的/ 不同/ 磁盘/ 上以/ 保证/ 并行性/ ,/ 并/ 采用/ 冗余/ 校验/ ,/ 在/ 保证数据/ 可靠性/ 的/ 同时/ ,/ 可/ 获得/ 大容量/ 和/ 高/ 数据/ 传输率/ [/ 6/ -/ 7/ ]/ ,/ 但是/ 阵列/ 中/ 全部/ 磁盘/ 并行/ 工作/ 也/ 增加/ 了/ 能耗/ 及/ 磁盘/ 损耗/ ./ 近年来/ ,/ 视频/ 监控/ (/ VideoSurveillance/ )/ 、/ 连续/ 数据保护/ (/ ContinuousDataProtection/ ,/ CDP/ )/ 、/ 虚拟/ 磁带库/ (/ VirtualTapeLibrary/ ,/ VTL/ )/ 等/ 存储系统/ 得到/ 广泛应用/ ,/ 这/ 类/ 存储系统/ 的/ 特点/ 是/ 具有/ 海量/ 存储空间/ ,/ 以/ 顺序/ 访问/ 为主/ ,/ 而/ 对/ 随机/ I/ // O/ 性能/ 要求/ 较/ 低/ [/ 8/ ]/ ./ 这类/ 系统/ 称为/ 顺序/ 数据/ 存储系统/ ./ 与/ 其它/ 存储系统/ 不同/ ,/ 顺序/ 数据/ 存储系统/ 一般/ 对/ 数据传输/ 带宽/ 要求/ 不/ 苛刻/ ,/ 但/ 对/ 数据/ 可靠性/ 、/ 存储空间/ 要求/ 较/ 高/ ./ 表/ 1/ 给出/ 了/ 一个/ 典型/ 的/ 32/ 路/ 视频/ 监控/ 系统/ 的/ 存储系统/ 参数/ ,/ 工作/ 时间/ 为/ 24h/ // d/ ×/ 30d/ ,/ 分别/ 采用/ D1/ 和/ 高清/ 视频/ 数据/ 标准/ ,/ 磁盘/ 容量/ 为/ 2TB/ ,/ 单盘/ 带宽/ 保守/ 估算/ 为/ 10MB/ // s/ (/ 顺序/ 数据/ 存储系统/ 中/ ,/ 以/ 顺序/ 访问/ 为主/ ,/ 平均/ 带宽/ 会/ 超过/ 10MB/ // s/ )/ ./ 由表/ 1/ 对比/ 得出/ ,/ 即使/ 考虑/ 视频/ 回放/ 、/ 备份/ 恢复/ 等/ 对/ 带宽/ 的/ 额外/ 需求/ ,/ 采用/ RAID5/ 磁盘阵列/ 时/ ,/ 也/ 存在/ 着/ 严重/ 的/ 性能/ 浪费/ ,/ 同时/ 伴随/ 着/ 严重/ 的/ 能源/ 浪费/ 和/ 磁盘/ 损耗/ ./ 传输码/ 率/ // (/ MB/ ·/ s/ -/ 1/ )/ 视频/ 数据/ 标准/ D1221111108/ 高清/ 216884840/ 因此/ ,/ 针对/ 该类/ 存储系统/ 的/ 负载/ 特性/ 和/ 访问/ 模式/ ,/ 提出/ 一种/ 适于/ 顺序/ 数据/ 访问/ 的/ 节能/ 磁盘阵列/ S/ -/ RAID5/ ./ S/ -/ RAID5/ 具备/ RAID5/ 的/ 冗余/ 校验/ 和/ 存储容量/ 聚合/ 特性/ ,/ 在/ 满足/ 性能需求/ 的/ 前提/ 下/ ,/ 通过/ 降低/ RAID5/ 的/ 并行性/ ,/ 以/ 实现/ 节能降耗/ 的/ 目的/ ,/ S/ -/ RAID5/ 的/ 特点/ 主要/ 包括/ 以下/ 方面/ :/ (/ 1/ )/ 采用/ 局部/ 并行/ 策略/ ,/ 即/ 把/ 阵列/ 中/ 的/ 磁盘/ 分成/ 若干组/ ,/ 组内/ 采用/ 并行/ 访问/ 模式/ ,/ 分组/ 有利于/ 调度/ 部分/ 磁盘/ 运行/ 而/ 其余/ 磁盘/ 待机/ ,/ 组内/ 并行/ 用以/ 提供/ 性能/ 保证/ ;/ (/ 2/ )/ 采用/ 贪婪/ 编址/ 法/ ,/ 即/ 在/ 顺序/ 访问/ 模式/ 下/ ,/ 保证/ I/ // O/ 访问/ 在/ 较长时间/ 内/ 分布/ 在/ 部分/ 确定/ 的/ 磁盘/ 上/ ,/ 其它/ 磁盘/ 可以/ 待机/ 且/ 待机时间/ 充分/ 长/ ;/ (/ 3/ )/ 通过/ 磁盘/ 节能/ 调度/ 算法/ ,/ 调度/ 磁盘/ 运行/ 或/ 待机/ ,/ 以/ 实现/ 节能/ 的/ 目的/ ./ 在/ 32/ 路/ D1/ 标准/ 的/ 视频/ 监控/ 模拟实验/ 中/ ,/ 在/ 满足/ 性能需求/ 、/ 单盘/ 容错/ 的/ 条件/ 下/ ,/ 24h/ 功耗/ 测量/ 实验/ 表明/ :/ S/ -/ RAID5/ 的/ 冗余/ 磁盘/ 最少/ ,/ 功耗/ 最低/ ,/ 其/ 功耗/ 为/ 节能/ 磁盘阵列/ Hibernator/ 功耗/ 的/ 59/ %/ ,/ eRAID/ 功耗/ 的/ 23/ %/ ,/ PARAID/ 、/ GRAID/ 功耗/ 的/ 21/ %/ 左右/ ./ 2/ 相关/ 工作/ 2.1/ 研究/ 现状/ 存储系统/ 节能/ 研究/ 一直/ 是/ 存储/ 领域/ 内/ 的/ 一个/ 热点问题/ ,/ 并/ 取得/ 了/ 一些/ 重要/ 成果/ ./ 现代/ 磁盘/ 有/ 待机/ 、/ 运行/ 两种/ 工作/ 模式/ :/ 待机/ 时/ 盘片/ 完全/ 停止/ 转动/ ;/ 运行/ 时/ 盘片/ 全速/ 转动/ ,/ 运行/ 模式/ 又/ 分为/ 读写操作/ 和/ 空转/ 两种/ 状态/ ,/ 读写操作/ 时/ 盘片/ 全速/ 旋转/ 的/ 同时/ 磁头/ 还要/ 进行/ 寻道/ ./ 不同/ 工作/ 状态/ 下/ 磁盘/ 的/ 能耗/ 不同/ ,/ 如/ FujitsuMAP3367/ 磁盘/ [/ 9/ ]/ ,/ 见表/ 2/ ./ 基本/ 的/ 能量/ 控制算法/ 是/ 当/ 磁盘/ 空转/ 时间/ 达到/ 一定/ 值后/ ,/ 就/ 把/ 磁盘/ 转入/ 到/ 低功耗/ 的/ 待机/ 模式/ ,/ 而/ 当/ 请求/ 到来/ 后/ ,/ 磁盘/ 再/ 转入/ 运行/ 模式/ ,/ 称为/ TPM/ (/ Tradi/ -/ tionalPowerManagement/ )/ 算法/ [/ 10/ -/ 11/ ]/ ./ 该/ 算法/ 不/ 适合/ 基本/ RAID/ ./ 如/ RAID5/ 把/ 数据/ 条带/ 化后/ 分散/ 存储/ 到/ 不同/ 磁盘/ 上/ ,/ 阵列/ 中/ 磁盘/ 被/ 频繁/ 读写/ ,/ 而/ 无法/ 转入/ 待机/ 模式/ ./ Page3Gurumurthi/ 等/ 人/ [/ 12/ ]/ 提出/ 一种/ 多/ 转速/ 磁盘/ 模型/ ,/ 该/ 模型/ 能够/ 在/ 盘片/ 转动/ 时/ 动态/ 调整/ 转速/ ,/ 并且/ 能够/ 在/ 低速/ 状态/ 下/ 执行/ 读写操作/ 而无须/ 转入/ 到/ 全速/ 状态/ ./ Sony/ 公司/ 的/ 开发人员/ 开发/ 出/ 一种/ 2/ 转速/ 的/ 商业/ 磁盘/ [/ 13/ ]/ ,/ 但/ 要/ 切换/ 到/ 待机/ 模式/ 后/ 才能/ 实现/ 转速/ 调整/ ./ Carrera/ 等/ 人/ [/ 14/ ]/ 提出/ 开发/ 动态/ 多/ 转速/ 磁盘/ ,/ 根据/ 工作/ 负载/ 调整/ 转速/ :/ 当/ 磁盘/ 的/ 工作/ 负载/ 小于/ 低速/ 吞吐量/ 的/ 80/ %/ 时/ ,/ 转入/ 低速/ 模式/ ,/ 大于/ 该值/ 时/ ,/ 转入/ 高速/ 模式/ ,/ 称该/ 法为/ LD/ (/ LoadDirected/ )/ 算法/ ./ Gurumurthi/ 等/ 人/ [/ 12/ ]/ 提出/ DRPM/ (/ DynamicRPM/ )/ 算法/ ,/ 根据/ 平均/ 响应/ 时间/ 和/ 磁盘/ 请求/ 队列/ 的/ 长度/ 来/ 动态/ 调整/ 磁盘/ 的/ 转速/ ./ 上述/ 的/ 多/ 转速/ 磁盘/ ,/ 仍停留/ 在/ 理论/ 研究/ 阶段/ ,/ 无法/ 应用/ 在/ 实际/ 系统/ 中/ ./ 基于/ 闪存/ (/ Flash/ )/ 的/ 固态/ 盘/ (/ SolidStateDisk/ ,/ SSD/ )/ 作为/ 一种/ 新兴/ 的/ 存储介质/ ,/ 相对/ 磁盘/ 最/ 突出/ 的/ 优点/ 是/ 没有/ 机械/ 装置/ ,/ 因而/ 访问/ 延迟/ 小/ 、/ 抗震性/ 强/ [/ 15/ ]/ ./ SSD/ 擅长/ 处理/ 随机/ 和/ 小/ 文件/ 负载/ 类型/ ,/ 而/ 磁盘/ 擅长/ 的/ 顺序/ 负载/ 往往/ 具有/ 大/ 数据量/ 的/ 特点/ ./ 由于/ 容量/ 和/ 单位/ 价格/ 的/ 限制/ ,/ SSD/ 在/ 海量/ 数据/ 存储/ 中/ ,/ 将/ 更/ 多/ 地/ 作为/ 一种/ 与/ 磁盘/ 互补/ 的/ 介质/ 共同/ 存在/ ./ 如/ EDT/ [/ 16/ ]/ 在/ 基于/ SSD/ 、/ SAS/ 、/ SATA/ 的/ 多层/ 存储/ 结构/ 中/ ,/ 执行/ 动态数据/ 迁移/ 来/ 降低/ 存储/ 能耗/ ,/ 并/ 提供/ 与/ SAS/ 系统/ 接近/ 或/ 更/ 高/ 的/ 性能/ ./ 同理/ ,/ SSD/ 也/ 可以/ 与/ S/ -/ RAID5/ 组成/ 混合/ 存储系统/ ,/ 以/ 进一步/ 优化/ 节能/ 效率/ 和/ 提高/ 性能/ ,/ 这/ 值得/ 进一步/ 研究/ ./ Zhu/ 等/ 人/ [/ 17/ ]/ 设计/ 一种/ 名为/ Hibernator/ 的/ 节能/ 存储系统/ ,/ 将/ 存储系统/ 划分/ 为/ 若干个/ 不同/ 转速/ 的/ RAID/ ,/ 动态/ 调整/ 磁盘/ 在/ 不同/ RAID/ 之间/ 迁移/ ,/ 以/ 实现/ 系统/ 的/ 最小/ 能耗/ ./ 该/ 方法/ 存在/ 如下/ 不足/ :/ 磁盘/ 在/ 不同/ RAID/ 间/ 迁移/ 时/ ,/ 需要/ 重新/ 布局/ 、/ 生成/ 相关/ RAID/ 中/ 的/ 所有/ 校验/ 块/ ,/ 将/ 增大/ 管理/ 难度/ 和/ 影响/ 性能/ ;/ 每个/ RAID/ 都/ 需要/ 一个/ 校验/ 盘/ ,/ 磁盘/ 存储空间/ 的/ 利用率/ 低/ ;/ 多/ 转速/ 磁盘/ 未/ 实际/ 应用/ ./ Weddle/ 等/ 人/ [/ 9/ ]/ 提出/ 的/ PARAID/ ,/ 把/ 存储空间/ 划分/ 为/ 若干个/ 跨越/ 不同/ 磁盘/ 数/ 的/ 逻辑/ 阵列/ ,/ 动态/ 调度/ 不同/ 的/ 逻辑/ 阵列/ 工作/ 可以/ 提供/ 不同/ 的/ 性能/ ,/ 进而/ 实现/ 节能/ 的/ 目的/ ./ 该/ 方法/ 的/ 不足/ 是/ :/ 每个/ 逻辑/ 阵列/ 都/ 包含/ 一份/ 完整/ 的/ 存储/ 数据/ ,/ 尽管/ 逻辑/ 阵列/ 之间/ 共享/ 部分/ 数据/ ,/ 仍然/ 浪费/ 较大/ 的/ 存储空间/ ;/ 进行/ 逻辑/ 阵列/ 切换/ 时/ 需要/ 进行/ 数据/ 同步/ ,/ 对于/ 以写/ 数据/ 为主/ 的/ 存储系统/ ,/ 性能/ 将会/ 受到/ 极大/ 影响/ ./ Son/ 等/ 人/ [/ 18/ ]/ 针对/ 科学计算/ 中/ 固定/ 的/ 数据/ 访问/ 模式/ ,/ 优化/ RAID5/ 中/ 的/ 配置/ 参数/ ,/ 如/ 磁盘/ 个数/ 、/ 条带/ 深度/ 等/ ;/ MAID/ 使用/ 少量/ 额外/ 磁盘/ 始终/ 运行/ ,/ 作为/ Cache/ 盘/ 保存/ 经常/ 访问/ 的/ 数据/ ,/ 以/ 减少/ 对后/ 端/ 阵列/ 的/ 访问/ ./ PDC/ 方法/ [/ 19/ ]/ 根据/ 访问/ 频率/ 周期/ 地/ 迁移/ 文件/ 到/ 各个/ 磁盘/ 中/ ,/ 使/ 闲置/ 文件/ 集中/ 到/ 一些/ 磁盘/ 上/ ./ Wang/ 等/ 人/ [/ 20/ ]/ 提出/ 了/ eRAID/ 模型/ ,/ 利用/ RAID/ 的/ 冗余/ 特性/ 来/ 重定向/ I/ // O/ 请求/ ,/ eRAID/ 通过/ 停止/ 旋转/ 部分/ 或/ 整个/ 冗余/ 组/ 的/ 磁盘/ 来/ 降低/ 能耗/ ,/ 同时/ 将/ 系统/ 性能/ 的/ 降低/ 控制/ 在/ 一个/ 可/ 接受/ 的/ 范围/ 内/ ./ Li/ 等/ 人/ [/ 21/ ]/ 提出/ 了/ EERAID/ 模型/ ,/ 将/ RAID/ 内部/ 的/ 冗余/ 信息/ 、/ I/ // O/ 调度/ 策略/ 、/ 阵列/ 控制器/ 级/ Cache/ 管理策略/ 结合/ 起来/ ,/ 采用/ NVRAM/ 作为/ 写回/ Cache/ 来/ 优化/ 写/ 操作/ ./ WriteOff/ -/ loading/ 方法/ [/ 22/ ]/ 在/ 多个/ RAID/ 组成/ 的/ 存储系统/ 中/ ,/ 将要/ 写/ 到/ 待机/ 磁盘/ 上/ 的/ 部分/ 数据/ 重定向/ 到/ 其它/ RAID/ 中/ 的/ 活动/ 磁盘/ 上/ ,/ 以/ 延长/ 磁盘/ 待机时间/ ,/ 并/ 降低/ 磁盘/ 的/ 启停/ 频率/ ./ Pergamum/ 方法/ [/ 23/ ]/ 针对/ 归档/ 存储系统/ ,/ 在/ 每个/ 节点/ 添加/ 一定量/ 的/ NVRAM/ 来/ 存储/ 数据/ 签名/ 、/ 元/ 数据/ 以及/ 其它/ 一些/ 较/ 小规模/ 的/ 数据项/ ,/ 从而/ 使/ 延迟/ 写/ 、/ 元/ 数据/ 请求/ 以及/ 磁盘/ 间/ 的/ 数据/ 验证/ 等/ 操作/ 均/ 可以/ 在/ 磁盘/ 处于/ 待机/ 状态/ 下/ 进行/ ./ 国内/ 方面/ ,/ 谢/ 长生/ 、/ 冯丹/ 等/ 人/ 承担/ 国家自然科学基金/ 重点项目/ “/ 大规模/ 数据/ 存储系统/ 能耗/ 优化/ 方法/ 的/ 研究/ ”/ ,/ 提出/ 存储系统/ 的/ 能耗/ 优化/ 方法/ :/ 在/ 部件/ 、/ 节点/ 和/ 系统/ 3/ 个/ 层面/ 都/ 建立/ 电力/ 消耗/ 的/ 测量/ 反馈系统/ 以及/ 相关/ 的/ 调节/ 系统/ ,/ 解决/ 复杂/ 系统/ 自/ 适应/ 动态/ 调度/ 问题/ ./ 根据/ 节能/ 机制/ 在/ 系统/ 的/ 不同/ 层次/ 的/ 作用/ 范围/ 、/ 效果/ 和/ 成本/ 之间/ 的/ 差异/ ,/ 提出/ 多级/ 、/ 多/ 约束/ 优化/ 融合/ 的/ 方法/ ./ 毛波/ [/ 24/ ]/ 提出/ 了/ 一种/ 绿色/ 磁盘阵列/ GRAID/ ,/ 为/ RAID10/ 增加/ 了/ 一个/ 日志/ 磁盘/ ,/ 周期性地/ 更新/ 镜像/ 磁盘/ 上/ 的/ 数据/ ,/ 而/ 将/ 两次/ 更新/ 之间/ 的/ 写入/ 数据/ 存放/ 到/ 日志/ 磁盘/ 上/ 和/ 主/ 磁盘/ 上/ ,/ 从而/ 能够/ 关闭/ 所有/ 的/ 镜像/ 磁盘/ 来/ 降低/ 能耗/ ./ 2.2/ 存在/ 的/ 问题/ 已有/ 的/ 节能/ 研究/ 主要/ 面向/ 以/ 随机/ 访问/ 为主/ 的/ 存储系统/ ,/ 并/ 试图/ 适应/ 各种/ 工作/ 负载/ ,/ 导致/ 难以/ 取得/ 进一步/ 突破/ ./ 文献/ [/ 12/ -/ 14/ ]/ 中/ ,/ 涉及/ 的/ 多/ 转速/ 磁盘/ ,/ 至今/ 没有/ 广泛应用/ ./ 文献/ [/ 17/ ,/ 22/ ]/ 中/ 涉及/ 到/ 多组/ RAID/ ,/ 即/ 把/ 存储系统/ 划分/ 为/ 若干个/ RAID/ ,/ 其中/ 每个/ RAID/ 至少/ 需要/ 一个/ 磁盘/ 的/ 空间/ 存储/ 校验/ 信息/ ,/ 存储空间/ 的/ 利用率/ 不高/ ,/ 不/ 适合/ 那些/ 对/ 容量/ 有/ 较/ 高/ 要求/ 的/ 应用/ ,/ Page4/ 如/ 视频/ 监控/ 、/ CDP/ 、/ VTL/ 等/ ./ 文献/ [/ 7/ ]/ 中/ 的/ PARAID/ ,/ 更是/ 以/ 牺牲/ 存储空间/ 的/ 代价/ 来/ 换取/ 节能/ 效果/ ./ 文献/ [/ 10/ ,/ 19/ ]/ 根据/ 数据/ 的/ 访问/ 频率/ ,/ 研究/ 节能/ 策略/ ,/ 但/ 在/ 视频/ 监控/ 等/ 系统/ 中/ ,/ 以写/ 操作/ 为/ 主要/ 访问/ 模式/ ,/ 而且/ 访问/ 数据/ 的/ 逻辑/ 地址/ ,/ 在/ RAID/ 的/ 逻辑/ 空间/ 中/ 基本/ 服从/ 均匀分布/ ,/ 采用/ 这/ 两种/ 方法/ 很难/ 获得理想/ 的/ 节能/ 效果/ ./ 文献/ [/ 20/ -/ 21/ ,/ 24/ ]/ 对/ 基于/ 镜像/ RAID/ 的/ 存储系统/ 进行/ 了/ 节能/ 研究/ ,/ 镜像/ RAID/ 同样/ 存在/ 存储空间/ 利用率/ 不高/ 的/ 问题/ ,/ 且/ 最优/ 节能/ 效果/ 小于/ 50/ %/ ./ 2.3/ S/ -/ RAID5/ 的/ 主要/ 依据/ S/ -/ RAID5/ 的/ 核心思想/ 是/ :/ 在/ 满足/ 性能需求/ 的/ 前提/ 下/ ,/ 通过/ 降低/ RAID5/ 的/ 并行性/ ,/ 即/ 采用/ 局部/ 并行/ 策略/ ,/ 实现/ 节能降耗/ 的/ 目的/ ,/ 主要/ 依据/ 如下/ :/ (/ 1/ )/ 顺序/ 数据/ 存储系统/ 一般/ 对/ 性能/ 要求/ 不高/ ./ 顺序/ 数据/ 存储系统/ ,/ 如/ 视频/ 监控/ 、/ CDP/ 、/ VTL/ 等/ ,/ 其/ 负载/ 主要/ 是/ 顺序/ I/ // O/ 流/ ,/ 数据/ 的/ 逻辑/ 地址/ 基本/ 是/ 顺序/ 的/ ,/ 对/ I/ // O/ 的/ 并发/ 性/ 要求/ 很/ 低/ [/ 8/ ]/ ,/ 对/ 存储/ 带宽/ 的/ 要求/ 也/ 不/ 苛刻/ ,/ 但/ 对/ 存储空间/ 要求/ 较/ 高/ ./ 而/ 数据库/ 、/ 联机/ 事务处理/ (/ On/ -/ LineTransactionProcessing/ ,/ OLTP/ )/ 等/ 应用/ ,/ 则/ 要求/ 较/ 高/ 的/ 随机/ I/ // O/ 处理/ 能力/ ./ (/ 2/ )/ 单个/ 磁盘/ 的/ 性能/ 得到/ 了/ 显著/ 提高/ ./ 随着/ 磁盘/ 技术/ 的/ 进步/ ,/ 单个/ 磁盘/ 的/ 性能/ 得到/ 了/ 显著/ 提高/ ,/ 表/ 3/ 列出/ 了/ 2/ 种/ Seagate/ 磁盘/ 的/ 相关/ 参数/ [/ 22/ ]/ ,/ 这为/ 实现/ RAID/ 的/ 局部/ 并行/ 提供/ 了/ 性能/ 保证/ ./ RAID/ 中/ 部分/ 磁盘/ 并行/ 工作/ 已经/ 能够/ 提供/ 足够/ 的/ 带宽/ 和/ IOPS/ ./ 磁盘/ 类型/ 容量/ // Cheetah10K3008584277256Cheetah15K1468885384269/ (/ 3/ )/ 负载/ 特性/ 使/ 局部/ 并行/ 具有/ 可行性/ ./ 在/ 顺序/ 数据/ 存储系统/ 中/ ,/ 数据/ 的/ 逻辑/ 地址/ 更好/ 地/ 满足/ 存储空间/ 访问/ 的/ 局部性/ 原理/ ,/ 保证/ 了/ 数据/ 访问/ 能够/ 在/ 足够/ 长/ 的/ 时间/ 内/ ,/ 分布/ 在/ 一个/ 或/ 几个/ 确定/ 的/ 存储/ 区域/ ./ S/ -/ RAID5/ 使/ 这些/ 区域/ 集中/ 在/ 部分/ 磁盘/ 上/ ,/ 并/ 调度/ 这部分/ 磁盘/ 处于/ 运行/ 模式/ ,/ 而/ 其它/ 磁盘/ 则/ 处于/ 低功耗/ 的/ 待机/ 模式/ ./ 3S/ -/ RAID5/ 的/ 实现/ S/ -/ RAID5/ 的/ 实现/ 主要/ 包括/ :/ 底层/ 数据/ 布局/ 、/ 顶层/ 节能/ 调度/ 算法/ 、/ Cache/ 管理策略/ ./ 3.1/ 数据/ 布局/ 设/ 磁盘阵列/ S/ -/ RAID5/ 由/ N/ 块/ 盘/ (/ 物理盘/ 或/ 逻辑盘/ )/ 组成/ 且/ N/ / 3/ ,/ 构成/ 1/ 行/ ×/ N/ 列/ 矩阵/ ./ 将/ 阵列/ 划分/ 为/ N/ 个/ 条带/ ,/ 每个/ 条带/ 包含/ N/ 个/ 存储/ 块/ ,/ 其中/ 1/ 个/ 校验/ 块/ ,/ N/ -/ 1/ 个/ 数据/ 块/ ./ 为了/ 方便/ 生成/ 冗余/ 校验/ 信息/ ,/ 每个/ 存储/ 块/ 划分/ 若干个/ 存储/ 子块/ ,/ 可/ 根据/ 要求/ 设置/ 子块/ 的/ 大小/ ,/ 典型值/ 如/ 4KB/ 、/ 8KB/ 、/ 16KB/ 等/ ,/ 子块/ 内/ 数据/ 的/ 逻辑/ 地址/ 是/ 顺序/ 的/ ./ 校验/ 子块/ 由/ 同/ 条带/ 内/ 偏移/ 位置/ 相同/ 的/ N/ -/ 1/ 个/ 数据/ 子块/ 异或/ 运算/ 得出/ ./ 用/ X/ (/ i/ ,/ j/ )/ 表示/ S/ -/ RAID5/ 中/ 的/ 一个/ 存储/ 块/ 数据/ ,/ 其中/ i/ 表示/ 其/ 所在/ 的/ 条带/ 号/ ,/ j/ 表示/ 所在/ 的/ 磁盘/ 号/ ,/ X/ (/ i/ ,/ j/ )/ 位于/ 磁盘/ j/ 上/ ,/ 0/ / i/ ,/ j/ </ N/ ./ 第/ i/ 条带/ 内/ 的/ 校验/ 块/ 数据/ 用/ Parity/ (/ i/ )/ 表示/ ,/ 与/ 存储/ 块/ 数据/ X/ (/ i/ ,/ j/ )/ 的/ 关系/ 为/ Parity/ (/ i/ )/ =/ X/ (/ i/ ,/ N/ -/ 1/ -/ i/ )/ ./ 数据/ 块/ 数据/ 用/ D/ (/ i/ ,/ v/ )/ 表示/ ,/ v/ 表示/ 其/ 在/ 所属/ 条带/ 内/ 的/ 数据/ 块/ 序号/ (/ 忽略/ 校验/ 块/ )/ ,/ 0/ / i/ ,/ j/ </ N/ -/ 1/ ,/ 与/ 存储/ 块/ 数据/ X/ (/ i/ ,/ j/ )/ 的/ 关系/ ,/ 用式/ (/ 1/ )/ 表示/ :/ 为了/ 能够/ 提供/ 合适/ 的/ 性能/ ,/ 需要/ 对/ 数据/ 块/ 进行/ 分组/ ,/ 方案/ 如下/ :/ 将/ 每个/ 条/ 带上/ 的/ N/ -/ 1/ 个/ 数据/ 块/ 分成/ P/ 组/ ,/ 每组/ 包含/ Q/ 个/ 数据/ 块/ ,/ 其中/ P/ / 2/ ,/ Q/ / 1/ ,/ 且/ 满足/ P/ ·/ Q/ =/ N/ -/ 1/ ./ 在/ 各个/ 组内/ ,/ 采用/ 并行/ 数据/ 编址/ 方法/ ,/ 编址/ 单位/ 为/ 数据/ 子块/ ,/ 编址/ 方法/ 如下/ :/ 设组/ 大小/ 为/ SGrp/ ,/ 第/ p/ 组/ 、/ 第/ i/ 条带/ 、/ 第/ q/ 数据/ 块/ 内/ 、/ 偏移/ 地址/ 为/ off/ 的/ 数据/ 子块/ 的/ 逻辑/ 地址/ LBAp/ ,/ i/ ,/ q/ ,/ off/ 可/ 表示/ 为/ LBAp/ ,/ i/ ,/ q/ ,/ off/ =/ SGrp/ ·/ (/ N/ ·/ p/ +/ i/ )/ +/ off/ ·/ Q/ +/ q/ (/ 2/ )/ 其中/ 0/ / p/ </ P/ ,/ 0/ / i/ </ N/ ,/ 0/ / q/ </ Q/ ,/ 0/ / off/ </ SGrp/ ./ 根据/ 式/ (/ 2/ )/ 得/ S/ -/ RAID5/ 的/ 数据/ 布局/ 具有/ 如下/ 特征/ :/ (/ 1/ )/ 各组/ 内/ 偏移/ 地址/ 相同/ 的/ 数据/ 子块/ 的/ 逻辑/ 地/ (/ 2/ )/ 逻辑/ 相邻/ 的/ 组/ 优先/ 分布/ 在/ 相同/ 或/ 相近/ 的/ 磁盘/ 上/ ./ 称式/ (/ 2/ )/ 表示/ 的/ 编址/ 方法/ 为/ 贪婪/ 编址/ 法/ ./ 图/ 1/ 给出/ 了/ 5/ 磁盘/ 2/ 分组/ 的/ S/ -/ RAID5/ 的/ 编址/ 示意图/ ,/ 其中/ D/ (/ 0/ ,/ 0/ )/ 、/ D/ (/ 0/ ,/ 1/ )/ 采用/ 并行/ 数据/ 访问/ 机制/ ,/ D/ (/ 0/ ,/ 1/ )/ 与/ D/ (/ 1/ ,/ 0/ )/ 的/ 逻辑/ 地址/ 相邻/ ,/ 依此类推/ ./ 采用/ 贪婪/ 编址/ 法/ ,/ 可以/ 保证/ 组内/ 局部/ 并行/ 的/ 同时/ ,/ 又/ 使/ 访问/ 在/ 较长时间/ 内/ 分布/ 在/ 部分/ 确定/ 的/ 磁盘/ 上/ ,/ 有利于/ 调度/ 其它/ 磁盘/ 待机/ ,/ 且/ 待机时间/ 充分/ 长/ ,/ 以便/ 获得/ 更好/ 的/ 节能/ 效果/ ./ 址/ 相邻/ ;/ Page5/ 在/ 顺序/ 数据/ 访问/ 中/ ,/ 校验/ 数据/ 的/ 更新/ 操作/ ,/ 会/ 触发/ 其它/ 磁盘/ 的/ 状态/ 转换/ ,/ 进而/ 产生/ 额外/ 能耗/ ,/ 但/ 由于/ S/ -/ RAID5/ 的/ 存储/ 块/ 足够/ 大/ (/ 存储/ 块/ 大小/ 为/ 磁盘/ 容量/ 的/ 1/ // N/ )/ ,/ 因此/ 校验/ 数据/ 所在/ 磁盘/ 的/ 切换/ 频率/ 很/ 低/ ,/ 该/ 额外/ 能耗/ 可以/ 忽略/ ./ 例如/ 上述/ 5/ 磁盘/ 2/ 分组/ 的/ S/ -/ RAID5/ ,/ 设/ 磁盘/ 容量/ 为/ 500GB/ ,/ 根据/ S/ -/ RAID5/ 的/ 数据/ 布局/ 划分/ ,/ 可得/ D/ (/ 0/ ,/ 0/ )/ 、/ D/ (/ 0/ ,/ 1/ )/ 及其/ 对应/ 的/ 检验/ 数据/ 块/ P/ (/ 0/ )/ 均/ 为/ 500GB/ // 5/ =/ 100GB/ ,/ 其中/ D/ (/ 0/ ,/ 0/ )/ 、/ D/ (/ 0/ ,/ 1/ )/ 、/ P/ (/ 0/ )/ 包含/ 若干个/ 子块/ ,/ 以子/ 块/ 为/ 单位/ 进行/ 异或/ 运算/ 生成/ 校验/ 数据/ (/ 子块/ 类似/ 于/ RAID5/ 中/ 的/ Chunk/ ,/ 大小/ 可/ 设置/ 为/ 32KB/ 、/ 64KB/ 等/ )/ ./ 这样/ D/ (/ 0/ ,/ 0/ )/ 、/ D/ (/ 0/ ,/ 1/ )/ 并行/ 编址/ 后/ ,/ 便/ 可/ 提供/ 200GB/ 存储容量/ ,/ 顺序/ 数据/ 访问/ 时/ ,/ 只有/ 该/ 200GB/ 空间/ 写/ 满后/ ,/ 才/ 会/ 更换/ 校验/ 磁盘/ ,/ 例如/ 停止/ P/ (/ 0/ )/ 所在/ 的/ 磁盘/ ,/ 然后/ 启动/ P/ (/ 1/ )/ 所在/ 的/ 磁盘/ ./ 以/ 32/ 路/ D1/ 分辨率/ (/ 2MB/ // s/ )/ 的/ 视频/ 监控/ 为例/ ,/ 每/ 小时/ 产生/ 的/ 视频/ 数据/ 为/ 28.8/ GB/ (/ 2MB/ // s/ ×/ 32/ ×/ 3600/ // 1000/ )/ ,/ 这样/ 写满/ 200GB/ 的/ 空间/ 需要/ 6.9/ h/ ,/ 即/ 6.9/ h/ 切换/ 1/ 次/ 校验/ 数据/ 所在/ 磁盘/ ,/ 切换/ 频率/ 非常低/ ,/ 所以/ 由此/ 带来/ 的/ 额外/ 能耗/ 可以/ 忽略/ ./ 第/ 4/ 章/ S/ -/ RAID5/ 的/ 24h/ 能耗/ 测量/ 结果/ ,/ 可/ 进一步/ 证明/ 该/ 结论/ ./ 3.2/ 节能/ 磁盘/ 调度/ 算法/ 一般/ 情况/ 下/ ,/ S/ -/ RAID5/ 只/ 需/ 一组/ 或/ 几组/ 磁盘/ 及其/ 校验/ 数据/ 所在/ 磁盘/ 工作/ ,/ 需要/ 调度/ 其余/ 磁盘/ 进入/ 待机/ 状态/ ,/ 以便/ 获得/ 节能/ 效果/ ./ 为/ 实现/ 节能/ ,/ 需要/ 根据/ 请求/ 队列/ 的/ 历史/ 信息/ 、/ I/ // O/ 访问/ 在/ 逻辑/ 空间/ 的/ 分布/ 区域/ ,/ 感知/ 当前/ 负载/ 流/ 的/ 随机性/ 及其/ 时间/ 空间/ 分布/ 特征/ ,/ 从而/ 进行/ 磁盘/ 节能/ 调度/ 算法/ 设计/ ./ 用/ r/ =/ (/ tarrive/ ,/ tfinish/ ,/ status/ ,/ pos/ ,/ len/ )/ 记录/ 请求/ 队列/ rq/ 中/ 的/ 1/ 个/ I/ // O/ 请求/ ,/ 其中/ tarrive/ 、/ tfinish/ 、/ status/ 、/ pos/ 、/ len/ 分别/ 表示/ 请求/ r/ 的/ 到来/ 时间/ 、/ 完成/ 时间/ 、/ 请求/ 状态/ 、/ 起始/ 逻辑/ 地址/ 和/ 请求/ 长度/ ./ 请求/ 状态/ 包括/ 等待/ 、/ 执行/ 、/ 完成/ 等/ 状态/ ,/ 请求/ 长度/ 以/ 扇区/ 为/ 单位/ ,/ 用/ r/ / x/ 表示/ 请求/ r/ 的/ 参数/ x/ ./ f/ (/ r/ / pos/ )/ ,/ 可以/ 按/ 以下/ 方法/ 求/ 出/ :/ p/ 、/ 组内块/ 号/ q/ 及/ 条带/ 号/ i/ :/ 由/ 请求/ r/ 的/ 逻辑/ 地址/ pos/ 到/ 磁盘/ 号/ j/ 的/ 映射/ (/ 1/ )/ 由/ pos/ 利用/ 式/ (/ 3/ )/ 求出/ 该/ 请求/ 所在/ 的/ 组号/ (/ 2/ )/ 根据/ 组号/ p/ 、/ 组内块/ 号/ q/ 、/ 条带/ 号/ i/ ,/ 求出/ pos/ 指向/ 的/ 数据/ 块/ 数据/ D/ (/ i/ ,/ p/ ·/ Q/ +/ q/ )/ ;/ (/ 3/ )/ 已知/ D/ (/ i/ ,/ p/ ·/ Q/ +/ q/ )/ ,/ 根据/ 式/ (/ 1/ )/ 得/ pos/ 所在/ 磁盘/ j/ =/ p/ ·/ Q/ +/ q/ ,/ 当/ i/ +/ p/ ·/ Q/ +/ q/ </ N/ -/ 1/ ;/ 否则/ j/ =/ p/ ·/ Q/ +/ q/ +/ 1/ ./ 对/ 请求/ 队列/ rq/ 中/ 各个/ I/ // O/ 请求/ ,/ 根据/ 其/ 逻辑/ 地址/ 所在/ 的/ 磁盘/ ,/ 划分/ 为/ N/ 个/ 集合/ :/ 其中/ 0/ / j/ </ N/ ,/ 称/ Sj/ 为/ 磁盘/ j/ 的/ 请求/ 集合/ ,/ 用/ numj/ 表示/ 集合/ Sj/ 中/ 元素/ 的/ 个数/ ./ TPM/ 算法/ [/ 10/ -/ 11/ ]/ 虽然/ 不/ 适合/ 基本/ RAID/ ,/ 但/ 非常适合/ S/ -/ RAID5/ ,/ 这/ 是/ 由/ 顺序/ 数据/ 存储系统/ 的/ 负载/ 特性/ 和/ S/ -/ RAID5/ 的/ 数据/ 布局/ 决定/ 的/ ./ TPM/ 算法/ 在/ S/ -/ RAID5/ 中/ 的/ 实现/ 如下/ :/ 设定/ 磁盘/ 调度/ 的/ 时间/ 阈值/ tth/ ,/ 系统/ 当前/ 时间/ 为/ t/ ,/ 如果/ 请求/ 集合/ Sj/ 中/ 的/ 请求/ 满足/ 式/ (/ 4/ )/ ,/ 则/ 可以/ 调度/ 对应/ 的/ 磁盘/ j/ 到/ 待机/ 状态/ ./ 下次/ 需要/ 访问/ 该/ 磁盘/ 时/ ,/ 再/ 将/ 其/ 调度/ 到/ 运行/ 状态/ ./ 3.3/ Cache/ 管理策略/ 顺序/ 数据/ 存储系统/ 以/ 顺序/ 数据/ 访问/ 为主/ ,/ 但/ 还/ 包含/ 一些/ 随机/ 访问/ ,/ 如/ 文件系统/ 元/ 数据/ 、/ RAID/ 元/ 数据/ 等/ ,/ 随机/ 访问/ 会/ 影响/ S/ -/ RAID5/ 的/ 节能/ 效果/ ,/ 需/ 采取措施/ 过滤/ 对/ S/ -/ RAID5/ 的/ 随机/ 访问/ ./ 传统/ 的/ Cache/ 写/ 策略/ 为/ 写/ 回/ (/ Write/ -/ back/ )/ 和/ 写/ 透/ (/ Write/ -/ through/ )/ 两种/ ,/ 为了/ 获得/ 更优/ 的/ 节能/ 效果/ ,/ 需要/ 特定/ 的/ Cache/ 策略/ 来/ 过滤/ 随机/ 访问/ ./ 文献/ [/ 25/ ]/ 提出/ 的/ 如下/ 两种/ Cache/ 写/ 策略/ ,/ 同样/ 适合/ S/ -/ RAID5/ ./ 主动/ 写回/ (/ Write/ -/ BackwithEagerUpdates/ ,/ WBEU/ )/ 策略/ ./ 当/ 处于/ 停止/ 状态/ 的/ 磁盘/ 因未/ 命中/ 的/ Page6/ 读/ 操作/ 而/ 转入/ 运行/ 状态/ 时/ ,/ 主动/ 把/ 当前/ Cache/ 中/ 缓冲/ 的/ 对应/ 数据/ 写入/ 该/ 磁盘/ ./ 延迟/ 写透/ (/ Write/ -/ ThroughwithDeferredUp/ -/ date/ ,/ WTDU/ )/ 策略/ ./ 采用/ 缓存/ 日志/ 来/ 减少/ 磁盘/ 的/ 启动/ 次数/ ,/ 日志/ 设备/ 可以/ 是/ NVRAM/ 或/ 固定/ 磁盘/ ,/ 对于/ 少量/ 的/ 随机/ 写/ 操作/ ,/ 可以/ 暂存/ 到/ 日志/ 设备/ 当中/ ,/ 当/ 目标/ 磁盘/ 转入/ 工作/ 状态/ 后/ ,/ 再/ 把/ 日志/ 设备/ 中/ 缓存/ 的/ 写/ 数据/ 同步/ 到/ 该/ 磁盘/ 中/ ./ 这里/ 给出/ 一种/ 基于/ 统计/ 磁盘/ 数据/ 流量/ (/ DataFlowRate/ ,/ DFR/ )/ 的/ WTDU/ 实现/ 方案/ ,/ 根据/ S/ -/ RAID5/ 中/ 各个/ 磁盘/ 的/ 请求/ 集合/ ,/ 由式/ (/ 5/ )/ 求/ 出/ 磁盘/ j/ 的/ 数据/ 流量/ DFRj/ 为设/ DFRth/ 为/ 延迟/ 写透/ 的/ 流量/ 阈值/ ,/ 对/ 任意/ 磁盘/ j/ ,/ 如果/ 其/ 流量/ DFRj/ </ DFRth/ ,/ 则/ 把/ 该/ 盘/ 的/ 写/ 操作/ ,/ 重定向/ 到/ 当前/ 活动/ 的/ 磁盘/ 上/ ,/ 或/ 把/ 写/ 数据/ 缓存/ 到/ NVRAM/ ,/ 减少/ 磁盘/ 因/ 少量/ 随机/ 访问/ 进行/ 状态/ 转换/ 的/ 次数/ ./ 同时/ ,/ 数据/ 流量/ 也/ 可/ 作为/ 磁盘/ 的/ 调度/ 参数/ ,/ 供/ 调度/ 策略/ 选择/ ./ 3.4/ 读写操作/ S/ -/ RAID5/ 的/ 读/ 操作/ 与/ RAID5/ 类似/ ,/ 根据/ 映射/ f/ (/ r/ / pos/ )/ 把/ 读/ 请求/ r/ 映射/ 到/ 一个/ 分组/ ,/ 并/ 使/ 组内/ 磁盘/ 并行/ 工作/ ,/ 而/ 不/ 需要/ 条带/ 内/ 所有/ 磁盘/ 并行/ 工作/ ./ S/ -/ RAID5/ 的/ 写/ 操作/ 一般/ 以/ “/ 读/ -/ 改/ -/ 写/ ”/ 为主/ ,/ 因为/ 通常/ 情况/ 下/ ,/ S/ -/ RAID5/ 只有/ 少量/ 磁盘/ 工作/ ./ 执行/ 写/ 操作/ 时/ ,/ 需要/ 更新/ 对应/ 的/ 校验/ 数据/ ,/ 生成/ 新/ 校验/ 数据/ 需要/ 获得/ 旧/ 数据/ 及/ 旧/ 校验/ 数据/ ,/ 可/ 利用/ 式/ (/ 6/ )/ 生成/ 新/ 校验/ 数据/ ./ 其中/ ,/ Dsub/ (/ k/ )/ 、/ Psub/ 分别/ 为/ 组内/ 偏移/ 位置/ 为/ off/ 的/ 新/ 数据/ 子块/ 数据/ 、/ 其/ 对应/ 的/ 新/ 校验/ 子块/ 数据/ ;/ Dsub/ (/ k/ )/ 、/ Psub/ 为/ 旧/ 数据/ 子块/ 数据/ 及/ 旧/ 校验/ 子块/ 数据/ ;/ m/ 为/ 偏移/ 位置/ 为/ off/ 的/ 写入/ 数据/ 子块/ 个数/ ./ 可/ 采用/ 合适/ 的/ 预读/ 策略/ ,/ 改善/ “/ 读/ -/ 改/ -/ 写/ ”/ 对/ S/ -/ RAID5/ 写/ 性能/ 的/ 影响/ ,/ 如/ 把/ 用于/ 生成/ 新/ 校验/ 数据/ 的/ 旧/ 数据/ 、/ 旧/ 校验/ 数据/ 预读/ 到/ 缓存/ 中/ ,/ 以/ 减少/ 读取/ 的/ 次数/ ./ 4/ 综合测试/ 在/ Linux2/ ./ 6/ 内核/ 中/ MD/ (/ MultipleDevicedriver/ )/ 模块/ 的/ 基础/ 上/ ,/ 实现/ 了/ S/ -/ RAID5/ 的/ 数据/ 布局/ ,/ 设计/ 了/ 一个/ 监控/ 进程/ Diskpm/ 对/ 磁盘/ 进行/ 节能/ 调度/ ,/ 采用/ TPM/ 调度/ 算法/ ,/ tth/ =/ 120s/ ./ 修改/ 了/ MD/ 中/ 的/ 超级/ 块/ 更新/ 程序/ ,/ 使/ 对待/ 机/ 磁盘/ 的/ 超级/ 块/ 更新/ 延迟/ 至/ 该/ 盘/ 的/ 运行/ 状态/ ./ 4.1/ 实验/ 环境/ 由于/ S/ -/ RAID5/ 主要/ 面向/ 顺序/ 数据/ 访问/ ,/ 因此/ ,/ 性能/ 和/ 节能/ 测试/ 是/ 基于/ 典型/ 的/ 顺序/ 数据/ 存储系统/ —/ —/ —/ 视频/ 监控/ 进行/ 的/ ./ 模拟/ 了/ 一个/ 32/ 路/ 视频/ 监控/ 系统/ ,/ 采用/ D1/ 视频/ 数据/ 标准/ (/ 平均码率/ 为/ 2MB/ // s/ )/ ,/ 需要/ 保存/ 24h/ // d/ ×/ 30d/ 的/ 视频/ 数据/ ,/ 数据量/ 为/ 20.74/ TB/ ./ 在/ 存储设备/ 上/ ,/ 每隔/ 指定/ 时间/ ,/ 建立/ 32/ 个/ 视频文件/ ,/ 分别/ 保存/ 该/ 时间段/ 内/ 的/ 各路/ 视频/ 数据/ ,/ 视频/ 数据/ 以/ 添加/ (/ append/ )/ 方式/ 写入/ 视频文件/ ,/ 实验/ 中/ 设定/ 的/ 时间/ 间隔/ 为/ 10min/ ./ 当/ 存储空间/ 不够/ 时/ ,/ 删除/ 最早/ 存储/ 的/ 视频/ 数据/ ./ 选取/ 了/ 目前/ 几种/ 典型/ 的/ RAID/ 节能/ 方法/ ,/ 与/ S/ -/ RAID5/ 进行/ 比较/ ,/ 包括/ 冗余/ 磁盘/ 、/ 性能/ 和/ 节能/ 效果/ ./ 典型/ 的/ RAID/ 节能/ 方法/ 包括/ :/ 文献/ [/ 17/ ]/ 中/ 的/ Hibernator/ ,/ 文献/ [/ 9/ ]/ 中/ 的/ PARAID/ ,/ 文献/ [/ 22/ ]/ 中/ 的/ Writeoff/ -/ loading/ 方法/ ,/ 文献/ [/ 20/ ]/ 中/ 的/ eRAID/ 、/ 文献/ [/ 24/ ]/ 中/ 的/ GRAID/ ./ 文献/ [/ 22/ ]/ 中/ 的/ Writeoff/ -/ loading/ 方法/ ,/ 把/ 存储系统/ 划分/ 为/ 若干个/ RAID/ ,/ 为了/ 比较/ ,/ 选取/ 以下/ 两种/ 划分/ 方式/ :/ (/ 1/ )/ 每个/ RAID/ 包括/ 1/ 个/ 数据/ 盘/ 和/ 1/ 块/ 校验/ 盘/ ,/ 整个/ 存储系统/ 共/ 分为/ 12/ 个/ RAID1/ ,/ 记作/ WOL1/ ;/ (/ 2/ )/ 每个/ RAID/ 包括/ 2/ 个/ 数据/ 盘/ 和/ 1/ 块/ 校验/ 盘/ ,/ 整个/ 存储系统/ 共/ 分为/ 6/ 个/ RAID5/ ,/ 记作/ WOL5/ ./ 其它/ 划分/ 方式/ ,/ 随着/ RAID/ 内/ 磁盘/ 的/ 增多/ ,/ 其/ 节能/ 效果/ 均/ 小于/ 以上/ 两种/ 方法/ ,/ 不/ 逐一/ 比较/ ./ eRAID/ 包括/ eRAID1/ 和/ eRAID5/ ,/ 由于/ eRAID1/ 的/ 节能/ 效果/ 小于/ GRAID/ ,/ 取/ GRAID/ 代表/ eRAID1/ ./ 综上/ ,/ 与/ S/ -/ RAID5/ 进行/ 比较/ 的/ 节能/ RAID/ 包括/ Hibernator/ 、/ PARAID/ 、/ WOL1/ 、/ WOL5/ 、/ GRAID/ 、/ eRAID5/ ./ 功耗/ 测量/ 系统/ 见图/ 2/ ,/ 包括/ 1/ 台/ 运行/ Linux2/ ./ 6.26/ 的/ 存储/ 服务器/ 、/ 磁盘阵列/ (/ 磁盘/ 数由/ 所/ 测试/ 的/ 具体/ RAID/ 类型/ 决定/ )/ 、/ 测控/ 计算机/ 、/ 电流表/ 以及/ 电源/ 等/ 部分/ ./ 存储/ 服务器/ 配置/ 如下/ :/ Intel/ (/ R/ )/ Core/ (/ TM/ )/ i3/ -/ 2100CPU/ ,/ 4GB/ 内存/ ,/ 主板/ 型号/ 为/ ASUSP8B/ -/ C/ // SAS/ // 4L/ ,/ 通过/ 主板/ 集成/ 的/ LSI2008SAS/ 存储/ 控制器/ ,/ 在/ 背板/ 上/ 扩展/ 出/ 32/ 个/ 盘位/ ,/ 可/ 连接/ 32/ 个/ SAS/ // SATA/ 磁盘/ ,/ 选用/ 2TB/ 的/ 希捷/ ST32000644NS/ 磁盘/ 组成/ 磁盘阵列/ ./ 利用/ 电流表/ 测量/ 电流/ ,/ 测控/ 计算/ Page7/ 机/ 负责/ 设定/ 电流/ 采用/ 频率/ ,/ 并/ 在/ 测量/ 结束/ 后/ 读取/ 测量/ 的/ 电流值/ ,/ 电流表/ 通过/ LAN/ 线/ 与/ 测控/ 计算机/ 相连/ ./ 磁盘/ 的/ 功率/ 测量/ 见图/ 3/ ,/ 采用/ GWPPE/ -/ 3323/ 高精度/ 稳压电源/ ,/ 为/ 磁盘/ 的/ 提供/ +/ 5V/ 和/ +/ 12V/ 电压/ ,/ 利用/ Agilent34410A/ 数字/ 万用表/ ,/ 分别/ 测量/ 并/ 存储/ 其/ 电流值/ ./ 测控/ 计算机/ 读取/ 电流值/ ,/ 根据/ 电流/ 、/ 电压/ 求/ 出/ 功率/ 值/ ./ 为了/ 比较/ ,/ 分别/ 把/ 磁盘阵列/ 配置/ 成/ S/ -/ RAID5/ 、/ Hibernator/ 、/ PARAID/ 、/ WOL1/ 、/ WOL5/ 、/ GRAID/ 及/ eRAID5/ ,/ 来/ 保存/ 采集/ 的/ 视频/ 数据/ ,/ 每种/ 配置/ 的/ 测试/ 时间/ 为/ 24h/ ,/ 电流/ 采样/ 频率/ 为/ 5/ ,/ ChunkSize/ 为/ 64KB/ ./ 采用/ NILFS/ (/ NewImplementationofaLog/ -/ structuredFileSystem/ )/ 文件系统/ ,/ NILFS/ 是/ 一种/ 日志/ 结构/ 文件系统/ (/ Log/ -/ structuredFileSystem/ )/ ,/ 采用/ 顺序/ 写/ 的/ 方式/ ,/ 减少/ 物理/ 磁盘/ 的/ 寻道/ ,/ 非常适合/ 视频/ 监控/ 、/ CDP/ 等/ 以/ 顺序/ 写/ 操作/ 为主/ 的/ 应用/ ./ 为了/ 便于管理/ ,/ 把/ 整个/ 存储空间/ 划分/ 为/ 31/ 个/ 逻辑盘/ ,/ 每个/ 逻辑盘/ 上/ 建立/ 1/ 个/ NILFS/ 文件系统/ ,/ 保存/ 1/ 天/ 的/ 视频/ 监控/ 数据/ ,/ 当/ 第/ 31/ 天/ 数据/ 写/ 满后/ ,/ 删除/ 第/ 1/ 天/ 的/ 监控/ 数据/ ,/ 依此类推/ ,/ 这样/ 存储空间/ 始终/ 保存/ 30/ 天/ 的/ 监控/ 数据/ ./ 4.2/ 冗余/ 磁盘/ 由于/ 需要/ 保存/ 的/ 数据量/ 为/ 20.74/ TB/ ,/ 对于/ 容量/ 为/ 2TB/ 的/ 磁盘/ ,/ 需要/ 11/ 块/ ,/ 考虑/ 到/ 文件系统/ 对/ 存储空间/ 的/ 额外/ 消耗/ ,/ 取/ 12/ 块/ 磁盘/ 保存/ 基本/ 数据/ ./ 为了/ 实现/ 单盘/ 数据/ 容错/ ,/ 对于/ S/ -/ RAID5/ ,/ 需要/ 1/ 块/ 磁盘/ 的/ 空间/ 存储/ 校验/ 信息/ ,/ 所以/ 共需/ 13/ 块/ 磁盘/ ./ Hibernator/ 把/ 所有/ 相同/ 转速/ 的/ 磁盘/ 组成/ 1/ 个/ RAID/ ,/ 由于/ 磁盘/ 有/ 运行/ 和/ 待机/ 两种/ 转速/ ,/ 需要/ 构成/ 2/ 个/ RAID/ ,/ 分别/ 处于/ 运行/ 和/ 待机/ 状态/ ,/ 数据/ 盘/ 在/ 2/ 个/ RAID/ 之间/ 动态/ 迁移/ ,/ 所以/ 需要/ 2/ 个/ 磁盘/ 的/ 校验/ 信息/ ,/ 共需/ 14/ 块/ 磁盘/ ./ 在/ PARAID/ 中/ ,/ 跨越/ 磁盘/ 数/ 最少/ 的/ 逻辑/ RAID/ 的/ 节能/ 效果/ 最好/ ,/ 由于/ 每级/ 逻辑/ RAID/ 都/ 需要/ 保存/ 1/ 份/ 完整/ 的/ 存储/ 数据/ ,/ 因此/ 在/ 最/ 节能/ 逻辑/ RAID/ 中/ ,/ 需要/ 保存/ 12/ 块/ 磁盘/ 的/ 数据量/ ,/ 加上/ 1/ 块/ 磁盘/ 的/ 校验/ 信息/ ,/ 共需/ 13/ 块/ 磁盘/ ./ 对于/ WOL1/ ,/ 每/ 1/ 个/ 数据/ 盘/ 需要/ 1/ 块/ 校验/ 盘/ ,/ 共需/ 24/ 块/ 磁盘/ ./ 而/ WOL5/ ,/ 每/ 2/ 块/ 盘/ 的/ 数据量/ ,/ 需要/ 1/ 块/ 盘/ 的/ 校验/ 信息/ ,/ 共需/ 18/ 块/ 磁盘/ ./ GRAID/ 是/ 镜像/ RAID/ ,/ 12/ 块/ 数据/ 盘/ 需要/ 12/ 块/ 校验/ 盘/ ,/ 共需/ 24/ 块/ 磁盘/ ./ eRAID5/ 中/ ,/ 12/ 块/ 盘/ 的/ 数据量/ ,/ 需要/ 1/ 块/ 盘/ 的/ 校验/ 信息/ ,/ 所以/ 共需/ 13/ 块/ 磁盘/ ./ 配置/ 以上/ 不同/ 类型/ 节能/ RAID/ 所/ 需/ 的/ 磁盘/ 数/ ,/ 见表/ 4/ ./ 阵列/ 类型/ S/ -/ RAID5HibernatorPARAIDWOL1WOL5GRAIDeRAID5/ 其中/ S/ -/ RAID5/ 、/ PARAID/ 、/ eRAID/ 的/ 冗余/ 磁盘/ 数/ 最少/ ,/ 均/ 为/ 1/ 块/ ,/ 而/ GRAID/ 、/ WOL1/ 的/ 冗余/ 磁盘/ 数最多/ ,/ 均/ 为/ 12/ 块/ ./ 以上/ 各/ RAID/ 均/ 能够/ 实现/ 1/ 块/ 磁盘/ 的/ 容错/ ./ 对于/ 海量/ 数据/ 存储/ ,/ 尽管/ 目前/ 磁盘/ 的/ 价格/ 已经/ 很/ 低/ ,/ 但/ 冗余/ 磁盘/ 的/ 购置/ 费用/ 仍/ 不可/ 忽视/ ,/ 尤其/ 是/ 基于/ 镜像/ 的/ 磁盘阵列/ ,/ 如/ GRAID/ 、/ WOL1/ 的/ 冗余/ 磁盘/ 比/ S/ -/ RAID5/ 多/ 11/ 块/ ,/ 若/ 2TB/ 的/ 希捷/ ST32000644NS/ 企业级/ 磁盘/ ,/ 每块/ 按/ 1500/ 元/ 计算/ ,/ 约/ 为/ 16500/ 元/ ./ 4.3/ 犘/ =/ 12/ 、/ 犙/ =/ 1/ 分组/ 方式/ 4.3/ ./ 1/ 性能/ 测试/ 采取/ D1/ 视频/ 数据/ 标准/ 时/ ,/ 平均码率/ 为/ 2MB/ // s/ ,/ Page832/ 路/ 视频/ 数据/ 所/ 需/ 的/ 写/ 带宽/ 仅为/ 2MB/ // s/ ×/ 32/ // 8/ =/ 8MB/ // s/ ./ 对于/ 以写/ 操作/ 为主/ 的/ 视频/ 监控/ ,/ 通常/ 情况/ 下/ ,/ 进行/ 视频/ 回放/ 的/ 频率/ 是/ 非常低/ 的/ (/ 一般/ 在/ 视频/ 取证/ 时/ 回放/ )/ ,/ 即使/ 考虑/ 视频/ 回放/ ,/ 带宽/ 的/ 增加/ 也/ 是/ 有限/ 的/ ./ 首先/ 尝试/ 采用/ P/ =/ 12/ 、/ Q/ =/ 1/ 分组/ 方式/ (/ 磁盘阵列/ 分成/ 12/ 组/ ,/ 每组/ 1/ 个/ 磁盘/ 并行/ )/ 来/ 满足/ 以上/ 的/ 性能需求/ ./ 如果/ 性能/ 不够/ ,/ 可/ 采用/ 其它/ 分组/ 方式/ ,/ 4.4/ 节/ 将/ 对/ 不同/ 分组/ 方式/ 的/ 性能/ 、/ 节能/ 进行/ 测试/ ./ 采用/ P/ =/ 12/ 、/ Q/ =/ 1/ 分组/ 方式/ 时/ ,/ S/ -/ RAID5/ 的/ 数据/ 布局/ 见图/ 4/ ,/ 其中/ 第/ 0/ 组/ 包括/ 数据/ 块/ D/ (/ 0/ ,/ 0/ )/ ,/ D/ (/ 1/ ,/ 0/ )/ ,/ …/ ,/ D/ (/ 11/ ,/ 0/ )/ ,/ D/ (/ 12/ ,/ 0/ )/ ,/ 第/ 1/ 组/ 包括/ 数据/ 块/ D/ (/ 0/ ,/ 1/ )/ ,/ D/ (/ 1/ ,/ 1/ )/ ,/ …/ ,/ D/ (/ 10/ ,/ 0/ )/ ,/ D/ (/ 11/ ,/ 1/ )/ ,/ D/ (/ 12/ ,/ 1/ )/ ,/ 依此类推/ ./ 在/ 该/ 视频/ 监控/ 中/ ,/ 一般/ 只/ 需/ 1/ 组/ 或/ 几组/ 数据/ 所在/ 磁盘/ 工作/ ,/ 其它/ 组/ 磁盘/ 基本/ 没有/ 读写/ 请求/ ,/ 可/ 调度/ 到/ 待机/ 状态/ ,/ 以/ 节省/ 大量/ 能耗/ ./ 第/ 0/ 组第/ 1/ 组/ …/ …/ 第/ 10/ 组第/ 11/ 组/ D/ (/ 0/ ,/ 0/ )/ D/ (/ 0/ ,/ 1/ )/ …/ …/ D/ (/ 0/ ,/ 10/ )/ D/ (/ 0/ ,/ 11/ )/ P/ (/ 0/ )/ D/ (/ 1/ ,/ 0/ )/ D/ (/ 1/ ,/ 1/ )/ …/ …/ D/ (/ 1/ ,/ 10/ )/ P/ (/ 1/ )/ D/ (/ 1/ ,/ 11/ )/ D/ (/ 2/ ,/ 0/ )/ D/ (/ 2/ ,/ 1/ )/ …/ …/ P/ (/ 2/ )/ D/ (/ 2/ ,/ 10/ )/ D/ (/ 2/ ,/ 11/ )/ D/ (/ 10/ ,/ 0/ )/ D/ (/ 10/ ,/ 1/ )/ P/ (/ 10/ )/ …/ …/ D/ (/ 10/ ,/ 10/ )/ D/ (/ 10/ ,/ 11/ )/ D/ (/ 11/ ,/ 0/ )/ P/ (/ 11/ )/ D/ (/ 11/ ,/ 1/ )/ …/ …/ D/ (/ 11/ ,/ 10/ )/ D/ (/ 11/ ,/ 11/ )/ P/ (/ 12/ )/ D/ (/ 12/ ,/ 0/ )/ D/ (/ 12/ ,/ 1/ )/ …/ …/ D/ (/ 12/ ,/ 10/ )/ D/ (/ 12/ ,/ 11/ )/ Disk0Disk1/ …/ …/ Disk10Disk11Disk12/ …/ …/ …/ …/ …/ …/ …/ 图/ 413/ 磁盘/ 、/ 12/ 分组/ 的/ S/ -/ RAID5/ 数据/ 布局/ 首先/ 利用/ 测试工具/ 进行/ 性能/ 测试/ ,/ 选取/ Iozone/ 测量/ NILFS/ 文件系统/ 下/ S/ -/ RAID5/ 的/ 写/ 性能/ ,/ 采用/ 缓存/ I/ // O/ (/ fsync/ )/ 方式/ ,/ 测试/ 结果/ 见图/ 5/ (/ a/ )/ ,/ 其中/ 随机/ 写/ 操作/ 的/ 数据/ 传输率/ 最小/ 约/ 为/ 27MB/ // s/ ,/ 顺序/ 写/ 操作/ 的/ 最小值/ 约/ 为/ 30MB/ // s/ ./ 可得/ 无论/ 随机/ 还是/ 顺序/ 写/ 性能/ ,/ 均/ 远大于/ 8MB/ // s/ 的/ 写/ 性能需求/ ./ 随机/ 写/ 与/ 顺序/ 写/ 性能/ 接近/ ,/ 是/ 由于/ NILFS/ 文件系统/ 把/ 随机/ 写/ ,/ 通过/ 地址变换/ 转化成/ 了/ 顺序/ 写/ ./ 地址变换/ 给/ NILFS/ 文件系统/ 下/ 的/ 读/ 性能/ 测试/ 带来/ 不便/ ,/ 因为/ 对/ NILFS/ 文件系统/ 的/ 顺序/ 读/ ,/ 可/ 转换/ 为/ 对/ 磁盘/ 的/ 随机/ 读/ ;/ 对/ 文件系统/ 的/ 随机/ 读/ ,/ 也/ 可能/ 转换/ 为/ 对/ 磁盘/ 的/ 顺序/ 读/ ./ 读/ 性能/ 主要/ 由/ 磁盘/ 上/ 数据/ 块/ 的/ 地址映射/ 情况/ 决定/ ,/ 没有/ 已经/ 存在/ 的/ 写/ 数据/ ,/ 难以/ 准确/ 测试/ 读/ 性能/ ./ 为此/ 选用/ 块级/ 测试工具/ Iometer/ 测试/ 读/ 性能/ ,/ 测试/ 结果/ 见图/ 5/ (/ b/ )/ :/ 顺序/ 读/ 操作/ 的/ 数据/ 传输率/ 高达/ 100MB/ // s/ ;/ 对于/ 随机/ 读/ 操作/ ,/ 当/ 平均/ 请求/ 长度/ 大于/ 256KB/ ,/ 数据/ 传输率/ 大于/ 18MB/ // s/ ./ NILFS/ 文件系统/ 的/ 地址变换/ ,/ 对/ 读/ 性能/ 的/ 影响/ 可/ 忽略/ ./ 实际上/ ,/ 在/ 顺序/ 数据/ 存储/ 中/ ,/ 读/ 性能/ 一般/ 会/ 很/ 高/ ,/ 因为/ 读/ 操作/ 大多/ 重复/ 以前/ 的/ 写/ 操作/ ,/ 表现/ 为/ 对/ 磁盘/ 的/ 顺序/ 读/ ./ 如/ 视频/ 监控/ 中/ ,/ 回放/ 以前/ 记录/ 的/ 视频/ 时/ ,/ 即/ 重复/ 以前/ 的/ 写/ 操作/ ;/ 利用/ CDP/ 进行/ 数据恢复/ 时/ ,/ 读/ 操作/ 也/ 在/ 重复/ 以前/ 的/ 写/ 操作/ ;/ 其它/ 如/ 备份/ 、/ 归档/ 等/ ,/ 情况/ 与/ 视频/ 监控/ 、/ CDP/ 类似/ ./ 图/ 5P/ =/ 12/ 、/ Q/ =/ 1/ 分组/ 时/ S/ -/ RAID5/ 的/ 性能/ 为了/ 进一步/ 验证/ 该/ 分组/ 方式/ 能否/ 满足/ 性能需求/ ,/ 进行/ 了/ 实际/ 数据/ 读写/ 测试/ ./ 向/ S/ -/ RAID5/ 写入/ 视频/ 数据/ ,/ 然后/ 检验/ 写入/ 数据/ 的/ 正确性/ ,/ 同时/ 进行/ 视频/ 回放/ ./ 测试表明/ ,/ 该/ S/ -/ RAID5/ 能够/ 正确/ 写入/ 32/ 路/ D1/ 标准/ 的/ 视频/ 数据/ ,/ 以及/ 正确/ 回放/ 记录/ 的/ 数据/ ,/ 为了/ 避免/ 直接/ 从/ 内存/ 缓冲区/ 读取/ 回放/ 数据/ ,/ 回放/ 的/ 是/ 1h/ 以前/ 的/ 监控/ 数据/ ./ 综上/ ,/ P/ =/ 12/ 、/ Q/ =/ 1/ 分组/ 方式/ 的/ S/ -/ RAID5/ 能够/ 满足/ 该/ 视频/ 监控/ 系统/ 的/ 性能/ 要求/ ,/ 进一步/ 测试表明/ Hibernator/ 、/ PARAID/ 、/ WOL1/ 、/ WOL5/ 、/ GRAID/ 以及/ eRAID5/ 等/ ,/ 均/ 能/ 满足/ 该/ 视频/ 监控/ 系统/ 的/ 性能/ 要求/ ,/ 其中/ Hibernator/ 、/ WOL1/ 的/ 性能/ 与/ S/ -/ RAID5/ 接近/ ,/ 而/ PARAID/ 、/ GRAID/ 、/ eRAID5/ 的/ 性能/ 则/ 远/ 优于/ S/ -/ RAID5/ ./ 由于/ 该/ 视频/ 监控/ 系统对/ 存储/ 性能/ 要求/ 不高/ ,/ PARAID/ 、/ GRAID/ 、/ eRAID5/ 的/ 高性能/ 基本/ 被/ 浪费/ 掉/ ,/ 同时/ 带来/ 了/ 高能耗/ ./ 4.3/ ./ 2/ 能耗/ 测试/ 对于/ S/ -/ RAID5/ 、/ Hibernator/ 、/ PARAID/ 、/ WOL1/ 、/ WOL5/ 、/ GRAID/ 以及/ eRAID5/ ,/ 测得/ 的/ 24h/ 功耗/ 如/ Page9/ 图/ 6/ 所示/ ,/ 其中/ S/ -/ RAID5/ 的/ 节能/ 效果/ 最好/ ,/ 24h/ 功耗/ 仅为/ 0.4999/ kWh/ ,/ 约/ 为/ WOL1/ 功耗/ 的/ 79/ %/ ,/ WOL5/ 功耗/ 的/ 68/ %/ ,/ Hibernator/ 功耗/ 的/ 59/ %/ ,/ eRAID5/ 功耗/ 的/ 23/ %/ ,/ PARAID/ 、/ GRAID/ 功耗/ 的/ 21/ %/ 左右/ ./ 其中/ PARAID/ 、/ GRAID/ 的/ 功耗/ 最高/ ,/ 约/ 为/ 2.34/ kWh/ ./ 图/ 632/ 路/ D1/ 标准/ 的/ 视频/ 监控/ 中/ ,/ 各/ 节能/ RAID/ 的/ 24h/ 功耗/ 为了/ 进一步/ 验证/ S/ -/ RAID5/ 适用/ 于/ 视频/ 监控/ 等/ 顺序/ 数据/ 存储系统/ ,/ 表/ 5/ 给出/ 了/ S/ -/ RAID5/ 与/ Hibernator/ 、/ PARAID/ 、/ WOL1/ 、/ WOL5/ 、/ GRAID/ 、/ eRAID5/ 相/ 比较/ ,/ 能够/ 节省/ 的/ 磁盘/ 购置/ 费用/ 、/ 运行/ 1/ 年/ 节约/ 的/ 电量/ (/ 根据/ 24h/ 功耗/ 测量/ 结果/ 计算/ )/ ,/ 容量/ 为/ 2TB/ 的/ 希捷/ ST32000644NS/ 企业级/ 磁盘/ ,/ 每块/ 按/ 1500/ 元/ 计算/ ./ 表/ 5/ 各/ 节能/ RAID/ 相对/ S/ -/ RAID5/ 的/ 额外/ 消耗/ (/ 值/ 越小越/ 好/ )/ 阵列/ 类型/ 额外/ 磁盘/ 购置/ 费用/ // 年/ 额外/ 耗电量/ // kWhS/ -/ RAID5Hibernator1500PARAIDWOL1WOL5GRAIDeRAID5/ 由表/ 5/ 得/ ,/ PARAID/ 、/ GRAID/ 、/ eRAID5/ 的/ 能耗/ 最高/ ,/ 与/ S/ -/ RAID5/ 相比/ ,/ 每年/ 多/ 消耗/ 600kWh/ 以上/ 的/ 电量/ ./ WOL1/ 与/ WOL5/ 的/ 功耗/ 略高于/ S/ -/ RAID5/ ,/ 但/ 其/ 冗余/ 磁盘/ 的/ 购置/ 费用/ 远大于/ S/ -/ RAID5/ ,/ 分别/ 超出/ 16500/ 和/ 7500/ 元/ ./ Hibernator/ 的/ 能耗/ 与/ 冗余/ 磁盘/ 趋中/ ,/ 但/ 仍/ 高于/ S/ -/ RAID5/ ./ 综上/ ,/ S/ -/ RAID5/ 与/ 这/ 几种/ 典型/ 节能/ 磁盘阵列/ 相比/ ,/ 在/ 满足/ 性能需求/ 、/ 单盘/ 容错/ 的/ 前提/ 下/ ,/ 其/ 功耗/ 最低/ ,/ 冗余/ 磁盘/ 最少/ ./ 4.4/ 其它/ 分组/ 方式/ S/ -/ RAID5/ 能够/ 根据/ 存储系统/ 的/ 总体/ 性能需求/ ,/ 采用/ 不同/ 的/ 分组/ 方式/ ,/ 改变/ 组内/ 并行/ 磁盘/ 的/ 数量/ ,/ 以/ 提供/ 合适/ 的/ 性能/ ./ 下面/ 将/ 分别/ 测试/ S/ -/ RAID5/ 在/ 不同/ 分组/ 方式/ 下/ 的/ 性能/ 和/ 能耗/ ./ 首先/ 选取/ Iozone/ 测试/ NILFS/ 文件系统/ 下/ 不同/ 分组/ 方式/ 的/ 写/ 性能/ ,/ 分组/ 方式/ 包括/ P/ =/ 12/ 、/ Q/ =/ 1/ 时/ ,/ 磁盘阵列/ 分成/ 12/ 组/ ,/ 每组/ 1/ 个/ 磁盘/ 并行/ ;/ P/ =/ 6/ 、/ Q/ =/ 2/ 时/ ,/ 磁盘阵列/ 分成/ 6/ 组/ ,/ 每组/ 2/ 个/ 磁盘/ 并行/ ;/ P/ =/ 3/ 、/ Q/ =/ 4/ 时/ ,/ 磁盘阵列/ 分成/ 3/ 组/ ,/ 每组/ 4/ 个/ 磁盘/ 并行/ ;/ P/ =/ 1/ 、/ Q/ =/ 12/ ,/ 磁盘阵列/ 分成/ 1/ 组/ ,/ 每组/ 12/ 个/ 磁盘/ 并行/ ,/ 测试/ 结果/ 见图/ 7/ (/ a/ )/ ,/ 其中/ 缓冲区/ 大小/ 为/ 16KB/ ./ 由图/ 7/ (/ a/ )/ 得/ ,/ 随着/ 组内/ 并行/ 磁盘/ 的/ 增加/ ,/ S/ -/ RAID5/ 的/ 写/ 性能/ 显著/ 提高/ ,/ 如/ Q/ =/ 2/ 时写/ 性能/ 达到/ 54.94/ MB/ // s/ ,/ 而/ Q/ =/ 4/ 时/ 的/ 写/ 性能/ 已经/ 超过/ 100MB/ // s/ ,/ 能够/ 满足/ 一般/ 顺序/ 数据/ 存储系统/ 的/ 性能需求/ ./ 图/ 7/ 不同/ 分组/ 方式/ 下/ S/ -/ RAID5/ 的/ 写/ 性能/ 与/ 功耗/ NILFS/ 文件系统/ 下/ 不同/ 分组/ 方式/ 的/ 读/ 性能/ ,/ 主要/ 由/ 磁盘/ 上/ 数据/ 块/ 的/ 地址映射/ 情况/ 决定/ ,/ 没有/ 已经/ 存在/ 的/ 写/ 数据/ ,/ 难以/ 准确/ 测试/ 读/ 性能/ ./ 一般/ 情况/ 下读/ 性能/ 较/ 高/ ,/ 因为/ 顺序/ 数据/ 存储系统/ 的/ 读/ 操作/ 主要/ 回放/ 写/ 操作/ ,/ 而/ 写/ 操作/ 是/ 顺序/ 的/ (/ 地址变换/ 后/ )/ ./ 同时/ 由于/ 读/ 操作/ 不/ 需要/ 额外/ 的/ I/ // O/ (/ 写/ 操作/ 中/ 的/ 读/ 改写/ 、/ 重构/ 写/ 需要/ 额外/ 的/ I/ // O/ )/ ,/ 读/ 性能/ 一般/ 要/ 高于/ 写/ 性能/ ./ 不同/ 分组/ 方式/ 下/ S/ -/ RAID5/ 的/ 24h/ 功耗/ 见图/ 7/ (/ b/ )/ ,/ 随着/ 组内/ 并行/ 工作/ 磁盘/ 数/ 的/ 增加/ ,/ S/ -/ RAID5/ 的/ 功耗/ 也/ 随之/ 增加/ ,/ 当/ Q/ =/ 12/ (/ 全局/ 并行/ )/ ,/ 性能/ 最高/ ,/ 功耗/ 也/ 最大/ ,/ 其/ 性能/ 、/ 功耗/ 与/ PARAID/ 、/ eRAID5/ 相当/ ,/ 此时/ 失去/ 节能/ 效果/ ./ 然而/ ,/ 对于/ 一般/ 的/ 顺序/ 数据/ 存储系统/ ,/ 局部/ 并行/ 已经/ 能够/ 提供/ 足够/ 的/ 性能/ ,/ 如/ Q/ =/ 2/ 时/ 的/ 随机/ 写/ 性能/ 为/ 54.94/ MB/ // s/ ,/ 见图/ 7/ (/ a/ )/ ,/ 而/ Page1024h/ 功耗/ 约/ 为/ 0.667/ kWh/ ,/ 见图/ 7/ (/ b/ )/ ,/ 其/ 功耗/ 仅仅/ 略高于/ WOL1/ ,/ 见图/ 6/ ,/ 却/ 比/ WOL1/ 节省/ 11/ 块/ 2TB/ 的/ 冗余/ 磁盘/ ,/ 见表/ 4.4/ ./ 5NTFS/ 文件系统/ 下/ 的/ 性能/ 与/ 节能/ 测试/ NILFS/ 文件系统/ 是/ 非常适合/ 于/ S/ -/ RAID5/ ,/ 因为/ 它/ 可以/ 将/ 随机/ 写/ 转为/ 顺序/ 写/ ./ 对于/ 其它/ 文件系统/ ,/ 由于/ 数据管理/ 方式/ 各不相同/ ,/ 将/ 对/ S/ -/ RAID5/ 的/ 性能/ 、/ 节能/ 效果/ 产生/ 重要/ 影响/ ./ 本节/ 将/ 研究/ Linux/ 下/ 的/ EXT3/ 、/ Windows/ 下/ 的/ NTFS/ 文件系统/ 是否/ 适合/ 于/ S/ -/ RAID5/ ./ 4.5/ ./ 1NTFS/ 下/ 的/ 数据/ 特征/ 判断/ 文件系统/ 是否/ 适合/ 于/ S/ -/ RAID5/ ,/ 需要/ 获取/ 该/ 文件系统/ 在/ 典型/ 顺序/ 数据/ 访问/ 中/ 的/ 数据/ 特征/ ,/ 设计/ 如下/ 实验/ :/ 在/ NTFS/ 文件系统/ 下/ ,/ 采用/ 块级/ I/ // O/ 跟踪/ 工具/ Blktrace/ ,/ 追踪/ 该/ 32/ 路/ 视频/ 监控/ 系统/ (/ 详见/ 4.1/ 节/ )/ 的/ 所有/ I/ // O/ 请求/ ,/ 然后/ 通过/ Blkparse/ 分析/ 追踪/ 到/ 的/ I/ // O/ 请求/ ,/ 进而/ 获得/ 该/ 文件系统/ 下/ 的/ 数据/ 特征/ ,/ 实验/ 中/ 的/ 存储空间/ 大小/ 为/ 160GB/ ,/ 追踪/ 时间/ 为/ 5h/ (/ 从/ 文件系统/ 创建/ 到/ 存储空间/ 写满/ ,/ 每/ 小时/ 数据量/ 为/ 28.8/ GB/ )/ ./ NTFS/ 文件系统/ 的/ 数据/ 特征/ ,/ 如图/ 8/ 所示/ ,/ 除/ 部分/ 存储/ 区/ (/ 逻辑/ 地址/ 0/ 和/ 逻辑/ 地址/ 0.4/ ×/ 108/ 附近/ )/ 被/ 重复/ 访问/ 外/ ,/ 其余/ 为/ 理想/ 的/ 顺序/ 数据/ 访问/ ./ 4.5/ ./ 2NTFS/ 下/ 的/ 读写/ 性能/ 应用/ NTFS/ 文件系统/ 时/ ,/ 测试/ 负载/ 的/ 连续性/ ,/ 直接/ 影响/ S/ -/ RAID5/ 的/ 性能/ 测试/ 结果/ ./ 由图/ 8/ 可知/ ,/ 在/ 典型/ 顺序/ 数据/ 访问/ 应用/ 中/ ,/ NTFS/ 的/ 数据/ 特征/ 基本/ 是/ 连续/ 的/ (/ 少量/ 离散/ 访问/ 被/ 缓冲/ 、/ Cache/ 过滤/ 后/ )/ ,/ 因此/ 可用/ 连续/ 负载/ ,/ 测试/ S/ -/ RAID5/ 在/ NTFS/ 下/ 的/ 性能/ ./ 非/ 连续/ 负载/ 虽然/ 能够/ 反应/ S/ -/ RAID5/ 的/ 基本/ 性能/ ,/ 但/ 对/ S/ -/ RAID5/ 的/ 应用/ 没有/ 太/ 大/ 参考价值/ ,/ 因为/ S/ -/ RAID5/ 主要/ 面向/ 顺序/ 数据/ 访问/ 应用/ ./ 关于/ 存储空间/ 写/ 满后/ ,/ 删除/ 旧/ 数据/ ,/ 写入/ 新/ 数据/ 等/ 操作/ ,/ 一般/ 会/ 破坏/ NTFS/ 以上/ 理想/ 的/ 数据/ 特征/ ,/ 这方面/ 的/ 优化/ 将/ 稍后/ 讨论/ (/ 见/ 4.5/ ./ 3/ 小节/ )/ ./ 对于/ 读/ 操作/ ,/ 在/ 实际/ 顺序/ 数据/ 访问/ 中/ ,/ 基本/ 以/ 回放/ 写/ 操作/ 为主/ ,/ 如/ 视频/ 监控/ 系统/ 的/ 视频/ 回放/ ,/ CDP/ 系统/ 的/ 数据恢复/ 过程/ ,/ 因此/ 一般/ 表现/ 为/ 连续/ 读/ 操作/ ./ 选取/ Iozone/ 测量/ NTFS/ 文件系统/ 下/ S/ -/ RAID5/ 的/ 读/ 、/ 写/ 性能/ ,/ 采用/ 缓存/ I/ // O/ (/ fsync/ )/ 方式/ ,/ 测试/ 结果/ 见图/ 9/ ,/ 其中/ 顺序/ 写/ 操作/ 的/ 最小/ 数据/ 传输率/ 为/ 29.8/ MB/ // s/ ,/ 而/ 顺序/ 读/ 操作/ 的/ 最小值/ 为/ 109MB/ // s/ ./ 虽然/ 读写/ 性能/ 相差/ 较大/ ,/ 但/ 写/ 性能/ 完全/ 能够/ 满足/ 该/ 视频/ 监控/ 系统/ 的/ 基本/ 性能/ 要求/ (/ 8MB/ // s/ 写/ 带宽/ )/ ./ 4.5/ ./ 3NTFS/ 下/ 的/ 节能/ 对于/ NTFS/ 文件系统/ ,/ 当/ 存储空间/ 写/ 满后/ ,/ 删除/ 旧/ 数据/ ,/ 写入/ 新/ 数据/ 等/ 操作/ ,/ 会/ 破坏/ 其/ 理想/ 的/ 数据/ 特征/ (/ 见图/ 8/ )/ ./ 因此/ ,/ 可应/ 采用/ 如下/ 措施/ :/ 把/ S/ -/ RAID5/ 的/ 存储空间/ 划分/ 为/ 31/ 个/ 逻辑/ 分区/ ,/ 并/ 分别/ 创建/ 文件系统/ ;/ 数据/ 依次/ 写入/ 每个/ 分区/ ;/ 全部/ 写/ 满后/ ,/ 在/ 第/ 1/ 个/ 分区/ 上/ 重新/ 创建/ 文件系统/ (/ 即/ 删除/ 第/ 1/ 逻辑/ 分区/ 的/ 视频/ 数据/ )/ ,/ 依此类推/ ./ 该/ 方法/ 既/ 可/ 实现/ 保存/ 30/ 天/ 视频/ 数据/ 的/ 存储/ 需求/ ,/ 又/ 可/ 避免/ 由于/ 数据/ 写满/ 而/ 导致/ NTFS/ 数据/ 特征/ 变坏/ 的/ 情况/ ./ 采用/ 如/ 上/ 优化/ 措施/ 后/ ,/ 测试/ 该/ S/ -/ RAID5/ 在/ NTFS/ 下/ 的/ 8h/ 平均/ 功耗/ 约/ 为/ 0.163/ Wh/ ,/ 与其/ 在/ NILFS/ 下/ 的/ 8h/ 功耗/ 基本相同/ ./ 进一步/ 测量/ 其它/ 节能/ 方法/ ,/ 得/ 其/ 在/ NTFS/ 下/ 的/ 8h/ 平均/ 功耗/ ,/ 与其/ 在/ NILFS/ 下/ 的/ 功耗/ 也/ 基本相同/ ,/ 主要/ 因为/ 2/ 种/ 文件系统/ 的/ 数据/ 特征/ 基本相同/ ,/ 即/ 少量/ 随机/ 数据/ 访问/ 被/ 过滤/ 后/ ,/ 均/ 表现/ 为/ 顺序/ 写/ 操作/ ./ 5/ 面向/ 非/ 平稳/ 负载/ 的/ 优化/ 为/ 使/ S/ -/ RAID5/ 能够/ 很/ 好/ 适应/ 顺序/ 数据/ 访问/ 中/ 的/ 非/ 平稳/ 负载/ ,/ 包括/ 波动/ 负载/ 和/ 突发/ 负载/ ,/ 需要/ 对/ S/ -/ RAID5/ 进行/ 特定/ 的/ 优化/ ./ Page11/ 由于/ 顺序/ 数据/ 访问/ 以写/ 操作/ 为主/ ,/ 因此/ 可/ 综合/ 采用/ 文献/ [/ 14/ ,/ 22/ ]/ 的/ 思想/ 优化/ S/ -/ RAID5/ 的/ 性能/ :/ 监控/ S/ -/ RAID5/ 的/ 工作/ 负载/ 情况/ ,/ 当其/ 负载/ 大于/ 某个/ 阈值/ 时/ ,/ 如其/ 最大/ 数据/ 传输率/ 的/ 80/ %/ ,/ 则/ 将/ 其/ 写/ 操作/ 重定向/ 到/ 某个/ 日志/ 设备/ 当中/ ,/ 日志/ 设备/ 可采/ 磁盘/ 或/ 低功耗/ 的/ SSD/ ;/ 而/ 当/ S/ -/ RAID5/ 负载/ 较/ 轻/ 、/ 或/ 该/ 分组/ 所在/ 磁盘/ 待机/ 时/ ,/ 恢复/ 重定向/ 的/ 写/ 数据/ ./ 采用/ 日志/ 方式/ 管理/ 重定向/ 的/ 写/ 数据/ ,/ 所/ 需/ 的/ 主要/ 数据结构/ 是/ 日志/ 链表/ [/ 24/ ]/ ,/ 日志/ 链表/ 包含/ 若干条/ 日志/ 信息/ ,/ 每条/ 日志/ 信息/ 记录/ 一个/ 重定向/ 的/ 写/ 操作/ ./ 日志/ 信息/ 的/ 主要/ 内容/ 如下/ :/ LBA/ :/ 写/ 操作/ 在/ S/ -/ RAID5/ 中/ 的/ 起始/ 地址/ ;/ Log/ _/ LBA/ :/ 写/ 操作/ 在/ 日志/ 设备/ 中/ 的/ 起始/ 地址/ ;/ Length/ :/ 写/ 数据/ 长度/ ;/ Hash/ _/ pre/ 与/ Hash/ _/ next/ :/ 链接/ 日志/ 信息/ 的/ 两个/ 重定向/ 写/ 数据/ 会/ 引起/ 存储/ 数据/ 的/ 一致性/ 问题/ ,/ 指针/ ./ 因此/ 需要/ 执行/ 特殊/ 的/ 读/ 、/ 写/ 流程/ ,/ 详见/ 文献/ [/ 16/ ]/ ./ 基于/ Linux/ 中/ MD/ 模块/ 下/ 的/ 线性/ RAID/ (/ LinearRAID/ )/ 子/ 模块/ ,/ 把/ S/ -/ RAID5/ 和/ 日志/ 设备/ 组成/ 一个/ 线性/ 存储空间/ ,/ 并/ 在/ LinearRAID/ 层上/ 实现/ 以上/ 性能/ 优化/ 方法/ ,/ 其中/ 日志/ 设备/ 为/ 2/ 块/ Samsung830Series/ (/ SATAIII/ )/ 、/ 64GB/ 的/ SSD/ 组成/ 的/ 镜像/ RAID/ (/ 重定向/ 数据/ 需要/ 冗余/ 保护/ )/ ./ 写/ 带宽/ 大于/ 20MB/ // s/ 时/ ,/ 重定向/ 写/ 数据/ 到/ 日志/ 设备/ ,/ 根据/ 图/ 5/ (/ a/ )/ 所示/ ,/ 该值/ 小于/ S/ -/ RAID5/ 写/ 带宽/ 的/ 80/ %/ ./ 选用/ 块级/ 测试工具/ Iometer/ 测试/ S/ -/ RAID5/ 的/ 写/ 性能/ ,/ 实验/ 结果表明/ ,/ 此时/ S/ -/ RAID5/ 的/ 最小/ 写/ 带宽/ 超过/ 110MB/ // s/ ,/ 为/ 正常/ 负载/ 带宽/ 需求/ (/ 8MB/ // s/ )/ 的/ 13/ 倍/ 以上/ ./ 此时/ ,/ 写/ 数据/ 全部/ 被/ 写入/ 日志/ 设备/ ,/ 在/ 该/ 实例/ 中/ ,/ 每/ 小时/ 写入/ 的/ 数据量/ 为/ 28.8/ GB/ ,/ 以上/ 日志/ 设备/ 能够/ 缓存/ 约/ 2.2/ h/ (/ 64GB/ // 28.8/ GB/ )/ 的/ 非/ 平稳/ 负载/ ./ 可/ 在/ 负载/ 较/ 轻/ ,/ 或/ 该/ 分组/ 所在/ 磁盘/ 空闲/ 时/ ,/ 恢复/ 日志/ 设备/ 中/ 重定向/ 的/ 写/ 数据/ ./ S/ -/ RAID5/ 应用/ 于/ 确定/ 的/ 顺序/ 数据/ 访问/ 应用/ 时/ ,/ 需要/ 估算/ 实际/ 应用/ 的/ 基本/ 带宽/ 需求/ 、/ 波动/ 负载/ 的/ 周期/ 、/ 强度/ 、/ 持续时间/ ,/ 以及/ 突发/ 负载/ 的/ 强度/ 、/ 持续时间/ 等/ 参数/ ,/ 并/ 根据/ 估算/ 结果/ 设置/ S/ -/ RAID5/ 的/ 局部/ 并行度/ 、/ 日志/ 设备/ 的/ 容量/ 和/ 带宽/ ./ 也/ 可/ 采用/ 人工智能/ 的/ 相关/ 知识/ ,/ 通过/ 在线/ 学习/ 获得/ 以上/ 参数/ ,/ 该/ 部分/ 内容/ 值得/ 进一步/ 深入研究/ ./ 如果/ 非/ 平稳/ 负载/ 过于/ 复杂/ ,/ 也/ 可/ 构建/ 基于/ S/ -/ RAID5/ 的/ 分层/ 存储系统/ (/ 类似/ 于/ MAID/ )/ ,/ 如/ 上层/ 采用/ SSD/ ,/ 下层/ 采用/ S/ -/ RAID5/ ,/ 通过/ 上层/ 的/ 缓冲/ ,/ 可较/ 好/ 地/ 把/ 非/ 平稳/ 负载/ 转换/ 为/ 平稳/ 负载/ ,/ 随着/ SSD/ 价格/ 的/ 下降/ ,/ 该/ 方案/ 是/ 切实可行/ 的/ ./ 关于/ 应用/ S/ -/ RAID5/ 构建/ 分层/ 存储系统/ ,/ 这里/ 不过/ 多/ 讨论/ ./ 6/ 结论/ 与/ 展望/ 针对/ 顺序/ 数据/ 存储系统/ ,/ 如/ 视频/ 监控/ 、/ CDP/ 、/ VTL/ 等/ 的/ 数据/ 特征/ 和/ 存储/ 特性/ ,/ 提出/ 了/ 适于/ 该类/ 存储系统/ 的/ 节能/ 磁盘阵列/ S/ -/ RAID5/ ,/ 包括/ 阵列/ 的/ 底层/ 数据/ 布局/ 、/ 磁盘/ 节能/ 调度/ 算法/ 和/ Cache/ 管理策略/ 等/ 内容/ ./ 通过/ 32/ 路/ D1/ 标准/ 的/ 视频/ 监控/ 模拟实验/ ,/ 对/ S/ -/ RAID5/ 与/ Hibernator/ 、/ PARAID/ 、/ WOL1/ 、/ WOL5/ 、/ GRAID/ 、/ eRAID5/ 等/ 典型/ 节能/ 磁盘阵列/ 进行/ 了/ 比较/ ./ 24h/ 功耗/ 测量/ 实验/ 表明/ :/ 在/ 满足/ 性能需求/ 、/ 单盘/ 容错/ 的/ 前提/ 下/ ,/ S/ -/ RAID5/ 的/ 功耗/ 最低/ ,/ 冗余/ 磁盘/ 最少/ ,/ 非常适合/ 应用/ 在/ 视频/ 监控/ 、/ CDP/ 、/ VTL/ 等/ 存储系统/ 中/ ./ S/ -/ RAID5/ 的/ 性能/ 提升/ ,/ 可/ 从/ 两/ 方面/ 来/ 实现/ :/ (/ 1/ )/ 调整/ 分组/ 来/ 提高/ 性能/ ,/ S/ -/ RAID5/ 的/ 性能/ 随组内/ 并行/ 磁盘/ 数/ 的/ 增加/ 而/ 显著/ 提高/ ,/ 当然/ 能耗/ 也/ 会/ 相应/ 增加/ ,/ 需要/ 根据/ 性能/ 、/ 能耗/ 做出/ 均衡/ 选择/ ./ (/ 2/ )/ 应用/ WriteOff/ -/ loading/ 方法/ 提高/ 性能/ ./ 当读/ 、/ 写同/ 一组/ 磁盘/ 时/ ,/ 会/ 对/ S/ -/ RAID5/ 的/ 性能/ 产生/ 较大/ 影响/ ./ 可/ 监测/ 磁盘/ 的/ I/ // O/ 请求/ ,/ 当对/ 磁盘/ 同时/ 进行/ 大量/ 读写操作/ 时/ ,/ 则/ 把/ 写/ 操作/ 暂时/ 重定向/ 到/ 其它/ 存储设备/ 上/ ,/ 如/ SSD/ 等/ ,/ 并/ 在/ 磁盘/ 空闲/ 时/ 迁回/ 该/ 写/ 数据/ ./ WriteOff/ -/ loading/ 方法/ 可/ 有效/ 解决/ S/ -/ RAID5/ 中/ ,/ 同时/ 读写/ 一组/ 磁盘/ 的/ 性能/ 瓶颈/ 问题/ ./ 关于/ WriteOff/ -/ loading/ 方法/ 在/ S/ -/ RAID5/ 中/ 具体/ 实现/ 及/ 测试/ ,/ 将/ 在/ 下一阶段/ 工作/ 中/ 进行/ ./ 

