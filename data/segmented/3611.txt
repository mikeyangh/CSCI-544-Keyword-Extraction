Page1/ 基于/ 时间/ 概率/ 代价/ 进程/ 代数/ 的/ Web/ 服务/ 组合/ 建模/ 和/ 分析/ 肖芳雄/ 1/ )/ ,/ 2/ )/ 李燕/ 1/ )/ 黄志球/ 2/ )/ 曹子宁/ 2/ )/ 陈哲/ 2/ )/ 范大娟/ 2/ )/ 1/ )/ (/ 广西/ 财经学院/ 信息/ 与/ 统计/ 学院/ 南宁/ 530003/ )/ 2/ )/ (/ 南京航空航天大学/ 计算机科学/ 与/ 技术/ 学院/ 南京/ 210016/ )/ 摘要/ 形式化/ 建模/ Web/ 服务/ 组合/ 并/ 分析/ 其/ 功能/ 正确性/ 和/ QoS/ 可/ 满足/ 性/ ,/ 是/ 提高/ 组合/ 服务/ 可信性/ 的/ 重要/ 手段/ ,/ 但/ 目前/ 形式化/ 方法/ 侧重/ 功能/ 正确性/ 建模/ 和/ 分析/ ,/ 对/ QoS/ 可/ 满足/ 性/ 的/ 建模/ 和/ 分析/ 支持/ 不足/ ./ 为此/ 提出/ 一种/ 时间/ 概率/ 代价/ 进程/ 代数/ TPPPA/ (/ TimedProbabilisticPricedProcessAlgebra/ )/ ,/ 给出/ 了/ TPPPA/ 的/ 语法/ 和/ 语义/ ,/ 并/ 证明/ 其/ 具有/ 功能/ 、/ 时间/ 、/ 概率/ 和/ 代价/ 的/ 统一/ 建模/ 和/ 分析/ 能力/ ./ 用/ 实例/ 表明/ 了/ TPPPA/ 可/ 有效/ 支持/ Web/ 服务/ 组合/ 功能/ 正确性/ 和/ QoS/ 可/ 满足/ 性/ 的/ 形式化/ 统一/ 建模/ 和/ 分析/ ./ 关键词/ Web/ 服务/ 组合/ ;/ QoS/ ;/ 进程/ 代数/ ;/ 建模/ ;/ 分析/ 1/ 引言/ 目前/ Web/ 服务/ 组合/ 的/ 建模/ 和/ 分析/ 一般/ 对/ 功能/ Page2/ 开发周期/ ./ 造成/ 这一/ 问题/ 的/ 原因/ 在于/ 目前/ 建模/ 验证/ 的/ 方法/ 工具/ 对/ Web/ 服务/ 组合/ 功能/ 和/ QoS/ 统一/ 建模/ 验证/ 的/ 支持/ 不足/ ,/ 因此/ ,/ 有/ 必要/ 对/ 现有/ 建模/ 验证/ 的/ 方法/ 工具/ 进行/ QoS/ 建模/ 扩展/ 以/ 支持/ Web/ 服务/ 组合/ 功能/ 和/ QoS/ 统一/ 建模/ 验证/ ./ 由于/ Web/ 服务/ 组合/ 的/ 主要/ 特征/ 在于/ 组合/ ,/ 同样/ 具有/ 组合/ 特征/ 的/ 进程/ 代数/ PAs/ (/ ProcessAlgebras/ )/ 成为/ 适合/ 建立/ Web/ 服务/ 组合/ 形式/ 模型/ 的/ 建模语言/ ./ PAs/ 是/ 一种/ 形式化/ 建模语言/ ,/ 具有/ 以/ 自然/ 的/ 方式/ 对/ 并发/ 和/ 组合/ 系统/ 建模/ 的/ 特征/ [/ 2/ ]/ ,/ 例如/ 提供/ 了/ 顺序/ 、/ 选择/ 、/ 并发/ 、/ 循环/ 等/ 丰富/ 的/ 组合/ 算子/ 和/ 进程/ 结构/ ,/ 可以/ 将/ 子系统/ 组合成/ 更大/ 的/ 系统/ ,/ 便于/ 进行/ 问题/ 分解/ 和/ 组合/ 层次/ 建模/ ;/ 可以/ 通过/ 隐藏/ 算子/ 将/ 系统/ 不/ 关心/ 的/ 活动/ 隐藏/ 为/ 内部/ 活动/ ,/ 便于/ 进行/ 问题/ 抽象/ 和/ 简化/ ;/ 基于/ 代数/ 方法/ ,/ 具有/ 简洁/ 的/ 语法/ 和/ 精确/ 的/ 语义/ ,/ 便于/ 进行/ 形式/ 描述/ 和/ 验证/ ;/ 提供/ 了/ 互/ 模拟/ 概念/ ,/ 便于/ 支持/ 等价/ 划分/ 和/ 问题/ 简化/ ./ 因而/ ,/ PAs/ 适合/ 作为/ Web/ 服务/ 组合/ 的/ 形式/ 理论/ 基础/ [/ 3/ -/ 4/ ]/ ./ 因此/ ,/ 近年来/ 有/ 不少/ 研究者/ 利用/ PAs/ 进行/ 服务/ 组合/ 的/ 研究/ ,/ 典型/ 的/ 有/ :/ Sala/ ü/ n/ 在/ 流程/ 执行/ 语言/ BPEL/ (/ BusinessProcessExcutionLanguage/ )/ 和/ 进程/ 代数/ CCS/ (/ CalculusofCommunicationSystem/ )/ 之间/ 建立/ 映射/ ,/ 从而/ 可以/ 借助/ CCS/ 的/ 建模/ 方法/ 和/ 工具/ 对/ BPEL/ 流程/ 程序/ 的/ 正确性/ 进行/ 验证/ [/ 5/ ]/ ./ Lucchi/ 给出/ 了/ 基于/ 进程/ 代数/ Pi/ -/ Culculus/ 的/ BPEL/ 的/ 形式/ 语义/ [/ 6/ ]/ ./ Abouzaid/ 在/ 进程/ 代数/ Pi/ -/ Culculus/ 的/ 基础/ 上/ 针对/ BPEL/ 流程/ 正确性/ 验证/ 问题/ 提出/ 了/ 一种/ 新/ 的/ 进程/ 代数/ BP/ -/ Culculus/ ,/ 用于/ BPEL/ 流程/ 的/ 建模/ 和/ 正确性/ 验证/ [/ 7/ ]/ ./ Yuan/ 使用/ Pi/ -/ Culculus/ 建模/ 多/ 业务流程/ ,/ 并/ 把/ 多/ 业务流程/ 可/ 看做/ 是/ 多个/ BPEL/ 流程/ 的/ 协作/ ,/ 从而/ 可以/ 使用/ Pi/ -/ Culculus/ 来/ 验证/ 复杂/ 的/ 多/ 业务流程/ 的/ 正确性/ 问题/ [/ 8/ ]/ ./ 然而/ ,/ 上述/ 利用/ PAs/ 的/ 研究/ 都/ 集中/ 在/ 服务/ 组合/ 的/ 功能/ 建模/ 和/ 验证/ 方面/ ,/ 忽视/ 了/ 服务/ 组合/ 的/ QoS/ 建模/ ,/ 原因/ 在于/ 已有/ PAs/ 对/ QoS/ 建模/ 的/ 支持/ 不足/ ./ 现有/ 的/ PAs/ 主要/ 有/ [/ 2/ ]/ :/ 经典/ 进程/ 代数/ CPAs/ (/ ClassicalProcessAlgebras/ )/ ,/ 包括/ CCS/ (/ CalculusofCommu/ -/ nicationSystem/ )/ ,/ CSP/ (/ CommunicatingSequentialProcesses/ )/ 和/ ACP/ (/ AlgebraofCommunicatingProcess/ )/ 以及/ 在/ CPAs/ 上/ 发展/ 起来/ 的/ 支持/ 移动/ 计算/ 建模/ 的/ Pi/ -/ Calculus/ ,/ 支持/ 实时/ 系统/ 建模/ 的/ 时间/ 进程/ 代数/ TPAs/ (/ TimedorTemporalProcessAlgebras/ )/ ,/ 支持/ 性能/ 建模/ 的/ 随机/ 进程/ 代数/ SPAs/ (/ StochasticProcessAlgebras/ )/ 等/ ./ 虽然/ TPAs/ 和/ SPAs/ 分别/ 可以/ 对/ 服务/ 组合/ 的/ 时间/ 和/ 性能/ 建模/ ,/ 但是/ 尚/ 不/ 支持/ 对/ 服务/ 组合/ 的/ 时间/ 优化/ 选择/ 和/ 性能/ 优化/ 选择/ ./ 另外/ ,/ 对于/ 代价/ 这一/ 重要/ 的/ QoS/ 属性/ ,/ 现有/ PAs/ 尚/ 不/ 支持/ 对/ 其/ 建模/ ./ 虽然/ Eberbach/ 面向/ Agent/ 领域/ 在/ Pi/ -/ Calculus/ 上/ 扩展/ 了/ 代价/ 信息/ 而/ 提出/ 了/ cost/ 演算/ ,/ 但/ 该/ cost/ 演算/ 是/ 专为/ Agent/ 定制/ 的/ ,/ 语法/ 复杂/ ,/ 没有/ 用于/ 且/ 不/ 适合/ 用于/ Web/ 服务/ 组合/ [/ 9/ ]/ ./ Web/ 服务/ 组合/ 的/ 建模/ 和/ 验证/ 不应/ 只/ 局限于/ 功能/ 上/ ,/ 而应/ 是/ 对/ 功能/ 和/ QoS/ 的/ 统一/ 建模/ (/ 为/ 叙述/ 简便/ ,/ 下文/ 把/ 功能/ 和/ QoS/ 统一/ 建模/ 简称/ 为/ 统一/ 建模/ 或/ 统一/ 模型/ )/ ./ 功能/ 和/ QoS/ 的/ 统一/ 建模/ 在/ 设计阶段/ 就/ 提前/ 进行/ 分析/ QoS/ 属性/ ,/ 识别/ 决定/ 系统/ QoS/ 指标/ 的/ 关键/ 活动/ ,/ 指导/ 系统/ 实现/ ,/ 从而/ 有助于/ 降低/ Web/ 服务/ 实现/ 风险/ ,/ 提高/ 系统/ 可信性/ ./ 因此/ ,/ 有/ 必要/ 研究/ 基于/ PAs/ 的/ Web/ 服务/ 组合/ 统一/ 建模/ 的/ 建模语言/ 和/ 分析方法/ ./ 为此/ ,/ 本文/ 在/ TPAs/ 基础/ 上/ 扩展/ 概率/ 和/ 代价/ 信息/ ,/ 提出/ 时间/ 概率/ 代价/ 进程/ 代数/ TPPPA/ (/ TimedProbabilisticPricedProcessAlgebra/ )/ ,/ 以/ 支持/ Web/ 服务/ 组合/ 的/ 功能/ 、/ 时间/ 、/ 概率/ 、/ 代价/ 的/ 统一/ 建模/ 和/ 分析/ ./ 本文/ 第/ 2/ 节/ 给出/ TPPPA/ 所/ 基于/ 的/ 进程/ 代数/ TCCS/ 的/ 介绍/ ;/ 第/ 3/ 节/ 提出/ TPPPA/ ,/ 阐述/ 其/ 语法/ 和/ 语义/ ,/ 证明/ 其/ 具有/ 功能/ 、/ 时间/ 、/ 概率/ 和/ 代价/ 统一/ 建模/ 能力/ ;/ 第/ 4/ 节/ 阐述/ 基于/ TPPPA/ 的/ Web/ 服务/ 组合/ 建模/ 和/ 分析方法/ ;/ 第/ 5/ 节/ 介绍/ 相关/ 研究/ ;/ 第/ 6/ 节是/ 结束语/ ./ 2TCCS/ 经典/ 的/ TPAs/ 包括/ [/ 2/ ]/ :/ 基于/ CCS/ 扩展/ 时间/ 的/ TCCS/ (/ TemporalCalculusofCommunicatingSys/ -/ tems/ )/ 和/ TimedCCS/ (/ TimedCalculusofCommuni/ -/ catingSystems/ )/ ,/ 基于/ CSP/ 扩展/ 时间/ 的/ TCSP/ (/ TimedCommunicatingSequentialProcesses/ )/ ,/ 基于/ ACP/ 扩展/ 时间/ 的/ PAT/ (/ ProcessAlgebrawithTiming/ )/ ./ 它们/ 的/ 共同之处/ 在于/ 把/ 时间/ 延时/ 也/ 看做/ 是/ 进程/ 的/ 动作/ ,/ 称为/ 时间/ 动作/ ./ 不同之处/ 在于/ :/ 一是/ 所/ 基于/ 的/ 经典/ 进程/ 代数/ 不同/ ;/ 二是/ 扩展/ 的/ 时间/ 不同/ ,/ TCCS/ 扩展/ 的/ 是/ 离散/ 时间/ ,/ 其它/ 扩展/ 的/ 是/ 连续/ 时间/ ./ 由于/ 扩展/ 离散/ 时间/ 的/ TCCS/ 概念/ 简洁/ ,/ 且/ 满足/ Web/ 服务/ 组合/ 建模/ 的/ 要求/ ,/ 因此/ 本文/ 选择/ TCCS/ 进行/ 扩展/ ./ 下面/ 对/ 本文/ 涉及/ 的/ TCCS/ 相关/ 背景/ 进行/ 介绍/ ,/ 关于/ TCCS/ 的/ 详细/ 介绍/ 可/ 参阅/ 文献/ [/ 10/ ]/ ./ 2.1/ TCCS/ 定义/ 进程/ 是/ TCCS/ 的/ 建模/ 实体/ ,/ 其/ 形式化/ 定义/ 如下/ ./ 定义/ 1/ ./ 一个/ TCCS/ 有限/ 状态/ 进程/ 是/ 一个/ 五/ Page3/ 元组/ TFSP/ =/ (/ S/ ,/ s0/ ,/ Σ/ ,/ Act/ ,/ / )/ ,/ 其中/ :/ S/ =/ {/ si/ |/ 0/ / i/ / S/ }/ 是非/ 空有/ 穷/ 状态/ 集/ ;/ s0/ 是/ 初始状态/ ;/ Σ/ 是/ 字母表/ ;/ Act/ =/ Λ/ ∪/ Γ/ 是/ 动作/ 集/ ,/ Λ/ =/ {/ }/ τ/ ∪/ A/ ∪/ A/ 是/ 功能/ 动作/ 集/ ,/ τ/ 是/ 进程/ 的/ 内部/ 动作/ ,/ 对外/ 不/ 可见/ ,/ A/ =/ {/ a/ |/ a/ ∈/ Σ/ }/ 是/ 接收/ 动作/ 集/ ,/ A/ =/ {/ a/ |/ a/ ∈/ Σ/ }/ 是/ 发送/ 动作/ 集/ ,/ Γ/ =/ {/ [/ t/ ]/ |/ t/ ∈/ / ∩/ t/ / Nmax/ ,/ / 是/ 正整数/ 域/ ,/ Nmax/ 是/ / 中/ 某个/ 正整数/ }/ 是/ 时间/ 动作/ 集/ ;/ / / S/ ×/ Act/ ×/ S/ 是/ 状态/ 转移/ 关系/ ./ 定义/ 2/ ./ TCCS/ 进程/ 表达式/ 可/ 由/ 如下/ BNF/ 范式/ 表示/ :/ E/ ·/ ·/ ·/ ·/ =/ 0/ |/ α/ / E/ |/ [/ t/ ]/ / E/ |/ E/ +/ E/ |/ E/ |/ E/ |/ E/ \/ L/ |/ AC/ ,/ 其中/ :/ 0/ 是/ 空/ 进程/ ;/ α/ / E/ 表示/ 前缀/ 顺序/ 功能/ 动作/ 执行/ ;/ [/ t/ ]/ / E/ 表示/ 前缀/ 顺序/ 时间/ 动作/ 执行/ ;/ E/ +/ E/ 表示/ 分支/ 选择/ ;/ E/ |/ E/ 表示/ 进程/ 并发/ 执行/ ;/ E/ \/ L/ 表示/ 在/ 进程/ 式/ E/ 中/ 把/ 动作/ 集合/ L/ 中/ 的/ 动作/ 对外/ 隐藏/ 起来/ ;/ AC/ 表示/ 常量/ 进程/ 式/ ./ 定义/ 3/ ./ TCCS/ 的/ BNF/ 范式/ 算子/ 的/ 结构化/ 操作/ 语义/ 定义/ 如下/ :/ Prefix/ :/ α/ / E/ →/ / / α/ E/ ;/ [/ t/ ]/ / E/ [/ t/ →/ / / ]/ E/ ./ Prefix/ 算子/ 语义/ 表明/ 动作/ 顺序/ 执行/ 的/ 情况/ ./ Choice/ :/ E1E1/ +/ E2Choice/ 算子/ 语义/ 表明/ 环境/ 在/ E1/ 和/ E2/ 之间/ 选择/ ./ Parallel/ :/ E1/ |/ E2Parallel/ 算子/ 语义/ 表明/ E1/ 和/ E2/ 异步/ 并发/ 执行/ ./ Cooperation/ :/ E1/ →/ / / α/ E1/ ,/ E2/ →/ / / α/ E2E1/ |/ E2/ →/ / / τ/ E1/ |/ E2Cooperation/ 算子/ 语义/ 表明/ E1/ 和/ E2/ 的/ 同步/ 并发/ 协作/ ./ Hiding/ :/ E/ \/ L/ →/ / / α/ E/ \/ LHiding/ 算子/ 语义/ 表明/ 动作/ 集合/ L/ 中/ 被/ 隐藏/ 的/ 动作/ 不/ 被/ 系统/ 外所见/ ./ Constant/ :/ E/ →/ / / α/ EAC/ →/ / / α/ EConstant/ 算子/ 语义/ 表明/ 表达式/ 中/ 的/ 常量/ AC/ 可以/ 用/ 其它/ 表达式/ 替代/ ./ 定义/ 4/ ./ TCCS/ 的/ 语义/ 定义/ 为/ 标记/ 迁移/ 系统/ LTS/ =/ (/ S/ ,/ s0/ ,/ Act/ ,/ {/ →/ / / α/ }/ )/ ,/ 其中/ :/ S/ 为/ 非空/ 有/ 穷/ 状态/ 集/ ;/ s0/ 为/ 初始状态/ ;/ α/ ∈/ Act/ 为/ 动作/ 集/ ;/ →/ / / α/ ∈/ S/ ×/ Act/ ×/ S/ 为/ 标记/ 迁移/ ./ 定义/ 5/ ./ 对称/ 二元关系/ / / S/ ×/ S/ 称为/ 弱互/ 模拟/ ,/ 如果/ 对/ 任意/ (/ s1/ ,/ s2/ )/ ∈/ / 蕴涵/ :/ 若/ s1/ →/ / / α/ s1/ ,/ 存在/ s2/ 使得/ s2/ =/ =/ / α/ ^/ s2/ ,/ 且/ (/ s1/ ,/ s2/ )/ ∈/ / ./ 其中/ :/ α/ ∈/ Act/ ,/ =/ =/ / α/ ^/ 为/ 包含/ 外部/ 动作/ α/ 和/ 零到/ 多个/ 内部/ 动作/ τ/ 的/ 动作/ 系列/ ./ 2.2/ 基于/ TCCS/ 的/ 分析/ 和/ 验证/ 由于/ TCCS/ 把/ 时间/ 延时/ 看作/ 是/ 时间/ 动作/ 并/ 纳入/ 到/ 动作/ 概念/ 中/ ,/ TCCS/ 的/ 动作/ 成为/ 一个/ 统一/ 概念/ :/ 包括/ 功能/ 动作/ 和/ 时间/ 动作/ ,/ 这/ 使得/ TCCS/ 与/ CCS/ 在/ 动作/ 概念/ 上/ 一致/ ,/ 因而/ TCCS/ 沿用/ 了/ CCS/ 的/ 分析方法/ ,/ 并/ 可/ 运用/ CCS/ 分析/ 验证/ 工具/ CWB/ -/ NC/ [/ 11/ ]/ 对/ 设计/ 模型/ 进行/ 经典/ 的/ 功能分析/ 和/ 验证/ ,/ 如/ :/ (/ 1/ )/ 安全检查/ ./ 可/ 运用/ 死锁/ 检测/ 命令/ 对/ 各个/ 子/ 服务/ 和/ 组合/ 服务/ 进行/ 死锁/ 检查和/ 活性/ 检查/ ./ (/ 2/ )/ 活动/ 观察/ ./ 可/ 运用/ 单步/ 命令/ 模拟/ 和/ 跟踪/ 进程/ 行为/ ,/ 观察/ 和/ 分析/ 进程/ 行为/ 是否/ 符合/ 预期/ ,/ 对/ 可能/ 存在/ 的/ 问题/ 进行/ 调试/ ./ (/ 3/ )/ 功能/ 验证/ ./ 可/ 运用/ 互/ 模拟/ 验证/ 命令/ 验证/ 设计/ 模型/ 与/ 需求/ 模型/ 是否/ 弱互/ 模拟/ ,/ 也/ 即/ 验证/ 设计/ 模型/ 在/ 外部/ 行为/ 上/ 是否/ 满足/ 需求/ ./ 如果/ 两者/ 不弱/ 互/ 模拟/ ,/ 则/ 可/ 继续/ 进行/ 上述/ 活动/ (/ 2/ )/ ,/ 对/ 存在/ 的/ 问题/ 进行/ 调试/ ,/ 不断/ 调整/ 设计/ ,/ 直至/ 通过/ 验证/ ./ 功能分析/ 和/ 验证/ 已有/ 相关/ 研究/ [/ 5/ -/ 8/ ,/ 11/ ]/ ,/ 在/ 此/ 不再/ 赘述/ ./ 3/ 时间/ 概率/ 代价/ 进程/ 代数/ TPPPA3/ ./ 1TPPPA/ 的/ 时间/ 、/ 概率/ 和/ 代价/ 扩展/ 包括/ TCCS/ 在内/ 的/ TPAs/ 主要/ 用于/ 实时/ 系统/ 超时/ (/ Timeout/ )/ 特性/ 的/ 建模/ ,/ 未/ 涉及/ 累积/ 时间/ 特性/ 的/ 建模/ 和/ 分析/ ,/ 不/ 支持/ 路径分析/ ,/ 未能/ 应用/ 于/ 服务/ 组合/ 的/ 建模/ 和/ 分析/ ./ 此外/ ,/ 缺乏/ 对/ 概率/ 和/ 代价/ 建模/ 和/ 分析/ 的/ 能力/ ./ 为/ 建立/ 支持/ 服务/ 组合/ 时间/ 、/ 概率/ 、/ 代价/ 统一/ 建模语言/ ,/ 需要/ 对/ TCCS/ 进行/ 相应/ 的/ 时间/ 、/ 概率/ 和/ 代价/ 扩展/ ./ 为此/ ,/ 需要/ 明确/ 两个/ 问题/ :/ 如何/ 进行/ 时间/ 、/ 概率/ 和/ 代价/ 的/ 扩展/ ;/ 时间/ 、/ 概率/ 、/ 代价/ 的/ 参数/ 从何/ 而/ Page4/ 来/ ./ 本文/ 提出/ 扩展/ 方法/ 如下/ ./ (/ 1/ )/ 时间/ 的/ 扩展/ 由于/ 进程/ 代数/ 是/ 描述/ 系统/ 行为/ 的/ 语言/ ,/ 对系统/ 行为/ 的/ 描述/ 主要/ 体现/ 在/ 动作/ 和/ 动作/ 引起/ 的/ 状态/ 迁移/ 上/ ,/ 因此/ 把/ 时间/ 信息/ 与/ 动作/ 联系/ 起来/ ./ TCCS/ 中有/ 两类/ 动作/ :/ 功能/ 动作/ 和/ 时间/ 动作/ ./ 功能/ 动作/ 表示/ 系统/ 为/ 实现/ 某个/ 功能/ 而/ 执行/ 的/ 动作/ ,/ 时间/ 动作/ 表示/ 系统/ 在/ 某/ 一/ 状态/ 上/ 停留/ 一段时间/ ./ 当对/ 服务/ 组合/ 建模/ 时/ ,/ 功能/ 动作/ 对应/ 消息/ 收发/ ./ 由于/ TCCS/ 是/ 同步/ 的/ ,/ 因此/ 假设/ 服务/ 之间/ 的/ 消息/ 通信/ 也/ 是/ 同步/ 的/ ./ 但/ 由于/ 实际/ 网络/ 中/ 服务/ 从/ 发送/ 消息/ 到/ 收到/ 应答/ 消息/ 之间/ 会/ 有/ 时间/ 间隔/ ,/ 为此/ ,/ 规定/ TP/ -/ PPA/ 中/ 代表/ 消息/ 收发/ 的/ 功能/ 动作/ 都/ 将/ 持续/ 相同/ 的/ 时间/ ,/ 从而/ 缩小/ 了/ 与/ 实际/ 情况/ 的/ 差距/ ./ 持续时间/ 参数/ 的/ 设定/ ,/ 应当/ 尽量/ 与/ 实际/ 网络/ 情况/ 相符/ ./ 本文/ 着重/ 说明/ 运用/ TPPPA/ 建模/ 分析/ 的/ 原理/ ,/ 对/ 持续时间/ 参数/ 的/ 设定/ 做/ 了/ 简化/ 处理/ ,/ 假设/ 为/ 一个/ 时间/ 步/ ,/ 比如/ 1s/ ./ 时间/ 动作/ 对应/ Web/ 服务/ 组件/ 交互/ 期间/ 在/ 某种/ 状态/ 下/ 的/ 延时/ 行为/ ,/ 这里/ 所指/ 的/ 状态/ 指/ 的/ 是/ 与/ 代价/ 相/ 联系/ 的/ 状态/ ,/ 比如/ 收费/ 语音/ Web/ 服务/ 在/ 连接/ 建立/ 之后/ 、/ 持续/ 通话/ 期间/ 的/ 状态/ ,/ 在/ 这种/ 状态/ 下/ ,/ 收取/ 的/ 费用/ 是/ 按/ 某个/ 费率/ 与/ 延续/ 时间/ 长短/ 成正比/ 的/ ./ 对于/ 延时/ 行为/ ,/ 扩展/ 的/ 时间/ 属性/ 值取/ 实际/ 的/ 延时/ 时间/ 的/ 离散/ 值/ ./ 取/ 离散/ 值/ 的/ 原因/ 为/ :/ 一是/ 符合/ 大多数/ 收费/ Web/ 服务/ 的/ 计时/ 情况/ ,/ 大多数/ 收费/ Web/ 服务/ 的/ 计时/ 是/ 离散/ 值/ ,/ 比如/ 收费/ 语音/ Web/ 服务/ 的/ 计时/ 最小/ 单位/ 是/ 秒/ ,/ 不会/ 出现/ 小于/ 1s/ 的/ 小数/ ;/ 二是/ 与/ TCCS/ 的/ 时间/ 动作/ 的/ 离散/ 时间/ 域/ 相对/ 应/ ./ 因此/ ,/ 时间/ 动作/ 都/ 扩展/ 一个/ 时间/ 属性/ ,/ 其值/ 的/ 获取/ 一般/ 可/ 采取/ 3/ 种/ 方法/ :/ ①/ 可/ 依据/ Web/ 服务提供者/ 的/ 历史/ 日志/ 数据/ 来/ 估计/ ;/ ②/ Web/ 服务/ 消费者/ 的/ 测量/ 数量/ 来/ 估计/ ;/ ③/ 建模/ 者/ 根据/ 对/ Web/ 服务/ 的/ 经验/ 来/ 估计/ ./ (/ 2/ )/ 概率/ 的/ 扩展/ 由于/ 进程/ 代数/ 是/ 描述/ 系统/ 行为/ 的/ 语言/ ,/ 对系统/ 行为/ 的/ 描述/ 主要/ 体现/ 在/ 动作/ 和/ 动作/ 引起/ 的/ 状态/ 迁移/ 上/ ,/ 进程/ 代数/ 中/ 的/ 不确定性/ 是/ 通过/ 动作/ 引发/ 的/ 不/ 确定/ 迁移/ 来/ 描述/ 的/ ,/ 因此/ 把/ 概率/ 信息/ 与/ 动作/ 引发/ 的/ 不/ 确定/ 迁移/ 联系/ 起来/ ,/ 从而/ 使得/ 动作/ 引发/ 的/ 迁移/ 遵循/ 一定/ 的/ 概率/ ./ 由于/ 目前/ 主流/ 的/ Web/ 服务/ 组合/ 执行/ 语言/ ,/ 如/ WS/ -/ BPEL/ 等/ ,/ 其/ 概率/ 信息/ 体现/ 在/ 选择/ 结构/ 向/ 不同/ 分支/ 迁移/ 上/ ,/ 而/ 向/ 不同/ 分支/ 迁移/ 的/ 概率/ 往往/ 取决于/ 具体/ 参与/ 选择/ 的/ Web/ 服务/ ,/ 因此/ 需要/ 针对/ 具体/ 流程/ 来/ 分析/ 不同/ 分支/ 迁移/ 的/ 概率/ ./ 一般而言/ ,/ 概率/ 参数/ 的/ 获取/ 与/ 时间/ 参数/ 的/ 获取/ 类似/ ,/ 一是/ 可/ 依据/ Web/ 服务提供者/ 的/ 历史/ 日志/ 数据/ 来/ 估计/ 向/ 不同/ 分支/ 迁移/ 的/ 概率/ ./ 二是/ 根据/ 建模/ 者/ 对/ Web/ 服务/ 的/ 经验/ 来/ 估计/ 向/ 不同/ 分支/ 迁移/ 的/ 概率/ ./ (/ 3/ )/ 代价/ 的/ 扩展/ 首先/ 说明/ ,/ 本文/ 中/ 代价/ 是/ 一个/ 抽象/ 的/ 概念/ ,/ 泛指/ 对/ 资源/ 的/ 消费/ ./ 本文/ 中/ 资源/ 也/ 是/ 一个/ 抽象/ 的/ 概念/ ,/ 泛指/ 软件/ 在/ 完成/ 任务/ 的/ 过程/ 中/ 消费/ 的/ 各种/ 资源/ ,/ 包括/ 但/ 不/ 限于/ 处理器/ 时间/ 、/ 内存/ 、/ 外存/ 、/ 功耗/ 、/ 带宽/ 等/ ./ 当/ 把/ TPPPA/ 应用/ 于/ 具体/ 系统/ 时/ ,/ 需要/ 把/ 抽象/ 的/ 资源/ 和/ 代价/ 映射/ 到/ 具体/ 的/ 资源/ 和/ 代价/ ./ 本文/ 为/ TPPPA/ 的/ 动作/ 赋予/ 价格/ (/ price/ )/ ,/ 表示/ 动作/ 的/ 执行/ 是/ 有/ 代价/ 的/ ,/ 代价/ 在/ 数值/ 上/ 等于/ 动作/ 联系/ 的/ 价格/ ./ 由于/ 进程/ 代数/ 的/ 动作/ 执行/ 会/ 引起/ 状态/ 的/ 变迁/ ,/ 为/ TPPPA/ 的/ 状态/ 赋予/ 成本/ (/ cost/ )/ ,/ 其值/ 为/ 系统/ 从/ 初始状态/ 出发/ ,/ 经过/ 一系列/ 动作/ 的/ 执行/ 到达/ 该/ 状态/ 时/ ,/ 这/ 一系列/ 动作/ 的/ 价格/ 之/ 和/ ./ 本文/ 后面/ 对/ 两者/ 不/ 作/ 严格/ 区分/ 时/ ,/ 将/ 两者/ 通称/ 为/ 代价/ ./ 当对/ 服务/ 组合/ 建模/ 时/ ,/ TPPPA/ 的/ 功能/ 动作/ 对应/ 服务/ 组件/ 的/ 消息/ 收发/ ,/ 假设/ 消耗/ 的/ 是/ 带宽/ 资源/ ./ 本文/ 为/ 着重/ 说明/ TPPPA/ 的/ QoS/ 建模/ 原理/ 和/ 方法/ ,/ 对模型/ 做/ 适当/ 简化/ ,/ 假设/ 不/ 考虑/ 消息/ 的/ 大小/ 和/ 通道/ 的/ 种类/ 等/ ,/ 收发/ 一个/ 消息/ 所/ 占用/ 的/ 带宽/ 资源/ 的/ 价格/ 都/ 是/ 1/ ./ TPPPA/ 的/ 时间/ 动作/ 对应/ Web/ 服务/ 组件/ 交互/ 期间/ 在/ 某种/ 状态/ 下/ 的/ 延时/ 行为/ ,/ 假设/ 消耗/ 的/ 是/ 计算资源/ ./ 计算资源/ 的/ 价格/ 假设/ 以该/ 服务/ 组件/ 的/ 单位/ 时间/ 使用/ 费用/ 表示/ ,/ 可取/ 为/ 该/ 服务/ 组件/ 在/ UDDI/ // WSDL/ 上/ 声明/ 的/ 价格/ ./ 当/ 提供/ 持续/ 服务/ 时/ ,/ 将/ 产生/ 计时/ 服务/ 代价/ ./ 根据上述/ 扩展/ 方法/ ,/ 下面/ 给出/ TPPPA/ 的/ 相关/ 定义/ 和/ 定理/ ./ 3.2/ TPPPA/ 的/ 定义/ 和/ 定理/ 定义/ 6/ ./ 一个/ TPPPA/ 时间/ 概率/ 代价/ 有限/ 状态/ 进程/ 是/ 一个/ 八元/ 组/ TPPFSP/ =/ (/ S/ ,/ s0/ ,/ Σ/ ,/ Act/ ,/ / ,/ f/ ,/ g/ ,/ h/ )/ ,/ 其中/ :/ S/ =/ si/ |/ 0/ / i/ / {/ 集/ ;/ s0/ 是/ 初始状态/ ;/ Σ/ 是/ 字母表/ ;/ Act/ =/ Λ/ ∪/ Γ/ 是/ 动作/ 集/ ,/ 其中/ :/ Λ/ =/ {/ }/ τ/ ∪/ A/ ∪/ A/ 是/ 功能/ 动作/ 集/ ,/ τ/ 是/ 进程/ 的/ 内部/ 动作/ ,/ 对外/ 不/ 可见/ ,/ A/ =/ {/ a/ |/ a/ ∈/ Σ/ }/ 是/ 接收/ 动作/ 集/ ,/ A/ =/ a/ |/ a/ ∈/ {/ }/ Σ/ 是/ 发送/ 动作/ 集/ ,/ Γ/ =/ {/ [/ t/ ]/ |/ t/ ∈/ / ∩/ t/ / Nmax/ ,/ / 是/ 正整数/ 域/ ,/ Nmax/ 是/ / 中/ 某个/ 正整数/ }/ 是/ 时间/ 动作/ 集/ ;/ / / S/ ×/ Act/ ×/ S/ 是/ 状态/ 迁移/ 关系/ ;/ f/ :/ / →/ R/ +/ 是/ 迁移/ 概率函数/ ;/ g/ :/ Λ/ →/ R/ +/ 是/ 功能/ 动作/ 价格/ 函数/ ;/ h/ :/ Γ/ →/ R/ +/ 是/ 时间/ 动作/ 价格/ 函数/ ./ Page5E/ |/ E/ \/ L/ |/ AC/ ,/ 从/ 定义/ 6/ 可以/ 看出/ ,/ TPPFSP/ 在/ TFSP/ 基础/ 上/ 扩展/ 了/ 迁移/ 概率函数/ f/ ,/ 功能/ 动作/ 价格/ 函数/ g/ 和/ 时间/ 动作/ 价格/ 函数/ h/ ./ 定义/ 7/ ./ TPPPA/ 进程/ 表达式/ 由/ 如下/ BNF/ 范式/ 表示/ :/ E/ ·/ ·/ ·/ ·/ =/ 0/ |/ (/ α/ ,/ g/ (/ α/ )/ )/ / E/ |/ (/ [/ t/ ]/ ,/ h/ (/ [/ t/ ]/ )/ )/ / E/ |/ Σ/ i/ ∈/ I/ ω/ iEi/ |/ E/ |/ 其中/ :/ 0/ 是/ 空/ 进程/ ;/ (/ α/ ,/ g/ (/ α/ )/ )/ / E/ 表示/ 前缀/ 顺序/ 动作/ 执行/ ,/ 其中/ (/ α/ ,/ g/ (/ α/ )/ )/ 为/ 功能/ 价格/ 动作/ ;/ (/ [/ t/ ]/ ,/ h/ (/ [/ t/ ]/ )/ )/ / E/ 表示/ 前缀/ 顺序/ 动作/ 执行/ ,/ 其中/ (/ [/ t/ ]/ ,/ h/ (/ [/ t/ ]/ )/ )/ 为/ 时间/ 价格/ 动作/ ;/ Σ/ i/ ∈/ I/ ω/ iEi/ 为/ 分支/ 迁移/ 的/ 概率/ 选择/ ,/ 其中/ :/ 设有/ 分支/ 迁移/ E/ α/ →/ / / iEi/ ,/ 则/ ω/ i/ =/ f/ (/ E/ α/ →/ / / iEi/ )/ 为/ 分支/ 迁移/ 概率/ ,/ 且/ 满足/ Σ/ i/ ∈/ I/ ω/ i/ =/ 1/ ;/ E/ |/ E/ 表示/ 进程/ 并发/ 执行/ ;/ E/ \/ L/ 表示/ 在/ 进程/ 式/ E/ 中/ 把/ 动作/ 集合/ L/ 中/ 的/ 动作/ 对外/ 隐藏/ 起来/ ;/ AC/ 表示/ 常量/ 进程/ 式/ ./ 定义/ 8/ ./ TPPPA/ 的/ 时间/ 概率/ 代价/ 动作/ 是/ 一个/ 五元/ 组/ α/ c/ =/ (/ α/ ,/ t/ ,/ f/ (/ →/ / / α/ )/ ,/ g/ (/ α/ )/ ,/ h/ (/ α/ )/ )/ ,/ 其中/ :/ α/ ∈/ Act/ ;/ t/ ∈/ Γ/ ,/ f/ (/ →/ / / α/ )/ 是/ 动作/ 迁移/ 概率/ ;/ g/ (/ α/ )/ 是/ 动作/ 功能/ 价格/ ;/ h/ (/ α/ )/ 是/ 动作/ 计时/ 价格/ ./ 特别/ 地/ :/ 对于/ 功能/ 动作/ ,/ 因为/ 假设/ 是/ 同步/ 通信/ 且/ 所/ 需/ 时间/ 为/ 一个/ 时间/ 步/ ,/ 有/ α/ c/ =/ (/ a/ ,/ 1/ ,/ f/ (/ →/ / / a/ )/ ,/ g/ (/ a/ )/ ,/ 0/ )/ ,/ a/ ∈/ Λ/ ;/ 对于/ 时间/ 动作/ ,/ 有/ α/ c/ =/ (/ [/ t/ ]/ ,/ t/ ,/ f/ (/ [/ t/ →/ / / ]/ )/ ,/ 0/ ,/ h/ (/ [/ t/ ]/ )/ )/ ,/ [/ t/ ]/ ∈/ Γ/ ./ 定义/ 9/ ./ TPPPA/ 的/ 时间/ 概率/ 代价/ 状态/ 是/ 一个/ 五元/ 组/ sc/ =/ (/ s/ ,/ ct/ ,/ cr/ ,/ cg/ ,/ ch/ )/ ,/ 其中/ :/ s/ ∈/ S/ ;/ ct/ 是从/ 初始状态/ 到达/ s/ 的/ 累积/ 时间/ ;/ cr/ 是从/ 初始状态/ 到达/ s/ 的/ 累积/ 概率/ ;/ cg/ 是从/ 初始状态/ 到达/ s/ 的/ 累积/ 功能/ 成本/ ;/ ch/ 是从/ 初始状态/ 到达/ s/ 的/ 累积/ 计时/ 成本/ ./ 定义/ 10/ ./ TPPPA/ 的/ 语义/ 定义/ 为/ 时间/ 概率/ 代价/ 迁移/ 系统/ TPPLS/ =/ (/ SC/ ,/ sc0/ ,/ Act/ ,/ {/ α/ →/ / / c/ }/ )/ ,/ 其中/ :/ SC/ =/ {/ sc/ |/ sc/ ∈/ SC/ }/ 为/ 时间/ 概率/ 代价/ 状态/ 集/ ;/ sc0/ =/ (/ s0/ ,/ 0/ ,/ 1/ ,/ 0/ ,/ 0/ )/ 为/ 初始/ 时间/ 概率/ 代价/ 状态/ ;/ α/ ∈/ Act/ ;/ α/ →/ / / c/ ∈/ SC/ ×/ Act/ ×/ R/ +/ ×/ [/ 0/ ,/ 1/ ]/ ×/ R/ +/ ×/ R/ +/ ×/ SC/ 为/ 时间/ 概率/ 代价/ 迁移/ 关系/ ,/ 其中/ α/ c/ =/ (/ α/ ,/ t/ ,/ f/ (/ →/ / / α/ )/ ,/ g/ (/ α/ )/ ,/ h/ (/ α/ )/ )/ ./ 经典/ 进程/ 代数/ 的/ 引导/ 图/ DG/ (/ DerivationGraph/ )/ 描述/ 了/ 进程/ 所有/ 可能/ 的/ 行为/ 演化/ ,/ 在/ DG/ 的/ 基础/ 上/ ,/ 提出/ 时间/ 概率/ 代价/ 引导/ 图/ TPPDG/ (/ TimedProbabi/ -/ listicPricedDerivationGraph/ )/ 的/ 概念/ ,/ 用于/ 描述/ TPPFSP/ 的/ 行为/ 演化/ ./ 定义/ 11/ ./ 任一/ TPPFSP/ 的/ 时间/ 概率/ 代价/ 引导/ 图/ TPPDG/ 对/ 应该/ TPPFSP/ 的/ 时间/ 概率/ 代价/ 迁移/ 系统/ TPPLS/ =/ (/ SC/ ,/ sc0/ ,/ Act/ ,/ {/ α/ →/ / / c/ }/ )/ ,/ 其中/ 的/ 节点/ 为/ 时间/ 概率/ 代价/ 状态/ ,/ 其中/ 的/ 边/ 为/ 动作/ 引发/ 的/ 时间/ 概率/ 代价/ 迁移/ ./ 定义/ 12/ ./ 路径/ 时间/ 是/ 指/ TPPDG/ 中该/ 路径/ 所有/ 边/ 的/ 时间/ 之/ 和/ ./ 定义/ 13/ ./ 路径/ 概率/ 是/ 指/ TPPDG/ 中该/ 路径/ 所有/ 边/ 的/ 概率/ 之积/ ./ 定义/ 14/ ./ 路径/ 成本/ 是/ 指/ TPPDG/ 中该/ 路径/ 所有/ 边/ 的/ 代价/ 之/ 和/ ./ 图/ 1/ 给出/ 了/ 一个/ 时间/ 概率/ 代价/ 迁移/ 系统/ 对应/ 的/ 时间/ 概率/ 代价/ 迁移/ 图/ TPPDG/ (/ TimedProbabilisticPricedDerivationGraph/ )/ ,/ 以此/ 为/ 例来/ 说明/ TPPPA/ 语义/ ./ 图/ 1/ 中/ ,/ sc0/ (/ s0/ ,/ 0/ ,/ 1/ ,/ 0/ ,/ 0/ )/ 为/ 初始/ 节点/ ,/ 从/ sc0/ 出发/ 有/ 3/ 条/ 路径/ 可/ 到达/ sci/ (/ si/ ,/ cti/ ,/ cri/ ,/ cgi/ ,/ chi/ )/ ,/ 分别/ 为/ σ/ 1/ =/ sc0/ α/ c1sc1/ …/ sci/ -/ 1/ α/ ci/ -/ 1sci/ ,/ σ/ 2/ =/ sc0/ α/ c2sc2/ …/ sci/ -/ 2/ α/ ci/ -/ 2sci/ ,/ σ/ 3/ =/ sc0/ α/ c3sc3/ …/ sci/ -/ 3/ α/ ci/ -/ 3sci/ ,/ 其中/ sck/ =/ (/ sk/ ,/ ctk/ ,/ crk/ ,/ cgk/ ,/ chk/ )/ ,/ α/ ck/ =/ (/ α/ k/ ,/ tk/ ,/ f/ (/ α/ k/ )/ ,/ g/ (/ α/ k/ )/ ,/ h/ (/ α/ k/ )/ )/ ,/ k/ =/ 1/ ,/ 2/ ,/ …/ ,/ i/ -/ 1/ ./ 则/ 它们/ 的/ 路径/ 时间/ 分别/ 为/ T/ (/ σ/ 1/ )/ =/ t1/ +/ …/ +/ ti/ -/ 1/ ,/ T/ (/ σ/ 2/ )/ =/ t2/ +/ …/ +/ ti/ -/ 2/ ,/ T/ (/ σ/ 2/ )/ =/ t3/ +/ …/ +/ ti/ -/ 3/ ./ 它们/ 的/ 路径/ 概率/ 分别/ 为/ P/ (/ σ/ 1/ )/ =/ f/ (/ α/ 1/ )/ ×/ …/ ×/ f/ (/ α/ i/ -/ 1/ )/ ,/ P/ (/ σ/ 2/ )/ =/ f/ (/ α/ 2/ )/ ×/ …/ ×/ f/ (/ α/ i/ -/ 2/ )/ ,/ P/ (/ σ/ 3/ )/ =/ f/ (/ α/ 3/ )/ ×/ …/ ×/ f/ (/ α/ i/ -/ 3/ )/ ./ 它们/ 的/ 路径/ 功能/ 成本/ 分别/ 为/ Cg/ (/ σ/ 1/ )/ =/ g/ (/ α/ 1/ )/ +/ …/ +/ g/ (/ α/ i/ -/ 1/ )/ ,/ Cg/ (/ σ/ 2/ )/ =/ g/ (/ α/ 2/ )/ +/ …/ +/ g/ (/ α/ i/ -/ 2/ )/ ,/ Cg/ (/ σ/ 3/ )/ =/ g/ (/ α/ 3/ )/ +/ …/ +/ g/ (/ α/ i/ -/ 3/ )/ ./ 它们/ 的/ 路径/ 计时/ 成本/ 分别/ 为/ Ch/ (/ σ/ 1/ )/ =/ h/ (/ α/ 1/ )/ +/ …/ +/ h/ (/ α/ i/ -/ 1/ )/ ,/ Ch/ (/ σ/ 2/ )/ =/ h/ (/ α/ 2/ )/ +/ …/ +/ h/ (/ α/ i/ -/ 2/ )/ ,/ Ch/ (/ σ/ 3/ )/ =/ h/ (/ α/ 3/ )/ +/ …/ +/ h/ (/ α/ i/ -/ 3/ )/ ./ 状态/ 节点/ sci/ 的/ 概率/ cri/ 为/ 从/ 初始状态/ 节点/ 出发/ 到达/ sci/ 的/ 所有/ 可能性/ ,/ 其值/ 为/ 到达/ sci/ 的/ 所有/ 路径/ 概率/ 之/ 和/ ,/ 也/ 即/ cri/ =/ ∑/ 3/ 积/ 时间/ cti/ 不是/ 路径/ σ/ 1/ ,/ σ/ 2/ ,/ σ/ 3/ 的/ 时间/ 之/ 和/ ,/ 而是/ 单条/ 路径/ 的/ 时间/ ./ 通过/ 不同/ 路径/ 到达/ sci/ 的/ 时间/ 各不相同/ ,/ 应用/ 中/ 实际/ 关注/ 的/ 往往/ 是/ 最小/ 路径/ 时间/ ,/ 即/ 关注/ 满足/ cti/ =/ min/ (/ T/ (/ σ/ 1/ )/ ,/ T/ (/ σ/ 2/ )/ ,/ T/ (/ σ/ 3/ )/ )/ 的/ 路径/ 及其/ 时间/ ./ 同理/ ,/ 关注/ 满足/ cgi/ =/ min/ (/ cg/ (/ σ/ 1/ )/ ,/ cg/ (/ σ/ 2/ )/ ,/ cg/ (/ σ/ 3/ )/ )/ 和/ 满足/ chi/ =/ min/ (/ ch/ (/ σ/ 1/ )/ ,/ ch/ (/ σ/ 2/ )/ ,/ ch/ (/ σ/ 3/ )/ )/ 的/ 路径/ 及其/ 成本/ ./ Page6/ 以下/ 为/ TPPPA/ 的/ BNF/ 范式/ 算子/ 的/ 结构化/ 操作/ 语义/ ,/ 每个/ TPPPA/ 算子/ 的/ 语义/ 都/ 由/ 5/ 部分/ 组成/ :/ ①/ 动作/ 执行/ 的/ 经典/ 结构化/ 操作/ 语义/ [/ 2/ ]/ ,/ 这部分/ 与/ 经典/ 进程/ 代数/ 的/ 语义/ 保持一致/ ;/ ②/ 动作/ 执行/ 的/ 时间/ 语义/ ;/ ③/ 动作/ 执行/ 的/ 概率/ 语义/ ;/ ④/ 动作/ 执行/ 的/ 功能/ 代价/ 语义/ ;/ ⑤/ 动作/ 执行/ 的/ 计时/ 代价/ 语义/ ./ 为/ 表示/ 方便/ ,/ 令/ sb/ 、/ se/ 分别/ 表示/ 算子/ 执行/ 前/ 、/ 后/ 的/ 状态/ ;/ 令/ ct/ _/ b/ 、/ cr/ _/ b/ 、/ cg/ _/ b/ 、/ ch/ _/ b/ 分别/ 表示/ 算子/ 执行/ 前/ 状态/ 的/ 最小/ 累积/ 时间/ 、/ 累积/ 概率/ 、/ 最小/ 累积/ 功能/ 成本/ 、/ 最小/ 累积/ 计时/ 成本/ ,/ 令/ ct/ _/ e/ 、/ cr/ _/ e/ 、/ cg/ _/ e/ 、/ ch/ _/ e/ 分别/ 表示/ 算子/ 执行/ 后/ 状态/ 的/ 最小/ 累积/ 时间/ 、/ 累积/ 概率/ 、/ 最小/ 累积/ 功能/ 成本/ 、/ 最小/ 累积/ 计时/ 成本/ ./ 定义/ 15/ ./ TPPPA/ 的/ 算子/ 结构化/ 操作/ 语义/ 如下/ :/ Prefix/ :/ ①/ (/ α/ ,/ t/ ,/ f/ (/ →/ / / α/ )/ ,/ g/ (/ α/ )/ ,/ h/ (/ α/ )/ )/ / E/ (/ α/ ,/ t/ ,/ f/ (/ →/ / / α/ )/ ,/ g/ (/ α/ )/ ,/ h/ (/ α/ →/ α/ ∈/ Act/ ./ ②/ ct/ _/ e/ =/ min/ (/ ct/ _/ b/ +/ t/ ,/ ct/ _/ e/ )/ ./ ③/ cr/ _/ e/ =/ cr/ _/ b/ ×/ f/ (/ →/ / / α/ )/ ./ ④/ cg/ _/ e/ =/ min/ (/ cg/ _/ b/ +/ g/ (/ α/ )/ ,/ cg/ _/ e/ )/ ./ ⑤/ ch/ _/ e/ =/ min/ (/ ch/ _/ b/ +/ h/ (/ α/ )/ ,/ ch/ _/ e/ )/ ./ Prefix/ 算子/ 语义/ 表明/ :/ ①/ 顺序/ 动作/ 算子/ 表示/ 的/ 动作/ 可以/ 无条件/ 执行/ ,/ 动作/ 的/ 执行/ 联系/ 了/ 时间/ 、/ 概率/ 、/ 功能/ 成本/ 、/ 计时/ 成本/ ;/ ②/ 遵循/ 最小/ 累积/ 时间/ 语义/ ;/ ③/ 动作/ α/ 执行/ 后/ 的/ 状态/ 概率/ 为/ 执行/ 前/ 的/ 状态/ 概率/ 与/ α/ 分支/ 迁移/ 概率/ 之/ 乘积/ ;/ ④/ 遵循/ 最小/ 累积/ 功能/ 代价/ 语义/ ;/ ⑤/ 遵循/ 最小/ 累积/ 计时/ 代价/ 语义/ ./ Choice/ :/ ①/ E1/ 满足/ :/ α/ 1/ ,/ α/ 2/ ∈/ Act/ 且/ f/ (/ α/ →/ / / 1/ )/ +/ f/ (/ α/ →/ / / 2/ )/ =/ 1/ ./ ②/ ct/ _/ e/ =/ min/ (/ ct/ _/ b/ +/ t1/ ,/ ct/ _/ e/ )/ ./ ③/ cr/ _/ e/ =/ cr/ _/ e/ +/ cr/ _/ b/ ×/ f/ (/ α/ →/ / / 1/ )/ ./ ④/ cg/ _/ e/ =/ min/ (/ cg/ _/ b/ +/ g/ (/ α/ 1/ )/ ,/ cg/ _/ e/ )/ ./ ⑤/ ch/ _/ e/ =/ min/ (/ ch/ _/ b/ +/ h/ (/ α/ 1/ )/ ,/ ch/ _/ e/ )/ ./ Choice/ 算子/ 语义/ 表明/ :/ ①/ 为/ 系统/ 环境/ 对/ E1/ +/ E2/ 的/ 概率/ 选择/ ./ E1/ +/ E2/ 选择/ 执行/ α/ 1/ 演化/ 为/ E1/ 的/ 概率/ 为/ f/ (/ α/ →/ / / 1/ )/ ,/ E1/ +/ E2/ 选择/ 执行/ α/ 2/ 演化/ 为/ E2/ 的/ 概率/ 为/ f/ (/ α/ →/ / / 2/ )/ ,/ 且/ 满足/ f/ (/ α/ →/ / / 1/ )/ +/ f/ (/ α/ →/ / / 2/ )/ =/ 1/ ./ 该/ 语义/ 表明/ 存在/ 分支/ 结构/ 时/ ,/ 向/ 全部/ 分支/ 迁移/ 的/ 概率/ 之/ 和/ 为/ 1/ ,/ 可/ 推广/ 至/ 任意/ 多重/ 分支/ 结构/ ;/ ②/ 、/ ③/ 、/ ④/ 、/ ⑤/ 分别/ 为/ E1/ +/ E2/ 选择/ 执行/ α/ 1/ 演化/ 为/ E1/ 时/ 的/ 最小/ 累积/ 时间/ 、/ 累积/ 概率/ 、/ 最小/ 累积/ 功能/ 成本/ 、/ 最小/ 累积/ 计时/ 成本/ ./ 限于/ 篇幅/ ,/ 在/ 此/ 省略/ E1/ +/ E2/ 选择/ 执行/ α/ 2/ 演化/ 为/ E2/ 的/ 对称/ 迁移/ 语义/ ./ Parallel/ :/ ①/ E1/ ②/ ct/ _/ e/ =/ min/ (/ ct/ _/ b/ +/ t1/ ,/ ct/ _/ e/ )/ ./ ③/ cr/ _/ e/ =/ cr/ _/ e/ +/ cr/ _/ b/ ×/ f/ (/ α/ →/ / / 1/ )/ ./ ④/ cg/ _/ e/ =/ min/ (/ cg/ _/ b/ +/ g/ (/ α/ 1/ )/ ,/ cg/ _/ e/ )/ ./ ⑤/ ch/ _/ e/ =/ min/ (/ ch/ _/ b/ +/ h/ (/ α/ 1/ )/ ,/ ch/ _/ e/ )/ ./ Parallel/ 算子/ 语义/ 表明/ :/ E1/ |/ E2/ 异步/ 并发/ 执行/ ,/ 异步/ 并发/ 中/ 如果/ 执行/ 了/ 动作/ α/ 1/ ,/ 则/ 演化/ 为/ E1/ |/ E2/ 异步/ 并发/ 执行/ ,/ 动作/ 执行/ 保持/ 最小/ 累积/ 时间/ 、/ 累积/ 概率/ 、/ 最小/ 累积/ 功能/ 成本/ 、/ 最小/ 累积/ 计时/ 成本/ 语义/ ./ Cooperation/ :/ ①/ (/ α/ ,/ 1/ ,/ f/ (/ →/ / / α/ )/ ,/ g/ (/ α/ )/ ,/ 0/ →/ / / / / / / / / / )/ E1/ ,/ E2E1/ |/ E2/ α/ ,/ α/ ∈/ Λ/ ./ E1/ ②/ ct/ _/ e/ =/ ct/ _/ b/ +/ 1/ ./ ③/ cr/ _/ e/ =/ cr/ _/ e/ +/ cr/ _/ b/ ×/ f/ (/ →/ / / α/ )/ ×/ f/ (/ →/ / / α/ )/ ./ ④/ cg/ _/ e/ =/ min/ (/ cg/ _/ b/ +/ g/ (/ α/ )/ +/ g/ (/ α/ )/ ,/ cg/ _/ e/ )/ ./ ⑤/ ch/ _/ e/ =/ ch/ _/ b/ ./ Cooperation/ 算子/ 语义/ 表明/ :/ ①/ 是/ E1/ 和/ E2/ 的/ 同步/ 并发/ 协作/ ,/ 并发/ 协作/ 是/ 功能/ 动作/ 之间/ 的/ 协作/ ,/ 协作/ 动作/ 可以/ 抽象/ 为/ 内部/ 动作/ α/ 1/ |/ α/ 2/ →/ τ/ ;/ ②/ 因为/ 是/ 功能/ 动作/ ,/ 同步/ 所/ 耗时间/ 为/ 1/ ;/ ③/ 是/ 协作/ 概率/ 为/ 参加/ 协作/ 的/ 动作/ 各自/ 概率/ 之积/ ;/ ④/ 表示/ 协作/ 的/ 功能/ 成本/ 为/ 参加/ 协作/ 的/ 动作/ 各自/ 价格/ 之/ 和/ ,/ 且/ 遵循/ 最小/ 累积/ 功能/ 代价/ 语义/ ;/ ⑤/ 由于/ 动作/ 协作/ 在/ 功能/ 动作/ 之间/ 进行/ ,/ 无/ 计时/ 成本/ ,/ 动作/ 协作/ 前后/ 状态/ 的/ 累积/ 计时/ 成本/ 不变/ ./ Hiding/ :/ ①/ E/ (/ α/ ,/ t/ ,/ f/ (/ →/ / / α/ )/ ,/ g/ (/ α/ )/ ,/ h/ (/ α/ →/ ②/ ct/ _/ e/ =/ min/ (/ ct/ _/ b/ +/ t/ ,/ ct/ _/ e/ )/ ./ ③/ cr/ _/ e/ =/ cr/ _/ e/ +/ cr/ _/ b/ ×/ f/ (/ →/ / / α/ )/ ./ Page7/ ④/ cg/ _/ e/ =/ min/ (/ cg/ _/ b/ +/ g/ (/ α/ )/ ,/ cg/ _/ e/ )/ ./ ⑤/ ch/ _/ e/ =/ min/ (/ ch/ _/ b/ +/ h/ (/ α/ )/ ,/ ch/ _/ e/ )/ ./ Hiding/ 算子/ 语义/ 表明/ :/ 动作/ 集合/ L/ 中/ 被/ 隐藏/ 的/ 动作/ 不/ 被/ 系统/ 外所见/ ,/ 限制/ 算子/ 不/ 影响/ 时间/ 、/ 概率/ 、/ 功能/ 成本/ 、/ 计时/ 成本/ 的/ 计算/ ./ Constant/ :/ ①/ E/ (/ α/ ,/ t/ ,/ f/ (/ →/ / / α/ )/ ,/ g/ (/ α/ )/ ,/ h/ (/ α/ →/ AC/ ②/ ct/ _/ e/ =/ min/ (/ ct/ _/ b/ +/ t/ ,/ ct/ _/ e/ )/ ./ ③/ cr/ _/ e/ =/ cr/ _/ e/ +/ cr/ _/ b/ ×/ f/ (/ →/ / / α/ )/ ./ ④/ cg/ _/ e/ =/ min/ (/ cg/ _/ b/ +/ g/ (/ α/ )/ ,/ cg/ _/ e/ )/ ./ ⑤/ ch/ _/ e/ =/ min/ (/ ch/ _/ b/ +/ h/ (/ α/ )/ ,/ ch/ _/ e/ )/ ./ Constant/ 算子/ 语义/ 表明/ :/ 表达式/ 中/ 的/ 常量/ AC/ 可以/ 用/ 其它/ 表达式/ 替代/ ,/ 常量/ 被/ 替代/ 后/ 将/ 具有/ 替代/ 表达式/ 相同/ 的/ 执行/ 能力/ ,/ 不/ 影响/ 时间/ 、/ 概率/ 、/ 功能/ 成本/ 、/ 计时/ 成本/ 的/ 计算/ ./ 下面/ 讨论/ 扩展/ TPPPA/ 累积/ 时间/ 、/ 累积/ 概率/ 和/ 累积/ 代价/ 的/ 完备/ 性/ 和/ 合理性/ ./ 完备/ 性指/ 任一/ TPPFSP/ 进程/ 的/ TPPDG/ 描述/ 了/ 该/ 进程/ 所有/ 的/ 时间/ 概率/ 代价/ 迁移/ 行为/ ./ 合理性/ 指对任/ 一时间/ 概率/ 代价/ 状态/ ,/ 或者/ 状态/ 的/ 累积/ 时间/ 是从/ 初始状态/ 到达/ 该/ 状态/ 的/ 最小/ 路径/ 时间/ ,/ 且/ 状态/ 的/ 累积/ 概率/ 是从/ 初始状态/ 到达/ 该/ 状态/ 的/ 所有/ 路径/ 概率/ 之/ 和/ ,/ 或者/ 状态/ 的/ 累积/ 成本/ 是从/ 初始状态/ 到达/ 该/ 状态/ 的/ 最小/ 路径/ 成本/ ./ 定理/ 1/ ./ 任一/ TPPFSP/ 进程/ 的/ TPPDG/ 描述/ 了/ 该/ 进程/ 所有/ 的/ 时间/ 概率/ 代价/ 状态/ 及其/ 迁移/ ,/ 状态/ 的/ 累积/ 时间/ 是从/ 初始状态/ 到达/ 该/ 状态/ 的/ 最小/ 路径/ 时间/ ,/ 状态/ 的/ 累积/ 概率/ 是从/ 初始状态/ 到达/ 该/ 状态/ 的/ 所有/ 路径/ 概率/ 之/ 和/ ,/ 状态/ 的/ 累积/ 成本/ 是从/ 初始状态/ 到达/ 该/ 状态/ 的/ 最小/ 路径/ 成本/ ./ 证明/ ./ 完备/ 性/ 证明/ ./ DG/ 描述/ 了/ 进程/ 所有/ 的/ 状态/ 及其/ 迁移/ ,/ TPPDG/ 是/ DG/ 的/ 时间/ 、/ 概率/ 和/ 代价/ 扩展/ ,/ 因而/ TPPDG/ 也/ 描述/ 了/ 进程/ 所有/ 的/ 状态/ 及其/ 迁移/ ./ 同时/ 在/ TPPDG/ 中/ ,/ 所有/ 的/ 状态/ 和/ 迁移/ 都/ 在/ 功能/ 动作/ 迁移/ 和/ 时间/ 动作/ 迁移/ 基础/ 上/ 扩展/ 了/ 累积/ 时间/ 、/ 累积/ 概率/ 和/ 累积/ 代价/ 信息/ ,/ 因而/ TPPDG/ 描述/ 了/ 进程/ 所有/ 的/ 时间/ 概率/ 代价/ 状态/ 及其/ 迁移/ ./ 合理性/ 证明/ ./ TPPDG/ 中任/ 一时间/ 概率/ 代价/ 状态/ 中/ 的/ 累积/ 时间/ 、/ 累积/ 概率/ 和/ 累积/ 成本/ ,/ 都/ 是/ 按照/ 定义/ 15/ 计算出来/ 的/ ,/ 这/ 就/ 保证/ 了/ 或者/ 该/ 时间/ 概率/ 代价/ 状态/ 中/ 的/ 时间/ 是从/ 初始状态/ 到达/ 该/ 状态/ 的/ 最小/ 路径/ 时间/ ,/ 状态/ 的/ 概率/ 是从/ 初始状态/ 到达/ 该/ 状态/ 的/ 所有/ 路径/ 概率/ 之/ 和/ ,/ 或者/ 状态/ 的/ 成本/ 是从/ 初始状态/ 到达/ 该/ 状态/ 的/ 最小/ 路径/ 成本/ ./ 下面/ 讨论/ TPPPA/ 和/ TCCS/ 的/ 关系/ ,/ 为此/ 引入/ 派生类/ 的/ 概念/ ,/ 证明/ TPPPA/ 是/ TCCS/ 的/ 派生类/ ,/ 即/ TPPPA/ 扩充/ 了/ TCCS/ 的/ 累积/ 时间/ 、/ 累积/ 概率/ 和/ 累积/ 代价/ 建模/ 能力/ ./ 定义/ 16/ ./ 如果/ A/ 类/ 进程/ 代数/ 的/ 任/ 一个/ 进程/ 可/ 接受/ 的/ 语言/ 都/ 能够/ 被/ B/ 类/ 进程/ 代数/ 的/ 某个/ 进程/ 所/ 接受/ ,/ 那么/ 称/ B/ 类/ 进程/ 代数/ 是/ A/ 类/ 进程/ 代数/ 的/ 派生类/ ./ 定理/ 2/ ./ TPPPA/ 是/ TCCS/ 的/ 派生类/ ./ 证明/ ./ 令/ / 是/ TCCS/ 中/ 任意/ 一个/ 有限/ 状态/ 进程/ FSP/ ,/ / 能/ 接受/ 的/ 语言/ 为/ L/ / ;/ φ/ 是/ TPPPA/ 中/ 对应/ / 的/ 一个/ TPPFSP/ ,/ φ/ 能/ 接受/ 的/ 语言/ 为/ L/ φ/ ./ L/ / 为/ / 能/ 接受/ 的/ 所有/ 动作/ 序列/ ,/ 对于/ L/ / 中/ 任意/ 一个/ 动作/ 序列/ σ/ =/ (/ α/ 1/ ,/ α/ 2/ ,/ …/ ,/ α/ n/ )/ (/ 其中/ α/ i/ ∈/ Λ/ ∩/ Γ/ ,/ i/ =/ 1/ ,/ 2/ ,/ …/ ,/ n/ )/ ,/ 则/ 唯一/ 对应/ L/ φ/ 中/ 一个/ 时间/ 概率/ 代价/ 动作/ 序列/ δ/ =/ (/ α/ 1/ ,/ t1/ ,/ f/ (/ α/ →/ / / 1/ )/ ,/ g/ (/ α/ 1/ )/ ,/ h/ (/ α/ 1/ )/ )/ ./ (/ α/ 2/ ,/ t2/ ,/ f/ (/ α/ →/ / / 2/ )/ ,/ g/ (/ α/ 2/ )/ ,/ h/ (/ α/ 2/ )/ )/ ./ …/ ./ (/ α/ n/ ,/ tn/ ,/ f/ (/ α/ →/ / / n/ )/ ,/ g/ (/ α/ n/ )/ ,/ h/ (/ α/ n/ )/ )/ ,/ 即/ φ/ 也/ 能/ 接受/ L/ / ,/ 所以/ TPPPA/ 是/ TCCS/ 的/ 派生类/ ./ 定理/ 2/ 证明/ 了/ TPPPA/ 是/ TCCS/ 的/ 派生类/ ,/ 即/ TPPPA/ 在/ TCCS/ 基础/ 上/ 扩充/ 了/ 累积/ 时间/ 、/ 累积/ 概率/ 和/ 累积/ 代价/ 建模/ 能力/ ./ 如果/ 令/ 所有/ 时间/ 概率/ 代价/ 动作/ 中/ 的/ 累积/ 时间/ 、/ 累积/ 概率/ 和/ 累积/ 代价/ 为/ 0/ ,/ 则/ TPPPA/ 退化/ 为/ TCCS/ ,/ 也/ 即/ TPPPA/ 是/ TCCS/ 的/ 保守/ 扩展/ ./ 4/ 基于/ TPPPA/ 的/ Web/ 服务/ 组合/ 建模/ 和/ 分析/ 4.1/ TPPPA/ 与/ BPEL/ // WSDL/ 的/ 映射/ 由于/ 目前/ BPEL4WS/ 已/ 成为/ 业界/ 基于/ 流程/ 对/ Web/ 服务/ 进行/ 编制/ (/ Orchestration/ )/ 组合/ 的/ 事实标准/ [/ 12/ ]/ ,/ 本/ 节/ 给出/ TPPPA/ 与/ BPEL/ // WSDL/ 之间/ 的/ 映射/ ./ 参考文献/ [/ 5/ ]/ 的/ 映射/ 方法/ ,/ 可/ 把/ WSDL/ 描述/ 的/ Web/ 服务/ 映射/ 为/ TPPPA/ 的/ 进程/ ,/ 把/ Web/ 服务/ 之间/ 的/ 消息/ 交互/ 行为/ 映射/ 为/ TPPPA/ 的/ 功能/ 动作/ ,/ 把/ BPEL/ 的/ 顺序/ 、/ 选择/ 、/ 并发/ 、/ 循环/ 等/ 结构/ 映射/ 为/ TPP/ -/ PA/ 的/ 相应/ 算子/ 和/ 结构/ ./ 除此之外/ ,/ 由于/ TPPPA/ 为/ 进程/ 扩展/ 了/ 时间/ 、/ 概率/ 和/ 代价/ 等/ 信息/ ,/ 还/ 需/ 把/ 这些/ 信息/ 映射/ 为/ BPEL/ // WSDL/ 的/ 相关/ 信息/ ./ 为此/ 可/ 采用/ 本文/ 3.1/ 节/ 提出/ 的/ 方法/ ,/ 具体/ 说明/ 如下/ :/ (/ 1/ )/ 时间/ 的/ 映射/ ./ 对于/ BPEL/ 的/ 消息/ 收发/ 动作/ ,/ 如/ receive/ 、/ reply/ 、/ invoke/ 等/ ,/ 映射/ 为/ TPPPA/ 的/ 功能/ 动作/ ,/ 时间/ 参数/ 为/ 1/ ;/ 对于/ BPEL/ 和/ Web/ 服务/ 的/ 延/ Page8/ 时/ 行为/ ,/ 如/ delay/ 等/ ,/ 映射/ 为/ TPPPA/ 的/ 时间/ 动作/ ,/ 时间/ 值/ 的/ 获取/ 一般/ 可/ 采取/ 3/ 种/ 方法/ :/ 一是/ 可/ 依据/ Web/ 服务提供者/ 的/ 历史/ 日志/ 数据/ 来/ 估计/ ;/ 二是/ Web/ 服务/ 消费者/ 的/ 测量/ 数量/ 来/ 估计/ ;/ 三是/ 建模/ 者/ 根据/ 对/ Web/ 服务/ 的/ 经验/ 来/ 估计/ ./ (/ 2/ )/ 概率/ 的/ 映射/ ./ 对于/ BPEL/ 的/ 选择/ 结构/ ,/ 如/ switch/ 、/ if/ 等/ ,/ 映射/ 为/ TPPPA/ 的/ 分支/ 选择/ 结构/ ,/ BPEL/ 中/ 的/ 概率/ 信息/ 体现/ 在/ 选择/ 结构/ 向/ 不同/ 分支/ 迁移/ 上/ ,/ 向/ 不同/ 分支/ 迁移/ 的/ 概率/ 往往/ 取决于/ 具体/ 参与/ 选择/ 的/ Web/ 服务/ ./ 概率/ 参数/ 的/ 获取/ 途径/ :/ 一是/ 可/ 依据/ Web/ 服务提供者/ 的/ 历史/ 日志/ 数据/ 来/ 估计/ 向/ 不同/ 分支/ 迁移/ 的/ 概率/ ./ 二是/ 根据/ 建模/ 者/ 对/ Web/ 服务/ 的/ 经验/ 来/ 估计/ 向/ 不同/ 分支/ 迁移/ 的/ 概率/ ./ (/ 3/ )/ 价格/ 的/ 映射/ ./ 对于/ BPEL/ 的/ 消息/ 收发/ 动作/ ,/ 如/ receive/ 、/ reply/ 、/ invoke/ 等/ ,/ 映射/ 为/ TPPPA/ 的/ 功能/ 动作/ ,/ 价格/ 参数/ 为/ 1/ ;/ 对于/ BPEL/ 和/ Web/ 服务/ 组件/ 的/ 延时/ 行为/ ,/ 如/ delay/ 等/ ,/ 映射/ 为/ TPPPA/ 的/ 时间/ 动作/ ,/ 价格/ 以/ 服务/ 组件/ 的/ 单位/ 时间/ 使用/ 费用/ 表示/ ,/ 可取/ 为/ 该/ 服务/ 组件/ 在/ UDDI/ // WSDL/ 上/ 声明/ 的/ 价格/ ./ 当/ 提供/ 持续/ 服务/ 时/ ,/ 将/ 产生/ 计时/ 服务/ 代价/ ./ 下面/ 表/ 1/ 给出/ TPPPA/ 与/ WSDL/ // BPEL/ 之间/ 的/ 映射/ 关系/ ./ 通过/ 上述/ 映射/ ,/ BPEL/ // WSDL/ 描述/ 的/ Web/ 服务/ 组合/ 就/ 可以/ 映射/ 为/ TPPPA/ 的/ 进程/ 演算/ ,/ 进而/ 运用/ 图/ 2/ 旅行/ 订票/ 系统/ TPPPAfunctionalactionsWSDL/ :/ message/ ,/ operationtimedactionpricesequence/ ‘/ ./ ’/ choice/ ‘/ +/ ’/ probabilityof/ ‘/ +/ ’/ BPEL/ :/ probabilityofswitchorifparallel/ ‘/ |/ ’/ restrictionset/ ‘/ \/ ’/ BPEL/ :/ interactions/ ,/ assigntermination/ ‘/ 0/ ’/ recursivedullactionprocessTPPPA/ 的/ 分析方法/ 进行/ 分析/ 验证/ ,/ 经过/ 分析/ 验证/ 的/ TPPPA/ 服务/ 组合/ 模型/ 可以/ 作为/ BPEL/ 流程/ 实现/ 的/ 参考模型/ ,/ 经过/ 映射/ 和/ 精化/ 后/ 进一步/ 可/ 成为/ Web/ 服务/ 组合/ 的/ BPEL/ 流程/ ,/ 从而/ 有助于/ 提高/ 组合/ 服务/ 的/ 可信性/ ./ 4.2/ 基于/ TPPPA/ 的/ Web/ 服务/ 组合/ 建模/ 4.2/ ./ 1Web/ 服务/ 组合/ 实例/ 下面/ 以/ 文献/ [/ 12/ ]/ 中/ 描述/ 的/ 旅行/ 订票/ 系统/ 为/ 基础/ ,/ 省略/ 了/ 与/ TPPPA/ 建模/ 分析/ 无关/ 的/ 环节/ ,/ 得到/ 图/ 2/ 所示/ 简化/ 的/ 旅行/ 订票/ 系统/ ,/ 以此/ 为/ 例来/ 说明/ 基于/ TPPPA/ 的/ Web/ 服务/ 组合/ 建模/ ./ Page9/ 本文/ 着重于/ 阐述/ 运用/ TPPPA/ 对/ 组合/ 服务/ 建模/ 和/ 分析/ 的/ 原理/ ,/ 对/ 实例/ 适当/ 作/ 了/ 一些/ 简化/ ,/ 省略/ 了/ 部分/ 细节/ 问题/ ,/ 并/ 做/ 如下/ 适当/ 假设/ :/ 口/ 的/ 消息/ 交互/ 中/ ;/ 间/ 为/ 1/ ;/ 依据/ 前述/ 方法/ 已/ 事先/ 获得/ ;/ (/ 1/ )/ 子/ 服务/ 的/ 外部/ 行为/ 是/ 可知/ 的/ ,/ 体现/ 在/ 其接/ (/ 2/ )/ 子/ 服务/ 之间/ 的/ 通信/ 是/ 同步/ 通信/ ,/ 且/ 同步/ 时/ (/ 3/ )/ 实例/ 中子/ 服务/ 的/ 时间/ 、/ 概率/ 、/ 代价/ 等/ 参数/ ,/ (/ 4/ )/ 异常/ 处理/ 表现/ 为/ 预订/ 房间/ 失败/ 情况/ 下/ 对/ 预订/ 机票/ 的/ 服务/ 事务/ 补偿/ ./ 该/ 旅行/ 预定/ 系统/ (/ TravelBookingSystem/ )/ 由/ 旅行/ 代理服务/ (/ TAgent/ )/ 、/ 宾馆/ 服务/ (/ Hotel/ )/ 和/ 航空/ 服务/ (/ AirlineA/ 和/ AirlineB/ )/ 等/ Web/ 服务/ 组件/ 组合而成/ ./ 图中/ 假设/ TAgent/ 的/ 单位/ 时间/ 价格/ 为/ 5/ ;/ Hotel/ 的/ 单位/ 时间/ 价格/ 为/ 2/ ;/ AirlineA/ 的/ 单位/ 时间/ 价格/ 为/ 3/ ;/ AirlineB/ 的/ 单位/ 时间/ 价格/ 为/ 4/ ./ 由于/ TAgent/ 是/ 组合/ 服务/ 的/ 核心/ 服务/ 组件/ ,/ 为此/ 从/ TAgent/ 的/ 角度/ 来/ 描述/ 组合/ 服务/ 的/ 流程/ ./ 并且/ 在/ 发送/ 消息/ 的/ 动作/ 加前缀/ “/ ”/ ,/ 而/ 接收/ 动作/ 无此/ 前缀/ ,/ 以便/ 区分/ 发送/ 动作/ 和/ 接收/ 动作/ ./ 服务/ 组合/ 流程/ 说明/ 如下/ :/ (/ 1/ )/ TAgent/ 平时/ 处于/ 等待/ 提供/ 服务/ 状态/ ,/ 收到/ Client/ 的/ 订票/ 请求/ (/ BkRq/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ (/ 其中/ :/ 第/ 1/ 个/ 1/ 指/ 功能/ 动作/ BkRq/ 消耗/ 的/ 时间/ 为/ 1/ ;/ 第/ 2/ 个/ 1/ 指/ TAgent/ 在/ 等待/ 提供/ 服务/ 状态/ 下/ 接受/ 消息/ BkRq/ 的/ 迁移/ 概率/ ,/ 因为/ TAgent/ 在/ 等待/ 提供/ 服务/ 状态/ 下/ 必须/ 经历/ 该/ 迁移/ ,/ 否则/ 其它/ 迁移/ 将/ 无法/ 发生/ ;/ 第/ 3/ 个/ 1/ 指/ 接受/ 消息/ BkRq/ 的/ 带宽/ 价格/ ;/ 0/ 指该/ 消息/ 映射/ 的/ 服务/ 时间/ 代价/ )/ ./ (/ 2/ )/ TAgent/ 并行/ 地向/ AirlineA/ 和/ AirlineB/ 发出/ 机票/ 查询/ (/ FtAQy/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ 和/ (/ FtBQy/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ ,/ 为/ 简化/ 建模/ ,/ 采用/ (/ FtAQy/ |/ FtBQy/ ,/ 1/ ,/ 1/ ,/ 2/ ,/ 0/ )/ 来/ 统一/ 表示/ 这/ 两个/ 动作/ (/ 其中/ :/ FtAQy/ |/ FtBQy/ 指/ 并行/ 发送/ 查询/ 消息/ ;/ 第/ 1/ 个/ 1/ 指/ 消耗/ 的/ 时间/ ;/ 第/ 2/ 个/ 1/ 指/ TAgent/ 在/ 收到/ BkRq/ 的/ 状态/ 下/ 发送/ FtAQy/ |/ FtBQy/ 的/ 概率/ 为/ 1/ ;/ 2/ 指/ 并行/ 发送/ FtAQy/ |/ FtBQy/ 的/ 带宽/ 价格/ 为/ 2/ ,/ 0/ 指该/ 消息/ 没有/ 映射/ 服务/ 价格/ )/ ./ (/ 3/ )/ TAgent/ 并行/ 地/ 接收/ AirlineA/ 和/ AirlineB/ 的/ 响应/ ./ AirlineA/ 的/ 响应/ 分为/ (/ FtAIf/ ,/ 1/ ,/ 0.7/ ,/ 1/ ,/ 0/ )/ // (/ ATmOt/ ,/ 1/ ,/ 0.3/ ,/ 0/ ,/ 0/ )/ 两种/ 情况/ ,/ 其中/ (/ FtAIf/ ,/ 1/ ,/ 0.7/ ,/ 1/ ,/ 0/ )/ 表示/ 返回/ 机票信息/ 的/ 概率/ 为/ 0.7/ ,/ (/ ATmOt/ ,/ 1/ ,/ 0.3/ ,/ 0/ ,/ 0/ )/ 表示/ 无/ 响应/ 的/ 概率/ 为/ 0.3/ (/ 其中/ ATmOt/ 表示/ TAgent/ 的/ 内部/ 超时/ 动作/ ,/ 不/ 占用/ 带宽/ ,/ 因而/ 其/ 带宽/ 价格/ 为/ 0/ ./ 因为/ 此时/ 尚未/ 提供/ 计时/ 服务/ ,/ 因而/ 计时/ 代价/ 也/ 为/ 0/ )/ ./ 同理/ ,/ AirlineB/ 的/ 响应/ 分为/ (/ FtBIf/ ,/ 1/ ,/ 0.8/ ,/ 1/ ,/ 0/ )/ // (/ BTmOt/ ,/ 1/ ,/ 0.2/ ,/ 0/ ,/ 0/ )/ 两种/ 情况/ ./ 为/ 简化/ 建模/ ,/ 统一/ AirlineA/ 和/ AirlineB/ 的/ 响应/ 为/ 4/ 种/ 情况/ :/ (/ 3.1/ )/ AirlineA/ 和/ AirlineB/ 都/ 返回/ 机票信息/ (/ FtAIf/ |/ FtBIf/ ,/ 1/ ,/ 0.56/ ,/ 2/ ,/ 0/ )/ (/ 其中/ :/ 时间/ 参数/ 为/ 1/ ;/ 概率/ 参数/ 为/ 0.56/ =/ 0.8/ ×/ 0.7/ ;/ 带宽/ 价格/ 为/ 2/ ;/ 计时/ 服务/ 代价/ 为/ 0/ ./ 在/ 此/ 状态/ 下/ ,/ TAgent/ 将/ 基于/ 某些/ 标准/ (/ 比如/ QoS/ 等/ )/ 来/ 选择/ 服务/ ,/ 假设/ TAgent/ 将/ 以/ 概率/ 0.5/ 向/ AirlineA/ 发送/ 订票/ 请求/ FtARs/ ,/ 或/ 以/ 概率/ 0.5/ 向/ AirlineB/ 发送/ 订票/ 请求/ FtBRs/ )/ ./ (/ 3.2/ )/ AirlineA/ 返回/ 机票信息/ 而/ AirlineB/ 无/ 响应/ (/ FtAIf/ |/ BTmOt/ ,/ 1/ ,/ 0.14/ ,/ 1/ ,/ 0/ )/ (/ 其中/ :/ 时间/ 参数/ 为/ 1/ ;/ 概率/ 参数/ 为/ 0.14/ =/ 0.7/ ×/ 0.2/ ;/ 带宽/ 价格/ 为/ 1/ ;/ 计时/ 服务/ 代价/ 为/ 0/ ./ 在/ 此/ 状态/ 下/ ,/ TAgent/ 将/ 以/ 概率/ 1/ 向/ AirlineA/ 发送/ 订票/ 请求/ FtARs/ )/ ./ (/ 3.3/ )/ AirlineA/ 无/ 响应/ 而/ AirlineB/ 返回/ 机票信息/ (/ ATmOt/ |/ FtBIf/ ,/ 1/ ,/ 0.24/ ,/ 1/ ,/ 0/ )/ (/ 其中/ :/ 时间/ 参数/ 为/ 1/ ;/ 概率/ 参数/ 为/ 0.24/ =/ 0.3/ ×/ 0.8/ ;/ 带宽/ 价格/ 为/ 1/ ;/ 计时/ 服务/ 代价/ 为/ 0/ ./ 在/ 此/ 状态/ 下/ ,/ TAgent/ 将/ 以/ 概率/ 1/ 向/ AirlineB/ 发送/ 订票/ 请求/ FtBRs/ )/ ./ (/ 3.4/ )/ AirlineA/ 和/ AirlineB/ 都/ 无/ 响应/ (/ ATmOt/ |/ BTmOt/ ,/ 1/ ,/ 0.06/ ,/ 0/ ,/ 0/ )/ (/ 其中/ :/ 时间/ 参数/ 为/ 1/ ;/ 概率/ 参数/ 为/ 0.06/ =/ 0.3/ ×/ 0.2/ ;/ 带宽/ 价格/ 为/ 0/ ;/ 计时/ 服务/ 代价/ 为/ 0/ ./ 在/ 此/ 状态/ 下/ ,/ TAgent/ 将/ 以/ 概率/ 1/ 向/ Client/ 发送/ 服务/ 失败/ 消息/ (/ BkRf/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ )/ ./ (/ 4/ )/ 如果/ TAgent/ 向/ AirlineA/ 发送/ 了/ FtARs/ ,/ 在/ 此/ 状态/ 下/ ,/ 则/ 它们/ 开始/ 提供/ 计时/ 服务/ ./ 假设/ 它们/ 之间/ 在/ 一次/ 服务/ 组合/ 事务/ 过程/ 中/ 不再/ 出现/ 故障/ ,/ 且/ 为/ 机票/ 处理/ 需要/ 10/ 个/ 单位/ 时间/ ,/ 则/ 可/ 建模/ 为/ (/ [/ 10/ ]/ ,/ 10/ ,/ 1/ ,/ 0/ ,/ 50/ )/ (/ 其中/ :/ 时间/ 参数/ 为/ 10/ ;/ 概率/ 参数/ 为/ 1/ ;/ 功能/ 价格/ 为/ 0/ ;/ 计时/ 代价/ 为/ 50/ =/ 10/ ×/ 5/ )/ ./ 之后/ TAgent/ 收到/ AirlineA/ 订机票/ 成功/ 的/ 概率/ 为/ 1/ ,/ 也/ 即/ 动作/ (/ FtAAk/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ ./ 同理/ ,/ 如果/ TAgent/ 向/ AirlineB/ 发送/ 了/ FtBRs/ ,/ 在/ 此/ 状态/ 下/ ,/ 则/ 它们/ 开始/ 提供/ 计时/ 服务/ ./ 假设/ 它们/ 之间/ 在/ 一次/ 服务/ 组合/ 事务/ 过程/ 中/ 不再/ 出现/ 故障/ ,/ 且/ 为/ 机票/ 处理/ 需要/ 9/ 个/ 单位/ 时间/ ,/ 则/ 可/ 建模/ 为/ (/ [/ 9/ ]/ ,/ 9/ ,/ 1/ ,/ 0/ ,/ 45/ )/ (/ 其中/ :/ 时间/ 参数/ 为/ 9/ ;/ 概率/ 参数/ 为/ 1/ ;/ 功能/ 价格/ 为/ 0/ ;/ 计时/ 代价/ 为/ 45/ =/ 9/ ×/ 5/ )/ ./ 之后/ TAgent/ 收到/ AirlineA/ 订机票/ 成功/ 的/ 消息/ (/ FtBAk/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ ,/ 向/ Client/ 发送/ 服务/ 成功/ 消息/ (/ BkAk/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ ./ (/ 5/ )/ 订机票/ 成功/ 后/ ,/ TAgent/ 向/ Hotel/ 发送/ 房间/ 查询/ 请求/ (/ HtQy/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ ./ Page10/ (/ 6/ )/ Hotel/ 的/ 响应/ 分为/ (/ HtIf/ ,/ 1/ ,/ 0.9/ ,/ 1/ ,/ 0/ )/ // (/ HtTmOt/ ,/ 1/ ,/ 0.1/ ,/ 0/ ,/ 0/ )/ 两种/ 情况/ :/ (/ 6.1/ )/ 如果/ TAgent/ 收到/ (/ HtIf/ ,/ 1/ ,/ 0.9/ ,/ 1/ ,/ 0/ )/ ,/ 则/ 向/ Hotel/ 发送/ 订房/ 请求/ (/ HtRs/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ ./ 在/ 此/ 状态/ 下/ ,/ 则/ 它们/ 开始/ 提供/ 计时/ 服务/ ./ 假设/ 它们/ 之间/ 在/ 一次/ 服务/ 组合/ 事务/ 过程/ 中/ 不再/ 出现/ 故障/ ,/ 且/ 为/ 订房/ 处理/ 需要/ 5/ 个/ 单位/ 时间/ ,/ 则/ 可/ 建模/ 为/ (/ [/ 5/ ]/ ,/ 5/ ,/ 1/ ,/ 0/ ,/ 25/ )/ ./ 之后/ TAgent/ 收到/ Hotel/ 订房/ 成功/ 的/ 概率/ 为/ 1/ ,/ 建模/ 为/ (/ HtAk/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ ./ (/ 6.2/ )/ 如果/ Hotel/ 无/ 响应/ ,/ 则/ 建模/ 为/ (/ HtTmOt/ ,/ 1/ ,/ 0.1/ ,/ 0/ ,/ 0/ )/ ./ 在/ 此/ 状态/ 下/ ,/ 还/ 需/ :/ (/ 6.2/ ./ 1/ )/ 如果/ 向/ AirlineA/ 订过/ 机票/ ,/ TAgent/ 还/ 需向/ AirlineA/ 发送/ 取消/ 订票/ 消息/ (/ FtACl/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ ./ 由于/ 在/ 此/ 状态/ 下/ 已/ 假定/ TAgent/ 与/ AirlineA/ 在/ 一次/ 组合/ 事务/ 过程/ 中/ 不再/ 有/ 故障/ ,/ 则/ 会/ 收到/ AirlineA/ 取消/ 订票/ 的/ 确认/ 消息/ ,/ 建模/ 为/ (/ AClAk/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ -/ 50/ )/ (/ 其中/ :/ -/ 50/ 表示/ 取消/ 与/ AirlineA/ 组合/ 的/ 计时/ 服务/ 代价/ ,/ 因为/ 组合/ 服务/ 是/ 以/ 成功/ 提供/ 服务/ 来/ 计算/ 费用/ 的/ ,/ 不/ 成功/ 提供/ 组合/ 服务/ 将/ 不/ 计算/ 费用/ ,/ 这/ 可以/ 看做/ 是/ Web/ 服务/ 事务/ 中/ 的/ 补偿/ 机制/ )/ ./ 相应/ 地/ ,/ 如果/ 向/ AirlineB/ 订过/ 机票/ ,/ TAgent/ 还/ 需向/ AirlineB/ 发送/ 取消/ 订票/ 消息/ (/ FtBCl/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ ./ 由于/ 在/ 此/ 状态/ 下/ 已/ 假定/ TAgent/ 与/ AirlineB/ 在/ 一次/ 组合/ 事务/ 过程/ 中/ 不再/ 有/ 故障/ ,/ 则/ 会/ 收到/ AirlineB/ 取消/ 订票/ 的/ 确认/ 消息/ ,/ 建模/ 为/ (/ BClAk/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ -/ 45/ )/ (/ 其中/ :/ -/ 45/ 表示/ 取消/ 与/ AirlineB/ 组合/ 的/ 计时/ 服务/ 代价/ )/ ./ (/ 6.2/ ./ 2/ )/ TAgent/ 向/ Client/ 发送/ 服务/ 失败/ 消息/ (/ BkRf/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ ./ 4.2/ ./ 2Web/ 服务/ 组合/ 的/ TPPPA/ 模型/ 对/ 上述/ Web/ 服务/ 组合/ 流程/ ,/ 把/ 其中/ 的/ Web/ 服务/ 分别/ 建模/ 为/ TPPPA/ 的/ 进程/ ,/ 而/ 组合/ 服务/ Travel/ -/ BookingSystem/ 则/ 建模/ 为/ 这些/ TPPPA/ 进程/ 的/ 并发/ 合成/ ./ 另外/ 需要/ 说明/ 的/ 是/ ,/ Client/ 不是/ 组成/ Travel/ -/ BookingSystem/ 的/ 子/ 服务/ ,/ 而是/ 作为/ TravelBook/ -/ ingSystem/ 的/ 需求者/ 来/ 验证/ 组合/ 服务/ 是否/ 满足/ 需求/ ./ 因为/ Client/ 是/ 与/ TravelBookingSystem/ 交互/ 的/ ,/ 如果/ TravelBookingSystem/ 满足/ Client/ 需求/ ,/ 则/ Client/ 与/ TravelBookingSystem/ 可以/ 看作/ 是/ 一对/ 互补/ 的/ 系统/ ,/ 且/ 客户/ 对偶/ RClient/ (/ 即/ 与/ Client/ 互补/ 的/ 满足/ 需求/ 的/ 理想/ 进程/ ,/ 对/ Client/ 进程/ 表达式/ 中/ 所有/ 的/ 动作/ 取/ 相应/ 的/ 补/ 动作/ ,/ 可/ 直接/ 得到/ RClient/ 的/ 表达式/ )/ 与/ TravelBookingSystem/ 在/ 外部/ 行为/ 上应/ 是/ 一致/ 的/ ,/ 这/ 正好/ 可以/ 通过/ RClient/ 与/ TravelBook/ -/ ingSystem/ 是否/ 弱互/ 模拟/ 来/ 验证/ ./ 因此/ ,/ 把/ Client/ 和/ RClient/ 也/ 建模/ 为/ TPPPA/ 进程/ ./ 下面/ 给出/ 它们/ 的/ TPPPA/ 表达式/ :/ TAgent/ 的/ 进程/ 表达式/ 如下/ :/ procTAgent/ =/ (/ BkRq/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ / (/ FtAQy/ |/ FtBQy/ ,/ 1/ ,/ 1/ ,/ 2/ ,/ 0/ )/ / TAgent1procTAgent1/ =/ (/ FtAIf/ |/ BTmOt/ ,/ 1/ ,/ 0.14/ ,/ 1/ ,/ 0/ )/ / TAgent2/ +/ procTAgent2/ =/ (/ FtARs/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ / TAgent6procTAgent3/ =/ (/ FtARs/ ,/ 1/ ,/ 0.5/ ,/ 1/ ,/ 0/ )/ / TAgent6/ +/ procTAgent4/ =/ (/ FtBRs/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ / TAgent7procTAgent5/ =/ (/ BkRf/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ / TAgentprocTAgent6/ =/ (/ [/ 10/ ]/ ,/ 10/ ,/ 1/ ,/ 0/ ,/ 50/ )/ / (/ FtAAk/ ,/ 0/ ,/ 1/ ,/ 1/ ,/ 0/ )/ / (/ HtQy/ ,/ 1/ ,/ procTAgent7/ =/ (/ [/ 9/ ]/ ,/ 9/ ,/ 1/ ,/ 0/ ,/ 45/ )/ / (/ FtBAk/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ / (/ HtQy/ ,/ 1/ ,/ 1/ ,/ procTAgent8/ =/ (/ HtIf/ ,/ 1/ ,/ 0.9/ ,/ 1/ ,/ 0/ )/ / TAgent10/ +/ (/ HtTmOt/ ,/ 1/ ,/ 0.1/ ,/ procTAgent9/ =/ (/ HtIf/ ,/ 1/ ,/ 0.9/ ,/ 1/ ,/ 0/ )/ / TAgent10/ +/ (/ HtTmOt/ ,/ 1/ ,/ 0.1/ ,/ procTAgent10/ =/ (/ HtRs/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ / (/ [/ 5/ ]/ ,/ 5/ ,/ 1/ ,/ 0/ ,/ 25/ )/ / (/ HtAk/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ procTAgent11/ =/ (/ FtACl/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ / (/ AClAk/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ -/ 50/ )/ / TAgent5procTAgent12/ =/ (/ FtBCl/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ / (/ BClAk/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ -/ 45/ )/ / TAgent5/ 说明/ :/ TAgent/ 的/ 表达式/ 是/ 对/ 上述/ TAgent/ 流程/ 的/ 建模/ ./ AirlineA/ 的/ 进程/ 表达式/ 如下/ :/ procAirlineA/ =/ (/ FtAQy/ ,/ 1/ ,/ 0.5/ ,/ 1/ ,/ 0/ )/ / (/ FtAIf/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ / AirlineA/ +/ (/ FtARs/ ,/ 1/ ,/ 0.4/ ,/ 1/ ,/ 0/ )/ / (/ [/ 10/ ]/ ,/ 10/ ,/ 1/ ,/ 0/ ,/ 30/ )/ / (/ FtAAk/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ / AirlineA/ +/ (/ FtACl/ ,/ 1/ ,/ 0.1/ ,/ 1/ ,/ 0/ )/ / (/ AClAk/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ -/ 30/ )/ / AirlineA/ 说明/ :/ AirlineA/ 在/ 等待/ 提供/ 服务/ 的/ 状态/ 下/ 存在/ 3/ 种/ 可能/ 行为/ :/ 接收/ 机票/ 查询/ (/ FtAQy/ ,/ 1/ ,/ 0.5/ ,/ 1/ ,/ 0/ )/ 、/ 接收/ 机票/ 预定/ (/ FtARs/ ,/ 1/ ,/ 0.4/ ,/ 1/ ,/ 0/ )/ 、/ 接收/ 机票/ 预定/ 取消/ (/ FtACl/ ,/ 1/ ,/ 0.1/ ,/ 1/ ,/ 0/ )/ ./ 其中/ ,/ 如果/ 接收/ 到/ 机票/ 预定/ ,/ AirlineA/ 将/ 与/ TAgent/ 组合/ 进行/ 10/ 个/ 时间/ 单位/ 的/ 计时/ 机票/ 处理/ 服务/ (/ [/ 10/ ]/ ,/ 10/ ,/ 1/ ,/ 0/ ,/ 30/ )/ ,/ AirlineA/ 的/ 计时/ 服务/ 代价/ 为/ 30/ =/ 10/ ×/ 3/ ./ 如果/ 接收/ 到/ 机票/ 预定/ 取消/ ,/ 将/ 进行/ 补偿/ 处理/ (/ AClAk/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ -/ 30/ )/ ,/ AirlineA/ 的/ 计时/ 服务/ 代价/ 为/ 30/ 将/ 被/ 取消/ ./ AirlineB/ 的/ 的/ 进程/ 表达式/ 如下/ :/ procAirlineB/ =/ (/ FtBQy/ ,/ 1/ ,/ 0.5/ ,/ 1/ ,/ 0/ )/ / (/ FtBIf/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ / AirlineB/ +/ (/ FtBRs/ ,/ 1/ ,/ 0.4/ ,/ 1/ ,/ 0/ )/ / (/ [/ 9/ ]/ ,/ 9/ ,/ 1/ ,/ 0/ ,/ 36/ )/ / (/ FtBAk/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ / Air/ -/ lineB/ +/ (/ FtBCl/ ,/ 1/ ,/ 0.1/ ,/ 1/ ,/ 0/ )/ / (/ BClAk/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ -/ 36/ )/ / AirlineB/ 说明/ :/ AirlineB/ 的/ 情形/ 与/ AirlineA/ 的/ 类似/ ./ Hotel/ 的/ 进程/ 表达式/ 如下/ :/ (/ HtRs/ ,/ 1/ ,/ 0.5/ ,/ 1/ ,/ 0/ )/ / (/ [/ 5/ ]/ ,/ 5/ ,/ 1/ ,/ 0/ ,/ 10/ )/ / (/ HtAk/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ / HotelprocHotel/ =/ (/ HtQy/ ,/ 1/ ,/ 0.5/ ,/ 1/ ,/ 0/ )/ / (/ HtIf/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ / Hotel/ +/ Page11/ 组合/ 服务/ TravelBookingSystem/ 的/ 进程/ 表达式/ 如下/ :/ setIn/ =/ {/ FtAQy/ ,/ FtBQy/ ,/ FtAIf/ ,/ FtBIf/ ,/ FtARs/ ,/ FtBRs/ ,/ FtAAk/ ,/ FtBAk/ ,/ FtACl/ ,/ FtBCl/ ,/ AClAk/ ,/ BClAk/ ,/ HtQy/ ,/ HtIf/ ,/ HtRs/ ,/ HtAk/ ,/ ATmOt/ ,/ BTmOt/ ,/ HtTmOt/ }/ procTravelBookingSystem/ =/ (/ TAgent/ |/ AirlineA/ |/ AirwayB/ |/ Hotel/ )/ \/ In/ 说明/ :/ TravelBookingSystem/ 由子/ 服务/ TAgent/ 、/ AirlineA/ 、/ AirlineB/ 和/ Hotel/ 并发/ 组合而成/ ./ 动作/ 集合/ In/ 中/ 的/ 动作/ 是/ TravelBookingSystem/ 内/ 各子/ 服务/ 之间/ 的/ 交互/ 动作/ ,/ 对/ 用户/ Client/ 是/ 不/ 可见/ 的/ ,/ 应/ 作为/ 内部/ 动作/ 使用/ 隐藏/ 算子/ 隐藏/ 起来/ ./ 客户/ Client/ 的/ 进程/ 表达式/ 如下/ :/ 说明/ :/ Client/ 是/ 组合/ 服务/ TravelBookingSystem/ 的/ 需求者/ ,/ 从/ Client/ 的/ 角度/ 而言/ ,/ (/ BkAk/ ,/ ?/ ,/ ?/ ,/ ?/ ,/ ?/ )/ 和/ (/ BkRf/ ,/ ?/ ,/ ?/ ,/ ?/ ,/ ?/ )/ 表示/ 接收/ 到/ BkAk/ (/ 即/ 服务/ 组合/ 成功/ )/ 和/ BkRf/ (/ 即/ 服务/ 组合/ 失败/ )/ 的/ 累积/ 时间/ 、/ 累积/ 概率/ 、/ 累积/ 带宽/ 成本/ 、/ 累积/ 计时/ 服务/ 成本/ 等/ 未知/ ,/ 需要/ 在/ 组合/ 服务/ 的/ 设计/ 验证/ 阶段/ 求解/ ./ 需要/ 注意/ 的/ 是/ ,/ 这/ 两个/ 动作/ 与/ 图/ 中/ 标注/ 的/ 动作/ (/ BkAk/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ 和/ (/ BkRf/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ 是/ 不同/ 的/ ,/ 后者/ 是从/ TAgent/ 的/ 角度/ 而言/ ,/ 其中/ (/ BkAk/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ 表示/ TAgent/ 在/ 预订/ 机票/ 和/ 房间/ 都/ 成功/ 的/ 状态/ 下/ 必然/ 向/ Client/ 发送/ 成功/ 消息/ ,/ 概率/ 为/ 1/ ,/ 而/ (/ BkRf/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ 表示/ TAgent/ 在/ 预订/ 机票/ 失败/ 或/ 预订/ 房间/ 失败/ 的/ 状态/ 下/ 必然/ 向/ Client/ 发送/ 失败/ 消息/ ,/ 概率/ 为/ 1/ ./ 客户/ 对偶/ RClient/ 的/ 进程/ 表达式/ 如下/ :/ 说明/ :/ RClient/ 是/ Client/ 的/ 对偶/ 进程/ ,/ 其/ 表达式/ 是/ 对/ Client/ 表达式/ 中/ 的/ 动作/ 求补/ ./ 4.3/ 基于/ TPPPA/ 的/ Web/ 服务/ 组合分析/ 建立/ TPPPA/ 模型/ 后/ ,/ 可/ 对/ 其/ 进行/ 功能分析/ 和/ QoS/ 分析/ ./ 由于/ TPPPA/ 是/ 对/ TCCS/ 的/ 时间/ 、/ 概率/ 和/ 代价/ 的/ 保守/ 扩展/ ,/ 如果/ 把/ TPPPA/ 模型/ 中/ 的/ 时间/ 、/ 概率/ 和/ 代价/ 信息/ 忽略/ ,/ 则/ 可/ 得到/ 一个/ TCCS/ 模型/ ./ 可/ 在/ TCCS/ 模型/ 上/ 进行/ 功能分析/ ,/ 包括/ 安全检查/ 、/ 活动/ 观察/ 、/ 功能/ 验证/ 等/ ,/ 本文/ 第/ 2/ 节/ 对此/ 已/ 做/ 了/ 介绍/ ,/ 在/ 此/ 不再/ 赘述/ ,/ 本文/ 重点/ 是/ 阐述/ 对/ TCCS/ 时间/ 、/ 概率/ 和/ 代价/ 等/ QoS/ 建模/ 和/ 分析/ 能力/ 的/ 扩展/ ,/ 及其/ 在/ 服务/ 组合/ 中/ 的/ 应用/ ./ 根据/ TPPPA/ 的/ 时间/ 概率/ 代价/ 迁移/ 语义/ ,/ 可以/ 构造/ 出/ TPPPA/ 进程/ 表达式/ 对应/ 的/ 时间/ 概率/ 代价/ 状态/ 空间/ ,/ 也/ 即/ 时间/ 概率/ 代价/ 引导/ 图/ TPPDG/ ,/ 进而/ 可以/ 在/ TPPDG/ 中/ 进行/ 服务/ 组合/ 的/ 时间/ 、/ 概率/ 和/ 代价/ 等/ QoS/ 分析/ ./ 下面/ 先/ 介绍/ 时间/ 概率/ 代价/ 状态/ 空间/ 的/ 构造/ ./ 4.3/ ./ 1/ 时间/ 概率/ 代价/ 状态/ 空间/ 构造/ 由/ 上述/ Web/ 服务/ 组合/ 实例/ 的/ TPPPA/ 模型/ 可以/ 看出/ ,/ TravelBookingSystem/ 由子/ 服务/ TAgent/ 、/ AirlineA/ 、/ AirlineB/ 和/ Hotel/ 并发/ 组合而成/ ./ Travel/ -/ BookingSystem/ 的/ 状态/ 空间/ 应是/ 4/ 个子/ 服务/ 状态/ 空间/ 的/ 笛卡儿/ 积/ ,/ 根据/ 进程/ 代数/ 已有/ 算法/ ,/ 可以/ 求解/ 出/ TravelBookingSystem/ 的/ 状态/ 空间/ ,/ 但是/ 算法/ 的/ 时间/ 和/ 空间/ 复杂度/ 将/ 随子/ 服务/ 的/ 增多/ 呈/ 指数/ 级/ 增长/ ,/ 并/ 可能/ 带来/ 状态/ 空间/ 爆炸/ 问题/ ./ 为此/ 本文/ 提出/ 一种/ 简化/ 方法/ 来/ 处理/ 此/ 问题/ ./ 考虑/ 基于/ BPEL/ 的/ 编制/ 服务/ 组合/ ,/ 总/ 存在/ 着/ 一个/ BPEL/ 组合/ 流程/ ,/ 该/ BPEL/ 组合/ 流程/ 运行/ 在/ BPEL/ 执行/ 引擎/ 上/ ,/ 用于/ 协调/ 各子/ 服务/ 所有/ 操作/ 的/ 执行/ ,/ 体现/ 了/ 组合/ 服务/ 的/ 行为/ ./ 为/ 降低/ 组合/ 服务/ 状态/ 空间/ 处理/ 的/ 时间/ 和/ 空间/ 复杂度/ ,/ 使/ 状态/ 空间/ 的/ 构造/ 在/ 有限/ 时间/ 空间/ 内/ 完成/ ,/ 本文/ 提出/ 对/ 组合/ 服务/ 状态/ 空间/ 的/ 分析/ 转化/ 为/ 对/ BPEL/ 组合/ 流程/ 的/ 分析/ ./ 此外/ ,/ 本文/ 给出/ 的/ 旅行/ 订票/ 系统/ 案例/ 中/ ,/ 组合/ 流程/ 与/ 代理服务/ TAgent/ 的/ 流程/ 是/ 一致/ 的/ ,/ 因而/ 基于/ TAgent/ 的/ 流程/ 来/ 说明/ 状态/ 空间/ 的/ 分析/ 问题/ ./ 为此/ ,/ 需/ 把/ 其它/ 子/ Web/ 服务/ 相关/ 信息/ 映射/ 到/ TAgent/ 的/ TPPPA/ 模型/ 中/ ./ 由于/ 假设/ 子/ Web/ 服务/ 之间/ 是/ 同步/ 通信/ ,/ 子/ Web/ 服务/ 之间/ 交互/ 时/ 的/ 延时/ 和/ 概率/ 相同/ ,/ 因此/ 无须/ 映射/ 时间/ 信息/ 和/ 概率/ 信息/ ./ 对于/ 带宽/ 代价/ ,/ 由于/ 两个/ Web/ 服务/ 之间/ 的/ 一个/ 收发/ 消息/ 行为/ 建模/ 为/ 一个/ 功能/ 动作/ ,/ 而/ TAgent/ 已/ 包含/ 了/ 与/ 其它/ 子/ Web/ 服务/ 的/ 消息/ 交互/ ,/ 因此/ 其它/ 子/ Web/ 服务/ 的/ 带宽/ 代价/ 无须/ 映射/ 到/ TAgent/ 中/ ./ 对于/ 计时/ 服务/ 代价/ ,/ 则/ 需/ 映射/ 到/ TAgent/ 的/ TPPPA/ 模型/ 中/ ./ 当/ AirlineA/ 与/ TAgent/ 交互/ 时/ ,/ 把/ AirlineA/ 的/ 单位/ 时间/ 成本/ 映射/ 到/ TAgent/ 中/ ,/ 则/ 此时/ TAgent/ 的/ 单位/ 时间/ 成本/ 为/ 8/ (/ 其中/ 5/ 为/ TAgent/ 自身/ 的/ 单位/ 时间/ 成本/ ,/ 3/ 为/ AirlineA/ 的/ 单位/ 时间/ 成本/ )/ ./ 同理/ ,/ 当/ AirlineB/ 与/ TAgent/ 交互/ 时/ ,/ 映射/ 后/ 的/ TAgent/ 单位/ 时间/ 成本/ 为/ 9/ (/ 其中/ 4/ 为/ AirlineB/ 的/ 单位/ 时间/ 成本/ )/ ;/ 当/ TAgent/ 与/ Hotel/ 交互/ 时/ ,/ 映射/ 后/ 的/ TAgent/ 单位/ 时间/ 成本/ 为/ 7/ (/ 其中/ 2/ 为/ Hotel/ 的/ 单位/ 时间/ 成本/ )/ ./ 下面/ 给出/ 映射/ 了/ 代价/ 信息/ 后/ 的/ TAgent/ 的/ TPPPA/ 进程/ 表达式/ ,/ 其中/ :/ (/ [/ 10/ ]/ ,/ 10/ ,/ 1/ ,/ 0/ ,/ 80/ )/ 是/ 当/ AirlineA/ 与/ TAgent/ 交互/ 时/ ,/ 映射/ 后/ 的/ 时间/ 概率/ 代价/ 动作/ ;/ (/ [/ 9/ ]/ ,/ 9/ ,/ 1/ ,/ 0/ ,/ 81/ )/ 是/ 当/ AirlineB/ 与/ TAgent/ 交互/ 时/ ,/ Page12/ 映射/ 后/ 的/ 时间/ 概率/ 代价/ 动作/ ;/ (/ [/ 5/ ]/ ,/ 5/ ,/ 1/ ,/ 0/ ,/ 35/ )/ 是/ 当/ Hotel/ 与/ TAgent/ 交互/ 时/ ,/ 映射/ 后/ 的/ 时间/ 概率/ 代价/ 动作/ ./ 经过/ 信息/ 映射/ 的/ TAgent/ 的/ TPPPA/ 表达式/ 如下/ :/ procTAgent/ =/ (/ BkRq/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ / (/ FtAQy/ |/ FtBQy/ ,/ 1/ ,/ 1/ ,/ 2/ ,/ 0/ )/ / TAgent1procTAgent1/ =/ (/ FtAIf/ |/ BTmOt/ ,/ 1/ ,/ 0.14/ ,/ 1/ ,/ 0/ )/ / TAgent2/ +/ procTAgent2/ =/ (/ FtARs/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ / TAgent6procTAgent3/ =/ (/ FtARs/ ,/ 1/ ,/ 0.5/ ,/ 1/ ,/ 0/ )/ / TAgent6/ +/ (/ FtBRs/ ,/ 1/ ,/ 0.5/ ,/ procTAgent4/ =/ (/ FtBRs/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ / TAgent7procTAgent5/ =/ (/ BkRf/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ / TAgentprocTAgent6/ =/ (/ [/ 10/ ]/ ,/ 10/ ,/ 1/ ,/ 0/ ,/ 80/ )/ / (/ FtAAk/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ / (/ HtQy/ ,/ 1/ ,/ procTAgent7/ =/ (/ [/ 9/ ]/ ,/ 9/ ,/ 1/ ,/ 0/ ,/ 81/ )/ / (/ FtBAk/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ / (/ HtQy/ ,/ 1/ ,/ 1/ ,/ procTAgent8/ =/ (/ HtIf/ ,/ 1/ ,/ 0.9/ ,/ 1/ ,/ 0/ )/ / TAgent10/ +/ (/ HtTmOt/ ,/ 1/ ,/ 0.1/ ,/ procTAgent9/ =/ (/ HtIf/ ,/ 1/ ,/ 0.9/ ,/ 1/ ,/ 0/ )/ / TAgent10/ +/ (/ HtTmOt/ ,/ 1/ ,/ 0.1/ ,/ procTAgent10/ =/ (/ HtRs/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ / (/ [/ 5/ ]/ ,/ 5/ ,/ 1/ ,/ 0/ ,/ 35/ )/ / (/ HtAk/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ / procTAgent11/ =/ (/ FtACl/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ / (/ AClAk/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ -/ 80/ )/ / TAgent5procTAgent12/ =/ (/ FtBCl/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ )/ / (/ BClAk/ ,/ 1/ ,/ 1/ ,/ 1/ ,/ -/ 81/ )/ / TAgent5/ 下面/ 讨论/ 时间/ 概率/ 代价/ 状态/ 空间/ 的/ 构造/ 算法/ ./ 如前所述/ ,/ TPPPA/ 进程/ 表达式/ 对应/ 的/ 时间/ 概率/ 代价/ 状态/ 空间/ 实际上/ 是/ 一个/ 时间/ 概率/ 代价/ 引导/ 图/ TPPDG/ ./ 对/ TAgent/ 中/ 的/ 并发/ 动作/ 使用/ 并发/ 算子/ “/ |/ ”/ 表示/ 后/ ,/ 并发/ 动作/ 可/ 看做/ 一个/ 动作/ ,/ 比如/ TAgent/ 进程/ 表达式/ 中/ 的/ (/ FtAQy/ |/ FtBQy/ ,/ 1/ ,/ 1/ ,/ 2/ ,/ 0/ )/ ./ 由于/ TAgent/ 是/ 单个/ 原子/ 服务/ ,/ 在/ 把/ 并发/ 动作/ 使用/ 并发/ 算子/ “/ |/ ”/ 表示/ 成/ 单个/ 动作/ 后/ ,/ 其/ 程序逻辑/ 上仅/ 存在/ 3/ 种/ 基本/ 结构/ :/ 顺序/ 、/ 选择/ 、/ 循环/ ,/ 不妨/ 设其/ 进程/ 表达式/ 为/ E/ =/ ap1E/ +/ ap2E/ +/ …/ +/ apnE/ ,/ 其中/ api/ (/ i/ =/ 1/ ,/ 2/ ,/ …/ ,/ n/ )/ ./ 为/ 时间/ 概率/ 代价/ 动作/ ,/ E/ 为/ 以/ 递归/ 形式/ 定义/ 的/ 只/ 含有/ 顺序/ 动作/ 前缀/ 算子/ 和/ 选择/ 算子/ 两种/ 基本/ 结构/ 的/ 进程/ 表达式/ ,/ 而/ 循环/ 结构/ 体现/ 在/ 表达式/ 的/ 等式/ 结构/ 中/ ./ 进程/ 的/ 初始/ 表达式/ 对应/ 进程/ 的/ 初始状态/ ,/ 在/ TPPDG/ 中/ 对应/ 根/ 节点/ ,/ 蕴含/ 了/ 进程/ 所有/ 可能/ 的/ 演化/ ./ 进程/ 执行/ 一个/ 功能/ 动作/ 或/ 时间/ 动作/ ,/ 则/ 对应/ 一次/ 状态/ 迁移/ ,/ 在/ TPPDG/ 中/ 对应/ 一条/ 边/ ./ 进程/ 从/ 初始状态/ 开始/ ,/ 在/ 执行/ 动作/ 的/ 过程/ 中/ 会/ 形成/ 不同/ 的/ 状态/ ,/ 这些/ 状态/ 对应/ 进程/ 演化过程/ 中/ 不同/ 的/ 进程/ 表达式/ ,/ 在/ TPPDG/ 中/ 对应/ 不同/ 的/ 状态/ 节点/ ./ 另外/ ,/ TPPDG/ 构造/ 算法/ 首先/ 对/ 进程/ 表达式/ 中以/ 关键字/ “/ proc/ ”/ 标注/ 的/ 表达式/ 代理/ 进行/ 注册/ ./ 然后/ 在/ 扫描/ 进程/ 表达式/ 生成/ 状态/ 节点/ 的/ 过程/ 中/ ,/ 如果/ 首次/ 遇到/ 注册/ 过/ 的/ 进程/ 表达式/ 代理/ ,/ 则/ 为/ 其/ 创建/ 一个/ 状态/ 节点/ ,/ 并/ 把/ 创建/ 的/ 状态/ 节点/ 名/ 标记/ 到/ 该/ 进程/ 表达式/ 代理/ ./ 以后/ 再/ 扫描/ 到/ 该/ 进程/ 表达式/ 代理/ 时/ ,/ 则/ 无须再/ 为/ 其/ 创建/ 状态/ 节点/ ,/ 仅/ 需为/ 其/ 创建/ 一条/ 边/ ./ 算法/ 以/ 进程/ 表达式/ 中/ 的/ “/ +/ ”/ 算子/ 为/ 分界/ ,/ 深度/ 优先/ 递归/ 地/ 构造/ TPPDG/ ./ 下面/ 给出/ TPPDG/ 的/ 生成/ 算法/ ./ 算法/ 1/ ./ TPPDG/ 构造/ 算法/ ./ GeneratePTDG/ (/ E/ ,/ &/ ptRootT/ )/ 输入/ :/ E/ ,/ aTPPPAexpression/ 输出/ :/ ptRoot/ ,/ apointerpointingtoanode/ 功能/ :/ createE/ ’/ sTPPDGwhoserootnodepointedby1/ ./ RegisternamesforallE/ ’/ sprocessexpressionagents2/ ./ Createtherootnodesc0/ =/ (/ s0/ ,/ 0/ ,/ 0/ ,/ 0/ )/ andtagitsptRootpointtosc0/ ;/ 3/ ./ CallGenerateNodesEdges/ (/ sc0/ ,/ E/ )/ ;/ GenerateNodesEdges/ (/ sck/ ,/ E/ )/ 输入/ :/ sck/ ,/ atemporalcostnode/ ,/ 功能/ :/ CreateTPPDGstartingfromnodesckandmeetingE1/ ./ ScanE/ ;/ 2/ ./ Forevery/ α/ iE/ ,/ i/ =/ 1/ ,/ 2/ ,/ …/ ,/ n/ ,/ separatedbychoice3/ ./ {/ If/ (/ E/ =/ 0/ )/ or/ (/ α/ i/ =/ 0/ )/ thencontinue/ ;/ 4/ ./ If/ (/ Edoesnotmatchanyregisteredprocess5/ ./ CreateanodesiforE/ ;/ 6/ ./ ElseiftheregisteredprocessagentmatchedtoE7/ ./ CreateanodesiforEandtagnamesiforthe8/ ./ Createedgesk9/ ./ If/ (/ Ematchestotherootnode/ )/ 10/ ./ Createedgesk11/ ./ CallGenerateNodesEdges/ (/ sci/ ,/ E/ )/ recursively/ ;/ }/ 算法/ 1/ 生成/ 的/ TAgent/ 的/ TPPDG/ 如图/ 3/ 所示/ ./ 图/ 3/ 实际上/ 是/ 一个/ 边上/ 有/ 多重/ 权值/ 的/ 带权/ 有向图/ ,/ 边上/ 的/ 权值/ 包括/ 时间/ 、/ 概率/ 、/ 功能/ 代价/ 、/ 计时/ 代价/ ./ 这些/ 边/ 分为/ 两种/ 类型/ :/ 实线/ 所示/ 的/ 边/ 对应/ 功能/ 动作/ 迁移/ ,/ 其/ 时间/ 为/ 1/ 和/ 计时/ 代价/ 为/ 0/ ;/ 虚线/ 所示/ 的/ 边/ 对应/ 时间/ 动作/ ,/ 其/ 功能/ 代价/ 为/ 0/ ./ 另外/ ,/ 点/ 虚线/ 对应/ 循环/ 结构/ ./ 设/ TPPPA/ 表达式/ 含有/ n/ 个/ 动作/ ,/ 因为/ 算法/ 1/ 需要/ 为/ 每个/ 动作/ 创建/ 一条/ 边/ ,/ 则/ 算法/ 的/ 时间/ 复杂度/ 为/ O/ (/ n/ )/ ./ Page134/ ./ 3.2/ 基于/ TPPDG/ 的/ 时间/ 、/ 概率/ 、/ 代价/ 分析/ 本/ 节/ 讨论/ 基于/ TPPDG/ 的/ 时间/ 、/ 概率/ 、/ 代价/ 分析/ 算法/ ./ 由于/ 在/ TPPDG/ 中/ 从/ 初始/ 节点/ 出发/ 到达/ 某个/ 用户/ 感兴趣/ 的/ 状态/ 节点/ 可能/ 存在/ 多条/ 路径/ ,/ 因此/ 需/ 要求/ 出/ 到达/ 该/ 节点/ 的/ 所有/ 路径/ ./ 用户/ 感兴趣/ 的/ 状态/ 是/ 通过/ 特定/ 事件/ 来/ 检测/ 到/ 的/ ,/ 如/ 用户/ 通常/ 感兴趣/ 的/ 服务/ 组合/ 成功/ 的/ 状态/ 就是/ 通过/ TAgent/ 向/ Client/ 发送/ 的/ 消息/ BkAk/ 检测/ 到/ 的/ ./ 因此/ ,/ 算法/ 通过/ 在/ TPPDG/ 中/ 查找/ 消息/ BkAk/ 及其/ 引发/ 迁移/ 后/ 的/ 状态/ 节点/ ,/ 就/ 可/ 查找/ 到/ 用户/ 感兴趣/ 的/ 服务/ 组合/ 成功/ 状态/ ./ 算法/ 开始/ 时/ 初始化/ 一个/ 堆栈/ S/ 和/ 一个/ 路径/ 数组/ arrPath/ ,/ 在/ 算法/ 深度/ 优先/ 遍历/ TPPDG/ 的/ 过程/ 中/ 把/ 经过/ 的/ 状态/ 节点/ 压入/ 堆栈/ S/ 中/ ,/ 并/ 把/ 只有/ 一个/ 出/ 分支/ 的/ 状态/ 节点/ 和/ 所有/ 出/ 分支/ 都/ 遍历/ 过/ 的/ 状态/ 节点/ 标记/ 为/ 已/ 遍历/ ,/ 当/ 遇到/ 特定/ 消息/ aOK/ (/ 本例/ 对应/ BkAk/ )/ 时/ ,/ 其/ 引发/ 迁移/ 后/ 的/ 状态/ 即/ 为/ 所求/ 状态/ ./ 此时/ 堆栈/ S/ 中/ 的/ 状态/ 节点/ 序列/ 即/ 为/ 一条/ 从/ 初始状态/ 出发/ 到达/ 所求/ 状态/ 的/ 路径/ ,/ 算法/ 把/ 此时/ 的/ 堆栈/ S/ 复制/ 作为/ 出参/ arrPath/ 的/ 一个/ 元素/ ./ 然后/ 对/ S/ 中/ 的/ 节点/ 出栈/ ,/ 对/ 未/ 标记/ 已/ 遍历/ 的/ 节点/ 继续/ 深度/ 优先/ 遍历/ ,/ 从而/ 求/ 出/ 所有/ 从/ 初始状态/ 出发/ 到达/ 所求/ 状态/ 的/ 路径/ ,/ 并/ 一一/ 复制到/ arrPath/ ./ 下面/ 算法/ 2/ 求解/ 到达/ 特定/ 状态/ 的/ 所有/ 路径/ ./ 算法/ 3/ 用于/ 计算/ 到达/ 特定/ 状态/ 的/ 每条/ 路径/ 的/ 路径/ 时间/ 、/ 路径/ 概率/ 、/ 路径/ 功能/ 成本/ 、/ 路径/ 计时/ 成本/ ./ 算法/ 4/ 用于/ 筛选/ 符合/ 特定/ 时间/ 、/ 概率/ 和/ 代价/ 约束/ 的/ 路径/ ./ 算法/ 5/ 用于/ 从/ 符合/ 约束/ 的/ 路径/ 中/ 选择/ 时间/ 、/ 概率/ 或/ 代价/ 优化/ 的/ 路径/ ,/ 这样/ 的/ 路径/ 将/ 引导/ 优化/ 的/ 服务/ 组合/ ./ 算法/ 2/ ./ 路径/ 生成/ 算法/ ./ PathGeneration/ (/ ptRoot/ ,/ aOK/ ,/ &/ arrPath/ )/ 输入/ :/ ptRoot/ :/ apointerpointingrootofTPPDG/ ,/ 输出/ :/ arrPath/ :/ anarrayofpathesbywhichtoreach/ 功能/ :/ InaTPPDGwhoserootpointedbyptRoot/ ,/ there1/ ./ InitializeStack/ (/ S/ )/ ;/ InitializeArray/ (/ arrayPath/ )/ ;/ 2/ ./ MarkptRoottravelled/ ;/ Push/ (/ ptRoot/ ,/ S/ )/ ;/ 3/ ./ WhilenotEmpty/ (/ S/ )/ do4/ ./ {/ TPPPArent/ =/ GetTop/ (/ S/ )/ ;/ 5/ ./ if/ (/ allchildrenofTPPPArenthavebeen6/ ./ else/ {/ ptChild/ =/ Getnon/ -/ travelledchildof7/ ./ if/ (/ ptChild/ =/ =/ NIL/ )/ {/ Pop/ (/ S/ )/ ;/ continue/ ;/ }/ 8/ ./ else/ {/ markptChildtravelled/ ;/ }/ 9/ ./ While/ (/ ptChild/ !/ =/ ptRoot/ )/ 10/ ./ {/ Push/ (/ ptChild/ ,/ S/ )/ ;/ 11/ ./ if/ (/ ptChildhasonlychild/ )/ {/ markptChild12/ ./ if/ (/ aOKisthemessageoftheedgebetween13/ ./ {/ rP/ =/ TPPPArent/ ./ r/ ;/ copySasanelementPage1414/ ./ else/ {/ ptChild/ =/ GetachildofTPPPArent/ ;/ 15/ ./ }/ 16/ ./ }/ 算法/ 2/ 中/ 存在/ 两个/ 循环/ ,/ 外层/ 循环/ 用于/ 标记/ 遍历/ 的/ 节点/ ,/ 内层/ 循环/ 用于/ 遍历/ 以/ 匹配/ 特定/ 消息/ ./ 设/ TPPDG/ 中/ 顶点/ 数为/ m/ ,/ 则/ 算法/ 2/ 的/ 时间/ 复杂度/ 为/ O/ (/ m2/ )/ ./ 算法/ 3/ 为/ 算法/ 2/ 生成/ 的/ arrPath/ 中/ 的/ 每条/ 路径/ 计算/ 其/ 路径/ 时间/ 、/ 路径/ 概率/ 、/ 路径/ 功能/ 成本/ 和/ 路径/ 计时/ 成本/ ./ 算法/ 3/ ./ 路径/ 时间/ 、/ 概率/ 、/ 代价/ 计算/ ./ Path/ _/ Calculation/ (/ &/ arrPath/ )/ 输入/ // 输出/ :/ arrPath/ :/ anarrayofpath/ ./ 功能/ :/ Calculatetime/ ,/ probabilityandcostforpath/ ./ 1/ ./ For/ (/ i/ =/ 1/ ;/ i/ </ =/ arrPath/ ./ size/ (/ )/ ;/ i/ ++/ )/ {/ 2/ ./ {/ For/ (/ j/ =/ 1/ ;/ j/ </ =/ arrPath/ [/ i/ ]/ / Edge/ (/ )/ ;/ j/ ++/ )/ {/ 3/ ./ arrPath/ [/ i/ ]/ ./ ct/ +/ =/ arrPath/ [/ i/ ]/ / Edge/ [/ j/ ]/ ./ t/ ;/ 4/ ./ arrPath/ [/ i/ ]/ ./ cr/ +/ =/ arrPath/ [/ i/ ]/ / Edge/ [/ j/ ]/ ./ r/ ;/ 5/ ./ arrPath/ [/ i/ ]/ ./ cg/ +/ =/ arrPath/ [/ i/ ]/ / Edge/ [/ j/ ]/ ./ g/ ;/ 6/ ./ arrPath/ [/ i/ ]/ ./ ch/ +/ =/ arrPath/ [/ i/ ]/ / Edge/ [/ j/ ]/ ./ h/ ;/ 7/ ./ continue/ ;/ }/ 8/ ./ continue/ ;/ }/ 设/ 算法/ 2/ 生成/ 的/ 路径/ 有/ k/ 条/ ,/ 算法/ 3/ 顺序/ 对/ 每条/ 路径/ 求其/ 时间/ 、/ 概率/ 和/ 代价/ ./ 每条/ 路径/ 的/ 长度/ 最坏/ 情况/ 下/ 为/ 所有/ 的/ 边数/ n/ ,/ 则/ 时间/ 复杂度/ 为/ O/ (/ kn/ )/ ./ 算法/ 4/ 设置/ 了/ 时间/ 约束/ TC/ ,/ 概率/ 约束/ RC/ ,/ 功能/ 成本/ 约束/ GC/ ,/ 计时/ 成本/ 约束/ HC/ ,/ 用于/ 检查/ 算法/ 2/ 生成/ 的/ 所有/ 路径/ arrPath/ 是否/ 满足/ 这些/ 约束/ ,/ 对/ 不/ 满足/ 约束/ 的/ 路径/ 进行/ 标记/ ./ 算法/ 4/ ./ 路径/ 约束/ 检查/ 算法/ ./ CheckPath/ (/ TC/ ,/ RC/ ,/ GC/ ,/ HC/ ,/ &/ arrPath/ )/ 输入/ :/ TC/ :/ timeconstraintforpath/ ;/ 输出/ :/ arrPath/ :/ anarrayofpathmeetingTC/ ,/ RC/ ,/ GC/ ,/ HC/ 功能/ :/ CheckandtagallpathofarrPaththatdonotmeet1/ ./ For/ (/ i/ =/ 1/ ;/ i/ </ =/ arrPath/ ./ size/ (/ )/ ;/ i/ ++/ )/ 2/ ./ {/ if/ (/ arrPath/ [/ i/ ]/ ./ ct/ >/ TC/ )/ tagarrPath/ [/ i/ ]/ notpass3/ ./ if/ (/ arrPath/ [/ i/ ]/ ./ cr/ </ RC/ )/ tagarrPath/ [/ i/ ]/ notpass4/ ./ if/ (/ arrPath/ [/ i/ ]/ ./ cg/ >/ GC/ )/ tagarrPath/ [/ i/ ]/ notpass5/ ./ if/ (/ arrPath/ [/ i/ ]/ ./ ch/ >/ HC/ )/ tagarrPath/ [/ i/ ]/ notpass6/ ./ continue/ ;/ }/ 设/ 算法/ 2/ 生成/ 的/ 路径/ 有/ k/ 条/ ,/ 算法/ 4/ 顺序/ 对/ 每条/ 路径/ 进行/ 约束/ 检查/ ,/ 则/ 时间/ 复杂度/ 为/ O/ (/ k/ )/ ./ 算法/ 5/ 设置/ 了/ 一个/ 标志/ flag/ ,/ 用于/ 标识/ 时间/ 优先/ ,/ 或/ 概率/ 优先/ ,/ 或/ 功能/ 成本/ 优先/ ,/ 或/ 计时/ 成本/ 优先/ 的/ 路径/ ,/ 从/ 算法/ 4/ 筛选/ 出/ 的/ 满足/ 约束/ 路径/ 中/ 依据/ flag/ 选择/ 路径/ ./ 算法/ 5/ ./ 路径/ 选择/ 算法/ ./ PathSelection/ (/ arrPath/ ,/ flag/ ,/ &/ path/ )/ 输入/ :/ arrPath/ :/ anarrayofpathesmeetingallcon/ -/ 输出/ :/ path/ :/ apathwithflagfirst/ 功能/ :/ OutputpathwithflagfirstfromarrPath1/ ./ Min/ =/ INFINITY/ ;/ index/ =/ 0/ ;/ 2/ ./ For/ (/ i/ =/ 1/ ;/ i/ </ =/ arrPath/ ./ size/ (/ )/ ;/ i/ ++/ )/ {/ 3/ ./ If/ (/ flag/ =/ =/ TOarrPath/ [/ i/ ]/ ./ ct/ </ Min/ )/ {/ Min/ =/ arrPath/ [/ i/ ]/ ./ ct/ ;/ index/ =/ i/ ;/ }/ 4/ ./ Elseif/ (/ flag/ =/ =/ RO/ &&/ arrPath/ [/ i/ ]/ ./ cr/ </ Min/ )/ 5/ ./ Elseif/ (/ flag/ =/ =/ GO/ &&/ arrPath/ [/ i/ ]/ ./ cg/ </ Min/ )/ 6/ ./ Elseif/ (/ flag/ =/ =/ HO/ &&/ arrPath/ [/ i/ ]/ ./ ch/ </ Min/ )/ 7/ ./ path/ =/ arrPath/ [/ i/ ]/ ./ 4.3/ ./ 3Web/ 服务/ 组合/ QoS/ 分析/ 实例/ 从/ Client/ 的/ 角度/ 而言/ ,/ 关注/ 两个/ 状态/ :/ 服务/ 组合/ 成功/ 状态/ 和/ 服务/ 组合/ 失败/ 状态/ ./ 这/ 两个/ 状态/ 分别/ 对应/ 两个/ 事件/ :/ 事件/ BkAk/ 对应/ 服务/ 组合/ 成功/ 状态/ s12/ ,/ 事件/ BkRf/ 对应/ 服务/ 组合/ 失败/ 状态/ s16/ ./ 把/ 这/ 两个/ 事件/ 分别/ 运用/ 到/ 上述/ 分析/ 算法/ ,/ 得到/ 如表/ 2/ 所示/ 的/ 各条/ 路径/ (/ 为/ 阐述/ 方便/ ,/ 以/ 状态/ 序列/ 来/ 表示/ 路径/ )/ 及其/ 时间/ ct/ 、/ 概率/ cr/ 、/ 功能/ 成本/ cg/ 和/ 计时/ 成本/ ch/ ./ 路径/ 1S0S1S2S3S4S5S6S7S8S9S10S11S12250/ ./ 126111152S0S1S2S17S4S5S6S7S8S9S10S11S12250/ ./ 252121153S0S1S2S17S18S19S20S21S8S9S10S11S12240/ ./ 252121164S0S1S2S24S18S19S20S21S8S9S10S11S12240/ ./ 216111165S0S1S2S3S4S5S6S7S13S14S15S16200/ ./ 0141006S0S1S2S17S4S5S6S7S13S14S15S16200/ ./ 0281107S0S1S2S17S18S19S20S21S22S23S15S16190/ ./ 0281108S0S1S2S24S18S19S20S21S22S23S15S16190/ ./ 0241009S0S1S2S15S16/ 其中/ ,/ 路径/ 1/ ~/ 4/ 都/ 可/ 到达/ 服务/ 组合/ 成功/ 状态/ ,/ 路径/ 5/ ~/ 9/ 都/ 可/ 到达/ 服务/ 组合/ 失败/ 状态/ ./ 可/ 利用/ 上述/ 路/ Page15/ 径/ 信息/ 分析/ 服务/ 组合/ 的/ 响应/ 时间/ 、/ 可靠性/ 、/ 代价/ 和/ 关键/ 路径/ ./ (/ 1/ )/ 服务/ 组合/ 响应/ 时间/ 分析/ 服务/ 组合/ 成功/ 时/ 的/ 最慢/ 响应/ 时间/ 为/ 25/ ,/ 可/ 由/ 路径/ 1/ 或/ 路径/ 2/ 达到/ ,/ 这是/ 由于/ TAgent/ 选择/ 与/ AirlineB/ 和/ Hotel/ 组合/ ;/ 服务/ 组合/ 成功/ 时/ 的/ 最快/ 响应/ 时间/ 为/ 24/ ,/ 可/ 由/ 路径/ 3/ 或/ 路径/ 4/ 达到/ ,/ 这是/ 由于/ TAgent/ 选择/ 与/ AirlineA/ 和/ Hotel/ 组合/ ./ 服务/ 组合/ 成功/ 时/ 的/ 平均/ 响应/ 时间/ 为/ ct/ _/ suc/ _/ ave/ =/ ∑/ 4/ 服务/ 组合/ 失败/ 时/ 的/ 平均/ 响应/ 时间/ 为/ ct/ _/ fail/ _/ ave/ =/ ∑/ 9/ 服务/ 组合/ 平均/ 响应/ 时间/ 为/ (/ 2/ )/ 服务/ 组合/ 可靠性/ 分析/ 服务/ 组合/ 成功/ 的/ 概率/ 为/ 服务/ 组合/ 失败/ 的/ 概率/ 为/ 在/ QoS/ 驱动/ 的/ Web/ 服务/ 组合/ 研究/ 中/ [/ 10/ -/ 12/ ]/ ,/ Web/ 服务/ 组合/ 的/ 可靠性/ 指/ 的/ 是/ Web/ 服务/ 组合/ 成功/ 的/ 概率/ ,/ 因此/ ,/ 本例/ 中/ Web/ 服务/ 组合/ 的/ 可靠性/ 是/ 0.846/ ./ 服务/ 组合/ 平均/ 计时/ 代价/ 为/ 宽/ 成本/ 为/ (/ 3/ )/ 服务/ 组合/ 代价/ 分析/ 服务/ 组合/ 成功/ 和/ 失败/ 时/ 都/ 将/ 耗费/ 带宽/ ,/ 平均/ 带/ cg/ _/ ave/ =/ ∑/ 9/ 服务/ 组合/ 成功/ 时/ 的/ 最小/ 计时/ 代价/ 为/ 115/ ,/ 可/ 由/ 路径/ 1/ 或/ 路径/ 2/ 达到/ ,/ 这是/ 由于/ TAgent/ 选择/ 与/ AirlineA/ 组合/ ;/ 服务/ 组合/ 成功/ 时/ 的/ 最大/ 计时/ 代价/ 为/ 116/ ,/ 可/ 由/ 路径/ 3/ 或/ 路径/ 4/ 达到/ ,/ 这是/ 由于/ TAgent/ 选择/ 与/ AirlineB/ 组合/ ./ ch/ _/ suc/ _/ ave/ =/ ∑/ 4/ 服务/ 组合/ 失败/ 时/ 的/ 计时/ 代价/ 为/ 0/ ,/ 这/ 是因为/ 失败/ 时/ 不/ 计入/ 计时/ 代价/ ,/ 通过/ 补偿/ 操作/ 使得/ 计时/ 代价/ 为/ 0/ ./ 服务/ 组合/ 成功/ 时/ 的/ 平均/ 计时/ 代价/ 为务/ 组合/ 成功/ 状态/ ./ 到达/ 服务/ 组合/ 成功/ 状态/ 路径/ 1/ ~/ 4/ 都/ 可/ 到达/ 服/ (/ 4/ )/ 服务/ 组合/ 关键/ 路径分析/ 此处/ 的/ 关键/ 路径/ 指/ 的/ 是/ 影响/ 服务/ 组合/ 某些/ QoS/ 属性/ 的/ 路径/ ./ 运用/ 路径/ 约束/ 算法/ 或/ 路径/ 选择/ 算法/ ,/ 可以/ 遴选出/ 某些/ 感兴趣/ 的/ 关键/ 路径/ ,/ 这些/ 关键/ 路径/ 反映/ 了/ 用户/ 感兴趣/ 的/ QoS/ 组合/ 方案/ ./ 例如/ ,/ 当/ 时间/ 约束/ 设为/ 24/ ,/ 或/ 把/ 时间/ 作为/ 服务/ 选择/ 的/ 优先/ 考虑/ 因素/ 时/ ,/ 可/ 选出/ 路径/ 3/ 和/ 路径/ 4/ ,/ 表明/ 是/ TAgent/ 、/ AirlineA/ 、/ Hotel/ 组合/ ;/ 当/ 计时/ 代价/ 设为/ 115/ ,/ 或/ 把/ 计时/ 代价/ 作为/ 服务/ 选择/ 的/ 优先/ 考虑/ 因素/ 时/ ,/ 可/ 选出/ 路径/ 1/ 和/ 路径/ 2/ ,/ 表明/ 是/ TAgent/ 、/ AirlineB/ 、/ Hotel/ 组合/ ./ 因此/ ,/ 可以/ 在/ 服务/ 组合/ 系统/ 模型/ 中/ 分析/ 功能/ 、/ 时间/ 、/ 概率/ 、/ 代价/ 的/ 相关/ 性质/ 和/ 关键/ 路径/ ,/ 作为/ 服务/ 组合/ 实现/ 时/ 的/ 指导/ 或/ 参考/ ,/ 在/ 服务/ 组合/ 实现/ 时/ 重点/ 保障/ 关键/ 路径/ 中/ 动作/ 的/ 实现/ ./ 当/ 服务/ 组合/ 实现/ 后/ 进行/ 测试/ 和/ 试运行/ 时/ ,/ 可以/ 把/ 模型/ 中/ 的/ 时间/ 、/ 概率/ 、/ 代价/ 等/ QoS/ 参数/ 与/ 测试/ 和/ 运行/ 时/ 的/ 得到/ 的/ 参数/ 进行/ 对比/ ,/ 以此/ 来/ 验证/ 服务/ 组合/ 实现/ 是否/ 与/ 需求/ 和/ 预期/ 一致/ ./ 如果/ 不/ 一致/ ,/ 可/ 把/ 关键/ 路径/ 与/ 实际/ 的/ 服务/ 组合/ 消息/ 系列/ 进行/ 对比/ 来/ 发现/ 和/ 定位问题/ ./ 4.4/ UMV4WSC/ 工具/ 设计/ 基于/ 提出/ 的/ TPPPA/ 建模/ 和/ 分析方法/ ,/ 本/ 节/ 设计/ 一个/ Web/ 服务/ 组合/ 统一/ 建模/ 和/ 验证/ 工具/ UMV4WSC/ (/ UnifiedModelingandVerificationfroWebServicesComposition/ )/ ,/ 以/ 支持/ 基于/ TPPPA/ 的/ Web/ 服务/ 组合/ 建模/ 和/ 分析/ ./ 由于/ TPPPA/ 是/ 在/ 经典/ 进程/ 代数/ TCCS/ 上/ 的/ 时间/ 、/ 概率/ 和/ 代价/ 扩展/ ,/ 而/ CWB/ -/ NC/ 是/ TCCS/ 的/ 验证/ 工具/ ,/ 因此/ UMV4WSC/ 可/ 在/ CWB/ -/ NC/ 的/ 基础/ 上/ 相应/ 地/ 扩展/ 时间/ 、/ 概率/ 和/ 代价/ 等/ QoS/ 建模/ 和/ 分析/ 能力/ ./ CWB/ -/ NC/ 的/ 早期/ 版本/ 由/ 英国/ Edinburgh/ 大学/ 开发/ ,/ 最新/ 的/ 版本/ 由/ 美国/ StonyBrook/ 大学/ 维护/ ,/ 提供/ 了/ SML/ 和/ Java/ 两种/ 版本/ ,/ 支持/ 安全检查/ 、/ 行为/ 观察/ 、/ 互/ 模拟/ 验证/ 、/ 模型/ 检测/ ,/ 并/ 公开/ 了/ 源代码/ ,/ UMV4WSC/ 可/ 在/ 其/ 上/ 进行/ QoS/ 的/ 扩展/ ./ UMV4WSC/ 的/ 主要/ 架构/ 及其/ 各/ 组成部分/ 如图/ 4/ 虚线/ 内/ 所示/ ./ UMV4WSC/ 主要/ 由/ 4/ 个/ 模块/ 组成/ :/ 图形/ 用户/ 接口/ 模块/ 、/ 模型/ 提取/ 模块/ 、/ 功能分析/ 验证/ 模块/ 、/ QoS/ 分析/ 验证/ 模块/ ,/ 下面/ 分别/ 对/ 这/ 4/ 个/ 模块/ 的/ 功能/ 进行/ 说明/ :/ Page16/ (/ 1/ )/ 图形/ 用户/ 接口/ 模块/ ./ 该/ 模块/ 为/ 用户/ 提供/ 图形化/ 的/ 操作界面/ ./ 用户/ 可以/ 按照/ TPPPA/ 的/ 建模/ 方法/ 来/ 建模/ WSC/ ,/ 并/ 把/ 建立/ 的/ 模型/ 保存/ 为/ 文本文件/ ./ 用户/ 通过/ 该/ 模块/ 可/ 输入/ 和/ 编辑/ TPPPA/ 表达式/ ,/ 并/ 保存/ 为/ TPPPA/ 文件/ ./ 也/ 可/ 把/ 建立/ 的/ TPPPA/ 文件/ 导入到/ UMV4WSC/ 中/ ,/ 通过/ 该/ 模块/ ,/ 用户/ 还/ 可以/ 启动/ 功能分析/ 验证/ 、/ QoS/ 分析/ 验证/ 、/ 以及/ 显示/ 分析/ 验证/ 的/ 结果/ 等/ ./ (/ 2/ )/ 模型/ 提取/ 模块/ ./ 如果/ 把/ TPPPA/ 模型/ 中/ 的/ 时间/ 、/ 概率/ 和/ 代价/ 信息/ 忽略/ ,/ 则/ 可/ 得到/ 一个/ TCCS/ 模型/ ./ 该/ 模块/ 可/ 从/ TPPPA/ 模型/ 中/ 提取/ TCCS/ 模型/ ,/ 用于/ 功能分析/ 和/ 验证/ ,/ 或/ 直接/ 把/ TPPPA/ 模型/ 用于/ QoS/ 分析/ 和/ 验证/ ./ (/ 3/ )/ 功能分析/ 验证/ 模块/ ./ 该/ 模块/ 用于/ TCCS/ 模型/ 的/ 功能分析/ 和/ 验证/ ./ 该/ 模块/ 接受/ TCCS/ 模型/ 作为/ 输入/ ,/ 并/ 把/ 功能分析/ 和/ 验证/ 的/ 结果/ 通过/ 图形/ 用户/ 接口/ 模块/ 回显/ 给/ 用户/ ./ 该/ 模块/ 主要/ 是/ 集成/ CWB/ -/ NC/ 的/ 功能分析/ 和/ 验证/ 方法/ 和/ 工具/ ./ 图/ 4Web/ 服务/ 组合/ 统一/ 建模/ 和/ 验证/ 工具/ 架构/ 5/ 相关/ 工作/ (/ 4/ )/ QoS/ 分析/ 验证/ 模块/ ./ 该/ 模块/ 用于/ TPPPA/ 的/ QoS/ 分析/ 和/ 验证/ ./ 该/ 模块/ 接受/ TPPPA/ 模型/ 作为/ 输入/ ,/ 并/ 把/ QoS/ 分析/ 和/ 验证/ 的/ 结果/ 通过/ 图形/ 用户/ 接口/ 模块/ 回显/ 给/ 用户/ ./ 基于/ TPPPA/ 的/ QoS/ 分析/ 和/ 验证/ 支持/ TPPDG/ 状态/ 空间/ 生成/ ,/ 通过/ 遍历/ 状态/ 空间/ 来/ 进行/ 路径/ 检查/ 、/ QoS/ 计算/ 、/ QoS/ 约束/ 检查/ 、/ 路径/ 选择/ 等/ ./ 目前/ ,/ UMV4WSC/ 的/ 框架/ 和/ 设计/ 已经/ 完成/ ,/ 其/ Java/ 版本/ 正/ 处于/ 编码/ 实现/ 阶段/ ./ QoS/ 驱动/ 的/ Web/ 服务/ 组合/ 依据/ QoS/ 指标/ 从/ 多个/ 符合/ 功能/ 需求/ 的/ 组合/ 方案/ 中/ 选择/ Web/ 服务/ ,/ 以/ 构建/ QoS/ 优化/ 的/ Web/ 组合/ 方案/ ./ 代表性/ 的/ 工作/ 是/ Zeng/ 等/ 人/ [/ 13/ -/ 16/ ]/ 提出/ 的/ 在/ 服务/ 组合/ 的/ 实施/ 阶段/ ,/ 按/ 执行/ 时间/ 、/ 代价/ 、/ 可靠性/ 、/ 有效性/ 和/ 信誉/ 等/ QoS/ 指标/ 选择/ Web/ 服务/ 进行/ 服务/ 组合/ ,/ 其中/ 可靠性/ 、/ 维护性/ 和/ 信誉/ 本质/ 上/ 是/ 基于/ 概率/ 信息/ 的/ QoS/ 属性/ ./ 这类/ 工作/ 依据/ 流程/ 来/ 组合/ 服务/ ,/ 并/ 依据/ QoS/ 指标/ 来/ 选择/ 服务/ 进行/ 组合/ ./ 与/ 这类/ 工作/ 相比/ ,/ 本文/ 的/ 工作/ 则/ 主要/ 是/ 提出/ 支持/ 服务/ 组合/ 功能/ 和/ QoS/ 统一/ 建模/ 的/ 语言/ TPPPA/ ,/ 并/ 提出/ 基于/ TPPPA/ 的/ 服务/ 组合/ 功能/ 和/ QoS/ 统一/ 建模/ 和/ 分析方法/ ./ 本文/ 工作/ 在/ 服务/ 组合/ 的/ 模型/ 层面/ ,/ 通过/ 对/ 服务/ 组合/ 的/ 建模/ 和/ 分析/ ,/ 提前/ 对/ 组合/ 服务/ 的/ 功能/ 和/ QoS/ 属性/ 都/ 进行/ 了/ 分析/ 和/ 验证/ ,/ 并/ 提供/ 用户/ 感兴趣/ 的/ QoS/ 组合/ 方案/ ,/ 从而/ 在/ 模型/ 层面/ 保证/ 组合/ 服务/ 设计/ 的/ 功能/ 和/ QoS/ 都/ 满足/ 需求/ ,/ 进而/ 指导/ 系统/ 的/ 实现/ 以及/ 问题/ 的/ 发现/ 和/ 定位/ ,/ 有助于/ 降低/ Web/ 服务/ 实现/ 风险/ ,/ 提高/ 系统/ 的/ 可信性/ ./ 在/ 系统/ 模型/ 层面/ 统一/ 建模/ 和/ 分析/ 方面/ 的/ 相关/ 工作/ 主要/ 有/ 自动机/ 、/ Petri/ 网/ 、/ 进程/ 代数/ 等/ 方面/ 的/ 工作/ ./ 在/ 自动机/ 领域/ ,/ Behrmann/ 等/ 人/ [/ 17/ ]/ 提出/ 了/ 价格/ 时间/ 自动机/ ,/ 为/ 位置/ 和/ 边/ 联系/ price/ 参数/ ,/ 表示/ 所/ 占用/ 的/ 系统资源/ 的/ 价格/ ,/ 主要/ 用于/ 实时/ 系统/ 中/ 与/ 成本/ 相关/ Page17/ 的/ 调度/ 分析/ ./ Kwiatkowska/ 等/ 人/ [/ 18/ ]/ 在/ 概率/ 时间/ 自动机/ 中为/ 位边/ 联系/ 概率/ 参数/ ,/ 表示/ 动作/ 迁移/ 的/ 概率/ ,/ 主要/ 用于/ 网络协议/ 分析/ ./ 然而/ 这些/ 扩展/ 的/ 自动机/ 都/ 没有/ 讨论/ 组合/ 及/ 与/ 组合/ 相关/ 的/ 时间/ 、/ 概率/ 、/ 代价/ 问题/ ,/ 且/ 没有/ 在/ Web/ 服务/ 组合/ 上/ 应用/ ./ 在/ Petri/ 网/ 领域/ ,/ 随机/ Petri/ 网是/ 一种/ 经典/ 的/ 概率模型/ 系统/ ,/ 可/ 用于/ 性能/ 和/ 可靠性/ 的/ 评价/ ,/ 但/ 目前/ 未能/ 建模/ 代价/ [/ 19/ ]/ ./ Liu/ 等/ 人/ [/ 20/ ]/ 提出/ 价格/ 时间/ Petri/ 网/ ,/ 这些/ 扩展/ 的/ Petri/ 网为/ 每个/ 变迁/ 联系/ 时间/ 和/ 价格/ 参数/ ,/ 讨论/ 了/ 与/ 成本/ 相关/ 的/ 可达性/ 问题/ ,/ 但/ 没有/ 讨论/ 组合/ 问题/ ,/ 且/ 没有/ 在/ Web/ 服务/ 组合/ 上/ 应用/ ./ 由于/ Web/ 服务/ 组合/ 的/ 主要/ 特征/ 在于/ 组合/ ,/ 因而/ 同样/ 具有/ 组合/ 特征/ 的/ 进程/ 代数/ 成为/ 适合/ 建立/ 服务/ 组合/ 形式/ 模型/ 的/ 建模语言/ ./ 然而/ 目前/ 现有/ 进程/ 代数/ 对/ 服务/ 组合/ QoS/ 建模/ 和/ 分析/ 的/ 支持/ 尚/ 不/ 充分/ ./ 比如/ :/ 包括/ TCCS/ 在内/ 的/ 时间/ 进程/ 代数/ 主要/ 用于/ 实时/ 系统/ 超时/ (/ Timeout/ )/ 特性/ 的/ 建模/ ,/ 没有/ 涉及/ 到/ 累积/ 时间/ 的/ 建模/ 和/ 分析/ ,/ 且/ 不/ 支持/ 路径分析/ ,/ 没有/ 用于/ 服务/ 组合/ 建模/ [/ 2/ ]/ ./ 现有/ 随机/ 进程/ 代数/ SPA/ 可/ 对/ 功能/ 和/ 概率/ 统一/ 建模/ ,/ 但/ 不能/ 求解/ 到达/ 状态/ 的/ 路径/ 及其/ 概率/ ,/ 不能/ 建模/ 代价/ 问题/ ,/ 同样/ 也/ 不/ 支持/ 路径分析/ [/ 2/ ]/ ./ Eberbach/ 面向/ Agent/ 领域/ 在/ Pi/ 演算/ 上/ 扩展/ 了/ 代价/ 信息/ 而/ 提出/ 了/ cost/ 演算/ ,/ 但/ 不/ 支持/ 时间/ 建模/ ,/ 且/ cost/ 演算/ 是/ 专为/ Agent/ 定制/ 的/ ,/ 语法/ 复杂/ ,/ 没有/ 用于/ 且/ 不/ 适合/ 用于/ Web/ 服务/ 组合/ [/ 9/ ]/ ./ Lee/ 等/ 人/ [/ 21/ ]/ 提出/ 了/ 资源/ 进程/ 代数/ 用于/ 实时/ 嵌入式/ 系统/ 的/ 资源/ 建模/ ,/ 但/ 资源/ 进程/ 代数/ 主要/ 关注/ 嵌入式/ 系统/ 的/ 资源/ 约束/ ,/ 不能/ 建模/ 资源/ 的/ 累积/ 消耗/ ,/ 未能/ 应用/ 到/ Web/ 服务/ 组合/ 的/ 建模/ 中/ ./ 本文/ 提出/ 的/ TPPPA/ 支持/ 功能/ 、/ 时间/ 、/ 概率/ 、/ 代价/ 的/ 统一/ 建模/ 和/ 分析/ ,/ 扩展/ 了/ 基于/ 图/ 的/ 生成/ 和/ 搜索/ 方法/ ,/ 可/ 求解/ 到达/ 状态/ 的/ 所有/ 路径/ 及其/ 时间/ 、/ 概率/ 和/ 代价/ ,/ 建模/ 和/ 分析/ 更/ 全面/ 完整/ ,/ 适合/ 于/ Web/ 服务/ 组合/ 的/ 建模/ 和/ 分析/ ./ 在/ 软件体系结构/ 研究/ 领域/ ,/ Mei/ 总结/ 了/ 软件体系结构/ 设计/ 中/ 对/ 功能/ 和/ 非/ 功能/ 进行/ 统一/ 建模/ 的/ 相关/ 研究/ [/ 22/ ]/ ,/ 这些/ 研究/ 主要/ 是从/ 模型/ 、/ 方法/ 、/ 框架/ (/ framework/ )/ 的/ 角度/ 关注/ 功能/ 和/ 非/ 功能/ 统一/ 建模/ ./ 与/ 这些/ 工作/ 不同/ 的/ 是/ ,/ 本文/ 提出/ 了/ 一种/ 支持/ 功能/ 和/ QoS/ 统一/ 建模/ 的/ 语言/ TPPPA/ ,/ 以及/ 基于/ 该/ 语言/ 的/ 建模/ 方法/ 和/ 分析方法/ ./ 6/ 结束语/ Web/ 服务/ 组合/ 的/ QoS/ 是/ 影响/ 其/ 成功/ 的/ 关键因素/ 之一/ ,/ 在/ 服务/ 组合分析/ 和/ 设计阶段/ ,/ 建立/ 服务/ 组合/ 的/ 形式化/ 模型/ 并/ 分析/ 验证/ 其/ 功能/ 正确性/ 和/ QoS/ 可/ 满足/ 性/ ,/ 是/ 提高/ 组合/ 服务/ 可信性/ 的/ 重要/ 手段/ ./ 进程/ 代数/ 是/ 一种/ 适合/ 描述/ 服务/ 组合/ 的/ 形式化/ 建模语言/ ,/ 本文/ 针对/ 目前/ QoS/ 在/ Web/ 服务/ 组合/ 的/ 系统/ 建模/ 中/ 研究/ 不足/ 的/ 现状/ ,/ 在/ 现有/ 进程/ 代数/ 的/ 基础/ 上/ ,/ 尝试/ 提出/ 了/ 一种/ 时间/ 概率/ 代价/ 进程/ 代数/ TPPPA/ ,/ 给出/ 其/ 语法/ 和/ 语义/ ,/ 证明/ 其/ 具有/ 功能/ 、/ 时间/ 、/ 概率/ 和/ 代价/ 的/ 统一/ 建模/ 和/ 分析/ 能力/ ./ 给出/ 了/ 基于/ TPPPA/ 建模/ 和/ 分析/ 服务/ 组合/ 功能/ 和/ QoS/ 的/ 方法/ ,/ 实例/ 建模/ 和/ 分析/ 了/ Web/ 服务/ 组合/ 的/ 功能/ 、/ 可靠性/ 、/ 性能/ 和/ 代价/ ,/ 表明/ TPPPA/ 可/ 有效/ 支持/ 服务/ 组合/ 功能/ 和/ QoS/ 的/ 形式化/ 统一/ 建模/ 和/ 分析/ ,/ 提高/ Web/ 服务/ 组合/ 建模/ 和/ 分析/ 的/ 完整性/ 和/ 可信性/ ./ 本文/ 提出/ 的/ TPPPA/ 及其/ 统一/ 建模/ 和/ 分析方法/ ,/ 是/ 对/ 进程/ 代数/ 研究/ 领域/ 的/ 有益/ 补充/ ,/ 同时/ 也/ 为/ Web/ 服务/ 的/ 研究/ 提供/ 了/ 一种/ 新/ 的/ 视角/ 和/ 途径/ ./ 目前/ 正在/ 进行/ 的/ 工作/ 是/ 着手/ 实现/ UMV4WSC/ 工具/ ./ 另外/ ,/ 本文/ 假定/ 服务/ 之间/ 的/ 通信/ 是/ 同步/ 通信/ ,/ 而/ 实际/ 还/ 存在/ 异步/ 通信/ ,/ 对/ 异步/ 通信/ 的/ 建模/ 和/ 分析/ 是/ 本文/ 下/ 一步/ 考虑/ 的/ 工作/ ./ 同时/ ,/ 本文/ 假定/ Web/ 服务/ 之间/ 交互/ 无/ 异常情况/ ,/ 而/ 实际/ 还/ 存在/ 异常/ 处理/ 机制/ 、/ 补偿/ 机制/ 、/ 事件处理/ 机制/ 等/ 复杂/ 的/ 处理/ ,/ 如何/ 建模/ 这些/ 处理/ 也/ 是/ 本文/ 下/ 一步/ 考虑/ 的/ 工作/ ./ 致谢/ 感谢/ 作者/ 所在/ 教研室/ 讨论/ 班/ 老师/ 和/ 同学/ 的/ 支持/ 和/ 建议/ ,/ 感谢/ 审稿/ 专家/ 的/ 建设性/ 意见/ !/ 

