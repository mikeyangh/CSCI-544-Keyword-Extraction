Page1/ 类/ 规模/ 对/ 面向对象/ 度量/ 易变性/ 预测/ 能力/ 的/ 潜在/ 混/ 和/ 效应/ :/ 一个/ 元/ 分析/ 卢红敏/ 周毓明/ 徐宝文/ (/ 南京大学/ 计算机科学/ 与/ 技术/ 系/ 南京/ 210023/ )/ (/ 南京大学/ 软件/ 新/ 技术/ 国家/ 重点/ 实验室/ 南京/ 210023/ )/ 摘要/ 最近/ 的/ 研究/ 表明/ ,/ 类/ 的/ 规模/ 对/ 面向对象/ (/ OO/ )/ 度量/ 的/ 易变性/ 预测/ 能力/ 存在/ 很强/ 的/ 混/ 和/ 效应/ ,/ 因此/ 需要/ 将/ 其/ 作为/ 一个/ 混/ 和/ 变量/ 来/ 考虑/ ,/ 否则/ 有/ 可能/ 会/ 得到/ 误导性/ 的/ 结果/ ./ 然而/ ,/ 先前/ 的/ 研究/ 仅仅/ 分析/ 了/ 一个/ 软件系统/ ,/ 因此/ 不/ 清楚/ 这个/ 结论/ 是否/ 可以/ 推广/ 到/ 其他/ 系统/ 上/ ./ 为/ 解决/ 此/ 问题/ ,/ 文中/ 在/ 102/ 个/ Java/ 软件系统/ 的/ 基础/ 上/ 利用/ 元/ 分析/ 技术/ 检查/ 类/ 的/ 规模/ 对/ 55/ 个/ OO/ 度量/ 和/ 易变性/ 之间/ 关联/ 关系/ 的/ 潜在/ 混/ 和/ 效应/ ./ 对/ 每/ 一个/ OO/ 度量/ ,/ 首先/ 在/ 单个/ 系统/ 上/ 分别/ 计算/ 在/ 控制规模/ 和/ 不/ 控制规模/ 的/ 两种/ 情况/ 下/ 它/ 与/ 易变性/ 的/ 关联/ 强度/ ./ 然后/ ,/ 利用/ 随机/ 效应/ 元/ 分析模型/ 计算/ 在/ 所有/ 系统/ 上且/ 分别/ 在/ 这/ 两种/ 情况/ 下/ 它/ 与/ 易变性/ 的/ 平均/ 关联/ 强度/ ./ 最后/ ,/ 在/ 此基础/ 上/ 利用/ 统计/ 方法/ 检测/ 类/ 规模/ 的/ 潜在/ 混/ 和/ 效应/ ./ 实验/ 结果表明/ 类/ 规模/ 的/ 混/ 和/ 效应/ 是/ 广泛/ 存在/ 的/ ,/ 因此/ 在/ 验证/ OO/ 度量/ 的/ 易变性/ 预测/ 能力/ 时/ 确实/ 需要/ 将/ 其/ 作为/ 一个/ 混/ 和/ 变量/ 来/ 考虑/ ./ 关键词/ 类/ 规模/ ;/ 易变性/ ;/ 混/ 和/ 效应/ ;/ 面向对象/ ;/ 元/ 分析/ 1/ 引言/ 类/ 是/ 面向对象/ 系统/ 的/ 基本/ 模块/ ,/ 有/ 可能/ 随着/ 系统/ 的/ 演化/ 而/ 发生/ 变更/ ./ 在/ 先前/ 的/ 研究/ 中/ ,/ 研究/ 人员/ 试图/ 利用/ 面向对象/ (/ OO/ )/ 度量/ 来/ 预测/ 系统/ 中/ 容易/ 发生/ 变更/ 的/ 类/ [/ 1/ -/ 4/ ]/ ./ 预测/ 易变/ 的/ 类/ 具有/ 重要/ 的/ 实际/ 应用/ 价值/ ,/ 它/ 不仅/ 使得/ 开发人员/ 可/ 提早/ 采取/ 预防性/ 措施/ 来/ 降低/ 软件维护/ 的/ 成本/ 和/ 提高/ 软件/ 的/ 质量/ ,/ 而且/ 也/ 可以/ 使得/ 项目经理/ 能够/ 更/ 有效/ 地/ 分配/ 软件开发/ 资源/ ./ 对于/ 一个/ 给定/ 的/ OO/ 度量/ ,/ 人们/ 通常/ 用单/ 变量/ 回归方程/ 分析/ 它/ 与/ 类/ 的/ 易变性/ 之间/ 的/ 关系/ ./ 如果/ 该/ 度量/ 对应/ 的/ 回归系数/ 是/ 显著/ 的/ ,/ 那么/ 就/ 认为/ 它/ 与/ 易变性/ 之间/ 存在/ 关联/ ,/ 否则/ 认为/ 它们/ 不/ 相关/ [/ 2/ ,/ 4/ ]/ ./ 我们/ 最近/ 的/ 研究/ 结果/ 指出/ 上述/ 单/ 变量/ 分析方法/ 忽略/ 了/ 类/ 规模/ 的/ 混/ 和/ 效应/ ,/ 有/ 可能/ 会/ 得出/ 误导性/ 的/ 结论/ ,/ 其/ 原因/ 是/ OO/ 度量/ 通常/ 与/ 类/ 的/ 规模/ 之间/ 存在/ 高度/ 的/ 相关性/ [/ 5/ ]/ ./ 在/ Eclipse2/ ./ 0/ 系统/ 上/ ,/ 我们/ 利用/ 统计/ 方法/ 对/ 当前/ 55/ 个/ 主要/ 的/ OO/ 度量/ 进行/ 了/ 类/ 规模/ 的/ 混/ 和/ 效应/ 检测/ ./ 我们/ 的/ 结果表明/ ,/ 对/ 80/ %/ 以上/ 的/ OO/ 度量/ 而言/ ,/ 类/ 规模/ 的/ 混/ 和/ 效应/ 都/ 是/ 存在/ 的/ ./ 特别/ 地/ ,/ 我们/ 发现/ ,/ 在/ 不/ 控制/ 类/ 的/ 规模/ 时/ ,/ 许多/ OO/ 度量/ 与/ 类/ 的/ 易变性/ 呈现/ 高度/ 的/ 相关性/ ./ 然而/ ,/ 在/ 控制/ 类/ 的/ 规模/ 后/ ,/ 对/ 30/ %/ 以上/ 的/ OO/ 度量/ 而言/ ,/ 它们/ 与/ 易变性/ 之间/ 的/ 关联/ 关系/ 或者/ 消失/ 、/ 或者/ 呈现出/ 相反/ 的/ 关联/ 关系/ ./ 据此/ ,/ 我们/ 建议/ 后续/ 的/ 研究/ 应该/ 将类/ 的/ 规模/ 作为/ 混/ 和/ 变量/ 来/ 考虑/ ,/ 以免/ 得到/ 不/ 正确/ 的/ 实验/ 结论/ ./ 尽管/ 上述/ 研究/ 结论/ 具有/ 很/ 重要/ 的/ 意义/ ,/ 但/ 我们/ 只/ 分析/ 了/ 一个/ 软件系统/ ,/ 因而/ 不/ 清楚/ 该/ 结论/ 是否/ 可以/ 推广/ 到/ 其他/ 系统/ 上/ ./ 为/ 解决/ 此/ 问题/ ,/ 本文/ 利用/ 元/ 分析/ 技术/ 和/ 102/ 个/ Java/ 软件系统/ 重新/ 检查/ 类/ 的/ 规模/ 对/ OO/ 度量/ 和/ 易变性/ 之间/ 关联/ 关系/ 的/ 潜在/ 混/ 和/ 效应/ 问题/ ./ 我们/ 对/ 55/ 个/ OO/ 度量/ 进行/ 了/ 分析/ ,/ 其中/ 包括/ 18/ 个/ 内聚性/ 度量/ 、/ 20/ 个/ 耦合/ 性/ 度量/ 和/ 17/ 个/ 继承/ 相关/ 的/ 度量/ ./ 对/ 每/ 一个/ OO/ 度量/ ,/ 我们/ 首先/ 在/ 单个/ 软件系统/ 上/ 分别/ 计算/ 在/ 控制规模/ 和/ 不/ 控制规模/ 的/ 两种/ 情况/ 下/ 它/ 与/ 易变性/ 的/ 关联/ 强度/ ./ 然后/ ,/ 我们/ 利用/ 元/ 分析/ 中/ 的/ 随机/ 效应/ 模型/ 计算/ 在/ 所有/ 系统/ 上且/ 分别/ 在/ 这/ 两种/ 情况/ 下/ 它/ 与/ 易变性/ 的/ 平均/ 关联/ 强度/ [/ 6/ ]/ ./ 最后/ ,/ 我们/ 在/ 此基础/ 上/ 利用/ 统计/ 方法/ 检测/ 类/ 规模/ 的/ 潜在/ 混/ 和/ 效应/ ./ 我们/ 的/ 实验/ 结果/ 证实/ 类/ 规模/ 的/ 混/ 和/ 效应/ 是/ 广泛/ 存在/ 的/ ,/ 因此/ 在/ 验证/ OO/ 度量/ 的/ 易变性/ 预测/ 能力/ 时/ 确实/ 需要/ 将/ 其/ 作为/ 一个/ 混/ 和/ 变量/ 来/ 考虑/ ./ 本文/ 第/ 2/ 节/ 介绍/ 元/ 分析/ 技术/ 中/ 的/ 随机/ 效应/ 模型/ ;/ 第/ 3/ 节/ 描述/ 本文/ 所/ 采用/ 的/ 研究/ 方法/ ,/ 包括/ 数据/ 来源/ 、/ 独立/ 变量/ 、/ 依赖/ 变量/ 和/ 数据分析/ 方法/ ;/ 第/ 4/ 节/ 给出/ 详细/ 的/ 实验/ 结果/ ;/ 第/ 5/ 节对/ 本文/ 的/ 工作/ 进行/ 总结/ 并/ 对/ 将来/ 的/ 工作/ 进行/ 展望/ ./ 2/ 元/ 分析/ 技术/ 元/ 分析/ 是/ 一种/ 用来/ 将/ 多个/ “/ 研究/ ”/ 的/ 结果/ 进行/ 合并/ 的/ 统计/ 方法/ [/ 6/ ]/ ./ 其中/ ,/ “/ 随机/ 效应/ 模型/ ”/ 是/ 最/ 常用/ 的/ 一种/ 元/ 分析模型/ ,/ 它/ 同时/ 考虑/ “/ 研究/ 内/ 方差/ ”/ 和/ “/ 研究/ 间/ 方差/ ”/ ./ 根据/ 文献/ [/ 6/ ]/ ,/ 单个/ “/ 研究/ ”/ 中/ 的/ 结果/ 称为/ “/ 可/ 观察/ 效应/ 值/ ”/ ,/ 它/ 是/ “/ 真实/ 效应/ 值/ ”/ 的/ 一个/ 估算/ 量/ ./ 对/ 每/ 一个/ OO/ 度量/ ,/ 本文/ 利用/ 102/ 个/ Java/ 系统分析/ 类/ 规模/ 对/ 它/ 与/ 易变性/ 之间/ 关联/ 强度/ 的/ 混/ 和/ 效应/ ./ 此处/ ,/ 每/ 一个/ Java/ 系统/ 是/ 随机/ 效应/ 模型/ 中/ 的/ 一个/ “/ 研究/ ”/ ,/ 关联/ 强度/ 是/ “/ 效应/ 值/ ”/ ./ 在/ 随机/ 效应/ 模型/ 中/ ,/ 不同/ “/ 研究/ ”/ 中/ 的/ “/ 真实/ 效应/ 值/ ”/ 被/ 假定/ 为/ 是/ 不同/ 的/ ,/ 并且/ 服从/ 一个/ 正态分布/ (/ 下文/ 称/ 它/ 的/ 平均值/ 为/ “/ 总/ 平均值/ ”/ )/ ./ 因此/ ,/ 对/ 任一/ “/ 研究/ ”/ 而言/ ,/ 其/ “/ 可/ 观察/ 效应/ 值/ ”/ 与/ “/ 总/ 平均值/ ”/ 之间/ 的/ 偏差/ 由/ 两/ 部分/ 构成/ :/ “/ 真实/ 效应/ 值/ ”/ 与/ “/ 总/ 平均值/ ”/ 间/ 的/ 偏差/ 和/ “/ 可/ 观察/ 效应/ 值/ ”/ 与/ “/ 真实/ 效应/ 值/ ”/ 间/ 的/ 偏差/ ./ 换句话说/ ,/ 每个/ “/ 研究/ ”/ 的/ “/ 可/ 观察/ 效应/ 值/ ”/ 的/ 方差/ 可/ 划分/ 成/ “/ 研究/ 间/ 方差/ ”/ 和/ “/ 研究/ 内/ 方差/ ”/ 两/ 部分/ :/ 前者/ 刻画/ 各/ “/ 研究/ ”/ 间/ “/ 真实/ 效应/ 值/ ”/ 的/ 差异/ ,/ 后者/ 刻画/ 每个/ “/ 研究/ ”/ 内部/ 的/ 样本/ 误差/ ./ 元/ 分析/ 的/ 目标/ 是/ 利用/ 统计/ 方法/ 综合/ 各/ “/ 研究/ ”/ 的/ “/ 可/ 观察/ 效应/ 值/ ”/ ,/ 得到/ 一个/ “/ 平均/ 效应/ 值/ ”/ ,/ 用来/ 估算/ “/ 总/ 平均值/ ”/ ./ 最近/ ,/ 元/ 分析/ 技术/ 在/ 软件工程/ 中/ 得到/ 了/ 许多/ 应用/ [/ 7/ -/ 10/ ]/ ./ 设/ k/ 是/ 元/ 分析/ 中/ “/ 研究/ ”/ 的/ 数目/ ,/ μ/ 是/ 这些/ “/ 研究/ ”/ 的/ “/ 真实/ 效应/ 值/ ”/ 的/ “/ 总/ 平均值/ ”/ ./ 对/ 第/ i/ 个/ “/ 研究/ ”/ (/ 1/ / i/ / k/ )/ ,/ 假设/ Yi/ 、/ ζ/ i/ 和/ ε/ i/ 各自/ 表示/ 它/ 的/ “/ 可/ 观察/ 效应/ 值/ ”/ 、/ “/ 真实/ 效应/ 值/ ”/ 与/ “/ 总/ 平均值/ ”/ μ/ 的/ 偏差/ 以及/ “/ 可/ 观察/ 效应/ 值/ ”/ 与/ “/ 真实/ 效应/ 值/ ”/ 的/ 偏差/ ./ 那么/ ,/ 可/ 得/ 其中/ ,/ E/ (/ ε/ i/ )/ =/ 0/ 、/ Var/ (/ ε/ i/ )/ =/ σ/ 2/ τ/ 2/ ./ 此处/ ,/ E/ (/ ·/ )/ 代表/ 一个/ 变量/ 的/ 期望值/ ,/ Var/ (/ ·/ )/ 代表/ 一个/ 变量/ 的/ 方差/ ,/ σ/ 2/ 差/ ”/ ,/ τ/ 2/ 是/ “/ 研究/ 间/ 方差/ ”/ ./ 由此/ ,/ 可知/ Yi/ 的/ 方差/ 为/ Var/ (/ Yi/ )/ =/ Var/ (/ ε/ i/ )/ +/ Var/ (/ ζ/ i/ )/ =/ σ/ 2/ 注意/ ,/ 上述/ 公式/ 中/ Var/ (/ Yi/ )/ 、/ σ/ 2/ 在实践中/ 要/ 用/ 样本/ 值来/ 代替/ ./ 具体/ 而言/ ,/ 当/ 用/ 样本/ 值/ i/ 和/ T2/ 各自/ 替换/ 式/ (/ 2/ )/ 中/ 的/ σ/ 2s2Var/ (/ Yi/ )/ 的/ 样本/ 估算/ 值/ Vi/ :/ 其中/ Page3/ 在/ 式/ (/ 4/ )/ 中/ ,/ df/ 、/ Q/ 和/ C/ 各自/ 表示/ 自由度/ 、/ 总/ 方差/ 和/ 比例/ 因子/ :/ 其中/ ,/ Wi/ =/ 1/ // s2/ 的/ “/ 可/ 观察/ 效应/ 值/ ”/ 进行/ 方差/ 倒数/ 加权/ 的/ 方式/ 计算/ k/ 个/ “/ 研究/ ”/ 的/ “/ 平均/ 效应/ 值/ ”/ M/ 及其/ 方差/ VM/ :/ 在/ 上述/ 公式/ 中/ ,/ W/ / i/ =/ 1/ // Vi/ 为/ 第/ i/ 个/ “/ 研究/ ”/ 的/ 权值/ (/ 1/ / i/ / k/ )/ ./ 如前所述/ ,/ 随机/ 效应/ 模型/ 假定/ “/ 可/ 观察/ 效应/ 值/ ”/ 中/ 的/ 方差/ 由/ 真实/ 的/ 方差/ (/ “/ 研究/ 间/ 方差/ ”/ )/ 和/ 样本/ 误差/ (/ “/ 研究/ 内/ 方差/ ”/ )/ 组成/ ./ 在/ 元/ 分析/ 中/ ,/ 这种/ 真实/ 的/ 方差/ 称作/ 异质性/ ./ 通常/ 用/ I2/ 来/ 刻画/ 在/ “/ 可/ 观察/ 效应/ 值/ ”/ 的/ 方差/ 中有/ 多/ 大/ 比例/ 来源于/ 真实/ 的/ 方差/ ,/ 也/ 就是/ “/ 研究/ ”/ 间/ 异质性/ 的/ 程度/ :/ 当/ I2/ 小于/ 等于/ 25/ %/ 时/ ,/ 表示/ 具有/ 低/ 的/ 异质性/ ;/ 当/ I2/ 介于/ 25/ %/ 与/ 50/ %/ 之间/ 时/ ,/ 表示/ 具有/ 中等/ 的/ 异质性/ ;/ 类别/ 系统/ 表/ 1102/ 个/ Java/ 系统/ 的/ 描述性/ 信息科学/ // 工程/ 9100824.630/ ./ 166579310.0200/ ./ 2674104329.2197/ ./ 066474271.1184/ ./ 9/ 格式/ 和/ 协议/ 1888.0/ N/ // A284284284/ ./ 0N/ // A287287287/ ./ 0N/ // A284284284/ ./ 0N/ // A/ 数据库/ 1135715.510/ ./ 8285866732.0882/ ./ 5290777773.8888/ ./ 5284565614.8827/ ./ 5/ 办公/ // 业务/ 1067917.817/ ./ 41119178649.3336/ ./ 51544238781.2483/ ./ 9110691566.1390/ ./ 9/ 系统/ 1038816.79/ ./ 4111878489.1376/ ./ 01286111520.2404/ ./ 285169339.9246/ ./ 0/ 游戏/ // 娱乐/ 313810.32/ ./ 524352163.799/ ./ 539578222.7160/ ./ 319544139.783/ ./ 2/ 软件开发/ 25139720.326/ ./ 4142370425.2354/ ./ 6152785471.3370/ ./ 5114038351.0295/ ./ 6/ 通讯/ 937618.310/ ./ 92187105476.8650/ ./ 42368104537.2695/ ./ 42150104440.3644/ ./ 9/ 多媒体/ 648920.514/ ./ 5870118459.3281/ ./ 5885162489.3292/ ./ 8868110442.2288/ ./ 7/ 文本编辑/ 器/ 1474747.0/ N/ // A475475475/ ./ 0N/ // A475475475/ ./ 0N/ // A437437437/ ./ 0N/ // A/ 因特网/ 17123533.134/ ./ 2284965621.4823/ ./ 2360566689.3957/ ./ 0238143585.4749/ ./ 4/ 总计/ 102139521.423/ ./ 1285852507.0544/ ./ 9360566560.7601/ ./ 2284538438.7503/ ./ 3/ 当/ I2/ 大于/ 等于/ 75/ %/ 时/ ,/ 表示/ 具有/ 高/ 的/ 异质性/ [/ 6/ ]/ ./ 3/ 研究/ 方法/ 本/ 节/ 首先/ 给出/ 数据/ 来源/ ,/ 然后/ 介绍/ 独立/ 变量/ 和/ 依赖/ 变量/ ,/ 最后/ 详细描述/ 所/ 采用/ 的/ 数据分析/ 方法/ ./ 3.1/ 数据/ 来源/ 我们/ 从/ http/ :/ // // sourceforge/ ./ net/ // 上/ 下载/ 了/ 102/ 个/ 开源/ 的/ Java/ 软件系统/ 作为/ 实验/ 对象/ ./ 与/ 文献/ [/ 7/ ]/ 中/ 的/ 方法/ 一致/ ,/ 我们/ 在/ 选择/ 这些/ 系统/ 时/ 对/ 它们/ 的/ 规模/ 和/ 类型/ 事先/ 没有/ 做/ 任何/ 要求/ ,/ 只/ 要求/ 其/ 实现/ 语言/ 是/ Java/ ./ 对/ 每个/ Java/ 系统/ ,/ 我们/ 下载/ 了/ 一个/ 稳定/ 的/ 主/ 版本/ 中/ 的/ 两个/ 子/ 版本/ ./ 根据/ 文献/ [/ 2/ ]/ ,/ 一个/ 主/ 版本/ 的/ 两个/ 子/ 版本/ 所/ 涉及/ 的/ 变更/ 主要/ 由/ 修正/ 性/ 变更/ 组成/ ,/ 它/ 是/ 由/ 模块/ 的/ 结构/ 特性/ 而/ 不是/ 外部/ 因素/ 驱动/ 的/ ./ 因此/ ,/ 对/ 每/ 一个/ Java/ 类/ ,/ 这/ 两个/ 子/ 版本/ 间/ 的/ 代码/ 行/ 变更/ 量/ 实际上/ 反应/ 了/ 由/ 结构/ 特性/ 驱动/ 的/ 变更/ 程度/ ./ 为/ 方便/ 起/ 见/ ,/ 下文/ 中将/ 版本号/ 小/ 的/ 子/ 版本/ 称为/ 老/ 版本/ ,/ 将/ 版本号/ 大/ 的/ 子/ 版本/ 称为/ 新/ 版本/ ./ http/ :/ // // sourceforge/ ./ net/ // 将/ Java/ 开源/ 软件系统/ 分成/ 20/ 个/ 类别/ ,/ 每个/ 类别/ 覆盖/ 若干/ 主题/ ./ 前/ 9/ 个/ 类别/ 分别/ 为/ 软件开发/ 、/ 因特网/ 、/ 科学/ // 工程/ 、/ 游戏/ // 娱乐/ 、/ 通讯/ 、/ 办公/ // 业务/ 、/ 系统/ 、/ 多媒体/ 和/ 数据库/ ,/ 它们/ 占该/ 网站/ 上/ 全部/ Java/ 系统/ 的/ 80/ %/ 以上/ ./ 特别/ 地/ ,/ 对/ 每个/ Java/ 系统/ ,/ http/ :/ // // sourceforge/ ./ net/ // 用/ 一个/ 列表/ 给出/ 它/ 所属/ 的/ 类别/ ./ 换句话说/ ,/ 同一个/ Java/ 系统/ 可/ 同时/ 属于/ 不同/ 的/ 类别/ ./ 为/ 简单/ 起/ 见/ ,/ 对/ 每/ 一个/ 系统/ ,/ 本文/ 将/ 其/ 列表/ 中/ 列出/ 的/ 第一个/ 类别/ 作为/ 它/ 的/ 类别/ ./ 表/ 1/ 给出/ 了/ 这/ 102/ 个/ Java/ 系统/ 的/ 描述性/ 信息/ ,/ 其中/ 给出/ 了/ 每个/ 类别/ 中/ 系统/ 的/ 数目/ 、/ 开发人员/ 数目/ 的/ 分布/ 、/ 老/ 版本/ 中类/ 的/ 数目/ 的/ 分布/ 、/ 新/ 版本/ 中类/ 的/ 数目/ 的/ 分布/ 以及/ 同时/ 出现/ 在/ 新/ 老/ 版本/ 中类/ 的/ 数目/ 的/ 分布/ ./ 此处/ ,/ N/ // A/ 表示/ “/ 不能/ 应用/ ”/ ./ 最大值/ 最小值/ 平均值/ 标准差/ Page4/ 在/ 每个/ Java/ 系统/ 上/ ,/ 我们/ 生成/ 一个/ 对应/ 的/ 数据/ 集/ ./ 因此/ ,/ 总共/ 得到/ 102/ 个/ 数据/ 集/ ./ 在/ 每/ 一个/ 数据/ 集中/ ,/ 每个/ 数据/ 点/ 表示/ 一个/ 同时/ 出现/ 在/ 老/ 版本/ 和/ 新/ 版本/ 中/ 的/ Java/ 类/ ,/ 它/ 由/ 如下/ 成分/ 组成/ :/ (/ 1/ )/ 在/ 老/ 版本/ 中该/ Java/ 类上/ 收集/ 的/ 一组/ OO/ 度量/ 值/ ;/ (/ 2/ )/ 该/ Java/ 类/ 从/ 老/ 版本/ 向/ 新/ 版本/ 演化/ 时/ 发生/ 的/ SLOC/ 变更/ 量/ ./ 为/ 收集/ 上述/ 数据/ ,/ 我们/ 首先/ 利用/ 程序/ 理解/ 工具/ “/ UnderstandforJava/ ”/ 扫描/ 老/ 版本/ 和/ 新/ 版本/ 的/ Java/ 系统/ ,/ 得到/ 两个/ 对应/ 的/ Understand/ 数据库/ ./ 这/ 两个/ 数据库/ 各自/ 提供/ 了/ 老/ 版本/ 和/ 新/ 版本/ Java/ 系统/ 中/ 的/ 实体/ (/ 如/ 方法/ 、/ 属性/ 和/ 类/ )/ 和/ 引用/ (/ 如/ 调用/ 关系/ 和/ 继承/ 关系/ )/ 信息/ ./ 然后/ ,/ 我们/ 利用/ UnderstandforJava/ 提供/ 的/ Perl/ 接口/ 开发/ 了/ 一个/ Perl/ 程序/ ,/ 访问/ 这/ 两个/ Understand/ 数据库/ ,/ 为/ 那些/ 同时/ 出现/ 在/ 老/ 版本/ 和/ 新/ 版本/ 中/ 的/ Java/ 类/ 收集/ 各种/ 度量/ 信息/ ./ 对/ 每/ 一个/ 这样/ 的/ Java/ 类/ ,/ Perl/ 程序/ 访问/ 老/ 版本/ 系统/ 的/ Understand/ 数据库/ 计算/ 各种/ OO/ 度量/ 值/ ./ 为/ 得到/ 该/ Java/ 类/ 从/ 老/ 版本/ 向/ 新/ 版本/ 演化/ 时/ 发生/ 的/ SLOC/ 变更/ 量/ ,/ Perl/ 程序/ 第/ 1/ 步/ 访问/ Understand/ 数据库/ ,/ 获得/ 它/ 在/ 老/ 版本/ 和/ 新/ 版本/ 系统/ 中/ 对应/ 的/ 源代码/ ,/ 第/ 2/ 步/ 利用/ 一个/ UNIXdiff/ 算法/ 变体/ 比较/ 两个/ 版本/ 的/ 源代码/ ,/ 以/ 统计/ 增加/ 的/ 、/ 删除/ 的/ 和/ 修改/ 的/ 源代码/ 行/ ./ 第/ 3/ 步/ ,/ Perl/ 程序/ 利用/ 如下/ 规则/ 计算/ SLOC/ 变量/ [/ 4/ ]/ :/ (/ 1/ )/ 每一/ 被/ 增加/ 的/ 或者/ 被/ 删除/ 的/ 代码/ 行计/ 为/ 1/ 个/ SLOC/ 变更/ ;/ (/ 2/ )/ 每一/ 被/ 修改/ 的/ 代码/ 计为/ 2/ 个/ SLOC/ 变更/ ./ 具体/ 而言/ ,/ 对/ 一个/ Java/ 类/ ,/ 如果/ 在/ 从/ 老/ 版本/ 系统/ 演化/ 到/ 新/ 版本/ 系统/ 的/ 过程/ 中/ 增加/ 了/ x/ 行/ 代码/ 、/ 删除/ 了/ y/ 行/ 代码/ 并且/ 修改/ 了/ z/ 行/ 代码/ ,/ 那么/ 它/ 所/ 对应/ 的/ 总/ SLOC/ 变更/ 量/ 为/ x/ +/ y/ +/ 2/ ×/ z/ ./ 此处/ ,/ 每行/ 被/ 修改/ 的/ 代码/ 之所以/ 被/ 记为/ 2/ 个/ SLOC/ 变更/ ,/ 是因为/ 可以/ 将/ 它/ 看成/ 是/ 先/ 删除/ 一行/ 代码/ 然后/ 再/ 增加/ 一行/ 代码/ ./ 3.2/ 依赖/ 变量/ 本文/ 的/ 依赖/ 变量/ 是/ 类级/ 的/ 易变性/ ,/ 它/ 是/ 一个/ 非常/ 重要/ 的/ 外部/ 质量/ 属性/ ,/ 指/ 一个/ 类/ 在/ 跨/ 版本/ 演化/ 时所/ 发生/ 的/ 变更/ 程度/ ./ 与/ 前人/ 的/ 研究/ 一样/ ,/ 我们/ 使用/ 一个/ 类/ 从/ 老/ 版本/ 向/ 新/ 版本/ 演化/ 时/ 发生/ 的/ SLOC/ 变更/ 量/ 作为/ 易变性/ 的/ 代理/ 变量/ ./ 当然/ ,/ 也/ 可以/ 采用/ 其他/ 代理/ 变量/ ,/ 例如/ 一个/ 类/ 从/ 老/ 版本/ 向/ 新/ 版本/ 演化/ 时/ 发生/ 的/ 修改/ 次数/ ./ 然而/ ,/ 用/ SLOC/ 变更/ 量/ 作为/ 易变性/ 的/ 代理/ 变量/ 不仅/ 能/ 反映/ 每个/ 类/ 的/ 被/ 修改/ 频率/ ,/ 而且/ 也/ 能/ 反应/ 它/ 的/ 被/ 修改/ 程度/ [/ 2/ ]/ ./ 从/ 这个/ 角度/ 而言/ ,/ 用/ SLOC/ 变更/ 量/ 作为/ 代理/ 变量/ 更/ 合适/ ./ 3.3/ 独立/ 变量/ 本文/ 的/ 独立/ 变量/ 由/ 2/ 个/ 规模/ 度量/ 和/ 55/ 个/ OO/ 度量/ 组成/ ./ 我们/ 利用/ NMIMP/ 和/ SLOC/ 作为/ 规模/ 度量/ 来/ 调查/ 类/ 规模/ 对/ 55/ 个/ OO/ 度量/ 的/ 易变性/ 预测/ 能力/ 的/ 潜在/ 混/ 和/ 效应/ ./ 其中/ ,/ NMIMP/ 是/ 一个/ 类中/ 实现/ 的/ 方法/ 数目/ ,/ SLOC/ 是/ 一个/ 类中/ 所/ 包含/ 的/ 非/ 注释/ 行/ 、/ 非/ 空白行/ 的/ 源代码/ 行数/ ./ 这/ 55/ 个/ OO/ 度量/ 由/ 3/ 个/ 度量/ 维/ 组成/ ,/ 包括/ 18/ 个/ 内聚性/ 度量/ 、/ 20/ 个/ 耦合/ 性/ 度量/ 和/ 17/ 个/ 继承/ 相关/ 度量/ (/ 请/ 参见/ 附录/ A/ )/ ./ 我们/ 之所以/ 选择/ 这/ 55/ 个/ 度量/ ,/ 主要/ 原因/ 在于/ 它们/ 是/ 软件工程/ 文献/ 中/ 被/ 广泛/ 分析/ 的/ 度量/ [/ 11/ -/ 14/ ]/ ./ 选择/ 这些/ 主流/ 的/ OO/ 度量/ 可以/ 使得/ 我们/ 的/ 实验/ 分析/ 结果/ 更/ 具有/ 代表性/ 和/ 实际/ 应用/ 价值/ ./ 3.4/ 数据分析/ 方法/ 在/ 3.4/ ./ 1/ 节中/ ,/ 我们/ 介绍/ 在/ 单个/ 软件系统/ 上/ 建模/ 混/ 和/ 效应/ 模型/ ./ 在/ 3.4/ ./ 2/ 节中/ ,/ 我们/ 详细描述/ 如何/ 利用/ 元/ 分析方法/ 综合/ 多个/ 系统/ 上/ 的/ 混/ 和/ 效应/ 得到/ 平均/ 的/ 混/ 和/ 效应/ ,/ 并/ 给出/ 其/ 统计/ 上/ 的/ 检测/ 方法/ ./ 3.4/ ./ 1/ 混/ 和/ 效应/ 模型/ 假定/ X/ 是/ 独立/ 变量/ (/ 一个/ OO/ 度量/ )/ 、/ Y/ 是/ 依赖/ 变量/ (/ 易变性/ 的/ 代理/ 变量/ ,/ 即/ SLOC/ 变更/ 量/ )/ 、/ Z/ 是/ 第三方/ 变量/ (/ 类/ 规模/ 度量/ NMIMP/ 或/ SLOC/ )/ ./ 混/ 和/ 效应/ 是/ 指/ X/ 和/ Y/ 之间/ 的/ 关联/ 关系/ 被/ Z/ 扭曲/ 了/ ,/ 它/ 包括/ 两种/ 情况/ [/ 5/ ,/ 15/ ]/ :/ X/ 和/ Y/ 间/ 存在/ 关联/ 的/ 原因/ 可/ 部分/ 或者/ 全部/ 由/ Z/ 来/ 解释/ ,/ 或者/ X/ 和/ Y/ 之间/ 不/ 存在/ 关联/ 的/ 原因/ 是/ 没有/ 考虑/ Z/ 的/ 影响/ ./ 第三方/ 变量/ Z/ 通常/ 称为/ 混/ 和/ 变量/ ,/ 它/ 可/ 导致/ 人们/ 高估/ 或者/ 低估/ X/ 和/ Y/ 之间/ 真正/ 的/ 关联/ 关系/ ./ 在/ 基于/ 线性/ 回归/ 的/ 混/ 和/ 效应/ 模型/ 中/ ,/ X/ 、/ Y/ 和/ Z/ 之间/ 的/ 关系/ 可以/ 用/ 如下/ 等式/ 描述/ :/ 其中/ ,/ β/ / 0/ 、/ β/ 0/ 和/ β/ / / 0/ 为/ 回归/ 截距/ ,/ e/ / 、/ e/ 和/ e/ / / 为余差/ ,/ τ/ 代表/ 不/ 控制/ Z/ 时/ X/ 和/ Y/ 之间/ 的/ 关系/ ,/ τ/ 代表/ 控制/ Z/ 时/ X/ 和/ Y/ 之间/ 的/ 关系/ ,/ γ/ 代表/ 控制/ X/ 时/ Z/ 和/ Y/ 之间/ 的/ 关系/ ,/ β/ 代表/ X/ 和/ Z/ 之间/ 的/ 关系/ ./ 注意/ ,/ 上述/ 参数/ 都/ 是/ 种群/ 值/ ,/ 在实践中/ 要/ 替换/ 为/ 样本/ 值/ ./ 由/ 上述/ 公式/ ,/ 我们/ 可/ 得到/ 由此可见/ ,/ 第三方/ 变量/ Z/ 导致/ X/ 和/ Y/ 之间/ 关联/ 关系/ 的/ 扭曲/ 程度/ 为/ β/ γ/ ./ 只要/ β/ 和/ γ/ 都/ 不/ 为/ 0/ ,/ 那么/ τ/ 和/ τ/ 就/ 不/ 相等/ ./ 在/ 先前/ 的/ 文献/ 中/ ,/ τ/ 被/ 称为/ “/ 总/ 效应/ ”/ ,/ τ/ 被/ 称为/ “/ 直接/ 效应/ ”/ ,/ β/ γ/ 被/ 称为/ “/ 间接/ 效应/ ”/ ./ 如果/ Z/ 导致/ 高估/ 了/ X/ 和/ Y/ 间/ 的/ 关联/ 强度/ ,/ 那么/ 它/ 是/ “/ 正/ 的/ 混/ 和/ 变量/ ”/ ./ 相反/ ,/ 如果/ Z/ 导致/ 低估/ 了/ X/ 和/ Y/ 之间/ 的/ 关联/ 强度/ ,/ 那么/ 它/ 是/ “/ 负/ 的/ 混/ 和/ 变量/ ”/ ./ 在/ 极端/ 情况/ 下/ ,/ 一个/ 负/ 的/ 混/ 和/ 变量/ 不仅/ 会/ 导致/ 关联/ 强度/ 的/ 改变/ ,/ 而且/ 会/ 导致/ 关联/ 方向/ 的/ 改变/ ./ Page5/ 为/ 便于/ 描述/ 混/ 和/ 效应/ 的/ 元/ 分析/ 过程/ ,/ 下面/ 假定/ Xs/ 、/ Ys/ 和/ Zs/ 各自/ 是/ X/ 、/ Y/ 和/ Z/ 对应/ 的/ 标准化/ 变量/ (/ 减去/ 平均值/ 再/ 除以/ 标准差/ )/ ./ 由式/ (/ 14/ )/ 可/ 得/ 其中/ ,/ τ/ s/ 、/ τ/ s/ 、/ β/ s/ 和/ γ/ s/ 分别/ 为/ τ/ 、/ τ/ 、/ β/ 和/ γ/ 所/ 对应/ 的/ 标准化/ 回归系数/ ./ 对/ 一个/ 给定/ 的/ 数据/ 集/ ,/ 假设/ N/ 是/ 其/ 数据/ 点/ 数目/ ,/ rXY/ 、/ rXZ/ 和/ rYZ/ 分别/ 为/ X/ 和/ Y/ 、/ X/ 和/ Z/ 、/ Y/ 和/ Z/ 间/ 的/ 样本/ 皮尔森/ 相关系数/ ,/ 那么/ 总/ 效应/ τ/ s/ 的/ 样本/ 估算/ 值为/ 它/ 的/ 方差/ 为/ 直接/ 效应/ τ/ s/ 的/ 样本/ 估算/ 值为/ 它/ 的/ 方差/ 为/ 其中/ 间接/ 效应/ β/ s/ γ/ s/ 的/ 样本/ 估算/ 值为/ 它/ 的/ 方差/ 为/ 其中/ [/ 犪/ =/ r2/ 熿/ cov/ (/ rXZ/ ,/ rXY/ )/ var/ (/ rXY/ )/ cov/ (/ rZY/ ,/ rXY/ )/ Φ/ =/ cov/ (/ rXZ/ ,/ rZY/ )/ cov/ (/ rZY/ ,/ rXY/ )/ var/ (/ rZY/ 燀/ 对/ 任意/ 2/ 个/ 变量/ a/ 和/ b/ 而言/ ,/ 它们/ 的/ 样本/ 皮尔森/ 相关系数/ rab/ 的/ 方差/ 为/ 对/ 任意/ 3/ 个/ 变量/ a/ 、/ b/ 和/ c/ 而言/ ,/ 两个/ 相关系数/ rab/ 和/ rac/ 的/ 协方差/ 为/ cov/ (/ rab/ ,/ rac/ )/ =/ 0.5/ ×/ (/ 2rbc/ -/ rabrac/ )/ (/ 1/ -/ r2ab/ -/ r2ac/ -/ r2bc/ )/ +/ r3bc3/ ./ 4.2/ 混/ 和/ 效应/ 的/ 元/ 分析/ 过程/ 我们/ 使用/ 随机/ 效应/ 模型/ 计算/ 102/ 个/ 系统/ 上/ 平均/ 的/ “/ 总/ 效应/ ”/ 、/ “/ 间接/ 效应/ ”/ 和/ “/ 直接/ 效应/ ”/ ,/ 在/ 此基础/ 上/ 利用/ 统计/ 方法/ 检测/ 规模/ 度量/ Z/ 是否/ 对/ OO/ 度量/ X/ 和/ 易变性/ 度量/ Y/ 之间/ 的/ 关联/ 存在/ 混/ 和/ 效应/ ./ 如图/ 1/ 所示/ ,/ 这个/ 元/ 分析/ 过程/ 由/ 3/ 步/ 组成/ ./ 第/ 1/ 步/ ,/ 对/ 102/ 个/ 数据/ 集/ (/ 每个/ 数据/ 集/ 对应/ 一个/ Java/ 系统/ )/ 进行/ 预处理/ ,/ 排除/ 掉/ X/ 的/ 非/ 零/ 数据/ 点/ 数目/ 少于/ 6/ 个/ 的/ 数据/ 集/ (/ 每个/ 数据/ 点/ 对应/ 一个/ Java/ 类/ )/ ./ 先前/ 的/ 研究/ 文献/ 也/ 采用/ 了/ 相同/ 的/ 处理/ 方法/ ,/ 原因/ 是/ 一个/ 方差/ 很小/ 的/ OO/ 度量/ 其/ 预测/ 能力/ 必然/ 很/ 有限/ ./ 因此/ ,/ 在/ 进行/ 后续/ 的/ 分析/ 前/ ,/ 我们/ 先/ 排除/ 掉/ 这样/ 的/ 数据/ 集/ ./ 第/ 2/ 步/ ,/ 首先/ 在/ 单个/ 数据/ 集上/ 利用/ 式/ (/ 16/ )/ 和/ (/ 17/ )/ 计算/ 标准化/ 的/ 总/ 效应/ 及其/ 方差/ 、/ 利用/ 式/ (/ 18/ )/ 和/ (/ 19/ )/ 计算/ 标准化/ 的/ 直接/ 效应/ 及其/ 方差/ 、/ 利用/ 式/ (/ 21/ )/ 和/ (/ 22/ )/ 计算/ 标准化/ 的/ 间接/ 效应/ 及其/ 方差/ ./ 如/ 3.4/ ./ 1/ 节/ 所述/ ,/ 这些/ 公式/ 都/ 建立/ 在/ 皮尔森/ 相关系数/ 的/ 基础/ 上/ ./ 皮尔森/ 相关系数/ 要求/ 数据/ 服从/ 正态分布/ ,/ 但/ 我们/ 得到/ 的/ 大多数/ OO/ 度量/ 数据/ 都/ 与/ 正态分布/ 相差/ 甚远/ ./ 因此/ ,/ 为/ 解决/ 上述/ 问题/ ,/ 我们/ 不/ 直接/ 计算/ 皮尔森/ 相关系数/ ,/ 而/ 采用/ 通过/ 斯皮尔曼/ 相关系数/ 逼近/ 的/ 方法/ ./ 具体/ 而言/ ,/ 对/ 一对/ 变量/ ,/ 我们/ 首先/ 计算/ 出/ 它们/ 的/ 斯皮尔曼/ 相关系数/ ρ/ ,/ 然后/ 利用/ 如下/ 公式/ 来/ 得到/ 它们/ 的/ 皮尔森/ 相关系数/ r/ [/ 5/ ]/ :/ 在/ 得到/ 这些/ 效应/ 及/ 方差/ 后/ ,/ 我们/ 利用/ 随机/ 效应/ 模型/ 计算/ 平均/ 的/ 标准化/ 总/ 效应/ PSTE/ 、/ 平均/ 的/ 标准化/ 直接/ 效应/ PSDE/ 以及/ 平均/ 的/ 标准化/ 间接/ 效应/ PSIE/ ./ 第/ 3/ 步/ ,/ 检查/ 规模/ 度量/ Z/ 是否/ 对/ OO/ 度量/ X/ 和/ 易变性/ 度量/ Y/ 之间/ 的/ 关联/ 存在/ 混/ 和/ 效应/ ./ 如果/ 存在/ 混/ 和/ 效应/ ,/ 进一步/ 识别/ 其/ 方向/ 并/ 判断/ 是否/ “/ 污染/ ”/ ①/ 了/ X/ 的/ 验证/ 结果/ :/ (/ 1/ )/ 检查/ 是否/ 存在/ 混/ 和/ 效应/ ./ 如果/ 平均/ 的/ 标准化/ 间接/ 效应/ 的/ 种群/ 值不为/ 0/ (/ 即/ PSIE/ 的/ p/ 值/ 小于/ 0.05/ )/ ,/ 则/ Z/ 存在/ 混/ 和/ 效应/ ,/ 否则/ 不/ 存在/ 混/ 和/ 效应/ ./ (/ 2/ )/ 识别/ 混/ 和/ 效应/ 的/ 方向/ ./ 如果/ 平均/ 的/ 标准化/ 直接/ 效应/ 的/ 种群/ 值为/ 0/ (/ 即/ PSDE/ 的/ p/ 值/ 大于/ 或/ 等于/ 0.05/ )/ ,/ 则/ Z/ 的/ 混/ 和/ 效应/ 方向/ 为/ “/ 正/ ”/ ./ 否则/ ,/ 当/ 平均/ 的/ 标准化/ 直接/ 效应/ PSDE/ 和/ 平均/ 的/ 标准化/ 间接/ 效应/ PSIE/ 具有/ 相同/ 的/ 方向/ 时/ 存在/ “/ 正/ ”/ 的/ 混/ 和/ 效应/ ,/ ①/ 当/ 下述/ 3/ 种/ 情况/ 之一/ 出现/ 时/ ,/ 称/ X/ 的/ 验证/ 结果/ 被/ “/ 污染/ ”/ Page6/ 图/ 1/ 类/ 规模/ 对/ 一个/ OO/ 度量/ 易变性/ 预测/ 能力/ 的/ 潜在/ 混/ 和/ 效应/ 的/ 元/ 分析/ 过程/ 当/ 它们/ 具有/ 相反/ 的/ 方向/ 时/ 具有/ “/ 负/ ”/ 的/ 混/ 和/ 效应/ ./ (/ 3/ )/ 判断/ X/ 的/ 验证/ 结果/ 是否/ 被/ “/ 污染/ ”/ ./ 当/ 出现/ 下述/ 3/ 种/ 情况/ 之一/ 时/ ,/ X/ 的/ 验证/ 结果/ 被/ “/ 污染/ ”/ 了/ :/ ①/ 平均/ 的/ 标准化/ 直接/ 效应/ 的/ 种群/ 值为/ 0/ ;/ ②/ 平均/ 的/ 标准化/ 直接/ 效应/ 的/ 种群/ 值不为/ 0/ ,/ 但/ 平均/ 的/ 标准化/ 总/ 效应/ 的/ 种群/ 值为/ 0/ ;/ ③/ 平均/ 的/ 标准化/ 直接/ 效应/ 和/ 平均/ 的/ 标准化/ 总/ 效应/ 的/ 种群/ 值/ 都/ 不/ 为/ 0/ ,/ 但/ 它们/ 的/ 方向/ 相反/ ./ 我们/ 利用/ Perl/ 语言/ 编写/ 了/ 一个/ 元/ 分析/ 工具/ ,/ 实现/ 图/ 1/ 所/ 描述/ 的/ 元/ 分析/ 过程/ ./ 在/ 实际/ 分析/ 时/ ,/ 我们/ 用/ 一个/ 文本文件/ 列出/ 102/ 个/ 数据/ 集/ 的/ 名称/ ,/ 该/ 工具/ 访问/ 该/ 文本文件/ ,/ 依次/ 读入/ 相应/ 的/ 数据/ 集/ ,/ 然后/ 进行/ 预处理/ 和/ 元/ 分析/ 工作/ ,/ 最后/ 报告/ 在/ 每/ 一个/ 规模/ 度量/ 下/ 的/ 混/ 和/ 效应/ 方向/ 以及/ 污染/ 情况/ ./ 4/ 实验/ 结果/ 4.1/ 节/ 给出/ 混/ 和/ 效应/ 元/ 分析/ 的/ 详细/ 实验/ 结果/ ,/ 4.2/ 节/ 讨论/ 并/ 分析/ 效度/ 威胁/ ./ 4.1/ 混/ 和/ 效应/ 分析/ 表/ 2/ 汇总/ 了/ 类/ 规模/ 的/ 潜在/ 混/ 和/ 效应/ 的/ 元/ 分析/ 结果/ ./ 对/ 每/ 一个/ OO/ 度量/ :/ (/ 1/ )/ 第/ 2/ 列/ 给出/ 了/ 实际/ 参与/ 元/ 分析/ 的/ “/ 研究/ ”/ 数目/ ;/ (/ 2/ )/ 第/ 3/ 列/ 给出/ 了/ 平均/ 的/ 标准化/ 总/ 效应/ 的/ 样本/ 值/ 、/ 它/ 的/ p/ 值/ 以及/ 异质性/ 度量/ I2/ ;/ (/ 3/ )/ 第/ 4/ 列/ 和/ 第/ 5/ 列/ 分别/ 给出/ 了/ 在/ 规模/ 度量/ NMIMP/ 和/ SLOC/ 下/ 的/ 平均/ 的/ 标准化/ 直接/ 效应/ 的/ 样本/ 值/ 、/ 它/ 的/ p/ 值/ 以及/ 异质性/ 度量/ I2/ ;/ (/ 4/ )/ 第/ 6/ 列/ 和/ 第/ 7/ 列/ 分别/ 给出/ 了/ 在/ 规模/ 度量/ NMIMP/ 和/ SLOC/ 下/ 的/ 平均/ 的/ 标准化/ 间接/ 效应/ 的/ 样本/ 值/ 、/ 它/ 的/ p/ 值/ 以及/ 异质性/ 度量/ I2/ ;/ (/ 5/ )/ 第/ 8/ 列/ 和/ 第/ 9/ 列/ 分别/ 给出/ 了/ 在/ 规模/ 度量/ NMIMP/ 和/ SLOC/ 下/ 的/ 混/ 和/ 效应/ 方向/ ./ 此处/ ,/ “/ +/ ”/ 表示/ OO/ 度量/ 验证/ 结果/ 没有/ 被/ “/ 污染/ ”/ 的/ 正/ 的/ 混/ 和/ 效应/ ,/ “/ / ”/ 表示/ OO/ 度量/ 验证/ 结果/ 被/ “/ 污染/ ”/ 的/ 正/ 的/ 混/ 和/ 效应/ ,/ “/ -/ ”/ 表示/ OO/ 度量/ 验证/ 结果/ 没有/ 被/ “/ 污染/ ”/ 的/ 负/ 的/ 混/ 和/ 效应/ ,/ “/ / ”/ 表示/ OO/ 度量/ 验证/ 结果/ 被/ “/ 污染/ ”/ 的/ 负/ 的/ 混/ 和/ 效应/ ,/ “/ 0/ ”/ 表示/ 不/ 存在/ 混/ 和/ 效应/ ./ 由表/ 2/ ,/ 我们/ 可以/ 观察/ 到/ :/ (/ 1/ )/ 内聚性/ 度量/ ./ 当/ SLOC/ 作为/ 类/ 规模/ 度量/ 时/ ,/ Co/ 的/ 平均/ 的/ 标准化/ 间接/ 效应/ 种群/ 值为/ 0/ ./ 在/ 其他/ 情况/ 下/ ,/ 所有/ 内聚性/ 度量/ 的/ 平均/ 的/ 标准化/ 间接/ 效应/ 的/ 种群/ 值/ 都/ 不/ 为/ 0/ ./ 因此/ ,/ 对/ Co/ 而言/ ,/ 当用/ NMIMP/ 作/ Page7/ 表/ 2/ 混/ 和/ 效应/ 的/ 元/ 分析/ 结果/ SLOC/ 面向对象/ 度量/ kLCOM11020/ ./ 311/ (/ </ 0.01/ )/ LCOM21020/ ./ 253/ (/ </ 0.01/ )/ LCOM31020/ ./ 248/ (/ </ 0.01/ )/ LCOM41020/ ./ 098/ (/ </ 0.01/ )/ Co1020/ ./ 022/ (/ 0.099/ )/ Co102/ -/ 0.047/ (/ </ 0.01/ )/ LCOM51000/ ./ 171/ (/ </ 0.01/ )/ Coh100/ -/ 0.254/ (/ </ 0.01/ )/ TCC102/ -/ 0.057/ (/ </ 0.01/ )/ LCC102/ -/ 0.028/ (/ 0.070/ )/ ICH1020/ ./ 334/ (/ </ 0.01/ )/ OCC1020/ ./ 117/ (/ </ 0.01/ )/ PCC1020/ ./ 101/ (/ </ 0.01/ )/ DCD102/ -/ 0.054/ (/ </ 0.01/ )/ DCI102/ -/ 0.022/ (/ 0.154/ )/ CAMC102/ -/ 0.297/ (/ </ 0.01/ )/ NHD1010/ ./ 234/ (/ </ 0.01/ )/ SNHD101/ -/ 0.147/ (/ </ 0.01/ )/ / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / CBO1020/ ./ 365/ (/ </ 0.01/ )/ RFC1020/ ./ 307/ (/ </ 0.01/ )/ MPC1020/ ./ 350/ (/ </ 0.01/ )/ DAC1020/ ./ 290/ (/ </ 0.01/ )/ ICP1020/ ./ 349/ (/ </ 0.01/ )/ IH/ -/ ICP970/ ./ 063/ (/ </ 0.01/ )/ NIH/ -/ ICP1020/ ./ 363/ (/ </ 0.01/ )/ ACAIC300/ ./ 012/ (/ 0.314/ )/ ACMIC430/ ./ 010/ (/ 0.390/ )/ DCAEC3/ </ 0.001/ (/ 0.995/ )/ DCMEC120/ ./ 030/ (/ 0.039/ )/ -/ 0.006/ (/ 0.679/ )/ I2/ :/ 81.9920/ ./ 017/ (/ 0.178/ )/ I2/ :/ 80.9870/ ./ 025/ (/ 0.049/ )/ I2/ :/ 82.7390/ ./ 012/ (/ 0.269/ )/ I2/ :/ 83.6780/ ./ 014/ (/ 0.199/ )/ I2/ :/ 83.080/ -/ 0.003/ (/ 0.772/ )/ I2/ :/ 83.7810/ ./ 029/ (/ 0.019/ )/ I2/ :/ 79.302/ -/ 0.036/ (/ 0.009/ )/ I2/ :/ 78.9670/ ./ 013/ (/ 0.270/ )/ I2/ :/ 84.9600/ ./ 008/ (/ 0.512/ )/ I2/ :/ 87.3260/ ./ 044/ (/ 0.01/ )/ I2/ :/ 87.267/ -/ 0.025/ (/ 0.071/ )/ I289/ ./ 409/ -/ 0.023/ (/ 0.074/ )/ I2/ :/ 87.1080/ ./ 012/ (/ 0.303/ )/ I2/ :/ 83.7550/ ./ 008/ (/ 0.530/ )/ I2/ :/ 86.498/ -/ 0.020/ (/ 0.207/ )/ I2/ :/ 87.0310/ ./ 030/ (/ </ 0.01/ )/ I2/ :/ 73.290/ -/ 0.012/ (/ 0.206/ )/ I2/ :/ 73.5620/ ./ 179/ (/ </ 0.01/ )/ I2/ :/ 91.8560/ ./ 122/ (/ </ 0.01/ )/ I2/ :/ 90.9300/ ./ 145/ (/ </ 0.01/ )/ I2/ :/ 88.5560/ ./ 042/ (/ </ 0.01/ )/ I2/ :/ 84.1280/ ./ 147/ (/ </ 0.01/ )/ I2/ :/ 89.5070/ ./ 053/ (/ </ 0.01/ )/ I2/ :/ 89.4830/ ./ 155/ (/ </ 0.01/ )/ I2/ :/ 89.482/ -/ 0.014/ (/ 0.150/ )/ I2/ :/ 64.554/ -/ 0.009/ (/ 0.372/ )/ I2/ :/ 68.4210/ ./ 004/ (/ 0.792/ )/ I2/ :/ 00.010/ (/ 0.357/ )/ I2/ :/ 37.042/ Page8SLOC/ 面向对象/ 度量/ kOCAIC1020/ ./ 290/ (/ </ 0.01/ )/ OCAEC990/ ./ 130/ (/ </ 0.01/ )/ OCMIC1020/ ./ 325/ (/ </ 0.01/ )/ OCMEC980/ ./ 064/ (/ </ 0.01/ )/ AMMIC970/ ./ 065/ (/ </ 0.01/ )/ DMMEC870/ ./ 072/ (/ </ 0.01/ )/ OMMIC1020/ ./ 361/ (/ </ 0.01/ )/ OMMEC1020/ ./ 142/ (/ </ 0.01/ )/ CBI9100/ ./ 62/ (/ </ 0.01/ )/ DIT102/ -/ 0.034/ (/ 0.01/ )/ AID102/ -/ 0.034/ (/ 0.01/ )/ CLD910/ ./ 049/ (/ </ 0.01/ )/ NOC910/ ./ 048/ (/ </ 0.01/ )/ NOP101/ -/ 0.037/ (/ </ 0.01/ )/ NOD910/ ./ 048/ (/ </ 0.01/ )/ NOA102/ -/ 0.034/ (/ 0.01/ )/ NMO970/ ./ 041/ (/ 0.01/ )/ NMI980/ ./ 015/ (/ 0.290/ )/ NMA1020/ ./ 309/ (/ </ 0.01/ )/ SIX970/ ./ 016/ (/ 0.253/ )/ SPA770/ ./ 099/ (/ </ 0.01/ )/ SPD640/ ./ 094/ (/ </ 0.01/ )/ SP870/ ./ 130/ (/ </ 0.01/ )/ DPA970/ ./ 040/ (/ 0.013/ )/ DPD860/ ./ 079/ (/ </ 0.01/ )/ DP980/ ./ 070/ (/ </ 0.01/ )/ 为类/ 规模/ 度量/ 时/ 存在/ 混/ 和/ 效应/ ./ 对/ 其余/ 的/ 内聚性/ 度量/ 而言/ ,/ 无论/ 用/ NMIMP/ 还是/ SLOC/ 作为/ 类/ 规模/ 度量/ ,/ 总是/ 存在/ 混/ 和/ 效应/ ./ 在/ 大多数/ 情况/ 下/ ,/ 类/ 规模/ 呈现出/ “/ 正/ ”/ 的/ 混/ 和/ 效应/ ./ 对/ 一些/ 内聚性/ 度量/ 而言/ ,/ 这种/ 正/ 0.042/ (/ </ 0.01/ )/ I2/ :/ 84.6050/ ./ 036/ (/ </ 0.01/ )/ I2/ :/ 83.0660/ ./ 026/ (/ 0.084/ )/ I2/ :/ 82.0930/ ./ 017/ (/ 0.095/ )/ I2/ :/ 81.7420/ ./ 052/ (/ </ 0.01/ )/ I2/ :/ 88.6230/ ./ 029/ (/ </ 0.01/ )/ I2/ :/ 73.2590/ ./ 152/ (/ </ 0.01/ )/ I2/ :/ 89.2740/ ./ 026/ (/ 0.025/ )/ I2/ :/ 84.9880/ ./ 025/ (/ </ 0.01/ )/ I2/ :/ 69.8260/ ./ 019/ (/ 0.076/ )/ I2/ :/ 82.1680/ ./ 019/ (/ 0.076/ )/ I2/ :/ 82.1680/ ./ 025/ (/ </ 0.01/ )/ I2/ :/ 68.7570/ ./ 025/ (/ </ 0.01/ )/ I2/ :/ 67.2400/ ./ 011/ (/ 0.282/ )/ I2/ :/ 79.2400/ ./ 025/ (/ </ 0.01/ )/ I2/ :/ 67.0410/ ./ 019/ (/ 0.076/ )/ I2/ :/ 82.1680/ ./ 030/ (/ 0.019/ )/ I2/ :/ 89.0970/ ./ 052/ (/ </ 0.01/ )/ I2/ :/ 83.672/ -/ 0.043/ (/ 0.018/ )/ I2/ :/ 86.8180/ ./ 021/ (/ 0.049/ )/ I2/ :/ 83.6320/ ./ 040/ (/ </ 0.01/ )/ I2/ :/ 79.5020/ ./ 042/ (/ </ 0.01/ )/ I2/ :/ 71.2080/ ./ 056/ (/ </ 0.01/ )/ I2/ :/ 80.7280/ ./ 030/ (/ 0.018/ )/ I2/ :/ 89.0610/ ./ 031/ (/ </ 0.01/ )/ I2/ :/ 70.3510/ ./ 041/ (/ </ 0.01/ )/ I2/ :/ 88.961/ 的/ 混/ 和/ 效应/ 非常/ 强/ 以至于/ 完全/ 解释/ 了/ 它们/ 与/ 易变性/ 之间/ 的/ 关联/ 关系/ ./ 例如/ ,/ 在/ 控制/ NMIMP/ 或者/ SLOC/ 后/ ,/ LCOM2/ 、/ OCC/ 、/ PCC/ 和/ SNHD/ 与/ 易变性/ 之间/ 的/ 关联/ 完全/ 消失/ ./ 此外/ ,/ 类/ 规模/ 的/ “/ 负/ ”/ 的/ 混/ 和/ 效应/ 不仅/ Page9/ 有/ 可能/ 导致/ 关联/ 强度/ 的/ 改变/ ,/ 而且/ 也/ 有/ 可能/ 会/ 导致/ 关联/ 方向/ 的/ 改变/ ./ 例如/ ,/ 在/ 控制/ NMIMP/ 前/ ,/ LCOM4/ 与/ 易变性/ 正/ 相关/ ;/ 在/ 控制/ NMIMP/ 后/ ,/ LCOM4/ 与/ 易变性/ 负相关/ ./ 内聚性/ 度量/ 的/ 实验/ 结果表明/ :/ ①/ 当/ NMIMP/ 作为/ 类/ 规模/ 度量/ 时/ ,/ LCOM2/ 、/ LCOM4/ 、/ Co/ 、/ Co/ 、/ TCC/ 、/ LCC/ 、/ OCC/ 、/ PCC/ 、/ DCD/ 、/ DCI/ 和/ SNHD/ 的/ 验证/ 结果/ 被/ “/ 污染/ ”/ ;/ ②/ 当/ SLOC/ 作为/ 类/ 规模/ 度量/ 时/ ,/ LCOM1/ 、/ LCOM2/ 、/ LCOM4/ 、/ Co/ 、/ TCC/ 、/ OCC/ 、/ PCC/ 、/ DCD/ 、/ CAMC/ 和/ SNHD/ 的/ 验证/ 结果/ 被/ “/ 污染/ ”/ ./ (/ 2/ )/ 耦合/ 性/ 度量/ ./ DCAEC/ 的/ 平均/ 的/ 标准化/ 间接/ 效应/ 种群/ 值为/ 0/ ./ 在/ 其他/ 情况/ 下/ ,/ 所有/ 耦合/ 性/ 度量/ 的/ 平均/ 的/ 标准化/ 间接/ 效应/ 的/ 种群/ 值/ 都/ 不/ 为/ 0/ ./ 因此/ ,/ 对/ DCAEC/ 而言/ ,/ 类/ 规模/ 度量/ 不/ 存在/ 混/ 和/ 效应/ ./ 对/ 其余/ 的/ 耦合/ 性/ 度量/ 而言/ ,/ 总是/ 存在/ 混/ 和/ 效应/ ./ 耦合/ 性/ 度量/ 的/ 实验/ 结果表明/ :/ ①/ 当/ NMIMP/ 作为/ 类/ 规模/ 度量/ 时/ ,/ DCMEC/ 、/ OCMEC/ 、/ DMMEC/ 、/ OMMEC/ 和/ CBI/ 的/ 验证/ 结果/ 被/ “/ 污染/ ”/ ;/ ②/ 当/ SLOC/ 作为/ 类/ 规模/ 度量/ 时/ ,/ DCMEC/ 、/ OCMIC/ 和/ OCMEC/ 的/ 验证/ 结果/ 被/ “/ 污染/ ”/ ./ (/ 3/ )/ 继承/ 相关/ 度量/ ./ 当/ SLOC/ 作为/ 类/ 规模/ 度量/ 时/ ,/ SIX/ 的/ 平均/ 的/ 标准化/ 间接/ 效应/ 种群/ 值为/ 0/ ./ 在/ 其他/ 情况/ 下/ ,/ 所有/ 继承/ 相关/ 度量/ 的/ 平均/ 的/ 标准化/ 间接/ 效应/ 的/ 种群/ 值/ 都/ 不/ 为/ 0/ ./ 因此/ ,/ 对/ SIX/ 而言/ ,/ 当用/ NMIMP/ 作为/ 类/ 规模/ 度量/ 时/ 存在/ 混/ 和/ 效应/ ./ 对/ 其余/ 的/ 继承/ 相关/ 度量/ 而言/ ,/ 无论/ 用/ NMIMP/ 还是/ SLOC/ 作为/ 类/ 规模/ 度量/ ,/ 总是/ 存在/ 混/ 和/ 效应/ ./ 继承/ 相关/ 度量/ 的/ 实验/ 结果表明/ :/ ①/ 当/ NMIMP/ 作为/ 类/ 规模/ 度量/ 时/ ,/ DIT/ 、/ AID/ 、/ CLD/ 、/ NOC/ 、/ NOP/ 、/ NOD/ 、/ NOA/ 、/ NMO/ 、/ NMI/ 、/ NMA/ 、/ DPA/ 、/ DPD/ 和/ DP/ 的/ 验证/ 结果/ 被/ “/ 污染/ ”/ ;/ ②/ 当/ SLOC/ 作为/ 类/ 规模/ 度量/ 时/ ,/ DIT/ 、/ AID/ 、/ NOP/ 、/ NOA/ 、/ NMI/ 和/ NMA/ 的/ 验证/ 结果/ 被/ “/ 污染/ ”/ ./ 表/ 3/ 汇总/ 了/ 类/ 规模/ 的/ 潜在/ 混/ 和/ 效应/ 的/ 元/ 分析/ 结果/ ./ 其中/ ,/ 表/ 3/ (/ a/ )/ 给出/ 了/ 在/ 各/ 度量/ 维上/ 混/ 和/ 效应/ 方向/ 的/ 分布/ ,/ 表/ 3/ (/ b/ )/ 给出/ 了/ 在/ 各/ 度量/ 维上/ OO/ 度量/ 验证/ 结果/ “/ 污染/ ”/ 程度/ 的/ 分布/ ./ 此处/ ,/ “/ 正/ ”/ 指/ “/ +/ ”/ 或者/ “/ / ”/ ,/ “/ 负/ ”/ 指/ “/ -/ ”/ 或/ “/ / ”/ ,/ 强/ “/ 正/ ”/ 指/ “/ / ”/ ,/ 强/ “/ 负/ ”/ 为/ “/ / ”/ ./ 从表/ 3/ ,/ 我们/ 可以/ 观察/ 到/ :/ (/ 1/ )/ 在/ 每个/ 度量/ 维上/ ,/ 类/ 规模/ 对/ 超过/ 90/ %/ 的/ OO/ 度量/ 都/ 具有/ 混/ 和/ 效应/ ./ 当/ 不/ 区分/ 度量/ 维时/ ,/ 类/ 规模/ 对/ 95/ %/ 以上/ 的/ OO/ 度量/ 具有/ 混/ 和/ 效应/ ./ (/ 2/ )/ 在/ 每个/ 度量/ 维上/ ,/ 类/ 规模/ 对/ 超过/ 60/ %/ 的/ OO/ 度量/ 具有/ “/ 正/ ”/ 的/ 混/ 和/ 效应/ ./ 当/ 不/ 区分/ 度量/ 维时/ ,/ 类/ 规模/ 对/ 超过/ 80/ %/ 的/ OO/ 度量/ 具有/ “/ 正/ ”/ 的/ 混/ 和/ 效应/ ./ (/ 3/ )/ 对/ 内聚性/ 度量/ 和/ 继承/ 相关/ 的/ 度量/ 而言/ ,/ 至少/ 有/ 30/ %/ 的/ OO/ 度量/ 的/ 验证/ 结果/ 被/ “/ 污染/ ”/ ./ 当/ 不/ 区分/ 度量/ 维时/ ,/ 至少/ 有/ 35/ %/ 的/ OO/ 度量/ 的/ 验证/ 结果/ 被/ “/ 污染/ ”/ ./ (/ 4/ )/ 对/ 内聚性/ 度量/ 和/ 继承/ 相关/ 的/ 度量/ 而言/ ,/ 在/ 控制/ 类/ 的/ 规模/ 后/ ,/ 至少/ 有/ 22/ %/ 的/ OO/ 度量/ 与/ 易变性/ 的/ 相关性/ 消失/ ./ 当/ 不/ 区分/ 度量/ 维时/ ,/ 在/ 控制/ 类/ 的/ 规模/ 后/ ,/ 至少/ 有/ 30/ %/ 的/ OO/ 度量/ 与/ 易变性/ 的/ 相关性/ 消失/ ./ 表/ 3/ 类/ 规模/ 潜在/ 混/ 和/ 效应/ 的/ 元/ 分析/ 结果/ 汇总/ 类别/ 内聚性/ 度量/ 6139940/ 耦合/ 性/ 度量/ 950950/ 继承/ 相关/ 度量/ 9468212/ 所有/ 度量/ 8415914/ 类别/ 内聚性/ 度量/ 强/ “/ 正/ ”/ 强/ “/ 负/ ”/ 强/ “/ 正/ ”/ 强/ “/ 负/ ”/ 耦合/ 性/ 度量/ 2239560/ 继承/ 相关/ 度量/ 250150/ 所有/ 度量/ 7162412/ 上述/ 结果表明/ :/ (/ 1/ )/ 对/ OO/ 度量/ 而言/ ,/ 类/ 规模/ 的/ 混/ 和/ 效应/ 是/ 普遍存在/ 的/ ,/ 在/ 大多数/ 情况/ 下会/ 导致/ 人们/ 高估/ 它们/ 与/ 易变性/ 之间/ 的/ 关联/ 关系/ ;/ (/ 2/ )/ 许多/ OO/ 度量/ 的/ 验证/ 结果/ 被/ 类/ 规模/ 的/ 混/ 和/ 效应/ “/ 污染/ ”/ 了/ ,/ 其中/ 最/ 常见/ 的/ “/ 污染/ ”/ 是/ 类/ 规模/ 的/ 混/ 和/ 效应/ 导致/ OO/ 度量/ 与/ 易变性/ 之间/ 具有/ 虚假/ 的/ 关联/ 关系/ ./ 4.2/ 效度/ 威胁/ 效度/ 指/ 实验/ 结论/ 的/ 真实性/ 程度/ 和/ 有效性/ 程度/ ,/ 主要/ 包括/ 建构/ 效度/ 、/ 内部/ 效度/ 和/ 外部/ 效度/ ./ 建构/ 效度/ 指/ 依赖/ 变量/ 和/ 独立/ 变量/ 在/ 多/ 大程度/ 上/ 准确/ 地/ 度量/ 了/ 它们/ 所/ 要/ 代表/ 的/ 概念/ ./ 内部/ 效度/ 指/ 自变量/ 和/ 因变量/ 之间/ 关系/ 的/ 确定性/ 程度/ ,/ 涉及/ 到/ 实验/ 结论/ 的/ 真实性/ 程度/ ./ 外部/ 效度/ 指/ 自变量/ 和/ 因变量/ 之间/ 关系/ 的/ 可/ 推广性/ 程度/ ,/ 涉及/ 到/ 实验/ 结论/ 的/ 代表性/ 程度/ ./ 4.2/ ./ 1/ 建构/ 效度/ 的/ 威胁/ 本文/ 的/ 依赖/ 变量/ 是/ 一个/ 类/ 的/ 两个/ 子/ 版本/ 间/ 的/ SLOC/ 变更/ 量/ ./ 在/ 文献/ [/ 2/ ]/ 中/ ,/ Arisholm/ 等/ 人/ 手动/ 检查/ 了/ Java/ 软件/ 中/ 同一个/ 主/ 版本/ 下/ 的/ 两个/ 子/ 版本/ 间/ 的/ 变更/ 情况/ ,/ 发现/ 它们/ 是/ 由/ 结构性/ 变更/ 组成/ 的/ ./ 据此/ ,/ 以/ 两个/ 子/ 版本/ 间/ 的/ SLOC/ 差异/ 作为/ 依赖/ 变量/ 来/ 分析/ OO/ 度量/ 的/ 易变性/ 预测/ 能力/ 具有/ 一定/ 的/ 合理性/ ./ 然而/ ,/ 在/ 软件维护/ 实践/ 中/ ,/ 维护/ 人员/ 可能/ 会/ 由于/ 版本/ 发布/ 计划/ 、/ 可用/ 资源/ 等/ 外部/ 条件/ 的/ 因素/ 而/ 将/ 一些/ 结构/ 修正/ 推迟/ 进行/ ,/ 从而/ 有/ 可能/ 会/ 影响/ 分析/ 结果/ ./ 实际上/ ,/ 这一/ 问题/ 是/ 软件/ 度量/ 实证/ 研究/ 难以避免/ 的/ 通用/ 问题/ ./ 例如/ ,/ 在/ 验证/ OO/ 度量/ 的/ 缺陷/ 预测/ 能力/ Page10/ 时/ ,/ 许多/ 文献/ 以/ 软件/ 发布/ 后/ 一个/ 固定/ 时间段/ 长度/ (/ 例如/ 6/ 个/ 月/ )/ 内/ 报告/ 的/ bug/ 数目/ 作为/ 依赖/ 变量/ [/ 16/ ]/ ./ 在实践中/ ,/ 时间段/ 长度/ 的/ 选取/ 必定会/ 影响/ 分析/ 结果/ ./ 我们/ 计划/ 在/ 后续/ 研究/ 中以/ 跨度/ 更大/ 的/ 子/ 版本/ 为/ 实验/ 对象/ ,/ 分析/ 这一/ 威胁/ 对/ 实验/ 结果/ 的/ 影响/ ./ 本文/ 的/ 独立/ 变量/ 是/ 2/ 个/ 规模/ 度量/ 和/ 55/ 个/ OO/ 度量/ ,/ 先前/ 的/ 文献/ 已/ 对/ 它们/ 的/ 建构/ 效度/ 进行/ 了/ 调查/ [/ 11/ -/ 12/ ,/ 17/ -/ 18/ ]/ ./ 特别/ 地/ ,/ 我们/ 利用/ 商业/ 工具/ UnderstandforJava/ 提供/ 的/ API/ 收集/ 度量/ 数据/ ,/ 在/ 一定/ 程度/ 上/ 保证/ 了/ 度量/ 数据/ 收集/ 的/ 可靠性/ ./ 4.2/ ./ 2/ 内部/ 效度/ 的/ 威胁/ 本文/ 实验/ 结论/ 的/ 内部/ 效度/ 存在/ 3/ 个/ 可能/ 面临/ 的/ 威胁/ ./ 第/ 1/ 个/ 威胁/ 是/ 依赖/ 变量/ 计算/ 规则/ 的/ 未知/ 影响/ ./ 在/ 先前/ 的/ 分析/ 中/ ,/ 每一/ 被/ 增加/ 的/ 或者/ 被/ 删除/ 的/ 源代码/ 行/ 被/ 计为/ 1/ 个/ SLOC/ 变更/ ,/ 每一/ 被/ 修改/ 的/ 源代码/ 行/ 被/ 计为/ 2/ 个/ SLOC/ 变更/ (/ 下文/ 称/ 对应/ 的/ 依赖/ 变量/ 为/ “/ TS/ 变更/ ”/ )/ ./ 为/ 检查/ 计数/ 规则/ 对/ 实验/ 结论/ 的/ 影响/ ,/ 我们/ 使用/ 3/ 个/ 附加/ 的/ 计数/ 规则/ 生成/ 3/ 个/ 依赖/ 变量/ :/ (/ 1/ )/ “/ AS/ 变更/ ”/ ./ 只/ 对/ 被/ 增加/ 的/ 源代码/ 行/ 计数/ ,/ 每一/ 被/ 增加/ 的/ 源代码/ 行/ 被/ 记为/ 1/ 个/ SLOC/ 变更/ ;/ (/ 2/ )/ “/ DS/ 变更/ ”/ ./ 只/ 对/ 被/ 删除/ 的/ 源代码/ 行/ 计数/ ,/ 每一/ 被/ 删除/ 的/ 源代码/ 行/ 被/ 记为/ 1/ 个/ SLOC/ 变更/ ;/ (/ 3/ )/ “/ MS/ 变更/ ”/ ./ 只/ 对/ 被/ 修改/ 的/ 源代码/ 行/ 计数/ ,/ 每一/ 被/ 修改/ 的/ 源代码/ 行/ 被/ 记为/ 1/ 个/ SLOC/ 变更/ ./ 图/ 2/ 给出/ 了/ 在/ 4/ 个/ 不同/ 依赖/ 变量/ 下/ 102/ 个/ 数据/ 集/ 的/ Java/ 类上/ 的/ SLOC/ 变更/ 量/ 的/ 分布/ 情况/ ./ 在/ 每/ 一个/ 特定/ 的/ 数据/ 集上/ ,/ 每一/ SLOC/ 变更/ 量/ 区间/ (/ 0/ 、/ 1/ ~/ 10/ 、/ 11/ ~/ 20/ 、/ 21/ ~/ 30/ 、/ 31/ ~/ 50/ 、/ 51/ ~/ 100/ 、/ 101/ ~/ 200/ 图/ 3/ 不同/ 依赖/ 变量/ 下/ 的/ 元/ 分析/ 实验/ 结果/ 和/ >/ 200/ )/ 的/ 分布/ 用/ 一个/ 百分比/ 表示/ ./ 由于/ 总共/ 有/ 102/ 个/ 数据/ 集/ ,/ 对/ 每/ 一/ 给定/ 的/ SLOC/ 变更/ 量/ 区间/ 而言/ ,/ 总共/ 有/ 102/ 个/ 百分比/ ,/ 我们/ 因此/ 用/ 一个/ 箱/ 线图/ 描述/ 其/ 总体/ 分布/ ./ 例如/ ,/ 对于/ SLOC/ 变更/ 区间/ “/ 1/ ~/ 10/ ”/ ,/ 102/ 个/ 数据/ 集上/ “/ AS/ 变更/ ”/ 分布/ 的/ 中位值/ 为/ 10.96/ %/ ,/ 第三/ 四分/ 位数/ 为/ 17.65/ %/ ,/ 第一/ 四分/ 位数/ 为/ 5.73/ %/ ./ 由图/ 2/ 的/ SLOC/ 变更/ 区间/ 0/ 上/ 的/ 分布/ 可以/ 看出/ ,/ 不管/ 对/ 哪/ 一种/ 依赖/ 变量/ ,/ 超过/ 50/ %/ 以上/ 的/ 数据/ 集中/ 有/ 65/ %/ 以上/ 的/ Java/ 类/ 在/ 系统/ 版本/ 演化过程/ 中/ 没有/ 发生/ 变更/ ./ 图/ 2/ 不同/ 依赖/ 变量/ 下/ 的/ 类/ 的/ SLOC/ 变更/ 量/ 分布图/ 3/ 给出/ 了/ 在/ 不同/ 依赖/ 变量/ 下/ 的/ 实验/ 分析/ 结果/ ./ 从图/ 3/ (/ a/ )/ 可以/ 看出/ ,/ 当/ NMIMP/ 或者/ SLOC/ 作为/ 类/ 规模/ 度量/ 时/ ,/ 不管/ 在/ 哪个/ 依赖/ 变量/ 下/ ,/ 类/ 规模/ 的/ 混/ 和/ 效应/ 对/ 90/ %/ 以上/ 的/ OO/ 度量/ 都/ 存在/ ,/ 其中/ 主要/ 是/ “/ 正/ ”/ 的/ 混/ 和/ 效应/ ./ 从图/ 3/ (/ b/ )/ 可以/ 看出/ ,/ 当/ NMIMP/ 或者/ SLOC/ 作为/ 类/ 规模/ 度量/ 时/ ,/ 不管/ 在/ 哪个/ 依赖/ 变/ Page11/ 量/ 下/ ,/ 30/ %/ 以上/ 的/ OO/ 度量/ 的/ 验证/ 结果/ 都/ 被/ “/ 污染/ ”/ 了/ ,/ 其中/ 大部分/ 度量/ 与/ 易变性/ 之间/ 的/ 关联/ 都/ 是/ 虚假/ 的/ ./ 总体/ 上/ ,/ 上述/ 结果表明/ 依赖/ 变量/ 的/ 计算/ 规则/ 对/ 我们/ 的/ 实验/ 结论/ 没有/ 大/ 的/ 影响/ ./ 第/ 2/ 个/ 威胁/ 是/ 类/ 规模/ 度量/ 的/ 选择/ 对/ 实验/ 结论/ 的/ 未知/ 影响/ ./ 在/ 前/ 文中/ ,/ 我们/ 只/ 使用/ NMIMP/ 和/ SLOC/ 作为/ 类/ 规模/ 的/ 度量/ ./ 为/ 调查/ 这个/ 威胁/ ,/ 我们/ 使用/ 如下/ 类/ 规模/ 度量/ 重新/ 分析/ 潜在/ 混/ 和/ 效应/ :/ (/ 1/ )/ NM/ ./ 一个/ 类中/ 的/ 方法/ 总数/ ,/ 包括/ 继承/ 的/ 方法/ 和/ 非/ 继承/ 的/ 方法/ ;/ (/ 2/ )/ NAIMP/ ./ 类中/ 属性/ 的/ 数目/ (/ 排除/ 继承/ 的/ 属性/ )/ ;/ (/ 3/ )/ NA/ ./ 类中/ 的/ 属性/ 总数/ ,/ 包括/ 继承/ 的/ 和/ 非/ 继承/ 的/ ;/ (/ 4/ )/ Stmts/ ./ 类/ 的/ 所有/ 方法/ 中/ 语句/ 总数/ ,/ 包括/ 声明/ 语句/ 和/ 可/ 执行/ 语句/ ./ 图/ 3/ 给出/ 了/ 不同/ 的/ 类/ 规模/ 度量/ 下/ 的/ 实验/ 结果/ ,/ 容易/ 看出/ :/ (/ 1/ )/ 不管/ 对/ 哪个/ 依赖/ 变量/ 使用/ 哪个/ 规模/ 度量/ ,/ 类/ 规模/ 的/ 混/ 和/ 效应/ 对/ 90/ %/ 以上/ 的/ OO/ 度量/ 都/ 存在/ ;/ (/ 2/ )/ 对除/ NA/ 外/ 的/ 其他/ 规模/ 度量/ 而言/ ,/ 20/ %/ 以上/ 的/ OO/ 度量/ 的/ 验证/ 结果/ 都/ 被/ 类/ 规模/ 的/ 混/ 和/ 效应/ “/ 污染/ ”/ 了/ ./ 由此可知/ ,/ 类/ 规模/ 度量/ 的/ 选择/ 对/ 我们/ 的/ 实验/ 结论/ 也/ 没有/ 实质性/ 的/ 影响/ ./ 第/ 3/ 个/ 威胁/ 是/ 斯皮尔曼/ 相关系数/ 到/ 皮尔森/ 相关系数/ 的/ 转换/ 对/ 实验/ 结论/ 的/ 未知/ 影响/ ./ 在/ 先前/ 的/ 分析/ 中/ ,/ 我们/ 首先/ 将/ 斯皮尔曼/ 相关系数/ 转换/ 为/ 皮尔森/ 相关系数/ ,/ 然后/ 在/ 此基础/ 上/ 计算/ “/ 总/ 效应/ ”/ 、/ “/ 直接/ 效应/ ”/ 和/ “/ 间接/ 效应/ ”/ 并/ 进行/ 元/ 分析/ ./ 由于/ 在/ 我们/ 的/ 数据/ 集上/ ,/ 大多数/ OO/ 度量/ 值/ 都/ 不/ 服从/ 正态分布/ ,/ 因此/ 这种/ 处理/ 是/ 合适/ 的/ ./ 尽管如此/ ,/ 有人/ 可能/ 会/ 认为/ 这种/ 变换/ 实际上/ 是/ 不必要/ 的/ ,/ 因为/ 皮尔森/ 相关系数/ 具有/ 一定/ 的/ 鲁棒性/ ,/ 数据/ 是否/ 服从/ 正态分布/ 对/ 其/ 影响/ 不大/ ./ 为/ 消除/ 这个/ 威胁/ ,/ 我们/ 直接/ 使用/ 皮尔森/ 相关系数/ 重新/ 分析/ 类/ 规模/ 的/ 混/ 和/ 效应/ ,/ 发现/ 实验/ 结果/ 非常/ 类似/ ./ 因此/ ,/ 这种/ 转换/ 对/ 我们/ 的/ 实验/ 结论/ 的/ 影响/ 也/ 很小/ ./ 4.2/ ./ 3/ 外部/ 效度/ 的/ 威胁/ 本文/ 实验/ 结论/ 的/ 外部/ 效度/ 存在/ 3/ 个/ 可能/ 面临/ 的/ 威胁/ :/ 第/ 1/ 个/ 威胁/ 是/ 所得/ 的/ 实验/ 结论/ 可能/ 只/ 对/ 特定/ 类别/ 的/ 软件系统/ 适用/ ./ 在/ 实验/ 中/ ,/ 我们/ 在/ 选择/ 这/ 102/ 个/ 系统/ 时/ ,/ 事先/ 没有/ 对/ 它们/ 的/ 规模/ 和/ 类型/ 做/ 任何/ 要求/ ,/ 只/ 要求/ 其/ 实现/ 语言/ 是/ Java/ ,/ 这/ 与/ 前人/ 的/ 系统/ 选择/ 方法/ 是/ 一致/ 的/ [/ 7/ ]/ ./ 如前/ 文/ 所述/ ,/ 这些/ 软件系统/ 涵盖/ 了/ 软件开发/ 、/ 因特网/ 、/ 科学/ // 工程/ 、/ 游戏/ // 娱乐/ 、/ 通讯/ 、/ 办公/ // 业务/ 、/ 系统/ 、/ 多媒体/ 和/ 数据库/ 等/ 主要/ 类别/ ,/ 在/ 这些/ 数据/ 集上/ 得出/ 的/ 结论/ 不太可能/ 只/ 对/ 特定/ 类别/ 的/ 软件系统/ 适用/ ;/ 第/ 2/ 个/ 威胁/ 是/ 所得/ 的/ 实验/ 结论/ 有/ 可能/ 不能/ 推广/ 到/ 其他/ 系统/ 上/ ./ 在/ 前文/ 的/ 分析/ 中/ ,/ 我们/ 使用/ 了/ 元/ 分析/ 中/ 的/ 随机/ 效应/ 模型/ 来/ 进行/ 分析/ ./ 根据/ 文献/ [/ 6/ ]/ ,/ 随机/ 效应/ 模型/ 不仅/ 考虑/ 了/ “/ 研究/ ”/ (/ 即/ 系统/ )/ 内/ 的/ 样本/ 误差/ ,/ 也/ 考虑/ 了/ “/ 研究/ ”/ 间/ 的/ 差异/ ,/ 因此/ 所得/ 的/ 结论/ 可以/ 推广/ 到/ 其他/ “/ 研究/ ”/ 上/ ;/ 第/ 3/ 个/ 威胁/ 是/ 所得/ 的/ 实验/ 结论/ 可能/ 只/ 对/ Java/ 软件系统/ 适用/ ,/ 而/ 不能/ 推广/ 到/ 其他/ 语言/ 实现/ 的/ 软件系统/ 上/ ./ 我们/ 只/ 使用/ 了/ Java/ 软件系统/ 的/ 数据/ 进行/ 分析/ ,/ 其他/ 语言/ 实现/ 的/ 系统/ 在/ 结构/ 特性/ 上/ 有/ 可能/ 有/ 差别/ ,/ 这一/ 威胁/ 有待/ 在/ 将来/ 的/ 工作/ 中/ 进一步/ 调查/ ./ 5/ 结束语/ 我们/ 最近/ 的/ 研究/ 指出/ 类/ 的/ 规模/ 对/ OO/ 度量/ 的/ 易变性/ 预测/ 能力/ 具有/ 很强/ 的/ 混/ 和/ 效应/ ,/ 因此/ 需要/ 将/ 其/ 作为/ 混/ 和/ 变量/ 来/ 考虑/ ,/ 这/ 对/ 正确/ 地/ 分析/ OO/ 度量/ 与/ 易变性/ 之间/ 的/ 关系/ 具有/ 重要/ 的/ 实际意义/ ./ 但/ 我们/ 先前/ 的/ 研究/ 只/ 分析/ 了/ 一个/ 软件系统/ ,/ 其/ 结论/ 是否/ 能够/ 推广/ 到/ 其他/ 系统/ 上/ 需要/ 进一步/ 调查/ ./ 为此/ ,/ 本文/ 采用/ 元/ 分析方法/ 和/ 102/ 个/ Java/ 系统/ 上/ 的/ 数据/ 对类/ 规模/ 的/ 混/ 和/ 效应/ 进行/ 了/ 更/ 细致/ 的/ 分析/ ./ 我们/ 的/ 实验/ 结果/ 证实/ 和/ 强化/ 了/ 先前/ 的/ 结论/ :/ 类/ 规模/ 的/ 混/ 和/ 效应/ 是/ 广泛/ 存在/ 的/ ,/ 而且/ 在/ 大多数/ 情况/ 下会/ 导致/ 高估/ OO/ 度量/ 的/ 易变性/ 预测/ 能力/ ./ 因此/ 在/ OO/ 度量/ 易变性/ 预测/ 能力/ 研究/ 中/ ,/ 人们/ 确实/ 需要/ 考虑/ 类/ 规模/ 这个/ 混/ 和/ 变量/ ,/ 以便/ 得出/ 正确/ 的/ 结论/ ./ 在/ 将来/ 的/ 工作/ 中/ ,/ 我们/ 计划/ 对/ 软件缺陷/ 预测/ 上下文/ 中/ 的/ 规模/ 混/ 和/ 效应/ 进行/ 元/ 分析/ 研究/ [/ 19/ ]/ ./ 

