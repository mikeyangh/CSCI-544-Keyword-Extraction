Page1/ 基于/ 谓词/ 执行/ 信息/ 分析/ 的/ 自/ 适应/ 缺陷/ 定位/ 算法/ 郝鹏/ 1/ )/ 郑征/ 1/ )/ 张震宇/ 2/ )/ 高乙超/ 1/ )/ 宫成/ 1/ )/ 薛云志/ 3/ )/ 1/ )/ (/ 北京航空航天大学/ 自动化/ 科学/ 与/ 电气/ 工程学院/ 北京/ 100191/ )/ 2/ )/ (/ 中国科学院/ 软件/ 研究所/ 北京/ 100190/ )/ 3/ )/ (/ 中国科学院/ 软件/ 研究所/ 基础/ 软件/ 测评/ 实验室/ 北京/ 100190/ )/ 摘要/ 查找/ 程序/ 中/ 缺陷/ 代码/ 所在/ 的/ 位置/ 是/ 一项/ 值得/ 深入开展/ 的/ 研究/ ,/ 同时/ 也/ 是/ 实际/ 软件/ 调试/ 过程/ 中/ 所/ 面临/ 的/ 一个/ 难题/ ,/ 这一/ 过程/ 往往/ 需要/ 耗费/ 大量/ 的/ 时间/ 和/ 人力资源/ ./ 研究/ 软件缺陷/ 定位/ 的/ 一类/ 重要/ 方法/ 是/ 基于/ 谓词/ 的/ 统计学/ 缺陷/ 定位/ 方法/ (/ 简称/ PBSFL/ )/ ./ PBSFL/ 通过/ 比较/ 程序运行/ 成功/ 与/ 失败/ 时/ 谓词/ 的/ 执行/ 信息/ 差异/ 来/ 获得/ 谓词/ 与/ 缺陷/ 的/ 关联/ 程度/ ./ 然而/ 实验/ 研究/ 发现/ ,/ 固定/ 算法/ 中/ 信息/ 利用/ 的/ 强度/ 会/ 造成/ 信息/ 利用/ 不足/ 或/ 过分/ 利用/ 现象/ 的/ 发生/ ,/ 导致/ 现有/ PBSFL/ 方法/ 对/ 某些/ 缺陷/ 定位/ 不够/ 准确/ ./ 针对/ 这一/ 问题/ ,/ 文中/ 设计/ 了/ 一种/ 基于/ 谓词/ 执行/ 信息/ 分析/ 的/ 自/ 适应/ 缺陷/ 定位/ 算法/ ,/ 该/ 算法/ 通过/ 分析/ 测试用例/ 运行/ 时/ 谓词/ 的/ 执行/ 情况/ 来/ 动态/ 地为/ 每个/ 谓词/ 选择/ 合适/ 的/ 信息/ 利用/ 强度/ ./ 实验/ 结果表明/ ,/ 该/ 方法/ 在/ Siemens/ 和/ space/ 两个/ 程序包/ 上/ 表现/ 出/ 很/ 好/ 的/ 定位/ 效果/ 以及/ 定位/ 稳定性/ ./ 关键词/ 统计学/ 缺陷/ 定位/ ;/ 谓词/ 执行/ 信息/ ;/ 自/ 适应/ ;/ 软件测试/ ;/ 程序/ 分析/ 1/ 引言/ 现代/ 软件/ 和/ 软件系统/ 中/ 仍会/ 不可避免/ 地/ 存在/ 缺陷/ ,/ 而/ 软件/ 调试/ 则/ 是/ 一个/ 查找/ 软件缺陷/ 的/ 有效/ 手段/ ./ 为了/ 定位/ 并且/ 修复/ 软件缺陷/ ,/ 一种/ 常用/ 的/ 做法/ 是/ 调试/ 失效/ 的/ 程序/ ./ 由于/ 手工/ 调试/ 存在/ 耗时/ 、/ 易错/ 等/ 缺点/ ,/ 因此/ 研究/ 人员/ 一直/ 致力于/ 开发/ 自动化/ 或/ 半自动化/ 的/ 软件缺陷/ 定位/ 技术/ ./ 近/ 几十年/ 里/ ,/ 软件缺陷/ 定位/ 领域/ 研究/ 活跃/ ,/ 一批/ 统计学/ 缺陷/ 定位/ (/ StatisticalFaultLocalization/ ,/ SFL/ )/ 方法/ 被/ 相继/ 提出/ [/ 1/ -/ 14/ ]/ ./ SFL/ 方法/ 通过/ 收集/ 大量/ 成功/ 与/ 失败/ 测试用例/ 运行/ 时/ 程序/ 元素/ (/ 例如/ 语句/ [/ 1/ -/ 4/ ]/ 、/ 谓词/ [/ 5/ -/ 8/ ]/ 、/ 分支/ [/ 9/ ]/ 或/ 信息流/ [/ 10/ ]/ )/ 的/ 动态/ 信息/ ,/ 然后/ 利用/ 这些/ 动态/ 信息/ 与/ 程序/ 失效/ 之间/ 的/ 关联性/ 为/ 每个/ 程序/ 元素/ 计算/ 可疑/ 度值/ ./ 从/ 直观/ 上/ 理解/ ,/ 如果/ 关联性/ 越强/ ,/ 该/ 程序/ 元素/ 的/ 可疑/ 度值/ 就/ 越/ 大/ ./ 最后/ ,/ 程序开发/ 人员/ 按照/ 可疑/ 度值/ 由大到/ 小/ 的/ 顺序/ 依次/ 检查程序/ 元素/ 的/ 排位/ 表/ ,/ 直到/ 最终/ 找到/ 存在/ 缺陷/ 的/ 程序/ 元素/ ./ 尽管/ SFL/ 方法/ 可以/ 取得/ 很/ 好/ 的/ 定位/ 效果/ ,/ 但是/ 该类/ 方法/ 的/ 有效性/ 仍会/ 受/ 一些/ 因素/ 的/ 影响/ ./ 例如/ ,/ 在/ 之前/ 的/ 研究/ 中/ ,/ 我们/ 曾/ 指出/ ,/ 基于/ 谓词/ 的/ 统计学/ 缺陷/ 定位/ (/ Predicate/ -/ BasedStatisticalFaultLocalization/ ,/ PBSFL/ )/ 方法/ 的/ 定位/ 效果/ 会受/ 谓词/ 执行/ 信息量/ 多少/ 的/ 影响/ [/ 8/ ]/ ./ 对/ 谓词/ 执行/ 信息/ 利用/ 不足/ 或/ 过分/ 利用/ 都/ 会/ 削弱/ 缺陷/ 相关/ 谓词/ 与/ 程序/ 失效/ 之间/ 的/ 关联性/ ,/ 造成/ PBSFL/ 方法/ 无法/ 有效/ 区分/ 缺陷/ 谓词/ 与非/ 缺陷/ 谓词/ ,/ 从而/ 影响/ 定位精度/ ./ 谓词/ 执行/ 信息量/ 是/ 指/ 程序运行/ 时/ 谓词/ 实际/ 可以/ 提供/ 信息/ 的/ 数量/ ,/ 谓词/ 提供/ 的/ 信息/ 包括/ 谓词/ 分别/ 判断/ 为/ “/ 真/ ”/ 或/ “/ 假/ ”/ 的/ 次数/ 以及/ 判断/ 的/ 顺序/ ./ 由于/ 程序执行/ 剖面/ 不同/ ,/ 导致/ 不同/ 谓词/ 在/ 每次/ 程序运行/ 时/ 提供/ 信息/ 的/ 数量/ 也/ 存在/ 着/ 差异/ ./ 从/ 直观/ 上/ 理解/ ,/ 谓词/ 执行/ 的/ 次数/ 越/ 多/ ,/ 可以/ 提供/ 的/ 信息/ 数量/ 也/ 就/ 越/ 多/ ./ 谓词/ 执行/ 信息/ 利用/ 强度/ 是/ 指/ 对/ 谓词/ 执行/ 信息提取/ 多/ 与/ 少/ 的/ 衡量/ ./ 如果/ 提取/ 的/ 信息量/ 超过/ 谓词/ 实际/ 可以/ 提供/ 的/ 信息/ 数量/ ,/ 则/ 会/ 造成/ 过分/ 利用/ 谓词/ 执行/ 信息/ 的/ 现象/ ;/ 相反/ ,/ 则/ 会/ 导致/ 信息/ 利用/ 不足/ ./ 现有/ PBSFL/ 方法/ 对/ 程序/ 中/ 所有/ 插桩/ 谓词/ 都/ 采用/ 统一/ 且/ 固定/ 的/ 信息/ 利用/ 强度/ ,/ 无法/ 做到/ 根据/ 程序/ 实际/ 运行/ 情况/ 充分利用/ 谓词/ 的/ 执行/ 信息/ ,/ 这/ 也/ 促使/ 我们/ 对/ 如何/ 有效/ 利用/ 谓词/ 执行/ 信息/ 来/ 提高/ PBSFL/ 方法/ 的/ 定位精度/ 以及/ 适应性/ 进行/ 深入研究/ ./ 在/ 本文/ 中/ ,/ 我们/ 提出/ 一种/ 新/ 的/ 谓词/ 执行/ 信息/ 利用/ 方法/ ,/ 该/ 方法/ 根据/ 测试用例/ 运行/ 时/ 每个/ 谓词/ 的/ 执行/ 情况/ ,/ 动态/ 地/ 选择/ 适合/ 于/ 每个/ 谓词/ 的/ 信息/ 利用/ 强度/ ./ 因为/ 不同/ 测试用例/ 运行/ 时/ 程序/ 的/ 执行/ 谱/ 不同/ ,/ 导致/ 程序/ 中/ 谓词/ 的/ 执行/ 情况/ 也/ 不尽相同/ ,/ 最/ 直观/ 表现/ 为/ 不同/ 谓词/ 在/ 相同/ 测试用例/ 运行/ 时/ 取值/ 为/ “/ 真/ ”/ 或/ “/ 假/ ”/ 的/ 顺序/ 以及/ 次数/ 不同/ ./ 如果/ 对/ 所有/ 谓词/ 均/ 采用/ 相同/ 的/ 信息/ 利用/ 强度/ ,/ 则/ 会/ 不可避免/ 地/ 对/ 某些/ 谓词/ 存在/ 信息/ 利用/ 不足/ 或/ 过分/ 利用/ 的/ 情况/ ./ 只有/ 充分利用/ 每个/ 谓词/ 的/ 执行/ 信息/ ,/ 才/ 可能/ 达到/ 提高/ 算法/ 定位精度/ 的/ 目的/ ,/ 因此/ 需要/ 根据/ 每个/ 谓词/ 执行/ 信息量/ 的/ 变化/ 有/ 针对性/ 地/ 选择/ 信息/ 利用/ 强度/ ,/ 即/ 让/ 算法/ 的/ 信息/ 利用/ 强度/ 适应/ 于/ 谓词/ 执行/ 信息量/ 的/ 变化/ ./ 为了/ 验证/ 这一/ 想法/ ,/ 我们/ 提出/ 一种/ 基于/ 谓词/ 执行/ 信息/ 分析/ 的/ 自/ 适应/ 缺陷/ 定位/ 算法/ (/ Self/ -/ adaptiveFaultLocalizationAlgorithmbasedonPredicateexecutioninformationAnalysis/ ,/ 以下/ 简称/ Safla/ )/ ./ 与/ 现有/ PBSFL/ 方法/ 的/ 流程/ 类似/ ,/ Safla/ 也/ 是/ 先/ 收集/ 缺陷/ 程序运行/ 时/ 谓词/ 的/ 执行/ 信息/ ,/ 然后/ 进行/ 信息/ 的/ 提取/ 和/ 转换/ ,/ 再/ 根据/ 缺陷/ 关联度/ 公式/ 计算/ 每个/ 谓词/ 的/ 可疑/ 度/ ,/ 最后/ 给出/ 谓词/ 可疑/ 度/ 的/ 排序/ ./ 与/ 现有/ 方法/ 固定/ 信息/ 利用/ 强度/ 的/ 做法/ 不同/ 的/ 是/ :/ Safla/ 采取/ 分析/ 失败/ 测试用例/ 运行/ 时/ 谓词/ 的/ 执行/ 情况/ ,/ 动态/ 地/ 选择/ 适合/ 于/ 每个/ 谓词/ 的/ 信息/ 利用/ 强度/ ,/ 确保/ 谓词/ 执行/ 信息/ 的/ 利用/ 更加/ 充分/ 有效/ ./ 为了/ 验证/ Safla/ 的/ 定位/ 效果/ ,/ 我们/ 选取/ CBI/ [/ 5/ ]/ 、/ SOBER/ [/ 6/ ]/ 、/ Mann/ -/ Whitney/ 、/ Wilcoxon/ 、/ F/ -/ test/ 、/ t/ -/ test/ [/ 7/ ]/ 以及/ Nbit/ -/ Pesla/ [/ 8/ ]/ 算法/ 进行/ 对比/ ,/ 并/ 在/ Siemens/ 和/ space/ 程序包/ 上/ 进行/ 实验/ ./ 实验/ 结果表明/ ,/ Safla/ 在/ Siemens/ 和/ space/ 两个/ 程序包/ 上/ 表现/ 出/ 很/ 好/ 地/ 定位/ 效果/ 以及/ 定位/ 稳定性/ ./ 本文/ 贡献/ 总结/ 如下/ :/ (/ 1/ )/ 提出/ 自/ 适应/ 选择/ 信息/ 利用/ 强度/ 的/ 思想/ ,/ 并/ 设计/ 了/ 一种/ 具体/ 的/ 选择/ 方法/ ./ (/ 2/ )/ 基于/ 上述/ 思想/ ,/ 提出/ 了/ 一种/ 新/ 的/ 基于/ 谓词/ 的/ 统计学/ 缺陷/ 定位/ 方法/ ./ 本文/ 第/ 2/ 节/ 简单/ 介绍/ 基于/ 谓词/ 的/ 统计学/ 缺陷/ 定位/ 方法/ 的/ 研究/ 现状/ ;/ 第/ 3/ 节/ 给出/ 研究/ 动机/ ;/ 第/ 4/ 节对/ Safla/ 的/ 基本/ 思想/ 和/ 详细/ 步骤/ 进行/ 介绍/ ;/ 第/ 5/ 节/ 给出/ Safla/ 分别/ 在/ Siemens/ 和/ space/ 程序包/ 中/ 进行/ 实验/ 的/ 结果/ ,/ 并/ 与/ 多个/ 典型/ 算法/ 进行/ 比较/ 分析/ ,/ 得出结论/ ;/ 第/ 6/ 节对/ 实验/ 结果/ 的/ 有效性/ 进行/ 讨论/ ;/ 第/ 7/ 节是/ 对/ 本文/ 的/ 总结/ 和/ 展望/ ./ 2/ 相关/ 研究/ 近十年/ 里/ ,/ 关于/ 使用/ 统计学/ 方法/ 进行/ 缺陷/ 定位/ Page3/ 已有/ 大量/ 的/ 研究/ ./ 统计学/ 缺陷/ 定位/ 方法/ 通常/ 要求/ 具备/ 3/ 个/ 要素/ :/ 大量/ 测试用例/ 、/ 相应/ 测试用例/ 的/ 执行/ 剖面/ 以及/ 测试用例/ 的/ 运行/ 结果/ (/ 成功/ 或/ 失败/ )/ ./ 其中/ ,/ 执行/ 剖面/ 包含/ 测试用例/ 经过/ 每条/ 可/ 执行/ 语句/ 、/ 分支/ 或/ 插/ 桩/ 谓词/ 时/ 的/ 覆盖/ 信息/ ./ 由于/ 本文/ 所/ 讨论/ 的/ 方法/ 属于/ 基于/ 谓词/ 的/ 统计学/ 缺陷/ 定位/ 方法/ 范畴/ ,/ 因此/ 本/ 节/ 主要/ 对/ 现有/ 的/ 几种/ 基于/ 谓词/ 的/ 统计学/ 缺陷/ 定位/ 方法/ 进行/ 简单/ 的/ 介绍/ ./ CBI/ [/ 5/ ]/ 算法/ 提出/ 者/ 认为/ ,/ 程序运行/ 失败/ 与/ 程序/ 中/ 缺陷/ 谓词/ 被/ 判断/ 为/ “/ 真/ ”/ 有关/ ./ 因此/ ,/ 该/ 算法/ 建立/ 的/ 统计学/ 模型/ 是/ 比较/ 程序运行/ 成功/ 与/ 失败/ 时/ 相应/ 谓词/ 被/ 判断/ 为/ “/ 真/ ”/ 的/ 概率/ ./ 若/ 概率/ 数值/ 差异/ 越大/ ,/ 则/ 认为/ 该/ 谓词/ 越/ 可疑/ ./ 在此之后/ 提出/ 的/ SOBER/ [/ 6/ ]/ 算法/ 弥补/ 了/ CBI/ 模型/ 上/ 的/ 一些/ 缺陷/ ,/ 如/ CBI/ 模型/ 没有/ 考虑/ 分布/ 情况/ ,/ 而/ 只是/ 单纯/ 地/ 将/ 谓词/ 的/ 两个/ 不同/ 期望值/ 相减/ ./ 若/ 遇到/ 两种/ 分布/ 具有/ 相同/ 的/ 期望/ 而/ 方差/ 不同/ 的/ 情况/ 时/ ,/ CBI/ 算法/ 将/ 无法/ 发挥/ 很/ 好/ 的/ 定位/ 作用/ ./ SOBER/ 模型/ 通过/ 比较/ 谓词/ evaluationbias/ (/ 程序/ 一次/ 运行/ 过程/ 中/ 谓词/ 被/ 判断/ 为/ “/ 真/ ”/ 的/ 概率/ )/ 在/ 成功/ 与/ 失败/ 分布/ 中/ 的/ 差异/ 来/ 寻找/ 缺陷/ 相关/ 谓词/ ./ 实验/ 证明/ ,/ 考虑/ 分布/ 情况/ 的/ SOBER/ 算法/ 的/ 定位/ 效果/ 要/ 优于/ CBI/ 算法/ ./ 但/ 后来/ 大量/ 实验/ 表明/ ,/ SOBER/ 模型/ 中/ 谓词/ 在/ 成功/ 与/ 失败/ 测试用例/ 下/ 服从/ 正态分布/ 的/ 假设/ 并/ 不合理/ ,/ 这/ 也/ 直接/ 影响/ 了/ SOBER/ 算法/ 的/ 最终/ 定位/ 效果/ ./ 于是/ ,/ Zhang/ 等/ 人/ [/ 7/ ]/ 提出/ ,/ 在/ 总体/ 分布/ 未知/ 的/ 前提/ 下/ ,/ 应/ 使用/ 统计学/ 中非/ 参数/ 假设检验/ 法来/ 比较/ 谓词/ evaluationbias/ 在/ 成功/ 与/ 失败/ 两类/ 分布/ 中/ 是否/ 相同/ ./ 实验/ 结果显示/ ,/ 非/ 参数/ 假设检验/ 法能/ 定位/ 到/ 更/ 多/ 的/ 缺陷/ ./ 在此之前/ 的/ 研究/ 中/ ,/ 我们/ 曾/ 提出/ Nbit/ -/ Pesla/ 算法/ [/ 8/ ]/ ,/ 并/ 在/ 实验/ 中/ 证明/ ,/ 2bit/ -/ Pesla/ 算法/ 的/ 定位精度/ 要/ 明显/ 优于/ SOBER/ 算法/ 和/ 非/ 参数/ 假设检验/ 法/ ,/ 但/ 扩展/ 算法/ (/ 例如/ :/ 3bit/ -/ Pesla/ 、/ 4bit/ -/ Pesla/ 等/ )/ 的/ 定位精度/ 反而/ 呈现出/ 下降/ 的/ 趋势/ ./ 为此/ 我们/ 提出/ 一种/ 解决办法/ ,/ 采取/ 对/ 不同/ 缺陷/ 版本/ 程序/ 使用/ 不同/ “/ N/ ”/ 值/ 的/ Nbit/ -/ Pesla/ 算法/ 进行/ 计算/ ,/ 最终/ 定位/ 效果/ 获得/ 了/ 提高/ ./ 但是/ 该/ 方法/ 对/ 同一/ 程序/ 中/ 的/ 所有/ 谓词/ 采用/ 相同/ 的/ 信息/ 利用/ 强度/ ,/ 对/ 一些/ 谓词/ 执行/ 信息/ 的/ 利用/ 仍然/ 不够/ 合理/ ,/ 因此/ 定位精度/ 的/ 提高/ 有限/ ./ 3/ 研究/ 动机/ 在/ 本节/ 中/ ,/ 我们/ 在/ 对/ Nbit/ -/ Pesla/ 算法/ 基本/ 思想/ 进行/ 讨论/ 的/ 基础/ 上/ ,/ 归纳/ 出/ 本文/ 的/ 研究/ 动机/ ./ 假如/ 谓词/ P/ 在/ 两个/ 测试用例/ 下/ 的/ 执行/ 情况/ 分别/ 为/ “/ 10011100/ ”/ 和/ “/ 10001101/ ”/ ,/ P/ 判断/ 为/ “/ 真/ ”/ 记/ 为/ “/ 1/ ”/ ,/ 判断/ 为/ “/ 假/ ”/ 记/ 为/ “/ 0/ ”/ ./ 可以/ 发现/ ,/ 在/ 上述/ 两次/ 运行/ 中/ ,/ 谓词/ 判断/ 为/ “/ 真/ ”/ 和/ 判断/ 为/ “/ 假/ ”/ 的/ 次数/ 是/ 相同/ 的/ ,/ 但/ 其/ 判断/ 顺序/ 不同/ ./ SOBER/ 算法/ 虽然/ 比较/ 了/ 这/ 两次/ 执行/ 中/ P/ 被/ 判断/ 为/ “/ 真/ ”/ 和/ “/ 假/ ”/ 的/ 次数/ ,/ 但是/ 忽略/ 了/ 判断/ 顺序/ ,/ 因而/ 无法/ 找到/ 其中/ 的/ 差别/ ./ 相比之下/ ,/ 考虑/ 谓词/ 判断/ 顺序/ 的/ Nbit/ -/ Pesla/ 算法/ 则/ 可以/ 发挥/ 很/ 好/ 的/ 定位/ 作用/ ,/ 有关/ 该/ 算法/ 的/ 详细描述/ 参见/ 文献/ [/ 8/ ]/ ./ 然而/ ,/ 该/ 算法/ 没有/ 考虑/ 谓词/ 执行/ 信息量/ 多少/ 与/ 算法/ 信息/ 利用/ 强度/ 大小/ 这/ 两者之间/ 是否/ 能够/ 动态/ 匹配/ 的/ 问题/ ,/ 导致/ 在/ 某些/ 情况/ 下/ 定位精度/ 不高/ ./ 例/ 程序/ ,/ 从/ 以下/ 两个/ 角度/ 阐述/ 本文/ 的/ 研究/ 动机/ :/ 为此/ ,/ 我们/ 将/ 借助/ Siemens/ 程序包/ 中/ 的/ 一个/ 实/ (/ 1/ )/ 程序运行/ 时/ 谓词/ 提供/ 信息/ 的/ 能力/ 存在/ 着/ 差别/ ./ 这/ 主要/ 表现/ 在/ 两个/ 方面/ :/ ①/ 不同/ 谓词/ 在/ 同/ 一次/ 运行/ 中/ 提供/ 信息/ 的/ 能力/ 不同/ ;/ ②/ 同一/ 谓词/ 在/ 不同/ 运行/ 中/ 提供/ 信息/ 的/ 能力/ 也/ 不同/ ./ 图/ 1/ 是/ “/ replace/ ”/ 程序包/ v17/ 版本/ 的/ 部分/ 代码/ ,/ 共/ 包含/ 5/ 个/ 谓词/ ./ 其中/ ,/ 缺陷/ 位于/ 第/ 7/ 行/ ,/ 右侧/ 注释/ 为/ 正确/ 的/ 代码/ ./ L1/ :/ charesc/ (/ char/ / s/ ,/ int/ / i/ )/ {/ L2/ :/ charresult/ ;/ L3/ :/ if/ (/ s/ [/ / i/ ]/ !/ =/ @/ )/ L4/ :/ result/ =/ s/ [/ / i/ ]/ ;/ L5/ :/ else/ {/ L6/ :/ if/ (/ s/ [/ / i/ +/ 1/ ]/ =/ =/ \/ 0/ )/ L7/ :/ result/ =/ 10/ ;/ // / fault/ :/ result/ =/ @/ / // L8/ :/ else/ {/ L9/ :/ / i/ =/ / i/ +/ 1/ ;/ L10/ :/ if/ (/ s/ [/ / i/ ]/ =/ =/ n/ )/ L11/ :/ result/ =/ 10/ ;/ L12/ :/ else/ {/ L13/ :/ if/ (/ s/ [/ / i/ ]/ =/ =/ t/ )/ L14/ :/ result/ =/ 9/ ;/ L15/ :/ elseL16/ :/ result/ =/ s/ [/ / i/ ]/ ;/ }/ }/ }/ L17/ :/ returnresult/ ;/ }/ 上述/ 各/ 谓词/ 在/ 所有/ 成功/ 和/ 失败/ 测试用例/ 下/ 的/ 执行/ 情况/ 分别/ 如图/ 2/ 和/ 图/ 3/ 所示/ ./ 为了/ 便于/ 展示/ ,/ 我们/ 对/ 执行/ 次数/ 采取/ 以/ 2/ 为底/ 的/ 对数/ 运算/ ./ 其中/ ,/ “/ Max/ ”/ 表示/ 最大/ 的/ 执行/ 次数/ ,/ “/ Min/ ”/ 表示/ 最小/ 的/ 执行/ 次数/ ,/ “/ Mean/ ”/ 表示/ 执行/ 次数/ 的/ 平均值/ ./ 从图/ 中/ 我们/ 可以/ 直观/ 地/ 看到/ ,/ 不同/ 谓词/ 之间/ 执行/ 情况/ 不同/ ./ 例如/ P2/ 和/ P5/ ,/ 无论是/ 在/ 成功/ 测试用例/ 还是/ 在/ 失败/ 测试用例/ 下/ ,/ 这/ 两个/ 谓词/ 的/ 执行/ 情况/ 都/ 相差/ 较大/ ./ Page4/ 即使/ 是/ 同一个/ 谓词/ ,/ 在/ 不同/ 测试用例/ 下/ 的/ 执行/ 情况/ 也/ 存在/ 着/ 很大/ 的/ 差异/ ./ 例如/ ,/ 图/ 4/ 总结/ 了/ 谓词/ P5/ 在/ 所有/ 24/ 个/ 失败/ 测试用例/ 下/ 的/ 执行/ 次数/ 情况/ (/ 横坐标/ 表示/ 测试用例/ 号/ ,/ 纵坐标/ 表示/ 执行/ 次数/ )/ ./ 可以/ 看到/ ,/ 执行/ 次数/ 分布/ 跨越/ 的/ 范围/ 很大/ ./ 如果/ 以/ 执行/ 次数/ 多少/ 来/ 衡量/ 谓词/ 提供/ 信息/ 的/ 能力/ ,/ 可以/ 看到/ ,/ 由于/ 程序执行/ 剖面/ 不同/ ,/ 不同/ 谓词/ 在/ 实际/ 程序运行/ 时/ 提供/ 信息/ 的/ 能力/ 存在/ 着/ 差别/ ./ (/ 2/ )/ 对/ 所有/ 谓词/ 采用/ 固定/ 信息/ 利用/ 强度/ 不合理/ ./ 通过/ 分析/ 图/ 1/ 中/ 的/ 程序/ ,/ 我们/ 发现/ ,/ 谓词/ P2/ 和/ P5/ 与/ 缺陷/ 直接/ 相关/ ,/ 我们/ 希望/ 缺陷/ 定位/ 方法/ 能够/ 将/ 这/ 两个/ 谓词/ 都/ 排/ 在/ 排位/ 表中/ 相对/ 靠/ 前/ 的/ 位置/ ./ 在/ 使用/ Nbit/ -/ Pesla/ 算法/ 进行/ 缺陷/ 定位/ (/ N/ =/ 1/ ,/ 2/ ,/ 3/ ,/ 4/ ,/ 5/ )/ 时/ ,/ 1bit/ -/ Pesla/ 算法/ 或/ 2bit/ -/ Pesla/ 算法/ 对/ P2/ 的/ 定位/ 效果/ 最优/ (/ 均/ 将/ P2/ 排在/ 第/ 1/ 位/ )/ ./ 但是/ ,/ 无论是/ 1bit/ -/ Pesla/ 算法/ 还是/ 2bit/ -/ Pesla/ 算法/ 对/ P5/ 都/ 无法/ 取得/ 很/ 好/ 的/ 定位/ 效果/ (/ 1bit/ -/ Pesla/ 算法/ 将/ P5/ 排在/ 第/ 57/ 位/ ,/ 2bit/ -/ Pesla/ 算法/ 将/ P5/ 排在/ 第/ 63/ 位/ )/ ./ 相反/ ,/ 增大/ 算法/ 中/ 信息/ 利用/ 的/ 强度/ ,/ 使用/ 5bit/ -/ Pesla/ 算法/ 反而/ 可以/ 取得/ 最优/ 的/ 定位/ 效果/ (/ 将/ P5/ 排在/ 第/ 33/ 位/ )/ ./ 通过/ 以上/ 实验/ 结果/ ,/ 我们/ 可以/ 发现/ ,/ 在/ 谓词/ 提供/ 信息/ 能力/ 有/ 强弱/ 差别/ 的/ 前提/ 下/ ,/ 按照/ 之前/ 做法/ 对/ 所有/ 谓词/ 采用/ 相同/ 的/ 信息/ 利用/ 强度/ 是/ 不合理/ 的/ ,/ 这/ 将/ 会/ 造成/ 信息/ 的/ 浪费/ 或/ 信息冗余/ ,/ 降低/ 缺陷/ 相关/ 谓词/ 与/ 程序/ 失效/ 之间/ 的/ 联系/ ,/ 从而/ 影响/ 算法/ 的/ 定位精度/ ./ 因此/ ,/ 针对/ 每个/ 谓词/ 选择/ 合适/ 的/ 信息/ 利用/ 强度/ 是/ 十分必要/ 的/ ./ 此外/ ,/ 由于/ 程序运行/ 之前/ 很难/ 对/ 谓词/ 的/ 执行/ 情况/ 进行/ 静态/ 分析/ ,/ 如何/ 提高/ 算法/ 对/ 不同/ 谓词/ 执行/ 情况/ 的/ 适应性/ 也/ 是/ 一个/ 需要/ 解决/ 的/ 难题/ ./ 在/ 本文/ 中/ ,/ 我们/ 通过/ 对/ 测试用例/ 运行/ 后/ 每个/ 谓词/ 的/ 执行/ 情况/ 进行/ 分析/ ,/ 得到/ 谓词/ 执行/ 次数/ 分布/ 情况/ 来/ 动态/ 地/ 选择/ 适合/ 于/ 每个/ 谓词/ 的/ 信息/ 利用/ 强度/ ./ 4/ 基于/ 谓词/ 执行/ 信息/ 分析/ 的/ 自/ 适应/ 缺陷/ 定位/ 算法/ 4.1/ 基本/ 定义/ 定义/ 1/ (/ 谓词/ 执行/ 序列/ )/ ./ 设/ Pi/ 是/ 程序/ 中/ 第/ i/ 个/ 谓词/ ,/ 在/ 使用/ 一个/ 测试用例/ tl/ 来/ 执行程序/ 时/ ,/ 谓词/ Pi/ 的/ 执行/ 序列/ 是/ 一个/ n/ 维/ 向量/ ,/ 可/ 表示/ 为/ 其中/ ,/ oj/ (/ j/ ∈/ [/ 1/ ,/ n/ ]/ )/ 运行/ 到/ 谓词/ Pi/ 所在/ 语句/ 时该/ 谓词/ 的/ 取值/ ,/ 即/ 定义/ 2/ (/ 信息/ 利用/ 强度/ )/ ./ 谓词/ Pi/ 的/ 谓词/ 执行/ 序列/ 犛/ (/ Pi/ ,/ tl/ )/ 的/ 第/ j/ 个/ ω/ (/ ω/ / n/ )/ 维/ 连续/ 子/ 向量/ 称为/ 犛/ (/ Pi/ ,/ tl/ )/ 的/ 第/ j/ 个/ 长度/ 为/ ω/ 的/ 子/ 序列/ ,/ 表示/ 为/ 其中/ ω/ 称为/ 信息/ 利用/ 强度/ ./ 例如/ ,/ 执行/ 序列/ 犛/ (/ Pi/ ,/ tl/ )/ =/ (/ 1/ ,/ 1/ ,/ 1/ ,/ 0/ ,/ 1/ )/ ,/ 其子/ 序列/ 长度/ 可为/ 1/ 到/ 5/ ,/ 即/ 其/ 信息/ 利用/ 强度/ 可取/ 1/ 到/ 5/ ./ 在/ 已有/ 方法/ 中/ ,/ SOBER/ 算法/ 对于/ 信息/ 的/ 利用/ 强度/ 为/ 1/ ,/ Nbit/ -/ Pesla/ 算法/ 对/ 信息/ 的/ 利用/ 强度/ 为/ N/ ./ 定义/ 3/ (/ 值/ 集合/ )/ ./ 长度/ 为/ ω/ 的/ 子/ 序列/ 共有/ 2/ ω/ 上例/ 中/ 长度/ 为/ 2/ 的/ 子/ 序列/ 可能/ 的/ 取值/ 为/ (/ 0/ ,/ 0/ )/ ,/ 种/ 取值/ ,/ 其/ 集合/ {/ v1/ ,/ v2/ ,/ …/ ,/ v2/ ω/ }/ 称为/ 值/ 集合/ ./ (/ 0/ ,/ 1/ )/ ,/ (/ 1/ ,/ 0/ )/ ,/ (/ 1/ ,/ 1/ )/ ,/ 则/ 值/ 集合/ 为/ Page5/ 定义/ 4/ (/ 执行/ 信息/ 向量/ )/ ./ 对于/ 执行/ 序列/ 犛/ (/ Pi/ ,/ tl/ )/ ,/ 信息/ 利用/ 强度/ 为/ ω/ 时/ ,/ 向量/ 犖/ ω/ 其中/ nk/ =/ sizeofj/ |/ 犛/ j/ 化后/ 的/ 向量/ 称为/ 执行/ 信息/ 向量/ ,/ 表示/ 为/ 犈/ ω/ 在/ 上例/ 中/ ,/ 可以/ 根据/ 定义/ 4/ 得到/ 犖/ 21/ ,/ 2/ )/ ,/ 犈/ 2/ 需要/ 注意/ 的/ 是/ :/ (/ 1/ )/ 如果/ 选择/ 的/ 信息/ 利用/ 强度/ ω/ 大于/ 执行/ 序列/ 的/ 长度/ n/ ,/ 执行/ 序列/ 与值/ 集合/ 中/ 对应/ 取值/ 相比/ ,/ 将会/ 有/ ω/ -/ n/ 位/ 的/ 取值/ 未知/ ./ 而/ 由于/ 每个/ 未知/ 位/ 取值/ 为/ “/ 0/ ”/ 或/ “/ 1/ ”/ 的/ 概率/ 各/ 占/ 0.5/ ,/ 因此/ ,/ 在/ 这种/ 情况/ 下/ ,/ 执行/ 信息/ 向量/ 中/ 相应/ 位置/ 的/ nk/ =/ 1/ (/ 2/ )/ 如果/ 谓词/ 在/ 某个/ 测试用例/ 运行/ 时/ 没有/ 被/ 执行/ 到/ ,/ 则/ 由/ 该/ 测试用例/ 得到/ 的/ 执行/ 信息/ 向量/ 中/ 各位/ 均/ 为/ 零/ ./ 定义/ 5/ (/ 缺陷/ 关联度/ )/ ./ 谓词/ Pi/ 的/ 缺陷/ 关联度/ 定义/ 为/ 在/ 信息/ 利用/ 强度/ ω/ 下/ ,/ 所有/ 成功/ 测试用例/ 中/ Pi/ 的/ 执行/ 信息/ 向量/ 总和/ 均值/ ES/ ω/ 用例/ 中/ Pi/ 的/ 执行/ 信息/ 向量/ 总和/ 均值/ EF/ ω/ 离/ ,/ 用/ 2/ -/ 范数/ 计算/ 为/ 1/ 其中/ ,/ ES/ ω/ TotalFailed/ ∑/ TotalFailed/ 测试用例/ ,/ TotalFailed/ 表示/ 所有/ 失败/ 测试用例/ ./ 4.2/ 两个/ 性质/ 及其/ 证明/ 在/ 本节/ 中/ ,/ 我们/ 将/ 在/ 提出/ 并/ 证明/ 两个/ 性质/ 的/ 基础/ 上/ ,/ 对/ 谓词/ 执行/ 信息量/ 和/ 信息/ 利用/ 强度/ 之间/ 的/ 关系/ 进行/ 一定/ 程度/ 的/ 理论/ 分析/ ./ 性质/ 1/ ./ 假设/ 谓词/ Pi/ 在/ 失败/ 测试用例/ 下/ 执行/ 序列/ 的/ 长度/ 均/ 为/ n/ 位/ ,/ 并且/ 执行/ 序列/ 都/ 相同/ ,/ 而/ 成功/ 测试用例/ 均/ 没有/ 经过/ 谓词/ Pi/ ./ 如果/ 选择/ 信息/ 利用/ 强度/ m/ 进行/ 信息提取/ ,/ 则/ 谓词/ Pi/ 的/ 缺陷/ 关联度/ RPi/ 满足/ 如下/ 性质/ :/ 证明/ ./ 我们/ 将/ m/ 和/ n/ 的/ 关系/ 分为/ 如下/ 3/ 种/ 情况/ 进行/ 分析/ ./ 情况/ 1/ ./ m/ >/ n/ ./ 假设/ 信息/ 利用/ 强度/ 为/ m/ =/ n/ +/ x/ (/ 1/ / x/ </ +/ )/ ,/ 长度/ 为/ m/ 的/ 子/ 序列/ 共有/ 2n/ +/ x/ 种/ 取值/ ,/ 则/ 失败/ 测试用例/ tl/ 下/ 执行/ 信息/ 向量/ 犈/ n/ +/ x/ 由于/ 失败/ 测试用例/ 下/ 执行/ 序列/ 的/ 长度/ 均/ 为/ n/ 位/ ,/ 在/ 信息/ 利用/ 强度/ m/ 下/ ,/ n/ +/ x/ 维子/ 序列/ 中共/ 有/ x/ 位/ 的/ 取值/ 未知/ ,/ 按照/ 定义/ 4/ 中等/ 概率/ 赋值/ 的/ 操作/ ,/ 在/ nk/ (/ k/ ∈/ {/ 1/ ,/ 2/ ,/ …/ ,/ 2n/ +/ x/ }/ )/ 的/ 取值/ 中/ ,/ 将会/ 有/ 2x/ 个/ 取值/ 为/ 12x/ ,/ 其余/ 位均/ 为/ 0/ ,/ 即/ 犈/ n/ +/ x/ 所有/ 失败/ 测试/ 用/ 谓词/ Pi/ 执行/ 信息/ 向量/ 总和/ 均值/ EFn/ +/ xPi/ =/ 1/ 由于/ 成功/ 测试用例/ 没有/ 经过/ 谓词/ Pi/ ,/ 那么/ 成功/ 测试用例/ tl/ 下/ 执行/ 信息/ 向量/ 犖/ n/ +/ xTotalPass/ ∑/ TotalPassRPi/ =/ ESn/ +/ x1/ 只有/ 一位/ 为/ 1/ ,/ 其余/ 位为/ 0/ 情况/ 2/ ./ m/ =/ n/ ./ 在/ 这种/ 情况/ 下/ ,/ 长度/ 为/ n/ 的/ 子/ 序列/ 共有/ 2n/ 种/ 取值/ ,/ 失败/ 测试用例/ tl/ 下/ 执行/ 信息/ 向量/ 犈/ nn2n/ )/ ./ 由于/ 失败/ 测试用例/ 下/ 执行/ 序列/ 的/ 长度/ 均/ 为/ n/ 位/ ,/ 则/ 在/ n/ 维子/ 序列/ 2n/ 种/ 取值/ 中/ ,/ 有且/ 仅/ 有/ 一个/ 取值/ 与/ 失败/ 测试用例/ 下/ 的/ 执行/ 序列/ 相对/ 应/ ,/ 即/ 犈/ n/ (/ n1/ ,/ …/ ,/ n2n/ 烐/ 烏/ 烑/ )/ ∑/ TotalFailed/ 犈/ nl/ =/ 1RPi/ =/ ESn/ 情况/ 3/ ./ m/ </ n/ ./ 假设/ 信息/ 利用/ 强度/ 为/ m/ =/ n/ -/ x/ (/ 1/ / x/ / n/ -/ 1/ )/ ,/ 长度/ 为/ m/ 的/ 子/ 序列/ 共有/ 2n/ -/ x/ 种/ 取值/ ,/ 则/ 失败/ 测试用例/ tl/ 下/ 执行/ 信息/ 向量/ 犈/ n/ -/ x/ 于/ 信息/ 利用/ 强度/ m/ </ n/ ,/ 在/ 该/ 信息/ 利用/ 强度/ 下/ ,/ 最/ 多/ 可以/ 形成/ x/ +/ 1/ 个/ n/ -/ x/ 维的子/ 序列/ ,/ 根据/ 定义/ 4/ ,/ Pi/ ,/ tl/ =/ n1x/ +/ 1/ ,/ …/ ,/ n2n/ -/ x/ 犈/ n/ -/ x/ 例中/ 谓词/ Pi/ 执行/ 信息/ 向量/ 总和/ 均值/ EFn/ -/ xTotalFailed/ ×/ ∑/ TotalFailed1Pi/ =/ 0/ ,/ 所以/ 而/ ESn/ -/ xPage6RPi/ =/ ESn/ -/ xx/ (/ )/ +/ 1/ 槡/ 2/ =/ 又/ 因为/ n1/ +/ …/ +/ n2n/ -/ x/ =/ x/ +/ 1/ ,/ 而/ nj/ ∈/ {/ 0/ ,/ 1/ ,/ …/ ,/ x/ +/ 1/ }/ ,/ j/ ∈/ {/ 1/ ,/ 2/ ,/ …/ ,/ 2n/ -/ x/ }/ ,/ 因此/ ,/ RPi/ / 1/ ./ 证毕/ ./ 从/ 性质/ 1/ 可以/ 看出/ ,/ 当/ m/ =/ n/ 时/ ,/ 谓词/ Pi/ 的/ 缺陷/ 关联度/ RPi/ 的/ 计算/ 值/ 最大/ ./ 虽然/ 性质/ 1/ 具有/ 较强/ 的/ 假设/ ,/ 但是/ 根据/ 该/ 性质/ ,/ 我们/ 可以/ 推断出/ :/ 在/ 谓词/ 提供/ 信息量/ 固定/ 的/ 前提/ 下/ ,/ 过分/ 利用/ 谓词/ 执行/ 信息/ 或是/ 对/ 谓词/ 信息/ 利用/ 不足/ ,/ 都/ 将/ 会/ 导致/ 缺陷/ 谓词/ 的/ 可疑/ 度/ 计算/ 值/ 降低/ ./ 性质/ 2/ ./ 假设/ 谓词/ Pi/ 在/ 失败/ 测试用例/ 下/ 执行/ 序列/ 的/ 长度/ 均/ 为/ n/ 位/ ,/ 并且/ 执行/ 序列/ 全部/ 相同/ ./ 谓词/ Pj/ 在/ 失败/ 测试用例/ 下/ 执行/ 序列/ 的/ 长度/ 均/ 为/ n/ +/ x/ (/ 1/ / x/ </ +/ )/ 位/ ,/ 并且/ 执行/ 序列/ 全部/ 相同/ ./ 而/ 成功/ 测试用例/ 都/ 没有/ 经过/ 谓词/ Pi/ 和/ 谓词/ Pj/ ,/ 如果/ 选择/ 信息/ 利用/ 强度/ m/ 进行/ 信息提取/ ,/ 则/ 谓词/ Pi/ 的/ 缺陷/ 关联度/ RPi/ 满足/ 如下/ 性质/ :/ 谓词/ Pj/ 的/ 缺陷/ 关联度/ RPj/ 满足/ 如下/ 性质/ :/ 5/ 种/ 进行/ 分析/ ./ 证明/ ./ 我们/ 将/ m/ 和/ n/ 以及/ x/ 的/ 关系/ 分为/ 如下/ 情况/ 1/ ./ m/ </ n/ ./ 如果/ 信息/ 利用/ 强度/ m/ </ n/ </ n/ +/ x/ ,/ 则/ Pi/ ,/ tl/ =/ n1n/ -/ m/ +/ 1/ ,/ …/ ,/ n2m/ 犈/ mPj/ ,/ tl/ =/ n1n/ +/ x/ -/ m/ +/ 1/ ,/ …/ ,/ n2m/ 犈/ m/ 依据/ 性质/ 1/ 中/ 情况/ 3/ 的/ 讨论/ ,/ 同理/ 可以/ 推断出/ 情况/ 2/ ./ m/ =/ n/ ./ 如果/ 信息/ 利用/ 强度/ m/ =/ n/ </ n/ +/ x/ ,/ 则/ 可疑/ 度/ RPi/ / 1/ ,/ RPj/ / 1/ ./ 依据/ 性质/ 1/ 中/ 相应/ 情况/ 的/ 讨论/ ,/ 同理/ 可以/ 推断出/ 可疑/ 度/ RPi/ =/ 1/ ,/ RPj/ / 1/ ./ 情况/ 3/ ./ n/ </ m/ </ n/ +/ x/ ./ 如果/ 信息/ 利用/ 强度/ n/ </ m/ </ n/ +/ x/ ,/ 则/ Pi/ ,/ tl/ =/ n1/ ,/ …/ ,/ n2/ (/ )/ 犈/ mPj/ ,/ tl/ =/ n1n/ +/ x/ -/ m/ +/ 1/ ,/ …/ ,/ n2m/ 犈/ m/ 依据/ 性质/ 1/ 中/ 相应/ 情况/ 的/ 讨论/ ,/ 同理/ 可以/ 推断出/ 可疑/ 度/ RPi/ </ 1/ ,/ RPj/ / 1/ ./ 情况/ 4/ ./ m/ =/ n/ +/ x/ ./ 如果/ 信息/ 利用/ 强度/ m/ =/ n/ +/ x/ >/ n/ ,/ 则/ 依据/ 性质/ 1/ 中/ 相应/ 情况/ 的/ 讨论/ ,/ 同理/ 可以/ 推断出/ 可疑/ 度/ RPi/ </ 1/ ,/ RPj/ =/ 1/ ./ 情况/ 5/ ./ m/ >/ n/ +/ x/ ./ 如果/ 信息/ 利用/ 强度/ m/ >/ n/ +/ x/ >/ n/ ,/ 则/ 依据/ 性质/ 1/ 中/ 相应/ 情况/ 的/ 讨论/ ,/ 同理/ 可以/ 推断出/ 可疑/ 度/ RPi/ </ 1/ ,/ RPj/ </ 1/ ./ 从/ 性质/ 2/ 可以/ 看出/ ,/ 对于/ 谓词/ Pi/ ,/ 当/ m/ =/ n/ 时/ ,/ 缺陷/ 关联度/ RPi/ 的/ 计算/ 值/ 最大/ ./ 但/ 对于/ 谓词/ Pj/ ,/ 当/ m/ =/ n/ +/ x/ 时/ ,/ 缺陷/ 关联度/ RPj/ 的/ 计算/ 值/ 最大/ ./ 虽然/ 性质/ 2/ 的/ 假设/ 较强/ ,/ 但是/ 根据/ 该/ 性质/ ,/ 我们/ 可以/ 推断出/ :/ 在/ 不同/ 谓词/ 提供/ 信息量/ 有/ 差异/ 的/ 前提/ 下/ ,/ 针对/ 每个/ 谓词/ 选择/ 恰当/ 的/ 信息/ 利用/ 强度/ 是/ 获得最佳/ 缺陷/ 关联度/ 计算/ 值/ 的/ 必要条件/ ./ 借助/ 这/ 两个/ 性质/ ,/ 我们/ 可以/ 发现/ ,/ 谓词/ 执行/ 信息量/ 和/ 信息/ 利用/ 强度/ 都/ 是/ 影响/ 缺陷/ 定位/ 的/ 重要/ 因素/ ,/ 这/ 两者/ 均会/ 对/ 缺陷/ 定位/ 过程/ 产生/ 影响/ (/ 这一/ 结论/ 将会/ 在/ 实验/ 部分/ 进一步/ 得到/ 验证/ )/ ./ 因此/ ,/ 基于/ 谓词/ 执行/ 信息/ 进行/ 软件缺陷/ 定位/ 的/ 算法/ 需要/ 根据/ 程序/ 实际/ 运行/ 时/ 谓词/ 提供/ 的/ 信息量/ 合理/ 地/ 选择/ 信息/ 利用/ 强/ Page7/ 度/ ,/ 才能/ 发挥/ 较/ 好/ 的/ 定位/ 作用/ ,/ 这/ 也/ 是/ Safla/ 算法/ 的/ 基本/ 思想/ ./ 4.3/ 算法/ 基本/ 流程/ Safla/ 的/ 实现/ 分为/ 数据/ 收集/ 、/ 数据分析/ 、/ 数据处理/ 和/ 数据/ 统计/ 4/ 个/ 部分/ :/ (/ 1/ )/ 数据/ 收集/ 部分/ ./ 本文/ 选择/ 对/ if/ // while/ // for/ 这/ 3/ 类/ 分支/ 语句/ 以及/ 函数/ 返回值/ 语句/ (/ return/ 语句/ )/ 进行/ 插桩/ ,/ 然后/ 输入/ 程序/ 的/ 全部/ 测试用例/ ,/ 收集/ 插桩/ 谓词/ 的/ 输出/ 结果/ ./ (/ 2/ )/ 数据分析/ 部分/ ./ 针对/ 谓词/ Pi/ ,/ 通过/ 对/ 所有/ 失败/ 测试用例/ 运行/ 时/ 谓词/ Pi/ 的/ 执行/ 情况/ 进行/ 分析/ ,/ 确定/ 对/ Pi/ 所/ 采用/ 的/ 信息/ 利用/ 强度/ ./ (/ 3/ )/ 数据处理/ 部分/ ./ 根据/ 确定/ 的/ 信息/ 利用/ 强度/ ,/ 对/ 所有/ 成功/ 测试用例/ 下/ Pi/ 的/ 谓词/ 执行/ 序列/ 集合/ INFOs/ 和/ 所有/ 失败/ 测试用例/ 下/ Pi/ 的/ 谓词/ 执行/ 序列/ INFOf/ 进行/ 变换处理/ ,/ 得到/ 执行/ 信息/ 向量/ 总和/ 均值/ ES/ ω/ 不断/ 重复/ 数据分析/ 和/ 数据处理/ 两/ 部分/ 的/ 工作/ ,/ 直到/ 计算/ 出/ 所有/ 谓词/ 的/ 缺陷/ 关联度/ ./ 大小/ 排序/ ,/ 输出/ 最终/ 的/ 谓词/ 排序/ 结果/ ./ Pi/ 和/ EF/ ω/ (/ 4/ )/ 数据/ 统计/ 部分/ ./ 将/ 谓词/ 按照/ 缺陷/ 关联度/ 的/ 下面/ 我们/ 给出/ Safla/ 的/ 算法/ 描述/ ,/ 具体/ 如下/ ./ 算法/ 1/ ./ Safla/ 算法/ ./ 输入/ :/ INFOs/ ,/ INFOf/ 输出/ :/ 谓词/ 的/ 最终/ 排序/ 结果/ 符号/ :/ TotalPass/ :/ 成功/ 测试用例/ 数目/ ;/ TotalFailed/ :/ 失败/ 测试用例/ 数目/ ;/ P/ :/ 程序/ 中/ 所有/ 插桩/ 谓词/ 的/ 集合/ ;/ 犛/ (/ Pi/ ,/ tl/ )/ :/ 测试用例/ tl/ 运行/ 时/ ,/ 谓词/ Pi/ 的/ 谓词/ 执行/ 序列/ ;/ Pi/ ,/ tl/ :/ 测试用例/ tl/ 运行/ 时/ ,/ 在/ 信息/ 强度/ ω/ 下/ ,/ 谓词/ Pi/ 的/ 犈/ ω/ 执行/ 信息/ 向量/ ;/ evaluate/ (/ INFOf/ )/ :/ 根据/ 谓词/ 在/ 所有/ 失败/ 测试用例/ 下/ 的/ 执行/ 情况/ ,/ 选择/ 信息/ 利用/ 强度/ 大小/ 的/ 函数/ ;/ stat/ (/ 犛/ (/ Pi/ ,/ tl/ )/ ,/ ω/ )/ :/ 根据/ 信息/ 利用/ 强度/ ω/ ,/ 计算/ 谓词/ Pi/ 执行/ 信息/ 向量/ 的/ 函数/ ;/ 1/ ./ ForallPi/ ∈/ Pdo2/ ./ ω/ ←/ evaluate/ (/ INFOf/ )/ 3/ ./ ForallINFOsandINFOfdo4/ ./ If/ 犛/ (/ Pi/ ,/ tl/ )/ ∈/ INFOsthen5/ ./ 犈/ ω/ 6/ ./ else7/ ./ 犈/ ω/ 8/ ./ EndFor9/ ./ ES/ ω/ pi/ ←/ 110/ ./ EF/ ω/ pi/ ←/ 111/ ./ RPi/ =/ ES/ ω/ 12/ ./ EndFor13/ ./ 根据/ 缺陷/ 关联度/ 的/ 大小/ 对/ 所有/ 谓词/ 进行/ 排序/ 4.4/ 自/ 适应/ 数据分析/ 与/ 处理/ 技术/ 本/ 节/ 主要/ 是/ 对/ 上述/ 算法/ 中/ 所/ 涉及/ 的/ 自/ 适应/ 数据分析/ 与/ 处理/ 技术/ 进行/ 论述/ ,/ 相关/ 技术/ 主要/ 体现/ 在/ 滑动/ 窗口/ 的/ 选择/ 与/ 操作/ 上/ ./ 为了/ 直观/ 反映/ 对/ 谓词/ 执行/ 信息/ 的/ 利用/ 强度/ ,/ 我们/ 设计/ 滑动/ 窗口/ 来/ 对/ 谓词/ 执行/ 序列/ 中/ 蕴含/ 的/ 信息/ 进行/ 提取/ ,/ 如图/ 5/ 所示/ ./ 参数/ ω/ 是/ 滑动/ 窗口/ 的/ 大小/ ,/ 控制/ 着/ 信息/ 利用/ 的/ 强度/ ./ 滑动/ 窗口/ 每次/ 只/ 可/ 沿着/ 谓词/ 执行/ 序列/ 移动/ 一位/ ./ 在/ 设计/ 滑动/ 窗口/ 大小/ 选择/ 方案/ 时/ ,/ 考虑/ 到/ 失败/ 测试用例/ 对于/ 缺陷/ 定位/ 的/ 重要/ 作用/ [/ 13/ ]/ ,/ Safla/ 选择/ 谓词/ 在/ 失败/ 测试用例/ 下/ 的/ 执行/ 情况/ 作为/ 分析/ 对象/ ,/ 从中/ 挑选/ 出现/ 频率/ 最高/ 的/ 执行/ 次数/ ,/ 并/ 根据/ 该/ 执行/ 次数/ 选择/ 滑动/ 窗口/ ω/ 的/ 大小/ ,/ 具体/ 方案/ 如下/ :/ 其中/ ,/ W/ 表示/ 挑选出/ 的/ 执行/ 次数/ ,/ Wd/ 和/ Wu/ 分别/ 是/ 滑动/ 窗口/ 的/ 下限/ 和/ 上限/ ./ 按照/ 该/ 方案/ 选择/ 滑动/ 窗口/ 的/ 大小/ ,/ 可以/ 使/ 信息/ 利用/ 的/ 粒度/ 最大化/ ,/ 对/ 谓词/ 执行/ 信息/ 的/ 提取/ 也/ 更加/ 充分/ ,/ 同时/ 尽量避免/ 文献/ [/ 8/ ]/ 中等/ 概率/ 赋值/ 情况/ 的/ 出现/ ./ 需要/ 说明/ 的/ 是/ ,/ 和/ 大多数/ 自/ 适应/ 策略/ 一样/ ,/ 如何/ 选择/ 信息/ 利用/ 强度/ 的/ 大小/ 是/ 一种/ 启发式/ 的/ 策略/ ./ 因此/ ,/ 虽然/ 本文/ 的/ 方法/ 在/ 制定/ 信息/ 利用/ 强度/ 选择/ 策略/ 时/ 重点/ 考虑/ 失败/ 测试用例/ ,/ 但是/ 也/ 可以/ 存在/ 其它/ 操作/ 情形/ ./ 例如/ ,/ 综合/ 考虑/ 成功/ 测试用例/ 以及/ 失败/ 测试用例/ 下/ 的/ 执行/ 情况/ 选择/ 信息/ 利用/ 强度/ ,/ 或者/ 当/ 遇到/ 成功/ 测试用例/ 较少/ 的/ 情况/ 时/ ,/ 我们/ 可以/ 选择/ 根据/ 成功/ 测试用例/ 下/ 的/ 执行/ 情况/ 选择/ 信息/ 利用/ 强度/ ./ 对于/ 这些/ 策略/ 的/ 深入分析/ 和/ 比较/ ,/ 将/ 是/ 我们/ 下/ 一步/ 的/ 研究/ 工作/ ./ 对/ 滑动/ 窗口/ 的/ 操作/ 包括/ 以下/ 两步/ :/ (/ 1/ )/ 将/ 滑动/ 窗口/ 放在/ 谓词/ 执行/ 序列/ 犛/ (/ Pi/ ,/ tl/ )/ 的/ Page8/ 起始/ 位置/ ,/ 逐位/ 移动/ 滑动/ 窗口/ ,/ 共/ 获得/ δ/ =/ Len/ (/ S/ )/ -/ ω/ +/ 1/ 个/ 长度/ 为/ ω/ 的/ 子/ 序列/ (/ 其中/ Len/ (/ S/ )/ 表示/ 谓词/ 执行/ 序列/ 犛/ (/ Pi/ ,/ tl/ )/ 的/ 长度/ ,/ 要求/ Len/ (/ S/ )/ / ω/ )/ ./ (/ 2/ )/ 针对/ 滑动/ 窗口/ 中/ 长度/ 为/ ω/ 的/ 子/ 序列/ 的/ 值/ 集合/ 中/ 每/ 一种/ 可能/ 取值/ ,/ 统计/ 其/ 在/ δ/ 个子/ 序列/ 中/ 出现/ 的/ 次数/ ,/ 进行/ 归一化/ 处理/ ,/ 便/ 构成/ 信息/ 强度/ ω/ 下/ 的/ 执行/ 信息/ 向量/ 犈/ ω/ 中/ “/ 0/ ”/ 和/ “/ 1/ ”/ 分别/ 出现/ 的/ 次数/ n0/ 、/ n1/ ,/ 则/ 执行/ 信息/ 向量/ 为/ 犈/ 1evaluationbias/ ;/ 当/ ω/ =/ 2/ 时/ ,/ 记录/ 滑动/ 窗口/ 中/ “/ 00/ ”/ 、/ “/ 01/ ”/ 、/ “/ 10/ ”/ 和/ “/ 11/ ”/ 分别/ 出现/ 的/ 次数/ n00/ 、/ n01/ 、/ n10/ 、/ n11/ ,/ 则/ 执行/ 信息/ 向量/ 为/ 犈/ 25/ 实验/ Pi/ ,/ tl/ =/ n0/ 在/ 本节/ 中/ ,/ 我们/ 将/ 进行/ 如下/ 3/ 部分/ 实验/ :/ (/ 1/ )/ 信息/ 利用/ 强度/ 选择/ 有效性/ 验证/ 实验/ ;/ (/ 2/ )/ 多种/ 算法/ 定位/ 效果/ 比较/ 实验/ ;/ (/ 3/ )/ 算法/ 稳定性/ 实验/ ,/ 以此/ 来/ 充分证明/ Safla/ 的/ 优越性/ ./ 首先/ ,/ 我们/ 对/ 实验/ 中/ 使用/ 的/ 目标程序/ 、/ 算法/ 评价/ 准则/ 以及/ 实验/ 设置/ 进行/ 描述/ ,/ 随后/ 对/ 实验/ 结果/ 展开/ 分析/ ./ 5.1/ 目标程序/ 参照/ 大量/ 相关/ 工作/ ,/ 本文/ 选取/ Siemens/ 程序包/ 中/ 的/ 全部/ 7/ 个/ 程序/ 以及/ 一个/ 实际/ 程序/ space/ 作为/ 目标程序/ 进行/ 实验/ ./ 表/ 1/ 中/ 列举/ 了/ 目标程序/ 的/ 主要/ 信息/ ./ 所有/ 这些/ 程序/ 以及/ 缺陷/ 版本/ 都/ 是/ 由/ Software/ -/ artifactInfrastructureRepository/ (/ SIR/ )/ 网站/ 上/ 下载/ ①/ ./ 程序/ 描述/ 版本/ 数可/ 执行/ 代码/ 数/ 测试用例/ 数/ print/ -/ tokens/ (/ 2/ 个/ 程序/ )/ 词汇/ 分析器/ 17341/ ~/ 3554130schedule/ (/ 2/ 个/ 程序/ )/ 优先/ 排队/ 19261/ ~/ 2942710replace/ 模式识别/ 32505/ ~/ 5185542tot/ -/ info/ 信息/ 测量/ 23272/ ~/ 2741052tcas/ 高度/ 分离/ 41133/ ~/ 1371608spaceADL/ 解释器/ 386218134965.2/ 评价/ 方法/ 本文/ 选用/ P/ -/ score/ [/ 9/ ]/ 作为/ 比较/ 各/ 算法/ 定位精度/ 的/ 主要/ 评价/ 方法/ ./ 首先/ 给出/ P/ -/ score/ 的/ 计算公式/ :/ 其中/ ,/ L/ 为/ 目标程序/ 中/ 的/ 谓词/ 数量/ ,/ P/ 表示/ 程序/ 中/ 与/ 缺陷/ 最为/ 相关/ 的/ 谓词/ ,/ indexofP/ 为/ 该/ 谓词/ 在/ 算法/ 输出/ 的/ 谓词/ 排位/ 表中/ 所排/ 的/ 位置/ ./ P/ -/ score/ 可以/ 解释/ 为/ 所/ 需/ 检查/ 的/ 谓词/ 数量/ 越/ 少/ ,/ 则/ 算法/ 的/ 定位精度/ 越高/ ./ 5.3/ 实验/ 设置/ Siemens/ 程序包/ 一共/ 包含/ 132/ 个/ 缺陷/ 版本/ ,/ 在/ 本文/ 实验/ 中共/ 排除/ 掉/ 21/ 个/ 缺陷/ 版本/ ./ 其中/ ,/ replace/ -/ v27/ 和/ schedule2/ -/ v9/ 没有/ 失败/ 测试用例/ ,/ 其余/ 19/ 个/ 版本/ 由于/ 无法/ 清晰/ 确定/ 缺陷/ 谓词/ 的/ 位置/ ,/ 因此/ 也/ 予以/ 排除/ ,/ 分别/ 是/ print/ _/ tokens/ -/ v4/ ,/ v5/ ,/ v6/ ;/ replace/ -/ v12/ ;/ tcas/ -/ v7/ ,/ v8/ ,/ v13/ ,/ v14/ ,/ v16/ ,/ v17/ ,/ v18/ ,/ v19/ ,/ v33/ ,/ v36/ ,/ v38/ ;/ tot/ _/ info/ -/ v6/ ,/ v10/ ,/ v19/ ,/ v21/ ./ 按照/ 相同/ 的/ 原则/ ,/ 在/ space/ 程序包/ 中共/ 排除/ 掉/ 10/ 个/ 缺陷/ 版本/ ,/ 分别/ 是/ v1/ ,/ v2/ ,/ v25/ ,/ v26/ ,/ v30/ ,/ v32/ ,/ v34/ ,/ v35/ ,/ v36/ ,/ v38/ ./ 本文/ 选用/ 文献/ [/ 7/ ]/ 所/ 采用/ 的/ 最/ 相关/ 谓词/ 的/ 选择/ 策略/ :/ 首先/ 确定/ 缺陷/ 位置/ ,/ 若/ 缺陷/ 在/ 可/ 执行/ 语句/ 上/ ,/ 标记/ 该/ 可/ 执行/ 语句/ ;/ 若/ 缺陷/ 为/ 可/ 执行/ 语句/ 的/ 缺失/ ,/ 则/ 标记/ 相距/ 缺失/ 语句/ 最近/ 的/ 下/ 一条/ 可/ 执行/ 语句/ ./ 其次/ ,/ 根据/ 标记/ 的/ 可/ 执行/ 语句/ ,/ 选择/ 距离/ 该/ 可/ 执行/ 语句/ 最近/ 的/ 谓词/ 作为/ 程序/ 中/ 与/ 缺陷/ 最/ 相关/ 的/ 谓词/ ./ 通常/ ,/ 该/ 谓词/ 所在/ 分支/ 语句/ 与/ 标记/ 的/ 可/ 执行/ 语句/ 之间/ 不/ 超过/ 3/ 行/ 代码/ ./ 在/ 设置/ 滑动/ 窗口/ 上下/ 限时/ ,/ 由于/ 窗口/ 打开/ 方/ 能/ 进行/ 谓词/ 执行/ 信息/ 的/ 提取/ ,/ 因此/ 设置/ Wd/ =/ 1/ ./ 另外/ ,/ 由于/ 当/ ω/ / 6/ 时/ ,/ 算法/ 的/ 时间/ 复杂度/ 太高/ ,/ 对/ 一些/ 程序/ 而言/ ,/ 运行/ 时间/ 难以/ 接受/ ,/ 所以/ 在/ 实验/ 中/ 我们/ 设置/ Wu/ =/ 5.5/ ./ 4/ 实验/ 结果/ 分析/ 5.4/ ./ 1/ 信息/ 利用/ 强度/ 选择/ 有效性/ 验证/ 实验/ 在/ 研究/ 动机/ 中/ ,/ 我们/ 指出/ ,/ 针对/ 每个/ 谓词/ 选择/ 合适/ 的/ 信息/ 利用/ 强度/ ,/ 不仅/ 可以/ 充分利用/ 谓词/ 的/ 执行/ 信息/ ,/ 还/ 能够/ 提高/ 算法/ 的/ 定位精度/ ./ 因此/ ,/ 在/ 本节/ 中/ ,/ 我们/ 通过/ 对/ Safla/ 与/ Nbit/ -/ Pesla/ 算法/ [/ 8/ ]/ (/ N/ =/ 2/ ,/ 3/ ,/ 4/ ,/ 5/ )/ 的/ 定位/ 效果/ 进行/ 比较/ ,/ 来/ 验证/ Safla/ 中/ 加入/ 的/ 动态/ 信息/ 利用/ 强度/ 选择/ 方案/ 的/ 有效性/ ./ 在/ 各/ 统计/ 节点/ 处/ ,/ 我们/ 首先/ 给出/ Nbit/ -/ Pesla/ 算法/ 分别/ 在/ Siemens/ 和/ space/ 程序包/ 上算/ 得/ 的/ P/ -/ score/ 的/ 最大值/ 、/ 最小值/ 以及/ 平均值/ 结果/ ,/ 分别/ 如图/ 6/ 和/ 图/ 7/ 所示/ (/ 图中/ 横坐标/ 表示/ 所/ 需/ 检查/ 谓词/ 占/ 全部/ 谓词/ 的/ 百分比/ ,/ 纵坐标/ 表示/ 发现/ 缺陷/ 占/ 全部/ 缺陷/ 的/ 百分比/ ./ 之后/ 各图/ 横/ 纵坐标/ 所/ 表示/ 的/ 物理/ 意义/ 均/ 与/ 本图/ 相同/ ,/ 故/ 不再/ 赘述/ )/ ./ 由于/ space/ 程序包/ 较大/ ,/ 其中/ ①/ http/ :/ // // sir/ ./ unl/ ./ edu/ // portal/ // index/ ./ phpPage9/ 包含/ 的/ 谓词/ 数量/ 较/ 多/ ,/ 而且/ 当/ 检查/ 少量/ 谓词/ 时/ 就/ 可以/ 发现/ 大部分/ 的/ 缺陷/ ,/ 因此/ 图中/ space/ 与/ Siemens/ 的/ 横坐标/ 设置/ 不同/ ./ 图/ 6Safla/ 与/ Nbit/ -/ Pesla/ 算法/ 在/ Siemens/ 上/ 定位/ 效果/ 对比/ 图/ 7Safla/ 与/ Nbit/ -/ Pesla/ 算法/ 在/ space/ 上/ 定位/ 效果/ 对比/ 在/ 此基础/ 上/ ,/ 我们/ 又/ 给出/ Safla/ 的/ 定位/ 结果/ ./ 由图/ 6/ 和/ 图/ 7/ 我们/ 可以/ 看到/ ,/ 只有/ 在/ 图/ 7/ 的/ 10/ %/ 统计/ 节点/ 处/ ,/ Safla/ 的/ 定位/ 效果/ 不如/ Nbit/ -/ Pesla/ 算法/ 中/ 的/ 最优/ 结果/ ./ 但是/ ,/ 如果/ 考虑/ 到/ 如下/ 两个/ 因素/ :/ (/ 1/ )/ 对于/ space/ 程序/ 而言/ ,/ 检查/ 排位/ 表中前/ 10/ %/ 的/ 谓词/ 就/ 意味着/ 需要/ 检查/ 大约/ 91/ 个/ 谓词/ (/ 10/ %/ ×/ 914/ =/ 91.4/ )/ ,/ 代价/ 较大/ ;/ (/ 2/ )/ 当/ 检查/ 前/ 5/ %/ 的/ 谓词/ 时/ ,/ 就/ 可以/ 发现/ 超过/ 85/ %/ 的/ 缺陷/ (/ 24/ // 28/ =/ 0.8571/ )/ ,/ 继续/ 增加/ 检查/ 的/ 谓词/ 数量/ ,/ 所/ 发现/ 的/ 缺陷/ 数量/ 却/ 增加/ 并/ 不/ 明显/ ./ 我们/ 可以/ 认为/ ,/ Safla/ 的/ 定位/ 效果/ 在/ 整体/ 上/ 能够/ 接近/ 甚至/ 超出/ Nbit/ -/ Pesla/ 算法/ (/ N/ =/ 2/ ,/ 3/ ,/ 4/ ,/ 5/ )/ 中/ 最优/ 的/ 定位/ 效果/ ./ 上述/ 实验/ 验证/ 了/ 本文/ 所/ 提出/ 的/ 针对/ 不同/ 谓词/ 选择/ 信息/ 利用/ 强度/ 的/ 方法/ 是/ 有效/ 的/ ,/ 它/ 能够/ 较/ 好/ 地/ 适应/ 谓词/ 在/ 不同/ 测试用例/ 上/ 的/ 执行/ 情况/ ,/ 大大提高/ 算法/ 的/ 适应性/ ,/ 并/ 能/ 在/ 一定/ 程度/ 上/ 提高/ 算法/ 的/ 定位精度/ ./ 5.4/ ./ 2/ 算法/ 定位/ 效果/ 比较/ 实验/ 在/ 本/ 部分/ 中/ ,/ 我们/ 将/ 给出/ Safla/ 、/ CBI/ [/ 5/ ]/ 、/ SOBER/ [/ 6/ ]/ 、/ Mann/ -/ Whitney/ 、/ Wilcoxon/ 、/ F/ -/ test/ 、/ t/ -/ test/ 算法/ [/ 7/ ]/ 应用/ 在/ Siemens/ 程序包/ 以及/ space/ 程序包/ 上/ 得到/ 的/ 整体/ 定位/ 效果/ 对比/ ,/ 分别/ 如图/ 8/ 和/ 图/ 9/ 所示/ ./ 这些/ 参与/ 比较/ 的/ 算法/ 都/ 是/ 近年来/ 研究者/ 所/ 提出/ 的/ 基于/ 谓词/ 的/ 统计学/ 缺陷/ 定位/ 算法/ ./ 图/ 8/ 各/ 算法/ 在/ Siemens/ 上/ 整体/ 定位/ 效果/ 对比/ 由图/ 8/ 我们/ 可以/ 发现/ ,/ 在/ 9/ 个/ 统计/ 节点/ 中/ ,/ 相比/ 其它/ 的/ 6/ 种/ 算法/ ,/ Safla/ 的/ 定位/ 效果/ 都/ 是/ 最好/ 的/ ./ 举例说明/ 如下/ :/ 当/ 检查/ 10/ %/ 的/ 谓词/ 时/ ,/ Safla/ 可以/ 定位/ 出/ 35.14/ %/ 的/ 缺陷/ ,/ 其它/ 6/ 种/ 算法/ 中/ 表现/ 最好/ 的/ Wilcoxon/ 也/ 仅/ 能/ 定位/ 出/ 17.11/ %/ 的/ 缺陷/ ./ Safla/ 定位/ 到/ 的/ 缺陷/ 数量/ 接近/ Wilcoxon/ 的/ 2/ 倍/ ,/ Mann/ -/ Whitney/ 的/ 5/ 倍/ ,/ 是/ 其它/ 算法/ 的/ 7/ ~/ 30/ 倍/ ./ 由图/ 9/ 可以/ 看出/ ,/ 在/ space/ 程序包/ 上/ ,/ Safla/ 总体/ 定位/ 效果/ 接近/ 非/ 参数/ 假设检验/ 方法/ 中/ 最好/ 的/ Mann/ -/ Whitney/ 和/ Wilcoxon/ ,/ 远高于/ 其它/ 的/ 4/ 种/ 算法/ ./ 当/ 检查/ 少量/ 谓词/ 时/ ,/ 例如/ 检查/ 1/ %/ 的/ 谓词/ 时/ ,/ Safla/ 定位/ 到/ 的/ 缺陷/ 数量/ 略/ 少于/ Mann/ -/ Whitney/ (/ 平均/ 少/ 定位/ 出/ 1/ 个/ 缺陷/ )/ ,/ 而/ 在/ 2/ %/ 节点/ 处/ ,/ Safla/ 可以/ 取得/ 相比/ 其它/ 所有/ 比较/ 算法/ 最好/ 的/ 定位/ 效果/ ./ 图/ 10/ 还/ 给出/ 了/ Safla/ 、/ CBI/ [/ 5/ ]/ 、/ SOBER/ [/ 6/ ]/ 、/ Mann/ -/ Whitney/ 、/ Wilcoxon/ 、/ F/ -/ test/ 、/ t/ -/ test/ [/ 7/ ]/ 算法/ 在/ Siemens7/ 个/ 独立程序/ 上/ 的/ 定位/ 效果/ 对比/ ./ 可以/ 看到/ ,/ 除了/ 在/ schedule/ (/ 2programs/ )/ 上/ 的/ 定位/ 效果/ 还有/ 待/ 提高/ 外/ ,/ 在/ 其它/ 程序/ 上/ Safla/ 都/ 能/ 取得/ 很/ 好/ 的/ 定位/ 效果/ ./ Page10/ 图/ 107/ 个/ 算法/ 在/ Siemens/ 程序包/ 各/ 独立程序/ 上/ 的/ 定位/ 效果/ 对比/ 5.4/ ./ 3/ 算法/ 稳定性/ 实验/ 在/ 本节/ 中/ ,/ 我们/ 主要/ 对/ 7/ 种/ 算法/ 在/ 单个/ 缺陷/ 版本/ 上/ 定位/ 效果/ 的/ 差别/ 进行/ 实验/ 比较/ ,/ 这些/ 实验/ 反映/ 了/ 算法/ 在/ 不同/ 类型/ 程序/ 和/ 缺陷/ 上/ 定位/ 效果/ 的/ 稳定性/ ./ 在/ 表/ 2/ 中/ ,/ “/ Min/ ”/ 表示/ 使用/ 相应/ 算法/ 定位/ 缺表/ 2/ 各种/ 算法/ 在/ Siemens/ 和/ space/ 程序包/ 上/ 定位/ 效果/ 的/ 详细/ 对比/ F/ -/ test/ // %/ SiemensspaceMin1/ ./ 590.110/ ./ 890.113/ ./ 450.114/ ./ 440.774/ ./ 500.773/ ./ 700.110/ ./ 910.77/ Max100/ ./ 0045.51100/ ./ 0046.78100/ ./ 0048.46100/ ./ 0095.40100/ ./ 0094.97100/ ./ 0095.68100/ ./ 0094.97/ Mean29/ ./ 175.2946/ ./ 915.6653/ ./ 385.5767/ ./ 7126.4070/ ./ 7425.8160/ ./ 6417.2358/ ./ 5825.81/ Stdev26/ ./ 2412.2435/ ./ 7115.2630/ ./ 5615.7929/ ./ 0926.9628/ ./ 2326.9532/ ./ 0631.1834/ ./ 3426.95/ 中/ ,/ Safla/ 都/ 是/ 表现/ 最好/ 的/ 算法/ ,/ 即/ 使用/ Safla/ 进行/ 定位/ 缺陷/ 时/ ,/ 可以/ 在/ 很大/ 程度/ 上/ 获得/ 更/ 高/ 的/ 定位/ 精从表/ 2/ 中/ 可以/ 看出/ ,/ 对于/ Siemens/ 程序包/ 的/ 111/ 个/ 缺陷/ 版本/ ,/ 在/ “/ Mean/ ”/ 和/ “/ Stdev/ ”/ 这/ 两个/ 指标/ 陷时/ 所/ 得到/ 的/ 最小/ P/ -/ score/ ;/ “/ Max/ ”/ 表示/ 最大/ 的/ P/ -/ score/ ;/ “/ Mean/ ”/ 表示/ P/ -/ score/ 的/ 均值/ ;/ “/ Stdev/ ”/ 表示/ P/ -/ score/ 的/ 标准差/ ./ 在/ 这/ 4/ 个/ 指标/ 中/ ,/ 后/ 两个/ 体现/ 了/ 算法/ 在/ 定位/ 不同/ 缺陷/ 时所/ 表现/ 出/ 的/ 稳定性/ ,/ 其值/ 越/ 小/ ,/ 表明/ 该/ 算法/ 的/ 稳定性/ 越好/ ./ Page11/ 度/ ./ 对于/ space/ 程序包/ 中/ 28/ 个/ 缺陷/ 版本/ ,/ 相比/ 于/ CBI/ [/ 5/ ]/ 、/ SOBER/ [/ 6/ ]/ 、/ Wilcoxon/ 、/ Mann/ -/ Whitney/ 、/ F/ -/ test/ 和/ t/ -/ test/ [/ 7/ ]/ 这/ 6/ 种/ 算法/ ,/ Safla/ 无论是/ 在/ 定位精度/ 上/ 还是/ 在/ 定位/ 稳定性/ 上/ 都/ 具有/ 很大/ 的/ 优势/ ./ 6/ 有效性/ 讨论/ 影响/ 本文/ 结论/ 有效性/ 的/ 因素/ 主要/ 有/ 以下/ 3/ 个/ :/ (/ 1/ )/ 各/ 算法/ 的/ 复现/ 是否/ 正确/ ./ (/ 2/ )/ P/ -/ score/ 评价/ 方法/ 是否/ 有效/ ./ (/ 3/ )/ 目标软件/ 的/ 选取/ 是否/ 合适/ ./ 首先/ ,/ 对于/ CBI/ 算法/ 和/ SOBER/ 算法/ ,/ 本文/ 按照/ 文献/ [/ 5/ -/ 6/ ]/ 所述/ 步骤/ 进行/ 复现/ ,/ 并用/ 文献/ [/ 7/ ]/ 中/ 所/ 列举/ 的/ 例子/ 验证/ 了/ 其/ 正确性/ ./ 对于/ Wilcoxon/ 、/ Mann/ -/ Whitney/ 、/ F/ -/ test/ ,/ t/ -/ test/ 算法/ ,/ 我们/ 直接/ 利用/ ALGLIB/ 数理统计/ 软件/ 进行/ 实现/ ,/ 并用/ 文献/ [/ 7/ ]/ 中/ 公布/ 的/ 实验/ 数据/ 进行/ 了/ 验证/ ./ 因此/ 可以/ 认为/ 本文/ 对于/ 各/ 算法/ 的/ 复现/ 应该/ 是/ 正确/ 的/ ,/ 所/ 得到/ 的/ 实验/ 结果/ 和/ 数据/ 也/ 是/ 有效/ 的/ ./ P/ -/ score/ [/ 9/ ]/ 是/ 由/ Zhang/ 等/ 人于/ 近几年/ 提出/ ,/ 主要/ 适用/ 于/ 基于/ 谓词/ 的/ 方法/ ,/ 而/ 本文/ 所/ 提出/ 的/ 算法/ 以及/ 选取/ 出/ 作为/ 比较/ 对象/ 的/ 算法/ 均/ 属于/ 基于/ 谓词/ 的/ 方法/ ./ 因此/ ,/ 选用/ P/ -/ score/ 作为/ 评价/ 各/ 算法/ 定位精度/ 的/ 标准/ 也/ 是/ 合理/ 的/ ./ Siemens/ 程序包/ 一直/ 以来/ 就是/ 研究/ 软件缺陷/ 定位/ 必选/ 的/ 实验/ 对象/ 之一/ ,/ 但是/ 由于/ 其中/ 所/ 包含/ 的/ 缺陷/ 都/ 为/ 人工/ 植入/ ,/ 很难/ 代表/ 真实/ 的/ 软件缺陷/ ./ 而且/ 代码/ 行较/ 少/ ,/ 属于/ 小型/ 程序/ ./ 为此/ ,/ 本文/ 增加/ 了/ space/ 程序包/ 作为/ 实验/ 对象/ ,/ 得到/ 了/ 相同/ 的/ 结论/ ,/ 但/ 这/ 依旧/ 不能/ 排除/ 对于/ 其它/ 实验/ 对象/ ,/ 本文/ 的/ 研究会/ 得到/ 不同/ 实验/ 结果/ 的/ 情况/ ./ 因此/ ,/ 在/ 今后/ 的/ 研究/ 中/ ,/ 考虑/ 增加/ 更/ 大规模/ 的/ 程序/ 作为/ 实验/ 对象/ 仍旧/ 是/ 一个/ 重要/ 的/ 方面/ ./ 7/ 结束语/ 软件缺陷/ 定位/ 在/ 软件/ 调试/ 过程/ 中是/ 一项/ 异常/ 费时费力/ 的/ 工作/ ,/ 在/ 现有/ 方法/ 中/ ,/ 基于/ 谓词/ 的/ 统计学/ 缺陷/ 定位/ 方法/ 在/ 定位精度/ 上/ 已有/ 良好/ 的/ 表现/ ./ 但/ 之前/ 方法/ 中/ 信息/ 利用/ 的/ 强度/ 相对/ 固定/ ,/ 无法/ 针对/ 谓词/ 执行/ 信息量/ 的/ 变化/ 进行/ 动态/ 调节/ ,/ 这样/ 就/ 会/ 不可避免/ 的/ 导致/ 信息/ 利用/ 不足/ 或/ 过分/ 利用/ 情况/ 的/ 发生/ ,/ 从而/ 影响/ 定位精度/ 的/ 提高/ ./ 在/ 本文/ 中/ ,/ 我们/ 提出/ 一种/ 基于/ 谓词/ 执行/ 信息/ 分析/ 的/ 自/ 适应/ 缺陷/ 定位/ 算法/ ,/ 并用/ 实验/ 证明/ ,/ 根据/ 测试用例/ 运行/ 时/ 每个/ 谓词/ 提供/ 信息量/ 的/ 多少/ 来/ 选择/ 算法/ 中/ 信息/ 利用/ 的/ 强弱/ 是/ 有效/ 而且/ 必要/ 的/ ./ 由于/ 需要/ 对/ 不同/ 谓词/ 选择/ 不同/ 的/ 信息/ 利用/ 强度/ ,/ 因此/ ,/ 针对/ 不同/ 谓词/ ,/ 如何/ 更加/ 公平/ 地/ 比较/ 不同/ 信息/ 利用/ 强度/ 下/ 的/ 计算结果/ 以及/ 完善/ 信息/ 利用/ 强度/ 选择/ 方案/ 将/ 是/ 我们/ 下/ 一步/ 研究/ 工作/ 的/ 重点/ ./ 

