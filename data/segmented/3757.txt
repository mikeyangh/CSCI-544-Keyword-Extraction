Page1/ 计数/ 布鲁姆/ 过滤器/ 代数/ 运算/ 田小梅/ 1/ )/ ,/ 2/ )/ 张/ 大方/ 1/ )/ 谢鲲/ 1/ )/ 史长琼/ 1/ )/ ,/ 3/ )/ 杨晓波/ 1/ )/ 1/ )/ (/ 湖南大学/ 信息科学/ 与/ 工程学院/ 长沙/ 410082/ )/ 2/ )/ (/ 湖南/ 环境/ 生物/ 职业/ 技术/ 学院/ 信息技术/ 系/ 湖南/ 衡阳/ 421005/ )/ 3/ )/ (/ 长沙/ 理工大学/ 计算机/ 与/ 通信/ 工程学院/ 长沙/ 410114/ )/ 摘要/ 文中/ 探讨/ 计数/ 布鲁姆/ 过滤器/ 的/ 代数/ 运算/ 和/ 集合/ 运算/ 的/ 一致性/ 关系/ ,/ 研究/ 使用/ 计数/ 布鲁姆/ 过滤器/ 代数/ 运算/ 进行/ 集合/ 成员/ 查询/ 的/ 性能/ ./ 理论/ 分析/ 和/ 实验/ 结果表明/ ,/ 计数/ 布鲁姆/ 过滤器/ 的/ 并/ 、/ 交/ 、/ 补/ 、/ 减/ 、/ 异或/ 运算/ 产生/ 的/ 新/ 过滤器/ 依然/ 保持/ 计数/ 布鲁姆/ 过滤器/ 的/ 特征/ ,/ 支持/ 元素/ 的/ 删除/ 操作/ ,/ 不会/ 出现/ 假/ 阴性/ ,/ 能/ 用于/ 集合/ 并集/ 、/ 交集/ 、/ 补集/ 、/ 差集/ 及/ 对称/ 差/ 的/ 成员/ 查询/ ;/ 当/ 使用/ 两个/ 原始/ 的/ 计数/ 布鲁姆/ 过滤器/ 查询/ 补集/ 、/ 差集/ 及/ 对称/ 差/ 元素/ 时/ ,/ 会/ 存在/ 部分/ 本来/ 属于/ 补集/ 、/ 差集/ 或/ 对称/ 差/ 的/ 元素/ 被判/ 为/ 不/ 属于/ 补集/ 、/ 差集/ 或/ 对称/ 差/ 的/ 问题/ ,/ 而/ 使用/ 计数/ 布鲁姆/ 过滤器/ 代数/ 运算/ 后/ 的/ 过滤器/ 进行/ 补集/ 、/ 差集/ 及/ 对称/ 差/ 成员/ 查询/ ,/ 则/ 不/ 存在/ 上述/ 问题/ ,/ 空间/ 效率/ 能/ 提高/ 一倍/ ,/ 时间/ 效率/ 亦/ 能/ 显著/ 地/ 得到/ 改善/ ./ 计数/ 布鲁姆/ 过滤器/ 代数/ 运算/ 的/ 使用/ 有利于/ 进一步/ 扩展/ 计数/ 布鲁姆/ 过滤器/ 的/ 应用/ 范围/ ./ 譬如/ 计数/ 布鲁姆/ 过滤器/ 减/ 运算/ 可/ 用作/ 一种/ 新/ 的/ 集合/ 调和/ 方法/ ,/ 用于/ 分布式系统/ 中/ 大型/ 文件/ 的/ 分发/ ./ 关键词/ 代数/ 运算/ ;/ 计数/ 布鲁姆/ 过滤器/ ;/ 集合/ 调和/ ;/ 计算机网络/ ;/ 分布式计算/ 1/ 引言/ 自/ BurtonBloom/ 在/ 20/ 世纪/ 70/ 年代/ 提出/ 之后/ ,/ 布鲁姆/ 过滤器/ 已/ 被/ 广泛/ 用于/ 拼写/ 检查和/ 数据库系统/ 中/ ./ 近/ 一二十年/ ,/ 伴随/ 着/ 计算机网络/ 的/ 普及/ 和/ 发展/ ,/ 布鲁姆/ 过滤器/ 在/ 网络/ 领域/ 获得/ 了/ 新生/ ,/ 各种/ 布鲁姆/ 过滤器/ 算法/ 的/ 变种/ 和/ 新/ 的/ 应用/ 不断/ 出现/ [/ 1/ -/ 11/ ]/ ./ 按/ 布鲁姆/ 过滤器/ 向量/ 空间/ 的/ 构成/ 来看/ ,/ 有/ 两类/ 基本/ 的/ 布鲁姆/ 过滤器/ :/ 位/ 向量/ 布鲁姆/ 过滤器/ 和/ 计数器/ 向量/ 布鲁姆/ 过滤器/ ./ 位/ 向量/ 布鲁姆/ 过滤器/ 采用/ 位/ 向量/ 表示/ 数据/ 集合/ ,/ 能/ 支持/ 集合/ 元素/ 的/ 插入/ 、/ 查询/ 操作/ ,/ 如/ 标准/ 布鲁姆/ 过滤器/ (/ BloomFilter/ ,/ BF/ )/ [/ 3/ ]/ 、/ 动态/ 布鲁姆/ 过滤器/ (/ DynamicBloomFilter/ ,/ DBF/ )/ [/ 5/ ]/ 等/ ./ 计数器/ 向量/ 布鲁姆/ 过滤器/ 使用/ 计数器/ 向量/ 表示/ 数据/ 集合/ ,/ 既/ 能/ 支持/ 集合/ 元素/ 的/ 插入/ 、/ 查询/ 操作/ ,/ 也/ 能/ 支持/ 元素/ 的/ 删除/ 操作/ ,/ 如/ 计数/ 布鲁姆/ 过滤器/ (/ CountingBloomFilter/ ,/ CBF/ )/ [/ 4/ ]/ 、/ 光谱/ 布鲁姆/ 过滤器/ (/ SpectralBloomFilter/ ,/ SBF/ )/ [/ 6/ ]/ 等/ ./ 在/ 使用/ 布鲁姆/ 过滤器/ 查询/ 一个/ 元素/ 是否/ 属于/ 某个/ 集合/ 时/ ,/ 会/ 有/ 一定/ 的/ 假/ 阳性/ (/ FalsePositive/ )/ ,/ 也就是说/ ,/ 有/ 可能/ 把/ 不/ 属于/ 这个/ 集合/ 的/ 元素/ 判/ 为/ 属于/ 这个/ 集合/ ,/ 但/ 不/ 存在/ 假/ 阴性/ (/ FalseNegative/ )/ ,/ 即/ 不会/ 把/ 属于/ 这个/ 集合/ 的/ 元素/ 判为/ 不/ 属于/ 这个/ 集合/ [/ 1/ -/ 2/ ]/ ./ 有时/ ,/ 我们/ 不仅/ 需要/ 查询/ 元素/ 是否/ 属于/ 某/ 集合/ ,/ 还/ 需要/ 查询/ 元素/ 是否/ 不/ 属于/ 某/ 特定/ 集合/ (/ 即/ 查询/ 某/ 元素/ 是否/ 属于/ 该/ 特定/ 集合/ 的/ 补集/ ,/ 简称/ 补集/ 查询/ )/ ,/ 或者/ 查询/ 元素/ 是否/ 属于/ 集合/ 的/ 交集/ 、/ 并集/ 、/ 差集/ 及/ 对称/ 差/ ./ 譬如/ ,/ 分布式/ P2P/ 系统/ 的/ 多/ 关键字/ 搜索/ (/ Multi/ -/ keywordSearch/ )/ 模型/ 中/ 最/ 常见/ 的/ 两类/ 查询/ :/ And/ 查询/ 、/ Or/ 查询/ ,/ 这/ 两类/ 查询/ 分别/ 对应/ 求/ 集合/ 交集/ 问题/ 与求/ 集合/ 并集/ 问题/ ;/ 当/ 使用/ 分布式/ 倒排/ 索引/ 技术/ 并用/ BF/ 表示/ 与/ 关键字/ 匹配/ 的/ 文档/ 列表/ 来/ 实现/ 多/ 关键字/ 搜索/ 时/ ,/ 两类/ 查询/ 则/ 分别/ 对应/ BF/ 的/ 交/ 运算/ 与/ 并/ 运算/ ,/ 如/ 文献/ [/ 12/ ]/ ,/ 在/ 处理/ 跨/ 节点/ 连接/ 查询/ 时/ 传递/ BF/ 表示/ 的/ 文档/ 匹配/ 列表/ ,/ 并/ 进行/ BF/ 的/ 并/ 运算/ 或交/ 运算/ ,/ 以/ 减少/ 信息/ 传输/ 量/ ,/ 提高/ 检索/ 效率/ ./ 事实上/ ,/ 在/ 多/ 关键字/ 搜索/ 时/ ,/ 还有/ 一类/ 减/ 查询/ 常在/ 各类/ 检索/ 引擎/ 中/ 出现/ ,/ 如/ 查询/ 包含/ 关键字/ X/ 但/ 不/ 包含/ 关键字/ Y/ 的/ 网页/ ,/ 此时/ 可以/ 使用/ 布鲁姆/ 过滤器/ 的/ 减/ 运算/ 来/ 支持/ 减/ 查询/ ./ 又/ 如/ ,/ 在/ 分布式/ 内容/ 分发/ 系统/ 中/ ,/ 假如/ 要/ 将/ 一个/ 大/ 文件/ 从源/ 节点/ 分发/ 到/ 诸多/ 对/ 等/ 节点/ ,/ 节点/ (/ 设为/ A/ )/ 在/ 从源/ 节点/ 下载/ 某些/ 文件/ 块/ 的/ 同时/ 可/ 从/ 其它/ 对/ 等/ 节点/ (/ 设为/ B/ )/ 下载/ 其/ 缺失/ 的/ 文件/ 块/ ,/ 以/ 有效/ 地/ 提高/ 下载/ 速率/ ./ 这种/ 情况/ 下/ ,/ 首先/ 要/ 找出/ B/ 中有/ 而/ A/ 尚未/ 接收/ 到/ 的/ 文件/ 块/ (/ 即/ 集合/ 的/ 差/ )/ ,/ 然后/ 在/ 节点/ 间/ 仅/ 传送/ 这部分/ 差集/ 文件/ 块/ 即可/ ,/ 免去/ 传送/ 所有/ 文件/ 块/ 的/ 网络/ 开销/ ./ 此时/ ,/ 通常/ 文件/ 块/ 用/ 布鲁姆/ 过滤器/ 表示/ ,/ 需要/ 借助/ 布鲁姆/ 过滤器/ 来/ 找出/ 集合/ 的/ 差集/ 元素/ ,/ 即/ 差集/ 文件/ 块/ ./ 集合/ 用/ 布鲁姆/ 过滤器/ (/ 或/ 计数/ 布鲁姆/ 过滤器/ )/ 表示/ 后/ ,/ 我们/ 首先/ 想到/ 的/ 方法/ 是/ 使用/ 两个/ 单独/ 的/ 过滤器/ 来/ 查询/ 元素/ 是否/ 属于/ 并集/ 、/ 交集/ 、/ 补集/ 、/ 差集/ 或/ 对称/ 差/ ,/ 称双/ 过滤器/ 查询/ 法/ ./ 如/ ,/ 双/ 过滤器/ 补集/ 查询/ 法/ ,/ 直接/ 使用/ 集合/ S/ 的/ 过滤器/ 和/ 全集/ U/ 的/ 过滤器/ 来/ 查询/ 元素/ 是否/ 属于/ 珚/ S/ ,/ 其/ 查询/ 逻辑/ 如下/ :/ 首先/ 使用/ 全集/ U/ 的/ 过滤器/ 来/ 查询/ 元素/ 是否/ 在/ U/ 中/ ,/ 如果/ 查询/ 结果/ 为否/ ,/ 则/ 判定/ 元素/ 不/ 属于/ 珚/ S/ ;/ 如果/ 查询/ 结果/ 为/ 是/ ,/ 则/ 继续/ 使用/ 集合/ S/ 的/ 过滤器/ 查询/ 元素/ 是否/ 属于/ S/ ,/ 如果/ 查询/ 结果/ 仍然/ 是/ 肯定/ 的/ ,/ 则/ 认为/ 该/ 元素/ 不/ 属于/ 集合/ 的/ 补/ 集/ 珚/ S/ ,/ 否则/ ,/ 认定/ 该/ 元素/ 属于/ 集合/ 的/ 补/ 集/ 珚/ S/ ./ 在/ 该/ 过程/ 中/ ,/ 由于/ 查询/ 存在/ 如下/ 可能/ :/ 少量/ 不/ 属于/ S/ 的/ 元素/ 被判/ 为/ 属于/ S/ ,/ 即/ 少量/ 原本/ 属于/ 珚/ S/ 的/ 元素/ 被判/ 为/ 不/ 属于/ 珚/ S/ ,/ 或者说/ ,/ 在/ 这/ 一/ 直接/ 使用/ 过滤器/ 进行/ 补集/ 查询/ 的/ 过程/ 中/ 出现/ 了/ 假/ 阴性/ ./ 事实上/ ,/ 两/ 集合/ 用/ 布鲁姆/ 过滤器/ 表示/ 后/ ,/ 如果/ 直接/ 使用/ 两个/ 原始/ 的/ 布鲁姆/ 过滤器/ 查询/ 元素/ 是否/ 属于/ 差集/ 、/ 对称/ 差/ 等/ ,/ 存在/ 与/ 补集/ 查询/ 同样/ 的/ 问题/ ,/ 除/ 存在/ 假/ 阳性/ 外/ ,/ 还/ 存在/ 假/ 阴性/ ,/ 极大/ 地/ 影响/ 查询/ 结果/ 的/ 可靠性/ ,/ 而且/ ,/ 使用/ 两个/ 独立/ 的/ 布鲁姆/ 过滤器/ 查询/ 差集/ 、/ 对称/ 差/ 元素/ ,/ 需对/ 两个/ 过滤器/ 向量/ 进行/ 查找/ 操作/ ,/ 空间/ 效率/ 及/ 时间/ 效率/ 均/ 低/ ./ 如果/ 使用/ 双/ 过滤器/ 查询/ 法/ 进行/ 并集/ 或/ 交集/ 查询/ ,/ 虽然/ 不/ 存在/ 假/ 阴性/ ,/ 但是/ 需要/ 保存/ 两个/ 单独/ 的/ 过滤器/ 向量/ ,/ 而且/ 查询/ 时/ 需要/ 在/ 两个/ 过滤器/ 向量/ 上/ 进行/ 定位/ 、/ 比较/ 操作/ ,/ 从而/ 影响/ 查询/ 算法/ 的/ 时间/ 、/ 空间/ 效率/ ./ 由于/ 使用/ 双/ 过滤器/ 法/ 查询/ 补集/ 、/ 差集/ 或/ 对称/ 差/ 元素/ 时/ 存在/ 着/ 前述/ 假/ 阴性/ 问题/ ,/ 因此/ ,/ 我们/ 尝试/ 从/ 布鲁姆/ 过滤器/ 向量/ 运算/ 的/ 角度/ 寻求/ 能/ 解决/ 前述/ 假/ 阴性/ 问题/ 的/ 方法/ ./ 目前/ 研究/ 布鲁姆/ 过滤器/ 向量/ 运算/ 及/ 应用/ 的/ 工作/ 为数不多/ [/ 5/ ,/ 13/ -/ 14/ ]/ ./ 文献/ [/ 13/ ]/ 指出/ 可用/ 布鲁姆/ 过滤器/ 位/ 向量/ 按位/ 或/ 、/ 按位/ 与/ 得到/ 的/ 向量/ 分别/ 表示/ 并集/ 、/ 交集/ ./ 文献/ [/ 5/ ]/ 定义/ 了/ 标准/ 布鲁姆/ 过滤器/ (/ BF/ )/ Page3/ 的/ 并/ 运算/ 和/ 交/ 运算/ 以及/ 动态/ 布鲁姆/ 过滤器/ 、/ 多维/ 布鲁姆/ 过滤器/ 、/ 多维/ 动态/ 布鲁姆/ 过滤器/ 等位/ 向量/ 布鲁姆/ 过滤器/ 的/ 并/ 运算/ ,/ 且/ 运用/ BF/ 的/ 并/ 运算/ 构造/ 了/ 一个/ 基于/ 标准/ 布鲁姆/ 过滤器/ 的/ 知情/ 搜索/ 协议/ (/ InformedsearchprotocolbasedonBloomfilters/ )/ ./ 文献/ [/ 14/ ]/ 研究/ 位/ 向量/ 布鲁姆/ 过滤器/ 代数/ 运算/ 和/ 集合/ 查询/ 的/ 关系/ ,/ 得出结论/ 如下/ :/ 位/ 向量/ 布鲁姆/ 过滤器/ 的/ 并/ 、/ 交/ 运算/ 能够/ 支持/ 集合/ 并集/ 、/ 交集/ 的/ 元素/ 查询/ ,/ 而/ BF/ 补/ 、/ 减/ 、/ 异或/ 运算/ 则/ 由于/ 存在/ 较大/ 的/ 假/ 阴性/ ,/ 不能/ 用于/ 集合/ 补集/ 、/ 差集/ 、/ 对称/ 差/ 的/ 元素/ 查询/ ;/ 直接/ 通过/ 并/ 、/ 交/ 运算/ 后/ 的/ 位/ 向量/ 布鲁姆/ 过滤器/ 完成/ 查询/ 操作/ ,/ 与/ 直接/ 使用/ 两个/ 原始/ 的/ 布鲁姆/ 过滤器/ 相/ 比较/ ,/ 可/ 节约/ 位/ 向量/ 的/ 存储空间/ 及位/ 向量/ 的/ 查询/ 次数/ ,/ 提高/ 查询/ 效率/ ./ 现有/ 工作/ 研究/ 的/ 是/ 位/ 向量/ 布鲁姆/ 过滤器/ 的/ 代数/ 运算/ ,/ 研究/ 结论/ 表明/ :/ 位/ 向量/ 布鲁姆/ 过滤器/ 并/ 、/ 交/ 运算/ 的/ 使用/ 可/ 推广/ 布鲁姆/ 过滤器/ 的/ 应用/ 范围/ ,/ 简化/ 使用/ 布鲁姆/ 过滤器/ 的/ 系统/ 设计/ [/ 5/ ,/ 14/ -/ 15/ ]/ ./ 但是/ ,/ BF/ 的/ 减/ 、/ 异或/ 、/ 补/ 运算/ 不能/ 用于/ 差集/ 、/ 对称/ 差/ 、/ 补集/ 的/ 元素/ 查询/ [/ 14/ ]/ ,/ 而/ CBF/ 支持/ 元素/ 的/ 删除/ 操作/ ,/ 计数器/ 值/ 可/ 实现/ 减法/ 运算/ ,/ CBF/ 的/ 应用/ 优势/ 除/ 可/ 用于/ 动态/ 更新/ 的/ 应用/ 场合/ [/ 4/ ]/ 外/ ,/ 是否/ 还/ 具有/ 其它/ 方面/ 的/ 优势/ 呢/ ?/ 譬如/ ,/ 是否/ 可/ 对/ CBF/ 计数器/ 向量/ 进行/ 并/ 、/ 交/ 、/ 减/ 、/ 异或/ 及补/ 运算/ ?/ CBF/ 的/ 减/ 、/ 异或/ 及补/ 运算/ 是否/ 能/ 用于/ 差集/ 、/ 对称/ 差及/ 补集/ 的/ 元素/ 查询/ ?/ 这/ 就是/ 本文/ 的/ 研究/ 目的/ ./ 本文/ 通过/ 合理/ 地/ 定义/ 计数器/ 向量/ 的/ 并/ 、/ 交/ 、/ 补/ 、/ 减/ 、/ 异或/ 代数/ 运算/ ,/ 使得/ 代数/ 运算/ 后/ 的/ CBF/ 均/ 能/ 较/ 准确/ 地/ 反映/ 相应/ 集合/ ,/ 不会/ 出现/ 假/ 阴性/ ,/ 可以/ 使用/ CBF/ 的/ 并/ (/ 交/ 、/ 补/ 、/ 减/ 、/ 异或/ )/ 运算/ 进行/ 集合/ 的/ 并/ 集/ (/ 交集/ 、/ 补集/ 、/ 差集/ 、/ 对称/ 差/ )/ 查询/ ;/ 使用/ CBF/ 代数/ 运算/ 进行/ 补集/ (/ 差集/ 、/ 对称/ 差/ )/ 查询/ ,/ 与/ 使用/ 两个/ 原始/ 的/ CBF/ 进行/ 查询/ 的/ 方法/ 相比/ ,/ 不/ 存在/ 假/ 阴性/ ,/ 空间/ 效率/ 能/ 提高/ 一倍/ ,/ 时间/ 效率/ 亦/ 能/ 显著/ 地/ 得到/ 改善/ ./ 本文/ 以/ CBF/ 减/ 运算/ 为例/ ,/ 将/ 之/ 应用/ 于/ 分布式计算/ 领域/ 中/ 的/ 集合/ 调和/ 过程/ ,/ 由于/ CBF/ 减/ 运算/ 后/ 得到/ 的/ 过滤器/ 在/ 查询/ 差集/ 时/ 不/ 存在/ 假/ 阴性/ ,/ 使用/ 该/ 过滤器/ 查询/ 时能/ 找出/ 所有/ 差集/ 元素/ ,/ 从而/ 得到/ 完整/ 的/ 集合/ 并集/ ./ 仿真/ 实验/ 证明/ ,/ 使用/ CBF/ 减/ 运算/ 的/ 集合/ 调和/ 法是/ 一种/ 简单/ 、/ 可靠/ 、/ 高效/ 的/ 调和/ 方法/ ./ CBF/ 减/ 运算/ 在/ 分布式/ 集合/ 调和/ 中/ 的/ 成功/ 应用/ ,/ 说明/ 本文/ 的/ CBF/ 代数/ 运算/ 在/ 分布式系统/ 中/ 具有/ 广泛/ 的/ 应用/ 潜力/ ./ 本文/ 第/ 2/ 节/ 概述/ 计数/ 布鲁姆/ 过滤器/ 算法/ ;/ 第/ 3/ 节/ 定义/ 计数/ 布鲁姆/ 过滤器/ 并/ 、/ 交/ 、/ 补/ 、/ 减/ 、/ 异或/ 运算/ ;/ 第/ 4/ 节对/ 计数/ 布鲁姆/ 过滤器/ 代数/ 运算/ 和/ 集合/ 运算/ 的/ 关系/ 作/ 了/ 数学分析/ 和/ 证明/ ;/ 第/ 5/ 节是/ 计数/ 布鲁姆/ 过滤器/ 代数/ 运算/ 的/ 性能/ 分析/ 及/ 模拟实验/ 部分/ ;/ 第/ 6/ 节是/ 计数/ 布鲁姆/ 过滤器/ 代数/ 运算/ 的/ 应用/ 实例/ —/ —/ —/ 使用/ CBF/ 减/ 运算/ 的/ 集合/ 调和/ ;/ 第/ 7/ 节是/ 本文/ 工作/ 的/ 总结/ 及下/ 一步/ 工作/ 重点/ 的/ 介绍/ ./ 2/ 计数/ 布鲁姆/ 过滤器/ 查询/ 算法/ 2.1/ 标准/ 布鲁姆/ 过滤器/ 标准/ 布鲁姆/ 过滤器/ [/ 3/ ]/ 查询/ 算法/ 核心/ 是/ 一个/ 长度/ 为/ m/ 的/ 位/ 向量/ 和/ 一个/ 由/ k/ 个/ Hash/ 函数/ 构成/ 的/ Hash/ 函数/ 组/ ./ n/ 个/ 元素/ 的/ 数据/ 集合/ S/ =/ {/ s1/ ,/ s2/ ,/ …/ ,/ sn/ }/ 通过/ k/ 个/ Hash/ 函数/ h1/ ,/ h2/ ,/ …/ ,/ hk/ 映射/ 到位/ 向量/ 犅/ 犉/ =/ (/ b1b2b3/ …/ bm/ )/ 中/ ./ 位/ 向量/ 犅/ 犉/ 就是/ 集合/ S/ 的/ 布鲁姆/ 过滤器/ 表示/ ,/ 记/ 为/ 犅/ 犉/ (/ S/ )/ m/ ,/ k/ ,/ 或/ 简记/ 为/ 犅/ 犉/ (/ S/ )/ ./ 各/ Hash/ 函数/ 相互/ 独立/ 且/ 函数/ 的/ 取值/ 范围/ 为/ {/ 0/ ,/ 1/ ,/ 2/ ,/ …/ ,/ m/ -/ 1/ }/ 在/ 初始化/ 时/ ,/ 犅/ 犉/ 的/ 每位/ 都/ 为/ 0/ ./ 当/ 元素/ x/ 插入/ 集合/ 时/ ,/ 计算/ x/ 对应/ 的/ k/ 个位/ 串/ 索引/ 值/ h1/ (/ x/ )/ ,/ h2/ (/ x/ )/ ,/ …/ ,/ hk/ (/ x/ )/ (/ 即/ Hash/ 地址/ )/ 将/ 犅/ 犉/ 向量/ 相应/ 位置/ 1/ (/ bhj/ (/ x/ )/ =/ 1/ ,/ 1/ / j/ / k/ )/ ,/ 完成/ 元素/ 的/ 插入/ ./ 查询/ 给定/ 的/ 元素/ x/ 是否/ 属于/ 集合/ S/ 首先/ 计算/ x/ 对应/ 的/ k/ 个位/ 串/ 索引/ 值/ (/ h1/ (/ x/ )/ ,/ h2/ (/ x/ )/ ,/ …/ ,/ hk/ (/ x/ )/ )/ ,/ 然后/ 检查/ 向量/ 犅/ 犉/ 的/ k/ 个/ 位置/ 是否/ 全为/ 1/ ,/ 若全/ 1/ ,/ 则/ 认为/ x/ 属于/ 集合/ S/ 中/ ;/ 否则/ ,/ 只要/ 此/ k/ 个/ 位置/ 中任/ 一位/ 为/ 0/ ,/ 则/ x/ 必定/ 不/ 属于/ 集合/ S/ ./ 标准/ 布鲁姆/ 过滤器/ 存在/ 假/ 阳性/ ,/ 可能/ 将/ 不/ 属于/ 集合/ 的/ 元素/ 判成/ 属于/ 集合/ ,/ 其假/ 阳性/ 概率/ 为/ [/ 1/ ,/ 3/ ]/ 当/ 集合/ 规模/ n/ 和/ 向量/ 空间/ m/ 一定/ 的/ 情况/ 下/ ,/ 使/ 布鲁姆/ 过滤器/ 查询/ 假/ 阳性/ 概率/ 达/ 最小/ 的/ k/ 值为/ 使用/ 标准/ 布鲁姆/ 过滤器/ 完成/ 集合/ 存储/ m/ 比特/ 的/ 位/ 向量/ 可以/ 表示/ n/ 个/ 元素/ 的/ 集合/ ,/ 每个/ 元素/ 平均/ 使用/ m/ // n/ 位/ ,/ 大大/ 节约/ 存储空间/ ./ 使用/ 标准/ 布鲁姆/ Page4/ 过滤器/ 完成/ 单个/ 元素/ 的/ 成员/ 查询/ ,/ 需/ 进行/ k/ 次/ Hash/ 函数/ 的/ 计算/ ,/ 并/ 进行/ k/ 次位/ 的/ 查询/ ,/ 其/ 时间/ 复杂度/ 为/ O/ (/ k/ )/ ,/ 与/ 集合/ 中/ 元素/ 个数/ n/ 无关/ ./ 布鲁姆/ 过滤器/ 空间/ 简洁/ 、/ 查询/ 效率高/ 的/ 特点/ ,/ 正是/ 其/ 得以/ 广泛应用/ 的/ 原因/ ./ 标准/ 布鲁姆/ 过滤器/ 的/ 一个/ 缺点/ 是/ 不/ 支持/ 集合/ 元素/ 的/ 删除/ 操作/ ./ 由于/ 标准/ 布鲁姆/ 过滤器/ 不/ 处理/ 碰撞/ ,/ 有/ 可能/ 多个/ 元素/ 都/ 映射/ 到/ 了/ 同一/ Hash/ 位/ ,/ 因此/ 如果/ 执行/ 删除/ 操作/ 将/ 此/ Hash/ 位/ 清零/ ,/ 会/ 出现/ 假/ 阴性/ ,/ 将/ 原本/ 属于/ 集合/ 的/ 元素/ 判定/ 为/ 不/ 属于/ 集合/ ./ 从/ 集合/ 的/ 布鲁姆/ 过滤器/ 表示/ 算法/ 不难看出/ ,/ 集合/ 同/ 它/ 的/ 布鲁姆/ 过滤器/ 表示/ 所/ 蕴涵/ 的/ 信息/ 最初/ 是/ 一致/ 的/ ,/ 此时/ 不会/ 发生/ 假/ 阴性/ 判定/ ./ 当/ 布鲁姆/ 过滤器/ 执行/ 了/ 对/ 数据/ 元素/ 的/ 不/ 正确/ 删除/ 操作/ 时/ ,/ 破坏/ 了/ 集合/ 同其/ 布鲁姆/ 过滤器/ 表示/ 之间/ 的/ 一致性/ ,/ 从而/ 出现/ 假/ 阴性/ 判定/ ./ 2.2/ 计数/ 布鲁姆/ 过滤器/ 计数/ 布鲁姆/ 过滤器/ [/ 4/ ]/ 将/ 标准/ 布鲁姆/ 过滤器/ 位/ 向量/ 的/ 每/ 一位/ 扩展/ 为/ 一个/ r/ 位/ 的/ 计数器/ ,/ 在/ 插入/ 元素/ 时/ 将/ 对应/ 的/ k/ 个/ 计数器/ 的/ 值/ 分别/ 加/ 1/ ,/ 删除/ 元素/ 时/ 将/ 对应/ 的/ k/ 个/ 计数器/ 的/ 值/ 分别/ 减/ 1/ ./ n/ 个/ 元素/ 的/ 数据/ 集合/ S/ =/ {/ s1/ ,/ s2/ ,/ …/ ,/ sn/ }/ 通过/ k/ 个/ Hash/ 函数/ h1/ ,/ h2/ ,/ …/ ,/ hk/ 映射/ 到/ 由/ m/ 个/ 计数器/ 组成/ 的/ 计数器/ 向量/ 犆/ 犅/ 犉/ =/ (/ C1C2C3/ …/ Cm/ )/ 中/ ./ 计数器/ 向量/ 犆/ 犅/ 犉/ 就是/ 集合/ S/ 的/ 计数/ 布鲁姆/ 过滤器/ 表示/ ,/ 记/ 为/ 犆/ 犅/ 犉/ (/ S/ )/ m/ ,/ k/ ,/ 或/ 简记/ 为/ 犆/ 犅/ 犉/ (/ S/ )/ ./ 在/ 初始化/ 时/ ,/ 犆/ 犅/ 犉/ 的/ 每个/ 计数器/ 都/ 为/ 0/ ./ 当/ 元素/ x/ 插入/ 集合/ 时/ ,/ 计算/ x/ 对应/ 的/ k/ 个/ 计数器/ 索引/ 值/ h1/ (/ x/ )/ ,/ h2/ (/ x/ )/ ,/ …/ ,/ hk/ (/ x/ )/ (/ 即/ Hash/ 地址/ )/ 将/ 犆/ 犅/ 犉/ 向量/ 相应/ 计数器/ 加/ 1/ (/ Chj/ (/ x/ )/ ++/ ,/ 1/ / j/ / k/ )/ ,/ 完成/ 元素/ 的/ 插入/ ./ 查询/ 给定/ 的/ 元素/ x/ 是否/ 属于/ 集合/ S/ ,/ 首先/ 计算/ x/ 对应/ 的/ k/ 个/ 计数器/ 索引/ 值/ h1/ (/ x/ )/ ,/ h2/ (/ x/ )/ ,/ …/ ,/ hk/ (/ x/ )/ ,/ 然后/ 检查/ 计数器/ 向量/ 犆/ 犅/ 犉/ 对应/ k/ 个/ 计数器/ (/ Chj/ (/ x/ )/ ,/ 1/ / j/ / k/ )/ 的/ 值/ ,/ 若全/ 大于/ 等于/ 1/ ,/ 则/ 认为/ x/ 属于/ 集合/ S/ 中/ ;/ 否则/ ,/ 只要/ 此/ k/ 个/ 计数器/ 中/ 任一/ 计数器/ 为/ 0/ ,/ 则/ x/ 必定/ 不/ 属于/ 集合/ S/ ./ 当要/ 从/ 计数/ 布鲁姆/ 过滤器/ 删除/ 元素/ x/ 时/ ,/ 计算/ 出/ x/ 对应/ 的/ k/ 个/ 计数器/ 索引/ 值后/ 将/ 犆/ 犅/ 犉/ 向量/ 中/ 相应/ 计数器/ 进行/ 减/ 1/ 运算/ (/ Chj/ (/ x/ )/ -/ -/ ,/ 1/ / j/ / k/ )/ 即可/ ./ 由于/ 计数/ 布鲁姆/ 过滤器/ 执行/ 删除/ 操作/ 时/ 不是/ 将/ 元素/ 映射/ 的/ 计数器/ 采取/ 清零/ 操作/ ,/ 而是/ 将/ 相应/ 计数器/ 减/ 1/ ,/ 不会/ 影响/ 映射/ 到/ 同一/ Hash/ 地址/ 的/ 其它/ 元素/ 的/ 判定/ ,/ 从而/ 不会/ 出现/ 假/ 阴性/ ./ 计数/ 布鲁姆/ 过滤器/ 通过/ 占用/ r/ 倍/ 于/ 标准/ 布鲁姆/ 过滤器/ 的/ 存储空间/ 的/ 代价/ ,/ 使得/ 布鲁姆/ 过滤器/ 除了/ 支持/ 元素/ 的/ 插入/ 、/ 查询/ 操作/ 外/ ,/ 还/ 能/ 支持/ 元素/ 的/ 删除/ 操作/ ./ 因为/ 在/ 元素/ 插入/ 时/ ,/ 会/ 使/ 计数/ 布鲁姆/ 过滤器/ 对应/ 计数器/ 加/ 1/ ,/ 而/ 计数器/ 是/ 由/ 有限/ 的/ 比特/ 位/ 组成/ ,/ 因此/ 可能/ 会/ 造成/ 计数器/ 溢出/ ./ 为/ 避免/ 计数器/ 溢出/ ,/ 应/ 选择/ 适当/ 的/ 计数器/ 位数/ r/ ./ 下面/ 通过/ 计算/ 溢出/ 概率/ 来/ 获得/ 通用/ 的/ 计数器/ 长度/ 设计/ ./ 我们/ 先/ 计算/ 第/ i/ 个/ 计数器/ 增加/ j/ 次/ 的/ 概率/ :/ 上式/ 右/ 端的/ 表达式/ 中/ ,/ 第/ 1/ 个/ 分量/ 表示/ 从/ nk/ 次/ Hash/ 中/ 选择/ j/ 次/ ,/ 第/ 2/ 个/ 分量/ 表示/ j/ 次/ Hash/ 都/ 选中/ 了/ 第/ i/ 个/ 计数器/ ,/ 第/ 3/ 个/ 分量/ 表示/ 其它/ nk/ -/ j/ 次/ Hash/ 都/ 没有/ 选中/ 第/ i/ 个/ 计数器/ ./ 因此/ ,/ 第/ i/ 个/ 计数器/ 的/ 值/ 大于/ 或/ 等于/ j/ 的/ 概率/ 可以/ 限定/ 为/ 当/ m/ // n/ 值/ 固定/ 时/ ,/ k/ 的/ 最优/ 值为/ (/ ln2/ )/ m/ // n/ ,/ 如果/ 限制/ k/ / (/ ln2/ )/ m/ // n/ ,/ 就/ 可以/ 得到/ 任意/ 计数器/ 值/ 大于/ 或/ 等于/ j/ 的/ 概率/ :/ P/ (/ Max/ (/ Ci/ )/ / j/ )/ / meln2/ (/ )/ j/ 或/ 溢出/ ./ 计数器/ 溢出/ 概率/ 为/ 如果/ r/ =/ 4/ ,/ 那么/ 当/ 计数器/ 的/ 值/ 达到/ 16/ 时/ 就/ 会/ P/ (/ Max/ (/ Ci/ )/ / 16/ )/ / 1.37/ ×/ 10/ -/ 15/ ×/ m/ ./ 由/ 上式/ 可知/ ,/ 溢出/ 概率/ 非常/ 小/ ,/ 对于/ 大多数/ 应用程序/ 来说/ ,/ 取/ r/ =/ 4/ 就/ 足够/ 了/ [/ 4/ ]/ ./ 因此/ ,/ 本文/ 的/ 计数/ 布鲁姆/ 过滤器/ 使用/ 4/ 位/ 计数器/ ./ 计数/ 布鲁姆/ 过滤器/ 同样/ 存在/ 假/ 阳性/ ,/ 其假/ 阳性/ 概率/ 与/ 标准/ 布鲁姆/ 过滤器/ 的/ 相同/ ,/ 为/ 计数/ 布鲁姆/ 过滤器/ 查询/ 算法/ 的/ 出现/ 解决/ 了/ 标准/ 布鲁姆/ 过滤器/ 不/ 支持/ 元素/ 的/ 删除/ 这一/ 问题/ ,/ 同时/ 依然/ 保留/ 标准/ 布鲁姆/ 过滤器/ 实现/ 简单/ 、/ 查询/ 效率高/ 的/ 优点/ ./ 由于/ 计数/ 布鲁姆/ 过滤器/ 具有/ 支持/ 元素/ 删除/ 操作/ Page5/ 的/ 优点/ ,/ 自其/ 提出/ 后/ ,/ 涌现/ 了/ 很多/ 计数/ 布鲁姆/ 过滤器/ 的/ 扩展/ 算法/ 和/ 具体/ 应用/ 实例/ ./ 譬如/ ,/ 光谱/ 布鲁姆/ 过滤器/ [/ 6/ ]/ 扩展/ 了/ 计数/ 布鲁姆/ 过滤器/ ,/ 除/ 支持/ 成员/ 查询/ 外/ 还/ 支持/ 频数/ 查询/ ,/ 解决/ 了/ 计数器/ 大小/ 变动/ 带来/ 的/ 动态/ 存储/ 问题/ ,/ 但是/ 引入/ 了/ 复杂/ 的/ 索引/ 结构/ ,/ 每个/ 计数器/ 的/ 访问/ 变得复杂/ 而/ 耗时/ ./ 为此/ ,/ 文献/ [/ 7/ ]/ 提出/ 了/ 动态/ 计数/ 过滤器/ ,/ 既/ 支持/ 元素/ 出现/ 频数/ 查询/ ,/ 结构/ 又/ 相对/ 简单/ ./ 文献/ [/ 11/ ]/ 则/ 旨在/ 进一步/ 减少/ 计数/ 布鲁姆/ 过滤器/ 所/ 占/ 存储空间/ ,/ 研究/ 计数器/ 溢出/ 条件/ ,/ 运用/ 层次化/ 设计/ 思想/ 和/ 哈夫曼/ 编码/ ,/ 设计/ 出新/ 的/ 多层/ 压缩/ 计数/ 布鲁姆/ 过滤器/ 以/ 适用/ 于/ 网络/ 处理器/ 的/ 应用/ 场合/ ./ 文献/ [/ 16/ ]/ 中/ 的/ d/ -/ left/ 计数/ 布鲁姆/ 过滤器/ 使用/ d/ -/ lefthashing/ 解决/ Hash/ 表/ 的/ 负载平衡/ 问题/ ./ 计数/ 布鲁姆/ 过滤器/ 即使/ 分配/ 较大/ 的/ Hash/ 空间/ ,/ 由于/ 按/ 最坏/ 情况/ 分配/ 计数器/ 容量/ ,/ 造成/ 大量/ Hash/ 空间/ 闲置/ ./ 使用/ d/ -/ lefthashing/ 后/ 可以/ 让/ 存储/ 的/ 信息/ 分布/ 均匀/ ,/ 更加/ 紧凑/ ,/ 从而/ 用/ 更/ 小/ 的/ 空间/ (/ 存储空间/ 可/ 减少/ 2/ 倍/ 以上/ )/ 存储/ 同样/ 多/ 的/ 信息/ ./ 3/ 计数/ 布鲁姆/ 过滤器/ 代数/ 运算/ 定义/ 1/ (/ 元素/ 的/ 计数/ 布鲁姆/ 过滤器/ 表示/ )/ ./ 对于/ 全集/ U/ 中/ 的/ 任意/ 元素/ x/ ,/ 通过/ k/ 个/ Hash/ 函数/ ,/ 映射/ 到/ m/ 个/ 计数器/ (/ 位数/ 为/ r/ )/ 的/ 计数/ 布鲁姆/ 过滤器/ 向量/ 犆/ 犅/ 犉/ m/ ,/ k/ (/ CBFm/ ,/ k/ 后/ ,/ 生成/ 新/ 向量/ (/ CBF/ (/ x/ )/ m/ ,/ k1/ ,/ …/ ,/ CBF/ (/ x/ )/ m/ ,/ kCBF/ (/ x/ )/ m/ ,/ km/ )/ ,/ 记/ 为/ 犆/ 犅/ 犉/ (/ x/ )/ m/ ,/ k/ ,/ 其中/ 第/ i/ 个/ 计数器/ 的/ 值/ 变化/ 如下/ :/ 犆/ 犅/ 犉/ (/ x/ )/ m/ ,/ k/ (/ CBFm/ ,/ ki/ ,/ 烅/ 烄/ ./ CBFm/ ,/ k/ 烆/ 定义/ 2/ (/ 集合/ 的/ 计数/ 布鲁姆/ 过滤器/ 表示/ )/ ./ 对于/ 全集/ U/ 中/ 的/ 任意/ 子集/ S/ =/ {/ s1/ ,/ s2/ ,/ …/ ,/ sn/ }/ ,/ S/ 中/ 所有/ 元素/ 都/ 通过/ k/ 个/ Hash/ 函数/ 映射/ 到/ 计数器/ 个数/ 为/ m/ 的/ 计数/ 布鲁姆/ 过滤器/ 向量/ 中/ ,/ 向量/ 记/ 为/ 犆/ 犅/ 犉/ (/ S/ )/ m/ ,/ k/ ,/ 其中/ 第/ i/ 个/ 计数器/ CBF/ (/ S/ )/ m/ ,/ k/ 定义/ 3/ (/ 同源/ 计数/ 布鲁姆/ 过滤器/ )/ ./ 对于/ 全集/ U/ 中/ 的/ 任意/ 两/ 子集/ S1/ 和/ S2/ ,/ 其/ 计数/ 布鲁姆/ 过滤器/ 表示/ 分别/ 为/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ,/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ ,/ 若/ 它们/ 使用/ 的/ k/ 个/ Hash/ 函数/ 为同/ 一组/ Hash/ 函数/ ,/ 计数器/ 个数/ m/ 相同/ ,/ 且/ 计数器/ 大小/ r/ 相等/ ,/ 则/ 称/ 两/ 计数/ 布鲁姆/ 过滤器/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ,/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 同源/ ./ 下文/ 讨论/ 的/ 均/ 为/ 同源/ 计数/ 布鲁姆/ 过滤器/ ./ 定义/ 4/ (/ 同源/ 计数/ 布鲁姆/ 过滤器/ 的/ 补/ 运算/ )/ ./ 对于/ 计数/ 布鲁姆/ 过滤器/ 犆/ 犅/ 犉/ (/ S/ )/ m/ ,/ k/ ,/ 其补/ 运算/ 犆/ 犅/ 犉/ (/ S/ )/ m/ ,/ k/ =/ {/ Ci/ |/ Ci/ =/ CBF/ (/ U/ )/ m/ ,/ k1/ ,/ …/ ,/ m/ }/ ,/ U/ 为/ 全集/ ./ 定义/ 5/ (/ 同源/ 计数/ 布鲁姆/ 过滤器/ 的/ 交/ 运算/ )/ ./ 对于/ 两/ 同源/ 计数/ 布鲁姆/ 过滤器/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ 与/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ ,/ 其交/ 运算/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∩/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ =/ {/ Ci/ |/ Ci/ =/ min/ (/ CBF/ (/ S1/ )/ m/ ,/ k/ 定义/ 6/ (/ 同源/ 计数/ 布鲁姆/ 过滤器/ 的/ 减/ 运算/ )/ ./ 对于/ 两/ 同源/ 计数/ 布鲁姆/ 过滤器/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ 与/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ ,/ 其减/ 运算/ :/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ \/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ =/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∩/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ =/ {/ Ci/ |/ Ci/ =/ min/ (/ CBF/ (/ S1/ )/ m/ ,/ kCBF/ (/ S2/ )/ m/ ,/ k/ 定义/ 7/ (/ 同源/ 计数/ 布鲁姆/ 过滤器/ 的/ 并/ 运算/ )/ ./ 两/ 同源/ 计数/ 布鲁姆/ 过滤器/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ 与/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 的/ 并/ 运算/ 如下/ :/ Page6/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∪/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ =/ {/ Ci/ |/ Ci/ =/ CBF/ (/ S1/ )/ m/ ,/ k/ (/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ ∩/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ )/ i/ }/ =/ {/ Ci/ |/ Ci/ =/ CBF/ (/ S1/ )/ m/ ,/ kCBF/ (/ S1/ )/ m/ ,/ k/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∩/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ i/ }/ =/ {/ Ci/ |/ Ci/ =/ CBF/ (/ S2/ )/ m/ ,/ kmin/ (/ CBF/ (/ S1/ )/ m/ ,/ k/ 定义/ 8/ (/ 同源/ 计数/ 布鲁姆/ 过滤器/ 的/ 异或/ 运算/ )/ ./ 对于/ 两/ 同源/ 计数/ 布鲁姆/ 过滤器/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ 与/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ ,/ 其/ 异或/ 运算/ :/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ / 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ =/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∩/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ ∪/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∩/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ =/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ \/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ ∪/ (/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ \/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ )/ =/ {/ Ci/ |/ Ci/ =/ min/ (/ CBF/ (/ S1/ )/ m/ ,/ k/ (/ CBF/ (/ U/ )/ m/ ,/ k/ (/ CBF/ (/ U/ )/ m/ ,/ k4/ 计数/ 布鲁姆/ 过滤器/ 代数/ 运算/ 和/ 集合/ 运算/ 的/ 关系/ 定义/ 9/ (/ 同源/ 计数/ 布鲁姆/ 过滤器/ 的/ 大小/ 关系/ )/ ./ 两/ 同源/ 计数/ 布鲁姆/ 过滤器/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ 、/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ ,/ 若/ / i/ ∈/ {/ 1/ ,/ …/ ,/ m/ }/ ,/ 都/ 有/ CBF/ (/ S1/ )/ m/ ,/ k/ 则/ 称/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ 大于/ 等于/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ ,/ 记/ 为/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ / 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ ;/ 若/ / i/ ∈/ {/ 1/ ,/ …/ ,/ m/ }/ ,/ 都/ 有/ CBF/ (/ S1/ )/ m/ ,/ k/ 于/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ ,/ 记/ 为/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ / 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ ;/ 若/ / i/ ∈/ {/ 1/ ,/ …/ ,/ m/ }/ ,/ 都/ 有/ CBF/ (/ S1/ )/ m/ ,/ k/ 称/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ 等于/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ ,/ 记/ 为/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ =/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ ./ 定理/ 1/ ./ 对于/ 全/ 集中/ 的/ 任意/ 子集/ S1/ 、/ S2/ ,/ 其/ 同源/ 计数/ 布鲁姆/ 过滤器/ 表示/ 分别/ 为/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ 、/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ ,/ 若/ S1/ / S2/ ,/ 则/ 有/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ / 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ ./ 证明/ ./ 不失/ 一般性/ ,/ 假设/ (/ S1/ ∩/ S2/ )/ 中/ 元素/ 先/ 同时/ 插入/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ,/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 中/ ,/ 此时/ CBF/ (/ S1/ )/ m/ ,/ kCBF/ (/ S2/ )/ m/ ,/ k/ 插入/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 中/ ,/ 因/ S1/ / S2/ ,/ S2/ \/ S1/ 为空/ 或/ 不空/ ,/ 则/ CBF/ (/ S1/ )/ m/ ,/ k/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ / 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ ./ 定理/ 得证/ ./ 证毕/ ./ 4.1/ 计数/ 布鲁姆/ 过滤器/ 补/ 运算/ 与/ 补集/ 的/ 计数/ 布鲁姆/ 过滤器/ 表示/ 定理/ 2/ ./ 对于/ 全集/ U/ 中/ 的/ 任意/ 子集/ S/ 及补/ 集/ 珚/ S/ ,/ 犆/ 犅/ 犉/ (/ S/ )/ m/ ,/ k/ 、/ 犆/ 犅/ 犉/ (/ 珚/ S/ )/ m/ ,/ k/ 分别/ 为/ 它们/ 的/ 同源/ 计数/ 布鲁姆/ 过滤器/ 表示/ ,/ 则/ 犆/ 犅/ 犉/ (/ 珚/ S/ )/ m/ ,/ k/ =/ 犆/ 犅/ 犉/ (/ S/ )/ m/ ,/ k/ =/ {/ Ci/ |/ Ci/ =/ CBF/ (/ U/ )/ m/ ,/ k/ 证明/ ./ 由于/ 计数/ 布鲁姆/ 过滤器/ 支持/ 元素/ 的/ 删除/ 操作/ ,/ 因此/ 补/ 集/ 珚/ S/ 的/ 布鲁姆/ 过滤器/ 向量/ 可以/ 通过/ 如下/ 方法/ 得到/ :/ 先/ 将/ 全集/ U/ 中/ 元素/ 映射/ 到/ 计数/ 布鲁姆/ 过滤器/ ,/ 得/ 犆/ 犅/ 犉/ (/ U/ )/ m/ ,/ k/ ,/ 然后/ 从/ 犆/ 犅/ 犉/ (/ U/ )/ m/ ,/ k/ 中/ 逐个/ 删除/ S/ 中/ 元素/ ,/ 所得/ 计数/ 布鲁姆/ 过滤器/ 为/ 犆/ 犅/ 犉/ (/ 珚/ S/ )/ m/ ,/ k/ ,/ 即/ 犆/ 犅/ 犉/ (/ 珚/ S/ )/ m/ ,/ k/ =/ {/ Ci/ |/ Ci/ =/ CBF/ (/ U/ )/ m/ ,/ k/ 而/ 由/ 同源/ 计数/ 布鲁姆/ 过滤器/ 补/ 运算/ 的/ 定义/ :/ 犆/ 犅/ 犉/ (/ S/ )/ m/ ,/ k/ =/ {/ Ci/ |/ Ci/ =/ CBF/ (/ U/ )/ m/ ,/ k/ 综上/ ,/ 可/ 得/ 犆/ 犅/ 犉/ (/ 珚/ S/ )/ m/ ,/ k/ =/ 犆/ 犅/ 犉/ (/ S/ )/ m/ ,/ k/ =/ {/ Ci/ |/ Ci/ =/ CBF/ (/ U/ )/ m/ ,/ k/ 定理/ 得证/ ./ 定理/ 3/ ./ 对于/ 全集/ U/ 中/ 的/ 任意/ 子集/ S/ 及补/ 集/ 珚/ S/ ,/ 令/ 集合/ 规模/ |/ U/ |/ =/ u/ ,/ |/ S/ |/ =/ n0/ ,/ |/ 珚/ S/ |/ =/ u/ -/ n0/ ,/ 计数/ 布鲁姆/ 过滤器/ 补/ 运算/ 犆/ 犅/ 犉/ (/ S/ )/ m/ ,/ k/ 的/ 假/ 阳性/ 概率/ 与/ 犆/ 犅/ 犉/ (/ 珔/ S/ )/ m/ ,/ k/ 的/ 假/ 阳性/ 概率/ 相等/ ,/ 均/ 为/ (/ 1/ -/ e/ -/ k/ (/ u/ -/ n0/ )/ // m/ )/ k/ ./ 证明/ ./ 由于/ 补/ 集/ 珚/ S/ 的/ 计数/ 布鲁姆/ 过滤器/ 表示/ (/ 犆/ 犅/ 犉/ (/ 珚/ S/ )/ m/ ,/ k/ )/ 其假/ 阳性/ 概率/ :/ fp/ 犆/ 犅/ 犉/ m/ ,/ u/ -/ n0/ ,/ k/ =/ (/ 1/ -/ e/ -/ k/ (/ u/ -/ n0/ )/ // m/ )/ k/ ,/ 且/ 由/ 定理/ 2/ 知/ 犆/ 犅/ 犉/ (/ S/ )/ m/ ,/ k/ =/ 犆/ 犅/ 犉/ (/ 珚/ S/ )/ m/ ,/ k/ ./ 故/ 犆/ 犅/ 犉/ (/ S/ )/ m/ ,/ k/ 假/ 阳性/ 概率/ 也/ 等于/ (/ 1/ -/ e/ -/ k/ (/ u/ -/ n0/ )/ // m/ )/ k/ ./ Page7/ 定理/ 得证/ ./ 4.2/ 计数/ 布鲁姆/ 过滤器/ 交/ 运算/ 与/ 交集/ 的/ 计数/ 布鲁姆/ 过滤器/ 表示/ 定理/ 4/ ./ 对于/ 全集/ U/ 中/ 的/ 任意/ 子集/ S1/ 、/ S2/ ,/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ 、/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 分别/ 为/ 它们/ 的/ 同源/ 计数/ 布鲁姆/ 过滤器/ 表示/ ,/ 则/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∩/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ / 犆/ 犅/ 犉/ (/ S1/ ∩/ S2/ )/ m/ ,/ k/ ./ 证明/ ./ 同源/ 计数/ 布鲁姆/ 过滤器/ 交/ 运算/ 与/ 交集/ 的/ 计数/ 布鲁姆/ 过滤器/ 的/ 关系/ :/ 设/ CBF/ (/ S1/ ∩/ S2/ )/ m/ ,/ k/ 理/ 1/ 有/ CBF/ (/ S1/ )/ m/ ,/ ki/ / m/ )/ ,/ min/ (/ CBF/ (/ S1/ )/ m/ ,/ k/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∩/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ i/ / c/ / 若/ CBF/ (/ S1/ ∩/ S2/ )/ m/ ,/ ki/ =/ c/ ,/ 则/ 必有/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∩/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ i/ / c/ ,/ 1/ / i/ / m/ ./ 即/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∩/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ / 犆/ 犅/ 犉/ (/ S1/ ∩/ S2/ )/ m/ ,/ k/ ./ 定理/ 得证/ ./ 定理/ 5/ ./ 对于/ 全集/ U/ 中/ 的/ 任意/ 子集/ S1/ 、/ S2/ ,/ 令/ 集合/ 规模/ |/ S1/ |/ =/ n1/ ,/ |/ S2/ |/ =/ n2/ ,/ |/ S1/ ∩/ S2/ |/ =/ n3/ ,/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ 、/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 分别/ 为/ S1/ 、/ S2/ 的/ 同源/ 计数/ 布鲁姆/ 过滤器/ 表示/ ,/ 则/ 两/ 过滤器/ 交/ 运算/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∩/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 假/ 阳性/ 概率/ 等于/ (/ 1/ -/ e/ -/ kn1/ // m/ -/ e/ -/ kn2/ // m/ +/ e/ -/ k/ (/ n1/ +/ n2/ -/ n3/ )/ // m/ )/ k/ ./ 证明/ ./ 同源/ 计数/ 布鲁姆/ 过滤器/ 交/ 运算/ 后/ 其值/ (/ 1/ )/ / x/ ∈/ S1/ ∩/ S2/ ,/ 则/ / j/ (/ 1/ / j/ / k/ )/ ,/ CBF/ (/ S1/ )/ m/ ,/ k/ 分析/ 如下/ :/ 且/ CBF/ (/ S2/ )/ m/ ,/ kCBF/ (/ S2/ )/ m/ ,/ k/ / 1/ / / x/ ∈/ S1/ ∩/ S2/ ,/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∩/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ hj/ (/ x/ )/ / 1/ ,/ 1/ / j/ / k/ ./ (/ 2/ )/ 若/ x/ ∈/ S1/ \/ (/ S1/ ∩/ S2/ )/ ,/ y/ ∈/ S2/ \/ (/ S1/ ∩/ S2/ )/ ,/ 存在/ j/ (/ 1/ / j/ / k/ )/ 和/ j/ (/ 1/ / j/ / k/ )/ ,/ hj/ (/ x/ )/ =/ hj/ (/ y/ )/ =/ i/ ,/ 使/ CBF/ (/ S1/ )/ m/ ,/ kCBF/ (/ S2/ )/ m/ ,/ ki/ =/ hj/ (/ x/ )/ =/ hj/ (/ y/ )/ ./ …/ ,/ m/ ./ 0/ 的/ 概率/ p/ 等于/ :/ (/ 3/ )/ 其它/ ,/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∩/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ i/ =/ 0/ ,/ i/ =/ 1/ ,/ 由/ 以上/ 分析/ 可知/ ,/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∩/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ i/ 非/ 1/ -/ 1/ -/ 1/ (/ )/ m/ (/ 1/ -/ 1/ -/ 1/ (/ )/ m/ (/ e/ -/ k/ (/ n1/ +/ n2/ -/ n3/ )/ // m/ ./ 故交/ 运算/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∩/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 的/ 假/ 阳性/ 概率/ 为/ m/ ,/ n3/ ,/ k/ =/ pk/ =/ (/ 1/ -/ e/ -/ kn1/ // m/ -/ e/ -/ kn2/ // m/ +/ e/ -/ k/ (/ n1/ +/ n2/ -/ n3/ )/ // m/ )/ k/ ./ fp/ 犆/ 犅/ 犉/ ∩/ 定理/ 得证/ ./ 交集/ 的/ 计数/ 布鲁姆/ 过滤器/ 中/ ,/ 第/ i/ 个/ 计数器/ (/ CBF/ (/ S1/ ∩/ S2/ )/ m/ ,/ k/ 为/ p1/ ,/ 由交/ 运算/ 取值/ 分析/ ,/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∩/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ i/ 非/ 0/ 的/ 概率/ p/ 为/ 1/ -/ 1/ -/ 1/ (/ )/ m/ (/ 1/ -/ 1/ -/ 1/ (/ )/ m/ (/ 证明/ ./ 若/ CBF/ (/ S1/ \/ S2/ )/ m/ ,/ k/ 从而/ 有/ pk/ / pk/ 性/ 概率/ 大于/ 等于/ 犆/ 犅/ 犉/ (/ S1/ ∩/ S2/ )/ m/ ,/ k/ 假/ 阳性/ 概率/ ./ 4.3/ 计数/ 布鲁姆/ 过滤器/ 减/ 运算/ 与/ 差集/ 的/ 计数/ 布鲁姆/ 过滤器/ 表示/ 定理/ 6/ ./ 对于/ 全集/ U/ 中/ 的/ 任意/ 子集/ S1/ 、/ S2/ ,/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ 、/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 分别/ 为/ 它们/ 的/ 同源/ 计数/ 布鲁姆/ 过滤器/ 表示/ ,/ 则/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ \/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ / 犆/ 犅/ 犉/ (/ S1/ \/ S2/ )/ m/ ,/ k/ ./ (/ S1/ \/ S2/ )/ / S1/ ,/ (/ S1/ \/ S2/ )/ / 珚/ S2/ ,/ 则/ 据/ 定理/ 1/ 有/ CBF/ (/ S1/ )/ m/ ,/ kmin/ (/ CBF/ (/ S1/ )/ m/ ,/ kc/ ,/ 1/ / i/ / m/ ,/ 即/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ \/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ i/ / c/ / 若/ CBF/ (/ S1/ \/ S2/ )/ m/ ,/ k/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ i/ / c/ ,/ 1/ / i/ / m/ ./ 因此/ ,/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ \/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ / 犆/ 犅/ 犉/ (/ S1/ \/ S2/ )/ m/ ,/ k/ ./ 定理/ 得证/ ./ 定理/ 7/ ./ 对于/ 全集/ U/ 中/ 的/ 任意/ 子集/ S1/ 、/ S2/ ,/ 令/ 集合/ 规模/ |/ U/ |/ =/ u/ ,/ |/ S1/ |/ =/ n1/ ,/ |/ S2/ |/ =/ n2/ ,/ |/ S1/ ∩/ S2/ |/ =/ n3/ ,/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ 、/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 分别/ 为/ S1/ 、/ S2/ 的/ 同源/ 计数/ 布鲁姆/ 过滤器/ 表示/ ,/ 则/ 两/ 过滤器/ 减/ 运算/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ \/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ 假/ 阳性/ 概率/ 为/ fp/ 犆/ 犅/ 犉/ \/ m/ ,/ n1/ -/ n3/ ,/ k/ =/ (/ 1/ -/ e/ -/ kn1/ // m/ -/ e/ -/ k/ (/ u/ -/ n2/ )/ // m/ +/ e/ -/ k/ (/ u/ -/ n2/ +/ n3/ )/ // m/ )/ k/ ./ 证明/ ./ 同源/ 计数/ 布鲁姆/ 过滤器/ 减/ 运算/ 取值/ 情况/ 分析/ :/ (/ 1/ )/ / x/ ∈/ S1/ \/ S2/ ,/ 则/ / j/ (/ 1/ / j/ / k/ )/ ,/ CBF/ (/ S1/ )/ m/ ,/ k1/ ;/ 且/ x/ ∈/ S1/ \/ S2/ →/ x/ ∈/ U/ ∩/ x/ / S2/ →/ (/ CBF/ (/ U/ )/ m/ ,/ kCBF/ (/ S2/ )/ m/ ,/ k/ (/ CBF/ (/ U/ )/ m/ ,/ k/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ \/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ hj/ (/ x/ )/ / 1/ / / x/ ∈/ S1/ \/ S2/ ,/ 有/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ \/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ hj/ (/ x/ )/ / 1/ ,/ 1/ / j/ / k/ ./ (/ 2/ )/ 当/ x/ ∈/ S1/ ∩/ S2/ ,/ y/ ∈/ 珚/ S1/ ∩/ 珚/ S2/ ,/ 存在/ j/ (/ 1/ / j/ / k/ )/ 和/ Page8j/ (/ 1/ / j/ / k/ )/ ,/ hj/ (/ x/ )/ =/ hj/ (/ y/ )/ =/ i/ ,/ 使/ CBF/ (/ S1/ )/ m/ ,/ kCBF/ (/ 珔/ S2/ )/ m/ ,/ kCBF/ (/ S2/ )/ m/ ,/ ki/ =/ hj/ (/ x/ )/ =/ hj/ (/ y/ )/ ./ [/ 1/ ,/ m/ ]/ ./ (/ 3/ )/ 其它/ ,/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ \/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ i/ =/ 0/ ,/ i/ ∈/ 综上/ ,/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ \/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ i/ 非/ 0/ 的/ 概率/ :/ p/ =/ 1/ -/ 1/ -/ 1/ (/ )/ m1/ -/ 1/ -/ 1/ (/ )/ m/ (/ e/ -/ kn1/ // m/ -/ e/ -/ k/ (/ u/ -/ n2/ )/ // m/ +/ e/ -/ k/ (/ u/ -/ n2/ +/ n3/ )/ // m/ ,/ 故/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ \/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 的/ 假/ 阳性/ 概率/ 为/ fp/ 犆/ 犅/ 犉/ \/ m/ ,/ n1/ -/ n3/ ,/ k/ =/ pk/ =/ (/ 1/ -/ e/ -/ kn1/ // m/ -/ e/ -/ k/ (/ u/ -/ n2/ )/ // m/ +/ e/ -/ k/ (/ u/ -/ n2/ +/ n3/ )/ // m/ )/ k/ ./ 差集/ 的/ 计数/ 布鲁姆/ 过滤器/ 中/ ,/ 第/ i/ 个/ 计数器/ 定理/ 得证/ ./ (/ CBF/ (/ S1/ \/ S2/ )/ m/ ,/ k/ 设为/ p1/ ,/ 而/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ \/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ i/ 非/ 0/ 的/ 概率/ p/ 为/ 1/ -/ 1/ -/ 1/ (/ )/ m1/ -/ 1/ -/ 1/ (/ )/ m/ (/ p1/ ,/ 从而/ pk/ / p1k/ ,/ 即/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ \/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ 的/ 假/ 阳性/ 概率/ 大于/ 等于/ (/ 犆/ 犅/ 犉/ (/ S1/ \/ S2/ )/ m/ ,/ k/ )/ 假/ 阳性/ 概率/ ./ 4.4/ 计数/ 布鲁姆/ 过滤器/ 并/ 运算/ 与/ 并/ 集/ 的/ 计数/ 布鲁姆/ 过滤器/ 表示/ 定理/ 8/ ./ 对于/ 全/ 集中/ 的/ 任意/ 子集/ S1/ 、/ S2/ ,/ 其/ 同源/ 计数/ 布鲁姆/ 过滤器/ 表示/ 分别/ 为/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ 、/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ ,/ 若/ S1/ ∩/ S2/ =/ / ,/ 则/ 有/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∪/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ =/ 犆/ 犅/ 犉/ (/ S1/ ∪/ S2/ )/ m/ ,/ k/ =/ {/ Ci/ |/ Ci/ =/ CBF/ (/ S1/ )/ m/ ,/ k/ 证明/ ./ 步/ 1/ ,/ 计算/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∪/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ ./ 由/ 同源/ 计数/ 布鲁姆/ 过滤器/ 并/ 运算/ 的/ 定义/ 得/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∪/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ =/ {/ Ci/ |/ Ci/ =/ CBF/ (/ S1/ )/ m/ ,/ kmin/ (/ CBF/ (/ S2/ )/ m/ ,/ ki/ =/ 1/ ,/ …/ ,/ m/ }/ 已知/ S1/ ∩/ S2/ =/ / ,/ 得/ S2/ / 珚/ S1/ ,/ 由/ 定理/ 1/ 及/ 定理/ 2/ 得/ CBF/ (/ S2/ )/ m/ ,/ k/ 数/ 布鲁姆/ 过滤器/ 补/ 运算/ 的/ 定义/ ,/ 得/ CBF/ (/ S2/ )/ m/ ,/ k/ 综合/ 式/ (/ 1/ )/ 、/ (/ 2/ )/ ,/ 得/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∪/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ =/ {/ Ci/ |/ Ci/ =/ CBF/ (/ S1/ )/ m/ ,/ k/ 步/ 2/ ,/ 计算/ 犆/ 犅/ 犉/ (/ S1/ ∪/ S2/ )/ m/ ,/ k/ ./ 因/ S1/ ∩/ S2/ =/ / ,/ 故/ 并/ 集/ 的/ 布鲁姆/ 过滤器/ 向量/ 可/ 先后/ 将/ S1/ 、/ S2/ 中/ 元素/ 插入/ 同一个/ 布鲁姆/ 过滤器/ 以/ 通过/ 如下/ 方法/ 得到/ :/ 中/ ./ 即/ 有/ 犆/ 犅/ 犉/ (/ S1/ ∪/ S2/ )/ m/ ,/ k/ =/ {/ Ci/ |/ Ci/ =/ CBF/ (/ S1/ )/ m/ ,/ k/ 由式/ (/ 3/ )/ 、/ (/ 4/ )/ 得/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∪/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ =/ 犆/ 犅/ 犉/ (/ S1/ ∪/ S2/ )/ m/ ,/ k/ =/ {/ Ci/ |/ Ci/ =/ CBF/ (/ S1/ )/ m/ ,/ k/ 定理/ 得证/ ./ 定理/ 9/ ./ 对于/ 全集/ U/ 中/ 的/ 任意/ 子集/ S1/ 、/ S2/ ,/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ 、/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 分别/ 为/ 它们/ 的/ 同源/ 计数/ 布鲁姆/ 过滤器/ 表示/ ,/ 则/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∪/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ / 犆/ 犅/ 犉/ (/ S1/ ∪/ S2/ )/ m/ ,/ k/ ./ 证明/ ./ 由/ 同源/ 计数/ 布鲁姆/ 过滤器/ 并/ 运算/ 的/ 定义/ ,/ 有/ / i/ ∈/ [/ 1/ ,/ m/ ]/ ,/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∪/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ i/ =/ CBF/ (/ S1/ )/ m/ ,/ kCBF/ (/ S1/ )/ m/ ,/ kmin/ (/ CBF/ (/ S2/ )/ m/ ,/ kCBF/ (/ S2/ ∩/ 珚/ S1/ )/ m/ ,/ k/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ i/ / CBF/ (/ S1/ )/ m/ ,/ k/ 因/ S1/ ∩/ (/ S2/ ∩/ 珚/ S1/ )/ =/ / ,/ 由/ 定理/ 8/ 得/ CBF/ (/ S1/ )/ m/ ,/ kCBF/ (/ S1/ ∪/ (/ S2/ ∩/ 珔/ S1/ )/ )/ m/ ,/ k/ 定理/ 得证/ ./ 定理/ 10/ ./ 对于/ 全/ 集中/ 的/ 任意/ 子集/ S1/ 、/ S2/ 以及/ 它们/ 的/ 并/ 集/ S1/ ∪/ S2/ ,/ 其/ 同源/ 计数/ 布鲁姆/ 过滤器/ 表示/ 分别/ 为/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ 、/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 、/ 犆/ 犅/ 犉/ (/ S1/ ∪/ S2/ )/ m/ ,/ k/ ,/ 令/ 集合/ 规模/ |/ S1/ |/ =/ n1/ ,/ |/ S2/ |/ =/ n2/ ,/ |/ S1/ ∩/ S2/ |/ =/ n3/ ,/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∪/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 与/ 犆/ 犅/ 犉/ (/ S1/ ∪/ S2/ )/ m/ ,/ k/ 的/ 假/ 阳性/ 概率/ 相同/ 证明/ ./ 对于/ 两/ 计数/ 布鲁姆/ 过滤器/ ,/ 如果/ 其/ 计数器/ 向量/ 中非/ 0/ 计数器/ 的/ 位置/ 一一对应/ ,/ 则/ 其假/ 阳性/ 概率/ 相同/ ./ (/ 1/ )/ / x/ ∈/ S1/ 或者/ x/ ∈/ S2/ →/ CBF/ (/ S1/ )/ m/ ,/ kCBF/ (/ S2/ )/ m/ ,/ k/ ∪/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ hj/ (/ x/ )/ / 1/ ,/ j/ =/ 1/ ,/ …/ ,/ k/ ;/ 又/ / x/ ∈/ S1/ 或者/ x/ ∈/ Page9/ (/ 2/ )/ / x/ ∈/ S1/ ∪/ S2/ →/ CBF/ (/ S1/ ∪/ S2/ )/ m/ ,/ kS2/ →/ x/ ∈/ S1/ ∪/ S2/ →/ CBF/ (/ S1/ ∪/ S2/ )/ m/ ,/ khj/ (/ x/ )/ / 1/ ,/ j/ =/ 1/ ,/ …/ ,/ k/ ,/ 从而/ 有/ / x/ ∈/ S1/ 或/ x/ ∈/ S2/ ,/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∪/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ hj/ (/ x/ )/ / 1/ / CBF/ (/ S1/ ∪/ S2/ )/ m/ ,/ k1/ ,/ …/ ,/ k/ ;/ 又/ / x/ ∈/ S1/ ∪/ S2/ →/ / x/ ∈/ S1or/ / x/ ∈/ S2/ →/ CBF/ (/ S1/ )/ m/ ,/ k/ 定义/ 7/ 可得/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∪/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ hj/ (/ x/ )/ / 1/ ./ 从而/ 有/ / x/ ∈/ S1/ ∪/ S2/ ,/ CBF/ (/ S1/ ∪/ S2/ )/ m/ ,/ k/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ hj/ (/ x/ )/ / 1/ ./ 由/ (/ 1/ )/ 、/ (/ 2/ )/ 可知/ :/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∪/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 与/ 犆/ 犅/ 犉/ (/ S1/ ∪/ S2/ )/ m/ ,/ k/ 非/ 0/ 计数器/ 的/ 位置/ 一一对应/ ,/ 从而/ 其假/ 阳性/ 概率/ 相同/ ./ 而/ 犆/ 犅/ 犉/ (/ S1/ ∪/ S2/ )/ m/ ,/ k/ 的/ 假/ 阳性/ 概率/ 为/ (/ 1/ -/ e/ -/ k/ (/ n1/ +/ n2/ -/ n3/ )/ // m/ )/ k/ ,/ 从而/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∪/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 的/ 假/ 阳性/ 概率/ 也/ 为/ (/ 1/ -/ e/ -/ k/ (/ n1/ +/ n2/ -/ n3/ )/ // m/ )/ k/ ./ 定理/ 得证/ ./ 4.5/ 计数/ 布鲁姆/ 过滤器/ 异或/ 运算/ 与/ 对称/ 差/ 的/ 计数/ 布鲁姆/ 过滤器/ 表示/ 定理/ 11/ ./ 对于/ 全集/ U/ 中/ 的/ 任意/ 子集/ S1/ 、/ S2/ ,/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ 、/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 分别/ 为/ 它们/ 的/ 同源/ 计数/ 布鲁姆/ 过滤器/ 表示/ ,/ 则/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ / 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ / 犆/ 犅/ 犉/ (/ S1/ / S2/ )/ m/ ,/ k/ ./ 证明/ ./ 同源/ 计数/ 布鲁姆/ 过滤器/ 异或/ 运算/ 与/ 对称/ 差/ 的/ 计数/ 布鲁姆/ 过滤器/ 的/ 关系/ 如下/ :/ 设/ CBF/ (/ S1/ / S2/ )/ m/ ,/ k/ (/ CBF/ (/ S1/ \/ S2/ )/ m/ ,/ k/ →/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ / 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ i/ =/ (/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ \/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ ∪/ =/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ \/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ i/ +/ / CBF/ (/ S1/ \/ S2/ )/ m/ ,/ k/ / (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ / 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ / 犆/ 犅/ 犉/ (/ S1/ / S2/ )/ m/ ,/ k/ ./ 定理/ 12/ ./ 对于/ 全/ 集中/ 的/ 任意/ 子集/ S1/ 、/ S2/ ,/ 其/ 同源/ 计数/ 布鲁姆/ 过滤器/ 表示/ 分别/ 为/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ,/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ ,/ 则/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ / 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 的/ 假/ 阳性/ 概率/ fp/ 犆/ 犅/ 犉/ / m/ ,/ n1/ +/ n2/ -/ 2n3/ ,/ k/ =/ (/ 1/ -/ e/ -/ k/ (/ n1/ +/ n2/ -/ n3/ )/ // m/ -/ e/ -/ k/ (/ u/ -/ n3/ )/ // m/ +/ e/ -/ ku/ // m/ )/ k/ ./ 证明/ ./ 同源/ 计数/ 布鲁姆/ 过滤器/ 异或/ 运算/ 后任/ (/ 1/ )/ / x/ ∈/ S1/ / S2/ ,/ 则/ CBF/ (/ S1/ / S2/ )/ m/ ,/ k/ 意/ 计数器/ 可能/ 取值/ 分析/ 如下/ :/ 1/ / j/ / k/ ;/ / x/ ∈/ S1/ / S2/ →/ x/ ∈/ S1/ \/ S2/ 或/ x/ ∈/ S2/ \/ S1/ →/ CBF/ (/ S1/ \/ S2/ )/ m/ ,/ k1/ ,/ …/ ,/ k/ ,/ 由/ 定理/ 8/ 可得/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ / 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ hj/ (/ x/ )/ =/ (/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ \/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ ∪/ (/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ \/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ )/ )/ hj/ (/ x/ )/ =/ min/ (/ CBF/ (/ S1/ )/ m/ ,/ kmin/ (/ CBF/ (/ S2/ )/ m/ ,/ k/ / CBF/ (/ S1/ \/ S2/ )/ m/ ,/ kj/ =/ 1/ ,/ …/ ,/ k/ ./ / / x/ ∈/ S1/ / S2/ ,/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ / 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ hj/ (/ x/ )/ / 1/ ,/ 1/ / j/ / k/ ./ (/ 2/ )/ 当/ x/ ∈/ S1/ ∩/ S2/ ,/ y/ ∈/ 珚/ S1/ ∩/ 珚/ S2/ ,/ 存在/ j/ (/ 1/ / j/ / k/ )/ 和/ j/ (/ 1/ / j/ / k/ )/ ,/ hj/ (/ x/ )/ =/ hj/ (/ y/ )/ =/ i/ ,/ 使得/ min/ (/ CBF/ (/ S1/ )/ m/ ,/ k/ 或/ min/ (/ CBF/ (/ S2/ )/ m/ ,/ k/ (/ S1/ )/ m/ ,/ k1/ ,/ …/ ,/ m/ ./ hj/ (/ y/ )/ )/ )/ / 1/ ,/ 即/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ / 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ i/ / 1/ ./ (/ 3/ )/ 其它/ ,/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ / 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ i/ =/ 0/ ,/ i/ =/ 由/ 以上/ 分析/ 可/ 得/ ,/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ / 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ i/ =/ 1/ -/ e/ -/ k/ (/ n1/ +/ n2/ -/ n3/ )/ // m/ -/ e/ -/ k/ (/ u/ -/ n3/ )/ // m/ +/ e/ -/ ku/ // m/ ./ 故/ 异或/ 运算/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ / 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 的/ 查询/ 假/ 阳性/ 概率/ 为/ (/ 1/ -/ e/ -/ k/ (/ n1/ +/ n2/ -/ n3/ )/ // m/ -/ e/ -/ k/ (/ u/ -/ n3/ )/ // m/ +/ e/ -/ ku/ // m/ )/ k/ ./ 定理/ 得证/ ./ 分析/ 可知/ :/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ / 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ i/ 非/ 0/ 的/ 概率/ p/ / p1/ ,/ 从而/ pk/ / pk/ 假/ 阳性/ 概率/ 大于/ 等于/ 犆/ 犅/ 犉/ (/ S1/ / S2/ )/ m/ ,/ k/ 的/ 假/ 阳性/ 概率/ ./ 定理/ 13/ ./ 对于/ 全/ 集中/ 的/ 任意/ 子集/ S1/ 、/ S2/ ,/ 其/ 同源/ 计数/ 布鲁姆/ 过滤器/ 表示/ 分别/ 为/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ,/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ ,/ 则/ 同源/ 计数/ 布鲁姆/ 过滤器/ 进行/ 补/ 、/ 交/ 、/ 减/ 、/ 并/ 及/ 异或/ 运算/ 后/ ,/ 分别/ 支持/ 补集/ 、/ 交集/ 、/ 差集/ 、/ 并/ 集及/ 对称/ 差/ 集合/ 元素/ 的/ 删除/ 操作/ ,/ 假/ 阴性/ 概率/ 均/ 等于/ 0/ ./ 证明/ ./ 为/ 便于/ 叙述/ ,/ 计数/ 布鲁姆/ 过滤器/ 代数/ 运算/ 用/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ kX/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ (/ X/ ∈/ {/ ∪/ ,/ ∩/ ,/ \/ ,/ / }/ )/ 表示/ ,/ 其中/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ =/ 犆/ 犅/ 犉/ (/ U/ )/ m/ ,/ k/ \/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ ;/ 集合/ 代数/ 运算/ 后/ 的/ 计数/ 布鲁姆/ 过滤器/ 用/ 犆/ 犅/ 犉/ (/ S1XS2/ )/ m/ ,/ k/ (/ X/ ∈/ {/ ∪/ ,/ ∩/ ,/ \/ ,/ / }/ )/ 表示/ ,/ 其中/ 补集/ 的/ 计数/ 布鲁姆/ 非/ 0/ 的/ 概率/ 为/ p/ =/ 1/ -/ 1/ -/ 1/ (/ )/ m/ (/ 1/ -/ 1/ -/ 1/ (/ )/ m/ (/ CBF/ (/ S1/ / S2/ )/ m/ ,/ k1/ -/ 1/ (/ )/ mPage10/ (/ 1/ )/ 计数/ 布鲁姆/ 过滤器/ 补/ 运算/ :/ 由/ 定理/ 2/ ,/ 知/ 犆/ 犅/ 犉/ (/ S/ )/ m/ ,/ k/ =/ 犆/ 犅/ 犉/ (/ 珚/ S/ )/ m/ ,/ k/ ,/ 而/ 犆/ 犅/ 犉/ (/ 珚/ S/ )/ m/ ,/ k/ 不/ 存在/ 假/ 阴性/ ,/ 且/ 能/ 支持/ 补/ 集/ 珚/ S/ 元素/ 的/ 删除/ 操作/ ,/ 故/ 犆/ 犅/ 犉/ (/ S/ )/ m/ ,/ k/ 假/ 阴性/ 概率/ 等于/ 0/ ,/ 亦/ 能/ 支持/ 补/ 集/ 珚/ S/ 元素/ 的/ 删除/ 操作/ ./ (/ 2/ )/ 计数/ 布鲁姆/ 过滤器/ 交/ 、/ 减/ 、/ 并/ 、/ 异或/ 运算/ :/ 计数/ 布鲁姆/ 过滤器/ 只有/ 在/ 删除/ 元素/ 时/ 计数器/ 本该/ 非/ 0/ 而/ 不/ 正确/ 地置/ 为/ 0/ 才/ 会/ 出现/ 假/ 阴性/ ,/ 由/ 定理/ 4/ 、/ 定理/ 6/ 、/ 定理/ 9/ 、/ 定理/ 11/ 知/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ kX/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ / 犆/ 犅/ 犉/ (/ S1XS2/ )/ m/ ,/ k/ (/ X/ ∈/ {/ ∪/ ,/ ∩/ ,/ \/ ,/ / }/ )/ ,/ 从而/ 在/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ kX/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 上/ 可/ 完成/ 集合/ (/ S1XS2/ )/ 中/ 元素/ 的/ 删除/ 操作/ ,/ 且/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ kX/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 的/ 假/ 阴性/ 小于/ 等于/ 犆/ 犅/ 犉/ (/ S1XS2/ )/ m/ ,/ k/ ,/ 又/ 犆/ 犅/ 犉/ (/ S1XS2/ )/ m/ ,/ k/ 假/ 阴性/ 概率/ 等于/ 0/ ,/ 则/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ kX/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 假/ 阴性/ 概率/ 只能/ 等于/ 0/ ./ 综上/ ,/ 同源/ 计数/ 布鲁姆/ 过滤器/ 进行/ 补/ 、/ 交/ 、/ 减/ 、/ 并/ 及/ 异或/ 运算/ 后/ ,/ 分别/ 支持/ 补集/ 、/ 交集/ 、/ 差集/ 、/ 并/ 集及/ 对称/ 差/ 集合/ 元素/ 的/ 删除/ 操作/ ,/ 假/ 阴性/ 概率/ 均/ 等于/ 0/ ./ 定理/ 得证/ ./ 5/ 性能/ 分析/ 与/ 模拟实验/ 5.1/ 计数/ 布鲁姆/ 过滤器/ 代数/ 运算/ 与/ 集合/ 代数/ 运算/ 的/ 一致性/ 首先/ 进行/ 仿真/ 实验/ 验证/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ kX/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 与/ 犆/ 犅/ 犉/ (/ S1XS2/ )/ m/ ,/ k/ 之间/ 的/ 一致性/ ./ 实验/ 中/ 采用/ 英文单词/ 或/ 词组/ 作/ 集合/ 的/ 数据/ 元素/ ,/ 并/ 随机/ 产生/ ./ 全集/ 规模/ u/ 等于/ 12000/ ./ 由/ 全集/ 再/ 随机/ 产生/ 子集/ S1/ 、/ S2/ 和表/ 1/ 计数/ 布鲁姆/ 过滤器/ 查询/ 假/ 阳性/ 实测值/ 与/ 期望值/ fp/ // %/ mk/ 犆/ 犅/ 犉/ (/ S1/ )/ 犆/ 犅/ 犉/ (/ S2/ )/ 犆/ 犅/ 犉/ (/ 珚/ S2/ )/ 犆/ 犅/ 犉/ (/ S2/ )/ 犆/ 犅/ 犉/ (/ S/ ∩/ )/ 犆/ 犅/ 犉/ ∩/ 犆/ 犅/ 犉/ (/ S/ \/ )/ 犆/ 犅/ 犉/ \/ 犆/ 犅/ 犉/ (/ S/ ∪/ )/ 犆/ 犅/ 犉/ ∪/ 犆/ 犅/ 犉/ (/ S/ / )/ 犆/ 犅/ 犉/ / 实测值/ 3276847.26727/ ./ 30007.29837/ ./ 29830.22971/ ./ 23602.26952/ ./ 997524.66724/ ./ 66715.17516/ ./ 936/ 期望值/ 3276847.27007/ ./ 27007.27007/ ./ 27000.22021/ ./ 23762.22732/ ./ 969524.70024/ ./ 70015.10316/ ./ 890/ 实测值/ 3276868.87558/ ./ 82308.78238/ ./ 78230.08381/ ./ 46371.96533/ ./ 247235.16535/ ./ 16520.79124/ ./ 514/ 期望值/ 3276868.77978/ ./ 77978.77978/ ./ 77970.08311/ ./ 44611.96023/ ./ 234435.06935/ ./ 06920.66224/ ./ 423/ 实测值/ 6553640.88920/ ./ 87850.87450/ ./ 87450.01670/ ./ 05720.22180/ ./ 26774.38134/ ./ 38132.23202/ ./ 4233/ 期望值/ 6553640.88420/ ./ 88420.88420/ ./ 88420.01740/ ./ 05990.22020/ ./ 26544.35574/ ./ 35572.22732/ ./ 4202/ 实测值/ 6553660.56520/ ./ 56620.57620/ ./ 57620.00120/ ./ 02050.08800/ ./ 12074.66784/ ./ 66781.95352/ ./ 2793/ 期望值/ 6553660.57010/ ./ 57010.57010/ ./ 57010.00220/ ./ 02200.08310/ ./ 12024.65144/ ./ 65141.96022/ ./ 2855/ 实测值/ 13107240.08370/ ./ 08220.07400/ ./ 07400.00130/ ./ 00300.01630/ ./ 01780.48700/ ./ 48700.22080/ ./ 2328/ 期望值/ 13107240.07840/ ./ 07840.07840/ ./ 07840.00120/ ./ 00260.01740/ ./ 01940.47850/ ./ 47850.22020/ ./ 2316/ 实测值/ 13107260.02350/ ./ 01870.02100/ ./ 02105.00/ e/ -/ 50.00020/ ./ 00370.00400/ ./ 25520.25520/ ./ 08570.0958/ 期望值/ 13107260.01920/ ./ 01920.01920/ ./ 01924.48/ e/ -/ 50.00020/ ./ 00220.00280/ ./ 24560.24560/ ./ 08310.0922/ (/ 2/ )/ 所有/ fp/ 实测值/ 均/ 与/ 计算/ 得到/ 的/ 期望值/ 相吻/ 由表/ 1/ 可以/ 看出/ :/ 合/ ,/ 验证/ 了/ 定理/ 3/ 、/ 定理/ 5/ 、/ 定理/ 7/ 、/ 定理/ 10/ 和/ 定理/ 12/ ./ 测值/ 相等/ ,/ 结果/ 与/ 定理/ 2/ 一致/ ./ (/ 3/ )/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∩/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 假/ 阳性/ 值/ 大于/ (/ 1/ )/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 与/ 犆/ 犅/ 犉/ (/ 珚/ S2/ )/ m/ ,/ k/ 的/ 查询/ 假/ 阳性/ 实/ S1/ ∩/ S2/ ,/ 两/ 子集/ 规模/ 均/ 为/ 6000/ ,/ 交集/ S1/ ∩/ S2/ 的/ 规模/ 为/ 2000/ ./ CBF/ 计数器/ 位数/ r/ =/ 4/ ./ 因为/ BF/ 或/ CBF/ 经常/ 使用/ 硬件/ 实现/ ,/ 为/ 便于/ 布鲁姆/ 过滤器/ 的/ 硬件/ 实现/ ,/ 向量/ 大小/ m/ 以/ 取值/ 2x/ 为宜/ ,/ 实验/ 中/ 我们/ 取/ m/ =/ {/ 32768/ ,/ 65536/ ,/ 131072/ }/ ./ Hash/ 地址/ 个数/ k/ =/ {/ 4/ ,/ 6/ }/ ,/ k/ 值/ 取得/ 不/ 大/ ,/ 是/ 为了/ 减少/ Hash/ 函数/ 的/ 计算/ 工作量/ ./ 根据上述/ 设置/ ,/ 单个/ CBF/ 假/ 阳性/ 值/ 在/ 0.01/ %/ ~/ 10/ %/ 之间/ 变化/ ./ 采用/ 目前/ 应用/ 最/ 广泛/ 的/ Hash/ 算法/ SHA1/ 算法/ [/ 17/ ]/ 作为/ Hash/ 函数/ ,/ 将/ SHA1Hash/ 函数/ 产生/ 的/ 160/ 位/ 消息/ 摘要/ 作为/ 布鲁姆/ 过滤器/ 的/ Hash/ 地址/ ,/ 其/ 具体/ 作法/ 如下/ :/ 首先/ 计算/ 单个/ Hash/ 地址/ 所/ 必需/ 的/ 消息/ 摘要/ 位数/ AA/ =/ log2m/ ,/ m/ (/ 160/ =/ T/ >/ 1/ ,/ 即/ 一次/ SHA1/ 算法/ 产生/ 的/ 160/ 位/ 消息/ 摘要/ 位串/ 不够/ k/ 个/ Hash/ 地址/ 所/ 需/ 的/ 位串/ 时/ ,/ 则/ 将/ 集合/ 中/ 各/ 字符串/ 拼接/ q/ 次/ (/ q/ 依次/ 取/ 1/ ,/ 2/ ,/ …/ ,/ T/ )/ 作为/ SHA1Hash/ 函数/ 的/ 输入/ 串/ 进行/ Hash/ ,/ 得到/ T/ ×/ 160/ 位/ 消息/ 摘要/ 位串/ ,/ 多于/ A/ ×/ k/ 位/ 的/ 消息/ 摘要/ 位串/ 则/ 丢弃/ 不要/ ./ 根据/ 前述/ 实验/ 设置/ ,/ 仅/ 需/ 调用/ 一次/ SHA1/ 算法/ 即可/ 产生/ 元素/ 相应/ 的/ k/ 个/ Hash/ 地址/ ./ 表/ 1/ 中/ ,/ fp/ 期望值/ 直接/ 通过/ 本文/ 假/ 阳性/ 概率/ 公式/ 计算/ 而/ 得/ ;/ fp/ 实测值/ 是/ 不/ 属于/ 全集/ 的/ 6000/ 个/ 元素/ 在/ 相关/ 过滤器/ 上/ 查询/ 结果/ 的/ 统计/ 值/ ,/ 即先/ 统计/ 被/ 误判/ 的/ 元素/ 个数/ count/ ,/ 再/ 将/ count/ 除以/ 6000/ ,/ 即得/ fp/ 实测值/ ;/ fn/ 实测值/ 则/ 使用/ 集合/ S/ 作为/ 测试数据/ 集/ ,/ 统计/ 假/ 阴性/ 比率/ ./ 模拟实验/ 中/ 所有/ fn/ 实测值/ 均/ 为/ 0/ ,/ 与/ 前面/ 理论/ 分析/ 结果/ (/ 定理/ 13/ )/ 一致/ ./ 表/ 1/ 列出/ 了/ 部分/ 实验/ 结果/ ,/ 假/ 阳性/ 实测值/ 取/ 100/ 次/ 实验/ 数据/ 的/ 平均值/ ,/ 用/ 百分比/ 表示/ ./ Page11/ 犆/ 犅/ 犉/ (/ S1/ ∩/ S2/ )/ m/ ,/ k/ 假/ 阳性/ 值/ ,/ 与/ 定理/ 5/ 的/ 分析/ 是/ 一致/ 的/ ./ 又/ 因/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∩/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 假/ 阳性/ 值/ 高于/ 犆/ 犅/ 犉/ (/ S1/ ∩/ S2/ )/ m/ ,/ k/ 的/ 必要/ 前提/ 就是/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∩/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ / 犆/ 犅/ 犉/ (/ S1/ ∩/ S2/ )/ m/ ,/ k/ ,/ 从而/ 也/ 间接/ 验证/ 了/ 定理/ 4/ 的/ 结论/ 是/ 正确/ 的/ ./ (/ 4/ )/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ \/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 假/ 阳性/ 值/ 大于/ 犆/ 犅/ 犉/ (/ S1/ \/ S2/ )/ m/ ,/ k/ 假/ 阳性/ 值/ ,/ 验证/ 了/ 定理/ 6/ 和/ 定理/ 7/ ./ (/ 5/ )/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∪/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 与/ 犆/ 犅/ 犉/ (/ S1/ ∪/ S2/ )/ m/ ,/ k/ 的/ 查询/ 假/ 阳性/ 实测值/ 相等/ ,/ 结果/ 与/ 定理/ 10/ 一致/ ./ (/ 6/ )/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ / 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 假/ 阳性率/ 大于/ 犆/ 犅/ 犉/ (/ S1/ / S2/ )/ m/ ,/ k/ 假/ 阳性率/ ,/ 验证/ 了/ 定理/ 11/ 和/ 定理/ 12/ 的/ 结论/ ./ 与/ 犆/ 犅/ 犉/ (/ S1XS2/ )/ m/ ,/ k/ 相/ 比较/ ,/ 同源/ 计数/ 布鲁姆/ 过滤器/ 补/ 运算/ 和/ 并/ 运算/ 后/ ,/ 其假/ 阳性/ 概率/ 不变/ ,/ 交/ 、/ 减/ 、/ 异或/ 运算/ 后/ ,/ 假/ 阳性/ 概率/ 则/ 稍/ 有/ 增加/ ;/ 同源/ 计数/ 布鲁姆/ 过滤器/ 的/ 并/ 、/ 交/ 、/ 补/ 、/ 减/ 、/ 异或/ 运算/ 均/ 不会/ 出现/ 假/ 阴性/ ,/ 能够/ 支持/ 元素/ 的/ 删除/ 操作/ ,/ 运算/ 后/ 仍然/ 符合/ 计数/ 布鲁姆/ 过滤器/ 的/ 特征/ ;/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ kX/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 与/ 犆/ 犅/ 犉/ (/ S1XS2/ )/ m/ ,/ k/ 之间/ 的/ 一致性/ 程度较高/ ,/ 能够/ 使用/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ kX/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 完成/ (/ S1XS2/ )/ 元素/ 的/ 成员/ 查询/ (/ 下称/ 代数/ 法/ 查询/ )/ ./ 如/ 代数/ 法/ 并/ 集/ 查询/ 使用/ CBF/ 并/ 运算/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∪/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 查询/ 元素/ x/ 是否/ 属于/ 并集/ (/ S1/ ∪/ S2/ )/ ,/ 其/ 查询/ 过程/ :/ 先/ 计算/ x/ 的/ k/ 个/ Hash/ 值/ h1/ (/ x/ )/ ,/ h2/ (/ x/ )/ ,/ …/ ,/ hk/ (/ x/ )/ ,/ 再/ 检查/ 对应/ 计数器/ (/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∪/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ hj/ (/ x/ )/ ,/ j/ =/ 1/ ,/ …/ ,/ k/ )/ 的/ 值/ ,/ 若全/ 大于/ 等于/ 1/ ,/ 则/ 判定/ 元素/ x/ 属于/ 并集/ (/ S1/ ∪/ S2/ )/ ,/ 否则/ ,/ 判定/ x/ 不/ 属于/ 并集/ ./ 上述/ 结论/ 同样/ 适用/ 于/ 其它/ 计数器/ 向量/ 布鲁姆/ 过滤器/ ,/ 如/ 光谱/ 布鲁姆/ 过滤器/ 和/ 动态/ 计数/ 过滤器/ 等/ ./ 5.2/ CBF/ 代数/ 法/ 查询/ 与/ 双/ CBF/ 法/ 查询/ 的/ 性能/ 比较/ 使用/ 两个/ 原始/ 的/ 计数/ 布鲁姆/ 过滤器/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ,/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ 进行/ (/ S1XS2/ )/ 元素/ 的/ 成员/ 查询/ 称双/ CBF/ (/ doubleCBFs/ )/ 法/ 查询/ ./ 如双/ CBF/ 法/ 查询/ 元素/ x/ 是否/ 属于/ 并集/ (/ S1/ ∪/ S2/ )/ (/ 简称/ 双/ CBF/ 法/ 并/ 集/ 查询/ )/ ,/ 其/ 查询/ 过程/ :/ 分别/ 用/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ 和/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 查询/ x/ 是否/ 属于/ S1/ 和/ S2/ ./ 若/ 查询/ 返回/ 结果/ 同为/ 假/ ,/ 则/ 判定/ x/ 不/ 属于/ 并集/ (/ S1/ ∪/ S2/ )/ ,/ 否则/ ,/ 判定/ x/ 属于/ 并集/ ./ 本节/ 从/ 假/ 阳性/ 、/ 假/ 阴性/ 、/ 时间/ 复杂度/ 、/ 空间/ 复杂度/ 4/ 个/ 方面/ 对/ 代数/ 法/ 查询/ 与/ 双/ CBF/ 法/ 查询/ 的/ 性能/ 进行/ 评估/ 比较/ ./ 设/ |/ U/ |/ =/ u/ ,/ |/ S1/ |/ =/ n1/ ,/ |/ S2/ |/ =/ n2/ ,/ |/ S1/ ∩/ S2/ |/ =/ n3/ ./ 实验/ 中取/ n1/ =/ n2/ =/ 6000/ ,/ u/ =/ 12000/ ,/ r/ =/ 4/ ,/ m/ =/ {/ 32768/ ,/ 65536/ ,/ 131072/ }/ ,/ k/ =/ {/ 4/ ,/ 6/ }/ ,/ 此时/ ,/ 单个/ CBF/ 假/ 阳性/ 值/ 在/ 0.01/ %/ ~/ 10/ %/ 之间/ 变化/ ./ 令/ α/ =/ n3/ // n1/ ,/ α/ 的/ 取值/ 范围/ :/ {/ 1/ // 3/ ,/ 1/ // 2/ ,/ 2/ // 3/ }/ ,/ 分别/ 对应/ 对称/ 差/ 规模/ 较大/ 、/ 中等/ 、/ 较/ 小/ 的/ 情形/ ./ fp/ 值/ 与/ fn/ 值/ 的/ 统计/ 方法/ 与/ 5.1/ 节/ 相同/ ./ 实验/ 结果/ 为/ 100/ 次/ 实验/ 数据/ 的/ 平均值/ ,/ 所有/ fp/ 值/ 与/ fn/ 值均/ 为/ 百分比/ 值/ ./ 5.2/ ./ 1/ 交集/ 查询/ (/ 1/ )/ 假/ 阳性/ ./ 双/ CBF/ 法/ 交集/ 查询/ 的/ 假/ 阳性/ 期望值/ 计算公式/ fp/ ∩/ m/ ,/ n1/ ,/ n2/ ,/ k/ =/ (/ 1/ -/ e/ -/ kn1/ // m/ -/ e/ -/ kn2/ // m/ +/ e/ -/ k/ (/ n1/ +/ n2/ -/ n3/ )/ // m/ )/ k/ ,/ 与/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ ∩/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 假/ 阳性/ 期望值/ 相等/ ./ 模拟实验/ 结果/ 见图/ 8/ ,/ 其中/ CBF/ _/ AND/ 为/ CBF/ 交/ 运算/ (/ 代数/ 法/ 交集/ 查询/ )/ 的/ 假/ 阳性/ 值/ ,/ double/ _/ CBFs/ _/ AND/ 为/ 双/ CBF/ 法/ 交集/ 查询/ 的/ 假/ 阳性/ 值/ ,/ CBF/ (/ intersection/ )/ 为/ 使用/ 犆/ 犅/ 犉/ (/ S1/ ∩/ S2/ )/ m/ ,/ k/ 进行/ 查询/ 的/ 假/ 阳性/ 值/ ./ CBF/ _/ AND/ 等于/ double/ _/ CBFs/ _/ AND/ ,/ 即/ 代数/ 法/ 与/ 双/ CBF/ 法/ 交集/ 查询/ 假/ 阳性/ 值/ 相同/ ,/ 均/ 大于/ 等于/ CBF/ (/ intersection/ )/ 假/ 阳性/ 值/ ./ 当/ m/ ,/ k/ 值/ 相同/ 时/ ,/ α/ 值越/ 大/ ,/ CBF/ _/ AND/ 越/ 接近/ CBF/ (/ intersection/ )/ 的/ 值/ ,/ 如/ m/ =/ 32768/ ,/ k/ =/ 4/ ,/ α/ 分别/ 取值/ 1/ // 3/ ,/ 1/ // 2/ ,/ 2/ // 3/ 时/ ,/ CBF/ _/ AND/ 与/ CBF/ (/ intersection/ )/ 的/ 比值/ 分别/ 为/ 5.38/ ,/ 2.15/ ,/ 1.34/ ./ (/ 2/ )/ 假/ 阴性/ ./ 代数/ 法/ 与/ 双/ CBF/ 法/ 交集/ 查询/ ,/ 假/ 阴性/ 率/ 都/ 等于/ 0/ ./ (/ 3/ )/ 空间/ 效率/ ./ 双/ CBF/ 法/ 交集/ 查询/ 需/ 存储/ 两个/ 单独/ 的/ 计数/ 布鲁姆/ 过滤器/ ,/ 其/ 占用/ 存储空间/ 是/ 代数/ 法/ 的/ 两倍/ ./ (/ 4/ )/ 时间/ 效率/ ./ 由于/ 实验/ 中/ 采用/ 同源/ 计数/ 布鲁姆/ 过滤器/ ,/ 使用/ 的/ Hash/ 函数/ 组/ 相同/ ,/ 因此/ ,/ 双/ CBF/ 法/ 交集/ 查询/ ,/ 尽管/ 需要/ 查询/ 两个/ 独立/ 的/ 计数/ 布鲁姆/ 过滤器/ ,/ 但/ k/ 个/ Hash/ 函数/ 值/ 只/ 需/ 计算/ 一次/ ,/ 其/ 计算/ 时间/ 复杂度/ 为/ O/ (/ k/ )/ ,/ 与/ 代数/ 法/ 相同/ ./ 使用/ 计数/ 布鲁姆/ 过滤器/ 进行/ 元素/ 的/ 成员/ 查询/ ,/ 除/ 进行/ Hash/ 函数/ Page12/ 的/ 计算/ 外/ ,/ 还/ 需/ 判断/ 元素/ 映射/ 的/ k/ 个/ 计数器/ 是否/ 全/ 大于/ 0/ ./ 对于/ 集合/ S/ 中/ 的/ 每个/ 元素/ ,/ 其所/ 需/ 计数器/ 的/ 查询/ 次数/ 恒定/ 为/ k/ ;/ 对于/ 不/ 属于/ 集合/ S/ 的/ 元素/ (/ 若/ 不/ 考虑/ 假/ 阳性/ )/ ,/ 则/ 只/ 需/ k/ 个/ 计数器/ 中任/ 一个/ 为/ 0/ 即可/ 判定/ 其/ 不/ 属于/ S/ ,/ 其/ 查询/ 次数/ / k/ ./ 以/ 全集/ U/ 作为/ 查询/ 测试数据/ 集/ ,/ 实验/ 中/ 统计/ 查询/ 时/ 计数器/ 的/ 查询/ 次数/ ./ 设/ 代数/ 法/ 查询/ 的/ 计数器/ 查询/ 次数/ 为/ Talgebra/ ,/ 双/ CBF/ 法/ 查询/ 的/ 计数器/ 查询/ 次数/ 为/ Tnonalgebra/ ,/ 则/ 代数/ 法/ 查询/ 在/ 计数器/ 查询/ 次数/ 上/ 的/ 性能/ 收益/ 可用/ 减幅/ 表示/ ,/ 减幅/ 计算公式/ 为/ 代数/ 法/ 交集/ 查询/ 的/ 计数器/ 查询/ 次数/ 为/ O/ (/ u/ +/ n3/ )/ =/ kn3/ +/ k1/ (/ u/ -/ n3/ )/ ,/ k1/ </ k/ ;/ 双/ CBF/ 法/ 交集/ 查询/ 时/ 计数器/ 查询/ 次数/ 为/ O/ (/ u/ +/ n3/ )/ =/ 2kn3/ +/ 2k2/ (/ u/ -/ n3/ )/ ,/ k2/ </ k/ ./ 代数/ 法/ 交集/ 查询/ 的/ 计数器/ 查询/ 次数/ 少于/ 双/ CBF/ 法/ 交集/ 查询/ ,/ 其/ 减幅/ 为/ kn3/ +/ (/ 2k2/ -/ k1/ )/ (/ u/ -/ n3/ )/ 验/ 结果/ 见/ 后面/ 表/ 2/ ./ 表/ 2/ 说明/ ,/ 代数/ 法/ 交集/ 查询/ 的/ 计数器/ 查询/ 次数/ 比双/ CBF/ 法/ 交集/ 查询/ 减少/ 47/ %/ ~/ 60/ %/ ./ 与/ 双/ CBF/ 法/ 交集/ 查询/ 相比/ ,/ 代数/ 法/ 交集/ 查询/ 假/ 阳性/ 概率/ 不变/ ,/ 空间/ 效率/ 提高/ 一倍/ ,/ 时间/ 效率/ 得到/ 显著/ 提高/ ./ 5.2/ ./ 2/ 并集/ 查询/ (/ 1/ )/ 假/ 阳性/ ./ 双/ CBF/ 法/ 并/ 集/ 查询/ 的/ 假/ 阳性/ 期望值/ fp/ ∪/ m/ ,/ n1/ ,/ n2/ ,/ k/ =/ (/ 1/ -/ e/ -/ kn1/ // m/ )/ k/ +/ (/ 1/ -/ e/ -/ kn2/ // m/ )/ k/ -/ (/ 1/ -/ e/ -/ kn1/ // m/ -/ e/ -/ kn2/ // m/ +/ e/ -/ k/ (/ n1/ +/ n2/ -/ n3/ )/ // m/ )/ k/ ./ 根据/ 定理/ 10/ ,/ 代数/ 法/ 并/ 集/ 查询/ 的/ 假/ 阳性/ 期望值/ :/ fp/ 犆/ 犅/ 犉/ ∪/ m/ ,/ n1/ +/ n2/ -/ n3/ ,/ k/ =/ (/ 1/ -/ e/ -/ k/ (/ n1/ +/ n2/ -/ n3/ )/ // m/ )/ k/ ./ 模拟实验/ 结果/ 见图/ 9/ ,/ 其中/ ,/ CBF/ _/ OR/ 为/ CBF/ 并/ 运算/ (/ 代数/ 法/ 并/ 集/ 查询/ )/ 的/ 假/ 阳性/ 值/ ,/ double/ _/ CBFs/ _/ OR/ 为/ 双/ CBF/ 法/ 并/ 集/ 查询/ 的/ 假/ 阳性/ 值/ ,/ CBF/ (/ union/ )/ 为/ 使用/ 犆/ 犅/ 犉/ (/ S1/ ∪/ S2/ )/ m/ ,/ k/ 进行/ 查询/ 的/ 假/ 阳性/ 值/ ./ 各/ 参数/ 取值/ 相同/ 时/ ,/ CBF/ _/ OR/ 与/ CBF/ (/ union/ )/ 假/ 阳性/ 值/ 相等/ ,/ 但/ 大于/ 等于/ double/ _/ CBFs/ _/ OR/ 假/ 阳性/ 值/ ./ 当/ m/ ,/ k/ 值/ 相同/ 时/ ,/ α/ 值越/ 大/ ,/ double/ _/ CBFs/ _/ OR/ 与/ CBF/ (/ union/ )/ 的/ 比值/ 越/ 接近/ 1/ ,/ 如/ m/ =/ 32768/ ,/ k/ =/ 4/ ,/ α/ 分别/ 取值/ 1/ // 3/ ,/ 1/ // 2/ ,/ 2/ // 3/ 时/ ,/ double/ _/ CBFs/ _/ OR/ 与/ CBF/ (/ union/ )/ 的/ 比值/ 分别/ 为/ 0.54/ ,/ 0.64/ ,/ 0.77/ ./ (/ 2/ )/ 假/ 阴性/ ./ 代数/ 法/ 与/ 双/ CBF/ 法/ 查询/ 并集/ 元素/ 均/ 不/ 存在/ 假/ 阴性/ ./ (/ 3/ )/ 空间/ 效率/ ./ 双/ CBF/ 法/ 并/ 集/ 查询/ 需/ 存储/ 两个/ 单独/ 的/ 计数/ 布鲁姆/ 过滤器/ ,/ 其/ 占用/ 存储空间/ 是/ 代数/ 法/ 并/ 集/ 查询/ 的/ 两倍/ ./ (/ 4/ )/ 时间/ 效率/ ./ 以/ 全集/ U/ 作为/ 查询/ 测试数据/ 集/ ./ 实验/ 中/ 用/ 查询/ 时/ 计数器/ 的/ 查询/ 次数/ 衡量/ 算法/ 的/ 查询/ 时间/ 复杂度/ ./ 代数/ 法/ 并/ 集/ 查询/ 计数器/ 查询/ 次数/ 为/ O/ (/ u/ +/ n1/ +/ n2/ -/ n3/ )/ =/ k/ (/ n1/ +/ n2/ -/ n3/ )/ +/ k1/ (/ u/ -/ (/ n1/ +/ n2/ -/ n3/ )/ )/ ,/ k1/ </ k/ ;/ 双/ CBF/ 法/ 并/ 集/ 查询/ 计数器/ 查询/ 次数/ 为/ O/ (/ u/ +/ n1/ +/ n2/ -/ n3/ )/ =/ k/ (/ n1/ +/ n2/ -/ n3/ )/ +/ 2k2/ (/ u/ -/ (/ n1/ +/ n2/ -/ n3/ )/ )/ ,/ k2/ </ k/ ./ 代数/ 法/ 并/ 集/ 查询/ 计数器/ 查询/ 次数/ 比双/ CBF/ 法少/ ,/ 其/ 减幅/ 为/ k/ (/ n1/ +/ n2/ -/ n3/ )/ +/ 2k2/ (/ u/ -/ (/ n1/ +/ n2/ -/ n3/ )/ )/ ./ 模拟实验/ 结果/ 见表/ 2/ ./ 模拟实验/ 中/ 减幅/ 为/ 10/ %/ ~/ 18/ %/ ./ 与/ 双/ CBF/ 法/ 并/ 集/ 查询/ 相比/ ,/ 代数/ 法/ 并/ 集/ 查询/ 虽然/ 增加/ 了/ 假/ 阳性/ 概率/ ,/ 但/ 其/ 空间/ 效率/ 提高/ 了/ 一倍/ ,/ 时间/ 效率/ 亦/ 有/ 较大/ 程度/ 的/ 提高/ ./ 5.2/ ./ 3/ 差集/ 查询/ (/ 1/ )/ 假/ 阳性/ ./ 双/ CBF/ 法差集/ 查询/ 的/ 假/ 阳性/ 期望值/ fp/ \/ m/ ,/ n1/ ,/ n2/ ,/ k/ =/ (/ 1/ -/ e/ -/ kn1/ // m/ )/ k/ -/ (/ 1/ -/ e/ -/ kn1/ // m/ -/ e/ -/ kn2/ // m/ +/ e/ -/ k/ (/ n1/ +/ n2/ -/ n3/ )/ // m/ )/ k/ ./ 由/ 定理/ 7/ ,/ 代数/ 法差集/ 查询/ 的/ 假/ 阳性/ 期望值/ fp/ 犆/ 犅/ 犉/ \/ m/ ,/ n1/ -/ n3/ ,/ k/ =/ (/ 1/ -/ e/ -/ kn1/ // m/ -/ e/ -/ k/ (/ u/ -/ n2/ )/ // m/ +/ e/ -/ k/ (/ u/ -/ n2/ +/ n3/ )/ // m/ )/ k/ ./ 模拟实验/ 结果/ 见图/ 10/ ,/ 其中/ CBF/ _/ SUB/ 为/ CBF/ 减/ 运算/ (/ 代数/ 法差集/ 查询/ )/ 的/ 假/ 阳性/ 值/ ,/ double/ _/ CBFs/ _/ SUB/ 为/ 双/ CBF/ 法差集/ 查询/ 的/ 假/ 阳性/ 值/ ,/ CBF/ (/ setdifferences/ )/ 为/ 使用/ 犆/ 犅/ 犉/ (/ S1/ \/ S2/ )/ m/ ,/ k/ 进行/ 查询/ 的/ 假/ 阳性/ 值/ ./ CBF/ _/ SUB/ 假/ 阳性/ 值/ 显著/ 小于/ double/ _/ CBFs/ _/ SUB/ 的/ 假/ 阳性/ 值/ ,/ 但/ 大于/ 等于/ CBF/ (/ setdifferences/ )/ 假/ 阳性/ ./ α/ 值越/ 小/ ,/ CBF/ _/ SUB/ 假/ 阳性/ 值越/ 接近/ CBF/ (/ setdifferences/ )/ 的/ 假/ 阳性/ 值/ ,/ 如/ m/ =/ 32768/ ,/ k/ =/ 4/ ,/ α/ 分别/ 取值/ 1/ // 3/ ,/ 1/ // 2/ ,/ 2/ // 3/ 时/ ,/ CBF/ _/ SUB/ 与/ CBF/ (/ setdifferences/ )/ 的/ 比值/ 分别/ 为/ 1.32/ ,/ 2.13/ ,/ 5.62/ ./ Page13/ 图/ 10/ 代数/ 法/ 、/ 双/ CBF/ 法差集/ 查询/ 与/ 差集/ 的/ (/ 2/ )/ 假/ 阴性/ ./ 双/ CBF/ 法/ 查询/ x/ 是否/ 属于/ 差集/ S1/ \/ S2/ 时/ ,/ 首先/ 使用/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ 判断/ x/ 是否/ 属于/ S1/ ,/ 若/ 是/ ,/ 则/ 继续/ 使用/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 判断/ x/ 是否/ 不/ 在/ S2/ 中/ ,/ 即/ 判断/ x/ 是否/ 属于/ 珚/ S2/ ./ 由于/ 在/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 上/ 进行/ 珚/ S2/ 成员/ 查询/ ,/ 其/ 判断/ 规则/ 是/ :/ 若/ 某/ 元素/ x/ 用/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 查询/ ,/ 其/ 不/ 属于/ S2/ ,/ 则/ 判定/ x/ 属于/ 珚/ S2/ ./ 由于/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 存在/ 假/ 阳性/ ,/ 故/ 用/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 查询/ 珚/ S2/ 元素/ 会/ 出现/ 假/ 阴性/ ,/ 从而/ 双/ CBF/ 法/ 查询/ 差集/ 元素/ 时/ ,/ 会/ 出现/ 假/ 阴性/ ,/ 其假/ 阴性/ 期望值/ 为/ fn/ \/ m/ ,/ n1/ ,/ n2/ ,/ k/ =/ (/ 1/ -/ e/ -/ kn2/ // m/ )/ k/ ,/ 实验/ 统计/ 值为/ 0.02/ %/ ~/ 8.79/ %/ ./ 而/ 代数/ 法/ 查询/ 差集/ 元素/ 则/ 不/ 存在/ 假/ 阴性/ ./ (/ 3/ )/ 空间/ 效率/ ./ 双/ CBF/ 法差集/ 查询/ 需/ 存储/ 两个/ 单独/ 的/ 计数/ 布鲁姆/ 过滤器/ ,/ 其/ 占用/ 存储空间/ 是/ 代数/ 法差集/ 查询/ 的/ 两倍/ ./ (/ 4/ )/ 时间/ 效率/ ./ 以/ 全集/ U/ 作为/ 查询/ 测试数据/ 集/ ,/ 实验/ 中/ 统计/ 查询/ 时/ 计数器/ 的/ 查询/ 次数/ ./ 代数/ 法差集/ 查询/ 的/ 计数器/ 查询/ 次数/ 为/ O/ (/ u/ +/ n1/ -/ n3/ )/ =/ k/ (/ n1/ -/ n3/ )/ +/ k1/ (/ u/ -/ n1/ +/ n3/ )/ ,/ k1/ </ k/ ;/ 双/ CBF/ 法差集/ 查询/ 计数器/ 查询/ 次数/ 为/ O/ (/ u/ +/ n1/ -/ n3/ )/ =/ k/ (/ n1/ -/ n3/ )/ +/ 2kn3/ +/ 2k2/ (/ u/ -/ n1/ )/ +/ k3/ (/ n1/ -/ n3/ )/ ,/ k2/ </ k/ ,/ k3/ </ k/ ./ 代数/ 法差集/ 查询/ 在/ 计数器/ 查询/ 次数/ 上/ 的/ 减幅/ 为/ k3/ (/ n1/ -/ n3/ )/ +/ (/ 2k2/ -/ k1/ )/ (/ u/ -/ n1/ )/ +/ (/ 2k/ -/ k1/ )/ n3k/ (/ n1/ -/ n3/ )/ +/ 2kn3/ +/ 2k2/ (/ u/ -/ n1/ )/ +/ k3/ (/ n1/ -/ n3/ )/ ./ 模拟实验/ 结果/ 见表/ 2/ ./ 实验/ 结果表明/ ,/ 与/ 双/ CBF/ 法差集/ 查询/ 相比/ ,/ 代数/ 法差集/ 查询/ 计数器/ 查询/ 次数/ 减少/ 42/ %/ ~/ 65/ %/ ./ 与/ 双/ CBF/ 法差集/ 查询/ 相比/ ,/ 代数/ 法差集/ 查询/ 不/ 存在/ 假/ 阴性/ ,/ 假/ 阳性率/ 显著/ 降低/ ,/ 空间/ 效率/ 提高/ 一倍/ ,/ 时间/ 效率/ 得到/ 显著/ 提高/ ./ 5.2/ ./ 4/ 对称/ 差/ 查询/ (/ 1/ )/ 假/ 阳性/ :/ 双/ CBF/ 法/ 对称/ 差/ 查询/ 假/ 阳性/ 期望值/ fp/ / m/ ,/ n1/ ,/ n2/ ,/ k/ =/ (/ 1/ -/ e/ -/ kn1/ // m/ )/ k/ +/ (/ 1/ -/ e/ -/ kn2/ // m/ )/ k/ -/ 2/ (/ 1/ -/ e/ -/ kn1/ // m/ -/ e/ -/ kn2/ // m/ +/ e/ -/ k/ (/ n1/ +/ n2/ -/ n3/ )/ // m/ )/ k/ ./ 根据/ 定理/ 12/ ,/ 计数/ 布鲁姆/ 过滤器/ 异或/ 运算/ 的/ 假/ 阳性/ 值/ 计算公式/ :/ fp/ 犆/ 犅/ 犉/ / m/ ,/ n1/ +/ n2/ -/ 2n3/ ,/ k/ =/ (/ 1/ -/ e/ -/ k/ (/ n1/ +/ n2/ -/ n3/ )/ // m/ -/ e/ -/ k/ (/ u/ -/ n3/ )/ // m/ +/ e/ -/ ku/ // m/ )/ k/ ./ 模拟实验/ 结果/ 见图/ 11/ ,/ 其中/ CBF/ _/ XOR/ 为/ CBF/ 异或/ 运算/ (/ 代数/ 法/ 对称/ 差/ 查询/ )/ 的/ 假/ 阳性/ 值/ ,/ double/ _/ CBFs/ _/ XOR/ 为/ 双/ CBF/ 法/ 对称/ 差/ 查询/ 的/ 假/ 阳性/ 值/ ,/ CBF/ (/ symm/ ./ diff/ ./ )/ 为/ 使用/ 犆/ 犅/ 犉/ (/ S1/ / S2/ )/ m/ ,/ k/ 进行/ 对称/ 差/ 查询/ 的/ 假/ 阳性/ 值/ ./ 当/ α/ =/ 1/ // 3/ 时/ ,/ CBF/ _/ XOR/ 约/ 是/ CBF/ (/ symm/ ./ diff/ ./ )/ 的/ 1.05/ 倍/ ~/ 1.12/ 倍/ ,/ double/ _/ CBFs/ _/ XOR/ 约/ 为/ CBF/ (/ symm/ ./ diff/ ./ )/ 的/ 1/ // 2/ ~/ 4/ // 5/ ;/ 当/ α/ =/ 1/ // 2/ 时/ ,/ CBF/ _/ XOR/ 约/ 是/ CBF/ (/ symm/ ./ diff/ ./ )/ 的/ 1.20/ 倍/ ~/ 1.67/ 倍/ ,/ double/ _/ CBFs/ _/ XOR/ 约/ 为/ CBF/ (/ symm/ ./ diff/ ./ )/ 的/ 1.46/ 倍/ ~/ 1.95/ 倍/ ;/ α/ =/ 2/ // 3/ 时/ ,/ CBF/ _/ XOR/ 约/ 是/ CBF/ (/ symm/ ./ diff/ ./ )/ 假/ 阳性/ 值/ 的/ 1.61/ 倍/ ~/ 3.77/ 倍/ ,/ double/ _/ CBFs/ _/ XOR/ 约/ 是/ CBF/ (/ symm/ ./ diff/ ./ )/ 的/ 3.80/ 倍/ ~/ 11.76/ 倍/ ./ α/ 值越/ 小/ ,/ CBF/ _/ XOR/ 假/ 阳性/ 值越/ 接近/ CBF/ (/ symm/ ./ diff/ ./ )/ 的/ 假/ 阳性/ 值/ ./ 图/ 11/ 代数/ 法/ 、/ 双/ CBF/ 法/ 对称/ 差/ 查询/ 与/ 对称/ 差/ 的/ (/ 2/ )/ 假/ 阴性/ ./ 双/ CBF/ 法/ 对称/ 差/ 查询/ 时/ ,/ 由于/ 使用/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ k/ 、/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 分别/ 查询/ 元素/ 是否/ 属于/ 珚/ S1/ 、/ 珚/ S2/ ,/ 会/ 出现/ 假/ 阴性/ ,/ 故双/ CBF/ 法/ 查询/ 对称/ 差/ 元素/ 时/ ,/ 会/ 出现/ 假/ 阴性/ ,/ 其假/ 阴性/ 期望值/ 为/ fn/ / m/ ,/ n1/ ,/ n2/ ,/ k/ =/ (/ 1/ -/ e/ -/ kn1/ // m/ )/ k/ =/ (/ 1/ -/ e/ -/ kn2/ // m/ )/ k/ ,/ 实验/ 统计/ 值为/ 0.02/ %/ ~/ 8.82/ %/ ./ 而/ 代数/ 法/ 查询/ 对称/ 差/ 元素/ 则/ 不存/ Page14/ 在/ 假/ 阴性/ ./ (/ 3/ )/ 空间/ 效率/ ./ 双/ CBF/ 法/ 对称/ 差/ 查询/ 需/ 存储/ 两个/ 单独/ 的/ 计数/ 布鲁姆/ 过滤器/ ,/ 其/ 占用/ 存储空间/ 是/ 代数/ 法/ 对称/ 差/ 查询/ 的/ 两倍/ ./ (/ 4/ )/ 时间/ 效率/ ./ 以/ 全集/ U/ 作为/ 查询/ 测试数据/ 集/ ,/ 实验/ 中/ 统计/ 查询/ 时/ 计数器/ 的/ 查询/ 次数/ ./ 代数/ 法/ 对称/ 差/ 查询/ 的/ 计数器/ 查询/ 次数/ 为/ O/ (/ u/ +/ n1/ +/ n2/ -/ 2n3/ )/ =/ k/ (/ n1/ +/ n2/ -/ 2n3/ )/ +/ k1/ (/ u/ -/ n1/ -/ n2/ +/ 2n3/ )/ ,/ k1/ </ k/ ;/ 双/ CBF/ 法/ 对称/ 差/ 查询/ 时/ 计数器/ 查询/ 次数/ 为/ O/ (/ u/ +/ n1/ +/ n2/ -/ 2n3/ )/ =/ k/ (/ n1/ +/ n2/ )/ +/ k2/ (/ u/ -/ n1/ -/ n2/ )/ +/ k3/ (/ n1/ +/ m/ ,/ α/ ,/ k/ 并集/ 查询/ 次数/ 表/ 2CBF/ 代数/ 运算法/ 与/ 双/ CBF/ 法/ 查询/ 计数器/ 查询/ 次数/ 对比/ 32768/ ,/ 1/ // 3/ ,/ 445094539151626387527695030339527694342200711304135570835775732768/ ,/ 1/ // 2/ ,/ 443209519141728267547994828255547994838438711454635570835775732768/ ,/ 2/ // 3/ ,/ 441012498491830358568714726398568715434035711495235570835775732768/ ,/ 1/ // 3/ ,/ 66809679183143777878035524381378035446420010481939524241244195832768/ ,/ 1/ // 2/ ,/ 66525976085144060381139504060481139505852810482244524241244195832768/ ,/ 2/ // 3/ ,/ 66174272865154382984401483779984401555148810484251524241244195865536/ ,/ 1/ // 3/ ,/ 443522512591521799464645326863464644239047651474032564805716065536/ ,/ 1/ // 2/ ,/ 441032486951624273490265024260490265134061651474832564805716065536/ ,/ 2/ // 3/ ,/ 438373461241726869515924821786515925828744651445632564805716065536/ ,/ 1/ // 3/ ,/ 6647607359212283996535757367856535744575109263238463121183156165536/ ,/ 1/ // 2/ ,/ 6606216932813324876961153324886961153492329262747463121183156165536/ ,/ 2/ // 3/ ,/ 65614665044143678673888502838673888624028392623574631211831561131072/ ,/ 1/ // 3/ ,/ 4426884954914197144397055253014397042373696234640311717917361131072/ ,/ 1/ // 2/ ,/ 4399154674715224814677752224784677752318276234949311717917361131072/ ,/ 2/ // 3/ ,/ 4370714394416253064957949197154957960261396234858311717917361131072/ ,/ 1/ // 3/ ,/ 66313870484102474861128603407961128445427887743384387711587462131072/ ,/ 1/ // 2/ ,/ 65850465804112937065822552937065822554501287750494387711587462131072/ ,/ 2/ // 3/ ,/ 653743611151234080705025224751705026535492877456043877115874625.2/ ./ 5/ 补集/ 查询/ (/ 1/ )/ 假/ 阳性/ ./ 双/ CBF/ 法补集/ 查询/ 使用/ 犆/ 犅/ 犉/ (/ U/ )/ m/ ,/ k/ 和/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 查询/ 元素/ 是否/ 属于/ 补集/ (/ 珚/ S2/ )/ ,/ 其假/ 阳性/ 期望值/ :/ fp/ ~/ m/ ,/ u/ ,/ n2/ ,/ k/ =/ (/ 1/ -/ e/ -/ ku/ // m/ )/ k/ -/ (/ 1/ -/ e/ -/ kn2/ // m/ )/ k/ ,/ CBF/ 补/ 运算/ 其假/ 阳性/ 期望值/ fp/ 犆/ 犅/ 犉/ ~/ m/ ,/ u/ -/ n2/ ,/ k/ =/ (/ 1/ -/ e/ -/ k/ (/ u/ -/ n2/ )/ // m/ )/ k/ ./ 模拟实验/ 结果/ 见图/ 12/ ,/ 其中/ CBF/ _/ COMP/ 为/ CBF/ 补/ 运算/ (/ 代数/ 法补集/ 查询/ )/ 的/ 假/ 阳性/ 值/ ,/ double/ _/ CBFs/ _/ COMP/ 为/ 双/ CBF/ 法补集/ 查询/ 的/ 假/ 阳性/ 值/ ,/ CBF/ (/ complement/ )/ 为/ 使用/ 犆/ 犅/ 犉/ (/ 珚/ S2/ )/ m/ ,/ k/ 进行/ 补集/ 查询/ 的/ 假/ 阳性/ 值/ ./ CBF/ _/ COMP/ 假/ 阳性/ 值/ 等于/ CBF/ (/ complement/ )/ 的/ 假/ 阳性/ 值/ ,/ 而/ double/ _/ CBFs/ _/ COMP/ 约/ 是/ CBF/ (/ complement/ )/ 的/ 3.78/ ~/ 28.11/ 倍/ ./ CBF/ _/ COMP/ 、/ double/ _/ CBFs/ _/ COMP/ 、/ CBF/ (/ comple/ -/ ment/ )/ 与/ α/ 值/ 无关/ ./ (/ 2/ )/ 假/ 阴性/ ./ 双/ CBF/ 法补集/ 查询/ 使用/ 犆/ 犅/ 犉/ (/ U/ )/ m/ ,/ k/ 和/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ 进行/ 补集/ 元素/ 的/ 查询/ ,/ 由于/ 用/ n2/ -/ 2n3/ )/ ,/ k2/ </ k/ ,/ k3/ </ k/ ./ 代数/ 法/ 对称/ 差/ 查询/ 在/ 计数器/ 查询/ 次数/ 上/ 的/ 减幅/ 为/ k3/ (/ n1/ +/ n2/ )/ +/ 2/ (/ k/ -/ k1/ -/ k3/ )/ n3/ +/ (/ k2/ -/ k1/ )/ (/ u/ -/ n1/ -/ n2/ )/ k/ (/ n1/ +/ n2/ )/ +/ k2/ (/ u/ -/ n1/ -/ n2/ )/ +/ k3/ (/ n1/ +/ n2/ -/ 2n3/ )/ ./ 模拟实验/ 结果/ 见表/ 2/ ./ 代数/ 法/ 对称/ 差/ 查询/ ,/ 其/ 计数器/ 查询/ 次数/ 比双/ CBF/ 法少/ ,/ 其/ 减幅/ 为/ 38/ %/ ~/ 60/ %/ ./ 与/ 双/ CBF/ 法/ 对称/ 差/ 查询/ 相比/ ,/ 代数/ 法/ 不/ 存在/ 假/ 阴性/ ,/ 空间/ 效率/ 提高/ 一倍/ ,/ 时间/ 效率/ 显著/ 提高/ ,/ α/ 较/ 小时/ 假/ 阳性率/ 稍/ 有/ 提高/ ,/ α/ 较大/ 时假/ 阳性率/ 差不多/ 或/ 大幅/ 降低/ ./ 差集/ 查询/ 次数/ 图/ 12CBF/ 补/ 运算/ 、/ 双/ CBF/ 法补集/ 查询/ 与/ 补集/ 的/ Page15/ 法/ 查询/ 补集/ 元素/ 时/ 存在/ 假/ 阴性/ ,/ 其假/ 阴性/ 期望值/ 为/ fn/ ~/ m/ ,/ u/ ,/ n2/ ,/ k/ =/ (/ 1/ -/ e/ -/ kn2/ // m/ )/ k/ ,/ 其/ 实验/ 统计/ 值为/ 0.02/ %/ ~/ 8.78/ %/ ./ 而/ 代数/ 法补集/ 查询/ 不/ 存在/ 假/ 阴性/ ./ (/ 3/ )/ 空间/ 效率/ ./ 双/ CBF/ 法补集/ 查询/ 需/ 存储/ 两个/ 单独/ 的/ 计数/ 布鲁姆/ 过滤器/ ,/ 其/ 占用/ 存储空间/ 是/ 代数/ 法补集/ 查询/ 的/ 两倍/ ./ (/ 4/ )/ 时间/ 效率/ ./ 以/ 全集/ U/ 作为/ 查询/ 测试数据/ 集/ ,/ 实验/ 中/ 统计/ 补集/ 查询/ 时/ 计数器/ 的/ 查询/ 次数/ ./ 代数/ 法补集/ 查询/ 的/ 计数器/ 查询/ 次数/ 为/ O/ (/ u/ +/ n2/ )/ =/ k/ (/ u/ -/ n2/ )/ +/ k1n2/ ,/ k1/ </ k/ ;/ 双/ CBF/ 法补集/ 查询/ 时/ 计数器/ 查询/ 次数/ 为/ O/ (/ u/ +/ n2/ )/ =/ ku/ +/ k2n2/ ,/ k2/ </ k/ ./ 代数/ 法补集/ 查询/ 的/ 计数器/ 查询/ 次数/ 比双/ CBF/ 法补集/ 查询/ 小/ ,/ 其/ 减幅/ 等于/ (/ k/ -/ k1/ +/ k2/ )/ n2ku/ +/ k2n2/ ./ 不论/ 代数/ 法补集/ 查询/ 还是/ 双/ CBF/ 法补集/ 查询/ ,/ 其/ 计数器/ 查询/ 次数/ 取决于/ u/ ,/ n2/ 的/ 值/ ,/ 与/ 交集/ 规模/ n3/ 无关/ ./ 模拟实验/ 结果/ 见表/ 2/ ./ 代数/ 法补集/ 查询/ ,/ 其/ 计数器/ 查询/ 次数/ 比双/ CBF/ 法小/ ,/ 其/ 减幅/ 为/ 57/ %/ ~/ 62/ %/ ./ 与/ 双/ CBF/ 法补集/ 查询/ 相比/ ,/ 代数/ 法/ 不/ 存在/ 假/ 阴性/ ,/ 假/ 阳性率/ 显著/ 降低/ ,/ 空间/ 效率/ 提高/ 一倍/ ,/ 时间/ 效率/ 得到/ 显著/ 提高/ ./ 由/ 上述/ 模拟实验/ 与/ 分析/ ,/ 可/ 得出结论/ :/ (/ 1/ )/ 对于/ 并集/ 查询/ 与/ 交集/ 查询/ 来说/ ,/ 双/ CBF/ 法/ 查询/ 与/ CBF/ 代数/ 法/ 查询/ 均/ 不/ 存在/ 假/ 阴性/ ,/ 查询/ 结果/ 的/ 可靠性/ 均/ 较/ 高/ ,/ 但是/ CBF/ 代数/ 法/ 的/ 空间/ 效率/ 提高/ 一倍/ ,/ 查询/ 时间/ 效率/ 亦/ 有/ 显著/ 提高/ ./ (/ 2/ )/ 对于/ 差集/ 查询/ 、/ 对称/ 差/ 查询/ 与/ 补集/ 查询/ 来说/ ,/ 与/ 双/ CBF/ 法/ 查询/ 相比/ ,/ 代数/ 法/ 查询/ 的/ 最/ 主要/ 优点/ 是/ 不/ 存在/ 假/ 阴性/ ,/ 另外/ ,/ 代数/ 法/ 查询/ 的/ 空间/ 效率/ 提高/ 一倍/ ,/ 查询/ 时间/ 效率/ 可/ 显著/ 提高/ ./ (/ 3/ )/ 与/ 双/ CBF/ 法/ 查询/ 的/ 假/ 阳性/ 相比/ ,/ 代数/ 法/ 交集/ 查询/ 假/ 阳性/ 概率/ 不变/ ,/ 并集/ 查询/ 假/ 阳性/ 稍/ 有/ 提高/ ,/ 差集/ 查询/ 、/ 补集/ 查询/ 假/ 阳性/ 则/ 显著/ 降低/ ,/ 对称/ 差/ 查询/ 假/ 阳性/ 总体/ 上/ 稍低/ ./ (/ 4/ )/ 总地/ 说来/ ,/ 对于/ 以/ 数据/ 查询/ 为/ 主要/ 操作/ 的/ 数据库/ 或/ 网络应用/ 来说/ ,/ 代数/ 法/ 查询/ 能/ 显著/ 提高/ 查询/ 效率/ 及/ 查询/ 结果/ 的/ 可靠性/ ./ 综合/ 本文/ 工作/ 和/ 文献/ [/ 14/ ]/ 的/ 工作/ ,/ 可/ 得出/ CBF/ 代数/ 运算/ 及/ BF/ 代数/ 运算/ 在/ 分布式系统/ 中/ 的/ 应用/ 技巧/ :/ (/ 1/ )/ 当/ 将/ 布鲁姆/ 过滤器/ 并/ 运算/ 或交/ 运算/ 用于/ 资源/ 路由/ (/ ResourceRouting/ )/ [/ 5/ ,/ 15/ ]/ 、/ 多/ 关键字/ 搜索/ (/ Multi/ -/ keywordSearch/ )/ [/ 12/ ]/ 中/ 的/ And/ 查询/ 、/ Or/ 查询/ 等/ 分布式应用/ 领域/ 时/ ,/ 由于/ BF/ 并/ (/ 交/ )/ 运算/ 与/ CBF/ 并/ (/ 交/ )/ 运算/ 都/ 可以/ 得到/ 并/ (/ 交/ )/ 集/ 的/ 近似/ 过滤器/ 表示/ ,/ 且/ 查询/ 假/ 阳性/ 概率/ 一致/ (/ 参见/ 本文/ 定理/ 10/ 、/ 定理/ 5/ 和/ 文献/ [/ 14/ ]/ 的/ 定理/ 2/ 、/ 定理/ 4/ )/ ,/ 此时/ 使用/ BF/ 并/ (/ 交/ )/ 运算/ 具有/ 可以/ 节约/ 过滤器/ 的/ 向量/ 存储空间/ ,/ 代数/ 运算/ 更为/ 简单/ 的/ 优点/ ./ 例如/ ,/ 资源/ 路由/ 的/ 路由表/ 是/ 由/ 许多/ BF/ 或/ DBF/ 组成/ ,/ 每个/ 这样/ 的/ 过滤器/ 保存/ 的/ 是/ 通过/ 某条/ 链路/ 可达/ 的/ 资源/ 列表/ ./ 当/ 节点/ 在/ 转发/ 查询/ 时/ ,/ 逐个/ 查询/ 路由表/ 中/ 的/ BF/ ,/ 从中/ 选择/ 合适/ 的/ 链路/ 转发/ ./ 其/ 路由表/ 的/ 构造/ 过程/ 如下/ :/ 各/ 结点/ 构造/ 本地/ BF/ ,/ 然后/ 将/ BF/ 表示/ 的/ 路由/ 通告/ 发送给/ 邻居/ ,/ 接收/ 到/ 其它/ 节点/ 的/ BF/ 后/ 将/ 其/ 与/ 本地/ BF/ 合并/ (/ 即/ BF/ 并/ 运算/ )/ ./ 资源/ 路由/ 时/ 使用/ BF/ 并/ 运算/ 即/ 可以/ 完成/ 路由/ 的/ 合并/ ,/ 可以/ 节约/ 过滤器/ 的/ 向量/ 存储空间/ ,/ 减少/ 路由/ 通告/ 时/ 发送给/ 邻居/ 的/ 消息/ 传输/ 位数/ ./ 但/ 由于/ BF/ 不/ 适合/ 动态/ 删除/ 频繁/ 的/ 系统/ 环境/ ,/ 当/ 删除/ 操作/ 频繁/ 时/ ,/ 此时/ 可以/ 使用/ CBF/ 反映/ 资源/ 的/ 删除/ 操作/ ,/ 而/ 在/ 路由表/ 的/ 构造/ 过程/ 中则/ 仍然/ 传输/ 与/ CBF/ 对应/ 的/ 用/ BF/ 表示/ 的/ 路由/ 通告/ ./ (/ 2/ )/ 由于/ CBF/ 减/ (/ 异或/ 、/ 补/ )/ 运算/ 能/ 用于/ 差集/ (/ 对称/ 差/ 、/ 补集/ )/ 的/ 成员/ 查询/ ,/ 而/ BF/ 减/ (/ 异或/ 、/ 补/ )/ 运算/ 不能/ ,/ 当/ 分布式应用/ 中/ 使用/ 布鲁姆/ 过滤器/ 求解/ 完整/ 差集/ (/ 对称/ 差/ 、/ 补集/ )/ 时/ ,/ 只能/ 采用/ CBF/ 减/ (/ 异或/ 、/ 补/ )/ 运算/ 来/ 完成/ ,/ 不能/ 使用/ BF/ 减/ (/ 异或/ 、/ 补/ )/ 运算/ ./ 本文/ 第/ 6/ 节以/ CBF/ 减/ 运算/ 为例/ 讨论/ CBF/ 代数/ 运算/ 应用/ 于/ 分布式系统/ 的/ 有效性/ 和/ 高效性/ ./ 6CBF/ 减/ 运算/ 的/ 应用/ 探讨/ 与/ 仿真/ 实验/ 6.1/ P2P/ 网络/ 中/ 的/ 大规模/ 文件/ 分发/ 系统/ 由于/ 分布式系统/ 中/ 网络/ 异构/ 性/ 和/ 网络/ 波动/ (/ churn/ )/ 的/ 普遍存在/ ,/ 在/ 接收/ 相同/ 文件/ 内容/ 的/ 对/ 等/ 节点/ 间/ ,/ 各/ 节点/ 的/ 已/ 接收/ 文件/ 块/ 往往/ 存在/ 显著/ 的/ 差异/ ;/ 另外/ ,/ 由于/ 为/ 充分利用网络/ 带宽/ 、/ 提高/ 下载速度/ 、/ 缩短/ 下载/ 时间/ ,/ 需要/ 从/ 其它/ 对/ 等/ 节点/ 并行/ 进行/ 下载/ ;/ 甚至/ 存在/ 如下/ 可能/ :/ 由于/ 覆盖网/ 中/ 网络连接/ 的/ 短暂性/ ,/ 服务器/ 和/ 某/ 对/ 等/ 节点/ 间/ 的/ 连接/ 断开/ ,/ 这些/ 情况/ 下/ ,/ 对/ 等/ 节点/ 需要/ 高效/ 的/ 集合/ 调和/ (/ SetReconciliation/ )/ 方法/ [/ 18/ ]/ ,/ 调和/ 位于/ 不同/ 对/ 等/ 节点/ 的/ 已/ 接收/ 文件/ 块/ ,/ 最终/ 得到/ 所有/ 文件/ 块/ ./ 假如/ 要/ 将/ 一个/ 800MB/ 的/ 大/ 文件/ 从/ 服务器/ 分发/ 到/ 诸多/ 对/ 等/ 节点/ ,/ 每个/ 文件/ 块/ 的/ 大小/ 为/ 100KB/ ,/ 则/ 该/ 文件/ 可/ 分为/ 8000/ 个/ 文件/ 块/ ./ 这/ 8000/ 个/ 文件/ 块/ 组成/ 了/ 含/ 8000/ 个/ 元素/ 的/ 集合/ ./ 而且/ ,/ 在/ 现实/ 的/ 大规模/ Page16/ 文件/ 分发/ 系统/ 中/ ,/ 文件大小/ 远超过/ 800MB/ ,/ 最小/ 的/ 都/ 是/ 数个/ GB/ 大小/ ./ 若/ 直接/ 对/ 文件/ 块/ 集合/ 进行/ 操作/ ,/ 会/ 产生/ 大量/ 的/ 消息/ 数据/ ,/ 因此/ ,/ 我们/ 使用/ BF/ 或/ CBF/ 对/ 文件/ 块/ 集合/ 进行/ 精简/ 表示/ ./ 在/ 图/ 13/ 所示/ 的/ 知情/ 内容/ 分发/ 系统/ [/ 18/ ]/ 中/ ,/ 对/ 等/ 节点/ 间/ 在/ 下载/ 时/ 相互协作/ ,/ 从/ 服务器/ 下载/ 某些/ 文件/ 块/ (/ 图/ 13/ (/ b/ )/ )/ 的/ 同时/ 从/ 其它/ 对/ 等/ 节点/ 下载/ 其它/ 文件/ 块/ (/ 图/ 13/ (/ c/ )/ )/ ,/ 以/ 有效/ 地/ 提高/ 下载/ 速率/ ,/ 在/ 知情/ 传输/ 的/ 过程/ 中/ 发送/ 节点/ 仅/ 需/ 传送/ 接收/ 节点/ 缺失/ 的/ 文件/ 块/ ,/ 即/ 过滤/ 掉/ 了/ 重复/ 元素/ ,/ 故称/ 此/ 内容/ 分发/ 过程/ 为/ 知情/ 内容/ 分发/ (/ Informedcontentdelivery/ )/ ./ 在/ 知情/ 内容/ 分发/ 系统/ 的/ 知情/ 传输/ 过程/ 中/ ,/ 利用/ 图/ 14/ (/ a/ )/ 所示/ 的/ 集合/ 调和/ 方法/ ,/ 发送/ 方可/ 找出/ 两/ 节点/ 中/ 大部分/ 相异/ 文件/ 块/ ,/ 在/ 节点/ 间/ 仅/ 传送/ 这些/ 相异/ 文件/ 块/ 即可/ ,/ 免去/ 发送/ 方/ 传送/ 共有/ 文件/ 块/ 的/ 网络/ 开销/ ;/ 利用/ 纠/ 删码/ (/ Erasurecorrectingcode/ )/ [/ 19/ ]/ 技术/ ,/ 接收/ 方在/ 收到/ 发送/ 方/ 大部分/ 相异/ 编码/ 文件/ 块/ 后/ ,/ 进行/ 译码/ 即能/ 得到/ 双方/ 拥有/ 文件/ 块/ 的/ 总和/ ./ 6.2/ 集合/ 调和/ 假定/ 两/ 节点/ A/ 、/ B/ 分别/ 拥有/ 文件/ 块/ 集合/ SA/ 、/ SB/ ,/ 节点/ A/ 发送/ SA/ 的/ 某种/ 表示/ 给/ 节点/ B/ ,/ 节点/ B/ 据此/ 计算/ 差集/ SB/ \/ SA/ ,/ 返回/ SB/ \/ SA/ 中/ 文件/ 块/ 给/ A/ ,/ 得到/ SA/ ∪/ SB/ ,/ 此/ 过程/ 称/ 集合/ 调和/ ./ 目前/ 存在/ 两大类/ 集合/ 调和/ 方法/ :/ 精确/ 集合/ 调和/ (/ ExactSetReconciliation/ )/ 、/ 近似/ 集合/ 调和/ (/ Approx/ -/ imateSetReconciliation/ )/ ./ 精确/ 集合/ 调和/ 能/ 得到/ SB/ \/ SA/ 的/ 准确/ 成员/ ./ 精确/ 集合/ 调和/ 最/ 直观/ 的/ 方法/ 是/ 节点/ A/ 直接/ 发送/ SA/ 所有/ 元素/ 给/ 节点/ B/ ,/ 设/ 元素/ 位串/ 长度/ 为/ len/ ,/ 此时/ 需/ 传输/ O/ (/ |/ SA/ |/ len/ )/ 位/ 消息/ [/ 18/ ]/ ,/ 此法/ 下称/ 完整/ 集合/ 传输/ 法/ ./ 还有/ 一种/ 常用/ 的/ 精确/ 集合/ 调和/ 方法/ 是/ 特征/ 多项式/ 法/ [/ 20/ ]/ ,/ 在/ 应用/ 该法/ 前/ ,/ 需/ 将/ 全集/ U/ 中/ 所有/ 长为/ len/ 的/ 位串/ 映射/ 到/ 有限/ 域/ Fq/ (/ q/ / 2len/ )/ 中/ 的/ 元素/ ,/ 在/ 假定/ d/ =/ |/ SA/ \/ SB/ |/ +/ |/ SB/ \/ SA/ |/ 已知/ 的/ 情况/ 下/ ,/ A/ 需/ 发送/ O/ (/ dloglen/ )/ 位/ 数据/ 消息/ 给/ B/ ;/ 若/ d/ 未知/ ,/ 则/ 必须/ 通过/ A/ 、/ B/ 之间/ 的/ 多轮/ 消息/ 交换/ 估算/ 出/ d/ 的/ 合理/ 上/ 界/ ,/ 然后/ 根据/ d/ 对/ 特征/ 多项式/ 进行/ 插值/ 与/ 因式分解/ ,/ 恢复/ 差集/ 元素/ ./ 此法/ 所/ 需/ 时间/ 复杂度/ 为/ Θ/ (/ d3/ )/ ./ 文献/ [/ 20/ ]/ 的/ 作者/ 后/ 又/ 改进/ 了/ 该/ 特征/ 多项式/ 法/ ,/ 使/ 其/ 只/ 需/ Θ/ (/ d/ )/ 计算/ 时间/ 复杂度/ ,/ 但/ 以/ A/ 、/ B/ 之间/ 更/ 多/ 的/ 通信/ 轮数/ 为/ 代价/ [/ 21/ ]/ ./ 这些/ 精确/ 集合/ 调和/ 方法/ 均/ 存在/ 网络通信/ 代价/ 高/ 的/ 缺点/ ,/ 当/ |/ SB/ \/ SA/ |/ 较/ 小时/ 尤为/ 突出/ ./ 近似/ 集合/ 调和/ 则/ 只能/ 找出/ SB/ \/ SA/ 的/ 部分/ 元素/ ./ 近似/ 集合/ 调和/ 在/ 节点/ 间/ 传递/ Hash/ 后/ 的/ 集合/ (/ hash/ (/ SA/ )/ )/ 、/ BF/ 表示/ 的/ 集合/ (/ 犅/ 犉/ (/ SA/ )/ )/ [/ 18/ ]/ 或/ 集合/ 的/ 近似/ 调和/ 树/ [/ 22/ ]/ (/ ART/ (/ SA/ )/ )/ 等/ ./ 这些/ 近似/ 集合/ 调和/ 方法/ 都/ 存在/ 如下/ 可能/ :/ SB/ 中/ 元素/ y/ (/ y/ ∈/ {/ SB/ \/ SA/ }/ )/ 与/ 元素/ x/ (/ x/ ∈/ SA/ )/ 的/ Hash/ 值/ 或/ BF/ 表示/ 相同/ ,/ 从而/ B/ 错误/ 地/ 判断/ y/ ∈/ SA/ ,/ 以致/ 不能/ 找出/ SB/ \/ SA/ 的/ 所有/ 元素/ ./ 这些/ 近似/ 集合/ 调和/ 方法/ 本质/ 上/ 与/ 双/ CBF/ 法差集/ 查询/ 相同/ ,/ 存在/ 假/ 阴性/ ,/ 即/ 原本/ 属于/ SB/ \/ SA/ 的/ 元素/ 可能/ 被判/ 为/ 不/ 属于/ SB/ \/ SA/ ./ 本文/ 中将/ 使用/ BF/ 的/ 近似/ 集合/ 调和/ 方法/ 称为/ 基于/ BF/ 的/ 集合/ 调和/ (/ 图/ 14/ (/ a/ )/ )/ ./ Page176/ ./ 2.1/ Byers/ 集合/ 调和/ 法/ 知情/ 内容/ 分发/ 系统/ 的/ 知情/ 传输/ 过程/ 中/ 使用/ 的/ 集合/ 调和/ 方法/ 是/ 基于/ BF/ 的/ 集合/ 调和/ 方法/ ./ 尽管/ 其/ 调和/ 过程/ 只能/ 得到/ 近似/ 差集/ ,/ 但/ 由于/ 内容/ 分发/ 时/ 被/ 分发/ 文件/ 使用/ 纠/ 删码/ 编码/ ,/ 接收/ 节点/ 只/ 需/ 全部/ 编码/ 分组/ 的/ 足够/ 大/ 的/ 一个/ 子集/ 就/ 可/ 译码/ 得到/ 被/ 分发/ 文件/ 所有/ 内容/ ./ 以/ 对/ 等/ 节点/ A/ 、/ B/ 间/ 的/ 调和/ 为例/ ,/ 说明/ 知情/ 内容/ 分发/ 系统/ 中/ 使用/ 的/ 调和/ 过程/ 如下/ (/ 下称/ Byers/ 法/ )/ :/ 1/ ./ 服务器/ S/ 将/ 拟/ 分发/ 文件/ 用/ 纠/ 删码/ 编码/ ./ 按/ 初始/ 分发/ 树/ 的/ 层次/ 分发/ 至/ 对/ 等/ 节点/ A/ 、/ B/ ,/ 调和/ 前/ 各自/ 的/ 已/ 接收/ 编码/ 分组/ 集设/ 为/ SEA/ 、/ SEB/ ./ 2/ ./ 节点/ A/ 构造/ 犅/ 犉/ (/ SEA/ )/ m/ ,/ k/ ,/ 并/ 将/ 之/ 传送/ 给/ 节点/ B/ ./ 3/ ./ 节点/ B/ 使用/ 犅/ 犉/ (/ SEA/ )/ m/ ,/ k/ 查询/ SEB/ 中/ 不/ 属于/ SEA/ 的/ 编码/ 分组/ ,/ 并/ 返回/ 给/ 节点/ A/ ./ 由于/ 犅/ 犉/ (/ SEA/ )/ m/ ,/ k/ 固有/ 的/ 假/ 阳性/ ,/ 少量/ {/ SEB/ \/ SEA/ }/ 中/ 的/ 编码/ 分组/ 被/ 误判/ 为/ 属于/ SEA/ ,/ 从而/ 上述/ 查询/ 过程/ 只能/ 得到/ {/ SEB/ \/ SEA/ }/ 中/ 的/ 大部分/ 编码/ 分组/ ,/ 即/ 近似/ 差集/ {/ SEB/ \/ SEA/ }/ ./ 4/ ./ 节点/ A/ 将/ 节点/ B/ 返回/ 的/ 近似/ {/ SEB/ \/ SEA/ }/ 与/ SEA/ 合并/ ,/ 得到/ 近似/ {/ SEA/ ∪/ SEB/ }/ ./ 5/ ./ 节点/ A/ 对/ 近似/ {/ SEA/ ∪/ SEB/ }/ 进行/ 译码/ ,/ 得到/ 完整/ 的/ SA/ ∪/ SB/ ./ 6.2/ ./ 2/ 完全/ 集合/ 调和/ 本文/ 的/ CBF/ 减/ 运算/ 揭示/ 了/ 集合/ 调和/ 的/ 另/ 一/ 选择/ ./ 如果/ 节点/ A/ 传送/ SA/ 的/ CBF/ 表示/ (/ 即/ 犆/ 犅/ 犉/ (/ SA/ )/ m/ ,/ k/ )/ 给/ 节点/ B/ ,/ 节点/ B/ 使用/ CBF/ 减/ 运算/ 得到/ 的/ 过滤器/ 犆/ 犅/ 犉/ (/ SB/ )/ m/ ,/ k/ \/ 犆/ 犅/ 犉/ (/ SA/ )/ m/ ,/ k/ 查找/ SB/ \/ SA/ 中/ 元素/ ,/ 并/ 返回/ 给/ A/ ,/ 求解/ SA/ ∪/ SB/ ,/ 完成/ 集合/ 调和/ ./ 由于/ 在/ 使用/ 犆/ 犅/ 犉/ (/ SB/ )/ m/ ,/ k/ \/ 犆/ 犅/ 犉/ (/ SA/ )/ m/ ,/ k/ 查询/ 元素/ 是否/ 属于/ SB/ \/ SA/ 时/ 不/ 存在/ 假/ 阴性/ ,/ 但/ 具有/ 假/ 阳性/ ,/ 从而/ 节点/ B/ 找出/ 的/ 元素/ 中/ 包含/ SB/ \/ SA/ 中/ 全部/ 元素/ ,/ 亦/ 包含/ 少量/ SA/ ∩/ SB/ 中/ 元素/ (/ 其/ 数量/ 取决于/ 犆/ 犅/ 犉/ (/ SA/ )/ m/ ,/ k/ 的/ 查询/ 假/ 阳性/ )/ ,/ 本文/ 将/ 这/ 一/ 方法/ 称为/ 完全/ 集合/ 调和/ (/ CompleteSetReconciliation/ )/ ,/ 参见/ 图/ 14/ (/ b/ )/ ./ 由于/ CBF/ 用/ r/ 位/ 计数器/ 代替/ BF/ 的/ 二进制位/ ,/ 利用/ CBF/ 减/ 运算/ 的/ 完全/ 集合/ 调和/ 方法/ ,/ 与/ 使用/ BF/ 的/ 近似/ 集合/ 调和/ 方法/ 相比/ ,/ 前者/ 节点/ A/ 需/ 传输/ O/ (/ rm/ )/ 位/ 信息/ 给/ 节点/ B/ ,/ 而/ 后者/ 仅/ 需/ O/ (/ m/ )/ 位/ 信息/ ./ 设/ SA/ =/ SA/ =/ SB/ =/ n/ ,/ 当/ m/ // n/ 值/ 确定/ 时/ ,/ 为/ 保证/ SA/ ∩/ SB/ 中/ 元素/ 被/ 误判/ 为/ SB/ \/ SA/ 中/ 元素/ 的/ 可能性/ 最小/ ,/ 需取/ k/ =/ ln2/ ×/ (/ m/ // n/ )/ ./ 例/ ,/ 当/ m/ // n/ =/ 6/ ,/ k/ 取/ 4/ 时/ ,/ 犆/ 犅/ 犉/ (/ SA/ )/ m/ ,/ k/ 的/ fp/ 值/ 近似/ 最小/ ,/ 计算/ 得/ fp/ =/ 0.056/ ,/ 若/ r/ =/ 4/ ,/ 利用/ CBF/ 减/ 运算/ 的/ 集合/ 调和/ 方法/ ,/ 节点/ A/ 需/ 传输/ 给/ 节点/ B/ 的/ 消息/ 位数/ 等于/ 24n/ ,/ 由/ B/ 返还/ 的/ 元素/ 集合/ 中/ 包含/ 全部/ SB/ \/ SA/ 元素/ ,/ 亦/ 包含/ 不到/ 5.6/ %/ 的/ SA/ ∩/ SB/ 中/ 元素/ ./ 而/ 使用/ BF/ 的/ 近似/ 集合/ 调和/ 方法/ 仅/ 需/ 在/ 节点/ 间/ 传送/ 6n/ 位/ 消息/ ,/ 但/ 约/ 有/ 不到/ 5.6/ %/ (/ 取决于/ 犅/ 犉/ (/ SA/ )/ m/ ,/ k/ 的/ 查询/ 假/ 阳性/ )/ 的/ SB/ \/ SA/ 中/ 元素/ 被/ 遗漏/ ,/ 即/ 不能/ 得到/ 完整/ 的/ SA/ ∪/ SB/ ./ 与/ 用/ BF/ 完成/ 集合/ 调和/ 的/ 方法/ 比较/ ,/ 使用/ CBF/ 减/ 运算/ 完成/ 集合/ 调和/ 可以/ 找出/ SB/ \/ SA/ 中/ 所有/ 元素/ ,/ 不会/ 遗漏/ ,/ 从而/ 得到/ 完整/ 的/ SA/ ∪/ SB/ ;/ 而且/ CBF/ 可/ 支持/ 删除/ 操作/ ,/ 适用/ 于/ 更新/ 频繁/ 的/ 系统/ 环境/ ,/ 但/ 需比/ BF/ 法多/ 一次/ CBF/ 减/ 运算/ ,/ 需要/ r/ (/ 如/ r/ =/ 4/ )/ 倍/ 于/ BF/ 法/ 的/ 传输/ 消息/ 位数/ 及/ 节点/ 在/ 首次/ 与/ 服务器/ 或/ 对/ 等/ 节点/ 建立联系/ 时需/ 得到/ 犆/ 犅/ 犉/ (/ U/ )/ ./ 6.3/ 仿真/ 实验/ 6.3/ ./ 1/ 单机/ 环境/ 下/ 的/ 模拟实验/ 首先/ 考察/ 单机/ 环境/ 下/ 完全/ 集合/ 调和/ 算法/ 与/ By/ -/ ers/ 集合/ 调和/ 法/ 的/ 性能/ 表现/ ./ 为了/ 简化/ 实验/ 过程/ ,/ 我们/ 考虑/ 最/ 简单/ 的/ 场景/ :/ 用/ 随机/ 产生/ 的/ 32/ 位/ 无/ 符号/ 整数/ 模拟/ 文件/ 块/ ,/ 两对/ 等/ 节点/ 从/ 服务器/ S/ 下载/ 一定/ 数量/ 的/ 文件/ 块/ 后/ ,/ 停止/ 来自/ 服务器/ 的/ 下载/ ,/ 转而/ 进行/ 集合/ 调和/ ,/ 完成/ 整个/ 文件/ 所有/ 文件/ 块/ 的/ 获取/ 过程/ ./ 表/ 3/ 中/ 调和/ 时间/ 是/ 指/ 从/ A/ 节点/ 发送/ BF/ 或/ CBF/ 给/ B/ 节点/ 起/ ,/ 至/ A/ 节点/ 获得/ 完整/ 文件/ 所/ 经历/ 的/ 时间/ ./ 漏检/ 数是/ 指/ Byers/ 法/ 的/ 步/ 3/ 过程/ 中/ 被/ 漏检/ 的/ {/ SEB/ \/ SEA/ }/ 元素/ 个数/ ./ 冗余/ 是/ 指/ 完全/ 集合/ 调和/ 过程/ 中/ 第/ 4/ 步由/ B/ 返回/ 的/ SA/ ∩/ SB/ 元素/ 个数/ ./ 两/ 算法/ 共同/ 的/ 参数设置/ 如下/ :/ 根据/ 布鲁姆/ 过滤器/ 假/ 阳性/ 概率/ 的/ 变化趋势/ ,/ m/ // n/ 值/ 固定/ 的/ 情况/ 下/ ,/ 使得/ 布鲁姆/ 过滤器/ 假/ 阳性/ 概率/ 最小/ 的/ k/ 值/ 等于/ ln2/ ×/ (/ m/ // n/ )/ ./ 实验/ 中/ 我们/ 选取/ BF/ 或/ CBF/ 向量/ 长度/ m/ =/ 32768/ ,/ |/ SA/ |/ =/ |/ SB/ |/ =/ n/ =/ 4000/ ,/ Hash/ 函数/ 个数/ k/ =/ 6/ ,/ 分别/ 考察/ 不同/ 交集/ 规模/ 下/ 的/ 算法/ 调和/ 性能/ ./ 交集/ 规模/ SEA/ ∩/ SEB/ =/ SA/ ∩/ SB/ =/ {/ 500/ ,/ 1000/ ,/ 2000/ ,/ 3000/ }/ ./ Byers/ 法/ 其余/ 参数设置/ 如下/ :/ 纠/ 删码/ 使用/ 里德/ -/ 所罗门/ 码/ ,/ 即/ RS/ (/ nn/ ,/ kk/ ,/ mm/ )/ 码/ ,/ 其中/ ,/ kk/ 个/ 输入/ 符号/ (/ 每个/ 符号/ 有/ mm/ 个/ 比特/ 位/ )/ 被/ 编码/ 成/ nn/ (/ =/ 2mm/ -/ 1/ )/ 个/ 输出/ 符号/ ./ 实验/ 中/ ,/ 因/ 212/ </ kk/ </ 213/ ,/ 故/ mm/ 取值/ 13/ ,/ nn/ =/ 8191/ ,/ 即/ kk/ 个源/ 数据/ 用/ RS/ (/ 8191/ ,/ kk/ ,/ 13/ )/ 码/ 编码/ 成/ nn/ (/ =/ 8191/ )/ 个/ 编码数据/ ,/ 接收/ 节点/ A/ 和/ 发送/ 节点/ B/ 在/ 调和/ 前/ 拥有/ (/ nn/ +/ SEA/ ∩/ SEB/ )/ // 2/ (/ </ kk/ )/ 个/ 编码数据/ ,/ 其中/ SEA/ ∩/ SEB/ =/ nE0/ ./ 完全/ 集合/ 调和/ 法/ 的/ 其它/ 参数设置/ 如下/ :/ 全集/ 规模/ u/ =/ kk/ ,/ 计数器/ 位数/ r/ =/ 4/ ,/ 其中/ SA/ ∩/ SB/ =/ n0/ =/ nE0/ ./ 仿真/ 实验/ 机器配置/ 为/ Pentiumdual/ -/ core1/ ./ 7GHz/ ,/ 1GBDDR2/ ,/ WindowsXP/ ./ 对于/ 表/ 3/ 中/ 每个/ 实验/ 参数/ 的/ 组合/ ,/ 随机/ 产生/ Page18100/ 次/ 数据/ 集合/ ,/ 完成/ 100/ 次/ 实验/ ,/ 实验/ 结果/ 取/ 100/ 次/ 的/ 平均值/ ./ 表/ 3/ 中/ 第/ 3/ 列/ 、/ 第/ 8/ 列/ 分别/ 是/ Byers/ 法/ 和/ 完全/ 集合/ 调和/ 法/ 的/ 调和/ 时间/ ./ 表/ 3/ 单机/ 环境/ 完全/ 集合/ 调和/ 与/ Byers/ 法/ 性能/ 比较/ kknE05000300097494816555000300019060002000593570114060002000190/ ./ 777000100028726662970001000202.1575005001621433797500500202/ ./ 15/ 从表/ 3/ 中/ 发现/ :/ (/ 1/ )/ 当/ 交集/ 规模/ 取值/ 3000/ ,/ 源/ 数据/ 个数/ 为/ 5000/ 时/ ,/ Byers/ 法/ 的/ 调和/ 时间/ 为/ 974ms/ ,/ 而/ 完全/ 集合/ 调和/ 法/ 的/ 调和/ 时间/ 仅为/ Byers/ 法/ 的/ 1.93/ %/ ,/ 完全/ 集合/ 调和/ 法/ 的/ 调和/ 时间/ 远/ 小于/ Byers/ 法/ 的/ 调和/ 时间/ ./ (/ 2/ )/ 当/ 交集/ 规模较/ 小/ ,/ 源/ 数据/ 个数/ 较大/ 时/ ,/ Byers/ 法/ 的/ 调和/ 时间/ 较/ 小/ ,/ 如/ 最后/ 一行/ 所示/ ,/ 但/ 其/ 时间/ 值/ 仍然/ 是/ 完全/ 集合/ 调和/ 法/ 的/ 8/ 倍/ 左右/ ./ (/ 3/ )/ 完全/ 集合/ 调和/ 过程/ 中/ 第/ 4/ 步由/ B/ 返回/ 的/ SA/ ∩/ SB/ 元素/ 个数/ 极小/ ,/ 如/ 第/ 9/ 列/ 所示/ ,/ 在/ 上述/ 实验/ 过程/ 中/ 冗余/ 数最多/ 不/ 超过/ 6/ 个/ ./ 这/ 意味着/ 由于/ 冗余/ 造成/ 的/ 传输/ 代价/ 可以/ 忽略不计/ ,/ 在/ 实际/ 应用/ 中是/ 完全/ 可行/ 的/ ./ (/ 4/ )/ Byers/ 法/ 漏检/ 数/ 较大/ ,/ 为/ 379/ ~/ 1655/ ,/ 远大于/ 单独/ 使用/ 基于/ BF/ 的/ 集合/ 调和/ 法时/ 的/ 漏检/ 期望值/ (/ 1/ -/ e/ -/ k/ |/ SA/ |/ // m/ )/ k/ / |/ SA/ \/ SB/ |/ ./ 这是/ 由于/ Byers/ 法在/ 使用/ RS/ 码/ 编码/ 时/ ,/ (/ nn/ -/ kk/ )/ 个/ 校验/ 数据/ 中有/ 很多/ 与/ SB/ \/ SA/ 中/ 数据/ 相同/ ,/ 造成/ 部分/ SB/ \/ SA/ 元素/ 已/ 在/ 犅/ 犉/ (/ SEA/ )/ m/ ,/ k/ 中/ 得到/ 表示/ ,/ 从而/ 导致/ 查询/ 时/ 这些/ 差集/ 元素/ 被/ 认为/ 不/ 属于/ SB/ \/ SA/ ,/ 漏检/ 数比/ 期望值/ 大得/ 较/ 多/ ./ 被/ 漏检/ 的/ 差集/ 元素/ 即为/ RS/ 码要/ 纠正/ 的/ 删除/ 数据/ ,/ 删除/ 数据/ 数目/ 越大/ ,/ 译码/ 所/ 需/ 时间/ 越长/ ./ 漏检/ 数大/ 直接/ 导致/ Byers/ 法/ 译码/ 时间/ 较长/ ./ 两/ 算法/ 调和/ 时间/ 出现/ 上述/ 显著/ 差异/ 的/ 原因/ 是/ 由于/ Byers/ 法/ 必须/ 使用/ 纠/ 删码/ 配合/ 基于/ BF/ 的/ 集合/ 调和/ 法/ ,/ 才能/ 调和/ 得到/ 完整/ 的/ 文件/ ,/ 纠/ 删码/ 的/ 译码/ 过程/ 非常/ 耗时/ ,/ 为/ 143ms/ ~/ 948ms/ ,/ 译码/ 时间/ 占/ 整个/ 调和/ 时间/ 的/ 88/ %/ ~/ 97/ %/ ./ 而/ 完全/ 集合/ 调和/ 法仅/ 需/ 简单/ 的/ CBF/ 减/ 运算/ 及/ 元素/ 查询/ ,/ 费时/ 很少/ 即能/ 完成/ 调和/ ./ 6.3/ ./ 2P2P/ 环境/ 下/ 的/ 仿真/ 实验/ 为/ 进一步/ 验证/ 完全/ 集合/ 调和/ 算法/ 的/ 性能/ ,/ 进行/ 系统/ 仿真/ 实验/ ,/ 将/ 完全/ 集合/ 调和/ 用于/ 知情/ 内容/ 分发/ 的/ 知情/ 传输/ 过程/ ,/ 并/ 将/ 之/ 与/ Byers/ 法/ 进行/ 比较/ ./ 该/ 部分/ 实验/ 的/ 参数设置/ :/ 除了/ 使用/ P2P/ 环境/ 外/ ,/ 其余/ 参数/ 与/ 单机/ 环境/ 下/ 的/ 模拟实验/ 是/ 相同/ 的/ ./ 仿真/ 实验/ 使用/ 的/ P2P/ 结构/ 如下/ :/ 基于/ 随机/ 产生/ 的/ 物理/ 网络/ 建立/ Chord/ 覆盖网/ [/ 23/ ]/ ./ Chord/ 底层/ 的/ 物理/ 网络/ 采用/ Transit/ -/ stub/ 模型/ [/ 24/ ]/ ,/ 路由器/ 数量/ 为/ 5050/ ,/ 物理/ 链路/ 25168/ 条/ ,/ 链路/ 平均/ 延迟/ 为/ 40.5/ ms/ ./ Chord/ 网络/ 中/ P2P/ 结点/ 数为/ 200/ ./ 每个/ P2P/ 结点/ 连/ 在/ 一个/ 随机/ 路由器/ 上/ ./ 调和/ 时间/ 统计/ 结果/ 如表/ 4/ 所示/ ./ 由表/ 4/ 结果/ 可以/ 看出/ ,/ 与/ Byers/ 法/ 相比/ ,/ 完全/ 集合/ 调和/ 法/ 同样/ 表现/ 出/ 了/ 时间/ 性能/ 上/ 的/ 优势/ ./ 表/ 4P2P/ 环境/ 完全/ 集合/ 调和/ 与/ Byers/ 法/ 调和/ 时间/ kknE0/ 调和/ 时间/ // ms500030001601850003000151776000200015705600020001517970001000154367000100015181750050015323750050015187/ 在/ 知情/ 内容/ 分发/ 系统/ 中/ ,/ 节点/ 间/ 使用/ 基于/ BF/ 的/ 集合/ 调和/ 法/ 进行/ 知情/ 传输/ ,/ 只能/ 得到/ 部分/ 相异/ 分组/ ,/ 需/ 配合/ 使用/ 纠/ 删码/ 技术/ 才能/ 恢复/ 完整/ 文件/ ./ 拟/ 分发/ 文件/ 在/ 传输/ 前/ 需/ 使用/ 纠/ 删码/ 对/ 分组/ 进行/ 编码/ ,/ 各对/ 等/ 节点/ 在/ 接收/ 到/ 一定/ 数量/ 的/ 编码/ 分组/ 后/ 需/ 进行/ 译码/ 才能/ 得到/ 完整/ 文件/ ,/ 编码/ 和/ 译码/ 过程/ (/ 尤其/ 是/ 译码/ )/ 对于/ 较大/ 的/ 文件/ 来说/ 是/ 一笔/ 不小/ 的/ 开销/ ./ 此时/ ,/ 若/ 改用/ 本文/ 的/ 完全/ 集合/ 调和/ 法/ 完成/ 对/ 等/ 节点/ 之间/ 的/ 知情/ 传输/ ,/ 则/ 不/ 需/ 费时/ 的/ 编码/ 和/ 译码/ 过程/ ,/ 时间/ 效率/ 很/ 高/ ,/ 且/ 不/ 需/ 借助/ 其它/ 技术/ 即能/ 调和/ 所有/ 相异/ 分组/ ./ 7/ 小结/ 与/ 研究/ 展望/ 本文/ 直接/ 从/ CBF/ 计数器/ 向量/ 的/ 加/ 、/ 减及/ 求/ 最小值/ 运算/ 出发/ ,/ 探讨/ 了/ CBF/ 代数/ 运算/ 的/ 相关/ 性质/ ./ 理论/ 分析/ 和/ 实验/ 结果表明/ ,/ CBF/ 代数/ 运算/ (/ 犆/ 犅/ 犉/ (/ S1/ )/ m/ ,/ kX/ 犆/ 犅/ 犉/ (/ S2/ )/ m/ ,/ k/ )/ 不会/ 出现/ 假/ 阴性/ ,/ 与/ 犆/ 犅/ 犉/ (/ S1XS2/ )/ m/ ,/ k/ 相比/ ,/ 其假/ 阳性/ 概率/ 不变/ 或/ 略有/ 提高/ ,/ CBF/ 代数/ 运算/ 与/ 犆/ 犅/ 犉/ (/ S1XS2/ )/ m/ ,/ k/ 之间/ 的/ 一致性/ 程度较高/ ,/ 能够/ 支持/ 集合/ 并集/ 、/ 交集/ 、/ 补集/ 、/ 差集/ 及/ 对称/ 差/ 的/ 成员/ 查询/ ;/ 利用/ CBF/ 代数/ 运算/ 得到/ 的/ 过滤器/ 查询/ 元素/ 是否/ 属于/ 补集/ 、/ 差集/ 及/ 对称/ 差/ ,/ 与/ 使用/ 两个/ 原始/ 的/ 计数/ 布鲁姆/ 过滤器/ 进行/ 查询/ 的/ 方法/ 相比/ ,/ 不/ 存在/ 假/ 阴性/ ,/ 空间/ 效率/ 能/ 提高/ 一倍/ ,/ 时间/ 效率/ 亦/ 能/ 显著/ 地/ 得到/ 改善/ ./ 本文/ 以/ CBF/ 代数/ 运算/ 中/ 的/ 减/ 运算/ 为例/ ,/ 成功/ 地/ 将/ 之/ 应用/ 于/ 分布式/ 文件/ 分发/ 系统/ ,/ 表现/ 出/ 了/ 极为/ 卓越/ 的/ 调和/ 效率/ ./ 本文/ 工作/ 说明/ :/ 使用/ 本文/ 的/ CBF/ 代数/ 运/ Page19/ 算/ ,/ 可以/ 简化/ 利用/ 计数/ 布鲁姆/ 过滤器/ 进行/ 的/ 系统/ 设计/ ,/ 可/ 用于/ 大多数/ 计数/ 布鲁姆/ 过滤器/ 的/ 应用/ 场合/ ,/ 为/ 优化/ 计数/ 布鲁姆/ 过滤器/ 应用/ 提供/ 了/ 新/ 的/ 思路/ ./ 进一步/ 探讨/ 不同/ 长度/ 、/ 不同/ Hash/ 函数/ 下/ 的/ 非/ 同源/ 计数/ 布鲁姆/ 过滤器/ 如何/ 进行/ 相关/ 代数/ 运算/ ,/ 成为/ 作者/ 的/ 进一步/ 研究/ 工作/ ./ 另/ 一个/ 重要/ 的/ 工作/ 展望/ 是/ 将/ 本文/ 的/ 研究成果/ 进一步/ 应用/ 于/ 实际/ 分布式/ 网络系统/ 中/ ,/ 在/ 各/ 应用领域/ 优化/ CBF/ 代数/ 运算/ 的/ 性能/ 等/ ./ 

