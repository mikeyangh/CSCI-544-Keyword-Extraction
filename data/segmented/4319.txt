Page1/ 一种/ 基于/ 冲突/ 的/ 增量/ 诊断/ 方法/ 王晓宇/ 欧阳/ 丹彤/ 赵剑/ (/ 吉林大学/ 计算机科学/ 与/ 技术/ 学院/ 长春/ 130012/ )/ (/ 符号计算/ 与/ 知识/ 工程/ 教育部/ 重点/ 实验室/ 长春/ 130012/ )/ 摘要/ 增量/ 诊断/ 是/ 一种/ 在/ 离散/ 事件/ 系统/ 中/ 进行/ 诊断/ 的/ 重要/ 方法/ ,/ 因/ 其/ 能够/ 根据/ 新/ 观测/ 和/ 原有/ 诊断/ 的/ 结果/ 进行/ 进一步/ 诊断/ ,/ 在/ 长时间/ 复杂/ 行为/ 的/ 系统/ 上/ 有着/ 良好/ 的/ 运行/ 效率/ 和/ 诊断/ 特性/ ./ 文章/ 提出/ 了/ 一种/ 带有/ 回溯/ 的/ 增量/ 诊断/ 方法/ ./ 在/ 离线/ 定义/ 的/ 自动机/ 链/ 模型/ 上/ 根据/ 在线/ 观测/ 进行/ 局部/ 诊断/ ,/ 用/ 轨迹/ 概率/ 选出/ 最/ 可能/ 诊断/ 的/ 同时/ ,/ 保存/ 可行/ 的/ 候选/ 诊断/ 作为/ 回溯/ 点/ ./ 若/ 增量/ 过程/ 产生/ 冲突/ ,/ 则/ 回溯/ 并/ 根据/ 新/ 观测/ 动态/ 重新/ 对/ 候选/ 诊断/ 选择/ 排序/ ./ 既/ 避免/ 了/ 不/ 完全/ 可/ 诊断/ 性/ 条件/ 下/ ,/ 增量/ 诊断/ 所/ 面临/ 的/ 多/ 候选/ 选择/ ,/ 亦/ 避免/ 了/ 由于/ 仅/ 保留/ 最优/ 结果/ 导致/ 的/ 重复/ 诊断/ ./ 关键词/ 基于/ 模型/ 诊断/ ;/ 动态/ 诊断/ ;/ 增量/ 方法/ ;/ 自动机/ 链/ ;/ 基于/ 冲突/ 1/ 引言/ 故障诊断/ 是/ 现代/ 航空航天/ 业/ 、/ 车辆/ 工业/ 及/ 大型/ Page2/ 部分/ 的/ 一致性/ [/ 5/ ]/ ,/ 从而/ 得出/ 是否/ 存在/ 故障/ 的/ 结论/ ,/ 如果/ 故障/ 存在/ ,/ 则/ 给出/ 故障/ 的/ 原因/ [/ 6/ ]/ ./ 基于/ 模型/ 的/ 诊断/ 根据/ 系统/ 的/ 行为/ 建立/ 模型/ [/ 7/ -/ 8/ ]/ ,/ 随着/ 系统/ 的/ 不断更新/ ,/ 功能/ 的/ 不断/ 增强/ ,/ 与/ 之/ 对应/ 的/ 模型/ 规模/ 也/ 随之/ 急剧/ 扩大/ ,/ 导致/ 基于/ 模型/ 诊断/ 方法/ 在/ 建模/ 、/ 模型/ 修改/ 以及/ 实时/ 监测/ 同步/ 等/ 方面/ 的/ 难度/ 不断/ 增加/ ./ 为了/ 降低/ 诊断/ 的/ 难度/ ,/ 各/ 研究/ 机构/ 及/ 学者/ 在/ 降低/ 系统/ 规模/ 、/ 增强/ 诊断/ 效率/ 上/ 提出/ 了/ 多种/ 方法/ ,/ 如/ 分层/ 诊断/ [/ 1/ ,/ 9/ ]/ 、/ 分布式/ 诊断/ [/ 3/ ,/ 10/ ]/ 等/ ./ 分层/ 诊断/ 的/ 优点/ 在于/ 将/ 诊断/ 空间/ 缩小/ 到/ 某/ 一/ 层次/ 的/ 抽象/ 范围/ 内/ ,/ 缩小/ 了/ 诊断/ 空间/ [/ 11/ ]/ ./ 分布式系统/ 诊断/ 则/ 将/ 这种/ 诊断/ 空间/ 降低/ 到/ 子系统/ 规模/ 甚至/ 部件/ 规模/ ./ 而/ 二者/ 的/ 缺点/ 在于/ 每次/ 在线/ 得到/ 观测/ 序列/ 之后/ 均/ 需要/ 从/ 初始状态/ 开始/ 离线/ 计算/ 诊断/ ,/ 多数/ 时间/ 在/ 扩展/ 冗余/ 的/ 转移/ 函数/ ,/ 这种/ 冗余/ 是/ 不必要/ 且/ 可以/ 消除/ 的/ ./ 增量/ 诊断/ 可以/ 解决/ 由于/ 每次/ 从/ 初始状态/ 开始/ 同步/ 带来/ 的/ 诊断/ 时间/ 和/ 空间/ 的/ 浪费/ ,/ 在/ 由/ 观测/ 窗口/ 覆盖/ 的/ 系统/ 模型/ 上/ [/ 12/ -/ 13/ ]/ ,/ 保留/ 当前/ 诊断/ 结果/ ,/ 当新/ 的/ 观测/ 窗口/ 到来/ 时/ ,/ 诊断/ 由前/ 一次/ 的/ 诊断/ 结果/ 和/ 当前/ 的/ 新/ 观测/ 序列/ 共同/ 推理/ 得出/ [/ 14/ ]/ ./ 因此/ 将/ 诊断/ 空间/ 限制/ 在/ 每个/ 观测/ 窗口/ 覆盖/ 的/ 系统/ 模型/ 范围/ 内/ ,/ 有效/ 地/ 缩减/ 诊断/ 空间/ [/ 15/ ]/ ./ 增量/ 方法/ 的/ 诊断/ 时间/ 和/ 空间/ 依赖于/ 系统/ 的/ 可/ 诊断/ 性/ ./ 若/ 系统/ 的/ 可/ 诊断/ 性较/ 低/ ,/ 产生/ 的/ 候选/ 诊断/ 会/ 随之/ 增加/ ./ 在/ 多个/ 候选/ 诊断/ 结果/ 情况/ 下/ ,/ 增量/ 计算/ 的/ 时间/ 与/ 空间/ 将/ 以/ 指数/ 级/ 增加/ ,/ 最坏/ 将/ 成为/ 全局/ 诊断/ ./ 因此/ 产生/ 了/ 对/ 候选/ 诊断/ 的/ 选择/ 问题/ 和/ 增量/ 可/ 诊断/ 性/ 问题/ ./ 文献/ [/ 15/ -/ 16/ ]/ 建立/ 了/ 良好/ 的/ 增量/ 诊断模型/ :/ 自动机/ 链/ ./ 在/ 自动机/ 链/ 模型/ 上/ ,/ 各自/ 动机/ 模型/ 的/ 边界/ 是/ 严格/ 定义/ 的/ ,/ 令/ 观测/ 窗口/ 很/ 容易/ 被/ 对应/ ,/ 用以/ 根据/ 当前/ 的/ 观测/ 窗口/ 在/ 自动机/ 链中/ 的/ 某/ 一/ 特定/ 自动机/ 上/ 进行/ 诊断/ ./ 观测/ 窗口/ 是/ 系统/ 短期内/ 的/ 观测/ 序列/ ,/ 更/ 接近/ 连续/ 系统诊断/ ./ 而/ 窗口/ 长度/ 逐渐/ 趋近/ 于/ 单一/ 事件/ 时/ ,/ 离散/ 事件/ 系统/ 中/ 的/ 诊断/ 可以/ 逐渐/ 趋近/ 于/ 连续/ 系统/ ./ 文献/ [/ 17/ ]/ 在/ 自动机/ 链/ 模型/ 的/ 基础/ 上/ ,/ 以/ 诊断/ 结果/ 的/ 完备/ 性为/ 代价/ 取得/ 了/ 进一步/ 的/ 时间/ 优化/ ./ 虽然/ 诊断/ 结果/ 不/ 完备/ ,/ 甚至/ 有/ 可能/ 丢失/ 诊断/ 解/ ,/ 但是/ 在/ 诊断/ 时间/ 上/ 有/ 数量级/ 幅度/ 的/ 降低/ ./ 通过/ 文中/ 实验/ 可知/ ,/ 当/ 到达/ 较/ 多/ 的/ 观测/ 窗口/ 时/ ,/ 诊断/ 解/ 丢失/ 的/ 情况/ 也/ 会/ 随之/ 减少/ ./ 并且/ ,/ 根据/ 文献/ [/ 18/ -/ 19/ ]/ 中/ 提出/ 的/ 方法/ 和/ 性质/ ,/ 在/ 观测/ 窗口/ 足够/ 长时/ ,/ 观测/ 的/ 及时/ 序/ 的/ 正确性/ 能够/ 被/ 保证/ ./ 本文/ 在/ 自动机/ 链/ 模型/ 基础/ 上用/ 增量/ 方法/ 进行/ 诊断/ ,/ 通过/ 保留/ 候选/ 诊断/ 的/ 方法/ 确保/ 诊断/ 的/ 完备/ 性/ ./ 并且/ 定义/ 轨迹/ 概率/ 对/ 候选/ 诊断/ 进行/ 排序/ ,/ 在/ 诊断/ 时间/ 上/ 与/ 文献/ [/ 17/ ]/ 的/ 量级/ 接近/ ,/ 同时/ 克服/ 了/ 以/ 诊断/ 完备/ 性/ 作为/ 代价/ 带来/ 的/ 问题/ ./ 本文/ 第/ 2/ 节将/ 详细/ 介绍/ 增量/ 诊断/ 的/ 模型/ 基础/ 框架/ ;/ 第/ 3/ 节/ 提出/ 在/ 自动机/ 链/ 模型/ 上/ 的/ 增量/ 诊断/ 方法/ ;/ 第/ 4/ 节/ 给出/ 关于/ 窗口/ 长度/ 、/ 诊断/ 完备/ 性及/ 诊断/ 时间/ 的/ 一系列/ 定理/ 并/ 加以/ 证明/ ;/ 第/ 5/ 节将/ 给出/ 实验/ 结果/ 及/ 分析/ ./ 2/ 增量/ 诊断/ 方法/ 模型/ 框架/ 2.1/ 问题/ 描述/ 机/ 进行/ 描述/ ./ 离散/ 事件/ 系统/ 的/ 基于/ 模型/ 诊断/ 中/ ,/ 模型/ 用/ 自动/ 定义/ 1/ ./ 自动机/ [/ 3/ ]/ ./ 自动机/ 定义/ 为/ 一个/ 五元/ 组/ :/ A/ =/ (/ S/ ,/ E/ ,/ T/ ,/ I/ ,/ F/ )/ ./ 其中/ S/ 是/ 状态/ 集合/ ;/ E/ 是/ 事件/ 集合/ ;/ T/ 是/ 转移/ 集合/ ,/ 以/ 笛卡尔/ 乘积/ 表示/ :/ T/ / S/ ×/ E/ ×/ S/ ;/ I/ 是/ 初始状态/ 集合/ ,/ I/ / S/ ;/ F/ 是/ 终止/ 状态/ 集合/ ,/ F/ / S/ ./ 自动机/ 的/ 定义/ 比较/ 广泛/ ,/ 既/ 可以/ 应用/ 于/ 整体/ 系统/ 的/ 建模/ ,/ 也/ 可以/ 用于/ 子系统/ 模型/ 的/ 建立/ ,/ 甚至/ 可以/ 详细/ 至/ 部件/ 层/ 对/ 某/ 部件/ 建立/ 模型/ ./ 每个/ 部件/ 模型/ 与/ 其它/ 部件/ 模型/ 的/ 自动机/ 定义/ 需要/ 有/ 严格/ 的/ 区分/ ,/ 但是/ 部件/ 模型/ 事件/ 集合/ 之间/ 和/ 状态/ 集合/ 的/ 交集/ 未必/ 为空/ ,/ 以便/ 于/ 部件/ 交互/ 定义/ 接口/ ./ 如图/ 1/ 是/ 两个/ 部件/ 的/ 自动机/ 模型/ ,/ 组成/ 一个/ 简单/ 的/ 自动机/ 链/ ,/ 状态/ 集合/ 交集/ 不为/ 空/ ./ 自动机/ A1/ 的/ 终止/ 状态/ 与/ 自动机/ A2/ 的/ 初始状态/ 相同/ ./ 为了/ 严格/ 定义/ 这种/ 边界/ 状态/ 相同/ 的/ 自动机/ ,/ 在/ 增量/ 诊断/ 中/ 对/ 增量/ 结果/ 做出/ 区分/ ,/ 给出/ 轨迹/ 和/ 自动机/ 链/ 的/ 定义/ ./ 定义/ 2/ ./ 轨迹/ [/ 15/ ]/ ./ 自动机/ A/ 中若/ 存在/ 状态/ 和/ Page3/ 事件/ 序列/ q/ =/ 〈/ s0/ ,/ e1/ ,/ s1/ ,/ e2/ …/ em/ ,/ sm/ 〉/ ./ 且/ si/ ∈/ S/ ,/ ei/ ∈/ E/ ,/ / 〈/ si/ -/ 1/ ,/ ei/ ,/ si/ 〉/ ∈/ T/ ./ 称/ q/ 为/ s0/ 到/ sm/ 的/ 一条/ 轨迹/ ./ 轨迹/ 是/ 在/ 自动机/ 内/ 从/ 初始状态/ 到/ 某/ 一/ 状态/ 的/ 事件/ 触发/ 序列/ ./ 状态/ 改变/ 由/ 事件驱动/ ,/ 每个/ 事件/ 发生/ 的/ 时候/ 会/ 改变/ 状态/ ,/ 因此/ 轨迹/ 记录/ 的/ 是/ 事件/ 发生/ 的/ 顺序/ 和/ 经由/ 的/ 状态/ ./ 定义/ 3/ ./ 自动机/ 链/ [/ 15/ ]/ ./ 设有/ 一组/ 自动机/ ,/ A1/ ,/ A2/ ,/ …/ ,/ An/ ,/ i/ ∈/ [/ 1/ ,/ n/ ]/ ,/ Ai/ =/ (/ Si/ ,/ Ei/ ,/ Ti/ ,/ Ii/ ,/ Fi/ )/ ./ 如果/ 该组/ 自动机/ 符合/ 如下/ 规则/ :/ (/ 1/ )/ / i/ ,/ j/ ∈/ [/ 1/ ,/ n/ ]/ ,/ Ei/ =/ Ej/ ;/ (/ 2/ )/ / i/ ,/ j/ ∈/ [/ 1/ ,/ n/ ]/ ,/ j/ >/ i/ ,/ / s/ ∈/ Si/ ∩/ Sj/ / s/ ∈/ Fi/ ∧/ s/ ∈/ Ii/ +/ 1/ ;/ (/ 3/ )/ / i/ ,/ j/ ∈/ [/ 1/ ,/ n/ ]/ ,/ / s/ ,/ s/ ,/ 若/ {/ s/ ,/ s/ }/ / Si/ ∩/ Sj/ ,/ 且/ q/ 是/ Ai/ 中/ 从/ s/ 到/ s/ 的/ 轨迹/ ,/ 则/ q/ 一定/ 是/ Aj/ 中/ 从/ s/ 到/ s/ 的/ 轨迹/ ./ 在/ 自动机/ 链/ 的/ 模型/ 结构/ 下/ ,/ 增量/ 诊断/ 可以/ 在/ 观测/ 窗口/ 到达/ 时/ ,/ 在/ 自动机/ 链中/ 相应/ 的/ 自动机/ 上/ 进行/ 诊断/ [/ 20/ ]/ ,/ 而/ 不是/ 全局/ 诊断/ ./ 而/ 得到/ 的/ 诊断/ 结果/ 就/ 可以/ 作为/ 下次/ 诊断/ 的/ 初始状态/ ,/ 当有/ 新/ 的/ 观测/ 窗口/ 到达/ 时/ ,/ 以该/ 初始状态/ 为/ 开端/ ,/ 在/ 自动机/ 链中/ 的/ 下/ 一个/ 自动机/ 中/ 进行/ 诊断/ ./ 故称/ 用/ 前次/ 诊断/ 结果/ 和/ 本次/ 观测/ 窗口/ 的/ 诊断/ 方法/ 为/ 增量/ 诊断/ ./ 增量/ 诊断/ 的/ 诊断/ 空间/ 一般/ 较/ 小/ ,/ 是/ 系统/ 的/ 一个/ 观测/ 窗口/ 所/ 能/ 覆盖/ 的/ 范围/ ./ 以图/ 1/ 为例/ :/ 当/ 观测/ 窗口/ 〈/ o2o4/ 〉/ 到达/ 时/ ,/ 诊断/ 提取/ 出/ 一条/ 轨迹/ :/ 〈/ s0o2s2e2s5o4s7/ 〉/ 为/ 本次/ 的/ 诊断/ 结果/ ,/ 终止/ 状态/ s7/ 可以/ 作为/ 下/ 一次/ 诊断/ 的/ 初始状态/ ./ 观测/ 窗口/ 〈/ o5o8/ 〉/ 随后/ 到达/ 时/ ,/ 可以/ 从/ 状态/ s7/ 开始/ ,/ 继续/ 诊断/ ,/ 得到/ 轨迹/ 〈/ s7o5s9e3s13o8s15/ 〉/ 作为/ 本次/ 诊断/ 结果/ ./ 而/ 当/ 需要/ 一条/ 全局/ 诊断/ 的/ 轨迹/ 时/ ,/ 多次/ 诊断/ 结果/ 可以/ 直接/ 拼接/ 成为/ 一条/ 全局/ 的/ 轨迹/ 〈/ s0o2s2e2s5o4s7o5s9e3s13o8s15/ 〉/ 作为/ 总体/ 的/ 诊断/ 结果/ ./ 但是/ 在/ 增量/ 诊断/ 中常会/ 存在/ 如下/ 的/ 一个/ 问题/ :/ 当有/ 观测/ 窗口/ 〈/ o1o3/ 〉/ 时/ ,/ 诊断/ 将/ 提取/ 出/ 两条/ 候选/ 轨迹/ 〈/ s0o1s1e1s4o3s7/ 〉/ 和/ 〈/ s0o1s1f1s3o3s6/ 〉/ ./ 当/ 没有/ 领域/ 知识/ 或/ 更/ 多/ 传感器/ 来/ 进行/ 探测/ 时/ ,/ 这/ 两条/ 轨迹/ 均/ 是/ 候选/ 诊断/ 结果/ ./ 当/ 观测/ 到/ 〈/ o6/ 〉/ 时/ ,/ 允许/ 观测/ 事件/ 缺失/ 时/ ,/ 将会/ 提取/ 出/ 4/ 条/ 轨迹/ ./ 若/ 模型/ 的/ 可/ 诊断/ 性/ 更/ 低时/ ,/ 也就是说/ ,/ 存在/ 更/ 多/ 有/ 相同/ 观测/ 窗口/ 的/ 轨迹/ 时/ ,/ 这个/ 结果/ 会以/ 指数/ 级/ 增长/ 得/ 更/ 快/ ./ 文献/ [/ 17/ ]/ 提出/ 了/ 候选/ 诊断/ 的/ 选择/ 方法/ ,/ 当有/ 多个/ 候选/ 诊断/ 时/ ,/ 选取/ 其中/ 的/ 一个/ 作为/ 唯一/ 的/ 诊断/ 结果/ ,/ 在/ 这个/ 结果/ 上/ 进行/ 增量/ 的/ 诊断/ ,/ 用以/ 保证/ 增量/ 是/ 线性/ 地/ 进行/ 而/ 非/ 指数/ 级/ ./ 虽然/ 这种/ 诊断/ 是/ 不/ 完备/ 的/ ,/ 但是/ 实验/ 结果/ 可以/ 表明/ ,/ 当/ 观测/ 窗口/ 累加/ 到/ 一定/ 程度/ 时/ ,/ 与/ 前面/ 错误/ 的/ 候选/ 诊断/ 的/ 选择/ 会/ 产生/ 不/ 一致/ ./ 如图/ 1/ ,/ 当/ 产生/ 两个/ 候选/ 诊断/ ,/ 选择/ 〈/ s0o1f1s3o3s6/ 〉/ 作为/ 候选/ 诊断/ ,/ 增量/ 窗口/ 是/ 〈/ o5o8/ 〉/ 时/ ,/ 就/ 会/ 产生/ 不/ 一致/ ./ 本文/ 在/ 上述/ 工作/ 的/ 基础/ 上/ ,/ 提出/ 了/ 一种/ 基于/ 冲突/ 的/ 诊断/ 方法/ ./ 用/ 轨迹/ 概率/ 来/ 确定/ 增量/ 诊断/ 过程/ 中/ 每次/ 增量/ 计算/ 的/ “/ 最/ 可能/ 状态/ ”/ ,/ 在/ 新/ 观测/ 窗口/ 到来/ 时/ 判定/ 冲突/ 并/ 进行/ 增量/ 诊断/ 轨迹/ 提取/ ,/ 相对/ 于/ 含有/ 多条/ 诊断/ 轨迹/ 和/ 多个/ 可能/ 终止/ 状态/ 的/ 增量/ 诊断/ 方法/ ,/ 降低/ 了/ 诊断/ 的/ 时间/ 复杂度/ ./ 同时/ 保留/ 其余/ 可能/ 终止/ 状态/ ,/ 避免/ 推导/ 错误/ 产生/ 完全/ 回溯/ 带来/ 的/ 高/ 时间/ 及/ 高/ 空间/ 复杂度/ ./ 在/ 回溯/ 过程/ 中/ 根据/ 当前/ 新/ 观测/ 序列/ 带来/ 的/ 信息/ ,/ 用/ 后验/ 概率/ 方法/ 重新/ 调整/ 诊断/ 轨迹/ ,/ 修改/ 部分/ “/ 最/ 可能/ 状态/ ”/ ./ 该/ 方法/ 避免/ 了/ 单纯/ 自动机/ 链/ 诊断/ 时多/ 诊断/ 轨迹/ 和/ 终止/ 状态/ 带来/ 的/ 指数/ 级/ 空间/ 和/ 时间/ 消耗/ ,/ 改进/ 了/ 回溯/ 时/ 在/ 整个/ 状态/ 空间/ 中/ 重新/ 寻找/ 诊断/ 的/ 方法/ ./ 同时/ 消除/ 了/ 时间/ 窗口/ 对/ 诊断/ 结果/ 完备/ 性/ 的/ 影响/ ,/ 使/ 诊断/ 结果/ 完备/ ./ 2.2/ 模型/ 定义/ 在/ 自动机/ 链/ 的/ 基本/ 定义/ 上/ ,/ 为了/ 计算/ 诊断/ 冲突/ ,/ 并/ 选择/ 诊断/ 结果/ ,/ 在/ 自动机/ 模型/ 上/ 加入/ 概率/ 信息/ ,/ 因此/ 引入/ 了/ 概率/ 自动机/ 的/ 定义/ ./ 定义/ 4/ ./ 概率/ 自动机/ ./ 定义/ 概率/ 自动机/ 是/ 一个/ 六元/ 组/ AP/ =/ (/ S/ ,/ E/ ,/ P/ ,/ T/ ,/ I/ ,/ F/ )/ ./ 其中/ P/ 是/ 事件/ 概率/ ,/ P/ =/ {/ P/ (/ e/ )/ |/ e/ ∈/ E/ }/ ∪/ {/ P/ (/ e/ |/ e/ )/ |/ e/ ,/ e/ ∈/ E/ ∧/ π/ (/ e/ )/ =/ e/ }/ ./ 其中/ π/ (/ e/ )/ 是/ e/ 在/ 自动机/ 模型/ 中/ 的/ 前驱/ 事件/ ./ 其余/ 集合/ 定义/ 与/ 定义/ 1/ 相同/ ./ 定义/ 5/ ./ 观测/ 窗口/ ./ 定义/ Wi/ =/ 〈/ o0/ ,/ o1/ ,/ …/ ,/ on/ 〉/ 为/ 一个/ 观测/ 窗口/ ,/ 且/ / oi/ ∈/ Wi/ ,/ oi/ ∈/ E/ ./ 即/ 所有/ 在/ 一个/ 观测/ 窗口/ 中/ 的/ 可/ 观测/ 事件/ ,/ 限制/ 在/ 一个/ 自动机/ 范围/ 内/ ./ 当然/ ,/ 在/ 实际/ 的/ 自动机/ 模型/ 中/ ,/ 观测/ 窗口/ 未必/ 恰好/ 包含/ 模型/ 中/ 的/ 自动机/ ./ 为了/ 化简/ 问题/ ,/ 假设/ 观测/ 窗口/ 与/ 模型/ 自动机/ 中/ 包含/ 的/ 可/ 观测/ 事件/ 是/ 等/ 长/ 的/ ./ 定义/ 6/ ./ 相容/ 轨迹/ ./ 若/ 自动机/ Ai/ 是/ 自动机/ 链中/ 的/ 一个/ 自动机/ ./ 若/ 存在/ 轨迹/ σ/ =/ 〈/ s0/ ,/ e1/ ,/ s1/ ,/ e2/ …/ em/ ,/ sm/ 〉/ ,/ 其中/ s0/ ∈/ Ii/ ,/ sj/ ∈/ Si/ ./ 若/ 事件/ 序列/ 〈/ ej/ ,/ ej/ +/ k/ ,/ ej/ +/ k/ +/ m/ ,/ …/ 〉/ 是/ 轨迹/ σ/ 中/ 存在/ 的/ 有序/ 事件/ ,/ 并且/ 与/ 观测/ 窗口/ Wt/ 中/ 的/ 观测/ 事件/ 相同/ 且/ 顺序/ 一致/ ./ 则/ 称/ σ/ 为/ 一条/ 相容/ 轨迹/ ./ 定义/ 7/ ./ 故障/ 轨迹/ ./ 相容/ 轨迹/ σ/ i/ =/ 〈/ s0/ ,/ e1/ ,/ s1/ ,/ e2/ …/ em/ ,/ sm/ 〉/ ,/ 若/ / ei/ ∈/ σ/ i/ ,/ 且/ ei/ 为/ 故障/ 事件/ ,/ 则/ 称/ σ/ i/ 为/ 一条/ 故障/ 轨迹/ ./ 若/ 出现/ 多条/ 相容/ 轨迹/ ,/ 如例/ 1/ 中/ 观测/ 到/ 〈/ o1o3/ 〉/ Page4/ 时/ ,/ 需要/ 对/ 轨迹/ 进行/ 选择/ ./ 选择/ 一条/ 轨迹/ 作为/ 本次/ 诊断/ 结果/ ,/ 其余/ 的/ 仅/ 作为/ 候选/ 诊断/ 保留/ ,/ 而/ 不/ 在/ 下/ 一个/ 自动机/ 中/ 扩展/ ./ 相容/ 轨迹/ 的/ 数目/ 与/ 模型/ 的/ 可/ 诊断/ 性/ 有关/ ,/ 在/ 后面/ 将/ 给予/ 证明/ ./ 接下来/ 给出/ 选择/ 轨迹/ 的/ 依据/ ./ 定义/ 8/ ./ 轨迹/ 概率/ ./ 若有/ 一条/ 与/ 观测/ 窗口/ 相容/ 的/ 轨迹/ σ/ =/ 〈/ s0/ ,/ e1/ ,/ s1/ ,/ e2/ …/ em/ ,/ sm/ 〉/ ,/ 所有/ 事件/ 的/ 联合/ 分布/ 定义/ 为/ 该/ 轨迹/ 的/ 概率/ ./ 定义/ 9/ ./ 优先/ 队列/ ./ 若/ 自动机/ Ai/ 在/ 观测/ 窗口/ Wi/ 下/ 存在/ 多条/ 诊断/ 轨迹/ ,/ 若/ 不/ 存在/ 预定/ 义中/ 的/ 致命/ 故障/ ,/ 则/ 选择/ 轨迹/ 概率/ 最大/ 的/ 诊断/ 轨迹/ 作为/ 优先/ 队列/ ;/ 若/ 存在/ 预定/ 义中/ 的/ 致命/ 故障/ ,/ 则/ 选择/ 含有/ 致命/ 故障/ 的/ 队列/ ./ 优先/ 队列/ 记作/ PTraji/ ./ 其余/ 的/ 诊断/ 轨迹/ 称为/ 保留/ 队列/ RTraji/ 在/ 一个/ 合适/ 大小/ 的/ 自动机/ 链中/ ,/ 诊断/ 将/ 以/ 较/ 高效率/ 运行/ ./ 定义/ 10/ ./ 冲突/ ./ 自动机/ Ai/ 和/ Ai/ +/ 1/ 是/ 自动机/ 链中/ 两个/ 相邻/ 的/ 自动机/ ,/ Wi/ 是/ Ai/ 上/ 的/ 观测/ 窗口/ ,/ Wi/ +/ 1/ 是/ Ai/ +/ 1/ 中/ 的/ 观测/ 窗口/ ,/ 若/ Wi/ +/ 1/ 中/ 由/ s/ ∈/ Ii/ +/ 1/ 所能/ 触发/ 的/ 观测/ 事件/ o/ 与/ Ai/ 中/ 根据/ Wi/ 保留/ 的/ 优先/ 队列/ PTraji/ 中/ 终止/ 状态/ 在/ Ai/ +/ 1/ 的/ 触发/ 事件/ e/ 存在/ 如下/ 的/ 概率/ 关系/ :/ P/ (/ oe/ )/ =/ P/ (/ o/ )/ P/ (/ e/ )/ ./ 则/ 称/ 产生/ 了/ 一个/ 冲突/ ,/ 记作/ Conf/ (/ o/ ,/ e/ )/ ./ 直观/ 上/ 看/ ,/ 冲突/ 是/ 指/ Ai/ 的/ 诊断/ 结果/ 的/ 终止/ 状态/ 在/ Ai/ +/ 1/ 中/ 不能/ 得到/ 解释/ ./ 如果/ 初始状态/ s/ 在/ 模型/ 中/ 没有/ 触发/ 任何/ 一个/ 观测/ 事件/ ,/ 则/ 触发/ s/ 的/ 全部/ 转移/ 函数/ ,/ 直到/ 存在/ 观测/ 事件/ 能够/ 判断/ 冲突/ 为止/ ./ 在/ 图/ 1/ 中/ ,/ 设/ W1/ =/ 〈/ o1o3/ 〉/ ,/ W2/ =/ 〈/ o5o8/ 〉/ ,/ PTraj1/ =/ 〈/ s0o1s1f1s3o3s6/ 〉/ ./ s6/ 在/ A2/ 中/ 能够/ 触发/ 的/ 事件/ 为/ o6/ ,/ 显然/ ,/ o5/ 与/ o6/ 独立/ ,/ 产生/ 了/ 冲突/ Conf/ (/ o5/ ,/ o6/ )/ ./ 若/ 初始状态/ 没有/ 触发/ 观测/ 事件/ ,/ 如图/ 1/ 所示/ 中/ ,/ 若/ A2/ 中/ 的/ s6/ 能够/ 触发/ 的/ 事件/ 不是/ o6/ ,/ 而是/ 一个/ 不可/ 观测/ 的/ 事件/ ,/ 则/ 将/ 扩展/ 全部/ s6/ 的/ 转移/ 函数/ ,/ 直到/ 与/ 扩展/ 的/ 轨迹/ 中/ 的/ o7/ 或者/ o9/ 产生/ 冲突/ 为止/ ./ 定义/ 11/ ./ 证实/ ./ 若/ 观测/ 窗口/ Wi/ +/ 1/ 与/ Ai/ 中/ 得到/ 的/ 优先/ 队列/ 无/ 冲突/ ,/ 则/ 称/ Wi/ +/ 1/ 是/ 诊断/ Diai/ 的/ 证实/ ./ 定义/ 12/ ./ 回溯/ ./ 若/ 观测/ 窗口/ Wi/ +/ 1/ 与/ Wi/ 中/ 得到/ 的/ 优先/ 队列/ 存在/ 冲突/ ,/ 则/ 需要/ 根据/ Wi/ / Wi/ +/ 1/ 和/ 保留/ 队列/ RTraji/ 通过/ 计算/ 冲突/ 选取/ 新/ 的/ 优先/ 队列/ ,/ 称该/ 过程/ 为/ 回溯/ ./ 通过/ 上述/ 例子/ 可以/ 扩展/ 到/ 自动机/ 的/ 静态/ 建模/ 和/ 动态/ 观测/ 相容/ 判断/ 的/ 过程/ 中/ 去/ ,/ 当/ 自动机/ Ai/ 的/ 轨迹/ 存在/ 不确定性/ ,/ 是/ 可以/ 通过/ 观测/ 窗口/ Wi/ +/ 1/ 与/ 自动机/ 链/ 的/ 冲突/ 计算/ 来/ 消除/ 的/ ./ 证实/ 也/ 可以/ 通过/ 自动机/ 链中/ 相邻/ 两/ 自动机/ 之间/ 的/ 边界/ 状态/ 所/ 能够/ 触发/ 的/ 事件/ 与/ 观测/ 之间/ 的/ 冲突/ 来/ 判断/ 是否/ 正确/ 选择/ 了/ 轨迹/ ./ 在/ 诊断/ 过程/ 中/ ,/ 若/ 不/ 存在/ 证实/ ,/ 根据/ 新/ 的/ 观测/ 窗口/ 可以/ 在/ 对/ 前/ 一/ 自动机/ 诊断/ 过程/ 中/ 所/ 取得/ 的/ 保留/ 队列/ 来/ 进行/ 回溯/ ,/ 这个/ 回溯/ 过程/ 可以/ 根据/ 当前/ 的/ 观测/ 窗口/ 对/ 每个/ 保留/ 队列/ 进行/ 冲突/ 运算/ ,/ 根据/ 该/ 观测/ 窗口/ 与/ 上/ 一个/ 自动机/ 的/ 冲突/ 计算/ ,/ 可以/ 选出/ 新/ 的/ 优先/ 队列/ ,/ 并且/ 更新/ 保留/ 的/ 回溯/ 点/ ./ 自动机/ 模型/ 的/ 链状/ 结构/ 是/ 一个/ 合理/ 大小/ 并/ 有/ 严格/ 边界/ 定义/ 的/ 自动/ 机组/ ,/ 称为/ 自动机/ 链/ ./ 自动机/ 链中/ 自动机/ 的/ 规模/ 等于/ 观测/ 窗口/ 所/ 覆盖/ 的/ 事件/ 序列/ 规模/ ./ 即/ 观测/ 窗口/ 必须/ 只/ 在/ 自动机/ 链中/ 某个/ 自动机/ 中/ 运行/ ,/ 而/ 不能/ 超过/ 这个/ 自动机/ (/ 边界/ 状态/ 除外/ )/ ./ 当/ 诊断/ 的/ 观测/ 窗口/ 较/ 小时/ ,/ 每次/ 增量/ 诊断/ 过程/ 产生/ 与/ 观测/ 相容/ 的/ 不确定性/ 轨迹/ 数量/ 会/ 随之/ 增加/ ./ 尽管/ 这种/ 诊断/ 轨迹/ 会/ 随着/ 观测/ 序列/ 的/ 不断/ 增加/ 而/ 最终/ 趋于/ 唯一/ ./ 但是/ 若/ 考虑/ 全部/ 的/ 不确定性/ 轨迹/ ,/ 诊断/ 空间/ 和/ 诊断/ 时间/ 的/ 复杂度/ 就/ 会/ 呈/ 指数/ 级/ 增加/ ./ 若仅/ 考虑/ 唯一/ “/ 最/ 可能/ ”/ 的/ 轨迹/ ,/ 在/ 增量/ 诊断/ 中/ 产生/ 观测/ 与/ 模型/ 不相容/ 时/ ,/ 需要/ 从/ 初始状态/ 开始/ ,/ 与/ 全部/ 观测/ 窗口/ 进行/ 同步/ 运算/ ,/ 最坏/ 情况/ 将/ 在/ 时间/ 与/ 空间/ 上/ 退回/ 到/ 全局/ 诊断/ ./ 本文/ 提出/ 一种/ 回溯/ 点/ 的/ 方法/ ,/ 保存/ 所有/ 可能/ 的/ 轨迹/ 并/ 按照/ 轨迹/ 概率/ 排序/ ,/ 用于/ 解决/ 完全/ 回溯/ 导致/ 的/ 全局/ 诊断/ 问题/ ./ 而/ 基于/ 冲突/ 的/ 方法/ 能够/ 在/ 增量/ 观测/ 与/ 模型/ 不相容/ 时/ ,/ 结合/ 回溯/ 点/ ,/ 动态/ 重新/ 选择/ 轨迹/ ,/ 回溯/ 效率/ 较/ 高/ ./ 图/ 2/ 给出/ 的/ 是/ 本文/ 提出/ 的/ 增量/ 诊断/ 方法/ 的/ 基本/ 框架/ ./ 自动机/ 链/ 与/ 观测/ 窗口/ 之间/ 是/ 被/ 假设/ 成/ 严格/ 对应/ 的/ ./ 这种/ 假设/ 存在/ 着/ 一定/ 的/ 局限性/ ./ 人为/ 定义/ 的/ 自动机/ 链/ 模型/ 上/ 与/ 动态/ 出现/ 的/ 观测/ 窗口/ 同步/ ,/ 在/ 时序/ 混乱/ 的/ 系统/ 中/ 可能/ 会/ 出现/ 无法/ 对应/ 的/ 情况/ ,/ 这点/ 可以/ 通过/ 对/ 全局/ 模型/ 的/ 动态/ 模型/ 重构/ 来/ 解决/ ./ 而/ 一般/ 情况/ 下/ ,/ 确定/ 运行/ 的/ 系统/ ,/ 可以/ 遵照/ 模型/ 边界/ 来/ 确定/ 观测/ 窗口/ 与/ 自动机/ 的/ 逻辑/ 和/ 时序/ 对应/ 关系/ ,/ 即使/ 存在/ Page5/ 着/ 环路/ 的/ 边界/ 状态/ ,/ 在/ 有限/ 的/ 时间/ 内/ 也/ 可以/ 通过/ 回溯/ 来/ 解决/ ./ 自动机/ 链/ 将/ 全局/ 模型/ 与/ 观测/ 窗口/ 的/ 同步/ 降低/ 到/ 局部/ 空间/ 上/ ,/ 建立/ 在/ 自动机/ 链上/ 的/ 增量/ 诊断/ 方法/ 的/ 诊断/ 时间/ 和/ 空间/ 随之/ 降低/ 到/ 局部/ 时间/ 和/ 空间/ ;/ 增量/ 诊断/ 可以/ 仅/ 根据/ 前/ 一个/ 诊断/ 结果/ 和/ 当前/ 观测/ 进行/ 局部/ 诊断/ ,/ 无需/ 全局/ 信息/ ,/ 独立性/ 较/ 高/ ;/ 在/ 增量/ 方法/ 上/ 加入/ 多/ 候选/ 轨迹/ 的/ 排序/ 方法/ ,/ 可以/ 对/ 部件/ 多故障/ 进行/ 处理/ ,/ 并/ 选择/ 最高/ 风险/ 故障/ ;/ 而/ 带有/ 回溯/ 的/ 基于/ 冲突/ 方法/ ,/ 可以/ 消除/ 多/ 候选/ 轨迹/ 的/ 冗余/ 诊断/ ,/ 精确/ 刻画/ 诊断/ 轨迹/ ./ 3/ 诊断/ 方法/ 3.1/ 诊断/ 算法/ 在/ 离线/ 建立/ 的/ 自动机/ 链/ 模型/ 基础/ 上/ ,/ 在线/ 的/ 系统/ 传感器/ 会/ 动态/ 传回/ 一系列/ 的/ 事件/ 序列/ ./ 假设/ 传感器/ 事件/ 顺序/ 正常/ ,/ 即/ 每/ 一个/ 到达/ 诊断器/ 的/ 观测/ 事件/ 按照/ 实际/ 发生/ 的/ 顺序/ 来/ 进行/ ./ 第一个/ 观测/ 窗口/ 到达/ 时/ ,/ 诊断/ 从/ 自动机/ 链/ 的/ 第一个/ 自动机/ 的/ 初始状态/ 开始/ ./ 根据/ 时序/ 和/ 转移/ 函数/ ,/ 对/ 自动机/ 和/ 观测/ 窗口/ 进行/ 对应/ ./ 每次/ 在线/ 诊断/ 结束/ ,/ 保留/ 本次/ 结果/ ,/ 当新/ 的/ 观测/ 窗口/ 到来/ 时/ ,/ 以上/ 次/ 诊断/ 结果/ 作为/ 本次/ 诊断/ 的/ 初始状态/ ,/ 开始/ 本次/ 的/ 诊断/ :/ 找出/ 与/ 观测/ 轨迹/ 相容/ 的/ 全部/ 轨迹/ ,/ 并/ 保存/ 唯一/ 的/ 相容/ 轨迹/ 和/ 轨迹/ 的/ 终止/ 状态/ 作为/ 回溯/ 点/ ./ 以上/ 是/ 基本/ 的/ 诊断/ 过程/ ./ 若/ 当前/ 的/ 诊断/ 出现/ 多条/ 轨迹/ ,/ 验证/ 当前/ 是否/ 有/ 致命/ 的/ 故障/ ,/ 若/ 存在/ 致命/ 故障/ ,/ 选择/ 该/ 轨迹/ 并且/ 发出/ 警报/ ./ 若/ 没有/ 致命性/ 故障/ ,/ 则/ 需要/ 计算/ 轨迹/ 概率/ ,/ 选择/ 联合/ 分布/ 最高/ 的/ 一条/ 轨迹/ ,/ 作为/ 本次/ 的/ 优先/ 队列/ ,/ 将/ 该/ 队列/ 的/ 终止/ 状态/ 作为/ 回溯/ 点/ 其余/ 保存/ 为/ 候选/ 队列/ ,/ 与/ 当前/ 的/ 自动机/ 链/ 一并/ 保存/ ./ 当/ 出现/ 了/ 诊断/ 冲突/ ,/ 诊断/ 需要/ 进行/ 回溯/ ./ 设/ 当前/ 自动机/ 为/ Ai/ ,/ 则/ 回溯到/ Ai/ -/ 1/ 的/ 终止/ 状态/ ./ 若该/ 回溯/ 点/ 没有/ 保留/ 队列/ ,/ 回溯到/ Ai/ -/ 2/ ,/ 依此类推/ ,/ 直到/ 回溯到/ 一个/ 有/ 保留/ 队列/ 的/ 回溯/ 点/ Ai/ -/ k/ 为止/ ./ 此时/ ,/ 观测/ 窗口/ 已经/ 叠加/ 到/ Ai/ ,/ 当前/ 的/ 观测/ 序列/ 携带/ 更/ 多/ 事件/ 序列/ 的/ 信息/ ,/ 因此/ 在/ Ai/ -/ k/ 上/ 可以/ 重新/ 计算/ 概率分布/ ,/ 得出/ 一个/ 新/ 的/ 、/ 与/ 当前/ 观测/ 窗口/ 没有/ 冲突/ 的/ 诊断/ 结果/ ./ 接下来/ 给出/ 算法/ ./ 算法/ 1/ ./ 增量/ 诊断/ ./ 输入/ :/ 自动机/ 链/ Ai/ 输入/ :/ 观测/ 窗口/ Wi1/ ./ Ω/ =/ / 2/ ./ Obs/ =/ / 3/ ./ WhileWi/ ≠/ / 4/ ./ IfConflict/ (/ Ω/ ,/ Wi/ )/ 5/ ./ Obs/ =/ Obs/ / Wi6/ ./ BackTrack/ (/ Obs/ ,/ Ω/ )/ 7/ ./ Endif8/ ./ IfNon/ -/ Conflict/ (/ Ω/ ,/ Wi/ )/ 9/ ./ Ω/ =/ Dia/ (/ Ai/ ,/ Wi/ )/ 10/ ./ If/ Ω/ =/ Single/ (/ Ai/ ,/ Wi/ )/ 11/ ./ Ω/ =/ Ω/ / Ω/ 12/ ./ Pointi/ =/ FinalState/ (/ Ω/ )/ 13/ ./ Endif14/ ./ If/ Ω/ =/ Muti/ (/ Ai/ ,/ Wi/ )/ 15/ ./ Ω/ 0/ =/ List/ (/ Ω/ )/ 16/ ./ Ω/ =/ Ω/ / Pre/ (/ Ω/ )/ 17/ ./ Pointi/ =/ FinalState/ (/ Pre/ (/ Ω/ )/ )/ 18/ ./ Endif19/ ./ Endif20/ ./ Endwhile21/ ./ Return/ Ω/ 在/ 图/ 1/ 中/ ,/ 按照/ 算法/ 1/ ,/ 当/ 观测/ 窗口/ 得到/ 事件/ 序列/ 〈/ o1o3/ 〉/ 时/ ,/ 返回/ 相容/ 的/ 候选/ 轨迹/ σ/ 1/ =/ 〈/ s0o1s1e1s4o3s7/ 〉/ 和/ σ/ 2/ =/ 〈/ s0o1s1f1s3o3s6/ 〉/ ./ 若/ 通过/ 计算/ ,/ 得到/ 概率分布/ P/ (/ σ/ 1/ )/ =/ P/ (/ o1e1o3/ )/ =/ 0.6324/ ,/ P/ (/ σ/ 2/ )/ =/ P/ (/ o1f1o3/ )/ =/ 0.00648/ ./ 且/ 故障/ f1/ 不是/ 致命/ 故障/ ./ 则/ 算法/ 选择/ 轨迹/ σ/ 1/ 作为/ 优先/ 队列/ ,/ 回溯/ 点/ 保留/ 为/ s7/ ,/ σ/ 1/ 作为/ 优先/ 队列/ ,/ σ/ 2/ 作为/ 保留/ 队列/ ./ 接下来/ 观测/ 窗口/ 观测/ 到/ 〈/ o6o7/ 〉/ ,/ 此时/ 与/ s7/ 产生/ 冲突/ ,/ 产生/ 一个/ 回溯/ ./ 当前/ 观测/ 窗口/ 合成/ 为/ 〈/ o1o3o6o7/ 〉/ ,/ 则/ 在/ 自动机/ A1/ 和/ A2/ 中/ ,/ 找到/ 相容/ 轨迹/ 〈/ s0o1s1f1s3o3s6o6s8e6s11o7s14/ 〉/ ./ 同时/ 将/ 优先/ 队列/ 更新/ 为/ σ/ 2/ =/ 〈/ s0o1f1s3o3s6/ 〉/ 和/ 〈/ s6o6s8e6s11o7s14/ 〉/ ./ 回溯/ 点/ 更新/ 为/ s6/ 和/ s14/ ./ 3.2/ 概率分布/ 的/ 计算/ 有限/ 状态/ 自动机/ 转换成/ 概率/ 自动机/ 后/ ,/ 较/ 原有/ 自动机/ 模型/ 中/ 添加/ 了/ 事件/ 的/ 先验概率/ 和/ 事件/ 之间/ 的/ 后验/ 概率/ 信息/ ,/ 增强/ 了/ 模型/ 的/ 表达能力/ ./ 当/ 在线/ 系统/ 产生/ 了/ 一个/ 观测/ 窗口/ ,/ 其中/ 包含/ 的/ 事件/ 序列/ 必定/ 与/ 当前/ 自动机/ 链中/ 的/ 某/ 一条/ 轨迹/ 相容/ ,/ 而/ 系统/ 的/ 运行/ 是/ 由/ 事件/ 来/ 驱动/ 的/ ./ 事件/ 序列/ 之间/ 有/ 时序/ 的/ 约束/ ./ 在/ 事件/ 上/ 附加/ 的/ 概率/ 信息/ 加强/ 了/ 时序/ 的/ 约束/ 关联/ ./ 若/ / ei/ ,/ ej/ ∈/ E/ ./ / ti/ ,/ tj/ ∈/ T/ ./ si/ ,/ sj/ ,/ sk/ ∈/ S/ ,/ ti/ =/ sie/ →/ / / jsk/ ,/ 则/ eiej/ 之间/ 存在/ 相互/ 的/ 影响/ ./ 即当/ 观测/ tj/ =/ sj/ 到/ 事件/ ei/ 时/ ,/ 发生/ ej/ 的/ 概率/ 会/ 比/ ej/ 的/ 先验概率/ 高/ ,/ 而/ ej/ 的/ 出现/ 证实/ 了/ ei/ 的/ 出现/ ./ 因此/ 在/ 概率/ 自动机/ 中/ ,/ 将/ 这种/ 事件/ 概率/ 明确/ 定义/ 并/ 添加/ 到/ 每个/ 事件/ 中/ ,/ 用于/ Page6/ 指导/ 搜索/ 的/ 方向/ 以及/ 轨迹/ 选择/ ./ 一条/ 轨迹/ 出现/ 的/ 概率/ 是/ 由/ 该/ 轨迹/ 上/ 事件/ 的/ 联合/ 分布/ 来/ 构成/ 的/ ./ 若/ 存在/ 概率/ 自动机/ 中/ 的/ 某条/ 轨迹/ 〈/ s0e0s1e1/ …/ siei/ …/ sn/ 〉/ ,/ 则/ 联合/ 分布/ P/ (/ e0e1/ …/ ei/ …/ en/ )/ =/ P/ (/ e0/ )/ P/ (/ e1/ |/ e0/ )/ P/ (/ e2/ |/ e1/ )/ …/ P/ (/ ei/ +/ 1/ |/ ei/ )/ …/ P/ (/ en/ |/ en/ -/ 1/ )/ ./ 可以/ 得到/ 该/ 轨迹/ 出现/ 的/ 概率/ ./ 后验/ 概率/ P/ (/ ei/ |/ ei/ -/ 1/ )/ / 1/ ,/ 则/ 该/ 轨迹/ 越长/ ,/ 求出/ 的/ 后验/ 概率/ 越小/ ,/ 在/ 候选/ 诊断/ 中/ 选择/ 出/ 作为/ 优先/ 队列/ 的/ 可能/ 就/ 越/ 小/ ./ 在/ 实际/ 的/ 系统/ 情况/ 下/ ,/ 可以/ 理解/ 为/ 当/ 系统/ 行为/ 越/ 复杂/ ,/ 越/ 不会/ 常用/ ./ 3.3/ 概率分布/ 的/ 简化/ 自动机/ 模型/ 根据/ 相应/ 的/ 概率/ ,/ 可以/ 将/ 自动机/ 的/ 多个/ 元组/ 理解/ 成为/ 由/ 事件驱动/ 的/ 系统/ ,/ 而/ 这些/ 事件/ 相互之间/ 的/ 后验/ 概率/ 联系/ ,/ 将/ 可以/ 化简/ 为/ 仅/ 含有/ 事件/ 及其/ 概率/ 的/ 模型/ ./ 定义/ 13/ ./ 简化/ 概率/ 自动机/ 模型/ ./ 定义/ 简化/ 的/ 概率/ 自动机/ 模型/ 为/ 一个/ 四元组/ Spa/ =/ (/ Se/ ,/ Sr/ ,/ Sp/ ,/ E0/ )/ ./ 其中/ Se/ 是/ 事件/ 集合/ ;/ Sr/ 是/ 关系/ 集合/ ,/ Sr/ / Se/ ×/ Se/ ;/ Sp/ 是/ 事件/ 的/ 概率/ 集合/ ;/ E0/ 是/ 源/ 事件/ 集合/ ,/ / e/ ∈/ E0/ ,/ 在/ Sr/ 中/ 不/ 存在/ 关系/ r/ (/ e/ ,/ e/ )/ ./ 当/ Se/ 中/ 任意/ 两个/ 事件/ ei/ 、/ ej/ 存在/ 直接/ 的/ 顺序/ 关系/ 时/ ,/ 在/ Sr/ 中/ 存在/ 着/ 一个/ 二元关系/ r/ (/ ei/ ,/ ej/ )/ ,/ 且/ Sr/ 中/ 存在/ 自/ 反/ 关系/ ,/ 即/ 允许/ 模型/ 中/ 存在/ 环/ ;/ 在/ Sp/ 中有/ 每个/ 事件/ 存在/ 先验概率/ P/ (/ ei/ )/ ,/ 若/ Sr/ 中/ 存在/ 二元关系/ r/ (/ ei/ ,/ ej/ )/ ,/ 则/ 在/ Sp/ 中/ 存在/ 亦/ 存在/ 二者/ 的/ 后验/ 概率/ P/ (/ ej/ |/ ei/ )/ ./ 为了/ 表示/ 二元关系/ r/ 与/ 事件/ 之间/ 的/ 关系/ ,/ 便于/ 将/ 事件/ 关系/ 映射/ 到/ 轨迹/ 中去/ ./ 定义/ 函数/ (/ ψ/ (/ r/ (/ ei/ ,/ ej/ )/ )/ =/ eiej/ )/ ∨/ (/ ψ/ (/ r/ (/ ei/ ,/ ei/ )/ )/ =/ ei/ )/ ./ 简化/ 的/ 概率/ 自动机/ 模型/ 中/ ,/ 状态/ 被/ 忽略/ ,/ 仅/ 集中/ 考虑/ 事件/ 之间/ 的/ 关系/ ./ 在/ 已有/ 的/ 事件/ 关系/ 上/ ,/ 考虑/ 观测/ 到/ 的/ 事件/ 序列/ 是否/ 可以/ 被/ 该/ 自动机/ 所/ 接受/ ./ 自动机/ 元组/ 中/ 概率/ 信息/ 加速/ 了/ 判定/ 接受/ 与否/ 的/ 效率/ ./ 最/ 关键/ 的/ 是/ ,/ 运算/ 时/ 比较/ 简捷/ ./ 图/ 3/ 给出/ 的/ 是/ 图/ 1/ 中/ 自动机/ 例中/ 自动机/ A1/ 的/ 简化/ 概率/ 自动机/ 模型/ ./ 事件/ 用/ 节点/ 表示/ ,/ 关系/ 用/ 箭头/ 表示/ ./ 在/ 简化/ 的/ 概率/ 自动机/ 模型/ 上/ ,/ 能够/ 更/ 清楚/ 地/ 表示/ 事件/ 之间/ 的/ 联系/ ./ 图中/ 可以/ 明确/ 地/ 看到/ 3/ 条/ 轨迹/ ./ 在/ 诊断/ 过程/ 中/ ,/ 事件/ 关系/ 和/ 概率/ 关系/ 共同/ 作用/ 于/ 诊断/ 轨迹/ 的/ 查找/ 中/ ./ 在/ 简化/ 自动机/ 模型/ 中/ ,/ 根据/ 观测/ 窗口/ ,/ 可以/ 按照/ 如下/ 方法/ 计算/ ./ 算法/ 2/ ./ 基于/ 简化/ 概率/ 自动机/ 的/ 诊断/ 过程/ ./ 输入/ :/ 简化/ 概率/ 自动机/ Spa/ =/ (/ Se/ ,/ Sr/ ,/ Sp/ ,/ E0/ )/ ,/ 观测/ 窗口/ 1/ ./ Initial/ :/ E/ =/ E0/ ,/ Traj/ =/ / 2/ ./ Foreveryoi/ ∈/ Obs3/ ./ If/ / ei/ ∈/ E/ ,/ / r/ (/ ei/ |/ oi/ )/ ∈/ Sr4/ ./ Distinguishei5/ ./ Traj/ =/ Traj/ / ψ/ (/ ei/ ,/ oi/ )/ 6/ ./ deleteeiinE/ ,/ deleteoiinObs7/ ./ Else8/ ./ addejtoE/ ,/ / ej/ / ei/ / r/ (/ ei/ ,/ ej/ )/ ∈/ Sr9/ ./ goto310/ ./ IfSingle/ (/ Traj/ )/ 11/ ./ ReturnTraj12/ ./ Else13/ ./ computeP/ (/ traji/ )/ =/ P/ (/ e1e2/ …/ ek/ )/ ,/ ei/ ∈/ traj/ ,/ 14/ ./ Returnlist/ (/ P/ (/ traji/ )/ )/ 当/ 观测/ 窗口/ 到达/ 时/ ,/ 对于/ 当前/ 的/ 观测/ 事件/ ,/ 找到/ 与/ 之/ 直接/ 相关/ 的/ 事件/ ,/ 或者/ 是/ 自反/ 关系/ ,/ 或者/ 是/ 顺序/ 关系/ ./ 如果/ 不/ 存在/ 直接/ 的/ 关系/ r/ ,/ 扩展/ 当前/ 事件/ 的/ 关联/ 事件/ ,/ 直到/ 找到/ 相关/ 的/ 事件/ 为止/ ./ 在/ 诊断/ 过程/ 中/ ,/ 常常/ 出现/ 多条/ 轨迹/ ,/ 所以/ 在/ 加入/ 事件/ 之前/ 需要/ 进行/ 区分/ ./ Distinguish/ 将/ ei/ 区分/ 并/ 添加/ 到/ 不同/ 轨迹/ 中/ 的/ 事件/ 序列/ ,/ 在/ 多/ 诊断/ 结果/ 之间/ 做出/ 划分/ ./ 当多/ 诊断/ 结果/ 存在/ 时/ ,/ 计算/ 事件/ 的/ 联合/ 分布/ ,/ 形成/ 候选/ 诊断/ 的/ 优先/ 轨迹/ ./ 最后/ 返回/ 单/ 轨迹/ 或/ 基于/ 联合/ 分布/ 概率/ 的/ 排序/ 轨迹/ ./ 离散/ 事件/ 系统/ 由/ 事件驱动/ ,/ 简化/ 的/ 概率/ 自动机/ 模型/ 明确/ 了/ 各/ 驱动/ 事件/ 之间/ 的/ 关系/ ./ 消除/ 了/ 由于/ 隐含/ 给出/ 事件/ 之间/ 驱动/ 关系/ 所/ 引起/ 的/ 在/ 不/ 完备/ 因果/ 条件/ 下/ 的/ 诊断/ 虚警/ 和/ 不/ 完备/ 诊断/ 结果/ ./ 简化/ 的/ 概率/ 自动机/ 模型/ 将/ 事件/ 之间/ 隐含/ 关系/ 进行/ 显式/ 表达/ ,/ 使/ 事件驱动/ 的/ 系统/ 自动机/ 表达能力/ 得到/ 增强/ ./ 4/ 相关/ 定理/ 及/ 证明/ 定理/ 1/ ./ 在/ 无环/ 的/ 有限/ 状态/ 自动机/ 上/ ,/ 若/ 不/ 存在/ 观测/ 事件/ 序列/ 完全相同/ 的/ 轨迹/ ,/ 当/ 观测/ 序列/ 足够/ 长时/ ,/ 能够/ 唯一/ 确定/ 一条/ 诊断/ 轨迹/ ./ 证明/ ./ 设无环/ 有限/ 状态机/ 为/ 一个/ 五元/ 组/ A/ =/ Page7/ 是/ 正确/ 且/ 完备/ 的/ ./ (/ S/ ,/ E/ ,/ T/ ,/ I/ ,/ F/ )/ ,/ / i/ ,/ j/ ,/ Obs/ (/ traji/ )/ ≠/ Obs/ (/ trajj/ )/ ,/ i/ ≠/ j/ ./ 假设/ 对/ 同一/ 观测/ 序列/ 存在/ 两条/ 诊断/ 轨迹/ ,/ 记作/ DiaTraj1/ 和/ DiaTraj2/ ,/ DiaTraj1/ 的/ 事件/ 序列/ 为/ Σ/ 1/ ,/ DiaTraj2/ 的/ 事件/ 序列/ 为/ Σ/ 2/ ,/ 定义/ 函数/ δ/ ,/ δ/ (/ Σ/ i/ )/ =/ 〈/ …/ ei/ …/ 〉/ ,/ ei/ ∈/ E/ ∩/ Obs/ ./ δ/ (/ Σ/ 1/ )/ =/ 〈/ e1e2/ …/ ei/ …/ 〉/ ,/ δ/ (/ Σ/ 2/ )/ =/ 〈/ e1e2e3/ 〉/ ./ 根据/ 前提/ ,/ δ/ (/ Σ/ 1/ )/ ≠/ δ/ (/ Σ/ 2/ )/ ./ 而/ DiaTraj1/ 与/ DiaTraj2/ 由/ 同一/ 观测/ 窗口/ 得出/ ,/ δ/ (/ Σ/ 1/ )/ =/ δ/ (/ Σ/ 2/ )/ ,/ 导出/ 矛盾/ ,/ 原/ 假设/ (/ 两条/ 诊断/ 轨迹/ 不/ 存在/ )/ 是/ 不/ 成立/ 的/ ,/ 因此/ 针对/ 同一/ 观测/ 序列/ 不能/ 存在/ 两条/ 诊断/ 轨迹/ ./ 证毕/ 定理/ 2/ ./ 当/ 观测/ 序列/ 及/ 模型/ 确定/ 时/ ,/ 增量/ 方法/ 证明/ ./ 首先/ 证明/ 正确性/ ./ 设/ 全局/ 诊断/ 为/ 状态/ -/ 事件/ 序列/ SE/ ,/ 观测/ 窗口/ 为/ Obs/ ./ 设在/ 增量/ 过程/ 中/ 的/ 局部/ 诊断/ 结果/ 为/ SiEi/ ,/ SE/ 是/ SiEi/ 的/ 简单/ 连接/ ./ 且/ 根据/ 定理/ 1/ ,/ 当/ 观测/ 窗口/ 足够/ 长时/ ,/ 每/ 一个/ 局部/ 诊断/ 结果/ 是/ 唯一/ 的/ ./ 因此/ 若/ 局部/ 诊断/ 唯一/ 且/ 正确/ ,/ 全局/ 诊断/ 的/ 正确性/ 也/ 可以/ 保证/ ./ 即/ / SiEi/ / SE/ ,/ 当/ 所有/ 组成/ SE/ 的/ SiEi/ 正确/ 时/ ,/ SE/ 是/ 正确/ 的/ ./ 往证/ 局部/ 诊断/ 结果/ 是/ 正确/ 的/ :/ 诊断/ 是/ 与/ 在线/ 的/ 观测/ 序列/ 相容/ 的/ 模型/ 事件/ 序列/ ,/ 当/ SiEi/ 是/ 由/ 诊断器/ 选出/ 的/ 与/ 观测/ 序列/ 相容/ 的/ 事件/ -/ 状态/ 序列/ ./ δ/ (/ SiEi/ )/ =/ Obsi/ ,/ 这/ 保证/ 诊断器/ 选出/ 的/ 每个/ SiEi/ 都/ 是/ 正确/ 的/ ,/ 因此/ SE/ 是/ 正确/ 的/ ./ 下面/ 证明/ 在/ 观测/ 序列/ 及/ 模型/ 确定/ 下/ ,/ 增量/ 方法/ 是/ 完备/ 的/ :/ 有/ 自动机/ 模型/ A/ =/ (/ S/ ,/ E/ ,/ T/ ,/ I/ ,/ F/ )/ ,/ 观测/ 序列/ Obs/ =/ 〈/ …/ oi/ …/ 〉/ ,/ / oi/ ∈/ Obs/ ,/ oi/ ∈/ E/ ./ 若/ 观测/ 序列/ 确定/ ,/ 则/ 在/ 模型/ 中必/ 存在/ 事件/ 序列/ traj/ =/ 〈/ …/ ei/ …/ 〉/ ,/ δ/ (/ traj/ )/ =/ Obs/ ./ 则/ traj/ 是/ 与/ 观测/ 相容/ 的/ 事件/ 序列/ ;/ 若/ 存在/ 多个/ traj/ ,/ 使得/ / δ/ (/ traji/ )/ =/ Obs/ ,/ i/ =/ 0/ ,/ 1/ ,/ 2/ ,/ …/ 则/ 诊断/ 结果/ 是/ 这些/ 轨迹/ 集合/ 的/ 子集/ ,/ 根据/ 定理/ 1/ ,/ 当/ 观测/ 序列/ 足够/ 长时/ ,/ 诊断/ 结果/ 唯一/ ,/ 因此/ 增量/ 诊断/ 方法/ 是/ 完备/ 的/ ./ 模/ 扩大/ ./ 定理/ 3/ ./ 模型/ 可/ 诊断/ 度/ 降低/ 导致/ 候选/ 轨迹/ 规定/ 义/ 一条/ 轨迹/ 的/ 观测/ 映射/ P/ (/ traj/ )/ =/ 〈/ o1o2/ …/ on/ 〉/ ,/ oi/ ∈/ traj/ ./ 即该/ 轨迹/ 中/ 全部/ 可/ 观测/ 事件/ 的/ 序列/ ./ 而/ 观测/ 序列/ 的/ 逆映射/ P/ -/ 1/ (/ Obs/ )/ 定义/ 为/ / traj/ (/ P/ (/ traj/ )/ =/ Obs/ )/ ,/ 即/ 在/ 模型/ 定义域/ 上/ 满足/ 该/ 观测/ 的/ 全部/ 轨迹/ ./ 如果/ 系统/ 是/ 完全/ 可/ 诊断/ 的/ ,/ P/ 与/ P/ -/ 1/ 是/ 一一对应/ 的/ ./ 当/ 系统/ 不可/ 诊断/ 时/ ,/ 定义/ |/ P/ |/ 列/ 不可/ 诊断/ 的/ 程度/ ,/ M/ =/ 在/ (/ 0/ ,/ 1/ ]/ 上/ 变化/ ,/ 当/ M/ 趋于/ 1/ 时/ ,/ 可/ 诊断/ 性/ 提高/ ,/ M/ 趋于/ 0/ 时/ ,/ 可/ 诊断/ 性/ 降低/ ./ 而/ 在/ 全局/ 系统/ 中/ ,/ M/ 的/ 平均值/ 可以/ 作为/ 可/ 诊断/ 性/ 的/ 衡量标准/ ,/ 记/ 为/ 珨/ M/ ./ 由/ M/ 的/ 定义/ 可知/ ,/ 1/ 序列/ 来说/ ,/ |/ P/ |/ =/ 1/ ,/ 则/ 1/ 观测/ 序列/ 相容/ 的/ 轨迹/ 个数/ ,/ 即/ 候选/ 诊断/ 结果/ 个数/ ./ 在/ 全局/ 系统/ 中/ ,/ 平均/ 候选/ 轨迹/ 个数/ N/ =/ ∑/ |/ P/ -/ 1/ |/ |/ P/ |/ =/ 1/ 时/ ,/ N/ =/ ∑/ |/ P/ -/ 1/ |/ 的/ 个数/ ./ 珨/ M/ =/ 1/ 诊断/ 性/ 的/ 降低/ ,/ 将/ 导致/ 候选/ 轨迹/ 的/ 增加/ ./ 5/ 实验/ 结果/ 及/ 分析/ 全局/ 结果/ 采用/ 2007/ 年/ Grastien/ 等/ 人/ [/ 21/ ]/ 提出/ 的/ 诊断/ 标准/ 测试/ 集合/ ,/ 局部/ 自动机/ 状态/ 规模/ 为/ 6/ 个/ 状态/ ,/ 自动机/ 链/ 由/ 30/ 个/ 局部/ 自动机/ 组成/ ./ 诊断/ 空间/ 约/ 为/ 630/ ./ 其中/ 模型/ 是/ 离线/ 的/ ,/ 观测/ 是/ 在线/ 给出/ 的/ ,/ 符合/ 系统/ 实际/ 运行/ 过程/ 的/ 事件/ 序列/ ./ 采用/ 保留/ 全部/ 诊断/ 结果/ 保证/ 结果/ 完备/ 性/ ,/ 用/ 计算/ 轨迹/ 联合/ 分布/ 的/ 方法/ 来/ 选择/ 一条/ 轨迹/ ,/ 保证/ 效率/ ./ 截取/ 10/ 个/ 相应/ 的/ 时间/ 点/ ,/ 给出/ 几种/ 方法/ 的/ 诊断/ 时间/ (/ 以/ ms/ 计/ )/ ,/ 对/ 比如/ 图/ 4/ (/ a/ )/ 下/ :/ 其中/ 方法/ 1/ 是/ 完全/ 扩展/ 的/ 方法/ ,/ 方法/ 2/ 是/ NEDE/ 方法/ ,/ 方法/ 3/ 是/ 本文/ 方法/ ./ 本文/ 方法/ 与/ NEDE/ 方法/ 是/ 类似/ 接近/ 的/ ,/ 因此/ 在/ 图/ 4/ (/ b/ )/ 中/ 给出/ 更/ 详细/ 的/ 对比/ 图示/ ./ 可以/ 看出/ ,/ 在/ 诊断/ 过程/ 中/ ,/ 本文/ 方法/ 和/ NEDE/ 方法/ 较/ 增量/ 同步/ 的/ 方法/ 时间/ 复杂度/ 更/ 低/ ./ 而图/ 4/ (/ b/ )/ 中/ 可以/ 看出/ ,/ 除/ 开始/ 的/ 几段/ 自动机/ 链上/ 本文/ 方法/ 需要/ 计算/ 概率/ 而/ 影响/ 了/ 结果/ 给出/ 时间/ ,/ 而/ 在/ 自动机/ 链向/ 后/ 运行/ 的/ 过程/ 中/ ,/ 由于/ 本文/ 方法/ 回溯/ 机制/ 优于/ NEDE/ 方法/ ,/ 故/ 诊断/ 时间/ 低于/ NEDE/ 方法/ ./ 可见/ ,/ 基于/ 冲突/ 的/ 方法/ 在/ 时间/ 上/ 的/ 量级/ 与/ NEDE/ 方法/ 接近/ ,/ 与/ 完全/ 扩展/ 的/ 方法/ 相比/ 诊断/ 时间/ 有/ 数量级/ 上/ 的/ 改进/ ./ 在/ 基于/ 冲突/ 的/ 增量/ 方法/ 中/ ,/ 当/ 出现/ 与/ 当前/ 观测/ 序列/ 冲突/ 的/ 诊断/ 结果/ ,/ 则/ 认为/ 当前/ 所/ 选择/ 的/ 轨迹/ 不是/ 正确/ 的/ 诊断/ 轨迹/ ,/ 因此/ 产生/ 了/ 回溯/ ./ 而/ NEDE/ 方法/ 在/ 当前/ 观测/ 与/ 轨迹/ 产生/ 冲突/ 时/ ,/ 直接/ 回溯到/ 初始状态/ ./ 表/ 1/ 对/ 二者/ 的/ 回溯/ 次数/ 、/ 回溯/ 长度/ 及/ 回溯/ 消耗/ 时间/ 给出/ 实验/ 结果/ ./ Page8NEDE/ 方法/ 14/ 基于/ 冲突/ 方法/ 14/ 由图/ 4/ 和表/ 1/ 可见/ ,/ 在/ 较/ 小/ 的/ 自动机/ 上/ 独立/ 地/ 进行/ 局部/ 诊断/ ,/ 由于/ 诊断/ 空间/ 较/ 小/ ,/ 诊断/ 消耗/ 时间/ 少/ ./ 但是/ 全局/ 诊断/ 需要/ 多/ 部件/ 的/ 增量/ 诊断/ 结果/ ,/ 在/ 全局/ 观测/ 窗口/ 下/ 回溯/ 过程/ 、/ 回溯/ 之后/ 的/ 多/ 自动机/ 同步/ 和/ 增量/ 结果/ 拼接/ 上/ 消耗/ 的/ 时间/ 较长/ ./ 本文/ 方法/ 的/ 空间/ 消耗/ 较/ NEDE/ 方法/ 高/ ,/ 保留/ 回溯/ 点/ 所/ 消耗/ 的/ 空间/ 与/ 候选/ 诊断/ 的/ 个数/ 有关/ ,/ 但是/ 消耗/ 的/ 空间/ 仅为/ NEDE/ 方法/ 的/ 线性/ 倍数/ 而/ 非/ 指数/ 倍数/ ./ 通过/ 实验/ 和/ 定理/ 的/ 证明/ ,/ 可见/ 基于/ 冲突/ 的/ 增量/ 诊断/ 方法/ 在/ 线性/ 倍数/ 增加/ 计算/ 存储空间/ 的/ 代价/ 下/ ,/ 对于/ 诊断/ 得出/ 时间/ 有着/ 数量级/ 上/ 的/ 降低/ ,/ 并且/ 能够/ 保证/ 诊断/ 结果/ 的/ 完备/ 性/ ./ 

