Page1/ 基于/ CTMO/ 模型/ 的/ 数据库/ 损坏/ 数据/ 隔离/ 技术/ 戴华/ 秦小麟/ 郑吉平/ 储惠/ (/ 南京航空航天大学/ 信息科学/ 与/ 技术/ 学院/ 南京/ 210016/ )/ 摘要/ 为了/ 有效/ 地/ 解决/ 现有/ 数据库/ 隔离/ 技术/ 中/ 存在/ 的/ 合法/ 数据/ 误/ 隔离/ 问题/ ,/ 提高/ 合法/ 数据/ 的/ 可用性/ ,/ 提出/ 了/ 一种/ 基于/ 颜色/ -/ 时序/ 标记/ 对象/ (/ CTMO/ )/ 模型/ 的/ 数据库/ 损坏/ 数据/ 隔离/ 技术/ ./ 首先/ ,/ 在/ 事务/ 依赖/ 和/ 影响/ 关系/ 的/ 基础/ 上/ ,/ 提出/ 数据/ 影响/ 关系/ 定义/ ,/ 给出/ 确定/ 损坏/ 数据/ 的/ 理论/ 方法/ ;/ 其次/ ,/ 提出/ CTMO/ 模型/ ,/ 并/ 给出/ 针对/ 事务/ 及其/ 修改/ 数据/ 的/ 动态/ CTMO/ 标记/ 算法/ (/ DCMA/ )/ 和/ 基于/ 隔离/ 标记/ 向量/ 的/ 损坏/ 数据/ 实时/ 隔离/ 算法/ (/ RDQA/ )/ ;/ 然后/ ,/ 证明/ 了/ 该/ 隔离/ 机制/ 的/ 完全性/ 和/ 正确性/ ;/ 最后/ ,/ 给出/ 包含/ 隔离/ 率/ 、/ 误/ 隔离/ 率/ 和/ 数据/ 可用/ 度/ 的/ 隔离/ 效果/ 评估/ 方法/ ./ 实验/ 结果表明/ ,/ 该/ 隔离/ 机制/ 具有/ 更/ 低/ 的/ 误/ 隔离/ 率/ 和/ 更/ 高/ 的/ 数据/ 可用/ 度/ ;/ 并且/ 在/ 事务/ 运行/ 的/ 时间/ 、/ 空间/ 性能/ 负载/ 上/ 具有/ 良好/ 的/ 表现/ ./ 关键词/ 数据库安全/ ;/ 可/ 生存性/ ;/ 损坏/ 数据/ 隔离/ ;/ 颜色/ -/ 时序/ 标记/ 对象/ ;/ 隔离/ 标记/ 向量/ 1/ 引言/ 数据库安全/ 主要/ 关注/ 数据/ 的/ 机密性/ 、/ 完整性/ 和/ 可用性/ [/ 1/ ]/ ./ 传统/ 数据库安全/ 机制/ ,/ 如/ 身份/ 认证/ 、/ 推理/ 控制/ 、/ 访问控制/ 、/ 多级/ 事务处理/ 等/ 重点/ 关注/ 数据/ 的/ 机密性/ ,/ 是/ 以/ 预防/ 为/ 中心/ 的/ 被动/ 保护/ 机制/ ./ 在/ 信息战/ (/ informationwarfare/ )/ [/ 2/ ]/ 背景/ 下/ ,/ 传统/ 的/ 安全/ 机制/ 无法/ 阻止/ 所有/ 非法/ 攻击/ ,/ 无法/ 满足/ 关键/ 信息系统/ (/ 如/ 银行/ 、/ 空中/ 交通管制/ 、/ 电子商务/ 等/ )/ 基本/ 服务/ 不可/ 中断/ 的/ 可/ 生存性/ [/ 3/ ]/ 要求/ ,/ 特别/ 是/ 对于/ 数据/ 的/ 完整性/ 和/ 可用性/ 保护/ 无能为力/ ./ 当/ 数据/ 在/ 遭受/ 内部/ 或/ 外部/ 的/ 攻击/ 而/ 受损/ 时/ ,/ 为/ 保证数据/ 的/ 完整性/ 和/ 可用性/ 以及/ 数据/ 访问/ 服务/ 的/ 持续性/ ,/ 需要/ 在/ 保证/ 数据库/ 不/ 中断/ 的/ 情况/ 下/ ,/ 及时/ 对/ 损坏/ 数据/ 进行/ 数据恢复/ (/ datarecover/ )/ [/ 4/ -/ 6/ ]/ ./ 完成/ 损坏/ 数据/ 的/ 恢复/ 首先/ 需要/ 对/ 恶意/ 事务/ (/ malicioustransactions/ )/ 以及/ 受其/ 影响/ 的/ 事务/ 进行/ 定位/ 和/ 评估/ ,/ 从而/ 找出/ 所有/ 与/ 这些/ 事务/ 相关/ 的/ 损坏/ 数据/ ,/ 然后/ 通过/ 执行/ 撤销/ 事务/ 实现/ 对/ 损坏/ 数据/ 的/ 全面/ 恢复/ ,/ 恢复/ 的/ 时间/ 消耗/ 随着/ 损坏/ 数据/ 规模/ 的/ 扩大/ 而/ 增长/ [/ 4/ -/ 5/ ]/ ;/ 但/ 在/ 恢复/ 完成/ 之前/ 对/ 损坏/ 数据/ 的/ 继续/ 使用/ 又/ 将/ 导致/ 损坏/ 传播/ (/ damagespreading/ )/ [/ 7/ ]/ 的/ 发生/ ,/ 使得/ 更/ 多/ 的/ 合法/ 数据/ 被/ 破坏/ ,/ 甚至/ 造成/ 已/ 恢复/ 数据/ 的/ 二次/ 损坏/ ,/ 这/ 就/ 加大/ 了/ 损坏/ 数据恢复/ 的/ 工作量/ ,/ 延缓/ 了/ 数据库/ 恢复/ 到/ 正常/ 状态/ 的/ 进度/ ./ 因此/ ,/ 迫切需要/ 研究/ 针对/ 损坏/ 数据/ 的/ 隔离/ (/ damagequarantine/ )/ 技术/ ,/ 以/ 限制/ 和/ 阻止/ 损坏/ 数据/ 的/ 使用/ ,/ 抑制/ 损坏/ 传播/ ,/ 提高/ 数据库/ 的/ 可用性/ ./ 从/ 对/ 损坏/ 数据/ 的/ 隔离/ 效果/ 来看/ ,/ 隔离/ 方法/ 可以/ 分为/ 如下/ 4/ 种/ 类型/ [/ 8/ ]/ (/ SQ/ 和/ SD/ 分别/ 表示/ 被/ 隔离/ 的/ 数据/ 集/ 和/ 实际/ 损坏/ 的/ 数据/ 集/ )/ :/ (/ 1/ )/ SQ/ =/ SD/ ,/ 精确/ 隔离/ (/ accuratequarantine/ )/ ,/ 即/ 不/ 存在/ 损坏/ 数据/ 漏/ 隔离/ 和/ 合法/ 数据/ 误/ 隔离/ ;/ (/ 2/ )/ SQ/ / SD/ ,/ 过度/ 隔离/ (/ overquarantine/ )/ ,/ 即/ 不/ 存在/ 损坏/ 数据/ 漏/ 隔离/ ,/ 但/ 存在/ 合法/ 数据/ 误/ 隔离/ ;/ (/ 3/ )/ SQ/ / SD/ ,/ 隔离/ 不足/ (/ notenoughquarantine/ )/ ,/ 即/ 不/ 存在/ 合法/ 数据/ 误/ 隔离/ ,/ 但/ 存在/ 损坏/ 数据/ 漏/ 隔离/ ;/ (/ 4/ )/ SQ/ ∩/ SD/ ≠/ SQ/ ∧/ SQ/ ∩/ SD/ ≠/ SD/ ,/ 近似/ 隔离/ (/ approximatequarantine/ )/ ,/ 即/ 同时/ 存在/ 损坏/ 数据/ 漏/ 隔离/ 和/ 合法/ 数据/ 误/ 隔离/ ./ 其中/ ,/ 损坏/ 数据/ 的/ 漏/ 隔离/ 可能/ 造成/ 损坏/ 传播/ 的/ 发生/ ,/ 而/ 合法/ 数据/ 的/ 误/ 隔离/ 则/ 将/ 造成/ 数据库/ 可用性/ 的/ 降低/ ,/ 因此/ ,/ 精确/ 隔离/ 是/ 数据库/ 损坏/ 数据/ 隔离/ 机制/ 研究/ 的/ 主要/ 目标/ ./ 在/ 已有/ 关于/ 损坏/ 数据/ 隔离/ 技术/ 的/ 研究/ 中/ ,/ Ammann/ 等/ 提出/ 使用/ 4/ 种/ 不同/ 颜色/ 表示/ 数据/ 损坏/ 和/ 恢复/ 程度/ 实现/ 损坏/ 数据/ 隔离/ 的/ 理论/ 方法/ [/ 9/ ]/ ,/ 但/ 并/ 没有/ 给出/ 界定/ 不同/ 颜色/ 数据/ 的/ 具体/ 标准/ 和/ 方法/ ,/ 实用性/ 不高/ ./ Liu/ 等/ 提出/ 基于/ 事务/ 依赖/ 的/ 多/ 阶段/ 隔离/ 方法/ [/ 8/ ]/ ,/ 首先/ 隔离/ 恶意/ 事务/ 执行/ 之后/ 所有/ 被/ 修改/ 的/ 数据/ (/ 包含/ 损坏/ 数据/ 和/ 合法/ 数据/ )/ ,/ 限制/ 对/ 隔离/ 数据/ 的/ 访问/ ,/ 阻止/ 损坏/ 传播/ ,/ 然后/ 再/ 对/ 隔离/ 数据/ 作/ 进一步/ 处理/ ,/ 通过/ 建立/ 事务/ 依赖/ ,/ 对/ 损坏/ 数据/ 和/ 误/ 隔离/ 合法/ 数据/ 进行/ 多/ 阶段/ 的/ 恢复/ 和/ 释放/ ;/ Bai/ 等/ 提出/ 利用/ 动态创建/ 事务/ 依赖/ 关系/ 的/ 损坏/ 数据/ 隔离/ 方案/ [/ 10/ -/ 11/ ]/ ,/ 首先/ 根据/ 恶意/ 事务/ 建立/ 隔离/ 窗/ (/ quarantinewindow/ )/ ,/ 并/ 对/ 隔离/ 窗内/ 的/ 修改/ 数据/ (/ 同样/ 包含/ 损坏/ 数据/ 和/ 合法/ 数据/ )/ 进行/ 全面/ 隔离/ ,/ 限制/ 对/ 隔离/ 数据/ 的/ 访问/ ,/ 以/ 实现/ 对/ 损坏/ 传播/ 的/ 有效/ 抑制/ ,/ 然后/ 利用/ 动态/ 建立/ 的/ 事务/ 依赖/ 关系/ 对/ 所有/ 隔离/ 数据/ 进行/ 评估/ ,/ 恢复/ 损坏/ 数据/ 、/ 释放/ 误/ 隔离/ 合法/ 数据/ ./ 可见/ ,/ 文献/ [/ 8/ ,/ 10/ -/ 11/ ]/ 中/ 的/ 隔离/ 方法/ 能够/ 实现/ 对/ 损坏/ 数据/ 的/ 全面/ 隔离/ ,/ 不/ 存在/ 损坏/ 泄漏/ 和/ 损坏/ 传播/ ;/ 但/ 由于/ 在/ 隔离/ 过程/ 中/ 都/ 存在/ 合法/ 数据/ 误/ 隔离/ 的/ 问题/ ,/ 使得/ 误/ 隔离/ 合法/ 数据/ 不可/ 用/ ,/ 从而/ 造成/ 数据库/ 可用性/ 的/ 降低/ ;/ 这/ 也/ 表明/ 现有/ 的/ 隔离/ 方法/ 属于/ 过度/ 隔离/ 方法/ ,/ 不能/ 实现/ 对/ 损坏/ 数据/ 的/ 精确/ 隔离/ ./ 为了/ 解决/ 现有/ 隔离/ 技术/ 中/ 存在/ 的/ 合法/ 数据/ 误/ 隔离/ 问题/ ,/ 实现/ 对/ 损坏/ 数据/ 的/ 精确/ 隔离/ ,/ 本文/ 提出/ 了/ 一种/ 基于/ 颜色/ -/ 时序/ 标记/ 对象/ (/ CTMO/ )/ 模型/ 的/ 数据库/ 损坏/ 数据/ 隔离/ 机制/ ,/ 其/ 基本原理/ 是/ 通过/ 给出/ CTMO/ 模型/ ,/ 对/ 执行/ 事务/ 及其/ 修改/ 数据/ 实施/ 运行/ 时/ 的/ 动态/ CTMO/ 标记/ ,/ 从而/ 为/ 事务/ 与/ 事务/ 之间/ 、/ 事务/ 与/ 数据/ 之间/ 建立/ 影响/ 关系/ ;/ 当/ 检测/ 到/ 恶意/ 事务时/ ①/ ,/ 根据/ 恶意/ 事务/ 的/ 标记/ 信息/ ,/ 确定/ 能够/ 描述/ 损坏/ 数据/ 特征/ 的/ 隔离/ 标记/ 向量/ ,/ 并/ 利用/ 隔离/ 标记/ 向量/ 对/ 损坏/ 数据/ 实施/ 精确/ 隔离/ ./ 基于/ 该/ 原理/ ,/ 我们/ 提出/ 了/ 针对/ 事务/ 及其/ 修改/ 数据/ 的/ 动态/ CTMO/ 标记/ 算法/ 和/ 基于/ 隔离/ 标记/ 向量/ 的/ 损坏/ 数据/ 实时/ 隔离/ 算法/ ;/ 此外/ ,/ 通过/ 对/ 基于/ CTMO/ 模型/ 的/ 损坏/ 数据/ 隔离/ 机制/ 的/ 完全性/ 和/ 正确性/ 证明/ 可知/ ,/ 该/ 隔离/ 机制/ 不/ 存在/ 损坏/ 数据/ 泄漏/ 和/ 合法/ 数据/ 误/ 隔离/ ,/ 是/ 一种/ 精确/ 隔离/ 的/ 方法/ ./ 最后/ 给出/ 隔离/ 效果/ 对比/ 实验/ 和/ 事务/ 运行/ 的/ 时间/ 、/ 空间/ 性能/ 负载/ 实验/ ./ 2/ 针对/ 恶意/ 事务/ 的/ 损坏/ 数据/ 确定/ 方法/ 恶意/ 事务/ 的/ 非法/ 修改/ 直接/ 造成/ 数据库/ 合法/ 数据/ ①/ 由于/ 恶意/ 事务/ 检测/ 不是/ 本文/ 的/ 研究/ 重点/ ,/ 此处/ 不/ 作/ 详细/ 讨/ Page3/ 的/ 损坏/ ,/ 而/ 损坏/ 数据/ 的/ 继续/ 使用/ 带来/ 的/ 损坏/ 传播/ 又/ 将/ 导致/ 更/ 大规模/ 的/ 间接/ 数据/ 损坏/ ,/ 因此/ ,/ 损坏/ 数据/ 隔离/ 机制/ 的/ 首要任务/ 即/ 为/ 对/ 恶意/ 事务/ 造成/ 的/ 直接/ 和/ 间接/ 数据/ 损坏/ 进行/ 准确/ 定位/ ./ 下面/ ,/ 我们/ 首先/ 给出/ 数据库/ 事务/ 的/ 基本概念/ [/ 7/ ,/ 12/ ]/ ,/ 然后/ 通过/ 引入/ 事务/ 依赖/ 和/ 影响/ 关系/ [/ 4/ ]/ 给出/ 数据/ 影响/ 关系/ 的/ 定义/ ,/ 并/ 利用/ 数据/ 影响/ 关系/ 给出/ 损坏/ 数据/ 的/ 确定/ 方法/ ./ 2.1/ 数据库/ 事务/ 基本概念/ 为/ DB/ =/ {/ x1/ ,/ x2/ ,/ …/ ,/ xn/ }/ ./ 的/ 偏序/ 关系/ (/ 用/ ∝/ i/ 表示/ 偏序/ 关系/ )/ ,/ 满足/ 定义/ 1/ ./ 数据库/ 是/ 一组/ 数据/ 对象/ 的/ 集合/ ,/ 表示/ 定义/ 2/ ./ 一个/ 事务/ T/ 是/ 操作/ 与/ 数据/ 对象/ 之间/ (/ 1/ )/ T/ / {/ (/ RT/ (/ x/ )/ ,/ WT/ (/ x/ )/ |/ x/ ∈/ DB/ )/ }/ ∪/ (/ AT/ ,/ CT/ )/ ;/ (/ 2/ )/ 若/ RT/ (/ x/ )/ ,/ WT/ (/ x/ )/ ∈/ T/ ,/ 则/ RT/ (/ x/ )/ ∝/ iWT/ (/ x/ )/ (/ 3/ )/ AT/ ∈/ T/ 当且/ 仅/ 当/ CT/ / T/ ,/ 或者/ WT/ (/ x/ )/ ∝/ iRT/ (/ x/ )/ ;/ 其中/ ,/ RT/ (/ x/ )/ 、/ WT/ (/ x/ )/ 、/ AT/ 和/ CT/ 分别/ 代表/ 事务/ T/ 读数据/ x/ 、/ 写/ 数据/ x/ 、/ 中断/ 退出/ 和/ 提交/ 操作/ ,/ WT/ (/ x/ )/ ∝/ iRT/ (/ y/ )/ 表示/ WT/ (/ x/ )/ 先于/ RT/ (/ y/ )/ 发生/ ./ 定义/ 3/ ./ TS/ =/ {/ T1/ ,/ T2/ ,/ …/ ,/ Tn/ }/ 表示/ 一组/ 事务/ 集合/ ,/ 一个/ 事务/ 执行/ 历史/ H/ 是/ TS/ 上/ 的/ 偏序/ 关系/ ∝/ H/ ,/ 满足/ (/ 1/ )/ H/ =/ ∪/ n/ (/ 2/ )/ ∪/ n/ 在/ 上述/ 基本概念/ 的/ 基础/ 上/ ,/ 我们/ 假设/ 执行/ 事务/ 不/ 包含/ “/ 盲写/ ”/ (/ blindwrite/ )/ 操作/ [/ 4/ ]/ ,/ 即/ 事务/ 在/ 写/ 数据/ 之前/ 需先/ 读取/ 该/ 数据/ ;/ 同时/ ,/ 事务/ 的/ 执行/ 满足/ 2PL/ 协议/ 要求/ ;/ 另外/ ,/ 由于/ 包含/ 撤销/ (/ Abort/ )/ 操作/ 的/ 事务/ 对/ 数据库/ 数据/ 没有/ 任何/ 影响/ ,/ 对于/ 本文/ 给出/ 的/ 损坏/ 数据/ 隔离/ 策略/ 是/ 透明/ 的/ ,/ 因此/ 不/ 考虑/ 含有/ 撤销/ 操作/ 的/ 事务/ ./ 2.2/ 事务/ 依赖/ 关系/ 与/ 事务/ 影响/ 关系/ 定义/ 定义/ 4/ ./ 事务/ 依赖/ 关系/ (/ transactiondepend/ -/ encyrelation/ )/ 指/ 对于/ 不同/ 事务/ Ti/ 、/ Tj/ ∈/ H/ ,/ 若/ Tj/ 依赖于/ Ti/ ,/ 记为/ Depend/ (/ Tj/ ,/ Ti/ )/ ,/ 则/ 满足/ (/ 1/ )/ (/ Ti/ / Write/ _/ Set/ ∩/ Tj/ / Read/ _/ Set/ ≠/ / )/ ∧/ (/ / x/ (/ x/ ∈/ Ti/ / Write/ _/ Set/ ∩/ Tj/ / Read/ _/ Set/ )/ →/ WTi/ (/ x/ )/ ∝/ iRTj/ (/ x/ )/ )/ ;/ (/ 2/ )/ / x/ (/ x/ ∈/ Ti/ / Write/ _/ Set/ ∩/ Tj/ / Read/ _/ Set/ )/ →/ / / T/ (/ T/ ∈/ H/ ∧/ T/ ≠/ Ti/ ≠/ Tj/ )/ (/ WTi/ (/ x/ )/ ∝/ WT/ (/ x/ )/ ∝/ iRTj/ (/ x/ )/ )/ ./ 其中/ ,/ T/ / Write/ _/ Set/ 表示/ 事务/ T/ 的/ 写集/ ,/ T/ / Read/ _/ Set/ 表示/ 事务/ T/ 的/ 读集/ ./ 引理/ 1/ ./ 对于/ 不同/ 事务/ Ti/ 、/ Tj/ ∈/ H/ 和/ 数据/ x/ ∈/ DB/ ,/ 若/ Ti/ 先写/ x/ ,/ Tj/ 后写/ x/ ,/ 且/ 在/ Ti/ 和/ Tj/ 之间/ 不/ 存在/ 其它/ 事务/ 写/ x/ ,/ 则/ Tj/ 依赖于/ Ti/ ,/ 即/ Depend/ (/ Tj/ ,/ Ti/ )/ 成立/ ./ 证明/ ./ 由于/ 事务/ Tj/ 在/ 写/ x/ 前/ ,/ 必须/ 先/ 读取/ x/ ,/ 故/ Ti/ 写/ x/ 后/ ,/ Tj/ 读/ x/ ,/ 由/ 事务/ 依赖/ 关系/ 的/ 定义/ 可知/ ,/ Tj/ 依赖于/ Ti/ ,/ 即/ Depend/ (/ Tj/ ,/ Ti/ )/ 成立/ ./ 证毕/ ./ 定义/ 5/ ./ 事务/ 影响/ 关系/ (/ transactionaffectionrelation/ )/ 指/ 对于/ 不同/ 事务/ Ti/ 、/ Tj/ ∈/ H/ ,/ 若/ Ti/ 影响/ Tj/ ,/ 记为/ AffectT/ (/ Ti/ ,/ Tj/ )/ ,/ 满足/ 如下/ 任一/ 条件/ :/ (/ 1/ )/ Depend/ (/ Tj/ ,/ Ti/ )/ ;/ (/ 2/ )/ / TS/ (/ TS/ =/ {/ Tk/ ,/ 1/ ,/ Tk/ ,/ 2/ ,/ …/ ,/ Tk/ ,/ n/ }/ / H/ ∧/ Ti/ ,/ Tj/ / TS/ )/ →/ Depend/ (/ Tj/ ,/ Tk/ ,/ n/ )/ ∧/ Depend/ (/ Tk/ ,/ n/ ,/ Tk/ ,/ n/ -/ 1/ )/ ∧/ …/ ∧/ Depend/ (/ Tk/ ,/ 1/ ,/ Ti/ )/ ./ 性质/ 1/ ./ 事务/ 影响/ 关系/ 的/ 传递性/ ./ 对于/ 不同/ 事务/ Ti/ 、/ Tj/ 、/ Tm/ ∈/ H/ ,/ 有/ 如下/ 性质/ 成立/ :/ AffectT/ (/ Ti/ ,/ Tj/ )/ ∧/ AffectT/ (/ Tj/ ,/ Tm/ )/ →/ AffectT/ (/ Ti/ ,/ Tm/ )/ ./ 定义/ 6/ ./ 对于/ 事务/ T/ ∈/ H/ ,/ TAS/ (/ T/ )/ 表示/ H/ 中/ 所有/ 受/ T/ 影响/ 的/ 事务/ 集合/ ,/ 则/ TAS/ (/ T/ )/ =/ {/ T/ |/ AffectT/ (/ T/ ,/ T/ )/ }/ ∪/ {/ T/ }/ ,/ 若/ T/ 为/ 恶意/ 事务/ ,/ 则/ 称/ TAS/ (/ T/ )/ 中/ 的/ 受/ 影响/ 事务/ 为脏/ 事务/ (/ dirtytransac/ -/ tions/ )/ ,/ 被脏/ 事务/ 修改/ 的/ 数据/ 均/ 为/ 损坏/ 数据/ ./ 2.3/ 基于/ 数据/ 影响/ 关系/ 的/ 损坏/ 数据/ 确定/ 方法/ 基于/ 上述/ 事务/ 依赖/ 和/ 影响/ 关系/ 定义/ ,/ 我们/ 给出/ 描述/ 事务/ 与/ 数据/ 之间/ 关系/ 的/ 数据/ 影响/ 关系/ 定义/ ,/ 并/ 利用/ 该/ 数据/ 影响/ 关系/ 给出/ 针对/ 恶意/ 事务/ 的/ 损坏/ 数据/ 确定/ 方法/ ./ 定义/ 7/ ./ 数据/ 影响/ 关系/ (/ dataaffectionrela/ -/ tion/ )/ 指/ 对于/ 事务/ T/ ∈/ H/ 及/ 数据/ x/ ∈/ DB/ ,/ 若/ T/ 影响/ x/ ,/ 记为/ AffectD/ (/ T/ ,/ {/ x/ }/ )/ ,/ 则/ 满足/ DB/ ,/ 数据/ 影响/ 关系/ 具有/ 如下/ 性质/ :/ AffectD/ (/ Ti/ ,/ {/ x/ }/ )/ ;/ 性质/ 2/ ./ 对于/ 不同/ 事务/ Ti/ 、/ Tj/ ∈/ H/ 和/ 数据/ x/ ∈/ (/ 1/ )/ AffectT/ (/ Ti/ ,/ Tj/ )/ ∧/ AffectD/ (/ Tj/ ,/ {/ x/ }/ )/ →/ (/ 2/ )/ x/ ∈/ Ti/ ./ Write/ _/ Set/ →/ AffectD/ (/ Ti/ ,/ {/ x/ }/ )/ ./ 证明/ ./ (/ 1/ )/ 对于/ 任意/ T/ ∈/ TAS/ (/ Tj/ )/ ,/ 则/ AffectT/ (/ Tj/ ,/ T/ )/ ,/ 而/ 已知/ AffectT/ (/ Ti/ ,/ Tj/ )/ 成立/ ,/ 则/ 由/ 性质/ 1/ 可知/ AffectT/ (/ Ti/ ,/ T/ )/ 成立/ ,/ 因此/ T/ ∈/ TAS/ (/ Ti/ )/ ,/ 所以/ TAS/ (/ Tj/ )/ / TAS/ (/ Ti/ )/ 成立/ ,/ 则/ {/ T/ ./ Write/ _/ Set/ |/ T/ ∈/ TAS/ (/ Tj/ )/ }/ / {/ T/ / Write/ _/ Set/ |/ T/ ∈/ TAS/ (/ Ti/ )/ }/ 也/ 成立/ ,/ 又/ 由/ 已知/ AffectD/ (/ Tj/ ,/ {/ x/ }/ )/ 可知/ x/ ∈/ {/ T/ / Write/ _/ Set/ |/ T/ ∈/ TAS/ (/ Tj/ )/ }/ 成立/ ,/ 则/ x/ ∈/ {/ T/ / Write/ _/ Set/ |/ Page4T/ ∈/ TAS/ (/ Ti/ )/ }/ 也/ 成立/ ,/ 再/ 由/ 定义/ 7/ 可得/ AffectD/ (/ Ti/ ,/ {/ x/ }/ )/ 成立/ ./ (/ 2/ )/ 由/ 定义/ 6/ 可知/ TAS/ (/ Ti/ )/ =/ {/ T/ |/ AffectT/ (/ Ti/ ,/ T/ )/ }/ ∪/ {/ Ti/ }/ ,/ 所以/ Ti/ / Write/ _/ Set/ / {/ T/ / Write/ _/ Set/ |/ T/ ∈/ TAS/ (/ Ti/ )/ }/ ,/ 而/ 已知/ x/ ∈/ Ti/ / Write/ _/ Set/ 成立/ ,/ 所以/ x/ ∈/ {/ T/ / Write/ _/ Set/ |/ T/ ∈/ TAS/ (/ Ti/ )/ }/ 也/ 成立/ ,/ 则/ 由/ 定义/ 7/ 可知/ AffectD/ (/ Ti/ ,/ {/ x/ }/ )/ 成立/ ./ 证毕/ ./ 定义/ 8/ ./ 对于/ 事务/ T/ ∈/ H/ ,/ TADS/ (/ T/ )/ 表示/ 数据库/ 中/ 所有/ 受/ T/ 影响/ 的/ 数据/ 集合/ ,/ 则/ TADS/ (/ T/ )/ =/ {/ T/ / Write/ _/ Set/ |/ T/ ∈/ TAS/ (/ T/ )/ }/ ./ 引理/ 2/ ./ 若/ Bi/ ∈/ H/ 为/ 恶意/ 事务/ ,/ 则/ TADS/ (/ Bi/ )/ 中/ 的/ 数据/ 都/ 为/ 损坏/ 数据/ ./ 证明/ ./ 由于/ Bi/ 是/ 恶意/ 事务/ ,/ 由/ 定义/ 6/ 可知/ ,/ TAS/ (/ Bi/ )/ 中/ 的/ 事务/ 均/ 为/ 脏/ 事务/ ,/ 而/ 被/ 脏/ 事务/ 修改/ 的/ 数据/ 又/ 都/ 是/ 损坏/ 数据/ ,/ 且/ 有/ TADS/ (/ Bi/ )/ =/ {/ T/ / Write/ _/ Set/ |/ T/ ∈/ TAS/ (/ Bi/ )/ }/ ,/ 因此/ ,/ TADS/ (/ Bi/ )/ 中/ 的/ 数据/ 都/ 为/ 损坏/ 数据/ ./ 由/ 引理/ 2/ 可知/ ,/ 在/ 数据库/ 中/ ,/ 恶意/ 事务/ 的/ 数据/ 修改/ 操作/ 导致/ 合法/ 数据/ 的/ 直接/ 损坏/ ,/ 而/ 其它/ 合法/ 事务/ 对/ 这些/ 损坏/ 数据/ 的/ 访问/ ,/ 使/ 其受/ 恶意/ 事务/ 影响/ 而/ 成为/ 脏/ 事务/ ,/ 进而/ 造成/ 数据库/ 中/ 更/ 多/ 的/ 合法/ 数据/ 的/ 间接/ 损坏/ ./ 定义/ 9/ ./ 损坏/ 数据/ 集合/ (/ damagedataset/ )/ ./ 设/ B/ =/ {/ B1/ ,/ B2/ ,/ …/ ,/ Bm/ }/ / H/ 为/ 恶意/ 事务/ 集合/ ,/ 数据库/ 中/ 所有/ 受/ B/ 影响/ 的/ 数据/ 集合/ 即/ 为/ 损坏/ 数据/ 集合/ ,/ 记为/ DDS/ (/ B/ )/ ,/ 则/ 下面/ ,/ 结合/ 例/ 1/ 对/ 上述/ 定义/ 做/ 进一步/ 说明/ ./ 例/ 1/ ./ 设有/ 事务/ B1/ 、/ T1/ 和/ T2/ ,/ 其中/ B1/ 为/ 恶意/ 事务/ ,/ 事务/ 操作/ 执行/ 顺序/ 为/ RB1/ (/ x/ )/ ∝/ iWB1/ (/ x/ )/ ∝/ iCB1/ ∝/ iRT1/ (/ x/ )/ ∝/ iRT1/ (/ y/ )/ ∝/ iWT1/ (/ y/ )/ ∝/ iCT1/ ∝/ iRT2/ (/ z/ )/ ∝/ iWT2/ (/ z/ )/ ∝/ iCT2/ ∝/ iRT3/ (/ y/ )/ ∝/ iRT3/ (/ u/ )/ ∝/ iWT3/ (/ u/ )/ ∝/ iCT3/ ,/ 数据/ x/ ,/ y/ ,/ z/ ,/ u/ ∈/ DB/ ./ 由/ 前述/ 定义/ 可知/ ,/ 例/ 1/ 中/ 满足/ 事务/ 依赖/ 关系/ 的/ 有/ Depend/ (/ T1/ ,/ B1/ )/ 和/ Depend/ (/ T3/ ,/ T1/ )/ ,/ 满足/ 事务/ 影响/ 关系/ 的/ 有/ AffectT/ (/ B1/ ,/ T1/ )/ 、/ AffectT/ (/ T1/ ,/ T3/ )/ 和/ AffectT/ (/ B1/ ,/ T3/ )/ ,/ 受/ B1/ 影响/ 的/ 事务/ 集合/ 和/ 数据/ 集合/ 分别/ 为/ TAS/ (/ B1/ )/ =/ {/ B1/ ,/ T1/ ,/ T3/ }/ 和/ TADS/ (/ B1/ )/ =/ {/ x/ ,/ y/ ,/ u/ }/ ;/ 由于/ B1/ 为/ 恶意/ 事务/ ,/ 则/ T1/ 和/ T3/ 为脏/ 事务/ ,/ x/ 、/ y/ 和/ u/ 被/ 损坏/ ,/ 因此/ 损坏/ 数据/ 集合/ DDS/ (/ B/ )/ =/ TADS/ (/ B1/ )/ =/ {/ x/ ,/ y/ ,/ u/ }/ ,/ 而/ z/ 不受/ 任何/ 影响/ ,/ 仍为/ 合法/ 数据/ ./ 在/ 例/ 1/ 中/ ,/ 若/ 采用/ 文献/ [/ 8/ ,/ 10/ -/ 11/ ]/ 中/ 的/ 隔离/ 方法/ ,/ 则/ 需/ 将/ B1/ 之后/ 所有/ 事务/ (/ 包括/ B1/ )/ 的/ 写/ 数据/ 全部/ 隔离/ ,/ 即/ x/ 、/ y/ 、/ z/ 和/ u/ 均/ 被/ 隔离/ ,/ 此时/ 合法/ 数据/ z/ 也/ 将/ 由于/ 被误/ 隔离/ 而/ 不可/ 用/ ;/ 而/ 本文/ 提出/ 的/ 基于/ CTMO/ 模型/ 的/ 损坏/ 数据/ 隔离/ 机制/ 将/ 只/ 隔离/ 损坏/ 数据/ x/ 、/ y/ 和/ u/ ,/ 能够/ 实现/ 对/ 损坏/ 数据/ 的/ 精确/ 隔离/ ./ 3/ 基于/ CTMO/ 模型/ 的/ 损坏/ 数据/ 隔离/ 机制/ 我们/ 首先/ 给出/ 颜色/ -/ 时序/ 标记/ 对象/ (/ CTMO/ )/ 模型/ 定义/ ,/ 然后/ ,/ 在/ 该/ 模型/ 的/ 基础/ 上/ 提出/ 针对/ 事务/ 及其/ 修改/ 数据/ 的/ 动态/ CTMO/ 标记/ 算法/ 和/ 基于/ 隔离/ 标记/ 向量/ 的/ 损坏/ 数据/ 实时/ 隔离/ 算法/ ,/ 最后/ 给出/ 基于/ CTMO/ 模型/ 的/ 损坏/ 数据/ 隔离/ 机制/ 的/ 完全性/ 和/ 正确性/ 证明/ ./ 3.1/ 颜色/ -/ 时序/ 标记/ 对象/ 模型/ (/ CTMO/ 模型/ )/ 定义/ 10/ ./ 颜色/ -/ 时序/ 标记/ 对象/ (/ Color/ -/ TimeMarksObject/ ,/ CTMO/ )/ :/ 每/ 一个/ CTMO/ 对象/ 是/ 一个二元/ 组/ c/ =/ (/ cs/ ,/ ts/ )/ ,/ 其中/ ,/ cs/ 为/ 不同/ 颜色/ 组成/ 的/ 颜色/ 集合/ 属性/ ,/ 记为/ c/ / cs/ ,/ ts/ 为/ 时间/ 戳/ 属性/ ,/ 记为/ c/ / ts/ ./ 定义/ 11/ ./ CTMO/ 模型/ 运算/ 操作符/ :/ 设/ CTMO/ 集合/ C/ =/ {/ c1/ ,/ c2/ ,/ …/ ,/ cn/ }/ ,/ 则/ / ,/ 覆盖/ 关系/ 操作/ :/ 当且/ 仅/ 当/ 满足/ ci/ / cs/ / cj/ / cs/ ∧/ ci/ / ts/ / cj/ / ts/ 时/ ,/ cj/ / ci/ 成立/ ,/ 表示/ cj/ 覆盖/ ci/ ,/ 或/ ci/ 被/ cj/ 覆盖/ ;/ =/ ,/ 等价关系/ 操作/ :/ 当且/ 仅/ 当/ 满足/ ci/ / cs/ =/ cj/ / cs/ ∧/ ci/ / ts/ =/ cj/ / ts/ 时/ ,/ ci/ =/ cj/ 成立/ ,/ 表示/ ci/ 与/ cj/ 等价/ ;/ / ,/ 复合/ 运算/ 操作/ :/ ci/ / cj/ =/ (/ ci/ / cs/ ∪/ cj/ / cs/ ,/ max/ {/ ci/ / ts/ ,/ cj/ / ts/ }/ )/ ,/ 其中/ max/ (/ t1/ ,/ t2/ )/ 表示/ 取/ 较大/ 的/ 时间/ 戳/ ;/ Ω/ ,/ 基集/ 运算/ 操作/ :/ Ω/ (/ C/ )/ =/ {/ ci/ ∈/ C/ |/ 对于/ 任意/ cj/ ∈/ C/ (/ i/ ≠/ j/ )/ ,/ ci/ / cj/ 均/ 不/ 成立/ }/ ,/ 即/ 由/ C/ 中/ 不能/ 再/ 覆盖/ 其它/ 标记/ 对象/ 的/ CTMO/ 标记/ 对象/ 构成/ 的/ 集合/ ,/ 称之为/ C/ 的/ 基集/ ./ 性质/ 3/ ./ 设/ a/ 、/ b/ 和/ c/ 为/ CTMO/ 标记/ 对象/ ,/ 则/ 有/ 如下/ 性质/ 成立/ :/ (/ 1/ )/ 覆盖/ 关系/ 传递性/ :/ a/ / b/ ∧/ b/ / c/ →/ a/ / c/ ;/ (/ 2/ )/ 等价关系/ 传递性/ :/ a/ =/ b/ ∧/ b/ =/ c/ →/ a/ =/ c/ ;/ (/ 3/ )/ 等价/ 和/ 覆盖/ 的/ 一致性/ :/ a/ / b/ ∧/ b/ / a/ / a/ =/ b/ ./ 证明/ ./ (/ 1/ )/ 由/ a/ / b/ 可知/ b/ / cs/ / a/ / cs/ ∧/ b/ / ts/ / a/ / ts/ ,/ 由/ b/ / c/ 可知/ c/ / cs/ / b/ / cs/ ∧/ c/ / ts/ / b/ / ts/ ,/ 易得/ c/ / cs/ / a/ / cs/ ∧/ c/ / ts/ / a/ / ts/ ,/ 所以/ a/ / c/ 成立/ ;/ 同理可证/ (/ 2/ )/ 也/ 成立/ ;/ (/ 3/ )/ (/ 充分性/ )/ 由/ a/ / b/ ∧/ b/ / a/ 可知/ (/ b/ / cs/ / a/ / cs/ ∧/ b/ / ts/ / a/ / ts/ )/ ∧/ (/ a/ / cs/ / b/ / cs/ ∧/ a/ / ts/ / b/ / ts/ )/ ,/ 则/ 有/ a/ / cs/ =/ Page5b/ / cs/ ∧/ a/ / ts/ =/ b/ / ts/ ,/ 所以/ a/ =/ b/ ;/ (/ 必要性/ )/ 由/ a/ =/ b/ 可知/ a/ / cs/ =/ b/ / cs/ ∧/ a/ / ts/ =/ b/ / ts/ ,/ 因此/ (/ a/ / cs/ / b/ / cs/ ∧/ b/ / cs/ / a/ / cs/ )/ ∧/ (/ a/ / ts/ / b/ / ts/ ∧/ b/ / ts/ / a/ / ts/ )/ 成立/ ,/ 即/ (/ b/ / cs/ / a/ / cs/ ∧/ b/ / ts/ / A/ / ts/ )/ ∧/ (/ a/ / cs/ / b/ / cs/ ∧/ a/ / ts/ / b/ / ts/ )/ 成立/ ,/ 所以/ a/ / b/ ∧/ b/ / a/ 成立/ ./ 引理/ 3/ ./ 设/ a/ 、/ b/ 为/ CTMO/ 标记/ 对象/ ,/ 若/ c/ =/ a/ / b/ ,/ 则/ c/ / a/ 、/ c/ / b/ 都/ 成立/ ./ 证明/ ./ 由/ 定义/ 11/ 可知/ c/ =/ a/ / b/ =/ (/ a/ / cs/ ∪/ b/ / cs/ ,/ max/ {/ a/ / ts/ ,/ b/ / ts/ }/ )/ ,/ 则/ 有/ c/ / cs/ =/ a/ / cs/ ∪/ b/ / cs/ 和/ c/ / ts/ =/ max/ {/ a/ / ts/ ,/ b/ / ts/ }/ 成立/ ,/ 易得/ a/ / cs/ / c/ / cs/ ∧/ a/ / ts/ / c/ / ts/ 和/ b/ / cs/ / c/ / cs/ ∧/ b/ / ts/ / c/ / ts/ 也/ 成立/ ,/ 所以/ c/ / a/ 、/ c/ / b/ 均/ 成立/ ./ 在/ 具体/ 应用/ 中/ ,/ CTMO/ 模型/ 的/ 实现/ 并/ 不/ 复杂/ ,/ 下面/ ,/ 我们/ 结合/ CTMO/ 结构/ 示例/ 图/ (/ 如图/ 1/ 所示/ )/ 给出/ 模型/ 的/ 一种/ 简单/ 实现/ 方法/ ./ 在/ 图/ 1/ 中/ ,/ c1/ 、/ c2/ 、/ c3/ 、/ c4/ 和/ cn/ 为/ CTMO/ 对象/ ,/ ts/ 和/ cs/ 分别/ 为/ CTMO/ 对象/ 的/ 时间/ 戳/ 属性/ 和/ 颜色/ 集合/ 属性/ ,/ 其中/ ,/ ts/ 直接/ 记录时间/ 戳/ 数据/ (/ 设/ 时间/ 戳/ t1/ </ t2/ </ t3/ </ t4/ </ tn/ )/ ,/ cs/ 为/ 颜色/ 集合/ 属性/ 指针/ ,/ 直接/ 指向/ 颜色/ 集合/ 属性/ 字典/ 中/ 的/ 颜色/ 集合/ 属性数据/ ;/ 颜色/ 集合/ 属性/ 字典/ (/ ColorsSetAttributesDictionary/ ,/ CSAD/ )/ 用来/ 集中/ 存放/ CTMO/ 颜色/ 集合/ 属性/ 信息/ ,/ 其中/ 的/ 行/ 表示/ CTMO/ 的/ 颜色/ 集合/ 属性/ ,/ 列/ si/ 表示/ 颜色/ 集合/ 属性/ 中/ 是否/ 含有/ 某/ 单色/ 元素/ (/ 例如/ 红色/ 、/ 黄色/ 等/ ,/ “/ 1/ ”/ 和/ “/ 0/ ”/ 分别/ 表示/ 含有/ 和/ 不/ 含有/ )/ ,/ 在/ 具体/ 的/ 实现/ 中/ ,/ CSAD/ 中/ 的/ 颜色/ 属性/ 信息/ 可以/ 使用/ k/ 个/ 比特/ 位/ 表示/ (/ 存储/ 时/ 便于/ 压缩/ ,/ 例如/ 某/ 颜色/ 集合/ 属性/ 仅/ 含有/ si/ 和/ sj/ 颜色/ ,/ 则/ 只/ 需/ 存储/ 位置/ i/ 和/ j/ 即可/ ,/ 由于/ 不是/ 本文/ 的/ 重点/ ,/ 这里/ 不再/ 展开/ 叙述/ )/ ./ 结合/ 前述/ 定义/ ,/ 图/ 1/ 中/ 的/ CTMO/ 集合/ C/ =/ {/ c1/ ,/ c2/ ,/ c3/ ,/ c4/ ,/ …/ ,/ cn/ }/ ,/ 其中/ ,/ c1/ =/ (/ t1/ ,/ {/ s1/ }/ )/ ,/ c2/ =/ (/ t2/ ,/ {/ s2/ }/ )/ ,/ c3/ =/ (/ t3/ ,/ {/ s2/ }/ )/ ,/ c4/ =/ (/ t4/ ,/ {/ s4/ }/ )/ ,/ cn/ =/ (/ t4/ ,/ {/ s1/ ,/ s2/ ,/ s4/ }/ )/ ,/ 若/ 颜色/ 属性/ 集合/ 字典/ 中/ 省略/ 的/ 单色/ 元素/ 都/ 为/ “/ 0/ ”/ ,/ 则/ 易得/ cn/ / c1/ 、/ cn/ / c2/ 、/ cn/ / c3/ 、/ cn/ / c4/ 和/ c3/ / c2/ 成立/ ,/ 且/ 有/ Ω/ (/ C/ )/ =/ {/ c1/ ,/ c2/ ,/ c4/ }/ ./ 在/ 本文/ 提出/ 的/ 损坏/ 数据/ 隔离/ 机制/ 中/ ,/ CTMO/ 主要/ 用于/ 事务/ 和/ 数据/ 的/ 标记/ ,/ 含有/ 标记/ 的/ 事务/ 和/ 数据/ 将/ 同时/ 具备/ CTMO/ 模型/ 和/ 事务/ 模型/ 的/ 相关/ 特性/ (/ 见/ 4.2/ 节/ )/ ,/ 而/ 标记/ 对象/ 的/ 生成/ 遵循/ CTMO/ 模型/ 中/ 的/ 操作/ 运算/ 规则/ (/ 定义/ 11/ )/ ,/ 对/ 损坏/ 数据/ 的/ 实时/ 隔离/ 机制/ 正是/ 建立/ 在/ 对/ 事务/ 和/ 数据/ 的/ 动态/ CTMO/ 标记/ 基础/ 上/ 的/ ,/ 因此/ CTMO/ 模型/ 是/ 该/ 隔离/ 机制/ 的/ 理论/ 基础/ ./ 3.2/ 针对/ 事务/ 及其/ 修改/ 数据/ 的/ 动态/ CTMO/ 标记/ 算法/ 为了/ 全面/ 、/ 及时/ 地/ 确定/ 数据库/ 中/ 的/ 损坏/ 数据/ ,/ 同时/ 保证系统/ 运行/ 的/ 持续性/ ,/ 首先/ 需要/ 对/ 数据库/ 中/ 的/ 事务/ 动态/ 建立/ 事务/ 依赖/ 和/ 影响/ 关系/ ,/ 并/ 为/ 事务/ 及其/ 修改/ 数据/ 建立/ 关联/ ,/ 为此/ ,/ 我们/ 提出/ 了/ 针对/ 事务/ 及其/ 修改/ 数据/ 的/ 动态/ CTMO/ 标记/ 算法/ (/ DynamicCTMOMarkingAlgorithm/ ,/ DCMA/ )/ ./ 该/ 算法/ 在/ 事务/ 运行/ 过程/ 中/ 对/ 事务/ 及其/ 修改/ 数据/ 实施/ 动态/ CTMO/ 标记/ ,/ 利用/ CTMO/ 模型/ 的/ 定义/ 和/ 特性/ ,/ 为/ 事务/ 与/ 事务/ 之间/ 、/ 事务/ 与/ 数据/ 之间/ 建立/ 影响/ 关系/ ,/ 而/ 隔离/ 算法/ (/ 见/ 3.3/ 节/ )/ 则/ 直接/ 利用/ 这些/ 联系/ 实现/ 对/ 损坏/ 数据/ 的/ 实时/ 隔离/ ./ 我们/ 用/ x/ / ctmo/ 和/ T/ / ctmo/ 分别/ 表示/ 数据/ x/ 和/ 事务/ T/ 的/ CTMO/ 标记/ ,/ T/ / begin/ _/ time/ 表示/ 事务/ T/ 的/ 开始/ 执行/ 时间/ ,/ DCMA/ 算法/ 过程/ 如/ 算法/ 1/ 所示/ ./ 算法/ 1/ ./ DCMA/ 算法/ ./ 输入/ :/ 数据库/ 事务/ T/ 输出/ :/ 事务/ 及其/ 修改/ 数据/ 标记/ 完成/ 1/ ./ temp/ _/ ctmo/ =/ (/ {/ }/ ,/ 0/ )/ ,/ write/ _/ set/ =/ {/ }/ ;/ 2/ ./ temp/ _/ ctmo/ / ts/ =/ T/ / begin/ _/ time/ ;/ 3/ ./ 获取/ T/ 的/ 第一个/ 操作/ o/ ;/ 4/ ./ 执行/ 当前/ 操作/ o/ ;/ 5/ ./ IFo/ 为/ RT/ (/ x/ )/ THEN/ // / 读/ 操作/ / // 6/ ./ temp/ _/ ctmo/ =/ temp/ _/ ctmo/ / x/ ./ ctmo/ ;/ 7/ ./ ENDIF8/ ./ IFo/ 为/ WT/ (/ x/ )/ THEN/ // / 写/ 操作/ / // 9/ ./ write/ _/ set/ =/ write/ _/ set/ +/ {/ x/ }/ ;/ 10/ ./ ENDIF11/ ./ IFo/ 为/ CTTHEN/ // / 提交/ 操作/ / // 12/ ./ IFtemp/ _/ ctmo/ / cs/ 为空/ THEN13/ ./ temp/ _/ ctmo/ / cs/ =/ get/ _/ new/ _/ color/ (/ )/ ;/ 14/ ./ ENDIF15/ ./ IFwrite/ _/ set/ 非空/ THEN16/ ./ T/ ./ ctmo/ =/ temp/ _/ ctmo/ ;/ // / 标记/ 事务/ / // 17/ ./ FOREACHx/ ∈/ write/ _/ set18/ ./ x/ ./ ctmo/ =/ temp/ _/ ctmo/ ;/ // / 标记/ 数据/ / // 19/ ./ ENDFOR20/ ./ ELSE/ // / 只读/ 事务/ 的/ CTMO/ 标记/ 为空/ / // 21/ ./ 设置/ T/ ./ ctmo/ 为空/ ;/ 22/ ./ ENDIFPage623/ ./ Exit/ ;/ 24/ ./ ENDIF25/ ./ IFo/ 为/ ATTHEN/ // / 撤销/ 操作/ / // 26/ ./ Exit/ ;/ 27/ ./ ENDIF28/ ./ 获取/ 下/ 一个/ 操作/ o/ ,/ 并/ 转步/ 4/ ;/ 注/ :/ temp/ _/ ctmo/ 表示/ 颜色/ -/ 时序/ 标记/ 对象/ 变量/ ;/ write/ _/ set/ 表示/ 事务/ 写/ 数据/ 集合/ 变量/ ;/ get/ _/ new/ _/ color/ (/ )/ 表示/ 获取/ 一个/ 未/ 使用/ 过/ 的/ 颜色/ 对象/ ;/ Exit/ 表示/ 事务/ 退出/ ,/ 下同/ ./ 在/ 算法/ 1/ 中/ ,/ 首先/ 设置/ T/ 开始/ 执行/ 时间/ 为/ CTMO/ 变量/ temp/ _/ ctmo/ 的/ 时序/ 属性/ ;/ 然后/ ,/ 通过/ 复合/ T/ 读取数据/ 的/ CTMO/ ,/ 生成/ temp/ _/ ctmo/ 的/ 颜色/ 属性/ ,/ 同时/ 收集/ 被/ T/ 修改/ 的/ 数据/ ;/ 最后/ ,/ 若/ 事务/ 顺利/ 提交/ ,/ 则/ 直接/ 使用/ temp/ _/ ctmo/ 标记/ T/ 及/ T/ 修改/ 的/ 数据/ ,/ 若/ 事务/ 被/ 撤销/ ,/ 则/ 不/ 进行/ 任何/ 标记/ 动作/ ,/ 直接/ 退出/ ./ 数据/ 之间/ 具有/ 如下/ 关系/ 特性/ :/ 由/ DCMA/ 算法/ 过程/ 可知/ ,/ 事务/ 与/ 事务/ 、/ 事务/ 与/ (/ 1/ )/ 当/ 事务/ T/ 执行/ 完成/ 时/ ,/ T/ 的/ CTMO/ 标记/ 即/ 被/ 确定/ 下来/ ,/ 且/ 对于/ T/ 之前/ 完成/ 的/ 事务/ T/ ,/ 如果/ T/ / ctmo/ / T/ / ctmo/ ,/ 则/ T/ 与/ T/ 满足/ 事务/ 影响/ 关系/ ,/ 即/ AffectT/ (/ T/ ,/ T/ )/ 成立/ (/ 见/ 引理/ 5/ )/ ./ (/ 2/ )/ 对于/ 事务/ T/ 修改/ 的/ 数据/ x/ ,/ 随着/ T/ 执行/ 完成/ ,/ x/ 的/ CTMO/ 标记/ 也/ 随即/ 确定/ ,/ 与/ 事务/ 本身/ 不同/ ,/ 由于/ 数据/ 的/ 共享/ 访问/ 特性/ ,/ 此后/ 其它/ 事务/ 对/ x/ 的/ 修改/ 可能/ 会/ 造成/ x/ 的/ CTMO/ 标记/ 发生变化/ ,/ 但/ 数据/ x/ 与/ 事务/ T/ 的/ CTMO/ 标记/ 始终/ 满足/ 覆盖/ 关系/ ,/ 即/ x/ / ctmo/ / T/ / ctmo/ 成立/ (/ 见/ 引理/ 6/ )/ ./ (/ 3/ )/ 对于/ 事务/ T/ 和/ 数据库/ 中/ 的/ 任一/ 数据/ x/ ,/ 如果/ x/ 与/ T/ 的/ CTMO/ 标记/ 满足/ 覆盖/ 关系/ x/ / ctmo/ / T/ / ctmo/ ,/ 则/ T/ 影响/ 数据/ x/ ,/ 即/ AffectD/ (/ T/ ,/ {/ x/ }/ )/ 成立/ (/ 见/ 引理/ 7/ )/ ./ DCMA/ 算法/ 利用/ 在/ 事务/ 运行/ 过程/ 中/ 对/ 事务/ 及其/ 修改/ 数据/ 实施/ 动态/ CTMO/ 标记/ ,/ 使得/ 事务/ 的/ 执行/ 不/ 被/ 暂停/ 或/ 中断/ ,/ 保证系统/ 服务/ 的/ 持续性/ ,/ 同时/ ,/ 在/ 实施/ 动态/ 标记/ 的/ 过程/ 中/ ,/ 建立/ 事务/ 与/ 事务/ 、/ 事务/ 与/ 数据/ 之间/ 的/ 影响/ 关系/ ,/ 从而/ 为/ 实现/ 损坏/ 数据/ 的/ 实时/ 隔离/ 创造/ 必要条件/ ./ 3.3/ 基于/ 隔离/ 标记/ 向量/ 的/ 损坏/ 数据/ 实时/ 隔离/ 算法/ 假设/ 在/ t/ 时刻/ ,/ 系统/ 检测/ 出/ 恶意/ 事务/ 集合/ B/ =/ {/ B1/ ,/ B2/ ,/ …/ ,/ Bm/ }/ ./ 定义/ 12/ ./ 隔离/ 标记/ 向量/ (/ quarantinemarksvectors/ )/ ./ B/ 中/ 所有/ 恶意/ 事务/ 的/ CTMO/ 集合/ 的/ 基集/ 称为/ 隔离/ 标记/ 向量/ ,/ 记/ 为/ 犙/ 犕/ 犞/ (/ B/ )/ ,/ 则/ 犙/ 犕/ 犞/ (/ B/ )/ =/ Ω/ (/ {/ Bi/ ./ ctmo/ |/ Bi/ ∈/ B/ }/ )/ ./ 定义/ 13/ ./ 隔离/ 协议/ (/ quarantineprotocols/ )/ ./ 对于/ 数据库/ 中/ 任意/ 数据/ x/ ∈/ DB/ ,/ 若/ 存在/ c/ ∈/ 犙/ 犕/ 犞/ (/ B/ )/ 满足/ x/ ./ ctmo/ / c/ ,/ 则/ x/ 需/ 隔离/ ,/ 以/ 限制/ 其它/ 执行/ 事务/ 对/ 数据/ x/ 的/ 访问/ ./ 定义/ 14/ ./ 隔离/ 数据/ 集合/ (/ quarantinedataset/ )/ ./ 数据库/ 中/ 所有/ 满足/ 隔离/ 协议/ 的/ 数据/ 集合/ 称为/ 隔离/ 数据/ 集合/ ,/ 记为/ QDS/ (/ B/ )/ ,/ 则/ QDS/ (/ B/ )/ =/ ∪/ Bi/ ∈/ B/ {/ x/ |/ x/ ./ ctmo/ / Bi/ ./ ctmo/ ∧/ x/ ∈/ DB/ }/ ./ 由/ 定义/ 14/ 可知/ ,/ 满足/ 隔离/ 协议/ 的/ 数据/ 均/ 在/ 隔离/ 数据/ 集合/ 中/ ,/ 且/ 都/ 是/ 受/ 恶意/ 事务/ 影响/ 的/ 损坏/ 数据/ (/ 见/ 定理/ 2/ )/ ,/ 需要/ 及时/ 进行/ 隔离/ ,/ 以/ 限制/ 其它/ 执行/ 事务/ 对/ 损坏/ 数据/ 的/ 读/ 、/ 写访问/ ,/ 抑制/ 损坏/ 传播/ ./ 对/ 损坏/ 数据/ 的/ 隔离/ 和/ 限制/ 的/ 基本原理/ 就是/ 对/ 执行/ 事务/ 的/ 访问/ 数据/ 进行/ 隔离/ 协议/ 检查/ ,/ 若/ 满足/ 隔离/ 协议/ ,/ 则/ 表明/ 该/ 事务/ 正在/ 请求/ 访问/ 被/ 隔离/ 的/ 损坏/ 数据/ ,/ 此时/ ,/ 立刻/ 中断/ 并/ 撤销/ 该/ 事务/ ,/ 阻止/ 损坏/ 传播/ ./ 利用/ 该/ 原理/ 我们/ 提出/ 了/ 基于/ 隔离/ 标记/ 向量/ 的/ 损坏/ 数据/ 实时/ 隔离/ 算法/ (/ Real/ -/ timeDamageQuarantineAlgorithm/ ,/ RDQA/ )/ ,/ 具体/ 算法/ 过程/ 如/ 算法/ 2/ 所示/ ./ 算法/ 2/ ./ RDQA/ 算法/ ./ 输入/ :/ 隔离/ 标记/ 向量/ 犙/ 犕/ 犞/ (/ B/ )/ ,/ 数据库/ 事务/ T/ 输出/ :/ 实现/ 损坏/ 数据/ 的/ 实时/ 隔离/ 1/ ./ 获取/ T/ 的/ 第一个/ 操作/ o/ ;/ 2/ ./ IFo/ 为/ RT/ (/ x/ )/ 或/ WT/ (/ x/ )/ THEN3/ ./ IF/ 犙/ 犕/ 犞/ (/ B/ )/ 不为/ 空/ THEN4/ ./ FOREACHc/ ∈/ 犙/ 犕/ 犞/ (/ B/ )/ 5/ ./ IFx/ ./ ctmo/ / cTHEN6/ ./ 执行/ AT/ 操作/ ;/ 7/ ./ Exit/ ;/ 8/ ./ ENDIF9/ ./ ENDFOR10/ ./ ENDIF11/ ./ 执行/ 操作/ o/ ;/ 12/ ./ ENDIF13/ ./ IFo/ 为/ CT/ 或/ ATTHEN14/ ./ 执行/ 操作/ o/ ;/ 15/ ./ Exit/ ;/ 16/ ./ ENDIF17/ ./ 获取/ 下/ 一个/ 操作/ o/ ,/ 并/ 转步/ 2/ ./ 在/ 算法/ 2/ 中/ ,/ 对于/ 执行/ 事务/ 的/ 数据/ 读/ 、/ 写访问/ 操作/ ,/ 在/ 执行/ 前/ 首先/ 检查/ 犙/ 犕/ 犞/ (/ B/ )/ 中/ 是否/ 存在/ CTMO/ 标记/ 能够/ 被/ 该/ 访问/ 数据/ 的/ CTMO/ 标记/ 覆盖/ ,/ 若/ 存在/ ,/ 则/ 撤销/ 并/ 退出/ 该/ 事务/ ;/ 若/ 不/ 存在/ ,/ 则/ 操作/ 继续执行/ ./ 由/ 算法/ 过程/ 可知/ ,/ 若/ 犙/ 犕/ 犞/ (/ B/ )/ 为空/ ,/ 则/ 算法/ 将/ 忽/ Page7/ 略/ 对/ 事务/ 操作/ 的/ 隔离/ 检查/ ,/ 此时/ RDQA/ 算法/ 对/ 事务/ 执行/ 没有/ 任何/ 影响/ ./ RDQA/ 算法/ 利用/ 描述/ 损坏/ 数据/ 标记/ 特征/ 的/ 隔离/ 标记/ 向量/ 和/ 隔离/ 协议/ ,/ 实现/ 对/ 损坏/ 数据/ 的/ 实时/ 隔离/ ,/ 从而/ 保证/ 了/ 该/ 算法/ 对/ 损坏/ 数据/ 隔离/ 的/ 完全性/ (/ 见/ 定理/ 1/ )/ 和/ 正确性/ (/ 见/ 定理/ 2/ )/ ./ 3.4/ 隔离/ 机制/ 的/ 完全性/ 和/ 正确性/ 证明/ 为了/ 证明/ 基于/ CTMO/ 模型/ 的/ 损坏/ 数据/ 隔离/ 机制/ 的/ 完全性/ 和/ 正确性/ ,/ 我们/ 首先/ 给出/ 相关/ 的/ 定义/ 、/ 性质/ 和/ 引理/ ,/ 然后/ 再/ 给出/ 完全性/ 和/ 正确性/ 证明/ ./ 另外/ ,/ 由于/ 只读/ 事务/ 不/ 修改/ 任何/ 数据/ ,/ 不/ 可能/ 造成/ 数据/ 损坏/ ,/ 因此/ ,/ 只读/ 事务/ 对于/ 本文/ 的/ 隔离/ 策略/ 是/ 透明/ 的/ ,/ 下面/ 给出/ 的/ 证明/ 过程/ 均/ 不/ 考虑/ 只读/ 事务/ ./ 定义/ 15/ ./ 全/ 路径/ 事务/ 序列/ (/ FullPathTrans/ -/ actionSequence/ ,/ 简称/ FPT/ 序列/ )/ ./ 对于/ H/ 中/ 事务/ 执行/ 序列/ T1T2/ …/ Tn/ ,/ 若/ Tn/ ./ ctmo/ / …/ / T2/ ./ ctmo/ / T1/ ./ ctmo/ 成立/ ,/ 且/ 满足/ / Ti/ ,/ Ti/ +/ 1/ ∈/ H/ (/ Ti/ +/ 1/ ./ ctmo/ / Ti/ ./ ctmo/ )/ →/ / / T/ ∈/ H/ (/ Ti/ +/ 1/ ./ ctmo/ / T/ ./ ctmo/ / Ti/ ./ ctmo/ )/ ,/ 其中/ T/ ≠/ Ti/ ,/ T/ ≠/ Ti/ +/ 1/ 且/ 1/ / i/ </ n/ ,/ 则/ 称/ 序列/ T1T2/ …/ Tn/ 为/ FPT/ 序列/ ./ FPT/ 序列/ 具有/ 如下/ 性质/ ./ 性质/ 4/ ./ 若/ 事务/ 执行/ 序列/ T1T2/ …/ Tn/ 为/ FPT/ 序列/ ,/ 则/ TkTk/ +/ 1Tk/ +/ 2/ …/ Tm/ (/ 1/ / k/ </ n/ ,/ 1/ </ m/ / n/ )/ 也/ 是/ FPT/ 序列/ ./ 由/ 上述/ FPT/ 序列/ 的/ 定义/ 易得/ 该/ 性质/ 是/ 成立/ 的/ ,/ 证略/ ./ 引理/ 4/ ./ 对于/ 事务/ Ti/ 、/ Tj/ ∈/ H/ ,/ 若/ Tj/ ./ ctmo/ / Ti/ ./ ctmo/ ,/ 且/ TiTj/ 不是/ FPT/ 序列/ ,/ 则/ 必定/ 存在/ 事务/ 序列/ T1T2/ …/ Tn/ (/ n/ / 1/ )/ 使得/ TiT1/ …/ TnTj/ 为/ FPT/ 序列/ ./ 证明/ (/ 反证法/ )/ ./ 假设/ 不/ 存在/ 这样/ 的/ 事务/ 序列/ ,/ 而/ 已知/ Tj/ ./ ctmo/ / Ti/ ./ ctmo/ 成立/ ,/ 则/ 由/ FPT/ 的/ 定义/ 可知/ ,/ TiTj/ 满足/ FPT/ 要求/ ,/ 即/ TiTj/ 是/ FPT/ 序列/ ,/ 这/ 与/ 已知/ 条件/ “/ TiTj/ 不是/ FPT/ 序列/ ”/ 相/ 矛盾/ ,/ 故/ 假设/ 不/ 成立/ ,/ 所以/ 必定/ 存在/ 事务/ 序列/ T1T2/ …/ Tn/ (/ n/ / 1/ )/ 使得/ TiT1/ …/ TnTj/ 为/ FPT/ 序列/ ./ 引理/ 5/ ./ 对于/ 事务/ Ti/ 、/ Tj/ ∈/ H/ ,/ Tj/ ./ ctmo/ / Ti/ ./ ctmo/ / AffectT/ (/ Ti/ ,/ Tj/ )/ ./ 证明/ ./ 充分性/ ./ 已知/ Tj/ ./ ctmo/ / Ti/ ./ ctmo/ 成立/ ,/ ①/ 若/ TiTj/ 为/ FPT/ 序列/ ,/ 则/ 由/ DCMA/ 算法/ 和/ 定义/ 15/ 可知/ ,/ 必定/ 存在/ 数据/ x/ ,/ Ti/ 先写/ x/ ,/ Tj/ 后/ 读取/ x/ ,/ 且/ 在/ Ti/ 和/ Tj/ 之间/ 没有/ 其它/ 事务/ 写/ x/ ,/ 故/ Depend/ (/ Tj/ ,/ Ti/ )/ 成立/ ,/ 因此/ AffectT/ (/ Ti/ ,/ Tj/ )/ 也/ 成立/ ;/ ②/ 若/ TiTj/ 不是/ FPT/ 序列/ ,/ 由/ 引理/ 4/ 可知/ 必定/ 存在/ 事务/ 序列/ T1T2/ …/ Tn/ (/ n/ / 1/ )/ 使得/ TiT1/ …/ TnTj/ 为/ FPT/ 执行/ 序列/ ,/ 再/ 由/ 性质/ 4/ 易得/ TiT1/ ,/ T1T2/ ,/ …/ ,/ TnTj/ 均/ 为/ FPT/ 行/ 序列/ ,/ 利用/ ①/ 中/ 的/ 结论/ 可知/ AffectT/ (/ Ti/ ,/ T1/ )/ ,/ AffectT/ (/ T1/ ,/ T2/ )/ ,/ …/ ,/ AffectT/ (/ Tn/ ,/ T1/ )/ 均/ 成立/ ,/ 则/ 由/ 性质/ 1/ 易得/ AffectT/ (/ Ti/ ,/ Tj/ )/ 成立/ ./ 综合/ ①/ 、/ ②/ 可知/ Tj/ ./ ctmo/ / Ti/ ./ ctmo/ →/ AffectT/ (/ Ti/ ,/ Tj/ )/ 成立/ ./ 必要性/ ./ 已知/ AffectT/ (/ Ti/ ,/ Tj/ )/ 成立/ ,/ 由/ 定义/ 5/ 可知/ ,/ Ti/ 和/ Tj/ 存在/ 两种/ 可能/ 的/ 状态/ :/ ①/ Depend/ (/ Tj/ ,/ Ti/ )/ 成立/ ,/ 由/ 定义/ 4/ 可知/ ,/ 存在/ 数据/ x/ ,/ Ti/ 先写/ x/ ,/ Tj/ 后读/ x/ ,/ 且/ 在/ Ti/ 和/ Tj/ 之间/ 不/ 存在/ 其它/ 事务/ 写/ x/ ,/ 则/ 由/ DCMA/ 算法/ 易得/ Tj/ ./ ctmo/ / Ti/ ./ ctmo/ 成立/ ;/ ②/ 存在/ 事务/ 集合/ TS/ =/ {/ T1/ ,/ T2/ ,/ …/ ,/ Tn/ }/ / H/ (/ Ti/ ,/ Tj/ / TS/ )/ 使得/ Depend/ (/ Tj/ ,/ Tn/ )/ ∧/ Depend/ (/ Tn/ ,/ Tn/ -/ 1/ )/ ∧/ …/ ∧/ Depend/ (/ T1/ ,/ Ti/ )/ 成立/ ,/ 则/ 由/ ①/ 中/ 的/ 结论/ 可知/ Tj/ ./ ctmo/ / Tn/ ./ ctmo/ ∧/ Tn/ ./ ctmo/ / Tn/ -/ 1/ ./ ctmo/ ∧/ …/ ∧/ T1/ ./ ctmo/ / Ti/ ./ ctmo/ 成立/ ,/ 再/ 由/ CTMO/ 模型/ 中/ 覆盖/ 关系/ 的/ 传递性/ (/ 性质/ 3/ (/ 1/ )/ )/ 可知/ Tj/ ./ ctmo/ / Ti/ ./ ctmo/ 成立/ ./ 综合/ ①/ 、/ ②/ 可得/ AffectT/ (/ Ti/ ,/ Tj/ )/ →/ Tj/ ./ ctmo/ / Ti/ ./ ctmo/ 成立/ ./ 引理/ 6/ ./ 对于/ 事务/ T/ ∈/ H/ 及其/ 写/ 数据/ 集/ T/ ./ Write/ _/ Set/ 中/ 的/ 数据/ ,/ / x/ (/ x/ ∈/ T/ ./ Write/ _/ Set/ )/ →/ x/ ./ ctmo/ / T/ ./ ctmo/ ./ 证明/ ./ 对于/ T/ ./ Write/ _/ Set/ 中/ 的/ 任意/ 数据/ x/ ,/ 存在/ 两种/ 可能/ 情况/ :/ (/ 1/ )/ 假设/ H/ 中/ 不/ 存在/ 任何/ 其它/ 事务/ 写/ x/ ,/ 则/ x/ ./ ctmo/ =/ T/ ./ ctmo/ 成立/ ,/ 所以/ x/ ./ ctmo/ / T/ ./ ctmo/ 也/ 成立/ ;/ (/ 2/ )/ 假设/ H/ 中/ 存在/ 其它/ 事务/ 写/ x/ ,/ 设/ 所有/ 写/ x/ 的/ 事务/ 按/ 执行/ 顺序/ 组成/ 的/ 序列/ 为/ T1T2/ …/ Tm/ (/ Tm/ 最后/ 写/ x/ )/ ,/ 由/ 引理/ 1/ 可知/ Depend/ (/ T1/ ,/ T/ )/ ∧/ Depend/ (/ T2/ ,/ T1/ )/ ∧/ …/ ∧/ Depend/ (/ Tm/ ,/ Tm/ -/ 1/ )/ 成立/ ,/ 则/ 由/ 定义/ 5/ 易得/ AffectT/ (/ T/ ,/ Tm/ )/ 成立/ ,/ 再/ 由/ 引理/ 5/ 进一步/ 可得/ Tm/ ./ ctmo/ / T/ ./ ctmo/ 成立/ ,/ 而/ Tm/ 为/ 最后/ 写/ x/ 的/ 事务/ ,/ 则/ 有/ x/ ./ ctmo/ =/ Tm/ ./ ctmo/ ,/ 所以/ x/ ./ ctmo/ / T/ ./ ctmo/ 成立/ ./ 综合/ ①/ 、/ ②/ 可知/ / x/ (/ x/ ∈/ T/ ./ Write/ _/ Set/ )/ →/ x/ ./ ctmo/ / T/ ./ ctmo/ 成立/ ./ 引理/ 7/ ./ 对于/ 事务/ T/ ∈/ H/ 和/ 任意/ 数据/ x/ ∈/ DB/ ,/ x/ ./ ctmo/ / T/ ./ ctmo/ / AffectD/ (/ T/ ,/ {/ x/ }/ )/ ./ 证明/ ./ 充分性/ ./ 已知/ x/ ./ ctmo/ / T/ ./ ctmo/ 成立/ ,/ 假设/ 最后/ 修改/ x/ 的/ 事务/ 为/ T/ ,/ 则/ x/ ./ ctmo/ =/ T/ ./ ctmo/ ,/ 因此/ T/ ./ ctmo/ / T/ ./ ctmo/ 成立/ ,/ 由/ 引理/ 5/ 可得/ AffectT/ (/ T/ ,/ T/ )/ 也/ 成立/ ;/ 由于/ T/ 最后/ 修改/ x/ ,/ 则/ x/ ∈/ T/ ./ Write/ _/ Set/ ,/ 由/ 性质/ 2/ (/ 2/ )/ 可知/ AffectD/ (/ T/ ,/ {/ x/ }/ )/ 成立/ ,/ 再/ 由/ 性质/ 2/ (/ 1/ )/ Page8/ 可知/ AffectD/ (/ T/ ,/ {/ x/ }/ )/ 也/ 成立/ ,/ 所以/ x/ ./ ctmo/ / T/ ./ ctmo/ →/ AffectD/ (/ T/ ,/ {/ x/ }/ )/ 成立/ ./ 必要性/ ./ 已知/ AffectD/ (/ T/ ,/ {/ x/ }/ )/ 成立/ ,/ 由/ 定义/ 7/ 可知/ x/ ∈/ {/ T/ ./ Write/ _/ Set/ |/ T/ ∈/ TAS/ (/ T/ )/ }/ 成立/ ,/ 因此/ 在/ TAS/ (/ T/ )/ 中/ 至少/ 存在/ 一个/ 事务/ 修改/ x/ ,/ 而/ 由/ 定义/ 6/ 可知/ TAS/ (/ T/ )/ =/ {/ T/ |/ AffectT/ (/ T/ ,/ T/ )/ }/ ∪/ {/ T/ }/ ,/ 则/ 对于/ TAS/ (/ T/ )/ 中/ 最后/ 修改/ x/ 的/ 事务/ ,/ 存在/ 两种/ 可能/ 情况/ :/ ①/ 假设/ 最后/ 修改/ x/ 的/ 事务/ 为/ T/ ,/ 则/ x/ ∈/ T/ ./ Write/ _/ Set/ ,/ 由/ 引理/ 6/ 可知/ x/ ./ ctmo/ / T/ ./ ctmo/ 成立/ ;/ ②/ 假设/ 最后/ 修改/ x/ 的/ 事务/ 为/ Ti/ ∈/ {/ T/ |/ AffectT/ (/ T/ ,/ T/ )/ }/ ,/ 则/ 有/ AffectT/ (/ T/ ,/ Ti/ )/ ,/ 由/ 引理/ 5/ 可知/ Ti/ ./ ctmo/ / T/ ./ ctmo/ 成立/ ,/ 由于/ Ti/ 最后/ 修改/ x/ ,/ 则/ x/ ∈/ Ti/ ./ Write/ _/ Set/ ,/ 进而/ 由/ 引理/ 6/ 可知/ x/ ./ ctmo/ / Ti/ ./ ctmo/ 成立/ ,/ 再/ 由/ 性质/ 3/ (/ 1/ )/ 可得/ x/ ./ ctmo/ / T/ ./ ctmo/ 也/ 成立/ ./ 综合/ ①/ 、/ ②/ 可得/ AffectD/ (/ T/ ,/ {/ x/ }/ )/ →/ x/ ./ ctmo/ / T/ ./ ctmo/ 成立/ ./ 证毕/ ./ 引理/ 8/ ./ 对于/ 事务/ T/ ∈/ H/ ,/ 数据库/ 中/ 能够/ 覆盖/ T/ 的/ CTMO/ 标记/ 的/ 数据/ 集合/ ,/ 与/ 受/ T/ 影响/ 的/ 数据/ 集合/ 是/ 一致/ 的/ ,/ 即/ {/ xi/ |/ xi/ ./ ctmo/ / T/ ./ ctmo/ ∧/ xi/ ∈/ DB/ }/ =/ TADS/ (/ T/ )/ 成立/ ./ 证明/ ./ (/ 1/ )/ 对于/ 任意/ x/ ∈/ {/ xi/ |/ xi/ ./ ctmo/ / T/ ./ ctmo/ ∧/ xi/ ∈/ DB/ }/ ,/ 则/ 有/ x/ ./ ctmo/ / T/ ./ ctmo/ ,/ 设/ 最后/ 写/ x/ 的/ 事务/ 为/ Ti/ ,/ 则/ x/ ∈/ Ti/ ./ Write/ _/ Set/ ,/ 且/ 由/ DCMA/ 算法/ 可知/ Ti/ ./ ctmo/ =/ x/ ./ ctmo/ ,/ 因此/ Ti/ ./ ctmo/ / T/ ./ ctmo/ ,/ 则/ 由/ 引理/ 5/ 可知/ AffectT/ (/ T/ ,/ Ti/ )/ 成立/ ,/ 由/ 定义/ 6/ 可知/ Ti/ ∈/ TAS/ (/ T/ )/ ,/ 进而/ 由/ 定义/ 8/ 可知/ Ti/ ./ Write/ _/ Set/ / TADS/ (/ T/ )/ ,/ 所以/ x/ ∈/ TADS/ (/ T/ )/ 成立/ ,/ 即/ / x/ (/ x/ ∈/ {/ xi/ |/ xi/ ./ ctmo/ / T/ ./ ctmo/ ∧/ xi/ ∈/ DB/ }/ )/ →/ x/ ∈/ TADS/ (/ T/ )/ ;/ (/ 2/ )/ 对于/ 任意/ x/ ∈/ TADS/ (/ T/ )/ ,/ 由/ 定义/ 8/ 可知/ TADS/ (/ T/ )/ =/ {/ T/ ./ Write/ _/ Set/ |/ T/ ∈/ TAS/ (/ T/ )/ }/ ,/ 设/ TAS/ (/ T/ )/ 中/ 最后/ 写/ x/ 的/ 事务/ 为/ Ti/ ,/ 则/ 由/ DCMA/ 算法/ 可知/ x/ ./ ctmo/ =/ Ti/ ./ ctmo/ ,/ 且/ 对于/ Ti/ ,/ 由/ 定义/ 6/ 可知/ Ti/ =/ T/ 或/ AffectT/ (/ T/ ,/ Ti/ )/ 必有/ 其一/ 成立/ :/ ①/ 假设/ Ti/ =/ T/ 成立/ ,/ 则/ x/ ./ ctmo/ =/ T/ ./ ctmo/ ,/ 因此/ x/ ./ ctmo/ / T/ ./ ctmo/ 成立/ ;/ ②/ 假设/ AffectT/ (/ T/ ,/ Ti/ )/ 成立/ ,/ 则/ 由/ 引理/ 5/ 可知/ Ti/ ./ ctmo/ / T/ ./ ctmo/ 成立/ ,/ 而/ x/ ./ ctmo/ =/ Ti/ ./ ctmo/ ,/ 因此/ x/ ./ ctmo/ / T/ ./ ctmo/ 也/ 成立/ ./ 因此/ ,/ 综合/ ①/ 、/ ②/ 可知/ ,/ x/ ./ ctmo/ / T/ ./ ctmo/ 均/ 成立/ ,/ 因此/ x/ ∈/ {/ xi/ |/ xi/ ./ ctmo/ / T/ ./ ctmo/ ∧/ xi/ ∈/ DB/ }/ 成立/ ,/ 即/ / x/ (/ x/ ∈/ TADS/ (/ T/ )/ )/ →/ x/ ∈/ {/ xi/ |/ xi/ ./ ctmo/ / T/ ./ ctmo/ ∧/ xi/ ∈/ DB/ }/ 成立/ ./ 综合/ (/ 1/ )/ 、/ (/ 2/ )/ 可/ 得/ {/ xi/ |/ xi/ ./ ctmo/ / T/ ./ ctmo/ ∧/ xi/ ∈/ DB/ }/ =/ TADS/ (/ T/ )/ ./ 下面/ 给出/ 基于/ CTMO/ 模型/ 的/ 损坏/ 数据/ 隔离/ 机制/ 的/ 完全性/ 和/ 正确性/ 证明/ ./ 设在/ t/ 时刻/ ,/ 检测/ 到/ 恶意/ 事务/ 集合/ B/ =/ {/ B1/ ,/ B2/ ,/ …/ ,/ Bm/ }/ ./ 定理/ 1/ ./ 隔离/ 的/ 完全性/ (/ quarantinecomplete/ -/ ness/ )/ ./ 数据库/ 中/ 所有/ 的/ 损坏/ 数据/ 均/ 被/ 隔离/ ,/ 不/ 存在/ 损坏/ 数据/ 的/ 漏/ 隔离/ ,/ 即/ 证明/ ./ 对于/ 任意/ x/ ∈/ DDS/ (/ B/ )/ ,/ 由/ DDS/ (/ B/ )/ =/ ∪/ Bi/ ∈/ BTADS/ (/ Bi/ )/ ,/ 不妨/ 设/ x/ ∈/ TADS/ (/ Bi/ )/ ,/ 由/ 引理/ 8/ 可知/ x/ ∈/ {/ xi/ |/ xi/ ./ ctmo/ / Bi/ ./ ctmo/ ∧/ xi/ ∈/ DB/ }/ ,/ 所以/ 有/ x/ ./ ctmo/ / Bi/ ./ ctmo/ ,/ 则/ x/ 满足/ 隔离/ 协议/ (/ 定义/ 13/ )/ ,/ 再/ 由/ 定义/ 14/ 可知/ x/ ∈/ QDS/ (/ B/ )/ 成立/ ./ 证毕/ ./ 定理/ 2/ ./ 隔离/ 的/ 正确性/ (/ quarantinecorrect/ -/ ness/ )/ ./ 数据库/ 中/ 被/ 隔离/ 的/ 数据/ 都/ 是/ 损坏/ 数据/ ,/ 不/ 存在/ 合法/ 数据/ 的/ 误/ 隔离/ ,/ 即/ 证明/ ./ 对于/ 任意/ x/ ∈/ QDS/ (/ B/ )/ ,/ 由/ QDS/ (/ B/ )/ =/ ∪/ Bi/ ∈/ B/ {/ xi/ |/ xi/ ./ ctmo/ / Bi/ ./ ctmo/ ∧/ xi/ ∈/ DB/ }/ ,/ 不妨/ 设/ x/ ∈/ {/ xi/ |/ xi/ ./ ctmo/ / Bi/ ./ ctmo/ ∧/ xi/ ∈/ DB/ }/ ,/ 由/ 引理/ 8/ 可知/ x/ ∈/ TADS/ (/ Bi/ )/ ,/ 由于/ Bi/ 为/ 恶意/ 事务/ ,/ 则/ 由/ 引理/ 2/ 可知/ x/ 为/ 损坏/ 数据/ ,/ 因此/ x/ ∈/ DDS/ (/ B/ )/ ./ 由/ 定理/ 1/ 和/ 2/ 可知/ ,/ 基于/ CTMO/ 模型/ 的/ 损坏/ 数据/ 隔离/ 机制/ 是/ 完全/ 的/ 、/ 正确/ 的/ ,/ 隔离/ 的/ 完全性/ 保证/ 了/ 所有/ 的/ 损坏/ 数据/ 都/ 被/ 隔离/ ,/ 不/ 存在/ 损坏/ 数据/ 的/ 漏/ 隔离/ 问题/ ;/ 而/ 隔离/ 的/ 正确性/ 则/ 表明/ 所有/ 被/ 隔离/ 的/ 数据/ 均/ 为/ 损坏/ 数据/ ,/ 不/ 存在/ 合法/ 数据/ 的/ 误/ 隔离/ 问题/ ./ 因此/ ,/ 该/ 隔离/ 机制/ 是/ 一种/ 精确/ 隔离/ 的/ 方法/ ./ 4/ 隔离/ 效果/ 评估/ 方法/ 我们/ 用/ 隔离/ 率/ (/ positivequarantinerate/ )/ 、/ 误/ 隔离/ 率/ (/ negativequarantinerate/ )/ 和/ 数据/ 可用/ 度/ (/ dataavailablerate/ )/ 这/ 3/ 个/ 指标/ 来/ 评价/ 隔离/ 机制/ 的/ 效果/ ./ 其中/ ,/ 隔离/ 率为/ 被/ 隔离/ 的/ 损坏/ 数据/ 占/ 总/ 损坏/ 数据/ 的/ 比例/ ,/ 记为/ pqr/ ;/ 误/ 隔离/ 率为误/ 隔离/ 的/ 合法/ 数据/ 与/ 总/ 损坏/ 数据/ 的/ 比例/ ,/ 记为/ nqr/ ;/ 数据/ 可用/ 度为/ 数据库/ 中/ 能够/ 被/ 访问/ 的/ 合法/ 数据/ 占/ 总/ 数据量/ 的/ 比例/ ,/ 记为/ dar/ ./ 具体/ 计算公式/ 如/ (/ 1/ )/ 、/ (/ 2/ )/ 和/ (/ 3/ )/ 所示/ :/ 隔离/ 率/ =/ 被/ 隔离/ 的/ 损坏/ 数据/ 总量/ 误/ 隔离/ 率/ =/ 误/ 隔离/ 的/ 合法/ 数据/ 总量/ 数据/ 可用/ 度/ =/ 能够/ 被/ 访问/ 的/ 合法/ 数据/ 总量/ Page9/ 假设/ 数据库/ 数据/ 总量/ 为/ |/ DB/ |/ ,/ 且/ 事务/ 执行/ 历史/ H/ =/ T1/ ∝/ HT2/ ∝/ H/ …/ ∝/ HTn/ ,/ 恶意/ 事务/ 集合/ 为/ B/ (/ B/ / H/ )/ ,/ 则/ 实际/ 损坏/ 数据/ 总量/ 为/ ∪/ Bi/ ∈/ BTADS/ (/ Bi/ )/ ./ 下面/ ,/ 我们/ 分别/ 给出/ 文献/ [/ 8/ ,/ 10/ -/ 11/ ]/ 中/ 的/ 过度/ 隔离/ 方法/ (/ OverQuarantineMethod/ ,/ OQM/ )/ 和/ 基于/ CTMO/ 模型/ 的/ 损坏/ 数据/ 隔离/ 方法/ (/ CTMO/ -/ basedDamageQuarantineMethod/ ,/ 简称/ CDQM/ )/ 在/ 隔离/ 率/ 、/ 误/ 隔离/ 率/ 和/ 数据/ 可用/ 度/ 上/ 的/ 形式化/ 表示/ :/ 在/ OQM/ 中/ ,/ 由于/ 不/ 存在/ 损坏/ 泄漏/ ,/ 因此/ 被/ 隔离/ 的/ 损坏/ 数据/ 总量/ 与/ 实际/ 损坏/ 数据/ 总量/ 相同/ ;/ 假设/ B/ 中/ 最先/ 执行/ 的/ 恶意/ 事务/ 为/ Tk/ (/ 1/ / k/ / n/ )/ ,/ 则/ 被/ 隔离/ 的/ 数据/ 总量/ 为/ ∪/ k/ / j/ / nTj/ ./ Write/ _/ Set/ (/ 包含/ 合法/ 数据/ 和/ 损坏/ 数据/ )/ ,/ 其/ 对应/ 的/ 隔离/ 率/ pqrO/ 、/ 误/ 隔离/ 率/ nqrO/ 和/ 数据/ 可用/ 度/ darO/ 分别/ 为/ nqrO/ =/ 而/ 在/ CDQM/ 中/ ,/ 由/ 隔离/ 的/ 完全性/ 和/ 正确性/ 可知/ ,/ 不/ 存在/ 损坏/ 泄漏/ 和/ 合法/ 数据/ 误/ 隔离/ ,/ 因此/ 被/ 隔离/ 的/ 损坏/ 数据/ 总量/ 与/ 实际/ 损坏/ 数据/ 总量/ 也/ 相同/ ,/ 且误/ 隔离/ 合法/ 数据量/ 为/ 0/ ,/ 则/ 对应/ 的/ 隔离/ 率/ pqrC/ 、/ 误/ 隔离/ 率/ nqrC/ 和/ 数据/ 可用/ 度/ darC/ 分别/ 为/ 在/ 下面/ 的/ 章节/ 中/ ,/ 我们/ 将/ 通过/ 实验/ 对/ CDQM/ 和/ OQM/ 的/ 隔离/ 效果/ 作/ 对比/ 分析/ ./ 5/ 实验/ 结果/ 及/ 分析/ 我们/ 从/ 如下/ 两个/ 角度/ 进行/ 实验/ 分析/ 和/ 验证/ :/ (/ 1/ )/ 从/ 损坏/ 数据/ 的/ 隔离/ 效果/ 角度/ ,/ 针对/ 文献/ [/ 8/ ,/ 10/ -/ 11/ ]/ 中/ 的/ 过度/ 隔离/ 方法/ OQM/ 和/ 本文/ 提出/ 的/ 隔离/ 方法/ CDQM/ ,/ 进行/ 误/ 隔离/ 率/ 和/ 数据/ 可用/ 度/ 的/ 对比/ 模拟实验/ ;/ (/ 2/ )/ 从/ 数据库/ 空间/ 负载/ 角度/ 进行/ 性能/ 评估/ 实验/ ;/ (/ 3/ )/ 从/ 数据库/ 事务/ 执行/ 时间/ 性能/ 角度/ ,/ 对/ 基于/ CTMO/ 模型/ 的/ 损坏/ 数据/ 隔离/ 机制/ 进行/ 时间/ 负载/ 的/ 性能/ 评估/ 实验/ ./ 实验/ 的/ 硬件/ 环境/ 为/ IntelP8600/ (/ 双核/ 、/ 2.40/ GHz/ )/ 处理器/ ,/ 2GB/ 内存/ ;/ 软件/ 环境/ 为/ Ubuntu/ (/ 9.10/ )/ 操作系统/ (/ Linux/ 内核/ 版本/ 为/ 2.6/ ./ 31/ -/ 14/ -/ generic/ )/ 、/ PostgreSQL/ (/ 1.10/ ./ 3/ )/ 数据库系统/ 和/ gcc/ (/ 4.4/ ./ 1/ )/ 开发工具/ ./ 实验/ 采用/ BenchmarkTPC/ -/ D/ [/ 17/ ]/ 数据库/ 测试数据/ 集/ ,/ TPC/ -/ D/ 包含/ 8/ 个/ 关系/ 表/ ,/ 数据/ 集/ 容量/ 由/ 刻度/ 因子/ (/ scalefactor/ ,/ 简称/ SF/ )/ 控制/ ,/ 具体/ 数据/ 由/ TPC/ -/ D/ 附带/ 的/ 数据/ 产生器/ DBGEN/ 生成/ ,/ 并/ 根据/ SF/ 值/ 导入/ PostgreSQL/ 数据库/ ./ TPC/ -/ D/ 中/ 8/ 个/ 关系/ 表/ 的/ 数据/ 容量/ 配置/ 情况/ 如表/ 1/ 所示/ (/ 其中/ NATION/ 和/ REGION/ 为/ 固定/ 容量/ 的/ 关系/ 表/ )/ ./ 5.1/ 隔离/ 效果/ 对比/ 模拟实验/ 由/ 第/ 4/ 节/ 的/ 结论/ 可知/ ,/ OQM/ 与/ CDQM/ 的/ 隔离/ 率均/ 为/ 100/ %/ ,/ 故本/ 实验/ 不/ 考虑/ 隔离/ 率/ ,/ 重点/ 测试/ 这/ 两种/ 方法/ 在/ 误/ 隔离/ 率/ nqr/ 和/ 数据/ 可用/ 度/ dar/ 上/ 的/ 对比/ 情况/ ./ 我们/ 首先/ 给出/ 模拟实验/ 的/ 相关/ 数据/ 及/ 参数/ 说明/ :/ (/ a/ )/ 选取/ SF/ =/ 0.01/ 时/ 的/ TPC/ -/ D/ 数据/ 集/ 为/ 实验/ 数据/ 对象/ ,/ 则/ 数据库/ 总/ 数据量/ (/ 元组/ 数量/ )/ |/ DB/ |/ =/ 86630/ ;/ (/ b/ )/ n/ 为/ 事务/ 执行/ 历史/ H/ 的/ 容量/ ,/ 即/ H/ 中有/ n/ 个/ 事务/ ,/ 设为/ T1/ ∝/ HT2/ ∝/ H/ …/ ∝/ HTn/ ;/ (/ c/ )/ q/ 为/ 事务/ 写/ 数据量/ 随机/ 因子/ ,/ 对于/ 事务/ Ti/ ∈/ H/ ,/ 取其/ 写/ 数据量/ 为/ 整数/ 区间/ [/ 1/ ,/ q/ ]/ 中/ 的/ 随机数/ ,/ 且/ 所有/ 事务/ 写/ 数据/ 均/ 不/ 相同/ ;/ (/ d/ )/ m/ 为/ H/ 中/ 的/ 恶意/ 事务/ 数量/ ,/ 即/ H/ 中/ 存在/ m/ 个/ 恶意/ 事务/ ,/ 且/ 这些/ 事务/ 互不/ 影响/ ,/ 为了/ 实验/ 描述/ 的/ 简洁性/ ,/ 这里/ 假设/ H/ 中/ 的/ 前/ m/ 个/ 事务/ 均/ 为/ 恶意/ 事务/ ;/ (/ e/ )/ p/ 为/ 事务/ 影响/ 随机/ 因子/ ,/ 即/ 在/ H/ 中受/ 恶意/ 事务/ Ti/ (/ 1/ / i/ / m/ )/ 影响/ 的/ 事务/ 总数/ 取/ [/ 1/ ,/ p/ ]/ 中/ 的/ 随机数/ ,/ 任意/ 两个/ 恶意/ 事务/ 影响/ 的/ 事务/ 集/ 不/ 相交/ ,/ 所有/ 被/ 影响/ 的/ 事务/ 随机/ 不/ 重复/ 地/ 分布/ 于/ H/ 中/ ./ OQM/ 和/ CDQM/ 在/ nqr/ 和/ dar/ 上/ 的/ 对比/ 实验/ :/ 下面/ ,/ 根据/ 参数/ n/ 、/ q/ 、/ p/ 和/ m/ 的/ 不同/ 设置/ ,/ 给出/ (/ 1/ )/ 当/ n/ =/ 200/ 、/ q/ =/ 100/ 、/ p/ =/ 10/ 时/ ,/ 以/ m/ 为/ 自变/ Page10/ 量/ (/ 1/ / m/ / 10/ )/ ,/ 实验/ 结果/ 如图/ 2/ 所示/ ./ 由图/ 2/ (/ a/ )/ 和/ 图/ 2/ (/ b/ )/ 可知/ ,/ 当/ m/ 增大/ 时/ ,/ OQM/ 的/ nqr/ 减小/ ,/ 而/ dar/ 保持/ 不变/ ,/ 为/ 88.04/ %/ ;/ CDQM/ 的/ nqr/ 保持/ 不变/ ,/ 为/ 0/ %/ ,/ 而/ dar/ 减小/ ./ 这是/ 由于/ 随着/ 恶意/ 事务/ 数量/ 的/ 增加/ ,/ 受/ 恶意/ 事务/ 影响/ 的/ 事务/ 也/ 增多/ ,/ 因此/ 损坏/ 数据/ 也/ 增多/ ,/ 且/ ①/ 在/ OQM/ 中/ ,/ 由于/ H/ 中/ 的/ 事务/ 总量/ 不变/ ,/ 被/ 隔离/ 的/ 数据/ 总量/ 也/ 不变/ ,/ 因此/ ,/ dar/ 也/ 保持/ 不变/ ;/ 而/ 被/ 误/ 隔离/ 的/ 合法/ 数据量/ 却/ 随之/ 减小/ ,/ 所以/ nqr/ 也/ 逐渐/ 减小/ ;/ ②/ 在/ CDQM/ 中/ ,/ 由于/ 不/ 存在/ 损坏/ 数据/ 误/ 隔离/ ,/ 因此/ nqr/ 始终/ 为/ 0/ %/ ;/ 而/ 随着/ 损坏/ 数据/ 的/ 增多/ ,/ dar/ 也/ 随之/ 减小/ ./ 该/ 实验/ 表明/ ,/ 在/ n/ =/ 200/ 、/ q/ =/ 100/ 、/ p/ =/ 10/ 时/ ,/ 随着/ 恶意/ 事务/ 数量/ m/ 的/ 增加/ ,/ OQM/ 的/ nqr/ 随之/ 减小/ ,/ 而/ dar/ 保持/ 不变/ ;/ CDQM/ 的/ nqr/ 保持/ 不变/ ,/ 但/ 始终/ 比/ OQM/ 低/ ,/ 而/ dar/ 随之/ 减小/ ,/ 但/ 始终/ 比/ OQM/ 高/ ./ (/ 2/ )/ 当/ m/ =/ 10/ 、/ q/ =/ 100/ 、/ p/ =/ 10/ 时/ ,/ 以/ n/ 为/ 自变量/ 图/ 2n/ =/ 200/ ,/ q/ =/ 100/ ,/ p/ =/ 10/ ,/ m/ 为/ 自变量/ 时/ 的/ nqr/ 和/ dar/ 图/ 3m/ =/ 10/ ,/ q/ =/ 100/ ,/ p/ =/ 10/ ,/ n/ 为/ 自变量/ 时/ 的/ nqr/ 和/ dar/ (/ 200/ / n/ / 1000/ )/ ,/ 实验/ 结果/ 如图/ 3/ 所示/ ./ 由图/ 3/ (/ a/ )/ 和/ (/ b/ )/ 可知/ ,/ 当/ n/ 增大/ 时/ ,/ OQM/ 的/ nqr/ 增大/ ,/ 而/ dar/ 减小/ ;/ CDQM/ 的/ nqr/ 和/ dar/ 都/ 保持/ 不变/ ,/ 其中/ nqr/ 为/ 0/ %/ ,/ dar/ 为/ 96.04/ %/ ./ 这是/ 由于/ :/ ①/ 在/ OQM/ 中/ ,/ 随着/ H/ 中/ 事务/ 总/ 数量/ 的/ 增多/ ,/ 被/ 隔离/ 的/ 数据/ 也/ 增多/ ,/ 但/ 恶意/ 事务/ 及其/ 影响/ 事务/ 均/ 保持/ 不变/ ,/ 因此/ 损坏/ 数据/ 总量/ 保持/ 不变/ ,/ 而/ 被/ 误/ 隔离/ 的/ 合法/ 数据/ 也/ 增多/ ,/ 导致/ nqr/ 增大/ ;/ 随着/ 被/ 隔离/ 数据量/ 的/ 增大/ ,/ dar/ 减小/ ;/ ②/ 在/ CDQM/ 中/ ,/ 由于/ 不/ 存在/ 合法/ 数据/ 误/ 隔离/ ,/ 因此/ nqr/ 始终/ 为/ 0/ %/ ;/ 由于/ 恶意/ 事务/ 及其/ 影响/ 事务/ 保持/ 不变/ ,/ 则/ 被/ 隔离/ 的/ 损坏/ 数据/ 也/ 不变/ ,/ 因此/ dar/ 也/ 保持/ 不变/ ./ 该/ 实验/ 表明/ ,/ 在/ m/ =/ 10/ 、/ q/ =/ 100/ 、/ p/ =/ 10/ 时/ ,/ 随着/ 事务/ 总量/ n/ 的/ 增大/ ,/ OQM/ 的/ nqr/ 随之/ 增大/ ,/ 而/ dar/ 随之/ 减小/ ;/ CDQM/ 的/ nqr/ 和/ dar/ 与/ n/ 无关/ ,/ 均/ 保持/ 不变/ ,/ 其中/ 前者/ 始终/ 比/ OQM/ 低/ ,/ 而/ 后者/ 始终/ 比/ OQM/ 高/ ./ Page11/ (/ 3/ )/ 当/ n/ =/ 200/ 、/ q/ =/ 100/ 、/ m/ =/ 10/ 时/ ,/ 以/ p/ 为/ 自变量/ (/ 2/ / p/ / 20/ )/ ,/ 实验/ 结果/ 如图/ 4/ 所示/ ./ 由图/ 4/ (/ a/ )/ 和/ (/ b/ )/ 可知/ ,/ 当/ p/ 增大/ 时/ ,/ OQM/ 的/ nqr/ 减小/ ,/ 而/ dar/ 保持/ 不变/ ,/ 为/ 89.10/ %/ ;/ CDQM/ 的/ nqr/ 保持/ 不变/ ,/ 为/ 0/ %/ ,/ 而/ dar/ 减小/ ./ 这是/ 由于/ 随着/ 事务/ 影响/ 随机/ 因子/ 的/ 增大/ ,/ 受/ 恶意/ 事务/ 影响/ 的/ 事务/ 数量/ 也/ 增大/ ,/ 损坏/ 数据/ 也/ 随之/ 增加/ ,/ 且/ ①/ 在/ OQM/ 中/ ,/ 由于/ H/ 的/ 事务/ 总量/ 不变/ ,/ 被/ 隔离/ 的/ 数据/ 保持/ 不变/ ,/ 因此/ dar/ 也/ 保持/ 不变/ ;/ 而/ 损坏/ 数据/ 的/ 增多/ 使得/ 误/ 隔离/ 合法/ 数据量/ 减小/ ,/ 导致/ nqr/ 也/ 随之/ 减小/ ;/ ②/ 在/ CDQM/ 中/ ,/ 由于/ 不/ 存在/ 合法/ 数据/ 误/ 隔离/ ,/ 因此/ nqr/ 始终/ 为/ 0/ %/ ;/ 而/ 随着/ 损坏/ 数据/ 的/ 增加/ ,/ dar/ 随之/ 减小/ ./ 该/ 实验/ 表明/ ,/ 在/ n/ =/ 200/ 、/ q/ =/ 100/ 、/ m/ =/ 10/ 时/ ,/ 随着/ 事务/ 影响/ 随机/ 因子/ p/ 的/ 增大/ ,/ OQM/ 的/ nqr/ 随之/ 减小/ ,/ 而/ dar/ 保持/ 不变/ ;/ CDQM/ 的/ nqr/ 保持/ 不变/ ,/ 但/ 始终/ 比/ OQM/ 低/ ,/ 而/ dar/ 随之/ 减小/ ,/ 但/ 始终/ 比/ OQM/ 高/ ./ (/ 4/ )/ 当/ n/ =/ 200/ 、/ m/ =/ 10/ 、/ p/ =/ 10/ 时/ ,/ 以/ q/ 为/ 自变量/ (/ 20/ / q/ / 200/ )/ ,/ 实验/ 结果/ 如图/ 5/ 所示/ ./ 图/ 4n/ =/ 200/ ,/ q/ =/ 100/ ,/ m/ =/ 10/ ,/ p/ 为/ 自变量/ 时/ 的/ nqr/ 和/ dar/ 图/ 5n/ =/ 200/ ,/ m/ =/ 10/ ,/ p/ =/ 10/ ,/ q/ 为/ 自变量/ 时/ 的/ nqr/ 和/ dar/ 由图/ 5/ (/ a/ )/ 和/ (/ b/ )/ 可知/ ,/ 当/ q/ 增大/ 时/ ,/ OQM/ 的/ nqr/ 分布/ 在/ 250/ %/ 左右/ ,/ 变化/ 不/ 大/ ,/ 而/ dar/ 减小/ ;/ CDQM/ 的/ nqr/ 保持/ 不变/ ,/ 为/ 0/ %/ ,/ 而/ dar/ 减小/ ./ 这是/ 由于/ 随着/ 事务/ 写/ 数据量/ 随机/ 因子/ q/ 的/ 增大/ ,/ H/ 中/ 的/ 事务/ 写/ 数据量/ 随之/ 增大/ ,/ 受/ 恶意/ 事务/ 影响/ 的/ 损坏/ 数据量/ 也/ 增大/ ,/ 且/ ①/ 在/ OQM/ 中/ ,/ 由于/ 事务/ 写/ 数据量/ 增大/ ,/ 但/ 事务/ 总量/ 不变/ ,/ 使得/ 被/ 隔离/ 的/ 数据/ 增多/ ,/ 因此/ dar/ 随之/ 减小/ ;/ 而/ 由于/ 恶意/ 事务/ 及其/ 影响/ 事务/ 保持/ 不变/ ,/ 事务/ 总量/ 不变/ ,/ 随着/ 事务/ 写/ 数据量/ 的/ 增大/ ,/ 被误/ 隔离/ 的/ 合法/ 数据量/ 也/ 随之/ 增大/ ,/ 导致/ nqr/ 变化/ 不/ 大/ ;/ ②/ 在/ CDQM/ 中/ ,/ 由于/ 不/ 存在/ 合法/ 数据/ 误/ 隔离/ ,/ 因此/ nqr/ 始终/ 为/ 0/ %/ ;/ 而/ 随着/ 损坏/ 数据/ 的/ 增加/ ,/ dar/ 随之/ 减小/ ./ 该/ 实验/ 表明/ ,/ 在/ n/ =/ 200/ 、/ m/ =/ 10/ 、/ p/ =/ 10/ 时/ ,/ 随着/ 事务/ 写/ 数据量/ 随机/ 因子/ q/ 的/ 增大/ ,/ OQM/ 的/ nqr/ 分布/ 在/ 250/ %/ 左右/ ,/ 且/ 变化/ 不/ 大/ ,/ 而/ dar/ 随之/ 减小/ ;/ CDQM/ 的/ nqr/ 保持/ 不变/ ,/ 但/ 始终/ 比/ OQM/ 低/ ,/ 而/ dar/ 随之/ 减小/ ,/ 但/ 始终/ 比/ OQM/ 高/ ./ Page12/ 综合/ 上述/ 四组/ 实验/ 可知/ ,/ 在/ 实验/ 设置/ 的/ 条件/ 下/ ,/ 基于/ CTMO/ 模型/ 的/ 损坏/ 数据/ 隔离/ 方法/ 与/ 现有/ 的/ 隔离/ 方法/ 相比/ ,/ 具有/ 更/ 低/ 的/ 误/ 隔离/ 率/ 和/ 更/ 高/ 的/ 数据/ 可用/ 度/ ./ 5.2/ 数据库/ 空间/ 负载/ 实验/ 为了/ 实现/ 对/ 损坏/ 数据/ 的/ 隔离/ ,/ 需要/ 对/ 事务/ 及其/ 修改/ 数据/ 添加/ CTMO/ 标记/ 信息/ ,/ 这/ 就/ 带来/ 系统/ 额外/ 的/ 空间/ 负载/ 开销/ ,/ 我们/ 将/ 此类/ 需/ 额外/ 存储/ 的/ 数据/ 称为/ 隔离/ 元/ 数据/ (/ quarantinemetadata/ )/ ./ 本/ 实验/ 从/ 数据/ 空间/ 负载/ 角度/ 出发/ ,/ 首先/ ,/ 给出/ 本文/ 的/ 隔离/ 方法/ 和/ 现有/ 的/ 隔离/ 方法/ 在/ 隔离/ 元/ 数据/ 空间/ 占用/ 上/ 的/ 对比/ 实验/ ;/ 其次/ ,/ 给出/ 在/ 本文/ 的/ 隔离/ 机制/ 中/ ,/ 加载/ CTMO/ 标记/ 信息/ 前后/ 的/ 数据库/ 关系/ 表/ 数据/ 空间/ 负载/ 的/ 对比/ 实验/ ./ (/ 1/ )/ 隔离/ 元/ 数据/ 空间/ 负载/ 对比/ 实验/ 本文/ 的/ 隔离/ 机制/ 中/ 的/ 隔离/ 元/ 数据/ (/ CTMOQuar/ -/ antineMetadata/ ,/ CTMO/ -/ QM/ )/ 主要/ 包括/ 三个/ 方面/ :/ 一是/ 为/ 关系/ 表/ 元组/ 数据/ 建立/ 的/ CTMO/ 标记/ 数据/ ,/ 二是/ 为/ 执行/ 事务/ 建立/ 的/ 事务/ ID/ 和/ CTMO/ 标记/ 数据/ ,/ 三是/ 为/ CTMO/ 标记/ 建立/ 的/ 颜色/ 集合/ 属性/ 字典/ 数据/ ./ 图/ 6/ 隔离/ 元/ 数据/ 空间/ 负载/ 对比/ 结果/ 图由图/ 6/ (/ a/ )/ 可知/ ,/ 随着/ 事务/ 数量/ n/ 的/ 增加/ ,/ EQM/ -/ QM/ 和/ CTMO/ -/ QM/ 的/ 空间/ 负载/ 均/ 有所/ 增长/ ,/ 但/ 增长幅度/ 都/ 很小/ ,/ 其中/ CTMO/ -/ QM/ 的/ 增长速度/ 略/ 快/ ,/ 同时/ ,/ 与/ EQM/ -/ QM/ 相比/ ,/ CTMO/ -/ QM/ 的/ 空间/ 负载/ 增量/ 与/ 事务/ 数量/ n/ 近似/ 成/ 正比例/ 关系/ ,/ 但/ 增长幅度/ 很小/ ,/ 当/ 事务/ 数量/ 达到/ 1000/ 时/ ,/ CTMO/ -/ QM/ 的/ 空间/ 负载/ 仅/ 比/ EQM/ -/ QM/ 多/ 0.22/ ;/ 由图/ 6/ (/ b/ )/ 可知/ ,/ 随着/ SF/ 的/ 增大/ ,/ EQM/ -/ QM/ 和/ CTMO/ -/ QM/ 的/ 空间/ 负载/ 均/ 有/ 显著/ 增长/ ,/ 其中/ CTMO/ -/ QM/ 的/ 占用/ 空间/ 略大/ ,/ 同时/ ,/ 与/ EQM/ -/ QM/ 相比/ ,/ CTMO/ -/ QM/ 的/ 空间/ 负载/ 增量/ 随着/ SF/ 的/ 增大/ 逐渐/ 减小/ ,/ 但/ 减小/ 幅度/ 趋于/ 而/ 现有/ 的/ 隔离/ 机制/ 中/ 的/ 隔离/ 元/ 数据/ (/ QuarantineMetadataofExistingQuarantineMethods/ ,/ 简称/ EQM/ -/ QM/ )/ 主要/ 由/ 两/ 方面/ 组成/ ,/ 其一/ 为/ 执行/ 事务/ 建立/ 的/ 事务/ 依赖/ 记录/ 数据/ ,/ 包含/ 事务/ ID/ 、/ 事务/ 执行/ 时间/ 戳/ 和/ 依赖/ 事务/ ID/ 序列/ ;/ 其二/ 为/ 建立/ 事务/ 与/ 修改/ 数据/ 的/ 关联/ 而/ 记录/ 的/ 数据/ ,/ 包括/ 最后/ 修改/ 关系/ 表/ 元组/ 数据/ 的/ 事务/ ID/ 和/ 事务/ 执行/ 时间/ 戳/ ./ 为了/ 实验/ 的/ 简洁性/ ,/ 我们/ 将/ 上述/ 隔离/ 元/ 数据/ 中/ 的/ 事务/ ID/ 、/ 时间/ 戳/ 数据类型/ 设置/ 为/ 整形/ ;/ 设/ n/ 为/ 实验/ 中/ 事务/ 执行/ 历史/ H/ 的/ 容量/ ,/ 即/ H/ 中有/ n/ 个/ 事务/ ;/ 随机/ 生成/ 满足/ 事务/ 依赖/ 关系/ 的/ 事务/ 对象/ ,/ 设/ r/ 为/ 事务/ 依赖/ 随机/ 因子/ ,/ 即/ 在/ H/ 中/ 依赖于/ 事务/ Ti/ (/ 1/ / i/ / n/ )/ 影响/ 的/ 事务/ 总数/ 取/ [/ 1/ ,/ r/ ]/ 中/ 的/ 随机数/ ,/ 且/ 设置/ 任意/ 依赖于/ 两个/ 不同/ 事务/ 的/ 事务/ 集/ 不/ 相交/ ;/ 用/ 整形/ 数值/ 集合/ 表示/ 颜色/ 集合/ 属性/ 字典/ 中/ 的/ 颜色/ 集合/ 属性/ ./ 下面/ ,/ 我们/ 分别/ 给出/ 在/ r/ =/ 10/ 、/ SF/ =/ 0.05/ ,/ 以/ 事务/ 数量/ n/ 为/ 自变量/ 以及/ 在/ r/ =/ 10/ 、/ n/ =/ 500/ ,/ 以/ SF/ 刻度/ 因子/ 为/ 自变量/ 时/ ,/ 隔离/ 元/ 数据/ 的/ 空间/ 负载/ 对比/ 情况/ ,/ 实验/ 结果/ 如图/ 6/ 所示/ ./ 平缓/ ,/ 当/ SF/ =/ 0.1/ 时/ ,/ CTMO/ -/ QM/ 的/ 空间/ 负载/ 仅/ 比/ EQM/ -/ QM/ 多/ 0.05/ ./ 该/ 实验/ 结果表明/ ,/ 本文/ 的/ 隔离/ 方法/ 与/ 现有/ 的/ 隔离/ 方法/ 在/ 隔离/ 元/ 数据/ 的/ 空间/ 占用/ 上/ 具有/ 类似/ 的/ 特征/ ,/ 都/ 随着/ 事务/ 数量/ 和/ 数据库/ 元组/ 数据/ 规模/ (/ SF/ 刻度/ 因子/ )/ 的/ 增大/ 而/ 不断/ 增大/ ,/ 但/ 隔离/ 元/ 数据/ 的/ 空间/ 负载/ 主要/ 受/ 数据库/ 元组/ 数据/ 规模/ 影响/ ;/ 同时/ ,/ 本文/ 的/ 隔离/ 方法/ 在/ 隔离/ 元/ 数据/ 的/ 占用/ 空间/ 上/ 略大于/ 现有/ 的/ 隔离/ 方法/ ,/ 其/ 空间/ 负载/ 增量/ 随着/ 事务/ 数量/ 的/ 增大/ 而/ 增长/ ,/ 但/ 增长幅度/ 很小/ ,/ 此外/ ,/ 其/ 空间/ 负载/ 增量/ 还/ 随着/ 数据库/ 元组/ 数据/ 规模/ (/ SF/ 刻度/ 因子/ )/ 的/ 增大/ 而/ 逐渐/ Page13/ 减小/ ,/ 但/ 减小/ 幅度/ 逐渐/ 趋于/ 平缓/ ./ (/ 2/ )/ 关系/ 表/ 数据/ 空间/ 负载/ 对比/ 实验/ 为了/ 实现/ 对/ 损坏/ 数据/ 的/ 及时/ 、/ 有效/ 隔离/ ,/ 需要/ 为/ 数据库/ 关系/ 表/ 数据/ 添加/ CTMO/ 标记/ ,/ 即/ 为/ 关系/ 表/ 增加/ 两个/ 整型/ 属性/ 列/ ,/ 分别/ 用来/ 表示/ CTMO/ 的/ 时序/ 和/ 颜色/ 集合/ 属性/ ,/ 这/ 就/ 增加/ 了/ 数据库/ 中/ 存储/ 关系/ 表/ 数据/ 的/ 空间/ 占用/ 开销/ ./ 下面/ ,/ 在/ 不同/ SF/ 参数/ 条件/ 下/ ,/ 对比/ 添加/ CTMO/ 标记/ 前后/ 的/ 数据库/ 关系/ 表/ 数据/ 的/ 实际/ 空间/ 占用/ 的/ 变化/ 情况/ ,/ 并/ 计算/ 添加/ 标记/ 后/ 数据库/ 关系/ 表/ 额外/ 空间/ 负载/ 增加/ 的/ 百分比/ ,/ 实验/ 结果/ 如图/ 7/ 所示/ ./ 由图/ 7/ 可知/ ,/ 在/ SF/ 值/ 从/ 0.01/ ~/ 0.1/ 的/ 变化/ 过程/ 中/ ,/ 加载/ CTMO/ 标记/ 前后/ 的/ 关系/ 表/ 数据/ 占用/ 空间/ 都/ 逐渐/ 增大/ ,/ 但/ 加载/ CTMO/ 标记/ 后/ 增加/ 的/ 空间/ 负载/ 百分比/ 变化/ 不/ 大/ ,/ 主要/ 分布/ 在/ 4/ %/ 左右/ ,/ 且/ 变化/ 范围/ 较/ 小/ ,/ 平均/ 仅/ 增加/ 4.12/ %/ 的/ 空间/ 负载/ ./ 该/ 实验/ 结果表明/ ,/ 数据库/ 关系/ 表/ 数据/ 中/ CTMO/ 标记/ 的/ 添加/ 对/ 数据库/ 关系/ 表/ 数据/ 空间/ 负载/ 影响/ 较/ 小/ ./ 5.3/ 事务/ 运行/ 时间/ 负载/ 实验/ 本/ 实验/ 主要/ 测试/ 基于/ CTMO/ 模型/ 的/ 损坏/ 数据/ 隔离/ 机制/ 对/ 数据库/ 事务/ 运行/ 时间/ 负载/ 的/ 影响/ 情况/ ,/ 即/ 针对/ DCMA/ 算法/ 和/ RDQA/ 算法/ 进行/ 时间/ 负载/ 测试/ ./ 这里/ 的/ 事务/ 由/ 若干/ 读/ 、/ 写/ 操作/ 组成/ (/ 且/ 都/ 不/ 访问/ 损坏/ 数据/ ①/ )/ ,/ 事务/ 中/ 的/ 读/ 、/ 写/ 操作/ 分别/ 由/ 数据库/ 中/ 的/ 查询/ (/ SELECT/ )/ 和/ 修改/ (/ UPDATE/ )/ 操作/ 表示/ ./ 由/ DCMA/ 算法/ 过程/ 可知/ ,/ 该/ 标记/ 算法/ 的/ 执行/ 与/ 事务/ 读/ 、/ 写/ 和/ 提交/ 操作/ 密切相关/ ,/ 存在/ 于/ 事务/ 执行/ 过程/ 中/ ;/ 而/ 由/ RDQA/ 算法/ 过程/ 可知/ ,/ 该/ 隔离/ 算法/ 与/ 隔离/ 标记/ 向量/ 密切相关/ ,/ 当/ 隔离/ 标记/ 向量/ 为/ 空时/ ,/ 则/ 跳/ 过/ 对/ 事务/ 操作/ 的/ 隔离/ 检查/ ,/ 直接/ 执行/ 事务/ 操作/ ,/ 可见/ ,/ 在/ 这种/ 情况/ 下/ RDQA/ 算法/ 对/ 事务/ 执行/ 没有/ 任何/ 影响/ ./ 基于/ 上述情况/ ,/ 我们/ 设计/ 两组/ 实验/ :/ (/ 1/ )/ 设置/ 隔离/ 标记/ 向量/ 为空/ ,/ 即/ 不/ 考虑/ RDQA/ 算法/ ,/ 只/ 测试/ 在/ DCMA/ 算法/ 执行/ 情况/ 下/ ,/ 隔离/ 机制/ 对/ 事务/ 运行/ 时间/ 负载/ 的/ 影响/ 情况/ ;/ (/ 2/ )/ 设置/ 隔离/ 标记/ 向量/ 不为/ 空/ ,/ 测试/ 在/ RDQA/ 和/ DCMA/ 算法/ 共同/ 作用/ 下/ ,/ 隔离/ 机制/ 对/ 事务/ 运行/ 时间/ 负载/ 的/ 影响/ 情况/ ./ 在/ 实验/ 中/ ,/ TPC/ -/ D/ 刻度/ 因子/ SF/ 设置/ 为/ 0.1/ ,/ 生成/ 并/ 导入/ 对应/ 的/ 实验/ 数据/ ,/ 选取/ 其中/ 容量/ 最大/ 的/ 关系/ 表/ LINEITEM/ (/ 包含/ 60/ 万条/ 元组/ ,/ 总计/ 约/ 100M/ )/ 为/ 实验/ 对象/ ;/ 用/ RC/ 表示/ 读/ 元组/ 数据量/ 、/ WC/ 表示/ 写/ 元组/ 数据量/ 、/ QD/ 表示/ 隔离/ 标记/ 向量/ 的/ 容量/ ./ (/ 1/ )/ DCMA/ 算法/ 对/ 事务/ 运行/ 时间/ 负载/ 的/ 影响/ 假设/ 隔离/ 标记/ 向量/ 为空/ (/ QD/ =/ 0/ )/ ,/ 此时/ 不/ 考虑/ RDQA/ 算法/ 对/ 事务/ 执行/ 的/ 影响/ ,/ 只/ 测算/ DCMA/ 算法/ 对/ 事务/ 运行/ 负载/ 的/ 影响/ 情况/ ./ 分别/ 设置/ WC/ 和/ RC/ 为/ 自变量/ ,/ 得到/ 实验/ 结果/ 如图/ 8/ 所示/ ./ 图/ 8DCMA/ 算法/ 对/ 事务/ 运行/ 时间/ 负载/ 的/ 影响/ ①/ 注/ :/ 由于/ 访问/ 损坏/ 数据/ 的/ 事务/ 将/ 直接/ 被/ 中断/ ,/ 为了/ 测算/ DCMAPage14/ 由图/ 8/ (/ a/ )/ 可知/ ,/ 当/ RC/ 不变/ 、/ WC/ 增大/ 时/ ,/ DCMA/ 算法/ 带来/ 的/ 额外/ 时间/ 负载/ 百分比/ 变化/ 不/ 大/ ,/ 平均/ 仅/ 增加/ 1.80/ %/ 的/ 时间/ 负载/ ;/ 由图/ 8/ (/ b/ )/ 可知/ ,/ 当/ WC/ 不变/ 、/ RC/ 增大/ 时/ ,/ DCMA/ 算法/ 带来/ 的/ 额外/ 时间/ 负载/ 百分比/ 分布/ 在/ 3/ %/ 左右/ ,/ 变化/ 很小/ ,/ 平均/ 仅/ 增加/ 3.09/ %/ 的/ 时间/ 负载/ ./ 该/ 实验/ 结果表明/ ,/ DCMA/ 算法/ 对/ 事务/ 运行/ 时间/ 负载/ 的/ 影响/ 很小/ ./ 图/ 9RDQA/ 、/ DCMA/ 算法/ 对/ 事务/ 执行/ 效率/ 的/ 影响/ 由图/ 9/ (/ a/ )/ 可知/ ,/ 当/ RC/ 、/ WC/ 不变/ 、/ QD/ 增大/ 时/ ,/ RDQA/ 与/ DCMA/ 算法/ 带来/ 的/ 额外/ 时间/ 负载/ 近似/ 成/ 正比例/ 增长/ ,/ 隔离/ 标记/ 向量/ 每/ 增加/ 500/ ,/ 系统/ 额外/ 时间/ 负载/ 平均/ 增长/ 约/ 1.92/ %/ ;/ 由图/ 9/ (/ b/ )/ 可知/ ,/ 当/ RC/ 、/ QD/ 不变/ 、/ WC/ 增大/ 时/ ,/ 增加/ 的/ 时间/ 负载/ 百分比/ 分布/ 在/ 4.5/ %/ 左右/ ,/ 变化/ 很小/ ,/ 系统/ 平均/ 仅/ 增加/ 4.66/ %/ 的/ 额外/ 时间/ 负载/ ;/ 由图/ 9/ (/ c/ )/ 可知/ ,/ 当/ WC/ 、/ QD/ 不变/ 、/ RC/ 增大/ 时/ ,/ 增加/ 的/ 时间/ 负载/ 近/ 也/ 随之/ 增长/ ,/ 但/ 增长幅度/ 逐步/ 减小/ ,/ 并/ 趋于/ 平缓/ ,/ 且/ 在/ 实验/ 数据/ 范围/ 内/ ,/ 额外/ 增长/ 的/ 系统/ 时间/ 负载/ 不/ 超过/ 10/ %/ ./ 该/ 实验/ 结果表明/ ,/ 事务/ 运行/ 的/ 时间/ 负载/ 主要/ 受/ QD/ 影响/ ,/ 受/ RC/ 和/ WC/ 的/ 影响/ 相对/ 较/ 小/ ./ 由/ 上述/ 实验/ (/ 1/ )/ 和/ (/ 2/ )/ 可知/ ,/ RDQA/ 算法/ 对系统/ 载/ 的/ 影响/ (/ 2/ )/ RDQA/ 与/ DCMA/ 算法/ 对/ 事务/ 运行/ 时间/ 负/ 假设/ 隔离/ 标记/ 向量/ 非空/ (/ QD/ ≠/ 0/ )/ ,/ 测算/ RDQA/ 与/ DCMA/ 算法/ 共同/ 执行/ 时/ 对/ 合法/ 事务/ 运行/ 时间/ 负载/ 的/ 影响/ 情况/ ./ 分别/ 设置/ QD/ 、/ RC/ 和/ WC/ 为/ 自变量/ ,/ 得到/ 实验/ 结果/ 如图/ 9/ 所示/ ./ 事务/ 运行/ 时间/ 负载/ 影响/ 较大/ ,/ 其/ 影响/ 程度/ 主要/ 取决于/ 隔离/ 标记/ 向量/ 的/ 容量/ ,/ 而/ DCMA/ 算法/ 对系统/ 运行/ 效率/ 影响/ 较/ 小/ ./ 6/ 结束语/ 本文/ 通过/ 引入/ 颜色/ -/ 时序/ 标记/ 对象/ (/ CTMO/ )/ 模型/ ,/ 以/ 解决/ 现有/ 隔离/ 机制/ 中/ 存在/ 的/ 合法/ 数据/ 误/ 隔离/ 问题/ 为/ 主要/ 目标/ ,/ 提出/ 了/ 一种/ 基于/ CTMO/ 模型/ 的/ 数据库/ 损坏/ 数据/ 隔离/ 机制/ ,/ 其/ 核心/ 算法/ 包括/ 针对/ 事务/ 及其/ 修改/ 数据/ 的/ 动态/ CTMO/ 标记/ 算法/ (/ DCMA/ )/ 和/ 基于/ 隔离/ 标记/ 向量/ 的/ 实时/ 损坏/ 数据/ 隔离/ 算法/ (/ RDQA/ )/ ;/ 同时/ ,/ 通过/ 对/ 该/ 隔离/ 机制/ 的/ 完全性/ 和/ 正确/ Page15/ 性/ 证明/ 可知/ ,/ 该/ 隔离/ 机制/ 不/ 存在/ 损坏/ 数据/ 泄露/ 和/ 合法/ 数据/ 误/ 隔离/ 的/ 问题/ ,/ 是/ 一种/ 精确/ 隔离/ 的/ 方法/ ./ 实验/ 表明/ ,/ 与/ 现有/ 的/ 隔离/ 机制/ 相比/ ,/ 基于/ CTMO/ 模型/ 的/ 损坏/ 数据/ 隔离/ 机制/ 具有/ 更/ 低/ 的/ 误/ 隔离/ 率/ 和/ 更/ 高/ 的/ 数据/ 可用/ 度/ ;/ 并且/ 该/ 隔离/ 机制/ 在/ 时间/ 、/ 空间/ 性能/ 负载/ 上/ 也/ 有/ 良好/ 表现/ :/ 对/ 数据库/ 数据/ 空间/ 负载/ 的/ 影响/ 较/ 小/ ,/ 而/ 事务/ 运行/ 的/ 时间/ 负载/ 主要/ 受/ RDQA/ 算法/ 影响/ ,/ 其/ 影响/ 程度/ 主要/ 取决于/ 隔离/ 标记/ 向量/ 的/ 容量/ ,/ DCMA/ 算法/ 对/ 事务/ 运行/ 的/ 影响/ 较/ 小/ ./ 本文/ 的/ 后续/ 工作/ 主要/ 有/ :/ 研究/ 隔离/ 标记/ 向量/ 的/ 快速/ 定位/ 和/ 匹配/ 检查/ 方法/ ,/ 进一步/ 降低/ 隔离/ 机制/ 对/ 事务/ 运行/ 效率/ 的/ 影响/ ;/ 扩展/ CTMO/ 模型/ ,/ 研究/ 针对/ 恶意/ 事务/ 损坏/ 数据/ 的/ 修复/ 技术/ 等/ ./ 

