Page1/ 能量/ 高效/ 的/ 无线/ 传感器/ 网络空间/ 范围/ 查询处理/ 算法/ 刘亮/ 秦小麟/ 郑桂能/ 李博涵/ (/ 南京航空航天大学/ 信息科学/ 与/ 技术/ 学院/ 南京/ 210016/ )/ 摘要/ 现有/ 无线/ 传感器/ 网络空间/ 范围/ 查询处理/ 算法/ 能量消耗/ 大且/ 当/ 节点/ 失效/ 时/ 查询处理/ 过程/ 易/ 被/ 中断/ ,/ 无法/ 返回/ 查询/ 结果/ ./ 文中/ 提出/ 了/ 一种/ 能量/ 高效/ 的/ 算法/ ESA/ (/ Energy/ -/ efficientSpatialwindowqueryprocessingAlgorithm/ )/ ./ 它/ 将/ 查询/ 区域/ 划分/ 为/ 若干个/ 网格/ ,/ 每个/ 网格/ 中有/ 一个/ 簇头/ 节点/ 负责/ 收集/ 所在/ 网格/ 中/ 其它/ 节点/ 的/ 感知/ 数据/ ,/ 对/ 这些/ 数据/ 进行/ 聚集/ 运算/ 得到/ 部分/ 查询/ 结果/ ,/ 并/ 将/ 其/ 发送至/ 下/ 一个/ 网格/ 的/ 簇头/ 节点/ ,/ 直至/ 收集/ 到/ 查询/ 区域/ 内/ 所有/ 节点/ 的/ 感知/ 数据/ ,/ 以/ 生成/ 最终/ 的/ 查询/ 结果/ ./ ESA/ 算法/ 只/ 需/ 查询/ 区域/ 内/ 的/ 节点/ 发送/ 一次/ 数据/ 消息/ ,/ 减少/ 了/ 发送/ 的/ 数据/ 消息/ 数目/ ./ 根据/ ESA/ 的/ 能耗/ 公式/ 给出/ 了/ 两种/ 网格/ 划分/ 和/ 簇头/ 节点/ 选择/ 算法/ ,/ 以/ 降低/ 算法/ 分发/ 查询/ 消息/ 消耗/ 的/ 能量/ ./ 设计/ 了/ 一种/ 利用/ 节点/ 冗余/ 保证/ 查询处理/ 过程/ 鲁棒性/ 的/ 算法/ ,/ 避免/ 了/ ESA/ 因/ 节点/ 失效/ 而/ 中断/ ./ 提出/ 了/ 两种/ 感知/ 数据/ 收集/ 算法/ ,/ 以/ 减少/ 簇头/ 节点/ 收集/ 其/ 邻居/ 节点/ 感知/ 数据/ 的/ 能耗/ ./ 最后/ ,/ 对/ ESA/ 算法/ 和/ 现有/ 的/ IWQE/ 算法/ (/ Itinerary/ -/ basedWindowQueryExecution/ )/ 的/ 性能/ 进行/ 了/ 系统/ 的/ 理论/ 和/ 实验/ 分析/ ./ 分析/ 结果表明/ :/ 在/ 绝大多数/ 情况/ 下/ ,/ ESA/ 算法/ 在/ 能量消耗/ 、/ 查询/ 成功率/ 和/ 查询/ 结果/ 质量/ 方面/ 优于/ IWQE/ 算法/ ./ 关键词/ 物/ 联网/ ;/ 无线/ 传感器/ 网络/ ;/ 查询处理/ ;/ 空间/ 范围/ 查询/ ;/ 能量/ 高效/ ;/ 容忍/ 节点/ 失效/ 1/ 引言/ 无线/ 传感器/ 网络/ 作为/ 物/ 联网/ 的/ 重要/ 组成部分/ ,/ 在/ 灾害/ 搜救/ 、/ 环境监测/ 、/ 医疗卫生/ 、/ 智能家居/ 等/ 领域/ 有着/ 广阔/ 的/ 应用/ 前景/ ,/ 是/ 当前/ 信息技术/ 领域/ 的/ 一个/ 研究/ 热点/ ./ 在/ 许多/ 传感器/ 网络应用/ 中/ ,/ 用户/ 经常/ 提交/ 空间/ 范围/ 查询/ [/ 1/ ]/ 以/ 获得/ 网络覆盖/ 范围/ 内/ 某/ 局部/ 区域/ 的/ 信息/ ,/ 如/ 当前/ 时刻/ 某/ 区域/ 核辐射/ 最大值/ 、/ 受困/ 人员/ 数目/ 、/ 海洋/ 某/ 区域/ 的/ 平均温度/ 等/ ./ 考虑/ 到/ 传感器/ 节点/ 的/ 能量/ 通常/ 由/ 电池/ 供应/ 十分/ 有限/ ,/ 且/ 受/ 传感器/ 网络/ 规模/ 、/ 工作/ 环境/ 等/ 因素/ 的/ 制约/ ,/ 难以/ 为/ 节点/ 补充/ 能量/ ./ 因此/ ,/ 能量/ 高效/ 的/ 空间/ 范围/ 查询处理/ 是/ 目前/ 迫切需要/ 解决/ 的/ 问题/ ./ 针对/ 传感器/ 网络/ 环境/ 下/ 的/ 空间/ 范围/ 查询/ ,/ 现有/ 基于/ 树/ 的/ 算法/ [/ 2/ -/ 12/ ]/ 依赖于/ 预先/ 构造/ 的/ 树形/ 网络拓扑/ ./ 由于/ 受/ 周围环境/ 和/ 节点/ 移动/ 的/ 影响/ ,/ 传感器/ 网络拓扑/ 结构/ 频繁/ 发生变化/ ,/ 导致/ 维护/ 树形/ 网络拓扑/ 的/ 代价/ 太大/ ./ 现有/ 基于/ 路线/ 的/ 算法/ IWQE/ [/ 1/ ]/ (/ Itinerary/ -/ basedWindowQueryExecution/ )/ 沿/ 一条/ 或/ 多条/ 根据/ 网络拓扑/ 动态/ 生成/ 的/ 路线/ 收集/ 查询/ 区域/ 内/ 节点/ 的/ 感知/ 数据/ ,/ 有效/ 地/ 降低/ 了/ 网络拓扑/ 变化/ 对/ 查询处理/ 的/ 影响/ ,/ 但/ 该/ 算法/ 还/ 存在/ 如下/ 问题/ :/ (/ 1/ )/ 能量消耗/ 较大/ ;/ (/ 2/ )/ 节点/ 失效/ 时/ 查询/ 结果/ 全部/ 丢失/ ;/ (/ 3/ )/ 当/ 查询/ 区域/ 内/ 存在/ 不/ 包含/ 节点/ 的/ 子/ 区域/ 时/ ,/ 无法/ 得到/ 正确/ 的/ 查询/ 结果/ ./ 针对/ 这些/ 问题/ ,/ 本文/ 提出/ 了/ 一种/ 能量/ 高效/ 的/ 传感器/ 网络空间/ 范围/ 查询处理/ 算法/ ESA/ (/ Energy/ -/ effi/ -/ cientSpatialwindowqueryprocessingAlgorithm/ )/ ./ 在/ 查询处理/ 过程/ 中/ ,/ ESA/ 根据/ 网络拓扑/ 将/ 查询/ 区域/ 划分/ 为/ 一系列/ 网格/ ,/ 在/ 每个/ 网格/ 中/ 挑选出/ 一个/ 簇头/ 节点/ 用于/ 收集/ 网格/ 中/ 其它/ 节点/ 的/ 感知/ 数据/ ,/ 对/ 收集/ 到/ 的/ 数据/ 集合/ 进行/ 聚集/ 运算/ (/ 如求/ 最大值/ 、/ 求和/ 等/ )/ ,/ 然后/ 将/ 聚集/ 后/ 生成/ 的/ 部分/ 查询/ 结果/ 发送至/ 下/ 一个/ 网格/ 的/ 簇头/ 节点/ ,/ 如此/ 继续/ ,/ 直至/ 到达/ 最后/ 一个/ 网格/ ,/ 该/ 网格/ 的/ 簇头/ 节点/ 生成/ 最终/ 的/ 查询/ 结果/ ,/ 将/ 其/ 返回/ 至/ 基站/ ./ 本文/ 提出/ 了/ 两种/ 网格/ 划分/ 和/ 簇头/ 节点/ 选择/ 算法/ ,/ 以/ 减少/ 分发/ 查询/ 消息/ 的/ 能耗/ ;/ 提出/ 了/ 两种/ 分别/ 用于/ 稳定/ 网络/ 和/ 不/ 稳定/ 网络/ 的/ 感知/ 数据/ 收集/ 算法/ ,/ 以/ 减少/ 簇头/ 节点/ 收集/ 其/ 邻居/ 节点/ 感知/ 数据/ 的/ 能耗/ ./ 为了/ 降低/ 算法/ 因/ 节点/ 失效/ 而/ 中断/ 的/ 概率/ ,/ 本文/ 设计/ 了/ 一种/ 利用/ 节点/ 冗余/ 恢复/ 查询处理/ 过程/ 的/ 算法/ ./ 理论/ 和/ 实验/ 结果表明/ :/ 在/ 绝大多数/ 情况/ 下/ ,/ ESA/ 算法/ 优于/ 现有/ 的/ IWQE/ 算法/ ./ 相比/ 现有/ 的/ 算法/ ,/ ESA/ 算法/ 具有/ 如下/ 优点/ :/ 查询/ 区域/ 内/ 的/ 所有/ 节点/ 只/ 需/ 发送/ 一次/ 数据/ 消息/ ,/ 减少/ 了/ 发送/ 的/ 数据/ 消息/ 数目/ ./ 当/ 节点/ 失效/ 时/ ,/ ESA/ 算法/ 利用/ 备份/ 节点/ 恢复/ 查询处理/ 过程/ ,/ 提高/ 了/ 算法/ 的/ 鲁棒性/ ./ 当/ 查询/ 区域/ 中/ 的/ 某个/ 子/ 区域/ 不/ 存在/ 节点/ 时/ ,/ ESA/ 利用/ 位置/ 路由/ 协议/ 绕过/ 该子/ 区域/ ,/ 消除/ 了/ 空洞/ 区域/ 对/ 查询处理/ 的/ 影响/ ./ ESA/ 仅/ 要求/ 节点/ 维护/ 其/ 邻居/ 节点/ 位置/ 信息/ ,/ 根据/ 该/ 信息/ 动态/ 地/ 进行/ 网格/ 划分/ 和/ 选择/ 网格/ 的/ 簇头/ 节点/ ,/ 避免/ 了/ 网络拓扑/ 变化/ 对/ 查询处理/ 的/ 影响/ ./ 本文/ 第/ 2/ 节/ 介绍/ 相关/ 工作/ 和/ 背景/ 知识/ ,/ 并/ 分析/ 现有/ 算法/ 存在/ 的/ 问题/ ;/ 第/ 3/ 节/ 首先/ 通过/ 一个/ 示例/ 阐述/ 本文/ 提出/ 的/ 算法/ ESA/ 的/ 思想/ 和/ 优势/ ,/ 然后/ 给出/ ESA/ 的/ 能量消耗/ 公式/ ,/ 并/ 对/ ESA/ 中/ 的/ 关键问题/ —/ —/ —/ 网格/ 大小/ 设置/ 、/ 网格/ 簇头/ 节点/ 的/ 选择/ 策略/ 等/ 进行/ 研究/ ,/ 并/ 对/ ESA/ 算法/ 和/ 现有/ 的/ IWQE/ 算法/ 的/ 能耗/ 进行/ 理论/ 分析/ ;/ 第/ 4/ 节/ 通过/ 实验/ 对/ ESA/ 和/ IWQE/ 算法/ 进行/ 比较/ ;/ 第/ 5/ 节/ 总结/ 全文/ 并/ 给出/ 未来/ 的/ 研究/ 方向/ ./ 2/ 相关/ 工作/ 现有/ 空间/ 范围/ 查询处理/ 算法/ 可以/ 分为/ 两类/ ./ (/ 1/ )/ 基于/ 树/ 的/ 算法/ ./ 文献/ [/ 2/ ]/ 提出/ 了/ TAG/ (/ TinyAggregationserviceforad/ -/ hocsensornetworks/ )/ 算法/ ./ 它/ 通过/ 消息/ 泛洪/ 协议/ 将/ 查询/ 消息/ 发送到/ 网络/ 中/ 的/ 所有/ 节点/ ,/ 组织/ 这些/ 节点/ 成/ 一棵/ 以/ 基站/ 为根/ 的/ 树/ ./ 满足/ 查询/ 条件/ 的/ 节点/ 将/ 感知/ 数据/ 发送至/ 其父/ 节点/ ,/ Page3/ 父/ 节点/ 对/ 自己/ 和/ 孩子/ 节点/ 发送/ 的/ 感知/ 数据/ 进行/ 聚集/ ,/ 将/ 聚集/ 运算/ 后/ 的/ 结果/ 发送到/ 上/ 一层/ 节点/ ,/ 如此/ 继续/ ,/ 直至/ 到达/ 基站/ ,/ 生成/ 最终/ 的/ 查询/ 结果/ ./ 文献/ [/ 3/ -/ 5/ ]/ 将/ 空间/ 索引/ R/ 树/ [/ 13/ ]/ 的/ 思想/ 应用/ 于/ TAG/ 中/ ,/ 每个/ 节点/ 维护/ 其/ 孩子/ 节点/ 的/ 最小/ 边界/ 矩形/ ./ 节点/ 收到/ 查询/ 消息/ 后/ ,/ 仅/ 将/ 查询/ 消息/ 发送到/ 最小/ 边界/ 矩形/ 与/ 查询/ 区域/ 相交/ 的/ 子/ 节点/ ,/ 减少/ 了/ 分发/ 查询/ 消息/ 的/ 能耗/ ./ 文献/ [/ 6/ ]/ 提出/ 了/ TAG/ 的/ 改进/ 算法/ STWinFlood/ (/ Spatio/ -/ TemporalWindowFloodalgorithm/ )/ ./ 它/ 包含/ 3/ 个/ 阶段/ :/ ①/ 基站/ 利用/ 位置/ 路由/ 协议/ [/ 14/ ]/ 将/ 查询/ 消息/ 发送到/ 查询/ 区域/ 内/ 的/ 查询/ 协调/ 节点/ ,/ 即/ 距离/ 查询/ 区域/ 中心/ 最近/ 的/ 节点/ ;/ ②/ 查询/ 协调/ 节点/ 将/ 查询/ 消息/ 泛洪/ 至/ 查询/ 区域/ 内/ 的/ 所有/ 节点/ ,/ 这些/ 节点/ 收到/ 查询/ 消息/ 后/ ,/ 将/ 感知/ 数据/ 按/ 查询/ 消息/ 泛洪/ 过程/ 中/ 形成/ 的/ 自己/ 到/ 查询/ 协调/ 节点/ 的/ 最/ 短/ 路径/ 返回/ 至/ 查询/ 协调/ 节点/ ;/ ③/ 查询/ 协调/ 节点/ 按/ 第一阶段/ 发现/ 的/ 路由/ 将/ 查询/ 结果/ 返回/ 至/ 基站/ ./ 相比/ TAG/ ,/ STWinFlood/ 仅/ 将/ 查询/ 消息/ 发送到/ 满足/ 查询/ 条件/ 的/ 节点/ ,/ 减少/ 了/ 能量/ 的/ 消耗/ ./ 文献/ [/ 7/ -/ 12/ ]/ 研究/ 了/ 连续/ 近似/ 聚集/ 查询/ ,/ 利用/ 节点/ 感知/ 数据/ 具有/ 时间/ 相关性/ 减少/ 了/ 相似/ 感知/ 数据/ 的/ 发送/ ./ 文献/ [/ 15/ -/ 16/ ]/ 利用/ 采样/ 技术/ 减少/ 参与/ 查询处理/ 的/ 节点/ 数目/ ,/ 通过/ 设置/ 合理/ 的/ 采样/ 概率/ 保证/ 查询/ 结果/ 质量/ 满足/ 精度/ 要求/ 的/ 同时/ 尽量/ 降低/ 能耗/ ./ 文献/ [/ 17/ ]/ 针对/ 当/ 查询/ 区域/ 内/ 节点/ 非/ 均匀分布/ 时/ ,/ 现有/ 算法/ 的/ 查询/ 结果/ 不/ 准确/ ,/ 提出/ 了/ 三种/ 感知/ 数据/ 加权/ 算法/ 以/ 提高/ 查询/ 结果/ 的/ 正确性/ ./ (/ 2/ )/ 基于/ 路线/ 的/ 算法/ ./ 由于/ 传感器/ 网络拓扑/ 结构/ 频繁/ 发生变化/ ,/ 为了/ 保证/ 查询/ 结果/ 的/ 正确性/ ,/ 基于/ 树/ 的/ 算法/ 需要/ 维护/ 树形/ 网络拓扑/ ,/ 这样/ 带来/ 了/ 大量/ 的/ 能量消耗/ ./ 针对/ 该/ 问题/ ,/ 文献/ [/ 1/ ]/ 提出/ 了/ 一种/ 基于/ 路线/ 的/ 数据/ 收集/ 算法/ (/ Itinerary/ -/ baseddataCollectionalgorithm/ ,/ 用/ IC/ 表示/ )/ ./ 它/ 沿/ 一条/ 根据/ 网络拓扑/ 动态/ 生成/ 的/ 路线/ 收集/ 查询/ 区域/ 内/ 节点/ 的/ 数据/ ./ 路线/ 上/ 的/ 节点/ (/ 查询/ 节点/ )/ 首先/ 将/ 查询/ 消息/ (/ 包含/ 查询/ 区域/ 、/ 路线/ 、/ 聚集/ 函数/ 和/ 查询/ 字段/ 等/ 信息/ )/ 广播/ 至/ 其/ 邻居/ 节点/ (/ 数据/ 节点/ )/ ./ 紧接着/ ,/ 数据/ 节点/ 收到/ 查询/ 消息/ 后/ 将/ 其/ 感知/ 数据/ 发送给/ 查询/ 节点/ ,/ 最后/ 查询/ 节点/ 对/ 本地/ 的/ 感知/ 数据/ 、/ 从/ 上/ 一个/ 查询/ 节点/ 接收/ 到/ 的/ 部分/ 查询/ 结果/ 和/ 数据/ 节点/ 的/ 感知/ 数据/ 进行/ 聚集/ 运算/ ,/ 生成/ 新/ 的/ 部分/ 查询/ 结果/ ,/ 并/ 将/ 其/ 发送给/ 下/ 一个/ 查询/ 节点/ ,/ 如此/ 继续/ 直至/ 收集/ 到/ 查询/ 区域/ 内/ 所有/ 节点/ 的/ 感知/ 数据/ ./ 以图/ 1/ 中/ 的/ 网络/ 为例/ ,/ 图中/ 两个/ 节点/ 之间/ 的/ 边/ 表示/ 它们/ 能够/ 互相/ 通信/ ./ 以/ S1/ 为/ 起点/ ,/ 采用/ IC/ 算法/ 计算/ 区域/ ABCD/ 最大/ 温度/ 的/ 过程/ 如图/ 2/ 所示/ ./ 节点/ S1/ 先/ 将/ 查询/ 消息/ 广播/ 至/ 其/ 邻居/ 节点/ ,/ 当前/ 时刻/ S1/ 的/ 邻居/ 节点/ {/ a/ ,/ b/ ,/ c/ ,/ d/ ,/ S2/ }/ 收到/ 查询/ 消息/ 后/ ,/ 分别/ 将/ 其/ 监测/ 的/ 温度/ 数据/ 发送给/ 节点/ S1/ ./ S1/ 收到/ 邻居/ 节点/ 发送/ 的/ 温度/ 数据/ 后/ ,/ 计算/ 出/ 节点/ 集合/ {/ a/ ,/ b/ ,/ c/ ,/ d/ ,/ S1/ ,/ S2/ }/ 的/ 最大/ 温度/ max/ {/ a/ ,/ b/ ,/ c/ ,/ d/ ,/ S1/ ,/ S2/ }/ ./ 然后/ 节点/ S1/ 根据/ 其/ 当前/ 时刻/ 的/ 邻居/ 节点/ 信息/ 选择/ 在/ 查询/ 路线/ 方向/ 前进/ 距离/ 最大/ 的/ 节点/ S2/ 作为/ 下/ 一个/ 查询/ 节点/ ,/ 将/ max/ {/ a/ ,/ b/ ,/ c/ ,/ d/ ,/ S1/ ,/ S2/ }/ 的/ 值/ 发送至/ S2/ ./ 值得注意/ 的/ 是/ ,/ 若/ 此时/ 有/ 新/ 的/ 节点/ 移动/ 到/ 节点/ S1/ 的/ 通信/ 半径/ 内且/ 该/ 节点/ 在/ 查询/ 路线/ 方向/ 上/ 的/ 前进/ 距离/ 最大/ ,/ 则/ S1/ 选择/ 该/ 节点/ 作为/ 下/ 一个/ 查询/ 节点/ ./ S2/ 收到/ 消息/ 后/ ,/ 广播/ 查询/ 消息/ 至/ 其/ 邻居/ 节点/ ,/ S2/ 的/ 邻居/ 节点/ {/ a/ ,/ b/ ,/ c/ ,/ d/ ,/ e/ ,/ f/ ,/ S1/ ,/ S3/ }/ 中未/ 发送/ 感知/ 数据/ 的/ 节点/ {/ e/ ,/ f/ ,/ S3/ }/ 将/ 感知/ 数据/ 发送至/ S2/ ,/ S2/ 利用/ S1/ 发送/ 的/ 包含/ max/ {/ a/ ,/ b/ ,/ c/ ,/ d/ ,/ S1/ ,/ S2/ }/ 的/ 消息/ 、/ 邻居/ 节点/ 发送/ 的/ 感知/ 数据/ 可以/ 计算/ 出/ max/ {/ a/ ,/ b/ ,/ c/ ,/ d/ ,/ e/ ,/ f/ ,/ S1/ ,/ S2/ ,/ S3/ }/ ,/ 并/ 将/ 其/ 发送至/ 下/ 一个/ 查询/ 节点/ ./ 如此/ 继续/ ,/ 直至/ 到达/ 节点/ S4/ ,/ S4/ 计算/ 出/ 区域/ ABCD/ 的/ 最大/ 温度/ ./ 图/ 1/ 示例/ 网络图/ 2/ 基于/ 路线/ 的/ 数据/ 收集/ 算法/ 对于/ 空间/ 范围/ 查询/ ,/ 文献/ [/ 1/ ]/ 提出/ 了/ 基于/ IC/ 的/ IWQE/ 算法/ (/ 查询/ 路线/ 如图/ 3/ 所示/ )/ ./ 它/ 首先/ 利用/ 位置/ 路由/ 协议/ [/ 14/ ]/ 将/ 查询/ 消息/ 发送至/ 查询/ 区域/ 内/ 的/ 一个/ 节点/ ,/ 然后/ 该/ 节点/ 利用/ IC/ 算法/ 沿图/ 3/ 所示/ 的/ 路线/ 收集/ 感知/ 数据/ 并/ 对/ 查询/ 区域/ 内/ 节点/ 的/ 感知/ 数据/ 进行/ 聚集/ 运算/ ,/ 计算/ 出/ 最终/ 的/ 查询/ 结果/ ,/ 最后/ 利用/ 位置/ 路由/ 协议/ 将/ 其/ 返回/ 至/ 基站/ ./ 为了/ 保证/ 能/ 收集/ 到/ 查询/ 区域/ 内/ 所有/ 节点/ 的/ 数据/ ,/ 文献/ [/ 1/ ]/ 证明/ 查询/ 路线/ 的/ 宽度/ 不能/ 超过/ 节点/ 通信/ 半径/ 的/ 槡/ 3/ // 2/ 倍/ ./ 另外/ ,/ 文献/ [/ 18/ -/ 20/ ]/ 利用/ IC/ 算法/ 处理/ K/ 近邻/ 查询/ ,/ 即/ 获得/ 距离/ 某/ 位置/ 最近/ 的/ K/ 个/ 节点/ 的/ 感知/ 数据/ ./ Page4/ 基于/ 路线/ 的/ 算法/ 根据/ 实时/ 的/ 网络拓扑/ 信息/ 动态/ 地/ 形成/ 查询/ 路线/ ,/ 因而/ 相比/ 基于/ 树/ 的/ 算法/ ,/ 能/ 有效/ 地/ 消除/ 网络拓扑/ 变化/ 对/ 查询处理/ 的/ 影响/ ./ 但/ 它/ 还/ 存在/ 如下/ 问题/ :/ (/ 1/ )/ 能量消耗/ 较大/ ./ 理想/ 情况/ 下/ ,/ 查询/ 区域/ 中/ 的/ 每个/ 节点/ 只/ 需/ 发送/ 一次/ 数据/ 消息/ ./ 但/ 若/ 采用/ 基于/ 路线/ 的/ 算法/ ,/ 每个/ 数据/ 节点/ 需要/ 发送/ 一次/ 感知/ 数据/ 消息/ ,/ 而/ 所有/ 查询/ 节点/ (/ 除/ 第一个/ 查询/ 节点/ 外/ )/ 需要/ 发送/ 一次/ 感知/ 数据/ 消息/ 和/ 一次/ 部分/ 查询/ 结果/ 消息/ ,/ 即/ 发送/ 本地/ 的/ 感知/ 数据/ 至上/ 一个/ 查询/ 节点/ 和/ 发送/ 聚集/ 后/ 的/ 部分/ 查询/ 结果/ 至下/ 一个/ 查询/ 节点/ ;/ (/ 2/ )/ 当/ 查询/ 节点/ 失效/ 时/ 查询/ 结果/ 全部/ 丢失/ ./ 如图/ 2/ 所示/ ,/ 在/ 查询处理/ 过程/ 中/ ,/ 当/ 查询/ 节点/ (/ 如/ S2/ 、/ S3/ 等/ )/ 失效/ 时/ ,/ 则/ 查询/ 结果/ 丢失/ 且/ 查询处理/ 过程/ 无法/ 继续/ 进行/ ,/ 无法/ 返回/ 查询/ 结果/ ;/ (/ 3/ )/ 无法/ 保证/ 查询/ 线路/ 的/ 连通性/ ./ 在/ 图/ 2/ 中/ ,/ 若/ 节点/ e/ 、/ f/ 、/ S3/ 不/ 存在/ ,/ 则/ 节点/ S2/ 收集/ 完其/ 邻居/ 节点/ 的/ 感知/ 数据/ 后/ ,/ 查询处理/ 过程/ 被迫/ 中断/ ,/ 无法/ 收集/ 到/ 节点/ g/ 、/ h/ 、/ i/ 、/ j/ 、/ S4/ 的/ 感知/ 数据/ ./ 3/ 能量/ 高效/ 的/ 传感器/ 网络空间/ 查询处理/ 算法/ 3.1/ 假设/ 与/ 符号/ 定义/ 本文/ 采用/ 文献/ [/ 1/ ,/ 18/ -/ 20/ ]/ 相同/ 的/ 假设/ ./ 所有/ 传感器/ 节点均/ 维护/ 其一/ 跳/ 邻居/ 节点/ 的/ 位置/ 信息/ ./ 节点/ 传输/ 半径/ 相等/ 且/ 为/ R/ ./ 平均/ 每个/ 节点/ 有/ nn/ 个/ 邻居/ 节点/ ./ 节点/ 发送/ 和/ 接收/ 1/ 字节/ 数据/ 消耗/ 的/ 能量/ 分别/ 为/ Et/ 和/ Er/ ,/ 广播/ 一个/ 1/ 字节/ 数据/ 时/ ,/ 广播/ 节点/ 和/ 接收/ 节点/ 消耗/ 的/ 能量/ 之/ 和/ 为/ E/ ./ 易知/ E/ =/ Et/ +/ nn/ ×/ Er/ ./ 由于/ 无线通信/ 的/ 广播/ 特性/ ,/ 节点/ 单播/ 1/ 字节/ 数据/ 时/ 网络/ 消耗/ 的/ 总/ 能量/ 也/ 为/ E/ ./ 点/ a/ 和/ b/ 之间/ 的/ 距离/ 记为/ fd/ (/ a/ ,/ b/ )/ ./ 空间/ 范围/ 查询/ 用/ SWQ/ (/ sw/ )/ 表示/ ,/ 其中/ sw/ 为/ 一/ 矩形/ 查询/ 区域/ ,/ 其/ 宽度/ 、/ 高度/ 、/ 面积/ 分别/ 记为/ w/ 、/ h/ 和/ A/ ./ sw/ 中/ 的/ 节点/ 数为/ M/ ./ 查询/ 消息/ 包/ 的/ 大小/ 为/ Sq/ ./ 感知/ 数据/ 消息/ 、/ 经过/ 聚集/ 运算/ 后/ 的/ 部分/ 查询/ 结果/ 和/ 最终/ 的/ 查询/ 结果/ 消息/ 大小/ 均/ 相等/ 且/ 为/ Sa/ ./ 处理/ 空间/ 范围/ 查询/ 网络/ 消耗/ 的/ 总/ 能量/ Etotal/ =/ Ef/ +/ Ec/ +/ Eb/ ,/ 其中/ ,/ Ef/ 表示/ 将/ 查询/ 消息/ 发送到/ 查询/ 区域/ 内/ 的/ 一个/ 节点/ 消耗/ 的/ 能量/ ;/ Ec/ 表示/ 在/ 查询/ 区域/ 内/ 分发/ 查询/ 和/ 收集/ 感知/ 数据/ 消耗/ 的/ 能量/ ;/ Eb/ 表示/ 将/ 最终/ 的/ 查询/ 结果/ 返回/ 基站/ 消耗/ 的/ 能量/ ./ 算法/ 执行/ 过程/ 中/ 发送/ 的/ 感知/ 数据/ 消息/ 、/ 部分/ 查询/ 结果/ 消息/ 统称/ 为/ 数据/ 消息/ ./ 3.2/ 算法/ 思想/ 为了/ 避免/ 现有/ 算法/ 的/ 问题/ ,/ 本文/ 提出/ 一种/ 能量/ 高效/ 的/ 空间/ 范围/ 查询处理/ 算法/ ESA/ ,/ 如图/ 4/ 所示/ ,/ ESA/ 算法/ 分为/ 3/ 个/ 阶段/ :/ (/ 1/ )/ 利用/ 位置/ 路由/ 协议/ 将/ 查询/ 消息/ 发送至/ 查询/ 区域/ 内/ 的/ 一个/ 节点/ ./ 本文/ 称该/ 节点/ 为/ 查询/ 区域/ 起始/ 节点/ ,/ 如图/ 4/ 中/ 的/ 节点/ a/ ./ (/ 2/ )/ 从/ 查询/ 区域/ 起始/ 节点/ 开始/ ,/ 根据/ 实时/ 的/ 网络/ 状态/ 将/ 查询/ 区域/ 划分/ 为/ 若干个/ 网格/ ./ 每个/ 网格/ 中有/ 一个/ 簇头/ 节点/ cg/ 负责/ 收集/ 所在/ 网格/ g/ 中/ 其它/ 节点/ 的/ 数据/ ,/ 根据/ 其/ 邻居/ 节点/ 位置/ 信息/ 计算/ 下/ 一个/ 网格/ gn/ 的/ 大小/ 及下/ 一个/ 网格/ 的/ 簇头/ 节点/ cgn/ ,/ 并/ 将/ 查询/ 消息/ 和/ 经过/ 聚集/ 运算/ 后/ 生成/ 的/ 部分/ 查询/ 结果/ 广播/ 至/ 簇头/ 节点/ cgn/ ./ 网格/ 大小/ 和/ 网格/ 簇头/ 节点/ 满足/ 以下/ 约束条件/ :/ ESA/ 约束条件/ :/ 网格/ gn/ 中/ 的/ 所有/ 节点均/ 在/ 簇头/ 节点/ cg/ 的/ 通信/ 半径/ 内/ ,/ 且/ 网格/ gn/ 中除/ 簇头/ 节点/ cgn/ 之外/ 的/ 所有/ 节点均/ 能/ 与/ cgn/ 通信/ ./ 由于/ 无线通信/ 的/ 广播/ 特性/ ,/ cgn/ 收到/ cg/ 发送/ 的/ 部分/ 查询/ 结果/ 和/ 查询/ 消息/ 的/ 同时/ ,/ gn/ 中/ 的/ 所有/ 节点均/ 能/ 收到/ 该/ 消息/ ./ gn/ 中/ 的/ 节点/ 收到/ cg/ 发送/ 的/ 查询/ 消息/ 后/ ,/ 依次/ 广播/ 其/ 感知/ 数据/ 至/ cgn/ ./ cgn/ 收到/ gn/ 中/ 节点/ 发送/ 的/ 感知/ 数据/ 后/ ,/ 根据/ cg/ 发送/ 的/ 部分/ 查询/ 结果/ 、/ gn/ 中/ 节点/ 发送/ 的/ 感知/ 数据/ 和/ cgn/ 本地/ 的/ 感知/ 数据/ ,/ 生成/ 新/ 的/ 部分/ 查询/ 结果/ ,/ 并/ 将/ 该/ 部分/ 查询/ 结果/ 和/ 查询/ 消息/ 广播/ 至下/ 一个/ 网格/ 的/ 簇头/ 节点/ ./ 如此/ 继续/ ,/ 直到/ 遍历/ 完/ 查询/ 区域/ 内/ 的/ 所有/ 节点/ ,/ 计算/ 出/ 最终/ 的/ 查询/ 结果/ ./ (/ 3/ )/ 查询/ 区域/ 最后/ 一个/ 网格/ 的/ 簇头/ 节点/ 利用/ 位置/ 路由/ 协议/ 将/ 第二阶段/ 生成/ 的/ 最终/ 查询/ 结果/ 返回/ 至/ 基站/ ./ Page5/ 对于/ 图/ 1/ 中/ 的/ 网络/ ,/ 以/ S1/ 为/ 起点/ ,/ 采用/ ESA/ 算法/ 计算/ 区域/ ABCD/ (/ 其/ 宽度/ 小于/ 节点/ 间通信/ 半径/ )/ 最大/ 温度/ 的/ 过程/ 如图/ 5/ 所示/ ./ 由于/ 节点/ 集合/ {/ a/ ,/ b/ ,/ c/ ,/ d/ ,/ S2/ }/ 均/ 在/ 节点/ S1/ 的/ 通信/ 半径/ 内/ ,/ 且/ S2/ 在/ {/ a/ ,/ b/ ,/ c/ ,/ d/ }/ 的/ 通信/ 半径/ 内/ ./ 节点/ S1/ 选择/ 其/ 邻居/ 节点/ S2/ 作为/ 簇头/ 节点/ 收集/ 网格/ ABEF/ 中/ 节点/ 的/ 数据/ ./ 它/ 先/ 将/ 查询/ 消息/ 和/ 它/ 的/ 温度/ 数据/ 广播/ 至/ 其/ 邻居/ 节点/ S2/ ,/ 由于/ 无线通信/ 的/ 广播/ 特性/ ,/ 节点/ a/ 、/ b/ 、/ c/ 、/ d/ 均/ 能/ 接收/ 到/ 该/ 消息/ ./ 邻居/ 节点/ {/ a/ ,/ b/ ,/ c/ ,/ d/ }/ 收到/ 查询/ 消息/ 后/ 分别/ 将/ 其/ 感知/ 的/ 温度/ 数据/ 广播/ 给/ 节点/ S2/ ./ S2/ 收到/ 邻居/ 节点/ {/ a/ ,/ b/ ,/ c/ ,/ d/ }/ 和/ S1/ 发送/ 的/ 温度/ 数据/ 后/ ,/ 计算/ 出/ 到/ 网格/ ABEF/ 为止/ 的/ 部分/ 查询/ 结果/ ,/ 即/ 节点/ 集合/ {/ a/ ,/ b/ ,/ c/ ,/ d/ ,/ S1/ ,/ S2/ }/ 的/ 最大/ 温度/ max/ {/ a/ ,/ b/ ,/ c/ ,/ d/ ,/ S1/ ,/ S2/ }/ ./ 由于/ {/ e/ ,/ f/ ,/ S3/ }/ 均/ 能/ 收到/ S2/ 发送/ 的/ 消息/ 且/ S3/ 在/ {/ e/ ,/ f/ }/ 的/ 通信/ 半径/ 内/ ,/ 节点/ S2/ 选择/ S3/ 收集/ 网格/ EFGH/ 中/ 的/ 数据/ ./ S2/ 将/ 查询/ 消息/ 和/ max/ {/ a/ ,/ b/ ,/ c/ ,/ d/ ,/ S1/ ,/ S2/ }/ 的/ 值/ 广播/ 至/ S3/ ./ 节点/ {/ e/ ,/ f/ }/ 均/ 能/ 收到/ 该/ 消息/ 包/ ./ 它们/ 收到/ 消息/ 后/ ,/ 将/ 温度/ 数据/ 发送至/ S3/ ,/ S3/ 利用/ S2/ 发送/ 的/ 包含/ max/ {/ a/ ,/ b/ ,/ c/ ,/ d/ ,/ S1/ ,/ S2/ }/ 的/ 消息/ 、/ {/ e/ ,/ f/ }/ 发送/ 的/ 温度/ 数据/ 可以/ 计算/ 出/ 到/ 网格/ EFGH/ 为止/ 的/ 部分/ 查询/ 结果/ max/ {/ a/ ,/ b/ ,/ c/ ,/ d/ ,/ e/ ,/ f/ ,/ S1/ ,/ S2/ ,/ S3/ }/ ,/ 并/ 将/ 其/ 广播/ 至下/ 一个/ 簇头/ 节点/ ./ 如此/ 继续/ ,/ 直至/ 到达/ 节点/ i/ ,/ i/ 计算/ 出/ 区域/ ABCD/ 的/ 最大/ 温度/ ./ 在/ 上述/ 例子/ 中/ ,/ 为了/ 计算/ 区域/ ABCD/ 的/ 最大/ 温度/ ,/ ESA/ 算法/ 需要/ 发送/ 4/ 个/ 查询/ 消息/ 和/ 13/ 个/ 数据/ 消息/ (/ 包含/ 感知/ 数据/ 消息/ 和/ 部分/ 查询/ 结果/ 消息/ )/ ,/ 而/ 基于/ 路线/ 的/ 算法/ 需要/ 发送/ 4/ 个/ 查询/ 消息/ 和/ 16/ 个/ 数据/ 消息/ ./ 可见/ ,/ ESA/ 减少/ 了/ 发送/ 的/ 数据/ 消息/ 数目/ ,/ 从而/ 降低/ 了/ 能量/ 的/ 消耗/ ./ 本文/ 将/ 在/ 3.4/ 节对/ 两种/ 算法/ 的/ 能量消耗/ 进行/ 理论/ 分析/ ./ 由于/ 受到/ 节点/ 软硬件/ 故障/ 、/ 节点/ 能量/ 不足/ 、/ 节点/ 休眠/ 等/ 因素/ 的/ 影响/ ,/ 传感器/ 节点/ 失效/ 频繁/ 发生/ ./ ESA/ 算法/ 利用/ 无线通信/ 的/ 广播/ 特性/ ,/ 以/ 避免/ 节点/ 失效/ 对/ 查询处理/ 的/ 影响/ ./ 如图/ 5/ 所示/ ,/ 在/ S2/ 收集/ 网格/ ABEF/ 的/ 感知/ 数据/ 过程/ 中/ ,/ 由于/ 节点/ {/ a/ ,/ b/ ,/ c/ ,/ S1/ }/ 均/ 在/ 彼此/ 的/ 通信/ 半径/ 内/ ,/ 根据/ 无线通信/ 的/ 广播/ 特性/ ,/ 节点/ {/ a/ ,/ b/ ,/ c/ ,/ S1/ }/ 均/ 能/ 分别/ 计算/ 出/ 网格/ ABKL/ 的/ 部分/ 查询/ 结果/ max/ {/ a/ ,/ b/ ,/ c/ ,/ S1/ }/ ./ 以/ 节点/ a/ 为例/ ,/ 节点/ S1/ 、/ b/ 、/ c/ 发送/ 感知/ 数据/ 至/ 节点/ S2/ 时/ ,/ 节点/ a/ 能/ 监听/ 到/ 这些/ 信息/ ./ 节点/ a/ 根据/ 这些/ 接收/ 到/ 的/ 感知/ 数据/ 能/ 计算/ 出/ 网格/ ABKL/ 的/ 部分/ 查询/ 结果/ max/ {/ a/ ,/ b/ ,/ c/ ,/ S1/ }/ ./ 当/ 查询处理/ 过程/ 中/ 节点/ S2/ 失效/ 时/ ,/ 可以/ 从/ 这些/ 节点/ 恢复/ 执行/ ,/ 继续/ 收集/ 区域/ KLCD/ 中/ 的/ 数据/ ./ 同理/ ,/ 当/ 节点/ S4/ 失效/ 时/ ,/ 节点/ g/ 和/ h/ 可以/ 作为/ 节点/ S4/ 的/ 备份/ 节点/ 继续/ 查询处理/ 过程/ ./ 可见/ ,/ 相比/ IWQE/ 算法/ ,/ ESA/ 算法/ 利用/ 节点/ 冗余/ 恢复/ 查询处理/ 过程/ ,/ 降低/ 了/ 算法/ 因/ 节点/ 失效/ 而/ 中断/ 的/ 概率/ ./ 另外/ ,/ 当/ 查询/ 区域/ 中/ 的/ 某子/ 区域/ 不/ 存在/ 节点/ 时/ ,/ ESA/ 算法/ 利用/ 位置/ 路由/ 协议/ 绕过/ 该子/ 区域/ 继续执行/ ./ 如图/ 6/ 所示/ ,/ fd/ (/ S2/ ,/ G/ )/ 和/ fd/ (/ S2/ ,/ K/ )/ 的/ 大小/ 为/ 节点/ 的/ 通信/ 半径/ 且/ fd/ (/ E/ ,/ G/ )/ </ fd/ (/ F/ ,/ K/ )/ ./ 由于/ 节点/ S2/ 在/ 区域/ EFGK/ 中/ 没有/ 邻居/ 节点/ ,/ 区域/ EFGK/ 成为/ “/ 空洞/ 区域/ ”/ ,/ 查询处理/ 无法/ 继续/ 进行/ ./ 为了/ 避免/ 该/ 问题/ ,/ 本文/ 采取/ 如下/ 方法/ :/ S2/ 收集/ 完/ 网格/ ABEF/ 中/ 节点/ 的/ 感知/ 数据/ 后/ ,/ 以/ 网格/ GHIJ/ 的/ 中心/ 为/ 目的/ 位置/ (/ 其中/ fd/ (/ G/ ,/ J/ )/ 的/ 大小/ 为/ 节点/ 的/ 通信/ 半径/ )/ ,/ 利用/ 位置/ 路由/ 协议/ 将/ 部分/ 查询/ 结果/ 和/ 查询/ 消息/ 发送至/ 网格/ GHIJ/ 中/ 的/ 节点/ 以/ 绕开/ “/ 空洞/ 区域/ ”/ ./ 在/ 图/ 6/ 中/ ,/ 图/ 5/ 利用/ ESA/ 算法/ 计算/ 区域/ 图/ 6/ 绕过/ 不/ 存在/ 节点/ 的/ ABCD/ 的/ 最大/ 温度/ 示意/ 区域/ 示意/ Page6/ 以/ 网格/ GHIJ/ 的/ 中心/ 为/ 目的/ 位置/ ,/ 部分/ 查询/ 结果/ 和/ 查询/ 消息/ 通过/ 位置/ 路由/ 协议/ 发送至/ 网格/ GHIJ/ 中/ 的/ 节点/ f/ 后/ ,/ 从/ 节点/ f/ 开始/ 继续/ 查询处理/ 过程/ ./ 3.3/ 算法/ 设计/ 下面/ 首先/ 对/ ESA/ 算法/ 的/ 能耗/ 公式/ 进行/ 推导/ ,/ 然后/ 根据/ 该/ 公式/ 给出/ 降低/ ESA/ 能耗/ 的/ 方法/ ,/ 最后/ 基于/ 该/ 方法/ 优化/ ESA/ 算法/ 的/ 参数设置/ ./ 假设/ ESA/ 算法/ 将/ 查询/ 区域/ 划分/ 为/ Ng/ 个/ 网格/ gi/ (/ 1/ / i/ / Ng/ )/ ,/ 在/ 网格/ gi/ 中/ 的/ 节点/ 集合/ 记为/ nsi/ (/ 1/ / i/ / Ng/ )/ ,/ 对应/ 的/ 簇头/ 节点/ 记为/ ci/ (/ 1/ / i/ / Ng/ )/ ./ ESA/ 约束条件/ 可以/ 形式化/ 为/ fd/ (/ n/ ,/ ci/ )/ / R/ ,/ / n/ ∈/ nsi/ -/ ci/ ,/ 1/ / i/ / Ngfd/ (/ ci/ -/ 1/ ,/ n/ )/ / R/ ,/ / n/ ∈/ nsi/ ,/ 2/ / i/ / Ng/ (/ 1/ )/ 由/ ESA/ 算法/ 的/ 执行/ 过程/ 可知/ ,/ 查询/ 区域/ 起始/ 节点/ 需要/ 发送/ 一次/ 查询/ 消息/ 给/ c1/ ./ 所有/ 簇头/ 节点/ (/ 除/ 最后/ 一个/ 簇头/ 节点/ 外/ )/ 需/ 将/ 部分/ 查询/ 结果/ 和/ 查询/ 消息/ 发送至/ 其下/ 一个/ 簇头/ 节点/ ./ 查询/ 区域/ 内除/ 簇头/ 节点/ 之外/ 的/ 节点均/ 需/ 将/ 感知/ 数据/ 发送至/ 簇头/ 节点/ ./ 因此/ ,/ ESA/ 算法/ 在/ 查询/ 区域/ 内/ 分发/ 查询/ 和/ 收集/ 感知/ 数据/ 消耗/ 的/ 能量/ 为/ Ec/ (/ ESA/ )/ =/ SqE/ +/ (/ Ng/ -/ 1/ )/ SqE/ +/ 化简/ 后/ ,/ 可以/ 得到/ 可以/ 看出/ ,/ 其/ 能量消耗/ 由/ 两/ 部分/ 组成/ :/ (/ 1/ )/ 发送数据/ 消息/ 带来/ 的/ 能耗/ ,/ 即/ 查询/ 区域/ 内/ 的/ 非/ 簇头/ 节点/ 将/ 感知/ 数据/ 发送至/ 其/ 所在/ 网格/ 的/ 簇头/ 节点/ ;/ 簇头/ 节点/ 将/ 部分/ 查询/ 结果/ 发送至/ 下/ 一个/ 簇头/ 节点/ ./ (/ 2/ )/ 发送/ 查询/ 消息/ 带来/ 的/ 能耗/ ./ 即/ 查询/ 区域/ 起始/ 节点/ 发送/ 一次/ 查询/ 消息/ 至/ 第一个/ 簇头/ 节点/ ,/ 查询/ 区域/ 内/ 每个/ 簇头/ 节点/ (/ 最后/ 一个/ 簇头/ 节点/ 除外/ )/ 发送/ 一次/ 查询/ 消息/ 至/ 其下/ 一个/ 簇头/ 节点/ ./ 为了/ 计算/ 精确/ 的/ 查询/ 结果/ ,/ 理论/ 上/ 查询/ 区域/ 内/ 的/ 所有/ 节点/ (/ 生成/ 最终/ 查询/ 结果/ 的/ 节点/ 除外/ )/ 均/ 需/ 至少/ 发送/ 一次/ 感知/ 数据/ 消息/ 或/ 部分/ 查询/ 结果/ 消息/ ./ 因而/ 根据/ 式/ (/ 3/ )/ 可知/ ,/ ESA/ 算法/ 发送数据/ 消息/ 的/ 能耗/ 无法/ 降低/ ./ 因此/ ,/ 为了/ 减少/ ESA/ 算法/ 的/ 能量消耗/ ,/ 应/ 在/ 满足/ ESA/ 约束条件/ 的/ 前提/ 下/ 尽量/ 降低/ 发送/ 查询/ 消息/ 带来/ 的/ 能耗/ ,/ 即/ 减少/ 簇头/ 节点/ 的/ 数目/ ./ 显然/ ,/ 簇头/ 节点/ 的/ 数目/ 与/ 网格/ 的/ 大小/ 、/ 网格/ 簇头/ 节点/ 选择/ 策略/ 有关/ ./ 为了/ 求出/ Ng/ 的/ 最优/ 解/ ,/ 需要/ 收集/ 查询/ 区域/ 内/ 节点/ 的/ 拓扑/ 信息/ ,/ 这会/ 带来/ 大量/ 的/ 能量消耗/ ./ 另外/ ,/ 即使/ 能/ 获得/ 这些/ 信息/ ,/ 受/ 节点/ 移动/ 、/ 周围环境/ 等/ 因素/ 的/ 影响/ ,/ 网络拓扑/ 结构/ 频繁/ 发生变化/ ,/ 求出/ 的/ Ng/ 最优/ 解/ 变得/ 毫无意义/ ./ 基于/ 上述/ 分析/ ,/ 本文/ 采用/ 如下/ 方法/ :/ 在/ 查询处理/ 过程/ 中/ ,/ 网格/ 簇头/ 节点/ 根据/ 其/ 所有/ 邻居/ 节点/ 当前/ 的/ 位置/ ,/ 动态/ 地/ 选择/ 下/ 一个/ 网格/ 的/ 簇头/ 节点/ 和/ 计算/ 下/ 一个/ 网格/ 的/ 大小/ ./ 考虑/ 到/ Ng/ =/ A/ // Ag/ ,/ 其中/ Ag/ 表示/ 网格/ 的/ 平均/ 面积/ ,/ 由式/ (/ 3/ )/ 可知/ ,/ Ag/ 越大/ ,/ 则/ Ec/ (/ ESA/ )/ 越小/ ./ 因此/ ,/ 在/ 满足/ ESA/ 约束条件/ 的/ 前提/ 下/ ,/ 使得/ 每个/ 网格/ gi/ (/ 1/ / i/ / Ng/ )/ 的/ 面积/ 尽可能/ 大/ ,/ 可以/ 增大/ Ag/ ,/ 从而/ 降低/ 算法/ 的/ 能量消耗/ ./ 算法/ 1/ ./ GBA/ ./ 输入/ :/ 簇头/ 节点/ c/ ,/ Nc/ 输出/ :/ c/ 的/ 下/ 一个/ 网格/ 的/ 高度/ h/ ,/ 1/ ./ cgn/ =/ NULL/ ;/ 2/ ./ IFNc/ ./ size/ =/ =/ 03/ ./ h/ =/ 0/ ;/ RETURN/ ;/ 4/ ./ ENDIF5/ ./ // // 对/ Nc/ 中/ 的/ 所有/ 节点/ 按/ 其/ 到/ 线段/ CD/ 的/ 距离/ 从小/ 6/ ./ SNc/ =/ sort/ (/ Nc/ )/ ;/ 7/ ./ cgn/ =/ SNc/ [/ 1/ ]/ ;/ 8/ ./ i/ =/ SNc/ ./ size/ ;/ 9/ ./ WHILEi/ >/ 110/ ./ // // 检查/ SNc/ [/ i/ ]/ 是否/ 能/ 与/ 节点/ 集合/ 11/ ./ // // {/ SNc/ [/ 1/ ]/ ,/ …/ ,/ SNc/ [/ i/ -/ 1/ ]/ }/ 中/ 任何/ 一个/ 节点/ 通信/ 12/ ./ IFfc/ (/ SNc/ [/ i/ ]/ ,/ {/ SNc/ [/ 1/ ]/ ,/ …/ ,/ SNc/ [/ i/ -/ 1/ ]/ }/ )/ is13/ ./ cgn/ =/ SNc/ [/ i/ ]/ ;/ BREAK/ ;/ 14/ ./ ELSE15/ ./ i/ =/ i/ -/ 1/ ;/ CONTINUE/ ;/ 16/ ./ ENDIF17/ ./ ENDWHILE18/ ./ h/ =/ dist/ (/ cgn/ ,/ CD/ )/ ./ 下面/ 给出/ 两种/ 计算/ 网格/ 大小/ 和/ 网格/ 簇头/ 节点/ 的/ 算法/ :/ 基于/ 簇头/ 节点/ 前进/ 距离/ 的/ 算法/ GBA/ (/ GridBasedAlgorithm/ )/ 和/ 基于/ 网格/ 面积/ 的/ 算法/ GAA/ (/ GridAreabasedAlgorithm/ )/ ./ 不失/ 一般性/ ,/ 以图/ 7/ 中/ 的/ 网络/ 为例/ ,/ 以/ c/ 为/ 圆心/ R/ 为/ 半径/ 的/ 圆/ 与/ 查询/ 区域/ 交于/ 点/ P/ 和/ 点/ S/ ./ 显然/ ,/ 区域/ CDPS/ 中/ 的/ 节点均/ 在/ 网格/ ABCD/ 的/ 簇头/ 节点/ c/ 的/ 通信/ 半径/ 内/ ./ 区域/ CDPQ/ 中/ 的/ 节点/ d/ 、/ e/ 、/ f/ 均/ 在/ 彼此/ 的/ 通信/ 半径/ 内/ ,/ 节点/ d/ 、/ f/ 、/ g/ 均/ 能/ 互相/ 通信/ ./ 簇头/ 节点/ c/ 在/ 区域/ CDPQ/ 中/ 的/ 邻居/ 节点/ 集合/ 记为/ Nc/ ./ 假设/ 函数/ ns/ (/ x/ )/ 返回/ 在/ 区域/ x/ 中/ 节点/ 集合/ ./ 函数/ dist/ (/ n/ ,/ l/ )/ 返回/ 节点/ n/ 到/ 线段/ l/ 的/ 距离/ ./ 对于/ 节点/ n/ 和/ 节点/ 集合/ s/ ,/ 若/ 节点/ n/ 能/ Page7/ 与/ 节点/ 集合/ s/ 中/ 的/ 所有/ 节点/ 通信/ ,/ 则/ 函数/ fc/ (/ n/ ,/ s/ )/ 返回/ 真/ ,/ 否则/ 返回/ 假/ ./ 簇头/ 节点/ c/ 收集/ 完/ 网格/ ABCD/ 中/ 节点/ 的/ 数据/ 后/ ,/ 继续/ 收集/ 区域/ CDEF/ 中/ 节点/ 的/ 数据/ ./ 簇头/ 节点/ c/ 的/ 下/ 一个/ 网格/ 记为/ gn/ ,/ gn/ 的/ 簇头/ 节点/ 记为/ cgn/ ./ c/ 根据/ 其/ 邻居/ 节点/ 信息/ 计算/ cgn/ 和/ gn/ 的/ 高度/ h/ 的/ 方法/ 如下/ :/ (/ 1/ )/ 网格/ 大小/ 和/ 网格/ 簇头/ 节点/ 计算方法/ ①/ 基于/ 簇头/ 节点/ 前进/ 距离/ 的/ 算法/ GBAGBA/ 的/ 核心思想/ 是/ :/ 对/ Nc/ 中/ 的/ 所有/ 节点/ 按/ 其/ 到/ 线段/ CD/ 的/ 距离/ 从小到大/ 排序/ ,/ 排序/ 后/ 的/ 节点/ 列表/ 记为/ SNc/ ./ 在/ SNc/ 中/ 查找/ 节点/ SNc/ [/ i/ ]/ (/ 其中/ 1/ / i/ / |/ SNc/ |/ )/ ,/ 满足条件/ :/ 节点/ 集合/ {/ SNc/ [/ 1/ ]/ ,/ …/ ,/ SNc/ [/ i/ -/ 1/ ]/ }/ 中/ 的/ 任意/ 一个/ 节点/ 能/ 与/ SNc/ [/ i/ ]/ 通信/ ./ 簇头/ 节点/ c/ 的/ 下/ 一个/ 网格/ 的/ 簇头/ 节点/ 设置/ 为/ 满足/ 上述/ 条件/ 且/ i/ 值/ 最大/ 的/ 节点/ x/ ./ 簇头/ 节点/ c/ 的/ 下/ 一个/ 网格/ 的/ 高度/ 设置/ 为/ x/ 到/ 线段/ CD/ 的/ 距离/ ./ GBA/ 算法/ 的/ 伪/ 代码/ 详见/ 算法/ 1/ ./ 值得注意/ 的/ 是/ 算法/ 1/ 的/ 第/ 2/ 行/ ,/ 若/ Nc/ 为空/ ,/ 则/ 下/ 一个/ 网格/ 的/ 高度/ 设置/ 为/ 0/ ./ 此时/ ,/ 区域/ CDPQ/ 成为/ 空洞/ 区域/ ,/ ESA/ 算法/ 利用/ 位置/ 路由/ 协议/ 绕过/ 该/ 空洞/ 区域/ ./ 如图/ 7/ 所示/ ,/ 显然/ ,/ 只有/ 网格/ CDGH/ 、/ CDIJ/ 、/ CDKL/ 和/ CDMN/ 有/ 可能/ 成为/ 簇头/ 节点/ c/ 的/ 下/ 一个/ 网格/ ./ 在/ 这些/ 网格/ 中/ ,/ 由于/ 节点/ g/ 不/ 在/ 节点/ e/ 的/ 通信/ 半径/ 内/ ,/ GBA/ 算法/ 选择/ 网格/ CDKL/ 作为/ 节点/ c/ 的/ 下/ 一个/ 网格/ ,/ 节点/ f/ 作为/ 下/ 一个/ 网格/ 的/ 簇头/ 节点/ ./ ②/ 基于/ 网格/ 面积/ 的/ 算法/ GAAGAA/ 的/ 核心思想/ 是/ :/ 对/ Nc/ 中/ 的/ 所有/ 节点/ s/ ,/ 计算/ s/ 作为/ 簇头/ 节点/ 时/ ,/ 其/ 对应/ 的/ 满足/ ESA/ 约束条件/ 且/ 面积/ 最大/ 的/ 网格/ gs/ ;/ 然后/ 在/ Nc/ 中/ 选择/ 使得/ 下/ 一个/ 网格/ 面积/ 最大/ 的/ 节点/ x/ 作为/ 下/ 一个/ 网格/ 的/ 簇头/ 节点/ ,/ 簇头/ 节点/ c/ 的/ 下/ 一个/ 网格/ 设置/ 为/ x/ 对应/ 的/ 满足/ ESA/ 约束条件/ 且/ 面积/ 最大/ 的/ 网格/ gx/ ./ 若/ Nc/ 中/ 存在/ 多个/ 节点/ 使得/ gn/ 面积/ 最大/ ,/ 则/ 在/ 这些/ 节点/ 中/ 选择/ 距离/ 线段/ CD/ 最远/ 的/ 节点/ 作为/ gn/ 的/ 簇头/ 节点/ ./ GAA/ 算法/ 的/ 伪/ 代码/ 与/ GBA/ 类似/ ,/ 因而/ 在/ 此/ 不再/ 赘述/ ./ 如图/ 7/ 所示/ ,/ Nc/ =/ {/ d/ ,/ e/ ,/ f/ ,/ g/ }/ ./ 若/ 选择/ 节点/ e/ 作为/ 节点/ c/ 下/ 一个/ 网格/ 的/ 簇头/ 节点/ ,/ 则/ 其/ 对应/ 的/ 满足/ ESA/ 约束条件/ 且/ 面积/ 最大/ 的/ 网格/ 是/ CDKL/ ,/ 而/ 节点/ d/ 、/ f/ 对应/ 的/ 网格/ 为/ CDMN/ ,/ 节点/ g/ 对应/ 的/ 网格/ 为/ CDGH/ ./ 由于/ 节点/ 集合/ {/ d/ ,/ e/ ,/ f/ ,/ g/ }/ 中/ 使得/ gn/ 面积/ 最大/ 的/ 节点/ 为/ d/ 、/ f/ 且/ dist/ (/ d/ ,/ CD/ )/ >/ dist/ (/ f/ ,/ CD/ )/ ./ 算法/ GAA/ 选择/ 网格/ CDMN/ 作为/ 簇头/ 节点/ c/ 的/ 下/ 一个/ 网格/ ,/ 节点/ f/ 作为/ 下/ 一个/ 网格/ 的/ 簇头/ 节点/ ./ (/ 2/ )/ 网格/ 簇头/ 节点/ 失效/ 时/ 如何/ 恢复/ 执行/ 如图/ 8/ 所示/ ,/ 节点/ c/ 收集/ 完/ 网格/ ABCD/ 中/ 节点/ 的/ 数据/ 后/ ,/ 将/ 部分/ 查询/ 结果/ 和/ 查询/ 消息/ 发送至/ 下/ 一个/ 网格/ CDMN/ 的/ 簇头/ 节点/ f/ ./ 节点/ f/ 收集/ 网格/ CDMN/ 中/ 节点/ 的/ 感知/ 数据/ 后/ ,/ 生成/ 新/ 的/ 部分/ 查询/ 结果/ 并/ 将/ 其/ 发送至/ 节点/ i/ ,/ 继续/ 查询处理/ 过程/ ./ 在/ 上述/ 查询处理/ 过程/ 中/ ,/ 当/ 网格/ CDMN/ 中/ 的/ 非/ 簇头/ 节点/ (/ 如/ 节点/ d/ )/ 失效/ 时/ ,/ 则/ 仅/ 丢失/ 了/ 该/ 节点/ 的/ 感知/ 数据/ ,/ 但/ 不/ 影响/ 查询处理/ 过程/ 的/ 继续执行/ ;/ 而/ 当/ 簇头/ 节点/ f/ 失效/ 时/ ,/ 则/ 查询处理/ 过程/ 中断/ 且/ 部分/ 查询/ 结果/ 全部/ 丢失/ ./ 本文/ 利用/ 节点/ 冗余/ 以/ 避免/ 该/ 问题/ ,/ 具体/ 如下/ :/ 在/ 网格/ CDMN/ 内/ 可以/ 找到/ 一个/ 网格/ rg/ ,/ 网格/ rg/ 中/ 的/ 任意/ 两个/ 非/ 簇头/ 节点/ 能够/ 互相/ 通信/ ,/ 称该/ 网格/ 为/ 候选/ 恢复/ 网格/ ./ 例如/ 图/ 8/ 中/ 节点/ d/ 、/ e/ 、/ g/ 均/ 能/ 相互/ 通信/ ,/ 因而/ 网格/ CDGH/ 、/ CDIJ/ 、/ CDKL/ 均/ 是/ 候选/ 恢复/ 网格/ ./ 本文/ 定义/ 所有/ 候选/ 网格/ 中/ 面积/ 最大/ 的/ 网格/ 为/ 恢复/ 网格/ ./ 如图/ 8/ 中/ 的/ 网格/ CDKL/ ./ 网格/ CDMN/ 中/ 的/ 所有/ 节点均/ 将/ 感知/ 数据/ 发送到/ 簇头/ 节点/ 后/ ,/ 由于/ 恢复/ 网格/ 中/ 的/ 任意/ 两个/ 非/ 簇头/ 节点/ 可以/ 相互/ 通信/ ,/ 因此/ ,/ 恢复/ 网格/ 中/ 的/ 任意/ 一个/ 节点均/ 能/ 分别/ 计算/ 出/ 到/ 所在/ 恢复/ 网格/ 为止/ 、/ 除/ 簇头/ 节点/ 之外/ 的/ 部分/ 查询/ 结果/ ./ 例如/ ,/ 图/ 8/ 中/ 的/ 节点/ d/ 、/ e/ 、/ g/ 均/ 能/ 分别/ 计算/ 出/ 到/ 网格/ CDKL/ 为止/ 的/ 部分/ 查询/ 结果/ max/ {/ a/ ,/ b/ ,/ c/ ,/ d/ ,/ e/ ,/ g/ }/ ,/ 即/ 网格/ ABKL/ 的/ 查询/ 结果/ ./ 当/ 簇头/ 节点/ 失效/ 时/ ,/ 恢复/ 网格/ 中/ 的/ 节点/ 能够/ 代替/ 簇头/ 节点/ 继续/ 查询处理/ 过程/ ./ 例如/ ,/ 当图/ 8/ 中/ 的/ 簇头/ 节点/ f/ 失效/ 时/ ,/ 节点/ e/ 能够/ 代替/ 它/ 继续/ 收集/ 区域/ KLEF/ 中/ 节点/ 的/ 数据/ ./ 图/ 7/ 网格/ 大小/ 和/ 网格/ 图/ 8/ 簇头/ 节点/ 失效/ 时/ Page8/ (/ 3/ )/ 感知/ 数据/ 收集/ 算法/ 簇头/ 节点/ cg/ 收集/ 所在/ 网格/ g/ 中/ 其它/ 节点/ 的/ 感知/ 数据/ 结束/ 后/ ,/ 将/ 查询/ 消息/ 和/ 聚集/ 后/ 的/ 部分/ 查询/ 结果/ 发送至/ 下/ 一个/ 网格/ gn/ 的/ 簇头/ 节点/ cgn/ ./ 网格/ gn/ 中/ 的/ 其它/ 节点均/ 能/ 收到/ 该/ 消息/ ./ 若/ 这些/ 节点/ 收到/ 消息/ 后/ 同时/ 发送/ 感知/ 数据/ 至/ 簇头/ 节点/ cgn/ ,/ 会/ 产生/ 消息/ 碰撞/ ,/ 造成/ 大量/ 的/ 消息/ 重传/ ./ 因此/ ,/ 需要/ 对/ 其/ 进行/ 调度/ ,/ 减少/ 消息/ 碰撞/ 的/ 概率/ ,/ 从而/ 减少/ 能量/ 的/ 消耗/ ./ 不失/ 一般性/ ,/ 以图/ 9/ 为例/ ,/ 簇头/ 节点/ c/ 收集/ 完/ 网格/ ABCD/ 中/ 节点/ 的/ 数据/ 后/ ,/ 将/ 部分/ 查询/ 结果/ 和/ 查询/ 消息/ 发送至/ 下/ 一个/ 网格/ CDMN/ 的/ 簇头/ 节点/ f/ ,/ 网格/ CDMN/ 中/ 的/ 节点/ {/ d/ ,/ e/ ,/ f/ ,/ g/ ,/ h/ ,/ i/ }/ 均/ 能/ 收到/ 该/ 消息/ ./ 这些/ 节点/ 收到/ 查询/ 消息/ 后/ ,/ 需要/ 将/ 本地/ 的/ 感知/ 数据/ 发送至/ 簇头/ 节点/ f/ ./ 分/ 两种/ 情况/ 讨论/ ./ 情况/ 1/ ./ 簇头/ 节点/ f/ 收集/ 网格/ CDMN/ 中/ 的/ 感知/ 数据/ 时/ ,/ 网格/ gn/ 中/ 的/ 节点/ 拓扑/ 稳定/ ./ 本文/ 首先/ 提出/ 一种/ 基于/ 距离/ 的/ 算法/ DC/ (/ Distance/ -/ basedDataCollectionAlgorithm/ )/ ,/ 然后/ 针对/ 该/ 算法/ 的/ 不足/ ,/ 提出/ 一种/ 改进/ 算法/ IDC/ (/ ImprovedDistance/ -/ basedDataCollectionAlgorithm/ )/ ./ ①/ 基于/ 距离/ 的/ 感知/ 数据/ 收集/ 算法/ DC/ ,/ 即/ 网格/ CDMN/ 中/ 的/ 节点/ 按/ 其/ 到/ 线段/ CD/ 的/ 距离/ 从小到大/ 排序/ ,/ 依次/ 发送/ 感知/ 数据/ 消息/ ,/ 具体/ 过程/ 如下/ :/ 3/ ./ 若/ i/ 为/ 1/ ,/ 则/ 节点/ s/ 立即/ 将/ 其/ 感知/ 数据/ 发送至/ 簇头/ 节点/ f/ ;/ 若/ i/ >/ 1/ ,/ 则/ 节点/ s/ 等待/ 节点/ sns/ [/ i/ -/ 1/ ]/ 发送/ 感知/ 数据/ 消息/ 结束/ 后/ ,/ 发送/ 感知/ 数据/ 消息/ 至/ 簇头/ 节点/ f/ ./ 在/ DC/ 算法/ 中/ ,/ / i/ :/ 1/ / i/ </ |/ sns/ |/ ,/ 节点/ sns/ [/ i/ +/ 1/ ]/ 监听/ 节点/ sns/ [/ i/ ]/ 发送/ 完/ 感知/ 数据/ 消息/ 后/ ,/ 立即/ 发送/ 其/ 感知/ 数据/ ,/ 这样/ 保证/ 消息/ 不/ 发生/ 碰撞/ 的/ 同时/ 减少/ 了/ 感知/ 数据/ 收集/ 过程/ 消耗/ 的/ 时间/ ./ 但/ 该/ 算法/ 要求/ 满足条件/ :/ 节点/ sns/ [/ i/ +/ 1/ ]/ 在/ 节点/ sns/ [/ i/ ]/ 的/ 通信/ 半径/ 内/ ./ 上述/ 条件/ 并/ 不恒/ 成立/ ./ 如图/ 9/ 所示/ ,/ 若/ 采用/ DC/ 算法/ 收集/ 网格/ CDMN/ 中/ 的/ 感知/ 数据/ 至/ 簇头/ 节点/ f/ ,/ 正确/ 的/ 感知/ 数据/ 发送/ 顺序/ 是/ d/ 、/ e/ 、/ g/ 、/ h/ 、/ i/ ./ 但/ 由于/ 节点/ e/ 和/ g/ 、/ 节点/ g/ 和/ h/ 、/ 节点/ h/ 和/ i/ 不能/ 互相/ 通信/ ,/ 带来/ 以下/ 问题/ :/ 节点/ i/ 根据/ 其/ 邻居/ 列表/ 信息/ 可知/ :/ 它/ 应/ 在/ 节点/ g/ 之后/ 发送/ 感知/ 数据/ 消息/ ,/ 但/ 实际上/ 应该/ 在/ 1/ ./ 对/ 所有/ 在/ 网格/ CDMN/ 中/ 的/ 节点/ s/ ,/ 它/ 收到/ 簇头/ 节点/ c/ 发送/ 的/ 查询/ 消息/ 后/ ,/ 分别/ 根据/ 自己/ 的/ 邻居/ 节点/ 列表/ 计算/ 出/ 在/ 网格/ CDMN/ 中/ 的/ 邻居/ 节点/ 集合/ ns/ (/ CDMN/ )/ ;/ 2/ ./ 节点/ s/ 对/ 集合/ ns/ (/ CDMN/ )/ -/ f/ 中/ 的/ 节点/ 按/ 其/ 到/ 线段/ CD/ 的/ 距离/ 从小到大/ 排序/ ,/ 排序/ 后/ 的/ 列表/ 记为/ sns/ ,/ 假设/ 节点/ s/ 在/ 列表/ sns/ 中/ 的/ 位置/ 序号/ 为/ i/ ,/ 其中/ 1/ / i/ |/ / |/ sns/ |/ ,/ 其中/ |/ sns/ |/ 为/ 列表/ 长度/ ;/ 节点/ h/ 之后/ ;/ 在/ 感知/ 数据/ 收集/ 过程/ 的/ 起始/ 阶段/ ,/ 节点/ d/ 、/ g/ 、/ h/ 根据/ 其/ 各自/ 的/ 邻居/ 列表/ 信息/ 可知/ :/ 没有/ 节点/ 先于/ 它们/ 发送/ 感知/ 数据/ 消息/ ,/ 因而/ 同时/ 发送/ 感知/ 数据/ 消息/ 至/ 节点/ f/ ,/ 导致/ 消息/ 碰撞/ ./ 实际上/ 此时/ 应当/ 只有/ 节点/ d/ 发送/ 感知/ 数据/ 消息/ ./ ②/ 改进/ 的/ 基于/ 距离/ 的/ 感知/ 数据/ 收集/ 算法/ IDC/ 考虑/ 到/ 簇头/ 节点/ 能/ 与/ 所在/ 网格/ 中/ 的/ 任意/ 一个/ 节点/ 通信/ ,/ 簇头/ 节点/ 根据/ 其/ 邻居/ 节点/ 信息/ 能/ 计算/ 出/ 无/ 消息/ 碰撞/ 的/ 感知/ 数据/ 发送/ 顺序/ ./ 下面/ 利用/ 该/ 特性/ 提出/ 一种/ 基于/ DC/ 算法/ 的/ 改进/ 算法/ IDC/ ./ IDC/ 算法/ 用到/ 的/ 符号/ 和/ 定义/ 如下/ :/ 网格/ CDMN/ 中/ 的/ 节点/ 集合/ 记为/ ns/ (/ CDMN/ )/ ./ 节点/ 集合/ x/ 中/ 的/ 节点/ 按/ 其/ 到/ 线段/ CD/ 的/ 距离/ 从小到大/ 排序/ 后/ 的/ 有/ 序列表/ 记为/ sns/ (/ x/ )/ ./ / s/ :/ s/ ∈/ ns/ (/ CDMN/ )/ ,/ ng/ (/ s/ )/ 表示/ 节点/ s/ 在/ 网格/ CDMN/ 中/ 、/ 除/ 簇头/ 节点/ f/ 之外/ 的/ 邻居/ 节点/ ./ 有序/ 节点/ 列表/ x/ 中/ 在/ 节点/ s/ 之前/ 和/ 之后/ 的/ 节点/ 分别/ 记为/ prev/ (/ s/ ,/ x/ )/ 和/ next/ (/ s/ ,/ x/ )/ ./ 将/ 在/ 节点/ s/ 之前/ 和/ 之后/ 发送/ 感知/ 数据/ 消息/ 的/ 节点/ 分别/ 定义/ 为/ s/ 的/ 前驱/ 节点/ 和/ 后继/ 节点/ ./ 如图/ 10/ (/ a/ )/ ~/ (/ c/ )/ 所示/ ,/ 节点/ s/ 位于/ 线段/ IJ/ 上/ ./ 定义/ 网格/ GHIJ/ 和/ IJKL/ 分别/ 为/ 节点/ s/ 的/ 上/ 网格/ 和/ 下/ 网格/ ,/ 其中/ ,/ fd/ (/ I/ ,/ H/ )/ =/ fd/ (/ I/ ,/ L/ )/ =/ R/ ./ 显然/ ,/ 可以/ 得出/ 以下/ 结论/ ./ 结论/ 1/ ./ 若/ 节点/ 集合/ ng/ (/ s/ )/ 中/ 存在/ 节点/ 在/ s/ 的/ 上/ 网格/ 中/ (/ 如图/ 10/ (/ a/ )/ 所示/ )/ ,/ 则/ 等式/ prev/ (/ s/ ,/ sns/ (/ ng/ (/ s/ )/ )/ )/ =/ prev/ (/ s/ ,/ sns/ (/ ns/ (/ CDMN/ )/ )/ )/ 成立/ ;/ 若/ 不/ 存在/ ,/ 则/ 等式/ prev/ (/ s/ ,/ sns/ (/ ng/ (/ s/ )/ )/ )/ =/ prev/ (/ s/ ,/ sns/ (/ ns/ (/ CDMN/ )/ )/ )/ 不/ 一定/ 成立/ ./ 结论/ 2/ ./ 若/ 簇头/ 节点/ c/ 在/ 节点/ s/ 的/ 上/ 网格/ 中且/ prev/ (/ s/ ,/ sns/ (/ ng/ (/ s/ )/ )/ )/ =/ NULL/ (/ 如图/ 10/ (/ b/ )/ 所示/ )/ ,/ 则/ prev/ (/ s/ ,/ sns/ (/ ng/ (/ s/ )/ )/ )/ =/ prev/ (/ s/ ,/ sns/ (/ ns/ (/ CDMN/ )/ )/ )/ =/ Page9NULL/ ,/ 即/ 节点/ s/ 是/ 网格/ CDMN/ 中/ 发送/ 感知/ 数据/ 消息/ 的/ 起始/ 节点/ ./ 结论/ 3/ ./ 若/ ng/ (/ s/ )/ 中/ 存在/ 节点/ 在/ 节点/ s/ 的/ 下/ 网格/ 中/ (/ 如图/ 10/ (/ c/ )/ 所示/ )/ ,/ 则/ 等式/ next/ (/ s/ ,/ sns/ (/ ng/ (/ s/ )/ )/ =/ 图/ 10/ 节点/ 的/ 前驱/ 和/ 后继/ 节点/ 示意图/ 基于/ 上述/ 分析/ ,/ IDC/ 算法/ 流程/ 如下/ :/ 对于/ 网格/ CDMN/ 的/ 簇头/ 节点/ f/ ,/ 它/ 收到/ 节点/ c/ 发送/ 的/ 查询/ 消息/ 后/ ,/ 根据/ 其/ 维护/ 的/ 邻居/ 节点/ 集合/ 计算/ 出/ 网格/ CDMN/ 中/ 发送/ 感知/ 数据/ 消息/ 的/ 起始/ 节点/ ,/ 并/ 判断/ 簇头/ 节点/ c/ 是否/ 在/ 该/ 起始/ 节点/ 的/ 上/ 网格/ 中/ ;/ 若否/ ,/ 则/ 发送/ start/ 消息/ 给/ 该/ 起始/ 节点/ (/ start/ 消息/ 用于/ 通知/ 节点/ 开始/ 发送/ 感知/ 数据/ 消息/ 至/ 节点/ f/ )/ ./ 该/ 起始/ 节点/ 收到/ start/ 消息/ 后/ ,/ 发送/ 感知/ 数据/ 消息/ 至/ 簇头/ 节点/ f/ ./ 对于/ 网格/ CDMN/ 的/ 任意/ 一个/ 非/ 簇头/ 节点/ s/ ,/ 它/ 收到/ 节点/ c/ 发送/ 的/ 查询/ 消息/ 后/ ,/ 进行/ 以下/ 步骤/ :/ 中/ 的/ 邻居/ 节点/ 集合/ ng/ (/ s/ )/ ,/ 转到/ 步/ 2/ ;/ 1/ ./ 根据/ 其/ 维护/ 的/ 邻居/ 节点/ 列表/ 计算/ 出/ 在/ 网格/ CDMN2/ ./ 节点/ s/ 根据/ 结论/ 2/ 判断/ 是否是/ 网格/ CDMN/ 中/ 发送/ 感知/ 数据/ 消息/ 的/ 起始/ 节点/ ,/ 若/ 是/ ,/ 则/ 立即/ 将/ 其/ 感知/ 数据/ 发送至/ 簇头/ 节点/ f/ ;/ 若否/ ,/ 转到/ 步/ 3/ ;/ 3/ ./ 节点/ s/ 根据/ 结论/ 1/ 判断/ prev/ (/ s/ ,/ sns/ (/ ng/ (/ s/ )/ )/ )/ 是否/ 等于/ prev/ (/ s/ ,/ sns/ (/ ns/ (/ CDMN/ )/ )/ )/ :/ (/ a/ )/ 若/ 是/ ,/ 则/ 节点/ s/ 在/ 节点/ prev/ (/ s/ ,/ sns/ (/ ng/ (/ s/ )/ )/ )/ 完成/ 发送/ 感知/ 数据/ 消息/ 后/ ,/ 立即/ 发送/ 感知/ 数据/ 消息/ 至/ 簇头/ 节点/ f/ ;/ (/ b/ )/ 若否/ ,/ 则/ 等待/ 簇头/ 节点/ f/ 发送/ 的/ start/ 消息/ ./ 收到/ 簇头/ 节点/ f/ 发送/ 的/ start/ 消息/ 后/ ,/ 发送/ 其/ 本地/ 的/ 感知/ 数据/ 至/ 簇头/ 节点/ f/ ,/ 然后/ 转到/ 步/ 4/ ;/ 4/ ./ 节点/ s/ 根据/ 结论/ 3/ 判断/ next/ (/ s/ ,/ sns/ (/ ng/ (/ s/ )/ )/ 是否/ 等于/ next/ (/ s/ ,/ sns/ (/ ns/ (/ CDMN/ )/ )/ )/ ,/ 若否/ ,/ 则/ 发送/ coordinate/ 消息/ 至/ 簇头/ 节点/ f/ ./ coordinate/ 消息/ 用于/ 通知/ 簇头/ 节点/ f/ 计算/ 节点/ s/ 的/ 后继/ 节点/ 并/ 将/ start/ 消息/ 发送至/ 该/ 后继/ 节点/ ./ f/ 收到/ 该/ 消息/ 后/ ,/ 根据/ 其/ 邻居/ 节点/ 列表/ 计算/ next/ (/ s/ ,/ sns/ (/ ns/ (/ CDMN/ )/ )/ )/ ,/ 并/ 将/ start/ 消息/ 发送至/ 该/ 节点/ ./ 值得注意/ 的/ 是/ ,/ 在/ IDC/ 算法/ 中/ ,/ 当/ 网格/ CDMNnext/ (/ s/ ,/ sns/ (/ ns/ (/ CDMN/ )/ )/ )/ 成立/ ;/ 若/ 不/ 存在/ ,/ 则/ 等式/ next/ (/ s/ ,/ sns/ (/ ng/ (/ s/ )/ )/ )/ =/ next/ (/ s/ ,/ sns/ (/ ns/ (/ CDMN/ )/ )/ )/ 不/ 一定/ 成立/ ./ 中/ 的/ 节点/ s/ 根据/ 其/ 邻居/ 节点/ 集合/ 计算/ 出/ 的/ next/ (/ s/ ,/ sns/ (/ ng/ (/ s/ )/ )/ 不/ 等于/ next/ (/ s/ ,/ sns/ (/ ns/ (/ CDMN/ )/ )/ )/ 时/ ,/ 它/ 发送/ coordinate/ 消息/ 至/ 簇头/ 节点/ f/ ./ 节点/ f/ 根据/ 其/ 邻居/ 节点/ 集合/ 计算/ s/ 的/ 后继/ 节点/ ,/ 并/ 发送/ start/ 消息/ 至该/ 节点/ ,/ 从/ 该/ 节点/ 开始/ 继续/ 数据/ 收集/ 过程/ ./ 以图/ 9/ 为例/ ,/ 节点/ d/ 根据/ 结论/ 2/ 可以/ 判断/ 出/ 它/ 是/ 起始/ 节点/ ./ 节点/ e/ 根据/ 结论/ 1/ 可知/ 它/ 的/ 前驱/ 节点/ 是/ d/ ,/ 且/ 根据/ 结论/ 3/ 可知/ ,/ 它/ 无法/ 根据/ 自己/ 的/ 邻居/ 节点/ 集合/ 计算/ 出/ 正确/ 的/ 后继/ 节点/ ./ 因此/ ,/ 节点/ d/ 将/ 感知/ 数据/ 发送至/ 簇头/ 节点/ f/ 后/ ,/ 节点/ e/ 发送/ coordinate/ 消息/ 和/ 感知/ 数据/ 至/ 节点/ f/ ./ f/ 收到/ 该/ 消息/ 后/ ,/ 根据/ 其/ 邻居/ 节点/ 集合/ ,/ 计算/ 出/ e/ 的/ 后继/ 节点/ 为/ g/ ,/ 然后/ 发送/ start/ 消息/ 至/ 节点/ g/ ./ 节点/ g/ 收到/ 节点/ f/ 发送/ 的/ start/ 消息/ 后/ ,/ 继续/ 后面/ 的/ 数据/ 收集/ 过程/ ./ 情况/ 2/ ./ 簇头/ 节点/ f/ 收集/ 网格/ CDMN/ 中/ 感知/ 数据/ 时/ 网格/ gn/ 中/ 的/ 节点/ 拓扑/ 频繁/ 变化/ ./ 本文/ 提出/ 一种/ 基于/ 角度/ 的/ 感知/ 数据/ 收集/ 算法/ AC/ (/ Angle/ -/ baseddataCollectionalgorithm/ )/ ,/ 即/ 类似/ 于/ 文献/ [/ 1/ ]/ 基于/ 竞争/ 的/ 算法/ ,/ 网格/ CDMN/ 中/ 的/ 节点/ 收到/ 簇头/ 节点/ c/ 发送/ 的/ 查询/ 消息/ 后/ ,/ 各自/ 计算/ 其到/ 簇头/ 节点/ f/ 的/ 角度/ a/ ,/ 并/ 按/ 公式/ max/ _/ delay/ ×/ (/ a/ // (/ 2/ π/ )/ )/ (/ 其中/ max/ _/ delay/ 表示/ 簇头/ 节点/ 完成/ 数据/ 收集/ 花费/ 时间/ 的/ 最大值/ )/ 计算/ 其/ 发送/ 感知/ 数据/ 的/ 时间/ ./ 该/ 算法/ 的/ 性能/ 取决于/ max/ _/ delay/ 的/ 估计值/ 是否/ 准确/ ./ 若/ max/ _/ delay/ 的/ 估计值/ 比/ 实际/ 值大/ ,/ 则/ 会/ 导致/ 感知/ 数据/ 收集/ 过程/ 消耗/ 的/ 时间/ 变/ 长/ ;/ 若/ 估计值/ 比/ 实际/ 值/ 小/ ,/ 则/ 容易/ 造成/ 消息/ 碰撞/ 问题/ ,/ 浪费/ 了/ 能量/ 的/ 同时/ 增加/ 了/ 感知/ 数据/ 收集/ 过程/ 消耗/ 的/ 时间/ ./ 为了/ 避免/ 这些/ 问题/ ,/ 本文/ 采用/ 如下/ Page10/ 方法/ :/ 由于/ 网格/ gn/ 中/ 的/ 节点均/ 在/ 簇头/ 节点/ c/ 的/ 通信/ 半径/ 内/ ,/ 因此/ 簇头/ 节点/ c/ 能/ 计算/ 出/ 网格/ gn/ 中/ 的/ 节点/ 数目/ Num/ (/ gn/ )/ ./ 可以/ 得到/ 其中/ ,/ T/ 表示/ 收集/ 一个/ 节点/ 的/ 感知/ 数据/ 需要/ 花费/ 的/ 时间/ ./ 簇头/ 节点/ c/ 计算/ 出/ max/ _/ delay/ 后/ ,/ 通过/ 将/ 其/ 附加/ 在/ 查询/ 消息/ 中/ ,/ 发送至/ 网格/ gn/ 中/ 的/ 节点/ ./ 3.4/ 理论/ 分析/ 文献/ [/ 1/ ]/ 没有/ 对/ IWQE/ 算法/ 的/ 能耗/ 进行/ 理论/ 分析/ ,/ 下面/ 先/ 给出/ IWQE/ 的/ 能耗/ 公式/ ,/ 然后/ 与/ 本文/ 提出/ 的/ 算法/ 进行/ 比较/ ./ 为了/ 便于/ 理论/ 分析/ ,/ 假设/ 查询处理/ 过程/ 中/ 节点/ 不/ 失效/ ./ 记/ IWQE/ 算法/ 的/ 查询/ 节点/ 数目/ 为/ Nq/ ,/ 其/ 路线/ 宽度/ 和/ ESA/ 算法/ 的/ 网格/ 宽度/ 均/ 设置/ 为/ w1/ (/ w1/ </ R/ )/ ./ 由/ IWQE/ 算法/ 的/ 执行/ 过程/ 可知/ :/ 每个/ 查询/ 节点/ 需要/ 广播/ 一次/ 查询/ 消息/ ,/ 查询/ 节点/ 的/ 邻居/ 节点/ 集合/ 中未/ 发送/ 感知/ 数据/ 消息/ 的/ 节点/ 发送/ 感知/ 数据/ 消息/ 至/ 查询/ 节点/ ,/ 每个/ 查询/ 节点/ (/ 最后/ 一个/ 查询/ 节点/ 除外/ )/ 将/ 部分/ 查询/ 结果/ 和/ 查询/ 消息/ 发送到/ 下/ 一个/ 查询/ 节点/ ,/ 或者/ 当下/ 一个/ 查询/ 节点/ 已经/ 收到/ 了/ 查询/ 节点/ 发送/ 的/ 查询/ 消息/ 时/ ,/ 则/ 查询/ 节点/ 只/ 需/ 将/ 部分/ 查询/ 结果/ 发送到/ 下/ 一个/ 查询/ 节点/ ./ 因此/ ,/ IWQE/ 算法/ 在/ 查询/ 区域/ 内/ 分发/ 查询/ 和/ 收集/ 感知/ 数据/ 消耗/ 的/ 能量/ 的/ 最大值/ 和/ 最小值/ 分别/ 为/ Emaxc/ (/ IWQE/ )/ =/ NqSqE/ +/ (/ M/ -/ 1/ )/ SaE/ +/ Eminc/ (/ IWQE/ )/ =/ NqSqE/ +/ (/ M/ -/ 1/ )/ SaE/ +/ 化简/ 后/ ,/ 可以/ 得到/ Emaxc/ (/ IWQE/ )/ =/ (/ 2Nq/ -/ 1/ )/ SqE/ +/ (/ M/ +/ Nq/ -/ 2/ )/ SaEEminc/ (/ IWQE/ )/ =/ (/ Nq/ -/ 1/ )/ SqE/ +/ (/ M/ +/ Nq/ -/ 2/ )/ SaE/ 因此/ ,/ 由式/ (/ 7/ )/ 和/ (/ 8/ )/ 可得/ Ec/ (/ IWQE/ )/ =/ (/ α/ Nq/ -/ 1/ )/ SqE/ +/ (/ M/ +/ Nq/ -/ 2/ )/ SaE/ 其中/ ,/ 1/ / α/ / 2/ ./ 由于/ 在/ 基站/ 、/ 查询/ 区域/ 固定/ 的/ 情况/ 下/ ,/ Ef/ (/ IWQE/ )/ =/ Ef/ (/ ESA/ )/ ,/ Eb/ (/ IWQE/ )/ =/ Eb/ (/ ESA/ )/ 且/ Ef/ 和/ Eb/ 为/ 一/ 常量/ ./ 根据/ 式/ (/ 3/ )/ 和/ (/ 9/ )/ ,/ 可以/ 得出/ 以下/ 结论/ :/ IWQE/ 算法/ 和/ ESA/ 算法/ 的/ 能量消耗/ 均/ 与/ 查询/ 消息/ 大小/ 、/ 感知/ 数据/ 消息/ 大小/ 成正比/ ;/ 当/ 感知/ 数据/ 消息/ 大小/ 增大/ 时/ ,/ IWQE/ 算法/ 消耗/ 能量/ 的/ 增幅/ 大于/ ESA/ 算法/ ./ 对于/ 用户/ 提交/ 的/ 快照/ 空间/ 范围/ 查询/ [/ 1/ ]/ (/ 例如/ 获得/ 查询/ 区域/ sw/ 当前/ 时刻/ 的/ 平均温度/ )/ ,/ IWQE/ 算法/ 与/ ESA/ 算法/ 消耗/ 的/ 能量/ 之差/ 为/ Etotal/ (/ IWQE/ )/ -/ Etotal/ (/ ESA/ )/ =/ Ec/ (/ IWQE/ )/ -/ Ec/ (/ ESA/ )/ =/ (/ α/ Nq/ -/ Ng/ -/ 1/ )/ SqE/ +/ (/ Nq/ -/ 1/ )/ SaE/ (/ 10/ )/ 其中/ ,/ 1/ / α/ / 2/ ./ 化简/ 式/ (/ 10/ )/ 后/ ,/ 可以/ 得到/ Etotal/ (/ IWQE/ )/ -/ Etotal/ (/ ESA/ )/ =/ IWQE/ 算法/ 的/ 查询/ 节点/ 数目/ Nq/ 为/ 其中/ ,/ AdvIWQE/ 表示/ IWQE/ 算法/ 中/ 相邻/ 查询/ 节点/ 在/ 查询/ 路线/ 方向/ 上/ 的/ 距离/ 的/ 平均值/ ./ ESA/ 算法/ 的/ 簇头/ 数目/ Ng/ 为/ 其中/ ,/ AdvESA/ 表示/ ESA/ 算法/ 中/ 网格/ 的/ 平均/ 高度/ ./ 对于/ 一些/ 查询/ 任务/ 固定/ 的/ 传感器/ 网络应用/ ,/ 查询/ 信息/ 通常/ 直接/ 存储/ 于/ 每个/ 传感器/ 节点/ 中/ ,/ 因而/ 可以/ 认为/ Sq/ =/ 0/ ./ 在/ 这种/ 情况/ 下/ ,/ ESA/ 算法/ 优于/ IWQE/ 算法/ ,/ 节省/ 的/ 能量/ 大小/ 约等于/ (/ Nq/ -/ 1/ )/ SaE/ ./ 另外/ ,/ 当/ Sq/ ≠/ 0/ 且/ Sa/ / Sq/ 时/ ,/ 则/ (/ α/ Nq/ -/ Ng/ -/ 1/ )/ SqE/ 的/ 值/ 相比/ (/ Nq/ -/ 1/ )/ SaE/ 可以/ 忽略/ 不记/ ,/ ESA/ 算法/ 优于/ IWQE/ 算法/ ,/ 节省/ 的/ 能量/ 大小/ 约等于/ (/ Nq/ -/ 1/ )/ SaE/ ./ 当/ Sq/ ≠/ 0/ 且/ Sa/ / Sq/ 不/ 成立/ 时/ ,/ 由于/ Nq/ (/ Ng/ )/ 的/ 值/ 与/ 路线/ 宽度/ (/ 网格/ 宽度/ )/ 、/ 节点/ 密度/ 、/ 节点/ 通信/ 半径/ 、/ 网络拓扑/ 、/ 查询/ 区域/ 内/ 节点/ 分布/ 等/ 因素/ 有关/ ,/ 难以/ 求解/ ,/ 因而/ 在/ 第/ 4/ 节/ 通过/ 实验/ 对/ 其/ 进行/ 分析/ 和/ 比较/ ./ 对于/ 连续/ 空间/ 范围/ 查询/ (/ 例如/ 每隔/ 1/ 秒钟/ 获得/ 查询/ 区域/ sw/ 的/ 平均温度/ )/ ,/ 由于/ 发送/ 感知/ 数据/ 的/ 能量消耗/ 与/ 发送/ 查询/ 消息/ 消耗/ 的/ 能量/ 相比/ 可以/ 忽略/ 不记/ ./ IWQE/ 算法/ 与/ ESA/ 算法/ 消耗/ 的/ 能量/ 之差/ 为/ Etotal/ (/ IWQE/ )/ -/ Etotal/ (/ ESA/ )/ ≈/ K/ (/ Nq/ -/ 1/ )/ SaE/ 其中/ ,/ K/ 表示/ 连续/ 空间/ 范围/ 查询/ 对应/ 的/ 快照/ 空间/ 范围/ 查询/ 个数/ ./ 因此/ ,/ ESA/ 算法/ 优于/ IWQE/ 算法/ ,/ 节省/ 的/ 能量/ 大小/ 为/ K/ (/ Nq/ -/ 1/ )/ SaE/ ./ 4/ 仿真/ 评价/ 为了/ 对/ 算法/ 的/ 性能/ 进行/ 比较/ ,/ 我们/ 在/ 文献/ [/ 21/ ]/ 的/ 仿真器/ 上/ 实现/ 了/ IWQE/ 算法/ 和/ ESA/ 算法/ ./ 为了/ 描述/ 方便/ ,/ 记/ 采用/ GAA/ (/ GBA/ )/ 算法/ 的/ ESA/ 算法/ 为/ ESA/ -/ GAA/ (/ ESA/ -/ GBA/ )/ ./ 实验/ 的/ 硬件/ 环境/ 为/ P4/ (/ 2.66/ GHz/ )/ CPU/ ,/ 512MB/ 内存/ ;/ 软件/ 环境/ 为/ Ubuntu/ 操作系统/ 、/ Eclipse/ 开发工具/ ./ 实验/ 的/ 参数/ 选择/ 如下/ :/ Page11/ 根据/ 文献/ [/ 22/ ]/ ,/ 无线通信/ 模块/ 发送/ 和/ 接收/ 1/ 字节/ 数据/ 的/ 能量消耗/ 公式/ 为/ Et/ =/ α/ +/ γ/ ×/ le/ ,/ Er/ =/ β/ ./ 采用/ 文献/ [/ 23/ ]/ 的/ 参数/ :/ γ/ =/ 10pJ/ // (/ bit/ ·/ m2/ )/ ,/ α/ =/ 45nJ/ // bit/ ,/ β/ =/ 135nJ/ // bit/ ,/ e/ =/ 2/ ./ 其它/ 参数/ 如表/ 1/ 所示/ ./ 查询/ 区域/ 占/ 网络覆盖/ 区域/ 的/ 百分比/ 网格/ 宽度/ 占/ 通信/ 半径/ 的/ 比率/ IWQE/ 算法/ 路线/ 宽度/ 占/ 通信/ 半径/ 的/ 比率/ 槡/ 3/ // 24.1/ 比较/ ESA/ -/ GAA/ 和/ ESA/ -/ GBA/ 的/ 能量消耗/ 表/ 2/ 和表/ 3/ 分别/ 显示/ 了/ 节点/ 数目/ 为/ 320/ 和/ 800/ 时/ ,/ 查询/ 区域/ 大小/ 对/ ESA/ -/ GAA/ 和/ ESA/ -/ GBA/ 算法/ 能量消耗/ 的/ 影响/ ./ 可见/ ,/ 当/ 节点/ 密度/ 较/ 小时/ ,/ ESA/ -/ GAA/ 和/ ESA/ -/ GBA/ 的/ 能量消耗/ 近似/ 相等/ ;/ 当/ 节点/ 密度/ 较大/ 且/ 查询/ 区域/ 较/ 小时/ ,/ 在/ 绝大多数/ 情况/ 下/ ,/ ESA/ -/ GBA/ 略/ 优于/ ESA/ -/ GAA/ ;/ 当/ 节点/ 密度/ 较大/ 且/ 查询/ 区域/ 较大/ 时/ ,/ 在/ 绝大多数/ 情况/ 下/ ,/ ESA/ -/ GAA/ 略/ 优于/ ESA/ -/ GBA/ ./ 由于/ 在/ 各种/ 实验/ 参数/ 条件/ 下/ ,/ ESA/ -/ GAA/ 与/ ESA/ -/ GBA/ 能量消耗/ 相差/ 较/ 小/ ,/ 在/ 后面/ 几组/ 实验/ 中/ ,/ 为了/ 描述/ 方便/ ,/ 仅/ 给出/ ESA/ -/ GBA/ 的/ 实验/ 结果/ ./ 查询/ 区域/ 占/ 网络覆盖/ 区域/ 的/ 百分比/ 查询/ 区域/ 占/ 网络覆盖/ 区域/ 的/ 百分比/ 4.2/ 比较/ ESA/ 簇头/ 节点/ 数目/ 和/ IWQE/ 查询/ 节点/ 数目/ 由式/ (/ 11/ )/ 可知/ ,/ Etotal/ (/ IWQE/ )/ 与/ Etotal/ (/ ESA/ )/ 之差/ 主要/ 由/ Nq/ 和/ Ng/ 决定/ ,/ 本组/ 实验/ 分析/ Nq/ 和/ Ng/ 与/ 节点/ 密度/ 、/ 查询/ 区域/ 大小/ 、/ 网格/ 大小/ (/ 路线/ 宽度/ )/ 之间/ 的/ 关系/ ./ 图/ 11/ 显示/ 了/ 节点/ 密度/ 对/ Nq/ 和/ Ng/ 的/ 影响/ ./ 可见/ ,/ Ng/ >/ Nq/ ,/ 且/ 随着/ 节点/ 密度/ 的/ 增大/ ,/ Ng/ 和/ Nq/ 均/ 变小/ ,/ Ng/ 降低/ 的/ 幅度/ 小于/ Nq/ ./ 这/ 是因为/ :/ 为了/ 减少/ 查询处理/ 过程/ 发送/ 的/ 数据/ 消息/ 数目/ ,/ ESA/ 要求/ 网格/ 的/ 大小/ 和/ 簇头/ 节点/ 的/ 选择/ 满足/ ESA/ 约束条件/ 而/ IWQE/ 算法/ 没有/ 该/ 约束/ ./ 因而/ AdvESA/ </ AdvIWQE/ ,/ 且/ 当/ 节点/ 密度/ 增大/ 时/ ,/ AdvESA/ 的/ 增幅/ 小于/ AdvIWQE/ ./ 图/ 12/ 显示/ 了/ 查询/ 区域/ 大小/ 对/ Nq/ 和/ Ng/ 的/ 影响/ ,/ 可见/ ,/ 当/ 查询/ 区域/ 较/ 小时/ ,/ Nq/ 和/ Ng/ 相差/ 不大/ ./ 随着/ 查询/ 区域/ 的/ 增大/ ,/ 根据/ 式/ (/ 12/ )/ 和/ (/ 13/ )/ 可知/ ,/ 可以/ 近似/ 认为/ Ng/ 和/ Nq/ 与/ 查询/ 区域/ 面积/ 成正比/ ,/ 因而/ Ng/ 和/ Nq/ 均/ 变大/ ./ 图/ 13/ 显示/ 了/ 网格/ 宽度/ 对/ Nq/ 和/ Ng/ 的/ 影响/ ./ 实验/ 中/ IWQE/ 算法/ 的/ 路线/ 宽度/ 与/ ESA/ 算法/ 中/ 的/ 网格/ 宽度/ 相等/ ./ 可见/ ,/ 随着/ 路线/ 宽度/ 的/ 增大/ ,/ AdvIWQE/ 基本/ 保持/ 不变/ ,/ 根据/ 式/ (/ 12/ )/ 可知/ ,/ Nq/ 近似/ 与/ 路线/ 宽度/ 成反比/ ,/ 因而/ Nq/ 逐渐/ 变小/ ./ 对于/ ESA/ 算法/ ,/ 当/ 网格/ 宽度/ 较/ 小时/ ,/ 查询/ 路线/ 较长/ ,/ 使得/ Nq/ 较大/ ;/ 当/ 网格/ 宽度/ 较/ Page12/ 大时/ ,/ 为了/ 满足/ ESA/ 约束条件/ ,/ AdvESA/ 较/ 小/ ,/ 使得/ Nq/ 较大/ ./ 因此/ ,/ 随着/ 网格/ 宽度/ 的/ 增大/ ,/ Nq/ 呈现/ 先/ 减小/ 后/ 增大/ 的/ 趋势/ ./ 4.3/ 比较/ ESA/ 算法/ 和/ IWQE/ 算法/ 的/ 能量消耗/ 图/ 14/ 和/ 图/ 15/ 分别/ 显示/ 了/ 查询/ 区域/ 大小/ 和/ 节点/ 密度/ 对/ 算法/ 能量消耗/ 的/ 影响/ ./ 可见/ ,/ 当/ 查询/ 区域/ 或/ 节点/ 密度/ 较/ 小时/ ,/ Nq/ 和/ Ng/ 相差/ 不大且/ 需要/ 收集/ 的/ 感知/ 数据/ 数目/ 较/ 小/ ,/ 因而/ 两种/ 算法/ 的/ 能耗/ 相差/ 不大/ ./ 随着/ 节点/ 密度/ 和/ 查询/ 区域/ 的/ 增大/ ,/ 两种/ 算法/ 因/ 分发/ 查询/ 和/ 收集/ 感知/ 数据/ 消耗/ 的/ 能量/ 均/ 增大/ ,/ 因而/ 总/ 能量消耗/ 均/ 增大/ ./ 随着/ 查询/ 区域/ (/ 节点/ 密度/ )/ 的/ 增大/ ,/ Nq/ 也/ 随之/ 增大/ ,/ 根据/ 式/ (/ 11/ )/ 可知/ ,/ 相比/ IWQE/ 算法/ ,/ ESA/ 算法/ 少/ 发送/ 了/ (/ Nq/ -/ 1/ )/ 个/ 数据/ 消息/ 包/ ,/ 大大降低/ 了/ 算法/ 的/ 能量消耗/ ./ 当/ 网络/ 中/ 的/ 节点/ 数目/ 取/ 320/ ~/ 1600/ 之间/ 时/ ,/ ESA/ 算法/ 减少/ 的/ 能量/ 占/ IWQE/ 算法/ 总/ 能耗/ 的/ 比例/ 为/ [/ 9.57/ %/ ,/ 27.57/ %/ ]/ ./ 图/ 16/ 显示/ 了/ 网格/ 宽度/ 对/ 能量消耗/ 的/ 影响/ ./ 可见/ ,/ 随着/ 路线/ 宽度/ 的/ 增大/ ,/ Nq/ 变小/ ,/ 根据/ 式/ (/ 9/ )/ 可知/ ,/ IWQE/ 算法/ 消耗/ 的/ 能量/ 逐渐/ 减小/ ./ 而/ 对于/ ESA/ 算法/ ,/ Nq/ 呈现/ 先/ 减小/ 后/ 增大/ 的/ 趋势/ ,/ 根据/ 式/ (/ 3/ )/ 可知/ ,/ 其/ 能量消耗/ 也/ 呈现/ 先/ 减小/ 后/ 增大/ 的/ 趋势/ ./ 4.4/ 比较/ ESA/ 与/ IWQE/ 的/ 查询/ 成功率/ 和/ 查询/ 结果/ 质量/ 本组/ 实验/ 比较/ IWQE/ 和/ ESA/ 算法/ 在/ 不同/ 失效节点/ 数目/ 、/ 查询/ 区域/ 大小/ 、/ 节点/ 密度/ 和/ 网格/ 宽度/ 条件/ 下/ 的/ 查询/ 成功率/ 和/ 查询/ 结果/ 质量/ ./ 查询/ 成功率/ 定义/ 为/ sr/ =/ se/ // te/ ,/ 其中/ ,/ te/ 表示/ 算法/ 运行/ 的/ 总/ 次数/ ,/ se/ 表示/ 算法/ 成功/ 返回/ 查询/ 结果/ 至/ 基站/ 的/ 次数/ ./ 与/ 文献/ [/ 1/ ]/ 相同/ ,/ 查询/ 结果/ 质量/ 定义/ 为/ rq/ =/ cn/ // tn/ ,/ 其中/ ,/ tn/ 表示/ 在/ 查询/ 区域/ 内/ 的/ 节点/ 数目/ ,/ cn/ 表示/ 在/ 查询/ 区域/ 内且/ 被/ 算法/ 遍历/ 到/ 的/ 节点/ 数目/ ./ 采用/ 表/ 1/ 中/ 的/ 实验/ 参数/ ,/ 失效节点/ 数目/ 设置/ 为/ 4/ ,/ 即/ 节点/ 失效/ 的/ 比例/ 为/ 0.5/ %/ ./ 图/ 17/ 显示/ 了/ 失效节点/ 数目/ 对/ 查询/ 成功率/ 和/ 查询/ 结果/ 质量/ 的/ 影响/ ./ 由于/ 在/ IWQE/ 算法/ 中/ ,/ 任意/ 一个/ 查询/ 节点/ 失效/ 会/ 导致/ 查询/ 结果/ 全部/ 丢失/ 且/ 无法/ 返回/ 查询/ 结果/ ,/ 因而/ IWQE/ 算法/ 的/ 查询/ 成功率/ 和/ 查询/ 结果/ 质量/ 均/ 随着/ 失效节点/ 数目/ 的/ 增大/ 急剧下降/ ./ 而/ ESA/ 算法/ 在/ 簇头/ 节点/ 失效/ 时/ 从/ 冗余/ 节点/ 恢复/ 执行/ ,/ 降低/ 了/ 查询处理/ 过程/ 中断/ 的/ 概率/ ,/ 因而/ 其/ 查询/ 成功率/ 和/ 查询/ 结果/ 质量/ 随着/ 失效节点/ 数目/ 的/ 增大/ 较/ 缓慢/ 地/ 下降/ ./ 图/ 18/ 显示/ 了/ 查询/ 区域/ 大小/ 对/ 查询/ 成功率/ 和/ 查询/ 结果/ 质量/ 的/ 影响/ ./ 可见/ ,/ 两种/ 算法/ 的/ 查询/ 成功率/ 和/ 查询/ 结果/ 质量/ 随着/ 查询/ 区域/ 的/ 增大/ 均/ 下降/ ,/ 且/ IWQEPage13/ 算法/ 急剧下降/ ,/ 而/ ESA/ 算法/ 较/ 缓慢/ 的/ 下降/ ./ 这/ 是因为/ :/ 在/ 失效节点/ 数目/ 固定/ 的/ 情况/ 下/ ,/ 随着/ 查询/ 区域/ 的/ 增大/ ,/ 算法/ 执行/ 过程/ 中/ 遇到/ 失效节点/ 的/ 概率/ 增大/ ,/ 导致/ 两种/ 算法/ 的/ 查询/ 成功率/ 和/ 查询/ 结果/ 质量/ 均/ 下降/ ./ 图/ 17/ 失效节点/ 数目/ 对/ 查询/ 成功率/ 和/ 查询/ 结果/ 质量/ 的/ 影响/ 图/ 18/ 查询/ 区域/ 对/ 查询/ 成功率/ 和/ 查询/ 结果/ 质量/ 的/ 影响/ 图/ 19/ 显示/ 了/ 网络/ 节点/ 密度/ 对/ 查询/ 成功率/ 和/ 查询/ 结果/ 质量/ 的/ 影响/ ./ 节点/ 数目/ 分别/ 取/ 160/ ×/ 2/ ,/ 160/ ×/ 3/ ,/ …/ ,/ 160/ ×/ 10/ ,/ 失效节点/ 数目/ 分别/ 取/ 2/ ,/ 3/ ,/ …/ ,/ 10/ ./ 可见/ ,/ 在/ 失效节点/ 比例/ 固定/ 的/ 情况/ 下/ ,/ 随着/ 网络/ 节点/ 密度/ 的/ 增大/ ,/ IWQE/ 算法/ 的/ 查询/ 成功率/ 和/ 查询/ 结果/ 质量/ 基本/ 不变/ ,/ 而/ ESA/ 的/ 查询/ 成功率/ 和/ 查询/ 结果/ 质图/ 19/ 网络/ 节点/ 密度/ 对/ 查询/ 成功率/ 和/ 查询/ 结果/ 质量/ 的/ 影响/ 在/ IWQE/ 算法/ 中/ ,/ 任意/ 一个/ 查询/ 节点/ 失效/ 则/ 查询处理/ 过程/ 中止/ ,/ 而/ ESA/ 算法/ 只有/ 在/ 簇头/ 节点/ 及其/ 所有/ 备份/ 节点/ 同时/ 失效/ 的/ 情况/ 下/ 才/ 会/ 中断/ ,/ 提高/ 了/ 查询处理/ 过程/ 的/ 鲁棒性/ ./ 量/ 有/ 显著/ 的/ 提高/ ./ 尤其/ ,/ 当/ 节点/ 密度/ 较大/ 时/ ,/ 节点/ 失效/ 对/ ESA/ 的/ 影响/ 可以/ 忽略/ 不记/ ./ 其/ 原因/ 是/ :/ 当/ 网络/ 节点/ 密度/ 变大时/ ,/ ESA/ 算法/ 簇头/ 节点/ 的/ 备份/ 节点/ 数目/ 也/ 随之/ 增大/ ,/ 有效/ 地/ 降低/ 了/ 查询处理/ 中断/ 的/ 概率/ ./ Page14/ 图/ 20/ 显示/ 了/ 网格/ 宽度/ 对/ 查询/ 成功率/ 和/ 查询/ 结果/ 质量/ 的/ 影响/ ./ 在/ 实验/ 中/ ,/ IWQE/ 算法/ 的/ 路线/ 宽度/ 取值/ 与/ ESA/ 算法/ 的/ 网格/ 宽度/ 相同/ ./ 可见/ ,/ 随着/ 网格/ 宽度/ 的/ 增大/ ,/ IWQE/ 和/ ESA/ 算法/ 的/ 查询/ 成功率/ 和/ 查询/ 结果/ 质量/ 均/ 呈现/ 先/ 增大/ 后/ 减少/ 的/ 趋势/ ./ 其/ 原因/ 是/ :/ 当/ ESA/ 算法/ 的/ 网格/ 宽度/ (/ IWQE/ 算法/ 的/ 路线/ 宽度/ )/ 较/ 小时/ ,/ 两种/ 算法/ 的/ 查询/ 路线/ 较长/ ,/ 使得/ Ng/ 和/ Nq/ 较大/ ./ 对于/ IWQE/ 算法/ ,/ Nq/ 越大/ ,/ 则/ 查询处理/ 过程/ 因/ 查询/ 节点/ 失效/ 的/ 概率/ 越大/ ;/ 对于/ ESA/ 算法/ ,/ 网格/ 的/ 平图/ 20/ 网格/ 宽度/ 对/ 查询/ 成功率/ 和/ 查询/ 结果/ 质量/ 的/ 影响/ 5/ 总结/ 与/ 展望/ 现有/ 传感器/ 网络空间/ 范围/ 查询处理/ 算法/ 能量消耗/ 大且/ 查询处理/ 过程/ 容易/ 因/ 节点/ 失效/ 而/ 中断/ ,/ 无法/ 获得/ 查询/ 结果/ ./ 本文/ 提出/ 了/ 一种/ 综合/ 考虑/ 能量消耗/ 和/ 节点/ 失效/ 的/ 算法/ ESA/ ./ 它/ 仅/ 要求/ 查询/ 区域/ 内/ 的/ 每个/ 节点/ 发送/ 一次/ 数据/ 消息/ ,/ 降低/ 了/ 能量消耗/ ./ 为了/ 减小/ 查询处理/ 因/ 节点/ 失效/ 而/ 中断/ 的/ 概率/ ,/ 我们/ 设计/ 了/ 一种/ 利用/ 节点/ 冗余/ 恢复/ 查询处理/ 过程/ 的/ 算法/ ,/ 实验/ 结果表明/ 该/ 算法/ 有效/ 地/ 保证/ 了/ ESA/ 算法/ 查询处理/ 过程/ 的/ 查询/ 成功率/ 和/ 查询/ 结果/ 质量/ ,/ 且/ 随着/ 节点/ 密度/ 的/ 增大/ ,/ ESA/ 算法/ 的/ 查询/ 成功率/ 和/ 查询/ 结果/ 质量/ 显著/ 提高/ ./ 尤其/ 当/ 节点/ 密度/ 较大/ 时/ ,/ 节点/ 失效/ 对/ ESA/ 算法/ 查询处理/ 的/ 影响/ 可以/ 忽略/ ./ 因此/ ,/ 在/ 绝大多数/ 情况/ 下/ ,/ 本文/ 提出/ 的/ 算法/ 优于/ IWQE/ 算法/ ./ 文献/ [/ 18/ -/ 20/ ]/ 采用/ 了/ IWQE/ 类似/ 的/ 思想/ 处理/ K/ 近邻/ 查询/ ,/ 本文/ 指出/ 的/ 问题/ 在/ 这些/ 算法/ 中/ 依然/ 存在/ ,/ 将/ ESA/ 算法/ 中/ 的/ 思想/ 应用/ 于/ K/ 近邻/ 查询/ 算法/ 是/ 我们/ 下/ 一步/ 的/ 工作/ ./ 致谢/ 感谢/ 加拿大/ Alberta/ 大学/ AlexandruComan/ 以及/ 审稿/ 专家/ ,/ 他们/ 提出/ 了/ 宝贵/ 的/ 意见/ !/ 均/ 面积/ 与/ Ng/ 成反比/ ,/ 使得/ 簇头/ 节点/ 的/ 备份/ 节点/ 数目/ 减少/ ,/ 因而/ IWQE/ 和/ ESA/ 算法/ 的/ 查询/ 成功率/ 较/ 低且/ 查询/ 结果/ 质量/ 较差/ ;/ 当/ ESA/ 算法/ 的/ 网格/ 宽度/ (/ IWQE/ 算法/ 的/ 路线/ 宽度/ )/ 较大/ 时/ ,/ 对于/ ESA/ 算法/ ,/ 为了/ 满足/ ESA/ 约束条件/ ,/ AdvESA/ 较/ 小/ ,/ 使得/ Ng/ 较大/ ;/ 对于/ IWQE/ 算法/ ,/ 查询/ 区域/ 内/ 不/ 在/ 查询/ 节点/ 通信/ 半径/ 内/ 的/ 数据/ 节点/ 数目/ 随着/ 路线/ 宽度/ 变大而/ 增大/ ,/ 使得/ 查询/ 成功率/ 较/ 低且/ 查询/ 结果/ 质量/ 较差/ ./ 

