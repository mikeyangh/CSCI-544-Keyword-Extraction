Page1/ 三维/ 片上/ 网络体系结构/ 研究/ 综述/ 李晨/ 马胜/ 王璐/ 郭阳/ (/ 国防科学技术大学/ 计算机/ 学院/ 长沙/ 410073/ )/ 摘要/ 伴随/ 着/ 三维/ 集成电路/ 的/ 迅速/ 发展/ ,/ 三维/ 片上/ 网络/ 受到/ 国内外/ 研究者/ 的/ 广泛/ 关注/ ./ 三维/ 片上/ 网络/ 主要/ 用于/ 实现/ 三维/ 堆叠/ 芯片/ 的/ 互连/ 通信/ ,/ 为/ 三维/ 集成电路/ 提供/ 超低/ 的/ 延迟/ 和/ 竖直/ 方向/ 上/ 超高/ 的/ 带宽/ ,/ 从而/ 解决/ 系统/ 集成度/ 增加/ 导致/ 的/ 通信/ 瓶颈/ 问题/ ,/ 有利于/ 克服/ 存储/ 墙/ 问题/ 并/ 提高/ 三维/ 堆叠/ 芯片/ 的/ 性能/ ./ 文章/ 介绍/ 了/ 三维/ 集成电路/ 研究/ 现状/ 及其/ 结构/ 优势/ ,/ 分析/ 三维/ 片上/ 网络体系结构/ 的/ 特点/ 和/ 存在/ 的/ 问题/ ,/ 包括/ 竖直/ 方向/ 的/ 单/ 跳/ 传播/ 问题/ 、/ 路由器/ 交叉开关/ 的/ 复杂度/ 控制/ 问题/ 以及/ 热效应/ 的/ 控制/ 问题/ ,/ 从/ 系统/ 层/ 、/ 微结构/ 层/ 和/ 电路/ 层/ 对/ 三维/ 片上/ 网络体系结构/ 的/ 研究/ 热点/ 及其/ 实例/ 进行/ 了/ 深入分析/ ,/ 最后/ 对/ 三维/ 片上/ 网络/ 所/ 面临/ 的/ 挑战/ 和/ 设计/ 方法/ 进行/ 了/ 总结/ 和/ 展望/ ./ 关键词/ 计算机/ 体系结构/ ;/ 三维/ 堆叠/ ;/ 三维/ 集成电路/ ;/ 三维/ 片上/ 网络/ 1/ 引言/ 摩尔定律/ 实际上/ 是/ 半导体/ 集成电路/ 行业/ 的/ 一条/ Page2/ 的/ 线性/ 缩减/ 有所/ 减缓/ [/ 1/ ]/ ,/ 因此/ 出现/ 了/ 多/ 核/ 、/ 虚拟化/ 等/ 并行/ 策略/ 来/ 维持/ 这一/ 学习曲线/ ./ 随着/ 技术/ 的/ 继续/ 发展/ ,/ 多核/ 、/ 多线程/ 和/ 虚拟化/ 等/ 策略/ 又/ 会/ 遇到/ 存储/ 墙/ 的/ 问题/ [/ 2/ ]/ ,/ 需要/ 提供/ 更/ 高/ 的/ 存储/ 带宽/ 和/ 更/ 大/ 的/ 存储空间/ 来/ 保证/ 其/ 性能/ ./ 在/ 这个/ 背景/ 下/ ,/ 急需/ 找到/ 一种/ 新/ 的/ 方式/ 来/ 维持/ 这一/ 学习曲线/ 的/ 速率/ ,/ 因此/ ,/ 三维/ 芯片/ 堆叠/ 的/ 方法/ 应运而生/ [/ 3/ ]/ ./ 三维/ 集成/ 技术/ 是/ 一种/ 新/ 的/ 集成电路/ 工艺/ ,/ 其/ 将/ 多个/ 硅片/ 垂直/ 堆叠/ 并/ 以/ 三维/ 封装/ 的/ 方式/ 封装/ 成/ 一个/ 芯片/ [/ 4/ ]/ ,/ 是/ 在/ 工艺/ 尺寸/ 缩减/ 受限/ 的/ 情况/ 下/ 提高/ 系统/ 性能/ 的/ 一种/ 新/ 的/ 方式/ [/ 5/ ]/ ,/ 从/ 延伸/ 摩尔定律/ 和/ 超越/ 摩尔定律/ 两/ 方面/ 实现/ 芯片/ 上/ 晶体管/ 密度/ 和/ 芯片/ 性能/ 的/ 大幅度/ 提升/ [/ 6/ -/ 8/ ]/ ./ 三维/ 集成电路/ 具有/ 以下/ 4/ 点/ 优势/ :/ (/ 1/ )/ 更/ 短/ 的/ 互连/ 线长/ ./ 三维/ 集成电路/ 技术/ 最大/ 的/ 吸引力/ 就/ 在于/ 工艺/ 缩减/ 受限/ 的/ 情况/ 下/ ,/ 通过/ 芯片/ 堆叠/ ,/ 降低/ 互连/ 线/ 的/ 平均/ 长度/ [/ 9/ ]/ ,/ 从而/ 缩短/ 延迟/ 并/ 降低功耗/ ;/ (/ 2/ )/ 更/ 高/ 的/ 存储/ 带宽/ ./ 三维/ 集成电路/ 通过/ 对/ 存储/ 部件/ 的/ 堆叠/ ,/ 一方面/ 提高/ 了/ Cache/ 容量/ ,/ 另一方面/ 减少/ 了/ 平均/ 访存/ 时间/ ,/ 从而/ 提升/ 了/ 吞吐/ 率/ 和/ 能效/ ;/ (/ 3/ )/ 支持/ 异质/ 集成/ 的/ 实现/ ./ 三维/ 集成电路/ 增加/ 的/ 一/ 维空间/ 使得/ 芯片/ 可以/ 在/ 更/ 大/ 的/ 密度/ 下/ 实现/ 更/ 高/ 的/ 性能/ ,/ 也/ 使/ 集成电路/ 的/ 异质/ 集成/ 能力/ 得以/ 更好/ 地/ 体现/ ,/ 即/ 体系结构/ 设计者/ 可以/ 通过/ 灵活/ 的/ 方法/ 实现/ 各种/ 异质/ 结构/ 的/ 堆叠/ 来/ 满足/ 功能/ 的/ 多样性/ ;/ (/ 4/ )/ 更/ 小/ 的/ 系统/ 尺寸/ ./ 三维/ 集成电路/ 技术/ 将/ 二维/ 芯片/ 竖直/ 堆叠/ ,/ 通过/ 纵向/ 垂直/ 互连/ 进行/ 通信/ ./ 该/ 方式/ 在/ 提升/ 了/ 芯片/ 集成度/ 的/ 同时/ 缩小/ 了/ 芯片/ 面积/ ./ 三维/ 片上/ 网络/ 通过/ 三维/ 立体/ 的/ 互连/ 通信/ ,/ 为/ 三维/ 集成电路/ 提供/ 超低/ 的/ 延迟/ 和/ 竖直/ 方向/ 上/ 超高/ 的/ 带宽/ ,/ 在/ 现阶段/ 对于/ 提高/ 三维/ 芯片/ 性能/ 并/ 控制/ 热效应/ 问题/ 有着/ 非常/ 重要/ 的/ 意义/ ./ 三维/ 集成电路/ 必将/ 是/ 未来/ 集成电路/ 的/ 发展/ 方向/ ,/ 三维/ 片上/ 网络/ 作为/ 三维/ 集成电路/ 最/ 重要/ 的/ 互连/ 通信/ 方式/ ,/ 具有/ 非常广阔/ 的/ 发展前景/ ./ 基于/ 此/ ,/ 本文/ 针对/ 目前/ 三维/ 片上/ 网络/ 的/ 研究/ 热点/ ,/ 从/ 系统/ 层/ 、/ 微结构/ 层/ 和/ 电路/ 层/ 三个/ 层次/ 对/ 三维/ 片上/ 网络体系结构/ 进行/ 热点/ 综述/ ./ 分析/ 了/ 三维/ 拓扑/ 结构/ 和/ 路由器/ 微结构/ 的/ 发展/ 轨迹/ ;/ 对/ 路由/ 算法/ 、/ 垂直/ 互连/ 的/ TSV/ 优化/ 设计/ 以及/ 热/ 管理/ 等/ 方面/ 研究/ 进行/ 了/ 分类/ 总结/ ;/ 同时/ 还/ 对/ 非常/ 有/ 前景/ 的/ 2.5/ 维片/ 上/ 互连/ 硅/ 中介/ 技术/ 进行/ 介绍/ 和/ 讨论/ ;/ 此外/ ,/ 对于/ 三维/ 片上/ 网络/ 在/ 设计/ 方法学/ 、/ 缓存/ 分配/ 以及/ 新型/ 堆叠/ 方式/ 等/ 方面/ 的/ 研究/ 也/ 作/ 了/ 分析/ 介绍/ ./ 通过/ 这些/ 文献/ 综述/ 和/ 讨论/ ,/ 分析/ 现有/ 研究/ 的/ 优势/ 和/ 不足/ ,/ 总结/ 三维/ 片上/ 网络/ 研究所/ 面临/ 的/ 问题/ 和/ 挑战/ ,/ 并/ 针对/ 这些/ 问题/ 和/ 挑战/ 提出/ 下/ 一步/ 的/ 研究/ 前景/ 和/ 发展/ 方向/ ./ 2/ 三维/ 片上/ 网络体系结构/ 特点/ 与/ 研究/ 层次/ 三维/ 片上/ 网络体系结构/ 的/ 最大/ 特点/ 是/ 三维/ 集成/ 堆叠/ 以及/ 与/ 此/ 相适应/ 的/ 竖直/ 通信/ 链路/ ./ 目前/ ,/ 三维/ 集成/ 逻辑/ 堆叠/ 的/ 商用/ 芯片/ 产品/ 并未/ 普及/ ,/ 主要/ 是/ 以/ 存储/ 堆叠/ 为主/ ,/ 但/ 按/ 可能/ 批量生产/ 的/ 时间/ 顺序/ 可以/ 分为/ 存储/ 堆叠/ 、/ 硅/ 中介/ 层/ 、/ 存储/ 层/ 堆叠/ 逻辑/ 层/ 和/ 逻辑/ 三维/ 堆叠/ 4/ 种/ 形式/ [/ 10/ ]/ ,/ 这些/ 三维/ 堆叠/ 都/ 是/ 通过/ 纵向/ 的/ 垂直/ 互连/ 进行/ 通信/ ./ 纵向/ 垂直/ 互连/ 技术/ 包括/ 引线/ 接/ 合法/ (/ wirebonding/ )/ 、/ 微/ 焊点/ (/ microbump/ )/ 、/ 无触点/ (/ contactless/ )/ 以及/ 硅/ 通孔/ 连接/ (/ TSV/ )/ 等/ 几种/ 方式/ ,/ 这/ 几种/ 连接/ 方式/ 在/ 纵向/ 连接/ 密度/ 和/ 实现/ 特点/ 方面/ 各具特色/ [/ 11/ ]/ ./ 就/ 目前/ 来看/ ,/ 采用/ TSV/ 的/ 垂直/ 互连/ 技术/ 通过/ 在/ 硅晶圆上/ 穿孔/ 并/ 以/ 钨/ 金属/ 填注/ 进行/ 芯片/ 间/ 互连/ ,/ 相对来说/ 是/ 最/ 有/ 前景/ 的/ 垂直/ 互连/ 技术/ ,/ 最有/ 潜力/ 提供/ 最大/ 的/ 互连/ 密度/ ,/ 虽然/ 其/ 制造/ 成本/ 目前/ 还/ 比较/ 高/ ,/ 但/ 由于/ 其/ 出色/ 的/ 性能/ ,/ TSV/ 垂直/ 互连/ 技术/ 有望/ 获得/ 最/ 广泛/ 的/ 应用/ [/ 12/ ]/ ./ 片上/ 网络/ 作为/ 一种/ 在/ 芯片/ 内部/ 通过/ 拓扑/ 结构/ 将/ 各个/ 模块/ 连接/ ,/ 并/ 采用/ 路由/ 和/ 分组/ 交换/ 技术/ 进行/ 数据交换/ 的/ 通信/ 方式/ ,/ 可/ 有效/ 解决/ 复杂/ SoC/ 通信/ 问题/ [/ 13/ -/ 14/ ]/ ./ 三维/ 片上/ 网络/ 是/ 指/ 将/ 资源/ 节点/ 分布/ 在/ 竖直/ 堆叠/ 在/ 一起/ 的/ 不同/ 的/ 物理层/ 上/ ,/ 并/ 采用/ 了/ 三维/ 立体/ 的/ 结构/ 实现/ 节点/ 间/ 的/ 互连/ 通信/ ,/ 实现/ 低/ 延迟/ 、/ 高带宽/ 的/ 片/ 上/ 网络结构/ [/ 15/ -/ 16/ ]/ ./ 三维/ 片上/ 网络/ 的/ 体系结构/ 设计/ 对于/ 网络/ 延迟/ 、/ 吞吐/ 率/ 、/ 功耗/ 、/ 应用/ 映射/ 以及/ 芯片/ 的/ 面积/ 、/ 复杂度/ 都/ 有着/ 非常/ 重要/ 的/ 影响/ [/ 17/ -/ 18/ ]/ ./ 三维/ 片上/ 网络/ 和/ 二维/ 片上/ 网络/ 最大/ 的/ 区别/ 在于/ 新/ 增加/ 的/ 连接/ 不同/ 层/ 的/ 竖直/ 链路/ ,/ 纵向/ 竖直/ 链路/ 可以/ 实现/ 传统/ 二维/ 片上/ 网络/ 的/ 平面/ 结构/ 所/ 无法/ 实现/ 的/ 性能/ ./ 因此/ ,/ 如何/ 利用/ 好/ 这些/ 特别/ 的/ 竖直/ 链路/ 成为/ 三维/ 片上/ 网络/ 的/ 研究/ 重点/ ./ 这/ 就/ 要求/ 设计者/ 选择/ 一个/ 合适/ 的/ 竖直/ 链路/ 体系结构/ ,/ 并/ 设计/ 高性能/ 低/ 开销/ 的/ 路由器/ 来/ 减少/ 竖直/ 方向/ 上/ 的/ 节点/ 跳数/ ./ 三维/ 片上/ 网络/ 最/ 关键/ 的/ 研究/ 目标/ 就是/ 如何/ 在/ 相对/ 较/ 小/ 的/ 面积/ 和/ 功耗/ 开销/ 下/ ,/ 为/ 三维/ 芯片/ 提供/ 更/ 高/ 的/ 互连/ 性能/ ./ 相对/ 于/ 二维/ 片上/ 网络/ ,/ 三维/ 片上/ 网络系统/ 结构层/ 的/ 大部分/ 研究/ 集中/ 在/ 解决/ 3/ 个/ 问题/ :/ (/ 1/ )/ 竖直/ 方向/ 的/ 单/ 跳/ 传播/ 问题/ ,/ 即/ 在/ 层间/ 互连/ 中/ ,/ 由于/ 竖直/ 方向/ 距离/ 相对/ 于/ 水平/ 方向/ 可/ 忽略不计/ ,/ Page3/ 因此/ 要求/ 任意/ 两层/ 之间/ 在/ 竖直/ 方向/ 都/ 采用/ 单跳/ 传播/ 以/ 降低/ 延迟/ ./ (/ 2/ )/ 路由器/ 交叉开关/ 的/ 复杂度/ 控制/ 问题/ ,/ 由于/ 三维/ 结构/ 增加/ 一维/ 需要/ 增加/ 交叉开关/ 的/ 端口/ 数量/ ,/ 进而/ 大幅/ 增大/ 交叉开关/ 的/ 复杂度/ ,/ 使得/ 硬件/ 开销/ 不可/ 接受/ ,/ 因此/ 需要/ 对/ 交叉开关/ 进行/ 简化/ 设计/ 以/ 降低/ 硬件/ 开销/ ./ (/ 3/ )/ 热效应/ 的/ 控制/ 问题/ ,/ 三维/ 堆叠/ 技术/ 使得/ 集成电路/ 晶体管/ 密度/ 增大/ ,/ 单位/ 面积/ 产生/ 的/ 热量/ 也/ 相应/ 增大/ ,/ 同时/ 三维/ 堆叠/ 增大/ 了/ 散热/ 难度/ ,/ 所以/ 热效应/ 成为/ 必须/ 控制/ 的/ 问题/ ./ 上述/ 问题/ 的/ 研究/ 产生/ 了/ 几大/ 研究/ 热点/ ,/ 这些/ 研究/ 热点/ 分别/ 分布/ 在/ 系统/ 层/ 、/ 微结构/ 层/ 和/ 电路/ 层/ ,/ 概括/ 如图/ 1/ 所示/ ./ 这种/ 分层/ 的/ 视角/ 可以/ 更好/ 地/ 理解/ 三维/ 片上/ 网络/ 研究/ 层次/ ./ 在/ 系统/ 层/ ,/ 主要/ 是/ 对片/ 上/ 网络/ 进行/ 全局性/ 研究/ ,/ 如/ 拓扑/ 结构/ 、/ 路由/ 算法/ 、/ 硅/ 中介/ 技术/ [/ 19/ ]/ 、/ 图/ 2/ 三维/ 拓扑/ 结构/ 发展/ 路线/ 三维/ 对称网络/ 结构/ [/ 20/ ]/ 是/ 最/ 基本/ 的/ 三维/ 网络结构/ ,/ 它/ 由/ 二维/ 网络结构/ 向/ 竖直/ 方向/ 直接/ 拓展/ 而成/ ./ 如图/ 3/ (/ a/ )/ 所示/ ,/ 该/ 结构/ 相当于/ 在/ 二维/ 网络结构/ 的/ 路由器/ 上/ 增加/ 两个/ 端口/ ,/ 分别/ 是/ 在/ 竖直/ 方向/ 朝上/ 和/ 朝下/ 设计/ 方法学/ 、/ 新型/ 芯片/ 堆叠/ 方式/ 以及/ 热/ 管理/ 的/ 部分/ 内容/ ;/ 在/ 微结构/ 层/ 研究/ 方面/ ,/ 主要/ 包括/ 路由器/ 缓存/ 分配/ 、/ 路由器/ 微/ 体系结构/ 研究/ 以及/ 热/ 管理/ 部分/ 涉及/ 路由器/ 结构/ 的/ 设计/ 研究/ ;/ 在/ 电路/ 层/ 方面/ ,/ 主要/ 是/ 以/ 垂直/ TSV/ 互连/ 相关/ 内容/ 的/ 研究/ 为主/ ./ 下面/ 将/ 针对/ 这些/ 体系结构/ 研究/ 热点/ 进行/ 分析/ ./ 3/ 三维/ 片上/ 网络体系结构/ 研究进展/ 3.1/ 拓扑/ 结构/ 片上/ 网络/ 主要/ 由/ 链路/ 通道/ 和/ 路由器/ 节点/ 组成/ ,/ 而/ 网络拓扑/ 结构/ 则/ 决定/ 了/ 其/ 物理布局/ 和/ 路由器/ 节点/ 与/ 链路/ 的/ 连接/ 方式/ ./ 拓扑/ 结构/ 的/ 评价/ 指标/ 有/ 节点/ 的/ 度/ 、/ 平均/ 节点/ 跳数/ 、/ 最大/ 通道/ 负载/ 以及/ 路径/ 多样性/ 等/ ./ 对于/ 三维/ 片上/ 网络/ 来说/ ,/ 增加/ 的/ 一维/ 纵向/ 竖直/ 连接/ 不同于/ 传统/ 二维/ 片上/ 网络/ 的/ 平面/ 连接/ 方式/ ,/ 为了/ 利用/ 好/ 纵向/ 连接/ 的/ 短距离/ 和/ 高带宽/ 的/ 特性/ ,/ 垂直/ 通信/ 在/ 三维/ 拓扑/ 结构/ 的/ 设计/ 上/ 也/ 需要/ 特别/ 考虑/ ./ 目前/ 对/ 三维/ 片上/ 网络拓扑/ 结构/ 的/ 研究/ 非常/ 多/ [/ 26/ ,/ 28/ -/ 30/ ]/ ,/ 其/ 发展/ 路线/ 如图/ 2/ 所示/ ,/ 主要/ 可以/ 分为/ 两类/ ,/ 一类/ 将/ 二维/ 片上/ 网络/ 已有/ 的/ 拓扑/ 结构/ 直接/ 应用/ 于/ 三维/ 片上/ 网络/ ,/ 发挥/ 三维/ 立体/ 结构/ 的/ 空间/ 优势/ ,/ 实现/ 资源/ 利用/ 的/ 最大化/ ;/ 另一类/ 则/ 是/ 根据/ 三维/ 片上/ 网络/ 的/ 特点/ 单独/ 设计/ ,/ 包括/ 利用/ 竖直/ 方向/ 相对/ 于/ 二维/ 平面/ 上/ 可/ 忽略不计/ 的/ 距离/ 、/ 竖直/ 方向/ 上/ TSV/ 通信/ 的/ 高带宽/ 等/ ./ 下面/ 将/ 介绍/ 这/ 两类/ 拓扑/ 结构设计/ 思路/ 的/ 研究/ 现状/ ./ 的/ 两个/ 端口/ ./ 显然/ ,/ 增加/ 这些/ 端口/ 需要/ 相应/ 地/ 增加/ 缓存/ 、/ 仲裁/ 器/ 以及/ 交叉开关/ 的/ 规模/ ./ 所谓/ 对称/ 的/ 网络结构/ 是/ 指/ 报文/ 在/ 片间/ 和/ 片/ 内/ 都/ 是/ 每/ 节点/ 一跳/ 地/ 传输/ ,/ 即/ 报文/ 从/ 一个/ 四层/ 芯片/ 的/ 底层/ 某/ 节点/ 传输/ 到/ 顶层/ 某/ Page4/ 图/ 3/ 三维/ 拓扑/ 结构/ 节点/ 至少/ 需要/ 经过/ 3/ 跳/ ./ 三维/ 对称网络/ 结构/ 非常简单/ 、/ 易/ 实现/ ,/ 但/ 存在/ 两个/ 主要/ 缺陷/ :/ 一是/ 片间/ 多/ 跳/ 传输/ 浪费/ 了/ 其/ 相对/ 于片/ 内/ 可/ 忽略不计/ 的/ 距离/ ;/ 另/ 一个/ 是/ 增加/ 额外/ 的/ 端口/ ,/ 需要/ 一个/ 7/ ×/ 7/ 的/ 交叉开关/ ,/ 开销/ 非常/ 大/ ./ 三维/ 对称网络/ 在/ 竖直/ 方向/ 上/ 按/ 跳/ 传输/ 是/ 极大/ 的/ 资源/ 浪费/ ,/ 因此/ ,/ 文献/ [/ 21/ ]/ 提出/ 了/ 三维/ 片上/ 网络/ -/ 总线/ 混合结构/ 以/ 解决/ 该/ 问题/ ./ 如图/ 3/ (/ b/ )/ 该/ 结构/ 在/ 片/ 内/ 采用/ 包交换/ 网络/ ,/ 片间/ 采用/ 总线结构/ ,/ 通过/ 这种/ 混合/ 机制/ ,/ 很/ 好地解决/ 了/ 片间/ 多/ 跳/ 传输/ 的/ 问题/ ./ 片内/ 的/ 包交换/ 网络/ 与/ 二维/ 片上/ 网络/ 相似/ ,/ 而/ 在/ 片间/ 采用/ 的/ 总线/ 则/ 是/ 被/ 称为/ “/ 通信/ 柱/ ”/ 的/ 动态/ 时分/ 多路/ 访问/ 总线/ (/ dTDMA/ )/ ./ 这些/ 通信/ 柱为/ 任意/ 两层/ 芯片/ 的/ 节点/ 提供/ 单跳/ 通信/ ./ 限制/ 通信/ 柱/ 数量/ 的/ 因素/ 主要/ 包括/ 通孔/ 的/ 密度/ 和/ 路由器/ 复杂度/ ./ 采用/ 三维/ 片上/ 网络/ -/ 总线/ 混合结构/ 相对/ 于/ 三维/ 对称/ 片上/ 网络结构/ 解决/ 了/ 片间/ 多/ 跳/ 传输/ 的/ 问题/ ,/ 降低/ 了/ 硬件/ 复杂度/ ,/ 将/ 交叉开关/ 规模/ 从/ 7/ ×/ 7/ 降低/ 为/ 6/ ×/ 6/ ./ 然而/ ,/ 该/ 结构/ 在/ 竖直/ 方向/ 上/ 不/ 支持/ 并行/ 通信/ ,/ 在/ 高/ 流量/ 下/ 冲突/ 严重/ ,/ 因此/ 对于/ 节点/ 数目/ 和/ 层数/ 的/ 限制/ 非常/ 严格/ ./ 三维/ 片上/ 网络/ -/ 总线/ 混合结构/ 在/ 竖直/ 方向/ 存在/ 不/ 支持/ 并行/ 通信/ 的/ 问题/ ,/ 而/ 三维/ 纤毛/ 片上/ 网络结构/ [/ 22/ ]/ 很/ 好地解决/ 了/ 这个/ 问题/ ./ 它/ 是/ 一种/ 单/ Switch/ 连接/ 多/ IP/ 模块/ 的/ 三维/ 片上/ 网络结构/ ./ 如图/ 3/ (/ c/ )/ 所示/ ,/ 该/ 3/ ×/ 3/ ×/ 3/ 的/ 三维/ 纤毛/ 结构/ 由/ 9/ 个/ Switch/ 和/ 27/ 个/ IP/ 模块/ 组成/ ,/ 其中/ 每个/ Switch/ 连接/ 3/ 个/ IP/ 模块/ ./ Switch/ 只/ 存在/ 于/ 三维/ 结构/ 的/ 最底层/ ,/ 各层/ 的/ IP/ 模块/ 都/ 与/ 最底层/ 对应/ 的/ Switch/ 相连接/ ./ 在/ 层/ 内/ 互连/ 中/ ,/ 只有/ 接近/ 散热/ 模块/ 的/ 底层/ 具有/ 较/ 好/ 的/ 连通性/ ,/ 其他/ 层/ 的/ 层/ 内/ 通信/ 都/ 需要/ 经过/ 底层/ Switch/ 来/ 完成/ ./ 这种/ 结构/ 面积/ 和/ 功耗/ 开销/ 低/ ,/ 在/ 一些/ 特定/ 的/ 流量/ 模型/ 下能/ 发挥/ 较/ 好/ 的/ 性能/ ,/ 但单/ Switch/ 多/ IP/ 模块/ 的/ 设计/ 降低/ 了/ 该/ 结构/ 的/ 连通性/ ,/ 因此/ 全局/ 带宽/ 是/ 该/ 结构/ 的/ 瓶颈/ ,/ 影响/ 其/ 整体/ 性能/ ./ XNOTS/ 是/ 一种/ 通过/ 交叉开关/ Switch/ 进行/ 层间/ 互连/ 的/ 片/ 上/ 网络结构/ [/ 23/ ]/ ,/ 各层/ 内/ 可/ 采用/ 任意/ 直接/ 拓扑/ 逻辑/ 结构/ ,/ 而层间/ 则/ 通过/ 交叉开关/ Switch/ 非/ 直接/ 相连/ ./ 如图/ 4/ 所示/ ,/ 这种/ 交叉开关/ Switch/ 被/ 称为/ 路由/ 柱/ ./ XNOTS/ 三维/ 片上/ 网络结构/ 的/ 另/ 一/ 特点/ 就是/ 除了/ 底层/ 外/ ,/ 无需/ 保证/ 各层/ 内部/ 任意/ 两/ 节点/ 之间/ 的/ 连通性/ ,/ 这/ 类似/ 于/ 三维/ 纤毛/ 结构/ ,/ 各层/ 之间/ 可/ 根据/ 性能/ 和/ 开销/ 需要/ 独立/ 定制/ 设计/ ./ 由于/ 散热器/ 离/ 底层/ Page5/ 较近/ ,/ 易于/ 对/ 底层/ 散热/ ,/ 因此/ ,/ 对于/ 不/ 连通/ 的/ 上层/ 网络/ 节点/ ,/ 均/ 通过/ 底层/ 网络连接/ ./ 这种/ 设计/ 还/ 采用/ 了/ 热/ 感知/ 路由/ 算法/ ,/ 具有/ 较/ 好/ 的/ 散热/ 性能/ 和/ 较/ 高/ 的/ 吞吐/ 率/ ,/ 但是/ 竖直/ 方向/ 上/ 的/ 交叉开关/ 设计/ 对于/ 面积/ 和/ 功耗/ 的/ 需求/ 相对/ 较/ 高/ ./ 为了/ 降低/ 三维/ 片上/ 网络/ 的/ 报文/ 传播/ 延迟/ ,/ Xu/ 等/ 人/ [/ 24/ ]/ 提出/ 了/ 一种/ 如图/ 5/ (/ a/ )/ 所示/ 的/ 低/ 开销/ 路由器/ 组成/ 的/ 低/ 直径/ 三维/ 片上/ 网络/ 设计/ ./ 在/ 采用/ 与/ 传统/ 三维/ Mesh/ 片上/ 网络/ 相同/ 的/ 7/ 阶/ 路由器/ 的/ 基础/ 上/ ,/ 通过/ 在/ Cache/ 层/ 使用/ 长/ 连线/ 的/ 方式/ 组成/ 网络/ 直径/ 非常低/ 的/ 三维/ 片上/ 网络结构/ ./ 由于/ 计算/ 核/ 所在/ 层/ 的/ 内图/ 5/ 低阶/ 低/ 直径/ 片上/ 网络结构/ 前面/ 介绍/ 的/ 这/ 几种/ 拓扑/ 逻辑/ 都/ 是/ 在/ 三维/ 对称/ 结构/ 的/ 基础/ 之上/ 针对/ 三维/ 集成电路/ 的/ 特点/ 设计/ 优化/ 的/ ,/ 而/ 下面/ 这/ 3/ 种/ 拓扑/ 逻辑/ 均是由/ 二维/ 片上/ 网络/ 直接/ 引入/ 到/ 三维/ 片上/ 网络/ 中/ ,/ 同时/ 能够/ 非常/ 契合/ 三维/ 结构/ 的/ 特点/ ,/ 具有/ 各自/ 的/ 优势/ ./ 在/ 二维/ 片上/ 网络/ 中/ ,/ 树形/ 结构/ 是/ 一种/ 常用/ 的/ 拓扑/ 结构/ ,/ 根据/ 应用/ 需求/ ,/ 可/ 分为/ 蝶形/ 胖树/ 、/ 一般/ 胖树/ 和/ 遗传/ 胖树/ 等/ [/ 36/ ,/ 50/ -/ 51/ ]/ ./ Feero/ 等/ 人/ [/ 22/ ]/ 将/ 树形/ 结构/ 引入/ 到/ 三维/ 片上/ 网络/ ./ 这种/ 胖/ 树结构/ 通过/ 层次化/ 的/ 连接/ 具有/ 较/ 小/ 的/ 网络/ 直径/ ,/ 并且/ 能/ 达到/ 非常/ 高/ 的/ 性能/ 提升/ ./ 然而/ 这种/ 设计/ 存在/ 的/ 缺点/ 是/ 后/ 端/ 设计/ 较为/ 复杂/ 且/ 温度控制/ 不够/ 理想/ ./ De/ -/ Brujin/ 图是/ 一种/ 直径/ 小/ 、/ 路由/ 简单/ 且/ 具有/ 容错/ 等/ 特性/ 的/ 网络拓扑/ ,/ 为了/ 获得/ 简单/ 、/ 可靠/ 、/ 吞吐/ 率高/ 与/ 延时/ 短/ 等/ 优势/ ,/ 该/ 拓扑/ 首先/ 被/ 应用/ 在/ 二维/ 片上/ 网络/ [/ 52/ ]/ ./ 电子科技/ 大学/ 的/ Chen/ 等/ 人/ [/ 25/ ]/ 设计/ 了/ 一种/ 在/ 水平面/ 和/ 垂直/ 平面/ 上均/ 采用/ De/ -/ Brujin/ 图/ 作为/ 拓扑/ 结构/ 的/ 三维/ 片上/ 网络/ ./ 在/ 大多数/ 情况/ 下/ ,/ 基于/ De/ -/ Brujin/ 图/ 的/ 三维/ 片上/ 网络结构/ 能够/ 同时/ 取得/ 延时/ 和/ 功耗/ 的/ 最佳/ 性能/ ,/ 可以/ 解决/ 由于/ 网络/ 规模/ 增大/ 导致/ 延迟/ 增大/ 的/ 问题/ ,/ 具有/ 良好/ 的/ 可扩展性/ ./ 该/ 方法/ 的/ 缺点/ 是/ 性能/ 效率/ 不高/ ,/ 传统/ 的/ 一些/ 布局/ 布线/ 算法/ 无法/ 复用/ ,/ 且/ 对/ 节点/ 分布/ 也/ 有/ 要求/ ./ 二维/ 蜂巢/ 结构/ [/ 53/ ]/ 相比/ 于/ 传统/ 的/ 矩形/ Mesh/ 或/ Torus/ 结构/ ,/ 可/ 降低/ 大约/ 40/ %/ 的/ 网络/ 开销/ ./ 芬兰/ 图部/ Cache/ 一致性/ 通信/ 特别/ 频繁/ ,/ 故/ 保留/ Mesh/ 结构/ ,/ 而/ 在/ Cache/ 层则/ 采用/ 长/ 连线/ 的/ 方式/ ./ 如图/ 5/ (/ b/ )/ 所示/ ,/ 采用/ 传统/ 三维/ Mesh/ 结构/ 从/ A/ 节点/ 传送/ 消息/ 到/ B/ 节点/ 需要/ 7/ 拍/ ,/ 而/ 如图/ 5/ (/ c/ )/ 所示/ ,/ 若/ 采用/ 长/ 连线/ ,/ 则/ 从/ 节点/ A/ 到/ 节点/ B/ 再/ 到/ 节点/ B/ 只/ 需要/ 3/ 跳/ ,/ 而/ 该/ 拓扑/ 结构/ 是/ 由/ 整数/ 线性规划/ (/ ILP/ )/ 根据/ 目标/ 函数/ 和/ 约束/ 函数/ 计算/ 得出/ ./ 由于/ 该/ 方法/ 只/ 适合/ 36/ 个/ 节点/ 以下/ 的/ 网络/ ,/ 作者/ 还/ 提出/ 了/ 两个/ 扩展/ 规模/ 的/ 方法/ ./ 这种/ 设计/ 降低/ 了/ 网络/ 直径/ 且/ 具有/ 较/ 高/ 的/ 性能/ ,/ 但是/ 不规则/ 的/ 长/ 连线/ 设计/ 也/ 增加/ 了/ 布局/ 复杂度/ ./ 尔库/ 大学/ 的/ Yin/ 等/ 人/ [/ 26/ ]/ 根据/ 蜂巢/ 片上/ 网络/ 的/ 这/ 一/ 特点/ ,/ 提出/ 了/ 图/ 6/ 的/ 三维/ 蜂巢/ 片上/ 网络结构/ ,/ 同时/ 设计/ 了/ 一种/ 死锁/ 避免/ 路由/ 算法/ ./ 该/ 设计/ 实际上/ 是从/ 二维/ 片上/ 网络/ 延伸/ 到/ 三维/ 片上/ 网络/ ./ 增加/ 了/ 维度/ 后/ ,/ 在/ 水平/ 方向/ 上/ 依然/ 保持/ 蜂巢/ 拓扑/ 结构/ ;/ 在/ 垂直/ 方向/ 上/ ,/ 为/ 控制/ 路由/ 节点/ 的/ 阶/ ,/ 作者/ 将/ 节点/ 分为/ 奇数/ 节点/ 和/ 偶数/ 节点/ 两类/ ,/ 一类/ 只有/ 向上/ 的/ 连线/ ,/ 一类/ 只有/ 向下/ 的/ 连线/ ,/ 通过/ 该/ 方法/ 进一步/ 降低/ 硬件/ 开销/ 和/ 功耗/ ./ 然而/ 这种/ 结构/ 也/ 无法/ 采用/ 传统/ 的/ 布局/ 布线/ 算法/ ,/ 同时/ 平均/ 节点/ 跳数/ 较/ 高/ ,/ 影响/ 性能/ ./ 上述/ 拓扑/ 结构/ 都/ 各具/ 特点/ ,/ 基于/ Mesh/ 的/ 三维/ 片上/ 网络/ 形状/ 规则/ ,/ 布局/ 布线/ 相对来说/ 难度/ 不/ 大/ ,/ 非常适合/ 于/ 商业化/ 产品/ 的/ 应用/ ,/ 但是/ 这/ 一类/ 拓扑/ 结构/ 又/ Page6/ 均/ 存在/ 网络延时/ 大/ 、/ 功耗/ 开销/ 大/ 等/ 问题/ ./ 其他/ 基于/ 非/ Mesh/ 结构/ 的/ 三维/ 片上/ 网络/ ,/ 如低/ 直径/ 低阶/ 网络/ 、/ 基于/ De/ -/ Brujin/ 图/ 的/ 网络结构/ 虽然/ 性能/ 高/ 、/ 直径/ 小/ ,/ 但/ 又/ 存在/ 芯片/ 布局/ 布线/ 复杂/ 、/ 实现/ 难度/ 较大/ 等/ 问题/ ./ 因此/ ,/ 未来/ 三维/ 片上/ 网络拓扑/ 结构设计/ 将/ 面向/ 可扩展性/ 强/ 、/ 布局/ 布线/ 简单/ 、/ 充分利用/ 垂直/ 空间/ 等/ 方向/ 发展/ ./ 3.2/ 路由/ 算法/ 路由/ 算法/ 定义/ 了/ 一个/ 消息/ 从源/ 节点/ 到/ 目的/ 节点/ 的/ 路径/ ,/ 分为/ 确定性/ 路由/ 、/ 健忘/ 路由/ 和/ 自/ 适应/ 路由/ 3/ 类/ ,/ 根据/ 传输/ 路径/ 的/ 长度/ 也/ 被/ 划分/ 为/ 最/ 短路/ 由/ 或非/ 最/ 短路/ 由/ ./ 路由/ 算法/ 的/ 性能/ 对于/ 网络/ 吞吐/ 率/ 和/ 延迟/ 有着/ 直接/ 影响/ ,/ 越好/ 的/ 路由/ 算法/ 越能/ 均衡/ 网络/ 负载/ ./ 表/ 1/ 三维/ 路由/ 算法/ 路由/ 思路/ Z/ -/ XY/ →/ X/ -/ Z/ -/ XY/ 根据/ 网络/ 状态/ 自/ 适应/ Z/ -/ XY/ -/ Z/ // Z/ -/ YX/ -/ Z/ 分/ 8/ 个/ 象限/ ,/ 功耗/ 自/ 适应/ AFRA/ 是/ 一种/ 低/ 开销/ 的/ 三维/ Mesh/ 片上/ 网络/ 容错/ 路由/ 算法/ [/ 31/ ]/ ,/ 主要/ 针对/ 竖直/ TSV/ 出现/ 的/ 永久性/ 错误/ 而/ 设计/ ./ 该/ 路由/ 算法/ 在/ 默认/ 情况/ 下/ 采用/ Z/ -/ XY/ 算法/ ,/ 若/ Z/ -/ XY/ 路径/ 的/ Z/ 方向/ 出现/ 了/ 永久性/ 错误/ ,/ 则/ 采用/ X/ -/ Z/ -/ XY/ 路由/ 算法/ ./ 第/ 1/ 步/ ,/ 消息/ 将/ 先/ 从源/ 节点/ 传递/ 到/ X/ 方向/ 最短/ 路径/ 上/ 距离/ 源/ 节点/ 最近/ 的/ 逃脱/ 节点/ 上/ ,/ 第/ 2/ 步/ ,/ 从/ 该/ 逃脱/ 节点/ 再/ 经过/ ZXY/ 路由/ 送到/ 目的/ 节点/ ./ 若/ 在/ 最/ 短/ 路径/ 上/ 没有/ 合适/ 的/ 逃脱/ 节点/ ,/ 则/ 会/ 选择/ 最小/ ID/ 号/ 的/ 节点/ 作为/ 逃脱/ 节点/ ./ 在/ 死锁/ 避免/ 机制/ 上/ ,/ 该文/ 证明/ 了/ 当/ 所有/ Z/ 方向/ 的/ 链路/ 错误/ 是/ 同/ 向/ 的/ ,/ 则/ 无需/ 虚/ 通道/ 避免/ 死锁/ ./ 该/ 算法/ 是/ 对/ Z/ -/ XY/ 算法/ 的/ 改进/ ,/ 开销/ 较/ 低且/ 可靠性/ 较/ 高/ ,/ 并/ 具有/ 较/ 好/ 的/ 性能/ ./ 该/ 算法/ 的/ 局限性/ 在于/ 只能/ 支持/ 竖直/ 方向/ 的/ 容错/ ,/ 且/ 全是/ 同向/ 错误/ 时才/ 无需/ 虚/ 通道/ ./ 为/ 解决/ 三维/ 片上/ 网络/ 的/ 拥塞/ 问题/ ,/ 缓解/ 热效应/ ,/ 图/ 7/ 层/ 复用/ 网络结构/ 示意图/ (/ Rk/ 为/ 第/ k/ 层/ 路由器/ 对应/ 的/ IP/ 模块/ )/ 对于/ 三维/ 片上/ 网络/ 的/ 路由/ 算法/ ,/ 要求/ 其/ 满足/ 简单/ 、/ 高性能/ 和/ 鲁棒性/ 三个/ 关键/ 目标/ ./ 同时/ ,/ 随着/ 三维/ 片上/ 网络/ 设计/ 规模/ 的/ 不断/ 增大/ ,/ 系统/ 出现/ 错误/ 的/ 概率/ 也/ 相应/ 提高/ ,/ 需要/ 更/ 多/ 的/ 容错/ 设计/ 来/ 解决/ 这些/ 问题/ 以/ 提高/ 可靠性/ ./ 此外/ ,/ 三维/ 集成电路/ 对于/ 异构/ 体系结构/ 的/ 支持/ ,/ 使得/ 片上/ 网络通信/ 流量/ 形成/ 一定/ 的/ 特征/ ,/ 如何/ 通过/ 路由/ 算法/ 均衡/ 网络/ 负载/ ,/ 提高/ 带宽/ 利用率/ 并/ 降低功耗/ 也/ 成为/ 路由/ 算法/ 研究/ 的/ 一大/ 热点/ ./ 现有/ 的/ 路由/ 算法/ 研究/ 主要/ 集中/ 在/ 这/ 两/ 方面/ ,/ 根据/ 路由/ 算法/ 的/ 分类/ 分别/ 介绍/ 容错/ 路由/ 、/ 全局/ 流量/ 均衡/ 、/ 层间流/ 量/ 均衡/ 和/ 低功耗/ 路由/ 4/ 个/ 路由/ 算法/ ,/ 其/ 路由/ 思路/ 和/ 功能/ 特点/ 见表/ 1/ ./ Chang/ 等/ 人/ [/ 32/ ]/ 提出/ 了/ 一种/ 流量/ 平衡/ 的/ 路由/ 策略/ ./ 该/ 路由/ 策略/ 包括/ 一个/ 高级/ 临时/ 转接/ 路由/ 算法/ ,/ 该/ 算法/ 主要/ 采用/ 3/ 个/ 方法/ :/ (/ 1/ )/ 收集/ 网络/ 中/ 的/ 拥塞/ 和/ 节流/ 信息/ 以/ 均衡/ 负载/ ;/ (/ 2/ )/ 减少/ 路径/ 复杂度/ 以/ 降低/ 平均/ 延迟/ ;/ (/ 3/ )/ 调整/ 路由/ 路径/ 来/ 散热/ ./ 这种/ 动态/ 的/ 路径/ 选择/ 算法/ 简单/ 高效/ ,/ 不仅/ 具有/ 较/ 低/ 的/ 延迟/ ,/ 同时/ 有利于/ 网络/ 的/ 流量/ 均衡/ 以及/ 热/ 管理/ ./ 但是/ 在/ 随机/ 流量/ 模型/ 下/ ,/ 部分/ 节点/ 具有/ 非常/ 高/ 的/ 通信/ 频率/ ,/ 性能/ 并/ 不好/ ./ 当/ 三维/ 片上/ 网络/ 的/ 各层/ 负载/ 不/ 均衡/ 时/ ,/ 效率/ 非常低/ ./ 因此/ ,/ Ramanujam/ 等/ 人/ [/ 33/ ]/ 提出/ 了/ 一种/ 多层/ 复用/ 三维/ 片上/ 网络结构/ ,/ 这种/ 结构/ 其实/ 是/ 一种/ Z/ -/ XY/ -/ Z/ 或/ Z/ -/ YX/ -/ Z/ 的/ 健忘/ 路由/ 算法/ ,/ 可/ 有效/ 实现/ 各层/ 的/ 负载/ 均衡/ ./ 该/ 文献/ 用/ 一种/ 输入/ 分层/ 与/ 输出/ 层/ 恢复/ 的/ 结构/ 替代/ 传统/ 的/ 一层/ 一跳/ 结构/ ./ 如图/ 7/ 所示/ ,/ 报文/ 从节/ Page7/ 点/ 注入/ 后/ ,/ 首先/ 进入/ 输入/ 分层/ 阶段/ ,/ 该/ 输入/ 分层/ 结构/ 连接/ 对应/ 于/ 该/ 位置/ 的/ 各层/ 的/ 路由器/ ,/ 根据/ 路由器/ 报文/ 计数器/ 状态/ ,/ 将/ 报文/ 随机/ 分配/ 到/ 负载/ 较轻/ 的/ 一层/ ,/ 通过/ 维序/ 路由/ 到达/ 目的/ 节点/ 对应/ 的/ 该层/ 节点/ ,/ 再/ 进入/ 输出/ 层/ 恢复/ 结构/ ,/ 由/ 交叉开关/ 分配/ 到/ 目标/ 节点/ 所在/ 层/ 的/ 路由器/ ./ 虽然/ 多层/ 复用/ 三维/ 片上/ 网络结构/ 具有/ 负载/ 均衡/ 和/ 路由器/ 结构/ 简单/ 等/ 优点/ ,/ 但/ 该/ 结构/ 仍/ 存在/ 两个/ 缺点/ ,/ 一是/ 在/ 竖直/ 方向/ 上/ 需要/ 两跳/ 通过/ ,/ 二是/ 增加/ 的/ 输入/ 分层/ 和/ 输出/ 层/ 恢复/ 结构/ 是/ 两个/ 4/ ×/ 4/ 的/ 交叉开关/ ,/ 每次/ 报文/ 通信/ 需要/ 多/ 经过/ 两个/ 交叉开关/ ,/ 降低/ 了/ 性能/ ./ 在/ 控制/ 网络/ 功耗/ 并/ 避免/ 死锁/ 方面/ ,/ 南京大学/ 的/ 虞潇/ 等/ 人/ [/ 34/ ]/ 提出/ 一种/ 面向/ 功耗/ 免/ 死锁/ 三维/ 全/ 动态/ 路由/ 算法/ ./ 该/ 算法/ 将/ 二维/ 平面/ 上/ 的/ 奇偶/ 转弯/ 模型/ 扩展/ 到/ 三维/ 结构/ ,/ 将/ 路由/ 空间/ 划分/ 为/ 8/ 个/ 象限/ ,/ 在/ 每个/ 象限/ 选取/ 对应/ 的/ 路由/ 策略/ ,/ 即先/ 走/ 不同/ 的/ 轴/ ,/ 到达/ 对应/ 的/ 象限/ 后/ 采用/ 自/ 适应/ 路由/ ,/ 一方面/ 避免/ 互相/ 之间/ 的/ 打扰/ ;/ 另一方面/ 也/ 避免/ 回路/ 的/ 产生/ 从而/ 避免/ 死锁/ ./ 该/ 算法/ 还/ 通过/ 比较/ 三维空间/ 中/ 6/ 个/ 方向/ 的/ 功耗/ 指标/ 选择/ 节点/ 功耗/ 较/ 小/ 的/ 路径/ 从而/ 降低功耗/ ,/ 并/ 使/ 报文/ 分布/ 均匀/ ./ 与/ 传统/ 的/ Z/ -/ XY/ 算法/ 、/ 静态/ XYZ/ 算法/ 和/ TTAR/ [/ 54/ ]/ 算法/ 相比/ ,/ 该/ 设计/ 在/ 功耗/ 方面/ 显著/ 下降/ ,/ 但是/ 在/ 平均/ 延迟/ 和/ 网络/ 吞吐/ 率/ 等/ 性能/ 方面/ 却/ 略有/ 损失/ ./ 三维/ 片上/ 网络/ 的/ 路由/ 算法/ 已经/ 不仅/ 是/ 为了/ 将/ 消息/ 从源/ 节点/ 传输/ 到/ 目的/ 节点/ ,/ 它/ 还/ 能/ 发挥/ 容错/ 、/ 负载/ 均衡/ 等/ 功能性/ 的/ 作用/ ./ 三维/ 芯片/ 密度/ 增加/ ,/ 热效应/ 问题/ 严重/ ,/ 对于/ 芯片/ 可靠性/ 的/ 要求/ 更高/ ,/ 同时/ 三维/ 片上/ 网络/ 相对/ 于/ 二维/ 片上/ 网络/ 在/ 路径/ 多样性/ 上/ 有/ 了/ 很大/ 提升/ ,/ 有/ 更/ 多/ 的/ 空间/ 和/ 路径/ 来/ 实现/ 容错/ 、/ 负载/ 均衡/ 的/ 功能/ ./ 因此/ ,/ 未来/ 三维/ 片上/ 网络/ 路由/ 算法/ 的/ 研究/ 应/ 面向/ 多功能/ 应用/ 算法/ 研究/ ,/ 提高/ 可靠性/ 和/ 降低功耗/ 将/ 与/ 提高/ 性能/ 一样/ 重要/ ./ 3.3/ 路由器/ 微结构/ 传统/ 的/ 路由器/ 微结构/ 主要/ 包括/ 如下/ 模块/ :/ 注入/ 缓存/ 、/ 路由/ 计算/ 模块/ 、/ 虚/ 通道/ 分配器/ 、/ 交叉开关/ 分配器/ 、/ 交叉开关/ 以及/ 输出/ 单元/ 等/ ./ 路由器/ 的/ 功能/ 主要/ 是/ 通过/ 流水线/ 来/ 提高/ 吞吐/ 率/ ./ 在/ 片/ 上/ 网络/ 中/ 每/ 一个/ 路由器/ 延迟/ 占/ 了/ 总/ 的/ 通信/ 延迟/ 的/ 很大/ 一部分/ ,/ 需要/ 通过/ 减少/ 路由器/ 流水线/ 段来/ 降低/ 延迟/ 并/ 提高/ 吞吐/ 率/ ./ 由于/ 三维/ 片上/ 网络/ 的/ 规模/ 增大/ ,/ 维数/ 增加/ ,/ 无论是/ 路由器/ 端口/ 数量/ 还是/ 交换/ 开关/ 的/ 复杂度/ 都/ 不可避免/ 地/ 增加/ ,/ 因此/ ,/ 三维/ 片上/ 网络/ 的/ 路由器/ 微结构/ 研究/ 重点/ 是/ 降低/ 交叉开关/ 复杂度/ 等/ 方面/ ./ 图/ 8/ 显示/ 了/ 以/ 降低/ 开销/ 为/ 目的/ 的/ 三维/ 片上/ 网络/ 路由器/ 微结构/ 设计/ 方向/ ./ 现有/ 的/ 研究/ 一类/ 通过/ 三维/ 分解/ 降低/ 路由器/ 交叉开关/ 的/ 开销/ ;/ 一类/ 通过/ 减少/ 端口/ 的/ 数量/ 来/ 降低/ 路由器/ 开销/ ;/ 另一类/ 则/ 通过/ 层次化/ 设计/ 实现/ 三维/ 高阶/ Switch/ ./ 文献/ [/ 20/ ]/ 考虑/ 一种/ 纯/ 三维/ 交叉开关/ 的/ 实现/ ,/ 即将/ 交叉开关/ 三维/ 化/ ./ 如图/ 9/ 所示/ ,/ 采用/ 6/ 个/ 晶体管/ 将/ 交叉开关/ 的/ 连接点/ 向/ 三维/ 扩展/ ,/ 这种/ 连接点/ 称为/ 连接盒/ ./ 垂直/ 链路/ 嵌入/ 到/ 交叉开关/ 中/ ,/ 不/ 需要/ 额外/ 的/ 物理/ 链路/ ,/ 性能/ 非常/ 好/ ./ 例如/ 一个/ 报文/ 从/ 底层/ 的/ 东/ 输入/ 端口/ 传播/ 到/ 顶层/ 的/ 南/ 输出/ 端口/ 仅/ 需要/ 一拍/ ./ 尽管/ 性能/ 非常/ 高/ ,/ 连通性/ 非常/ 好/ ,/ 但/ 这种/ 设计/ 致命/ 的/ 缺点/ 是/ 在/ 交叉开关/ 的/ 连接点/ 增加/ 了/ 大量/ 垂直/ 链路/ ,/ 造成/ 了/ 严重/ 的/ 路径/ 冗余/ 和/ 复杂度/ 开销/ ./ 对于/ 一个/ 位/ 宽/ 为/ 1/ 的/ 完整/ 三维/ 交叉开关/ ,/ 需要/ 25/ 个/ 连接盒/ ,/ 由于/ 每个/ 连接盒/ 需要/ 6/ 个/ 晶体管/ ,/ 则/ 一个/ 交叉开关/ 需要/ 150/ 个/ 晶体管/ ./ 控制/ 这些/ 晶体管/ 又/ 需要/ 至少/ 150/ 个/ 控制/ 信号/ ,/ 一个/ 4/ ×/ 4/ ×/ 4/ 的/ 三维/ 片上/ 网络结构/ ,/ 则/ 需要/ 接近/ 10000/ 个/ 晶体管/ ./ 同时/ ,/ 其/ 路径/ 复杂度/ 又/ 严重/ 过剩/ ,/ 在/ 真实/ 应用程序/ 中/ ,/ 这些/ 连接/ 的/ 利用率/ 非常低/ ./ 因此/ ,/ 对于/ 延迟/ 和/ 面积/ 约束/ 非常/ 严格/ 的/ 片/ 上/ 网络/ 路由器/ 来说/ ,/ 这种/ 设计/ 是/ 不/ 现实/ 的/ ./ DimDe/ 路由器/ 微结构/ [/ 20/ ]/ 是/ 对/ 纯/ 三维/ 交叉开关/ 的/ 改进/ ./ 由于/ 纯/ 三维/ 交叉开关/ 开销/ 过大/ ,/ 考虑/ 将/ 其/ 化简/ 成/ 三个/ 模块/ ,/ 即将/ XYZ/ 三个/ 维度/ 分解/ 成行/ 模块/ 、/ 列/ 模块/ 和/ 纵/ 模块/ ,/ 分别/ 仲裁/ ./ 如图/ 10/ 所示/ ,/ 该/ 设计/ 将/ 5/ ×/ 5/ 的/ 交叉开关/ 简化/ 为行/ 模块/ 和/ 列/ 模块/ 的/ 两个/ 4/ ×/ 2/ 的/ 交叉开关/ ,/ 尽管/ 增加/ 了/ 交叉开关/ 的/ 数量/ ,/ 但/ 其/ 规模/ 依然/ 小于/ 一个/ 单体/ 的/ 5/ ×/ 5/ 交叉开关/ ./ 在/ 仲裁/ 设计/ 上/ ,/ 对于/ 一个/ XYZ/ 维序/ 路由/ 算法/ ,/ 第/ 1/ 步先/ 仲裁/ 单层/ 本地/ 报文/ ,/ 需要/ 传播/ 到/ 其他/ 层/ 的/ 报文/ 胜出/ ,/ 第/ 2/ 步/ Page8/ 将/ 这些/ 纵向/ 传播/ 的/ 所有/ 报文/ 进行/ 全局/ 仲裁/ ,/ 该/ 仲裁/ 器/ 的/ 设计/ 是/ 为了/ 满足/ 更/ 多/ 的/ 并行/ 通信/ ./ DimDe/ 三维/ 片上/ 网络结构/ 相对/ 于/ 总线结构/ 提供/ 了/ 较/ 高/ 的/ 全局/ 带宽/ ,/ 相对/ 于/ 纯/ 三维/ 片上/ 网络结构/ 降低/ 了/ 大量/ 硬件/ 开销/ ./ 图/ 11LastZ/ 结构/ 的/ 特点/ 在/ 三维/ 高阶/ 路由器/ 的/ 研究/ 方面/ ,/ 密歇根/ 大学/ 的/ Blaauw/ 领导/ 的/ 研究/ 小组/ 提出/ 了/ 一种/ 支持/ 单/ 周期/ 仲裁/ 的/ 高阶/ 三维/ 集成/ 的/ Hi/ -/ RiseSwitch/ [/ 44/ ]/ ./ 该/ 高阶/ Switch/ 基于/ 2DSwizzle/ -/ Switch/ [/ 55/ ]/ 和/ 三维/ 折叠/ Switch/ 结构/ [/ 56/ ]/ 设计/ ,/ 一方面/ 将/ 仲裁/ 逻辑/ 集成/ 到/ 交叉开关/ 的/ 交叉点/ 中/ ,/ 使得/ 仲裁/ 器/ 复用/ 数据通路/ ,/ 降低/ 开销/ ;/ 另一方面/ 优化/ 三维/ 折叠/ Switch/ 结构/ ,/ 如图/ 12/ 所示/ 将/ 其/ 划分/ 为/ 层次化/ 的/ Switch/ ,/ 本地/ Switch/ 负责/ 每层/ 的/ 报文/ 分配/ ,/ 层间/ Switch/ 负责/ 层间/ 的/ 报文/ 分配/ ./ 在/ 设计/ 上/ 关注/ 两个/ 点/ ,/ 一个/ 是/ 降低/ 垂直/ 通路/ 的/ 数量/ ,/ 控制/ TSV/ 数量/ 并/ 降低/ 开销/ ;/ 另/ 一个/ 是/ 层次化/ 结构/ 带来/ 的/ 分配/ 不/ 公平/ 问题/ ,/ 设计/ 了/ 一种/ 基于/ 类/ 的/ 最近/ 最少/ 分配/ 仲裁/ 策略/ (/ CLRG/ )/ ,/ 为/ 每个/ 输入/ 配置/ 一个/ 三/ 优先级/ 的/ 计数器/ 来/ 实现/ ./ 该/ Switch/ 支持/ 64/ 阶/ 4/ 层/ 结构/ 的/ 实现/ ,/ 相对/ 于/ 二维/ 设计/ 和/ 传统/ 三维/ 折叠/ Switch/ 有/ 更/ 高/ 的/ 性能/ 和/ 更/ 低/ 的/ 开销/ ./ Hi/ -/ RiseSwitch/ 设计/ 在/ LastZ/ 路由器/ 微结构/ [/ 42/ -/ 43/ ]/ 是/ 对片/ 上/ 网络/ -/ 总线/ 混合结构/ 的/ 路由器/ 的/ 改进/ ,/ 减少/ 端口/ 数量/ 以/ 达到/ 降低/ 路由器/ 开销/ 的/ 目的/ ,/ 其/ 结构/ 如图/ 11/ 所示/ ./ 该/ 结构/ 基于/ LastZ/ 路由/ 规则/ ,/ 即/ 非层/ 内/ 的/ 报文/ 传播/ ,/ 最后/ 一跳/ 必须/ 是/ 竖直/ 方向/ 上/ 的/ ./ 因此/ ,/ 作者/ 根据/ 这个/ 规则/ 做/ 了/ 两点/ 结构设计/ :/ (/ 1/ )/ 去掉/ 一个/ 输入/ 端口/ ,/ 将/ 6/ ×/ 6/ 的/ 路由器/ 简化/ 为/ 5/ ×/ 6/ 的/ 路由器/ 结构/ ;/ (/ 2/ )/ 为/ 每个/ 处理/ 核/ 单元/ 设计/ 一个/ 外/ 包/ 结构/ ,/ 该/ 结构/ 由/ 一个/ 有限/ 状态机/ 和/ 一个/ 两路/ 选择器/ 组成/ ./ 通过/ 这样/ 的/ 结构设计/ ,/ 使得/ 报文/ 在/ 最后/ 一跳/ 直接/ 从/ dTDMA/ 总线/ 跳/ 到/ 处理/ 核/ ,/ 而/ 无需/ 经过/ 最后/ 一个/ 路由器/ ./ 这种/ 设计/ 相对/ 于/ 前面/ 介绍/ 的/ 三维/ 片上/ 网络/ 和/ 总线/ 混合结构/ ,/ 具有/ 较/ 小/ 的/ 面积/ 开销/ ,/ 平均/ 节点/ 跳数/ 降低/ 了/ 一/ 跳/ ,/ 简化/ 的/ 路由器/ 结构/ 使得/ 路由器/ 可以/ 工作/ 在/ 更/ 高/ 的/ 频率/ ./ 虽然/ 一定/ 程度/ 上/ 缓解/ 了/ 总线/ 拥塞/ 问题/ ,/ 但/ 总线/ 无法/ 并行/ 通信/ 依然/ 是/ 这种/ 结构/ 的/ 瓶颈/ ,/ 导致/ 在/ 一些/ 特定/ 流量/ 模型/ 中/ 效率/ 降低/ ./ (/ N/ 为/ 端口/ 数目/ ,/ L/ 为/ 层数/ 、/ C/ 为/ 任意/ 两层/ 间/ 链路/ 数目/ )/ Page9Mesh/ 拓扑/ 结构/ 中/ 能/ 实现/ 支持/ 千核/ 的/ 超大规模/ 三维/ 结构/ ./ 该/ Switch/ 的/ 不足/ 是/ 垂直/ 链路/ 根据/ 输入/ 或/ 输出/ 分档/ ,/ 每个/ 输入/ 都/ 固定/ 到/ 一条/ 垂直/ 通道/ ,/ 当/ 多个/ 输入/ 竞争/ 该/ 通道/ 时/ 容易/ 拥塞/ ,/ 该/ 策略/ 不够/ 公平/ ,/ 仍/ 有/ 提升/ 空间/ ./ 现有/ 的/ 三维/ 片上/ 网络/ 路由器/ 微结构/ 研究/ 以/ 降低/ 硬件/ 开销/ 为/ 主要/ 目的/ ,/ 这是/ 由于/ 三维/ 结构/ 相对/ 于/ 二维/ 结构/ 性能/ 已经/ 有/ 了/ 很大/ 提升/ ,/ 而/ 三维/ 结构/ 面临/ 的/ 硬件/ 复杂度/ 、/ 热效应/ 等/ 问题/ 必须/ 以/ 降低/ 开销/ 作为/ 主要/ 解决/ 方式/ ./ 因此/ ,/ 未来/ 短期内/ 路由器/ 微结构/ 的/ 研究/ 将/ 依然/ 集中/ 于/ 实现/ 低/ 复杂度/ 低功耗/ 的/ 路由器/ 结构/ ./ 3.42/ ./ 5/ 维硅/ 中介/ 技术/ 硅/ 中介/ (/ Siliconinterposer/ )/ 技术/ 即/ 2.5/ 维/ 堆叠/ 图/ 132.5/ 维/ 堆叠/ 集成电路/ 如图/ 14/ (/ a/ )/ 所示/ ,/ 在/ 传统/ 的/ 2.5/ 维/ 堆叠/ 设计/ 中/ ,/ 只会/ 利用/ 一小部分/ 硅/ 中介/ 层/ 的/ 连线/ 资源/ ,/ 作为/ 相邻/ 部件/ 间/ 的/ 通信/ ./ 多伦多/ 大学/ 的/ Jerger/ 等/ 人/ [/ 35/ ]/ 开发利用/ 了/ 硅/ 中介/ 层/ 的/ 大量/ 未/ 用/ 资源/ ,/ 达到/ 性能/ 的/ 大幅/ 提升/ ./ 该/ 文献/ 提出/ 了/ 一种/ 如图/ 14/ (/ b/ )/ 所示/ 的/ 通用/ 方法/ 来/ 利用/ 硅/ 中介/ 层/ 的/ 连线/ 资源/ ,/ 使得/ 片内/ 通信/ 或片/ 间通信/ 均/ 可以/ 利用/ 硅/ 中介/ 层/ 的/ 连线/ 资源/ ./ 在/ 实现/ 细节/ 上/ 一方面/ 区分/ 访存/ 报文/ 和/ 一致性/ 消息报/ 文/ ,/ 使/ 之/ 分别/ 利用/ 不同/ 层/ 的/ 网络/ 进行/ 通信/ ,/ 另一方面/ 通过/ 负载/ 均衡/ 方法/ 和/ 快速/ 通路/ 合理/ 控制/ 并/ 均衡/ 了/ 网络流量/ ,/ 同时/ 还/ 降低/ 网络/ 直径/ ./ 该/ 方法/ 在/ 带来/ 非常/ 小/ 的/ 额外/ 资源/ 开销/ 的/ 同时/ 大幅度提高/ 了/ 性能/ ,/ 可以/ 有效/ 缓解/ 网络/ 拥塞/ ,/ 同时/ 大幅提高/ 了/ 等/ 分/ 带宽/ ./ 作者/ 还/ 提出/ 了/ 图/ 142.5/ 维片/ 上/ 网络/ 硅/ 中介/ 层/ 连线/ 资源/ 的/ 利用/ 技术/ 是/ 在/ 三维/ 堆叠/ 技术/ 尚未/ 成熟/ 前/ 的/ 一种/ 过渡/ 技术/ ,/ 相对来说/ 能/ 较/ 好/ 地/ 支持/ 现有/ 的/ 一些/ 设计/ 工具/ 和/ 设计/ 方法/ ,/ 目前/ 也/ 已/ 成为/ 三维/ 片上/ 网络/ 研究者/ 重点/ 关注/ 的/ 研究/ 方向/ ./ 如图/ 13/ 所示/ ,/ 2.5/ 维/ 集成电路/ 是/ 将/ 多个/ 同构/ 或/ 异构/ 的/ 部件/ 相邻/ 地/ 堆叠/ 在/ 硅/ 中介/ 层上/ ,/ 相邻/ 部件/ 之间/ 通过/ 硅/ 中介/ 层/ 进行/ 通信/ ./ 通过/ 2.5/ 维/ 堆叠/ 可以/ 大量/ 增加/ 存储容量/ ,/ 同时/ 避免/ 三维/ 堆叠/ 中/ 的/ 热效应/ ./ 现在/ 已经/ 出现/ 了/ 许多/ 商用/ 2.5/ 维/ 堆叠/ 产品/ [/ 57/ ]/ ./ 硅/ 中介/ 技术/ 的/ 研究/ 目前/ 依然/ 是/ 比较/ 新/ 的/ 方向/ ,/ 其/ 主要/ 研究/ 如何/ 利用/ 硅/ 中介/ 层/ 进行/ 通信/ ,/ 硅/ 中介/ 层/ 作为/ 多个/ 异构/ 部件/ 层/ 的/ 下/ 一层/ ,/ 负责/ 这些/ 部件/ 间/ 的/ 通信/ ./ 一些/ 拓扑/ 逻辑/ 在/ 各层/ 的/ 设计/ 方法/ 以及/ 报文/ 转发/ 策略/ ./ 该/ 文献/ 第一次/ 开发/ 了/ 硅/ 中介/ 层/ 的/ 设计/ 空间/ ,/ 许多/ 现有/ 的/ 技术/ 都/ 能/ 在/ 此/ 应用/ ,/ 以/ 达到/ 较/ 高/ 的/ 性能/ ,/ 具有/ 非常广阔/ 的/ 前景/ ./ 2.5/ 维片/ 上/ 网络/ 硅/ 中介/ 层/ 的/ 下/ 一步/ 研究/ 一方面/ 可以/ 从/ 结构/ 和/ 算法/ 设计/ 入手/ ,/ 对/ 硅/ 中介/ 层/ 拥塞/ 控制/ 、/ 容错/ 、/ 路由/ 算法/ 等/ 进行/ 深入研究/ ;/ 另一方面/ ,/ 可以/ 将/ 2.5/ 维片/ 上/ 网络/ 硅/ 中介/ 技术/ 应用/ 到/ 更/ 多/ 的/ 环境/ ,/ 例如/ CPU/ 、/ GPU/ 、/ 其他/ 硬件/ 加速器/ 以及/ DRAM/ 等/ 组合/ 的/ 环境/ 里/ ,/ 更好/ 地/ 实现/ 异构/ 集成/ ,/ 将/ 其/ 潜能/ 更/ 大地/ 挖掘/ 出来/ ./ 3.5/ 热/ 管理/ 热效应/ 不仅/ 是/ 三维/ 集成电路/ ,/ 同样/ 也/ 是/ 三维/ 片上/ 网络/ 所/ 面临/ 的/ 严峻/ 挑战/ ./ 在/ 二维/ 集成电路/ 或是/ 二维/ 片上/ 网络/ 中/ 热效应/ 并/ 不/ 明显/ ,/ 但/ 当/ 更/ 多/ 地/ 设备/ 器件/ 层/ 竖直/ 堆叠/ 在/ 一起/ 时/ ,/ 功耗/ 密度/ 和/ 热传导/ 路径/ 的/ 长度/ 均/ 增加/ ./ 高温/ 所/ 带来/ 的/ 问题/ 是/ 更长/ 的/ 传播/ 延迟/ 和/ 更/ 高/ 的/ 静态/ 功耗/ ./ 在/ 超出/ 芯片/ 工作/ 范围/ 的/ 温度/ 工作/ 可能/ 会/ 导致/ 错误/ 输出/ 和/ 可靠性/ 降低/ 等/ 问题/ ./ 此外/ ,/ 热效应/ 使得/ 散热/ 和/ 封装/ 成本/ 均/ 增加/ ./ 目前/ 对于/ 热效应/ 的/ 研究/ 也/ 非常/ 多/ ,/ 在/ 系统结构/ 层/ 的/ 研究/ 一方面/ 通/ Page10/ 过/ 结构设计/ 降低功耗/ 和/ 热/ 的/ 产生/ ,/ 另一方面/ 通过/ 路由/ 控制/ 热点/ 区域/ 报文/ 流向/ 消除/ 热点/ ,/ 平衡/ 通信量/ ./ “/ 国立/ ”/ 台湾大学/ 的/ Huang/ 等/ 人/ [/ 41/ ]/ 提出/ 了/ 一种/ 共享/ 路由器/ 的/ 三维/ 片上/ 网络/ 的/ 热/ 管理/ 结构设计/ ,/ 通过/ 降低/ 路由器/ 数量/ 来/ 降低/ 芯片/ 温度/ ,/ 解决/ 热效应/ 问题/ ./ 由于/ 远离/ 散热器/ 的/ m/ 层/ 路由器/ 即使/ 是/ 在/ 空闲/ 状态/ 仍然/ 会/ 产生/ 较大/ 的/ 静态/ 功耗/ ,/ 并/ 导致/ 热效应/ 的/ 问题/ ./ 作者/ 将/ 远离/ 散热器/ 的/ m/ 层/ 存储/ 和/ PE/ 模块/ 的/ 路由器/ 去掉/ ,/ 通过/ TSV/ 总线/ 将/ 这些/ 部件/ 与/ 其他/ N/ -/ m/ 层/ 的/ 路由器/ 相连/ ,/ 实现/ 路由器/ 共享/ ./ 该/ 策略/ 与/ 传统/ 三维/ 结构/ 相比/ ,/ 在/ 80/ 的/ 温度/ 约束/ 下/ 可/ 将/ 报文/ 接收/ 率/ 提高/ 两倍/ ,/ 并/ 节省/ 13.4/ %/ 的/ 功耗/ 开销/ ./ 在/ 热效应/ 严重/ 的/ 三维/ 芯片/ 中/ ,/ 温度/ 每/ 升高/ 10/ ,/ 连线/ 延迟/ 将/ 增加/ 大约/ 5/ %/ ,/ 而漏/ 电流/ 将/ 呈/ 指数/ 增长/ ./ 宾夕法尼亚州/ 立/ 大学/ 的/ Addo/ -/ Quaye/ [/ 39/ ]/ 提出/ 采用/ 遗传算法/ 来/ 进行/ 热/ 和/ 通信/ 感知/ 的/ 三维/ 片上/ 网络应用/ 任务/ 的/ 映射/ 和/ 布局/ ./ 相比/ 于/ 随机/ 映射/ 布局/ 方法/ ,/ 该/ 方法/ 热/ 管理/ 效果/ 较/ 好/ ,/ 明显降低/ 了/ 系统/ 通信量/ ./ 因此/ ,/ 功耗/ 和/ 温度/ 的/ 增加/ 都/ 得到/ 直接/ 缓解/ ,/ 对/ 三维/ 片上/ 网络/ 性能/ 可靠性/ 有着/ 直接/ 影响/ ./ 高温/ 给/ 系统/ 性能/ 、/ 功耗/ 、/ 可靠性/ 和/ 开销/ 等/ 带来/ 了/ 一些/ 不可避免/ 的/ 问题/ ,/ 针对/ 三维/ 片上/ 网络/ 的/ 热效应/ 这一/ 问题/ ,/ Chao/ 等/ 人/ 在/ 文献/ [/ 40/ ]/ 提出/ 了/ 一个三维/ 片上/ 网络流量/ 和/ 热/ 感知/ 的/ 实时/ 热/ 管理策略/ ./ 该/ 策略/ 包括/ 两个/ 部分/ :/ (/ 1/ )/ 主动/ 向下/ 路由/ 策略/ ;/ (/ 2/ )/ 垂直/ 反馈/ 节流/ 策略/ ./ 主动/ 向下/ 路由/ 策略/ 是/ 一种/ 流量/ 感知/ 策略/ ,/ 将/ 部分/ 流量/ 迁移/ 到/ 底层/ ,/ 靠近/ 散热器/ 的/ 同时/ ,/ 分散/ 拥塞/ 流量/ ./ 垂直/ 反馈/ 节流/ 策略/ 则/ 是/ 一种/ 热/ 感知/ 策略/ ,/ 将/ 过热/ 的/ 路由器/ 节流/ 以/ 提升/ 网络/ 可靠性/ ,/ 但/ 该/ 策略/ 对/ 三维/ 片上/ 网络/ 的/ 性能/ 有/ 一定/ 的/ 影响/ ./ 热/ 管理/ 的/ 研究/ 在/ 二维/ 片上/ 网络/ 研究/ 中/ 就/ 被/ 提出/ ,/ 由于/ 堆叠/ 散热/ 困难/ ,/ 在/ 三维/ 片上/ 网络/ 中热/ 管理/ 的/ 重要性/ 凸现/ 出来/ ./ 对/ 热/ 管理/ 的/ 研究/ 一方面/ 可以/ 缓解/ 热效应/ 的/ 问题/ ;/ 另一方面/ 也/ 能/ 提高/ 系统可靠性/ ./ 目前/ 对于/ 三维/ 片上/ 网络/ 热/ 管理/ 的/ 研究/ 主要/ 在/ 系统/ 层/ ,/ 通过/ 全局/ 策略/ 进行/ 控制/ ,/ 未来/ 热/ 管理/ 的/ 研究/ 还/ 将/ 更/ 多/ 地面/ 向/ 微结构/ 层/ 和/ 电路/ 层/ ,/ 从/ 底层/ 缓解/ 和/ 消除/ 热效应/ 问题/ ./ 3.6/ TSV/ 设计/ 优化/ 三维/ 堆叠/ 垂直/ 互连/ 的/ 几种/ 技术/ 中/ ,/ TSV/ 最有/ 潜力/ 提供/ 最大/ 的/ 连接/ 密度/ ./ TSV/ 连接/ 技术/ 并/ 不/ 限制/ 芯片/ 堆叠/ 的/ 数量/ ,/ 但/ 堆叠/ 后/ 的/ 热效应/ 和/ 产能/ 是/ 制约/ 其/ 发展/ 的/ 关键因素/ ./ 如图/ 15/ 所示/ ,/ TSV/ 连接/ 技术/ 可以/ 用/ 在/ Bulk/ 工艺/ 或/ SOI/ 工艺/ 下/ ,/ SOI/ 相对/ 于/ Bulk/ 工艺/ 具有/ 相对/ 更/ 小/ 的/ 垂直/ 中心/ 距/ (/ VerticalPitch/ )/ ./ TSV/ 技术/ 的/ 优势/ 非常/ 多/ ,/ 然而/ 也/ 存在/ 一些/ 缺点/ ,/ 包括/ 面积/ 开销/ 大/ 、/ TSV/ 产能/ 较/ 低/ 、/ 寄生电容/ 问题/ 、/ 路由/ 拥塞/ 问题/ 等/ ./ 目前/ 在/ 三维/ 片上/ 网络/ 垂直/ 互连/ 研究/ 领域/ ,/ 对于/ TSV/ 连接/ 技术/ 的/ 研究/ 和/ 发掘/ 最为/ 活跃/ ,/ 主要/ 目的/ 是/ 提高/ TSV/ 可靠性/ ,/ 减少/ 引脚/ 数量/ 和/ 面积/ 以/ 控制/ 通孔/ 周围/ 的/ 应力/ 问题/ ./ 对于/ 竖直/ 方向/ 的/ TSV/ ,/ 竖直/ 连接/ 的/ 引脚/ 面积/ 对于/ 垂直/ 互连/ 的/ 开销/ 影响/ 很大/ ,/ 文献/ [/ 46/ ]/ 提出/ 了/ 一种/ 竖直/ TSV/ 连接/ 的/ 串行/ 通信/ 方法/ 以/ 减少/ TSV/ 数量/ ./ 该/ 串行/ 通信/ 方法/ 基于/ 移位/ 寄存器/ ,/ 由/ 一个/ 串行/ 发射器/ 和/ 一个/ 串行/ 接收器/ 组成/ ./ 数据/ 通过/ 一条/ 串行/ 传播/ 通路/ 进行/ 传播/ ./ 作者/ 测试/ 了/ 不同/ 的/ 串行/ 程度/ 对/ 性能/ 的/ 影响/ ,/ 在/ 41/ 或/ 21/ 的/ 串行/ 程度/ 下/ 较为/ 实际/ ,/ 即/ 采用/ 4/ 条/ 或/ 2/ 条/ 串行/ 传播/ 通路/ 传播/ 数据/ ./ 在/ 这种/ 串行/ 程度/ 下/ 性能/ 损失/ 和/ 功耗/ 开销/ 都/ 较/ 小/ ,/ 引脚/ 面积/ 可/ 大幅/ 减少/ ./ 该/ 设计/ 使得/ 竖直/ 方向/ 的/ 热/ TSV/ 分布/ 更为/ 合理/ ,/ 峰值/ 温度/ 也/ 相应/ 降低/ ,/ 节省/ 的/ 空间/ 方便/ 了/ 芯片/ 核/ 的/ 布局/ 规划/ ./ 但/ 这种/ 设计/ 的/ 缺点/ 是/ 需要/ 增加/ 逻辑/ 复杂度/ 完成/ 串行/ 通信/ ,/ 且/ 对/ 性能/ 有所/ 影响/ ./ 文献/ [/ 47/ ]/ 也/ 通过/ 减少/ 垂直/ TSV/ 连接/ 的/ 引脚/ 数量/ ,/ 来/ 减少/ 面积/ 和/ 热/ 功耗/ ,/ 该/ 文献/ 作者/ 提出/ 了/ 一种/ 三维/ 片上/ 网络结构/ BBVC/ ,/ 即/ 一种/ 基于/ 双向/ 双/ 同步/ 垂直/ 通道/ 的/ 三维/ 片上/ 网络/ ./ 该/ 结构/ 可以/ 动态/ 的/ 自/ 配置/ 竖直/ 链路/ 的/ 方向/ 来/ 传递/ 报文/ ,/ 在/ 竖直/ 方向/ 用/ 一个/ 高频率/ 双向/ 通道/ 替代/ 一对/ 单向/ 通道/ 以/ 达到/ 更/ 高/ 的/ 带宽/ 利用率/ 、/ 更/ 小/ 的/ 引脚/ 面积/ 和/ 更/ 高/ 的/ 可靠性/ ./ 图/ 16/ 为/ BBVC/ 结构/ 的/ 示意图/ ,/ 为/ 垂直/ 端口配置/ 控制/ 模块/ ,/ 使/ 之/ 具有/ 双向通信/ 能力/ ./ BBVC/ 结构/ 的/ 优点/ 是/ 显著/ 减少/ 了/ TSV/ 引脚/ 面积/ ,/ 简化/ 了/ 布局/ ,/ 同时/ 异构/ 集成/ 能力/ 强/ ;/ 缺点/ 则/ 是/ 增加/ 了/ 竖直/ 方向/ 上/ 的/ 跳步/ 数/ ,/ 路由器/ 交叉开关/ 开销/ 也/ 较大/ ./ Page11/ 文献/ [/ 48/ ]/ 为了/ 减少/ TSV/ 高/ 开销/ 这一/ 缺陷/ ,/ 设计/ 了/ 一种/ 性能/ 与/ 开销/ 较/ 合算/ 的/ 三维/ 片上/ 网络结构/ ./ 该/ 结构/ 的/ 目的/ 就是/ 为了/ 减少/ TSV/ 的/ 个数/ ./ 通过/ 对/ 每/ 一层/ 的/ 节点/ 进行/ 分类/ ,/ 将/ 节点/ 归/ 到/ 几个/ 虚拟/ 组/ ,/ 每个/ 虚拟/ 组/ 连接/ 一个/ TSV/ 通信/ 通道/ ,/ 并/ 设计/ 了/ 一系列/ 算法/ 来/ 管理/ 通信/ ,/ 减少/ 垂直/ TSV/ 出现/ 空闲/ 的/ 时间/ ,/ 以/ 提高/ TSV/ 的/ 带宽/ 利用率/ ,/ 继而/ 提高/ 全局性/ 能/ ./ 该/ 方法/ 可以/ 显著/ 减少/ TSV/ 面积/ 且/ 性能/ 下降/ 非常/ 小/ ./ 国内/ 对于/ TSV/ 设计/ 优化/ 的/ 研究/ 也/ 取得/ 了/ 显著/ 的/ 成果/ ./ 合肥工业大学/ 的/ 欧阳/ 一鸣/ 等/ 人/ [/ 49/ ]/ 提出/ 了/ 一种/ TSV/ 复用/ 容错/ 策略/ ./ 传统/ 的/ 容错/ 方法/ 是/ 增加/ 一定/ 数目/ 的/ 冗余/ 链路/ ,/ 然而/ 针对/ TSV/ 故障/ ,/ 由于/ TSV/ 是/ 数量/ 的/ 限制/ ,/ 该/ 方法/ 难以/ 适用/ ./ 因此/ ,/ 作者/ 提出/ 通过/ 对/ 故障/ 链路/ 中/ 功能/ 良好/ 的/ TSV/ 复用/ ,/ 并/ 通过/ 将/ 数据/ 微片/ 多次/ 传输/ 的/ 方式/ 实现/ 对/ TSV/ 硬/ 故障/ 的/ 容错/ ./ 此外/ 还/ 通过/ 添加/ ECC/ 编码/ 解码/ 模块/ 来/ 实现/ 瞬时/ 故障/ 容错/ 功能/ ./ 该/ 策略/ 一定/ 程度/ 地/ 控制/ 了/ 硬件/ 开销/ ,/ 时延/ 和/ 吞吐/ 率/ 都/ 有/ 提高/ ,/ 但是/ 由于/ 容错/ 策略/ 复用/ TSV/ ,/ 出现/ 错误/ 时/ ,/ 微片/ 在/ 垂直/ 方向/ 分/ 多次/ 传输/ ,/ 导致/ 零/ 负载/ 延迟/ 增加/ ./ 上述/ TSV/ 的/ 设计/ 优化/ 研究/ 均/ 是/ 以/ 降低/ TSV/ 开销/ 或/ 控制/ TSV/ 数量/ 提高/ 可靠性/ 为/ 目的/ ,/ 这是/ 由于/ 目前/ 的/ 制造/ 工艺/ 使得/ TSV/ 的/ 产品/ 良率/ 较/ 低/ ,/ 成本/ 较/ 高/ ./ 然而/ 在/ 现有/ 技术/ 条件/ 下/ ,/ 垂直/ 方向/ 上/ 采用/ TSV/ 互连/ 性能/ 较/ 高且/ 最/ 容易/ 商业化/ 应用/ ,/ 所以/ 目前/ 受到/ 广泛/ 关注/ ./ 未来/ 对于/ 垂直/ TSV/ 互连/ 的/ 体系结构/ 研究/ 一方面/ 继续/ 对/ 其/ 设计/ 优化/ 降低/ 开销/ ;/ 另一方面/ 还/ 需要/ 挖掘/ 更/ 多/ 更/ 有/ 前景/ 的/ 垂直/ 互连/ 技术/ ,/ 如/ 无触点/ 或/ 交流/ 耦合/ 互连/ 通信/ 等/ ./ 3.7/ 其他/ 研究/ 除了/ 前面/ 所/ 介绍/ 的/ 6/ 个/ 研究/ 热点/ 外/ ,/ 对于/ 三维/ 片上/ 网络/ 的/ 研究/ 还/ 包括/ 新型/ 芯片/ 堆叠/ 方式/ 、/ 设计/ 方法学/ 研究/ 、/ 任务/ 映射/ 、/ 缓存/ 布局/ 、/ 三维/ 光/ 互连/ 研究/ [/ 58/ -/ 59/ ]/ 以及/ 性能/ 评估/ 等/ 许多/ 方面/ ./ 由于/ 篇幅/ 限制/ ,/ 本文/ 无法/ 全面/ 完整/ 地/ 介绍/ ,/ 只/ 针对/ 具有/ 代表性/ 的/ 新型/ 芯片/ 堆叠/ 方式/ 、/ 设计/ 方法学/ 研究/ 和/ 缓存/ 布局/ 三个/ 方面/ 的/ 研究/ 进行/ 介绍/ ./ Puttaswamy/ 和/ Loh/ 在/ 文献/ [/ 37/ ]/ 中/ 提出/ 一种/ 三维/ 处理器/ 设计/ ,/ 其/ 每个/ 独立/ 功能模块/ 贯穿/ 多个/ 芯片/ 层/ ,/ 虽然/ 这一/ 结构/ 在/ 当前/ 技术/ 条件/ 下/ 还/ 存在/ 一定/ 困难/ ,/ 但/ 随着/ 多层/ 堆叠/ 处理器/ 技术/ 的/ 成熟/ ,/ 这种/ 结构/ 非常灵活/ 有效/ ./ MIRA/ 三维/ 片上/ 网络结构/ 是/ 由/ 美国宾夕法尼亚大学/ 的/ Park/ 等/ 人/ [/ 38/ ]/ 基于/ 该/ 技术/ 提出/ 的/ 一种/ 多层/ 路由器/ 结构/ ./ 在/ 逻辑/ 结构/ 上/ ,/ 其/ 与/ 二维/ Mesh/ 结构/ 的/ 路由器/ 类似/ ,/ 在/ 竖直/ 方向/ 上/ ,/ 其/ 路由器/ 结构/ 贯穿/ 多层/ 网络/ ,/ 与/ 二维/ Mesh/ 相比/ 具有/ 较/ 小/ 的/ 节点/ 面积/ 和/ 路由器/ 间/ 较/ 短/ 的/ 距离/ ./ 此外/ ./ 路由器/ 无需/ 增加/ 额外/ 的/ 功能/ 结构/ ,/ 只/ 需要/ 将/ 功能模块/ 合理/ 地/ 布局/ 在/ 多层/ 结构/ 中/ ./ 这种/ 结构/ 具有/ 非常/ 高/ 的/ 性能/ ,/ 但是/ 其/ 针对/ 的/ 是/ 三维/ 设计/ 处理器/ 核/ ,/ 难以/ 重用/ 目前/ 已经/ 高度/ 优化/ 的/ 二维/ 处理器/ 核/ 设计/ 技术/ ,/ 且/ Switch/ 设计/ 复杂度/ 也/ 很/ 高/ ./ 在/ 三维/ 片上/ 系统/ 中/ ,/ 如何/ 设计/ 一个/ 能效/ 高/ 的/ 片/ 上/ 网络结构/ 并/ 满足/ 三维/ 堆叠/ 技术/ 的/ 诸多/ 约束/ 是/ 研究者/ 在/ 体系结构/ 设计/ 时/ 最为/ 关心/ 的/ 问题/ 之一/ ./ 为了/ 解决/ 这个/ 问题/ ,/ 文献/ [/ 36/ ]/ 提出/ 了/ 一种/ 高/ 能效/ 三维/ 片上/ 网络/ 设计/ 的/ 综合/ 方法/ ./ 该/ 方法/ 根据/ 核/ 的/ 位置/ 以及/ 三维/ 片上/ 网络/ 的/ 各种/ 约束/ ,/ 决定/ 最合适/ 的/ 拓扑/ 结构/ 和/ 各层/ 路由器/ 的/ 位置/ ./ 三维/ 片上/ 网络/ 的/ 诸多/ 约束/ 除/ 技术/ 约束/ 外/ ,/ 还/ 包括/ 针对/ 特定/ 应用/ 的/ 网络通信/ 特征/ ./ 这种/ 定制/ 的/ 三维/ 片上/ 网络拓扑/ 结构/ 针对/ 其/ 通信/ 特征/ 可以/ 大幅度/ 的/ 减少/ 功耗/ 开销/ 并/ 降低/ 传输/ 延迟/ ./ 在/ 三维/ 多/ 核片/ 上/ 系统/ 中/ ,/ 一般/ 将/ 共享/ 存储/ 部件/ 设置/ 在/ 顶层/ ./ 当/ DRAM/ 都/ 在/ 三维/ 片上/ 网络/ 的/ 顶层/ 时/ ,/ 一般/ 都/ 采用/ WideIO/ 接口/ 进行/ 通信/ [/ 60/ ]/ ,/ 外部/ 存储/ 端口/ 不再/ 是/ 片/ 上/ 系统/ 的/ 性能/ 瓶颈/ ./ 新/ 的/ 性能/ 瓶颈/ 将/ 是/ 网络/ 热点/ 导致/ 的/ 链路/ 拥塞/ 和/ 饱和/ ./ 文献/ [/ 60/ ]/ 针对/ 这/ 一新/ 瓶颈/ ,/ 提出/ 了/ 一个/ 新/ 的/ 性能/ 评估/ 分析方法/ [/ 61/ ]/ 来/ 分配/ 链路/ 缓存/ ,/ 以/ 这种/ 方式/ 缓解/ 热点/ 区域/ 的/ 拥塞/ ./ 该/ 方法/ 在/ 网络/ 设计阶段/ ,/ 通过/ 采用/ UniformRandom/ 和/ Hotspot/ 混合/ 流量/ 模型/ 寻找/ 网络/ 中/ 可能/ 存在/ 的/ 热点/ 区域/ ,/ 计算/ 并/ 分配/ 各/ 链路/ 所/ 需/ 的/ 合适/ 的/ 缓存/ 数量/ ,/ 以/ 提升/ 网络/ 性能/ ./ 然而/ ,/ 这种/ 方法/ 不/ 具有/ 实时控制/ 能力/ ,/ 链路/ 缓存/ 分配/ 在/ 设计阶段/ 已/ 确定/ ,/ 因此/ 不能/ 根据/ 网络/ 状态/ 进行/ 调整/ ./ 本节/ 主要/ 从/ 系统/ 层/ 、/ 微结构/ 层/ 和/ 电路/ 层/ 3/ 个/ 层次/ 出发/ ,/ 介绍/ 了/ 三维/ 片上/ 网络体系结构/ 的/ 最新/ 研究进展/ ./ 事实上/ ,/ 这些/ 研究/ 热点/ 之间/ 并/ 不是/ 相互/ 独立/ Page12/ 的/ ,/ 它们/ 的/ 关系/ 错综复杂/ ,/ 每/ 一个/ 研究/ 点/ 都/ 涉及/ 其他/ 多个/ 研究/ 点/ ,/ 而/ 几乎/ 所有/ 的/ 三维/ 片上/ 网络/ 研究/ 最终/ 都/ 回归/ 到/ 拓扑/ 结构/ 、/ 路由/ 算法/ 以及/ 路由器/ 微结构/ 设计/ 等/ 问题/ ./ TSV/ 的/ 设计/ 优化/ 、/ 低功耗/ 和/ 热/ 管理/ 、/ 提高/ 可靠性/ 和/ 性能/ 、/ 2.5/ 维硅/ 中介/ 技术/ 、/ 容错/ 以及/ 负载/ 均衡/ 等/ 方面/ 的/ 研究/ ,/ 都/ 是/ 通过/ 针对/ 拓扑/ 结构/ 、/ 路由/ 策略/ 和/ 路由器/ 微结构/ 做/ 具体/ 设计/ 来/ 实现/ 的/ ;/ 同时/ 所有/ 针对/ 拓扑/ 结构/ 、/ 路由/ 策略/ 和/ 路由器/ 微结构/ 的/ 设计/ ,/ 其/ 目的/ 又/ 都/ 是/ 为了/ 提高/ 性能/ 和/ 可靠性/ 、/ 实现/ 容错/ 、/ 降低功耗/ 等/ ./ 不同于/ 二维/ 片上/ 网络/ 研究/ ,/ 三维/ 片上/ 网络/ 的/ 研究/ 结合/ 其/ 自身/ 结构/ 的/ 特点/ 以及/ 面临/ 的/ 问题/ ,/ 更多地/ 出现/ 在/ 热/ 管理/ 、/ TSV/ 设计/ 优化/ 、/ 2.5/ 维硅/ 中介/ 层/ 利用/ 以及/ 对层间/ 极/ 短距离/ 的/ 利用/ 上/ ./ 这些/ 研究/ 的/ 成果/ 能够/ 更好/ 地/ 发挥/ 三维/ 结构/ 的/ 优势/ 特点/ ./ 表/ 2/ 则/ 将/ 本文/ 介绍/ 的/ 文献/ 以/ 这种/ 方式/ 呈现/ 出来/ ./ 提高/ 性能/ 降低/ 开销/ 容错/ 和/ 提高/ 可靠性/ 均衡/ 负载/ 热/ 管理/ 和/ 低功耗/ TSV/ 设计/ 优化/ 硅/ 中介/ 利用/ 缓存/ 分配/ 4/ 研究/ 方法/ 与/ 产品/ 研发/ 4.1/ 模拟/ 环境/ 与/ 性能/ 测试/ 在/ 片/ 上/ 网络体系结构/ 研究/ 中/ ,/ 其/ 巨大/ 的/ 设计/ 空间/ 需要/ 模拟器/ 来/ 有效/ 地/ 评估/ 其/ 性能/ ,/ 并/ 选择/ 合适/ 的/ 参数/ 优化/ 设计/ ./ 二维/ 片上/ 网络/ 和/ 三维/ 片上/ 网络/ 的/ 主要/ 功能/ 都/ 是/ 连接/ 各/ 节点/ 实现/ 通信/ ,/ 三维/ 片上/ 网络体系结构/ 模拟器/ 目前/ 主要/ 沿用/ 二维/ 结构/ 的/ 模拟器/ ./ 由于/ 在/ 体系结构/ 研究/ 中/ ,/ 我们/ 更多地/ 关心/ 链路层/ 以上/ 层次/ 的/ 结构/ ,/ 只/ 需要/ 考虑/ 节点/ 连通性/ 、/ 链路/ 延迟/ 、/ 链路/ 带宽/ 以及/ 路由器/ 内部结构/ 等/ 设计/ ,/ 而/ 较/ 少/ 地/ 关心/ TSV/ 等/ 结构/ 的/ 具体/ 实现/ ./ 因此/ ,/ 将/ 二维/ 片上/ 网络/ 模拟器/ 升级/ 为/ 三维/ 片上/ 网络/ 模拟器/ ,/ 最/ 主要/ 是/ 在/ 拓扑/ 结构/ 的/ 增维/ ./ 需要/ 在/ 片/ 上/ 网络/ 垂直/ 方向/ 增加/ 相应/ 的/ 链路/ ,/ 同时/ 在/ 路由器/ 微结构/ 增加/ 相应/ 的/ 端口/ ./ 垂直/ 方向/ 的/ 链路/ 主要/ 模拟/ TSV/ 的/ 设计/ ,/ 其/ 延时/ 相应/ 较/ 短/ ,/ 垂直/ 链路/ 的/ 带宽/ 位数/ 代表/ 了/ TSV/ 的/ 数量/ ,/ 因此/ 还/ 需要/ 注意/ 垂直/ 链路/ 数量/ 、/ 密度/ 和/ 带宽/ 的/ 控制/ ./ 而/ 路由/ 算法/ 、/ 流控/ 机制/ 、/ 网络流量/ 模型/ 等/ 方面/ 则/ 可/ 根据/ 设计/ 相应/ 实现/ ./ 现有/ 的/ 片/ 上/ 网络体系结构/ 模拟器/ 按照/ 实现/ 编程语言/ 划分/ 为/ 三类/ ,/ 包括/ 以/ C++/ 实现/ 的/ Booksim/ [/ 62/ ]/ 、/ Garnet/ [/ 63/ ]/ 、/ OPENC/ -/ Sim/ [/ 64/ ]/ ;/ 以/ SystemC/ 实现/ 的/ Noxim/ ①/ 、/ Nirgam/ [/ 65/ ]/ 以及/ 以/ verilog/ 或/ VHDL/ 等/ 硬件/ 描述语言/ 实现/ 的/ 模拟器/ ./ 这些/ 模拟器/ 可以/ 模拟/ 片上/ 网络/ 的/ 拓扑/ 结构/ 、/ 路由/ 算法/ 、/ 路由器/ 微结构/ 、/ 流控/ 机制/ 、/ 网络流量/ 模型/ 等/ 各种/ 机制/ 和/ 特性/ ,/ 通过/ 对/ 代码/ 的/ 修改/ ,/ 可以/ 实现/ 各种/ 设计/ ,/ 并/ 测试/ 其/ 性能/ 和/ 硬件/ 开销/ ./ 此外/ ,/ 这些/ 片上/ 网络/ 模拟器/ 还/ 可以/ 链接/ 到/ Gem5/ 等/ 全/ 系统/ 模拟器/ 或/ Trace/ 模拟器/ Netrace/ [/ 66/ ]/ 、/ SynFull/ [/ 67/ ]/ 等/ 实现/ 全/ 系统/ 环境/ 下/ 测试/ 片上/ 网络/ 的/ 性能/ ./ 除了/ 上述/ 性能/ 模拟器/ 之外/ ,/ 还有/ 专门/ 测试/ 片上/ 网络/ 功耗/ 和/ 面积/ 的/ 模拟器/ ,/ 如/ Orion/ [/ 68/ ]/ 、/ DSENT/ [/ 69/ ]/ 和/ RTLRouter/ [/ 70/ ]/ 等/ ./ 三维/ 片上/ 网络/ 专用/ 模拟器/ VNOC3/ ②/ 是/ 由/ CristinelAbabei/ 领导/ 的/ 小组/ 采用/ C++/ 语言/ 开发/ 的/ 仿真/ 平台/ ./ 该/ 仿真/ 平台/ 是/ 研究/ 两层/ 或/ 三层/ 的/ 三维/ 片上/ 网络/ 架构/ 的/ 一个/ 框架/ ,/ 建立/ 在/ 一个/ VNOC/ 仿真/ 平台/ 和/ 一个/ B/ / 树/ 布局/ 之上/ ./ 该/ 平台/ 是/ 专门/ 针对/ 三维/ 片上/ 网络结构/ 设计/ 的/ ,/ 然而/ 在/ 灵活性/ 和/ 功能/ 全面性/ 方面/ 不及/ Booksim/ 模拟器/ ./ 此外/ ,/ “/ 国立/ ”/ 台湾大学/ 的/ AccessICLab/ 也/ 开发/ 了/ 一个三维/ 片上/ 网络/ 联合/ 模拟/ 平台/ AccessNoxim/ ③/ ./ 其/ 代码/ 结构/ 集成/ 了/ Noxim/ 和/ Hotspot/ 两个/ 模拟器/ ,/ 因此/ 该/ 平台/ 集成/ 了/ 网络/ 模型/ 、/ 功耗/ 模型/ 和/ 热/ 模型/ ./ 该/ 模拟/ 平台/ 采用/ System/ C语言/ 实现/ ,/ 对于/ 重视/ 热/ 管理/ 的/ 设计/ 实现/ 有/ 很/ 高/ 的/ 应用/ 价值/ ./ 4.2/ 产品/ 研发/ 由于/ 三维/ 集成电路/ 依然/ 面临/ 着/ 众多/ 挑战/ ,/ 对于/ 三维/ 集成电路/ 的/ 研发/ 还/ 处于/ 先期/ 发展/ 阶段/ ,/ 三维/ 逻辑/ 堆叠/ 芯片/ 的/ 商业化/ 产品/ 并/ 没有/ 问世/ ./ 目前/ 的/ 三维/ 堆叠/ 产品/ 主要/ 是/ 对于/ 存储/ 部件/ 的/ 堆叠/ 以及/ 采用/ 2.5/ 维硅/ 中介/ 层/ 技术/ 的/ 堆叠/ ./ 在/ 实验/ 研究型/ 芯片/ 方面/ ,/ 如表/ 3/ 所示/ ,/ 2007/ 年/ ①/ ②/ ③/ forge/ ./ net/ // projects/ // noximindex/ ./ htmlPage13Intel/ 推出/ 了/ 实验性/ 三维/ 芯片/ Teraflops/ 处理器/ ;/ 2008/ 年/ 罗切斯特/ 大学/ 的/ Friedman/ 领导/ 的/ 小组/ 研发/ 了/ 第一款/ 堆叠/ 芯片/ ,/ 主频/ 达到/ 1.4/ GHz/ ;/ 乔治亚/ 理工学院/ 研制/ 的/ 3D/ -/ MAPS/ 三维/ 芯片/ [/ 71/ ]/ ,/ 包含/ 了/ 一层/ 逻辑/ 层/ 和/ 一层/ DRAM/ 层/ ,/ 采用/ 130nm/ 工艺/ ,/ 主频/ 仅/ 277MHz/ ./ 其/ 逻辑/ 层/ 64/ 核/ 的/ 核/ 间通信/ 采用/ 的/ 是/ 2DMesh/ 结构/ ,/ 垂直/ 互连/ 方面/ 采用/ 了/ Tezzaron/ 的/ 1.2/ μ/ m/ 直径/ 的/ TSV/ 技术/ ./ 密歇根/ 大学/ 研制/ 的/ Centip3De/ 是/ Teraflops/ 处理器/ RochesterCube3DSystemPrototype/ 表/ 3/ 研究型/ 堆叠/ 芯片/ 单位/ Intel/ 罗切斯特/ 大学/ 乔治亚/ 理工学院/ 密歇根/ 大学/ IBM/ 目前/ ,/ 三维/ 逻辑/ 堆叠/ 的/ 芯片/ 由于/ 技术/ 原因/ 并/ 没有/ 产品化/ ,/ 主要/ 是/ 作为/ 实验性/ 芯片/ 由/ 一些/ 研究/ 机构/ 进行/ 研究/ 开发/ ./ 由于/ 堆叠/ 层数/ 都/ 非常少/ ,/ 一般/ 都/ 是/ 两层/ 堆叠/ ,/ 故其片/ 上/ 网络结构/ 相对/ 简单/ ,/ 多为/ 在/ 逻辑/ 层/ 的/ 2DMesh/ 或/ Switch/ ,/ 垂直/ 互连/ 采用/ 总线/ 或/ Switch/ 为主/ ./ 商业化/ 产品/ 方面/ ,/ 如表/ 4/ 所示/ ,/ 目前/ 最/ 主要/ 的/ 两种/ 存储/ 堆叠/ 标准/ 分别/ 是/ 由/ 美光/ 公司/ 领导/ 设计/ 的/ HMC/ (/ HybridMemoryCube/ )/ ①/ 和/ AMD/ 和/ Hynix/ 领导/ 设计/ 的/ HBM/ (/ HighBandwidthMemory/ )/ ②/ ./ 它们/ 均/ 是/ 采用/ TSV/ 互连/ 堆叠/ 的/ 高性能/ RAM/ 接口标准/ ,/ 应用/ 到/ 各种/ 芯片/ 的/ 实现/ 上/ ./ HBM/ 与/ HMC/ 的/ 区别/ 体现/ 在/ DRAM/ 运行/ 频率/ 、/ 总位/ 宽/ 、/ 发热/ 以及/ 扩展性/ 层面/ ./ 在/ 应用/ 方面/ ,/ 采用/ HBM/ 的/ AMDFijiXT/ 已表/ 4/ 商业/ 堆叠/ 芯片/ 三维/ 数据/ 型/ 闪存/ 3DV/ -/ NAND3DNANDFlash/ 商业化/ 产品/ 主要/ 出现/ 在/ 存储/ 堆叠/ 上/ ,/ 由于/ 其/ 结构/ 较为/ 规整/ ,/ 热效应/ 并/ 不/ 严重/ ,/ 因此/ 技术/ 逐渐/ 成熟/ ,/ 并/ 出现/ 了/ 许多/ 商业/ 产品/ ./ 在/ 其/ 互连/ 结构/ 方面/ ,/ 以/ HMC/ 标准/ 为例/ ,/ 底层/ 存储/ 控制器/ 通过/ 高阶/ Switch/ 相连/ ,/ 上层/ 存储/ 部件/ 通过/ 总线/ ,/ 与/ 对应/ 的/ 存储/ 控制器/ 连接/ ,/ 组成/ 三维/ 存储/ 结构/ ./ 5/ 挑战/ 与/ 展望/ 目前/ ,/ 三维/ 片上/ 网络/ 依然/ 面临/ 着/ 许多/ 问题/ 和/ 挑/ 一款/ 大规模/ 三维/ CMP/ 处理器/ [/ 72/ ]/ ,/ 采用/ 两层/ 结构/ ,/ 一层/ 为/ 包含/ 64/ 个/ ARMCortex/ -/ M3/ 核心/ 的/ 系统/ ,/ 该/ 64/ 核/ 被/ 组织/ 成/ 16/ 个群/ ,/ 通过/ crossbar/ 相连接/ ,/ 另/ 一层/ 是/ Cache/ ./ 两层/ 通过/ TSV/ 总线/ 连接/ ./ IBM/ 的/ Wordeman/ 等/ 人/ [/ 73/ ]/ 研制/ 了/ 一个三维/ 原型/ 系统/ ,/ 由/ 一层/ 存储/ 层/ 和/ 一层/ 逻辑/ 层/ 组成/ ./ 其中/ 存储/ 结构/ 采用/ 的/ 是/ eDram/ ,/ 其/ 存储/ 逻辑/ 来自/ IBMPower7processorL3Cache/ ,/ 其/ 垂直/ 互连/ 采用/ 的/ 是/ 三维/ Switch/ 结构/ ./ 经于/ 2015/ 年/ 6/ 月/ 问世/ ./ 英/ 伟达/ 2016/ 年/ 将/ 推出/ 的/ 下一代/ GPU/ 架构/ 的/ Pascal/ 也/ 将/ 采用/ HBM/ ./ HMC/ 则/ 将/ 广泛/ 地/ 应用/ 到/ Intel/ 第二代/ 至强/ Phi/ 处理器/ 以及/ 三星/ 存储/ 堆叠/ 芯片/ 等/ 产品/ 中/ ./ 在/ 国内/ 的/ 产品/ 研发/ 方面/ ,/ 武汉/ 新/ 芯/ 在/ 2015/ 年/ 5/ 月/ 宣布/ 其/ 9/ 层/ 结构/ 的/ 三维/ 存储器/ 芯片/ 通过/ 了/ 基本功能/ 的/ 电学/ 验证/ ,/ 预计/ 2017/ 年/ 将/ 实现/ 量产/ ./ 在/ 2.5/ 维/ 堆叠/ 集成/ 方面/ ,/ 赛灵思/ 公司/ 则/ 在/ 2011/ 年/ 推出/ 了/ 第一款/ 2.5/ 维/ 堆叠/ 的/ Virtex/ -/ 72000TFPGA/ [/ 57/ ]/ ./ 该/ FPGA/ 芯片/ 在/ 硅/ 中介/ 层上/ 装配/ 了/ 4/ 块/ FPGA/ 子/ 芯片/ ,/ 通过/ 硅/ 中介/ 层/ 互连/ 打破/ 了/ I/ // O/ 瓶颈/ ,/ 提供/ 了/ FPGA/ 间/ 10000/ 条/ 数据/ 路径/ 的/ 通信/ ./ 实现/ 同样/ 的/ 性能/ ,/ 比起/ 二维/ 结构/ 面积/ 只有/ 四分之一/ ,/ 功耗/ 更是/ 只有/ 六分之一/ ./ 2.5/ 维/ 堆叠/ 战/ ,/ 除了/ 本文/ 第二/ 部分/ 提到/ 的/ 三维/ 片上/ 网络/ 的/ 三大/ 问题/ 之外/ ,/ 其/ 进一步/ 发展/ 还/ 面临/ 一系列/ 的/ 挑战/ 和/ 技术/ 瓶颈/ [/ 74/ -/ 75/ ]/ ,/ 主要/ 包括/ :/ (/ 1/ )/ 缺乏/ 商业化/ 的/ EDA/ 工具/ [/ 76/ ]/ 和/ 设计/ 方法/ ./ 由/ 二维/ 结构/ 的/ 设计/ 转换/ 到/ 三维/ 结构/ 的/ 设计/ ,/ 片上/ 网络结构/ 从/ 空间/ 上/ 获得/ 了/ 非常/ 多/ 的/ 结构/ 优势/ 和/ 性能/ 优势/ ,/ 同时/ ,/ 在/ 设计/ 上/ 所要/ 考虑/ 的/ 约束条件/ 和/ 设计/ 因素/ ①/ ②/ Page14/ 也/ 不断/ 增加/ ./ 然而/ 目前/ 没有/ 成熟/ 和/ 合适/ 的/ EDA/ 工具/ 和/ 设计/ 方法/ 支持/ 三维/ 片上/ 网络/ 设计/ ,/ 这/ 直接/ 导致/ 三维/ 堆叠/ 的/ 商业化/ 产品/ 无法/ 实现/ ./ 随着/ 设计/ 空间/ 的/ 增大/ ,/ 设计/ 空间/ 探索/ 难度/ 急剧/ 增加/ [/ 77/ ]/ ,/ 如何/ 发挥/ 三维/ 堆叠/ 优势/ ,/ 设计/ 高性能/ 的/ 三维/ 堆叠/ 产品/ 也/ 困难重重/ ,/ 因此/ ,/ 对于/ 支持/ 三维/ 集成电路/ 的/ EDA/ 工具/ 和/ 设计/ 方法/ 的/ 研究/ 势在必行/ ./ (/ 2/ )/ 散热/ 问题/ ./ 芯片/ 堆叠/ 所/ 产生/ 的/ 热效应/ 来源于/ 功耗/ 密度/ 的/ 急剧/ 增加/ ,/ 它/ 带来/ 的/ 散热/ 问题/ 目前/ 是/ 限制/ 三维/ 集成电路/ 及其/ 片上/ 网络/ 发展/ 的/ 最大/ 瓶颈/ ,/ 对于/ 芯片/ 可靠性/ 和/ 稳定性/ 的/ 影响/ 非常/ 大/ ,/ 许多/ 设计/ 都/ 受到/ 散热/ 问题/ 的/ 限制/ 而/ 被迫/ 进行/ 缩减/ ,/ 三维/ 片上/ 网络/ 也/ 因此/ 需要/ 各种/ 结构设计/ 来/ 降低/ 开销/ ./ 解决/ 该/ 问题/ 需要/ 研究者/ 从/ 电路/ 层到/ 系统/ 层/ 提出/ 思路/ ,/ 对/ 三维/ 堆叠/ 的/ 热效应/ 建立/ 模型/ ,/ 研究/ 可能/ 的/ 解决办法/ 以/ 迁移/ 热效应/ ./ (/ 3/ )/ 通孔/ 周围/ 的/ 应力/ 问题/ ./ 在/ 三维/ 片上/ 网络/ 的/ 垂直/ TSV/ 周围/ 会/ 出现/ 应力/ 问题/ ,/ 限制/ 了/ TSV/ 阵列/ 与/ 器件/ 的/ 间距/ 以及/ TSV/ 在/ 竖直/ 方向/ 布局/ 密度/ ,/ 从而/ 影响/ 网络带宽/ 和/ 器件/ 布局/ ./ 这/ 就/ 要求/ 在/ 垂直/ TSV/ 的/ 设计/ 中/ 考虑/ 全局性/ 因素/ ,/ 需要/ 与/ 电源/ 、/ 时钟/ 网络/ 等/ 因素/ 共同/ 考虑/ 网络资源/ 分配/ ,/ 同时/ 需要/ 在/ 三维/ 片上/ 网络/ 进行/ 体系结构/ 设计/ 与/ 优化/ ./ (/ 4/ )/ 测试/ 问题/ ./ 目前/ 研究者/ 对于/ 三维/ 堆叠/ 技术/ 的/ 测试/ 问题/ 的/ 研究/ 还/ 非常/ 不足/ ,/ 缺乏/ 针对/ 三维/ 片上/ 网络/ 的/ 测试方法/ ./ 测试/ 问题/ 最大/ 的/ 局限/ 就是/ 对于/ 堆叠/ 的/ 硅片/ 难以/ 探测/ 访问/ ,/ 难以/ 判断/ 堆叠/ 芯片/ 内部/ 网络/ 的/ 情况/ ,/ 为/ 高可靠性/ 产品/ 的/ 实现/ 带来/ 了/ 隐患/ ./ 因此/ ,/ 三维/ 堆叠/ 及/ 三维/ 片上/ 网络/ 技术/ 急需/ 研究者/ 提出/ 测试/ 设计/ 的/ 解决办法/ ./ 上述/ 挑战/ 虽然/ 带来/ 了/ 许多/ 困难/ ,/ 但/ 同时/ 也/ 指引/ 了/ 三维/ 片上/ 网络/ 发展/ 的/ 方向/ ,/ 现在/ 和/ 未来/ 的/ 研究/ 除了/ 提高/ 三维/ 片上/ 网络/ 的/ 性能/ 之外/ ,/ 主要/ 研究/ 目标/ 就是/ 解决/ 这些/ 问题/ ./ 结合/ 三维/ 片上/ 网络/ 研究/ 热点/ 以及/ 系统结构/ 设计/ 的/ 未来/ 发展/ ,/ 三维/ 片上/ 网络体系结构/ 层/ 设计/ 主要/ 有/ 两个/ 大/ 的/ 发展/ 方向/ ./ 一方面/ 是/ 将/ 二维/ 片上/ 网络/ 已有/ 的/ 结构/ 或/ 机制/ 引入/ 或/ 移植/ 到/ 三维/ 片上/ 网络/ 中/ ,/ 并/ 根据/ 三维/ 结构/ 特点/ 进行/ 优化/ 设计/ ,/ 包括/ 拓扑/ 结构/ 、/ 路由/ 算法/ 、/ 路由器/ 微结构/ 等/ 方面/ ,/ 这/ 对于/ 三维/ 片上/ 网络/ 研究/ 的/ 快速/ 发展/ 进步/ 是/ 非常/ 有利/ 也/ 非常/ 有/ 必要/ 的/ ;/ 另一方面/ ,/ 在/ 三维/ 片上/ 网络/ 的/ 设计/ 中/ 最/ 重要/ 的/ 一点/ 就是/ 注重/ 混合/ 设计/ ./ 由于/ 片上/ 网络/ 的/ 三维/ 结构/ 在/ 水平/ 方向/ 上/ 的/ 两维/ 与/ 竖直/ 方向/ 的/ 第三/ 维并/ 不是/ 对称/ 的/ ,/ 因此/ 在/ 设计/ 时/ 可以/ 分别/ 结合/ 片内/ 和/ 片间/ 网络/ 的/ 特点/ 进行/ 不/ 对称/ 设计/ ,/ 发挥/ 不同/ 结构/ 各自/ 的/ 优势/ 特点/ ,/ 这种/ 不对称性/ 既/ 可以/ 适用/ 于/ 拓扑/ 结构/ 、/ 路由器/ 微结构/ 等/ 物理/ 结构/ 上/ ,/ 也/ 适用/ 于/ 路由/ 算法/ 、/ 流控/ 机制/ 等/ 通信/ 流量/ 的/ 管理/ 上/ ,/ 从而/ 更好/ 地/ 发挥/ 出/ 三维/ 片上/ 网络结构/ 的/ 优势/ ./ 综上所述/ ,/ 三维/ 片上/ 网络/ 由于/ 具备/ 二维/ 片上/ 网络/ 所/ 不/ 具备/ 的/ 空间/ 优势/ ,/ 其/ 发展/ 空间/ 非常广阔/ ,/ 必将/ 伴随/ 三维/ 集成电路/ 的/ 发展/ 成为/ 下一代/ 多核/ 甚至/ 众核/ 系统/ 的/ 主流/ 片上/ 通信/ 架构/ ./ 

