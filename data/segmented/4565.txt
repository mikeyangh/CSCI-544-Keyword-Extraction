Page1/ 基于/ 路径/ 相关性/ 的/ 回归/ 测试数据/ 进化/ 生成/ 1/ )/ (/ 中国矿业大学/ 计算机科学/ 与/ 技术/ 学院/ 江苏/ 徐州/ 221116/ )/ 2/ )/ (/ 中国矿业大学/ 信息/ 与/ 电气/ 工程学院/ 江苏/ 徐州/ 221116/ )/ 摘要/ 尽管/ 回归/ 测试/ 是/ 一种/ 重要/ 的/ 软件测试/ 方法/ ,/ 但是/ ,/ 如何/ 选择/ 测试/ 目标/ ,/ 并/ 充分利用/ 已有/ 的/ 测试数据/ ,/ 目前/ 尚/ 缺乏/ 有效/ 的/ 方法/ ./ 文中/ 基于/ 路径/ 相关性/ ,/ 研究/ 求解/ 回归/ 测试数据/ 生成/ 问题/ 的/ 新/ 方法/ ,/ 以/ 高效/ 地/ 进化/ 生成/ 可/ 用于/ 回归/ 测试/ 的/ 测试数据/ 集/ ./ 该/ 方法/ 根据/ 路径/ 与/ 节点/ 的/ 相关矩阵/ ,/ 首先/ 进行/ 目标/ 路径/ 排序/ ,/ 并/ 基于/ 路径/ 相关性/ ,/ 建立/ 新/ 的/ 覆盖/ 影响/ 路径/ 的/ 回归/ 测试数据/ 生成/ 问题/ 的/ 数学模型/ ;/ 其次/ ,/ 结合/ 遗传算法/ 对/ 上述/ 模型/ 求解/ 时/ ,/ 利用/ 穿越/ 已有/ 目标/ 路径/ 的/ 测试数据/ ,/ 编码/ 后/ 取代/ 进化/ 种群/ 的/ 部分/ 个体/ ./ 将/ 所/ 提/ 方法/ 应用/ 于/ 多个/ 基准/ 和/ 工业/ 程序/ 的/ 测试/ ,/ 并/ 与/ 其他/ 回归/ 测试数据/ 生成/ 方法/ 比较/ ,/ 最后/ 实验/ 结果表明/ ,/ 所提/ 方法/ 能够/ 有效/ 提高/ 生成/ 测试数据/ 的/ 效率/ ./ 关键词/ 回归/ 测试/ ;/ 测试数据/ 生成/ ;/ 路径/ 相关性/ ;/ 路径/ 排序/ ;/ 遗传算法/ 1/ 引言/ 在/ 软件/ 生命周期/ 中/ ,/ 开发人员/ 需要/ 经常/ 对/ 软件/ 进行/ 维护/ ,/ 维护/ 的/ 内容/ 包括/ :/ 新增/ 代码/ 、/ 删除/ 不必要/ 的/ 代码/ 以及/ 修改/ 原来/ 的/ 代码/ 等/ ./ 上述/ 工作/ 在/ 满足/ 新/ 需求/ 的/ 同时/ ,/ 也/ 可能/ 引入/ 新/ 的/ 缺陷/ 或/ 错误/ ./ 因此/ ,/ 有/ 必要/ 对/ 维护/ 后/ 的/ 软件/ 重新/ 测试/ ,/ 以/ 提高/ 软件/ 的/ 可信度/ ./ 所谓/ 回归/ 测试/ ,/ 是/ 指/ 确认/ 维护/ 的/ 软件/ 修正/ 正确/ 且/ 没有/ 引入/ 新/ 的/ 缺陷/ 而/ 进行/ 的/ 测试/ [/ 1/ ]/ ./ 已有/ 统计/ 表明/ ,/ 回归/ 测试/ 占/ 软件维护/ 费用/ 的/ 50/ %/ 以上/ [/ 2/ ]/ ./ 这/ 说明/ ,/ 研究/ 合适/ 的/ 方法/ ,/ 提高/ 回归/ 测试/ 效率/ ,/ 对/ 降低/ 软件维护/ 成本/ 是/ 非常/ 必要/ 的/ ./ 回归/ 测试/ 流程/ 如下/ :/ 首先/ ,/ 识别/ 受/ 影响/ 的/ 程序/ 片段/ ;/ 然后/ ,/ 选择/ 已有/ 的/ 部分/ 测试数据/ ,/ 或/ 基于/ 现有/ 测试数据/ ,/ 再/ 生成/ 新/ 的/ 测试数据/ ,/ 使得/ 这些/ 数据/ 的/ 执行/ 路径/ 能够/ 覆盖/ 影响/ 的/ 程序/ 片段/ ;/ 最后/ ,/ 以/ 这些/ 测试数据/ 为/ 输入/ ,/ 执行/ 维护/ 后/ 的/ 程序/ ,/ 以/ 验证/ 其/ 正确性/ [/ 3/ ]/ ./ 与/ 其他/ 测试方法/ 相比/ ,/ 已有/ 测试数据/ 集/ 包含/ 测试/ 信息/ 的/ 利用/ ,/ 是/ 回归/ 测试/ 的/ 关键/ ./ 因此/ ,/ 如何/ 有效/ 利用/ 已有/ 测试数据/ 集/ ,/ 以/ 提高/ 测试/ 效率/ ,/ 是/ 回归/ 测试/ 的/ 重要/ 研究/ 内容/ ./ 到/ 目前为止/ ,/ 关于/ 利用/ 已有/ 测试数据/ 集/ 的/ 研究/ 工作/ ,/ 主要/ 集中/ 于/ 已有/ 测试数据/ 集/ 的/ 选择/ 和/ 扩展/ 等/ 2/ 个/ 方面/ ,/ 其中/ ,/ 在/ 已有/ 测试数据/ 集/ 的/ 选择/ 方面/ ,/ 侧重于/ 确定/ 已有/ 测试数据/ 集中/ 数据/ 的/ 优先级/ [/ 4/ -/ 5/ ]/ ;/ 在/ 扩展/ 已有/ 的/ 测试数据/ 集/ 方面/ ,/ 主要/ 针对/ 待/ 覆盖/ 的/ 目标/ ,/ 如/ 语句/ 、/ 分支/ 以及/ 路径/ 等/ ,/ 运用/ 搜索/ 的/ 方法/ ,/ 例如/ 遗传算法/ ,/ 再/ 生成/ 新/ 的/ 测试数据/ [/ 2/ ]/ ./ 遗憾/ 的/ 是/ ,/ 已有/ 方法/ 仅/ 是/ 将/ 测试数据/ 的/ 再/ 生成/ ,/ 看作/ 覆盖/ 受/ 影响/ 程序/ 元素/ 的/ 测试数据/ 生成/ 问题/ ,/ 而/ 没有/ 充分利用/ 已有/ 测试数据/ 集/ 的/ 信息/ ,/ 这/ 造成/ 了/ 大量/ 有用/ 信息/ 的/ 不必要/ 浪费/ ./ 近年来/ ,/ 采用/ 遗传算法/ ,/ 生成/ 覆盖/ 路径/ 的/ 测试数据/ ,/ 得到/ 国内外/ 学者/ 的/ 广泛/ 关注/ ,/ 主要/ 做法/ 是/ :/ 首先/ ,/ 把/ 测试数据/ 生成/ 问题/ ,/ 转化/ 为单/ 目标/ 或/ 多/ 目标/ 优化/ 问题/ ;/ 然后/ ,/ 基于/ 待/ 优化/ 目标/ ,/ 定义/ 用于/ 遗传算法/ 进化/ 种群/ 个体/ 评价/ 的/ 适应度/ 函数/ ;/ 最后/ ,/ 对/ 由/ 测试/ 数据编码/ 形成/ 的/ 种群/ 进化/ 一定/ 代数/ ,/ 即可/ 得到/ 满足/ 测试/ 需求/ 的/ 测试数据/ ./ 容易/ 看出/ ,/ 遗传算法/ 的/ 进化/ 种群/ 能够/ 携带/ 穿越/ 多个/ 目标/ 路径/ 测试数据/ 的/ 信息/ ,/ 因此/ ,/ 执行/ 一次/ 遗传算法/ ,/ 能够/ 得到/ 覆盖/ 多条/ 目标/ 路径/ 的/ 测试数据/ [/ 6/ -/ 10/ ]/ ./ 本文/ 研究/ 回归/ 测试数据/ 生成/ 问题/ ,/ 在/ 充分利用/ 已有/ 测试数据/ 的/ 基础/ 上/ ,/ 通过/ 执行/ 一次/ 遗传算法/ ,/ 迅速/ 生成/ 穿越/ 所有/ 受/ 影响/ 路径/ 的/ 测试数据/ ./ 为此/ ,/ 首先/ ,/ 根据/ 修改/ 节点/ 与/ 目标/ 路径/ 的/ 相关矩阵/ ,/ 对/ 目标/ 路径/ 排序/ ,/ 并/ 基于/ 路径/ 相似/ 度/ ,/ 构建/ 覆盖/ 影响/ 路径/ 的/ 测试数据/ 生成/ 问题/ 的/ 数学模型/ ;/ 然后/ ,/ 选用/ 遗传算法/ 求解/ 前述/ 模型/ 时/ ,/ 利用/ 覆盖/ 已有/ 目标/ 路径/ 的/ 现有/ 测试数据/ ,/ 编码/ 后/ 替代/ 进化/ 种群/ 的/ 部分/ 个体/ ./ 本文/ 的/ 贡献/ 主要/ 体现/ 在/ 如下/ 3/ 个/ 方面/ :/ (/ 1/ )/ 基于/ 路径/ 相似/ 度/ 和/ 差异/ 度/ ,/ 给出/ 路径/ 相关性/ 的/ 度量/ 方法/ ,/ 并/ 根据/ 路径/ 修改/ 情况/ 以及/ 路径/ 复杂度/ ,/ 对/ 应当/ 覆盖/ 的/ 目标/ 路径/ 排序/ ,/ 建立/ 可/ 用于/ 回归/ 测试数据/ 集/ 优化/ 生成/ 问题/ 的/ 数学模型/ ;/ (/ 2/ )/ 利用/ 遗传算法/ 进化/ 生成/ 测试数据/ 时/ ,/ 根据/ 覆盖/ 目标/ 之间/ 的/ 路径/ 差异/ 度/ ,/ 将/ 满足条件/ 的/ 已有/ 测试/ 数据编码/ ,/ 替代/ 进化/ 种群/ 的/ 部分/ 个体/ ;/ (/ 3/ )/ 将/ 所/ 提/ 方法/ 应用/ 于/ 6/ 个/ 规模/ 不/ 等/ 的/ 基准/ 和/ 工业/ 程序/ 测试/ 中/ ,/ 并/ 与/ 多个/ 已有/ 方法/ 比较/ ,/ 以/ 检验/ 本文/ 方法/ 生成/ 回归/ 测试数据/ 的/ 性能/ ./ 本文/ 第/ 2/ 节是/ 相关/ 工作/ 综述/ ;/ 第/ 3/ 节/ 通过/ 路径/ 相关度/ ,/ 对/ 需要/ 覆盖/ 的/ 目标/ 路径/ 排序/ ,/ 并/ 建立/ 回归/ 测试数据/ 生成/ 问题/ 的/ 数学模型/ ;/ 第/ 4/ 节/ 阐述/ 采用/ 遗传算法/ 求解/ 上述/ 模型/ 时/ ,/ 已有/ 测试数据/ 的/ 利用/ ;/ 第/ 5/ 节/ 给出/ 所提/ 方法/ 在/ 基准/ 和/ 工业/ 程序/ 的/ 应用/ 与/ 对比/ 实验/ ;/ 最后/ ,/ 第/ 6/ 节对/ 本文/ 工作/ 总结/ ,/ 并/ 指出/ 下/ 一步/ 工作/ 计划/ 研究/ 的/ 问题/ ./ 2/ 相关/ 工作/ 我们/ 知道/ ,/ 对/ 一个/ 软件维护/ 后/ ,/ 需要/ 对/ 软件/ 受/ 影响/ 的/ 部分/ 进行/ 快速/ 、/ 全面/ 的/ 回归/ 测试/ ./ 到/ 目前为止/ ,/ 与/ 回归/ 测试/ 相关/ 的/ 研究/ 工作/ 主要/ 包括/ 测试/ 需求/ 约简/ 、/ 测试数据/ 选择/ 以及/ 测试数据/ 集/ 扩大/ 等/ ./ 由于/ 在/ 回归/ 测试/ 时/ ,/ 已经/ 存在/ 一个/ 测试数据/ 集/ ,/ 因此/ ,/ 采用/ 合适/ 的/ 方法/ ,/ 有效/ 利用/ 已有/ 测试数据/ ,/ 以/ 提高/ 测试/ 效率/ ,/ 是/ 成为/ 回归/ 测试/ 的/ 关键/ ./ 在/ 测试/ 需求/ 约简/ 方面/ ,/ Tallam/ 等/ 人/ [/ 11/ ]/ 提出/ 基于/ 概念/ 格/ 分析/ 的/ 测试/ 需求/ 约简/ 方法/ ,/ 缩减/ 已有/ 测试数据/ 集/ 的/ 规模/ ./ Zhang/ 等/ 人/ [/ 12/ ]/ 基于/ 测试/ 需求/ 之间/ 关系/ ,/ 约简/ 测试/ 需求/ ,/ 并/ 将/ 约简/ 后/ 的/ 测试/ 需求/ 作为/ 测试数据/ 集/ 生成/ 和/ 约简/ 的/ 基础/ ,/ 实现/ 测试数据/ 集/ 优化/ ./ Sun/ [/ 13/ ]/ 分析/ 错误/ 对应/ 的/ 前提条件/ 之间/ 的/ 蕴含/ 关系/ ,/ 减少/ 需要/ 满足/ 的/ 前提条件/ ,/ 以/ 约简/ 满足/ 前提条件/ 的/ 测试数据/ ./ Zhang/ 等/ 人/ [/ 14/ ]/ 通过/ 研究/ 程序/ 对应/ 的/ 控制/ Page3/ 流图/ ,/ 减少/ 与/ 修改/ 点/ 无关/ 的/ 分支/ ,/ 以/ 覆盖/ 约简/ 分支/ 后/ 构成/ 的/ 路径/ 为/ 目标/ ,/ 生成/ 测试数据/ ./ 上述/ 方法/ 通过/ 减少/ 测试/ 需求/ ,/ 降低/ 了/ 需要/ 生成/ 的/ 测试数据/ 数目/ ,/ 使得/ 回归/ 测试数据/ 生成/ 的/ 效率/ 提高/ ./ 但是/ ,/ 这些/ 方法/ 没有/ 充分利用/ 约简/ 后/ 测试/ 需求/ 之间/ 的/ 关系/ ,/ 生成/ 覆盖/ 受/ 影响/ 路径/ 的/ 测试数据/ ./ 关于/ 回归/ 测试/ 已有/ 测试数据/ 的/ 利用/ ,/ 已有/ 研究/ 工作/ 主要/ 包括/ 已有/ 测试数据/ 集/ 的/ 选择/ 和/ 扩展/ 等/ 2/ 个/ 方面/ ./ Nachiyappan/ 等/ 人/ [/ 15/ ]/ 利用/ 搜索/ 的/ 方法/ 构造/ 用于/ 再/ 测试/ 的/ 数据/ 集时/ ,/ 将/ 已有/ 测试数据/ 作为/ 进化/ 算法/ 初始/ 种群/ 的/ 一部分/ ,/ 选择/ 测试/ 目标/ 覆盖率/ 高且/ 执行/ 成本/ 较少/ 的/ 已有/ 测试数据/ ./ Ye/ 等/ 人/ [/ 16/ ]/ 通过/ 分析/ 程序修改/ 前后/ 的/ 活动/ 图/ ,/ 根据/ 程序/ 更新/ 对/ 路径/ 的/ 影响/ ,/ 对/ 路径/ 分类/ ,/ 并/ 基于/ 已有/ 测试数据/ 覆盖/ 分类/ 后/ 路径/ 的/ 情况/ ,/ 选择/ 需要/ 修改/ 的/ 测试数据/ ./ Kumar/ 等/ 人/ [/ 17/ ]/ 对比/ 修改/ 前后/ 程序/ 的/ 路径/ ,/ 选择/ 新/ 增加/ 和/ 发生/ 改变/ 的/ 路径/ ,/ 作为/ 应该/ 覆盖/ 的/ 目标/ ,/ 基于/ 路径/ 选择/ 方法/ ,/ 达到/ 选择/ 测试数据/ 的/ 目的/ ./ Sampath/ 等/ 人/ [/ 18/ ]/ 针对/ 目前/ 的/ 测试数据/ 集/ 的/ 优化/ 问题/ ,/ 包括/ 测试数据/ 选择/ 、/ 约简/ 、/ 优先/ 问题/ 给出/ 测试数据/ 优化/ 问题/ 的/ 统一/ 模式/ ,/ 并/ 给出/ 多/ 评价/ 准则/ 下/ 的/ 测试数据/ 的/ 选择/ 方法/ ./ 在/ 上述/ 测试数据/ 选择/ 方法/ 中/ ,/ Nachiyappan/ 等/ 人/ 选择/ 测试数据/ 的/ 过程/ 繁琐/ 、/ 耗时/ ;/ Ye/ 与/ Kumar/ 等/ 人均/ 基于/ 路径/ 选择/ 方法/ ,/ 根据/ 程序/ 更新/ 前后/ 路径/ 的/ 变化/ ,/ 先/ 选择/ 目标/ 路径/ ,/ 然后/ 选择/ 生成/ 测试数据/ ;/ Sampath/ 等/ 人/ 提出/ 的/ 方法/ 只/ 从/ 现有/ 测试数据/ 集中/ ,/ 选择/ 满足/ 多个/ 评价/ 准则/ 的/ 测试数据/ ,/ 忽略/ 了/ 生成/ 新/ 的/ 测试数据/ ./ Taneja/ 等/ 人/ [/ 19/ ]/ 提出/ 一种/ 受/ 影响/ 路径/ 的/ 识别方法/ ,/ 并/ 仅/ 针对/ 影响/ 输出/ 的/ 路径/ 进行/ 测试/ ./ Shin/ 等/ 人/ [/ 20/ ]/ 先/ 检验/ 现有/ 测试数据/ 是否/ 失效/ ,/ 然后/ ,/ 利用/ 现有/ 数据/ ,/ 并/ 对/ 输入/ 空间/ 中/ 搜索/ 到/ 的/ 测试数据/ 评价/ ,/ 生成/ 新/ 的/ 满足/ 覆盖/ 目标/ 的/ 测试数据/ ./ Santelices/ 等/ 人/ [/ 21/ ]/ 研究/ 生成/ 测试数据/ 覆盖/ 更新/ 影响/ 的/ 语句/ 时/ ,/ 分析程序/ 的/ 数据流/ 和/ 控制流/ ,/ 选择/ 与/ 修改/ 点/ 具有/ 依赖/ 关系/ 的/ 路径/ ,/ 生成/ 测试数据/ 覆盖/ 上述/ 路径/ ./ Xu/ 等/ 人/ [/ 22/ ]/ 提出/ 的/ 测试数据/ 集/ 扩大/ 方法/ ,/ 基于/ 已有/ 测试数据/ 运行/ 修改/ 后/ 的/ 程序/ ,/ 以/ 找出/ 发生/ 改变/ 的/ 语句/ ,/ 对/ 这些/ 语句/ 深度/ 优先/ 排序/ 后/ ,/ 利用/ 已有/ 测试数据/ ,/ 生成/ 新/ 的/ 测试数据/ ./ 在/ 上述/ 测试数据/ 集/ 扩大/ 方法/ 中/ ,/ Taneja/ 等/ 人/ 通过/ 减少/ 受/ 影响/ 的/ 路径/ ,/ 缩短/ 生成/ 测试数据/ 需要/ 的/ 时间/ ;/ Shin/ 等/ 人/ 利用/ 验证/ 后/ 的/ 原有/ 测试数据/ ,/ 通过/ 启发式/ 方法/ 再/ 生成/ 测试数据/ ,/ 但/ 该/ 方法/ 得到/ 的/ 测试数据/ 集/ 具有/ 冗余/ ,/ 还/ 需要/ 进一步/ 约简/ ;/ Santelices/ 等/ 人/ 给出/ 的/ 方法/ ,/ 未/ 考虑/ 已有/ 测试数据/ 的/ 利用/ ;/ 而/ Xu/ 等/ 人/ 在/ 测试数据/ 再/ 生成/ 时/ ,/ 没有/ 建立/ 选择/ 已有/ 测试数据/ 的/ 准则/ ./ 这/ 意味着/ ,/ 这些/ 方法/ 均/ 没有/ 充分利用/ 已有/ 测试数据/ 提供/ 的/ 有用/ 信息/ ./ 另外/ ,/ Xu/ 等/ 人/ [/ 23/ ]/ 运用/ 遗传算法/ ,/ 生成/ 满足/ 覆盖/ 分支/ 准则/ 的/ 测试数据/ 时/ 发现/ ,/ 不同/ 算法/ 、/ 不同/ 的/ 测试/ 目标/ 执行/ 顺序/ 以及/ 是否/ 利用/ 新/ 生成/ 的/ 测试数据/ ,/ 对/ 测试数据/ 生成/ 的/ 效率/ 有/ 很大/ 影响/ ,/ 但是/ ,/ 他们/ 没有/ 利用/ 影响/ 测试数据/ 生成/ 的/ 因素/ ,/ 提高/ 回归/ 测试数据/ 生成/ 效率/ ./ Bueno/ 和/ Maragathavalli/ 等/ 人/ [/ 24/ -/ 25/ ]/ 在/ 单元测试/ 中/ ,/ 采用/ 遗传算法/ 生成/ 覆盖/ 多路径/ 的/ 测试数据/ 时/ ,/ 以/ 穿越/ 的/ 路径/ 相似/ 为/ 准则/ ,/ 选择/ 部分/ 已/ 生成/ 的/ 测试数据/ ,/ 以/ 帮助/ 生成/ 覆盖/ 其他/ 目标/ 路径/ 的/ 测试数据/ ./ 但是/ ,/ 如果/ 在/ 回归/ 测试/ 中/ ,/ 采用/ 该/ 方法/ 选择/ 测试数据/ ,/ 需要/ 满足/ 已/ 穿越/ 的/ 路径/ 与/ 待/ 覆盖/ 的/ 目标/ 路径/ ,/ 具有/ 以首/ 节点/ 为/ 起点/ 的/ 多个/ 相同/ 连续/ 节点/ ./ 遗憾/ 的/ 是/ ,/ 该/ 方法/ 遗漏/ 了/ 虽然/ 没有/ 满足/ 上述/ 条件/ ,/ 但/ 与/ 待/ 覆盖/ 的/ 目标/ 路径/ 具有/ 较大/ 相关度/ 的/ 已/ 穿越/ 路径/ 对应/ 的/ 测试数据/ ,/ 使得/ 测试数据/ 仅能/ 在/ 较/ 小/ 的/ 输入/ 域里/ 选择/ ;/ 另一方面/ ,/ 在/ 回归/ 测试/ 中/ ,/ 该/ 方法/ 并/ 没有/ 考虑/ 到/ 程序结构/ 的/ 变化/ ,/ 没有/ 利用/ 程序结构/ 变化/ 的/ 信息/ 来/ 选择/ 已有/ 测试数据/ ,/ 帮助/ 生成/ 测试数据/ ./ 由/ 上述/ 可以/ 看出/ ,/ 在/ 回归/ 测试/ 中/ ,/ 虽然/ 有/ 不少/ 方法/ 或多或少/ 用到/ 已有/ 测试数据/ 信息/ ,/ 但是/ ,/ 这些/ 方法/ 主要/ 存在/ 以下/ 问题/ :/ (/ 1/ )/ 没有/ 利用/ 路径/ 的/ 变化/ 情况/ 以及/ 没有/ 利用/ 已/ 覆盖/ 的/ 路径/ 与/ 未/ 覆盖/ 路径/ 之间/ 的/ 关系/ ,/ 选择/ 已有/ 测试数据/ ./ (/ 2/ )/ 没有/ 合理/ 设定/ 需/ 生成/ 测试数据/ 覆盖/ 的/ 目标/ 路径/ 的/ 次序/ ,/ 导致/ 未能/ 充分利用/ 测试数据/ 生成/ 过程/ 中/ 的/ 信息/ ./ (/ 3/ )/ 缺乏/ 有效/ 的/ 指标/ 选择/ 已有/ 测试数据/ ,/ 利用/ 已有/ 的/ 未/ 失效/ 数据/ 品质/ 不高/ ./ 如果/ 在/ 采用/ 遗传算法/ 生成/ 满足/ 测试/ 需求/ 覆盖/ 的/ 测试数据/ 时/ ,/ 解决/ 以上/ 问题/ ,/ 充分利用/ 已有/ 的/ 测试数据/ ,/ 构成/ 进化/ 种群/ 的/ 部分/ 个体/ ,/ 那么/ ,/ 将/ 无疑/ 会/ 进一步/ 发挥/ 遗传算法/ 生成/ 测试数据/ 的/ 潜能/ ,/ 进而/ 可以/ 高效/ 的/ 进化/ 生成/ 回归/ 测试数据/ ./ 3/ 回归/ 测试数据/ 生成/ 问题/ 的/ 数学模型/ 本/ 节/ 首先/ 定义/ 一些/ 与/ 程序/ 路径/ 相关/ 的/ 基本/ 概/ Page4/ 念/ ;/ 然后/ ,/ 根据/ 路径/ 相关性/ ,/ 确定/ 目标/ 路径/ 的/ 覆盖/ 次序/ ;/ 最后/ ,/ 建立/ 回归/ 测试数据/ 生成/ 问题/ 的/ 数学模型/ ./ 3.1/ 基本概念/ 定义/ 1/ ./ 节点/ ./ 记/ 被/ 测/ 程序/ 为/ G/ ,/ 程序/ G/ 的/ 一个/ 节点/ ,/ 记为/ d/ ,/ 是/ 该/ 程序/ 的/ 一个/ 语句/ 块/ ,/ 满足/ 在/ 程序/ G/ 的/ 运行/ 中/ ,/ 要么/ 一起/ 执行/ ,/ 要么/ 都/ 不/ 被/ 执行/ ./ 节点/ 可以/ 是/ 一个/ 循环/ 结构/ 的/ 循环/ 条件/ ,/ 也/ 可以/ 是/ 一个/ 判断/ 结构/ 的/ 判断/ 条件/ ,/ 还/ 可能/ 是/ 一/ 或/ 多条/ 连续/ 语句/ ./ 每个/ 节点/ 有/ 相应/ 的/ 前置/ 约束条件/ 表达式/ ,/ 包含/ 该/ 条件/ 表达式/ 的/ 节点/ ,/ 称为/ 分支/ 节点/ ./ 定义/ 2/ ./ 路径/ ./ 程序/ G/ 的/ 一条/ 路径/ ,/ 记为/ p/ ,/ 为/ 程序/ G/ 在/ 一组/ 输入/ 上/ 运行/ 时/ ,/ 控制流/ 经过/ 的/ 节点/ 序列/ d1d2/ …/ dn/ ,/ 其中/ ,/ n/ 为/ 路径/ p/ 的/ 长度/ ./ 定义/ 3/ ./ 路径/ 相关/ ./ 记/ p1/ 和/ p2/ 为/ 程序/ G/ 的/ 2/ 条/ 路径/ ,/ 对应/ 的/ 节点/ 序列/ 分别/ 为/ d11/ ,/ d12/ ,/ …/ ,/ d1/ |/ p1/ |/ 和/ d21/ ,/ d22/ ,/ …/ ,/ d2/ |/ p2/ |/ ,/ 其中/ ,/ p1/ 和/ p2/ 分别/ 为/ p1/ 和/ p2/ 包含/ 的/ 节点/ 数/ ./ 如果/ p1/ ∩/ p2/ ≠/ / ,/ 那么/ ,/ 称/ 这/ 2/ 条/ 路径/ 是/ 相关/ 的/ ;/ 否则/ ,/ 称/ 这/ 2/ 条/ 路径/ 不/ 相关/ ./ 特别/ 的/ ,/ 当/ p1/ =/ p2/ 时/ ,/ 称/ 这/ 2/ 条/ 路径/ 完全/ 相关/ ./ 为了/ 考察/ 2/ 条/ 路径/ 是否/ 相关/ ,/ 需要/ 对/ 程序/ 的/ 路径/ 统一/ 编码/ ./ 为此/ ,/ 首先/ ,/ 对/ 程序控制/ 流图/ 的/ 所有/ 分支/ 节点/ 广度/ 优先/ 遍历/ ,/ 记录/ 这些/ 分支/ 节点/ 的/ 序号/ ;/ 然后/ ,/ 对/ 程序/ 插桩/ ,/ 并/ 记录/ 某/ 路径/ 在/ 不同/ 分支/ 节点/ 处/ ,/ 穿越/ 真假/ 分支/ 的/ 情况/ ,/ 穿越/ 真/ 分支/ 记为/ 1/ ;/ 否则/ ,/ 记/ 为/ -/ 1/ ,/ 如果/ 没有/ 穿越/ 该/ 分支/ 结点/ ,/ 记为/ 0/ ;/ 最后/ ,/ 根据/ 这些/ 真值/ ,/ 对/ 路径/ 进行/ 编码/ ,/ 编码/ 长度/ 等于/ 分支/ 节点/ 数/ ./ 如图/ 1/ 所示/ ,/ 某/ 程序/ 包含/ 如下/ 4/ 条/ 路径/ p1/ 、/ p2/ 、/ p3/ 以及/ p4/ ,/ 这些/ 路径/ 包含/ 的/ 节点/ 分别/ 为/ {/ 1/ ,/ 2/ ,/ 4/ ,/ 5/ ,/ 7/ }/ ,/ {/ 1/ ,/ 2/ ,/ 4/ ,/ 6/ ,/ 7/ }/ ,/ {/ 1/ ,/ 3/ ,/ 4/ ,/ 5/ ,/ 7/ }/ ,/ {/ 1/ ,/ 3/ ,/ 4/ ,/ 6/ ,/ 7/ }/ ./ 采用/ 上述/ 编码方法/ ,/ 这些/ 路径/ 的/ 编码/ 分别/ 为/ 11/ 、/ 1/ -/ 1/ 、/ -/ 11/ 以及/ -/ 1/ -/ 1/ ./ 与/ 采用/ 节点/ 序列/ 表示/ 某/ 路径/ 相比/ ,/ 采用/ 编码表示/ 路径/ ,/ 需要/ 的/ 编码/ 长度/ 更/ 短/ ,/ 且/ 所有/ 路径/ 的/ 编码/ 长度/ 均/ 相同/ ,/ 这/ 使得/ 考察/ 路径/ 的/ 相关性/ 更/ 容易/ ./ 定义/ 4/ ./ 路径/ 相似/ 度/ ./ 对于/ 程序/ G/ 的/ 2/ 条/ 路径/ p1/ 和/ p2/ ,/ 从首/ 节点/ 开始/ ,/ 这/ 2/ 条/ 路径/ 相同/ 编码/ 的/ 序列/ 长度/ ,/ 与/ 路径/ 编码/ 总长度/ 的/ 比/ ,/ 称为/ 路径/ p1/ 和/ p2/ 的/ 相似/ 度/ ,/ 记为/ S/ (/ p1/ ,/ p2/ )/ ,/ 那么/ ,/ S/ (/ p1/ ,/ p2/ )/ 可以/ 表示/ 为/ 其中/ ,/ α/ l/ (/ p1/ ,/ p2/ )/ =/ 由/ 定义/ 4/ 可以/ 看出/ :/ (/ 1/ )/ 当/ 0/ </ S/ (/ p1/ ,/ p2/ )/ </ 1/ 时/ ,/ 路径/ p1/ 和/ p2/ 至少/ 存在/ 1/ 个/ 从首/ 节点/ 出发/ 的/ 相同/ 节点/ ;/ (/ 2/ )/ S/ (/ p1/ ,/ p2/ )/ 越大/ ,/ 这/ 2/ 条/ 路径/ 的/ 相关性/ 越大/ ;/ 特别/ 的/ ,/ 当/ S/ (/ p1/ ,/ p2/ )/ =/ 1/ 时/ ,/ 路径/ p1/ 和/ p2/ 完全/ 相关/ ./ 定义/ 5/ ./ 路径/ 差异/ 度/ ./ 对于/ 程序/ G/ 的/ 2/ 条/ 路径/ p1/ 和/ p2/ ,/ 这/ 2/ 条/ 路径/ 真值/ 不同/ 的/ 分支/ 节点/ 数/ 与/ 路径/ 编码/ 总长度/ 的/ 比/ ,/ 称为/ 路径/ p1/ 和/ p2/ 的/ 差异/ 度/ ,/ 记为/ D/ (/ p1/ ,/ p2/ )/ ,/ 那么/ ,/ D/ (/ p1/ ,/ p2/ )/ 可以/ 表示/ 为/ 其中/ ,/ β/ l/ (/ p1/ ,/ p2/ )/ =/ 由/ 定义/ 5/ 可以/ 看出/ :/ (/ 1/ )/ 当/ 0/ </ D/ (/ p1/ ,/ p2/ )/ </ 1/ 时/ ,/ p1/ 和/ p2/ 至少/ 存在/ 一个/ 相同/ 的/ 分支/ 节点/ ;/ (/ 2/ )/ D/ (/ p1/ ,/ p2/ )/ 越小/ ,/ 这/ 2/ 条/ 路径/ 的/ 相关性/ 越大/ ;/ 特别/ 的/ ,/ 当/ D/ (/ p1/ ,/ p2/ )/ =/ 0/ 时/ ,/ p1/ 和/ p2/ 完全/ 相关/ ./ 路径/ 相似/ 度/ 和/ 差异/ 度均/ 能/ 从/ 某/ 一/ 侧面/ ,/ 反映/ 2/ 条/ 路径/ p1/ 和/ p2/ 的/ 相关度/ ./ 对于/ 待/ 覆盖/ 的/ 一条/ 目标/ 路径/ 以及/ 任意/ 一个/ 测试数据/ ,/ 由/ 定义/ 可以/ 得出/ :/ (/ 1/ )/ 路径/ 相似/ 度/ 可/ 表明/ 从/ 第一个/ 节点/ 开始/ ,/ 测试数据/ 穿越/ 的/ 路径/ 对/ 目标/ 路径/ 的/ 接近/ 程度/ ./ 在/ 程序/ 中/ ,/ 由于/ 前面/ 的/ 节点/ 往往/ 对/ 后面/ 的/ 节点/ 具有/ 占优/ 关系/ ,/ 所以/ ,/ 在/ 生成/ 覆盖/ 目标/ 路径/ 的/ 测试数据/ 过程/ 中/ ,/ 路径/ 相似/ 度/ 可/ 用于/ 评价/ 测试数据/ 从/ 程序/ 入口/ 开始/ ,/ 依次/ 满足/ 目标/ 路径/ 分支/ 节点/ 真值/ 的/ 序列/ 长度/ ./ (/ 2/ )/ 与/ 路径/ 相似/ 度/ 相比/ ,/ 路径/ 差异/ 度/ 更/ 能/ 反映/ 2/ 条/ 路径/ 所有/ 分支/ 节点/ 的/ 差异/ ./ 测试数据/ 穿越/ 的/ 路径/ 与/ 目标/ 路径/ 的/ 差异/ 度/ ,/ 反映/ 了/ 测试数据/ 没有/ 满足/ Page5/ 的/ 目标/ 路径/ 上/ 的/ 分支/ 节点/ 真值/ 的/ 个数/ ./ 如果/ 不同/ 的/ 测试数据/ 覆盖/ 相同/ 的/ 分支/ ,/ 这/ 说明/ ,/ 这些/ 测试数据/ 的/ 值/ 或/ 相互/ 关系/ 可能/ 具有/ 某些/ 共同/ 的/ 特征/ ./ 例如/ ,/ 不同/ 测试数据/ 的/ 值/ ,/ 同时/ 都/ 满足/ 一定/ 的/ 谓词/ 条件/ ,/ 那么/ ,/ 这些/ 测试数据/ 能够/ 覆盖/ 相同/ 的/ 分支/ ./ 显然/ ,/ 2/ 条/ 路径/ 的/ 差异/ 度越/ 小/ ,/ 这些/ 路径/ 之间/ 的/ 相关性/ 就/ 越/ 高/ ,/ 从而/ 穿越/ 这/ 两条/ 路径/ 的/ 测试数据/ 覆盖/ 相同/ 的/ 分支/ 与/ 节点/ 数越/ 多/ ./ 如果/ 能/ 从/ 与/ 目标/ 路径/ 具有/ 相关性/ 的/ 路径/ 中/ 提取/ 尽可能/ 多/ 的/ 测试数据/ 信息/ ,/ 这/ 意味着/ ,/ 可以/ 引导/ 测试数据/ 的/ 执行/ 轨迹/ 逐渐/ 向/ 目标/ 路径/ 收敛/ ,/ 进而/ 得到/ 覆盖/ 目标/ 路径/ 的/ 测试数据/ ./ 基于/ 以上/ 分析/ ,/ 本文/ 在/ 构建/ 测试数据/ 生成/ 问题/ 的/ 数学模型/ 时/ ,/ 选择/ 路径/ 相似/ 度/ 作为/ 目标/ 函数/ ,/ 而/ 在/ 选择/ 已有/ 测试数据/ 时/ ,/ 基于/ 路径/ 差异/ 度/ ./ 3.2/ 基于/ 相关性/ 的/ 目标/ 路径/ 排序/ 鉴于/ 存在/ 多条/ 需要/ 覆盖/ 的/ 目标/ 路径/ ,/ 且/ 生成/ 覆盖/ 不同/ 路径/ 的/ 测试数据/ ,/ 需要/ 的/ 计算资源/ 不同/ ,/ 因此/ ,/ 合理/ 的/ 目标/ 路径/ 覆盖/ 顺序/ ,/ 能够/ 有效/ 提高/ 测试数据/ 生成/ 效率/ ./ 现有/ 的/ 确定/ 目标/ 路径/ 覆盖/ 顺序/ 的/ 方法/ 有/ 随机/ 法/ 和/ 深度/ 优先/ 搜索/ 法等/ [/ 23/ ]/ ./ 鉴于/ 回归/ 测试/ 中/ 已/ 存在/ 原有/ 的/ 测试数据/ 集/ ,/ 而/ 不同/ 的/ 目标/ 路径/ 与/ 已有/ 测试数据/ 集/ 覆盖/ 的/ 路径/ 具有/ 不同/ 的/ 相关度/ ,/ 如果/ 利用/ 路径/ 相关性/ ,/ 确定/ 被/ 覆盖/ 的/ 目标/ 路径/ 顺序/ ,/ 那么/ ,/ 将会/ 利用/ 已有/ 的/ 测试数据/ 集/ 提供/ 的/ 信息/ ,/ 提高/ 测试数据/ 生成/ 效率/ ./ 记/ 程序/ G/ 所有/ 修改/ 的/ 节点/ 构成/ 的/ 集合/ 为/ C/ =/ {/ c1/ ,/ c2/ ,/ …/ ,/ cm/ }/ ,/ 所有/ 需要/ 覆盖/ 的/ 目标/ 路径/ 构成/ 的/ 集合/ 为/ P/ =/ {/ p1/ ,/ p2/ ,/ …/ ,/ ps/ }/ ,/ 其中/ ,/ m/ 和/ s/ 分别/ 为/ 修改/ 节点/ 和/ 目标/ 路径/ 数/ ,/ 根据/ 修改/ 节点/ 与/ 目标/ 路径/ 的/ 关系/ ,/ 可以/ 构造/ 如下/ 相关矩阵/ ,/ 记/ 为/ γ/ (/ C/ ,/ P/ )/ :/ 式/ 中/ ,/ γ/ ij/ ∈/ {/ 0/ ,/ 1/ }/ ,/ 且/ γ/ ij/ =/ 1/ 表示/ 路径/ pj/ 经过/ 修改/ 节点/ ci/ ;/ γ/ ij/ =/ 0/ 表示/ pj/ 不/ 经过/ ci/ ./ 根据/ 式/ (/ 2/ )/ ,/ 容易/ 知道/ ,/ 如果/ 一个/ 目标/ 路径/ 包含/ 的/ 修改/ 节点/ 越/ 少/ ,/ 那么/ ,/ 该/ 路径/ 与/ 程序修改/ 之前/ 的/ 某/ 一条/ 或/ 几条/ 路径/ 的/ 路径/ 相关性/ 就/ 越/ 大/ ,/ 进而/ 穿越/ 这些/ 路径/ 的/ 测试数据/ ,/ 对/ 生成/ 覆盖/ 该/ 目标/ 路径/ 的/ 测试数据/ 越有/ 利用/ 价值/ ./ 鉴于/ 此/ ,/ 基于/ γ/ (/ C/ ,/ P/ )/ ,/ 提取/ 反映/ 程序/ 变动/ 前后/ ,/ 目标/ 路径/ pj/ 变动/ 的/ 节点/ 数/ ,/ 记为/ N/ (/ pj/ ,/ C/ )/ ,/ 其/ 表达式/ 为/ 此外/ ,/ 根据/ 式/ (/ 1/ )/ ,/ 在/ 程序/ G/ 中/ ,/ 第/ 1/ 个/ 修改/ 节点/ 的/ 位置/ 越靠/ 后/ ,/ 该/ 路径/ 与/ 程序修改/ 之前/ 的/ 某/ 一条/ 或/ 几条/ 路径/ 的/ 相关性/ 就/ 越/ 大/ ,/ 那么/ ,/ 使用/ 已有/ 测试数据/ 求解/ ,/ 较/ 容易/ 生成/ 覆盖/ 该/ 路径/ 的/ 测试数据/ ./ 基于/ γ/ (/ C/ ,/ P/ )/ ,/ 第/ 1/ 个/ 修改/ 节点/ 的/ 位置/ ,/ 记为/ F/ (/ pj/ )/ ,/ 可以/ 表示/ 为/ 对待/ 覆盖/ 的/ 目标/ 路径/ 排序/ 时/ ,/ 还应/ 考虑/ 目标/ 路径/ 包含/ 的/ 节点/ 数/ ./ 一般而言/ ,/ 一条/ 目标/ 路径/ 包含/ 的/ 节点/ 数越/ 多/ ,/ 那么/ ,/ 生成/ 的/ 测试数据/ 应当/ 满足/ 的/ 分支/ 谓词/ 条件/ 越/ 多/ ,/ 从而/ 生成/ 能够/ 覆盖/ 该/ 路径/ 的/ 测试数据/ 越/ 困难/ ./ 这/ 表明/ ,/ 该/ 目标/ 路径/ 在/ 排序/ 中/ 应该/ 越靠/ 后/ ,/ 使得/ 在/ 生成/ 覆盖/ 该/ 目标/ 路径/ 的/ 测试数据/ 过程/ 中/ ,/ 可以/ 利用/ 更/ 多/ 已经/ 得到/ 的/ 覆盖/ 其他/ 路径/ 的/ 测试数据/ ,/ 而/ 覆盖/ 程序/ G/ 其他/ 路径/ 的/ 测试数据/ ,/ 包含/ 的/ 满足/ 分支/ 谓词/ 条件/ 的/ 相关/ 信息/ ,/ 可以/ 用来/ 提高/ 覆盖/ 节点/ 数较/ 多/ 的/ 目标/ 路径/ 的/ 测试数据/ 生成/ 效率/ ./ 综合/ 上述/ 因素/ ,/ 目标/ 路径/ pj/ 被/ 覆盖/ 的/ 优先级/ ,/ 记为/ PR/ (/ pj/ )/ ,/ 可以/ 表示/ 为/ PR/ (/ pj/ )/ =/ -/ w1N/ (/ pj/ ,/ C/ )/ +/ w2F/ (/ pj/ )/ -/ w3/ |/ pj/ |/ (/ 6/ )/ 式/ 中/ w1/ 、/ w2/ 以及/ w3/ 分别/ 为/ N/ (/ pj/ ,/ C/ )/ 、/ F/ (/ pj/ )/ 以及/ |/ pj/ |/ 的/ 权值/ ,/ 且/ w1/ / w2/ / w3/ >/ 0/ ./ 根据/ 式/ (/ 6/ )/ ,/ 能够/ 得到/ 所有/ 目标/ 路径/ 的/ 覆盖/ 优先级/ ./ 这样一来/ ,/ 对于/ 所有/ 需要/ 覆盖/ 的/ 目标/ 路径/ P/ ,/ 按照/ 覆盖/ 优先级/ 从大到/ 小/ 排列/ [/ 26/ ]/ ,/ 即可/ 得到/ 排序/ 后/ 的/ 目标/ 路径/ ,/ 记为/ P/ / =/ {/ p/ / 3.3/ 测试数据/ 生成/ 问题/ 的/ 数学模型/ 测试数据/ 生成/ 问题/ 可以/ 描述/ 为/ :/ 对于/ 修改/ 后/ 的/ 程序/ G/ ,/ 输入/ 向量/ 为/ 狓/ ,/ 输入/ 域/ 为/ X/ ,/ 在/ X/ 内/ 生成/ 测试数据/ x1/ ,/ x2/ ,/ …/ ,/ xs/ ,/ 且/ 以/ x1/ ,/ x2/ ,/ …/ ,/ xs/ 为/ 程序/ G/ 的/ 输入/ ,/ 执行/ G/ 之后/ ,/ 穿越/ 的/ 路径/ 分别/ 为/ p/ / 对于/ 程序/ G/ 的/ 某/ 一/ 输入/ 向量/ 狓/ ,/ 记/ 狓/ 穿越/ 的/ 路径/ 为/ p/ (/ 狓/ )/ ./ 根据/ 前述/ 路径/ 相关性/ 定义/ ,/ 如果/ p/ (/ 狓/ )/ 与/ 第/ j/ 个/ 目标/ 路径/ p/ / 测试数据/ ./ 此时/ ,/ 在/ 输入/ 域/ 中/ ,/ S/ (/ p/ (/ 狓/ )/ ,/ p/ / 值/ ,/ D/ (/ p/ (/ 狓/ )/ ,/ p/ / 标/ 路径/ p/ / S/ (/ p/ (/ 狓/ )/ ,/ p/ / 题/ ./ 考虑/ 程序/ G/ 靠近/ 程序/ 入口/ 的/ 节点/ ,/ 对/ 后面/ 的/ 节点/ 具有/ 占优/ 关系/ ,/ 本文/ 以/ 路径/ 相似/ 度/ 作为/ 优化/ 问题/ 的/ 目标/ 函数/ ./ 因此/ ,/ 对于/ 所有/ 目标/ 路径/ 而言/ ,/ 生成/ 覆盖/ 目标/ Page61/ ,/ p/ / 路径/ p/ / 求取/ S/ (/ p/ (/ 狓/ )/ ,/ p/ / 最大值/ 问题/ ,/ 其/ 数学模型/ 为式/ 中/ ,/ fj/ (/ 狓/ )/ =/ S/ (/ p/ (/ 狓/ )/ ,/ p/ / 由式/ (/ 7/ )/ 可以/ 看出/ ,/ 本文/ 的/ 测试数据/ 生成/ 问题/ 建模/ 为/ 一个多/ 目标/ 优化/ 问题/ ,/ 使得/ 生成/ 的/ 测试数据/ 集/ 能够/ 覆盖/ 所有/ 的/ 目标/ 路径/ ./ 但是/ ,/ 该/ 问题/ 与/ 传统/ 的/ 多/ 目标/ 优化/ 问题/ 又/ 有/ 很大/ 区别/ ,/ 主要/ 体现/ 在/ :/ (/ 1/ )/ 传统/ 的/ 多/ 目标/ 优化/ 问题/ 在/ 决策/ 变量/ 所在/ 的/ 域/ 中/ ,/ 寻找/ 一个/ Pareto/ 解集/ ,/ 使得/ 该解/ 集中/ 任一/ 解/ 对应/ 的/ 所有/ 目标/ 同时/ 达到/ 最优/ ;/ 式/ (/ 7/ )/ 表示/ 的/ 优化/ 问题/ 是/ 在/ 测试数据/ 所在/ 的/ 域/ 中/ ,/ 寻找/ 一个/ 测试数据/ 集/ ,/ 使得/ 该/ 集合/ 中/ 任一/ 测试数据/ 仅/ 针对/ 某一/ 目标/ 达到/ 最优/ ;/ (/ 2/ )/ 传统/ 多/ 目标/ 优化/ 问题/ 的/ 目标/ 函数/ 求解/ 没有/ 先后顺序/ ;/ 式/ (/ 7/ )/ 表示/ 的/ 优化/ 问题/ 的/ 目标/ 函数/ 求解/ 具有/ 先后顺序/ ,/ 具体/ 的/ 讲/ ,/ 只有/ 生成/ 使得/ fj/ (/ 狓/ )/ 最大/ 的/ 测试数据/ ,/ 才/ 进一步/ 生成/ 使得/ fj/ +/ 1/ (/ 狓/ )/ 最大/ 的/ 测试数据/ ,/ 直到/ 生成/ 使得/ fs/ (/ 狓/ )/ 最大/ 的/ 测试数据/ ./ 这样/ 做/ 的/ 动机/ 是/ ,/ 充分利用/ 已/ 覆盖/ 其他/ 路径/ 测试数据/ 的/ 蕴含/ 信息/ ,/ 提高/ 生成/ 测试数据/ 的/ 效率/ ./ 4/ 基于/ 遗传算法/ 的/ 测试数据/ 生成/ 本/ 节/ 主要/ 阐述/ 式/ (/ 7/ )/ 描述/ 优化/ 问题/ 的/ 求解/ 方法/ ,/ 思想/ 是/ :/ 基于/ 遗传算法/ ,/ 采用/ 传统/ 的/ 遗传/ 策略/ 进化/ 种群/ ,/ 按照/ 式/ (/ 7/ )/ 的/ 目标/ 函数/ 顺序/ ,/ 依次/ 生成/ 使得/ 这些/ 目标/ 函数/ 值/ 最大/ 的/ 测试数据/ ;/ 在/ 种群/ 进化/ 过程/ 中/ ,/ 按照/ 路径/ 差异/ 度/ 准则/ ,/ 利用/ 部分/ 已/ 覆盖/ 路径/ 的/ 测试数据/ ,/ 编码/ 后/ 替换/ 当前/ 进化/ 种群/ 的/ 个体/ ,/ 使得/ 执行/ 一次/ 遗传算法/ ,/ 生成/ 所有/ 覆盖/ 目标/ 路径/ 的/ 测试数据/ ./ 4.1/ 覆盖/ 已有/ 路径/ 的/ 测试数据/ 选择/ 采用/ 遗传算法/ 求解/ 优化/ 问题/ 时/ ,/ 如果/ 进化/ 种群/ 的/ 性能/ 高/ ,/ 那么/ ,/ 将/ 有利于/ 得到/ 期望/ 的/ 最优/ 解/ ./ 因此/ ,/ 生成/ 覆盖/ 某一/ 目标/ 路径/ 的/ 测试数据/ 时/ ,/ 采用/ 合适/ 的/ 方法/ ,/ 提高/ 进化/ 种群/ 的/ 性能/ ,/ 是/ 十分必要/ 的/ ./ 如/ 第/ 2/ 节/ 所述/ ,/ Bueno/ 和/ Maragathavalli/ 等/ 人/ [/ 24/ -/ 25/ ]/ 采用/ 遗传算法/ 生成/ 覆盖/ 多路径/ 的/ 测试数据/ 时/ ,/ 以/ 穿越/ 的/ 路径/ 相似/ 为/ 准则/ ,/ 选择/ 部分/ 已/ 生成/ 的/ 测试数据/ ,/ 替换/ 进化/ 种群/ 的/ 个体/ ,/ 以/ 生成/ 覆盖/ 其他/ 目标/ 路径/ 的/ 测试数据/ ./ 但是/ ,/ 该/ 方法/ 并/ 没有/ 充分利用/ 已有/ 测试数据/ ./ 如图/ 1/ 所示/ ,/ 假设/ 待/ 覆盖/ 的/ 目标/ 路径/ 由/ 语句/ 1/ 、/ 3/ 、/ 4/ 、/ 6/ 以及/ 7/ 组成/ ,/ 其余/ 路径/ 均/ 有/ 测试数据/ 覆盖/ ./ 如果/ 以/ 路径/ 相似/ 度/ 作为/ 测试数据/ 选择/ 的/ 准则/ ,/ 那么/ ,/ 只能/ 选择/ 1/ 条/ 与/ 待/ 覆盖/ 的/ 目标/ 路径/ 相似/ 度为/ 0.5/ 的/ 路径/ 对应/ 的/ 测试数据/ ,/ 该/ 路径/ 由/ 语句/ 1/ 、/ 3/ 、/ 4/ 、/ 5/ 以及/ 7/ 组成/ ;/ 如果/ 以/ 路径/ 差异/ 度/ 作为/ 选择/ 的/ 准则/ ,/ 那么/ ,/ 将/ 能/ 选择/ 2/ 条/ 与/ 待/ 覆盖/ 的/ 目标/ 路径/ 差异/ 度均/ 为/ 0.5/ 的/ 路径/ 对应/ 的/ 测试数据/ ,/ 其中/ ,/ 第/ 1/ 条/ 路径/ 由/ 语句/ 1/ 、/ 2/ 、/ 4/ 、/ 6/ 以及/ 7/ 组成/ ,/ 而/ 第/ 2/ 条/ 路径/ 由/ 语句/ 1/ 、/ 3/ 、/ 4/ 、/ 5/ 以及/ 7/ 组成/ ./ 虽然/ 这/ 2/ 个/ 准则/ 都/ 能够/ 利用/ 已有/ 的/ 测试数据/ ,/ 提高/ 进化/ 种群/ 的/ 性能/ ,/ 但是/ ,/ 以/ 路径/ 差异/ 度/ 作为/ 测试数据/ 选择/ 的/ 准则/ ,/ 显然/ 能够/ 利用/ 更/ 多/ 已/ 覆盖/ 路径/ 对应/ 的/ 测试数据/ ./ 特别/ 是/ ,/ 当/ 程序修改/ 节点/ 的/ 位置/ 在/ 控制流/ 图中/ 比较/ 靠/ 前/ 时/ ,/ 使用/ 路径/ 相似/ 度/ 准则/ ,/ 很难/ 找到/ 满足条件/ 的/ 已有/ 测试数据/ ;/ 而/ 使用/ 路径/ 差异/ 度/ 准则/ ,/ 却/ 容易/ 找到/ 满足条件/ 的/ 已有/ 测试数据/ ./ 现在/ 分析/ 路径/ 与/ 输入/ 向量/ 之间/ 的/ 关系/ ./ 记/ 程序/ G/ 的/ 所有/ 分支/ 节点/ 包含/ 的/ 条件/ 表达式/ 构成/ 的/ 集合/ 为/ {/ H1/ (/ 狓/ )/ ,/ H2/ (/ 狓/ )/ ,/ …/ ,/ Hn/ (/ 狓/ )/ }/ ,/ 将/ p/ (/ 狓/ )/ 与/ p/ / 相同/ 的/ 分支/ 节点/ 条件/ 表达式/ 前移/ ,/ 能够/ 得到/ 一个/ 新/ 的/ 分支/ 节点/ 条件/ 表达式/ 序列/ ,/ 该/ 序列/ 可以/ 表示/ 为/ H/ / 1/ (/ 狓/ )/ ,/ …/ ,/ H/ / n/ (/ 狓/ )/ ,/ 其中/ ,/ H/ / j/ 取值/ 不/ 相同/ 的/ 分支/ 节点/ 条件/ 表达式/ ,/ 而/ H/ / 与/ p/ / H/ / 的/ 分支/ 节点/ 条件/ 表达式/ ./ 进一步/ ,/ 统计/ H/ / nD/ (/ p/ (/ 狓/ )/ ,/ pnD/ (/ p/ (/ 狓/ )/ ,/ pH/ / 越小/ ,/ 满足/ 目标/ 路径/ 的/ 分支/ 条件/ 表达式/ 的/ 输入/ 分量/ 1/ (/ 狓/ )/ ,/ …/ ,/ H/ / 就/ 越/ 多/ ./ 在/ 回归/ 测试/ 中/ ,/ 一旦/ 被测/ 程序/ 确定/ ,/ 那么/ ,/ H/ / 变/ 的/ ./ 因此/ ,/ 路径/ 差异/ 度/ D/ (/ p/ (/ 狓/ )/ ,/ p/ / 值越/ 小/ ,/ 此时/ ,/ 通过/ 种群/ 进化/ 求解/ 的/ 输入/ 分量/ 个数/ 就/ 越少/ ./ 根据上述/ 分析/ ,/ 选择/ 覆盖/ 程序修改/ 后/ 路径/ 的/ 测试数据/ 方法/ 如下/ :/ 首先/ ,/ 生成/ 并/ 更新/ 覆盖/ 部分/ 目标/ 路径/ 的/ 已有/ 测试数据/ 构成/ 的/ 集合/ ,/ 记为/ T/ ,/ 该/ 集合/ 包含/ 的/ 元素/ 为/ :/ (/ 1/ )/ 覆盖/ 程序修改/ 没有/ 影响/ 的/ 目标/ 路径/ 的/ 测试数据/ ;/ (/ 2/ )/ 程序修改/ 之后/ ,/ 在/ 测试数据/ 生成/ 过程/ 中/ ,/ 获取/ 的/ 穿越/ 待/ 覆盖/ 目标/ 路径/ 的/ 测试数据/ ;/ 然后/ ,/ 对于/ 须/ 覆盖/ 的/ 目标/ 路径/ p/ / 数据/ 覆盖/ 的/ 路径/ 与/ p/ / 或/ 等于/ 某一/ 阈值/ 的/ 测试数据/ ,/ 替换/ 当前/ 进化/ 种群/ 的/ 部分/ 个体/ ./ Page74/ ./ 2/ 进化/ 种群/ 部分/ 个体/ 的/ 替代/ 当/ 种群/ 进化/ 以/ 生成/ 覆盖/ 目标/ 路径/ p/ / 据时/ ,/ 记/ 当前/ 种群/ 需要/ 替代/ 的/ 个体/ 数为/ e/ ,/ 采用/ 第/ 4.1/ 节/ 给出/ 的/ 方法/ ,/ 从/ 集合/ T/ 中/ 选择/ 多个/ 覆盖/ 已有/ 路径/ 的/ 测试数据/ ,/ 替换/ 当前/ 种群/ 的/ e/ 个/ 个体/ ./ 记/ 集合/ T/ 中/ 满足/ 已/ 覆盖/ 路径/ 与/ p/ / 的/ 测试数据/ 个数/ 为/ e/ ,/ 那么/ ,/ 存在/ 以下/ 2/ 种/ 情况/ :/ (/ 1/ )/ e/ </ e/ ;/ 这/ 说明/ ,/ 集合/ T/ 中/ 满足条件/ 的/ 测试数据/ 不够/ ./ 此时/ ,/ 选择/ 上述/ e/ 个/ 覆盖/ 已有/ 路径/ 的/ 测试数据/ ,/ 与/ 随机/ 生成/ 的/ e/ -/ e/ 个/ 测试数据/ 一起/ ,/ 替换/ 当前/ 种群/ 的/ e/ 个/ 个体/ ./ (/ 2/ )/ e/ / e/ ;/ 这/ 说明/ ,/ 集合/ T/ 中/ 满足条件/ 的/ 测试数据/ 比较/ 多/ ./ 此时/ ,/ 需要/ 从/ e/ 个/ 测试数据/ 中/ 选择/ e/ 个/ ,/ 替换/ 当前/ 种群/ 的/ 部分/ 个体/ ./ 鉴于/ 新/ 生成/ 的/ 测试数据/ 满足/ 修改/ 节点/ 的/ 分支/ 条件/ 表达式/ ,/ 因此/ ,/ 选择/ e/ 个/ 用于/ 替换/ 个体/ 的/ 测试数据/ 时/ ,/ 优先/ 考虑/ 新/ 生成/ 的/ 测试数据/ ./ 针对/ 上述/ 2/ 种/ 情况/ ,/ 首先/ ,/ 构造/ 集合/ T/ 的/ 数据结构/ 为/ 带头/ 结点/ 的/ 链表/ ,/ 链表/ 中/ 的/ 数据/ 为/ 能够/ 覆盖/ 修改/ 后/ 程序/ 目标/ 路径/ 的/ 原有/ 测试数据/ ,/ 当/ 生成/ 覆盖/ 目标/ 路径/ 的/ 新/ 的/ 测试数据/ 后/ ,/ 更新/ 集合/ T/ ,/ 在/ 头/ 结点/ 指向/ 的/ 位置/ 插入/ 新/ 生成/ 的/ 测试数据/ ./ 可以/ 看出/ ,/ 集合/ T/ 在/ 链表/ 中/ 的/ 测试数据/ 穿越/ 路径/ 的/ 顺序/ 与/ 问题/ 模型/ 的/ 目标/ 路径/ 顺序/ 相反/ ;/ 其次/ ,/ 进化/ 种群/ 部分/ 个体/ 的/ 替代/ 策略/ ,/ 如/ 算法/ 1/ 所示/ ,/ 从头/ 结点/ 开始/ ,/ 按照/ 第/ 4.1/ 节/ 设定/ 的/ 标准/ ,/ 从/ 集合/ T/ 中/ 依次/ 选择/ 满足条件/ 的/ 测试数据/ ,/ 编码/ 后/ 对/ 当前/ 种群/ Pop/ 的/ 前/ e/ 个/ 个体/ 替换/ ,/ 如果/ 集合/ T/ 的/ 元素/ 遍历/ 完毕/ ,/ 且/ 替换/ 的/ 个体/ 数/ e/ </ e/ ,/ 那么/ ,/ 随机/ 生成/ e/ -/ e/ 个/ 测试数据/ ,/ 编码/ 后/ 置换/ 余下/ 的/ 个体/ ./ 算法/ 1/ ./ 进化/ 种群/ 部分/ 个体/ 替代/ 的/ 伪/ 代码/ ./ 输入/ :/ &/ Pop/ ,/ e/ ,/ &/ T/ 输出/ :/ 替换/ 后/ 的/ 种群/ BEGIN1/ ./ e/ =/ 0/ ;/ i/ =/ 0/ ;/ 2/ ./ WHILE/ (/ e/ </ e/ &&/ !/ EOF/ )/ 2.1/ 狓/ =/ GetElem/ (/ T/ ,/ i/ )/ 2.2/ IF/ (/ D/ (/ p/ (/ 狓/ )/ ,/ p/ / 2.2/ ./ 1Pop/ [/ e/ ]/ =/ Code/ (/ 狓/ )/ ;/ 2.2/ ./ 2e/ ++/ ;/ 3/ ./ i/ ++/ ;/ 4/ ./ ENDWHILE5/ ./ WHILE/ (/ e/ </ e/ )/ 5.1/ Pop/ [/ e/ ]/ =/ Code/ (/ Random/ (/ )/ )/ ;/ 6/ ./ ENDWHILEEND/ 执行/ 替代/ 算法/ 后/ 的/ 种群/ 由/ 以下/ 个体/ 组成/ :/ (/ 1/ )/ e/ 个/ 来源于/ 集合/ T/ 中/ 满足/ 差异/ 度/ 阈值/ 的/ 测试数据/ ,/ 该/ 部分/ 个体/ 穿越/ 的/ 路径/ 与/ p/ / 关度/ ,/ 对应/ 的/ 测试数据/ 满足/ p/ / 达式/ ./ (/ 2/ )/ 当/ e/ </ e/ 时/ ,/ 随机/ 生成/ 的/ e/ -/ e/ 个/ 个体/ ./ (/ 3/ )/ 替代/ 前/ ,/ 生成/ 覆盖/ 目标/ 路径/ p/ / 由/ 种群/ 构成/ 可以/ 看出/ ,/ 执行/ 替代/ 算法/ 后/ ,/ 既/ 可/ 利用/ 原有/ 测试数据/ 和/ 新/ 生成/ 的/ 测试数据/ 引导/ 种群/ 进化/ ,/ 又/ 可/ 利用/ 生成/ 覆盖/ 目标/ 路径/ p/ / 在/ 种群/ 的/ 信息/ ,/ 那么/ ,/ 执行/ 替代/ 算法/ 后/ ,/ 种群/ 的/ 性能/ 将/ 明显/ 提升/ ,/ 且/ 具有/ 较/ 好/ 的/ 多样性/ ./ 4.3/ 路径/ 差异/ 度/ 阈值/ 的/ 设定/ 考虑/ 到/ 不同/ 程序/ 中/ ,/ 目标/ 路径/ 数/ 与/ 集合/ T/ 包含/ 的/ 测试数据/ 数/ 不同/ ,/ 本文/ 的/ 差异/ 度/ 阈值/ 设定/ 如下/ :/ 由式/ (/ 8/ )/ 可以/ 看出/ :/ (/ 1/ )/ 当/ z/ 等于/ 1/ -/ 1/ // n/ 时/ ,/ 要求/ 已/ 穿越/ 的/ 路径/ 与/ 目标/ 路径/ ,/ 至少/ 有/ 一个/ 节点/ 相同/ ,/ 此时/ ,/ 这些/ 路径/ 具有/ 相关性/ ./ 因此/ ,/ 集合/ T/ 中/ 所有/ 穿越/ 与/ 目标/ 路径/ 具有/ 相关性/ 路径/ 的/ 测试数据/ ,/ 均/ 可以/ 作为/ 选择/ 的/ 测试数据/ ;/ (/ 2/ )/ 当/ z/ 等于/ 11/ // n/ ,/ 此时/ ,/ 要求/ 已/ 穿越/ 的/ 路径/ 与/ 目标/ 路径/ ,/ 最多/ 有/ 一个/ 节点/ 不/ 相同/ ,/ 那么/ ,/ 这些/ 路径/ 与/ 目标/ 路径/ 将/ 具有/ 最大/ 的/ 相关性/ ./ 因此/ ,/ 选择/ 集合/ T/ 中/ 穿越/ 这些/ 路径/ 的/ 测试数据/ ./ 进一步/ ,/ |/ P/ / |/ 越/ 大于/ e/ ,/ 那么/ ,/ z/ 的/ 值/ 越/ 小/ ,/ 此时/ ,/ 要求/ 从/ 集合/ T/ 中/ 选择/ 的/ 测试数据/ 覆盖/ 的/ 路径/ ,/ 与/ 目标/ 路径/ 的/ 相关性/ 越大/ ./ 需要/ 说明/ 的/ 是/ ,/ 通过/ 式/ (/ 8/ )/ 的/ 差异/ 度/ 阈值/ ,/ 本文/ 提供/ 了/ 一种/ 已有/ 测试数据/ 的/ 利用/ 方法/ ,/ 使得/ 从/ 集合/ T/ 中/ 选择/ 的/ 测试数据/ 覆盖/ 的/ 路径/ ,/ 与/ 当前/ 目标/ 路径/ 具有/ 较大/ 的/ 相关性/ ./ 但是/ ,/ 该/ 方法/ 设定/ 的/ 差异/ 度/ 阈值/ 未必/ 是/ 最优/ 的/ ,/ 还/ 可以/ 通过/ 其他/ 的/ 方式/ ,/ 设置/ 更加/ 合理/ 的/ 差异/ 度/ 阈值/ ./ 关于/ 这方面/ 的/ 内容/ ,/ 已经/ 超出/ 本文/ 的/ 范围/ ./ 4.4/ 性能/ 分析/ 对/ 遗传算法/ 每/ 一代/ 种群/ 的/ 进化/ 过程/ 分析/ ,/ 由于/ 对/ 种群/ 中/ 个体/ 计算/ 适应度/ 时/ 需要/ 执行/ 被测/ 程序/ ,/ 因此/ ,/ 算法/ 的/ 时间/ 复杂度/ 主要/ 由/ 适应度/ 函数/ 的/ 求解/ 次/ Page8/ 数/ 和/ 复杂度/ 决定/ ./ 假设/ 种群/ 规模/ 为/ h/ ,/ 目标/ 路径/ 节点/ 数为/ n/ ,/ 任/ 一个/ 体/ 计算/ 适应度/ 需/ 调用/ 被测/ 程序/ ,/ 且/ 与/ 被/ 测/ 程序/ 的/ n/ 个/ 节点/ 对比/ 路径/ 相似/ 度/ ,/ 因此/ ,/ 传统/ 方法/ 计算/ 所有/ 个体/ 的/ 适应度/ 的/ 时间/ 复杂度/ 为/ O/ (/ h/ ×/ n/ )/ ./ 在/ 种群/ 进化/ 过程/ 中/ ,/ 当/ 使用/ 本文/ 方法/ 生成/ 穿越/ 新/ 的/ 未/ 覆盖/ 目标/ 路径/ 的/ 测试数据/ 时/ ,/ 进化/ 种群/ 需要/ 替换/ 部分/ 个体/ ,/ 此时/ ,/ 需/ 额外/ 计算/ 集合/ T/ 中/ 测试数据/ 所/ 覆盖/ 路径/ 与/ 目标/ 路径/ 的/ 差异/ 度/ ,/ 令/ 路径/ 差异/ 度/ 的/ 计算/ 复杂度/ 为/ θ/ ,/ 可以/ 得到/ ,/ 本文/ 方法/ 的/ 最大/ 时间/ 复杂度/ 为/ O/ (/ h/ ×/ n/ )/ +/ T/ ×/ O/ (/ θ/ )/ ./ 而/ 集合/ T/ 中/ 测试数据/ 穿越/ 的/ 路径/ 已知/ ,/ 可以/ 直接/ 根据/ 式/ (/ 2/ )/ 计算/ 路径/ 差异/ 度/ ,/ 并不需要/ 运行/ 被测/ 程序/ ,/ 那么/ ,/ θ/ 为/ 常量/ ,/ 因此/ ,/ 本文/ 方法/ 的/ 最大/ 时间/ 复杂度/ 为/ O/ (/ h/ ×/ n/ )/ +/ T/ ×/ O/ (/ θ/ )/ =/ O/ (/ h/ ×/ n/ )/ ./ 和/ 传统/ 方法/ 比较/ ,/ 本文/ 方法/ 并/ 没有/ 增加/ 算法/ 的/ 时间/ 复杂度/ ./ 算法/ 每/ 一代/ 进化/ 过程/ 的/ 空间/ 复杂度/ 主要/ 取决于/ 种群/ 中/ 所/ 包含/ 的/ 个体/ 数目/ ,/ 因此/ ,/ 传统/ 遗传算法/ 的/ 空间/ 复杂度/ 可以/ 表示/ 为/ O/ (/ h/ )/ ./ 由图/ 2/ 可以/ 看出/ ,/ 使用/ 本文/ 方法/ ,/ 当/ 进化/ 种群/ 进行/ 部分/ 个体/ 替代/ 时/ ,/ 需要/ 存储/ 集合/ T/ 中/ 的/ 测试数据/ ,/ 空间/ 复杂度/ 可以/ 表示/ 为/ O/ (/ h/ +/ T/ )/ ./ 但是/ ,/ 进化/ 过程/ 中/ ,/ 种群/ 中/ 的/ 个体/ 数目/ 并未/ 增加/ ,/ 对于/ 替换/ 部分/ 个体/ 后/ 种群/ 的/ 进化/ 过程/ ,/ 每/ 一代/ 的/ 空间/ 复杂度/ 仍为/ O/ (/ h/ )/ ./ 极端/ 情况/ 下/ ,/ 当/ T/ 中/ 测试数据/ 能够/ 覆盖/ 所有/ 目标/ 路径/ 时/ ,/ 本文/ 方法/ 每/ 一代/ 的/ 空间/ 复杂度/ ,/ 最坏/ 情况/ 下为/ O/ (/ h/ +/ p/ / )/ ,/ 但/ 很/ 明显/ 的/ 是/ ,/ 此时/ 已/ 得到/ 覆盖/ 所有/ 目标/ 路径/ 的/ 测试数据/ ./ 这/ 也/ 说明/ ,/ T/ 越大/ ,/ 越/ 有利于/ 降低/ 算法/ 的/ 执行/ 代数/ ./ 可以/ 看出/ ,/ 和/ 传统/ 遗传算法/ 相比/ ,/ 采用/ 本文/ 方法/ 并/ 没有/ 增加/ 算法/ 的/ 时间/ 复杂度/ ,/ 虽然/ ,/ 在/ 种群/ 替换/ 过程/ 中/ ,/ 需要/ 额外/ 的/ 存储空间/ ,/ 但是/ ,/ 这/ 提升/ 了/ 种群/ 的/ 性能/ ,/ 从而/ 降低/ 了/ 进化/ 代数/ ,/ 提高/ 了/ 遗传算法/ 求解/ 问题/ 的/ 效率/ ./ 4.5/ 算法/ 步骤/ 本文/ 提出/ 的/ 采用/ 遗传算法/ 生成/ 回归/ 测试数据/ 的/ 步骤/ 如下/ :/ (/ 1/ )/ 生成/ 覆盖/ 修改/ 后/ 被/ 测/ 程序/ 目标/ 路径/ 的/ 测试数据/ 构成/ 的/ 集合/ T/ ,/ 同时/ ,/ 初始化/ 遗传算法/ 的/ 运行/ 参数/ ./ (/ 2/ )/ 判断/ 目标/ 路径/ 集/ P/ / =/ {/ p/ / 为空/ ,/ 如果/ 是/ ,/ 那么/ ,/ 算法/ 结束/ ;/ 否则/ ,/ 选择/ P/ / 中/ 下标/ 最小/ 的/ 未/ 覆盖/ 的/ 路径/ ,/ 作为/ 当前/ 目标/ 路径/ ,/ 按照/ 第/ 4.2/ 节/ 的/ 方法/ ,/ 替代/ 进化/ 种群/ 的/ 部分/ 个体/ ./ (/ 3/ )/ 以式/ (/ 7/ )/ 的/ 目标/ 函数/ 作为/ 评价/ 进化/ 个体/ 性能/ 的/ 适应度/ 函数/ ,/ 如果/ 期望/ 的/ 测试数据/ 已经/ 生成/ ,/ 或/ 进化/ 代数/ 大于/ 设定值/ ,/ 那么/ ,/ 将/ 当前/ 目标/ 路径/ 从/ P/ / 中/ 删除/ ,/ 转步/ (/ 2/ )/ ./ (/ 4/ )/ 运行/ 遗传算法/ ,/ 进行/ 选择/ 、/ 交叉/ 、/ 变异/ 操作/ ,/ 转步/ (/ 3/ )/ ./ 5/ 实验/ 为了/ 评价/ 本文/ 提出/ 的/ 回归/ 测试数据/ 进化/ 生成/ 方法/ 的/ 性能/ ,/ 选择/ 多个/ 基准/ 和/ 工业/ 程序/ ,/ 作为/ 被测/ 程序/ 进行/ 实验/ ./ 首先/ ,/ 以/ 三角形/ 分类程序/ 、/ 冒泡排序/ 为例/ ,/ 说明/ 本文/ 方法/ 的/ 步骤/ 与/ 效果/ ;/ 接着/ ,/ 针对/ 选择/ 的/ 被/ 测/ 程序/ ,/ 考察/ 本文/ 方法/ 生成/ 测试数据/ 需要/ 的/ 时间/ 、/ 目标/ 路径/ 覆盖率/ 以及/ 已有/ 测试数据/ 利用率/ 等/ ,/ 并/ 与/ 其他/ 方法/ 比较/ ;/ 然后/ ,/ 对/ 上述/ 实验/ 结果/ 进行/ 分析/ ,/ 并/ 回答/ 如下/ 4/ 个/ 问题/ :/ 问题/ 1/ ./ 与/ 基于/ 路径/ 相似/ 度/ 相比/ ,/ 基于/ 路径/ 差异/ 度/ 选择/ 测试数据/ ,/ 能否/ 更/ 有效/ 地/ 利用/ 已有/ 的/ 测试数据/ ?/ 问题/ 2/ ./ 与/ 基于/ 未/ 排序/ 的/ 目标/ 路径/ 建立/ 问题/ 的/ 数学模型/ 相比/ ,/ 本文/ 基于/ 确定/ 覆盖/ 目标/ 路径/ 优先/ 顺序/ 建立/ 的/ 模型/ ,/ 能否/ 提高/ 生成/ 测试数据/ 效率/ ?/ 问题/ 3/ ./ 与/ 其他/ 方法/ 相比/ ,/ 本文/ 方法/ 能否/ 花费/ 更少/ 的/ 时间/ 达到/ 更/ 高/ 的/ 目标/ 路径/ 覆盖率/ ?/ 问题/ 4/ ./ 在/ 不同/ 程序/ 的/ 不同/ 修改/ 版本/ 中/ ,/ 本文/ 方法/ 是否/ 具有/ 通用性/ ?/ 最后/ ,/ 选择/ 三角形/ 分类程序/ ,/ 进一步/ 考察/ 不同/ 差异/ 度/ 阈值/ 以及/ 不同/ 修改/ 版本/ ,/ 对/ 本文/ 方法/ 的/ 影响/ ./ 实验/ 的/ 硬件/ 环境/ 为/ IntelDue/ -/ Core2/ ./ 0GHzCPU/ 和/ 2GBRAM/ 内存/ ./ 所有/ 方法/ 均/ 采用/ V/ C++/ 6.0/ 实现/ ./ 5.1/ 实例/ 分析/ 本/ 小节/ 以/ 三角形/ 分类程序/ 、/ 冒泡排序/ 为例/ ,/ 说明/ 本文/ 方法/ 的/ 步骤/ 与/ 效果/ ./ 对/ 三角形/ 分类程序/ 进行/ 修改/ ,/ 三角形/ 分类程序/ 的/ 2/ 个/ 实现/ 版本/ ,/ 如图/ 2/ 所示/ ,/ 一个/ 作为/ 修改/ 前/ 程序/ ,/ 有/ 4/ 条/ 可行/ 路径/ ;/ 另/ 一个/ 作为/ 修改/ 后/ 程序/ ,/ 有/ 19/ 条/ 可行/ 路径/ ,/ 输入/ 分量/ 的/ 取值/ 范围/ 为/ [/ 0/ ,/ 2047/ ]/ ./ 由图/ 2/ 容易/ 看出/ ,/ 与/ 修改/ 前/ 程序/ 相比/ ,/ 修改/ 后/ 的/ 程序/ 增加/ 了/ 11/ 条/ 路径/ ./ 由于/ 这/ 2/ 个/ 程序/ 的/ 功能/ 相同/ ,/ 因此/ ,/ 覆盖/ 修改/ 前/ 程序/ 路径/ 的/ 测试数据/ ,/ 仍能/ 覆盖/ 修改/ 后/ 程序/ 的/ 部分/ 路径/ ,/ 这些/ 测试数据/ 对/ 修改/ 后/ 程序/ 路径/ 的/ 覆盖率/ 为/ 21.1/ %/ ./ Page9/ 图/ 2/ 三角形/ 分类程序/ 的/ 2/ 个/ 实现/ 版本/ 首先/ ,/ 按照/ 第/ 3.1/ 节/ 所述/ ,/ 对/ 修改/ 后/ 程序/ 的/ 分支/ 结点/ ,/ 广度/ 优先/ 遍历/ ,/ 将/ 所有/ 路径/ 编码/ 为/ 分支/ 节点/ 序列/ 条件/ 表达式/ 的/ 真值/ ,/ 19/ 条/ 路径/ 的/ 编码/ 如表/ 1/ 所列/ ,/ 表中/ ,/ 粗体/ 显示/ 的/ 路径/ ,/ 为/ 利用/ 修改/ 前/ 程序/ 的/ 测试数据/ 能够/ 覆盖/ 的/ 路径/ ./ 目标/ 路径/ 编码/ 1111001/ -/ 111001/ -/ 1/ -/ 1100/ -/ 111100/ -/ 11/ -/ 1100/ -/ 1/ -/ 11100/ -/ 1/ -/ 1/ -/ 1100111/ -/ 1/ -/ 101/ -/ 11/ -/ 1/ -/ 101/ -/ 1/ -/ 1/ -/ 1/ -/ 10/ -/ 111/ -/ 1/ -/ 10/ -/ 1/ -/ 11/ -/ 1/ -/ 10/ -/ 1/ -/ 1/ -/ 1/ -/ 1/ -/ 10131/ -/ 11/ -/ 11/ -/ 11/ -/ 1/ -/ 1/ -/ 11/ -/ 11/ -/ 1/ -/ 1/ -/ 11/ -/ 1/ -/ 1/ -/ 11/ -/ 11/ -/ 1/ -/ 1/ -/ 1/ -/ 1/ -/ 11/ -/ 118/ -/ 1/ -/ 1/ -/ 1/ -/ 111/ 接着/ ,/ 采用/ 第/ 3.2/ 节/ 的/ 方法/ ,/ 得到/ 这/ 19/ 条/ 路径/ 的/ 优先级/ ,/ 并/ 对/ 这些/ 路径/ 按照/ 优先级/ 排序/ ,/ 其/ 序号/ 如表/ 1/ 的/ “/ 路径/ 序号/ ”/ 所列/ ./ 基于/ 排序/ 后/ 的/ 路径/ ,/ 按照/ 式/ (/ 7/ )/ 建立/ 该/ 程序/ 回归/ 测试数据/ 生成/ 问题/ 的/ 数学模型/ ./ 基于/ 该/ 模型/ ,/ 将/ 图/ 2/ 修改/ 前/ 程序/ 的/ 测试数据/ ,/ 保存/ 在/ 集合/ T/ 中/ ./ 从表/ 1/ 可以/ 看出/ ,/ 对于/ 第/ 1/ 条/ 目标/ 路径/ ,/ 集合/ T/ 中/ 包含/ 4/ 个/ 测试数据/ ./ 随着/ 覆盖/ 目标/ 路径/ 测试数据/ 的/ 不断/ 生成/ ,/ 集合/ T/ 包含/ 的/ 元素/ 个数/ 逐渐/ 增加/ ./ 然后/ ,/ 按照/ 第/ 4.5/ 节/ 的/ 算法/ 步骤/ ,/ 运行/ 遗传算法/ ,/ 取/ 交叉/ 和/ 变异/ 概率/ 分别/ 为/ 0.8/ 和/ 0.15/ ,/ 用于/ 生成/ 覆盖/ 每个/ 目标/ 路径/ 测试数据/ 的/ 种群/ 最/ 多/ 进化/ 5000/ 代/ ,/ 种群/ 规模/ 为/ 50/ ,/ 需要/ 替代/ 的/ 个体/ 数/ e/ =/ 20/ ./ 根据/ e/ 的/ 值/ 和/ 目标/ 路径/ 数/ ,/ 由式/ (/ 8/ )/ 可以/ 计算/ 出/ ,/ 示例/ 程序/ 的/ 差异/ 度/ 阈值/ 为/ 5/ // 6/ ./ 按照/ 第/ 4.1/ 节/ 所述/ ,/ 在/ 运行/ 遗传算法/ 过程/ 中/ ,/ 从/ 集合/ T/ 中/ 选择/ 穿越/ 与/ 目标/ 路径/ 具有/ 相关性/ 路径/ 的/ 测试数据/ ,/ 替换/ 当前/ 种群/ 的/ 部分/ 个体/ ./ 最后/ ,/ 统计/ 实验/ 结果/ ,/ 包括/ 已有/ 测试数据/ 利用/ 的/ 个数/ 、/ 时间/ 消耗/ 以及/ 目标/ 路径/ 覆盖率/ ./ 由于/ 三角形/ 程序/ 简单/ ,/ 本/ 小节/ 采用/ 进化/ 代数/ 衡量/ 时间/ 消耗/ ./ 由表/ 1/ 可知/ ,/ 对于/ 三角形/ 分类程序/ ,/ 生成/ 所有/ 测试数据/ ,/ 需要/ 的/ 进化/ 代数/ 为/ 15129/ 代/ ,/ 目标/ 路径/ 覆盖率/ 为/ 84.1/ %/ ,/ 已有/ 测试数据/ 利用/ 的/ 个数/ 平均/ 为/ 6.3/ ./ 这/ 说明/ ,/ 本文/ 方法/ 已有/ 测试数据/ 的/ 利用率/ 高/ ,/ 使得/ 需要/ 很少/ 的/ 进化/ 代数/ ,/ 即可/ 生成/ 具有/ 高/ 目标/ 路径/ 覆盖率/ 的/ 测试数据/ ./ 以/ 4/ 个数/ 冒泡排序/ 为例/ ,/ 在/ 包含/ 循环/ 嵌套/ 结构/ 的/ 程序/ 中/ ,/ 验证/ 本文/ 方法/ 的/ 实用性/ ./ 如图/ 3/ 所示/ ,/ 冒泡排序/ 的/ 输入/ 分量/ 的/ 取值/ 范围/ 为/ [/ 0/ ,/ 63/ ]/ ,/ 代码/ 第/ 5/ 行/ 语句/ 由/ for/ (/ j/ =/ 1/ ;/ j/ </ 3/ -/ i/ ;/ j/ ++/ )/ 修正/ 为/ for/ (/ j/ =/ 1/ ;/ j/ </ 4/ -/ i/ ;/ j/ ++/ )/ ./ Page10/ 在/ 语句/ 6/ 之后/ 插桩/ ,/ 记录/ 循环体/ 每次/ 执行/ ,/ 语句/ 6/ 的/ 分支/ 谓词/ 取值/ ,/ 由图/ 3/ 容易/ 得出/ ,/ 程序修改/ 前/ 共有/ 3/ 个/ 分支/ 结点/ ,/ 6/ 条/ 有效/ 路径/ ;/ 修改/ 后/ 程序/ 共有/ 6/ 个/ 分支/ 结点/ ,/ 24/ 条/ 有效/ 路径/ ./ 由于/ 这/ 2/ 个/ 程序/ 的/ 功能/ 相同/ ,/ 因此/ ,/ 覆盖/ 程序修改/ 前/ 路径/ 的/ 测试数据/ ,/ 仍能/ 覆盖/ 修改/ 后/ 程序/ 的/ 部分/ 路径/ ,/ 这些/ 测试数据/ 对/ 修改/ 后/ 程序/ 路径/ 的/ 覆盖率/ 为/ 25/ %/ ./ 按照/ 三角形/ 分类程序/ 实例/ 分析/ 描述/ 的/ 步骤/ 以及/ 参数/ ,/ 实验/ 结果/ 如表/ 2/ 所示/ ./ 需注意/ 的/ 是/ ,/ 与/ 三角形/ 分类程序/ 实例/ 不同/ ,/ 在/ 4/ 个数/ 的/ 冒泡排序/ 实例/ 中/ ,/ 由于/ 目标/ 路径/ 的/ 修改/ 结点/ 位置/ 以及/ 数目/ 都/ 相同/ ,/ 所以/ ,/ 采用/ 第/ 2/ 节/ 所述/ 方法/ ,/ 目标/ 路径/ 的/ 优先级/ 相等/ ./ 因而/ ,/ 冒泡排序/ 实例/ 中/ 的/ 目标/ 路径/ 顺序/ ,/ 是/ 按照/ 本文/ 提出/ 的/ 路径/ 编码方法/ 编码/ 后/ 的/ 默认/ 顺序/ ,/ 但是/ ,/ 在/ 该/ 情况/ 下/ ,/ 目标/ 路径/ 间/ 的/ 差异/ 度值/ 较/ 小/ ,/ 可/ 利用/ 的/ 测试数据/ 增加/ ./ 从表/ 2/ 可以/ 得出/ ,/ 采用/ 本文/ 方法/ ,/ 已有/ 测试数据/ 利用/ 的/ 个数/ 平均/ 为/ 12.4/ ,/ 显著/ 高于/ 三角形/ 分类/ 实例/ 中/ 的/ 已有/ 测试数据/ 的/ 平均/ 利用/ 数/ ,/ 同时/ ,/ 目标/ 路径/ 覆盖率/ 达到/ 95.8/ %/ ,/ 生成/ 所有/ 测试数据/ ,/ 需要/ 的/ 进化/ 表/ 3/ 被测/ 程序/ 与/ 实验/ 设置/ 被测/ 程序/ 三角形/ 分类/ 冒泡排序/ huffcodetcasreplaceflex/ 实验/ 中/ ,/ 对于/ 不同/ 的/ 程序/ ,/ 进化/ 个体/ 采用/ 不同/ 的/ 编码方式/ ./ 对/ 这些/ 被测/ 程序/ 进行/ 修改/ ,/ 将/ 仍/ 能/ 穿越/ 改后/ 程序/ 待/ 覆盖/ 路径/ 的/ 测试数据/ ,/ 加入/ 到/ 集合/ T/ ./ 集合/ T/ 覆盖/ 6/ 个/ 被/ 测/ 程序/ 的/ 目标/ 路径/ 数/ 分别/ 为/ 6/ 、/ 24/ 、/ 120/ 、/ 32/ 、/ 70/ 以及/ 100/ ./ 算法/ 所/ 需/ 参数/ 的/ 取值/ 与/ 第/ 5.1/ 节/ 完全相同/ ./ 对于/ 每一/ 被/ 测/ 程序/ ,/ 实验/ 结果/ 均/ 为/ 20/ 次/ 实验/ 的/ 平均值/ ./ 目标/ 路径/ 编码/ -/ 1/ -/ 1/ -/ 1/ -/ 1/ -/ 1/ -/ 1/ -/ 1/ -/ 11/ -/ 1/ -/ 1/ -/ 1/ -/ 1/ -/ 11/ -/ 11/ -/ 1/ -/ 1/ -/ 11/ -/ 111/ -/ 11/ -/ 1/ -/ 1/ -/ 1/ -/ 1/ -/ 11/ -/ 11/ -/ 1/ -/ 1/ -/ 111/ -/ 1/ -/ 1/ -/ 1/ -/ 111/ -/ 11/ -/ 1/ -/ 111/ -/ 111/ -/ 1111/ -/ 1/ -/ 1/ -/ 11111/ -/ 1/ -/ 1111111/ -/ 1/ -/ 1/ -/ 1/ -/ 1/ -/ 1131/ -/ 11/ -/ 1/ -/ 1/ -/ 11/ -/ 11/ -/ 11/ -/ 11/ -/ 11/ -/ 11111/ -/ 1/ -/ 1/ -/ 1/ -/ 111/ -/ 11/ -/ 1/ -/ 1111/ -/ 1/ -/ 1/ -/ 1111/ -/ 11/ -/ 1111/ -/ 1111111/ -/ 1/ -/ 111111/ -/ 1111111/ 代数/ 为/ 5532/ 代/ ./ 可以/ 看出/ ,/ 在/ 4/ 个数/ 的/ 冒泡排序/ 实例/ 中/ ,/ 本文/ 方法/ 充分利用/ 了/ 已有/ 测试数据/ ,/ 体现/ 了/ 较/ 高/ 的/ 效率/ ,/ 这/ 也/ 说明/ 本文/ 方法/ 对于/ 包含/ 循环/ 嵌套/ 结构/ 的/ 程序/ 也/ 是/ 适用/ 和/ 高效/ 的/ ./ 5.2/ 对比/ 实验/ 结果/ 为了/ 验证/ 本文/ 方法/ 的/ 有效性/ ,/ 除了/ 三角形/ 分类程序/ 之外/ ,/ 还/ 选用/ 了/ 6/ 个数/ 的/ 冒泡排序/ 程序/ 、/ 赫/ 夫曼/ 编码/ ,/ flex/ 词法/ 分析器/ 以及/ 西门子/ 工业/ 程序/ 集中/ 的/ 2/ 个/ 程序/ ,/ 上述/ 程序/ 广泛应用/ 于/ 验证/ 不同/ 测试方法/ 的/ 有效性/ [/ 27/ -/ 28/ ]/ ,/ 其/ 基本/ 信息/ 如表/ 3/ 所列/ ./ 输入/ 范围/ [/ 0/ ,/ 2047/ ]/ [/ 0/ ,/ 63/ ]/ [/ 0/ ,/ 10000/ ]/ [/ 0/ ,/ 10000/ ]/ [/ 0/ ,/ 128/ ]/ [/ 0/ ,/ 128/ ]/ 首先/ ,/ 为了/ 评价/ 本文/ 采用/ 的/ 测试数据/ 利用/ 准则/ 的/ 性能/ ,/ 与/ 使用/ 路径/ 相似/ 度/ 准则/ [/ 25/ -/ 26/ ]/ 选择/ 测试数据/ 比较/ ,/ 并/ 采用/ 了/ 如下/ 指标/ 评价/ 不同/ 准则/ 的/ 性能/ :/ (/ 1/ )/ 利用/ 数/ ,/ 指在/ 遗传算法/ 生成/ 测试数据/ 过程/ 中/ ,/ 分别/ 使用/ 路径/ 差异/ 度/ 和/ 路径/ 相似/ 度/ ,/ 作为/ 选择/ 测试数据/ 的/ 准则/ ,/ 生成/ 覆盖/ 每条/ 目标/ 路径/ 的/ 测试数据/ 时/ ,/ 利用/ 的/ 已有/ 测试数据/ 的/ 个数/ ./ Page11/ (/ 2/ )/ 适应/ 值/ 提升/ 率/ ,/ 指/ 替换/ 当前/ 种群/ 的/ 部分/ 个体/ 后/ ,/ 种群/ 适应/ 值变/ 大/ 的/ 目标/ 函数/ 个数/ ,/ 与/ 所有/ 利用/ 已有/ 测试数据/ 的/ 目标/ 函数/ 个数/ 的/ 比值/ ./ (/ 3/ )/ 命中率/ ,/ 指/ 通过/ 已有/ 测试数据/ 生成/ 测试数据/ 时/ ,/ 能够/ 有/ 测试数据/ 覆盖/ 的/ 目标/ 路径/ 数/ ,/ 与/ 所有/ 目标/ 路径/ 数/ 的/ 比值/ ./ 然后/ ,/ 为了/ 评价/ 本文/ 方法/ ,/ 记为/ PSEGA/ 的/ 有效性/ ,/ 将/ 该/ 方法/ 与/ 传统/ 的/ 回归/ 测试数据/ 生成/ 方法/ (/ NGA/ )/ [/ 25/ ]/ 、/ 优先/ 策略/ 方法/ (/ PRGA/ )/ 以及/ 使用/ 已有/ 测试数据/ 的/ 方法/ (/ EGA/ )/ ,/ 应用/ 于/ 基准/ 和/ 工业/ 程序/ 的/ 测试/ ,/ 并/ 从/ 生成/ 测试数据/ 需要/ 的/ 时间/ 、/ 目标/ 路径/ 覆盖率/ 以及/ 通用性/ 等/ 方面/ 进行/ 对比/ ./ 其中/ ,/ NGA/ 直接/ 采用/ 遗传算法/ ,/ 按照/ 随机/ 覆盖/ 目标/ 路径/ 的/ 顺序/ ,/ 生成/ 测试数据/ ;/ PRGA/ 先/ 根据/ 本文/ 提出/ 的/ 方法/ ,/ 确定/ 目标/ 路径/ 的/ 覆盖/ 次序/ ,/ 然后/ ,/ 利用/ 遗传算法/ ,/ 依次/ 生成/ 覆盖/ 图/ 4/ 不同/ 已有/ 数据/ 比例/ 下/ ,/ EGA/ 与/ 本文/ 方法/ 生成/ 测试数据/ 的/ 目标/ 路径/ 覆盖率/ 5.3/ 实验/ 结果/ 分析/ 本节/ 对/ 上述/ 实验/ 结果/ 进行/ 分析/ ,/ 并/ 回答/ 前面/ 提出/ 的/ 4/ 个/ 问题/ ./ (/ 1/ )/ 对/ 问题/ 1/ 的/ 回答/ 由表/ 4/ 可以/ 得出/ ,/ 与/ 使用/ 路径/ 相似/ 度/ 准则/ 相比/ ,/ 采用/ 本文/ 的/ 方法/ ,/ 可以/ 更/ 有效/ 地/ 利用/ 已有/ 数据/ ./ ①/ 对于/ 每一/ 被/ 测/ 程序/ ,/ 使用/ 路径/ 差异/ 度/ ,/ 作为/ 测试数据/ 选择/ 准则/ ,/ 生成/ 覆盖/ 目标/ 路径/ 的/ 测试数据/ 时/ ,/ 利用/ 的/ 已有/ 测试数据/ 均/ 多于/ 或/ 等于/ 使用/ 路径/ 相似/ 度/ 准则/ ./ ②/ 与/ 使用/ 路径/ 相似/ 度/ 准则/ 相比/ ,/ 本文/ 方法/ 的/ 命表/ 4/ 基于/ 路径/ 相似/ 度/ 标准/ 和/ 路径/ 差异/ 度/ 标准/ 已有/ 测试数据/ 的/ 利用/ 情况/ 测试/ 对象/ 三角形/ 分类/ 冒泡排序/ huffcodetcasreplaceflex/ 命中率/ // %/ 85.690/ ./ 5100.092/ ./ 692.871/ ./ 3/ 目标/ 路径/ 的/ 测试数据/ ;/ EGA/ 首先/ 随机/ 设定/ 目标/ 路径/ 的/ 覆盖/ 顺序/ ;/ 接着/ ,/ 求/ 出/ 测试数据/ 覆盖/ 的/ 路径/ 与/ 目标/ 路径/ 的/ 差异/ 度/ ,/ 并/ 筛选/ 有用/ 的/ 测试数据/ ,/ 替换/ 当前/ 种群/ 的/ 部分/ 个体/ ;/ 最后/ ,/ 利用/ 更新/ 后/ 的/ 种群/ 进化/ 生成/ 测试数据/ ./ 上述/ 方法/ 生成/ 覆盖/ 目标/ 路径/ 需要/ 的/ 时间/ 和/ 目标/ 路径/ 覆盖率/ ,/ 如下/ 文/ 5.3/ 节表/ 5/ 所列/ ,/ 表中/ ,/ 某/ 方法/ 需要/ 的/ 时间/ 越/ 少/ ,/ 且/ 目标/ 路径/ 的/ 覆盖率/ 越高/ ,/ 那么/ ,/ 该/ 方法/ 的/ 性能/ 就/ 越/ 优/ ./ 由表/ 5/ 可知/ ,/ 本文/ 方法/ 和/ EGA/ 是/ 效率/ 较/ 高/ 的/ 2/ 种/ ,/ 这/ 2/ 种/ 方法/ 都/ 用/ 了/ 已有/ 测试数据/ ,/ 替换/ 当前/ 种群/ 的/ 部分/ 个体/ ./ 最后/ ,/ 针对/ 被测/ 程序/ 的/ 不同/ 修改/ 版本/ ,/ 考察/ 集合/ T/ 中/ 已有/ 测试数据/ 覆盖/ 的/ 目标/ 路径/ 数/ ,/ 与/ 所有/ 目标/ 路径/ 数/ 的/ 比值/ ,/ 对/ 目标/ 路径/ 覆盖率/ 的/ 影响/ ,/ 并/ 与/ EGA/ 方法/ 比较/ ,/ 结果/ 如图/ 4/ 所示/ ./ 中率/ 平均/ 提高/ 了/ 6.1/ %/ ./ 这/ 说明/ ,/ 与/ 使用/ 路径/ 相似/ 度/ 准则/ 选择/ 测试数据/ 相比/ ,/ 采用/ 本文/ 的/ 方法/ ,/ 使用/ 已有/ 测试数据/ 的/ 效率/ 更高/ ./ 需要/ 说明/ 的/ 是/ ,/ 采用/ 本文/ 的/ 方法/ ,/ 选择/ 已有/ 的/ 测试数据/ ,/ 生成/ 覆盖/ 目标/ 路径/ 的/ 测试数据/ ,/ 在/ 替换/ 部分/ 个体/ 之后/ ,/ 种群/ 的/ 适应/ 值/ 并/ 没有/ 都/ 提高/ ./ 这/ 是因为/ ,/ 本文/ 方法/ 以/ 路径/ 相似/ 度/ ,/ 作为/ 进化/ 个体/ 的/ 适应度/ ,/ 而/ 程序/ 中/ 存在/ 与/ 目标/ 路径/ 相关性/ 较/ 高/ ,/ 但/ 路径/ 相似/ 度/ 较/ 低/ 的/ 路径/ ./ 使用/ 本文/ 的/ 方法/ ,/ 有助于/ 选择/ 穿越/ 这些/ 路径/ 的/ 测试数据/ ./ Page12/ (/ 2/ )/ 对/ 问题/ 2/ 的/ 回答/ 由表/ 5/ 可以/ 得出/ ,/ 与/ 基于/ 未/ 排序/ 的/ 目标/ 路径/ 生成/ 测试数据/ 相比/ ,/ 基于/ 排序/ 后/ 的/ 目标/ 路径/ 生成/ 测试数据/ ,/ 能够/ 减少/ 时间/ ,/ 并/ 提高/ 路径/ 的/ 覆盖率/ ./ ①/ 与/ 采用/ 未/ 排序/ 的/ NGA/ 相比/ ,/ PRGA/ 的/ 测试数据/ 生成/ 时间/ 明显/ 少于/ NGA/ ,/ 平均/ 减少/ 了/ 18.2/ %/ 的/ 时间/ 开销/ 。/ 这/ 是因为/ ,/ 排序/ 后/ 的/ 当前/ 目标/ 路径/ ,/ 与/ 下/ 一/ 路径/ 具有/ 一定/ 的/ 相关性/ ,/ 使得/ 生成/ 覆盖/ 当前/ 目标/ 路径/ 的/ 测试数据/ 之后/ ,/ 当前/ 种群/ 的/ 个体/ 对/ 下/ 一/ 目标/ 也/ 具有/ 较/ 好/ 的/ 适应/ 值/ ./ 在/ 实验/ 中/ ,/ 我们/ 也/ 发现/ ,/ NGA/ 在/ 生成/ 测试数据/ 测试/ 对象/ 三角形/ 分类/ 冒泡排序/ huffcodetcasreplaceflex/ 表/ 5/ 不同/ 方法/ 需要/ 的/ 时间/ 和/ 目标/ 路径/ 覆盖率/ 覆盖率/ // %/ 63.280/ ./ 196.889/ ./ 772.537/ ./ 7/ (/ 3/ )/ 对/ 问题/ 3/ 的/ 回答/ 由表/ 5/ 容易/ 看出/ ,/ 本文/ 方法/ 能够/ 在/ 较/ 短/ 的/ 时间/ 内/ ,/ 生成/ 具有/ 较/ 高/ 目标/ 路径/ 覆盖率/ 的/ 测试数据/ ./ ①/ 与/ 其他/ 方法/ 相比/ ,/ 对于/ 三角形/ 分类/ 、/ 冒泡排序/ 、/ replace/ 以及/ flex/ ,/ 本文/ 方法/ 均/ 需要/ 最短/ 的/ 时间/ ,/ 并/ 取得/ 最高/ 的/ 目标/ 路径/ 覆盖率/ ./ 与/ 传统/ 遗传算法/ 相比/ ,/ 本文/ 方法/ 的/ 目标/ 路径/ 覆盖率/ 平均/ 提高/ 了/ 22/ %/ ,/ 消耗/ 的/ 时间/ 平均/ 降低/ 了/ 43/ %/ ./ ②/ 对于/ 程序/ huffcode/ 和/ tcas/ ,/ 与/ 耗时/ 最少/ 的/ PRGA/ 相比/ ,/ 本文/ 方法/ 的/ 耗时/ 最高/ 多/ 5.1/ s/ ./ 这/ 是因为/ ,/ 被测/ 程序/ 的/ 控制结构/ 简单/ ,/ 路径/ 数多/ ,/ 而/ 本文/ 方法/ 和/ EGA/ 均/ 需要/ 对/ 已有/ 测试数据/ 评价/ ./ 但是/ ,/ 与/ 其他/ 方法/ 相比/ ,/ 本文/ 的/ 方法/ 取得/ 了/ 最高/ 的/ 目标/ 路径/ 覆盖率/ ./ 在/ 注重/ 软件可靠性/ 的/ 回归/ 测试/ 中/ ,/ 本文/ 方法/ 显然/ 更/ 具有/ 应用/ 价值/ ./ 这/ 说明/ ,/ 在/ 测试/ 结构/ 简单/ 且/ 路径/ 多/ 的/ 程序/ 时/ ,/ 需要/ 减少/ 已有/ 测试数据/ 的/ 使用率/ ,/ 并/ 优化/ 参与/ 进化/ 的/ 已有/ 测试数据/ ./ ③/ 在/ 较/ 大规模/ 的/ flex/ 程序/ 中/ ,/ 本文/ 方法/ 明显/ 优于/ 其他/ 3/ 种/ 方法/ ,/ 与/ NGA/ 相比/ ,/ 本文/ 方法/ 减少/ 了/ 70.6/ %/ 的/ 时间/ 开销/ ,/ 覆盖率/ 提高/ 50.5/ %/ ./ 这/ 说明/ ,/ 本文/ 方法/ 对于/ 较/ 大规模/ 的/ 程序/ 是/ 适用/ 且/ 高效/ 的/ ./ (/ 4/ )/ 对/ 问题/ 4/ 的/ 回答/ 由图/ 4/ 可以/ 看出/ ,/ 与/ EGA/ 相比/ ,/ 针对/ 被测/ 程序/ 的/ 不同/ 修改/ 版本/ ,/ 本文/ 方法/ 需要/ 较少/ 的/ 已有/ 测试数据/ ,/ 即可/ 达到/ 较/ 高/ 的/ 目标/ 路径/ 覆盖率/ ./ 对于/ 各/ 被/ 测程/ 时/ ,/ 如果/ 满足/ 当前/ 目标/ 路径/ 约束条件/ 的/ 输入/ 域/ 在/ 整个/ 输入/ 域/ 中/ 占/ 的/ 比值/ 较/ 小/ ,/ 那么/ ,/ 种群/ 将/ 容易/ 丢失/ 多样性/ ,/ 使得/ 生成/ 覆盖/ 后继/ 目标/ 路径/ 的/ 测试数据/ 耗时/ 较长/ ,/ 甚至/ 难以/ 生成/ 覆盖/ 后继/ 目标/ 路径/ 的/ 测试数据/ ./ 在/ 上述情况/ 下/ ,/ PRGA/ 的/ 目标/ 路径/ 覆盖率/ 略高于/ NGA/ ./ ②/ 由表/ 5/ 可以/ 得出/ ,/ 与/ 未/ 排序/ 的/ EGA/ 相比/ ,/ 本文/ 方法/ 生成/ 测试数据/ 需要/ 的/ 时间/ 明显/ 减少/ ,/ 且/ 目标/ 路径/ 覆盖率/ 平均/ 提高/ 了/ 5.4/ %/ ,/ 最大/ 提高/ 了/ 10.2/ %/ ./ 这/ 是因为/ ,/ 目标/ 路径/ 排序/ 之后/ ,/ 需要/ 先/ 覆盖/ 的/ 目标/ 路径/ ,/ 与/ 已有/ 测试数据/ 覆盖/ 的/ 路径/ 具有/ 较/ 高/ 的/ 相关度/ ,/ 这/ 有助于/ 利用/ 已有/ 的/ 测试数据/ ./ 序/ ,/ 已有/ 测试数据/ 覆盖/ 目标/ 路径/ 的/ 比例/ 为/ 50/ %/ 时/ ,/ 本文/ 方法/ 能够/ 达到/ 95/ %/ 的/ 目标/ 路径/ 覆盖率/ ;/ 对于/ EGA/ 而言/ ,/ 上述/ 比例/ 为/ 70/ %/ 时/ ,/ 才/ 达到/ 95/ %/ 的/ 目标/ 路径/ 覆盖率/ ./ 这/ 说明/ ,/ 本文/ 方法/ 适用/ 于/ 不同/ 程序/ 的/ 不同/ 修改/ 版本/ ./ 当/ 上述/ 比例/ 接近/ 100/ %/ 时/ ,/ 这/ 两种/ 方法/ 都/ 覆盖/ 了/ 所有/ 的/ 目标/ 路径/ ./ 可以/ 看出/ ,/ 对于/ 本文/ 建立/ 的/ 用于/ 回归/ 测试/ 的/ 数据/ 生成/ 问题/ 模型/ ,/ 采用/ 新/ 生成/ 的/ 测试数据/ ,/ 替换/ 当前/ 种群/ 的/ 部分/ 个体/ ,/ 是/ 完全正确/ 的/ ./ 5.4/ 参数/ 敏感性/ 分析/ 为了/ 进一步/ 考察/ 不同/ 的/ 差异/ 度/ 阈值/ 、/ 程序/ 不同/ 修改/ 版本/ 包含/ 不同/ 的/ 已有/ 测试数据/ 比例/ ,/ 对/ 本文/ 方法/ 的/ 影响/ ,/ 选择/ 三角形/ 分类程序/ 进行/ 实验/ ./ 首先/ ,/ 针对/ 图/ 2/ 修改/ 的/ 程序/ ,/ 按照/ 第/ 4.1/ 节/ 设定/ 的/ 标准/ ,/ 列出/ 不同/ 差异/ 度/ 阈值/ 下/ ,/ 生成/ 测试数据/ 需要/ 的/ 进化/ 代数和/ 目标/ 路径/ 覆盖率/ ,/ 如表/ 6/ 所列/ ./ 其中/ ,/ 第/ 1/ 行/ 数据表示/ 遗传算法/ 的/ 进化/ 种群/ 不/ 使用/ 任何/ 已有/ 的/ 测试数据/ ;/ 差异/ 度/ 阈值/ 为/ 1/ ,/ 表示/ 遗传算法/ 的/ 进化/ 种群/ 使用/ 所有/ 已有/ 的/ 测试数据/ ;/ 其余/ 差异/ 度/ 阈值/ 下/ 的/ 实验/ 结果/ 表示/ ,/ 使用/ 符合/ 第/ 4.1/ 节/ 标准/ 的/ 集合/ T/ 的/ 部分/ 数据/ ./ 由表/ 6/ 可以/ 看出/ :/ (/ 1/ )/ 不/ 使用/ 已有/ 的/ 测试数据/ ,/ 遗传算法/ 的/ 运行/ 代数/ 多/ ,/ 且/ 目标/ 路径/ 的/ 覆盖率/ 低/ ;/ 使用/ 已有/ 的/ 测试数据/ ,/ 目标/ 路径/ 的/ 覆盖率/ 显著/ 增加/ ./ 这/ 说明/ ,/ 利用/ 已有/ 的/ 测试数据/ ,/ 本文/ 方法/ 能够/ 提高/ 测试数据/ 生成/ Page13/ 的/ 效率/ ./ (/ 2/ )/ 当/ 差异/ 度/ 阈值/ 由/ 0/ 变化/ 到/ 1/ // 6/ 和/ 2/ // 6/ 时/ ,/ 使用/ 已有/ 测试数据/ 替代/ 进化/ 种群/ 的/ 个体/ 数/ 增加/ ,/ 从而/ 降低/ 了/ 进化/ 代数/ ,/ 提高/ 了/ 目标/ 路径/ 覆盖率/ ;/ 当/ 差异/ 度/ 阈值/ 由/ 2/ // 6/ 变化/ 至/ 3/ // 6/ 和/ 4/ // 6/ 时/ ,/ 已有/ 测试数据/ 替代/ 进化/ 种群/ 的/ 个体/ 数/ 没有/ 明显增加/ ,/ 导致/ 进化/ 代数和/ 目标/ 路径/ 覆盖率/ 的/ 差别/ 较/ 小/ ;/ 当/ 差异/ 度/ 阈值/ 由/ 5/ // 6/ 变化/ 至/ 1/ 时/ ,/ 用来/ 替代/ 进化/ 种群/ 的/ 新/ 个体/ 穿越/ 的/ 路径/ 与/ 目标/ 路径/ 没有/ 相关性/ ,/ 因此/ ,/ 进化/ 代数/ 增多/ ,/ 目标/ 路径/ 覆盖率/ 低/ ./ 差异/ 度/ 阈值/ -/ 01/ // 62/ // 63/ // 64/ // 65/ // 61/ 这/ 说明/ ,/ 如果/ 集合/ T/ 中/ 可/ 利用/ 的/ 已有/ 测试数据/ 增多/ ,/ 且/ 该/ 测试数据/ 穿越/ 的/ 路径/ 与/ 目标/ 路径/ 有/ 一定/ 的/ 相关性/ ,/ 那么/ ,/ 将/ 能够/ 提高/ 进化/ 种群/ 的/ 性能/ ./ (/ 3/ )/ 当/ 差异/ 度/ 阈值/ 为/ 5/ // 6/ 或/ 1/ 时/ ,/ 进化/ 代数/ 的/ 标准差/ 较大/ ,/ 超过/ 了/ 最大/ 进化/ 代数/ ./ 这/ 说明/ ,/ 当/ 差异/ 度/ 阈值/ 较大/ 时/ ,/ 本文/ 方法/ 的/ 随机性/ 也/ 较大/ ./ 这/ 就/ 要求/ ,/ 当/ 被/ 测/ 程序/ 包含/ 的/ 目标/ 路径/ 和/ 已有/ 测试数据/ 均/ 较/ 多/ 时/ ,/ 设定/ 的/ 差异/ 度/ 阈值/ ,/ 应/ 保证/ 优先选择/ 穿越/ 与/ 目标/ 路径/ 具有/ 较大/ 相关性/ 路径/ 的/ 测试数据/ ./ 可以/ 看出/ ,/ 第/ 4.3/ 节/ 设定/ 的/ 差异/ 度/ 阈值/ 是/ 合适/ 的/ ,/ 且/ 对于/ 三角形/ 分类程序/ 也/ 是/ 最优/ 的/ ./ 在/ 图/ 2/ 修改/ 后/ 程序/ 的/ 基础/ 上/ ,/ 进一步/ 对/ 程序修改/ ,/ 集合/ T/ 覆盖/ 目标/ 路径/ 的/ 比例/ 如表/ 7/ 所列/ ./ 由表/ 7/ 可以/ 看出/ ,/ 当/ 集合/ T/ 覆盖/ 目标/ 路径/ 的/ 比例/ 较/ 高/ (/ 79.0/ %/ )/ 时/ ,/ 在/ 表/ 6/ 目标/ 路径/ 覆盖率/ 较/ 高/ 的/ 2/ 种/ 差异/ 度/ 阈值/ 下/ ,/ 所提/ 方法/ 进化/ 20/ 代/ 左右/ ,/ 就/ 能够/ 生成/ 覆盖/ 所有/ 目标/ 路径/ 的/ 测试数据/ ./ 这/ 说明/ ,/ 本文/ 方法/ 在/ 已有/ 测试数据/ 比例/ 较/ 高时/ 是/ 高效/ 的/ ./ 另外/ ,/ 如果/ 存在/ 可/ 利用/ 的/ 已有/ 测试数据/ (/ 21.1/ %/ ~/ 79.0/ %/ )/ ,/ 本文/ 方法/ 在/ 两种/ 差异/ 度/ 阈值/ 下/ ,/ 均/ 能够/ 获得/ 较/ 高/ 的/ 目标/ 路径/ 覆盖率/ ,/ 其中/ ,/ 差异/ 度/ 阈值/ 为/ 5/ // 6/ 时/ ,/ 本文/ 方法/ 的/ 覆盖率/ 最小值/ 为/ 92.1/ %/ ,/ 进化/ 代数/ 也/ 较/ 少/ ./ 这/ 说明/ ,/ 如果/ 存在/ 已有/ 的/ 测试数据/ ,/ 本文/ 方法/ 生成/ 测试数据/ 的/ 效率/ 将/ 很/ 高/ ./ 表/ 7/ 不同/ 的/ 已有/ 测试数据/ 比例/ 下/ ,/ 生成/ 测试数据/ 已有/ 测试数据/ 比例/ // %/ 021.142/ ./ 157.979/ ./ 06/ 总结/ 本文/ 研究/ 生成/ 回归/ 测试数据/ ,/ 以/ 覆盖/ 程序/ 维护/ 影响/ 路径/ 时/ ,/ 测试数据/ 进化/ 生成/ 问题/ 的/ 数学模型/ 及其/ 求解/ 方法/ ./ 为此/ ,/ 首先/ ,/ 通过/ 路径/ 的/ 差异/ 度/ 和/ 相似/ 度/ ,/ 衡量/ 不同/ 路径/ 的/ 相关性/ ;/ 然后/ ,/ 基于/ 修改/ 节点/ 和/ 目标/ 路径/ 集合/ 的/ 相关矩阵/ ,/ 得到/ 目标/ 路径/ 覆盖/ 优先级/ ,/ 并/ 基于/ 覆盖/ 优先级/ 排序/ 后/ 的/ 目标/ 路径/ ,/ 建立/ 覆盖/ 被测/ 程序/ 目标/ 路径/ 的/ 测试数据/ 生成/ 问题/ 的/ 数学模型/ ;/ 最后/ ,/ 采用/ 遗传算法/ 求解/ 上述/ 模型/ 时/ ,/ 以/ 路径/ 相似/ 度/ 作为/ 评价/ 个体/ 性能/ 的/ 适应度/ 函数/ ,/ 并/ 利用/ 穿越/ 与/ 目标/ 路径/ 具有/ 相关性/ 的/ 路径/ 的/ 测试数据/ ,/ 替换/ 进化/ 种群/ 的/ 部分/ 个体/ ,/ 以/ 提高/ 种群/ 的/ 性能/ ,/ 从而/ 提高/ 测试数据/ 生成/ 的/ 效率/ ./ 为了/ 验证/ 所提/ 方法/ 的/ 有效性/ ,/ 对/ 多个/ 基准/ 和/ 工业/ 程序/ 测试/ ,/ 并/ 与/ 传统/ 回归/ 测试数据/ 生成/ 方法/ 、/ 利用/ 已有/ 测试数据/ 的/ 测试数据/ 生成/ 方法/ 等/ 比较/ ,/ 最后/ 的/ 实验/ 结果表明/ ,/ 本文/ 方法/ 利用/ 已有/ 的/ 测试数据/ 生成/ 期望/ 的/ 测试数据/ 时/ ,/ 耗时/ 少/ ,/ 且/ 目标/ 路径/ 覆盖率/ 高/ ./ 我们/ 发现/ ,/ 不同/ 的/ 被/ 测/ 程序/ ,/ 包含/ 的/ 路径/ 数目/ 、/ 输入/ 个数/ 以及/ 输入/ 类型/ 往往/ 有/ 差异/ ./ 如果/ 对于/ 不同/ 的/ 被/ 测/ 程序/ ,/ 采用/ 相同/ 的/ 遗传算法/ 参数设置/ ,/ 那么/ ,/ 利用/ 遗传算法/ 生成/ 测试数据/ 的/ 效率/ 将/ 有/ 很大/ 差别/ ./ 根据/ 被测/ 程序/ 的/ 特征/ ,/ 选择/ 合适/ 的/ 遗传算法/ 控制参数/ ,/ 是/ 需要/ 进一步/ 研究/ 的/ 问题/ ./ 此外/ ,/ 利用/ 其他/ 的/ 方法/ 选择/ 已有/ 的/ 测试数据/ ,/ 以/ 替换/ 当前/ 种群/ 的/ 部分/ 个体/ ,/ 也/ 将/ 会/ 提高/ 测试数据/ 生成/ 的/ 效率/ ,/ 这/ 也/ 是/ 需要/ 进一步/ 研究/ 的/ 问题/ ./ 致谢/ 各位/ 审稿/ 专家/ 对/ 本文/ 提出/ 了/ 宝贵/ 评审/ 意见/ ,/ 这些/ 评审/ 意见/ 对/ 提高/ 论文/ 水平/ 具有/ 很大/ 的/ 帮助/ ;/ 编辑/ 也/ 付出/ 了/ 辛勤工作/ ./ 在/ 此/ 一并/ 致谢/ !/ 

