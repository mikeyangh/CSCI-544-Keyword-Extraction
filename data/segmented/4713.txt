Page1/ 支持/ 通信/ 资源/ 全局/ 共享/ 的/ 射频/ 片上/ 网络/ 研究/ 肖/ 春华/ 刘韦辰/ (/ 信息/ 物理/ 社会/ 可信/ 服务/ 计算/ 教育部/ 重点/ 实验室/ 重庆/ 400044/ )/ (/ 重庆大学/ 计算机/ 学院/ 重庆/ 400044/ )/ 摘要/ 随着/ 半导体/ 集成电路/ 的/ 飞速发展/ ,/ 未来/ 的/ 片/ 上/ 芯片/ 中将/ 集成/ 数百/ 上/ 千个/ 处理/ 核/ ,/ 以/ 实现/ 越来越/ 复杂/ 的/ 功能/ ./ 基于/ 电气/ 互连/ 的/ 片/ 上/ 网络/ 在/ 大规模/ 片上/ 系统/ 中将/ 很难/ 满足/ 未来/ 高性能/ 计算/ 及多核/ 处理器/ 系统/ 的/ 通信/ 需求/ ./ 基于/ 射频/ 互连/ 的/ 片/ 上/ 网络/ 能够/ 以/ 接近/ 光/ 的/ 速度/ 实现/ 片内/ 的/ 低功耗/ 远距离/ 数据通信/ ,/ 是/ 未来/ 片上/ 网络/ 发展/ 的/ 重要/ 趋势/ 之一/ ./ 现有/ 的/ 射频/ 片上/ 网络/ 研究/ 中/ ,/ 片上/ 射频/ 资源/ 都/ 为/ 固定/ 的/ 射频/ 通信/ 节点/ 独占/ ,/ 存在/ 资源/ 利用率/ 不高/ ,/ 无法/ 满足/ 实时/ 通信/ 需求/ 等/ 问题/ ./ 针对/ 这些/ 问题/ ,/ 该文/ 首次/ 提出/ 基于/ 共享/ 射频/ 互连/ 的/ 片/ 上/ 网络/ SRFNoC/ ,/ 并/ 对/ 其/ 进行/ 了/ 清晰/ 的/ 刻画/ ./ 在/ 此基础/ 上/ ,/ 提出/ 基于/ 集群/ 共享/ 的/ 射频/ 片上/ 网络/ Club/ _/ SRFNoC/ ,/ 从/ 网络拓扑/ 结构设计/ 、/ 映射/ 算法/ ,/ 共享/ 信道/ 的/ 仲裁/ 机制/ 以及/ 路由/ 等/ 方面/ 进行/ 了/ 深入/ 地/ 研究/ ./ 通过/ 周期/ 精准/ 的/ 实验/ 仿真/ ,/ Club/ _/ SRFNoC/ 片上/ 网络/ 能够/ 以/ 43/ %/ (/ 平均值/ )/ 的/ 片/ 上/ 射频/ 资源/ ,/ 实现/ Club/ _/ ERFNoC/ 片上/ 网络/ 相同/ 的/ 网络/ 性能/ ./ 关键词/ 片上/ 射频/ 互连/ ;/ 片上/ 网络/ ;/ 应用/ 映射/ ;/ 仲裁/ ;/ 路由/ 1/ 引言/ 随着/ CMOS/ 工艺/ 的/ 进步/ 和/ 片/ 上/ 网络系统/ 规模/ 的/ 增加/ ,/ 基于/ 金属/ 铜/ 的/ 片/ 上/ 互连/ 面临/ 着/ 严重/ 的/ 性能/ 及/ 功耗/ 瓶颈/ ,/ 将/ 不再/ 满足/ 未来/ 应用/ 对/ 高效能/ 通信/ 互连/ (/ 高带宽/ 、/ 低/ 时延/ 、/ 低功耗/ )/ 的/ 巨大/ 需求/ ①/ ,/ 光/ 互连/ 、/ 射频/ 互连/ 等/ 新兴/ 片上/ 互连/ 逐渐/ 成为/ 取代/ 传统/ 电气/ 互连/ 的/ 可能/ 趋势/ ./ 射频/ 互连/ 通过/ 传输/ 信道/ TL/ (/ TransmissionLine/ )/ 中/ 持续/ 发送/ 的/ 电磁/ 载波/ EM/ (/ ElectronicMagneticWave/ )/ 进行/ 数据通信/ (/ 如图/ 1/ 所示/ )/ ,/ 能够/ 以/ 接近/ 光图/ 1/ 一个/ 包含/ 10/ 条/ 载波/ 的/ 射频/ 互连/ 传输/ 链路/ 表/ 1/ 光/ 互连/ 和/ 射频/ 互连/ 与/ 传统/ 电气/ 互连/ 的/ 比较/ 设计/ 需求/ CMOS/ 兼容性/ 性能/ 优势/ (/ 与/ 传统/ 基于/ 铜/ 的/ 电气/ 互连/ 相比/ )/ 可靠性/ 设计/ 挑战/ 但是/ ,/ 如何/ 在/ 片/ 上/ 资源/ 有限/ 的/ 条件/ 下/ ,/ 高效率/ 利用/ 和/ 分配/ 有效/ 的/ 片/ 上/ 射频/ 通信/ 资源/ ,/ 是/ 射频/ 片上/ 网络/ 设计/ 中/ 一项/ 非常/ 具有/ 挑战性/ 的/ 工作/ ./ 虽然/ 片上/ 射频/ 互连/ 资源/ 能够/ 随着/ 设计/ 工艺/ 的/ 进步/ 而/ 增加/ ,/ 但/ 在/ 目前/ 的/ 技术/ 条件/ 下/ ,/ 支持/ 更/ 多/ 的/ 片/ 上/ 射频/ 互连/ 信道/ ,/ 意味着/ 更/ 高/ 的/ 设计/ 复杂度/ 以及/ 难以/ 接受/ 的/ 设计/ 成/ 的/ 速度/ 在/ 芯片/ 内/ 实现/ 低能耗/ 的/ 远距离/ 数据/ 1/ -/ hop/ 传输/ ,/ 更为重要/ 的/ 是/ ,/ 射频/ 互连/ 还/ 具有/ 非常/ 好/ 的/ CMOS/ 兼容性/ 和/ 灵活/ 的/ 可/ 重构/ 性/ ,/ 与/ 光/ 互连/ 技术/ 相比/ ,/ 更/ 容易/ 实现/ 高效/ 的/ 片/ 上/ 互连/ (/ 光/ 互连/ 和/ 射频/ 互连/ 的/ 比较/ 如表/ 1/ 所示/ )/ ./ 基于/ 射频/ 互连/ 的/ 片/ 上/ 网络/ RFNoC/ (/ Radio/ -/ FrequencyinterconnectbasedNetwork/ -/ on/ -/ Chip/ )/ ,/ 既/ 能够/ 充分发挥/ 电气/ 互连/ 成本/ 低廉/ 、/ 连接/ 简单/ 、/ 适合/ 短距离/ 通信/ 等/ 优点/ ,/ 又/ 能够/ 充分利用/ 新兴/ 片上/ 射频/ 互连/ 的/ 高效率/ 、/ 低能耗/ 、/ 连接/ 灵活/ 、/ 适合/ 中长距离/ 通信/ 等/ 优势/ ,/ 已经/ 成为/ 构建/ 高/ 能效/ 片上/ 网络/ 的/ 重要/ 趋势/ 之一/ ./ 本/ ./ 信道/ 间/ 的/ 干扰/ ,/ 信号/ 传输/ 的/ 可靠性/ 等/ 都/ 是/ 限制/ 片上/ 射频/ 信道/ 规模/ 的/ 瓶颈/ 问题/ ./ 因此/ 如何/ 高效/ 地/ 分配/ 有限/ 的/ 片/ 上/ 射频/ 资源/ ,/ 以/ 最少/ 射频/ 资源/ 开销/ 获得/ 最优/ 的/ 性能/ 提升/ ,/ 是/ 射频/ 片上/ 网络/ 设计/ 中/ 的/ 关键问题/ ./ 通过/ 对/ 基于/ 射频/ 互连/ 的/ 片/ 上/ 网络/ 的/ 深入研究/ ,/ 本文/ 发现/ ,/ 现有/ 的/ 射频/ 片上/ 网络/ 都/ 是/ 基于/ 独占/ 射频/ 互连/ 的/ 片/ 上/ 网络/ ERFNoC/ (/ Network/ -/ on/ -/ ChipwithExclusiveallocatedRadioFrequencyinterconnect/ )/ ,/ 射频/ 信道/ 为/ 特定/ 的/ 射频/ 通信/ 节点/ 独享/ ,/ 存在/ 资源/ 利用率/ 低/ ,/ 无法/ 满足/ 实时/ 通信/ 需求/ 等/ 问题/ ./ 针对/ 这些/ 问题/ ,/ 本文/ 首次/ 提出/ 基于/ 共享/ 射频/ 互连/ 的/ 片/ 上/ 网络/ SRFNoC/ (/ NetworkonChipwithSharedRadioFrequencyinterconnect/ )/ ,/ 并/ 对/ 其/ 网络体系结构/ 进行/ 了/ 清晰/ 的/ 刻画/ ,/ 在/ 此基础/ 上/ ,/ 提出/ 基于/ 集群/ 共享/ 的/ 射/ ①/ InternationalTechnologyRoadmapforSemiconductorsPage3/ 频片/ 上/ 网络/ Club/ _/ SRFNoC/ ,/ 从/ 网络拓扑/ 结构设计/ 、/ 映射/ 算法/ ,/ 共享/ 信道/ 的/ 仲裁/ 机制/ 以及/ 路由/ 等/ 方面/ 展开/ 了/ 深入/ 地/ 研究/ ./ 2/ 基于/ 射频/ 互连/ 的/ 片/ 上/ 网络/ 相关/ 研究/ 2.1/ 国内外/ 研究/ 现状/ 基于/ 射频/ 互连/ 的/ 片/ 上/ 网络/ 是/ NoC/ 研究/ 领域/ 中/ 新兴/ 的/ 前沿性/ 研究课题/ ./ 第/ 1/ 篇/ 射频/ 片上/ 网络/ 研究/ 文献/ 发表/ 于/ 2008/ 年/ ,/ 由/ 加州大学洛杉矶分校/ (/ UCLA/ )/ 的/ Chang/ 、/ Cong/ 和/ Reinman/ 等/ 教授/ 领导/ [/ 1/ ]/ 的/ 研究/ 小组/ 提出/ ,/ 该/ 文献/ 获得/ 了/ HPCA2008/ 会议/ 的/ 最佳/ 学术论文/ 奖/ ./ UCLA/ 研究/ 小组/ 在/ 这篇/ 文献/ 中对片/ 上/ 射频/ 互连/ 的/ 可行性/ ,/ 片上/ 射频/ 互连/ 的/ 传输/ 特性/ ,/ 与/ 电气/ 互连/ 及片/ 上光/ 互连/ 的/ 性能/ 比较/ 和/ 分析/ 等/ 进行/ 了/ 详细/ 的/ 阐述/ ,/ 并/ 提出/ 了/ 第一个/ 基于/ 射频/ 的/ 片/ 上/ 网络结构/ MORFI/ ./ 在/ 同年/ 的/ MICRO/ 会议/ 上/ ,/ UCLA/ 研究/ 小组/ 从片/ 上/ 网络/ 低功耗/ 设计/ 的/ 角度/ 对/ 基于/ 射频/ 互连/ 的/ 片/ 上/ 网络/ 进行/ 了/ 深入/ 的/ 分析/ 和/ 探讨/ [/ 2/ ]/ ./ 2009/ 年/ ,/ 华盛顿/ 州立大学/ 及/ 罗彻斯特/ 理工学院/ 的/ Ganguly/ 等/ 人/ [/ 3/ ]/ 在/ NoC/ 结构/ 会议/ 上/ (/ NetworkonChipArchitectures/ ,/ 2009/ )/ 对/ 基于/ wireless/ 的/ 混合/ 片上/ 网络结构/ 设计/ 进行/ 了/ 详细/ 的/ 介绍/ ./ 2010/ 年/ ,/ 研究者/ 将/ 基于/ 射频/ 互连/ 的/ 片/ 上/ 网络/ 与/ 基于/ 光/ 互连/ 的/ 片/ 上/ 网络/ 进行/ 性能/ 评估/ 、/ 分析/ 和/ 比较/ ,/ 并/ 对片/ 上/ 无线/ 互连/ 集成/ 到/ 3D/ 片上/ 网络/ 的/ 可能性/ 等/ 进行/ 了/ 探索/ [/ 4/ ]/ ./ 从/ 2011/ 年/ 起/ ,/ 基于/ 射频/ 互连/ 的/ 片/ 上/ 网络/ 研究/ 已经/ 成为/ 片上/ 网络/ 研究/ 的/ 一个/ 重要/ 研究/ 领域/ 之一/ ,/ 并/ 有/ 多篇/ 文献/ 发表/ 于/ IEEE/ 及/ ACM/ 的/ 相关/ 国际/ 期刊/ 及/ 杂志/ [/ 5/ -/ 9/ ]/ ./ 近几年来/ ,/ 国内/ 在/ 基于/ 射频/ 互连/ 的/ 片/ 上/ 网络/ 领域/ 也/ 展开/ 了/ 相关/ 的/ 学术研究/ ,/ 包括/ 清华大学/ [/ 10/ ]/ 、/ 国防科学技术大学/ [/ 11/ ]/ 、/ 南京大学/ [/ 12/ ]/ 、/ 哈尔滨工业大学/ [/ 13/ ]/ 、/ 电子科技/ 大学/ [/ 14/ ]/ 以及/ 北京工业大学/ [/ 9/ ]/ 等/ ,/ 并/ 取得/ 了/ 一定/ 的/ 研究成果/ ./ 2.2/ 基于/ 独占/ 射频/ 互连/ 的/ 片/ 上/ 网络/ ERFNoC/ 根据/ 射频/ 通信/ 资源分配/ 策略/ 的/ 不同/ ,/ 目前/ 已/ 公开/ 发表/ 的/ 射频/ 片上/ 网络/ 可以/ 分为/ 两类/ :/ 收发/ 独占/ 的/ 射频/ 片上/ 网络/ (/ T/ _/ exclusive/ ,/ R/ _/ exclusive/ )/ 以及/ 发送/ // 接收/ 独占/ 的/ 射频/ 片上/ 网络/ (/ T/ _/ exclusive/ // R/ _/ exclusive/ )/ ./ 收发/ 独占/ 的/ 射频/ 片上/ 网络/ 中/ (/ T/ _/ exclusive/ ,/ R/ _/ exclusive/ )/ ,/ 片上/ 射频/ 资源/ 为/ 固定/ 的/ 射频/ 通信/ 对/ 之间/ 的/ 独占/ 式/ 资源/ [/ 2/ ]/ ./ 在/ 整个/ 应用/ 执行/ 周期/ 内/ ,/ 特定/ 的/ 射频/ 信道/ 只/ 允许/ 1/ 个/ 固定/ 的/ 射频/ 通信/ 节点/ 进行/ 数据/ 传送/ ./ 每个/ 射频/ 通信/ 信道/ 也/ 只有/ 1/ 个/ 固定/ 的/ 射频/ 数据/ 接收/ 节点/ ./ 这类/ 片/ 上/ 网络/ 以片/ 上/ 通信/ 轨迹/ 可/ 预估/ 为/ 设计/ 前提/ ,/ 设计/ 时/ 需要/ 根据/ 准确/ 完善/ 的/ 片/ 上/ 网络通信/ 轨迹/ 、/ 通信/ 数据/ 以及/ 通信/ 开销/ ,/ 选择/ 使得/ 网络/ 性能/ 最优/ 的/ 射频/ 通信/ 对/ 分配/ 独占/ 式/ 射频/ 信道/ ,/ 因此/ 无法/ 满足/ 存在/ 实时/ 通信/ 的/ 应用/ 需求/ ./ 发送/ // 接收/ 独占/ 的/ 射频/ 片上/ 网络/ 中/ (/ T/ _/ exclusive/ // R/ _/ exclusive/ )/ ,/ 射频/ 信道/ 为/ 特定/ 射频/ 通信/ 节点/ 的/ 独有/ 发送/ // 接收/ 信道/ [/ 6/ ,/ 15/ ]/ ./ 射频/ 通信/ 节点/ 的/ 片/ 上/ 接收器/ // 发送器/ 的/ 接收/ 频率/ // 接收/ 频率/ 在/ 整个/ 应用/ 执行/ 周期/ 内/ 不变/ ,/ 对应/ 的/ 片/ 上/ 发送器/ // 接收器/ 的/ 发送/ 频率/ // 接收/ 频率/ ,/ 则/ 根据/ 当前/ 的/ 数据/ 传送/ 需求/ 及/ 信道/ 的/ 分配/ 策略/ 进行/ 实时/ 调频/ ./ 这类/ 片/ 上/ 网络/ 要求/ 至少/ 为/ 每/ 一个/ 射频/ 通信/ 节点/ 分配/ 1/ 条/ 独立/ 的/ 射频/ 信道/ ,/ 当片/ 上/ 射频/ 资源/ 有限/ 时/ ,/ 每条/ 射频/ 信道/ 能够/ 分配/ 的/ 信道/ 带宽/ 将/ 很小/ ,/ 降低/ 了/ 各条/ 射频/ 信道/ 的/ 通信/ 数据/ 率/ ./ 并且/ ,/ 当片/ 上/ 网络/ 的/ 通信模型/ 非/ 均匀/ 时/ ,/ 将/ 有/ 大量/ 的/ 射频/ 信道/ 处于/ 空闲/ 状态/ ,/ 造成/ 严重/ 的/ 片/ 上/ 资源/ 浪费/ ./ 本文/ 将/ 已有/ 的/ 两类/ 射频/ 片上/ 网络/ :/ 收发/ 独占/ 的/ 射频/ 片上/ 网络/ (/ T/ _/ exclusive/ ,/ R/ _/ exclusive/ )/ 以及/ 发送/ // 接收/ 独占/ 的/ 射频/ 片上/ 网络/ (/ T/ _/ exclusive/ // R/ _/ exclusive/ )/ 统称/ 为/ 独占/ 射频/ 片上/ 网络/ ERFNoC/ (/ NetworkonChipwithExclusiveallocatedRadioFrequencyinterconnect/ )/ ,/ 其/ 特征/ 为/ 射频/ 信道/ 为/ 特定/ 的/ 射频/ 通信/ 节点/ 独享/ ,/ 通过/ 静态/ 策略/ 分配/ 给/ 固定/ 的/ 通信/ 节点/ 对/ 或/ 令牌/ 策略/ 分配/ 给/ 特定/ 的/ 发送/ // 接收/ 节点/ ./ 针对/ 这种/ 独占/ 式/ 射频/ 片上/ 网络/ 存在/ 资源/ 利用率/ 不高/ ,/ 应用性/ 不/ 强/ ,/ 设计/ 开销/ 大/ 等/ 问题/ ,/ 本文/ 提出/ 基于/ 共享/ 射频/ 互连/ 的/ 片/ 上/ 网络/ ./ 3/ 基于/ 共享/ 射频/ 互连/ 的/ 片/ 上/ 网络/ 针对/ 独占/ 射频/ 片上/ 网络/ 的/ 不足/ ,/ 我们/ 提出/ 基于/ 共享/ 射频/ 互连/ 的/ 片/ 上/ 网络/ SRFNoC/ (/ NetworkonChipwithSharedRadioFrequencyinterconnect/ )/ ,/ 实现/ 射频/ 通信/ 资源/ 的/ 全局/ 共享/ ./ 在/ 应用/ 执行/ 周期/ 内/ ,/ 射频/ 互连/ 资源/ 实时/ 按需分配/ ,/ 射频/ 通信/ 节点/ 可以/ 根据/ 通信/ 需求/ ,/ 在/ 特定/ 通信/ 周期/ 内/ 享有/ 对/ 某个/ 频带/ 资源/ 的/ 独占权/ ./ 射频/ 通信/ 节点/ 的/ 片/ 上/ 发送器/ // 接收器/ 的/ 发送/ 频率/ // 接收/ 频率/ 根据/ 网络通信/ 需求/ 进行/ 调频/ ./ 一个/ 典型/ 的/ 基于/ 共享/ 射频/ 的/ 片/ 上/ 网络体系结构/ 如图/ 2/ 所示/ ,/ 网络系统/ 由/ 网络接口/ NI/ (/ NetworkInterface/ )/ 、/ 路由/ 交换/ 单元/ RS/ (/ RoutingSwitch/ )/ 、/ 射频/ 节点/ RFNode/ ,/ 电气/ 通信/ 链路/ RClink/ 以及/ 共享/ 射频/ 传输/ 链路/ RFlink/ 组成/ ./ Page4/ 图/ 2/ 基于/ 共享/ 射频/ 互连/ 的/ 片/ 上/ 网络体系结构/ 网络接口/ NI/ ./ 实现/ 处理单元/ (/ 处理单元/ 可以/ 是/ 处理器/ 、/ 存储器/ 、/ 硬件加速/ 单元/ ,/ 输入输出/ 设备/ 等/ 嵌入式/ IP/ 核/ ,/ 承担/ 系统/ 的/ 计算/ 和/ 存储/ 任务/ )/ 与/ 片/ 上/ 网络/ 之间/ 的/ 连接/ ;/ 路由/ 交换/ 单元/ RS/ ./ 完成/ 通信/ 数据/ 的/ 路由/ 及/ 转发/ ./ 根据/ 输入输出/ 端口/ 的/ 不同/ ,/ 路由/ 交换/ 单元/ 分为/ 基本/ 路由/ 交换/ 单元/ (/ BaseRouter/ )/ 和/ 射频/ 使能/ 路由/ 交换/ 单元/ (/ RF/ -/ EnabledRouter/ )/ ;/ 片上/ 射频/ 节点/ (/ RFNode/ )/ ./ 包含/ 射频/ 接收器/ 、/ 射频/ 发送器/ 、/ 数据/ 缓存/ 单元/ 、/ 数据/ 调制解调器/ 、/ 低通滤波器/ 等/ ,/ 实现/ 基于/ 射频/ 互连/ 的/ 数据/ 接收/ 、/ 发送/ 和/ 处理/ ;/ 电气/ 通信/ 链路/ (/ RClink/ )/ ./ 包含/ 1/ 个/ 或/ 多个/ 逻辑/ 、/ 物理/ 信道/ ,/ 连接/ 网络/ 中/ 的/ 路由/ 交换/ 单元/ ,/ 实现/ 通信/ 数据/ 的/ 电气/ 传输/ ;/ 射频/ 传输/ 链路/ (/ RF/ -/ ITransmissionLine/ ,/ 简称/ RF/ -/ TL/ 或/ RFlink/ )/ ./ 片上/ 射频/ 传输/ 的/ 物理/ 传输/ 信道/ ,/ 信道/ 中/ 持续/ 着/ 不间断/ 的/ 电磁/ 载波/ EM/ (/ ElectronicMagneticWave/ )/ ,/ 通信/ 数据/ 通过/ 幅度/ 和/ // 或/ 相位/ 的/ 变化/ 调制/ 到/ 载波/ 进行/ 数据/ 的/ 传输/ ,/ 实现/ 基于/ 射频/ 的/ 片/ 上/ 互连/ ./ 基于/ 共享/ 射频/ 的/ 片/ 上/ 网络/ 包括/ 两级/ 通信/ 网络/ ,/ 底层/ 通信子网/ 和/ 共享/ 射频/ 通信子网/ :/ 底层/ 通信子网/ (/ BaselineNetwork/ ,/ BN/ )/ ./ 由/ 路由/ 交换/ 单元/ 及/ 电气/ 通信/ 链路/ 等/ 构成/ 的/ 通信子网/ ,/ 实现/ 基于/ 电子/ 电气/ 的/ 通信/ 互联/ ./ 底层/ 子网/ 中/ 远距离/ 节点/ 对/ 之间/ 的/ 通信/ ,/ 需要/ 经过/ 多次/ 中间/ 路由/ (/ Multi/ -/ Hops/ )/ 实现/ ./ 共享/ 射频/ 通信子网/ (/ networkwithsharedRF/ -/ I/ ,/ SRFN/ )/ ./ 由/ 射频/ 使能/ 路由器/ 、/ 射频/ 节点/ 以及/ 射频/ 传输/ 链路/ 等/ 构成/ 的/ 通信子网/ ,/ 实现/ 基于/ 射频/ 的/ 通信/ 互联/ ./ 射频/ 传输/ 链路/ 中有/ 多条/ 共享/ 射频/ 信道/ ,/ 网络/ 的/ 任意/ 两个/ 射频/ 通信/ 节点/ 通过/ 争用/ 共享/ 射频/ 信道/ ,/ 实现/ 直接/ 通信/ (/ Single/ -/ HopCommunication/ )/ ./ 与/ 独占/ 射频/ 片上/ 网络/ 相比/ (/ 如表/ 2/ 所示/ )/ ,/ 共享/ 射频/ 片上/ 网络/ 可以/ 争用/ 网络/ 中/ 的/ 任/ 一条/ 共享/ 信道/ 发送数据/ 信息/ ,/ 共享/ 射频/ 信道/ 的/ 实时/ 按需分配/ ,/ 高效率/ 利用/ 片上/ 射频/ 通信/ 资源/ ,/ 同时/ 满足/ 实时性/ 通信/ 需求/ 和/ 不同/ 应用/ 的/ 通信/ 需求/ ./ 4/ 基于/ 共享/ 射频/ 互连/ 的/ 片/ 上/ 网络/ 设计/ 网络拓扑/ 结构/ 的/ 设计/ 、/ 共享/ 射频/ 信道/ 的/ 实时/ 动态分配/ 以及/ 网络通信/ 路由/ 是/ 共享/ 射频/ 片上/ 网络/ 设计/ 中/ 的/ 3/ 个/ 重要/ 关键问题/ ./ Page5/ 射频/ 信道/ 的/ 使用/ 方式/ 射频/ 信道/ 的/ 归属权/ 是否/ 满足/ 实时/ 通信/ 需求/ 射频/ 信道/ 的/ 资源/ 利用率/ 是否/ 满足/ 均衡/ 通信/ 及/ 非均衡/ 通信/ 应用/ 的/ 需求/ 对片/ 上/ 射频/ 资源/ 的/ 需求/ (/ N/ 为/ 射频/ 通信/ 节点/ 个数/ )/ 表/ 2/ 独占/ 射频/ 片上/ 网络/ 和/ 共享/ 射频/ 片上/ 网络/ 的/ 分析/ 比较/ 不/ 支持/ 全局/ 共享/ 的/ 独占/ 射频/ 片上/ 网络/ (/ ERFNoC/ )/ Texclusive/ ,/ Rshared/ 特定/ 射频/ 通信/ 节点/ 是/ 低否/ 至少/ 有/ 1/ 条/ 射频/ 通信/ 信道/ 至少/ 有/ N/ 条/ 射频/ 通信/ 信道/ 至少/ 有/ N/ 条/ 射频/ 通信/ 信/ 4.1/ 基于/ 集群/ 的/ 共享/ 射频/ 片上/ 网络拓扑/ 结构/ 共享/ 射频/ 片上/ 网络/ 为/ 层级/ 拓扑/ 结构/ ,/ 包含/ 底层/ 通信子网/ 和/ 共享/ 射频/ 通信子网/ 两个/ 层级/ ,/ 底层/ 通信子网/ 由/ 路由器/ (/ 包括/ 基本/ 路由/ 交换/ 单元/ 和/ 射频/ 使能/ 路由/ 交换/ 单元/ )/ 及/ 电气/ 有线/ 互连/ 组成/ ,/ 可以/ 根据/ 需要/ 选择/ 不同/ 的/ 拓扑/ 结构/ ,/ 如/ 二维/ MESH/ 、/ 星形/ 或是/ 环形/ 等/ ;/ 共享/ 射频/ 通信子网/ 由/ 射频/ 使能/ 路由器/ 、/ 射频/ 节点/ 及/ 共享/ 射频/ 互联/ 组成/ ,/ 网络拓扑/ 类似/ 于/ “/ 总线/ ”/ 结构/ ,/ 射频/ 使能/ 路由器/ 通过/ 射频/ 节点/ 连接/ 到/ 射频/ 传输/ 链路/ ,/ 实现/ 与/ 共享/ 射频/ 信道/ 的/ 连接/ ./ 根据/ 通信/ 节点/ 在/ 芯片/ 上/ 的/ 布局/ 布线/ 的/ 不同/ ,/ 射频/ 传输/ 链路/ 的/ 物理/ 实现/ 拓扑/ 结构/ 不同/ ,/ 本文/ 假定/ 其/ 在/ 物理/ 上/ 为/ 规则/ 的/ 曲形/ 结构/ ./ 本文/ 所/ 采用/ 的/ 基于/ 集群/ 的/ 共享/ 射频/ 片上/ 网络/ (/ Club/ _/ SRFNoC/ )/ 拓扑/ 结构/ 如图/ 3/ 所示/ ,/ 底层/ 通信子网/ 在/ 逻辑/ 上/ 划分/ 为/ 多个/ 子/ MESH/ 网格/ (/ Sub/ _/ mesh/ )/ ,/ 图/ 3/ 基于/ 集群/ 的/ 共享/ 射频/ 片上/ 网络拓扑/ 结构/ 每/ 一个/ 子/ 网格/ 为/ 一个/ 逻辑/ 子/ 集群/ (/ cluster/ )/ ,/ 每个/ 集群/ 共享/ 一个/ 射频/ 通信/ 节点/ (/ 称为/ 集群/ 射频/ 通信/ 节点/ )/ ,/ 通过/ 该/ 射频/ 通信/ 节点/ 实现/ 与/ 其他/ 集群/ 内/ 节点/ 的/ 射频/ 通信/ ./ 各/ 集群/ 射频/ 使能/ 路由器/ 通过/ 射频/ 节点/ 连接/ 到/ 射频/ 传输/ 链路/ ,/ 共享/ 多条/ 射频/ 传输/ 信道/ ./ 基于/ 集群/ 的/ 共享/ 射频/ 片上/ 网络结构/ 设计/ 参数/ 包括/ :/ 子/ 集群/ 大/ 小S/ 、/ 子/ 集群/ 个数/ Nc/ 、/ 共享/ 数据/ 信道/ 带宽/ Bs/ 以及/ 共享/ 数据/ 信道/ 的/ 数量/ Ns/ ./ 对于/ 任意/ 给定/ 的/ 设计/ 输入/ ,/ 我们/ 采用/ 穷尽/ 搜索算法/ (/ 中/ 规模/ 片上/ 网络/ )/ 或/ 启发式/ 搜索算法/ (/ 大规模/ 片上/ 网络/ )/ ,/ 选择/ 使得/ 目标/ 函数/ 值/ SOF/ (/ SystemObjectiveFunction/ )/ 最小/ 的/ 组合/ 为/ 最优/ 的/ 设计/ 参数/ ./ 本文/ 的/ SOF/ 由/ 成本/ (/ Cost/ )/ 和/ 性能/ (/ Performance/ )/ 两个/ 部分/ 组成/ ,/ 其/ 计算公式/ 可以/ 描述/ 为/ SOF/ =/ β/ ×/ Performance/ +/ (/ 1/ -/ β/ )/ ×/ Cost/ (/ 其中/ 0/ / β/ / 1/ )/ ,/ 因此/ ,/ 最优设计/ 参数/ 组合/ 可以/ 描述/ 为/ 其中/ ,/ Ti/ =/ ∑/ (/ Pi/ ,/ Qi/ )/ ,/ Pi/ =/ {/ Si/ ,/ Nci/ }/ ,/ 满足/ Si/ ×/ Nci/ =/ N/ ,/ 1/ </ Si/ </ N/ (/ Si/ ,/ Nci/ 都/ 为/ 正整数/ ,/ N/ 为/ 网络/ 中/ 总/ 的/ 通信/ 节点/ 个数/ )/ ;/ Qi/ =/ {/ Bsi/ ,/ Nsi/ }/ ,/ 满足/ Bsi/ ×/ Nsi/ =/ Brf/ ,/ 且/ Brc/ / Bsi/ / Brf/ (/ Bsi/ 及/ Nsi/ 都/ 为/ 正整数/ ,/ Brc/ 为/ 电气/ 输/ 信道/ 的/ 带宽/ ,/ Brf/ 为/ 射频/ 通信/ 资源/ 总/ 带宽/ )/ ./ 针对/ Club/ _/ SRFNoC/ 结构特征/ ,/ 本文/ 提出/ 一种/ 基于/ 多路/ 划分/ 的/ 层级/ 应用/ 映射/ 算法/ MKHM/ (/ HierarchicalMappingbasedonMultilevelK/ -/ waypartitioning/ )/ ,/ 该/ 算法/ 将/ 映射/ 进程/ 分为/ 集群/ 的/ 划分/ 、/ 集群/ 的/ 映射/ 和/ 集群/ 内/ 映射/ 3/ 个/ 层级/ ./ 集群/ 划分/ 是/ 指/ ,/ 将/ 通信/ 轨迹/ 图/ (/ CommunicationTraceGraph/ ,/ CTG/ )/ 划分/ 为/ k/ 个子/ 集群/ (/ k/ 路/ 通信/ 轨迹/ 图/ KCTG/ ,/ 每个/ 子/ 集群/ 称为/ 1/ 个/ 超级/ 节点/ )/ ,/ 使得/ 集群/ 之间/ 的/ 通信/ 度/ 最小/ ,/ 即/ 网络/ 的/ 切割/ 边数/ 最少/ ,/ 同样/ 也/ 将/ 结构特征/ 图/ (/ ArchitectureCharacterizationGraph/ ,/ ACG/ )/ 划分/ 为/ 相同/ 大小/ 的/ k/ 个子/ 网格/ 结构/ (/ k/ 路/ 结构特征/ 图/ KACG/ )/ ;/ 集群/ 的/ 映射/ 是/ 指/ 将/ 划分/ 好/ 的/ K/ 路/ 通信/ 轨迹/ 图中/ 的/ 各/ 超级/ 节点/ 映射/ 到/ k/ 路/ 结构特征/ 图/ KACG/ 中/ 的/ 各/ 逻辑/ 子/ 网格/ Sub/ _/ Mesh/ ./ 通过/ 将/ 通信/ 密切/ 的/ 子/ 集群/ 映射/ 到/ 相/ Page6/ 邻/ 的/ 逻辑/ 子/ 网格/ ,/ 进一步/ 减少/ 了/ 集群/ 间/ 的/ 通信/ 开销/ ./ 集群/ 内部/ 映射/ 是/ 指/ ,/ 对/ 完成/ 了/ 集群/ 映射/ 的/ 各子/ 节点/ 群/ ,/ 实现/ 集群/ 内部/ 各/ 节点/ 到子/ 网格/ Sub/ -/ Mesh/ 各/ 资源/ 节点/ 的/ 映射/ ,/ 最小化/ 集群/ 内部/ 各/ 节点/ 之间/ 的/ 通信/ 路由/ 跳数/ ./ 将/ 1/ 个/ 包含/ 16/ 个/ 节点/ 的/ CTG/ 图/ 映射/ 到/ 1/ 个/ 分为/ 4/ 个/ 集群/ 的/ 共享/ 射频/ 网络/ 的/ 流程/ 如图/ 4/ 所示/ ./ 首先/ 采用/ 多级/ K/ 路/ 划分/ 方法/ (/ MutlilevelK/ -/ wayparti/ -/ tioning/ )/ [/ 16/ ]/ ,/ 将/ 16/ 个/ 节点/ 划分/ 到/ 4/ 个/ 集群/ ,/ 每个/ 集群/ 称为/ 1/ 个/ 超级/ 节点/ SuperNode/ ./ 另一方面/ ,/ 将/ 通信/ 特征/ 图/ 分为/ 4/ 个子/ 集群/ ,/ 每个/ 子/ 集群/ 称为/ 1/ 个/ 超级/ 资源/ 节点/ SuperRouter/ ./ 然后/ 将/ KCTG/ 中/ 的/ 各/ 超级/ 节点/ (/ 如图/ 4/ (/ b/ )/ 所示/ )/ 映射/ 到/ KACG/ 中/ 的/ 各/ 超级/ 资源/ 节点/ ./ 该/ 步骤/ 需要/ 计算/ 各/ 超级/ 节点/ 的/ 外/ 连接/ 度图/ 4MKHM/ 应用/ 映射/ 算法/ 流程/ 示意图/ 最后/ 一步/ 是/ 集群/ 内部/ 映射/ ,/ 将/ 超级/ 节点/ 还原成/ 处理/ 节点/ ,/ 将/ 超级/ 资源/ 节点/ 还原成/ 资源/ 节点/ ,/ 并/ 实现/ 处理/ 节点/ 向/ 资源/ 节点/ 的/ 映射/ ./ 集群/ 内部/ 映射/ 分为/ 3/ 个/ 部分/ :/ (/ 1/ )/ 射频/ 通信/ 节点/ 映射/ ./ Club/ _/ SRFNoC/ 结构/ 中/ 射频/ 通信/ 节点/ 在/ 拓扑/ 架构/ 中/ 的/ 位置/ 固定/ ,/ 且/ 位于/ 各子/ 网格/ 的/ 相同/ 位置/ ./ 映射/ 时/ 选择/ 各子/ 集群/ 外/ 连接/ 度/ ED/ 最大/ 的/ 节点/ 映射/ 到/ 各子/ 网格/ 的/ 射频/ 资源/ 节点/ 位置/ ./ 若有/ 多个/ 节点/ 外/ 连接/ 度/ 相等/ 且/ 都/ 为/ 最大/ 外/ 连接/ 度时/ ,/ 则/ 选择/ 这些/ 节点/ 中内/ 连接/ 度/ 最小/ 的/ 节点/ 映射/ 到/ 射频/ 资源/ 节点/ ./ (/ 2/ )/ 边界点/ 映射/ ./ 将/ 各子/ 集群/ 的/ 边界点/ 按照/ 外/ 连接/ 度/ ED/ 的/ 高低/ 依次/ 映射/ 到子/ 网格/ 的/ 边缘/ 资源/ 节/ EDi/ (/ 图/ 4/ 中/ EDc/ =/ 6/ ,/ EDa/ =/ 4/ ,/ EDb/ =/ 3/ ,/ EDd/ =/ 4/ )/ 以及/ 各/ 超级/ 资源/ 节点/ 的/ 资源/ 度/ RDi/ (/ 图/ 4/ 中/ RD1/ =/ RD2/ =/ RD3/ =/ RD4/ =/ 2/ )/ ./ 然后/ 根据/ 以下/ 两个/ 原则/ 进行/ 映射/ :/ (/ 1/ )/ 各/ 超级/ 节点/ 的/ 外/ 连接/ 度/ 高低/ 依次/ 选择/ 映射/ 的/ 超级/ 资源/ 节点/ ,/ 外/ 连接/ 度高/ 的/ 超级/ 节点/ 首先/ 选择/ 超级/ 资源/ 节点/ ,/ 并且/ 选择/ 资源/ 节点/ 度/ 较/ 高/ 的/ 超级/ 资源/ 节点/ ./ (/ 2/ )/ 映射/ 超级/ 节点/ 时/ ,/ 首先/ 判断/ 该/ 节点/ 是否/ 与/ 已/ 映射/ 的/ 超级/ 节点/ 存在/ 切割/ 边/ ,/ 若/ 存在/ ,/ 则/ 将/ 其/ 映射/ 到/ 离/ 该/ 已/ 映射/ 超级/ 节点/ 距离/ 最近/ 的/ 超级/ 资源/ 节点/ ;/ 若/ 与/ 已/ 映射/ 的/ 超级/ 节点/ 之间/ 不/ 存在/ 切割/ 边/ ,/ 则/ 将/ 其/ 映射/ 到/ 离/ 已/ 映射/ 超级/ 节点/ 不/ 相邻/ ,/ 且/ 资源/ 度/ 较/ 高/ 的/ 超级/ 资源/ 节点/ ./ 点/ ,/ 或是/ 距离/ 射频/ 通信/ 节点/ 较近/ 的/ 资源/ 节点/ ./ (/ 3/ )/ 内点/ 映射/ ./ 最后/ 按照/ 内/ 连接/ 度/ 高低/ 将/ 剩余/ 通信/ 节点/ 依次/ 映射/ 到子/ 网格/ 的/ 剩余/ 资源/ 节点/ ,/ 映射/ 时/ 判定/ 当前/ 映射/ 节点/ 是否/ 与/ 已/ 映射/ 节点/ 存在/ 通信/ 边/ ,/ 若/ 存在/ ,/ 则/ 将/ 其/ 映射/ 到/ 距离/ 已/ 映射/ 节点/ 最近/ 的/ 资源/ 节点/ ;/ 否则/ 将/ 其/ 映射/ 到/ 与/ 已/ 映射/ 节点/ 不/ 相邻/ 的/ 资源/ 节点/ ./ 4.2/ 共享/ 射频/ 信道/ 的/ 实时/ 动态分配/ 机制/ 共享/ 射频/ 片上/ 网络/ 的/ 核心/ 是/ 射频/ 通信/ 节点/ 对片/ 上/ 射频/ 信道/ 的/ 全局/ 共享/ ,/ 实现/ 片上/ 射频/ 资源/ 的/ 实时/ 合理/ 分配/ 和/ 高效/ 利用/ ./ 如图/ 5/ 所示/ ,/ 为了/ 描述/ 共享/ 射频/ 信道/ 的/ 媒体/ 访问控制/ 问题/ ,/ 我们/ 用/ 集合/ F/ 表示/ 网络/ 中/ 的/ 共享/ 射频/ 信道/ 对应/ 的/ 频段/ ;/ 集合/ I/ 表示/ 网络/ Page7/ 中/ 射频/ 通信/ 节点/ 对/ 共享/ 射频/ 信道/ 的/ 资源/ 请求/ 信息/ ,/ 包括/ 射频/ 通信/ 节点/ 是否/ 请求/ 共享/ 射频/ 信道/ 的/ 信息/ 以及/ 该/ 节点/ 发送/ 缓存/ 中待/ 传输数据/ 微片/ 的/ 目的/ 节点/ ID/ ;/ 集合/ S/ 描述/ 各/ 射频/ 通信/ 节点/ 当前/ 的/ 射频/ 接收/ 缓存/ 状态/ ;/ 集合/ O/ 描述/ 片上/ 共享/ 射频/ 信道/ 访问控制/ 的/ 仲裁/ 结果/ ,/ 包括/ 射频/ 通信/ 节点/ 在/ 当前/ 仲裁/ 执行/ 周期/ 的/ 射频/ 接收/ 频段/ 及/ 射频/ 发送/ 频段/ ./ 对于/ 1/ 个/ 包含/ k/ 个/ 射频/ 通信/ 节点/ 的/ 片/ 上/ 网络/ ,/ 共享/ 射频/ 信道/ 的/ 媒体/ 访问控制/ 问题/ 可以/ 描述/ 为/ :/ 给定/ 包含/ k/ 个/ 元组/ 的/ 资源/ 请求/ 数据/ 集/ I/ ,/ 在/ 当前/ 网络/ 状态/ S/ 以及/ 约束/ 参数/ c/ 的/ 条件/ 下/ ,/ 通过/ 某种/ 仲裁/ 策略/ Arbitration/ ,/ 得到/ 1/ 个/ 共享/ 射频/ 信道/ 的/ 分配/ 集合/ O/ ,/ 即/ O/ =/ Arbitration/ (/ I/ ,/ S/ ,/ c/ )/ ./ 其中/ :/ Input/ :/ I/ 为/ 包含/ k/ 个/ 元组/ 的/ 二维/ 数据/ 集/ ./ 集合/ 中/ 的/ 任意/ 元组/ r/ ∈/ I/ ,/ 有/ r/ =/ {/ r/ ./ request/ ,/ r/ ./ desti/ }/ ,/ 其中/ r/ ./ request/ ∈/ {/ 0/ ,/ 1/ }/ 描述/ 网络/ 中/ 的/ 通信/ 节点/ p/ 在/ 当前/ 周期/ 是否/ 有/ 共享/ 射频/ 信道/ 的/ 资源/ 请求/ ;/ r/ ./ desti/ ∈/ K/ ∪/ / 描述/ 网络/ 中/ 的/ 通信/ 节点/ p/ 的/ 发送/ 缓存/ 中待/ 传输数据/ 微片/ 的/ 目的/ 节点/ ID/ ./ State/ :/ S/ 为/ 包含/ k/ 个/ 元组/ 的/ 一维/ 数据/ 集/ ./ 集合/ 中/ 的/ 任意/ 元组/ s/ ∈/ S/ ,/ 有/ s/ ∈/ {/ 0/ ,/ 1/ }/ ,/ 描述/ 射频/ 通信/ 节点/ p/ 的/ 射频/ 接收/ 缓存/ 状态/ ;/ c/ 为/ 约束/ 参数/ ,/ 描述/ 当前/ 网络/ 中/ 的/ 共享/ 射频/ 信道/ 的/ 资源/ 总数/ ./ Output/ :/ O/ 为/ 包含/ k/ 个/ 元组/ 的/ 二维/ 数据/ 集/ ./ 集合/ 中/ 的/ 任意/ 元组/ w/ ∈/ O/ ,/ 有/ w/ =/ {/ w/ ./ rx/ ,/ w/ ./ tx/ }/ ,/ 其中/ w/ ./ rx/ 表示/ 射频/ 通信/ 节点/ p/ 在/ 仲裁/ 执行/ 周期/ 的/ 射频/ 接收/ 频段/ ,/ w/ ./ tx/ 的/ 表示/ 射频/ 通信/ 节点/ p/ 在/ 仲裁/ 执行/ 周期/ 的/ 射频/ 发送/ 频段/ 其中/ w/ ./ rx/ ,/ w/ ./ tx/ ∈/ F/ ,/ w/ ./ rx/ ≠/ w/ ./ tx/ ;/ 且/ / i/ ,/ j/ ∈/ O/ ,/ 当/ i/ ≠/ j/ 时/ ,/ i/ ./ tx/ ≠/ j/ ./ tx/ ;/ 本文/ 采用/ 基于/ 流/ 仲裁/ 的/ 共享/ 射频/ 信道/ 动态分配/ 机制/ [/ 9/ ]/ ,/ 将片/ 上/ 射频/ 资源/ 划分/ 为/ 多个/ 共享/ 的/ 通讯/ 信道/ ,/ 包括/ 多个/ 共享/ 数据/ 信道/ (/ datachannels/ )/ 和/ 1/ 个/ 仲裁/ 信道/ (/ arbitrationchannel/ )/ ./ 其中/ ,/ 数据/ 信道/ 用于/ 射频/ 通信/ 节点/ 对/ 之间/ 的/ 数据通信/ ,/ 仲裁/ 信道/ 用于/ 仲裁/ 信息流/ 的/ 传送/ ./ 流/ 仲裁/ 策略/ 为/ 分布式/ 仲裁/ 机制/ ,/ 无/ 中央/ 仲裁/ 器/ ,/ 各/ 射频/ 通信/ 节点/ 将/ 当前/ 周期/ 的/ 资源/ 请求/ 信息/ 及/ 缓存/ 状态/ 信息/ ,/ 通过/ 射频/ 发送器/ 调制/ 到/ 仲裁/ 信息流/ ,/ 然后/ 根据/ 所有/ 射频/ 通信/ 节点/ 的/ 仲裁/ 信息/ 判断/ 是否/ 能够/ 获得/ 共享/ 射频/ 信道/ 以及/ 是否/ 需要/ 接收/ 来自/ 某个/ 频段/ 的/ 数据/ 信息/ ./ 在/ 仲裁/ 周期/ 内/ ,/ 仲裁/ 信息流/ 两次/ 流经/ 所有/ 的/ 射频/ 通信/ 节点/ ,/ trip1/ 实现/ 子/ 仲裁/ 信息流/ 的/ 调制/ ,/ trip2/ 将/ 完整/ 的/ 仲裁/ 信息/ 流传/ 送给/ 各/ 射频/ 通信/ 节点/ ./ 射频/ 通信/ 节点/ 通过/ 仲裁/ 信息流/ 竞争/ 共享/ 数据/ 信道/ 的/ 使用权/ ./ 随着/ 片/ 上规模/ 的/ 扩大/ ,/ 单芯片/ 上/ 集成/ 的/ 处理/ 核心/ 数量/ 将/ 急剧/ 增加/ ,/ 射频/ 使能/ 节点/ 之间/ 的/ 仲裁/ 距离/ 也/ 将/ 增加/ ,/ 导致/ 仲裁/ 信息流/ 无法/ 在/ 单/ 周期/ 内/ 经由/ 所有/ 的/ 射频/ 通信/ 节点/ ./ 另外/ ,/ 由于/ 每个/ 射频/ 使能/ 节点/ 都/ 有/ 可能/ 调制/ 子/ 仲裁/ 信息流/ ,/ 因此/ 单次/ 仲裁/ 所/ 调制/ 的/ 仲裁/ 信息量/ 也/ 将/ 随着/ 节点/ 个数/ 的/ 增加/ 而/ 急剧/ 增加/ ./ 以及/ 流/ 仲裁/ 策略/ 在/ 大规模/ 片上/ 通信/ 中/ 的/ 不足/ ,/ 在/ 大规模/ 片上/ 网络/ 中/ ,/ 本文/ 采用/ 层级/ 流/ 仲裁/ 机制/ (/ HierarchicalStream/ _/ Arbitration/ )/ ./ 为了/ 便于/ 区分/ ,/ 将/ 前文/ 描述/ 的/ 流/ 仲裁/ 策略/ 称为/ “/ 平级/ 流/ 仲裁/ (/ FlatStream/ _/ Arbitra/ -/ tion/ )/ ”/ ./ 层级/ 流/ 仲裁/ 机制/ 采用/ 两级/ 射频/ 传输/ 链路/ :/ 本地/ 射频/ 传输/ 链路/ (/ LocalTransmissionLine/ ,/ L/ -/ TL/ )/ 和/ 全局/ 射频/ 传输/ 链路/ (/ GlobalTransmissionLine/ ,/ G/ -/ TL/ )/ ./ 每个/ 集群/ 共享/ 1/ 个/ 射频/ 使能/ 节点/ ,/ 相邻/ 的/ 多个/ 集群/ 称为/ 群组/ (/ Sets/ )/ ,/ 每个/ 群组/ 共享/ 1/ 条/ 本地/ 射频/ 传输/ 链路/ (/ LocalTransmissionLine/ ,/ L/ -/ TL/ )/ ,/ 用于/ 群组/ 内部/ 的/ 集群/ 间/ 射频/ 通信/ ;/ 全局/ 射频/ 传输/ 链路/ (/ GlobalTransmissionLine/ ,/ G/ -/ TL/ )/ 用于/ 群组/ 间/ 的/ 射频/ 通信/ ./ 各个/ 群组/ 实行/ 独立/ 的/ 平级/ 流/ 仲裁/ 策略/ ,/ 群组/ 间/ 实行/ 层级/ 流/ 仲裁/ 策略/ ./ 图/ 6/ 显示/ 了/ 1/ 个/ 包含/ 4/ 个/ 群组/ 的/ 层级/ 流/ 仲裁/ 结构/ ./ 该/ 结构/ 中/ 每个/ 群组/ 包含/ 16/ 个/ 射频/ 使能/ 路由器/ ./ 每个/ 群组/ 都/ 有/ 独立/ 的/ 卷曲/ 形/ 仲裁/ 信道/ 及/ 规则/ 数据/ 信道/ ./ 4/ 个/ 群组/ 共享/ 全局/ 射频/ 传输/ 链路/ 的/ 卷曲/ 形/ 仲裁/ 信道/ 和/ 数据/ 信道/ ./ 因此/ ,/ 该片/ 上/ 网络/ 将/ 有/ 5/ 条/ 并行/ 仲裁/ 信息流/ ./ 该/ 示例/ 中/ 每/ 16/ 个/ 射频/ 使能/ 节点/ 共享/ 1/ 条/ 本地/ 射频/ 传输/ 链路/ ,/ 4/ 个/ 承接/ 节点/ 共享/ 1/ 条/ 全局/ 射频/ 传输/ 链路/ ,/ 所以/ 每条/ 射频/ 传输/ 链路/ 中/ 的/ 仲裁/ 信息流/ 调制/ 、/ 接收/ 以及/ 数据/ 信息/ 传送/ ,/ 都/ 能够/ 在/ 单个/ 时钟/ 周期/ 内/ 完成/ ./ 假设/ 图中/ 的/ 节点/ A/ 想要/ 发送数据/ 信息/ 给/ 在/ 同一个/ 群组/ 的/ 节点/ B/ ,/ 节点/ A/ 只/ 需要/ 参与/ 本地/ 的/ 平级/ 流/ 仲裁/ ,/ 而/ 每次/ 的/ 仲裁/ 需要/ 3/ 个/ 时钟/ 周期/ ,/ 其中/ 1/ 个/ 时钟/ 周期/ 用于/ 子/ 仲裁/ 信息流/ 调制/ ,/ 1/ 个/ 时钟/ 周期/ 用于/ 仲裁/ 信息流/ 接收/ ,/ 1/ 个/ 时钟/ 周期/ 用于/ 仲裁/ Page8/ 信息/ 解析/ ./ 若/ 节点/ A/ 在/ 仲裁/ 中/ 获胜/ ,/ 将/ 通过/ 所/ 获得/ 的/ 本地/ 数据/ 信道/ 传输数据/ 给/ 节点/ B/ ./ 若/ 节点/ A/ 想要/ 发送数据/ 信息/ 给/ 不/ 在/ 同一个/ 群组/ 的/ 节点/ B/ ,/ 需要/ 首先/ 参与/ 节点/ A/ 所在/ 群组/ 的/ 本地/ 流/ 仲裁/ (/ LocalTL1/ )/ ,/ 然后/ 利用/ 获胜/ 的/ 本地/ 数据/ 信道/ 将/ 数据/ 信息/ 传送/ 给/ 节点/ A/ 所在/ 的/ 群组/ 的/ 承接/ 节点/ RelayNode1/ ./ 数据/ 信息/ 到达/ RelayNode1/ 后/ ,/ 将/ 参加/ 全局/ 流/ 仲裁/ 争用/ 全图/ 6/ 层级/ 流/ 仲裁/ 机制/ 示意图/ 4.3/ 共享/ 射频/ 片上/ 网络/ 中/ 的/ 网络通信/ 路由/ 策略/ 基于/ 共享/ 射频/ 的/ 片/ 上/ 网络/ 中/ ,/ 通信/ 数据/ 从源/ 节点/ 到/ 目的/ 节点/ 的/ 路由/ 传送/ 路径/ routing/ _/ path/ 可能/ 有/ 3/ 种/ 情况/ :/ 一是/ 只/ 经由/ 路由/ 交换/ 单元/ 和/ 电气/ 通信/ 链路/ 实现/ 通信/ 数据/ 的/ 传送/ ,/ 即/ routing/ _/ path/ / {/ NI/ ,/ RS/ ,/ RClink/ }/ ;/ 另/ 一种/ 是/ 只/ 经由/ 路由/ 交换/ 单元/ 、/ 射频/ 节点/ 及/ 共享/ 射频/ 通信/ 链路/ 实现/ 通信/ 数据/ 的/ 传送/ ,/ 即/ routing/ _/ path/ / {/ NI/ ,/ RS/ ,/ RFNode/ ,/ RFlink/ }/ ;/ 还有/ 一种/ 是/ 既/ 包含/ 路由/ 交换/ 单元/ 和/ 电气/ 通信/ 链路/ ,/ 又/ 包含/ 射频/ 节点/ 及/ 共享/ 射频/ 通信/ 链路/ 的/ 数据传输/ 路径/ ,/ 即/ routing/ _/ path/ / {/ NI/ ,/ RS/ ,/ RClink/ ,/ RFNode/ ,/ RFlink/ }/ ./ 集群/ 共享/ 射频/ 片上/ 网络/ 中/ 的/ 通信/ 分为/ 集群/ 内部/ 通信/ 和/ 集群/ 间通信/ ./ 根据/ 网络拓扑/ 结构特征/ ,/ 本文/ 在/ 集群/ 内部/ 通信/ 采用/ XY/ 路由/ 策略/ ,/ 集群/ 间通信/ 采用/ 最短/ 路径/ 路由/ 策略/ ./ 在/ 集群/ 共享/ 射频/ 片上/ 网络/ 中/ 传输/ 的/ 数据/ ,/ 除了/ 携带/ 源/ 节点/ 地址/ 信息/ 和/ 目的/ 节点/ 地址/ 信息/ 之外/ ,/ 还/ 预留/ 射频/ 传送/ 标志/ 位/ 以及/ 目的/ 集群/ ID/ 信息/ 位/ ./ 射频/ 传送/ 标志/ 位/ 用于/ 标识/ 该/ 数据包/ 在/ 路由/ 路径/ 中是/ 局/ 数据/ 信道/ ./ 若/ 在/ 全局/ 流/ 仲裁/ 中/ 获胜/ ,/ 数据/ 信息/ 将/ 通过/ 全局/ 数据/ 信道/ 从/ RelayNode1/ 发送到/ 目的/ 节点/ B/ 所在/ 群组/ 的/ 承接/ 节点/ RelayNode3/ ,/ 数据/ 信息/ 到达/ RelayNode3/ 后/ 将/ 参与/ 目的/ 节点/ B/ 所在/ 群组/ 的/ 流/ 仲裁/ ,/ 并/ 通过/ 获得/ 的/ 本地/ 数据/ 信道/ 传送/ 给/ 目的/ 节点/ B/ ./ 因此/ ,/ 群组/ 间/ 的/ 射频/ 通信/ 需要/ 经过/ 3/ 次流/ 仲裁/ ,/ 完成/ 数据/ 传送/ 至少/ 需要/ 9/ 个/ 时钟/ 周期/ ./ 否/ 选择/ 集群/ 间/ 共享/ 高速/ 射频/ 信道/ ,/ 目的/ 集群/ ID/ 用于/ 描述/ 该/ 数据包/ 目的/ 节点/ 所在/ 的/ 集群/ ID/ 号/ ./ 另外/ ,/ 网络/ 中/ 的/ 每/ 一个/ 路由器/ 都/ 预置/ 集群/ 分布/ 表/ CDT/ (/ ClusterDistributionTable/ )/ ,/ CDT/ 记录/ 了/ 网络/ 中/ 每/ 一个/ 路由器/ 对应/ 的/ 集群/ ID/ 以及/ 每/ 一个/ 集群/ 中/ 射频/ 使能/ 路由器/ 的/ 地址/ 信息/ (/ 每/ 一个/ 集群/ 共享/ 一个/ 射频/ 使能/ 路由器/ )/ ./ 当/ 通信/ 数据/ 进入/ 片上/ 网络/ 时/ ,/ 由源/ 路由器/ 节点/ 的/ 预/ 路由/ 单元/ 判定/ 其/ 是否/ 选择/ 集群/ 间/ 的/ 共享/ 高速/ 射频/ 信道/ ,/ 并/ 将/ 判定/ 信息/ (/ 射频/ 传送/ 标志/ 位/ 以及/ 目的/ 集群/ ID/ )/ 写入/ 头/ 微片/ ./ 共享/ 射频/ 片上/ 网络/ 中/ 的/ 预/ 路由/ 算法/ 伪/ 代码/ 如图/ 7/ 所示/ ,/ 预/ 路由/ 单元/ 首先/ 根据/ 预置/ 的/ CDT/ 表/ 判定/ 数据包/ 的/ 目的/ 节点/ 是否/ 与源/ 节点/ 在/ 同一个/ 集群/ ,/ 如果/ 是/ ,/ 则/ 将/ 头微/ 片中/ 的/ 射频/ 传送/ 标志/ 位写/ 为/ “/ 0/ ”/ ,/ 标记/ 该/ 数据/ 为/ 集群/ 内部/ 通信/ 数据/ ,/ 采用/ XY/ 路由/ 策略/ 进行/ 传输/ ;/ 如果/ 数据包/ 的/ 目的/ 节点/ 和源/ 节点/ 在/ 同一个/ 集群/ ,/ 则/ 计算/ 从源/ 节点/ 到/ 目的/ 节点/ 的/ 路由/ 跳数/ H/ _/ rc/ 和/ H/ _/ rf/ ,/ 如果/ H/ _/ rc/ </ H/ _/ rf/ ,/ 判定/ 该/ 数据包/ 不/ 选择/ 集群/ 间/ 射频/ 传输/ 信道/ ,/ 将/ 射频/ 传送/ 标志/ 位置/ “/ 0/ ”/ ;/ 如果/ H/ _/ rc/ / H/ _/ rf/ ,/ 判定/ 该/ 数据包/ Page9/ 选择/ 集群/ 间/ 射频/ 传输/ 信道/ ,/ 将/ 射频/ 传送/ 标志/ 位置/ “/ 1/ ”/ ,/ 并/ 将/ 该/ 数据/ 目的/ 地址/ 所在/ 的/ 集群/ ID/ 号/ 写入/ 头微/ 片中/ 相应/ 的/ 比特/ 位/ ./ 这里/ H/ _/ rc/ 是/ 指/ 采用/ XY/ 路由/ 策略/ 及/ 电气/ 互联/ 链路/ ,/ 数据包/ 从源/ 节点/ s/ 到/ 目的/ 节点/ d/ 的/ 路由/ 跳数/ ;/ H/ _/ rf/ 是/ 指当/ 传输数据/ 采用/ 集群/ 间/ 共享/ 射频/ 信道/ 进行/ 传送/ 时/ ,/ 从源/ 节点/ s/ 到/ 目的/ 节点/ d/ 的/ 路由/ 跳数/ ,/ 包括/ 从源/ 节点/ s/ 到源/ 节点/ 所在/ 的/ 集群/ 射频/ 使能/ 节点/ RFs/ 的/ 路由/ 跳数/ (/ XY/ 路由/ 策略/ )/ 以及/ 从/ 目的/ 节点/ 所在/ 的/ 集群/ 射频/ 使能/ 节点/ RF/ 到/ 目的/ 节点/ 的/ 路由/ 跳数/ (/ XY/ 路由/ 策略/ )/ 以及/ 射频/ 互连/ 的/ 路由/ 跳数/ ,/ 即/ H/ _/ rf/ =/ H/ _/ (/ s/ →/ RFs/ )/ +/ 1/ +/ H/ _/ (/ RFd/ →/ d/ )/ ./ Club/ _/ SRFNoC/ _/ Prerouting/ (/ Flit/ (/ S/ (/ s/ _/ x/ ,/ s/ _/ y/ )/ ,/ D/ (/ d/ _/ x/ ,/ d/ _/ y/ )/ )/ ,/ CDT/ )/ Input/ :/ (/ 1/ )/ Flit/ (/ S/ (/ s/ _/ x/ ,/ s/ _/ y/ )/ ,/ D/ (/ d/ _/ x/ ,/ d/ _/ y/ )/ )/ ;/ // // TheheadflitenteredNoC/ (/ 2/ )/ CDT/ ;/ // // ClusterDistributionTableOutput/ :/ (/ 1/ )/ RFC/ ;/ // // ThesignfortheRFcommunication/ (/ 2/ )/ Cluster/ _/ ID/ ;/ // // TheClusterIDforRFcommunicationFunction/ :/ (/ 1/ )/ FortheheadflitenteredNoC/ ,/ deceidewhethergothroughRF/ -/ Ibetweenclusters/ ./ (/ 2/ )/ IftheflitwillgothroughRF/ ,/ gettheclusterIDforRFtransmission/ ./ Procedurebody/ :/ {/ var/ :/ Cluster/ _/ IDs/ ,/ Cluster/ _/ Idd/ ,/ Hrc/ ,/ Hrf/ ,/ RFC/ ,/ Cluster/ _/ ID/ ;/ // // CheckwhetherthesourceanddestinationoftheFlitareinthesameclusterCluster/ _/ IDs/ =/ (/ IDT/ ,/ S/ )/ ;/ Cluster/ _/ IDd/ =/ (/ IDT/ ,/ D/ )/ ;/ // // ifthesourceanddestinationoftheFlitareinthesamecluster/ ,/ chooseRCchannelsif/ (/ Cluster/ _/ IDs/ =/ Cluster/ _/ IDd/ )/ RFC/ =/ 0/ ;/ else/ {/ // // ComputetheroutinghopswhentheflitonlychooseRCchannelsHrc/ =/ |/ s/ _/ x/ -/ d/ _/ x/ |/ +/ |/ s/ _/ y/ -/ d/ _/ y/ |/ // // computetheroutinghopswhentheflitchoosesharedRF/ -/ IbetweenclustersHrf/ =/ Hop/ _/ Counts/ (/ Cluster/ _/ IDs/ ,/ S/ )/ +/ 1/ +/ Hop/ _/ Counts/ (/ Cluster/ _/ IDd/ ,/ D/ )/ // // TodecidewhethergothroughRFaccordingthehopcountsif/ (/ Hrc/ </ Hrf/ )/ RFC/ =/ 0/ ;/ else/ {/ RFC/ =/ 1/ ;/ Cluster/ _/ ID/ =/ Cluster/ _/ IDd/ ;/ }/ returnRFC/ ,/ Cluster/ _/ ID/ ;/ }/ 图/ 7/ 集群/ 共享/ 射频/ 片上/ 网络/ 中/ 的/ 预/ 路由/ 算法/ 伪/ 代码/ 集群/ 共享/ 射频/ 片上/ 网络/ 的/ 路由/ 算法/ 伪/ 代码/ 如图/ 8/ 所示/ ,/ 路由/ 计算/ 模块/ 首先/ 检测/ 头微/ 片中/ 的/ 射频/ 传送/ 标志/ 位/ ,/ 若/ 为/ “/ 0/ ”/ ,/ 表明/ 该/ 数据/ 的/ 路由/ 路径/ 不/ 包含/ 共享/ 射频/ 信道/ ,/ 根据/ 微/ 片中/ 携带/ 的/ 目的/ 地址/ ,/ 按照/ XY/ 路由/ 计算/ 算法/ ,/ 指定/ 有效/ 地虚/ 通道/ ./ 若/ 射频/ 传送/ 标志/ 位为/ “/ 1/ ”/ ,/ 表明/ 该/ 数据/ 的/ 路由/ 路径/ 包含/ 射频/ 传输/ 信道/ ,/ 继续/ 判定/ 头微/ 片中/ 目的/ 集群/ ID/ ./ 若/ 目的/ 集群/ ID/ 与/ 当前/ 路由器/ 所在/ 的/ 集群/ ID/ 相同/ ,/ 根据/ 微/ 片中/ 携带/ 的/ 目的/ 地址/ ,/ 按照/ XY/ 路由/ 计算/ 算法/ ,/ 指定/ 有效/ 地虚/ 通道/ ;/ 若/ 目的/ 集群/ ID/ 与/ 当前/ 路由器/ 所在/ 的/ 集群/ ID/ 不同/ ,/ 且/ 当前/ 路由/ 节点/ 为/ 集群/ 的/ 射频/ 使能/ 路由器/ 节点/ ,/ 则/ 指定/ 有效/ 虚/ 通道/ ,/ 将/ 微片/ 从/ 路由器/ 射频/ 输出/ 端口/ 发送/ ./ 若/ 目的/ 集群/ ID/ 与/ 当前/ 路由器/ 所在/ 的/ 集群/ ID/ 不同/ ,/ 且/ 当前/ 路由/ 节点/ 为/ 规则/ 路由器/ 节点/ ,/ 则/ 以/ 当前/ 路由器/ 所在/ 集群/ 的/ 射频/ 使能/ 路由器/ 为/ 目的/ 节点/ ,/ 按照/ XY/ 路由/ 计算/ 算法/ ,/ 指定/ 有效/ 的/ 虚/ 通道/ ./ Club/ _/ SRFNoC/ _/ Routing/ (/ Flit/ (/ S/ ,/ D/ ,/ RFC/ ,/ Cluster/ _/ ID/ )/ ,/ Router/ _/ address/ ,/ IDT/ )/ ;/ Input/ :/ (/ 1/ )/ Flit/ (/ S/ ,/ D/ ,/ RFC/ ,/ Cluster/ _/ ID/ )/ ;/ // // Theinformationofroutingflit/ ,/ includingsourceaddressS/ ,/ destinationaddressD/ ,/ RF/ // // communicationsignRFC/ ,/ andCluster/ _/ IDforRFcommunication/ (/ 2/ )/ Router/ _/ address/ ;/ // // Theaddressofthecurrentrouter/ (/ 3/ )/ CDT/ ;/ // // ClusterDistributionTableOutput/ :/ Port/ (/ Flit/ )/ // // TheoutputportfortheroutingFlitFunction/ :/ FindtheoutputportfortheroutingFlitwhentheflitProcedurebody/ :/ {/ var/ :/ Port/ (/ Flit/ )/ ,/ Cluster/ _/ RF/ ;/ // // ChecktheRFcommunicationsignRFCif/ (/ RFC/ =/ 0/ )/ // // TheroutingFlitonlychooseRCchannelsPort/ (/ Flit/ )/ =/ (/ XY/ _/ routing/ ,/ D/ )/ ;/ // // Findtheoutputportaccordingelse/ {/ if/ (/ Cluster/ _/ ID/ =/ current/ _/ cluster/ _/ ID/ )/ Port/ (/ Flit/ )/ =/ (/ XY/ _/ routing/ ,/ D/ )/ ;/ else/ {/ if/ (/ Router/ _/ address/ =/ addressoftheRFenabledrouterofcurrentcluster/ )/ Port/ (/ Flit/ )/ =/ (/ RF/ _/ output/ )/ ;/ // // sendfromRFportelse/ // // ifcurrentrouterisnotRFnode/ ,/ sendthisflittotheRFnodeofcurrentcluster/ {/ Cluster/ _/ RF/ =/ (/ IDT/ ,/ Router/ _/ address/ )/ ;/ Port/ (/ Flit/ )/ =/ (/ XY/ _/ routing/ ,/ Cluster/ _/ RF/ )/ ;/ }/ }/ }/ returnPort/ (/ Flit/ )/ ;/ }/ 图/ 8/ 集群/ 共享/ 射频/ 片上/ 网络/ 的/ 路由/ 算法/ 伪/ 代码/ 5/ 共享/ 射频/ 片上/ 网络/ 的/ 仿真/ 及/ 评估/ 本文/ 通过/ 拓展/ 的/ SIMICS/ [/ 17/ ]/ 及/ GEMS/ [/ 18/ ]/ 仿真/ 平台/ 来/ 构建/ 基于/ 射频/ 的/ 片/ 上/ 网络/ 仿真/ 环境/ ./ SIMICS/ 是/ 系统/ 级/ 的/ 硬件平台/ 仿真/ 软件/ ,/ 能够/ 仿真/ 整体/ 硬件平台/ ,/ 包括/ 各/ 计算/ 和/ 控制/ 子/ 节点/ 以及/ 节点/ 之间/ 的/ 网络/ 链接/ 等/ ;/ GEMS/ 是/ WINSCONSIN/ 大学/ 提供/ 的/ 一种/ 多核/ 模拟器/ ,/ 能够/ 在/ 全/ 系统/ 的/ 环境/ 下/ 负责/ 解释程序/ 的/ 执行/ ./ 通过/ 拓展/ 的/ SIMIC/ +/ GMES/ 仿真/ 框架/ ,/ 能够/ 实现/ 基于/ 射频/ 的/ 片/ 上/ 网络/ 的/ 周期/ 精准/ 的/ 全/ 系统模拟/ ./ 基于/ 射频/ 的/ 片/ 上/ 网络/ 主要/ 针对/ 高性能/ 计算/ 及/ 未来/ 的/ 大规模/ 片上/ 网络系统/ ./ 在/ 这样/ 的/ 系统/ 中/ ,/ 单一/ 的/ 以/ 成千上百/ 个/ 相同/ 处理器/ 作为/ 系统/ 处理/ 核心/ 的/ 设计/ 方法/ 不/ 能够/ 满足/ 高效能/ 计算/ 的/ 需求/ ./ 为了/ 以/ 更/ 低/ 的/ 功耗/ 开销/ 获得/ 更/ 高/ 的/ 网络/ 吞吐量/ 等/ 性能/ ,/ 主流/ 设计/ 通过/ 增加/ 各种/ 专用/ 加速器/ 模块/ 来/ 达到/ 设计/ 目标/ ./ 因此/ ,/ 本文/ 所/ 仿真/ 的/ 片/ 上/ 网络结构/ 采用/ UCLA/ 大学/ 专用/ 领域/ Page10/ 计算中心/ 研究/ 小组/ 所/ 提出/ 的/ CHARM/ (/ ComposableHeterogeneousAccelerator/ -/ RichMultiprocessor/ )/ 结构/ [/ 19/ ]/ ,/ 在/ 满足/ 未来/ 高性能/ 计算/ 的/ 片/ 上/ 网络结构/ 特征/ 的/ 同时/ ,/ 能够/ 有助于/ 加速/ 仿真/ ./ 5.1/ 实验/ 测试/ 基准/ 及/ 评估/ 参数/ 一方面/ ,/ 随着/ 片上/ 系统/ 规模/ 的/ 增加/ ,/ 片上/ 多处理器/ 系统/ 的/ 仿真/ 难度/ 增加/ ,/ 需要/ 耗费/ 大量/ 的/ 仿真/ 时间/ ./ 另一方面/ ,/ 未来/ 的/ 高性能/ 计算/ 应用/ 呈现/ 出新/ 的/ 通信/ 特征/ ,/ 无法/ 以/ 现有/ 的/ 通信/ 应用/ 作为/ 代表/ ./ 因此/ ,/ 出于/ 仿真/ 速度/ 及/ 实验/ 评估/ 代表性/ 等/ 方面/ 的/ 考虑/ ,/ 本文/ 在/ 小规模/ 片上/ 网络/ 的/ 评估/ 时/ ,/ 主要/ 采用/ 实际/ 的/ 应用/ 通信/ 轨迹/ ,/ 在/ 中/ 大规模/ 片上/ 网络/ 评估/ 时/ ,/ 采用/ 基于/ 概率/ 模拟/ 的/ 合成/ 通信/ 轨迹/ ./ (/ 1/ )/ 实际/ 的/ 应用/ 通信/ 轨迹/ 本文/ 实际/ 的/ 应用/ 通信/ 轨迹/ 包括/ 4/ 个/ 来自/ 医疗/ 领域/ 的/ 应用/ :/ Deblur/ ,/ Denoise/ ,/ EKF/ _/ SLAM/ ,/ Regis/ -/ tration/ 以及/ 1/ 个/ 来自/ PARSEC/ 基准/ 套件/ 的/ 应用/ :/ BlackScholes/ ./ 应用/ 通信/ 轨迹/ 由/ UCLACDSC/ 实验室/ 的/ CHARM/ 研究/ 小组/ 提供/ ,/ 通过/ 在/ Simics/ 中/ 执行/ 实际/ 的/ 应用/ ,/ 提取/ 出/ 应用/ 的/ 通信/ 轨迹/ 信息/ ,/ 包括/ 通讯/ 消息/ 到达/ 的/ 时间/ (/ 进入/ 通信/ 网络/ 的/ 时间/ )/ 、/ 通讯/ 消息/ 的/ 源地址/ 、/ 目的/ 地址/ 以及/ 通讯/ 消息/ 的/ 数据/ 大小/ 等/ ./ 每个/ 通信/ 轨迹/ 作为/ 仿真/ 输入/ ,/ 在/ GEMS/ 仿真/ 平台/ 中/ 执行/ 5000000/ 个/ 时钟/ 周期/ (/ 或是/ 应用/ 执行/ 结束/ )/ ,/ 得到/ 相应/ 的/ 仿真/ 结果/ ./ (/ 2/ )/ 基于/ 概率/ 模拟/ 的/ 合成/ 通信/ 轨迹/ 基于/ 概率/ 模拟/ 的/ 合成/ 通信/ 轨迹/ ,/ 包括/ 均匀/ 通信模型/ uiniform/ ,/ 单向/ 数据流/ 模型/ (/ unidirectionalDataFlow/ ,/ uniDF/ )/ ,/ 双向/ 数据流/ 模型/ (/ bidirectionalDataFlow/ ,/ biDF/ )/ ,/ 带/ 热点/ 的/ 双向/ 数据流/ 模型/ (/ hotdirectionalDataFlow/ ,/ hotbiDF/ )/ 以及/ 热点/ 模型/ (/ 1Hotspot/ ,/ 2Hotspot/ ,/ 4Hotspot/ )/ ./ 基于/ 概率/ 模拟/ 的/ 合成/ 通信/ 轨迹/ 由/ 通信/ 轨迹/ 生成器/ (/ probabilistictracegenerator/ )/ 产生/ ./ 合成/ 通信/ 轨迹/ 中/ 的/ 处理/ 节点/ 包括/ 处理器/ 、/ 二级缓存/ 及/ 外部/ 存储/ 控制器/ ,/ 轨迹/ 生成器/ 根据/ 各/ 类型/ 处理/ 节点/ 的/ 个数/ ,/ 各/ 处理/ 节点/ 的/ 信息/ 注入/ 概率/ ,/ 时钟/ 周期/ 计数/ ,/ 各/ 类型/ 处理/ 节点/ 之间/ 的/ 通信/ 概率/ 以及/ 不同/ 处理/ 节点/ 之间/ 的/ 通信/ 分布/ 概率/ ,/ 生成/ 符合/ 特定/ 通信模型/ 特征/ 的/ 通信/ 轨迹/ ./ 每个/ 测试/ 通信/ 轨迹/ 在/ 仿真/ 平台/ 中/ 执行/ 百万/ 个/ 时钟/ 周期/ ,/ 从而/ 保证/ 测试数据/ 的/ 可靠性/ ./ 本文/ 评估/ 射频/ 片上/ 网络系统/ 的/ 主要参数/ 包括/ :/ 网络延时/ 、/ 网络通信/ 能耗/ 以及/ 射频/ 信道/ 利用率/ ./ 网络/ 传输/ 延迟/ (/ AverageNetworkLatency/ // flit/ )/ 是/ 指/ 通信/ 数据/ 从源/ 节点/ 到/ 目的/ 节点/ 的/ 平均/ 时间/ 开销/ ./ 网络通信/ 能耗/ (/ AverageEnergyConsumption/ // flit/ )/ 是/ 指/ 通信/ 数据/ 从源/ 节点/ 到/ 目的/ 节点/ 的/ 平均/ 能耗/ ./ 射频/ 信道/ 利用率/ 是/ 指/ 特定/ 信道/ 传送/ 的/ 数据/ 微片/ 占/ 所有/ 射频/ 信道/ 传送/ 微片/ 的/ 百分比/ ./ 5.2/ 实验/ 评估/ 5.2/ ./ 1MKHM/ 应用/ 映射/ 算法/ 评估/ 本/ 小节/ 评估/ 了/ 3/ 种/ 面向/ Club/ _/ SRFNoC/ 结构/ 的/ 应用/ 映射/ 算法/ :/ MK/ +/ RA/ 映射/ 算法/ 、/ ILP/ +/ RA/ 映射/ 算法/ 以及/ 本文/ 采用/ 的/ MK/ +/ HM/ 算法/ ./ MK/ +/ RA/ 映射/ 算法/ 是/ 指/ ,/ 采用/ 层级/ 多路/ 划分算法/ 将/ 通信/ 轨迹/ 图/ 划分/ 为/ k/ 个子/ 集群/ ,/ 并/ 将/ 每个/ 子/ 集群/ 随机/ 映射/ 到/ 各子/ 网格/ ;/ ILP/ +/ RA/ 映射/ 算法/ 是/ 指/ ,/ 采用/ 文献/ [/ 20/ ]/ 提出/ 的/ 基于/ 整数/ 线性规划/ 的/ 映射/ 算法/ ,/ 将/ 通信/ 轨迹/ 图中/ 的/ 各/ 处理/ 节点/ 映射/ 到/ 基于/ Mesh/ 的/ 片/ 上/ 网络/ 各子/ 区域/ ,/ 然后/ 再/ 随机/ 选取/ 各子/ 区域/ 中/ 任意/ 一个/ 节点/ 映射/ 为/ 射频/ 通信/ 节点/ ;/ MK/ +/ HM/ 映射/ 算法/ 即/ 本文/ 所/ 采用/ 的/ 方法/ ,/ 采用/ 层级/ 多路/ 划分算法/ 将/ 通信/ 轨迹/ 图/ 划分/ 为/ k/ 个子/ 集群/ ,/ 并/ 采用/ 层级/ 映射/ 的/ 算法/ 实现/ 各子/ 集群/ 内/ 节点/ 的/ 映射/ 及/ 射频/ 通信/ 节点/ 的/ 映射/ ./ 集群/ 共享/ 射频/ 片上/ 网络/ 的/ 应用/ 映射/ 算法/ 的/ 实验/ 评估/ 结果/ 如图/ 9/ (/ a/ )/ 及图/ 9/ (/ b/ )/ 所示/ ,/ 图中以/ MK/ +/ RA/ 映射/ 算法/ 的/ 仿真/ 结果/ 为/ 归一化/ 基准/ ./ 图/ 9/ (/ a/ )/ 给出/ 了/ 3/ 种/ 应用/ 映射/ 算法/ 的/ 归一化/ 平均/ 网络延时/ ,/ 图/ 9/ (/ b/ )/ 给出/ 了/ 3/ 种/ 应用/ 映射/ 算法/ 的/ 归一化/ 网络/ 能耗/ ,/ 图中/ 第/ 1/ 个/ 柱形/ 条/ 表示/ MK/ +/ RA/ 映射/ 算法/ ,/ 第/ 2/ 个/ 柱形/ 条/ 表示/ ILP/ +/ RA/ 映射/ 算法/ ,/ 第/ 3/ 个/ 柱形/ 条/ 表示/ 本文/ 提出/ 的/ MK/ +/ HM/ 算法/ ./ 从图/ 9/ (/ a/ )/ 及图/ 9/ (/ b/ )/ 可以/ 看出/ ,/ 本文/ 所/ 提出/ 的/ MK/ +/ HM/ 算法/ ,/ 与/ MK/ +/ RA/ 映射/ 算法/ 及/ ILP/ +/ RA/ 映射/ 算法/ 相比/ ,/ 分别/ 能够/ 减少/ 8.92/ %/ 和/ 15/ %/ 的/ 平均/ 网络延时/ 以及/ 10/ %/ 和/ 19.2/ %/ 的/ 网络/ 能耗/ ./ MK/ +/ HM/ 映射/ 算法/ 表现/ 优秀/ 的/ 原因/ 很/ 明显/ ,/ 该/ 算法/ 与/ 其他/ 两个/ 算法/ 相比/ ,/ 在/ 最小化/ 集群/ 间/ 通信量/ 的/ 基础/ 上/ ,/ 通过/ 层级/ 映射/ 算法/ 进一步/ 减少/ 集群/ 间/ 及/ 集群/ 内部/ 节点/ 之间/ 的/ 通信/ 路由/ 跳数/ ./ 并且/ MK/ +/ HM/ 映射/ 算法/ 充分考虑/ 和/ 结合/ 了/ 集群/ 共享/ 射频/ 片上/ 网络/ 的/ 拓扑/ 结构/ 特点/ ,/ 将/ 各子/ 集群/ 中外/ 连接/ 度/ 最大/ 的/ 节点/ 映射/ 到/ 各子/ 网格/ 的/ 射频/ 资源/ 节点/ 位置/ ,/ 将/ 各子/ 集群/ 的/ 边界点/ 按照/ 外/ 连接/ 度/ 高低/ 依次/ 映射/ 到子/ 网格/ 的/ 边缘/ 资源/ 节点/ ,/ 或是/ 距离/ 射频/ 通信/ 节点/ 较近/ 的/ 资源/ 节点/ ,/ 这些/ 因素/ 都/ 有助于/ 提高/ 集群/ 间/ 的/ 通信/ 效率/ ./ Page11/ 图/ 9Club/ _/ SRFNoC/ 采用/ 不同/ 应用/ 映射/ 算法/ 时/ 的/ 5.2/ ./ 2Club/ _/ ERFNoC/ 和/ Club/ _/ SRFNoC/ 的/ 评估/ 为了/ 分析/ 和/ 对比/ 独占/ 射频/ 片上/ 网络/ 和/ 共享/ 射频/ 片上/ 网络/ ,/ 本/ 小节/ 评估/ 了/ 集群/ 独占/ 射频/ 片上/ 网络/ Club/ _/ ERFNoC/ 和/ 集群/ 共享/ 射频/ 片上/ 网络/ Club/ _/ SRFNoC/ ,/ 都/ 采用/ 本文/ 所/ 提出/ 的/ 基于/ 集群/ 的/ 设计/ 方法/ ,/ MKHM/ 应用/ 映射/ 算法/ 和/ 基本/ 路由/ 策略/ ./ 两种/ 网络/ 中/ 都/ 包含/ 128/ 个/ 处理/ 节点/ ,/ 底层/ 电气/ 通信子网/ 为/ 二维/ MESH/ 结构/ ,/ 在/ 逻辑/ 上/ 划分/ 为/ 16/ 个子/ 集群/ ,/ 每个/ 子/ 集群/ 共享/ 1/ 个/ 射频/ 通信/ 节点/ ./ 所/ 不同/ 的/ 是/ 集群/ 独占/ 射频/ 片上/ 网络/ 为/ 现有/ 的/ 射频/ 片上/ 网络/ 中/ 射频/ 资源/ 利用率/ 最高/ 的/ 接收/ 独占/ 射频/ 片上/ 网络/ ,/ 即/ 每个/ 子/ 集群/ 独占/ 1/ 条/ 射频/ 通信/ 信道/ ,/ 当/ 其他/ 子/ 集群/ 想要/ 通过/ 射频/ 通信/ 的/ 方式/ 给/ 特定/ 子/ 集群/ 发送数据/ 信息/ 时/ ,/ 通过/ 令牌/ 仲裁/ 获得/ 该/ 接收/ 信道/ 特定/ 执行/ 周期/ 的/ 使用权/ ./ 集群/ 共享/ 射频/ 片上/ 网络/ 中/ ,/ 所有/ 的/ 射频/ 信道/ 为/ 网络/ 中/ 的/ 射频/ 通信/ 节点/ 共享/ ,/ 通过/ 流/ 仲裁/ 机制/ 获得/ 某条/ 信道/ 在/ 特定/ 执行/ 周期/ 的/ 使用权/ ./ 为了/ 能够/ 分析/ 不同/ 射频/ 资源/ 条件/ 下/ ,/ 两种/ 射频/ 通信/ 网络/ 的/ 性能/ 和/ 能耗/ ,/ 实验/ 分别/ 仿真/ 了/ 当片/ 上/ 射频/ 带宽/ 从/ 64Bytes/ // cycle/ 逐渐/ 增加/ 到/ 256Bytes/ // cycle/ 时/ 的/ 网络/ 性能/ ./ 由于/ 集群/ 独占/ 射频/ 片上/ 网络/ 中/ 每/ 一个/ 子/ 集群/ 都/ 需要/ 分配/ 1/ 条/ 独占/ 的/ 射频/ 通信/ 信道/ ,/ 因此/ 其/ 射频/ 信道/ 带宽/ 为/ Brf/ =/ B/ // N/ ,/ 其中/ B/ 为/ 总/ 的/ 射频/ 资源/ 带宽/ ,/ N/ 为子/ 集群/ 个数/ ./ 集群/ 共享/ 射频/ 片上/ 网络/ 中/ ,/ 由于/ 信道/ 都/ 属于/ 全局/ 共享/ ,/ 因此/ 射频/ 信道/ 的/ 通信/ 带宽/ 分配/ 不/ 受/ 信道/ 数量/ 的/ 约束/ ,/ 实验/ 中将/ 共享/ 射频/ 信道/ 数量/ 固定/ 为/ 6/ 条/ (/ 其中/ 1/ 条为/ 仲裁/ 信道/ ,/ 5/ 条为/ 共享/ 数据/ 信道/ )/ ,/ 每条/ 信道/ 带宽/ 随着/ 片上/ 射频/ 带宽/ 资源/ 的/ 增加/ 而/ 增加/ ./ 图/ 10Club/ _/ ERFNoC/ 与/ Club/ _/ SRFNoC/ 的/ 归一化/ 平均/ 由于/ 篇幅/ 的/ 限制/ ,/ 我们/ 在/ 图/ 6/ 中/ 只/ 给出/ 了/ 射频/ 带宽/ 分别/ 为/ 64Bytes/ // cycle/ 、/ 128Bytes/ // cycle/ 和/ 256Bytes/ // cycle/ 时/ 的/ 仿真/ 结果/ ./ 图/ 6/ 显示/ 了/ Club/ _/ ERFNoC/ 与/ Club/ _/ SRFNoC/ 结构/ 对/ 5/ 个/ 通信/ 轨迹/ 的/ 性能/ 和/ 能耗/ 的/ 归一化/ 数值/ ,/ 以/ 二维/ MESH/ 结构/ (/ 即/ 传统/ 的/ 基于/ 电气/ 互连/ 的/ MESH/ 网络/ )/ 为/ 归一化/ 基准/ ,/ 其中/ 柱形/ 条/ 表示/ 平均/ 网络延时/ ,/ 菱形/ 标识/ 表示/ 网络/ 的/ 平均/ 能耗/ ./ 从/ 仿真/ 结果/ 可知/ ,/ Club/ _/ SRFNoC/ 网络/ 能够/ 以/ 很少/ 的/ 片/ 上/ 射频/ 资源/ 开销/ 获得/ 较/ 好/ 的/ 片/ 上/ 网络/ 性能/ ./ 如图/ 10/ 所示/ ,/ 当片/ 上/ 射频/ 资源/ 为/ 256Bytes/ // cycle/ 时/ ,/ Club/ _/ SRFNoC/ 和/ Club/ _/ ERFNoC/ 都/ 能够/ 减少/ 70/ %/ 左右/ 的/ 平均/ 网络延时/ (/ 以/ Mesh/ 为/ 比较/ 基准/ )/ ,/ 但是/ ,/ Club/ _/ SRFNoC/ 片上/ 网络/ 能够/ 以/ 很少/ 的/ 片/ 上/ 射频/ 资源/ 开销/ 获得/ 更好/ 的/ 网络通信/ 性能/ ,/ Club/ _/ SRFNoC/ 只/ 需要/ 98/ ~/ 176Bytes/ // cycle/ 的/ 片/ 上/ 资源/ 便/ 可/ 达到/ Club/ _/ ERFNoC/ 片上/ 网络/ 在/ 资源/ 为/ 224/ ~/ 256Bytes/ // cycle/ 的/ 网络/ 性能/ ./ 在/ 本文/ 仿真/ 的/ 5/ 个/ 应用/ 中/ ,/ 随着/ 片上/ 射频/ 资源/ 的/ 增加/ ,/ 共享/ 射频/ 信道/ 数量/ 的/ 增加/ 所/ 带来/ 的/ 性能/ 增益/ 不断/ 减少/ ,/ 表明/ 在/ 任何/ 给定/ 时刻/ ,/ 片上/ 网络/ 中/ 的/ 部分/ 射频/ 通信/ 节点/ 负责/ 网络/ 中/ 绝大多数/ 的/ 数据通信/ ./ 对于/ 所/ 仿真/ 的/ 5/ 个/ 应用/ ,/ Club/ _/ SRFNoC/ 片上/ 网络/ ,/ 只/ 需要/ 约/ 112Bytes/ // cycle/ 的/ 片/ 上/ 射频/ 资源/ 就/ 能够/ 满足/ 片上/ 网络/ 的/ 通信/ 需求/ ,/ 而/ 基于/ Club/ _/ SRFNoC/ 的/ 片/ 上/ 网络/ 需要/ 2/ 倍/ 的/ 片/ 上/ 资源/ (/ 240Bytes/ // cycle/ )/ 才能/ 达到/ 相同/ 的/ 通信/ 性能/ ./ 在/ 特定/ 的/ 设计/ 节点/ (/ 相同/ 的/ 片/ 上/ 射频/ 资源/ 时/ )/ ,/ 射频/ 片上/ 网络/ 的/ 能耗/ 差异/ 与/ 性能/ 差异/ 具有/ 一定/ 的/ 关联性/ ./ 当片/ 上/ 射频/ 资源/ 有限/ 时/ ,/ 由于/ Club/ _/ SRFNoC/ 片/ Page12/ 上/ 网络/ 中/ 共享/ 射频/ 信道/ 的/ 高带宽/ ,/ 与/ Club/ _/ ERFNoC/ 网络/ 相比/ 享有/ 更/ 高/ 的/ 仲裁/ 成功率/ ,/ 因此/ 只/ 需要/ 占用/ 射频/ 信道/ 很少/ 的/ 仲裁/ 执行/ 周期/ 就/ 能够/ 实现/ 完整/ 数据/ 的/ 传送/ ,/ 所以/ 消耗/ 更少/ 的/ 平均/ 网络通信/ 能耗/ ./ 当片/ 上/ 射频/ 资源/ 充裕/ 时/ ,/ 基于/ Club/ _/ SRFNoC/ 及/ Club/ _/ ERFNoC/ 有着/ 基本/ 相等/ 的/ 仲裁/ 成功率/ ,/ 能耗/ 相差/ 不大/ ./ 图/ 11/ 显示/ 了/ 当片/ 上/ 射频/ 资源/ 为/ 128Bytes/ // cycle/ 时/ ,/ 集群/ 独占/ 射频/ 片上/ 网络/ 及/ 集群/ 共享/ 射频/ 片上/ 网络/ 的/ 射频/ 信道/ 利用率/ (/ 图中/ 横坐标/ 为/ 射频/ 信道/ 的/ 编号/ ,/ 纵坐标/ 为/ 各/ 应用/ 通信/ 轨迹/ 中/ 特定/ 信道/ 传送/ 的/ 数据/ 微片/ 占/ 所有/ 射频/ 信道/ 传送/ 微片/ 的/ 百分比/ )/ ./ 从图/ 中图/ 11Club/ _/ ERFNoC/ 及/ Club/ _/ SRFNoC/ 的/ 射频/ 信道/ 利用率/ 可以/ 看出/ ,/ 独占/ 射频/ 片上/ 网络/ 中/ 独占/ 射频/ 信道/ 的/ 利用率/ 最高/ 为/ 14/ %/ ,/ 最低/ 的/ 利用率/ 为/ 3/ %/ ,/ 也就是说/ 在/ 应用/ 执行/ 周期/ ,/ 有/ 的/ 独占/ 射频/ 信道/ 完全/ 处于/ 空闲/ 状态/ ./ 共享/ 射频/ 片上/ 网络/ 中/ 射频/ 信道/ 的/ 利用率/ 最高/ 为/ 41/ %/ ,/ 最低/ 的/ 利用率/ 为/ 9/ %/ ,/ 共享/ 射频/ 信道/ 1/ 到/ 射频/ 信道/ 5/ 的/ 平均/ 利用率/ 分别/ 为/ 35/ %/ ,/ 24/ %/ ,/ 18/ %/ ,/ 14/ %/ 以及/ 8/ %/ ,/ 这/ 表明/ 随着/ 共享/ 射频/ 信道/ 数量/ 的/ 增加/ ,/ 信道/ 的/ 利用率/ 逐渐/ 降低/ ,/ 当/ 射频/ 信道/ 数量/ 大于/ 一定/ 的/ 数值/ 后/ ,/ 增加/ 的/ 射频/ 信道/ 利用率/ 非常低/ ,/ 从而/ 造成/ 片上/ 射频/ 资源/ 的/ 浪费/ ./ 虽然/ 共享/ 射频/ 片上/ 网络/ SRFNoC/ 能够/ 通过/ 提高/ 信道/ 利用率/ 大幅/ 提升/ 网络通信/ 效率/ ,/ 但是/ 面临/ 着/ 扩展性/ 的/ 问题/ ./ 在/ 性能/ 方面/ ,/ 随着/ 片上/ 网络/ 中/ 射频/ 使能/ 节点/ 个数/ 的/ 增加/ ,/ 射频/ 传输/ 链路/ 的/ 距离/ 也/ 将/ 加长/ ,/ 仲裁/ 信息流/ 无法/ 在/ 单/ 周期/ 内/ 经由/ 所有/ 的/ 射频/ 通信/ 节点/ ,/ 仲裁/ 流从/ 网络/ 中/ 第/ 1/ 个/ 射频/ 使能/ 节点/ 到/ 最后/ 1/ 个/ 射频/ 使能/ 节点/ 的/ 传输/ 延时/ 增加/ 到/ P/ 个/ 时钟/ 周期/ (/ P/ >/ 1/ )/ ./ 随着/ P/ 的/ 增加/ ,/ 网络/ 数据/ 成功/ 争用/ 1/ 条/ 射频/ 数据/ 信道/ 的/ 时间/ 开销/ 将/ 大幅/ 增加/ ,/ 影响/ 到/ 系统/ 的/ 平均/ 网络延时/ ./ 在/ 功耗/ 方面/ ,/ 随着/ 片上/ 网络/ 中/ 射频/ 使能/ 节点/ 个数/ 的/ 增加/ ,/ 单次/ 仲裁/ 所/ 调制/ 的/ 仲裁/ 信息量/ 增加/ ,/ 调制/ // 解调/ 仲裁/ 流所/ 需/ 的/ 功耗/ 开销/ 也/ 将/ 随之/ 增加/ ./ 若/ N/ 值/ (/ 其中/ N/ 为/ 射频/ 使能/ 节点/ 的/ 个数/ )/ 相对/ 较/ 小时/ ,/ 仲裁/ 信道/ 的/ 功耗/ 开销/ 与/ 数据/ 信道/ 传输/ 射频/ 信息/ 的/ 功耗/ 开销/ 相比/ ,/ 基本/ 可以/ 忽略不计/ ./ 但是/ 随着/ N/ 值/ 的/ 大幅/ 增加/ ,/ 仲裁/ 的/ 功耗/ 开销/ 在/ 系统/ 功耗/ 中/ 的/ 比值/ 增加/ ,/ 能够/ 在/ 一定/ 程度/ 上/ 影响/ 到/ 系统/ 的/ 总开销/ ,/ 成为/ 影响/ 系统/ 低功耗/ 设计/ 的/ 因素/ 之一/ ./ 因此/ ,/ 如果/ 在/ 大规模/ 片上/ 网络/ 中/ (/ 片上/ 集成/ 的/ 处理/ 核心/ 为/ 数百/ 上/ 千个/ )/ ,/ 若/ SRFNoC/ 仍然/ 采用/ 前/ 文/ 所述/ 的/ 流/ 仲裁/ 策略/ ,/ 将/ 面临/ 着/ 严重/ 的/ 仲裁/ 开销/ 问题/ ./ 针对/ 该/ 问题/ ,/ 本文/ 提出/ 了/ 基于/ 层级/ 流/ 仲裁/ 策略/ 的/ Club/ _/ SRFNoC/ 的/ 可扩展性/ 设计/ ./ 5.2/ ./ 3Club/ _/ SRFNoC/ 的/ 可扩展性/ 设计/ 本文/ 针对/ 中/ 大规模/ 片上/ 网络/ ,/ 采用/ 基于/ 层级/ 流/ 仲裁/ 策略/ 的/ 共享/ 射频/ 片上/ 网络结构/ ./ 为了/ 评估/ 集群/ 共享/ 射频/ 片上/ 网络/ 的/ 可扩展性/ ,/ 本/ 小节/ 仿真/ 了/ 3/ 个/ 中/ 大规模/ 的/ 片/ 上/ 网络/ ,/ 网络/ 中/ 的/ 路由器/ 节点/ 及/ 处理/ 节点/ 规模/ 分别/ 为/ 16/ ×/ 16/ ,/ 24/ ×/ 24/ 及/ 32/ ×/ 32/ ./ 本/ 小节/ 仿真/ 两种/ 共享/ 射频/ 片上/ 网络结构/ ,/ 一种/ 是/ 基于/ 层级/ 流/ 仲裁/ 策略/ 的/ 共享/ 射频/ 片上/ 网络结构/ (/ HierarchicalStream/ _/ Arbitration/ 简称/ “/ HStream/ ”/ )/ ,/ 另/ 一种/ 是/ 基于/ 平级/ 流/ 仲裁/ 策略/ 的/ 共享/ 射频/ 片上/ 网络结构/ (/ FlatStream/ _/ Arbitration/ 简称/ “/ FStream/ ”/ )/ ./ Page13/ 当/ 仿真/ 的/ 片/ 上/ 网络/ 规模/ 增加/ 到/ 成百上千/ 时/ ,/ 需要/ 数周/ 甚至/ 数月/ 的/ 时间/ ,/ 才能/ 完成/ 针对实际/ 应用/ 的/ 全/ 系统/ 仿真/ ,/ 这/ 使得/ 仿真/ 的/ 分析/ 及/ 评估/ 变得/ 极为/ 困难/ ./ 因此/ 本/ 节/ 利用/ 基于/ 概率/ 模拟/ 的/ 合成/ 通信/ 轨迹/ 作为/ 实验/ 测试/ 基准/ ./ 为了/ 模拟/ 大规模/ 片上/ 网络系统/ 通信/ 的/ “/ 局部性/ ”/ 特征/ ,/ 本文/ 基于/ 概率/ 模拟/ 的/ 合成/ 通信/ 轨迹/ 中有/ 约/ 60/ %/ 的/ 通信/ 为/ 群组/ 内/ 通信/ ,/ 剩余/ 40/ %/ 的/ 通信/ 根据/ 通信/ 轨迹/ 特征/ 的/ 不同/ 基于/ 概率/ 合成/ ,/ 各/ 通信/ 轨迹/ 的/ 通信/ 特征/ 详见/ 本文/ 5.1/ 节/ ./ 层级/ 共享/ 射频/ 片上/ 网络/ 中/ ,/ 我们/ 为/ 每个/ 群组/ 及/ 全局/ 射频/ 通信/ 各自/ 分配/ 2/ 条/ 带宽/ 为/ 16Bytes/ 的/ 共享/ 射频/ 数据/ 信道/ ./ 为了/ 评估/ 的/ 公平性/ ,/ 为/ 平级/ 共享/ 射频/ 片上/ 网络/ 中/ 分配/ 的/ 射频/ 信道/ 数量/ 及/ 总/ 带宽/ 等于/ 层级/ 结构/ 中/ 所有/ 射频/ 信道/ 数量/ 及/ 带宽/ 的/ 总和/ (/ 带宽/ 仍然/ 为/ 16Bytes/ // cycle/ )/ ./ 层级/ 共享/ 射频/ 片上/ 网络/ (/ 图以/ “/ HStream/ ”/ 描述/ 层级/ 共享/ 射频/ 片上/ 网络/ ,/ 以/ “/ FStream/ ”/ 描述/ 平级/ 共享/ 射频/ 片上/ 网络/ )/ 结构/ 的/ 归一化/ 平均/ 网络延时/ 如图/ 12/ 所示/ ,/ 图中/ 显示/ 结果/ 以/ 32/ ×/ 32/ 的/ 平级/ 共享/ 射频/ 片上/ 网络/ 的/ 仿真/ 结果/ 为/ 归一化/ 基准线/ ./ 从图/ 中/ 可以/ 看出/ ,/ 在/ 中/ 大规模/ 片上/ 网络/ 中/ ,/ 层级/ 共享/ 射频/ 片上/ 网络/ 与/ 平级/ 共享/ 射频/ 片上/ 网络/ 相比/ ,/ 能够/ 减少/ 约/ 40/ %/ (/ 40/ %/ 为/ 平均值/ ,/ 范围/ 为/ 28/ %/ ~/ 55/ %/ )/ 的/ 平均/ 网络延时/ ./ 实际上/ ,/ 所/ 仿真/ 的/ 5/ 个/ 通信/ 轨道/ ,/ 其片/ 上/ 射频/ 资源/ 仲裁/ 及/ 数据传输/ 所/ 带来/ 的/ 延时/ 开销/ 几乎/ 相同/ (/ 因为/ 5/ 个/ 应用/ 的/ 本地/ 通信/ 概率/ 相同/ )/ ,/ 层级/ 共享/ 射频/ 片上/ 网络/ 和平/ 级/ 共享/ 射频/ 片上/ 网络/ 的/ 平均/ 网络延时/ 的/ 差异/ 主要/ 来源于/ 层级/ 共享/ 射频/ 片上/ 网络/ 及/ 平级/ 共享/ 射频/ 片上/ 网络/ 的/ 仲裁/ 成功率/ ./ 随着/ 片上/ 网络/ 规模/ 的/ 增加/ ,/ 层级/ 共享/ 射频/ 片上/ 网络/ 的/ 群组/ 间/ 通信量/ 保持/ 不变/ ,/ 增加/ 的/ 片/ 上/ 网络通信/ 分散/ 在/ 各个/ 群组/ ,/ 且/ 集中/ 在/ 本地/ 群组/ 内部/ ,/ 不会/ 导致/ 全局/ 通信量/ 的/ 剧增/ ./ 图/ 12/ 采用/ 层级/ 流/ 仲裁/ 的/ 共享/ 射频/ 片上/ 网络/ 的/ 平均/ 网络延时/ 另外/ ,/ 虽然/ 层级/ 共享/ 射频/ 网络/ 中/ 增加/ 了/ 承接/ 节点/ 的/ 缓存/ 延时/ ,/ 但是/ 实验/ 表明/ ,/ 大多数/ 群组/ 间/ 的/ 通信/ 信息/ 都/ 能够/ 在/ 到达/ 承接/ 节点/ 的/ 第/ 2/ 个/ 时钟/ 周期/ ,/ 获得/ 全局/ 共享/ 数据/ 信道/ ./ 而/ 平级/ 共享/ 射频/ 片上/ 网络/ 中/ ,/ 射频/ 信道/ 数量/ 的/ 增加/ 并/ 没有/ 缓解/ 通信/ 节点/ 之间/ 的/ 资源/ 竞争/ ,/ 即便/ 是/ 近距离/ 集群/ 之间/ 的/ 通信/ ,/ 也/ 需要/ 与/ 网络/ 中/ 所有/ 的/ 射频/ 通信/ 节点/ 竞争/ 共享/ 射频/ 信道/ ,/ 仲裁/ 信道/ 中/ 的/ 仲裁/ 信息流/ 数据量/ 庞大/ ,/ 仲裁/ 信道/ 及/ 所有/ 的/ 共享/ 数据/ 信道/ 都/ 需要/ 贯穿/ 整个/ 芯片/ 且/ 连接/ 所有/ 射频/ 节点/ ,/ 这些/ 都/ 增加/ 了/ 平级/ 共享/ 射频/ 片上/ 网络/ 的/ 通信/ 延时/ ./ 因此/ ,/ 在/ 中/ 大规模/ 片上/ 网络/ 中/ ,/ 层级/ 共享/ 射频/ 片上/ 网络/ 的/ 平均/ 网络延时/ 要/ 低于/ 平级/ 共享/ 射频/ 片上/ 网络/ ./ 层级/ 共享/ 射频/ 片上/ 网络/ (/ 以/ “/ HStream/ ”/ 描述/ 层级/ 共享/ 射频/ 片上/ 网络/ ,/ 以/ “/ FStream/ ”/ 描述/ 平级/ 共享/ 射频/ 片上/ 网络/ )/ 结构/ 的/ 归一化/ 网络/ 功耗/ 如图/ 13/ 所示/ ,/ 图中/ 显示/ 结果/ 以/ 32/ ×/ 32/ 的/ 平级/ 共享/ 射频/ 片上/ 网络/ 的/ 仿真/ 结果/ 为/ 归一化/ 基准线/ ./ 图中/ 每个/ 柱形/ 条/ 的/ 两种/ 颜色/ 分别/ 显示/ 了/ 片/ 上/ 网络/ 的/ 仲裁/ 功耗/ 及/ 数据传输/ 功耗/ ./ 其中/ 数据传输/ 的/ 功耗/ 中/ 包括/ 了/ 网络接口/ 及/ 射频/ 节点/ 的/ 功耗/ ./ 层级/ 射频/ 片上/ 网络/ 中/ 由于/ 层级/ 的/ 划分/ ,/ 仲裁/ 所/ 需/ 传输/ 的/ 信息流/ 大幅/ 减少/ ,/ 从而/ 减少/ 了/ 仲裁/ 信息流/ 的/ 数据传输/ 能耗/ ./ 如图/ 13/ 所示/ ,/ 层级/ 射频/ 片上/ 网络/ 的/ 仲裁/ 功耗/ 与/ 平级/ 射频/ 片上/ 网络/ 相比/ ,/ 减少/ 了/ 40/ %/ ~/ 60/ %/ ,/ 并且/ 片上/ 网络/ 规模/ 越大/ ,/ 仲裁/ 开销/ 对/ 总/ 的/ 网络/ 功耗/ 的/ 影响/ 就/ 越/ 突出/ ./ 由于/ 在/ 层级/ 射频/ 片上/ 网络/ 中/ ,/ 不同/ 群组/ 之间/ 的/ 全局/ 通信/ 信息/ 需要/ 进行/ 两次/ 调制/ // 解调/ 及/ 暂存/ ,/ 在/ 一定/ 程度/ 上/ 增加/ 了/ 数据传输/ 功耗/ ./ 但是/ 与/ 群组/ 内/ 的/ 通信量/ 相比/ ,/ 大规模/ 片上/ 网络/ 中/ 的/ 全局/ 通信量/ 不高/ ,/ 因此/ 层级/ 射频/ 片上/ 网络/ 的/ 仲裁/ 功耗/ 与/ 平级/ 射频/ 片上/ 网络/ 相比/ ,/ 只/ 增加/ 了/ 3/ %/ ~/ 16/ %/ 的/ 数据传输/ 功耗/ ./ 层级/ 射频/ 片上/ 网络/ Page14/ 图/ 13/ 采用/ 层级/ 流/ 仲裁/ 的/ 共享/ 射频/ 片上/ 网络/ 的/ 功耗/ 中/ 增加/ 的/ 传输/ 功耗/ 对片/ 上/ 网络/ 的/ 整体/ 功耗/ 的/ 影响/ 并/ 不/ 十分/ 明显/ ,/ 从/ 仿真/ 结果/ 可以/ 看出/ ,/ 层级/ 共享/ 射频/ 片上/ 网络/ 与/ 平级/ 共享/ 射频/ 片上/ 网络/ 相比/ ,/ 总/ 的/ 网络/ 功耗/ 平均/ 增加/ 6/ %/ (/ 平均值/ )/ ./ 6/ 小结/ 本文/ 针对/ 现有/ 的/ 射频/ 片上/ 网络/ 中/ 存在/ 的/ 资源/ 利用率/ 较/ 低/ 、/ 无法/ 满足/ 实时/ 通信/ 需求/ 等/ 问题/ ,/ 首次/ 提出/ 了/ 基于/ 共享/ 射频/ 互连/ 的/ 片/ 上/ 网络/ SRFNoC/ ,/ 并/ 对/ 其/ 网络体系结构/ 进行/ 了/ 清晰/ 的/ 刻画/ ./ 在/ 此基础/ 上/ 提出/ 了/ 集群/ 共享/ 射频/ 片上/ 网络/ Club/ _/ SRFNoC/ 结构/ ,/ 采用/ MKHM/ 算法/ 实现/ 最优化/ 的/ 应用/ 映射/ ,/ 利用/ 流/ 仲裁/ 机制/ 实现/ 共享/ 射频/ 信道/ 的/ 轻量级/ 分布式/ 高效/ 仲裁/ ,/ 集合/ XY/ 路由/ 策略/ 和/ 最/ 短/ 路径/ 路由/ 策略/ 实现/ 通信/ 资源/ 的/ 实时/ 优化/ 分配/ ./ 通过/ 周期/ 精准/ 的/ 仿真/ 及/ 验证/ ,/ Club/ _/ SRFNoC/ 片上/ 网络/ 能够/ 以/ 43/ %/ (/ 平均值/ )/ 的/ 片/ 上/ 射频/ 资源/ ,/ 实现/ Club/ _/ ERFNoC/ 片上/ 网络/ 相同/ (/ 100/ %/ )/ 的/ 网络/ 性能/ ./ Club/ _/ SRFNoC/ 能够/ 通过/ 实时/ 动态分配/ 射频/ 通信/ 资源/ ,/ 满足/ 不同/ 应用/ 实时/ 通信/ 需求/ 的/ 同时/ ,/ 大幅/ 提升/ 信道/ 带宽/ 利用率/ ,/ 从而/ 提升/ 网络/ 整体/ 性能/ ./ 本文/ 假定/ 片上/ 射频/ 通信/ 节点/ 只/ 配置/ 1/ 个/ 可/ 调频/ 片上/ 收发器/ ,/ 这/ 在/ 一定/ 程度/ 上/ 限制/ 了/ 共享/ 射频/ 片上/ 网络/ 对/ 通信/ 特征/ 非均衡/ 应用/ 的/ 性能/ 提升/ ./ 若/ 改进/ 片上/ 发送器/ // 接收器/ ,/ 支持/ 多/ 频段/ 的/ 数据/ 收发/ ,/ 将/ 有/ 可能/ 进一步/ 提升/ 共享/ 射频/ 资源/ 的/ 利用率/ ./ 另外/ ,/ 当片/ 上/ 射频/ 资源/ 一定/ 时/ ,/ 共享/ 射频/ 信道/ 的/ 数量/ 和/ 共享/ 射频/ 信道/ 的/ 带宽/ 之间/ 存在/ 最优/ 的/ 折中/ 策略/ ./ 不同/ 的/ 应用/ 对/ 共享/ 射频/ 信道/ 的/ “/ 多/ 、/ 窄/ ”/ ,/ “/ 少/ 、/ 宽/ ”/ 特性/ 表现/ 出/ 不同/ 的/ 片/ 上/ 网络/ 性能/ ./ 对于/ 特定/ 的/ 应用/ ,/ 如何/ 优化/ 设计/ 片上/ 收发/ 单元/ ,/ 如何/ 分配/ 共享/ 射频/ 信道/ 带宽/ 等/ 问题/ ,/ 将/ 是/ 本文/ 下/ 一步/ 研究/ 工作/ 重点/ ./ 

