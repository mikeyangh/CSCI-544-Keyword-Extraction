Page1/ 延迟/ 敏感/ 的/ 移动/ 多媒体/ 会议/ 端到/ 端/ 服务质量/ 保障/ 吴冀衍/ 乔秀/ 全程/ 渤/ 陈俊亮/ 孙运雷/ (/ 北京邮电大学/ 网络/ 与/ 交换/ 技术/ 国家/ 重点/ 实验室/ 北京/ 100876/ )/ 摘要/ 随着/ 异构/ 无线网/ 与/ 智能/ 移动/ 终端/ 的/ 快速/ 发展/ ,/ 移动/ 多媒体/ 会议/ 逐渐/ 成为/ 重要/ 的/ 网络应用/ ./ 然而/ ,/ 在/ 不/ 可靠/ 、/ 多变/ 的/ 无线网络/ 环境/ 下/ ,/ 因/ 传输/ 单向/ 延迟/ 过长/ 所/ 造成/ 的/ 多媒体/ 视频/ 丢/ 帧/ 、/ 跳帧/ 、/ 断续/ 等/ 现象/ 严重/ 影响/ 会议/ 的/ 服务质量/ 和/ 用户/ 体验/ ./ 文中/ 提出/ 一种/ 应用层/ 端到/ 端/ 服务质量/ 保障/ 方法/ ./ 该/ 方法/ 将/ 数据包/ 分段/ 重组/ 与/ 异构/ 无线网/ 路径/ 分/ 集/ 传输/ 相结合/ ,/ 在/ 考虑/ 带宽/ 、/ 延迟/ 、/ 权重/ 以及/ 长度/ 等/ 多种/ 参数/ 情况/ 下/ 对/ 视频/ 数据包/ 分段/ 并/ 发送/ ,/ 各/ 分段/ 经/ 路径/ 分/ 集/ 传输/ 到达/ 客户端/ 、/ 通过/ 有效性/ 检验/ 后/ 进行/ 重组/ ./ 文中/ 为/ 实现/ 该/ 方法/ ,/ 设计/ 了/ 一种/ 服务器/ -/ 客户端/ 形式/ 多路径/ 数据包/ 调度/ 算法/ ,/ 构建/ 端到/ 端/ 虚通路/ 保障/ 视频流/ 的/ 快速/ 传输/ ./ 实验/ 数据/ 表明/ ,/ 此/ 方法/ 能够/ 有效/ 地/ 整合/ 异构/ 无线网/ 带宽/ ,/ 减少/ 传输/ 单向/ 延迟/ ./ 关键词/ 移动/ 多媒体/ 会议/ ;/ 延迟/ 敏感/ ;/ 服务质量/ ;/ 数据包/ 分段/ 重组/ ;/ 异构/ 无线网/ ;/ 移动/ 互联网/ 1/ 引言/ 移动/ 多媒体/ 会议/ (/ mobilemultimediaconferen/ -/ cing/ )/ 是/ 指/ 在/ 异构/ 、/ 无线/ 的/ 网络/ 环境/ 下/ ,/ 用户/ 可以/ 通过/ 各种/ 智能/ 移动/ 终端/ (/ 例如/ 笔记本电脑/ 、/ 智能手机/ 、/ 平板/ 电脑/ 等/ )/ 接入/ 会议/ 系统/ ,/ 进行/ 全面/ 的/ 信息/ 交互/ ./ 这些/ 信息/ 呈现/ 实时/ 的/ 音频/ 、/ 视频/ 、/ 文字/ 、/ 图片/ 等/ 同步/ 或/ 异步/ 的/ 多媒体/ 数据/ ./ 典型/ 应用/ 主要/ 有/ 视频会议/ 、/ 远程/ 学习/ 、/ 多人/ 在线/ 游戏/ 等/ [/ 1/ -/ 2/ ]/ ./ 相对/ 于/ 传统/ 的/ 多媒体/ 会议/ 系统/ ,/ 其/ 优点/ 如下/ :/ (/ 1/ )/ 移动性/ ./ 解决/ 了/ 传统/ 的/ 多媒体/ 会议/ 系统/ 终端/ 缺乏/ 移动性/ 支持/ ,/ 限制/ 用户/ 只能/ 在/ 有线/ 、/ 固定/ 的/ 网络/ 环境/ 下/ 开展/ 会议/ 的/ 问题/ ;/ (/ 2/ )/ 经济性/ ./ 移动/ 多媒体/ 会议/ 无需/ 使用/ 专用/ 的/ 硬件/ 设备/ 和/ 通信/ 网络/ ,/ 这/ 在/ 很大/ 程度/ 上/ 降低/ 了/ 用户/ 的/ 使用/ 成本/ ,/ 使得/ 移动/ 多媒体/ 会议/ 的/ 普及/ 成为/ 可能/ ;/ (/ 3/ )/ 兼容性/ ./ 能够/ 支持/ 多种类型/ 的/ 无线网络/ 、/ 智图/ 1/ 异构/ 无线网/ 环境/ 下/ 移动/ 多媒体/ 会议/ 应用/ 场景/ 然而/ ,/ 在/ 不/ 可靠/ 、/ 多变/ 的/ 无线网络/ 环境/ 下/ 保障/ 多媒体/ 会议/ 的/ 服务质量/ 面临/ 着/ 严峻/ 挑战/ ,/ 主要/ 如下/ :/ (/ 1/ )/ 带宽/ 限制/ ./ 尽管/ 近年来/ 带宽/ 限制/ 问题/ 在/ 一定/ 程度/ 上/ 得到/ 了/ 缓解/ ,/ 但/ 在/ 实际/ 应用/ 中/ ,/ 用户/ 的/ 可用/ 带宽/ 仍/ 十分/ 有限/ ,/ 与/ 网络/ 的/ 峰值/ 速率/ 相差/ 甚远/ ./ 根据/ 文献/ [/ 3/ -/ 4/ ]/ ,/ 本文/ 在/ 表/ 1/ 中/ 列出/ 几种/ 典型/ 的/ 无线网/ 可能/ 移动/ 终端/ 、/ 操作系统/ 以及/ 网络协议/ 等/ 相关/ 的/ 软硬件/ ./ 随着/ 异构/ 无线网/ 与/ 智能/ 移动/ 终端/ 的/ 快速/ 发展/ ,/ 移动/ 多媒体/ 会议/ 逐渐/ 成为/ 新/ 的/ 发展趋势/ 和/ 研究/ 热点/ ./ 异构/ 无线网/ [/ 3/ -/ 4/ ]/ (/ heterogeneouswirelessnetworks/ )/ 是/ 带宽/ 、/ 信号/ 范围/ 、/ 网络协议/ 、/ 应用/ 场景/ 等/ 各种/ 特征/ 不同/ 的/ 无线网络/ 的/ 集合/ ,/ 例如/ 各种/ 蜂窝/ 网/ (/ GSM/ ,/ UMTS/ ,/ HSDPA/ ,/ LTE/ )/ 、/ 无线/ 局域网/ (/ 802.11/ a/ ,/ 802.11/ b/ ,/ 802.11/ g/ ,/ 802.11/ n/ )/ 和/ 数字视频/ 广播网/ (/ DVB/ -/ T/ ,/ DVB/ -/ S/ ,/ DVB/ -/ H/ )/ ./ 在/ 未来/ 的/ 第四代/ 通信/ 系统/ 中/ [/ 5/ ]/ (/ 4G/ )/ ,/ 会/ 出现/ 更/ 多/ 的/ 无线网络/ 并/ 在/ 不同/ 的/ 应用/ 中/ 发挥/ 重要/ 作用/ ./ 异构/ 无线网/ 目前/ 的/ 研究/ 热点/ 是/ 利用/ 各种/ 无线网络/ 之间/ 的/ 特点/ 进行/ 互补/ ,/ 为/ 用户/ 提供/ 更好/ 的/ 服务质量/ ./ 例如/ 结合/ 蜂窝/ 网/ 的/ 广泛/ 移动性/ 支持/ 以及/ 无线/ 局域网/ 的/ 高带宽/ 低/ 费用/ 特点/ ,/ 用于/ 支持/ 移动/ 多媒体/ 会议/ 视频/ 、/ 音频/ 、/ 图片/ 、/ 文字/ 等/ 各种/ 数据流/ 的/ 上下行/ 传输/ ,/ 既/ 能/ 满足用户/ 进行/ 全面/ 信息/ 交互/ 的/ 需求/ ,/ 又/ 能/ 节约/ 费用/ 成本/ ./ 异构/ 无线网/ 环境/ 下/ 移动/ 多媒体/ 会议/ 的/ 应用/ 场景/ 如图/ 1/ 所示/ ./ 用/ 带宽/ ,/ 并/ 与其/ 对应/ 的/ 峰值/ 速率/ 比较/ ./ 因为/ 移动/ 多媒体/ 会议/ 在/ 多数/ 情况/ 下/ 需要/ 同时/ 进行/ 视频/ 、/ 音频/ 、/ 图片/ 等/ 多种/ 数据流/ 的/ 上下行/ 传输/ ,/ 并且/ 受后/ 文中/ 所述/ 的/ 延迟/ 敏感/ 和/ 无线/ 信道/ 状态/ 多变/ 等/ 因素/ 影响/ ,/ 依靠/ 单一/ 无线网络/ 的/ 实际/ 可用/ 带宽/ 通常/ 无法/ 保障/ 良好/ 的/ 会议/ 服务质量/ [/ 6/ ]/ ;/ Page3/ 无线网/ 2G/ :/ GSM2/ ./ 5G/ :/ EDGE90kbps3G/ :/ UMTS3/ ./ 5G/ :/ HSDPA14/ ./ 4Mbps300/ ~/ 500kbps/ (/ 2/ )/ 延迟/ 敏感/ ./ 端到/ 端/ 单向/ 延迟/ (/ one/ -/ wayEnd/ -/ to/ -/ EndDelay/ ,/ oEED/ )/ 是/ 衡量/ 实时/ 交互式/ 多媒体/ 应用/ 服务质量/ 的/ 重要/ 指标/ 之一/ [/ 7/ ]/ ./ 因此/ ,/ 多媒体/ 视频/ 对/ 延迟/ 十分/ 敏感/ ,/ 根据/ ITU/ -/ TG/ ./ 114/ 标准/ [/ 8/ ]/ ,/ 要/ 保证/ 交互式/ 视频/ 应用/ 达到/ 良好/ 服务质量/ (/ excellentQoS/ )/ ,/ 传输/ 单向/ 延迟/ (/ one/ -/ waydelay/ )/ 不能/ 大于/ 150ms/ ,/ 而/ 满足用户/ 可/ 接受/ 服务质量/ (/ acceptableQoS/ )/ 不能/ 大于/ 400ms/ ;/ (/ 3/ )/ 信道/ 状态/ ./ 无线网络/ 信道/ 状态/ 复杂多变/ [/ 9/ ]/ ,/ 具体表现/ 为/ 较/ 高/ 的/ 误码率/ 、/ 丢/ 包率/ 、/ 带宽/ 波动/ 、/ 延迟/ 抖动/ 等/ ,/ 解决/ 此类/ 问题/ 需要/ 使用/ 反馈/ 重/ 发/ 、/ 前向/ 纠错/ 等/ 方法/ ,/ 一定/ 程度/ 上/ 会/ 进一步/ 增加/ 延迟/ ./ 因此/ ,/ 在/ 多数/ 情况/ 下/ ,/ 依靠/ 单一/ 无线网络/ 难以/ 支持/ 低/ 延迟/ 、/ 高带宽/ 要求/ 的/ 移动/ 多媒体/ 视频/ 传输/ ,/ 解决/ 此/ 问题/ 需要/ 利用/ 异构/ 无线网/ 之间/ 的/ 协作/ 传输/ ,/ 已有/ 的/ 研究/ 工作/ 主要/ 分为/ 两个/ 方向/ :/ 垂直/ 切换/ (/ verticalhandoff/ )/ 和/ 路径/ 分/ 集/ (/ pathdiversity/ )/ ./ 垂直/ 切换/ [/ 10/ ]/ 是/ 指/ 移动/ 终端/ 从/ 接入/ 一种/ 类型/ 的/ 无线网络/ 切换/ 到/ 接入/ 另/ 一种/ 不同/ 类型/ 无线网络/ 之间/ 的/ 转换/ 过程/ ,/ 这/ 适用/ 于/ 终端设备/ 在/ 同一时间/ 内/ 只能/ 接入/ 单一/ 无线网络/ 的/ 情况/ ,/ 即单/ 接入/ (/ single/ -/ radio/ )/ 移动/ 终端/ ./ 而/ 随着/ 相关/ 软硬件/ 的/ 不断/ 发展/ ,/ 许多/ 最新/ 的/ 智能/ 移动/ 终端/ 提供/ 了/ 多/ 接入/ (/ multi/ -/ radio/ )/ 功能/ ,/ 例如/ iPhone/ 和/ NokiaN/ 系列/ 手机/ ,/ 能/ 使/ 用户/ 同时/ 接入/ 至少/ 4/ 种/ 无线网络/ ,/ 包括/ GSM/ 、/ 3G/ 、/ WLAN/ 和/ Bluetooth/ ./ 路径/ 分/ 集/ [/ 11/ ]/ 技术/ 基于/ 多/ 接入/ 智能/ 移动/ 终端/ ,/ 使/ 用户/ 能/ 同时/ 接入/ 多种不同/ 的/ 无线网络/ ,/ 并/ 使用/ 所/ 建立/ 的/ 多路径/ 链接/ 进行/ 并行传输/ ./ 路径/ 分/ 集/ 相对/ 于/ 垂直/ 切换/ 的/ 优点/ 如下/ :/ (/ 1/ )/ 带宽/ 整合/ ./ 垂直/ 切换/ 技术/ 在/ 同一时间/ 内/ 只能/ 接入/ 单一/ 的/ 无线网络/ ,/ 并/ 不能/ 解决/ 前/ 文中/ 所述/ 的/ 带宽/ 限制/ 问题/ ,/ 而/ 路径/ 分集/ 能/ 将/ 多种/ 无线网络/ 的/ 带宽/ 进行/ 整合/ ,/ 用于/ 支持/ 移动/ 多媒体/ 视频/ 传输/ ;/ (/ 2/ )/ 无/ 切换/ 延迟/ ./ 垂直/ 切换/ 过程/ 中/ 的/ 切换/ 延迟/ 问题/ 会/ 造成/ 视频/ 质量/ 的/ 严重/ 下降/ ,/ 同时/ 接入/ 多种/ 网络/ 能/ 解决/ 这一/ 问题/ ,/ 达到/ 真正/ 的/ “/ 无缝/ 切换/ ”/ ;/ (/ 3/ )/ 可靠性/ ./ 不同/ 的/ 无线网络/ 路径/ 之间/ 彼此/ 独立/ ,/ 使用/ 合理/ 有效/ 的/ 多路径/ 传输/ 方法/ 能/ 在/ 很大/ 程度/ 上/ 解决/ 前/ 文中/ 所述/ 的/ 无线网络/ 信道/ 状态/ 复杂多变/ 问题/ ,/ 提高/ 传输/ 的/ 可靠性/ ./ 因此/ ,/ 使用/ 路径/ 分/ 集/ 技术/ 是/ 解决/ 前/ 文中/ 所述/ 多媒体/ 会议/ 服务质量/ 保障/ 所/ 面临/ 问题/ 的/ 有效/ 方法/ ./ 在/ 该/ 研究/ 领域/ 已有/ 一些/ 相关/ 工作/ ./ Chebrolu/ 和/ Rao/ [/ 12/ ]/ 提出/ EDPF/ (/ EarliestDeliveryPathFirst/ )/ 算法/ ,/ 其/ 设计/ 思想/ 是/ 在/ 每个/ 数据包/ 发送/ 时/ 从/ 可用/ 的/ 多种/ 无线网/ 中/ 选择/ 端到/ 端/ 延迟/ 最短/ 的/ 路径/ ,/ 该/ 方法/ 在/ 一定/ 程度/ 上/ 减少/ 了/ 视频流/ 传输/ 的/ 总/ 延迟/ ,/ 但/ 因为/ 单/ 路径/ 带宽/ 限制/ 以及/ 未/ 对/ 长度/ 过大/ 数据包/ 做出/ 有效/ 处理/ 的/ 原因/ ,/ 单向/ 延迟/ 问题/ 没有/ 得到/ 有效/ 解决/ ./ Jurca/ 等/ 人/ [/ 13/ ]/ 基于/ 负载/ 均衡/ 原理/ 设计/ LBA/ (/ LoadBalancingAlgorithm/ )/ 算法/ ,/ 该/ 算法/ 充分考虑/ 了/ 网络带宽/ 、/ 播放/ 延迟/ 以及/ 数据包/ 权重/ 等/ 因素/ ./ Nightingale/ 等/ 人/ [/ 14/ ]/ 针对/ 移动/ 网络/ 中/ 多路径/ 之间/ 的/ 选择/ 以及/ 切换/ 问题/ 提出/ OPSSA/ 算法/ ./ Han/ 等/ 人/ [/ 15/ ]/ 基于/ 喷泉/ 码/ 设计/ 并/ 实现/ 一种/ 端到/ 端的/ 虚通路/ 构建/ 系统/ ,/ 该/ 方法/ 的/ 主要/ 目的/ 是/ 解决/ 路径/ 丢包/ 和/ 带宽/ 波动/ 问题/ ./ 上述/ 研究/ 工作/ 合理/ 有效/ 地/ 利用/ 路径/ 分/ 集/ 传输/ ,/ 解决/ 所/ 面临/ 的/ 问题/ ,/ 但是/ 单向/ 延迟/ 还/ 没有/ 一种/ 有效/ 的/ 解决/ 方法/ ./ 这/ 是因为/ 路径/ 分集/ 的/ 主要/ 作用/ 是/ 解决/ 单一/ 无线网/ 带宽/ 受限/ 问题/ ,/ 而/ 带宽/ 只是/ 影响/ 单向/ 延迟/ 的/ 重要/ 因素/ 之一/ ./ 根据/ ITU/ -/ TG/ ./ 114/ 标准/ [/ 8/ ]/ ,/ 数据包/ 长度/ 同样/ 是/ 一种/ 重要/ 影响/ 因素/ ,/ 长度/ 较大/ 的/ 数据包/ 因/ 延迟/ 过长/ 会/ 造成/ 视频/ 的/ 丢/ 帧/ 、/ 跳帧/ 、/ 断续/ 等/ 问题/ ,/ 严重/ 影响/ 会议/ 的/ 服务质量/ 和/ 用户/ 体验/ ./ 因此/ ,/ 解决/ 此/ 问题/ 需要/ 对/ 数据包/ 长度/ 进行/ 有效/ 调整/ ,/ 目前/ 关于/ 数据包/ 长度/ 调整/ 已有/ 相关/ 研究/ 工作/ ,/ 主要/ 集中/ 在/ MAC/ 层/ ./ Lin/ 等/ 人/ [/ 16/ ]/ 经/ 研究/ 发现/ 帧/ 长度/ (/ framesize/ )/ 与/ WLAN/ 吞吐量/ 之间/ 的/ 关系/ ,/ 并/ 使用/ 神经网络/ 方法/ 考虑/ 多种/ 因素/ 对/ 帧/ 长度/ 进行/ 计算/ 和/ 自/ 适应/ 调整/ ,/ 提升/ 网络/ 吞吐量/ ./ Modiano/ [/ 17/ ]/ 发现/ 长度/ 过大/ 的/ 帧/ 不/ 适宜/ 在/ 易错/ 信道/ 中/ 传输/ ,/ 并且/ 推导/ 出/ 了/ 帧/ 的/ 最佳/ 长度/ 与/ 信道/ 误码率/ 之间/ 的/ 计算公式/ ./ 本文/ 在/ 应用层/ 对/ 数据包/ 长度/ 进行/ 调整/ 以/ 解决/ 单向/ 延迟/ 问题/ ,/ 应用层/ 视频/ 数据包/ 长度/ 调整/ 的/ 方法/ 在/ RFC6184/ [/ 18/ ]/ 以及/ RFC6190/ [/ 19/ ]/ 中/ 称为/ NAL/ 单元/ 分段/ 重组/ ./ 因此/ ,/ 本文/ 采用/ 路径/ 分/ 集/ 传输/ 解决/ 单一/ 无线网/ 带宽/ 限制/ ,/ 并且/ 使用/ 分段/ 重组/ 方法/ 对/ 数据包/ 长度/ 进行/ 有效/ 调整/ ,/ 通过/ 在/ 应用层/ 设计/ 的/ 服务器/ -/ 客户端/ 形式/ 多路径/ 数据包/ 调度/ 算法/ 将/ 两种/ 方法/ 结合/ 并/ 实现/ ./ 选择/ 应用层/ 的/ 原因/ 是/ 下层/ 的/ 参数/ 和/ 协议/ 是/ 受/ 各/ 集成/ 服务提供商/ 以及/ 硬件/ 设备/ 商所/ 控制/ ,/ 难以/ 协调/ 和/ 统一/ ,/ 而/ 应用层/ 参数/ 在/ 应用/ 服务提供商/ 控制/ 范围/ 内/ ,/ 可/ Page4/ 根据/ 具体/ 需求/ 做出/ 优化/ 和/ 调整/ ./ 本文/ 的/ 贡献/ 在于/ :/ (/ 1/ )/ 将/ 数据包/ 分段/ 重组/ 与/ 异构/ 无线网/ 路径/ 分/ 集/ 传输/ 相结合/ ,/ 提出/ 一种/ 应用层/ 端到/ 端/ 服务质量/ 保障/ 方法/ ,/ 解决/ 移动/ 多媒体/ 视频/ 传输/ 的/ 延迟/ 敏感/ 问题/ ;/ (/ 2/ )/ 设计/ 实现/ 了/ 服务器/ -/ 客户端/ 多路径/ 数据包/ 调度/ 算法/ (/ PFDA/ -/ PRRA/ 算法/ )/ ./ 仿真/ 结果/ 验证/ 了/ 该/ 算法/ 具有/ 良好/ 的/ 低/ 延迟/ 传输/ 以及/ 带宽/ 整合/ 性能/ ./ 本文/ 第/ 2/ 节对/ 所/ 设计/ 的/ 服务质量/ 保障/ 方法/ 进行/ 详细描述/ ;/ 第/ 3/ 节/ 具体/ 介绍/ 本文/ 所/ 提出/ 并/ 实现/ 的/ PFDA/ -/ PRRA/ 算法/ ;/ 第/ 4/ 节/ 描述/ 实验/ 方法/ 以及/ 对/ 实验/ 进行/ 结果/ 分析/ ;/ 第/ 5/ 节/ 总结/ 全文/ 并/ 提出/ 进一步/ 的/ 研究/ 工作/ ./ 本文/ 中/ 所/ 使用/ 的/ 主要/ 数学/ 符号/ 及其/ 说明/ 如表/ 2/ 所示/ ./ TintervalDmaxPKmax/ _/ transdpropA/ (/ p/ )/ B/ (/ p/ )/ NA/ (/ p/ )/ NB/ (/ p/ )/ 图/ 2/ 本文/ 方法/ 总体/ 架构图/ 2/ 服务质量/ 保障/ 方法/ 设计/ 本文/ 所/ 提出/ 方法/ 的/ 目的/ 是/ 构建/ 端到/ 端/ 虚通路/ 保障/ 多媒体/ 视频流/ 的/ 快速/ 传输/ ,/ 总体/ 架构/ 如图/ 2/ 所示/ ,/ 方法/ 通过/ 服务器/ 的/ 数据包/ 调度/ 器/ 以及/ 客户端/ 的/ 数据包/ 接收器/ 实现/ ,/ 服务器/ 的/ 调度/ 器/ 使用/ 本文/ 提出/ 的/ 数据包/ 分段/ 发送/ 算法/ (/ PacketFragmentationandDeliveryAlgorithm/ ,/ PFDA/ )/ ,/ 客户端/ 接收器/ 使用/ 数据包/ 接收/ 重组/ 算法/ (/ PacketReceiveandReassemblyAlgorithm/ ,/ PRRA/ )/ ./ 上述/ 过程/ 具体/ 可/ 分为/ 以下/ 步骤/ :/ (/ 1/ )/ 数据包/ 分段/ 发送/ ;/ (/ 2/ )/ 构建/ 端到/ 端/ 虚通路/ 进行/ 路径/ 分/ 集/ 传输/ ;/ (/ 3/ )/ 数据包/ 接收/ 重组/ ./ 本节/ 剩余/ 部分/ 将/ 分别/ 介绍/ 实现/ 上述/ 过程/ 所/ 使用/ 的/ 两个/ 关键/ 方法/ ,/ 2.1/ 节/ 介绍/ 数据包/ 分段/ 重组/ 方法/ ,/ 2.2/ 节/ 介绍/ 路径/ 分/ 集/ 传输/ 的/ 实现/ 方式/ ./ 服务器/ -/ 客户端/ 多路径/ 数据包/ 调度/ 算法/ (/ PFDA/ -/ PRRA/ 算法/ )/ 及其/ 计算/ 推导/ 过程/ 将/ 在/ 第/ 3/ 节中/ 进行/ 详细/ 介绍/ ./ 在/ 编解码器/ 选择/ 方面/ ,/ 因为/ 考虑/ 移动/ 多媒体/ 会议/ 需要/ 满足/ 不同/ 用户/ 的/ 需求/ 以及/ 适应/ 多种/ 网络/ 环境/ ,/ 本文/ 使用/ H/ ./ 264/ 的/ 可/ 伸缩/ 视频/ 编码方式/ ,/ 即/ H/ ./ 264/ // SVC/ [/ 20/ ]/ ./ 因为/ H/ ./ 264/ // SVC/ 具有/ 三维/ 可伸缩性/ (/ 时域/ 可伸缩性/ 、/ 空域/ 可伸缩性/ 以及/ 质量/ 可伸缩性/ )/ ,/ 它/ 相对/ 于/ H/ ./ 264/ // AVC/ [/ 21/ ]/ 更加/ 灵活/ ./ 有关/ H/ ./ 264/ // SVC/ 的/ 具体/ 介绍/ 可/ 参考文献/ [/ 20/ ]/ ,/ 本文/ 在/ PFDA/ 算法/ 中/ 使用/ 了/ SVC/ 的/ 质量/ 可伸缩性/ ./ 2.1/ 数据包/ 分段/ 重组/ 本文/ 中/ 所述/ 的/ 视频/ 数据包/ 即为/ H/ ./ 264/ 标准/ 中/ Page5/ 的/ 网络/ 抽象/ 层/ 单元/ (/ NetworkAbstractionLayerUnit/ ,/ NALU/ )/ ./ 在/ H/ ./ 264/ 标准/ [/ 21/ ]/ 中/ ,/ 以/ NALU/ 为/ 单元/ 支持/ 编码数据/ 在/ 网络/ 中/ 的/ 传输/ ./ 有关/ NAL/ 单元/ 的/ 结构/ 、/ 类型/ 、/ 语义/ 以及/ 解码/ 过程/ 等/ 可/ 参考文献/ [/ 20/ -/ 21/ ]/ ,/ 在/ 此/ 不/ 详述/ ./ NAL/ 单元/ 的/ 长度/ 因/ 编码/ 参数/ 和/ 视频/ 测试/ 序列/ 的/ 不同/ 而/ 改变/ ,/ 主要/ 编码/ 参数/ 为/ 比特率/ (/ BitRate/ )/ ./ 在/ 本文/ 的/ 实验/ 中/ ,/ 对/ 标准/ YUV/ 视频/ 序列/ Foreman/ _/ cif/ 分别/ 使用/ 比特率/ 等于/ 1Mbps/ 和/ 3Mbps/ 进行/ 编码/ ,/ 其它/ 参数/ 保持一致/ ,/ 对/ 所/ 产生/ 的/ NAL/ 单元/ 进行/ 统计/ ./ 长度/ 分布区/ 间/ 及其/ 所/ 占/ 视频流/ 数据/ 总长度/ 的/ 百分比/ (/ 概率密度/ )/ 如图/ 3/ 所示/ ./ 从图/ 中/ 可以/ 看出/ ,/ 当/ 比特率/ 取值/ 越大时/ ,/ 编码/ 生成/ 长度/ 较大/ 的/ NAL/ 单元/ 数量/ 越多/ ./ 根据/ 信息论/ ,/ 比特率/ 是/ 保障/ 视频/ 高清/ 质量/ 与/ 失真/ 最小化/ 的/ 必要条件/ ./ 因此/ 要/ 使/ 多媒体/ 视频/ 失真/ 最小/ ,/ 需要/ 考虑/ 长度/ 过大/ 数据包/ 的/ 延迟/ 问题/ ,/ 否则/ 视频/ 的/ 断续/ 、/ 丢/ 帧/ 、/ 跳帧/ 现象/ 会/ 十分/ 明显/ ./ 在/ 实际/ 可用/ 带宽/ 受限/ 的/ 条件/ 下/ ,/ 依靠/ 单一/ 无线网络/ 传输/ 在/ 多数/ 情况/ 下/ 无法/ 将/ 单向/ 延迟/ 图/ 4NAL/ 单元/ 分段/ 过程/ 示意图/ 设/ 一个/ 待/ 分段/ 的/ NAL/ 单元/ 长度/ 为/ N/ 字节/ ,/ 所/ 分成/ 两段/ 长度/ 分别/ 为/ N/ -/ M/ 和/ M/ 字节/ ,/ 在/ 两段/ 分别/ 添加/ 一个/ 16/ 字节/ 的/ 报头/ ,/ 报头/ 中/ 所/ 包含/ 的/ 信息/ 分别/ 为/ 所属/ NAL/ 单元/ 的/ 编码/ 序号/ 、/ 所属/ NAL/ 单元/ 总长度/ 、/ 该/ 分段/ 起始/ 位置/ 和/ 该/ 分段/ 长度/ ,/ 各/ 占/ 4/ 字节/ ./ 所/ 分成/ 两段/ 的/ 报头/ 信息/ 如图/ 4/ 所示/ ,/ 以此/ 可/ 类推/ 单个/ NAL/ 单元/ 分成/ 多段/ 的/ 过程/ ./ 在/ 客户端/ 进行/ 重组/ 时/ ,/ 当/ 接收/ 到/ 第一块/ 分段/ 时/ 申请/ 一块/ 长度/ 为/ N/ 的/ 内存空间/ ,/ 并/ 将/ 该/ 分段/ 按其起/ 控制/ 在/ 可容忍/ 范围/ 内/ ,/ 因此/ 本文/ 使用/ NAL/ 单元/ 的/ 分段/ 重组/ 方法/ 对/ 长度/ 做出/ 有效/ 调整/ ./ NAL/ 单元/ 的/ 分段/ 与/ 重组/ 在/ H/ ./ 264/ // AVC/ 以及/ H/ ./ 264/ // SVC/ 的/ RTP/ 规范/ [/ 18/ -/ 19/ ]/ 中有/ 阐述/ ,/ 但是/ 其/ 目的/ 主要/ 是/ 考虑/ 最大/ 传输/ 单元/ (/ MaximumTransmis/ -/ sionUnit/ ,/ MTU/ )/ 长度/ 、/ 不/ 平等/ 差错/ 保护/ 以及/ 接收端/ 缓存/ 容量/ 等/ 问题/ ,/ 并未/ 有过/ 与/ 路径/ 分/ 集/ 传输/ 相结合/ 的/ 应用/ ./ 本文/ 在/ 遵循/ 上述/ 两种/ 规范/ 的/ 前提/ 下/ ,/ 根据/ 具体/ 应用/ 需要/ ,/ 使用/ 自定义/ 报头/ 进行/ 分段/ 重组/ ,/ 具体/ 过程/ 如图/ 4/ 所示/ ./ 始/ 位置/ 和/ 长度/ 拷贝/ 至/ 其中/ ,/ 继续/ 等待/ 接收/ 数据包/ ,/ 当/ 接收/ 到/ 第二块/ 分段/ 并/ 拷贝/ 至/ 已/ 申请/ 的/ 内存空间/ 后该/ NAL/ 单元/ 的/ 重组/ 完成/ ./ 重组/ 过程/ 如图/ 5/ 所示/ :/ 有关/ NAL/ 单元/ 的/ 分段/ 重组/ 所/ 需/ 考虑/ 的/ 因素/ 以及/ 实现/ 过程/ 将/ 在/ 第/ 3/ 节/ PFDA/ -/ PRRA/ 算法/ 中/ 具体/ 描述/ ./ 因为/ 本文/ 的/ 工作/ 处在/ 应用层/ ,/ 该层/ 以下/ 对/ NAL/ 单元/ 进一步/ 的/ 封装/ 、/ 拆分/ 等/ 操作/ 是/ 由/ 底层/ 系统/ 和/ 相关/ 协议/ 完成/ ,/ 为/ 统一/ 名称/ ,/ NAL/ 单元/ 即/ 为/ 前后文/ 中/ 所述/ 的/ 数据包/ ./ Page6/ 图/ 5NAL/ 单元/ 重组/ 过程/ 示意图/ 2.2/ 路径/ 分/ 集/ 传输/ 路径/ 分/ 集/ 传输/ 是/ 指/ 在/ 分组/ 交换/ 网络/ 中/ ,/ 从源/ 节点/ 到/ 目的/ 节点/ 之间/ 通过/ 两条/ 或者/ 多条/ 路径/ 同时/ 进行/ 数据传输/ [/ 11/ ]/ ./ 路径/ 可以/ 表示/ 为/ 到达/ 单个/ 目的/ 节点/ 的/ 一对/ 源/ 目的/ 地址/ (/ source/ -/ destinationaddresses/ )/ ./ 当源/ 节点/ 与/ 目的/ 节点/ 之间/ 有/ 多条/ 并行传输/ 路径/ 时/ ,/ 源/ 节点/ 需要/ 有/ 合适/ 的/ 路径/ 选择/ 方法/ ,/ 该/ 方法/ 需要/ 考虑/ 具体/ 的/ 应用/ 需求/ 、/ 服务质量/ 、/ 传输/ 可靠性/ 和/ 延迟/ 等/ ./ 在/ 实际/ 网络/ 中/ ,/ 两/ 节点/ 之间/ 数据传输/ 通常/ 需要/ 经过/ 有线网/ 和/ 无线网/ ,/ 有线网/ 路径/ 分集/ 不/ 在/ 本文/ 研究/ 范围/ 之内/ ./ 本文/ 路径/ 分/ 集/ 传输/ 实现/ 过程/ 及/ 所/ 使用/ 协议/ 如图/ 6/ 路径/ 分/ 集/ 传输/ 实现/ 过程/ 及/ 相关/ 协议/ 图/ 6/ 所示/ ,/ 图中/ 的/ 源/ 节点/ 有/ 一个/ 有线网/ 接口/ ,/ IP地址/ 为/ IPs/ ,/ 目的/ 节点/ 有/ 3/ 个/ 无线网/ 接口/ ,/ 即/ WLAN/ 、/ GSM/ 以及/ 3G/ ,/ IP地址/ 分别/ 为/ IP1d/ ,/ IP2d/ ,/ IP3d/ ./ 当/ 编码/ 产生/ 视频流/ 时/ 使用/ PFDA/ 算法/ 对/ 视频流/ 数据包/ 进行/ 处理/ ,/ 算法/ 中/ 对/ 数据包/ 封装/ 发送/ 是/ 通过/ 调用/ RTP/ 协议/ ,/ 在/ 接口函数/ 中/ 指定/ 源/ 节点/ 与/ 目的/ 节点/ 的/ IP地址/ 实现/ 的/ ,/ 图中/ 两/ 节点/ 之间/ 的/ 端/ 到/ 端/ 路径/ 之一/ 可/ 表述/ 为/ P1/ :/ {/ IPs/ ,/ IP1d/ }/ ./ 文中/ 所述/ 端到/ 端/ 虚通路/ (/ End/ -/ to/ -/ EndVirtualPath/ )/ 是/ 由/ 上述/ 端到/ 端/ 路径/ 中/ 的/ 一条/ 或者/ 多条/ 构成/ ,/ 即/ 所有/ 路径/ 组成/ 集合/ 的/ 非/ 空子/ 集/ ,/ 可/ 表述/ 为/ Page7/ 从/ 上述/ 过程/ 可以/ 得出/ ,/ RTP/ 以下/ 的/ 各层/ 协议/ 并未/ 使用/ PFDA/ -/ PRRA/ 算法/ ,/ 因此/ 本文/ 在/ 应用层/ 实现/ 路径/ 分/ 集/ 传输/ ,/ 构建/ 端到/ 端/ 虚通路/ ./ 3PFDA/ -/ PRRA/ 算法/ PFDA/ -/ PRRA/ 算法/ 不仅/ 需要/ 对/ 带宽/ 进行/ 有效/ 整合/ ,/ 同时/ 需要/ 考虑/ 由于/ 信道/ 状态/ 原因/ (/ 例如/ 带宽/ 、/ 延迟/ )/ 造成/ 的/ 数据包/ 多路径/ 传输/ 后/ 可能/ 出现/ 的/ 乱序/ 问题/ ./ 在/ 第/ 1/ 节中/ 已经/ 对/ 几种/ 路径/ 分/ 集/ 传输数据/ 包/ 调度/ 算法/ 做/ 了/ 总结/ 和/ 概括/ ,/ 包括/ EDPF/ [/ 12/ ]/ 、/ LBA/ [/ 13/ ]/ 和/ OPSSA/ [/ 14/ ]/ ,/ 在/ 上述/ 三种/ 算法/ 中/ ,/ EDPF/ 与/ 本文/ 所图/ 7PFDA/ -/ PRRA/ 算法/ 总体/ 流程图/ 3.1/ PFDA/ 算法/ 服务器/ 数据包/ 调度/ 算法/ 的/ 设计/ 目的/ 是/ 在/ 各/ 路径/ 的/ 最大/ 传输/ 量/ 范围/ 内/ ,/ 将/ 数据包/ 的/ 单向/ 延迟/ 最小化/ ./ 该/ 算法/ 命名/ 为/ 数据包/ 分段/ 发送/ 算法/ ,/ 具体/ 分为/ 以下/ 三个/ 步骤/ :/ 选择性/ 丢包/ 、/ 解码/ 时间/ 计算/ 以及/ 数据包/ 分段/ 发送/ ./ (/ 1/ )/ 选择性/ 丢包/ ./ 服务器/ 按照/ 一定/ 的/ 时间/ 间隔/ Tinterval/ 发送/ 数据包/ ./ 首先/ 要/ 确定/ 在/ 该/ 间隔/ 内所能/ 传输/ 的/ 视频流/ 总长度/ (/ 最大/ 传输/ 量/ )/ ./ 如果/ 长度/ 小于/ 发送/ 缓存/ 中/ 数据包/ 总长度/ 之/ 和/ ,/ 则/ 需要/ 进行/ 选择性/ 丢包/ (/ selectivepacketdiscard/ )/ ./ 这/ 不仅/ 可以/ 节省/ 不必要/ 的/ 带宽/ 开销/ ,/ 还/ 能/ 将/ 视频/ 质量/ 的/ 下降/ 最小化/ ./ 单个/ 数据包/ 通过/ 路径/ 的/ 端/ 到/ 端/ 总/ 延迟/ 等于/ 传输/ 延迟/ 提出/ 算法/ 目的/ 一致/ ,/ 即将/ 延迟/ 最小化/ ,/ 表/ 3/ 中/ 列出/ 了/ 本文/ 所/ 提出/ 的/ PFDA/ -/ PRRA/ 算法/ 的/ 类型/ 、/ 实现/ 方式/ 以及/ 所/ 考虑/ 的/ 路径/ 和/ 数据包/ 参数/ ,/ 并且/ 与/ EDPF/ 进行/ 了/ 对比/ ./ PFDA/ -/ PRRA/ 流程/ 如图/ 7/ 所示/ ./ 算法/ 名称/ 类型/ 实现/ 路径/ 参数/ 数据包/ 参数/ EDPF/ 网络层/ 网络/ 代理服务器/ 延迟/ PFDA/ -/ PRRA/ 应用/ 层流/ 媒体/ 服务器/ (/ transmissiondelay/ )/ 与/ 传播/ 延迟/ (/ propagationdelay/ )/ 之/ 和/ ./ 计算方法/ 如下/ :/ 其中/ Spkt/ 表示/ 数据包/ 的/ 长度/ ,/ bw/ 和/ dprop/ 分别/ 表示/ 路径/ 的/ 带宽/ 和/ 传播/ 延迟/ ./ 因此/ ,/ 路径/ i/ 在/ Tinterval/ 内/ 的/ 最大/ 传输/ 量/ PKimax/ _/ trans/ 的/ 计算公式/ 如下/ :/ 可以/ 得出/ 终端设备/ 连接/ 的/ 所有/ 路径/ 并行传输/ 的/ 最大/ 传输/ 量/ :/ PKmax/ _/ trans/ =/ ∑/ NnetPage8/ 之后/ ,/ 需要/ 根据/ A/ (/ p/ )/ 中/ 数据包/ 的/ 权重/ 以及/ 长度/ 进行/ 选择性/ 丢包/ ./ 数据包/ 权重/ p/ ω/ 需要/ 读取数据/ 包/ 确定/ ,/ 因为/ 增强/ 层/ 数据包/ 的/ 解码/ 需要/ 参考/ 基础/ 层/ ,/ 所以/ 其/ 权重/ 小于/ 基础/ 层/ 数据包/ ./ 优先/ 丢弃/ 增强/ 层/ 数据包/ 不会/ 影响/ 基础/ 层/ 解码/ ,/ 可/ 保证/ 视频/ 的/ 基本/ 质量/ ,/ 因此/ 按照/ p/ ω/ 值/ 从小到大/ 将/ 数据包/ 逐个/ 丢弃/ ,/ 直到/ 满足/ A/ (/ p/ )/ 中/ 剩余/ 数据包/ 长度/ 之/ 和/ 不/ 大于/ PKmax/ _/ trans/ 为止/ ,/ 即/ PKmax/ _/ trans/ / ∑/ NA/ (/ p/ )/ (/ 2/ )/ 解码/ 时间/ 计算/ ./ 在/ 选择性/ 丢包/ 结束/ 后/ ,/ A/ (/ p/ )/ 中/ 剩余/ 的/ 数据包/ 即/ 为/ 本次/ 间隔/ 内/ 所/ 需/ 传输/ 的/ 数据包/ ,/ 因为/ 受/ 客户端/ 播放/ 延迟/ (/ playbackdelay/ )/ Δ/ 以及/ 最大/ 延迟/ 上限/ DBmax/ 的/ 条件/ 约束/ ,/ 需要/ 逐个/ 计算/ 每个/ 数据包/ 的/ 解码/ 时间/ (/ decodedeadline/ )/ ,/ 数据包/ 的/ 正常/ 解码/ 时间/ 等于/ 该/ 数据包/ 的/ 播放/ 时间/ ,/ 计算公式/ 如下/ :/ 其中/ δ/ 表示/ 播放/ 速率/ ,/ 但是/ 经常/ 会/ 出现/ 最大/ 延迟/ 上限/ 小于/ 播放/ 时间/ 的/ 情况/ ,/ 因此/ 解码/ 时间/ 需要/ 取/ 两者之间/ 的/ 最小值/ :/ (/ 3/ )/ 数据包/ 分段/ 发送/ ./ 根据/ H/ ./ 264/ 的/ RTP/ 规范/ [/ 18/ ]/ ,/ 数据包/ 发送/ 需要/ 按照/ 其/ 编码/ 产生/ 顺序/ 即/ 编码/ 序号/ ,/ 在/ 解码/ 时间/ 计算/ 完成/ 后/ ,/ 将/ A/ (/ p/ )/ 中/ 的/ 数据包/ 按照/ 编码/ 序号/ 升序/ 排序/ ,/ 逐个/ 识别/ 需要/ 分段/ 的/ 数据包/ ./ 因为/ H/ ./ 264RTP/ 规范/ [/ 18/ ]/ 不/ 允许/ 对/ 一些/ 数据包/ 进行/ 分段/ ./ 例如/ 参数/ 集/ 和/ 补充/ 增强/ 信息/ 类/ 数据包/ ./ 此类/ 数据包/ 长度/ 很小/ ,/ 从/ 延迟/ 方面/ 考虑/ 没有/ 分段/ 的/ 必要性/ ,/ 其/ 处理/ 方式/ 是/ 直接/ 选择/ 一条/ 端到/ 端/ 延迟/ 最短/ 的/ 路径/ 发送/ ./ 路径/ 选择/ 使用/ pq/ 的/ 取值/ 表示/ ,/ 数据包/ p/ 选择/ 路径/ i/ 的/ 表达式/ 如下/ :/ 分段/ 步骤/ 需要/ 计算/ 分段/ 数量/ 、/ 各/ 分段/ 的/ 长度/ 以及/ 各/ 分段/ 所/ 发送/ 的/ 路径/ ./ 为/ 充分利用/ 移动/ 终端/ 所/ 连接/ 无线网/ 的/ 带宽/ ,/ 本文/ 假设/ 数据包/ 的/ 分段/ 数量/ 等于/ 无线网/ 的/ 数量/ Nnet/ ,/ 数据包/ 的/ 分段/ 使用/ 向量/ 表达式/ :/ 因为/ 所有/ 分段/ 经/ 路径/ 分/ 集/ 传输/ 在/ 客户端/ 重组/ 后方/ 能/ 进行/ 正常/ 解码/ ,/ 被/ 分段/ 数据包/ 的/ 端/ 到/ 端/ 延迟/ 等于/ 所有/ 分段/ 端到/ 端/ 延迟/ 的/ 最大值/ ,/ 计算/ 各/ 路径/ 所/ 传输/ 分段/ 长度/ 的/ 目的/ 是/ 将/ 延迟/ 最小化/ ,/ 表达式/ 如下/ :/ Minimize/ :/ pc/ =/ MAX/ {/ psizeSubjectto/ ∑/ Nnet/ 转换/ 为/ 方程组/ 表达式/ 如下/ :/ i/ // bwi/ +/ dproppsize/ 烄/ 烅/ ∑/ Nneti/ =/ ppsize/ 烆/ sizei/ =/ 1/ 求解/ 方程组/ 可/ 得/ 结果/ :/ i/ =/ psize/ -/ ∑/ Nnet/ [/ psizei/ 即为/ 路径/ i/ 传输/ 的/ 分段/ 长度/ ,/ PFDA/ 算法/ 的/ psize/ 算法/ 1/ ./ 数据包/ 分段/ 发送/ 算法/ PFDA/ ./ Initialize/ :/ j/ ←/ 0/ ;/ AccuLen/ ←/ 0/ ;/ 伪/ 代码/ 描述/ 如/ 算法/ 1/ 所示/ ./ 1/ ./ IFPKmax/ _/ trans/ </ ∑/ NA/ (/ p/ )/ 2/ ./ SORT/ -/ BY/ -/ WEIGHT/ (/ A/ (/ p/ )/ )/ 3/ ./ 狆/ =/ (/ p1/ ,/ p2/ ,/ …/ ,/ pi/ ,/ …/ ,/ pNnet/ )/ 4/ ./ WHILEj/ </ NA/ (/ p/ )/ andDiscardSize/ >/ 0DO5/ ./ DiscardSize/ ←/ ∑/ NA/ (/ p/ )/ 6/ ./ DISCARD/ -/ PACKET/ (/ pj/ )/ 7/ ./ NA/ (/ p/ )/ ←/ NA/ (/ p/ )/ -/ 18/ ./ j/ ←/ j/ +/ 19/ ./ ENDWHILE10/ ./ ENDIF11/ ./ SORT/ -/ BY/ -/ SEQNUM/ (/ A/ (/ p/ )/ )/ 12/ ./ FOREACHPacketpinA/ (/ p/ )/ 13/ ./ pd/ =/ min/ (/ pseq/ // δ/ +/ Δ/ ,/ DBmax/ )/ 14/ ./ IFIS/ -/ PACKET/ -/ RECEIVED/ (/ pseq/ )/ =/ =/ trueTHEN15/ ./ FORi/ ←/ 1TONnet16/ ./ IFi/ !/ =/ NnetTHEN17/ ./ psize18/ ./ pi/ ←/ PACKET/ -/ FRAGMENTE/ (/ p/ ,/ AccuLen/ ,/ psize19/ ./ AccuLen/ ←/ AccuLen/ +/ psize20/ ./ ELSE21/ ./ pi/ ←/ PACKET/ -/ FRAGMENTE/ (/ p/ ,/ AccuLen/ ,/ 22/ ./ pq23/ ./ ENDIF24/ ./ ENFFOR25/ ./ ELSEpq/ ←/ MIN1/ / i/ / Nnet26/ ./ ENDFORPage93/ ./ 2PRRA/ 算法/ 数据包/ 在/ 服务器/ 经/ 分段/ 和/ 传输/ 后/ ,/ 需要/ 在/ 客户端/ 进行/ 重组/ 后/ 解码/ ,/ 在/ 传输/ 过程/ 中/ ,/ 会/ 经常出现/ 丢包/ 、/ 乱序/ 、/ 延迟/ 较长/ 等/ 情况/ ,/ 为了/ 解决/ 这些/ 问题/ 将/ 解码率/ 最大化/ ,/ 本文/ 设计/ 了/ 客户端/ 的/ 数据包/ 接收/ 及/ 重组/ 算法/ ,/ 命名/ 为/ PRRA/ ,/ 该/ 算法/ 具体/ 可/ 分为/ :/ 数据包/ 有效性/ 检验/ 、/ 缓存/ 接收/ 以及/ 缓存/ 窗口/ 自/ 适应/ 滑动/ ./ 数据包/ 接收/ 缓存/ 的/ 数据结构/ 使用/ 多值/ 映射/ (/ multi/ -/ valuedmap/ )/ ,/ 即/ 一个/ 主键/ (/ key/ )/ 对应/ 多个/ 值/ (/ value/ )/ ,/ 编码/ 序号/ 作为/ 主键/ ,/ 该/ 主键/ 同时/ 对应/ 三个/ 值/ ,/ 即/ 数据包/ 总长度/ 、/ 已/ 接收/ 长度/ 以及/ 数据包/ 负荷/ (/ packetpayload/ )/ ,/ 如图/ 8/ 所示/ ./ 当/ 接收/ 到/ 一个/ 数据包/ p/ 之后/ ,/ 在/ RTP/ 报头/ 中/ 可以/ 获取/ 解码/ 时间/ pd/ ,/ 而/ 编码/ 序号/ 、/ 所属/ 数据包/ (/ NAL/ 单元/ )/ 总长度/ 、/ 该/ 分段/ 起始/ 位置/ 以及/ 该/ 分段/ 长度/ 可以/ 从/ 自定义/ 报头/ 中/ 获取/ (/ 如/ 2.1/ 节中/ 所述/ )/ ,/ 剩余/ 的/ 信息/ 如/ 数据包/ 权重/ p/ ω/ 需要/ 读取数据/ 包/ 负荷/ 获取/ ,/ 读取/ 上述/ 信息/ 后/ 进入/ PRRA/ 算法/ 的/ 具体步骤/ :/ (/ 1/ )/ 数据包/ 有效性/ 检验/ ./ 检验/ 有效性/ 的/ 条件/ 有/ 以下/ 3/ 点/ :/ ①/ 数据包/ 的/ 到达/ 延迟/ 即/ tcur/ -/ pCT/ ,/ 是否/ 已/ 超过/ 该/ 数据包/ 的/ 解码/ 时间/ pd/ ,/ 如果/ 已/ 超过/ 则/ 选择/ 丢弃/ 该/ 数据包/ ;/ ②/ 数据包/ 的/ 编码/ 序号/ 是否/ 大于/ 解码/ 序号/ ,/ 因为/ PRRA/ 算法/ 使用/ 了/ 滑动/ 窗口/ 管理/ ,/ 可能/ 会/ 出现/ 编码/ 序号/ 小于/ 解码/ 序号/ 的/ 情况/ ,/ 此/ 情况/ 下该/ 数据包/ 无效/ ,/ 选择/ 丢弃/ ;/ ③/ 该/ 数据包/ 所/ 参考/ 数据包/ 中/ 是否/ 有/ 被/ 丢弃/ ,/ 参考/ 数据包/ 用/ 集合/ D/ (/ p/ )/ 表示/ ,/ 如果/ 有/ 则/ 表示/ 该/ 数据包/ 无法/ 正常/ 解码/ ,/ 选择/ 丢弃/ ./ 数据包/ 有效性/ 检验/ 可以/ 节省/ 缓存/ 开销/ 以及/ 不必要/ 的/ 程序执行/ 时间/ ,/ 如果/ 该/ 数据包/ 有效/ ,/ 则/ 进入/ PRRA/ 算法/ 的/ 第/ (/ 2/ )/ 步骤/ 缓存/ 接收/ ,/ 无效/ 则/ 进入/ 第/ (/ 3/ )/ 步骤/ 滑动/ 窗口/ 管理/ ./ (/ 2/ )/ 缓存/ 接收/ ./ 在/ 有效性/ 检验/ 完成/ 后/ ,/ 如果/ 该/ 数据包/ 还/ 未/ 被/ 丢弃/ 则/ 可以/ 将/ 其/ 存放/ 至/ 接收/ 缓存/ 中/ ,/ 首先/ 遍历/ 缓存/ 的/ 编码/ 序号/ ,/ 并/ 与/ pseq/ 比较/ ,/ 确定/ 该/ 数据包/ 到达/ 之前/ 是否/ 已有/ 同一/ 编码/ 序号/ 的/ 分段/ 已经/ 被/ 接收/ ,/ 根据/ 判断/ 结果/ 按/ 以下/ 两种/ 情况/ 处理/ :/ 情况/ 1/ ./ 未/ 收到/ 该/ 编码/ 序号/ 的/ 分段/ ,/ 将/ pseq/ 作为/ 主键/ 插入/ 接收/ 缓存/ 中/ ,/ 从/ p/ 的/ 自定义/ 报头/ 中/ 读取/ 所属/ NAL/ 单元/ 总长度/ 赋值/ 给/ 对应/ 的/ TotalSize/ ,/ 申请/ 长度/ 为/ TotalSize/ 的/ 内存空间/ ,/ 对/ Payload/ 初始化/ ,/ 然后/ 将/ p/ 按照/ 其/ 起始/ 位置/ 拷贝/ 至/ Payload/ 中/ ,/ 将/ psize/ 赋值/ 给/ 对应/ 的/ 已/ 接收/ 长度/ ReceivedSize/ ;/ 情况/ 2/ ./ 已/ 接收/ 该/ 编码/ 序号/ 的/ 分段/ ,/ 查找/ pseq/ 所/ 对应/ 的/ Payload/ ,/ 将/ 按照/ 其/ 起始/ 位置/ 拷贝/ 至/ Payload/ 中/ ,/ 对应/ 的/ ReceivedSize/ 增加/ psize/ ,/ 即/ ReceivedSize/ +/ =/ psize/ ./ 服务器/ 的/ PFDA/ 算法/ 并非/ 对/ 所有/ 数据包/ 都/ 进行/ 了/ 分段/ ,/ 上述/ 第一种/ 情况/ 可以/ 处理/ 所/ 接收/ 的/ 未/ 分段/ 数据包/ ./ 在/ 完成/ 缓存/ 接收/ 的/ 步骤/ 之后/ 进入/ 算法/ 的/ 最后/ 一步/ 滑动/ 窗口/ 管理/ ./ (/ 3/ )/ 缓存/ 窗口/ 自/ 适应/ 滑动/ ./ 为了/ 避免/ 对/ 单个/ 数据包/ 停止/ 等待/ 过/ 长时间/ ,/ 需要/ 对/ 接收/ 缓存/ 设置/ 随/ 时间/ 自/ 适应/ 向前/ 滑动/ 的/ 机制/ ,/ 将/ 接收/ 缓存/ 中/ 无效/ 的/ 数据包/ 及时/ 丢弃/ ,/ 将/ 有效/ 的/ 数据包/ 提交/ 给/ 解码器/ ,/ 即将/ 数据包/ 存入/ 接入/ 单元/ (/ accessunit/ )/ ./ 有关/ 接入/ 单元/ 的/ 详细/ 介绍/ 可/ 参考文献/ [/ 20/ -/ 21/ ]/ ./ 解码/ 序号/ 是/ 已/ 被/ 解码/ 的/ 数据包/ 的/ 最大/ 编码/ 序号/ ./ 滑动/ 窗口/ 管理/ 操作步骤/ 如下/ 所述/ :/ ①/ 以/ 解码/ 序号/ 作为/ 查询/ 条件/ (/ 即/ 主键/ )/ 从/ 数据包/ 接收/ 缓存/ 中/ 获取/ 对应/ 的/ 数据包/ 总长度/ 、/ 已/ 接收/ 长度/ 和/ 数据包/ 负荷/ ./ 下面/ 分/ 3/ 种/ 情况/ :/ 步骤/ ①/ ,/ 继续执行/ 循环/ ./ ③/ 将/ 该/ 数据包/ 从/ 缓存/ 中/ 删除/ ,/ 解码/ 序号/ 自/ 增长/ 1/ ,/ 返回/ PRRA/ 算法/ 伪/ 代码/ 如下/ ./ 算法/ 2/ ./ 数据包/ 接收/ 重组/ 算法/ PRRA/ ./ Initialize/ :/ LoopFlag/ ←/ true/ ;/ 1/ ./ IFtcur/ -/ pCT/ / pdorpseq/ / DecSeqTHEN2/ ./ DISCARD/ -/ PACKET/ (/ p/ )/ 3/ ./ ELSEFOREACHPacketpinD/ (/ p/ )/ 4/ ./ IFIS/ -/ DISCARDED/ (/ p/ )/ THEN5/ ./ DISCARD/ -/ PACKET/ (/ p/ )/ 6/ ./ ENDIF7/ ./ ENDFOR8/ ./ ENDIF9/ ./ IFIS/ -/ PACKET/ -/ RECEIVED/ (/ pseq/ )/ =/ =/ trueTHEN10/ ./ pb/ ←/ RETURN/ -/ BY/ -/ SEQNUM/ (/ B/ (/ p/ )/ ,/ pseq/ )/ 情况/ 1/ ./ 查询/ 结果/ 为空/ ,/ 表示/ 还/ 未/ 接收/ 到/ 该/ 序号/ 的/ 数据包/ 或/ 分段/ ,/ 根据/ 当前/ 时间/ 与/ 该/ 数据包/ 的/ 播放/ 时间/ 判断/ 是否/ 等待/ ./ 如果/ tcur/ </ DecSeq/ // δ/ +/ Δ/ 则/ 结束/ 循环/ 继续/ 等待/ 接收/ 下/ 一个/ 数据包/ ./ 如果/ tcur/ / DecSeq/ // δ/ +/ Δ/ 则/ 编码/ 序号/ 自/ 增长/ 1/ ,/ 进入/ 步骤/ ①/ ;/ 情况/ 2/ ./ 查询/ 结果/ 非空/ ,/ 表示/ 已/ 接收/ 到/ 该/ 序号/ 的/ 数据包/ 或/ 分段/ ,/ 在/ 当前/ 时间/ 与/ 数据包/ 产生/ 时间/ 之差/ 小于/ 解码/ 时间/ 的/ 情况/ 下/ ,/ 即当/ tcur/ -/ pCT/ </ pd/ 时/ 进入/ 步骤/ ②/ ;/ 情况/ 3/ ./ 查询/ 结果/ 非空/ ,/ 当/ tcur/ -/ pCT/ / pd/ 时/ 表示/ 该/ 数据包/ 已经/ 超过/ 解码/ 时间/ ,/ 进入/ 步骤/ ③/ ./ ②/ 判断/ 已/ 接收/ 长度/ 与/ 数据包/ 总长度/ 是否/ 相等/ ./ 如果/ 相等/ 则/ 将/ 该/ 数据包/ 存入/ 接入/ 单元/ ,/ 解码/ 序号/ 增加/ 1/ ,/ 返回/ 步骤/ ①/ ,/ 继续执行/ 循环/ ./ 如果/ 不/ 相等/ ,/ 结束/ 循环/ 等待/ 接收/ 下/ 一个/ 数据包/ ./ Page1011/ ./ pb/ ←/ COMBINE/ -/ PACKETS/ (/ pb/ ,/ p/ )/ 12/ ./ psize13/ ./ ELSEADD/ -/ PACKET/ (/ B/ (/ p/ )/ ,/ p/ )/ 14/ ./ ENDIF15/ ./ WHILELoopFlagDO16/ ./ ptemp/ ←/ RETURN/ -/ BY/ -/ SEQNUM/ (/ B/ (/ p/ )/ ,/ pseq/ )/ 17/ ./ IFptemp/ =/ =/ NILTHEN18/ ./ IFtcur/ </ DecSeq/ // δ/ +/ Δ/ THEN19/ ./ LoopFlag/ ←/ false20/ ./ ELSEDecSeq/ ←/ DecSeq/ +/ 121/ ./ ENDIF22/ ./ ELSEIFtcur/ -/ pCT23/ ./ IFIS/ -/ PACKET/ -/ INTACT/ (/ ptemp/ )/ THEN24/ ./ PROCESS/ -/ ACCESSUNIT/ (/ ptemp/ )/ 25/ ./ REMOVE/ -/ PACKET/ (/ B/ (/ p/ )/ ,/ ptemp/ )/ 26/ ./ DecSeq/ ←/ DecSeq/ +/ 127/ ./ ELSELoopFlag/ ←/ false28/ ./ ENDIF29/ ./ ELSEREMOVE/ -/ PACKET/ (/ B/ (/ p/ )/ ,/ ptemp/ )/ 30/ ./ DecSeq/ ←/ DecSeq/ +/ 131/ ./ ENDIF32/ ./ ENDIF33/ ./ ENDWHILE4/ 实验/ 及/ 结果/ 分析/ 4.1/ 实验/ 环境/ 及/ 实验/ 场景/ 本文/ 所/ 使用/ 的/ 实验/ 工具/ 及/ 相关/ 参数设置/ 如下/ 图/ 9/ 实验/ 场景/ 拓扑图/ 4.2/ 实验/ 结果/ 分析/ 本文/ 所/ 采用/ 的/ 三种/ 对比/ 方法/ 为/ :/ PFDA/ -/ PRRA/ 、/ EDPF/ 以及/ 带宽/ 整合/ 单/ 路径/ BASP/ (/ BandwidthAggregatedSinglePath/ )/ ./ 带宽/ 整合/ 单/ 路径/ 表示/ 整合/ 异构/ 无线网/ 带宽/ 的/ 最/ 理想/ 状态/ ./ 因此/ 对/ 上述/ 三种/ 方法/ 进行/ 对比/ ,/ 可/ 检验/ 本文/ 所/ 提出/ 的/ PFDA/ -/ PRRA/ 算法/ 的/ 整合/ 带宽/ 以及/ 减少/ 端到/ 端/ 单向/ 延迟/ 的/ 性能/ ./ 使用/ 的/ 指标/ 如下/ :/ (/ 1/ )/ 单向/ 延迟/ ./ 对于/ EDPF/ 和/ BASP/ ,/ 单向/ 延迟/ 所述/ :/ (/ 1/ )/ 视频/ 编解码器/ 使用/ H/ ./ 264/ // SVC/ 的/ 参考/ 软件/ JointScalableVideoModel/ (/ JSVM9/ ./ 12/ )/ ①/ ,/ 比特率/ 分别/ 使用/ 1Mbps/ 和/ 3Mbps/ ./ 使用/ 长度/ 为/ 300/ 帧/ 的/ 标准/ 视频/ 序列/ Foreman/ _/ cif/ 作为/ 编码/ YUV/ 文件/ ./ 主要/ 编码/ 参数/ 及其/ 设置/ 如表/ 4/ 所示/ ./ (/ 2/ )/ 网络/ 仿真/ 工具/ 使用/ QualNet/ ②/ ,/ 一种/ 功能强大/ 主流/ 的/ 网络/ 仿真器/ ./ 但是/ QualNet/ 的/ 应用层/ 协议/ 不/ 具有/ 视频/ 传输/ 功能/ ./ 因此/ 本文/ 将/ JSVM/ 的/ 代码/ 以/ 静态/ 链接库/ 的/ 形式/ 与/ QualNet/ 结合/ 并且/ 添加/ 视频/ 编解码/ 以及/ 传输/ 协议/ ./ 主要/ 参数设置/ 如表/ 5/ 所示/ ./ 实验/ 场景/ 如图/ 9/ 所示/ ./ 节点/ 移动/ 模型/ 发送/ 时间/ 间隔/ 等于/ 数据包/ 到达/ 客户端/ 时间/ 减去/ 数据包/ 产生/ 时间/ ./ 而/ PFDA/ -/ PRRA/ 需要/ 进行/ 分段/ 重组/ 操作/ ,/ 其/ 单向/ 延迟/ 等于/ 数据包/ 分段/ 全部/ 到达/ 客户端/ 并且/ 重组/ 完成/ 的/ 时间/ 减去/ 数据包/ 产生/ 时间/ ;/ (/ 2/ )/ 丢/ 包率/ ./ 该/ 丢/ 包率/ 是/ 指/ 在/ 给定/ 最大/ 延迟/ 上限/ 情况/ 下/ ,/ PRRA/ 算法/ 的/ 有效性/ 检验/ 步骤/ 中/ ,/ 超过/ 其/ ①/ ②/ Page11/ 解码/ 时间/ 的/ 数据包/ 会/ 被/ 丢弃/ ,/ 如果/ 该/ 数据包/ 被/ 用于/ 预测/ ,/ 所/ 预测/ 的/ 数据包/ 也/ 会/ 被/ 丢弃/ ;/ 围内/ 的/ 数据包/ 占/ 视频流/ 数据包/ 总量/ 百分比/ ;/ (/ 3/ )/ 延迟/ 累计/ 分布/ ./ 延迟/ 累计/ 分布/ 即/ 在/ 该/ 延迟/ 范/ (/ 4/ )/ 网络/ 开销/ ./ PFDA/ -/ PRRA/ 算法/ 在/ 应用层/ 对/ 数据包/ 进行/ 了/ 分段/ ,/ 因此/ 相对/ 于/ 另外/ 两种/ 方法/ 会/ 造成/ 额外/ 的/ 网络/ 开销/ ,/ 需要/ 对此/ 进行/ 定量分析/ ./ 单向/ 延迟/ ./ 2.1/ 节中/ 已经/ 给出/ 了/ 两种/ 不同/ 比特率/ 情况/ 下/ 数据包/ 长度/ 分布区/ 间/ 和/ 概率/ ,/ 为了/ 保证/ 采样/ 样本/ 充足/ ,/ 当/ 比特率/ 等于/ 1Mbps/ 时/ 采样/ 区间/ 为/ 0/ ~/ 15KB/ ,/ 而/ 比特率/ 等于/ 3Mbps/ 时/ 采样/ 区间/ 为/ 15/ ~/ 40KB/ ,/ 结果/ 如图/ 10/ 所示/ ./ 从图/ 10/ (/ a/ )/ 中/ 可以/ 看出/ ,/ 当/ 数据包/ 长度/ 较/ 小时/ ,/ PFDA/ -/ PRRA/ 的/ 延迟/ 要略/ 大图/ 10/ 单向/ 延迟/ 图/ 11/ 丢/ 包率/ ①/ 当/ 比特率/ 等于/ 1Mbps/ 时/ ,/ 最大/ 延迟/ 上限/ 等于/ 150ms/ 时/ 使用/ BASP/ 和/ PFDA/ -/ PRRA/ 的/ 丢/ 包率/ 分别/ 为/ 5.35/ %/ 和/ 5.69/ %/ ,/ 基本上/ 可以/ 达到/ 良好/ 服务质量/ 的/ 要求/ ,/ 此时/ EDPF/ 的/ 丢/ 包率/ 为/ 25.1/ %/ ,/ 无法/ 提供/ 良好/ 的/ 服务质量/ ./ 使用/ EDPF/ 只能/ 在/ 最大/ 延迟/ 上限/ 为/ 400ms/ 时/ 达到/ 可/ 接受/ 服务质量/ 的/ 要求/ ,/ 此时/ 于/ BASP/ ,/ 这/ 是因为/ 数据包/ 分段/ 时/ 自定义/ 报头/ 所/ 附加/ 的/ 长度/ 以及/ 网络/ 传输/ 随机因素/ 的/ 影响/ ./ 在/ 实验/ 结果/ 所取/ 的/ 测量/ 样本/ 中/ ,/ 两种/ 算法/ 的/ 延迟/ 十分/ 接近/ ,/ 该/ 趋势/ 在/ 图/ 10/ (/ b/ )/ 中/ 非常明显/ ,/ 其中/ 出现/ 了/ 个别差异/ 较大/ 的/ 情况/ (/ 例如/ 当/ 数据包/ 长度/ 等于/ 32515/ 字节/ 时/ ,/ BASP/ 的/ 延迟/ 为/ 355.6/ ms/ ,/ 而/ PFDA/ -/ PRRA/ 的/ 延迟/ 为/ 388.56/ ms/ )/ ./ 因此/ ,/ 可以/ 得出结论/ :/ PFDA/ -/ PRRA/ 在/ 减小/ 单向/ 延迟/ 方面/ 相对/ 于/ EDPF/ 的/ 优势/ 十分/ 明显/ ,/ 十分/ 接近/ 带宽/ 整合/ 的/ 理想/ 状态/ BASP/ ./ 丢/ 包率/ ./ 实验/ 结果/ 如图/ 11/ 所示/ ,/ 在/ 给定/ 延迟/ 上限/ 时/ ,/ 两种/ 比特率/ 情况/ 下/ PFDA/ -/ PRRA/ 与/ BASP/ 的/ 丢/ 包率/ 都/ 十分/ 接近/ ,/ 明显/ 低于/ EDPF/ ./ 从/ 该/ 实验/ 结果/ 中/ 可以/ 得出/ 以下/ 两个/ 结论/ :/ EDPF/ 的/ 丢/ 包率/ 为/ 1/ %/ ;/ ②/ 当/ 比特率/ 等于/ 3Mbps/ 时/ ,/ PFDA/ -/ PRRA/ 可以/ 满足用户/ 的/ 可/ 接受/ 服务质量/ ,/ 最大/ 延迟/ 上限/ 为/ 400ms/ 时/ 丢/ 包率/ 为/ 7.34/ %/ ,/ 而/ EDPF/ 的/ 丢/ 包率/ 为/ 29.8/ %/ ,/ 无法/ 达到/ 要求/ ./ 延迟/ 累计/ 分布/ ./ 实验/ 结果/ 如图/ 12/ 所示/ ,/ 当/ 比特/ Page12/ 率/ 等于/ 1Mbps/ 时/ ,/ BASP/ 和/ PFDA/ -/ PRRA/ 分别/ 有/ 98.1/ %/ 和/ 94.92/ %/ 的/ 数据包/ 单向/ 延迟/ 在/ 150ms/ 内/ ,/ 而/ 此时/ EDPF/ 仅为/ 91.57/ %/ ./ 当/ 比特率/ 等于/ 3Mbps/ 图/ 12/ 延迟/ 累计/ 分布/ 函数/ 网络/ 开销/ ./ 单向/ 延迟/ 和/ 给定/ 延迟/ 上限/ 时/ 的/ 丢/ 包率/ 证明/ 了/ PFDA/ -/ PRRA/ 减少/ 端到/ 端/ 单向/ 延迟/ 以及/ 带宽/ 整合/ 的/ 性能/ ,/ 但是/ 该/ 算法/ 减少/ 延迟/ 的/ 代价/ 是/ 增加/ 了/ 网络/ 开销/ (/ networkoverhead/ )/ ,/ 假设/ 一个/ 视频/ 数据包/ 长度/ 用/ Spkt/ 表示/ ,/ 在/ 网络/ 中所/ 占/ 的/ 总开销/ SNet/ 计算公式/ 如下/ 所示/ :/ SNet/ =/ Spkt/ +/ (/ σ/ f/ +/ σ/ p/ )/ +/ (/ Spkt/ // SMTU/ )/ ·/ (/ σ/ a/ +/ σ/ p/ )/ 上式/ 中/ σ/ f/ 表示/ 数据包/ 小于/ 最大/ 传输/ 单元/ 部分/ (/ 即/ 在/ 底层/ 网络/ 中/ 不/ 需要/ 进行/ 一步/ 拆分/ 的/ 部分/ )/ 的/ 开销/ ,/ σ/ a/ 表示/ 大于/ 最大/ 传输/ 单元/ 的/ 每/ 一个/ 拆分/ 部分/ 网络/ 开销/ ,/ σ/ p/ 表示/ 传输/ 路径/ 的/ 开销/ (/ 例如/ 每条/ 链路/ 的/ 报头/ 长度/ )/ ,/ SMTU/ 表示/ 最大/ 传输/ 单元/ 长度/ ,/ 如果/ 数据包/ 被/ 分成/ n/ 段/ ,/ 则/ 每个/ 分段/ 总开销/ 计算公式/ 如下/ :/ SiNet/ =/ Si/ 因此/ ,/ 单个/ 数据包/ 分段/ 后/ 的/ 额外/ 传输/ 量/ 可以/ 通过/ 以下/ 方程组/ 求/ 出/ :/ 方程/ 中/ 的/ Sheader/ 表示/ 分段/ 所/ 添加/ 自定义/ 报头/ 长度/ ,/ 上述/ 方程组/ 计算结果/ 为/ Sextra/ =/ n/ ·/ Sheader1/ +/ σ/ a/ +/ σ/ pS/ (/ )/ MTU/ +/ (/ n/ -/ 1/ )/ ·/ (/ σ/ f/ +/ σ/ p/ )/ 该/ 公式/ 中/ 最大/ 传输/ 单元/ 以及/ 开销/ 会因/ 网络/ 类型/ 时/ ,/ 使用/ BASP/ 和/ PFDA/ -/ PRRA/ 单向/ 延迟/ 在/ 400ms/ 内/ 的/ 数据包/ 占/ 99.5/ %/ 和/ 96.5/ %/ ,/ 而/ EDPF/ 只/ 占/ 89.9/ %/ ./ 以及/ 各层/ 协议/ 参数设置/ 不同/ 而/ 改变/ ./ 为了/ 将/ 问题/ 简化/ ,/ 本文/ 中/ 假设/ 所有/ 数据包/ 的/ σ/ f/ ,/ σ/ a/ 以及/ σ/ p/ 相等/ ./ 被/ 分段/ 数据包/ 的/ 数量/ 用/ 符号/ Npkt/ 表示/ ,/ 总/ 的/ 额外/ 网络/ 开销/ 近似/ 等于/ ∑/ NpktSiextra/ ≈/ Npkt/ ·/ n/ ·/ Sheader1/ +/ σ/ a/ +/ σ/ pS/ (/ )/ MTU/ +/ (/ n/ -/ 1/ )/ ·/ (/ σ/ f/ +/ σ/ pi/ =/ 1/ 本文/ 实验/ 中/ ,/ 在/ 比特率/ 分别/ 等于/ 1Mbps/ 和/ 3Mbps/ 的/ 情况/ 下/ ,/ 总/ 的/ 额外/ 开销/ 分别/ 近似/ 等于/ 97000/ 字节/ 和/ 105000/ 字节/ ,/ 分别/ 占/ 各自/ 视频/ 数据流/ 总长度/ 的/ 6.51/ %/ 和/ 2.56/ %/ ./ 4.3/ 算法/ 复杂度/ 分析/ PFDA/ -/ PRRA/ 算法/ 复杂度/ 等于/ PFDA/ 与/ PRRA/ 复杂度/ 之/ 和/ ./ 下面/ 对/ 两种/ 算法/ 做出/ 复杂度/ 分析/ :/ (/ 1/ )/ PFDA/ 算法/ 中/ 选择性/ 丢包/ 步骤/ 需要/ 首先/ 按照/ 权重/ 对/ 所有/ 数据包/ 排序/ ,/ 然后/ 执行/ 丢包/ 步骤/ ,/ 该/ 过程/ 时间/ 复杂度/ 表达式/ 为/ 其中/ NDiscard/ 表示/ 丢弃/ 数据包/ 的/ 数量/ ./ 解码/ 时间/ 计算/ 的/ 循环/ 步骤/ 与/ 数据包/ 分段/ 发送/ 一起/ 执行/ ./ 因此/ 上述/ 两/ 步骤/ 的/ 复杂度/ 等于/ 数据包/ 分段/ 发送/ 的/ 复杂度/ ,/ 该/ 步骤/ 首先/ 需要/ 对/ 选择性/ 丢/ 包后/ 剩余/ 的/ 数据包/ 按照/ 编码/ 序号/ 排序/ ,/ 复杂度/ 为/ PFDA/ =/ (/ NA/ (/ p/ )/ -/ NDiscard/ )/ ·/ (/ NA/ (/ p/ )/ -/ NDiscard/ -/ 1/ )/ ./ T2/ 之后/ 进入/ 循环/ 阶段/ ,/ 对/ 数据包/ 逐个/ 计算/ 解码/ 时间/ ,/ 然后/ 根据/ 类型/ 判断/ 执行/ 分段/ 多路径/ 传输/ 或者/ 不/ Page13/ 分段/ 直接/ 单/ 路径/ 传输/ ,/ 时间/ 复杂度/ 为/ T3/ 因此/ PFDA/ 算法/ 总/ 时间/ 复杂度/ 为/ TPFDA/ =/ T1/ 最坏/ 情况/ 是/ 当/ NDiscard/ =/ 0/ 并且/ Npkt/ =/ NA/ (/ p/ )/ 时/ ./ 该/ 情况/ 下/ PFDA/ 的/ 复杂度/ 为/ (/ 2/ )/ PRRA/ 算法/ 中/ 数据包/ 有效性/ 检验/ 步骤/ 需要/ 对/ 接收/ 数据包/ 的/ 所有/ 参考/ 帧/ 进行/ 搜索/ ,/ 复杂度/ 表达式/ 为/ 在/ 缓存/ 接收/ 步骤/ 中/ ,/ 按/ 序号/ 搜索/ 并/ 返回/ 是否/ 有/ 已/ 接收/ 的/ 数据包/ 分段/ ./ 复杂度/ 表达式/ 如下/ :/ 缓存/ 窗口/ 自/ 适应/ 滑动/ 复杂度/ 为/ 其中/ NDec/ 表示/ 解码/ 序号/ 向前/ 滑动/ 的/ 次数/ ./ 因此/ PRRA/ 算法/ 的/ 总/ 时间/ 复杂度/ 为/ 下/ 算法/ 复杂度/ 为/ O/ (/ TPFDA/ )/ =/ (/ NB/ (/ p/ )/ )/ 2/ ./ 最坏/ 情况/ 为/ 当/ ND/ (/ p/ )/ =/ NDec/ =/ NB/ (/ p/ )/ 时/ ./ 该/ 情况/ 因此/ ,/ PFDA/ -/ PRRA/ 复杂度/ 的/ 最坏/ 情况/ 为/ 5/ 总结/ 及/ 进一步/ 工作/ 本文/ 提出/ 了/ 一种/ 异构/ 无线网/ 环境/ 下/ 移动/ 多媒体/ 会议/ 端到/ 端/ 服务质量/ 保障/ 方法/ ./ 该/ 方法/ 针对/ 多媒体/ 视频/ 的/ 传输/ 单向/ 延迟/ 问题/ ,/ 将/ 数据包/ 分段/ 重组/ 与/ 异构/ 无线网/ 路径/ 分/ 集/ 传输/ 相结合/ ,/ 在/ 考虑/ 带宽/ 、/ 延迟/ 、/ 长度/ 以及/ 权重/ 等/ 多种/ 参数/ 情况/ 下/ 对/ 数据包/ 进行/ 分段/ 并/ 发送/ ,/ 各/ 分段/ 经/ 路径/ 分/ 集/ 传输/ 后/ 到达/ 客户端/ ,/ 进行/ 有效性/ 检验/ 和/ 重组/ ./ 仿真/ 实验/ 验证/ 了/ 该/ 方法/ 能/ 有效/ 整合/ 异构/ 无线网/ 带宽/ ,/ 减少/ 视频流/ 传输/ 的/ 单向/ 延迟/ ./ 今后/ 我们/ 将/ 针对/ 信道/ 误码/ 、/ 丢包/ 、/ 带宽/ 波动/ 以及/ 数据包/ 乱序/ [/ 22/ ]/ 等/ 问题/ 做/ 进一步/ 研究/ ./ 

