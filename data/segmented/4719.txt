Page1/ 大/ 数据/ 环境/ 下/ 支持/ 概率/ 数据/ 范围/ 查询/ 索引/ 的/ 研究/ 朱睿/ 王斌/ 杨晓春/ 王国/ 仁/ (/ 东北大学/ 信息科学/ 与/ 工程学院/ 沈阳/ 110004/ )/ 摘要/ 随着/ 数据/ 规模/ 的/ 不断/ 增长/ ,/ 大/ 数据管理/ 具有/ 重要/ 意义/ ./ 在/ 众多/ 数学模型/ 中/ ,/ 因为/ 概率模型/ 可以/ 将/ 海量/ 数据抽象/ 成/ 少量/ 概率/ 数据/ ,/ 所以/ 它/ 非常适合/ 管理/ 大/ 数据/ ./ 因此/ ,/ 研究/ 大/ 数据/ 环境/ 下/ 的/ 概率/ 数据管理/ 具有/ 重要/ 意义/ ./ 作为/ 一种/ 经典/ 查询/ ,/ 基于/ 概率/ 数据/ 的/ 范围/ 查询/ 已/ 被/ 深入研究/ ./ 然而/ ,/ 当前/ 研究成果/ 不/ 适合/ 在/ 大/ 数据/ 环境/ 下/ 使用/ ./ 其/ 根本原因/ 是/ 这些/ 索引/ 的/ 更新/ 代价/ 较大/ ./ 该文/ 提出/ 了/ 索引/ HGD/ -/ Tree/ 解决/ 这一/ 问题/ ./ 首先/ ,/ 该文/ 提出/ 了/ 一系列/ 算法/ 降低/ 新增/ 数据/ 的/ 处理/ 代价/ ./ 它/ 可以/ 保证/ 树结构/ 平衡/ 的/ 前提/ 下/ 快速/ 地/ 执行/ 插入/ 、/ 删除/ 、/ 更新/ 等/ 操作/ ./ 其次/ ,/ 该文/ 提出/ 了/ 一种/ 基于/ 划分/ 的/ 方法/ 构建/ 概率/ 对象/ 的/ 概要/ 信息/ ./ 它/ 可以/ 根据/ 概率密度函数/ 的/ 特点/ 自/ 适应/ 地/ 执行/ 划分/ ./ 此外/ ,/ 由于/ 作者/ 提出/ 的/ 概要/ 是/ 基于/ 比特/ 向量/ ,/ 上述/ 策略/ 可以/ 保证/ 索引/ 以较/ 低/ 空间/ 代价/ 管理/ 概率/ 数据/ ./ 最后/ ,/ 该文/ 提出/ 了/ 一种/ 基于/ 位/ 运算/ 的/ 方法/ 访问/ HGD/ -/ Tree/ ./ 它/ 可以/ 用/ 少量/ 的/ 位/ 运算/ 执行/ 过滤/ 操作/ ./ 大量/ 的/ 实验/ 验证/ 了/ 算法/ 的/ 有效性/ ./ 关键词/ 大/ 数据/ ;/ 概率/ 数据/ ;/ 索引/ ;/ 概率/ 概要/ 信息/ ;/ 多/ 分辨率/ 网格/ 1/ 引言/ 由大/ 数据/ 的/ 3V/ 模型/ 可知/ ,/ 高效/ 管理/ 大/ 数据/ 面临/ 两大/ 挑战/ :/ (/ 1/ )/ 数据/ 的/ 高效/ 存储/ ;/ (/ 2/ )/ 事件/ 的/ 快速/ 响应/ ./ 例如/ ,/ 在/ 环境监测/ 系统/ 中/ ,/ 通常/ 有/ MB/ 规模/ 的/ 传感器/ 实时/ 向/ 服务器/ 上报/ 监测数据/ ./ 假设/ 传感器/ 每隔/ 5s/ 向/ 服务器/ 上报/ 一次/ 数据/ ,/ 并且/ 每条/ 数据/ 的/ 净荷/ 只有/ 10Byte/ ,/ 那么/ 服务器/ 每周/ 将/ 为/ 这些/ 数据/ 分配/ 约/ 1TB/ 的/ 存储空间/ ./ 由于/ 环境监测/ 系统/ 需要/ 长年累月/ 地/ 在/ 多个/ 区域/ 收集/ 数据/ ,/ 存储/ 这些/ 数据/ 需要/ 耗费/ 高昂/ 的/ 代价/ ./ 此外/ ,/ 服务器/ 如果/ 需要/ 针对/ 新增/ 数据/ 做/ 实时/ 计算/ ,/ 计算/ 代价/ 也/ 是/ 十分/ 巨大/ 的/ ./ 当/ 增量/ 算法/ 的/ 时间/ 复杂度/ 高于/ 亚/ 线性/ 级别/ (/ 例如/ :/ O/ (/ n2/ )/ )/ 时/ ,/ 系统/ 的/ 实时性/ 要求/ 将/ 很/ 难/ 得到/ 满足/ ./ 综上所述/ ,/ 在/ 大/ 数据/ 背景/ 下/ ,/ 高效/ 处理/ 大/ 数据/ 面临/ 巨大/ 的/ 挑战/ ./ 在/ 众多/ 数学模型/ 中/ ,/ 概率模型/ 可以/ 有效/ 解决/ 大/ 数据管理/ 面临/ 的/ 两大/ 挑战/ ./ 它/ 可以/ 根据/ 实际/ 应用/ 对/ 数据/ 精度/ 的/ 要求/ 自/ 适应/ 地/ 将/ 多条/ 数据抽象/ 成/ 一条/ 概率/ 数据/ [/ 1/ ]/ o/ 〈/ opdf/ ,/ or/ 〉/ ./ 其中/ ,/ opdf/ 表示/ 概率密度函数/ ①/ ;/ or/ 表示/ o/ 可能/ 出现/ 的/ 区域/ ./ 例如/ :/ 在/ 图/ 1/ 中/ ,/ 每个/ 带/ 阴影/ 的/ 矩形/ 代表/ 一个/ 概率/ 对象/ ;/ 矩形/ 的/ 边界/ 刻画/ 了/ 概率/ 对象/ 可能/ 出现/ 的/ 范围/ ./ 显然/ ,/ 通过/ 使用/ 概率模型/ ,/ 数据/ 规模/ 可以/ 有效/ 被/ 降低/ ./ 相应/ 地/ ,/ 以上/ 两大/ 难题/ 也/ 都/ 迎刃而解/ ./ 因此/ ,/ 在/ 大/ 数据/ 环境/ 下/ 研究/ 概率/ 数据管理/ 具有/ 重要/ 的/ 理论/ 和/ 应用/ 价值/ ./ 本文/ 研究/ 基于/ 概率/ 数据/ 的/ 范围/ 查询/ (/ 简称/ :/ 查询/ )/ ./ 给定/ 查询/ q/ 〈/ qr/ ,/ q/ θ/ 围/ qr/ 中/ 概率/ 大于/ 阈值/ q/ θ/ 比/ ,/ 该/ 查询/ 一方面/ 直接/ 返回/ 包含/ 在/ qr/ 中/ 的/ 对象/ (/ 图/ 1/ 中/ 的/ 对象/ o1/ )/ ,/ 另一方面/ 验证/ 与/ qr/ 相交/ 的/ 对象/ (/ 图/ 1/ 中/ 的/ o2/ 和/ o3/ )/ 是否/ 满足/ 概率/ 阈值/ 的/ 要求/ 并/ 返回/ 满足要求/ 的/ 对象/ ./ 鉴于/ 验证/ 操作/ 需要/ 耗费/ 大量/ 的/ 计算/ 代价/ ,/ 以往/ 算法/ 的/ 研究/ 焦点/ 大多/ 集中/ 在/ 寻找/ 行之有效/ 的/ 概率/ 剪枝/ 策略/ 过滤/ 待/ 验证/ 对象/ 从而/ 降低/ 验证/ 规模/ [/ 2/ -/ 4/ ]/ ./ 它们/ 通常/ 的/ 做法/ 是/ 抽取/ 对象/ 概率密度函数/ 的/ 概要/ 信息/ (/ 记作/ SUM/ )/ 并用/ 传统/ 的/ 索引/ 结构/ 管理/ 这些/ SUM/ ./ 给定/ 查询/ q/ 和/ 索引/ 相交/ 的/ 概率/ 对象/ ./ 接下来/ ,/ 算法/ 根据/ 对象/ 的/ SUM/ 计算/ 它们/ 包含/ 于/ qr/ 的/ 概率/ 上界/ 和/ 下界/ ./ 如果/ 概率/ 上/ 界/ 小于/ q/ θ/ 否则/ ,/ 对象/ 仍/ 需/ 被/ 验证/ ./ 在/ 众多/ 研究成果/ 中/ ,/ Tao/ 等/ 人/ [/ 1/ ]/ 提出/ 基于/ PCR/ (/ 概率/ 限定/ 区域/ )/ 的/ SUM/ ./ 具体/ 地/ ,/ 他们/ 为/ 每个/ 对象/ 构建/ 一组/ PCR/ 并/ 将/ 这些/ PCR/ 当作/ 对象/ 的/ SUM/ ./ 近/ 一步/ ,/ 他们/ 提出/ U/ -/ Tree/ 管理/ 这些/ PCR/ ./ 实验/ 证明/ :/ 该/ 索引/ 可以/ 有效/ 降低/ 对象/ 验证/ 规模/ ./ 然而/ ,/ 它/ 存在/ 两大/ 问题/ :/ (/ 1/ )/ 剪枝/ 能力/ 弱/ [/ 5/ -/ 7/ ]/ ./ 该/ 问题/ 导致/ 查询/ 算法/ 浪费/ 大量/ 的/ 计算/ 代价/ 执行/ 验证/ 操作/ ;/ (/ 2/ )/ 更新/ 能力/ 弱/ ./ 由/ 文献/ [/ 1/ ]/ 可知/ ,/ U/ -/ Tree/ 管理/ 的/ PCR/ 规模/ 是/ 对象/ 规模/ 的/ m/ 倍/ (/ m/ 表示/ 单个/ 对象/ 对应/ 的/ PCR/ 个数/ )/ ./ 当/ 更新/ 发生/ 时/ ,/ U/ -/ Tree/ 的/ 更新/ 代价/ 也/ 是/ R/ -/ Tree/ 的/ O/ (/ m/ )/ 倍/ ./ 显然/ ,/ 该/ 索引/ 不适/ 用于/ 管理/ 更新/ 频繁/ 的/ 数据/ ./ Zhang/ 等/ 人/ [/ 5/ -/ 7/ ]/ 提出/ 了/ 基于/ 对象/ 区域/ 划分/ 的/ SUM/ ./ 近/ 一步/ ,/ 他们/ 使用/ R/ -/ Tree/ 、/ quad/ -/ tree/ 等/ 索引/ 管理/ 这些/ 划分/ ./ 此类/ 索引/ 的/ 概率/ 剪枝/ 能力/ 强于/ U/ -/ Tree/ ./ 但是/ ,/ 它/ 的/ 更新/ 代价/ 仍然/ 是/ R/ -/ Tree/ 等/ 传统/ 索引/ 的/ 数倍/ ./ 除此之外/ ,/ 基于/ 划分/ 构建/ 的/ SUM/ 需要/ 消耗/ 大量/ 的/ 存储/ 代价/ ./ 当/ 数据/ 规模/ 大时/ ,/ 此类/ 索引/ 的/ 空间/ 代价/ 也/ 是/ 难以/ 接受/ 的/ ./ 综上所述/ ,/ 由于/ 大/ 数据/ 对/ 索引/ 性能/ 有着/ 较/ 高/ 的/ 要求/ ,/ 上述/ 索引/ 均/ 无法/ 支持/ 大/ 数据/ 环境/ 下/ 的/ 概率/ 数据/ 范围/ 查询/ ./ 本文/ 提出/ HGD/ -/ Tree/ (/ HybridGridDensityTree/ )/ 管理/ 大/ 数据/ 环境/ 下/ 的/ 概率/ 数据/ ./ 为了/ 克服/ 上述/ 索引/ 存在/ 的/ 不足/ ,/ HGD/ -/ Tree/ 需要/ 面对/ 以下/ 挑战/ :/ (/ 1/ )/ 快速/ 更新/ ./ 因为/ SUM/ 的/ 数据结构/ 相对/ 复杂/ ,/ 以/ SUM/ 为/ 基础/ 构建/ 的/ 索引/ 通常/ 需要/ 消耗/ 较/ 高/ 更新/ 代价/ (/ 插入/ // 删除/ // 调整/ 平衡/ )/ ./ 因此/ ,/ 如何/ 在/ 数据/ 更新/ 频繁/ 的/ 条件/ 支持/ 索引/ 的/ 快速/ 更新/ 是/ 极具/ 挑战/ 的/ ./ (/ 2/ )/ 空间/ 代价/ 小且/ 剪枝/ 能力/ 强/ 的/ SUM/ ./ 由于/ 数/ ①/ 通常/ 情况/ 下/ ,/ opdf/ 存在/ 两种/ 表示/ 方法/ :/ 连续型/ 和/ 离散/ 型/ ./ 其/ Page3/ 据/ 更新/ 频繁/ ,/ 对象/ 的/ SUM/ 需要/ 快速/ 构建/ ./ 因此/ ,/ 在/ 较/ 短时间/ 内/ 找到/ 空间/ 代价/ 低且/ 能/ 准确/ 表达/ 对象/ 概率密度/ 分布/ 特征/ 的/ SUM/ 是/ 非常/ 困难/ 的/ ./ 针对/ 上述/ 问题/ 和/ 挑战/ ,/ 本文/ 首先/ 做出/ 大量/ 研究/ ./ 在/ 此基础/ 上/ ,/ 本文/ 提出/ 多个/ 巧妙/ 算法/ 应对/ 上述/ 挑战/ ./ 具体/ 贡献/ 如下/ :/ (/ 1/ )/ 提出/ HGD/ -/ Tree/ 管理/ 概率/ 数据/ ./ HGD/ -/ Tree/ 是/ 一种/ 基于/ 多/ 分辨率/ 网格/ 的/ 索引/ ./ 该/ 索引/ 同时/ 具备/ 以下/ 优点/ :/ ①/ 快速/ 的/ 更新/ 能力/ ./ 众所周知/ ,/ 网格/ 结构/ 是/ 以/ 空间/ 划分/ 为/ 基础/ 管理/ 数据/ ./ 当有/ 数据/ 插入/ 时/ ,/ 索引/ 可以/ 快速/ 定位/ 插入/ 位置/ ./ 因此/ ,/ 基于/ 网格/ 的/ 索引/ 结构/ 具有/ 较强/ 的/ 动态/ 更新/ 能力/ ;/ ②/ 相对/ 平衡/ 的/ 结构/ ./ 通过/ 对/ 传统/ 的/ 多/ 分辨率/ 网格/ 进行/ 改进/ ,/ HGD/ -/ Tree/ 用/ 分辨率/ 较/ 高/ 网格/ 划分/ 数据/ 密集/ 的/ 区域/ ;/ 用/ 分辨率/ 较/ 低/ 网格/ 划分/ 数据/ 稀疏/ 的/ 区域/ ./ 它/ 可以/ 保证/ 索引/ 各/ 节点/ 维护/ 的/ 对象/ 数目/ 大致相同/ 从而/ 保证/ 了/ 索引/ 的/ 平衡性/ ./ 为了/ 近/ 一步/ 降低/ HGD/ -/ Tree/ 的/ 更新/ 代价/ ,/ 本文/ 提出/ 一种/ 批量/ 更新/ 算法/ ./ 该/ 算法/ 通过/ 一些/ 事件/ 触发/ 机制/ 自/ 适应/ 地/ 对/ HGD/ -/ Tree/ 进行/ 维护/ ./ 基于/ 上述/ 算法/ ,/ 索引/ 的/ 更新/ 能力/ 得到/ 近/ 一步/ 的/ 提升/ ./ (/ 2/ )/ 自/ 适应/ 的/ SUM/ 构建/ 算法/ ./ 自适应性/ 在/ 以下/ 方面/ 得以/ 体现/ :/ ①/ 自/ 适应/ 于/ 概率密度/ 分布/ ./ 在/ 构建/ 对象/ SUM/ 的/ 过程/ 中/ ,/ 本文/ 通过/ 挖掘/ 对象/ 概率密度/ 变化/ 的/ 特征/ ,/ 找出/ 一种/ 新/ 的/ SUM/ 构建/ 算法/ ./ 该/ 算法/ 可以/ 保证/ 在/ 较/ 短时间/ 内为/ 对象/ 构建/ 过滤/ 能力/ 更/ 强且/ 空间/ 代价/ 小/ 的/ SUM/ ;/ ②/ 自/ 适应/ 于/ 查询/ 热点/ ./ 在/ 大/ 数据/ 环境/ 下/ ,/ 由于/ 数据/ 更新/ 频繁/ 且/ 计算资源/ 有限/ ,/ 以/ 不计成本/ 的/ 方式/ 构建/ 对象/ SUM/ 是/ 不/ 可行/ 的/ ./ 本文/ 提出/ 基于/ 区域/ 热度/ 的/ 代价/ 模型/ ./ 该/ 模型/ 区别对待/ 处于/ 热点/ 区域/ 和/ 非/ 热点/ 区域/ 内/ 的/ 对象/ 从而/ 找到/ 最优/ 的/ SUM/ 构建/ 策略/ ./ (/ 3/ )/ 基于/ bit/ 向量/ 的/ SUM/ 存储/ // 访问/ 算法/ ./ 根据/ 概率/ 数据/ 的/ 特点/ ,/ 本文/ 提出/ 了/ 一种/ 基于/ bit/ 向量/ 的/ SUM/ 存储/ // 访问/ 算法/ ./ 由于/ bit/ 向量/ 可以/ 高效/ 利用/ 计算资源/ 和/ 存储资源/ ,/ HGD/ -/ Tree/ 不仅/ 可以/ 近/ 一步/ 提高/ 查询/ 效率/ 而且/ 可以/ 节省/ 空间/ ./ 本文/ 第/ 2/ 节/ 概述/ 相关/ 工作/ ;/ 第/ 3/ 节/ 介绍/ 问题/ 定义/ ;/ 第/ 4/ 节/ 详细/ 介绍/ HGD/ -/ Tree/ 的/ 工作/ 原理/ ;/ 第/ 5/ 节对/ 所/ 提/ 方法/ 的/ 有效性/ 进行/ 实验/ 分析/ ;/ 第/ 6/ 节对/ 全文/ 进行/ 总结/ ./ 2/ 相关/ 工作/ 本节/ 的/ 主要/ 内容/ 是/ 对/ 国内外/ 关于/ 概率/ 数据/ 范围/ 查询/ 的/ 相关/ 工作/ 进行/ 概述/ ./ 在/ 介绍/ 这些/ 工作/ 之前/ ,/ 本文/ 首先/ 通过/ 表/ 1/ 定义/ 一组/ 符号/ ./ 符号/ ooropdfapp/ (/ oi/ )/ ub/ (/ o/ ,/ q/ )/ lb/ (/ o/ ,/ q/ )/ 由于/ 数据/ 存在/ 着/ 不确定性/ ,/ 不/ 确定/ 数据管理/ 近年来/ 得到/ 广泛/ 关注/ [/ 8/ -/ 12/ ]/ ./ 与/ 传统/ 数据管理/ 相比/ ,/ 因为/ 不/ 确定/ 数据/ 是/ 以/ 区域/ 的/ 形式/ 存在/ ,/ 所以/ 传统/ 多维/ 索引/ 已/ 不再/ 适合/ 管理/ 不/ 确定/ 数据/ ./ 因此/ ,/ 研究/ 人员/ 对/ 传统/ 索引/ 进行/ 适当/ 的/ 改造/ ,/ 提出/ 了/ 一系列/ 经典/ 方法/ 管理/ 概率/ 数据/ ./ 多维/ 数据管理/ 一直/ 以来/ 都/ 是/ 数据库/ 领域/ 的/ 研究/ 热点/ ./ 以/ BD/ -/ Tree/ [/ 13/ ]/ 、/ BBD/ -/ Tree/ [/ 14/ ]/ 、/ BV/ -/ Tree/ [/ 15/ ]/ 等/ 为/ 代表/ 的/ 基于/ 空间/ 划分/ 建立/ 索引/ ;/ 以/ R/ -/ Tree/ [/ 16/ -/ 17/ ]/ 、/ X/ -/ Tree/ [/ 18/ -/ 19/ ]/ 、/ M/ -/ Tree/ [/ 20/ ]/ 、/ SS/ -/ Tree/ [/ 21/ ]/ 等/ 为/ 代表/ 的/ 基于/ 度量/ 空间/ 建立/ 的/ 索引/ 都/ 在/ 多维/ 数据管理/ 领域/ 占有/ 重要/ 地位/ ./ 目前为止/ ,/ 主流/ 的/ 索引/ 包括/ 基于/ PCR/ 的/ 索引/ 和/ 基于/ 划分/ 的/ 索引/ ./ 基于/ PCR/ 的/ 索引/ ./ Tao/ 等/ 人/ [/ 1/ ]/ 提出/ 基于/ PCR/ 的/ 索引/ 管理/ 概率/ 对象/ ./ 给定/ 任意/ 对象/ o/ ,/ 它/ 的/ PCR/ 是/ 根据/ or/ 和/ 特定/ 概率/ 阈值/ 经/ 收缩/ 得到/ 的/ 矩形/ ./ 为了/ 处理/ 带/ 不同/ 阈值/ 的/ 查询/ ,/ Tao/ 等/ 人/ 预先/ 为/ 每个/ 对象/ 构建/ 一组/ PCR/ ,/ 并/ 以此/ 作为/ 概率/ 对象/ 的/ SUM/ ./ 近/ 一步/ ,/ 他们/ 提出/ U/ -/ Tree/ (/ 其本质/ 是/ 一组/ R/ -/ Tree/ )/ 管理/ PCR/ ./ U/ -/ Tree/ 主要/ 存在/ 两个/ 问题/ :/ (/ 1/ )/ 过滤/ 能力/ 弱/ ./ 如/ 文献/ [/ 5/ -/ 7/ ]/ 所示/ ,/ 基于/ PCR/ 的/ SUM/ 无法/ 为/ 概率/ 对象/ 提供/ 紧凑/ 的/ 概率/ 边界/ ;/ (/ 2/ )/ 动态/ 更新/ 能力/ 弱/ ./ U/ -/ Tree/ 需要/ 分配/ 多个/ R/ -/ Tree/ 管理/ 基于/ 不同/ 阈值/ 得到/ 的/ PCR/ ./ 当有/ 更新/ 发生/ 时/ ,/ 算法/ 需要/ 同时/ 维护/ 多个/ R/ -/ Tree/ ./ 显然/ ,/ U/ -/ Tree/ 的/ 更新/ 代价/ 远高于/ R/ -/ Tree/ ./ 基于/ 划分/ 的/ 索引/ ./ Zhang/ 等/ 人/ [/ 5/ -/ 7/ ]/ 提出/ 了/ 基于/ 区域/ 划分/ 的/ 索引/ 管理/ 概率/ 对象/ ./ 这类/ 索引/ (/ UI/ -/ Tree/ 和/ UD/ -/ Tree/ )/ 将/ 对象/ 区域/ 的/ 划分/ 当做/ SUM/ ./ 给定/ 对象/ o/ ,/ 查询/ 算法/ 根据/ 查询/ 区域/ qr/ 与/ or/ 各子/ 区域/ oi/ ./ r/ 的/ 拓扑/ 信息/ 进行/ 概率/ 剪枝/ ./ 具体/ 地/ ,/ 如果/ oi/ ./ r/ ∧/ qr/ ≠/ / 且/ oi/ ./ r/ / qr/ ,/ ub/ (/ o/ ,/ q/ )/ +/ =/ app/ (/ oi/ )/ ;/ 如果/ oi/ ./ r/ / qr/ ,/ ub/ (/ o/ ,/ q/ )/ +/ =/ app/ (/ oi/ )/ 且/ lb/ (/ o/ ,/ q/ )/ +/ =/ app/ (/ oi/ )/ ./ 当/ 查询/ 算法/ 遍历/ or/ 各子/ 区域/ 后/ ,/ 当且/ 仅/ 当/ lb/ (/ o/ ,/ q/ )/ </ q/ θ/ </ ub/ (/ o/ ,/ q/ )/ ,/ o/ 需要/ 被/ 验证/ ./ 实验/ 结果表明/ ,/ 基于/ 划分/ 得到/ 的/ SUM/ 比/ 基于/ PCR/ 得到/ 的/ SUM/ 具备/ 更强/ 的/ 过/ Page4/ 滤/ 能力/ ./ 然而/ ,/ 该/ 索引/ 存在/ 以下/ 问题/ :/ (/ 1/ )/ 空间/ 代价/ 大/ ./ 由于/ 划分/ 没有/ 迎合/ 对象/ 概率密度/ 分布/ 的/ 特征/ ,/ 当/ 分布/ 倾斜/ 时/ ,/ 此类/ 索引/ 的/ SUM/ 需要/ 消耗/ 大量/ 的/ 空间/ 代价/ ;/ (/ 2/ )/ 更新/ 能力差/ ./ 因为/ 这/ 类/ 索引/ 需要/ 管理/ 所有/ 对象/ 的/ 多个/ 子/ 区域/ ,/ 其/ 管理/ 规模/ 远大于/ 对象/ 规模/ ,/ 所以/ 此类/ 索引/ 也/ 需/ 花费/ 较大/ 的/ 更新/ 代价/ ./ 其他/ 索引/ ./ Aggarwal/ 等/ 人/ [/ 2/ ]/ 研究/ 了/ 高维/ 不/ 确定/ 对象/ 的/ 索引/ ./ 因为/ 该/ 索引/ 只能/ 在/ 对象/ 概率密度函数/ 呈/ 无关/ 分布/ 时/ 使用/ ,/ 所以/ 它/ 存在/ 一定/ 的/ 局限性/ ./ Agarwal/ 等/ 人/ [/ 3/ ]/ 使用/ 线段/ 树/ 管理/ 概率/ 对象/ ./ 该/ 索引/ 也/ 存在/ 动态/ 更新/ 能力/ 弱/ 等/ 问题/ ./ Kalashnikov/ 等/ 人/ [/ 4/ ]/ 利用/ 网格/ 管理/ [/ 22/ -/ 24/ ]/ 概率/ 对象/ ./ 该/ 索引/ 存在/ 的/ 问题/ 是/ 无法/ 处理/ 数据/ 倾斜/ 面临/ 的/ 问题/ ./ Zhu/ 等/ 人/ [/ 25/ ]/ 提出/ 了/ R/ -/ MRST/ 索引/ 不/ 确定/ 对象/ ./ 他们/ 研究/ 了/ 当/ 概率密度函数/ 呈/ 连续/ 时/ 的/ SUM/ 构建/ ./ 然而/ ,/ 在/ 大/ 数据/ 环境/ 下/ ,/ 新增/ 数据/ 的/ 分布/ 很难/ 快速/ 拟合/ ./ 因此/ ,/ 该/ 算法/ 不适/ 用于/ 管理/ 更新/ 频繁/ 的/ 概率/ 数据/ ./ Angiulli/ 等/ 人/ [/ 26/ ]/ 在/ 度量/ 空间/ 上/ 提出/ 基于/ “/ 轴/ ”/ 的/ 索引/ 管理/ 不/ 确定/ 对象/ ./ 该/ 索引/ 利用/ 度量/ 空间/ 上/ 的/ 剪枝/ 策略/ 过滤/ 概率/ 对象/ ./ 它/ 的/ 问题/ 是/ 空间/ 代价/ 远远/ 大于/ 其他/ 索引/ ./ 3/ 问题/ 定义/ 多维/ 概率/ 对象/ :/ 给定/ d/ 维空间/ 下/ 的/ 概率/ 对象/ (/ 简称/ 对象/ )/ o/ ,/ 它/ 可以/ 用/ 两种/ 方法/ 进行/ 描述/ ./ 第/ 1/ 种/ 方法/ 是/ 将/ 概率/ 对象/ 抽象/ 成/ 二元/ 组/ 〈/ opdf/ ,/ or/ 〉/ ./ 其中/ ,/ or/ 表示/ o/ 可能/ 出现/ 的/ 区域/ ;/ opdf/ 表示/ 关于/ o/ 出现/ 在/ or/ 内/ 任意/ 点/ 的/ 概率密度函数/ ./ 第/ 2/ 种/ 描述/ 方法/ 是/ 将/ 概率/ 对象/ 表示/ 成/ 一组/ 样本/ 点/ si/ 可以/ 用/ 二元/ 组/ 〈/ ci/ ,/ pi/ 〉/ 表示/ ./ 其中/ ,/ si/ ./ c/ 表示/ 样本/ 点图/ 2HGD/ -/ Tree/ 的/ 框架/ 的/ 坐标/ ,/ si/ ./ p/ 表示/ si/ 对应/ 的/ 概率/ ./ 问题/ 定义/ (/ 多维/ 概率/ 对象/ 范围/ 查询/ )/ ./ 给定/ 包含/ N/ 个/ 对象/ 的/ 集合/ O/ 和/ 概率/ 范围/ 查询/ q/ 〈/ q/ θ/ 回/ 所有/ 满足/ 不等式/ app/ (/ o/ ,/ q/ )/ / q/ θ/ 中/ ,/ app/ (/ o/ ,/ q/ )/ 表示/ 对象/ o/ 出现/ 在/ 查询/ 区域/ qr/ 内/ 的/ 概率/ ./ 根据/ 概率/ 对象/ 表示/ 方法/ 的/ 不同/ ,/ app/ (/ o/ ,/ q/ )/ 的/ 计算/ 方式/ 也/ 有所不同/ ./ 当/ 对象/ o/ 的/ 概率/ 信息/ 用/ 概率密度函数/ 表示/ 时/ ,/ o/ 出现/ 在/ qr/ 内/ 的/ 概率/ 可以/ 通过/ 式/ (/ 1/ )/ 计算/ ./ 其中/ ,/ qr/ ∩/ or/ 表示/ or/ 和/ qr/ 之间/ 的/ 相交/ 面积/ ./ 当/ o/ 的/ 概率/ 信息/ 用/ 一组/ 样本/ 点/ 表示/ 时/ ,/ o/ 出现/ 在/ qr/ 内/ 的/ 概率/ 可以/ 通过/ 式/ (/ 2/ )/ 计算/ ./ 其中/ ,/ n2/ 等于/ 包含/ 在/ qr/ ∩/ or/ 中/ o/ 的/ 样本/ 点/ 个数/ ;/ n1/ 等于/ |/ / |/ ./ 在/ 实际/ 应用/ 中/ ,/ 对象/ 的/ 概率密度函数/ 很难/ 拟合/ ./ 因此/ ,/ 本文/ 采用/ 第/ 2/ 种/ 方式/ 表示/ 概率/ 数据/ 并/ 以此/ 为/ 基础/ 研究/ 概率/ 数据管理/ ./ 为了/ 方便/ 表达/ ,/ 本文/ 以/ 二维/ 概率/ 数据/ 为例/ 描述/ 算法/ ./ 4HGD/ -/ Tree4/ ./ 1HGD/ -/ Tree/ 概述/ 本文/ 提出/ 一种/ 新/ 的/ 索引/ 结构/ HGD/ -/ Tree/ (/ 混/ 网格/ 树/ )/ 管理/ 大/ 数据/ 环境/ 下/ 的/ 概率/ 对象/ ./ 如图/ 2/ 所示/ ,/ HGD/ -/ Tree/ 是/ 以/ 多/ 分辨率/ 网格/ [/ 26/ ]/ 为/ 基础/ 构建/ 的/ 两层/ 索引/ 结构/ ./ HGD/ -/ Tree/ 的/ 第/ 1/ 层/ 被/ 称为/ α/ 层/ ,/ 它/ 管理/ 概率/ 对象/ 的/ 空间信息/ ;/ HGD/ -/ Tree/ 的/ 第/ 2/ 层/ 被/ 称为/ β/ 层/ ,/ 它/ 管理/ 概率/ 对象/ 的/ SUM/ ./ Page5HGD/ -/ Tree/ 的/ α/ 层/ 索引/ (/ 简称/ α/ 层/ 索引/ )/ 是/ 基于/ 如下/ 观察/ 构建/ 的/ :/ 给定/ 平衡/ 的/ 树状/ 索引/ T/ 与/ 它/ 的/ 节点/ e/ ,/ e/ 的/ 深度/ e/ ./ h/ 和/ 它/ 对应/ 区域/ 的/ 面积/ e/ ./ s/ 可以/ 反映/ e/ 中/ 数据/ 的/ 密度/ e/ ./ ρ/ ./ 即/ :/ 在/ e/ ./ h/ 一定/ 时/ ,/ e/ ./ s/ 越小/ ,/ e/ ./ ρ/ 越大/ ./ 相反/ ,/ e/ ./ s/ 越大/ ,/ e/ ./ ρ/ 越小/ ./ 利用/ 上述/ 观察/ ,/ 本文/ 提出/ 基于/ 对象/ 数量/ 密度/ 的/ α/ 层/ 索引/ ./ 具体/ 地/ ,/ 它/ 以/ 空间/ 划分/ 为/ 基础/ ,/ 用/ 面积/ 相对/ 较/ 小/ 的/ 节点/ 管理/ 数据/ 密度/ 较大/ 的/ 区域/ ;/ 用/ 面积/ 相对/ 较大/ 的/ 节点/ 管理/ 数据/ 密度/ 较/ 小/ 的/ 区域/ ./ 显然/ ,/ 基于/ 这种/ 方法/ 构建/ 的/ 索引/ 可以/ 满足/ 索引/ 平衡性/ 的/ 要求/ ./ 此外/ ,/ 该/ 方法/ 的/ 另/ 一个/ 好处/ 是/ 索引/ 结构/ 可以/ 反应/ 对象/ 的/ 空间/ 分布/ ./ 随着/ 对象/ 的/ 更新/ ,/ 只要/ 它们/ 的/ 空间/ 分布/ 不/ 发生/ 剧烈/ 变化/ ,/ 即使/ 数据/ 更新/ 频繁/ ,/ 算法/ 也/ 能/ 以/ 较/ 少/ 的/ 计算/ 代价/ 执行/ 更新/ 并/ 保持/ 索引/ 的/ 相对/ 平衡/ ./ 然而/ ,/ 数据/ 的/ 分布/ 往往/ 随着/ 的/ 时间推移/ 逐渐/ 变化/ ./ 针对/ 这一/ 问题/ ,/ 本文/ 提出/ 一种/ 高效/ 的/ 批处理/ 更新/ 算法/ ./ 该/ 算法/ 利用/ 多种/ 数据/ 转移/ 策略/ 有效/ 地/ 降低/ 了/ 更新/ 代价/ ./ HGD/ -/ Tree/ 的/ β/ 层/ 索引/ 管理/ 对象/ 的/ SUM/ ./ 该层/ 索引/ 为/ 每个/ 对象/ 分配/ 一棵/ 子树/ ./ 每/ 棵子/ 树/ 通过/ 存储/ 对象/ 区域/ 的/ 划分/ 刻画/ 对象/ 的/ SUM/ ./ 给定/ 对象/ o/ ,/ β/ 层/ 索引/ 用/ 粒度/ 较/ 高/ 的/ 划分/ 管理/ 样本/ 点/ 分布/ 不/ 均匀/ 的/ 区域/ ;/ 用/ 粒度/ 较/ 低/ 的/ 划分/ 管理/ 样本/ 点/ 分布/ 相对/ 均匀/ 的/ 区域/ ./ 基于/ 这种/ 方法/ ,/ β/ 层/ 索引/ 可以/ 使用/ 较少/ 的/ 划分/ 更为/ 深刻/ 地/ 反映/ 出/ 对象/ 概率分布/ 特征/ ./ 因此/ ,/ 该/ 方法/ 不仅/ 可以/ 有效/ 降低/ 索引/ 的/ 存储空间/ 而且/ 可以/ 增强/ 对象/ SUM/ 的/ 概率/ 剪枝/ 能力/ ./ 接下来/ ,/ 本文/ 将/ 分别/ 对/ α/ 层/ 和/ β/ 层/ 索引/ 展开/ 详细描述/ ./ 4.2/ α/ 层/ 索引/ 描述/ 本/ 节/ 首先/ 提出/ 了/ 算法/ MAS/ (/ MergeAndSplit/ )/ 初始化/ HGD/ -/ Tree/ 的/ α/ 层/ 索引/ ./ 其次/ ,/ 本文/ 提出/ BUA/ 算法/ 动态/ 维护/ α/ 层/ 索引/ ./ 4.2/ ./ 1/ α/ 层/ 索引/ 的/ 构建/ 算法/ 在/ 描述/ 算法/ 之前/ ,/ 本文/ 首先/ 定义/ 3/ 个/ 参数/ σ/ umin/ 和/ σ/ 0/ ./ 给定/ HGD/ -/ Tree/ 的/ α/ 层/ 索引/ min/ ①/ 分别/ 表示/ σ/ u/ σ/ u/ 容积/ ;/ σ/ 0/ 表示/ 表示/ 基于/ 网格/ |/ cmi/ |/ 表示/ cm/ 给定/ N/ 个/ 概率/ 对象/ ,/ MAS/ 以/ 自上而下/ 的/ 方式/ 初始化/ MBR/ (/ 最小/ 包围/ 矩形/ )/ 并/ 对/ 其/ 进行/ m/ ×/ m/ (/ 本文/ 以/ m/ =/ 8/ 为例/ )/ 的/ 空间/ 等/ 分/ ./ 此后/ ,/ MAS/ 递归/ 地/ 合并/ 包含/ 对象/ 较少/ 的/ 单元格/ ;/ 分裂/ 包含/ 对象/ 较/ 多/ 的/ 单元格/ ②/ ./ 具体/ 地/ ,/ 给定/ 单元格/ cm/ 寻找/ 可以/ 与/ cmi/ ./ 当/ 合并/ 或/ 分裂/ 操作/ 完成/ 后/ ,/ MAS/ 重复/ 上述/ 分裂/ cm/ 操作/ 构建/ 新/ 层次/ 节点/ ./ 当/ 所有/ 节点/ 包含/ 对象/ 数量/ 均/ 小于/ σ/ 0/ 时/ ,/ 构建/ 算法/ 结束/ ./ 接下来/ ,/ 本文/ 详细/ 介绍/ 合并/ 和/ 分裂/ 操作/ ./ 合并/ 操作/ :/ / cm/ 找/ 可以/ 合并/ 的/ 单元格/ ./ 这类/ 单元格/ 是从/ cm/ 产生/ ./ 给定/ cn/ 者/ 合并/ ./ 如图/ 3/ (/ a/ )/ 所示/ ,/ 因为/ |/ A/ |/ </ σ/ i/ 寻找/ 可以/ 合并/ 的/ 单元格/ ./ 给定/ A/ 的/ 邻居/ B/ ,/ 因为/ 它们/ 满足/ 上述/ 3/ 个/ 条件/ ,/ 算法/ 将/ B/ 合并/ 到/ A/ ./ (/ 1/ )/ m/ =/ n/ ;/ (/ 2/ )/ |/ cm/ (/ 3/ )/ / c/ 此后/ ,/ MAS/ 继续/ 为/ cmk/ ,/ 如果/ cm/ / cm/ 间/ 满足条件/ (/ 2/ )/ 和/ (/ 3/ )/ ,/ MAS/ 将/ cmMAS/ 无法/ 为/ cm/ 合并/ 操作/ 结束/ ./ 特殊/ 地/ ,/ 如果/ cm/ 单元格/ c/ 图/ 3/ α/ 层/ 节点/ 的/ 构造/ (/ σ/ u/ ①/ ②/ Page6/ 并/ 的/ 单元格/ ./ 例如/ ,/ 如图/ 3/ (/ b/ )/ ~/ (/ d/ )/ 所示/ ,/ 因为/ A/ ,/ B/ ,/ C/ ,/ D/ 合并/ 成/ A1/ ,/ 算法/ 继续/ 为/ A1/ 寻找/ 可/ 合并/ 的/ 单元格/ ./ 合并/ 结果/ 是/ 将/ A1/ ,/ E1/ ,/ G1/ 合并/ 成/ A2/ ./ 分裂/ 操作/ :/ / cm/ 行/ 2/ ×/ 2/ 的/ 分裂/ 操作/ ./ 如图/ 3/ (/ d/ )/ 所示/ ,/ 因为/ |/ J/ |/ >/ σ/ uMAS/ 将/ 其/ 分裂/ 成/ 4/ 个子/ 区域/ ./ 在/ 分裂/ 结束/ 后/ ,/ 如果/ 仍然/ 存在/ cmMAS/ 递归/ 对/ 这样/ 的/ 子/ 网格/ 执行/ 分裂/ 操作/ 直到/ cm/ 所有/ 子/ 单元格/ c/ 都/ 满足/ |/ c/ |/ </ σ/ u/ 内/ 包含/ 对象/ 数目/ 小于/ σ/ u/ 作/ ./ 例如/ ,/ 本文/ 对/ J/ 的/ 分裂/ 结果/ 做/ 合并/ 操作/ ./ 合并/ 结果/ 为/ J0/ 和/ J1/ ./ 为了/ 清晰/ 地/ 阐明/ 的/ 基本/ 流程/ ./ 算法/ 首先/ 定义/ 和/ 初始化/ 用于/ 控制/ 节点/ 的/ 构造/ 顺序/ 的/ 队列/ dQ/ ./ 接下来/ ,/ 算法/ 重复/ 执行/ 以下/ 操作/ :/ (/ 1/ )/ 弹出/ 队首/ ;/ (/ 2/ )/ 使用/ 网格/ 节点/ 进行/ 划分/ ;/ (/ 3/ )/ 对/ 划分/ 结果/ 进行/ 分裂/ 或/ 合并/ ;/ (/ 4/ )/ 将/ 满足条件/ |/ e/ |/ >/ σ/ 0/ 的/ 节点/ 插入/ 队尾/ ./ 当队/ 列为/ 空时/ ,/ 算法/ 结束/ ./ 算法/ 1/ ./ MAS/ 算法/ ./ 输入/ :/ 对象/ 集合/ O/ ,/ 值域/ 输出/ :/ 索引/ 1/ ./ QueuedQ/ ,/ dQ/ ./ push/ (/ 2/ ./ While/ (/ dQ/ ./ empty/ (/ )/ ≠/ true/ )/ 3/ ./ Set/ ε/ =/ partition/ (/ dQ/ ./ pop/ (/ )/ ,/ m/ ×/ m/ )/ ,/ 4/ ./ FOR/ (/ inti/ =/ 0/ ;/ i/ </ |/ ε/ |/ ;/ i/ ++/ )/ 5/ ./ IF/ |/ ε/ i/ |/ >/ σ/ u6/ ./ ε/ ←/ split/ (/ ε/ i/ )/ 7/ ./ ENDIF8/ ./ IF/ |/ Si/ |/ </ σ/ u9/ ./ ε/ ←/ Merge/ (/ ε/ i/ ,/ ε/ )/ ;/ 10/ ./ ENDIF11/ ./ ENDFOR12/ ./ FOR/ (/ inti/ =/ 0/ ;/ i/ </ |/ ε/ |/ ;/ i/ ++/ )/ 13/ ./ IF/ |/ ε/ i/ |/ >/ σ/ 014/ ./ dQ/ ./ push/ (/ ε/ i/ )/ 15/ ./ ENDIF16/ ./ ENDFOR17/ ./ ENDWHILE18/ ./ RETURN/ ;/ 根据/ 初始化/ 算法/ 描述/ 可知/ HGD/ -/ Tree/ 适于/ 管理/ 大/ 数据/ 环境/ 下/ 的/ 概率/ 数据/ ./ 原因/ 如下/ :/ (/ 1/ )/ HGD/ -/ Tree/ 基于/ 空间/ 划分/ 对/ 概率/ 对象/ 进行/ 管理/ ,/ 算法/ 不必/ 像/ R/ -/ Tree/ 那样/ 频繁/ 更新/ 各/ 节点/ 的/ 取值/ 范围/ ;/ (/ 2/ )/ HGD/ -/ Tree/ 根据/ 对象/ 的/ 分布/ 密度/ 决定/ 节点/ 的/ 大小/ ./ 基于/ 这个/ 性质/ ,/ 构造/ 算法/ 可以/ 保证/ 同/ 层次/ 节点/ 包含/ 对象/ 的/ 数目/ 大致相同/ 从而/ 解决/ 了/ 数据/ 倾斜/ 带来/ 的/ 问题/ ;/ (/ 3/ )/ 由于/ HGD/ -/ Tree/ 根据/ 概率/ 对象/ 的/ 重心/ 决定/ 节点/ 的/ 维护/ (/ 分裂/ // 合并/ )/ ,/ 因此/ ,/ 当/ 更新/ 操作/ 发生/ 时/ ,/ HGD/ -/ Tree/ 可以/ 有效/ 减少/ 需要/ 维护/ 的/ 节点/ 的/ 数量/ ./ 4.2/ ./ 2/ α/ 层/ 索引/ 节点/ 的/ 存储/ 结构/ 描述/ HGD/ -/ Tree/ 的/ α/ 层/ 索引/ 构建/ 算法/ 虽然/ 可以/ 增强/ 动态/ 更新/ 能力/ ,/ 但是/ 它/ 可能/ 引起/ 查询/ 效率/ 降低/ 、/ 丢解/ 等/ 负面/ 问题/ ./ 接下来/ ,/ 本文/ 从/ α/ 层/ 节点/ 的/ 数据结构/ 入手/ 来/ 解决/ 上述/ 问题/ ./ 给定/ HGD/ -/ Tree/ 的/ α/ 层/ 索引/ / α/ ,/ 本节/ 将/ 分别/ 介绍/ 储/ 结构/ ./ (/ 1/ )/ 中间/ 节点/ ./ 如图/ 3/ (/ d/ )/ 所示/ ,/ 给定/ 间/ 节点/ ei/ ,/ 其/ 孩子/ 节点/ 的/ 覆盖范围/ 并不相同/ ./ 这/ 导致/ 网格/ 的/ 优势/ 无从/ 发挥/ ①/ 从而/ 降低/ 了/ 查询/ 效率/ ./ 因此/ ,/ 本文/ 提出/ 一种/ 新/ 的/ 数据结构/ UPV/ (/ UnionProtocolVector/ )/ 解决/ 上述/ 问题/ ./ 如图/ 4/ 所示/ ,/ UPV/ 表示/ 了/ 中间/ 节点/ 的/ 数据结构/ ./ 它/ 由/ 两/ 部分/ 组成/ :/ head/ 和/ cell/ ./ head/ 存储/ 节点/ 的/ 基本/ 信息/ ./ 其中/ ,/ ei/ ./ Id/ 是/ ei/ 的/ 唯一/ 标识符/ ;/ ei/ ./ pr/ 代表/ 划分/ ei/ 的/ 网格/ 分辨率/ ;/ ei/ ./ nm/ 等于/ ei/ 管理/ 的/ 对象/ 数目/ ;/ ei/ ./ r/ 表示/ ei/ 的/ 覆盖/ 区域/ ./ ei/ ./ cell/ 是/ 长为/ ei/ ./ r/ ×/ ei/ ./ r/ 的/ 数组/ ./ 数组/ 中/ 每个/ 元素/ 对应/ 一个/ 基于/ / α/ 在/ 构建/ 过程/ 中/ 存在/ 着/ 分裂/ 、/ 合并/ 等/ 操作/ ,/ 所以/ 于/ ei/ ./ cell/ 中/ 各/ 元素/ 存储/ 的/ 内容/ 并不相同/ ./ 给定/ ei/ ./ cell/ [/ u/ ]/ 和/ 它/ 对应/ 的/ 单元格/ cu/ ,/ 如果/ cu/ 被/ 其他/ 单元格/ 合并/ ,/ ei/ ./ cell/ [/ u/ ]/ 指向/ 所有/ 与/ cu/ 一起/ 参与/ 合并/ 的/ 单元格/ 中/ 下标/ 最小/ 的/ 单元格/ ./ 在/ 图/ 4/ 中/ ,/ ei/ ./ cell/ [/ 2/ ]/ 对应/ 于图/ 3/ (/ b/ )/ 中/ 的/ 单元格/ C/ ./ 因为/ 它/ 跟/ A/ ,/ B/ 等/ 节点/ 一起/ 组成/ 了/ A2/ ,/ ei/ ./ cell/ [/ 2/ ]/ =/ ei/ ./ cell/ [/ 0/ ]/ ./ 如果/ cu/ 被/ 分裂/ ,/ ei/ ./ cell/ [/ u/ ]/ 指向/ 数组/ sa/ ./ 该/ 数组/ 存储/ cu/ 的/ 子/ 网格/ ./ 例如/ ,/ ei/ ./ cell/ [/ 36/ ]/ 对应/ 于/ J/ ./ 因为/ J/ 被/ 分裂/ 成/ 两个/ 节点/ (/ J0/ 和/ J1/ )/ ,/ ei/ ./ cell/ [/ 36/ ]/ ①/ 给定/ 基于/ 标准/ 网格/ Page7/ 指向/ sa/ ./ 如果/ cu/ 没/ 被/ 分裂/ (/ 或/ 合并/ )/ ,/ ei/ ./ cell/ [/ u/ ]/ 指向/ cu/ 对应/ 的/ 单元格/ ./ 显然/ ,/ / cu/ ,/ 只要/ 它/ 未/ 被/ 分裂/ ,/ 算法/ 就/ 可以/ 利用/ 基于/ 网格/ 的/ 查询/ 算法/ 定位/ 包含/ 于/ cu/ 中/ 的/ 对象/ ./ 即使/ cu/ 被/ 分裂/ ,/ 由于/ cu/ 中子/ 网格/ 数量/ 往往/ 较/ 少/ ,/ 遍历/ 范围/ 也/ 是/ 可/ 接受/ 的/ ./ (/ 2/ )/ 叶子/ 节点/ ./ 因为/ 本文/ 根据/ 概率/ 对象/ 的/ 重心/ 统计/ 各/ 节点/ 包含/ 对象/ 的/ 数目/ ,/ 该/ 策略/ 可能/ 导致/ 丢解/ ./ 如图/ 5/ (/ a/ )/ 所示/ ,/ U/ ,/ V/ ,/ W/ 是/ 3/ 个/ 叶子/ 节点/ ./ 给定/ 查询/ q/ ,/ 虽然/ qr/ ∩/ o5/ ./ r/ ≠/ / ,/ 但/ 因为/ o5/ 的/ 重心/ 包含/ 于/ U/ ,/ W/ 并/ 不/ 维护/ 关于/ o5/ 的/ 信息/ ./ 因此/ ,/ o5/ 可能/ 被/ 错误/ 地/ 过滤/ ./ 为了/ 解决/ 这个/ 问题/ ,/ 本文/ 提出/ ILV/ (/ InvertedListVector/ )/ 存储/ 叶子/ 节点/ ./ 如图/ 5/ (/ b/ )/ ,/ ILV/ 为/ 每个/ 叶子/ 节点/ e/ 分配/ 了/ 倒/ 排列/ 表/ liste/ ./ 它/ 存储/ 的/ 内容/ 是/ 所有/ 与/ e/ ./ r/ 存在/ 交集/ 的/ 对象/ ID/ ./ 在/ 图/ 5/ (/ c/ )/ 中/ ,/ iListu/ ,/ iListv/ 是/ 节点/ U/ ,/ V/ 的/ 倒/ 排列/ 表/ ./ 图/ 6/ 基于/ 批处理/ 的/ HGD/ -/ Tree/ 为了/ 方便管理/ 引/ BBG/ -/ Tree/ (/ 层/ 索引/ (/ α/ 层/ 和/ β/ 层/ )/ ./ 与/ HGD/ -/ Tree/ 不同/ ,/ BBG/ -/ Tree/ 的/ α/ 层/ 索引/ 虽然/ 也/ 是/ 管理/ 概率/ 对象/ 的/ 空间信息/ ,/ 但是/ 它/ 的/ 节点/ 是/ 基于/ 等/ 分/ 构造/ 的/ ①/ ./ 这种/ 做法/ 的/ 好处/ 是/ 可以/ 利用/ 网格/ 特性/ 实现/ 快速/ 插入/ ./ BBG/ -/ Tree/ 中/ 的/ β/ 层/ 索引/ 管理/ 对象/ 的/ SUM/ ./ 它/ 的/ 结构/ 和/ HGD/ -/ Tree/ 的/ β/ 层/ 相同/ ./ 接下来/ ,/ 本文/ 详细/ 介绍/ BUA/ ./ 需要/ 强调/ 的/ 是/ :/ 因为/ 对象/ 的/ 插入/ 与/ 对象/ 的/ 删除/ 互为/ 逆/ 操作/ ;/ 更新/ 操作/ 可以/ 看成/ 是/ 插入/ 和/ 删除/ 的/ 组合/ ,/ 所以/ 本文/ 仅以/ 对象/ 的/ 插入/ 操作/ 为例/ 介绍/ 更新/ 算法/ ./ 给定/ 插入/ 对象/ oins/ 和/ BHG/ -/ Tree/ 的/ α/ 层/ 索引/ / / α/ ,/ BUA/ 根据/ oins/ 的/ 重心/ 将/ oins/ 插入/ 到/ 节点/ 中/ ./ 假设/ oins/ 插入/ 节点/ eb/ ,/ BUA/ 根据/ |/ eb/ |/ 决定/ 是否/ 分裂/ eb/ ./ 具体/ 地/ ,/ 如果/ |/ eb/ |/ >/ 2r2/ ,/ 算法/ 将/ eb/ 做/ r/ ×/ r4/ ./ 2.3/ 增量/ 维护/ 算法/ 本文/ 提出/ 一种/ 新/ 的/ 批量/ 更新/ 算法/ BUA/ (/ BatchUpdateAlgorithnm/ )/ 维护/ HGD/ -/ Tree/ α/ 层/ 索引/ ./ 如图/ 6/ 所示/ ,/ 该/ 算法/ 开辟/ 缓冲区/ 当有/ 特定/ 事件/ 发生/ 时/ ,/ BUA/ 将/ 转移/ 到/ HGD/ -/ Tree/ 中/ ./ 的/ 分裂/ ./ 此时/ ,/ 插入/ 操作/ 结束/ ./ 由于/ |/ / |/ 需要/ 控制/ 在/ 一定/ 范围/ 内/ ,/ 所以/ BUA/ 会/ 在/ 以/ 4/ 种/ 触发/ 条件/ 下/ 将/ HGD/ -/ Tree/ ./ 它们/ 是/ :/ 查询/ 触发/ ;/ 斜/ 触发/ ;/ 溢出/ 触发/ ./ (/ 1/ )/ 查询/ 触发/ ./ 因为/ 本文/ 使用/ 两个/ 独立/ 的/ 索引/ 管理/ 概率/ 对象/ ,/ 所以/ 查询/ 算法/ 需要/ 在/ 两棵树/ 中/ 分别/ 进行/ 搜索/ ./ 给定/ 查询/ q/ ,/ HGD/ -/ Tree/ 中/ 与/ qr/ 相交/ 的/ 叶子/ 节点/ 集/ ε/ q/ ,/ 因为/ qr/ / ε/ q/ 且/ 据/ 查询/ 结果/ 直接/ 定位/ b/ / qr/ ,/ 所以/ / 基于/ 查询/ 触发/ 的/ 数据/ 转移/ 策略/ 可以/ 有效/ 降低/ 插入/ 代价/ ./ 如图/ 6/ 所示/ ,/ BUA/ 将/ q/ 在/ 批量/ 插入/ HGD/ -/ Tree/ ./ ①/ 对于/ 任意/ 节点/ ei/ ,/ 它/ 的/ 孩子/ 都/ 是/ 基于/ 特定/ 分辨率/ 划分/ 得到/ Page8/ (/ 2/ )/ / / α/ ,/ 因为/ 中/ 对象/ 分布/ 倾斜/ 时/ ,/ 远高于/ 其他/ 子树/ 从而/ 影响/ 查询/ 和/ 插入/ 效率/ ./ 为了/ 解决/ 上述/ 问题/ ,/ 本文/ 对/ 执行/ “/ 截断/ ”/ 操作/ ,/ 并/ 将/ 截断/ 的/ 部分/ 转移/ 到/ HGD/ -/ Tree/ 中/ ./ 回顾/ 前/ 文/ ,/ 当/ |/ eb/ |/ >/ 2r2/ 时/ ,/ 更新/ 算法/ 对/ eb/ 做/ r/ ×/ r/ 的/ 划分/ ,/ 并/ 将/ 树/ 的/ 高度/ h/ 加/ 1/ ./ 如果/ h/ +/ 1/ >/ σ/ h/ ,/ BUA/ 将/ 高出/ 的/ 部分/ “/ 截断/ ”/ 并/ 转移/ 至/ HGD/ -/ Tree/ ./ 如图/ 6/ 所示/ ,/ 当/ oins/ 插入/ f/ 后/ ,/ 因为/ |/ f/ |/ >/ 2r2/ ,/ 所以/ BUA/ 需要/ 创建/ 新/ 的/ 网格/ g/ ./ 此时/ ,/ 树/ 的/ 高度/ 变为/ 5/ ./ 因为/ σ/ h/ =/ 4/ </ 5/ ,/ BUA/ 需要/ 将/ f/ 包含/ 的/ 对象/ 转移/ 至/ HGD/ -/ Tree/ 中/ ./ 给定/ HGD/ -/ Tree/ 的/ α/ 层/ 索引/ BUA/ 在/ 转移/ 过程/ 中/ 首先/ 查找/ 子集合/ ε/ r/ (/ 通过/ 一次/ 范围/ 查询/ )/ ./ 然后/ ,/ BUA/ 根据/ 查询/ 结果/ 进行/ 批量/ 插入/ ./ (/ 3/ )/ 包含/ 的/ 对象/ 数目/ 也/ 会/ 发生变化/ ./ 给定/ 节点/ ei/ ∈/ / α/ ,/ 如果/ |/ ei/ |/ </ σ/ min/ ,/ ei/ 需要/ 寻找/ 与其/ 合并/ 的/ 节点/ ./ 由于/ 该/ 操作/ 花费/ 代价/ 较大/ ,/ 本文/ 提出/ 可以/ 及时/ 将/ 降低/ / α/ 中/ 节点/ 的/ 合并/ 频率/ ./ 具体/ 地/ ,/ BUA/ 需要/ 为/ ei/ 寻找/ 合并/ 节点/ 时/ ,/ BUA/ 发起/ 在/ 象/ 集合/ 果/ |/ ei/ |/ >/ σ/ min/ ,/ 关于/ ei/ 的/ 合并/ 操作/ 可以/ 避免/ ./ 否则/ ,/ ei/ 需要/ 继续/ 合并/ ./ (/ 4/ )/ 溢出/ 触发/ ./ 由于/ 存/ 机制/ 的/ 更新/ 算法/ 可以/ 在/ 总体/ 上/ 降低/ 更新/ 代价/ ./ 然而/ ,/ 随着/ 大/ ./ 因此/ 当/ |/ / |/ >/ σ/ / (/ 清空/ 条件/ 为/ |/ el/ |/ >/ logBN/ )/ 并/ 将/ 它们/ 包含/ 的/ 对象/ 以/ 节点/ 为/ 单位/ 插入/ 参数设置/ ./ BUA/ 的/ 一个/ 疑问/ 是/ 关于/ 参数/ σ/ / 设置/ ./ 为了/ 找到/ 恰当/ 的/ σ/ / 行/ 分析/ ./ 分析/ 中/ 用到/ 的/ 符号/ 如下/ :/ |/ / |/ 为/ 数目/ ;/ N/ 为/ 总体/ 数据/ 规模/ ;/ B/ 为/ 节点/ 的/ 容积/ ;/ Fq/ ,/ Fu/ 分别/ 为/ 单位/ 时间/ 内/ 查询/ 和/ 更新/ 次数/ ./ 除去/ 初始化/ 代价/ 外/ ,/ 总体/ 计算/ 代价/ 由/ 两/ 部分/ 组成/ :/ 查询/ 代价/ 和/ 更新/ 代价/ ./ 对于/ 查询/ 代价/ ,/ 因为/ 本文/ 使用/ 了/ 两棵/ 独立/ 的/ 树/ ,/ 所以/ 单次/ 查询/ 代价/ 为/ O/ (/ logB/ |/ / |/ +/ logB/ (/ N/ -/ |/ / |/ )/ +/ |/ / |/ )/ ,/ 其中/ |/ / |/ 为/ 查询/ 结果/ 的/ 个数/ ./ 因此/ ,/ 单位/ 时间/ 内/ 总/ 的/ 查询/ 代价/ 为/ O/ (/ Fq/ (/ logB/ |/ / |/ +/ logB/ (/ N/ -/ |/ / |/ )/ +/ |/ / |/ )/ )/ ./ 更新/ 代价/ 也/ 是/ 由/ 两/ 部分/ 组成/ :/ 插入/ 和/ 转移/ ./ 单个/ 对象/ 的/ 插入/ 代价/ 为/ O/ (/ logB/ |/ / |/ )/ ,/ 单位/ 时间/ 内/ 的/ 插入/ 代价/ 为/ O/ (/ Fu/ (/ logB/ |/ / |/ )/ ;/ 单个/ 对象/ 的/ 转移/ 代价/ 为/ O/ (/ 1/ )/ ,/ 单位/ 时间/ 内/ 的/ 转移/ 代价/ 为/ O/ (/ Fu/ )/ ./ 综上所述/ ,/ 由于/ 引入/ logBN/ -/ logB/ |/ / |/ ;/ 总体/ 节省/ 的/ 插入/ 代价/ 为/ (/ logBN/ -/ logB/ |/ / |/ )/ Fu/ ./ 单次/ 查询/ 额外/ 消耗/ 的/ 代价/ 为/ logB/ |/ / |/ ;/ 总体/ 额外/ 消耗/ 的/ 代价/ 为/ (/ logB/ |/ / |/ )/ Fq/ ./ 为了/ 使得/ 总体/ 节省/ 代价/ 大于/ 消耗/ 代价/ ,/ 不等式/ (/ logBN/ -/ logB/ |/ / |/ )/ Fu/ >/ FqlogB/ |/ / |/ 必须/ 成立/ ./ 因此/ ,/ 本文/ 将/ σ/ / 4.3/ β/ 层/ 索引/ 算法/ 描述/ β/ 层/ 索引/ 用来/ 管理/ 对象/ 的/ SUM/ ./ 与/ 文献/ [/ 5/ -/ 7/ ]/ 一样/ ,/ 本文/ 也/ 是/ 利用/ 划分/ 技术/ 构造/ 对象/ 的/ SUM/ ./ 不同/ 的/ 是/ ,/ 本/ 节/ 提出/ 的/ SUM/ 更能/ 反应/ 对象/ 样本/ 点/ 的/ 分布/ 特征/ ./ 因此/ ,/ 它/ 具备/ 更强/ 的/ 过滤/ 能力/ ./ 本节/ 首先/ 提出/ 了/ MMR/ 的/ 概念/ 和/ 基于/ MMR/ 的/ SUM/ 概率/ 边界/ ./ 其次/ ,/ 本文/ 介绍/ 了/ 基于/ MMR/ 的/ SUM/ 构建/ 算法/ 和/ 最优/ SUM/ ./ 最后/ ,/ 本/ 节/ 讨论/ SUM/ 的/ 存储/ 结构/ ./ 4.3/ ./ 1/ 基于/ MMR/ 的/ SUM/ 概率/ 边界/ 定义/ 1/ (/ 专属/ 矩形/ (/ 记作/ MR/ )/ )/ ./ 给定/ 概率/ 对象/ o/ ,/ 它/ 的/ 样本/ 点/ xi/ 和/ 包含/ xi/ 的/ 矩形/ r/ ,/ 如果/ r/ 包含/ 且/ 只/ 包含/ xi/ ,/ 本文/ 称/ r/ 为/ xi/ ./ 的/ 专属/ 矩形/ ./ 记作/ :/ xi/ ./ mr/ ./ 定义/ 2/ (/ 最大/ 专属/ 矩形/ (/ 记作/ MMR/ )/ )/ ./ 给定/ 概率/ 对象/ o/ ,/ 它/ 的/ 样本/ 点/ xi/ 和/ 它/ 的/ 专属/ 矩形/ 集合/ xi/ 的/ MMR/ 为/ 基于/ MMR/ 的/ 概率/ 上/ 下界/ ./ 我们/ 首先/ 以/ 文献/ [/ 5/ -/ 7/ ]/ 中/ 的/ 算法/ 为/ 背景/ ,/ 讨论/ 基于/ MMR/ 的/ SUM/ 能够/ 提供/ 的/ 概率/ 上/ 下界/ ./ 给定/ 查询/ q/ ,/ 对象/ o/ 和/ 它/ 的/ 划分/ {/ o1/ ,/ o2/ ,/ …/ ,/ on/ }/ ,/ 如果/ rr/ ∩/ oi/ ./ r/ ≠/ / ,/ 本文/ 可以/ 通过/ 式/ (/ 3/ )/ 和/ (/ 4/ )/ 分别/ 计算/ 基于/ MMR/ 的/ 子/ 区域/ oi/ 能为/ 对象/ 提供/ 的/ 概率/ 上界/ ub/ (/ i/ )/ 和/ 下界/ lb/ (/ i/ )/ ./ 式/ (/ 5/ )/ 表示/ 能为/ 对象/ o/ 提供/ 的/ 最大/ 概率/ 边界/ 差/ ./ 其中/ ,/ maxRi/ 和/ minRi/ 分别/ 表示/ 包含/ 于/ oi/ 的/ 样本/ 点中/ 面积/ 最大/ 和/ 最小/ 的/ MMR/ ;/ app/ (/ i/ )/ 表示/ o/ 出现/ 在/ oi/ ./ r/ 中/ 的/ 概率/ ;/ si/ =/ |/ qr/ ∩/ o/ ./ r/ |/ ;/ w/ 为/ 样本/ 点/ 的/ 权值/ ./ maxD/ (/ o/ )/ =/ ∑/ i/ </ n/ 比起/ 文献/ [/ 5/ -/ 7/ ]/ 中/ SUM/ 为/ 对象/ 提供/ 的/ 概率/ 边界/ ,/ 基于/ MMR/ 的/ SUM/ 显然/ 能为/ 对象/ 提供/ 更紧/ 的/ Page9/ 概率/ 边界/ ./ 此外/ ,/ 从式/ (/ 3/ )/ ~/ (/ 4/ )/ 可知/ ,/ maxRi/ -/ minRI/ 越小/ ,/ 一步/ 指导/ SUM/ 的/ 构建/ ./ 4.3/ ./ 2/ 基于/ MMR/ 的/ SUM/ 构建/ 算法/ 本文/ 将/ 基于/ MMR/ 构建/ 的/ SUM/ 称为/ SUMp/ ./ 它/ 的/ 构造/ 算法/ 与/ KD/ -/ Tree/ 的/ 构建/ 算法/ 相似/ ;/ 其/ 核心思想/ 是/ 将/ MMR/ 面积/ 接近/ 的/ 区域/ 尽量/ 划分/ 在/ 一起/ ;/ 给定/ 对象/ o/ ,/ 算法/ 基于/ KD/ -/ Tree/ 的/ 构建/ 算法/ 对/ or/ 进行/ 划分/ ;/ 用/ 队列/ sq/ 控制/ 子/ 区域/ 的/ 划分/ 顺序/ ./ 算法/ 2/ 给出/ 了/ SUMp/ 的/ 构建/ 流程/ ./ 算法/ 首先/ 初始化/ 队列/ sq/ ./ 此后/ ,/ 算法/ 重复/ 弹出/ 队首/ 并/ 对/ 其/ 执行/ 分裂/ 操作/ ./ 给定/ 队首/ 节点/ e/ 和/ 它/ 对应/ 的/ 子/ 区域/ oi/ ,/ 算法/ 对/ oi/ 执行/ 等/ 分/ 操作/ ./ 等/ 分/ 之后/ ,/ 算法/ 根据/ 不等式/ (/ 6/ )/ 判断/ 是否/ 对/ oi/ 继续/ 划分/ ./ 如果/ 不等式/ 为/ 真/ ,/ 算法/ 停止/ 对/ oi/ 的/ 划分/ ./ 否则/ ,/ 算法/ 将/ 划分/ 结果/ 插入/ 队列/ ./ 算法/ 重复/ 上述/ 操作/ 直到/ 队/ 列为/ 空/ ./ 最后/ ,/ 算法/ 用/ KD/ -/ TreeT/ 管理/ 这组/ 划分/ ./ 其中/ ,/ 参数/ θ/ 是/ 一个/ 阈值/ ./ 本文/ 将/ 在/ 4.3/ ./ 4/ 节/ 讨论/ 它/ 的/ 设置/ ./ 算法/ 2/ ./ SUMp/ 构建/ 算法/ ./ 输入/ :/ 概率/ 对象/ o/ ,/ 最大/ 边界/ 阈值/ θ/ 输出/ :/ o/ 的/ SUMp1/ ./ 初始化/ 队列/ Queuesq/ :/ sq/ ←/ or2/ ./ While/ (/ sq/ ./ empty/ (/ )/ ≠/ true/ )/ 3/ ./ Nodee/ ←/ sq/ ./ pop/ (/ )/ ;/ {/ oi1/ ,/ oi2/ }/ =/ split/ (/ e/ )/ ;/ 4/ ./ Foreach/ (/ e/ ∈/ {/ oi1/ ,/ oi2/ }/ )/ 5/ ./ IFub/ (/ e/ )/ -/ lb/ (/ e/ )/ >/ |/ / |/ θ/ 6.7/ ./ ENDIF8/ ./ ENDFOR9/ ./ ENDWHILE10/ ./ buildKDTree/ (/ )/ ;/ 11/ ./ Return/ ;/ 例/ 1/ (/ SUMp/ 的/ 构造/ )/ ./ 图/ 7/ (/ a/ )/ 给出/ 了/ 对象/ o/ 样本/ 点/ 的/ 分布/ ./ 首先/ ,/ 算法/ 将/ or/ 进行/ 等/ 分/ 操作/ ,/ 结果/ 如图/ 7/ (/ b/ )/ 所示/ ./ 由于/ 区域/ A/ 满足/ 不等式/ (/ 6/ )/ ,/ 算法/ 停止/ 对/ 其/ 划分/ ;/ 由于/ 区域/ B/ 满足/ 不等式/ (/ 6/ )/ ,/ 算法/ 将/ 其/ 等/ 分为/ B/ 和/ C/ ./ 由于/ B/ 中/ 的/ 样本/ 点/ 是/ 均匀分布/ 的/ ,/ 虽然/ B/ 包含/ 了/ 大量/ 的/ 样本/ 点/ ,/ 算法/ 仍然/ 停止/ 对/ 其/ 划分/ ./ 接下来/ ,/ 算法/ 继续/ 对/ C/ 进行/ 划分/ ./ 在/ 多次/ 划分/ 后/ ,/ 算法/ 将/ C/ 分成/ 了/ {/ C/ ,/ D/ }/ ,/ 图/ 7/ (/ e/ )/ 显示/ 了/ 最终/ 划分/ 结果/ ./ 图/ 7/ (/ f/ )/ 表示/ 管理/ 划分/ 结果/ 的/ KD/ -/ Tree/ ①/ ./ 与/ 文献/ [/ 5/ -/ 7/ ]/ 中/ 的/ SUM/ 构造/ 算法/ 相比/ ,/ SUMp/ 的/ 构造/ 算法/ 迎合/ 了/ 样本/ 点/ 分布/ 的/ 特性/ ./ 在/ 大多数/ 情况/ 下/ ,/ 它/ 只/ 需/ 极少/ 次/ 的/ 划分/ 就/ 可以/ 得到/ 概率/ 边界/ 更紧/ 的/ SUM/ ./ 接下来/ ,/ 本文/ 对/ SUMp/ 的/ 剪枝/ 能力/ 和/ 空间/ 代价/ 进行/ 分析/ ./ 定理/ 1/ (/ 更紧/ 的/ 概率/ 边界/ )/ ./ 给定/ 概率/ 对象/ o/ 和/ 它/ 对应/ 的/ 划分/ UD/ -/ Tree/ 和/ SUMp/ 管理/ ,/ SUMp/ 的/ 剪枝/ 能力/ 更强/ ./ 证明/ ./ 对于/ / oi/ ∈/ or/ ,/ 当/ 它/ 被/ UD/ -/ Tree/ 管理/ 时/ ,/ 它/ 提供/ 的/ 概率/ 上/ 下界/ 分别/ 为/ app/ (/ o/ ,/ i/ )/ 和/ 0/ ./ 相反/ ,/ 当/ 它/ 被/ SUMp/ 管理/ 时/ ,/ 它/ 提供/ 的/ 概率/ 上/ 下界/ 为式/ (/ 3/ )/ 和/ (/ 4/ )/ ./ 显然/ ,/ (/ 4/ )/ -/ (/ 3/ )/ </ app/ (/ i/ )/ -/ 0/ ./ 因为/ ub/ (/ o/ )/ =/ ∑/ ub/ (/ i/ )/ ,/ lb/ (/ o/ )/ =/ ∑/ lb/ (/ i/ )/ ,/ SUMp/ 会为/ 概率/ 对象/ 提供/ 更紧/ 的/ 概率/ 边界/ ./ 定理/ 2/ (/ 更/ 小/ 的/ 空间/ 代价/ )/ ./ 给定/ 概率/ 对象/ o/ 和/ 基于/ UD/ -/ Tree/ 得到/ 的/ 划分/ Ou/ {/ ou/ 果/ maxD/ (/ o/ )/ =/ θ/ ,/ 本文/ 可以/ 基于/ MMR/ 找到/ 一种/ 新/ 的/ 划分/ 等式/ :/ (/ 1/ )/ maxD/ (/ o/ )/ / θ/ ;/ (/ 2/ )/ |/ Om/ |/ / |/ Ou/ |/ ./ 其中/ ,/ |/ Om/ |/ 与/ |/ Ou/ |/ 分别/ 表示/ 两个/ 划分/ 中/ 的/ 子/ 区域/ 个数/ ./ 证明/ ./ 给定/ 概率/ 对象/ o/ 和/ 它/ 对应/ 的/ 划分/ SUMp/ 的/ 构建/ 算法/ 可以/ 基于/ MMR/ 将域/ 合/ 并且/ 保证/ 合并/ 结果/ 仍/ 满足/ 不等式/ (/ 6/ )/ ./ 由于/ 合并/ 操作/ 减少/ 子/ 区域/ 数目/ ,/ 不等式/ |/ Om/ |/ / |/ Ou/ |/ 成立/ ./ 证毕/ ./ 4.3/ ./ 3MMR/ 构建/ 算法/ 4.3/ ./ 2/ 节中/ 一个/ 尚未/ 解决/ 的/ 问题/ 是/ 如何/ 为/ 概率/ 对象/ 的/ 样本/ 点/ 构建/ MMR/ ./ 本文/ 提出/ 了/ 一种/ 高效/ 算法/ 解决/ 上述/ 问题/ ./ 给定/ 概率/ 对象/ o/ 和/ 它/ 的/ 样本/ 点/ 本文/ 首先/ 对/ 样本/ 点/ 各/ 维度/ 的/ 坐标/ 排序/ 并用/ 倒排/ 链表/ 存储/ ./ 接下来/ ,/ 算法/ 计算/ 各/ 样本/ 点/ 的/ MMR/ ./ 具体/ 地/ ,/ 算法/ 任选/ 一列/ 倒排/ 链表/ 进行/ 遍历/ (/ 本文/ 以/ 选择/ l1/ 为/ ①/ 为了/ 节省/ 存储空间/ ,/ KD/ -/ TreeT/ 只/ 存储/ 包含/ 样本/ 点/ 的/ 节点/ ./ Page10/ 例/ 描述/ 算法/ )/ ./ 在/ 遍历/ 过程/ 中/ ,/ 给定/ l1/ [/ i/ ]/ 和/ 它/ 对应/ 的/ 样本/ 点/ su/ ,/ 算法/ 首先/ 找到/ su/ 在/ l2/ 中/ 的/ 位置/ ①/ ./ 其次/ ,/ 算法/ 将/ su/ 的/ MMR/ 设置/ 为/ (/ l1/ [/ i/ +/ 1/ ]/ -/ l1/ [/ i/ -/ 1/ ]/ )/ ×/ (/ l2/ [/ k/ +/ 1/ ]/ -/ l2/ [/ k/ -/ 1/ ]/ )/ ./ 特殊/ 地/ ,/ 对于/ 倒排/ 链表/ 首部/ (/ 或/ 尾部/ )/ 的/ 元素/ ,/ 算法/ 利用/ o/ ./ mbr/ 计算/ 其/ MMR/ ./ 算法/ 总体/ 分为/ 两步/ :/ (/ 1/ )/ 初始化/ 倒排/ 链表/ ;/ (/ 2/ )/ 计算/ 样本/ 点/ 的/ MMR/ ./ 在/ 初始化/ 倒/ 排列/ 表时/ ,/ 由于/ 算法/ 需要/ 对/ 样本/ 点/ 的/ 每/ 一维/ 坐标/ 进行/ 排序/ ,/ 初始化/ 代价/ 为/ O/ (/ dmlogm/ )/ ./ 计算/ MMR/ 的/ 代价/ 是/ 遍历/ 所有/ 样本/ 点/ ,/ 它/ 的/ 代价/ 是/ O/ (/ m/ )/ ./ 因此/ ,/ 总体/ 的/ 计算/ 代价/ 为/ O/ (/ dmlogm/ )/ ./ 由于/ 样本/ 点/ 只是/ 原始数据/ 的/ 一个/ 子集/ ,/ 本文/ 可以/ 将/ m/ 看成/ 常数/ ./ 4.3/ ./ 4/ 基于/ 区域/ 热度/ 的/ SUMp/ 构建/ 模型/ 4.3/ ./ 2/ 节/ 遗留/ 的/ 另外/ 一个/ 问题/ 是/ 参数/ θ/ 的/ 设定/ ./ 本文/ 通过/ 引入/ 区域/ 热度/ 的/ 概念/ 解决/ 这一/ 问题/ ./ 通常/ 情况/ 下/ ,/ 给定/ 概率/ 对象/ o/ ,/ θ/ 越大/ ,/ 构造/ 代价/ 越小/ ,/ 但/ 概率/ 剪枝/ 能力/ 越差/ ./ 反之/ ,/ θ/ 越小/ ,/ 构造/ 代价/ 越大/ ,/ 但/ 概率/ 剪枝/ 能力/ 越强/ ./ 与/ 以往/ 算法/ 相比/ ,/ 因为/ 概率/ 对象/ 只/ 在/ 索引/ 中/ 驻留/ 一段时间/ ,/ 所以/ SUMp/ 的/ 构造/ 代价/ 是/ 不可/ 忽略/ 的/ ./ 本文/ 提出/ 基于/ 区域/ 热度/ 的/ 代价/ 模型/ ./ 它/ 可以/ 为/ 对象/ 找到/ 最优/ 的/ SUMp/ 构建/ 方式/ 并/ 计算/ 出/ 最优/ 的/ θ/ ./ 该/ 模型/ 基于/ 以下/ 动机/ ,/ 给定/ 一组/ 对象/ ,/ 某些/ 区域/ 内/ 的/ 对象/ 经常/ 被/ 访问/ (/ 热点/ 区域/ )/ ,/ 而/ 另外/ 一些/ 区域/ 内/ 的/ 对象/ 很少/ 被/ 访问/ (/ 非/ 热点/ 区域/ )/ ./ 对于/ 具有/ 相同/ maxD/ 但/ 处于/ 不同/ 区域/ 的/ 对象/ ,/ 它们/ 被/ 验证/ 的/ 频率/ 也/ 是/ 不同/ 的/ ./ 具体/ 地/ ,/ 处于/ 热点/ 区域/ 的/ 对象/ 访问/ 频率/ 高/ ,/ 被/ 验证/ 的/ 次数/ 频率/ 也/ 高/ ./ 相反/ ,/ 处于/ 非/ 热点/ 区域/ 内/ 的/ 对象/ 访问/ 频率/ 低/ ,/ 被/ 验证/ 的/ 频率/ 也/ 低/ ./ 因此/ ,/ 根据/ 区域/ 热度/ 来/ 决定/ SUMp/ 是/ 十分/ 有/ 意义/ 的/ ./ 在/ 讨论/ 代价/ 模型/ 之前/ ,/ 本文/ 首先/ 定义/ 一组/ 符号/ ./ 给定/ 对象/ o/ ,/ costV/ 表示/ o/ 在/ 无法/ 被/ 过滤/ 时/ 消耗/ 的/ 验证/ 代价/ ;/ costc/ 表示/ SUMp/ 的/ 构造/ 代价/ ;/ costp/ 表示/ SUMp/ 的/ 访问/ 代价/ ;/ T/ 表示/ o/ 在/ 其/ 生存/ 周期/ 内/ 被/ 访问/ 的/ 次数/ ./ 如式/ (/ 7/ )/ 所示/ ,/ 给定/ 对象/ o/ ,/ 它/ 消耗/ 的/ 计算/ 代价/ 包括/ 验证/ 代价/ 、/ SUMp/ 构建/ 和/ SUMp/ 访问/ 代价/ ./ 其中/ ,/ |/ T/ |/ costp/ 为/ SUMp/ 的/ 访问/ 代价/ ./ 显然/ ,/ 这部分/ 代价/ 独立/ 于/ θ/ ./ costc/ 可以/ 拟/ 合成/ 关于/ θ/ 的/ 函数/ φ/ (/ θ/ )/ ./ 它/ 的/ 含义/ 是/ 构建/ maxD/ (/ o/ )/ =/ θ/ 的/ SUMp/ 所/ 需/ 的/ 计算/ 代价/ ./ 显然/ ,/ φ/ (/ θ/ )/ 是/ 关于/ θ/ 的/ 减/ 函数/ ./ 由于/ 拟合/ φ/ (/ θ/ )/ 不是/ 本文/ 主要/ 贡献/ ,/ 本文/ 不/ 对/ 其/ 详细/ 叙述/ ./ T/ θ/ costV/ 是/ o/ 总共/ 消耗/ 的/ 验证/ 代价/ ./ 其中/ T/ θ/ 为/ 验证/ 次数/ 的/ 数学/ 期望/ ./ 从式/ (/ 7/ )/ 可以/ 看出/ ,/ costT/ 是/ 一个/ 非/ 单调/ 函数/ ./ 本文/ 可以/ 根据/ 它/ 的/ 拐点/ 设置/ θ/ ./ 参数/ T/ 的/ 设置/ :/ 给定/ 对象/ o/ ,/ 因为/ 它/ 的/ SUMp/ 是/ 在/ 其/ 插入/ 时/ 构建/ 的/ ./ 构建/ 算法/ 只能/ 根据/ 历史/ 访问/ 记录/ 预估/ T/ ./ 具体/ 地/ ,/ 给定/ HGD/ -/ Tree/ 的/ α/ 层/ 索引/ 如果/ o/ 的/ 重心/ 包含/ 于/ 设置/ 为/ e/ 的/ 访问/ 次数/ ./ 4.3/ ./ 5/ 基于/ bit/ 串/ 的/ SUMp/ 存储/ 虽然/ SUMp/ 可以/ 有效/ 减少/ 划分/ 次数/ ,/ 但是/ 它/ 仍/ 耗费/ 高昂/ 的/ 代价/ 存储/ 各子/ 区域/ 的/ 位置/ 信息/ 和/ 概率/ 概要/ 信息/ ./ 为了/ 近/ 一步/ 降低/ 存储/ 代价/ ,/ 本文/ 提出/ 了/ 基于/ bit/ 向量/ 的/ 存储/ 结构/ ./ 例如/ ,/ 图/ 8/ 中/ 的/ bit/ 向量/ 存储/ 了/ 图/ 7/ (/ f/ )/ 中/ KD/ -/ Tree/ ./ 给定/ 对象/ o/ 、/ 划分/ O/ 和/ 它/ 对应/ 的/ KD/ -/ TreeT/ ,/ 本文/ 通过/ 描述/ T/ 中/ 各/ 节点/ 的/ 数据结构/ 介绍/ SUMp/ 的/ 存储/ 方式/ ./ (/ 1/ )/ 数据结构/ ./ T/ 包括/ 两类/ 节点/ :/ 叶子/ 节点/ 和/ 中间/ 节点/ ./ 给定/ 叶子/ 节点/ ef/ ,/ 它用/ 五元/ 组/ 〈/ type/ ,/ app/ ,/ ub/ ,/ lb/ ,/ mId/ 〉/ 表示/ ./ 具体/ 地/ ,/ type/ 表示/ 节点/ 类型/ (/ 1bit/ )/ ./ app/ 表示/ 对象/ o/ 出现/ 在/ ef/ 对应/ 区域/ 的/ 概率/ ./ 为了/ 降低/ 存储/ 代价/ ,/ 存储/ 算法/ 将/ 概率/ 值/ (/ 浮点/ 类型/ )/ 映射/ 成/ 一个/ rank/ 值/ (/ 7bit/ )/ ,/ 其/ 值域/ 为/ [/ 0/ ,/ 127/ ]/ ./ 假设/ o/ 出现/ 在/ ef/ ./ r/ 内/ 的/ 概率/ 是/ 0.2/ ,/ 它/ 对应/ 的/ rank/ 值为/ 0.2/ ×/ 128/ =/ 25/ ./ us/ 和/ ls/ 分别/ 表示/ ef/ ./ r/ 中/ maxR/ 和/ minR/ 的/ 面积/ ./ 与/ app/ 相同/ ,/ 本文/ 也/ 将/ 面积/ (/ 浮点/ 类型/ )/ 映射/ 成/ rank/ 值/ (/ 4bit/ )/ ,/ 其/ 值域/ 为/ [/ 0/ ,/ 15/ ]/ ./ mID/ 记录/ 了/ 节点/ 的/ 位置/ 信息/ ,/ 本文/ 稍后/ 描述/ 其/ 细节/ ./ (/ 2/ )/ 中间/ 节点/ 的/ 存储/ 结构/ ./ 给定/ 中间/ 节点/ ei/ ,/ 它用/ 五元/ 组/ 〈/ type/ ,/ app/ ,/ adr/ ,/ len/ ,/ mId/ 〉/ 表示/ ./ 其中/ ,/ type/ ,/ app/ ,/ mId/ 的/ 含义/ 与/ 上文/ 相同/ ./ adr/ 表示/ 其/ 孩子/ 节点/ 在/ bit/ 串中/ 的/ 相对/ 地址/ ;/ len/ 表示/ 孩子/ 的/ 个数/ ,/ 它们/ 分别/ 占用/ 的/ 6bit/ 和/ 2bit/ ./ (/ 3/ )/ 基于/ bMap/ 的/ mId/ 存储/ 方法/ ./ 为了/ 介绍/ mId/ 的/ 存储/ 方法/ ,/ 本文/ 首先/ 提出/ bMap/ 的/ 概念/ ./ 给定/ 概率/ 对象/ o/ 和/ 它/ 的/ 划分/ 基于/ 不同/ 划分/ 得到/ 的/ 单元格/ ,/ 所以/ 它/ 可以/ 用/ bit/ 向/ ①/ 本文/ 将/ 同一/ 样本/ 点/ 在/ 不同/ 链表/ 上/ 的/ 坐标/ 用/ 指针/ 相连/ ./ 这样/ Page11/ 量/ 表示/ ./ 例如/ :/ 在/ 图/ 7/ (/ e/ )/ 中/ ,/ 节点/ B/ 是/ 基于/ 2/ ×/ 2/ 划分/ 下/ 得到/ 的/ 单元格/ ,/ 本文/ 可以/ 用/ bit/ 向量/ {/ 10/ ,/ 01/ }/ 表示/ 它/ 的/ 位置/ ;/ 节点/ A/ 是/ 基于/ 2/ ×/ 1/ 划分/ 下/ 得到/ 的/ 单元格/ ,/ 本文/ 可以/ 用/ bit/ 向量/ {/ 01/ ,/ 1/ }/ 表示/ 它/ 的/ 位置/ ./ 然而/ ,/ 节点/ 可能/ 是/ 基于/ 不同/ 网格/ 划分/ 得到/ 的/ ,/ 它们/ 对应/ 的/ bit/ 串/ 的/ 长度/ 也/ 不/ 相同/ (/ 例如/ :/ 图/ 7/ (/ e/ )/ 中/ 的/ D/ 和/ C/ )/ ./ 因此/ ,/ 算法/ 需要/ 为/ 长度/ 不同/ 的/ bit/ 串/ 提供/ 一个/ 适配器/ (/ 称为/ bMap/ )/ 以便/ 访问/ ./ 如图/ 9/ 所示/ ,/ bMap/ 是/ 由/ 多条/ bit/ 串列/ 组成/ 的/ 静态/ 表/ ./ 它/ 给出/ 任意/ 长度/ 的/ bit/ 串到/ 定长/ bit/ 串/ 的/ 映射/ 关系/ ./ bMap/ 中/ 每条/ 记录/ 都/ 是/ 1/ 个/ 三元组/ 〈/ Id/ ,/ bit/ ,/ mbit/ 〉/ ./ 给定/ bMap/ [/ t/ ]/ ,/ bMap/ [/ t/ ]/ ./ bit/ 表示/ 它/ 在/ 网格/ (/ logt/ ×/ logt/ )/ 划分/ 下/ 某/ 一行/ (/ 或列/ )/ 单元格/ 对应/ 的/ bit/ 串/ ;/ bMap/ [/ t/ ]/ ./ mbit/ 表示/ 该行/ (/ 或列/ )/ 单元格/ 在/ (/ m/ ×/ m/ )/ 划分/ 下/ 包含/ 哪些/ 行/ (/ 或列/ )/ 子格/ ./ 例/ 网格/ / / 如/ :/ 如图/ 7/ (/ d/ )/ 所示/ ,/ 节点/ C/ 是/ 基于/ 到/ 的/ 单元格/ ./ 它/ 对应/ 的/ bit/ 向量/ 是/ {/ 0001/ ,/ 1000/ }/ ./ 它/ 包含/ 了/ 一组/ 在/ 网格/ 的/ 并/ 集/ 可以/ 表示/ 为/ {/ 00000011/ ,/ 11000000/ }/ ./ 利用/ bMap/ ,/ 本文/ 可以/ 有效/ 压缩/ 节点/ 位置/ 的/ 存储空间/ ./ 具体/ 地/ ,/ 本文/ 仅/ 存储/ 各/ 节点/ 对应/ bit/ 串/ 在/ bMap/ 中/ 的/ 下标/ ./ 如图/ 7/ (/ e/ )/ 所示/ ,/ 节点/ C/ 为/ 基于/ 4/ ×/ 4/ 划分/ 下/ 得到/ 的/ 单元格/ ;/ 其/ bit/ 向量/ 是/ {/ 0001/ ,/ 0010/ }/ ;/ 它们/ 分别/ 保存/ 在/ bMap/ [/ 2/ ]/ 和/ bMap/ [/ 4/ ]/ 中/ ,/ 因此/ ,/ mId/ =/ {/ 2/ ,/ 4/ }/ ./ 在/ 介绍/ 节点/ 的/ 存储/ 结构/ 之后/ ,/ 本/ 节/ 额外/ 说明/ 以下/ 两点/ :/ (/ 1/ )/ bMap/ 只/ 需/ 存储/ 少量/ 的/ 元组/ ./ 因此/ ,/ 在/ 大多数/ 情况/ 下/ ,/ mId/ 只/ 需/ 2Byte/ 便/ 可/ 存储/ 一个/ 节点/ 的/ 位置/ 信息/ ./ 此外/ ,/ bMap/ 可以/ 被/ 所有/ 概率/ 对象/ 共享/ ./ 因此/ ,/ 基于/ bMap/ 的/ 存储/ 方式/ 可以/ 大大降低/ 存储/ 代价/ ;/ (/ 2/ )/ 与/ 传统/ 的/ 节点/ 存储/ 方式/ 相比/ ,/ 基于/ bit/ 串/ 的/ 存储/ 策略/ 可以/ 有效/ 压缩/ 空间/ ./ 例如/ ,/ 一个/ 叶子/ 节点/ 只/ 需要/ 3Byte/ 的/ 存储空间/ ./ 结合/ 定理/ 2/ ,/ 对象/ SUMp/ 的/ 存储/ 代价/ 远远/ 小于/ 其他/ 算法/ 中/ SUM/ 的/ 存储/ 代价/ ./ 4.4/ HGD/ -/ Tree/ 访问/ 算法/ 本文/ 提出/ 算法/ SHAB/ (/ SearchonHGD/ -/ TreeandBHG/ -/ Tree/ )/ 寻找/ HGD/ -/ Tree/ 和/ BHG/ -/ Tree/ 中/ 满足/ 查询/ 条件/ 的/ 概率/ 对象/ ./ 为了/ 方便/ 描述/ ,/ 本文/ 将/ α/ 层/ 索引/ 中/ 层次/ 最低/ 的/ 节点/ 称为/ α/ leaf/ ./ 4.4/ ./ 1/ α/ 层/ 索引/ 的/ 访问/ 算法/ SHAB/ 分为/ 两个/ 主要/ 部分/ ./ 第一/ 部分/ 是/ 通过/ 索引/ 的/ α/ 层/ 找到/ 所有/ 与/ 查询/ 范围/ 存在/ 交集/ 的/ 概率/ 对象/ ./ 给定/ 查询/ q/ 、/ HGD/ -/ Tree/ 的/ α/ 层/ 索引/ Tree/ 的/ α/ 层/ 索引/ 分别/ 访问/ 论述/ ./ 接下来/ ,/ 本文/ 只/ 强调/ 如下/ 两点/ :/ (/ 1/ )/ 中间/ 节点/ 访问/ ./ 当/ 访问/ 算法/ 需要/ 对/ 其/ UPV/ 进行/ 访问/ ./ 具体/ 地/ ,/ 算法/ 首先/ 根据/ e/ ./ pr/ 和/ e/ ./ r/ 找到/ 和/ qr/ 相交/ 的/ 网格/ ./ 其次/ ,/ SHAB/ 访问/ e/ ./ cell/ 找到/ 与/ qr/ 的/ 孩子/ 节点/ ./ (/ 2/ )/ 叶子/ 节点/ 访问/ ./ 当/ SHAB/ 找到/ 与/ 所有/ qr/ 相交/ 的/ α/ leaf/ 时/ ,/ SHAB/ 将/ 这些/ α/ leaf/ 的/ 倒排/ 链表/ 执行/ 归并/ 操作/ 并/ 剔除/ 重复/ 对象/ ./ 此后/ ,/ SHAB/ 遍历/ 归并/ 后/ 的/ 倒/ 排列/ 表并/ 找到/ 所有/ 与/ qr/ 存在/ 交集/ 的/ 概率/ 对象/ ./ 4.4/ ./ 2/ β/ 层/ 索引/ 访问/ 算法/ SHAB/ 的/ 第/ 2/ 部分/ 是/ 查找/ 符合/ 概率/ 阈值条件/ 的/ 概率/ 对象/ ./ 对于/ 包含/ 在/ 查询/ 区域/ 内/ 的/ 对象/ ,/ SHAB/ 直接/ 将/ 其/ 输出/ ./ 对于/ 与/ 查询/ 范围/ 相交/ 的/ 对象/ ,/ SHAB/ 访问/ 它们/ 的/ SUMp/ ./ 由/ 上文/ 可知/ ,/ SUMp/ 可以/ 基于/ KD/ -/ Tree/ 的/ 搜索算法/ 进行/ 访问/ ./ 因此/ ,/ 本文/ 并/ 不/ 对/ 搜索/ 过程/ 进行/ 详细/ 论述/ ./ 接下来/ ,/ 本文/ 只/ 强调/ 如下/ 3/ 点/ :/ (/ 1/ )/ 概率/ 边界/ 计算/ ./ 给定/ 查询/ q/ ,/ 概率/ 对象/ o/ 和/ 它/ 的/ 划分/ 域/ oi/ 与/ qr/ 的/ 拓扑/ 关系/ 计算/ o/ 包含/ 在/ qr/ 中/ 的/ 概率/ 上/ 下界/ ub/ (/ o/ )/ 和/ lb/ (/ o/ )/ ./ 具体/ 地/ :/ ①/ 当/ oi/ ./ r/ / qr/ 时/ ,/ 算法/ 分别/ 将/ ub/ (/ o/ ,/ q/ )/ 和/ lb/ (/ o/ ,/ q/ )/ 更新/ 为/ ub/ (/ o/ ,/ q/ )/ +/ oi/ ./ app/ 和/ lb/ (/ o/ ,/ q/ )/ +/ oi/ ./ app/ ;/ ②/ 当/ oi/ ./ r/ / qr/ ∧/ e/ ./ type/ =/ leaf/ 时/ ,/ 算法/ 分别/ 将/ ub/ (/ o/ ,/ q/ )/ 和/ lb/ (/ o/ ,/ q/ )/ 更新/ 为/ ub/ (/ o/ ,/ q/ )/ +/ ub/ (/ i/ )/ 和/ lb/ (/ o/ ,/ q/ )/ +/ lb/ (/ i/ )/ ./ 其中/ ,/ ub/ (/ i/ )/ 和/ lb/ (/ i/ )/ 分别/ 根据/ 式/ (/ 3/ )/ 和/ (/ 4/ )/ 计算/ ;/ ③/ 当/ e/ ./ r/ / qr/ ∧/ e/ ./ type/ ≠/ leaf/ 时/ ,/ 算法/ 访问/ oi/ 的/ 子/ 区域/ ;/ 如图/ 10/ 所示/ ,/ 给定/ 查询/ q/ ,/ 因为/ qr/ ∩/ or/ ≠/ / ,/ SHAB/ 遍历/ o/ 对应/ 的/ SHAB/ 将/ A/ ./ app/ 分别/ 加到/ ub/ (/ o/ ,/ q/ )/ 和/ lb/ (/ o/ ,/ q/ )/ 上/ ./ 接下来/ ,/ SHAB/ 访问/ I/ 对应/ 的/ 子树/ ./ 同理/ ,/ SHAB/ 将/ Page12ub/ (/ o/ ,/ q/ )/ ,/ lb/ (/ o/ ,/ q/ )/ 更新/ 为/ ub/ (/ o/ ,/ q/ )/ +/ C/ ./ app/ +/ ub/ (/ B/ )/ 和/ lb/ (/ o/ ,/ q/ )/ +/ C/ ./ app/ +/ lb/ (/ B/ )/ ./ (/ 2/ )/ 决策/ 方法/ ./ 当/ SHAB/ 结束/ 对法/ 根据/ 下列/ 不等式/ 决策/ 下/ 一步/ 操作/ :/ ①/ lb/ (/ o/ ,/ q/ )/ / q/ θ/ 此时/ ,/ SHAB/ 将/ o/ 输入/ 到/ 结果/ 集/ ;/ ②/ ub/ (/ o/ ,/ q/ )/ / q/ θ/ SHAB/ 忽略/ o/ ;/ ③/ lb/ (/ o/ ,/ q/ )/ </ q/ θ/ </ ub/ (/ o/ ,/ q/ )/ ,/ SHAB/ 执行/ 对/ o/ 的/ 验证/ 操作/ ./ (/ 3/ )/ 基于/ 位/ 运算/ 的/ 子/ 区域/ 位置/ 比较/ 算法/ ./ 给定/ 查询/ q/ ,/ 概率/ 对象/ o/ 和/ 它/ 的/ 划分/ 为/ 中子/ 区域/ 的/ 位置/ 信息/ 用/ bMap/ 数组/ 下标/ 表示/ ,/ 所以/ SHAB/ 需要/ 通过/ 位/ 运算/ 获取/ 各子/ 区域/ 与/ qr/ 的/ 拓扑/ 关系/ ./ SHAB/ 首先/ 根据/ or/ 和/ qr/ 的/ 拓扑/ 关系/ 在/ 各维/ 生成/ 一组/ bit/ 向量/ qbit/ ./ qbit/ 的/ 长度/ 等于/ bMap/ 中/ mbit/ 字段/ 的/ 长度/ (/ 图/ 9/ 中/ |/ mbit/ |/ =/ 8/ )/ ./ qbit/ 的/ 值/ 表示/ qr/ 在/ 基于/ 网/ 格格/ 存在/ 交集/ ./ 如图/ 10/ 所示/ ,/ 查询/ q/ 基于/ 网格/ 的/ 划分/ 生成/ 的/ qbit/ 为/ {/ 11111100/ ,/ 11111111/ }/ ./ 它/ 表示/ qr/ 与/ 第/ 2/ ,/ 3/ ,/ 4/ ,/ 5/ ,/ 6/ ,/ 7/ 列/ (/ 0/ ,/ 1/ ,/ 2/ ,/ 3/ ,/ 4/ ,/ 5/ ,/ 6/ ,/ 7/ 行/ )/ 网格/ 相交/ ./ 在/ 生成/ qbit/ 后/ ,/ SHAB/ 根据/ qbit/ 和/ 各子/ 区域/ 的/ mId/ 判断/ 它们/ 之间/ 的/ 拓扑/ 关系/ ./ 具体/ 地/ ,/ / oi/ ∈/ 文用/ 布尔/ 表达式/ (/ 8/ )/ 判断/ qr/ 与/ oi/ ./ r/ 的/ 位置/ 关系/ ./ 其中/ ,/ oi/ ./ mid/ [/ u/ ]/ ./ mbit/ 表示/ oi/ 第/ u/ 维/ 对应/ 的/ mbit/ ./ 直观/ 地/ ,/ 如果/ oi/ ./ mid/ [/ u/ ]/ ./ mbit/ ∧/ qBit/ [/ u/ ]/ ≠/ 0/ ,/ oi/ ./ r/ 至少/ 在/ 第/ u/ 维与/ qr/ 相交/ ./ 例如/ :/ 节点/ C/ 在/ X/ 维/ 对应/ 的/ mbit/ 为/ 00001100/ ./ 因为/ 00001100/ ∧/ 11111100/ ≠/ 0/ ,/ qr/ 与/ C/ 在/ X/ 维/ 相交/ ./ 进一步/ 讲/ ,/ 如果/ oi/ ./ r/ 在/ 任意/ 一维/ 都/ 和/ qr/ 相交/ ,/ oi/ ./ r/ 必定/ 和/ qr/ 相交/ ./ 如果/ 布尔/ 表达式/ (/ 8/ )/ 成立/ ,/ SHAB/ 近/ 一步/ 判断/ oi/ ./ r/ 是否/ 包含/ 于/ qr/ ./ 为此/ ,/ SHAB/ 更新/ qbit/ ./ 新/ 的/ qbit/ 表示/ qr/ 在/ 基于/ 网格/ 那些/ 行/ (/ 列/ )/ 网格/ ./ 如图/ 10/ 所示/ ,/ q/ 基于/ 网格/ 划分/ 下/ 生成/ 的/ 新/ qbit/ 为/ {/ 11111000/ ,/ 11111111/ }/ ./ 它/ 表示/ qr/ 与/ 第/ 3/ ,/ 4/ ,/ 5/ ,/ 6/ ,/ 7/ 列/ (/ 0/ ,/ 1/ ,/ 2/ ,/ 3/ ,/ 4/ ,/ 5/ ,/ 6/ ,/ 7/ 行/ )/ 网格/ 存在/ 包含/ 关系/ ./ 更新/ qbit/ 后/ ,/ SHAB/ 根据/ 布尔/ 表达式/ (/ 8/ )/ 近/ 一步/ 判断/ qr/ 与/ oi/ ./ r/ 的/ 位置/ 关系/ ./ 与/ 传统/ 的/ 节点/ 间/ 位置/ 比较/ 算法/ 相比/ ,/ 基于/ 位/ 运算/ 的/ 比较/ 算法/ 有/ 以下/ 两个/ 优点/ :/ ①/ 由于/ CPU/ 适合/ 于/ 位操作/ ,/ 因此/ 基于/ 位/ 运算/ 的/ 位置/ 比较/ 算法/ 更能/ 充分/ CPU/ 的/ 计算/ 优势/ ;/ ②/ 比较/ 次数/ 降低/ ,/ 当/ 使用/ 坐标/ 判断/ 节点/ 的/ 位置/ 关系/ 时/ ,/ 算法/ 需要/ 执行/ 4d/ 次/ 坐标/ 比较/ (/ 判断/ 相交/ 和/ 包含/ )/ ./ 相反/ ,/ 本文/ 只/ 需/ 2d/ 次位/ 运算/ 就/ 可以/ 知道/ 查询/ 区域/ 和/ 节点/ 间/ 的/ 位置/ 关系/ ./ 4.5/ 基于/ HGD/ 森林/ 的/ 多维/ 数据管理/ 前/ 文/ 介绍/ 了/ 基于/ 二维/ 空间/ 的/ HGD/ -/ Tree/ ./ 因为/ HGD/ -/ Tree/ 是/ 以/ 网格/ 为/ 基础/ 构建/ 的/ 索引/ ,/ 所以/ 当/ 数据/ 维度/ d/ 大于/ 2/ 时/ ,/ 索引/ 的/ 空间/ 代价/ 和/ 维护/ 代价/ 会/ 急剧/ 提高/ ./ 为了/ 折衷/ 查询/ 性能/ 和/ 维护/ 性能/ ,/ 本/ 节/ 提出/ 了/ HGD/ 森林/ 解决/ 这一/ 问题/ ./ 给定/ 参数/ m/ ,/ 本文/ 根据/ m/ 将/ 对象/ o/ 的/ 属性/ {/ a1/ ,/ a2/ ,/ …/ ,/ ad/ }/ 分为/ {/ a1/ ,/ a2/ ,/ …/ ,/ am/ }/ ,/ {/ am/ +/ 1/ ,/ am/ +/ 2/ ,/ …/ ,/ a2m/ }/ ,/ …/ ,/ {/ ad/ // mm/ +/ 1/ ,/ ad/ // mm/ +/ 2/ ,/ ad/ 维/ 数据/ 独立/ 的/ 建立/ HGD/ -/ Tree/ / 1/ ,/ BHG/ -/ Tree/ / / 1/ ,/ 法/ 同时/ 维护/ 这些/ 索引/ ./ 由于/ 维护/ 算法/ 已/ 在上文/ 描述/ ,/ 本/ 节/ 不再/ 重复/ ./ 需要/ 强调/ 的/ 是/ ,/ 虽然/ 本文/ 构建/ 了/ 多个/ 索引/ 维护/ 多维/ 数据/ ,/ 但是/ 本文/ 并/ 不会/ 为/ 每个/ 索引/ 复制/ 一个/ 关于/ 多维/ 概率/ 数据/ 的/ 副本/ ./ 相反/ ,/ 在/ 每个/ 索引/ 中/ ,/ 我们/ 只/ 保留/ 它们/ 的/ ID/ ./ 概率/ 对象/ 的/ 内容/ 在/ 单独/ 的/ 空间/ 内/ 保存/ ./ 接下来/ ,/ 本/ 节/ 介绍/ 查询/ 算法/ ./ 给定/ 查询/ q/ ,/ HGD/ -/ Tree/ 的/ α/ 层/ 索引/ 层/ 索引/ 先/ 在/ / α/ 1/ ∪/ / / α/ 1/ ,/ 找/ 符合条件/ 的/ 对象/ ./ 其次/ ,/ SHAB/ 对/ 查询/ 结果/ / 2/ ,/ …/ ,/ 合/ / 1/ ∩/ / 2/ ∩/ …/ ∩/ / d/ // m/ ./ 对于/ / o/ ∈/ / 1/ ∩/ / 2/ ∩/ …/ ∩/ / d/ // m/ ,/ SHAB/ 根据/ 式/ (/ 9/ )/ 、/ (/ 10/ )/ 计算/ o/ 出现/ 在/ qr/ 的/ 概率/ 上/ 下界/ ./ ub/ (/ o/ ,/ q/ )/ 1/ ×/ ub/ (/ o/ ,/ q/ )/ 2/ ×/ …/ ×/ ub/ (/ o/ ,/ q/ )/ d/ // m/ (/ 9/ )/ lb/ (/ o/ ,/ q/ )/ 1/ ×/ lb/ (/ o/ ,/ q/ )/ 2/ ×/ …/ ×/ ub/ (/ o/ ,/ q/ )/ d/ // m/ (/ 10/ )/ 我们/ 需要/ 强调/ 的/ 是/ :/ 由于/ 我们/ 引入/ 了/ 参数/ m/ ,/ HGD/ -/ Tree/ 可以/ 根据/ 数据/ 的/ 特点/ 和/ 数据/ 维度/ 自/ 适应/ 的/ 选择/ 划分/ 策略/ ./ 这样/ 以来/ ,/ HGD/ -/ Tree/ 可以/ 避免/ 维度/ 过高/ 而/ 引发/ 的/ 问题/ ./ 本文/ 将/ 在/ 实验/ 部分/ 讨论/ 适合/ 的/ 参数/ m/ ./ Page135/ 实验/ 分析/ 5.1/ 实验/ 准备/ 本/ 节/ 首先/ 讨论/ 了/ 数据/ 集/ 的/ 获取/ ./ 接下来/ ,/ 本文/ 讨论/ 参数/ 的/ 设置/ 和/ 实验/ 方法/ ./ (/ 1/ )/ 数据/ 集/ ./ 实验/ 的/ 第/ 1/ 个/ 真实/ 数据/ 集/ 中国/ 深/ 沪/ 两市/ 约/ 2300/ 支/ 股票/ 近/ 10/ 年内/ 的/ 交易/ 数据/ ./ 交易/ 记录/ 大约/ 5GB/ 条/ ,/ 占用/ 150GB/ 的/ 磁盘空间/ ./ 为了/ 降低/ 数据/ 规模/ ,/ 本文/ 以/ 周为/ 单位/ 将/ 这些/ 数据/ 按照/ 股票/ ID/ 抽象/ 成/ 概率/ 数据/ ./ 具体/ 地/ ,/ 实验/ 根据/ 各支/ 股票/ 一周/ 内/ 的/ 交易/ 记录/ 随机/ 选取/ 槡/ N/ (/ N/ 为/ 该/ 股票/ 一周/ 内/ 的/ 交易/ 总量/ )/ 条/ 记录/ 作为/ 样本/ 点/ ./ 然后/ ,/ 实验/ 将/ 这些/ 条/ 记录/ 中/ 的/ 交易价格/ 和/ 交易/ 数量/ 当做/ 概率/ 数据/ 的/ 两个/ 维度/ ./ 和/ 文献/ [/ 1/ ,/ 5/ -/ 7/ ]/ 中/ 一样/ ,/ 实验/ 的/ 第/ 2/ 个/ 真实/ 数据/ 集是/ LosAngeles/ 的/ 位置/ 数据/ ./ 本文/ 根据/ 这些/ 数据/ 生成/ 边长/ 为/ 500/ 的/ 正方形/ ,/ 然后/ 为/ 每条/ 数据/ 根据/ 正态分布/ 生成/ 100/ 个/ 样本/ 点/ ,/ 并/ 将/ 这些/ 数据/ 作为/ 概率/ 数据/ ./ 第/ 2/ 个/ 合成/ 数据/ 集/ 模拟/ 了/ 正态分布/ 的/ 数据/ ./ 它/ 分别/ 包含/ 了/ 10TB/ 条/ 2d/ ,/ 3d/ ,/ 4d/ 数据/ ./ 与/ 第/ 1/ 个/ 合成/ 数据/ 集/ 类似/ ,/ 本文/ 按照/ 110000/ 的/ 方式/ 生成/ 概率/ 数据/ ,/ 且/ 每条/ 概率/ 数据/ 内/ 仍然/ 包含/ 100/ 个/ 样本/ 点/ ./ 此外/ ,/ 实验/ 生成/ 了/ 两个/ 合成/ 数据/ 集/ ./ 每个/ 数据/ 集/ 包含/ 10TB/ 条/ 的/ 多维/ 数据/ ./ 第/ 1/ 个/ 合成/ 数据/ 集是/ 模拟/ 环境监测/ 得到/ 的/ 数据/ 集/ ./ 该组/ 实验/ 生成/ 1MB/ 个/ 虚拟/ 传感器/ ,/ 它们/ 不间断/ 的/ 上报/ 数据/ 当/ 数据/ 收集/ 到/ 10TB/ ,/ 实验/ 以/ 小时/ 为/ 单位/ 生成/ 概率/ 数据/ ./ 其中/ ,/ 每条/ 概率/ 数据/ 内/ 包含/ 100/ 个/ 样本/ 点/ ./ (/ 2/ )/ 参数设置/ ./ 在/ 本/ 实验/ 中/ ,/ 两个/ 重要/ 参数/ 需要/ 测试/ ./ 它们/ 是/ 查询/ 范围/ qr/ 和/ 概率/ 阈值/ q/ θ/ ./ 参照/ 文献/ [/ 1/ ,/ 5/ -/ 7/ ]/ 中/ 的/ 参数设置/ 方法/ ,/ 本文/ 将/ 查询/ 范围/ 从/ 值域/ 的/ 0.01/ d/ 扩大/ 到/ 0.1/ d/ ,/ 默认值/ 为/ 0.05/ d/ ./ 概率/ 阈值/ 从/ 0.1/ 增加/ 到/ 0.9/ ,/ 默认值/ 为/ 0.5/ ./ 此外/ ,/ 本文/ 重点/ 讨论/ 了/ 数据/ 更新/ 频繁/ 时/ 的/ 概率/ 数据管理/ ./ 在/ 这里/ ,/ 本/ 节/ 需要/ 测试/ 更新/ 速度/ 对/ 索引/ 性能/ 的/ 影响/ ./ 在/ 默认/ 条件/ 下/ ,/ 实验/ 将/ 单次/ 插入/ // 删除/ 的/ 对象/ 数目/ 设置/ 成/ 10/ ;/ 变化/ 范围/ 是/ [/ 1/ ,/ 1KB/ ]/ ./ 表/ 2/ 描述/ 了/ 参数设置/ 和/ 默认值/ ./ 测试/ 参数/ 查询/ 范围/ 概率/ 阈值/ 索引/ 规模/ 更新/ 规模/ 数据/ 集/ 数据/ 维度/ (/ 3/ )/ 实验/ 方法/ ./ 本文/ 首先/ 从文件/ 中/ 读入/ 0.5/ |/ / |/ 条/ 数据/ 初始化/ HGD/ -/ Tree/ ./ 接下来/ ,/ 实验/ 分成/ 以下/ 两组/ :/ 第/ 1/ 组/ 实验/ 是/ 在/ 索引/ 不/ 更新/ 的/ 条件/ 下/ 测试/ HGD/ -/ Tree/ 的/ 过滤/ 能力/ 、/ 查询/ 效率/ 和/ 空间/ 代价/ ./ 查询/ 的/ 默认/ 个数/ 为/ 100/ ;/ 位置/ 随机/ 生成/ ./ 第/ 2/ 组/ 实验/ 是/ 在/ 数据/ 频繁/ 更新/ 的/ 情况/ 下/ 测试/ HGD/ -/ Tree/ 的/ 更新/ 能力/ 和/ 综合性/ 能/ ./ 在/ 测试/ 更新/ 能力/ 时/ ,/ 本文/ 重复/ 以下/ 操作/ :/ ①/ 从文件/ 中/ 读入/ s/ 条/ 概率/ 数据/ ;/ ②/ 将/ 它们/ 插入/ 到/ HGD/ -/ Tree/ ;/ ③/ 随机/ 删除/ s/ 条/ 概率/ 数据/ ./ 当/ 数据/ 集中/ 所有/ 数据/ 被/ 处理/ 后/ ,/ 结束/ 测试/ ./ 在/ 测试综合/ 性能/ 时/ ,/ 实验/ 方法/ 每/ 更新/ s/ 条/ 概率/ 数据/ 后/ 提交/ s/ 条/ 查询/ ./ 最后/ ,/ 本/ 节/ 介绍/ 实验/ 的/ 对比/ 算法/ ./ 它们/ 是/ U/ -/ Tree/ 和/ UD/ -/ Tree/ ./ (/ 4/ )/ 数据/ 规模/ 的/ 变化/ ./ 本文/ 首先/ 测试/ 概率模型/ 对/ 数据/ 规模/ 的/ 影响/ ./ 表/ 3/ 展示/ 了/ 这/ 3/ 组/ 数据/ 集在/ 引入/ 概率模型/ 后/ 数据/ 规模/ 的/ 变化/ ./ 如表/ 3/ 所示/ ,/ 在/ 引入/ 概率模型/ 后/ ,/ 数据/ 的/ 规模/ 大幅/ 下降/ ./ 因此/ ,/ 索引/ 的/ 负担/ 也/ 会/ 大幅/ 减轻/ ./ 数据/ 集/ 名称/ 真实/ 数据/ 集/ I/ 真实/ 数据/ 集/ II/ 合成/ 数据/ 集/ I/ 合成/ 数据/ 集/ II5/ ./ 2/ 实验/ 分析/ (/ 1/ )/ 查询/ 范围/ 对/ 索引/ 的/ 影响/ ./ 这组/ 实验/ 测试/ 查询/ 范围/ 对/ 索引/ 性能/ 的/ 影响/ ./ 这组/ 实验/ 采用/ 真实/ 数据/ 集/ I/ 作为/ 测试数据/ ;/ 其他/ 参数均/ 使用/ 默认/ 参数/ ;/ 对比/ 算法/ 是/ U/ -/ Tree/ 和/ UD/ -/ Tree/ ./ 如图/ 11/ (/ a/ )/ 所示/ ,/ HGD/ -/ Tree/ 的/ 过滤/ 能力/ 强于/ U/ -/ Tree/ 和/ UD/ -/ Tree/ ./ 特别/ 地/ ,/ 随着/ 搜索/ 范围/ 的/ 扩大/ ,/ 基于/ 这/ 3/ 种/ 索引/ 得到/ 的/ 候选/ 集/ 规模/ 都/ 有/ 不同/ 程度/ 的/ 扩大/ ./ 然而/ ,/ 相/ 比较/ 于/ UD/ -/ Tree/ 和/ U/ -/ Tree/ ,/ HGD/ -/ Tree/ 候选/ 对象/ 集合/ 的/ 规模/ 扩大/ 的/ 最小/ ./ 原因/ 是/ :/ 随着/ 查询/ 范围/ 的/ 扩大/ ,/ 与/ 查询/ 范围/ 相交/ 的/ 概率/ 对象/ 也/ 会/ 随之/ 增多/ ./ 在/ 这种/ 情况/ 下/ ,/ 概率/ 对象/ SUM/ 的/ 剪枝/ 能力/ 变得/ 尤为重要/ ./ 图/ 11/ (/ b/ )/ 对比/ 了/ 基于/ 这/ 3/ 种/ 索引/ 的/ 查询/ 时间/ ./ 其中/ ,/ HGD/ -/ Tree/ 的/ 运行/ 时间/ 最短/ ./ 具体/ 原因/ 是/ :/ ①/ 本文/ 是/ 以/ 网格/ 为/ 基础/ 构建/ 的/ 索引/ ./ 对于/ 内存/ 索引/ 来说/ ,/ 它/ 的/ 访问速度/ 最快/ ;/ ②/ SUM/ 的/ 剪枝/ 能力/ 更强/ ,/ 这/ 可以/ 有效/ 的/ 减少/ 验证/ 次数/ ;/ ③/ 基于/ 位/ 运算/ 的/ SUM/ 访问/ 算法/ 可以/ 近/ 一步/ 降低/ 计算/ 代价/ 从而/ 降低/ 查询/ 时间/ ./ (/ 2/ )/ 概率/ 阈值/ 对/ 索引/ 的/ 影响/ ./ 这组/ 实验/ 测试/ 的/ 内/ Page14/ 容是/ 查询/ 概率/ 阈值/ 对/ 索引/ 性能/ 的/ 影响/ ./ 这组/ 实验/ 采用/ 真实/ 数据/ 集/ I/ 作为/ 测试数据/ ;/ 其他/ 参数均/ 使用/ 默认/ 参数/ ;/ 对比/ 算法/ 是/ U/ -/ Tree/ 和/ UD/ -/ Tree/ ./ 如图/ 12/ (/ b/ )/ 所示/ ,/ 概率/ 阈值/ 对于/ 各种/ SUM/ 的/ 剪枝/ 能力/ 影响/ 不图/ 11/ 查询/ 范围/ 对/ 索引/ 的/ 影响/ 图/ 12/ 概率/ 阈值/ 对/ 索引/ 的/ 影响/ 图/ 13/ 数据/ 规模/ 对/ 索引/ 的/ 影响/ (/ 3/ )/ 索引/ 的/ 查询/ 效率/ ./ 这组/ 实验/ 测试/ 的/ 内容/ 是/ 数据/ 规模/ 对/ 索引/ 性能/ 的/ 影响/ ./ 这组/ 实验/ 采用/ 真实/ 数据/ 集/ I/ 作为/ 测试数据/ ;/ 其他/ 参数均/ 使用/ 默认/ 参数/ ;/ 对比/ 算法/ 是/ U/ -/ Tree/ 和/ UD/ -/ Tree/ ./ 数据/ 规模/ 从/ 0.1/ 扩大/ 到/ 0.9/ / ./ 如图/ 13/ (/ a/ )/ 所示/ ,/ 随着/ 数据/ 规模/ 的/ 扩大/ ,/ 基于/ 这/ 3/ 种/ 索引/ 得到/ 的/ 候选/ 集/ 规模/ 都/ 有/ 不同/ 程度/ 的/ 扩大/ ./ 然而/ ,/ 相/ 比较/ 于/ UD/ -/ Tree/ 和/ U/ -/ Tree/ ,/ HGD/ -/ Tree/ 候选/ 对象/ 集合/ 扩大/ 的/ 规模/ 最小/ ./ 原因/ 是/ :/ 随着/ 数据/ 规模/ 的/ 扩大/ ,/ 与/ 查询/ 范围/ 相交/ 的/ 概率/ 对象/ 也/ 会/ 随之/ 增多/ ./ 在/ 这种/ 情况/ 下/ ,/ 概率/ 对象/ SUM/ 对大/ ./ 与/ 图/ 11/ (/ a/ )/ 中/ 的/ 剪枝/ 能力/ 对比/ 结果/ 相似/ ,/ HGD/ -/ Tree/ 的/ 剪枝/ 能力/ 最强/ ./ UD/ -/ Tree/ 强于/ U/ -/ Tree/ ./ 图/ 13/ (/ b/ )/ 对比/ 了/ 3/ 种/ 索引/ 的/ 总体/ 运行/ 时间/ ./ 与/ 图/ 11/ (/ b/ )/ 中/ 的/ 结果/ 相似/ ,/ HGD/ -/ Tree/ 的/ 查询/ 时间/ 最短/ ./ 索引/ 的/ 性能/ 产生/ 至关重要/ 的/ 作用/ ./ 因为/ 基于/ HGD/ -/ Tree/ 的/ SUM/ 的/ 过滤/ 能力/ 最强/ ,/ 数据/ 规模/ 对/ 索引/ 性能/ 的/ 影响/ 最小/ ./ (/ 4/ )/ 索引/ 的/ 空间/ 效率/ ./ 这组/ 实验/ 测试/ 的/ 内容/ 是/ 数据/ 规模/ 对/ 索引/ 空间/ 效率/ 的/ 影响/ ./ 这组/ 实验/ 采用/ 真实/ 数据/ 集/ I/ 作为/ 测试数据/ ;/ 数据/ 规模/ 从/ 0.1/ |/ / |/ 扩大/ 到/ 0.9/ |/ / |/ ./ 对比/ 索引/ 是/ U/ -/ Tree/ 和/ UD/ -/ Tree/ ./ 如图/ 14/ 所示/ ,/ 随着/ 数据/ 规模/ 的/ 扩大/ ,/ HGD/ -/ Tree/ 的/ 空间/ 代价/ 上升幅度/ 最小/ ./ 其中/ ,/ 最/ 主要/ 的/ 原因/ 是/ SUMp/ 在/ 大多数/ 情况/ 下/ 只/ 需较/ 少/ 的/ 子/ 区域/ 表示/ 一个/ 划分/ ./ 其次/ ,/ Page15/ 本文/ 基于/ bit/ 向量/ 存储/ SUMp/ ./ 这种/ 方法/ 又/ 近/ 一步/ 降低/ 了/ 空间/ 代价/ ./ 如图/ 15/ 利用/ 合成/ 数据/ 集再/ 一次/ 测试/ 了/ 索引/ 的/ 空间/ 效率/ ./ 由/ 实验/ 结果/ 可知/ ,/ HGD/ -/ Tree/ 的/ 空间/ 代价/ 最低/ ./ (/ 5/ )/ 不同/ 数据/ 集对/ 索引/ 的/ 影响/ ./ 这组/ 实验/ 测试/ 的/ 内容/ 是/ 不同/ 数据/ 对/ 索引/ 的/ 性能/ 的/ 影响/ ./ 实验/ 方法/ 和/ 参数设置/ 同图/ 17/ 中/ 的/ 实验/ 相同/ ./ 如图/ 15/ 所示/ ,/ 在/ 不同/ 测试数据/ 集中/ ,/ HGD/ -/ Tree/ 的/ 性能/ 最好/ ./ 这/ 说明/ 了/ HGD/ -/ Tree/ 有着/ 较为/ 广泛/ 的/ 应用/ 范围/ ./ (/ 6/ )/ 更新/ 速度/ 对/ 索引/ 的/ 影响/ ./ 这组/ 实验/ 测试/ 的/ 内容/ 是/ 索引/ 的/ 更新/ 能力/ ./ 本文/ 在/ 这组/ 实验/ 里/ 并/ 不/ 考虑/ 查询/ 对/ 索引/ 的/ 影响/ ./ 这组/ 实验/ 采用/ 真实/ 数据/ 集/ I/ 作为/ 测试数据/ ;/ 其他/ 参数均/ 使用/ 默认/ 参数/ ./ 如图/ 16/ 所示/ ,/ HGD/ -/ Tree/ 的/ 动态/ 更新/ 能力/ 最强/ ./ 这里/ 有/ 两/ 方面/ 原因/ :/ ①/ HGD/ -/ Tree/ 使用/ 以/ 网格/ 为/ 基础/ 管理/ 概率/ 数据/ ./ 该/ 结构/ 适用/ 于/ 在/ 数据/ 更新/ 频繁/ 的/ 条件/ 下/ 使用/ ;/ ②/ 本文/ 引入/ 了/ 一种/ 缓冲/ 机制/ 批量/ 的/ 更新/ 数据/ ./ (/ 7/ )/ 索引/ 的/ 综合性/ 能/ ./ 这组/ 实验/ 采用/ 真实/ 数据/ 集/ I/ 作为/ 测试数据/ ;/ 其他/ 参数均/ 使用/ 默认/ 参数/ ;/ 本文/ 在/ 这组/ 实验/ 里/ ,/ 查询/ 和/ 更新/ 交替/ 进行/ ./ 他们/ 之间/ 的/ 比例/ 为/ 11/ ./ 如图/ 17/ 所示/ ,/ HGD/ -/ Tree/ 的/ 性能/ 最好/ ./ 这里/ 有/ 两/ 方面/ 原因/ :/ ①/ HGD/ -/ Tree/ 的/ 更新/ 能力/ 远远/ 强于/ 其他/ 索引/ ;/ ②/ HGD/ -/ Tree/ 的/ 查询/ 效率/ 高于/ 其他/ 索引/ ./ 因此/ ,/ HGD/ -/ Tree/ 的/ 综合性/ 能/ 最好/ ./ (/ 8/ )/ 最/ 适当/ 的/ 参数/ m/ ./ 实验/ 的/ 最后/ ,/ 本文/ 讨论/ 了/ 关于/ 参数/ m/ 的/ 设置/ ./ 本节/ 最后/ 讨论/ 关于/ 参数/ m/ 的/ 设置/ ./ 本文/ 采用/ 的/ 数据/ 集/ 为/ 合成/ 数据/ 集/ ,/ 它/ 包含/ 了/ 6/ 个/ 属性/ ./ 为了/ 避免/ 维度/ 过高/ 而/ 引起/ 高昂/ 的/ 空间/ 代价/ 和/ 维护/ 代价/ ,/ 本文/ 将/ 多维/ 数据/ 的/ 属性/ 按照/ 其/ 维度/ 进行/ 划分/ ./ 图/ 18/ 、/ 图/ 19/ 分别/ 评估/ 了/ 不同/ 划分/ 下/ 索引/ 的/ 过滤/ 能力/ ,/ 计算/ 代价/ 和/ 空间/ 代价/ ./ 所有/ 参数均/ 为/ 默认/ 参数/ ./ 图/ 19/ 报告/ 了/ 参数/ m/ 对/ 算法/ 过滤/ 能力/ 的/ 影响/ ./ 其中/ ,/ 候选/ 集/ 个数/ 为/ |/ / 1/ ∪/ / 2/ ∪/ …/ ∪/ / d/ // m/ |/ ./ 如图/ 20/ 可知/ ,/ 查询/ 代价/ 也/ 是/ 随着/ m/ 的/ 增大/ 而/ 降低/ ./ 但是/ ,/ 我们/ 发现/ ,/ 当/ m/ / 2/ 时/ ,/ 下降/ 速度/ 变得/ 非常/ 缓慢/ ./ 其/ 原因/ 是/ :/ ①/ 本文/ 提出/ 的/ 索引/ 具有/ 较强/ 的/ 过滤/ 能力/ ./ 因此/ ,/ 参与/ 合并/ 的/ 候选/ 对象/ 个数/ 也/ 是/ 有限/ 的/ ;/ ②/ 本文/ 采用/ 位/ 运算/ 加速/ 查询/ ,/ 它会/ 额外/ 降低/ 算法/ 的/ 计算/ 代价/ ./ 因此/ ,/ 当/ m/ 减小/ 是/ ,/ 查询/ 性能/ 的/ 下降/ 速度/ 非常/ 缓/ Page16/ 慢/ ./ 此外/ ,/ 随着/ m/ 的/ 增长/ ,/ 算法/ 的/ 空间/ 代价/ 快速增长/ ./ 其/ 根本原因/ 是/ ,/ 当/ m/ 增加/ 是/ ,/ 对象/ summary/ 包含/ 的/ 子/ 区域/ 个数/ 迅速/ 增加/ ./ 因此/ 索引/ 的/ 整体/ 空间/ 代价/ 会/ 增加/ ./ (/ 9/ )/ 数据/ 维度/ 对/ 索引/ 的/ 影响/ ./ 这组/ 实验/ 测试/ 的/ 内容/ 是/ 数据/ 维度/ 对/ 索引/ 性能/ 的/ 影响/ ./ 这组/ 实验/ 采用/ 合成/ 数据/ 集/ II/ 作为/ 测试数据/ 集/ ;/ 其他/ 参数均/ 使用/ 默认/ 参数/ ./ 对比/ 算法/ 是/ U/ -/ Tree/ 和/ UD/ -/ Tree/ ./ 数据/ 维度/ 从/ 2/ 维/ 增加/ 到/ 6/ 维/ ./ 如图/ 20/ ~/ 图/ 22/ 所示/ ,/ 随着/ 维度/ 的/ 增加/ U/ -/ Tree/ 和/ UD/ -/ Tree/ 的/ 查询/ 代价/ 都/ 快速/ 上升/ ./ 相反/ ,/ HGD/ 森林/ 的/ 查询/ 代价/ 上升幅度/ 相对/ 缓慢/ ./ 这有/ 两/ 方面/ 原因/ :/ ①/ SUMp/ 的/ 剪枝/ 能力/ 强于/ 其他/ 索引/ ./ 当对/ 多个/ 索引/ 的/ 查找/ 结果/ 求交时/ ,/ 因为/ 候选/ 集中/ 包含/ 的/ 对象/ 个数/ 较/ 少/ ,/ 维度/ 对/ HGD/ -/ Tree/ 的/ 影响/ 是/ 有限/ 的/ ;/ ②/ HGD/ -/ Tree/ 是/ 以/ 网格/ 为/ 基础/ 构建/ 的/ ./ 它/ 在/ 维度/ 小于/ 2/ 时/ 具有/ 很大/ 的/ 优势/ ./ 所以/ ,/ HGD/ 森林/ 的/ 性能/ 最好/ ./ 如图/ 21/ 所示/ ,/ 随着/ 维度/ 的/ 增加/ ,/ 3/ 种/ 索引/ 的/ 更新/ 代价/ 都/ 是/ 呈/ 线性/ 增长/ 的/ ./ 其中/ ,/ HGD/ -/ Tree/ 增长/ 的/ 最慢/ ./ 其/ 根本原因/ 是/ :/ ①/ HGD/ -/ Tree/ 在/ 为/ 对象/ 构建/ summary/ 速度/ 较/ 快/ ;/ ②/ 4.2/ ./ 3/ 节中/ 的/ 批处理/ 算法/ 可以/ 使得/ HGD/ -/ Tree/ 快速/ 的/ 更新/ ./ 如图/ 22/ 所示/ ,/ 随着/ 维度/ 的/ 增加/ ,/ 所有/ 索引/ 的/ 空间/ 代价/ 都/ 是/ 随着/ 维度/ 线性/ 增长/ ./ 因此/ ,/ HGD/ -/ Tree/ 的/ 空间/ 代价/ 依旧/ 远远/ 好于/ 其他/ 索引/ ./ 6/ 结论/ 本文/ 研究/ 了/ 支持/ 频繁/ 更新/ 的/ 概率/ 数据/ 范围/ 查询/ 的/ 索引/ ./ 本文/ 首先/ 提出/ 了/ 一种/ 适用/ 于/ 管理/ 数据/ 更新/ 频繁/ 的/ 索引/ HGD/ -/ Tree/ ./ 它/ 不仅/ 是/ 一个/ 平衡/ 的/ 结构/ ,/ 而且/ 具有/ 很强/ 的/ 动态/ 更新/ 能力/ ./ 其次/ ,/ 本文/ 提出/ 了/ 一种/ 批处理/ 算法/ 处理/ 索引/ 的/ 更新/ ./ 再次/ ,/ 本文/ 提出/ 基于/ 样本/ 点/ 距离/ 的/ SUM/ 构造/ 算法/ ./ 该/ 算法/ 可以/ 用/ 较/ 少/ 的/ 空间/ 代价/ 构造/ 出/ 更/ 能/ 反应/ 对象/ 概率密度/ 特征/ 的/ SUM/ ./ 最后/ ,/ 通过/ 大量/ 实验/ 验证/ 了/ 本文/ 提出/ 算法/ 的/ 有效性/ 和/ 实用性/ ./ 

