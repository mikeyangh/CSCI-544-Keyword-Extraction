Page1/ 无/ 结构/ 覆盖/ 网络/ 中/ 面向/ 搜索/ 范围/ 最小化/ 的/ 副本/ 分布/ 冯/ 国富/ 1/ )/ 李/ 文中/ 2/ )/ 张/ 金城/ 1/ )/ 陆桑璐/ 2/ )/ 陈道/ 蓄/ 2/ )/ 1/ )/ (/ 南京审计学院/ 信息科学/ 学院/ 南京/ 210029/ )/ 2/ )/ (/ 南京大学/ 软件/ 新/ 技术/ 国家/ 重点/ 实验室/ 南京/ 210093/ )/ 摘要/ 复制技术/ 常用/ 于/ 无/ 结构/ 覆盖/ 网络/ ,/ 用以/ 提高/ 系统/ 性能/ ./ 在/ 复制技术/ 中有/ 一个/ 基础性/ 问题/ 经常/ 被/ 论及/ :/ 给定/ 访问/ 频率/ 和/ 存储空间/ ,/ 系统/ 该/ 为/ 每个/ 数据/ 保留/ 多少/ 副本/ ?/ 平方根/ 分布/ 在/ 过去/ 通常/ 被/ 认为/ 最优/ ,/ 即当/ 每个/ 数据/ 的/ 副本/ 数量/ 正比/ 于/ 数据/ 大小/ 和/ 访问/ 频率/ 的/ 平方根/ 时/ ,/ 系统/ 在/ 搜索/ 过程/ 中/ 转发/ 的/ 消息/ 数量/ 最少/ ./ 但/ 文中/ 工作/ 表明/ ,/ 该/ 观点/ 并非/ 总是/ 正确/ 的/ ./ 首先/ ,/ 我们/ 认为/ ,/ 为了/ 达到/ 理论/ 最优/ ,/ 每个/ 数据/ 的/ 副本/ 数量/ 应该/ 反比/ 于/ 数据/ 大小/ 的/ 平方根/ ./ 其次/ ,/ 在/ 现实/ 环境/ 中/ ,/ 当/ TTL/ 较/ 小/ 或/ 副本/ 密度/ 较/ 小时/ ,/ 平方根/ 分布/ 并非/ 最优/ ./ 文中/ 首先/ 对/ 问题/ 进行/ 形式化/ 描述/ 和/ 建模/ ,/ 给出/ 理论/ 答案/ ,/ 然后/ 用/ 模拟实验/ 验证/ 了/ 提出/ 的/ 观点/ ,/ 并/ 分析/ 了/ 文中/ 结论/ 与/ 平方根/ 分布/ 不/ 一致/ 的/ 原因/ ./ 尽管/ 文中/ 结论/ 是/ 以/ P2P/ 背景/ 得出/ 的/ ,/ 但/ 它/ 同样/ 适用/ 于/ 那些/ 以/ 应用层/ 无/ 结构/ 覆盖/ 网络管理/ 资源/ 的/ 分布式系统/ ./ 关键词/ 无/ 结构/ 覆盖/ 网络/ ;/ 副本/ 数量/ 分布/ ;/ 搜索/ 范围/ ;/ 访问/ 频率/ ;/ 数据/ 大小/ 1/ 引言/ 作为/ 一种/ 分布式/ 资源管理/ 方式/ ,/ 无/ 结构/ 覆盖/ 网络/ 广泛应用/ 于/ 今天/ 基于/ Internet/ 的/ 分布式应用/ ./ 在/ 全/ 分布/ 无/ 结构/ 覆盖/ 网络/ 中/ ,/ 每个/ 节点/ 连接/ 几个/ 邻居/ ,/ 形成/ AdHoc/ 网络/ ./ 每个/ 节点/ 可以/ 通过/ 邻居/ 转发/ 查询/ 消息/ ,/ 实现/ 对/ 目标/ 资源/ 的/ 一步步/ 遍历/ 查找/ ./ 由于/ 覆盖/ 网络结构/ 与/ 数据/ 内容/ 无关/ ,/ 一个/ 节点/ 并/ 不/ 清楚/ 目标/ 资源/ 在/ 哪个/ 方向/ ,/ 并/ 不/ 清楚/ 哪个/ 邻居/ 更/ 容易/ 命中/ 查询/ ./ 为此/ ,/ 复制技术/ 被/ 广泛应用/ 于/ 无/ 结构/ 覆盖/ 网络/ ,/ 用以/ 改善/ 盲目/ 搜索/ 系统/ 的/ 性能/ ./ 关于/ 无/ 结构/ 覆盖/ 网络/ 中/ 的/ 复制技术/ ,/ 一个/ 基础性/ 的/ 问题/ 经常/ 被/ 论及/ :/ 给定/ 数据/ 大小/ 分布/ 、/ 访问/ 频率/ 分布/ 和/ 节点/ 存储空间/ ,/ 为/ 达到/ 系统/ 性能/ 最优/ ,/ 系统/ 究竟/ 该/ 为/ 每个/ 数据/ 保留/ 多少/ 副本/ ?/ 即/ 基于/ 数据/ 大小/ 和/ 访问/ 频率/ 等/ 异构/ 特性/ ,/ 合理/ 分配/ 有限/ 的/ 存储空间/ ,/ 将/ 可以/ 得到/ 更优/ 的/ 系统/ 性能/ ./ 在/ 相关/ 工作/ 中/ ,/ 最为/ 知名/ 的/ 是/ 由/ Cohen/ 和/ Shenker/ 提出/ 的/ 平方根/ 分布/ [/ 1/ ]/ ./ Cohen/ 和/ Shenker/ 定义/ 搜索/ 范围/ (/ searchsize/ )/ 为/ 成功/ 命中/ 一个/ 查询/ 需要/ 遍历/ 节点/ 的/ 数量/ ,/ 并且/ 认为/ ,/ 当/ 每个/ 数据/ 的/ 副本/ 数量/ 正比/ 于/ 其/ 数据/ 大小/ 、/ 正比/ 于/ 其/ 访问/ 频率/ 的/ 平方根/ 时/ ,/ 平均/ 搜索/ 范围/ 将/ 最小/ ./ 但/ 本文/ 的/ 工作/ 表明/ ,/ 该/ 工作/ 有/ 两点/ 缺陷/ :/ (/ 1/ )/ 平方根/ 分布/ 其实/ 有/ 一个/ 隐含/ 的/ 假设/ 前提/ ,/ TTL/ (/ TimetoLive/ )/ 需要/ 无限大/ 以/ 保证/ 每个/ 数据/ 都/ 有/ 足够/ 高/ 的/ 搜索/ 成功率/ ,/ 这/ 在/ 现实/ 中是/ 很/ 难/ 成立/ 的/ ./ (/ 2/ )/ 关于/ 数据/ 大小/ 的/ 影响/ ,/ 可以/ 证明/ ,/ 本文/ 提出/ 的/ 数据/ 副本/ 数量/ 分布/ 要/ 优于/ Cohen/ 和/ Shenker/ 给出/ 的/ 结论/ ./ 本文/ 同样/ 论述/ 在/ 无/ 结构/ 覆盖/ 网络/ 中/ 如何/ 通过/ 合理/ 的/ 数据/ 副本/ 数量/ 分布/ 来/ 达到/ 最小/ 的/ 平均/ 搜索/ 范围/ (/ ExpectedSearchSize/ ,/ ESS/ )/ ./ 本文/ 第/ 2/ 节/ 介绍/ 相关/ 工作/ ;/ 第/ 3/ 节/ 给出/ 环境/ 模型/ 和/ 问题/ 定义/ ;/ 第/ 4/ 节/ 考虑/ 数据/ 大小/ 的/ 影响/ 并/ 给出/ 最优/ 分布/ ;/ 第/ 5/ 节/ 研究/ 现实/ 环境/ 中/ 的/ 数据/ 副本/ 最优/ 分布/ ;/ 最后/ 第/ 6/ 节是/ 全文/ 总结/ ./ 2/ 相关/ 工作/ 复制技术/ 常用/ 于/ 无/ 结构/ 覆盖/ 网络/ 用以/ 提高/ 系统/ 性能/ ./ 首先/ ,/ 将/ 同一/ 数据/ (/ 或/ 服务/ )/ 主动/ 部署/ 于/ 较/ 多/ 的/ 分散/ 节点/ ,/ 可以/ 提高/ 系统/ 的/ 可靠性/ ,/ 利于/ 节点/ 之间/ 的/ 负载平衡/ ./ 其次/ ,/ 对/ 用户/ 来讲/ ,/ 复制/ 可以/ 提高/ 资源/ 的/ 可/ 获取/ 性/ ,/ 加快/ 搜索/ 对/ 用户/ 的/ 响应速度/ ./ 此外/ ,/ 节点/ 可以/ 从/ 多个/ 备选/ 节点/ 选择/ 最佳/ 服务/ 提高/ 用户/ 体验/ 度/ ./ 很多/ 数据/ 复制/ 相关/ 研究/ 充分考虑/ 系统/ 在/ 数据/ 大小/ 、/ 访问/ 频率/ 、/ 存储空间/ 等/ 方面/ 的/ 异构/ 性/ 特征/ ,/ 通过/ 优化/ 数据/ 副本/ 数量/ 分布/ 来/ 提高/ 搜索/ 成功率/ 或/ 降低/ 搜索/ 范围/ [/ 2/ -/ 4/ ]/ ./ 目前/ 常用/ 的/ 数据/ 副本/ 数量/ 分布/ 有/ 3/ 种/ :/ 均匀/ 复制/ (/ uniformreplication/ )/ 、/ 正比/ 复制/ (/ propor/ -/ tionalreplication/ )/ 和/ 平方根/ 复制/ (/ square/ -/ rootrepli/ -/ cation/ ,/ 本文/ 称之为/ 平方根/ 分布/ )/ [/ 5/ -/ 6/ ]/ ./ 在/ 均匀/ 复制/ 中/ ,/ 所有/ 数据/ 在/ 系统/ 中/ 拥有/ 相同/ 数量/ 的/ 副本/ ,/ 在/ 正比/ 复制/ 中/ 每个/ 数据/ 的/ 副本/ 数量/ 正比/ 于/ 其/ 访问/ 频率/ ./ Cohen/ 和/ Shenker/ 对比/ 研究/ 了/ 均匀/ 复制/ 和/ 正比/ 复制/ ,/ 发现/ 两者/ 在/ 降低/ 搜索/ 范围/ 方面/ 具有/ 相同/ 效果/ ;/ 同时/ 证明/ ,/ 平方根/ 分布/ 中/ 的/ 平均/ 搜索/ 范围/ 最小/ ./ 此外/ ,/ Cohen/ 和/ Shenker/ 在/ 文献/ [/ 1/ ]/ 中/ 还/ 认为/ ,/ 为了/ 取得/ 最小/ 的/ 搜索/ 范围/ ,/ 每个/ 数据/ 的/ 副本/ 数量/ 应该/ 正比/ 于/ 其/ 大小/ ,/ 尽管/ 文献/ [/ 1/ ]/ 并/ 没有/ 对/ 该/ 观点/ 展开/ 论证/ ./ 但/ 我们/ 发现/ ,/ 文献/ [/ 1/ ]/ 中/ 结论/ 有/ 两个/ 缺陷/ ./ 首先/ ,/ 我们/ 认为/ ,/ 数据/ 副本/ 数量/ 应该/ 正比/ 于/ 数据/ 大小/ 这一/ 观点/ 的/ 正确性/ 是/ 值得/ 怀疑/ 的/ ./ 为了/ 有效/ 地/ 利用/ 存储空间/ ,/ 直觉/ 上/ ,/ 一个/ 数据/ 的/ 副本/ 数量/ 应该/ 与其/ 大小/ 有/ 反向/ 关系/ ./ 因为/ 对/ 用户/ 来讲/ ,/ 数据/ 带来/ 的/ 效果/ 之间/ 是/ 无差别/ 的/ ;/ 对于/ 相同/ 的/ 用户/ 体验/ 效果/ ,/ 大/ 数据/ 却/ 要/ 耗费/ 更/ 多/ 的/ 存储资源/ ./ 第二点/ ,/ 文献/ [/ 1/ ]/ 中/ 结论/ 仅仅/ 适用/ 于/ 搜索/ 成功率/ 接近/ 于/ 100/ %/ 的/ 系统/ ,/ 这/ 在/ 现实/ 中是/ 不/ 成立/ 的/ ./ 这一/ 前提/ 假设/ 隐含/ 表明/ ,/ 系统/ 实现/ 应该/ 有/ 足够/ 大/ 的/ TTL/ 或/ 足够/ 高/ 的/ 副本/ 密度/ 来/ 保证/ 足够/ 高/ 的/ 搜索/ 成功率/ ./ TTL/ 太/ 大会/ 增加/ 网络/ 负担/ ,/ 加剧/ 响应/ 延迟/ 而/ 不可/ 用/ ./ 为了/ 合理/ 利用/ 存储资源/ ,/ 总是/ 有/ 访问/ 频率/ 很/ 低/ 、/ 数据/ 密度/ 很小/ 而/ 搜索/ 成功率/ 很/ 低/ 的/ 数据/ ./ 当/ TTL/ 在/ 可用/ 范围/ ,/ 存储空间/ 较为/ 有限/ 时/ ,/ 这一/ 理论/ 结果/ 将/ 偏离/ 实际/ 结果/ ,/ 变得/ 不再/ 可用/ ./ 除了/ 降低/ 搜索/ 范围/ ,/ 还有/ 许多/ 工作/ 着重/ 研究/ 如何/ 通过/ 数据/ 副本/ 分布/ 获取/ 最高/ 的/ 搜索/ 成功率/ ./ 文献/ [/ 7/ ]/ 提出/ 了/ 一种/ 对数/ 分布/ 方案/ ,/ 当/ 数据/ 副本/ 数量/ 正比/ 于/ 访问/ 频率/ 对数/ 时/ 可以/ 获得/ 最高/ 的/ 搜索/ 成功率/ ./ 此外/ 还有/ 许多/ 工作/ 与/ 数据/ 复制/ 相关/ ,/ 它们/ 着重/ 根据/ 不同/ 优化/ 目标/ 阐述/ 全/ 分布/ 系统/ 复制/ 中/ 的/ 时机/ 、/ 位置/ 、/ 数量/ 等/ 基础性/ 问题/ [/ 8/ -/ 11/ ]/ ./ 本文/ 的/ 研究/ 内容/ 与/ 之/ 相似/ :/ 给定/ 存储空间/ 限制/ 、/ 访问/ 频率/ 分布/ 、/ 数据/ 大小/ 分布/ ,/ 求解/ 其/ 最优/ 数据/ 副本/ 分布/ ,/ 以/ 获取/ 最小/ 的/ 平均/ 搜索/ 范围/ ./ Page33/ 环境/ 模型/ 与/ 问题/ 定义/ 一个/ 无/ 结构/ 覆盖/ 网络/ 可以/ 用无向/ 图/ G/ =/ (/ V/ ,/ E/ )/ 来/ 表示/ ,/ 其中/ V/ 代表/ 节点/ 集合/ ,/ E/ 代表/ 节点/ 之间/ 形成/ 的/ 邻居/ 关系/ 集合/ ,/ 一条/ 边/ 连接/ 的/ 两个/ 节点/ 之间/ 可以/ 直接/ 发送/ 消息/ 通信/ ,/ 而/ 不/ 需要/ 经过/ 其它/ 节点/ 中转/ ./ 我们/ 假设/ 每个/ 节点/ 愿意/ 共享/ 一定/ 的/ 存储空间/ ,/ 以/ 提高/ 系统/ 的/ 整体/ 性能/ ,/ 并/ 假设/ 每个/ 节点/ 共享/ 相同/ 的/ 空间/ c/ ./ 假设/ 一个/ 有/ N/ 个/ 节点/ 的/ 覆盖/ 网络/ 中共/ 有/ m/ 个/ 相异/ 数据/ 对象/ ./ 数据/ i/ 的/ 大小/ 用/ vi/ 表示/ ./ 数据/ i/ 的/ 访问/ 频率/ qi/ 是/ 指/ 节点/ 用户/ 对/ 数据/ i/ 的/ 搜索/ 次数/ 与/ 系统/ 所有/ 搜索/ 次数/ 的/ 比例/ ./ 对于/ 访问/ 频率/ 向量/ 狇/ (/ q1/ ,/ q2/ ,/ q3/ ,/ …/ ,/ qm/ )/ 有/ 表达式/ q1/ / q2/ / …/ / qm/ 和/ ∑/ qi/ =/ 1/ 成立/ ./ 本文/ 用/ ri/ 代表/ 数据/ i/ 在/ 系统/ 的/ 所有/ 副本/ 数量/ (/ 包含/ 源/ 数据/ 对象/ )/ ,/ 它们/ 随机/ 均匀/ 地/ 分布/ 于/ 系统/ 节点/ ./ 向量/ 狉/ (/ r1/ ,/ r2/ ,/ …/ ,/ rm/ )/ 代表/ 最终/ 的/ 副本/ 分布/ ./ 无/ 结构/ 覆盖/ 网络/ 的/ 复制/ 优化/ ,/ 其实质/ 就是/ 寻找/ 一个/ 能/ 降低/ 平均/ 搜索/ 范围/ 的/ 从/ 狇/ 到/ 狉/ 的/ 最佳/ 映射/ ./ 本文/ 采用/ RandomWalks/ [/ 5/ ,/ 12/ ]/ 算法/ 路由/ 查询/ 消息/ ./ 由于/ 该/ 算法/ 具有/ 很/ 好/ 的/ 灵活性/ 和/ 消息/ 规模/ 可控性/ ,/ 在/ 无/ 结构/ 覆盖/ 网络/ 中/ 得到/ 广泛/ 使用/ ./ RandomWalks/ 路由/ 算法/ 中/ 一个/ 遍历/ 者/ walker/ ,/ 除非/ 成功/ 命中/ 或/ 遍历/ 路径/ 长度/ 达到/ TTL/ ,/ 将/ 一直/ 在/ 系统/ 中/ 转发/ 查找/ ./ 那么/ 平均/ 搜索/ 范围/ A/ 定义/ 为/ 其中/ l/ 是/ 搜索/ 成功/ 查询/ 的/ 平均/ 搜索/ 范围/ ,/ 而/ s/ 和/ L/ 分别/ 代表/ 搜索/ 成功率/ 和/ TTL/ ./ 4/ 副本/ 数量/ 理论/ 最优/ 分布/ Cohen/ 和/ Shenker/ 认为/ ,/ 为了/ 降低/ 平均/ 搜索/ 范围/ ,/ 每个/ 数据/ 的/ 副本/ 数量/ 应该/ 正比/ 于/ 其/ 大小/ ./ 但/ 下面/ 工作/ 表明/ 该/ 结论/ 是/ 不/ 正确/ 的/ ./ 本文/ 这里/ 采用/ 与/ 文献/ [/ 1/ ]/ 相同/ 的/ 问题/ 背景/ ,/ TTL/ 假设/ 足够/ 大/ ,/ 搜索/ 成功率/ 足够/ 高/ ./ 4.1/ 数据/ 大小/ 与/ 副本/ 数量/ 最优/ 分布/ 结论/ 1/ ./ 在/ 面向/ 搜索/ 范围/ 最小化/ 的/ 副本/ 数量/ 分布/ 中/ ,/ 每个/ 数据/ 的/ 副本/ 数量/ 应/ 反比/ 于/ 数据/ 大小/ 的/ 平方根/ ./ 由于/ 一个/ 数据/ 的/ 副本/ 随机/ 均匀/ 地/ 部署/ 在/ 覆盖/ 网络/ 节点/ ,/ 所以/ 一个/ 针对/ 数据/ i/ 的/ 查询/ ,/ 在/ 命中/ 之前/ 需要/ 遍历/ 的/ 平均/ 节点/ 数量/ 为/ 那么/ ,/ 我们/ 的/ 数据/ 副本/ 数量/ 分布/ 优化/ 问题/ 可以/ 描述/ 为/ 基于/ 式/ (/ 3/ )/ 建立/ 拉格朗/ 日/ 函数/ :/ F/ (/ r1/ ,/ r2/ ,/ …/ ,/ rm/ )/ =/ ∑/ m/ 其中/ λ/ 为/ 一/ 常数/ ./ 令/ dF/ // dri/ =/ 0/ ,/ 可以/ 得到/ 将式/ (/ 5/ )/ 代入/ 式/ (/ 3/ )/ ,/ 得到/ 将式/ (/ 7/ )/ 代入/ 式/ (/ 5/ )/ ,/ 可以/ 得到/ 式/ (/ 8/ )/ 即/ 为/ 平均/ 搜索/ 范围/ 最/ 小时/ 的/ 副本/ 数量/ 分布/ ,/ 其中/ 数据/ 的/ 副本/ 数量/ 反比/ 于/ 数据/ 大小/ 的/ 平方根/ ./ 但/ 文献/ [/ 1/ ]/ 中/ 却/ 认为/ ri/ =/ Ncviq/ 槡/ i/ ∑/ m/ 那么/ 这/ 两个/ 结论/ 究竟/ 哪/ 一个/ 更/ 接近/ 理论/ 最优/ 分布/ 呢/ ?/ 下面/ 给出/ 了/ 模拟实验/ 结果/ ,/ 对/ 两个/ 结论/ 进行/ 了/ 进一步/ 验证/ ./ 4.2/ 模拟实验/ 环境/ 实验/ 平台/ 用/ C++/ 编写/ 而成/ ./ 本文/ 采用/ Waxman/ 模型/ [/ 13/ ]/ 生成/ 的/ 随机/ 图/ 作为/ 覆盖/ 网络拓扑/ ./ 网络/ 由/ 10k/ 个/ 节点/ 组成/ ,/ 平均/ 连接/ 度为/ 8/ ./ 系统/ 中有/ 240/ 个/ 相异/ 数据/ 对象/ ,/ 在/ 任一/ 节点/ 不/ 存在/ 相同/ 的/ 两个/ 数据/ 副本/ ./ 数据/ 大小/ 从/ 0.1/ ~/ 1.9/ 随机/ 分布/ ,/ 平均/ 大小/ 为/ 1.0/ ./ 数据/ 的/ 访问/ 频率/ 来自/ 于/ PPStream/ (/ http/ :/ // // www/ ./ ppstream/ ./ com/ )/ 系统/ 快照/ ,/ 取自/ 2008/ 年/ 8/ 月/ 4/ 日/ 综合/ 频道/ ./ 一个/ 数据/ 的/ 访问/ 频率/ 定义/ 为/ 该/ 数据/ 的/ 在线/ 观众/ 对/ 所有/ 在线/ 观众/ 的/ 比例/ ./ 每次/ 查询/ 中/ ,/ 随机/ 选择/ 一个/ 节点/ 发起/ 查询/ ./ 由于/ 在/ RandomWalks/ 路由/ 算法/ 中/ 每个/ 遍历/ 者/ (/ walker/ )/ 之间/ 是/ 没有/ 交互/ 、/ 相互/ 独立/ 的/ ,/ 所以/ 本文/ 遍历/ 者/ 的/ 数量/ 设定/ 为/ 1/ ./ 文中/ 实验/ 数据/ 为/ 20k/ 次/ 搜索/ 的/ 平均值/ ./ 平/ Page4/ 均/ 搜索/ 范围/ (/ ExpectedSearchSize/ ,/ ESS/ )/ 为/ 主要/ 的/ 性能/ 度量/ 指标/ ./ 相关/ 系统/ 参数/ 和/ 缺省值/ 如表/ 1/ 所示/ ./ 参数/ 缺省值/ 节点/ 数/ 10k/ 遍历/ 数/ (/ walker/ )/ 1/ 连接数/ 40k/ 每/ 节点/ 共享/ 空间/ 5/ 文件/ 数/ 240/ 文件大小/ 0.1/ ~/ 1.94/ ./ 3/ 模拟实验/ 结果/ 本文/ 下面/ 分别/ 用/ SRR/ 和/ SRRR/ 代表/ 平方根/ 分布/ 和/ 本文/ 提出/ 的/ 最优/ 分布/ ./ SRR/ 中/ 的/ 数据/ 副本/ 数量/ 正比/ 于/ 数据/ 大小/ ./ 在/ 本文/ 提出/ 的/ 最优/ 分布/ SRRR/ 中/ ,/ 如式/ (/ 8/ )/ 所示/ ,/ 数据/ 副本/ 数量/ 正比/ 于/ 数据/ 大小/ 的/ 倒数/ (/ Square/ -/ RootReciprocalReplication/ ,/ SRRR/ )/ ./ 图/ 1/ 是/ 在/ 不同/ TTL/ 下/ SRR/ 与/ SRRR/ 平均/ 搜索/ 范围/ 的/ 比较/ ./ 图/ 2/ 是/ 在/ 不同/ 存储空间/ 情况/ 下/ SRR/ 与/ SRRR/ 平均/ 搜索/ 范围/ 的/ 比较/ ./ 图/ 1/ 和/ 图/ 2/ 均/ 表明/ ,/ 本文/ 提出/ 的/ 副本/ 数量/ 最优/ 分布/ SRRR/ 要/ 优于/ 平方根/ 分布/ SRR/ ./ 在/ 4.1/ 节/ 已经/ 证明/ ,/ 就/ 搜索/ 范围/ 最小化/ 而言/ ,/ SRRR/ 是/ 理论/ 最优/ 的/ ;/ 而/ 文献/ [/ 1/ ]/ 并/ 没有/ 提供/ SRR/ 最优/ 的/ 相应/ 的/ 论证/ ./ 因此/ ,/ 无论/ 从/ 模拟实验/ 还是/ 分析/ 论证/ ,/ SRRR/ 最优/ 比/ SRR/ 最优/ 具有/ 更/ 高/ 的/ 可信度/ ./ 此外/ ,/ 从/ 直觉/ 上/ 讲/ ,/ 我们/ 并不认为/ SRR/ 是/ 最优/ 的/ ./ 搜索/ 范围/ 其实/ 只/ 与/ 数据/ 副本/ 密度/ 有/ 关系/ ,/ 与/ 数据/ 大小/ 并/ 没有/ 直接/ 关系/ ./ 如果/ 给定/ 有限/ 的/ 存储空间/ ,/ 对于/ 两个/ 访问/ 频率/ 相同/ 的/ 数据/ ,/ 小/ 的/ 数据/ 显然/ 有/ 更/ 高/ 的/ 副本/ 密度/ 因而/ 有/ 更/ 小/ 的/ 搜索/ 范围/ ,/ 从而/ 有/ 更/ 高/ 的/ 系统/ 收益/ ./ 因此/ ,/ 在/ 数据/ 副本/ 数量/ 最优/ 分布/ 中/ ,/ 数据/ 副本/ 数量/ 应该/ 与/ 数据/ 大小/ 有/ 反/ 方向/ 的/ 增长/ 关系/ ./ 这一/ 分析/ 性/ 结论/ 与/ 平方根/ 分布/ SRR/ 观点/ 并/ 不/ 吻合/ ,/ 而/ 与/ 本文/ 提出/ 的/ 最优/ 结论/ SRRR/ 相一致/ ./ 5/ 现实/ 环境/ 最优/ 副本/ 分布/ Cohen/ 和/ Shenker/ 在/ 文献/ [/ 1/ ]/ 中/ 证明/ ,/ 平方根/ 分布/ 可以/ 获取/ 最小/ 的/ 平均/ 搜索/ 范围/ ,/ 每个/ 数据/ 的/ 副本/ 数量/ 应该/ 与其/ 访问/ 频率/ 的/ 平方根/ 成正比/ ./ 本文/ 下面/ 的/ 研究/ 表明/ ,/ 该/ 观点/ 并/ 不/ 总是/ 正确/ ,/ 容易/ 受到/ 现实/ 环境/ 的/ 制约/ ./ 平方根/ 分布/ 最优/ 这一/ 结论/ 之所以/ 缺乏/ 普适性/ ,/ 就是/ 因为/ 该/ 结论/ 依赖于/ 一个/ 很强/ 的/ 假设/ ,/ TTL/ 足够/ 大/ 或/ 存储空间/ 足够/ 大/ ,/ 这/ 在/ 现实/ 系统/ 中是/ 很/ 难/ 成立/ 的/ ./ 为此/ 本文/ 给出/ 了/ 一种/ 具有/ 更加/ 普适性/ 的/ 数据/ 副本/ 数量/ 最优/ 分布/ ./ 5.1/ 副本/ 数量/ 分布/ 与/ EES/ 最小化/ 在/ 文献/ [/ 1/ ]/ 中/ 平均/ 搜索/ 范围/ 定义/ 为/ 查询/ 命中/ 一次/ 查询/ 平均/ 需要/ 遍历/ 的/ 节点/ 数量/ ./ 对于/ RandomWalks/ 路由/ 算法/ ,/ 平均/ 搜索/ 范围/ 其实/ 就是/ 平均/ 搜索/ 路径/ 长度/ 与/ 遍历/ 者/ (/ walker/ )/ 数量/ 的/ 乘积/ ./ 由于/ RandomWalks/ 中/ 的/ 遍历/ 者/ 之间/ 是/ 独立/ 的/ ,/ 并/ 不会/ 与/ 其他/ 遍历/ 者/ 发生/ 通信/ ,/ 本文/ 只/ 研究/ 只有/ 一个/ 遍历/ 者/ 的/ 情况/ ./ 5.1/ ./ 1TTL/ 、/ 副本/ 密度/ 与/ 平均/ 搜索/ 范围/ 我们/ 首先/ 假设/ 系统/ 只有/ 一个/ 数据/ 对象/ ,/ 其/ 副本/ 数量/ 为/ r/ (/ 包含/ 源/ 数据/ 对象/ )/ ./ 当/ 查询/ 消息/ 到达/ 一个/ 节点/ 时/ ,/ 查询/ 消息/ 在/ 该/ 节点/ 命中/ 的/ 概率/ 为/ r/ // N/ ,/ 不能/ 被/ 命中/ 的/ 概率/ 为/ 1/ -/ r/ // N/ ./ 这样/ ,/ 一次/ 搜索/ 在/ 前/ h/ -/ 1/ 跳/ 命中/ 失败/ ,/ 但/ 在/ 第/ h/ 跳/ 命中/ 的/ 概率/ 为/ 如果/ 用/ α/ 和/ β/ 分别/ 代表/ 副本/ 密度/ r/ // N/ 和/ 1/ -/ r/ // N/ ,/ 那么/ ,/ 系统/ 中该/ 数据/ 的/ 平均/ 搜索/ 路径/ 长度/ 为/ 也就是说/ ,/ 数据/ i/ 的/ 平均/ 搜索/ 范围/ hi/ 为/ 通过/ 式/ (/ 14/ )/ ,/ 将/ 可以/ 得出/ 许多/ 有用/ 的/ 结论/ ./ Page5/ 结论/ 2/ ./ 平方根/ 分布/ 可以/ 获取/ 最小/ 平均/ 搜索/ 范围/ ,/ 当且/ 仅/ 当/ TTL/ 足够/ 大/ 或/ 副本/ 密度/ (/ ri/ // N/ )/ 足够/ 高/ ./ 鉴于/ 此/ ,/ 平方根/ 分布/ 的/ 理论/ 预期/ 结果/ 很难/ 在/ 现实/ 环境/ 中/ 得到/ 应用/ ./ 平方根/ 分布/ 假设/ 数据/ i/ 的/ 平均/ 搜索/ 范围/ 为/ N/ // ri/ ,/ 它/ 是/ 推导/ 得出/ 平方根/ 分布/ 的/ 基础/ ./ 将/ 该/ 假设/ 与/ 式/ (/ 14/ )/ 对比/ 可以/ 发现/ ,/ 在/ 平方根/ 分布/ 中/ ,/ 表达式/ (/ 15/ )/ 隐含/ 表明/ :/ (/ 1/ )/ L/ (/ TTL/ )/ 足够/ 大/ ;/ (/ 2/ )/ β/ i/ 足够/ 小/ ,/ 即当/ TTL/ 固定/ 时/ 副本/ 密度/ (/ ri/ // N/ )/ 趋近/ 于/ 1/ ./ 因此/ ,/ 平方根/ 分布/ 存在/ 一定/ 缺陷/ ./ 首先/ ,/ 在/ 现实/ 环境/ 中/ TTL/ 的/ 值/ 其实/ 是/ 很小/ 的/ ,/ 因为/ 当/ TTL/ 很大/ 时/ ,/ 即使/ 搜索/ 命中/ 由于/ 延迟/ 的/ 原因/ 也/ 变得/ 不可/ 用/ ./ 其次/ ,/ 在/ 现实/ 环境/ 中/ 副本/ 密度/ ri/ // N/ 不/ 可能/ 很大/ ,/ 即便/ 存储空间/ 较为/ 空余/ ,/ 系统/ 也/ 将/ 会/ 根据/ 访问/ 频率/ 异构/ 性/ 分配/ 更/ 多/ 空间/ 给/ 热点/ 数据/ ,/ 而/ 有/ 很大/ 一部分/ 数据/ 拥有/ 较/ 小/ 的/ 副本/ 密度/ ./ 也就是说/ ,/ 由于/ 平方根/ 分布/ 理论/ 结论/ 是/ 建立/ 在/ 很/ 强/ 的/ 假设/ 基础/ 之上/ 的/ ,/ 在/ 现实/ 环境/ 中是/ 很/ 难/ 得到/ 应用/ 的/ ./ 5.1/ ./ 2/ 平均/ 搜索/ 范围/ 与/ 最优/ 副本/ 分配/ 量/ α/ i/ 的/ 函数/ ,/ 对/ 表达式/ (/ 14/ )/ 求导/ 表达式/ (/ 14/ )/ 表明/ ,/ 数据/ i/ 的/ 平均/ 搜索/ 范围/ 是/ 变/ 如果/ 在/ 系统/ 增加/ 数据/ i/ 的/ 一个/ 新/ 的/ 副本/ ,/ 在/ 降低/ 搜索/ 范围/ 方面/ 的/ 收益/ 将/ 是/ Δ/ hi/ =/ qiL/ (/ 1/ -/ α/ i/ )/ L/ -/ 1/ 表达式/ (/ 17/ )/ 可以/ 用/ 图形/ 更加/ 直观/ 地/ 表达/ ,/ 如图/ 3/ 所示/ ./ 它/ 表明/ :/ (/ 1/ )/ 对于/ 任一/ 确定/ 数据/ ,/ 增加/ 一个/ 副本/ 在/ 降低/ 搜索/ 范围/ 方面/ 的/ 收益/ 将/ 随着/ 副本/ 密度/ 的/ 增加/ 而/ 降低/ ./ (/ 2/ )/ 对/ 任意/ 两个/ 副本/ 密度/ 相同/ 、/ 访问/ 频率/ 不同/ 的/ 数据/ ,/ 同时/ 增加/ 一个/ 副本/ ,/ 具有/ 高/ 访问/ 频率/ 的/ 数据/ 将/ 获得/ 更/ 高/ 的/ 搜索/ 范围/ 收益/ ./ 因此/ ,/ 当/ 系统/ 增加/ 一个/ 新/ 的/ 副本/ 时/ ,/ 应该/ 首选/ 那些/ 给/ 系统/ 带来/ 最大/ 搜索/ 范围/ 收益/ 的/ 数据/ 的/ 副本/ ./ 将/ 所有/ 的/ 存储空间/ 一步步/ 分配/ 完毕/ ,/ 可以/ 证明/ ,/ 此时/ 每个/ 数据/ 所/ 拥有/ 的/ 数据/ 副本/ 数量/ 即/ 为/ 最优/ 分布/ ./ 下面/ 给出/ 分析/ 性/ 证明/ ./ 分别/ 用/ 狉/ =/ (/ r1/ ,/ r2/ ,/ …/ ,/ rm/ )/ 和/ 犚/ =/ (/ R1/ ,/ R2/ ,/ …/ ,/ Rm/ )/ 代表/ 空间/ 分配/ 完毕/ 时/ 的/ 分布/ 和/ 理论/ 上/ 的/ 最优/ 分布/ ;/ 用/ rai/ 代表/ 分配/ 给/ 数据/ i/ 的/ 第/ a/ 个/ 副本/ ./ 假设/ 最终/ 分布/ r/ 不是/ 最优/ 的/ ,/ 那么/ 一定/ 存在/ ri/ >/ Ri/ 和/ rj/ </ Rj/ 同时/ 成立/ ./ 它/ 表明/ ,/ 如果/ 将/ 最后/ 分配/ 给/ 数据/ i/ 的/ 副本/ rri/ -/ Rii/ 给/ 数据/ j/ ,/ 在/ 降低/ 系统/ 搜索/ 范围/ 方面/ 将/ 可以/ 得到/ 更大/ 的/ 收益/ ./ 但/ 这/ 一/ 结论/ 是/ 不/ 成立/ 的/ ,/ 因为/ 由/ 前面/ 的/ 存储空间/ 分配/ 过程/ 可知/ ,/ 副本/ rri/ -/ Rii/ 空间/ 之所以/ 分配/ 给/ 数据/ i/ 而/ 不是/ 数据/ j/ ,/ 就是/ 数据/ i/ 可/ 获取/ 更/ 高/ 的/ 搜索/ 范围/ 收益/ ./ 所以/ 该/ 假设/ 不/ 成立/ ./ 这一/ 假设/ 对/ 所有/ 副本/ raRj/ -/ rj/ )/ 同样/ 不/ 成立/ ./ 所以/ ,/ 空间/ 分布/ 完毕/ 时/ 的/ 副本/ 数量/ 分布/ 在/ 降低/ 搜索/ 范围/ 方面/ 是/ 最优/ 的/ ./ 5.1/ ./ 3/ 模拟实验/ 结果/ 这一/ 小节/ 给出/ 了/ 部分/ 模拟实验/ 结果/ 以/ 验证/ 上面/ 给出/ 的/ 结论/ ./ 采用/ 的/ 模拟/ 环境/ 与/ 4.2/ 节/ 相同/ ./ 在/ 图/ 4/ ~/ 6/ 模拟实验/ 中/ ,/ 系统/ 只有/ 一个/ 数据/ 对象/ ,/ 在/ 图/ 7/ 和/ 图/ 8/ 中共/ 有/ 240/ 个/ 数据/ 对象/ ./ 除非/ 特别/ 指明/ ,/ TTL/ 值/ 默认/ 为/ 400/ ,/ 副本/ 密度/ 默认/ 为/ 0.01/ ./ i/ (/ a/ =/ 1/ ,/ 2/ ,/ …/ ,/ ri/ -/ Ri/ )/ 和/ rbPage6/ 图/ 8/ 不同/ 存储空间/ 下/ 两种/ 优化/ 分布/ 的/ 平均/ 搜索/ 范围/ 比较/ 图/ 4/ 是/ 关于/ 搜索/ 范围/ (/ 搜索/ 路径/ 长度/ )/ 理论/ 结果/ 与/ 实验/ 结果/ 的/ 比较/ ./ 在/ 40k/ 次/ 搜索/ 后/ ,/ 分析/ 搜索/ 范围/ (/ 跳数/ )/ 分布/ ./ 理论/ 结果/ 根据/ 表达式/ (/ 10/ )/ 计算/ 得到/ ./ 图/ 4/ 显示/ ,/ 理论/ 结果/ 与/ 实验/ 结果/ 较/ 好/ 吻合/ ./ 图/ 5/ 和/ 图/ 6/ 是/ 平均/ 搜索/ 范围/ 在/ 模拟实验/ 结果/ 、/ 理论/ 结果/ 和/ 假设性/ 结果/ (/ 基于/ 文献/ [/ 1/ ]/ 平方根/ 分布/ 中/ 的/ 假设/ )/ 之间/ 的/ 比较/ ./ 理论/ 结果/ 通过/ 表达式/ (/ 14/ )/ 计算/ 得到/ ./ 图/ 5/ 和/ 图/ 6/ 均/ 显示/ 理论/ 结果/ 与/ 实验/ 结果/ 具有/ 一致性/ ./ 它/ 在/ 一定/ 程度/ 表明/ 本文/ 的/ 推理/ 分析/ 是/ 合理/ 的/ ./ 但/ 实验/ 结果/ 与/ 假设/ 结果/ 之间/ 的/ 一致性/ 程度/ 随着/ TTL/ 和/ 副本/ 密度/ 的/ 不同/ 而/ 不同/ ./ 当/ TTL/ 较/ 小/ 或/ 副本/ 密度/ 较/ 低时/ ,/ 实验/ 结果/ 的/ 平均/ 搜索/ 范围/ 显著/ 低于/ 假设/ 结果/ ./ 随着/ TTL/ 和/ 副本/ 密度/ 不断/ 增长/ ,/ 三者/ 之间/ 搜索/ 范围/ 逐渐/ 趋于/ 一致/ ./ 图/ 5/ 和/ 图/ 6/ 进一步/ 表明/ 本文/ 5.1/ 节/ 的/ 结论/ 是/ 合理/ 的/ ;/ 而且/ ,/ 平方根/ 分布/ 并/ 不/ 总是/ 正确/ ,/ 其/ 准确/ 程度/ 受到/ TTL/ 和/ 副本/ 密度/ 的/ 影响/ ./ 因此/ ,/ 在/ 现实/ 全/ 分布/ 无/ 结构/ 覆盖/ 网络/ 中/ ,/ TTL/ 较/ 小/ 、/ 副本/ 密度/ 较/ 低/ ,/ 平方根/ 分布/ 在/ 降低/ 搜索/ 范围/ 方面/ 并非/ 最优/ ./ 在/ 图/ 7/ 、/ 图/ 8/ 和/ 图/ 9/ 中/ ,/ SRR/ 和/ Optimal/ 分布/ 代表/ 平方根/ 分布/ 和/ 本文/ 所/ 提出/ 的/ 在/ 现实/ 环境/ 中/ 的/ 最优/ 分布/ ./ 图/ 7/ 和/ 图/ 8/ 表明/ ,/ 在/ 降低/ 搜索/ 范围/ 方面/ 平方根/ 分布/ 并非/ 最优/ ,/ 尤其/ 是/ 当/ TTL/ 很小/ 或/ 副本/ 密度/ 较/ 低时/ ./ 当/ TTL/ 等于/ 20/ 时/ ,/ SRR/ 要/ 比/ Optimal/ 多/ 消耗/ 13.7/ %/ 的/ 搜索/ 消息/ ./ 当/ 每个/ 节点/ 仅/ 共享/ 一个/ 数据/ 的/ 存储空间/ 时/ ,/ SRR/ 每次/ 查询/ 要/ 比/ Optimal/ 平均/ 多/ 消耗/ 9.7/ 个/ (/ 13.1/ %/ )/ 查询/ 消息/ ./ 这一/ 结果/ 与/ 本文/ 5.1/ 节/ 分析/ 结论/ 相吻合/ ./ 图/ 9/ 是/ SRR/ 与/ Optimal/ 数据/ 副本/ 数量/ 分布/ 对比/ ./ 它/ 显示/ ,/ 比/ 之/ Optimal/ ,/ SRR/ 分配/ 更/ 多/ 的/ 副本/ 给/ 不/ 太/ 流行/ 的/ 数据/ ./ 造成/ 这一/ 差别/ 的/ 原因/ 在于/ SRR/ 假设/ 所有/ 数据/ 对象/ 的/ 平均/ 搜索/ 范围/ 均/ 为/ N/ // ri/ ,/ 在/ 数据/ 副本/ 稀疏/ 时/ 每/ 增加/ 一个/ 副本/ 带来/ 的/ 平均/ 搜索/ 范围/ 收益/ 要/ 高于/ 式/ (/ 17/ )/ 所示/ ./ 一个/ 数据/ 副本/ 中/ ,/ 副本/ 密度/ 较/ 低时/ 的/ 非/ 流行/ 数据/ 带来/ 的/ 平均/ 搜索/ 范围/ 收益/ 要/ 远高于/ 较/ 流行/ 数据/ 对象/ 带来/ 的/ 收益/ ,/ 所以/ 在/ 分配/ 空间/ 时/ 优先/ 分配/ 给/ 了/ 部分/ 非/ 流行/ 数据/ ,/ 尽管/ 其/ 访问/ 频率/ 很/ 低/ ./ 而/ 在/ Optimal/ 中/ ,/ 副本/ 密度/ 较/ 低时/ 增加/ 一个/ 数据/ 副本/ 带来/ 的/ 平均/ 搜索/ 范围/ 收益/ 没有/ SRR/ 那么/ 明显/ ,/ 所以/ 非/ 流行/ 数据/ 得到/ 的/ 副本/ 数量/ 就/ 比/ SRR/ 低/ ./ 通过/ 图/ 6/ 也/ 可以/ 看出/ ,/ 副本/ 密度/ 由/ 0.005/ ~/ 0.01/ ,/ 基于/ 假设/ 的/ SRR/ 平均/ 搜索/ 范围/ 降低/ 量/ 比/ 模拟/ 数据/ 更加/ 明显/ ./ 而/ 副本/ 密度/ 由/ 0.01/ ~/ 0.015/ 再/ 到/ 0.02/ 时/ ,/ SRR/ 平均/ 搜索/ 范围/ 降低/ 量/ 与/ 模拟实验/ 降低/ 量/ 相比/ ,/ 逐渐/ 变得/ 不再/ 显著/ ./ 因此/ ,/ SRR/ 分配/ 更/ 多/ 副本/ 给/ 非/ 流行/ 数据/ 的/ 原因/ 在于/ SRR/ 关于/ 平均/ 搜索/ 范围/ 的/ 假设/ 在/ 数据/ 副本/ 密度/ 较/ 低时/ 误差/ 太/ 大/ 造成/ 的/ ./ 6/ 结束语/ 本文/ 是/ 对/ 文献/ [/ 1/ ]/ 中/ 工作/ 的/ 深化/ 拓展/ ,/ 与/ 之/ 研究/ 了/ 相同/ 的/ 问题/ ,/ 即/ 在/ 全/ 分布/ 无/ 结构/ 覆盖/ 网络/ 中/ 什么/ Page7/ 样/ 的/ 副本/ 分布/ 可以/ 获得/ 最小/ 的/ 平均/ 搜索/ 范围/ ./ 本文/ 工作/ 包括/ 两个/ 部分/ :/ 第一/ 部分/ 将/ 数据/ 大小/ 作为/ 一个/ 重要/ 考量/ 因素/ 研究/ 了/ 数据/ 副本/ 数量/ 在/ 理论/ 假设/ 环境/ 下/ 的/ 最优/ 分布/ ;/ 第二/ 部分/ 分析/ 了/ 理论/ 假设/ 对/ 现实/ 环境/ 分布/ 的/ 影响/ ,/ 研究/ 了/ 在/ 现实/ 环境/ 下/ 的/ 最优/ 分布/ ./ 本文/ 工作/ 将/ 加深/ 对/ 无/ 结构/ 覆盖/ 网络/ 中/ 复制技术/ 的/ 理解/ ./ 但/ 关于/ 无/ 结构/ 覆盖/ 网络/ 数据/ 副本/ 数量/ 分布/ ,/ 仍然/ 有/ 很多/ 问题/ 需要/ 解决/ ./ 首先/ ,/ 低/ 搜索/ 范围/ 并/ 不/ 意味着/ 高/ 的/ 搜索/ 成功率/ ,/ 有些/ 时候/ 搜索/ 成功率/ 要/ 比/ 搜索/ 范围/ 具有/ 更/ 高/ 的/ 重要性/ ./ 因此/ ,/ 在/ 优化/ 搜索/ 范围/ 时/ 兼顾/ 到/ 成功率/ 也/ 是/ 需要/ 深入/ 考虑/ 的/ 问题/ ./ 其次/ ,/ 降低/ 搜索/ 范围/ 并不一定/ 是/ 系统/ 的/ 终极/ 目的/ ,/ 我们/ 应该/ 综合/ 分析/ 各种/ 优化/ 的/ 优缺点/ ,/ 为/ 实际/ 应用/ 提供/ 一种/ 实际/ 可行/ 的/ 参考/ 依据/ ./ 第三/ ,/ 以/ 经济/ 有效/ 的/ 方式/ 达到/ 预期/ 优化/ 目标/ 仍然/ 是/ 一项/ 挑战/ ./ 我们/ 将/ 在/ 进一步/ 工作/ 中/ 逐步/ 深化/ 这些/ 问题/ 研究/ ./ 

