Page1Web/ 服务/ 流程/ 的/ 结构/ 范式/ 及其/ 判定/ 算法/ 胡强/ 1/ )/ 杜/ 军威/ 1/ )/ 杜玉越/ 2/ )/ 1/ )/ (/ 青岛/ 科技/ 大学/ 信息/ 科学技术/ 学院/ 山东/ 青岛/ 266061/ )/ 2/ )/ (/ 山东/ 科技/ 大学/ 信息科学/ 与/ 工程学院/ 山东/ 青岛/ 266590/ )/ 摘要/ 服务/ 组合/ 是/ 一种/ 利用/ 已有/ Web/ 服务/ 构建/ 新/ 的/ 增值/ 服务/ 的/ 有效/ 方法/ ,/ 然而/ 当前/ 缺乏/ 对/ 组合/ 产生/ 的/ 服务/ 流程/ 进行/ 结构/ 健壮性/ 层次/ 划分/ 和/ 判定/ 的/ 准则/ ./ 针对/ 上述/ 问题/ ,/ 提出/ Web/ 服务/ 流程/ 结构/ 范式/ ,/ 从/ 路径/ 的/ 可达性/ 和/ 结构/ 冗余/ 性/ 两个/ 角度/ 将/ 结构/ 范式/ 划分/ 为/ 四个/ 层次/ ./ 基于/ 逻辑/ Petri/ 网/ 建模/ 服务/ 流程/ 为/ 服务网/ ,/ 将/ 服务/ 流程/ 结构/ 范式/ 的/ 判定/ 转化/ 为/ 对/ 服务网/ 组成/ 结构/ 的/ 分析/ ./ 在/ 服务网/ 的/ 基础/ 上/ 构建/ 控制/ 流网/ ,/ 从而/ 将/ 服务/ 流程/ 中/ 的/ 控制流/ 和/ 数据流/ 进行/ 分离/ ./ 定义/ 了/ 控制/ 流网/ 语言/ ,/ 并/ 提出/ 一种/ 通过/ 约简/ 求解/ 控制/ 流网/ 语言/ 的/ 方法/ ./ 通过/ 对/ 控制/ 流网/ 语言/ 中/ 字符/ 序列/ 组成/ 结构特征/ 的/ 分析/ ,/ 获取/ 服务网/ 的/ 结构/ 性质/ ,/ 完成/ 对/ 服务/ 流程/ 结构/ 范式/ 层次/ 的/ 判定/ ./ 给出/ 了/ 服务/ 流程/ 结构/ 范式/ 的/ 定义/ 、/ 判定/ 定理/ 以及/ 算法/ ,/ 并/ 通过/ 实例/ 验证/ 了/ 文中/ 方法/ 对/ 流程/ 结构/ 范式/ 进行/ 判定/ 的/ 可行性/ 和/ 有效性/ ./ 关键词/ Web/ 服务/ ;/ 结构/ 范式/ ;/ 逻辑/ Petri/ 网/ ;/ 服务网/ ;/ 健壮性/ 1/ 引言/ 随着/ 云/ 计算/ 、/ 物/ 联网/ 以及/ 移动/ 互联网/ 等/ 新一代/ 信息技术/ 的/ 成熟/ 与/ 应用/ 的/ 普及/ ,/ 软件开发/ 和/ 交付/ 模式/ 呈现出/ 明显/ 的/ 服务化/ 特征/ ./ 作为/ 一种/ 成熟/ 的/ 服务/ 计算/ 实现/ 模式/ ,/ Web/ 服务/ 是/ SOA/ 模式/ 软件开发/ 的/ 首选/ ./ Web/ 服务/ 在/ 网络化/ 软件/ 的/ 构建/ 中/ 存在/ 两种/ 使用/ 方式/ :/ 原子/ Web/ 服务/ 调用/ 和/ 组合/ Web/ 服务/ 流程/ ./ 通过/ 组合/ 产生/ 的/ 服务/ 流程/ 可以/ 应对/ 一些/ 复杂/ 的/ 服务/ 请求/ ,/ 对于/ 给定/ 的/ 服务/ 请求/ 和/ 一组/ 原子/ 服务/ ,/ 采用/ 不同/ 组合/ 方法/ 可以/ 得到/ 不同/ 组合/ 模式/ 的/ 服务/ 流程/ ,/ 这些/ 服务/ 流程/ 在/ 结构/ 的/ 分支/ 连通性/ 、/ 冗余/ 性/ 以及/ 逻辑/ 正确性/ 等/ 方面/ 存在/ 差异/ ,/ 本文/ 将/ 上述/ 反映/ 流程/ 结构/ 差异/ 的/ 特征/ 称为/ 服务/ 流程/ 的/ 结构/ 健壮性/ ./ 现有/ 研究/ 工作/ 中/ 通常/ 以/ 工作/ 流网/ 的/ 健壮性/ [/ 1/ ]/ 为/ 基础/ ,/ 提出/ 一种/ 新/ 的/ 约束/ 规则/ ,/ 从/ 流程/ 中/ 路径/ 的/ 可达性/ 方面/ 对/ 结构/ 健壮性/ 进行/ 评价/ ./ 然而/ ,/ 在/ 一些/ 特定/ 的/ 应用/ 场景/ 下/ ,/ 并/ 不/ 要求/ 服务/ 流程/ 中/ 所有/ 的/ 服务/ 路径/ 均/ 可/ 正确/ 执行/ ,/ 只要/ 某些/ 特定/ 服务/ 路径/ 可/ 达/ 即可/ ./ 因此/ ,/ 仅以/ 服务/ 流程/ 中/ 路径/ 的/ 可达性/ 来/ 定性/ 地/ 判定/ 一个/ 服务/ 流程/ 结构/ 的/ 健壮性/ 是/ 不合理/ 的/ ./ 服务/ 流程/ 的/ 结构/ 健壮性/ 不仅/ 要/ 考察/ 流程/ 中/ 路径/ 的/ 可达性/ ,/ 也/ 需要/ 考虑/ 流程/ 结构/ 中/ 是否/ 存在/ 冗余/ 等/ 特征/ ./ 因此/ ,/ 本文/ 提出/ 对/ 流程/ 结构/ 健壮性/ 进行/ 层次/ 划分/ 的/ 思想/ ,/ 从/ 路径/ 可达性/ 和/ 结构/ 冗余/ 性/ 两个/ 角度/ 将/ 流程/ 的/ 结构/ 健壮性/ 划分/ 为/ 不同/ 的/ 层次/ 级别/ ./ 通过/ 建立/ 流程/ 的/ 结构/ 健壮性/ 层次/ 划分/ 准则/ 及/ 判定/ 方法/ ,/ 可以/ 有效/ 地/ 对/ 服务/ 流程/ 的/ 结构/ 质量/ 和/ 可用性/ 进行/ 评价/ ,/ 进而/ 有助于/ 改进/ 服务/ 组合/ 的/ 合理性/ ./ 借鉴/ 关系数据库/ 中/ 的/ 范式/ 概念/ ,/ 将/ Web/ 服务/ 流程/ 的/ 结构/ 健壮性/ 层次/ 划分/ 准则/ 定义/ 为/ 流程/ 的/ 结构/ 范式/ ./ 为了/ 对/ 服务/ 流程/ 的/ 结构/ 健壮性/ 进行/ 层次/ 划分/ 和/ 判定/ ,/ 需对/ 流程/ 进行/ 形式化/ 建模/ ,/ 目前/ 常用/ 于/ Web/ 服务/ 建模/ 的/ 形式化/ 工具/ 主要/ 有/ Petri/ 网/ [/ 2/ -/ 4/ ]/ 、/ 随机/ Petri/ 网/ [/ 5/ -/ 6/ ]/ 、/ 自动机/ [/ 7/ -/ 8/ ]/ 、/ 描述/ 逻辑/ [/ 9/ ]/ 、/ 进程/ 代数/ [/ 10/ ]/ 以及/ LTS/ (/ LabeledTransitionSystem/ )/ [/ 11/ ]/ 等/ ./ Petri/ 网/ 作为/ 一种/ 图形化/ 的/ 建模/ 方式/ ,/ 直观/ 简洁/ 且/ 具有/ 良好/ 的/ 数学/ 推理/ 分析方法/ ,/ 但/ 在/ 描述/ 和/ 分析/ 复杂/ 服务/ 流程/ 时/ 存在/ 状态/ 空间/ 爆炸/ 问题/ ./ 进程/ 代数/ 则/ 过于/ 符号化/ ,/ 直观性/ 稍差/ ;/ 描述/ 逻辑/ 在/ 服务/ 描述/ 及/ 组合/ 中/ 的/ 推理/ 过程/ 较为/ 繁琐/ ./ 自动机/ 以及/ LTS/ 与/ Petri/ 网/ 类似/ ,/ 但/ 数学/ 推理/ 和/ 分析/ 能力/ 稍显/ 不足/ ./ 逻辑/ Petri/ 网/ (/ LogicPetriNet/ ,/ LPN/ )/ 是/ 在/ 普通/ Petri/ 网/ 的/ 某些/ 变迁/ 中/ 添加/ 逻辑/ 表达式/ 而/ 得到/ 的/ 一种/ 高级/ Petri/ 网/ ,/ 其/ 描述/ 能力/ 等价/ 于/ 带/ 抑制/ 弧/ 的/ Petri/ 网/ [/ 12/ ]/ ./ 通过/ 合理/ 设置/ 逻辑/ 表达式/ ,/ 可/ 有效/ 地/ 缩减/ 建模/ 时/ 产生/ 的/ 网/ 规模/ ,/ 且/ 具有/ 良好/ 的/ 建模/ 结构性/ ,/ 适合/ 对/ Web/ 服务/ 流程/ 建模/ [/ 13/ ]/ ./ 本文/ 采用/ 逻辑/ Petri/ 网/ 作为/ 流程/ 描述/ 工具/ ,/ 将/ Web/ 服务/ 流程/ 建模/ 为/ 服务网/ ,/ 基于/ 服务网/ 中/ 的/ 可/ 触发/ 变迁/ 序列/ 结构/ 性质/ ,/ 分析/ Web/ 服务/ 流程/ 的/ 结构特征/ ,/ 进而/ 划分/ 相应/ 结构/ 范式/ ,/ 并/ 给出/ 判定/ 算法/ ./ 2/ 相关/ 研究/ 现有/ 的/ 成果/ 中以/ 服务/ 流程/ 的/ 结构/ 健壮性/ 为/ 主题/ 的/ 研究/ 相对/ 较/ 少/ ,/ 研究者/ 通常/ 对/ 流程/ 结构/ 的/ 某些/ 局部/ 性质/ 进行/ 挖掘/ 和/ 验证/ ./ 例如/ Benatallah/ 等/ 人/ [/ 14/ ]/ 通过/ 构造/ 完全/ 交互/ 树来/ 判定/ 业务流程/ 之间/ 的/ 互操作/ 是否/ 匹配/ ./ Xiong/ 等/ 人/ [/ 15/ ]/ 利用/ Petri/ 网对/ 服务/ 流程/ 组成/ 服务/ 之间/ 的/ 交互/ 行为/ 做/ 了/ 分析/ ,/ 提出/ 了/ 若干种/ 交互/ 失配/ 模式/ 及其/ 判定/ 算法/ ./ Tan/ 等/ 人/ [/ 16/ ]/ 利用/ 随机/ Petri/ 网/ 定义/ 了/ 抽象/ 工作/ 流网/ ,/ 对/ Web/ 服务/ 流程/ 建模/ ,/ 提出/ 了/ 一组/ 流程/ 结构化/ 简/ 规则/ ,/ 并/ 对/ 流程/ 性能/ 进行/ 分析/ 和/ 评估/ ./ Mansour/ 等/ 人/ [/ 17/ ]/ 对/ 组合/ 服务/ 流程/ 的/ 事务性/ 和/ 可靠性/ 进行/ 了/ 研究/ ,/ 并/ 提出/ 了/ 相应/ 的/ 容错/ 解决方案/ ./ Mateescu/ 等/ 人/ [/ 18/ ]/ 从/ 软件/ 实体/ 复用/ 和/ 组合/ 的/ 角度/ ,/ 利用/ 状态图/ 生成/ 软件/ 实体/ 之间/ 的/ 会/ 话/ 适配器/ ,/ 并/ 将/ 其/ 应用/ 到/ Web/ 服务/ 交互/ 协调/ 过程/ 中/ ./ 邓水光/ 等/ 人/ [/ 19/ ]/ 将/ Web/ 服务/ 之间/ 的/ 交互/ 行为/ 描述/ 为/ π/ 演算/ 进程/ ,/ 利用/ π/ 演算/ 的/ 操作/ 语义/ 对/ 服务/ 行为/ 的/ 兼容性/ 进行/ 推演/ 和/ 验证/ ./ 李喜彤/ 等/ 人/ [/ 20/ ]/ 采用/ 颜色/ Petri/ 网/ 建模/ Web/ 服务/ 流程/ ,/ 并/ 利用/ 通信/ 可达树/ 对/ 组合/ 后/ 的/ 服务/ 流程/ 的/ 逻辑/ 正确性/ 进行/ 验证/ ./ 宋巍/ 等/ 人/ [/ 21/ ]/ 综合/ 考虑/ 服务/ 流程/ 中/ 的/ 控制/ 依赖/ 、/ 数据/ 依赖/ 、/ 交互/ 依赖/ 以及/ 异步/ 调用/ 依赖/ ,/ 基于/ 程序/ 依赖图/ 分析/ 了/ BPEL/ 服务/ 流程/ 的/ 可/ 替换/ 性/ ./ 雷丽晖/ 等/ 人/ [/ 22/ ]/ 采用/ 扩展/ 自动机/ 验证/ 服务/ 流程/ 执行/ 过程/ 中/ 可能/ 存在/ 死锁/ 或/ 活锁/ 等/ 逻辑/ 错误/ ./ 在/ 流程/ 结构/ 健壮性/ 方面/ ,/ Clempner/ [/ 23/ ]/ 提出/ 了/ 一种/ 基于/ 轨迹/ 跟踪/ 的/ 方法/ 去/ 检测/ 工作/ 流网/ 或/ 业务流程/ 中/ 健壮性/ 的/ 规则/ ./ Du/ 等/ 人/ [/ 24/ ]/ 利用/ Petri/ 网对/ 流程/ 的/ 组成/ 服务/ 之间/ 的/ 交互/ 行为/ 做/ 了/ 分析/ ,/ 并/ 给出/ 一种/ 新/ 的/ 流程/ 合理性/ 判定/ 标准/ ./ Martens/ [/ 25/ ]/ 提出/ 了/ 一种/ 基于/ 工作/ 流网/ 定义/ 的/ 弱/ 健壮性/ 概念/ ,/ 并/ 在/ 弱/ 健壮性/ 概念/ 的/ 基础/ 上/ 给出/ 流程/ 可用性/ 的/ 判定/ 准则/ ,/ 进而/ 判断/ 服务/ 的/ 交互/ 兼容性/ 和/ 可/ 替换/ 性/ ./ Groefsema/ 等/ 人/ [/ 26/ ]/ 在/ 对/ 业务/ 过程/ 模型/ 的/ 控制流/ 进行/ 分析/ 时/ ,/ 将/ 流程/ 的/ 健壮性/ 定义/ 为/ 流程/ 中/ 不/ 存在/ 死锁/ 和/ 同步/ 缺失/ ./ vanPage3derAalst/ 等/ 人/ [/ 27/ ]/ 在/ 对/ 业务流程/ 的/ 健壮性/ 进行/ 评价/ 时/ ,/ 提出/ 弱/ 良好/ 、/ k/ 良好/ 以及/ 最大/ k/ 良好/ 3/ 个/ 级别/ ,/ 并/ 结合/ 工作/ 流/ 健壮性/ 的/ 定义/ 给出/ 了/ 不同/ 级别/ 流程/ 健壮性/ 的/ 判定/ 方法/ ,/ 该/ 工作/ 虽然/ 对/ 健壮性/ 进行/ 了/ 层次/ 划分/ ,/ 但/ 所/ 涉及/ 到/ 的/ 3/ 个/ 层次/ 的/ 健壮/ 级别/ 仅仅/ 是/ 工作/ 流/ 健壮性/ 3/ 个/ 条件/ 的/ 不同/ 表述/ ./ 上述/ 研究/ 大多/ 是/ 选取/ 了/ 流程/ 结构/ 中/ 的/ 某/ 一/ 性质/ 进行/ 分析/ 或/ 验证/ ,/ 特别/ 是/ 在/ 健壮性/ 方面/ 鲜有/ 分层/ 评价/ 的/ 工作/ ./ 为了/ 合理/ 评价/ 流程/ 的/ 健壮性/ ,/ 本文/ 从/ 流程/ 中/ 的/ 路径/ 可达性/ 和/ 结构/ 冗余/ 性/ 两个/ 角度/ 分析/ Web/ 服务/ 流程/ 的/ 结构/ 健壮性/ ,/ 借鉴/ 已有/ 工作/ 中/ 在/ 流程/ 结构/ 性质/ 验证/ 和/ 健壮性/ 分析/ 方面/ 取得/ 的/ 成果/ ,/ 建立/ 起/ Web/ 服务/ 流程/ 的/ 结构/ 健壮性/ 层次/ 划分/ 准则/ 及其/ 形式化/ 判定/ 方法/ ./ 3Web/ 服务/ 流程/ 建模/ 3.1/ 逻辑/ Petri/ 网/ 简介/ 采用/ 逻辑/ Petri/ 网/ 描述/ 的/ 系统/ 模型/ 结构/ 良好/ 且/ 规模较/ 小/ ,/ 文献/ [/ 28/ ]/ 中/ 给出/ 了/ 一个/ 应用/ 实例/ ,/ 相比/ 传统/ Petri/ 网/ 建模/ ,/ 网/ 模型/ 中/ 变迁/ 、/ 库所/ 以及/ 可/ 覆盖性/ 树中/ 的/ 结点/ 分别/ 缩减/ 了/ 57.1/ %/ 、/ 19.2/ %/ 和/ 50.0/ %/ ./ 在/ 前期/ 研究/ 中/ ,/ 已/ 将/ 逻辑/ Petri/ 网/ 应用/ 于/ 实时/ 协作/ 系统/ [/ 29/ -/ 30/ ]/ 、/ E/ -/ Commerce/ 工作/ 流/ [/ 31/ ]/ 、/ 网上/ 股票交易/ 系统/ [/ 32/ ]/ 以及/ Web/ 服务/ 流程/ 的/ 建模/ [/ 13/ ]/ 与/ 分析/ ./ 下面/ 给出/ Petri/ 网/ 、/ 逻辑/ 表达式/ 以及/ 逻辑/ Petri/ 网等/ 相关/ 概念/ 的/ 定义/ ./ 定义/ 1/ ./ Petri/ 网是/ 一个/ 四元组/ 集合/ Σ/ =/ (/ P/ ,/ T/ ;/ F/ ,/ M/ )/ ,/ 其中/ P/ 是/ 库/ 所/ 集合/ ,/ T/ 是/ 变迁/ 集合/ ,/ 且/ P/ ∩/ T/ =/ / ;/ F/ / (/ P/ ×/ T/ )/ ∪/ (/ T/ ×/ P/ )/ 称为/ Petri/ 网/ 的/ 流/ 关系/ ,/ 映射/ M/ :/ P/ →/ {/ 0/ ,/ 1/ ,/ 2/ ,/ …/ }/ 是/ Petri/ 网/ 的/ 标识/ ./ 若/ / p/ ∈/ ·/ t/ :/ M/ (/ p/ )/ / 1/ ,/ 则/ 称/ t/ 在/ M/ 是/ 下/ 使/ 能/ 的/ ,/ 记为/ M/ [/ t/ 〉/ ;/ 若/ M/ [/ t/ 〉/ M/ ,/ 则/ 对于/ / p/ ∈/ P/ ,/ M/ (/ p/ )/ 可/ 通过/ 以下/ 公式/ 计算/ :/ 定义/ 2/ ./ Σ/ =/ (/ P/ ,/ T/ ;/ F/ ,/ M/ )/ 为/ 一/ Petri/ 网/ ,/ x/ ∈/ P/ ∪/ T/ 是/ Σ/ 中/ 的/ 一个/ 结点/ ,/ ·/ x/ =/ {/ y/ |/ (/ y/ ,/ x/ )/ ∈/ F/ }/ 称为/ x/ 的/ 前集/ ;/ x/ ·/ =/ {/ y/ |/ (/ x/ ,/ y/ )/ ∈/ F/ }/ 称为/ x/ 的/ 后集/ ./ 特别/ 定义/ 操作/ π/ 获取/ 网中/ 结点/ 的/ 前集/ 和/ 后集/ ,/ 令/ π/ 1/ (/ x/ )/ =/ ·/ x/ ,/ π/ 2/ (/ x/ )/ =/ x/ ·/ ./ 定义/ 3/ ./ P/ =/ {/ p1/ ,/ p2/ ,/ …/ ,/ pn/ }/ 是/ 一个/ 布尔/ 变量/ 集合/ ,/ f/ =/ p/ -/ 上/ 的/ 逻辑/ 表达式/ ,/ 其中/ Δ/ ij/ ∈/ {/ ∨/ ,/ ∧/ }/ ,/ ∨/ 与/ ∧/ 分别/ 为/ 逻辑/ 析取/ 与/ 合取/ 运算符/ ,/ p/ -/ ij/ =/ pij/ 或/ / pij/ ,/ pij/ ∈/ P/ ,/ / 为/ 逻辑/ 非/ 运算符/ ,/ 1/ / ij/ / p/ -/ n/ ,/ 记为/ f/ =/ δ/ (/ Δ/ ,/ 珚/ P/ )/ ,/ Δ/ 和/ 珚/ P/ 分别/ 为/ Δ/ i1/ …/ Δ/ ij/ -/ 1/ Δ/ ij/ …/ Δ/ im/ -/ 1/ 和/ p/ -/ 组成/ 元项/ 的/ 集合/ 标记/ 为/ Ω/ f/ ./ 定义/ 4/ ./ P/ =/ {/ p1/ ,/ p2/ ,/ …/ ,/ pn/ }/ 和/ Q/ =/ {/ q1/ ,/ q2/ ,/ …/ ,/ qn/ }/ 为/ 两个/ 布尔/ 变量/ 集合/ ,/ λ/ 为/ 一个/ 映射函数/ :/ λ/ (/ P/ )/ →/ Q/ ./ f/ =/ δ/ (/ Δ/ ,/ 珚/ P/ )/ 为/ P/ 上/ 的/ 逻辑/ 表达式/ ,/ 令/ P/ / Ω/ f/ ,/ 对/ / p/ ∈/ P/ ,/ 利用/ λ/ (/ p/ )/ 替换/ p/ ,/ 得到/ 逻辑/ 表达式/ f/ ,/ f/ 称为/ f/ 的/ 函变/ 替换/ ,/ 记为/ f/ =/ Ψ/ (/ f/ ,/ P/ ,/ λ/ )/ ./ 例如/ ,/ 假设/ P/ =/ {/ p1/ ,/ p2/ ,/ p3/ ,/ p4/ }/ 与/ Q/ =/ {/ q1/ ,/ q2/ ,/ q3/ ,/ q4/ }/ 为/ 布尔/ 变量/ 集合/ ,/ 且/ 存在/ 映射/ λ/ 满足/ / pi/ ∈/ P/ :/ λ/ (/ pi/ )/ =/ qi/ (/ 1/ / j/ / n/ )/ ./ 令/ f/ =/ p1/ ∧/ (/ / p2/ ∨/ p3/ )/ ,/ P/ =/ {/ p2/ ,/ p3/ }/ ,/ 则/ f/ =/ Ψ/ (/ f/ ,/ P/ ,/ λ/ )/ =/ p1/ ∧/ (/ / q2/ ∨/ q3/ )/ ./ 定义/ 5/ ./ 设/ LN/ =/ (/ P/ ,/ T/ ,/ F/ ,/ I/ ,/ O/ )/ ,/ LPN/ =/ (/ LN/ ,/ M/ )/ 称为/ 一个/ 逻辑/ Petri/ 网/ ,/ 其中/ :/ (/ 1/ )/ P/ 是/ 一个/ 有限/ 库所/ 集合/ ;/ (/ 2/ )/ T/ =/ TD/ ∪/ TI/ ∪/ TO/ 是/ 一个/ 有限/ 变迁/ 集合/ ,/ 且/ T/ ∪/ P/ ≠/ / ,/ / t/ ∈/ TI/ ∪/ TO/ :/ ·/ t/ ∩/ t/ ·/ =/ / ,/ 其中/ ①/ TD/ 为/ 一个/ 传统/ Petri/ 网/ 变迁/ 集合/ ;/ ②/ TI/ 为/ 一个/ 逻辑/ 输入/ 变迁/ 集合/ ;/ / t/ ∈/ TI/ ,/ t/ 的/ 触发/ 受其/ 输入/ 库所集/ 上/ 的/ 逻辑/ 表达式/ fI/ (/ t/ )/ 的/ 约束/ ,/ 即/ fI/ (/ t/ )/ 中/ 的/ 谓词/ 变量/ 包含/ t/ 的/ 所有/ 输入/ 库所/ ,/ 称/ fI/ (/ t/ )/ 为/ 逻辑/ 输入/ 表达式/ ;/ ③/ TO/ 为/ 一个/ 逻辑/ 输出/ 变迁/ 的/ 集合/ ;/ / t/ ∈/ TO/ ,/ t/ 触发/ 后/ 的/ 结果/ 受其/ 输出/ 库所集/ 上/ 的/ 逻辑/ 表达式/ fO/ (/ t/ )/ 的/ 约束/ ,/ 即/ fO/ (/ t/ )/ 中/ 的/ 谓词/ 变量/ 包含/ t/ 的/ 所有/ 输出/ 库所/ ,/ 称/ fO/ (/ t/ )/ 为/ 逻辑/ 输出/ 表达式/ ;/ (/ 3/ )/ F/ / (/ P/ ×/ T/ )/ ∪/ (/ T/ ×/ P/ )/ 是/ 一个/ 弧/ 的/ 集合/ ;/ (/ 4/ )/ I/ 是/ 一个/ 从/ 逻辑/ 输入/ 变迁/ 到/ 逻辑/ 输入/ 表达/ (/ 5/ )/ O/ 是/ 一个/ 从/ 逻辑/ 输出/ 变迁/ 到/ 逻辑/ 输出/ 表达/ (/ 6/ )/ M/ :/ P/ →/ {/ 0/ ,/ 1/ }/ 是/ 一个/ 标识/ 函数/ ;/ (/ 7/ )/ 变迁/ 发生/ 规则/ :/ ①/ 对/ / t/ ∈/ TD/ ,/ 变迁/ 发生/ 规则/ 与/ 普通/ Petri/ 网中/ ②/ 对/ / t/ ∈/ TI/ ,/ 若/ fI/ (/ t/ )/ |/ M/ =/ ·/ T/ ·/ ,/ 即/ t/ 的/ 输入/ 库所集/ 在/ 标识/ M/ 下/ 满足/ t/ 的/ 逻辑/ 输入/ 表达式/ fI/ (/ t/ )/ ,/ 则/ M/ [/ t/ 〉/ ,/ 并且/ ,/ 若/ M/ [/ t/ 〉/ M/ ,/ 则/ / p/ ∈/ ·/ t/ :/ M/ (/ p/ )/ =/ 0/ ;/ / p/ ∈/ t/ ·/ :/ M/ (/ p/ )/ =/ 0/ ,/ M/ (/ p/ )/ =/ 1/ ;/ 且/ / p/ / ·/ t/ ∪/ t/ ·/ :/ M/ (/ p/ )/ =/ M/ (/ p/ )/ ;/ ③/ 对/ / t/ ∈/ TO/ ,/ 若/ / p/ ∈/ ·/ t/ :/ M/ (/ p/ )/ =/ 1/ ,/ 则/ t/ 是/ 使/ 能式/ 的/ 映射/ ,/ 即/ / t/ ∈/ TI/ ,/ I/ (/ t/ )/ =/ fI/ (/ t/ )/ ;/ 式/ 的/ 映射/ ,/ 即/ / t/ ∈/ TO/ ,/ O/ (/ t/ )/ =/ fO/ (/ t/ )/ ;/ 变迁/ 发生/ 规则/ 相同/ ;/ Page4/ 的/ ,/ 并且/ ,/ 若/ M/ [/ t/ 〉/ M/ ,/ 则/ / p/ ∈/ ·/ t/ :/ M/ (/ p/ )/ =/ M/ (/ p/ )/ -/ 1/ ;/ / p/ / t/ ·/ ∪/ ·/ t/ :/ M/ (/ p/ )/ =/ M/ (/ p/ )/ ;/ 且/ / p/ ∈/ t/ ·/ :/ fO/ (/ t/ )/ |/ M/ =/ ·/ T/ ·/ ,/ 即/ t/ 的/ 输出/ 库所集/ 在/ 标识/ M/ 下/ 满足/ t/ 的/ 逻辑/ 输出/ 表达式/ fO/ (/ t/ )/ ./ 逻辑/ Petri/ 网/ 通过/ 附加/ 在/ 逻辑/ 变迁/ 中/ 的/ 逻辑/ 表达式/ 控制/ 网中/ 的/ 流程/ 转移/ ,/ 为了/ 与/ 普通/ 变迁/ 进行/ 区别/ ,/ 在/ 逻辑/ 变迁/ 上/ 添加/ I/ 或者/ O/ 表示/ 其/ 变迁/ 类型/ ,/ 图/ 1/ (/ a/ )/ 为/ 一个/ 逻辑/ 输入/ 变迁/ ,/ (/ b/ )/ 为/ 一个/ 逻辑/ 输出/ 变迁/ ./ 图/ 1/ 中/ f1/ ,/ f2/ ,/ f3/ 以及/ f4/ 为/ 逻辑/ Petri/ 网/ 的/ 部分/ 子网/ 流程/ ,/ (/ a/ )/ 中/ 的/ 逻辑/ 输入/ 变迁/ 标注/ (/ p1/ ∨/ p2/ )/ ∧/ p3/ ,/ 表示/ 流程/ f1/ 和/ f2/ 之一/ 与/ f3/ 同时/ 完成/ 后/ 即可/ 触发/ 后续/ 流程/ f4/ ;/ (/ b/ )/ 中/ 的/ 逻辑/ 输出/ 变迁/ 标注/ p2/ ∧/ / p3/ ∨/ / p2/ ∧/ p3/ ,/ 表示/ 当/ 流程/ f1/ 执行/ 完毕/ 后/ ,/ 可以/ 触发/ 且/ 只能/ 触发/ 流程/ f2/ 与/ f3/ 之一/ ./ 3.2/ 服务网/ 及/ 相关/ 概念/ 借鉴/ 工作/ 流网/ 的/ 建模/ 方法/ [/ 1/ ]/ ,/ 采用/ 逻辑/ Petri/ 网/ 描述/ 服务/ 流程/ ,/ 将/ Web/ 服务/ 流程/ 建模/ 为/ 服务网/ ,/ 下面/ 给出/ 服务网/ 的/ 定义/ ./ 定义/ 6/ ./ 服务网/ [/ 13/ ]/ 为/ 一个/ 标记/ LPN/ ,/ 表示/ 为/ SN/ =/ (/ LPN/ ,/ i/ ,/ o/ ,/ φ/ ,/ Γ/ )/ ,/ 其中/ :/ (/ 1/ )/ LPN/ 是/ 一个/ 逻辑/ Petri/ 网/ ,/ 用于/ 描述/ Web/ 服务/ 流程/ 的/ 过程/ 模型/ ,/ 具有/ 唯一/ 起始/ 库所/ i/ 和/ 终止/ 库所/ o/ ;/ (/ 2/ )/ P/ =/ PD/ ∪/ PI/ ∪/ PC/ ,/ PD/ 为/ 外部/ 数据库/ 所/ 集合/ ,/ 用于/ 与/ 外部/ 服务/ 进行/ 数据/ 交互/ ;/ PI/ 为/ 内部/ 数据库/ 所/ 集合/ ,/ 用于/ 服务/ 流程/ 内部/ 的/ 数据/ 交互/ ;/ Pc/ 为/ 控制/ 库所/ 集合/ ,/ 用于/ 描述/ 服务/ 流程/ 的/ 转移/ ;/ (/ 3/ )/ T/ =/ Ts/ ∪/ TI/ ∪/ TO/ ,/ Ts/ 为/ 服务/ 变迁/ 集合/ ,/ 表示/ 服务/ 流程/ 的/ 所有/ 组成/ Web/ 服务/ ,/ TI/ 和/ TO/ 为/ 逻辑/ 输入/ 和/ 输出/ 变迁/ 集合/ ,/ 用于/ 控制/ 服务/ 流程/ 中/ 的/ 业务/ 流/ ;/ (/ 4/ )/ M/ 称为/ SN/ 的/ 标识/ ,/ 令/ M0/ 为/ 初始/ 标识/ ,/ 且/ (/ 5/ )/ φ/ :/ T/ →/ Γ/ 是/ 一个/ 映射函数/ ,/ 其中/ Γ/ 表示/ 流程/ M0/ (/ i/ )/ =/ 1/ ,/ / p/ ∈/ P/ -/ {/ p/ }/ :/ M0/ (/ p/ )/ =/ 0/ ;/ 中/ 的/ 变迁/ 名称/ 集合/ ./ 为了/ 简化/ 服务网/ 模型/ ,/ 当/ 服务网/ 中/ 的/ 两个/ 服务/ 变迁/ 之间/ 同时/ 存在/ 控制/ 库所/ 和/ 内部/ 数据库/ 所时/ ,/ 将/ 二者/ 合并/ 表示/ 为/ 控制/ 库所/ ./ 图/ 2/ 为/ 一个/ 服务网/ ,/ 描述/ 了/ 电子商务/ 中/ 买卖双方/ 交易/ 流程/ ,/ 为了/ 清晰/ 描述/ 服务/ 流程/ ,/ 将/ 流程/ 中/ 的/ 服务/ 变迁/ 和/ 数据库/ 所/ 进行/ 编号/ ,/ 具体/ 含义/ 参见/ 表/ 1/ 及表/ 2/ ./ 变迁/ IDWeb/ 服务/ 名称/ t11t12t13t14t15t21t22t23t24t25t26/ 库所/ ID/ 库所/ 名称/ p1p2p3p4p5p0/ 服务网/ 中/ 的/ 库/ 所/ p11/ ~/ p19/ 以及/ p20/ ~/ p29/ 为/ 控制/ 库所/ ,/ 表示/ 流程/ 内部/ 操作/ 状态/ 之间/ 的/ 转换/ ;/ 库所/ p1/ ~/ p5/ 由/ 虚线/ 连接/ ,/ 表示/ 内部/ 数据库/ 所/ 及其/ 数据/ 转/ Page5/ 移/ 关系/ ,/ 库所/ p0/ 为/ 外部/ 数据库/ 所/ ,/ 表示/ 服务/ 流程/ 需要/ 从/ 外部/ 接受/ 数据/ ,/ 为了/ 区别/ 于/ 其他/ 库所/ ,/ 以/ 双圈/ 进行/ 标识/ ./ 将/ 服务网/ 中/ 的/ 外部/ 数据库/ 所/ 集合/ 删除/ 后/ 得到/ 的/ 网/ 结构/ 称为/ 服务/ 内/ 网/ ,/ 将/ 服务网/ 的/ 外部/ 数据库/ 所/ 和/ 内部/ 数据库/ 所/ 同时/ 删除/ ,/ 得到/ 的/ 网/ 结构/ 称为/ 控制/ 流网/ ,/ 详见/ 定义/ 7/ 和/ 定义/ 8/ ./ 服务/ 内/ 网/ 描述/ 了/ 服务/ 流程/ 之间/ 的/ 操作/ 转移/ 及其/ 内部/ 数据/ 交互/ ,/ 控制/ 流网/ 则/ 仅/ 保留/ 了/ 服务/ 流程/ 中/ 的/ 操作/ 转移/ 关系/ ,/ 图/ 3/ 为/ 图/ 2/ 中/ 服务网/ 所/ 对应/ 的/ 控制/ 流网/ ./ 定义/ 7/ ./ 若/ SN/ =/ (/ LPN/ ,/ M/ ,/ i/ ,/ o/ ,/ φ/ ,/ Γ/ )/ 为/ 一个/ 服务网/ ,/ 令/ LPN/ =/ (/ P/ ,/ T/ ,/ F/ ,/ I/ ,/ O/ )/ ,/ 其中/ P/ =/ Pc/ ∪/ PI/ ,/ T/ =/ T/ ,/ F/ =/ F/ -/ {/ PD/ ×/ T/ ∪/ T/ ×/ PD/ }/ ,/ 则/ 称/ SIN/ =/ (/ LPN/ ,/ i/ ,/ o/ ,/ φ/ ,/ Γ/ )/ 为/ 服务网/ SN/ 的/ 服务/ 内网/ ./ 定义/ 8/ ./ 若/ SN/ =/ (/ LPN/ ,/ M/ ,/ i/ ,/ o/ ,/ φ/ ,/ Γ/ )/ 为/ 一个/ 服务网/ ,/ 令/ LPN/ =/ (/ P/ ,/ T/ ,/ F/ ,/ I/ ,/ O/ )/ ,/ 其中/ P/ =/ Pc/ ,/ T/ =/ T/ ,/ F/ =/ F/ -/ {/ PD/ ∪/ PI/ }/ ×/ T/ ∪/ T/ ×/ {/ PD/ ∪/ PI/ }/ ,/ 则/ 称/ CFN/ =/ (/ LPN/ ,/ i/ ,/ o/ ,/ φ/ ,/ Γ/ )/ 为/ 服务网/ SN/ 的/ 控制/ 流网/ ./ 根据/ Web/ 服务/ 业务流程/ 执行/ 语言/ 及/ 工作/ 流/ [/ 1/ ]/ 相关/ 知识/ 可知/ ,/ 任意/ 复杂/ 的/ 服务/ 流程/ 可/ 由/ 顺序/ 、/ 并行/ 、/ 选择/ 以及/ 循环/ 4/ 种/ 基本/ 结构/ 组合而成/ ./ 令/ t1/ 和/ t2/ 为/ 两个/ 原子/ Web/ 服务/ ,/ 由/ 上述/ 4/ 种/ 基本/ 结构/ 表示/ 的/ 服务网/ 如图/ 4/ 所示/ ./ 本文/ 将/ 由/ 两个/ 原子/ 服务/ 组成/ 的/ 顺序/ 、/ 选择/ 以及/ 并行/ 和/ 一个/ 原子/ 服务/ 组成/ 的/ 循环/ 结构型/ 的/ 服务网/ 称为/ 原子/ 型/ 服务网/ ./ 并发/ 流程/ 中/ 的/ 逻辑/ 输入/ 和/ 输出/ 变迁/ 对应/ 于/ 工作/ 流/ [/ 1/ ]/ 中路/ 由/ 构件/ or/ -/ split/ 和/ or/ -/ join/ ,/ 选择/ 流程/ 中/ 的/ 逻辑/ 输入/ 和/ 输出/ 变迁/ 对应/ 于/ 路由/ 构件/ and/ -/ split/ 和/ and/ -/ join/ ,/ 上述/ 逻辑/ 变迁/ 类型/ 分别/ 记为/ O/ ∧/ ,/ I/ ∧/ ,/ O/ ∨/ 和/ I/ ∨/ ./ 为/ 规范/ 流程/ 建模/ ,/ 下面/ 给出/ 逻辑/ 表达式/ 的/ 标准型/ 及/ 协同/ 表达式/ 的/ 定义/ ./ 定义/ 9/ ./ F/ =/ {/ f1/ ,/ f2/ ,/ …/ ,/ fn/ }/ 是/ 一组/ 服务网/ ,/ to/ 和/ ti/ 是/ 连接/ F/ 的/ 逻辑/ 变迁/ ,/ / fj/ :/ π/ 1/ (/ fj/ ./ i/ )/ =/ {/ to/ }/ 且/ / fj/ :/ π/ 2/ (/ fj/ ./ o/ )/ =/ {/ ti/ }/ (/ 1/ / j/ / n/ )/ ./ 将/ 以下/ 形式/ 的/ 逻辑/ 表达式/ 定义/ 为/ 对应/ 类型/ 逻辑/ 变迁/ 的/ 逻辑/ 表达式/ 的/ 标准型/ ./ (/ 1/ )/ O/ ∨/ :/ O/ (/ to/ )/ =/ f1/ ./ i/ ∧/ / f2/ ./ i/ / ∧/ …/ ∧/ / fn/ ./ i/ ∨/ / f1/ ./ i/ ∧/ f2/ ./ i/ / ∧/ …/ ∧/ / fn/ ./ i/ ∨/ …/ ∨/ / f1/ ./ i/ ∧/ / f2/ ./ i/ / ∧/ …/ ∧/ fn/ ./ i/ ;/ (/ 2/ )/ O/ ∧/ :/ O/ (/ to/ )/ =/ f1/ ./ i/ ∧/ f2/ ./ i/ ∧/ …/ ∧/ fn/ ./ i/ ;/ (/ 3/ )/ I/ ∨/ :/ I/ (/ ti/ )/ =/ f1/ ./ o/ ∨/ f2/ ./ o/ ∨/ …/ ∨/ fn/ ./ o/ ;/ (/ 4/ )/ I/ ∧/ :/ I/ (/ ti/ )/ =/ f1/ ./ o/ ∧/ f2/ ./ o/ ∧/ …/ ∧/ fn/ ./ o/ ./ 给定/ 服务网/ SN/ ,/ 定义/ 运算符/ / 来/ 获取/ 逻辑/ 变迁/ 的/ 类型/ ,/ 对/ 任意/ t/ ∈/ SN/ ./ TI/ ∪/ SN/ ./ TO/ ,/ / (/ t/ )/ ∈/ Lg/ ,/ Lg/ =/ {/ O/ ∨/ ,/ O/ ∧/ ,/ I/ ∨/ ,/ I/ ∧/ }/ ./ 定义/ 10/ ./ F/ =/ {/ f1/ ,/ f2/ ,/ …/ ,/ fn/ }/ 是/ 一组/ 服务网/ ,/ to/ 和/ ti/ 是/ 连接/ F/ 的/ 逻辑/ 变迁/ ,/ / fj/ :/ π/ 1/ (/ fj/ ./ i/ )/ =/ {/ to/ }/ 且/ / fj/ :/ π/ 2/ (/ fj/ ./ o/ )/ =/ {/ ti/ }/ (/ 1/ / j/ / n/ )/ ./ 若/ / (/ to/ )/ =/ O/ ∨/ ∧/ / (/ ti/ )/ =/ I/ ∨/ 或/ / (/ to/ )/ =/ O/ ∧/ ∧/ / (/ ti/ )/ =/ I/ ∧/ ,/ 则/ 称/ O/ (/ to/ )/ 和/ I/ (/ ti/ )/ 为/ 协同/ 表达式/ ,/ 记为/ O/ (/ to/ )/ ◇/ I/ (/ ti/ )/ ./ 为了/ 便于/ 后文/ 描述/ ,/ 引入/ 符号/ ◆/ 表示/ 两个/ 逻辑/ 表达式/ 为/ 非/ 协同/ 逻辑/ 表达式/ ./ 若/ O/ (/ to/ )/ 和/ I/ (/ ti/ )/ 为/ 非/ 协同/ 表达式/ ,/ 记为/ O/ (/ to/ )/ ◆/ I/ (/ ti/ )/ ./ 定义/ 11/ ./ SN/ 为/ 一/ 服务网/ ,/ / to/ ∈/ SN/ ,/ / ti/ :/ O/ (/ to/ )/ ◇/ I/ (/ ti/ )/ 且/ / ti/ ∈/ SN/ ,/ / to/ :/ I/ (/ ti/ )/ ◇/ O/ (/ to/ )/ ,/ 则/ 称/ SN/ 为/ 良构/ 流程/ ./ 良构/ 流程/ 的/ 概念/ 被/ 应用/ 于/ 工作/ 流/ [/ 1/ ]/ 和/ Web/ 服务/ 流程/ [/ 20/ ]/ 建模/ 中/ ,/ 良构/ 是/ 指/ 两个/ 流程/ 若以/ or/ -/ split/ 开始/ 分支/ ,/ 则/ 必须/ 以/ or/ -/ join/ 进行/ 流程/ 汇集/ ;/ 若以/ and/ -/ split/ 开始/ 分支/ ,/ 则/ 必须/ 以/ and/ -/ join/ 进行/ 流程/ 汇集/ ,/ 并且/ 匹配/ 的/ 逻辑/ 变迁/ 具有/ 协同/ 表达式/ ./ Page6/ 图/ 5/ 为/ 两种/ 非良构/ 流程/ ,/ 其中/ 图/ 5/ (/ a/ )/ 流程/ 中/ 的/ 逻辑/ 变迁/ 没有/ 成/ 对/ 匹配/ 出现/ ,/ 图/ 5/ (/ b/ )/ 流程/ 中/ 的/ 逻辑/ 变迁/ to1/ 与/ ti1/ 虽成/ 对/ 出现/ ,/ 但/ 二者/ 标注/ 的/ 逻辑/ 表达式/ 为/ 非/ 协同/ 表达式/ ./ 4Web/ 服务/ 流程/ 的/ 结构/ 范式/ 4.1/ 结构/ 范式/ 的/ 定义/ 由于/ 需要/ 协调/ 和/ 管理/ 参与/ 组合/ 的/ 各个/ Web/ 服务/ ,/ 在/ 组合/ 得到/ 的/ 服务/ 流程/ 中/ 容易/ 存在/ 逻辑/ 结构/ 混乱/ 、/ 路径/ 不可/ 达/ 、/ 数据流/ 交互/ 死锁/ 以及/ 结构/ 冗余/ 等/ 结构/ 不合理/ 的/ 问题/ ./ 然而/ ,/ 并非/ 所有/ 存在/ 问题/ 的/ 流程/ 均/ 没有/ 利用/ 价值/ ,/ 为了/ 对/ 流程/ 结构/ 的/ 合理性/ 做出/ 更为/ 科学/ 的/ 定量/ 评价/ ,/ 本文/ 提出/ 将/ 已有/ 研究/ 工作/ 中/ 的/ 结构/ 健壮性/ 进行/ 层次/ 划分/ ,/ 建立/ 不同/ 级别/ 的/ 健壮性/ 判定/ 准则/ ./ 结构/ 范式/ 是/ 在/ 服务网/ 的/ 基础/ 上/ 对/ 流程/ 结构/ 健壮性/ 层次/ 划分/ 准则/ 的/ 一种/ 形式化/ 表达/ ./ 结构/ 范式/ 可以/ 用来/ 评价/ 服务/ 流程/ 的/ 结构/ 合理性/ ,/ 进而/ 有助于/ 改进/ 服务/ 组合/ 的/ 合理性/ 和/ 可靠性/ ./ 在/ 服务/ 流程/ 的/ 建模/ 过程/ 中/ ,/ 服务/ 内/ 网/ 描述/ 了/ 删除/ 外部/ 数据/ 请求/ 的/ 服务/ 流程/ ,/ 可以/ 用来/ 判定/ 服务/ 流程/ 的/ 逻辑/ 结构/ 和/ 内部/ 数据/ 交互/ 是否/ 存在/ 缺陷/ ,/ 本文/ 从/ 流程/ 中/ 的/ 路径/ 可达性/ 和/ 结构/ 冗余/ 性/ 两个/ 角度/ 将/ Web/ 服务/ 流程/ 结构/ 范式/ 划分/ 为/ 四个/ 层次/ ./ 为了/ 便于/ 描述/ ,/ 令/ SP/ 表示/ 一个/ Web/ 服务/ 流程/ ,/ SN/ 、/ SIN/ 与/ CFN/ 分别/ 为/ SP/ 的/ 服务网/ 、/ 服务/ 内网/ 和/ 控制/ 流网/ ,/ Gf/ 表示/ SN/ 的/ 终止/ 状态/ ,/ 即/ Gf/ 为/ SN/ 对应/ M/ (/ o/ )/ =/ 1/ 标识/ 状态/ ./ 定义/ 12/ ./ 若/ SIN/ 中/ 存在/ 变迁/ 序列/ σ/ ,/ 使得/ M0/ [/ σ/ 〉/ Gf/ ,/ 则/ 称/ SP/ 满足/ 第一/ 范式/ ,/ 记为/ 1NF/ ./ 定义/ 13/ ./ 若/ SP/ 满足/ 1NF/ ,/ 且/ SIN/ 是/ 无/ 阻塞/ 的/ ,/ 则/ 称/ SP/ 满足/ 第二/ 范式/ ,/ 记为/ 2NF/ ./ 定义/ 14/ ./ 若/ SP/ 满足/ 2NF/ ,/ 且/ SIN/ 中/ 无/ 等价/ 子/ 控制/ 流网/ ,/ 则/ 称/ SP/ 满足/ 第三/ 范式/ ,/ 记为/ 3NF/ ./ 定义/ 15/ ./ 若/ SP/ 满足/ 3NF/ ,/ 且/ SIN/ 中/ 无/ 重复子/ 控制/ 流网/ ,/ 则/ 称/ SP/ 满足/ 第四/ 范式/ ,/ 记为/ 4NF/ ./ 满足/ 第一/ 范式/ 的/ 服务/ 流程/ 中/ 至少/ 存在/ 一条/ 从/ 起始/ 服务/ 至/ 终止/ 服务/ 的/ 连通/ 服务/ 流程/ 路径/ ,/ 从而/ 可以/ 对外/ 提供/ 服务/ ,/ 这是/ 服务/ 流程/ 结构合理/ 的/ 最低/ 层次/ ;/ 第二/ 范式/ 要求/ 服务/ 流程/ 是/ 无/ 阻塞/ 的/ ,/ 即/ 所有/ 潜在/ 的/ 服务/ 流程/ 路径/ 都/ 是/ 可以/ 到达/ 并/ 正确/ 地/ 执行/ ,/ 无/ 阻塞/ 服务网/ 参见/ 定义/ 16/ ./ 第三/ 范式/ 要求/ 流程/ 中/ 不/ 存在/ 等价/ 服务/ 流程/ ,/ 等价/ 服务/ 流程/ (/ 定义/ 17/ )/ 是/ 指/ 在/ 流程/ 的/ 选择/ 和/ 并行/ 结构/ 中/ 存在/ 两段/ 功能/ 等价/ 的/ 子/ 服务/ 流程/ ./ 等价/ 服务/ 流程/ 的/ 出现/ 造成/ 了/ 服务网/ 结构/ 的/ 冗余/ ,/ 并/ 可/ 引发/ 服务网/ 语义/ 表达/ 错误/ ./ 例如/ ,/ 一个/ 服务网/ 的/ 选择/ 结构/ 中/ 出现/ 了/ 两个/ 等价/ 子/ 流程/ ,/ 选择/ 结构/ 会/ 在/ 不同/ 条件/ 下/ 分别/ 执行/ 等价/ 流程/ 中/ 的/ 一个/ ,/ 而/ 这/ 两个/ 流程/ 的/ 功能/ 相同/ ,/ 因此/ 该/ 选择/ 结构/ 是/ 无/ 意义/ 的/ ./ 第四/ 范式/ 要求/ 在/ 流程/ 中/ 不/ 存在/ 重复/ 服务/ 流程/ ,/ 重复/ 服务/ 流程/ 是/ 指/ 两段/ 完全相同/ 的/ 服务/ 流程/ ,/ 为了/ 流程/ 模型/ 表达/ 的/ 简介/ ,/ 重复/ 服务/ 流程/ 应该/ 被/ 抽象/ 映射/ 为/ 一个/ 子/ 流程/ 结点/ ,/ 有关/ 重复/ 流程/ 的/ 定义/ 可/ 参见/ 定义/ 18/ ./ 定义/ 16/ ./ 〈/ SN/ ,/ Gf/ 〉/ 是/ 无/ 阻塞/ 的/ ,/ 当且/ 仅/ 当/ / M/ ∈/ R/ (/ M0/ )/ ,/ / σ/ ∈/ T/ / :/ M/ [/ σ/ 〉/ Gf/ ./ 定义/ 17/ ./ CFN1/ =/ (/ LPN1/ ,/ M1/ ,/ i1/ ,/ o1/ ,/ φ/ 1/ ,/ Γ/ 1/ )/ 和/ CFN2/ =/ (/ LPN2/ ,/ M2/ ,/ i2/ ,/ o2/ ,/ φ/ 2/ ,/ Γ/ 2/ )/ 为/ 两个/ 控制/ 流网/ ,/ 称/ CFN1/ 和/ CFN2/ 为/ 等价/ 控制/ 流网/ 当且/ 仅/ 当/ 存在/ 映射/ τ/ 使得/ 如下/ 条件/ 成立/ :/ (/ 1/ )/ LPN1/ =/ LPN2/ ;/ (/ 2/ )/ i1/ =/ i2/ ∧/ o1/ =/ o2/ ;/ Ω/ I/ (/ t/ )/ ,/ τ/ )/ ;/ Ω/ O/ (/ t/ )/ ,/ τ/ )/ ;/ (/ 1/ )/ / x/ ∈/ P1/ ∪/ T1/ / τ/ (/ x/ )/ ∈/ P2/ ∪/ T2/ ;/ (/ 2/ )/ / (/ x/ ,/ y/ )/ ∈/ F1/ / (/ τ/ (/ x/ )/ ,/ τ/ (/ y/ )/ )/ ∈/ F2/ ;/ (/ 3/ )/ / t/ ∈/ TI1/ ,/ τ/ (/ t/ )/ ∈/ TI2/ :/ I/ (/ τ/ (/ t/ )/ )/ =/ Ψ/ (/ I/ (/ t/ )/ ,/ (/ 4/ )/ / t/ ∈/ TO1/ ,/ τ/ (/ t/ )/ ∈/ TO2/ :/ O/ (/ τ/ (/ t/ )/ )/ =/ Ψ/ (/ O/ (/ t/ )/ ,/ (/ 5/ )/ / t/ ∈/ TS1/ ,/ τ/ (/ t/ )/ ∈/ TS2/ :/ φ/ 1/ (/ t/ )/ / φ/ 2/ (/ τ/ (/ t/ )/ )/ ;/ 若/ CFN1/ 和/ CFN2/ 为/ 等价/ 控制/ 流网/ ,/ 则/ 记为/ CFN1/ ~/ CFN2/ ./ 定义/ 18/ ./ CFN1/ =/ (/ LPN1/ ,/ M1/ ,/ i1/ ,/ o1/ ,/ φ/ 1/ ,/ Γ/ 1/ )/ 和/ CFN2/ =/ (/ LPN2/ ,/ M2/ ,/ i2/ ,/ o2/ ,/ φ/ 2/ ,/ Γ/ 2/ )/ 为/ 两个/ 控制/ 流网/ ,/ 对/ 给定/ 正整数/ n/ ,/ 称/ CFN1/ 和/ CFN2/ 为/ 重复/ 控制/ 流网/ 当且/ 仅/ 当/ 如下/ 条件/ 成立/ :/ Page7/ (/ 3/ )/ Γ/ 1/ =/ Γ/ 2/ ∧/ φ/ 1/ =/ φ/ 2/ ;/ (/ 4/ )/ |/ LPN1/ ./ Ts/ |/ / n/ ;/ 定义/ 18/ 中/ (/ 4/ )/ 要求/ 服务网/ 过程/ 模型/ 中/ 的/ 服务/ 数目/ 大于/ 指定/ 的/ 整数/ n/ ,/ 是/ 对/ 重复/ 流程/ 中/ 包含/ 的/ 服务/ 数目/ 做/ 约束/ ,/ 即/ 只有/ 大于/ n/ 时才/ 认为/ 两个/ 服务/ 流程/ 是/ 重复/ 流程/ ;/ 在/ 小于/ 或/ 等于/ n/ 时/ ,/ 即使/ 两个/ 流程/ 片段/ 完全相同/ 也/ 不/ 被/ 认作/ 重复/ 流程/ ./ 4.2/ 结构/ 范式/ 的/ 判定/ 4.2/ ./ 1/ 控制/ 流网/ 语言/ 服务/ 流程/ 的/ 结构/ 范式/ 是/ 根据/ 服务/ 内网/ 中/ 流程/ 路径/ 结构/ 性质/ 进行/ 划分/ 的/ ,/ 为了/ 判定/ 服务/ 流程/ 的/ 结构/ 范式/ ,/ 须/ 获取/ 服务/ 内网/ 中/ 的/ 流程/ 路径/ ,/ 而/ 服务/ 内网/ 中/ 的/ 流程/ 路径/ 对应/ 于/ 控制/ 流网/ 中/ 从/ 起始/ 库所到/ 终止/ 库所/ 的/ 可/ 触发/ 变迁/ 序列/ ./ 将/ Petri/ 网/ 的/ 变迁/ 集/ T/ 映射/ 到/ 某个/ 字母表/ Γ/ (/ 每个/ 变迁/ 对应/ 一个/ 字母/ )/ ,/ 该/ Petri/ 网/ 的/ 所有/ 可能/ 发生/ 的/ 变迁/ 序列/ 映射/ 到/ Γ/ / 的/ 字符串/ 的/ 集合/ 称为/ Petri/ 网/ 的/ 语言/ ,/ 从/ Petri/ 网/ 语言/ 可以/ 方便/ 地/ 获取/ 所有/ 可/ 触发/ 变迁/ 序列/ ./ 传统/ 的/ Petri/ 网/ 语言/ 求解/ 方法/ 通常/ 是/ 通过/ 遍历/ Petri/ 网/ 的/ 可/ 覆盖性/ 树/ 或/ 可达/ 标识/ 图/ 获得/ ./ 当/ Petri/ 网/ 规模/ 较大/ 时/ ,/ 其/ 对应/ 的/ 可/ 覆盖性/ 树/ 或/ 可达/ 标识/ 图中/ 的/ 状态/ 过多/ ,/ 存在/ 状态/ 空间/ 爆炸/ 问题/ ,/ 因此/ 求解/ Petri/ 网/ 语言/ 的/ 复杂/ 度过/ 高/ ./ 为/ 避免/ 上述/ 问题/ ,/ 本文/ 采取/ 合并/ 化简/ 的/ 方法/ 求解/ 控制/ 流网/ 语言/ (/ CFN/ -/ L/ )/ ,/ 从而/ 获取/ 所有/ 可/ 触发/ 变迁/ 序列/ ,/ 然后/ 再/ 将/ 内部/ 数据库/ 所/ 加入/ 到/ 控制/ 流网/ ,/ 判定/ 这些/ 可/ 触发/ 变迁/ 序列/ 的/ 可达性/ 及其/ 结构/ 性质/ ,/ 进而/ 判定/ 对应/ 服务/ 流程/ 的/ 结构/ 范式/ ./ 一个/ 控制/ 流网/ CFN/ 的/ CFN/ -/ L/ 表示/ 为/ L/ (/ CFN/ )/ ,/ 同时/ 将/ L/ (/ CFN/ )/ 对应/ 的/ 控制/ 流网/ 记为/ Nsp/ (/ L/ (/ CFN/ )/ )/ ./ CFN/ -/ L/ 求解/ 约简/ 规则/ 如下/ :/ 从/ 起始/ 库所/ i/ 开始/ 搜索/ CFN/ ,/ 令/ t1/ 为/ 当前/ 处理/ (/ 1/ )/ 若/ t1/ ∈/ CFN/ ./ Ts/ ,/ t2/ ∈/ CFN/ ./ Ts/ ,/ 则/ 约简/ 为/ t1t2/ ./ (/ 2/ )/ 若/ t1/ ∈/ CFN/ ./ Ts/ ,/ t2/ ∈/ CFN/ ./ To/ ,/ 则/ t2/ 为/ 逻辑/ 输出/ 变迁/ ,/ 假设/ 其/ 关联/ 子/ 流程/ Sp1/ ,/ Sp2/ ,/ …/ ,/ Spm/ ,/ 令/ L/ (/ Spi/ )/ =/ si/ ,/ 约简/ 为/ t1t2s1/ ‖/ // / s2/ ‖/ // / …/ sm/ ,/ 其中/ si/ 与/ si/ +/ 1/ 之间/ 的/ 连接符/ ‖/ 或/ / 由/ O/ (/ t2/ )/ 中/ 的/ 逻辑/ 运算符/ 映射/ 而/ 得/ ,/ ‖/ 对应/ ∧/ ,/ / 对应/ ∨/ ./ (/ 3/ )/ 若/ t1/ ∈/ CFN/ ./ Ts/ ,/ t2/ ∈/ CFN/ ./ TI/ ,/ 则/ t2/ 为/ 逻辑/ 输入/ 变迁/ ,/ 假设/ 其/ 关联/ 子/ 流程/ Sp1/ ,/ Sp2/ ,/ …/ ,/ Spm/ ,/ 且/ L/ (/ Spi/ )/ =/ si/ 求解/ 完毕/ ,/ 约简/ 为/ s1/ ‖/ // / s2/ ‖/ // / …/ smt2/ ,/ 其中/ t1/ ∈/ sj/ ,/ 1/ / j/ / m/ ./ (/ 4/ )/ 若/ t1/ ∈/ CFN/ ./ TI/ ,/ t2/ ∈/ CFN/ ./ Ts/ ,/ 则/ 约简/ 为/ t1t2/ ./ 变迁/ ,/ t2/ =/ π/ 2/ (/ π/ 2/ (/ t1/ )/ )/ :/ (/ 5/ )/ 若/ π/ 2/ (/ t1/ )/ )/ =/ o/ ,/ 则/ 约简/ 完毕/ ./ (/ 6/ )/ 由/ 逻辑/ 变迁/ 关联/ 的/ 子/ 流程/ 采取/ 规则/ (/ 1/ )/ ~/ (/ 5/ )/ 递归/ 约简/ ,/ 若/ 在/ 约简/ 过程/ 中/ 选择/ 和/ 并发/ 结构/ 是非/ 原子/ 型/ 的/ ,/ 对/ 其/ 分支/ 流程/ 产生/ 的/ CFN/ -/ L/ 添加/ 括号/ 以便/ 增加/ 控制/ 流网/ 语言/ 的/ 可读性/ ./ 例如/ ,/ 令/ CFN1/ 表示/ 图/ 3/ 中/ 控制/ 流网/ ,/ 则/ L/ (/ CFN1/ )/ =/ O1t23/ / (/ t24t25t26/ )/ I24/ ./ 2.2/ 相关/ 结构/ 判定/ 定理/ 定义/ 19/ ./ Π/ X/ →/ Y/ :/ X/ / →/ Y/ / 称为/ 从/ X/ 到/ Y/ 投影/ ,/ 当且/ 仅/ 当/ / σ/ ∈/ X/ / ,/ Π/ X/ →/ Y/ (/ σ/ )/ 是/ 将/ X/ -/ Y/ 中/ 所有/ 字符/ 从/ σ/ 删除/ 后/ 得到/ 的/ 字符串/ [/ 31/ ]/ ./ 定义/ 20/ ./ 字符串/ σ/ / L/ (/ CFN/ )/ ,/ 若/ 存在/ 字符/ x/ ,/ y/ ∈/ &/ (/ σ/ )/ :/ / (/ x/ )/ ∈/ {/ O/ ∨/ ,/ O/ ∧/ }/ ∧/ / (/ y/ )/ ∈/ {/ I/ ∨/ ,/ I/ ∧/ }/ ∧/ O/ (/ x/ )/ ◇/ I/ (/ y/ )/ ,/ 则/ 将/ x/ 和/ y/ 从/ σ/ 中/ 同时/ 删除/ ,/ 上述/ 操作/ 称为/ 逻辑/ 熔合/ ,/ 记/ 为/ Λ/ (/ σ/ )/ ./ 定理/ 1/ ./ ε/ 为空/ 字符串/ ,/ 给定/ 控制/ 流网/ CFN/ 与/ 字符/ 集合/ Σ/ =/ φ/ (/ CFN/ ./ TI/ ∪/ CFN/ ./ TO/ )/ ,/ 若/ Λ/ (/ Π/ Γ/ →/ ∑/ (/ L/ (/ CFN/ )/ )/ )/ =/ ε/ ,/ 则/ CFN/ 是/ 良构/ 的/ ./ 证明/ ./ 假设/ CFN/ 是非/ 良构/ ,/ 则/ / to/ ∈/ SN/ ,/ / ti/ :/ O/ (/ to/ )/ ◆/ I/ (/ ti/ )/ 或者/ / ti/ ∈/ SN/ ,/ / to/ :/ I/ (/ ti/ )/ ◆/ O/ (/ to/ )/ ./ 令/ σ/ =/ Π/ Γ/ →/ Σ/ (/ L/ (/ CFN/ )/ )/ ,/ 则/ / x/ ∈/ &/ (/ σ/ )/ ,/ 对/ / y/ ∈/ &/ (/ σ/ )/ ,/ 不/ 存在/ O/ (/ x/ )/ ◇/ I/ (/ y/ )/ ,/ 所以/ x/ 无法/ 被/ 逻辑/ 熔合/ ,/ 即/ Λ/ (/ Π/ Γ/ →/ ∑/ (/ L/ (/ CFN/ )/ )/ )/ 至少/ 包含/ 字符/ x/ ,/ 这/ 与/ Λ/ (/ Π/ Γ/ →/ ∑/ (/ L/ (/ CFN/ )/ )/ )/ =/ ε/ 矛盾/ ,/ 因此/ 假设/ 不/ 成立/ ,/ CFN/ 是/ 良构/ 的/ ./ 引理/ 1/ ./ 顺序/ 型/ 控制/ 流网/ 无/ 阻塞/ ./ 证明/ ./ 假设/ F/ 是/ 由/ 一组/ 服务/ 变迁/ {/ t1/ ,/ t2/ ,/ …/ ,/ tn/ }/ 组成/ 的/ 顺序/ 型/ 控制/ 流网/ ,/ 且/ F/ ./ i/ =/ π/ 1/ (/ t1/ )/ ,/ / ti/ :/ π/ 2/ (/ ti/ )/ =/ π/ 1/ (/ ti/ +/ 1/ )/ ,/ 1/ / i/ / n/ -/ 1/ ./ 令/ M0/ (/ F/ ./ i/ )/ =/ 1/ ,/ / M/ ∈/ R/ (/ M0/ )/ ,/ 若/ M/ (/ tj/ )/ =/ 1/ ,/ 1/ / j/ / n/ ,/ 则/ / σ/ =/ tj/ +/ 1tj/ +/ 2/ …/ tn/ ,/ 使得/ M/ [/ σ/ 〉/ Gf/ ./ 因此/ F/ 是/ 无/ 阻塞/ 的/ ./ 引理/ 2/ ./ 良构/ 原子/ 选择/ 型/ 控制/ 流网/ 无/ 阻塞/ ./ 证明/ ./ F/ 是/ 由/ 一组/ 服务/ 变迁/ {/ t1/ ,/ t2/ ,/ …/ ,/ tn/ }/ 与/ 逻辑/ 变迁/ to/ 及/ ti/ 组成/ 的/ 良构/ 原子/ 选择/ 型/ 控制/ 流网/ ,/ 即/ / tj/ :/ π/ 1/ (/ tj/ ./ i/ )/ =/ {/ to/ }/ ,/ / tj/ :/ π/ 2/ (/ tj/ ./ o/ )/ =/ {/ ti/ }/ ,/ 且/ O/ (/ to/ )/ =/ t1/ ./ i/ ∧/ / t2/ ./ i/ / ∧/ …/ ∧/ / tn/ ./ i/ ∨/ / t1/ ./ i/ ∧/ t2/ ./ i/ / ∧/ …/ ∧/ / tn/ ./ i/ ∨/ …/ ∨/ / t1/ ./ i/ ∧/ / t2/ ./ i/ / ∧/ …/ ∧/ tn/ ./ i/ ,/ I/ (/ ti/ )/ =/ t1/ ./ o/ ∨/ t2/ ./ o/ ∨/ …/ ∨/ tn/ ./ o/ ./ 令/ M0/ (/ F/ ./ i/ )/ =/ 1/ ,/ M0/ [/ to/ 〉/ M/ ,/ 若/ to/ 触发/ 后/ 执行/ tp/ ,/ 则/ M/ [/ tp/ 〉/ M/ ,/ M/ (/ tp/ ./ o/ )/ =/ 1/ ,/ 而/ π/ 2/ (/ tp/ ./ o/ )/ =/ {/ ti/ }/ 且/ I/ (/ ti/ )/ =/ t1/ ./ o/ ∨/ t2/ ./ o/ ∨/ …/ ∨/ tn/ ./ o/ ,/ 由/ LPN/ 触发/ 规则/ 可知/ M/ [/ ti/ 〉/ Gf/ ,/ 这里/ 1/ / p/ / n/ ./ 由/ p/ 取值/ 的/ 任意性/ 可知/ ,/ F/ 是/ 无/ 阻塞/ 的/ ./ Page8/ 引理/ 3/ ./ 良构/ 原子/ 并行/ 型/ 控制/ 流网/ 无/ 阻塞/ ./ 证明/ ./ 方法/ 类似/ 引理/ 2/ ,/ 不再/ 叙述/ ./ 证毕/ ./ 引理/ 4/ ./ 原子/ 循环型/ 控制/ 流网/ 无/ 阻塞/ ./ 证明/ ./ F/ 是/ 由/ 服务/ 变迁/ t1/ 逻辑/ 变迁/ ti/ 组成/ 的/ 原子/ 循环型/ 控制/ 流网/ ,/ 且/ F/ ./ i/ =/ π/ 1/ (/ t1/ )/ ∧/ F/ ./ o/ =/ π/ 2/ (/ t1/ )/ ./ F/ 中/ 只/ 存在/ 两种/ 标识/ :/ M0/ (/ F/ ./ i/ )/ =/ 1/ 与/ Gf/ =/ M/ (/ F/ ./ o/ )/ =/ 1/ ,/ 且/ M/ (/ F/ ./ o/ )/ =/ 1/ ∧/ test/ (/ F/ ./ o/ )/ =/ 1/ 时/ ,/ Gf/ [/ ti/ 〉/ M0/ ,/ 而/ M0/ [/ t1/ 〉/ Gf/ ,/ 因此/ F/ 是/ 无/ 阻塞/ 的/ ./ 证毕/ ./ 定理/ 2/ ./ 良构/ 控制/ 流网/ 无/ 阻塞/ ./ 证明/ ./ 若/ F/ 是/ 良构/ 原子/ 选择/ 型/ 控制/ 流网/ ,/ 由/ 引理/ 2/ 知/ F/ 是/ 无/ 阻塞/ 的/ ,/ 即/ 若/ M/ (/ F/ ./ o/ )/ =/ 1/ ,/ 则/ 存在/ σ/ ∈/ F/ ./ T/ / ,/ 使得/ M/ [/ σ/ >/ Gf/ ,/ 因此/ F/ 等价/ 于/ 一个/ 服务/ 变迁/ t/ ./ 同理/ ,/ 原子/ 并行/ 型/ 与/ 原子/ 循环型/ 控制/ 流网/ 也/ 等价/ 于/ 一个/ 服务/ 变迁/ ./ 将/ 良构/ 控制/ 流网/ 中/ 的/ 上述/ 3/ 种/ 结构/ 利用/ 服务/ 变迁/ 进行/ 等价/ 替换/ ,/ 最终/ 可/ 获得/ 一个/ 顺序/ 结构/ 的/ 控制/ 流网/ ,/ 由/ 引理/ 1/ 可知/ ,/ 该/ 控制/ 流网/ 是/ 无/ 阻塞/ 的/ ,/ 定理/ 得证/ ./ 定义/ 21/ ./ 若/ 服务网/ 中/ 的/ 变迁/ t/ 连接/ 了/ 发送数据/ 的/ 库/ 所/ p/ ,/ 则/ t/ 称为/ 库所/ p/ 的/ 发送/ 变迁/ ,/ 记作/ s/ (/ p/ )/ ;/ 若/ 服务网/ 中/ 的/ 变迁/ t/ 连接/ 了/ 接受/ 数据/ 的/ 库/ 所/ p/ ,/ 则/ t/ 称为/ 库所/ p/ 的/ 接受/ 变迁/ ,/ 记作/ r/ (/ p/ )/ ;/ 定义/ 22/ ./ SN/ 是/ 一个/ 服务网/ ,/ C/ 称为/ 从/ 节点/ n1/ 到/ 节点/ nk/ 的/ 一条/ 路径/ 当且/ 仅/ 当/ 在/ SN/ 中/ 存在/ 节点/ 序列/ 〈/ n1/ ,/ n2/ ,/ …/ ,/ nk/ 〉/ ,/ 使得/ (/ ni/ ,/ ni/ +/ 1/ )/ ∈/ F/ ,/ 1/ / i/ / k/ ./ 用/ &/ (/ C/ )/ 表示/ 路径/ C/ 的/ 字母表/ ,/ 即/ &/ (/ C/ )/ =/ {/ n1/ ,/ n2/ ,/ …/ ,/ nk/ }/ ./ 引入/ 符号/ / 表示/ 两个/ 字符/ 存在/ 后继/ 关系/ ,/ 在/ C/ 中/ ,/ nj/ 称为/ ni/ 的/ 后继/ ,/ 记作/ ni/ / Cnj/ ,/ 当且/ 仅/ 当/ 存在/ ni/ ,/ ni/ +/ 1/ ,/ …/ ,/ nj/ ∈/ &/ (/ C/ )/ ,/ 且/ (/ ni/ ,/ ni/ +/ 1/ )/ ,/ (/ ni/ +/ 1/ ,/ ni/ +/ 2/ )/ ,/ …/ ,/ (/ nj/ -/ 1/ ,/ nj/ )/ ∈/ F/ ./ 从/ 上述/ 定义/ 和/ CFN/ -/ L/ 的/ 构造/ 规则/ 可知/ ,/ 一个/ 服务网/ 的/ CFN/ -/ L/ 展开/ 得到/ 的/ 语言/ 表达式/ 集合/ 对应/ 于/ 该/ 服务网/ 从/ 起始/ 库所/ i/ 到/ 终止/ 库所/ o/ 的/ 所有/ 路径/ ./ 定理/ 3/ ./ 假设/ 一个/ 服务/ 内网/ 中/ 存在/ n/ 条/ 从/ 起始/ 库所/ i/ 到/ 终止/ 库所/ o/ 的/ 路径/ ,/ 任取/ 其中/ 的/ m/ 条/ 路径/ ,/ 编号/ 为/ C1/ ,/ C2/ ,/ …/ ,/ Cm/ ,/ 若/ 两条/ 路径/ Ci/ 与/ Ci/ +/ 1/ 之间/ 存在/ 内部/ 库所/ p/ ,/ 使得/ s/ (/ p/ )/ ∈/ Ci/ ∧/ r/ (/ p/ )/ ∈/ Ci/ +/ 1/ ,/ 将/ 这些/ 库所/ 命名/ 为/ 集合/ PiI/ 中任取/ 一个/ 库所/ ,/ 分别/ 记为/ p1p2/ …/ pm/ ,/ 若/ 存在/ jPm/ (/ 1/ / j/ / m/ )/ 使得/ Cj/ :/ s/ (/ pj/ )/ / Cjr/ (/ p/ (/ m/ +/ j/ -/ 1/ )/ %/ (/ m/ +/ 1/ )/ )/ ,/ 则/ C1/ ,/ C2/ ,/ …/ ,/ Cm/ 中无环/ ./ 证明/ ./ C1/ ,/ C2/ ,/ …/ ,/ Cm/ 中/ 每条/ 路径/ 中无环/ ,/ 若/ 存在/ 环路/ ,/ 则/ 必定/ 是/ 由/ C1/ ,/ C2/ ,/ …/ ,/ Cm/ 路径/ 的/ 一部分/ 与/ p1p2/ …/ pm/ 及其/ 连接/ 弧/ 构成/ ,/ 因此/ 路径/ Ci/ ,/ pi/ ,/ r/ (/ pi/ )/ ,/ s/ (/ pi/ +/ 1/ )/ 以及/ pi/ +/ 1/ 之间/ 的/ 流/ 关系/ 必须/ 同向/ ./ 由于/ pi/ / r/ (/ pi/ )/ 且/ s/ (/ pi/ +/ 1/ )/ / pi/ +/ 1/ ,/ 只有/ r/ (/ pi/ )/ / Cis/ (/ pi/ +/ 1/ )/ ,/ 路径/ Ci/ ,/ pi/ ,/ r/ (/ pi/ )/ ,/ s/ (/ pi/ +/ 1/ )/ 以及/ pi/ +/ 1/ 之间/ 才/ 存在/ 同向流/ ,/ 即/ / Ci/ :/ r/ (/ pi/ )/ / Cis/ (/ pi/ +/ 1/ )/ 才/ 存在/ 环/ ./ C1/ ,/ C2/ ,/ …/ ,/ Cm/ 中若/ 有/ 一条/ 路径/ 不/ 满足/ 上述/ 规则/ 便/ 不/ 存在/ 环/ ,/ 即/ 存在/ j/ (/ 1/ / j/ / m/ )/ 使得/ Cj/ :/ s/ (/ pj/ )/ / Cjr/ (/ p/ (/ m/ +/ j/ -/ 1/ )/ %/ (/ m/ +/ 1/ )/ )/ ,/ 定理/ 得证/ ./ 定理/ 4/ ./ 服务/ 内网/ SIN/ 是/ 良构/ 并且/ 无环/ ,/ 则/ 〈/ SIN/ ,/ Gf/ 〉/ 是/ 无/ 阻塞/ 的/ ./ 证明/ ./ 构建/ SIN/ 的/ 控制/ 流网/ CFN/ ,/ 因为/ SIN/ 良构/ ,/ 所以/ CFN/ 良构/ ,/ 因此/ CFN/ 是/ 无/ 阻塞/ 的/ ./ 由于/ SIN/ =/ CFN/ ∪/ PD/ ×/ T/ ∪/ T/ ×/ PD/ ,/ 即/ 在/ CFN/ 加入/ 了/ 内部/ 数据库/ 所/ 及其/ 流程/ 关系/ ./ 对/ 一个/ 处于/ 使能/ 状态/ 下/ 的/ 变迁/ ,/ 增加/ 一个/ 带有/ 托肯/ 的/ 库/ 所/ 将/ 不会/ 影响/ 其使/ 能/ 及/ 触发/ ,/ 因此/ ,/ 若/ SIN/ 内部/ 数据库/ 均/ 能/ 得到/ 托肯/ ,/ 则/ SIN/ 中/ 所有/ 变迁/ 的/ 触发/ 性/ 等同/ CFN/ ,/ 即/ 无/ 阻塞/ 的/ ./ 根据/ 资源/ 请求/ 死锁/ 判定/ 条件/ ,/ 如果/ 不/ 存在/ 环路/ 等待/ ,/ 则/ 不会/ 出/ 死锁/ ,/ 因此/ 如果/ SIN/ 中无环/ 结构/ ,/ 则/ 所有/ 数据库/ 所均/ 能/ 获取/ 托肯/ ,/ 此时/ 〈/ SIN/ ,/ Gf/ 〉/ 是/ 无/ 阻塞/ 的/ ./ 定义/ 23/ ./ CFN1/ 和/ CFN2/ 为/ 两个/ 控制/ 流网/ ,/ 令/ L/ (/ CFN1/ )/ =/ x11x12x1i/ …/ x1n/ ,/ L/ (/ CFN2/ )/ =/ x21x22/ …/ x2i/ …/ x2n/ ,/ 当且/ 仅/ 当/ 存在/ 映射/ θ/ 使得/ 如下/ 条件/ 成立/ 时/ ,/ L/ (/ CFN1/ )/ 和/ L/ (/ CFN2/ )/ 称为/ 等价/ 控制/ 流网/ 语言/ ,/ 记为/ L/ (/ CFN1/ )/ / L/ (/ CFN2/ )/ :/ (/ 1/ )/ / t/ ∈/ T1/ / θ/ (/ t/ )/ ∈/ T2/ ;/ (/ 2/ )/ φ/ 1/ (/ t/ )/ / φ/ 2/ (/ θ/ (/ t/ )/ )/ ;/ (/ 3/ )/ x1i/ =/ φ/ 1/ (/ t/ )/ / x2i/ =/ φ/ 2/ (/ θ/ (/ t/ )/ )/ ;/ (/ 4/ )/ x1i/ =/ ‖/ / x2i/ =/ ‖/ orx1i/ =/ / / x2i/ =/ / ./ 定理/ 5/ ./ CFN1/ 和/ CFN2/ 为/ 两个/ 控制/ 流网/ ,/ 若/ L/ (/ CFN1/ )/ / L/ (/ CFN2/ )/ ,/ 则/ CFN1/ ~/ CFN2/ ./ 证明/ ./ 令/ L/ (/ CFN1/ )/ =/ x11x12/ …/ x1i/ …/ x1n/ ,/ L/ (/ CFN2/ )/ =/ x21x22/ …/ x2i/ …/ x2n/ ./ 因为/ L/ (/ CFN1/ )/ / L/ (/ CFN2/ )/ ,/ / σ/ 1/ =/ x1jx1j/ +/ 1/ …/ xm/ ,/ σ/ 2/ =/ x2jx2j/ +/ 1/ …/ xm/ 满足/ σ/ 1/ / σ/ 2/ ./ 若/ σ/ 1/ 与/ σ/ 2/ 为/ 顺序/ 结构/ 或者/ 循环/ 结构/ ,/ 不/ 涉及/ 逻辑/ 表达式/ ,/ 由于/ σ/ 1/ / σ/ 2/ 可得/ :/ (/ 1/ )/ / t/ ∈/ T1/ / θ/ (/ t/ )/ ∈/ T2/ ;/ (/ 2/ )/ φ/ 1/ (/ t/ )/ / φ/ 2/ (/ θ/ (/ t/ )/ )/ ;/ (/ 3/ )/ x1i/ =/ φ/ 1/ (/ t/ )/ / x2i/ =/ φ/ 2/ (/ θ/ (/ t/ )/ )/ ;/ 令/ τ/ =/ θ/ ,/ 由/ 定义/ 可知/ Nsp/ (/ σ/ 1/ )/ ~/ Nsp/ (/ σ/ 2/ )/ ./ 若/ σ/ 1/ 与/ σ/ 2/ 为/ 原子/ 选择/ 结构/ ,/ 令/ σ/ 11/ σ/ 12/ …/ σ/ 1p/ 与/ σ/ 21/ σ/ 22/ …/ σ/ 2p/ 为/ 二者/ 的/ 组成/ 分支/ ,/ 由于/ σ/ 1k/ / σ/ 2k/ 且/ 是/ 顺序/ 结构/ 或者/ 循环/ 结构/ 的/ ,/ 因此/ Nsp/ (/ σ/ 1k/ )/ ~/ Nsp/ (/ σ/ 2k/ )/ 且/ τ/ =/ θ/ ./ 由/ 定义/ 23/ 可知/ ,/ σ/ 1/ 与/ σ/ 2/ 中/ 的/ 字符/ ‖/ 和/ / 对应/ 出现/ ,/ 而/ ‖/ 与/ / 对应/ 于/ 流程/ 中/ 的/ 逻辑/ 表达式/ 中/ 的/ ∨/ 与/ ∧/ ,/ 即/ 逻辑/ 表达式/ 连接/ 了/ 等价/ 流程/ ,/ 因此/ 满足/ / t/ ∈/ TI1/ ,/ τ/ (/ t/ )/ ∈/ TI2/ :/ I/ (/ τ/ (/ t/ )/ )/ =/ Ψ/ (/ I/ (/ t/ )/ ,/ Ω/ I/ (/ t/ )/ ,/ τ/ )/ 和/ / t/ ∈/ Page9TO1/ ,/ τ/ (/ t/ )/ ∈/ TO2/ :/ O/ (/ τ/ (/ t/ )/ )/ =/ Ψ/ (/ O/ (/ t/ )/ ,/ Ω/ O/ (/ t/ )/ ,/ τ/ )/ ,/ 由/ 定义/ 17/ 可知/ Nsp/ (/ σ/ 1/ )/ ~/ Nsp/ (/ σ/ 2/ )/ ./ 同理/ 证明/ 原子/ 并发/ 结构/ 也/ 满足/ Nsp/ (/ σ/ 1/ )/ ~/ Nsp/ (/ σ/ 2/ )/ ./ 根据/ 服务网/ 的/ 建模/ 规则/ 和/ 控制/ 流网/ 语言/ 的/ 求解/ 方法/ 可知/ ,/ 对/ 任意/ 结构/ 的/ σ/ 1/ 与/ σ/ 2/ ,/ 若/ σ/ 1/ / σ/ 2/ ,/ 则/ Nsp/ (/ σ/ 1/ )/ ~/ Nsp/ (/ σ/ 2/ )/ ,/ 因此/ 定理/ 得证/ ./ 证毕/ ./ 定义/ 24/ ./ σ/ 为/ 字符串/ ,/ / x/ ,/ y/ ∈/ &/ (/ σ/ )/ ,/ σ/ / σ/ ,/ 若/ σ/ =/ x/ / σ/ -/ / y/ ,/ 称/ σ/ -/ 为/ 字符串/ σ/ 基于/ 字符/ x/ 与/ y/ 的/ 切片/ ,/ 记/ 为/ ρ/ (/ σ/ ,/ x/ ,/ y/ )/ ./ 定义/ 25/ ./ σ/ 所有/ 基于/ 字符/ x/ 与/ y/ 的/ 切片/ 组成/ 一个/ 字符串/ 集合/ ,/ 称为/ 切集/ ,/ 记/ 为/ σ/ // (/ x/ ,/ y/ )/ ./ 定义/ 26/ ./ σ/ 为/ 字符串/ ,/ 字符/ 集合/ C/ / &/ (/ σ/ )/ ,/ σ/ 被/ C/ 中/ 包含/ 的/ 字符/ 分割/ 为/ 若干/ 字符串/ ,/ 由/ 这些/ 字符串/ 组成/ 的/ 集合/ 称为/ σ/ 关于/ C/ 的/ 割集/ ,/ 记/ 为/ / (/ σ/ ,/ C/ )/ ./ 例如/ ,/ σ/ =/ “/ abpcdapmbqcdpabcq/ ”/ ,/ 则/ σ/ // (/ p/ ,/ q/ )/ =/ {/ cdapmbqcdpabc/ ,/ cdapmb/ ,/ mbqcdpabc/ ,/ mb/ ,/ abc/ }/ ./ 令/ C/ =/ {/ p/ ,/ q/ }/ ,/ 则/ / (/ σ/ ,/ C/ )/ =/ {/ ab/ ,/ cda/ ,/ mb/ ,/ cd/ ,/ abc/ }/ ./ 为了/ 判定/ CFN/ -/ L/ 中/ 是否/ 存在/ 等价/ 流程/ ,/ 首先/ 利用/ CFN/ -/ L/ 中/ 的/ 匹配/ 逻辑/ 变迁/ 对/ 进行/ 切片/ ,/ 获取/ 其中/ 的/ 并发/ 或/ 选择/ 子/ 流程/ 结构/ 对应/ CFN/ -/ L/ ,/ 然后/ 再/ 利用/ 字符集/ C/ =/ {/ ‖/ ,/ / }/ 去/ 求解/ 切片/ 的/ 割集/ ,/ 获取/ 流程/ 结构/ 中/ 的/ 具体/ 子/ 流程/ 的/ CFN/ -/ L/ ,/ 从而/ 可以/ 根据/ 定理/ 5/ 进行/ 是否/ 存在/ 等价/ 流程/ 的/ 判定/ ./ 将/ 控制/ 流网/ CFN/ =/ (/ LPN/ ,/ M/ ,/ i/ ,/ o/ ,/ φ/ ,/ Γ/ )/ 的/ 匹配/ 逻辑/ 变迁/ 对/ 组成/ 集合/ 定义/ 为/ Tmatch/ =/ {/ (/ t1/ ,/ t2/ )/ |/ t1/ ∈/ TO/ ,/ t2/ ∈/ TI/ ,/ O/ (/ t1/ )/ ◇/ I/ (/ t2/ )/ }/ ./ 根据/ CFN/ -/ L/ 的/ 生成/ 规则/ ,/ 在/ 进行/ 切片/ 割集/ 求解/ 时/ 只能/ 对/ 不/ 包含/ 在/ 括号/ 内/ 的/ 字符/ ‖/ 和/ / 进行/ 割/ 运算/ ,/ 为/ 区别/ 定义/ 26/ ,/ 以/ 符号/ / (/ σ/ ,/ C/ )/ 进行/ 表示/ ./ (/ t21t22O2/ 变迁/ 对/ 集合/ 为/ Tmatch/ =/ {/ (/ O1/ ∨/ )/ }/ ,/ 以/ (/ O1I2/ ∧/ )/ =/ (/ t11O1I1/ (/ t24t25t26/ )/ I2/ {/ t11O1/ ∨/ t12/ / (/ t13t14t15/ )/ I1/ 定理/ 6/ ./ CFN/ 为/ 一个/ 控制/ 流网/ ,/ Tmatch/ 为/ 其/ 匹配/ 逻辑/ 变迁/ 对/ 集合/ ,/ 存在/ (/ x/ ,/ y/ )/ ∈/ Tmatch/ 使得/ σ/ 1/ ,/ σ/ 2/ ∈/ / (/ L/ (/ CPN/ )/ // (/ x/ ,/ y/ )/ ,/ C/ )/ 且/ σ/ 1/ / σ/ 2/ ,/ 则/ CFN/ 存在/ 等价/ 流程/ ./ 证明/ ./ 存在/ (/ x/ ,/ y/ )/ ∈/ Tmatch/ 使得/ σ/ 1/ ,/ σ/ 2/ ∈/ / (/ L/ (/ CPN/ )/ // (/ x/ ,/ y/ )/ ,/ C/ )/ ,/ σ/ 1/ 和/ σ/ 2/ 为/ 由/ 逻辑/ 变迁/ x/ 和/ y/ 连接/ 的/ 两/ 段子/ 流程/ 结构/ 的/ CFN/ -/ L/ ,/ 将/ 这/ 两/ 段子/ 控制/ 流网/ 命名/ 为/ CFN1/ 和/ CFN2/ ,/ 由/ σ/ 1/ / σ/ 2/ 及/ 定理/ 4/ 可知/ CFN1/ ~/ CFN2/ ./ 又/ CFN1/ / CFN/ ,/ CFN2/ / CFN/ ,/ 例如/ ,/ L/ (/ CFN1/ )/ =/ O1/ 所以/ CFN/ 存在/ 等价/ 流程/ ./ 4.2/ ./ 3/ 结构/ 范式/ 判定/ 算法/ 在/ 进行/ 服务/ 流程/ 结构/ 范式/ 判定/ 时/ ,/ 首先/ 需要/ 将/ 其/ 转化/ 为/ 服务网/ ,/ 然后/ 求解/ 该/ 服务网/ 对应/ 的/ CFN/ -/ L/ ,/ 通过/ CFN/ -/ L/ 中/ 字符串/ 序列/ 的/ 性质/ 研究/ 服务网/ 的/ 良构/ 、/ 分支/ 连通性/ 、/ 是否/ 存在/ 重复/ 以及/ 等价/ 子/ 控制/ 流网/ ,/ 进而/ 判定/ 服务/ 流程/ 的/ 结构/ 范式/ ,/ 具体/ 参见/ 算法/ 1/ ./ 算法/ 1/ ./ Web/ 服务/ 流程/ 结构/ 范式/ 判定/ 算法/ ./ 输入/ :/ Web/ 服务/ 流程/ 输出/ :/ 结构/ 范式/ 级别/ SFStru/ _/ NF/ (/ SP/ )/ 1/ ./ {/ constructtheservicenetSNandthecontrolflow2/ ./ unfoldL/ (/ CFN/ )/ andbuildthesetCpathwithallthe3/ ./ n/ =/ Num/ (/ Cpath/ )/ ;/ 4/ ./ FORi/ =/ 2TOn5/ ./ {/ Loop/ _/ check/ (/ i/ )/ )/ ;/ 6/ ./ IFthereexistaloopTHENelimatethechec/ -/ 7/ ./ IF/ (/ Num/ (/ Cpath/ )/ =/ 0/ )/ THENSF/ =/ 0/ ;/ 8/ ./ IF/ (/ 0/ </ Num/ (/ Cpath/ )/ </ n/ )/ THENSF/ =/ 1/ ;/ 9/ ./ IF/ (/ Λ/ (/ Π/ Γ/ →/ ∑/ (/ L/ (/ CFN/ )/ )/ )/ =/ ε/ ∧/ SF/ =/ 1/ )/ THEN10/ ./ FOR/ / (/ x/ ,/ y/ )/ ∈/ Tmatch11/ ./ IF/ (/ σ/ 1/ ,/ σ/ 2/ ∈/ / (/ P/ (/ CFN/ )/ // (/ x/ ,/ y/ )/ ,/ C/ )/ ∧/ σ/ 1/ / σ/ 2/ )/ 12/ ./ IF/ (/ !/ Equ/ _/ process/ ∧/ SF/ =/ 2/ )/ THENSF/ =/ 3/ ;/ 13/ ./ IF/ (/ SF/ =/ 3/ ∧/ !/ Repeatsubstring/ _/ check/ (/ P/ (/ CFN/ )/ ,/ u/ )/ )/ 14/ ./ Return/ (/ SF/ )/ ;/ }/ 算法/ 首先/ 构建/ 服务/ 流程/ SP/ 的/ 服务网/ SN/ 以及/ 控制/ 流网/ CFN/ ,/ 求解/ L/ (/ CFN/ )/ 并/ 将/ 其/ 展开/ ,/ 获取/ CFN/ 所有/ 可能/ 存在/ 的/ 从/ 起始/ 库所/ i/ 到/ 终止/ 库所/ o/ 的/ 连通/ 路径/ 集/ Cpath/ ;/ 若/ Cpath/ 中/ 存在/ n/ 条/ 路径/ ,/ 即/ Num/ (/ Cpath/ )/ =/ n/ ,/ 依次/ 分别/ 取/ 2/ ,/ 3/ ,/ …/ ,/ n/ 条/ 路径/ ,/ 根据/ 定理/ 3/ 判定/ 所/ 取/ 路径/ 中/ 是否/ 存在/ 环/ ,/ 若/ 某些/ 路径/ 中/ 存在/ 环/ ,/ 则/ 将/ 所取/ 路径/ 从/ Cpath/ 中/ 删除/ ./ (/ 1/ )/ 若/ Num/ (/ Cpath/ )/ =/ 0/ ,/ 则/ SF/ 为/ 0/ ;/ (/ 2/ )/ 若/ 0/ </ Num/ (/ Cpath/ )/ </ n/ ,/ 则/ SF/ 为/ 1/ ;/ (/ 3/ )/ 若/ Num/ (/ Cpath/ )/ =/ n/ ,/ 判定/ CFN/ 是否/ 良构/ ,/ 若为/ 良构/ 则/ SF/ 为/ 2/ ;/ (/ 4/ )/ 在/ SF/ 为/ 2/ 的/ 基础/ 上/ ,/ 判定/ CFN/ 中/ 是否/ 存在/ 等价/ 服务/ 流程/ ,/ 若/ 不/ 存在/ 则/ SF/ 为/ 3/ ;/ (/ 5/ )/ 在/ SF/ 为/ 3/ 的/ 基础/ 上/ ,/ 判定/ CFN/ 是否/ 存在/ 重复子/ 服务/ 流程/ ,/ 若/ 不/ 存在/ 则/ SF/ 为/ 4/ ;/ 利用/ 函数/ Repeatsubstring/ _/ check/ (/ L/ (/ CFN/ )/ ,/ u/ )/ )/ 表示/ 对/ 是否/ Page10/ 存在/ 重复/ 字符串/ 进行/ 判定/ ,/ 函数/ 检测/ 给定/ 字符串/ L/ (/ CFN/ )/ ,/ 若/ 其中/ 存在/ 长度/ 大于/ u/ 的/ 重复/ 子串/ 时/ ,/ 返回/ True/ ,/ 否则/ 返回/ Flase/ ,/ 该/ 函数/ 可以/ 利用/ 编程语言/ 中/ 提供/ 的/ 字符串/ 处理函数/ 实现/ ./ 算法/ 1/ 在/ 进行/ 结构/ 范式/ 判定/ 时/ ,/ 对/ 不/ 存在/ 可/ 达/ 路径/ 的/ 服务/ 流程/ ,/ 将/ 其/ 结构/ 范式/ 级别/ 定义/ 为/ 0/ ,/ 特此说明/ ./ 5/ 应用/ 实例/ 5.1/ 满足/ 4NF/ 的/ 服务网/ 算例/ 本节/ 在/ 图/ 2/ 给出/ 的/ 电子商务/ 交易系统/ 服务网/ 模型/ 的/ 基础/ 上/ ,/ 对/ 卖方/ 服务/ 流程/ 的/ 功能/ 进行/ 扩充/ ./ 在/ 买方/ 进行/ 商品/ 查询/ 时/ ,/ 如果/ 查询/ 不/ 成功/ ,/ 除了/ 发送至/ 买方/ 一个/ 查询/ 失败/ 处理/ 外/ ,/ 增加/ 一个/ 可/ 用于/ 卖方/ 采购/ 的/ 子/ 服务/ 流程/ ,/ 该/ 服务/ 流程/ 由/ 服务/ s/ _/ order/ 、/ s/ _/ defray/ 以及/ s/ _/ receive/ 以/ 顺序/ 结构/ 组成/ ,/ 在/ 服务网/ 中/ 分别/ 表示/ 为/ t31/ 、/ t32/ 以及/ t33/ ./ 该/ 服务/ 流程/ 与/ 查询/ 失败/ 处理/ 服务/ 构造/ 并行/ 流程/ ,/ 如图/ 6/ 所示/ ./ 用/ SN1/ 和/ CFN1/ 表示/ 该/ 服务网/ 及其/ 对应/ 的/ 控制/ 流网/ ,/ 则/ L/ (/ CFN1/ )/ =/ O1/ (/ t13t14t15/ )/ I1/ 良构/ 流程/ 判定/ 规则/ ,/ 该/ 服务网/ 是/ 良构/ 的/ ./ Num/ (/ Cpath/ )/ =/ 5/ ,/ 所有/ 的/ 路径/ 分别/ 为/ path1/ =/ O1/ ∨/ t12I1O1/ 展开/ L/ (/ CFN1/ )/ 可以/ 得到/ 路径/ 集/ Cpath/ ,/ 且/ ∧/ t11O1O1/ ∧/ 以及/ path5/ =/ O1/ ∨/ I1I2/ 根据/ 结构/ 范式/ 判定/ 算法/ ,/ 该/ 服务/ 流程/ 的/ 控制/ 流网/ 的/ 路径/ 之间/ 不/ 存在/ 环路/ ,/ 可/ 达/ 路径/ 条数/ 为/ 5/ ,/ 在/ 服务网/ 内部/ 不/ 存在/ 等价/ 控制/ 流网/ ,/ 同时/ 也/ 不/ 存在/ 重复/ 控制/ 流网/ ,/ 因此/ 该/ 服务网/ 的/ 结构/ 范式/ 为/ 4NF/ ./ 5.2/ 满足/ 3NF/ 的/ 服务网/ 算/ 例现/ 假设/ 在/ 为/ 卖方/ 服务/ 增加/ 采购/ 子/ 服务/ 流程/ 时/ ,/ 并未/ 增加/ 卖方/ 专用/ 采购/ 流程/ 服务/ t31/ 、/ t32/ 以及/ t33/ ,/ 而是/ 使用/ 了/ 买方/ 中/ 的/ 购买/ 服务/ t24/ 、/ t25/ 以及/ t26/ ;/ 上述/ 服务/ 流程/ 对应/ 的/ 服务网/ 变为/ 图/ 7/ 所示/ ./ 用/ SN2/ 和/ CFN2/ 表示/ 该/ 服务网/ 及其/ 对应/ 的/ 控制/ 流网/ ,/ 则/ L/ (/ CFN2/ )/ =/ O1/ (/ t13t14t15/ )/ I1/ 一节/ 中/ L/ (/ CFN1/ )/ 相比/ ,/ L/ (/ CFN2/ )/ 在/ 路径/ 可/ 达/ 数目/ 以及/ 是否/ 具有/ 等价/ 控制流/ 网上/ 完全相同/ ./ 但/ L/ (/ CFN2/ )/ 中/ 存在/ 重复/ 字符/ 序列/ t24t25t26/ ,/ 且/ 其/ 长度/ 为/ 3/ ,/ 如果/ 给定/ 用于/ 评价/ 流程/ 结构/ 范式/ 的/ 第/ 4/ 层次/ 中/ 允许/ 重复/ 的/ 子/ 流程/ 长度/ 为/ 2/ ,/ 则/ 该/ 服务网/ 的/ 结构/ 范式/ 级别/ 为/ 3/ ;/ 如果/ 第/ 4/ 层次/ 中/ 允许/ 重复/ 的/ 子/ 流程/ 长度/ 为/ 3/ ,/ 则/ 该/ 服务网/ 的/ 结构/ 范式/ 级别/ 仍为/ 4.5/ ./ 3/ 满足/ 2NF/ 的/ 服务网/ 算例/ 为了/ 构建/ 满足/ 2NF/ 的/ 服务网/ ,/ 将/ 上述/ 服务/ 流程/ 中/ 的/ 卖方/ 服务/ 单独/ 抽取/ 出/ 一部分/ ,/ 只/ 保留/ 流程/ “/ 接受/ 预定/ -/ 收款/ -/ 发货/ ”/ 和/ “/ 查询/ 失效/ 处理/ ”/ 两个/ 流程/ 分支/ ,/ Page11/ 现拟/ 在/ 流程/ “/ 接受/ 预定/ -/ 收款/ -/ 发货/ ”/ 位置/ 处/ 添加/ 一个/ “/ 接受/ 预定/ -/ 发货/ -/ 收款/ ”/ 的/ 子/ 服务/ 流程/ 以便/ 为/ 买方/ 提供/ 更好/ 的/ 服务/ ./ 如图/ 8/ ,/ 若/ 在/ 构建/ 流程/ f1/ 时未/ 将/ 收款/ 和/ 发货/ 顺序/ 调整/ ,/ 则/ 与/ f0/ 相同/ ,/ 命名/ 为/ f2/ ./ 若/ f2/ 与/ f0/ 组成/ 并行/ 流程/ 结构/ ,/ 其/ 对应/ 服务网/ 以及/ 控制/ 流网/ 分别/ 命名/ 为/ SN3/ 以及/ CFN3/ ,/ 则/ L/ (/ CFN3/ )/ =/ t11O1/ ∧/ (/ (/ t13t14t15/ )/ / (/ t13t14t15/ )/ )/ I2O2/ 由于/ L/ (/ CFN3/ )/ 的/ 割/ 集中/ 存在/ 两段/ 相同/ 的/ 路径/ 表达式/ 序列/ t13t14t15/ ,/ 因此/ CFN3/ 存在/ 等价/ 服务/ 流程/ ,/ CFN3/ 的/ 结构/ 范式/ 不/ 满足/ 第/ 3/ 层次/ ,/ 仅仅/ 满足/ 第/ 2/ 层次/ ./ 5.4/ 满足/ 1NF/ 的/ 服务网/ 算例/ 若/ 将/ 图/ 6/ 中/ 的/ 服务/ 流程/ 做/ 如下/ 调整/ :/ 买方/ 要求/ 先/ 收取/ 商品/ 再/ 付款/ ,/ 即将/ 变迁/ t25/ 和/ t26/ 的/ 顺序/ 进行/ 颠倒/ ,/ 调整/ 后/ 的/ 服务网/ 如图/ 9/ 所示/ ,/ 其/ 对应/ 服务网/ 以及/ 控制/ 流网/ 分别/ 命名/ 为/ SN4/ 以及/ CFN4/ ,/ 则/ L/ (/ CFN4/ )/ =/ ∧/ (/ t11O1O1t23/ / (/ t24t26t25/ )/ I2/ 径集/ Cpath/ ,/ 且/ Num/ (/ Cpath/ )/ =/ 5/ ,/ 所有/ 的/ 路径/ 分别/ 为/ path1/ =/ O1/ ∧/ ,/ path3/ =/ O1I1/ ∨/ I1/ ∧/ t21t22O2O1I2/ ∧/ ./ ∨/ I1/ 通过/ 判断/ 可知/ ,/ CFN4/ 是/ 良构/ 的/ ,/ 但/ 路径/ path3/ 和/ path4/ 中/ 内部/ 库所/ p4/ 和/ p5/ 存在/ r/ (/ p4/ )/ / C3s/ (/ p5/ )/ 且/ r/ (/ p5/ )/ / C4s/ (/ p4/ )/ ,/ 因此/ 存在/ 环路/ ,/ path3/ 和/ path4/ 为/ 不可/ 达/ 路径/ ,/ 需要/ 删除/ ,/ 最终/ Num/ (/ Cpath/ )/ =/ 3/ ,/ 因此/ CFN4/ 的/ 结构/ 范式/ 为/ 1.6/ 结束语/ 已有/ 研究/ 中仅/ 以/ 路径/ 的/ 可达性/ 作为/ 对/ 服务/ 流程/ 健壮性/ 进行/ 判定/ 的/ 方法/ 不能/ 科学/ 和/ 全面/ 地/ 评价/ 组合/ 服务/ 流程/ 的/ 结构/ 合理性/ ./ 为此/ ,/ 本文/ 提出/ 一种/ 从/ 路径/ 的/ 可达性/ 和/ 结构/ 冗余/ 性/ 等/ 角度/ 对/ 服务/ 流程/ 的/ 结构/ 健壮性/ 进行/ 了/ 层次/ 划分/ 的/ 准则/ ,/ 并/ 将/ 其/ 定义/ 为/ 服务/ 流程/ 的/ 结构/ 范式/ ,/ 用于/ 对/ 流程/ 的/ 健壮性/ 以及/ 服务/ 组合/ 的/ 合理性/ 进行/ 定量/ 评价/ ./ 文中/ 采用/ 逻辑/ Petri/ 网/ 作为/ 形式化/ 工具/ ,/ 将/ 服务/ 流程/ 建模/ 为/ 服务网/ ./ 为了/ 降低/ 模型/ 分析/ 难度/ ,/ 将/ 服务网/ 中/ 的/ 数据流/ 与/ 控制流/ 分开/ ,/ 构建/ 控制/ 流网/ ./ 基于/ 逻辑/ Petri/ 网在/ 建模/ 过程/ 中/ 表现/ 出/ 的/ 良好/ 结构性/ ,/ 提出/ 一种/ 利用/ 约简/ 的/ 方式/ 求解/ 控制/ 流网/ 语言/ 的/ 方法/ ,/ 进而/ 通过/ 控制/ 流网/ 语言/ 的/ 结构特征/ 判定/ 服务网/ 的/ 结构/ 范式/ 所属/ 层次/ ./ 针对/ 提出/ 的/ 四层/ 结构/ 范式/ ,/ 文中/ 给出/ 了/ 相关/ 实例/ ./ 下/ 一步/ 的/ 研究/ 工作/ 中将/ 进一步/ 细化/ 结构/ 范式/ 的/ 粒度/ ,/ 开发/ 服务/ 流程/ 结构/ 范式/ 自动/ 判定/ 工具/ ./ 致谢/ 感谢/ 审稿/ 专家/ 及/ 责任编辑/ 对/ 本文/ 的/ 改进/ 提出/ 宝贵意见/ !/ Page12/ 

