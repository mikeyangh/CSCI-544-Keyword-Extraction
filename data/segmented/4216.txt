Page1/ 基于/ 模型/ 对比/ 和/ 组合/ 的/ 软件产品/ 线/ 领域/ 需求/ 建模/ 聂坤明/ 1/ )/ 张莉/ 1/ )/ ,/ 2/ )/ 1/ )/ (/ 北京航空航天大学/ 软件工程/ 研究所/ 北京/ 100191/ )/ 2/ )/ (/ 北京航空航天大学/ 软件开发/ 环境/ 国家/ 重点/ 实验室/ 北京/ 100191/ )/ 摘要/ 软件产品/ 线/ 作为/ 系统化/ 的/ 软件/ 复用/ 方式/ ,/ 可以/ 提高/ 软件/ 的/ 开发/ 效率/ 和/ 质量/ ./ 软件产品/ 线/ 变化/ 性/ 建模/ 是/ 软件产品/ 线/ 的/ 关键技术/ ,/ 通过/ 建立/ 变化/ 性/ 模型/ 以/ 记录/ 软件产品/ 线/ 成员/ 产品/ 的/ 共性/ 和/ 变化/ 性/ ./ 目前/ 的/ 软件产品/ 线/ 变化/ 性/ 建模/ 方法/ 大都/ 通过/ 领域专家/ 进行/ 分析/ 建立/ ,/ 这种/ 方法/ 过度/ 依赖于/ 领域专家/ 的/ 分析/ 能力/ ,/ 在/ 系统/ 规模较/ 小/ 的/ 情况/ 下/ ,/ 变化/ 性/ 分析/ 比较/ 容易/ ,/ 但是/ 如果/ 系统/ 规模/ 变/ 大/ ,/ 则/ 系统/ 的/ 规模/ 对于/ 变化/ 性/ 分析/ 的/ 影响/ 会/ 越来越/ 大/ ./ 文中/ 提出/ 一种/ 半自动/ 的/ 软件产品/ 线/ 领域/ 需求/ 建模/ 方法/ ,/ 基于/ 关注点/ 分离/ 的/ 思路/ ,/ 利用/ 特征/ 模型表示/ 软件产品/ 线中/ 系列产品/ 的/ 不同/ 方面/ 的/ 特征/ 信息/ ,/ 通过/ 特征/ 模型/ 的/ 对比/ 和/ 组合/ 实现/ 领域/ 需求/ 模型/ 的/ 构建/ ./ 为/ 有效/ 地/ 实现/ 特征/ 模型/ 对比/ 与/ 组合/ ,/ 文中/ 提出/ 一种/ 基于/ 标记/ 和/ 结构/ 的/ 特征/ 模型/ 对比/ 方法/ ,/ 同时/ ,/ 文中/ 实现/ 了/ 基于/ 约束/ 的/ 特征/ 模型/ 组合/ ./ 基于/ 公开/ 的/ 特征/ 模型/ ,/ 文中/ 对/ 提出/ 的/ 方法/ 进行/ 了/ 验证/ ,/ 实验/ 结果表明/ ,/ 文中/ 提出/ 的/ 领域/ 需求/ 建模/ 方法/ 能够/ 在/ 一定/ 准确率/ 的/ 情况/ 下/ 有效/ 地/ 实现/ 领域/ 需求/ 模型/ 的/ 构建/ ./ 关键词/ 模型/ 对比/ ;/ 模型/ 组合/ ;/ 特征/ 模型/ ;/ 领域/ 需求/ 模型/ ;/ 需求/ 工程/ ;/ 软件产品/ 线/ 1/ 引言/ 软件产品/ 线有/ 不同/ 的/ 实现/ 策略/ ,/ 分别/ 为/ :/ 基于/ 再/ 工程/ 的/ 软件产品/ 线/ 开发方法/ 、/ 瀑布/ 式/ 的/ 软件产品/ 线/ 开发方法/ 和/ 增量/ 式/ 软件产品/ 线/ 开发方法/ ./ 对于/ 基于/ 再/ 工程/ 的/ 开发方法/ ,/ 在/ 建立/ 软件产品/ 线时/ ,/ 如果/ 有/ 遗留/ 系统/ 存在/ ,/ 则/ 基于/ 已有/ 的/ 软件系统/ 分析/ 其/ 共性/ 和/ 变化/ 性来/ 设计/ 软件产品/ 线/ ;/ 如果/ 没有/ 遗留/ 系统/ ,/ 则/ 软件产品/ 线/ 开发方法/ 采用/ 传统/ 的/ 瀑布/ 式/ 软件开发/ 生命周期/ 模型/ ,/ 设计/ 与/ 实现/ 一个/ 新/ 的/ 软件产品/ 线/ ;/ 在/ 已经/ 实现/ 产品线/ 的/ 情况/ 下/ ,/ 如果/ 有/ 新/ 的/ 软件产品/ 需求/ 提出/ ,/ 则/ 逐步/ 扩充/ 当前/ 的/ 软件产品/ 线/ ,/ 这/ 属于/ 增量/ 式/ 开发方法/ ./ 在/ 3/ 种/ 策略/ 的/ 实现/ 过程/ 中/ ,/ 分析/ 已有/ 的/ 软件系统/ 并/ 建立/ 软件产品/ 线/ 的/ 方式/ 是/ 最/ 常见/ 的/ 方式/ [/ 1/ ]/ ./ 因为/ 现实/ 中/ 的/ 软件产品/ 线/ 往往/ 都/ 是/ 在/ 一系列/ 独立/ 的/ 领域/ 应用/ 基础/ 上/ 随着/ 领域/ 的/ 逐渐/ 成熟/ 而/ 出现/ 的/ ,/ 因此/ 再/ 工程/ 对于/ 软件产品/ 线/ 方法/ 的/ 实际/ 应用/ 具有/ 十分/ 重要/ 的/ 意义/ ./ 主要/ 问题/ 是/ 如何/ 在/ 多个/ 领域/ 遗留/ 系统/ 需求/ 的/ 基础/ 上/ 通过/ 共性/ 和/ 变化/ 性/ 分析/ 获取/ 领域/ 特征/ 模型/ ,/ 即/ 领域/ 需求/ 模型/ (/ 3.1/ 节/ )/ [/ 2/ ]/ ./ 本文/ 采用/ 面向/ 特征/ 的/ 领域/ 需求/ 组织/ 方式/ ,/ 将/ 特征/ 作为/ 领域/ 需求/ 空间/ 的/ 一阶/ 实体/ ,/ 利用/ 领域/ 特征/ 模型表示/ 领域/ 需求/ 模型/ ./ 基于/ 再/ 工程技术/ 的/ 软件产品/ 线/ 开发方法/ 需要/ 从/ 遗留/ 系统/ 的/ 文档/ 或者/ 代码/ 中/ ,/ 分析/ 不同/ 产品/ 间/ 的/ 共性/ 和/ 变化/ 性/ ./ 不同/ 的/ 产品/ 往往/ 会/ 有/ 不同/ 的/ 项目/ 负责人/ ,/ 并且/ 文档/ 或/ 代码/ 由/ 不同/ 的/ 管理人员/ 负责/ ./ 当/ 文档/ 或/ 代码/ 规模/ 非常/ 大/ 以及/ 文档/ 或/ 代码/ 结构/ 不同/ 的/ 时候/ ,/ 建模/ 人员/ 从中/ 识别/ 共性/ 和/ 变化/ 性/ 特征/ 将会/ 变得/ 非常/ 困难/ ./ 不同/ 的/ 产品/ 具有/ 的/ 特征/ 和/ 特征/ 数目/ 不同/ ,/ 而且/ 产品线/ 往往/ 包含/ 成千上万/ 个/ 可变/ 部分/ (/ 特征/ )/ 和/ 大量/ 的/ 约束/ ,/ 识别/ 这些/ 可变/ 特征/ 可能/ 会/ 花费/ 数月/ 的/ 时间/ [/ 3/ ]/ ./ 在/ 产品线/ 中/ 的/ 产品/ 系列/ 数目/ 少/ 的/ 时候/ ,/ 产品线/ 建模/ 人员/ 还/ 可以/ 较/ 容易/ 的/ 实现/ 产品线/ 变化/ 性/ 建模/ ,/ 获得/ 变化/ 性/ 模型/ ./ 但是/ 当/ 产品/ 数目/ 变得/ 越来越/ 多时/ ,/ 通过/ 直接/ 对/ 所有/ 不同/ 的/ 产品/ 进行/ 对比/ 分析/ ,/ 集中/ 建立/ 软件产品/ 线/ 的/ 变化/ 性/ 模型/ 就/ 变得/ 非常/ 困难/ ./ 缺少/ 变化/ 性/ 分析/ 与/ 建模/ 方法/ 及/ 相关/ 工具/ 的/ 支持/ ,/ 变化/ 性/ 建模/ 过程/ 过度/ 的/ 依赖于/ 建模/ 人员/ 的/ 经验/ 和/ 理解/ [/ 4/ ]/ ,/ 导致/ 变化/ 性/ 建模/ 的/ 效率/ 较/ 低/ ,/ 而且/ 建立/ 的/ 变化/ 性/ 模型/ 存在/ 的/ 错误/ 较/ 多/ ./ 因此/ ,/ 迫切需要/ 一种/ 辅助/ 产品线/ 建模/ 人员/ 的/ 变化/ 性/ 分析/ 与/ 建模/ 方法/ ,/ 提高/ 变化/ 性/ 建模/ 的/ 效率/ ,/ 并/ 改进/ 变化/ 性/ 模型/ 的/ 质量/ ./ 软件产品/ 线/ 领域/ 需求/ 模型/ 记录/ 了/ 不同/ 软件产品/ 的/ 共性/ 和/ 变化/ 性/ ,/ 是/ 软件产品/ 线/ 变化/ 性/ 模型/ 的/ 重要/ 组成部分/ ./ 领域/ 需求/ 模型/ 是/ 变化/ 性/ 建模/ 的/ 输出/ 制品/ 之一/ ./ 本文/ 将/ 领域/ 需求/ 模型/ 的/ 变化/ 性/ 建模/ 称之为/ 领域/ 需求/ 建模/ ./ 随着/ 软件产品/ 线/ 建模/ 技术/ 的/ 发展/ ,/ 基于/ 多/ 视图/ 的/ 建模/ 和/ 模型/ 组合/ 的/ 建模/ 方法/ 成为/ 一种/ 重要/ 的/ 建模/ 方法/ ./ 首先/ ,/ 不同/ 建模/ 人员/ 可以/ 从/ 不同/ 的/ 角度/ 实现/ 一系列/ 系统/ 的/ 不同/ 方面/ 的/ 建模/ ,/ 然后/ 在/ 不同/ 建模/ 人员/ 的/ 模型/ 的/ 基础/ 上/ 进行/ 模型/ 组合/ 实现/ 软件产品/ 线/ 模型/ 的/ 构建/ ./ 本文/ 提出/ 了/ 一种/ 基于/ 模型/ 组合/ 的/ 领域/ 需求/ 建模/ 方法/ ,/ 该/ 方法/ 利用/ 特征/ 模型/ 实现/ 软件/ 线中/ 的/ 系列产品/ 的/ 不同/ 的/ 关注点/ 的/ 建模/ ,/ 实现/ 了/ 基于/ 属性/ 图/ 的/ 特征/ 模型/ 对比/ 和/ 基于/ 约束/ 的/ 特征/ 模型/ 自动/ 组合/ ./ 本文/ 提出/ 的/ 方法/ 可以/ 在/ 两种/ 场景/ 下/ 应用/ :/ 第/ 1/ 种/ 场景/ 是/ 软件产品/ 具有/ 不同/ 演化/ 版本/ 的/ 产品线/ 领域/ 特征/ 模型/ 构建/ ,/ 由于/ 技术/ 变更/ 、/ 客户/ 需求/ 变化/ 或者/ 代码/ 发生/ 重构/ ,/ 软件产品/ 线中/ 的/ 单个/ 软件产品/ 可能/ 出现/ 演化/ ,/ 并且/ 具有/ 不同/ 的/ 版本/ ,/ 此时/ ,/ 具有/ 演化/ 版本/ 的/ 同一/ 软件产品/ 可以/ 利用/ 特征/ 模型/ 建模/ ,/ 并/ 基于/ 模型/ 组合/ 技术/ 建立/ 不同/ 软件产品/ 的/ 领域/ 特征/ 模型/ ;/ 第/ 2/ 种/ 场景/ 是/ 建立/ 多/ 产品线/ 领域/ 特征/ 模型/ ,/ 该/ 方法/ 可以/ 用于/ 实现/ 多个/ 软件产品/ 线/ 的/ 领域/ 特征/ 模型/ 建模/ ,/ 系统/ 的/ 系统/ (/ SoS/ )/ 等/ 大型/ 系统/ 往往/ 由/ 不同/ 的/ 子系统/ 组成/ ,/ 不同/ 的/ 子系统/ 对应/ 不同/ 的/ 软件产品/ 线/ ,/ 而/ 系统/ 的/ 系统/ 的/ 产品线/ 称为/ 多/ 产品线/ ,/ 基于/ 多/ 产品线/ 的/ 领域/ 特征/ 模型/ 可以/ 更好/ 的/ 实现/ 不同/ 子系统/ 的/ 定制/ ,/ 此时/ ,/ 利用/ 特征/ 模型/ 实现/ 单个/ 软件产品/ 线/ 的/ 建模/ ,/ 然后/ 基于/ 模型/ 组合/ 技术/ 构建/ 多个/ 软件产品/ 线/ 的/ 领域/ 特征/ 模型/ ./ 本文/ 第/ 2/ 节/ 介绍/ 相关/ 工作/ ,/ 对/ 变化/ 性/ 建模/ 和/ 模型/ 的/ 对比/ 与/ 组合/ 工作/ 进行/ 分析/ ;/ 第/ 3/ 节/ 给出/ 基于/ 模型/ 对比/ 与/ 组合/ 的/ 领域/ 需求/ 建模/ 方法/ ;/ 第/ 4/ 节/ 给出/ 实验/ 结果/ ,/ 对于/ 本文/ 提出/ 的/ 方法/ 进行/ 了/ 验证/ ;/ 最后/ 对/ 全文/ 的/ 内容/ 进行/ 总结/ ./ 2/ 研究/ 现状/ 2.1/ 变化/ 性/ 建模/ 变化/ 性/ 分析/ 与/ 建模/ 一直/ 是/ 软件产品/ 线/ 研究/ 的/ 热点/ ,/ 本文/ 主要/ 对于/ 手动/ 、/ 半自动/ 、/ 自动/ 的/ 变化/ 性/ 建模/ 方法/ 的/ 研究/ 现状/ 进行/ 分析/ ./ Zhang/ 等/ 人/ [/ 5/ ]/ 对于/ 软件产品/ 线/ 变化/ 分析/ 的/ 方法/ 进行/ 了/ 调研/ ,/ 包含/ FAST/ 方法/ (/ Family/ -/ OrientedAbstraction/ ,/ Specification/ ,/ andTranslation/ )/ 和/ PuLSE/ -/ Eco/ 方法/ ./ FAST/ 方法/ 利用/ 包/ Page3/ 含/ 文本/ 和/ 表格/ 的/ 领域/ 分析/ 文档/ 捕获/ 共性/ 和/ 变化/ 性/ ,/ 基于/ SCV/ 分析/ (/ Scope/ 、/ Commonalities/ 、/ Variabilities/ )/ 实现/ 共性/ 和/ 变化/ 性/ 的/ 分析/ ;/ PuLSE/ -/ Eco/ 方法/ 利用/ 表格/ 、/ 产品/ 地图/ 来/ 分析/ 与/ 区分/ 每个/ 产品/ 的/ 功能性/ 资产/ 的/ 组合/ 与/ 关联/ ./ FAST/ 、/ PuLSE/ -/ Eco/ 等/ 方法/ 主要/ 是/ 利用/ 表格/ 等/ 对于/ 不同/ 产品/ 的/ 共性/ 和/ 变化/ 性/ 信息/ 进行/ 对比/ ,/ 进而/ 实现/ 变化/ 性/ 建模/ ./ deAlmeida/ 等/ 人/ [/ 6/ ]/ 基于/ 一组/ 不同/ 特征/ 对应/ 的/ 不同/ 场景/ ,/ 提供/ 了/ 一种/ 启发式/ 的/ 软件产品/ 对比/ 技术/ ,/ 首先/ 寻找/ 所有/ 产品/ 的/ 共同/ 场景/ ,/ 并/ 匹配/ 共同/ 场景/ 中/ 的/ 交互/ 步骤/ ,/ 然后/ 进行/ 不同/ 场景/ 的/ 对比/ ./ 该/ 方法/ 同样/ 是/ 一种/ 基于/ 手动/ 的/ 分析/ 建立/ 变化/ 性/ 模型/ 的/ 方法/ ./ Wang/ 等/ 人/ [/ 7/ ]/ 提出/ 一种/ 基于/ 用例/ 分析/ 的/ 特征/ 模型/ 建模/ 方法/ :/ 该/ 方法/ 首先/ 定义/ 一系列/ 基于/ 用例/ 的/ 模型/ 抽取/ 规则/ ,/ 构建/ 单个/ 软件系统/ 的/ 应用程序/ 特征/ 模型/ (/ AFM/ )/ ;/ 然后/ ,/ 在/ AFM/ 构建/ 的/ 基础/ 上/ ,/ 通过/ 一系列/ 操作/ 实现/ 多个/ 软件系统/ 的/ 领域/ 特征/ 模型/ (/ DFM/ )/ 的/ 构建/ ./ Xing/ [/ 8/ ]/ 、/ Xue/ [/ 9/ ]/ 等/ 人/ 提出/ 基于/ 抽取/ 的/ 变化/ 性/ 模型/ 建模/ 方法/ :/ 首先/ ,/ 定义/ 了/ 产品/ 特征/ 模型/ (/ PFM/ )/ ,/ 并/ 将/ 每/ 一个/ 产品/ 表示/ 成/ PFM/ ;/ 然后/ ,/ 利用/ 模型/ 对比/ 算法/ 实现/ 产品线/ 模型/ 的/ 建立/ ./ 该/ 方法/ 建立/ 的/ PFM/ 只是/ 表示/ 了/ 单个/ 产品/ 的/ 特征/ 信息/ ,/ 在/ 识别/ 可变/ 特征/ 后/ ,/ 需要/ 手动/ 建立/ 变化/ 性/ 模型/ ./ 本文/ 提出/ 的/ 方法/ 与/ Wang/ 等/ 人/ 提出/ 的/ 方法/ 的/ 不同之处/ 在于/ ,/ Wang/ 等/ 人/ 基于/ 聚类/ 构造/ AFM/ ,/ 但是/ 模型/ 的/ 构造/ 过程/ 中/ 缺少/ 对于/ 模型/ 元素/ 属性/ 和/ 模型/ 元素/ 依赖/ 关系/ 的/ 考虑/ ,/ 并且/ 没有/ 实现/ 模型/ 的/ 对比/ ./ 本文/ 提出/ 的/ 方法/ 与/ Xing/ 等/ 人/ 提出/ 的/ 方法/ 的/ 不同之处/ 在于/ ,/ 该/ 方法/ 只/ 提出/ 了/ 一种/ 模型/ 对比/ 方法/ ,/ 而/ 没有/ 实现/ 模型/ 组合/ ./ 2.2/ 模型/ 对比/ 与/ 组合/ 模型/ 对比/ 的/ 方法/ 可以/ 分为/ 4/ 类/ ,/ 包含/ 基于/ 特征/ 的/ 模型/ 对比/ 、/ 基于/ 标记/ 的/ 模型/ 对比/ 、/ 基于/ 相似/ 度/ 的/ 模型/ 对比/ 和/ 基于/ 语言/ 的/ 用户/ 定制/ 模型/ 对比/ [/ 10/ ]/ ./ Xue/ 等/ 人/ [/ 11/ ]/ 将/ 模型/ 对比/ 看作/ 是/ 寻找/ 两个/ 类型/ 属性/ 图/ 的/ 最大/ 通用/ 子图/ (/ MaximumCommonSubgraph/ )/ ./ Xing/ 等/ 人/ [/ 12/ ]/ 实现/ 了/ 类图/ 的/ 对比/ ,/ 该/ 方法/ 基于/ 结构/ 相似/ 度/ 实现/ 了/ 对比/ ,/ 但是/ 主要/ 的/ 应用/ 对象/ 为类/ 图/ ./ Mandelin/ 等/ 人/ [/ 13/ ]/ 指出/ 同一个/ 软件/ 的/ 不同/ 版本/ 的/ 软件体系结构/ 模型/ 往往/ 不同/ ,/ 该/ 方法/ 将/ 体系结构/ 模型/ 转换成/ 图/ ,/ 利用/ 贝叶斯/ 模型/ 实现/ 模型/ 的/ 对比/ ./ Koegel/ 等/ 人/ [/ 14/ ]/ 指出/ 基于/ 相似/ 度/ 和/ 基于/ 操作/ 对比/ 是/ 两种/ 重要/ 的/ 模型/ 对比/ 方法/ ,/ 而且/ 两种/ 方法/ 都/ 无法/ 区分/ 概念/ 层次/ 的/ 差异/ ,/ 只能/ 实现/ 语法/ 层次/ 的/ 对比/ ./ 模型/ 组合/ 是/ 一种/ 非常/ 重要/ 的/ 模型/ 分析方法/ [/ 15/ ]/ ,/ 在/ 数据库/ 集成/ 、/ WebServices/ 组合/ 、/ 状态图/ 组合/ 、/ 产品线/ 模型/ 组合/ 、/ UML/ 模型/ 组合/ 、/ 过程/ 模型/ 组合/ 、/ 面向/ 方面/ 建模/ 等/ 领域/ 都/ 有/ 应用/ [/ 16/ ]/ ./ Nejati/ 等/ 人/ [/ 17/ ]/ 针对/ 电信/ 领域/ 的/ 层次/ 状态机/ 模型/ ,/ 实现/ 基于/ Match/ 算子/ 和/ Merge/ 算子/ 的/ 变化/ 性/ 模型/ 对比/ 与/ 组合/ ,/ Match/ 算子/ 基于/ 启发式/ 方法/ 寻找/ 模型/ 中/ 的/ 匹配/ 元素/ ,/ Merge/ 算子/ 实现/ 模型/ 元素/ 的/ 自动/ 组合/ ./ Apel/ 等/ 人/ [/ 18/ ]/ 提出/ 将/ 软件程序/ 的/ 层次结构/ 表示/ 成/ 特征/ 结构/ 树/ ,/ 然后/ 利用/ 模型/ 的/ 叠加/ 技术/ 实现/ 模型/ 的/ 组合/ ,/ 该/ 方法/ 在/ 大规模/ 程序/ 上/ 的/ 应用/ 效果/ 还/ 需要/ 进行/ 深入研究/ ./ Acher/ 等/ 人/ [/ 19/ ]/ 利用/ 插入/ 和/ 组合/ 两种/ 操作/ 算子/ 实现/ 特征/ 模型/ 组合/ ,/ 并/ 定义/ 了/ 每个/ 操作/ 算子/ 的/ 语义/ ./ 模型/ 组合/ 有/ 基于/ 规则/ 的/ 模型/ 组合/ 、/ 基于/ 逻辑/ 表达式/ 的/ 模型/ 组合/ 等/ 不同/ 的/ 方法/ ./ 虽然/ 目前/ 有/ 多种不同/ 的/ 模型/ 对比/ 与/ 组合/ 方法/ ,/ 但是/ 由于/ 应用领域/ 不同/ ,/ 许多/ 方法/ 都/ 无法/ 直接/ 应用/ 于/ 特征/ 模型/ 的/ 对比/ 与/ 组合/ ./ 特征/ 模型/ 组合/ 分为/ 基于/ 规则/ 的/ 组合/ 方法/ [/ 20/ ]/ 和/ 基于/ 逻辑/ 表达式/ 的/ 组合/ 方法/ 等/ 方法/ ./ 基于/ 规则/ 和/ 基于/ 逻辑/ 表达式/ 的/ 组合/ 方法/ 各有/ 优缺点/ [/ 21/ ]/ ,/ 基于/ 逻辑/ 表达式/ 的/ 方法/ 的/ 缺点/ 是/ 不易/ 保持/ 模型/ 的/ 层次结构/ ,/ 而且/ 时间/ 复杂度/ 是/ 指数/ 级/ 的/ ,/ 因此/ 本文/ 采用/ 基于/ 规则/ 的/ 组合/ 方法/ 实现/ 模型/ 的/ 组合/ ./ 参考/ Acher/ 等/ 人/ 的/ 方法/ ,/ 本文/ 定义/ 了/ 插入/ 算子/ 和/ 组合/ 算子/ ,/ 实现/ 特征/ 模型/ 组合/ ,/ 同时/ ,/ 本文/ 提出/ 一种/ 基于/ 约束/ 规则/ 的/ 模型/ 组合/ 方法/ ./ 3/ 基于/ 模型/ 对比/ 与/ 组合/ 的/ 领域/ 需求/ 建模/ 软件产品/ 线中/ 一般/ 包含/ 多个/ 不同/ 的/ 软件产品/ ,/ 并且/ 不同/ 软件产品/ 的/ 软件/ 组件/ 可能/ 涉及/ 不同/ 的/ 专业/ ./ 例如/ ,/ 在/ 舰船/ 指挥/ 控制系统/ 等/ 软件/ 密集型/ 系统/ 中/ ,/ 硬件/ 系统/ 可能/ 跨越/ 不同/ 的/ 专业/ 领域/ ,/ 针对/ 不同/ 的/ 硬件/ 对象/ ,/ 软件系统/ 中/ 具有/ 不同/ 的/ 功能/ 组件/ (/ 界面显示/ 、/ 算法/ 处理/ 等/ )/ 与/ 之/ 相关联/ ./ 不同/ 的/ 硬件/ 对象/ 及/ 相应/ 的/ 功能/ 组件/ 等/ 往往/ 由/ 不同/ 专业/ 的/ 人员/ 开发/ ,/ 该/ 专业/ 相关/ 的/ 工程/ 人员/ 掌握/ 这些/ 硬件/ 和/ 软件/ 组件/ 的/ 信息/ ,/ 比较/ 容易/ 实现/ 相关/ 模型/ 的/ 建模/ ./ 同时/ ,/ 由于/ 软件产品/ 跨越/ 不同/ 的/ 专业/ ,/ 需要/ 不同/ 专业/ 的/ 领域专家/ 之间/ 的/ 协同/ 建模/ ,/ 才能/ 更好/ 的/ 实现/ 整个/ 软件产品/ 的/ 建模/ ./ 基于/ 关注点/ 分离/ 的/ 思路/ ,/ 不同/ 专业/ 领域/ 的/ 建模/ 人员/ 关注/ 系统/ 的/ 不同/ 方面/ 并/ 实现/ 建模/ ./ 不同于/ 传统/ Page4/ 的/ 基于/ 领域专家/ 调研/ 的/ 领域/ 分析/ 与/ 建模/ 方法/ ,/ 本文/ 提出/ 一种/ 半自动/ 的/ 领域/ 需求/ 建模/ 方法/ :/ 首先/ ,/ 不同/ 建模/ 人员/ 对于/ 软件产品/ 线中/ 的/ 一系列/ 系统/ 的/ 不同/ 方面/ 进行/ 建模/ ,/ 建立/ 特征/ 模型/ ;/ 然后/ ,/ 在/ 建模/ 人员/ 建立/ 不同/ 的/ 特征/ 模型/ 后/ ,/ 基于/ 特征/ 模型/ 的/ 对比/ 和/ 组合/ 算法/ 辅助/ 建立/ 软件产品/ 线/ 的/ 领域/ 需求/ 模型/ ./ 基于/ 本文/ 提出/ 的/ 方法/ ,/ 建模/ 人员/ 首先/ 建立/ 一系列/ 系统/ 的/ 不同/ 方面/ 的/ 特征/ 模型/ ,/ 建模/ 人员/ 可以/ 在/ 遗留/ 系统/ 逆向/ 工程/ 的/ 基础/ 上/ 建立/ 系统/ 的/ 不同/ 方面/ 的/ 特征/ 模型/ ./ 由于/ 特征/ 模型/ 由/ 不同/ 的/ 建模/ 人员/ 分别/ 建立/ ,/ 其/ 特征/ 模型/ 之间/ 可能/ 出现/ 重叠/ ,/ 因此/ 如何/ 识别/ 两个/ 特征/ 模型/ 的/ 重合/ 特征/ 是/ 一个/ 需要/ 解决/ 的/ 问题/ ./ 在/ 识别/ 出/ 两个/ 特征/ 模型/ 的/ 重合/ 特征/ 后/ ,/ 如何/ 准确/ 的/ 实现/ 两个/ 特征/ 模型/ 的/ 组合/ 是/ 另/ 一个/ 需要/ 关注/ 的/ 问题/ ./ 如图/ 1/ 所示/ ,/ 在/ 建立/ 特征/ 模型/ 后/ ,/ 利用/ 本文/ 提出/ 的/ 模型/ 对比/ 算法/ 实现/ 不同/ 模型/ 的/ 对比/ ,/ 可以/ 分析/ 出/ 不同/ 模型/ 的/ 差异/ ./ 基于/ 不同/ 模型/ 的/ 差异/ ,/ 并且/ 利用/ 模型/ 的/ 组合/ 算法/ ,/ 对于/ 不同/ 的/ 模型/ 进行/ 组合/ ,/ 实现/ 领域/ 需求/ 模型/ 的/ 半自动/ 构建/ ./ 对于/ 同一个/ 特征/ ,/ 不同/ 的/ 领域专家/ 表达方式/ 可能/ 不同/ ,/ 导致/ 专业/ 背景/ 不同/ 的/ 领域建模/ 人员/ 建立/ 的/ 模型/ 无法/ 直接/ 进行/ 对比/ ./ 为了/ 避免/ 在/ 建模/ 过程/ 中/ 出现/ 建模/ 词汇/ 不/ 一致/ 的/ 情况/ ,/ 在/ 建立/ 特征/ 模型/ 之前/ ,/ 首先/ 建立/ 软件产品/ 线/ 的/ 领域/ 词汇表/ ,/ 然后/ 建模/ 人员/ 基于/ 领域/ 词汇表/ ,/ 建立/ 特征/ 模型/ ./ 3.1/ 特征/ 模型/ 在/ 软件产品/ 线/ 建模/ 过程/ 中/ ,/ 领域/ 需求/ 模型/ 是/ 领域/ 分析/ 过程/ 输出/ 的/ 一种/ 重要/ 制品/ ./ 特征/ 模型/ 是/ 捕获/ 特定/ 领域/ 可/ 复用/ 软件/ 需求/ 的/ 一种/ 重要/ 技术手段/ ./ 领域/ 需求/ 模型/ 可以/ 利用/ 特征/ 模型表示/ ,/ 本文/ 利用/ 特征/ 模型/ 描述/ 不同/ 软件产品/ 中/ 的/ 某/ 一个/ 方面/ 的/ 特征/ 和/ 它们/ 之间/ 的/ 关系/ ./ 领域/ 特征/ 模型/ 描述/ 了/ 该/ 领域/ 内/ 所有/ 产品/ 的/ 共性/ 和/ 可变/ 的/ 特征/ 信息/ ,/ 通过/ 记录/ 领域/ 内/ 的/ 一组/ 相对/ 稳定/ 的/ 特征/ 以及/ 特征/ 之间/ 的/ 关系/ 反映/ 该/ 领域/ 的/ 软件/ 共性/ 和/ 可变/ 需求/ ./ 特征/ 模型/ 可以/ 通过/ 该/ 领域/ 内/ 的/ 领域专家/ 提供/ ,/ 也/ 可以/ 利用/ 逆向/ 工程/ 建模/ ./ 图/ 2/ 是/ 特征/ 模型/ 的/ 元/ 模型/ ,/ 一个/ 特征/ 模型/ 是/ 特征/ 的/ 层状/ 结构/ ,/ 特征/ 模型/ 中/ 的/ 每个/ 特征/ 都/ 具有/ 唯一/ 的/ 名称/ ./ 特征/ 模型/ 必须/ 包含/ 根/ (/ Root/ )/ 特征/ ./ 每个/ 特征/ 都/ 能够/ 分解/ 为子/ 特征/ ./ 父/ 特征/ 和子/ 特征/ 之间/ 的/ 变化/ 性关系/ 具有/ 4/ 种/ ,/ 分别/ 为/ 强制性/ (/ Mandatory/ )/ 表示/ 当父/ 特征/ 被/ 选中/ 后/ ,/ 该子/ 特征/ 必须/ 被/ 包含/ 在/ 所有/ 的/ 产品/ 中/ ;/ 可选择性/ (/ Optional/ )/ 表示/ 该子/ 特征/ 是/ 可选/ 的/ ,/ 在/ 软件产品/ 的/ 配置/ 过程/ 中/ ,/ 可以/ 选择/ 该/ 特征/ ,/ 也/ 可以/ 不/ 选择/ ;/ 选择性/ (/ Alternative/ )/ 表示/ 父/ 特征/ 有/ 多个/ 可选/ 的/ 子/ 特征/ ,/ 在/ 软件产品/ 的/ 配置/ 过程/ 中/ ,/ 如果/ 父/ 特征/ 被/ 选中/ ,/ 只有/ 一个/ 子/ 特征/ 可以/ 被/ 选中/ 并/ 包含/ 在/ 最终/ 的/ 产品/ 中/ ;/ 多选性/ (/ Or/ )/ 表示/ 在/ 软件产品/ 的/ 配置/ 过程/ 中/ ,/ 可以/ 从父/ 特征/ 的/ 多个/ 子/ 特征/ 中/ 选择/ 多个/ 特征/ ./ 除了/ 父/ 特征/ 和子/ 特征/ 之间/ 的/ 变化/ 性关系/ ,/ 特征/ 模型/ 的/ 特征/ 之间/ 还/ 存在/ 约束/ 关系/ :/ 依赖/ 和/ 互斥/ ./ 依赖/ (/ ARequireB/ )/ 表示/ 包含/ 特征/ A/ 的/ 产品/ 也/ 必须/ 包含/ 特征/ B/ ,/ 互斥/ (/ AExcludeB/ )/ 表示/ 包含/ 特征/ A/ 的/ 产品/ 必须/ 不能/ 再/ 包含/ 特征/ B/ ./ 3.2/ 特征/ 模型/ 对比/ 在/ 特征/ 模型/ 中/ ,/ 如果/ 特征/ 模型/ 中/ 具有/ 大量/ 的/ 约束/ 关系/ ,/ 则/ 特征/ 模型/ 形成/ 一种/ 图状/ 结构/ ,/ 因此/ 传统/ 的/ 基于/ 树/ 对比/ 的/ 模型/ 对比/ 方法/ 不能/ 直接/ 用于/ 实现/ 特征/ 模型/ 的/ 对比/ ./ 属性/ 图/ (/ AttributedGraph/ )/ 是/ 在/ 传统/ 的/ 图/ 的/ 基础/ 上/ 考虑/ 了/ 每个/ 节点/ 的/ 属性/ 的/ 图/ ./ 本文/ 在/ 实现/ 模型/ 对比/ 的/ 时候/ ,/ 将/ 特征/ 模型表示/ 为/ 属性/ 图/ ,/ 完整/ 的/ 表达/ 模型/ 元素/ 的/ 属性/ 和/ 类型/ ,/ 将/ 特征/ 模型/ 中/ 的/ 变化/ 性关系/ 利用/ 属性/ 图中/ 的/ 属性/ 表示/ ./ 其中/ ,/ 将/ 特征/ 模型/ 中/ 的/ 约束/ 关系/ 表示/ 为/ 属性/ 图中/ 的/ 边/ ./ 本文/ 的/ 模型/ 对比/ 分析/ 主要/ 实现/ 不同/ 的/ 特征/ 模型/ 之间/ 的/ 重合/ 特征/ 和/ 变更/ 特征/ 的/ 识别/ ,/ 以便/ 基于/ 分析/ 结果/ 实现/ 特征/ 模型/ 组合/ ./ 定义/ 1/ ./ 属性/ 图/ ./ 属性/ 图/ G/ 可以/ 标记/ 为/ 三元组/ G/ =/ (/ V/ ,/ E/ ,/ A/ )/ ,/ 其中/ ,/ V/ 表示/ N/ 个/ 节点/ 的/ 集合/ ,/ E/ =/ {/ (/ vi/ ,/ vj/ )/ |/ 1/ / i/ ,/ j/ / N/ ,/ i/ ≠/ j/ }/ 是/ 边/ 的/ 集合/ ,/ A/ =/ {/ a1/ ,/ a2/ ,/ …/ ,/ am/ }/ 是/ 与/ V/ 中/ 的/ 节点/ 相关联/ 的/ m/ 个/ 属性/ 的/ 集合/ ,/ 以/ 描述/ 节点/ 的/ 属性/ ./ 节点/ 集合/ V/ 中/ 的/ 每个/ Page5/ 节点/ v/ 的/ 属性/ 都/ 可以/ 用/ 长度/ 为/ m/ 的/ 属性/ 向量/ 犃/ (/ v/ )/ =/ {/ a1/ (/ v/ )/ ,/ a2/ (/ v/ )/ ,/ …/ ,/ am/ (/ v/ )/ }/ 描述/ ./ 其中/ ,/ aj/ (/ v/ )/ 是/ 节点/ v/ 的/ 第/ j/ 个/ 属性/ 的/ 属性/ 值/ ./ 基于/ 图/ 2/ 所示/ 的/ 元/ 模型/ ,/ 本文/ 将/ 特征/ 模型/ 中/ 的/ 每个/ 模型/ 元素/ 的/ 相关/ 信息/ ,/ 利用/ Type/ 、/ Name/ 、/ Attribute/ 进行/ 标识/ ./ Type/ 表示/ 元/ 模型/ 中/ 定义/ 的/ 模型/ 实体/ 类型/ ,/ 包含/ Feature/ 、/ LeafFeature/ ;/ Name/ 是/ 特征/ 模型/ 中/ 节点/ 的/ 名字/ ;/ Attribute/ 包含/ 特征/ 模型/ 元/ 模型/ 中/ 定义/ 的/ 4/ 类/ 变化/ 性关系/ :/ Mandatory/ 、/ Optional/ 、/ Alternative/ 、/ Or/ ,/ 同时/ Attribute/ 中/ 也/ 记录/ 了/ 特征/ 模型/ 元素/ 具有/ 的/ 属性/ 信息/ ./ 本文/ 将/ 特征/ 模型/ 中边/ 的/ 信息/ 利用/ Type/ 、/ Name/ 、/ Src/ 、/ Dst/ 进行/ 标识/ ./ 边/ 的/ Type/ 类型/ 为/ Require/ 、/ Exclude/ ,/ 即将/ 特征/ 模型/ 中/ 的/ Require/ 和/ Exclude/ 约束/ 关系/ 利用/ 边/ 的/ 属性/ 进行/ 区分/ ./ 定义/ 2/ ./ 节点/ 与/ 边/ 的/ 标记/ ./ 节点/ 的/ 标记/ (/ signa/ -/ ture/ )/ 包含/ Type/ 、/ Name/ 信息/ ,/ 设/ n/ 是/ 图/ 中/ 的/ 一个/ 节点/ ,/ signature/ (/ n/ )/ =/ Type/ (/ n/ )/ // Name/ (/ n/ )/ ,/ 如果/ 一个/ 节点/ 没有/ 名字/ ,/ 则/ 标记/ 中/ 的/ 名字/ 对应/ 为空/ 字符串/ ./ 设/ e/ 是/ 图/ 中/ 的/ 一条/ 边/ ,/ 它/ 的/ 源/ 节点/ 和/ 目的/ 节点/ 分别/ 是/ src/ 和/ dest/ ,/ 则/ 边/ 的/ 标记/ 包含/ Type/ 、/ Name/ 、/ Src/ 、/ Dst/ 信息/ ,/ 它/ 的/ 标记/ 为/ signature/ (/ e/ )/ =/ signature/ (/ src/ )/ // Type/ (/ e/ )/ // Name/ (/ e/ )/ // signature/ (/ dest/ )/ ./ 定义/ 3/ ./ 节点/ 的/ 标记/ 相似/ 度/ ./ 给定/ 两个/ 需要/ 进行/ 对比/ 的/ 特征/ 模型/ M1/ 和/ M2/ ,/ 其中/ ,/ M1/ 为/ 基础/ 模型/ ,/ M2/ 为/ 对比/ 模型/ ./ 设/ v1/ 和/ v2/ 分别/ 是/ 两个/ 模型/ 中/ 的/ 任一/ 节点/ ,/ 则/ 两个/ 节点/ 间/ 的/ 标记/ 信息/ 匹配/ signature/ (/ v1/ )/ =/ signature/ (/ v2/ )/ ,/ 当且/ 仅/ 当/ 两个/ 节点/ 的/ 标记/ 字符串/ 相同/ ./ 基于/ 标记/ 的/ 边/ 对比/ 的/ 计算方法/ 相同/ ./ 定义/ 4/ ./ 节点/ 的/ 结构/ 相似/ 度/ ./ 给定/ 两个/ 模型/ M1/ 和/ M2/ ,/ 设/ v1/ 和/ v2/ 分别/ 是/ 两个/ 模型/ 中/ 的/ 节点/ ,/ v2/ 和/ v1/ 的/ 结构/ 相似/ 度为/ v2/ 和/ v1/ 的/ 匹配/ 的/ 边/ 的/ 数目/ ./ 对/ 基础/ 模型/ 中/ 的/ 每/ 一个/ 节点/ ,/ 利用/ 基于/ 节点/ 标记/ 的/ 模型/ 对比/ 算法/ 计算/ 模型/ 元素/ 的/ 相似/ 度/ ./ 在/ 对比/ 过程/ 中/ ,/ 有/ 可能/ 一个/ 模型/ 元素/ 对应/ 多个/ 相似/ 度/ 较/ 高/ 的/ 元素/ ,/ 即/ 包含/ 多个/ 候选/ 元素/ ./ 此时/ ,/ 利用/ 基于/ 结构/ 的/ 对比/ 方法/ 实现/ 候选/ 元素/ 的/ 选择/ ,/ 即/ 从/ 候选/ 节点/ 中/ 选择/ 结构/ 相似/ 度/ 最大/ 的/ 节点/ ./ 模型/ 的/ 差异/ 一般/ 分为/ 3/ 种/ :/ 元素/ 增加/ 、/ 元素/ 删除/ 、/ 元素/ 变更/ ,/ 借鉴/ DSMDiff/ [/ 22/ ]/ 的/ 模型/ 对比/ 结果/ ,/ 本文/ 实现/ 的/ 特征/ 模型/ 的/ 对比/ 结果/ 包含/ :/ 特征/ 增加/ 、/ 特征/ 删除/ 、/ 特征/ 变更/ ./ 相应/ 地/ ,/ 特征/ 模型/ 中/ 变化/ 性关系/ 的/ 对比/ 结果/ 包含/ :/ 变化/ 性关系/ 增加/ 、/ 变化/ 性关系/ 删除/ 、/ 变化/ 性关系/ 变更/ ./ 算法/ 1/ 为/ 基于/ 标记/ 和/ 结构/ 的/ 特征/ 模型/ 对比/ 算法/ ,/ 由于/ 篇幅/ 原因/ ,/ 模型/ 对比/ 算法/ 中/ 没有/ 给出/ 边/ 的/ 对比/ 部分/ ./ 在/ 算法/ 的/ 实现/ 过程/ 中/ ,/ 如果/ 存在/ 某个/ 节点/ 为/ 增加/ 的/ 节点/ ,/ 则/ 可以/ 进行/ 该/ 节点/ 的/ 子孙/ 节点/ 的/ 对比/ ./ 如果/ 子孙/ 节点/ 的/ 所有/ 节点/ 在/ 基础/ 模型/ 中/ 都/ 没有/ 出现/ ,/ 则/ 将/ 其/ 子孙/ 节点/ 也/ 都/ 标记/ 为/ 增加/ 的/ 节点/ ./ 在/ 特征/ 模型/ 对比/ 算法/ 中/ ,/ 首先/ 根据/ 待/ 对比/ 的/ 基础/ 特征/ 模型/ 和/ 对比/ 特征/ 模型/ ,/ 构建/ 属性/ 图/ baseGraph/ 和/ compGraph/ ,/ 然后/ 初始化/ 基础/ 模型/ 节点/ 集合/ baseSet/ 和/ 待/ 对比/ 模型/ 节点/ 集合/ compSet/ 以及/ 节点/ 增加/ 集合/ nodeAddSet/ ,/ 节点/ 删除/ 集合/ nodeDeleteSet/ 和/ 节点/ 变更/ 集合/ notChangeMap/ ./ 对于/ 基础/ 模型/ 节点/ 集合/ 中/ 的/ 每个/ 节点/ baseNode/ ,/ 利用/ 基于/ 标记/ 的/ 方法/ 计算/ 相似/ 度/ ./ 如果/ 找到/ 与/ baseNode/ 匹配/ 的/ 唯一/ 节点/ ,/ 则/ 加入/ 节点/ 匹配/ 集合/ ./ 如果/ 找到/ 多个/ 与/ baseNode/ 匹配/ 的/ 节点/ ,/ 则/ 利用/ 结构/ 相似/ 度/ 计算方法/ ,/ 寻找/ 与/ baseNode/ 相似/ 度/ 最高/ 的/ 节点/ ./ 在/ 对比/ 完成/ 后/ ,/ 如果/ 待/ 对比/ 模型/ 节点/ 集合/ compSet/ 不为/ 空/ ,/ 则/ 将/ 其/ 所有/ 节点/ 加入/ 到/ 节点/ 增加/ 集合/ ./ 对于/ 节点/ 匹配/ 集合/ 中/ 的/ 每/ 一组/ 节点/ ,/ 计算/ 其/ 属性/ 的/ 相似/ 度/ ,/ 并/ 将/ 特征/ 属性/ 发生/ 变更/ 的/ 节点/ 加入/ 节点/ 变更/ 集合/ ./ 算法/ 1/ ./ 特征/ 模型/ 对比/ 算法/ ./ 输入/ :/ 基础/ 特征/ 模型/ M1/ 和/ 对比/ 特征/ 模型/ M2/ 输出/ :/ 特征/ 模型/ 的/ 对比/ 结果/ 1/ ./ readbasemodelM1andcomparemodelM2/ ;/ 2/ ./ initbaseGraphandcompGraph/ ;/ 3/ ./ setbaseSet/ ,/ compSet/ ,/ nodeMappingMap/ ,/ nodeAddSet/ ,/ 4/ ./ FOREACHbaseNode/ ∈/ baseSet5/ ./ FOREACHcompNode/ ∈/ compSet6/ ./ result/ =/ signatureSimilarity/ (/ baseNode/ ,/ 7/ ./ IFresult/ =/ 18/ ./ number/ =/ numebr/ +/ 1/ ;/ 9/ ./ ENDFOR10/ ./ IFnumber/ =/ 111/ ./ addmap/ (/ v1/ ,/ v2/ )/ intonodeMappingMap/ ;/ 12/ ./ deletev1frombaseSet/ ,/ deletev2fromcompSet/ ;/ 13/ ./ ENDIF14/ ./ IFnumber/ =/ 015/ ./ addv1intonodeDeleteSet/ ,/ deletebaseSetfromv1/ ;/ 16/ ./ IFnumber/ >/ 117/ ./ Ver/ =/ maxStructureSimilarity/ (/ baseNode/ ,/ 18/ ./ addVer/ (/ v1/ ,/ v2/ )/ intonodeMappingMap/ ;/ 19/ ./ deletev1frombaseSet/ ,/ deletev2fromcompSet/ ;/ Page620/ ./ ENDIF21/ ./ ENDFOR22/ ./ IFcompSet/ 〈/ 〉/ NULL23/ ./ addallnodeincompSetintonodeAddSet/ ;/ 24/ ./ ENDIF25/ ./ FOREACH/ (/ node1/ ,/ node2/ )/ ∈/ nodeMappingMap26/ ./ sim/ =/ attributeSim/ (/ node1/ ,/ node2/ )/ ;/ 27/ ./ IFsim/ >/ 028/ ./ addnodeintonodeChangeMap/ ;/ 29/ ./ ENDIF30/ ./ ENDFOR/ 在/ 特征/ 模型/ 对比/ 算法/ 中/ ,/ signatureSimilarity/ (/ )/ 实现/ 了/ 基于/ 标记/ 的/ 节点/ 相似/ 度/ 对比/ ,/ 对比/ 方法/ 采用/ 字符串/ 匹配/ 的/ 方式/ 实现/ ./ maxStructureSimilarity/ (/ )/ 实现/ 了/ 基于/ 结构/ 的/ 节点/ 相似/ 度/ 对比/ ./ attributeSim/ (/ )/ 利用/ 基于/ 标记/ 的/ 对比/ 方法/ 实现/ 了/ 属性/ 相似/ 度/ 的/ 对比/ ./ 模型/ 对比/ 的/ 输出/ 结果/ 为/ 两个/ 属性/ 图/ 的/ 对比/ 结果/ ./ 假设/ 两个/ 不同/ 的/ 模型/ 为/ M1/ 和/ M2/ ,/ 匹配/ 的/ 模型/ 元素/ 和/ 关系/ 的/ 集合/ 为/ M/ ,/ 不/ 匹配/ 的/ 模型/ 元素/ 和/ 关系/ 的/ 集合/ 为/ {/ I1/ ,/ I2/ }/ ,/ 其中/ ,/ I1/ 和/ I2/ 分别/ 代表/ 模型/ M1/ 和/ 模型/ M2/ 中/ 的/ 元素/ ./ 不/ 匹配/ 的/ 元素/ 集合/ 中/ 包含/ :/ {/ 增加/ 的/ 模型/ 元素/ 、/ 减少/ 的/ 模型/ 元素/ 、/ 变更/ 的/ 模型/ 元素/ }/ ./ 如果/ 存在/ 多个/ 特征/ 模型/ ,/ 则/ 可以/ 采用/ 增量/ 的/ 模型/ 对比/ 和/ 组合/ 方法/ ,/ 首先/ 对比/ 两个/ 模型/ ,/ 然后/ 逐渐/ 增加/ 模型/ ,/ 实现/ 多个/ 模型/ 的/ 对比/ ./ 在/ 模型/ 的/ 对比/ 结束/ 后/ ,/ 会/ 得到/ 模型/ 的/ 匹配/ 元素/ 和/ 各个/ 模型/ 的/ 不/ 匹配/ 的/ 元素/ ,/ 然后/ 利用/ 模型/ 组合/ 规则/ 实现/ 模型/ 的/ 组合/ ,/ 最终/ 得到/ 软件产品/ 线/ 领域/ 特征/ 模型/ ./ 3.3/ 基于/ 插入/ 与/ 组合/ 算子/ 的/ 模型/ 组合/ 在/ 不同/ 建模/ 人员/ 建立/ 多个/ 产品/ 的/ 不同/ 方面/ 的/ 特征/ 模型/ 后/ ,/ 基于/ 模型/ 组合/ 建立/ 领域/ 特征/ 模型/ ./ 由于/ 模型/ 组合/ 可以/ 分解/ 为/ 一系列/ 两个/ 模型/ 的/ 组合/ ,/ 因此/ ,/ 在/ 模型/ 组合/ 的/ 过程/ 中/ ,/ 首先/ 选择/ 一个/ 基础/ 模型/ ,/ 然后/ 其余/ 的/ 模型/ 都/ 与/ 此/ 模型/ 进行/ 对比/ 并/ 进行/ 组合/ ./ 基于/ 模型/ 对比/ 的/ 结果/ ,/ 模型/ 组合/ 对于/ 增加/ 、/ 变更/ 的/ 特征/ 和/ 增加/ 、/ 变更/ 的/ 特征/ 关系/ 进行/ 处理/ ,/ 在/ 模型/ 的/ 组合/ 过程/ 中/ ,/ 如果/ 不/ 考虑/ 模型/ 中/ 的/ 约束/ ,/ 则/ 增加/ 一个/ 特征/ ,/ 必然/ 增加/ 相应/ 的/ 父子/ 特征/ 关系/ ,/ 因此/ 只/ 对于/ 模型/ 中/ 增加/ 的/ 特征/ 进行/ 处理/ 即可/ ./ 但是/ 由于/ 特征/ 模型/ 中/ 约束/ 的/ 存在/ ,/ 需要/ 对于/ 具有/ 约束/ 的/ 特征/ 模型/ 进行/ 单独/ 的/ 处理/ ,/ 对于/ 模型/ 中/ 约束/ 的/ 处理/ ,/ 将/ 在/ 3.4/ 节/ 介绍/ ./ 由于/ 减少/ 的/ 特征/ 很难/ 直接判断/ 其/ 组合/ 语义/ ,/ 无法/ 通过/ 自动/ 的/ 方式/ 进行/ 组合/ ,/ 则/ 需要/ 在/ 模型/ 组合/ 完成/ 后/ 进行/ 人工/ 的/ 调整/ ./ 模型/ 组合/ 主要/ 实现/ 将/ 待/ 组合/ 模型/ 准确/ 地/ 组合/ 到/ 基础/ 模型/ 中/ ,/ 同时/ 保持/ 模型/ 的/ 语义/ 不/ 发生变化/ ./ 对于/ 特征/ 模型/ 的/ 组合/ ,/ 主要/ 实现/ 特征/ 模型/ 元素/ 变化/ 性关系/ 和/ 约束/ 关系/ 的/ 变更/ ./ 基于/ 模型/ 组合/ 过程/ 中/ 的/ 不同/ 组合/ 需求/ ,/ 同时/ 参考/ Acher/ 等/ 人/ [/ 19/ ]/ 的/ 工作/ ,/ 本文/ 定义/ 了/ 两种/ 算子/ ,/ 分别/ 是/ 插入/ 算子/ 和/ 组合/ 算子/ ,/ 并且/ 基于/ 两种/ 算子/ 实现/ 特征/ 模型/ 的/ 组合/ ./ 定义/ 5/ ./ 插入/ 算子/ (/ Insert/ )/ ./ 插入/ 算子/ 的/ 目的/ 在于/ 将/ 模型/ 新增/ 的/ 元素/ 插入/ 到/ 基础/ 模型/ 中/ ./ 如图/ 3/ 所示/ ,/ 插入/ 算子/ 主要/ 针对/ 待/ 插入/ 模型/ 中/ 的/ 新/ 增加/ 的/ 元素/ ,/ 将/ 新增/ 的/ 元素/ 插入/ 到/ 基础/ 模型/ 中/ 的/ 对应/ 位置/ ./ 该/ 算子/ 主要/ 应用/ 于/ 基础/ 模型/ 和/ 待/ 插入/ 模型/ 没有/ 重合/ 元素/ 的/ 情况/ ./ 插入/ 运算符/ (/ 算子/ )/ 的/ 语法/ 定义/ 如下/ :/ Insert/ (/ insertFeature/ :/ Feature/ ,/ insertpointFea/ -/ 插入/ 算子/ 需要/ 3/ 个/ 输入/ :/ 待/ 插入/ 基础/ 模型/ 的/ 目标/ 特征/ 、/ 基础/ 模型/ 的/ 待/ 插入/ 子/ 特征/ 位置/ 的/ 特征/ 和/ 插入/ 算子/ ,/ 其中/ ,/ insertFeature/ 指定/ 了/ 待/ 插入/ 到/ 基础/ 模型/ 中/ 的/ 模型/ 的/ 目标/ 特征/ ;/ insertpointFeature/ 是/ 基础/ 模型/ 中/ 的/ 特征/ ,/ 表明/ 待/ 插入/ 特征/ 的/ 插入/ 位置/ ;/ 在/ 待/ 插入/ 特征/ 插入/ 到/ 基础/ 模型/ 后/ ,/ operator/ 算子/ 实现/ 基础/ 模型/ 元素/ 变化/ 性关系/ 的/ 调整/ ./ 在/ 该/ 插入/ 算子/ 的/ 实现/ 过程/ 中/ ,/ 要求/ 待/ 插入/ 模型/ 和/ 插入/ 模型/ 没有/ 交集/ ,/ 以/ 保证/ 两个/ 模型/ 在/ 插入/ 过程/ 中/ 不会/ 出现/ 冲突/ ,/ 如果/ 两个/ 模型/ 存在/ 交集/ ,/ 则/ 需要/ 首先/ 将/ 该/ 模型/ 的/ 公共/ 子/ 模型/ 插入/ 到/ 基础/ 模型/ 中/ ./ 模型/ 元素/ 的/ 插入/ 规则/ 如表/ 1/ 所示/ ,/ Base/ 列/ 表示/ insertpointFeature/ 与/ 其子/ 特征/ 之间/ 的/ 关系/ ,/ Leaf/ 行/ 表示/ 该/ 特征/ 没有/ 子/ 特征/ ./ Insert/ 行/ 表示/ insertFeature/ 与/ 其父/ 特征/ 的/ 关系/ ./ Null/ 列/ 表示/ insertFeature/ 特征/ Page7/ 没有/ 父/ 特征/ ./ 在/ 模型/ 元素/ 插入/ 过程/ 中/ ,/ 基于/ 表/ 1/ 的/ 插入/ 规则/ ,/ 实现/ 模型/ 元素/ 插入/ 过程/ 中/ 模型/ 元素/ 变化/ 性关系/ 的/ 调整/ ./ BaseLeafMandatoryOptionalMandatoryOptionalOptionalMandatory/ // OptionalMandatoryOptionalMandatoryOptionalOptionalAlternativeAlternative/ // OrMandatoryOrMandatoryOrOr/ 基于/ 特征/ 模型/ 中/ 的/ 变化/ 性关系/ 和/ 约束/ 关系/ ,/ 特征/ 模型/ 可以/ 表示/ 为/ 一系列/ 不同/ 配置/ 的/ 集合/ ,/ 以/ 表示/ 该/ 特征/ 模型/ 可能/ 配置/ 出/ 的/ 不同/ 产品/ ,/ 一个/ 配置/ 对应/ 从/ 特征/ 模型/ 中/ 选择/ 的/ 一系列/ 特征/ ./ 在/ 模型/ 元素/ 插入/ 的/ 过程/ 中/ ,/ 插入/ 规则/ 是/ 为了/ 尽量/ 保持/ 基础/ 模型/ 中/ 的/ 变化/ 性关系/ 不变/ ,/ 同时/ 将/ 待/ 插入/ 模型/ 插入/ ,/ 即/ 基础/ 模型/ 的/ 配置/ 的/ 集合/ 至少/ 是/ 插入/ 后/ 的/ 模型/ 的/ 配置/ 集合/ ./ 设/ {/ BaseFM/ }/ 是/ 基础/ 模型/ 配置/ 的/ 集合/ ,/ {/ InsertFM/ }/ 为/ 待/ 插入/ 模型/ 配置/ 的/ 集合/ ,/ {/ InsertedFM/ }/ 为/ 插入/ 后/ 的/ 特征/ 模型/ 配置/ 的/ 集合/ ,/ 插入/ 后/ 的/ 特征/ 模型/ 应该/ 满足条件/ {/ BaseFM/ }/ / {/ InsertedFM/ }/ ./ 为了/ 使得/ 基础/ 模型/ 的/ 配置/ 集合/ 能够/ 将/ 待/ 插入/ 模型/ 补充/ 进来/ ,/ 需要/ 保证/ {/ BaseFM/ }/ / {/ InsertFM/ }/ / {/ InsertedFM/ }/ ,/ 其中/ A/ / B/ =/ {/ a/ ∪/ b/ |/ a/ ∈/ A/ ,/ b/ ∈/ B/ }/ ,/ a/ 和/ b/ 分别/ 为/ A/ 和/ B/ 中/ 的/ 集合/ ./ 如果/ 待/ 插入/ 特征/ 不/ 具有/ 父/ 特征/ ,/ 则/ 直接/ 将/ 该/ 元素/ 插入/ 到/ 基础/ 模型/ 中/ ./ 如果/ 插入/ 一个/ 与/ 父/ 特征/ 关系/ 为/ Alternative/ 或/ Or/ 的/ 特征/ ,/ 为了/ 保持/ 其/ 变化/ 性关系/ ,/ 则/ 将/ 该/ 特征/ 的/ 变化/ 性关系/ 变更/ 为/ Mandatory/ 或/ Optional/ 后/ 插入/ ./ 在/ 待/ 插入/ 特征/ 与/ 父/ 特征/ 变化/ 性关系/ 为/ Manda/ -/ tory/ ,/ 而/ 插入/ 位置/ 的/ 特征/ 与子/ 特征/ 变化/ 性关系/ 为/ Alternative/ 的/ 情况/ 下/ ,/ 会/ 发生冲突/ ./ 如果/ 保持/ 待/ 插入/ 特征/ 的/ Mandatory/ 关系/ ,/ 则/ Alternative/ 关系/ 遭到/ 破坏/ ,/ 而/ 如果/ 保持/ 基础/ 模型/ 的/ Alternative/ 关系/ ,/ 则/ 待/ 插入/ 特征/ 的/ Mandatory/ 关系/ 会/ 破坏/ ,/ 此时/ ,/ 需要/ 用户/ 指定/ 模型/ 元素/ 插入/ 后/ 的/ 变化/ 性关系/ 类型/ ./ 根据上述/ 插入/ 规则/ 的/ 基本/ 原则/ ,/ 定义/ 表/ 1/ 中/ 的/ 插入/ 规则/ ./ 如果/ 基础/ 模型/ 中待/ 插入/ 特征/ 位置/ 为/ 叶子/ 节点/ ,/ 则/ Mandatory/ 和/ Optional/ 节点/ 插入/ 后/ 的/ 元素/ 变化/ 性关系/ 不变/ ,/ 而/ 如果/ 插入/ 位置/ 的/ 特征/ 与子/ 特征/ 变化/ 性关系/ 为/ Alternative/ 和/ Or/ ,/ 则/ 插入/ 后/ ,/ 元素/ 变化/ 性关系/ 为/ Mandatory/ 和/ Optional/ ./ 在/ 基础/ 模型/ 中/ 插入/ 位置/ 的/ 特征/ 与子/ 特征/ 变化/ 性关系/ 为/ Mandatory/ 或/ Optional/ 的/ 情况/ 下/ ,/ 如果/ 待/ 插入/ 特征/ 的/ 变化/ 性关系/ 为/ Alternative/ 或者/ Or/ ,/ 则/ 插入/ 基础/ 模型/ 后/ ,/ 基础/ 模型/ 的/ 元素/ 变化/ 性关系/ 变为/ Mandatory/ 和/ Optional/ ./ 如果/ 基础/ 模型/ 中/ 插入/ 位置/ 的/ 特征/ 与子/ 特征/ 变化/ 性关系/ 为/ Alternative/ ,/ 则/ 除了/ 待/ 插入/ 特征/ 的/ 变化/ 性关系/ 为/ Mandatory/ 关系/ ,/ 任何/ 待/ 插入/ 特征/ 在/ 插入/ 基础/ 模型/ 后/ ,/ 元素/ 变化/ 性关系/ 都/ 为/ Alternative/ ./ 如果/ 基础/ 模型/ 中/ 插入/ 位置/ 的/ 特征/ 与子/ 特征/ 变化/ 性关系/ 为/ Or/ ,/ 在/ 待/ 插入/ 特征/ 的/ 变化/ 性关系/ 为/ Mandatory/ 和/ Alternative/ 情况/ 下/ ,/ 基础/ 模型/ 的/ 变化/ 性关系/ 变更/ 为/ Mandatory/ ./ 定义/ 6/ ./ 组合/ 算子/ (/ Merge/ )/ ./ 组合/ 算子/ 的/ 目的/ 是/ 组合/ 两个/ 模型/ 的/ 重合/ 部分/ 到/ 一个/ 模型/ 中/ ,/ 实现/ 两个/ 模型/ 的/ 集成/ ./ 组合/ 算子/ 主要/ 针对/ 两个/ 模型/ 中/ 共享/ 部分/ 特征/ 的/ 情况/ ,/ 如图/ 4/ 中/ ,/ “/ 操作系统/ ”/ 和子/ 特征/ 之间/ 的/ 关系/ ,/ 左边/ 模型/ 为/ Alternative/ 关系/ ,/ 右边/ 模型/ 中为/ Or/ 关系/ ,/ 而/ 两个/ 模型/ 组合/ 后/ ,/ OS/ 和子/ 特征/ 之间/ 的/ 关系/ 变更/ 为/ Or/ ./ 组合/ 运算符/ (/ 算子/ )/ 的/ 语法/ 定义/ 如下/ :/ Merge/ (/ mergeFeature/ :/ Feature/ ,/ baseFeature/ :/ 组合/ 算子/ 需要/ 3/ 个/ 输入/ :/ 待/ 组合/ 模型/ 中/ 的/ 待/ 组合/ 特征/ 、/ 基础/ 模型/ 的/ 组合/ 位置/ 和/ 组合/ 算子/ ./ 其中/ ,/ baseFeature/ 是/ 基础/ 模型/ 中/ 的/ 特征/ ,/ 表明/ 待/ 组合/ 模型/ 的/ 组合/ 位置/ ;/ mergeFeature/ 指定/ 了/ 待/ 组合/ 模型/ 的/ 待/ 组合/ 特征/ ;/ operator/ 实现/ 待/ 组合/ 模型/ 组合/ 到/ 基础/ 模型/ 后/ ,/ 基础/ 模型/ 元素/ 变化/ 性关系/ 的/ 调整/ ./ 当待/ 组合/ 模型/ 组合/ 到/ 基础/ 模型/ 中/ 时/ ,/ 有/ 两种/ 不同/ 的/ 模型/ 组合/ 策略/ :/ 一种/ 组合/ 策略/ 是/ 基础/ 模型/ 中/ 的/ 模型/ 元素/ 被/ 保留/ ,/ 同时/ 待/ 组合/ 模型/ 中/ 的/ 元素/ 被/ 添加/ 到/ 基础/ 模型/ 中/ ;/ 而/ 另外/ 一种/ 组合/ 策略/ 是/ 保留/ 基础/ 模型/ 和/ 待/ 组合/ 模型/ 两个/ 模型/ 元素/ 中/ 的/ 共同/ 部分/ ./ 本文/ Page8/ 采取/ 第/ 1/ 种/ 组合/ 策略/ ,/ 因为/ 第/ 2/ 种/ 组合/ 策略/ 在/ 组合/ 过程/ 中/ 会/ 丢失/ 一部分/ 特征/ ./ 在/ 特征/ 模型/ 组合/ 后/ ,/ 特征/ 模型/ 的/ 变化/ 性关系/ 发生变化/ ,/ 其/ 可能/ 的/ 配置/ 会/ 发生变化/ ./ 为了/ 保证/ 基础/ 模型/ 和/ 待/ 插入/ 模型/ 组合/ 后/ 不/ 丢失/ 正确/ 的/ 配置/ ,/ 基础/ 模型/ 和/ 待/ 插入/ 模型/ 的/ 配置/ 集合/ 必须/ 是/ 组合/ 后/ 的/ 模型/ 的/ 配置/ 集合/ 的/ 子集/ ./ 设/ {/ BaseFM/ }/ 是/ 基础/ 模型/ 配置/ 的/ 集合/ ,/ {/ MergeFM/ }/ 为/ 待/ 组合/ 模型/ 配置/ 的/ 集合/ ,/ {/ MergedFM/ }/ 为/ 组合/ 后/ 的/ 特征/ 模型/ 配置/ 的/ 集合/ ,/ 组合/ 后/ 的/ 特征/ 模型/ 应该/ 满足条件/ {/ BaseFM/ }/ ∪/ {/ MergeFM/ }/ / {/ MergedFM/ }/ ./ 模型/ 元素/ 的/ 组合/ 规则/ 如表/ 2/ 所示/ ./ 如果/ 基础/ 模型/ 中/ 的/ 特征/ 与子/ 特征/ 之间/ 的/ 变化/ 性关系/ 是/ Mandatory/ ,/ 则/ 组合/ 具有/ Mandatory/ 、/ Optional/ 、/ Alternative/ 和/ Or/ 关系/ 的/ 模型/ 后/ ,/ 特征/ 与子/ 特征/ 之间/ 的/ 变化/ 性关系/ 为/ Mandatory/ 、/ Optional/ 、/ Alternative/ 和/ Or/ ./ 如果/ 基础/ 模型/ 中/ 的/ 特征/ 与子/ 特征/ 之间/ 的/ 变化/ 性关系/ 是/ Optional/ ,/ 则/ 组合/ 后/ 的/ 模型/ 的/ 变化/ 性关系/ 全是/ Optional/ ./ 如果/ 基础/ 模型/ 中/ 的/ 特征/ 与子/ 特征/ 之间/ 的/ 变化/ 性关系/ 是/ Alternative/ ,/ 则/ 组合/ 后/ 的/ 模型/ 的/ 变化/ 性关系/ 为/ Or/ 、/ Optional/ 、/ Alternative/ 和/ Or/ ./ 如果/ 基础/ 模型/ 中/ 的/ 特征/ 与子/ 特征/ 之间/ 的/ 变化/ 性关系/ 是/ Or/ ,/ 则/ 组合/ 后/ 的/ 模型/ 的/ 变化/ 性关系/ 为/ Or/ 、/ Optional/ 、/ Or/ 和/ Or/ ./ BaseMandatoryMandatoryOptionalAlternativeOrOptionalOptionalOptionalOptionalOptionalAlternativeOrOptionalAlternativeOrOrOrOptionalOrOr/ 本文/ 的/ 组合/ 操作/ 实现/ 基于/ 结构/ 的/ 模型/ 组合/ ,/ 对于/ 在/ 组合/ 过程/ 中/ 变化/ 性关系/ 发生变化/ 的/ 节点/ ,/ 利用/ 组合/ 算子/ 进行/ 变化/ 性关系/ 的/ 变更/ ./ 首先/ 将/ 变化/ 性关系/ 变更/ 为/ 对比/ 模型/ 的/ 变化/ 性关系/ ,/ 然后/ 利用/ 插入/ 算子/ 对应/ 的/ 算法/ ,/ 将/ 对比/ 模型/ 中/ 的/ 节点/ 依次/ 加入/ 到/ 基础/ 模型/ 中/ ./ 模型/ 组合/ 算法/ 的/ 实现/ 步骤/ 如/ 算法/ 2/ 所示/ ./ 在/ 模型/ 组合/ 算法/ 中/ ,/ 首先/ 获取/ 特征/ 模型/ 的/ 对比/ 结果/ ,/ 对于/ 节点/ 变更/ 集合/ 中/ 的/ 每个/ 节点/ nodeChange/ ,/ 判断/ 该/ 节点/ 是否/ 有/ 子孙/ 节点/ 属于/ 节点/ 变更/ 集合/ ,/ 如果/ 没有/ 节点/ 属于/ 节点/ 变更/ 集合/ ,/ 获取/ nodeChange/ 节点/ 在/ 基础/ 模型/ 中/ 的/ 组合/ 位置/ ,/ 并/ 基于/ 表/ 2/ 计算/ 模型/ 组合/ 后/ 的/ 节点/ 变化/ 性关系/ 变化/ iOp/ ,/ 将/ 基础/ 模型/ 的/ 插入/ 位置/ 的/ 节点/ 变化/ 性关系/ 变更/ 为/ iOp/ ./ 对于/ 节点/ 增加/ 集合/ 的/ 每个/ 节点/ nodeAdd/ ,/ 如果/ 该/ 节点/ 具有/ 约束/ ,/ 并且/ nodeAdd/ 节点/ 的/ 子孙/ 特征/ 中/ 存在/ 增加/ 的/ 节点/ nodeChildAdd/ ,/ 则/ 以/ 递归/ 的/ 方法/ 实现/ nodeChildAdd/ 节点/ 为根/ 的/ 模型/ 的/ 组合/ ./ 获取/ 待/ 插入/ 模型/ 中/ 的/ 增加/ 节点/ ,/ 并/ 依次/ 将/ 这些/ 节点/ 插入/ 到/ 基础/ 模型/ 中/ ./ 如果/ nodeAdd/ 节点/ 具有/ 约束/ 关系/ ,/ 则/ 在/ nodeAdd/ 节点/ 组合/ 完成/ 后/ ,/ 利用/ 算法/ 3/ 实现/ 约束/ 关系/ 的/ 处理/ ./ 算法/ 2/ ./ 特征/ 模型/ 组合/ 算法/ ./ 输入/ :/ 基础/ 特征/ 模型/ 和/ 待/ 组合/ 特征/ 模型/ 输出/ :/ 组合/ 后/ 的/ 特征/ 模型/ 1/ ./ FOREACHnodeChange/ ∈/ (/ nodeChangeMap/ ∩/ 2/ ./ IFnodeChildChangeisdescendantofnodeChange3/ ./ modelMerge/ (/ baseModel/ ,/ MergeModel/ :/ 4/ ./ ENDIF5/ ./ gettheinsertpositionmFeatureofnodeChangein6/ ./ iOp/ =/ computeOperator/ (/ mFeature/ ,/ nodeChange/ )/ ;/ 7/ ./ changeBaseModelOperator/ (/ iOp/ )/ ;/ 8/ ./ deleteNodeFromChangeMap/ (/ nodeChange/ )/ ;/ 9/ ./ IFnodeChangehasconstraint10/ ./ mergeWithConstraints/ (/ baseModel/ ,/ MergeModel/ ,/ 11/ ./ ENDIF12/ ./ ENDFOR13/ ./ FOREACHnodeAdd/ ∈/ (/ nodeAddSet/ ∩/ MergeModel/ )/ 14/ ./ gettheinsertpositionmFeatureofnodeAddin15/ ./ IFnodeChildAddisdescendantofnodeAdd16/ ./ modelMerge/ (/ baseModel/ ,/ MergeModel/ :/ 17/ ./ ELSE18/ ./ modelInsert/ (/ baseModel/ :/ mFeature/ ,/ MergeModel/ :/ 19/ ./ ENDIF20/ ./ IFnodeAddhasconstraint21/ ./ mergeWithConstraints/ (/ baseModel/ ,/ MergeModel/ ,/ 22/ ./ ENDIF23/ ./ deleteNodeFromAddSet/ (/ nodeAdd/ )/ ;/ 24/ ./ ENDFOR3/ ./ 4/ 基于/ 约束/ 关系/ 的/ 特征/ 模型/ 组合/ 由于/ 特征/ 模型/ 的/ 特征/ 之间/ 具有/ 约束/ 关系/ ,/ 在/ 特/ Page9/ 征/ 模型/ 规模/ 比较/ 大/ 的/ 时候/ ,/ 待/ 组合/ 的/ 两个/ 特征/ 模型/ 的/ 约束/ 关系/ 可能/ 存在/ 冲突/ ./ 在/ 特征/ 模型/ 组合/ 过程/ 中/ ,/ 如果/ 不/ 考虑/ 约束/ 关系/ ,/ 则/ 在/ 特征/ 模型/ 组合/ 后/ ,/ 会/ 出现/ 错误/ 的/ 模型/ 组合/ 结果/ ./ 因此/ ,/ 特征/ 模型/ 组合/ 算法/ 需要/ 考虑/ 特征/ 模型/ 元素/ 之间/ 的/ 约束/ ,/ 并/ 处理/ 特征/ 模型/ 的/ 约束/ 冲突/ ./ 基于/ 约束/ 关系/ 的/ 模型/ 组合/ 算法/ 如/ 算法/ 3/ 所示/ ,/ 算法/ 是/ 约束/ 关系/ 为/ Require/ 情况/ 下/ 的/ 组合/ 算法/ ./ 参考文献/ [/ 7/ ]/ 提出/ 的/ 模型/ 组合/ 方法/ ,/ 在/ 特征/ 模型/ 组合/ 过程/ 中/ ,/ 依次/ 判断/ 基础/ 模型/ 和/ 组合/ 模型/ 中/ 的/ 所有/ 约束/ 关系/ ,/ 并/ 根据/ 约束/ 关系/ 在/ 待/ 组合/ 模型/ 和/ 基础/ 模型/ 中/ 的/ 不同/ 情况/ 进行/ 约束/ 关系/ 的/ 处理/ ./ 算法/ 3/ ./ 基于/ 约束/ 的/ 模型/ 组合/ 算法/ ./ 输入/ :/ 基础/ 特征/ 模型/ 和/ 待/ 组合/ 特征/ 模型/ 输出/ :/ 基于/ 约束/ 的/ 模型/ 组合/ 结果/ 1/ ./ IFnode/ ∈/ MergedModelexistRequire/ 〈/ node/ ,/ n/ 〉/ 2/ ./ IFndonotinbaseModelMergedModeldonot3/ ./ delete/ 〈/ node/ ,/ n/ 〉/ fromMergedModel/ ;/ 4/ ./ ENDIF5/ ./ IFninbaseModel6/ ./ IFMergedModeldonotcontainRequire/ 〈/ n/ ,/ node/ 〉/ ,/ 7/ ./ IFMergedModeldonotcontainRequire/ 〈/ node/ ,/ n/ 〉/ ,/ 8/ ./ delete/ 〈/ node/ ,/ n/ 〉/ fromMergedModel/ ;/ 9/ ./ ENDIF10/ ./ ENDIF11/ ./ IFbaseModelcontainRequire/ 〈/ n/ ,/ node/ 〉/ 12/ ./ delete/ 〈/ node/ ,/ n/ 〉/ fromMergedModel/ ;/ 13/ ./ delete/ 〈/ n/ ,/ node/ 〉/ frombaseModel/ ;/ 14/ ./ ENDIF15/ ./ ENDIF16/ ./ ENDIF/ 在/ 基于/ 约束/ 的/ 模型/ 组合/ 算法/ 中/ ,/ 对于/ 约束/ 关系/ Require/ 〈/ node/ ,/ n/ 〉/ ,/ 算法/ 的/ 第/ 2/ ~/ 4/ 行/ 实现/ 约束/ 关系/ Require/ 在/ 基础/ 模型/ 中/ 不/ 存在/ 情况/ 的/ 处理/ ,/ 算法/ 的/ 第/ 5/ ~/ 14/ 行/ 实现/ 约束/ 关系/ Require/ 在/ 基础/ 模型/ 中/ 存在/ 情况/ 的/ 处理/ ./ 4/ 实验/ 为/ 验证/ 本文/ 提出/ 的/ 特征/ 模型/ 对比/ 和/ 组合/ 方法/ 的/ 有效性/ ,/ 基于/ 现有/ 的/ 特征/ 模型/ ,/ 本文/ 对于/ 提出/ 的/ 方法/ 进行/ 了/ 验证/ ,/ 首先/ 对于/ 算法/ 的/ 复杂度/ 进行/ 分析/ ,/ 然后/ 对于/ 算法/ 的/ 准确率/ 和/ 召回/ 率/ 进行/ 对比/ 分析/ ./ 本文/ 基于/ 开源/ 特征/ 建模/ 工具/ FeatureIDE/ ①/ 实现/ 特征/ 模型/ 的/ 建模/ ./ 4.1/ 实验/ 数据/ 来源/ 实验所/ 需/ 的/ 特征/ 模型/ 一部分/ 从/ 软件产品/ 线/ 在线/ 工具/ SPLOT/ ②/ 中/ 获取/ ,/ 另外/ 一部分/ 从/ 相关/ 公开/ 的/ 文献/ 中/ 获取/ ./ 如表/ 3/ 所示/ ,/ 第/ 1/ 组/ 数据/ (/ 图/ 5/ )/ 来自/ 于/ 文献/ [/ 20/ ]/ ,/ 第/ 4/ 组/ 数据/ 来自/ 于/ 文献/ [/ 23/ ]/ ./ 第/ 2/ 组和/ 第/ 3/ 组/ 数据/ 从/ SPLOT/ 中/ 获取/ ./ 第/ 5/ 至/ 第/ 7/ 组/ 数据/ 也/ 是从/ SPLOT/ 获取/ ,/ 这/ 3/ 组/ 特征/ 模型/ 中/ 包含/ 的/ 特征/ 数目/ 分别/ 为/ 60/ ,/ 88/ 和/ 168/ ./ 另外/ ,/ 由于/ 现有/ 的/ 特征/ 模型/ 中/ ,/ 包含/ 的/ 约束/ 数目/ 较少/ ./ 领域/ 特征/ 模型/ 特征/ 模型/ 11MobilePhone15021811142InsurancePolocy20202301203AndroidSPL40204403394BerkeleyDB30003501305SmartHomeV2/ ./ 260205001456ModelTransformation80008500737FM/ _/ Test150440156010153/ 第/ 1/ 组/ 实验/ 数据/ 如图/ 5/ 所示/ ,/ 两个/ 特征/ 模型/ 既/ 存在/ 相同/ 的/ 特征/ ,/ 也/ 存在/ 不同/ 的/ 特征/ ./ 其中/ ,/ 特征/ USB/ 和/ 特征/ SMS/ 都/ 具有/ 属性/ ./ 第/ 2/ 个/ 特征/ 模型/ 中/ 具有特征/ “/ 游戏/ ”/ 依赖于/ 特征/ “/ Java/ 支持/ ”/ 的/ 约束/ 关系/ ./ 除了/ 第/ 1/ 组/ 数据/ 可以/ 直接/ 用于/ 实验/ 分析/ ,/ 其余/ 进行/ 模型/ 对比/ 的/ 两个/ 模型/ ,/ 都/ 需要/ 进行/ 构造/ ,/ 将/ 特征/ 模型/ 分拆/ 为/ 两个/ 不同/ 的/ 特征/ 模型/ ./ 在/ 特征/ 模型/ 分拆/ ①/ ②/ Page10/ 为/ 两个/ 不同/ 的/ 特征/ 模型/ 后/ ,/ 两个/ 特征/ 模型/ 之间/ 既有/ 共同/ 的/ 特征/ ,/ 也/ 有/ 存在/ 差异/ 的/ 特征/ ./ 将/ 构造/ 的/ 两个/ 不同/ 的/ 特征/ 模型/ 作为/ 需要/ 组合/ 的/ 特征/ 模型/ ,/ 然后/ 对比/ 实验/ 结果/ ./ 表/ 3/ 为/ 特征/ 模型/ 对比/ 与/ 组合/ 的/ 实验/ 数据/ 集/ ,/ “/ 特征/ 模型/ 1/ ”/ 和/ “/ 特征/ 模型/ 2/ ”/ 为/ 模型/ 对比/ 与/ 组合/ 的/ 输入/ ./ 其中/ “/ 特征/ 模型/ 1/ ”/ 和/ “/ 特征/ 模型/ 2/ ”/ 的/ 特征/ 个数/ 不同/ ,/ 存在/ 的/ 约束/ 数目/ 也/ 不同/ ,/ “/ 特征/ 匹配/ 数目/ ”/ 列/ 表示/ 两个/ 不同/ 的/ 特征/ 模型/ 中/ 相同/ 特征/ 的/ 数目/ ./ 4.2/ 模型/ 对比/ 实验/ (/ 1/ )/ 时间/ 复杂度/ 分析/ 在/ 模型/ 对比/ 算法/ 中/ ,/ 设/ 每个/ 模型/ 的/ 节点/ 的/ 个数/ 为/ N/ ,/ 在/ 算法/ 中/ ,/ 基于/ 结构/ 的/ 对比/ 的/ 算法/ 部分/ 的/ 复杂度/ 为/ O/ (/ N/ ×/ logN/ )/ ./ 因为/ 在/ 算法/ 的/ 执行/ 过程/ 中/ ,/ 极端/ 情况/ 下/ ,/ 每个/ 模型/ 中/ 的/ 节点/ ,/ 都/ 要/ 进行/ 基于/ 结构/ 的/ 对比/ ,/ 因此/ ,/ 算法/ 的/ 时间/ 复杂度/ 为/ O/ (/ N2/ ×/ logN/ )/ ./ (/ 2/ )/ 准确度/ 对比/ 为/ 分析模型/ 对比/ 算法/ 的/ 实验/ 结果/ ,/ 借鉴/ 文献/ [/ 11/ ]/ 提出/ 的/ 实验/ 结果/ 评价/ 方法/ ,/ 设/ 两个/ 特征/ 模型/ 分别/ 为/ M1/ 和/ M2/ ,/ 其中/ ,/ 期望/ 的/ 模型/ 对比/ 结果/ 表示/ 为/ Me/ =/ 〈/ f1/ ,/ f2/ ,/ changetype/ 〉/ ,/ 实际/ 的/ 模型/ 对比/ 结果/ 表示/ 为/ Mr/ =/ 〈/ f1/ ,/ f2/ ,/ changetype/ 〉/ ,/ 其中/ f1/ 是/ M1/ 中/ 的/ 特征/ ,/ 对应/ 的/ M2/ 中/ 的/ 特征/ 是/ f2/ ,/ changetype/ 表示/ 对应/ 的/ 变更/ 类型/ ./ 利用/ 准确率/ 和/ 召回/ 率/ 实现/ 模型/ 对比/ 的/ 评价/ ,/ 准确率/ 和/ 召回/ 率/ 的/ 计算公式/ 分别/ 为/ :/ 准确率/ 的/ 计算公式/ 为/ Mr/ ∩/ Me/ // Mr/ ;/ 召回/ 率/ 的/ 计算公式/ 为/ Mr/ ∩/ Me/ // Me/ ./ 表/ 4/ 为/ 本文/ 提出/ 的/ 方法/ 在/ 4/ 组/ 实验/ 数据/ 集中/ 的/ 实验/ 结果/ ,/ 模型/ 对比/ 实验/ 结果/ 较/ 好/ 的/ 原因/ 是/ 用于/ 模型/ 对比/ 的/ 特征/ 模型/ 中/ 都/ 没有/ 命名/ 差异/ ./ 数据/ 集/ (/ 3/ )/ 不同/ 方法/ 的/ 对比/ 将/ 本文/ 提出/ 的/ 方法/ 与/ 其余/ 的/ 3/ 种/ 方法/ 进行/ 对比/ ,/ 分别/ 是/ GenericDiff/ [/ 8/ ]/ 、/ SiDiff/ ①/ 和/ TReMer/ +/ [/ 17/ ]/ ./ 其中/ ,/ GenericDiff/ 基于/ 类型/ 属性/ 图/ 实现/ 模型/ 的/ 匹配/ ,/ 但是/ 并/ 没有/ 实现/ 模型/ 的/ 组合/ 方法/ ./ SiDiff/ 基于/ 模型/ 元素/ 的/ 匹配/ 实现/ 模型/ 对比/ ,/ 模型/ 的/ 位置/ 改变/ 也/ 考虑/ 在内/ ./ TReMer/ +/ 实现/ 可变/ 的/ 特征/ 规格/ 的/ 对比/ ./ 不同/ 方法/ 数据/ 集/ 准确率/ // %/ 召回/ 率/ // %/ GenericDiffSiDiffTReMer/ +/ 从表/ 4/ 和表/ 5/ 中/ 可以/ 看出/ ,/ 所有/ 的/ 模型/ 对比/ 方法/ 的/ 实验/ 结果/ 都/ 比较/ 好/ ,/ 这/ 是因为/ 对比/ 的/ 模型/ 之间/ 没有/ 复杂/ 的/ 约束/ 关系/ ./ 对于/ 实验/ 数据/ 集/ 2/ ,/ GenericDiff/ 和/ TReMer/ +/ 的/ 实验/ 效果/ 都/ 比/ 其它/ 实验/ 数据/ 集差/ ,/ 这/ 是因为/ 本文/ 提出/ 的/ 方法/ 能够/ 实现/ 具有/ 约束/ 关系/ 的/ 边/ 的/ 检测/ ,/ 而/ 其他/ 方法/ 都/ 没有/ 实现/ 此/ 功能/ ./ TReMer/ +/ 主要/ 用于/ 层次/ 状态机/ 模型/ 的/ 对比/ ,/ 因此/ 在/ 实现/ 特征/ 模型/ 对比/ 过程/ 中/ ,/ 错误率/ 比较/ 高/ ./ 4.3/ 模型/ 组合/ 实验/ 模型/ 对比/ 完成/ 后/ ,/ 利用/ 模型/ 组合/ 算法/ 实现/ 模型/ 的/ 组合/ ,/ 本文/ 对模型/ 组合/ 的/ 时间/ 复杂度/ 进行/ 评价/ ./ 在/ 模型/ 组合/ 过程/ 中/ ,/ 待/ 组合/ 的/ 节点/ 根据/ 模型/ 对比/ 的/ 结果/ 确定/ ./ 因此/ ,/ 设/ 两个/ 模型/ 具有/ 差异/ 的/ 节点/ 个数/ 为/ 常数/ K/ ,/ 节点/ 个数/ 为/ N/ ,/ 在/ 组合/ 过程/ 中/ ,/ 需要/ 遍历/ 图/ 寻找/ 待/ 组合/ 节点/ 的/ 父/ 节点/ ,/ 该/ 分析/ 的/ 时间/ 复杂度/ 为/ O/ (/ K/ ×/ N/ ×/ logN/ )/ ./ 在/ 模型/ 组合/ 过程/ 中/ ,/ 基于/ 约束/ 规则/ 的/ 组合/ 算法/ 的/ 时间/ 复杂度/ 为/ O/ (/ N2/ )/ ./ 对/ 实验/ 数据/ 集中/ 的/ 第/ 5/ 至/ 7/ 组/ 数据/ (/ 表/ 3/ )/ ,/ 利用/ 本文/ 的/ 模型/ 组合/ 算法/ 进行/ 实验/ ,/ 并/ 对于/ 时间/ 效率/ 进行/ 对比/ ,/ 如图/ 6/ 所示/ ./ 其中/ ,/ 横轴/ 为/ 两个/ 模型/ 中/ 匹配/ 的/ 模型/ 元素/ 数目/ ,/ 纵轴/ 为/ 模型/ 组合/ 的/ 执行/ 时间/ ,/ 单/ ①/ SiDiffprojectwebsite/ [/ EB/ // OL/ ]/ ./ http/ :/ // // pi/ ./ informatik/ ./ Page11/ 位为/ ms/ ./ 3/ 个/ 特征/ 模型/ 的/ 模型/ 规模/ ,/ 即/ 包含/ 的/ 特征/ 数目/ 分别/ 为/ 60/ ,/ 88/ ,/ 168/ ./ 从图/ 6/ 可以/ 看出/ ,/ 随着/ 特征/ 模型/ 的/ 特征/ 数目/ 的/ 增加/ ,/ 所有/ 模型/ 的/ 组合/ 时间/ 都/ 缓慢/ 的/ 增加/ ,/ 这/ 与/ 时间/ 复杂度/ 分析/ 的/ 结果/ 一致/ ./ 当/ 模型/ 中/ 匹配/ 的/ 元素/ 数目/ 相同/ ,/ 规模/ 大/ 的/ 模型/ 的/ 时间/ 花费/ 比/ 规模/ 小/ 的/ 模型/ 的/ 时间/ 多/ ./ 5/ 结论/ 传统/ 的/ 软件产品/ 线/ 领域/ 需求/ 建模/ 方法/ 大都/ 依赖于/ 领域专家/ 的/ 分析/ ,/ 在/ 模型/ 比较复杂/ 或者/ 开发者/ 对于/ 模型/ 并/ 不/ 熟悉/ 的/ 情况/ 下/ ,/ 变化/ 性/ 分析/ 难以/ 手动/ 实现/ ./ 尤其/ 是/ 在/ 领域/ 内/ 的/ 模型/ 非常/ 庞大/ 或者/ 软件产品/ 线中/ 包含/ 非常/ 多/ 的/ 产品/ 数目/ 时/ ,/ 变化/ 性/ 分析/ 变得/ 非常/ 困难/ ./ 本文/ 提出/ 一种/ 基于/ 模型/ 对比/ 和/ 组合/ 的/ 领域/ 需求/ 建模/ 方法/ ,/ 实现/ 基于/ 属性/ 图/ 的/ 特征/ 模型/ 对比/ 方法/ ,/ 并/ 实现/ 基于/ 约束/ 规则/ 的/ 特征/ 模型/ 组合/ ./ 本文/ 提出/ 的/ 领域/ 需求/ 建模/ 方法/ 能够/ 在/ 一定/ 准确率/ 的/ 情况/ 下/ 有效/ 的/ 进行/ 领域/ 需求/ 模型/ 的/ 构建/ ./ 但是/ ,/ 本文/ 提出/ 的/ 模型/ 组合/ 方法/ ,/ 在/ 特征/ 模型/ 的/ 约束/ 关系/ 较为/ 复杂/ 的/ 情况/ 下/ ,/ 模型/ 组合/ 的/ 错误率/ 会/ 比较/ 高/ ,/ 本文/ 将/ 继续/ 对于/ 复杂/ 约束条件/ 下/ 的/ 模型/ 组合/ 技术/ 进行/ 深入/ 的/ 研究/ ./ 致谢/ 匿名/ 审稿人/ 对/ 本文/ 提出/ 的/ 宝贵/ 修改意见/ ,/ 在/ 此/ 表示感谢/ !/ 

