Page1/ 基于/ 网/ 结构/ 分解/ 的/ Petri/ 网/ 分散/ 监控器/ 设计/ 罗继亮/ 1/ )/ 王飞/ 1/ )/ 方慧娟/ 1/ )/ 缑锦/ 2/ )/ 1/ )/ (/ 华侨大学/ 信息科学/ 与/ 工程学院/ 福建厦门/ 361021/ )/ 2/ )/ (/ 华侨大学/ 计算机科学/ 与/ 技术/ 学院/ 福建厦门/ 361021/ )/ 摘要/ 不/ 可控/ 子网/ 的/ 复杂/ 结构/ 是/ 目前/ Petri/ 网/ 监控/ 难题/ 的/ 根源/ ,/ 该文/ 提出/ 了/ 控制/ 规范/ 等价/ 的/ 网/ 结构/ 分解/ 方法/ ,/ 将/ 对象/ 网/ 分解/ 为/ 多个/ 结构/ 简单/ 的/ 新网/ ,/ 并且/ 将/ 控制/ 规范/ 等价/ 转换/ 到/ 各/ 新/ 网上/ ,/ 从而/ 将/ 复杂/ 的/ 全局/ 控制/ 问题/ 分解/ 简化/ 为/ 多个/ 简单/ 的/ 局部/ 控制/ 问题/ ,/ 进而/ 采用/ 库所/ 不/ 变量/ 方法/ 设计/ 各/ 局部/ 最优/ Petri/ 网/ 监控器/ ,/ 实现/ 复杂/ 问题/ 分散控制/ ,/ 有效/ 地/ 降低/ 了/ Petri/ 网/ 控制/ 问题/ 的/ 计算/ 复杂性/ ./ 最后/ 以/ 一个/ 柔性制造系统/ 为例/ 验证/ 和/ 说明/ 了/ 上述/ 方法/ ./ 关键词/ Petri/ 网/ ;/ 离散/ 事件/ 系统/ ;/ 监控/ ;/ 禁止状态/ 1/ 引言/ 大部分/ 实际/ 系统/ 的/ 上层/ (/ 逻辑/ 层面/ )/ 均/ 可/ 抽象/ 为/ 离散/ 事件/ 系统/ ,/ 其/ 状态/ 空间/ 随着/ 子/ 单元/ 数/ 指数/ 级/ 增长/ ,/ 即/ “/ 状态/ 空间/ 爆炸/ ”/ ./ 而/ 实际/ 的/ 离散/ 事件/ 系统/ 往往/ 规模/ 庞大/ ,/ 比如/ 地铁/ 、/ 核电/ 和/ 柔性制造系统/ 等等/ ,/ 因此/ 确保/ 其/ 满足/ 顺序/ 、/ 联锁/ 和/ 安全/ 等/ 控制/ 规范/ 的/ 监控器/ 设计/ 非常复杂/ ./ 以/ 可编程/ 逻辑/ 控制器/ (/ PLC/ )/ 为例/ ,/ 其/ 程序/ 的/ 设计/ 和/ 调试/ 工作量/ 巨大/ ,/ 难于/ 获得/ 最优/ 的/ 监控器/ ,/ 且/ 容易/ 出现/ 程序/ 的/ 逻辑/ 错误/ ,/ 而/ 任何/ 程序/ 错误/ 在/ 核电/ 和/ 地铁/ 等/ 安全/ 关键/ 系统/ 中均/ 可/ 造成/ 严重事故/ ./ Iordache/ 和/ Antsaklis/ [/ 1/ ]/ 基于/ 网/ 结构/ 变换/ 将/ 广义/ 线性/ 约束/ 等价/ 转换/ 为/ 一般/ 线性/ 约束/ ,/ 而/ 广义/ 线性/ 约束/ 能够/ 描述/ 任意/ 语言/ 规范/ ,/ 包括/ 顺序/ 、/ 联锁/ 、/ 负荷/ 平衡/ 和/ 复杂/ 工艺/ 等等/ ./ 针对/ 线性/ 约束/ 问题/ ,/ 计算机/ 和/ 控制/ 学界/ 基于/ Petri/ 网/ 开展/ 了/ 监控/ 理论/ 的/ 研究/ ,/ 以/ Page2/ 期/ 获得/ 逻辑/ 监控器/ 设计/ 的/ 形式化/ 方法/ ,/ 从/ 理论/ 上/ 保证/ 监控器/ 的/ 正确性/ 和/ 最优性/ ,/ 已经/ 取得/ 了/ 一系列/ 重要/ 研究成果/ [/ 2/ -/ 3/ ]/ ./ 文献/ [/ 4/ ]/ 研究/ 了/ 制造/ 系统/ 的/ Petri/ 网/ 监控器/ 的/ 自动/ 重构/ 方法/ ./ Chen/ [/ 5/ ]/ 给出/ 了/ 基于/ 库所/ 递减/ 量/ 的/ 监控/ 方法/ ./ Moody/ 和/ Antsaklis/ [/ 6/ ]/ 给出/ 了/ 基于/ 线性代数/ 的/ 库/ 所/ 不/ 变量/ 设计/ 方法/ ./ Basile/ 等/ 人/ [/ 7/ ]/ 在/ 库/ 所/ 不/ 变量/ 方法/ 的/ 基础/ 上/ 引入/ 了/ 次优/ 监控器/ 的/ 设计/ 方法/ ./ 文献/ [/ 8/ ]/ 基于/ 局部/ 关联矩阵/ 提高/ 了/ 库/ 所/ 不/ 变量/ 方法/ 中/ 约束/ 的/ 计算/ 效率/ ./ 为了/ 得到/ 最优/ 监控器/ 设计/ 方法/ ,/ 研究者/ 们/ 将/ 问题/ 限定/ 在/ 一些/ 重要/ 的/ Petri/ 网子/ 类上/ ,/ 进而/ 借助/ 路径/ 代数/ 发展/ 监控/ 理论/ ,/ 包括/ 状态机/ [/ 9/ ]/ 、/ 事件/ 图/ [/ 10/ ]/ 、/ 后/ 向/ 无/ 冲突/ 自由选择/ 网/ [/ 11/ ]/ 和/ 前/ 向/ 无/ 同步网/ [/ 12/ ]/ (/ 关于/ Petri/ 网子/ 类/ 的/ 定义/ ,/ 请/ 参考文献/ [/ 12/ ]/ )/ ./ 针对/ 有界网/ ,/ 文献/ [/ 13/ ]/ 给出/ 了/ 基于/ 可达/ 图和域/ 理论/ 的/ 监控/ 方法/ ,/ 但/ 需求/ 解/ 线性/ 整数/ 规划/ ,/ 而且/ 监控/ 网/ 规模/ 呈/ 指数/ 级/ 增长/ ./ 文献/ [/ 14/ ]/ 利用/ 可达图/ 给出/ 了/ 一种/ 最优/ 监控/ 理论/ ,/ 但/ 应用/ 范围/ 限制/ 为/ 安全网/ 和/ 特殊/ 控制/ 规范/ ./ 文献/ [/ 15/ ]/ 针对性/ 地/ 提出/ 了/ 基于/ 网/ 结构/ 分解/ 的/ 监控/ 方法/ ,/ 提出/ 依据/ 在于/ :/ 网/ 结构/ 分解/ 已经/ 成功/ 应用/ 于/ Petri/ 网/ 行为/ 分析/ [/ 16/ ]/ ,/ 与其/ 类似/ 的/ 网/ 结构/ 压缩/ (/ 观测器/ )/ 技术/ 有效/ 地/ 减小/ 了/ 对象/ 网/ 的/ 规模/ [/ 17/ -/ 18/ ]/ ./ 但是/ ,/ 文献/ [/ 15/ ]/ 仅/ 研究/ 了/ 后/ 向/ 无/ 冲突/ 前/ 向/ 无/ 同步网/ 和/ 条件/ 约束/ (/ 权值/ 为/ 0/ 或/ 1/ 的/ 特殊/ 线性/ 约束/ )/ ./ 综上所述/ ,/ Petri/ 网/ 监控/ 问题/ 面临/ 计算/ 复杂性/ 难题/ ,/ 其/ 计算/ 复杂性/ 随网/ 规模/ 指数/ 级/ 增长/ ,/ 因此/ 现有/ 方法/ 均/ 无法/ 兼顾/ 效率/ 和/ 最优/ ./ 为了/ 降低/ 监控器/ 设计/ 的/ 计算/ 复杂性/ ,/ 本文/ 给出/ 了/ Petri/ 网/ 分散/ 监控器/ 设计/ 方法/ ,/ 将/ 复杂/ 网/ 分解/ 为/ 多个/ 简单/ 网/ ,/ 从而/ 将/ 全局/ 控制/ 问题/ 分解/ 为/ 各/ 简单/ 网上/ 的/ 局部/ 控制/ 问题/ ,/ 从而/ 将/ 复杂/ 的/ 全局/ 控制/ 问题/ 简化/ 为/ 多个/ 简单/ 的/ 局部/ 控制/ 问题/ ,/ 有效/ 地/ 降低/ 了/ Petri/ 网/ 监控/ 问题/ 的/ 计算/ 复杂性/ ./ 现有/ 的/ 最优/ 监控/ 方法/ [/ 9/ -/ 12/ ]/ 仅/ 适用/ 于/ 一些/ Petri/ 网子/ 类/ ,/ 而/ 本文/ 的/ 分散/ 监控/ 方法/ 能够/ 简化/ 对象/ 网/ ,/ 从而/ 能够/ 使得/ 一类/ 尚未/ 求解/ 的/ 监控/ 问题/ 的/ 最优/ 监控器/ 设计/ 成为/ 可能/ ./ 本文/ 分散/ 监控/ 方法/ 会/ 将/ 原始/ 控制/ 规范/ 分解/ 为/ 一组/ “/ 或/ ”/ 逻辑/ 的/ 局部/ 控制/ 问题/ ,/ 它/ 通常/ 对应/ 的/ 允许/ 状态/ 空间/ 非凸/ ,/ 超出/ 了/ 文献/ [/ 11/ -/ 12/ ]/ 中/ 最优/ 监控器/ 设计/ 的/ 适用范围/ ,/ 对/ 最优/ 监控器/ 的/ 存在/ 性/ 研究/ 具有/ 指导意义/ ./ 2/ 基本概念/ 2.1/ Petri/ 网/ Petri/ 网是/ 一个/ 三元组/ ,/ 记为/ N/ =/ (/ P/ ,/ T/ ,/ F/ )/ ,/ P/ 是/ 库/ 所集/ ;/ T/ 是/ 变迁/ 集/ ;/ F/ / (/ P/ ×/ T/ )/ ∪/ (/ T/ ×/ P/ )/ 是/ 一个/ 变迁/ 和/ 库/ 所/ 或库/ 所/ 和/ 变迁/ 组成/ 的/ 二元/ 组/ 的/ 集合/ ./ 一个/ 结点/ x/ 的/ 输入/ 集/ 和/ 输出/ 集/ 分别/ 表示/ 为/ ·/ x/ 和/ x/ ·/ ./ 标识/ 是/ 托肯/ 在/ 库/ 所/ 中/ 的/ 一个/ 分布/ ,/ 表示/ 为/ 一个/ 函数/ (/ 列/ 向量/ )/ m/ :/ P/ →/ Z/ ,/ 其中/ 第/ i/ 维/ 分量/ 表示/ 库所/ pi/ 含有/ 的/ 托/ 肯数/ ,/ 1/ / i/ / P/ ./ 设/ 珚/ P/ 是/ 库/ 所集/ P/ 的/ 一个/ 子集/ ,/ 那么/ 标识/ m/ 在/ 珚/ P/ 的/ 限制/ 是/ 一个/ 函数/ μ/ :/ 珚/ P/ →/ Ζ/ ,/ / p/ ∈/ 珚/ P/ ,/ μ/ (/ p/ )/ =/ m/ (/ p/ )/ ;/ 记/ 作/ μ/ =/ m/ 珚/ P/ ./ Petri/ 网/ 系统/ 记/ 作/ (/ N/ ,/ m0/ )/ ,/ 其中/ m0/ 为/ 初始/ 标识/ ./ 如果/ / p/ ∈/ ·/ t/ ,/ m/ (/ p/ )/ >/ 0/ ,/ 那么/ t/ 在/ 标识/ m/ 下/ 是/ 使/ 能/ 的/ ,/ 记作/ m/ [/ t/ >/ ./ 只有/ 使能/ 的/ 变迁/ 可以/ 发生/ ,/ 当/ 一个/ 变迁/ 发生/ 时/ ,/ 它/ 的/ 每个/ 输入/ 库所/ 减少/ 一个/ 托肯/ ,/ 每个/ 输出/ 库所中/ 增加/ 一个/ 托肯/ ./ R/ (/ N/ ,/ m/ )/ 指网/ N/ 从/ m/ 经过/ 任意/ 个/ 变迁/ 发生/ 到达/ 的/ (/ 可达/ 的/ )/ 全部/ 标识/ 的/ 集合/ ,/ Ru/ (/ N/ ,/ m/ )/ 指网/ N/ 从/ m/ 经过/ 任意/ 不/ 可控/ 变迁/ 的/ 到达/ (/ 不/ 可控/ 可达/ 的/ )/ 标识/ 的/ 集合/ ,/ 如果/ Petri/ 网在/ 上下文/ 中是/ 确定/ 的/ ,/ R/ (/ N/ ,/ m/ )/ 和/ Ru/ (/ N/ ,/ m/ )/ 通常/ 简写/ 为/ R/ (/ m/ )/ 和/ Ru/ (/ m/ )/ ./ 库所/ 和/ 变迁/ 交替/ 出现/ 并且/ 每个/ 结点/ 是/ 其/ 相邻/ 上游/ 结点/ 的/ 输出/ 的/ 序列/ 称为/ 路径/ ;/ 末/ 结点/ 是/ 首/ 结点/ 的/ 输入/ 的/ 路径/ 称为/ 回路/ ./ 由库/ 所/ 和/ 不/ 可控/ 变迁/ 组成/ 的/ 路径/ 称为/ 不/ 可控/ 路径/ ./ 路径/ π/ 的/ 末尾/ 结点/ 表示/ 为/ π/ / ./ 在/ 标识/ m/ 下/ 路径/ π/ 内托/ 肯数/ 表示/ 为/ m/ (/ π/ )/ ./ 2.2/ 允许/ 的/ 线性/ 约束/ 线性/ 约束/ (/ 广义/ 互斥/ 约束/ )/ 是/ 一个二元/ 组/ (/ w/ ,/ k/ )/ ,/ 其中/ w/ :/ P/ →/ 0/ ,/ 1/ ,/ 2/ {/ }/ ,/ …/ 是/ 库/ 所/ 的/ 权值/ 函数/ (/ 向量/ )/ ,/ k/ ∈/ Z/ 是/ 标识/ 加权/ 和/ 的/ 上界/ ,/ 权值/ 非/ 零/ 的/ 库/ 所/ 为/ 禁止/ 库所/ ./ 一个/ Petri/ 网/ 控制/ 问题/ 通常/ 是/ 如何/ 施加/ 控制/ 动作/ 使得/ 系统/ (/ N/ ,/ m0/ )/ 行为/ (/ 标识/ )/ 满足/ 线性/ 约束/ (/ w/ ,/ k/ )/ ,/ 记/ 作/ [/ (/ N/ ,/ m0/ )/ ,/ (/ w/ ,/ k/ )/ ]/ ./ 禁止/ 标识/ 集记作/ Mw/ ,/ k/ ·/ ·/ =/ {/ m/ ∈/ R/ (/ m0/ )/ |/ w/ ·/ m/ >/ k/ }/ ,/ 合法/ 标识/ 集为/ Lw/ ,/ k/ ·/ ·/ =/ {/ m/ ∈/ R/ (/ m0/ )/ |/ w/ ·/ m/ / k/ }/ ,/ 允许/ 标识/ 集为/ Aw/ ,/ k/ ·/ ·/ =/ {/ m/ ∈/ R/ (/ m0/ )/ |/ Ru/ (/ m/ )/ ∩/ Mw/ ,/ k/ =/ / }/ ./ 定义/ 1/ [/ 8/ ]/ ./ 给定/ 一个/ Petri/ 网/ 和/ 线性/ 约束/ ,/ 变迁/ 的/ 权值/ 函数/ 为/ / :/ T/ →/ Z/ ,/ 其中/ / t/ ∈/ T/ ,/ / (/ t/ )/ =/ ∑/ p/ ∈/ t/ ·/ w/ (/ p/ )/ -/ ∑/ p/ ∈/ ·/ tw/ (/ p/ )/ ./ 定义/ 2/ [/ 5/ ]/ ./ 对于/ 一个/ 线性/ 约束/ ,/ 如果/ 每个/ 变迁/ 的/ 权值/ 非正/ ,/ 那么/ 该/ 约束/ 称为/ 允许/ 的/ 线性/ 约束/ ,/ 简称/ 允许/ 约束/ ./ 不/ 可控/ 子网/ 是/ 删除/ 原网/ 内/ 的/ 全部/ 可控/ 变迁/ 后/ 得到/ 的/ 子网/ ./ 前/ 向/ 无/ 同步网/ 是/ 每个/ 变迁/ 最多/ 有/ 一个/ 输入/ 的/ 普通/ Petri/ 网/ ./ 如果/ :/ (/ 1/ )/ π/ 1/ =/ π/ π/ a/ ,/ π/ 2/ =/ π/ π/ b/ ;/ (/ 2/ )/ π/ a/ 和/ π/ b/ 的/ 首/ 结点/ 是/ 不同/ 的/ 变迁/ ,/ 那么/ π/ 1/ 和/ π/ 2/ 冲突/ [/ 8/ ]/ ./ 在/ 前/ 向/ 无/ 同步网/ 内/ (/ 为了/ 简便/ ,/ 设网/ 内/ 不/ 含/ 不/ Page3/ 可控/ 回路/ )/ ,/ 库所/ p/ 的/ 关键/ 路径/ 集/ Π/ c/ (/ p/ )/ 是/ 由/ 始自/ p/ 的/ 互不/ 冲突/ 的/ 路径/ 组成/ 的/ 集合/ ,/ 且/ 满足/ 其中/ Ξ/ p/ 是/ 一个/ 路径/ 集/ 的/ 集合/ ,/ 其/ 每个/ 元素/ 是/ 由/ 始自/ p/ 的/ 互不/ 冲突/ 的/ 路径/ 组成/ 的/ 集合/ [/ 8/ ]/ ./ 如果/ 在/ 网/ 系统/ (/ N/ ,/ m0/ )/ 上/ 施加/ 一个/ 允许/ 约束/ (/ w/ ,/ k/ )/ ,/ 采用/ 库所/ 不/ 变量/ 法/ 设计/ 的/ Petri/ 网/ 监控器/ 是/ 最优/ 的/ ,/ 其/ 设计/ 步骤/ 如下/ :/ (/ 1/ )/ 在/ 对象/ 网/ 内/ 添加/ 一个/ 监控/ 库所/ c/ ,/ 其/ 初始/ 标识/ 为/ m0/ (/ c/ )/ =/ k/ -/ w/ ·/ m0/ ;/ (/ 2/ )/ 对于/ 任意/ 变迁/ t/ ,/ 如果/ / (/ t/ )/ >/ 0/ ,/ 则/ 增加/ 从/ c/ 到/ t/ 的/ 有/ 向/ 弧/ ,/ 且/ 其/ 权值/ 为/ / (/ t/ )/ ;/ 如果/ / (/ t/ )/ </ 0/ ,/ 则/ 增加/ 从/ t/ 到/ c/ 的/ 有/ 向/ 弧/ ,/ 且/ 其/ 权值/ 为/ / (/ t/ )/ [/ 5/ ]/ ./ 3/ 网/ 结构/ 分解/ 方法/ 本节/ 将/ 介绍/ 前向/ 同步/ 结构/ 分解/ 算法/ ,/ 旨在/ 将/ 复杂/ Petri/ 网/ 控制/ 问题/ 等价/ 简化/ 或者/ 分解成/ 多个/ 简单/ 的/ 局部/ 控制/ 问题/ ./ 定义/ 3/ ./ 如果/ 变迁/ t/ 有/ 多个/ 输入/ 库所/ ,/ 那么/ 它/ 与其/ 输入/ 库所/ 组成/ 了/ 一个/ 前向/ 同步/ 结构/ ./ 引理/ 1/ ./ 给定/ 一个/ Petri/ 网/ 系统/ (/ N/ ,/ m0/ )/ ,/ 其中/ p1/ 、/ p2/ 和/ t/ 组成/ 了/ 一个/ 前向/ 同步/ 结构/ ,/ 删除/ N/ 内/ 的/ 从/ p2/ 到/ t/ 的/ 有/ 向/ 弧/ 得到/ 新网/ 珡/ N/ ,/ 珡/ Nt/ 是/ 删除/ 珡/ N/ 内/ 所有/ 没有/ 路径/ 与/ t/ 相连/ 的/ 结点/ 的/ 新网/ ,/ 设/ 珡/ Nt/ 的/ 库/ 所集/ 为/ 珚/ Pt/ ,/ 它/ 的/ 初始/ 标识/ 为/ μ/ 0/ =/ m0/ 珚/ Pt/ ./ 如果/ 网/ 系统/ (/ 珡/ Nt/ ,/ μ/ 0/ )/ 是/ 活/ 的/ ,/ 设/ 删除/ N/ 内/ 从/ p1/ 到/ t/ 的/ 有/ 向/ 弧/ 得到/ 新网/ 珦/ N/ ,/ 珦/ N/ 的/ 库/ 所/ 集为/ 珟/ P/ ,/ 那么/ 删除/ p1/ 对应/ 的/ 状态/ 维数/ 后/ (/ N/ ,/ m0/ )/ 与/ (/ 珦/ N/ ,/ m0/ 珟/ P/ )/ 的/ 状态/ 空间/ 相同/ ./ 证明/ ./ 在/ 系统/ (/ N/ ,/ m0/ )/ 中/ ,/ 可能/ 会/ 限制/ t/ 激发/ 的/ 是/ 珡/ Nt/ 和/ p2/ 及/ 与/ 之/ 通过/ 路径/ 相连/ 的/ 结点/ ,/ 如果/ (/ 珡/ Nt/ ,/ μ/ 0/ )/ 是/ 活/ 的/ ,/ 那么/ p1/ 总能/ 被/ 标识/ ,/ 因此/ p1/ 不会/ 限制/ t/ 发生/ ,/ 而/ t/ 是/ p1/ 的/ 唯一/ 输出/ ,/ 因此/ 割断/ 从/ p1/ 到/ t/ 的/ 有/ 向/ 弧/ 不会/ 影响/ 任何/ 变迁/ 的/ 发生/ ,/ 唯一/ 的/ 影响/ 是/ p1/ 标识/ 没有/ 随/ t/ 的/ 发生/ 而/ 减少/ ,/ 因此/ 去除/ p1/ 对应/ 的/ 状态/ 维数/ 后/ (/ N/ ,/ m0/ )/ 与/ (/ 珦/ N/ ,/ m0/ 珟/ P/ )/ 的/ 状态/ 空间/ 相同/ ./ 由/ 引理/ 1/ 可知/ ,/ 同步/ 结构/ 分解/ 在/ 一定/ 程度/ 上/ 维持/ 了/ 系统/ 行为/ 的/ 不变性/ ,/ 而/ 该/ 不变性/ 正是/ 分解/ 网/ 结构/ 以/ 简化/ 控制/ 问题/ 的/ 根据/ ./ 下面/ 由/ 引理/ 1/ 给出/ 控制/ 问题/ 的/ 等价/ 简化/ 定理/ ./ 定义/ 4/ ./ 如果/ p/ 是/ t/ 的/ 输入/ 库所/ ,/ 并且/ 它/ 和/ t/ 的/ 其他/ 输入/ 库所/ 构成/ 的/ 前/ 向/ 同步/ 结构/ 满足/ 下列/ 条件/ ,/ 则/ 称/ 其/ 为/ I/ 型/ 同步/ 结构/ :/ (/ 1/ )/ t/ 是/ 不/ 可控/ 变迁/ ,/ w/ (/ p/ )/ =/ 0/ ;/ (/ 2/ )/ 在/ 原网/ N/ 内/ 删除/ p/ 之外/ 的/ t/ 的/ 其他/ 输入/ 库所/ ,/ 得到/ 新网/ 珡/ N/ ,/ 删除/ 珡/ N/ 内/ 全部/ 没有/ 路径/ 与/ t/ 相连/ 的/ 结点/ 后/ 的/ 新网/ 珡/ Nt/ ,/ 设/ 珡/ Nt/ 的/ 库/ 所集/ 为/ 珚/ Pt/ ,/ 它/ 的/ 初始/ 标识/ 为/ μ/ 0/ =/ m0/ 珚/ Pt/ ./ 没有/ 可控/ 变迁/ 是/ 珡/ Nt/ 内/ 任何/ 库所/ 的/ 输出/ ,/ 且/ 网/ 系统/ (/ 珡/ Nt/ ,/ μ/ 0/ )/ 是/ 活/ 的/ ./ 定理/ 1/ ./ 给定/ 一个/ 离散/ 事件/ 系统/ ,/ 其/ Petri/ 网/ 模型/ 为/ (/ N/ ,/ m0/ )/ ,/ 要/ 施加/ 的/ 线性/ 约束/ 是/ (/ w/ ,/ k/ )/ ,/ 如果/ p/ 和/ t/ 的/ 其他/ 输入/ 库所/ 组成/ 了/ I/ 型/ 同步/ 结构/ ,/ 珡/ N/ 是/ 割断/ N/ 内/ 从/ p/ 到/ t/ 的/ 有/ 向/ 弧后/ 得到/ 的/ 新网/ ,/ 那么/ [/ (/ N/ ,/ m0/ )/ ,/ (/ w/ ,/ k/ )/ ]/ 等价/ 于/ [/ (/ 珡/ N/ ,/ m0/ )/ ,/ (/ w/ ,/ k/ )/ ]/ ./ 证明/ ./ 由/ 定义/ 4/ 可知/ ,/ 珡/ Nt/ 内/ 的/ 任何/ 库所/ 的/ 输出/ 都/ 不是/ 可控/ 变迁/ ,/ 因此/ 可控/ 变迁/ 的/ 激发/ 不会/ 减少/ 珡/ Nt/ 内/ 的/ 托肯/ ,/ 而/ (/ 珡/ Nt/ ,/ μ/ 0/ )/ 是/ 活/ 的/ ,/ 那么/ 无论/ (/ N/ ,/ m0/ )/ 到达/ 哪个/ 状态/ ,/ 珡/ Nt/ 在/ 该/ 状态/ 下/ 都/ 是/ 活/ 的/ ./ 因此/ 根据/ 引理/ 1/ ,/ 对于/ 任何/ 可/ 达/ 状态/ m/ ,/ 删除/ p/ 对应/ 的/ 状态/ 维后/ (/ N/ ,/ m/ )/ 和/ (/ 珡/ N/ ,/ m/ )/ 的/ 不/ 可控/ 可达/ 的/ 状态/ 空间/ 是/ 相同/ 的/ ,/ 而/ p/ 的/ 权值/ 为/ 0/ ,/ 因此/ 删除/ p/ 对应/ 的/ 状态/ 维后/ (/ N/ ,/ m0/ )/ 和/ (/ w/ ,/ k/ )/ 对应/ 的/ 允许/ 状态/ 空间/ 与/ (/ 珡/ N/ ,/ m0/ )/ 和/ (/ w/ ,/ k/ )/ 相同/ ,/ 因此/ 两个/ 控制/ 问题/ 等价/ ./ 证毕/ ./ 算法/ 2/ ./ II/ 型/ 同步/ 结构/ 分解/ ./ 输入/ :/ [/ (/ N/ ,/ m0/ )/ ,/ (/ w/ ,/ k/ )/ ]/ 输出/ :/ [/ (/ 珡/ N/ ,/ m0/ )/ ,/ (/ w/ ,/ k/ )/ ]/ 1/ ./ 珡/ N/ ←/ N/ ,/ P/ ←/ P/ ;/ 算法/ 1/ ./ I/ 型/ 同步/ 结构/ 分解/ ./ 输入/ :/ [/ (/ N/ ,/ m0/ )/ ,/ (/ w/ ,/ k/ )/ ]/ 输出/ :/ [/ (/ 珡/ N/ ,/ m0/ )/ ,/ (/ w/ ,/ k/ )/ ]/ 1/ ./ 珡/ N/ ←/ N/ ,/ P/ ←/ P/ ;/ 2/ ./ 从/ P/ 中/ 任意/ 选择/ 一个/ 库所/ p/ ;/ 3/ ./ 对于/ 系统/ (/ N/ ,/ m0/ )/ 和/ (/ w/ ,/ k/ )/ ,/ 判断/ p/ 是否/ 和/ 一个/ 变迁/ t/ 的/ 其他/ 输入/ 库所/ 组成/ I/ 型/ 同步/ 结构/ ,/ 如果/ 是/ ,/ 执行/ 下/ 一步/ ;/ 如果/ 否/ ,/ P/ ←/ P/ -/ {/ p/ }/ ,/ 执行/ 步/ 2/ ;/ 4/ ./ 删除/ 珡/ N/ 内/ 从/ p/ 指向/ t/ 的/ 有/ 向/ 弧/ ,/ 得到/ 新网/ N/ ;/ 5/ ./ 珡/ N/ ←/ N/ ,/ P/ ←/ P/ -/ {/ p/ }/ ;/ 6/ ./ 如果/ P/ ≠/ / ,/ 执行/ 步/ 2/ ./ 算法/ 1/ 是/ 基于/ 网/ 结构/ 分解/ 的/ 控制/ 问题/ 等价/ 简化/ 算法/ ,/ 任务/ 是/ 分解/ 网/ 内/ 全部/ 的/ I/ 型/ 同步/ 结构/ ,/ 降低/ 监控器/ 设计/ 的/ 计算/ 复杂性/ ./ 因为/ 它/ 是/ 根据/ 定理/ 1/ 直接/ 设计/ 的/ ,/ 其/ 等价/ 性/ 的/ 证明/ 不再/ 赘述/ ./ 定义/ 5/ ./ p/ 和/ t/ 的/ 其他/ 输入/ 库所/ 组成/ 了/ 一个/ 前向/ 同步/ 结构/ ,/ 如果/ 满足/ 下列/ 条件/ ,/ 那么/ 它/ 称为/ II/ 型/ 同步/ 结构/ :/ (/ 1/ )/ t/ 是/ 不/ 可控/ 变迁/ ,/ w/ (/ p/ )/ =/ 0/ ;/ (/ 2/ )/ 存在/ 一个/ 包含/ p/ 和/ t/ 的/ 不/ 可控/ 环/ c/ ,/ 该/ 环内/ 每个/ 库所/ 只有/ 一个/ 输出/ 变迁/ ,/ 除/ t/ 外/ 的/ 变迁/ 均/ 只有/ 一个/ 输入/ 库所/ ,/ 并且/ m0/ (/ c/ )/ >/ 0/ ./ Page42/ ./ 从/ P/ 中/ 任意/ 选择/ 一个/ 库所/ p/ ;/ 3/ ./ 对于/ (/ N/ ,/ m0/ )/ 和/ (/ w/ ,/ k/ )/ ,/ 判断/ p/ 是否/ 存在/ 于/ 包含/ 不/ 可控/ 变迁/ t/ 的/ II/ 型/ 同步/ 结构/ ,/ 如果/ 是/ ,/ 执行/ 下/ 一步/ ;/ 否则/ ,/ 珡/ N/ ←/ N/ ,/ 算法/ 结束/ ;/ 4/ ./ 在/ N/ 内/ 割断/ 从/ p/ 指向/ t/ 的/ 有/ 向/ 弧/ ,/ 从而/ 得到/ 新网/ 珡/ N/ ;/ 5/ ./ N/ ←/ 珡/ N/ ,/ 返回/ 并/ 执行/ 步/ 3/ ;/ 6/ ./ 如果/ P/ ≠/ / ,/ 执行/ 步/ 2/ ./ 定理/ 2/ ./ 如果/ 将/ (/ N/ ,/ m0/ )/ 和/ (/ w/ ,/ k/ )/ 输入/ 算法/ 2/ 得到/ 的/ 输出/ 是/ 新网/ 珡/ N/ ,/ 那么/ 对于/ 离散/ 事件/ 系统/ ,/ 控制/ 问题/ (/ N/ ,/ m0/ )/ 和/ (/ w/ ,/ k/ )/ 等价/ 于/ (/ 珡/ N/ ,/ m0/ )/ 和/ (/ w/ ,/ k/ )/ ./ 证明/ ./ 因为/ p/ 和/ t/ 的/ 其他/ 输入/ 库所/ 组成/ 了/ II/ 型/ 同步/ 结构/ ,/ 根据/ 定义/ 5/ ,/ p/ 和/ t/ 存在/ 于/ 不可/ 环/ c/ 内/ ./ 因为/ 环内/ 的/ 每个/ 库所/ 只有/ 输入/ 变迁/ ,/ 因此/ 环内/ 每个/ 库所/ 的/ 输出/ 变迁/ 也/ 是/ 环内/ 某库/ 所/ 的/ 输入/ 变迁/ ,/ 因此/ 环内/ 的/ 托/ 肯数/ 不会/ 减少/ ,/ 又/ 因为/ 初始/ 标识/ 下环/ 是/ 被/ 标识/ 的/ ,/ 所以/ 该环/ 始终/ 是/ 被/ 标识/ 的/ ./ 而/ 在/ 该/ 环内/ 只有/ 变迁/ t/ 处于/ 一个/ 同步/ 结构/ ,/ 因此/ p/ 总能/ 不/ 可控/ 地/ 获得/ c/ 内/ 的/ 托肯/ ,/ 也就是说/ ,/ 在/ 系统/ 由/ 不/ 可控/ 变迁/ 驱动/ 的/ 系统/ 行为/ 中/ ,/ t/ 的/ 发生/ 不受/ p/ 的/ 控制/ ,/ 因此/ 删除/ p/ 对应/ 的/ 状态/ 维后/ ,/ 新/ 系统/ (/ 珡/ N/ ,/ m0/ )/ 与/ 原/ 系统/ (/ N/ ,/ m0/ )/ 的/ 状态/ 空间/ 相同/ ,/ 并且/ 由于/ w/ (/ p/ )/ =/ 0/ ,/ 在/ 这/ 两个/ 系统/ 上/ 施加/ 线性/ 约束/ (/ w/ ,/ k/ )/ 得到/ 的/ 受控系统/ 的/ 状态/ 空间/ 也/ 相同/ ,/ 所以/ 算法/ 2/ 的/ 输入/ 和/ 输出/ 对应/ 的/ 两个/ 控制/ 问题/ 等价/ ./ 构/ ,/ 下面/ 考虑/ 无环/ 的/ 前/ 向/ 同步/ 结构/ 的/ 分解/ 方法/ ./ 件/ ,/ 则/ 称/ 其/ 为/ III/ 型/ 同步/ 结构/ :/ 算法/ 1/ 和/ 算法/ 2/ 是/ 分解/ 涉及/ 不/ 可控/ 环/ 的/ 同步/ 结/ 定义/ 6/ ./ 如果/ 变迁/ t/ 和/ 其/ 输入/ 库所/ 满足/ 下列/ 条/ (/ 1/ )/ t/ 的/ 输入/ 库所/ 的/ 权值/ 均/ 为/ 0/ ;/ (/ 2/ )/ t/ 的/ 任意/ 输入/ 库所/ 最多/ 只有/ 一个/ 输出/ 变迁/ ,/ (/ 3/ )/ t/ 的/ 输入/ 库所/ 不/ 存在/ 于/ 任何/ 不/ 可控/ 环内/ ./ 算法/ 3/ ./ III/ 型/ 同步/ 结构/ 分解/ ./ 输入/ :/ [/ (/ 珡/ N/ ,/ m0/ )/ ,/ (/ w/ ,/ k/ )/ ]/ 输出/ :/ 局部/ 控制/ 问题/ Ω/ ·/ ·/ =/ {/ [/ (/ 珡/ N1/ ,/ μ/ 01/ )/ ,/ (/ 珡/ w1/ ,/ k/ )/ ]/ ,/ …/ ,/ 1/ ./ Ω/ ←/ / ,/ T/ ←/ T/ ;/ 2/ ./ [/ (/ 珡/ N1/ ,/ μ/ 01/ )/ ,/ (/ 珡/ w1/ ,/ k/ )/ ]/ ←/ [/ (/ N/ ,/ m0/ )/ ,/ (/ w/ ,/ k/ )/ ]/ ,/ Ω/ ←/ 3/ ./ 从/ T/ 中/ 任意/ 选择/ 一个/ 变迁/ t/ ;/ 4/ ./ Ω/ ←/ / ,/ H/ ←/ 1/ ,/ h/ ←/ 1/ ;/ 5/ ./ 对于/ [/ (/ 珡/ Nh/ ,/ μ/ 0h/ )/ ,/ (/ 珡/ wh/ ,/ k/ )/ ]/ ∈/ Ω/ ,/ 如果/ t/ 与其/ 输入/ 库所/ 组成/ III/ 型/ 同步/ 结构/ ,/ P/ ←/ ·/ t/ ,/ 执行/ 下/ 一步/ ;/ 否则/ ,/ Ω/ ←/ Ω/ ∪/ {/ [/ (/ 珡/ NH/ ,/ μ/ 0H/ )/ ,/ (/ 珡/ wH/ ,/ k/ )/ ]/ }/ ,/ h/ ←/ h/ +/ 1/ ,/ H/ ←/ H/ +/ 1/ ,/ 执行/ 步/ 5/ ;/ 6/ ./ 从/ P/ 中/ 选择/ 一个/ 库所/ p/ ,/ H/ ←/ H/ +/ 1/ ;/ 7/ ./ 在/ 珡/ Nh/ 内/ ,/ 割断/ 除/ p/ 之外/ 其他/ 库所/ 指向/ t/ 的/ 有/ 向/ 弧/ ,/ 且/ 该/ 变迁/ 不/ 可控/ ;/ [/ (/ 珡/ N1/ ,/ μ/ 01/ )/ ,/ (/ 珡/ w1/ ,/ k/ {/ 从而/ 得到/ 新网/ 珡/ NH/ ,/ 设其库/ 所集/ 为/ 珚/ PH/ ,/ μ/ 0H/ ←/ m0/ 珚/ PH/ ,/ 珡/ wH/ ←/ w/ 珚/ PH/ ;/ 8/ ./ Ω/ ←/ Ω/ ∪/ {/ [/ (/ 珡/ NH/ ,/ μ/ 0H/ )/ ,/ (/ 珡/ wH/ ,/ k/ )/ ]/ }/ ,/ P/ ←/ P/ -/ {/ p/ }/ ;/ 9/ ./ 如果/ P/ ≠/ / ,/ 则/ 执行/ 步/ 6/ ;/ 10/ ./ 如果/ h/ / H/ -/ 1/ ,/ h/ ←/ h/ +/ 1/ ,/ 并且/ 执行/ 步/ 5/ ;/ 11/ ./ T/ ←/ T/ -/ {/ t/ }/ ,/ Ω/ ←/ Ω/ ;/ 12/ ./ 如果/ T/ ≠/ / ,/ H/ ←/ H/ ,/ 并且/ 执行/ 步/ 3/ ./ 算法/ 3/ 是/ 对/ 网/ 系统/ 内/ 的/ 全部/ III/ 型/ 同步/ 结构/ 的/ 逐个/ 分解/ ,/ 具体/ 分解/ 规则/ 见步/ 7/ ,/ 得到/ 的/ 新/ 控制/ 问题/ 的/ 数量/ 与/ III/ 型/ 同步/ 结构/ 数/ 成正比/ ./ 为了/ 证明/ 原/ 控制/ 问题/ 与/ 得到/ 一组/ 新/ 控制/ 问题/ 的/ 逻辑/ “/ 或/ ”/ 等价/ ,/ 我们/ 首先/ 给出/ 引理/ 2/ ./ 引理/ 2/ ./ 给定/ 一个/ Petri/ 网/ 系统/ (/ N/ ,/ m0/ )/ 和/ 其/ 约束/ (/ w/ ,/ k/ )/ ,/ 其中/ t/ 与其/ 仅/ 有/ 的/ 两个/ 输入/ 库所/ p1/ 和/ p2/ 成/ III/ 型/ 同步/ 结构/ ,/ 从/ N/ 内/ 删除/ p1/ 得到/ 新网/ 珡/ N1/ ,/ 从/ N/ 内/ 删除/ p2/ 得到/ 新网/ 珡/ N2/ ,/ p/ -/ 网/ 的/ 库/ 所集/ ,/ μ/ 01/ =/ m0/ 珚/ P1/ ,/ μ/ 02/ =/ m0/ 珚/ P2/ ,/ 珡/ w1/ =/ w/ 珚/ P1/ ,/ 珡/ w2/ =/ w/ 珚/ P2/ ,/ 那么/ 原/ 控制/ 问题/ 等价/ [/ (/ 珡/ N1/ ,/ μ/ 01/ )/ ,/ (/ 珡/ w1/ ,/ k/ )/ ]/ 和/ [/ (/ 珡/ N2/ ,/ μ/ 02/ )/ ,/ (/ 珡/ w2/ ,/ k/ )/ ]/ 的/ “/ 或/ ”/ 逻辑/ ./ 证明/ ./ 根据/ 定义/ 6/ ,/ t/ 是/ p1/ 和/ p2/ 的/ 唯一/ 输出/ 变迁/ ,/ 并且/ t/ 不/ 可控/ ./ p1/ 和/ p2/ 内/ 的/ 托肯/ 只能/ 通过/ t/ 不/ 可控/ 地/ 进入/ 网/ 内/ 下游/ 的/ 禁止/ 库所/ ,/ 而且/ 从/ 任何/ 标识/ 开始/ ,/ t/ 的/ 最大/ 不/ 可控/ 激发/ 数/ 等于/ 两个/ 库所/ 能够/ 不/ 可控/ 地/ 获得/ 的/ 托/ 肯数/ 的/ 较/ 小者/ ,/ 因此/ / m/ ,/ maxm/ ∈/ Ru/ (/ N/ ,/ m/ )/ w/ ·/ m/ =/ minmax/ 由此可知/ / m/ ,/ 其中/ μ/ 1/ =/ m/ 珚/ P1/ ,/ μ/ 2/ =/ m/ 珚/ P2/ ./ maxm/ ∈/ Ru/ (/ N/ ,/ m/ )/ w/ ·/ m/ / k/ / μ/ 1/ ∈/ Ru/ (/ 珡/ N1/ ,/ μ/ 1/ )/ 珡/ w1/ ·/ μ/ 1/ / k/ ∨/ maxmax/ 因为/ 珡/ N1/ 和/ 珡/ N2/ 中/ 变迁/ t/ 只有/ 一个/ 输入/ 库所/ ,/ 限制/ 它/ 发生/ 的/ 输入/ 库所比/ 原网/ 减少/ 了/ ,/ 因此/ / m/ ,/ 其中/ P/ =/ P/ -/ p1/ ,/ p/ {/ }/ 2/ ./ 实际/ 系统/ 的/ 状态/ 空间/ 是/ 确定/ 的/ ,/ 根据/ 式/ (/ 2/ )/ 和/ 式/ (/ 3/ )/ 可知/ ,/ 原/ 控制/ 问题/ 的/ 允许/ 状态/ 空间/ 与/ 两个/ 新/ 问题/ 的/ 允许/ 状态/ 空间/ 的/ 和/ 相等/ ,/ 因此/ 原/ 控制/ 问题/ 等价/ 与/ 两个/ 新/ 控制/ 问题/ 的/ “/ 或/ ”/ 逻辑/ ./ 定理/ 3/ ./ 将/ (/ N/ ,/ m0/ )/ 和/ (/ w/ ,/ k/ )/ 输入/ 算法/ 3/ ,/ 得到/ Ω/ ·/ ·/ =/ {/ [/ (/ 珡/ N1/ ,/ μ/ 01/ )/ ,/ (/ 珡/ w1/ ,/ k/ )/ ]/ ,/ …/ ,/ [/ (/ 珡/ NH/ ,/ μ/ 0H/ )/ ,/ (/ 珡/ wH/ ,/ k/ )/ ]/ }/ ,/ H/ ∈/ Z/ +/ ,/ 那么/ 原/ 控制/ 问题/ 等价/ 于/ Ω/ 内/ 各/ 新/ 控制/ 问题/ 的/ “/ 或/ ”/ 逻辑/ ./ Page5/ 证明/ ./ 在/ 算法/ 3/ 中/ ,/ 网/ 结构/ 的/ 分解/ 操作/ 在步/ 7/ 执行/ ,/ 割断/ 某个/ III/ 型/ 同步/ 结构/ 内库/ 所/ p/ 之外/ 的/ 其他/ 库所/ 指向/ 变迁/ 的/ 有/ 向/ 弧/ ,/ 因此/ 如果/ 一个/ 同步/ 结构/ 含有/ x/ 个库/ 所/ ,/ 那么/ 就/ 会/ 分解/ 出/ x/ 个/ 新网/ ,/ 即/ x/ 个/ 新/ 控制/ 问题/ ,/ 根据/ 引理/ 2/ ,/ 这/ x/ 个/ 新/ 问题/ 的/ “/ 或/ ”/ 逻辑/ 等价/ 于原/ 问题/ ,/ 因此/ 原/ 控制/ 问题/ 等价/ 于/ Ω/ 内/ 各/ 新/ 控制/ 问题/ 的/ “/ 或/ ”/ 逻辑/ ./ 4Petri/ 网/ 分散/ 监控器/ 设计/ 实际上/ 对象/ 网/ 内/ 很多/ 结点/ 对于/ 监控器/ 设计/ 来说/ 是/ 冗余/ 的/ ,/ 特别/ 是/ 在/ 引入/ 网/ 结构/ 分解/ 算法/ 以后/ ,/ 很多/ 结点/ 与/ 禁止/ 库所/ 之间/ 的/ 路径/ 被/ 割断/ ,/ 从而/ 成为/ 冗余/ 结点/ ,/ 因此/ 删除/ 这些/ 冗余/ 结点/ ,/ 将/ 全局/ 控制/ 问题/ 局部/ 化/ ,/ 从而/ 降低/ 控制/ 问题/ 的/ 计算/ 复杂性/ ./ 算法/ 4/ ./ 网/ 结构/ 删减/ 算法/ ./ 输入/ :/ [/ (/ N/ ,/ m0/ )/ ,/ (/ w/ ,/ k/ )/ ]/ 输出/ :/ [/ (/ 珦/ N/ ,/ 珦/ m0/ )/ ,/ (/ 珦/ w/ ,/ k/ )/ ]/ 1/ ./ 珦/ N/ ←/ N/ ,/ 珟/ T/ ←/ T/ ,/ P/ ←/ P/ ;/ 2/ ./ 从/ 珟/ T/ 中/ 任意/ 选择/ 一个/ 变迁/ t/ ;/ 3/ ./ 在/ 珦/ N/ 中/ ,/ 如果/ 存在/ 从/ t/ 的/ 任意/ 输出/ 库所/ 或/ 输入/ 库所到/ 任意/ 禁止/ 库所/ 的/ 不/ 可控/ 路径/ ,/ 则/ 执行/ 下/ 一步/ ;/ 否则/ ,/ 删去/ 变迁/ t/ ,/ 得到/ 的/ 新/ 网为/ N/ ,/ 珦/ N/ ←/ N/ ;/ 4/ ./ 珟/ T/ ←/ 珟/ T/ -/ {/ t/ }/ ;/ 5/ ./ 如果/ 珟/ T/ ≠/ / ,/ 执行/ 步/ 2/ ;/ 6/ ./ 从/ P/ 中/ 任意/ 选择/ 一个/ 库所/ p/ ;/ 7/ ./ 如果/ 在/ 珦/ N/ 中/ p/ ·/ =/ / ,/ 并且/ w/ (/ p/ )/ =/ 0/ ,/ 则/ 删除/ 库所/ p/ ,/ 8/ ./ P/ ←/ P/ -/ {/ p/ }/ ;/ 9/ ./ 如果/ 珟/ P/ ≠/ / ,/ 执行/ 步/ 6/ ;/ 10/ ./ 珦/ m0/ =/ m0/ 珟/ P/ ,/ 珦/ w/ =/ w/ 珟/ P/ ./ 算法/ 4/ 删除/ 的/ 结点/ 均/ 没有/ 不/ 可控/ 路径/ 连向权/ 值得/ 到/ 新网/ N/ ,/ 珦/ N/ ←/ N/ ,/ 珟/ P/ ←/ 珟/ P/ -/ {/ p/ }/ ;/ 图/ 1/ 柔性制造系统/ 单元/ 的/ Petri/ 网/ 模型/ 非零/ 的/ 库/ 所/ ,/ 即/ 对于/ 控制/ 问题/ 来说/ ,/ 删除/ 的/ 结点/ 都/ 是/ 冗余/ 结点/ ,/ 因此/ 输入/ 和/ 输出/ 等价/ ,/ 其/ 证明/ 不再/ 赘述/ ./ 针对/ 控制/ 问题/ [/ (/ N/ ,/ m0/ )/ ,/ (/ w/ ,/ k/ )/ ]/ ,/ Petri/ 网/ 分散/ 监控器/ 设计/ 步骤/ :/ [/ (/ 珡/ N/ ,/ m0/ )/ ,/ (/ w/ ,/ k/ )/ ]/ ;/ [/ (/ 珡/ N/ ,/ m0/ )/ ,/ (/ w/ ,/ k/ )/ ]/ ;/ [/ (/ 珡/ N1/ ,/ μ/ 01/ )/ ,/ (/ 珡/ w1/ ,/ k/ )/ ]/ ,/ …/ ,/ [/ (/ 珡/ NH/ ,/ μ/ 0H/ )/ ,/ (/ 珡/ wH/ ,/ k/ {/ [/ (/ 珦/ N1/ ,/ 珘/ μ/ 01/ )/ ,/ (/ 珦/ w1/ ,/ k/ )/ ]/ ,/ …/ ,/ [/ (/ 珦/ NH/ ,/ 珘/ μ/ 0H/ )/ ,/ (/ 珦/ wH/ ,/ k/ {/ 下列/ 操作/ :/ 1/ ./ 利用/ 算法/ 1/ ,/ 将/ [/ (/ N/ ,/ m0/ )/ ,/ (/ w/ ,/ k/ )/ ]/ 等价/ 转换/ 为/ 2/ ./ 利用/ 算法/ 2/ ,/ 将/ [/ (/ 珡/ N/ ,/ m0/ )/ ,/ (/ w/ ,/ k/ )/ ]/ 等价/ 转换/ 为/ 3/ ./ 利用/ 算法/ 3/ ,/ 将/ [/ (/ 珡/ N/ ,/ m0/ )/ ,/ (/ w/ ,/ k/ )/ ]/ 等价/ 分解/ 为/ Ω/ ·/ ·/ =/ 4/ ./ 利用/ 算法/ 4/ ,/ 逐一/ 等价/ 转换/ Ω/ 内/ 的/ 元素/ ,/ 得到/ 珟/ Ω/ ·/ ·/ =/ 5/ ./ 对/ 珟/ Ω/ 内/ 的/ 每个/ 控制/ 问题/ [/ (/ 珦/ Nh/ ,/ 珘/ μ/ 0h/ )/ ,/ (/ 珦/ wh/ ,/ k/ )/ ]/ ,/ 按照/ 5.1/ 如果/ 不/ 可控/ 子网/ 为/ 前/ 向/ 无/ 同步网/ ,/ 那么/ 其中/ Π/ c/ (/ p/ )/ 是/ 库/ 所/ p/ 的/ 关键/ 路径/ 集/ ,/ 于是/ 得到/ 与/ 珦/ wh/ 等价/ 的/ 允许/ 约束/ w/ ^/ h/ 束/ w/ ^/ h/ ;/ 5.2/ 针对/ [/ (/ 珦/ Nh/ ,/ 珘/ μ/ 0h/ )/ ,/ (/ w/ ^/ h/ ,/ k/ )/ ]/ ,/ 根据/ 库所/ 不/ 变量/ 法/ 设计/ 监控器/ 库所/ ch/ ,/ 从而/ 得到/ 局部/ 监控器/ Petri/ 网/ (/ Nc6/ ./ 最后/ 得到/ H/ 个/ Petri/ 网/ 监控器/ ,/ 即/ (/ Nc/ (/ NcH/ ,/ m/ ⌒/ 0H/ )/ ,/ 它们/ 按照/ “/ 或/ ”/ 逻辑/ 协调控制/ 离散/ 事件/ 系统/ :/ 当且/ 仅/ 当/ 一个/ 事件/ 的/ 发生/ 将/ 导致/ 全部/ 监控器/ 库所/ 的/ 标识/ 为/ 负时/ ,/ 才/ 需/ 禁止/ 该/ 事件/ ;/ 否则/ ,/ 允许/ 该/ 事件/ 发生/ ./ 5/ 柔性/ 制造/ 单元/ 图/ 1/ 是/ 一个/ 柔性/ 制造/ 车间/ 的/ Petri/ 网/ 模型/ ,/ 文献/ [/ 19/ ]/ 讨论/ 了/ 该/ 系统/ 中/ 自动/ 导航/ 小车/ 的/ 调度/ 监控/ 问题/ ,/ 本文/ 将/ 考虑/ 避免/ 工件/ 碰撞/ 的/ 生产/ 负荷/ 调度/ 问题/ ./ Page6/ 如图/ 1/ 所示/ ,/ 该/ 柔性制造系统/ 由/ 3/ 个/ 柔性/ 加工/ 单元/ 和/ 5/ 辆/ 自动/ 导航/ 小车/ 组成/ ,/ 两种/ 工件/ 分别/ 由/ 两辆/ 自动/ 导航/ 小车/ (/ AGV1/ ,/ AGV2/ )/ 送入/ 两个/ 加工/ 单元/ (/ Workstation1/ ,/ Workstation2/ )/ ,/ 完成/ 各自/ 工序/ (/ t2/ ,/ t5/ )/ ,/ 然后/ 分别/ 由/ 两辆/ 自动/ 导航/ 小车/ (/ AGV3/ ,/ AGV4/ )/ 送入/ 第/ 3/ 个/ 加工/ 单元/ (/ Workstation3/ )/ ,/ 完成/ 组装/ 工序/ t11/ ,/ 产品/ 放入/ 缓存/ p17/ ,/ 然后/ 由/ 自动/ 导航/ 小车/ AGV5/ 载出/ 制造/ 系统/ ./ 其中/ 缓存/ p17/ 的/ 容量/ 是/ 3/ ,/ 超过/ 容量/ 将/ 导致/ 产品/ 碰撞/ ,/ 形成/ 废品/ ./ 考虑/ 传感器/ 和/ 执行机构/ 的/ 成本/ ,/ 仅/ 希望/ 通过/ 控制/ AGV1/ 和/ AGV2/ 避免/ 工件/ 产品/ 碰撞/ ,/ 因此/ 在/ 该/ 系统/ 中/ 只有/ 变迁/ t1/ 和/ t4/ 可控/ ,/ 其余/ 变迁/ 都/ 不/ 可控/ ./ 显然/ ,/ 该/ 监控/ 问题/ 是/ 要/ 在/ 系统/ 行为/ 上/ 施加/ 线性/ 约束/ m/ (/ p17/ )/ / 3/ ./ 根据/ 文献/ [/ 10/ ]/ 的/ 路径/ 代数/ 法/ 可以/ 给出/ 最优/ 监控器/ :/ p17/ 具有/ 两条/ 影响/ 路径/ :/ π/ 1/ =/ (/ t1/ ,/ p2/ ,/ t2/ ,/ p3/ ,/ t3/ ,/ p9/ ,/ t7/ ,/ p13/ ,/ t9/ ,/ p15/ ,/ t11/ ,/ p17/ )/ 和/ π/ 2/ =/ (/ t4/ ,/ p6/ ,/ t5/ ,/ p7/ ,/ t6/ ,/ p12/ ,/ t8/ ,/ p14/ ,/ t10/ ,/ p16/ ,/ t11/ ,/ p17/ )/ 那么/ 控制策略/ P/ 为/ / m/ ,/ / t/ ∈/ Tc/ ,/ m/ [/ t/ >/ m/ ,/ u/ =/ P/ (/ m/ )/ ,/ u/ (/ t/ )/ =/ 1/ 其中/ 控制策略/ P/ 为/ 任意/ 一个/ 标识/ m/ 给出/ 控制/ 动作/ u/ ,/ u/ (/ t/ )/ =/ 1/ 表示/ 允许/ 变迁/ t/ 发生/ ,/ u/ (/ t/ )/ =/ 0/ 表示/ 禁止/ 变迁/ t/ 发生/ ,/ m/ (/ π/ 1/ )/ =/ m/ (/ p2/ )/ +/ m/ (/ p3/ )/ +/ m/ (/ p9/ )/ +/ m/ (/ p13/ )/ +/ m/ (/ p15/ )/ +/ m/ (/ p17/ )/ ,/ m/ (/ π/ 2/ )/ =/ m/ (/ p6/ )/ +/ m/ (/ p7/ )/ +/ m/ (/ p12/ )/ +/ m/ (/ p14/ )/ +/ m/ (/ p16/ )/ +/ m/ (/ p17/ )/ ./ 而/ 根据/ 本文/ 的/ 分散/ 监控器/ 设计/ 步骤/ 可以/ 得到/ 其/ 最优/ 监控器/ ,/ 如图/ 2/ 所示/ ,/ 对/ 涉及/ 算法/ 1/ 、/ 2/ 和/ 3/ 的/ 计算/ 过程/ 介绍/ 如下/ ./ 图/ 2/ 柔性制造系统/ 的/ 分布式/ Petri/ 网/ 监控器/ 比较/ 该/ 分散/ 监控器/ 和/ 最优控制/ 策略/ (/ 5/ )/ 可知/ ,/ 两者/ 对/ 制造/ 系统/ 的/ 动态/ 行为/ 作出/ 了/ 相同/ 的/ 限制/ ,/ 即/ 两/ (/ 1/ )/ p2/ 、/ p4/ 和/ t2/ 既/ 是/ I/ 型/ 同步/ 结构/ ,/ 也/ 是/ II/ 型/ 同步/ 结构/ ,/ 因此/ 根据/ 算法/ 1/ 或/ 2/ ,/ 删除/ 从/ p4/ 到/ t2/ 的/ 有/ 向/ 弧/ ;/ 类似/ 地/ ,/ 分别/ 删除/ p10/ 到/ t3/ 、/ p8/ 到/ t5/ 、/ p11/ 到/ t6/ 和/ p18/ 到/ t12/ 的/ 有/ 向/ 弧/ ,/ 从而/ 得到/ 珡/ N/ ;/ (/ 2/ )/ 在/ 珡/ N/ 内/ p15/ 、/ p16/ 和/ t11/ 组成/ 了/ III/ 型/ 同步/ 结构/ ,/ 因此/ 根据/ 算法/ 3/ ,/ 删除/ p15/ 到/ t11/ 的/ 有/ 向/ 弧/ 得到/ 珡/ N1/ ,/ 删除/ p16/ 到/ t11/ 的/ 有/ 向/ 弧/ 得到/ 珡/ N2/ ./ (/ 3/ )/ 根据/ 算法/ 4/ ,/ 删除/ 珡/ N1/ 内/ 的/ 结点/ p15/ ,/ t9/ ,/ p13/ ,/ t7/ ,/ p10/ ,/ p9/ ,/ t3/ ,/ p3/ ,/ t2/ ,/ p2/ ,/ p4/ ,/ t1/ ,/ p1/ ,/ p18/ 得到/ 新网/ 珦/ N1/ ,/ 如图/ 2/ 实线/ 部分/ 所示/ ;/ 删除/ 珦/ N2/ 内/ 的/ 结点/ p16/ ,/ t10/ ,/ p14/ ,/ t8/ ,/ p12/ ,/ p11/ ,/ t6/ ,/ p7/ ,/ t5/ ,/ p6/ ,/ p8/ ,/ t4/ ,/ p5/ ,/ p18/ 得到/ 新网/ 珦/ N2/ ,/ 如图/ 2/ 中/ 实线/ 部分/ 所示/ ./ (/ 4/ )/ 于是/ ,/ 原/ 控制/ 问题/ 等价/ 转换/ 为/ 在/ 珡/ N1/ 上/ 施加/ 约束/ m/ (/ p17/ )/ / 3/ 或/ 在/ 珦/ N2/ 上/ 施加/ 约束/ m/ (/ p17/ )/ / 3/ ./ (/ 5/ )/ 珦/ N1/ 和/ 珦/ N1/ 的/ 不/ 可控/ 子网/ 都/ 属于/ 前/ 向/ 无/ 同步网/ ,/ 于是/ 计算/ 每个/ 库所/ 的/ 关键/ 路径/ 集/ ,/ 显然/ 每个/ 库所/ 的/ 关键/ 路径/ 集都/ 只有/ 一条/ 路径/ ,/ 即/ 是从/ 该库/ 所/ 到/ p17/ 的/ 路径/ ,/ 根据/ 珦/ N1/ 上/ 的/ m/ (/ p17/ )/ / 3/ 转换/ 为/ 允许/ 约束/ m/ (/ p6/ )/ +/ m/ (/ p7/ )/ +/ m/ (/ p12/ )/ +/ m/ (/ p14/ )/ +/ m/ (/ p16/ )/ +/ m/ (/ p17/ )/ / 3/ 而/ 珦/ N2/ 上/ 的/ m/ (/ p17/ )/ / 3/ 转换/ 为/ 允许/ 约束/ m/ (/ p2/ )/ +/ m/ (/ p3/ )/ +/ m/ (/ p9/ )/ +/ m/ (/ p13/ )/ +/ m/ (/ p15/ )/ +/ m/ (/ p17/ )/ / 3/ ./ (/ 6/ )/ 根据/ 库所/ 不/ 变量/ 法/ ,/ 分别/ 为/ 两个/ 允许/ 约束/ 设计/ 监控器/ 库所/ c1/ 和/ c2/ ,/ 其/ 闭环/ 系统/ 如图/ 2/ 所示/ ,/ c1/ 监控/ t4/ ,/ c2/ 监控/ t1/ ,/ 在/ 任意/ 状态/ 下/ ,/ 只要/ t1/ 或/ t4/ 不/ 导致/ c1/ 和/ c2/ 的/ 标识/ 同时/ 为/ 负/ ,/ 那么/ 监控器/ 允许/ 该/ 变迁/ (/ 事件/ )/ 发生/ ./ 种/ 方法/ 得到/ 的/ 监控器/ 等价/ ,/ 也/ 表明/ 原始/ 控制/ 问题/ 与/ 本文/ 分解/ 所得/ 两个/ 简单/ 问题/ 等价/ ./ 而/ 原始/ 约束/ 转换/ Page7/ 到/ 了/ 两个/ 经过/ 分解/ 的/ 简单/ 子/ 网上/ ,/ 即/ 全局/ 控制/ 问题/ 分解/ 为/ 两个/ 局部/ 问题/ ,/ 有效/ 地/ 降低/ 了/ 监控器/ 设计/ 的/ 计算/ 复杂性/ ,/ 所得/ Petri/ 网/ 分散/ 监控器/ 的/ 在线/ 计算/ 量/ 仅/ 与/ 有限/ 的/ 监控器/ 库所数/ 相关/ ,/ 可以/ 满足/ 在线/ 要求/ ./ 而且/ 制造/ 系统/ 的/ 控制/ 规范/ 等价/ 于/ “/ 或/ ”/ 逻辑/ 的/ 两个/ 线性/ 约束/ ,/ 即/ 允许/ 状态/ 空间/ 是非/ 凸/ 的/ ,/ 因此/ 最优/ 监控器/ 无法/ 由/ 文献/ [/ 5/ ,/ 7/ ]/ 的/ 方法/ 得到/ ;/ 文献/ [/ 14/ ]/ 的/ 方法/ 同样/ 无法/ 给出/ 最优/ 监控器/ ,/ 因为/ 对象/ 网是/ 无界/ 的/ ,/ 并且/ 不/ 可控/ 子网/ 是非/ 安全/ 的/ ./ 此例/ 只是/ 规模较/ 小/ 、/ 结构/ 较/ 简单/ 的/ 制造/ 系统/ 单元/ ,/ 如果/ 涉及/ 多/ 生产/ 车间/ 或/ 企业级/ 大规模/ 复杂/ (/ Petri/ 网/ )/ 系统/ ,/ 网/ 结构/ 分解/ 方法/ 在/ 降低/ 计算/ 复杂性/ 上/ 的/ 优势/ 将/ 表现/ 地/ 更加/ 明显/ ./ 6/ 结论/ 针对/ Petri/ 网/ 监控/ 问题/ 的/ 复杂/ 网/ 结构/ 难题/ ,/ 本文/ 给出/ 了/ 基于/ 网/ 结构/ 分解/ 的/ 监控/ 方法/ ,/ 定义/ 了/ 3/ 类/ 具有/ 代表性/ 的/ 同步/ 结构/ ,/ 根据/ 它们/ 设计/ 了/ 3/ 个网/ 结构/ 分解/ 算法/ ,/ 结合/ 随后/ 设计/ 的/ 网/ 结构/ 删减/ 算法/ ,/ 它们/ 可以/ 将/ 原始/ 复杂/ 全局/ 控制/ 问题/ 等价/ 分解/ 为/ 多个/ 简单/ 子/ 网上/ 的/ 局部/ 控制/ 问题/ ,/ 并/ 进而/ 给出/ 了/ 最优/ 的/ 分布式/ Petri/ 网/ 监控器/ 设计/ 方法/ ./ 结果显示/ ,/ 该/ 方法/ 有效/ 地/ 降低/ 了/ Petri/ 网/ 控制/ 问题/ 的/ 计算/ 复杂性/ ,/ 并/ 得到/ 了/ 一类/ 尚未/ 解决/ 的/ 控制/ 问题/ 的/ 最优/ 解/ ,/ 各/ 局部/ 监控器/ 形式/ 上/ 采取/ 了/ Petri/ 网/ 形式/ ,/ 便于/ 采用/ Petri/ 网/ 分析/ 工具/ 分析/ 闭环/ 系统/ 性能/ ,/ 并且/ 监控器/ 满足/ 在线/ 计算/ 要求/ ./ 

