Page1/ 基于/ 模型/ 诊断/ 的/ 抽象/ 分层/ 过程/ 王楠/ 1/ )/ ,/ 2/ )/ 欧阳/ 丹彤/ 1/ )/ 孙善武/ 3/ )/ 1/ )/ (/ 吉林大学/ 计算机科学/ 与/ 技术/ 学院/ 符号计算/ 与/ 知识/ 工程/ 教育部/ 重点/ 实验室/ 长春/ 130012/ )/ 2/ )/ (/ 吉林/ 财经大学/ 信息/ 学院/ 长春/ 130117/ )/ 3/ )/ (/ 吉林/ 财经大学/ 网络/ 实验/ 中心/ 长春/ 130117/ )/ 摘要/ 分层/ 诊断/ 是/ 降低/ 基于/ 模型/ 诊断/ 计算/ 复杂性/ 的/ 一个/ 重要/ 方法/ ,/ 在/ 分层/ 诊断/ 中/ 很/ 重要/ 的/ 一步/ 是/ 构造/ 系统/ 的/ 抽象/ 分层/ 模型/ ,/ 以往/ 的/ 分层/ 方法/ 都/ 是/ 建立/ 在/ 某/ 一种/ 特定/ 抽象/ 模型/ 基础/ 上/ ,/ 没有/ 将/ 抽象/ 的/ 一般/ 理论/ 与/ 基于/ 模型/ 诊断/ 中/ 的/ 分层/ 过程/ 相/ 联系/ ,/ 并且/ 对/ 自动/ 生成/ 系统/ 的/ 分层/ 表示/ 方法/ 也/ 没有/ 形式化/ 的/ 分析/ ./ KRA/ (/ KnowledgeReformulationandAbstraction/ )/ 模型/ 从/ 构造/ 化/ 的/ 角度/ 定义/ 了/ 表示/ 抽象/ 的/ 一般/ 框架/ ,/ 文中/ 在/ KRA/ 模型/ 框架/ 下/ 建立/ 系统/ 模型/ ,/ 给出/ 了/ 抽象/ 算子/ 在/ 系统/ 的/ 基本/ 框架/ Rg/ 上/ 进行/ 的/ 非/ 独立/ 的/ 运算/ 过程/ ,/ 使得/ 不会/ 在/ 抽象/ 过程/ 中/ 生成/ 重复/ 的/ 部件/ 类型/ ,/ 不仅/ 降低/ 了/ 存储空间/ ,/ 还/ 增加/ 了/ 在/ 进一步/ 的/ 抽象/ 运算/ 中/ 算子/ 重用/ 的/ 概率/ ,/ 提高/ 了/ 整个/ 抽象/ 运算/ 的/ 效率/ ./ 同时/ 描述/ 了/ 基于/ 模型/ 诊断/ 中/ 的/ 抽象/ 分层/ 过程/ ,/ 提出/ 了/ 动态/ 和/ 静态/ 构造/ 算子/ 库/ 两种/ 方法/ ,/ 并/ 对/ 其/ 优缺点/ 进行/ 分析/ ,/ 给出/ 了/ 一个/ 应用/ 抽象/ 算子/ 集合/ 自动/ 生成/ 待/ 诊断系统/ 分层/ 表示/ 的/ 一般/ 算法/ ./ 关键词/ 基于/ 模型/ 的/ 诊断/ ;/ 分层/ 诊断/ ;/ KRA/ 模型/ ;/ 算子/ 库/ ;/ 自动/ 分层/ 1/ 引言/ 基于/ 模型/ 诊断/ 的/ 一个/ 主要/ 障碍/ 是/ 当待/ 诊断系统/ 中/ 部件/ 数目/ 很大/ 时/ ,/ 要/ 考察/ 的/ 候选/ 诊断/ 数目/ 也/ 非常/ 大/ ./ 因此/ ,/ 学者/ 们/ 提出/ 了/ 很多/ 方法/ 提高/ 获得/ 真正/ 诊断/ 的/ 效率/ ,/ 比如/ 通过/ 增加/ 依赖于/ 应用领域/ 的/ 约束/ 控制/ 诊断/ 空间/ [/ 1/ ]/ ./ 有些/ 学者/ 提出/ 了/ 分层/ 诊断/ 的/ 方法/ 解决/ 基于/ 模型/ 诊断/ 的/ 计算/ 复杂性/ 问题/ ,/ Mozetic/ [/ 2/ ]/ 定义/ 了/ 3/ 个/ 抽象/ // 细化/ 算子/ 来/ 表示/ 层次/ 之间/ 的/ 关系/ ,/ 并/ 给出/ 了/ 限制/ 完备/ 性/ 成立/ 的/ 条件/ ,/ Chittaro/ 和/ Ranon/ [/ 3/ ]/ 在/ Mozetic/ 工作/ 的/ 基础/ 上/ 提出/ 了/ 基于/ 结构/ 抽象/ 的/ 分层/ 诊断/ 方法/ ,/ 扩展/ 了/ Mozetic/ 的/ 算法/ ./ Saitta/ 等/ 人/ [/ 4/ ]/ 在/ Saitta/ 和/ Zucker/ [/ 5/ -/ 6/ ]/ 提出/ 的/ KRA/ 模型/ 框架/ 下/ 形式化/ 了/ 基于/ 模型/ 诊断/ 中/ 的/ 抽象/ 过程/ ,/ 描述/ 了/ 如何/ 在/ KRA/ 模型/ 中/ 实现/ 基于/ 模型/ 诊断/ 中/ 的/ 部件/ 聚合/ ./ 图/ 1/ 一个/ 运行/ 实例/ 这里/ 包括/ 4/ 种/ 类型/ 的/ 部件/ ,/ 泵/ (/ pump/ )/ 、/ 管/ (/ pipe/ )/ 、/ 阀/ (/ valve/ )/ 和/ 三通/ (/ three/ -/ waynode/ )/ ,/ 其中/ 三通/ 分为/ 两种/ 类型/ :/ 一个/ 输入/ 两个/ 输出/ (/ 2wayOut/ )/ 和/ 一个/ 输出/ 两个/ 输入/ (/ 2wayIn/ )/ ./ 每个/ 部件/ 都/ 有/ 端口/ (/ port/ )/ ,/ 在/ 这里/ 我们/ 可以/ 把/ 端口/ 看成/ 一种/ 虚拟/ 的/ 部件/ 类型/ ,/ 它/ 分为/ 输入/ 端口/ 和/ 输出/ 端口/ ./ 在/ 系统/ 中/ 部件/ 与/ 部件/ 之间/ 通过/ 内部/ 端口/ 相连/ ,/ 部件/ 与/ 外部环境/ 之间/ 通过/ 外部/ 端口/ 相连/ ./ 设/ Fp/ 表示/ 端口/ p/ 的/ 流量/ 值/ ,/ 已知/ 泵/ PM1/ 产生/ 的/ 正常/ 流量/ 为/ Fk/ ./ 图/ 1/ 中/ PM1/ 为泵/ ,/ P1/ ~/ P6/ 为管/ ,/ V1/ 和/ V2/ 为阀/ ,/ TW1/ 和/ TW2/ 表示/ 三通/ ,/ t1/ ~/ t13/ ,/ t2/ ~/ t12/ 为/ 各/ 部件/ 的/ 端口/ ./ 图/ 2/ 列举/ 了/ 图/ 1/ 系统/ 中/ 各/ 部件/ 的/ 可能/ 的/ 行为/ 模式/ ./ 本文/ 基于/ Saitta/ 等/ 人/ 的/ 工作/ ,/ 除了/ 对/ KRA/ 模型/ 各层/ 的/ 抽象/ 算子/ 进行/ 功能/ 定义/ 之外/ ,/ 还/ 给出/ 了/ 抽象/ 算子/ 在/ 系统/ 的/ 基本/ 框架/ Rg/ 上/ 进行/ 的/ 非/ 独立/ 的/ 运算/ 过程/ ,/ 使得/ 不会/ 在/ 抽象/ 过程/ 中/ 生成/ 重复/ 的/ 部件/ 类型/ ,/ 不仅/ 降低/ 了/ 存储空间/ ,/ 还/ 增加/ 了/ 在/ 进一步/ 的/ 抽象/ 运算/ 中/ 算子/ 重用/ 的/ 概率/ ,/ 提高/ 了/ 整个/ 抽象/ 运算/ 的/ 效率/ ./ 同时/ 我们/ 描述/ 了/ 基于/ 模型/ 诊断/ 中/ 的/ 抽象/ 分层/ 过程/ ,/ 提出/ 了/ 动态/ 和/ 静态/ 构造/ 算子/ 库/ 两种/ 方法/ ,/ 并/ 分析/ 了/ 其/ 优缺点/ ,/ 给出/ 一个/ 应用/ 抽象/ 算子/ 集合/ 自动/ 生成/ 待/ 诊断系统/ 分层/ 表示/ 的/ 算法/ ./ 2/ 一个/ 运行/ 实例/ 我们/ 引用/ 文献/ [/ 3/ ]/ 中/ 的/ 水力/ 系统/ 的/ 例子/ 详细/ 说明/ 本文/ 的/ 方法/ ,/ 如图/ 1/ 所示/ ./ OK/ (/ pump/ )/ UF/ (/ pump/ )/ OF/ (/ pump/ )/ LK/ (/ pump/ )/ OK/ (/ pipe/ )/ LK/ (/ pipe/ )/ OK/ (/ valve/ )/ SO/ (/ valve/ )/ SC/ (/ valve/ )/ OK/ (/ three/ -/ way/ )/ type/ (/ 2wayOut/ )/ / Fin/ =/ Fout1/ +/ Fout2/ 泵/ (/ pump/ )/ 部件/ 有/ 4/ 种/ 行为/ 模式/ ,/ 当其/ 处于/ 正常/ 模式/ OK/ 时/ ,/ 其/ 输入/ 流量/ 等于/ 输出/ 流量/ 并且/ 都/ 等于/ Page3/ 泵/ 的/ 正常/ 流量/ Fk/ ./ 当泵/ 处于/ 故障/ 模式/ UF/ (/ UnderFlow/ )/ 时/ ,/ 表示/ 泵/ 的/ 流量/ 低于正常/ 流量/ ,/ 同样/ 地/ ,/ 故障/ 模式/ OF/ (/ OverFlow/ )/ 表示/ 泵/ 的/ 流量/ 高于/ 正常/ 流量/ ./ 当泵/ 处于/ 故障/ 模式/ LK/ (/ LeaK/ )/ 时/ ,/ 表示/ 泵/ 有/ 泄漏/ ,/ 因此/ 其/ 输入/ 流量/ 高于/ 输出/ 流量/ ./ 管/ (/ pipe/ )/ 部件/ 有/ 两种/ 行为/ 模式/ ,/ 当/ 处于/ 正常/ 模式/ OK/ 时/ ,/ 其/ 输入/ 流量/ 等于/ 输出/ 流量/ ./ 当/ 处于/ 故障/ 模式/ LK/ 时/ ,/ 其/ 输入/ 流量/ 大于/ 输出/ 流量/ ./ 阀门/ (/ valve/ )/ 部件/ 有/ 3/ 种/ 行为/ 模式/ ,/ 当其/ 处于/ 正常/ 模式/ OK/ 时/ ,/ 根据/ 阀/ 当前/ 的/ 状态/ 分为/ 开放/ 正常/ 状态/ 和/ 关闭/ 正常/ 状态/ ,/ 前者/ 为/ 输入输出/ 流量/ 相等/ 且/ 大于/ 0/ ,/ 后者/ 为/ 输入输出/ 流量/ 相等/ 且/ 等于/ 0/ ./ 当/ 处于/ 故障/ 模式/ SO/ (/ StuckOpen/ )/ 时/ ,/ 输入/ 和/ 输出/ 流量/ 相等/ 且/ 一直/ 大于/ 0/ ./ 当/ 处于/ 故障/ 模式/ SC/ (/ StuckClosed/ )/ 时/ ,/ 输入/ 和/ 输出/ 流量/ 相等/ 且/ 一直/ 等于/ 0/ ./ 假设/ 三通/ 只有/ 一种/ 正常/ 行为/ 模式/ OK/ ,/ 根据/ 三通/ 的/ 类型/ 分/ 两种/ 情况/ ,/ 当/ 三通/ 类型/ 为/ 2wayOut/ (/ 2/ 个/ 输出/ 1/ 个/ 输入/ )/ 时/ ,/ 输入/ 流量/ 等于/ 两个/ 输出/ 流量/ 加/ 和/ ,/ 当/ 三通/ 类型/ 为/ 2wayIn/ (/ 2/ 个/ 输入/ 1/ 个/ 输出/ )/ 时/ ,/ 输出/ 流量/ 等于/ 两个/ 输入/ 流量/ 加/ 和/ ./ 3/ 表示/ 抽象/ 的/ KRA/ 模型/ 抽象/ 的/ 目的/ 是/ 隐藏/ 细节/ ,/ 从而/ 找到/ 更/ 简单/ 的/ 描述/ ./ 在/ 人工智能/ 领域/ 内/ ,/ 很多/ 学者/ 已经/ 研究/ 了/ 抽象/ 理论/ ,/ 比如/ 问题/ 求解/ [/ 7/ ]/ 、/ 规划/ [/ 8/ ]/ 、/ 基于/ 模型/ 的/ 诊断/ 等/ ./ 很多/ 抽象/ 理论/ 试图/ 得到/ 关于/ 抽象/ 的/ 一个/ 一般/ 定义/ ,/ 这些/ 理论/ 有/ 语法/ 的/ [/ 9/ ]/ ,/ 也/ 有/ 语义/ 的/ [/ 10/ ]/ ./ 继/ Korf/ [/ 11/ ]/ 之后/ ,/ Saitta/ 和/ Zucker/ 提出/ 的/ 表示/ 框架/ R/ 统一/ 了/ 以往/ 的/ 表示/ 方法/ ./ 我们/ 简要地/ 描述/ KRA/ 模型/ 框架/ ,/ 更/ 详细/ 的/ 内容/ 见/ 文献/ [/ 12/ ]/ ./ 该/ 框架/ 从/ 4/ 个/ 层次/ 描述/ 一个/ 待/ 表示/ 的/ 物理/ 世界/ W/ :/ 感知/ (/ P/ )/ 、/ 结构/ (/ S/ )/ 、/ 语言/ (/ L/ )/ 和/ 理论/ (/ T/ )/ ,/ 即/ R/ =/ (/ P/ ,/ S/ ,/ L/ ,/ T/ )/ ./ 下面/ 引用/ 文献/ [/ 4/ ]/ 中/ 的/ 表示/ 方法/ 描述/ 框架/ R/ 中/ 的/ 各/ 部分/ ,/ 并/ 做/ 适当/ 的/ 更改/ ./ 一个/ 感知/ P/ 是/ 一个/ 五元/ 组/ ,/ 即/ P/ =/ (/ OBJ/ ,/ ATT/ ,/ FUNC/ ,/ REL/ ,/ OBS/ )/ ,/ OBJ/ 表示/ W/ 中/ 的/ 对象/ 类型/ ,/ ATT/ 表示/ 对象/ 的/ 属性/ 的/ 类型/ ,/ FUNC/ 确定/ 了/ 一个/ 函数/ 集/ ,/ REL/ 是/ 对象/ 类型/ 间/ 的/ 关系/ 集合/ ,/ 表示/ 如下/ :/ OBJ/ =/ {/ TYPEi/ |/ 1/ / i/ / N/ }/ ;/ ATT/ =/ {/ Aj/ :/ TYPEj/ →/ Λ/ j/ |/ 1/ / j/ / M/ }/ ;/ FUNC/ =/ {/ fk/ :/ TYPEik/ ×/ TYPEjk/ ×/ …/ →/ Ck/ |/ REL/ =/ {/ rh/ / TYPEih/ ×/ TYPEjh/ |/ 1/ / h/ / R/ }/ ./ 由于/ OBS/ 涉及/ 到/ 特定/ 的/ 表示/ 系统/ ,/ 因此/ 没有/ 一般性/ 的/ 定义/ ./ 结构/ S/ 以/ 数据库/ 的/ 形式/ 记忆/ 一个/ 系统/ 的/ 感知/ ,/ 故/ 文献/ [/ 4/ ]/ 中将/ 其/ 称为/ 数据库/ D/ ./ S/ 由/ 一些/ 表/ 构成/ ,/ 存储/ 了/ 被/ 感知/ 系统/ 的/ 外延/ 上/ 的/ 表示/ ./ 语言/ L/ 从/ 内涵/ 上/ 描述/ S/ 的/ 内容/ ,/ 从而/ 完成/ 推理/ ./ 而/ 理论/ T/ 则/ 包含/ 一般性/ 的/ 和域/ 特殊/ 的/ 知识/ ,/ 理论/ T/ 的/ 内容/ 则/ 用/ 语言/ L/ 描述/ ./ 考虑/ 两个/ 表示/ 框架/ Rg/ =/ (/ Pg/ ,/ Sg/ ,/ Lg/ ,/ Tg/ )/ 和/ Ra/ =/ (/ Pa/ ,/ Sa/ ,/ La/ ,/ Ta/ )/ ,/ 称/ Rg/ 为/ 一个/ 基本/ 框架/ ./ 一旦/ 给定/ Pg/ ,/ 就/ 可以/ 通过/ 为/ 适当/ 的/ 变量/ 集/ (/ 对象/ ,/ 属性/ ,/ 函数/ 中/ 的/ 对偶/ ,/ 关系/ 中/ 的/ 元组/ )/ 分配/ 值得/ 到/ 任意/ 特定/ 的/ 系统/ ./ 所有/ 这些/ 变量/ 的/ 一个/ 值/ 的/ 分配/ 称为/ 一个/ 配置/ γ/ g/ ,/ 令/ Γ/ g/ 为/ 所有/ 可能/ 的/ 基本/ 配置/ 集合/ ./ 同样/ 地/ ,/ 令/ Γ/ a/ 为/ 所有/ 可能/ 的/ 抽象/ 配置/ 集合/ ./ 使用/ 以上/ 表示/ ,/ 可以/ 定义/ 抽象/ 如下/ ./ 定义/ 1/ ./ 给定/ 两个/ 表示/ 框架/ Rg/ 和/ Ra/ ,/ 如果/ 存在/ 一个/ 映射/ Γ/ g/ →/ Γ/ a/ ,/ 该/ 映射/ 将/ Γ/ g/ 的/ 一个/ 子集/ 与/ Γ/ a/ 的/ 一个/ 单个/ 元素/ 关联/ ,/ 则/ 称/ Ra/ 比/ Rg/ 更/ 抽象/ ./ 从/ 定义/ 1/ 中/ 可以/ 看出/ 抽象/ 是/ 相对/ 而/ 非/ 绝对/ 的/ 概念/ ,/ 是/ 定义/ 在/ 表示/ 框架/ 之间/ 而/ 不是/ 单一/ 的/ 对象/ 之间/ ./ 实际上/ ,/ 在/ KRA/ 模型/ 框架/ 下/ ,/ 抽象/ 是/ 通过/ 对/ 基本/ 配置/ 应用/ 抽象/ 算/ 子集/ 而/ 得到/ 的/ ,/ 抽象/ 算子/ 有些/ 是域/ 独立/ 的/ ,/ 有些/ 是域/ 特殊/ 的/ ,/ 我们/ 将/ 在/ 第/ 4/ 节/ 介绍/ 各种/ 算子/ 的/ 定义/ 及其/ 应用/ 过程/ ./ 为了/ 说明/ 表示/ 抽象/ 的/ KRA/ 模型/ 框架/ ,/ 我们/ 以图/ 1/ 中/ 给出/ 的/ 水力/ 系统/ 为例/ 进行/ 描述/ ./ 令/ Rg/ =/ (/ Pg/ ,/ Sg/ ,/ Lg/ ,/ Tg/ )/ 是/ 该/ 系统/ 的/ 基本/ 表示/ 框架/ ,/ 基本/ 感知/ Pg/ 可以/ 指定/ 如下/ :/ OBJg/ =/ COMPg/ ∪/ {/ PORT/ }/ ;/ COMPg/ =/ {/ PUMP/ ,/ PIPE/ ,/ VALVE/ ,/ THREE/ -/ WAY/ }/ ;/ ATTg/ =/ {/ ObjType/ :/ OBJg/ →/ {/ pipe/ ,/ pump/ ,/ valve/ ,/ FUNCg/ =/ {/ Bpump/ :/ PUMP/ →/ {/ ok/ ,/ uf/ ,/ of/ ,/ lk/ }/ ,/ RELg/ =/ {/ port/ -/ of/ / PORT/ ×/ COMPg/ ,/ 集合/ OBSg/ 包含/ 了/ 系统/ 中/ 的/ 实际/ 对象/ 以及/ 它们/ 的/ 拓扑/ 和/ 传感器/ 给出/ 的/ 测量/ ./ Page4OBSg/ =/ {/ (/ PM1/ ,/ P1/ ,/ …/ ,/ P6/ ,/ V1/ ,/ V2/ ,/ TW1/ ,/ TW2/ ,/ t1/ ,/ …/ ,/ t13/ ,/ t2/ ,/ …/ ,/ t12/ )/ ,/ (/ ObjType/ (/ PM1/ )/ =/ pump/ ,/ ObjType/ (/ P1/ )/ =/ pipe/ ,/ …/ ,/ ObjType/ (/ P6/ )/ =/ pipe/ ,/ ObjType/ (/ V1/ )/ =/ valve/ ,/ …/ ,/ ObjType/ (/ TW1/ )/ =/ three/ -/ way/ ,/ …/ ,/ ObjType/ (/ t1/ )/ =/ port/ ,/ …/ )/ ,/ (/ Direction/ (/ TW1/ )/ =/ 2wayOut/ ,/ …/ ,/ Direction/ (/ t1/ )/ =/ in/ ,/ …/ )/ ,/ (/ Observable/ (/ t1/ )/ =/ yes/ ,/ …/ )/ ,/ (/ State/ (/ V1/ )/ =/ open/ ,/ State/ (/ V2/ )/ =/ closed/ )/ ,/ (/ port/ -/ of/ (/ t1/ ,/ PM1/ )/ ,/ …/ )/ ,/ (/ connected/ (/ t2/ ,/ t2/ )/ ,/ …/ )/ }/ ./ 基本/ 感知/ 中/ 的/ 所有/ 值/ 存储/ 在/ 结构/ Sg/ 中/ ,/ 结构/ Sg/ 中/ 包含/ 以下/ 表/ :/ TableObj/ =/ (/ obj/ ,/ objtype/ ,/ direct/ ,/ obser/ ,/ state/ )/ ,/ 描述/ 实际/ 系统/ 中/ 的/ 对象/ 及/ 属性/ ./ TablePortOf/ =/ (/ port/ ,/ comp/ )/ ,/ 表示/ 端口/ 及其/ 所在/ 的/ 部件/ ./ TableConnected/ =/ (/ port/ ,/ port/ )/ ,/ 描述/ 哪些/ 端口/ 互相/ 连接/ ./ TableObj/ 中有/ 一些/ 值置/ 成/ NA/ (/ NotApplicable/ )/ ,/ 表示/ 该/ 属性/ 对于/ 对应/ 的/ 部件/ 没有/ 意义/ ./ 下面/ 给出/ 这/ 3/ 个表/ 的/ 部分/ 值/ ./ objobjtypedirectobserstatePM1pumpNANANAV1valveNANAopenTW1three/ -/ way2wayOutNANAt2portoutnoNA/ …/ 逻辑/ 语言/ Lg/ 定义/ 如下/ ,/ Lg/ =/ (/ Pg/ ,/ Fg/ ,/ Cg/ )/ ,/ 这里/ Pg/ 是/ 一个/ 谓词/ 的/ 集合/ ,/ P/ =/ {/ comp/ (/ x/ )/ ,/ port/ (/ x/ )/ ,/ observable/ (/ x/ )/ ,/ state/ (/ x/ )/ ,/ in/ (/ x/ )/ ,/ out/ (/ x/ )/ ,/ port/ -/ of/ (/ x/ ,/ y/ )/ ,/ connected/ (/ x/ ,/ y/ )/ ,/ ok/ (/ x/ )/ ,/ so/ (/ x/ )/ ,/ …/ ,/ pump/ (/ x/ ,/ y1/ ,/ y2/ )/ ,/ valve/ (/ x/ ,/ state/ ,/ y1/ ,/ y2/ )/ ,/ …/ }/ ./ F/ 是/ 一个/ 函数/ 集合/ ,/ F/ =/ {/ Bpump/ ,/ Bpipe/ ,/ Bvalve/ ,/ Bthree/ -/ way/ ,/ Δ/ FlowValue/ }/ ./ C/ 是/ 一个/ 常量/ 集合/ ,/ C/ =/ {/ PM1/ ,/ V1/ ,/ …/ }/ ∪/ Λ/ Bpump/ ∪/ …/ ∪/ {/ open/ ,/ closed/ ,/ +/ ,/ -/ ,/ 0/ }/ ./ 语言/ Lg/ 中/ 的/ 谓词/ 集合/ 的/ 语义/ 由/ 结构/ 中/ 的/ 表/ 提供/ ./ 函数/ 集合/ F/ 中/ Bpump/ 等/ 函数/ 的/ 函数/ 值为/ 对应/ 部件/ 的/ 行/ 与/ 图/ 2/ 等价/ 的/ PM/ 的/ 行为/ 模式/ 描述/ 如下/ :/ 为/ 模式/ ,/ Δ/ FlowValue/ 有/ 两个/ 参数/ ,/ 类型/ 为/ port/ 型/ 或/ 数值/ 型/ ,/ 当/ 第/ 1/ 个/ 参数/ 大于/ (/ // 小于/ // 等于/ )/ 第/ 2/ 个/ 参数/ 时/ ,/ 函数/ 值为/ +/ (/ // -/ // 0/ )/ ./ 理论/ Tg/ 包含/ 系统/ 中/ 各/ 部件/ 的/ 结构/ 描述/ 和/ 行为/ 描述/ ,/ 比如/ 对于/ 部件/ pump/ 的/ 结构/ 描述/ 如下/ :/ pump/ (/ PM/ ,/ t1/ ,/ t2/ )/ / comp/ (/ PM/ )/ ∧/ port/ (/ t1/ )/ ∧/ port/ -/ of/ (/ t1/ ,/ PM/ )/ ∧/ in/ (/ t1/ )/ ∧/ port/ (/ t2/ )/ ∧/ port/ -/ of/ (/ t2/ ,/ PM/ )/ ∧/ out/ (/ t2/ )/ ./ pump/ (/ PM/ ,/ t1/ ,/ t2/ )/ ∧/ ok/ (/ PM/ )/ →/ Δ/ FlowValue/ (/ t1/ ,/ t2/ )/ =/ 0/ ∧/ Δ/ FlowValue/ (/ t1/ ,/ Fk/ )/ =/ 0/ ;/ pump/ (/ PM/ ,/ t1/ ,/ t2/ )/ ∧/ uf/ (/ PM/ )/ →/ Δ/ FlowValue/ (/ t1/ ,/ t2/ )/ =/ 0/ ∧/ Δ/ FlowValue/ (/ t1/ ,/ Fk/ )/ =/ +/ ;/ pump/ (/ PM/ ,/ t1/ ,/ t2/ )/ ∧/ of/ (/ PM/ )/ →/ Δ/ FlowValue/ (/ t1/ ,/ t2/ )/ =/ 0/ ∧/ Δ/ FlowValue/ (/ t1/ ,/ Fk/ )/ =/ -/ ;/ pump/ (/ PM/ ,/ t1/ ,/ t2/ )/ ∧/ lk/ (/ PM/ )/ →/ Δ/ FlowValue/ (/ t1/ ,/ t2/ )/ =/ +./ 4/ 抽象/ 算子/ 引入/ 抽象/ 算子/ 的/ 目的/ 是/ 为了/ 从/ 系统/ 的/ 最/ 基本/ 层/ 开始/ ,/ 应用/ 抽象/ 算子/ 自动/ 生成/ 更/ 抽象/ 的/ 系统/ 表示/ ./ 这/ 一部分/ 我们/ 以图/ 1/ 给出/ 的/ 实际/ 系统/ 为例/ ,/ 在/ KRA/ 模型/ 中/ 的/ 各层/ 定义/ 了/ 一一对应/ 的/ 抽象/ 算子/ 集合/ ./ 与/ 文献/ [/ 4/ ]/ 不同/ 的/ 是/ ,/ 我们/ 除了/ 对/ KRA/ 模型/ 各层/ 的/ 抽象/ 算子/ 进行/ 功能/ 定义/ 之外/ ,/ 同时/ 还/ 给出/ 了/ 一个/ 非/ 独立/ 的/ 运算/ 过程/ ,/ 即/ 首先/ 在/ 系统/ 的/ 基本/ 框架/ 内/ 的/ 各层/ 应用/ 抽象/ 算子/ ,/ 然后/ 利用/ 一阶/ 逻辑推理/ 将/ 在/ 理论/ 层/ 应用/ 抽象/ 算子/ 得到/ 的/ 新/ 生成/ 的/ 超/ 部件/ 的/ 行为/ 模式/ 与/ 最/ 基本/ 系统/ 的/ 所有/ 基本/ 部件/ 的/ 行为/ 模式/ 比较/ ,/ 如果/ 发现/ 该超/ 部件/ 的/ 行为/ 模式/ 与/ 某种/ 类型/ 的/ 基本/ 部件/ 一致/ ,/ 则/ 修改/ 感知/ 层/ 和/ 结构层/ 的/ 运算/ 结果/ ,/ 保留/ 新/ 生成/ 的/ 超/ 部件/ 名/ 等/ 实例/ 化/ 信息/ ,/ 而/ 将/ 其/ 类型/ 等/ 类化/ 信息/ 用/ 与其/ 行为/ 模式/ 一致/ 的/ 基本/ 部件/ 的/ 相应/ 信息/ 更新/ ;/ 如果/ 没有/ 找到/ 与/ 该/ 超/ 部件/ 行为/ 一致/ 的/ 基本/ 部件/ ,/ 则/ 运算/ 终止/ ./ 这样/ 的/ 运算/ 过程/ 使得/ 不会/ 在/ 抽象/ 过程/ 中/ 生成/ 重复/ 的/ 部件/ 类型/ ,/ 不仅/ 降低/ 了/ 存储空间/ ,/ 同时/ 增加/ 了/ 进一步/ 的/ 抽象/ 运算/ 中/ 算子/ 重用/ 的/ 概率/ ,/ 提高/ 了/ 整个/ 抽象/ 运算/ 的/ 效率/ ./ 下面/ 我们/ 首先/ 在/ KRA/ 模型/ 框架/ 内/ 定义/ 相应/ 的/ 抽象/ 算子/ ,/ 这里/ 引用/ 了/ 文献/ [/ 4/ ]/ 中/ 的/ 部分/ 定义/ ,/ 同时/ 做/ 了/ 一些/ 修改/ ,/ 然后/ 我们/ 给出/ 应用/ 抽象/ 算子/ 生成/ 超/ 部件/ 的/ 过程/ ./ 抽象/ 算子/ 首先/ 在/ 感知/ 层/ 定义/ ,/ 感知/ 层中/ 的/ 算子/ 集合/ 用于/ 将/ 系统/ (/ 基本/ 系统/ 或/ 抽象/ 系统/ )/ 中/ 的/ 部件/ 聚合/ ,/ 其/ 算子/ 数目/ 与/ 具体/ 的/ 系统/ 有关/ ,/ 我们/ 将/ 在/ 第/ 5/ 部/ Page5/ 分/ 说明/ 如何/ 确定/ 一个/ 具体/ 系统/ 在/ 感知/ 层/ 的/ 抽象/ 算子/ 集合/ ,/ 这里/ 以图/ 3/ 所示/ 的/ 图/ 1/ 中/ 系统/ 的/ 一个/ 子/ 部分/ 为例/ 描述/ 感知/ 层/ 抽象/ 算子/ 的/ 定义/ 及/ 运算/ ./ 图/ 3/ 中/ 左图/ 为/ 实际/ 系统/ 的/ 子/ 部分/ ,/ 右图/ 为/ 应用/ 抽象/ 算子/ 后/ 得到/ 的/ 抽象/ 部件/ ./ 我们/ 定义/ 算子/ ω/ PipeValve/ 实现/ 串联/ 连接/ 的/ pipe/ 类型/ 部件/ 与/ valve/ 类型/ 部件/ 向/ 超/ 部件/ PV1/ 的/ 聚合/ ,/ 该/ 算子/ 带有/ 两个/ 参数/ ,/ 分别/ 为/ pipe/ 型/ 和/ valve/ 型/ ./ 后面/ 我们/ 会/ 看到/ 这种/ 聚合/ 的/ 结果/ 仍然/ 是/ pipe/ 类型/ 部件/ ,/ RELa/ =/ {/ port/ -/ of/ / PORT/ ×/ COMPa/ ,/ connected/ / PORT/ ×/ PORT/ }/ ;/ OBSa/ =/ {/ (/ PM1/ ,/ 犘/ 1/ ,/ …/ ,/ P6/ ,/ 犘/ 犞/ 1/ ,/ 犞/ 1/ ,/ V2/ ,/ TW1/ ,/ TW2/ ,/ t1/ ,/ …/ ,/ 狋/ 5/ ,/ t6/ ,/ …/ ,/ t13/ ,/ t2/ ,/ …/ ,/ 狋/ 5/ ,/ …/ ,/ t12/ )/ ,/ 犗/ 犫/ 狊/ 犲/ 狉/ 狏/ 犪/ 犫/ 犾/ 犲/ (/ 狋/ 5/ )/ =/ 狀/ 狅/ ,/ 犗/ 犫/ 狊/ 犲/ 狉/ 狏/ 犪/ 犫/ 犾/ 犲/ (/ 狋/ 5/ )/ =/ 狀/ 狅/ ,/ Observable/ (/ t4/ )/ =/ yes/ ,/ Observable/ (/ t6/ )/ =/ yes/ )/ ,/ 这里/ 注意/ ,/ 由于/ 聚合/ pipe/ 型/ 部件/ P1/ 和/ valve/ 型/ 部件/ V1/ 时/ 虽然/ 生成/ 了/ 新/ 的/ 部件/ 类型/ ,/ 但是/ 系统/ 中/ 可能/ 仍然/ 存在/ 其它/ pipe/ 型/ 和/ valve/ 型/ 部件/ ,/ 所以/ 在/ COMPa/ 集合/ 中/ 保留/ 了/ 这/ 两种/ 部件/ 类型/ ./ OBSa/ 中/ 删除/ 线/ 部分/ 表示/ 了/ 抽象/ 运算/ 过程/ ./ 在/ 结构层/ ,/ 我们/ 定义/ 与/ 感知/ 层/ 算子/ ω/ PipeValve/ 对应/ 的/ 抽象/ 算子/ σ/ PipeValve/ ,/ 该/ 算子/ 作用/ 于/ 存储系统/ 基本/ 感知/ 的/ 表上/ ./ 在/ 表/ TableObjg/ 中/ ,/ 删除/ 任何/ 含有/ P1/ 或/ V1/ 以及/ t5/ 或/ t5/ 的/ 行/ ,/ 并/ 在/ 表中/ 为/ 对象/ PV1/ 添加/ 新/ 行/ ,/ 生成/ 表/ TableObja/ ./ objobjtypedirectobserstatePM1pumpNANANA/ 犘/ 1/ 狆/ 犻/ 狆/ 犲/ NANANA/ 犞/ 1/ 狏/ 犪/ 犾/ 狏/ 犲/ NANA/ 狅/ 狆/ 犲/ 狀/ 犘/ 犞/ 1/ 狊/ 狆/ 狏/ NANANA/ 狋/ 5/ 狆/ 狅/ 狉/ 狋/ 狅/ 狌/ 狋/ 狀/ 狅/ NA/ 狋/ 5/ 狆/ 狅/ 狉/ 狋/ 犻/ 狀/ 狀/ 狅/ NA/ …/ 在/ 表/ TablePortOfg/ 和表/ TableConnectedg/ 中/ ,/ 将/ 含有/ 部件/ P1/ 或/ V1/ 以及/ 两/ 部件/ 连接/ 端口/ t5/ 或/ t5/ 的/ 所有/ 行/ 删除/ ,/ 同时/ 将/ P1/ 和/ V1/ 的/ 外部/ 端口/ t4/ 和/ t6/ 与/ 部件/ PV1/ 即/ ω/ PipeValve/ (/ pipep/ ,/ valvev/ )/ 生成/ 了/ 一个/ pipe/ 型/ 部件/ ./ 将/ ω/ PipeValve/ (/ P1/ ,/ V1/ )/ 作用/ 于/ 系统/ 的/ 基本/ 感知/ Pg/ =/ (/ OBJg/ ,/ ATTg/ ,/ FUNCg/ ,/ RELg/ ,/ OBSg/ )/ 得到/ 更/ 抽象/ 的/ 感知/ Pa/ =/ (/ OBJa/ ,/ ATTa/ ,/ FUNCa/ ,/ RELa/ ,/ OBSa/ )/ 如下/ :/ OBJa/ =/ COMPa/ ∪/ {/ PORT/ }/ ;/ COMPa/ =/ {/ PUMP/ ,/ PIPE/ ,/ VALVE/ ,/ ATTa/ =/ (/ ATTg/ -/ {/ ObjTypeg/ }/ )/ ∪/ FUNCa/ =/ FUNCg/ ∪/ {/ BSPV/ :/ SPV/ →/ CSPV/ }/ ./ 注意/ ,/ 在/ 感知/ 层/ 无法/ 直接/ 得到/ 生成/ 的/ 超/ 部件/ 的/ 行为/ 模式/ 常量/ 集合/ ,/ 需要/ 在/ 理论/ 层/ 的/ 推理/ 指导/ 下/ 获得/ ./ 相连/ ,/ 得到/ 表/ TablePortOfa/ 和表/ TableConnecteda/ ./ 这里/ 只/ 以表/ TableObja/ 为例/ 说明/ 抽象/ 算子/ σ/ PipeValve/ (/ P1/ ,/ V1/ )/ 的/ 作用/ 结果/ ./ 在/ 语言/ 层/ ,/ 我们/ 定义/ 抽象/ 算子/ λ/ PipeValve/ ,/ 该/ 算子/ 作用/ 于/ 逻辑/ 语言/ Lg/ =/ (/ Pg/ ,/ Fg/ ,/ Cg/ )/ ,/ 得到/ 更/ 抽象/ 的/ 语言/ La/ =/ (/ Pa/ ,/ Fa/ ,/ Ca/ )/ ,/ 其中/ :/ 在/ 谓词/ 集合/ Pa/ 中/ ,/ 由于/ 系统/ 对象/ 类型/ 除了/ 增加/ 了/ SPV/ 型/ 的/ 部件/ 之外/ ,/ 其余/ 没有/ 发生变化/ ,/ 故/ 只/ 需要/ 在/ 集合/ Pa/ 中/ 添加/ 关于/ 部件/ SPV/ 的/ 相应/ 谓词/ ./ 函数/ 集合/ Fa/ 中/ 添加/ 关于/ SPV/ 型/ 部件/ 的/ 行为/ 函数/ ./ 常量/ 集合/ Ca/ 中/ 添加/ SPV/ 型/ 部件/ 的/ 行为/ 模式/ 值/ 以及/ 新/ 生成/ 的/ 超/ 部件/ 名/ ./ 具体/ 如下/ :/ Pa/ =/ Pg/ ∪/ {/ SPV/ (/ x/ )/ ,/ BSpv1/ (/ x/ )/ ,/ BSpv2/ (/ x/ )/ ,/ …/ }/ ;/ Fa/ =/ Fg/ ∪/ {/ BSPV/ }/ ;/ Ca/ =/ Cg/ ∪/ {/ PV1/ }/ ∪/ Λ/ BSPV/ ./ 注意/ ,/ 新/ 生成/ 的/ 超/ 部件/ 的/ 行为/ 模式/ 谓词/ 及/ 行为/ 模式/ 常量/ ,/ 在/ 语言/ 层/ 算子/ 的/ 作用/ 下/ 无法/ 直接/ 得到/ ,/ 是/ 在/ 理论/ 层/ 的/ 逻辑推理/ 指导/ 下/ 获得/ ./ 在/ 理论/ 层/ ,/ 需要/ 将/ 描述/ pipe/ 型/ 部件/ 和/ valve/ 型/ 部件/ 的/ 结构/ 和/ 行为/ 的/ 公式/ 合并/ (/ 但是/ 保留/ 两种/ 类型/ 部件/ 的/ 结构/ 和/ 行为/ 描述/ 公式/ )/ ,/ 从而/ 得到/ 超/ 部件/ Page6SPV/ 型/ 部件/ 的/ 结构/ 描述/ 和/ 行为/ ./ pipe/ 型/ 部件/ 和/ valve/ 型/ 部件/ 的/ 结构/ 描述/ 如下/ :/ pipe/ (/ P/ ,/ t1/ ,/ t2/ )/ / valve/ (/ V/ ,/ state/ ,/ t1/ ,/ t2/ )/ / comp/ (/ P/ )/ ∧/ port/ (/ t1/ )/ ∧/ port/ -/ of/ (/ t1/ ,/ P/ )/ ∧/ in/ (/ t1/ )/ ∧/ port/ (/ t2/ )/ ∧/ port/ -/ of/ (/ t2/ ,/ P/ )/ ∧/ out/ (/ t2/ )/ ;/ comp/ (/ V/ )/ ∧/ port/ (/ t1/ )/ ∧/ port/ -/ of/ (/ t1/ ,/ V/ )/ ∧/ in/ (/ t1/ )/ ∧/ port/ (/ t2/ )/ ∧/ port/ -/ of/ (/ t2/ ,/ V/ )/ ∧/ out/ (/ t2/ )/ ∧/ 根据/ 结构层/ 中/ 的/ 表中/ 描述/ 的/ 信息/ 进行/ 推理/ 得到/ 超/ 部件/ 类型/ SPV/ 的/ 结构/ 描述/ 如下/ :/ SPV/ (/ PV/ ,/ t1/ ,/ t2/ )/ / 如下/ :/ comp/ (/ PV/ )/ ∧/ port/ (/ t1/ )/ ∧/ port/ -/ of/ (/ t1/ ,/ PV/ )/ ∧/ in/ (/ t1/ )/ ∧/ port/ (/ t2/ )/ ∧/ port/ -/ of/ (/ t2/ ,/ PV/ )/ ∧/ out/ (/ t2/ )/ ./ 同理/ ,/ pipe/ 型/ 部件/ 和/ valve/ 型/ 部件/ 的/ 行为/ 描述/ ①/ pipe/ (/ P/ ,/ t1/ ,/ t2/ )/ ∧/ ok/ (/ P/ )/ →/ Δ/ FlowValue/ (/ t1/ ,/ t2/ )/ =/ 0/ ;/ ②/ pipe/ (/ P/ ,/ t1/ ,/ t2/ )/ ∧/ lk/ (/ P/ )/ →/ Δ/ FlowValue/ (/ t1/ ,/ t2/ )/ =/ +/ ;/ ③/ valve/ (/ V/ ,/ state/ ,/ t1/ ,/ t2/ )/ ∧/ state/ (/ V/ )/ =/ open/ ∧/ ok/ (/ V/ )/ →/ Δ/ FlowValue/ (/ t1/ ,/ t2/ )/ =/ 0/ ∧/ Δ/ FlowValue/ (/ t1/ ,/ 0/ )/ =/ +/ ;/ ④/ valve/ (/ V/ ,/ state/ ,/ t1/ ,/ t2/ )/ ∧/ state/ (/ V/ )/ =/ close/ ∧/ ok/ (/ V/ )/ →/ Δ/ FlowValue/ (/ t1/ ,/ t2/ )/ =/ 0/ ∧/ Δ/ FlowValue/ (/ t1/ ,/ 0/ )/ =/ 0/ ;/ ⑤/ valve/ (/ V/ ,/ state/ ,/ t1/ ,/ t2/ )/ ∧/ so/ (/ V/ )/ →/ Δ/ FlowValue/ (/ t1/ ,/ t2/ )/ =/ 0/ ∧/ Δ/ FlowValue/ (/ t1/ ,/ 0/ )/ =/ +/ ;/ ⑥/ valve/ (/ V/ ,/ state/ ,/ t1/ ,/ t2/ )/ ∧/ sc/ (/ V/ )/ →/ Δ/ FlowValue/ (/ t1/ ,/ t2/ )/ =/ 0/ ∧/ Δ/ FlowValue/ (/ t1/ ,/ 0/ )/ =/ 0/ ./ 将/ 两种/ 类型/ 部件/ 的/ 行为/ 模式/ 做/ 笛卡尔/ 积共/ 得到/ 8/ 种/ 可能/ 的/ 行为/ 模式/ (/ ①/ ③/ ,/ ①/ ④/ ,/ ①/ ⑤/ ,/ ①/ ⑥/ ,/ ②/ ③/ ,/ ②/ ④/ ,/ ②/ ⑤/ ,/ ②/ ⑥/ )/ ,/ 经过/ 逻辑推理/ ,/ 可以/ 合并/ 其中/ 的/ ①/ ③/ 、/ ①/ ④/ 、/ ①/ ⑤/ 和/ ①/ ⑥/ ,/ ②/ ③/ 、/ ②/ ④/ 、/ ②/ ⑤/ 和/ ②/ ⑥/ 得到/ 新/ 的/ 超/ 部件/ 的/ 共/ 2/ 种/ 行为/ 描述/ 如下/ :/ SPV/ (/ PV/ ,/ t1/ ,/ t2/ )/ ∧/ BSpv1/ (/ PV/ )/ →/ Δ/ FlowValue/ (/ t1/ ,/ t2/ )/ =/ 0/ ;/ SPV/ (/ PV/ ,/ t1/ ,/ t2/ )/ ∧/ BSpv2/ (/ PV/ )/ →/ Δ/ FlowValue/ (/ t1/ ,/ t2/ )/ =/ +./ 在/ 系统/ 的/ KRA/ 模型/ 基本/ 框架/ 内/ 应用/ 抽象/ 算子/ 是/ 一个/ 反复/ 的/ 过程/ ,/ 正像/ 我们/ 前面/ 在/ 框架/ 内/ 各层/ 定义/ 抽象/ 算子/ 时/ 提到/ 的/ ,/ 有些/ 内容/ 在/ 算子/ 顺序/ 应用/ 过程/ 中/ 只能/ 暂时/ 以/ 变量/ 的/ 形式/ 存在/ ,/ 比如/ 在/ 感知/ 层/ 定义/ FUNCa/ 时/ ,/ 无法/ 直接/ 得到/ 新/ 生成/ 的/ 超/ 部件/ 的/ 行为/ 模式/ 常量/ 集合/ ,/ 需要/ 利用/ 理论/ 层/ 的/ 逻辑推理/ 结果/ 指导/ ,/ 再/ 如/ 在/ 语言/ 层/ 生成/ 谓词/ 集合/ 时/ ,/ 超/ 部件/ 的/ 具体/ 行为/ 谓词/ 也/ 必须/ 由/ 理论/ 层/ 的/ 逻辑推理/ 结果/ 指导/ 得出/ ./ 下面/ 我们/ 看/ 一下/ 前面/ 聚合/ pipe/ 类型/ 部件/ 和/ valve/ 类型/ 部件/ 时/ 在/ 理论/ 层/ 推出/ 的/ 逻辑/ 结果/ 对/ 其它/ 各层/ 的/ 指导/ :/ 通过/ 理论/ 层/ 的/ 推理/ ,/ 我们/ 得到/ SPV/ 类型/ 的/ 超/ 部件/ 具有/ 两种/ 行为/ 模式/ BSpv1/ 和/ BSpv2/ ,/ 则/ 我们/ 修改/ 感知/ 层/ 的/ 函数/ 集合/ 为/ FUNCa/ =/ FUNCg/ ∪/ {/ BSPV/ :/ SPV/ →/ {/ BSpv1/ ,/ BSpv2/ }/ }/ ,/ 修改/ 语言/ 层/ 的/ 谓词/ 集合/ 为/ Pa/ =/ Pg/ ∪/ {/ SPV/ (/ x/ )/ ,/ BSpv1/ (/ x/ )/ ,/ BSpv2/ (/ x/ )/ }/ ./ 特别/ 地/ ,/ 部件/ 聚合/ 有/ 可能/ 生成/ 与/ 某个/ 基本/ 部件/ 结构/ 描述/ 和/ 行为/ 模式/ 都/ 相同/ 的/ 超/ 部件/ ,/ 这种/ 情况/ 下/ 可以/ 将/ 该/ 超/ 部件/ 看成/ 与/ 该/ 基本/ 部件/ 相同/ 的/ 部件/ ,/ 无需/ 将/ 其/ 类型/ 、/ 结构/ 以及/ 行为/ 模式/ 进行/ 重复/ 存储/ ./ 比如/ 前面/ 由/ 部件/ P1/ 和/ 部件/ V1/ 串联/ 聚合/ 而成/ 的/ 超/ 部件/ PV1/ ,/ 我们/ 将/ 在/ 理论/ 层/ 得到/ 的/ 该/ 超/ 部件/ 的/ 结构/ 描述/ 和/ 行为/ 模式/ 与/ 系统/ 中/ 的/ 各/ 基本/ 部件/ 比较/ ,/ 发现/ 它/ 的/ 结构/ 描述/ 和/ 行为/ 模式/ 与/ pipe/ 型/ 部件/ 完全相同/ ,/ 则/ 我们/ 就/ 可以/ 在/ 各层/ 中将/ 新/ 添加/ 的/ 关于/ 超/ 部件/ 的/ 量/ 做/ 适当/ 的/ 删除/ ,/ 相当于/ 在/ 系统/ 中将/ P1/ 和/ V1/ 删除/ ,/ 用/ 一个/ pipe/ 型/ 部件/ PV1/ 代替/ ./ 经过/ 以上/ 分析/ ,/ 我们/ 得到/ 了/ 新/ 的/ 更/ 抽象/ 的/ 系统/ 如图/ 3/ 中/ 右图/ 所示/ ,/ 其/ KRA/ 模型表示/ Ra/ =/ (/ Pa/ ,/ Sa/ ,/ La/ ,/ Ta/ )/ 如下/ :/ 在/ 感知/ 层/ ,/ Pa/ =/ (/ OBJa/ ,/ ATTa/ ,/ FUNCa/ ,/ RELa/ ,/ OBSa/ )/ ,/ 其中/ ,/ OBJa/ =/ COMPa/ ∪/ {/ PORT/ }/ ;/ COMPa/ =/ {/ PUMP/ ,/ PIPE/ ,/ VALVE/ ,/ THREE/ -/ WAY/ }/ ;/ ATTa/ =/ {/ ObjType/ :/ OBJa/ →/ {/ pipe/ ,/ pump/ ,/ valve/ ,/ FUNCa/ =/ {/ Bpump/ :/ PUMP/ →/ {/ ok/ ,/ uf/ ,/ of/ ,/ lk/ }/ ,/ RELa/ =/ {/ port/ -/ of/ / PORT/ ×/ COMPg/ ,/ OBSa/ =/ {/ (/ PM1/ ,/ P2/ ,/ …/ ,/ P6/ ,/ 犘/ 犞/ 1/ ,/ V2/ ,/ TW1/ ,/ TW2/ ,/ (/ ObjType/ (/ PM1/ )/ =/ pump/ ,/ ObjType/ (/ P2/ )/ =/ pipe/ ,/ …/ ,/ ObjType/ (/ P6/ )/ =/ pipe/ ,/ ObjType/ (/ V2/ )/ =/ valve/ ,/ ObjType/ (/ TW1/ )/ =/ three/ -/ way/ ,/ …/ ,/ ObjType/ (/ t1/ )/ =/ port/ ,/ …/ ,/ 犗/ 犫/ 犼/ 犜/ 狔/ 狆/ 犲/ (/ 犘/ 犞/ 1/ )/ =/ 狆/ 犻/ 狆/ 犲/ ,/ …/ )/ ,/ (/ Direction/ (/ TW1/ )/ =/ 2wayOut/ ,/ …/ ,/ Page7Direction/ (/ t1/ )/ =/ in/ ,/ …/ ,/ Direction/ (/ t4/ )/ =/ in/ ,/ Direction/ (/ t6/ )/ =/ out/ )/ ,/ (/ Observable/ (/ t1/ )/ =/ yes/ ,/ …/ ,/ Observable/ (/ t4/ )/ =/ yes/ ,/ Observable/ (/ t6/ )/ =/ yes/ )/ ,/ (/ port/ -/ of/ (/ t1/ ,/ PM1/ )/ ,/ …/ ,/ port/ -/ of/ (/ t4/ ,/ PV1/ )/ ,/ port/ -/ of/ (/ t6/ ,/ PV1/ )/ )/ ,/ (/ connected/ (/ t2/ ,/ t2/ )/ ,/ …/ )/ }/ ./ 在/ 结构层/ ,/ 我们/ 以表/ TableObja/ 为例/ 说明/ 该/ 结果/ ,/ 其它/ 表/ 内容/ 与/ 使用/ 抽象/ 算子/ σ/ PipeValve/ (/ P1/ ,/ V1/ )/ 的/ 作用/ 结果/ 相同/ ./ objobjtypedirectobserstatePM1pumpNANANA/ 犘/ 犞/ 1/ 狆/ 犻/ 狆/ 犲/ NANANATW1three/ -/ way2wayOutNANAt2portoutnoNA/ …/ 在/ 语言/ 层/ ,/ 得到/ 逻辑/ 语言/ La/ 定义/ 如下/ ,/ La/ =/ (/ Pa/ ,/ Fa/ ,/ Ca/ )/ ,/ 其中/ ,/ Pa/ =/ Pg/ ,/ Fa/ =/ Fg/ ,/ Ca/ =/ {/ PM1/ ,/ P2/ ,/ …/ ,/ V2/ ,/ PV1/ ,/ …/ }/ ∪/ Λ/ Bpump/ ∪/ …/ ∪/ {/ open/ ,/ closed/ ,/ +/ ,/ -/ ,/ 0/ }/ ./ 由于/ 没有/ 增加/ 新/ 的/ 部件/ 类型/ ,/ 所以/ Ra/ 的/ 理论/ 层/ 知识/ 与/ Rg/ 相同/ ./ 至此/ ,/ 我们/ 可以/ 得到/ 作用/ 于/ 整个/ 系统/ 框架/ Rg/ 上/ 的/ 抽象/ 运算/ 过程/ ,/ 如图/ 4/ 所示/ ./ 5/ 基于/ 模型/ 诊断/ 中/ 的/ 抽象/ 分层/ 过程/ 我们/ 通过/ 在/ KRA/ 模型/ 框架/ 中/ 的/ 各层/ 定义/ 具体/ 系统/ 的/ 算子/ 库/ 实现/ 系统/ 的/ 自动/ 分层/ ,/ 算子/ 库/ 可以/ 采用/ 两种/ 方式/ 定义/ :/ 静态/ 方式/ 和/ 动态/ 方式/ ./ 静态/ 方式/ 是/ 指/ 根据/ 给定/ 系统/ 的/ 基本/ 框架/ Rg/ 预先/ 构造/ 所有/ 可能/ 的/ 抽象/ 算子/ ,/ 在/ 这里/ 设/ 基本/ 部件/ 类型/ 的/ 个数/ 为/ m/ ,/ 抽象/ 运算/ 可以/ 看成/ 将/ m/ 个/ 部件/ 两/ 两串/ (/ // 并/ )/ 联/ 聚合/ ,/ 则/ 得到/ 抽象/ 算子/ 个数/ 为/ O/ (/ m2/ )/ ./ 静态/ 构造/ 算子/ 库是/ 一个/ 相对/ 的/ 方法/ ,/ 它/ 只是/ 在/ 抽象/ 运算/ 开始/ 时/ 预先/ 定义/ 了/ 初始/ 时/ 可能/ 的/ 算子/ ,/ 但是/ 如果/ 在/ 抽象/ 运算/ 过程/ 中/ 生成/ 了/ 某种/ 基本/ 系统/ 中/ 没有/ 的/ 部件/ 类型/ ,/ 则/ 还/ 需要/ 动态/ 地/ 定义新/ 的/ 算子/ 添加/ 到/ 算子/ 库中/ ,/ 另外/ ,/ 实际/ 系统/ 中/ 还/ 可能/ 存在/ 多个/ 部件/ 相联/ 的/ 情况/ ,/ 比如/ 图/ 1/ 中/ TW1/ 和/ P1/ ,/ P3/ 相联/ ,/ 这种/ 情况/ 也/ 需要/ 动态/ 构造/ 相应/ 的/ 算子/ ./ 动态/ 方式/ 是/ 指/ 初始/ 时/ 根据/ 系统/ 的/ 基本/ 构成/ 找到/ 相连/ (/ 串联/ 或/ 并联/ )/ 的/ 部件/ 集/ ,/ 只/ 定义/ 这些/ 部件/ 集/ 对应/ 的/ 聚合/ 抽象/ 算子/ ,/ 在/ 抽象/ 运算/ 开始/ 后/ ,/ 再/ 不断/ 地/ 完善/ 算子/ 库/ ./ 显然/ 地/ ,/ 静态/ 构造/ 算子/ 库/ 的/ 方法/ 预先/ 生成/ 了/ 基于/ 基本/ 部件/ 的/ 大部分/ 可能/ 用到/ 的/ 抽象/ 算子/ ,/ 因此/ 在/ 系统/ 的/ 抽象/ 分层/ 过程/ 中/ 降低/ 了/ 动态/ 定义新/ 算子/ 的/ 概率/ ,/ 提高/ 了/ 整个/ 分层/ 过程/ 对/ 抽象/ 算子/ 的/ 重用/ 率/ ,/ 而/ 动态/ 方法/ 只/ 需要/ 构造/ 部分/ 抽象/ 算子/ ,/ 减少/ 了/ 预定/ 义/ 时间/ 和/ 空间/ ,/ 但是/ 有/ 可能/ 在/ 分层/ 过程/ 中过/ 多/ 地/ 生成/ 新/ 算子/ ,/ 使得/ 分层/ 过程/ 的/ 效率/ 降低/ ./ 在/ 组成/ 部件/ 相同/ 的/ 情况/ 下/ ,/ 对于/ 结构/ 连接/ 简单/ 的/ 系统/ 可以/ 使用/ 动态/ 生成/ 算子/ 库/ 的/ 方法/ 对系统/ 进行/ 抽象/ 分层/ ,/ 而/ 对于/ 结构/ 连接/ 复杂/ 的/ 系统/ 则/ 可以/ 使用/ 静态/ 生成/ 算子/ 库/ 的/ 方法/ 提高/ 抽象/ 过程/ 中/ 算子/ 的/ 重用/ 率/ ,/ 从而/ 提高/ 分层/ 过程/ 的/ 效率/ ./ 图/ 5/ 中/ 的/ 算法/ HirechicalProcess/ 利用/ 动态/ 生成/ 抽象/ 算子/ 库/ 的/ 方法/ 输出/ 待/ 诊断系统/ 的/ 分层/ 表示/ ./ ProcedureHirechicalProcess/ 输入/ :/ 系统/ 的/ KRA/ 模型/ 框架/ Rg/ =/ (/ Pg/ ,/ Sg/ ,/ Lg/ ,/ Tg/ )/ 输出/ :/ 系统/ 的/ 分层/ 表示/ H1/ ./ 搜索/ Sg/ ,/ 找到/ 系统/ 中/ 所有/ 串联/ 和/ 并联/ 的/ 部件/ 元组/ 〈/ ci1/ ,/ ci2/ ,/ …/ ,/ si1i2/ …/ 〉/ ,/ 1/ / i1/ ,/ i2/ / …/ / n/ ,/ 从中/ 删除/ 部件/ 类型/ 和/ 连接/ 方式/ 相同/ 的/ 元组/ ;/ // // ck/ (/ 1/ / k/ / n/ )/ 为/ 部件/ 名/ ,/ si1i2/ …/ 为/ 部件/ 的/ 连接/ 状态/ ,/ si1i2/ …/ =/ 2/ ./ 根据/ 1/ 中/ 找到/ 的/ 部件/ 元组/ 集/ ,/ 采用/ 动态/ 方法/ :/ s/ 表示/ ci1/ ,/ ci2/ …/ 串联/ ,/ si1i2/ …/ =/ p/ 表示/ ci1/ ,/ ci2/ …/ 并联/ 在/ 感知/ 层/ 构造/ 算子/ 库/ Ω/ =/ {/ ω/ ti1ti2/ …/ |/ 1/ / i1/ ,/ i2/ …/ / n/ }/ ;/ 在/ 结构层/ 构造/ 算子/ 库/ Σ/ =/ {/ σ/ ti1ti2/ …/ |/ 1/ / i1/ ,/ i2/ …/ / n/ }/ ;/ 在/ 语言/ 层/ 构造/ 算子/ 库/ Λ/ =/ {/ λ/ ti1ti2/ …/ |/ 1/ / i1/ ,/ i2/ …/ / n/ }/ ;/ tij/ 表示/ 部件/ cij/ 的/ 类型/ // // 注意/ ,/ 构造/ 各层/ 算子/ 库/ 的/ 过程/ 并/ 不是/ 独立/ 完成/ ,/ 而是/ 嵌入/ 3/ ./ 循环/ ,/ 直到/ 系统/ 中/ 只有/ 一个/ 部件/ 3.1/ ./ 在/ 系统/ 中/ 选择/ 串/ (/ 并/ )/ 联/ 的/ 部件/ ci1/ ,/ ci2/ ,/ …/ ,/ 在/ Ω/ 中/ 选择/ 可/ 将/ ci1/ ,/ ci2/ ,/ …/ 聚合/ 的/ 算子/ ω/ 作用/ 于/ 系统/ Rg/ 的/ 感知/ 层/ Pg/ ,/ 得到/ 更/ 抽象/ 的/ 感知/ Pa/ ;/ 3.2/ ./ 在/ Σ/ 中/ 选择/ 算子/ 与/ ω/ 对应/ 的/ 抽象/ 算子/ σ/ ,/ 作用/ 于/ 系统/ Rg/ 的/ 结构层/ Sg/ ,/ 得到/ 更/ 抽象/ 的/ 结构/ Sa/ ;/ 3.3/ ./ 在/ Λ/ 中/ 选择/ 对应/ 的/ 抽象/ 算子/ λ/ ,/ 作用/ 于/ 系统/ Rg/ 的/ 语言/ 层/ Lg/ ,/ 得到/ 更/ 抽象/ 的/ 语言/ La/ ;/ 3.4/ ./ 在/ 理论/ 层/ Tg/ 中/ 结合/ Pa/ ,/ Sa/ ,/ La/ 层/ 的/ 抽象/ 结果/ ,/ 利用/ 推理/ 规则/ 得到/ 由/ 部件/ ci1/ ,/ ci2/ ,/ …/ 聚合/ 而成/ 的/ 超/ 部件/ c/ 的/ 结构/ 描述/ 和/ 行为/ 模式/ ,/ 得到/ Ta/ ;/ 3.5/ ./ 将步/ 3.4/ 中/ 得到/ 的/ 结果/ 与/ 最/ 基本/ 部件/ 的/ 结构/ 描述/ 和/ 行为/ 模式/ 比较/ ,/ 若/ 得到/ 的/ 超/ 部件/ 与/ 某个/ 基本/ 部件/ 结构/ 描述/ 和/ 行为/ 模式/ 一致/ ,/ 则/ 重新/ 修改/ 第/ 3.1/ 、/ 3.2/ 、/ 3.3/ 、/ 3.4/ 步/ 得到/ 的/ 结果/ ;/ 3.6/ ./ 检查/ c/ 与/ 其它/ 部件/ 的/ 连接/ 情况/ (/ 串联/ // 并联/ )/ ,/ 采用/ 动态/ 方法/ 生成/ c/ 对应/ 的/ 算子/ ,/ 并/ 添加/ 到步/ 2/ 中/ 的/ 3/ 个/ 算子/ 库中/ ;/ 3.7/ ./ 输出/ 本次/ 抽象/ 运算/ 得到/ 的/ 更/ 抽象/ 的/ 系统/ Ra/ =/ (/ Pa/ ,/ Sa/ ,/ La/ ,/ Ta/ )/ ;/ Page8/ 算法/ HirechicalProcess/ 是/ 非常/ 一般/ 的/ ,/ 我们/ 可以/ 看到/ ,/ 在/ 分层/ 过程/ 中/ 需要/ 考虑/ 几个/ 问题/ :/ (/ 1/ )/ 新/ 算子/ 的/ 定义/ ./ 除了/ 进行/ 抽象/ 算子/ 的/ 预定/ 义/ 之外/ ,/ 当/ 对系统/ 的/ 某/ 一/ 层次/ 进行/ 抽象/ 运算/ 时/ ,/ 若/ 生成/ 了/ 新/ 类型/ 的/ 超/ 部件/ ,/ 还/ 需要/ 动态/ 在/ 算子/ 库中/ 定义新/ 的/ 算子/ ,/ 可以/ 考虑/ 利用/ 机器/ 学习/ 中/ 的/ 相关/ 理论/ 定义新/ 算子/ ,/ 使得/ 算子/ 的/ 动态/ 构造/ 实现/ 完全/ 的/ 自动化/ ,/ 从而/ 实现/ 系统/ 的/ 自动/ 分层/ ./ (/ 2/ )/ 系统/ 分层/ 不/ 唯一/ ./ 由于/ 在步/ 3.1/ 中/ 选择/ 下/ 一步/ 聚合/ 的/ 部件/ 不/ 唯一/ ,/ 使得/ 算法/ 生成/ 的/ 系统/ 的/ 分层/ 表示/ 不/ 唯一/ ,/ 为了/ 保证/ 得到/ 一个/ 有/ 辨识/ 能力/ 的/ 抽象/ 模型/ 应该/ 进一步/ 考虑/ 如何/ 选择/ 部件/ 进行/ 聚合/ ./ ①/ 保留/ 系统/ 的/ 可用/ 观测/ ./ 我们/ 看到/ ,/ 部件/ 在/ 聚合/ 过程/ 中/ 可能/ 会/ 隐藏/ 系统/ 的/ 可用/ 观测/ ,/ 使得/ 在/ 诊断/ 过程/ 中/ 对/ 真假/ 诊断/ 的/ 辨识/ 力/ 下降/ ,/ 即非/ 可/ 确定/ 诊断/ 问题/ (/ undiagnosabilityproblem/ )/ [/ 13/ ]/ ./ 如果/ 某一/ 分层/ 上/ 没有/ 任何/ 可用/ 观测/ 保留/ ,/ 则/ 该/ 层/ 是/ 完全/ 非可/ 确定/ 诊断/ 的/ ./ Mozetic/ 在/ 文献/ [/ 2/ ]/ 中将/ 诊断/ 过程/ 开始/ 于/ 至少/ 具有/ 一个/ 可用/ 观测/ 的/ 抽象/ 层/ ,/ 从而/ 避免/ 了/ 这种/ 完全/ 非可/ 确定/ 诊断/ 问题/ ./ Chittaro/ 在/ 文献/ [/ 3/ ]/ 中/ 提出/ 了/ 结构/ 树/ ,/ 并且/ 利用/ Rearrange/ 过程/ 重新/ 组织/ 了/ Mozetic/ 的/ 系统/ 分层/ 表示/ ,/ 保留/ 系统/ 可用/ 观测/ 的/ 同时/ 生成/ 了/ 更为/ 抽象/ 的/ 系统/ 分层/ 表示/ ,/ 降低/ 了/ 诊断/ 搜索/ 空间/ ,/ 提高/ 了/ 诊断/ 的/ 效率/ ./ 因此/ ,/ 在/ 选择/ 聚合/ 部件/ 时/ ,/ 应/ 尽可能/ 保留/ 系统/ 的/ 可用/ 观测/ ./ 具体/ 在/ 算法/ HirechicalProcess/ 的/ 步/ 3.1/ 中/ ,/ 可以/ 进行/ 以下/ 操作/ (/ 以/ 两个/ 部件/ 聚合/ 为例/ )/ :/ 查找/ 系统/ 中/ 的/ 部件/ ci/ 和/ cj/ ,/ 判断/ 二者/ 的/ 连接/ 方式/ ,/ 若/ 为/ 串联/ ,/ 则/ 检查/ 部件/ ci/ 和/ cj/ 的/ 互连/ 端口/ 是否/ 包含/ 观测/ 信息/ ,/ 不/ 包含/ 即/ 利用/ 相应/ 的/ 抽象/ 算子/ 进行/ 聚合/ 操作/ ;/ 若/ 为/ 并联/ ,/ 则/ 检查/ ci/ 和/ cj/ 各自/ 的/ 输入输出/ 端口/ 是否/ 包含/ 观测/ 信息/ ,/ 不/ 包含/ 即/ 利用/ 相应/ 的/ 抽象/ 算子/ 进行/ 聚合/ 操作/ ./ 显然/ ,/ 这个/ 检查/ 过程/ 是/ 线性/ 复杂/ 的/ ,/ 因此/ 不/ 影响/ 整个/ 算法/ 的/ 执行/ 效率/ ./ 这里/ 需要/ 说明/ 的/ 是/ ,/ 为了/ 简化/ 讨论/ ,/ 我们/ 只/ 考虑/ 了/ 部件/ 连接/ 的/ 两种/ 方式/ :/ 并联/ 和/ 串联/ ,/ 有些/ 系统/ 中/ 的/ 部件/ 之间/ 还/ 存在/ 着/ 更为/ 复杂/ 的/ 连接/ 方式/ ,/ 比如/ 星型/ -/ 网状结构/ [/ 14/ ]/ ,/ 可以/ 通过/ 转换/ 操作/ 将/ 其/ 转换成/ 拓扑/ 上/ 与/ 之/ 等价/ 的/ 并联/ 和/ 串联/ 结构/ ,/ 详见/ 文献/ [/ 14/ ]/ ./ ②/ 尽量/ 生成/ 与/ 基本/ 部件/ 类型/ 相同/ 的/ 超/ 部件/ ./ 在/ 选择/ 部件/ 聚合/ 时/ ,/ 应该/ 尽量避免/ 生成/ 与/ 基本/ 部件/ 类型/ 不同/ 的/ 超/ 部件/ ,/ 因为/ 一旦/ 生成/ 了/ 不同/ 类型/ 的/ 超/ 部件/ ,/ 就/ 需要/ 占用/ 空间/ 存储/ 该/ 部件/ 对应/ 的/ 类/ 信息/ ,/ 同时/ 也/ 增大/ 了/ 定义新/ 算子/ 的/ 难度/ ./ 我们/ 可以/ 通过/ 两种/ 方法/ 选择/ 聚合/ 部件/ :/ 一是/ 在/ 动态/ 定义/ 抽象/ 算子/ 库时/ ,/ 除了/ 定义/ 抽象/ 算子/ 的/ 作用/ 过程/ 外/ ,/ 增加/ 对/ 抽象/ 算子/ 作用/ 结果/ 的/ 比较/ 操作/ ,/ 即/ 对/ 生成/ 与/ 基本/ 类型/ 相同/ 的/ 超/ 部件/ 类型/ 的/ 抽象/ 算子/ 进行/ 标记/ ,/ 在/ 算法/ Hi/ -/ rechicalProcess/ 的/ 步/ 3.1/ 中将/ 聚合/ 部件/ 的/ 选择/ 与/ 抽象/ 算子/ 的/ 选择/ 结合/ 起来/ ,/ 尽量/ 选择/ 能够/ 生成/ 与/ 基本/ 部件/ 类型/ 相同/ 超/ 部件/ 的/ 部件/ 进行/ 聚合/ ./ 这种/ 方法/ 在/ 算法/ HirechicalProcess/ 的/ 步/ 3.1/ 聚合/ 部件/ 之前/ ,/ 需要/ 检查/ 部件/ 类型/ 与/ 算子/ 库中/ 的/ 带/ 标记/ 算子/ 的/ 作用/ 对象/ 类型/ 是否/ 匹配/ ,/ 如果/ 匹配/ ,/ 说明/ 部件/ 聚合/ 后/ 的/ 超/ 部件/ 类型/ 为/ 基本/ 部件/ 类型/ ,/ 因此/ 进行/ 聚合/ 操作/ ./ 假设/ 系统/ 中/ 包含/ n/ 个/ 部件/ ,/ 在/ 最坏/ 的/ 情况/ 下/ (/ 假设/ 系统/ 中/ 的/ n/ 个/ 部件/ 两/ 两/ 相连/ ,/ 这是/ 一种/ 极端/ 情况/ ,/ 实际/ 的/ 系统/ 一般/ 不会/ 达到/ )/ ,/ 动态/ 生成/ 的/ 算子/ 库中/ 的/ 算子/ 个数/ 为/ n/ (/ n/ -/ 1/ )/ 2/ 个/ ,/ 若/ 全部/ 为/ 标记/ 算子/ ,/ 则/ 在/ 部件/ 聚合/ 前/ 最/ 多/ 需要/ 进行/ n/ (/ n/ -/ 1/ )/ 杂性/ 简记/ 为/ O/ (/ n2/ )/ ./ 这种/ 方法/ 的/ 好处/ 是/ 当/ 聚合/ 部件/ 类型/ 与/ 算子/ 库中/ 的/ 带/ 标记/ 算子/ 的/ 作用/ 对象/ 类型/ 匹配/ 成功/ 时/ ,/ 则/ 在/ 步/ 3.4/ 中/ 无需/ 重复/ 生成/ 超/ 部件/ 的/ 行为/ 模式/ ,/ 提高/ 了/ 部件/ 的/ 聚合/ 效率/ ./ 二是/ 可以/ 在/ 算法/ HirechicalProcess/ 的/ 步/ 3.5/ 中/ 检查/ 新/ 生成/ 的/ 超/ 部件/ 类型/ ,/ 若/ 与/ 任意/ 基本/ 部件/ 类型/ 都/ 不/ 相同/ ,/ 我们/ 可以/ 放弃/ 前面/ 进行/ 的/ 抽象/ 运算/ ,/ 回到/ 步/ 3.1/ 中/ 重新/ 选择/ 聚合/ 部件/ ./ 当/ 每次/ 选择/ 的/ 聚合/ 部件/ 聚合/ 后/ 恰好/ 都/ 生成/ 与/ 某个/ 基本/ 部件/ 类型/ 相同/ 的/ 超/ 部件/ 时/ ,/ 这种/ 方法/ 获得/ 最好/ 的/ 效率/ ,/ 即/ 每次/ 在/ 算法/ HirechicalProcess/ 的/ 步/ 3.5/ 中/ 最/ 多/ 进行/ n/ 次/ 比较/ (/ n/ 为/ 基本/ 部件/ 个数/ )/ ./ 而/ 若/ 每次/ 选择/ 的/ 聚合/ 部件/ 聚合/ 后/ 都/ 生成/ 非/ 基本/ 部件/ 类型/ 的/ 超/ 部件/ ,/ 则/ 会/ 导致/ 算法/ HirechicalProcess/ 陷入/ 无限/ 循环/ 之中/ ,/ 因此/ 可以/ 在/ 此/ 加入/ 一个/ 阈值/ ,/ 限制/ 循环/ 选择/ 聚合/ 部件/ 的/ 次数/ ./ ③/ 应用/ 抽象/ 算子/ 的/ 过程/ 中/ 一个/ 关键点/ 是/ 如何/ 得到/ 超/ 部件/ 的/ 行为/ 模式/ 甚至/ 是/ 行为/ 模型/ ,/ 这/ 决定/ 了/ 抽象/ 后/ 的/ 模型/ 质量/ ,/ 也/ 影响/ 着/ 分层/ 抽象/ 过程/ 的/ 效率/ 和/ 正确性/ ./ 假设/ 我们/ 要/ 将/ 部件/ c1/ ,/ c2/ ,/ …/ ,/ ck/ 聚合/ 成超/ 部件/ c/ ,/ ci/ 包含/ Mi/ 种/ 行为/ 模式/ ,/ 1/ / i/ / k/ ,/ 则/ 显然/ 地/ ,/ 超/ 部件/ c/ 最多/ 具有/ N/ =/ ∏/ k/ 可以/ 看出/ ,/ 超/ 部件/ c/ 的/ 这/ N/ 中/ 行为/ 模式/ 中/ 有些/ 是/ 不可/ 区分/ 的/ ,/ 对于/ 这样/ 的/ 行为/ 模式/ 进行/ 合并/ ,/ 最终/ 得到/ Page9/ 超/ 部件/ c/ 的/ 小于/ 等于/ N/ 种/ 行为/ 模式/ ,/ 既/ 降低/ 了/ 存储空间/ ,/ 又/ 有利于/ 后面/ 超/ 部件/ 与/ 基本/ 部件/ 的/ 比较/ ./ 可以/ 通过/ 以下/ 方法/ 在/ 算法/ HirechicalProcess/ 的/ 步/ 3.4/ 中/ 生成/ 超/ 部件/ 的/ 行为/ 模式/ :/ 逐个/ 考察/ k/ 个/ 聚合/ 部件/ c1/ ,/ c2/ ,/ …/ ,/ ck/ 行为/ 模式/ 的/ 笛卡尔/ 积/ BMi/ (/ 一阶/ 逻辑/ 公式/ )/ ,/ 1/ / i/ / N/ ,/ 根据/ 结构层/ 中/ 存储/ 的/ 各/ 部件/ 之间/ 的/ 连接/ 关系/ 以及/ 生成/ 的/ 超/ 部件/ 的/ 结构/ ,/ 在/ BMi/ 中将/ 含有/ 被/ 隐藏/ 的/ 端口/ 的/ 文字/ 删除/ ,/ 推出/ 只/ 含有/ 超/ 部件/ 端口/ 的/ 行为/ 公式/ 作为/ 超/ 部件/ 的/ 行为/ 模式/ 保存/ ,/ 并/ 动态/ 合并/ 不可/ 区分/ 的/ (/ 完全相同/ 或/ 存在/ 子集/ 和/ 超集/ 关系/ 的/ 行为/ 模式/ )/ 行为/ 模式/ ./ 1/ ./ BMc/ =/ {/ }/ ;/ // // 存储/ 超/ 部件/ c/ 的/ 行为/ 模式/ 2/ ./ 在/ 结构/ 数据库/ 中/ 查找/ 部件/ c1/ ,/ c2/ ,/ …/ ,/ ck/ 的/ 连接/ 端口/ 、/ 超/ 部件/ 端口/ 以及/ 端口/ 之间/ 的/ 连接/ 关系/ ;/ 3/ ./ 考察/ 部件/ c1/ ,/ c2/ ,/ …/ ,/ ck/ 行为/ 模式/ 的/ 笛卡尔/ 积/ BMi/ ,/ 1/ / i/ / N3/ ./ 1/ ./ BMi/ =/ 删除/ BMi/ 中/ 含有/ 部件/ c1/ ,/ c2/ ,/ …/ ,/ ck/ 的/ 连接/ 端口/ 的/ 文字/ 并/ 根据/ 端口/ 之间/ 的/ 关系/ 保留/ 超/ 部件/ 端口/ 文字/ 及/ 一阶/ 逻辑关系/ ;/ 3.2/ ./ 将/ BMi/ 与/ BMc/ 中/ 的/ 行为/ 模式/ 依次/ 比较/ ,/ 若/ BMc/ 中/ 存在/ 与/ BMi/ 不可/ 区分/ 的/ 行为/ 模式/ ,/ 则/ 保留/ 两者/ 中/ 子集/ 的/ 行为/ 模式/ 并/ 转步/ 3/ ;/ 否则/ BMc/ =/ BMc/ ∪/ {/ BMi/ }/ ;/ i/ =/ 1/ 可以/ 看出/ ,/ 以上/ 生成/ 超/ 部件/ 行为/ 模式/ 的/ 算法/ 在/ 最坏/ 情况/ 下/ (/ 超/ 部件/ 的/ 所有/ 可能/ 的/ N/ 种/ 行为/ 模式/ 均/ 不/ 相同/ )/ 的/ 时间/ 复杂性/ 为/ Tworst/ =/ N/ (/ N/ -/ 1/ )/ ∏/ kMi/ ,/ 假如/ 每个/ 聚合/ 部件/ 都/ 有/ n/ 种/ 行为/ 模式/ ,/ 则/ Tworst/ =/ nk/ (/ nk/ -/ 1/ )/ 部件/ 的/ 所有/ 可能/ 的/ N/ 种/ 行为/ 模式/ 均/ 相同/ )/ 的/ 时间/ 复杂性/ 为/ Tbest/ =/ ∏/ k/ 行为/ 模式/ ,/ 则/ Tbest/ =/ O/ (/ nk/ )/ ./ 故超/ 部件/ 的/ 行为/ 模式/ 可以/ 在/ 多项式/ 时间/ 内/ 生成/ ./ 图/ 7/ 是/ 图/ 1/ 所示/ 的/ 系统/ 的/ 部分/ 结构/ ,/ 我们/ 举例说明/ 按照/ 图/ 6/ 所示/ 的/ 算法/ 将/ PUMP/ 型/ 部件/ PM1/ 和/ PIPE/ 型/ 部件/ P5/ 聚合/ 生成/ 超/ 部件/ PMP/ 的/ 行为/ 模型/ 的/ 过程/ ./ PM1/ 的/ 行为/ 模式/ 可以/ 描述/ 如下/ :/ ①/ pump/ (/ PM1/ ,/ t1/ ,/ t2/ )/ ∧/ ok/ (/ PM1/ )/ →/ Δ/ FlowValue/ (/ t1/ ,/ ②/ pump/ (/ PM1/ ,/ t1/ ,/ t2/ )/ ∧/ uf/ (/ PM1/ )/ →/ Δ/ FlowValue/ (/ t1/ ,/ t2/ )/ =/ 0/ ∧/ Δ/ FlowValue/ (/ t1/ ,/ Fk/ )/ =/ 0/ ;/ t2/ )/ =/ 0/ ∧/ Δ/ FlowValue/ (/ t1/ ,/ Fk/ )/ =/ +/ ;/ (/ t1/ ,/ t2/ )/ =/ 0/ ∧/ Δ/ FlowValue/ (/ t1/ ,/ Fk/ )/ =/ -/ ;/ t2/ )/ =/ +./ ③/ pump/ (/ PM1/ ,/ t1/ ,/ t2/ )/ ∧/ of/ (/ PM1/ )/ →/ Δ/ FlowValue/ ④/ pump/ (/ PM1/ ,/ t1/ ,/ t2/ )/ ∧/ lk/ (/ PM1/ )/ →/ Δ/ FlowValue/ (/ t1/ ,/ P5/ 的/ 行为/ 模式/ 可以/ 描述/ 如下/ :/ ⑤/ pipe/ (/ P5/ ,/ t2/ ,/ t3/ )/ ∧/ ok/ (/ P5/ )/ →/ Δ/ FlowValue/ (/ t2/ ,/ t3/ )/ =/ 0/ ;/ ⑥/ pipe/ (/ P5/ ,/ t2/ ,/ t3/ )/ ∧/ lk/ (/ P5/ )/ →/ Δ/ FlowValue/ (/ t2/ ,/ t3/ )/ =/ +./ 在/ 结构/ 数据库/ 中/ 可以/ 得到/ PM1/ 和/ P5/ 的/ 端口/ 及/ 端口/ 之间/ 的/ 连接/ 关系/ 为/ portof/ (/ t1/ ,/ PM1/ )/ ,/ portof/ (/ t2/ ,/ PM1/ )/ ,/ portof/ (/ t2/ ,/ P5/ )/ ,/ portof/ (/ t3/ ,/ P5/ )/ ,/ connected/ (/ t2/ ,/ t2/ )/ ,/ 得到/ 的/ 超/ 部件/ PMP/ 的/ 端口/ 为/ portof/ (/ t1/ ,/ PMP/ )/ ,/ portof/ (/ t3/ ,/ PMP/ )/ ./ 依次/ 考察/ PMP/ 所有/ 可能/ 的/ 行为/ 模式/ ,/ 并/ 动态/ 更新/ 集合/ BMc/ ./ ①/ ⑤/ :/ pmp/ (/ PMP/ ,/ t1/ ,/ t3/ )/ ∧/ BMpmp1/ (/ PMP/ )/ →/ Δ/ FlowValue/ (/ t1/ ,/ t2/ )/ =/ 0/ ∧/ Δ/ FlowValue/ (/ t1/ ,/ Fk/ )/ =/ 0/ ∧/ Δ/ FlowValue/ (/ t2/ ,/ t3/ )/ =/ 0/ ,/ 根据/ portof/ (/ t2/ ,/ PM1/ )/ ,/ portof/ (/ t2/ ,/ P5/ )/ ,/ connected/ (/ t2/ ,/ t2/ )/ ,/ 得到/ pmp/ (/ PMP/ ,/ t1/ ,/ t3/ )/ ∧/ BMpmp1/ (/ PMP/ )/ →/ Δ/ FlowValue/ (/ t1/ ,/ t3/ )/ =/ 0/ ∧/ Δ/ FlowValue/ (/ t1/ ,/ Fk/ )/ =/ 0/ ,/ 即/ 得到/ PMP/ 的/ 第一个/ 行为/ 模式/ BMpmp1/ :/ Δ/ FlowValue/ (/ t1/ ,/ t3/ )/ =/ 0/ ∧/ Δ/ FlowValue/ (/ t1/ ,/ Fk/ )/ =/ 0/ ./ BMc/ 初始/ 时为/ 空/ ,/ 即/ 不/ 存在/ 与/ 该/ 行为/ 模式/ 不可/ 区分/ 的/ 行为/ 模式/ ,/ 故/ 更新/ BMc/ =/ {/ BMpmp1/ }/ ./ 同理/ ,/ 对于/ ②/ ⑤/ ,/ ③/ ⑤/ ,/ ④/ ⑤/ 情况/ 做/ 同样/ 处理/ ,/ 得到/ BMc/ =/ {/ BMpmp1/ ,/ BMpmp2/ ,/ BMpmp3/ ,/ BMpmp4/ }/ ,/ 其中/ BMpmp2/ :/ Δ/ FlowValue/ (/ t1/ ,/ t3/ )/ =/ 0/ ∧/ Δ/ FlowValue/ (/ t1/ ,/ Fk/ )/ =/ +/ ,/ BMpmp3/ :/ Δ/ FlowValue/ (/ t1/ ,/ t3/ )/ =/ 0/ ∧/ Δ/ FlowValue/ (/ t1/ ,/ Fk/ )/ =/ -/ ,/ BMpmp4/ :/ Δ/ FlowValue/ (/ t1/ ,/ t3/ )/ =/ +./ 对于/ ①/ ⑥/ ,/ pmp/ (/ PMP/ ,/ t1/ ,/ t3/ )/ ∧/ BMpmp5/ (/ PMP/ )/ →/ Δ/ FlowValue/ (/ t1/ ,/ t3/ )/ =/ +/ ∧/ Δ/ FlowValue/ (/ t1/ ,/ Fk/ )/ =/ 0/ ,/ 得到/ PMP/ 的/ 行为/ 模式/ BMpmp5/ :/ Δ/ FlowValue/ (/ t1/ ,/ t3/ )/ =/ +/ ∧/ Δ/ FlowValue/ (/ t1/ ,/ Fk/ )/ =/ 0/ ,/ 经过/ 检查/ ,/ BMpmp5/ 为/ BMc/ 集合/ 中/ 的/ 行为/ 模式/ BMpmp4/ 的/ 超集/ ,/ 故/ BMpmp5/ 不/ 予以/ 保存/ ,/ BMc/ 保持/ 不变/ ./ 同理/ 对于/ ②/ ⑥/ ,/ ③/ ⑥/ ,/ ④/ ⑥/ 情况/ 与/ ①/ ⑥/ 相同/ ,/ 最后/ 得到/ BMc/ =/ {/ BMpmp1/ ,/ BMpmp2/ ,/ BMpmp3/ ,/ BMpmp4/ }/ ,/ 即/ 得到/ 超/ 部件/ PMP/ 的/ 4/ 种/ 行为/ 模式/ ./ 算法/ HirechicalProcess/ 的/ 正确性/ 显然/ ./ 从/ 该/ 算法/ 中/ 我们/ 看到/ ,/ 初始/ 时/ 生成/ 了/ 系统/ 最/ 基本/ 层/ 相互/ 连/ Page10/ 接/ 的/ 部件/ 对应/ 的/ 可能/ 的/ 抽象/ 算子/ ,/ 只要/ 系统/ 部件/ 数目/ 大于/ 1/ ,/ 则/ 循环/ 必然/ 得到/ 执行/ ./ 而/ 每/ 执行/ 循环/ 一次/ ,/ 都/ 有/ 多于/ 一个/ 部件/ 聚合/ 成/ 一个/ 超/ 部件/ ,/ 并且/ 对于/ 生成/ 了/ 不同于/ 基本/ 部件/ 类型/ 的/ 超/ 部件/ 或/ 生成/ 了/ 不同于/ 上/ 几层/ 系统/ 的/ 连接/ 方式/ 的/ 情况/ ,/ 算法/ 都/ 向/ 算子/ 库中/ 定义/ 了/ 新/ 算子/ ./ 因此/ ,/ 随着/ 循环/ 次数/ 的/ 增加/ ,/ 系统/ 的/ 部件/ 数目/ 必然/ 逐次/ 减少/ ,/ 同时/ ,/ 亦/ 能/ 保证/ 算子/ 库/ 始终/ 对系统/ 的/ 整个/ 分层/ 是/ 完备/ 的/ ./ 所以/ 我们/ 可以/ 说/ 算法/ HirechicalProcess/ 必然/ 生成/ 系统/ 的/ 抽象/ 分层/ 表示/ ,/ 并且/ 终止/ 于/ 只/ 含有/ 一个/ 超/ 部件/ 的/ 系统/ ./ 所示/ 的/ 系统/ 进行/ 抽象/ 分层/ ./ 下面/ 我们/ 利用/ 算法/ HirechicalProcess/ 对图/ 1/ 首先/ 找到/ 系统/ 中/ 相连/ 的/ 部件/ 元组/ 集合/ 如下/ :/ ω/ PipeValve/ =/ (/ P1/ ,/ V1/ )/ =/ PV1/ ,/ ω/ PipeValve/ (/ P3/ ,/ V2/ )/ =/ PV2/ ,/ 定义新/ 算子/ ω/ 2Pipe/ ω/ 2Pipe/ (/ PV1/ ,/ P2/ )/ =/ PVP1/ ,/ ω/ 2Pipe/ (/ PV2/ ,/ P4/ )/ =/ PVP2/ ω/ 2PipeThree/ -/ way/ (/ TW1/ ,/ PVP1/ ,/ PVP2/ )/ =/ TWP1/ ,/ 定义新/ 算子/ ω/ 2Three/ -/ way/ ω/ 2Three/ -/ way/ (/ TWP1/ ,/ TW2/ )/ =/ TWTW/ ω/ 2Pipe/ (/ P5/ ,/ TWTW/ )/ =/ PTW1/ ,/ ω/ 2Pipe/ (/ PTW1/ ,/ P6/ )/ =/ PTP/ 图/ 8/ 不同/ 的/ 部件/ 聚合/ 顺序/ 得到/ 的/ 不同/ 的/ 系统/ 分层/ 过程/ (/ a/ )/ 〈/ PM1/ ,/ P5/ ,/ s/ 〉/ ,/ 〈/ P5/ ,/ TW1/ ,/ s/ 〉/ ,/ 〈/ P1/ ,/ V1/ ,/ s/ 〉/ ,/ 〈/ V1/ ,/ P2/ ,/ s/ 〉/ ,/ 〈/ P3/ ,/ V2/ ,/ s/ 〉/ ,/ 〈/ V2/ ,/ P4/ ,/ s/ 〉/ ,/ 〈/ TW1/ ,/ P1/ ,/ P3/ ,/ s/ 〉/ ,/ 〈/ TW2/ ,/ P2/ ,/ P4/ ,/ s/ 〉/ ,/ 〈/ TW2/ ,/ P6/ ,/ s/ 〉/ ./ 在/ 部件/ 元组/ 集合/ 中/ 删除/ 部件/ 类型/ 和/ 连接/ 方式/ 相同/ 的/ 元组/ 得到/ 互不/ 相同/ 的/ 4/ 个/ 元组/ :/ 〈/ PM1/ ,/ P5/ ,/ s/ 〉/ ,/ 〈/ P5/ ,/ TW1/ ,/ s/ 〉/ ,/ 〈/ V1/ ,/ P2/ ,/ s/ 〉/ ,/ 〈/ TW1/ ,/ P1/ ,/ P3/ ,/ s/ 〉/ ,/ 故/ 初始/ 时/ 动态/ 生成/ 的/ 3/ 个/ 算子/ 库为/ Ω/ =/ {/ ω/ PumpPipe/ ,/ ω/ PipeThree/ -/ way/ ,/ ω/ PipeValve/ ,/ ω/ 2PipeThree/ -/ way/ }/ ;/ Σ/ =/ {/ σ/ PumpPipe/ ,/ σ/ PipeThree/ -/ way/ ,/ σ/ PipeValve/ ,/ σ/ 2PipeThree/ -/ way/ }/ ;/ Λ/ =/ {/ λ/ PumpPipe/ ,/ λ/ PipeThree/ -/ way/ ,/ λ/ PipeValve/ ,/ λ/ 2PipeThree/ -/ way/ }/ ./ 图/ 8/ 和/ 图/ 9/ 中以/ 感知/ 层/ 算子/ 的/ 运算/ 为例/ ,/ 给出/ 了/ 按照/ 部件/ 的/ 不同/ 聚合/ 顺序/ 得到/ 的/ 系统/ 的/ 不同/ 抽象/ 分层/ 表示/ ./ Page11/ ω/ 2PipeThree/ -/ way/ (/ TW1/ ,/ P1/ ,/ P3/ )/ =/ TP2/ ,/ 定义新/ 算子/ ω/ 2valveeThree/ -/ way/ ω/ PipeValve/ (/ P2/ ,/ V1/ )/ =/ PV1/ ,/ ω/ PipeValve/ (/ P4/ ,/ V2/ )/ =/ PV2/ ω/ PipeThree/ -/ way/ (/ TW2/ ,/ P6/ )/ =/ TWP2/ ω/ 2PipeThree/ -/ way/ (/ TWP2/ ,/ PV1/ ,/ PV2/ )/ =/ PVTW2/ ,/ 定义新/ 算子/ ω/ 2Three/ -/ way/ ω/ 2Three/ -/ way/ (/ TW1/ ,/ PVTW2/ )/ =/ TWTW/ ,/ ω/ 2PipeP5/ ,/ TWTW/ )/ =/ PWPW1/ ω/ PumpPipe/ (/ PM1/ ,/ PWPW1/ )/ =/ PMP1/ 图/ 9/ 不同/ 的/ 部件/ 聚合/ 顺序/ 得到/ 的/ 不同/ 的/ 系统/ 分层/ 过程/ (/ b/ )/ 6/ 结语/ 本文/ 在/ Saitta/ 和/ Zucker/ 提出/ 的/ KRA/ 模型/ 框架/ 下/ 建立/ 系统/ 模型/ ,/ 给出/ 了/ 抽象/ 算子/ 在/ 系统/ 的/ 基本/ 框架/ Rg/ 上/ 进行/ 的/ 非/ 独立/ 的/ 运算/ 过程/ ,/ 使得/ 不会/ 在/ 抽象/ 过程/ 中/ 生成/ 重复/ 的/ 部件/ 类型/ ,/ 不仅/ 降低/ 了/ 存储空间/ ,/ 还/ 增加/ 了/ 在/ 进一步/ 的/ 抽象/ 运算/ 中/ 算子/ 重用/ 的/ 概率/ ,/ 提高/ 了/ 整个/ 抽象/ 运算/ 的/ 效率/ ./ 同时/ 形式化/ 地/ 描述/ 了/ 基于/ 模型/ 诊断/ 中/ 的/ 抽象/ 分层/ 过程/ ,/ 提出/ 了/ 动态/ 和/ 静态/ 构造/ 算子/ 库/ 两种/ 方法/ ./ KRA/ 模型/ 是/ 对/ 静态/ 物理/ 世界/ 的/ 框架/ 描述/ ,/ 在/ 下/ 一步/ 的/ 工作/ 中/ ,/ 我们/ 会/ 继续/ 扩展/ 该/ 框架/ ,/ 对/ 动态/ 物理/ 世界/ 建模/ 过程/ 的/ 形式化/ 描述/ 以及/ 复杂性/ 进行/ 深入/ 的/ 研究/ ./ 

