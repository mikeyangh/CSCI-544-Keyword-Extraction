Page1/ 绿色/ 网络/ 和/ 绿色/ 评价/ :/ 节能/ 机制/ 、/ 模型/ 和/ 评价/ 林闯田源/ 姚敏/ (/ 清华大学/ 计算机科学/ 与/ 技术/ 系/ 北京/ 100084/ )/ 摘要/ 随着/ 网络/ 规模/ 的/ 扩大/ 和/ 网络设备/ 的/ 不断更新/ ,/ 目前/ 的/ 网络/ 对/ 能量/ 的/ 利用/ 日益/ 暴露出/ 能耗/ 高/ 、/ 效率/ 低/ ,/ 浪费/ 多/ 等/ 诸多/ 问题/ ./ 节省/ 网络/ 能耗/ 、/ 构建/ 绿色/ 网络/ 不仅/ 成为/ 计算机领域/ 一个/ 意义/ 重大/ 、/ 需要/ 迫切/ 解决/ 的/ 课题/ ,/ 也/ 成为/ 影响/ 社会/ 可/ 持续/ 发展/ 和/ 国家/ 发展/ 战略/ 的/ 一个/ 重要/ 因素/ ./ 目前/ ,/ 大量/ 绿色/ 网络/ 的/ 研究/ 工作/ 致力于/ 减少/ 网络系统/ 的/ 无用/ 能耗/ ,/ 提高/ 能量/ 利用率/ ./ 文中/ 将/ 能量/ 看成/ 一种/ 系统资源/ ,/ 从/ 资源分配/ 和/ 任务/ 管理/ 角度/ 对/ 绿色/ 网络/ 的/ 机制/ 和/ 策略/ 进行/ 了/ 综述/ ,/ 介绍/ 了/ 模型/ 方法/ 在/ 绿色/ 评价/ 中/ 的/ 应用/ ./ 基于/ 这些/ 讨论/ ,/ 文中/ 提出/ 了/ 基于/ 随机/ 模型/ 的/ 绿色/ 评价/ 框架/ ,/ 为/ 构建/ 绿色/ 网络/ 和/ 节能/ 机制/ 的/ 评价/ 体系/ 奠定/ 了/ 基础/ ./ 关键词/ 绿色/ 网络/ ;/ 绿色/ 评价/ ;/ 节能/ 机制/ ;/ 资源管理/ ;/ 随机/ 模型/ 1/ 引言/ 低碳/ 节能/ 已经/ 成为/ 全球/ 最受/ 关注/ 的/ 话题/ 之一/ ,/ VECC/ -/ MEP/ 机构/ 在/ “/ 到/ 2050/ 年/ 减半/ 世界/ 碳/ 排放/ ”/ 的/ 报告/ ①/ 中/ 指出/ :/ 2020/ 年/ 温室/ 气体/ 排放量/ 将/ 达到/ 峰值/ ./ 为此/ ,/ 2009/ 年/ 的/ 哥本哈根/ 气候/ 峰会/ 将/ 减少/ 全球/ 二氧化碳/ 排放量/ 作为/ 首要/ 讨论/ 任务/ ②/ ./ 中国/ 作为/ 一个/ 发/ Page2/ 展中/ 大国/ ,/ 预计/ 未来/ 10/ 到/ 20/ 年/ 的/ 碳/ 排放量/ 会/ 远超过/ 美国/ ,/ 我国/ 承诺/ 到/ 2020/ 年/ 实现/ 单位/ 国内/ 生产总值/ 二氧化碳/ 排放/ 比/ 2005/ 年/ 下降/ 40/ %/ ~/ 45/ %/ ./ 据/ 报道/ ①/ ,/ 在/ 即将/ 制定/ 的/ “/ 十二五/ ”/ 发展/ 规划/ 中/ ,/ 节能/ 将/ 成为/ 重要/ 内容/ ./ 能耗/ 问题/ 对/ 我国/ 的/ 科学/ 发展/ 和/ 可/ 持续/ 发展/ 具有/ 重大/ 的/ 影响/ ./ 信息/ 和/ 通信/ 技术/ 行业/ 作为/ 全球/ 增长/ 最快/ 的/ 行业/ 之一/ ,/ 其碳/ 排放/ 也/ 随着/ 行业/ 的/ 增长/ 而/ 不断/ 增长/ ,/ 据统计/ [/ 1/ ]/ ,/ 目前/ 信息/ 和/ 通信/ 技术/ 领域/ 的/ 碳/ 排放/ 占/ 全球/ 的/ 2/ %/ ,/ 而/ 这/ 一/ 比例/ 到/ 2020/ 年/ 将/ 翻番/ ./ 2008/ 年/ 服务/ 于/ 互联网/ 的/ 路由器/ 、/ 服务器/ 、/ 交换机/ 、/ 冷却/ 设施/ 、/ 数据中心/ 等/ 各种/ 设备/ 总共/ 消耗/ 8680/ 亿度/ 电/ ,/ 占/ 全球/ 总/ 耗电量/ 的/ 5.3/ %/ ②/ ./ 文献/ [/ 2/ ]/ 中/ 指出/ ,/ 按照/ 目前/ 的/ 增长/ 趋势/ ,/ 到/ 2025/ 年/ ,/ IT/ 行业/ 平均/ 能耗/ 会/ 达到/ 2006/ 年/ 的/ 5/ 倍/ ,/ 网络/ 领域/ 能耗/ 更会/ 达到/ 13/ 倍/ ./ 这/ 意味着/ 到/ 2025/ 年/ 网络/ 领域/ 占/ IT/ 业/ 的/ 总/ 能耗/ 将/ 增长/ 到/ 43/ %/ ./ 耗电/ 问题/ 已/ 成为/ 网络/ 和/ 信息系统/ 持续/ 发展/ 的/ 重大/ 障碍/ ./ 传统/ 的/ 网络系统/ 设计/ 的/ 两个/ 原则/ 有悖于/ 低碳/ 节能/ 的/ 目标/ :/ 一是/ 超额/ 资源/ 供给/ ,/ 在/ 缺少/ QoS/ 支持/ 的/ 因特网/ 架构/ 下/ ,/ 超额/ 资源/ 供给/ 能/ 使/ 网络/ 承受/ 突发/ 的/ 峰值/ 负载/ ;/ 另/ 一个/ 是/ 冗余/ 设计/ ,/ 通过/ 冗余/ 链路/ 和/ 设备/ ,/ 提高/ 网络/ 的/ 可靠性/ ,/ 以/ 应对/ 突发/ 的/ 故障/ 失效/ ./ 这/ 两个/ 原则/ 都/ 没有/ 考虑/ 到/ 能量/ 因素/ ./ 随着/ 网络/ 规模/ 的/ 扩大/ 和/ 网络设备/ 的/ 不断更新/ ,/ 能量/ 的/ 利用/ 日益/ 暴露出/ 能耗/ 高/ 、/ 效率/ 低/ ,/ 浪费/ 多/ 等/ 诸多/ 问题/ ./ 互联网/ 骨干/ 网络/ 的/ 忙/ 时/ 最大/ 平均/ 链路/ 利用率/ 不足/ 30/ %/ ,/ 很多/ 网络/ 的/ 闲时/ 链路/ 利用率/ 只有/ 5/ %/ 以下/ [/ 3/ ]/ ,/ 而/ 网络设备/ 按照/ 峰值/ 设计/ 消耗/ 能量/ ,/ 绝大部分/ 设备/ 7/ ×/ 24/ 小时/ 全速/ 工作/ ,/ 这为/ 绿色/ 网络/ 的/ 构建/ 提出/ 了/ 挑战/ 也/ 提供/ 了/ 机会/ ./ 网络/ 中/ 能量/ 浪费/ 和/ 能耗/ 成本/ 的/ 约束/ ,/ 限制/ 着/ 系统/ 性能/ 方面/ 的/ 进一步提高/ ,/ 尤其/ 随着/ 云/ 计算/ 和/ 大规模/ 数据中心/ 这些/ “/ 能耗/ 大户/ ”/ 的/ 发展/ ,/ 能耗/ 因素/ 往往/ 成为/ 限制/ 其/ 规模/ 和/ 服务/ 能力/ 的/ 瓶颈/ ./ 构建/ 绿色/ 网络/ ,/ 节省/ 网络/ 能耗/ 成为/ 计算机网络/ 领域/ 一个/ 意义/ 重大/ 、/ 迫切需要/ 解决/ 的/ 研究课题/ ./ 绿色/ 网络/ 的/ 目的/ 是/ 节省/ 互联网/ 的/ 能耗/ ./ 目前/ 许多/ 政府/ 机构/ 和/ 产业/ 组织/ 制定/ 标准/ 和/ 法规/ 提倡/ 绿色/ 网络/ ./ 美国贝尔实验室/ 倡导/ 组建/ 了/ 全球性/ 联盟/ “/ 绿色/ 沟通/ ”/ ,/ 旨在/ 实现/ 千倍/ 降低/ 能耗/ 的/ 目标/ ./ 为了/ 控制/ 以太网/ 能耗/ ,/ 电子/ 电气工程师/ 协会/ 正式/ 批准/ 了/ 802.3/ azEEE/ 标准规范/ ③/ ,/ 其中/ EEE/ 是/ EnergyEfficientEthernet/ 的/ 缩写/ ,/ 即/ 高效/ 节能/ 以太网/ ,/ 旨在/ 降低/ 网络设备/ 的/ 能耗/ ,/ 在/ 网络资源/ 利用率/ 较/ 低时/ ,/ 网络设备/ 将/ 自动/ 转为/ 低能耗/ 状态/ ./ 如果/ 网络设备/ 能耗/ 与/ 负载/ 流量/ 成正比/ ,/ 那么/ 网络系统/ 总/ 能耗/ 将会/ 下降/ ,/ 相同/ 能耗/ 下/ 可/ 部署/ 更/ 多/ 的/ 网络设施/ ,/ 从而/ 提高/ 整个/ 网络系统/ 的/ 可扩展性/ ,/ 所以/ 绿色/ 网络/ 对/ 社会/ 和/ 网络/ 的/ 可/ 持续/ 发展/ 将/ 产生/ 深远/ 的/ 影响/ ./ 绿色/ 网络/ 是/ 一个/ 系统/ 级/ 的/ 研究课题/ ,/ 涉及/ 网络体系结构/ 、/ 网络协议/ 、/ 网络设备/ 结构/ 创新/ 和/ 算法/ 设计/ 与/ 优化/ 等/ 网络/ 领域/ 的/ 核心/ 科学/ 问题/ ./ 解决/ 这些/ 问题/ 需要/ 集成化/ 的/ 关键技术/ 支持/ ./ 如果/ 将/ 能量/ 看成/ 一种/ 系统资源/ ,/ 那么/ 对/ 能耗/ 的/ 管理/ 和/ 控制/ 可以/ 归结为/ 资源配置/ 和/ 管理/ 问题/ ,/ 具体/ 可以/ 分为/ 资源分配/ 、/ 任务调度/ 和/ 架构/ 部署/ 3/ 个/ 方面/ ./ 资源/ 的/ 分配/ 也/ 是/ 对/ 能量/ 的/ 分配/ ,/ 网络系统/ 可以/ 看成/ 一个/ 生产者/ -/ 消费者/ 系统/ ,/ 生产者/ 分配资源/ 为/ 消费者/ 提供/ 服务/ ,/ 对/ 服务/ 过程/ 中/ 的/ 能耗/ 进行/ 控制/ 实际/ 是/ 对/ 资源分配/ 过程/ 的/ 控制/ ./ 任务调度/ 通过/ 制定/ 规则/ 来/ 决定/ 从/ 等待/ 队列/ 中/ 选择/ 哪个/ 任务/ 进行/ 发送/ ,/ 使得/ 所有/ 输入/ 业务/ 能够/ 按照/ 预定/ 的/ 方式/ 得到/ 处理/ ./ 架构/ 部署/ 是从/ 全局/ 的/ 角度/ 对系统/ 进行/ 体系结构/ 的/ 设计/ 和/ 资源/ 的/ 优化/ 部署/ ./ 绿色/ 网络/ 的/ 研究/ 需要/ 综合/ 考虑/ 能量/ 和/ 性能/ 因素/ ,/ 而/ 不同/ 的/ 节能/ 模型/ 对于/ 性能/ 的/ 影响/ 不同/ ./ 随着/ 网络/ 技术/ 应用/ 的/ 不断/ 发展/ ,/ 某些/ 特定/ 领域/ 的/ 业务/ 对/ 网络/ QoS/ 提出/ 了/ 更/ 高/ 的/ 要求/ ,/ 网络资源/ 的/ 复杂性/ 、/ 异构/ 性/ 等/ 特性/ 和/ 业务/ 需求/ 的/ 多样化/ 导致/ 网络/ 能耗/ 的/ 管理/ 复杂度/ 增加/ ,/ 这/ 就/ 加大/ 了/ 高/ 能效/ 资源配置/ 机制/ 和/ 算法/ 的/ 研究/ 难度/ ./ 有效/ 的/ 能耗/ 管理/ 要/ 同时/ 满足/ “/ 绿色/ ”/ 和/ QoS/ 的/ 双重/ 要求/ ,/ 这/ 就/ 使得/ 绿色/ 网络/ 的/ 实现目标/ 具有/ 双重性/ ,/ 所以/ 绿色/ 网络/ 中/ 的/ 问题/ 往往/ 是/ 在/ 满足/ 一定/ 性能/ 要求/ 和/ 系统/ 有限/ 资源/ 的/ 约束/ 下/ 的/ 最小/ 能耗/ 问题/ ,/ 这/ 涉及/ 到/ 了/ 网络/ 优化/ 问题/ ./ 优化/ 问题/ 需要/ 对/ 目标/ 函数/ 和/ 约束条件/ 进行/ 形式化/ 描述/ ,/ 我们/ 可以/ 通过/ 评价/ 网络系统/ 中/ 特定/ 属性/ 和/ 能耗/ 的/ 关系/ ,/ 来/ 构造/ 优化/ 的/ 目标/ 函数/ 和/ 约束条件/ 中/ 的/ 变量/ ./ 目前/ 针对/ 绿色/ 网络/ 的/ 评价/ 存在/ 的/ 问题/ 有/ :/ 缺乏/ 系统/ 的/ 模型/ 方法/ 和/ 分析/ ;/ 大多数/ 建立/ 在/ 具体/ 的/ 某/ 一项/ 或/ 两项/ 系统/ 属性/ 上/ ,/ 具有/ 一定/ 的/ 局限性/ ;/ 主要/ 针对/ 具体/ 应用/ 背景/ 进行/ 分析/ ,/ 缺乏/ 理论/ 基础/ ,/ 当/ 具体/ 问题/ 变化/ 时/ ,/ 往往/ 需要/ 作/ 大量/ 的/ 修改/ ./ 因此/ 本文/ 提出/ 了/ 绿色/ 网络/ 的/ 评价/ 体系/ 框架/ ,/ 通过/ 一个/ 循环/ 的/ 过程/ :/ 模型/ -/ 评价/ -/ 优化/ -/ 实施/ -/ 评价/ -/ 再/ 优化/ ,/ 逐步/ 优化/ 网络/ 的/ 服务质量/ 和/ 能效/ 之间/ 的/ 权衡/ ,/ 从而/ 为/ 绿色/ 网络/ 的/ 不断/ 改善/ 提供/ 依据/ ./ ①/ ②/ ③/ Page3/ 绿色/ 网络/ 所/ 涉及/ 的/ 领域/ 、/ 网络/ 的/ 能量/ 资源管理/ 结构/ 和/ 网络/ 能耗/ 优化/ 的/ 循环/ 过程/ 如图/ 1/ 所示/ ./ 本文/ 对/ 绿色/ 网络/ 节能/ 机制/ 和/ 策略/ 、/ 模型/ 及/ 评价/ 方法/ 进行/ 综述/ ,/ 主要/ 分为/ 以下/ 4/ 个/ 部分/ :/ 第/ 2/ 节/ 分析/ 网络系统/ 能耗/ ,/ 阐明/ 能量/ 与/ 其它/ 系统资源/ 的/ 区别/ 和/ 联系/ 以及/ 不同/ 系统/ 能耗/ 的/ 形式化/ 描述/ ;/ 第/ 3/ 节/ 综述/ 网络/ 节能/ 机制/ 和/ 策略/ ,/ 总结/ 现有/ 网络/ 节能/ 技术/ ,/ 并/ 按照/ 粒度/ 进行/ 分类/ ;/ 第/ 4/ 节/ 介绍/ 模型/ 方法/ 和/ 评价/ ,/ 提出/ 绿色/ 评价/ 的/ 概念/ 以及/ 包含/ 的/ 内容/ ,/ 并且/ 对/ 绿色/ 网络/ 中/ 能耗/ 的/ 优化/ 算法/ 进行/ 归纳/ 和/ 总结/ ;/ 最后/ 对/ 全文/ 进行/ 总结/ ,/ 提出/ 进一步/ 的/ 研究/ 方向/ ./ 2/ 网络系统/ 能耗/ 分析/ 计算机网络/ 系统/ 是/ 利用/ 通信/ 设备/ 和/ 线路/ 将/ 地理位置/ 不同/ 、/ 功能/ 独立/ 的/ 多个/ 计算机系统/ 互联/ 起来/ ,/ 以/ 功能完善/ 的/ 网络软件/ 实现/ 网络/ 中/ 资源共享/ 和/ 信息/ 传递/ 的/ 系统/ [/ 4/ ]/ ./ 网络通信/ 设备/ 一般/ 包括/ 网络/ 交换/ 设备/ 、/ 互连/ 设备/ 和/ 传输/ 设备/ ,/ 如/ 网卡/ 、/ 网线/ 、/ 集线器/ 、/ 交换机/ 、/ 路由器/ 等/ ./ 计算机系统/ 和/ 网络通信/ 设备/ 是/ 网络系统/ 的/ 重要/ 要素/ ,/ 也/ 是/ 能量消耗/ 的/ 主要/ 来源/ 之一/ ./ 目前/ 网络/ 规模/ 和/ 节点/ 数目/ 急速/ 增长/ ,/ 随之/ 带来/ 的/ 网络/ 能耗/ 问题/ 日趋严重/ ./ 分析/ 网络系统/ 的/ 能耗/ 模型/ 对/ 研究/ 绿色/ 网络/ 具有/ 重要/ 意义/ ./ 通过/ 分析/ 能耗/ 与/ 系统/ 参数/ 和/ 负载/ 的/ 关系/ 得出/ 影响/ 能耗/ 的/ 关键因素/ ,/ 有助于/ 以下/ 3/ 方面/ 工作/ 的/ 进行/ :/ (/ 1/ )/ 为/ 绿色/ 网络/ 的/ 设计/ 提供/ 参考/ ,/ 因为/ 影响/ 能耗/ 的/ 因素/ 有/ 很多/ ,/ 不同/ 的/ 因素/ 其/ 影响/ 因子/ 不同/ ,/ 找出/ 影响/ 能耗/ 的/ 瓶颈/ 重点/ 并/ 对/ 其/ 改善/ 对于/ 构建/ 绿色/ 网络/ 具有/ 重要/ 作用/ ./ (/ 2/ )/ 为/ 绿色/ 网络/ 的/ 评价/ 提供/ 方法/ ,/ 评价/ 工作/ 的/ 首要任务/ 是/ 评价/ 能耗/ ,/ 通过/ 网络系统/ 的/ 能耗/ 模型/ 能够/ 得到/ 能耗/ 指标/ ,/ 从而/ 进行/ 合理/ 分析/ 和/ 有效/ 评估/ ./ (/ 3/ )/ 为/ 绿色/ 网络/ 的/ 优化/ 提供/ 依据/ ,/ 网络/ 优化/ 元素/ 包括/ 优化/ 目标/ 、/ 决策/ 变量/ 、/ 约束条件/ 和/ 参数/ ,/ 通过/ 形式化/ 描述/ ,/ 把/ 网络/ 能耗/ 优化/ 转换成/ 一些/ 经典/ 的/ 优化/ 问题/ ,/ 从而/ 设计/ 出/ 能效/ 最优/ 的/ 路由/ // 调度/ 算法/ ./ 本节/ 首先/ 从/ 网络系统/ 角度/ 阐述/ 了/ 能量/ 资源/ 与/ 其它/ 系统资源/ 的/ 区别/ 与/ 联系/ ,/ 分析/ 了/ 传统/ 的/ 服务器/ 领域/ 的/ 能耗/ 模型/ ,/ 对/ 网络/ 中/ 的/ 能耗/ 模型/ 进行/ 了/ 归纳/ ./ 2.1/ 系统/ 能量/ 资源/ 分析/ 传统/ 的/ 系统资源/ 一般/ 包括/ 处理器/ 、/ 内存/ 和/ 硬盘/ 等/ ,/ 它们/ 在/ 系统/ 中是/ 真实/ 可见/ 的/ ,/ 系统/ 通过/ 使用/ 资源/ 来/ 提供/ 服务/ ./ 能量/ 也/ 是/ 一种/ 系统资源/ ,/ 它/ “/ 无形/ ”/ 地/ 存在/ 于/ 系统/ 中/ ,/ 只要/ 系统/ 处于/ 运行/ 状态/ ,/ 那么/ 就/ 会/ 消耗/ 一定/ 的/ 能量/ ./ 能量/ 作为/ 一种/ 系统资源/ ,/ 与/ 其它/ 资源/ 有着/ 密切/ 的/ 联系/ ,/ 它/ 是/ 其它/ 资源/ 正常/ 工作/ 的/ 基础/ ./ 传统/ 的/ 系统资源/ 需要/ 能量/ 提供/ 支撑/ ,/ 如果/ 系统/ 没有/ 了/ 能量/ ,/ 那么/ 再/ 庞大/ 的/ 系统/ 也/ 无法/ 正常/ 工作/ ./ 区别/ 如下/ :/ 能量/ 又/ 有别于/ 其它/ 系统资源/ ,/ 它/ 与/ 传统/ 资源/ 的/ (/ 1/ )/ 能量/ 是/ 不可/ 再生资源/ ,/ 不可/ 重复使用/ ./ 与/ 传统/ 的/ 处理器/ 等/ 系统资源/ 相比/ ,/ 能量/ 不/ 可以/ 重复/ 利用/ ,/ 其/ 在/ 被/ 系统/ 消耗/ 之后/ 转换/ 为/ 其它/ 形态/ ,/ 如/ 热能/ 等/ ./ (/ 2/ )/ 利用/ 方式/ 不同/ 会/ 产生/ 不同/ 的/ 效果/ ./ 集中/ 利用/ 能量/ 比/ 分散/ 利用/ 的/ 有效/ 利用率/ 高/ ./ 由于/ 静态/ 能耗/ 的/ 存在/ 使得/ 集中/ 利用/ 能量/ 更能/ 节省/ 资源/ ,/ 提高/ 利用率/ ./ 能量/ 作为/ 一种/ 系统资源/ ,/ 它/ 和/ 传统/ 资源/ 有/ 联系/ 也/ 有/ 区别/ ,/ 因此/ 我们/ 在/ 进行/ 系统/ 能量/ 管理/ 时/ ,/ 不能/ 直接/ 照搬/ 传统/ 资源/ 的/ 管理/ 方法/ ./ 2.2/ 网络系统/ 能耗/ 模型/ 2.2/ ./ 1/ 能耗/ 的/ 传统/ 定义/ 能耗/ 和/ 功耗/ 是/ 用来/ 衡量/ 系统/ 消耗/ 能量/ 的/ 两个/ 重要/ 概念/ ,/ 在/ 不同/ 的/ 上下文/ 中/ ,/ 能耗/ 和/ 功耗/ 的/ 定义/ 不同/ ./ 在/ 计算机系统/ 中/ ,/ 能耗/ 是/ 计算机系统/ 一段时间/ 内/ 总/ 的/ 能量消耗/ ,/ 单位/ 是/ 焦耳/ (/ J/ )/ ,/ 其/ 定义/ 如式/ (/ 1/ )/ 所示/ :/ 其中/ E/ 表示/ 系统/ 的/ 总/ 能量消耗/ ,/ 由/ 时间/ t/ 和/ 功耗/ P/ 两/ 方面/ 因素/ 共同/ 决定/ ./ 功耗/ 是/ 指/ 单位/ 时间/ 内/ 能量/ 的/ 消耗/ ,/ 反映/ 计算机系统/ 消耗/ 能量/ 的/ 速率/ ,/ 单位/ 是/ 瓦特/ (/ W/ )/ ./ 若令/ Δ/ E/ 是/ 在/ Δ/ t/ 时间/ 内所/ 消耗/ 的/ 能量/ ,/ 那么/ 这/ 段时间/ 内/ 的/ 平均/ 功耗/ Pavg/ 由式/ (/ 2/ )/ 给出/ 瞬时/ 功耗/ 是/ 指/ Δ/ t/ 趋近/ 于/ 0/ 的/ 平均/ 功耗/ :/ 区分/ 能耗/ 和/ 功耗/ 这/ 两个/ 概念/ 对于/ 节能/ 技术/ 有着/ Page4/ 重要/ 作用/ [/ 5/ ]/ ,/ 因为/ 减少/ 系统/ 功耗/ 不/ 一定/ 减少/ 系统/ 能耗/ ,/ 例如/ 对于/ 一个/ 计算机系统/ ,/ 我们/ 可以/ 通过/ 降低/ 一半/ 的/ 时钟/ 频率/ 来/ 减少/ 功耗/ ,/ 但是/ 如果/ 这个/ 系统/ 处理事务/ 的/ 时间/ 相应/ 地/ 提高/ 了/ 一倍/ ,/ 那么/ 系统/ 总/ 的/ 能耗/ 可能/ 是/ 相同/ 的/ ./ 减少/ 能耗/ 和/ 减少/ 功耗/ 是/ 节能/ 研究/ 的/ 两个/ 重要/ 方面/ ,/ 选择/ 其中/ 哪一方面/ 是/ 由/ 具体/ 的/ 上下文/ 决定/ 的/ ,/ 例如/ 在/ 无线/ 移动/ 应用/ 中/ ,/ 减少/ 能耗/ 能够/ 延长/ 电池/ 寿命/ ,/ 所以/ 减少/ 能耗/ 更加/ 重要/ ;/ 对于/ 其它/ 的/ 一些/ 系统/ ,/ 能量/ 供应/ 充足/ ,/ 这时/ 控制系统/ 温度/ 可能/ 是/ 更为重要/ 的/ 问题/ ,/ 我们/ 需要/ 减少/ 系统/ 的/ 最大/ 瞬时/ 功耗/ 即/ 峰值/ 功耗/ ./ 根据/ 式/ (/ 2/ )/ ,/ 我们/ 可以/ 使用/ 系统/ 的/ 功耗/ 来/ 计算/ 某/ 段时间/ 内/ 系统/ 的/ 总/ 能耗/ ,/ 因此/ 本文/ 我们/ 主要/ 讨论/ 系统/ 功耗/ 问题/ ./ 2.2/ ./ 2/ 服务器/ 能耗/ 模型/ 服务器/ 是/ 网络系统/ 中/ 提供/ 服务/ 的/ 关键设备/ ,/ 在/ 服务器/ 节能/ 领域/ ,/ 已有/ 大量/ 工作/ 进行/ 了/ 深入研究/ ,/ 并/ 取得/ 了/ 一定/ 的/ 研究成果/ ./ 在/ 服务器/ 系统/ 中/ ,/ 能耗/ 主要/ 来自/ 处理器/ 、/ 内存/ 、/ 磁盘/ I/ // O/ 和/ 用于/ 冷却/ 的/ 风扇/ ,/ 其中/ 处理器/ 和/ 内存/ 占有/ 服务器/ 系统/ 中/ 能耗/ 的/ 大部分/ ,/ 也/ 是/ 目前/ 节能/ 研究/ 的/ 关键/ 领域/ ./ 随着/ 节能/ 技术/ 在/ 处理器/ 产业/ 的/ 应用/ ,/ 例如/ 英特尔公司/ 的/ Speedstep/ 和/ AMD/ 公司/ 的/ PowerNow/ 技术/ ,/ 处理器/ 能够/ 根据/ 负载/ 动态/ 调节/ 性能/ ,/ 从而/ 达到/ 能耗/ 和/ 负载/ 具有/ 较/ 好/ 的/ 比例/ 性/ ./ 根据/ 谷歌/ 公司/ 2007/ 年/ 统计/ ,/ 其/ 服务器/ 的/ 处理器/ 峰值/ 能耗/ 占/ 总/ 能耗/ 的/ 比例/ 已经/ 低于/ 50/ %/ ,/ 所以/ 处理器/ 在/ 服务器/ 能耗/ 中/ 已经/ 不再/ 占有/ 支配/ 比例/ [/ 6/ ]/ ./ 处理器/ 中/ 的/ 数字电路/ 大多/ 采用/ CMOS/ 集成电路/ ,/ CMOS/ 集成电路/ 的/ 功耗/ 主要/ 由/ 静态/ 功耗/ 和/ 动态/ 功耗/ 构成/ :/ 静态/ 功耗/ 是/ 指/ 泄露/ 电流/ 造成/ 的/ ,/ 是/ 电路状态/ 稳定/ 时/ 的/ 功耗/ ,/ 与/ 电路/ 的/ 逻辑/ 状态/ 有关/ ./ 动态/ 功耗/ 是/ 由/ 电路/ 充放电/ 引起/ 的/ 功耗/ ,/ 与/ 电路/ 的/ 反转/ 频率/ 有关/ ./ 除此之外/ ,/ 还有/ 一部分/ 由/ 短路/ 瞬间/ 电流/ 产生/ 的/ 短路/ 功耗/ ,/ 一般来说/ ,/ 内部/ 短路/ 功耗/ 不会/ 超过/ 动态/ 充放电/ 功耗/ 的/ 10/ %/ ,/ 通常/ 忽略不计/ ./ 动态/ 功耗/ 在/ CMOS/ 电路/ 功耗/ 中/ 占/ 主要/ 部分/ ,/ 是/ 节能/ 研究/ 的/ 主要/ 对象/ ,/ 其/ 功耗/ 模型/ 为/ 其中/ a/ 为/ 电路/ 翻转/ 频率/ ,/ C/ 是/ 负载/ 电容/ ,/ f/ 为/ 时钟/ 频率/ ./ 由于/ 电压/ V/ 与/ 时钟/ 频率/ f/ 成正比/ ,/ f/ 又/ 和/ 系统/ 服务/ 速率/ 成正比/ ,/ 那么/ 可以/ 得出/ 动态/ 功耗/ 和/ 服务/ 速率/ 的/ n/ 次方/ 成正比/ 。/ 虽然/ 不同/ 的/ 设备/ 具体/ 功耗/ 模型/ 不同/ ,/ 但/ 大多数/ 都/ 符合/ 多项式/ 分布/ ,/ 对于/ 一般/ 的/ 处理器/ 系统/ 来说/ ,/ 在/ 服务/ 速率/ s/ >/ 0/ 时/ 的/ 瞬时/ 功耗/ 可以/ 简化/ 表示/ :/ 其中/ σ/ e/ 为/ 空闲/ 功耗/ 或者/ 静态/ 功耗/ ,/ μ/ e/ 和/ α/ 为/ 常数/ ,/ 与/ 具体/ 的/ 设备/ 有关/ ./ 在/ 实际/ 的/ 测量/ 中/ ,/ 不同/ 的/ 系统/ 表现/ 出/ 不同/ 的/ 功耗/ 特征/ ,/ 文献/ [/ 7/ ]/ 针对/ IntelPXA270/ 、/ PentiumM770/ 和/ TCP/ // IPOffloadEngine/ 进行/ 了/ 功耗/ 研究/ ,/ 并/ 提出/ α/ =/ 1.11/ ,/ 1.62/ ,/ 1.66/ ./ 2.2/ ./ 3/ 网络通信/ 设备/ 能耗/ 模型/ 文献/ [/ 8/ ]/ 分析/ 了/ 在/ 一个/ 高性能/ 数据中心/ 系统/ 中/ 服务器/ 与/ 网络通信/ 能耗/ 的/ 比例/ ,/ 当/ 系统/ 服务器/ 和/ 网络/ 的/ 利用率/ 在/ 15/ %/ 的/ 水平/ 而且/ 服务器/ 的/ 能量/ 和/ 负载/ 具有/ 较/ 好/ 的/ 比例/ 性时/ ,/ 网络通信/ 能耗/ 接近/ 总/ 能耗/ 的/ 50/ %/ ./ 由此可见/ 节省/ 网络通信/ 能耗/ 对于/ 网络系统/ 来说/ 有着/ 重要/ 的/ 意义/ ./ 与/ 传统/ 的/ 服务器/ 系统/ 相比/ ,/ 网络通信/ 设备/ 的/ 能耗/ 有着/ 自身/ 的/ 特点/ ,/ 以/ 路由器/ 为例/ [/ 9/ ]/ :/ (/ 1/ )/ 路由器/ 系统/ I/ // O/ 操作/ 占/ 大多数/ ,/ 通常/ 路由器/ 系统/ 都/ 配有/ 各种/ 不同/ 类型/ 的/ 接口/ 线卡/ ,/ 大多数/ 处理/ 工作/ 都/ 在线/ 卡上/ 完成/ ,/ 对/ 主控板/ 的/ 处理/ 能力/ 要求/ 相对/ 较弱/ ./ 而/ 服务器/ 除了/ 关注/ 系统/ I/ // O/ 能力/ 之外/ ,/ 更/ 注重/ 系统/ 的/ 处理器/ 性能/ ,/ 处理器/ 能耗/ 在/ 服务器/ 总/ 能耗/ 中/ 占有/ 一定/ 比例/ ./ (/ 2/ )/ 在/ 进行/ 高性能/ 计算/ 时/ ,/ 服务器/ 通常/ 都/ 配有/ 大容量/ 的/ 内存/ ,/ 内存/ 的/ 能耗/ 在/ 整个/ 系统/ 中/ 占有/ 很/ 高/ 的/ 比例/ ./ 而/ 对于/ 路由器/ 系统/ 来说/ ,/ 能耗/ 分配/ 相对/ 比较/ 平均/ ./ 不同/ 网络通信/ 设备/ 的/ 能耗/ 比例/ 不同/ ,/ 文献/ [/ 10/ ]/ 分析/ 了/ 在/ 互联网/ 中/ 不同/ 设备/ 能耗/ 的/ 占有/ 比例/ ,/ 其中/ LANswitch/ 和/ hubs/ 占/ 整个/ 网络设备/ 总/ 能耗/ 的/ 80/ %/ 左右/ ,/ 其次/ 是/ 路由器/ 和/ WANswitch/ ./ 同一/ 设备/ 中/ 不同/ 组件/ 的/ 能耗/ 比例/ 不同/ ,/ 文献/ [/ 11/ ]/ 分析/ 了/ 路由器/ 的/ 基础/ 能耗/ 情况/ ,/ 通过/ 对/ 目前/ 广泛/ 使用/ 的/ 两种/ 路由器/ 的/ 能耗/ 测量/ 指出/ ,/ 路由器/ 的/ 基本/ 系统/ (/ 将/ 所有/ 电缆/ 、/ 插槽/ 的/ 线卡/ 都/ 拔掉/ )/ 的/ 能耗/ 超过/ 总/ 能耗/ 的/ 一半/ ./ 随着/ 线卡/ 的/ 增加/ ,/ 整体/ 能耗/ 也/ 随之/ 增加/ ,/ 并且/ 与/ 增加/ 的/ 线卡/ 类型/ 有关/ ,/ 所以/ 减少/ 基础/ 能耗/ 对于/ 路由器/ 的/ 节能/ 设计/ 有着/ 重要/ 影响/ ./ 的/ 影响/ 不同/ ,/ 实验/ 表明/ :/ 文献/ [/ 11/ ]/ 中/ 还/ 指出/ 不同/ 的/ 配置/ 与/ 操作/ 对于/ 能耗/ (/ 1/ )/ 路由器/ 的/ 整体/ 能耗/ 在/ 有无/ 报文/ 传输/ 时/ 相差/ (/ 2/ )/ 相等/ 数据/ 流量/ 下/ ,/ 路由器/ 能耗/ 随/ 报文/ 长度/ 不高/ ./ Page5/ 的/ 减少/ 而/ 增加/ ,/ 但/ 幅度/ 较/ 小/ ./ (/ 3/ )/ 线卡/ 配置/ 相对/ 其它/ 配置/ 对/ 能耗/ 影响/ 较大/ ,/ 随着/ 整体/ 配置/ 提高/ ,/ 例如/ 线卡/ 带宽/ 提高/ 时/ ,/ 对于/ 能耗/ 的/ 影响/ 逐渐/ 增加/ ./ 从式/ (/ 7/ )/ 可以/ 看出/ 路由器/ 的/ 功耗/ PC/ 由/ 它/ 的/ 配置/ 和/ 使用/ 情况/ 决定/ ./ 向量/ 犡/ 决定/ 了/ 机柜/ 中/ 设备/ 的/ 型号/ 以及/ 设备/ 上/ 的/ 流量/ 负载/ 特征/ ;/ 函数/ CC/ (/ x0/ )/ 表示/ 机柜/ 在/ 不/ 插/ 任何/ 设备/ 时/ 的/ 功耗/ ;/ N/ 表示/ 处于/ 工作/ 状态/ 的/ 线卡/ 的/ 数目/ ,/ 而/ TP/ (/ xi0/ )/ 是/ 一个/ 和/ 路由器/ 利用率/ 有关/ 的/ 系数/ ;/ LCC/ (/ xi1/ )/ 给出/ 了/ 线卡/ 在/ 标配/ 下/ 的/ 功耗/ ./ PC/ (/ 犡/ )/ =/ CC/ (/ x0/ )/ +/ ∑/ N2/ ./ 2.4/ 路由/ 对/ 能耗/ 的/ 影响/ 从/ 网络/ 全局/ 的/ 角度/ 进行/ 分析/ 能够/ 更好/ 地/ 指导/ 网络/ 节能/ 策略/ 的/ 设计/ ./ 路由/ 协议/ 是/ 在/ 获得/ 网络拓扑/ 的/ 前提/ 下/ ,/ 根据/ 路由/ 的/ 可达性/ 信息/ ,/ 为/ 分组/ 选择/ 一条/ 优化/ 的/ 传输/ 路径/ ./ 从/ 这个/ 意义/ 上/ 说/ ,/ 我们/ 根据/ 要求/ 约束/ 传输/ 路径/ 的/ 集合/ ,/ 即/ 限制/ 可/ 选/ 路由/ 的/ 网络拓扑/ 的/ 范围/ ./ 值得注意/ 的/ 是/ ,/ 所/ 限制/ 的/ 可选/ 路由/ 网络拓扑/ 是/ 实时/ 变化/ 的/ ,/ 我们/ 需要/ 求得/ 一个/ 计算/ 复杂度/ 和/ 节能/ 效率/ 之间/ 的/ 平衡点/ ,/ 使得/ 在/ 取得/ 较/ 高能量/ 利用率/ 的/ 同时/ ,/ 维持/ 网络/ 的/ 服务质量/ ./ 文献/ [/ 11/ ]/ 在/ GSR/ // OC/ -/ 48/ 路由器/ 上/ 选取/ 三组/ 随机/ 生成/ 的/ 网络拓扑/ 进行/ 测试/ ,/ 测试/ 对比/ 了/ 最/ 短/ 路径/ 路由/ 和/ 加入/ 能耗/ 因素/ 的/ 路由/ ,/ 数据/ 表明/ 当/ 网络/ 的/ 节点/ 数目/ 保持/ 12/ 个/ 不变/ 而/ 链路/ 数目/ 从/ 24/ 增加/ 到/ 48/ ,/ 最后/ 到/ 134/ 时/ ,/ 加入/ 能耗/ 的/ 路由/ 能够/ 节省/ 的/ 能耗/ 从/ 2/ %/ 增加/ 到/ 19/ %/ ,/ 最后/ 到/ 65/ %/ ./ 可以/ 看出/ 从/ 影响/ 网络/ 全局/ 的/ 部署/ 、/ 调度/ 和/ 路由/ 的/ 角度/ 研究/ 网络/ 节能/ 策略/ 与/ 算法/ ,/ 能够/ 达到/ 降低/ 网络/ 能耗/ ,/ 提高/ 网络/ 性能/ 的/ 目的/ ./ 3/ 网络/ 节能/ 机制/ 和/ 策略/ 第/ 2/ 节/ 分析/ 了/ 系统资源/ 与/ 能耗/ 之间/ 的/ 关系/ ,/ 可以/ 看出/ 网络系统/ 的/ 能量消耗/ 与/ 系统资源/ 密切相关/ ,/ 对/ 能耗/ 的/ 管理/ 本质/ 上/ 是/ 对/ 资源/ 的/ 管理/ ./ 通过/ 资源/ 的/ 合理配置/ ,/ 能/ 使/ 网络系统/ 既/ 满足/ QoS/ 又/ 满足/ 节能/ 要求/ ,/ 本/ 节/ 综述/ 了/ 网络/ 节能/ 的/ 机制/ 和/ 不同/ 机制/ 下/ 的/ 节能/ 策略/ ./ 3.1/ 网络/ 节能/ 机制/ 研究/ 能耗/ 管理机制/ 打破/ 了/ 传统/ 资源/ 只有/ 开和关/ 两种/ 状态/ 的/ 束缚/ ,/ 把/ 耗能/ 资源/ 划分/ 成/ 不同/ 状态/ ./ 不同/ 状态/ 的/ 能耗/ 和/ 服务/ 能力/ 不同/ ,/ 低能耗/ 状态/ 对应/ 的/ 服务/ 能力/ 较弱/ ,/ 高能耗/ 状态/ 对应/ 的/ 服务/ 能力/ 较强/ ./ 通过/ 低能耗/ 状态/ 实现/ 节能/ ,/ 并/ 通过/ 不同/ 状态/ 之间/ 的/ 相互/ 转移/ 来/ 实现/ QoS/ 要求/ ./ 根据/ 不同/ 的/ 应用/ 场景/ 和/ 业务/ 差异/ ,/ 目前/ 主流/ 的/ 能耗/ 管理机制/ 可以/ 分成/ 以下/ 两种/ :/ 睡眠/ -/ 唤醒/ 机制/ 和/ 动态/ 速率/ 调节/ 机制/ ./ 3.1/ ./ 1/ 睡眠/ -/ 唤醒/ 机制/ 在/ 网络系统/ 运行/ 中/ ,/ 系统/ 不同/ 层次/ 会/ 有/ 不同/ 时间尺度/ 的/ 空闲/ 时间/ ,/ 利用/ 空闲/ 时间/ ,/ 将/ 部分/ 耗能/ 资源/ 置于/ 睡眠/ 或者/ 关闭/ 状态/ ,/ 能够/ 减少/ 空闲/ 时/ 的/ 能量/ 浪费/ ./ 由于/ 开/ -/ 关/ 机制/ 是/ 睡眠/ -/ 唤醒/ 机制/ 的/ 一个/ 特例/ ,/ 所以/ 分类/ 时/ 将/ 两者/ 合并/ ./ 睡眠/ 状态/ 又/ 可以/ 划分/ 为/ 不同/ 的/ 子/ 状态/ ,/ 文献/ [/ 12/ ]/ 将/ 无线/ 传感器/ 节点/ 的/ 能耗/ 部件/ 分成/ 4/ 种/ 不同/ 的/ 睡眠/ 模式/ ./ 文献/ [/ 13/ ]/ 将/ LAN/ 中/ 的/ 交换机/ 端口/ 分成/ 5/ 种/ 不同/ 的/ 状态/ ,/ 如图/ 2/ 所示/ ,/ 其中/ 睡眠/ 状态/ 有/ 3/ 种/ ,/ 即/ 简单/ 睡眠/ 、/ 睡眠/ 和/ 缓冲/ 睡眠/ ,/ 不同/ 睡眠/ 状态/ 的/ 唤醒/ 机制/ 和/ 睡眠/ 深度/ 不同/ ./ 随着/ 睡眠/ 深度/ 的/ 增加/ ,/ 其/ 能耗/ 相应/ 地/ 减少/ ,/ 唤醒/ 成本/ (/ 延迟/ 和/ 能量/ )/ 相应/ 地/ 增加/ ./ 当/ 睡眠/ 深度/ 由/ 深到/ 浅/ 转移/ 时/ ,/ 系统/ 会/ 花费/ 一定/ 的/ 转移/ 时间/ δ/ ,/ 系统/ 能量消耗/ 曲线/ 也/ 会/ 出现/ 一个/ 尖峰/ 的/ 波动/ ./ 睡眠/ -/ 唤醒/ 机制/ 需要/ 实际/ 硬件/ 的/ 支持/ ,/ 1997/ 年/ 由/ Intel/ 、/ Microsoft/ 、/ Toshiba/ 共同/ 制定/ 了/ ACPI/ 规范/ [/ 14/ ]/ ,/ 它/ 的/ 主要/ 目标/ 是/ 使/ 整个/ 计算机系统/ 能够/ 动态/ 地/ 管理/ 电源/ ./ ACPI/ 定义/ 了/ 计算机系统/ 的/ 全局/ 状态/ 、/ 设备/ 电源/ 状态/ 和/ 处理器/ 电源/ 状态/ ,/ 如图/ 3/ 所示/ ,/ 具体/ 细节/ 可以/ 参考文献/ [/ 14/ ]/ ./ 计算机系统/ 的/ 全局/ 状态/ 为/ G0/ ,/ G1/ ,/ G2/ ,/ G3/ ,/ 其中/ 睡眠/ 状态/ G1/ 又/ 细分/ 为/ S1/ 到/ S44/ 种/ 状态/ ./ 系统/ 从/ 这/ 几种/ 状态/ 被/ 唤醒/ 到/ G0/ 运行/ (/ 唤醒/ 等待时间/ )/ 所/ 需/ 的/ 时间/ 最短/ 的/ 是/ S1/ ,/ 较/ 短/ 的/ 是/ S2/ 和/ S3/ ,/ 居中/ 的/ 是/ S4/ ./ 设备/ 状态/ D0/ ,/ D1/ ,/ D2/ ,/ D3/ 是/ 与/ 设备/ 相关/ 的/ 状态/ ,/ 对/ 用户/ 来说/ 往往/ 是/ 不/ 可见/ 的/ ./ 其中/ D0/ 是/ 工作/ 状态/ ,/ D1/ ,/ D2/ 是/ 中间状态/ ,/ D3/ 是/ 关闭/ 状态/ ./ Page6/ 处理器/ 电源/ 状态/ C0/ 到/ Cn/ 是/ 指/ 在/ 全局/ 状态/ G0/ 下/ (/ 只/ 对/ G0/ 状态/ 有效/ ,/ 在/ 其它/ 状态/ 下/ 不予/ 讨论/ )/ 处理器/ 的/ 状态/ ,/ 只有/ C0/ 状态/ 下/ CPU/ 才/ 会/ 执行/ 指令/ ,/ C1/ 到/ Cn/ 状态/ 下/ CPU/ 都/ 处于/ 各种/ 不同/ 程度/ 的/ 睡眠/ 状态/ ./ 3.1/ ./ 2/ 动态/ 速率/ 调节/ 机制/ 根据/ 负载/ 情况/ 动态/ 调节/ 系统/ 处理/ 速率/ ,/ 使得/ 系统/ 能够/ 在/ 低/ 速率/ 下/ 节省/ 能耗/ ./ 此/ 机制/ 是/ 使/ 系统/ 工作/ 在/ 不同/ 的/ 服务/ 速率/ 和/ 相应/ 的/ 能耗/ 水平/ 上/ ,/ 速率/ 缩放/ [/ 6/ ,/ 15/ ]/ 和/ 自/ 适应/ 链路/ 速率/ [/ 16/ -/ 17/ ]/ 是/ 常用/ 的/ 速率/ 调节/ 机制/ ./ 以太网/ 的/ 链路/ 有着/ 不同/ 的/ 传输速率/ ,/ 数据/ 表明/ 以太网/ 链路/ 速率/ 从/ 100Mbps/ 增加/ 到/ 1Gbps/ 时/ ,/ 功耗/ 增加/ 了/ 2/ ~/ 4W/ ,/ 而/ 当/ 增加/ 到/ 10Gbps/ 时/ ,/ 功耗/ 增加/ 10/ ~/ 20W/ [/ 16/ ]/ ./ 而/ 以太网/ 处于/ 空闲/ 和/ 100/ %/ 链路/ 利用率/ 的/ 情况/ 下/ 功耗/ 几乎/ 是/ 相同/ 的/ ,/ 即/ 以太网/ 功耗/ 与/ 链路/ 利用率/ 无关/ ,/ 通过/ 测量/ 表明/ ,/ 目前/ 以太网/ 的/ 链路/ 利用率/ 主要/ 在/ 1/ %/ ~/ 5/ %/ 之间/ ,/ 所以/ 在/ 链路/ 处于/ 低/ 利用率/ 时/ 降低/ 链路/ 速率/ 能够/ 在/ 有限/ 的/ 性能/ 影响/ 下/ 有效/ 地/ 降低/ 能耗/ ./ 自/ 适应/ 链路/ 速率/ 是/ 由/ Nordman/ 和/ Christensen/ 于/ 2005/ 年/ 在/ IEEE802/ ./ 3tutorial/ 提出/ 的/ [/ 17/ ]/ ,/ 作为/ 一种/ 能够/ 在/ 全双工/ 传输/ 的/ 以太网/ 中/ 根据/ 链路/ 利用率/ 自动/ 切换/ 链路/ 速率/ 的/ 方法/ 第一次/ 被/ 描述/ 是/ 在/ 文献/ [/ 16/ ]/ 中/ ./ 其/ 采用/ 了/ 快速/ 的/ MAC/ 层/ 信令/ 握手/ 机制/ RapidPHYSelection/ ,/ 用来/ 发起/ 、/ 协商/ 和/ 同步/ 链路/ 速率/ 的/ 变化/ ./ 首先/ 链路/ 的/ 一端/ 在/ 决定/ 提高/ 或/ 减少/ 链路/ 速率/ 后/ 发起/ 一个/ 速率/ 变化/ 请求/ ,/ 即/ ALRREQUESTMAC/ 信令/ ./ 链路/ 的/ 另一端/ 接收/ 到/ 此/ 信令/ 后告/ 之/ 请求者/ 是否/ 接受/ 速率/ 转换/ ,/ 即/ 回复/ ALRACK/ 信令/ 接受/ 变化/ 或者/ ALRNACK/ 信令/ 拒绝/ 转换/ ./ 一个/ ALRACK/ 响应/ 能够/ 触发/ 一个/ 链路/ 速率/ 转换/ 和/ 链路/ 再/ 同步/ ./ 双方/ 握手/ 的/ 总/ 时间/ 加上/ 再/ 同步/ 时间/ (/ Tswitch/ )/ ,/ 对于/ ALR/ 的/ 性能/ 是/ 至关重要/ 的/ ,/ 在/ 1Gbps/ 的/ 以太网/ 中/ 一般/ 低于/ 100/ μ/ s/ ,/ 用于/ 链路/ 再/ 同步/ 的/ 时间/ 一般/ 是/ 10000/ 个/ 时钟/ 周期/ ./ 无论是/ 睡眠/ -/ 唤醒/ 机制/ 还是/ 动态/ 速率/ 调节/ 机制/ ,/ 都/ 是/ 基于/ 系统资源/ 的/ 能耗/ 状态/ 转移/ ,/ 我们/ 定义/ 状态/ S/ =/ {/ S0/ ,/ S1/ ,/ S2/ ,/ …/ }/ 是/ 系统/ 状态/ 集合/ ,/ P/ =/ {/ P0/ ,/ P1/ ,/ P2/ ,/ …/ }/ 是/ 相应/ 的/ 能耗/ 状态/ 集合/ ,/ 对于/ 睡眠/ -/ 唤醒/ 机制/ ,/ S0/ ~/ Sn/ -/ 1/ 表示/ 不同/ 的/ 睡眠/ 状态/ ,/ 在/ 睡眠/ 期间/ 服务/ 速率/ 为/ 0/ ,/ 不能/ 处理/ 任何/ 任务/ ,/ Sn/ 表示/ 唤醒/ 状态/ ./ 这种/ 机制/ 的/ 特例/ 即/ 只有/ 两个/ 状态/ SON/ 和/ SOFF/ 的/ 开/ -/ 关/ 机制/ ,/ 对应/ 的/ OFF/ 状态/ 的/ 能耗/ POFF/ =/ 0/ ./ 对于/ 动态/ 速率/ 调节/ 机制/ ,/ Si/ 表示/ 不同/ 的/ 工作/ 状态/ ,/ 对应/ 的/ 能耗/ 不为/ 零/ ,/ 而且/ 往往/ 服务/ 速率/ 越大/ 能耗/ 越大/ ./ 系统/ 在/ 不同/ 状态/ 之间/ 的/ 转换/ 时/ 花费/ 的/ 成本/ 不同/ ,/ 这里/ 的/ 成本/ 主要/ 指/ 转换/ 所/ 花费/ 的/ 时间/ 及其/ 对/ 性能/ 的/ 影响/ 以及/ 所/ 消耗/ 的/ 能量/ ./ 在/ 睡眠/ -/ 唤醒/ 机制/ 中/ ,/ 不同/ 的/ 睡眠/ 深度/ 需要/ 的/ 唤醒/ 时间/ 和/ 能耗/ 不同/ ,/ 而/ 在/ 动态/ 速率/ 调节/ 机制/ 中/ ,/ 不同/ 状态/ 之间/ 的/ 转换/ 时间/ 和/ 能耗/ 也/ 不同/ ,/ 过长/ 的/ 转换/ 时间/ 会/ 造成/ 系统/ 性能/ 的/ 损失/ ,/ 如/ 延迟/ 增加/ 、/ 报文/ 丢失/ 等/ ./ 文献/ [/ 18/ ]/ 对/ ALR/ 进行/ 了/ 测量/ ,/ 数据/ 表明/ 实际/ 的/ 转换/ 时间/ 是/ 不可/ 忽略/ 的/ ,/ 而且/ 转换/ 时间/ 不仅/ 和/ 起始/ 终止/ 状态/ 有关/ ,/ 而且/ 是/ 不/ 对称/ 的/ ,/ 例如/ 从/ 1Gbps/ 到/ 10Mbps/ 的/ 转换/ 时间/ 是/ 10Mbps/ 到/ 1Gbps/ 的/ 8.4/ 倍/ ./ 所以/ 在/ 进行/ 转换/ 成本/ 的/ 计算/ 时要/ 考虑/ 到/ 所有/ 可能/ 的/ 状态/ 转换/ ,/ 而且/ 要/ 考虑/ 转换/ 的/ 方向/ ./ 目前/ 大多数/ 研究/ 针对/ 单一/ 可/ 调节/ 资源/ ,/ 限于/ 技术/ 原因/ ,/ 目前/ 只有/ 处理器/ 能够/ 有/ 低功耗/ 运行/ 模式/ ,/ 而/ 内存/ 和/ 硬盘/ 的/ 低功耗/ 模式/ 就是/ 完全/ 的/ 休眠/ ./ 随着/ 技术/ 的/ 发展/ ,/ 越来越/ 多/ 资源/ 能够/ 进行/ 性能/ 的/ 调节/ ,/ 所以/ 会/ 出现/ 多种/ 可/ 调节/ 资源/ 并/ 存在/ 系统/ 中/ 的/ 情况/ ,/ 在/ 进行/ 这种/ 多/ 资源分配/ 中/ ,/ 由于/ 不同/ 可/ 调节/ 资源/ 的/ 耗能/ 范围/ 不同/ ,/ 所以/ 影响/ 系统/ 能耗/ 的/ 瓶颈/ 资源/ 也/ 不同/ ,/ 找出/ 瓶颈/ 资源/ 从而/ 采取相应/ 的/ 节能/ 策略/ 是/ 一种/ 可行/ 思路/ ./ 对/ 耗能/ 资源/ 的/ 状态/ 管理/ 涉及/ 到/ 了/ 状态/ 转移/ 算法/ ,/ 本文/ 将/ 这些/ 具体/ 的/ 算法/ 归纳/ 为/ 节能/ 策略/ ,/ 下面/ 我们/ 对/ 现有/ 的/ 网络/ 节能/ 策略/ 进行/ 综述/ 和/ 概括/ ./ 3.2/ 网络/ 节能/ 策略/ 分类/ 节能/ 策略/ 的/ 分类/ 方法/ 有/ 很多/ ,/ 如表/ 1/ 所示/ [/ 19/ ]/ ./ Page7/ 分类/ 标准/ 时间尺度/ 在线/ // 离线/ 粒度/ 节点/ // 网络/ OSI/ 层次/ 链路/ 、/ 网络/ 、/ 传输/ 、/ 应/ 网络结构/ 核心网/ // 边缘/ 网络/ 决定/ 策略/ 实施/ 的/ 位置服务/ 类别/ GS/ // CLS/ // BES/ 不同/ 服务/ 对/ 性能/ 的/ 要求/ 在/ 分类/ 方法/ 上/ ,/ 根据/ 时间尺度/ 可以/ 将/ 策略/ 分为/ 在线/ 策略/ 和/ 离线/ 策略/ ,/ 在线/ 策略/ 是/ 在/ 系统/ 运行/ 中/ 执行/ 的/ ,/ 时间尺度/ 一较/ 小/ ,/ 实时性/ 较强/ ;/ 而/ 离线/ 策略/ 则/ 是/ 在/ 系统/ 运行/ 之前/ 制定/ 的/ ,/ 一般/ 时间尺度/ 较大/ ,/ 而/ 这种/ 策略/ 通常/ 用/ 在/ 系统/ 设计/ 、/ 资源/ 部署/ 中/ ./ 根据/ OSI/ 网络/ 层次/ 的/ 划分/ ,/ 可以/ 将/ 策略/ 的/ 实现/ 分成/ 不同/ 层次/ ,/ 例如/ 数据/ 链路层/ 、/ 网络层/ 、/ 传输层/ 和/ 应用层/ 等/ ,/ 有些/ 策略/ 需要/ 跨层/ 执行/ 或者/ 需要/ 多个/ 层次/ 的/ 互相配合/ ./ 节能/ 策略/ 可以/ 依据/ 应用/ 的/ 网络结构/ 和/ 位置/ 的/ 不同/ 进行/ 划分/ ,/ 例如/ 接入/ 网络/ 和/ 骨干/ 网络/ ,/ 无线网络/ 和/ 有线/ 网络/ 等/ ,/ 不同/ 的/ 网络/ 位置/ 其/ 策略/ 的/ 部署/ 也/ 不尽相同/ ./ 不同/ 的/ 网络/ 业务/ 有/ 不同/ 的/ 性能/ 和/ QoS/ 要求/ ,/ 例如/ 实时性/ 较强/ 的/ 业务/ 对于/ 延迟/ 的/ 要求/ 较为/ 严格/ ,/ 而/ 对于/ 一些/ 网络/ 处理/ 设备/ 来说/ 吞吐量/ 是/ 衡量/ 性能/ 的/ 一个/ 重要/ 因素/ ./ 对/ 业务/ 和/ 服务类型/ 进行/ 分类/ ,/ 有助于/ 研究/ 性能/ 和/ 能耗/ 之间/ 的/ 关系/ ./ 本文/ 我们/ 将/ 主要/ 从/ 网络/ 粒度/ 的/ 角度/ 对/ 现有/ 策略/ 进行/ 分类/ ,/ 这种/ 分类/ 下/ 的/ 不同/ 策略/ 对于/ 系统资源/ 的/ 抽象/ 程度/ 不同/ ,/ 其/ 决策/ 需要/ 的/ 信息量/ 也/ 不同/ ,/ 不同/ 策略/ 代表/ 了/ 不同/ 的/ 应用/ 层次/ ./ 对于/ 单个/ 节点/ ,/ 例如/ 设备/ 或者/ 组件/ ,/ 其/ 节能/ 策略/ 是/ 通过/ 单个/ 节点/ 的/ 资源分配/ 使/ 能耗/ 和/ 负载/ 成/ 比例/ 性/ ,/ 大多/ 应用/ 在/ 单独/ 的/ 计算机系统/ 或者/ 设备/ 上/ ./ 而/ 对于/ 一个/ 分布式/ 的/ 系统/ 或者/ 网络/ 则/ 是从/ 更/ 高/ 的/ 层次/ ,/ 把/ 一个/ 或者/ 多个/ 组件/ (/ 设备/ )/ 看成/ 系统资源/ 进行/ 管理/ 和/ 任务调度/ ,/ 从/ 全局/ 的/ 角度/ 实现/ 整个/ 系统/ 网络/ 能耗/ 和/ 负载/ 的/ 比例/ 性/ ,/ 这/ 就/ 涉及/ 到/ 了/ 网络协议/ 和/ 体系/ 架构/ 的/ 设计/ 和/ 改进/ ./ 文献/ [/ 20/ ]/ 指出/ 不同/ 粒度/ 策略/ 执行/ 的/ 时间尺度/ 不同/ :/ 在/ CPU/ 和/ 指令/ 级别/ 的/ 应用/ 属于/ 纳秒/ 到/ 微秒/ 级/ ;/ 报文/ 间/ 或者/ 流内/ 的/ 应用/ 属于/ 微秒/ 到/ 毫秒/ 级/ ;/ 而/ 流间/ 的/ 应用/ 则/ 属于/ 秒/ 或者/ 小时/ 级/ ./ 不同/ 的/ 时间尺度/ 决定/ 了/ 策略/ 执行/ 的/ 结构/ 层次/ ,/ 越短/ 的/ 时间尺度/ 对应/ 越低/ 的/ 网络/ 层次/ ,/ 而/ 需要/ 各个/ 部件/ 之间/ 的/ 合作/ 也/ 就/ 越少/ ./ 3.2/ ./ 1/ 节点/ 级/ 节能/ 策略/ 节点/ 级/ 策略/ 通过/ 分配/ 单个/ 节点/ 的/ 系统资源/ ,/ 如/ 处理器/ 资源/ 或者/ 带宽/ 资源/ 实现/ 资源/ 的/ 状态/ 管理/ ./ 在/ 具体/ 系统/ 中/ ,/ 一般/ 通过/ 能耗/ 优化/ 模块/ 具体/ 部署/ 节能/ 策略/ ,/ 如图/ 4/ 所示/ [/ 21/ ]/ ,/ 通过/ 观测/ 子/ 模块/ 实现/ 系统/ 负载/ 等/ 系统/ 信息/ 的/ 观测/ ,/ 观测/ 信息/ 被/ 传递/ 给/ 控制/ 子/ 模块/ ,/ 通过/ 系统/ 部署/ 的/ 节能/ 策略/ 进行/ 系统/ 参数/ 的/ 控制/ 和/ 调节/ ,/ 从而/ 实现/ 系统/ 实时/ 能耗/ 的/ 控制/ ./ (/ 1/ )/ 处理器/ 节能/ 策略/ 处理器/ 的/ 节能/ 策略/ 一般/ 根据/ 负载/ 情况/ 调节/ CPU/ 的/ 电压/ 和/ 时钟/ 频率/ ,/ 可以/ 分为/ 静态方法/ 和/ 动态/ 方法/ ./ 静态方法/ 是/ 通过/ 设置/ 阈值/ 来/ 使/ 能耗/ 部件/ 处于/ 睡眠/ // 唤醒/ 或者/ 高速/ // 低速/ 状态/ ,/ 阈值/ 的/ 设置/ 依赖于/ 负载/ 的/ 特性/ ,/ 在/ 负载/ 未知/ 或者/ 经常/ 变化/ 的/ 情况/ 下/ 静态方法/ 不能/ 有效/ 地/ 满足/ 性能/ 的/ 需求/ ./ 为了/ 解决/ 这一/ 问题/ ,/ 动态/ 功耗/ 管理/ (/ DPM/ )/ 根据/ 负载/ 情况/ 预测/ 调节/ 电压/ 和/ 时钟/ 频率/ ,/ 一些/ DPM/ 算法/ 能够/ 在/ 硬件/ 层/ 作为/ 电路/ 的/ 一部分/ 设计/ 和/ 实现/ ,/ 但是/ 策略/ 的/ 修改/ 和/ 重新配置/ 成本/ 较/ 高/ ,/ 所以/ DPM/ 需要/ 软件/ 和/ 硬件/ 的/ 相互配合/ 才能/ 发挥/ 最大/ 效率/ ./ 而/ ACPI/ 规范/ 提供/ 给/ 整个/ 计算机系统/ 能够/ 动态/ 地/ 管理/ 电源/ 的/ 接口/ ,/ 使/ 操作系统/ 能够/ 在/ 系统/ 运行/ 期间/ 根据/ 负载/ 情况/ 动态/ 调节/ 运行/ 状态/ ./ 如何/ 根据/ 负载/ 的/ 特性/ 进行/ 处理器/ 电压/ 和/ 时钟/ 频率/ 的/ 决策/ 和/ 控制/ ,/ 在/ 不/ 降低/ 系统/ 性能/ 的/ 情况/ 下/ 减低/ 能耗/ 成为/ 高性能/ 计算/ 和/ 操作系统/ 领域/ 的/ 热点/ ./ Yao/ 等/ 人/ [/ 22/ ]/ 提出/ 对/ 处理器/ 能耗/ 优化/ 问题/ 的/ 研究/ 产生/ 了/ 重大/ 的/ 影响/ ,/ 他们/ 提出/ 了/ 与/ 速度/ 有关/ 的/ 能量消耗/ 函数/ ,/ 并/ 采用/ 速度/ 缩放/ 策略/ ,/ 把/ 能耗/ 优化/ 问题/ 归结/ 成/ 最优/ 任务调度/ 问题/ ./ 文献/ [/ 23/ ]/ 提出/ 采用/ 休眠/ 机制/ 和/ 基于/ 概率/ 的/ 能耗/ 最小/ 算法/ ,/ 并且/ 将/ 速度/ 缩放/ 和/ 休眠/ 机制/ 的/ 策略/ 结合/ ,/ 提出/ 了/ 一个/ (/ 槡/ 3/ +/ 22/ )/ -/ competitivePage8/ 的/ 简单/ 算法/ ./ 在/ 操作系统/ 层次/ ,/ 文献/ [/ 24/ ]/ 提出/ 了/ 在/ Linux/ 平台/ 下/ 内核/ 级/ 的/ 实时/ 能耗/ 管理器/ OndemandGovernor/ ./ 管理器/ 能够/ 连续/ 地/ 监控/ CPU/ 利用率/ ,/ 并且/ 决策/ 时钟/ 频率/ 和/ 电压/ 的/ 变化/ ,/ 这是/ 一种/ 动态/ 电压/ 和/ 频率/ (/ DVFS/ )/ 调节/ 策略/ ,/ 状态/ 之间/ 的/ 切换/ 采用/ 现有/ 的/ 技术/ 只/ 需要/ 10ms/ ,/ 所以/ 能/ 使/ 频率/ 降低/ 带来/ 的/ 性能/ 的/ 降幅/ 较/ 小/ ,/ 并且/ 能够/ 应用/ 于/ 多处理器/ 系统/ ./ 此/ 管理器/ 已/ 被/ Linux/ 内核/ 版本/ 2.6/ ./ 10/ 所/ 采用/ ./ (/ 2/ )/ 网络设备/ 节能/ 策略/ 基于/ CPU/ 的/ 节能/ 技术/ 目前/ 已/ 比较/ 成熟/ ,/ 且/ 各大/ 厂商/ 如/ Intel/ 、/ AMD/ 都/ 有/ 各自/ 相应/ 的/ 技术/ ,/ 而/ 在/ 网络设备/ 领域/ ,/ 相关/ 的/ 研究/ 刚刚/ 起步/ ./ 在/ 应用/ 睡眠/ -/ 唤醒/ 机制/ 时/ ,/ 面临/ 的/ 主要/ 问题/ 在于/ 进入/ 睡眠/ 和/ 唤醒/ 的/ 条件/ ,/ “/ timer/ -/ driven/ ”/ 策略/ 是/ 最/ 简单/ 的/ 策略/ [/ 25/ ]/ ,/ 也/ 叫做/ 超时/ 策略/ ,/ 是/ 指当/ 系统/ 处于/ 空闲/ 状态/ 的/ 时间/ 超过/ 某一/ 阈值/ 时/ ,/ 系统/ 进入/ 睡眠/ 或/ 关闭/ 状态/ ,/ 当/ 系统/ 休眠/ 时间/ 到达某/ 一/ 阈值/ 时/ 系统/ 被/ 唤醒/ ./ 由于/ 计时/ 时间/ 的/ 存在/ ,/ 此/ 策略/ 的/ 节能/ 效果/ 较差/ ,/ 而且/ 在/ 睡眠/ 过程/ 中有/ 数据包/ 到达/ 时/ ,/ 这些/ 包将/ 被/ 丢弃/ ./ “/ wake/ -/ on/ -/ arrival/ ”/ (/ WoA/ )/ 策略/ 则/ 是/ 使/ 设备/ 的/ 特定/ 接口/ 处于/ 工作/ 状态/ ,/ 当该/ 接口/ 检测/ 到/ 有/ 包/ 到达/ 时/ 唤醒/ 设备/ ,/ 正常/ 工作/ ,/ 但是/ 目前/ 设备/ 并/ 不/ 都/ 支持/ WoA/ ,/ 所以/ 文献/ [/ 26/ ]/ 提出/ 利用/ “/ 哑包/ ”/ 唤醒/ 设备/ 的/ 策略/ ,/ 如果/ A/ 需要/ 唤醒/ B/ ,/ 那么/ A/ 先给/ B/ 发送/ 一个/ “/ 哑包/ ”/ ,/ 然后/ 等待/ δ/ 时间/ 与/ B/ 进行/ 实际/ 通信/ ,/ 这种/ 策略/ 减少/ 了/ 丢/ 包率/ ,/ 但/ 增加/ 了/ 系统/ 延迟/ ./ 在/ 3.1/ 节/ 的/ 节能/ 机制/ 中/ [/ 13/ ]/ 用/ 3/ 种/ 睡眠/ 状态/ 改进/ 了/ 超时/ 策略/ ./ 在/ 简单/ 睡眠/ 中/ ,/ 交换机/ 端口/ 设置/ 计时器/ ,/ 仅当/ 计时器/ 超时/ 端口/ 被/ 唤醒/ ,/ 在/ 简单/ 睡眠/ 中/ 到达/ 的/ 包被/ 丢弃/ ;/ 当/ 端口/ 处于/ 睡眠/ 状态/ 时/ ,/ 除了/ 满足/ 简单/ 睡眠/ 的/ 唤醒/ 条件/ 之外/ ,/ 当/ 数据包/ 到达/ 时/ ,/ 该/ 端口/ 也/ 被/ 唤醒/ ,/ 丢失/ 该包/ ;/ 缓冲/ 睡眠/ 状态/ 是/ 相对/ 复杂/ 的/ 睡眠/ 状态/ ,/ 当/ 数据包/ 到达/ 时/ ,/ 该报/ 文/ 被/ 缓冲/ ,/ 并/ 唤醒/ 该/ 端口/ ,/ 可以/ 看出/ 缓冲/ 睡眠/ 状态/ 是/ 睡眠/ 状态/ 的/ 扩展/ ,/ 并且/ 需要/ 缓冲区/ 且/ 处于/ 开启/ 状态/ ./ 基于/ 超时/ 策略/ 还有/ 很多/ 改进/ ,/ 例如/ 可以/ 根据/ 报文/ 到达/ 的/ 特征/ 动态/ 调整/ 超时/ 的/ 阈值/ 或者/ 根据/ 历史/ 情况/ 预测/ 阈值/ 大小/ 等/ [/ 20/ ]/ ./ 由于/ 现有/ 网络/ 环境/ 的/ 影响/ ,/ 在/ 网络设备/ 进入/ 睡眠/ 状态/ 时/ 一些/ 无用/ 的/ 流量/ 可以/ 直接/ 丢弃/ ,/ 但是/ 如/ ARP/ 、/ ICMP/ 或者/ DHCP/ 等/ 有用/ 流量/ 会/ 影响/ 网络设备/ 的/ “/ 睡眠/ 质量/ ”/ ,/ 所以/ 提供/ 接口/ 代理/ [/ 27/ -/ 28/ ]/ ,/ 让/ 代理/ 来/ 执行/ 一些/ 简单/ 的/ 任务/ ,/ 从而/ 保证/ 设备/ 睡眠/ -/ 唤醒/ 机制/ 的/ 优化/ 执行/ ./ 自/ 适应/ 链接/ 速率/ 技术/ 基于/ 3.1/ 节中/ 的/ 动态/ 速率/ 调节/ 机制/ ,/ 通过/ 自动/ 调节/ 全双工/ 传输/ 的/ 以太网/ 链路/ 交换/ 速率/ 从而/ 适应/ 不同/ 的/ 链路/ 利用率/ ,/ 使/ 链路/ 交换/ 速率/ 与/ 链路/ 负载/ 成/ 比例/ ,/ 目前/ 对于/ 该/ 技术/ 的/ 研究/ 主要/ 集中/ 在/ [/ 29/ ]/ :/ (/ 1/ )/ 速率/ 切换/ ,/ 包括/ 切换/ 的/ 条件/ 和/ 时机/ 、/ 最优/ 速率/ 的/ 选择/ 以及/ 如何/ 快速/ 切换/ ./ (/ 2/ )/ 策略/ 对/ 性能/ 的/ 影响/ ./ 文献/ [/ 29/ ]/ 提出/ 了/ 单/ 阈值/ 和/ 双/ 阈值/ 的/ 自/ 适应/ 链接/ 速率/ 策略/ ,/ 策略/ 根据/ 输出/ 缓冲/ 的/ 利用率/ 或者/ 队列/ 长度/ Q/ 进行/ 速率/ 的/ 转移/ ,/ 对应/ 于/ 不同/ 的/ 策略/ ,/ 服务/ 速率/ u/ (/ t/ )/ 有着/ 相应/ 的/ 变化/ :/ 在/ 以/ k/ 为/ 阈值/ 的/ 单/ 阈值/ 策略/ 中/ ,/ 服务/ 速率/ 可/ 表示/ 为式/ (/ 8/ )/ :/ 在/ 以/ k1/ ,/ k2/ 为/ 阈值/ (/ k1/ </ k2/ )/ 的/ 双/ 阈值/ 策略/ 中/ ,/ 服务/ 速率/ 可/ 表示/ 为式/ (/ 9/ )/ :/ 由于/ 双/ 阈值/ 策略/ 的/ 滞后/ 调整/ 会/ 产生/ 抖动/ 问题/ ,/ 为了/ 解决/ 速率/ 抖动/ ,/ 文中/ 提出/ 了/ 两种/ 解决/ 策略/ ,/ 一种/ 是/ “/ utilization/ -/ threshold/ ”/ 策略/ ,/ 在/ 速率/ 的/ 转换/ 时/ 增加/ 链路/ 利用率/ 参数/ ;/ 另/ 一种/ 是/ “/ Time/ -/ Out/ -/ Threshold/ ”/ 策略/ ,/ 在/ 策略/ 中/ 引入/ tMinHigh/ 和/ tMinLow/ 参数/ 分别/ 控制/ 在/ 高速率/ 和/ 低/ 速率/ 的/ 持续时间/ ,/ 参数/ 的/ 计算/ 通过/ 启发式/ 学习/ ./ 在/ 考虑/ 对/ 性能/ 的/ 影响/ 方面/ ,/ 文献/ [/ 30/ ]/ 将/ 系统/ 性能参数/ 引入/ 速率/ 变化/ 条件/ ,/ 服务/ 速率/ u/ (/ t/ )/ 如式/ (/ 10/ )/ 所示/ :/ 其中/ 集合/ S/ 为/ 服务/ 速率/ 集合/ ,/ uk/ 为/ 当前/ 速率/ ,/ h/ 为/ 最/ 短/ 持续时间/ ,/ δ/ 为/ 速率/ 转移/ 时间/ ,/ QI/ 为/ 队列/ 长度/ ,/ 这种/ 策略/ 能够/ 保证系统/ 的/ 最大/ 延迟/ 不/ 超过/ 某一/ 阈值/ ./ 从/ 以上/ 分析/ 可以/ 看出/ 在/ 节点/ 级/ 节能/ 策略/ 中/ ,/ 网络设备/ 的/ 节能/ 策略/ 对于/ 所/ 处/ 网络/ 环境/ 的/ 依赖/ 更大/ ,/ 而且/ 有些/ 策略/ 需要/ 处理器/ 的/ 节能/ 策略/ 作为/ 基础/ ,/ 例如/ 基于/ 现有/ 处理器/ 由/ 软件/ 实现/ 的/ 路由器/ [/ 31/ ]/ ./ 3.2/ ./ 2/ 网络/ 级/ 节能/ 策略/ 目前/ 大多数/ 的/ 研究/ 工作/ 只/ 关注/ 于/ 网络/ 节能/ 问题/ 的/ 某/ 一/ (/ 些/ )/ 方面/ ,/ 例如/ 针对/ 某一/ 单独/ 计算/ 系统/ ,/ 或者/ 网络系统/ 某一/ 设备/ (/ CPU/ 、/ 网络接口/ 、/ 路由器/ 、/ 交换机/ 等/ )/ 的/ 能耗/ 问题/ ,/ 缺少/ 从/ 网络/ 全局/ 的/ 角度/ 研究/ 网络/ 的/ 节能/ 策略/ ./ 通过/ 对/ 现有/ 网络协议/ 与/ 路由/ 或者/ 网络/ Page9/ 架构/ 的/ 改进/ 和/ 设计/ 新/ 的/ 网络/ 架构/ 能够/ 在/ 互联网/ 、/ 数据中心/ 网络/ 和/ 无线网络/ 中/ 实现/ 能耗/ 节省/ ./ (/ 1/ )/ 网络协议/ 与/ 路由/ 调度/ 加入/ 能量/ 因素/ 的/ 网络协议/ 或者/ 路由/ 一般/ 遵循/ 资源整合/ 的/ 原则/ ,/ 即将/ 负载/ 流量/ 聚合/ 到/ 一部分/ 的/ 链路/ 或/ 设备/ 中/ ,/ 使/ 空闲/ 的/ 链路/ 或者/ 设备/ 关闭/ 或/ 休眠/ 从而/ 节省/ 网络/ 能耗/ ,/ 但/ 在/ 进行/ 负载/ 流量/ 聚合/ 时要/ 考虑/ 到/ 网络/ 的/ 可用性/ 和/ QoS/ ,/ 例如/ 限制/ 链路/ 的/ 最大/ 利用率/ ,/ 不能/ 为了/ 单纯/ 的/ 节约/ 能耗/ 而/ 失去/ 网络系统/ 的/ 功能/ ./ 文献/ [/ 32/ ]/ 提出/ 了/ 通过/ 对/ 目前/ 链路/ 状态/ 路由/ 协议/ 的/ 修改/ ,/ 如/ OSPF/ 协议/ ,/ 来/ 实现/ 网络层/ 的/ 节能/ 算法/ ./ 算法/ 使/ 路由器/ 能够/ 在/ 低/ 负载/ 的/ 情况/ 下/ 关闭/ 部分/ 链路/ ,/ 算法/ 分成/ 3/ 个/ 阶段/ ,/ 第/ 1/ 阶段/ 路由器/ 被/ 选择/ 作为/ 自身/ 最短/ 路径/ 树/ (/ SPTs/ )/ 的/ 输出/ 者/ ,/ 第/ 2/ 阶段/ 被/ 选择/ 的/ 路由器/ 的/ 邻居/ 执行/ 一个/ 修改/ 的/ Dijkstra/ 算法/ 来/ 检测/ 链路/ 是否/ 可以/ 被/ 关闭/ ,/ 最后/ 阶段/ 计算/ 修改/ 网络拓扑/ 下/ 的/ 新/ 网络/ 路径/ ./ 数据/ 表明/ 实际/ 的/ 互联网/ 中/ ,/ 60/ %/ 以上/ 的/ 链路/ 可以/ 被/ 关闭/ ./ (/ 2/ )/ 网络/ 设计/ 和/ 架构/ 在/ 网络/ 架构设计/ 方面/ 现有/ 的/ 研究/ 可以/ 分成/ 两类/ ,/ 一类/ 提出/ 在/ 现有/ 架构/ 下/ 的/ 改进/ ,/ 而/ 一类/ 提出/ 完全/ 重新/ 设计/ 新/ 的/ 架构/ ./ 文献/ [/ 25/ ]/ 提出/ 了/ 对/ 实际/ 网络/ 的/ 改进/ 从而/ 实施/ 睡眠/ 机制/ ,/ 在/ 网络/ 边缘/ 将/ 同一个/ 出口/ 的/ 连续/ 流量/ 通过/ “/ buffer/ &/ burst/ ”/ 整合/ 成/ 突发/ 流/ ,/ 在/ 网络/ 内部/ 实行/ 简单/ 的/ “/ wake/ -/ on/ -/ arrival/ ”/ 策略/ ,/ 这样/ 网络/ 内部/ 节点/ 就/ 在/ 睡眠/ 和/ 工作/ 两个/ 状态/ 之间/ 进行/ 切换/ ./ 这种/ 策略/ 减少/ 了/ 状态/ 之间/ 的/ 转移/ ,/ 但是/ 增加/ 了/ 端/ 到/ 端的/ 延迟/ ,/ 制造/ 突发/ 流量/ 的/ 间隔时间/ B/ 控制/ 着/ 性能/ 和/ 能耗/ 之间/ 的/ 权衡/ ./ 在/ 此基础/ 上/ 提出/ 了/ 一种/ 简单/ 实用/ 的/ practB/ &/ B/ 策略/ ,/ 实验/ 表明/ 在/ 连续流/ (/ CBR/ )/ 和/ 帕累托/ 分布/ 的/ 流量/ 负载/ 和/ 10/ %/ 的/ 网络/ 利用率/ 下/ ,/ 设置/ B/ =/ 5ms/ 能够/ 使/ 网络/ 60/ %/ 的/ 时间/ 处于/ 睡眠/ 状态/ 并且/ 延迟/ 在/ 5ms/ 以下/ ./ 文中/ 并/ 没有/ 提出/ 来/ 策略/ 在/ 什么/ 时候/ 进行/ 切换/ 是/ 最优/ 的/ 和/ 睡眠/ 的/ 最优/ 持续时间/ ,/ 并且/ 流量/ 整形/ 对于/ 抖动/ 的/ 影响/ 也/ 没有/ 考虑/ ./ 文献/ [/ 33/ ]/ 提出/ 了/ 光/ 网络/ ,/ 光/ 交换/ 不/ 需要/ 缓冲/ 并且/ 能量/ 利用率/ 高/ ./ 在/ 光/ 网络/ 中/ 信号/ 以光/ 的/ 形式/ 穿过/ 整个/ 网络/ ,/ 直接/ 在/ 光域/ 内/ 进行/ 信号/ 的/ 传输/ 、/ 再生/ 、/ 交换/ 和/ 选路/ ,/ 中间/ 不/ 经过/ 任何/ 光电/ 转换/ ,/ 以/ 达到/ 全光/ 透明性/ ,/ 实现/ 在/ 任意/ 时间/ 、/ 任意/ 地点/ 、/ 传送/ 任意/ 格式/ 信号/ 的/ 理想/ 目标/ ./ 但是/ 由于/ 光/ 器件/ 技术/ 的/ 局限性/ ,/ 目前/ 全光/ 网络/ 的/ 覆盖范围/ 还/ 很小/ ./ 互联网/ 节能/ 与/ 体系结构/ 的/ 改进/ 密切相关/ ./ 美国斯坦福大学/ 的/ NickMcKeown/ 等/ 教授/ 的/ 研究组/ 提出/ 了/ OpenFlow/ 的/ 研究课题/ [/ 34/ ]/ ,/ OpenFlow/ 交换机/ 将/ 原来/ 完全/ 由/ 交换机/ // 路由器/ 控制/ 的/ 报文/ 转发/ 过程/ 转化/ 为/ 由/ OpenFlow/ 交换机/ (/ OpenFlowSwitch/ )/ 和/ 控制/ 服务器/ (/ Controller/ )/ 来/ 共同完成/ ,/ 从而/ 实现/ 了/ 数据/ 转发/ 和/ 路由/ 控制/ 的/ 分离/ ,/ 这样/ 既/ 降低/ 了/ 网络设备/ 的/ 成本/ ,/ 又/ 节省/ 了/ 管理/ 代价/ ,/ 同时/ 还/ 能/ 有效/ 地/ 实现/ 网络/ 节能/ ./ 可以/ 看出/ 互联网/ 的/ 结构/ 改革/ 是/ 达到/ 节能/ 目标/ 的/ 一种/ 有效途径/ ./ 很多/ 网络/ 级/ 节能/ 策略/ 的/ 研究/ 采用/ 优化/ 理论/ 进行/ 分析/ ,/ 优化/ 方法/ 能够/ 在/ 理论/ 上/ 提供/ 指导/ ,/ 使/ 网络/ 设计/ 和/ 改进/ 有章可循/ ,/ 我们/ 将/ 在/ 4.4/ 节中/ 进行/ 详细/ 介绍/ ,/ 本节/ 就/ 不再/ 赘述/ ./ 4/ 模型/ 方法/ 与/ 评价/ 目前/ 已经/ 有/ 很多/ 的/ 节能/ 机制/ 和/ 策略/ 致力于/ 提高/ 网络/ 的/ 能量/ 有效/ 利用率/ ,/ 从而/ 控制系统/ 的/ 能耗/ 和/ 碳/ 排放量/ ./ 不同/ 节能/ 策略/ 的/ 效率/ 如何/ ,/ 一般/ 采用/ 测量方法/ 和/ 模型/ 方法/ 进行/ 分析/ ./ 测量方法/ 通过/ 一定/ 的/ 测量/ 设备/ 从/ 系统/ 测/ 得/ 各项/ 性能指标/ 或者/ 与/ 之/ 密切相关/ 的/ 量/ ,/ 这/ 是/ 最/ 直接/ 、/ 最/ 基本/ 的/ 方法/ ,/ 其它/ 方法/ 也/ 要/ 依赖于/ 测量/ 的/ 基本/ 量/ 或/ 历史/ 统计数据/ ,/ 缺点/ 在于/ 适用/ 于/ 已经/ 存在/ 并/ 运行/ 的/ 系统/ ,/ 比较/ 费时间/ ./ 而/ 模型/ 方法/ 是/ 通过/ 数学/ 工具/ 建立/ 适当/ 的/ 模型/ 对系统/ 进行/ 抽象/ ,/ 描述/ 能耗/ 与/ 性能/ 、/ 负载/ 之间/ 的/ 关系/ ./ 可以/ 对/ 已有/ 系统/ 进行/ 评价/ ,/ 也/ 可以/ 对/ 尚未/ 存在/ 系统/ (/ 系统/ 设计/ )/ 的/ 性能/ 进行/ 预测/ ,/ 工作量/ 小/ ,/ 缺点/ 在于/ 模型/ 一般/ 基于/ 简化/ 和/ 假设/ ,/ 刻画/ 系统/ 的/ 详细/ 程度/ 较/ 低/ ,/ 参数/ 的/ 确定/ 依赖于/ 对系统/ 测量/ 结果/ 或/ 对/ 参数/ 的/ 估计/ ,/ 与/ 实际/ 性能指标/ 有/ 差距/ ,/ 性能指标/ 的/ 精确性/ 依赖于/ 模型/ 的/ 精确性/ ./ 本节/ 归纳/ 了/ 网络/ 节能/ 的/ 评价/ 指标/ ,/ 提出/ 了/ 一种/ 可行/ 的/ 绿色/ 评价/ 理论/ 框架/ ,/ 并且/ 在/ 此/ 框架/ 下/ 总结/ 了/ 节能/ 策略/ 的/ 三种/ 模型/ 方法/ ,/ 最后/ 介绍/ 了/ 优化/ 方法/ 在/ 绿色/ 网络/ 中/ 的/ 应用/ ./ 4.1/ 网络/ 节能/ 评价/ 指标/ 绿色/ 网络/ 能耗/ 效率/ 的/ 合理/ 评价/ 是/ 绿色/ 网络/ 领域/ 亟待解决/ 的/ 严峻/ 问题/ ./ 人们/ 已经/ 使用/ 随机/ 模型/ 来/ 评价/ 系统/ 的/ 很多/ 属性/ ,/ 同样/ 希望/ 能够/ 刻画/ 网络系统/ 的/ 能耗/ 属性/ ./ 本节/ 将/ 建立/ 可/ 量化/ 和/ 可/ 操作/ 的/ 能耗/ 评价/ 指标/ 系统/ ,/ 这是/ 网络系统/ 能耗/ 评价/ 的/ 前提/ 和/ 基础/ ./ Page10/ 我们/ 需要/ 指出/ ,/ 由于/ 系统/ 固有/ 的/ 差异性/ 和/ 相关性/ ,/ 使用/ 单个/ 指标/ 不能/ 很/ 好/ 地/ 表示/ 系统/ 的/ 整个/ 状态/ ./ 然而/ 选择/ 不同/ 的/ 指标/ 对/ 评价/ 结果/ 有/ 很大/ 影响/ ./ 因此/ ,/ 我们/ 需要/ 在/ 制定/ 评价/ 指标/ 的/ 方向/ 上/ 达成/ 共识/ ,/ 以便/ 于/ 系统/ 能耗/ 的/ 交叉/ 比较/ ./ 传统/ 的/ 评价/ 系统/ 能效/ 的/ 方法/ 是/ 直接/ 基于/ 系统/ 能耗/ 总量/ 或/ 节约/ 的/ 能量/ 进行/ 分析/ 评价/ ./ 使用/ 这种/ 方法/ 对系统/ 进行/ 比较/ 时/ ,/ 只/ 进行/ 笼统/ 的/ 总量/ 分析/ ,/ 往往/ 有/ 很大/ 的/ 局限性/ ,/ 如/ 处理器/ ./ 文献/ [/ 35/ ]/ 中/ 指出/ 处理器/ 的/ 能耗/ 与/ 时钟/ 频率/ 成正比/ ,/ 降低/ 时钟/ 频率/ 可/ 降低/ 能耗/ ,/ 但/ 性能/ 也/ 下降/ ,/ 因此/ 在/ 比较/ 处理器/ 能量/ 效率/ 时/ ,/ 能耗/ 总量/ 不是/ 一个/ 好/ 的/ 度量/ 指标/ ./ 除了/ 能耗/ 总量/ 的/ 度量/ 指标/ 之外/ ,/ 针对/ 目前/ 研究/ 中/ 已经/ 存在/ 的/ 多数/ 度量/ 指标/ ,/ 我们/ 根据/ 这些/ 指标/ 适用范围/ ,/ 大致/ 将/ 它们/ 分为/ 3/ 类/ :/ (/ 1/ )/ 基于/ 总/ 能耗/ 与/ 有效/ 能耗/ 关系/ 的/ 评价/ 系统/ 运行/ 时所/ 产生/ 的/ 能耗/ 只有/ 一部分/ 用于/ 系统/ 的/ 功能/ 实现/ 上/ ,/ 剩下/ 的/ 能量消耗/ 在/ 系统/ 运行/ 的/ 支撑/ 环节/ ,/ 如/ 冷却/ 、/ 供电/ 设备/ 等/ ./ 这类/ 指标/ 通过/ 系统/ 的/ 有效/ 能耗/ 与/ 总/ 能耗/ 的/ 关系/ 来/ 进行/ 评价/ ./ 这类/ 指标/ 的/ 度量/ 主要/ 有/ 文献/ [/ 36/ ]/ 中/ 的/ PUE/ 、/ DCiE/ ./ PUE/ (/ PowerUsageEffectiveness/ )/ ,/ 即/ 能量/ 使用/ 效率/ ,/ 它/ 的/ 定义/ 如下/ :/ 其中/ ,/ TotalFacilityPower/ 是/ 电表/ 测量/ 得到/ 的/ 能耗/ ,/ 它/ 包括/ 电力/ 输送/ 部分/ UPS/ 、/ 开关/ 、/ 产生器/ 、/ PDUs/ 、/ 电池/ 和/ IT/ 设备/ 之外/ 的/ 配电/ 损失/ ;/ 冷却系统/ 部分/ 如/ 冷水机组/ 、/ 计算机房/ 空调/ 单元/ 、/ 直接/ 膨胀/ 式/ 空气/ 处理单元/ 、/ 泵/ 和/ 冷却塔/ ;/ 计算/ 、/ 网络/ 和/ 存储/ 节点/ ;/ 其它/ 部分/ 如/ 数据中心/ 照明/ 等/ ./ ITEquipmentPower/ 是/ 数据中心/ 中/ 用于/ 管理/ 、/ 处理/ 、/ 或者/ 路由/ 数据/ 所用/ 的/ 能耗/ ./ 它/ 包括/ 与/ IT/ 设备/ 相关联/ 的/ 负载/ ,/ 如/ 计算/ 、/ 存储/ 和/ 网络设备/ 以及/ 补充/ 设备/ 如/ KVM/ 交换/ ,/ 监控/ 和/ 用于/ 监测/ 或/ 控制/ 数据中心/ 的/ 工作站/ 和/ 笔记本电脑/ ./ 如果/ PUE/ =/ 3.0/ ,/ 它/ 表明/ 该/ 数据中心/ 的/ 实际/ 能耗/ 需求/ 是/ IT/ 设备/ 所/ 需/ 能耗/ 的/ 3/ 倍/ ./ DCiE/ (/ DatacenterInfrastructureEfficiency/ )/ ,/ 即/ 数据中心/ 基础设施/ 效率/ ,/ 它/ 的/ 定义/ 如下/ :/ DCiE/ =/ 1/ 如果/ DCiE/ =/ 33/ %/ ,/ 表明/ 数据中心/ 中/ IT/ 设备/ 消耗/ 的/ 能耗/ 只/ 占/ 总/ 能耗/ 的/ 33/ %/ ./ (/ 2/ )/ 基于/ 能耗/ 与/ 性能/ 关系/ 的/ 评价/ 这/ 类/ 指标/ 通常/ 是/ 通过/ 衡量/ 系统/ 在/ 完成/ 一定/ 工作/ 任务/ 的/ 能耗/ 来/ 进行/ 评价/ 的/ ./ 这里/ 对/ 工作/ 任务/ 的/ 定义/ 不是/ 唯一/ ,/ 而是/ 灵活/ 多变/ 的/ ,/ 如/ CPU/ 利用率/ 、/ 能力/ 、/ 吞吐量/ 、/ 数据/ 传输率/ 等/ ./ 这类/ 指标/ 的/ 度量/ 主要/ 有/ ECR/ [/ 37/ -/ 38/ ]/ 、/ EER/ [/ 38/ ]/ 、/ ECRW/ [/ 37/ ]/ 、/ ERP/ [/ 39/ ]/ 、/ TEER/ [/ 40/ ]/ 、/ TEEER/ [/ 41/ ]/ ./ ECR/ (/ EnergyConsumptionRating/ )/ ,/ 即/ 能量消耗/ 评级/ ,/ 它/ 可以/ 通过/ 式/ (/ 13/ )/ 进行/ 计算/ :/ 其中/ ,/ Ef/ 是/ 系统/ 满/ 负载/ 时/ 消耗/ 的/ 能量/ (/ W/ )/ ,/ 而/ Tf/ 是/ 系统/ 最大/ 的/ 吞吐量/ (/ Gbps/ )/ ./ ECR/ 的/ 单位/ 为/ W/ // Gbps/ ,/ 其/ 物理/ 意义/ 是/ 每秒/ 传输/ 一/ 千兆/ 串行/ 数据/ 所/ 消耗/ 的/ 能量/ ./ EER/ (/ EnergyEfficiencyRating/ )/ ,/ 即/ 能量/ 效率/ ECRW/ (/ EnergyConsumptionRatingWeighted/ )/ ,/ 评级/ ,/ 它/ 是/ ECR/ 的/ 倒数/ ,/ 单位/ 为/ Gbps/ // W/ ./ 即/ 加权/ 能耗/ 评级/ ,/ 它/ 可以/ 通过/ 式/ (/ 14/ )/ 进行/ 计算/ :/ 其中/ ,/ Ef/ 、/ Eh/ 和/ Ei/ 分别/ 表示/ 系统/ 在/ 满/ 负载/ 、/ 50/ %/ 负载/ 和/ 空/ 负载/ 下/ 消耗/ 的/ 能量/ (/ W/ )/ ,/ α/ ,/ β/ ,/ γ/ 反应/ 系统/ 运行/ 时/ 混合/ 模式/ 的/ 加权/ 系数/ ./ ECRW/ 考虑/ 了/ 空闲/ 模式/ ,/ 它/ 可以/ 作为/ ECR/ 的/ 补充/ 指标/ 来/ 估算/ 设备/ 的/ 能耗/ 管理/ 能力/ ./ 根据/ Barros/ [/ 5/ ]/ 的/ 按/ 比例/ 能耗/ 计算/ 的/ 原则/ ,/ 一个/ 理想/ 系统/ 的/ ECRW/ 评级/ 应/ 等于/ 0.55/ ×/ ECR/ ,/ 而/ 一个/ 拥有/ 边缘/ 能耗/ 管理/ 能力/ 的/ 系统/ 所/ 实现/ 的/ ECRW/ 评级/ ,/ 理想/ 上/ 应该/ 接近/ ECR/ ./ ERP/ (/ Energy/ -/ ResponseTimeProduct/ )/ ,/ 即/ 能量/ -/ 响应/ 时间/ 积/ ,/ 它/ 可以/ 通过/ 式/ (/ 15/ )/ 进行/ 计算/ :/ 其中/ ,/ EE/ [/ P/ ]/ 和/ EE/ [/ T/ ]/ 分别/ 表示/ 系统/ 的/ 平均/ 能耗/ 和/ 平均/ 响应/ 时间/ ./ 当/ 系统/ 的/ 性能/ 被/ 定义/ 为/ 平均/ 响应/ 时间/ 的/ 倒数/ 时/ ,/ ERP/ 指标/ 就/ 和/ 上述/ EER/ 指标/ 一样/ 了/ ./ TEER/ (/ TelecommunicationEnergyEfficiencyRatio/ )/ ,/ 即/ 通信/ 能耗/ 效率/ 评级/ ,/ 它/ 可以/ 通过/ 式/ (/ 16/ )/ 进行/ 计算/ :/ 其中/ ,/ UsefulWork/ 可以/ 根据/ 设备/ 功能/ 的/ 参考/ 标准/ 定义/ ,/ 如/ 数据/ 传输率/ 、/ 吞吐量/ 、/ 每秒/ 处理量/ 等/ ,/ 而/ Power/ 是/ 设备/ 能耗/ 的/ 测量/ 值/ ./ TEEER/ (/ TelecommunicationEquipmentEnergyPage11EfficiencyRatio/ )/ ,/ 即/ 通信/ 设备/ 能耗/ 效率/ 评级/ ,/ 根据/ 不同/ 类型/ 的/ 设备/ 选择/ 的/ 计算公式/ 如表/ 2/ ./ TransportSwitch/ // RouterMediaGatewayAccess/ 当然/ ,/ 基于/ 能耗/ 和/ 性能/ 关系/ 的/ 评价/ 除了/ 使用/ 上述/ 度量/ 之外/ ,/ 还/ 可以/ 使用/ 能耗/ 与/ 性能/ 的/ 加权/ 和/ 作为/ 度量/ ,/ 如/ 文献/ [/ 15/ ]/ 中/ 使用/ 了/ EE/ [/ T/ ]/ +/ EE/ [/ E/ ]/ // β/ ,/ 其中/ T/ 和/ E/ 分别/ 是/ 一个/ 任务/ 的/ 响应/ 时间/ 和/ 能耗/ ,/ 而/ β/ 控制/ 着/ 延迟/ 的/ 相对/ 成本/ ./ (/ 3/ )/ 其它/ 评价/ 指标/ 除了/ 上述/ 2/ 种/ 类型/ 的/ 指标/ 外/ ,/ 还有/ 其它/ 一些/ 指标/ ,/ 我们/ 简单/ 介绍/ EPI/ [/ 42/ ]/ 、/ W/ // ft2/ [/ 43/ ]/ ./ 例/ 指数/ ./ 它/ 可以/ 通过/ 式/ (/ 17/ )/ 进行/ 计算/ :/ EPI/ (/ EnergyProportionalityIndex/ )/ ,/ 即/ 能量/ 比/ 其中/ ,/ M/ 是/ 系统/ 在/ 满/ 负载/ 状态/ 下/ 消耗/ 的/ 能量/ ,/ I/ 是/ 系统/ 在/ 空闲/ 状态/ 下/ 消耗/ 的/ 能量/ ./ EPI/ 的/ 单位/ 是/ 百分率/ ,/ 它/ 刻画/ 了/ 能耗/ 与/ 负载/ 的/ 正比例/ 关系/ ./ 当/ EPI/ 为/ 100/ 时/ ,/ 能耗/ 和/ 负载/ 达到最佳/ 正比例/ 关系/ ,/ 而/ EPI/ 为/ 0/ 时/ ,/ 能耗/ 对/ 负载/ 完全/ 不/ 可知/ ./ W/ // ft2/ ,/ 即/ 能耗/ 密度/ ,/ 它/ 通过/ 系统/ 的/ 总/ 能耗/ 除以/ 系统/ 所/ 占用/ 的/ 空间/ 体积/ 计算/ 所得/ ./ 上述/ 的/ 3/ 类/ 指标/ 之间/ 以及/ 同一/ 指标/ 中/ 的/ 不同/ 度量/ 并/ 不是/ 相互/ 孤立/ 的/ ,/ 有时/ 我们/ 需要/ 把/ 它们/ 联系/ 起来/ 评价/ 系统/ 的/ 能耗/ 属性/ ./ 如/ 第/ 2/ 类/ 指标/ (/ ECR/ 、/ EER/ 、/ TEER/ 和/ TEEER/ )/ 都/ 无法/ 刻画/ 系统/ 的/ 能耗/ 和/ 负载/ 之间/ 的/ 按/ 比例/ 程度/ [/ 6/ ]/ ,/ 但/ 第/ 3/ 类/ 指标/ 中/ 的/ EPI/ 却/ 可以/ 基于/ 空闲/ 状态/ 下/ 的/ 能耗/ 和/ 满/ 负载/ 状态/ 下/ 的/ 能耗/ 来/ 评价/ 该/ 按/ 比例/ 程度/ ./ 同样/ ,/ 第/ 2/ 类/ 指标/ 中/ 的/ 度量/ ECRW/ 作为/ ECR/ 度量/ 的/ 扩展/ ,/ 它/ 在/ 量化/ 系统/ 的/ 能耗/ 效率/ 时/ 考虑/ 了/ 多种/ 负载/ (/ 零/ 负载/ 、/ 半/ 负载/ 和/ 满/ 负载/ )/ ./ 上述/ 能耗/ 指标/ 系统/ 不仅/ 有利于/ 绿色/ 网络/ 的/ 研究/ ,/ 而且/ 对/ 工业/ 也/ 有/ 帮助/ ,/ 如/ 它/ 可以/ 指导/ 制造商/ 和/ 服务提供商/ 在/ 基础设施/ 的/ 部署/ 和/ 购买/ 上/ 做出/ 更/ 有效/ 的/ 决定/ ./ 4.2/ 绿色/ 评价/ 框架/ 模型/ 方法/ 为/ 评价/ 网络/ 节能/ 机制/ 提供/ 了/ 数学/ 工具/ 和/ 理论/ 手段/ ,/ 面对/ 复杂/ 的/ 网络系统/ 和/ 多重性/ 的/ 评价/ 指标/ 来说/ ,/ 仅仅/ 采用/ 单一/ 的/ 模型/ 方法/ 是/ 不够/ 的/ ,/ 我们/ 需要/ 建立/ 系统/ 的/ 绿色/ 评价/ 理论体系/ ,/ 综合/ 使用/ 多种/ 模型/ 方法/ ,/ 使/ 他们/ 能够/ 互相/ 结合/ 和/ 补充/ ./ 所以/ 绿色/ 网络/ 面临/ 的/ 一个/ 重要/ 挑战/ 是/ 如何/ 建立/ 一个/ 系统/ 的/ 评价/ 体系/ ,/ 提供/ 自上而下/ 的/ 方法/ 分/ 层次分/ 粒度/ 地/ 评价/ 各种/ 节能/ 机制/ 和/ 策略/ ./ 本节/ 根据/ 前面/ 绿色/ 网络/ 的/ 研究/ 工作/ ,/ 提出/ 了/ 绿色/ 评价/ 的/ 概念/ ,/ 并/ 总结/ 了/ 绿色/ 评价/ 应/ 包含/ 的/ 内容/ ,/ 构建/ 了/ 网络/ 节能/ 机制/ 评价/ 的/ 框架/ ./ 绿色/ 评价/ 是/ 利用/ 模型/ 方法/ 通过/ 对/ 绿色/ 网络/ 中/ 的/ 节能/ 机制/ 和/ 策略/ 进行/ 建模/ 描述/ 和/ 分析/ 求解/ 的/ 评价/ 体系/ ./ 具体来说/ ,/ 绿色/ 评价/ 将/ 系统资源/ 的/ 状态/ 作为/ 评价/ 的/ 基础/ ,/ 通过/ 用/ 模型/ 方法/ 描述/ 资源/ 状态/ 及其/ 之间/ 的/ 转移/ ,/ 从而/ 求解/ 出/ 各种/ 评价/ 指标/ ./ 4.2/ ./ 1/ 评价/ 基础/ :/ 系统资源/ 状态/ 对/ 系统资源/ 状态/ 的/ 分析/ 是/ 绿色/ 评价/ 的/ 基础/ ,/ 对/ 状态/ 的/ 研究/ 不仅/ 涉及/ 状态/ 自身/ ,/ 还/ 包括/ 对应/ 的/ 系统/ 参数/ 、/ 能量消耗/ 和/ 系统资源/ 利用率/ 相互/ 关系/ 的/ 研究/ ./ 绿色/ 网络/ 的/ 各种/ 机制/ 定义/ 了/ 系统/ 的/ 不同/ 状态/ ,/ 状态/ 之间/ 是/ 离散/ 的/ ,/ 不同/ 的/ 状态/ 组成/ 了/ 一个/ 状态/ 集合/ :/ S/ =/ {/ Si/ |/ i/ =/ 1/ ,/ 2/ ,/ 3/ ,/ …/ }/ ./ 在/ 4.1/ 节中/ 可以/ 看到/ 系统/ 能耗/ 是/ 绿色/ 评价/ 的/ 重要/ 指标/ ,/ 基于/ 在/ 第/ 2/ 节对/ 不同/ 系统/ 的/ 能耗/ 模型/ 的/ 分析/ 和/ 第/ 3/ 节对/ 节能/ 机制/ 和/ 策略/ 的/ 研究/ ,/ 我们/ 得到/ 系统/ 平均/ 功耗/ 的/ 定量/ 计算公式/ 如下/ :/ P/ =/ ∑/ i/ ∈/ S/ 对于/ 系统/ 状态/ 集合/ 的/ 每/ 一个/ 元素/ Si/ ,/ 首先/ 计算/ 该/ 系统/ 状态/ 下/ 的/ 平均/ 功耗/ Pi/ 和/ 稳态/ 概率/ Pr/ (/ Si/ )/ ,/ Pi/ 可以/ 通过/ 式/ (/ 4/ )/ 或/ 直接/ 测量/ 得到/ ./ 然后/ 计算/ 以/ Si/ 为/ 目的/ 的/ 状态/ 转移/ 所/ 产生/ 的/ 转移/ 功耗/ Pji/ 和/ 转移/ 概率/ Pr/ (/ Sj/ ,/ Si/ )/ ,/ 其中/ Di/ 表示/ 以/ Si/ 为/ 目的/ 的/ 转移/ 的/ 起始/ 状态/ 的/ 集合/ ,/ 如图/ 5/ 所示/ ./ 图中/ uji/ 表示/ 从/ 状态/ Sj/ 到/ Si/ 的/ 转移/ 速率/ ,/ 那么/ 从/ 状态/ Sj/ 到/ Si/ 的/ 转移/ 概率/ 为/ Page12/ 在/ 计算/ 系统/ 的/ 瞬时/ 功耗/ 时/ ,/ 形式/ 和/ 式/ (/ 18/ )/ 是/ 一样/ 的/ ,/ 区别/ 在于/ Pi/ 为/ 系统/ 在/ 状态/ Si/ 下/ 的/ 瞬时/ 功耗/ ,/ Pr/ (/ Si/ )/ 为/ 状态/ Si/ 的/ 瞬时/ 概率/ ,/ Pji/ 表示/ 转移/ 功耗/ ,/ Pr/ (/ Sj/ ,/ Si/ )/ 表示/ 转移/ 概率/ ./ 在/ 计算/ 系统/ 一段时间/ 内/ 的/ 能耗/ 时/ 可以/ 利用/ 式/ (/ 18/ )/ 和/ 式/ (/ 1/ )/ ,/ 用/ 系统/ 的/ 功耗/ 对/ 时间/ 进行/ 积分/ 得到/ ./ 4.2/ ./ 2/ 评价/ 手段/ :/ 模型/ 方法/ 利用/ 模型/ 方法/ 能够/ 清楚/ 地/ 分析/ 状态/ 及/ 之间/ 的/ 转移/ ,/ 模型/ 方法/ 主要/ 包括/ 各种/ 随机/ 模型/ 方法/ ,/ 例如/ 排队/ 理论/ 、/ 马尔卡/ 夫/ 过程/ 、/ 随机/ Petri/ 网/ 、/ 随机/ 进程/ 代数/ 等/ ,/ 这些/ 方法/ 易于/ 对/ 网络系统/ 状态/ 进行/ 有效/ 的/ 描述/ ,/ 精确/ 刻画/ 网络系统/ 的/ 各种/ 随机/ 行为/ 及/ 各个/ 组件/ 之间/ 的/ 关系/ ,/ 便于/ 计算/ 能耗/ 指标/ ./ 目前/ 来说/ ,/ 大部分/ 模型/ 假设/ 利用/ 指数分布/ ,/ 而/ 对于/ 具有/ 其它/ 分布/ 的/ 随机/ 模型/ 及其/ 求解/ 有着/ 一定/ 的/ 困难/ ./ 另一方面/ ,/ 基于/ 状态/ 模型/ 的/ 求解/ 通常/ 会/ 导致/ 状态/ 空间/ 爆炸/ 的/ 问题/ ,/ 但/ 目前/ 已经/ 有/ 多种/ 方法/ 来/ 解决/ 这一/ 问题/ ./ 综上所述/ ,/ 我们/ 总结/ 网络/ 节能/ 机制/ 的/ 评价/ 的/ 基本/ 内容/ ,/ 给出/ 绿色/ 评价/ 的/ 框架/ 模型/ ,/ 如图/ 6/ 所示/ ./ 4.2/ ./ 3/ 评价/ 中/ 的/ 几个/ 基本/ 问题/ 首先/ 是/ 评价/ 的/ 多/ 指标/ 问题/ ,/ 在/ 进行/ 绿色/ 评价/ 时/ ,/ 会/ 涉及/ 多/ 指标/ 评价/ 的/ 问题/ ./ 在/ 不同/ 的/ 节能/ 速率/ 缩放/ 机制/ 的/ 设计/ 中/ ,/ 机制/ 的/ 最优性/ 、/ 公平性/ 和/ 鲁棒性/ 成为/ 评价/ 算法/ 的/ 主要/ 3/ 个/ 指标/ ./ 这/ 3/ 个/ 指标/ 又/ 是/ 矛盾/ 的/ 统一体/ ,/ 想要/ 同时/ 满足/ 所有/ 指标/ 的/ 要求/ 是/ 非常/ 困难/ 的/ ,/ 例如/ 在/ 最/ 短/ 剩余时间/ 调度/ 算法/ (/ SRPT/ )/ 中/ ,/ 任务/ 的/ 公平性/ 就/ 难以实现/ ./ 因此/ ,/ 需要/ 在/ 具有/ 矛盾性/ 的/ 指标/ 之间/ 寻求/ 最佳/ 的/ 权衡/ ./ 性能/ 评价/ 涉及/ 评价/ 的/ 时间尺度/ ,/ 在/ 进行/ 绿色/ 评价/ 中/ ,/ 通常/ 会/ 选取/ 一定/ 的/ 时间/ 间隔/ 作为/ 评价/ 的/ 时间尺度/ ,/ 而/ t/ 的/ 选择/ 对/ 评价/ 结构/ 会/ 有/ 一定/ 的/ 影响/ ./ 如果/ t/ 很小/ ,/ 那么/ ,/ 结果/ 代表/ 了/ 瞬时/ 能耗/ ,/ 即/ 功耗/ ,/ 如果/ t/ 较大/ ,/ 评价/ 结果/ 代表/ 能耗/ 长期/ 的/ 平均值/ ,/ 能够/ 反映/ 相对/ 稳定/ 的/ 变化规律/ ./ 而/ 只/ 评价/ 系统/ 的/ 总/ 能耗/ 或者/ 瞬时/ 能耗/ 不能/ 完整/ 地/ 反映/ 系统/ 的/ 特性/ ,/ 尤其/ 是/ 当/ 负载/ 存在/ 突发/ 特性/ 时/ ,/ 系统/ 的/ 瞬时/ 能耗/ 可能/ 偏离/ 于/ 平均/ 能耗/ 而/ 产生/ 抖动/ ,/ 所以/ 在/ 评价/ 时/ 需要/ 同时/ 考虑/ 两个/ 时间尺度/ ./ 4.2/ ./ 4/ 评价/ 与/ 优化/ 绿色/ 网络/ 的/ 再造/ 过程/ 是/ 一个/ 循环/ 的/ 过程/ ,/ 通过/ 模型/ -/ 评价/ -/ 优化/ -/ 实施/ -/ 评价/ -/ 再/ 优化/ 这个/ 循环/ 逐步/ 改进/ 绿色/ 网络/ 的/ 机制/ 和/ 策略/ ./ 在/ 这个/ 过程/ 中/ 评价/ 和/ 优化/ 是/ 密不可分/ 的/ ,/ 优化/ 是/ 评价/ 的/ 目的/ ,/ 评价/ 为/ 优化/ 提供/ 基础/ ,/ 在/ 优化/ 模型/ 中/ 一般/ 包含/ 两个/ 主要/ 元素/ ,/ 优化/ 目标/ 和/ 约束条件/ ,/ 而/ 约束条件/ 中/ 的/ 刻画/ 系统/ 的/ 参数/ 往往/ 是/ 不/ 确定/ 的/ ,/ 需要/ 用/ 随机变量/ 表示/ ./ 通用/ 的/ 优化/ 形式/ 可以/ 表示/ 为/ 其中/ z/ (/ x/ )/ 为/ 目标/ 函数/ ,/ x/ 为/ 系统/ 参数/ 的/ 随机变量/ ,/ fi/ (/ x/ )/ ,/ gi/ (/ x/ )/ ,/ hi/ (/ x/ )/ 为/ 系统/ 的/ 约束条件/ ,/ 如/ 系统/ 吞吐/ 率/ 、/ 延迟/ 、/ 负载/ 均衡/ 等/ ,/ 这些/ 变量/ 可以/ 通过/ 模型/ 分析/ 和/ 求解/ 用/ 一阶矩/ 、/ 二阶/ 矩等/ 形式/ 进行/ 描述/ ./ 在/ 实际/ 应用/ 中/ 会/ 用到/ 式/ (/ 20/ )/ 的/ 对偶/ 形式/ ,/ 它们/ 之间/ 是/ 同构/ 的/ ,/ 可以/ 进行/ 最大/ 和/ 最小/ 目标/ 形式/ 的/ 转换/ ./ 优化/ 模型/ 中/ 随机变量/ 的/ 存在/ 增加/ 了/ 分析/ 和/ 求解/ 的/ 难度/ ,/ 而/ 模型/ 分析/ 和/ 评价/ 的/ 结果/ 可以/ 刻画/ 随机变量/ ,/ 为/ 优化/ 模型/ 中/ 精确/ 的/ 系统/ 描述/ 提供/ 依据/ ,/ 所以/ 说/ 评价/ 是/ 优化/ 的/ 基础/ ./ 4.3/ 模型/ 评价/ 方法/ 本/ 节/ 我们/ 将/ 总结/ 多种/ 模型/ 和/ 分析方法/ ,/ 主要/ 包括/ 排队模型/ 、/ 马尔卡/ 夫/ 过程/ 模型/ 以及/ 随机/ Petri/ 网/ ,/ 这些/ 随机/ 模型/ 为/ 绿色/ 评价/ 提供/ 了/ 有力/ 的/ 手段/ ./ 4.3/ ./ 1/ 排队模型/ 排队/ 论/ 又称/ 随机/ 服务/ 系统/ 理论/ ,/ 主要/ 用来/ 研究/ 一个/ 系统对/ 一个/ 群体/ 提供/ 服务/ 时/ ,/ 系统/ 所/ 呈现/ 的/ 各种/ 状态/ ,/ 它/ 是/ 进行/ 计算机系统/ 网络/ 和/ 系统/ 的/ 模型/ 描述/ 、/ 性能/ 分析/ 和/ 评价/ 的/ 重要/ 手段/ ./ 网络系统/ 可以/ 看成/ 一个/ 顾客/ -/ 服务员/ 的/ 排队/ 系统/ ,/ 将/ 能量/ 因素/ 加入/ 服务/ 策略/ 中/ ,/ 通过/ 服务/ 策略/ 对/ 顾客/ 进行/ 调度/ 和/ 提供/ 服务/ ./ 这里/ 的/ 服务员/ 可以/ 是/ 网络系统/ 中/ 提供/ 服务/ 的/ 某个/ 独立/ 功能/ 的/ 节点/ ,/ 如/ 终端/ 、/ 链路/ 或者/ 设备/ ,/ 也/ 可以/ 是/ 某层/ 的/ 网络协议/ ./ 服务/ 策略/ 的/ 制定/ 影响/ 系统/ 状态/ 的/ 变化/ ,/ 使/ 系统/ 服务/ 时间/ 的/ 分布/ 呈现出/ 一定/ 的/ 规律/ ./ 采用/ 经典/ 的/ 排队模型/ 进行/ 模型/ 的/ 描述/ 和/ 分析/ 是/ 描述/ 绿色/ Page13/ 网络/ 机制/ 和/ 策略/ 的/ 重要/ 手段/ ./ 应用/ 广泛/ 的/ 节能/ 机制/ 要/ 实时/ 做出/ 两个/ 决策/ :/ 一是/ 通过/ 任务调度/ 策略/ 决定/ 服务/ 规程/ ,/ 二是/ 通过/ 状态/ 控制器/ 决定/ 服务/ 状态/ ,/ 如图/ 7/ 所示/ ./ 文献/ [/ 44/ ]/ 用/ 排队模型/ 和/ 动态/ 规划/ 分析/ 了/ 3/ 种/ 速率/ 控制策略/ :/ 静态/ 速率/ 、/ 门限/ 静态/ 速率/ 和/ 动态/ 最优/ 速率/ 选择/ 算法/ ,/ 评价/ 了/ 不同/ 算法/ 的/ 能耗/ 和/ 对/ 性能/ 影响/ 的/ 上/ 下界/ ./ 文中/ 将/ 系统/ 看成/ 是/ 一个/ M/ // G/ // 1PS/ 的/ 队列/ ,/ 将式/ (/ 6/ )/ 的/ 能耗/ 函数/ 简化/ 为/ P/ (/ s/ )/ =/ s/ α/ ,/ 并/ 假设/ 最优/ 的/ 动态/ 速率/ 是/ 凹/ 函数/ 且/ 当/ α/ =/ 2/ ,/ n/ / 2/ γ/ 时/ ,/ 推导/ 出/ 系统/ 的/ 最优/ 速率/ sn/ 满足/ γ/ +/ n/ -/ 2/ 槡/ γ/ / sn/ 其中/ γ/ 是/ 一个/ 无量/ 纲/ 的/ 参数/ ,/ 表示/ 负载/ 对于/ 系统/ 的/ 影响/ ,/ n/ 表示/ 系统/ 队列/ 状态/ ,/ β/ 是/ 性能/ 和/ 能耗/ 的/ 权衡/ 参数/ ./ 通过/ 式/ (/ 21/ )/ 进行/ 最优/ 速率/ 的/ 选取/ 从而/ 制定/ 节能/ 策略/ ./ 在/ 此/ 节能/ 策略/ 下/ ,/ 将/ 能耗/ 和/ 延迟/ 作为/ 目标/ 函数/ 进行/ 评价/ ,/ 即/ 其中/ T/ 为/ 单个/ 任务/ 的/ 系统/ 响应/ 时间/ ,/ E/ 为/ 单个/ 任务/ 的/ 系统/ 能耗/ ,/ 假设/ 任务/ 到达/ 服从/ 泊松/ 分布/ ,/ λ/ 为/ 任务/ 到达/ 的/ 速率/ ,/ 根据/ Little/ 公式/ 和/ 式/ (/ 6/ )/ 、/ 式/ (/ 22/ )/ 可以/ 表示/ 为/ 通过/ 计算/ 可以/ 得到/ 目标/ 函数/ 的/ 上/ 下界/ 为/ max/ (/ γ/ α/ ,/ γ/ α/ (/ α/ -/ 1/ )/ 1/ (/ )/ α/ -/ 1/ )/ / z/ / zgz/ =/ 其中/ T/ 为/ 时延/ ,/ E/ 为/ 能耗/ ,/ zgz/ 为/ 门限/ 静态/ 策略/ 的/ 成本/ ./ 文献/ [/ 4/ ]/ 进一步/ 分析/ 了/ 共享/ 处理器/ 策略/ (/ PS/ )/ 和/ 最/ 短/ 剩余/ 处理/ 时间/ 策略/ (/ SRPT/ )/ 对于/ 速率/ 缩放/ 机制/ 的/ 影响/ ,/ 指出/ 速率/ 控制/ 和/ 任务调度/ 策略/ 是/ 相互/ 独立/ 的/ ,/ 而且/ 在/ 考虑/ 能耗/ 时/ 任务调度/ 比起/ 速率/ 控制/ 来说/ 并/ 不/ 十分/ 重要/ ,/ 例如/ 最坏/ 情况/ 下/ ,/ PS/ 在/ 以/ 能耗/ 和/ 时延/ 的/ 线性组合/ 目标/ 下/ 是/ O/ (/ 1/ )/ -/ competitive/ ,/ 而/ 仅仅/ 考虑/ 时延/ ,/ 不/ 考虑/ 能耗/ 因素/ 下/ PS/ 是/ Ω/ (/ ν/ 1/ // 3/ )/ -/ competitive/ ,/ ν/ 表示/ 任务/ 数量/ ./ 同样/ 的/ ,/ 在/ 随机/ 分析/ 中/ ,/ SRPT/ 和/ PT/ 几乎/ 没有/ 差别/ ./ 无论是/ M/ // M/ // 1/ 还是/ M/ // G/ // 1/ ,/ 都/ 假设/ 队列/ 无限/ 长/ ,/ 无法/ 计算/ 丢/ 包率/ ,/ 所以/ 要/ 考虑/ 队列/ 长度/ 对/ 性能/ 的/ 影响/ ./ 在/ 无法/ 确切/ 得知/ 到达/ 分布/ 和/ 服务/ 分布/ 时/ ,/ 通常/ 采用/ 一般/ 的/ G/ // G/ // 1/ // N/ 队列/ 模型/ ,/ 在/ G/ // G/ // 1/ // N/ 模型/ 下/ ,/ 我们/ 可以/ 得到/ 丢/ 包率/ 的/ 上/ 下界/ ,/ 文献/ [/ 45/ ]/ 分析/ 了/ 在/ 工作频率/ 为/ fc/ 下/ 的/ 丢/ 包率/ ,/ 其/ 满足/ pmaxc/ (/ fc/ )/ / pc/ (/ fc/ )/ / pminc/ (/ fc/ )/ =/ max0/ ,/ λ/ c/ -/ μ/ c/ (/ fc/ )/ 利用/ Bernstein/ 不等式/ 计算/ 出上界/ 为/ 其中/ λ/ c/ 、/ σ/ c/ 是/ 刻画/ 负载/ 特征/ 的/ ,/ μ/ c/ (/ fc/ )/ 为/ 工作频率/ fc/ 下/ 的/ 服务/ 速率/ ./ 利用/ 式/ (/ 25/ )/ 和/ (/ 26/ )/ 可以/ 算出/ 在/ 丢/ 包率/ 约束/ 情况/ 下/ ,/ fc/ 的/ 最佳值/ ./ 根据/ 负载/ 的/ 情况/ 系统/ 在/ 工作频率/ fc/ 下/ 系统/ 有/ 两个/ 状态/ :/ 空闲/ 和/ 活跃/ ,/ 根据/ 式/ (/ 18/ )/ ,/ 忽略/ 状态/ 转移/ 能耗/ 可以/ 得到/ fc/ 下/ 的/ 能耗/ 为/ / c/ (/ fc/ )/ =/ Pridle/ / idle/ (/ fc/ )/ +/ (/ 1/ -/ Pridle/ )/ / active/ (/ fc/ )/ (/ 27/ )/ 系统/ 空闲/ 的/ 概率/ Pridle/ 与/ 系统/ 最大/ 处理/ 能力/ 和/ 负载/ 的/ 比值/ 有关/ ,/ 在/ G/ // G/ // 1/ // N/ 队列/ 中/ ,/ 根据/ 式/ (/ 27/ )/ 和/ (/ 28/ )/ 得到/ 系统/ 能耗/ 的/ 上界/ 为/ / c/ (/ fc/ )/ / / ~/ / idle/ (/ fc/ )/ +/ λ/ c/ [/ 1/ -/ pminc/ ]/ 虽说/ 排队模型/ 可以/ 刻画/ 系统/ 所处/ 的/ 各种/ 状态/ ,/ 其/ 缺点/ 在于/ ,/ 不能/ 精确/ 地/ 描述/ 状态/ 的/ 转移/ ,/ 由于/ 状态/ 转移/ 带来/ 性能/ 和/ 能耗/ 的/ 损失/ 无法/ 描述/ ./ 而且/ 目前/ 的/ 分布/ 都/ 是/ 根据/ 假设/ ,/ 例如/ 泊松/ 到达/ 和/ 服务/ 时间/ 的/ 指数分布/ ,/ 与/ 实际/ 的/ 系统/ 有/ 一定/ 的/ 差别/ ./ 4.3/ ./ 2/ 马尔卡/ 夫/ 过程/ 模型/ 在/ 基于/ 马尔卡/ 夫/ 过程/ 的/ 随机/ 模型/ 中/ ,/ 可以/ 方便/ 地/ 刻画/ 系统/ 状态/ 的/ 变化规律/ 和/ 评估/ 系统/ 的/ 性能参数/ 和/ 节能/ 指标/ ./ 马尔卡/ 夫链/ 和/ 马尔卡/ 夫/ 回报/ 模型/ 已经/ 被/ 广泛/ 地/ 应用/ 在/ 节能/ 策略/ 的/ 设计/ 和/ 评价/ 中/ ./ Page14/ 文献/ [/ 46/ ]/ 中将/ 请求/ 到达/ 模拟/ 为/ 随机/ 过程/ ,/ 使用/ 平稳/ 马尔卡/ 夫/ 模型/ 来/ 预测/ 空闲/ 区间/ ,/ 并/ 使用/ 随机/ 优化/ 来/ 决定/ 关闭/ 某个/ 组件/ 的/ 时机/ ./ 对于/ 非/ 平稳/ 请求/ ,/ Chung/ 等/ 人/ 在/ 文献/ [/ 47/ ]/ 中/ 通过/ 预估/ 系统/ 运行/ 时/ 请求/ 的/ 到达/ 率/ ,/ 预算/ 不同/ 请求/ 到达/ 率下/ 的/ 优化/ 方案/ ,/ 当/ 实际/ 到达/ 率/ 发生变化/ 时/ 也/ 能/ 通过/ 在/ 最近/ 的/ 优化/ 方案/ 中/ 进行/ 插值/ 得到/ ./ 前/ 两种/ 方法/ 都/ 使用/ 了/ 离散/ 马尔卡/ 夫/ 模型/ ,/ 其/ 缺点/ 是/ 只能/ 进行/ 定期/ 的/ 管理决策/ ./ 为了/ 使/ 组件/ 能/ 在/ 任何/ 时间/ 关闭/ ,/ Qiu/ 等/ 人/ 在/ 文献/ [/ 48/ ]/ 中/ 使用/ 了/ 连续/ 时间/ 马尔卡/ 夫/ 模型/ ./ 在/ 应用服务/ 速率/ 缩放/ 机制/ 的/ 网络系统/ 中/ ,/ 策略/ 的/ 决策/ 参数/ 一般/ 是/ 系统/ 队列/ 的/ 长度/ ,/ 所以/ 用/ 队列/ 长度/ 、/ 服务/ 状态/ 等/ 相关/ 参数/ 的/ 组合/ 作为/ 系统/ 状态/ 的/ 描述/ ./ 通过/ 一维/ 或者/ 多维/ 的/ 离散/ 状态/ 马尔卡/ 夫链/ 进行/ 状态/ 转移/ 分析/ ,/ 从而/ 得到/ 能耗/ 以及/ 系统/ 吞吐量/ 、/ 丢/ 包率/ 、/ 延迟/ 等值/ ,/ 量化/ 评价/ 节能/ 策略/ ./ 文献/ [/ 29/ ,/ 49/ -/ 50/ ]/ 分析/ 了/ 3.2/ ./ 1/ 节中单/ 阈值/ 和/ 双/ 阈值/ 的/ 自/ 适应/ 链接/ 速率/ 策略/ ./ 首先/ 结合/ M/ // G/ // 1/ 队列/ 对系统/ 进行/ 描述/ ,/ 假设/ 到达/ 服从/ 泊松/ 分布/ ,/ 到达/ 速率/ 为/ λ/ ,/ 包/ 大小/ 符合/ i/ ./ i/ ./ d/ 指数分布/ ,/ U/ =/ {/ u1/ ,/ u2/ ,/ …/ ,/ un/ }/ 为/ 服务/ 速率/ 的/ 集合/ ,/ 根据/ Little/ 公式/ ,/ 对应/ 于/ 一个/ 服务/ 速率/ u/ 的/ 服务/ 利用率/ 为/ λ/ // u/ ,/ 通过/ 以/ 队列/ 长度/ 为/ 状态/ 的/ 一维/ 马尔卡/ 夫/ 模型/ 进行/ 分析/ ,/ 如图/ 8/ 所示/ ,/ 求解/ 得到/ 不同/ 状态/ 下/ 的/ 稳态/ 概率/ Prn/ :/ 烄/ ρ/ +/ ρ/ // ρ/ 1/ -/ 1/ ρ/ n/ -/ k/ +/ 2/ -/ 1/ -/ ρ/ Prn/ =/ 烅/ 烆/ 图/ 9/ 加入/ 转移/ 成本/ 和/ 队列/ 长度/ 的/ 双/ 阈值/ 节能/ 策略/ 然后/ 根据/ 式/ (/ 18/ )/ 和/ 式/ (/ 30/ )/ 进而/ 可以/ 计算/ 出/ 系统/ 的/ 平均/ 功耗/ 和/ 节省/ 的/ 功耗/ ./ 以上/ 的/ 模型/ 存在/ 的/ 问题/ 在于/ :/ 未/ 考虑/ 速率/ 转移/ 时间/ 和/ 代价/ ;/ 假设/ 队列/ 无限大/ ,/ 只/ 考虑/ 延迟/ 未/ 考虑/ 丢包/ ./ 将/ 转移/ 成本/ 和/ 队列/ 长度/ 加入/ 马尔卡/ 夫/ 模型/ [/ 51/ ]/ 可以/ 解决/ 以上/ 两个/ 问题/ ,/ 其/ 假设/ 速率/ 转移/ 的/ 时间/ 分布/ 是/ i/ ./ i/ ./ d/ 指数分布/ ,/ 定义/ uHL/ 和/ uLH/ 分别/ 为/ 从/ 高速率/ 到/ 低/ 速率/ 或者/ 反/ 方向/ 的/ 平均/ 转移/ 速率/ ,/ 其/ 倒数/ 为/ 平均/ 转移/ 时间/ ./ 定义/ 4/ 种/ 状态/ :/ Si/ =/ 0/ |/ i/ =/ 1/ ,/ 2/ ,/ 3/ ,/ 4/ ,/ 并用/ 二元/ 组/ (/ S/ ,/ R/ )/ 表示/ ,/ 其中/ (/ 0/ ,/ 1/ )/ 系统/ 处于/ 高速率/ 服务/ 状态/ 下/ ,/ (/ 0/ ,/ 0/ )/ 系统/ 处于/ 低/ 速率/ 服务/ 状态/ 下/ ,/ (/ 1/ ,/ 0/ )/ 系统/ 处于/ 空闲/ 转移/ 状态/ ,/ 且/ 从/ 低/ 速率/ 转移/ 至/ 高速率/ ,/ (/ 1/ ,/ 1/ )/ 系统/ 处于/ 空闲/ 转移/ 状态/ ,/ 且/ 从/ 高速率/ 转移/ 至/ 低/ 速率/ ./ 在/ 二元/ 组中/ 加入/ 队列/ 长度/ 变量/ N/ ,/ 用/ (/ N/ ,/ S/ ,/ R/ )/ 根据/ 式/ (/ 18/ )/ 得到/ 系统/ 的/ 功耗/ 为/ 构造/ 马尔卡/ 夫链/ 如图/ 9/ 所示/ ./ 通过/ 稳态/ 分析/ 得到/ 不同/ 状态/ 的/ 稳态/ 概率/ Pr/ ,/ 再/ Page15Pcons/ =/ PL/ ∑/ NPS/ ∑/ N/ 其中/ PL/ ,/ PH/ ,/ PS/ 分别/ 表示/ 系统/ 处于/ 高速率/ 状态/ 、/ 低/ 速率/ 状态/ 和/ 状态/ 转移/ 时/ 的/ 功耗/ ./ 然后/ 计算/ 没有/ 采用/ 节能/ 策略/ 时/ 的/ 功耗/ PH/ ,/ 得到/ 节省/ 的/ 功耗/ Psave/ 为/ n/ =/ THL/ +/ 1/ 通过/ 以上/ 的/ 分析/ 可以/ 看出/ 马尔卡/ 夫/ 过程/ 模型/ 是/ 进行/ 节能/ 策略/ 分析/ 的/ 有力/ 模型/ 工具/ ,/ 但/ 存在/ 一些/ 问题/ ,/ 例如/ 在/ 双/ 阈值/ 策略/ 中/ 会/ 产生/ 状态/ 抖动/ 问题/ ,/ 对/ 性能/ 有/ 一定/ 的/ 影响/ ,/ 为了/ 减少/ 状态/ 抖动/ ,/ 文献/ [/ 29/ ]/ 采取/ 了/ 两种/ 方法/ ,/ 这/ 两种/ 方法/ 都/ 引入/ 了/ 时间/ 参数/ ,/ 但/ 马尔卡/ 夫/ 过程/ 模型/ 不能/ 引入/ 时间/ 参数/ ./ 而且/ 马尔卡/ 夫/ 过程/ 模型/ 可扩展性/ 差/ ,/ 一旦/ 实际/ 系统资源/ 变化/ ,/ 相应/ 的/ 模型/ 变化/ 就/ 会/ 比较/ 大/ ./ 所以/ 利用/ 马尔卡/ 夫/ 过程/ 模型/ 进行/ 分析/ 和/ 评价/ 有/ 一定/ 的/ 局限性/ ,/ 需要/ 多种/ 模型/ 相互/ 结合/ 才能/ 真实/ 完整/ 地/ 刻画/ 实际/ 系统/ ./ 4.3/ ./ 3/ 随机/ Petri/ 网/ 模型/ 基于/ 马尔卡/ 夫/ 过程/ 的/ 随机/ 模型/ 只能/ 为/ 一个/ 简单/ 的/ 能量/ 管理系统/ 提供/ 模型/ 分析/ ,/ 不能/ 有效/ 直观/ 地/ 反映/ 系统/ 各个/ 部件/ 之间/ 的/ 相互/ 关系/ ./ 对于/ 一个/ 复杂/ 的/ 系统/ 来说/ 其/ 本身/ 组件/ 数量/ 多/ ,/ 结构/ 关系/ 复杂/ ,/ 其/ 行为/ 也/ 错综复杂/ ,/ 想要/ 建立/ 马尔卡/ 夫/ 模型/ 是/ 一件/ 较/ 难/ 的/ 事情/ ./ 而且/ 基于/ 状态/ 的/ 随机/ 模型/ 直接/ 涉及/ 模型/ 状态/ ,/ 很难/ 从/ 实际/ 系统/ 的/ 行为/ 状态/ 中/ 获得/ ./ 而/ 基于/ 模型/ 的/ 高级/ 随机/ 模型/ 具有/ 较强/ 的/ 描述/ 能力/ ./ 目前/ 已有/ 多种/ 高级/ 随机/ 模型/ 方法/ 开始/ 应用/ 到/ 网络系统/ 能耗/ 的/ 评价/ 分析/ 中/ ,/ 例如/ 随机/ Petri/ 网/ 、/ 随机/ 高级/ Petri/ 网/ 、/ 随机/ 进程/ 代数/ 、/ 随机/ 活动/ 网等/ ./ 下面/ 我们/ 将/ 以/ 随机/ Petri/ 网为/ 重点/ ,/ 说明/ 高级/ 随机/ 模型/ 在/ 系统/ 节能/ 机制/ 和/ 能耗/ 评价/ 中/ 的/ 应用/ ./ 随机/ Petri/ 网/ (/ StochasticPetriNets/ ,/ SPN/ )/ 作为/ 网络系统/ 描述/ 和/ 建模/ 的/ 重要/ 数学/ 工具/ ,/ 能够/ 较/ 好/ 地/ 刻画/ 复杂/ 的/ 系统/ 行为/ ,/ 尤其/ 是/ 并发/ 、/ 同步/ 、/ 互斥/ 和/ 冲突/ 行为/ ./ 虽然/ 随机/ Petri/ 网/ 具有/ 马尔卡/ 夫性/ ,/ 可以/ 转换/ 为/ 等价/ 的/ 马尔卡/ 夫/ 模型/ 进行/ 分析/ ,/ 但/ 对于/ 一个/ 系统/ 设计者/ 来说/ ,/ 用/ 随机/ Petri/ 网比/ 直接/ 使用/ 马尔卡/ 夫/ 模型/ 更/ 容易/ 描述/ 系统/ 行为/ 特征/ ./ 随机/ Petri/ 网以/ 研究/ 模型/ 系统/ 的/ 组织/ 结构/ 和/ 动态/ 行为/ 为/ 目标/ ,/ 着眼于/ 系统/ 可能/ 发生/ 的/ 各种/ 状态/ 变化/ 以及/ 变化/ 之间/ 的/ 关系/ ./ 同时/ Petri/ 网是/ 动态/ 的/ 图形/ 工具/ ,/ 它/ 的/ 结构/ 元素/ 包括/ 位置/ 、/ 变迁/ 和/ 弧/ ./ 位置/ 用于/ 描述/ 可能/ 的/ 系统/ 局部/ 状态/ ,/ 例如/ 队列/ 、/ 缓冲/ 、/ 资源/ 等/ ./ 变迁/ 用于/ 描述/ 修改/ 系统/ 状态/ 的/ 事件/ ./ 弧/ 使用/ 两种/ 方法/ 描述/ 局部/ 状态/ 和/ 事件/ 之间/ 的/ 关系/ :/ 指出/ 时间/ 能够/ 发生/ 的/ 局部/ 状态/ ;/ 由/ 事件/ 所/ 引发/ 的/ 局部/ 状态/ 的/ 转换/ ./ 在/ 随机/ Petri/ 网/ 模型/ 中/ ,/ 标记/ 是/ 包含/ 在/ 位置/ 中/ 的/ 一种/ 标志/ ,/ 随着/ 事件/ 的/ 发生/ ,/ 标记/ 可以/ 在/ 不同/ 的/ 位置/ 中/ 按照/ 弧/ 的/ 方向/ 流动/ ,/ 从而/ 动态/ 描述/ 系统/ 的/ 不同/ 状态/ ./ 在/ 不断/ 的/ 研究/ 过程/ 中/ ,/ 随机/ Petri/ 网/ 得到/ 了/ 很大/ 的/ 发展/ 和/ 补充/ ,/ 例如/ 可简化/ 系统/ 状态/ 空间/ 的/ 广义/ 随机/ Petri/ 网/ (/ GSPN/ )/ ;/ 用户/ 报/ 形式/ 表达/ 系统/ 性能/ 测量/ 的/ 随即/ 回报/ 网/ (/ SRN/ )/ 以及/ 将/ 指数分布/ 的/ 变迁/ 实施/ 时间/ 变量/ 引入/ 到/ 高级/ Petri/ 网中/ 的/ 变迁/ 集中/ 的/ 随机/ 高级/ Petri/ 网/ (/ SHLPN/ )/ 等/ ./ 利用/ 随机/ Petri/ 网/ 的/ 有关/ 理论/ 对/ 绿色/ 网络系统/ 的/ 节能/ 问题/ 进行/ 建模/ ,/ 并/ 通过/ 随机/ Petri/ 网/ 与/ 马尔卡/ 夫/ 过程/ 同构/ 的/ 特性/ ,/ 可以/ 求解/ 绿色/ 网络/ 模型/ 的/ 节能/ 参数/ ./ 应用/ 随机/ Petri/ 网/ 进行/ 绿色/ 评价/ ,/ 可以/ 按照/ 以下/ 步骤/ 进行/ :/ 1/ ./ 针对/ 特定/ 绿色/ 网络系统/ 建立/ 描述/ 系统/ 性能/ 的/ SPN/ 模型/ ;/ 2/ ./ 建立/ 系统/ 的/ 能耗/ SPN/ 模型/ ,/ 它/ 描述/ 资源/ 状态/ 的/ 变化/ 过程/ ./ 将/ 前面/ 性能/ 模型/ 中/ 表示/ 资源/ 的/ 相应/ 位置/ 扩充/ 至/ 不同/ 的/ 能耗/ 状态/ ,/ 并/ 添加/ 相应/ 的/ 变迁/ 和/ 相应/ 的/ 实施/ 规则/ 以及/ 能耗/ 成本/ ./ 其中/ 能耗/ 状态/ 转移/ 成本/ 与/ 标识/ 的/ 变迁/ 相关联/ ,/ 不同/ 的/ 服务/ 速率/ 能耗/ 成本/ 与/ 不同/ 的/ 标识/ 相关联/ ./ 3/ ./ 简化/ SPN/ 模型/ 结构/ ,/ 求出/ 可达/ 图及/ 相应/ 的/ 马尔卡/ 夫链/ ;/ 标/ 和/ 性能指标/ ./ 4/ ./ 计算/ 各/ 状态/ 瞬态/ 和/ 稳态/ 概率/ ,/ 从而/ 求/ 出/ 各种/ 能耗/ 指/ 基于/ 我们/ 之前/ 关于/ 无线/ 传感器/ 网络/ 的/ 睡眠/ 调度/ 机制/ 的/ 研究/ [/ 12/ ]/ 为例/ ,/ 具体/ 说明/ 随机/ Petri/ 网在/ 绿色/ 评价/ 中/ 的/ 应用/ ./ 根据/ 传感器/ 睡眠/ 深度/ 的/ 不同/ ,/ 我们/ 将/ 节点/ 分成/ 4/ 种/ 状态/ ,/ 如表/ 3/ 所示/ ./ 状态/ CPU/ 状态/ 传感/ 元件/ 状态/ 接收器/ 状态/ S1S2S3S4/ 根据/ 表/ 3/ 中/ 的/ 4/ 种/ 状态/ ,/ 可以/ 将/ 无线/ 传感器/ 的/ 睡眠/ 调度/ 策略/ 对应/ 分成/ 4/ 种/ ,/ 即/ 全部/ 活跃/ 调度/ 策略/ (/ ACAA/ )/ 、/ 传感/ 元件/ 和/ 接收器/ 保持/ 活跃/ 调度/ 策略/ (/ SRAA/ )/ 、/ 传感/ 元件/ 保持/ 活跃/ 调度/ 策略/ (/ SAA/ )/ 、/ 无/ 保持/ 活跃/ 调度/ 策略/ (/ NCAA/ )/ ,/ 每/ 一种/ 策略/ 的/ 睡眠/ 深度/ 逐渐/ 递增/ ./ Page16/ 对于/ 任意/ 一个/ 传感器/ 节点/ ,/ 我们/ 假设/ 节点/ 会/ 遇到/ 两类/ 事件/ :/ TE/ 事件/ (/ 其它/ 节点/ 试图/ 与/ 该/ 节点/ 通信/ )/ 和/ HE/ 事件/ (/ 该/ 节点/ 感知/ 到/ 外部/ 事件/ )/ 首先/ 我们/ 使用/ SPN/ 对/ 上述/ 4/ 种/ 睡眠/ 调度/ 策略/ 进行/ 建模/ ,/ 根据/ 所得/ 的/ 模型/ 分析/ 系统/ 的/ 能耗/ 和/ 性能/ ./ 由于/ 篇幅/ 的/ 限制/ ,/ 我们/ 只/ 给出/ ACAA/ 策略/ 和/ NCAA/ 策略/ 的/ SPN/ 模型/ ./ 对于/ ACAA/ 策略/ ,/ 传感器/ 节点/ 的/ 所有/ 部件/ 一直/ 都/ 处于/ 活跃/ 状态/ ,/ 所以/ 节点/ 一直/ 保持/ 在/ 状态/ S0/ ,/ 该/ 策略/ 下/ 事件/ 几乎/ 没有/ 延迟/ ,/ 但/ 消耗/ 的/ 能量/ 最多/ ./ ACAA/ 的/ SPN/ 模型/ 如图/ 10/ 所示/ ./ 对于/ NCAA/ 策略/ ,/ 节点/ 的/ 每个/ 部件/ 并/ 没有/ 一直/ 活跃/ 着/ ,/ 而是/ 大部分/ 时间/ 处于/ 休眠状态/ ./ 当/ 节点/ 处于/ 休眠/ 时期/ 时/ ,/ 它/ 不会/ 监测/ 任何/ SE/ 事件/ 或/ TE/ 事件/ ,/ 直到/ 休眠期/ 结束/ ./ 该/ 策略/ 下/ 事件/ 延迟/ 最大/ ,/ 但/ 消耗/ 的/ 能量/ 最少/ ./ NCAA/ 的/ SPN/ 模型/ 如图/ 11/ 所示/ ./ 在/ 上述/ 两个/ SPN/ 模型/ 中/ ,/ 我们/ 使用/ 位置/ 来/ 表示/ 传感器/ 节点/ 的/ 状态/ ,/ 使用/ 变迁/ 来/ 描述/ 事件/ 的/ 到达/ 或/ 节点/ 的/ 处理/ 措施/ ./ 模型/ 中/ 的/ 位置/ 、/ 变迁/ 的/ 具体/ 解释/ 如表/ 4/ 所示/ ./ 位置/ // 变迁/ S0/ ~/ S3PoNTE/ // PoNSETE/ // SE/ 事件/ 没/ 发生/ 的/ 状态/ TTE/ // TSEPoTE/ // PoSETE/ // SE/ 事件/ 等待/ 处理/ 的/ 状态/ THTE/ // THSETE/ // SE/ 事件/ 的/ 处理事件/ 服从/ 指数分布/ Po1T5/ ,/ T6/ ,/ T7TSL/ // TSL2TSW1/ ,/ TSW2/ ,/ TSW3Po0T2/ ,/ T3/ ,/ T4/ 在/ 图/ 11/ 中/ 的/ SPN/ 模型/ 中/ ,/ 我们/ 在/ 变迁/ T3/ 处/ 使用/ 了/ 抑制/ 弧/ [/ 52/ ]/ ./ 抑制/ 弧/ 虽然/ 不能/ 提高/ SPN/ 的/ 模型/ 能力/ ,/ 但/ 它/ 可/ 通过/ 减少/ 定义/ 的/ 位置/ 和/ 变迁/ 的/ 个数/ 来/ 简化/ 系统/ 运行/ 的/ 描述/ ./ 根据/ SPN/ 模型/ ,/ 我们/ 可以/ 分析/ 得到/ 可达图/ 和/ 等价/ 的/ 连续/ 时间/ 马尔卡/ 夫链/ ,/ 通过/ 求解/ 得到/ 平均/ 功耗/ ./ 首先/ 计算/ 稳态/ 下/ 不同/ 状态/ Si/ 的/ Token/ 期望值/ :/ 其中/ Mj/ (/ Si/ )/ 表示/ 在/ 标识/ Mj/ 下/ Si/ 状态/ 下/ 的/ Token/ 数量/ ./ 在/ 图/ 10/ 中/ ,/ 由于/ 节点/ 一直/ 处于/ S0/ 位置/ ,/ 所以/ 稳态/ 下/ TK/ {/ S0/ }/ =/ 1/ ;/ 在/ 图/ 11/ 中/ ,/ 由于/ 位置/ Po0/ 和/ Po1/ 都/ 关联/ 着/ 瞬时/ 变迁/ ,/ 所以/ TK/ {/ S0/ }/ +/ TK/ {/ S1/ }/ +/ TK/ {/ S2/ }/ +/ TK/ {/ S3/ }/ =/ 1/ ./ 因此/ ,/ 稳态/ 下/ TK/ {/ Si/ }/ 的/ 值/ 恰/ 等于/ 节点/ 处于/ 不同/ 状态/ Si/ 下/ 的/ 概率/ ./ 根据/ 2.2/ 节/ 关于/ 系统资源/ 与/ 能耗/ 的/ 关系/ ,/ 得出/ 不同/ 状态/ Si/ 下/ 的/ 功耗/ Pi/ 以及/ 状态/ Si/ 转移/ 到/ Sj/ 的/ 转移/ 功耗/ Pij/ ./ 针对/ 任意/ 一种/ 调度/ 策略/ ,/ 根据/ 式/ (/ 18/ )/ 可/ 求解/ 平均/ 功耗/ 为/ P/ =/ ∑/ i/ ∈/ {/ sleepschedulingscheme/ }/ Pi/ ×/ TK/ {/ Si/ }/ +/ ∑/ j/ ∈/ Di4/ ./ 4/ 绿色/ 网络/ 中/ 优化/ 算法/ 设计/ 现有/ 的/ 节能/ 策略/ 的/ 设计/ 往往/ 采用/ 启发式/ 算法/ ,/ 没有/ 严格/ 的/ 理论/ 支持/ ,/ 导致/ 在/ 实施/ 之后/ 进行/ 补丁/ 式/ 的/ 改进/ ./ 而/ 优化/ 方法/ [/ 53/ ]/ 为/ 设计/ 绿色/ 网络/ 和/ 节能/ 策略/ Page17/ 提供/ 了/ 有力/ 的/ 理论/ 支持/ ,/ 以/ 优化/ 理论/ 为/ 出发点/ 对/ 网络系统/ 进行/ 建模/ 分析/ ,/ 可以/ 指导/ 节能/ 策略/ 的/ 设计/ ,/ 使/ 网络/ 尽可能/ 具有/ 性能/ 和/ 能耗/ 的/ 最优/ 权衡/ ./ 在/ 应用/ 优化/ 理论指导/ 节能/ 策略/ 的/ 设计/ 时/ ,/ 首先/ 在/ 模型/ 方法/ 的/ 基础/ 上/ 深入分析/ 这些/ 系统/ 模型/ 中/ 所有/ 的/ 参数/ 和/ 变量/ ,/ 得到/ 策略/ 设计/ 目标/ 和/ 约束/ 与/ 优化/ 模型/ 的/ 对应/ 关系/ ,/ 而且/ 可以/ 将/ 节能/ 策略/ 中/ 的/ 能耗/ 问题/ 映射/ 到/ 一些/ 经典/ 的/ 数学/ 问题/ 或/ 优化/ 问题/ ,/ 如多物/ 网络/ 流/ 问题/ 、/ 背包/ 问题/ 等/ ./ 然后/ 对/ 该/ 问题/ 进行/ 形式化/ 的/ 描述/ 并/ 建立/ 详细/ 的/ 数学模型/ ,/ 最后/ 针对/ 模型/ 进行/ 求解/ ,/ 给出/ 评价/ 指标/ 和/ 复杂性/ 分析/ ./ 在/ 进行/ 形式化/ 描述/ 时/ ,/ 可以/ 按照/ 目标/ 的/ 数量/ 将/ 其/ 分成/ 单/ 目标/ 优化/ 和/ 多/ 目标/ 优化/ 两类/ ,/ 单/ 目标/ 优化/ 是/ 对/ 某/ 一/ 指标/ 而言/ ,/ 将/ 其它/ 的/ 属性/ 作为/ 限制/ ./ 如果/ 考虑/ 的/ 指标/ 有/ 多个/ ,/ 就/ 需要/ 用/ 多/ 目标/ 优化/ ./ 单/ 目标/ 优化/ 和/ 多/ 目标/ 优化/ 可以/ 相互/ 转化/ ,/ 多/ 目标/ 通常/ 利用/ 加权/ 归一/ 或/ 添加/ 约束/ 的/ 方法/ 转化/ 为/ 单一/ 目标/ ,/ 而/ 带/ 约束/ 的/ 单/ 目标/ 优化/ 也/ 可/ 利用/ 惩罚/ 函数/ ,/ 转换/ 为/ 多/ 目标/ 的/ 加权/ 形式/ ./ 在/ 明确/ 知道/ 系统/ 性能/ 和/ QoS/ 约束/ 的/ 情况/ 下/ ,/ 可以/ 采用/ 单/ 目标/ 优化/ ,/ 将/ 最小/ 能耗/ 作为/ 目标/ ,/ 性能/ 或/ QoS/ 等/ 条件/ 作为/ 约束条件/ ,/ 从而/ 得到/ 在/ 可容忍/ 的/ 性能/ 损失/ 下/ 的/ 能耗/ 优化/ 问题/ ./ 文献/ [/ 7/ ]/ 将/ 速率/ 缩放/ 机制/ 应用/ 到/ 连续流/ 到达/ 网络系统/ 的/ 优化/ 算法/ 表示/ 为/ 整数/ 线性规划/ 问题/ ./ 定义/ 需求/ 为/ i/ (/ 大小/ 为/ di/ )/ ,/ 其/ 沿单/ 路径/ 由/ si/ 至/ ti/ ,/ 能耗/ 函数/ 为/ f/ (/ s/ )/ ,/ 目标/ 为/ 满足/ 需求/ i/ 时使/ 链路/ 能耗/ 最小/ ,/ 即/ 寻找/ 满足/ 需求/ i/ 的/ 路径/ ,/ 使/ ∑/ ei/ 在/ 链路/ e/ 上/ 的/ 流量/ ,/ 根据/ 式/ (/ 20/ )/ 用/ 形式化/ 描述/ 为/ 在/ 不/ 明确/ 系统/ 性能/ 或/ QoS/ 约束/ 的/ 情况/ 下/ ,/ 可以/ 采用/ 多/ 目标/ 优化/ ,/ 在/ 目标/ 函数/ 中/ 加入/ 加权/ 权衡/ 因子/ ,/ 权衡/ 性能/ 和/ 能耗/ 之间/ 的/ 关系/ ,/ 如/ 文献/ [/ 44/ ]/ 的/ 目标/ 形式/ 为/ 其中/ fe/ (/ x/ )/ 为/ 能耗/ 函数/ ,/ fp/ (/ x/ )/ 为/ 性能/ 函数/ ,/ β/ 为/ 权衡/ 因子/ ,/ 使该/ 算法/ 具备/ 了/ 调节/ 能耗/ // 性能/ 的/ 能力/ ./ 节能/ 策略/ 中/ 很多/ 优化/ 问题/ 是/ NP/ -/ 难/ 问题/ ,/ 在/ 多项式/ 时间/ 内/ 收敛/ 的/ 优化/ 算法/ 目前/ 不/ 存在/ ,/ 解决/ 此类/ 问题/ 一般/ 可以/ 分为/ 两个/ 步骤/ :/ 规约/ 和/ 近似/ ./ 规约/ 是/ 为了/ 证明/ 该/ 问题/ 是/ NP/ -/ 难/ 问题/ ,/ 如果/ 能够/ 证明/ 一个/ NPC/ 问题/ 能够/ 在/ 多项式/ 时间/ 内/ 规约/ 为/ 一个/ 给定/ 问题/ ,/ 则/ 给定/ 问题/ 即为/ NP/ -/ 难/ 问题/ ./ 文献/ [/ 54/ ]/ 中/ 证明/ 了/ 数据中心/ 网络/ 的/ 最小/ 能耗/ 调度/ 问题/ 是/ NP/ -/ 难/ 问题/ ,/ 这/ 类/ 问题/ 是/ 典型/ 的/ 资源/ 受限/ 问题/ ,/ 可以/ 由/ 0/ -/ 1/ 背包/ 问题/ 规约/ ,/ 且/ 规约/ 过程/ 在/ 多项式/ 时间/ 内/ 完成/ ./ 要/ 在/ 有限/ 的/ 时间/ 内/ 实施/ 优化/ 算法/ ,/ 通常/ 采用/ 近似算法/ 、/ 贪婪/ 算法/ 、/ 原/ -/ 对偶/ 方法/ 、/ 随机/ 方法/ 和/ 智能算法/ 等/ 常用/ 的/ 近似算法/ ./ 文献/ [/ 7/ ]/ 中/ 的/ 路由/ 最小/ 能耗/ 问题/ 可以/ 转换/ 为/ 一个/ 整数/ 规划/ 的/ 优化/ 问题/ ,/ 并且/ 如果/ 能耗/ 函数/ f/ (/ s/ )/ 是/ 随着/ 传输速度/ s/ 次/ 可加/ 的/ ,/ 那么/ 路由/ 最小/ 能耗/ 问题/ 就/ 可以/ 转化/ 为/ buy/ -/ at/ -/ bulk/ 网络/ 设计/ 问题/ ./ 文中/ 给出/ 了/ 可以/ 获得/ 近似/ 度为/ O/ (/ logN/ )/ 2/ 的/ 复杂度/ 上界/ 为/ Ω/ (/ log1/ // 4N/ )/ 的/ 随机/ 近似算法/ ./ 文献/ [/ 55/ ]/ 将/ 数据中心/ 的/ 调度/ 问题/ 转化/ 为/ 线性规划/ 问题/ ,/ 并用/ 快速/ 多项式/ 时间/ 算法/ 进行/ 求解/ ,/ 得到/ 在/ 有/ N/ 个/ 请求/ 源/ 和/ C/ +/ 1/ 个/ 服务器时/ ,/ 算法/ 的/ 最坏/ 情况/ 的/ 时间/ 复杂度/ 为/ O/ (/ N/ (/ C/ +/ 1/ )/ 2/ (/ logN/ +/ (/ C/ +/ 1/ )/ log/ (/ C/ +/ 1/ )/ )/ )/ ./ 智能/ 方法/ 中/ 的/ 启发式/ 算法/ 是/ 近似/ 求解/ 中/ 一种/ 常用/ 的/ 方法/ ./ 文献/ [/ 54/ ]/ 中将/ 数据中心/ 网络/ 的/ 调度/ 问题/ 转换/ 为/ 等价/ 的/ 0/ -/ 1/ 背包/ 问题/ ,/ 在/ 进行/ 近似/ 求解/ 时/ 采用/ 了/ 启发式/ 路由/ 算法/ ,/ 算法/ 的/ 输入/ 为/ 三元组/ (/ G0/ ,/ 犜/ ,/ PR/ )/ ,/ G0/ 表示/ 数据中心/ 网络/ 的/ 拓扑/ ,/ 犜/ 表示/ 负载/ 的/ 流量/ 矩阵/ ,/ PR/ 表示/ 性能/ 阈值/ ./ 算法/ 分为/ 3/ 个/ 部分/ ,/ 路由/ 生成/ (/ RG/ )/ 、/ 吞吐/ 率/ 计算/ (/ TC/ )/ 和/ 节点/ 消除/ (/ SE/ )/ ./ RG/ 的/ 功能/ 是/ 选择/ 数据流/ 的/ 路由/ 使得/ 整个/ 网络/ 的/ 吞吐量/ 最大/ ./ TC/ 用来/ 计算/ 现有/ 网络拓扑/ 下/ 的/ 系统/ 吞吐量/ ,/ 应用/ Max/ -/ MinFairness/ 模型/ 对/ 所有/ 流/ 的/ 吞吐量/ 进行/ 求和/ ./ SE/ 选择/ 路由/ 中/ 可以/ 删除/ 的/ 节点/ ./ 在/ 应用/ 优化/ 算法/ 进行/ 节能/ 策略/ 的/ 设计/ 时应/ 注意/ 一些/ 问题/ ,/ 例如/ 如何/ 准确/ 将/ 具体/ 问题/ 进行/ 建模/ 描述/ 的/ 问题/ ,/ 因为/ 实际/ 的/ 节能/ 策略/ 不能/ “/ 完美/ ”/ 地/ 映射/ 到/ 数学/ 上/ 的/ 经典/ 问题/ ,/ 往往/ 需要/ 假设/ ,/ 所以/ 在/ 建模/ 过程/ 中/ 需要/ 考虑/ 模型/ 是否/ 能/ 真实/ 地/ 反映/ 实际/ 系统/ ,/ 这样/ 模型/ 分析/ 得到/ 的/ 结果/ 才能/ 有/ 实际/ 的/ 价值/ ./ 文献/ [/ 56/ ]/ 通过/ 云/ 计算/ 中/ 的/ 多种/ 资源/ 融合/ 实现/ 资源/ 的/ 最小化/ 分配/ ,/ 其/ 将/ 资源分配/ 问题/ 映射/ 成/ 多维度/ 装箱/ 问题/ 求解/ ,/ 服务器/ 映射/ 成/ 箱子/ ,/ 处理器/ 、/ 硬盘/ 和/ 网络/ 等/ 资源/ 是/ 箱子/ 的/ 各种/ 维度/ ,/ 而/ 各个/ 维度/ 的/ 大小/ 用/ 能耗/ 利用率/ 来/ 表示/ ,/ 每/ 一个/ 给定/ 资源/ 利用率/ 的/ 寄宿/ 程序/ 被/ 看作/ 已知/ 各个/ 维度/ 大小/ 的/ 物体/ 被/ 放入/ 箱子/ ,/ 最小化/ 能耗/ 问题/ 转换/ 为/ 最小化/ 箱子/ 的/ 数量/ ./ 但是/ 和/ 一般/ 的/ 装箱/ 问题/ 不同/ ,/ 其/ 需要/ 考虑/ 以下/ 两个/ 因素/ 的/ 影响/ ,/ 首先/ 性能/ 没有/ 作为/ 物体/ 的/ 一个/ 维度/ 考虑/ ,/ 当/ 两个/ 物体/ 包装/ 在/ Page18/ 一起/ 时/ ,/ 它们/ 的/ 性能/ (/ 如/ 吞吐/ 率/ )/ 会/ 受到/ 影响/ ,/ 而/ 性能/ 的/ 降低/ 带来/ 无用/ 能耗/ 的/ 增长/ ,/ 所以/ 最小化/ 箱子/ 的/ 数量/ 未必/ 能/ 最小化/ 能耗/ ./ 其次/ 在/ 一般/ 的/ 装箱/ 问题/ 中/ ,/ 假设/ 最优/ 箱子/ 的/ 数量/ 是/ n/ ,/ 那么/ 在/ 填满/ n/ -/ 1/ 个/ 箱子/ 后/ ,/ 将/ 一个/ 尺寸/ 较/ 小/ 的/ 物体/ 放入/ 第/ n/ 个/ 箱子/ 是/ 最优/ 算法/ ,/ 但是/ 在/ 实际/ 的/ 问题/ 中/ ,/ 不同/ 的/ 箱子/ 分配/ 方法/ 对/ 能耗/ 的/ 影响/ 不同/ ,/ 所以/ 在/ 应用/ 优化/ 算法/ 时应/ 紧密联系/ 实际/ ,/ 在/ 客观/ 地/ 反映/ 实际/ 问题/ 的/ 同时/ 能够/ 对/ 实际/ 应用/ 起到/ 指导作用/ ,/ 产生/ 真正/ 的/ 价值/ ./ 5/ 总结/ 本文/ 综述/ 了/ 绿色/ 网络/ 中/ 的/ 节能/ 机制/ 和/ 策略/ ,/ 并/ 将/ 节能/ 问题/ 归结为/ 资源管理/ 问题/ ,/ 从/ 资源分配/ 、/ 任务调度/ 、/ 架构/ 部署/ 3/ 个/ 方面/ 进行/ 阐述/ ./ 随机/ 模型/ 能够/ 较/ 好/ 地/ 刻画/ 和/ 描述/ 不同/ 的/ 节能/ 机制/ 和/ 策略/ ,/ 是/ 构建/ 和/ 评价/ 绿色/ 网络/ 的/ 重要/ 理论/ 工具/ ./ 不同/ 的/ 模型/ 评价/ 方法/ 一方面/ 能够/ 准确/ 地/ 表达/ 系统/ 各个/ 参数/ 之间/ 的/ 关系/ ,/ 对/ 节能/ 机制/ 和/ 策略/ 进行/ 定量/ 的/ 分析/ 和/ 数值/ 计算/ ,/ 另一方面/ 能够/ 为/ 系统优化/ 提供/ 依据/ ,/ 使/ 系统/ 从/ 设计/ 到/ 改进/ 都/ 有章可循/ ./ 基于/ 随机/ 模型/ ,/ 本文/ 提出/ 了/ 绿色/ 评价/ 框架/ ,/ 为/ 构建/ 节能/ 机制/ 和/ 策略/ 的/ 评价/ 体系/ 奠定/ 了/ 基础/ ./ 在/ 模型/ 分析/ 的/ 基础/ 上/ ,/ 本文/ 结合/ 优化/ 方法/ 对/ 节能/ 机制/ 和/ 策略/ 中/ 的/ 一些/ 问题/ 进行/ 抽象/ 和/ 形式化/ 描述/ ,/ 将/ 其/ 转换/ 为/ 一些/ 基本/ 的/ 优化/ 问题/ 进行/ 求解/ ,/ 力图/ 找到/ 能耗/ 和/ 性能/ 的/ 最优/ 权衡/ ./ 进一步/ 解决/ :/ 绿色/ 网络/ 和/ 绿色/ 评价/ 目前/ 还/ 存在/ 很多/ 问题/ 需要/ (/ 1/ )/ 节能/ 策略/ 的/ 多/ 目标/ 问题/ ./ 网络/ 节能/ 技术/ 的/ 研究/ 需要/ 结合/ 具体/ 应用/ 背景/ 和/ 实际/ 需求/ ,/ 通过/ 研究/ 系统/ 可用性/ 、/ 可靠性/ 、/ 可/ 生存性/ 等/ 系统/ 属性/ 与/ 能耗/ 之间/ 的/ 关系/ ,/ 使/ 系统/ 各种/ 目标/ 之间/ 相互/ 融合/ ,/ 统一/ 表达/ ./ (/ 2/ )/ 节能/ 策略/ 的/ 部署/ 问题/ ./ 策略/ 复杂度/ 高/ 会/ 带来/ 实现/ 成本/ 高/ 、/ 不易/ 部署/ 的/ 问题/ ;/ 而/ 策略/ 简单/ ,/ 成本低/ ,/ 部署/ 容易/ ,/ 但/ 鲁棒性/ 会/ 有所/ 降低/ ,/ 所以/ 在/ 策略/ 设计/ 时应/ 根据/ 上下文/ 分析/ 各个/ 因素/ ,/ 找到/ 最优/ 的/ 权衡/ ./ (/ 3/ )/ 模型/ 描述/ 的/ 精确性/ ./ 在/ 对/ 策略/ 进行/ 建模/ 时/ 往往/ 忽略/ 某些/ 因素/ (/ 如/ 状态/ 转移/ 成本/ )/ ,/ 不能/ 精确/ 地/ 反映/ 系统/ 状态/ ./ 而且/ 不同/ 的/ 模型/ 方法/ 各有利弊/ ,/ 应/ 针对/ 具体/ 问题/ 选择/ 某/ 一种/ 模型/ 方法/ 或者/ 几种/ 模型/ 方法/ 的/ 结合/ ./ (/ 4/ )/ 网络/ 能耗/ 优化/ 问题/ ./ 目前/ 能耗/ 优化/ 问题/ 的/ 求解/ 上/ 多数/ 采用/ 启发式/ 算法/ ,/ 还/ 存在/ 很大/ 的/ 改进/ 空间/ ,/ 而且/ 网络/ 优化/ 理论/ 本身/ 存在/ 很多/ 难点/ ,/ 例如/ 基于/ 状态/ 的/ 动态/ 规划/ 状态/ 空间/ 的/ 化简/ 等/ ,/ 尚待/ 解决/ ./ 

