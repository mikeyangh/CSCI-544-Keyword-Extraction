Page1/ 基于/ 排队/ Petri/ 网/ 的/ 服务/ 系统/ 性能/ 建模/ 与/ 分析方法/ 顾军/ 1/ )/ ,/ 2/ )/ 罗军舟/ 1/ )/ 曹玖新/ 1/ )/ 李伟/ 1/ )/ 1/ )/ (/ 东南大学/ 计算机科学/ 与/ 工程学院/ 南京/ 211189/ )/ 2/ )/ (/ 中国矿业大学/ 计算机科学/ 与/ 技术/ 学院/ 江苏/ 徐州/ 221116/ )/ 摘要/ 如何/ 有效/ 评估/ 服务/ 系统/ 的/ 性能/ 表现/ 是/ 解决/ 服务/ 对/ 动态/ 网络/ 环境/ 适配/ 性/ 的/ 关键/ ./ 然而/ ,/ 基于/ 互联网/ 的/ 服务/ 系统/ 的/ 规模/ 尺度/ 和/ 复杂程度/ 不断/ 提高/ ,/ 使得/ 服务/ 系统/ 的/ 性能/ 建模/ 和/ 分析/ 越来越/ 困难/ ./ 通过/ 分析/ 服务/ 系统/ 的/ 执行/ 过程/ ,/ 提出/ 了/ 一种/ 基于/ 排队/ Petri/ 网/ 的/ 性能/ 建模/ 和/ 分析方法/ ./ 该/ 方法/ 将/ 服务/ 系统/ 运行/ 过程/ 分为/ 服务/ 准备/ 和/ 服务/ 提供/ 两个/ 阶段/ ./ 服务/ 准备/ 阶段/ 被/ 建模/ 为/ 多层/ Web/ 系统/ ,/ 刻画/ 了/ 浏览/ 、/ 选择/ 、/ 组合/ 和/ 注册/ 4/ 种/ 行为/ 的/ 性能/ 表现/ ./ 服务/ 提供/ 阶段/ 被/ 建模/ 为/ 组合/ 服务/ ,/ 重点/ 讨论/ 了/ 交互/ 关系/ 、/ 节点/ 失效/ 和/ 恢复/ 机制/ 对/ 组合/ 服务/ 执行/ 性能/ 的/ 影响/ ,/ 并/ 在/ 此基础/ 上/ 建立/ 组合/ 服务/ 在/ 集中/ 和/ 分散/ 两种/ 执行/ 方式/ 下/ 的/ 性能/ 模型/ ./ 最后/ ,/ 采用/ QPME/ 工具/ 仿真/ 和/ 比较/ 提出/ 的/ 模型/ 在/ 不同/ 配置/ 下/ 的/ 性能/ 表现/ ./ 结果表明/ ,/ 该/ 方法/ 在/ 定量/ 评估/ 服务/ 系统/ 性能/ 时/ 具有/ 一定/ 的/ 优越性/ ./ 关键词/ 排队/ Petri/ 网/ ;/ 服务/ 系统/ ;/ 组合/ 服务/ ;/ 性能/ ;/ 失效/ 1/ 引言/ 面向/ 服务/ 的/ 信息处理系统/ 以/ 服务/ 为/ 构造/ 单元/ ,/ 强调/ 软件/ 的/ 松/ 耦合/ 、/ 可/ 重用/ 、/ 易/ 组合/ 和/ 动态/ 优化/ [/ 1/ ]/ ,/ 能够/ 有效/ 解决/ 互联网/ 环境/ 下/ 的/ 数据/ 、/ 资源/ 和/ 系统集成/ 问题/ ./ 随着/ 面向/ 服务/ 应用/ 的/ 普及/ ,/ 服务/ 系统/ 开发/ 、/ 部署/ 、/ 运行/ 和/ 维护/ 的/ 网络/ 环境/ 逐渐/ 从/ 封闭/ 、/ 静态/ 、/ 可控/ 走向/ 开放/ 、/ 动态/ 、/ 难控/ ./ 网络/ 环境/ 的/ 动态性/ 和/ 不可/ 预知/ 性/ 要求/ 服务/ 系统/ 必须/ 能够/ 适应/ 及/ 处理/ 各种/ 变化/ ,/ 实现/ 和/ 增强/ 服务/ 对/ 环境/ 的/ 适配/ 能力/ ,/ 提升/ 信息/ 服务质量/ ,/ 即/ 解决/ 服务/ 对/ 环境/ 的/ 适配/ 性/ 问题/ ./ 为此/ ,/ 首先/ 必须/ 对/ 具有/ 动态变化/ 特性/ 的/ 服务/ 系统/ 的/ 运行/ 状态/ 进行/ 评估/ ,/ 通过/ 建立/ 服务/ 系统/ 的/ 性能/ 模型/ ,/ 预测/ 环境/ 变化/ 对/ 服务/ 系统/ 运行/ 性能/ 的/ 影响/ ,/ 判定/ 服务/ 对/ 环境/ 能否/ 适配/ ,/ 进而/ 开展/ 服务/ 适配/ 机制/ 和/ 方法/ 的/ 研究/ ,/ 增强/ 服务/ 的/ 适配/ 能力/ ./ 然而/ ,/ 面向/ 服务/ 的/ 系统/ 以/ 可/ 共享/ 与/ 可/ 集成/ 的/ 自治/ 网络资源/ 为/ 基础/ ,/ 往往/ 包括/ 众多/ 协同工作/ 的/ 服务器/ 或/ 设备/ ,/ 加上/ 用户/ 需求/ 的/ 多样性/ 和/ 不确定性/ ,/ 使得/ 服务/ 系统/ 不论/ 在/ 规模/ 尺度/ 还是/ 复杂程度/ 上/ 都/ 远远/ 超过/ 传统/ 的/ 软件系统/ ,/ 增加/ 了/ 系统/ 性能/ 建模/ 和/ 分析/ 的/ 难度/ [/ 2/ ]/ ./ 事实上/ ,/ 随着/ 面向/ 服务/ 应用/ 的/ 普及/ ,/ 服务/ 系统/ 的/ 边界/ 、/ 复杂性/ 瓶颈/ 和/ 非/ 功能性/ 要求/ 悄然/ 发生/ 了/ 质/ 的/ 变化/ ,/ 规模/ 的/ 扩大化/ 使得/ 直接/ 建模/ 变得/ 非常/ 困难/ ./ Dai/ 等/ 人/ [/ 3/ -/ 4/ ]/ 的/ 研究/ 表明/ 分析/ 网格/ 服务/ 的/ 性能/ 和/ 可靠性/ 比/ 针对/ 整个/ 网格/ 更/ 可行/ ,/ 也/ 更/ 有/ 实际意义/ ./ 我们/ 认为/ 服务/ 系统/ 的/ 性能/ 对外/ 表现/ 为/ 向/ 用户/ 提供/ 服务/ 的/ 能力/ ,/ 即/ 服务/ 的/ 执行/ 能力/ ./ 为了/ 更好/ 地/ 满足用户/ 的/ 需求/ ,/ 往往/ 选择/ 现有/ 的/ 一组/ 服务/ 按照/ 一定/ 的/ 业务/ 逻辑/ 以/ 组合/ 服务/ 的/ 形式/ 执行/ ,/ 而/ 每类/ 服务/ 使用/ 的/ 资源/ 规模/ 和/ 数量/ 都/ 是/ 有限/ 和/ 可/ 描述/ 的/ ./ 因此/ ,/ 只要/ 能够/ 从/ 服务/ 执行/ 过程/ 中/ 抽象/ 出/ 具有/ 共性/ 的/ 执行/ 模型/ ,/ 就/ 可以/ 完成/ 服务/ 性能/ 模型/ 的/ 建立/ 和/ 分析/ ,/ 并/ 进而/ 评估/ 整个/ 系统/ 的/ 性能/ ./ 此外/ ,/ 互联网/ 环境/ 下/ 的/ 服务/ 系统/ 中/ ,/ 资源/ 故障/ 和/ 组件/ 失效/ 的/ 情况/ 比较/ 普遍/ ./ 如果/ 不/ 考虑/ 系统/ 的/ 失效/ 行为/ ,/ 仅仅/ 从纯/ 性能/ 的/ 角度/ 去/ 分析/ 会/ 显得/ 过于/ 乐观/ ./ 因此/ ,/ 本文/ 将/ 通过/ 研究/ 失效/ 影响/ 下/ 的/ 服务/ 系统/ 执行/ 过程/ 和/ 性能/ 表现/ ,/ 探索/ 具有/ 通用性/ 的/ 服务/ 系统/ 性能/ 建模/ 和/ 分析方法/ ./ 为了/ 预测/ 各种/ 性能指标/ ,/ 排队/ 论/ 、/ 随机/ Petri/ 网/ 、/ 随机/ 进程/ 代数/ 等/ 方法/ 常/ 被/ 用作/ 形式化/ 建模/ 和/ 分析/ 工具/ ,/ 建立/ 反映/ 系统/ 行为/ 和/ 性质/ 的/ 数学模型/ [/ 5/ ]/ ./ 排队/ 论/ (/ queuingtheory/ )/ [/ 6/ ]/ ,/ 也/ 称/ 随机/ 服务/ 系统/ 理论/ ,/ 是/ 通过/ 对/ 服务/ 对象/ 到来/ 及/ 服务/ 时间/ 的/ 统计/ 研究/ ,/ 得出/ 这些/ 数量指标/ (/ 等待时间/ 、/ 排队/ 长度/ 、/ 忙期/ 长短/ 等/ )/ 的/ 统计/ 规律/ ,/ 然后/ 根据/ 这些/ 规律/ 来/ 改进/ 服务/ 系统/ 的/ 结构/ 或/ 重新/ 组织/ 被/ 服务/ 对象/ ,/ 使得/ 服务/ 系统/ 既/ 能/ 满足/ 服务/ 对象/ 的/ 需要/ ,/ 又/ 能/ 使/ 系统/ 的/ 费用/ 最/ 经济/ 或/ 某些/ 指标/ 最优/ ./ 随机/ Petri/ 网/ [/ 7/ ]/ 以/ 研究/ 模型/ 系统/ 的/ 组织/ 结构/ 和/ 动态/ 行为/ 为/ 目标/ ,/ 着眼于/ 系统/ 中/ 可能/ 发生/ 的/ 各种/ 状态/ 变化/ 以及/ 变化/ 之间/ 的/ 关系/ ./ Petri/ 网/ 作为/ 一种/ 图形化/ 建模/ 工具/ 和/ 一种/ 具有/ 丰富/ 数学/ 基础/ 的/ 形式化/ 模型/ ,/ 可以/ 广泛应用/ 于/ 描述/ 和/ 研究/ 并发/ 、/ 异步/ 和/ 分布式/ 特征/ 的/ 系统/ ./ 因此/ ,/ 随机/ Petri/ 网/ 非常适合/ 描述/ 松/ 耦合/ 的/ 分布式服务/ 系统/ ./ 排队/ Petri/ 网/ (/ QueueingPetriNets/ ,/ QPN/ )/ [/ 8/ ]/ 继承/ 和/ 发展/ 了/ 排队/ 网/ 模型/ 和/ 随机/ Petri/ 网/ 的/ 优点/ ,/ 既/ 能/ 定量/ 地/ 建模/ 资源/ 的/ 运行/ 性能/ ,/ 也/ 可以/ 刻画/ 多层/ 系统/ 之间/ 的/ 依赖/ 关系/ ./ Kounev/ 等/ 人/ [/ 9/ -/ 11/ ]/ 的/ 研究/ 工作/ 表明/ 排队/ Petri/ 网/ 具有/ 很强/ 的/ 定量/ 评价/ 能力/ 和/ 行为/ 描述/ 能力/ ,/ 能/ 很/ 好/ 地/ 对/ 分布式系统/ 和/ 网格/ 系统/ 进行/ 建模/ 和/ 模拟/ ,/ 可/ 用于/ 系统/ 的/ 性能/ 预测/ 、/ 能力/ 规划/ 和/ 在线/ 性能/ 管理/ ./ 因此/ ,/ 本文/ 将/ 在/ 排队/ Petri/ 网/ 的/ 系统/ 模型/ 框架/ 上/ 采用/ 图形化/ 的/ 方式/ 完成/ 服务/ 系统/ 的/ 性能/ 建模/ ./ 本文/ 第/ 2/ 节/ 分析/ 服务/ 系统/ 的/ 运行/ 过程/ ,/ 将/ 其/ 划分/ 为/ 服务/ 准备/ 和/ 服务/ 提供/ 两个/ 阶段/ ,/ 并/ 给出/ 组合/ 服务/ 的/ 集中/ 执行/ 和/ 分散/ 执行/ 两种/ 方式/ ;/ 第/ 3/ 节/ 给出/ 服务/ 系统/ 的/ 形式化/ 描述/ ,/ 设计/ 失效恢复/ 影响/ 下/ 服务器/ 节点/ 的/ QPN/ 模型/ ,/ 讨论/ 满足/ 时间/ 约束/ 和/ 自动化/ 要求/ 的/ 服务/ 交互/ 关系/ Petri/ 网/ 描述/ 方法/ ,/ 并/ 在/ 此基础/ 上/ 对/ 服务/ 准备/ 阶段/ 、/ 组合/ 服务/ 集中/ 执行/ 和/ 组合/ 服务/ 分散/ 执行/ 3/ 种/ 情况/ 下/ 的/ 性能/ 进行/ 建模/ ;/ 第/ 4/ 节/ 给出/ 仿真/ 实验/ 和/ 数据分析/ ;/ 第/ 5/ 节/ 介绍/ 相关/ 工作/ ;/ 最后/ ,/ 第/ 6/ 节/ 总结/ 全文/ 并/ 提出/ 下/ 一步/ 工作/ ./ 2/ 服务/ 系统/ 运行/ 过程/ 分析/ 服务/ 系统/ 本质/ 上/ 是/ 大量/ 服务/ 的/ 集合/ ,/ 每个/ 服务/ 都/ 驻留/ 在/ 一定/ 的/ 自治/ 软硬件/ 资源/ 上/ ,/ 通过/ 相关/ 协议/ 实现/ 服务/ 的/ 发布/ 、/ 交互/ 和/ 组合/ ,/ 并/ 协调/ 多个/ 服务提供者/ (/ providers/ )/ 的/ 行为/ ,/ 以便/ 为/ 消费者/ (/ consumers/ )/ 提供/ 增值/ 服务/ ./ 本文/ 在/ 面向/ 服务/ 架构/ (/ ServiceOrientedArchitecture/ ,/ SOA/ )/ [/ 1/ ]/ 的/ 基础/ 上/ 提出/ 服务/ 系统/ 的/ 一般性/ 运行/ 模式/ (/ 如图/ 1/ 所示/ )/ ,/ 可以/ 分为/ 服务/ 准备/ (/ servicepreparing/ )/ 和/ 服务/ 提供/ (/ serviceproviding/ )/ 两个/ 阶段/ ./ 在/ 服务/ 准备/ 阶段/ ,/ 服务/ 门户/ (/ serviceportal/ )/ 、/ Page3/ 服务/ 代理/ (/ ServiceBroker/ ,/ SB/ )/ [/ 12/ ]/ 和/ 服务/ 注册/ 库/ (/ serviceregistry/ )/ 共同完成/ 服务/ 请求/ 的/ 接纳/ 、/ 服务/ 的/ 选择/ 和/ 组合/ 、/ 服务/ 提供/ 方案/ 的/ 确定/ 、/ 服务/ 注册/ 信息/ 的/ 登记/ 和/ 更新/ 等/ ./ 为了/ 提高/ 处理/ 能力/ ,/ 常常/ 对/ 这些/ 功能/ 部件/ 的/ 软硬件/ 进行/ 冗余/ 处理/ ./ 在/ 服务/ 提供/ 阶段/ ,/ 服务/ 请求/ 将/ 按照/ 已/ 形成/ 的/ 组合/ 服务/ 方案/ ,/ 构建/ 服务/ 执行/ 环境/ (/ serviceexecutionenvironment/ )/ ,/ 完成/ 服务/ 的/ 调度/ 、/ 分配/ 、/ 绑定/ 和/ 执行/ ,/ 最后/ 将/ 服务/ 结果/ 反馈/ 给/ 消费者/ ./ 服务/ 准备/ 阶段/ 注册/ 的/ 服务/ 信息/ 、/ 确定/ 的/ 服务/ 方案/ 都/ 是/ 信息/ 服务/ 提供/ 阶段/ 得以/ 实施/ 的/ 前提/ 和/ 基础/ ,/ 而/ 服务/ 提供/ 阶段/ 的/ 实际/ 运行/ 效果/ 又/ 是/ 对/ 服务/ 准备/ 阶段/ 工作/ 成效/ 的/ 评测/ 与/ 验证/ ,/ 两者/ 组成/ 了/ 一个/ 完整/ 的/ 服务/ 系统/ ,/ 为/ 服务/ 消费者/ 和/ 服务提供者/ 提供/ 了/ 交互/ 的/ 平台/ ./ 服务/ 准备/ 阶段/ 的/ 服务/ 门户/ 、/ 服务/ 代理/ 和/ 服务/ 注册/ 库/ 等/ 部件/ 的/ 性能/ 会/ 影响/ 服务/ 消费者/ 和/ 服务提供者/ 的/ 访问/ 规模/ 、/ 对/ 请求/ 的/ 应答/ 时延/ 和/ 访问/ 成功率/ 等/ ;/ 而/ 服务/ 提供/ 阶段/ 的/ 执行/ 环境/ 由/ 分布/ 的/ 多个/ 服务提供者/ 的/ 运行/ 环境/ 组成/ ,/ 单个/ 服务/ 的/ 性能/ 以及/ 多个/ 服务/ 图/ 2/ 服务/ 准备/ 阶段/ 的/ 执行/ 图/ 在/ 服务/ 提供/ 阶段/ ,/ 单一/ 服务/ 或者/ 组合/ 服务/ 在/ 服务/ 代理/ 的/ 调度/ 下/ 开始/ 执行/ ./ 在/ 服务/ 执行/ 环境/ NE/ 中/ ,/ 子/ 服务/ Si/ 驻留/ 在/ 节点/ Nk/ 上/ 执行/ ./ 服务/ 与/ 节点/ 之间/ 可以/ 是/ 一对一/ 或者/ 多/ 对/ 一/ 的/ 关系/ ,/ 即/ 允许/ 一个/ 节点/ 运行/ 一个/ 或者/ 多个/ 子/ 服务/ ./ 在/ 应用/ 需求/ 驱动/ 下/ ,/ 服务/ 环境/ NE/ 中/ 的/ 部分/ 服务提供者/ 的/ 节点/ 和/ 服务/ 将/ 被/ 选/ 交互/ 后/ 的/ 综合性/ 能/ 对系统/ 性能/ 影响/ 很大/ ./ 服务/ 准备/ 阶段/ 和/ 服务/ 提供/ 阶段/ 以/ 服务/ 为/ 联系/ 纽带/ ,/ 形成/ 一种/ 松/ 耦合/ 的/ 结构/ ,/ 因此/ 本文/ 从/ 服务/ 准备/ 和/ 服务/ 提供/ 两个/ 阶段/ 对/ 服务/ 系统/ 进行/ 建模/ ./ 服务/ 准备/ 阶段/ 的/ 运行/ 过程/ 和/ 系统/ 所/ 能/ 提供/ 的/ 业务流程/ 种类/ 、/ 每/ 类/ 业务/ 包含/ 的/ 功能/ 数量/ 以及/ 消费者/ 的/ 行为/ 有关/ ./ 比如/ 系统/ 对外/ 提供/ n/ 项/ 业务/ {/ BP1/ ,/ BP2/ ,/ …/ ,/ BPn/ }/ ,/ 其中/ 业务/ BPi/ 包括/ mi/ 个/ 功能/ ./ 每个/ 功能/ 的/ 实现/ 都/ 可以/ 由/ 多个/ 候选/ 的/ 服务提供者/ (/ serviceproviders/ )/ 负责/ ,/ 因此/ 需要/ 在/ 服务/ 注册/ 库中/ 为/ 每个/ 功能/ 查找/ 符合/ 业务/ 功能/ 和/ 非/ 功能/ 要求/ 的/ 服务/ S/ ,/ 形成/ 具有/ 不同/ QoS/ 属性/ 的/ 组合/ 服务/ ,/ 并/ 从中/ 确定/ 最终/ 解决方案/ ./ 在/ 实际/ 执行/ 过程/ 中/ ,/ 系统/ 并不需要/ 为/ 每个/ 消费者/ 都/ 执行/ 服务/ 选择/ 和/ 组合/ ./ 此外/ ,/ 服务提供者/ 也/ 需要/ 访问/ 服务/ 准备/ 系统/ 进行/ 服务/ 信息/ 的/ 注册/ 和/ 更新/ ./ 因此/ ,/ 我们/ 将/ 系统/ 的/ 处理/ 行为/ 分为/ 4/ 类/ :/ (/ 1/ )/ 消费者/ 只是/ 一般性/ 的/ 浏览/ ,/ 并/ 不/ 提交/ 服务/ 请求/ ;/ (/ 2/ )/ 消费者/ 提交/ 服务/ 请求/ ,/ 从/ 系统/ 推荐/ 的/ 组合/ 服务/ 方案/ 中/ 选择/ 一个/ 去/ 执行/ ;/ (/ 3/ )/ 消费者/ 提交/ 服务/ 请求/ ,/ 启动/ 新/ 组合/ 服务/ 方案/ 的/ 生成/ ;/ (/ 4/ )/ 服务提供者/ 注册/ 或/ 更新/ 服务/ 信息/ ./ 每个/ 处理/ 行为/ 都/ 包括/ 若干个/ 操作/ ,/ 如图/ 2/ 所示/ ,/ nj/ 表示/ 某个/ 操作/ 的/ 执行/ 次数/ ./ 比如/ ,/ Browse/ 包括/ (/ n1/ +/ 4/ )/ 个/ 操作/ ,/ Select/ 包括/ (/ n2/ +/ 4/ )/ 个/ 操作/ ,/ Composite/ 包括/ (/ mi/ +/ 5/ )/ 个/ 操作/ ,/ Register/ 包括/ (/ n3/ +/ 4/ )/ 个/ 操作/ ./ 虚线/ 方框/ 的/ 操作/ 属于/ 服务/ 提供/ 阶段/ 的/ 处理/ 工作/ ./ 择/ ,/ 并/ 按/ 服务/ 组合/ 方案/ 形成/ 组合/ 服务/ 协同工作/ 以/ 满足用户/ 需求/ ./ 为此/ ,/ 本文/ 引入/ 服务/ 覆盖网/ (/ serviceoverlaynetwork/ )/ 的/ 概念/ 对/ 组合/ 服务/ 执行/ 环境/ 进行/ 描述/ ,/ 如图/ 3/ 所示/ ./ 服务/ 链路/ 表示/ 节点/ 之间/ 的/ 逻辑/ 通道/ ,/ 可以/ 是/ 由/ 多条/ 物理/ 链路/ 组成/ ./ Page4/ 图/ 3/ 组合/ 服务/ 执行/ 环境/ 多层次/ 、/ 具有/ 高/ 可扩展性/ 的/ 服务/ 组合/ 为/ 用户/ 和/ 提供商/ 提高/ 运行/ 效率/ 提供/ 了/ 极大/ 便利/ ./ 文献/ [/ 13/ ]/ 的/ 研究/ 表明/ ,/ 引起/ 系统/ 复杂/ 行为/ 的/ 主要/ 原因/ 不是/ 元件/ 的/ 数量/ 而是/ 元件/ 之间/ 的/ 交互/ ,/ 只要/ 能/ 保持/ 系统/ 元件/ 之间/ 交互/ 的/ 基本/ 性质/ ,/ 那么/ 即使/ 对系统/ 加以/ 简化/ ,/ 系统/ 的/ 基本/ 特性/ 也/ 不会/ 改变/ ./ 为此/ ,/ 本文/ 对/ 组合/ 服务/ 的/ 交互/ 关系/ 定义/ 如下/ ./ 定义/ 1/ ./ 顺序/ 关系/ (/ sequential/ )/ ./ 服务/ Si/ 执行/ 完毕/ 后/ ,/ Sj/ 才/ 开始/ 执行/ ,/ 记作/ Si/ >/ Sj/ ./ 定义/ 2/ ./ 重复/ 关系/ (/ iterative/ )/ ./ 服务/ Si/ 重复/ 执行/ k/ 次/ ,/ 记/ 作/ μ/ Si/ (/ k/ )/ ./ 定义/ 3/ ./ 并发/ 关系/ (/ parallel/ )/ ./ 服务/ Si/ 和/ Sj/ 相互/ 独立/ 执行/ ,/ 记作/ Si/ |/ Sj/ ./ 并发/ 后/ 又/ 有/ 合并/ 和/ 不/ 合并/ 两种/ 情况/ ./ 定义/ 4/ ./ 容错/ 关系/ (/ fault/ -/ tolerant/ )/ ./ 服务/ Si/ 和/ Sj/ 提供/ 相同/ 的/ 服务/ 应用/ ,/ 在/ 工作/ 服务/ 发生/ 失效/ 且/ 不可/ 恢复/ 时/ ,/ 可以/ 用/ 备份/ 服务/ 来/ 代替/ 而/ 使/ 应用/ 能够/ 维持/ 正常/ 工作/ ,/ 记作/ Si/ 定义/ 5/ ./ 条件/ 关系/ (/ conditional/ )/ ./ 前驱/ 服务/ 执行/ 完毕/ 后/ ,/ 按照/ 一定/ 的/ 条件/ 概率/ 选择/ Si/ 和/ Sj/ 中/ 的/ 一个/ 开始/ 执行/ ,/ 记作/ Si/ (/ p/ )/ +/ Sj/ (/ 1/ -/ p/ )/ ./ 假设/ 图/ 3/ 执行/ 环境/ 中有/ 服务/ 流程/ 如图/ 4/ 所示/ ./ S1/ ./ 1/ 称为/ (/ S2/ ./ 1/ +/ S3/ ./ 2/ )/ 的/ 前驱/ 服务/ ,/ (/ S2/ ./ 1/ +/ S3/ ./ 2/ )/ 称为/ S1/ ./ 1/ 的/ 后继/ 服务/ (/ 集/ )/ ./ 起始/ 服务/ S1/ ./ 1/ 执行/ 后/ 按照/ 一定/ 的/ 条件/ 选择/ S2/ ./ 1/ 和/ S3/ ./ 2/ 中/ 的/ 一个/ 来/ 执行/ ./ 其中/ ,/ S2/ ./ 1/ 被/ 前驱/ 服务/ (/ 集/ )/ 选中/ 执行/ 的/ 概率/ 为/ p/ ,/ S3/ ./ 2/ 被/ 选中/ 的/ 概率/ 为/ (/ 1/ -/ p/ )/ ./ 服务/ S4/ ./ 1/ 以/ 重复/ 方式/ 连续/ 执行/ k/ 次后/ 进入/ 容错/ 服务/ 集/ (/ S5/ ./ 1/ 后/ 各自/ 独立/ 执行/ ,/ 只要/ 有/ 一个/ 完成/ 就/ 可以/ 调用/ 后继/ 服务/ (/ 集/ )/ ./ 并发/ 执行/ 的/ S7/ ./ 1/ 和/ S8/ ./ 2/ 必须/ 先/ 合并/ 后/ 再/ 调用/ 后继/ 服务/ S1/ ./ 2/ ./ 因此/ ,/ 业务流程/ 可以/ 形式化/ 为/ “/ S1/ ./ 1/ >/ (/ S2/ ./ 1/ (/ p/ )/ +/ S3/ ./ 2/ (/ 1/ -/ p/ )/ )/ >/ μ/ S4/ ./ 1/ (/ k/ )/ >/ 组合/ 服务/ 的/ 执行/ 主要/ 有/ 两种/ 方式/ [/ 14/ -/ 15/ ]/ ./ 集中/ 执行/ (/ centralizedexecution/ )/ 方式/ 需要/ 控制中心/ 完成/ 所有/ 服务/ 的/ 调用/ 和/ 数据传输/ ,/ 服务/ 之间/ 不/ 直接/ 交互/ ,/ 实现/ 简单/ 但/ 存在/ 性能/ 瓶颈/ ,/ 只/ 适合/ 小规模/ 的/ 服务/ 系统/ ./ 分散/ 执行/ (/ decentralizedexecution/ )/ 方式/ 允许/ 服务/ 之间/ 按照/ 业务流程/ 需要/ 直接/ 交互/ 和/ 传输数据/ ,/ 有利于/ 减少/ 通信/ 成本/ 、/ 提高/ 组合/ 服务/ 的/ 吞吐量/ ,/ 适合/ 构建/ 大规模/ 的/ 服务/ 系统/ ./ 图/ 4/ 的/ 组合/ 服务/ 业务流程/ 示例/ 在/ 不同/ 执行/ 方式/ 下/ 的/ 结构/ 如图/ 5/ 所示/ ./ 3/ 服务/ 系统/ 的/ 性能/ 建模/ 3.1/ 服务/ 系统/ 的/ 形式化/ 描述/ 排队/ Petri/ 网/ (/ QPN/ )/ 结合/ 了/ 排队/ 网络/ 、/ 有色/ PetriPage5I/ +/ ,/ M0/ ,/ Q/ ,/ W/ )/ ,/ 其中/ p/ |/ P/ |/ )/ ;/ t/ |/ T/ |/ )/ ;/ 网/ (/ ColoredPetriNets/ ,/ CPNs/ )/ 、/ 随机/ Petri/ 网/ (/ Gen/ -/ eralizedStochasticPetriNets/ ,/ GSPNs/ )/ 的/ 功能/ 特性/ ./ 在/ 这里/ 我们/ 假定/ 读者/ 具有/ 随机/ Petri/ 网/ 、/ 排队/ 网络/ 和/ 系统/ 性能/ 评价/ 的/ 基本知识/ ./ 对此/ 不/ 熟悉/ 的/ 读者/ 可以/ 参阅/ 文献/ [/ 7/ ]/ ./ 下面/ 给出/ 排队/ Petri/ 网/ QPN/ 的/ 形式化/ 定义/ ,/ 其余/ 概念/ 见/ 文献/ [/ 8/ -/ 9/ ,/ 16/ ]/ ./ 定义/ 6/ ./ QPN/ 是/ 一个/ 8/ 元组/ (/ P/ ,/ T/ ,/ C/ ,/ I/ -/ ,/ ①/ P/ 是非/ 空/ 有限/ 库所/ (/ places/ )/ 集合/ (/ p1/ ,/ p2/ ,/ …/ ,/ ②/ T/ 是非/ 空/ 有限/ 变迁/ (/ transitions/ )/ 集合/ (/ t1/ ,/ t2/ ,/ …/ ,/ ③/ P/ ∩/ T/ =/ / ;/ ④/ C/ 为/ 颜色/ 函数/ ,/ C/ :/ P/ ∪/ T/ →/ ∑/ C/ 把/ 每个/ 库所/ p/ 都/ 映射/ 到/ 一个/ 颜色/ 集/ C/ (/ p/ )/ ,/ 把/ 每个/ 变迁/ t/ 都/ 映射/ 到/ 一个/ 颜色/ 集/ C/ (/ t/ )/ ,/ 也就是说/ p/ 和/ t/ 中/ 的/ 每个/ 托肯/ (/ token/ )/ 都/ 属于/ 颜色/ 类型/ ;/ ⑤/ I/ -/ ,/ I/ +/ 分别/ 是/ P/ ×/ T/ 上/ 的/ 后/ 向/ 和/ 前/ 向/ 关联/ 函数/ ,/ 使得/ 对/ 所有/ (/ p/ ,/ t/ )/ ∈/ P/ ×/ T/ 有/ I/ -/ ,/ (/ p/ ,/ t/ )/ ,/ I/ +/ ,/ (/ p/ ,/ t/ )/ :/ C/ (/ t/ )/ →/ C/ (/ p/ )/ MS/ ;/ ⑥/ M0/ 称为/ CPN/ 的/ 初始/ 标识/ ,/ 对于/ 所有/ p/ ∈/ P/ ⑦/ Q/ =/ (/ 珟/ Q1/ ,/ 珟/ Q2/ ,/ (/ q1/ ,/ q2/ ,/ …/ ,/ q/ |/ P/ |/ )/ )/ ,/ 其中/ 珟/ Q1/ / P/ 表示/ 时间/ 队列/ 库所/ ;/ 珟/ Q2/ / P/ 表示/ 瞬时/ 队列/ 库所/ ,/ 且/ 珟/ Q1/ ∩/ 珟/ Q2/ =/ / ;/ 如果/ 库所/ pi/ 是/ 队列/ 库所/ ,/ 那么/ qi/ 表示/ 具有/ C/ (/ pi/ )/ 中/ 所有/ 颜色/ 的/ 队列/ ;/ 如果/ 库所/ pi/ 是/ 普通/ 库所/ ,/ 那么/ qi/ 等价/ 于/ 关键字/ “/ null/ ”/ ./ ⑧/ W/ =/ (/ 珮/ W1/ ,/ 珮/ W2/ ,/ (/ w1/ ,/ w2/ ,/ …/ ,/ w/ |/ T/ |/ )/ )/ ,/ 其中/ 珮/ W1/ / T/ 表示/ 时间/ 变迁/ ;/ 珮/ W2/ / T/ 表示/ 瞬时/ 变迁/ ,/ 且/ T/ =/ 珮/ W1/ ∪/ 珮/ W2/ ,/ 珮/ W1/ ∩/ wi/ ∈/ [/ C/ (/ ti/ )/ / / 珮/ W2/ =/ / ;/ 有/ :/ 如果/ ti/ 是/ 时间/ 变迁/ ,/ 那么/ wi/ (/ c/ )/ 描述/ 了/ 与/ 颜色/ c/ 有关/ 的/ 变迁/ 触发/ 时延/ 的/ 概率分布/ 函数/ ;/ 如果/ ti/ 是/ 瞬时/ 变迁/ ,/ 那么/ wi/ (/ c/ )/ 描述/ 了/ 与/ 颜色/ c/ 有关/ 的/ 变迁/ 触发/ 频率/ 的/ 权值/ ./ 由此可见/ ,/ 排队/ Petri/ 网/ 模型/ 的/ 结构/ 元素/ 包括/ 队列/ 库所/ (/ queueingplace/ )/ 、/ 普通/ 库所/ (/ ordinaryplace/ )/ 、/ 时间/ 变迁/ (/ timedtransition/ )/ 、/ 瞬时/ 变迁/ (/ immediatetransition/ )/ 、/ 弧/ (/ arc/ )/ 和/ 颜色/ 托肯/ (/ colortoken/ )/ ./ 队列/ 库所/ 用于/ 描述/ 具有/ 随机/ 服务/ 特征/ 的/ 业务/ 处理/ 行为/ ,/ 包括/ 队列/ (/ queue/ )/ 和/ 贮存/ 库/ (/ depository/ )/ 两/ 部分/ ;/ 普都/ 有/ M0/ (/ p/ )/ ∈/ C/ (/ p/ )/ MS/ ./ 通库/ 所/ 用于/ 描述/ 可能/ 的/ 系统/ 局部/ 状态/ (/ 条件/ 或/ 状况/ )/ ;/ 时间/ 变迁/ 用于/ 描述/ 具有/ 时延/ 特征/ 的/ 改变/ 系统/ 状态/ 的/ 事件/ ;/ 瞬时/ 变迁/ 用于/ 描述/ 系统/ 状态/ 改变/ 的/ 事件/ ;/ 弧/ 用于/ 规定/ 局部/ 状态/ 和/ 事件/ 之间/ 的/ 关系/ ;/ 颜色/ 托肯/ 用于/ 描述/ 不同/ 类型/ 的/ 服务/ 实例/ ./ 从/ 软硬件/ 配置/ 的/ 角度看/ ,/ 服务/ 准备/ 阶段/ 可以/ 建模/ 为/ 一个/ 多层/ 系统/ (/ multi/ -/ tiersystem/ )/ ,/ 包括/ 负载/ 均衡器/ (/ loadbalancermachine/ )/ 、/ 应用服务器/ 集群/ (/ applicationserverclusters/ )/ 和/ 数据库/ 服务器/ (/ data/ -/ baseservers/ )/ ./ 其中/ 应用服务器/ 处理/ Web/ 业务/ 逻辑/ 和/ 服务/ 组合/ ,/ 数据库/ 服务器/ 处理/ Web/ 数据/ 访问/ 和/ 服务/ 注册/ 库/ 处理/ ./ 服务/ 准备/ 阶段/ 的/ 形式化/ 定义/ 如下/ ./ 定义/ 7/ ./ 服务/ 准备/ 阶段/ 是/ 一个/ 四元组/ ,/ 即/ MS/ =/ (/ MQ/ ,/ V/ ,/ P/ ,/ SH/ )/ ,/ 其中/ ①/ MQ/ =/ {/ MQ1/ ,/ MQ2/ ,/ …/ ,/ MQM/ }/ 是/ 多层/ 服务器/ 集/ ,/ 其中/ MQi/ 是/ 第/ i/ 层/ 服务器/ 集/ ,/ 可以/ 包含/ 多个/ 并发/ 运行/ 的/ 服务器/ ,/ 每个/ 服务器/ 都/ 可以/ 建模/ 为/ 一个/ 队列/ 库所/ ;/ ②/ V/ =/ {/ V1/ ,/ V2/ ,/ …/ ,/ VM/ }/ 是/ 服务器/ 访问/ 速率/ 集/ ,/ 其中/ Vi/ 是/ 第/ i/ 层/ 服务器/ 集/ 的/ 访问/ 比率/ (/ visitratio/ )/ ,/ 即/ 到达/ MQi/ 的/ 平均/ 访问/ 数目/ ,/ 可/ 用于/ 计算/ 队列/ 的/ 到达/ 率/ λ/ ;/ ③/ P/ =/ {/ p1/ ,/ p2/ ,/ …/ ,/ pM/ }/ 是/ 多层/ 服务器之间/ 的/ 变迁/ 概率/ 集/ ,/ 其中/ 由/ MQi/ 返回/ MQi/ -/ 1/ 的/ 概率/ 是/ pi/ ,/ 由/ MQi/ 到/ MQi/ +/ 1/ 的/ 概率/ 是/ (/ 1/ -/ pi/ )/ ;/ ④/ SH/ =/ {/ SH1/ ,/ SH2/ ,/ …/ ,/ SHM/ }/ 是/ 每层/ 服务器/ 集/ 内部/ 的/ 调度/ 策略/ (/ scheduledispline/ )/ ,/ 如/ 随机/ 调度/ 法/ 、/ 负载/ 均衡/ 法/ 、/ 优先级/ 调度/ 法等/ ./ 在/ 服务/ 提供/ 阶段/ ,/ 由于/ 服务/ 系统/ 的/ 分布/ 性/ 和/ 异构/ 性/ ,/ 失效/ 的/ 发生/ 不可避免/ ./ 所谓/ 服务/ 失效/ 是/ 服务/ 节点/ 软硬件/ 运行/ 行为/ 对/ 消费者/ 需求/ 的/ 偏离/ ,/ 是/ 服务/ 系统/ 的/ 一个/ 动态/ 特征/ ./ 服务/ 节点/ 发生/ 失效/ 后/ 将/ 会/ 停止/ 工作/ 直到/ 失效/ 被/ 恢复/ ,/ 即当/ 服务器/ 节点/ 遇到/ 大量/ 的/ 突发/ 请求/ 、/ 用户/ 误操作/ 、/ CPU/ 资源/ 短时/ 衰竭/ 、/ 网络/ 瞬时/ 堵塞/ 、/ 临时/ 中断/ 、/ 恶意/ 的/ 入侵/ 攻击/ 或/ 网络/ 错误/ 等/ 可/ 修复/ 故障/ 时/ ,/ 通过/ 恢复/ 策略/ 解决/ 服务/ 遇到/ 失效/ 而/ 被迫/ 终止/ 的/ 问题/ ./ 因此/ ,/ 服务/ 提供/ 阶段/ 的/ 形式化/ 定义/ 如下/ ./ 定义/ 8/ ./ 服务/ 提供/ 阶段/ 是/ 一个/ 七元/ 组/ ,/ 即/ DS/ =/ (/ N/ ,/ S/ ,/ CL/ ,/ IS/ ,/ NS/ ,/ RN/ ,/ RL/ )/ :/ ①/ N/ ,/ S/ ,/ CL/ 分别/ 是/ 有限/ 节点/ 集/ 、/ 可用/ 服务/ 集/ 和/ 服务/ 链路/ 集/ ,/ 其中/ 服务/ 链路/ 是/ 对/ 跨/ 地域/ 网络/ 基础设施/ 的/ 虚拟化/ ,/ 屏蔽/ 了/ 实际/ 的/ 网络拓扑/ 和/ 通信/ 细节/ ;/ ②/ IS/ :/ N/ ×/ N/ →/ {/ >/ ,/ μ/ ,/ |/ ,/ -/ -/ ,/ +/ }/ 是/ 节点/ 间/ 的/ 交/ Page6/ 互/ 关系/ 函数/ ,/ 其中/ >/ ,/ μ/ ,/ |/ ,/ -/ -/ ,/ +/ 分别/ 表示/ 顺序/ 、/ 重复/ 、/ 并发/ 、/ 容错/ 和/ 条件/ 关系/ ;/ ③/ NS/ :/ N/ →/ S/ / 是/ 节点/ 的/ 可用/ 服务/ 函数/ ,/ NS/ (/ Ni/ )/ =/ Si/ =/ {/ Si/ ,/ 1/ ,/ Si/ ,/ 2/ ,/ …/ ,/ Si/ ,/ m/ }/ 表示/ 节点/ Ni/ 的/ 可用/ 服务/ 集/ ,/ 其中/ Si/ ,/ j/ 是/ 节点/ Ni/ 的/ 第/ j/ 个/ 可用/ 服务/ ;/ ④/ RN/ :/ N/ →/ (/ 0/ ,/ 1/ )/ 是/ 节点/ 成功/ 运行/ 不/ 失效/ 的/ 概率/ ,/ RL/ :/ CL/ →/ (/ 0/ ,/ 1/ )/ 是/ 链路/ 成功/ 通信/ 不/ 失效/ 的/ 概率/ ,/ 根据/ 实际/ 情况/ ,/ 节点/ 和/ 链路/ 的/ 成功/ 概率/ 不为/ 1/ ./ 在/ 不/ 确定/ 的/ 、/ 复杂/ 的/ 各种/ 外部/ 因素/ 的/ 影响/ 下/ ,/ 服务/ 系统/ 不/ 可能/ 永远/ 稳定/ 、/ 可靠/ 地/ 运行/ ./ 分析/ 服务/ 系统/ 的/ 性能/ 先/ 要/ 建立/ 系统/ 的/ 性能/ 模型/ ,/ 而/ 建立/ 服务/ 系统/ 的/ 性能/ 模型/ 可以/ 从/ 以下/ 几个/ 方面/ 入手/ :/ 首先/ 要/ 建立/ 系统/ 节点/ 的/ 性能/ 模型/ ,/ 它/ 描述/ 了/ 理想/ 无/ 失效/ 发生/ 时/ 节点/ 的/ 结构/ 和/ 性能/ 情况/ ;/ 二是/ 对/ 可能/ 出现/ 失效/ 的/ 节图/ 6/ 服务/ 准备/ 阶段/ 的/ QPN/ 表示/ 为了/ 方便/ 讨论/ 建模/ 方法/ ,/ 本文/ 假设/ 服务/ 准备/ 阶段/ 只/ 提供/ 两项/ 业务/ {/ BP1/ ,/ BP2/ }/ ,/ 包括/ 的/ 功能/ 个数/ 分别/ 为/ m1/ 和/ m2/ ./ 为此/ ,/ 服务/ 准备/ 阶段/ 执行/ 时/ 包含/ 5/ 类/ 处理/ 行为/ ,/ 且/ 每类/ 都/ 包含/ 若干/ 操作/ ./ 其中/ ,/ 托肯/ “/ B/ ”/ 表示/ Browse/ 行为/ ,/ 由/ n1/ 个/ 操作/ “/ b/ ”/ 组成/ ;/ 托肯/ “/ L/ ”/ 表示/ Select/ 行为/ ,/ 由/ n2/ 个/ 操作/ “/ l/ ”/ 组成/ ;/ 托肯/ “/ C1/ ”/ 表示/ 业务/ BP1/ 的/ Composite/ 行为/ ,/ 由/ m1/ 个/ 操作/ “/ c1/ ”/ 组成/ ;/ 托肯/ “/ C2/ ”/ 表示/ 业务/ BP2/ 的/ Composite/ 行为/ ,/ 由/ m2/ 个/ 操作/ “/ c2/ ”/ 组成/ ;/ 托肯/ “/ R/ ”/ 表示/ Register/ 行为/ ,/ 由/ n3/ 个/ 操作/ “/ r/ ”/ 组成/ ./ 为了/ 简化/ 模型表示/ 的/ 复杂/ ,/ 对/ 符号/ 含义/ 规定/ 如下/ :/ (/ 1/ )/ 符号/ “/ U/ ”/ 描述/ 托肯/ “/ B/ ”/ ,/ “/ L/ ”/ ,/ “/ C1/ ”/ 或/ “/ C2/ ”/ ,/ 表示/ 消费者/ 的/ 一个/ 行为/ ./ (/ 2/ )/ 符号/ “/ u/ ”/ 描述/ 托肯/ “/ b/ ”/ ,/ “/ l/ ”/ ,/ “/ c1/ ”/ 或/ “/ c2/ ”/ ,/ 表示/ 消费者/ 行为/ 的/ 一个/ 操作/ ./ (/ 3/ )/ 符号/ “/ o/ ”/ 描述/ 托肯/ “/ r/ ”/ ,/ “/ b/ ”/ ,/ “/ l/ ”/ ,/ “/ c1/ ”/ 或/ “/ c2/ ”/ ,/ 表示/ 消费者/ 或/ 提供者/ 的/ 一个/ 操作/ ./ 服务/ 准备/ 阶段/ 模型/ 的/ 执行/ 过程/ 如下/ :/ 点/ 资源/ 建立/ 失效/ 模型/ 和/ 恢复/ 模型/ ,/ 它/ 用来/ 描述/ 节点/ 失效/ 的/ 过程/ 及/ 失效/ 后/ 的/ 反应/ ./ 这/ 其中/ 引起/ 节点/ 失效/ 的/ 原因/ 很多/ ,/ 可能/ 是/ 节点/ 自身/ 设计/ 的/ 问题/ 、/ 管理/ 或/ 操作/ 中/ 的/ 问题/ ,/ 也/ 可能/ 是/ 由于/ 外来/ 恶性/ 攻击/ 而/ 造成/ 的/ ;/ 三是/ 将/ 前面/ 的/ 两者/ 结合/ 建立/ 考虑/ 失效恢复/ 的/ 节点/ 性能/ 模型/ ;/ 最后/ 建立/ 包含/ 多种/ 交互/ 关系/ 和/ 不同/ 执行/ 方式/ 的/ 系统/ 性能/ 模型/ ,/ 它/ 描述/ 了/ 在/ 一个/ 特定/ 的/ 业务流程/ 结构/ 中/ 某些/ 节点/ 失效/ 后/ 对/ 整个/ 系统/ 所/ 带来/ 的/ 影响/ ,/ 根据/ 性能/ 模型/ 计算/ 各种/ 性能参数/ ,/ 就/ 可/ 综合/ 分析/ 一个/ 服务/ 系统/ 的/ 性能/ 状态/ ./ 3.2/ 建模/ 服务/ 准备/ 阶段/ 服务/ 准备/ 阶段/ 的/ QPN/ 图形化/ 模型/ 如图/ 6/ 所示/ ./ 其中/ ,/ 黑色/ 方框图/ 代表/ 瞬时/ 变迁/ ,/ 圆圈/ 表示/ 普通/ 库所/ ,/ 带有/ 竖线/ 的/ 圆圈/ 表示/ 队列/ 库所/ ./ (/ 1/ )/ 库所/ Q1/ (/ G/ // M/ // // IS/ 队列/ )/ 建模/ 消费者/ 请求/ 的/ 发生/ ,/ 托肯/ “/ U/ ”/ (/ “/ B/ ”/ ,/ “/ L/ ”/ ,/ “/ C1/ ”/ 或/ “/ C2/ ”/ )/ 的/ 初始/ 数量/ 反映/ 了/ 并发/ 请求/ 的/ 规模/ ,/ 间隔时间/ 满足/ 指数分布/ ./ 库所/ Q2/ (/ G/ // M/ // // IS/ 队列/ )/ 建模/ 提供者/ 请求/ 的/ 发生/ ,/ 托肯/ “/ R/ ”/ 的/ 初始/ 数量/ 反映/ 了/ 请求/ 的/ 规模/ ,/ 间隔时间/ 满足/ 指数分布/ ./ (/ 2/ )/ 消费者/ 发出请求/ ,/ 触发/ 变迁/ t1/ 销毁/ Q1/ 中/ 的/ 一个/ 托肯/ “/ U/ ”/ ,/ 同时/ 在/ 库/ 所/ P1/ 中/ 创建/ 一个/ 托肯/ “/ u/ ”/ ,/ 表明/ 消费者/ 行为/ 的/ 第/ 1/ 个/ 操作/ 准备/ 执行/ ./ 提供者/ 发出请求/ ,/ 触发/ 变迁/ t0/ 销毁/ Q2/ 中/ 的/ 一个/ 托肯/ “/ R/ ”/ ,/ 同时/ 在/ 库/ 所/ P1/ 中/ 创建/ 一个/ 托肯/ “/ r/ ”/ ,/ 表明/ 提供者/ 行为/ 的/ 第一个/ 操作/ 准备/ 执行/ ./ (/ 3/ )/ 库所/ LB/ (/ G/ // M/ // 1/ // PS/ 队列/ )/ 建模/ 负载/ 均衡器/ ,/ 普通/ 库所/ T/ 建模/ 负载/ 均衡器/ 线程/ 池/ ./ 当/ 请求/ “/ o/ ”/ 被/ LB/ 调度/ 时/ ,/ 将/ 从/ T/ 中/ 分配/ 一个/ 托肯/ “/ t/ ”/ ;/ 当/ 请求/ “/ o/ ”/ 成功/ 调度/ 后/ 将/ 把/ 托肯/ “/ t/ ”/ 返回/ 给/ T/ ./ 如果/ T/ 中/ 没有/ 可用/ 托肯/ “/ t/ ”/ 时/ ,/ 请求/ “/ o/ ”/ 只能/ 在/ P1/ 中/ 等待/ 新/ 的/ 线程/ 托肯/ “/ t/ ”/ 的/ 出现/ ./ T/ 中托肯/ “/ t/ ”/ 的/ 初始/ 数量/ 决定/ 了/ Page7/ 可用/ 线程/ 的/ 数目/ ./ (/ 4/ )/ 变迁/ t11/ ,/ t12/ ,/ …/ ,/ t10/ +/ j/ 的/ 触发/ 概率/ 相同/ ,/ 因此/ 被/ LB/ 成功/ 调度/ 的/ 请求/ “/ o/ ”/ 将/ 等/ 概率/ 地/ 从库/ 所/ P2/ 移入/ j/ 个/ 应用服务器/ CPU/ 库所中/ 的/ 一个/ ,/ 如/ APi/ (/ G/ // M/ // 1/ // PS/ 队列/ )/ ./ (/ 5/ )/ 托肯/ “/ o/ ”/ 从/ APi/ 进入/ 库所/ P3/ ,/ 接着/ 被/ 等/ 概率/ 地/ 移入/ k/ 个/ 数据库/ 服务器/ CPU/ 库所中/ 的/ 一个/ ,/ 如/ DSi/ (/ G/ // M/ // 1/ // PS/ 队列/ )/ ./ (/ 6/ )/ 库所/ DSi/ 处理/ 完/ 的/ 托肯/ “/ o/ ”/ 将/ 被/ 移入/ 数据库/ 磁盘/ 库所/ H/ (/ G/ // M/ // 1/ // PS/ 队列/ )/ ./ 完成/ 磁盘/ 访问/ 后/ ,/ 托肯/ “/ o/ ”/ 的/ 处理/ 有/ 5/ 种/ 情况/ :/ (/ 6.1/ )/ 变迁/ t4/ 将托肯/ “/ b/ ”/ 或/ “/ l/ ”/ 移/ 入库/ 所/ P1/ ,/ 开始/ 下/ 一个/ Web/ 访问/ 操作/ ./ (/ 6.2/ )/ 变迁/ t4/ 将托肯/ “/ c1/ ”/ 或/ “/ c2/ ”/ 移/ 入库/ 所/ P2/ ,/ 开表/ 1/ 服务/ 准备/ 阶段/ 中/ t4/ 和/ t5/ 以外/ 的/ 变迁/ 触发/ 模式/ 变迁/ t0t1t2/ 变迁/ t4/ 和/ t5/ 的/ 变迁/ 模式/ 如表/ 2/ 所示/ ./ 为了/ 对/ 各类/ 处理/ 行为/ 进行/ 准确/ 评估/ ,/ 必须/ 合理/ 设置/ 这些/ 变迁/ 模式/ 的/ 触发/ 权值/ ,/ 以/ 保证/ 只有/ 当/ 所有/ 操作/ 完成/ 后/ 才能/ 结束/ 这/ 类/ 处理/ ./ 对于/ 变迁/ t5/ 来讲/ ,/ 根据/ 图/ 2/ (/ d/ )/ 的/ 描述/ ,/ Register/ 包括/ (/ n3/ +/ 4/ )/ 个/ 操作/ ,/ 即/ 每/ 完成/ (/ n3/ +/ 4/ )/ 个/ 操作/ 就/ 完成/ 一个/ 处理/ 行为/ ./ 为此/ ,/ 可以/ 设表/ 2/ 服务/ 准备/ 阶段/ 中/ 狋/ 4/ 和/ 狋/ 5/ 的/ 变迁/ 触发/ 模式/ 变迁/ t4t5/ 变迁/ t4/ 的/ 情况/ 要/ 复杂/ 一些/ ./ 根据/ 图/ 2/ 的/ 描述/ ,/ Browse/ 包括/ (/ n1/ +/ 4/ )/ 个/ 操作/ ,/ Select/ 包括/ (/ n2/ +/ 4/ )/ 个/ 操作/ ,/ BP1/ 的/ Composite/ 包括/ (/ m1/ +/ 5/ )/ 个/ 操作/ ,/ BP2/ 始下/ 一个/ 服务/ 注册/ 库/ 访问/ 操作/ ./ (/ 6.3/ )/ 消费者/ 行为/ 的/ 所有/ 操作/ 都/ 完成/ 后/ ,/ 从/ Q1/ 中/ 移出/ 的/ 托肯/ “/ U/ ”/ 返回/ 到/ Q1/ 中/ ./ (/ 6.4/ )/ 变迁/ t5/ 将托肯/ r/ 移/ 入库/ 所/ P2/ ,/ 开始/ 下/ 一个/ 服务/ 注册/ 操作/ ./ (/ 6.5/ )/ 提供者/ Register/ 行为/ 的/ 所有/ 操作/ 完成/ 后/ ,/ 从/ Q2/ 中/ 移出/ 的/ 托肯/ “/ R/ ”/ 返回/ 到/ Q2/ 中/ ./ 图/ 6/ 中除/ t4/ 和/ t5/ 之外/ 的/ 变迁/ 描述/ 如表/ 1/ 所示/ ./ 符号/ “/ A/ {/ x/ }/ →/ B/ {/ y/ }/ ”/ 表示/ 模型/ 中/ 变迁/ 的/ 触发/ 模式/ (/ firingmode/ )/ ,/ 托肯/ “/ x/ ”/ 在/ 一次/ 变迁/ 中由库/ 所/ A/ 迁出/ 后以/ “/ y/ ”/ 的/ 形式/ 存放/ 在/ 库/ 所/ B/ 中/ ./ In/ 和/ Out/ 表示/ 变迁/ 的/ 输入/ 和/ 输出/ 库所/ ./ 每个/ 变迁/ 的/ 触发/ 权值/ (/ firingweight/ )/ 都/ 相同/ ,/ 设为/ 1/ ./ 变迁/ t3/ 置/ 变迁/ t5/ 的/ 模式/ 1/ 和/ 2/ 的/ 触发/ 权值/ 分别/ 为/ (/ n3/ +/ 3/ )/ // (/ n3/ +/ 4/ )/ 和/ 1/ // (/ n3/ +/ 4/ )/ ./ 这样/ ,/ 当有/ (/ n3/ +/ 4/ )/ 个托肯/ “/ r/ ”/ 进入/ 库所/ H/ 后/ ,/ 变迁/ t5/ 的/ 模式/ 1/ 平均/ 触发/ (/ n3/ +/ 3/ )/ 次/ ,/ 而/ 模式/ 2/ 平均/ 触发/ 1/ 次/ ./ 虽然/ 不能/ 保证/ 其/ 触发/ 顺序/ ,/ 但/ 资源/ 消耗/ 和/ 队列/ 行为/ 方面/ 与/ 真实/ 系统/ 非常/ 接近/ ./ 的/ Composite/ 包括/ (/ m2/ +/ 5/ )/ 个/ 操作/ ./ 令/ 变迁/ t4/ 的/ 8/ 个/ 模式/ 的/ 触发/ 权值/ 为/ w/ (/ i/ )/ ,/ 其中/ i/ =/ 1/ ,/ 2/ ,/ …/ ,/ 8/ ./ 权值/ 的/ 设置/ 步骤/ 如下/ :/ Page8/ (/ 1/ )/ 令/ w/ (/ 1/ )/ +/ w/ (/ 2/ )/ =/ w/ (/ 3/ )/ +/ w/ (/ 4/ )/ =/ w/ (/ 5/ )/ +/ w/ (/ 6/ )/ =/ w/ (/ 7/ )/ +/ w/ (/ 8/ )/ ,/ 从而/ 保证/ 4/ 个/ 消费者/ 处理/ 行为/ 的/ 发生/ 概率/ 相等/ ./ (/ 2/ )/ 令/ mw/ =/ max/ {/ n1/ +/ 4/ ,/ n2/ +/ 4/ ,/ m1/ +/ 5/ ,/ m2/ +/ 5/ }/ ,/ 即取/ 操作数/ 目的/ 最大值/ ./ (/ 3/ )/ 按照/ 以下/ 公式/ 计算/ 各个/ 模式/ 的/ 权值/ ./ 3.3/ 建模/ 服务/ 提供/ 阶段/ 3.3/ ./ 1/ 考虑/ 失效恢复/ 的/ 服务/ 节点/ 根据/ 失效/ 对/ 服务/ 节点/ 影响/ 的/ 不同/ ,/ 可以/ 分为/ 通信/ 失效/ 和/ 计算/ 失效/ 两大类/ ./ 通信/ 失效/ 使得/ 节点/ 停止/ 接收/ 新/ 的/ 任务/ 请求/ ,/ 同时/ 停止/ 将/ 完成/ 的/ 任务/ 输出/ ,/ 等到/ 失效/ 修复/ 后/ 将/ 恢复/ 到/ 正常/ 的/ 任务/ 输入/ 和/ 输出/ 状态/ ./ 计算/ 失效/ 使得/ 服务/ 任务/ 在/ 节点/ 的/ 生命周期/ 分为/ 有效/ 执行/ 和/ 失效恢复/ 2/ 个/ 阶段/ ./ 在/ 有效/ 执行/ 阶段/ ,/ 服务/ 任务/ 持续/ 进入/ 节点/ ,/ 完成/ 后/ 进入/ 下/ 一个/ 执行/ 环节/ ./ 在/ 失效恢复/ 阶段/ ,/ 节点/ 启动/ 服务/ 恢复程序/ 进行/ 处理/ ./ 当然/ ,/ 失效恢复/ 具有/ 一定/ 的/ 概率/ ,/ 即/ 失效/ 可以/ 恢复/ 时/ ,/ 恢复/ 后/ 的/ 服务/ 从/ 失效/ 断点/ 继续执行/ ,/ 直到/ 遇到/ 不可/ 恢复/ 的/ 失效/ 或者/ 服务/ Si/ 执行/ 完毕/ ;/ 反之/ ,/ 失效/ 不可/ 恢复/ ,/ Si/ 被迫/ 终止/ ,/ 在/ 该/ 节点/ 的/ 任务/ 执行/ 宣告/ 失败/ [/ 15/ ]/ ./ 因此/ ,/ 在/ 建模/ 服务/ 系统/ 的/ 性能/ 模型/ 时/ 需要/ 考虑/ 服务/ 节点/ 的/ 失效/ 和/ 恢复/ 对/ 服务/ 性能/ 的/ 影响/ ./ 为了/ 更好/ 地/ 描述/ 服务/ 节点/ 的/ 性能/ 表现/ ,/ 本文/ 的/ 分析/ 满足/ 以下/ 假设/ :/ (/ 1/ )/ 用户/ 任务/ 请求/ 的/ 到达/ 率/ 与/ 节点/ 的/ 状态/ 是/ 独立/ 的/ 且/ 服从/ 泊松/ 分布/ ,/ 这个/ 假设/ 在/ 已有/ 的/ 关于/ 失效/ 对/ 性能/ 影响/ 的/ 研究/ 工作/ 中/ 被/ 广泛/ 使用/ [/ 17/ -/ 18/ ]/ ;/ 率/ 服从/ 泊松/ 分布/ ;/ (/ 2/ )/ 通信/ 失效/ 和/ 计算/ 失效/ 独立/ 发生/ ,/ 失效/ 发生/ (/ 3/ )/ 每个/ 服务/ 节点/ 都/ 存在/ 一个/ 有限/ 长度/ 的/ 队列/ 来/ 处理/ 所有/ 的/ 服务/ 请求/ ;/ 效/ 执行/ 时间/ 服从/ 指数分布/ ;/ 成/ ,/ 所以/ 假设/ 失效恢复/ 时间/ 服从/ 指数分布/ ;/ (/ 4/ )/ 所有/ 节点/ 被/ 调用/ 后/ 立即/ 执行/ ,/ 并且/ 其无失/ (/ 5/ )/ 由于/ 失效恢复/ 主要/ 通过/ 执行/ 恢复程序/ 完/ (/ 6/ )/ 因/ 通信/ 失效/ 而/ 丢失/ 的/ 服务/ 任务/ 将会/ 继续/ 发送给/ 服务/ 节点/ ./ 服务/ 提供/ 阶段/ 的/ 服务/ 节点/ 的/ QPN/ 模型/ 如图/ 7/ 所示/ ./ 队列/ 库所/ F1/ (/ G/ // M/ // // IS/ )/ 代表/ 通信/ 失效/ 的/ 发生/ ,/ 按照/ 一定/ 失效/ 发生率/ λ/ f1/ 输出/ 托肯/ “/ f1/ ”/ ,/ 失效/ 间隔时间/ 服从/ λ/ f1/ 的/ 指数分布/ ./ 通信/ 失效/ 发生/ 后/ 进入/ 修复/ 阶段/ ,/ 用/ 队列/ 库所/ R/ (/ G/ // M/ // 1/ // PS/ )/ 建模/ 失效恢复/ 时间/ ./ NP/ 建模/ 服务/ 节点/ 处理/ 环节/ ,/ 包含/ 一个/ G/ // M/ // n/ // PS/ 队列/ ,/ 可以/ 模拟/ 具有/ n/ 个/ CPU/ 的/ 服务/ 节点/ 工作/ 负载/ ./ 队列/ 库所/ F2/ (/ G/ // M/ // // IS/ )/ 代表/ 计算/ 失效/ 的/ 发生/ ,/ 按照/ 一定/ 失效/ 发生率/ λ/ f2/ 输出/ 托肯/ “/ f2/ ”/ ,/ 失效/ 间隔时间/ 服从/ λ/ f2/ 的/ 指数分布/ ./ 发生/ 计算/ 失效/ 的/ 服务/ 将/ 以托肯/ “/ s/ ”/ 或/ “/ w/ ”/ 的/ 形式/ 回/ 送到/ 库所/ NP/ 中/ ,/ 启动/ 恢复程序/ ,/ 进入/ 计算/ 失效恢复/ 处理/ 阶段/ ./ 由于/ 服务/ 的/ 共享性/ 与/ 重用/ 性/ ,/ 服务提供者/ 的/ 服务/ 节点/ 上/ 往往/ 运行/ 着/ 多类/ 服务/ 任务/ ,/ 这些/ 额外/ 负载/ 会/ 影响/ 服务/ 任务/ 的/ 性能/ ,/ 而/ 失效/ 对/ 这些/ 额外/ 负载/ 的/ 影响/ 也/ 是/ 一样/ 的/ ./ 代表/ 前驱/ 服务/ (/ 集/ )/ 的/ 库/ 所/ Input/ 向/ 服务/ 节点/ NP/ 输入/ 任务/ 托肯/ “/ s/ ”/ ,/ 库所/ EW/ 产生/ 服务/ 任务/ “/ s/ ”/ 之外/ 的/ 工作/ 负载/ “/ w/ ”/ ./ 库所/ A1/ 中/ 包含/ 3/ 个/ 控制/ 托肯/ (/ “/ a1/ ”/ ,/ “/ a2/ ”/ 和/ “/ d/ ”/ )/ ,/ 其/ 取值/ 在/ 0/ 和/ 1/ 之间/ 切换/ ,/ 0/ 表示/ 托肯/ 不/ 存在/ ,/ 禁止/ 变迁/ 触发/ ,/ 1/ 表示/ 托肯/ 存在/ ,/ 允许/ 变迁/ 触发/ ./ 在/ 未/ 发生/ 通信/ 失效/ ,/ 即/ 变迁/ ft1/ 未/ 触发/ 时/ ,/ 库所/ A1/ 中/ 只/ 包含/ 托肯/ “/ a1/ ”/ 和/ “/ a2/ ”/ 各/ 一个/ ,/ 其中/ “/ a1/ ”/ 用于/ 控制/ 服务/ 节点/ 的/ 输入/ ,/ 即/ 变迁/ nt3/ 的/ 触发/ ,/ “/ a2/ ”/ 用于/ 控制/ 服务/ 节点/ 的/ 输出/ ,/ 即/ 变迁/ nt5/ 的/ 触发/ ./ 如果/ 新/ 任务/ 到达/ 时/ 没有/ 发生/ 通信/ 失效/ ,/ 那么/ 变迁/ nt3/ 触发/ 模式/ 1/ 和/ 模式/ 2/ 将/ 新/ 到/ 的/ 托肯/ “/ s/ ”/ 和/ “/ w/ ”/ 移入/ 队列/ 库所/ NP/ 中/ ,/ 任务/ 完成/ 后/ 将/ 输出/ 到/ 下/ 一个/ Page9/ 环节/ ,/ 即/ 触发/ 变迁/ nt5/ 的/ 模式/ 1/ 和/ 模式/ 2/ ./ 如果/ 发生/ 通信/ 失效/ ,/ 即/ 变迁/ ft1/ 触发/ ,/ 将托肯/ “/ a1/ ”/ 和/ “/ a2/ ”/ 从库/ 所/ A1/ 中/ 移出/ ,/ 同时/ 在/ A1/ 中/ 创建/ 托肯/ “/ d/ ”/ ,/ 在/ 队列/ 库所/ R/ 中/ 创建/ 托肯/ “/ r/ ”/ ./ 托肯/ “/ a1/ ”/ 的/ 移出/ 使得/ 变迁/ nt3/ 的/ 触发/ 模式/ 1/ 和/ 模式/ 2/ 被/ 禁止/ ;/ 托肯/ “/ a2/ ”/ 的/ 移出/ 使得/ 变迁/ nt5/ 的/ 触发/ 模式/ 1/ 和/ 模式/ 2/ 被/ 禁止/ ;/ 托肯/ “/ d/ ”/ 的/ 创建/ 使得/ 变迁/ nt3/ 的/ 模式/ 3/ 和/ 模式/ 4/ 被/ 触发/ ,/ 销毁/ 新到/ 的/ 托肯/ “/ s/ ”/ 和/ “/ w/ ”/ ;/ 托肯/ “/ r/ ”/ 的/ 创建/ 使得/ 通信/ 环节/ 进入/ 修复/ 阶段/ ,/ 等到/ 修复/ 成功/ ,/ 即/ 变迁/ ft3/ 触发/ ,/ 将会/ 在/ 库/ 所/ A1/ 中/ 创建/ 托肯/ “/ a1/ ”/ 和/ “/ a2/ ”/ 各/ 一个/ ,/ 在/ 队列/ 库所/ F1/ 中/ 创建/ 托肯/ “/ f1/ ”/ ,/ 同时/ 销毁/ 库所/ A1/ 中/ 的/ 托肯/ “/ d/ ”/ ,/ 服务/ 节点/ 进入/ 新/ 的/ 失效/ 间隔/ 阶段/ ./ 计算/ 失效/ 和/ 通信/ 失效/ 独立/ 发生/ ,/ 且/ 对/ 服务/ 任务/ 的/ 影响/ 是/ 个体性/ 的/ ,/ 即/ 计算/ 失效/ 的/ 一次/ 发生/ 只会/ 使/ 当前/ 从库/ 所/ NP/ 中/ 输出/ 的/ 任务/ 托肯/ “/ s/ ”/ 或/ “/ w/ ”/ 转变/ 为托肯/ “/ s/ ”/ 或/ “/ w/ ”/ ,/ 然后/ 回/ 送到/ 库所/ NP/ 中/ ./ 如果/ 失效恢复/ 成功/ ,/ 那么/ 托肯/ “/ s/ ”/ 移/ 入库/ 所/ CP/ 后/ 直接/ 输表/ 3/ 服务/ 节点/ 中/ 的/ 变迁/ 触发/ 模式/ 变迁/ nt11/ :/ Input/ {/ s/ }/ →/ AP/ {/ s/ }/ nt3ft11/ :/ F1/ {/ f1/ }/ +/ A1/ {/ a1/ }/ +/ A1/ {/ a2/ }/ →/ R/ {/ r/ }/ +/ A1/ {/ d/ }/ ft21/ :/ F2/ {/ f2/ }/ →/ F2/ {/ f2/ }/ +/ A2/ {/ f2/ }/ ft31/ :/ R/ {/ r/ }/ +/ A1/ {/ d/ }/ →/ F1/ {/ f1/ }/ +/ A1/ {/ a1/ }/ +/ A1/ {/ a2/ }/ ft41/ :/ A2/ {/ f2/ }/ +/ NP/ {/ s/ }/ →/ NP/ {/ s/ }/ 3.3/ ./ 2/ 服务/ 交互/ 的/ Petri/ 网/ 表示/ 通过/ Petri/ 网/ 的/ 变迁/ 触发/ 机制/ 的/ 设计/ 可以/ 描述/ 服务/ 组合/ 中/ 存在/ 的/ 多种/ 交互/ 关系/ ,/ 如图/ 8/ 所示/ ./ 然而/ 这/ 只是/ 对/ 交互/ 关系/ 的/ 静态/ 描述/ ,/ 并/ 没有/ 考虑/ 实际/ 执行/ 过程/ 的/ 时间/ 约束/ 、/ 失效/ 影响/ 和/ 自动化/ 要求/ ./ 顺序/ 重复/ 关系/ 需要/ 预设/ 重复/ 次数/ k/ ,/ 确保/ 在/ 重复/ 执行/ 次数/ 满足/ 后/ 才/ 进入/ 到/ 后继/ 服务/ (/ 集/ )/ ,/ 并且/ 自动/ 设图/ 8/ 服务/ 交互/ 关系/ 的/ Petri/ 网/ 表示/ 出到/ 库/ 所/ Output/ ./ 如果/ 失效恢复/ 不/ 成功/ ,/ 那么/ 托肯/ “/ s/ ”/ 将/ 被/ 移/ 入库/ 所/ Fail/ 中/ ./ 如果/ 服务/ 有/ 冗余/ 容错/ 处理/ 环节/ ,/ 那么/ 托肯/ “/ s/ ”/ 将/ 被/ 送入/ 备份/ 工作/ 部件/ 中/ ,/ 否则/ 被/ 销毁/ ,/ 即/ 服务/ 失败/ 终止/ ./ 变迁/ ft5/ 属于/ 自由选择/ 冲突/ 模型/ ,/ 选择/ 哪/ 一个/ 变迁/ 模式/ 实施/ 并/ 不/ 依赖于/ 库所中/ 的/ 标识/ ,/ 而/ 取决于/ 变迁/ 模式/ 的/ 触发/ 权值/ (/ firingweight/ )/ ,/ 即/ 发生/ 的/ 概率/ ./ 令/ 变迁/ ft5/ 的/ 4/ 个/ 变迁/ 模式/ 的/ 触发/ 权值/ 为/ w/ (/ i/ )/ ,/ i/ =/ 1/ ,/ 2/ ,/ 3/ ,/ 4/ ./ 服务/ 任务/ “/ s/ ”/ 的/ 失效恢复/ 成功/ 概率/ 为/ φ/ s/ ,/ 服务/ 任务/ “/ w/ ”/ 的/ 失效恢复/ 成功/ 概率/ 为/ φ/ w/ ,/ 那么/ 它们/ 之间/ 的/ 关系/ 如下/ :/ 图/ 7/ 中/ 的/ 变迁/ 描述/ 如表/ 3/ 所示/ ./ 符号/ “/ A/ {/ x/ }/ →/ {/ }/ ”/ 表示/ “/ x/ ”/ 在/ 变迁/ 中由库/ 所/ A/ 迁出/ 后/ 不/ 留在/ 任何/ 库所中/ ,/ 而是/ 被/ 销毁/ (/ destroy/ )/ ./ 变迁/ nt21/ :/ EW/ {/ w/ }/ →/ AP/ {/ w/ }/ nt41/ :/ NP/ {/ s/ }/ →/ CP/ {/ s/ }/ nt51/ :/ CP/ {/ s/ }/ +/ A1/ {/ a2/ }/ →/ Output/ {/ s/ }/ +/ A1/ {/ a2/ }/ ft5/ 和/ 条件/ 交互/ 关系/ 下/ 的/ 任务/ 执行/ 是/ 独立/ 和/ 一次性/ 的/ ,/ 即/ 只要/ 业务流程/ 中/ 规定/ 的/ 前驱/ 服务/ (/ 集/ )/ 能够/ 完成/ ,/ 随后/ 就/ 会/ 启动/ 这/ 两类/ 交互/ ,/ 其/ 触发/ 条件/ 是/ 确定/ 的/ ,/ 因此/ 在/ 系统/ 建模/ 中/ 的/ 描述/ 方法/ 和/ 图/ 8/ 一致/ ./ 置/ 下/ 一次/ 重复/ 次数/ ./ 从/ 运行/ 过程/ 分析/ ,/ 重复/ 交互/ 可以/ 看作/ 具有/ k/ 个/ 操作/ 的/ 处理过程/ ./ 但是/ ,/ 从/ 失效/ 影响/ 来/ Page10/ 看/ ,/ 对于/ 通信/ 失效/ ,/ 按照/ 假设/ (/ 6/ )/ 可以/ 通过/ 任务/ 的/ 重/ 发来/ 解决/ ;/ 对于/ 计算/ 失效/ ,/ 一个/ 操作/ 的/ 失效/ 就/ 意味着/ 整个/ 重复/ 关系/ 的/ 失败/ ,/ 如图/ 9/ (/ a/ )/ 所示/ ./ 当有/ 一个/ 服图/ 9/ 重复/ 、/ 并发/ 和/ 容错/ 关系/ 节点/ 的/ QPN/ 模型/ 列/ 的/ 处理/ 行为/ ./ 3.3/ ./ 3/ 组合/ 服务/ 集中/ 执行/ 的/ 性能/ 模型/ 业务流程/ “/ S1/ ./ 1/ >/ (/ S2/ ./ 1/ (/ p/ )/ +/ S3/ ./ 2/ (/ 1/ -/ p/ )/ )/ >/ μ/ S4/ ./ 1/ (/ k/ )/ >/ (/ S5/ ./ 1/ 含/ 多种/ 交互/ 关系/ ,/ 但/ 可以/ 分解/ 为/ 6/ 个/ 顺序/ 执行/ 的/ 服务/ (/ 集/ )/ ./ 用托肯/ “/ S/ ”/ 表示/ 这个/ 组合/ 服务/ ,/ “/ z1/ ”/ 表示/ S1/ ./ 1/ ,/ “/ z2/ ”/ 表示/ S2/ ./ 1/ (/ p/ )/ +/ S3/ ./ 2/ (/ 1/ -/ p/ )/ ,/ “/ z3/ ”/ 表示/ μ/ S4/ ./ 1/ (/ k/ )/ ,/ “/ z4/ ”/ 表示/ (/ S5/ ./ 1/ 示/ S1/ ./ 2/ ,/ “/ z7/ ”/ 表示/ 处理/ 组合/ 服务/ 的/ 执行/ 结果/ ./ 当/ 组合/ 服务/ “/ S/ ”/ 以/ 集中/ 方式/ 执行/ 时/ ,/ 服务/ 代理/ SB/ 将/ 从/ “/ z1/ ”/ 开始/ 依次/ 调用/ 服务/ (/ 集/ )/ “/ zi/ ”/ ./ 当托肯/ “/ zi/ ”/ 回到/ SB/ 时/ ,/ SB/ 将/ 开始/ 调用/ “/ zi/ +/ 1/ ”/ 表示/ 的/ 服务/ (/ 集/ )/ ,/ 直到/ “/ z7/ ”/ 完成/ 为止/ ./ 为了/ 简化/ 模型表示/ ,/ 规定/ 符号/ “/ z/ ”/ 表示/ 托肯/ “/ z1/ ”/ ,/ “/ z2/ ”/ ,/ …/ ,/ “/ z6/ ”/ ,/ 或/ “/ z7/ ”/ ./ 组合/ 服务/ “/ S/ ”/ 集中/ 执行/ 场景/ 对应/ 的/ QPN/ 模型/ 如图/ 10/ 所示/ ./ 容错/ 关系/ 是/ 在/ 对/ 失效/ 服务/ 采取/ 修复/ 措施/ 外/ ,/ 增加/ 冗余/ 备份/ 资源/ 以/ 提高/ 系统/ 可用性/ 最/ 常用/ 的/ 策略/ 之一/ ./ 这样/ 可以/ 使/ 系统/ 在/ 出现/ 故障/ 的/ 时候/ 仍能/ 维持/ 正常/ 功能/ ,/ 当/ 工作/ 部件/ 发生/ 不可/ 恢复/ 的/ 故障/ 后/ ,/ 可以/ 用/ 备份/ 部件/ 来/ 代替/ 有/ 故障/ 的/ 部件/ 而/ 使/ 系统/ 能够/ 维持/ 正常/ 工作/ ./ 按/ 备份/ 部件/ 所/ 处/ 状态/ 的/ 不同/ ,/ 冗余/ 备份/ 系统/ 主要/ 有/ 3/ 种/ 形式/ :/ 冷/ 备份/ 、/ 温/ 备份/ 和/ 热/ 备份/ ./ 冷/ 备份/ 是/ 指/ 备用/ 部件/ 处于/ 完全/ 不/ 工作/ 状态/ ,/ 并/ 假设/ 它/ 的/ 失效率/ 为/ 零/ ./ 温/ 备份/ 系统/ 指/ 备用/ 部件/ 与/ 主/ 部件/ 处于/ 完全相同/ 的/ 工作/ 状态/ 下/ ,/ 但/ 备用/ 部件/ 相对/ 于主/ 部件/ 处于/ 轻/ 载荷/ 工作/ 状态/ ,/ 其/ 失效率/ 较主/ 部件/ 的/ 小/ ,/ 而/ 在/ 热/ 备份/ 系统/ 中/ ,/ 两者/ 的/ 失效率/ 相同/ [/ 19/ ]/ ./ 在/ 实际/ 的/ 服务/ 系统/ 中/ 可/ 根据/ 服务提供者/ 管理策略/ 的/ 不同/ 设置/ 不同/ 的/ 冗余/ 容错/ 结构/ ,/ 如图/ 9/ (/ c/ )/ 所示/ ./ 主/ 节点/ N/ 中/ 没有/ 失效/ 或者/ 失效/ 修复/ 成功/ 的/ 服务/ 任务/ 将/ 通过/ 变迁/ fu1/ 输出/ 到/ 下/ 一个/ 环节/ Output/ ,/ 由于/ 通信/ 失效/ 而/ 被/ 主/ 节点/ N/ 丢失/ 的/ 服务/ 任务/ 将/ 通过/ 变迁/ fu3/ 输送到/ 备用/ 节点/ N/ 中/ ,/ 由于/ 计算/ 失效/ 而/ 失效/ 且/ 修复/ 不/ 成功/ 的/ 服务/ 任务/ 将/ 通过/ 变迁/ fu2/ 输送到/ 备用/ 节点/ N/ 中/ ./ 备用/ 节点/ N/ 中/ 的/ 服务/ 任务/ 按照/ 图/ 7/ 的/ 方式/ 工作/ ./ 容错/ 关系/ 对/ 服务/ 任务/ 的/ 响应/ 时间/ 影响/ 不/ 大/ ,/ 但/ 可以/ 提高/ 服务/ 可用性/ ./ 此外/ ,/ 在/ 开放/ 的/ 网络/ 环境/ 中/ ,/ 服务/ 交互/ 关系/ 既/ 和/ 业务/ 逻辑/ 有关/ ,/ 也/ 和/ 服务/ 驻留/ 的/ 节点/ 位置/ 有关/ ./ 当/ 服务/ 与/ 节点/ 之间/ 是/ 一对一/ 关系/ ,/ 即/ 一个/ 节点/ 只/ 运行/ 一类/ 服务/ 时/ ,/ 服务/ 交互/ 和/ 节点/ 交互/ 是/ 一致/ 的/ ,/ 描述/ 也/ 比较简单/ ./ 当/ 服务/ 与/ 节点/ 之间/ 是/ 多/ 对/ 一/ 关系/ ,/ 即/ 一个/ 节点/ 运行/ 多/ 类/ 服务/ 时/ ,/ 同样/ 的/ 两个/ 节点/ 在/ 业务流程/ 的/ 不同/ 执行/ 阶段/ 可能/ 按照/ 不同/ 的/ 方式/ 进行/ 交互/ ./ 图/ 3/ 的/ 组合/ 服务/ 执行/ 环境/ 中有/ 9/ 个/ 服务/ 节点/ 提供/ 了/ 15/ 类/ 服务/ ,/ 其中/ 有/ 3/ 个/ 节点/ 属于/ 单类/ 服务/ 队列/ ,/ 6/ 个/ 节点/ 属于/ 两类/ 服务/ 队列/ ./ 为此/ ,/ 我们/ 用/ “/ sj/ ”/ 作为/ 节点/ Ni/ 的/ 第/ j/ 个/ 服务/ Si/ ,/ j/ 的/ 托肯/ 符号/ ,/ 以便/ 描述/ 节点/ 队务/ 任务/ “/ s/ ”/ 恢复/ 不/ 成功/ 时/ ,/ 将会/ 触发/ 变迁/ it/ ,/ 销毁/ (/ k/ -/ 1/ )/ 个托肯/ “/ s/ ”/ ,/ 节点/ N/ 的/ 内部/ 细节/ 如图/ 7/ 所示/ ./ 执行/ 过程/ 如下/ :/ (/ 1/ )/ 队列/ 库所/ CQ/ (/ G/ // M/ // // IS/ )/ 建模/ 组合/ 服务/ 执行/ 请求/ 的/ 到达/ ,/ 托肯/ “/ S/ ”/ 的/ 到达/ 速率/ 反映/ 了/ 服务/ 请求/ 的/ 频度/ ./ 队列/ 库所/ CB/ (/ G/ // M/ // 1/ // PS/ )/ 建模/ 服务/ 代理/ ,/ 完成/ 服务/ 调用/ 和/ 最终/ 结果/ 处理/ ./ 变迁/ ct1/ 触发/ 后/ 将/ 销毁/ 库所/ CS/ 中/ 的/ 一个/ 托肯/ “/ S/ ”/ ,/ 同时/ 在/ CB/ 中/ 创建/ 托肯/ “/ z1/ ”/ ,/ 准备/ 调用/ “/ z1/ ”/ 表示/ 的/ 服务/ S1/ ./ 1/ ./ (/ 2/ )/ 变迁/ ct2/ 触发/ 后/ 在/ 库/ 所/ SE/ 中/ 创建/ 托肯/ “/ s1/ ”/ ,/ 调用/ 节点/ N1/ 的/ 服务/ S1/ ./ 1/ ./ 变迁/ ct1/ 销毁/ N1/ 输出/ 的/ 托肯/ “/ s1/ ”/ ,/ 在/ 库/ 所/ CB/ 中/ 创建/ 一个/ 托肯/ “/ z2/ ”/ ,/ 准备/ 调用/ “/ z2/ ”/ 表示/ 的/ 服务/ 集/ S2/ ./ 1/ (/ p/ )/ +/ S3/ ./ 2/ (/ 1/ -/ p/ )/ ./ (/ 3/ )/ 服务/ S2/ ./ 1/ 和/ S3/ ./ 2/ 的/ 选择/ 概率/ 可以/ 通过/ 变迁/ cd1/ 和/ cd2/ 的/ 触发/ 权值/ 来/ 实现/ ./ 变迁/ cd1/ 的/ 触发/ 将/ 在/ N2/ 中/ 创建/ 托肯/ “/ s1/ ”/ 调用/ 服务/ S2/ ./ 1/ ,/ 变迁/ cd2/ 的/ 触发/ 将/ 在/ N3/ 中/ 创建/ 托肯/ “/ s2/ ”/ 调用/ 服务/ S3/ ./ 2/ ./ 无论是/ 哪个/ 服务/ 被/ 调用/ ,/ 完成/ 后/ 将/ 触发/ 变迁/ ct1/ 在/ 库/ 所/ CB/ 中/ 创建/ 一个/ 托肯/ “/ z3/ ”/ ,/ 准备/ 调用/ “/ z3/ ”/ 表示/ 的/ 服务/ 集/ μ/ S4/ ./ 1/ (/ k/ )/ ./ Page11/ 图/ 10/ 组合/ 服务/ 集中/ 执行/ 的/ QPN/ 表示/ (/ 4/ )/ 变迁/ ct2/ 在/ 库/ 所/ IT3/ 中/ 创建/ 托肯/ “/ s/ ”/ ,/ 调用/ 节点/ N4/ 的/ 服务/ S4/ ./ 1/ ./ 变迁/ it1/ 的/ 触发/ 在/ 队列/ 库所/ N4/ 中/ 生成/ k/ 个/ 任务/ 托肯/ “/ s/ ”/ ,/ 变迁/ it3/ 的/ 触发/ 将/ 销毁/ 库所/ N4/ 中/ 的/ k/ 个/ 任务/ 托肯/ “/ s/ ”/ ,/ 同时/ 输出/ 托肯/ “/ s/ ”/ 到库/ 所/ IT4/ ,/ 变迁/ ct1/ 得到/ 托肯/ “/ s/ ”/ 后/ 将/ 在/ 库/ 所/ CB/ 中/ 创建/ 一个/ 托肯/ “/ z4/ ”/ ,/ 准备/ 调用/ 后继/ 服务/ 集/ (/ S5/ ./ 1/ (/ 5/ )/ 变迁/ ct2/ 在/ 库/ 所/ FA1/ 中/ 创建/ 托肯/ “/ s/ ”/ ,/ 调用/ 节点/ N5/ 的/ 服务/ S5/ ./ 1/ ./ 库所/ FA1/ 中/ 成功/ 执行/ 的/ 任务/ 托肯/ “/ s/ ”/ 输出/ 到库/ 所/ FA2/ 中/ ,/ 触发/ 变迁/ ct1/ 在/ 库/ 所/ CB/ 中/ 创建/ 一个/ 托肯/ “/ z5/ ”/ ,/ 准备/ 调用/ “/ z5/ ”/ 表示/ 的/ 服务/ 集/ (/ S7/ ./ 1/ |/ S8/ ./ 2/ )/ ./ 库所/ FA1/ 中/ 不能/ 成功/ 执行/ 的/ 任务/ 托肯/ “/ s/ ”/ 将/ 通过/ 变迁/ fa3/ 输出/ 到/ 容错/ 备用/ 节点/ N6/ 中/ ./ 如果/ 能够/ 成功/ 执行/ ,/ 就/ 通过/ 变迁/ fa4/ 输出/ 到库/ 所/ FA2/ 表/ 4/ 集中/ 执行/ 模型/ 的/ 变迁/ 触发/ 模式/ 触发/ 模式/ 变迁/ ct01/ :/ CQ/ {/ S/ }/ →/ CS/ {/ S/ }/ ct2cd11/ :/ CD1/ {/ s/ }/ →/ N2/ {/ s1/ }/ it21/ :/ N4/ {/ s/ }/ →/ IT1/ {/ s/ }/ cd21/ :/ CD1/ {/ s/ }/ →/ N3/ {/ s2/ }/ it31/ :/ IT1/ {/ k/ ×/ s/ }/ →/ IT4/ {/ s/ }/ cd31/ :/ N2/ {/ s1/ }/ →/ CD2/ {/ s/ }/ it41/ :/ N4/ {/ s/ }/ →/ IT2/ {/ s/ }/ cd41/ :/ N3/ {/ s2/ }/ →/ CD2/ {/ s/ }/ it51/ :/ IT1/ {/ (/ k/ -/ 1/ )/ ×/ s/ }/ +/ IT2/ {/ s/ }/ →/ {/ }/ 3.3/ ./ 4/ 组合/ 服务/ 分散/ 执行/ 的/ 性能/ 模型/ μ/ S4/ ./ 1/ (/ k/ )/ >/ (/ S5/ ./ 1/ 组合/ 服务/ “/ S1/ ./ 1/ >/ (/ S2/ ./ 1/ (/ p/ )/ +/ S3/ ./ 2/ (/ 1/ -/ p/ )/ )/ >/ 中/ ,/ 否则/ 就/ 销毁/ ,/ 表明/ 任务/ 失败/ 终止/ ./ (/ 6/ )/ 变迁/ ct2/ 在/ 库/ 所/ CO1/ 中/ 创建/ 托肯/ “/ s/ ”/ 后/ ,/ 变迁/ co1/ 同时/ 调用/ N7/ 中/ 的/ 服务/ S7/ ./ 1/ 和/ N8/ 中/ 的/ 服务/ S8/ ./ 2/ ./ 等到/ 两个/ 服务/ 都/ 完成/ 后/ 触发/ 变迁/ co2/ 在/ 库/ 所/ CO2/ 中/ 创建/ 托肯/ “/ s/ ”/ ./ 变迁/ ct1/ 触发/ 后/ 在/ 库/ 所/ CB/ 中/ 创建/ 一个/ 托肯/ “/ z6/ ”/ ,/ 准备/ 调用/ “/ z6/ ”/ 表示/ 的/ 服务/ 集/ S1/ ./ 2/ ./ (/ 7/ )/ 变迁/ ct2/ 触发/ 后/ 在/ 库/ 所/ SE/ 中/ 创建/ 托肯/ “/ s2/ ”/ ,/ 调用/ 节点/ N1/ 的/ 服务/ S1/ ./ 2/ ./ 完成/ 后/ ,/ 变迁/ ct1/ 销毁/ N1/ 输出/ 托肯/ “/ s2/ ”/ ,/ 在/ 库/ 所/ CB/ 中/ 创建/ 托肯/ “/ z7/ ”/ ,/ 准备/ 处理/ 组合/ 服务/ 的/ 最终/ 结果/ ./ (/ 8/ )/ 库所/ CB/ 输出/ 托肯/ “/ z7/ ”/ 后/ 触发/ 变迁/ ct2/ 将托肯/ “/ z7/ ”/ 销毁/ ,/ 表明/ 组合/ 服务/ 执行/ 完成/ ./ 图/ 10/ 中/ 的/ 变迁/ 描述/ 如表/ 4/ 所示/ ./ 行/ 的/ QPN/ 模型/ 如图/ 11/ 所示/ ./ 队列/ 库所/ DQ/ (/ G/ // M/ // // IS/ )/ 建模/ 组合/ 服务/ 执行/ 请求/ “/ S/ ”/ 的/ 到达/ ,/ 队列/ 库所/ DB/ (/ G/ // M/ // 1/ // PS/ )/ 建模/ 组合/ 服务/ 代理/ ./ 变迁/ dt2/ 触/ Page12/ 发/ 模式/ 1/ 后/ 在/ 库/ 所/ SE/ 中/ 创建/ 托肯/ “/ s1/ ”/ 后/ 开始/ 调用/ 第一个/ 服务/ S1/ ./ 1/ ,/ 随后/ 不再/ 干涉/ 组合/ 服务/ 的/ 执行/ 过程/ ./ 服务/ 之间/ 按照/ 预定/ 的/ 执行/ 方案/ 直接/ 交互/ ,/ 由/ 最后/ 图/ 11/ 组合/ 服务/ 分散/ 执行/ 的/ QPN/ 表示/ 4/ 实验/ 与/ 分析/ 4.1/ 仿真/ 工具/ QPME/ 按照/ 上述/ 建模/ 思路/ 可以/ 建立/ 起/ 基于/ 排队/ Petri/ 网/ 的/ 服务/ 系统/ 性能/ 模型/ ,/ 但是/ 在/ 实际/ 应用/ 中/ 仍/ 存在/ 不少/ 局限性/ ,/ 主要/ 是/ 状态/ 空间/ 爆炸/ 问题/ ./ 排队/ Petri/ 网/ 模型/ 的/ 状态/ 空间/ 大小/ 会/ 随/ 模型/ 中库/ 所/ 、/ 变迁/ 、/ 颜色/ 托肯/ 等/ 建模/ 元素/ 数目/ 的/ 增长/ 呈/ 指数/ 级/ 增长/ ,/ 导致/ 所谓/ 状态/ 空间/ 爆炸/ 问题/ 或维数/ 灾难/ 问题/ ,/ 不仅/ 关系/ 到/ 数值/ 方法/ 求解/ 的/ 可行性/ ,/ 而且/ 影响/ 到/ 仿真/ 方法/ 分析/ 的/ 精确度/ ,/ 严重/ 限制/ 着/ 此类/ 建模/ 机制/ 在/ 现实/ 中/ 的/ 应用/ ./ QPME/ (/ QueueingPetrinetModelingEnviron/ -/ ment/ )/ 软件包/ [/ 16/ ,/ 20/ ]/ 是/ 一款/ 基于/ 排队/ Petri/ 网/ 的/ 性能/ 建模/ 工具/ ,/ 具有/ 友好/ 的/ 图形界面/ ,/ 包括/ QPN/ 编辑器/ (/ QPE/ )/ 和/ 仿真器/ (/ SimQPN/ )/ 两/ 部分/ ./ SimQPN/ 能够/ 规避/ QPN/ 的/ 状态/ 空间/ 爆炸/ 问题/ ,/ 支持/ 构建/ 层次化/ 模型/ HQPNs/ (/ Hierarchically/ -/ CombinedQPNs/ )/ ,/ 有助于/ 理解/ 系统/ 各/ 部件/ 之间/ 的/ 交互/ 关系/ ,/ 还/ 可以/ 更/ 简洁/ 地/ 描述/ 系统/ ./ Kounev/ 等/ 人/ [/ 10/ ]/ 采用/ SimQPN/ 对/ 大规模/ 复杂/ 分布式/ 组件/ 系统/ 进行/ 了/ 建模/ ,/ 结果/ 证明/ 其/ 对/ QPN/ 模型/ 有/ 等价/ 的/ 形式化/ 表达能力/ ,/ 能够/ 提供/ 准确/ 和/ 稳定/ 的/ 性能/ 度量/ 值/ ,/ 可/ 用于/ 分析/ 具有/ 现实/ 规模/ 和/ 复杂性/ 的/ QPN/ 模型/ ./ Kounev/ 等/ 人/ [/ 9/ -/ 10/ ]/ 使用/ QPME/ 对/ J2EE/ 软硬件/ 平台/ 性能/ 测量/ 基准/ 程序/ SPECjAppServer2004/ 进行/ 建模/ 和/ 仿真/ ,/ 实验/ 结果/ 和/ 实际/ 系统/ 测量/ 值/ 非常/ 接近/ ,/ 总体/ 的/ 结果/ 误差/ 在/ ±/ 5/ %/ 以内/ ,/ 表明/ QPME/ 能够/ 很/ 好/ 反映/ 系统/ 的/ 性能/ 变化/ ,/ 预测/ 系统/ 性能/ 度量/ 值/ ./ 一个/ 完成/ 的/ 服务/ S1/ ./ 2/ 通过/ 变迁/ dt9/ 将/ 最终/ 结果/ “/ S/ ”/ 返回/ 给/ 服务/ 代理/ DB/ ,/ 处理/ 后/ 通过/ 变迁/ dt2/ 的/ 触发/ 模式/ 2/ 将托肯/ “/ S/ ”/ 销毁/ ,/ 表明/ 整个/ 组合/ 服务/ 执行/ 完成/ ./ 因此/ ,/ 本文/ 在/ Kounev/ 等/ 人/ 的/ 研究成果/ 基础/ 上/ 建立/ 服务/ 系统/ 的/ QPN/ 性能/ 模型/ ,/ 重点/ 关注/ 服务/ 系统/ 中/ 的/ 部件/ 能力/ 、/ 交互/ 关系/ 、/ 执行/ 方式/ 等/ 的/ 图形化/ 描述/ ;/ 采用/ QPME/ 作为/ 仿真/ 工具/ ,/ 既/ 可以/ 利用/ SimQPN/ 工具/ 的/ 形式化/ 建模/ 能力/ 为/ 性能/ 模型/ 的/ 形式化/ 验证/ 提供/ 保证/ ,/ 减少/ 不必要/ 的/ 繁琐/ 证明/ ,/ 也/ 可以/ 通过/ 实验/ 分析/ 阐述/ 所/ 提出/ 的/ 服务/ 系统/ 性能/ 模型/ 的/ 可行性/ ./ 4.2/ 仿真/ 服务/ 准备/ 阶段/ 服务/ 准备/ 阶段/ 的/ 实验/ 仿真/ 场景/ 如图/ 6/ 所示/ ,/ 其中/ 负载/ 均衡器/ 包含/ 1/ 个/ CPU/ ,/ 线程/ 池/ T/ 的/ 数量/ 为/ 50/ ,/ 应用服务器/ 包含/ 5/ 个/ CPU/ ,/ 数据库/ 服务器/ 包含/ 2/ 个/ CPU/ 和/ 1/ 个/ 磁盘/ 系统/ ./ 相应/ 的/ 队列/ 库所/ 针对/ 服务/ 准备/ 阶段/ 的/ 5/ 类/ 操作/ 行为/ 的/ 参数/ p1/ 设置/ 如表/ 5/ 所示/ ./ 处理/ 行为/ Q1Q2LBAPiDSiHBrowse3/ ./ 2E/ -/ 4/ -/ 0.10/ ./ 0050.0160/ ./ 06Select3/ ./ 2E/ -/ 4/ -/ 0.10/ ./ 0100.0500/ ./ 050Register/ -/ 1.75/ E/ -/ 40.10/ ./ 0250.0450/ ./ 052Composite13/ ./ 2E/ -/ 4/ -/ 0.10/ ./ 0120.0320/ ./ 08Composite23/ ./ 2E/ -/ 4/ -/ 0.10/ ./ 0150.0350/ ./ 092/ 为了/ 分析/ 服务/ 准备/ 阶段/ 的/ 性能/ 表现/ ,/ 设计/ 了/ 两个/ 具有/ 不同/ 访问/ 规模/ 的/ 应用/ 场景/ ,/ 如表/ 6/ 所示/ ./ 处理/ 行为/ 托肯/ 操作数/ 场景/ 1/ 场景/ 2BrowseBn1/ =/ 1025200SelectLn2/ =/ 71070RegisterRn3/ =/ 41050Composite1C1m1/ =/ 61585Composite2C2m2/ =/ 81868Page13/ 根据/ 图/ 2/ 的/ 描述/ ,/ Browse/ 行为/ 包含/ 14/ 个/ 操作/ ,/ 即/ 当托肯/ “/ b/ ”/ 在/ 库/ 所/ H/ 中/ 出现/ 14/ 次时/ ,/ 变迁/ t4/ 的/ 模式/ 1/ 平均/ 触发/ 13/ 次/ ,/ 而/ 模式/ 2/ 平均/ 触发/ 1/ 次/ ;/ Select/ 行为/ 包含/ 11/ 个/ 操作/ ,/ 即/ 当托肯/ “/ l/ ”/ 在/ 库/ 所/ H/ 中/ 出现/ 11/ 次时/ ,/ 变迁/ t4/ 的/ 模式/ 3/ 平均/ 触发/ 10/ 次/ ,/ 而/ 模式/ 4/ 平均/ 触发/ 1/ 次/ ;/ Composite1/ 行为/ 包含/ 11/ 个/ 操作/ ,/ 即/ 当托肯/ “/ c1/ ”/ 在/ 库/ 所/ H/ 中/ 出现/ 11/ 次时/ ,/ 变迁/ t4/ 的/ 模式/ 5/ 平均/ 触发/ 10/ 次/ ,/ 而/ 模式/ 6/ 平均/ 触发/ 1/ 次/ ;/ Composite2/ 行为/ 包含/ 13/ 个/ 操作/ ,/ 即/ 当托肯/ “/ c2/ ”/ 在/ 库/ 所/ H/ 中/ 出现/ 13/ 次时/ ,/ 变迁/ t4/ 的/ 模式/ 7/ 平均/ 触发/ 12/ 次/ ,/ 而/ 模式/ 8/ 平均/ 触发/ 1/ 次/ ./ 为此/ ,/ 变迁/ t4/ 的/ 8/ 个/ 触发/ 模式/ 的/ 权值/ 的/ 一种/ 可能/ 的/ 设置/ 方案/ 如下/ :/ w/ (/ 1/ )/ =/ 13/ ,/ w/ (/ 2/ )/ =/ 1/ ,/ w/ (/ 3/ )/ =/ 12.73/ ,/ 表/ 7/ 服务/ 准备/ 阶段/ 的/ 仿真/ 结果/ 场景/ 2/ (/ 95/ %/ c/ ./ i/ ./ )/ Ui/ 场景/ 1/ // %/ 场景/ 2/ // %/ Xi/ 场景/ 1/ 场景/ 2Ti/ 场景/ 1/ (/ 95/ %/ c/ ./ i/ ./ )/ XB21/ ./ 12194.35/ TB16997/ ./ 491/ (/ +/ // -/ 30.800/ )/ 107408.501/ (/ +/ // -/ 142.771/ )/ ULB28/ ./ 637.1/ XL7/ ./ 6967.37/ TL10404/ ./ 323/ (/ +/ // -/ 23.478/ )/ 80178.498/ (/ +/ // -/ 163.445/ )/ UAS63/ ./ 576.9/ XC111/ ./ 6381.83/ TC110795/ ./ 878/ (/ +/ // -/ 21.523/ )/ 80749.312/ (/ +/ // -/ 160.700/ )/ UDB52/ ./ 561.7/ XC214/ ./ 1365.80/ TC211418/ ./ 780/ (/ +/ // -/ 21.938/ )/ 93412.132/ (/ +/ // -/ 207.386/ )/ XR5/ ./ 7545.56/ TR7735/ ./ 456/ (/ +/ // -/ 17.099/ )/ 58583.748/ (/ +/ // -/ 119.557/ )/ 分析/ 实验/ 结果/ 可知/ ,/ 性能/ 模型/ 可以/ 描述/ 不同/ 访问/ 规模/ 的/ 服务/ 系统/ ,/ 且/ 当/ 系统/ 的/ 访问/ 规模/ 增大/ 时/ ,/ 系统/ 中/ 各种/ 操作/ 行为/ 的/ 吞吐量/ Xi/ 随之/ 增加/ ,/ 使得/ 系统/ 中/ 各类/ 服务器/ 的/ 利用率/ Ui/ 也/ 得到/ 很大/ 提高/ ./ 但是/ 负载量/ 的/ 增加/ ,/ 也/ 使得/ 系统/ 的/ 处理/ 效率/ 下降/ ,/ 操作/ 行为/ 的/ 响应/ 时间/ Ti/ 变得/ 更长/ ./ 4.3/ 仿真/ 服务/ 提供/ 节点/ 仿真/ 实验/ 分析/ 失效率/ 、/ 恢复/ 时间/ 、/ 额外/ 负载/ 和/ 失效恢复/ 成功率/ 对/ 服务/ 节点/ 模型/ 的/ 性能/ 影响/ ,/ 度量/ 属性/ 包括/ 稳态/ 时/ 任务/ “/ s/ ”/ 的/ 丢失/ 率/ L/ (/ lossratio/ )/ 、/ 吞吐/ 率/ x/ (/ throughputrate/ )/ 、/ 平均/ 响应/ 时间/ τ/ (/ mean/ 图/ 12/ 服务/ 节点/ 的/ 仿真/ w/ (/ 4/ )/ =/ 1.27/ ,/ w/ (/ 5/ )/ =/ 12.73/ ,/ w/ (/ 6/ )/ =/ 1.27/ ,/ w/ (/ 7/ )/ =/ 12.92/ ,/ w/ (/ 8/ )/ =/ 1.08/ ./ Register/ 行为/ 包含/ 8/ 个/ 操作/ ,/ 即/ 当托肯/ “/ r/ ”/ 在/ 库/ 所/ H/ 中/ 出现/ 8/ 次时/ ,/ 变迁/ t5/ 的/ 模式/ 1/ 平均/ 触发/ 7/ 次/ ,/ 而/ 模式/ 2/ 平均/ 触发/ 1/ 次/ ./ 为此/ ,/ 变迁/ t5/ 的/ 2/ 个/ 触发/ 模式/ 的/ 权值/ 的/ 一种/ 可能/ 的/ 设置/ 方案/ 如下/ :/ 服务/ 准备/ 阶段/ 的/ 性能/ 度量/ 属性/ 包括/ 稳态/ 时/ 每种/ 行为/ 的/ 吞吐量/ (/ throughput/ )/ Xi/ 和/ 响应/ 时间/ (/ responsetime/ )/ Ti/ ,/ 服务器/ 利用率/ (/ serviceutiliza/ -/ tion/ )/ Ui/ 包括/ 负载/ 均衡器/ 利用率/ ULB/ 、/ 应用服务器/ 利用率/ UAS/ 以及/ 数据库/ 服务器/ 利用率/ UDB/ ,/ 结果/ 数据/ 的/ 置信区间/ (/ c/ ./ i/ ./ )/ 为/ 95/ %/ ./ 仿真/ 结果/ 如表/ 7/ 所示/ ./ responsetime/ )/ 和/ 服务/ 节点/ 利用率/ U/ (/ servicenodeutilization/ )/ ,/ 结果/ 数据/ 的/ 置信区间/ (/ c/ ./ i/ ./ )/ 为/ 95/ %/ ./ 丢失/ 率/ L/ 指/ 任务/ 托肯/ “/ s/ ”/ 到达/ 时/ 因为/ 失效/ 而/ 没有/ 被/ 接受/ 的/ 任务/ 数量/ 占/ 到达/ 任务/ 数目/ 的/ 比率/ ./ 实验/ 仿真/ 场景/ 如图/ 12/ 所示/ ./ 采用/ 开放式/ 队列/ 模型模拟/ 一定/ 速率/ λ/ 到达/ 的/ 服务/ 请求/ ,/ 队列/ 库所/ Q/ (/ G/ // M/ // // IS/ )/ 模拟/ 稳定/ 的/ 任务/ 产生/ 源/ ,/ 队列/ 库所/ Q/ (/ G/ // M/ // // IS/ )/ 模拟/ 稳定/ 的/ 额外/ 负载/ 产生/ 源/ ./ 库所/ SC/ 用来/ 跟踪/ 和/ 描述/ 服务/ 节点/ 的/ 执行/ 状况/ ,/ 托肯/ “/ c1/ ”/ 统计/ 丢失/ 率/ L/ 和/ 吞吐/ 率/ x/ ,/ 托肯/ “/ c2/ ”/ 统计/ 服务/ 任务/ 的/ 平均/ 响应/ 时间/ τ/ ./ Page14/ 对于/ 可/ 恢复/ 的/ 服务/ ,/ 其/ 可靠性/ 的/ 主要参数/ 是/ 平均/ 失效/ 间隔时间/ (/ MeanTimeBetweenFail/ ,/ MTBF/ )/ 和/ 平均/ 恢复/ 时间/ (/ MeanTimeToRecovery/ ,/ MTTR/ )/ ./ 服务/ 节表/ 8/ 服务/ 节点/ 模型/ 犖/ 的/ 队列/ 库所/ 属性/ 表库/ 所托肯/ 初始值/ λ/ 库所托肯/ Q/ {/ s/ }/ {/ 1/ }/ 0.0005/ Q/ {/ w/ }/ F1/ {/ f1/ }/ {/ 1/ }/ 1.2/ E/ -/ 7F2/ {/ f2/ }/ R/ {/ r/ }/ {/ 0/ }/ 1.5/ E/ -/ 5NP/ {/ s/ ,/ w/ ,/ s/ ,/ w/ }/ {/ 0/ ,/ 0/ ,/ 0/ ,/ 0/ }/ 1.5/ E/ -/ 3/ ,/ 1.5/ E/ -/ 3/ ,/ 1.2/ E/ -/ 4/ ,/ 1.2/ E/ -/ 4/ 实验/ 1/ 分析/ 通信/ 失效率/ 对/ 服务/ 节点/ 模型/ 的/ 性能/ 影响/ ,/ 仿真/ 结果/ 如图/ 13/ 所示/ ./ 分析/ 实验/ 结果/ 可知/ ,/ 随着/ 通信/ 失效率/ 降低/ ,/ 即/ 通信/ 失效/ 的/ MTBF/ 变长/ ,/ 服务/ 节点/ 的/ 吞吐/ 率/ 逐渐/ 增加/ ,/ 任务/ 丢失/ 率/ 逐渐/ 下降/ ,/ 从而/ 增加/ 了/ 服务/ 节点/ 的/ 利用率/ ,/ 也/ 使得/ 节点/ 负载/ 变得/ 更高/ ./ 当/ 通信/ 失效/ 间隔时间/ MTBF/ 超过/ 1.0/ E/ +/ 06ms/ 后/ ,/ 吞吐/ 率/ 、/ 丢失/ 率/ 和/ 利用率/ 的/ 变化/ 趋于稳定/ ./ 服务/ 的/ 平均/ 响应/ 时间/ 的/ 变化/ 分为/ 3/ 个/ 阶段/ :/ (/ 1/ )/ 初期/ 时/ 呈现/ 下降/ 趋势/ ,/ 分析/ 其/ 原因/ 主要/ 是/ 通信/ 失效率/ 的/ 下降/ 使得/ 通信/ 失效恢复/ 的/ 执行/ 频率/ 降低/ ,/ 减少/ 了/ 服务/ 响应/ 过程/ 中/ 由于/ 通信/ 失效恢复/ 而/ 产生/ 的/ 等待时间/ ./ 因为/ 通信/ 失图/ 13/ 实验/ 1/ 的/ 仿真/ 结果/ 实验/ 2/ 分析/ 通信/ 失效恢复/ 时间/ 对/ 服务/ 节点/ 模型/ 的/ 性能/ 影响/ ,/ 仿真/ 结果/ 如图/ 14/ 所示/ ./ 分析/ 实验/ 结果/ 可知/ ,/ 通信/ 失效恢复/ 时间/ 的/ 延长/ ,/ 使得/ 服务/ 节点/ 的/ 有效/ 执行/ 时间/ 变短/ ,/ 节点/ 吞吐/ 率/ 和/ 利用率/ 下降/ ,/ 任务/ 丢失/ 率/ 上升/ ./ 这个/ 变化趋势/ 在/ 初期/ 是/ 比较/ 平缓/ 的/ ,/ 当/ 通信/ 失效恢复/ 时间/ MTTR/ 超过/ 1.2/ E/ +/ 06ms/ 后/ ,/ 变化/ 幅度/ 逐渐/ 增大/ ./ 服务/ 平均/ 响应/ 时间/ 的/ 变化/ 分为/ 3/ 个/ 阶段/ :/ (/ 1/ )/ 初始/ 时/ 趋于平稳/ ,/ 主要/ 原因/ 是/ 通信/ 失效恢复/ 时间/ 的/ 变长/ 虽然/ 增加/ 了/ 任务/ 的/ 平均/ 等待时间/ ,/ 但是/ 也/ 在/ 一定/ 程度/ 上/ 减少/ 了/ 进入/ 节点/ 的/ 任务/ 的/ 数量/ ,/ 点/ 模型/ N/ 中/ 队列/ 库所/ 的/ 初始/ 设置/ 如表/ 8/ 所示/ ,/ 其中/ 任务/ 到达/ 服从/ 泊松/ 分布/ ,/ 服务/ 处理/ 时间/ 和/ 失效恢复/ 时间/ 服从/ λ/ 的/ 指数分布/ ,/ 服务/ 失效恢复/ 的/ 成功率/ 为/ 99.9/ %/ ./ 效/ 恢复/ 时间/ 相对/ 节点/ 的/ 处理/ 时间/ 要长/ ,/ 所以/ 实际/ 的/ 服务/ 平均/ 响应/ 时间/ 反而/ 下降/ 了/ ./ (/ 2/ )/ 当/ 通信/ 的/ MTBF/ 超过/ 1.0/ E/ +/ 06ms/ 后/ ,/ 响应/ 时间/ 开始/ 了/ 增加/ 趋势/ ,/ 分析/ 其/ 原因/ 主要/ 是/ 失效恢复/ 时间/ 在/ 平均/ 响应/ 时间/ 中所/ 占/ 的/ 比重/ 逐渐/ 下降/ ,/ 而/ 由于/ 节点/ 负载/ 增加/ 造成/ 的/ 等待时间/ 增加/ 的/ 影响/ 增强/ ,/ 导致/ 服务/ 平均/ 响应/ 时间/ 开始/ 增加/ ./ (/ 3/ )/ 当/ 通信/ 的/ MTBF/ 超过/ 2.0/ E/ +/ 09ms/ 后/ ,/ 服务/ 平均/ 响应/ 时间/ 下降/ 并/ 保持稳定/ ,/ 分析/ 其/ 原因/ 是/ 此时/ 的/ 通信/ MTBF/ 时间/ 接近/ 初始/ 设置/ 的/ 仿真/ 实验/ 时间/ 范围/ ,/ 使得/ 通信/ 失效/ 发生/ 的/ 概率/ 几乎/ 为/ 零/ ,/ 其/ 平均/ 响应/ 时间/ 只/ 与/ 相对/ 稳定/ 的/ 节点/ 负载/ 和/ 处理/ 能力/ 有关/ ./ 降低/ 了/ 节点/ 负载/ ,/ 减少/ 了/ 任务/ 在/ 节点/ 中/ 的/ 平均/ 逗留/ 时间/ ,/ 因此/ 综合/ 影响/ 后/ 的/ 服务/ 平均/ 响应/ 时间/ 变化/ 平缓/ ./ (/ 2/ )/ 当/ 通信/ MTTR/ 超过/ 1.2/ E/ +/ 06ms/ 后/ ,/ 较长/ 的/ 失效恢复/ 时间/ 的/ 影响力/ 变/ 大/ ,/ 导致/ 服务/ 平均/ 响应/ 时间/ 变长/ ./ (/ 3/ )/ 当/ 通信/ MTTR/ 超过/ 5E/ +/ 09ms/ 后/ ,/ 由于/ 接近/ 初始/ 设置/ 的/ 仿真/ 实验/ 时间/ 范围/ ,/ 使得/ 通信/ 失效/ 发生/ 的/ 概率/ 几乎/ 为/ 零/ ,/ 其/ 平均/ 响应/ 时间/ 只/ 与/ 相对/ 稳定/ 的/ 节点/ 负载/ 和/ 处理/ 能力/ 有关/ ./ 比较/ 实验/ 1/ 和/ 实验/ 2/ 的/ 仿真/ 结果/ ,/ 可以/ 发现/ 其/ 对/ 服务/ 节点/ 模型/ 的/ 性能/ 分析/ 结果/ 是/ 一致/ 的/ ./ Page15/ 图/ 14/ 实验/ 2/ 的/ 仿真/ 结果/ 实验/ 3/ 分析/ 计算/ 失效率/ 对/ 服务/ 节点/ 模型/ 的/ 性能/ 影响/ ,/ 仿真/ 结果/ 如图/ 15/ 所示/ ./ 分析/ 实验/ 结果/ 可知/ ,/ 随着/ 计算/ 失效率/ 降低/ ,/ 计算/ 失效/ 的/ MTBF/ 变长/ ./ 初始/ 时/ ,/ 计算/ 失效率/ 很/ 高/ ,/ 对应/ 的/ MTBF/ 很大/ ,/ 服务/ 节点/ 的/ 吞吐/ 率/ 保持/ 在/ 一个/ 较/ 低/ 的/ 水平/ ,/ 平均/ 响应/ 时间/ 很大/ ,/ 节点/ 处于/ 满/ 负载/ 工作/ 状态/ ,/ 任务/ 丢失/ 率/ 接近/ 40/ %/ ./ 当/ MTBF/ 上升/ 到/ 5.0/ E/ +/ 3ms/ 左右/ 时/ ,/ 节点/ 吞吐/ 率/ 快速/ 上升/ ,/ 节点/ 利用率/ 和/ 任务/ 丢失/ 率/ 快速/ 下降/ ,/ 图/ 15/ 实验/ 3/ 的/ 仿真/ 结果/ 实验/ 4/ 分析/ 计算/ 失效恢复/ 时间/ 对/ 服务/ 节点/ 模型/ 的/ 性能/ 影响/ ,/ 仿真/ 结果/ 如图/ 16/ 所示/ ./ 分析/ 实验/ 结果/ 可知/ ,/ 随着/ 计算/ 失效恢复/ 时间/ MTTR/ 变长/ ,/ 服务/ 任务/ 在/ 节点/ 中/ 的/ 逗留/ 时间/ 变/ 长/ ,/ 因此/ 增加/ 了/ 节点/ 的/ 利用率/ 和/ 负载/ ,/ 造成/ 了/ 平均/ 响应/ 时间/ 的/ 增加/ ./ 由于/ 计算/ 失效/ 和/ 计算/ 失效恢复/ 之间/ 是/ 独立/ 发生/ 的/ ,/ 因此/ 失效恢复/ 时间/ MTTR/ 对/ 吞吐/ 率/ 和/ 丢失/ 率/ 的/ 影响/ 是/ 间接/ 平均/ 响应/ 时间/ 快速/ 下降/ ,/ 随后/ 又/ 保持/ 相对/ 平稳/ 的/ 变化趋势/ ./ 分析/ 其/ 原因/ ,/ 主要/ 是/ 当/ 失效率/ 较/ 高时/ ,/ 服务/ 节点/ 需要/ 执行/ 大量/ 的/ 恢复/ 处理程序/ ,/ 使得/ 节点/ 处于/ 满负荷/ 工作/ 状态/ ,/ 因此/ 所有/ 性能指标/ 都/ 处于/ 低谷/ ;/ 当时/ 失效率/ 降低/ 到/ 一个/ 门/ 限值/ 时/ ,/ 节点/ 负载/ 减轻/ ,/ 各个/ 性能指标/ 都/ 得到/ 恢复/ ;/ 但是/ 当/ 失效/ 发生/ 间隔/ MTBF/ 超过/ 了/ 平均/ 响应/ 时间/ 时/ ,/ 其/ 影响/ 变小/ ,/ 因此/ 性能指标/ 的/ 变化/ 又/ 趋于平稳/ ./ 的/ ,/ 其/ 表现/ 为/ 在/ 一定/ 范围/ 内/ 的/ 上下/ 波动/ ./ 实验/ 5/ 分析/ 额外/ 负载/ “/ w/ ”/ 对/ 服务/ 节点/ 模型/ 性能/ 的/ 影响/ ,/ 仿真/ 结果/ 如图/ 17/ 所示/ ./ 分析/ 实验/ 结果/ 可知/ ,/ 只有/ 当/ 额外/ 负载/ “/ w/ ”/ 到达/ 率/ 很/ 高时/ ,/ 节点/ 利用率/ 和/ 负载/ 处于/ 较/ 高水平/ ,/ 使得/ 任务/ “/ s/ ”/ 的/ 吞吐/ 率/ 很/ 低/ ,/ 平均/ 响应/ 时间/ 很长/ ,/ 任务/ 丢失/ 率/ 很/ 高/ ./ 但是/ 当/ “/ w/ ”/ 到达/ 时间/ 间隔/ 增加/ 500ms/ 以后/ ,/ 即/ “/ s/ ”/ 到达/ 时间/ 间隔/ (/ 2000ms/ )/ Page16/ 的/ 1/ // 4/ ,/ 额外/ 负载/ “/ w/ ”/ 对/ “/ s/ ”/ 的/ 影响/ 就/ 变得/ 很小/ 了/ ./ 实验/ 6/ 分析/ 计算/ 失效恢复/ 成功率/ 对/ 服务/ 节点/ 模型/ 的/ 性能/ 影响/ ,/ 仿真/ 结果/ 如图/ 18/ 所示/ ./ 分析/ 实验/ 结图/ 16/ 实验/ 4/ 的/ 仿真/ 结果/ 图/ 17/ 实验/ 5/ 的/ 仿真/ 结果/ 图/ 18/ 实验/ 6/ 的/ 仿真/ 结果/ 果/ 可知/ ,/ 随着/ 计算/ 失效恢复/ 成功率/ 的/ 不断/ 提高/ ,/ 任务/ 丢失/ 率/ 逐渐/ 下降/ ./ 而/ 其它/ 性能参数/ 基本/ 不受/ 其/ 影响/ ,/ 只是/ 在/ 一个/ 较/ 小/ 范围/ 内/ 上下/ 波动/ ./ Page174/ ./ 4/ 仿真/ 服务/ 交互/ 关系/ 不同/ 交互/ 关系/ 下/ 的/ 性能/ 与/ 可靠性/ 指标/ 的/ 度量/ 方式/ 是/ 不同/ 的/ ./ 根据/ 性质/ 的/ 不同/ ,/ 可/ 分为/ 可加性/ 度量/ 、/ 可乘性/ 度量/ 、/ 最小/ 性/ 度量/ 和/ 最大/ 性/ 度量/ 4/ 类/ ./ 比如/ ,/ 顺序/ 关系/ 下/ 的/ 响应/ 时间/ 具有/ 可加性/ ,/ 可靠性/ 具有/ 可乘性/ ;/ 并发/ 关系/ 下/ 的/ 响应/ 时间/ 具有/ 最大/ 性/ ,/ 可靠性/ 具有/ 可乘性/ ;/ 重复/ 关系/ 可以/ 看成/ 是/ 连续/ 多个/ 顺序/ 结构/ ;/ 条件/ 关系/ 下/ 的/ 选择/ 概率/ 对/ 性能/ 和/ 可靠性/ 指标/ 的/ 影响/ 很大/ ;/ 而/ 容错/ 关系/ 下/ 的/ 不同/ 结构/ 使得/ 度量/ 属性/ 的/ 计算/ 更加/ 复杂/ ./ 因此/ ,/ 当/ 组合/ 服务/ 的/ 规模/ 和/ 交互/ 分支/ 增加/ 时/ ,/ 很难/ 直接/ 推导/ 出/ 通用/ 的/ 组合/ 服务/ 性能/ 属性/ 和表/ 9/ 服务/ 节点/ 模型/ 犖/ 的/ 队列/ 库所/ 属性/ 表库/ 所托肯/ 初始值/ λ/ 库所托肯/ F1/ {/ f1/ }/ {/ 1/ }/ 1.2/ E/ -/ 8F2/ {/ f2/ }/ R/ {/ r/ }/ {/ 0/ }/ 1.5/ E/ -/ 5NP/ {/ s/ ,/ w/ ,/ s/ ,/ w/ }/ {/ 0/ ,/ 0/ ,/ 0/ ,/ 0/ }/ 3.5/ E/ -/ 3/ ,/ 3.5/ E/ -/ 3/ ,/ 1.5/ E/ -/ 4/ ,/ 1.5/ E/ -/ 4/ 置/ 一致/ ,/ 但是/ 实际/ 进入/ 到/ N/ 中/ 的/ 任务量/ 较/ 少/ ,/ 负载/ 不同/ 交互/ 关系/ 下/ 吞吐/ 率/ 的/ 比较/ 结果/ 如图/ 19/ 所较/ 轻/ ,/ 因此/ N/ 的/ 平均/ 响应/ 时间/ 要/ 比/ N/ 的/ 短/ ,/ 而示/ ./ 分析/ 实验/ 结果/ 可知/ :/ (/ 1/ )/ 在/ 并发/ 关系/ 下/ ,/ 虽然/ N/ “/ N/ -/ -/ N/ ”/ 的/ 平均/ 响应/ 时间/ 要/ 比/ N/ 的/ 略/ 高/ ./ (/ 4/ )/ 在/ 重复/ 和/ N/ 的/ 处理/ 能力/ 不同/ ,/ 但/ 两者/ 的/ 吞吐/ 率/ 基本相同/ ,/ 关系/ 下/ ,/ 因为/ 需要/ 在/ N/ 中/ 重复/ 执行/ k/ =/ 5/ 次/ ,/ 因此/ 而/ “/ N/ |/ N/ ”/ 的/ 吞吐/ 率/ 与/ 较/ 低/ 的/ xN/ 更/ 接近/ ./ (/ 2/ )/ 在/ 条/ “/ μ/ N/ ”/ 的/ 平均/ 响应/ 时间/ 几乎/ 是/ N/ 的/ 平均/ 响应/ 时间/ 的/ 件/ 关系/ 下/ ,/ 选择/ 概率/ 高/ 的/ N/ 的/ 吞吐/ 率要/ 高于/ N/ ,/ 而/ “/ N/ +/ N/ ”/ 的/ 吞吐/ 率/ 是/ 两者/ 吞吐/ 率/ 之/ 和/ ./ (/ 3/ )/ 在/ 容错/ 5/ 倍/ ./ 关系/ 下/ ,/ 只有/ 当/ N/ 出现/ 失效/ 时/ ,/ 服务/ 任务/ 才/ 会/ 进入/ 不同/ 交互/ 关系/ 下/ 丢失/ 率/ 的/ 比较/ 结果/ 如图/ 21/ 到/ N/ 中/ ,/ 因此/ N/ 的/ 吞吐/ 率/ 比/ N/ 的/ 高出/ 差不多/ 两个/ 数量级/ ,/ 而/ “/ N/ -/ -/ N/ ”/ 的/ 吞吐/ 率/ 近似/ 为/ 两者/ 吞吐/ 率/ 之/ 和/ ./ (/ 4/ )/ 在/ 重复/ 关系/ 下/ ,/ 因为/ 需要/ 在/ N/ 中/ 重复/ 执行/ k/ =/ 5/ 次/ ,/ 因此/ “/ μ/ N/ ”/ 的/ 吞吐/ 率/ 差不多/ 是/ N/ 的/ 吞吐/ 率/ 的/ 五分之一/ ./ 不同/ 交互/ 关系/ 下/ 平均/ 响应/ 时间/ 的/ 比较/ 结果/ 如图/ 20/ 所示/ ./ 分析/ 实验/ 结果/ 可知/ :/ (/ 1/ )/ 在/ 并发/ 关系/ 下/ ,/ 由于/ N/ 的/ 处理/ 能力/ 比/ N/ 强/ ,/ 因此/ N/ 的/ 平均/ 响应/ 时间/ 要/ 比/ N/ 短/ ;/ 但是/ “/ N/ |/ N/ ”/ 的/ 平均/ 响应/ 时间/ 比/ N/ 还要/ 长/ ,/ 分析/ 其/ 原因/ 是/ ,/ N/ 和/ N/ 的/ 通信/ 失效/ 发生率/ 不/ 同步/ ,/ 使得/ 并发/ 关系/ 下/ 的/ 关联失效/ 放大/ 了/ 失效恢复/ 时间/ 的/ 影响/ ./ (/ 2/ )/ 在/ 条件/ 关系/ 下/ ,/ 选择/ 概率/ 高/ 的/ N/ 的/ 吞吐/ 率要/ 高于/ N/ ,/ 而/ “/ N/ +/ N/ ”/ 的/ 吞吐/ 率/ 是/ 两者/ 吞吐/ 率/ 之/ 和/ ./ (/ 3/ )/ 在/ 容错/ 关系/ 下/ ,/ 虽然/ N/ 和/ N/ 的/ 基本/ 配/ 可靠性/ 的/ 度量/ 公式/ ,/ 更/ 不用说/ 量化/ 考虑/ 失效/ 和/ 恢复/ 影响/ 的/ 服务/ 性能/ 属性/ ./ 为了/ 分析/ 不同/ 交互/ 关系/ 下/ 的/ 服务/ 节点/ 模型/ 的/ 性能/ 表现/ ,/ 引入/ 一个/ 新/ 的/ 服务/ 节点/ 模型/ N/ ,/ 其中/ 的/ 队列/ 库所/ 的/ 初始/ 设置/ 如表/ 9/ 所示/ ,/ 其中/ 任务/ 到达/ 服从/ 泊松/ 分布/ ,/ 服务/ 处理/ 时间/ 和/ 失效恢复/ 时间/ 服从/ λ/ 的/ 指数分布/ ,/ 服务/ 失效恢复/ 的/ 成功/ 概率/ 为/ 99.9/ %/ ./ 条件/ 交互/ 下/ N/ 和/ N/ 的/ 选择/ 概率/ 分别/ 为/ 70/ %/ 和/ 30/ %/ ./ 容错/ 关系/ 下/ 的/ N/ 具有/ 和/ N/ 一样/ 的/ 配置/ ./ 重复/ 关系/ 的/ 重复/ 次数/ k/ =/ 5/ ./ 所示/ ./ 图/ 20/ 不同/ 交互/ 关系/ 下/ 平均/ 响应/ 时间/ 的/ 比较/ 分析/ 实验/ 结果/ 可知/ :/ (/ 1/ )/ 在/ 并发/ 关系/ 下/ ,/ 由于/ N/ 的/ 通信/ 失效/ 发生率/ 低于/ N/ ,/ 因此/ N/ 中/ 丢失/ 的/ 任务/ 数目/ 较/ 少/ ,/ 所以/ N/ 的/ 丢失/ 率/ 比/ N/ 的/ 低/ 不少/ ,/ 而/ “/ N/ |/ N/ ”/ 的/ 丢失/ 率/ 与/ 较/ 高/ 的/ N/ 的/ 丢失/ 率/ 接近/ ./ (/ 2/ )/ 在/ 条件/ 关系/ 下/ ,/ N/ 具有/ 较/ 低/ 的/ 通信/ 失效/ 发生率/ ,/ 同时/ Page18/ 被/ 选择/ 的/ 概率/ 也/ 比较/ 低/ ,/ 因此/ N/ 的/ 丢失/ 率要/ 明显/ 低于/ N/ ;/ 而/ “/ N/ +/ N/ ”/ 的/ 丢失/ 率/ 近似/ 满足/ (/ LN/ ×/ 70/ %/ +/ LN/ ×/ 30/ %/ )/ 的/ 约束/ 关系/ ./ (/ 3/ )/ 在/ 容错/ 关系/ 下/ ,/ 虽然/ 实际/ 进入/ 到/ N/ 中/ 的/ 任务量/ 较/ 少/ ,/ 但是/ N/ 和/ N/ 具有/ 相同/ 的/ 失效/ 发生率/ ,/ 所以/ N/ 的/ 丢失/ 率/ 和/ N/ 的/ 丢失/ 率/ 差不多/ ;/ 由于/ N/ 对/ N/ 中/ 的/ 失效/ 任务/ 进行/ 恢复/ 执行/ ,/ 因此/ “/ N/ -/ -/ N/ ”/ 的/ 丢失/ 率/ 降低/ 到/ 0.0062/ %/ ./ (/ 4/ )/ 在/ 重复/ 关系/ 下/ ,/ N/ 和/ “/ μ/ N/ ”/ 对/ 失效/ 的/ 处理/ 是/ 同步/ 的/ ,/ 因此/ 两表/ 10/ 服务/ 提供/ 阶段/ 的/ 分析/ 结果/ S5/ ./ 1/ 子/ 服务/ S1/ ./ 14.96/ E/ -/ 04878.95/ (/ +/ // -/ 0.76/ )/ 0.814/ ./ 96E/ -/ 04878.87/ (/ +/ // -/ 0.73/ )/ 0.79/ S2/ ./ 14.10/ E/ -/ 04741.13/ (/ +/ // -/ 0.60/ )/ 0.794/ ./ 10E/ -/ 04740.99/ (/ +/ // -/ 0.57/ )/ 0.81/ S3/ ./ 28.19/ E/ -/ 05698.61/ (/ +/ // -/ 1.11/ )/ 0.798/ ./ 20E/ -/ 05699.06/ (/ +/ // -/ 1.10/ )/ 0.80/ S2/ ./ 1/ +/ S3/ ./ 24.92/ E/ -/ 04734.05/ (/ +/ // -/ 0.53/ )/ 0.794/ ./ 92E/ -/ 04734.00/ (/ +/ // -/ 0.51/ )/ 0.81/ S4/ ./ 12.44/ E/ -/ 0372853.64/ (/ +/ // -/ 2033.18/ )/ 0.802/ ./ 44E/ -/ 0373031.26/ (/ +/ // -/ 1648.66/ )/ 0.80/ μ/ S4/ ./ 1/ (/ 5/ )/ 4.88/ E/ -/ 04374629.08/ (/ +/ // -/ 3518.50/ )/ 0.804/ ./ 88E/ -/ 04376140.54/ (/ +/ // -/ 1834.21/ )/ 0.80/ S5/ ./ 14.84/ E/ -/ 04729.60/ (/ +/ // -/ 1.38/ )/ 0.784/ ./ 84E/ -/ 04735.42/ (/ +/ // -/ 1.89/ )/ 0.77/ S6/ ./ 13.80/ E/ -/ 06721.55/ (/ +/ // -/ 11.62/ )/ 0.833/ ./ 72E/ -/ 06729.03/ (/ +/ // -/ 14.04/ )/ 0.87/ -/ -/ S6/ ./ 14.88/ E/ -/ 04729.54/ (/ +/ // -/ 1.37/ )/ 0.014/ ./ 88E/ -/ 04735.37/ (/ +/ // -/ 1.89/ )/ 0.01/ S7/ ./ 14.84/ E/ -/ 04728.58/ (/ +/ // -/ 0.92/ )/ 0.804/ ./ 84E/ -/ 04722.95/ (/ +/ // -/ 0.67/ )/ 0.81/ S8/ ./ 24.84/ E/ -/ 04291.49/ (/ +/ // -/ 0.26/ )/ 0.764/ ./ 84E/ -/ 04291.09/ (/ +/ // -/ 0.26/ )/ 0.80/ S7/ ./ 1/ |/ S8/ ./ 24.84/ E/ -/ 04810.78/ (/ +/ // -/ 131.68/ )/ 0.804/ ./ 84E/ -/ 041500.39/ (/ +/ // -/ 618.68/ )/ 0.81/ S1/ ./ 24.82/ E/ -/ 04847.06/ (/ +/ // -/ 1.11/ )/ 0.424/ ./ 82E/ -/ 04842.75/ (/ +/ // -/ 0.91/ )/ 0.42/ CoS4/ ./ 82E/ -/ 04379643.75/ 组合/ 服务/ 的/ 集中/ 执行/ 过程/ 中/ ,/ 需要/ 多次/ 和/ 服务/ 代理/ 库所/ CB/ 进行/ 交互/ ,/ 完成/ 对托肯/ “/ z1/ ”/ ,/ “/ z2/ ”/ ,/ …/ ,/ “/ z6/ ”/ 和/ “/ z7/ ”/ 的/ 处理/ ./ 令/ 对应/ 的/ 平均/ 处理/ 时间/ 表示/ 为/ τ/ (/ zi/ )/ ,/ 其中/ i/ =/ 1/ ,/ 2/ ,/ …/ ,/ 7/ ./ 本例/ 的/ 仿真/ 结果/ 为/ τ/ (/ z1/ )/ =/ 149.72/ ms/ ,/ τ/ (/ z2/ )/ =/ 150.14/ ms/ ,/ τ/ (/ z3/ )/ =/ 150.30/ ms/ ,/ τ/ (/ z4/ )/ =/ 143.74/ ms/ ,/ τ/ (/ z5/ )/ =/ 138.75/ ms/ ,/ τ/ (/ z6/ )/ =/ 139.12/ ms/ ,/ τ/ (/ z7/ )/ =/ 142.52/ ms/ ./ 那么/ 可以/ 近似计算/ 出/ 集中/ 执行/ 的/ 组合/ 服务/ CoS/ 的/ 平均/ 响应/ 时间/ 为/ τ/ (/ CoS/ )/ =/ τ/ (/ S1/ ./ 1/ )/ +/ τ/ (/ S2/ ./ 1/ +/ S3/ ./ 2/ )/ +/ τ/ (/ μ/ S4/ ./ 1/ (/ 5/ )/ )/ +/ 组合/ 服务/ 的/ 分散/ 执行/ 过程/ 中/ ,/ 只是/ 在/ 初始/ 的/ 任务/ 调用/ 和/ 最后/ 的/ 结果/ 汇总/ 时才/ 会/ 和/ 服务/ 代理/ DB/ 进行/ 交互/ ,/ 分别/ 用托肯/ “/ S/ ”/ 和/ “/ S/ ”/ 表示/ ./ 本例/ 的/ 仿真/ 结果/ 为/ τ/ (/ S/ )/ =/ 110.75/ ms/ ,/ τ/ (/ S/ )/ =/ 108.87/ ms/ ./ 那么/ 可以/ 近似计算/ 出/ 分散/ 执行/ 的/ 组合/ 服务/ CoS/ =/ 379643.75/ ms/ ./ 的/ 平均/ 响应/ 时间/ 为者/ 具有/ 一致/ 的/ 丢失/ 率/ ./ 4.5/ 仿真/ 服务/ 提供/ 阶段/ 服务/ 提供/ 阶段/ 的/ 性能/ 度量/ 属性/ 包括/ 稳态/ 时/ 的/ 子/ 服务/ Si/ ./ j/ 和/ 组合/ 服务/ S/ 的/ 吞吐/ 率/ x/ 、/ 响应/ 时间/ T/ 和/ 任务/ 丢失/ 率/ L/ ,/ 结果/ 数据/ 的/ 置信区间/ (/ c/ ./ i/ ./ )/ 为/ 95/ %/ ./ 对/ 组合/ 服务/ “/ S1/ ./ 1/ >/ S2/ ./ 1/ (/ p/ )/ +/ S3/ ./ 2/ (/ 1/ -/ p/ )/ >/ μ/ S4/ ./ 1/ (/ k/ )/ >/ (/ S5/ ./ 1/ -/ -/ S6/ ./ 1/ )/ >/ (/ S7/ ./ 1/ |/ S8/ ./ 2/ )/ >/ S1/ ./ 2/ ”/ 分别/ 按照/ 集中/ 和/ 分散/ 方式/ 进行/ 仿真/ 的/ 结果/ 如表/ 10/ 所示/ ./ τ/ (/ CoS/ )/ =/ τ/ (/ S1/ ./ 1/ )/ +/ τ/ (/ S2/ ./ 1/ +/ S3/ ./ 2/ )/ +/ τ/ (/ μ/ S4/ ./ 1/ (/ 5/ )/ )/ +/ τ/ (/ S5/ ./ 1/ =/ 381051.55/ ms/ ./ 一般来讲/ ,/ 吞吐/ 率/ 通常/ 用于/ 度量/ 小规模/ 、/ 耗时/ 短/ 的/ 小型/ 软件系统/ ,/ 或者/ 单个/ 软件/ 模块/ 的/ 性能/ ,/ 而/ 响应/ 则/ 适合/ 度量/ 规模/ 较大/ 、/ 执行/ 过程/ 较/ 复杂/ 的/ 系统/ 的/ 性能/ ./ 比较/ 相同/ 配置/ 下/ 组合/ 服务/ 的/ 两种/ 执行/ 方式/ 可知/ ,/ 它们/ 的/ 吞吐/ 率/ 相同/ ,/ 集中/ 方式/ 下/ 的/ 任务/ 丢失/ 率/ 较/ 高/ ,/ 而/ 分散/ 执行/ 方式/ 下/ 的/ 平均/ 响应/ 时间/ 较长/ ./ 分析/ 其/ 原因/ ,/ 主要/ 是/ 在/ 稳定/ 的/ 外部/ 任务/ 源/ 输入/ 的/ 情况/ 下/ ,/ 丢失/ 率低/ 表明/ 实际/ 处理/ 的/ 任务/ 数量/ 多/ ,/ 因此/ 服务/ 处理/ 时间/ 有所增加/ ./ 5/ 相关/ 工作/ 目前/ ,/ 国内外/ 关于/ 服务/ 系统/ 的/ 性能/ 分析/ 问题/ 的/ 研究/ 还/ 处于/ 初步阶段/ ./ 文献/ [/ 21/ ]/ 提出/ 了/ 对/ 组合/ 的/ Web/ 服务/ 的/ 性能/ 和/ 可靠性/ 瓶颈/ 进行/ 闭环/ 分析/ 的/ 随机/ 模型/ 方法/ ./ 文献/ [/ 22/ ]/ 使用/ 扩展/ 的/ 广义/ 随机/ Petri/ 网/ (/ ExtendedGeneralizedStochasticPetriNet/ ,/ EGSPN/ )/ 建模/ 服务/ 组合/ 系统/ 的/ 性能/ ,/ 并且/ 设计/ 了/ 模型/ 化简/ 规则/ 和/ 算法/ 以/ 解决/ 状态/ 空间/ 爆炸/ 问题/ ./ 文/ Page19/ 献/ [/ 23/ ]/ 使用/ 一组/ 模糊/ 微分/ 函数/ 描述/ 服务/ 组合/ 及其/ 性能/ ,/ 并/ 通过/ 平行/ 算法/ 来/ 完成/ 公式/ 的/ 计算/ ./ 文献/ [/ 24/ ]/ 提出/ 了/ 一种/ 云/ 计算/ 平台/ 性能/ 评价/ 的/ 框架/ C/ -/ Meter/ ,/ 并/ 在/ 亚马逊/ 弹性/ 计算/ 云上/ 进行/ 了/ 初步/ 的/ 测试/ ./ 文献/ [/ 25/ ]/ 给出/ 了/ 云/ 计算/ 性能/ 预测/ 的/ 计算方法/ ,/ 但是/ 缺乏/ 相关/ 的/ 实验/ 数据/ 作为/ 验证/ 标准/ ./ 文献/ [/ 26/ ]/ 分析/ 了/ 提供/ 多任务/ 科学计算/ 的/ 云/ 计算/ 服务/ 的/ 性能/ ./ 文献/ [/ 27/ ]/ 提出/ 了/ 一种/ 轻量级/ 的/ 企业/ 服务/ 总线/ 测试/ 框架/ ./ 文献/ [/ 28/ ]/ 使用/ 队列/ 网络/ 模型/ 预测/ 企业/ 服务/ 总线/ 的/ 响应/ 时间/ ,/ 但/ 该/ 模型/ 无法/ 涵盖/ 一些/ 经典/ 的/ 企业/ 服务/ 总线/ 应用/ 模式/ (/ 如/ 消息/ 的/ 分裂/ 和/ 聚合/ 等/ )/ ./ 文献/ [/ 29/ ]/ 研究/ 了/ QoS/ 感知/ 的/ 面向/ 服务/ 体系结构/ 的/ 性能/ 问题/ ./ 文献/ [/ 30/ ]/ 通过/ 随机/ Petri/ 网/ 评价/ 面向/ 服务/ 体系结构/ 的/ 性能/ ,/ 但是/ 准确性/ 会/ 随着/ 负载/ 的/ 增加/ 而/ 降低/ ./ 由此可见/ ,/ 已有/ 研究/ 有些/ 是/ 针对/ 特定/ 的/ 封闭式/ 系统/ ,/ 有些/ 使用/ 的/ 模型/ 相对/ 简单/ ,/ 不能/ 充分反映/ 大规模/ 复杂/ 服务/ 系统/ 的/ 特性/ ./ 排队/ 网/ 模型/ 是/ 一种/ 确定性/ 的/ 网络/ 建模/ 工具/ [/ 31/ ]/ ./ Das/ 等/ 人/ [/ 32/ ]/ 使用/ 分层/ 排队/ 网对/ 多层/ 服务/ 系统/ 的/ 性能/ 和/ 可靠性/ 进行/ 了/ 建模/ ,/ 并/ 给出/ 了/ 基于/ 马尔科夫/ 链/ (/ MarkovChain/ )/ 的/ 分析方法/ ./ 但是/ 由于/ 存在/ 信息量/ 小/ 、/ 无/ 结构化/ 机制/ 的/ 弊端/ ,/ 排队模型/ 只/ 被/ 应用/ 于/ 较为简单/ 的/ 情况/ ./ 文献/ [/ 17/ ]/ 采用/ 排队/ 网/ (/ Queuenetwork/ )/ 分析/ 了/ 失效/ 影响/ 下/ 的/ 多层/ Web/ 服务/ 的/ 性能/ ,/ 但是/ 基于/ 乘积/ 网络/ (/ product/ -/ formnetwork/ )/ 的/ 假设/ 限制/ 了/ 该/ 方法/ 的/ 适用范围/ ./ 随机/ Petri/ 网/ [/ 7/ ]/ 易于/ 对系统/ 状态/ 进行/ 全面/ 有效/ 的/ 描述/ ,/ 精确/ 刻画/ 系统/ 的/ 不/ 确定/ 行为/ 以及/ 行为/ 组合/ 关系/ ,/ 便于/ 计算/ 各种/ 分析/ 指标/ ,/ 非常适合/ 描述/ Web/ 服务/ 这种/ 松/ 耦合/ 的/ 分布式系统/ ./ Bernardi/ 等/ 人/ [/ 33/ ]/ 对/ 基于/ 概率模型/ 的/ 可信赖/ 性/ 评价/ 方法/ 进行/ 了/ 研究/ ,/ 并/ 给出/ 了/ 利用/ 随机/ Petri/ 网对/ 复杂/ 系统/ 进行/ 建模/ 和/ 评价/ 的/ 方法/ ./ 林闯/ 等/ 人/ [/ 19/ ]/ 研究/ 了/ 随机/ Petri/ 网对/ 网络系统/ 可信赖/ 性/ 建模/ 分析/ 的/ 方法/ 和/ 步骤/ ,/ 着重/ 研究/ 了/ 随机/ Petri/ 网/ 描述/ 系统/ 的/ 服务/ 失效/ 模型/ 和/ 容错/ 模型/ ,/ 并/ 给出/ 了/ 网络/ 可信赖/ 性/ 分析/ 中/ 主要/ 指标/ 的/ 计算方法/ ./ 排队/ Petri/ 网/ 继承/ 和/ 发展/ 了/ 排队/ 网/ 模型/ 和/ 随机/ Petri/ 网/ 的/ 优点/ ,/ 能够/ 更好/ 地/ 描述/ 复杂/ 的/ 服务/ 系统/ 的/ 性能/ 表现/ [/ 9/ -/ 11/ ]/ ./ 因此/ ,/ 本文/ 从/ 通用/ 的/ 角度/ 出发/ ,/ 通过/ 分析/ 服务/ 系统/ 的/ 运行/ 过程/ ,/ 研究/ 并/ 提出/ 了/ 一种/ 基于/ 排队/ Petri/ 网/ 的/ 性能/ 建模/ 和/ 分析方法/ ./ 6/ 结论/ 随着/ 信息/ 服务/ 的/ 不断/ 演化/ ,/ 以/ 面向/ 服务/ 为/ 基础/ 的/ 服务/ 系统/ 呈现出/ 规模/ 扩大化/ 、/ 结构/ 复杂化/ 、/ 状态/ 动态化/ 的/ 趋势/ ,/ 常用/ 的/ 性能/ 评价/ 形式化/ 工具/ 逐渐/ 显出/ 能力/ 上/ 的/ 差异/ ./ 本文/ 在/ 分析/ 服务/ 系统/ 运行/ 过程/ 和/ 交互/ 关系/ 的/ 基础/ 上/ ,/ 提出/ 服务/ 准备/ 和/ 服务/ 提供/ 两个/ 阶段/ ./ 服务/ 准备/ 阶段/ 的/ 运行/ 环境/ 由/ 负载/ 均衡器/ 、/ 应用服务器/ 集群/ 和/ 数据库/ 服务器/ 构成/ ,/ 其/ 建模/ 方法/ 类似/ 多层/ Web/ 系统/ ./ 服务/ 准备/ 阶段/ 中/ 的/ 消费者/ 和/ 服务提供者/ 的/ 访问/ 行为/ 被/ 归纳/ 为/ Browse/ ,/ Select/ ,/ Composite/ 和/ Register4/ 类/ ,/ 每类/ 都/ 由/ 若干/ 操作/ 组成/ ./ 通过/ 对/ 各种/ 行为/ 在/ 服务/ 准备/ 阶段/ 的/ 刻画/ ,/ 完成/ 了/ 服务/ 准备/ 阶段/ 的/ QPN/ 建模/ ./ 服务/ 提供/ 阶段/ 由/ 多个/ 服务/ 节点/ 按照/ 业务流程/ 要求/ 以/ 组合/ 方式/ 向/ 消费者/ 提供/ 服务/ ./ 对/ 服务/ 提供/ 阶段/ 的/ 建模/ ,/ 除了/ 考虑/ 到/ 不同/ 交互/ 关系/ (/ 顺序/ 、/ 重复/ 、/ 并发/ 、/ 容错/ 、/ 条件/ )/ 外/ ,/ 还要/ 考虑/ 时间/ 约束/ 、/ 自动化/ 要求/ 、/ 驻留/ 节点/ 的/ 物理/ 位置/ 和/ 节点/ 失效恢复/ 的/ 影响/ ./ 在/ 此基础/ 上/ ,/ 应用/ QPME/ 软件包/ 对/ 服务/ 准备/ 阶段/ 性能/ 模型/ 和/ 服务/ 提供/ 性能/ 阶段/ 模型/ 进行/ 了/ 仿真/ ./ 模型/ 的/ 使用/ 过程/ 中/ 可以/ 设置/ 不同/ 的/ 访问/ 规模/ 、/ 更/ 复杂/ 的/ 服务/ 流程/ 、/ 更/ 多/ 的/ 环境参数/ ,/ 构建/ 出/ 反映/ 不同/ 应用/ 需求/ 和/ 环境/ 配置/ 的/ 服务/ 系统/ 应用/ 场景/ ./ 实验/ 结果表明/ 所/ 提出/ 的/ 建模/ 和/ 分析方法/ 具有/ 很/ 好/ 的/ 有效性/ 和/ 可扩展性/ ./ 与/ 现有/ 的/ 服务/ 系统/ 性能/ 分析方法/ 相比/ ,/ 本文/ 所提/ 方法/ 对/ 服务/ 系统/ 性能/ 的/ 建模/ 更/ 全面/ ,/ 不但/ 考虑/ 到/ 服务/ 准备/ 阶段/ 的/ 浏览/ 、/ 注册/ 和/ 组合/ 行为/ ,/ 而且/ 考虑/ 到/ 服务/ 提供/ 阶段/ 中/ 组合/ 服务/ 的/ 不同/ 执行/ 方式/ (/ 集中/ 和/ 分散/ )/ ,/ 尤其/ 是/ 将/ 失效/ 行为/ 和/ 恢复/ 机制/ 的/ 影响/ 引入/ 到/ 性能/ 建模/ 中/ ,/ 明显改善/ 了/ 性能/ 量化/ 的/ 准确性/ ./ 采用/ 的/ 分析/ 建模/ 工具/ 排队/ Petri/ 网/ 综合/ 了/ 排队/ 网/ 模型/ 和/ 随机/ Petri/ 网/ 的/ 优势/ ,/ 能够/ 刻画/ 系统/ 的/ 执行/ 细节/ 和/ 性能/ 表现/ ,/ 极大地提高/ 了/ 建模/ 和/ 分析方法/ 的/ 实用性/ ,/ 为/ 解决/ 大/ 粒度/ 服务/ 的/ 复杂/ 系统/ 建模/ 和/ 服务质量/ 评价/ 问题/ 提供/ 了/ 很/ 好/ 的/ 解决方案/ ./ 在/ 下/ 一步/ 的/ 工作/ 中/ ,/ 我们/ 将/ 继续/ 优化/ 服务/ 系统分析/ 性/ 模型/ 和/ 评价/ 方法/ ,/ 并/ 在/ 此基础/ 上/ 研究/ 动态/ 网络/ 环境/ 下/ 的/ 服务/ 系统/ 适配/ 机制/ ,/ 增强/ 服务/ 对/ 环境/ 的/ 适配/ 能力/ ./ 致谢/ 在/ 此/ 衷心感谢/ SamuelKounev/ 博士/ 提供/ 的/ 排队/ Petri/ 网/ 仿真/ 软件/ QPME1/ ./ 01/ 对/ 本文/ 研究/ 工作/ 的/ 帮助/ !/ 衷心感谢/ 评阅/ 人/ 对/ 本文/ 的/ 工作/ 提出/ 的/ 宝贵意见/ 和/ 建议/ !/ 

