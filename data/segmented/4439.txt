Page1/ 支持/ 反/ 三角/ 嵌入/ 的/ 松弛/ 度量/ 空间/ 网络/ 坐标/ 算法/ 张春红/ 1/ )/ 尹航/ 1/ )/ 程时/ 端/ 2/ )/ 1/ )/ (/ 北京邮电大学/ 信息/ 与/ 通信/ 工程学院/ 北京/ 100876/ )/ 2/ )/ (/ 北京邮电大学/ 网络/ 技术/ 研究院/ 北京/ 100876/ )/ 摘要/ 网络/ 坐标/ 是/ 根据/ 网络/ 测量/ 时延/ 将/ 节点/ 嵌入/ 虚拟/ 度量/ 空间/ ,/ 根据/ 坐标/ 位置/ 预测/ 节点/ 时延/ 的/ 模型/ 和/ 算法/ ./ 然而/ 通过/ 网络/ 测量/ 发现/ 互联网/ 中/ 广泛/ 存在/ 非对称/ 和/ 反/ 三角/ (/ TriangleInequalityViolation/ ,/ TIV/ )/ 时延/ ,/ 度量/ 空间/ 固有/ 的/ 对称性/ 和/ 三角形/ 不等性/ 在/ 本质/ 上/ 无法/ 体现/ 互联网/ 时延/ 的/ 真实/ 特征/ ./ 特别/ 是/ 对/ 利用/ 反/ 三角/ 属性/ 建立/ 优化/ 中继/ 路由/ 的/ 应用/ ,/ 传统/ 的/ 网络/ 坐标/ 算法/ 无法/ 支持/ ./ 为此/ ,/ 该文/ 提出/ 一种/ 基于/ 松弛/ 度量/ 空间/ 的/ 网络/ 坐标/ 模型/ ,/ 利用/ KL/ 散度/ 距离/ 替代/ 欧式/ 距离/ 定义/ 节点/ 时延/ ,/ 并/ 设计/ 了/ 分布式/ 网络/ 坐标/ 算法/ KL/ _/ vivaldi/ ./ 通过/ 理论/ 分析/ 与/ 仿真/ 表明/ :/ 算法/ 支持/ 非对称/ 时延/ 和/ TIV/ 的/ 预测/ ,/ 提高/ 了/ 时延/ 的/ 预测/ 精度/ ,/ 拓展/ 了/ 网络/ 坐标/ 算法/ 的/ 应用领域/ ./ 关键词/ 网络/ 坐标/ ;/ 反/ 三角/ ;/ 松弛/ 度量/ 空间/ 1/ 引言/ 网络/ 坐标/ 系统/ NCS/ (/ NetworkCoordinationSystem/ )/ 是/ 一类/ 预测/ 互联网/ 节点/ 时延/ 算法/ 的/ 统称/ [/ 1/ ]/ ./ 网络/ 坐标/ 算法/ 忽略/ 影响/ 端到/ 端/ 时延/ 的/ 多种/ 工程/ 实际/ 因素/ ,/ 将/ 网络/ 中/ 的/ 通信/ 设备/ 视为/ 分布/ 在/ 某种/ 度量/ 空间/ 中/ 的/ 虚拟/ 节点/ ,/ 基于/ 空间/ 定义/ 的/ 距离/ 度量/ ,/ 根据/ 节点/ 坐标/ 直接/ 计算/ 节点/ 间/ 的/ 预测/ 时延/ ./ 现有/ 大量/ 网络/ 坐标/ 算法/ 基于/ 局部/ 实测/ 时延/ ,/ 以/ 最小化/ 预测/ 时延/ 和/ Page2/ 测量/ 时延/ 的/ 误差/ 为/ 优化/ 目标/ ,/ 为/ 节点/ 分配/ 最佳/ 坐标/ 位置/ ./ 网络/ 坐标/ 的/ 本质/ 是/ 对/ 真实/ 时延/ 空间/ 的/ 拟合/ 与/ 近似/ ./ 网络/ 测量/ 数据/ 表明/ ,/ 互联网/ 时延/ 广泛/ 具有/ 不对称性/ 和/ 反/ 三角/ 性/ [/ 2/ -/ 4/ ]/ ./ 不对称性/ 指/ 一对/ 端点/ 间/ 的/ 双向/ 测量/ 时延/ 不/ 相等/ ,/ 排除/ 测量误差/ 的/ 影响/ ,/ 其/ 可能/ 原因/ 是/ 端点/ 间/ 的/ 双向/ 路径/ 不/ 完全/ 重叠/ ./ 反/ 三角/ 性指/ 一对/ 端点/ 间/ 的/ 直达/ 路由/ 时延/ 大于/ 通过/ 中继/ 节点/ 构建/ 的/ 两段/ 时延/ 之/ 和/ ,/ 这种/ 现象/ 称为/ TIV/ (/ TriangleInequalityViolation/ )/ ./ 大量/ 研究/ 工作/ 利用/ 反/ 三角/ 现象/ ,/ 建立/ 以/ 时延/ 为/ 优化/ 目标/ 的/ 业务/ 节点/ 关系/ 、/ 服务器/ 位置/ 或/ 缓存/ 策略/ 位置/ [/ 5/ -/ 6/ ]/ ./ 在/ 多媒体通信/ 等/ 应用/ 中/ ,/ 利用/ TIV/ 构建/ 中继/ 路由/ ,/ 能够/ 降低/ 端到/ 端/ 时延/ 特性/ ,/ 提高/ 业务/ 的/ 服务质量/ [/ 7/ ]/ ./ 然而/ ,/ 现有/ 网络/ 坐标/ 算法/ 大多/ 以/ 多维/ 空间/ 的/ 欧式/ 距离/ 作为/ 节点/ 时延/ 的/ 度量/ 公式/ ./ 而/ 对称性/ 和/ 三角形/ 不等性/ 定律/ 是/ 欧式/ 空间/ 的/ 基础/ 属性/ ,/ 这/ 意味着/ 无论如何/ 摆放/ 节点/ 的/ 位置/ ,/ 度量/ 空间/ 中/ 的/ 预测/ 时延/ 都/ 不/ 可能/ 出现/ TIV/ 现象/ ,/ 也/ 不/ 支持/ 节点/ 时延/ 不对称性/ ,/ 任意/ 节点/ 间/ 的/ 双向/ 时延/ 完全/ 相等/ ./ 因而/ 度量/ 空间/ 模型/ 无法/ 反映/ 互联网/ 节点/ 时延/ 的/ 真实/ 特征/ ./ 目前/ 基于/ 欧式/ 距离/ 空间/ 模型/ 设计/ 的/ 网络/ 坐标/ 系统/ ,/ 通常/ 将/ 实际/ 测量/ 时延/ 的/ TIV/ 视为/ 数据/ 噪声/ ,/ 提出/ 多种/ 算法/ 消除/ 或/ 缓解/ TIV/ 对/ 预测/ 精度/ 的/ 影响/ [/ 4/ ,/ 8/ ]/ ./ 这类/ 处理/ 方法/ 虽然/ 能/ 满足/ 粗粒度/ 网络/ 时延/ 预测/ 应用/ ,/ 然而/ 在/ 利用/ TIV/ 优化/ 业务/ 服务质量/ 的/ 场景/ 中/ ,/ 则/ 难以/ 支持/ 时延/ 预测/ 需求/ ./ 针对/ 网络/ 坐标/ 算法/ 预测/ TIV/ 和/ 不/ 对称/ 时延/ 的/ 缺陷/ ,/ 本文/ 提出/ 一种/ 基于/ 松弛/ 度量/ 空间/ 的/ 网络/ 坐标/ 模型/ ,/ 分析/ 了/ 松弛/ 度量/ 空间/ 的/ 描述/ 参数/ 与/ 属性/ ,/ 提出/ 满足/ 不对称性/ 和/ TIV/ 属性/ 的/ KL/ 距离/ 定义/ ./ 通过/ 对/ 经典/ 分布式/ 网络/ 坐标/ 算法/ vivaldi/ [/ 8/ ]/ 进行/ 修正/ ,/ 提出/ 支持/ TIV/ 的/ 网络/ 坐标/ 算法/ KL/ _/ vivaldi/ ./ 与/ 前人/ 研究/ 工作/ 对/ TIV/ 的/ 处理/ 思路/ 不同/ ,/ KL/ _/ vivaldi/ 算法/ 认为/ TIV/ 是/ 网络/ 坐标/ 系统/ 本身/ 应/ 具备/ 的/ 天然/ 属性/ ,/ 而/ 不是/ 将/ 其/ 视为/ 负面影响/ 因素/ 进行/ 消除/ ,/ 或/ 引入/ 度量/ 空间/ 外/ 的/ 其他/ 维度/ 来/ 容纳/ TIV/ 现象/ [/ 4/ ]/ ./ 仿真/ 实验/ 表明/ ,/ 算法/ 能够/ 预测/ 一定/ 比例/ 的/ TIV/ ,/ 具有/ 优于/ vivaldi/ 算法/ 的/ 预测/ 精度/ ./ 本文/ 第/ 2/ 节/ 介绍/ 网络/ 坐标/ 研究/ 现状/ 和/ vivaldi/ 算法/ ;/ 第/ 3/ 节/ 提出/ 构造/ 松弛/ 度量/ 空间/ 的/ 距离/ 函数/ 并/ 详细/ 讨论/ 空间/ 属性/ ;/ 第/ 4/ 节/ 描述/ KL/ _/ vivaldi/ 算法/ 的/ 坐标/ 迭代/ 方法/ ;/ 最后/ 第/ 5/ 节/ 给出/ 仿真/ 实验/ 结果/ 及/ 分析/ 结论/ ./ 2/ 背景/ 知识/ 2.1/ 反/ 三角/ TIV/ 随机/ 选择网络/ 中/ 3/ 个/ 节点/ A/ ,/ B/ 和/ C/ ,/ 将源/ 节点/ A/ 和/ 目的/ 节点/ C/ (/ 通称/ 为端/ 节点/ )/ 以及/ 中继/ 节点/ B/ 间/ 的/ 时延/ 数值/ 定义/ 为/ 三角形/ 的/ 边长/ ,/ 则/ 3/ 个/ 节点/ 构成/ 了/ 一个/ 虚拟/ 三角形/ △/ ABC/ ./ 若/ 三角形/ 的/ 两边/ 和/ 小于/ 第/ 3/ 边/ ,/ 则/ 称/ △/ ABC/ 为/ TIV/ 三角形/ ./ 如图/ 1/ 所示/ ,/ △/ ABC/ 满足/ d/ (/ A/ ,/ C/ )/ >/ d/ (/ A/ ,/ B/ )/ +/ d/ (/ B/ ,/ C/ )/ ,/ 经过/ 中继/ 节点/ B/ 的/ 路径/ ABC/ 构成/ 了/ 比/ 默认/ 路由/ AC/ 更快/ 的/ 绕行/ 路由/ ,/ 路径/ 时延/ 减少/ 了/ 120ms/ ./ TIV/ 现象/ 存在/ 的/ 本质/ 原因/ 是/ ,/ 网络/ 中/ 路由器/ 执行/ 的/ 路由/ 策略/ 不/ 以/ 节点/ 端到/ 端/ 时延/ 为/ 单一/ 优化/ 目标/ ./ 终端/ 节点/ 之间/ 的/ 默认/ IP/ 路径/ 由/ 数据包/ 沿途/ 流经/ 的/ 路由器/ 决定/ ,/ 是域/ 内/ 路由/ 策略/ 和域/ 间/ 路由/ 策略/ 分段/ 联合/ 决策/ 的/ 结果/ ,/ 终端/ 节点/ 无权/ 直接参与/ 路由/ 选择/ 的/ 过程/ [/ 9/ ]/ ./ 虽然/ 域/ 内/ 路由/ 协议/ IGP/ (/ InteriorGatewayProtocol/ )/ 通常/ 选择/ 时延/ 较/ 小/ 的/ 链路/ ,/ 但域/ 间/ 路由/ 协议/ BGP/ (/ BorderGatewayProtocol/ )/ 不仅仅/ 考虑/ 路由/ 自治/ 域/ AS/ 跳数/ 或/ 延迟/ 等/ 性能指标/ ,/ 还会/ 考虑/ 链路/ 代价/ 、/ 流量/ 负载/ 、/ 网络故障/ 以及/ 定价/ 等/ 综合/ 因素/ ./ 因此/ 复杂/ 路由/ 策略/ 下/ 的/ 默认/ IP/ 路由/ 未必/ 是/ 终端/ 节点/ 间/ 的/ 时延/ 最/ 短路/ 由/ ./ 很多/ 研究/ 工作/ 对/ TIV/ 属性/ 做/ 了/ 量化/ 研究/ [/ 4/ ,/ 10/ ]/ ,/ 在/ 节点/ 时延/ 数据/ 集合/ 中/ ,/ TIV/ 三角形/ 数量/ 占/ 总/ 三角形/ 数量/ 的/ 比例/ 通常/ 在/ 10/ %/ ~/ 30/ %/ 之间/ ,/ 有些/ 则/ 高达/ 40/ %/ 以上/ ,/ 表明/ 网络/ 中/ 普遍存在/ 更/ 短单/ 跳/ 绕行/ 路由/ ./ 大多数/ 中继/ 路由/ 算法/ 通过/ 网络/ 测量/ 技术/ 获取/ 节点/ 时延/ 矩阵/ 以/ 定位/ TIV/ ./ 但/ 网络/ 测量/ 技术/ 的/ 复杂性/ 及/ 测量/ 负荷/ 使得/ 通过/ 测量/ 获取/ 全局/ 延时/ 矩阵/ 在/ 工程/ 上/ 是/ 不切实际/ 的/ 方法/ [/ 11/ ]/ ./ 而/ 利用网络/ 坐标/ 算法/ 有效/ 预测/ TIV/ ,/ 能够/ 在/ 不/ 增加/ 网络/ 测量/ 开销/ 的/ 前提/ 下/ 搜索/ 中继/ 节点/ ,/ 建立/ 更/ 短/ 捷径/ 优化/ 业务/ 的/ 时延/ 性能/ ./ 2.2/ 度量/ 空间/ 基于/ 几何/ 空间/ 嵌入/ 的/ 网络/ 坐标/ 系统/ 建立/ 了/ 物理/ Page3/ 时延/ 与/ 几何/ 拓扑/ 空间/ 的/ 映射/ 关系/ ./ 网络/ 中/ P/ 个/ 节点/ 具有/ P/ ×/ P/ 维/ 时延/ 矩阵/ 犇/ ,/ 矩阵/ 犇/ 的/ 元素/ dij/ 表示/ 节点/ i/ 和/ 节点/ j/ 的/ 时延/ 测量/ 值/ ./ NCS/ 为/ 节点/ 分配/ 最佳/ 坐标/ X/ ,/ 将/ 节点/ 映射/ 到/ 抽象/ 度量/ 空间/ M/ (/ X/ ,/ ξ/ )/ ./ ξ/ :/ X/ ×/ X/ →/ / 函数/ ,/ 任意/ 两个/ 节点/ 的/ 空间/ 距离/ 为/ d/ ^/ ij/ =/ ξ/ (/ Xi/ ,/ Xj/ )/ ./ 欧式/ 距离/ 是/ 典型/ 的/ 距离/ 度量/ 函数/ ξ/ :/ 欧式/ 距离/ 满足/ 如下/ 3/ 种/ 性质/ :/ 非/ 负性/ ξ/ (/ 狓/ ,/ 狔/ )/ >/ 0/ / 狓/ ≠/ 狔/ 、/ 对称性/ ξ/ (/ 狓/ ,/ 狔/ )/ =/ ξ/ (/ 狔/ ,/ 狓/ )/ 和/ 三角形/ 不等性/ ξ/ (/ 狓/ ,/ 狔/ )/ </ ξ/ (/ 狓/ ,/ 狕/ )/ +/ ξ/ (/ 狔/ ,/ 狕/ )/ ,/ 其中/ 对称性/ 和/ 三角形/ 不等性/ 都/ 有悖于/ 互联网/ 时延/ 数据/ 的/ 固有特征/ ./ 根据/ 文献/ [/ 12/ -/ 13/ ]/ 的/ 方法/ 对/ 实际/ 测量/ 时延/ 矩阵/ 犇/ 进行/ 中心化/ 变换/ 得到/ 矩阵/ 犇/ (/ 设/ 犅/ =/ -/ (/ 1/ // 2/ )/ 犎/ 犇/ 犎/ ,/ 其中/ 犎/ =/ 犐/ -/ (/ 1/ // n/ )/ 犈/ ,/ 犐/ 为/ 单位矩阵/ ,/ 犈/ 为/ 全/ 1/ 矩阵/ )/ ./ 犅/ 矩阵/ 不是/ 半/ 正定/ 矩阵/ ,/ 其/ 特征值/ 存在/ 负值/ ./ 而/ 只有/ 当/ 犅/ 为/ 半/ 正定/ 矩阵/ 时/ ,/ 时延/ 矩阵/ 犇/ 才/ 符合/ 欧式/ 空间/ 距离/ 矩阵/ 的/ 特征/ ./ 由此/ 说明/ ,/ 互联网/ 时延/ 矩阵/ 无法/ 零/ 误差/ 嵌入/ 任何/ 维度/ 的/ 欧式/ 度量/ 空间/ 中/ ./ 针对/ 这一/ 问题/ ,/ 本文/ 提出/ 能/ 保留/ 互联网/ 时延/ 特征/ 的/ 非/ 度量/ 空间/ ,/ 并/ 设计/ 相应/ 的/ 网络/ 坐标/ 算法/ ./ 2.3/ 网络/ 坐标/ 算法/ 化/ 问题/ 表述/ 为/ 网络/ 坐标/ 算法/ 为/ 节点/ 分配/ 虚拟/ 坐标/ ,/ 其/ 一般/ 优/ 通过/ 优化/ 策略/ 调整/ 节点/ 坐标/ X/ ,/ 得到/ 时/ 延误/ 差/ 最小/ 的/ 预测/ 距离/ 矩阵/ 犇/ ^/ ./ 现有/ 网络/ 坐标/ 算法/ 分为/ 基于/ 度量/ 空间/ 和/ 基于/ 矩阵/ 分解/ 的/ 两类/ 算法/ ./ 基于/ 度量/ 空间/ 的/ 算法/ 主要/ 包括/ GNP/ [/ 14/ ]/ 、/ PIC/ [/ 15/ ]/ 和/ vivaldi/ [/ 8/ ]/ 等/ ./ 大部分/ 算法/ 采用/ 欧式/ 距离/ 预测/ 节点/ 间/ 对称/ 的/ RTT/ (/ RoundTripTime/ )/ ./ Vivaldi/ 算法/ 是/ 分布式/ 网络/ 坐标/ 算法/ 的/ 代表/ 之一/ ,/ 本文/ 将/ 以/ vivaldi/ 为/ 基础/ 设计/ 支持/ TIV/ 的/ 网络/ 坐标/ 算法/ ./ Vivaldi/ 假想/ 任意/ 两个/ 节点/ 之间/ 存在/ 一段/ 虚拟/ 弹簧/ ,/ 节点/ 间/ 的/ 距离/ 由/ 弹簧/ 势能/ 决定/ ./ 当/ 节点/ 距离/ 小于/ 测量/ 时/ 延时/ ,/ 弹簧/ 处于/ 被/ 压缩/ 状态/ ,/ 压缩/ 势能/ 使得/ 两个/ 节点/ 相互/ 远离/ ,/ 在/ 两个/ 节点/ 当前/ 坐标/ 形成/ 的/ 向量/ 方向/ 上/ ,/ 节点/ 选择/ “/ 更/ 远/ ”/ 的/ 坐标/ 位置/ 进行/ 迭代/ 更新/ ./ 反之/ ,/ 当/ 节点/ 距离/ 大于/ 测量/ RTT/ 时/ ,/ 弹簧/ 处于/ 被/ 拉伸/ 状态/ ,/ 拉伸/ 势能/ 在/ 向量/ 方向/ 上/ 拉近/ 节点/ 之间/ 的/ 位置/ ./ 当/ 节点/ 距离/ 等于/ 测量/ 时/ 延时/ ,/ 两个/ 节点/ 的/ 坐标/ 则/ 无需/ 调整/ ./ 算法/ 经过/ 若干/ 轮/ 迭代/ 后/ 收敛/ 到/ 稳定/ 状态/ ,/ 系统/ 整体/ 预测/ 误差/ 达到/ 最小/ ./ 然而/ ,/ 互联网/ 中/ 的/ TIV/ 现象/ 严重/ 影响/ 了/ 度量/ 空间/ 网络/ 坐标/ 算法/ 的/ 预测/ 准确度/ [/ 16/ -/ 17/ ]/ ./ 文献/ [/ 18/ ]/ 显示/ ,/ 从/ 时延/ 矩阵/ 中/ 删除/ TIV/ 最/ 严重/ 的/ 前/ 0.5/ %/ 的/ 节点/ ,/ 全局/ 预测/ 的/ 准确度/ 将/ 提高/ 20/ %/ ./ 目前/ 基于/ 度量/ 空间/ 模型/ 设计/ 的/ 网络/ 坐标/ 系统/ ,/ 通常/ 将/ 实际/ 测量/ 时延/ 的/ TIV/ 视为/ 数据/ 噪声/ ,/ 以/ 牺牲/ 小/ 部分/ 严重/ TIV/ 为/ 代价/ 换取/ 整体/ 预测/ 精度/ 的/ 提高/ ./ Vivaldi/ 认为/ 只要/ 严重/ TIV/ 存在/ 的/ 比例/ 很/ 低/ ,/ 算法/ 准确度/ 即能/ 限制/ 在/ 可/ 接受/ 的/ 范围/ 内/ ./ S/ -/ Vivaldi/ [/ 13/ ]/ 对/ 原始/ 时延/ 数据/ 进行/ 指数/ 变换/ ,/ 降低/ TIV/ 的/ 严重/ 程度/ 和/ 数量/ 后/ ,/ 再/ 嵌入/ 度量/ 空间/ ./ 还有/ 文献/ 通过/ 建立/ 层次化/ 空间/ 来/ 分散/ TIV/ 对/ 嵌入/ 精度/ 的/ 影响/ [/ 19/ -/ 20/ ]/ ./ 这些/ 方法/ 试图/ 通过/ 叠加/ 多个/ 度量/ 空间/ 来/ 削弱/ 单一/ 度量/ 空间/ 对/ TIV/ 的/ 排斥/ ,/ 而/ 非/ 保留/ 嵌入/ 空间/ 的/ TIV/ 属性/ ./ 矩阵/ 分解/ 网络/ 坐标/ 算法/ 抛弃/ 了/ 将/ 节点/ 嵌入/ 度量/ 空间/ 的/ 思路/ ,/ 对/ 时延/ 矩阵/ 进行/ 降维/ 分解/ ./ IDES/ [/ 21/ ]/ 算法/ 利用/ 奇异/ 值/ 分解/ SVD/ 和/ 非负/ 矩阵/ 分解/ NMF/ ,/ 为/ 每个/ 节点/ 分解/ 出/ 一个/ 入/ 向量/ 和/ 一个/ 出/ 向量/ ,/ 节点/ 入/ 向量/ 与/ 另/ 一/ 节点/ 出/ 向量/ 的/ 内积/ 定义/ 为/ 该/ 节点/ 到/ 他/ 节点/ 的/ 预测/ 时延/ ./ 矩阵/ 分解/ 算法/ 的/ 预测/ 精确度/ 与/ 度量/ 空间/ 算法/ 基本相同/ ./ 矩阵/ 分解/ 算法/ 从/ 理论/ 上不受/ 度量/ 空间/ 三角形/ 不等性/ 和/ 非/ 对称性/ 约束/ ,/ 支持/ TIV/ 的/ 存在/ ./ 然而/ IDES/ 采用/ 对称/ RTT/ 进行/ 计算/ ,/ 并未/ 说明/ 如何/ 处理/ 非对称/ 时延/ ,/ 也/ 未说明/ 算法/ 精度/ 与/ TIV/ 的/ 关系/ ./ 3/ 松弛/ 度量/ 空间/ 为了/ 克服/ 度量/ 空间/ 网络/ 坐标/ 算法/ 在/ TIV/ 预测/ 方面/ 固有/ 的/ 缺陷/ ,/ 本/ 节/ 提出/ 支持/ 非对称/ 时延/ 和/ TIV/ 的/ 距离/ 函数/ ,/ 构建/ 松弛/ 度量/ 空间/ 实现/ 节点/ 嵌入/ ./ 为了/ 描述/ 互联网/ 时延/ 特征/ ,/ 首先/ 给出/ 下列/ 定义/ [/ 22/ ]/ ./ 定义/ 1/ ./ γ/ 松弛/ 对称性/ (/ γ/ -/ RelaxedSymmetry/ )/ ./ 在/ 集合/ X/ 上/ 定义/ 距离/ 函数/ d/ :/ X/ ×/ X/ →/ / 果/ / p/ ,/ q/ ∈/ X/ ,/ / γ/ / 0/ ,/ 使得/ |/ d/ (/ p/ ,/ q/ )/ -/ d/ (/ q/ ,/ p/ )/ |/ / γ/ 成立/ ,/ 则/ 称/ 空间/ (/ X/ ,/ d/ )/ 满足/ γ/ 松弛/ 对称性/ ./ 定义/ 2/ ./ γ/ 松弛/ 三角形/ 不等性/ (/ γ/ -/ RelaxedTriangleInequality/ )/ ./ 在/ 集合/ X/ 上/ 定义/ 距离/ 函数/ d/ :/ X/ ×/ X/ →/ / ζ/ / 1/ ,/ 满足/ d/ (/ p/ ,/ r/ )/ +/ d/ (/ r/ ,/ q/ )/ >/ ζ/ ·/ d/ (/ p/ ,/ q/ )/ ,/ 则/ 称/ 空间/ (/ X/ ,/ d/ )/ 满足/ ζ/ 松弛/ 三角形/ 不等性/ ./ 互联网/ 时延/ 空间/ 符合/ γ/ 松弛/ 对称性/ 和/ ζ/ 松弛/ 三/ Page4/ 角形/ 不等性/ ,/ 称为/ 松弛/ 度量/ 空间/ (/ X/ ,/ d/ ,/ γ/ ,/ ζ/ )/ ./ γ/ 与/ ζ/ 是/ 空间/ 特征描述/ 参数/ ,/ 欧式/ 度量/ 空间/ 是/ γ/ =/ 0/ 和/ ζ/ =/ 1/ 的/ 特例/ ./ 距离/ 函数/ d/ 的/ 选择/ 是/ 构建/ 松弛/ 度量/ 空间/ 的/ 关键/ ,/ 不同/ 的/ 距离/ 函数/ 具有/ 不同/ 的/ 空间/ 特征/ ./ 互联网/ 距离/ 函数/ d/ 本质/ 上/ 定义/ 了/ 节点/ 之间/ 的/ 差异/ 度/ (/ dissimilarity/ )/ ./ 大量/ 研究/ 工作/ 提出/ 多种/ 差异/ 度/ 函数/ ,/ 如/ 余弦/ 距离/ 、/ 街区/ 距离/ 、/ 马氏/ 距离/ 、/ 欧式/ 距离/ [/ 23/ ]/ 等/ ./ 由于/ 散度/ (/ Divergence/ )/ 差异性/ 具有/ γ/ 松弛/ 对称性/ 和/ ζ/ 松弛/ 三角形/ 不等性/ ,/ 因此/ 本文/ 选择/ 散度/ 距离/ 作为/ 互联网/ 时延/ 距离/ 公式/ ,/ 构造/ 松弛/ 度量/ 空间/ 模型/ ./ 散度/ 常用/ 于/ 衡量/ 概率密度函数/ 之间/ 的/ 差异性/ [/ 24/ ]/ ./ 设/ F/ 是/ 定义/ 在/ L/ 上/ 二次/ 连续/ 可微/ 的/ 严格/ 实值/ 凸函数/ ,/ p/ ,/ ρ/ 为/ 两个/ 正值/ 集合/ ,/ Bregman/ 散度/ 定义/ 为/ DF/ :/ L/ ×/ L/ →/ / DF/ (/ p/ ‖/ ρ/ )/ =/ F/ (/ p/ )/ -/ F/ (/ ρ/ )/ -/ / F/ (/ ρ/ )/ / F/ (/ ρ/ )/ / ρ/ 表示/ 对/ F/ 求导/ ./ 取/ F/ (/ ρ/ )/ =/ ρ/ ln/ (/ ρ/ )/ -/ ρ/ [/ 25/ ]/ 得到/ 广义/ KL/ 散度/ (/ KullBack/ -/ Leiblerdivergence/ )/ :/ DKL/ (/ p/ ‖/ ρ/ )/ =/ F/ (/ p/ )/ -/ F/ (/ ρ/ )/ -/ / F/ (/ ρ/ )/ ln/ (/ ·/ )/ 表示/ 自然对数/ ./ 记/ N/ 维/ 松弛/ 度量/ 空间/ 节点/ X/ 的/ 坐标/ 为/ X/ =/ (/ x1/ ,/ …/ ,/ xN/ )/ ,/ 节点/ X/ 到/ Y/ 的/ 时延/ 距离/ 为/ dKL/ (/ X/ ‖/ Y/ )/ =/ ∑/ NdKL/ (/ X/ ‖/ Y/ )/ 也/ 称/ KL/ 距离/ ./ 下面/ 证明/ dKL/ (/ X/ ‖/ Y/ )/ 满足/ 非/ 负性/ 、/ 不对称性/ 和/ TIV/ 属性/ ,/ 并/ 讨论/ 空间/ 描述/ 参数/ 的/ 分布/ 特性/ 和/ 极限/ ./ 证明/ ./ dKL/ (/ X/ ‖/ Y/ )/ 满足/ 非/ 负性/ ./ 根据/ 式/ (/ 4/ )/ ,/ KL/ 距离/ 中/ 每维/ 子项/ dKL/ (/ xi/ ‖/ yi/ )/ 等于/ 函数/ F/ (/ xi/ )/ 与其/ 在/ yi/ 处一阶/ 泰勒/ 级数/ 展开/ 项间/ 的/ 误差/ ./ 由于/ F/ (/ xi/ )/ 为/ 凸函数/ ,/ 因此/ dKL/ (/ xi/ ‖/ yi/ )/ 总为/ 非负值/ [/ 26/ ]/ ,/ 其/ 求和/ 结果/ dKL/ (/ X/ ‖/ Y/ )/ 满足/ 非/ 负性/ ./ 当且/ 仅/ 当/ X/ =/ Y/ 时/ dKL/ (/ X/ ‖/ Y/ )/ =/ 0/ ,/ 节点/ 坐标/ 取值/ 均/ 为/ 正/ 实数/ / 证明/ ./ dKL/ (/ X/ ‖/ Y/ )/ 满足/ γ/ 松弛/ 对称性/ ./ 记/ K/ (/ X/ ,/ Y/ )/ =/ dKL/ (/ X/ ‖/ Y/ )/ -/ dKL/ (/ Y/ ‖/ X/ )/ 为/ 节点/ (/ X/ ,/ Y/ )/ 双向/ KL/ 距离/ 差/ ,/ 在/ 不/ 引起/ 混淆/ 的/ 情况/ 下/ ,/ 文中/ (/ X/ ,/ Y/ )/ 既/ 代表/ 节点/ 也/ 表示/ 节点/ 坐标/ ./ 参数/ γ/ / max/ (/ K/ (/ X/ ,/ Y/ )/ )/ 反映/ 了/ 双向/ 时延/ 不/ 对称/ 程度/ ,/ 是/ 衡量/ 松弛/ 度量/ 空间/ 的/ 重要/ 参数/ ./ 记/ F/ (/ X/ )/ =/ ∑/ F/ (/ xi/ )/ 是/ 定义/ Bregman/ 散度/ 的/ 可分/ (/ 函数/ 值为/ 各维/ 分量/ 之/ 和/ )/ 凸函数/ ,/ / F/ (/ X/ )/ 是/ F/ (/ X/ )/ 在/ 坐标/ X/ 处/ 的/ 梯度/ ,/ K/ (/ X/ ,/ Y/ )/ 可/ 改写/ 为/ K/ (/ X/ ,/ Y/ )/ =/ F/ (/ X/ )/ -/ F/ (/ Y/ )/ -/ 〈/ X/ -/ Y/ ,/ / F/ (/ Y/ )/ 〉/ -/ 式/ 中/ 〈/ ·/ ,/ ·/ 〉/ 表示/ 向量/ 内积/ 运算/ ./ 式/ (/ 6/ )/ 利用/ 凸函数/ 性质/ 进行/ 不等式/ 变换/ ,/ 得到/ K/ (/ X/ ,/ Y/ )/ 取值/ 下限/ ./ 同理/ 可得/ K/ (/ X/ ,/ Y/ )/ / lnX/ (/ )/ Y/ ,/ X/ -/ Y/ ,/ 因此/ 有式/ (/ 7/ )/ 表明/ ,/ 节点/ 双向/ 距离/ 差/ 的/ 上限/ 与/ 节点/ 坐标/ 差值/ 和/ 商值/ 相关/ ,/ 当/ X/ / Y/ 时/ K/ (/ X/ ,/ Y/ )/ 是/ 坐标/ X/ 的/ 单调/ 增函数/ 和/ 坐标/ Y/ 的/ 单调/ 减/ 函数/ ./ 设/ 节点/ 坐标/ 向量/ 分布/ 在/ 有界/ 空间/ [/ A/ ,/ B/ ]/ 上/ ,/ 任意/ X/ 满足/ ai/ / xi/ / bi/ ./ 由/ K/ (/ X/ ,/ Y/ )/ 单调/ 性/ 可知/ ,/ 空间/ [/ A/ ,/ B/ ]/ 中/ 双向/ KL/ 距离/ 之差/ 上限/ 为/ γ/ =/ lnB/ (/ )/ A/ ,/ B/ -/ A/ ./ 如图/ 2/ 梯度/ 变化/ 方向/ 所示/ ,/ K/ (/ X/ ,/ Y/ )/ 在/ 边界/ 处/ 获得/ 极值/ ./ 图中/ 箭头/ 表示/ 梯度/ 变化/ 方向/ ,/ 等高线/ 上/ 标识/ 了/ K/ (/ X/ ,/ Y/ )/ 的/ 具体/ 数值/ ./ 除了/ 参数/ γ/ ,/ K/ (/ X/ ,/ Y/ )/ 的/ 概率密度/ 也/ 是/ 反映/ 度量/ 空间/ 不对称性/ 的/ 重要/ 指标/ ./ 图/ 3/ 显示/ 了/ 有界/ 空间/ (/ 0/ ,/ 100/ ]/ 中/ K/ (/ X/ ,/ Y/ )/ 的/ 概率密度/ 分布/ ./ 由于/ K/ (/ X/ ,/ Y/ )/ =/ -/ K/ (/ Y/ ,/ X/ )/ ,/ 概率密度/ 以/ 0/ 为/ 中心/ 呈现/ 对称/ 分布/ ;/ 同时/ K/ (/ X/ ,/ Y/ )/ 集中/ 分布/ 于/ 低值/ 范围/ ,/ 而/ 高值/ 区间/ 密度/ Page5/ 较/ 低/ ,/ 这/ 与/ 互联网/ 双向/ 时延/ 分布/ 特征/ 相符/ ./ 当/ 松弛/ 度量/ 空间/ 维度/ N/ 增大/ 时/ ,/ K/ (/ X/ ,/ Y/ )/ 概率密度/ 的/ 集中度/ 随之/ 降低/ ,/ 取值/ 范围/ 也/ 随之/ 增大/ ,/ 因此/ 增加/ 维度/ N/ 对/ 双向/ 距离/ 不对称性/ 具有/ 弥散/ 作用/ ./ 调整/ 节点/ 坐标/ 取值/ 空间/ [/ A/ ,/ B/ ]/ 和/ 维度/ N/ 可/ 得到/ 参数/ γ/ 各异/ 的/ 松弛/ 度量/ 空间/ ,/ 控制/ 空间/ 的/ 不/ 对称/ 程度/ ,/ 满足/ 双向/ 时延/ 不对称性/ 的/ 嵌入/ 需求/ ./ 松弛/ 度量/ 空间/ 不但/ 支持/ 不/ 对称/ 时延/ ,/ 也/ 支持/ 对称/ 时延/ ./ 记/ K/ (/ X/ ,/ Y/ )/ =/ (/ k1/ ,/ …/ ,/ kN/ )/ ,/ ki/ 表示/ 第/ i/ 维/ 坐标/ 贡献/ 的/ 双向/ 距离/ 差/ ./ 在/ 一/ 维空间/ 中/ ,/ 当且/ 仅/ 当/ X/ =/ Y/ 时/ K/ (/ X/ ,/ Y/ )/ =/ 0/ 成立/ ,/ 表明/ 除/ 节点/ 自身/ 外/ ,/ 到/ 其他/ 节点均/ 为/ 不/ 对称/ 时延/ ./ 对/ 二维/ 空间/ 中/ 给定/ 的/ X/ =/ (/ x1/ ,/ x2/ )/ ,/ / Y/ =/ (/ y1/ ,/ / )/ (/ / 表示/ y2/ 值/ 未定/ )/ 有/ k1/ =/ K/ (/ x1/ ,/ y1/ )/ ./ 对/ 任意/ 给定/ 的/ x2/ ,/ 不失/ 一般性/ ,/ 由于/ k2/ =/ dKL/ (/ x2/ ‖/ y2/ )/ =/ dKL/ (/ y2/ ‖/ x2/ )/ 在/ x2/ >/ y2/ 区间/ 上/ 是/ y2/ 的/ 连续/ 非/ 递增/ 函数/ ,/ 因此/ 在/ 有界/ 区间/ 内/ 至少/ 存在/ 一个/ y2/ 满足/ k2/ =/ -/ k1/ ./ 改变/ y1/ 可/ 得到/ 新/ 的/ y2/ ,/ 故/ k2/ =/ -/ k1/ 的/ 二维/ 解/ (/ y1/ ,/ y2/ )/ 不/ 唯一/ ./ 因此/ 存在/ 多个/ Y/ =/ (/ y1/ ,/ y2/ )/ 满足/ K/ (/ X/ ,/ Y/ )/ =/ 0/ ./ 以此类推/ ,/ 在/ N/ 维/ 松弛/ 度量/ 空间/ 可/ 由/ kN/ =/ -/ ∑/ N/ -/ 1/ {/ Y/ |/ K/ (/ X/ ,/ Y/ )/ =/ 0/ }/ ,/ 使得/ (/ X/ ,/ Y/ )/ 双向/ 距离/ 相等/ ./ 因此/ 松弛/ 度量/ 空间/ 中/ 存在/ 多组/ 不/ 重叠/ 的/ 坐标/ 对/ ,/ 可/ 用于/ 摆放/ 双向/ 时延/ 相等/ 的/ 一对/ 节点/ ./ 由/ 这/ 一/ 特征/ 推论/ 可知/ ,/ 对/ 任意/ 实数/ |/ k/ |/ </ γ/ ,/ 松弛/ 度量/ 空间/ 中/ 总/ 存在/ 节点/ 集合/ 满足/ Θ/ kx/ =/ {/ Y/ |/ K/ (/ X/ ,/ Y/ )/ =/ k/ }/ ./ 随着/ 维度/ N/ 的/ 增加/ ,/ 集合/ Θ/ kx/ 包含/ 的/ 元素/ 总数/ 也/ 随之/ 增加/ ,/ 为/ 节点/ 嵌入/ 度量/ 空间/ 提供/ 了/ 多重/ 坐标/ 位置/ 选择/ ,/ 具有/ 更/ 高/ 的/ 灵活性/ ./ 证明/ ./ dKL/ (/ X/ ‖/ Y/ )/ 满足/ ζ/ 松弛/ 三角形/ 不等性/ ./ 设/ 3/ 个/ 节点/ XYZ/ ,/ 不失/ 一般性/ ,/ 设/ Y/ 为/ 中继/ 节点/ ,/ 与/ 其他/ 两个/ 节点/ 构成/ 时延/ 有/ 向/ 三角形/ ./ 记/ ψ/ 表示/ 三角形/ 中/ 两个/ 中继/ 链路/ 时延/ 之/ 和/ 与/ 默认/ 链路/ 时延/ 的/ 比值/ :/ ψ/ =/ dKL/ (/ X/ ‖/ Y/ )/ +/ dKL/ (/ Y/ ‖/ Z/ )/ 由于/ dKL/ (/ X/ ‖/ Z/ )/ 为/ 非/ 负数/ ,/ 故当/ (/ X/ -/ Y/ )/ ln/ (/ Y/ // Z/ )/ T/ >/ 0/ 时/ ψ/ / 1/ ,/ XYZ/ 构成/ 反/ 三角形/ TIV/ ./ 记/ ζ/ =/ min/ (/ ψ/ )/ 为/ ψ/ 的/ 下限/ ,/ 是/ 反映/ 松弛/ 度量/ 空间/ 属性/ 的/ 重要/ 参数/ ,/ ζ/ 越小/ 表明/ 空间/ 中/ 能/ 容纳/ 的/ TIV/ 反/ 三角/ 程度/ 越/ 严重/ ./ 为了/ 计算/ ψ/ 的/ 极小值/ ζ/ ,/ 分别/ 计算/ 式/ (/ 8/ )/ 对/ (/ X/ ,/ Y/ ,/ Z/ )/ 的/ 偏/ 导数/ 并/ 使/ 其/ 为/ 0/ ,/ 得到/ 驻点/ {/ (/ x0/ ,/ y0/ ,/ z0/ )/ |/ x0/ =/ y0/ =/ z0/ }/ ,/ 对应/ 了/ ψ/ 最大值/ ,/ 故/ ψ/ 在/ 有界/ 区间/ 内/ 无/ 全局/ 驻点/ 最小值/ ./ 为/ 寻找/ ψ/ 的/ 极小值/ 分析/ 下/ 式/ :/ / X/ =/ -/ ∑/ d/ / ψ/ 中/ 的/ 乘积/ 项/ h/ (/ xi/ )/ =/ yilnxiz/ (/ )/ i/ -/ xi/ +/ zi/ ./ 在/ 给定/ (/ yi/ ,/ zi/ )/ 首先/ 讨论/ 一维/ 松弛/ 度量/ 空间/ 的/ 情况/ ./ 设式/ (/ 9/ )/ 分子/ 下/ 对/ h/ (/ xi/ )/ 求导/ 可知/ h/ (/ xi/ )/ 在/ xi/ =/ yi/ 时/ 获得/ 全局/ 最大值/ ,/ 并/ 存在/ x1/ / yi/ / x2/ 使得/ h/ (/ x1/ )/ =/ h/ (/ x2/ )/ =/ 0/ ./ 当/ xi/ ∈/ (/ xi/ ,/ x2/ )/ 且/ yi/ >/ zi/ 时/ / ψ/ dxi/ </ 0/ ,/ 表明/ ψ/ 是/ xi/ 的/ 单调/ 减/ 函数/ ,/ ψ/ 在/ x2/ 处/ 取得/ 最小值/ ./ 当/ xi/ ∈/ (/ a/ ,/ x1/ )/ ∪/ (/ x2/ ,/ b/ )/ 且/ yi/ >/ zi/ 时/ / ψ/ dxi/ >/ 0/ ,/ 表明/ ψ/ 是/ xi/ 的/ 单调/ 增函数/ ./ 由于/ 当/ x1/ >/ a/ 时/ ψ/ >/ 1/ ,/ 因此/ ψ/ 仍/ 在/ x2/ 取得/ 最小值/ ./ 若/ x2/ 超出/ 取值/ 区间/ 即/ x2/ >/ b/ ,/ 则/ ψ/ 的/ 最小值/ 由/ xi/ 取值/ 右/ 边界/ b/ 决定/ ;/ 同理/ 当/ yi/ </ zi/ 时/ ,/ ψ/ 在/ x1/ 或/ 左/ 边界/ a/ 处/ 获得/ 最小值/ ./ 因此/ 对/ 任意/ 给定/ (/ yi/ ,/ zi/ )/ 有/ ζ/ xi/ =/ min/ (/ ψ/ (/ max/ (/ a/ ,/ x1/ )/ )/ ,/ ψ/ (/ min/ (/ x2/ ,/ b/ )/ )/ )/ (/ 10/ )/ 相似/ 地/ 由/ / ψ/ dzi/ ζ/ zi/ =/ min/ (/ ψ/ (/ max/ (/ a/ ,/ z1/ )/ )/ ,/ ψ/ (/ min/ (/ z2/ ,/ b/ )/ )/ )/ (/ 11/ )/ 通过/ 分析/ ψ/ 对/ yi/ 的/ 二阶/ 偏导/ 可知/ 对/ 给定/ 的/ (/ xi/ ,/ zi/ )/ ,/ ψ/ (/ yi/ )/ 为/ 凸函数/ ,/ 故/ 存在/ 全局/ 最小值/ ζ/ yi/ =/ min/ (/ ψ/ (/ y0/ )/ )/ ,/ 其中/ y0/ =/ f/ -/ 1/ (/ 0/ )/ ,/ 而/ 为/ / ψ/ dyi/ 中/ 的/ 分子/ 项/ ./ 通过/ 上述/ 分析/ 可见/ ,/ 一维/ 松弛/ 度量/ 空间/ 的/ 参数/ ζ/ =/ min/ (/ ψ/ )/ 与/ 有限/ 闭/ 区域/ [/ a/ ,/ b/ ]/ 的/ 边界值/ 及/ (/ xi/ ,/ yi/ ,/ zi/ )/ 间/ 的/ 大小/ 顺序/ 相关/ ./ 当/ 边界值/ 为/ (/ a/ ,/ b/ )/ 时/ ,/ 三角形/ 不等性/ 参数/ ζ/ 1/ 为/ Page6/ 当/ 松弛/ 度量/ 空间/ 维度/ 增加/ 时/ ,/ 设/ 每维/ 坐标/ 取值/ 边界/ [/ a/ ,/ b/ ]/ 相等/ ,/ 则/ ψ/ i/ 的/ 最小值/ ζ/ i/ 均/ 与/ 一/ 维空间/ 的/ 参数/ ζ/ 1/ 相同/ ,/ 因此/ N/ 维空间/ 中/ 的/ 参数/ ψ/ N/ 为/ 故/ N/ 维/ 松弛/ 三角形/ 不等性/ 参数/ ζ/ N/ =/ min/ (/ ψ/ N/ )/ 的/ 下限/ 为/ 一维/ 松弛/ 度量/ 空间/ 的/ 参数/ ζ/ 1/ ,/ 且/ 有/ 不等式/ 关系/ ζ/ N/ / ζ/ 1/ ,/ 而/ ζ/ 1/ 由/ 区域/ 的/ 边界值/ (/ a/ ,/ b/ )/ 决定/ ./ 图/ 4/ 显示/ 了/ [/ a/ ,/ b/ ]/ =/ [/ 1/ ,/ 10/ ]/ 时/ ψ/ 1/ 的/ 概率分布/ ,/ 为了/ 重点/ 观察/ 松弛/ 度量/ 空间/ 容纳/ TIV/ 的/ 能力/ ,/ 图中仅/ 给出/ 了/ ψ/ 1/ / 1/ 的/ 概率密度/ ./ ψ/ 1/ 在/ (/ x/ ,/ y/ ,/ z/ )/ =/ (/ 10/ ,/ 4.1/ ,/ 1/ )/ 处/ 取得/ 最小值/ ζ/ 1/ =/ 0.4065/ ;/ 将/ [/ a/ ,/ b/ ]/ 扩展/ 到/ [/ 1/ ,/ 50/ ]/ ,/ ψ/ 1/ 在/ (/ x/ ,/ y/ ,/ z/ )/ =/ (/ 50/ ,/ 13.8/ ,/ 1/ )/ 处/ 取得/ 最小值/ ψ/ 1/ =/ 0.3519/ (/ 图中/ 未/ 显示/ )/ ./ 这/ 表明/ ζ/ 1/ 由/ 区间/ [/ a/ ,/ b/ ]/ 边界值/ 决定/ ,/ 当/ x/ ,/ z/ 分别/ 在/ 上下/ 边界/ 取值/ 且/ y/ 位于/ x/ ,/ z/ 中/ 特定/ 位置/ 时/ 出现/ 最/ 严重/ TIV/ ,/ 且/ ζ/ 1/ 随/ [/ a/ ,/ b/ ]/ 的/ 跨度/ 增大/ 而/ 减小/ ./ 不失/ 一般性/ ,/ 设/ x/ >/ z/ ,/ 当/ z/ -/ →/ 0/ 或/ x/ +/ →/ 时/ ζ/ 1/ 能降/ 至/ 足够/ 小/ ,/ 因此/ 可/ 支持/ 互联网/ 时延/ 空间/ 中/ 任意/ 单个/ TIV/ 的/ 精确/ 嵌入/ ./ 仿真/ 还/ 发现/ ,/ 一维/ 松弛/ 度量/ 空间/ 中/ TIV/ 的/ 比例/ 为/ P/ (/ ψ/ 1/ / 1/ )/ ≈/ 0.33/ ,/ 且/ 该/ 比例/ 与/ (/ a/ ,/ b/ )/ 具体/ 取值/ 无关/ ./ 从表/ 1/ 可见/ ,/ TIV/ 所/ 占/ 比例/ P/ (/ ψ/ 1/ / 1/ )/ 随着/ 维度/ N/ 增加/ 而/ 降低/ ,/ 同时/ 参数/ ζ/ N/ 随着/ 维度/ N/ 增加/ 而/ 上升/ ,/ 表明/ 高/ 维空间/ 中/ TIV/ 违反/ 三角形/ 不等性/ 的/ 严重/ 程度/ 有所/ 下降/ ./ 注意/ ,/ 表/ 1/ 中/ P/ (/ ψ/ d/ / 1/ )/ 为/ 松弛/ 度量/ 空间/ 中/ 任意/ 三角形/ 中/ TIV/ 所/ 占/ 比例/ ,/ 反映/ 了/ KL/ 距离/ 空间/ 的/ 固有/ 属性/ ./ 而/ 在/ 互联网/ 时延/ 测量/ 数据/ 集中/ ,/ TIV/ 比例/ 通常/ 大于/ 表/ 1/ 中高/ 维空间/ 的/ P/ (/ ψ/ N/ / 1/ )/ ./ 由于/ 实测/ 时延/ 集合/ 构成/ 的/ 三角形/ 总数/ 远/ 小于/ 嵌入/ 空间/ 能/ 容纳/ 的/ 所有/ 可能/ 三角形/ 数/ ,/ 因此/ 由/ 算法/ 嵌入/ 空间/ 的/ 三角形/ 呈/ 稀疏/ 性/ ,/ 故/ P/ (/ ψ/ d/ / 1/ )/ 小于/ 实测/ TIV/ 比例/ 的/ 现象/ ,/ 并/ 不/ 影响/ 节点/ 的/ 实际/ 嵌入/ 精度/ ,/ 预测/ 时延/ 参数/ ψ/ 的/ 概率密度/ 分布/ 也/ 允许/ 与/ 图/ 4/ 不同/ ./ ζ/ N0/ ./ 40650.43050/ ./ 50170.6525/ P/ (/ ψ/ N/ / 1/ )/ 0.33000/ ./ 14620.06300/ ./ 0142/ 至此/ ,/ 证明/ 了/ 广义/ KL/ 散度/ dKL/ (/ X/ ‖/ Y/ )/ 生成/ 的/ 松弛/ 度量/ 空间/ (/ X/ ,/ d/ ,/ γ/ ,/ ζ/ )/ 满足/ 非/ 负性/ 、/ 松弛/ 对称性/ 和/ 松弛/ 三角/ 不等性/ ,/ 克服/ 了/ 欧式/ 距离/ 度量/ 空间/ 的/ 缺点/ ,/ 充分/ 保留/ 了/ 真实/ 互联网/ 时延/ 特征/ ,/ 从/ 理论/ 上/ 支持/ TIV/ 的/ 嵌入/ ,/ 是/ 适合/ 互联网/ 时延/ 的/ 空间/ 嵌入/ 模型/ ./ 4KL/ _/ vivaldi/ 算法/ 基于/ 松弛/ 度量/ 空间/ (/ X/ ,/ d/ ,/ γ/ ,/ ζ/ )/ ,/ 本文/ 提出/ 网络/ 坐标/ 算法/ KL/ _/ vivaldi/ ./ 算法/ 以/ 分布式/ 网络/ 坐标/ 算法/ vivaldi/ 为/ 基础/ ,/ 采用/ KL/ 距离/ 替代/ 欧式/ 距离/ 定义/ 节点/ 时延/ ./ 由于/ 更改/ 了/ 距离/ 计算公式/ ,/ 节点/ 间/ 不/ 对称/ 的/ 双向/ 距离/ 无法/ 对应/ vivaldi/ 算法/ 设定/ 的/ 弹簧/ 势能/ 概念/ ,/ 因此/ KL/ _/ vivaldi/ 重点/ 修改/ 了/ 节点/ 坐标/ 迭代/ 步骤/ ,/ 引入/ 了/ 双向/ 不/ 对称/ 时延/ 对/ 节点/ 坐标/ 的/ 影响/ ./ 算法/ 的/ 伪/ 代码/ 如/ 算法/ 1/ 所示/ ./ 算法/ 1/ ./ KL/ _/ vivaldi/ 算法/ ./ 输入/ :/ 测量/ 实验/ 矩阵/ 犇/ 输出/ :/ 节点/ 坐标/ 矩阵/ 犆/ 和/ 预测/ 时犇/ ^/ X/ =/ rand/ // // 随机/ 分配/ 每个/ 节点/ 的/ 初始/ 坐标/ foreachXiwhile/ (/ e/ >/ tolerance/ )/ foreachXj/ // // 计算/ 节点/ Xi/ 和/ Xj/ 的/ 不/ 对称/ KL/ 距离/ // // 计算/ 双向/ 预测/ 时延/ 与/ 测量/ 时延/ 的/ 误差/ // // 计算/ 引起/ 误差/ 的/ 方向/ 向量/ // // 计算/ 迭代/ 参数/ // // 修改/ Xi/ 和/ Xj/ 的/ 坐标/ Page7endendendendC/ ←/ X/ ,/ 犇/ ^/ =/ KL/ (/ C/ )/ KL/ _/ vivaldi/ 算法/ 以/ 时延/ 矩阵/ 为/ 输入/ ,/ 以/ 最小化/ 节点/ KL/ 距离/ 与/ 测量/ 距离/ 的/ 误差/ 为/ 优化/ 目标/ ,/ 通过/ 迭代/ 收敛/ 到/ 节点/ 的/ 最佳/ 坐标/ C/ ./ 初始化/ 时/ 算法/ 为/ 节点/ 随机/ 分配/ 大于/ 0/ 的/ 初始/ 坐标值/ ,/ 节点/ 依据/ 到/ 一组/ 邻居/ 节点/ 的/ 测量/ 时延/ 优化/ 自身/ 坐标/ ./ 对/ 节点/ Xi/ ,/ 根据/ 当前/ 坐标值/ 计算/ 它/ 到/ 邻居/ 节点/ Xj/ 的/ KL/ 距离/ ,/ 得到/ 双向/ 误差/ e/ 和/ e/ ^/ ;/ 同时/ ,/ 根据/ 节点/ Xi/ 和/ Xj/ 的/ 坐标/ ,/ 计算/ 方向/ 向量/ 犱/ 犻/ 狉/ ,/ 其中/ 狌/ 表示/ 单位向量/ ./ 节点/ Xi/ 根据/ 时/ 延误/ 差及/ 犱/ 犻/ 狉/ 方向/ ,/ 对/ 节点/ Xi/ 和/ Xj/ 的/ 坐标/ 进行/ 一次/ 微小/ 调整/ ./ 迭代/ 执行/ 上述/ 过程/ ,/ 直到/ 误差/ 小于/ 设定/ 的/ 门/ 限值/ ,/ 算法/ 结束/ 并/ 输出/ 节点/ 的/ 最优/ 坐标值/ ./ KL/ _/ vivaldi/ 在/ 关键步骤/ 上/ 对/ vivaldi/ 算法/ 进行/ 修改/ ./ 首先/ 采用/ 式/ (/ 5/ )/ 的/ KL/ 距离/ 替代/ 欧式/ 距离/ 计算/ 节点/ 预测/ 时延/ ./ 其次/ 针对/ 不/ 对称/ KL/ 距离/ ,/ 引入/ 双向/ 误差/ e/ 和/ e/ ^/ ,/ 分别/ 表示/ 从/ 节点/ Xi/ 到/ Xj/ 的/ 时/ 延误/ 差/ 以及/ 节点/ Xj/ 到/ Xi/ 的/ 反向/ 误差/ ./ 在/ vivaldi/ 算法/ 中/ ,/ 由于/ 误差/ e/ 与/ 时延/ 方向/ 无关/ ,/ 因此/ 一端/ 节点/ 预测/ 误差/ 的/ 降低/ 意味着/ 另一端/ 节点/ 的/ 误差/ 也/ 同步/ 降低/ ./ 如果/ 沿用/ vivaldi/ 节点/ 坐标/ 的/ 迭代/ 计算公式/ ,/ 仅/ 利用/ 节点/ Xi/ 到/ Xj/ 的/ 单向/ 预测/ 误差/ e/ 调整/ 节点/ Xi/ 的/ 坐标/ ,/ 则/ 可能/ 出现/ 与/ Xj/ 坐标/ 优化/ 需求/ 互斥/ 的/ 反向/ 迭代/ ./ 也就是说/ ,/ 修改/ 节点/ Xi/ 的/ 坐标/ 使/ Xi/ 到/ Xj/ 的/ 误差/ e/ 降低/ 时/ ,/ 却/ 增大/ 了/ 节点/ Xj/ 到/ Xi/ 的/ 误差/ ,/ 节点/ 坐标/ 难以/ 同/ 向/ 收敛/ ./ 为此/ KL/ _/ vivaldi/ 算法/ 在/ 调整/ 节点/ Xi/ 坐标/ 的/ 同时/ ,/ 也/ 调整/ 节点/ Xj/ 的/ 坐标/ ,/ 使/ 两个/ 节点/ 坐标/ 进行/ 同/ 向/ 优化/ ./ 当/ 误差/ e/ 和/ e/ ^/ 同/ 为/ 正数/ 时/ ,/ 表示/ 两个/ 节点/ 当前/ 的/ KL/ 距离/ 均/ 大于/ 真实/ RTT/ ,/ 节点/ 需要/ 相互/ 靠近/ 以/ 拉近/ 距离/ ;/ 当/ 误差/ e/ 和/ e/ ^/ 同/ 为/ 负数/ 时/ ,/ 表示/ 两个/ 节点/ 当前/ KL/ 距离/ 均/ 小于/ 真实/ RTT/ ,/ 节点/ 应/ 相互/ 远离/ 以/ 增加/ 距离/ ./ 这/ 两种/ 情况/ 都/ 表明/ 节点/ 当前/ 的/ 相对/ 位置/ 与/ 双向/ 误差/ 大小/ 的/ 相对/ 关系/ 吻合/ ,/ 两个/ 节点/ 应/ 同时/ 延着/ 犱/ 犻/ 狉/ 指示/ 的/ 方法/ 调整/ 坐标/ ./ 当/ 误差/ e/ 与/ e/ ^/ 符号/ 相反/ 时/ ,/ 表示/ 一个/ 节点/ 要求/ 远离/ ,/ 而/ 另/ 一个/ 节点/ 要求/ 靠近/ ./ 这种/ 情况/ 表示/ 两个/ 节点/ 当前/ 的/ 坐标/ 位置/ 相互/ 矛盾/ ,/ 沿着/ 现有/ 节点/ 方向/ 犱/ 犻/ 狉/ 继续/ 调整/ 无法/ 实现/ 坐标/ 收敛/ ./ 例如/ 在/ 一维/ 松弛/ 度量/ 空间/ 中/ ,/ 当/ xi/ >/ xj/ 时/ ,/ d/ (/ xi/ ‖/ xj/ )/ >/ d/ (/ xj/ ‖/ xi/ )/ 成立/ ./ 由于/ 节点/ 的/ 初始/ 坐标/ 为/ 随机/ 分配/ ,/ 如果/ 节点/ 间/ 测量/ 时延/ dij/ </ dji/ ,/ 而/ 两个/ 节点/ 坐标/ 却/ 被/ 分配/ 到/ xi/ >/ xj/ 平面/ 时/ ,/ 将/ 无法/ 满足/ 双向/ 同步/ 优化/ 要求/ ./ 因此/ 算法/ 根据/ 双向/ 时延/ 的/ 关系/ ,/ 将/ 节点/ 从/ xi/ >/ xj/ 调整/ 到/ xi/ </ xj/ 平面/ 空间/ ./ 此时/ 节点/ 将/ 沿着/ 与/ 犱/ 犻/ 狉/ 相反/ 的/ 方向/ 调整/ 节点/ 位置/ ,/ 使/ 节点/ 回归/ 到/ 合理/ 的/ 位置/ 空间/ ,/ 满足/ 双向/ 坐标/ 优化/ 的/ 同/ 向/ 需求/ ./ 除了/ 利用/ 误差/ e/ 和/ e/ ^/ 的/ 符号/ 关系/ 调整/ 节点/ 坐标/ 的/ 相对/ 位置/ ,/ 误差/ e/ 和/ e/ ^/ 的/ 数值/ 也/ 用于/ 控制/ 节点/ 坐标/ 的/ 迭代/ 步长/ 及/ 权重/ ./ 此处/ 借鉴/ 了/ vivaldi/ 算法/ 的/ 思路/ ,/ 节点/ 坐标/ 迭代/ 步长/ 为/ 误差/ e/ 与/ 参数/ δ/ 的/ 乘积/ ,/ 参数/ δ/ 的/ 选择/ 影响/ 算法/ 的/ 收敛/ 速度/ ,/ δ/ 为/ 小于/ 1/ 的/ 常数/ ./ 由于/ KL/ 距离/ 的/ 不对称性/ ,/ 节点/ 的/ 迭代/ 参数/ 也/ 从/ 不同/ 方向/ 分担/ 对/ 误差/ 的/ 调整/ :/ δ/ i/ 表示/ 节点/ Xi/ 的/ 调整/ 参数/ ,/ δ/ j/ 为/ 节点/ Xj/ 的/ 调整/ 参数/ ,/ le/ 和/ l/ 珓/ e/ 分别/ 为/ 双向/ 预测/ 的/ 相对误差/ (/ le/ =/ e/ // d/ )/ ./ 算法/ 1/ 的/ 集中式/ KL/ _/ vivaldi/ 可/ 方便/ 地/ 扩展/ 为/ 分布式/ 算法/ ./ 当/ 网络/ 规模较/ 小时/ ,/ 由/ 集中式/ 服务器/ 执行/ KL/ _/ vivaldi/ 算法/ ,/ 承担/ 测量/ 节点/ 时延/ 和/ 网络/ 坐标/ 计算/ 的/ 工作/ ./ 当/ 网络/ 规模/ 扩大/ 时/ ,/ 集中式/ 服务器/ 成为/ 算法/ 性能/ 瓶颈/ ,/ 因此/ 采用/ 分布式/ 策略/ ,/ 由/ 每个/ 节点/ 独立/ 地/ 连续/ 执行/ KL/ _/ vivaldi/ 算法/ ./ 在/ 系统/ 初始化/ 阶段/ ,/ 每个/ 节点/ 采用/ 随机/ 选择/ 或/ 近邻/ 选择/ 等/ 方法/ 指定/ 一组/ 邻居/ 节点/ ,/ 利用网络/ 测量/ 工具/ 周期性地/ 获取/ 邻居/ 节点/ 的/ 最新/ 双向/ 时延/ ,/ 并/ 读取/ 邻居/ 节点/ 当前/ 坐标值/ ,/ 以此/ 作为/ KL/ _/ vivaldi/ 算法/ 的/ 输入/ 参数/ 进行/ 计算/ ,/ 迭代/ 收敛/ 至/ 稳定/ 的/ 网络/ 坐标值/ ./ 当新/ 节点/ 加入/ 时/ ,/ 选择/ 一组/ 已/ 具有/ 网络/ 坐标/ 的/ 节点/ ,/ 执行/ KL/ _/ vivaldi/ 算法/ 计算/ 自身/ 坐标/ ;/ 当/ 节点/ 的/ 某/ 邻居/ 节点/ 退出/ 系统/ 或/ 失效/ 时/ ,/ 选择/ 有效/ 节点/ 更换/ 邻居/ 列表/ ,/ 刷新/ 节点/ 坐标值/ ,/ 因此/ KL/ _/ vivaldi/ 算法/ 能够/ 适应/ 网络结构/ 的/ 动态变化/ ./ 当某/ 节点/ 上/ 的/ 高层/ 应用/ 需要/ 获取/ 网络/ 中/ 任意/ 节点/ 的/ 时/ 延时/ ,/ 无需/ 启动/ 网络/ 测量/ 工具/ ,/ 通过/ 读取/ 对方/ 节点/ 当前/ 网络/ 坐标值/ ,/ 直接/ 计算/ 即可/ 得到/ 预测/ 时延/ ./ 5/ 算法/ 仿真/ 与/ 验证/ 为了/ 验证/ 松弛/ 度量/ 空间/ 对/ 网络/ 节点/ 嵌入/ 的/ 有效性/ ,/ 本文/ 基于/ 3/ 个/ 网络/ 测量/ 时延/ 矩阵/ 集合/ Meridian/ [/ 27/ ]/ 、/ King/ ①/ 、/ P2Psim/ ②/ ,/ 采用/ KL/ _/ vivaldi/ 算法/ 预测/ 时延/ ./ ①/ ②/ Page8/ 其中/ King/ (/ 1740/ 个/ 节点/ )/ 是/ 非对称/ 时延/ 集合/ ,/ 而/ Meridian/ (/ 2500/ 个/ 节点/ )/ 与/ P2Psim/ (/ 1895/ 个/ 节点/ )/ 是/ 对称/ 时延/ 集合/ ./ 仿真/ 分析/ 了/ 节点/ 嵌入/ 精确度/ ,/ 讨论/ 了/ 空间/ 嵌入/ 维度/ 对/ 预测/ 误差/ 的/ 影响/ ,/ 重点/ 分析/ 了/ 衡量/ (/ X/ ,/ d/ ,/ γ/ ,/ ζ/ )/ 松弛/ 度量/ 空间/ 三角形/ 不等性/ 参数/ ζ/ 和/ 不对称性/ 参数/ γ/ 的/ 属性/ ,/ 说明/ 了/ 算法/ 在/ 非/ 对称性/ 时延/ 和/ TIV/ 预测/ 方面/ 的/ 有效性/ ,/ 最后/ 分析/ 了/ 参数/ δ/ 对/ KL/ _/ vivaldi/ 算法/ 收敛/ 速度/ 的/ 作用/ ./ 仿真/ 结果/ 取/ 100/ 次/ 计算/ 的/ 均值/ ./ 仿真/ 首先/ 对比/ 了/ KL/ _/ vivaldi/ 算法/ 和/ vivaldi/ 算法/ 的/ 嵌入/ 精确度/ ./ 分别/ 采用/ 两种/ 算法/ 将/ 3/ 个/ 时延/ 数据/ 集合/ 嵌入/ 松弛/ 度量/ 空间/ ,/ 计算/ 预测/ 时延/ 与/ 测量/ 时延/ 的/ 相对误差/ ,/ 其/ 累积/ 概率/ 绘制/ 在/ 图/ 5/ 中/ ./ 图例/ “/ KL/ ”/ 表示/ 基于/ KL/ 距离/ 的/ KL/ _/ vivaldi/ 算法/ ,/ “/ EU/ ”/ 表示/ 基于/ 欧式/ 距离/ 的/ vivaldi/ 算法/ ./ 图/ 5/ 表明/ 虽然/ 两种/ 算法/ 总体/ 上/ 都/ 能/ 将/ 相对误差/ 小于/ 1/ 的/ 总量/ 控制/ 在/ 90/ %/ 以上/ ,/ 但/ KL/ _/ vivaldi/ 在/ 获得/ 小/ 误差/ 的/ 性能/ 上/ 优于/ vivaldi/ 算法/ ,/ 这是/ 源于/ KL/ _/ vivaldi/ 算法/ 能够/ 更多地/ 保持/ 时延/ 空间/ 的/ 真实/ 属性/ ./ KL/ _/ vivaldi/ 和/ vivaldi/ 算法/ 的/ 嵌入/ 精确度/ 均/ 与/ 时延/ 数据/ 集合/ 中/ TIV/ 比例/ 相关/ ./ 当/ TIV/ 比例/ 较/ 低时/ ,/ KL/ _/ vivaldi/ 算法/ 对/ 嵌入/ 精确度/ 的/ 提升/ 并/ 不/ 显著/ ./ P2Psim/ 数据/ 集合/ 中/ TIV/ 的/ 比例/ 约/ 为/ 4/ %/ ,/ Meridian/ 和/ King/ 中/ TIV/ 比例/ 分别/ 为/ 7/ %/ 和/ 9/ %/ ,/ 普遍/ 低于/ 互联网/ 中/ 平均/ TIV/ 的/ 比例/ ./ 其/ 可能/ 的/ 原因/ 之一/ 是/ ,/ 时延/ 测量/ 者/ 有意/ 剔除/ 了/ 时延/ 集合/ 中/ 部分/ TIV/ ,/ 以/ 降低/ 可能/ 造成/ 的/ 影响/ [/ 8/ ]/ ./ 为了/ 验证/ KL/ _/ vivaldi/ 算法/ 在/ 高/ TIV/ 比例/ 时/ 的/ 性能/ 优势/ ,/ 以/ Meridian/ 集合/ 为例/ ,/ 通过/ 仿真/ 模拟/ 网络/ 时延/ 动态变化/ ,/ 在/ 测量/ 时延/ 上/ 添加/ 服从/ 均匀/ 随机/ 分布/ 的/ 时延/ 噪声/ ,/ 将/ 时延/ 数据/ 集合/ 中/ TIV/ 的/ 比例/ 从/ 7/ %/ 提升/ 至/ 22/ %/ ,/ 生成/ 新/ 的/ 时延/ 数据/ 集合/ ./ 另一方面/ ,/ 提高/ 短时/ 延/ 的/ 精度/ 对/ 预测/ TIV/ 起到/ 重要/ 作用/ [/ 28/ ]/ ./ 为此/ ,/ 分别/ 根据/ 原始/ 时延/ 和/ 噪声/ 时延/ 采用/ KL/ _/ vivaldi/ 和/ vivaldi/ 算法/ 将/ 节点/ 嵌入/ 松弛/ 度量/ 空间/ ,/ 比较/ 两种/ 算法/ 在/ 不同/ TIV/ 比例/ 下/ 对/ 短时/ 延/ (/ dij/ / 30ms/ )/ 的/ 预测/ 相对/ 精确度/ ./ 从图/ 6/ 可见/ ,/ 短时/ 延/ 的/ 预测/ 误差/ 整体/ 高于/ 图/ 5/ 中/ 全集/ 时延/ 的/ 预测/ 误差/ ./ 因为/ 对/ 短时/ 延/ 而言/ ,/ 即便/ 较/ 小/ 的/ 绝对/ 预测/ 误差/ 也/ 会/ 造成/ 较大/ 的/ 相对/ 预测/ 误差/ ./ 当/ TIV/ 比例/ 为/ 7/ %/ 时/ ,/ KL/ _/ vivaldi/ 算法/ 对/ 短时/ 延/ 的/ 预测/ 虽然/ 优于/ vivaldi/ 算法/ ,/ 但/ 预测/ 性能/ 改善/ 程度/ 并/ 不/ 显著/ ./ 当/ TIV/ 比例/ 升高/ 至/ 22/ %/ 时/ ,/ KL/ _/ vivaldi/ 算法/ 对/ 短时/ 延/ 的/ 预测/ 精度/ 与/ TIV/ 为/ 7/ %/ 时/ 相似/ ,/ 而/ vivaldi/ 算法/ 的/ 预测/ 精度/ 则/ 出现/ 明显/ 下降/ ./ 这/ 表明/ KL/ _/ vivaldi/ 算法/ 对/ 高/ TIV/ 比例/ 具有/ 良好/ 的/ 容纳/ 能力/ ./ 前文/ 证明/ 了/ 增加/ 空间/ 维度/ N/ 能够/ 扩展/ 空间/ 不对称性/ ,/ 同时/ 降低/ TIV/ 违反/ 三角形/ 不等性/ 的/ 严重/ 程度/ ./ 图/ 7/ 以/ King/ 时延/ 数据/ 集合/ 为例/ ,/ 显示/ 了/ 相对/ 预测/ 误差/ 与/ 松弛/ 度量/ 空间/ 维度/ 的/ 关系/ ./ 当/ 采用/ 2/ 维空间/ 时/ ,/ 嵌入/ 相对误差/ 较大/ ;/ 而/ 采用/ 4/ 维/ 、/ 8/ 维和/ 16/ 维空间/ 时/ ,/ 嵌入/ 误差/ 不断/ 降低/ ,/ 但/ 降低/ 幅度/ 的/ 差距/ 越来越/ 小/ ,/ 表明/ 进一步提高/ 嵌入/ 空间/ 维度/ 对/ 误差/ 的/ 改善/ 作用/ 持续/ 降低/ ./ 除了/ 特别/ 标出/ 维数/ 的/ 图表/ ,/ 本文/ 均/ 采用/ 8/ 维/ 松弛/ 度量/ 空间/ 进行/ 仿真/ ,/ 从而/ 兼顾/ 时延/ 不对称性/ 和/ 反/ 三角/ 性/ 的/ 需求/ ./ Page9KL/ _/ vivaldi/ 算法/ 的/ 主要/ 贡献/ 是/ 建立/ 了/ 支持/ TIV/ 反/ 三角/ 的/ 松弛/ 度量/ 空间/ ./ 根据/ 定义/ 2/ ,/ 对/ 任意/ TIV/ 存在/ 常数/ ζ/ </ 1/ 使得/ d/ (/ p/ ,/ r/ )/ +/ d/ (/ r/ ,/ q/ )/ >/ ζ/ ·/ d/ (/ p/ ,/ q/ )/ 成立/ ,/ ζ/ </ 1/ 越小/ 表明/ 空间/ 违反/ 三角形/ 不等性/ 的/ 程度/ 越/ 严重/ ,/ 三角形/ 中/ 两条/ 中继/ 路由/ 比/ 直达/ 路由/ 缩减/ 的/ 时延/ 越大/ ,/ 对/ 业务/ 时延/ 的/ 优化/ 效果/ 越/ 显著/ ./ 式/ (/ 8/ )/ 定义/ 了/ 三角形/ 中/ 两/ 跳/ 中继/ 路由/ 时延/ 之/ 和/ 与/ 默认/ 直达/ 路由/ 时延/ 的/ 比值/ ψ/ ,/ 仿真/ 对比/ 测量/ 时延/ 与/ 预测/ 时延/ 的/ ψ/ 分布/ ,/ 以此/ 反映/ KL/ _/ vivaldi/ 松弛/ 度量/ 空间/ 支持/ TIV/ 的/ 有效/ 度/ ./ 以/ King/ 数据/ 集合/ 为例/ ,/ 图/ 8/ 显示/ 了/ 测量/ 时延/ 与/ 预测/ 时延/ 参数/ ψ/ (/ ψ/ / 1/ )/ 的/ 概率密度/ ./ 图/ 8/ 中/ 两种/ 时延/ 参数/ ψ/ 的/ 概率分布/ 基本/ 相近/ ,/ 表明/ KL/ _/ vivaldi/ 算法/ 较/ 好/ 地/ 保留/ 了/ 测量/ 时延/ 空间/ 图/ 9KL/ _/ vivaldi/ 预测/ 误差/ 分布/ KL/ _/ vivaldi/ 算法/ 的/ 预测/ 误差/ 解释/ 了/ 图/ 8/ 中/ 测量/ 时延/ 参数/ ψ/ 的/ 特征/ ./ 当/ TIV/ 程度/ 严重/ 时/ ,/ 即便/ 在/ 松弛/ 度量/ 空间/ 也/ 难以/ 找到/ 高/ 精确/ 的/ 节点/ 嵌入/ 位置/ ,/ KL/ 散度/ 定义/ 的/ 距离/ 扭曲/ 程度/ 相比/ 于/ 测量/ 时延/ 空间/ 仍/ 有/ 不足/ ./ 通过/ 仿真/ 发现/ ,/ KL/ _/ vivaldi/ 算法/ 预测/ 的/ TIV/ 比例/ 大约/ 是/ 真实/ 时延/ 空间/ 的/ 1/ // 3/ ~/ 1/ // 2/ ./ 对/ 工程/ 实践/ 的/ 反/ 三角/ 属性/ ./ 分布/ 在/ (/ 0/ ,/ 0.7/ ]/ 区间/ 上/ 的/ ψ/ 对应/ 的/ TIV/ 反/ 三角/ 程度/ 相对/ 严重/ ./ 在/ 此/ 区间/ 内/ ,/ 预测/ 时延/ ψ/ 的/ 概率密度/ 低于/ 测量/ 数据/ ;/ 而/ 当/ ψ/ >/ 0.7/ 时/ ,/ 预测/ 时延/ ψ/ 的/ 概率密度/ 大于/ 测量/ 数据/ ./ 这/ 表明/ KL/ _/ vivaldi/ 算法/ 预测/ 轻度/ TIV/ 的/ 能力/ 较强/ ,/ 而/ 预测/ 严重/ TIV/ 的/ 能力/ 相对/ 较弱/ ./ 基于/ 预测/ 时延/ ψ/ 可能/ 存在/ 的/ 偏差/ ,/ 节点/ 在/ 搜索/ 中继/ 路由/ 时/ ,/ 可/ 在/ 基于/ 节点/ 坐标/ 计算/ 的/ 参数/ ψ/ 上/ ,/ 增加/ 相应/ 的/ 修正/ 因子/ ,/ 以/ 提高/ 预测/ 的/ 准确性/ ./ 参数/ ψ/ 表现/ 出/ 的/ 分布/ 特性/ 本质/ 上/ 由/ KL/ _/ vivaldi/ 算法/ 的/ 预测/ 误差/ 决定/ ./ 对/ 测量/ 时延/ 所有/ 数据/ 取整/ ,/ 同一个/ 整数/ 时延/ 值/ 对应/ 多个/ 预测/ 误差/ ,/ 将/ 其/ 均值/ 和/ 方差/ 边界/ 表示/ 为/ 纵向/ 小/ 线段/ 绘制/ 在/ 图/ 9/ 中/ ./ 图中/ 横坐标/ 表示/ 测量/ 时延/ 的/ 整数/ 取值/ ,/ 例如/ P2Psim/ 整数/ 时延/ 集合/ 的/ 取值/ 范围/ 为/ 1ms/ 到/ 541ms/ ;/ 纵坐标/ 表示/ 预测/ 误差/ ,/ 单位/ 为/ ms/ ./ 图/ 9/ 表明/ 随着/ 测量/ 时延/ 的/ 增大/ ,/ 预测/ 误差/ 的/ 均值/ 也/ 随之/ 上升/ ./ 当/ 测量/ 时延/ 较/ 小/ (/ 例如/ 小于/ 50ms/ )/ 时/ ,/ 预测/ 误差/ 多/ 呈现/ 负值/ ,/ 表示/ 预测/ 时延/ 大于/ 测量/ 时延/ ;/ 而/ 测量/ 时延/ 较大/ 时/ ,/ 预测/ 误差/ 多为/ 正值/ ,/ 表示/ 预测/ 时延/ 小于/ 测量/ 时延/ ;/ 在/ 中段/ 测量/ 时延/ 区间/ (/ 50ms/ ~/ 250ms/ )/ ,/ 误差/ 则/ 各有/ 正负/ ./ 这/ 表明/ KL/ _/ vivaldi/ 算法/ 易/ 高估/ 小时/ 延/ ,/ 而/ 低估/ 大/ 时延/ ,/ 导致/ 预测/ TIV/ 的/ 比例/ 低于/ 真实/ 值/ ,/ 预测/ TIV/ 的/ 严重/ 程度/ 整体/ 下降/ ./ 而言/ ,/ 虽然/ 节点/ 难以预测/ 所有/ 中继/ 路由/ ,/ 但/ 仍然/ 能/ 估计/ 一定/ 比例/ 的/ 可用/ 中继/ 路由/ ./ 前文/ 提到/ 基于/ 矩阵/ 分解/ 的/ IDES/ 算法/ 也/ 能/ 保持/ 时延/ 的/ TIV/ 属性/ ./ 由于/ IDES/ 只能/ 处理/ 对称/ 时延/ 矩阵/ ,/ 因此/ 以/ P2Psim/ 集合/ 为例/ ,/ 利用/ IDES/ 奇异/ 矩阵/ 分解/ SVD/ 算法/ 预测/ 节点/ 时延/ (/ 随机/ 选择/ 20/ 个/ 地标/ Page10/ 节点/ )/ ,/ 图/ 10/ 绘制/ 了/ 参数/ ψ/ 的/ 概率分布/ ,/ 与/ 图/ 8/ 趋势/ 基本/ 相近/ ./ 与/ KL/ _/ vivaldi/ 不同/ 的/ 是/ ,/ IDES/ 算法/ 的/ 参数/ ψ/ 在/ 小于/ 0.5/ 的/ 区域/ 上/ ,/ 虽然/ 仍/ 低于/ 实际/ 概率密度/ ,/ 但/ 比图/ 8/ 有所增加/ ,/ 说明/ 较/ 多/ 地/ 形成/ 了/ 反/ 三角/ 程度/ 严重/ 的/ TIV/ ./ 这是/ 由于/ IDES/ 在/ 高/ 时延/ 区间/ 的/ 负/ 误差/ 较/ 多/ ,/ 负/ 误差/ 表示/ 预测/ 时延/ 大于/ 测量/ 时延/ ,/ 高估/ 的/ 长边/ 导致/ TIV/ 严重/ 程度/ 增加/ ./ 另外/ IDES/ 对/ 100ms/ 以下/ 小时/ 延/ 的/ 估计/ 误差/ 波动/ 范围/ 偏/ 大/ ,/ 且/ 均值/ 多为/ 负值/ ,/ 说明/ IDES/ 也/ 同样/ 存在/ 高估/ 小时/ 延/ 的/ 问题/ ./ KL/ _/ vivaldi/ 算法/ 还/ 支持/ 时延/ 空间/ 的/ 不对称性/ ./ 基于/ 3/ 个/ 时延/ 数据/ 集合/ ,/ 仿真/ 计算/ 测量/ 时延/ 与/ 预测/ 时延/ 的/ 松弛/ 对称性/ 参数/ γ/ (/ 此处/ γ/ 表示/ 双向/ 时延/ 差/ 的/ 绝对值/ )/ ,/ 将/ 其/ 概率密度/ 绘制/ 在/ 图/ 11/ 中/ ./ 图中/ King/ 等/ 3/ 条/ 曲线/ 分别/ 表示/ 3/ 个/ 预测/ 时延/ 集合/ 的/ 参数/ γ/ ,/ Kingrtt/ 表示/ 真实/ 测量/ 时延/ 的/ 参数/ γ/ ,/ 注意/ 由于/ γ/ 参数/ 概率密度/ 分布/ 范围/ 较大/ ,/ 图/ 11/ 的/ 纵坐标/ 为/ 对数/ 坐标/ ./ King/ 测量/ 时延/ 的/ 参数/ γ/ 分布/ 在/ [/ 0/ ,/ 174.671/ ms/ ]/ 区间/ ,/ γ/ =/ 0/ 表示/ 两个/ 节点/ 间/ 的/ 双向/ 时延/ 相等/ ,/ γ/ >/ 0/ 表示/ 时延/ 不/ 对称/ ,/ γ/ 越大/ 表示/ 双向/ 时延/ 偏斜/ 越/ 严重/ ./ 虽然/ γ/ 的/ 分布/ 范围/ 较大/ ,/ 但/ 超过/ 84/ %/ 的/ γ/ 小于/ 15/ ,/ 且/ 随着/ γ/ 的/ 增大/ ,/ 概率密度/ 不断/ 下降/ ,/ 因此/ 图/ 11/ 只/ 显示/ 了/ γ/ 在/ [/ 0/ ,/ 15ms/ ]/ 区间/ 上/ 的/ 分布/ ./ 通过/ KL/ _/ vivaldi/ 算法/ 预测/ King/ 时延/ 集合/ 的/ γ/ 参数/ 分布/ 在/ [/ 0/ ,/ 36.4/ ms/ ]/ 的/ 区间/ 内/ ,/ 其/ 分布区/ 间/ 远远/ 小于/ 真实/ γ/ ,/ 并且/ 有/ 超过/ 92/ %/ 的/ γ/ 小于/ 10/ ./ 这/ 表明/ 对于/ 非/ 对称性/ 较为/ 严重/ 的/ 时延/ ,/ KL/ _/ vivaldi/ 算法/ 会/ 低估/ 其/ 偏斜/ 程度/ ./ 但/ 由于/ 严重/ 不/ 对称/ 时延/ 在/ 数据/ 集合/ 中所/ 占/ 比例/ 很/ 低/ ,/ 因此/ 算法/ 整体/ 的/ 精确度/ 不会/ 受到/ 明显/ 影响/ ./ 从图/ 11/ 可见/ ,/ 虽然/ 预测/ γ/ 的/ 取值/ 区间/ 远远/ 小于/ 真实/ γ/ ,/ 但/ 在/ γ/ 集中/ 分布/ 的/ 范围/ 内/ ,/ 预测/ 时延/ 参数/ γ/ 的/ 概率分布/ 与/ 测量/ 时延/ 基本/ 吻合/ ,/ γ/ =/ 0/ 的/ 概率密度/ 大约/ 为/ 16/ %/ ,/ 表明/ 大多数/ 节点/ 间/ 的/ 预测/ 时延/ 均/ 呈现/ 一定/ 的/ 不对称性/ ./ P2Psim/ 和/ Meridian/ 为/ 对称/ 时延/ 集合/ ,/ 参数/ γ/ 恒为/ 零/ ,/ 因此/ 未/ 绘制/ 在/ 图/ 11/ 中/ ./ 在/ γ/ >/ 0/ 区间/ ,/ P2Psim/ 和/ Meridian/ 预测/ 时延/ γ/ 参数/ 的/ 概率密度/ 均/ 小于/ 1/ %/ ,/ 表明/ 绝大部分/ 节点/ 对间/ 的/ 预测/ 时延/ 几乎/ 为/ 双向/ 对称/ ,/ 只有/ 少量/ 的/ 预测/ 时延/ 出现/ 不/ 对称/ 现象/ ./ 这/ 表明/ KL/ _/ vivaldi/ 算法/ 不但/ 支持/ 非对称/ 时延/ ,/ 在/ 对称/ 时延/ 数据/ 集合/ 上/ 也/ 具有/ 良好/ 的/ 适应性/ ./ 最后/ ,/ 由于/ KL/ _/ vivaldi/ 算法/ 更改/ 了/ vivaldi/ 节点/ 坐标/ 更新/ 的/ 迭代/ 方式/ ,/ 因此/ 仿真/ 也/ 分析/ 了/ 迭代/ 参数/ δ/ 对/ 算法/ 收敛/ 速度/ 的/ 影响/ ./ 图/ 12/ 以/ P2Psim/ 时延/ 为例/ ,/ 显示/ 了/ δ/ 取值/ 对/ 算法/ 收敛性/ 的/ 影响/ ./ 图中/ 横坐标/ 为/ 迭代/ 次数/ ,/ 纵坐标/ 为/ 当前/ 迭代/ 过程/ 中/ 所有/ 节点/ 的/ 平均/ 绝对误差/ e/ (/ e/ =/ E/ (/ |/ rtt/ -/ d/ |/ )/ ./ 当/ δ/ =/ 1/ 时/ ,/ 算法/ 初始/ 收敛/ 较/ 快/ ,/ 但/ 由于/ 迭代/ 步长/ 较大/ ,/ 平均/ 绝对误差/ e/ 呈现/ 震荡/ 上升/ 趋势/ ,/ 难以/ 收敛/ 到/ 稳定/ 状态/ ./ 随着/ δ/ 的/ 减小/ ,/ 算法/ 收敛/ 速度/ 放慢/ ,/ 但/ 算法/ 的/ 震荡/ 范围/ 大幅度/ 下降/ ,/ 保证/ 了/ 算法/ 收敛/ 到/ 相对/ 稳定/ 的/ 范围/ ./ 这/ 表明/ 参数/ δ/ 对/ KL/ _/ vivaldi/ 算法/ 收敛/ 速度/ 的/ 影响/ 方式/ 与/ vivaldi/ 算法/ 基本一致/ ./ 6/ 小结/ 基于/ 度量/ 空间/ 的/ 网络/ 坐标/ 系统/ 在/ 理论/ 上/ 难以/ 还/ Page11/ 原/ 网络/ 时延/ 的/ 不对称性/ 和/ TIV/ 属性/ ,/ 无法/ 直接/ 预测/ TIV/ ./ 本文/ 采用/ KL/ 散度/ 定义/ 节点/ 距离/ dKL/ (/ X/ ‖/ Y/ )/ ,/ 提出/ 了/ 将/ 互联网/ 节点/ 嵌入/ 松弛/ 度量/ 空间/ (/ X/ ,/ d/ ,/ γ/ ,/ ζ/ )/ 的/ 网络/ 坐标/ 算法/ KL/ _/ vivaldi/ ./ 仿真/ 表明/ KL/ _/ vivaldi/ 算法/ 平均/ 预测/ 精确度/ 小幅/ 优于/ vivaldi/ 算法/ ,/ 尤其/ 在/ 高/ TIV/ 比例/ 下/ 对/ 短时/ 延/ 的/ 预测/ 精度/ 有/ 明显提高/ ./ 更/ 重要/ 的/ 是/ ,/ KL/ _/ vivaldi/ 算法/ 在/ 理论/ 上/ 支持/ 不/ 对称/ 时延/ 和/ TIV/ 三角形/ 的/ 嵌入/ ,/ 为/ 节点/ 利用网络/ 坐标/ 算法/ 直接/ 预测/ 更/ 短/ 中继/ 路由/ 提供/ 了/ 可能/ ./ 事实上/ ,/ 松弛/ 度量/ 空间/ 的/ 定义/ 不/ 受限于/ 具体/ 网络/ 坐标/ 算法/ ,/ 只要/ 考虑/ 针对/ 非对称/ 时延/ 的/ 处理/ ,/ 即可/ 推广/ 到/ 多种/ 网络/ 坐标/ 算法/ 中/ ./ 然而/ ,/ KL/ _/ vivaldi/ 算法/ 仍然/ 存在/ 改善/ 空间/ ./ 由/ 网络/ 动态性/ 造成/ 的/ 暂态/ TIV/ 并/ 不适/ 用于/ 所有/ 时延/ 优化/ 场景/ ,/ 因此/ KL/ _/ vivaldi/ 算法/ 应/ 考虑/ 判别/ 暂态/ TIV/ ./ 节点/ 可/ 根据/ 历史/ 测量/ 时延/ 的/ 移动/ 平均值/ 或/ 加权/ 值来/ 更新/ 节点/ 坐标/ [/ 29/ ]/ ,/ 以/ 降低/ 暂态/ TIV/ 的/ 概率/ ./ 另一方面/ ,/ 算法/ 预测/ 严重/ TIV/ 能力/ 仍/ 存在/ 一定/ 限制/ ,/ 导致/ 节点/ 难以/ 选择/ 到/ 最佳/ 中继/ 路由/ 甚至/ 错误/ 中继/ 路由/ ./ 因此/ ,/ 未来/ 工作/ 将/ 针对/ 暂态/ TIV/ 判定/ 问题/ 和/ 偏差/ 严重/ 异常/ 节点/ 优化/ 嵌入/ 机制/ ,/ 探索/ 算法/ 的/ 改善/ 思路/ ./ 

