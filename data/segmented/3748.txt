Page1/ 一种/ 保持/ 结点/ 紧凑/ 的/ 虚拟/ 网络/ 映射/ 方法/ 刘新/ 刚怀/ 进鹏/ 高庆/ 一沃/ 天宇/ (/ 北京航空航天大学/ 计算机/ 学院/ 北京/ 100191/ )/ 摘要/ 虚拟/ 网络/ 映射/ 是/ 网络/ 虚拟化/ 中/ 最/ 基本/ 的/ 问题/ 之一/ ./ 虚拟/ 网络/ 映射/ 可/ 分解成/ 结点/ 映射/ 和/ 链路/ 映射/ 两个/ 阶段/ ,/ 之前/ 的/ 研究/ 更加/ 侧重于/ 链路/ 映射/ ,/ 对/ 结点/ 映射/ 只/ 采取/ 简单/ 的/ 方式/ 进行/ ,/ 不利于/ 资源/ 利用率/ 的/ 提高/ ./ 之前/ 的/ 结点/ 映射/ 方法/ 有/ 两个/ 主要/ 问题/ :/ (/ 1/ )/ 优先/ 占用/ 带宽/ 较大/ 的/ 结点/ ,/ 不利于/ 资源/ 的/ 合理配置/ ;/ (/ 2/ )/ 将/ 结点/ 映射/ 与/ 链路/ 映射/ 完全/ 分隔/ 处理/ ,/ 逻辑/ 相邻/ 的/ 虚拟/ 结点/ 可能/ 映射/ 到/ 分散/ 的/ 物理/ 结点/ 上/ ,/ 致使/ 虚拟/ 链路/ 占用/ 更/ 多/ 的/ 网络资源/ ./ 文中/ 提出/ 一种/ 结点/ 紧凑/ 的/ 虚拟/ 网络/ 映射/ 方法/ ,/ 将/ 所有/ 符合条件/ 的/ 物理/ 结点/ 都/ 作为/ 虚拟/ 结点/ 的/ 候选/ 宿主/ ,/ 扩大/ 了/ 宿主/ 的/ 选择/ 空间/ ,/ 有利于/ 资源/ 的/ 合理配置/ ;/ 同时/ 选择/ 那些/ 分布/ 紧凑/ 的/ 结点/ 作/ 宿主/ ,/ 将/ 相邻/ 的/ 虚拟/ 结点/ 映射/ 到/ 邻近/ 的/ 物理/ 结点/ 之上/ ,/ 减少/ 虚拟/ 链路/ 对/ 网络资源/ 的/ 占用/ ./ 实验/ 结果表明/ :/ 文中/ 方法/ 可以/ 提高/ 资源/ 的/ 利用率/ ,/ 并/ 显著/ 地/ 提高/ 了/ 虚拟/ 网络/ 请求/ 的/ 接受/ 率/ ./ 关键词/ 虚拟/ 网络/ ;/ 虚拟/ 网络/ 映射/ ;/ 紧凑/ ;/ 优化/ 1/ 引言/ 网络/ 虚拟化/ [/ 1/ -/ 2/ ]/ 使用/ 虚拟化/ 和/ 网络/ 技术/ 将/ 底层/ 的/ 物理/ 资源/ 组织/ 起来/ ,/ 以/ 虚拟/ 网络/ 的/ 形式/ 向外/ 提供/ 可/ 定制/ 的/ 计算环境/ 供/ 用户/ 按/ 需/ 申请/ 使用/ ./ 虚拟/ 网络/ 由/ 虚拟/ 结点/ 通过/ 虚拟/ 链路/ 连接/ 而成/ ./ 多个/ 虚拟/ 网络/ 可以/ 同时/ 在/ 相同/ 的/ 物理/ 资源/ 上/ 运行/ ,/ 它们/ 之间/ 彼此/ 隔离/ 、/ 相互/ 独立/ ./ 网络/ 虚拟化/ 技术/ 已经/ 成为/ 解决/ 许多/ 问题/ 的/ 重要/ 手段/ ,/ 可以/ 增强/ 网络/ 的/ 灵活性/ 、/ 安全性/ 和/ 可管理性/ ./ 互联网/ 研究/ 人员/ 利用/ 它/ 来/ 构建/ 新/ 的/ 网络结构/ ,/ 部署/ 新/ 的/ 网络协议/ ,/ 增强/ 服务/ 的/ 质量/ 保障/ 能力/ [/ 3/ -/ 5/ ]/ ;/ 云/ 计算/ 研究/ 人员/ 利用/ 它/ 按/ 需/ 动态/ 生成/ 虚拟/ 网络/ 环境/ ,/ 在/ 满足用户/ 需求/ 的/ 同时/ ,/ 最大/ 限度/ 的/ 提高/ 物理/ 资源/ 的/ 利用率/ [/ 6/ ]/ ./ 虚拟/ 网络/ 映射/ 是/ 网络/ 虚拟化/ 中/ 最/ 基本/ 的/ 问题/ 之一/ ./ 它/ 负责/ 为/ 虚拟/ 网络/ 请求/ 分配资源/ ,/ 将/ 虚拟/ 结点/ 映射/ 到/ 物理/ 结点/ (/ 称之为/ 该/ 虚拟/ 结点/ 的/ 宿主/ )/ 上/ ,/ 将/ 虚拟/ 链路/ 映射/ 成/ 物理/ 网络/ 中/ 的/ 一条/ 或者/ 多条/ 路径/ ./ 与/ 互联网/ 中/ 采取/ 尽力而为/ 的/ 策略/ 不同/ ,/ 虚拟/ 网络/ 映射/ 采取/ 资源/ 预留/ 机制/ 为/ 虚拟/ 网络/ 请求/ 分配/ 足额/ 的/ 资源/ 以/ 保障/ 服务质量/ ./ 由于/ 物理/ 资源/ 是/ 有限/ 的/ ,/ 如何/ 在/ 满足/ 需求/ 的/ 前提/ 下/ 提高/ 底层/ 资源/ 的/ 利用率/ 就/ 成/ 了/ 虚拟/ 网络/ 映射/ 的/ 关键/ ./ 虚拟/ 网络/ 映射/ 是/ 一个/ 极具/ 挑战性/ 的/ 问题/ ./ 虚拟/ 网络/ 请求/ 的/ 网络结构/ 具有/ 多样性/ ,/ 虚拟/ 网络/ 映射/ 必须/ 能/ 适应/ 不同/ 的/ 拓扑/ 结构/ ,/ 并且/ 在/ 分配资源/ 时/ 同时/ 满足/ 结点/ 和/ 链路/ 对/ 资源/ 的/ 要求/ [/ 7/ ]/ ;/ 虚拟/ 网络/ 请求/ 动态性/ 强/ ,/ 在/ 进行/ 资源分配/ 时/ 无法/ 获知/ 后续/ 到达/ 的/ 虚拟/ 网络/ 请求/ 的/ 信息/ ./ 即使/ 能/ 事先/ 预知/ 所有/ 虚拟/ 网络/ 请求/ 的/ 信息/ ,/ 虚拟/ 网络/ 映射/ 问题/ 也/ 是/ 一个/ NP/ -/ hard/ 问题/ ,/ 可以/ 转化/ 为/ 多路/ 分离器/ 问题/ [/ 8/ ]/ ;/ 更进一步/ ,/ 即使/ 预先确定/ 结点/ 映射/ ,/ 在/ 流/ 不可分割/ 的/ 情况/ 下/ ,/ 虚拟/ 链路/ 映射/ 问题/ 仍/ 是/ 一个/ NP/ -/ hard/ 问题/ ,/ 可以/ 转化/ 为/ 不可分割/ 流/ 问题/ [/ 9/ ]/ ./ 研究/ 人员/ 提出/ 了/ 多种/ 启发式/ 算法/ 来/ 求解/ 虚拟/ 网络/ 映射/ 问题/ [/ 7/ ,/ 10/ -/ 13/ ]/ ./ 然而/ ,/ 这些/ 研究/ 大多/ 侧重于/ 链路/ 映射/ ,/ 主要/ 是/ 寻找/ 链路/ 映射/ 可行/ 的/ 条件/ 和/ 最优/ 的/ 链路/ 映射/ 等/ ,/ 对/ 结点/ 映射/ 只/ 采取/ 简单/ 的/ 策略/ ,/ 如/ 带宽/ 优先/ [/ 7/ ]/ 、/ 随机/ [/ 14/ ]/ 等/ ./ 然而/ ,/ 结点/ 映射/ 决定/ 了/ 链路/ 映射/ 的/ 起点/ 和/ 终点/ ,/ 对/ 链路/ 映射/ 和/ 整个/ 虚拟/ 网络/ 映射/ 都/ 有着/ 巨大/ 的/ 影响/ ./ 此前/ 的/ 结点/ 映射/ 方法/ 存在/ 两个/ 主要/ 的/ 问题/ :/ 首先/ ,/ 优先选择/ 带宽/ 资源/ 较/ 多/ 的/ 物理/ 结点/ 作为/ 宿主/ 的/ 这类/ 策略/ 虽然/ 可以/ 在/ 一定/ 程度/ 上/ 提高/ 当前/ 请求/ 的/ 接受/ 率/ ,/ 但/ 它/ 总是/ 优先/ 占用/ 带宽/ 资源/ 最/ 充裕/ 的/ 结点/ ,/ 对/ 后续/ 请求/ 产生/ 较大/ 影响/ ,/ 整体/ 上/ 不利于/ 请求/ 接受/ 率/ 的/ 提升/ ./ 如图/ 1/ 所示/ ,/ 虚拟/ 结点/ a/ 、/ b/ 、/ c/ 依据/ 带宽/ 优先/ 策略/ 分别/ 映射/ 到/ 带宽/ 资源/ 较/ 多/ 的/ 物理/ 结点/ D/ 、/ E/ 、/ B/ 上/ ,/ 当/ 虚拟/ 网络/ 请求/ 2/ 到达/ 时/ ,/ 已经/ 没有/ 带宽/ 资源/ 充足/ 的/ 结点/ 可以/ 做/ 虚拟/ 结点/ d/ 的/ 宿主/ ./ 而图/ 2/ 中/ 的/ 结点/ 映射/ 能/ 有效/ 避免/ 这种/ 情况/ 的/ 发生/ ./ 其次/ ,/ 此前/ 的/ 映射/ 方法/ 将/ 结点/ 映射/ 和/ 链路/ 映射/ 完全/ 分开/ 处理/ ,/ 可能/ 造成/ 逻辑/ 相邻/ 的/ 虚拟/ 结点/ 映射/ 到/ 物理/ 结点/ 后/ 分布/ 分散/ ,/ 导致/ 虚拟/ 链路/ 占用/ 更/ 多/ 的/ 网络资源/ ./ 例如/ ,/ 虚拟/ 网络/ 请求/ 1/ 的/ 虚拟/ 结点/ 的/ 分布/ 在/ 图/ 1/ 中比图/ 2/ 中/ 分散/ ,/ 从而/ 虚拟/ 链路/ bc/ 和/ ca/ 在/ 图/ 1/ 中/ 占用/ 的/ 网络资源/ 比/ 在/ 图/ 2/ 中多/ ./ 本文/ 提出/ 一种/ 结点/ 紧凑/ 的/ 虚拟/ 网络/ 映射/ 方法/ ,/ 可以/ 有效/ 地/ 避免/ 上述/ 问题/ ./ 首先/ ,/ 对于/ 每个/ 虚拟/ 结点/ 预选/ 出/ 所有/ 符合/ 其/ 条件/ 的/ 物理/ 结点/ 作为/ 候选/ 宿主/ 并/ 将/ 它们/ 组织/ 成簇/ ,/ 再/ 从/ 每个/ 簇中/ 选出/ 一个/ 结点/ (/ 称之为/ 簇头/ )/ 作为/ 对应/ 虚拟/ 结点/ 的/ 宿主/ ,/ 这样/ 可以/ 有效/ 地/ 扩大/ 每个/ 虚拟/ 结点/ 的/ 宿主/ 选择/ 空间/ ,/ 而/ 不是/ 每次/ 都/ 占用/ 那些/ 带宽/ 资源/ 最多/ 的/ 结点/ ,/ 有利于/ 资源/ 的/ 合理配置/ ,/ 提高/ 整体/ 的/ 请求/ 接受/ 率/ ;/ 其次/ ,/ 在/ 选择/ 簇头/ 时/ 充分考虑/ 链路/ 映射/ 对/ 资源/ 的/ 占用/ 情况/ ,/ 选择/ 分布/ 紧凑/ 的/ 物理/ 结点/ 作为/ 宿主/ ,/ 将/ 逻辑/ 上/ 相邻/ 的/ 结点/ 映射/ 到/ 邻近/ 的/ 物理/ 结点/ 之上/ ,/ 减少/ 虚拟/ 链路/ 占用/ 的/ 网络资源/ ,/ 提高/ 资源/ 的/ 利用率/ ./ Page3/ 具体/ 地/ ,/ 我们/ 通过/ 虚拟/ 结点/ 的/ 平均/ 分布/ 距离/ 来/ 衡量/ 映射/ 后/ 虚拟/ 结点/ 分布/ 的/ 紧凑/ 程度/ ,/ 证明/ 了/ 在/ 带宽/ 资源/ 不/ 受限/ 的/ 情况/ 下/ 最/ 紧凑/ 结点/ 映射/ 就是/ 最优/ 结点/ 映射/ ./ 由于/ 虚拟/ 网络/ 映射/ 问题/ 本身/ 的/ 复杂性/ 决定/ 了/ 最/ 紧凑/ 结点/ 问题/ 在/ 计算/ 上/ 并/ 不/ 简单/ ,/ 我们/ 证明/ 最/ 紧凑/ 结点/ 映射/ 问题/ 属于/ NP/ -/ Complete/ 问题/ 并且/ 不/ 属于/ APX/ [/ 15/ ]/ ,/ 即/ 没有/ 常数/ 边界/ 的/ 多项式/ 时间/ 近似算法/ ./ 因此/ ,/ 我们/ 设计/ 了/ 启发式/ 算法/ LS/ _/ SDM/ 来求/ 最/ 紧凑/ 结点/ 映射/ 问题/ 的/ 近似/ 解/ ./ 同时/ ,/ 在/ 分簇/ 过程/ 中/ 我们/ 要求/ 候选/ 宿主/ 结点/ 除了/ 要/ 满足/ 计算能力/ 的/ 需求/ 外/ ,/ 还/ 需要/ 通过/ 1/ -/ 割/ 检验/ [/ 14/ ]/ ,/ 使得/ LS/ _/ SDM/ 算法/ 求解/ 的/ 结点/ 映射/ 存在/ 可行/ 的/ 链路/ 映射/ 与/ 之/ 对应/ 的/ 概率/ 极大/ [/ 14/ ]/ ./ 基于/ 此/ ,/ 我们/ 设计/ 了/ 结点/ 紧凑/ 的/ 虚拟/ 网络/ 映射/ 算法/ ,/ 算法/ 先/ 通过/ LS/ _/ SDM/ 寻找/ 紧凑/ 的/ 结点/ 映射/ ,/ 然后/ 寻找/ 对应/ 的/ 链路/ 映射/ ./ 如果/ 存在/ 可行/ 的/ 链路/ 映射/ 与/ 之/ 对应/ ,/ 则/ 完成/ 虚拟/ 网络/ 请求/ 的/ 映射/ ;/ 如果/ 没有/ 可行/ 的/ 链路/ 映射/ ,/ 那么/ 再次/ 执行/ 算法/ LS/ _/ SDM/ 寻找/ 新/ 的/ 紧凑/ 的/ 结点/ 映射/ ,/ 重复/ 上述/ 过程/ ./ 如果/ 通过/ 多次/ 独立/ 尝试/ 仍然/ 没有/ 映射/ 成功/ ,/ 那么/ 该/ 虚拟/ 网络/ 请求/ 不/ 存在/ 可行/ 映射/ 的/ 概率/ 趋近/ 于/ 1/ ./ 最后/ ,/ 本文/ 通过/ 一系列/ 实验/ 来/ 验证/ 算法/ 的/ 有效性/ ./ 实验/ 结果表明/ ,/ 本文/ 方法/ 求解/ 的/ 映射/ 虚拟/ 结点/ 分布/ 更加/ 紧凑/ ,/ 占用/ 的/ 资源/ 较/ 少/ ,/ 可以/ 显著/ 提高/ 虚拟/ 网络/ 请求/ 的/ 接受/ 率/ ./ 本文/ 第/ 2/ 节/ 分析/ 相关/ 工作/ ;/ 第/ 3/ 节对/ 虚拟/ 网络/ 映射/ 问题/ 进行/ 描述/ ,/ 对/ 虚拟/ 网络/ 映射/ 、/ 可行/ 映射/ 和/ 最优/ 映射/ 等/ 进行/ 明确/ 定义/ ;/ 第/ 4/ 节/ 给出/ 结点/ 映射/ 紧凑/ 程度/ 的/ 定义/ ,/ 分析/ 最/ 紧凑/ 结点/ 映射/ 问题/ ,/ 证明/ 其/ 在/ 带宽/ 不/ 受限/ 的/ 情况/ 下/ 即/ 为/ 最优/ 结点/ 映射/ ,/ 证明/ 它/ 属于/ NP/ -/ Complete/ 问题/ 并且/ 没有/ 常数/ 边界/ 的/ 多项式/ 时间/ 近似算法/ ,/ 随后/ 给出/ 启发式/ 算法/ 求/ 它/ 的/ 近似/ 解/ ;/ 第/ 5/ 节/ 给出/ 分簇/ 方法/ ,/ 并/ 在/ 前/ 一节/ 的/ 基础/ 上/ 提出/ 结点/ 紧凑/ 的/ 虚拟/ 网络/ 映射/ 算法/ ;/ 第/ 6/ 节对/ 本文/ 提出/ 的/ 方法/ 进行/ 实验/ 验证/ ;/ 最后/ ,/ 在/ 第/ 7/ 节/ 总结/ 全文/ ./ 2/ 相关/ 工作/ 虚拟/ 网络/ 映射/ 本质/ 上/ 是/ 一类/ 资源分配/ 问题/ ./ 与/ 一般/ 的/ 资源分配/ 问题/ 不同/ ,/ 虚拟/ 网络/ 映射/ 具有/ 许多/ 新/ 特性/ ,/ 如/ 资源/ 请求/ 具有/ 网络结构/ ,/ 需要/ 同时/ 满足/ 结点/ 与/ 边/ 的/ 约束/ 等/ ,/ 文献/ [/ 7/ ,/ 10/ ]/ 对/ 这些/ 特性/ 进/ 了/ 详细/ 的/ 分析/ 与/ 总结/ ./ 虚拟/ 网络/ 映射/ 是/ 一个/ 复杂/ 的/ 问题/ ,/ 早期/ 的/ 研究/ 从/ 不同/ 角度/ 对/ 问题/ 空间/ 进行/ 限制/ ,/ 并/ 在/ 此基础/ 之上/ 提出/ 了/ 不同/ 的/ 解决/ 方法/ [/ 11/ -/ 13/ ,/ 16/ ]/ ./ 如/ 文献/ [/ 16/ ]/ 只/ 考虑/ 带宽/ 的/ 限制/ ,/ 文献/ [/ 13/ ]/ 限定/ 虚拟/ 网络/ 请求/ 为/ 特定/ 的/ 网络结构/ ,/ 文献/ [/ 11/ ]/ 提出/ 了/ 一种/ 基于/ 图同构/ 的/ 回溯/ 查找/ 算法/ ,/ 在/ 图同构/ 近似算法/ 的/ 基础/ 上/ 寻找/ 映射/ 方案/ ./ 为了/ 应对/ 图同构/ 问题/ 的/ 高/ 复杂性/ ,/ 作者/ 限定/ 了/ 搜索/ 的/ 路径/ 长度/ ,/ 限定/ 了/ 问题/ 的/ 解/ 空间/ ./ 这类/ 添加/ 附加/ 限制/ 的/ 方法/ 虽然/ 有助于/ 简化/ 问题/ ,/ 但/ 同时/ 也/ 极大/ 地/ 制约/ 了/ 这些/ 方法/ 的/ 性能/ 和/ 适用性/ ./ Yu/ 等/ 人/ [/ 7/ ]/ 第一次/ 详细分析/ 了/ 虚拟/ 网络/ 映射/ 的/ 特点/ ,/ 给出/ 了/ 解决/ 虚拟/ 网络/ 映射/ 问题/ 需要/ 满足/ 的/ 约束/ ,/ 提出/ 了/ 两/ 阶段/ 的/ 映射/ 方法/ ,/ 全面/ 考虑/ 了/ 虚拟/ 网络/ 映射/ 的/ 各项/ 约束/ ./ Yu/ 提出/ 底层/ 网络/ 支持/ 流/ 分割/ 的/ 思想/ ,/ 使得/ 链路/ 映射/ 问题/ 可以/ 转化/ 为/ 多/ 商品/ 流/ 问题/ (/ Multi/ -/ CommodityFlow/ ,/ MCF/ )/ [/ 17/ ]/ ,/ 简化/ 了/ 链路/ 映射/ 的/ 复杂性/ ./ 然而/ ,/ 为了/ 提高/ 在/ 链路/ 映射/ 阶段/ 找到/ 可行/ 链路/ 映射/ 的/ 概率/ ,/ Yu/ 在/ 结点/ 映射/ 阶段/ 采取/ 带宽/ 优先/ 的/ 策略/ ,/ 优先选择/ 网络带宽/ 大/ 的/ 物理/ 结点/ 作为/ 宿主/ ./ 这种/ 策略/ 虽然/ 有助于/ 提高/ 当前/ 请求/ 的/ 接收/ 率/ ,/ 但/ 不利于/ 后续/ 请求/ 的/ 接受/ ,/ 从/ 全局/ 来看/ 不利于/ 资源/ 的/ 优化/ 配置/ ./ Chowdhury/ 等/ 人/ [/ 10/ ]/ 同时/ 考虑/ 结点/ 映射/ 与/ 链路/ 映射/ 两个/ 阶段/ 的/ 信息/ ,/ 将/ 虚拟/ 网络/ 映射/ 问题/ 建模/ 成/ 一个/ 混合/ 整数/ 规划/ 问题/ ./ 作者/ 引入/ 了/ 位置/ 约束/ ,/ 并/ 依据/ 该/ 约束/ 将/ 物理/ 结点/ 划分/ 成簇/ ,/ 接着/ 在/ 每个/ 簇中/ 引入/ 一个/ 扩展/ 结点/ 和/ 多条/ 连接/ 扩展/ 结点/ 与/ 簇内/ 结点/ 的/ 扩展/ 边/ 组成/ 扩展/ 图/ ./ 限定/ 每个/ 簇中/ 只能/ 有/ 一条/ 扩展/ 边/ 被/ 选中/ ,/ 从而/ 通过/ 选定/ 的/ 扩展/ 边来/ 确定/ 选定/ 的/ 宿主/ ./ 由于/ 混合/ 整数/ 规划/ 是/ NP/ -/ Complete/ 问题/ ,/ 作者/ 放松/ 其/ 整数/ 的/ 限制/ ,/ 将/ 其/ 转化/ 为/ 线性规划/ 问题/ 进行/ 求解/ ./ 然而/ ,/ 如果/ 所有/ 虚拟/ 链路/ 的/ 两个/ 端点/ 都/ 分/ 处于/ 不同/ 簇中/ ,/ 这种/ 方法/ 有/ 较/ 好/ 的/ 性能/ ;/ 一旦/ 这个/ 条件/ 不/ 满足/ ,/ 这种/ 方法/ 求得/ 的/ 近似/ 解/ 性能/ 很差/ ./ 实际上/ ,/ 通常/ 将/ 一个/ 虚拟/ 网络/ 请求/ 部署/ 到/ 同一个/ 数据中心/ ,/ 上述/ 条件/ 无法/ 满足/ ,/ 因此/ 这种/ 方法/ 的/ 实用性/ 受到/ 极大/ 限制/ ./ Hou/ 等/ 人/ [/ 14/ ]/ 着重/ 研究/ 了/ 结点/ 映射/ 与/ 链路/ 映射/ 之间/ 的/ 关系/ ,/ 提出/ 了/ 一种/ 检验/ 结点/ 映射/ 是否/ 存在/ 可行/ 的/ 链路/ 映射/ 与/ 之/ 对应/ 的/ 方法/ ,/ 证明/ 了/ 该/ 方法/ 的/ 充分/ 必要条件/ ./ 由于/ 充要条件/ 的/ 验证/ 在/ 计算/ 上/ 不/ 可行/ ,/ 作者/ 进一步/ 提出/ 简化/ 的/ 检验/ 方法/ ./ 简化/ 方法/ 是/ 结点/ 映射/ 存在/ 可行/ 的/ 链路/ 映射/ 与/ 之/ 对应/ 的/ 必要条件/ ,/ 并且/ 计算/ 简便/ ./ 基于/ 此/ ,/ 作者/ 提出/ 了/ “/ 随机/ 映射/ 加/ 检测/ ”/ 的/ 虚拟/ 网络/ 映射/ 方法/ ./ 然而/ ,/ 作者/ 没有/ 提出/ 有效/ 的/ 结点/ 映射/ 方法/ ,/ 简单/ 的/ 随机/ 策略/ 缺乏/ 对/ 资源/ 优化/ 的/ 整体/ 考虑/ ,/ 不利于/ 资源/ 利用率/ 的/ 提高/ ,/ 影响/ 了/ 虚拟/ 网络/ 请求/ 的/ 接受/ 率/ ./ 以上/ 研究/ 工作/ 更多地/ 关注/ 在/ 链路/ 映射/ ,/ 对/ 结点/ 映射/ 缺乏/ 深入/ 的/ 分析/ 研究/ ,/ 也/ 没有/ 提出/ 较/ 好/ 的/ 结点/ 映射/ 方法/ ./ 然而/ ,/ 结点/ 映射/ 决定/ 了/ 虚拟/ 链路/ 的/ 起点/ 和/ Page4/ 终点/ ,/ 对/ 虚拟/ 网络/ 请求/ 是否/ 被/ 接受/ 和/ 其/ 占用/ 多少/ 资源/ 有着/ 重大/ 影响/ ./ 在/ 本文/ 中/ ,/ 我们/ 对/ 结点/ 映射/ 进行/ 分析/ ,/ 提出/ 一种/ 保持/ 结点/ 紧凑/ 的/ 结点/ 映射/ 方法/ ,/ 并/ 在/ 此基础/ 上/ 提出/ 虚拟/ 网络/ 映射/ 的/ 方法/ ,/ 提高/ 底层/ 资源/ 的/ 利用率/ 和/ 虚拟/ 网络/ 请求/ 的/ 接受/ 率/ ./ 3/ 虚拟/ 网络/ 映射/ 虚拟/ 网络/ 映射/ 是/ 把/ 虚拟/ 网络/ 请求/ 部署/ 到/ 物理/ 资源/ 上/ 并/ 为/ 其/ 分配资源/ 的/ 过程/ ./ 我们/ 用无向/ 有权/ 图来/ 描述/ 物理/ 资源/ 和/ 虚拟/ 网络/ 请求/ ./ 物理/ 资源/ 可以/ 描述/ 为/ GP/ =/ (/ NP/ ,/ EP/ ,/ APN/ ,/ APE/ )/ ,/ 其中/ NP/ 表示/ 物理/ 结点/ 的/ 集合/ ,/ EP/ 表示/ 物理/ 链路/ 的/ 集合/ ,/ 权/ APN/ (/ nP/ )/ 表示/ 结点/ nP/ ∈/ NP/ 的/ 属性/ ,/ 如/ 计算能力/ ;/ 权/ APE/ (/ eP/ )/ 表示/ 链路/ eP/ ∈/ EP/ 的/ 属性/ ,/ 如/ 带宽/ 大小/ ./ 同样/ ,/ 虚拟/ 网络/ 请求/ 可以/ 描述/ 为/ GV/ =/ (/ NV/ ,/ EV/ ,/ AV/ 分别/ 表示/ 虚拟/ 结点/ 和/ 虚拟/ 链路/ 对/ 资源/ 的/ 需求/ ,/ 如/ 请求/ 分配/ 的/ 计算能力/ 和/ 网络带宽/ 等/ ./ 定义/ 1/ (/ 虚拟/ 网络/ 映射/ )/ ./ 将/ 虚拟/ 网络/ 请求/ GV/ =/ (/ NV/ ,/ EV/ ,/ AVAPN/ ,/ APE/ )/ 上/ 称为/ 虚拟/ 网络/ 映射/ ,/ 简称/ 映射/ ,/ 记/ 为/ / :/ GV/ →/ GP/ ./ 虚拟/ 网络/ 映射/ 可以/ 分解成/ 结点/ 映射/ / N/ 和/ 链路/ 映射/ / E/ :/ 结点/ 映射/ :/ / N/ :/ NV/ →/ NP/ ;/ 链路/ 映射/ :/ / E/ :/ EV/ →/ / 结点/ 映射/ / N/ 将/ 虚拟/ 结点/ nV/ ∈/ NV/ 映射/ 到/ 物理/ 结点/ nP/ ∈/ NP/ 上/ ,/ 即/ nP/ =/ / N/ (/ nV/ )/ ./ 物理/ 结点/ nP/ 为/ nV/ 分配/ 的/ 结点/ 资源/ 为/ fN/ (/ nP/ ,/ nV/ )/ ;/ 链路/ 映射/ / E/ 将/ 虚拟/ 链路/ eV/ =/ (/ mV/ ,/ nV/ )/ ∈/ EV/ 映射/ 成/ 物理/ 网络/ 中/ 的/ 一条/ 或/ 多条/ 路径/ ,/ 即/ / E/ (/ eV/ )/ =/ / E/ (/ mV/ ,/ nV/ )/ / / N/ (/ mV/ )/ ,/ / N/ (/ nV/ )/ )/ ,/ 其中/ / 接/ 结点/ s/ 和/ t/ 的/ 所有/ 路径/ 的/ 集合/ ./ 路径/ p/ ∈/ / E/ (/ eV/ )/ 为/ eV/ 分配/ 的/ 带宽/ 资源/ 为/ fE/ (/ p/ ,/ eV/ )/ ./ 为了/ 满足/ GV/ 对/ 资源/ 的/ 需求/ ,/ 分配/ 给/ 虚拟/ 结点/ nV/ 和/ 虚拟/ 链路/ eV/ 的/ 资源/ 应/ 符合/ :/ fN/ (/ nP/ ,/ nV/ )/ =/ AV/ ∑/ p/ ∈/ / E/ (/ eV/ )/ 记/ 映射/ 到/ 物理/ 结点/ nP/ ∈/ NP/ 上/ 的/ 虚拟/ 结点/ 的/ 集合/ 为/ Ω/ N/ (/ nP/ )/ =/ {/ nV/ |/ / N/ (/ nV/ )/ =/ nP/ ,/ nV/ ∈/ NV/ }/ ;/ 记/ 链路/ 映射/ 后/ 经过/ 物理/ 链路/ eP/ 的/ 路径/ 集合/ 为/ Ω/ F/ (/ eP/ )/ =/ {/ p/ |/ p/ ∈/ / E/ (/ eV/ )/ ,/ eP/ ∈/ p/ ,/ eV/ ∈/ EV/ }/ ./ 物理/ 结点/ 和/ 链路/ 向外/ 提供/ 服务/ 受/ 自身/ 资源/ 的/ 限制/ ,/ 不能/ 超出/ 其/ 能力/ 范围/ ,/ 需要/ 满足/ 如下/ 约束/ :/ ∑/ nV/ ∈/ Ω/ N/ (/ nP/ )/ 定义/ 2/ (/ 可行/ 映射/ )/ ./ 若/ 虚拟/ 网络/ 映射/ / :/ GV/ →/ GP/ ,/ 既/ 满足/ GV/ 对/ 资源/ 的/ 需求/ (/ 即/ 符合/ 式/ (/ 1/ )/ 、/ (/ 2/ )/ )/ ,/ 又/ 不/ 超出/ GP/ 的/ 能力/ 范围/ (/ 即/ 符合/ 式/ (/ 3/ )/ 、/ (/ 4/ )/ )/ ,/ 则/ 称/ / 是/ 可行/ 的/ ./ 若/ 结点/ 映射/ / N/ 同时/ 满足/ 式/ (/ 1/ )/ 、/ (/ 3/ )/ ,/ 则/ 称/ 其/ 为/ 可行/ 的/ 结点/ 映射/ ;/ 若/ 链路/ 映射/ / E/ 同时/ 满足/ 式/ (/ 2/ )/ 、/ (/ 4/ )/ ,/ 则/ 称/ 其/ 为/ 可行/ 的/ 链路/ 映射/ ./ 结点/ 映射/ / N/ 决定/ 了/ 链路/ 映射/ 阶段/ 虚拟/ 链路/ 的/ 起点/ 和/ 终点/ ./ 可行/ 的/ 结点/ 映射/ / N/ 和/ 一个/ 与/ 之/ 对应/ 的/ 可行/ 链路/ 映射/ / E/ 组成/ 一个/ 可行/ 映射/ / =/ (/ / N/ ,/ / E/ )/ ./ 显然/ ,/ 给定/ 一个/ 可行/ 的/ 结点/ 映射/ ,/ 并不一定/ 存在/ 可行/ 的/ 链路/ 映射/ 与/ 之/ 对应/ ./ 虚拟/ 结点/ nV/ 占用/ 的/ 资源/ 为/ cost/ (/ / N/ ,/ nV/ )/ ,/ 有记/ 虚拟/ 链路/ eV/ 部署/ 后/ 占用/ 的/ 资源/ 为/ cost/ (/ / E/ ,/ eV/ )/ ,/ 有/ 给定/ 可行/ 的/ 虚拟/ 网络/ 映射/ / =/ (/ / N/ ,/ / E/ )/ ,/ 记/ cost/ (/ / E/ ,/ eV/ )/ =/ ∑/ p/ ∈/ / E/ (/ eV/ )/ 其中/ ,/ |/ p/ |/ 为/ 路径/ p/ 的/ 长度/ ./ 整个/ 虚拟/ 网络/ 请求/ GV/ 占用/ 的/ 资源/ 为/ cost/ (/ / ,/ GV/ )/ =/ ∑/ nV/ ∈/ NV/ 例如/ ,/ 图/ 1/ 中/ 虚拟/ 网络/ 请求/ 1/ 占用/ 的/ 结点/ 资源/ 为/ 20/ +/ 15/ +/ 15/ =/ 50/ ,/ 带宽/ 资源/ 为/ 15/ ×/ 1/ +/ 10/ ×/ 2/ +/ 10/ ×/ 2/ =/ 55/ ;/ 图/ 2/ 中/ 虚拟/ 网络/ 请求/ 1/ 占用/ 的/ 结点/ 资源/ 为/ 50/ ,/ 带宽/ 资源/ 为/ 15/ ×/ 1/ +/ 10/ ×/ 1/ +/ 10/ ×/ 1/ =/ 35/ ./ 定义/ 3/ (/ 最优/ 映射/ )/ ./ 若/ 虚拟/ 网络/ 映射/ / 是/ 可行/ 的/ 并且/ 其/ 占用/ 的/ 资源量/ 最小/ ,/ 则/ 称/ 其/ 为/ 最优/ 虚拟/ 网络/ 映射/ ,/ 简称/ 为/ 最优/ 映射/ ,/ 记/ 为/ / 最优/ 映射/ / / / N/ 和/ 链路/ 映射/ / E/ 分别/ 为/ 最优/ 结点/ 映射/ 和/ 最优/ 链路/ 映射/ ,/ 分别/ 记/ 为/ / / N/ 和/ 其它/ 可行/ 的/ 结点/ 映射/ / N/ 占用/ 的/ 结点/ 资源/ 相同/ ,/ 但是/ 不同/ 的/ 结点/ 映射/ 决定/ 了/ 链路/ 映射/ 的/ 起点/ 和/ 终点/ 不同/ ,/ / 资源/ ./ 4/ 紧凑/ 的/ 结点/ 映射/ 方法/ 本节/ 中/ ,/ 我们/ 首先/ 引入/ 反映/ 虚拟/ 网络/ 映射/ 属性/ 的/ 指标/ ,/ 给出/ 结点/ 映射/ 紧凑/ 程度/ 的/ 定义/ 并/ 对/ 最/ 紧凑/ 结点/ 映射/ 问题/ 进行/ 深入分析/ ,/ 接着/ 在/ 分析/ 的/ 基础/ 上/ Page5/ 提出/ 一种/ 紧凑/ 的/ 结点/ 映射/ 方法/ ./ 4.1/ 最/ 紧凑/ 结点/ 映射/ 问题/ 分析/ 络/ 映射/ / :/ GV/ →/ GP/ ,/ 定义/ / 的/ 平均/ 路径/ 长度/ 为/ 定义/ 4/ (/ 映射/ 的/ 平均/ 路径/ 长度/ )/ ./ 给定/ 虚拟/ 网/ 映射/ / 将/ GV/ 中/ 的/ 虚拟/ 链路/ 映射/ 成/ GP/ 中/ 的/ 路径/ ,/ l/ 为/ 这些/ 路径/ 的/ 平均/ 长度/ ,/ 它/ 可以/ 反应/ 映射/ 占用/ 网络资源/ 的/ 多少/ ./ 当/ l/ 越/ 小时/ ,/ 映射/ / 所/ 占用/ 的/ 资源/ 越少/ ./ 例如/ ,/ 虚拟/ 网络/ 请求/ 1/ 在/ 图/ 1/ 中/ ,/ 平均/ 路径/ 长度/ 为/ (/ 15/ ×/ 1/ +/ 10/ ×/ 2/ +/ 10/ ×/ 2/ )/ // (/ 15/ +/ 10/ +/ 10/ )/ =/ 1.57/ ,/ 在/ 图/ 2/ 中/ 的/ 平均/ 路径/ 长度/ 为/ 1/ ./ 虽然/ 平均/ 路径/ 长度/ l/ 可以/ 很/ 好/ 地/ 反映/ 出/ 映射/ 占用/ 网络资源/ 的/ 多少/ ,/ 但是/ 它/ 需要/ 在/ 结点/ 映射/ 和/ 链路/ 映射/ 都/ 完成/ 之后/ 才能/ 计算/ ,/ 不能/ 在/ 结点/ 映射/ 阶段/ 就/ 对/ 链路/ 映射/ 可能/ 占用/ 多少/ 网络资源/ 进行/ 一个/ 合理/ 的/ 估算/ ./ 为此/ ,/ 我们/ 引入/ 虚拟/ 结点/ 的/ 平均/ 分布/ 距离/ 的/ 概念/ ./ 定义/ 5/ (/ 虚拟/ 结点/ 的/ 平均/ 分布/ 距离/ )/ ./ 给定/ 结点/ 映射/ / N/ :/ NV/ →/ NP/ ,/ 定义/ 结点/ 映射/ / N/ 对应/ 的/ 虚拟/ 结点/ 的/ 平均/ 分布/ 距离/ 为/ ∑/ nVi/ ,/ nVd/ =/ 其中/ ,/ dist/ (/ u/ ,/ v/ )/ 表示/ 结点/ u/ ,/ v/ ∈/ NP/ 之间/ 的/ 距离/ ,/ 这里/ 将/ 其/ 定义/ 为/ 结点/ 间/ 最/ 短/ 路径/ 的/ 长度/ ./ 平均/ 分布/ 距离/ d/ 反应/ 了/ 虚拟/ 结点/ 在/ 物理/ 网络/ 中/ 分布/ 的/ 紧凑/ 程度/ ,/ d/ 越小/ 表示/ 分布/ 越/ 紧凑/ ./ 例如/ ,/ 虚拟/ 网络/ 请求/ 1/ 的/ 虚拟/ 结点/ 在/ 图/ 1/ 和/ 图/ 2/ 中/ 的/ 平均/ 分布/ 距离/ 分别/ 为/ 1.57/ 和/ 1/ ,/ 其/ 在/ 图/ 2/ 中/ 的/ 分布/ 更/ 紧凑/ ./ 当/ d/ 取/ 最小值/ 时/ ,/ 对应/ 的/ 结点/ 映射/ / N/ 称为/ 最/ 紧凑/ 结点/ 映射/ ./ 给定/ 结点/ 映射/ / N/ ,/ 虚拟/ 结点/ 的/ 平均/ 分布/ 距离/ d/ 随即/ 确定/ ,/ 而/ l/ 则/ 随着/ 链路/ 映射/ / E/ 的/ 不同/ 而/ 变化/ ./ 在/ 所有/ 与/ / N/ 对应/ 的/ 链路/ 映射/ 中/ ,/ 当/ / E/ 为/ 它们/ 中/ 占用/ 资源/ 最少/ 的/ 链路/ 映射/ 时/ ,/ 对应/ 的/ l/ 取/ 极小值/ ,/ 并且/ 趋近/ 或/ 等于/ d/ (/ 例如/ ,/ 图/ 1/ 和/ 图/ 2/ 中/ 虚拟/ 网络/ 请求/ 1/ 的/ 链路/ 映射/ 均/ 为/ 对应/ 结点/ 映射/ 下/ 的/ 最优/ 值/ ,/ l/ =/ d/ )/ ,/ d/ 为/ l/ 的/ 下界/ ./ 由于/ 平均/ 分布/ 距离/ d/ 只/ 与/ 虚拟/ 结点/ 的/ 分布/ 有关/ ,/ 因此/ 一旦/ 给定/ 结点/ 映射/ / N/ ,/ 就/ 可以/ 利用/ 它/ 对/ 所有/ 与/ / N/ 对应/ 的/ 链路/ 映射/ 最少/ 要/ 占用/ 的/ 网络资源/ 进行/ 一个/ 合理/ 的/ 估算/ ./ 定义/ 6/ (/ 最/ 紧凑/ 结点/ 映射/ 问题/ ,/ ClosestNodeMapping/ ,/ CNM/ )/ ./ 已知/ 点/ 的/ 集合/ N/ =/ {/ ni/ }/ ,/ 任意/ 两点/ 之间/ 的/ 距离/ dij/ =/ dist/ (/ ni/ ,/ nj/ )/ / 0/ ,/ 结点/ 簇/ 的/ 集合/ C/ =/ {/ c1/ ,/ c2/ ,/ …/ ,/ ck/ }/ ,/ ci/ / N/ ,/ i/ =/ 1/ ,/ 2/ ,/ …/ ,/ k/ ,/ 簇间/ 的/ 需求/ R/ =/ {/ rxy/ }/ ,/ rxy/ / 0/ ,/ 1/ / x/ ,/ y/ / k/ ,/ x/ ≠/ y/ 以及/ 常数/ D/ ./ 问/ :/ 是否/ 存在/ 点/ 序列/ V/ =/ 〈/ v1/ ,/ v2/ ,/ …/ ,/ vk/ 〉/ ,/ 使得/ vi/ ∈/ ci/ ,/ 1/ / i/ / k/ ,/ 如果/ i/ ≠/ j/ ,/ 则/ vi/ ≠/ vj/ ,/ 且/ CNM/ 问题/ 刻画/ 的/ 是/ GV/ →/ GP/ 上/ 的/ 最/ 紧凑/ 的/ 结点/ 映射/ ./ 将/ 点集/ N/ 定义/ 为/ GP/ 中/ 物理/ 结点/ 的/ 集合/ NP/ ,/ ci/ ∈/ C/ 为/ 虚拟/ 结点/ nVi/ ∈/ NV/ 的/ 所有/ 候选/ 宿主/ 组成/ 的/ 集合/ ,/ rxy/ ∈/ R/ 定义/ 为/ 虚拟/ 结点/ nVx/ 和/ nV/ 带宽/ 需求/ AV/ 射/ ,/ 它/ 将/ nVi/ 映射/ 到/ vi/ 上/ ./ 当/ Γ/ (/ V/ ,/ R/ )/ 取/ 最小值/ 时/ ,/ 对应/ 的/ 虚拟/ 结点/ 的/ 平均/ 分布/ 距离/ d/ 也/ 取/ 最小值/ ,/ 所以/ 结点/ 映射/ V/ 为/ 最/ 紧凑/ 的/ 结点/ 映射/ ./ 我们/ 用/ 一个/ 五元/ 组/ CNM/ =/ (/ N/ ,/ dij/ ,/ C/ ,/ R/ ,/ D/ )/ 来/ 描述/ CNM/ 问题/ ./ 如果/ 没有/ 式/ (/ 6/ )/ 的/ 约束/ ,/ CNM/ 问题/ 就/ 变成/ 了/ 一个/ 新/ 的/ 问题/ ,/ 我们/ 将/ 其/ 定义/ 为/ 簇头/ 选择/ 问题/ (/ ClusterHeader/ ,/ CH/ )/ ./ CH/ 问题/ 只/ 关心/ 能否/ 从/ 每个/ 簇中/ 选出/ 一个点/ 做/ 为/ 簇头/ ,/ 并且/ 这些/ 簇头/ 互不/ 相同/ ,/ 并/ 不/ 关心/ 这些/ 簇头/ 分布/ 是否/ 紧凑/ ./ CH/ 问题/ 求解/ 的/ 是/ CNM/ 问题/ 的/ 一个/ 可行/ 解/ ,/ 而/ 不是/ 最优/ 解/ ./ CH/ 问题/ 用/ 一个/ 三元组/ CH/ =/ (/ N/ ,/ C/ ,/ R/ )/ 描述/ ./ 定理/ 1/ ./ 当/ 带宽/ 资源/ 不/ 受限/ 时/ ,/ 最/ 紧凑/ 结点/ 映射/ 即/ 为/ 最优/ 结点/ 映射/ ./ 证明/ ./ 设/ CNM/ 问题/ 的/ 实例/ Icnm/ 刻画/ 从/ GV/ =/ (/ NV/ ,/ EV/ ,/ AV/ 紧凑/ 结点/ 映射/ ,/ 其解/ 为/ V/ ./ 任选/ 一条/ 虚拟/ 链路/ eVx/ =/ (/ nVi/ ,/ nV/ 宽/ 资源/ 不/ 受限/ ,/ 所以/ eVx/ 一定/ 可以/ 映射/ 到/ 一条/ 连接/ vi/ 和/ vj/ 的/ 最/ 短/ 路径/ 上/ ./ 依据/ 式/ (/ 5/ )/ ,/ 它/ 占用/ 的/ 网络资源/ 为/ dist/ (/ vi/ ,/ vj/ )/ ·/ rij/ ./ 显然/ ,/ 这/ 也/ 是/ 虚拟/ 链路/ (/ nVi/ ,/ nV/ 至少/ 要/ 占用/ 的/ 带宽/ 资源/ ./ 对/ 每条/ 虚拟/ 链路/ 都/ 采取/ 上述/ 映射/ 方法/ ,/ 可以/ 构造/ 出/ 一个/ 可行/ 的/ 链路/ 映射/ / E/ ,/ 其/ 总共/ 占用/ 的/ 带宽/ 资源/ 为/ Γ/ (/ V/ ,/ R/ )/ ./ 当/ Γ/ (/ V/ ,/ R/ )/ 取/ 最小值/ 时/ ,/ / E/ 占用/ 的/ 带宽/ 资源/ 最少/ ,/ 故/ / E/ 为/ 最优/ 结点/ 映射/ ./ 这样/ ,/ V/ 和/ / E/ 就/ 可以/ 组成/ 最优/ 虚拟/ 网络/ 映射/ ,/ 故/ V/ 为/ 最优/ 结点/ 映射/ ./ 定理/ 2/ ./ CNM/ 问题/ 是/ NP/ -/ Complete/ 问题/ ./ 证明/ ./ 首先/ ,/ 任意/ 给定/ 一个/ CNM/ 的/ 实例/ Icnm/ 和/ 一个点/ 序列/ V/ ,/ 可以/ 在/ 多项式/ 时间/ 内/ 验证/ V/ 是否/ 为/ 满足条件/ 的/ 点/ 序列/ ,/ 故/ CNM/ 属于/ NP/ 问题/ ./ 接着/ ,/ 将/ 一个/ NP/ -/ Complete/ 问题归约/ 到/ CNM/ 问题/ ./ 考虑/ 下述/ NP/ -/ Complete/ 问题/ ./ 最小/ 精确/ 覆盖/ (/ MinimumeXactSetCover/ ,/ MXSC/ )/ [/ 18/ -/ 19/ ]/ ./ 已知/ 集合/ U/ 和/ U/ 的/ 子集/ 组成/ 的/ 集/ j/ )/ ∈/ EV/ ,/ 它/ 将/ 被/ 映射/ 到/ / Page6/ 合/ S/ ,/ 函数/ size/ :/ S/ →/ Q/ +/ 和/ 常数/ B/ ./ 问/ 是否/ 存在/ 分离/ 集/ (/ disjointset/ )/ S/ / S/ ,/ 使得/ S/ 覆盖/ U/ ,/ 并且/ 下面/ 证明/ MXSC/ 问题/ 可以/ 在/ 多项式/ 时间/ 内/ 归约/ 到/ CNM/ 问题/ ./ 任意/ 给定/ 一个/ MXSC/ 问题/ 的/ 实例/ Imxsc/ ,/ 其中/ U/ =/ {/ u1/ ,/ u2/ ,/ …/ ,/ ut/ }/ ,/ S/ =/ {/ s1/ ,/ s2/ ,/ …/ ,/ sw/ }/ ,/ 可以/ 构造/ 一个/ CNM/ 问题/ 的/ 实例/ Icnm/ =/ (/ N/ ,/ dij/ ,/ C/ ,/ R/ ,/ D/ )/ :/ N/ =/ {/ (/ sj/ ,/ ui/ )/ |/ ui/ ∈/ sj/ ,/ sj/ ∈/ S/ }/ ∪/ {/ (/ s/ -/ 1/ ,/ ui/ )/ |/ ui/ ∈/ U/ }/ ∪/ {/ (/ s0/ ,/ ui/ )/ |/ / s/ ∈/ S/ ,/ ui/ / s/ ;/ ui/ ∈/ U/ }/ (/ 8/ )/ dist/ (/ (/ sj/ ,/ ui/ )/ ,/ (/ sq/ ,/ up/ )/ )/ =/ 0/ ,/ 烄/ |/ sj/ ∩/ sq/ |/ ·/ (/ 1/ +/ ε/ )/ B/ ,/ jq/ >/ 0/ ,/ j/ ≠/ q/ ,/ j/ >/ 0size/ (/ sq/ )/ // |/ sq/ |/ ,/ jq/ </ 0/ ,/ q/ >/ 0/ 烅/ size/ (/ sj/ )/ // |/ sj/ |/ ,/ jq/ </ 0/ ,/ j/ >/ 0/ (/ 1/ +/ ε/ )/ B/ ,/ 烆/ 其中/ ,/ (/ sj/ ,/ ui/ )/ ,/ (/ sq/ ,/ up/ )/ ∈/ N/ ;/ ε/ >/ 0/ ,/ 为/ 任意/ 常数/ ./ C/ =/ {/ ci/ |/ 1/ / i/ / t/ }/ ∪/ {/ ci/ +/ t/ |/ 1/ / i/ / t/ }/ ,/ 其中/ ,/ ci/ =/ {/ (/ sj/ ,/ ui/ )/ |/ (/ sj/ ,/ ui/ )/ ∈/ N/ ,/ j/ / 0/ }/ ,/ 1/ / i/ / t/ (/ 10/ )/ ci/ +/ t/ =/ {/ (/ s/ -/ 1/ ,/ ui/ )/ }/ ,/ 1/ / i/ / tk/ =/ |/ C/ |/ =/ 2t/ ./ R/ =/ RI/ ∪/ RO/ 其中/ ,/ RI/ =/ {/ rij/ |/ 1/ / i/ </ j/ / t/ }/ ,/ RO/ =/ {/ ri/ ,/ i/ +/ t/ |/ 1/ / i/ / t/ }/ ,/ rij/ =/ 1/ ,/ 1/ / i/ </ j/ / t/ ,/ ri/ ,/ i/ +/ t/ =/ 1/ ,/ 1/ / i/ / t/ ./ D/ =/ B/ 可以/ 证明/ ,/ Icnm/ 存在/ 满足条件/ 的/ 点/ 序列/ V/ 当且/ 仅/ 当/ Imxsc/ 存在/ 满足条件/ 的/ 集合/ S/ ,/ 详细/ 证明/ 过程/ 见/ 附录/ ./ 不难看出/ 上述/ 构造/ 过程/ 可以/ 在/ 多项式/ 时间/ 内/ 完成/ ,/ 故/ MXSC/ 问题/ 可以/ 在/ 多项式/ 时间/ 内/ 归约/ 到/ CNM/ 问题/ ./ 综上所述/ ,/ CNM/ 问题/ 属于/ NP/ -/ Complete/ 问题/ ./ 定理/ 3/ ./ 如果/ CNM/ ∈/ APX/ ,/ 那么/ P/ =/ NP/ ./ 证明/ ./ 对于/ 任意/ MXSC/ 问题/ 的/ 实例/ Imxsc/ ,/ 可以/ 构造/ 一个/ 对应/ 的/ CNM/ 实例/ Icnm/ ./ 由/ 定理/ 2/ 的/ 证明/ 过程/ 可知/ (/ 详见/ 附录/ )/ :/ 其中/ ,/ opt/ (/ Icnm/ )/ 表示/ Icnm/ 的/ 最优/ 解/ ./ 又/ 若/ CNM/ ∈/ APX/ ,/ 依据/ APX/ 的/ 定义/ [/ 15/ ]/ ,/ 存在/ 一个/ α/ -/ approximation/ [/ 15/ ]/ 算法/ A/ ,/ 对于/ 任意/ CNM/ 实例/ Icnm/ 有/ 当/ Imxsc/ 存在/ 可行/ 解时/ ,/ Icnm/ 也/ 具有/ 可行/ 解/ ,/ 综合/ 式/ (/ 14/ )/ 、/ (/ 15/ )/ ,/ 并令式/ (/ 14/ )/ 中/ ε/ =/ α/ ,/ 有/ 当/ Imxsc/ 不/ 存在/ 可行/ 解时/ ,/ Icnm/ 也/ 不/ 具有/ 可行/ 解/ ,/ 由式/ (/ 14/ )/ 有/ 又/ opt/ (/ Icnm/ )/ 为/ 最优/ 解/ ,/ 所以/ A/ (/ Icnm/ )/ / opt/ (/ Icnm/ )/ ,/ 即/ 有/ 由式/ (/ 16/ )/ 、/ (/ 17/ )/ 可知/ ,/ 我们/ 可以/ 通过/ A/ (/ Icnm/ )/ 的/ 结果/ 判断/ Imxsc/ 是否/ 有/ 可行/ 解/ ./ 又/ 因为/ 算法/ A/ 为/ 多项式/ 时间/ 算法/ ,/ MXSC/ 属于/ NP/ -/ Complete/ 问题/ ./ 所以/ 若/ NCH/ ∈/ APX/ ,/ 则/ P/ =/ NP/ ./ 由/ 定理/ 1/ 和/ 定理/ 2/ 可知/ ,/ 即使/ 没有/ 带宽/ 的/ 限制/ ,/ 要/ 寻找/ 最优/ 结点/ 映射/ 和/ 最/ 紧凑/ 的/ 结点/ 映射/ 依然/ 十分困难/ ./ 定理/ 3/ 进一步/ 表明/ ,/ 最/ 紧凑/ 结点/ 映射/ 问题/ 没有/ 常数/ 边界/ 的/ 多项式/ 时间/ 近似算法/ ./ 因此/ ,/ 接下来/ 我们/ 设计/ 一种/ 启发式/ 算法/ 来/ 求解/ 最/ 紧凑/ 结点/ 映射/ 的/ 近似/ 解/ ./ 4.2/ 紧凑/ 的/ 结点/ 映射/ 算法/ 我们/ 设计/ 启发式/ 算法/ 的/ 思路/ 是/ 先/ 找出/ 一个/ CNM/ 问题/ 的/ 可行/ 解/ ,/ 然后/ 再/ 在/ 这个/ 可行/ 解/ 的/ 基础/ 上/ 逐步/ 优化/ ,/ 找出/ 更优/ 的/ 近似/ 解/ ,/ 持续/ 整个/ 过程/ 直至/ 不能/ 进一步/ 优化/ 为止/ ./ 定理/ 4/ ./ CH/ 问题/ 属于/ P/ 问题/ ./ 证明/ ./ 任意/ 给定/ 一个/ 簇头/ 选择/ 问题/ CH/ =/ (/ N/ ,/ C/ ,/ R/ )/ ,/ 构造/ 一个/ 与/ 之/ 对应/ 的/ 二分/ 图/ G/ =/ (/ A/ ∪/ B/ ,/ E/ )/ ./ 令/ A/ =/ N/ ,/ B/ =/ C/ ,/ E/ =/ {/ (/ ni/ ,/ cj/ )/ |/ ni/ ∈/ cj/ ;/ ni/ ∈/ N/ ,/ cj/ ∈/ C/ }/ ,/ 这样/ 就/ 构造/ 出/ 了/ 二分/ 图/ G/ ,/ 且/ 构造/ 过程/ 可以/ 在/ 多项式/ 时间/ 内/ 完成/ ./ 显然/ ,/ CH/ 有解/ 与/ G/ 的/ 最大/ 匹配/ 度/ 等于/ |/ C/ |/ 是/ 等价/ 的/ ./ 而/ 二分/ 图/ 最大/ 匹配/ 问题/ [/ 17/ ]/ 可以/ 在/ 多项式/ 时间/ 内/ 解决/ ,/ 故/ CH/ 问题/ 也/ 可以/ 在/ 多项式/ 时间/ 内/ 求解/ ,/ 即/ CH/ 属于/ P/ 问题/ ./ 证毕/ ./ 定理/ 4/ 表明/ CNM/ 问题/ 的/ 可行/ 解/ 可以/ 在/ 多项式/ Page7/ 时间/ 内/ 求得/ ./ 只/ 需/ 将/ CNM/ 问题/ 转化成/ 二分/ 图/ 最大/ 匹配/ 问题/ ,/ 再/ 利用/ 二分/ 图/ 的/ 最大/ 匹配/ 算法/ 即可/ 求解/ ./ 据此/ ,/ 我们/ 设计/ 出/ 一种/ 求解/ CNM/ 问题/ 初始/ 解/ 的/ 算法/ ./ 此外/ ,/ 我们/ 在/ 算法/ 中/ 还/ 引入/ 随机因素/ (/ 算法/ 1/ 第/ 6/ ~/ 12/ 行/ )/ ,/ 使得/ 每次/ 算法/ 返回/ 的/ 结果/ 都/ 不/ 相同/ ,/ 彼此之间/ 独立性/ 强/ ./ 求解/ CNM/ 问题/ 的/ 初始/ 解/ 的/ 算法/ 具体/ 如下/ ./ 算法/ 1/ ./ CNM/ 问题/ 初始/ 解/ 算法/ ./ AlgorithmCNM/ _/ Initialinput/ :/ CNM/ =/ (/ N/ ,/ dij/ ,/ C/ ,/ R/ ,/ D/ )/ output/ :/ V/ // // 构建/ 二分/ 图/ 1/ ./ buildabipartitegraphG/ =/ (/ A/ ∪/ B/ ,/ E/ )/ 1.1/ ./ A/ =/ N/ ,/ B/ =/ C1/ ./ 2/ ./ E/ =/ {/ (/ ni/ ,/ cj/ )/ |/ ni/ ∈/ cj/ ;/ ni/ ∈/ N/ ,/ cj/ ∈/ C/ }/ // // 求解/ 二分/ 图/ 最大/ 匹配/ 问题/ 2/ ./ findamaxmatchingM/ // // |/ M/ |/ ≠/ |/ C/ |/ ,/ 表明/ 没有/ 可行/ 解/ ,/ 返回/ / 3/ ./ if/ (/ |/ M/ |/ ≠/ |/ C/ |/ )/ {/ V/ =/ / ,/ goto13/ }/ // // 构建/ 初始/ 解/ 4/ ./ forall/ (/ nt/ ,/ ci/ )/ ∈/ M/ {/ vi/ =/ nt/ }/ 5/ ./ V/ =/ 〈/ v1/ ,/ v2/ ,/ …/ ,/ v/ |/ C/ |/ 〉/ // // 随机化/ 初始/ 解/ 6/ ./ for/ (/ 1/ / i/ / |/ C/ |/ )/ {/ 7/ ./ ci/ =/ ci/ -/ {/ v1/ ,/ v2/ ,/ …/ ,/ v/ |/ C/ |/ }/ 8/ ./ if/ (/ ci/ ≠/ / )/ {/ 9/ ./ randomselectau/ ∈/ ci10/ ./ vi/ =/ u/ ,/ V/ =/ V/ / iu11/ ./ }/ 12/ ./ }/ 13/ ./ returnV/ 其中/ V/ / iu/ 表示/ 用/ u/ 替换/ 簇头/ i/ 所/ 得到/ 的/ 点/ 序列/ ./ 例如/ ,/ 若/ V/ =/ 〈/ v1/ ,/ …/ ,/ vi/ -/ 1/ ,/ vi/ ,/ vi/ +/ 1/ ,/ …/ ,/ vk/ 〉/ ,/ 那么/ V/ / iu/ =/ 〈/ v1/ ,/ …/ ,/ vi/ -/ 1/ ,/ u/ ,/ vi/ +/ 1/ ,/ …/ ,/ vk/ 〉/ ./ 在/ 找到/ CNM/ 问题/ 的/ 可行/ 解/ 之后/ ,/ 利用/ 局部/ 搜索/ 的/ 思想/ 依次/ 替换/ 其中/ 的/ 一个/ 结点/ 使得/ 近似/ 解/ 更优/ ,/ 持续/ 整个/ 过程/ 直到/ 不能/ 进一步/ 优化/ 为止/ (/ 算法/ 2/ 第/ 4/ ~/ 14/ 行/ )/ ./ 算法/ 在/ 寻找/ 替换/ 结点/ 时/ 采取/ 最速/ 下降/ 的/ 策略/ ,/ 即/ 每次/ 替换/ 都/ 选择/ 全部/ 候选/ 结点/ 中/ 使得/ Γ/ (/ V/ ,/ R/ )/ 下降/ 最多/ 的/ 结点/ (/ 算法/ 2/ 第/ 6/ ~/ 12/ 行/ )/ ./ 求解/ CNM/ 问题/ 近似/ 解/ 的/ 具体/ 算法/ 如下/ ./ 算法/ 2/ ./ 紧凑/ 的/ 结点/ 映射/ 算法/ ./ AlgorithmLS/ _/ SDMinput/ :/ CNM/ =/ (/ N/ ,/ dij/ ,/ C/ ,/ R/ ,/ D/ )/ output/ :/ V/ // // 求解/ 初始/ 解/ 1/ ./ V/ =/ CNM/ _/ Initial/ (/ NCH/ )/ // // 若/ 初始/ 解为/ / ,/ 则/ 没有/ 可行/ 解/ 2/ ./ if/ (/ V/ =/ =/ / )/ goto153/ ./ dmax/ =/ +/ // // 持续/ 替换/ 初始/ 解中/ 的/ 一个/ 结点/ ,/ 使/ 结果/ 更优/ 4/ ./ while/ (/ dmax/ >/ 0/ )/ {/ 5/ ./ dmax/ =/ 0/ ,/ x/ =/ null/ ,/ k/ =/ -/ 16/ ./ for/ (/ ci/ ∈/ C/ )/ {/ 7/ ./ u/ =/ argmin/ {/ Γ/ (/ V/ / iu/ ,/ R/ )/ |/ u/ ∈/ ci/ ;/ 8/ ./ if/ (/ dmax/ </ Γ/ (/ V/ ,/ R/ )/ -/ Γ/ (/ V/ / iu/ ,/ R/ )/ )/ {/ 9/ ./ dmax/ =/ Γ/ (/ V/ ,/ R/ )/ -/ Γ/ (/ V/ / iu/ ,/ R/ )/ 10/ ./ x/ =/ u/ ,/ k/ =/ i11/ ./ }/ 12/ ./ }/ 13/ ./ if/ (/ dmax/ >/ 0/ )/ {/ ck/ =/ ck/ -/ {/ vk/ }/ ,/ V/ =/ V/ / kx/ }/ 14/ ./ }/ 15/ ./ returnV/ 第/ 7/ 行在/ 簇/ ci/ 中/ 寻找/ 这样/ 的/ 结点/ :/ 它/ 没有/ 被/ 选中/ 作为/ 簇头/ (/ u/ / V/ -/ {/ vi/ }/ )/ ,/ 同时/ 又/ 使得/ Γ/ (/ V/ / iu/ ,/ R/ )/ 取/ 最小值/ ./ 只要/ 遍历/ 簇/ ci/ 中/ 的/ 所有/ 结点/ 即可/ 完成/ 第/ 7/ 行/ 的/ 计算/ ,/ 而/ 簇/ ci/ 中/ 的/ 结点/ 数/ 不会/ 超过/ |/ N/ |/ ,/ 故其/ 复杂度/ 不会/ 超过/ O/ (/ |/ N/ |/ )/ ./ 算法/ LS/ _/ SDM/ 的/ 复杂度/ 主要/ 由/ while/ 循环/ 决定/ ./ 每次/ while/ 循环/ 中/ for/ 循环/ 执行/ |/ C/ |/ 次/ ,/ 一次/ for/ 循环/ 的/ 复杂度/ 不/ 超过/ O/ (/ |/ N/ |/ )/ ,/ 故/ 一次/ while/ 循环/ 的/ 复杂度/ 不/ 超过/ O/ (/ |/ C/ |/ |/ N/ |/ )/ ./ 要/ 使/ while/ 循环/ 不/ 终止/ ,/ 必有/ 执行/ 完该/ 次/ while/ 循环/ 后/ dmax/ >/ 0/ ./ 又/ 若/ dmax/ >/ 0/ ,/ 则/ 必有/ 某个/ 簇/ ci/ ∈/ C/ 减少/ 一个/ 结点/ (/ 第/ 13/ 行/ )/ ,/ 而/ 所有/ 簇/ ci/ ∈/ C/ 中/ 的/ 结点/ 总数/ 不/ 超过/ |/ C/ |/ |/ N/ |/ ,/ 故/ while/ 循环/ 的/ 执行/ 次数/ 不会/ 超过/ |/ C/ |/ |/ N/ |/ ,/ 所以/ LS/ _/ SDM/ 的/ 复杂性/ 不/ 超过/ O/ (/ |/ C/ |/ 2/ |/ N/ |/ 2/ )/ ./ 5/ 保持/ 结点/ 紧凑/ 的/ 虚拟/ 网络/ 映射/ 上/ 一节/ 求解/ 紧凑/ 的/ 结点/ 映射/ 过程/ 中/ ,/ 我们/ 假设/ 结点/ 分簇/ 已经/ 完成/ ./ 本节/ 中/ ,/ 我们/ 首先/ 对/ 结点/ 进行/ 分簇/ ,/ 并/ 在/ 分簇/ 过程/ 中/ 结合/ 割/ 检验/ 理论/ ,/ 充分考虑/ 虚拟/ 网络/ 映射/ 过程/ 中/ 的/ 带宽/ 约束/ ./ 接着/ 在/ 此基础/ 上/ 提出/ 保持/ 结点/ 紧凑/ 的/ 虚拟/ 网络/ 映射/ 方法/ ./ 5.1/ 结点/ 分簇/ 定义/ 7/ (/ 割/ )/ ./ 对/ 网络/ G/ =/ (/ N/ ,/ E/ ,/ AN/ ,/ AE/ )/ 的/ 结点/ 集合/ N/ 的/ 一个/ 划分/ 称为/ G/ 的/ 一个/ 割/ ./ 割/ (/ S/ ,/ 珚/ S/ )/ 将/ N/ 分成/ S/ 和/ 珚/ S/ =/ N/ -/ S/ 两个/ 部分/ ,/ 称之为/ 网络/ G/ 的/ |/ S/ |/ -/ 割/ ./ 若边/ e/ =/ (/ u/ ,/ v/ )/ 满足/ u/ ∈/ S/ ,/ v/ ∈/ 珚/ S/ ,/ 则/ 称边/ e/ 通过/ 割/ (/ S/ ,/ 珚/ S/ )/ ./ 所有/ 通过/ 割/ (/ S/ ,/ 珚/ S/ )/ 的/ 边/ 的/ 带宽/ 之/ 和/ 称之为/ 割/ (/ S/ ,/ 珚/ S/ )/ 的/ 容量/ ,/ 记/ 为/ ψ/ (/ G/ ,/ S/ )/ ./ Page8/ 定义/ 8/ (/ k/ -/ 割/ 检验/ )/ ./ / N/ :/ NV/ →/ NP/ 是/ GV/ =/ (/ NV/ ,/ EV/ ,/ AV/ 点/ 映射/ ,/ 常数/ k/ ∈/ [/ 1/ ,/ |/ NV/ |/ ]/ ./ 如果/ / N/ 满足/ 式/ (/ 18/ )/ ,/ 则/ 称/ / N/ 通过/ k/ -/ 割/ 检验/ ./ ψ/ (/ GV/ ,/ S/ )/ / ψ/ (/ GP/ ,/ / N/ (/ S/ )/ )/ ;/ / S/ / NV/ ,/ |/ S/ |/ =/ k/ 其中/ / N/ (/ S/ )/ =/ {/ nP/ |/ nP/ =/ / N/ (/ nV/ )/ ,/ nV/ ∈/ S/ }/ ./ 图/ 4/ 所示/ 是/ 1/ -/ 割/ 检验/ 的/ 实例/ ./ 定理/ 5/ (/ 可行性/ 检验/ 定理/ )/ [/ 14/ ]/ ./ / N/ 有/ 可行/ 的/ 链路/ 映射/ 与/ 之/ 对应/ ,/ 当且/ 仅/ 当/ / N/ 通过/ 所有/ 的/ k/ -/ 割/ 检验/ ,/ 其中/ k/ ∈/ 1/ ,/ |/ NV/ |/ // 2/ [/ Hou/ 在/ 文献/ [/ 14/ ]/ 中/ 给出/ 了/ 定理/ 5/ 的/ 证明/ ./ 给定/ 一个/ 结点/ 映射/ ,/ 要/ 判断/ 是否/ 有/ 可行/ 的/ 链路/ 映射/ 与/ 之/ 对应/ 需要/ 验证/ 其/ 是否/ 通过/ 全部/ 的/ k/ -/ 割/ 检验/ ./ 然而/ 充要条件/ 的/ 验证/ 复杂/ 度过/ 高/ ,/ 在/ 计算/ 上/ 不/ 可行/ ./ 与/ 之/ 对应/ ,/ 通过/ 1/ -/ 割/ 检验/ 是/ 结点/ 映射/ 有/ 可行/ 的/ 链路/ 映射/ 与/ 之/ 对应/ 的/ 必要条件/ ,/ 计算/ 上/ 十分/ 简便/ ,/ 复杂度/ 仅为/ O/ (/ n/ )/ ./ 文献/ [/ 14/ ]/ 进一步/ 表明/ ,/ 当/ 结点/ 映射/ / N/ 通过/ 1/ -/ 割/ 检验/ 时/ ,/ 其有/ 可行/ 链路/ 映射/ 与/ 之/ 对应/ 的/ 概率/ 为/ 93.9/ %/ ,/ 可以/ 将/ 绝大部分/ 不/ 存在/ 可行/ 链路/ 映射/ 的/ 结点/ 映射/ 排除/ 在外/ ,/ 极大/ 地/ 缩减/ 了/ 结点/ 映射/ 的/ 搜索/ 空间/ ./ 请求/ GV/ =/ (/ NV/ ,/ EV/ ,/ AV/ (/ NP/ ,/ EP/ ,/ APN/ ,/ APE/ )/ ,/ 对于/ / nVi/ ∈/ NV/ ,/ 选择/ 满足/ 下述/ 条件/ 的/ 物理/ 结点/ nP/ ∈/ NP/ 作为/ 它/ 的/ 候选/ 宿主/ ,/ 并/ 将/ 它们/ 组成/ 簇/ ci/ ./ 因此/ ,/ 我们/ 采取/ 如下/ 的/ 分簇/ 方法/ :/ 给定/ 虚拟/ 网络/ ci/ =/ {/ nP/ |/ AV/ 任意/ 从/ 每个/ 簇/ ci/ 中/ 选择/ 一个/ 结点/ vi/ ∈/ ci/ 作为/ 虚拟/ 结点/ nVi/ 的/ 宿主/ 可/ 组成/ 一个/ 结点/ 映射/ / N/ ,/ 依据/ 上述/ 分簇/ 方法/ ,/ 所有/ 的/ / N/ 都/ 能/ 通过/ 1/ -/ 割/ 检验/ ./ 又/ 依据/ 文献/ [/ 14/ ]/ ,/ / N/ 有/ 可行/ 的/ 链路/ 映射/ 与/ 之/ 对应/ 的/ 概率/ 超过/ 93/ %/ ./ 5.2/ 保持/ 结点/ 紧凑/ 的/ 虚拟/ 网络/ 映射/ 算法/ 本/ 小节/ 提出/ 一种/ 保持/ 结点/ 紧凑/ 的/ 虚拟/ 网络/ 映射/ 算法/ ./ 给定/ 请求/ GV/ 和/ 资源/ GP/ ,/ 算法/ 首先/ 对/ 候选/ 宿主/ 进行/ 分簇/ ;/ 然后/ 利用/ 算法/ LS/ _/ SDM/ 求解/ 一个/ 紧凑/ 的/ 结点/ 映射/ / N/ ;/ 接着/ 基于/ Yu/ 等/ 人/ [/ 7/ ]/ 的/ 研究/ 将/ 链路/ 映射/ 建模/ 成多/ 商品/ 流/ 问题/ ,/ 求解/ 与/ / N/ 对应/ 的/ 最优/ 链路/ 映射/ 方案/ / E/ ;/ 进而/ 求/ 出/ 虚拟/ 网络/ 映射/ 问题/ 的/ 解/ / =/ (/ / N/ ,/ / E/ )/ ./ 如果/ 没有/ 找到/ 可行/ 的/ / E/ 与/ / N/ 对应/ ,/ 则/ 重新/ 求解/ 一个/ 新/ 的/ 紧凑/ 结点/ 映射/ / N/ ,/ 再/ 接着/ 进行/ 链路/ 映射/ ,/ 重复/ 上述/ 过程/ ./ 如果/ 经过/ Ttry/ 次/ 尝试/ 仍/ 找/ 不到/ 可行/ 的/ 虚拟/ 网络/ 映射/ ,/ 算法/ 终止/ ./ 算法/ 的/ 具体内容/ 如下/ ./ 算法/ 3/ ./ 保持/ 结点/ 紧凑/ 的/ 虚拟/ 网络/ 映射/ 算法/ ./ AlgorithmCNM/ _/ LS/ _/ SDMinput/ :/ GP/ =/ (/ NP/ ,/ EP/ ,/ APN/ ,/ APE/ )/ ,/ GV/ =/ (/ NV/ ,/ EV/ ,/ AVoutput/ :/ / // // 构建/ CNM/ 问题/ 实例/ ,/ 求其/ 近似/ 解/ 1/ ./ buildanCNMinstanceIcnm1/ ./ 1/ ./ for/ (/ 1/ / i/ / |/ NV/ |/ )/ ci/ =/ {/ nP/ |/ APN/ (/ nP/ )/ >/ AV1/ ./ 2/ ./ C/ =/ {/ ci/ |/ 1/ / i/ / |/ NV/ |/ }/ 1.3/ ./ for/ (/ 1/ / i/ ,/ j/ / |/ NR/ |/ )/ dij/ =/ sp/ (/ nPi/ ,/ nP1/ ./ 4/ ./ R/ =/ {/ rij/ =/ AV2/ ./ T/ =/ 0/ // // 尝试/ 次数/ 置/ 零/ 3/ ./ solvetheIcnm/ ,/ V/ =/ LS/ _/ SDM/ (/ Icnm/ )/ // // CNM/ 问题/ 解为/ / ,/ 不能/ 完成/ 结点/ 映射/ 4/ ./ if/ (/ V/ =/ =/ / )/ {/ / =/ / ,/ goto18/ }/ // // 构造/ 结点/ 映射/ 5/ ./ for/ (/ 1/ / i/ / |/ NV/ |/ )/ / N/ (/ nVi/ )/ ←/ vi/ // // 将/ 链路/ 映射/ 建模/ 成/ MCF/ 问题/ ,/ 并/ 求解/ 6/ ./ accordingthelinkmappingproblem/ ,/ buildan/ // // 若/ MCF/ 问题/ 有/ 可行/ 解/ ,/ 完成/ 链路/ 映射/ 7/ ./ if/ (/ Imcfhasfeasiblesolution/ )/ {/ 8/ ./ usetheresulttobuild/ / E9/ ./ }/ else/ {/ // // MCF/ 问题/ 没有/ 可行/ 解/ 10/ ./ if/ (/ T/ </ Ttry/ )/ {/ 11/ ./ T/ ++/ ,/ goto312/ ./ }/ else/ {/ 13/ ./ / =/ / ,/ goto1814/ ./ }/ 15/ ./ }/ 16/ ./ / =/ (/ / N/ ,/ / E/ )/ // // 更新/ 资源/ 状态/ 17/ ./ updateresoucestatus/ ,/ GP/ =/ GP/ -/ / (/ GV/ )/ 18/ ./ return/ / 其中/ 函数/ sp/ (/ 第/ 1.3/ 行/ )/ 表示/ 两点/ 间/ 最/ 短/ 路径/ 长度/ ./ 由于/ 算法/ CNM/ _/ Initial/ 在/ 寻找/ 初始/ 解/ 的/ 过程/ 中/ 加入/ Page9/ 了/ 随机因素/ ,/ 使得/ 算法/ LS/ _/ SDM/ 每次/ 求得/ 的/ 结点/ 映射/ 结果/ 都/ 不/ 相同/ ,/ 彼此之间/ 独立性/ 强/ ./ 依据/ 概率论/ ,/ 当/ 尝试/ 次数/ Ttry/ 足够/ 大时/ ,/ 如果/ 仍然/ 没有/ 找到/ 可行/ 的/ 映射/ ,/ 那么/ 不/ 存在/ GV/ 映射/ 到/ GP/ 上/ 的/ 可行/ 映射/ 的/ 概率/ 趋近/ 于/ 1.6/ 实验/ 验证/ 6.1/ 实验/ 环境/ 我们/ 采用/ 虚拟/ 网络/ 映射/ 问题/ 研究/ 中/ 通用/ 的/ 方法/ [/ 7/ ,/ 10/ ]/ 来/ 进行/ 实验/ 验证/ ./ 物理/ 资源/ 和/ 虚拟/ 网络/ 请求/ 的/ 网络拓扑/ 均/ 由/ GT/ -/ ITM/ [/ 20/ ]/ 生成/ ./ 物理/ 资源/ 由/ 100/ 个/ 结点/ 和约/ 300/ 条边/ 组成/ ,/ 物理/ 结点/ 的/ 计算能力/ 和/ 物理/ 链路/ 的/ 带宽/ 都/ 在/ [/ 50/ ,/ 100/ ]/ 上/ 均匀分布/ ,/ 其/ 拓扑/ 在/ 实验/ 过程/ 中/ 保持/ 不变/ ./ 虚拟/ 网络/ 请求/ 随机/ 产生/ ,/ 每个/ 虚拟/ 网络/ 的/ 结点/ 数在/ [/ 0.8/ ×/ E/ [/ scale/ ]/ ,/ 1.2/ ×/ E/ [/ scale/ ]/ ]/ 之间/ 均匀分布/ ./ 虚拟/ 网络/ 中/ 结点/ 与/ 边/ 的/ 权值/ 分别/ 在/ [/ 0.8/ ×/ E/ [/ cpu/ ]/ ,/ 1.2/ ×/ E/ [/ cpu/ ]/ ]/ 和/ [/ 0.8/ ×/ E/ [/ bw/ ]/ ,/ 1.2/ ×/ E/ [/ bw/ ]/ ]/ 之间/ 均匀分布/ ./ 实验/ 过程/ 持续/ 1000/ 个/ 单位/ 时间/ ,/ 虚拟/ 网络/ 请求/ 的/ 生存/ 时间/ 符合/ 负/ 指数分布/ ,/ 其/ 数学/ 期望/ 为/ 200/ 个/ 单位/ 时间/ ./ 虚拟/ 网络/ 请求/ 的/ 到达/ 符合/ 泊松/ 过程/ ,/ 平均/ 每/ 100/ 个/ 单位/ 时间/ 内/ 到达/ 的/ 虚拟/ 请求/ 数为/ E/ [/ con/ ]/ ./ 我们/ 选取/ 与/ 之前/ 最/ 主要/ 的/ 研究/ 结果/ [/ 7/ ,/ 10/ ]/ 进行/ 比较/ ./ “/ bw/ -/ first/ ”/ 表示/ 文献/ [/ 7/ ]/ 中/ 方法/ 的/ 实验/ 结果/ ./ 文献/ [/ 10/ ]/ 通过/ 位置/ 约束/ 的/ 形式/ 给/ 宿主/ 结点/ 的/ 选择/ 范围/ 额外/ 增加/ 了/ 限制/ ,/ 如果/ 虚拟/ 链路/ 两端/ 属于/ 同一个/ 簇/ ,/ 则/ 该/ 算法/ 求解/ 得到/ 的/ 结果/ 性能/ 远远不如/ 文献/ [/ 7/ ]/ ,/ 因此/ 没有/ 在/ 这里/ 呈现/ 其/ 实验/ 结果/ ./ 此外/ ,/ 为了/ 验证/ 结点/ 紧凑/ 思想/ 的/ 有效性/ ,/ 我们/ 给出/ 两种/ 基于/ 结点/ 紧凑/ 思想/ 而/ 实现/ 的/ 虚拟/ 网络/ 映射/ 方法/ 的/ 结果/ ./ 一种/ 方法/ 是/ 基于/ 简单/ 的/ 贪婪/ 准则/ min/ {/ duv/ // rij/ }/ ;/ u/ ∈/ ci/ ,/ v/ ∈/ cj/ 来/ 求解/ 结点/ 映射/ 而/ 得/ 的/ 方法/ ,/ 其/ 结果/ 用/ “/ cnm/ -/ greedy/ ”/ 表示/ ./ 另/ 一种/ 是/ 本文/ 提出/ 的/ 方法/ ,/ 它/ 利用/ 基于/ 最速/ 下降/ 和/ 局部/ 查找/ 思想/ 而/ 设计/ 的/ 启发式/ 算法/ 来/ 求解/ 结点/ 映射/ ,/ 其/ 结果/ 用/ “/ cnm/ -/ ls/ -/ sdm/ ”/ 表示/ ./ 我们/ 通过/ “/ cnm/ -/ greedy/ ”/ 和/ “/ cnm/ -/ ls/ -/ sdm/ ”/ 的/ 结果/ 与/ “/ bw/ -/ first/ ”/ 的/ 结果/ 的/ 对比/ 来/ 验证/ 结点/ 紧凑/ 思想/ 的/ 有效性/ ;/ 通过/ “/ cnm/ -/ ls/ -/ sdm/ ”/ 的/ 结果/ 和/ “/ cnm/ -/ greedy/ ”/ 的/ 结果/ 的/ 对比/ 来/ 验证/ 本文/ 所提/ 启发式/ 算法/ 的/ 性能/ ./ 影响/ 实验/ 结果/ 的/ 因素/ 很多/ ,/ 本文/ 选出/ 最/ 主要/ 的/ 参数/ (/ 如表/ 1/ 所示/ )/ 并/ 逐一/ 分析/ 它们/ 对/ 实验/ 结果/ 的/ 影响/ ./ 为了/ 更好/ 地/ 反映/ 出/ 每个/ 参数/ 对/ 实验/ 结果/ 的/ 影响/ ,/ 减少/ 其它/ 因素/ 的/ 干扰/ ,/ 每组/ 实验/ 中/ 我们/ 只/ 变动/ 被/ 考察/ 的/ 参数/ ,/ 而/ 保持/ 其它/ 参数/ 不变/ ./ 然后/ 通过/ 综合/ 多组/ 实验/ 结果/ ,/ 全面/ 考察/ 各个/ 算法/ 的/ 整体/ 表现/ ./ 由于/ 虚拟/ 网络/ 请求/ 是/ 随机/ 生成/ 的/ ,/ 为了/ 避免/ 随机因素/ 对/ 实验/ 结果/ 产生/ 扰动/ ,/ 每次/ 实验/ 生成/ 15/ 组/ 虚拟/ 网络/ 请求/ 数据/ ,/ 并用/ 这/ 15/ 组/ 数据/ 的/ 实验/ 结果/ 的/ 平均值/ 作为/ 该次/ 实验/ 的/ 结果/ ./ 参数/ TtryE/ [/ scale/ ]/ 每个/ 请求/ 中/ 虚拟/ 结点/ 个数/ 的/ 数学/ 期望/ E/ [/ cpu/ ]/ 虚拟/ 结点/ 对/ 计算能力/ 需求/ 的/ 数学/ 期望/ E/ [/ bw/ ]/ 虚拟/ 链路/ 对/ 带宽/ 资源/ 需求/ 的/ 数学/ 期望/ E/ [/ con/ ]/ 每/ 100/ 单位/ 时间/ 内/ 平均/ 到达/ 的/ 请求/ 数/ 6.2/ 实验/ 结果/ 及/ 分析/ 实验/ 结果/ 证实/ 了/ 本文/ 所提/ 算法/ 具有/ 良好/ 的/ 性能/ ,/ 映射/ 的/ 平均/ 路径/ 长度/ 更/ 短/ ,/ 能/ 有效/ 地/ 提高/ 资源/ 的/ 利用率/ ,/ 显著/ 地/ 提高/ 虚拟/ 网络/ 请求/ 的/ 接受/ 率/ ./ 下面/ 介绍/ 主要/ 的/ 实验/ 结果/ ./ (/ 1/ )/ 增大/ 最大/ 尝试/ 次数/ Ttry/ ,/ 可以/ 提高/ CNM/ _/ LS/ _/ SDM/ 算法/ 的/ 性能/ ;/ 当其/ 超过/ 一定/ 的/ 值/ 之后/ ,/ 进一步/ 增大/ Ttry/ ,/ 对/ 性能/ 的/ 改善/ 不/ 明显/ ./ 我们/ 首先/ 考察/ 最大/ 尝试/ 次数/ Ttry/ 对/ CNM/ _/ LS/ _/ SDM/ 算法/ 性能/ 的/ 影响/ ./ 设置/ 实验/ 参数/ 使/ 系统/ 负载/ 处于/ 一个/ 合理/ 的/ 水平/ ,/ 然后/ 在/ 实验/ 中/ 变动/ Ttry/ ,/ 观察/ 虚拟/ 网络/ 请求/ 接受/ 率/ 的/ 变化/ 情况/ ,/ 实验/ 结果/ 如图/ 5/ 所示/ ./ 随着/ Ttry/ 的/ 提高/ ,/ 接受/ 率/ 也/ 在/ 提高/ ,/ 当/ Ttry/ 超过/ 一定/ 数值/ 之后/ ,/ 接受/ 率/ 就/ 没有/ 显著/ 的/ 提升/ ./ 这一/ 结果/ 与/ 此前/ 的/ 分析/ 相一致/ ./ 从图/ 5/ 中/ 可以/ 看出/ Ttry/ =/ 5/ 是/ 一个/ 临界值/ ,/ 因此/ 在/ 下面/ 的/ 实验/ 中/ ,/ 我们/ 设定/ 最大/ 尝试/ 次数/ 为/ 5/ ./ 图/ 5/ 最大/ 尝试/ 次数/ 对/ CNM/ _/ LS/ _/ SDM/ 算法/ 性能/ (/ E/ [/ cpu/ ]/ =/ 20/ ,/ E/ [/ bw/ ]/ =/ 35/ ,/ E/ [/ scale/ ]/ =/ 10/ ,/ req/ _/ num/ =/ 60/ )/ (/ 2/ )/ CNM/ _/ LS/ _/ SDM/ 算法/ 可以/ 显著/ 缩短/ 映射/ 的/ 通常/ 情况/ 下/ ,/ 虚拟/ 结点/ 分布/ 越/ 紧凑/ ,/ 按照/ 多/ 商品/ 平均/ 路径/ 长度/ ,/ 提高/ 资源/ 的/ 利用率/ ./ Page10/ 流/ 算法/ 完成/ 链路/ 映射/ 后/ ,/ 其/ 平均/ 路径/ 长度/ 也/ 会/ 越/ 小/ ./ 接着/ 我们/ 考察/ 虚拟/ 网络/ 映射/ 完成/ 后/ ,/ 虚拟/ 链路/ 映射/ 成/ 物理/ 路径/ 的/ 平均/ 路径/ 长度/ 的/ 变化/ 情况/ ./ 平均/ 路径/ 长度/ 反映/ 了/ 映射/ 占用/ 带宽/ 资源/ 的/ 情况/ ,/ 平均/ 路径/ 长度/ 越小/ ,/ 所/ 占用/ 的/ 带宽/ 资源/ 越/ 少/ ,/ 资源/ 利用率/ 就/ 越/ 高/ ./ 实验/ 结果/ (/ 如图/ 6/ )/ 表明/ ,/ CNM/ _/ LS/ _/ SDM/ 算法/ 的/ 图/ 6/ 各种/ 实验/ 参数/ 配置/ 下/ 的/ 平均/ 路径/ 长度/ (/ 3/ )/ 结点/ 紧凑/ 的/ 虚拟/ 网络/ 映射/ 方法/ 可以/ 显著/ 提高/ 虚拟/ 网络/ 请求/ 的/ 接受/ 率/ ;/ LS/ _/ SDM/ 算法/ 求解/ CNM/ 问题/ 的/ 结果/ 优于/ 贪婪/ 算法/ ./ 最后/ ,/ 我们/ 通过/ 虚拟/ 网络/ 请求/ 的/ 接受/ 率来/ 考察/ 算法/ 的/ 性能/ ./ 从/ 实验/ 结果/ (/ 图/ 7/ )/ 可以/ 看出/ ,/ 在/ 各个/ 实验/ 中/ CNM/ _/ LS/ _/ SDM/ 算法/ 的/ 接受/ 率/ 都/ 是/ 最高/ 的/ ,/ CNM/ _/ greedy/ 算法/ 次之/ ./ 这/ 表明/ 我们/ 提出/ 的/ 保持/ 结点/ 紧凑/ 的/ 虚拟/ 网络/ 映射/ 方法/ 是/ 有效/ 的/ ,/ 可以/ 全面/ 稳定/ 的/ 提高/ 虚拟/ 网络/ 请求/ 的/ 接受/ 率/ ./ 出现/ 这个/ 结果/ 的/ 主要/ 原因/ 有/ 二/ :/ ①/ 我们/ 在/ 结点/ 映射/ 阶段/ 扩大/ 了/ 宿主/ 的/ 选择/ 范围/ ,/ 而/ 不是/ 只/ 关注/ 那些/ 带宽/ 资源/ 充足/ 的/ 结图/ 7/ 各种/ 实验/ 参数/ 配置/ 下/ 的/ 请求/ 接受/ 率/ 7/ 结论/ 本文/ 提出/ 了/ 一种/ 保持/ 结点/ 紧凑/ 的/ 虚拟/ 网络/ 映射/ 方法/ ,/ 该/ 方法/ 将/ 结点/ 映射/ 和/ 链路/ 映射/ 两个/ 阶段/ 综合/ 起来/ 考虑/ ./ 与/ 传统/ 方法/ 优先选择/ 带宽/ 较大/ 的/ 结点/ 的/ 策略/ 不同/ ,/ 本文/ 在/ 结点/ 映射/ 阶段/ 将/ 所有/ 满足/ 结点/ 计/ 平均/ 路径/ 长度/ 最小/ ,/ CNM/ _/ greedy/ 算法/ 次之/ ,/ 都/ 优于/ 文献/ [/ 7/ ]/ 中/ 的/ 方法/ ./ 这/ 表明/ 基于/ CNM/ 模型/ 求解/ 的/ 映射/ 可以/ 提高/ 资源/ 的/ 利用率/ ./ 从/ 实验/ 结果/ 中/ 还/ 可以/ 发现/ ,/ 随着/ 负载/ 的/ 不断/ 加重/ ,/ 平均/ 路径/ 长度/ 不断/ 增长/ ,/ 这/ 表明/ 当/ 负载/ 增大/ 时/ ,/ 需要/ 在/ 更/ 大/ 的/ 范围/ 内/ 配置/ 资源/ 才能/ 满足/ 虚拟/ 网络/ 请求/ 的/ 需求/ ./ 点/ ,/ 有利于/ 从/ 整体/ 上/ 提高/ 请求/ 的/ 接受/ 率/ ;/ ②/ 我们/ 将/ 结点/ 映射/ 和/ 链路/ 映射/ 结合/ 起来/ 考虑/ ,/ 将/ 相邻/ 的/ 虚拟/ 结点/ 映射/ 到/ 邻近/ 的/ 物理/ 结点/ 上/ ,/ 使/ 结点/ 分布/ 更加/ 紧凑/ ,/ 占用/ 更少/ 的/ 带宽/ 资源/ ./ 算法/ CNM/ _/ LS/ _/ SDM/ 与/ 算法/ CNM/ _/ greedy/ 的/ 主要/ 区别/ 在于/ 求解/ CNM/ 问题/ 近似/ 解/ 的/ 方法/ 不同/ ./ 从图/ 7/ 可以/ 看出/ 沿着/ 最大/ 梯度方向/ 进行/ 局部/ 搜索/ 的/ 方法/ (/ LS/ _/ SDM/ )/ 求得/ 的/ CNM/ 问题/ 的/ 近似/ 解/ 优于/ 贪婪/ 算法/ ./ 而/ 两者/ 的/ 接受/ 率/ 都/ 高于/ 文献/ [/ 7/ ]/ 中/ 方法/ 的/ 实验/ 结果/ ,/ 这/ 验证/ 了/ 本文/ 所提/ 的/ 保持/ 结点/ 紧凑/ 的/ 映射/ 思想/ 是/ 有效性/ 的/ ./ 算/ 能力/ 要求/ 并/ 通过/ 1/ -/ 割/ 检验/ 的/ 结点/ 都/ 作为/ 候选/ 宿主/ 并/ 将/ 它们/ 组成/ 簇/ ,/ 扩大/ 了/ 宿主/ 的/ 选择/ 空间/ ,/ 有利于/ 从/ 整体/ 上/ 提高/ 虚拟/ 网络/ 请求/ 的/ 接受/ 率/ ./ 接着/ ,/ 我们/ 从/ 每个/ 簇中/ 选择/ 一个/ 结点/ 作为/ 宿主/ 形成/ 结点/ 映射/ ./ 在/ 选择/ 宿主/ 时/ 考虑/ 链路/ 映射/ 将会/ 占用/ 多少/ 网络资源/ ,/ 选择/ 那些/ 紧凑/ 的/ 结点/ 映射/ ./ 我们/ 证明/ 在/ 带宽/ 资源/ 不/ 受限/ 时/ ,/ 最/ 紧凑/ 结点/ 映射/ 即/ 为/ 最优/ 结点/ 映射/ ./ 然而/ ,/ Page11/ 虚拟/ 网络/ 映射/ 问题/ 本身/ 的/ 复杂性/ 决定/ 了/ 最/ 紧凑/ 结点/ 映射/ 在/ 计算/ 上/ 不/ 可行/ ,/ 我们/ 证明/ 最/ 紧凑/ 结点/ 映射/ 为/ NP/ -/ Complete/ 问题/ 并且/ 没有/ 常数/ 边界/ 的/ 多项式/ 时间/ 近似算法/ ./ 因此/ ,/ 本文/ 提出/ 了/ 启发式/ 算法/ 求解/ 最/ 紧凑/ 结点/ 映射/ 的/ 近似/ 解/ ,/ 并/ 在/ 此基础/ 上/ 提出/ 了/ 一种/ 保持/ 结点/ 紧凑/ 的/ 虚拟/ 网络/ 映射/ 方法/ ./ 本文/ 的/ 方法/ 不仅/ 扩大/ 了/ 宿主/ 的/ 选择/ 空间/ ,/ 还会/ 将/ 相邻/ 的/ 虚拟/ 结点/ 映射/ 到/ 邻近/ 的/ 物理/ 结点/ 上/ ,/ 减少/ 了/ 虚拟/ 链路/ 对/ 网络资源/ 的/ 占用/ ./ 随后/ ,/ 本文/ 通过/ 一系列/ 实验/ 进行/ 验证/ ,/ 实验/ 结果表明/ ,/ 本文/ 方法/ 有效/ 地/ 提升/ 了/ 资源/ 的/ 利用率/ ,/ 全面/ 稳定/ 地/ 提高/ 了/ 虚拟/ 网络/ 请求/ 的/ 接受/ 率/ ./ 

