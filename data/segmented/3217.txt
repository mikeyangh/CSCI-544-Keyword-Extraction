Page1GR/ 犽/ NN/ :/ 空间/ 数据库/ 中组/ 反/ 犽/ 最近/ 邻/ 查询/ 宋晓宇于/ 程程/ 孙焕良/ 许景科/ (/ 沈阳/ 建筑/ 大学/ 信息/ 与/ 控制/ 工程学/ 沈阳/ 110168/ )/ 摘要/ 反/ k/ 最近/ 邻/ (/ Reversek/ -/ Nearest/ -/ Neighbor/ ,/ RkNN/ )/ 查询/ 是/ 在/ k/ 最近/ 邻/ (/ k/ -/ Nearest/ -/ Neighbor/ ,/ kNN/ )/ 查询/ 问题/ 的/ 基础/ 上/ 产生/ 的/ ,/ 获得/ 将/ 查询/ 对象/ 作为/ kNN/ 的/ 数据/ 对象/ 集合/ ,/ RkNN/ 可以/ 用于/ 评价/ 查询/ 对象/ 的/ 影响力/ ./ 根据/ 实际/ 应用/ 中/ 需要/ 查询/ 一组/ 对象/ 的/ RkNN/ ,/ 如/ 评价/ 连锁店/ 或/ 商业区/ 的/ 影响/ ./ 文中/ 提出/ 了/ 针对/ 空间/ 数据库/ 的/ 组反/ k/ 最近/ 邻/ (/ GroupRkNN/ ,/ GRkNN/ )/ 的/ 概念/ ,/ 并/ 设计/ 了/ 相关/ 算法/ ./ 查询/ 点/ 集合/ 是/ 一组/ 邻近/ 的/ 空间/ 对象/ ,/ 计算/ 查询/ 对象/ 的/ 最小/ 覆盖/ 圆/ ,/ 将/ 最小/ 覆盖/ 圆中/ 的/ 对象/ 作为/ 一个/ 整体/ 进行/ 过滤/ ,/ 设计/ 了/ 基于/ R/ 树/ 的/ 剪枝/ 方法/ ,/ 通过/ 提炼/ 获取/ 了/ 最终/ 的/ GRkNN/ 结果/ ./ 针对/ 真实/ 数据/ 集/ 进行/ 的/ 大量/ 实验/ 表明/ ,/ 提出/ 的/ GRkNN/ 算法/ 的/ 效率/ 明显/ 优于/ 目前/ 最好/ 的/ RkNN/ 算法/ ./ 关键词/ 反/ 最近/ 邻/ ;/ GRkNN/ 查询/ ;/ R/ 树/ ;/ 最小/ 覆盖/ 圆/ 1/ 引言/ 随着/ 位置/ 传感/ 装置/ 的/ 广泛/ 发展/ (/ 如/ GPS/ 接收/ )/ ,/ 基于/ 位置/ 的/ 服务/ 得到/ 了/ 广泛/ 的/ 应用/ [/ 1/ ]/ ,/ RkNN/ 查询/ Page2/ 群/ 就是/ RkNN/ 查询/ 所要/ 找/ 的/ 影响/ 集/ ./ RkNN/ 查询/ 可以/ 分为/ 单色/ RkNN/ (/ monochromaticRkNN/ )/ 和/ 双色/ RkNN/ (/ bichromaticRkNN/ )/ ,/ 单色/ RkNN/ 就是/ 查询/ 点/ 所在/ 数据/ 集/ 和/ 查询/ 结果/ 所在/ 数据/ 集是/ 一个/ 数据/ 集/ ,/ 而/ 双色/ RkNN/ 处理/ 两个/ 数据/ 集/ ./ 现有/ 的/ 对于/ RkNN/ 查询/ 的/ 解决方案/ [/ 2/ -/ 7/ ]/ 均/ 是/ 针对/ 单个/ 查询/ 点/ 进行/ 处理/ ./ 考虑/ 一个/ 实际/ 情况/ ,/ 查询/ 一个/ 商业区/ (/ 由/ 一组/ 空间/ 对象/ 组成/ )/ 的/ RkNN/ 结果/ ,/ 或/ 查询/ 一个/ 连锁店/ 的/ RkNN/ 结果/ ./ 针对/ 这一/ 应用/ 需求/ ,/ 本文/ 提出/ 一种/ 新/ 的/ 针对/ 空间/ 数据库/ 的/ RkNN/ 查询/ —/ —/ —/ GRkNN/ 查询/ (/ GroupRkNN/ ,/ GRkNN/ )/ ,/ 该/ 查询/ 可以/ 用于/ 评价/ 一组/ 对象/ 的/ 影响/ ./ 解决/ 该/ 问题/ 的/ 直接/ 方法/ 是/ 计算/ 单个/ 查询/ 对象/ 的/ RkNN/ ,/ 再求/ 出/ 所有/ 查询/ 结果/ 的/ 并/ 集/ ,/ 即/ 为/ 查询/ 点/ 集合/ 的/ RkNN/ 结果/ ./ 显然/ ,/ 当组内/ 对象/ 较多时/ ,/ 由于/ 未能/ 利用/ 组内/ 对象/ 的/ 紧邻/ 关系/ 进行/ 查询/ ,/ 查询/ 效率/ 会/ 较差/ ./ 本文/ 采用/ R/ 树/ [/ 8/ ]/ 索引/ 空间/ 对象/ ,/ 采用/ 过滤/ -/ 提炼/ 的/ 框架/ 模型/ ./ 在/ 过滤/ 阶段/ ,/ 计算/ 包含/ 所有/ 查询/ 点/ 的/ 最小/ 覆盖/ 圆/ ,/ 以该/ 圆为/ 整体/ 结合/ 一组/ 数据/ 集/ 子集/ S/ 来/ 计算/ 该组/ 查询/ 点/ RkNN/ 的/ 搜索/ 区域/ ,/ 在/ 这个/ 查询/ 区域/ 的/ 所有/ 对象/ 都/ 是/ 该/ GRkNN/ 查询/ 的/ 候选/ 集/ ,/ 而/ 计算/ 这个/ 搜索/ 区域/ 的/ 算法/ 是/ CINCH/ ;/ 在/ 提炼/ 阶段/ ,/ 对/ Range/ -/ k/ 验证/ 方法/ [/ 2/ ]/ 进行/ 改进/ 应用/ 到/ GRkNN/ 查询/ 中/ ,/ 去/ 除非/ GRkNN/ 查询/ 结果/ 的/ 候选者/ ,/ 从而/ 最终/ 得到/ 查询/ 结果/ ./ 实验/ 结果表明/ ,/ 提出/ 的/ GRkNN/ 算法/ 的/ 效率/ 明显/ 优于/ 目前/ 最好/ 的/ RkNN/ 算法/ ./ 本文/ 第/ 2/ 节/ 介绍/ 相关/ 工作/ ;/ 第/ 3/ 节是/ 问题/ 定义/ ;/ 第/ 4/ 节/ 具体/ 介绍/ GRkNN/ 查询/ 算法/ ;/ 第/ 5/ 节/ 介绍/ 双色/ GRkNN/ 算法/ 实现/ ;/ 第/ 6/ 节/ 介绍/ 本文/ 所/ 提出/ 的/ 算法/ 的/ 性能/ 测试/ ;/ 第/ 7/ 节/ 总结/ 全文/ ./ 2/ 相关/ 工作/ Korn/ 和/ Muthukrishnan/ [/ 3/ ]/ 提出/ 了/ RNN/ 查询/ 的/ 概念/ ,/ 即/ (/ RkNN/ ,/ k/ =/ 1/ )/ ,/ 并/ 给出/ 了/ 求解/ RNN/ 的/ 查询方法/ ./ 设计/ 了/ 一个/ 新/ 索引/ 结构/ RNN/ 树以/ 求得/ 查询/ 对象/ q/ 的/ 反/ 最近/ 邻/ ./ 为了/ 解决/ 两个/ 索引/ 结构/ 的/ 问题/ ,/ Yang/ 和/ Lin/ [/ 4/ ]/ 提出/ 了/ 将/ 这/ 两个/ 索引/ 结构/ 合并/ 在/ 同一个/ 称为/ RdNN/ 树/ 的/ 索引/ 结构/ 中/ ,/ 其叶/ 节点/ 存储/ 了/ 数据/ 点/ 的/ 邻接/ 圆/ ,/ 中间/ 节点/ 存储/ 了/ 子树/ 中/ 的/ 点/ 到/ 其/ 最近/ 邻/ 的/ 距离/ 的/ 最大值/ ./ 以上/ 方法/ 依赖于/ 预计/ 算/ ,/ 近年来/ 有/ 许多/ 学者/ 已经/ 提出/ 了/ 一些/ 解决/ 方法/ [/ 5/ -/ 7/ ]/ ,/ 均/ 使用/ 了/ 过滤/ -/ 提炼/ 的/ 模型/ 框架/ ,/ 过滤/ 阶段/ 剪枝/ 确定/ 不/ 包含/ 候选者/ 的/ 部分/ ,/ 提炼/ 阶段/ 去除/ 错误/ 项/ ./ 2.1/ 过滤/ 方法/ 2.1/ ./ 160/ 度/ 剪枝/ 法由/ Stanoi/ [/ 5/ ]/ 等/ 人/ 提出/ 的/ 60/ 度/ 剪枝/ 法/ ,/ 其/ 主要/ 思想/ 是/ :/ 将/ 围绕/ 一个/ RNN/ 查询/ 点/ q/ 的/ 空间/ 等/ 分为/ 6/ 个/ 区域/ (/ S1/ ,/ S2/ ,/ …/ ,/ S6/ )/ ,/ 然后/ 在/ 每个/ 区域/ 中/ ,/ 只有/ q/ 的/ 最/ 邻近/ 位置/ 才/ 可能/ 是/ q/ 的/ 反/ 邻近/ 位置/ ./ 由此/ ,/ q/ 的/ RNN/ 候选者/ 被/ 限制/ 在/ 6/ 个/ 区域/ 中/ q/ 的/ 最/ 邻近/ 位置/ 上/ ./ 该/ 方法/ 不/ 需要/ 特殊/ 的/ 索引/ 结构/ ,/ 避免/ 了/ 数据/ 点/ 更新/ 时/ 频繁/ 的/ 计算/ 和/ 修改/ 索引/ 结构/ ,/ 相对/ 于/ 文献/ [/ 3/ -/ 4/ ]/ 效率/ 较/ 高/ ./ 同时/ ,/ 可以/ 处理/ 移动/ 对象/ 的/ RkNN/ ,/ 也/ 可以/ 扩展/ 到/ k/ >/ 1/ 的/ 情况/ ./ 但是/ 随着/ 空间/ 维数/ 的/ 增加/ ,/ 需要/ 搜索/ 的/ 区域/ 空间/ 会成/ 指数/ 增长/ ,/ 甚至/ 在/ 3/ 维/ 情况/ 下/ ,/ 其/ 效率/ 会/ 变得/ 很/ 低/ ./ 2.1/ ./ 2TPL/ 剪枝/ 法/ Tao/ [/ 6/ ]/ 等/ 人/ 提出/ 的/ TPL/ 剪枝/ 法/ ,/ 其/ 基本/ 思想/ 如图/ 1/ 所示/ :/ 查询/ 点/ q/ 与/ P/ 中/ 任意/ 点/ p/ 做/ 垂直平分/ 线/ ,/ 分/ 空间/ 为/ q/ -/ half/ -/ plane/ 与/ p/ -/ half/ -/ plane/ (/ 也/ 称为/ q/ -/ -/ half/ -/ plane/ )/ ,/ 在/ p/ -/ half/ -/ plane/ 内/ 的/ 点/ 不/ 可能/ 是/ q/ 的/ RNN/ ./ TPL/ 过滤/ 过程/ 如下/ :/ 用/ 广度/ 优先/ 的/ 方法/ 遍历/ R/ 树/ ,/ 再/ 以/ 节点/ 到/ 查询/ 点/ q/ 的/ 距离/ 的/ 升序/ 堆中/ 检索/ 潜在/ 候选者/ ,/ 因为/ RNN/ (/ q/ )/ 很/ 可能/ 在/ q/ 的/ 附近/ ,/ 半/ 平面/ 的/ 概念/ 用来/ 剪枝/ 不/ 存在/ 候选者/ 的/ MBRs/ ./ 每次/ 被/ 剪枝/ 的/ 条目/ 被/ 加入/ 到/ 提炼/ 集/ Srfn/ 中/ ,/ 在/ 提存/ 阶段/ ,/ Srfn/ 中/ 的/ 条目/ 被/ 用来/ 排除/ 错误/ 项/ ./ TPL/ 剪枝/ 法比/ 60/ 度/ 剪枝/ 法有/ 更/ 强/ 的/ 剪枝/ 能力/ [/ 6/ ]/ ./ 同时/ ,/ TPL/ 剪枝/ 技术/ 也/ 可/ 扩展/ 到/ k/ >/ 1/ 的/ 情况/ ./ 与/ 前面/ 介绍/ 的/ 方法/ 相比/ ,/ 该/ 方法/ 效率/ 提高/ 了/ ,/ 但是/ 该/ 方法/ 只/ 适用/ 于/ 静态/ 查询/ 点/ 的/ 情况/ ./ 此外/ ,/ TPL/ 方案/ 花费/ 了/ 相当/ 多/ 的/ 时间/ 去/ 寻找/ 可/ 用于/ 剪枝/ 的/ 对象/ ./ 2.1/ ./ 3INCH/ 空间/ 缩减/ 法/ Tan/ [/ 7/ ]/ 等/ 人/ 也/ 采用/ 过滤/ -/ 提炼/ 的/ 模型/ 框架/ ,/ 在/ TPL/ 的/ 提示/ 下/ 提出/ 了/ INCH/ 空间/ 缩减/ 法/ 算法/ ,/ 它/ 的/ 基本/ 思想/ 是/ :/ 计算/ 出/ 一个/ RkNN/ 查询/ 的/ 搜索/ 范围/ (/ 从/ 查询/ 结果/ 候选者/ 中/ 确定/ )/ ,/ 这个/ 搜索/ 区域/ 约束/ 了/ 搜索/ 空间/ ,/ 并且/ 每当/ 一个/ 新/ 的/ 结果/ 候选者/ 被/ 找到/ 的/ 时候/ 这个/ 搜索/ 区域/ 都/ 会/ 被/ 缩小/ ,/ 最终/ 确定/ 出/ 候选者/ 集合/ ./ 具体/ INCH/ 缩减/ 过程/ 如下/ :/ 首先/ 找到/ 一个/ 数/ Page3/ 据集/ 的/ 子集/ S/ ,/ 每个/ 子集/ 与/ 查询/ 点/ 做/ 垂直平分/ 线/ 从而/ 将/ 空间/ 划分/ 成/ 多个/ 多边形/ ,/ 然后/ 根据/ 多边形/ 所在/ 的/ q/ -/ -/ half/ -/ planes/ 的/ 个数/ 来/ 计算/ 每个/ 多边形/ 的/ 水平/ 值/ ,/ 将/ 所有/ 多边形/ 水平/ 值/ 小于/ k/ 的/ 连接起来/ 形成/ 搜索/ 区域/ ./ INCH/ 空间/ 缩减/ 法/ 利用/ TPL/ 剪枝/ 的/ 基本原理/ ,/ 将/ 单个/ 用于/ 剪枝/ 的/ 对象/ 扩展/ 到/ 一个/ 对象/ 集/ ,/ 减小/ 了/ 搜索/ 区域/ ,/ 提高/ 了/ 查询/ 效率/ ./ 根据/ 实验/ 和/ 分析/ 的/ 结果显示/ 出/ ,/ INCH/ 空间/ 缩减/ 法比/ TPL/ 剪枝/ 法有/ 更好/ 的/ 空间/ 剪枝/ 能力/ [/ 7/ ]/ ./ 但是/ 该/ 方法/ 也/ 只/ 针对/ 单一/ 查询/ 点/ 的/ 剪枝/ 法/ ./ 2.2/ 提炼/ 方法/ 提炼/ 方法/ 包括/ 两种/ :/ (/ 1/ )/ 基础/ kNN/ 法/ ,/ 主要/ 是/ 在/ 文献/ [/ 5/ ]/ 中/ 使用/ ,/ 计算/ 每个/ 候选/ 点/ 的/ kNN/ ,/ 并/ 查看/ 结果/ 是否/ 为/ 查询/ 点/ ,/ 如果/ 有/ ,/ 则/ 该/ 候选/ 点为/ 给/ 查询/ 点/ 的/ RkNN/ 的/ 查询/ 结果/ ,/ 反之/ ,/ 则/ 不是/ ./ (/ 2/ )/ Range/ -/ k/ 验证法/ ,/ 对/ 每个/ 候选/ 点/ 进行/ 核对/ ,/ 判断/ 核对/ 的/ 候选/ 点到/ 查询/ 点/ 的/ 距离/ 比/ 到/ 其它/ 候选/ 点/ 的/ 距离/ 小/ 的/ 个数/ 是否/ 小于/ k/ ,/ 如果/ 是/ ,/ 则/ 该/ 候选/ 点为/ 该/ 查询/ 点/ 的/ RkNN/ 的/ 查询/ 结果/ ,/ 反之/ ,/ 则/ 不是/ ./ 这个/ 方法/ 被/ 提出/ 在/ 文献/ [/ 2/ ]/ 中/ ,/ 虽然/ 它/ 是/ 针对/ 解决/ 连续/ RkNN/ 查询/ 的/ ,/ 但是/ Range/ -/ k/ 验证法/ 比/ 基础/ kNN/ 方法/ 更/ 有效/ ./ 现有/ 的/ 解决/ 方法/ 均/ 是/ 针对/ 单个/ 查询/ 对象/ 的/ RkNN/ ,/ 本文/ 采用/ 过滤/ -/ 提炼/ 的/ 框架/ 模型/ 设计/ 了/ 新/ 的/ 算法/ 实现/ 了/ GRkNN/ 查询/ ./ 过滤/ 阶段/ 利用/ 了/ INCH/ 空间/ 缩减/ 法/ 的/ 基本原理/ ,/ 但/ 不同/ 的/ 是/ 将/ 查询/ 点/ 集合/ 的/ 最小/ 覆盖/ 圆/ 作为/ 整体/ 来/ 确定/ 搜索/ 区域/ ,/ 从而/ 避免/ 了/ 当/ 查询/ 点集/ 是/ 一组/ 邻近/ 的/ 数据/ 对象/ 时/ 搜索/ 区域/ 的/ 频繁/ 重叠/ 情况/ ,/ 提高/ 了/ 查询/ 效率/ ./ 提炼/ 阶段/ 则/ 采用/ Range/ 验证法/ 来/ 排除/ 错误/ 项/ ./ 3/ 问题/ 定义/ 本/ 节/ 给出/ kNN/ 、/ RkNN/ 等/ 查询/ 的/ 基本概念/ ,/ 从而/ 引出/ GRkNN/ 查询/ 的/ 定义/ ./ 给定/ 二维/ 空间数据/ 集/ P/ 和/ R/ ,/ 其中/ 包含/ 形如/ p/ (/ x/ ,/ y/ )/ 的/ 数据/ 点/ ,/ dist/ (/ p/ ,/ q/ )/ 代表/ 两个/ 点/ p/ 、/ q/ 之间/ 的/ 距离/ ./ 定义/ 1/ ./ kNN/ (/ q/ ,/ k/ ,/ P/ )/ [/ 9/ ]/ (/ k/ 最近/ 邻/ 查询/ )/ ./ 给定/ 数据/ 集/ P/ ,/ 当且/ 仅/ 当/ 一个/ 对象/ p/ ∈/ P/ 满足/ {/ o/ ∈/ P/ |/ dist/ (/ o/ ,/ q/ )/ </ dist/ (/ p/ ,/ q/ )/ }/ </ k/ 时/ ,/ p/ 是/ kNN/ (/ q/ ,/ k/ ,/ P/ )/ 的/ 一个/ 结果/ ./ kNN/ 查询/ 实际/ 就是/ 查找/ 离/ 查询/ 对象/ 最近/ 的/ k/ 个/ 对象/ ,/ 它/ 的/ 查询/ 结果/ 一定/ 是/ k/ 个/ ./ 定义/ 2/ ./ 单色/ RkNN/ (/ q/ ,/ k/ ,/ P/ )/ [/ 3/ ]/ ./ 给定/ 一/ 数据/ 集/ P/ 和/ 一个/ 查询/ 点/ q/ ,/ 若/ 对象/ p/ 的/ kNN/ 包含/ q/ ,/ 则/ 对象/ p/ 是/ RkNN/ (/ q/ )/ 的/ 查询/ 结果/ ./ 具体/ 定义/ 形式/ 为/ RkNN/ (/ q/ ,/ k/ ,/ P/ )/ =/ {/ p/ ∈/ P/ |/ q/ ∈/ kNN/ (/ p/ ,/ k/ ,/ P/ )/ }/ ./ 单色/ RkNN/ 查询/ 是/ 获得/ 给定/ 的/ 数据/ 集中/ 将/ 查询/ 点/ 作为/ k/ 最近/ 邻/ 的/ 一个/ 结果/ 的/ 点/ 的/ 集合/ ./ 查询/ 对象/ q/ 可以/ 是/ 数据/ 集/ P/ 中/ 的/ 点/ ,/ 也/ 可以/ 不是/ ./ 定义/ 3/ ./ 双色/ RkNN/ (/ q/ ,/ k/ ,/ P/ ,/ R/ )/ [/ 2/ ]/ ./ 它/ 包含/ 两种/ 数据/ 集/ P/ 和/ R/ ,/ P/ 是/ 查询/ 点/ q/ 所在/ 的/ 数据/ 集/ ,/ R/ 是/ 查询/ 结果/ 所在/ 的/ 数据/ 集/ ,/ 对于/ 每个/ r/ (/ r/ ∈/ R/ )/ 的/ kNN/ (/ r/ ,/ k/ ,/ P/ )/ 中/ ,/ 如果/ 包含/ q/ ,/ 则/ 此/ r/ 即为/ 双色/ RkNN/ (/ q/ ,/ k/ ,/ P/ ,/ R/ )/ 的/ 一个/ 结果/ ./ 具体/ 定义/ 形式/ 为/ BRkNN/ (/ q/ ,/ k/ ,/ P/ ,/ R/ )/ =/ {/ r/ ∈/ R/ |/ q/ ∈/ kNN/ (/ r/ ,/ k/ ,/ P/ )/ }/ ./ 双色/ RkNN/ 查询/ 是/ 获得/ 查询/ 数据/ 集中/ 将/ 查询/ 点/ 作为/ k/ 最近/ 邻/ 的/ 结果/ 集中/ 点/ 的/ 集合/ ./ 定义/ 4/ ./ Range/ -/ k/ (/ p/ ,/ k/ ,/ r/ )/ [/ 2/ ]/ ./ 判断/ p/ 点/ 周围/ 的/ 点/ 到/ p/ 的/ 距离/ 小于/ r/ 的/ 点/ 的/ 个数/ 是否/ 小于/ k/ ,/ 如果/ {/ o/ |/ dist/ (/ p/ ,/ o/ )/ </ r/ }/ </ k/ 成立/ ,/ 则/ 返回/ true/ ,/ 否则/ 返回/ false/ ./ 本文/ 在/ 过滤/ 阶段/ 使用/ Range/ -/ k/ 验证法/ 来/ 排除/ 错误/ 项/ ./ 定义/ 5/ ./ GRkNN/ (/ GroupRkNN/ )/ ./ 给定/ 一组/ 查询/ 点集/ Q/ =/ {/ q1/ ,/ q2/ ,/ …/ ,/ qn/ }/ 和/ 一个/ 数据/ 集/ P/ ,/ 当/ 一个/ 对象/ p/ ∈/ P/ 在/ P/ 上/ 的/ kNN/ 的/ 结果/ 包括/ Q/ 中/ 的/ 任意/ 一个/ 时/ ,/ p/ 就是/ GRkNN/ (/ Q/ ,/ k/ )/ 的/ 一个/ 结果/ ,/ 具体/ 定义/ 形式/ 为/ GRkNN/ (/ Q/ ,/ k/ )/ =/ {/ / q/ ∈/ Q/ ,/ / p/ ∈/ P/ |/ q/ ∈/ kNN/ (/ p/ ,/ k/ ,/ P/ )/ }/ ./ 对于/ GRkNN/ 的/ 查询/ ,/ 不论/ 在/ 单色/ 或是/ 双色/ 的/ 情况/ 下/ ,/ 结果/ 就是/ 查询/ 点/ 集中/ 每个/ 查询/ 点/ 的/ RkNN/ 或/ BRkNN/ 结果/ 的/ 并/ 集/ ./ 查询/ 点集/ Q/ 中/ 的/ 查询/ 点/ 可以/ 是/ 数据/ 集/ P/ 中/ 的/ 点/ ,/ 也/ 可以/ 不是/ ./ 4GR/ 犽/ NN/ 查询/ 算法/ 本文/ 采用/ R/ 树/ 作为/ 索引/ 结构/ ,/ 受/ TPL/ 空间/ 剪枝/ 法/ 以及/ INCH/ 空间/ 缩减/ 法/ 的/ 启发/ ,/ 本文/ GRkNN/ 查询/ 采用/ 过滤/ -/ 提炼/ 的/ 框架/ 模型/ ,/ 过滤/ 阶段/ 以/ 查询/ 点/ 集合/ 的/ 最小/ 覆盖/ 圆为/ 整体/ 确定/ 最小/ 覆盖/ 圆/ 的/ RRkNN/ 的/ 搜索/ 区域/ 从而/ 得到/ GRkNN/ 的/ 候选/ 集合/ ,/ 提炼/ 阶段/ 采用/ Range/ -/ k/ 验证法/ 排除/ 错误/ 项/ ,/ 从而/ 得到/ 最终/ 结果/ 集/ ./ 4.1/ 最小/ 覆盖/ 圆给/ 定点/ 集/ 的/ 最小/ 覆盖/ 圆/ ,/ 即/ 包含/ 给/ 定点/ 集且/ 半径/ 最小/ 的/ 圆/ ,/ 如图/ 2/ 所示/ ,/ 圆/ O/ 就是/ 点集/ {/ q1/ ,/ q2/ ,/ q3/ ,/ q4/ }/ 的/ 最小/ 覆盖/ 圆/ ./ 本文/ 采用/ 汪卫/ 和/ 王文平/ 在/ 文献/ [/ 10/ ]/ 中/ 所/ 提出/ 的/ 计算/ 给/ 定点/ 集/ 的/ 最小/ 覆盖/ 圆/ 的/ 方法/ Page4/ 来/ 计算/ 查询/ 点集/ 的/ 最小/ 覆盖/ 圆/ ./ 下面/ 我们/ 给出/ 圆/ 的/ 一些/ 相关/ 定义/ 、/ 定理/ 及其/ 证明/ ,/ 从而/ 作为/ 以/ 查询/ 点/ 集合/ 的/ 最小/ 覆盖/ 圆为/ 整体/ 来/ 进行/ 过滤/ 剪枝/ 的/ 理论依据/ ./ 定义/ 6/ ./ 点/ 与/ 圆/ 的/ 垂直平分/ 线/ ./ 某点/ p/ 与/ 一个/ 以点/ c/ 为/ 中心/ r/ 为/ 半径/ 的/ 圆/ O/ 的/ 垂直平分/ 线/ ,/ 就是/ 直线/ l/ (/ p/ ,/ c/ )/ 与/ 圆/ 的/ 交点/ m/ 与/ p/ 的/ 垂直平分/ 线/ ,/ 用/ ⊥/ (/ p/ ,/ O/ )/ 表示/ ./ l/ (/ p/ ,/ c/ )/ 表示/ p/ 与/ c/ 两点/ 形成/ 的/ 直线/ ./ 如图/ 2/ 所示/ ,/ 圆/ O/ 与/ p/ 的/ 垂直平分/ 线/ 就是/ ⊥/ (/ p/ ,/ O/ )/ ./ 一个点/ p/ 与/ 一个/ 以点/ c/ 为/ 中心/ r/ 为/ 半径/ 的/ 圆/ O/ 间/ 做/ 垂直平分/ 线/ 将/ 空间/ 分成/ 两/ 部分/ ,/ 包含/ 点/ p/ 的/ 半/ 平面/ 叫作/ 点/ p/ -/ half/ -/ plane/ (/ 也/ 统称/ 为/ 珚/ O/ -/ half/ -/ plane/ )/ ,/ 包含/ 圆/ O/ 的/ 半/ 平面/ 叫作/ 圆/ O/ -/ half/ -/ plane/ ./ 定义/ 7/ ./ 点到/ 圆/ 的/ 距离/ ./ 某点/ p/ 到/ 一个/ 以点/ c/ 为/ 中心/ r/ 为/ 半径/ 的/ 圆/ O/ 的/ 距离/ 记为/ d/ (/ p/ ,/ O/ )/ ,/ 当/ dist/ (/ p/ ,/ c/ )/ >/ r/ 时/ ,/ d/ (/ p/ ,/ O/ )/ =/ dist/ (/ p/ ,/ c/ )/ -/ r/ ;/ 当/ dist/ (/ p/ ,/ c/ )/ / r/ 时/ ,/ d/ (/ p/ ,/ O/ )/ =/ 0/ ./ 如图/ 2/ 所示/ ,/ 以点/ c/ 为/ 中心/ r/ 为/ 半径/ 的/ 圆/ O/ 外有/ 一点/ x/ ,/ 点/ x/ 到/ 圆/ O/ 的/ 距离/ d/ (/ x/ ,/ O/ )/ =/ dist/ (/ x/ ,/ n/ )/ ,/ n/ 是/ 直线/ l/ (/ x/ ,/ c/ )/ 与/ 圆/ O/ 的/ 交点/ ./ 定理/ 1/ ./ 给/ 定点/ p/ 和/ 以点/ c/ 为/ 中心/ r/ 为/ 半径/ 的/ 圆/ O/ ,/ 在/ p/ -/ half/ -/ plane/ 内/ 的/ 点/ (/ 不/ 包括/ p/ )/ 不/ 可能/ 是/ 圆/ O/ 内/ 任意/ 点/ 的/ R1NN/ ./ 证明/ ./ 本文/ 通过/ 反证法/ 来/ 证明/ 定理/ 1/ ./ 如图/ 2/ 所示/ ,/ 圆/ O/ 与/ 点/ p/ 做/ 垂直平分/ 线/ ,/ 根据/ 定义/ 2/ ,/ 实际上/ 是/ 直线/ l/ (/ p/ ,/ c/ )/ 与/ 圆/ 的/ 交点/ m/ 与/ p/ 的/ 垂直平分/ 线/ ,/ 假设/ O/ -/ half/ -/ plane/ 内/ 存在/ 一点/ x/ 使得/ dist/ (/ x/ ,/ p/ )/ </ d/ (/ x/ ,/ O/ )/ ,/ 其中/ x/ 存在/ 两种/ 情况/ ,/ 一是/ x/ 在/ 圆/ O/ 内/ 或/ 边界/ 上时/ ,/ d/ (/ x/ ,/ O/ )/ =/ 0/ ,/ 可/ 推出/ dist/ (/ x/ ,/ p/ )/ </ 0/ ,/ 这/ 与/ 事实/ dist/ (/ x/ ,/ p/ )/ / 0/ 相/ 矛盾/ ,/ 因此/ 假设/ 不/ 成立/ ;/ 另/ 一种/ 情况/ 是/ x/ 在/ 圆/ O/ 外时/ ,/ 圆心/ c/ 、/ 点/ m/ 和/ 点/ x/ 形成/ 一个/ 三角形/ ,/ 而/ dist/ (/ c/ ,/ x/ )/ =/ dist/ (/ n/ ,/ x/ )/ +/ dist/ (/ n/ ,/ c/ )/ =/ d/ (/ O/ ,/ x/ )/ +/ r/ ,/ dist/ (/ c/ ,/ m/ )/ =/ r/ ,/ 其中/ d/ (/ O/ ,/ x/ )/ >/ 0/ ,/ 根据/ 两边/ 之差/ 大于/ 第三/ 边/ 的/ 几何/ 原理/ ,/ 则/ 有/ dist/ (/ c/ ,/ x/ )/ -/ dist/ (/ c/ ,/ m/ )/ =/ d/ (/ O/ ,/ x/ )/ </ dist/ (/ x/ ,/ m/ )/ ,/ 而/ 根据/ 假设/ dist/ (/ x/ ,/ p/ )/ </ d/ (/ x/ ,/ O/ )/ ,/ 则/ 有/ dist/ (/ x/ ,/ p/ )/ </ dist/ (/ x/ ,/ m/ )/ ,/ 由于/ 假设/ 与/ 事实/ dist/ (/ x/ ,/ p/ )/ >/ dist/ (/ x/ ,/ m/ )/ 相/ 矛盾/ ,/ 假设/ 不/ 成立/ ./ 即得证/ ./ 根据/ 定理/ 1/ 可知/ ,/ 在/ p/ -/ half/ -/ plane/ 内/ 的/ 点/ 不/ 包括/ p/ ,/ 不/ 可能/ 是/ 圆/ O/ 的/ R1NN/ 的/ 结果/ ,/ 因为/ 相对/ 于/ 圆/ O/ 来说/ p/ -/ half/ -/ plane/ 内/ 的/ 点/ 离/ p/ 更近/ ./ 4.2/ 过滤/ 过程/ GRkNN/ 查询/ 采用/ 过滤/ -/ 提炼/ 框架/ 模型/ ,/ 过滤/ 阶段/ 需要/ 快速/ 剪枝/ 一些/ 对象/ 而/ 得到/ 一组/ 候选/ 集合/ ./ 如果/ 将/ 所有/ 查询/ 点/ 分开/ 考虑/ 会/ 将/ 问题/ 复杂化/ ,/ 因此/ 将/ 所有/ 查询/ 点/ 的/ 最小/ 覆盖/ 圆/ 作为/ 整体/ 考虑/ ,/ 然后/ 进行/ 剪枝/ ./ 首先/ 计算/ GRkNN/ 查询/ 点集/ Q/ 的/ 最小/ 覆盖/ 圆/ O/ ,/ 将/ 圆/ O/ 作为/ 一个/ 整体/ ,/ 利用/ 给定/ 的/ 空间数据/ 集/ 子集/ S/ / P/ ,/ 做/ S/ 中/ 每个/ 点/ 与/ 圆/ O/ 的/ 垂直平分/ 线/ ,/ 将/ 空间/ 分割/ 成/ 多个/ 多边形/ ,/ 如图/ 3/ (/ a/ )/ 所示/ ,/ 其中/ S/ =/ {/ p1/ ,/ p2/ ,/ p3/ ,/ p4/ ,/ p5/ }/ ./ 然后/ 再/ 计算/ 每个/ 多边形/ level/ 值/ ,/ 多边形/ 的/ level/ 值/ 就是/ 该/ 多边形/ 所在/ 的/ 珚/ O/ -/ half/ -/ planes/ 个数/ ,/ 如图/ 3/ (/ b/ )/ 所示/ ,/ 如果/ 多边形/ 的/ level/ 值/ 小于/ k/ (/ GRkNN/ 查询/ 的/ k/ 值/ )/ 就/ 说明/ 该/ 多边形/ 至多/ 在/ k/ -/ 1/ 个/ 珚/ O/ -/ half/ -/ planes/ 内/ ,/ 而/ 这样/ 的/ 多边形/ 就/ 有/ 可能/ 包含/ 该圆内/ 所有/ 点/ 的/ RkNN/ 结果/ ,/ 将/ 这样/ 的/ 多边形/ 放在/ 一起/ 就/ 形成/ 了/ 圆/ O/ 内/ 所有/ 点/ 的/ RkNN/ 的/ 候选/ 区域/ ,/ 如图/ 3/ (/ c/ )/ 所示/ 的/ 粗/ 黑色/ 边框/ 区域/ ./ 由于/ 候选/ 区域/ 包含/ 的/ 是/ 圆/ O/ 内/ 所有/ 点/ 的/ RkNN/ 结果/ ,/ 而/ GRkNN/ 查询/ 的/ 查询/ 点集/ Q/ 都/ 在/ 圆/ O/ 内/ 或/ 圆/ O/ 上/ ,/ 因此/ 该/ 区域/ 也/ 是/ 查询/ 点集/ Q/ 的/ GRkNN/ 的/ 结果/ 候选/ 区域/ ,/ 而/ 这/ 也/ 解释/ 了/ 为什么/ 将/ 查询/ 点/ 集合/ 的/ 最小/ 覆盖/ 圆而/ 不是/ 任意/ 一个/ 包含/ 所有/ 查询/ 的/ 圆/ 作为/ 一个/ 整体/ 来/ 考虑/ 解/ Page5/ 决/ GRkNN/ 查询/ 问题/ 的/ 原因/ ,/ 由于/ 包含/ 所有/ 查询/ 点/ 的/ 圆越/ 大/ ,/ 计算/ 所得/ 的/ 搜索/ 区域/ 就/ 可能/ 越大/ ,/ 候选/ 集合/ 就/ 越/ 大/ ./ 由于/ 由/ 多个/ 多边形/ 组成/ 的/ 候选/ 区域/ 不利于/ 存储/ 利用/ ,/ 因此/ 形成/ 如图/ 3/ (/ d/ )/ 所示/ 红色/ 边框/ 的/ 凸外/ 包/ 多边形/ ,/ 这个/ 凸外/ 包/ 多边形/ 就是/ GRkNN/ 的/ 搜索/ 区域/ ./ 在/ 搜索/ 区域/ 内/ 的/ 所有/ 数据/ 对象/ 和/ S/ 都/ 是/ 查询/ 的/ 候选者/ ./ 4.3/ CINCH/ :/ 以圆为/ 整体/ 计算/ GR/ 犽/ NN/ 的/ 搜索/ 区域/ 本文/ 基于/ 过滤/ -/ 提炼/ 框架/ 模型/ 实现/ GRkNN/ 查询/ ./ 过滤/ 阶段/ 确定/ 的/ 搜索/ 区域/ ,/ 实际上/ 是/ 最小/ 覆盖/ 圆内/ 所有/ 点/ 的/ RkNN/ 查询/ 的/ 搜索/ 区域/ ,/ 由于/ GRkNN/ 的/ 查询/ 点集/ 包含/ 在/ 圆内/ ,/ 因此/ 该/ 搜索/ 区域/ 内/ 的/ 数据/ 点/ 也/ 是/ GRkNN/ 查询/ 的/ 候选者/ ,/ 所以/ 该/ 搜索/ 区域/ 也/ 是/ GRkNN/ 查询/ 的/ 搜索/ 区域/ ./ 最后/ 再/ 在/ 提炼/ 阶段/ 将/ 非/ GRkNN/ 查询/ 结果/ 的/ 错误/ 项/ 排除/ ./ 本文/ 提出/ 的/ CINCH/ (/ CircleINtersections/ ’/ ConvexHull/ )/ 算法/ 就是/ 将/ 所有/ 查询/ 点/ 的/ 最小/ 覆盖/ 圆/ 作为/ 整体/ 来/ 计算/ GRkNN/ 的/ 搜索/ 区域/ 的/ 算法/ ./ CINCH/ 算法/ 的/ 基本/ 思想/ 是/ :/ 给定/ 一个/ 对象/ 集/ S/ / P/ ,/ P/ 是/ 整个/ 数据/ 集/ ,/ 对于/ S/ 中/ 所有/ 对象/ 分别/ 做/ 它们/ 与/ 该/ GRkNN/ 最小/ 覆盖/ 圆/ O/ 的/ 垂直平分/ 线/ ,/ 从而/ 将/ 空间/ 分为/ 多个/ 多边形/ ,/ 计算/ 每个/ 多边形/ 所在/ 的/ 珚/ O/ -/ half/ -/ planes/ 个数/ ,/ 数值/ 小于/ k/ 的/ 多边形/ 组成/ 的/ 外包/ 凸多边形/ 即/ 为/ 该/ GRkNN/ 的/ 搜索/ 区域/ ./ 搜索/ 区域/ 内/ 的/ 对象/ 和/ S/ 的/ 并/ 集/ 就是/ GRkNN/ 的/ 候选/ 集/ ./ CINCH/ 算法/ 的/ 伪/ 代码/ 如/ 算法/ 1/ 所示/ ./ 算法/ 1/ ./ CINCH/ (/ O/ ,/ k/ ,/ S/ )/ ./ 输入/ :/ 整个/ 数据/ 集合/ P/ 的/ 子集/ S/ ,/ S/ / P/ 输出/ :/ 以/ 凸多边形/ 的/ 形式/ 返回/ 查询/ 的/ 搜索/ 区域/ 1/ ./ 计算/ S/ 中/ 每个/ 对象/ 与/ O/ 的/ 垂直平分/ 线/ ;/ 2/ ./ 计算/ 交点/ ;/ 3/ ./ 计算/ 每个/ 交点/ 的/ level/ 值/ ;/ 4/ ./ 把/ level/ 值/ 小于/ k/ 的/ 交点/ 放入/ 集合/ I/ 中/ ;/ 5/ ./ 计算/ 返回/ I/ 内/ 所有/ 点/ 形成/ 的/ 凸外/ 包/ 多边形/ 区域/ ./ 第/ 1/ 步/ ./ 分别/ 做/ S/ 中/ 所有/ 点/ 与/ O/ 的/ 垂直平分/ 线/ ,/ 将/ 整个/ 空间/ 分为/ 多个/ 多边形/ ,/ 如图/ 3/ (/ a/ )/ 所示/ ./ 第/ 2/ 步/ ./ 计算/ 垂直平分/ 线间/ 的/ 交点/ 和/ 垂直平分/ 线/ 与/ 空间/ 边界/ 的/ 交点/ 以及/ 空间/ 边界/ 间/ 的/ 交点/ ,/ 如图/ 3/ (/ b/ )/ 所示/ 交点/ {/ a/ ,/ b/ ,/ d/ ,/ …/ ,/ n/ ,/ r/ ,/ …/ ,/ x/ }/ ./ 第/ 3/ 步/ ./ 计算/ 每个/ 交点/ 的/ level/ 值/ ,/ 某/ 交点/ 的/ level/ 值/ 等于/ 该点/ 所在/ 的/ 珚/ O/ -/ half/ -/ planes/ 的/ 个数/ ,/ 不/ 包括/ 形成/ 这个/ 点/ 的/ 垂直平分/ 线/ 相应/ 的/ 珚/ O/ -/ half/ -/ planes/ ./ 例如/ ,/ 在/ 图/ 3/ (/ b/ )/ 中/ ,/ level/ (/ v/ )/ =/ 0/ ;/ level/ (/ d/ )/ =/ 1/ ./ 第/ 4/ 步/ ./ 把/ level/ 值/ 小于/ k/ 的/ 交点/ 放入/ 集合/ I/ 中/ ./ 第/ 5/ 步/ ./ 利用/ 集合/ I/ 内/ 的/ 点/ 形成/ 的/ 多边形/ 就是/ 候选/ 区域/ ,/ 如图/ 3/ (/ c/ )/ 所示/ 的/ {/ d/ ,/ e/ ,/ x/ ,/ g/ ,/ h/ ,/ w/ ,/ j/ ,/ k/ ,/ v/ ,/ u/ ,/ t/ ,/ s/ ,/ y/ }/ 区域/ ,/ 但/ 由于/ 候选/ 区域/ 是/ 由/ 多个/ 多边形/ 组成/ ,/ 在/ 计算/ 候选/ 时/ 不/ 便于/ 存储/ 利用/ ,/ 因此/ 形成/ 如图/ 3/ (/ d/ )/ 所示/ 的/ 粗/ 边框/ {/ d/ ,/ e/ ,/ g/ ,/ h/ ,/ j/ ,/ k/ ,/ u/ ,/ s/ }/ 凸外/ 包/ 多边形/ ,/ 这个/ 凸外/ 包/ 多边形/ 就是/ 搜索/ 区域/ ./ 如果/ S/ 中/ 对象/ 的/ 个数/ 小于/ k/ ,/ 则/ 搜索/ 区域/ 就是/ 整个/ 空间/ ./ 定理/ 2/ ./ CINCH/ 算法/ 的/ 复杂度/ 是/ O/ (/ m2log/ (/ m/ )/ )/ ,/ 其中/ m/ 是/ S/ 中/ 对象/ 的/ 个数/ ./ 证明/ ./ 第/ 1/ 步/ 计算/ 垂直平分/ 线/ 的/ 代价/ 是/ O/ (/ m/ )/ ./ 第/ 2/ 步/ 计算/ 交点/ 的/ 代价/ 是/ O/ (/ m2/ )/ ./ 第/ 3/ 步/ 计算/ 交点/ 的/ level/ 值/ 是/ O/ (/ m2/ )/ ,/ 因为/ S/ 中/ 的/ 对象/ 是/ 逐个/ 加入/ 的/ ,/ 对于/ 计算/ 交点/ level/ 值/ 是/ 随/ 交点/ 增加/ 而/ 计算/ 和/ 更新/ 的/ ./ 第/ 4/ 步/ 集合/ I/ 的/ 代价/ 大小/ 至少/ 是/ O/ (/ m2/ )/ ./ 计算/ 凸多边形/ 的/ 复杂度/ 是/ O/ (/ nlog/ (/ n/ )/ )/ ,/ n/ 是/ 形成/ 凸多边形/ 点/ 的/ 个数/ ;/ 因此/ 第/ 5/ 步/ 的/ 代价/ 至少/ 是/ O/ (/ m2log/ (/ m/ )/ )/ ./ 定理/ 3/ ./ CINCH/ 算法/ 不会/ 误拒/ 结果/ 对象/ ./ 证明/ ./ 只/ 需/ 证明/ CINCH/ 算法/ 所/ 确定/ 的/ 搜索/ 区域/ 之外/ 不/ 包含/ 任何/ 结果/ ./ 根据/ 文献/ [/ 7/ ]/ 提出/ 的/ 定理/ 2/ ,/ 给定/ 一个/ 数据/ 集/ P/ 、/ 一个/ RkNN/ 查询/ RkNN/ (/ q/ ,/ k/ )/ 及/ 一个/ 数据/ 对象/ 子集/ S/ / P/ ,/ 设/ C/ 为/ 由/ 算法/ INCH/ (/ q/ ,/ k/ ,/ S/ )/ 所/ 计算/ 形成/ 的/ 搜索/ 区域/ ,/ 对于/ 在/ P/ -/ S/ 内/ 的/ 任意/ 点/ p/ ,/ 当且/ 仅/ 当/ p/ 在/ C/ 内/ 或/ 边界/ 上时/ ,/ 有/ level/ (/ p/ )/ </ k/ ./ 本文/ 提出/ 的/ 定理/ 1/ 说明/ CINCH/ 算法/ 与/ 文献/ [/ 7/ ]/ 提出/ INCH/ 算法/ 依据/ 的/ 原理/ 相同/ ,/ 由此/ 该/ 定理/ 也/ 适用/ 于/ CINCH/ 算法/ ./ 既当/ C/ 为/ 算法/ CINCH/ (/ O/ ,/ k/ ,/ S/ )/ 计算/ 形成/ 的/ 搜索/ 区域/ 时/ ,/ 该/ 定理/ 同样/ 成立/ ./ 根据/ 文献/ [/ 7/ ]/ 提出/ 的/ 定理/ 2/ ,/ 对于/ 在/ P/ -/ S/ 内/ 的/ 任意/ 点/ ,/ 当/ p/ 在/ C/ 外时/ p/ 的/ level/ 值/ 一定/ 不/ 小于/ k/ ,/ 即/ p/ 所在/ 的/ 珚/ O/ -/ half/ -/ planes/ 的/ 个数/ 大于/ 等于/ k/ ,/ p/ 就/ 不/ 可能/ 是/ 圆/ O/ 内任/ 一点/ 的/ RkNN/ 结果/ ;/ 换句话说/ ,/ 在/ 搜索/ 区域/ C/ 外/ 一定/ 不/ 包含/ 结果/ 对象/ ./ 因此/ 该/ 定理/ 也/ 证明/ 了/ CINCH/ 算法/ 的/ 正确性/ ,/ 这里/ 不再/ 赘述/ ./ 4.4/ 过滤/ 算法/ 过滤/ 阶段/ ,/ 根据/ 给定/ 的/ GRkNN/ (/ Q/ ,/ k/ )/ 和/ 一组/ 数据/ 对象/ S/ / P/ ,/ 首先/ 计算/ 查询/ 集/ Q/ 的/ 最小/ 覆盖/ 圆/ O/ ,/ 然后/ 利用/ CINCH/ 算法/ 计算/ 查询/ 的/ 搜索/ 区域/ SR/ ./ 基于/ S/ 和/ SR/ ,/ 查询/ 候选/ 集合/ 就是/ S/ ∪/ S/ ,/ 其中/ S/ 是/ SR/ ∩/ (/ P/ -/ S/ )/ ./ S/ 的/ 选择/ 能/ 影响/ 查询/ 候选/ 集/ 的/ 大小/ ,/ 还/ 能/ 影响/ 接下来/ 从/ S/ ∪/ S/ 中/ 排除/ 错误/ 候选者/ 的/ 提炼/ 阶段/ 的/ 效率/ ./ 而/ 对于/ 利用/ CINCH/ 算法/ 计算/ 而/ 得/ 的/ 搜索/ 区域/ Page6/ 有/ 以下/ 性质/ :/ (/ 1/ )/ 随着/ S/ 中/ 对象/ 的/ 增加/ ,/ 搜索/ 区域/ 会/ 越来越/ 缩减/ ./ (/ 2/ )/ 将/ 距离/ 圆/ O/ 更近/ 的/ 对象/ 加入/ 到/ S/ 中/ ,/ 搜索/ 区域/ 会/ 更/ 小/ ./ 根据/ 以上/ 两个/ 性质/ 采用/ 迭代/ 的/ 方法/ ,/ 首先/ 令/ S/ 为空/ ,/ 然后/ 初步/ 依次/ 增加/ 圆/ O/ 外/ 距离/ 圆/ O/ 最近/ 的/ 数据/ 对象/ 到/ S/ 中/ ,/ 从而/ 缩减/ 搜索/ 空间/ ./ 我们/ 利用/ R/ 树/ 实现/ 过滤/ 算法/ ,/ 对于/ 扩展/ S/ 的/ 方法/ 是/ 给/ 圆/ O/ 更近/ 的/ 点/ 更/ 高/ 的/ 权限/ 来/ 加入/ S/ ./ 使用/ R/ 树/ 作为/ 数据/ 的/ 索引/ 结构/ ,/ 广度/ 优先/ 遍历/ R/ 树/ ,/ 数据/ 以/ 升序/ 排列/ ,/ 在/ 圆/ O/ 外/ 的/ 数据/ 对象/ 依次/ 加入/ S/ 中/ ,/ 这个/ 具体/ 的/ 以/ R/ 树/ 作为/ 索引/ 结构/ 的/ Filter/ 算法/ 的/ 伪/ 代码/ 如/ 算法/ 2/ 所示/ ./ 算法/ 2/ ./ FCINCH/ -/ Filter/ (/ O/ ,/ k/ )/ ./ 输入/ :/ 包含/ 查询/ 点集/ 的/ 最小/ 覆盖/ 圆/ O/ 输出/ :/ 包含/ 查询/ 结果/ 的/ 候选/ 集合/ 1/ ./ S/ ·/ ·/ =/ / ;/ Scnd/ ·/ ·/ =/ / ;/ SR/ ·/ ·/ =/ 整个/ 数据/ 空间/ ;/ 2/ ./ H/ 为/ (/ e/ ,/ key/ )/ 的/ 最小/ 堆/ ;/ 3/ ./ 插入/ (/ R/ 树根/ 节点/ ,/ 0/ )/ 到/ H/ 中/ ;/ 4/ ./ while/ (/ H/ 不为/ 空/ )/ {/ 5/ ./ 从/ H/ 中/ 提取/ 出/ 一个/ (/ p/ ,/ key/ )/ ;/ 6/ ./ if/ (/ p/ ./ MBR/ 与/ SR/ 相交/ )/ then7/ ./ if/ (/ p/ 是/ 一个/ 索引/ 节点/ )/ then8/ ./ for/ (/ p/ 中/ 每个/ 子/ 节点/ m/ )/ 9/ ./ if/ (/ m/ ./ MBR/ 与/ SR/ 相交/ )/ then10/ ./ 插入/ (/ m/ ,/ min/ -/ dist/ (/ m/ ,/ c/ )/ )/ 到/ H/ 中/ ;/ 11/ ./ elseif/ (/ p/ 是/ 叶子/ 节点/ )/ then12/ ./ for/ (/ p/ 中/ 每/ 一/ 数据/ 对象/ n/ )/ 13/ ./ if/ (/ n/ 与/ SR/ 相交/ )/ then14/ ./ 插入/ (/ n/ ,/ dist/ (/ n/ ,/ c/ )/ )/ 到/ H/ 中/ ;/ 15/ ./ else/ {/ Scnd/ ·/ ·/ =/ Scnd/ ∪/ {/ p/ }/ ;/ 16/ ./ if/ (/ key/ >/ 0/ )/ then/ {/ 17/ ./ S/ ·/ ·/ =/ S/ ∪/ {/ p/ }/ ;/ 18/ ./ SR/ ·/ ·/ =/ CINCH/ (/ O/ ,/ k/ ,/ S/ )/ ;/ }/ // // endif/ }/ }/ 19/ ./ returnScnd/ ,/ S/ ./ 算法/ FCINCH/ -/ Filter/ 为了/ 广度/ 优先/ 遍历/ R/ 树/ ,/ 设置/ 了/ 一个/ 形为/ (/ p/ ,/ key/ )/ 的/ 最小/ 堆/ H/ ,/ 其中/ p/ 既有/ 可能/ 是/ R/ 树/ 的/ 一个/ 索引/ 节点/ ,/ 也/ 可能/ 是/ R/ 树/ 的/ 叶子/ 节点/ ,/ 或是/ 一个/ 数据/ 对象/ ;/ key/ 则/ 是/ p/ 与/ 圆/ O/ 的/ 圆心/ c/ 的/ 最小/ 距离/ ,/ r/ 是/ 圆/ O/ 的/ 半径/ ./ S/ 初始化/ 为空/ ,/ 用来/ 存放/ 形成/ 搜索/ 区域/ SR/ 所用/ 到/ 的/ 数据/ 集/ ,/ Scnd/ 初始化/ 为空/ ,/ 用来/ 存放/ 候选者/ 的/ 集合/ (/ 第/ 1/ 步/ )/ ./ 将/ R/ 树根/ 节点/ 插入/ H/ 中/ 对/ H/ 进行/ 初始化/ (/ 第/ 2/ 步/ )/ ,/ 遍历/ R/ 树/ 的/ 过程/ 中/ ,/ 通常/ 从/ H/ 中/ 选择/ 离/ 圆心/ c/ 最近/ 的/ 对象/ 或是/ 项目/ (/ 第/ 5/ 步/ )/ ,/ 每当/ 从/ H/ 中/ 选择/ 出/ 的/ 一个/ 数据/ 对象/ p/ 时/ 就/ 将/ p/ 加入/ 到/ Scnd/ 中/ (/ 第/ 15/ 步/ )/ ,/ 如果/ p/ 对应/ 的/ key/ 值/ 大于/ 0/ (/ 即/ p/ 点/ 在/ 圆/ O/ 外/ )/ ,/ 则/ 将/ p/ 加入/ 到/ S/ 中/ (/ 第/ 17/ 步/ )/ ,/ 因为/ 圆/ O/ 内/ 所有/ 数据/ 对象/ 都/ 是/ 一个/ 整体/ ,/ 找圆/ O/ 外/ 的/ 数据/ 对象/ 加入/ S/ 中才/ 有/ 意义/ (/ key/ =/ 0/ 表示/ 在/ 圆内/ 或/ 在/ 圆上/ )/ ,/ 同时/ CINCH/ 算法/ 将/ 搜索/ 区域/ 缩减/ (/ 第/ 18/ 步/ )/ ./ 也就是说/ 候选者/ 集合/ Scnd/ 是/ S/ 和/ 圆/ O/ 内/ 所有/ 数据/ 点/ 的/ 集合/ ./ 由于/ 搜索/ 空间/ 是/ 随着/ 数据/ 对象/ 不断/ 地/ 加入/ 到/ S/ 中/ 而/ 迭代/ 缩减/ 的/ ,/ 由此/ CINCH/ 算法/ 中/ 每当/ 有/ 新/ 的/ 数据/ 对象/ 加入/ 到/ S/ 中时/ ,/ 就/ 需要/ 更新/ 维护/ 搜索/ 区域/ 和/ 相关/ 信息/ (/ 例如/ ,/ 垂直平分/ 线/ 、/ 交点/ 和/ 它们/ 的/ level/ 值/ )/ ,/ 并且/ 优化/ 计算/ 量/ ,/ 也/ 就是/ 将/ 第/ 17/ 步/ 进行/ 优化/ ./ 4.5/ 提炼/ 阶段/ 提炼/ 阶段/ ,/ 排除/ 在/ 过滤/ 阶段/ 得到/ 的/ GRkNN/ 的/ 结果/ 候选/ 集/ Scnd/ 的/ 错误/ 项/ ,/ 提炼/ 算法/ 伪/ 代码/ 如/ 算法/ 3/ 所示/ ./ 算法/ 3/ ./ FCINCH/ -/ Refine/ (/ Q/ ,/ O/ ,/ k/ ,/ S/ ,/ Scnd/ )/ ./ 输入/ :/ 查询/ 点集/ Q/ 输出/ :/ GRkNN/ 结果/ 集/ 1/ ./ SR/ ·/ ·/ =/ CINCH/ (/ O/ ,/ k/ +/ 1/ ,/ S/ )/ ;/ 2/ ./ for/ (/ Scnd/ 中/ 每个/ 数据/ 对象/ p/ )/ 3/ ./ if/ (/ p/ 不/ 在/ SR/ 内/ )/ then4/ ./ Scnd/ ·/ ·/ =/ Scnd/ -/ {/ P/ }/ ;/ 5/ ./ for/ (/ Scnd/ 中/ 每个/ 数据/ 对象/ p/ )/ {/ 6/ ./ if/ (/ p/ ∈/ Q/ )/ then7/ ./ r/ ·/ ·/ =/ min/ {/ dist/ (/ p/ ,/ {/ Q/ -/ p/ }/ )/ }/ ;/ 8/ ./ else9/ ./ r/ ·/ ·/ =/ min/ {/ dist/ (/ p/ ,/ {/ Q/ }/ )/ }/ ;/ 10/ ./ if/ (/ Range/ -/ k/ (/ p/ ,/ k/ ,/ r/ }/ )/ returnfalse/ )/ then11/ ./ Scnd/ ·/ ·/ =/ Scnd/ -/ {/ P/ }/ }/ ;/ // // endfor12/ ./ returnScnd/ ./ 候选者/ 提炼/ 分为/ 两个/ 阶段/ :/ 第/ 1/ 个/ 阶段/ 是/ (/ 第/ 1/ ~/ 4/ 步/ )/ ,/ 用/ 算法/ CINCH/ (/ O/ ,/ k/ +/ 1/ ,/ S/ )/ 计算/ 新/ 的/ 区域/ 来/ 排除/ 错误/ 项/ ./ 当/ 一点/ p/ 被/ 选择/ 加入/ 到/ S/ 中/ ,/ Snew/ 是/ p/ 加入/ 到/ S/ 后/ S/ 的/ 数据/ 集/ ,/ Sold/ 是/ p/ 没/ 加入/ S/ 之前/ S/ 的/ 数据/ 集/ ,/ 它们/ 的/ 关系式/ Snew/ -/ Sold/ =/ {/ p/ }/ ,/ p/ 在/ 以/ Sold/ 为/ 参数/ 计算/ 而来/ 的/ 搜索/ 区域/ 中/ ,/ 也就是说/ p/ 是/ 在/ 至少/ k/ -/ 1/ 个/ 珚/ O/ -/ half/ -/ planes/ 内/ ,/ 随着/ 不断/ 地有/ 新/ 的/ 数据/ 对象/ 加入/ 到/ S/ 而/ 最终/ 变成/ 现在/ 的/ S/ ,/ p/ 所在/ 的/ 珚/ O/ -/ half/ -/ planes/ 的/ 个数/ 就/ 很/ 有/ 可能/ 大于/ k/ -/ 1/ 个/ ,/ 而/ p/ 又/ 一定/ 在/ 它/ 自己/ 的/ p/ -/ half/ -/ plane/ 内/ ,/ 如果/ p/ 是/ 错误/ 项/ ,/ 则/ 需要/ 满足/ p/ 至少/ 在/ k/ +/ 1/ 个/ 珚/ O/ -/ half/ -/ planes/ 内/ 的/ 条件/ ,/ 因此/ 我们/ 计算/ k/ +/ 1/ 条件/ 下/ 的/ 搜索/ 空间/ 用来/ 排除/ 错误/ 项/ ./ 第/ 2/ 个/ 阶段/ 是/ (/ 第/ 5/ ~/ 11/ 步/ )/ ,/ 使用/ Range/ -/ k/ 验证法/ 分别/ 验证/ 每/ 一个/ 候选/ 对象/ 来/ 进一步/ Page7/ 排除/ 错误/ 项/ ./ 候选/ 集合/ Scnd/ 中有/ 可能/ 包括/ 查询/ 点集/ Q/ 中/ 的/ 一个/ 或/ 多个/ ,/ 因为/ Q/ 中/ 某/ 一/ 查询/ 点/ 可能/ 是/ 另/ 一/ 查询/ 点/ 的/ RkNN/ ,/ 因此/ 当/ 候选者/ 是/ 查询/ 点时/ (/ 第/ 6/ 步/ )/ ,/ 函数/ Range/ -/ k/ 的/ 参数/ r/ 为/ min/ {/ dist/ (/ p/ ,/ {/ Q/ -/ p/ }/ }/ (/ 第/ 7/ 步/ )/ ,/ 其中/ min/ {/ dist/ (/ p/ ,/ {/ Q/ -/ p/ }/ }/ 是/ p/ 到/ 数据/ 集/ {/ Q/ -/ p/ }/ 中/ 所有/ 点/ 的/ 距离/ 的/ 最小值/ ,/ 因为/ p/ 是/ 查询/ 点/ ,/ 它/ 距离/ 除/ 它/ 之外/ 的/ 哪个/ 查询/ 点/ 最近/ ,/ 就/ 可能/ 是/ 那个/ 查询/ 点/ 的/ RkNN/ ;/ 如果/ 候选者/ 不是/ 查询/ 点/ ,/ 则/ 函数/ Range/ -/ k/ 的/ 参数/ r/ 为/ min/ {/ dist/ (/ p/ ,/ Q/ )/ }/ (/ 第/ 9/ 步/ )/ ,/ 其中/ min/ {/ dist/ (/ p/ ,/ Q/ )/ }/ 是/ p/ 到/ 查询/ 点集/ Q/ 中/ 所有/ 查询/ 点/ 的/ 距离/ 的/ 最小值/ ,/ p/ 距离/ Q/ 中/ 哪个/ 查询/ 点/ 更/ 近/ ,/ p/ 就/ 可能/ 是/ 那个/ 查询/ 点/ 的/ RkNN/ ./ 5/ 双色/ GR/ 犽/ NN/ 查询/ 算法/ 本/ 节/ 介绍/ 了/ 如何/ 将/ FCINCH/ 算法/ 扩展/ 来/ 解决/ 双色/ GRkNN/ 查询/ 的/ 问题/ ./ 双色/ GRkNN/ 查询/ 算法/ 也/ 是/ 采用/ 过滤/ -/ 提炼/ 框架/ ./ 相对/ 于/ GRkNN/ 查询/ ,/ 双色/ GRkNN/ 查询/ 有/ 两个/ 数据/ 集/ P/ 和/ R/ ,/ P/ 是/ 包含/ 查询/ 点/ 集合/ Q/ 的/ 数据/ 集/ ,/ R/ 是/ 包含/ 查询/ 结果/ 的/ 数据/ 集/ ./ 例如/ ,/ r/ ∈/ R/ ,/ 如果/ Q/ 中/ 任意/ 一个/ 查询/ 点/ 是/ r/ 在/ P/ 上/ 的/ kNN/ 中/ 的/ 一个/ ,/ 则/ r/ 是/ 双色/ RkNN/ 的/ 一个/ 查询/ 结果/ ./ 而/ 对于/ 双色/ GRkNN/ 查询/ 也/ 是/ 将/ Q/ 的/ 最小/ 覆盖/ 圆/ O/ 作为/ 整体/ 考虑/ 计算/ ./ 双色/ GRkNN/ 查询/ 算法/ 如/ 算法/ 4/ 所示/ ./ 在/ 数据/ 集/ P/ 上/ 应用/ FCINCH/ -/ Filter/ 算法/ 计算/ 得到/ 查询/ 点集/ 为/ Q/ 的/ GRkNN/ 所/ 形成/ 搜索/ 区域/ 的/ 集合/ S/ (/ 第/ 1/ 步/ )/ ,/ 然后/ 用/ CINCH/ 算法/ 计算/ 搜索/ 区域/ SR/ (/ 第/ 2/ 步/ )/ ,/ 从而/ 也/ 确定/ 了/ 在/ 数据/ 集/ R/ 上/ 寻找/ 候选者/ 的/ 搜索/ 区域/ SR/ ,/ 第/ 3/ 步/ 就/ 找到/ 候选者/ 集合/ R/ ,/ 以上/ 就是/ 双色/ GRkNN/ 的/ 过滤/ 阶段/ ./ 在/ 数据/ 集/ P/ 上/ 应用/ Range/ -/ k/ 验证法/ 判断/ 每个/ 候选者/ 是否/ 为/ 查询/ 结果/ ,/ 从而/ 最终/ 得到/ 结果/ 集/ T/ ,/ 该/ 过程/ 是/ 双色/ GRkNN/ 的/ 提炼/ 阶段/ ./ 算法/ 4/ ./ FCINCH/ -/ B/ (/ O/ ,/ k/ ,/ P/ ,/ R/ )/ ./ 输入/ :/ 查询/ 点集/ Q/ 的/ 最小/ 覆盖/ 圆/ O/ 输出/ :/ 组/ BRkNN/ 查询/ 的/ 结果/ 集/ 1/ ./ S/ ·/ ·/ =/ 数据/ 集/ P/ 上/ FCINCH/ -/ Filter/ (/ O/ ,/ k/ )/ 的/ S/ ;/ 2/ ./ SR/ ·/ ·/ =/ CINCH/ (/ O/ ,/ k/ ,/ S/ )/ ;/ 3/ ./ R/ ·/ ·/ =/ 数据/ 集/ R/ 内/ 找到/ 包含/ 在/ SR/ 内/ 的/ 数据/ 的/ 集合/ ;/ 4/ ./ T/ ·/ ·/ =/ / ;/ 5/ ./ for/ (/ R/ 中/ 每个/ 对象/ r/ )/ 6/ ./ if/ (/ P/ 上/ 的/ Range/ -/ k/ (/ r/ ,/ k/ ,/ min/ {/ dist/ (/ r/ ,/ Q/ )/ }/ )/ return7/ ./ T/ ·/ ·/ =/ T/ ∪/ {/ r/ }/ ;/ 8/ ./ returnT/ ./ 6/ 算法/ 性能/ 测试/ 本节/ 将/ 测试/ 所/ 提出/ 的/ 计算/ GRkNN/ 查询/ 的/ FCINCH/ 算法/ 和/ 计算/ 双色/ GRkNN/ 查询/ 的/ FCINCH/ -/ B/ 算法/ 的/ 性能/ ./ 测试/ 在/ 查询/ 点集/ 大小/ 相同/ 情况/ 下/ ,/ 查询/ 点集/ 形成/ 的/ 最小/ 覆盖/ 圆/ 大小/ 对/ 算法/ 效率/ 的/ 影响/ ;/ 测试/ 当/ k/ 变化/ 、/ 查询/ 点/ 集合/ 大小/ 变化/ 、/ R/ 树页/ 容量/ 变化/ 的/ 影响/ 下/ 对/ 算法/ 效率/ 的/ 影响/ ,/ 然后/ 同/ FINCH/ 算法/ 相/ 比较/ ./ 算法/ 采用/ Java/ 实现/ ,/ 实验/ 在/ 处理器/ 为/ P42/ ./ 4GHz/ ,/ 内存/ 为/ 1GB/ ,/ 操作系统/ 为/ WindowsXP/ 的/ 微机/ 上/ 进行/ ./ 测试/ 中/ 使用/ 到/ 北美/ 居民点/ NAp/ 、/ 北美/ 文化/ 地标/ NAp/ 这/ 两个/ 点/ 的/ 数据/ 集/ [/ 8/ ]/ ,/ 将/ 它们/ 分别/ 以/ 4096/ 个/ 字节/ 的/ 页/ 容量/ 用/ R/ 树/ 建立/ 其/ 索引/ ,/ 数据/ 集/ 的/ 详细信息/ 如表/ 1/ 所示/ ./ 数据/ 集/ 本文/ 以/ 实际/ 运行/ 时间/ 作为/ 性能指标/ ./ 运行/ 时间/ 包括/ CPU/ 时间/ 和/ I/ // O/ 时间/ ./ 下面/ 的/ 图/ 中/ FINCH/ 的/ 运行/ 时间/ 则/ 都/ 是/ 每个/ 查询/ 点/ 的/ 运行/ 时间/ 之/ 和/ ,/ 而/ 候选/ 结果/ 也/ 是/ 每个/ 查询/ 点/ 的/ 候选/ 结果/ 之/ 和/ ./ 6.1/ GR/ 犽/ NN/ 查询/ 结果/ 如图/ 4/ 所示/ ,/ 设定/ 查询/ 点/ 数量/ 是/ 5/ ,/ k/ =/ 5/ ,/ 而/ 随着/ 5/ 个/ 查询/ 点/ 形成/ 的/ 最小/ 覆盖/ 圆/ 越来越/ 大/ (/ 用/ 圆/ 的/ 半径/ 来/ 衡量/ ,/ 半径/ 取其/ 近似值/ )/ ,/ FCINCH/ 算法/ 也/ 有/ 其/ 使用/ 范围/ ,/ 如图/ 当/ 半径/ 大于/ 0.8/ 时/ ,/ FINCH/ 算法/ 的/ 性能/ 就/ 优于/ FCINCH/ 算法/ ,/ 因为/ FINCH/ 算法/ 计算/ 每个/ 查询/ 点/ 的/ 性能/ 相似/ ,/ 有/ 几个/ 查询/ 点/ 就/ 会/ 使/ 计算/ 这组/ 查询/ 点/ 的/ RkNN/ 的/ 运行/ 时间/ 成/ 倍数/ 增加/ ,/ 与/ 这些/ 查询/ 点/ 的/ 位置/ 无关/ ./ 因此/ 当/ 查询/ 点/ 个数/ 相同/ 时/ ,/ 运行/ 时间/ 基本相同/ ./ 但/ FCINCH/ 却/ 不同/ ,/ 它/ 是/ 与/ 查询/ 点/ 的/ 位置/ 相关/ 的/ ,/ 在/ 查询/ 点/ 个数/ 确定/ 的/ 情况/ 下/ ,/ 查询/ 点集/ 所/ 形成/ 的/ 最小/ 覆盖/ 圆越/ 大/ ,/ 算法/ 的/ 性能/ 就/ 越/ 低/ ,/ 因为/ 该/ 算法/ 是/ 以/ 查询/ 点集/ 最小/ 覆盖/ 圆为/ 整体/ 进行/ 剪枝/ 的/ ,/ 同时/ 整个/ 圆/ 也/ 将/ 划入/ 搜索/ 区域/ ,/ 圆越/ 大/ 搜索/ 区域/ 越大/ ,/ 候选/ 结果/ 就/ 越/ 多/ ,/ 如图/ 5/ 所示/ ,/ FCINCHPage8/ 算法/ 随着/ 圆/ 越来越/ 大/ ,/ 候选者/ 也/ 越/ 多/ ,/ 而/ FINCH/ 却/ 变化/ 不大/ ./ 但是/ 当/ 查询/ 点间/ 相距/ 较近/ 的/ 时候/ ,/ FCINCH/ 算法/ 就/ 会/ 比/ FINCH/ 算法/ 的/ 性能/ 更好/ ./ 如图/ 6/ 所示/ ,/ 在/ 数据/ 集/ NAp/ 上/ ,/ 给定/ 5/ 个/ 查询/ 点/ ,/ 随着/ k/ 值/ 从/ 1/ ~/ 10/ ,/ 算法/ 在/ NAp/ 数据/ 集上/ 执行/ 的/ 性能/ 对比/ ./ 图/ 7/ 是/ 相同/ 查询/ 的/ 候选者/ 数量/ 的/ 比较/ ,/ 随着/ k/ 的/ 增大/ ,/ FINCH/ 得到/ 的/ 候选/ 集合/ 比/ FINCH/ 更/ 多/ ./ 这/ 两个/ 图/ 显示/ 出/ 在/ 处理/ 查询/ 点间/ 相距/ 较近/ 的/ GRkNN/ 问题/ 时/ FCINCH/ 比/ FINCH/ 更/ 有效/ ./ 因为/ 给定/ 的/ 5/ 个/ 查询/ 点/ 如果/ 用/ FINCH/ 算法/ 思想/ 解决/ ,/ 则/ 是/ 一个/ 一个/ 计算/ 其/ 搜索/ 区域/ 从而/ 得到/ 其/ 候选/ 集合/ ,/ 但/ 当/ 查询/ 点较/ 近时/ ,/ 会/ 有/ 搜索/ 区域/ 相/ 重叠/ ,/ 而/ 每个/ 查询/ 点/ 的/ 候选/ 集合/ 也/ 会/ 有/ 很多/ 重复/ ,/ 这样/ 就/ 降低/ 了/ 算法/ 性能/ ,/ 而/ FCINCH/ 算法/ 避免/ 了/ 这样/ 的/ 问题/ 发生/ ,/ 当/ 查询/ 点间/ 的/ 相近/ 程度/ 达到/ 某种程度/ 的/ 时候/ ,/ 将/ 其/ 划定/ 在/ 它们/ 的/ 最小/ 覆盖/ 圆内/ ,/ 将/ 这个/ 圆/ 作为/ 整体/ 考虑/ 就/ 避免/ 了/ 重复/ 查找/ 相同/ 候选者/ 的/ 可能/ ./ 因此/ 在/ 这种/ 情况/ 下/ ,/ 处理/ GRkNN/ 问题/ 时/ FCINCH/ 比/ FINCH/ 更/ 有效/ ./ 如图/ 8/ 所示/ ,/ 在/ 数据/ 集/ NAp/ 上/ ,/ 当/ k/ =/ 5/ 、/ 查询/ 点/ 数量/ 不/ 同时/ (/ 所有/ 查询/ 点/ 在/ 某/ 一较/ 小/ 范围/ 内/ )/ ,/ FCINCH/ 的/ 性能/ 优于/ FINCH/ 的/ 查询/ 性能/ ,/ 因为/ 在/ FCINCH/ 算法/ 中/ 查询/ 点/ 都/ 放在/ 它们/ 的/ 最小/ 覆盖/ 圆内/ 做/ 整体/ 考虑/ ,/ 所有/ 查询/ 点/ 都/ 在/ 一个/ 较/ 小/ 的/ 范围/ 内/ ,/ 每个/ 查询/ 点/ 搜索/ 区域/ 交叠/ 情况/ 频繁/ ,/ 因此/ 剪枝/ 后/ 形成/ 的/ 搜索/ 区域/ 基本相同/ ,/ 所以/ 当/ 查询/ 数量/ 增大/ 时/ ,/ 并/ 没有/ 对/ 性能/ 造成/ 影响/ ,/ 但/ FINCH/ 却/ 不同/ ,/ 每/ 计算/ 一个/ 查询/ 点/ 的/ 时间/ 基本相同/ ,/ 而/ 随着/ 查询/ 点/ 增加/ 时/ ,/ 其/ 运行/ 时间/ 将成/ 倍数/ 增加/ ./ 如图/ 9/ 所示/ ,/ 在/ 数据/ 集/ NAp/ 上/ 给定/ 5/ 个/ 查询/ 点/ (/ 所有/ 查询/ 点/ 在/ 某/ 一较/ 小/ 范围/ 内/ )/ ,/ 查询/ 的/ k/ 值为/ 5/ ,/ 随着/ 形成/ 的/ R/ 树/ 的/ 页/ 容量/ 不同/ ,/ 运行/ 性能/ 并/ 没有/ 相差/ 很多/ ,/ 但/ 仍/ 可/ 看出/ ,/ FCINCH/ 性能/ 优于/ FINCH/ ./ 6.2/ 双色/ GR/ 犽/ NN/ 查询/ 结果/ 如图/ 10/ 所示/ ,/ 给定/ 5/ 个/ 查询/ 点/ ,/ 查询/ 点/ 所在/ 集合/ 为/ NAc/ ,/ 结果/ 集为/ NAp/ ,/ 最小/ 覆盖/ 圆/ 半径/ 小于/ 0.2/ ,/ 随着/ k/ 值/ 增大/ ,/ 可/ 看出/ FCINCH/ -/ B/ 的/ 性能/ 优于/ FINCH/ -/ B/ ./ k/ 值越/ 大/ ,/ FINCH/ -/ B/ 的/ 每个/ 查询/ 点/ 的/ 搜索/ 区域/ 重叠/ 的/ 就/ 越/ 多/ ,/ 候选/ 结果/ 就/ 越/ 多/ ,/ 如图/ 11/ 所示/ ./ Page9/ 而/ 当/ 查询/ 点/ 距离/ 较近/ 时/ ,/ FCINCH/ -/ B/ 与/ FCINCH/ 相同/ ,/ 都/ 能/ 发挥/ 将/ 查询/ 点/ 最小/ 覆盖/ 圆/ 作为/ 整体/ 考虑/ 减值/ 的/ 优势/ ,/ 因此/ 相对/ 于/ FINCH/ -/ B/ 来说/ ,/ FCINCH/ -/ B/ 的/ 算法/ 性能/ 随着/ k/ 值/ 的/ 增大/ 却/ 使得/ 候选者/ 数量/ 较少/ ./ 图/ 10k/ 值/ 对/ 算法/ 性能/ 的/ 影响/ (/ 双色/ GRkNN/ )/ 图/ 11k/ 值/ 对/ 候选者/ 数量/ 的/ 影响/ (/ 双色/ GRkNN/ )/ 7/ 结论/ 根据/ 实际/ 应用/ 需求/ 提出/ 了/ GRkNN/ 查询/ 的/ 概念/ 及/ 相关/ 算法/ ./ 采用/ R/ 树/ [/ 8/ ]/ 索引/ 结构/ ,/ 利用/ 过滤/ -/ 提炼/ 的/ 模型/ 结构/ 来/ 实现/ GRkNN/ 查询/ ./ 在/ 过滤/ 阶段/ ,/ 将/ 查询/ 点集/ 的/ 最小/ 覆盖/ 圆/ 作为/ 整体/ 考虑/ 剪枝/ ,/ 利用/ CINCH/ 算法/ 确定/ 搜索/ 区域/ ,/ 最终/ 确定/ 了/ 结果/ 候选/ 集合/ ./ 在/ 提炼/ 阶段/ ,/ 采用/ Range/ -/ k/ 验证/ [/ 2/ ]/ ,/ 排除/ 错误/ 结果/ 的/ 数据/ 点/ ,/ 最终/ 得到/ 结果/ 集合/ ./ 并/ 采用/ 真实/ 数据/ 集对/ 算法/ 的/ 性能/ 进行/ 了/ 测试/ ,/ 实验/ 表明/ 所/ 提出/ 算法/ 的/ 效率/ 在/ 查询/ 点集/ 是/ 一组/ 邻近/ 的/ 空间/ 对象/ 时/ 优于/ 直接/ 算法/ ./ GRkNN/ 查询/ 具有/ 重要/ 的/ 实际/ 应用/ 价值/ ,/ 可以/ 用于/ 评价/ 集合/ 对象/ 的/ 影响力/ ,/ 为/ 决策/ 支持/ 提供/ 了/ 新/ 的/ 方法/ ./ 致谢/ 感谢/ 文献/ [/ 7/ ]/ 的/ 作者/ 提供/ 的/ FINCH/ 的/ 算法/ 源码/ !/ 

