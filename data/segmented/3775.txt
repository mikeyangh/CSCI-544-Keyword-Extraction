Page1/ 基于/ 环境/ 的/ 多/ 形态/ 时间/ 需求/ 建模/ 方法/ 陈小红/ 1/ )/ ,/ 2/ )/ ,/ 3/ )/ 刘静/ 1/ )/ 1/ )/ (/ 华东师范大学/ 上海市/ 高/ 可信计算/ 重点/ 实验室/ 上海/ 200062/ )/ 2/ )/ (/ 北京大学/ 高/ 可信/ 软件技术/ 教育部/ 重点/ 实验室/ 北京/ 100871/ )/ 3/ )/ (/ 浙江师范大学/ 计算机软件/ 与/ 理论/ 省级/ 重中之重/ 学科/ 浙江/ 金华/ 321004/ )/ 摘要/ 时间/ 需求/ 作为/ 嵌入式/ 系统/ 的/ 关键/ 要素/ ,/ 其/ 重要性/ 越来越/ 突出/ ./ 但是/ 目前/ 的/ 时间/ 需求/ 存在/ 着/ 多样/ 的/ 环境/ 时间/ 描述/ 与/ 单一/ 的/ 软件/ 时间/ 描述/ 融合/ 问题/ ./ 文中/ 在/ 基于/ 环境/ 的/ 功能性/ 需求/ 的/ 基础/ 上/ ,/ 提出/ 基于/ 环境/ 的/ 多/ 形态/ 时间/ 需求/ 建模/ 方法/ ,/ 试图/ 在/ 需求/ 层次/ 上/ 为/ 该/ 问题/ 提供/ 解决方案/ ./ 文中/ 构建/ 了/ 支持/ 这个/ 方法/ 的/ 多/ 形态/ 时间/ 需求/ 模型/ ,/ 在/ 环境因素/ 的/ 基础/ 上/ 增加/ 了/ 多/ 形态/ 时间/ 描述/ ,/ 并/ 提出/ 该/ 需求/ 模型/ 制导/ 的/ 需求/ 建模/ 过程/ ,/ 帮助/ 需求/ 分析员/ 在/ 功能性/ 需求/ 的/ 基础/ 上/ 建模/ 时间/ 需求/ ./ 文中/ 还/ 给出/ 了/ 从/ 多样/ 的/ 环境/ 时间/ 描述/ 得到/ 软件/ 时间/ 需求/ 规约/ 的/ 步骤/ ,/ 指导/ 需求/ 分析/ 人员/ 抽取/ 时间/ 需求/ 规约/ ./ 关键词/ 时间/ 需求/ ;/ 多/ 形态/ 时间/ ;/ 基于/ 环境/ 建模/ ;/ 嵌入式/ 系统/ 1/ 引言/ 嵌入式/ 系统/ 是/ 近年来/ 的/ 研究/ 热点/ ,/ 新近/ 提出/ 的/ 物/ 联网/ [/ 1/ ]/ 和/ 信息/ 物理/ 融合/ 系统/ (/ Cyber/ -/ PhysicalSystems/ ,/ CPS/ )/ [/ 2/ ]/ 都/ 建立/ 在/ 其/ 基础/ 之上/ ./ 在/ 嵌入式/ 系统/ 中/ ,/ 实时/ 是/ 关键/ 要素/ 之一/ ./ 实时/ 需求/ 的/ 研究/ 工作/ 主要/ 集中/ 在/ 实时/ 系统/ 中/ ,/ 方法/ 主要/ 采用/ 时态/ 逻辑/ 和/ 时态/ 逻辑/ 的/ 扩展/ [/ 3/ -/ 4/ ]/ 对/ 时间/ 点/ 和/ 时间段/ 做/ 定性/ 与/ 定量/ 的/ 描述/ 与/ 分析/ ./ 现在/ 的/ 需求/ 工程/ 方法/ ,/ 比如/ 面向/ 目标/ 的/ 方法/ [/ 5/ ]/ 和/ 面向/ 主体/ 和/ 意图/ 的/ 方法/ [/ 6/ ]/ ,/ 也/ 采用/ 时态/ 逻辑/ 或/ 其/ 扩展/ 对/ 时间/ 点/ 和/ 时间段/ 进行/ 描述/ ./ 我们/ 以前/ 的/ 工作/ 也/ 针对/ 嵌入式/ 系统/ ,/ 从/ 环境/ 建模/ 的/ 角度/ 对/ 时间/ 点/ 和/ 时间段/ 进行/ 刻画/ [/ 7/ ]/ ./ 而物/ 联网/ 和/ CPS/ 等/ 的/ 提出/ ,/ 对/ 时间/ 需求/ 又/ 提出/ 了/ 新/ 的/ 挑战/ ./ 以/ CPS/ 为例/ ,/ CPS/ 是/ 一类/ 在/ 环境/ 感知/ 的/ 基础/ 上/ ,/ 深度/ 融合/ 了/ 计算/ 、/ 通信/ 和/ 控制能力/ 的/ 可控/ 、/ 可信/ 、/ 可/ 扩展/ 的/ 网络化/ 物理/ 设备/ 系统/ [/ 8/ ]/ ./ 简单/ 来说/ ,/ CPS/ 系统/ 就是/ 开放/ 的/ 嵌入式/ 系统/ 加上/ 网络/ 和/ 控制/ 功能/ ,/ 其/ 面临/ 的/ 环境/ 多样/ ,/ 包括/ 自然环境/ 、/ 建筑/ 、/ 机器/ ,/ 当然/ 也/ 包括/ 人类/ 自身/ ./ 这样/ 的/ 环境/ 随/ 时间/ 连续/ 变化/ ,/ 在/ 时间/ 描述/ 上/ 可能/ 多样/ ,/ 比如/ 本文/ 案例/ 中/ 使用/ 汽车/ 曲轴/ 转过/ 的/ 角度/ 描述/ 时间/ ./ 而/ 对/ CPS/ 软件/ 来说/ ,/ 其/ 时间/ 描述/ 单一/ ,/ 因此/ 就/ 存在/ 着/ 多样/ 的/ 环境/ 时间/ 描述/ 与/ 单一/ 的/ CPS/ 软件/ 时间/ 描述/ 之间/ 的/ 融合/ 问题/ ./ 多样/ 的/ 时间/ 描述/ 问题/ 也/ 出现/ 在/ 了/ 软件工程/ 其它/ 领域/ ./ 在/ 同步/ 语言/ [/ 9/ ]/ 中/ ,/ 为了/ 解决/ 这个/ 问题/ 它/ 引入/ 了/ 多/ 形态/ 时间/ ./ 时间/ 单位/ 不仅仅/ 限于/ 物理/ 时间/ 的/ 秒/ 、/ 微秒/ 等/ ./ 在/ 同步/ 程序/ 中/ ,/ 可以/ 出现/ 类似/ “/ 这个/ 任务/ 必须/ 在/ 10ms/ 之内/ 完成/ ”/ 的/ 语句/ ,/ 也/ 可以/ 出现/ “/ 这个/ 车/ 必须/ 在/ 50m/ 之内/ 停住/ ”/ 的/ 语句/ ./ 10ms/ 和/ 50m/ 都/ 是/ 表示/ 时间/ 的/ 截止/ ,/ 这/ 就是/ 多/ 形态/ 时间/ ./ 法国/ 国家/ 信息/ 与/ 自动化/ 研究所/ INRIA/ 的/ Andre/ 等/ 人/ 将/ 多/ 形态/ 时间/ 引入/ 到/ 系统/ 建模/ 中/ 去/ ,/ 为/ 实时/ 嵌入式/ 系统/ 构建/ 了/ 规范/ MARTE/ (/ ModelingandAnalysisforReal/ -/ TimeEmbeddedSystem/ )/ [/ 10/ ]/ ,/ 将/ 时间/ 定义/ 为/ 一组/ 时钟/ ,/ 每个/ 时钟/ 都/ 有/ 自己/ 的/ 时间/ 单位/ ./ 在/ 此基础/ 上/ ,/ 他们/ 还/ 创建/ 了/ 时钟/ 约束/ 语言/ CCSL/ (/ ClockConstraintSpecifi/ -/ cationLanguage/ )/ [/ 11/ ]/ ,/ 用于/ 实现/ 时间/ 的/ 同步/ ./ 本文/ 将/ 多/ 形态/ 时间/ 的/ 概念/ 引入/ 到/ 需求/ 建模/ 中来/ ,/ 尝试/ 在/ 需求/ 层次/ 上/ 解决/ 多样/ 的/ 环境/ 时间/ 描述/ 与/ 单一/ 的/ 软件/ 时间/ 描述/ 的/ 融合/ 问题/ ./ 我们/ 以前/ 的/ 工作/ 提出/ 了/ 基于/ 环境/ 建模/ 的/ 功能性/ 需求/ 建模/ 方法/ [/ 12/ ]/ ./ 该/ 工作/ 将/ 环境/ 看作/ 是/ 一组/ 与/ 软件/ 交互/ 的/ 实体/ (/ 又称/ 问题/ 领域/ )/ ,/ 将/ 需求/ 看作/ 是/ 预期/ 问题/ 领域/ 的/ 变化/ ,/ 即/ 期望/ 的/ 环境/ 变化/ ./ 我们/ 认为/ ,/ 问题/ 领域/ 是/ 现实/ 世界/ 的/ 一部分/ ,/ 有/ 自己/ 的/ 生命/ ./ 从/ 直觉/ 上/ 讲/ ,/ 每个/ 问题/ 领域/ 的/ 时间/ 都/ 可以/ 建模/ 成/ (/ 或者/ 参考/ )/ 一个/ 时钟/ ,/ 该/ 时钟/ 可以/ 有/ 自己/ 的/ 时间/ 单位/ ./ 因此/ ,/ 结合/ 我们/ 前期/ 的/ 工作/ [/ 12/ ]/ 和/ MARTE/ // CCSL/ [/ 10/ ]/ ,/ 本文/ 提出/ 构建/ 基于/ 环境/ 的/ 多/ 形态/ 时间/ 需求/ 建模/ 方法/ ,/ 跟/ 其它/ 需求/ 工程/ 方法/ 相比/ ,/ 其/ 主要/ 特点/ 有/ :/ (/ 1/ )/ 它/ 是/ 基于/ 环境/ 的/ 建模/ ,/ 建立/ 在/ 现实/ 世界/ 问题/ 领域/ 的/ 基础/ 上/ ,/ 有着/ 坚实/ 的/ 现实/ 基础/ ,/ 也/ 建立/ 在/ 功能性/ 需求/ 之上/ ;/ (/ 2/ )/ 它/ 支持/ 多/ 形态/ 时间/ 建模/ ,/ 适合/ 描述/ 多样/ 的/ 环境/ 时间/ 和/ 单一/ 的/ 软件/ 时间/ ./ 为了/ 支持/ 基于/ 环境/ 的/ 多/ 形态/ 时间/ 需求/ 建模/ 方法/ ,/ 本文/ 首先/ 构建/ 了/ 基于/ 环境/ 的/ 多/ 形态/ 时间/ 需求/ 模型/ ,/ 在/ 环境因素/ 的/ 基础/ 上/ 增加/ 了/ 多/ 形态/ 时间/ 描述/ ,/ 由此/ 在/ 基于/ 环境/ 变化/ 描述/ 的/ 功能性/ 需求/ 的/ 基础/ 上/ 描述/ 多样/ 的/ 软件/ 环境/ 时间/ 约束/ 和/ 软件/ 时间/ 约束/ ,/ 包括/ 最/ 基本/ 的/ 时间/ 点/ 和/ 时间段/ 的/ 描述/ ,/ 并/ 提出/ 该/ 需求/ 模型/ 制导/ 下/ 的/ 建模/ 过程/ ,/ 以/ 指导/ 需求/ 分析/ 人员/ 使用/ 该/ 需求/ 模型/ 进行/ 时间/ 需求/ 建模/ ./ 最后/ 采用/ 该/ 方法/ 对/ 汽车/ 领域/ 进行/ 了/ 应用/ ,/ 验证/ 了/ 本文/ 方法/ 的/ 有效性/ ./ 本文/ 第/ 2/ 节/ 给出/ 多/ 形态/ 时间/ 需求/ 模型/ ;/ 第/ 3/ 节/ 给出/ 该/ 时间/ 需求/ 模型/ 制导/ 下/ 的/ 时间/ 需求/ 建模/ 过程/ ;/ 第/ 4/ 节/ 采用/ 汽车/ 领域/ 的/ 具体/ 案例/ 来/ 验证/ 方法/ 的/ 可行性/ ;/ 最后/ ,/ 第/ 5/ 、/ 6/ 节/ 讨论/ 相关/ 工作/ 并/ 总结/ 全文/ ./ 2/ 多/ 形态/ 时间/ 需求/ 模型/ 在/ 我们/ 以前/ 的/ 功能性/ 需求/ 模型/ 的/ 基础/ 上/ [/ 12/ ]/ ,/ 本文/ 进一步/ 将/ 跟/ 功能/ 相关/ 的/ 概念/ 与/ 多/ 形态/ 时间/ 的/ 概念/ 关联/ 起来/ ,/ 扩展/ 该/ 需求/ 模型/ ,/ 得到/ 多/ 形态/ 时间/ 需求/ 的/ 概念模型/ ,/ 如图/ 1/ 所示/ ./ 图/ 1/ 白色/ 矩形框/ 中/ 的/ 概念/ 及其/ 关联/ 来自/ 我们/ 以前/ 的/ 工作/ ,/ 总结/ 了/ 问题/ 框架/ 方法/ [/ 13/ ]/ 的/ 概念/ 和/ 关联/ ,/ 表示/ 了/ 基于/ 环境/ 软件/ 问题/ 的/ 基本概念/ 及/ 关联/ :/ (/ 1/ )/ 软件/ 问题/ (/ Problem/ )/ 处于/ 一组/ 现实/ 世界/ 的/ 问题/ 领域/ (/ ProblemDomain/ )/ 当中/ ,/ 其/ 目的/ 是/ 开发/ 一个/ 软件/ 机器/ (/ Machine/ )/ ,/ 以/ 满足/ 客户/ 的/ 需求/ (/ Requirement/ )/ ,/ 其中/ 软件/ 机器/ 的/ 环境/ 就/ 表示/ 为/ 一组/ 问题/ 领域/ 的/ 集合/ ,/ 需求/ 就/ 表示/ 为/ 问题/ 领域/ 的/ 预期/ 变化/ ./ (/ 2/ )/ 在/ 软件/ 机器/ 和/ 问题/ 领域/ 存在/ 共享/ 的/ 现象/ (/ Phenomenon/ )/ ,/ 这/ 就是/ 在/ 机器/ 和/ 问题/ 领域/ 之间/ 的/ 交互/ (/ Interaction/ )/ ./ 需求/ 通过/ 软件/ 机器/ 与/ 环境/ 的/ 交互/ 实现/ ./ (/ 3/ )/ 每个/ 交互/ 有/ 一个/ 发起方/ ,/ 一个/ 接收/ 方/ ,/ 发起方/ 和/ 接收/ 方/ 必须/ 一方/ 是/ 机器/ ,/ 另一方/ 是/ 问题/ 领域/ ./ 每个/ 交互/ 必须/ 还有/ 内容/ ,/ 那/ 就是/ 现象/ ,/ 现象/ 可以/ 分为/ 事/ Page3/ 图/ 1/ 多/ 形态/ 时钟/ 需求/ 概念模型/ 件/ (/ Event/ )/ 、/ 状态/ (/ State/ )/ 和/ 值/ (/ Value/ )/ ./ 由/ 上述/ 描述/ 可以/ 看出/ ,/ 基于/ 环境/ 的/ 功能性/ 需求/ 模型/ 的/ 核心/ 概念/ 是/ 问题/ 领域/ 和/ 交互/ ,/ 它们/ 都/ 有/ 环境因素/ 信息/ ./ 围绕/ 这些/ 环境因素/ ,/ 进行/ 与/ 时间/ 相关/ 的/ 扩展/ ,/ 得到/ 图/ 1/ 灰色/ 矩形框/ 中/ 表示/ 的/ 概念/ ./ 这些/ 概念/ 大部分/ 来自/ MARTE/ ,/ 根据/ 需求/ 阶段/ 的/ 特征/ ,/ 又/ 重新/ 进行/ 了/ 定义/ ./ 首先/ 考虑/ 扩展/ 交互/ ./ 原来/ 工作/ 假设/ 交互/ 瞬间/ 发生/ ,/ 不/ 考虑/ 持续时间/ ./ 但/ 在/ 实际/ 情况/ 中/ ,/ 有些/ 交互/ 的/ 发生/ 需要/ 花费/ 一定/ 时间/ ./ 根据/ 其/ 持续/ 与否/ ,/ 将/ 交互/ 分为/ 瞬时/ 交互/ (/ InstantInteraction/ )/ 和/ 持续/ 交互/ (/ Dura/ -/ tionInteraction/ )/ 两种/ ./ 持续/ 交互/ 也/ 可以/ 用/ 两个/ 瞬时/ 交互/ 表示/ ,/ 一个/ 表示/ 持续/ 交互/ 的/ 开始/ ,/ 一个/ 表示/ 持续/ 交互/ 的/ 结束/ ./ 每个/ 持续/ 交互/ 都/ 有/ 持续时间/ ,/ 这个/ 持续时间/ 可以/ 由/ 开始/ 瞬时/ 交互/ 和/ 结束/ 瞬时/ 交互/ 之间/ 的/ 时间差/ (/ Duration/ )/ 来/ 表示/ ./ 与/ MARTE/ 类似/ ,/ 我们/ 也/ 将/ 时间/ (/ Time/ )/ 看作/ 时钟/ (/ Clock/ )/ 的/ 集合/ ./ 这些/ 时钟/ 本质/ 上/ 是/ 连续/ 的/ (/ dense/ )/ ,/ 因为/ 在/ 现实/ 世界/ 中/ ,/ 每种/ 物品/ 都/ 有/ 连续/ 的/ 生命周期/ ./ 一个/ 时钟/ 可以/ 是/ 精密/ 时钟/ (/ ChronometricClock/ )/ ,/ 也/ 可以/ 是/ 逻辑/ 时钟/ (/ LogicClock/ )/ ,/ 每个/ 时钟/ 有/ 自己/ 的/ 时钟/ 类型/ (/ ClockType/ )/ 、/ 时间/ 单位/ (/ Unit/ )/ 和/ 一组/ 可/ 选/ 性质/ (/ OptionalProperty/ )/ ./ 不同/ 类型/ 的/ 时钟/ ,/ 时间/ 单位/ 选择/ 不同/ ./ 精密/ 时钟/ 的/ 时间/ 单位/ 是/ 常见/ 单位/ ,/ 比如/ 秒/ 或者/ 其它/ 衍生/ 的/ 单位/ ./ 大多数/ 逻辑/ 时钟/ 使用/ 一个/ 普遍/ 的/ 时间/ 单位/ tick/ ,/ 也/ 可以/ 使用/ 像/ 处理/ 周期/ 这样/ 的/ 单位/ ,/ 或者/ 使用/ 物理/ 数量/ ,/ 像/ 本文/ 案例/ 中/ 使用/ 的/ 角度/ ./ 时钟/ 的/ 可选/ 性质/ 包括/ 分辨率/ (/ Resolution/ )/ 、/ 初始值/ (/ Offset/ )/ 和/ 最大值/ (/ MaximalValue/ )/ ./ 每个/ 时钟/ 都/ 包含/ 一组/ 有序/ 的/ 时间/ 点/ (/ Instant/ )/ ./ 时间/ 点/ 和/ 时间/ 点/ 之间/ 存在/ 着/ 各种/ 时间/ 点/ 关系/ (/ InstantRelation/ )/ ./ 时间/ 点/ 和/ 时间/ 点/ 之间/ 的/ 时间/ 差距/ 称为/ 时间差/ 或/ 时间段/ (/ Duration/ )/ ./ 为了/ 显式/ 地/ 表示/ 时间/ 点/ 及其/ 关系/ ,/ 定义/ 了/ 时间/ 点图/ (/ InstantGraph/ )/ ./ 不同/ 的/ 时钟/ 由于/ 其/ 时间/ 点/ 之间/ 存在/ 的/ 关系/ ,/ 使得/ 它们/ 之间/ 也/ 存在/ 着/ 约束/ 关系/ ,/ 这种/ 关系/ 我们/ 称/ 时钟/ 约束/ 关系/ (/ ClockConstraintRelation/ )/ ./ 这/ 两组/ 概念/ (/ 图/ 1/ 中/ 的/ 白色/ 和/ 灰色/ 矩形框/ )/ 通过/ 如下/ 关系/ 关联/ 在/ 一起/ :/ 每个/ 问题/ 领域/ 都/ 有/ (/ 或者/ 参考/ )/ 某个/ 时钟/ ;/ 每个/ 问题/ 领域/ 的/ 每个/ 交互/ (/ 特指/ 瞬时/ 交互/ ,/ 若/ 为/ 持续/ 交互/ 就/ 转换成/ 瞬时/ 交互/ )/ 发生/ 的/ 时刻/ 都/ 是/ 该/ 时钟/ 的/ 一个/ 时间/ 点/ ./ 表/ 1/ 给出/ 了/ 上述/ 概念/ 的/ 具体/ 含义/ 及其/ 层次/ ./ 概念/ 问题/ 机器/ 问题/ 领域/ 与/ 软件系统/ 交互/ 的/ 现实/ 世界/ 实体/ 需求/ 交互/ 瞬时/ 交互/ 交互/ 的/ 发生/ 瞬间/ 完成/ 持续/ 交互/ 交互/ 的/ 发生/ 需要/ 花费/ 一定/ 时间/ 现象/ 事件/ 在/ 特定/ 时刻/ 发生/ 、/ 出现/ 的/ 个体/ 状态变量/ 和/ 值/ 之间/ 的/ 关系/ ,/ 可以/ 随/ 时间/ 改变/ 值/ 时钟/ 类型/ 时钟/ 的/ 种类/ 精密/ 时钟/ 指向/ 物理/ 时间/ 的/ 时钟/ 逻辑/ 时钟/ 关注/ 时间/ 点/ 之间/ 的/ 顺序/ ,/ 而/ 忽视/ 时间/ 点/ 之间/ 的/ 时钟/ 时间/ 单位/ 测量/ 时间/ 所用/ 的/ 基本/ 单位/ 时间/ 点/ 特定/ 的/ 时刻/ 时间/ 段时间/ 区间/ 时间/ 点/ 关系/ 时间/ 点/ 之间/ 的/ 关系/ 时钟/ 约束/ 关系/ 时钟/ 之间/ 的/ 关系/ 时间/ 点图/ 显式/ 表示/ 时间/ 点及/ 时间/ 点/ 关系/ 的/ 图/ 可选/ 特性/ 可能/ 具有/ 的/ 能够/ 刻画/ 时钟/ 的/ 特性/ 分辨率/ 时钟/ 的/ 粒度/ 最大值/ 时钟/ 时间/ 点能/ 达到/ 的/ 最大值/ 初始值/ 时钟/ 的/ 开始/ 值/ Page4/ 基于/ 上述/ 的/ 概念模型/ ,/ 本文/ 给出/ 一些/ 关键/ 概念/ 的/ 形式化/ 定义/ ,/ 包括/ 时钟/ 、/ 时间/ 点图/ 、/ 时间差/ 、/ 一些/ 时钟/ 约束/ 关系/ 和/ 交互/ 等/ ./ 由于/ 时钟/ 的/ 多/ 形态/ 特性/ ,/ 本文/ 在/ MARTE/ 时钟/ 模型/ 的/ 五元/ 组/ 定义/ 基础/ 上/ ,/ 增加/ 了/ 可选/ 属性/ 来/ 描述/ 多/ 形态/ 时钟/ ,/ 得到/ 时钟/ 定义/ ,/ 如/ 定义/ 1/ 所示/ ./ 定义/ 1/ ./ 时钟/ (/ Clock/ )/ ./ 其中/ ,/ I/ =/ {/ instant1/ ,/ instant2/ ,/ …/ ,/ instantn/ }/ 是/ 时间/ 点/ instanti/ (/ 1/ / i/ / n/ )/ 的/ 集合/ ./ 这些/ 时间/ 点/ 都/ 是/ 时钟/ 的/ 里程碑/ ,/ 它们/ 记录/ 了/ 在/ 其/ 生命周期/ 中有/ 意义/ 的/ 时刻/ ./ 这些/ 时间/ 点有/ 两种/ 记录/ 方式/ ,/ 一种/ 是/ 用/ 交互/ 发生/ 的/ 时刻/ 来/ 记录/ (/ @/ tinteraction/ )/ ,/ 另/ 一种/ 是/ 其/ 时钟/ 变量/ 的/ 赋值/ ./ </ 是/ 定义/ 在/ I/ 上/ 的/ 类序/ 关系/ ,/ 命名/ 为/ 严格/ 先于/ ./ D/ =/ {/ d1/ ,/ d2/ ,/ …/ ,/ dn/ }/ 是/ 标签/ 的/ 集合/ ,/ D/ 中/ 的/ 每/ 一/ λ/ :/ I/ →/ D/ 是/ 一个/ 标签/ 函数/ ./ U/ 是/ 时间/ 单位/ 符号/ ./ O/ 是/ 一组/ 可/ 选/ 属性/ 的/ 集合/ ,/ 包括/ 分辨率/ 、/ 最大值/ 和/ 初始值/ ./ 时间/ 点图/ 是/ 直观/ 地/ 表达/ 时钟/ 内/ 或/ 时钟/ 之间/ 时间/ 点及/ 时间/ 点/ 之间/ 关系/ 的/ 图/ ./ 该图/ 可以/ 形式化/ 地/ 定义/ 为/ 一个/ 2/ 元组/ ,/ 如/ 定义/ 2/ 所示/ ./ 个/ 元素/ di/ (/ 1/ / i/ / n/ )/ 表示/ 一个/ 有/ 意义/ 的/ 交互/ ./ 定义/ 2/ ./ 时间/ 点图/ (/ InstantGraph/ )/ ./ 其中/ ,/ Ins/ =/ {/ instant1/ ,/ instant2/ ,/ …/ ,/ instantn/ }/ 是/ 一组/ 时间/ 点/ 的/ 集合/ ./ Rels/ / Ins/ ×/ Ins/ 是/ Ins/ 集合/ 中/ 时间/ 点/ 之间/ 的/ 二元关系/ 集合/ ./ 二元关系/ 可以/ 分为/ 3/ 种/ [/ 10/ ]/ :/ 先于/ (/ Precedence/ ,/ / )/ 、/ 同时/ 发生/ (/ Coincident/ ,/ ≡/ )/ 和/ 严格/ 先于/ (/ StrictPrecedence/ ,/ </ )/ ,/ 其中/ 先于/ 关系/ 包含/ 同时/ 发生/ 的/ 情况/ ,/ 而/ 严格/ 先于/ 关系/ 不/ 允许/ 同时/ 发生/ ./ 这/ 3/ 种/ 关系/ 的/ 图形/ 表示/ 如图/ 2/ 所示/ ./ 时钟/ 约束/ 关系/ 可以/ 靠/ 时间/ 点/ 之间/ 的/ 关系/ 来/ 定义/ ./ 文献/ [/ 11/ ]/ 给出/ 了/ 很/ 多种/ 关系/ ,/ 下面/ 介绍/ 本文/ 用到/ 的/ 过滤/ (/ filterBy/ )/ 关系/ ,/ 它/ 描述/ 了/ 两个/ 时钟/ 时间/ 点/ 之间/ 的/ “/ 过滤/ ”/ 对应/ 关系/ ,/ 即/ 一个/ 时钟/ 的/ 时间/ 点/ 都/ 是/ 依靠/ 另/ 一个/ 时钟/ 的/ 时间/ 点/ 通过/ 某种/ 形式/ 的/ 过滤/ 得到/ ./ 其/ 具体/ 定义/ 见/ 定义/ 3/ ./ 定义/ 3/ ./ 过滤/ (/ filteredBy/ )/ ./ 其中/ A/ 和/ B/ 都/ 是/ 时钟/ ,/ ω/ 是/ 一个/ 二进制/ 数/ ./ A/ 的/ 时间/ 点/ 由/ B/ 的/ 时间/ 点/ 通过/ ω/ 过滤器/ 构造/ 出来/ ./ 关于/ 时间/ 点/ 与/ 时间/ 点/ 之间/ 的/ 时间差/ ,/ 与/ MARTE/ 类似/ ,/ 本文/ 用/ 时差/ 算子/ (/ Durationopera/ -/ tor/ ,/ -/ )/ 来/ 描述/ ./ 与/ 原/ 定义/ 中/ 的/ 时间/ 单位/ 秒/ (/ s/ )/ 不同/ ,/ 本文/ 采用/ 多/ 形态/ 时间/ 单位/ ./ 其/ 具体/ 定义/ 见/ 定义/ 4/ ./ 定义/ 4/ ./ 时差/ 算子/ (/ Durationoperator/ ,/ -/ )/ ./ a/ -/ b/ </ tunit/ </ =/ >/ b/ </ a/ </ b/ +/ tunit/ ,/ 其中/ ,/ a/ 和/ b/ 都/ 是/ 时间/ 点/ ,/ “/ +/ ”/ 是/ 延迟/ 算子/ ,/ unit/ 为/ 任意/ 时间/ 单位/ ./ 交互/ 作为/ 一个/ 非常/ 重要/ 的/ 概念/ ,/ 从/ 它/ 出发/ 的/ 关联/ 有/ 3/ 个/ ,/ 因此/ ,/ 我们/ 将/ 交互/ 定义/ 为/ 一个/ 四元组/ (/ 其中/ 一元/ 为/ 交互/ 名称/ )/ ,/ 其/ 具体/ 定义/ 见/ 定义/ 5/ ./ Interaction/ ·/ ·/ =/ 〈/ Int/ ,/ Sender/ ,/ Receiver/ ,/ Content/ 〉/ ,/ 其中/ ,/ 定义/ 5/ ./ 交互/ (/ Interaction/ )/ ./ Int/ 是/ 交互/ 的/ 名称/ ./ Sender/ 是/ 发起方/ ./ Receiver/ 是/ 接收/ 方/ ./ Content/ 是/ 发送/ 方/ 和/ 接收/ 方/ 共享/ 的/ 现象/ ./ 3/ 多/ 形态/ 时间/ 需求/ 建模/ 过程/ 遵循/ 图/ 1/ 给出/ 的/ 多/ 形态/ 时间/ 需求/ 模型/ ,/ 我们/ 定义/ 了/ 一个多/ 形态/ 时间/ 需求/ 建模/ 过程/ ,/ 如图/ 3/ 所示/ ./ 它/ 包含/ 4/ 大/ 步骤/ ,/ 即/ 为/ 每个/ 问题/ 领域/ 进行/ 时间/ 建模/ ,/ 确定/ 时钟/ 的/ 约束/ 关系/ ,/ 构建/ 时间/ 点/ 之间/ 的/ 定量/ 关系/ 和/ 抽取/ 时间/ 需求/ 规约/ ./ 下面/ 介绍/ 具体步骤/ ./ Page53/ ./ 1/ 问题/ 领域/ 的/ 时间/ 建模/ 本/ 步骤/ 的/ 输入/ 是/ 问题/ 图/ [/ 13/ ]/ ,/ 包含/ 所有/ 的/ 问题/ 领域/ 和/ 交互/ ,/ 输出/ 为/ 带有/ 时钟/ 的/ 问题/ 图/ ./ 根据/ 时钟/ 的/ 定义/ ,/ 我们/ 设计/ 如下/ 4/ 个子/ 步骤/ 来/ 完成/ :/ (/ 1/ )/ 定义/ 使用/ 时钟/ 这/ 一步/ 首先/ 检查/ 是否/ 有/ 现成/ 的/ 时钟/ 可用/ ,/ 若/ 无/ ,/ 考虑/ 从/ 如下/ 几个/ 方面/ 定义新/ 的/ 时钟/ :/ 时钟/ 类型/ (/ 是/ 精密/ 时钟/ 还是/ 逻辑/ 时钟/ )/ 、/ 时间/ 单位/ 和/ 可选/ 特性/ (/ 包括/ 分辨率/ 、/ 最大值/ 、/ 初始值/ )/ 等/ ./ 对于/ 问题/ 图中/ 的/ 任一/ 问题/ 领域/ ,/ 其/ 任一/ 连续/ 属性/ 都/ 可以/ 考虑/ 作为/ 一个/ 逻辑/ 时钟/ ,/ 比如/ 本文/ 案例/ 中/ 使用/ 曲轴/ 角度/ 作为/ 一个/ 时钟/ ,/ 其/ 角度/ 的/ 任一/ 取值/ 都/ 是/ 该/ 时钟/ 的/ 一个/ 时间/ 点/ ./ (/ 2/ )/ 识别/ 时钟/ 时间/ 点/ 集合/ 由/ 时钟/ 的/ 定义/ 知/ ,/ 上/ 一步/ 定义/ 的/ 时钟/ ,/ 其能/ 识别/ 的/ 时间/ 点/ 是/ 与/ 这个/ 问题/ 领域/ 相关/ 的/ 瞬时/ 交互/ 发生/ 的/ 时刻/ ,/ 或者/ 该/ 时钟/ 对应/ 连续/ 属性/ 的/ 一个/ 取值/ ./ 需要/ 注意/ 的/ 是/ ,/ 所有/ 的/ 时间/ 点/ 都/ 为/ 瞬间/ 发生/ ,/ 应该/ 对应/ 到/ 瞬时/ 交互/ ,/ 所以/ 要/ 先/ 对/ 问题/ 图中/ 的/ 持续/ 交互/ 作/ 预处理/ ,/ 将/ 它们/ 转换/ 为/ 瞬时/ 交互/ ./ 由于/ 一个/ 持续/ 交互/ 可以/ 分为/ 很多/ 个/ 持续/ 交互/ ,/ 每个/ 持续/ 交互/ 又/ 可以/ 由/ 开始/ 瞬时/ 交互/ 和/ 结束/ 瞬时/ 交互/ 表示/ ,/ 因此/ ,/ 一个/ 持续/ 交互/ 可以/ 转换/ 为/ 多个/ 瞬时/ 交互/ ./ (/ 3/ )/ 识别/ 时间/ 点/ 定性/ 关系/ 对于/ (/ 2/ )/ 中/ 识别/ 出/ 的/ 时间/ 点/ 集合/ ,/ 需要/ 确定/ 它们/ 之间/ 的/ 关系/ ,/ 这些/ 关系/ 包括/ 第/ 2/ 节中/ 介绍/ 的/ 先于/ (/ / )/ 、/ 严格/ 先于/ (/ </ )/ 和/ 同时/ 发生/ (/ ≡/ )/ ./ 这/ 3/ 种/ 关系/ 都/ 具有/ 传递性/ ,/ 也就是说/ 满足/ 如下/ 性质/ :/ 点/ 之间/ 的/ 关系/ ./ 其中/ a/ ,/ b/ 为/ 时间/ 点/ ,/ R/ 可以/ 为/ </ ,/ / 或者/ ≡/ ./ 据此/ ,/ 确定/ 时间/ 点/ 之间/ 的/ 关系/ 可以/ 分为/ 两步/ :/ ①/ 确定/ 具有/ 明确/ 关系/ 的/ 时间/ 点/ ./ ②/ 根据/ 传递性/ 采用/ 推理机/ 推理/ 未/ 明确/ 的/ 时间/ (/ 4/ )/ 画出/ 时间/ 点图/ 经过/ 上述/ 3/ 个/ 步骤/ ,/ 得到/ 时钟/ 的/ 6/ 元组/ 定义/ ,/ 将/ 时钟/ 的/ 时间/ 点/ 和/ 时间/ 点/ 之间/ 的/ 关系/ 体现/ 在/ 图形/ 上/ ,/ 就/ 得到/ 了/ 其/ 时间/ 点图/ ./ 对于/ 问题/ 图中/ 的/ 任一/ 问题/ 领域/ ,/ 重复/ 步骤/ (/ 1/ )/ ~/ (/ 4/ )/ ,/ 可以/ 得到/ 该/ 问题/ 领域/ 使用/ (/ 或者/ 参考/ )/ 的/ 时钟/ ,/ 我们/ 在/ 问题/ 图中/ 引入/ 一个/ 时钟/ 符号/ (/ )/ ,/ 其中/ 的/ 文字/ 表示/ 时钟/ 名字/ ./ 将/ 该/ 符号/ 放在/ 问题/ 领域/ 之上/ ,/ 表示/ 该/ 领域/ 使用/ 的/ 是/ 该/ 时钟/ ,/ 由此/ 得到/ 带有/ 时钟/ 的/ 问题/ 图/ ./ 3.2/ 时钟/ 约束/ 关系/ 确定/ 上/ 一步/ 得到/ 了/ 多个/ 不同/ 时钟/ ,/ 这些/ 时钟/ 并/ 不是/ 以有/ 很/ 多种/ ,/ 比较/ 常用/ 的/ 有/ :/ 孤立/ 存在/ 的/ ,/ 它们/ 共存/ 在于/ 一个/ 系统/ 之中/ ,/ 因此/ ,/ 它们/ 必然/ 存在/ 着/ 某种/ 关系/ ./ 根据/ 文献/ [/ 11/ ]/ ,/ 其/ 时钟/ 约束/ 关系/ 可以/ 分为/ 两种/ :/ (/ 1/ )/ 基于/ 同时/ 发生/ 关系/ (/ ≡/ )/ 的/ 时钟/ 关系/ ,/ 它/ 可/ 等价关系/ Equal/ (/ A/ ,/ B/ )/ ,/ 时钟/ A/ 与/ B/ 是/ 等价/ 的/ ./ 子/ 时钟/ AisFinerThanB/ ,/ 表示/ B/ 是/ A/ 的/ 一个/ 子/ 时钟/ ./ 它/ 又/ 包含/ 好/ 多种/ ,/ 前/ 一章/ 介绍/ 的/ filteredBy/ 算子/ 也/ 是/ 其中/ 的/ 一种/ ./ (/ 2/ )/ 基于/ 优先/ 关系/ (/ / )/ 的/ 时钟/ 关系/ ,/ 它/ 可以/ 有/ 很/ 多种/ ,/ 比较/ 常用/ 的/ 有/ :/ 周期性/ BisPeriodicOnA/ ,/ 表示/ 时钟/ B/ 是/ A/ 的/ 弱子/ 时钟/ 是子/ 时钟/ 的/ 变体/ ,/ 将子/ 时钟/ 时间/ 点/ 之/ 的/ 交互/ 表述/ ./ 某些/ 时间/ 点/ 的/ 周期性/ 表示/ ./ 间/ ≡/ 关系/ 换/ 为/ / 即可/ ./ 在/ 文献/ [/ 11/ ]/ 还/ 提出/ 很多/ 不同/ 的/ 时钟/ 约束/ 关系/ ,/ 详细/ 内容/ 请参阅/ 文献/ [/ 11/ ]/ ./ 对于/ 任意/ 两个/ 时钟/ ,/ 先看/ 它们/ 之间/ 满足/ 什么/ 关系/ ,/ 然后/ 采用/ 上述/ 关系/ 进行/ 描述/ ./ 通过/ 这/ 一步/ ,/ 我们/ 得到/ 时钟/ 约束/ 关系/ 集合/ ./ 3.3/ 时间/ 点/ 之间/ 的/ 定量/ 约束/ 除了/ 定性/ 关系/ 之外/ ,/ 还要/ 确定/ 时间/ 点/ 之间/ 的/ 定量/ 关系/ ,/ 也/ 就是/ 时间差/ ,/ 这个/ 时间差/ 的/ 时间/ 单位/ 为/ 其/ 参考/ 时钟/ 的/ 时间/ 单位/ ./ 束有/ 3/ 种/ 表达方式/ :/ 间点/ b/ 之后/ t/ 单位/ 时间/ 内/ 发生/ ./ t/ 单位/ 时间/ 点上/ 发生/ ./ 之后/ t/ 单位/ 时间/ 之后/ 发生/ ./ 3.4/ 需求/ 规约/ 抽取/ 通过/ 前面/ 3/ 步/ ,/ 我们/ 得到/ 时间/ 需求/ 描述/ ,/ 包括/ 软件/ 与其/ 交互/ 环境/ 发生/ 什么样/ 的/ 交互/ ,/ 这些/ 交互/ 之间/ 存在/ 什么样/ 的/ 时间/ 约束/ ./ 一般来说/ ,/ 需求/ 描述/ 了/ 对/ 环境/ 现象/ 的/ 期望/ 关系/ ,/ 而/ 软件/ 需求/ 工程/ 的/ 目的/ 是/ 要/ 得到/ 需求/ 规约/ ,/ 用来/ 描述/ 软件/ 在/ 环境/ 中/ 的/ 期望/ 行为/ ./ 为了/ 成为/ 一条/ 需求/ 规约/ ,/ 一个/ 需求/ 必须/ 遵守/ 至少/ 如下/ 3/ 条/ 规则/ [/ 14/ ]/ :/ 规约/ 全部/ 存在/ 于/ 机器/ 和/ 环境/ 的/ 接口/ ./ 时间差/ 我们/ 采用/ 时差/ 算子/ (/ -/ )/ 来/ 表示/ ,/ 相关/ 约/ (/ 1/ )/ a/ -/ b/ </ (/ / )/ tunit/ 表示/ 时间/ 点/ a/ 必须/ 在/ 时/ (/ 2/ )/ a/ -/ b/ =/ tunit/ 表示/ 时间/ 点/ a/ 在/ 时间/ 点/ b/ 之后/ (/ 3/ )/ a/ -/ b/ >/ tunit/ 表示/ 时间/ 点/ a/ 必须/ 在/ 时间/ 点/ b/ (/ 1/ )/ 需求/ 提到/ 的/ 环境/ 现象/ 都/ 要/ 和/ 机器/ 共享/ ,/ 即/ (/ 2/ )/ 所有/ 要/ 约束/ 的/ 现象/ 都/ 要/ 直接/ 由/ 机器/ 控制/ ./ (/ 3/ )/ 所有/ 期望/ 对/ 交互/ 的/ 约束/ 必须/ 用/ 之前/ 发生/ 过/ Page6/ 从/ 问题/ 图上/ 可以/ 看出/ ,/ 我们/ 的/ 交互/ 在/ 软件/ 和/ 环境/ 的/ 接口/ 上/ ,/ 且/ 由/ 软件/ 接收/ 或/ 发起/ ,/ 因此/ ,/ 条件/ (/ 1/ )/ 和/ (/ 2/ )/ 肯定/ 可以/ 满足/ ./ 为了/ 满足/ (/ 3/ )/ ,/ 还/ 必须/ 要/ 知道/ 这些/ 交互/ 的/ 先后顺序/ 及/ 相关/ 约束/ ./ 本文/ 需求/ 规约/ 里面/ 涉及/ 到/ 持续/ 交互/ ,/ 为了/ 清晰/ 起/ 见/ ,/ 我们/ 将/ 需求/ 规约/ 分为/ 两层/ 表示/ :/ 第/ 1/ 层/ 是/ 整体/ 规约/ ,/ 表明/ 在/ 问题/ 图中/ 所有/ 交互/ (/ 包括/ 持续/ 交互/ 和/ 瞬时/ 交互/ )/ 的/ 关系/ ,/ 第/ 2/ 层/ 是/ 对/ 第/ 1/ 层中/ 涉及/ 到/ 的/ 持续/ 交互/ 的/ 规约/ 表示/ ./ 整体/ 规约/ 采用/ 顺序/ 流/ 来/ 表示/ ,/ 顺序/ 流由/ 交互/ 关系/ 确定/ ,/ 交互/ 关系/ 有/ 两种/ ,/ 一种/ 是/ 瞬时/ 交互/ 与/ 瞬时/ 交互/ 的/ 关系/ ,/ 跟/ 时间/ 点/ 关系/ 相同/ ,/ 第二种/ 是/ 瞬时/ 交互/ 与/ 持续/ 交互/ 的/ 关系/ ,/ 持续/ 交互/ 可以/ 简化/ 为/ 开始/ 瞬时/ 交互/ ,/ 这样/ 就/ 将/ 持续/ 交互/ 与/ 瞬时/ 交互/ 关系/ 转化/ 为/ 瞬时/ 交互/ 与/ 瞬时/ 交互/ 间/ 关系/ 了/ ./ 据此/ ,/ 将/ 整体/ 规约/ 定义/ 为/ 一个二元/ 组/ ,/ 其/ 具体/ 定义/ 见/ 定义/ 6/ ./ 定义/ 6/ ./ 整体/ 规约/ (/ OverallSpec/ )/ ./ 其中/ ,/ IS/ =/ {/ int1/ ,/ int2/ ,/ …/ ,/ intn/ }/ 是/ 所有/ 交互/ 的/ 集合/ ./ </ 是/ 定义/ 在/ IS/ 上/ 的/ 严格/ 先于/ 关系/ 集/ ./ 这样/ 的/ 整体/ 规约/ 也/ 可以/ 用/ 一个/ 图形/ 来/ 表示/ ,/ 圆圈/ 表示/ 交互/ ,/ 箭头/ 表示/ 交互/ 发生/ 的/ 严格/ 先于/ 关系/ ,/ 阴影/ 圆圈/ 表示/ 开始/ ,/ 双圈/ (/ 中间/ 的/ 圆圈/ 有/ 阴影/ )/ 表示/ 结束/ ./ 所有/ 交互/ ./ 整体/ 规约/ 可以/ 采用/ 如下/ 步骤/ 获取/ :/ (/ 1/ )/ 获取/ 所有/ 的/ 上层/ 交互/ ,/ 包括/ 在/ 问题/ 图中/ 的/ (/ 2/ )/ 对于/ 瞬时/ 交互/ ,/ 根据/ 3.1/ ~/ 3.3/ 节/ 得到/ 的/ 对应/ 时间/ 点/ 关系/ 直接/ 排序/ ./ (/ 3/ )/ 对于/ 持续/ 交互/ ,/ 在/ 3.1/ ~/ 3.3/ 节/ 得到/ 的/ 关系/ 基础/ 上/ ,/ 使用/ 它/ 的/ 开始/ 瞬时/ 交互/ 替换/ 该/ 持续/ 交互/ ,/ 然后/ 根据/ 传递性/ 、/ 时钟/ 约束/ 关系/ 推导/ 出该/ 持续/ 交互/ 与/ 其它/ 瞬时/ 交互/ 对应/ 时间/ 点/ 的/ 关系/ ./ 关于/ 持续/ 交互/ 规约/ ,/ 有/ 两层/ 意思/ 需要/ 表达/ ./ 首先/ 要/ 表达/ 持续/ 交互/ 的/ 整个/ 流程/ ,/ 包括/ 从/ 开始/ 瞬时/ 交互/ 到/ 结束/ 瞬时/ 交互/ 的/ 所有/ 交互/ 及其/ 关系/ ,/ 它/ 不/ 因/ 有无/ 软件/ 观察/ 而/ 开始/ 或/ 结束/ ,/ 一直/ 按照/ 自己/ 的/ 规律/ 运行/ ./ 另/ 一个/ 需要/ 表达/ 的/ 是/ 软件/ 需要/ 观察/ 到/ 的/ 从/ 开始/ 交互/ 到/ 结束/ 交互/ 过程/ ./ 由此/ ,/ 用/ 一个/ 四元组/ 来/ 定义/ 持续/ 交互/ 规约/ ,/ 其/ 具体/ 定义/ 见/ 定义/ 7/ ./ 定义/ 7/ ./ 持续/ 交互/ 规约/ (/ DurationInstantspec/ )/ ./ DurationInstantspec/ ·/ ·/ =/ 〈/ IS/ ,/ </ ,/ OI/ ,/ OE/ 〉/ ,/ 其中/ ,/ 有/ 瞬时/ 交互/ inti/ (/ 1/ / i/ / n/ )/ 的/ 集合/ ./ IS/ =/ {/ int1/ ,/ int2/ ,/ …/ ,/ intn/ }/ 是/ 这个/ 持续/ 交互/ 的/ 所/ </ 是/ 定义/ 在/ IS/ 上/ 的/ 严格/ 先于/ 关系/ 集/ ./ OI/ 是/ 软件/ 所/ 要/ 观察/ 的/ 开始/ 瞬时/ 交互/ ./ OE/ 是/ 软件/ 所/ 要/ 观察/ 的/ 结束/ 瞬时/ 交互/ ./ 这样/ 的/ 持续/ 交互/ 规约/ 也/ 可以/ 用/ 一个/ 图形/ 来/ 表示/ ,/ 其/ 图示/ 如图/ 4/ 所示/ ./ 圆圈/ 表示/ 交互/ ,/ 箭头/ 表示/ 交互/ 流/ ,/ 阴影/ 圆圈/ 表示/ 观察/ 开始/ 交互/ ,/ 双圈/ (/ 中间/ 的/ 圆圈/ 有/ 阴影/ )/ 表示/ 观察/ 结束/ 交互/ ./ 图/ 4/ 的/ 含义/ 如下/ :/ a/ 为/ 一个/ 持续/ 交互/ ,/ 它/ 由/ 瞬时/ 交互/ b/ 开始/ ,/ 经/ c/ 到/ d/ 结束/ ,/ 软件/ 关注/ 的/ 是/ 开始/ 瞬时/ 交互/ b/ ,/ 当/ 观察/ 到/ 瞬时/ 交互/ c/ 发生/ 后/ ,/ 软件/ 将/ 不再/ 关注/ 交互/ a/ 了/ ./ 因此/ ,/ c/ 作为/ 一个/ 观察/ 结束/ 瞬时/ 交互/ 存在/ 于/ a/ 中/ ./ 根据/ 上面/ 的/ 定义/ 知/ ,/ 可以/ 分/ 两步/ 取得/ 持续/ 交互/ 的/ 规约/ :/ (/ 1/ )/ 确定/ 持续/ 交互/ 的/ 所有/ 的/ 瞬时/ 交互/ 及其/ 顺序/ 关系/ ./ (/ 2/ )/ 确定/ 软件/ 观察/ 的/ 开始/ 瞬时/ 交互/ 和/ 结束/ 瞬时/ 交互/ ./ 一般来说/ ,/ 观察/ 开始/ 瞬时/ 交互/ 就是/ 该/ 持续/ 交互/ 的/ 开始/ 瞬时/ 交互/ ./ 4/ 案例/ 研究/ 4.1/ 汽车/ 应用领域/ 问题/ 描述/ 本文/ 使用/ 汽车/ 领域/ 中/ 的/ 点火/ 系统/ 和/ 爆震/ 控制系统/ 来/ 进行/ 方法/ 验证/ ./ 点火/ 系统/ 使用/ 4/ 冲程/ 发动机/ ,/ 它/ 包括/ 4/ 个/ 阶段/ :/ 进气/ 、/ 压缩/ 、/ 燃烧/ 膨胀/ 和/ 排气/ ./ 这些/ 阶段/ 都/ 是/ 曲轴/ 驱动/ 的/ ,/ 可以/ 由/ 曲轴/ 转动/ 的/ 角度/ 来/ 衡量/ ./ 在/ 发动机/ 点火/ 时/ ,/ 由于/ 点燃/ 火花塞/ 需要/ 一定/ 的/ 延迟/ 才能/ 在/ 燃烧室/ 产生/ 火花/ ,/ 点/ 火花/ 必须/ 在/ 理论/ 点火/ 点/ (/ TIDC/ )/ 之前/ 产生/ ./ 在/ 压缩/ 阶段/ ,/ 在/ 点火/ 确定/ 点/ (/ IgnitionDecisionPoint/ ,/ IDP/ )/ 之后/ ,/ 点火/ 系统/ 要/ 决定/ 产生/ 火花/ 的/ 最佳/ 角度/ ./ 具体/ 的/ 过程/ 涉及/ 到/ 很多/ 点火/ 点/ ,/ 如图/ 5/ 所示/ ./ 产生/ 电火花/ 的/ 简化/ 流程/ 如下/ :/ 根据/ 当前/ 空气/ // 汽油/ 比率/ 和/ 当前/ 发动机/ 的/ 速度/ ,/ 查询/ 点火/ 控制/ 曲线图/ (/ MAP/ )/ 得到/ 基本/ 点火/ 提前/ 角/ Page7/ (/ BIAA/ )/ ./ 然后/ 修正/ BIAA/ 数据/ ,/ 得到/ 修正/ 点火/ 提前/ 角/ (/ CIAA/ )/ ./ 修正/ 涉及/ 到/ 很多/ 因素/ ,/ 比如/ ,/ 缸/ 温/ 、/ 缸/ 压/ 、/ 爆震/ 等/ ./ 本文/ 为了/ 简化/ ,/ 只/ 考虑/ 爆震/ 因素/ ./ 修正/ 会/ 带来/ 两个/ 结果/ :/ CIAA/ 和/ 爆震/ 窗/ (/ KnockAcquisitionWindow/ ,/ KAW/ )/ 信息/ ./ 这组/ 行为/ 序列/ 是/ 由/ 点火/ 确定/ 点/ (/ IDP/ )/ 触发/ 的/ ./ 图/ 5/ 中/ 还有/ 最大/ 点火/ 提前/ 角/ (/ MIAA/ )/ ,/ 它/ 对应/ 最坏/ 的/ 情况/ (/ 最大/ 的/ 引擎/ 速度/ 和/ 最大/ 允许/ 提前/ 角/ )/ ./ 爆震/ 指得/ 是/ 在/ 发动机/ 燃烧/ 阶段/ 在/ 设计/ 的/ 点火/ 角/ 之前/ ,/ 由于/ 种种原因/ 导致/ 燃气/ 混合物/ 自行/ 点火/ 燃烧/ ,/ 此时/ ,/ 由于/ 燃烧/ 所/ 产生/ 的/ 巨大/ 冲击力/ 与/ 活塞/ 运动/ 的/ 方向/ 相反/ 而/ 引起/ 发动机/ 震动/ 现象/ ./ 这种/ 现象/ 会/ 导致/ 发动机/ 动力/ 下降/ 、/ 油耗/ 增加/ 、/ 噪音/ 加大/ 等/ ,/ 可能/ 会/ 对/ 气缸/ 造成/ 不可逆转/ 的/ 损害/ ./ 爆震/ 控制系统/ 检测/ 和/ 修正/ 这种/ 现象/ ./ 它/ 包含/ 一个/ 或/ 多个/ 爆震/ 传感器/ 和/ 一个/ 控制器/ ,/ 获得/ 和/ 计算/ 修正/ ./ 爆震/ 信号/ 的/ 获得/ 在/ 爆震/ 窗/ (/ KAW/ -/ KnockAcquisitionWindow/ )/ 期间/ 执行/ ./ 开始/ 点/ (/ KAW/ -/ Start/ )/ 和/ 持续时间/ (/ KAW/ -/ Duration/ )/ 可能/ 有/ 变化/ ,/ 变化/ 依赖于/ 上/ 一次/ 燃烧/ 阶段/ 测量/ 得到/ 的/ 爆震/ 强度/ (/ KnockIntensity/ ,/ KI/ )/ ./ KI/ 值/ 也/ 将/ 用于/ 调整/ 点火/ 提前/ 角/ ./ 爆震/ 过程/ 由/ 压缩/ 阶段/ 的/ ITDP/ 触发/ ,/ 其/ 具体/ 过程/ 如下/ :/ 根据/ 上次/ 爆震/ 强度/ KI/ 修正/ 之后/ 得到/ 本次/ KAW/ ,/ 等待/ 延迟/ 的/ KAW/ -/ Start/ ,/ 然后/ 执行/ 爆震/ 信号/ 获取/ (/ KSA/ )/ 活动/ (/ 由/ KWB/ 和/ KWE/ 来/ 表示/ 其/ 开始/ 和/ 结束/ )/ ,/ KSA/ 获取/ 填充/ 到/ 一个/ Buffer/ 里面/ ,/ 然后/ 再/ 由/ Filtering/ 读取/ ,/ Filtering/ 的/ 最后/ 结果/ 就是/ KI/ ./ 更/ 多/ 关于/ 汽车/ 点火/ 系统/ 和/ 爆震/ 控制系统/ 的/ 细节/ ,/ 请/ 参见/ 文献/ [/ 15/ ]/ ./ 4.2/ 时间/ 需求/ 建模/ 4.2/ ./ 1/ 问题/ 图及/ 交互/ 预处理/ 根据上述/ 的/ 汽车/ 点火/ 系统/ (/ IgnitionSystem/ ,/ IS/ )/ 的/ 陈述/ ,/ 得到/ 其/ 问题/ 图/ ,/ 如图/ 6/ 所示/ ./ 其/ 含义/ 为/ :/ IS/ 为/ 要/ 创建/ 的/ 系统/ ;/ IS/ 将要/ 与/ 气缸/ (/ Cylinder/ ,/ CR/ )/ 、/ 爆震/ 控制系统/ (/ KnockSystem/ ,/ KS/ )/ 、/ 凸轮轴/ (/ Camshaft/ ,/ CAS/ )/ 、/ 曲轴/ (/ Crankshaft/ ,/ CRS/ )/ 和/ 修正/ (/ Correction/ ,/ CN/ )/ 这些/ 问题/ 领域/ 进行/ 交互/ ;/ IS/ 的/ 需求/ 就是/ 要/ 确定/ 点火/ 的/ 最佳时机/ (/ deter/ -/ minethebestsparktiming/ )/ ;/ IS/ 与/ 问题/ 领域/ 的/ 交互/ (/ 包括/ 需求/ 引用/ 和/ 约束/ )/ ,/ 如表/ 2/ 所示/ ./ 将/ 其中/ 的/ 持续/ 交互/ 转换/ 为/ 瞬时/ 交互/ ,/ 如表/ 3/ 所示/ ./ 交互/ 名/ 发起方/ 接收/ 方/ 内容/ 交互/ 类型/ int1CRISSpeed/ ,/ AFInstantint2ISCRsparkInstantint3KSISKIInstantint4CRSISangleDurationint5CASISangleDurationint6CNISKAWInstantint7CRISCycleDurationDurationInteractionint4int5int7/ 图/ 6/ 中/ 的/ 问题/ 领域/ 爆震/ 控制系统/ (/ KnockSystem/ ,/ KS/ )/ 指得/ 是/ 图/ 7/ 中要/ 开发/ 的/ 爆震/ 控制系统/ ./ 图/ 7/ 是/ 爆震/ 控制系统/ 的/ 问题/ 图/ ,/ 其中/ ,/ KS/ 为/ 要/ 创建/ 的/ 系统/ ;/ KS/ 将要/ 与/ 气缸/ (/ Cylinder/ ,/ CR/ )/ 、/ 爆震/ 传感器/ (/ KnockSensor/ ,/ KE/ )/ 、/ 曲轴/ (/ Crankshaft/ ,/ CRS/ )/ 和/ 修正/ (/ Correction/ ,/ CN/ )/ 这些/ 问题/ 领域/ 进行/ 交互/ ;/ KS/ 的/ 需求/ 就是/ 要/ 提供/ 爆震/ 强度/ (/ provideknockintensity/ )/ ./ Page8/ 图/ 6/ 汽车/ 点火/ 系统/ 问题/ 图图/ 7/ 爆震/ 系统/ 问题/ 图/ KS/ 与/ 问题/ 领域/ 的/ 交互/ (/ 包括/ 需求/ 引用/ 和/ 约束/ )/ ,/ 如表/ 4/ 所示/ ,/ 将/ 其中/ 的/ 持续/ 交互/ 转换/ 为/ 瞬时/ 交互/ ,/ 如表/ 5/ 所示/ ./ 交互/ 名/ 发起方/ 接收/ 方/ 内容/ 交互/ 类型/ int26KSCRKSAInstantint27KSCRFilteringDurationint28KSCRKIInstantint29KEKSsignalInstantint10CRSISITDCInstantint30KSCNKAWDurationint31CRKSKIInstant/ 表/ 5/ 爆震/ 控制系统/ 持续/ 交互/ 转换/ 为/ 瞬时/ 交互/ DurationInteractionInstantInteractionContent4/ ./ 2.2/ 问题/ 领域/ 的/ 时间/ 建模/ 对于/ 问题/ 图中/ 的/ 每个/ 问题/ 领域/ ,/ 都/ 要/ 对/ 其/ 进行/ 时间/ 建模/ ./ 接下来/ 的/ 步骤/ (/ 1/ )/ ~/ (/ 3/ )/ 详细/ 建模/ 了/ 点火/ 系统/ 的/ 问题/ 领域/ ,/ (/ 4/ )/ 中/ 建模/ 了/ 爆震/ 控制系统/ 的/ 问题/ Page9/ 领域/ ./ 在/ 开始/ 之前/ ,/ 首先/ 为/ 物理/ 时间/ 定义/ 一个/ 理想/ 时钟/ idealClk/ ,/ 它/ 是/ 一个/ 精密/ 时钟/ ,/ 可以/ 被/ 任意/ 时钟/ 引用/ ./ (/ 1/ )/ 凸轮轴/ (/ Camshaft/ )/ 凸轮轴/ 是/ 直接/ 驱动/ 摇臂/ 和/ 气门/ 的/ 推杆/ 装置/ ,/ 通过/ 它/ 可以/ 控制/ 节气门/ ,/ 由此/ 控制/ 空气/ 进入/ 发动机/ ./ 在/ 4/ 冲程/ 发动机/ 中/ ,/ 一个/ 循环/ 它/ 转过/ 360/ °/ ,/ 粗略/ 来讲/ ,/ 从/ 0/ °/ 到/ 90/ °/ 为/ 发动机/ 进气/ 阶段/ ,/ 从/ 90/ °/ 到/ 180/ °/ 为/ 压缩/ 阶段/ ,/ 从/ 180/ °/ 到/ 270/ °/ 为/ 燃烧/ 阶段/ ,/ 从/ 270/ °/ 到/ 360/ °/ 为/ 排气/ 阶段/ ./ 凸轮轴/ 的/ 角度/ 可以/ 定义/ 为/ 一个/ 逻辑/ 时钟/ camClk/ ,/ 其/ 每个/ 角度/ 的/ 位置/ 可以/ 作为/ 这个/ 时钟/ 的/ 一个/ 时间/ 点/ ./ 在/ 时钟/ camClk/ 中/ ,/ 其/ 时间/ 单位/ 可以/ 定义/ 为/ °/ CAM/ ,/ 分辨率/ 为/ (/ 比如/ )/ 0.5/ ,/ 初始值/ 为/ 0/ ,/ 最大值/ 为/ 360/ ,/ 所有/ 的/ 这些/ 值/ 的/ 单位/ 都/ 是/ °/ CAM/ ./ 这个/ 时钟/ 的/ 时间/ 点/ 可以/ 由/ 时钟/ 变量/ 的/ 取值/ 来/ 标识/ ./ 根据上述/ 描述/ 知道/ ,/ 需要/ 标识/ 的/ 时间/ 点有/ 0/ °/ CAM/ ,/ 90/ °/ CAM/ ,/ 180/ °/ CAM/ ,/ 270/ °/ CAM/ ,/ 360/ °/ CAM/ ,/ 其中/ 0/ °/ CAM/ 和/ 360/ °/ CAM/ 重叠/ ./ 也/ 可以/ 由/ 对应/ 的/ 交互/ 发生/ 的/ 时间/ 点来/ 表示/ :/ @/ tint13/ ,/ @/ tint14/ ,/ @/ tint15/ ,/ @/ tint16/ ,/ @/ tint13/ ,/ 其中/ @/ tint13/ 表示/ int13/ 发生/ 的/ 时间/ 点/ ,/ @/ tint13/ 表示/ 新一轮/ int13/ 发生/ 的/ 时间/ 点/ ,/ 其它/ 的/ 表示/ 类似/ ./ 时钟/ camClk/ 的/ 时间/ 点图/ 如图/ 8/ 所示/ ./ (/ 2/ )/ 曲轴/ (/ Crankshaft/ )/ 曲轴/ 是/ 引擎/ 的/ 主要/ 旋转/ 机件/ ,/ 装/ 上/ 连杆/ 后/ ,/ 可/ 将/ 连杆/ 的/ 上下/ (/ 往复/ )/ 运动/ 变成/ 循环/ (/ 旋转/ )/ 运动/ ,/ 曲轴/ 的/ 旋转/ 是/ 发动机/ 的/ 动力源/ ./ 在/ 4/ 冲程/ 发动机/ 中/ ,/ 一个/ 循环/ 它/ 转过/ 2/ 圈/ ,/ 即/ 720/ °/ ./ 曲轴/ 转动/ 的/ 角度/ 可以/ 定义/ 为/ 一个/ 逻辑/ 时钟/ crkClk/ ,/ 其/ 每个/ 角度/ 的/ 位置/ 可以/ 作为/ 这个/ 时钟/ 的/ 一个/ 时间/ 点/ ./ 在/ 时钟/ crkClk/ 中/ ,/ 其/ 时间/ 单位/ 可以/ 定义/ 为/ °/ CRK/ ,/ 分辨率/ 为/ (/ 比如/ )/ 0.5/ ,/ 初始值/ 为/ 0/ ,/ 最大值/ 为/ 720/ ,/ 所有/ 的/ 这些/ 值/ 的/ 单位/ 都/ 是/ °/ CRK/ ./ 这个/ 时钟/ 的/ 时间/ 点/ 可以/ 由/ 时钟/ 变量/ 的/ 取值/ 来/ 标识/ ./ 根据上述/ 描述/ 知道/ ,/ 需要/ 标识/ 的/ 时间/ 点有/ 0/ °/ CRK/ ,/ 180/ °/ CRK/ ,/ 360/ °/ CRK/ ,/ 540/ °/ CRK/ ,/ 720/ °/ CRK/ ,/ 其中/ 0/ °/ CRK/ 和/ 720/ °/ CRK/ 重叠/ ./ 这些/ 时间/ 点/ 也/ 可以/ 由/ 一些/ 特殊/ 的/ 交互/ 发生/ 的/ 时刻/ 表示/ ,/ 这/ 两种/ 表示/ 之间/ 的/ 对应/ 关系/ 如表/ 6/ 所示/ ./ 0180360540720/ @/ int8/ @/ int9/ @/ int10/ @/ int11/ @/ int7/ 时钟/ crkClk/ 的/ 时间/ 点图/ 如图/ 9/ 所示/ ./ (/ 3/ )/ 气缸/ (/ Cylinder/ )/ 和/ 爆震/ 控制系统/ (/ KS/ )/ 这/ 两者/ 的/ 时间/ 都/ 可以/ 用/ 曲轴/ 的/ 角度/ 来/ 刻画/ ,/ 所以/ 还是/ 采用/ crkClk/ 来/ 描述/ 它们/ ./ 它们/ 涉及/ 的/ 交互/ 之间/ 存在/ 着/ 一定/ 的/ 先后顺序/ 关系/ ./ 首先/ 要/ 读取/ 当前/ 曲轴/ 角度/ (/ int4/ )/ ,/ 读取/ 当前/ 空气/ // 汽油/ 比率/ 和/ 当前/ 发动机/ 的/ 速度/ (/ int1/ )/ ,/ 根据/ 爆震/ 强度/ (/ int3/ )/ 进行/ 提前/ 角/ 修正/ ,/ 得到/ 点火/ 时刻/ (/ int2/ )/ 和/ 爆震/ 窗/ (/ int6/ )/ ./ 上述/ 交互/ 之间/ 存在/ 如下/ 偏序/ 关系/ :/ 这些/ 交互/ 都/ 是/ 发生/ 在/ 压缩/ 阶段/ 的/ ,/ 存在/ 如下/ 3/ 条/ 关系/ :/ ①/ 读取/ 当前/ 空气/ // 汽油/ 比率/ 和/ 当前/ 发动机/ 的/ 速度/ (/ int1/ )/ 肯定/ 要/ 发生/ 在/ 进气/ 关闭/ Intakecloses/ (/ int19/ )/ 之后/ ,/ 所以/ 有/ ②/ 得到/ 点火/ 时刻/ int2/ 必然/ 发生/ 在/ 压缩/ 关闭/ CC/ (/ int21/ )/ 之前/ ,/ 因此/ 有/ ③/ 从/ 理论/ 上/ 来讲/ ,/ 由于/ 气缸/ 的/ 4/ 个/ 冲程/ 状态/ ,/ 在/ 气缸/ 的/ 各个/ 状态/ 交互/ 之间/ 应该/ 存在/ 着/ 这样/ 的/ 偏序/ 关系/ :/ @/ tint18/ </ @/ tint19/ </ @/ tint20/ </ @/ tint21/ </ @/ tint22/ </ @/ tint23/ </ @/ tint24/ </ @/ tint25/ 即/ 气缸/ 的/ 进气/ 开始/ IO/ (/ int18/ )/ 之后/ 是/ 进气/ 结束/ IC/ (/ int19/ )/ ,/ 然后/ 压缩/ 开始/ CO/ (/ int20/ )/ ,/ CC/ 结束/ (/ int21/ )/ ,/ 然后/ 燃烧/ 开始/ CP/ (/ int22/ )/ ,/ 结束/ CL/ (/ int23/ )/ ,/ 最后/ 排气/ 开始/ EO/ (/ int24/ )/ 和/ 结束/ EC/ (/ int25/ )/ ./ 但是/ 实际上/ ,/ 气缸/ 的/ EC/ (/ int25/ )/ 在/ IO/ (/ int18/ )/ 之后/ 发生/ ,/ CO/ (/ int20/ )/ 在/ IC/ (/ int21/ )/ 之前/ 发生/ ,/ CC/ (/ int21/ )/ 跟/ CP/ (/ int22/ )/ 同时/ 发生/ 且/ 发生/ 在/ ITDC/ (/ int10/ )/ ,/ EO/ (/ int24/ )/ 在/ CL/ (/ int23/ )/ 之前/ 发生/ ,/ IO/ (/ int18/ )/ 在/ EC/ (/ int25/ )/ 之前/ 发生/ ./ 因此/ ,/ 实际上/ ,/ 关系/ (/ 4/ )/ 应该/ 是/ @/ tint18/ </ @/ tint25/ </ @/ tint20/ </ @/ tint19/ </ @/ tint21/ =/ @/ tint19/ </ @/ tint24/ </ @/ tint23/ 由此/ 得到/ 其/ 时间/ 点图/ ,/ 如图/ 10/ 所示/ ./ Page10/ (/ 4/ )/ 爆震/ 控制系统/ 的/ 问题/ 领域/ 时间/ 建模/ 爆震/ 控制系统/ 的/ 问题/ 领域/ 包括/ CR/ 、/ KE/ 、/ CRS/ 和/ CN/ ,/ 这些/ 问题/ 领域/ 的/ 时间/ 都/ 可以/ 通过/ 曲轴/ 的/ 转角/ 来/ 衡量/ ,/ 所以/ ,/ 全部/ 采用/ 时钟/ crkClk/ 来/ 衡量/ ./ 它们/ 涉及/ 的/ 交互/ 之间/ 存在/ 着/ 一定/ 的/ 先后顺序/ 关系/ ./ 首先/ ,/ 由/ ITDP/ (/ int10/ )/ 触发/ 爆震/ 过程/ ,/ 然后/ 根据/ 上次/ 爆震/ 强图/ 11/ 带有/ 时钟/ 的/ 点火/ 系统/ 问题/ 图图/ 12/ 带有/ 时钟/ 的/ 爆震/ 系统/ 问题/ 图度/ KI/ (/ int31/ )/ 修正/ 之后/ 得到/ 本次/ KAW/ (/ int30/ )/ ,/ 接下来/ 执行/ 爆震/ 信号/ 获取/ (/ KSA/ )/ 活动/ (/ int26/ )/ ,/ 读取/ Filtering/ (/ int27/ )/ ,/ 最后/ 得到/ KI/ (/ int28/ )/ ./ 上述/ 交互/ 发生/ 的/ 时间/ 点/ 之间/ 存在/ 如下/ 关系/ :/ 根据/ 上面/ 建模/ 结果/ ,/ 最终/ 可以/ 得到/ 带有/ 时钟/ 的/ 点火/ 系统/ 和/ 爆震/ 系统/ 问题/ 图/ ,/ 如图/ 11/ 和/ 图/ 12/ 所示/ ./ Page114/ ./ 2.3/ 构建/ 时钟/ 约束/ 关系/ (/ 1/ )/ camClk/ 和/ crkClk/ 由于/ 凸轮轴/ 和/ 曲轴/ 是/ 机械/ 上/ 联系/ 在/ 一起/ 的/ ,/ 后者/ 比/ 前者/ 快/ 一倍/ ./ 因此/ ,/ 时钟/ camClk/ 和/ crkClk/ 紧密/ 地/ 相互依赖/ ,/ 这种/ 依赖/ 关系/ 可以/ 由/ 时钟/ 约束/ filteredBy/ 来/ 表示/ ./ 图/ 13/ 表示/ 了/ 这/ 两个/ 时钟/ 之间/ 时间/ 点/ 之间/ 的/ 关系/ ./ 图/ 13/ 时钟/ camClk/ 和/ crkClk/ 之间/ 的/ 时钟/ 约束/ 时钟/ 约束/ 显示/ camClk/ 是/ crkClk/ 的/ 一个/ 子/ 时钟/ ,/ 其中/ camClk/ 的/ 时间/ 点/ 和/ crkClk/ 的/ 每/ 两个/ 时间/ 点/ 之间/ 存在/ 同时/ 发生/ 关系/ ./ 其/ 具体/ 的/ 时钟/ 约束/ 为/ Clock/ ./ Constraint1/ :/ ClockConstraint1/ :/ 对/ camClk/ 和/ crkClk/ 的/ 约束/ camClk/ =/ crkClkfilteredByob/ (/ 10/ )/ 其中/ ,/ ob/ (/ 10/ )/ 是/ 一个/ 周期性/ 的/ 二进制/ 子/ 代表/ 1010/ …/ (/ 其实/ 也/ 就是/ 10/ 的/ 无限/ 重复/ )/ ./ 实际上/ ,/ 时间/ 点/ 之间/ 的/ 关系/ 为/ 时间/ 点/ 0.5/ ×/ (/ k/ -/ 1/ )/ mod720/ °/ CRK/ 关联/ 在/ 第/ k/ (/ k/ =/ 1/ ,/ 2/ ,/ …/ )/ 个/ crkClk/ 的/ 时间/ 点/ ./ (/ 2/ )/ crkClk/ 和/ idealClk/ 一个/ 发动机/ 的/ 最大/ 速度/ 为/ 4500/ 转/ // 分/ ,/ 而/ 一圈/ 所/ 花/ 时间/ 为/ 360/ °/ CRK/ ,/ 则/ 最大/ 的/ 发动机/ 速度/ 为/ (/ 4500/ // 60/ )/ ×/ 360/ =/ 27000/ °/ CRK/ // s/ ,/ 因此/ 有/ ClockConstraint2/ :/ 对/ crkClk/ 和/ idealClk/ 的/ 约束/ 1/ °/ CRK/ / 37/ μ/ s4/ ./ 2.4/ 构建/ 时间/ 点/ 之间/ 的/ 定量/ 约束/ (/ 1/ )/ 点火/ 系统/ 的/ 约束/ 首先/ ,/ 在/ 点火/ 系统/ 中/ ,/ 气缸/ 的/ 状态/ 和/ 曲轴/ 的/ 位置/ 之间/ 存在/ 着/ 一定/ 的/ 关系/ ,/ 因此/ 在/ 气缸/ 的/ 交互/ 和/ 曲轴/ 的/ 交互/ 发生/ 的/ 时刻/ 点/ 存在/ 着/ 定量/ 的/ 关系/ ./ 比如/ ,/ @/ tint25/ (/ exhaustcloses/ )/ 在/ OTDC/ 位置/ 出现/ 之后/ 5/ ~/ 20/ °/ CRK/ ,/ 因此/ 存在/ 如下/ 约束/ :/ 即/ 为/ @/ tint8/ +/ 5/ °/ CRK/ / @/ tint25/ / @/ tint8/ +/ 20/ °/ CRK/ (/ 6/ )/ 类似/ 地/ ,/ 可以/ 得到/ Constraint1/ :/ @/ tint18/ =/ @/ tint8/ -/ [/ 10/ ../ 16/ ]/ // // IO/ 在/ OTDC/ 前/ 10/ °/ ~/ 16/ °/ CRK/ 发生/ @/ tint19/ =/ @/ tint9/ +/ [/ 40/ ../ 60/ ]/ // // IC/ 在/ FBDC/ 后/ 40/ °/ ~/ 60/ °/ CRK/ 发生/ @/ tint24/ =/ @/ tint11/ -/ [/ 45/ ../ 60/ ]/ // // EO/ 在/ SBDC/ 前/ 45/ °/ ~/ 60/ °/ CRK/ 发生/ @/ tint25/ =/ @/ tint8/ +/ [/ 5/ ../ 20/ ]/ // // EC/ 在/ OTDC/ 后/ 5/ °/ ~/ 20/ °/ CRK/ 发生/ @/ tint23/ =/ @/ tint11/ // // CL/ 和/ SBDC/ 同时/ 发生/ @/ tint21/ =/ @/ tint22/ =/ @/ tint10/ // // CC/ 和/ CP/ 和/ ITDC/ 同时/ 发生/ 根据上述/ 关系/ 和/ 式/ (/ 5/ )/ ,/ 可以/ 推导/ 出/ 如下/ 交互/ 发生/ 的/ 时间/ 顺序/ 关系/ :/ @/ tint18/ </ @/ tint8/ </ @/ tint25/ </ @/ tint20/ </ @/ tint19/ </ @/ tint21/ =/ @/ tint22/ =/ tint10/ </ @/ tint24/ </ @/ tint23/ =/ @/ tint11/ (/ 7/ )/ 其次/ ,/ 点火/ 系统/ 的/ 一系列/ 动作/ 由/ IDP/ 触发/ ,/ 而/ IDP/ 出现/ 在/ 一个/ 固定/ 的/ 曲轴/ 角度/ ,/ 它/ 的/ 每次/ 出现/ 即/ 为/ 时钟/ crkClk/ 的/ 一个/ 时间/ 点/ ./ 而/ 最佳/ 的/ 点火/ 提前/ 角/ (/ AIAA/ )/ 的/ 位置/ 肯定/ 会/ 出现/ 在/ 最大/ 点火/ 角/ (/ MIAA/ ,/ 对应/ 着/ 最坏/ 的/ 情况/ )/ 之前/ ./ 因此/ ,/ 点火/ 控制/ 行为/ 的/ 间隔/ (/ 从/ readingspeedandAF/ (/ int1/ )/ 到/ ignitingspark/ (/ int2/ )/ )/ 必须/ 比图/ 5/ 中/ 的/ δ/ m/ (/ 从/ IDP/ 到/ MIAA/ 的/ 时间差/ )/ 要/ 小/ ./ 对/ 这个/ 间隔/ 约束/ 可以/ 描述/ 为/ Constraint2/ :/ (/ 2/ )/ 爆震/ 控制系统/ 的/ 约束/ 首先/ 考虑/ 爆震/ 窗/ ./ 每个/ 气缸/ 都/ 有/ 对/ KI/ 的/ 存储/ ,/ 因此/ ,/ 没有/ 额外/ 的/ 约束/ ./ 但是/ ,/ Buffer/ 是/ 每个/ 气缸/ 共享/ 的/ ,/ 这/ 就/ 意味着/ 每个/ 气缸/ 的/ Filtering/ 操作/ 必须/ 在/ 下/ 一个/ 气缸/ 的/ KSA/ 操作/ 开始/ 之前/ 完成/ ./ 爆震/ 窗/ (/ KAW/ )/ 在/ 55/ °/ CRK/ (/ KAWS/ )/ 之前/ 开始/ ,/ 最多/ 将/ 会/ 持续/ 55/ °/ CRK/ (/ KAWD/ )/ ./ 因此/ ,/ 在/ 最坏/ 的/ 情况/ 下/ ,/ 整个/ 操作/ 将/ 在/ 110/ °/ CRK/ 下/ 完成/ ./ 由此/ 得到/ 如下/ 约束/ :/ Constraint3/ :/ 对/ KAW/ 的/ 约束/ KAW/ ./ start/ / 55/ °/ CRKKAW/ ./ duration/ / 55/ °/ CRK/ 即/ @/ tint32/ / 55/ °/ CRK/ 接下来/ 考虑/ Filtering/ 操作/ ./ 先/ 考虑/ 单缸/ 发动机/ 的/ 情况/ ./ 在/ 爆震/ 控制/ 活动/ 中/ ,/ Buffer/ 是/ 一个/ 关键/ 的/ 资源/ ,/ 它/ 由/ KSA/ 写入/ ,/ 由/ Filtering/ 读取/ ./ 在/ k/ 次/ 循环/ 的/ Filtering/ 中/ ,/ 必须/ 在/ 下/ 一次/ 循环/ k/ +/ 1/ 的/ IDP/ 点/ 出现/ 之前/ 给出/ 爆震/ 强度/ KI/ ./ IDP/ 点/ 通常/ 是/ 一个/ 固定/ 的/ 角度/ (/ 比如/ ,/ 在/ ITDC/ 之后/ 665/ °/ ,/ 或者/ 正好/ 在/ ITDC/ 之前/ 55/ °/ )/ ./ 假设/ 给定/ 爆震/ 窗/ 开始/ 的/ 最大值/ 为/ KAWSmax/ 和/ 爆震/ 窗/ 的/ 持续/ 间隔/ 为/ KAWDmax/ ,/ 可以/ 推导/ 出/ Page12Filtering/ ./ duration/ / 665/ -/ KAWSmax/ -/ KAWDmax/ ./ 若/ KAWSmax/ =/ KAWDmax/ =/ 55/ °/ CRK/ 由此/ 可以/ 得到/ 如下/ 约束/ :/ Constraint4/ :/ 单缸/ 发动机/ 的/ Filtering/ 约束/ Filtering/ ./ duration/ / 555/ °/ CRK/ 即/ @/ tint35/ -/ @/ tint34/ / 555/ °/ CRK/ 在/ 多/ 气缸/ 的/ 情况/ 下/ ,/ 对/ Filtering/ 的/ duration/ 的/ 约束/ 也/ 就/ 更/ 严格/ ./ 交互/ (/ ITDC/ ,/ KWB/ …/ )/ 可以/ 由/ 汽缸/ 号/ 来/ 标识/ :/ ITDCm/ 、/ KWBm/ 、/ KWEm/ 和/ KIDm/ 都/ 指/ 汽缸/ m/ 的/ 交互/ ,/ 而/ ITDCn/ 指得/ 是/ 汽缸/ n/ ,/ 它/ 是/ 下/ 一个/ 点火/ 的/ 汽缸/ ./ 注意/ ,/ KID/ 的/ 最后/ 期限/ 已经/ 不是/ IDP/ ,/ 而是/ ITDCn/ ./ 时间/ 间隔/ 不再/ 是/ ITDCk/ 和/ IDPk/ +/ 1/ 之间/ 的/ 665/ °/ CRK/ 间隔/ ,/ 而是/ 在/ ITDCm/ 和/ ITDCn/ 之间/ 的/ 720/ // 4/ =/ 180/ °/ CRK/ ,/ 这/ 就/ 给/ 4/ 缸/ 发动机/ 留下/ 了/ 180/ -/ 110/ =/ 70/ °/ CRK/ 的/ 过滤/ 间隔/ ./ 因此/ ,/ 得到/ 如下/ 约束/ 5/ :/ Constraint5/ :/ 4/ 缸/ 发动机/ 的/ Filtering/ 约束/ Filtering/ ./ duration/ / 70/ °/ CRK/ 即/ @/ tint35/ -/ @/ tint34/ / 70/ °/ CRK/ 因此/ ,/ 在/ 最大/ 的/ 发动机/ 速度/ 下/ ,/ Filtering/ ./ duration/ 不/ 应该/ 超过/ 70/ ×/ 37/ =/ 2590/ μ/ s/ ,/ 比单/ 汽缸/ 的/ 情况/ 要少/ 很多/ ./ 4.3/ 软件/ 需求/ 规约/ 的/ 抽取/ 4.3/ ./ 1/ 点火/ 系统/ (/ IS/ )/ 根据/ 第/ 3/ 章中/ 软件/ 需求/ 规约/ 的/ 获取/ 步骤/ ,/ 我们/ 首先/ 构建/ 其/ 整体/ 规约/ ./ 根据/ 问题/ 图/ 1/ 和表/ 2/ 知/ ,/ 上层/ 的/ 交互/ 有/ int1/ ,/ int2/ ,/ int3/ ,/ int4/ ,/ int5/ ,/ int6/ ,/ int7/ ./ 由表/ 3/ 知/ ,/ int4/ 的/ 开始/ 瞬时/ 交互/ 为/ int8/ ,/ int5/ 的/ 开始/ 瞬时/ 交互/ 为/ int13/ ,/ int7/ 的/ 开始/ 瞬时/ 交互/ 为/ int18/ ,/ 结束/ 瞬时/ 交互/ 为/ int25/ ./ 这些/ 交互/ 中/ 已经/ 明确/ 关系/ 的/ 有/ @/ tint4/ </ @/ tint1/ </ @/ tint3/ </ @/ tint2/ </ @/ tint6/ (/ 由式/ (/ 1/ )/ 知/ )/ ./ 其它/ 的/ 推理/ 过程/ 如下/ :/ 由式/ (/ 2/ )/ 知/ ,/ @/ tint19/ </ @/ tint1/ 由式/ (/ 5/ )/ 知/ ,/ @/ tint18/ </ @/ tint19/ 由/ 传递性/ 可/ 得/ @/ tint18/ </ @/ tint1/ 由/ int7/ 和/ int18/ 关系/ 可得/ 由/ Constraint1/ 知/ :/ @/ tint18/ =/ @/ tint8/ -/ [/ 10/ ../ 16/ ]/ 则/ @/ tint18/ </ @/ tint8/ 根据/ int7/ 和/ int18/ 以及/ int4/ 和/ int8/ 的/ 关系/ ,/ 可/ 得/ 根据/ 时钟/ 约束/ 关系/ ClockConstraint1/ 知/ ,/ int8/ 应该/ 和/ int13/ 同时/ 发生/ ,/ 所以/ 根据/ 式/ (/ 1/ )/ 、/ (/ 8/ )/ 、/ (/ 9/ )/ 和/ 式/ (/ 10/ )/ ,/ 得到/ 点火/ 系统/ 的/ 整体/ 需求/ 规约/ 如图/ 14/ (/ a/ )/ 所示/ ,/ 其/ 含义/ 为/ 点火/ 系统/ IS/ 查询/ 气缸/ 状态/ (/ int7/ )/ 、/ 查询/ 曲轴/ 的/ 旋转/ 角度/ (/ int4/ )/ 和/ 凸轮轴/ 角度/ (/ int5/ )/ ,/ 当/ 到达/ IDP/ 点时/ ,/ 查询/ 当前/ 空气/ // 汽油/ 比率/ 和/ 当前/ 发动机/ 的/ 速度/ (/ int1/ )/ 、/ 爆震/ 强度/ KI/ (/ int3/ )/ ,/ 根据/ 点火/ 时机/ 点火/ (/ int2/ )/ ,/ 并/ 设置/ 爆震/ 窗/ (/ int6/ )/ ./ 上述/ 需求/ 整体/ 规约/ 中/ 的/ int4/ ,/ int5/ ,/ int7/ 都/ 属于/ 持续/ 交互/ ,/ 分别/ 用图/ 14/ (/ b/ )/ 、/ (/ c/ )/ 、/ (/ d/ )/ 中/ 的/ 持续/ 交互/ 规约/ 表示/ ./ 以/ int4/ 为例/ ,/ 根据/ 图/ 14/ (/ b/ )/ ,/ 可以/ 看出/ 其/ 经历/ 了/ 从/ OTDC/ (/ int8/ )/ 到/ FBDC/ (/ int9/ )/ 到/ ITDC/ (/ int10/ )/ 到/ SBDC/ (/ int11/ )/ 到/ IDP/ (/ int12/ )/ 的/ 全过程/ ,/ 当/ 观察/ 到/ 它/ 到达/ IDP/ 时/ ,/ 触发/ 了/ 其它/ 的/ 交互/ ./ 关于/ int5/ ,/ int7/ 的/ 描述/ 详见/ 图/ 14/ (/ c/ )/ 和/ (/ d/ )/ ./ 这些/ 交互/ 之间/ 要/ 满足/ Constraint1/ 和/ Constraint2/ 的/ 约束/ 关系/ ./ 4.3/ ./ 2/ 爆震/ 控制系统/ (/ KS/ )/ 与/ 点火/ 系统/ 类似/ ,/ 可以/ 得到/ 爆震/ 控制系统/ 的/ 需求/ 整体/ 规约/ ,/ 如图/ 15/ (/ a/ )/ 所示/ ,/ 其/ 含义/ 为/ :/ 爆震/ 控制系统/ KS/ 查询/ 曲轴/ 的/ 旋转/ 角度/ (/ int4/ )/ ,/ 当/ 到达/ ITDP/ 点/ (/ int10/ )/ 时/ ,/ 查询/ 上次/ 爆震/ 强度/ KI/ (/ int31/ )/ ,/ 等待/ 延迟/ 的/ KAW/ (/ int30/ )/ ,/ 执行/ 信号/ 获取/ (/ KSA/ )/ 活动/ (/ int26/ )/ ,/ 获取/ 爆震/ 信号/ (/ int29/ )/ ,/ 然后/ 执行/ Filtering/ 过滤/ (/ int27/ )/ ,/ 得到/ KI/ (/ int28/ )/ ./ 对于/ 其中/ 涉及/ 的/ 持续/ 交互/ int4/ ,/ int27/ ,/ int30/ ,/ 我们/ 分别/ 采用/ 持续/ 交互/ 规约/ 来/ 表示/ ,/ 结果/ 如图/ 15/ (/ b/ )/ 、/ (/ c/ )/ 、/ (/ d/ )/ 所示/ ./ 需要/ 指出/ 的/ Page13/ 是/ ,/ 图/ 15/ (/ b/ )/ 中/ 的/ int4/ 与/ 图/ 14/ (/ b/ )/ 的/ int4/ 经历/ 相同/ ,/ 不同之处/ 在于/ 观察/ 结束/ 点/ 不同/ ,/ 图/ 15/ (/ b/ )/ 中当/ 观察/ 到/ ITDP/ 点/ (/ int10/ )/ 时/ ,/ 软件/ 就/ 触发/ 了/ 爆震/ 的/ 其它/ 活动/ ./ 图/ 15/ (/ c/ )/ 、/ (/ d/ )/ 则/ 分别/ 表示/ 了/ Filtering/ 和/ KAW/ 的/ 开始/ 和/ 结束/ ./ 这些/ 交互/ 要/ 满足/ Constraint3/ 与/ Constraint4/ (/ 单缸/ 发动机/ )/ 或者/ Constraint3/ 与/ Constraint5/ (/ 4/ 缸/ 发动机/ )/ 的/ 约束/ 关系/ ./ 5/ 相关/ 工作/ 比较/ 跟/ 本文/ 相关/ 的/ 工作/ 有/ 多/ 形态/ 时间/ 、/ 时间/ 需求/ 建模/ 、/ 问题/ 框架/ 方法/ 和/ 需求/ 规约/ 的/ 抽取/ ./ 多/ 形态/ 时间/ (/ MultiformTime/ )/ 最早/ 在/ 反应式/ 同步/ 语言/ [/ 9/ ]/ 中/ 定义/ 和/ 使用/ ./ 它/ 认为/ 事件/ 流/ 可以/ 用/ 不同/ 的/ 时间/ 单位/ 来/ 度量/ ./ MARTE/ (/ ModelingandAnalysisofReal/ -/ TimeEmbeddedsystems/ )/ 是/ OMG/ 组织/ 公布/ 的/ 实时/ 嵌入/ 系统/ 的/ 建模/ 规范/ [/ 10/ ]/ ./ 它/ 将/ 多/ 形态/ 时间/ 引入/ 其/ 时间/ 模型/ ./ 它/ 将/ 时间/ 定义/ 为/ 一组/ 有/ 不同/ 时间/ 单位/ 的/ 时钟/ ./ 这些/ 时钟/ 可以/ 离散/ ,/ 也/ 可以/ 连续/ ./ 另外/ ,/ 它/ 还/ 定义/ 了/ 相应/ 的/ 时钟/ 约束/ 语言/ CCSL/ (/ ClockConstraintSpecificationLanguage/ )/ ./ 该/ 工作/ 是/ 本文/ 工作/ 的/ 研究/ 基础/ ,/ 本文/ 的/ 时间/ 模型/ 也/ 是/ 多/ 形态/ 时间/ 模型/ ,/ 不同之处/ 在于/ 它/ 专门/ 为/ 需求/ 阶段/ 量身/ 打造/ ,/ 其/ 时钟/ 是/ 连续/ 模型/ ,/ 既/ 能/ 描述/ 现实/ 世界/ ,/ 也/ 能/ 描述/ 基于/ 现实/ 世界/ 的/ 变化/ ./ 我们/ 将/ 时间/ 需求/ 建模/ 分为/ 3/ 种/ ,/ 基于/ 时序/ 逻辑/ 的/ 时间/ 需求/ 建模/ 、/ 基于/ MARTE/ 的/ 时间/ 需求/ 建模/ 和/ 基于/ 时间/ 自动机/ 等/ 形式化/ 方法/ 的/ 时间/ 需求/ 建模/ ./ 基于/ 时序/ 逻辑/ 的/ 时间/ 需求/ 建模/ 在/ 现代/ 需求/ 工程/ 方法/ 中/ 出现/ 的/ 比较/ 多/ ./ 例如/ ,/ 面向/ 目标/ 的/ 方法/ [/ 5/ ]/ 与/ 面向/ 主体/ 和/ 意图/ 的/ 方法/ [/ 6/ ]/ ./ 面向/ 目标/ 的/ 方法/ 将/ 目标/ 看作/ 是/ 需求/ 的/ 来源/ ,/ KAOS/ (/ KnowledgeAcquisitioninAuto/ -/ matedSpecification/ )/ [/ 16/ ]/ 是/ 其/ 代表性/ 工作/ ./ KAOS/ 中/ 包含/ 很多/ 传统/ 的/ 时序/ 算子/ 和/ 混合/ 附加/ 的/ 实时/ 算子/ ,/ 由此/ 来/ 确定/ 涉及/ 实时/ 期限/ 的/ 性质/ ./ 它/ 使用/ 带/ 类型/ 的/ 一阶/ 时序/ 逻辑/ 建模/ 实时/ 特性/ ./ 面向/ 主体/ 和/ 意图/ 使用/ 参与者/ 作为/ 线索/ 来/ 识别/ 需求/ ,/ 其/ 代表性/ 工作/ 是/ i/ / 框架/ [/ 17/ ]/ 和/ FormalTropos/ [/ 18/ ]/ ./ FormalTropos/ 语言/ 用/ 由/ KAOS/ 激发/ 的/ 时序/ 规约/ 语言/ 补充/ i/ / ./ FormalTropos/ 也/ 使用/ 带/ 类型/ 的/ 一阶/ 时序/ 逻辑/ 建模/ 实时/ 特性/ ./ 上述/ 基于/ 时序/ 逻辑/ 的/ 工作/ ,/ 都/ 采用/ 时序/ 逻辑/ 或/ 其/ 扩展/ 对/ 时间/ 需求/ 进行/ 建模/ ,/ 针对/ 时间/ 点/ 和/ 时间段/ 进行/ 了/ 定性/ 与/ 定量/ 的/ 描述/ ./ 它/ 假设/ 时间/ 领域/ 离散/ ,/ 其/ 时间/ 模型/ 为/ 基于/ 物理/ 时间/ 的/ 多/ 时钟/ 模型/ ,/ 很难/ 精确/ 地/ 捕捉/ 和/ 推理/ 涉及/ 时间/ 的/ 连续变量/ ./ 多/ 时钟/ 模型/ 涉及/ 多个/ 时钟/ ,/ 这些/ 时钟/ 可以/ 为/ 物理/ 时钟/ ,/ 也/ 可以/ 为/ 逻辑/ 时钟/ ,/ 但/ 这些/ 时钟/ 的/ 时间/ 单位/ 相同/ ,/ 分辨率/ 也/ 相同/ ./ 这些/ 模型/ 没有/ 解决/ 环境/ 时间/ 的/ 多/ 度量/ 描述/ 的/ 问题/ ./ 跟/ 它们/ 相比/ ,/ 除了/ 物理/ 时间/ 之外/ ,/ 由于/ 时间/ 的/ 多/ 形态/ 表示/ ,/ 本文/ 方法/ 还/ 可/ 从/ 其它/ 角度/ 来/ 定义/ 逻辑/ 时间/ ,/ 其/ 时间/ 单位/ 可以/ 不同/ ,/ 分辨率/ 也/ 可以/ 不同/ ,/ 更加/ 适用/ 于/ 描述/ 多样/ 的/ 环境/ ./ 另外/ ,/ 本文/ 方法/ 从/ 环境/ 出发/ 建模/ 时间/ ,/ 也/ 更加/ 适用/ 于/ 描述/ 环境/ 时间/ ,/ 跟/ 上述/ 其它/ 需求/ 工程/ 方法/ 相比/ ,/ 更/ 适合/ 解决/ 多样/ 的/ 环境/ 时间/ 描述/ 与/ 单一/ 软件/ 时间/ 描述/ 的/ 融合/ 问题/ ./ 基于/ MARTE/ 的/ 需求/ 工程/ 方法/ 不多/ ./ 2011/ 年/ 我们/ 将/ 问题/ 框架/ 和/ MARTE/ // CCSL/ 结合/ 起来/ ,/ 为/ 嵌入式/ 系统/ 提供/ 了/ 一个/ 时间/ 描述/ 机制/ [/ 7/ ]/ ./ 该/ 工作/ 将/ 每个/ 问题/ 领域/ 跟/ 一个/ 时钟/ 关联/ 在/ 一起/ ,/ 并/ 将/ 该/ 问题/ 领域/ 涉及/ 的/ 交互/ 对应/ 到/ 该/ 时钟/ 的/ 时间/ 点上/ ,/ 由此/ 构造/ 了/ 嵌入式/ 系统/ 的/ 时间/ 模型/ ./ 该/ 工作/ 主要/ 针对/ 时间/ 点/ 和/ 时间段/ 进行/ 了/ 描述/ ./ 实际上/ ,/ 该/ 时间/ 模型/ 是/ 离散/ 的/ 多/ 时钟/ 模型/ ./ 形式化/ 方法/ 在/ 时间/ 模型/ 上/ 有/ 很多/ 工作/ ./ 比如/ 由/ Alur/ 和/ Dill/ [/ 23/ ]/ 提出/ 的/ 时间/ 自动机/ (/ TimedAutomata/ )/ ,/ 它/ 在/ 有限/ 状态/ 自动机/ 的/ 基础/ 上/ 增加/ 了/ 取实/ 数值/ 的/ 时钟/ 变量/ 用以/ 刻画/ 连续/ 变化/ 的/ 时间/ ,/ 可以/ 准确/ 地/ 表示/ 实时/ 系统/ 的/ 各种/ 带/ 时间/ 约束/ 的/ 行为/ ./ 由/ 周巢尘/ 院士/ 和/ Hoare/ 等/ 人/ [/ 24/ ]/ 联合/ 提出/ 的/ 时段/ 演算/ (/ DurationCalculus/ )/ ,/ 能够/ 应用/ 于/ 对/ 混合系统/ 的/ 实时/ 需求/ 进行/ 刻画/ 和/ 精化/ 以及/ 用来/ 计算/ 关于/ 系统/ 需求/ 的/ 满足/ 概/ Page14/ 率/ ./ 由/ 牛津大学/ 的/ Reed/ 和/ Roscoe/ 等/ 人/ [/ 25/ ]/ 提出/ 的/ 时间/ 通信/ 顺序进程/ (/ TimedCommunicatingSequentialProcess/ ,/ TCSP/ )/ ,/ 引入/ 了/ 时间/ 因子/ 的/ 概念/ ,/ 并/ 定义/ 了/ 一些/ 带有/ 时间/ 因子/ 的/ 算子/ ,/ 实现/ 了/ 实时性/ 的/ 相关/ 描述/ 和/ 分析/ ./ 这些/ 形式化/ 的/ 时间/ 模型/ 不/ 大/ 适合/ 在/ 需求/ 的/ 早期/ 使用/ ,/ 且/ 它们/ 大部分/ 是/ 多/ 时钟/ 模型/ ,/ 也/ 存在/ 不能/ 描述/ 多/ 度量/ 方式/ 的/ 环境/ 时间/ 问题/ ./ 基于/ 环境/ 的/ 问题/ 框架/ 方法/ [/ 13/ ]/ 是/ 本文/ 工作/ 的/ 基础/ ./ 问题/ 框架/ 方法/ 中/ 涉及/ 时间/ 需求/ 的/ 工作/ 比较/ 少/ ./ Lavazza/ 等/ 人/ [/ 19/ ]/ 使用/ 时间/ 事件/ 来/ 触发/ 在/ 特定/ 时间/ 点要/ 做/ 的/ 特定/ 系统/ 行为/ ./ Nelson/ 等/ 人/ [/ 20/ ]/ 为/ 地理/ 领域/ 提出/ 了/ 12/ 个/ 地理/ 问题/ 框架/ ,/ 其中/ 一个/ 是/ 跟/ 时间/ 相关/ 的/ ,/ 称为/ 趋势/ // 时序/ 框架/ ,/ 这个/ 框架/ 捕获/ 了/ 这样/ 的/ 问题/ :/ 当/ 比较/ 不同/ 时间/ 的/ 同一/ 区域/ 的/ 两个/ 地图/ 时/ ,/ 什么/ 发生/ 了/ 变化/ ?/ Barroca/ 等/ 人/ [/ 21/ ]/ 使用/ Timer/ 作为/ 问题/ 领域/ 的/ 一部分/ ,/ 机器/ 可以/ 观察/ 和/ 重置/ Timer/ ,/ Timer/ 也/ 可以/ 被/ 客户/ 观察/ 到/ ./ Timer/ 提供/ 了/ 事件/ 可以/ 报告/ 流逝/ 的/ 时间/ ./ Bianco/ 等/ 人/ [/ 22/ ]/ 使用/ 情景/ 研究/ 问题/ 框架/ ,/ 情景/ 可以/ 用/ 事件/ 现象/ 来/ 表示/ ,/ 其/ 时间/ 约束/ 是/ 用来/ 推理/ 系统/ 的/ 性能/ ./ 这些/ 工作/ 都/ 基于/ 时序/ 逻辑/ 及其/ 扩展/ ./ 跟/ 上述/ 基于/ 问题/ 框架/ 的/ 时间/ 建模/ 方法/ 相比/ ,/ 我们/ 的/ 时间/ 需求/ 模型/ 是/ 一个多/ 形态/ 时间/ 模型/ ,/ 它/ 建模/ 连续/ 时间/ ,/ 从/ 现实/ 世界/ 出发/ ,/ 从/ 不同/ 的/ 角度/ 看待/ 时间/ 和/ 描述/ 时间/ ,/ 其/ 时间/ 单位/ 多样/ ,/ 分辨率/ 也/ 不同/ ,/ 适合/ 建模/ 多样/ 的/ 环境/ 时间/ ./ 由于/ 我们/ 的/ 时间/ 约束/ 基于/ 问题/ 领域/ 和/ 交互/ ,/ 而/ 这/ 二者/ 是/ 功能性/ 需求/ 的/ 主要/ 成分/ ,/ 因此/ 我们/ 的/ 方法/ 植根于/ 功能性/ 需求/ 之上/ ,/ 这/ 使得/ 时间/ 需求/ 有/ 牢固/ 的/ 实现/ 基础/ ./ 需求/ 规约/ 的/ 抽取/ 工作/ 跟/ 本文/ 关系/ 最/ 密切/ 的/ 是/ Jackson/ 等/ 人/ [/ 14/ ]/ 的/ 工作/ ./ 他们/ 是从/ 需求/ 中/ 抽取/ 需求/ 规约/ 的/ 专门/ 工作/ ,/ 跟/ 本文/ 工作/ 相比/ ,/ 他们/ 具有/ 更/ 全面/ 的/ 抽取/ 过程/ ,/ 包括/ 如何/ 从/ 需求/ 中/ 通过/ 环境/ 推理/ 出/ 软件/ 应该/ 具备/ 的/ 行为/ ./ 它/ 也/ 涉及/ 到/ 一些/ 实时/ 需求/ ,/ 与/ 他们/ 不同/ 的/ 是/ ,/ 我们/ 的/ 工作/ 里面/ 涉及/ 了/ 一些/ 持续/ 交互/ ,/ 并/ 以/ 特定/ 的/ 方式/ 表达/ 了/ 出来/ ./ 6/ 结束语/ 时间/ 需求/ 是/ 嵌入式/ 系统/ 的/ 核心/ ,/ 其/ 成功/ 描述/ 是/ 实现/ 该/ 系统/ 的/ 关键/ ,/ 因此/ 时间/ 需求/ 建模/ 的/ 重要性/ 毋庸置疑/ ./ 提出/ 构建/ 基于/ 环境/ 的/ 时间/ 需求/ 模型/ ,/ 主要/ 贡献/ 有/ :/ 本文/ 在/ 我们/ 前期/ 的/ 功能性/ 需求/ 建模/ 的/ 基础/ 上/ ,/ (/ 1/ )/ 以/ 基于/ 环境/ 的/ 功能/ 需求/ 建模/ 为/ 基础/ ,/ 在/ 交互/ 和/ 问题/ 领域/ 两大/ 环境因素/ 的/ 基础/ 上/ 构建/ 多/ 形态/ 时间/ 需求/ 模型/ ,/ 为/ 基于/ 环境/ 的/ 非/ 功能/ 需求/ 建模/ 开辟/ 了/ 道路/ ./ (/ 2/ )/ 支持/ 多/ 形态/ 时间/ 建模/ ,/ 从/ 多种/ 角度/ 看待/ 和/ 描述/ 环境/ 时间/ ,/ 适合/ 描述/ 多样/ 的/ 环境/ 时间/ 和/ 单一/ 软件/ 时间/ ./ 本文/ 的/ 主要/ 工作/ 包括/ :/ (/ 1/ )/ 构建/ 了/ 一个多/ 形态/ 时间/ 需求/ 模型/ ,/ 提供/ 了/ 描述/ 时间/ 需求/ 的/ 基本概念/ 和/ 术语/ ,/ 以/ 帮助/ 进行/ 时间/ 需求/ 的/ 描述/ ./ (/ 2/ )/ 在/ 多/ 形态/ 时间/ 需求/ 模型/ 的/ 制导/ 下/ ,/ 提供/ 了/ 一个/ 时间/ 需求/ 的/ 建模/ 过程/ ,/ 支持/ 从/ 功能性/ 需求/ 到/ 时间/ 需求/ 的/ 描述/ ./ (/ 3/ )/ 提供/ 了/ 从/ 时间/ 需求/ 模型/ 到/ 需求/ 规约/ 的/ 转换/ ./ 通过/ 上述/ 工作/ ,/ 可以/ 得到/ 时间/ 软件/ 需求/ 规约/ ,/ 这样/ 的/ 规约/ 为/ 进一步/ 设计/ 和/ 开发/ 具有/ 强/ 时间/ 约束/ 且/ 与/ 环境/ 多/ 实时/ 交互/ 的/ 软件/ 提供/ 了/ 依据/ ./ 目前/ ,/ 本/ 方法/ 提出/ 的/ 时间/ 需求/ 规约/ 还/ 没有/ 进行/ 验证/ ,/ 下/ 一步/ 的/ 工作/ 就是/ 对/ 它们/ 进行/ 验证/ ,/ 并/ 建立/ 工具/ 支持/ 建模/ 和/ 自动化/ 验证/ ./ 

