Page1/ 面向/ 微博/ 系统/ 的/ 实时/ 个性化/ 推荐/ 高明/ 1/ )/ 金澈/ 清/ 1/ )/ 钱卫宁/ 1/ )/ 王晓玲/ 1/ )/ ,/ 2/ )/ 周傲/ 英/ 1/ )/ ,/ 2/ )/ 1/ )/ (/ 华东师范大学/ 软件/ 学院/ 上海市/ 高/ 可信计算/ 重点/ 实验室/ 上海/ 200062/ )/ 2/ )/ (/ 复旦大学/ 上海市/ 智能/ 信息处理/ 重点/ 实验室/ 上海/ 200433/ )/ 摘要/ 社交/ 网络服务/ 需要/ 响应/ 用户/ 实时/ 、/ 连续/ 、/ 个性化/ 的/ 服务/ 需求/ ./ 然而/ ,/ 目前/ 多数/ 社交/ 网络服务/ 并未/ 充分考虑/ 用户/ 的/ 个性化/ 服务/ 需求/ ./ 由于/ 社交/ 网络/ 中/ 海量/ 的/ 数据/ 更新/ 使得/ 提供/ 实时/ 个性化/ 服务/ 成为/ 一项/ 相对/ 艰巨/ 的/ 任务/ ./ 文中/ 基于/ LDA/ 主题/ 模型/ 推断/ 微博/ 的/ 主题/ 分布/ 和/ 用户/ 的/ 兴趣/ 取向/ ,/ 提出/ 了/ 微博/ 系统/ 上/ 用户/ 感兴趣/ 微博/ 的/ 实时/ 推荐/ 方法/ ,/ 以/ 响应/ 用户/ 实时/ 、/ 连续/ 和/ 个性化/ 的/ 服务/ 请求/ ,/ 在/ 真实/ 数据/ 集上/ 的/ 实验/ 结果/ 验证/ 了/ 文中/ 提出/ 的/ 方法/ 的/ 有效性/ 和/ 高效性/ ./ 关键词/ 实时/ 推荐/ ;/ 个性化/ 推荐/ ;/ LDA/ ;/ 社交/ 网络/ ;/ 微博/ 1/ 引言/ 近几年来/ ,/ 社会/ 网络服务/ (/ SocialNetworkServices/ ,/ SNS/ )/ 已经/ 发展/ 成为/ 互联网/ 新兴/ 媒体/ 中/ 一类/ 重要/ 的/ 服务/ ,/ 例如/ Facebook/ ①/ 、/ Foursquare/ ②/ 、/ Twitter/ ③/ 、/ YouTube/ ④/ 、/ 新浪/ 微博/ ⑤/ 以及/ 优酷/ ⑥/ 等/ ,/ 这些/ 社会/ 网络服务/ 对/ 各行各业/ 均/ 产生/ 了/ 重大/ 的/ 影响/ ./ 社交/ 网络服务/ 需要/ 为/ 海量/ 的/ 用户/ 群体/ 实时/ 提供/ 符合/ 各自/ 需求/ 的/ 服务/ ./ 它们/ 不但/ 要/ 响应/ 海量/ 用户/ 的/ 实时/ 服务/ 请求/ ,/ 而且/ 还要/ 响应/ 用户/ 的/ 个性化/ 服务/ 请求/ ./ 因此/ ,/ 海量/ 性/ 、/ 实时性/ 和/ 个性化/ 成为/ 社交/ 网络服务/ 显著/ 区别/ 于/ 传统/ 互联网服务/ 的/ 重要/ 特点/ ,/ 这三大/ 特点/ 也/ 致使/ 传统/ 互联网/ 技术/ 在/ 处理/ 社交/ 网络服务/ 时/ 面临/ 着/ “/ 捉襟见肘/ ”/ 的/ 窘境/ ./ 就/ 个性化/ 而言/ ,/ 除了/ YouTube/ 的/ 个性化/ 视频/ 推荐/ 和/ Facebook/ 的/ 图/ 搜索/ (/ graphsearch/ )/ 等/ 少数几/ 例外/ ,/ 大多数/ 社交/ 网络服务/ 针对/ 不同/ 用户/ 返回/ 相同/ 的/ 结果/ ./ 社交/ 网络服务/ 的/ 三大/ 特点/ 在/ 微博/ 平台/ 上/ 得到/ 了/ 很/ 好/ 的/ 体现/ ,/ 这/ 也/ 使得/ 微博/ 成为/ 一种/ 非常/ 典型/ 的/ 社交/ 网络服务/ ./ 针对/ 微博/ 平台/ ,/ 部分/ 互联网/ 公司/ 已经/ 开发/ 了/ 实时/ 社交/ 网络服务/ ,/ 包括/ Twitter/ 、/ TOPSY/ ⑦/ 和/ OneRiot/ ⑧/ ./ 而/ 在/ 学术界/ ,/ Busch/ 等/ 人/ [/ 1/ ]/ 介绍/ 了/ Twitter/ 搜索引擎/ EarlyBird/ ,/ Chen/ 等/ 人/ [/ 2/ ]/ 研究/ 了/ Twitter/ 的/ 实时/ 搜索引擎/ ,/ 我们/ 也/ 设计/ 了/ 一个/ 微博/ 平台/ 上/ 的/ 实时/ 搜索引擎/ [/ 3/ ]/ ./ 但是/ ,/ 现有/ 工作/ 并未/ 充分考虑/ 用户/ 的/ 个性化/ 服务/ 需求/ ,/ 这/ 正是/ 本文/ 的/ 出发点/ ./ 本文/ 运用/ 主题/ 模型/ LDA/ (/ LatentDirichletAllocation/ )/ 推断/ 微博/ 的/ 主题/ 分布/ 和/ 用户/ 的/ 兴趣/ 取向/ ,/ 从而/ 实时/ 、/ 连续/ 地向/ 用户/ 推荐/ 他们/ 感兴趣/ 的/ 微博/ ./ 此项工作/ 面临/ 两大/ 挑战/ :/ (/ 1/ )/ 海量/ 数据/ 的/ 快速/ 更新/ ;/ (/ 2/ )/ 个性化/ 服务/ 请求/ 的/ 实时/ 和/ 准确/ 响应/ ./ 本文/ 的/ 主要/ 贡献/ 可/ 归纳/ 为/ (/ 1/ )/ 运用/ 流/ 数据模型/ 对/ 海量/ 的/ 微博/ 发布/ 或者/ 更新/ 进行/ 建模/ ,/ 利用/ 数据流/ 上/ 基于/ 滑动/ 窗口/ 模型/ 的/ 实时/ top/ -/ k/ 查询/ 来/ 响应/ 实时/ 微博/ 推荐/ ./ (/ 2/ )/ 基于/ 微博/ 的/ 主题/ 分布/ 、/ 用户/ 的/ 兴趣/ 取向/ 以及/ 用户/ 最/ 关注/ 的/ 话题/ ,/ 提出/ 了/ 用户/ 感兴趣/ 微博/ 的/ 实时/ 推荐/ 方法/ ./ (/ 3/ )/ 利用/ 真实/ 数据/ 集/ 验证/ 新/ 方法/ 的/ 有效性/ 和/ 高效性/ ./ 本文/ 第/ 2/ 节/ 回顾/ 与/ 社交/ 网络服务/ 相关/ 的/ 技术/ ;/ 第/ 3/ 节/ 介绍/ 新/ 方法/ 的/ 整体/ 设计/ 框架/ ;/ 第/ 4/ 节/ 阐述/ 如何/ 推断/ 微博/ 的/ 主题/ 分布/ 和/ 用户/ 的/ 兴趣/ 取向/ ;/ 第/ 5/ 节/ 介绍/ 如何/ 向/ 用户/ 实时/ 推荐/ 他们/ 感兴趣/ 的/ 微博/ ;/ 第/ 6/ 节/ 利用/ 真实/ 数据/ 集/ 验证/ 新/ 方法/ 的/ 有效性/ 和/ 高效性/ ;/ 最后/ 在/ 第/ 7/ 节中/ 总结/ 全文/ ./ 2/ 相关/ 工作/ 2.1/ 社交/ 网络服务/ 近年来/ ,/ 社交/ 网络服务/ 的/ 发展/ 非常/ 迅猛/ ,/ 不少/ 网络/ 运营商/ 均/ 提供/ 实时/ 搜索/ 服务/ ,/ 这些/ 服务/ 响应/ 用户/ 的/ 关键字/ 查询/ ,/ 返回/ 社交/ 网络/ 上/ 实时/ 更新/ 的/ 结果/ ./ 例如/ ,/ Earlybird/ (/ Twitter/ 的/ 实时/ 搜索/ 服务/ )/ 根据/ 每条/ 微博/ 的/ 发布/ 时间/ 和/ 受欢迎/ 程度/ 对/ 查询/ 结果/ 排序/ [/ 1/ ]/ ;/ TOPSY/ 根据/ 用户/ 的/ 影响力/ 对/ 查询/ 结果/ 排序/ ;/ OneRiot/ 根据/ 微博/ 的/ 发布/ 时间/ 、/ 用户/ 的/ 影响力/ 以及/ 微博/ 的/ 主题/ 对/ 查询/ 结果/ 排序/ ;/ Bing/ ⑨/ 提供/ 两种/ 排序/ 方法/ ,/ 一是/ 根据/ 微博/ 的/ 发布/ 时间/ 返回/ 新近/ 的/ 微博/ ,/ 二是/ 根据/ 用户/ 的/ 影响力/ 、/ 微博/ 的/ 转发/ 次数/ 来/ 度量/ 查询/ 结果/ 的/ 重要/ 程度/ ./ Chen/ 等/ 人/ [/ 2/ ]/ 研究/ 了/ Twitter/ 上/ 的/ 实时/ 检索/ 问题/ ,/ 其/ 根据/ 微博/ 可能/ 出现/ 在/ 结果/ 中/ 的/ 概率/ 对/ 微博/ 进行/ 分组/ ,/ 在/ 尽量/ 保证/ 查询/ 质量/ 的/ 情况/ 下/ 优化/ 实时/ 搜索引擎/ 的/ 索引/ ,/ 以/ 提供/ 实时/ 搜索/ 服务/ ./ 我们/ 先前/ 的/ 文章/ [/ 3/ ]/ 提出/ 了/ 微博上/ 的/ 实时/ 搜索引擎/ ,/ 但/ 这些/ 工作/ 都/ 没有/ 充分考虑/ 用户/ 的/ 个性化/ 服务/ 需求/ ,/ 而/ 这/ 是/ 本文/ 关注/ 的/ 重点/ 之一/ ./ 2.2/ 个性化/ 推荐/ 个性化/ 搜索/ 服务/ [/ 4/ -/ 7/ ]/ 主要/ 分为/ 查询/ 扩展/ 和/ 结果/ 再/ 处理/ 两类/ ./ Xu/ 和/ Croft/ [/ 4/ ]/ 提出/ 了/ 一个/ 查询/ 扩展/ 的/ 方法/ ,/ 该/ 方法/ 有效/ 地/ 响应/ 用户/ 个性化/ 的/ 信息检索/ 请求/ ;/ Leroy/ 等/ 人/ [/ 5/ ]/ 基于/ 用户/ 提交/ 的/ 关键字/ 查询/ 结果/ 来/ 扩展/ 关键字/ ,/ 从而/ 提高/ 用户/ 的/ 查询/ 体验/ ./ 主题/ 相关/ 的/ PageRank/ 方法/ 基于/ 用户/ 的/ 兴趣/ 扩展/ 了/ PageRank/ 算法/ [/ 8/ ]/ ,/ 从而/ 实现/ 个性化/ 排序/ ;/ 文献/ [/ 6/ -/ 7/ ,/ 9/ -/ 10/ ]/ 根据/ 用户/ 的/ 点击/ 历史/ 自动/ 探索/ 用户/ 的/ 兴趣爱好/ ,/ 以/ 响应/ 用户/ 个性化/ 的/ 搜索/ 需求/ ;/ Chen/ 等/ 人/ [/ 11/ ]/ 综合/ 微博/ 的/ 主题/ 分布/ 因子/ 、/ 用户/ 在/ 社交/ 网络/ 中/ 的/ 影响力/ 特征/ 、/ 微/ ①/ ②/ ③/ ④/ ⑤/ ⑥/ ⑦/ ⑧/ ⑨/ Page3/ 博/ 的/ 内容/ 特征/ 以及/ 微博/ 的/ 受欢迎/ 程度/ 特征/ 为/ 用户/ 提供/ 个性化/ 搜索/ 结果/ ./ 除此之外/ ,/ Chirita/ 等/ 人/ [/ 12/ ]/ 通过/ 用户/ 手动/ 输入/ 的/ 偏好/ 实现/ 个性化/ 检索/ ;/ Das/ 等/ 人/ [/ 13/ ]/ 提出/ 了/ 协作/ 过滤/ 的/ 方法/ 为/ 用户/ 推荐/ Google/ 新闻/ ,/ 该/ 方法/ 通过/ 整合/ Minhash/ 聚类/ 技术/ 、/ 概率/ 潜在/ 语义/ 索引/ (/ PLSI/ )/ 技术/ 和/ 用户/ 访问/ 历史/ 实现/ Google/ 新闻/ 的/ 个性化/ 推荐/ ./ 近来/ ,/ 许多/ 学者/ 意识/ 到/ 一段/ 文本/ 可能/ 同时/ 涉及/ 多个/ 潜在/ 主题/ ,/ 而/ 每个/ 主题/ 通常/ 涉及/ 到/ 一系列/ 特定/ 的/ 词汇/ ,/ 因此/ 多个/ 基于/ 文本/ 的/ 概率/ 生成/ 模型/ 被/ 提出/ 用于/ 揭示/ 文本/ 的/ 潜在/ 主题/ [/ 14/ -/ 17/ ]/ ,/ 其中/ LDA/ 作为/ 一种/ 非/ 监督/ 的/ 文本/ 主题/ 概率/ 生成/ 模型/ 而/ 被/ 广泛/ 研究/ [/ 15/ ]/ ./ 但/ 这些/ 工作/ 并/ 没有/ 充分考虑/ 用户/ 的/ 实时/ 查询/ 需求/ ,/ 这是/ 本文/ 关注/ 的/ 另/ 一个/ 重点/ ./ 实时/ 个性化/ 推荐/ 服务/ 逐渐/ 得到/ 服务提供商/ 们/ 的/ 重视/ ./ YouTube/ 旨在/ 向/ 用户/ 提供/ 可/ 自定义/ 的/ 、/ 简洁/ 的/ 视频/ 观看/ 体验/ ,/ YouTube/ 通过/ 用户/ 观看/ 历史/ 向/ 用户/ 推荐/ 他们/ 可能/ 感兴趣/ 的/ 视频/ ./ Facebook/ 推出/ 了/ 图/ 搜索/ (/ GraphSearch/ )/ ,/ 用户/ 可以/ 搜索/ 其他/ 用户/ 公开/ 的/ 所有/ 内容/ ./ 之所以/ 叫做/ “/ 图/ 搜索/ ”/ ,/ 主要/ 是因为/ Facebook/ 将/ 用户/ 相关/ 的/ 内容/ 、/ 数据/ 、/ 好友/ 关系/ 定性/ 为/ 社交图/ (/ SocialGraph/ )/ ,/ 用户/ 利用/ 图/ 搜索/ 可以/ 浏览/ 照片/ 、/ 用户/ 页面/ 、/ 地点/ 以及/ 用户/ 兴趣/ 等/ ./ Facebook/ 还/ 表示/ ,/ 未来/ 用户/ 可以/ 自己/ 过滤/ 搜索/ 结果/ ./ 一方面/ ,/ 用户/ 可以/ 查找/ 特定/ 朋友/ 感兴趣/ 的/ 音乐/ 、/ 餐馆/ 或/ 其他/ 对象/ ;/ 另一方面/ ,/ 根据/ 特定/ 的/ 对象/ 或者/ 主题/ ,/ 用户/ 可以/ 查找/ 可能/ 感兴趣/ 的/ 朋友/ ①/ ./ 传统/ 信息检索/ 服务/ 仅/ 考虑/ 了/ 用户/ 提交/ 的/ 关键词/ 和/ 文本/ 间/ 的/ 相关性/ ,/ 而/ 在/ 各类/ 社交/ 网站/ 中/ ,/ 海量/ 用户/ 间/ 形成/ 一个/ 庞大/ 的/ 社交/ 网络/ ,/ 每个/ 用户/ 都/ 有/ 不同/ 的/ 兴趣爱好/ 以及/ 社交/ 群体/ ./ 因此/ ,/ 在/ 海量/ 、/ 实时/ 以及/ 不/ 确定/ 数据/ 上/ 响应/ 用户/ 的/ 个性化/ 服务/ 请求/ 凸显/ 了/ 传统/ 的/ 信息检索/ 服务/ 在/ 社交/ 网络服务/ 中/ 的/ 不/ 适应性/ ./ 3/ 整体/ 框架图/ 1/ 展示/ 了/ 微博/ 系统/ 上/ 向/ 用户/ 实时/ 推荐/ 他们/ 感兴趣/ 的/ 微博/ 的/ 框架/ ./ 首先/ ,/ 基于/ 每条/ 微博/ 的/ 内容/ 推断/ 该条/ 微博/ 的/ 主题/ 分布/ ,/ 根据/ 用户/ 发布/ 的/ 微博/ 进一步/ 推断/ 用户/ 的/ 兴趣/ 取向/ ./ 其次/ ,/ 根据/ 用户/ 不同/ 的/ 偏好/ 对/ 微博/ 建立/ 不同/ 的/ 网格/ 索引/ ,/ 利用/ 滑动/ 窗口/ 上/ 的/ 连续/ top/ -/ k/ 查询/ 技术/ 将/ 新近/ 发生/ 的/ 热点/ 事件/ 维护/ 在/ 全局/ top/ -/ k/ 列表/ 中/ ,/ 从/ 这些/ 热点/ 事件/ 中向/ 用户/ 推荐/ 与/ 他们/ 兴趣/ 较/ 吻合/ 的/ 微博/ ./ 3.1/ 数据/ 预处理/ 为了/ 提供/ 实时/ 和/ 个性化/ 推荐/ ,/ 在/ 数据/ 预处理/ 阶段/ 需要/ 收集/ 或/ 更新/ :/ (/ 1/ )/ 用户/ 在/ 社交/ 网络/ 中/ 的/ 影响力/ 特征/ ;/ (/ 2/ )/ 每条/ 微博/ 的/ 受欢迎/ 程度/ 特征/ ;/ (/ 3/ )/ 微博/ 的/ 主题/ 分布/ ;/ (/ 4/ )/ 用户/ 的/ 兴趣/ 取向/ ./ 在/ 社交/ 网络/ 中/ ,/ 用户/ 的/ 影响力/ 因素/ 包括/ 所发/ 微博数/ 、/ 粉丝/ 数/ 、/ 关注/ 数/ 以及/ 参与/ 的/ 讨论组/ 数/ ,/ 微博/ 的/ 影响力/ 因素/ 包括/ 发布/ 时间/ 、/ 被/ 回复/ 次数/ 、/ 被/ 转发/ 次数/ 和/ 该/ 微博/ 包含/ 的/ 信息量/ [/ 18/ ]/ ./ 表/ 1/ 展示/ 了/ 3/ 位/ 用户/ 在/ 社交/ 网络/ 中/ 的/ 影响力/ 特征/ ,/ 由于/ Ross/ 比/ John/ 具有/ 更/ 多/ 的/ 粉丝/ 和/ 关注/ 用户/ ,/ 因此/ Ross/ 在/ 社交/ 网络/ 中/ 具有/ 更大/ 的/ 影响力/ ;/ 表/ 2/ 展示/ 了/ 3/ 条微博/ 的/ 受欢迎/ 程度/ 特征/ ,/ 微博/ 3750/ 被/ 回复/ 次数/ 、/ 被/ 转发/ 次数/ 和/ 信息量/ 均/ 比/ 其他/ 微/ 博多/ ,/ 因此/ 该/ 微博比/ 其他/ 两条/ 微博/ 更/ 受欢迎/ ./ 用户名/ 微博数/ 粉丝/ 数/ 关注/ 数组/ 数/ RossMathews18591217363062664BradWood21461790394122JohnNocella718611405/ 微博/ 发布/ 时间/ 被/ 回复/ 次数/ 被/ 转发/ 次数/ 信息量/ 3748t13749t23750t3/ 此外/ ,/ 本/ 阶段/ 还要/ 推断/ 新/ 发布/ 微博/ 的/ 主题/ 分布/ ,/ 以及/ 更新/ 和/ 记录/ 用户/ 的/ 兴趣/ 取向/ ./ 实践/ 中/ 运用/ LDA/ 主题/ 模型/ 推断/ 微博/ 的/ 主题/ 分布/ ,/ 推断/ 过程/ 中/ 所用/ 到/ 的/ 变量/ 以及/ 变量/ 的/ 含义/ 如表/ 3/ 所示/ ,/ 具体/ 细节/ 将/ 在/ 第/ 4/ 节中/ 阐述/ ./ ①/ https/ :/ // // www/ ./ facebook/ ./ com/ // about/ // graphsearchPage4/ 变量/ T/ 主题/ 个数/ W/ 单词/ 个数/ α/ 用户/ 兴趣/ 取向/ 先验/ 分布/ 的/ 参数/ φ/ jwi/ 单词/ wi/ 属于/ 第/ j/ 个/ 主题/ 的/ 概率/ zwi/ 单词/ wi/ 的/ 主题/ Zt/ ,/ / in/ (/ t/ )/ 微博/ t/ 中/ 单词/ 的/ 个数/ n/ (/ j/ ,/ t/ )/ 微博/ t/ 中/ 属于/ 第/ j/ 个/ 主题/ 的/ 单词/ 数量/ 3.2/ 用户/ 感兴趣/ 微博/ 推荐/ 考虑/ 到/ 微博/ 系统/ 需要/ 响应/ 海量/ 用户/ 发布/ 的/ 新/ 微博/ 以及/ 转发/ 、/ 回复/ 其他/ 用户/ 的/ 微博/ ,/ 本文/ 运用/ 流/ 数据模型/ 对/ 微博/ 的/ 发布/ 和/ 更新/ 进行/ 建模/ ./ 由于/ 用户/ 通常/ 仅/ 对/ 新近/ 发布/ 或/ 更新/ 的/ 微博/ 感兴趣/ ,/ 而/ 随着/ 时间/ 的/ 推移/ ,/ 较/ 早/ 发布/ 的/ 微博/ 越来越/ 不/ 被/ 用户/ 关注/ ./ 因此/ ,/ 我们/ 利用/ 流/ 数据/ 上/ 的/ 滑动/ 窗口/ 模型/ 对/ 微博/ 的/ 更新/ 和/ 过期/ 进行/ 建模/ ,/ 使得/ 滑动/ 窗口/ 中/ 总是/ 维护/ 新近/ 发布/ 或者/ 更新/ 的/ 微博/ ./ 如图/ 1/ 所示/ ,/ 微博/ 系统/ 上/ 用户/ 感兴趣/ 微博/ 的/ 实时/ 推荐/ 由/ 3/ 部分/ 组成/ :/ (/ 1/ )/ 当前/ 滑动/ 窗口/ 上/ 微博/ 的/ 索引/ ;/ (/ 2/ )/ 全局/ top/ -/ k/ 微博/ 列表/ 的/ 更新/ ;/ (/ 3/ )/ 用户/ 个性化/ 微博/ 的/ 推荐/ ./ 为了/ 快速/ 响应/ 实时/ 微博/ 的/ 推荐/ ,/ 根据/ 用户/ 的/ 不同/ 偏好/ 对/ 滑动/ 窗口/ 中/ 的/ 微博/ 建立/ 网格/ 索引/ ./ 对/ 特定/ 偏好/ 的/ 用户/ ,/ 根据/ 索引/ 中微博/ 的/ m/ 个/ 特征/ 维护/ 一个/ 全局/ top/ -/ k/ 微博/ 列表/ ,/ 它/ 表示/ 新近/ 最/ 热门/ 的/ k/ 条微博/ ./ 随着/ 时间/ 的/ 推移/ ,/ 全局/ top/ -/ k/ 列表/ 中/ 的/ 微博/ 需要/ 及时/ 更新/ 以/ 响应/ 微博/ 的/ 实时/ 推荐/ ./ 在/ 每个/ 时刻/ ,/ 根据/ 全局/ top/ -/ k/ 列表/ 中微博/ 的/ 主题/ 分布/ 和/ 用户/ 的/ 兴趣/ 取向/ ,/ 从/ 全局/ top/ -/ k/ 列表/ 中/ 选择/ 用户/ 最/ 可能/ 感兴趣/ 的/ k/ 条微博/ 推荐/ 给/ 用户/ (/ k/ </ k/ )/ ./ 4/ 推断/ 微博/ 的/ 主题/ 分布/ 和/ 用户/ 的/ 兴趣/ 取向/ 每条/ 微博/ 通常/ 涉及/ 一个/ 或/ 多个/ 主题/ ,/ 微博/ 的/ 这个/ 特征/ 正好/ 和/ LDA/ 主题/ 模型/ 匹配/ ,/ 因此/ 本文/ 采用/ LDA/ 主题/ 模型/ 来/ 推断/ 微博/ 的/ 主题/ 分布/ ./ 此外/ ,/ 一个/ 用户/ 所/ 发布/ 的/ 微博/ 很/ 好/ 地/ 反映/ 了/ 该/ 用户/ 所/ 关心/ 的/ 主题/ ./ 因此/ ,/ 通过/ 该/ 用户/ 发布/ 的/ 微博/ 的/ 主题/ 分布/ 可以/ 推断/ 他/ 的/ 兴趣/ 取向/ ./ 4.1/ 主题/ 分布/ 和/ 兴趣/ 取向/ 令/ C/ 表示/ 预先/ 设定/ 的/ T/ 个/ 主题/ 集合/ ,/ 标记/ 为/ C/ =/ {/ C1/ ,/ C2/ ,/ …/ ,/ CT/ }/ ./ 给定/ 一条/ 微博/ t/ ,/ 其/ 主题/ 分布/ 定义/ 如下/ :/ 定义/ 1/ ./ 主题/ 分布/ ./ 令/ 主题/ 集合/ C/ =/ {/ C1/ ,/ C2/ ,/ …/ ,/ CT/ }/ ,/ t/ 为/ 一条/ 微博/ ,/ 则/ p/ (/ Ci/ |/ t/ )/ 表示/ 该/ 微博/ t/ 属于/ 主题/ Ci/ 的/ 后验/ 概率/ ,/ 由/ 这/ T/ 个/ 后验/ 概率/ 组成/ 的/ 向量/ (/ p/ (/ C1/ |/ t/ )/ ,/ p/ (/ C2/ |/ t/ )/ ,/ …/ ,/ p/ (/ CT/ |/ t/ )/ )/ 被/ 称为/ 微博/ t/ 的/ 主题/ 分布/ ./ 易知/ ,/ p/ (/ Ci/ |/ t/ )/ 的/ 数值/ 越大/ ,/ 表明/ 微博/ t/ 属于/ 主题/ Ci/ 的/ 可能性/ 越高/ ./ 假设/ 某/ 用户/ 发布/ 了/ d/ 条微博/ ,/ 标记/ 为/ {/ t1/ ,/ t2/ ,/ …/ ,/ td/ }/ ./ 由于/ 每条/ 微博/ 对应/ 一个/ 主题/ 分布/ ,/ 该/ 用户/ 的/ 兴趣/ 取向/ 可以/ 定义/ 如下/ ./ 定义/ 2/ ./ 兴趣/ 取向/ ./ 令/ {/ t1/ ,/ t2/ ,/ …/ ,/ td/ }/ 表示/ 某/ 用户/ 发布/ 的/ 微博/ 集合/ ,/ 则/ 该/ 用户/ 的/ 兴趣/ 取向/ 可用/ 一个/ T/ 维/ 向量/ (/ v1/ ,/ v2/ ,/ …/ ,/ vT/ )/ 描述/ ,/ 其中/ vi/ =/ 1/ 当/ 用户/ 尚未/ 发布/ 任何/ 微博时/ ,/ 该/ 用户/ 的/ 兴趣/ 取向/ 为/ 0/ 向量/ ./ 兴趣/ 取向/ 中/ 分量/ vi/ 越大/ 表明/ 用户/ 对/ 主题/ Ci/ 越/ 感兴趣/ ./ 以下/ 介绍/ 如何/ 推断/ 微博/ 的/ 主题/ 分布/ ./ 4.2/ 推断/ 微博/ 的/ 主题/ 分布/ 给定/ 训练/ 数据/ 集/ ,/ 完成/ LDA/ 模型/ 学习/ 后/ ,/ 已知/ 每个/ 单词/ 在/ T/ 个/ 主题/ 上/ 的/ 分布/ φ/ 以及/ 训练/ 数据/ 集中/ 每条/ 微博/ 的/ 主题/ 分布/ ./ 对于/ 不/ 包含/ 在/ 训练/ 数据/ 集中/ 的/ 微博/ ,/ 可以/ 通过/ φ/ 推断/ 该/ 微博中/ 各/ 单词/ 所属/ 主题/ ,/ 进而/ 推断/ 该/ 微博/ 的/ 主题/ 分布/ ./ 假设/ 微博/ t/ 由/ n/ 个/ 单词/ 组成/ ,/ 记/ 为/ {/ w1/ ,/ w2/ ,/ …/ ,/ wn/ }/ ,/ 令/ 随机变量/ zwi/ 表示/ 单词/ wi/ 的/ 主题/ ./ 在/ 给定/ 其他/ 参数/ 的/ 情形/ 下/ ,/ 对/ 微博/ t/ 中/ 单词/ wi/ ,/ zwi/ =/ j/ (/ 单词/ wi/ 属于/ 第/ j/ 个/ 主题/ )/ 的/ 概率/ 计算/ 如下/ :/ P/ (/ zwi/ =/ j/ |/ Zt/ ,/ / i/ ,/ t/ ,/ φ/ ,/ α/ )/ ∝/ P/ (/ zwi/ =/ j/ ,/ Zt/ ,/ / i/ ,/ t/ |/ φ/ ,/ α/ )/ 其中/ 式/ (/ 1/ )/ 中/ 所有/ 的/ 变量/ 及其/ 含义/ 如表/ 3/ 中/ 所示/ ./ 基于/ 式/ (/ 1/ )/ ,/ 单词/ wi/ 的/ 主题/ 分布/ 记为/ Vwi/ =/ (/ v1/ ,/ v2/ ,/ …/ ,/ vT/ )/ ,/ 其中/ 分量/ vj/ 标准化/ 式/ (/ 1/ )/ 中/ 的/ 概率/ ,/ 即/ 单词/ wi/ 的/ 主题/ 从/ 分布/ Vwi/ =/ (/ v1/ ,/ v2/ ,/ …/ ,/ vT/ )/ 中/ 抽样/ 得到/ ./ 最终/ ,/ 微博/ t/ 属于/ 第/ j/ 个/ 主题/ 的/ 概率/ θ/ t/ ,/ j/ 可以/ 估计/ 为/ 最后/ ,/ 微博/ t/ 的/ 主题/ 分布/ 表示/ 为/ θ/ ^/ t/ =/ (/ θ/ ^/ t/ ,/ 1/ ,/ θ/ ^/ t/ ,/ 2/ ,/ …/ ,/ θ/ ^/ t/ ,/ T/ )/ ./ 在/ 推断/ 微博/ 主题/ 分布/ 的/ 过程/ 中/ ,/ 每次/ 迭代/ 复杂度/ 是/ O/ (/ 1/ )/ ./ 令/ r/ 表示/ 迭代/ 次数/ (/ 通常/ 可设/ 为/ 100/ )/ ,/ 则/ Page5/ 微博/ 主题/ 分布/ 推断/ 的/ 复杂度/ 为/ O/ (/ r/ )/ ./ 在/ 式/ (/ 1/ )/ 中/ ,/ 只/ wi/ 独立/ 于/ 微博/ t/ ,/ 它/ 用于/ 衡量/ 用户/ 在/ 微博/ 系统/ 上/ 有/ φ/ j/ 阶段性/ 的/ 用词/ 规律/ ./ 随着/ 时间推移/ ,/ 用词/ 规律/ 和/ 用户/ 兴趣/ 会/ 发生变化/ ,/ 因而/ 需要/ 周期/ 地/ (/ 比如/ 每月/ 一次/ )/ 构建/ LDA/ 训练/ 数据/ 集以/ 更新/ φ/ j/ 以/ 离线/ 完成/ )/ ,/ 进而/ 更新/ 微博/ 的/ 主题/ 分布/ 和/ 用户/ 的/ 兴趣/ 取向/ ./ 5/ 实时/ 个性化/ 的/ 微博/ 推荐/ 微博/ 用户/ 往往/ 关注/ 新近/ 发生/ 的/ 热点/ 事件/ ,/ 考虑/ 到/ 用户/ 的/ 不同/ 兴趣/ ,/ 所/ 推荐/ 的/ 微博/ 不仅/ 要/ 与/ 新近/ 的/ 热点/ 事件/ 相关/ ,/ 而且/ 还要/ 与/ 用户/ 的/ 兴趣/ 吻合/ ./ 本文/ 选择/ 新近/ 发布/ 的/ 微博/ ,/ 并/ 根据/ 其/ 特征/ 对/ 它们/ 受欢迎/ 的/ 程度/ 进行/ 排序/ ,/ 最后/ 在/ top/ -/ k/ 受欢迎/ 的/ 微博中/ 选择/ 用户/ 可能/ 感兴趣/ 的/ 微博/ ./ 5.1/ 用户/ 偏好/ 和/ top/ -/ 犽/ 打分/ 函数/ 的/ 性质/ 不同/ 用户/ 对/ 新近/ 发生/ 的/ 热点/ 事件/ 的/ 界定/ 可能/ 不同/ ,/ 有/ 的/ 可能/ 关注/ 大家/ 都/ 关注/ 的/ 事件/ (/ 例如/ 被/ 转发/ 或/ 回复/ 次数/ 较/ 多/ 的/ 事件/ )/ 、/ 有/ 的/ 可能/ 仅/ 关注/ 新近/ 发生/ 的/ 事件/ ./ 不难看出/ ,/ 热点/ 事件/ 的/ 界定/ 和/ 用户/ 的/ 偏好/ 相关/ ,/ 而/ 不同/ 用户/ 的/ 偏好/ 可能/ 不同/ ./ 文献/ [/ 19/ ]/ 探讨/ 了/ 不同/ 用户/ 偏好/ 的/ 提取/ 方法/ ./ 事实上/ ,/ 构建/ 一个/ 精准/ 而/ 有效/ 的/ 用户/ 偏好/ 模型/ 并非易事/ ,/ 我们/ 将/ 此项工作/ 列为/ 本文/ 的/ 后续/ 工作/ ./ 本文/ 运用/ 完全/ 替代/ 型/ 效用函数/ 来/ 表示/ 用户/ 对/ 微博/ 的/ 偏好/ 程度/ [/ 20/ ]/ ,/ 令微博/ t/ 有/ m/ 个/ 特征/ ,/ 标记/ 为/ (/ x1/ ,/ x2/ ,/ …/ ,/ xm/ )/ ,/ 用户/ 偏好/ 对应/ 的/ 效用/ 函图/ 2/ 微博/ 的/ 更新/ 区域/ 以及/ 微博/ 的/ 更新/ 和/ 过期/ 在/ 图/ 2/ (/ a/ )/ 中/ ,/ 假设/ (/ ret/ ,/ rep/ )/ 是/ 微博/ t/ 在/ 2/ 维/ 特征/ 空间/ 中/ 的/ 点/ ,/ 它/ 表明/ t/ 被/ 转发/ 了/ ret/ 次/ 、/ 被/ 回复/ 了/ rep/ 次/ ./ 易知/ ,/ 微博/ t/ 的/ 打分/ 是/ 所有/ 落/ 在/ 矩形/ 区域/ R/ 内/ 的/ 微博/ 的/ 最高/ 分数/ ,/ 因此/ 将/ 微博/ t/ 的/ 分数/ 记为/ maxscore/ (/ R/ )/ ./ 另外/ ,/ 微博/ tk/ 的/ 分数/ 是/ 所有/ 落/ 在/ 空白/ 数/ 可以/ 表示/ 为/ score/ (/ t/ )/ =/ f/ (/ x1/ ,/ x2/ ,/ …/ ,/ xm/ )/ =/ ∑/ m/ 一般来说/ ,/ 被/ 转发/ 或者/ 被/ 回复/ 次数/ 越多/ 的/ 微博越/ 受欢迎/ ./ 因此/ ,/ 效用函数/ f/ 应/ 具有/ 单调/ 性/ ,/ 即/ ai/ 均/ 为/ 非/ 负数/ ./ 假设/ 两条/ 微博/ t1/ 和/ t2/ 满足/ t1/ ./ xi/ / t2/ ./ xi/ 以及/ t1/ ./ xj/ =/ t2/ ./ xj/ (/ j/ ≠/ i/ )/ ,/ 那么/ 效用函数/ f/ 一定/ 满足/ f/ (/ t1/ ./ x1/ ,/ t1/ ./ x2/ ,/ …/ ,/ t1/ ./ xm/ )/ / f/ (/ t2/ ./ x1/ ,/ t2/ ./ x2/ ,/ …/ ,/ t2/ ./ xm/ )/ ./ 在/ 本文/ 中/ ,/ 我们/ 假设/ 用户/ 的/ 偏好/ 已经/ 被/ 归/ 为/ h/ 类/ ,/ 同类/ 用户/ 的/ 效用函数/ 相同/ ./ 因此/ ,/ 系统/ 中共/ 有/ h/ 个/ 不同/ 的/ 效用函数/ ./ 对/ 具有/ 特定/ 偏好/ 的/ 用户/ ,/ 可/ 利用/ 其/ 偏好/ 所/ 对应/ 的/ 效用函数/ 作为/ top/ -/ k/ 打分/ 函数/ ,/ 选择/ 他们/ 认为/ 最/ 热门/ 的/ k/ 条微博/ ./ 如图/ 2/ (/ a/ )/ 所示/ ,/ 效用函数/ (/ 打分/ 函数/ )/ 为/ f/ (/ x1/ ,/ x2/ )/ =/ x1/ +/ x2/ ,/ 其中/ x1/ 、/ x2/ 分别/ 表示/ 被/ 转发/ 和/ 被/ 回复/ 次数/ ./ 因此/ ,/ 每条/ 微博/ 表示/ 为/ 2/ -/ 维空间/ 中/ 的/ 一个点/ ,/ 用户/ 的/ 偏好/ 由/ 微博/ 的/ 被/ 转发/ 和/ 被/ 回复/ 次数/ 决定/ ./ 如果/ 所有/ 微博/ 的/ 特征/ 落/ 在/ 由点/ (/ 0/ ,/ 0/ )/ 、/ (/ 0/ ,/ rep/ )/ 、/ (/ ret/ ,/ 0/ )/ 和/ (/ ret/ ,/ rep/ )/ 围成/ 的/ 矩形/ 内/ ./ 图中/ 由/ 微博/ tk/ 诱导/ 的/ 直线/ 把/ 整个/ 空间/ 分成/ 三/ 部分/ ,/ 落/ 在/ 左下角/ 部分/ 的/ 微博/ 的/ 打分/ 低于/ tk/ 的/ 分数/ ,/ 落/ 在/ 直线/ 上/ 的/ 微博/ 的/ 打分/ 等于/ tk/ 的/ 分数/ ,/ 而落/ 在/ 右上角/ 阴影/ 部分/ 的/ 微博/ 的/ 打分/ 大于/ tk/ 的/ 分数/ ./ 当/ tk/ 为/ 第/ k/ 条/ 打分/ 最高/ 的/ 微博时/ ,/ 如果/ 一条/ 微博/ 被/ 更新/ 到/ 阴影/ 区域/ 内/ ,/ 将/ 导致/ top/ -/ k/ 列表/ 的/ 更新/ ,/ 反之/ 则/ 不必/ 更新/ ./ 因此/ ,/ 我们/ 称/ 右上角/ 的/ 阴影/ 部分/ 为/ top/ -/ k/ 列表/ 的/ 更新/ 区域/ ./ 区域/ 内微博/ 分数/ 的/ 上界/ ,/ 我们/ 称该/ 空白/ 区域/ 为/ 微博/ tk/ 的/ 统治/ 区域/ ./ 由于/ 在/ 微博/ 系统/ 上/ ,/ 用户/ 仅/ 关心/ 新近/ 发生/ 的/ 热点/ 事件/ ./ 因此/ ,/ 我们/ 必须/ 更新/ top/ -/ k/ 微博/ 列表/ ,/ 否则/ 推荐/ 的/ 微博所/ 讨论/ 的/ 事件/ 因为/ 用户/ 可能/ 已经/ 知晓/ 而/ Page6/ 被/ 用户/ 所/ 忽视/ ./ 而/ 滑动/ 窗口/ 模型/ 的/ 运用/ 意味着/ 每时每刻/ 微/ 博会/ 更新/ (/ 包括/ 特征/ 更新/ 的/ 微博/ 或者/ 新/ 发布/ 的/ 微博/ )/ 或者/ 过期/ ,/ 这/ 就/ 需要/ 在/ 滑动/ 窗口/ 上/ 动态/ 维护/ 全局/ top/ -/ k/ 列表/ ./ 如图/ 2/ (/ b/ )/ 所示/ ,/ 0/ 时刻/ 表示/ 当前/ 时间/ ,/ 每条/ 线段/ 表示/ 相应/ 微博/ 的/ 生命周期/ ,/ 左/ 端点/ 表示/ 微博/ 到达/ 的/ 时间/ ,/ 而右/ 端点/ 表示/ 微博/ 的/ 过期/ 时间/ ./ 例如/ ,/ t5/ 在/ 1/ 时刻/ 到达/ ,/ 而/ 在/ 4/ 时刻/ 过期/ ./ 在/ 0/ 时刻/ 有/ 4/ 条未/ 过期/ 微博/ ,/ 根据/ 用户/ 的/ 效用函数/ 降序/ 排列/ 为/ t1/ ,/ t2/ ,/ t3/ ,/ t4/ ./ 假设/ 我们/ 维护/ top/ -/ 2/ 的/ 微博/ ,/ 那么/ 此时/ 的/ top/ -/ 2/ 列表/ 为/ t1/ 、/ t2/ ./ 在/ 1/ 时刻/ ,/ 微博/ t4/ 过期/ 而/ 微博/ t5/ 到达/ ,/ 但是/ t5/ 不如/ t1/ ,/ t2/ 受欢迎/ ,/ 且/ t4/ 不/ 在/ top/ -/ 2/ 列表/ 中/ ,/ 因此/ top/ -/ 2/ 列表/ 不必/ 更新/ ./ 而/ 在/ 2/ 时刻/ ,/ 微博/ t6/ 到达/ ,/ 微博/ t2/ 过期/ ,/ 此时/ 有/ 4/ 条微/ 博未/ 过期/ ,/ 它们/ 的/ 顺序/ 是/ t1/ ,/ t5/ ,/ t3/ ,/ t6/ ,/ 因此/ top/ -/ 2/ 列表/ 更新/ 为/ t1/ ,/ t5/ ./ 基于/ 以上/ 观测/ ,/ 我们/ 的/ 首要任务/ 是/ 为/ 特定/ 偏好/ 的/ 用户/ 维护/ 新近/ 最/ 热门/ 的/ k/ 条微博/ ,/ 该/ 问题/ 可以/ 用流/ 数据/ 上/ 基于/ 滑动/ 窗口/ 模型/ 的/ 实时/ top/ -/ k/ 查询/ 来/ 建模/ ./ 而/ 连续不断/ 的/ 实时/ top/ -/ k/ 查询/ 需要/ 两个/ 模块/ :/ (/ 1/ )/ 初始化/ 全局/ top/ -/ k/ 列表/ ;/ (/ 2/ )/ 更新/ 全局/ top/ -/ k/ 列表/ ./ 5.2/ 初始化/ 全局/ top/ -/ 犽/ 列表/ Mouratidis/ 等/ 人/ [/ 21/ ]/ 提出/ 的/ 流/ 数据/ 上/ 基于/ 滑动/ 窗口/ 模型/ 的/ top/ -/ k/ 查询/ 算法/ ,/ 简记/ 为/ CT/ (/ ContinuousTop/ -/ kAlgorithm/ )/ 算法/ ,/ 由于/ 其/ 高效率/ 而/ 被/ 广泛应用/ ./ 基于/ 该/ 算法/ ,/ 我们/ 提出/ 了/ 维护/ 新近/ 最/ 热门/ 的/ k/ 条微博/ 的/ 方法/ ./ 图/ 3/ 展示/ 了/ 滑动/ 窗口/ 中微博/ 的/ 索引/ 方法/ ./ 假设/ 每个/ 格子/ 在/ 第/ i/ 维上/ 的/ 长度/ 为/ δ/ i/ ,/ 那么/ 格子/ ci/ ,/ j/ 将/ 索引/ 特征/ 在/ [/ i/ ·/ δ/ 1/ ,/ (/ i/ +/ 1/ )/ ·/ δ/ 1/ ]/ ×/ [/ j/ ·/ δ/ 2/ ,/ (/ j/ +/ 1/ )/ ·/ δ/ 2/ ]/ 范围/ 内/ 的/ 所有/ 微博/ ,/ 其中/ i/ ,/ j/ =/ 0/ ,/ 1/ ,/ 2/ ,/ …/ ./ 假设/ 一条/ 微博/ 在/ 特征/ 空间/ 中/ 表示/ 为/ (/ x1/ ,/ x2/ )/ ,/ 那么/ 它/ 将/ 被/ 索引/ 在/ 格子/ ci/ ,/ j/ 中/ ,/ 其中/ i/ =/ x1/ // δ/ 1/ ,/ j/ =/ x2/ // δ/ 2/ ./ 因为/ 微博/ 的/ 被/ 转发/ 次数/ 或者/ 被/ 回复/ 次数/ 服从/ 长尾/ 分布/ [/ 22/ ]/ ,/ 所以/ 大部分/ 微博是/ 很少/ 被/ 转发/ 或者/ 回复/ 的/ ./ 在/ 图/ 3/ 的/ 网格/ 索引/ 中/ ,/ 它们/ 被/ 索引/ 在/ 网格/ 左下角/ 的/ 少数/ 格子/ 中/ ./ 即/ ,/ 不/ 被/ 关注/ 的/ 微博/ 被/ 索引/ 在/ 左下角/ 的/ 少数/ 格子/ 中/ ./ 为了/ 决定/ 格子/ 的/ 访问/ 次序/ ,/ 格子/ ci/ ,/ j/ 中/ 索引/ 微博/ 的/ 最高/ 分数/ 记为/ maxscore/ (/ ci/ ,/ j/ )/ ./ 访问/ 网格/ 索引/ 的/ 简单/ 方法/ (/ 记为/ Nave/ 方法/ )/ 是/ 按照/ maxscore/ (/ c/ )/ 降序/ 排列/ 所有/ 的/ 格子/ ,/ 再/ 逐一/ 扫描/ 这些/ 格子/ ./ 当/ 扫描/ 一个/ 格子/ 时/ ,/ 计算/ 该/ 格子/ 中/ 每条/ 微博/ 的/ 分数/ ,/ 从而/ 更新/ 全局/ top/ -/ k/ 列表/ ./ 若/ top/ -/ k/ 列表/ 中微博/ 的/ 最低/ 分数/ 高于/ 格子/ c/ 的/ maxscore/ (/ c/ )/ ,/ 则/ 算法/ 终止/ ./ 然而/ ,/ 每个/ 格/ 子中微/ 博/ 的/ 更新/ ,/ 可能/ 导致/ maxscore/ (/ c/ )/ 的/ 变化/ ,/ 重新/ 对/ 所有/ 格子/ 进行/ 排序/ 是/ 必要/ 的/ ./ 此外/ ,/ 当/ 格子/ c/ 位于/ 左下角/ 时/ ,/ 由于/ 这些/ 格子/ 中/ 的/ 微博/ 被/ 转发/ 或/ 回复/ 的/ 次数/ 较/ 少/ ,/ 不会/ 成为/ 用户/ 所/ 关注/ 的/ 热门/ 微博/ ./ 当新/ 的/ 微博/ 被/ 索引/ 到/ 这些/ 格子/ 或/ 其中/ 的/ 微博/ 过期/ ,/ Nave/ 方法/ 需要/ 更新/ 这些/ 格子/ 中/ 的/ maxscore/ (/ c/ )/ 值/ ,/ 但/ 这些/ 更新/ 操作/ 是/ 不必要/ 的/ ./ 因此/ ,/ 该/ 方法/ 成本/ 太高/ ./ 为/ 解决/ Nave/ 方法/ 的/ 不足/ ,/ 在/ 没有/ 预先/ 对/ maxscore/ (/ c/ )/ 进行/ 排序/ 的/ 情况/ 下/ ,/ 我们/ 需要/ 确定/ 网格/ 索引/ 的/ 访问/ 方式/ ./ 图/ 4/ (/ a/ )/ 中/ 格子/ c5/ ,/ 5/ 左下角/ 的/ 微博/ t/ 对应/ 着/ 该/ 格子/ 中/ 分数/ 最小/ 的/ 微博/ ;/ 由于/ 微博/ t1/ 、/ t2/ 和/ t/ 的/ 分数/ 相同/ ,/ 根据/ 微博/ 统治/ 区域/ 的/ 定义/ ,/ 微博/ t/ 的/ 分数/ 大于/ 左下角/ 部分/ 所有/ 灰色/ 格子/ 中/ 索引/ 的/ 微博/ 的/ 分数/ ;/ 因此/ ,/ 比微博/ t/ 分数/ 高/ 的/ 微博/ 一定/ 在/ 格子/ c4/ ,/ 5/ 、/ c5/ ,/ 4/ 和/ c5/ ,/ 5/ 中/ ./ 易知/ ,/ 格子/ c5/ ,/ 5/ 右上角/ 对应/ 的/ 微博/ 分数/ 最高/ ,/ 因此/ 格子/ c5/ ,/ 5/ 应该/ 被/ 首先/ 扫描/ ,/ 然后/ 扩展/ 到/ c4/ ,/ 5/ 和/ c5/ ,/ 4/ ,/ 而/ 这/ 两个/ 格子/ 的/ 扫描/ 顺序/ 由/ maxscore/ (/ c4/ ,/ 5/ )/ 和/ maxscore/ (/ c5/ ,/ 4/ )/ 决定/ ,/ 分数/ 较大/ 的/ 先/ 被/ 访问/ ./ 特别/ 需要/ 指出/ 的/ 是/ ,/ 因为/ 被/ 转发/ 或/ 回复/ 的/ 次数/ 较/ 少/ ,/ 左下角/ 的/ 格子/ 中/ 索引/ 了/ 大量/ 用户/ 不感兴趣/ 的/ 微博/ ./ 为/ 节省/ 开销/ ,/ 无需/ 更新/ 这些/ 格子/ 的/ 最高/ 分数/ ./ 通过/ 预先/ 设定/ 一个/ 阈值/ M/ ,/ 当/ 0/ / i/ ,/ j/ / M/ ,/ 格子/ ci/ ,/ j/ 中/ 的/ maxscore/ (/ ci/ ,/ j/ )/ 不必/ 更新/ ,/ 即/ 左下方/ 格子/ 的/ 最高/ 分数/ 不必/ 更新/ ./ 不同/ 效用函数/ 对应/ 特征/ 空间/ 中/ 不同/ 的/ 直线/ ,/ 它们/ 决定/ 了/ 不同/ top/ -/ k/ 列表/ 的/ 更新/ 区域/ 以及/ 微博/ 的/ 统治/ 区域/ ./ 如图/ 4/ (/ b/ )/ ,/ 当/ 打分/ 函数/ 为/ f/ (/ x1/ ,/ x2/ )/ =/ Page73x1/ +/ 4x2/ 时/ ,/ 图中/ 的/ 直线/ 同样/ 将/ 整个/ 空间/ 分成/ 3/ 部分/ ,/ 其中/ 空白/ 区域/ 落/ 在/ 了/ tk/ 的/ 统治/ 区域/ ,/ 而落/ 在/ 直线/ 右上角/ 区域/ 的/ 微博/ 的/ 分数/ 高于/ tk/ 的/ 分数/ ./ 当/ tk/ 为/ top/ -/ k/ 列表/ 中/ 分数/ 第/ k/ 高/ 的/ 微博时/ ,/ 易知/ 直线/ f/ (/ x1/ ,/ x2/ )/ =/ 3x1/ +/ 4x2/ 定义/ 了/ 该/ top/ -/ k/ 列表/ 的/ 更新/ 区域/ ,/ 只有/ 当微博/ 被/ 更新/ 到/ 与/ 该/ 更新/ 区域/ 相交/ 的/ 格子/ {/ c5/ ,/ 5/ ,/ c4/ ,/ 5/ ,/ c5/ ,/ 4/ ,/ c3/ ,/ 5/ ,/ c4/ ,/ 4/ ,/ c5/ ,/ 3/ ,/ c4/ ,/ 3/ ,/ c5/ ,/ 2/ ,/ c3/ ,/ 4/ }/ 中/ 时/ ,/ 才/ 可能/ 导致/ top/ -/ k/ 列表/ 的/ 更新/ ./ 而图/ 5/ 中微博/ t1/ 和/ 图/ 4/ (/ b/ )/ 中微博/ tk/ 在/ 索引/ 中/ 的/ 位置/ 相同/ ,/ 若/ t1/ 为/ top/ -/ k/ 列表/ 中/ 分数/ 第/ k/ 高/ 的/ 微博时/ ,/ 由于/ 不同/ 的/ 效用函数/ 从而/ 导致/ 和/ 更新/ 区域/ 相交/ 的/ 格子/ 变成/ 了/ {/ c5/ ,/ 5/ ,/ c4/ ,/ 5/ ,/ c5/ ,/ 4/ ,/ c3/ ,/ 5/ ,/ c4/ ,/ 4/ ,/ c5/ ,/ 3/ ,/ c4/ ,/ 3/ ,/ c5/ ,/ 2/ ,/ c3/ ,/ 4/ ,/ c2/ ,/ 5/ }/ ./ 初始化/ 全局/ top/ -/ k/ 列表/ L/ 如/ 算法/ 1/ 所述/ ,/ 其中/ f/ ./ top/ _/ score/ 记录/ 了/ 全局/ top/ -/ k/ 列表/ 中/ k/ 条微博/ 的/ 最低/ 分数/ ./ 第/ 3/ 行/ 把/ 最/ 右上角/ 的/ 格子/ 加入/ 到/ 最大/ 栈/ H/ 中/ (/ 最大/ 栈中/ 的/ key/ 是/ 格子/ c/ 的/ maxscore/ (/ c/ )/ )/ ,/ 第/ 5/ 行/ 每次/ 访问/ 最大/ 栈中/ 第一个/ 格子/ ci/ ,/ j/ ,/ 如果/ top/ -/ k/ 列表/ 中/ f/ ./ top/ _/ score/ 小于/ maxscore/ (/ ci/ ,/ j/ )/ ,/ 在/ 第/ 7/ 行中/ 计算/ 该/ 格子/ 中/ 所有/ 微博/ 的/ 分数/ ,/ 如果/ 微博/ t/ 的/ 分数/ 大于/ f/ ./ top/ _/ score/ ,/ 则/ 将/ 微博/ t/ 加入/ 到/ top/ -/ k/ 列表/ 中/ ./ 格子/ ci/ ,/ j/ 中/ 的/ 每条/ 微博/ 都/ 被/ 访问/ 后/ ,/ 第/ 8/ 行/ 和/ 第/ 9/ 行/ 分别/ 将/ 格子/ ci/ -/ 1/ ,/ j/ 和/ ci/ ,/ j/ -/ 1/ 加入/ 到/ 最大/ 栈/ H/ 中/ ./ 需要/ 特别/ 声明/ 的/ 是/ ,/ 如果/ top/ -/ k/ 列表/ 中微博/ 个数/ 小于/ k/ ,/ 那么/ f/ ./ top/ _/ score/ 的/ 值/ 为/ 0/ ;/ 当/ top/ -/ k/ 列表/ 中/ 正好/ 有/ k/ 条微/ 博时/ ,/ f/ ./ top/ _/ score/ 更新/ 为/ 这/ k/ 条微博/ 的/ 最低/ 分数/ ./ 反之/ ,/ 如果/ f/ ./ top/ _/ score/ 大于/ maxscore/ (/ c/ )/ ,/ 算法/ 终止/ ./ 算法/ 1/ ./ 初始化/ 全局/ top/ -/ k/ 列表/ 算法/ ./ 输入/ :/ 参数/ k/ ,/ 效用函数/ f/ 输出/ :/ 列表/ L1/ ./ 将/ 列表/ L/ 初始化/ 为空/ ;/ f/ ./ top/ _/ score/ 为/ 0/ ;/ 2/ ./ 将/ 最大/ 栈/ H/ 初始化/ 为空/ ;/ 3/ ./ 令/ c/ 是/ 最/ 右上角/ 的/ 格子/ ,/ 格子/ c/ 被/ 压入/ 栈/ H/ 中/ ;/ 4/ ./ REPEAT/ :/ H/ 不为/ 空且/ 第一个/ 格子/ ci/ ,/ j/ 的/ 5/ ./ 弹出/ H/ 中/ 的/ 第一个/ 格子/ ci/ ,/ j/ ;/ 6/ ./ FOREACH/ 格子/ ci/ ,/ j/ 中/ 的/ 微博/ t7/ ./ IFscore/ (/ t/ )/ >/ f/ ./ top/ _/ scoreTHEN8/ ./ IFci/ -/ 1/ ,/ j/ 不/ 在/ H/ 中/ THEN/ 将/ 其/ 加入/ H/ 中/ ;/ 9/ ./ IFci/ ,/ j/ -/ 1/ 不/ 在/ H/ 中/ THEN/ 将/ 其/ 加入/ H/ 中/ ;/ 10/ ./ RETURNL/ 假设/ k/ =/ 2/ ,/ 图/ 5/ 是/ 一个/ 初始化/ top/ -/ k/ 列表/ 的/ 例子/ ./ 将/ f/ ./ top/ _/ score/ 初始化/ 为/ 0/ ,/ L/ 初始化/ 为空/ ./ 从/ 最/ 右上角/ 的/ 格子/ c5/ ,/ 5/ 开始/ 扫描/ ,/ 由于/ 该/ 格子/ 为空/ ,/ 接着/ 扫描/ c5/ ,/ 4/ 和/ c4/ ,/ 5/ ./ 类似/ 的/ ,/ 当/ 扫描/ 完/ 格子/ c5/ ,/ 3/ ,/ 格子/ c5/ ,/ 2/ 和/ c4/ ,/ 3/ 被/ 加入/ 到/ 最大/ 栈中/ ,/ 根据/ 每个/ 格子/ 的/ 最高/ 分数/ ,/ 易知/ 此时/ 最大/ 栈中/ 的/ 第一个/ 位置/ 是/ c3/ ,/ 4/ ./ 计算/ c3/ ,/ 4/ 中/ 所有/ 微博/ 的/ 分数/ ,/ 并/ 将/ 微博/ t1/ 加入/ L/ 中/ ./ 因为/ top/ -/ k/ 列表/ 中/ 只/ 包含/ 微博/ t1/ ,/ 因此/ f/ ./ top/ _/ score/ 不会/ 被/ 更新/ ./ 根据/ 格子/ 的/ maxscore/ (/ )/ ,/ 随后/ 扫描/ 格子/ c5/ ,/ 2/ ,/ 并/ 将/ 微博/ t2/ 加入/ L/ 中/ ,/ 并/ 将/ f/ ./ top/ _/ score/ 更新/ 为/ score/ (/ t2/ )/ ./ 直到/ 没有/ 格子/ 满足/ maxscore/ (/ )/ >/ f/ ./ top/ _/ score/ 时/ ,/ 算法/ 1/ 终止/ ./ 5.3/ 更新/ 全局/ top/ -/ 犽/ 列表/ 在/ 初始化/ 阶段/ 之后/ ,/ 随着/ 时间/ 的/ 推移/ ,/ 全局/ top/ -/ k/ 列表/ 中/ 的/ 微博/ 也/ 会/ 被/ 更新/ 或者/ 过期/ ./ 全局/ top/ -/ k/ 列表/ 的/ 更新/ 如/ 算法/ 2/ 中/ 所示/ ,/ 令/ Supd/ 和/ Sdel/ 分别/ 表示/ 更新/ 和/ 过期/ 的/ 微博/ 集合/ ,/ 对于/ 每条/ 更新/ 的/ 微博/ t/ ,/ 如果/ t/ 不是/ 落/ 在/ 左下角/ 的/ 格子/ ci/ ,/ j/ 中/ (/ 即/ i/ ,/ j/ >/ M/ )/ ,/ 则/ 更新/ maxscore/ (/ ci/ ,/ j/ )/ (/ 第/ 5/ 行/ )/ ;/ 如果/ 该/ 微博/ 的/ 分数/ 大于/ f/ ./ top/ _/ score/ ,/ 则/ 将/ 该/ 微博/ 更新/ 到/ 全局/ top/ -/ k/ 列表/ 中/ (/ 第/ 6/ 行/ )/ ;/ 对于/ 每条/ 过期/ 的/ 微博/ t/ ,/ 将/ 微博/ t/ 从/ 相应/ 的/ 格子/ c/ 中/ 删除/ ,/ 如果/ i/ ,/ j/ >/ M/ ,/ 则/ 更新/ maxscore/ (/ ci/ ,/ j/ )/ (/ 第/ 7/ ~/ 9/ 行/ )/ ./ 如果/ 全局/ top/ -/ k/ 列表/ 中有/ 任何/ 一条/ 微博/ 过期/ ,/ 调用/ 算法/ 1/ 重新/ 计算/ 全局/ top/ -/ k/ 列表/ (/ 第/ 10/ 行/ )/ ./ 算法/ 2/ ./ 全局/ top/ -/ k/ 列表/ 的/ 更新/ 算法/ ./ 输入/ :/ 全局/ top/ -/ k/ 列表/ L/ 输出/ :/ 更新/ 之后/ 的/ top/ -/ k/ 列表/ L/ 以及/ 全局/ top/ -/ k/ 列表/ 中/ 1/ ./ REPEAT/ :/ 2/ ./ Supd/ 为/ 需要/ 更新/ 的/ 微博/ 集合/ ;/ Sdel/ 为/ 过期/ 的/ 微博/ 3/ ./ FOREACH/ 在/ Supd/ 中/ 的/ 微博/ t4/ ./ IF/ (/ i/ ,/ j/ >/ M/ )/ THEN5/ ./ 将/ t/ 插入/ 到/ 相应/ 的/ 格子/ ci/ ,/ j/ 中/ ,/ 6/ ./ IFt/ 的/ 分数/ 大于/ L/ 中/ 的/ f/ ./ top/ _/ score7/ ./ FOREACH/ 在/ Sdel/ 中/ 的/ 微博/ t/ ;/ 8/ ./ 将/ t/ 从/ 相应/ 的/ 格子/ ci/ ,/ j/ 中/ 删除/ ;/ Page89/ ./ IF/ (/ i/ ,/ j/ >/ M/ )/ THEN10/ ./ 如果/ L/ 和/ Sdel/ 有/ 公共/ 的/ 微博/ ,/ 则/ 调用/ 算法/ 1/ ;/ 11/ ./ 将/ 全局/ top/ -/ k/ 列表/ 中/ 更新/ 的/ 微博/ 加入/ S/ ;/ 12/ ./ RETURNL/ 和/ S/ 假设/ k/ =/ 2/ ./ 图/ 6/ (/ a/ )/ 是/ 4/ 条微博/ 在/ 索引/ 中/ 有效期/ 的/ 例子/ ,/ 而图/ 6/ (/ b/ )/ 展示/ 了/ 4/ 条微博/ 在/ 索引/ 中/ 的/ 位置/ ./ 在/ 0/ 时刻/ ,/ 微博/ t1/ ,/ t2/ 构成/ 了/ 全局/ top/ -/ 2/ 列表/ ./ 在/ 1/ 时刻/ ,/ 微博/ t3/ 和/ t4/ 到达/ ,/ 而/ 微博/ t2/ 过期/ ,/ 则/ Supd/ =/ {/ t3/ ,/ t4/ }/ 以及/ Sdel/ =/ {/ t2/ }/ ./ 先/ 将/ t3/ 和/ t4/ 分别/ 索引/ 在/ c4/ ,/ 2/ 和/ c4/ ,/ 4/ 中/ ,/ 并/ 更新/ maxscore/ (/ c4/ ,/ 2/ )/ 和/ maxscore/ (/ c4/ ,/ 4/ )/ ./ 然后/ 将/ t2/ 从/ c3/ ,/ 4/ 中/ 删除/ ,/ 并/ 重新/ 调用/ 算法/ 1/ 计算/ 全局/ top/ -/ k/ 列表/ ./ 因此/ ,/ 在/ 1/ 时刻/ ,/ top/ -/ 2/ 微博/ 列表/ 为/ t4/ ,/ t1/ ./ 5.4/ 推荐/ 用户/ 感兴趣/ 的/ 微博/ 算法/ 3/ 描述/ 了/ 如何/ 从/ 新近/ 最/ 热门/ 的/ k/ 条微/ 博中/ 选择/ 用户/ 可能/ 感兴趣/ 的/ k/ 条微博/ ,/ 输入/ 为/ 全局/ top/ -/ k/ 列表/ L/ 、/ 全局/ top/ -/ k/ 列表/ 中/ 的/ 更新/ 微博/ 集合/ S/ 以及/ 用户/ u/ 当前/ 感兴趣/ 的/ 微博/ 列表/ L/ (/ u/ )/ ./ 当/ L/ (/ u/ )/ 为/ 空时/ ,/ 第/ 1/ 行/ 计算/ 用户/ u/ 的/ 兴趣/ 取向/ 和/ L/ 中/ 每条/ 微博/ 的/ 主题/ 分布/ 间/ 的/ 相似/ 度/ ,/ 将/ 相似/ 度/ 最高/ 的/ k/ 条微博/ 返回/ 给/ 用户/ u/ ./ 如果/ L/ (/ u/ )/ 不为/ 空时/ ,/ exp/ 记做/ L/ (/ u/ )/ 中/ 过期/ 的/ 微博/ ./ 第/ 5/ 行/ 计算/ 用户/ u/ 的/ 兴趣/ 取向/ 和/ S/ 中/ 每条/ 微博/ 的/ 主题/ 分布/ 间/ 的/ 相似/ 度/ ,/ 用/ S/ 中/ 相似/ 度大/ 的/ 微博去/ 替换/ L/ (/ u/ )/ 去掉/ 过期/ 微博后/ 相似/ 度/ 小/ 的/ 微博/ ,/ 形成/ 的/ 新/ 列表/ 记为/ L/ (/ u/ )/ ./ 如果/ 全局/ top/ -/ k/ 列表/ 中/ 没有/ 更新/ 的/ 微博/ ,/ 第/ 6/ 行/ 计算/ 用户/ u/ 的/ 兴趣/ 取向/ 和/ L/ 中/ 去掉/ 过期/ 微博后/ 每条/ 微博/ 的/ 主题/ 分布/ 间/ 的/ 相似/ 度/ ,/ 将/ 相似/ 度/ 最高/ 的/ k/ 条微博/ 返回/ 给/ 用户/ u/ ./ 算法/ 3/ ./ 推荐/ 用户/ 感兴趣/ 的/ k/ 条微博/ 算法/ ./ 输入/ :/ 全局/ top/ -/ k/ 列表/ L/ ,/ 输出/ :/ 更新/ u/ 感兴趣/ 的/ k/ 条微博/ 列表/ L/ (/ u/ )/ 1/ ./ IFL/ (/ u/ )/ 为空/ THEN2/ ./ ELSE3/ ./ exp/ 记为/ L/ (/ u/ )/ 中/ 过期/ 的/ 微博/ ;/ 4/ ./ IFS/ 不为/ 空/ 5/ ./ 将/ L/ \/ exp/ 中/ 与/ u/ 的/ 兴趣/ 取向/ 相似/ 度/ 小于/ S/ 中/ 6/ ./ ELSE/ 将/ L/ \/ exp/ 中/ 与/ u/ 的/ 兴趣/ 取向/ 相似/ 度/ 最高/ 7/ ./ RETURNL/ (/ u/ )/ 用户/ 兴趣/ 取向/ 和/ 微博/ 主题/ 分布/ 间/ 的/ 相似/ 度/ 由/ 向量/ 的/ 内积/ 来/ 度量/ ,/ 其/ 几何/ 意义/ 可视化/ 在/ 图/ 7/ 中/ ./ 假设/ 有/ 两个/ 隐含/ 的/ 主题/ :/ 主题/ 1/ 和/ 主题/ 2/ ./ 而/ 向量/ 犢/ 表示/ 用户/ 的/ 兴趣/ 取向/ ,/ t1/ 和/ t2/ 分别/ 表示/ 两条/ 微博/ 的/ 主题/ 分布/ ./ 比较/ 用户/ 兴趣/ 取向/ 和/ 微博/ 主题/ 分布/ 的/ 夹角/ A1/ 和/ A2/ 可知/ ,/ 微博/ t1/ 和/ 该/ 用户/ 的/ 兴趣爱好/ 更/ 接近/ ./ 图/ 7/ 用户/ 兴趣/ 取向/ 和/ 微博/ 主题/ 分布/ 间/ 相似/ 度/ 的/ 可视化/ 5.5/ 算法/ 复杂度/ 分析/ 假设/ 微博/ 均匀分布/ 在/ 网格/ 索引/ 中/ (/ 由于/ 大多数/ 微博是/ 很少/ 被/ 转发/ 或/ 回复/ 的/ [/ 22/ ]/ ,/ 所以/ 越/ 靠近/ 左下角/ 的/ 网格/ 索引/ 的/ 微博越/ 多/ ./ 因此/ ,/ 按照/ 均匀分布/ 假设/ 计算出来/ 的/ 复杂度/ 可能/ 会/ 偏高/ )/ ,/ 滑动/ 窗口/ 的/ 长度/ 为/ l/ ,/ 每次/ 更新/ N/ 条微博/ ,/ 每维/ 的/ 格子/ 数为/ γ/ ,/ 特征/ 个数/ 为/ d/ ,/ 效用函数/ 个数/ 为/ h/ ,/ 用户数量/ 为/ U/ ,/ 则/ 网格/ 索引/ 中/ 格子/ 数为/ γ/ d/ ,/ 网格/ 中未/ 过期/ 微博为/ N/ ·/ l/ ,/ top/ -/ k/ 列表/ 的/ 更新/ 区域/ 在/ 网格/ 中所/ 占/ 的/ 比例/ 为/ k/ 此/ ,/ 与/ 更新/ 区域/ 相交/ 的/ 格子/ 数/ D/ =/ k/ 格子/ 中/ 平均/ 索引/ 了/ N/ ·/ l/ 的/ 微博/ 数量/ 为/ DN/ ·/ l/ 除/ 操作/ 的/ 复杂度/ 为/ O/ (/ DlogD/ )/ ./ 更新/ top/ -/ k/ 列表/ 中/ 每条/ 微博/ 的/ 复杂度/ 为/ O/ (/ logk/ )/ ,/ 那么/ 维护/ 整个/ top/ -/ k/ 列表/ 的/ 复杂度/ 为/ O/ (/ klogk/ )/ ./ 因此/ ,/ 初始化/ top/ -/ k/ 列表/ Page9/ 的/ 复杂度/ 为/ Tcom/ _/ k/ =/ O/ (/ DlogD/ +/ klogk/ )/ ./ 注意/ 到/ 每次/ 有/ N/ 条微博/ 更新/ ,/ 也/ 有/ N/ 条微博/ 过期/ ./ 因此/ ,/ 网格/ 中/ 每条/ 微博/ 过期/ 或者/ 更新/ 的/ 概率/ 为/ NN/ ·/ l/ =/ 1/ 或者/ 删除/ ,/ 那么/ 更新/ 区域/ 中/ 需要/ 检查/ DN/ 博/ 是否/ 为/ top/ -/ k/ 结果/ ./ 易知/ ,/ 平均/ 有/ k/ 博/ 需要/ 插入/ 到/ top/ -/ k/ 列表/ 中/ ./ 注意/ 到/ ,/ top/ -/ k/ 列表/ 中/ 至少/ 有/ 一条/ 微博/ 过期/ 的/ 概率/ 为/ pexp/ =/ 1/ -/ 1/ -/ 1/ (/ )/ l/ 博/ 是否/ 为/ top/ -/ k/ 结果/ 的/ 复杂度/ 为/ Ok/ (/ )/ l/ ,/ 更新/ top/ -/ k/ 列表/ 的/ 复杂度/ 为/ Ok/ 的/ 复杂度/ 为/ O/ (/ pexp/ ·/ Tcom/ _/ k/ )/ ./ 那么/ ,/ 维护/ 、/ 更新/ 全局/ top/ -/ k/ 列表/ 的/ 时间/ 复杂度/ 为/ (/ ON/ +/ (/ hkpexp/ ·/ Tcom/ _/ )/ )/ k/ ./ 因此/ ,/ 更新/ 网格/ 索引/ 的/ 复杂度/ 为/ O/ (/ N/ )/ ,/ 检查/ 更新/ 微/ 初始化/ 用户/ 个性化/ top/ -/ k/ 列表/ 的/ 复杂度/ 为/ Tcom/ _/ k/ =/ O/ (/ klogk/ )/ ,/ 而/ 每次/ 平均/ 有/ ktop/ -/ k/ 列表/ 中/ ,/ 因此/ 更新/ 用户/ 个性化/ top/ -/ k/ 列表/ 的/ 复杂度/ 为/ Ok/ 列表/ 的/ 复杂度/ 为/ O/ (/ pexp/ ·/ klogk/ )/ ./ 那么/ ,/ 推荐/ 和/ 更新/ 用户/ 个性化/ top/ -/ k/ 列表/ 的/ 时间/ 复杂度/ 为/ (/ (/ OUkl2logk/ +/ pexp/ ·/ Tcom/ _/ 6/ 实验/ 分析/ 实验/ 代码/ 用/ Java/ 语言/ 实现/ ,/ 实验/ 环境/ 由/ 一台/ Windows7/ 旗舰版/ 操作系统/ 、/ 双核/ 5.6/ GHz/ 英特尔/ 处理器/ 、/ 4GB/ 内存/ 的/ PC/ 组建/ ./ 6.1/ 实验/ 环境/ 和/ 相关/ 参数/ 实验/ 数据/ 是/ Twitter/ 上/ 从/ 2006/ 年/ 10/ 月/ 到/ 2009/ 年/ 11/ 月/ 的/ 部分/ 数据/ [/ 23/ ]/ ,/ 共有/ 465K/ 用户/ 以及/ 他们/ 在/ 这/ 三年/ 中/ 发布/ 的/ 所有/ 微博/ ,/ 约/ 2500/ 万条/ ,/ 这些/ 数据/ 被/ 保存/ 在/ PostgreSQL/ 数据库系统/ 中/ ,/ 表/ 4/ 总结/ 了/ 实验/ 参数设置/ 以及/ 各/ 参数/ 的/ 含义/ ./ 为了/ 评价/ 用户/ 感兴趣/ 微博/ 实时/ 推荐/ 方法/ 的/ 有效性/ ,/ 我们/ 邀请/ 了/ 5/ 位/ 志愿者/ 标注/ 数据/ ./ 他们/ 首先/ 选择/ 偏好/ (/ 由于/ 我们/ 采用/ 完全/ 替代/ 型/ 效用函数/ 对/ 用户/ 偏好/ 进行/ 建模/ ,/ 因此/ 边际/ 替代/ 率/ 就/ 决定/ 了/ 效用函数/ 的/ 用户/ 个性化/ 列表/ 长度/ 5/ 用户/ 感兴趣/ 微博/ 列表/ 的/ 长度/ 特征/ 数/ 滑动/ 窗口/ 长度/ 格子/ 数量/ top/ -/ k/ 列表/ 长度/ 100/ 全局/ top/ -/ k/ 列表/ 的/ 长度/ 用户/ 偏好/ 数/ 用户数量/ 微博/ 数量/ 边际/ 替代/ 率/ 形式/ ,/ 不同/ 用户/ 偏好/ 对应/ 的/ 效用函数/ 如表/ 5/ 所示/ ,/ 其中/ 变量/ a/ 表示/ 两个/ 数值/ 特征/ 间/ 的/ 边际/ 替代/ 率/ [/ 20/ ]/ ,/ 变量/ x1/ 到/ x7/ 分别/ 为/ 标准化/ 后/ 的/ 被/ 转发/ 次数/ 、/ 被/ 回复/ 次数/ 、/ 信息量/ 、/ 微博数/ 、/ 粉丝/ 量/ 、/ 关注/ 量/ 以及/ 组数/ ,/ 它们/ 表示/ 了/ 微博/ 的/ 受欢迎/ 特征/ 或者/ 用户/ 在/ 社交/ 网络/ 中/ 的/ 影响力/ 特征/ )/ ,/ 再/ 对/ 我们/ 算法/ 推荐/ 的/ 微博/ 进行/ 标注/ ./ 对/ 特定/ 的/ 效用函数/ ,/ 每位/ 志愿者/ 标注/ 5/ 次/ 推荐/ 结果/ ,/ 每条/ 推荐/ 的/ 微博/ 被/ 标注/ 成/ 相关/ 或者/ 不/ 相关/ ./ 用户/ 偏好/ 被/ 转发/ 较/ 多/ 的/ 微博/ ax1/ +/ x2/ ,/ a/ >/ 1/ 被/ 回复/ 较/ 多/ 的/ 微博/ ax1/ +/ x2/ ,/ a/ </ 1/ 影响力/ 较大/ 的/ 微博/ ∑/ 7/ 为/ 验证/ 本文/ 中/ 实时/ 个性化/ 推荐/ 方法/ 的/ 效率/ 和/ 有效性/ ,/ 我们/ 设计/ 了/ 一个/ 基准/ 方法/ ./ 该/ 基准/ 方法/ 在/ 计算/ 全局/ top/ -/ k/ 列表/ 阶段/ 实现/ 了/ Nave/ 方法/ ,/ 而/ 在/ 推荐/ 微博/ 阶段/ 不/ 考虑/ 用户/ 兴趣/ 直接/ 返回/ 全局/ top/ -/ k/ 列表/ 中前/ k/ 条微/ 博给/ 用户/ ,/ 我们/ 分别/ 用/ Nave/ 和/ CT/ 来/ 表示/ 基准/ 方法/ 和/ 本文/ 提出/ 的/ 实时/ 个性化/ 推荐/ 方法/ ./ 同时/ ,/ 本文/ 采用/ 以下/ 度量/ 对/ 这/ 两个/ 方法/ 进行/ 比较/ :/ (/ 1/ )/ 时间/ 开销/ ,/ 衡量/ 用户/ 感兴趣/ 微博/ 推荐/ 方法/ 的/ 时间/ 开销/ ;/ (/ 2/ )/ 平均/ 准确率/ 的/ 均值/ ,/ 衡量/ 用户/ 个性化/ 微博/ 推荐/ 的/ 平均/ 准确率/ 的/ 均值/ ;/ (/ 3/ )/ 平均/ 正确率/ @/ K/ ,/ 衡量/ 用户/ 个性化/ 微博/ 推荐/ 在/ 第/ K/ 个/ 位置/ 上/ 的/ 平均/ 正确率/ ;/ (/ 4/ )/ T/ -/ 检验/ (/ T/ -/ test/ )/ ,/ 从/ 统计学/ 角度/ 衡量/ 个性化/ 推荐/ 方法/ 的/ 有效性/ ./ 6.2/ 实时/ 个性化/ 推荐/ 方法/ 的/ 效率/ 在/ 考察/ 用户/ 感兴趣/ 微博/ 推荐/ 方法/ 的/ 效率/ 时/ ,/ 我们/ 连续/ 运行/ 微博/ 推荐/ 方法/ 一个/ 小时/ ,/ 滑动/ 窗口/ 每秒/ 滑动/ 一次/ ,/ 记录/ 每次/ 响应/ 系统/ 更新/ 的/ 时间/ 开销/ ,/ 最后/ 平均/ 3600/ 次/ 更新/ 的/ 时间/ 开销/ 来/ 度量/ Nave/ 和/ CT/ 方法/ 的/ 效率/ ./ 图/ 8/ 通过/ 变动/ 格子/ 个数/ 和/ 特征/ 个数/ 展示/ NavePage10/ 和/ CT/ 方法/ 以/ 毫秒/ 度量/ 的/ 时间/ 开销/ ./ 图/ 8/ (/ a/ )/ 中/ 横轴/ 表示/ 格子/ 个数/ 的/ 变化/ ,/ 纵轴/ 表示/ 时间/ 开销/ ./ 从图/ 中/ 可以/ 看出/ ,/ 随着/ 格子/ 数量/ 不断/ 增加/ ,/ CT/ 方法/ 的/ 时间/ 开销/ 在/ 不断/ 减少/ ./ 原因/ 在于/ 格子/ 越多会/ 导致/ 每个/ 格子/ 中/ 索引/ 的/ 微博/ 数量/ 越/ 少/ ,/ 从而/ 缩短/ 从/ 索引/ 右上角/ 区域/ 的/ 格子/ 中/ 找出/ 全局/ top/ -/ k/ 列表/ 的/ 开销/ ./ 而/ Nave/ 方法/ 不仅/ 每次/ 都/ 要/ 更新/ 左下角/ 格子/ 中/ 的/ 最高/ 分数/ ,/ 还/ 需要/ 对/ 所有/ 格子/ 中/ 最大/ 分数/ 进行/ 排序/ ,/ 需要/ 消耗/ 更/ 多/ 的/ 时间/ ./ 图/ 8/ (/ b/ )/ 中/ 横轴/ 表示/ 微博/ 特征/ 的/ 个数/ ,/ 纵轴/ 表示/ 时间/ 开销/ ./ 不难/ 发现/ ,/ 随着/ 微博/ 特征/ 的/ 增加/ ,/ 待/ 访问/ 格子/ 的/ 数量/ 也/ 会/ 增加/ ,/ 导致/ CT/ 方法/ 的/ 时间/ 开销/ 在/ 不断/ 增加/ ./ 实验/ 结果表明/ ,/ CT/ 方法/ 可/ 在/ 1s/ 内/ 完成/ ,/ 具有/ 较/ 高/ 的/ 执行/ 效率/ ./ 图/ 9/ 实时/ 个性化/ 推荐/ 方法/ 的/ 时间/ 开销/ 图/ 9/ 通过/ 变动/ 其他/ 参数/ 展示/ 了/ Nave/ 和/ CT/ 方法/ 的/ 时间/ 开销/ ./ 图/ 9/ (/ a/ )/ 中/ 横轴/ 表示/ 了/ 用户数量/ 的/ 变化/ ,/ 纵轴/ 是/ 以/ 毫秒/ 度量/ 的/ 时间/ 开销/ ./ 不难看出/ ,/ 随着/ 用户数量/ 的/ 增加/ ,/ 待/ 推荐/ 微博/ 列表/ 不断/ 增加/ ,/ 从而/ 导致/ 推荐/ 方法/ 的/ 时间/ 开销/ 增加/ ./ 图/ 9/ (/ b/ )/ 中/ 横轴/ 表示/ 每秒/ 更新/ 微博/ 的/ 数量/ ,/ 纵轴/ 是/ 以/ 毫秒/ 度量/ 的/ 时间/ 开销/ ./ 容易/ 发现/ ,/ 随着/ 更新/ 微博/ 数量/ 的/ 不断/ 增加/ ,/ 全局/ top/ -/ k/ 列表/ 中微博/ 更新/ 频率/ 也/ 在/ 增加/ ,/ 从而/ 导致/ 推荐/ 方法/ 的/ 时间/ 开销/ 不断/ 增加/ ./ 由于/ 多数/ 微博/ 都/ 被/ 索引/ 在/ 左下角/ 的/ 少数/ 格子/ 中/ ,/ Nave/ 方法/ 的/ 效率/ 要/ 比/ CT/ 方法/ 差/ 很多/ ./ 图/ 9/ (/ c/ )/ 中/ 横轴/ 表示/ 了/ 全局/ top/ -/ k/ 列表/ 长度/ 的/ 变化/ ,/ 纵轴/ 是/ 以/ 毫秒/ 度量/ 的/ 时间/ 开销/ ./ 不难/ 发现/ ,/ 随着/ 全局/ top/ -/ k/ 列表/ 长度/ 的/ 不断/ 增长/ ,/ 算法/ 需要/ 扫描/ 更/ 多/ 的/ 格子/ ,/ 从而/ 导致/ 推荐/ 方法/ 的/ 时间/ 开销/ 在/ 不断/ 增加/ ./ 图/ 9/ (/ d/ )/ 中/ 横轴/ 表示/ 用户/ top/ -/ k/ 个性化/ 微博/ 列表/ 的/ 长度/ ,/ 纵轴/ 是/ 以/ 毫秒/ 度量/ 的/ 时间/ 开销/ ./ 容易/ 发现/ ,/ 随着/ 用户/ top/ -/ k/ 列表/ 长度/ 的/ 不断/ 增加/ ,/ 得益于/ 算法/ 只/ 维护/ 很少/ 的/ 热门/ 微博/ ,/ 推荐/ 方法/ 的/ 时间/ 开销/ 几乎/ 是/ 不变/ 的/ ./ 图/ 9/ (/ e/ )/ 通过/ 变动/ 滑动/ 窗口/ 的/ 长度/ 展示/ 了/ 用户/ 感兴趣/ 微博/ 推荐/ 方法/ 的/ 时间/ 开销/ ,/ 其中/ 横轴/ 表示/ 了/ 滑动/ 窗口/ 长度/ 的/ 变化/ ,/ 纵轴/ 是/ 以/ 毫秒/ 度量/ 的/ 时间/ 开销/ ./ 不难/ 发现/ ,/ 当/ 滑动/ 窗口/ 的/ 长度/ 变长/ 时/ ,/ 在/ 网格/ 索引/ 中/ ,/ 每格/ 中/ 索引/ 的/ 微博/ 数量/ 不断/ 增加/ ,/ 从而/ 导致/ 计算/ 和/ 更新/ 用户/ 个性化/ top/ -/ k/ 列表/ 的/ 开销/ 增加/ ./ 与/ CT/ 算法/ 相比/ ,/ Nave/ 方法/ 需要/ 更/ 多/ 时间/ 更新/ 左下角/ 格子/ 中/ 的/ 最高/ 分数/ ./ 图/ 9/ (/ f/ )/ 通过/ 变化/ 用户/ 效用函数/ 的/ 个数/ 展示/ 了/ 推荐/ 方法/ 的/ 时间/ 开销/ ,/ 其中/ 横轴/ 表示/ 用/ Page11/ 户/ 效用函数/ 个数/ 的/ 变化/ ,/ 纵轴/ 是/ 以/ 毫秒/ 度量/ 的/ 时间/ 开销/ ./ 该图/ 展示/ 了/ 随着/ 用户/ 效用函数/ 个数/ 的/ 增加/ ,/ 维护/ 最/ 热门/ 微博/ 列表/ 的/ 个数/ 也/ 在/ 增加/ ,/ 从而/ 导致/ 推荐/ 方法/ 时间/ 开销/ 的/ 增加/ ./ 6.3/ 实时/ 个性化/ 推荐/ 方法/ 的/ 有效性/ 图/ 10/ 表明/ 了/ CT/ 方法/ 的/ 有效性/ ./ 图/ 10/ (/ a/ )/ 和/ 图/ 10/ (/ b/ )/ 的/ 横轴/ 表示/ 效用函数/ 中/ 边际/ 替代/ 率/ 的/ 变化/ ,/ 纵轴/ 是/ 推荐/ 结果/ 的/ 平均/ 准确率/ 的/ 均值/ ,/ 其中/ 图/ 10/ (/ a/ )/ 展示/ 了/ 第/ 1/ 组/ 效用函数/ 边际/ 替代/ 率/ 变化/ 时/ 10/ 个/ 推荐/ 结果/ 的/ 平均/ 准确率/ 的/ 均值/ 的/ 变化/ 情况/ (/ 2/ 位/ 志愿者/ 选择/ 第/ 1/ 组/ 偏好/ ,/ 对/ 每个/ 效用函数/ ,/ 每位/ 志愿者/ 标注/ 了/ 5/ 次/ 个性化/ 推荐/ 结果/ )/ ,/ 而图/ 10/ (/ b/ )/ 表明/ 了/ 第/ 2/ 组/ 效用函数/ 边际/ 替代/ 率/ 变化/ 时/ 5/ 个/ 推荐/ 结果/ 的/ 平均/ 准确率/ 的/ 均值/ 的/ 变化/ 情况/ ./ 从图/ 中/ 不难/ 发现/ ,/ 随着/ 边际/ 替代/ 率/ 的/ 变化/ (/ 运用/ 不同/ 的/ 效用函数/ 图/ 10/ 实时/ 个性化/ 推荐/ 方法/ 的/ 有效性/ 7/ 小结/ 社交/ 网络服务/ 不仅/ 需要/ 处理/ 海量/ 、/ 实时/ 的/ 流/ 数据/ ,/ 而且/ 还要/ 响应/ 用户/ 多样化/ 的/ 服务/ 请求/ ,/ 例如/ YouTube/ 的/ 个性化/ 视频/ 推荐/ 和/ Facebook/ 的/ 图/ 搜索/ ./ 然而/ 大多数/ 社交/ 网络服务/ 并未/ 充分考虑/ 用户/ 多样化/ 的/ 个性/ 需求/ ,/ 导致/ 服务质量/ 受限/ ./ 微博是/ 一类/ 典型/ 的/ 社交/ 网络服务/ ,/ 它/ 体现/ 了/ 当前/ 社交/ 网络服务/ 的/ 海量/ 性/ 、/ 实时性/ 和/ 个性化/ 等/ 特点/ ./ 因此/ ,/ 在/ 微博/ 系统/ 上/ 提供/ 个性化/ 服务/ 是/ 一个/ 非常/ 有/ 挑战/ 的/ 任务/ ,/ 这/ 正是/ 本文/ 研究/ 的/ 出发点/ ./ 我们/ 用流/ 数据模型/ 对/ 微博/ 系统/ 上/ 微博/ 的/ 更新/ 和/ 过期/ 进行/ 建模/ ,/ 运用/ 流/ 数据/ 上/ 基于/ 滑动/ 窗口/ 模型/ 的/ 实时/ top/ -/ k/ 查询/ 来/ 响应/ 微博/ 系统/ 上/ 实时/ 热点/ 微博/ 的/ 推荐/ ./ 为了/ 响应/ 用户/ 个性化/ 的/ 服务/ 请求/ ,/ 我们/ 基于/ LDA/ 主题/ 模型/ 推断/ 微博/ 的/ 主题/ 分布/ 和/ 用户/ 的/ 兴趣/ 取向/ ,/ 在/ 实时/ 热点/ 微博中/ 选择/ 用户/ 最/ 可能/ 感兴趣/ 的/ 微博/ 推荐/ 给/ 用户/ ,/ 从而/ 实现/ 了/ 微博/ 平台/ 上/ 微博/ 的/ 实时/ 个性化/ 推荐/ ./ 最后/ ,/ 我们/ 利用/ 真实/ 数据/ 验证/ 实时/ 个性化/ 推荐/ 方法/ 的/ 有效性/ 和/ 高效性/ ./ 对/ 用户/ 偏好/ 进行/ 建模/ )/ ,/ 全局/ top/ -/ k/ 列表/ 中/ 的/ 微博/ 可能/ 不/ 一样/ ,/ 从而/ 导致/ 最终/ 推荐/ 结果/ 的/ 不同/ ./ 但/ 根据/ 平均/ 准确率/ 的/ 均值/ ,/ CT/ 方法/ 的/ 有效性/ 比/ Nave/ 方法/ 好/ 很多/ ./ 图/ 10/ (/ c/ )/ 的/ 横轴/ 是/ 位置/ K/ 的/ 变化/ ,/ 纵轴/ 是/ 25/ 次/ 推荐/ 结果/ 中/ 相应/ 位置/ 的/ 平均/ 正确率/ ./ 此/ 部分/ 综合/ 3/ 组/ 用户/ 的/ 不同/ 偏好/ ,/ 考察/ 本文/ 提出/ 的/ 推荐/ 方法/ 的/ 平均/ 正确率/ ,/ 其中/ 第/ 1/ 组和/ 第/ 2/ 组/ 的/ 边际/ 替代/ 率/ 分别/ 取/ 3/ 和/ 0.4/ (/ 因为/ 在/ 图/ 10/ (/ a/ )/ 和/ 图/ 10/ (/ b/ )/ 中当/ 边际/ 替代/ 率/ 分别/ 取/ 3/ 和/ 0.4/ 时/ 平均/ 准确率/ 的/ 均值/ 最高/ )/ ./ 容易/ 发现/ ,/ 随着/ 位置/ K/ 的/ 变化/ ,/ 本文/ 提出/ 的/ 方法/ 平均/ 正确率/ 达到/ 0.6/ 以上/ ;/ 此外/ ,/ CT/ 方法/ 比/ 直接/ 返回/ 全局/ top/ -/ k/ 列表/ 中/ k/ 条微博/ 的/ 正确率/ 要/ 高/ 很多/ ;/ 同时/ ,/ 在/ 置信水平/ 为/ 0.05/ 的/ 情况/ 下/ ,/ T/ -/ test/ 检验/ 的/ 结果表明/ CT/ 方法/ 的/ 有效性/ 显著/ 优于/ Nave/ 方法/ ./ 

