Page1/ 劣质/ 数据库/ 上/ 阈值/ 相似/ 连接/ 结果/ 大小/ 估计/ 张岩/ 杨龙/ 王宏志/ (/ 哈尔滨工业大学/ 计算机科学/ 与/ 技术/ 学院/ 哈尔滨/ 150001/ )/ 摘要/ 劣质/ 数据/ 普遍存在/ 于/ 现代/ 数据/ 管理系统/ 中/ ,/ 严重/ 影响/ 了/ 数据/ 的/ 质量/ ,/ 从而/ 降低/ 了/ 数据/ 的/ 实用性/ 以及/ 数据/ 的/ 价值/ ,/ 这为/ 数据管理/ 带来/ 了/ 新/ 的/ 挑战/ ./ 当前/ ,/ 已经/ 有/ 不少/ 管理/ 劣质/ 数据/ 的/ 数据模型/ 被/ 提出/ ,/ 实体/ 关系/ 数据模型/ 是/ 其中/ 一种/ ,/ 其中/ 每条/ 元组/ 表示/ 一个/ 现实/ 世界/ 中/ 的/ 实体/ ./ 该/ 模型/ 允许/ 劣质/ 数据/ 的/ 存在/ ,/ 给出/ 了/ 衡量/ 数据/ 质量/ 的/ 方法/ ,/ 并且/ 可/ 根据/ 用户/ 对/ 结果/ 质量/ 的/ 需求/ 给出/ 达到/ 一定/ 质量/ 的/ 查询/ 结果/ ./ 鉴于/ 该/ 模型/ 的/ 特点/ ,/ 传统/ 的/ 查询/ 代价/ 估计/ 方法/ 不再/ 适用/ ,/ 需要/ 新/ 的/ 代价/ 估计/ 技术/ ./ 文中/ 研究/ 如何/ 估计/ 连接/ 操作/ 结果/ 的/ 大小/ ,/ 提出/ 了/ 在/ 应用/ 局部/ 敏感/ Hash/ 算法/ 对/ 属性/ 值聚类/ 的/ 基础/ 上/ ,/ 再/ 进行/ 采样/ 估计/ 的/ 方法/ ,/ 并且/ 在/ 聚类/ 过程/ 中/ 考虑/ 数据/ 质量/ 对/ 查询/ 结果/ 的/ 影响/ ./ 与/ 传统/ 随机/ 采样/ 方法/ 对比/ ,/ 实验/ 结果表明/ 文中/ 估计/ 方法/ 有/ 更好/ 的/ 准确性/ ./ 关键词/ 代价/ 估计/ ;/ 采样/ 估计/ ;/ 劣质/ 数据/ ;/ 数据/ 质量/ ;/ 阈值/ 1/ 引言/ 数据/ 质量/ [/ 1/ ]/ 问题/ 已经/ 在/ 很多/ 研究/ 领域/ 引起/ 了/ 人/ Page2/ 所谓/ 劣质/ 数据/ 主要/ 是/ 指/ 错误/ 的/ 、/ 不/ 确定/ 的/ 、/ 不/ 一致/ 的/ 以及/ 重复/ 的/ 数据/ ./ 研究/ 表明/ ,/ 大部分/ 数据库/ 中/ 都/ 含有/ 劣质/ 数据/ ./ 例如/ ,/ 有/ 调查报告/ [/ 2/ ]/ 指出/ 超过/ 65/ %/ 的/ 零售商/ 库存/ 记录/ 数据库/ 中/ 的/ 数据/ 是/ 不/ 精确/ 的/ ./ 劣质/ 数据/ 给/ 企业/ 带来/ 的/ 后果/ 是/ 严重/ 的/ ./ 有/ 错误/ 、/ 重复/ 、/ 不/ 精确/ 或者/ 不/ 一致/ 的/ 数据/ 会/ 导致/ 错误/ 的/ 业务/ 决策/ 、/ 不好/ 的/ 客户关系/ 以及/ 无效/ 的/ 营销/ 策略/ 等/ ,/ 从而/ 给/ 企业/ 带来/ 巨大损失/ ./ 文献/ [/ 3/ ]/ 指出/ 每年/ 美国/ 各/ 企业/ 因为/ 劣质/ 数据/ 所/ 带来/ 的/ 损失/ 高达/ 6000/ 亿美元/ ./ 因此/ ,/ 需要/ 有/ 新/ 的/ 技术/ 来/ 处理/ 劣质/ 数据/ ,/ 降低/ 劣质/ 数据/ 的/ 危害/ ./ 目前/ ,/ 处理/ 劣质/ 数据/ 的/ 方法/ 主要/ 集中/ 于/ 数据/ 清洗/ [/ 4/ ]/ 和/ 数据/ 修复/ [/ 5/ ]/ ./ 数据/ 清洗/ 是/ 指/ 检测/ 并/ 移除/ 数据库/ 中/ 的/ 错误/ 数据/ ,/ 从而/ 提高/ 数据/ 质量/ ./ 数据/ 修复/ 是/ 指/ 检测/ 数据库/ 中/ 错误/ 或/ 不/ 一致/ 的/ 数据/ ,/ 通过/ 给定/ 的/ 规则/ (/ 如/ 条件/ 函数/ 依赖/ 规则/ 等/ )/ 或者/ 专家/ 反馈/ 来/ 修复/ 数据/ ./ 然而/ ,/ 无论是/ 数据/ 清洗/ 还是/ 数据/ 修复/ 都/ 存在/ 一定/ 的/ 局限性/ ./ 第一/ ,/ 多数/ 情况/ 下/ ,/ 数据/ 清洗/ 无法/ 彻底/ 除去/ 劣质/ 数据/ ,/ 而且/ 如果/ 清洗/ 过度/ 可能/ 会/ 导致/ 信息/ 的/ 丢失/ ;/ 第二/ ,/ 数据/ 修复过程/ 中/ ,/ 不/ 可能/ 给出/ 所有/ 的/ 规则/ ,/ 而且/ 多条/ 规则/ 的/ 修复/ 结果/ 可能/ 会/ 产生/ 冲突/ ./ 因此/ ,/ 数据/ 清洗/ 和/ 数据/ 修复/ 均/ 不能/ 彻底/ 除去/ 数据库/ 中/ 的/ 劣质/ 数据/ ,/ 也/ 就/ 不能/ 有效/ 地/ 解决/ 劣质/ 数据/ 引起/ 的/ 问题/ ./ 基于/ 上述/ 原因/ ,/ 一些/ 研究/ 人员/ 开始/ 考虑/ 如何/ 在/ 不/ 经过/ 数据/ 清洗/ 和/ 数据/ 修复/ 的/ 劣质/ 数据/ 上/ 直接/ 处理/ 查询/ ,/ 从中/ 得到/ 正确/ 、/ 一致/ 的/ 查询/ 结果/ 或者/ 满足/ 质量/ 要求/ 的/ 查询/ 结果/ ./ 当前/ ,/ 已经/ 有/ 部分/ 工作/ 开始/ 了/ 对/ 劣质/ 数据库/ (/ 含有/ 劣质/ 数据/ 的/ 数据库/ )/ 上/ 查询处理/ 技术/ 的/ 研究/ [/ 6/ -/ 8/ ]/ ./ 但是/ 这些/ 工作/ 中/ ,/ 大部分/ 都/ 是/ 针对/ 特定/ 的/ 查询/ 或者/ 特定/ 方法/ 展开/ 的/ ./ 因此/ ,/ 为了/ 更好/ 地/ 处理/ 劣质/ 数据/ ,/ 需要/ 统一/ 的/ 模型/ 来/ 管理/ 劣质/ 数据/ ./ 当前/ ,/ 已经/ 有/ 部分/ 劣质/ 数据模型/ 被/ 提出/ ,/ 其中/ 应用/ 最为/ 广泛/ 的/ 是/ 概率/ 数据模型/ [/ 9/ ]/ ./ 概率/ 数据模型/ 可以/ 表示/ 非/ 精确/ 的/ 数据/ ,/ 但/ 这/ 只是/ 劣质/ 数据/ 的/ 一种/ ,/ 而且/ 从/ 数据/ 操作/ 角度/ 来看/ ,/ 这种/ 模型/ 无法/ 描述/ 数据/ 操表/ 2/ 实体/ 元组/ ID1/ (/ Wal/ -/ Mart/ ,/ 0.67/ )/ ,/ 实体/ 关系/ 数据模型/ 通过/ 实体/ 识别/ 和/ 清洁度/ 巧妙/ 地/ 表示/ 了/ 劣质/ 数据/ ./ 该/ 模型/ 利用/ 了/ 实体/ 识别/ 的/ 结果/ ,/ 每条/ 元组/ 表示/ 一个/ 实体/ ./ 因此/ ,/ 该/ 模型/ 中/ 的/ 所有/ 查询/ 操作/ 的/ 对象/ 均/ 是/ 实体/ ;/ 相反/ 地/ ,/ 概率/ 数据模型/ 中/ 的/ 查询/ 操作/ 针对/ 的/ 是/ 所有/ 的/ 可能/ 世界/ 实例/ ,/ 而/ 在/ 所有/ 可/ 作对/ 操作/ 结果/ 质量/ 的/ 影响/ ,/ 更/ 重要/ 的/ 是/ ,/ 应用/ 概率/ 数据模型/ 的/ 数据库/ 在/ 执行/ 查询/ 的/ 过程/ 中/ ,/ 会/ 产生/ 所有/ 的/ 可能/ 世界/ 实例/ ,/ 这/ 将/ 导致/ 数据/ 规模/ 的/ 指数/ 增长/ ,/ 从而/ 降低/ 查询处理/ 效率/ ./ 本文/ 考虑/ 基于/ 实体/ 的/ 关系/ 数据模型/ [/ 10/ ]/ ,/ 在/ 这种/ 模型/ 中/ ,/ 每条/ 元组/ 表示/ 一个/ 实体/ ,/ 每个/ 属性/ 值/ 是/ 不/ 确定/ 的/ ,/ 可能/ 含有/ 多个/ 值/ ,/ 对/ 每个/ 值用/ 一个/ 清洁度/ 来/ 表示/ 该值/ 的/ 质量/ ./ 采取/ 这种/ 表示/ 方式/ 的/ 原因/ 在于/ ,/ 在/ 实际/ 应用/ 中/ ,/ 对/ 同一个/ 现实/ 世界/ 实体/ 的/ 不同/ 表示/ 方法/ 是/ 劣质/ 数据/ 的/ 一个/ 重要/ 来源/ ./ 尤其/ 在/ 数据/ 融合/ [/ 11/ ]/ (/ 信息/ 集成/ )/ 过程/ 中/ ,/ 将会/ 导致/ 出现/ 不/ 一致/ 的/ 、/ 不/ 确定/ 的/ 或者/ 重复/ 的/ 数据/ ./ 在/ 实体/ 关系/ 数据模型/ 中/ ,/ 表示/ 同一个/ 实体/ 的/ 数据/ 合并/ 为/ 一条/ 记录/ ,/ 为/ 不/ 确定/ 或者/ 不/ 一致/ 的/ 属性/ 值/ 赋予/ 一个/ 概率/ 值/ ,/ 表示/ 该值/ 的/ 清洁度/ (/ 或/ 质量/ ,/ 本文/ 中/ ,/ 清洁度/ 即/ 表示/ 质量/ ,/ 不/ 加以/ 区别/ )/ ./ 例/ 1/ 描述/ 了/ 这种/ 表示/ 方法/ ./ 例/ 1/ ./ 表/ 1/ 是/ 一个/ 劣质/ 数据/ 片段/ ./ 通过/ 实体/ 识别/ 算法/ [/ 12/ -/ 13/ ]/ ,/ 可以/ 判断/ 元组/ 1/ 、/ 3/ 和/ 6/ 表示/ 同一个/ 实体/ ./ 因此/ ,/ 可以/ 合并/ 这/ 3/ 条/ 元组/ ,/ 得到/ 一条/ 实体/ 元组/ (/ 如表/ 2/ )/ ./ 在/ 合并/ 过程/ 中/ 不/ 删除/ 任何/ 数据/ ,/ 因为/ ,/ 根据/ 这个/ 数据/ 片段/ 只能/ 判断/ “/ Name/ ”/ 取值/ 更/ 可能/ 为/ “/ Wal/ -/ Mart/ ”/ ,/ 但/ 无法/ 完全/ 排除/ “/ Mal/ -/ Mart/ ”/ ./ 因此/ ,/ 我们/ 保留/ 所有/ 可能/ 取值/ ,/ 即/ 属性/ 取值/ 是/ 不/ 确定/ 的/ ./ 为了/ 描述/ 每个/ 可能/ 取值/ 的/ 质量/ ,/ 赋予/ 每个/ 值/ 一个/ 概率/ 值/ ,/ 表示/ 该值/ 的/ 清洁度/ ./ 如/ “/ Wal/ -/ Mart/ ”/ 在/ 3/ 条/ 元组/ 中/ 出现/ 了/ 2/ 次/ ,/ 则/ 清洁度/ 为/ 2/ // 3/ ≈/ 0.67/ ,/ 类似/ 的/ ,/ 可以/ 计算/ 出/ 每个/ 可能/ 值/ 的/ 清洁度/ ,/ 从而/ 得到/ 表/ 2/ 中/ 的/ 实体/ 元组/ ./ IDNameCityZipcodePhnReprsnt1Wal/ -/ MartBeijing9001580103389Sham2CarrefourHarbin2001680374832Morgan3Wal/ -/ MartBJ90015010/ -/ 80103389Sham4Wal/ -/ martHarbin2004070937485Sham5CarrefourBeijing9001583950321Morgan6Mal/ -/ MartBeijing9001580103389ShamZipcode/ (/ 90015/ ,/ 1.0/ )/ (/ 80103389/ ,/ 0.67/ )/ ,/ 能/ 世界/ 实例/ 中会/ 有/ 多个/ 实例/ 表示/ 的/ 是/ 同一个/ 实体/ ./ 现实/ 应用/ 中/ ,/ 很多/ 情况/ 下/ ,/ 用户/ 查询/ 希望/ 得到/ 的/ 是/ 实体/ 结果/ ,/ 而/ 不是/ 同一个/ 实体/ 的/ 多种不同/ 表示/ ./ 例如/ ,/ 表/ 2/ 表示/ 的/ 是/ 各/ 地区/ 超市/ 基本/ 信息/ ,/ 如果/ 在/ 该表中/ 查找/ 企业/ 法人代表/ (/ Reprsnt/ )/ 为/ “/ Sham/ ”/ 的/ 超市/ ,/ 则/ Page3/ 概率/ 数据模型/ 会/ 产生/ 并/ 返回/ 8/ 个/ 可能/ 世界/ 实例/ (/ 如表/ 3/ 所示/ )/ ,/ 但/ 这/ 8/ 个/ 实例/ 实际/ 表示/ 的/ 是/ 同一个/ 超市/ ,/ 而/ 实体/ 关系/ 数据模型/ 只会/ 返回/ 一个/ 超市/ ,/ 显然/ 这/ 更/ 符合/ 查询/ 的/ 期望/ ./ 因此/ ,/ 与/ 概率/ 数据模型/ 相比/ ,/ 该/ 模型/ 在/ 查询处理/ 过程/ 中/ 不会/ 产生/ 所有/ 的/ 可能/ 世界/ 实例/ ,/ 也/ 就/ 不会/ 导致/ 数据/ 规模/ 的/ 指数/ 增长/ ,/ 从而/ 提高/ 了/ 查询处理/ 的/ 效率/ ./ IDNameCityZipcodePhnReprsnt1Wal/ -/ MartBeijing9001580103389Sham2Wal/ -/ MartBeijing90015010/ -/ 80103389Sham3Wal/ -/ MartBJ9001580103389Sham4Wal/ -/ MartBJ90015010/ -/ 80103389Sham5Mal/ -/ MartBeijing9001580103389Sham6Mal/ -/ MartBeijing90015010/ -/ 80103389Sham7Mal/ -/ MartBJ9001580103389Sham8Mal/ -/ MartBJ90015010/ -/ 80103389Sham/ 考虑/ 到/ 实体/ 关系/ 数据模型/ 的/ 特点/ ,/ 每个/ 属性/ 值/ 是/ 不/ 确定/ 的/ ,/ 可能/ 还有/ 多个/ 取值/ ,/ 而且/ 都/ 有/ 对应/ 的/ 清洁度/ ,/ 现有/ 的/ 查询/ 优化/ 方法/ 不再/ 适用/ ./ 因此/ ,/ 我们/ 需要/ 新/ 的/ 查询/ 优化/ 技术/ ./ 作为/ 查询/ 优化/ 的/ 基础/ ,/ 如何/ 准确/ 估计/ 一个/ 数据/ 操作/ 的/ 结果/ 大小/ 是/ 十分/ 重要/ 的/ ./ 考虑/ 到/ 连接/ 操作/ 是/ 数据库/ 中/ 的/ 重要/ 操作/ 之一/ ,/ 本文/ 着重/ 研究/ 如何/ 估计/ 实体/ 关系数据库/ 中/ 相似/ 连接/ 操作/ 的/ 结果/ 大小/ ./ 当前/ 已经/ 有/ 很多/ 工作/ 研究/ 连接/ (/ 主要/ 是/ 等值/ 连接/ )/ 结果/ 大小/ 的/ 估计/ [/ 14/ -/ 16/ ]/ ,/ 主要/ 是/ 应用/ 采样/ 进行/ 估计/ ,/ 如自/ 适应/ 采样/ (/ Adaptivesampling/ )/ [/ 14/ ]/ 、/ 双重/ 采样/ (/ Bifocalsampling/ )/ [/ 15/ ]/ 、/ 交叉/ 采样/ (/ Crosssam/ -/ pling/ )/ [/ 16/ ]/ 等/ ./ 其中/ 部分/ 方法/ 可以/ 应用/ 于/ 相似/ 连接/ ,/ 但是/ 无法/ 保证/ 采样/ 结果/ 适用/ 于/ 不同/ 的/ 相似/ 度/ 要求/ ./ 例如/ ,/ 文献/ [/ 17/ ]/ 中/ 指出/ ,/ 对/ DBLP/ 数据/ 集合/ 进行/ 自/ 连接/ 时/ ,/ 如果/ 相似/ 度/ 阈值/ 设为/ 0.9/ ,/ 则/ 连接/ 结果/ 的/ 选择率/ 只有/ 0.00001/ %/ ./ 这种/ 情况/ 下/ ,/ 上述/ 采样/ 方法/ 很难/ 抽取/ 到/ 可以/ 连接/ 的/ 元组/ 对/ ,/ 从而/ 无法/ 给出/ 准确/ 估计/ ./ 针对/ 相似/ 连接/ 估计/ 算法/ [/ 17/ -/ 18/ ]/ 也/ 已经/ 有/ 部分/ 工作/ ,/ 但/ 这些/ 算法/ 相对/ 于/ 实体/ 关系数据库/ 均/ 不/ 太/ 适用/ ./ 主要/ 原因/ 有/ 两点/ ./ 第一/ ,/ 现有/ 算法/ 中/ 相似/ 连接/ 的/ 属性/ 值/ 是/ 确定/ 的/ ,/ 而/ 实体/ 关系数据库/ 中/ 属性/ 可能/ 包含/ 多个/ 值/ ,/ 是/ 不/ 确定/ 的/ ;/ 第二/ ,/ 实体/ 关系数据库/ 中/ 引入/ 了/ 清洁度/ 的/ 概念/ ,/ 而/ 现有/ 算法/ 中均/ 没有/ 这一/ 概念/ ./ 基于/ 上述/ 分析/ ,/ 本文/ 提出/ 了/ 新/ 的/ 相似/ 连接/ 结果/ 大小/ 估计/ 算法/ ./ 考虑/ 到/ 如果/ 先对/ 相似/ 元组/ 加以/ 聚类/ ,/ 然后/ 在/ 聚类/ 集中/ 采样/ 可以/ 提高/ 采样/ 的/ 质量/ ./ 因为/ 即使/ 相似/ 度/ 阈值/ 较/ 高/ ,/ 在/ 聚类/ 集中/ 也/ 能/ 以/ 很大/ 概率/ 采样/ 得到/ 满足/ 相似/ 度/ 要求/ 的/ 元组/ 对/ ./ 因此/ ,/ 本文/ 首先/ 应用/ 局部/ 敏感/ Hash/ 算法/ (/ LocalitySensitiveHas/ -/ hing/ ,/ LSH/ )/ 对/ 不/ 确定/ 属性/ 值/ 进行/ 聚类/ ,/ 然后/ 在/ 聚类/ 集中/ 采样/ 估计/ 相似/ 连接/ 的/ 结果/ 大小/ ./ 鉴于/ 实体/ 关系数据库/ 的/ 特点/ ,/ 本文/ 提出/ 了/ 基于/ 清洁度/ 的/ 局部/ 敏感/ Hash/ 聚类/ 算法/ ,/ 在/ 聚类/ 过程/ 中/ ,/ 充分考虑/ 了/ 实体/ 关系/ 数据模型/ 中/ 属性/ 取值/ 的/ 不确定性/ 以及/ 不同/ 取值/ 的/ 清洁度/ 的/ 影响/ ./ 本文/ 的/ 主要/ 贡献/ 如下/ :/ (/ 1/ )/ 提出/ 了/ 一种/ 适用/ 于/ 实体/ 关系数据库/ 的/ 基于/ 清洁度/ 的/ 局部/ 敏感/ Hash/ 聚类/ 算法/ ./ 该/ 算法/ 可以/ 把/ 相似/ 的/ 不/ 确定/ 属性/ 值/ 聚集/ 在/ 一起/ ./ (/ 2/ )/ 提出/ 了/ 一种/ 基于/ 相似/ 聚类/ 的/ 采样/ 估计/ 算法/ ,/ 能够/ 更加/ 准确/ 地/ 估计/ 相似/ 连接/ 的/ 结果/ 大小/ ./ (/ 3/ )/ 通过/ 实验/ 证明/ ,/ 本文/ 的/ 估计/ 算法/ 可以/ 得到/ 比/ 现有/ 方法/ 更/ 高/ 的/ 估计/ 准确率/ ./ 本文/ 第/ 2/ 节/ 介绍/ 实体/ 关系/ 数据模型/ 以及/ 相似/ 连接/ 的/ 相关/ 概念/ ;/ 第/ 3/ 节/ 给出/ 基于/ 采样/ 的/ 相似/ 连接/ 估计/ 算法/ 的/ 框架/ ;/ 第/ 4/ 节/ 提出/ 基于/ 清洁度/ 的/ 局部/ 敏感/ Hash/ 聚类/ 算法/ ;/ 第/ 5/ 节/ 给出/ 实验/ 结果/ 和/ 分析/ ;/ 第/ 6/ 节对/ 本文/ 进行/ 总结/ ./ 2/ 相关/ 定义/ 2.1/ 实体/ 关系/ 数据模型/ 第/ 1/ 节中/ 已经/ 简单/ 介绍/ 了/ 实体/ 关系/ 数据模型/ ,/ 本节/ 中/ 我们/ 通过/ 几个/ 概念/ 定义/ 该/ 模型/ ./ 首先/ 给出/ 不/ 确定/ 属性/ 值/ 的/ 概念/ ,/ 正如/ 第/ 1/ 节/ 介绍/ 的/ ,/ 在/ 实体/ 关系/ 数据模型/ 中/ ,/ 属性/ 值/ 是/ 不/ 确定/ 的/ ,/ 包含/ 多个/ 可能/ 值/ ./ 定义/ 1/ 给出/ 了/ 不/ 确定/ 属性/ 值/ 的/ 定义/ ,/ 它/ 不仅/ 包含/ 所有/ 的/ 可能/ 值/ ,/ 也/ 包含/ 其/ 对应/ 的/ 清洁度/ ,/ 而且/ 一个/ 不/ 确定/ 属性/ 值/ 的/ 所有/ 可能/ 值/ 的/ 清洁度/ 之/ 和/ 为/ 1/ ./ 然后/ ,/ 我们/ 给出/ 了/ 实体/ 的/ 定义/ ,/ 实体/ 是/ 实体/ 关系/ 数据模型/ 中/ 的/ 基本/ 存储/ 单位/ ,/ 是/ 多个/ 不/ 确定/ 的/ 属性/ 值/ 的/ 集合/ ./ 定义/ 1/ ./ 不/ 确定/ 属性/ 值/ ./ 一个/ 不/ 确定/ 的/ 属性/ 值/ 是/ 一个/ 集合/ A/ =/ {/ (/ v/ ,/ p/ )/ |/ v/ 是/ 某个/ 可能/ 的/ 取值/ ,/ p/ 是/ 该/ 可能/ 值/ 对应/ 的/ 清洁度/ }/ ./ 定义/ 2/ ./ 实体/ ./ 一个/ 实体/ 是/ 一条/ 元组/ ,/ 可以/ 表示/ 为/ 一个二元/ 组/ E/ =/ (/ K/ ,/ A/ )/ ,/ 其中/ A/ 是/ 不/ 确定/ 属性/ 值/ 的/ 集合/ ,/ K/ 是/ 主键/ 集合/ ,/ 它/ 可以/ 唯一/ 确定/ 一个/ 实体/ (/ 如/ 实体/ ID/ 号/ )/ ./ 表/ 2/ 给出/ 了/ 一条/ 实体/ 元组/ ,/ 包含/ 主键/ ID/ 和/ 5/ 个/ 不/ 确定/ 属性/ 值/ ,/ 每个/ 不/ 确定/ 属性/ 值/ 都/ 包含/ 一个/ 或/ 多个/ 可能/ 取值/ ,/ 而且/ 多个/ 可能/ 取值/ 对应/ 的/ 清洁度/ 之/ 和/ 为/ 1/ ./ 有/ 了/ 这些/ 概念/ ,/ 我们/ 可以/ 给出/ 实体/ 关系数据库/ 上/ 的/ 相关/ 操作/ 的/ 定义/ ./ Page4/ 本文/ 主要/ 考虑/ 实体/ 关系数据库/ 中/ 的/ 相似/ 连接/ 操/ 2.2/ 阈值/ 相似/ 连接/ 作/ ,/ 估计/ 其/ 结果/ 的/ 大小/ ./ 相似/ 连接/ 是/ 在/ 两个/ 元组/ 集合/ 中/ 选择/ 出/ 满足/ 相似性/ 下界/ 的/ 元组/ 对/ ./ 当前/ 已经/ 有/ 很多/ 衡量/ 相似性/ 的/ 方法/ ,/ 应用/ 较/ 广泛/ 的/ 有/ :/ 编辑/ 距离/ (/ Editdistance/ )/ 、/ Hamming/ 距离/ (/ Hammingdistance/ )/ 、/ 杰/ 卡德/ 相似/ 度/ (/ Jaccardsimilarity/ )/ 以及/ 余弦/ 相似/ 度/ (/ Cosinesimi/ -/ larity/ )/ 等/ ./ 本文/ 考虑/ 的/ 是/ 基于/ 编辑/ 距离/ 的/ 相似/ 连接/ ./ 对于/ 给定/ 的/ 两个/ 字符串/ s/ 和/ t/ ,/ s/ 和/ t/ 的/ 编辑/ 距离/ ed/ (/ s/ ,/ t/ )/ 是/ 指/ 从/ s/ 变为/ t/ 所/ 需要/ 的/ 最少/ 的/ 编辑/ 操作/ (/ 插入/ 、/ 删除/ 和/ 替换/ )/ 次数/ ./ 考虑/ 到/ 实体/ 关系数据库/ 中/ ,/ 属性/ 值/ 都/ 是/ 不/ 确定/ 的/ ,/ 可能/ 含有/ 多个/ 取值/ ./ 本文/ 给出/ 相似/ 连接/ 定义/ 如下/ ./ 定义/ 3/ ./ 相似/ 连接/ ./ 给定/ 两个/ 不/ 确定/ 属性/ 值/ 集合/ R/ 和/ S/ 以及/ 编辑/ 距离/ 阈值/ k/ ,/ R/ 和/ S/ 的/ 相似/ 连接/ 是/ 指/ 选出/ 所有/ 的/ 属性/ 值/ 对/ (/ r/ ,/ s/ )/ ,/ 其中/ r/ ∈/ R/ ,/ s/ ∈/ S/ ,/ 而且/ r/ 和/ s/ 满足/ 至少/ 存在/ 一组/ 可能/ 取值/ vri/ 和/ vsj/ ,/ 它们/ 的/ 编辑/ 距离/ ed/ (/ vri/ ,/ vsj/ )/ / k/ ,/ 即/ {/ (/ r/ ,/ s/ )/ |/ r/ ∈/ R/ ,/ s/ ∈/ S/ ,/ / vri/ ∈/ r/ ,/ / vsj/ ∈/ s/ ,/ s/ ./ t/ ./ ed/ (/ vri/ ,/ vsj/ )/ / k/ }/ ,/ 其中/ vri/ 表示/ 不/ 确定/ 属性/ 值/ r/ 的/ 第/ i/ 个/ 可能/ 取值/ ./ 例/ 2/ ./ 表/ 4/ 给出/ 了/ 一组/ 不/ 确定/ 属性/ 值/ 集合/ R/ 和/ S/ ./ 若/ 编辑/ 距离/ 阈值/ k/ 设为/ 3/ ,/ 则/ 相似/ 连接/ 结果/ 为/ {/ (/ r1/ ,/ s1/ )/ ,/ (/ r2/ ,/ s2/ )/ }/ ./ 因为/ ed/ (/ Wal/ -/ Mart/ ,/ Wal/ -/ mart/ )/ =/ 1/ / 3/ ,/ ed/ (/ JohnStrauss/ ,/ JohnStrauss/ )/ =/ 0/ / 3/ ./ 表/ 5/ 给出/ 了/ 连接/ 结果/ ./ r1r2ID/ 集合/ R1/ (/ Wal/ -/ Mart/ ,/ 0.67/ )/ ,/ 2/ (/ JohnSmith/ ,/ 0.8/ )/ ,/ (/ JohnStrauss/ ,/ 0.2/ )/ 由于/ 实体/ 关系数据库/ 中/ ,/ 所有/ 可能/ 值/ 都/ 有/ 对应/ 的/ 清洁度/ ,/ 所以/ ,/ 所有/ 相似/ 连接/ 结果/ 也/ 都/ 会/ 有/ 一个/ 清洁度/ ,/ 表示/ 该/ 结果/ 的/ 质量/ (/ 反映/ 了/ 结果/ 的/ 价值/ )/ ,/ 如表/ 5/ 所示/ ./ 实际/ 应用/ 中/ ,/ 多数/ 情况/ 下/ ,/ 我们/ 只/ 对/ 清洁度/ 比较/ 高/ 的/ 结果/ 感兴趣/ ,/ 对于/ 较/ 低/ 清洁度/ 的/ 结果/ 可以/ 忽略/ ./ 在/ 本文/ 中/ ,/ 只/ 考虑/ 达到/ 一定/ 清洁度/ 要求/ (/ 不/ 低于/ 某个/ 阈值/ θ/ )/ 的/ 连接/ 结果/ ,/ 本文/ 称/ 这样/ 的/ 连接/ 为/ 阈值/ 相似/ 连接/ ,/ 其/ 定义/ 如下/ ./ 定义/ 4/ ./ 阈值/ 相似/ 连接/ ./ 给定/ 两个/ 不/ 确定/ 属性/ 值/ 集合/ R/ 和/ S/ ,/ 清洁度/ 阈值/ θ/ 和/ 编辑/ 距离/ 阈值/ k/ ,/ R/ 和/ S/ 的/ 阈值/ 相似/ 连接/ 是/ 指/ 选出/ 所有/ 属性/ 值/ 对/ (/ r/ ,/ s/ )/ ,/ r/ 和/ s/ 连接/ 结果/ 的/ 清洁度/ 不/ 低于/ θ/ ./ 即/ 阈值/ 相似/ 连接/ 结果/ 集合/ 可/ 表示/ 为/ (/ r/ ,/ s/ )/ ∑/ ed/ (/ vripri/ 代表/ 不/ 确定/ 属性/ 值/ r/ 的/ 第/ i/ 个/ 可能/ 取值/ 对应/ 的/ 清洁度/ ./ 例如/ ,/ 如果/ 清洁度/ 阈值/ θ/ 设为/ 0.3/ ,/ 那么/ 表/ 4/ 中/ 的/ 两个/ 集合/ R/ 和/ S/ 的/ 阈值/ 相似/ 连接/ 结果/ 为/ {/ (/ r1/ ,/ s1/ )/ }/ ./ (/ r2/ ,/ s2/ )/ 不再/ 属于/ 连接/ 结果/ ,/ 因为/ 对于/ (/ r2/ ,/ s2/ )/ 有/ ∑/ ed/ (/ vri0/ ./ 2/ </ 0.3/ ,/ 即该/ 结果/ 不/ 满足/ 清洁度/ 阈值/ 要求/ ./ 的/ 大小/ ,/ 下/ 一节/ 给出/ 估计/ 算法/ 的/ 基本/ 框架/ ./ 3/ 估计/ 算法/ 框架/ 本文/ 主要/ 考虑/ 阈值/ 相似/ 连接/ ,/ 估计/ 其/ 连接/ 结果/ 本/ 节/ 给出/ 估计/ 算法/ 的/ 框架/ 描述/ ./ 阈值/ 相似/ 连接/ 的/ 特点/ 是/ 当/ 相似/ 度/ 阈值/ 较/ 小/ (/ 即/ 编辑/ 距离/ 阈值/ 较大/ )/ 而且/ 清洁度/ 阈值/ 也/ 较/ 小时/ ,/ 连接/ 结果/ 大小/ 会/ 接近/ 于/ n2/ (/ n/ 是/ 连接/ 集合/ 的/ 大小/ )/ ,/ 反之/ ,/ 连接/ 结果/ 集/ 比较/ 小/ ./ 当前/ 已有/ 的/ 连接/ 结果/ 大小/ 的/ 估计/ 方法/ 主要/ 是/ 基于/ 采样/ 的/ 方法/ ./ 这些/ 方法/ 中/ 部分/ 可以/ 应用/ 于/ 本文/ 所/ 考虑/ 的/ 阈值/ 相似/ 连接/ 估计/ ,/ 但/ 在/ 应用/ 到/ 这个/ 问题/ 时有/ 一个/ 显著/ 缺陷/ :/ 只/ 适用/ 于/ 阈值/ 比较/ 小/ ,/ 连接/ 结果/ 集合/ 较大/ 的/ 情况/ ./ 当/ 阈值/ 较大/ ,/ 连接/ 结果/ 集合/ 较/ 小时/ ,/ 就/ 无法/ 保证/ 估计/ 效果/ ./ 针对/ 一般/ 采样/ 的/ 缺陷/ ,/ 文献/ [/ 17/ ]/ 提出/ 了/ 一种/ 基于/ 局部/ 敏感/ Hash/ (/ LocalitySensitiveHashing/ ,/ LSH/ )/ 的/ 采样/ 方法/ 用来/ 估计/ 相似/ 自/ 连接/ 结果/ 大小/ ./ 文献/ [/ 17/ ]/ 主要/ 解决/ 向量/ (/ 或/ 集合/ )/ 相似/ 连接/ 问题/ ,/ 其/ 主要/ 思想/ 是/ 应用/ 局部/ 敏感/ Hash/ 算法/ 把/ 相似/ 的/ 向量/ (/ 或/ 集合/ )/ Hashing/ 到/ 相同/ 的/ 桶/ 中/ ,/ 然后/ 分/ 两种/ 情况/ 进行/ 采样/ ./ 一/ 是从/ 相同/ 的/ 桶/ 中/ 进行/ 采样/ 估计/ 结果/ 大小/ ;/ 二/ 是从/ 不同/ 的/ 桶/ 中/ 进行/ 采样/ 估计/ 结果/ 大小/ ,/ 两者/ 结合/ 可/ 得到/ 较/ 准确/ 的/ 估计值/ ./ 在/ 这种/ 方法/ 中/ ,/ 即使/ 取/ 较大/ 的/ 相似/ 度/ 阈值/ ,/ 从/ 同一个/ 桶/ 中/ 的/ 采样/ 满足/ 阈值/ 的/ 可能性/ 也/ 比较/ 大/ ,/ 因为/ 同一个/ 桶/ 中/ 的/ 对象/ 都/ 是/ 比较/ 相似/ 的/ ,/ 从而/ 可以/ 保证/ 估计/ 的/ 效果/ ./ 虽然/ 这种/ 方法/ 可以/ 提高/ 相似/ 度/ 阈值/ 较/ 高时/ 采样/ 方法/ 的/ 估计/ 准确度/ ,/ 但是/ 该/ 方法/ 只/ 适用/ 于/ 属性/ 值为/ Page5/ 单个/ 向量/ (/ 或/ 集合/ )/ 时/ 的/ 相似/ 连接/ 估计/ ./ 因此/ ,/ 对于/ 本文/ 考虑/ 的/ 实体/ 关系数据库/ 中/ 阈值/ 相似/ 连接/ 不太/ 适用/ ./ 这/ 主要/ 体现/ 在/ 三个/ 方面/ ./ 一是/ 在/ 实体/ 关系数据库/ 中/ ,/ 每个/ 属性/ 值有/ 多个/ 可能/ 取值/ ,/ 在/ 聚类/ 过程/ 中/ ,/ 要/ 同时/ 考虑/ 多个/ 取值/ 的/ 影响/ ;/ 二是/ 实体/ 关系/ 数据模型/ 中/ 增加/ 了/ 数据/ 的/ 清洁度/ ,/ 那么/ 即使/ 有/ 相同/ 的/ 可能/ 取值/ ,/ 但是/ 对应/ 的/ 清洁度/ 不同/ ,/ 也/ 会/ 产生/ 不同/ 的/ 连接/ 结果/ ;/ 三是/ 文献/ [/ 17/ ]/ 中/ 的/ 方法/ 针对/ 的/ 是/ 相似/ 自/ 连接/ 估计/ ,/ 而且/ 其/ 采样/ 方法/ 可能/ 会/ 产生/ 重复/ 的/ 采样/ ./ 考虑/ 到/ 基于/ 聚类/ 采样/ 的/ 方法/ 可以/ 解决/ 相似/ 度较/ 高时/ ,/ 一般/ 采样/ 方法/ 的/ 缺陷/ ,/ 本文/ 的/ 估计/ 算法/ 正是/ 以此/ 为/ 基本/ 框架/ ./ 为了/ 解决/ 其/ 不足/ ,/ 本文/ 提出/ 了/ 基于/ 清洁度/ 的/ 局部/ 敏感/ Hash/ 聚类/ 算法/ ./ 该/ 算法/ 不仅/ 考虑/ 了/ 每个/ 属性/ 值/ 的/ 多个/ 可能/ 取值/ ,/ 而且/ 还/ 考虑/ 了/ 不同/ 取值/ 对应/ 清洁度/ 的/ 影响/ ,/ 例/ 3/ 展示/ 了/ 该/ 算法/ 的/ 优点/ ./ 其次/ ,/ 为了/ 避免/ 重复/ 采样/ ,/ 本文/ 采用/ 无/ 重复/ 随机/ 采样/ 方法/ ./ 例/ 3/ ./ 考虑/ 两个/ 不/ 确定/ 属性/ 值/ :/ t1/ :/ {/ (/ Robert/ ,/ 0.9/ )/ ,/ (/ Bob/ ,/ 0.1/ )/ }/ 和/ t2/ :/ {/ (/ Robert/ ,/ 0.1/ )/ ,/ (/ Bob/ ,/ 0.9/ )/ }/ ./ 如果/ 应用/ 文献/ [/ 17/ ]/ 中/ 的/ 方法/ 分别/ 考虑/ 所有/ 取值/ ,/ 那么/ t1/ 和/ t2/ 将会/ 分别/ 被/ 计数/ 2/ 次/ ,/ 而/ 本文/ 算法/ 将会/ 综合/ 多个/ 取值/ ,/ 对/ t1/ 和/ t2/ 只/ 计数/ 1/ 次/ ./ 其次/ ,/ 文献/ [/ 18/ ]/ 中/ 的/ 方法/ 无法/ 反映/ 不同/ 取值/ 清洁度/ 的/ 影响/ ,/ 则/ 无法/ 区别/ t1/ 和/ t2/ ./ 而/ 实际上/ ,/ 如果/ 给定/ t3/ :/ {/ (/ Robert/ ,/ 1/ )/ }/ ,/ 编辑/ 距离/ 阈值/ 为/ 2/ ,/ 清洁度/ 阈值/ 为/ 0.3/ ,/ 则/ 仅/ (/ t1/ ,/ t3/ )/ 满足/ 连接/ 条件/ ,/ (/ t2/ ,/ t3/ )/ 并/ 不/ 满足/ ./ 所以/ ,/ t1/ 和/ t2/ 仅/ 取值/ 相同/ ,/ 而/ 实际/ 代表/ 的/ 属性/ 值/ 并不相同/ ,/ 本文/ 的/ 算法/ 则/ 可以/ 在/ 聚类/ 过程/ 中/ 区别/ t1/ 和/ t2/ ./ 的/ 基本/ 框架/ ./ 算法/ 1/ 给出/ 了/ 阈值/ 相似/ 连接/ 结果/ 大小/ 估计/ 算法/ 算法/ 1/ ./ JoinEstimation/ ./ 步骤/ 1/ ./ 数据/ 预处理/ 输入/ :/ 不/ 确定/ 属性/ 值/ 集合/ R/ 和/ S/ 输出/ :/ 集合/ R/ 和/ S/ 的/ 聚类/ 结果/ 集合/ // // P/ 、/ C/ 分别/ 表示/ 相似/ 对/ 集合/ 、/ 聚类/ 集合/ 1/ ./ PR/ ←/ LSH/ _/ Quality/ (/ R/ )/ // / 返回/ R/ 中/ 所有/ 的/ 相似/ 对/ / // 2/ ./ PS/ ←/ LSH/ _/ Quality/ (/ S/ )/ 3/ ./ CR/ ←/ Clustering/ (/ PR/ )/ // / 返回/ R/ 的/ 聚类/ 结果/ 集合/ / // 4/ ./ CS/ ←/ Clustering/ (/ PS/ )/ 步骤/ 2/ ./ 采样/ 估计/ 输入/ :/ 不/ 确定/ 属性/ 值/ 集合/ R/ 和/ S/ 的/ 聚类/ 结果/ ,/ 相似/ 度/ 阈/ 输出/ :/ 集合/ R/ 和/ S/ 的/ 阈值/ 相似/ 连接/ 结果/ 大小/ 估计值/ N/ // // SR/ 、/ SS/ 表示/ 采样/ 集合/ 1/ ./ SR/ ←/ Sampling/ (/ CR/ )/ 2/ ./ SS/ ←/ Sampling/ (/ CS/ )/ 3/ ./ N/ =/ 04/ ./ FORiFROM1TO/ |/ SR/ |/ // / SR/ 中/ 每/ 一个/ 采样/ 集合/ / // 5/ ./ FORjFROM1TO/ |/ SS/ |/ // / SS/ 中/ 每/ 一个/ 采样/ 集合/ / // 6/ ./ n/ =/ 07/ ./ FOREACHpair/ (/ r/ ,/ s/ )/ ,/ 其中/ r/ ∈/ SRi/ ,/ s/ ∈/ SSj8/ ./ IF/ ∑/ sim/ (/ vri9/ ./ n/ ++/ 10/ ./ ENDFOR11/ ./ N/ +/ =/ |/ CRi/ |/ / |/ CSj/ |/ / n/ // (/ |/ SRi/ |/ / |/ SSj/ |/ )/ 12/ ./ ENDFOR13/ ./ ENDFOR14/ ./ RETURNN/ 框架/ 分为/ 两个/ 部分/ :/ 首先/ 对/ 数据/ 集/ 进行/ 预处理/ ,/ 把/ 相似/ 的/ 不/ 确定/ 属性/ 值/ 聚集/ 在/ 一起/ ;/ 然后/ 再/ 从/ 聚类/ 集中/ 采样/ 估计/ 连接/ 结果/ 大小/ ./ 采样/ 函数/ Sampling/ (/ )/ 采用/ 随机/ 采样/ ,/ 从/ 每个/ 聚类/ 中/ 随机/ 采样/ 组成/ 样本/ 集合/ ,/ 在/ 该/ 样本/ 集合/ 上/ 做/ 阈值/ 相似/ 连接/ ,/ 估计/ 连接/ 结果/ 大小/ ./ 即/ ,/ 如果/ R/ 中/ 第/ i/ 个/ 聚类/ CRi/ 的/ 采样/ 集合/ SRi/ 与/ S/ 中/ 第/ j/ 个/ 聚类/ CSj/ 的/ 采样/ 集合/ SSj/ 连接/ 结果/ 大小/ 为/ n/ ,/ 则/ CRi/ 和/ CSj/ 连接/ 结果/ 大小/ 估计值/ 为/ |/ CRi/ |/ / |/ CSj/ |/ / n/ // (/ |/ SRi/ |/ / |/ SSj/ |/ )/ ./ 分别/ 估计/ 不同/ 聚类/ 连接/ 结果/ 大小/ ,/ 相加/ 即可/ 得到/ 整个/ 集合/ 连接/ 结果/ 大小/ 的/ 估计值/ ./ 对于/ 聚类/ 函数/ Clustering/ (/ )/ ,/ 本文/ 以/ 局部/ 敏感/ Hash/ 算法/ 为/ 基础/ 提出/ 了/ 基于/ 清洁度/ 的/ 局部/ 敏感/ Hash/ 聚类/ 算法/ ,/ 下/ 一节/ 我们/ 给出/ 该/ 算法/ 的/ 详细/ 介绍/ ./ 4/ 基于/ 清洁度/ 的/ 局部/ 敏感/ Hash/ 聚类/ 局部/ 敏感/ Hash/ 聚类/ 算法/ 是/ 本文/ 估计/ 方法/ 的/ 核心/ ,/ 本/ 节/ 讨论/ 该/ 聚类/ 算法/ ,/ 通过/ 该/ 算法/ 计算/ 出/ 所有/ 的/ 相似/ 对/ ,/ 然后/ 应用/ 该/ 相似/ 对/ 结果/ 进行/ 聚类/ ./ 首先/ 我们/ 简单/ 介绍/ 局部/ 敏感/ Hash/ 算法/ ,/ 然后/ 讨论/ 如何/ 在/ 实体/ 关系数据库/ 中/ 应用/ 该/ 算法/ ,/ 同时/ 考虑/ 所有/ 的/ 可能/ 取值/ 以及/ 清洁度/ 的/ 影响/ ,/ 最后/ 给出/ 聚类/ 算法/ ./ 4.1/ 局部/ 敏感/ Hash/ 算法/ 局部/ 敏感/ Hash/ 算法/ 最早/ 由/ Indyk/ 和/ Motwani/ 提出/ [/ 19/ ]/ ,/ 用以/ 解决/ 高/ 维空间/ 的/ k/ -/ NN/ (/ kNearestNeighbor/ )/ 问题/ ./ 算法/ 的/ 主要/ 思想/ 是/ :/ 对于/ 给定/ 的/ 高维/ 向量/ 集合/ ,/ 选择/ 一/ 族/ 局部/ 敏感/ Hash/ 函数/ ,/ 如果/ 两个/ 向量/ 夹角/ 越小/ (/ 越/ 相似/ )/ ,/ 那么/ 它们/ 对应/ 的/ Hash/ 值/ 就/ 越/ 有/ 可能/ 相近/ ./ 从而/ 可以/ 根据/ 向量/ 的/ Hash/ 值来/ 判断/ 向量/ 是否/ 相似/ ./ 文献/ [/ 20/ ]/ 对/ 局部/ 敏感/ Hash/ 函数/ 做/ 了/ 详细描述/ ,/ 并/ 给出/ 定义/ 如下/ ./ 定义/ 5/ ./ 局部/ 敏感/ Hash/ 函数/ ./ 给定/ 一族/ HashPage6/ 函数/ H/ ,/ 如果/ 对于/ 任意/ 两个/ 向量/ 狌/ ,/ 狏/ ∈/ Rm/ ,/ h/ ∈/ H/ 都/ 满足/ 则/ 称/ 其/ 为/ 一族/ 局部/ 敏感/ Hash/ 函数/ ,/ 其中/ sim/ (/ 狌/ ,/ 狏/ )/ 为/ 相似性/ 衡量/ 函数/ ./ 对于/ 给定/ 的/ m/ 维/ 向量/ 集合/ ,/ 文献/ [/ 20/ ]/ 给出/ 了/ 一种/ 选择/ 敏感/ Hash/ 函数/ 的/ 方法/ :/ 随机/ 选择/ 一个/ m/ 维/ 向量/ 狏/ ,/ 定义/ 敏感/ Hash/ 函数/ 如下/ :/ 然后/ 对于/ 给定/ 两个/ 向量/ 狏/ 和/ 狌/ ,/ 有/ 如下/ 公式/ :/ 如果/ 取/ 相似/ 度/ 函数/ 为/ 余弦/ 相似/ 度/ ,/ 那么/ 夹角/ 越小/ ,/ 余弦/ 值越/ 大/ ,/ 两个/ 向量/ 就/ 越/ 相似/ ./ 因此/ ,/ 根据/ 等式/ (/ 1/ )/ 和/ (/ 2/ )/ ,/ 该/ Hash/ 函数/ 符合/ 定义/ 5/ ./ Goemans/ 和/ Williamson/ 在/ 文献/ [/ 21/ ]/ 给出/ 了/ 等式/ (/ 1/ )/ 的/ 证明/ ./ 为了/ 提高/ Hash/ 函数/ 的/ 准确率/ ,/ 在/ 实际/ 应用/ 中/ ,/ 一般/ 选取/ 多个/ 随机/ 向量/ ,/ 然后/ 分别/ 应用/ Hash/ 函数/ 得到/ 0/ // 1/ 值/ ,/ 从而/ 可以/ 把/ 一个/ 高维/ 向量/ 转化/ 为/ 一个/ 0/ // 1/ 串/ ./ 即/ 如果/ 选取/ d/ (/ d/ / m/ )/ 个/ 随机/ 向量/ ,/ 那么/ 每个/ m/ 维/ 向量/ 就/ 转化/ 为/ 长度/ 为/ d/ 的/ 0/ // 1/ 串/ ./ 根据/ 文献/ [/ 22/ ]/ ,/ 有/ 如下/ 公式/ :/ P/ (/ h/ 狉/ (/ 狌/ )/ =/ h/ 狉/ (/ 狏/ )/ )/ =/ 1/ -/ hamming/ _/ distance/ (/ 狌/ ,/ 狏/ )/ 其中/ hamming/ _/ distance/ (/ 狌/ ,/ 狏/ )/ 表示/ 狌/ 和/ 狏/ 的/ Ham/ -/ ming/ 距离/ ./ 两个/ 0/ // 1/ 串/ 的/ Hamming/ 距离/ 等于/ 两者/ 相同/ 位置/ 不同/ 取值/ 的/ 个数/ ./ 如/ 1011101/ 和/ 1101111/ 的/ Hamming/ 距离/ 为/ 3/ ./ 根据/ 等式/ (/ 1/ )/ 和/ (/ 3/ )/ 可得/ sim/ (/ 狌/ ,/ 狏/ )/ =/ 1/ -/ hamming/ _/ distance/ (/ 狌/ ,/ 狏/ )/ 因此/ ,/ 根据/ 式/ (/ 4/ )/ ,/ 可以/ 把/ 判断/ 两个/ 向量/ 是否/ 相似/ 的/ 问题/ 转化/ 为/ 计算/ 两个/ 向量/ 对应/ 0/ // 1/ 串/ 的/ 海明/ 距离/ ./ 如果/ 海明/ 距离/ 小于/ 某个/ 阈值/ l/ ,/ 则/ 两个/ 向量/ 相似/ ,/ 反之/ ,/ 则/ 不/ 相似/ ./ 而/ 计算/ 两个/ 0/ // 1/ 串/ 的/ 海明/ 距离/ 是/ 快速/ 高效/ 的/ ,/ 因此/ ,/ 通过/ 局部/ 敏感/ Hash/ 算法/ ,/ 可以/ 快速/ 计算/ 出/ 所有/ 的/ 相似/ 向量/ 对/ ./ 在/ 下/ 一节/ 中/ ,/ 将/ 给出/ 如何/ 在/ 考虑/ 多个/ 可能/ 值/ 和/ 其/ 对应/ 清洁度/ 的/ 同时/ ,/ 应用/ 局部/ 敏感/ Hash/ 算法/ 计算/ 所有/ 不/ 确定/ 属性/ 值/ 相似/ 对/ ./ 4.2/ 基于/ 清洁度/ 的/ Hash/ 算法/ 4.1/ 节/ 已经/ 介绍/ 了/ 局部/ 敏感/ Hash/ 算法/ ,/ 但/ 该/ 算法/ 是/ 针对/ 高维/ 向量/ 的/ ,/ 如果/ 要/ 在/ 本文/ 的/ 问题/ 中/ 应用/ 该/ 算法/ ,/ 需要/ 将/ 每个/ 不/ 确定/ 属性/ 值/ 转换成/ 一个/ 向量/ ,/ 同时/ 还要/ 考虑/ 不同/ 取值/ 清洁度/ 的/ 影响/ ./ 本节/ 主要/ 讨论/ 如何/ 在/ 考虑/ 不同/ 取值/ 的/ 清洁度/ 的/ 影响/ 下/ ,/ 把/ 一个/ 不/ 确定/ 属性/ 转换成/ 一个/ 向量/ ,/ 并/ 给出/ 基于/ 此/ 向量/ 的/ 局部/ 敏感/ Hash/ 算法/ ./ 4.2/ ./ 1/ 不/ 确定/ 属性/ 值/ 的/ 向/ 量化/ 本文/ 在/ 计算/ 相似/ 连接/ 时/ ,/ 应用/ 编辑/ 距离/ 来/ 衡量/ 相似/ 度/ ./ 现有/ 基于/ 编辑/ 距离/ 的/ 相似/ 连接/ 方法/ 都/ 是/ 基于/ q/ -/ gram/ 做/ 的/ ,/ q/ -/ gram/ 是/ 字符串/ 中/ 长度/ 为/ q/ 的/ 连续/ 子串/ ,/ q/ -/ gram/ 集合/ 是/ 一个/ 字符串/ 中/ 所有/ q/ -/ gram/ 的/ 集合/ ./ 显然/ 如果/ 两/ 字符串/ 之间/ 的/ 编辑/ 距离/ 越小/ ,/ 那么/ 两个/ 字符串/ 共有/ 的/ q/ -/ gram/ 一定/ 越多/ ./ 例如/ :/ 给定/ 两个/ 字符串/ s1/ 和/ s2/ ,/ 如果/ ed/ (/ s1/ ,/ s2/ )/ / k/ ,/ 那么/ s1/ 和/ s2/ 至少/ 公共/ 的/ q/ -/ gram/ 数为/ 基于/ 以上/ 分析/ ,/ 实体/ 关系数据库/ 中/ 的/ 所有/ 可能/ 取值/ 都/ 有/ 其/ 对应/ 的/ q/ -/ gram/ 集合/ ,/ 每个/ 不/ 确定/ 属性/ 值/ 也/ 有/ 其/ 对应/ 的/ q/ -/ gram/ 集合/ (/ 即/ 该/ 不/ 确定/ 属性/ 值/ 的/ 所有/ 可能/ 取值/ 的/ 对应/ q/ -/ gram/ 集合/ 的/ 并/ 集/ )/ ./ 表/ 6/ 给出/ 了/ 一个/ 实例/ ./ 需要/ 注意/ 的/ 是/ :/ 在/ 这些/ 集合/ 中/ ,/ 我们/ 允许/ 元素/ 重复/ 出现/ ,/ 如表/ 6/ 中/ 集合/ S/ 含有/ 两个/ “/ ob/ ”/ ./ {/ (/ Robert/ ,/ 0.6/ )/ ,/ (/ Bob/ ,/ 0.4/ )/ }/ S/ =/ S1/ ∪/ S2/ :/ {/ Ro/ ,/ ob/ ,/ be/ ,/ er/ ,/ rt/ ,/ Bo/ ,/ ob/ }/ 由式/ (/ 5/ )/ 可/ 得/ ,/ 如果/ 两个/ 字符串/ s1/ 和/ s2/ 相似/ (/ ed/ (/ s1/ ,/ s2/ )/ / k/ )/ ,/ 则/ 至少/ 含有/ max/ (/ |/ s1/ |/ ,/ |/ s2/ |/ )/ +/ 1/ -/ (/ k/ +/ 1/ )/ q/ 个/ 公共/ q/ -/ gram/ ,/ 表示/ 为/ L/ (/ s1/ ,/ s2/ )/ ./ 再/ 考虑/ 到/ 实体/ 关系/ 数据模型/ 中/ 相似/ 连接/ (/ 定义/ 3/ )/ 的/ 特点/ :/ 如果/ 元组/ 对/ (/ r/ ,/ s/ )/ 越/ 相似/ ,/ 则/ 它们/ 对应/ 可能/ 取值/ 的/ 相似/ 对/ (/ ri/ ,/ sj/ )/ 就/ 越/ 多/ ./ 由此/ ,/ 可以/ 得到/ 如下/ 性质/ ./ 性质/ 1/ ./ 如果/ 元组/ 对/ (/ r/ ,/ s/ )/ 对应/ 可能/ 取值/ 的/ 相似/ 对/ 数量/ 为/ m/ ,/ 那么/ r/ 和/ s/ 对应/ 的/ q/ -/ gram/ 集合/ 的/ 公共/ q/ -/ gram/ 数/ 至少/ 为/ mL/ (/ ri/ ,/ sj/ )/ ./ 从而/ 元组/ 对/ (/ r/ ,/ s/ )/ 越/ 相似/ ,/ 对应/ 的/ q/ -/ gram/ 集合/ 的/ 公共/ q/ -/ gram/ 数越/ 多/ ,/ 对应/ 的/ 高维/ 向量/ 也/ 应该/ 越/ 相似/ ./ 根据/ 性质/ 1/ ,/ 假如/ 对/ 每个/ 不/ 确定/ 属性/ 值/ 所有/ 的/ q/ -/ gram/ 进行/ 计数/ ,/ 那么/ 每个/ 属性/ 值/ 便/ 可以/ 转换成/ 一个/ 高维/ 向量/ ,/ 其中/ 每/ 一维/ 对应/ 一个/ 不同/ 的/ q/ -/ gram/ ,/ 向量/ 的/ 维度/ 等于/ 不/ 确定/ 属性/ 值/ 集合/ 的/ 所有/ 不同/ 的/ q/ -/ gram/ 的/ 种类/ 数/ ,/ 本文/ 称该/ 过程/ 为/ 不/ 确定/ 属性/ 值/ 的/ 向/ 量化/ ./ 需要/ 注意/ 的/ 是/ ,/ 在/ 实际/ 向/ 量化/ 过程/ 中/ ,/ 计数/ 所有/ q/ -/ gram/ 的/ 代价/ 较大/ ,/ 所以/ 向量/ 的/ 维数会/ 小于/ 不同/ 的/ q/ -/ gram/ 的/ 种类/ 数/ ./ 图/ 1/ 展示/ 了/ 一个/ 向/ 量化/ 过程/ ,/ 其中/ 不/ 确定/ 属性/ 值为/ {/ (/ Robert/ ,/ 0.6/ )/ ,/ (/ Bob/ ,/ 0.4/ )/ }/ ,/ 其向/ 量化/ 结果/ 为/ (/ 3/ ,/ 0/ ,/ 2/ ,/ 2/ ,/ 0/ )/ ./ Page7/ 但是/ 上述/ 向/ 量化/ 过程/ 中/ 没有/ 考虑/ 清洁度/ 的/ 影响/ ,/ 例如/ 对于/ 两个/ 不/ 确定/ 属性/ 值/ :/ {/ (/ Robert/ ,/ 0.9/ )/ ,/ (/ Bob/ ,/ 0.1/ )/ }/ 和/ {/ (/ Robert/ ,/ 0.1/ )/ ,/ (/ Bob/ ,/ 0.9/ )/ }/ ,/ 上述/ 方法/ 向/ 量化/ 结果/ 均/ 为/ (/ 3/ ,/ 0/ ,/ 2/ ,/ 2/ ,/ 0/ )/ ,/ 无法/ 区别/ 两个/ 值/ ./ 为了/ 处理/ 这个/ 情况/ ,/ 考虑/ 阈值/ 相似/ 连接/ (/ 定义/ 4/ )/ 的/ 特点/ ,/ 我们/ 可以/ 得到/ 另/ 一个/ 性质/ ./ 性质/ 2/ ./ 如果/ 元组/ 对/ (/ r/ ,/ s/ )/ 对应/ 清洁度/ 为/ p/ ,/ 由于/ p/ =/ ∑/ ed/ (/ vripsj/ 也/ 越/ 大/ ,/ 即/ 元组/ 对/ (/ r/ ,/ s/ )/ 对应/ 清洁度/ 越大/ ,/ 其/ 公共/ q/ -/ gram/ 所在/ 的/ 对应/ 值/ 的/ 清洁度/ 也/ 会/ 越/ 大/ ./ 根据/ 性质/ 2/ ,/ 我们/ 可以/ 对/ 不/ 确定/ 属性/ 值/ 的/ 向/ 量化/ 进行/ 改进/ ,/ 加入/ 清洁度/ 的/ 影响/ ,/ 使/ 得到/ 的/ 向量/ 能/ 更/ 准确/ 地/ 代表/ 其/ 对应/ 的/ 属性/ 值/ ./ 只/ 需要/ 在/ 向/ 量化/ 的/ 过程/ 中/ ,/ 对/ 每/ 一个/ q/ -/ gram/ 乘以/ 其/ 所在/ 取值/ 的/ 清洁度/ 再/ 进行/ 计数/ ,/ 这样/ 便/ 可以/ 在/ 向/ 量化/ 过程/ 中/ 反映/ 出/ 不同/ 取值/ 的/ 清洁度/ ./ 如图/ 2/ 所示/ ,/ {/ (/ Robert/ ,/ 0.9/ )/ ,/ (/ Bob/ ,/ 0.1/ )/ }/ 向/ 量化/ 值为/ (/ 1.9/ ,/ 0/ ,/ 1/ ,/ 1.8/ ,/ 0/ )/ ,/ 而/ 类似/ 的/ ,/ {/ (/ Robert/ ,/ 0.1/ )/ ,/ (/ Bob/ ,/ 0.9/ )/ }/ 向/ 量化/ 值为/ (/ 1.1/ ,/ 0/ ,/ 1/ ,/ 0.2/ ,/ 0/ )/ ./ 可以/ 看出/ ,/ 该/ 向/ 量化/ 方法/ 能/ 更/ 准确/ 地/ 反映/ 不/ 确定/ 属性/ 值/ ./ 4.2/ ./ 2/ 详细/ 算法/ 由/ 4.2/ ./ 1/ 节中/ 的/ 方法/ ,/ 可以/ 把/ 所有/ 不/ 确定/ 属性/ 值向/ 量化/ ./ 在/ 此基础/ 上/ ,/ 由/ 4.1/ 节中/ 的/ 介绍/ ,/ 我们/ 给出/ 详细/ 算法/ ,/ 计算/ 出/ 所有/ 相似/ 对/ ./ 算法/ 2/ 描述/ 了/ 这/ 一/ 过程/ ./ 算法/ 2/ ./ LSH/ _/ Quality/ ./ 输入/ :/ 不/ 确定/ 属性/ 值/ 集合/ S/ 和/ Hamming/ 距离/ 阈值/ l/ 输出/ :/ 不/ 确定/ 属性/ 值/ 集合/ S/ 中/ 所有/ 的/ 相似/ 对/ PS1/ ./ 随机/ d/ 个/ m/ 维/ 向量/ {/ 狏/ 1/ ,/ …/ ,/ 狏/ d/ }/ 2/ ./ FOREACHs/ ∈/ SDO3/ ./ 狏/ ←/ vectorize/ (/ s/ )/ // / 把/ s/ 向/ 量化/ 结果/ 为/ 狏/ / // 4/ ./ FOREACH/ 狏/ i/ ∈/ {/ 狏/ 1/ ,/ …/ ,/ 狏/ d/ }/ 5/ ./ ui/ ←/ h/ 狏/ i/ (/ 狌/ )/ // / 局部/ 敏感/ Hash/ 函数/ / // 6/ ./ ENDFOR/ // / 向量/ 狏/ 转化/ 为/ 长度/ 为/ d/ 的/ 0/ // 1/ 串/ / // 7/ ./ ENDFOR8/ ./ FOREACHpair/ (/ ui/ ,/ uj/ )/ do9/ ./ IFhamming/ _/ distance/ (/ ui/ ,/ uj/ )/ </ lTHEN10/ ./ PS/ ←/ (/ ui/ ,/ uj/ )/ 11/ ./ ENDFOR12/ ./ RETURNPS/ 函数/ vectorize/ (/ s/ )/ 用来/ 将/ s/ 向/ 量化/ ,/ 返回/ 一个/ m/ 维/ 向量/ ./ 该/ 过程/ 是/ 对/ q/ -/ gram/ 集合/ 中/ 不同/ q/ -/ gram/ 计数/ 的/ 过程/ ,/ 假定/ 属性/ 值/ 对应/ 的/ 字符串/ 长度/ 均/ 在/ 一定/ 范围/ 内/ ,/ 则/ 函数/ 可/ 在/ 常数/ 时间/ 内/ 完成/ ,/ 时间/ 复杂度/ 为/ O/ (/ 1/ )/ ./ 函数/ hamming/ _/ distance/ (/ 狌/ i/ ,/ 狌/ j/ )/ 计算/ 狌/ i/ 和/ 狌/ j/ 的/ 海明/ 距离/ ,/ 由于/ 每个/ 不/ 确定/ 属性/ 值均/ 转换成/ 长度/ 为/ d/ 的/ 0/ // 1/ ,/ 而且/ d/ / m/ ,/ 所以/ 该/ 函数/ 时间/ 复杂度/ 也/ 是/ O/ (/ 1/ )/ ./ 因此/ 算法/ 2/ 的/ 时间/ 复杂度/ 为/ O/ (/ n/ )/ +/ O/ (/ n2/ )/ ,/ 即/ O/ (/ n2/ )/ ./ 4.3/ 聚类/ 算法/ 通过/ 第/ 4.2/ 节中/ 的/ 算法/ ,/ 可以/ 得到/ 所有/ 相似/ 对/ 集合/ ./ 本节/ 给出/ 聚类/ 算法/ ,/ 应用/ 相似/ 对/ 集合/ 把/ 所有/ 相似/ 的/ 不/ 确定/ 属性/ 值/ 聚集/ 在/ 一起/ ./ 从而/ 可以/ 在/ 每个/ 聚类/ 集上/ 进行/ 采样/ ,/ 估计/ 阈值/ 相似/ 连接/ 的/ 结果/ 大小/ ./ 考虑/ 到/ 已经/ 得到/ 了/ 所有/ 的/ 相似/ 对/ ,/ 如果/ 把/ 每个/ 不/ 确定/ 属性/ 值/ 看作/ 一个/ 顶点/ ,/ 每个/ 相似/ 对/ 看作/ 顶点/ 之间/ 的/ 边/ ,/ 即/ 如果/ 两个/ 属性/ 值/ 相似/ ,/ 那么/ 其/ 对应/ 的/ 顶点/ 之间/ 有/ 一条/ 边/ ./ 经过/ 上述/ 变换/ ,/ 可以/ 把/ 不/ 确定/ 属性/ 值/ 集合/ 转化/ 为/ 一个/ 图/ ,/ 该图/ 反映/ 了/ 集合/ 中/ 所有/ 不/ 确定/ 属性/ 值/ 之间/ 的/ 相似/ 关系/ ,/ 从而/ 把/ 相似/ 属性/ 值聚类/ 问题/ 转化/ 为图/ 聚类/ (/ 图/ 聚集/ )/ 或者/ 社区/ 发现/ 问题/ ./ 当前/ 已经/ 有/ 很多/ 工作/ 研究/ 图聚类/ 问题/ [/ 23/ ]/ 和/ 社区/ 发现/ 问题/ [/ 24/ -/ 25/ ]/ ,/ 本文/ 中/ ,/ 我们/ 采用/ 了/ 社区/ 发现/ 中/ 应用/ 最为/ 广泛/ 的/ CNM/ 算法/ 进行/ 聚类/ ./ 该/ 算法/ 是/ 基于/ 模块/ 度/ 划分/ 聚类/ 的/ ./ 模块/ 度/ 被/ 用来/ 衡量/ 一个/ 划分/ 的/ 好坏/ ./ 通常/ 一个/ 好/ 的/ 划分/ 会/ 使/ 聚类/ 内部/ 的/ 边/ 较/ 多/ ,/ 而/ 聚类/ 之间/ 的/ 边/ 较/ 少/ ./ CNM/ 算法/ 中/ 定义/ 模块/ 度/ 如下/ :/ 其中/ ,/ eij/ 表示/ 为/ 连接/ 聚类/ i/ 和/ 聚类/ j/ 的/ 点/ 的/ 边/ 数所/ 占/ 的/ 比例/ ,/ ai/ 表示/ 聚类/ i/ 内部/ 的/ 边/ 所/ 占/ 的/ 比例/ ./ 该/ 算法/ 的/ 主要/ 思想/ 是/ :/ 初始化/ 聚类/ ,/ 不断/ 合并/ 聚类/ ,/ 使/ 其/ 沿着/ 模块/ 度/ 增大/ 最/ 多/ 或者/ 减少/ 最小/ 的/ 方向/ 合并/ ,/ 直到/ 最终/ 合并/ 为/ 一个/ 聚类/ ./ 该/ 过程/ 结束/ 后会/ 得/ Page8/ 到/ 一个/ 可分解/ 的/ 聚类/ 结构/ 树状/ 图/ ,/ 对该/ 聚类/ 结构/ 树状/ 图/ 的/ 不同/ 断开/ 方式/ 对应/ 不同/ 聚类/ 划分/ ,/ 则/ 其中/ 对应/ 最大/ 模块/ 度/ 的/ 聚类/ 结构/ 树状/ 图/ 断开/ 方式/ 就是/ 最好/ 的/ 图/ 的/ 划分/ ,/ 即/ 最好/ 聚类/ 结果/ ./ 文献/ [/ 25/ ]/ 给出/ 了/ 该/ 算法/ 的/ 详细描述/ ./ 通过/ CNM/ 算法/ 得到/ 聚类/ 结果/ 后/ ,/ 我们/ 就/ 可以/ 应用/ 第/ 3/ 节中/ 的/ 方法/ 进行/ 采样/ 并/ 估计/ 阈值/ 相似/ 连接/ 结果/ 的/ 大小/ ./ 5/ 实验/ 为了/ 充分/ 验证/ 本文/ 方法/ 的/ 估计/ 效果/ ,/ 我们/ 的/ 实为/ 了/ 验证/ 本文/ 算法/ 的/ 估计/ 效果/ ,/ 我们/ 在/ Windows7/ 操作系统/ 上用/ C++/ 实现/ 了/ 全部/ 算法/ ./ 实验/ 运行/ 的/ 硬件/ 环境/ 为/ 因特尔/ 酷睿/ 2/ 处理器/ ,/ 主频/ 为/ 2.93/ GHz/ ,/ 内存/ 2GB/ ./ 软件开发/ 环境/ 为/ Code/ ∷/ Blocks10/ ./ 05.5/ ./ 1/ 实验/ 数据/ 以及/ 评估/ 方法/ 验/ 数据/ 集合/ 来自/ 实体/ 识别/ 的/ 结果/ ./ 数据/ 集合/ :/ 首先/ 我们/ 采用/ 数据/ 生成/ 系统生成/ 了/ 2/ 个/ 含有/ 50K/ 个/ 不同/ 实体/ 的/ 数据/ 集合/ ,/ 其中/ 所有/ 的/ 属性/ 值均/ 是/ 长度/ 不/ 超过/ 32/ 的/ 随机/ 字符串/ ./ 通过/ 实体/ 识别/ 并/ 合并/ 表示/ 同一个/ 实体/ 的/ 数据/ ,/ 得到/ 符合/ 本文/ 数据模型/ 的/ 两个/ 实体/ 数据/ 集合/ ./ 为了/ 方便/ 实验/ ,/ 我们/ 选取/ 包含/ p/ 个/ 可能/ 值/ 的/ 不/ 确定/ 属性/ 值/ 作为/ 实验/ 数据/ 集合/ R/ 和/ S/ ,/ 其中/ p/ ∈/ {/ 1/ ,/ 2/ ,/ 3/ ,/ 4/ ,/ 5/ }/ ./ 评估/ 方法/ :/ 本文/ 采用/ 平均/ 相对误差/ 来/ 评估/ 本文/ 估计/ 方法/ 的/ 效果/ ./ 相对误差/ 可用/ 如下/ 公式/ 计算/ :/ 其中/ C/ ^/ 为/ 阈值/ 相似/ 连接/ 结果/ 大小/ 的/ 准确/ 值/ ,/ C/ 为/ 本文/ 算法/ 的/ 估计值/ ./ 5.2/ 实验/ 结果/ 及/ 分析/ 在/ 本文/ 实验/ 中/ ,/ 我们/ 对比/ 了/ 本文/ 的/ 方法/ (/ LSH/ -/ S/ )/ 和/ 一般/ 随机/ 采样/ 方法/ (/ RS/ )/ ./ 表/ 7/ 给出/ 了/ 实验/ 中/ 所/ 涉及/ 的/ 参数/ 默认值/ ./ 实验/ 基于/ 编辑/ 距离/ 来/ 衡量/ 相似性/ ,/ 相似性/ 计算公式/ 如下/ :/ Hamming/ 距离/ 阈值/ l5/ ./ 2.1/ 算法/ 效率/ 实验/ 表/ 8/ 给出/ 了/ 实际/ 阈值/ 相似/ 连接时间/ 与/ 本文/ 采样/ 估计/ 时间/ 的/ 对比/ ./ 需要/ 注意/ 的/ 是/ :/ 在/ 实验/ 过程/ 中/ ,/ 两者/ 只/ 采用/ 了/ 简单/ 的/ 优化/ 过滤/ 操作/ ,/ 但/ 这/ 并/ 不/ 影响/ 估计/ 的/ 准确度/ ./ 由表/ 8/ 中/ 数据/ 可以/ 看出/ 采样/ 估计/ 时间/ 远远/ 小于/ 实际/ 连接/ 操作/ 执行/ 时间/ ,/ 均/ 不/ 超过/ 1s/ ,/ 相对/ 实际/ 连接/ 操作/ 执行/ 时间/ 可以/ 忽略/ ./ 表/ 8/ 实际操作/ 执行/ 时间/ 和/ 采样/ 估计/ 时间/ 对比/ 数据/ 集/ 采样/ 估计/ 时间/ // s/ 实际操作/ 时间/ // s/ 两者/ 比值/ // %/ 5K0/ ./ 0918K0/ ./ 17210K0/ ./ 22820K0/ ./ 8195.2/ ./ 2/ 数据/ 集合/ 大小/ 的/ 影响/ 本/ 实验/ 中/ ,/ 我们/ 考虑/ 数据/ 集合/ 大小/ 对/ 算法/ 估计/ 效果/ 的/ 影响/ ./ 我们/ 从/ 实验/ 数据/ 集合/ R/ 和/ S/ 中/ 选取/ 适当/ 数量/ 的/ 不/ 确定/ 属性/ 值/ 组成/ 不同/ 大小/ 的/ 数据/ 集合/ ,/ 包含/ 不/ 确定/ 属性/ 值/ 的/ 数量/ 分别/ 为/ 5K/ ,/ 8K/ ,/ 10K/ ,/ 20K/ ,/ 50K/ ./ 由图/ 3/ 可以/ 看出/ ,/ 在/ 采样/ 比例/ 不变/ 的/ 情况/ 下/ ,/ 两种/ 算法/ 均/ 在/ 数据/ 集合/ 较大/ 时/ ,/ 估计值/ 更加/ 准确/ ./ 但/ 相比之下/ ,/ 本文/ 算法/ 更加/ 稳定/ ,/ 受/ 数据/ 集合/ 大小/ 影响/ 较/ 小/ ./ 5.2/ ./ 3/ 相似/ 度/ 阈值/ 大小/ 的/ 影响/ 相似/ 度/ 阈值/ 是/ 相似/ 连接/ 中/ 一个/ 重要/ 的/ 参数/ ./ 不同/ 的/ 相似/ 度/ 阈值/ 会/ 产生/ 不同/ 大小/ 的/ 结果/ 集/ ,/ 阈值/ 越小/ ,/ 连接/ 结果/ 越/ 多/ ,/ 极端/ 情况/ 下/ ,/ 当/ 阈值/ 趋近/ 于/ 0/ 时/ ,/ 连接/ 结果/ 趋近/ 于/ n2/ ./ 为了/ 测试/ 相似/ 度/ 阈值/ 的/ 影响/ ,/ 我们/ 分别/ 取/ 相似/ 度为/ 0.1/ ~/ 0.9/ 进行/ 实验/ ./ 图/ 4/ 给出/ Page9/ 了/ 实验/ 结果/ ./ 两种/ 算法/ 都/ 在/ 阈值/ 较/ 小时/ 更加/ 精确/ ,/ 随着/ 阈值/ 的/ 变大/ ,/ 估计/ 误差/ 逐渐/ 变/ 大/ ,/ 但是/ 很/ 明显/ 本文/ 算法/ 相对/ 更加/ 精确/ ./ 5.2/ ./ 4/ 清洁度/ 阈值/ 大小/ 的/ 影响/ 清洁度/ 是/ 本文/ 所/ 考虑/ 的/ 实体/ 关系/ 数据模型/ 特有/ 的/ 参数/ ,/ 反映/ 了/ 连接/ 结果/ 的/ 质量/ ./ 质量/ 越高/ ,/ 说明/ 结果/ 的/ 价值/ 越大/ ,/ 反之/ ,/ 价值/ 越小/ ,/ 小于/ 一定/ 阈值/ 可/ 忽略不计/ ./ 我们/ 变化/ 清洁度/ 阈值/ 从/ 0.1/ ~/ 0.9/ 来/ 测试/ 它/ 对/ 估计/ 算法/ 的/ 影响/ ./ 从图/ 5/ 中/ 可以/ 看出/ ,/ 随机/ 采样/ 算法/ 随着/ 阈值/ 增大/ ,/ 误差/ 逐渐/ 变/ 大/ ,/ 而/ 本文/ 算法/ 则/ 受/ 清洁度/ 变化/ 的/ 影响/ 较/ 小/ ./ 这/ 主要/ 是因为/ 本文/ 算法/ 在/ 局部/ 敏感/ Hash/ 过程/ 中/ ,/ 采用/ 的/ 是/ 基于/ 清洁度/ 的/ Hash/ 算法/ ,/ 充分考虑/ 了/ 清洁度/ 在/ 阈值/ 相似/ 连接/ 过程/ 中/ 的/ 影响/ ./ 6/ 总结/ 实体/ 关系/ 数据模型/ 是/ 一种/ 有效/ 的/ 管理/ 劣质/ 数据/ 的/ 模型/ ./ 中间/ 结果/ 大小/ 估计/ 是/ 查询/ 优化/ 过程/ 中/ 重要/ 的/ 方法/ ./ 考虑/ 到/ 传统/ 估计/ 方法/ 已/ 不再/ 适用/ 于/ 实体/ 关系数据库/ ,/ 需要/ 新/ 的/ 技术/ 来/ 估计/ 中间/ 结果/ 的/ 大小/ ./ 本文/ 针对/ 阈值/ 相似/ 连接/ 操作/ ,/ 给出/ 了/ 新/ 的/ 基于/ 采样/ 的/ 估计/ 方法/ ./ 该/ 方法/ 首先/ 通过/ 应用/ 局部/ 敏感/ Hash/ 算法/ 对/ 相似/ 对象/ 进行/ 聚类/ ,/ 再/ 在/ 聚类/ 结果/ 中/ 进行/ 采样/ 估计/ ./ 实验/ 结果表明/ ,/ 与/ 随机/ 采样/ 方法/ 相比/ ,/ 本文/ 方法/ 能/ 给出/ 更加/ 精确/ 的/ 估计/ 结果/ ./ 未来/ 工作/ 包括/ 在/ 更/ 多/ 真实/ 数据/ 上/ 进行/ 进一步/ 的/ 实验/ 以及/ 将/ 本文/ 的/ 方法/ 应用/ 到/ 实体/ 识别/ 当中/ 去/ ./ 

