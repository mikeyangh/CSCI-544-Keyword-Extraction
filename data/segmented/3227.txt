Page1/ 通过/ 增大/ 边际/ 权重/ 提高/ 基于/ 频谱/ 的/ 错误/ 定位/ 效率/ 谭德贵/ 陈林/ 王子/ 元丁晖/ 周毓明/ 徐宝文/ (/ 南京大学/ 软件/ 新/ 技术/ 国家/ 重点/ 实验室/ 南京/ 210093/ )/ (/ 南京大学/ 计算机科学/ 与/ 技术/ 系/ 南京/ 210093/ )/ 摘要/ 基于/ 频谱/ 的/ 错误/ 定位/ 技术/ 通常/ 利用/ 覆盖/ 信息/ 来求/ 出/ 程序/ 中/ 每条/ 语句/ 的/ 可疑/ 度/ ,/ 并/ 将/ 语句/ 按照/ 可疑/ 度/ 降序/ 排序/ 以/ 寻找/ 错误/ 语句/ ./ 文中/ 对/ 已有/ 的/ 基于/ 频谱/ 的/ 错误/ 定位/ 算法/ 进行/ 改进/ ,/ 将/ 失败/ 测试用例/ 的/ 边际/ 权重/ 引入/ 到/ 可疑/ 度/ 计算/ 的/ 过程/ 中/ ,/ 即/ 针对/ 某一/ 特定/ 语句/ ,/ 令/ 失败/ 测试用例/ 的/ 权重/ 随着/ 其/ 对/ 该/ 语句/ 覆盖/ 次数/ 的/ 增加/ 而/ 增大/ ./ 实验/ 结果表明/ ,/ 相对/ 于/ 其它/ 方法/ ,/ 文中/ 提出/ 的/ 方法/ 对/ 错误/ 定位/ 效率/ 有/ 一定/ 的/ 促进作用/ ,/ 即/ 只/ 需/ 检查/ 更少/ 的/ 语句/ 即可/ 找到/ 出错/ 位置/ ./ 关键词/ 软件测试/ ;/ 程序/ 分析/ ;/ 错误/ 定位/ ;/ 覆盖/ 信息/ 1/ 引言/ 错误/ 定位/ 技术/ 因/ 其/ 重要性/ 与/ 困难性/ 已经/ 受到/ 软件工程/ 研究者/ 的/ 广泛/ 关注/ ,/ 许多/ 研究者/ 提出/ 了/ 各种各样/ 的/ 错误/ 定位/ 方法/ ,/ 但/ 都/ 未能/ 很/ 好地解决/ 软件/ 的/ Page2/ 将会/ 极其/ 耗时/ ./ 鉴于/ 在/ 程序/ 设/ 断点/ 手工/ 排查/ 方法/ 存在/ 的/ 缺点/ ,/ 研究者/ 提出/ 了/ 一系列/ 自动化/ 的/ 错误/ 定位/ 方法/ ./ 这些/ 自动化/ 方法/ 可/ 分为/ 静态方法/ 与/ 动态/ 方法/ ./ 静态方法/ 主要/ 是/ 利用/ 程序/ 的/ 依赖/ 关系/ 、/ 类型/ 约束/ 等/ 程序/ 信息/ 来/ 分析程序/ 的/ 可能/ 出错/ 点/ ./ 动态/ 方法/ 主要/ 是/ 通过/ 运行/ 测试用例/ 得到/ 执行/ 轨迹/ 、/ 覆盖/ 信息/ 等/ 来/ 进行/ 错误/ 定位/ ./ 近年来/ 我们/ 结合/ 以前/ 在/ 程序/ 分析/ 、/ 度量/ 与/ 测试/ 方面/ 的/ 工作/ ,/ 对/ 错误/ 预测/ 和/ 定位/ 进行/ 了/ 初步/ 的/ 研究/ [/ 1/ -/ 7/ ]/ ,/ 并/ 在/ 此基础/ 上/ 对/ 基于/ 频谱/ 的/ 动态错误/ 定位/ 方法/ 进行/ 了/ 探讨/ ./ 这/ 既/ 要/ 对/ 程序/ 进行/ 分析/ ,/ 也/ 需要/ 输入/ 测试用例/ 对/ 程序/ 进行/ 测试/ ,/ 是/ 对/ 以往/ 错误/ 定位/ 工作/ 研究/ 的/ 一个/ 延伸/ ./ 由于/ 实现/ 容易/ ,/ 操作/ 简单/ ,/ 基于/ 频谱/ 的/ 错误/ 定位/ 是/ 目前/ 得到/ 很大/ 重视/ 的/ 一类/ 自动化/ 的/ 动态错误/ 定位/ 方法/ :/ 通过/ 运行/ 测试用例/ 得到/ 程序/ 的/ 各条/ 语句/ 被/ 测试用例/ 覆盖/ 到/ 的/ 信息/ ,/ 然后/ 利用/ 覆盖/ 信息/ 计算/ 出/ 程序/ 中/ 每条/ 语句/ 的/ 含错/ 可疑/ 度/ ,/ 并/ 将/ 相关/ 语句/ 按照/ 含错/ 可疑/ 度/ 降序/ 进行/ 排序/ 以便/ 定位/ 错误/ 语句/ ./ 在/ 实际/ 的/ 错误/ 定位/ 中/ ,/ 当/ 测试用例/ 个数/ 发生变化/ 时/ ,/ 它们/ 对于/ 语句/ 可疑/ 度/ 的/ 贡献/ 是/ 不/ 一样/ 的/ ./ 针对/ 这一/ 情况/ ,/ 本文/ 分析/ 了/ 在/ 不同/ 条件/ 下/ 测试用例/ 权重/ 对/ 错误/ 定位/ 效果/ 的/ 影响/ ,/ 提出/ 了/ 增大/ 失败/ 测试用例/ 的/ 边际/ 权重/ 的/ 错误/ 定位/ 方法/ ./ 实验/ 结果表明/ ,/ 相对/ 于/ 其它/ 方法/ ,/ 本文/ 提出/ 的/ 错误/ 定位/ 方法/ 具有/ 很/ 好/ 的/ 效率/ ./ 2/ 相关/ 工作/ 经过/ 人们/ 的/ 努力/ ,/ 基于/ 频谱/ 的/ 错误/ 定位/ 方法/ 在/ 不断/ 取得/ 进步/ ./ Harrold/ 等/ 人/ 实证/ 研究/ 了/ 程序/ 频谱/ 与/ 程序/ 行为/ 之间/ 的/ 关系/ ,/ 论证/ 了/ 通过/ 研究/ 运行/ 失败/ 测试用例/ 得到/ 的/ 频谱/ 信息/ 与/ 运行/ 成功/ 测试用例/ 得到/ 的/ 频谱/ 信息/ 之间/ 的/ 差异性/ 可/ 为/ 定位/ 出错/ 语句/ 提供/ 帮助/ [/ 8/ ]/ ./ Renieris/ 和/ Reiss/ 等/ 按/ 最/ 接近/ 执行/ 原则/ ,/ 用/ 覆盖/ 信息/ 来/ 度量/ 语句/ 的/ 接近/ 程度/ ,/ 根据/ 接近/ 程度/ 的/ 差异/ 来/ 寻找/ 错误/ 语句/ [/ 9/ ]/ ./ 对于/ 不/ 在/ 差/ 集里/ 的/ 错误/ ,/ 这种/ 方法/ 也/ 可以/ 通过/ 构造程序/ 依赖图/ 来/ 定位/ 错误/ ./ Jones/ 等/ 人/ 设计/ 实现/ 了/ 基于/ 频谱/ 的/ 错误/ 定位/ 工具/ Tarantula/ ,/ 该/ 工具/ 通过/ 计算/ 各/ 语句/ 成功/ 覆盖/ 与/ 错误/ 覆盖/ 的/ 比率/ 来/ 给/ 各个/ 语句/ 着色/ ,/ 根据/ 颜色/ 来/ 区分/ 语句/ 的/ 可疑/ 度/ [/ 10/ ]/ ./ 实验/ 表明/ ,/ Tarantula/ 工具/ 所用/ 的/ 错误/ 定位/ 方法/ 的/ 效率/ 要/ 优于/ 其它/ 很多/ 基于/ 频谱/ 的/ 错误/ 定位/ 方法/ [/ 11/ ]/ ./ 为了/ 进一步提高/ 基于/ 频谱/ 的/ 错误/ 定位/ 方法/ 的/ 效率/ ,/ 人们/ 还/ 从/ 多个/ 方面/ 对/ 其/ 进行/ 了/ 改进/ ./ 一方面/ ,/ 人们/ 考虑/ 了/ 测试用例/ 的/ 冗余/ 对/ 错误/ 定位/ 算法/ 精度/ 和/ 效率/ 的/ 影响/ ./ 如果/ 测试用例/ 选择/ 不当/ ,/ 会/ 导致/ 冗余/ 测试用例/ 具有/ 相同/ 或/ 类似/ 的/ 覆盖/ 信息/ ,/ 这些/ 冗余/ 的/ 覆盖/ 信息/ 可能/ 最终/ 降低/ 错误/ 定位/ 的/ 精度/ 和/ 效率/ ./ 针对/ 这一/ 问题/ ,/ Yu/ 等/ 人/ 研究/ 了/ 在/ 不/ 影响/ 测试/ 结果/ 的/ 情况/ 下/ 如何/ 约简/ 测试用例/ 以/ 提高/ 错误/ 定位/ 效率/ 的/ 问题/ [/ 12/ ]/ ./ Hao/ 等/ 人用/ SAFL/ 技术/ 来/ 对/ 冗余/ 覆盖/ 信息/ 进行/ 判断/ 并/ 对/ 冗余/ 测试用例/ 进行/ 约简/ [/ 13/ ]/ ./ 此后/ ,/ Hao/ 等/ 人/ 又/ 提出/ 了/ 三种/ 测试用例/ 约简/ 策略/ ./ 利用/ 这/ 三种/ 策略/ ,/ 开发者/ 只/ 需要/ 选择/ 一个/ 有/ 代表性/ 的/ 测试/ 输入/ 子集/ 来/ 进行/ 结果/ 检查/ 与/ 错误/ 定位/ [/ 14/ ]/ ./ 为了/ 弥补/ 自动化/ 错误/ 定位/ 方法/ 灵活性/ 不足/ 的/ 缺点/ ,/ Hao/ 还/ 提出/ 了/ 一个/ 基于/ 测试/ 信息/ 的/ 交互式/ 错误/ 定位/ 方法/ ./ 该/ 方法/ 认为/ 先前/ 交互式/ 步骤/ 产生/ 的/ 信息/ 可以/ 为/ 当前/ 的/ 交互式/ 步骤/ 提供/ 可疑/ 语句/ 的/ 排序/ [/ 15/ ]/ ./ 另一方面/ ,/ 人们/ 还/ 考虑/ 了/ 与/ 可疑/ 度/ 有关/ 的/ 因素/ 在/ 计算/ 语句/ 可疑/ 度时/ 的/ 权重/ ./ Wong/ 等/ 人/ 提出/ ,/ 随着/ 更/ 多/ 测试用例/ 的/ 运行/ ,/ 成功/ 测试用例/ 的/ 权重/ 应/ 分阶段/ 逐渐/ 减小/ [/ 16/ ]/ ./ 他们/ 使用/ 函数/ f/ (/ k/ )/ 来/ 计算/ 如何/ 缩小/ 成功/ 测试用例/ 权重/ ./ 对/ f/ (/ k/ )/ 做/ 如下/ 定义/ :/ f/ (/ k/ )/ =/ 其中/ ,/ k/ 表示/ 语句/ 被/ 成功/ 覆盖/ 的/ 次数/ ,/ 0.1/ ,/ α/ 均/ 是/ 权重/ 缩小/ 因子/ ./ 语句/ 被/ 成功/ 覆盖/ 是/ 指/ 输入/ 成功/ 测试用例/ 时该/ 语句/ 被/ 一次/ 或者/ 多次/ 执行/ ;/ 语句/ 被/ 失败/ 覆盖/ 是/ 指/ 输入/ 失败/ 测试用例/ 时该/ 语句/ 被/ 一次/ 或者/ 多次/ 执行/ ./ 从/ f/ (/ k/ )/ 的/ 定义/ 中/ 可以/ 看出/ ,/ 成功/ 测试用例/ 的/ 权重/ 是/ 按/ 区间/ 逐步/ 缩小/ 的/ ./ 计算/ 语句/ 的/ 可疑/ 度时/ ,/ 主要/ 是/ 根据/ 执行/ 该/ 语句/ 的/ 失败/ 测试用例/ 个数/ 的/ 增加/ 会/ 增大/ 语句/ 的/ 可疑/ 度/ ,/ 而/ 执行/ 该/ 语句/ 的/ 成功/ 测试用例/ 个数/ 的/ 增加/ 会/ 减小/ 该/ 语句/ 的/ 可疑/ 度/ ./ 因此/ ,/ 语句/ 的/ 可疑/ 度为/ 执行/ 该/ 语句/ 的/ 失败/ 测试用例/ 的/ 权重/ 之/ 和/ 减去/ 执行/ 该/ 语句/ 的/ 成功/ 测试用例/ 的/ 权重/ 之/ 和/ ./ 此后/ ,/ 他们/ 还/ 提出/ 失败/ 测试用例/ 的/ 权重/ 也/ 应分/ 区间/ 逐步/ 减小/ [/ 17/ ]/ ./ 语句/ 的/ 可疑/ 度为/ 执行/ 该/ 语句/ 的/ 失败/ 测试用例/ 权重/ 之/ 和/ 减去/ 执行/ 该/ 语句/ 的/ 成功/ 测试用例/ 权重/ 之/ 和/ ./ 实验/ 结果表明/ ,/ Wong/ 的/ 上述/ 两种/ 方法/ 均/ 可/ 在/ 一定/ 程度/ 上/ 提高/ 错误/ 定位/ 效率/ [/ 16/ -/ 17/ ]/ ./ Wong/ 等/ 人/ 考虑/ 了/ 测试用例/ 权重/ 对/ 错误/ 定位/ 效率/ 的/ 影响/ ,/ 然而/ 他们/ 的/ 方法/ 也/ 面临/ 一些/ 问题/ :/ 首先/ ,/ 权重/ 的/ 区间/ 不/ 容易/ 选择/ ;/ 其次/ ,/ 权重/ 在/ 各/ 区间/ 上/ 的/ 缩/ Page3/ 小/ 因子/ 不能/ 自动/ 调节/ ./ 3/ 增大/ 边际/ 权重/ 算法/ 为了/ 解决/ Wong/ 等/ 人/ 提出/ 的/ 方法/ 所/ 面临/ 的/ 问题/ ,/ 我们/ 提出/ 了/ 一种/ 改进/ 的/ 基于/ 频谱/ 的/ 错误/ 定位/ 方法/ ./ 该/ 方法/ 通过/ 放大/ 失败/ 测试用例/ 的/ 边际/ 权重/ 来/ 计算/ 语句/ 的/ 可疑/ 度/ ./ 即/ 针对/ 某一/ 特定/ 语句/ ,/ 令/ 失败/ 测试用例/ 的/ 权重/ 随着/ 其/ 对/ 该/ 语句/ 覆盖/ 次数/ 的/ 增加/ 而/ 增大/ ./ 3.1/ 算法/ 设计/ 在/ 利用/ 频谱/ 信息/ 计算/ 语句/ 的/ 可疑/ 度时/ ,/ 执行/ 某/ 语句/ 的/ 失败/ 测试用例/ 和/ 成功/ 测试用例/ 担当/ 了/ 不同/ 的/ 作用/ :/ 失败/ 测试用例/ 增加/ 该/ 语句/ 的/ 可疑/ 度/ ,/ 而/ 成功/ 测试用例/ 减少/ 相应/ 的/ 可疑/ 度/ ./ Wong/ 等/ 人/ 的/ 方法/ 则/ 启发/ 我们/ ,/ 当/ 测试用例/ 个数/ 变化/ 时/ ,/ 考虑/ 相应/ 的/ 频谱/ 权重/ 能/ 改变/ 可疑/ 度/ 计算/ 的/ 精度/ ,/ 从而/ 提高/ 错误/ 定位/ 效率/ ./ 不妨/ 从/ 以下/ 几个/ 方面/ 来/ 考察/ 测试用例/ 个数/ 变化/ 时/ 权重/ 对/ 错误/ 定位/ 效率/ 的/ 影响/ ./ 当/ 失败/ 测试用例/ 个数/ 相对/ 于/ 正确/ 测试用例/ 个数/ 比较/ 稀缺/ 时/ ,/ 语句/ 被/ 失败/ 测试用例/ 覆盖/ 的/ 概率/ 要/ 比/ 被/ 成功/ 测试用例/ 覆盖/ 的/ 概率/ 低/ ,/ 所以/ 语句/ 增加/ 一个/ 失败/ 测试用例/ 覆盖/ 比/ 语句/ 增加/ 一个/ 成功/ 测试用例/ 覆盖/ 对/ 可疑/ 度/ 的/ 影响/ 更大/ ./ 为了/ 抵消/ 这种/ 语句/ 正确/ 覆盖/ 与/ 错误/ 覆盖/ 概率/ 不/ 一致/ 时/ 使用/ 相同/ 权重/ 对/ 可疑/ 度/ 的/ 不良影响/ ,/ 只有/ 让/ 覆盖/ 该/ 语句/ 的/ 失败/ 测试用例/ 的/ 权/ 重大/ 于/ 成功/ 测试用例/ 的/ 权重/ ./ 并且/ 随着/ 覆盖/ 该/ 语句/ 的/ 失败/ 测试用例/ 个数/ 的/ 增加/ ,/ 在/ 剩余/ 的/ 测试用例/ 中/ 失败/ 测试用例/ 的/ 个数/ 就/ 会/ 减少/ ,/ 则/ 其/ 再/ 一次/ 被/ 失败/ 测试用例/ 覆盖/ 的/ 概率/ 就/ 更/ 低/ ./ 因此/ ,/ 下/ 一个/ 失败/ 测试用例/ 对/ 可疑/ 度/ 的/ 权重/ 会/ 更/ 大/ ./ 同理/ ,/ 当/ 失败/ 测试用例/ 个数/ 比/ 成功/ 测试用例/ 个数/ 大得多/ 时/ ,/ 则/ 失败/ 测试用例/ 的/ 权重/ 比/ 成功/ 测试用例/ 的/ 权重/ 小/ ,/ 且/ 成功/ 测试用例/ 的/ 权重/ 逐步/ 增大/ ./ 通过/ 以上/ 的/ 分析/ 可知/ ,/ 测试用例/ 的/ 权重/ 应该/ 逐步/ 地/ 增大/ ./ Wong/ 的/ 计算/ 测试用例/ 的/ 权重/ 恰好/ 与/ 我们/ 的/ 分析/ 过程/ 相反/ ./ 应该/ 把/ Wong/ 算法/ 中/ 第/ k/ 个/ 测试用例/ 的/ 权重/ 与/ 倒数第/ k/ 个/ 测试用例/ 的/ 权重/ 相/ 调换/ ./ 由于/ 这种/ 调换/ 对/ 测试用例/ 的/ 总/ 权重/ 不/ 产生/ 影响/ ,/ 因此/ ,/ 调换/ 后/ 语句/ 的/ 可疑/ 度/ 并/ 不会/ 变化/ ./ 此外/ ,/ 边际/ 增大/ 测试用例/ 权重/ 可以/ 避免/ 区间/ 选择/ 不当/ 的/ 问题/ ./ 相对/ 于/ Wong/ 的/ 权重/ 缩小/ 因子/ ,/ 采用/ 增大/ 测试用例/ 边际/ 权重/ 的/ 方法/ 有/ 一个/ 权重/ 增大/ 因子/ ./ 在/ 权重/ 增大/ 因子/ 的/ 选择/ 上/ ,/ 为了/ 能够/ 让/ 权重/ 增大/ 因子/ 适应/ 不同/ 的/ 测试/ 集/ ,/ 我们/ 让/ 权重/ 增大/ 因子/ 随着/ 测试/ 集中/ 成功/ 测试用例/ 与/ 失败/ 测试用例/ 之间/ 比例/ 的/ 变化/ 而/ 变化/ ./ 采用/ 增大/ 失败/ 测试用例/ 权重/ 而/ 非/ 成功/ 测试用例/ 权重/ 是因为/ 采用/ 增大/ 失败/ 测试用例/ 权重/ 更能/ 体现/ 出/ 每/ 增加/ 一个/ 失败/ 测试用例/ 时/ 语句/ 可疑/ 度/ 的/ 变化/ ./ 在/ 用/ 语句/ 的/ 覆盖/ 信息/ 表/ 进行/ 可疑/ 度/ 计算/ 时/ ,/ 首先/ 求出/ 每条/ 语句/ 在/ n/ 个/ 测试用例/ 中/ 的/ 成功/ 覆盖/ 次数/ 以及/ 失败/ 覆盖/ 次数/ ./ 第/ j/ 条/ 语句/ 在/ n/ 个/ 测试用例/ 中/ 的/ 失败/ 覆盖/ 次数/ 为/ 第/ j/ 条/ 语句/ 在/ n/ 个/ 测试用例/ 中/ 的/ 成功/ 覆盖/ 次数/ 为/ 在/ 上述/ 两式/ 中/ ,/ i/ 表示/ 第/ i/ 个/ 测试用例/ ,/ j/ 表示/ 第/ j/ 条/ 语句/ ./ 当/ 第/ i/ 个/ 测试用例/ 覆盖/ 了/ 第/ j/ 条/ 语句/ 时/ ,/ Ci/ ,/ j/ 取/ 1/ ,/ 否则/ 取/ 0/ ;/ 当/ 第/ i/ 个/ 测试用例/ 成功/ 覆盖/ 时/ r/ (/ i/ )/ 取/ 0/ ,/ 失败/ 覆盖/ 时取/ 1/ ;/ n/ 表示/ 测试用例/ 个数/ ./ 接着/ 就要/ 计算/ 失败/ 测试用例/ 的/ 权重/ ./ 首先/ 计算/ 失败/ 测试用例/ 的/ 权重/ 因子/ ./ 第/ j/ 条/ 语句/ 的/ 失败/ 测试用例/ 的/ 权重/ 增大/ 因子/ v/ 计算公式/ 为/ v/ =/ 当/ 语句/ 的/ 错误/ 覆盖/ 次数/ 由/ k/ 增大/ 到/ k/ +/ 1/ 时/ ,/ 其/ 第/ k/ +/ 1/ 个/ 失败/ 测试用例/ 的/ 权重/ mw/ (/ k/ +/ 1/ )/ 的/ 计算公式/ 为/ 其中/ ,/ mw/ (/ 0/ )/ =/ 0/ ./ 例/ 总/ 权重/ 的/ 计算公式/ :/ 接着/ 就/ 可以/ 得到/ 覆盖/ 第/ j/ 条/ 语句/ 的/ 失败/ 测试/ 用/ 对于/ 每条/ 语句/ ,/ 该/ 语句/ 被/ 错误/ 覆盖/ 的/ 次数/ 越/ 多/ ,/ 则/ 该/ 语句/ 的/ 可疑/ 度越/ 大/ ./ 与此相反/ ,/ 对于/ 每条/ 语句/ ,/ 该/ 语句/ 被/ 正确/ 覆盖/ 的/ 次数/ 越/ 多/ ,/ 则/ 该/ 语句/ 的/ 可疑/ 度越/ 小/ ./ 因此/ ,/ 语句/ 的/ 可疑/ 度/ 应该/ 与/ 被/ 错误/ 覆盖/ 次数/ 正/ 相关/ ,/ 与/ 被/ 正确/ 覆盖/ 次数/ 反/ 相关/ ./ 据此/ ,/ 在/ 对/ 失败/ 测试用例/ 权重/ 进行/ 扩大/ 后/ ,/ 我们/ 提出/ 了/ 一种/ 计算/ 语句/ 可疑/ 度/ 的/ 公式/ :/ 此外/ ,/ 语句/ 的/ 可疑/ 度/ 也/ 可能/ 与/ 被/ 错误/ 覆盖/ 次数/ 成正比/ ,/ 与/ 被/ 正确/ 覆盖/ 次数/ 成反比/ ./ 据此/ ,/ 在/ 对/ 失败/ Page4/ 测试用例/ 权重/ 进行/ 扩大/ 后/ ,/ 我们/ 提出/ 了/ 另/ 一种/ 计算/ 语句/ 可疑/ 度/ 的/ 公式/ :/ RA/ -/ 2/ :/ (/ ff/ (/ sf/ (/ j/ )/ )/ +/ 0.001/ )/ // (/ ff/ (/ sf/ (/ j/ )/ )/ +/ ss/ (/ j/ )/ )/ ./ 在/ 这/ 两个/ 计算公式/ 中/ ,/ RA/ -/ 1/ 可以/ 看作/ 是/ Wong/ 算法/ 的/ 改进/ ./ 这/ 两个/ 公式/ 都/ 是/ 保证/ 可疑/ 度/ 与/ 语句/ 的/ 错误/ 覆盖/ 次数/ 正/ 相关/ ,/ 与/ 语句/ 的/ 正确/ 覆盖/ 次数/ 负相关/ ./ RA/ -/ 2/ 之所以/ 引入/ 0.001/ 是/ 为了/ 避免/ ff/ (/ sf/ (/ j/ )/ )/ 为/ 零时/ suspect/ (/ j/ )/ 都/ 为/ 零/ ./ 3.2/ 算法/ 应用/ 举例/ 本/ 小节/ 通过/ 一个/ 实例/ 来/ 详细/ 介绍/ 如何/ 使用/ 增大/ 边际/ 权重/ 算法/ 来/ 计算/ 可疑/ 度/ ./ 语句/ 的/ 覆盖/ 信息/ 收集/ 完后/ 将/ 得到/ 一个/ 程序/ 覆盖/ 信息/ 表/ (/ 如表/ 1/ 所示/ )/ [/ 18/ ]/ ./ 该表/ 的/ 一行/ 代表/ 一个/ 测试用例/ 的/ 代码/ 覆盖/ 情况/ ;/ 除/ 最后/ 一列/ 外/ ,/ 每列/ 代表/ 一条/ 语句/ 在/ 各个/ 测试用例/ 中/ 被/ 覆盖/ 的/ 情况/ ./ 如/ 第/ i/ 行/ j/ 列/ 表示/ 第/ j/ 条/ 语句/ 在/ 第/ i/ 个/ 测试用例/ 中/ 的/ 覆盖/ 情况/ ./ 每次/ 测试/ 时/ 某条/ 语句/ 若/ 覆盖/ 到/ 则/ 用/ 1/ 表示/ ,/ 未/ 覆盖/ 到/ 则/ 用/ 0/ 表示/ ./ 最后/ 一列/ 表示/ 各个/ 测试用例/ 成功/ 还是/ 失败/ ,/ 成功/ 用/ 0/ 表示/ ,/ 失败/ 用/ 1/ 表示/ ./ 实际/ 进行/ 语句/ 可疑/ 度/ 的/ 计算/ 时/ ,/ 覆盖/ 信息/ 表/ 可用/ 一个二维/ 数组/ a/ [/ ROW/ ]/ [/ Collum/ ]/ 来/ 保存/ ./ 当/ j/ </ Collum/ -/ 1/ 时/ ,/ a/ [/ i/ ]/ [/ j/ ]/ 表示/ ti/ 与/ sj/ 对应/ 的/ 数值/ ,/ 也/ 就是/ 运行/ 第/ i/ 个/ 测试用例/ 时/ 第/ j/ 个/ 语句/ 的/ 覆盖/ 情况/ ./ 如/ a/ [/ 3/ ]/ [/ 4/ ]/ =/ 0/ 表示/ 第/ 4/ 条/ 语句/ 在/ 运行/ 第/ 3/ 个/ 测试用例/ 时/ 没有/ 覆盖/ 到/ ./ 当/ j/ =/ Collum/ -/ 1/ 时/ ,/ a/ [/ i/ ]/ [/ Collum/ -/ 1/ ]/ 表示/ 第/ i/ 个/ 测试用例/ 成功/ 与否/ ./ a/ [/ i/ ]/ [/ Collum/ -/ 1/ ]/ =/ 0/ 表示/ 程序执行/ 该/ 测试用例/ 产生/ 的/ 结果/ 正确/ ;/ a/ [/ i/ ]/ [/ Collum/ -/ 1/ ]/ =/ 1/ 表示/ 程序执行/ 该/ 测试用例/ 产生/ 的/ 结果/ 错误/ ./ 在/ 这个/ 覆盖/ 信息/ 表/ s1s2s3s4s5s6s7s8s9s10rt111000110110t211110011100t301000100110t410001011111t501100001100t611011010110t710100011100t801011010110t910101011111t1001010001100t1111110011100t1210101101111t1311110010100t1400111110110t1511000011011t1600011011000t1701100010010t1811101000010t1910011101101t2011100100010/ 中/ ,/ 有/ 5/ 个/ 失败/ 测试用例/ ,/ 15/ 个/ 成功/ 测试用例/ ./ 语句/ 的/ 成功/ 覆盖/ 次数/ 与/ 失败/ 覆盖/ 次数/ 之/ 和/ sf/ (/ j/ )/ +/ ss/ (/ j/ )/ </ =/ 20/ ./ 这/ 是因为/ 当/ 运行/ 某个/ 测试用例/ 时/ ,/ 若/ 语句/ j/ 没有/ 被/ 覆盖/ 到/ ,/ 则/ 无论/ 该/ 测试用例/ 失败/ 覆盖/ 程序/ 还是/ 成功/ 覆盖/ 程序/ ,/ sf/ (/ j/ )/ ,/ ss/ (/ j/ )/ 都/ 不会/ 增加/ ./ 所以/ sf/ (/ j/ )/ +/ ss/ (/ j/ )/ 表示/ 的/ 只是/ 各条/ 语句/ 被/ 覆盖/ 的/ 次数/ 而/ 非/ 程序/ 被/ 覆盖/ 的/ 次数/ ./ 使用/ RA/ -/ 1/ 所/ 给/ 的/ 公式/ 计算/ 表/ 1/ 中/ 各条/ 语句/ 的/ 可疑/ 度/ ,/ 各/ 语句/ 依/ 可疑/ 度/ 由/ 高/ 至/ 低/ 的/ 排列/ 顺序/ 为/ s8/ 、/ s1/ 、/ s5/ 、/ s10/ 、/ s9/ 、/ s7/ 、/ s6/ 、/ s3/ 、/ s4/ 、/ s2/ ./ 具体/ 结果/ 如表/ 2/ 所示/ ./ 表/ 2/ 用/ 放大/ 后/ 的/ 语句/ 失败/ 覆盖/ 次数/ 减去/ 语句/ s1s2s3s4s5s6s7s8s9s10/ 使用/ RA/ -/ 2/ 所/ 给/ 的/ 公式/ 计算/ 表/ 1/ 中/ 各条/ 语句/ 的/ 可疑/ 度/ ,/ 各/ 语句/ 依/ 可疑/ 度/ 由/ 高/ 至/ 低/ 的/ 排列/ 顺序/ 为/ s8/ 、/ s5/ 、/ s1/ 、/ s10/ 、/ s9/ 、/ s6/ 、/ s7/ 、/ s3/ 、/ s4/ 、/ s2/ ./ 具体/ 结果/ 如表/ 3/ 所示/ ./ 表/ 3/ 用/ 放大/ 后/ 的/ 语句/ 失败/ 覆盖/ 次数/ 除以/ 语句/ 成功/ 覆盖/ 次数/ 与/ 失败/ 覆盖/ 次数/ 之/ 和/ 的/ 方法/ 所/ 得到/ 的/ 可疑/ 度/ s1s2s3s4s5s6s7s8s9s10/ 通过/ 对/ 这/ 两种/ 方法/ 的/ 结果/ 进行/ 分析/ 可以/ 看出/ ./ 通过/ 放大/ sf/ (/ j/ )/ 的/ 方法/ 来/ 计算/ 可疑/ 度时/ ,/ sf/ (/ j/ )/ 对/ suspect/ (/ j/ )/ 的/ 影响/ 要/ 大于/ ss/ (/ j/ )/ ,/ 并且/ sf/ (/ j/ )/ 的/ 影响/ 程度/ 由/ 所有/ 测试用例/ 成功/ 覆盖/ 次数/ 与/ 失败/ 覆盖/ 次数/ 之商/ v/ 以及/ 语句/ j/ 的/ 失败/ 覆盖/ 次数/ sf/ (/ j/ )/ 来/ 决定/ ./ 4/ 实验/ 为了/ 检验/ 上述/ 算法/ 的/ 效果/ ,/ 本文/ 选用/ 西门子/ 程/ Page5/ 序集/ 作为/ 实验/ 对象/ 对/ 算法/ 的/ 效果/ 进行/ 验证/ ①/ ./ 由于/ 之前/ 的/ 很多/ 基于/ 频谱/ 的/ 错误/ 定位/ 方法/ 使用/ 了/ 西门子/ 程序/ 集/ ./ 本/ 实验/ 使用/ 西门子/ 程序/ 集是/ 为了/ 更好/ 地/ 与/ 之前/ 的/ 错误/ 定位/ 方法/ 进行/ 比较/ ./ 程序/ 的/ 特殊性/ 会/ 对/ 实验/ 结果/ 产生/ 影响/ ,/ 比如/ ,/ 当/ 程序/ 的/ 分支/ 很少/ 时/ ,/ 使用/ 基于/ 频谱/ 的/ 错误/ 定位/ 方法/ 进行/ 错误/ 定位/ 会/ 造成/ 很多/ 语句/ 的/ 覆盖/ 情况/ 一样/ ,/ 这/ 将/ 导致/ 很多/ 语句/ 的/ 可疑/ 度/ 一样/ ./ 此时/ ,/ 基于/ 频谱/ 的/ 错误/ 定位/ 方法/ 效果/ 将会/ 不/ 明显/ ./ 西门子/ 程序/ 集共/ 含有/ 7/ 个/ 程序/ ,/ 每个/ 程序/ 均/ 存在/ 一个/ 正确/ 版本/ 以及/ 若干个/ 不同/ 的/ 错误/ 版本/ ,/ 各个/ 程序/ 的/ 基本/ 信息/ 如表/ 4/ 所示/ ./ 程序/ print/ _/ tokens/ 词法/ 分析程序/ 7565204print/ _/ tokens2/ 词法/ 分析程序/ 10510202replace/ 模式/ 代换/ 32563274schedule/ 优先级/ 调度/ 9412166schedule2/ 优先级/ 调度/ 10307146tcas/ 高度/ 区分/ 4117374tot/ _/ info/ 信息/ 估量/ 23406139/ 首先/ 使用/ gcc3/ ./ 3.1/ 对/ 正确/ 版本/ 以及/ 各个/ 错误/ 版本/ 的/ 程序/ 进行/ 编译/ ,/ 之后/ 使用/ gcov/ 收集/ 代码/ 的/ 覆盖/ 信息/ ,/ 最后/ 利用/ 不同/ 的/ 错误/ 定位/ 算法/ 对/ 收集/ 到/ 的/ 覆盖/ 信息/ 进行/ 处理/ ,/ 从而/ 得到/ 错误/ 定位/ 结果/ ./ 在/ 实验/ 中/ ,/ 我们/ 将/ 本文/ 提出/ 的/ 算法/ 与/ Wong/ 等/ 人/ 提出/ 的/ 方法/ 以及/ Jones/ 等/ 人/ 提出/ 的/ Tarantula/ 方法/ 进行/ 比较/ ./ 4.1/ 实验设计/ 本/ 实验/ 对/ 西门子/ 程序/ 集中/ 的/ 7/ 个/ 程序/ 的/ 各个/ 错误/ 版本/ 都/ 进行/ 了/ 实验/ ./ 当/ 测试用例/ 运行/ 时/ ,/ gcov/ 记录/ 测试用例/ 运行/ 时/ 的/ 语句/ 覆盖/ 情况/ ./ 程序/ 中/ 永远/ 不会/ 执行/ 的/ 语句/ 属于/ 非/ 执行/ 语句/ ./ 当/ 测试用例/ 运行/ 结束/ 之后/ ,/ gcov/ 将会/ 生成/ 记录/ 覆盖/ 信息/ 的/ 文件/ ./ 把/ 输入/ 测试用例/ 后/ 各个/ 错误/ 版本/ 的/ 输出/ 结果/ 与/ 正确/ 版本/ 的/ 输出/ 结果/ 进行/ 比较/ 以/ 确定/ 错误/ 版本/ 每个/ 测试用例/ 是/ 成功/ 还是/ 失败/ ./ 若/ 输出/ 结果/ 一样/ 则/ 认为/ 输入/ 的/ 测试用例/ 是/ 成功/ 测试用例/ ,/ 否则/ 认为/ 是/ 失败/ 测试用例/ ./ 然后/ 对/ 可疑/ 代码/ 的/ 覆盖/ 信息/ 生成/ 一个/ 矩阵/ ,/ 接着/ 把/ 测试/ 结果/ 附于/ 矩阵/ 的/ 最后/ 一列/ 就/ 得到/ 一个/ 覆盖/ 信息/ 表/ ,/ 最后/ 对/ 得到/ 的/ 覆盖/ 信息/ 表/ 进行/ 计算/ 以/ 得到/ 各条/ 语句/ 的/ 可疑/ 度/ ./ 当对/ 各条/ 语句/ 的/ 可疑/ 度/ 进行/ 排序/ 时/ ,/ 如果/ 几条/ 语句/ 的/ 可疑/ 度/ 一样/ ,/ 则/ 他们/ 的/ 排序/ 顺序/ 将/ 根据/ 它们/ 在/ 代码/ 中/ 的/ 行号/ 来/ 决定/ :/ 行号/ 小/ 的/ 则/ 其/ 可疑/ 度排/ 在/ 前面/ ;/ 行号/ 大/ 的/ 则/ 其/ 可疑/ 度排/ 在/ 后面/ ./ 因为/ 不同/ 可疑/ 语句/ 的/ 行号/ 在/ 与其/ 可疑/ 度/ 相同/ 的/ 语句/ 的/ 行号/ 排序/ 中/ 可能/ 排/ 在/ 任何/ 的/ 位置/ ,/ 即/ 不同/ 可疑/ 语句/ 的/ 位置/ 是/ 随机/ 的/ ./ 有/ 的/ 可疑/ 语句/ 可能/ 排/ 在/ 前面/ ,/ 有/ 的/ 可疑/ 语句/ 可能/ 排/ 在/ 后面/ ,/ 有/ 的/ 可疑/ 语句/ 可能/ 排/ 在/ 中间/ ./ 所以/ 在/ 可疑/ 语句/ 比较/ 多时/ ,/ 即使/ 根据/ 行号/ 来/ 排序/ 也/ 还是/ 会/ 得到/ 很/ 好/ 的/ 随机/ 效果/ ./ 本/ 实验/ 并/ 不/ 比较/ 各种/ 算法/ 的/ 最好/ 情况/ 与/ 最坏/ 情况/ ./ 使用/ 最好/ 最坏/ 情况/ 的/ 好处/ 是/ 可以/ 根据/ 最好/ 最坏/ 情况/ 的/ 差别/ 大小/ ,/ 来/ 了解/ 算法/ 的/ 区分度/ ./ 若/ 最好/ 最坏/ 情况/ 的/ 差别/ 较大/ ,/ 则/ 说明/ 错误/ 语句/ 与/ 很多/ 正确/ 语句/ 的/ 可疑/ 度/ 一样/ ,/ 若/ 最好/ 最坏/ 情况/ 的/ 差别/ 较小则/ 说明/ 较少/ 的/ 正确/ 语句/ 与/ 错误/ 语句/ 的/ 可疑/ 度/ 一样/ ./ 然而/ 使用/ 最好/ 与/ 最坏/ 情况/ 进行/ 比较/ 只/ 在/ 理论/ 上/ 可行/ ,/ 在/ 实际/ 中是/ 不/ 可行/ 的/ ./ 因为/ 在/ 未知/ 哪条/ 语句/ 存在/ 错误/ 的/ 情况/ 下/ ,/ 确定/ 存在/ 错误/ 的/ 语句/ 在/ 可疑/ 度/ 一样/ 的/ 几条/ 语句/ 中排/ 在/ 最前/ 还是/ 最后/ 是/ 不/ 可能/ 的/ ./ 由于/ 代码/ 的/ 错误/ 是/ 未知/ 的/ ,/ 当/ 使用/ 本/ 实验/ 的/ 排序/ 方法/ 时/ ,/ 可疑/ 度/ 一样/ 的/ 错误/ 语句/ 与/ 正确/ 语句/ 的/ 排序/ 先后/ 应是/ 随机/ 的/ ./ 即/ 错误/ 语句/ 可能/ 位于/ 最/ 前/ ,/ 也/ 可能/ 位于/ 最后/ ,/ 还/ 可能/ 位于/ 其他/ 的/ 位置/ ./ 使用/ 本/ 实验/ 的/ 排序/ 方法/ 是/ 为了/ 使得/ 结果/ 更好/ 地/ 接近/ 平均/ 情况/ ./ 在/ 对/ 语句/ 的/ 可疑/ 度/ 进行/ 排序/ 后/ ,/ 就/ 得出/ 每个/ 算法/ 在/ 进行/ 错误/ 定位/ 时/ 所/ 需/ 查找/ 的/ 执行/ 语句/ 个数/ a/ (/ a/ 表示/ 有/ a/ -/ 1/ 条/ 正确/ 语句/ 的/ 可疑/ 度排/ 在/ 错误/ 语句/ 的/ 可疑/ 度/ 前面/ )/ ./ 假设/ 该/ 版本/ 的/ 总/ 执行/ 语句/ 数为/ b/ ,/ 则/ 通过/ 计算/ (/ a/ // b/ )/ ×/ 100/ %/ 得出/ 进行/ 错误/ 定位/ 时/ 所/ 需/ 查找/ 的/ 执行/ 语句/ 数占/ 总/ 执行/ 语句/ 数/ 的/ 百分比/ ,/ 即/ 排查/ 效率/ ./ 把/ 0/ ~/ 100/ %/ 进行/ 离散/ 化/ 得到/ 20/ 段/ 区间/ ./ 每个/ 区间/ 的/ 百分数/ 表示/ 排查/ 效率/ (/ a/ // b/ )/ ×/ 100/ %/ 在/ 该/ 区间/ 上/ 的/ 个数/ 占/ 总/ 个数/ 的/ 百分比/ ./ 很/ 明显/ ,/ 对于/ 各个/ 程序/ 的/ 各个/ 版本/ 来说/ ,/ (/ a/ // b/ )/ ×/ 100/ %/ 越小/ ,/ 则/ 所/ 使用/ 的/ 算法/ 在/ 进行/ 错误/ 定位/ 时/ 效率/ 就/ 越/ 高/ ./ 4.2/ 实验/ 结果/ 本/ 实验/ 使用/ 西门子/ 程序/ 集/ 提供/ 的/ 测试用例/ 来/ 进行/ 测试/ ./ 为了/ 更好/ 地/ 比较/ 各个/ 算法/ 的/ 效率/ ,/ 在/ 测试用例/ 的/ 选择/ 上/ ,/ 我们/ 从/ testplans/ -/ bigcov/ ,/ testplans/ -/ bigrand/ 提供/ 的/ 一系列/ 测试用例/ 集里/ 各/ 选取/ 一个/ 测试用例/ 集/ 作为/ 输入/ ./ 此外/ ,/ 我们/ 还/ 选择/ 了/ 西门子/ 提供/ 的/ 所有/ 测试用例/ 集/ universe/ 作为/ 输入/ ./ testplans/ -/ bigcov/ 里/ 的/ 测试/ 集/ 是从/ 测试/ 总/ 集中/ 选出/ 来/ 的/ 一个/ 子/ ①/ TheSiemensSuite/ ./ January2007/ ./ http/ :/ // // www/ -/ static/ ./ Page6/ 集/ ,/ 这个/ 子集/ 能够/ 覆盖/ 所有/ 的/ 分支/ 路径/ ,/ 但/ 覆盖/ 每个/ 分支/ 路径/ 上/ 的/ 测试用例/ 个数/ 是/ 随机/ 的/ ./ testplans/ -/ bigrand/ 是/ 一个/ 测试用例/ 个数/ 与/ testplans/ -/ bigcov/ 相等/ 但/ 测试用例/ 属于/ 随机/ 选取/ 的/ 测试用例/ 集/ ./ 对/ 语句/ 可疑/ 度/ 进行/ 排序/ 时/ ,/ 给/ 不/ 被/ 覆盖/ 的/ 语句/ 的/ 可疑/ 度/ 赋予/ 一个/ 极小/ 的/ 值/ ,/ 以使/ 被/ 覆盖/ 语句/ 的/ 可疑/ 度/ 大于/ 不/ 被/ 覆盖/ 的/ 语句/ 可疑/ 度/ ./ 各个/ 算法/ 的/ 实验/ 结果/ 如图/ 1/ ~/ 图/ 3/ 所示/ ./ 其中/ ,/ 我们/ 将/ Wong/ 等/ 人/ 在/ 文献/ [/ 16/ ]/ 中/ 所/ 提出/ 的/ 缩小/ 语句/ 成功/ 测试用例/ 权重/ 的/ 算法/ 记为/ Wong/ -/ 3/ ,/ 将/ Wong/ 等/ 人/ 在/ 文献/ [/ 17/ ]/ 中/ 提出/ 的/ 既/ 缩小/ 成功/ 测试用例/ 的/ 权重/ 也/ 缩小/ 失败/ 测试用例/ 的/ 权重/ 的/ 算法/ 记为/ Wong/ -/ 4/ ,/ 而/ RA/ -/ 1/ 、/ RA/ -/ 2/ 则/ 分别/ 表示/ 本文/ 所/ 提出/ 的/ 两种/ 可疑/ 度/ 计算公式/ ./ 图/ 15/ 个/ 算法/ 在/ testplans/ -/ bigrand/ 测试用例/ 集中/ 的/ 效率/ 比较/ 图图/ 25/ 个/ 算法/ 在/ testplans/ -/ bigcov/ 测试用例/ 集中/ 的/ 效率/ 比较/ 图图/ 35/ 个/ 算法/ 在/ universe/ 测试用例/ 集中/ 的/ 效率/ 比较/ 图/ 根据/ 图/ 1/ 所示/ 结果/ ,/ RA/ -/ 1/ 计算公式/ 得到/ 的/ 效率/ 最高/ ,/ Wong/ -/ 3/ 次之/ ,/ 之后/ 是/ RA/ -/ 2/ ,/ Tarantula/ ,/ Wong/ -/ 4/ ./ 根据/ 图/ 2/ 所示/ 结果/ ,/ 使用/ RA/ -/ 1/ 计算公式/ 得到/ 的/ 效率/ 最高/ ,/ Wong/ -/ 3/ 次之/ ,/ RA/ -/ 2/ ,/ Tarantula/ 以及/ Wong/ -/ 4/ 的/ 两个/ 算法/ 相对/ 较差/ ./ 从图/ 1/ 、/ 图/ 2/ 中/ 我们/ 可以/ 发现/ 一个/ 异常/ 的/ 情况/ ,/ 根据/ 图/ 3/ 所示/ 结果/ ,/ Wong/ -/ 3/ 效果/ 最好/ ,/ RA/ -/ 2/ 次之/ ,/ 之后/ 依次/ 是/ Tarantula/ ,/ RA/ -/ 1/ ,/ Wong/ -/ 4/ ./ 西门子/ 实验/ 的/ 结果表明/ ,/ 与/ 缩小/ 覆盖/ 语句/ 的/ 失败/ 测试用例/ 权重/ 或者/ 同时/ 缩小/ 覆盖/ 语句/ 成功/ 测试用例/ 和/ 失败/ 测试用例/ 权重/ 的/ 方法/ 相比/ ,/ 通过/ 放大/ 覆盖/ 语句/ 的/ 失败/ 测试用例/ 权重/ 的/ 方法/ 对/ 错误/ 定位/ 效果/ 有/ 一定/ 的/ 促进作用/ ./ 当用/ 例数/ 增加/ ,/ 并且/ 有/ 较/ 多/ 冗余/ 时/ ,/ 我们/ 的/ 方法/ 效率/ 没有/ 提高/ ./ 4.3/ 实验/ 讨论/ 本文/ 算法/ 的/ 有效性/ 是/ 通过/ 西门子/ 实验/ 来/ 验证/ 的/ ./ 由于/ 西门子/ 程序/ 集/ 的/ 各个/ 程序/ 只有/ 几百/ 行/ 的/ 代码/ ,/ 因此/ 我们/ 的/ 技术/ 在/ 更/ 大/ 的/ 程序/ 里/ 进行/ 错误/ 定位/ 是否/ 也/ 会/ 得到/ 很/ 好/ 的/ 效果/ 还有/ 待/ 进一步/ 的/ 研究/ ./ 在/ 基于/ 频谱/ 的/ 错误/ 定位/ 中/ ,/ 采用/ 的/ 都/ 是/ 对/ 覆盖/ 信息/ 进行/ 处理/ 得出/ 语句/ 的/ 可疑/ 度/ ./ 如果/ 失败/ 测试用例/ 的/ 个数/ 太/ 少/ ,/ 很/ 容易/ 造成/ 很多/ 语句/ 具有/ 相同/ 的/ 失败/ 覆盖/ 次数/ 与/ 成功/ 覆盖/ 次数/ ./ 这/ 将/ 会/ 导致/ 错误/ 语句/ 与/ 很多/ 正确/ 语句/ 具有/ 相同/ 的/ 可疑/ 度/ ,/ 并/ 最终/ 降低/ 各/ 语句/ 可疑/ 度/ 的/ 区分度/ ./ 因为/ 本文/ 算法/ 的/ 核心思想/ 是/ 增大/ 失败/ 测试用例/ 的/ 权重/ ,/ 所以/ 失败/ 测试用例/ 对/ 实验/ 结果/ 的/ 影响/ 很大/ ./ 在/ 这种/ 情况/ 下/ ,/ 失败/ 测试用例/ 权重/ 因子/ 的/ 选择/ 就/ 显得/ 至关重要/ ./ 由于/ 成功/ 测试用例/ 对/ 可疑/ 度/ 也/ 是/ 有/ 影响/ 的/ ,/ 在/ 考虑/ 失败/ 测试用例/ 的/ 权重/ 因子/ 时/ ,/ 成功/ 测试用例/ 的/ 影响/ 也/ 要/ 进行/ 相应/ 的/ 考虑/ ./ 有鉴于此/ ,/ 我们/ 选择/ 的/ 权重/ 因子/ 是/ 成功/ 测试用例/ 个数/ 与/ 失败/ 测试用例/ 个数/ 的/ 比率/ ./ 这/ 说明/ 权重/ 因子/ 随着/ 成功/ 测试用例/ 与/ 失败/ 测试用例/ 比率/ 的/ 增大/ 而/ 增大/ ,/ 随着/ 成功/ 测试用例/ 与/ 失败/ 测试用例/ 比率/ 的/ 减小/ 而/ 减小/ ./ 这/ 与/ 我们/ 在/ 第三节/ 中/ 对/ 成功/ 测试用例/ 与/ 失败/ 测试用例/ 的/ 出现/ 概率/ 对/ 权重/ 影响/ 的/ 分析/ 是/ 相一致/ 的/ ./ 这样/ 还/ 可以/ 使得/ 权重/ 因子/ 随着/ 测试用例/ 集/ 的/ 变化/ 而/ 自动/ 变化/ ./ 在/ 使用/ 覆盖/ 信息/ 来/ 计算/ 语句/ 的/ 可疑/ 度时/ ,/ 我们/ 不仅/ 要/ 知道/ 测试用例/ 集中/ 成功/ 测试用例/ 与/ 失败/ 测试用例/ 的/ 个数/ ,/ 还要/ 知道/ 每条/ 语句/ 被/ 成功/ 覆盖/ 的/ 次数/ 与/ 被/ 失败/ 覆盖/ 的/ 次数/ ./ 并且/ 每条/ 语句/ 被/ 成功/ 覆盖/ 的/ 次数/ 与/ 被/ 失败/ 覆盖/ 的/ 次数/ 未必/ 与/ 测试用例/ 集中/ 成功/ 测试用例/ 与/ 失败/ 测试用例/ 的/ 个数/ 相等/ ./ 在/ 多/ 错误/ 版本/ 中/ ,/ 不同/ 的/ 失败/ 测试用例/ 可能/ 覆盖/ 不同/ 的/ 错误/ 语句/ ./ 这时/ 即使/ 失败/ 测试用例/ 的/ 个数/ 比较/ 多/ ,/ 覆盖/ 每条/ Page7/ 错误/ 语句/ 的/ 失败/ 测试用例/ 个数/ 也/ 可能/ 会/ 很少/ ./ 而/ 我们/ 的/ 权重/ 因子/ 是/ 根据/ 测试用例/ 集中/ 成功/ 测试用例/ 个数/ 与/ 失败/ 测试用例/ 个数/ 的/ 比率/ 得出/ 的/ ,/ 因此/ ,/ 在/ 多/ 错误/ 版本/ 里/ 我们/ 的/ 权重/ 因子/ 可能/ 会/ 失效/ ./ 5/ 结论/ 本文/ 对/ 基于/ 频谱/ 的/ 错误/ 定位/ 技术/ 进行/ 了/ 研究/ ,/ 将/ 失败/ 测试用例/ 的/ 边际/ 权重/ 引入/ 到/ 可疑/ 度/ 计算/ 的/ 过程/ 中/ ,/ 即/ 针对/ 某一/ 特定/ 语句/ ,/ 令/ 失败/ 测试用例/ 的/ 权重/ 随着/ 其/ 对/ 该/ 语句/ 覆盖/ 次数/ 的/ 增加/ 而/ 增大/ ./ 在/ 这/ 一/ 理论/ 的/ 基础/ 上/ ,/ 本文/ 提出/ 了/ 两种/ 新/ 的/ 错误/ 定位/ 计算公式/ RA/ -/ 1/ 和/ RA/ -/ 2/ ./ 实验/ 结果表明/ ,/ 与/ 缩小/ 覆盖/ 语句/ 的/ 失败/ 测试用例/ 权重/ 或者/ 同时/ 缩小/ 覆盖/ 语句/ 成功/ 测试用例/ 和/ 失败/ 测试用例/ 权重/ 的/ 方法/ 相比/ ,/ 通过/ 放大/ 覆盖/ 语句/ 的/ 失败/ 测试用例/ 权重/ 的/ 方法/ 对/ 错误/ 定位/ 效果/ 有/ 一定/ 的/ 促进作用/ ./ 在/ 未来/ 的/ 工作/ 中/ ,/ 我们/ 还/ 将/ 致力于/ 对/ 本文/ 提出/ 的/ 算法/ 进行/ 改进/ ./ 一方面/ ,/ 在/ 计算/ 边际/ 权重/ 时/ ,/ 有/ 必要/ 考虑/ 其它/ 的/ 权重/ 因子/ ,/ 并/ 对/ 其/ 效果/ 进行/ 进一步/ 的/ 研究/ 和/ 检验/ ./ 另一方面/ ,/ 通过/ 实验/ 我们/ 发现/ 测试用例/ 数量/ 的/ 增多/ 对/ 查找/ 可疑/ 语句/ 的/ 效率/ 可能/ 会/ 有/ 反作用/ ,/ 因此/ ,/ 我们/ 试图/ 通过/ 对/ 测试用例/ 进行/ 约简/ 来/ 提高/ 查找/ 可疑/ 语句/ 的/ 效率/ ./ 

