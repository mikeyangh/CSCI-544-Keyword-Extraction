Page1/ 基于/ 轨迹/ 挖掘/ 的/ 公交车/ 自/ 组织/ 网络/ 路由/ 机制/ 张/ 扶桑/ 1/ )/ ,/ 2/ )/ 金蓓弘/ 1/ )/ 汪兆洋/ 1/ )/ ,/ 2/ )/ 胡佳/ 锋/ 1/ )/ ,/ 2/ )/ 张利锋/ 3/ )/ 1/ )/ (/ 中国科学院/ 软件/ 研究所/ 计算机科学/ 国家/ 重点/ 实验室/ 北京/ 100190/ )/ 2/ )/ (/ 中国科学院/ 大学/ 北京/ 100190/ )/ 3/ )/ (/ 鲁东/ 大学/ 信息/ 与/ 电气/ 工程学院/ 山东/ 烟台/ 264025/ )/ 摘要/ 数据/ 传递/ 是/ 车载/ 自/ 组织/ 网络/ (/ VANET/ )/ 应用/ 不可或缺/ 的/ 组成部分/ ./ 在/ 城市/ 中/ ,/ 公交车/ 网络/ 具有/ 覆盖面广/ 、/ 行驶/ 线路/ 固定/ 等/ 特点/ ,/ VANET/ 应用/ 中/ 的/ 数据/ 传递/ 可以/ 通过/ 公交车/ 自/ 组织/ 网络/ 实现/ ,/ 但/ 公交车/ 网络/ 能否/ 在/ VANET/ 数据/ 传递/ 中/ 发挥/ 其/ 独特/ 的/ 作用/ 取决于/ 对/ 公交车/ 运行/ 规律/ 的/ 挖掘/ 和/ 利用/ 的/ 程度/ ./ 文中/ 提出/ 了/ 一种/ 公交车/ 自/ 组织/ 网络/ 的/ 路由/ 机制/ Vela/ ,/ 该/ 机制/ 依托/ 从/ 公交车/ 历史/ 轨迹/ 中/ 挖掘/ 的/ 公交车/ 运行/ 时空/ 规律/ ,/ 建立/ 了/ 公交车/ 数据/ 传递/ 的/ 概率/ 时空/ 模型/ ,/ 并/ 给出/ 了/ 基于/ 路段/ 上/ 公交线路/ 相遇/ 的/ 数据/ 传递/ 路径/ 的/ 选择/ 策略/ ./ 与/ 已有/ 相关/ 研究/ 相比/ ,/ Vela/ 路由/ 机制/ 一方面/ 以/ 路段/ 为/ 粒度/ 刻画/ 了/ 公交车/ 运行/ 的/ 时空/ 规律/ ,/ 这/ 使得/ 所/ 获得/ 的/ 公交车/ 运行/ 规律/ 兼具/ 准确性/ 和/ 稳定性/ ,/ 另一方面/ ,/ 基于/ 公交车/ 运行/ 规律/ 估算/ 路段/ 上/ 数据/ 传递/ 的/ 延迟/ 和/ 可靠性/ ,/ 能/ 获得/ 尽可能/ 好/ 的/ 服务质量/ 级别/ 的/ 数据/ 传递/ 路径/ ./ 实验/ 结果表明/ 采用/ Vela/ 路由/ 机制/ 能/ 实现/ 具有/ 高/ 到达/ 率/ 和/ 低/ 延迟/ 的/ 数据/ 传递/ ,/ 而且/ Vela/ 路由/ 机制/ 具有/ 较强/ 的/ 可伸缩性/ ./ 关键词/ 车辆/ 自/ 组织/ 网络/ ;/ 基于/ 公交车/ 的/ 路由/ ;/ 轨迹/ 挖掘/ ;/ 时间/ 序列/ 分析/ 1/ 引言/ 车/ 联网/ (/ VehicularAdhocNetwork/ ,/ VANET/ )/ 是/ 车辆/ 节点/ 按自/ 组织/ 方式/ 组成/ 的/ 一个/ 移动/ 无线通信/ 网络/ ./ 基于/ VANET/ 及/ 相关/ 技术/ (/ 如/ 传感器/ 技术/ 、/ 智能/ 处理/ 技术/ 等/ )/ ,/ 可以/ 实现/ 包括/ 车辆/ 主动/ 安全/ 、/ 智能/ 交通管理/ 、/ 城市/ 生活/ 服务/ 、/ 应急/ 救援/ 等/ 在内/ 的/ 多种/ 应用/ ./ 可以/ 预见/ ,/ 随着/ VANET/ 的/ 发展/ ,/ 相较/ 于/ 3G/ 、/ WiFi/ 等/ 无线网络/ ,/ VANET/ 在/ 部署/ 代价/ 和/ 使用/ 费用/ 方面/ 的/ 潜在/ 优势/ ,/ 使得/ 它/ 有望/ 成为/ 智慧/ 城市/ 中/ 开放/ 的/ 数据交换/ 平台/ ,/ 并/ 在/ 多个/ 领域/ 发挥作用/ [/ 1/ ]/ ./ 公交车/ 是/ 城市/ 公共交通/ 系统/ 中/ 的/ 重要/ 交通工具/ ,/ 公交车/ 在/ 安装/ 了/ 车载/ 无线通信/ 单元/ (/ OnBoardUnit/ ,/ OBU/ )/ 后/ ,/ 便/ 可/ 构成/ 公交车/ 自/ 组织/ 网络/ ./ 由于/ 公交车/ 网络/ 具有/ 覆盖面广/ 、/ 行驶/ 线路/ 固定/ 、/ 起始/ 站/ 发车/ 时间/ 间隔/ 相对/ 稳定/ 等/ 特点/ ,/ 因此/ 依托/ 公交车/ 自/ 组织/ 网络/ 实现/ 数据/ 传递/ 有望/ 成为/ 多种/ VANET/ 应用/ 的/ 基础/ ./ 本文/ 研究/ 公交车/ 自/ 组织/ 网络/ 的/ 数据/ 传递/ 问题/ ./ 在/ 公交车/ 自/ 组织/ 网络/ 中/ ,/ 公交车/ 节点/ 的/ 快速/ 运动会/ 使得/ 网络拓扑/ 变化/ 频繁/ ,/ 通信/ 链路/ 生存/ 周期/ 较/ 短/ ,/ 数据/ 传递/ 路径/ 不/ 稳定/ ,/ 网络/ 分区/ 时常/ 发生/ ,/ 这/ 都/ 会/ 直接/ 导致/ 数据/ 传递/ 服务质量/ 的/ 抖动/ ,/ 而/ 城市/ 建筑物/ 、/ 各类/ 公共设施/ 等/ 对/ 无线/ 信号/ 传播/ 的/ 阻挡/ 和/ 干扰/ 会/ 进一步/ 加剧/ 网络通信/ 质量/ 的/ 不稳定性/ ./ 因此/ 如何/ 挖掘/ 公交车/ 的/ 运行/ 模式/ 来/ 提高/ 数据/ 传递/ 服务质量/ ,/ 是/ 公交车/ 自/ 组织/ 网络/ 数据/ 路由/ 机制/ 面临/ 的/ 一个/ 挑战/ ./ 换言之/ ,/ 针对/ 公交车/ 网络/ 准确/ 挖掘/ 公交车/ 行驶/ 的/ 时间/ 特征/ 和/ 相遇/ 的/ 空间/ 特征/ ,/ 并/ 有效/ 应用/ 到/ 数据/ 路由/ 中/ ,/ 是/ 个/ 值得/ 研究/ 的/ 问题/ ./ 本文/ 针对/ V2V/ (/ VehicletoVehicle/ )/ 通信/ 场景/ 提出/ 了/ 一种/ 数据/ 路由/ 机制/ Vela/ ,/ 用于/ 将/ 数据/ 从/ 某个/ 公交车/ 节点/ 传递/ 至/ 某个/ 目的/ 路段/ ./ 该/ 机制/ 基于/ 公交车/ 在/ 路段/ 上/ 的/ 延迟/ 估计/ 和/ 相遇/ 规律/ 来/ 决定/ 数据/ 传递/ 的/ 路径/ ,/ 它/ 包含/ 以下/ 3/ 部分/ :/ (/ 1/ )/ 为了/ 获得/ 公交车/ 运行/ 的/ 时空/ 规律/ ,/ 依托/ 公交车/ 在/ 路段/ 上/ 的/ 历史/ 运行/ 时间/ 的/ 统计数据/ ,/ 通过/ 相关性/ 分析/ ,/ 建立/ 车辆/ 的/ 路段/ 运行/ 时间/ 的/ 自/ 回归/ 滑动/ 平均/ 模型/ ;/ 同时/ 挖掘/ 了/ 不同/ 公交线路/ 的/ 公交车/ 在/ 各路/ 段/ 上/ 的/ 相遇/ 规律/ ,/ 建立/ 相遇/ 概率模型/ ;/ (/ 2/ )/ 利用/ 上述/ 模型/ 所/ 反映/ 的/ 时空/ 规律/ ,/ 预测/ 在/ 路段/ 上/ 传递数据/ 的/ 时间/ 和/ 可靠性/ ,/ 建立/ 了/ 公交车/ 数据/ 传递/ 的/ 概率/ 时空/ 模型/ ;/ (/ 3/ )/ 发起/ 数据/ 传递/ 的/ 公交车/ 基于/ 概率/ 时空图/ 计算/ 到达/ 目的/ 路段/ 的/ 具有/ 最短/ 延迟/ 的/ 前/ k/ (/ Top/ -/ k/ )/ 条/ 路径/ ,/ 并/ 选择/ 前/ k/ 条/ 路径/ 中/ 可靠性/ 最高/ 的/ 路径/ ,/ 随后/ ,/ 按此/ 路径/ 路由/ 数据/ ,/ 若/ 在/ 路由/ 时/ 未能/ 遇到/ 预定/ 的/ 车辆/ 节点/ ,/ 则/ 重新/ 计算/ 从/ 当前/ 车辆/ 节点/ 到/ 目的地/ 的/ 最优/ 路径/ ,/ 并/ 继续/ 前述/ 过程/ ./ 由于/ Vela/ 机制/ 是/ 在/ 可容忍/ 的/ 数据/ 延迟/ 基础/ 上/ ,/ 选择/ 可靠性/ 最高/ 的/ 路径/ 进行/ 数据/ 传递/ ,/ 因而/ 它/ 能/ 为/ 数据/ 传递/ 提供/ 尽可能/ 高/ 的/ 服务质量/ 级别/ ./ 本文/ 的/ 主要/ 贡献/ 包含/ 以下/ 几个/ 方面/ :/ (/ 1/ )/ 通过/ 对/ 真实/ 公交车/ 轨迹/ 的/ 统计分析/ ,/ 发现/ 了/ 公交车/ 轨迹/ 的/ 一些/ 基本特征/ ;/ 运用/ 时间/ 序列/ 分析方法/ ,/ 给出/ 了/ 预测/ 公交车/ 在/ 路段/ 上/ 的/ 运行/ 时间/ 的/ 模型/ ,/ 并且/ 通过/ 实验/ 验证/ 了/ 预测/ 方法/ 的/ 有效性/ ./ (/ 2/ )/ 以/ 路段/ 为/ 粒度/ 挖掘/ 公交车/ 历史/ 运行/ 轨迹/ ,/ 获得/ 了/ 公交车/ 运行/ 的/ 时空/ 规律/ ./ 与/ 粗粒度/ (/ 即/ 公交线路/ 级别/ )/ 规律/ 挖掘/ 相比/ ,/ 该/ 方法/ 挖掘出/ 的/ 规律/ 的/ 准确性/ 更高/ ;/ 与/ 细粒度/ (/ 即/ 公交车/ 级别/ )/ 规律/ 挖掘/ 相比/ ,/ 该/ 方法/ 挖掘出/ 的/ 规律/ 的/ 稳定性/ 更高/ ./ (/ 3/ )/ 针对/ 公交车/ 自/ 组织/ 网络/ ,/ 提出/ 了/ 一种/ 新/ 的/ 数据/ 路由/ 机制/ Vela/ ,/ 该/ 机制/ 利用/ 公交车/ 运行/ 时空/ 规律/ 建立/ 数据/ 传递/ 的/ 概率/ 时空图/ ,/ 并/ 以/ 满足/ 数据/ 传递/ 不同/ 的/ 服务质量/ 为/ 目标/ 选择/ 数据/ 传递/ 的/ 路径/ ,/ 从而/ 为/ VANET/ 数据/ 传递/ 提供/ 高性能/ 和/ 高/ 可伸缩性/ 的/ 路由/ ./ 本文/ 第/ 2/ 节/ 介绍/ 相关/ 工作/ ;/ 第/ 3/ 节/ 给出/ 本文/ 要/ 解决/ 的/ 问题/ ,/ 并/ 对/ 公交车/ 轨迹/ 数据/ 进行/ 了/ 初步/ 分析/ ;/ 第/ 4/ 节/ 给出/ 公交车/ 数据/ 传递/ 的/ 概率/ 时空/ 模型/ ;/ 第/ 5/ 节/ 描述/ 基于/ 概率/ 时空/ 模型/ 的/ 路由/ 机制/ ;/ 第/ 6/ 节是/ 对/ 所/ 提/ 路由/ 机制/ 的/ 实验/ 评估/ ;/ 最后/ 是/ 全文/ 总结/ ./ 2/ 相关/ 工作/ 近年来/ ,/ VANET/ 上/ 数据/ 传递/ 机制/ 的/ 研究/ 非常/ 活跃/ ./ VANET/ 上/ 进行/ 数据/ 传递/ 的/ 基本/ 策略/ 是/ 存储/ 和/ 转发/ ,/ 即/ 车辆/ 节点/ 携带/ 数据/ 前行/ ,/ 直到/ 遇到/ 可以/ 转发/ 数据/ 的/ 节点/ ,/ 而/ 数据/ 的/ 转发/ 策略/ 通常/ 可以/ 采用/ 基于/ 地理位置/ 的/ 贪心/ 策略/ (/ 如/ GPCR/ [/ 2/ ]/ )/ ,/ 或/ 采用/ 基于/ Page3/ 最短/ 数据/ 传递/ 延迟/ 的/ 贪心/ 策略/ ,/ 后者/ 涉及/ 的/ 数据/ 传递/ 延迟/ 可以/ 采用/ 历史/ 交通流/ 数据/ 进行/ 估算/ (/ 如/ VADD/ [/ 3/ ]/ 、/ TBD/ [/ 4/ ]/ )/ 、/ 或/ 直接/ 采用/ 实时/ 的/ 交通流/ 数据/ (/ 如/ 文献/ [/ 5/ ]/ )/ 、/ 或/ 两者/ 相结合/ 的/ 方法/ 获得/ (/ 如/ 文献/ [/ 6/ ]/ )/ ./ 在/ VANET/ 数据/ 路由/ 中/ ,/ 车辆/ 的/ 相遇/ 是/ 数据/ 转发/ 的/ 前提条件/ ,/ 因此/ 车辆/ 的/ 相遇/ 关系/ (/ 如/ 频度/ 、/ 空间/ 分布/ 、/ 相遇/ 间隔/ 等/ )/ 被/ 广泛/ 挖掘/ 并/ 用于/ 数据/ 路由/ 决策/ ,/ 例如/ :/ 文献/ [/ 7/ ]/ 通过/ 共享/ 轨迹/ 构造/ 了/ 车辆/ 相遇/ 图/ ,/ 并/ 基于/ 此/ 进行/ 路由/ ,/ 文献/ [/ 8/ ]/ 利用/ 马尔可夫/ 链/ 预测/ 车辆/ 相遇/ 间隔时间/ ,/ 并/ 根据/ 邻居/ 节点/ 与/ 目标/ 车辆/ 的/ 相遇/ 间隔时间/ 决定/ 数据/ 传递/ 的/ 下/ 一/ 跳/ 车辆/ 节点/ ./ 文献/ [/ 9/ ]/ 采用/ 与/ 文献/ [/ 8/ ]/ 相同/ 的/ 相遇/ 延迟/ 估计/ 方法/ ,/ 并/ 进一步/ 挖掘/ 了/ 社会/ 层面/ 的/ 移动性/ ,/ 构造/ 自我/ 联系/ (/ egocontact/ )/ 图/ ,/ 这样/ 车辆/ 在/ 缺少/ 邻居/ 车辆/ 与/ 目的/ 车辆/ 的/ 相遇/ 延迟/ 估计/ 时/ ,/ 会/ 选取/ 在/ 自我/ 联系/ 图中/ 占据/ 更/ 重要/ 位置/ 的/ 邻居/ 车辆/ ,/ 进行/ 数据/ 传递/ ./ 考虑/ 到/ 公交车/ 网络/ 的/ 特点/ ,/ 有些/ 研究/ 工作/ 挖掘/ 了/ 公交车/ 节点/ 的/ 相遇/ 概率/ ,/ 并/ 基于/ 此/ 设计/ 了/ 公交车/ 网络/ 的/ 路由/ 机制/ ./ MaxProp/ [/ 10/ ]/ 是/ 在/ 真实/ 的/ 校园/ 公交车/ 网络/ (/ UmassDieselNet/ )/ 中/ 使用/ 的/ 路由/ 方法/ ,/ 它/ 使用/ 携带/ 转发/ 和/ 数据包/ 优先级/ 技术/ 传递数据/ ./ 其中/ ,/ 数据包/ 的/ 优先级/ 是/ 由/ 传递数据/ 到/ 目的地/ 的/ 开销/ 来/ 决定/ 的/ ,/ 而/ 开销/ 又/ 是/ 通过/ 记录/ 两个/ 公交车/ 相遇/ 的/ 可能性/ 来/ 估计/ 的/ ./ 当/ 公交车/ 遇到/ 另/ 一辆/ 公交车/ 时/ ,/ 转发/ 具有/ 最高/ 优先级/ 且/ 以/ 该/ 公交车/ 为/ 转发/ 节点/ 的/ 数据包/ ./ 针对/ 节点/ 之间/ 有/ 周期性/ 相遇/ 规律/ 的/ 这类/ 特殊/ 场景/ ,/ 文献/ [/ 11/ ]/ 提出/ 了/ 一种/ 数据/ 路由/ 协议/ RCM/ ./ 它/ 首先/ 利用/ 节点/ 的/ 历史/ 相遇/ 信息/ 和/ 先验/ 知识/ 刻画出/ 节点/ 间/ 的/ 相遇/ 时间/ 和/ 概率/ ,/ 然后/ 去掉/ 时间/ 维/ 的/ 约束/ ,/ 使用/ 马尔可夫/ 决策/ 过程/ 中/ 得到/ 消息传递/ 的/ 期望/ 的/ 最小/ 延迟/ ,/ 最终/ 给出/ 基于/ 期望/ 的/ 最小/ 延迟/ 的/ 数据/ 路由/ 路径/ ./ 文献/ [/ 11/ ]/ 认为/ 所提/ 的/ 方法/ 适用/ 于/ 公交车/ 网络/ ./ 但/ 城市/ 的/ 公交车/ 网络/ 受/ 多方面/ 因素/ 的/ 影响/ ,/ 一般/ 很难/ 满足/ 此/ 方法/ 所/ 要求/ 的/ 前提条件/ ,/ 即/ 车辆/ 节点/ 具有/ 稳定/ 的/ ,/ 周期性/ 的/ 相遇/ 规律/ ./ 文献/ [/ 12/ ]/ 假设/ 目的/ 移动/ 车辆/ 的/ 轨迹/ 已知/ ,/ 尝试/ 在/ 无/ 静态/ 基础设施/ 辅助/ 的/ 条件/ 下/ ,/ 利用/ 公交车/ 网络/ 实现/ I2V/ (/ InfrastructuretoVehicle/ )/ 型/ 数据传输/ ,/ 它/ 的/ 目标/ 是/ 在/ 满足用户/ 给出/ 的/ 数据传输/ 到达/ 率/ 条件/ 下/ 最小化/ 传输/ 延迟/ ./ 它/ 首先/ 将/ 公路网/ 模型/ 化为/ 概率/ 状态/ 空间/ 图/ ,/ 运用/ 和/ 文献/ [/ 11/ ]/ 相同/ 的/ 马尔可夫/ 决策/ 方法/ 得到/ 期望/ 的/ 最小/ 延迟/ ,/ 然后/ ,/ 根据/ 期望/ 的/ 最小/ 延迟/ 和/ 目的/ 移动/ 车辆/ 的/ 轨迹/ ,/ 确定/ 公交车/ 与/ 目的/ 移动/ 车辆/ 交汇/ 的/ 路口/ 以及/ 到/ 该/ 路口/ 的/ 数据/ 路由/ 路径/ ./ 但/ 该/ 方法/ 事实上/ 需要/ 使用/ 静态/ 基础设施/ 即/ RSU/ (/ Road/ -/ SideUnit/ )/ :/ RSU/ 必须/ 部署/ 在/ 交汇/ 路口/ ,/ 并/ 由此/ 将/ 数据/ 传递/ 给/ 目的/ 移动/ 车辆/ ,/ 否则/ 要/ 保证/ 用户/ 要求/ 的/ 数据传输/ 到达/ 率/ ,/ 目的/ 车辆/ 与/ 公交车/ 在/ 交汇/ 路口/ 必须/ 恰好/ 相遇/ 并/ 进行/ 数据交换/ ./ 但/ 由于/ 车辆/ 运行/ 时间/ 的/ 不确定性/ ,/ 这/ 一点/ 很难/ 得到/ 保证/ ./ 还/ 有些/ 研究/ 工作/ 从/ 公交车/ 线路/ 间/ 相遇/ 规律/ 入手/ ,/ 分析/ 线路/ 间/ 数据/ 传递/ 的/ 规律/ ,/ 并/ 进而/ 设计/ 基于/ 公交车/ 线路/ 的/ 数据/ 传递/ 机制/ ./ 文献/ [/ 13/ ]/ 提出/ 了/ 基于/ 公交车/ 线路/ 的/ 路由/ 算法/ BLER/ (/ BusLine/ -/ basedEffectiveRouting/ )/ ./ 它/ 首先/ 构建/ 公交车/ 线路图/ ,/ 将/ 公交车/ 线路/ 作为/ 图/ 的/ 顶点/ ,/ 顶点/ 之间/ 的/ 边/ 表示/ 两条/ 公交线路/ 至少/ 相遇/ 一次/ ,/ 边上/ 的/ 权重/ 设置/ 为/ 这/ 两条/ 公交线路/ 的/ 公共/ 路段/ 长度/ ./ 其次/ ,/ 每辆/ 公交车/ 基于/ 上述/ 公交线路/ 图/ ,/ 计算/ 出/ 到/ 目的/ 公交线路/ 的/ 权重/ 之/ 和/ 即/ 最大/ 的/ 路径/ ,/ 并/ 按/ 此/ 路径/ 转发/ 数据/ 到/ 目的/ 线路/ ./ 最后/ ,/ 采用/ 往复/ (/ Zigzag/ )/ 过程/ 传递数据/ 到/ 目的/ 公交车/ ,/ 即/ 在/ 目的/ 线路/ 上/ 公交车/ 只/ 向/ 其/ 反向/ 公交车/ 传递数据/ ,/ 直到/ 数据/ 到达/ 目的/ 公交车/ ./ 文献/ [/ 14/ ]/ 提出/ 了/ 另/ 一种/ 基于/ 公交车/ 线路/ 的/ 路由/ 算法/ R2R/ ,/ 它/ 采用/ 与/ 文献/ [/ 13/ ]/ 类似/ 的/ 公交线路/ 图/ ,/ 即以/ 公交线路/ 为/ 图/ 的/ 顶点/ ,/ 边/ 表示/ 线路/ 间/ 的/ 相遇/ 关系/ ,/ 但边/ 的/ 权重/ 设置/ 为/ 一对/ 公交线路/ 上/ 公交车/ 的/ 平均/ 相遇/ 时间/ 间隔/ (/ 即/ 平均/ 相遇/ 频率/ 的/ 倒数/ )/ ./ 文献/ [/ 14/ ]/ 基于/ 该/ 公交线路/ 图/ ,/ 用/ Dijkstra/ 算法/ 计算/ 权重/ 最小/ 路径/ ,/ 并/ 将/ 该/ 路径/ 作为/ 数据/ 传递/ 路径/ ./ 上述/ 方法/ 较/ BLER/ 对/ 车辆/ 线路/ 相遇/ 规律/ 的/ 衡量/ 更加/ 准确/ ,/ 其/ 路由/ 性能/ 也/ 优于/ BLER/ ./ 通常/ ,/ 公交车/ 车站/ 会/ 汇聚/ 多条/ 公交线路/ ,/ 文献/ [/ 15/ ]/ 利用/ 公交线路/ 的/ 这种/ 特性/ ,/ 用/ 固定/ 在/ 车站/ 的/ WiFi/ 通信/ 单元/ 做/ 数据/ 中继/ ,/ 并/ 在/ 此/ 前提/ 下/ ,/ 为/ 两个/ 车站/ 之间/ 的/ 数据/ 传递/ 寻找/ 一条/ 能/ 最大/ 限度/ 按时/ 传递/ 的/ 路径/ ./ 它/ 首先/ 将/ 公交/ 网络/ 建模/ 成/ 一个/ 随机/ 图/ :/ 顶点/ 是/ (/ 车站/ -/ 线路/ )/ 对/ ,/ 顶点/ 之间/ 的/ 边/ 表示/ 可以/ 通过/ 同一/ 线路/ 或/ 不同/ 线路/ 的/ 公交车/ 从/ 一个/ 车站/ 到达/ 另/ 一个/ 车站/ ,/ 图上/ 的/ 边/ 还/ 与/ 反映/ 公交车/ 行驶/ 时间/ 的/ 随机变量/ 相关联/ ,/ 随后/ ,/ 在/ 此/ 随机/ 图上/ 通过/ 搜索/ 和/ 剪枝/ 寻找/ 出/ 一条/ 按时/ 传递/ 概率/ 最高/ 的/ 路径/ ./ 但/ 该/ 方法/ 中/ 公交车/ 之间/ 不能/ 直接/ 进行/ 数据/ 传递/ ,/ 只能/ 依赖/ 公交车站/ 的/ WiFi/ 通信/ 单元/ 进行/ 数据交换/ ./ 公交车/ 网络/ 上/ 数据/ 传递/ 机制/ 与/ 公交车/ 的/ 运行/ 时间/ 关系/ 紧密/ ./ 到/ 目前为止/ ,/ 也/ 有/ 不少/ 关于/ 公交车/ 的/ 运行/ 时间/ // 到/ 站/ 时间/ 预测/ 方面/ 的/ 研究/ 工作/ ./ 文献/ [/ 16/ ]/ 利用/ 实时/ 的/ 车辆/ GPS/ 定位/ 信息/ ,/ 结合/ 路段/ 长度/ 、/ 车辆/ 速度/ 、/ 车站/ 停留时间/ 等/ 因素/ ,/ 构造/ 了/ Page4/ 公交车/ 运行/ 时间/ 估计/ 模型/ ,/ 可以/ 预报/ 到/ 站/ 时间/ ./ 这种/ 方法/ 的/ 实时性/ 较/ 好/ ,/ 但/ 由于/ 需要/ 实时/ 获得/ GPS/ 信息/ ,/ 通信/ 开销/ 较大/ ./ 文献/ [/ 17/ ]/ 考虑/ 到/ 公交车/ 运行/ 时间/ 经常/ 受到/ 很多/ 因素/ 影响/ ,/ 如/ 路段/ 长度/ 、/ 交通状况/ 、/ 交叉路口/ 数量/ 、/ 站点/ 乘客/ 数量/ 、/ 天气情况/ 等/ ,/ 建立/ 了/ 包含/ 多/ 变量/ 的/ 回归方程/ 作为/ 预测/ 模型/ ,/ 并/ 根据/ 各个/ 变量/ 在/ 预测/ 时段/ 的/ 变化/ 情况/ 计算/ 得到/ 车辆/ 的/ 运行/ 时间/ ./ 此类/ 模型/ 要求/ 各个/ 自变量/ 是/ 相互/ 独立/ 的/ ,/ 而/ 这/ 一点/ 在/ 实际/ 应用/ 中/ 很/ 难/ 满足/ ,/ 因此/ 此类/ 预测/ 模型/ 的/ 应用/ 是/ 有限/ 的/ ./ 文献/ [/ 18/ ]/ 采用/ K/ -/ means/ 聚类/ 方法/ 分析/ 公交车/ 运行/ 的/ 历史数据/ ,/ 找出/ 道路/ 状况/ 最/ 相似/ 的/ 前/ K/ 个/ 行程/ 记录/ ./ 具体来说/ ,/ 文献/ [/ 18/ ]/ 首先/ 提取/ 历史/ 行程/ 记录/ 的/ 路况/ 特征/ ,/ 聚类/ 各个/ 路段/ 的/ 历史/ 路况/ 评估/ 值/ ./ 然后/ ,/ 通过/ 查找/ 与/ 当前/ 时间/ ,/ 位置/ 和/ 路况/ 特征/ 最/ 相似/ 的/ 历史/ 行程/ 记录/ ,/ 计算/ 公交车/ 的/ 到/ 站/ 时间/ ./ 但/ 历史/ 交通状况/ 本身/ 并/ 没有/ 明显/ 的/ 聚类/ 特性/ ,/ 在/ 其/ 上/ 应用/ 聚类/ 方法/ 并/ 不能/ 获得/ 真实/ 反映/ 历史/ 路况/ 评估/ 的/ 分类/ ./ 文献/ [/ 19/ ]/ 利用/ 神经网络/ ,/ 通过/ 对/ 历史数据/ 的/ 训练/ 得到/ 预测/ 函数/ 用于/ 公交车/ 运行/ 时间/ 的/ 预测/ ,/ 但/ 神经网络/ 的/ 训练/ 需要/ 较长/ 的/ 时间/ ./ 文献/ [/ 20/ ]/ 将/ 交通流/ 看成/ 时间/ 序列/ ,/ 并/ 使用/ 支持/ 向量/ 机/ 预测/ 车辆/ 长距离/ 行驶/ 所/ 需/ 的/ 时间/ ./ 该/ 方法/ 在/ 预测/ 精度/ 上/ 有/ 一定/ 优势/ ,/ 但是/ 在/ 某些/ 参数/ 的/ 确定/ 上/ (/ 例如/ :/ 核/ 函数/ 的/ 选取/ )/ 需要/ 经验/ 或/ 多次/ 尝试/ ./ 文献/ [/ 21/ ]/ 利用/ 公交车/ 乘客/ 智能手机/ 上/ 的/ 多种/ 传感器/ ,/ 收集/ 其/ 感知/ 的/ 信息/ ,/ 然后/ ,/ 结合/ 公交车/ 运行/ 的/ 历史数据/ ,/ 预测/ 公交车/ 的/ 到/ 站/ 时间/ ./ 考虑/ 到/ 在/ 车辆/ 自/ 组织/ 网络/ 中/ ,/ 公交车/ 作为/ 一类/ 公共交通/ 基础设施/ ,/ 利用/ 公交车/ 进行/ 数据/ 传递/ 可以/ 降低/ 数据/ 转发/ 的/ 随机性/ ,/ 减少/ 数据/ 传递/ 延迟/ 的/ 抖动/ ,/ 但/ 这些/ 都/ 需/ 建立/ 在/ 挖掘/ 公交车/ 时空/ 规律/ 的/ 基础/ 上/ ,/ 从/ 已有/ 的/ 相关/ 工作/ 可以/ 看出/ ,/ 公交车/ 个体/ 之间/ 的/ 相遇/ 受/ 诸多/ 因素/ 的/ 影响/ ,/ 周期性/ 特点/ 不/ 明显/ ,/ 导致/ 公交车/ 个体/ 层面/ 的/ 规律/ 不/ 稳定/ ;/ 而/ 基于/ 公交线路/ 的/ 规律/ 反映/ 的/ 是/ 粗粒度/ 的/ 公交线路/ 之间/ 的/ 关系/ ,/ 用/ 它/ 估算/ 数据/ 传递/ 延迟/ 存在/ 不/ 准确/ 的/ 问题/ ,/ 因此/ 我们/ 提出/ 了/ 基于/ 路段/ 上/ 公交线路/ 时空/ 规律/ 的/ 数据/ 传递/ 机制/ Vela/ ,/ 该/ 机制/ 有效/ 提高/ 了/ 数据/ 传递/ 的/ 性能/ ,/ 实现/ 了/ 在/ 可容忍/ 的/ 延迟/ 下/ ,/ 数据/ 以/ 可靠性/ 最高/ 的/ 方式/ 传递/ ./ 3/ 问题/ 定义/ 及/ 数据分析/ 3.1/ 问题/ 定义/ 两个/ 移动/ 车辆/ 节点/ 利用/ 公交车/ 网络/ 进行/ 数据/ 传递/ 的/ 过程/ 可以/ 分成/ 3/ 步/ :/ (/ 1/ )/ 移动/ 源/ 节点/ 将/ 数据/ 传递/ 到/ 某/ 公交车/ ;/ (/ 2/ )/ 利用/ 公交车/ 网络/ 将/ 数据/ 传递/ 到/ 目的/ 节点/ 途径/ 的/ 路段/ (/ 称/ 目的/ 路段/ )/ ;/ (/ 3/ )/ 公交车/ 将/ 数据/ 传递/ 给/ 移动/ 车辆/ ./ 若/ (/ 由于/ 移动/ 车辆/ 节点/ 还/ 未/ 到达/ 目的/ 路段/ 等/ 原因/ 造成/ 的/ )/ 公交车/ 未能/ 在/ 目的/ 路段/ 上/ 与/ 移动/ 节点/ 实现/ 数据/ 传递/ ,/ 那么/ 公交车/ 在/ 驶离/ 该/ 路段/ 后/ 将/ 以/ 自己/ 为源/ 节点/ ,/ 发起/ 到达/ 目的/ 路段/ 的/ 数据/ 传递/ 请求/ ./ 重复/ 此/ 过程/ ,/ 直到/ 携带/ 数据/ 的/ 公交车/ 在/ 目的/ 路段/ 上/ 与/ 移动/ 车辆/ 在/ 通信/ 范围/ 内/ 相遇/ ./ 图/ 1/ 给出/ 了/ 一个/ V2V/ 通信/ 的/ 实例/ :/ 移动/ 车辆/ 节点/ Veh1/ 利用/ 公交线路/ 1/ ~/ 3/ 上/ 的/ 公交车/ A/ 、/ B/ 、/ C/ 将/ 数据/ 传递/ 到/ 移动/ 车辆/ 节点/ Veh2/ ./ 上述/ 第/ (/ 3/ )/ 步/ 的/ 执行/ 效率/ 与/ 环境/ 紧密/ 相关/ ,/ 可变/ 因素/ 多/ ,/ 随机性/ 强/ ,/ 可能/ 会/ 需要/ 很/ 长时间/ 才能/ 完成/ 数据/ 传递/ ,/ 甚至/ 会/ 出现/ 数据/ 传递/ 失败/ 的/ 情景/ ./ 为了/ 缓解/ 数据/ 传递/ 延迟/ 的/ 抖动/ ,/ 提高/ 数据/ 传递/ 的/ 到达/ 率/ ,/ 减少/ 数据/ 传递/ 的/ 开销/ ,/ 可以/ 在/ 目的/ 路段/ 上/ 的/ 公交车站/ 或/ 应用/ 热点/ 位置/ (/ PointofInterest/ ,/ POI/ )/ 或/ 目的/ 路段/ 路口/ 部署/ RSU/ ,/ 由/ 它们/ 存储/ 数据/ 并/ 在/ 目的/ 车辆/ 出现/ 时/ 将/ 数据/ 转发给/ 目的/ 车辆/ ./ 本文/ 研究/ 上述/ 场景/ 中将/ 数据/ 从/ 某个/ 公交车/ 节点/ 传递/ 至/ 目的/ 路段/ 的/ 路由/ 机制/ ,/ 该/ 路由/ 机制/ 不仅/ 是/ 实现/ V2V/ 通信/ 的/ 关键/ ,/ 也/ 适用/ 于/ 一些/ I2V/ 或/ V2I/ (/ VehicletoInfrastructure/ )/ 的/ 通信/ 场景/ ,/ 即源/ 节点/ 或/ 目的/ 节点/ 可以/ 是/ 位于/ 公交车/ 线路/ 旁/ 的/ 静态/ 节点/ (/ 例如/ :/ 放置/ 在/ 停车场/ 外/ 的/ VANET/ 节点/ )/ ./ 3.2/ 公交车/ 轨迹/ 数据分析/ 由于/ 真实/ 的/ 公交车/ 运行/ 会/ 受到/ 实时/ 交通流/ 、/ 道路/ 突发事件/ 等/ 的/ 影响/ ,/ 它/ 的/ 运行/ 从/ 微观/ 上/ 看/ 经常/ 呈现出/ 与/ 预期/ 的/ 调度/ 和/ 运行状况/ 不/ 一致/ 的/ 现象/ ./ 为了/ Page5/ 确定/ 公交车/ 的/ 运行/ 时间/ 、/ 不同/ 线路/ 的/ 公交车/ 在/ 路段/ 上/ 的/ 相遇/ 是否/ 存在/ 某种/ 宏观/ 的/ 模式/ ,/ 我们/ 基于/ 真实/ 的/ 公交车/ GPS/ 轨迹/ 信息/ ,/ 对/ 公交车/ 运行/ 的/ 时空/ 模式/ 进行/ 了/ 分析/ ./ 我们/ 选择/ 了/ 北京市/ 具有/ 代表性/ 的/ 3/ 条/ 公交线路/ ,/ 它们/ 是/ 939/ 路/ 、/ 944/ 路/ 和/ 983/ 路/ ,/ 其中/ 939/ 路/ 每天/ 平均/ 有/ 20/ 辆/ 公交车/ 在/ 运行/ ,/ 944/ 路/ 平均/ 有/ 60/ 辆/ 公交车/ 在/ 运行/ ,/ 983/ 路/ 平均/ 有/ 42/ 辆/ 公交车/ 在/ 运行/ ./ 图/ 2/ 是/ 北京/ 的/ 道路/ 图/ ,/ 其中/ 加粗/ 线路/ 是/ 我们/ 关注/ 的/ 公交车/ 线路/ ./ 这/ 3/ 条/ 线路/ 都/ 经过/ 北四环/ 北辰/ 西桥/ -/ 安慧桥/ 路段/ ,/ 该/ 路段/ 长/ 1920m/ ,/ 下文/ 称此/ 路段/ 为/ 采样/ 路段/ ./ 每辆/ 公交车/ 每天/ 从/ 早晨/ 6/ 点至/ 晚间/ 22/ 点/ 每/ 20s/ 报告/ 一次/ 自己/ 的/ GPS/ 轨迹/ 信息/ ,/ 内容/ 包括/ 时间/ 、/ 公交车/ 车牌号/ 、/ 公交线路/ 号/ 、/ 公交车/ 的/ 经度/ 和/ 纬度/ 、/ 车辆/ 当前/ 的/ 速度/ 和/ 方位角/ 、/ 上下行/ 编号/ 、/ 下/ 一站/ 编号/ ./ 表/ 1/ 给出/ 了/ 公交车/ 报告/ 的/ GPS/ 轨迹/ 信息/ 的/ 一个/ 实例/ ./ 公交线路/ 号/ 速度/ // (/ km/ // h/ )/ 上下行/ 编号/ 下/ 一站/ 编号/ 我们/ 从/ 2013/ 年/ 3/ 月/ 连续/ 4/ 周/ 的/ 公交车/ GPS/ 轨迹/ 数据/ 中/ 分析/ 了/ 采样/ 路段/ 上/ 公交车/ 的/ 运行/ 情况/ ./ 首先/ 对/ 公交线路/ 的/ GPS/ 轨迹/ 信息/ 进行/ 预处理/ ,/ 包括/ 修正/ 漂移/ 的/ GPS/ 点/ 数据/ ,/ 插入/ 丢失/ 的/ GPS/ 点/ 数据/ ,/ 过滤/ 掉/ 非/ 采样/ 路段/ 的/ GPS/ 点/ 信息/ ;/ 其次/ ,/ 根据/ 公交车/ 车牌号/ ,/ 获得/ 各个/ 车辆/ 的/ GPS/ 点/ 信息/ ;/ 然后/ ,/ 对/ 每辆车/ 按照/ 上下行/ 信息/ ,/ 提取/ 每次/ 经过/ 采样/ 路段/ 的/ GPS/ 点/ 序列/ (/ 一辆车/ 一天/ 会/ 多次/ 往返/ 始发站/ 与/ 终点站/ )/ ./ 最后/ ,/ 基于/ 上述/ 数据/ ,/ 统计/ 公交车/ 在/ 运行/ 时间/ 和/ 相遇/ 关系/ 上/ 的/ 特性/ ./ 图/ 3/ 给出/ 了/ 3/ 条/ 公交线路/ 从/ 2013/ 年/ 3/ 月/ 4/ 日/ (/ 周一/ )/ 到/ 3/ 月/ 10/ 日/ (/ 周日/ )/ 在/ 采样/ 路段/ 上/ 的/ 通行/ 时间/ ./ 可以/ 看到/ ,/ 从/ 周一/ 至/ 周五/ 的/ 不同/ 时段/ ,/ 公交车/ 行驶/ 通过/ 采样/ 路段/ 的/ 时间/ 有/ 明显/ 的/ 波动/ ,/ 早晨/ 7/ 点到/ 9/ 点/ 采样/ 路段/ 的/ 通行/ 时间/ 明显/ 较长/ ,/ 晚上/ 18/ 点/ 左右/ 有/ 程度/ 较弱/ 的/ 晚/ 高峰/ ./ 周六/ 、/ 周日/ 的/ 运行/ 时间/ 较为/ 平稳/ ./ 从图/ 3/ 数据/ 还/ 可以/ 得出/ ,/ 虽然/ 周一/ 至/ 周五/ 公交车/ 通过/ 采样/ 路段/ 的/ 运行/ 时间/ 波动/ 明显/ ,/ 但是/ 遵循/ 相同/ 的/ 变化/ 模式/ ./ 另外/ ,/ 周六/ 、/ 周日/ 的/ 运行/ 时间/ 平稳/ ,/ 运行/ 时间/ 的/ 标准差/ 仅为/ 11.7/ s/ ./ 在/ 本文/ 中/ ,/ 两辆/ 公交车/ 相遇/ 是/ 指/ 在/ 某个/ 时间/ 区间/ 内/ 一辆/ 公交车/ 在/ 另/ 一辆/ 公交车/ 的/ 通信/ 半径/ 内/ ,/ 而/ 公交线路/ A/ 在/ 某/ 路段/ 上/ 与/ 公交线路/ B/ 相遇/ 的/ 概率/ 定义/ 为/ 在/ 指定/ 的/ 时间/ 区间/ 内/ 线路/ A/ 的/ 公交车/ 与/ 线路/ B/ 的/ 公交车/ 在/ 该/ 路段/ 上/ 相遇/ 的/ 次数/ 与/ 线路/ A/ 的/ 车辆通行/ 该/ 路段/ 的/ 次数/ 的/ 比值/ ./ 这个/ 概率/ 反映/ 了/ 公交线路/ A/ 的/ 车/ 将/ 数据/ 成功/ 转发/ 到/ 公交线路/ B/ 的/ 概率/ ./ 我们/ 分析/ 了/ 944/ 路/ 公交车/ 与/ 939/ 路/ 公交车/ 在/ 采样/ 路段/ 上/ 的/ 相遇/ 概率/ ./ 图/ 4/ 给出/ 了/ 2013/ 年/ 3/ 月/ 连续/ 四周/ 的/ 工作日/ 里/ (/ 即/ 4/ 日/ ~/ 8/ 日/ ,/ 11/ 日/ ~/ 15/ 日/ ,/ 18/ 日/ ~/ 22/ 日/ ,/ 25/ 日/ ~/ 29/ 日/ )/ 两条/ 线路/ 的/ 车辆/ 的/ 平均/ 相遇/ 概率/ 值/ ./ 为了/ 检验/ 上述/ 数据/ 是否/ 存在/ 周期性/ ,/ 我们/ 对/ 连续/ 四周/ 工作日/ 的/ 相遇/ 概率/ 组成/ 的/ 数据/ ,/ 通过/ 傅里叶/ 变换/ 求得/ 数据/ 的/ 瞬时/ 频率/ ,/ 然后/ 在/ 频域/ 上/ 计算/ 其/ 功率/ 谱/ ,/ 功率/ 谱/ 结果/ 如图/ 5/ 所示/ ./ 从/ 功率/ 谱/ 上/ 可以/ 明显/ 地/ 看到/ 出现/ 尖峰/ ,/ 这/ 说明/ 该/ 数据/ 序列/ 具有/ 周期性/ ./ Page6/ 图/ 4/ 采样/ 路段/ 上/ 两条/ 公交线路/ 的/ 相遇/ 概率/ 上述/ 初步/ 的/ 数据分析/ 结果/ 说明/ 了/ 公交车/ 运行/ 存在/ 着/ 规律/ ,/ 基于/ 此/ ,/ 本文/ 挖掘/ 了/ 公交车/ 运行/ 的/ 规律/ ,/ 并/ 将/ 之/ 应用/ 于/ 数据/ 路由/ 中/ ./ 4/ 公交车/ 数据/ 传递/ 的/ 概率/ 时空/ 模型/ 4.1/ 概率/ 时空/ 模型/ 概述/ 我们/ 将/ 公交车/ 网络/ 模型/ 化为/ 概率/ 时空图/ G/ =/ 〈/ V/ ,/ E/ 〉/ ,/ 其中/ V/ 表示/ 顶点/ 集合/ ,/ 每个/ 顶点/ 代表/ 经过/ 某个/ 路段/ 的/ 一条/ 公交线路/ ,/ 为/ 方便/ 起/ 见/ ,/ 一个/ 顶点/ 若/ 代表/ 的/ 是/ 经过/ 路段/ e/ 的/ 公交线路/ A/ ,/ 那么/ 用/ Ae/ 表示/ ;/ E/ 代表/ 边/ 的/ 集合/ ,/ 若/ 顶点/ Ae/ 与/ Be/ (/ Ae/ ,/ Be/ ∈/ V/ ,/ A/ ≠/ B/ )/ 之间/ 存在/ 边/ ,/ 则/ 该/ 边/ 表示/ 不同/ 公交线路/ A/ ,/ B/ 途经/ 同一/ 路段/ e/ ;/ 若/ 顶点/ Aei/ 与/ Aei/ +/ 1/ 之间/ 存在/ 边/ ,/ 该边/ 表示/ 同一/ 公交线路/ A/ 从/ 一个/ 路段/ ei/ 行驶/ 到/ 相邻/ 的/ 另/ 一个/ 路段/ ei/ +/ 1/ ./ 图/ 6/ 给出/ 了/ 概率/ 时空/ 模型/ 的/ 一个/ 例子/ ,/ 图/ 6/ 中/ ,/ 跨越/ 两个/ 大圈/ 的/ 边/ 表示/ 不同/ 公交线路/ 经过/ 同一/ 路段/ ,/ 大/ 圈内/ 顶点/ 之间/ 的/ 边/ 表示/ 一/ 公交线路/ 从/ 一个/ 路段/ 到达/ 相邻/ 的/ 下/ 一个/ 路段/ ./ 我们/ 用/ P/ (/ Ae/ ,/ Be/ )/ 表示/ 公交线路/ A/ 和/ B/ 在/ 路段/ e/ 上/ 的/ 相遇/ 概率/ ./ 本文/ 的/ 4.4/ 节/ 给出/ 了/ 车辆/ 相遇/ 概率/ 的/ 估计/ 方法/ ./ 转移/ 总是/ 成功/ 的/ ,/ 所以/ 有/ 由于/ 通过/ 同/ 一条/ 公交线路/ 的/ 相邻/ 路段/ 进行/ 数据/ 我们/ 用/ 上述/ 相遇/ 概率/ 表示/ 图/ G/ 上/ 通过/ 边/ (/ Ae/ ,/ Be/ )/ 及/ (/ Aei/ ,/ Aei/ +/ 1/ )/ 进行/ 数据/ 传递/ 的/ 概率/ P/ ./ 另一方面/ ,/ 数据/ 沿一/ 公交线路/ A/ 从/ 一个/ 路段/ ei/ 被/ 携带/ 到/ 下/ 一个/ 路段/ ei/ +/ 1/ 的/ 延迟/ T/ (/ ei/ ,/ ei/ +/ 1/ )/ 可以/ 通过/ 挖掘/ 公交车/ 的/ 轨迹/ 数据/ 获得/ ,/ 4.2/ 节/ 给出/ 了/ 具体/ Page7/ 的/ 延迟/ 估计/ 方法/ ./ 我们/ 用/ 上述/ 延迟/ 表示/ 图/ G/ 上/ 通过/ (/ Aei/ ,/ Aei/ +/ 1/ )/ 进行/ 数据/ 传递/ 的/ 权重/ ./ 若/ 在/ 同一/ 时刻/ ,/ 有/ 同一/ 公交线路/ 的/ 多辆/ 车/ 经过/ 此/ 路段/ ,/ 那么/ 取/ 它们/ 的/ 平均/ 延迟/ 作为/ 权重/ ./ 由于/ 我们/ 认为/ 在/ 同一个/ 路段/ 的/ 不同/ 公交车/ 之间/ 进行/ 数据/ 传递/ 的/ 时间/ 可以/ 忽略/ ,/ 所以/ ,/ 图/ G/ 上边/ (/ Ae/ ,/ Be/ )/ 的/ 权重/ 为/ 0/ ./ 下面/ 用/ 一个/ 例子/ 来/ 说明/ 上述/ 数据/ 传递/ 模型/ ,/ 图/ 7/ 给出/ 了/ 一个/ 简易/ 的/ 曼哈顿/ 街区/ 类型/ 的/ 路网/ ,/ 该/ 路网/ 由/ 9/ 个/ 路口/ 和/ 12/ 个/ 路段/ 构成/ ,/ 其中/ 共有/ 3/ 条/ 公交线路/ ,/ 分别/ 为/ A/ 、/ B/ 、/ C/ ,/ A/ 经过/ 的/ 路段/ 是/ 1/ -/ 4/ -/ 9/ -/ 11/ ,/ B/ 经过/ 的/ 路段/ 是/ 2/ -/ 4/ -/ 9/ -/ 12/ ,/ C/ 经过/ 的/ 路段/ 是/ 1/ -/ 2/ -/ 5/ -/ 10/ -/ 11/ -/ 12/ -/ 8/ -/ 3/ -/ 1/ ./ 根据/ 图/ 7/ 的/ 道路/ 拓扑/ 和/ 公交线路/ ,/ 可以/ 构造/ 出如图/ 8/ 所示/ 的/ 概率/ 时空图/ ./ 图/ 8/ 中/ ,/ 大/ 圈/ 代表/ 3/ 条/ 公交线路/ ,/ 大/ 圈内/ 顶点/ 间/ 的/ 边/ 对应/ 着/ 同一/ 公交线路/ 上/ 的/ 相邻/ 路段/ ,/ 其/ 顶点/ 间/ 的/ 转移/ 概率/ 为/ 1.4/ ./ 2/ 公交车/ 运行/ 时间/ 预测/ 为了/ 准确/ 预测/ 公交车/ 在/ 路段/ 上/ 的/ 运行/ 时间/ ,/ 我们/ 把/ 公交车/ 的/ 历史/ 运行/ 数据/ 看作/ 时间/ 序列/ ,/ 对/ 它/ 进行/ 分析/ ,/ 识别/ 出其/ 所/ 适合/ 的/ 模型/ ,/ 从而/ 建立/ 公交车/ 运行/ 时间/ 的/ 预测/ 方程/ ./ 采用/ 时间/ 序列/ 分析方法/ 是/ 考虑/ 到/ 公交车/ 的/ 历史/ 运行/ 数据/ 的/ 规模/ 并/ 不是/ 很大/ ,/ 而/ 时间/ 序列/ 分析方法/ 可以/ 在/ 有限/ 样本/ 数据/ 的/ 情况/ 下/ 建立/ 起/ 相当/ 精确/ 的/ 数学模型/ ,/ 其/ 预测/ 精度/ 和/ 可操作性/ 都/ 较/ 好/ ./ 具体/ 而言/ ,/ 设/ 已有/ x/ 天/ 的/ 公交车/ 工作日/ 运行/ 历史数据/ ,/ 为了/ 预测/ 数据/ 沿一/ 公交线路/ A/ 从/ 一个/ 路段/ ei/ 被/ 携带/ 到/ 相邻/ 下/ 一个/ 路段/ ei/ +/ 1/ 的/ 延迟/ ./ 首先/ ,/ 将/ 公交车/ 每天/ 的/ 运行/ 时间/ (/ 即/ 600/ ~/ 2200/ )/ 按照/ 20min/ 为/ 一/ 区间/ (/ period/ )/ 划分/ 为/ 48/ 个/ 区间/ ,/ 这样/ 公交车/ 每天/ 行驶/ 通过/ 路段/ ei/ 所/ 需/ 的/ 运行/ 时间/ 可以/ 看作/ 按/ 区间/ 划分/ 的/ 48/ 组/ 时间/ 序列/ ,/ 记/ 为/ {/ Tperiod/ 着/ ,/ 对/ 给定/ 一个/ 具体/ 的/ 时间/ 区间/ y/ 下/ 的/ 公交车/ 运行/ 时间/ 序列/ ,/ 简记/ 为/ {/ Tt/ ,/ t/ ∈/ [/ 1/ ,/ x/ ]/ }/ ,/ 进行/ 平稳性/ 检验/ ,/ 然后/ ,/ 通过/ 模型/ 识别/ 、/ 参数估计/ ,/ 建立/ Tt/ (/ t/ >/ x/ )/ 的/ 预测/ 方程/ ,/ 即可/ 预测/ 第/ t/ 天/ (/ t/ >/ x/ )/ 的/ 公交车/ 在/ 这个/ 给定/ 的/ 时间/ 区间/ 内/ 的/ 运行/ 时间/ ./ 考虑/ 到/ 公交车/ 运行/ 时间/ 的/ 分布/ 规律/ 未知/ ,/ 而/ 游程/ 检验法/ [/ 22/ ]/ 无需/ 假设/ 被/ 检验/ 的/ 随机/ 序列/ 的/ 分布/ 规律/ ,/ 因此/ 我们/ 采用/ 该/ 方法/ 对/ 时间/ 区间/ y/ 下/ 的/ 公交车/ 运行/ 时间/ 序列/ (/ 历史/ )/ 数据/ 进行/ 分析/ ,/ 发现/ 按照/ 时间/ 区间/ 划分/ 的/ 公交车/ 运行/ 时间/ 数据/ 是/ 平稳/ 的/ ./ 在/ 模型/ 识别/ 阶段/ ,/ 首先/ 需要/ 对/ 公交车/ 运行/ 时间/ 序列/ 进行/ 自/ 相关/ 分析/ ./ 将/ 公交车/ 运行/ 时间/ 序列/ {/ Tt/ }/ 分为/ 两组/ 间隔/ 为/ k/ 天/ 的/ 序列/ ,/ 一共/ 有/ x/ -/ k/ 对/ ,/ 即/ (/ T1/ ,/ Tk/ +/ 1/ )/ ,/ (/ T2/ ,/ Tk/ +/ 2/ )/ ,/ …/ ,/ (/ Tx/ -/ k/ ,/ Tx/ )/ ./ 显然/ ,/ {/ T1/ ,/ …/ ,/ Tx/ -/ k/ }/ 和/ {/ Tk/ +/ 1/ ,/ …/ ,/ Tx/ }/ 都/ 具有/ 均值/ T/ -/ ./ 义如式/ (/ 1/ )/ 所示/ :/ 接着/ ,/ 观察/ 自/ 相关/ 函数/ ρ/ k/ 的/ 值/ ,/ 自/ 相关/ 函数/ 的/ 定/ 其中/ ,/ 自/ 相关/ 函数/ 反映/ 了/ 在/ Tt/ +/ 1/ ,/ Tt/ +/ 2/ ,/ …/ ,/ Tt/ +/ k/ -/ 1/ 影响/ 下/ ,/ 间隔/ 为/ k/ 天/ 的/ 运行/ 时间/ Tt/ 和/ Tt/ +/ k/ 的/ 相关/ 关系/ ./ 若自/ 相关/ 函数/ ρ/ k/ 在/ k/ >/ q/ 时全/ 为/ 零/ ,/ 表明/ 该/ 公交车/ 运行/ 时间/ 序列/ 只有/ q/ 步/ 相关性/ ,/ 该/ q/ 值/ 就是/ 滑动/ 平均/ (/ MA/ )/ 模型/ 的/ 阶数/ ./ Page8/ 其次/ ,/ 我们/ 对/ 公交车/ 运行/ 时间/ 进行/ 偏相关/ 分析/ ,/ 偏相关/ 分析/ 用于/ 反映/ 在/ 剔除/ 了/ Tt/ +/ 1/ ,/ Tt/ +/ 2/ ,/ …/ ,/ Tt/ +/ k/ -/ 1/ 天/ 运行/ 时间/ 的/ 情况/ 下/ ,/ 间隔/ 为/ k/ 的/ 运行/ 时间/ Tt/ 和/ Tt/ +/ k/ 的/ 关系/ ./ 偏/ 相关系数/ φ/ kk/ 通过/ Yule/ -/ Walker/ 方程/ 求解/ ,/ 该/ 方程式/ 的/ 矩阵/ 表示/ 为/ 烄/ 烆/ 将/ k/ =/ 1/ ,/ 2/ ,/ 3/ ,/ …/ 代入/ 后/ 可以/ 解/ 出/ φ/ 11/ =/ ρ/ 1/ ,/ φ/ 22/ =/ ρ/ 2/ -/ ρ/ 2/ 若/ φ/ kk/ 在/ k/ >/ p/ 时/ 都/ 为/ 零/ ,/ 表明/ 该/ 公交车/ 运行/ 时间/ 序列/ 的/ 偏相关/ 函数/ 是/ p/ 步/ 截尾/ ,/ 此/ p/ 值/ 是/ 自/ 回归/ 模型/ (/ AR/ )/ 的/ 阶数/ ./ 由于/ 时间/ 序列/ 的/ 随机性/ ,/ 对/ ρ/ k/ 和/ φ/ kk/ 的/ 估计/ 可能/ 有/ 误差/ ,/ k/ >/ p/ 或/ k/ >/ q/ 时/ 可能/ 不全/ 为/ 零/ ,/ 而是/ 在/ 零/ 附近/ 波动/ ,/ 因此/ ρ/ k/ 和/ φ/ kk/ 的/ 截尾/ 性/ 需要/ 用/ 统计/ 方法/ 去/ 检验/ ./ 若/ ρ/ k/ 和/ φ/ kk/ 均/ 不/ 截尾/ ,/ 但/ 收敛/ 于/ 零/ 的/ 速度/ 较/ 快/ ,/ 那么/ 仍/ 可以/ 认为/ {/ Tt/ }/ 符合/ ARMA/ (/ p/ ,/ q/ )/ 模型/ ,/ 其中/ p/ 、/ q/ 的/ 值/ 可以/ 根据/ 相关系数/ 的/ 值/ 是否/ 超过/ 置信/ 边界/ 来/ 确定/ ./ 随后/ ,/ 我们/ 建立/ 如下/ 的/ 自/ 回归/ 滑动/ 平均/ 模型/ (/ ARMA/ )/ 预测/ 方程/ :/ 其中/ ,/ p/ 和/ q/ 分别/ 是/ 在/ 模型/ 识别/ 阶段/ 获得/ 的/ 自/ 回归/ 和/ 滑动/ 平均/ 模型/ 的/ 阶数/ ,/ α/ t/ ~/ N/ (/ 0/ ,/ δ/ 2/ )/ (/ i/ =/ 1/ ,/ 2/ ,/ …/ )/ 为白/ 噪声/ 序列/ ,/ φ/ i/ (/ i/ =/ 1/ ,/ 2/ ,/ …/ ,/ p/ )/ ,/ θ/ j/ (/ j/ =/ 1/ ,/ 2/ ,/ …/ ,/ q/ )/ 分别/ 是/ 自/ 回归系数/ 和/ 滑动/ 平均/ 系数/ ./ 我们/ 采用/ 矩/ 估计/ 法/ [/ 22/ ]/ 估计/ 方程/ 系数/ φ/ i/ (/ i/ =/ 1/ ,/ 2/ ,/ …/ ,/ p/ )/ ,/ θ/ j/ (/ j/ =/ 1/ ,/ 2/ ,/ …/ ,/ q/ )/ ./ 最后/ ,/ 对/ 建立/ 的/ 预测/ 方程/ 进行/ 检验/ ,/ 保证/ 预测/ 方程/ 的/ 估计值/ 和/ 测量/ 值/ 的/ 残差/ 序列/ α/ t/ =/ Tt/ -/ T/ ^/ t/ (/ t/ =/ 1/ ,/ 2/ ,/ …/ ,/ x/ )/ 为/ 随机/ 干扰/ 误差/ ,/ 即白/ 噪声/ 序列/ ./ 使用/ Ljung/ -/ BoxQ/ 统计/ 量/ 进行/ 检验/ ./ 这样/ ,/ 利用/ 上述/ 预测/ 方程/ 即可/ 获得/ 公交车/ 在/ 第/ t/ 天/ (/ t/ >/ x/ )/ 的/ 时间/ 区间/ y/ 内/ 通过/ 路段/ ei/ 所/ 需/ 的/ 运行/ 时间/ ./ 对/ 公交车/ 双休日/ 的/ 历史/ 运行/ 数据/ 也/ 按/ 上述/ 方法/ 做/ 相同/ 的/ 处理/ ,/ 也/ 可/ 预测/ 双休日/ 内/ 公交车/ 的/ 运行/ 时间/ ./ 4.3/ 预测/ 方法/ 的/ 验证/ 本节/ 用/ 实际/ 的/ 公交车/ GPS/ 轨迹/ 数据/ 来/ 验证/ 4.2/ 节/ 提出/ 的/ 公交车/ 运行/ 时间/ 预测/ 方法/ 的/ 可行性/ ./ 我们/ 将/ 2013/ 年/ 3/ 月/ 连续/ 4/ 周/ (/ 600/ ~/ 2200/ )/ 的/ 北京/ 公交车/ GPS/ 轨迹/ 数据/ 按/ 工作日/ 和/ 双休日/ 分为/ 两组/ ./ 令/ 北四环/ 主/ 路/ 北辰/ 西桥/ -/ 安慧桥/ 路段/ 为/ 路段/ e/ ,/ 我们/ 从/ 公交车/ GPS/ 轨迹/ 信息/ 中/ 提取/ 通过/ 路段/ e/ 的/ 时间/ ,/ 得到/ 相应/ 的/ 公交车/ 运行/ 时间/ 序列/ ,/ 然后/ 采用/ 时间/ 序列/ 分析方法/ ,/ 用前/ 三周/ 工作日/ 早/ 高峰/ [/ 800/ ~/ 820/ ]/ 的/ 通行/ 时间/ 数据/ 预测/ 最后/ 一周/ 公交车/ 通过/ 路段/ e/ 的/ 时间/ ./ 首先/ ,/ 对/ 公交车/ 运行/ 时间/ 序列/ 进行/ 自/ 相关/ 分析/ 和/ 偏相关/ 分析/ ./ 从图/ 9/ 可以/ 看到/ ,/ 自/ 相关系数/ 在/ 拖/ 尾/ 2/ 阶时/ ,/ 超出/ 了/ 置信/ 边界/ ,/ 且/ 自/ 相关/ 值/ 在/ 拖/ 尾/ 2/ 阶/ 之后/ 逐渐/ 趋近/ 于/ 0/ ./ 从图/ 10/ 中/ 可以/ 看到/ ,/ 在/ 拖/ 尾/ 2/ 阶后/ 偏相关/ 值均/ 小于/ 显著/ 边界/ ./ 因此/ ,/ 路段/ e/ 上/ 的/ 公交车/ 运行/ 时间/ 序列/ 应/ 遵循/ ARMA/ (/ 2/ ,/ 2/ )/ 模型/ ./ 然后/ ,/ 我们/ 根据/ 矩/ 估计/ 法/ 确定/ 了/ 预测/ 方程/ 的/ 参数/ ,/ 并/ 预测/ 了/ 5/ 步/ (/ 即/ 第/ 4/ 周/ 5/ 个/ 工作日/ 早/ 高峰/ 的/ 运/ Page9/ 行/ 时间/ )/ ,/ 结果/ 如图/ 11/ 所示/ ./ 图/ 11/ 所示/ 的/ 预测/ 的/ 运行/ 时间/ 与/ 真实/ 的/ 通行/ 时间/ 之间/ 的/ 残差/ 序列/ 通过/ 了/ Ljung/ -/ BoxQ/ 检验/ ./ 接着/ ,/ 为了/ 预测/ 一天/ 不同/ 时段/ 公交车/ 通过/ 路段/ e/ 所/ 需/ 的/ 时间/ ,/ 我们/ 为/ 每个/ 时间/ 区间/ 都/ 建立/ 了/ 预测/ 方程/ (/ 共/ 48/ 个/ )/ ,/ 并/ 让/ 每个/ 预测/ 方程/ 执行/ 一步/ 预测/ ,/ 得到/ 工作日/ 各个/ 时段/ (/ 600/ ~/ 2200/ )/ 公交车/ 运行/ 时间/ 的/ 预测值/ (/ 如图/ 12/ 所示/ )/ 和/ 双休日/ 各个/ 时段/ 运行/ 时间/ 的/ 预测值/ (/ 如图/ 13/ 所示/ )/ ./ 图/ 12/ 工作日/ 采样/ 路段/ 公交车/ 通行/ 时间/ 预测/ 图/ 13/ 双休日/ 采样/ 路段/ 公交车/ 通行/ 时间/ 预测/ 公交车/ 运行/ 时间/ 预测/ 精度/ 估计/ 采用/ 平均/ 绝对误差/ MAE/ (/ MeanAbsoluteError/ )/ 、/ 平均/ 绝对/ 百分/ 误差/ MAPE/ (/ MeanAbsolutePercentageError/ )/ 和/ 均/ 方根/ 误差/ RMSE/ (/ Root/ -/ Mean/ -/ SquareError/ )/ ./ 它们/ 的/ 计算公式/ 如式/ (/ 4/ )/ ~/ (/ 6/ )/ 所示/ :/ 其中/ ,/ N/ 是/ 将/ 一天/ 从/ 早晨/ 6/ 点到/ 晚上/ 22/ 点以/ 20/ 分钟/ 为/ 单位/ 划分/ 所得/ 的/ 数目/ ,/ ti/ 是/ 第/ i/ 个/ 时段/ 内/ 运行/ 时间/ 的/ 真实/ 值/ ,/ t/ ^/ i/ 是/ 第/ i/ 个/ 时段/ 内/ 运行/ 时间/ 的/ 预测值/ ./ 从图/ 11/ 的/ 数据/ 可知/ ,/ 工作日/ 高峰/ 时段/ 公交车/ 通过/ 路段/ e/ 的/ 预测/ 运行/ 时间/ 与/ 真实/ 的/ 通行/ 时间/ 之间/ 的/ 平均/ 绝对/ 百分/ 误差/ 为/ 9.5/ %/ ./ 而表/ 2/ 列出/ 了/ 对/ 工作日/ 与/ 双休日/ 预测/ 的/ 精度/ 估计值/ ,/ 其中/ ,/ 双休日/ 的/ 预测/ 平均/ 绝对/ 百分/ 误差/ 为/ 8.02/ %/ ,/ 工作日/ 的/ 平均/ 绝对/ 百分/ 误差/ 为/ 10.42/ %/ ,/ 该/ 精度/ 优于/ 基于/ 实时/ GPS/ 的/ 方法/ [/ 16/ ]/ ,/ 与/ 文献/ [/ 18/ ]/ 有/ 类似/ 的/ 预测/ 精度/ ,/ 但/ 算法/ 复杂度/ 远/ 小于/ 文献/ [/ 18/ ]/ ./ 工作日/ 19.81/ 双休日/ 13.564/ ./ 4/ 车辆/ 相遇/ 概率/ 估计/ 通过/ 对/ 不同/ 公交线路/ 上/ 的/ 公交车/ 历史/ 相遇/ 情况/ 的/ 统计/ (/ 见/ 3.2/ 节/ )/ ,/ 我们/ 发现/ 公交线路/ 在/ 路段/ 上/ 的/ 相遇/ 每周/ 呈现/ 相似/ 的/ 变化趋势/ ,/ 因此/ 我们/ 采用/ 拟合/ 历史/ 平均/ 相遇/ 概率/ 来/ 反映/ 公交车/ 相遇/ 概率/ 的/ 变化趋势/ ./ 为了/ 估计/ t/ 时刻/ 公交线路/ A/ 与/ 公交线路/ B/ 在/ 路段/ e/ 的/ 相遇/ 概率/ P/ ,/ 我们/ 用式/ (/ 7/ )/ 计算/ 时间/ 区间/ ti/ (/ i/ ∈/ n/ ,/ n/ 为/ 时间/ 区间/ 的/ 数目/ )/ 的/ 平均/ 相遇/ 概率/ Pi/ (/ Ae/ ,/ Be/ )/ :/ 其中/ ,/ fd/ ,/ ti/ (/ Ae/ ,/ Be/ )/ 是/ 在/ 第/ d/ 天/ 时间/ 区间/ ti/ 内/ ,/ 公交线路/ A/ 的/ 公交车/ 和/ B/ 的/ 公交车/ 在/ 路段/ e/ 上/ 的/ 相遇/ 次数/ ,/ D/ 代表/ 进行/ 数据/ 统计/ 的/ 所有/ 日期/ ,/ Q/ 代表/ 在/ D/ 内/ ,/ 公交线路/ A/ 的/ 公交车/ 通过/ 路段/ e/ 的/ 总/ 次数/ ./ 这/ Page10/ 样/ 我们/ 可以/ 获得/ 历史/ 上/ 不同/ 时间/ 区间/ (/ 即/ t1/ ,/ t2/ ,/ …/ ,/ tn/ )/ 的/ 平均/ 相遇/ 概率/ Pt1/ ,/ Pt2/ ,/ …/ ,/ Ptn/ ./ 遇/ 概率/ P/ :/ 然后/ ,/ 用/ 多项式/ 拟合/ 两/ 公交线路/ 在/ 时刻/ t/ 的/ 相/ P/ (/ t/ )/ =/ μ/ 0/ +/ μ/ 1t/ +/ μ/ 2t2/ +/ μ/ 3t3/ +/ …/ +/ μ/ mtm/ (/ 8/ )/ 其中/ m/ 代表/ 多项式/ 的/ 次数/ ./ 我们/ 利用/ 最小/ 二/ 乘法/ 确定/ 系数/ μ/ ./ 这里/ 给出/ 一个/ 拟合/ 3.2/ 节/ 历史/ 平均/ 相遇/ 概率/ 的/ 实例/ ,/ 取/ m/ =/ 4/ ,/ 式/ (/ 9/ )/ 为/ 拟合/ 得到/ 的/ 相遇/ 概率/ 多项式/ ,/ 其中/ 的/ 参数值/ 是/ 利用/ 最小/ 二/ 乘法/ 来/ 确定/ 的/ ,/ 拟合/ 曲线/ 如图/ 14/ 所示/ ./ P/ (/ t/ )/ =/ -/ 0.00012/ t4/ +/ 0.00713/ t3/ -/ 0.15304/ t2/ +/ 5Vela/ 路由/ 机制/ 为了/ 基于/ 公交车/ 进行/ 数据/ 传递/ ,/ 公交车/ 间/ 通过/ 心跳/ 消息/ 相互/ 感知/ ./ 公交车/ 会/ 周期性地/ 向/ 一/ 跳/ 通信/ 范围/ 内/ 的/ 邻居/ 节点/ 广播/ 自己/ 的/ 心跳/ 消息/ ,/ 心跳/ 消息/ 中/ 包含/ 发送者/ 节点/ 的/ 标识/ 以及/ 位置/ 等/ 信息/ ./ 心跳/ 周期/ 为/ 心跳/ 消息/ 发送/ 的/ 时间/ 间隔/ ./ 如果/ 公交车/ 连续/ 两个/ 心跳/ 周期/ 未/ 收到/ 相应/ 节点/ 的/ 心跳/ 消息/ ,/ 则/ 认为/ 该/ 节点/ 已经/ 不/ 在/ 自己/ 一跳/ 通信/ 范围/ 内/ ,/ 即/ 不再/ 是/ 自己/ 的/ 邻居/ 节点/ ,/ 此时/ 它会/ 将/ 该/ 节点/ 从/ 心跳/ 消息/ 列表/ 中/ 删除/ ,/ 否则/ 会/ 更新/ 相应/ 节点/ 的/ 时间/ 戳/ ./ 某/ 路段/ 上/ 的/ 公交车/ 作为/ 发起/ 数据/ 传递/ 的/ 节点/ Vsource/ ,/ 为了/ 将/ 数据/ 传递/ 到/ 目的/ 路段/ ,/ 按/ 下面/ 的/ 流程/ 决策/ 路由/ 路径/ 并/ 进行/ 数据/ 传递/ ./ 首先/ ,/ 该/ 公交车/ 根据/ 公交/ 路网/ 和/ 已有/ 的/ 公交车/ 运行/ 轨迹/ 数据/ 构造/ 概率/ 时空图/ ./ 其次/ ,/ 根据/ 概率/ 时空图/ 中边/ 的/ 权重/ ,/ 以/ 自身/ 为/ 起点/ ,/ 按/ 如下/ 步骤/ 计算/ 到达/ 目的/ 路段/ 的/ 最优/ 路线/ ./ 第/ 1/ 步/ ./ 根据/ 目的/ 路段/ 的/ 位置/ ,/ 定位/ 能/ 到达/ 目的/ 路段/ 的/ 公交线路/ 集合/ ,/ 从而/ 确定/ 经过/ 目的/ 路段/ 的/ 公交线路/ 节点/ ,/ 这些/ 节点/ 集合/ 记为/ goalSet/ ./ 第/ 2/ 步/ ./ 计算/ Vsource/ 到/ goalSet/ 中/ 所有/ 节点/ 的/ 前/ k/ 个/ 延迟/ 最短/ 路径/ :/ 对于/ goalSet/ 中/ 的/ 每个/ 节点/ Vdest/ ,/ 利用/ Dijkstra/ 算法/ 计算/ 在/ 概率/ 时空图/ 中/ Vsource/ 到/ Vdest/ 的/ 最/ 短/ 路径/ ,/ 并/ 存入/ 前/ k/ 路径/ 集合/ ./ 将/ Vsource/ 节点/ 进一步/ 扩展/ ,/ 以/ 与/ Vsource/ 相连/ 的/ 节点/ 集/ 为/ 起点/ ,/ 求解/ 它们/ 到/ Vdest/ 的/ 最/ 短/ 路径/ ,/ 这些/ 路径/ 在/ 各自/ 加上/ 各个/ 节点/ 到/ Vsource/ 这/ 一段/ 后/ ,/ 存入/ 前/ k/ 路径/ 集合/ ./ 将/ 扩展/ 的/ 节点/ 再次/ 作为/ 起点/ ,/ 并/ 从/ 这些/ 节点/ 继续/ 向外/ 扩展/ ,/ 求解/ 到达/ Vdest/ 的/ 最/ 短/ 路径/ ,/ 均/ 记录/ 到/ 前/ k/ 路径/ 集合/ 中/ ./ 该/ 扩展/ 过程/ 一直/ 进行/ ,/ 直到/ 路径/ 集合/ 中有/ 了/ k/ 条/ 到达/ Vdest/ 的/ 路径/ ./ 第/ 3/ 步/ ./ 评估/ 这/ k/ 条/ 路径/ 数据/ 传递/ 的/ 可靠性/ :/ 用/ 路径/ 中/ 路段/ 的/ 数据/ 传递/ 概率/ 的/ 最小值/ 作为/ 该/ 路径/ 可靠性/ 的/ 度量/ ./ 将/ 前/ k/ 条/ 线路/ 按照/ 其/ 可靠性/ 度量/ 排序/ ,/ 选择/ 可靠性/ 最高/ 的/ 路线/ ,/ 作为/ 数据/ 传递/ 的/ 线路/ ./ 然后/ ,/ Vsource/ 节点/ 按照/ 选定/ 的/ 满足/ 延迟/ 要求/ 的/ 、/ 可靠性/ 最高/ 的/ 线路/ 传递数据/ ./ 若/ 在/ 指定/ 路段/ ,/ 按照/ 设定/ 路径/ ,/ 数据/ 应该/ 从/ 公交线路/ A/ 转移/ 到/ 另/ 一条/ 公交线路/ B/ ,/ 但/ 在/ 实际/ 运行/ 时/ ,/ 公交车/ 在/ 该/ 路段/ 上/ 可能/ 遇不到/ 公交线路/ B/ 的/ 车辆/ ./ 当/ A/ 线路/ 上/ 的/ 车辆/ 检测/ 到/ 数据/ 未/ 在/ 预先/ 设定/ 的/ 数据/ 传递/ 线路/ 中/ 时/ ,/ 它/ 将/ 以/ 自己/ 为源/ 节点/ ,/ 重新/ 计算/ 路径/ ,/ 将/ 数据/ 以新/ 的/ 路径/ 传递/ 到/ 目的/ 路段/ 位置/ ./ 在/ 进行/ 数据/ 传递/ 时/ ,/ 公交车/ 采用/ 消息/ 确认/ 机制/ ,/ 即/ 接收/ 到/ 数据包/ 的/ 一方/ 会/ 向/ 发送/ 方/ 发送/ 确认/ 消息/ ,/ 发送/ 方在/ 收到/ 确认/ 消息/ 后/ 才/ 将/ 该/ 数据包/ 删除/ ,/ 否则/ 该/ 数据包/ 会/ 继续/ 保持/ 在/ 发送/ 队列/ 中/ ./ 数据/ 传递/ 的/ 路径/ 决策/ 算法/ 的/ 伪/ 代码/ 如下/ ./ 算法/ 1/ ./ Bus/ -/ basedDataDeliveryMechanism/ ./ // // Vsourcedenotesabusnodethatinitiatesadatadeliveryrequest/ // // goalSetdenotesasetofnodesthatpassthedestina/ -/ tionroadsegment1/ ./ BEGIN2/ ./ ObtainG/ (/ V/ ,/ E/ )/ accordingtotheroadmapand3/ ./ CalculateP/ ,/ Tandconstructtheprobabilistic4/ ./ shortestPathSet/ ←/ getTopkPath/ (/ Vsource/ ,/ goalSet/ )/ Page115/ ./ path/ ←/ sortshortPathSetwithP6/ ./ returnpath7/ ./ ENDgetTopkPath/ (/ Vsource/ ,/ goalSet/ )/ 1/ ./ BEGIN2/ ./ FORVdestINgoalSet3/ ./ Dijkstra/ (/ Vsource/ ,/ Vdest/ )/ 4/ ./ queue/ ./ push/ (/ Vsource/ )/ 5/ ./ WHILEqueue/ !/ =/ NULLDO6/ ./ curNode/ =/ peekthefirstelementfromthe7/ ./ IFcurNodepathreachestoVdest8/ ./ shortestPathSetaddcurNodepath9/ ./ IFshortestPathSet/ ./ size/ (/ )/ =/ k10/ ./ RETURNshortestPathSet11/ ./ END12/ ./ END13/ ./ nbrNodes/ ←/ curNode/ ’/ sneighbornodes14/ ./ CalculatenbrNodespathtoVdest15/ ./ queue/ ./ push/ (/ nbrNodes/ )/ 16/ ./ END17/ ./ END18/ ./ END6/ 实验/ 评估/ 本/ 节/ 通过/ 模拟实验/ 评估/ Vela/ 机制/ 的/ 性能/ 和/ 可伸缩性/ ,/ 采用/ 的/ 度量/ 指标/ 为/ 数据/ 传递/ 到达/ 率/ 和/ 数据/ 传递/ 延迟/ ,/ 前者/ 是/ 指/ 在/ 规定/ 的/ 时间/ 内/ 目的/ 车辆/ 在/ 指定/ 路段/ 收到/ 的/ 消息/ 数/ 与/ 发起/ 数据/ 传递/ 的/ 车辆/ 发出/ 的/ 消息/ 数/ 的/ 比率/ ,/ 后者/ 是/ 指/ 数据/ 从源/ 车辆/ 发出/ 到/ 被/ 传递/ 到/ 目的/ 路段/ 所/ 经历/ 的/ 时间/ ./ 我们/ 选择/ R2R/ [/ 14/ ]/ 作为/ 对比/ 的/ 路由/ 机制/ ./ R2R/ 是/ 一种/ 基于/ 公交车/ 线路/ 的/ 路由/ 机制/ ,/ 它/ 基于/ 公交车/ 线路/ 相遇/ 频率/ 进行/ 数据/ 传递/ ./ 考虑/ 到/ BLER/ [/ 13/ ]/ 和/ R2R/ 是/ 同类/ 机制/ 中/ 的/ 典型/ 代表/ ,/ 而/ R2R/ 的/ 性能/ 又/ 优于/ BLER/ ,/ 故/ 模拟实验/ 将/ 把/ Vela/ 与/ R2R/ 进行/ 比较/ ./ 6.1/ 实验/ 搭建/ 我们/ 采用/ NS/ -/ 3/ ①/ 作为/ 模拟实验/ 平台/ ,/ 基于/ 北京市/ 海淀区/ 的/ 真实/ 地图/ (/ 如图/ 15/ 所示/ )/ 分别/ 以/ 公交车/ 真实/ 轨迹/ 和/ 模拟/ 轨迹/ 为/ 输入/ 设计/ 了/ 两组/ 实验/ ./ 在/ 第/ 1/ 组/ 实验/ 中/ ,/ 我们/ 选取/ 了/ 海淀区/ 一块/ 4000m/ ×/ 5000m/ 的/ 区域/ ,/ 该/ 区域/ 内有/ 双向/ 行驶/ 的/ 944/ 路/ 、/ 939/ 路/ 、/ 881/ 路/ 3/ 条/ 公交线路/ ./ 在/ 实验/ 开始/ 前/ ,/ 我们/ 提取/ 了/ 该/ 区域/ 在/ 2013/ 年/ 3/ 月/ 29/ 日/ 1030/ 到/ 1200/ 这/ 一个半/ 小时/ 内/ 上述/ 3/ 条/ 公交线路/ 上/ 运行/ 的/ 所有/ 35/ 辆/ 公交车/ 的/ 轨迹/ 数据/ ./ 将/ 这些/ 公交车/ 每/ 20s/ 报告/ 一次/ 的/ 轨迹/ 信息/ 用/ 插值/ 方法/ 转化成/ NS/ -/ 3/ 中/ 记录/ 每秒钟/ 车辆/ GPS/ 位置/ 的/ tcl/ 轨迹/ 文件/ ,/ 然后/ 采用/ 第/ 4.2/ 节/ 的/ 时间/ 序列/ 分析方法/ ,/ 预测/ 该/ 区域/ 路段/ 的/ 运行/ 时间/ ,/ 并用/ 4.4/ 节/ 的/ 方法/ 估计/ 了/ 车辆/ 间/ 的/ 相遇/ 概率/ ./ 实验/ 开始/ 后/ ,/ 3/ 条/ 公交线路/ 按照/ 真实/ GPS/ 轨迹/ 信息/ 运行/ ,/ 公交车/ 也/ 按照/ 真实/ 的/ 进入/ 时刻/ 进入/ 实验/ 区域/ ,/ 所有/ 公交车/ 都/ 每隔/ 1s/ 产生/ 一条/ 消息/ ,/ 该/ 消息/ 以/ 随机/ 方式/ 选取/ 公交车/ 运行/ 经过/ 的/ 道路/ 为/ 数据/ 传递/ 的/ 目的/ 路段/ ./ 实验/ 持续时间/ 为/ 5300s/ ,/ 在/ 整个/ 实验/ 过程/ 中/ ,/ 车辆/ 发送/ 消息/ 总量/ 为/ 3500/ 条/ ./ 实验/ 观察/ 了/ 数据/ 传递/ 的/ 到达/ 率/ 和/ 延迟/ 随/ 时间/ 的/ 变化/ ./ 该/ 实验/ 用于/ 评估/ Vela/ 进行/ 数据/ 传递/ 的/ 性能/ ./ 在/ 第/ 2/ 组/ 实验/ 中/ ,/ 我们/ 选取/ 了/ 海淀区/ 一块/ 4000m/ ×/ 8000m/ 的/ 区域/ ,/ 该/ 区域/ 内/ 的/ 道路/ 总长度/ 为/ 145km/ ,/ 包含/ 了/ 58/ 个/ 十字路口/ 和/ 86/ 条/ 双向/ 车道/ ./ 在/ 实验/ 开始/ 前/ ,/ 采用/ 开源/ 的/ 城市交通/ 模拟/ 工具/ SUMO/ [/ 23/ ]/ 生成/ 了/ 公交车/ 轨迹/ tcl/ 文件/ 以及/ 15/ 条/ 公交线路/ 轨迹/ (/ 如图/ 16/ 所示/ )/ ,/ 其中/ ,/ 公交车/ 的/ 运动/ 模型/ 采用/ 了/ 能/ 反映/ 城市/ 场景/ 车辆/ 运动/ 特征/ 的/ 智能/ 驾驶员/ 模型/ ,/ 每条/ 道路/ 上/ 模拟/ 了/ 公交车/ 停靠/ 车站/ ,/ 站台/ 停靠/ 时间/ 为/ 30s/ 到/ 80s/ 之间/ 的/ 随机/ 值/ ./ 所有/ 车辆/ 根据/ 指定/ 的/ 公交车/ 线路/ 行驶/ ./ 实验/ 开始/ 后/ ,/ 每隔/ 200s/ 为/ 每条/ 公交线路/ 增加/ 1/ 辆/ 进入/ 实验/ 区域/ 的/ 公交车/ ,/ 所有/ 公交车/ 每隔/ 1s/ 产生/ 一条/ 消息/ ,/ 该/ 消息/ 以/ 随机/ 方式/ 选取/ 公交车/ 经过/ 的/ 道路/ 为/ 数据/ 传递/ 的/ 目的/ 路段/ ./ 实验/ 持续时间/ 为/ 4000s/ ,/ 车辆/ 发送/ 消息/ 总量/ 为/ 3000/ 条/ ./ 实验/ 观察/ 了/ 公交车/ 线路/ 数量/ 的/ 变化/ 对/ 性能指标/ 的/ 影响/ ./ 该/ 实验/ 用于/ 评估/ Vela/ 数据/ 传递/ 机制/ 的/ 可伸缩性/ ./ ①/ NS/ -/ 3tutorial/ ./ http/ :/ // // www/ ./ nsnam/ ./ org/ // ns/ -/ 3/ -/ 19/ // docu/ -/ Page12/ 表/ 3/ 汇总/ 了/ 第/ 2/ 组/ 实验/ 所用/ 到/ 的/ 参数/ ./ 图/ 16/ 基于/ 真实/ 地图/ 的/ 15/ 条/ 模拟/ 的/ 公交线路/ 6.2/ 实验/ 结果/ 与/ 分析/ 第/ 1/ 组/ 实验/ 观察/ 了/ Vela/ 和/ R2R/ 两种/ 策略/ 随着/ 运行/ 时间/ 的/ 增加/ (/ 从/ 3500s/ 到/ 5300s/ 的/ 过程/ 中/ )/ 性能指标/ 的/ 变化/ ./ 图/ 17/ 显示/ 了/ 两种/ 策略/ 的/ 数据/ 到达/ 率/ ,/ 实验/ 在/ 运行/ 到/ 5300s/ 时/ ,/ Vela/ 机制/ 的/ 数据/ 到达/ 率/ 已/ 达到/ 91.3/ %/ ,/ 而/ R2R/ 的/ 数据/ 到达/ 率仅/ 是/ 72.3/ %/ ./ 从图/ 17/ 可以/ 看到/ ,/ 两种/ 机制/ 在/ 数据/ 到达/ 率上/ 始终/ 有/ 较大/ 的/ 差距/ ,/ 这/ 说明/ 基于/ 路段/ 的/ 相遇/ 规律/ 和/ 延迟/ 估计/ 更为/ 准确/ ./ 图/ 18/ 显示/ 了/ 两种/ 策略/ 的/ 数据/ 延迟/ ,/ 可以/ 看到/ Vela/ 机制/ 的/ 延迟/ 始终/ 低于/ R2R/ 机制/ ,/ 这/ 说明/ Vela/ 机制/ 达到/ 了/ 其/ 原定/ 的/ 减少/ 延迟/ 的/ 目标/ ,/ 而/ R2R/ 机制/ 数据/ 传递/ 延迟/ 较长/ ,/ 可能/ 的/ 原因/ 来自/ 以下/ 3/ 方面/ :/ (/ 1/ )/ 数据/ 传递/ 以/ 线路/ 间/ 高/ 相遇/ 频率/ 为/ 依据/ ,/ 这种/ 方式/ 可以/ 增加/ 数据/ 传递/ 的/ 可靠性/ ,/ 但是/ 由于/ 没有/ 考虑/ 数据/ 传递/ 的/ 延迟/ ,/ 所以/ 数据/ 可能/ 被/ 携带/ 到/ 距离/ 目的/ 路段/ 更远/ 的/ 线路/ 上/ ;/ (/ 2/ )/ 数据/ 发起/ 车辆/ 可能/ 需要/ 携带/ 数据/ 前行/ 较长时间/ 才/ 与/ 频繁/ 相遇/ 的/ 公交线路/ 进行/ 数据/ 传递/ ,/ 有/ 可能/ 错失/ 了/ 很多/ 数据/ 传递/ 机会/ ;/ (/ 3/ )/ 与/ Vela/ 将/ 数据/ 直接/ 路由/ 到/ 目的/ 路段/ 不同/ ,/ R2R/ 机制/ 将/ 数据/ 传递/ 到/ 目的/ 线路/ 的/ 公交车/ 之后/ ,/ 目的/ 线路/ 的/ 公交车/ 可能/ 需要/ 携带/ 数据/ 向/ 其/ 反向/ 行驶/ 车辆/ 传递数据/ 并/ 携带/ 到/ 目的/ 路段/ ,/ 这/ 无疑/ 会/ 增加/ 数据/ 传递/ 的/ 延迟/ ./ 第/ 2/ 组/ 实验/ 观察/ 公交车/ 线路/ 数量/ 对/ 两种/ 数据/ 传递/ 机制/ 的/ 影响/ ./ 实验/ 中/ ,/ 公交车/ 线路/ 数量/ 从/ 5/ 条/ 增加/ Page13/ 到/ 15/ 条/ ,/ 实验/ 运行/ 时间/ 为/ 4000s/ ./ 图/ 19/ 显示/ 了/ 在/ 不同/ 公交线路/ 数下/ 的/ 数据/ 传递/ 到达/ 率/ ./ 可以/ 看到/ ,/ 随着/ 公交车/ 线路/ 数/ 的/ 增加/ ,/ Vela/ 数据/ 传递/ 到达/ 率/ 从/ 80.5/ %/ 增长/ 到/ 了/ 91.1/ %/ ./ 这/ 说明/ 对于/ Vela/ 策略/ ,/ 线路/ 数/ 的/ 增加/ 有效/ 提高/ 了/ 数据/ 传递/ 到达/ 率/ ./ 图/ 20/ 显示/ 了/ 不同/ 公交线路/ 数下/ 的/ 数据/ 传递/ 延迟/ ./ 从图/ 上/ 可以/ 看到/ 随着/ 线路/ 数量/ 的/ 增加/ ,/ Vela/ 的/ 数据/ 传递/ 延迟/ 一直/ 在/ 下降/ ./ 实验/ 结果表明/ 基于/ Vela/ 的/ 数据/ 传递/ 具有/ 较/ 好/ 的/ 可伸缩性/ ./ 这是/ 由于/ Vela/ 是/ 以/ 数据/ 传递/ 的/ 延迟/ 和/ 可靠性/ 为/ 指标/ 从/ 多条/ 备选/ 路径/ 中/ 遴选/ 路径/ ,/ 而/ 公交线路/ 的/ 增加/ 为/ 数据/ 传递/ 增加/ 了/ 更/ 多/ 的/ 备选/ 路径/ ,/ 从而/ 增加/ 了/ Vela/ 选到/ 低/ 延迟/ 、/ 高可达/ 路径/ 的/ 可能性/ ./ 在/ 图/ 19/ 和/ 图/ 20/ 中/ ,/ 公交线路/ 的/ 增加/ 起初/ 对/ R2R/ 的/ 性能/ 影响/ 并/ 不/ 明显/ ,/ 这/ 是因为/ R2R/ 的/ 选路/ 指标/ 并/ 不/ 与/ 数据/ 传递/ 的/ 性能/ 直接/ 相关/ ./ 但/ 随着/ 线路/ 数量/ 的/ 不断/ 增加/ ,/ R2R/ 的/ 性能/ 在/ 逐渐/ 下降/ ,/ 这是/ 由于/ 面对/ 更/ 多/ 的/ 备选/ 线路/ ,/ R2R/ 倾向/ 于/ 选择/ 具有/ 更高/ 相遇/ 概率/ 的/ 路径/ ,/ 而/ 在/ 这样/ 的/ 路径/ 上/ 传递数据/ ,/ 其/ 数据/ 延迟/ 未必/ 会/ 比/ 备选/ 线路/ 未/ 增加/ 时/ 缩短/ ./ 换言之/ ,/ R2R/ 机制/ 不/ 具有/ 可伸缩性/ 特征/ ./ 7/ 结论/ 考虑/ 到/ 公交车/ 网络/ 的/ 特点/ ,/ 本文/ 认为/ 公交车/ 网络/ 数据/ 传递/ 机制/ 的/ 有效性/ 与/ 挖掘/ 公交车/ 运行/ 时空/ 规律/ 的/ 准确性/ 关系密切/ ./ 为此/ ,/ 本文/ 对/ 实际/ 的/ 公交车/ 轨迹/ 进行/ 了/ 分析/ ,/ 建立/ 了/ 公交车/ 运行/ 时间/ 预测/ 的/ ARMA/ 模型/ ,/ 从而/ 获得/ 公交车/ 运行/ 的/ 时间/ 特性/ ;/ 同时/ ,/ 基于/ 实际/ 的/ 公交车/ 相遇/ 记录/ 发现/ 公交车/ 之间/ 潜在/ 的/ 空间/ 特性/ ,/ 并用/ 多项式/ 拟合/ 车辆/ 相遇/ 概率/ 曲线/ ,/ 从而/ 获得/ 对/ 公交车/ 相遇/ 概率/ 的/ 估计/ ./ 在/ 挖掘/ 公交车/ 轨迹/ 时空/ 规则/ 的/ 基础/ 上/ ,/ 本文/ 建立/ 了/ 公交车/ 数据/ 传递/ 的/ 概率/ 时空/ 模型/ ,/ 并/ 给出/ 了/ 一种/ 实现/ 数据/ 传递/ 的/ 路由/ 机制/ Vela/ ,/ 该/ 机制/ 在/ 可容忍/ 的/ 数据/ 传递/ 延迟/ 基础/ 上/ 选择/ 可靠性/ 最高/ 的/ 路径/ 进行/ 传递/ ./ 为了/ 验证/ 所提/ 的/ Vela/ 机制/ 的/ 有效性/ ,/ 本文/ 基于/ 真实/ 轨迹/ 和/ 模拟/ 轨迹/ 进行/ 了/ 大量/ 的/ 实验/ ,/ 实验/ 结果表明/ 与/ 已有/ 的/ R2R/ 机制/ 相比/ ,/ Vela/ 机制/ 具有/ 较/ 高/ 的/ 数据/ 到达/ 率/ 、/ 较/ 低/ 的/ 数据/ 传递/ 延迟/ 和/ 较/ 好/ 的/ 可伸缩性/ ./ 

