Page1/ 一种/ 工作/ 流/ 环境/ 下/ 能耗/ 感知/ 的/ 多路径/ 服务/ 组合/ 方法/ 朱勇/ 1/ )/ ,/ 2/ )/ 罗军舟/ 1/ )/ 李伟/ 1/ )/ 1/ )/ (/ 东南大学/ 计算机科学/ 与/ 工程学院/ 南京/ 211189/ )/ 2/ )/ (/ 南京/ 陆军/ 指挥/ 学院/ 教育/ 技术/ 中心/ 南京/ 210045/ )/ 摘要/ 当前/ ,/ 服务/ 组合/ 方法/ 只/ 考虑/ 组合/ 服务/ QoS/ 的/ 优化/ 而/ 不/ 考虑/ 组合/ 服务/ 的/ 能耗/ 优化/ ./ 针对/ 这一/ 问题/ ,/ 文中/ 首先/ 根据/ 不同/ 情况/ 提出/ 了/ 两种/ 服务/ 能耗/ 模型/ ;/ 其次/ 在/ 基于/ 工作/ 流/ 的/ 服务/ 组合/ 环境/ 下/ ,/ 提出/ 了/ 一种/ 能耗/ 感知/ 的/ 多路径/ 服务/ 组合/ 方法/ EAMSC/ ./ 该/ 方法/ 对/ 服务/ 组合/ 的/ 能耗/ 优化/ 问题/ 进行/ 了/ 数学/ 建模/ ,/ 并/ 提出/ 了/ 一种/ 基于/ 启发式/ 的/ 多路径/ 服务/ 组合/ 算法/ ,/ 该/ 算法/ 包括/ 两个/ 部分/ :/ 一是/ 组合/ 服务/ 的/ 可行/ 路径/ 查找/ ,/ 即/ 在/ 满足/ 端到/ 端/ QoS/ 约束/ 的/ 前提/ 下/ 找出/ 若干条/ 可行/ 的/ 服务/ 组合/ 路径/ ;/ 二是/ 请求/ 速率/ 的/ 分配/ ,/ 即/ 在/ 可行/ 的/ 服务/ 组合/ 路径/ 上/ 依据/ 服务/ 能耗/ 模型/ 分配/ 请求/ 流量/ 以/ 降低/ 组合/ 服务/ 的/ 总体/ 能耗/ ./ 最后/ ,/ 仿真/ 实验/ 结果表明/ :/ 能耗/ 感知/ 的/ 多路径/ 服务/ 组合/ 方法/ 与/ 传统/ 的/ 服务/ 组合/ 方法/ 相比/ ,/ 能够/ 在/ 保证/ 端到/ 端/ QoS/ 约束/ 的/ 基础/ 上/ 有效/ 地/ 减少/ 组合/ 服务/ 的/ 总/ 能耗/ ./ 关键词/ 服务/ 能耗/ 模型/ ;/ 能耗/ 感知/ 的/ 服务/ 组合/ ;/ 多路径/ 服务/ 组合/ ;/ 基于/ 工作/ 流/ 的/ 服务/ 组合/ ;/ 服务/ 负载/ ;/ 绿色/ 计算/ 1/ 引言/ 途径/ ./ 不同/ 服务提供商/ 发布/ 了/ 大量/ 的/ 服务/ ,/ 通过/ 组合/ 这些/ 服务/ 可以/ 构造/ 更加/ 复杂/ 的/ 网络应用/ ,/ 满足/ 网络/ 用户/ 多样化/ 的/ 需求/ ./ 例如/ ,/ 当/ 用户/ 计划/ 出门/ 旅行/ 时/ ,/ 面向/ 服务/ 的/ 计算/ 已经/ 成为/ 构建/ 网络应用/ 的/ 重要/ 需要/ 获取/ 相关/ 的/ 服务/ ,/ 如/ 查询/ 天气/ 、/ 预订/ 机票/ 、/ 预订/ Page2/ 酒店/ 以及/ 行程/ 规划/ 等/ ./ 在/ 实际/ 情况/ 下/ ,/ 这些/ 服务/ 可能/ 隶属于/ 不同/ 的/ 服务提供者/ ,/ 并且/ 存在/ 着/ 大量/ 提供/ 相同/ 或/ 相似/ 功能/ 的/ 服务/ ./ 服务/ 组合/ 通过/ 选择/ 和/ 聚合/ 合适/ 的/ 服务/ ,/ 并/ 使/ 之/ 协同工作/ 以/ 满足用户/ 的/ 需求/ ./ 在/ 服务/ 计算/ 领域/ 内/ 服务/ 组合/ 已/ 成为/ 重要/ 的/ 研究/ 方向/ 和/ 研究/ 热点/ [/ 1/ ]/ ./ 根据/ 文献/ [/ 2/ ]/ 的/ 观点/ ,/ 服务/ 组合/ 可以/ 分为/ 3/ 类/ :/ 第/ 1/ 类/ 是/ 基于/ AI/ (/ ArtificialPlanning/ )/ 规划/ 的/ 服务/ 组合/ 方法/ ,/ 该类/ 方法/ 主要/ 特点/ 在于/ 仅/ 根据/ 用户/ 的/ 输入/ 和/ 期望/ 的/ 输出/ 自动/ 地/ 生成/ 组合/ 服务/ ,/ 如/ 文献/ [/ 3/ ]/ ;/ 第/ 2/ 类/ 是/ 基于/ 语义/ 的/ 服务/ 组合/ 方法/ ,/ 该类/ 组合/ 方法/ 主要/ 从/ 语义/ 的/ 角度/ 研究/ 服务/ 与/ 需求/ 的/ 匹配/ 以及/ 服务/ 和/ 服务/ 之间/ 的/ 可/ 组合/ 性/ ,/ 如/ 文献/ [/ 4/ ]/ ;/ 第/ 3/ 类/ 是/ 基于/ 工作/ 流/ 的/ 服务/ 组合/ 方法/ ,/ 相比/ 于/ 前/ 两种/ 方法/ ,/ 这种/ 方法/ 应用/ 范围/ 较广/ ./ 它/ 是/ 在/ 已有/ 工作/ 流/ 模型/ 的/ 基础/ 上/ 根据/ 用户/ 需求/ ,/ 通过/ 服务/ 选择/ 生成/ 组合/ 服务/ ./ 本文/ 所/ 讨论/ 的/ 服务/ 组合/ 方法/ 属于/ 第/ 3/ 类/ ./ 另一方面/ ,/ 在/ 计算机系统/ 与/ 网络/ 性能/ 不断/ 提高/ 以及/ 各种/ 应用/ 日益/ 丰富/ 的/ 情况/ 下/ ,/ 耗电/ 问题/ 已/ 成为/ 网络/ 和/ 信息系统/ 持续/ 发展/ 的/ 障碍/ [/ 5/ ]/ ./ 如何/ 合理/ 利用/ 各种/ 资源/ ,/ 并/ 在/ 满足用户/ 多样化/ 需求/ 的/ 前提/ 下/ 实现/ 计算机系统/ 与/ 网络/ 的/ 低能耗/ 已经/ 受到/ 广泛/ 关注/ ./ 以低/ 碳/ 节能/ 为/ 特征/ 的/ 绿色/ IT/ 在/ 过去/ 的/ 十年/ 受到/ 来自/ 政府/ 、/ 学术界/ 和/ 工业界/ 的/ 重视/ ./ 为/ 解决/ 这一/ 问题/ ,/ 绿色/ 计算/ 逐步/ 兴起/ ./ 绿色/ 计算/ 涉及/ 到/ 了/ 计算机系统/ 体系结构/ 、/ 软/ // 硬件/ 设计/ 、/ 制造/ 、/ 部署/ 、/ 运行/ 管理/ 等/ 各个/ 阶段/ [/ 6/ ]/ ./ 然而/ ,/ 随着/ 面向/ 服务/ 的/ 计算技术/ 的/ 出现/ 和/ 迅速/ 发展/ ,/ 绿色/ 计算/ 的/ 研究/ 内容/ 需要/ 进一步/ 地/ 拓展/ ./ 在/ 绿色/ 计算/ 的/ 大/ 背景/ 下/ ,/ 本/ 研究/ 以/ 节省/ 服务/ 组合/ 运行/ 过程/ 中/ 的/ 能耗/ 为/ 基本/ 目标/ ,/ 在/ 满足/ 全局/ QoS/ 需求/ 的/ 前提/ 下/ ,/ 实现/ 能耗/ 感知/ 的/ 服务/ 组合/ ./ 在/ 当前/ 的/ 应用环境/ 中/ ,/ 节省/ 组合/ 服务/ 运行/ 过程/ 中/ 的/ 能耗/ 至少/ 具有/ 两个/ 方面/ 的/ 重要/ 意义/ :/ 一方面/ 能够/ 降低/ 服务器/ 自身/ 的/ 能量消耗/ ;/ 另一方面/ 由于/ 服务器/ 的/ 能量消耗/ 最终/ 转化/ 为/ 热能/ ,/ 减少/ 服务/ 的/ 能耗/ ,/ 意味着/ 减少/ 了/ 服务器/ 的/ 散热量/ ,/ 从而/ 进一步/ 减少/ 其它/ 周边设备/ 的/ 投入/ 和/ 运行/ 能耗/ ,/ 如/ 冷却/ 设备/ ./ 计算机系统/ 的/ 能耗/ 通常/ 主要/ 涉及/ 3/ 个/ 方面/ :/ (/ 1/ )/ 计算机硬件/ 设备/ 的/ 能耗/ ,/ 这/ 主要/ 取决于/ 硬件/ 的/ 体系结构/ 和/ 电路设计/ ;/ (/ 2/ )/ 算法/ 设计/ 与/ 软件/ 运行/ 的/ 效率/ ;/ (/ 3/ )/ 系统资源/ 的/ 配置/ 与/ 管理/ ./ 本文/ 的/ 研究/ 涉及/ 第/ 3/ 个/ 方面/ ./ 在/ 计算机系统/ 中/ ,/ 能耗/ 与/ 系统资源/ 密切相关/ ,/ 对系统/ 能耗/ 的/ 管理/ 其实质/ 上/ 是/ 对/ 系统资源/ 自身/ 的/ 管理/ [/ 5/ ]/ ./ 然而/ ,/ 现有/ 的/ 资源管理/ 方法/ 并未/ 从/ 全局/ 层面/ 把/ 能耗/ 作为/ 一种/ 资源/ 进行/ 系统/ 抽象/ ./ 在/ 能耗/ 节省/ 方面/ ,/ 已有/ 的/ 相关/ 研究/ 大多/ 关注/ 于/ 单个/ 设备/ 或/ 单一/ 系统/ 的/ 能耗/ 问题/ [/ 7/ -/ 11/ ]/ ,/ 或者/ 仅/ 关注/ 网络/ 的/ 通信/ 能耗/ 问题/ [/ 12/ -/ 13/ ]/ ./ 然而/ 在/ 分布式/ 环境/ 下/ ,/ 尤其/ 是/ 面向/ 服务/ 的/ 应用环境/ 下/ ,/ 需要/ 综合/ 考虑/ 网络应用/ 的/ 总体/ 能耗/ ./ 例如/ ,/ 组合/ 服务/ 的/ 能耗/ 问题/ ./ 而/ 在/ 服务/ 组合/ 研究/ 方面/ ,/ 尚/ 缺乏/ 关于/ 组合/ 服务/ 能耗/ 的/ 研究/ ,/ 大多/ 相关/ 研究/ 着眼于/ 组合/ 服务/ 的/ QoS/ 优化/ [/ 14/ -/ 19/ ]/ ./ 传统/ 的/ 基于/ 工作/ 流/ 的/ 服务/ 组合/ 方法/ 难以/ 有效/ 地/ 降低/ 组合/ 服务/ 的/ 能耗/ ,/ 其/ 原因/ 主要/ 在/ 两个/ 方面/ :/ (/ 1/ )/ 缺乏/ 针对/ 服务/ 能耗/ 模型/ 的/ 研究/ ,/ 特别/ 是/ 缺乏/ 服务/ QoS/ 、/ 服务/ 负载/ 与/ 服务/ 能耗/ 之间/ 关系/ 的/ 研究/ ./ 而已/ 有/ 的/ 服务器/ 能耗/ 模型/ [/ 5/ ,/ 10/ -/ 11/ ]/ 并/ 不能/ 直接/ 用于/ 表示/ 服务/ 能耗/ ;/ (/ 2/ )/ 在/ 服务/ 组合/ 的/ 建模/ 中/ ,/ 大多/ 研究/ 仅/ 关注/ 于/ 针对/ 单个/ 请求/ 的/ 组合/ 服务/ QoS/ 优化/ 而/ 未/ 考虑/ 处理/ 多个/ 请求/ 的/ 组合/ 服务/ 能耗/ 优化/ ./ 这/ 可能/ 导致/ 组合/ 服务/ 的/ QoS/ 较优/ 而/ 能耗/ 较大/ ./ 针对/ 当前/ 的/ 不足/ ,/ 本文/ 主要/ 做/ 了/ 以下/ 两个/ 方面/ 的/ 工作/ :/ (/ 1/ )/ 提出/ 了/ 服务/ 的/ 能耗/ 模型/ ,/ 该/ 模型/ 基于/ M/ // M/ // 1/ // PS/ 排队模型/ 描述/ 了/ 服务/ 能耗/ 、/ 负载/ (/ 即/ 请求/ 的/ 到达/ 速率/ )/ 和/ 部分/ QoS/ 属性/ 之间/ 的/ 关系/ ;/ (/ 2/ )/ 针对/ 基于/ 工作/ 流/ 的/ 服务/ 组合/ ,/ 提出/ 了/ 一种/ 工作/ 流/ 环境/ 下/ 能耗/ 感知/ 的/ 多路径/ 服务/ 组合/ 方法/ EAMSC/ (/ EnergyAwareMultipathServiceComposition/ )/ ./ 不同于/ 传统/ 的/ 服务/ 组合/ 方法/ 仅/ 生成/ 一个/ QoS/ 优化/ 的/ 服务/ 组合/ 路径/ ,/ 本文/ 方法/ 针对/ 连续/ 到达/ 的/ 多个/ 请求/ ,/ 根据/ 全局/ QoS/ 约束/ 生成/ 多条/ 服务/ 组合/ 路径/ ,/ 并/ 依据/ 服务/ 能耗/ 模型/ ,/ 有效/ 地/ 在/ 各/ 服务/ 组合/ 路径/ 上/ 分配/ 用户/ 请求/ 的/ 流量/ ,/ 限制/ 服务/ 负载/ ,/ 从而/ 在/ 提供/ QoS/ 保证/ 的/ 基础/ 上/ ,/ 实现/ 了/ 低能耗/ 地/ 服务/ 组合/ ./ 本文/ 第/ 2/ 节/ 介绍/ 相关/ 工作/ ;/ 第/ 3/ 节/ 描述/ 问题/ 的/ 基本/ 模型/ ;/ 第/ 4/ 节/ 提出/ 服务/ 的/ 能耗/ 模型/ ;/ 第/ 5/ 节对/ 能耗/ 感知/ 的/ 多路径/ 服务/ 组合/ 方法/ 进行/ 建模/ ,/ 并/ 提出/ 求解/ 算法/ ;/ 第/ 6/ 节/ 给出/ 了/ 仿真/ 实验/ ,/ 并/ 分析/ 比较/ 实验/ 结果/ ;/ 第/ 7/ 节对/ 全文/ 做出/ 总结/ 并/ 提出/ 下/ 一步/ 的/ 研究/ 方向/ ./ 2/ 相关/ 研究/ 与/ 本/ 研究/ 相关/ 的/ 工作/ 主要/ 集中/ 在/ 两个/ 方面/ :/ 一是/ 节省/ 系统/ 能耗/ ;/ 二是/ 服务/ 的/ 选择/ 与/ 组合/ ./ 在/ 节省/ 能耗/ 方面/ ,/ 早期/ 的/ 研究/ 集中/ 在/ 单个/ 系统/ 的/ 能耗/ 优化/ 方面/ ./ 文献/ [/ 7/ ]/ 通过/ 调整/ 工作电压/ ,/ 在/ 满足/ QoS/ 需求/ 的/ 前提/ 下/ ,/ 实现/ 设备/ 能耗/ 的/ 节省/ ;/ 文献/ [/ 8/ ]/ 通过/ 任务调度/ 的/ 方法/ ,/ 根据/ 不同/ 处理器/ 速度/ 下/ 的/ 能耗/ 特征/ ,/ 提出/ 了/ 降低/ 处理器/ 能耗/ 的/ 调度/ 算法/ ./ 近来/ 的/ 研究/ 逐/ Page3/ 渐/ 开始/ 关注/ 分布式/ 环境/ 下/ 的/ 系统/ 能耗/ 问题/ ./ 文献/ [/ 9/ ]/ 和/ 文献/ [/ 10/ ]/ 分别/ 针对/ P2P/ 环境/ 中/ 服务器/ 的/ 数据传输/ 能耗/ 问题/ 和/ 处理器/ 能耗/ 问题/ ,/ 提出/ 了/ 相应/ 的/ 服务器/ 选择/ 算法/ ./ 文献/ [/ 11/ ]/ 研究/ 了/ 服务器/ 能耗/ 与/ 性能/ 之间/ 的/ 关系/ ,/ 建立/ 了/ 在/ 性能/ 约束/ 下/ 的/ 能耗/ 优化/ 模型/ ,/ 在/ 此基础/ 上/ ,/ 提出/ 了/ 一种/ 优化/ 的/ 负载/ 分配/ 算法/ ;/ 文献/ [/ 12/ ]/ 针对/ 网络通信/ 所/ 产生/ 的/ 能耗/ 问题/ ,/ 提出/ 了/ 能耗/ 优化/ 的/ 路由/ 算法/ ;/ 文献/ [/ 13/ ]/ 通过/ 利用/ 速率/ 自/ 适应/ 和/ 设备/ 休眠/ 两种/ 节能/ 技术/ 在/ 不/ 影响/ 性能/ 的/ 前提/ 下/ 有效/ 地/ 降低/ 了/ 网络/ 能耗/ ;/ 文献/ [/ 20/ ]/ 和/ [/ 21/ ]/ 研究/ 了/ 数据中心/ 的/ 系统/ 能耗/ 优化/ 问题/ ;/ 此外/ ,/ 文献/ [/ 22/ ]/ 还/ 分别/ 研究/ 了/ 移动/ 设备/ 管理/ 和/ 组合/ 服务/ 配置/ 对/ 能耗/ 的/ 影响/ ,/ 提出/ 了/ 相应/ 的/ 移动/ 设备/ 应用程序/ 管理/ 算法/ 和/ 组合/ 服务/ 配置/ 算法/ ./ 在/ 服务/ 的/ 选择/ 与/ 组合/ 方面/ ,/ 文献/ [/ 14/ ]/ 将/ 服务/ 组合/ 中/ 的/ 服务/ 选择/ 转化成/ 线性规划/ 模型/ ,/ 通过/ 对/ 该/ 模型/ 的/ 求解/ 生成/ 满足/ 全局/ QoS/ 约束/ 的/ 组合/ 服务/ ./ 文献/ [/ 15/ ]/ 分析/ 了/ 多种/ 工作/ 流/ 模式/ ,/ 提出/ 了/ 一种/ 优化/ 的/ 服务/ 选择/ 算法/ ,/ 该/ 算法/ 主要/ 分为/ 两个/ 阶段/ ,/ 第/ 1/ 阶段/ 在/ 局部/ 根据/ 设定/ 的/ 阈值/ 排除/ 一些/ 候选/ 服务/ ,/ 第/ 2/ 阶段/ 根据/ 分支/ 定界/ 法/ ,/ 选取/ 全局/ 优化/ 的/ 结果/ ;/ 文献/ [/ 16/ ]/ 将/ 服务/ 选择/ 问题/ 分别/ 建模/ 表示/ 为/ MMKP/ (/ Multidi/ -/ mensionalMultiple/ -/ choiceKnapsackProblem/ )/ 模型/ 和/ MCOP/ (/ Multi/ -/ ConstrainedOptimalPath/ )/ 问题/ ,/ 由于/ 这些/ 问题/ 是/ NP/ -/ 难/ 问题/ ,/ 该/ 研究/ 进一步/ 提出/ 了/ 相应/ 的/ 启发式/ 算法/ 实现/ 了/ 基于/ 全局/ 约束/ 的/ 优化/ 服务/ 选择/ ./ 文献/ [/ 17/ ]/ 将/ 用户/ 对/ 组合/ 服务/ 的/ 全局/ QoS/ 约束/ 分解/ 为/ 对/ 服务/ 的/ 局部/ QoS/ 约束/ ,/ 通过/ 选择/ 满足/ 局部/ 约束/ 的/ 服务/ 生成/ 优化/ 的/ 组合/ 服务/ ./ 文献/ [/ 18/ ]/ 在/ 文献/ [/ 17/ ]/ 的/ 基础/ 上/ ,/ 对/ 候选/ 服务/ 进行/ 筛选/ ,/ 选出/ 支配/ 服务/ (/ skylineservices/ )/ 参与/ 下/ 一步/ 的/ 服务/ 选择/ 与/ 组合/ ,/ 从而/ 减少/ 了/ 服务/ 选择/ 的/ 计算/ 开销/ ./ 以上/ 的/ 服务/ 选图/ 1/ 一个/ 旅游/ 规划/ 的/ 工作/ 流/ 模型/ Φ/ (/ X1/ ,/ …/ ,/ Xn/ )/ 为/ 组合/ 服务/ 的/ 总/ 能耗/ 函数/ ./ 该/ 函数/ 与/ 各/ 组成/ 服务/ 的/ 能耗/ 密切相关/ ./ 其中/ X1/ ,/ …/ ,/ Xn/ 为/ 一组/ 服务/ 组合/ 配置/ 参数/ ,/ 犡/ i/ (/ 1/ / i/ / n/ )/ 为/ 一个/ m/ (/ 为/ 简化/ 表示/ ,/ 设/ m/ =/ |/ S1/ |/ =/ …/ =/ |/ Sn/ |/ )/ 维/ 向量/ ,/ 有择/ 和/ 组合/ 方法/ 仅仅/ 针对/ 单个/ 用户/ 请求/ 进行/ 服务/ 组合/ ;/ 而/ 在/ 实际/ 应用/ 中/ ,/ 用户/ 请求/ 通常/ 连续/ 到达/ 从而/ 形成/ 了/ 一个/ 或/ 多个/ 流/ ,/ 服务/ 组合/ 需要/ 有效/ 地/ 应对/ 这些/ 请求/ ./ 文献/ [/ 19/ ]/ 研究/ 了/ 基于/ 流/ 的/ 优化/ 服务/ 组合/ 问题/ ,/ 在/ 已知/ 用户/ 请求/ 到达/ 速率/ 的/ 基础/ 上/ ,/ 对/ 来自/ 各个/ 流/ 的/ 用户/ 请求/ 进行/ 统一规划/ ,/ 生成/ 满足用户/ 需求/ 的/ 、/ QoS/ 优化/ 的/ 服务/ 组合/ 方案/ ./ 3/ 能耗/ 感知/ 的/ 服务/ 组合/ 基本/ 模型/ 假设/ 存在/ 一类/ 用户/ 请求/ 由/ n/ 个/ 任务/ 组成/ ,/ 每个/ 任务/ Taski/ (/ 1/ / i/ / n/ )/ 都/ 对应/ 存在/ 一组/ 能够/ 完成/ 该/ 任务/ 并/ 具有/ 不同/ QoS/ 的/ 服务/ ,/ 这/ 类/ 服务/ 组成/ 的/ 集合/ 称为/ 服务/ 类/ Si/ ./ 该/ 集合/ 中/ 的/ 服务/ sij/ (/ 1/ / j/ / |/ Si/ |/ )/ 能够/ 实现/ 一类/ 特定/ 的/ 任务/ 或/ 业务/ 功能/ ,/ 如/ 查询/ 天气/ 、/ 预订/ 机票/ 等/ ./ 其中/ ,/ i/ 表示/ 服务/ 类/ 的/ 标识/ ,/ j/ 为/ 该/ 服务/ 在/ 服务/ 类/ Si/ 中/ 的/ 标识/ ./ 工作/ 流/ 环境/ 下/ 能耗/ 感知/ 的/ 服务/ 组合/ 问题/ 的/ 基本/ 构成/ 要素/ 可以/ 描述/ 为/ 〈/ WM/ ,/ Φ/ (/ X1/ ,/ …/ ,/ Xn/ )/ ,/ QoS/ _/ ST/ 〉/ ./ 其中/ ,/ WM/ 为/ 工作/ 流/ 模型/ ,/ 是/ 由/ 一组/ 服务/ 类/ Si/ (/ 或/ 任务/ )/ 构成/ 并且/ 各/ 服务/ 类/ 之间/ 具有/ 明确/ 拓扑/ 关系/ 的/ 组合/ 流程/ 模板/ ./ WM/ 可以/ 用/ DAG/ (/ DirectedAcyclicGraph/ )/ 图来/ 表示/ ,/ 通过/ 组合/ 不同/ 的/ 服务/ 类/ 可以/ 实现/ 更加/ 复杂/ 的/ 业务/ 功能/ ./ 工作/ 流/ 模型/ 通常/ 由/ 专家/ 或/ 业务人员/ 设计/ 制定/ ,/ 图/ 1/ 显示/ 了/ 一个/ 为/ 用户/ 提供/ 旅游/ 规划/ 的/ 工作/ 流/ 模型/ ./ 其中/ S2/ 和/ S3/ 属于/ 并发/ 关系/ ,/ 其它/ 的/ 为/ 顺序/ 关系/ ./ 工作/ 流/ 模型/ 为/ 服务/ 组合/ 提供/ 了/ 任务/ 组合/ 模板/ ,/ 因而/ 基于/ 工作/ 流/ 的/ 服务/ 组合/ 过程/ 实际上/ 就是/ 根据/ 用户/ 的/ 全局/ QoS/ 约束/ ,/ 在/ 各/ 相关/ 的/ 服务/ 类/ Si/ 中/ 选择/ 并/ 绑定/ 一个/ 具体/ 的/ 服务/ ,/ 最终/ 生成/ 一个/ 可/ 执行/ 的/ 组合/ 服务/ 的/ 过程/ ./ 其中/ ,/ xij/ (/ 1/ / j/ / m/ )/ 为/ 指示/ 变量/ ,/ 其值/ 为/ 0/ 或/ 1/ ./ 当值/ 为/ 1/ 时/ ,/ 表示/ 服务/ sij/ 参与/ 了/ 服务/ 组合/ ,/ 即/ sij/ 是/ 一个/ 组合/ 服务/ 中/ 的/ 子/ 服务/ ;/ 当值/ 为/ 0/ 时/ ,/ 表示/ 服务/ sij/ 未/ 参与/ 任何/ 服务/ 组合/ ./ 对于/ 一个/ 组合/ 服务/ 而言/ ,/ 有/ |/ 犡/ i/ |/ =/ 1/ ,/ 即/ 同类/ 服务/ 中有且/ 只有/ 一个/ 服务/ 被/ 选择/ 参/ Page4/ 响应/ 时间/ q/ (/ T/ )/ 成功率/ q/ (/ SR/ )/ QoS/ _/ ST/ 是/ 服务/ sij/ 的/ QoS/ 模型/ ,/ 可/ 表示/ 为/ 一个/ 与/ 组合/ ./ r/ 维/ 向量/ 犙/ ij/ =/ (/ q/ (/ 1/ )/ 一种/ QoS/ 属性/ ,/ 如/ 响应/ 时间/ 、/ 可靠性/ 等/ ./ 本文/ 讨论/ 3/ 种/ QoS/ 属性/ ,/ 它们/ 是/ 和/ 用户/ 请求/ 在/ 队列/ 中/ 排队/ 等待/ 处理/ 的/ 时间/ ./ 该/ 属性/ 与/ 服务/ 负载/ 等/ 因素/ 密切相关/ ./ 在/ 一段时间/ 内/ ,/ 成功/ 完成/ 的/ 请求/ 数量/ 占/ 总/ 请求/ 数量/ 的/ 比重/ ./ 本文/ 假设/ 服务/ 的/ 成功率/ 不随/ 服务/ 负载/ 发生变化/ ./ 成本/ q/ (/ C/ )/ 值得一提的是/ ,/ 引入/ 其它/ 的/ QoS/ 属性/ 并/ 不会/ 改变/ 本文/ 方法/ 的/ 有效性/ ./ 用户/ 对/ 组合/ 服务/ 的/ 全局/ QoS/ 需求/ 分别/ 表示/ 为/ Q/ (/ T/ )/ ,/ Q/ (/ C/ )/ ,/ Q/ (/ SR/ )/ ./ 即/ 组合/ 服务/ 的/ 响应/ 时间/ 和/ 成本/ 不/ 超过/ Q/ (/ T/ )/ 和/ Q/ (/ C/ )/ ;/ 组合/ 服务/ 的/ 成功率/ 不/ 低于/ Q/ (/ SR/ )/ ./ 为/ 实现/ 能耗/ 优化/ 的/ 目标/ ,/ 在/ 服务/ 组合/ 过程/ 中/ ,/ 需要/ 最小化/ 组合/ 服务/ 的/ 总/ 能耗/ ./ 因此/ ,/ 能耗/ 感知/ 的/ 服务/ 组合/ 问题/ 的/ 基本/ 模型/ 可以/ 简略/ 地由式/ (/ 2/ )/ 表示/ ./ 其中/ ,/ 求解/ 目标/ 为/ 最小化/ 组合/ 服务/ 的/ 总/ 能耗/ 函数/ ,/ 约束条件/ 为/ 满足用户/ 的/ 全局/ QoS/ 约束/ ./ GT/ (/ ·/ )/ ,/ GSR/ (/ ·/ )/ 和/ GC/ (/ ·/ )/ 分别/ 代表/ 在/ 特定/ 工作/ 流/ 模型/ 下/ 响应/ 时间/ 、/ 成功率/ 和/ 成本/ 的/ 聚合/ QoS/ 函数/ ,/ 该/ 函数/ 实现/ 了/ 组合/ 服务/ 聚合/ QoS/ 的/ 计算/ ./ 上述/ 3/ 种/ 聚合/ QoS/ 函数/ 的/ 实现/ 方式/ 在/ 文献/ [/ 23/ ]/ 中有/ 详细/ 的/ 讨论/ ,/ 本文/ 不再/ 赘述/ ./ 4/ 服务/ 的/ 能耗/ 模型/ 服务/ 部署/ 在/ 特定/ 的/ 硬件/ 设备/ (/ 服务器/ )/ 上/ ,/ 而/ 服务/ 的/ 运行/ 需要/ 硬件/ 设备/ 和/ 软件平台/ 的/ 支撑/ ,/ 并且/ 产生/ 一定/ 的/ 能耗/ ./ 已有/ 的/ 服务器/ 能耗/ 模型/ 不能/ 直接/ 用于/ 描述/ 服务/ 的/ 能耗/ ./ 这/ 是因为/ 服务/ (/ 或/ 服务提供者/ )/ 需要/ 根据/ 其/ 承诺/ 的/ QoS/ 提供/ 相应/ 等级/ 的/ QoS/ 保证/ ./ 例如/ ,/ 服务/ 管理者/ 根据/ SLA/ (/ ServiceLevelAgreement/ )/ 设置/ 资源分配/ ./ 这/ 意味着/ 服务提供者/ 会/ 根据/ 实际/ 状态/ (/ 如/ 服务/ 负载/ )/ 来/ 调整/ 和/ 限制/ 相关/ 计算资源/ ,/ 从而/ 影响/ 了/ 服务/ 的/ 能耗/ ./ 本文/ 提出/ 了/ 两种/ 服务/ 的/ 能耗/ 模型/ 用来/ 近似/ 地/ 评估/ 服务/ 运行/ 时/ 的/ 能耗/ ./ 为了/ 简化/ 模型/ ,/ 本文/ 做出/ 如下/ 假设/ :/ 假设/ 1/ ./ 每个/ 服务/ 都/ 是/ 计算/ 密集型/ 的/ ,/ 主要/ 能耗/ 来自/ 于/ CPU/ 等/ 计算/ 组件/ ./ 假设/ 2/ ./ 每个/ 服务/ 可以/ 建模/ 成/ M/ // M/ // 1/ // PS/ 排队模型/ ,/ 请求/ 的/ 到达/ 速率/ 为/ λ/ ,/ 服务/ 速率/ 为/ μ/ ./ 单一/ 服务/ 的/ 能耗/ 分为/ 两/ 部分/ :/ 一是/ 计算环境/ 能耗/ (/ 或/ 空闲/ 能耗/ )/ ,/ 即/ 在/ 处于/ 空闲/ 状态/ 时/ 支撑/ 服务/ 运转/ 的/ 计算环境/ 所/ 消耗/ 的/ 能量/ ,/ 如/ 维持/ 服务器/ 硬件/ 设备/ 和/ 操作系统/ 正常/ 运转/ 的/ 基本/ 能耗/ ;/ 二是/ 任务/ 能耗/ ,/ 即/ 处理/ 用户/ 请求/ 所/ 产生/ 的/ 能耗/ ,/ 该/ 能耗/ 与/ 服务/ 的/ 动态/ 负载/ 相关/ ./ 服务/ 一旦/ 部署/ 并/ 开始运行/ 后/ ,/ 其/ 计算环境/ 能耗/ 不可避免/ 并且/ 相对/ 固定/ ,/ 服务/ 无论/ 是否/ 参与/ 服务/ 组合/ 都/ 不会/ 影响/ 这部分/ 能耗/ ,/ 故/ 计算环境/ 能耗/ 不是/ 本文/ 研究/ 的/ 内容/ ./ 而/ 任务/ 能耗/ 与/ 服务/ 负载/ 密切相关/ 进而/ 影响/ 到/ 了/ 服务/ 组合/ ./ 因此/ ,/ 服务/ 组合/ 中/ 感知/ 的/ 能耗/ 主要/ 是/ 指/ 任务/ 能耗/ ./ 本文/ 后面/ 如/ 无/ 特殊/ 说明/ ,/ 服务/ 能耗/ 均/ 是/ 指/ 任务/ 能耗/ ./ 4.1/ 服务/ 能耗/ 模型/ I/ 在/ 服务/ 能耗/ 模型/ I/ 中/ ,/ 本文/ 假设/ 每个/ 服务/ 均/ 采用/ 自/ 适应/ 服务/ 速率/ 机制/ 来/ 提供/ 服务质量/ 保证/ ./ 也/ 就是/ ,/ 服务提供者/ 为了/ 节省/ 能耗/ 和/ 保证/ 服务质量/ (/ 响应/ 时间/ )/ 而/ 根据/ 服务/ 的/ 动态/ 负载/ 调整/ 服务/ 处理/ 速率/ ,/ 如/ 采用/ DVS/ (/ DynamicVoltageScaling/ )/ 来/ 改变/ 服务/ 的/ 处理速度/ [/ 24/ ]/ ./ 在/ M/ // M/ // 1/ // PS/ 模型/ 中/ ,/ 当/ 服务/ 处于/ 稳定/ 状态/ 时/ ,/ 有/ 其中/ ,/ RT/ 表示/ 平均/ 响应/ 时间/ ./ 当/ 服务/ 负载/ 增加/ 时/ (/ 如/ λ/ 增大/ )/ ,/ 为/ 保证/ 服务质量/ ,/ 使得/ RT/ 不/ 超过/ 该/ 服务/ 的/ q/ (/ T/ )/ (/ 为/ 表述/ 简洁/ ,/ 省略/ 了/ 下标/ )/ ,/ 需要/ 提高/ 服务/ 速率/ μ/ ;/ 相反/ 当/ λ/ 减小/ 时/ ,/ 为/ 达到/ 节能/ 效果/ ,/ 可以/ 适当/ 降低/ 服务/ 速率/ μ/ ./ 在/ M/ // M/ // 1/ // PS/ 排队模型/ 下/ ,/ 令/ RT/ =/ q/ (/ T/ )/ ,/ 则/ μ/ 和/ λ/ 之间/ 有/ 如下/ 关系/ :/ 由于/ 对/ 一个/ 服务/ 而言/ ,/ 其/ μ/ 不/ 可能/ 无限/ 增大/ ,/ 故设/ 服务/ sij/ 的/ 最大/ 服务/ 速率/ 为/ μ/ Max/ 质量/ 的/ 条件/ 下该/ 服务/ 可/ 接受/ 的/ 最大/ 请求/ 到达/ 速率/ 为/ ij/ ./ 显然/ 它们/ 之间/ 具有/ 如下/ 关系/ :/ λ/ Max/ 根据/ 文献/ [/ 5/ ]/ ,/ 在/ t/ 时刻/ sij/ 的/ 单位/ 时间/ 任务/ 能耗/ Pij/ (/ t/ )/ 可以/ 简化/ 计算/ 如下/ :/ Page5/ 其中/ ,/ μ/ ij/ (/ t/ )/ 表示/ 在/ t/ 时刻/ sij/ 的/ 服务/ 速率/ ;/ α/ ij/ 和/ β/ ij/ 为/ 常数/ ,/ 本文/ 称之为/ 能耗/ 参数/ ./ 它们/ 的/ 值/ 与/ 具体/ 的/ 服务/ 部署/ 环境/ 有关/ ./ 在/ 实际/ 测量/ 中/ ,/ 不同/ 的/ 服务/ 系统/ 表现/ 出/ 不同/ 的/ 单位/ 时间/ 能耗/ 特征/ ./ 相关/ 内容/ 将/ 在/ 下/ 一节/ 探讨/ ./ 当/ 服务/ 系统/ 处于/ 稳定/ 的/ 工作/ 状态/ 时/ ,/ 服务/ sij/ 的/ 单位/ 时间/ 能耗/ Pij/ 可以/ 近似/ 表示/ 为/ 根据/ λ/ 与/ μ/ 存在/ 对应/ 的/ 约束/ 关系/ ,/ 当/ 服务/ 系统/ 处于/ 稳定/ 的/ 状态/ 时/ ,/ 服务/ sij/ 的/ 单位/ 时间/ 能耗/ Pij/ 可以/ 表示/ 为/ λ/ ij/ 的/ 函数/ :/ Pij/ =/ F/ (/ λ/ ij/ )/ =/ β/ ij/ ×/ λ/ ij/ +/ 1/ 在/ 时间/ 区间/ [/ t1/ ,/ t2/ ]/ 内/ ,/ 服务/ sij/ 的/ 能耗/ Eij/ (/ t1/ ,/ t2/ )/ 为/ 当/ 在/ 时间/ 区间/ [/ t1/ ,/ t2/ ]/ 内/ ,/ 服务/ 处于/ 稳定/ 状态/ 时/ ,/ 服务/ sij/ 的/ 能耗/ Eij/ (/ t1/ ,/ t2/ )/ 可以/ 简化/ 表示/ 为/ Eij/ (/ t1/ ,/ t2/ )/ =/ Pij/ (/ t2/ -/ t1/ )/ =/ F/ (/ λ/ ij/ )/ (/ t2/ -/ t1/ )/ (/ 10/ )/ 4.2/ 服务/ 能耗/ 模型/ II/ 在/ 服务/ 能耗/ 模型/ II/ 中/ ,/ 本文/ 假设/ 每个/ 服务/ 采用/ 固定/ 的/ 服务/ 速率/ μ/ ,/ 并且/ 通过/ 限制/ 服务/ 的/ 最大/ 请求/ 速率/ 来/ 保证/ 服务质量/ ./ 令/ ρ/ =/ λ/ // μ/ ,/ 表示/ 服务/ 负载/ 率/ ./ 在/ M/ // M/ // 1/ // PS/ 模型/ 中/ ,/ 为/ 保证/ 服务/ 系统/ 不过/ 载/ ,/ 需/ 保证/ ρ/ </ 1/ ./ 而/ 为了/ 保证/ 服务质量/ ,/ 须/ 保证/ 服务/ 请求/ λ/ ij/ 不/ 超过/ 可/ 接受/ 的/ 最大/ 上限/ λ/ Max/ 同时/ ,/ ρ/ 为/ 服务/ 处于/ 工作/ 状态/ 的/ 时间/ 占/ 总/ 时间/ (/ 空闲/ 时间/ 与/ 工作/ 时间/ 之/ 和/ )/ 的/ 比例/ ./ 假设/ 服务/ 处于/ 空闲/ 状态/ 时/ ,/ 其/ 单位/ 时间/ 的/ 任务/ 能耗/ 为/ 0/ ;/ 那么/ ,/ 服务/ 的/ 期望/ 单位/ 时间/ 任务/ 能耗/ 为/ Pij/ =/ F/ (/ λ/ ij/ )/ =/ ρ/ ij/ ×/ β/ ij/ ×/ (/ μ/ ij/ )/ α/ ij/ 其中/ ,/ α/ ij/ 和/ β/ ij/ 为/ 常数/ (/ 见式/ (/ 6/ )/ )/ ./ 上式/ 也/ 可以/ 简化/ 表示/ 为/ 可以/ 表示/ 为/ 4.3/ 服务/ 能耗/ 的/ 感知/ 方法/ 显然/ ,/ ω/ ij/ 为/ 常数/ ./ 因而/ ,/ 服务/ sij/ 的/ 能耗/ Eij/ (/ t1/ ,/ t2/ )/ Eij/ (/ t1/ ,/ t2/ )/ =/ Pij/ (/ t2/ -/ t1/ )/ =/ F/ (/ λ/ ij/ )/ (/ t2/ -/ t1/ )/ (/ 14/ )/ 为/ 有效/ 地/ 感知/ 服务/ 的/ 能耗/ ,/ 需要/ 根据/ 当前任务/ 负载/ 合理/ 地/ 推断/ 预测/ 服务/ 的/ 单位/ 时间/ 能耗/ ./ 在/ 前述/ 的/ 能耗/ 模型/ 中/ ,/ 能耗/ (/ 即/ 任务/ 能耗/ )/ 是/ 服务/ 负载/ 的/ 函数/ ./ 故/ 在/ 已知/ 服务/ 负载/ 的/ 前提/ 下/ ,/ 服务/ sij/ 能耗/ 的/ 感知/ 需要/ 获取/ 能耗/ 参数/ α/ ij/ 、/ β/ ij/ 或/ ω/ ij/ ./ 在/ 能耗/ 模型/ I/ 中/ ,/ 根据/ 在/ 不同/ 任务/ 到达/ 速率/ 下/ 测量/ 得到/ 的/ 单位/ 时间/ 能耗/ 数据/ ,/ 能耗/ 参数/ 可以/ 用/ 回归/ 分析/ 的/ 方法/ 来/ 测算/ ./ 具体方法/ 是/ 根据/ 式/ (/ 7/ )/ ,/ 在/ 等式/ 两边/ 取/ 自然对数/ 得/ lnPij/ =/ ln/ β/ ij/ +/ α/ ijln/ μ/ ij/ =/ ln/ β/ ij/ +/ α/ ijln/ λ/ ij/ +/ 1/ 令/ Yij/ =/ lnPij/ ;/ Bij/ =/ ln/ β/ ij/ ;/ Aij/ =/ ln/ μ/ ij/ 则/ 可/ 得/ 将/ Aij/ 视为/ 自变量/ ,/ Yij/ 视为/ 因变量/ ,/ Bij/ 和/ α/ ij/ 视为/ 回归系数/ ,/ 采用/ 一元/ 线性/ 回归/ 方法/ [/ 25/ ]/ ,/ 可以/ 估算/ 参数/ α/ ij/ 和/ β/ ij/ ./ 在/ 能耗/ 模型/ II/ 中/ ,/ 由于/ 服务/ 速率/ μ/ 固定/ ,/ 故/ 只/ 需要/ 获得/ 服务/ sij/ 的/ 能耗/ 参数/ ω/ ij/ ./ 同理/ ,/ 根据/ 式/ (/ 13/ )/ 采用/ 一元/ 线性/ 回归/ 法/ 可以/ 估算/ ω/ ij/ ./ 值得注意/ 的/ 是/ ,/ 在/ 上述/ 两个/ 模型/ 的/ 估算/ 中/ ,/ Pij/ 是/ 指/ 单位/ 时间/ 内/ 的/ 任务/ 能耗/ ,/ 该值/ 是/ 在/ 实际/ 测量/ 的/ 单位/ 时间/ 能耗/ 基础/ 上/ 减去/ 计算环境/ 能耗/ (/ 即/ 在/ 服务/ 空闲/ 状态/ 下/ 测出/ 的/ 单位/ 时间/ 能耗/ )/ 而/ 得出/ 的/ ./ 此外/ ,/ 随着/ 时间/ 的/ 推移/ 和/ 计算环境/ 的/ 变化/ (/ 如/ 服务/ 升级/ 、/ 设备/ 老化/ 等/ )/ ,/ 能耗/ 参数值/ (/ α/ ij/ 、/ β/ ij/ 或/ ω/ ij/ )/ 可能/ 会/ 发生变化/ ,/ 因此/ 需要/ 定期/ 地/ 更新/ ./ 服务/ 通常/ 部署/ 和/ 运行/ 在/ 分布式/ 环境/ 中/ ./ 在/ 这种/ 环境/ 中/ 进行/ 服务/ 组合/ 时/ ,/ 存在/ 大量/ 可/ 供选择/ 的/ 服务/ ./ 这些/ 服务/ 有着/ 各不相同/ 的/ 能耗/ 特性/ ./ 一个/ 服务/ 在/ 不同/ 任务/ 负载/ 下/ 的/ 单位/ 时间/ 能耗/ 也/ 并不相同/ ,/ 而/ 能耗/ 模型/ 和/ 能耗/ 参数/ 能够/ 较/ 好/ 地/ 反映/ 服务/ 在/ 不同/ 负载/ 下/ 的/ 单位/ 时间/ 能耗/ 特性/ ,/ 进而/ 为/ 能耗/ 感知/ 的/ 服务/ 组合/ 提供/ 决策依据/ ./ 在/ 本文/ 的/ 服务/ 能耗/ 感知/ 方法/ 中/ ,/ 服务/ 的/ 能耗/ 特性/ 信息/ 由/ 两/ 部分/ 组成/ ,/ 可/ 表示/ 为/ 〈/ EM/ ;/ EP/ 〉/ ./ 其中/ ,/ EM/ 为/ 能耗/ 模型/ ;/ EP/ 为/ 能耗/ 参数/ ./ 例如/ ,/ 服务/ s12/ 采用/ 能耗/ 模型/ I/ ,/ 能耗/ 参数/ 为/ α/ ij/ 和/ β/ ij/ ;/ 服务/ s13/ 采用/ 能耗/ 模型/ II/ 能耗/ 参数/ 为/ ω/ ij/ ./ 这些/ 能耗/ 特性/ 信息/ 由/ 服务提供商/ 或/ 第三方/ 在/ 服务/ 描述/ 中/ 说明/ ,/ 并/ 同/ 服务/ 的/ QoS/ 信息/ 一同/ 发布/ ./ 这种/ 能耗/ 特性/ 描述/ 方法/ 具有/ 良好/ 的/ 可扩展性/ ./ 一方面/ ,/ 该/ 方法/ 可以/ 兼容/ 不同/ 的/ 能耗/ 模型/ ,/ 当/ 出现/ 新/ 的/ 能耗/ 模型/ 时/ ,/ 可以/ 方便/ 地/ 更新/ 现有/ 能耗/ 特性/ 描述/ 信息/ ;/ 另一方面/ ,/ 当/ 已有/ 服务/ 的/ 能耗/ 特性/ 发生变化/ 时/ ,/ 可以/ 通过/ 修改/ 其/ 能耗/ 参数值/ 来/ 实现/ 其/ 能耗/ 特性/ 描述/ 信息/ 的/ 更新/ ./ Page64/ ./ 4/ 进一步/ 讨论/ 从/ 上面/ 的/ 服务/ 能耗/ 模型/ 可以/ 看出/ ,/ 服务/ 的/ 单位/ 时间/ 能耗/ (/ 即/ 任务/ 能耗/ )/ 除了/ 取决于/ 自身/ 的/ 相关/ 参数/ 外/ ,/ 还/ 取决于/ 外部/ 服务/ 请求/ 的/ 负载/ ,/ 即/ 任务/ 到达/ 速率/ λ/ ./ 所以/ 对于/ 单个/ 服务/ 而言/ ,/ 除了/ 系统/ 自身/ 的/ 改造/ 升级/ 以外/ ,/ 降低/ 能耗/ 的/ 有效/ 办法/ 是/ 减少/ 服务/ 处理/ 负载/ ,/ 也/ 就是/ 降低/ 使用/ 该/ 服务/ 的/ 请求/ 到达/ 速率/ ,/ 特别/ 是/ 当/ 服务/ 能耗/ 随/ 处理/ 负载/ 迅速/ 上升时/ ,/ 减少/ 服务/ 处理/ 负载/ 能够/ 有效/ 地/ 降低/ 服务/ 能耗/ ./ 另一方面/ ,/ 每个/ 服务/ 能够/ 处理/ 的/ 最大/ 服务/ 请求/ 速率/ λ/ Max/ 证/ 服务质量/ ,/ 也/ 需要/ 限制/ 服务/ 的/ 请求/ 处理/ 负载/ ./ 从/ 整个/ 组合/ 服务/ 系统/ 的/ 角度/ 来看/ ,/ 为/ 保证/ 服务质量/ 和/ 减少/ 能耗/ ,/ 需要/ 有效/ 分配/ 服务/ 负载/ ,/ 实现/ 请求/ 流量/ 的/ 合理/ 分流/ (/ 即/ 采用/ 多路径/ 服务/ 组合/ 的/ 方法/ )/ ,/ 避免/ 个别/ 服务/ 的/ 过载/ 和/ 高能耗/ ,/ 从而/ 在/ 保证/ 服务质量/ 的/ 前提/ 下/ ,/ 降低/ 整个/ 组合/ 服务/ 的/ 总/ 能耗/ ./ 5/ 能耗/ 感知/ 的/ 多路径/ 服务/ 组合/ 5.1/ 基本概念/ 定义/ 1/ ./ 请求/ 流指/ 在/ 时间/ 维度/ 上/ 依次/ 到达/ 并/ 接受/ 处理/ 的/ 一个/ 用户/ 任务/ 请求/ 序列/ ./ 在/ 一个/ 请求/ 流中/ 的/ 每个/ 请求/ 满足/ 以下/ 两个/ 条件/ :/ (/ 1/ )/ 共享/ 使用/ 同一个/ 工作/ 流/ 模型/ ,/ 即/ 具有/ 相同/ (/ 2/ )/ 具有/ 相同/ 的/ 全局/ QoS/ 约束/ ,/ 即/ 具有/ 相同/ 的/ 的/ 功能/ 需求/ ,/ 如/ 需要/ 旅游/ 规划/ ;/ 图/ 2/ 处理/ 用户/ 请求/ 的/ 服务/ 组合/ 路径/ 定义/ 3/ ./ 单一/ 路径/ 服务/ 组合/ 指/ 针对/ 一个/ 特定/ 的/ 请求/ 流/ ,/ 在/ 服务/ 组合/ 过程/ 中/ ,/ 构建/ 一个/ 优化/ 的/ 服务/ 组合/ 可行/ 路径/ ,/ 即/ 对于/ 所有/ 到达/ 的/ 用户/ 请求/ 都/ 使用/ 同一个/ 组合/ 服务/ 来/ 处理/ ./ 定义/ 4/ ./ 多路径/ 服务/ 组合/ 指/ 针对/ 一个/ 特定/ 的/ 请求/ 流/ ,/ 在/ 服务/ 组合/ 过程/ 中/ ,/ 构建/ 多个/ 服务/ 组合/ 的/ 可行/ 路径/ ,/ 并/ 对于/ 以/ 一定/ 速率/ 连续/ 到达/ 的/ 请求/ ,/ 根据/ 实际/ 环境/ (/ 如/ 能耗/ 因素/ 或者/ 负载/ 因素/ )/ 和/ 优化/ 目标/ 在/ 各/ 组合/ 服务/ 路径/ 上/ 分配/ 待处理/ 的/ 请求/ ./ 传统/ 的/ 服务/ 组合/ 方法/ 大多/ 属于/ 单一/ 路径/ 的/ 服务/ 非/ 功能/ 需求/ ,/ 如/ 所有/ 请求/ 都/ 要求/ 成功率/ 不/ 低于/ 90/ %/ ,/ 响应/ 时间/ 不/ 超过/ 7s/ ./ 定义/ 2/ ./ 服务/ 组合/ 路径/ (/ 以下/ 简称/ 路径/ )/ 指/ 为/ 处理/ 用户/ 请求/ 而/ 从/ 起始/ 状态/ 到/ 终止/ 状态/ 构建/ 的/ 一个/ 服务/ 节点/ 处理/ 序列/ ./ 显然/ ,/ 这/ 一序列/ 不是/ 唯一/ 的/ ,/ 所以/ 对于/ 同一个/ 请求/ 流/ 而言/ ,/ 存在/ 多个/ 路径/ ./ 如图/ 2/ 所示/ ,/ 假设/ 工作/ 流/ 模型/ 由/ 3/ 个/ 服务/ 类/ S1/ ,/ S2/ ,/ S3/ 以/ 顺序/ 结构/ 组成/ ,/ 其中/ 各/ 服务/ 类均/ 包含/ 3/ 个/ 服务/ ./ 图/ 2/ 中/ 显示/ 了/ 两条/ 处理/ 用户/ 请求/ 的/ 路径/ ,/ 即/ 路径/ 1/ :/ start/ →/ s13/ →/ s23/ →/ s33/ →/ end/ ;/ 路径/ 2/ :/ start/ →/ s11/ →/ s23/ →/ s31/ →/ end/ ./ 任何/ 满足用户/ 全局/ QoS/ 约束/ 的/ 路径/ 称之为/ 可行/ 路径/ ./ 属于/ 同一个/ 请求/ 流/ 的/ 不同/ 请求/ 可以/ 经过/ 不同/ 的/ 可行/ 路径/ ,/ 例如/ 部分/ 请求/ 可以/ 通过/ 路径/ 1/ 完成/ 服务/ 组合/ ;/ 而/ 另/ 一部分/ 请求/ 可以/ 通过/ 路径/ 2/ 完成/ 服务/ 组合/ ./ 当图/ 2/ 的/ 两条/ 路径/ 为/ 可行/ 路径/ 时/ ,/ 这/ 两条/ 路径/ 的/ 端/ 到/ 端/ QoS/ 必须/ 满足用户/ 的/ 全局/ QoS/ 约束/ ,/ 则/ 有/ 可行/ 路径/ 1/ :/ 可行/ 路径/ 2/ :/ 组合/ ./ 然而/ ,/ 单一/ 路径/ 的/ 服务/ 组合/ 是/ 多路径/ 服务/ 组合/ 的/ 特例/ ./ 当/ 服务/ 能耗/ 随/ 负载/ 快速增长/ 时/ ,/ 为了/ 保障/ 服务质量/ 和/ 降低/ 组合/ 服务/ 的/ 总体/ 能耗/ 需要/ 采用/ 多路径/ 的/ 服务/ 组合/ 方法/ ./ 5.2/ 数学模型/ 工作/ 流/ 模型/ WM/ 一般/ 包含/ 顺序/ 、/ 并发/ 、/ 选择/ 和/ 循环/ 4/ 种/ 基本/ 结构/ ./ 根据/ 文献/ [/ 17/ ]/ ,/ 这些/ 结构/ 又/ 可以/ 转化/ 为/ 顺序/ 结构/ ./ 本文/ 仅/ 考虑/ 顺序/ 结构/ 的/ 组合/ 服务/ ./ 设有/ 一个/ 由/ n/ 个/ 服务/ 类/ 组成/ 的/ 顺序/ 结构/ 的/ 工作/ 流/ 模型/ (/ 依次/ 为/ S1/ →/ S2/ →/ …/ →/ Sn/ )/ ,/ 并且/ 每个/ 服务/ 类/ Page7/ 有/ m/ 个/ 候选/ 服务/ ./ 存在/ 一个/ 请求/ 流/ f/ ,/ f/ 中/ 的/ 请求/ 以/ 速率/ 为/ λ/ 的/ 泊松流/ 到达/ ,/ 并且/ 用户/ 请求/ 对/ 响应/ 时间/ 、/ 成功率/ 和/ 成本/ 的/ 全局/ 约束/ 分别/ 表示/ 为/ Q/ (/ T/ )/ 、/ Q/ (/ SR/ )/ 、/ Q/ (/ C/ )/ ./ 设/ pk/ 为/ 一条/ 满足/ 全局/ QoS/ 约束/ 的/ 可行/ 路径/ ,/ Ω/ (/ p/ )/ 表示/ 可行/ 路径/ pk/ 组成/ 的/ 集合/ ./ 本文/ 假设/ 至少/ 存在/ 一条/ 可行/ 路径/ ./ 为/ 方便/ 表述/ ,/ 令/ |/ Ω/ (/ p/ )/ |/ =/ d/ ,/ d/ 表示/ 最终/ 找到/ 的/ 可行/ 路径/ 数量/ ./ 根据/ 本文/ 的/ 服务/ 能耗/ 模型/ 和/ 假设/ 条件/ ,/ 组合/ 服务/ 的/ 单位/ 时间/ 总/ 能耗/ 最小/ 也/ 就/ 意味着/ 总/ 能耗/ 最小/ ./ 因此/ ,/ 根据/ 式/ (/ 2/ )/ ,/ 模型/ 优化/ 的/ 目标/ 是/ 最小化/ 组合/ 服务/ 的/ 单位/ 时间/ 总/ 能耗/ ./ 通过/ 对式/ (/ 2/ )/ 的/ 进一步/ 细化/ ,/ 能耗/ 感知/ 的/ 多路径/ 服务/ 组合/ 方法/ 可以/ 由/ 下列/ 数学模型/ 表示/ :/ min/ ∑/ n/ 烄/ subjectto/ ∑/ pk/ ∈/ Ω/ (/ p/ )/ lk/ =/ λ/ ,/ lk/ / 0/ 烅/ ∑/ pk/ ∈/ Ω/ (/ p/ )/ xijklik/ =/ λ/ ij/ / λ/ Max/ ∑/ m/ 烆/ 其中/ ,/ xijk/ 代表/ 一个/ 指示/ 变量/ ,/ 取值/ 为/ 0/ 和/ 1/ ,/ 其值/ 为/ 1/ 表示/ 第/ k/ (/ 1/ / k/ / d/ )/ 个/ 可行/ 路径/ pk/ 经过/ 了/ 服务/ 节点/ sij/ ;/ 其值/ 为/ 0/ ,/ 表示/ 第/ k/ (/ 1/ / k/ / d/ )/ 个/ 可行/ 路径/ pk/ 未/ 经过/ 服务/ 节点/ sij/ ;/ lk/ 表示/ 在/ 可行/ 路径/ pk/ 上/ 分配/ 的/ 流量/ (/ 也/ 就是/ 请求/ 速率/ )/ ;/ lik/ 表示/ 在/ 可行/ 路径/ pk/ 上/ 到达/ 服务/ 类/ Si/ 的/ 请求/ 速率/ (/ 也/ 就是/ 在/ 可行/ 路径/ pk/ 上/ 到达/ 第/ i/ 个/ 服务/ 节点/ 的/ 请求/ 速率/ )/ ./ 由于/ 服务/ sij/ 在/ 处理/ 请求/ 的/ 过程/ 中/ ,/ 存在/ 一定/ 的/ 失败/ 概率/ (/ 1/ -/ q/ (/ SR/ )/ 文/ 假设/ 请求/ 处理/ 失败/ 后/ 立即/ 被/ 丢弃/ ,/ 不再/ 被/ 该/ 路径/ 上/ 的/ 后继/ 服务/ 节点/ 所/ 处理/ ./ 那么/ lik/ 由下式/ 计算/ 模型/ 的/ 第/ 1/ 条/ 约束条件/ 保证/ 了/ 在/ 各条/ 可行/ 路径/ 上/ 分配/ 的/ 请求/ 速率/ lk/ 之/ 和/ 等于/ 请求/ 流/ f/ 的/ 请求/ 到达/ 速率/ λ/ ;/ 第/ 2/ 条/ 约束/ 保证/ 了/ 服务/ sij/ 的/ 请求/ 到达/ 速率/ 不/ 超过/ λ/ Max/ 径/ pk/ 上/ ,/ 对于/ 任意/ 一个/ 服务/ 类/ 而言/ pk/ 只能/ 经过/ 也/ 必须/ 经过/ 属于/ 该类/ 的/ 一个/ 服务/ 节点/ ./ 根据/ 前面/ 提到/ 的/ 可行/ 路径/ 定义/ ,/ 任意/ 一条/ 可行/ 路径/ pk/ ∈/ Ω/ (/ p/ )/ 必然/ 满足/ 如下/ 约束/ :/ 可以/ 看出/ ,/ 该/ 问题/ 为/ 受限/ 的/ 多路径/ 问题/ (/ RestrictedMultipathProblem/ )/ ,/ 是/ NP/ -/ 难/ 问题/ [/ 26/ ]/ ./ 5.3/ 启发式/ 的/ 多路径/ 服务/ 组合/ 算法/ 在/ 前面/ 的/ 问题/ 模型/ 中/ ,/ xijk/ 和/ lk/ 是/ 待/ 求解/ 的/ 变量/ ./ 为了/ 求解/ 该/ 问题/ ,/ 本文/ 提出/ 了/ 一种/ 启发式/ 的/ 多路径/ 服务/ 组合/ 算法/ ,/ 该/ 算法/ 步骤/ 分为/ 两/ 大部分/ :/ 一是/ 找出/ 若干条/ 可行/ 路径/ ,/ 即/ 求解/ xijk/ ;/ 二是/ 在/ 找出/ 的/ 可行/ 路径/ 上/ 分配/ 请求/ 速率/ ,/ 即/ 求解/ lk/ ./ 5.3/ ./ 1/ 可行/ 路径/ 查找/ 根据/ 前面/ 的/ 问题/ ,/ 设/ 工作/ 流/ 执行/ 的/ 顺序/ 为/ 服务/ 类/ S1/ ,/ S2/ ,/ …/ ,/ Sn/ ./ 可行/ 路径/ 查找/ 算法/ FP/ 的/ 思想/ 可以/ 简单/ 描述/ 为/ :/ 按照/ 工作/ 流/ 执行/ 顺序/ ,/ 依次/ 地/ 对/ 各/ 服务/ 节点/ 构建/ 若干条/ 到达/ 该/ 服务/ 的/ 路径/ ,/ 最终/ 构建/ 一组/ 从/ 起始/ 状态/ 到/ 终止/ 状态/ 的/ 可行/ 路径/ ./ 由于/ 搜索/ 所有/ 可行/ 路径/ 的/ 开销/ 极大/ ,/ 故/ 在/ 各/ 服务/ 节点/ 中/ ,/ 当可达/ 路径/ 数量/ 超过/ z/ 时/ 按照/ 一定/ 筛选/ 规则/ 只/ 记录/ z/ 条/ 路径/ ./ 本文/ 用/ Ω/ (/ sij/ )/ 表示/ 到达/ 服务/ sij/ 节点/ 的/ 路径/ 集合/ ./ 显然/ ,/ 随着/ i/ 的/ 增加/ ,/ 各/ 服务/ sij/ 节点/ 需要/ 维护/ 计算/ 的/ 路径/ 数量/ 会/ 指数/ 级/ 增加/ ,/ 集合/ Ω/ (/ sij/ )/ 也/ 随之/ 急剧/ 膨胀/ ,/ 从而/ 导致/ 了/ 计算/ 量/ 的/ 大幅/ 增加/ ./ 本/ 算法/ 通过/ 使用/ 代价/ 函数/ 对/ 各/ 服务/ 节点/ sij/ 的/ 路径/ 进行/ 评估/ 和/ 筛选/ ,/ 使得/ 各/ 服务/ 节点/ 维护/ 的/ 最大/ 路径/ 数量/ 为/ z/ ./ 显然/ ,/ 最终/ 找到/ 的/ 可行/ 路径/ 数量/ d/ / zm/ ./ 代价/ 函数/ 由/ 两/ 部分/ 组成/ :/ QoS/ 代价/ 函数/ ξ/ QoS/ (/ vij/ )/ 和/ 流量/ 代价/ 函数/ ξ/ λ/ (/ vij/ )/ ./ QoS/ 代价/ 函数/ ξ/ QoS/ (/ vij/ )/ 计算/ 如下/ :/ ξ/ QoS/ (/ vij/ )/ =/ maxGT/ (/ vij/ )/ 其中/ ,/ vij/ 为/ 到达/ 服务/ sij/ 节点/ 的/ 一条/ 路径/ ,/ 它/ 表示/ 为/ 该/ 路径/ 经过/ 的/ 服务/ 节点/ 组成/ 的/ 有序/ 集合/ ;/ GT/ (/ vij/ )/ ,/ GC/ (/ vij/ )/ ,/ GSR/ (/ vij/ )/ 分别/ 表示/ 在/ 路径/ vij/ 上/ 的/ 响应/ 时间/ 、/ 成本/ 和/ 成功率/ 的/ 聚合/ 函数/ ,/ 计算/ 方式/ 如下/ :/ Page8/ 流量/ 代价/ 函数/ 计算/ 如下/ :/ 其中/ λ/ / 为/ 路径/ vij/ 上/ 能够/ 承载/ 的/ 最大/ 流量/ ,/ 由下式/ 计算/ :/ 因此/ ,/ 总/ 代价/ 函数/ ξ/ (/ vij/ )/ 可/ 表示/ 为/ 其中/ ,/ θ/ (/ 0/ / θ/ / 1/ )/ 为/ 权重/ 因子/ ,/ 它/ 表示/ QoS/ 代价/ 在/ 总/ 代价/ 中所/ 占/ 的/ 比例/ ./ 算法/ 1/ ./ 可行/ 路径/ 查找/ 算法/ FP/ ./ 输入/ :/ S1/ ,/ S2/ ,/ …/ ,/ Sn/ ,/ z/ ,/ λ/ ,/ θ/ ,/ Q/ (/ T/ )/ ,/ Q/ (/ SR/ )/ ,/ Q/ (/ C/ )/ 输出/ :/ Ω/ (/ p/ )/ 算法/ 描述/ :/ // / 初始化/ / // Fori/ =/ 1tonForj/ =/ 1tomForj/ =/ 1tom/ {/ // / 依次/ 构建/ Ω/ (/ sij/ )/ / // Fori/ =/ 1ton/ {/ Forj/ =/ 1tom/ {/ Foreachvijin/ Ω/ (/ sij/ )/ If/ (/ |/ Ψ/ ij/ |/ / z/ )/ Ω/ (/ sij/ )/ =/ Ψ/ ij/ ;/ Else/ }/ If/ (/ i/ </ n/ )/ // / 预/ 构建/ Ω/ (/ si/ +/ 1/ ,/ y/ )/ / // }/ // / 将/ 所有/ 可行/ 路径/ 合并/ / // Forj/ =/ 1tom/ Ω/ (/ p/ )/ ←/ Ω/ (/ snj/ )/ ;/ return/ Ω/ (/ p/ )/ FP/ 算法/ 主要/ 包括/ 两/ 大部分/ :/ 初始化/ 部分/ 和/ Ω/ (/ sij/ )/ 构建/ 部分/ ./ 在/ 初始化/ 部分/ 的/ 算法/ 复杂度/ 为/ O/ (/ nm/ )/ ;/ Ω/ (/ sij/ )/ 构建/ 部分/ 总共/ 需要/ 进行/ n/ 次/ 循环/ ./ 在/ 一次/ 循环/ 中/ ,/ 算法/ 主要/ 分为/ 两个/ 部分/ :/ 一部分/ 是/ 构建/ 当前/ 服务/ 类/ 节点/ 的/ 可达/ 路径/ 集合/ ;/ 另/ 一部分/ 是/ 预/ 构建/ 下/ 一个/ 服务/ 类/ 节点/ 的/ 候选/ 可/ 达/ 路径/ 集合/ ./ 在/ 第一/ 部分/ 中/ 生成/ 一个/ 服务/ 的/ 可达/ 路径/ 集合/ 需要/ 最/ 多/ 进行/ mz/ 次/ 操作/ ,/ 而/ 当/ 可达/ 路径/ 数量/ 超过/ z/ 时/ ,/ 需要/ 对/ 这些/ 路径/ 的/ 代价/ 函数/ 值/ 进行/ 排序/ 和/ 筛选/ ./ 这/ 一个/ 过程/ 可以/ 采用/ 经典/ 的/ 排序/ 算法/ ,/ 如/ 快速/ 排序/ ./ 在/ 这/ 一部分/ 共/ 需要/ 对/ m/ 个/ 服务/ 进行/ 可/ 达/ 路径/ 的/ 构建/ ,/ 故/ 第一/ 部分/ 的/ 算法/ 复杂度/ 为/ O/ (/ m2zlog/ (/ mz/ )/ )/ ;/ 第二/ 部分/ 由/ 一个/ 三重/ 循环/ 组成/ ,/ 其/ 总/ 循环/ 次数/ 为/ m2z/ ./ 因此/ ,/ FP/ 算法/ 的/ 总/ 时间/ 复杂度/ 为/ O/ (/ nm2zlog/ (/ mz/ )/ )/ ./ 5.3/ ./ 2/ 请求/ 速率/ 分配/ 请求/ 速率/ 分配/ 的/ 目的/ 是/ 在/ 前面/ 获得/ 的/ 可行/ 路径/ 上/ 分配/ 流量/ (/ 即/ 请求/ 速率/ )/ 以/ 避免/ 个别/ 服务/ 过载/ ,/ 保证/ 服务质量/ 并/ 降低/ 组合/ 服务/ 的/ 总/ 能耗/ ./ 此时/ ,/ 前面/ 所示/ 的/ 问题/ 可以/ 简化/ 表示/ 成/ 如下/ 数学模型/ :/ 其中/ ,/ l1/ ,/ …/ ,/ ld/ 是/ 该/ 模型/ 的/ 解/ ./ 当/ 采用/ 能耗/ 模型/ I/ 时/ ,/ 该/ 数学模型/ 为/ 非线性/ 规划/ 模型/ ;/ 当/ 采用/ 能耗/ 模型/ II/ 时/ ,/ 该/ 数学模型/ 为/ 线性规划/ 模型/ ./ 非线性/ 规划/ 工具/ Lingo9/ ./ 0/ ①/ 是/ 一种/ 优秀/ 的/ 求解/ 数学/ 规划/ 问题/ 的/ 工具/ ./ 它/ 既/ 可/ 用于/ 求解/ 非线性/ 规划/ 模型/ ,/ 也/ 可以/ 用于/ 求解/ 线性规划/ 模型/ ./ 本/ 算法/ 采用/ Lingo9/ ./ 0/ 来/ 实现/ 请求/ 速率/ 的/ 分配/ ./ 6/ 仿真/ 实验/ 6.1/ 实验/ 环境/ 本文/ 通过/ 仿真/ 实验/ 来/ 模拟/ 服务/ 组合/ 环境/ 并/ 验证/ 了/ 能耗/ 感知/ 的/ 多路径/ 服务/ 组合/ 方法/ 的/ 有效性/ ./ 实验/ 环境/ 为/ HPIntelP4CPU/ 、/ 4GBRAM/ 、/ Windows2003/ 、/ C#/ ./ 实验/ 采用/ 经典/ 的/ 、/ 具有/ 代表性/ 的/ 全局/ 优化/ 服务/ 组合/ 方法/ [/ 14/ ]/ (/ 以下/ 用/ Global/ 表示/ )/ 作为/ 能耗/ 节省/ 的/ 比/ ①/ http/ :/ // // www/ ./ lingo/ ./ com/ // Page9/ 较/ 基准/ ,/ 并/ 采用/ 混合/ 整数/ 规划/ (/ MixedIntegrateProgramming/ ,/ MIP/ )/ 工具/ Lpsolver5/ ./ 5/ ①/ 实现/ 该/ 方法/ ;/ 本文/ 所/ 提出/ 的/ 方法/ (/ EAMSC/ )/ 采用/ C#/ 程序/ 和/ 非线性/ 规划/ 工具/ Lingo/ 实现/ ./ 本/ 实验/ 采用/ 的/ 工作/ 流/ 模型/ 由/ n/ 个/ 服务/ 类以/ 顺序/ 结构/ 构成/ ,/ 每个/ 服务/ 类有/ m/ 个/ 服务/ ./ 实验/ 的/ 主要/ 数据/ (/ 如/ QoS/ 和/ 能耗/ 参数/ )/ 是/ 随机/ 生成/ 的/ ./ 表/ 1/ 显示/ 了/ 相关/ 的/ 实验/ 参数/ 配置/ ./ 6.2/ 实验/ 结果/ 与/ 分析/ 能/ 效率/ 和/ 计算/ 性能/ ,/ 本文/ 定义/ 了/ 如下/ 评价/ 指标/ ./ 定义/ 5/ ./ 能耗/ 比/ ER/ 表示/ 采用/ 能耗/ 感知/ 的/ 多路径/ 服务/ 组合/ 方法/ (/ EAMSC/ )/ 所/ 造成/ 的/ 总/ 能耗/ 与/ 基准/ 能耗/ (/ 即/ 采用/ Global/ 方法/ 所/ 造成/ 的/ 总/ 能耗/ )/ 之比/ ./ 为了/ 验证/ 能耗/ 感知/ 的/ 多路径/ 服务/ 组合/ 方法/ 的/ 节/ 请求/ 到达/ 速率/ (/ λ/ ,/ reqs/ // s/ )/ 20/ ~/ 100/ 每个/ 服务/ 类/ 的/ 服务/ 数/ (/ m/ )/ 100/ ~/ 500/ 服务/ 类/ 数量/ (/ n/ )/ 用户/ 全局/ QoS/ 约束/ (/ Q/ (/ T/ )/ ,/ Q/ (/ SR/ )/ ,/ Q/ (/ C/ )/ )/ 服务/ QoS/ (/ q/ (/ T/ )/ 能耗/ 参数/ 与/ 最大/ 请求/ 速率/ λ/ Maxij/ 算法/ 参数/ (/ z/ ,/ θ/ )/ z/ 在/ [/ 5/ ,/ 25/ ]/ 之间/ ;/ θ/ 在/ [/ 0/ ,/ 1/ ]/ 之间/ 基准/ 能耗/ 的/ 计算方法/ 是/ :/ 首先/ 将/ 所有/ λ/ max/ 服务/ 从/ 候选/ 服务/ 集合/ 中/ 剔除/ ;/ 其次/ ,/ 在/ 剩余/ 的/ 候选/ 服务/ 中/ ,/ 采用/ Global/ 方法/ 生成/ 组合/ 服务/ ;/ 最后/ ,/ 计算/ 组合/ 服务/ 的/ 总体/ 能耗/ 得到/ 基准/ 能耗/ ./ 显然/ ER/ 小于/ 1/ 时/ ,/ 表明/ 本文/ 的/ 服务/ 组合/ 方法/ 在/ 节省/ 能量/ 方面/ 具有/ 优势/ ,/ 并且/ 其值/ 越小越/ 说明/ 本文/ 方法/ 的/ 节能/ 效率/ 越高/ ./ 该/ 指标/ 主要/ 受/ 请求/ 到达/ 速率/ λ/ 、/ 用户/ 全局/ QoS/ 约束/ 和/ 算法/ 参数/ (/ z/ )/ 的/ 影响/ ,/ 它/ 反映/ 了/ 本文/ 方法/ 的/ 节能/ 效率/ ./ 定义/ 6/ ./ 组合/ 成功率/ CSR/ 指/ 采用/ 本文/ 的/ 服务/ 组合/ 方法/ 能够/ 成功/ 生成/ 组合/ 服务/ 方案/ 的/ 概率/ ./ 该/ 指标/ 主要/ 受/ 算法/ 参数/ (/ z/ ,/ θ/ )/ 和/ 用户/ 全局/ QoS/ 约束/ 的/ 影响/ ,/ 它/ 反映/ 了/ 本文/ 方法/ 的/ 性能/ ./ 定义/ 7/ ./ 计算/ 时间/ CT/ 指/ 算法/ 生成/ 服务/ 组合/ 方案/ 所/ 需/ 的/ 计算/ 时间/ ./ 本文/ 服务/ 组合/ 方法/ 的/ 计算/ 时间/ 主要/ 由/ 两/ 部分/ 组成/ :/ 一是/ 可行/ 路径/ 查找/ 的/ 计算/ 开销/ ;/ 二是/ 请求/ 速率/ 分配/ 的/ 计算/ 开销/ ./ 该/ 指标/ 主要/ 受/ 服务/ 规模/ (/ n/ ,/ m/ )/ 和/ 算法/ 参数/ (/ z/ )/ 的/ 影响/ ,/ 它/ 反映/ 了/ 算法/ 的/ 性能/ 以及/ 适应/ 较/ 大规模/ 服务/ 环境/ 的/ 能力/ ./ 6.2/ ./ 1/ 能耗/ 比/ ER/ 实验/ 1/ ./ 请求/ 到达/ 速率/ λ/ 对/ 能耗/ 比/ 的/ 影响/ ./ 本组/ 实验/ 模拟/ 仿真/ 了/ 请求/ 到达/ 速率/ λ/ 由/ 20/ ~/ 100/ 时/ 的/ 能耗/ 比/ ER/ 变化/ ./ 图/ 3/ 和/ 图/ 4/ 显示/ 了/ 两种/ 不同/ 服务/ 能耗/ 模型/ 在/ 不同/ λ/ 下/ 的/ 能耗/ 比/ ./ 从/ 这/ 两个/ 图中/ 可以/ 看出/ 当/ z/ 较大/ 时/ ,/ 其/ 能耗/ 比/ ER/ 也/ 相对/ 较/ 低/ ./ 在/ 服务/ 能耗/ 模型/ I/ 中/ ,/ 不同/ λ/ 下/ 的/ 能耗/ 比/ ER/ 在/ 大约/ 0.35/ 到/ 0.8/ 之间/ 变化/ ;/ 在/ 服务/ 能耗/ 模型/ II/ 中/ ,/ 不同/ λ/ 下/ 的/ 能耗/ 比/ ER/ 在/ 大约/ 0.35/ ~/ 0.7/ 之间/ 变化/ ./ 这/ 说明/ 本文/ 方法/ 具有/ 较/ 好/ 的/ 节能/ 效率/ ,/ 与/ 传统/ 的/ 服务/ 组合/ 方法/ 相比/ ,/ 降低/ 能耗/ 的/ 效果/ 比较/ 明显/ ./ 这是/ 由于/ 本文/ 的/ 服务/ 组合/ 方法/ 考虑/ 了/ 服务/ 的/ 能耗/ 和/ 负载/ 因素/ ,/ 在/ 多个/ 可行/ 的/ 组合/ 服务/ 路径/ 上/ 规划/ 请求/ 流量/ 的/ 分配/ ,/ 从而/ 有效/ 地/ 降低/ 了/ 组合/ 服务/ 的/ 总体/ 能耗/ ./ 图/ 3/ 请求/ 到达/ 速率/ λ/ 对/ 能耗/ 比/ ER/ 的/ 影响/ (/ 能耗/ 模型/ I/ )/ 图/ 4/ 请求/ 到达/ 速率/ λ/ 对/ 能耗/ 比/ ER/ 的/ 影响/ (/ 能耗/ 模型/ II/ )/ 实验/ 2/ ./ 用户/ 全局/ QoS/ 约束/ 对/ 能耗/ 比/ 的/ 影响/ ./ 本组/ 实验/ 模拟/ 仿真/ 了/ 在/ 不同/ 用户/ 全局/ QoS/ 约束/ 下/ 的/ 能耗/ 比/ 变化/ ./ 由于/ 本文/ 的/ QoS/ 属性/ 有/ 3/ 种/ ,/ 本/ 实验/ 仅以/ 其中/ 的/ 响应/ 时间/ 为/ 例来/ 说明/ 用户/ 全局/ QoS/ 约束/ 对/ 能耗/ 比/ ER/ 的/ 影响/ ./ 从图/ 5/ 可以/ 看出/ ,/ 在/ 相同/ 规模/ 的/ 服务/ 场景/ 中/ ,/ 随着/ 用户/ 对/ 全局/ 响应/ 时间/ 的/ 要求/ 不断/ 降低/ (/ Q/ (/ T/ )/ 逐渐/ 增大/ )/ ,/ 能耗/ 比/ ER/ 逐渐/ 降低/ ./ 这/ 说明/ 当/ 用户/ 对/ 组合/ 服务/ 的/ 端/ 到/ 端/ QoS/ 提出/ ①/ http/ :/ // // lpsolve/ ./ sourceforge/ ./ net/ // Page10/ 较/ 高/ 要求/ 时/ ,/ 本文/ 方法/ 的/ 节能/ 效果/ 相对/ 不/ 明显/ ./ 其/ 原因/ 主要/ 是/ 当/ 全局/ QoS/ 约束/ 较/ 苛刻/ 时/ ,/ 存在/ 的/ 可行/ 路径/ 较/ 少/ ,/ 因此/ 请求/ 可/ 选择/ 的/ 组合/ 服务/ 路径/ 较/ 少/ ,/ 请求/ 流量/ 的/ 分流/ 效果/ 相对/ 不/ 明显/ ,/ 从而/ 造成/ 其/ 能耗/ 比/ 相对/ 较大/ ./ 而/ 这/ 又/ 从/ 另/ 一个/ 角度/ 说明/ 了/ ,/ 应/ 通过/ 协商/ 等/ 方式/ 适当/ 降低/ 用户/ 对/ 组合/ 服务/ 的/ 端/ 到/ 端/ QoS/ 需求/ ,/ 避免/ 用户/ 片面追求/ 高/ QoS/ 而/ 带来/ 的/ 不必要/ 能耗/ ./ 图/ 5/ 全局/ 响应/ 时间/ Q/ (/ T/ )/ 对/ 能耗/ 比/ ER/ 的/ 影响/ 实验/ 3/ ./ 算法/ 参数/ z/ 对/ 能耗/ 比/ 的/ 影响/ ./ 本组/ 实验/ 模拟/ 仿真/ 了/ 在/ 不同/ 算法/ 参数/ z/ 下/ 的/ 能耗/ 比/ 变化/ ./ 从图/ 6/ 可以/ 看出/ ,/ 随着/ z/ 的/ 增加/ 能耗/ 比/ ER/ 逐渐/ 下降/ ./ 其/ 原因/ 在于/ ,/ 由于/ z/ 的/ 增长/ 导致/ 算法/ 实际/ 找到/ 的/ 可行/ 路径/ 数量/ 增加/ ,/ 为/ 后面/ 的/ 请求/ 速率/ 分配/ 提供/ 了/ 更/ 多/ 的/ 选择/ ,/ 使/ 请求/ 流量/ 的/ 分流/ 效果/ 更/ 明显/ ,/ 故/ 能耗/ 比会/ 相应/ 的/ 下降/ ./ 此外/ ,/ 还/ 可以/ 发现/ ,/ 采用/ 服务/ 能耗/ 模型/ II/ 时/ 的/ 能耗/ 比要/ 低于/ 采用/ 服务/ 能耗/ 模型/ I/ 时/ 的/ 能耗/ 比/ ./ 这/ 表明/ 本文/ 所/ 提出/ 的/ 能耗/ 感知/ 的/ 多路径/ 服务/ 组合/ 方法/ 在/ 采用/ 服务/ 能耗/ 模型/ II/ 的/ 组合/ 服务/ 场景/ 中/ 具有/ 更好/ 的/ 节能/ 效果/ ./ 6.2/ ./ 2/ 组合/ 成功率/ CSR/ 实验/ 4/ ./ 算法/ 参数/ (/ z/ ,/ θ/ )/ 对/ 组合/ 成功率/ 的/ 影响/ ./ 本组/ 实验/ 测试/ 了/ 在/ 不同/ 算法/ 参数/ (/ z/ ,/ θ/ )/ 下/ 的/ 组合/ 成功率/ 变化/ ./ 图/ 7/ 和/ 图/ 8/ 所示/ 的/ 组合/ 成功率/ 是/ 在/ 对/ 100/ 组/ 随机/ 生成/ 的/ 服务/ QoS/ 数据/ 重复/ 实验/ 的/ 基础/ 上/ 获得/ 的/ ./ 从图/ 7/ 可以/ 看出/ ,/ 随着/ z/ 的/ 增长/ ,/ 组合/ 成功率/ 逐渐/ 增加/ ./ 这是/ 由于/ 在/ FP/ 算法/ 中/ ,/ 较大/ 的/ z/ 值/ 使得/ 中间/ 的/ 服务/ 类/ 节点/ 可以/ 保存/ 更/ 多/ 的/ 路径/ 信息/ ,/ 这/ 导致/ 了/ 最终/ 找到/ 可行/ 路径/ 的/ 概率/ 相对/ 提高/ ,/ 从而/ 提高/ 了/ 服务/ 组合/ 成功/ 的/ 概率/ ./ 此外/ ,/ 当/ 请求/ 到达/ 速率/ λ/ 较大/ 时/ ,/ 组合/ 成功率/ 会/ 相对/ 较/ 低/ ./ 这/ 是因为/ 当/ 请求/ 负载/ 较大/ 时/ ,/ 增加/ 了/ 相当/ 一部分/ 服务/ 发生/ 过载/ 的/ 概率/ 从而/ 导致/ 请求/ 流量/ 分配/ 失败/ ./ 从图/ 8/ 可以/ 看出/ ,/ 不同/ θ/ 会/ 对/ 组合/ 成功率/ 产生/ 一定/ 的/ 影响/ ./ 当/ 请求/ 到达/ 速率/ λ/ 较/ 小时/ (/ λ/ =/ 60/ )/ ,/ θ/ 对/ 组合/ 成功率/ 影响/ 较/ 小/ ;/ 而/ 请求/ 到达/ 速率/ λ/ 较大/ 时/ (/ λ/ =/ 80/ ,/ 100/ )/ ,/ θ/ 对/ 组合/ 成功率/ 影响/ 较大/ ./ 这/ 是因为/ 当/ λ/ 较/ 小时/ ,/ 大多数/ 服务/ 不会/ 发生/ 过载/ ,/ 因而/ 成本/ 函数/ 中/ 的/ 流量/ 成本/ 为/ 0/ 的/ 概率/ 较大/ ,/ 可以/ 忽略/ ./ 成本/ 函数/ 主要/ 受/ QoS/ 成本/ 支配/ ,/ θ/ 对/ 可行/ 路径/ 查找/ 的/ 影响/ 较/ 小/ ,/ 故/ θ/ 对/ 组合/ 成功率/ 影响/ 较/ 小/ ;/ 而/ 当/ λ/ 较大/ 时/ ,/ 成本/ 函数/ 中/ 的/ 流量/ 成本/ 不能/ 忽略/ ,/ 故/ θ/ 对/ 组合/ 成功率/ 影响/ 较大/ ./ 在/ 本组/ 实验/ 环境/ 中/ ,/ 当/ λ/ 较大/ 时/ θ/ 取值/ 在/ 0.3/ ~/ 0.5/ 之间/ 可以/ 获得/ 相对/ 较/ 高/ 的/ 组合/ 成功率/ ./ 实验/ 5/ ./ 用户/ 全局/ QoS/ 约束/ 对/ 组合/ 成功率/ 的/ 影响/ ./ 本组/ 实验/ 测试/ 了/ 在/ 不同/ 用户/ 全局/ QoS/ 约束/ 下/ 的/ 组合/ 成功率/ 变化/ ./ 本/ 实验/ 仅以/ QoS/ 中/ 的/ 响应/ 时间/ 为/ 例来/ 说明/ 用户/ 全局/ QoS/ 约束/ 对/ 组合/ 成功率/ 的/ 影响/ ./ 图/ 9/ 所示/ 的/ 组合/ 成功率/ 是/ 在/ 对/ 100/ 个/ 随机/ 生成/ 的/ 服务/ QoS/ 数据/ 进行/ 重复/ 实验/ 的/ 基础/ 上/ 获得/ 的/ ./ 从/ Page11/ 图/ 9/ 可以/ 看出/ 随着/ 对/ 全局/ 响应/ 时间/ 要求/ 的/ 降低/ ,/ 组合/ 的/ 成功率/ 逐渐/ 上升/ ./ 图/ 9/ 全局/ 响应/ 时间/ Q/ (/ T/ )/ 对/ 组合/ 成功率/ CSR/ 的/ 影响/ 6.2/ ./ 3/ 计算/ 时间/ CT/ 实验/ 6/ ./ 服务/ 规模/ 对/ 计算/ 时间/ 的/ 影响/ ./ 本组/ 实验/ 测试/ 了/ 在/ 不同/ 服务/ 规模/ (/ n/ ,/ m/ )/ 下/ 的/ 计算/ 时间/ 变化/ ./ 图/ 10/ 显示/ 了/ 在/ 不同/ n/ 时/ ,/ m/ 的/ 增长/ 对/ 计算/ 时间/ 的/ 影响/ ./ 可以/ 看出/ 随着/ m/ 的/ 增加/ 计算/ 时间/ 开始/ 快速/ 增加/ ./ 尤其/ 当/ n/ 较大/ 时/ ,/ 计算/ 时间/ 的/ 增长/ 也/ 较/ 快/ ./ 实验/ 7/ ./ 算法/ 参数/ z/ 对/ 计算/ 时间/ 的/ 影响/ ./ 本组/ 实验/ 测试/ 了/ 本文/ 算法/ 在/ 不同/ 算法/ 参数/ z/ 下/ 的/ 计算/ 时间/ 变化/ ./ 图/ 11/ 分别/ 显示/ 了/ 在/ 不同/ 服务/ 规模/ (/ n/ ,/ m/ )/ 时/ ,/ 本文/ 算法/ 的/ 计算/ 时间/ 变化/ ./ 可以/ 看出/ ,/ 随着/ z/ 的/ 增长/ ,/ 计算/ 时间/ 逐步/ 增加/ ,/ 其/ 增长速度/ 基本/ 呈/ 线性/ ./ 当/ 服务/ 规模/ 较大/ 时/ ,/ 其/ 计算/ 时间/ 也/ 增长/ 显著/ ./ 可见/ ,/ 较大/ 的/ z/ 虽然/ 有利于/ 提高/ 算法/ 的/ 优化/ 能力/ ,/ 但/ 同时/ 也/ 带来/ 了/ 较大/ 的/ 计算/ 代价/ ,/ 所以/ 需要/ 根据/ 实际/ 情况/ 合理/ 设定/ z/ 值/ ./ 例如/ 当/ 服务/ 规模/ (/ n/ 和/ m/ )/ 较大/ 时/ ,/ 可以/ 设定/ 较/ 小/ 的/ z/ 以便/ 计算/ 时间/ 维持/ 在/ 可以/ 接受/ 的/ 范围/ 内/ ./ 7/ 结论/ 与/ 下/ 一步/ 工作/ 本文/ 研究/ 了/ 服务/ 组合/ 的/ 能耗/ 问题/ ,/ 并/ 基于/ 工作/ 流/ 模型/ 和/ 服务/ 能耗/ 模型/ ,/ 提出/ 了/ 一种/ 能耗/ 感知/ 的/ 多路径/ 服务/ 组合/ 方法/ ./ 该/ 方法/ 通过/ 对/ 服务/ 组合/ 的/ 能耗/ 优化/ 问题/ 进行/ 数学/ 建模/ ,/ 并/ 提出/ 了/ 基于/ 启发式/ 的/ 多路径/ 服务/ 组合/ 算法/ ./ 仿真/ 实验/ 表明/ 本文/ 方法/ 能够/ 在/ 保证/ 端到/ 端/ QoS/ 的/ 前提/ 下/ 有效/ 地/ 节省/ 组合/ 服务/ 的/ 能耗/ ./ 本文/ 假设/ 服务/ 为/ 计算/ 密集型/ ,/ 故仅/ 考虑/ 了/ 服务/ 的/ 计算资源/ 所/ 造成/ 的/ 能耗/ ./ 下/ 一步/ 将/ 研究/ 组合/ 服务/ 之间/ 数据通信/ 所/ 造成/ 的/ 网络/ 能耗/ 问题/ ./ 

