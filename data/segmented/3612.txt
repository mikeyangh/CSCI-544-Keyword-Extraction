Page1/ 针对/ 泊松流/ 的/ 截止期/ 敏感/ 的/ 复杂/ 事件处理/ 资源分配/ 模型/ 谷峪/ 1/ )/ ,/ 2/ )/ 于戈/ 1/ )/ ,/ 2/ )/ 吕雁飞/ 3/ )/ 王义/ 1/ )/ 1/ )/ (/ 东北大学/ 信息科学/ 与/ 工程学院/ 沈阳/ 110819/ )/ 2/ )/ (/ 医学影像/ 计算/ 教育部/ 重点/ 实验室/ (/ 东北大学/ )/ 沈阳/ 110819/ )/ 3/ )/ (/ 北京大学/ 计算机/ 科学技术/ 系/ 北京/ 100871/ )/ 摘要/ 随着/ 无线/ 射频/ 识别/ 等/ 监控/ 技术/ 的/ 发展/ ,/ 事件/ 流上/ 的/ 复杂/ 事件处理/ 技术/ 得到/ 了/ 广泛/ 的/ 关注/ ./ 现有/ 的/ 事件/ 流/ 处理/ 技术/ 主要/ 提供/ 尽/ 最大/ 努力/ (/ Best/ -/ Effort/ )/ 式/ 的/ 服务/ 来/ 减少/ 平均/ 响应/ 时间/ ,/ 这种/ 方式/ 并/ 不能/ 在/ 确定/ 的/ 时间延迟/ 需求/ 下/ 输出/ 更/ 多/ 的/ 结果/ ./ 针对/ 监控/ 应用/ 中/ 的/ 确定性/ 服务质量/ 需求/ ,/ 讨论/ 了/ 常见/ 的/ 泊松/ 监控/ 流上/ 的/ 截止期/ 敏感/ 的/ 复杂/ 事件处理/ 最优化/ 资源分配/ 问题/ ./ 从/ 系统/ 服务/ 角度/ 对/ 事件/ 的/ 到达/ 和/ 复杂/ 事件处理/ 进行/ 了/ 理论/ 分析/ 和/ 建模/ ,/ 提出/ 了/ 复合/ 事件/ 的/ 截止期/ 满足/ 率/ 模型/ 和/ 多/ 事件/ 流/ 处理/ 乱序/ 反馈/ 修正/ 模型/ ,/ 进而/ 给出/ 最优化/ 资源分配/ 模型/ ./ 通过/ 合理/ 的/ 分配/ 处理/ 资源/ ,/ 保证/ 了/ 在/ 实时/ 限制/ 下/ 产生/ 更/ 多/ 的/ 正确/ 结果/ ,/ 兼顾/ 了/ 复杂/ 事件处理/ 的/ 实时性/ 和/ 正确性/ ./ 实验/ 结果表明/ ,/ 提出/ 的/ 相关/ 的/ 理论/ 估算/ 模型/ 和/ 资源分配/ 方案/ 是/ 正确/ 和/ 有效/ 的/ ,/ 对于/ 进一步/ 完善/ 复杂/ 应用/ 下/ 的/ 固/ 实时/ 限制/ 复杂/ 事件处理/ 框架/ 具有/ 重要/ 的/ 启发/ 意义/ 和/ 实用价值/ ./ 关键词/ 泊松流/ ;/ 复杂/ 事件处理/ ;/ 截止期/ 敏感/ ;/ 资源分配/ 模型/ ;/ 无线/ 射频/ 识别/ 1/ 引言/ 在/ 越来越/ 多/ 的/ 应用/ 中/ ,/ 数据/ 是/ 以流/ 的/ 形式/ 产生/ 的/ ,/ 对/ 数据流/ 进行/ 高效/ 实时/ 的/ 管理/ 得到/ 了/ 广泛/ 的/ 关注/ ./ 事件/ 流是/ 一种/ 特殊/ 的/ 数据流/ ,/ 针对/ 事件/ 流/ 的/ 复杂/ 事件处理/ 技术/ 可以/ 有效/ 地/ 支持/ 各类/ 监控/ 和/ 跟踪/ 应用/ ,/ 例如/ 对/ 人员/ 活动/ 、/ 道路交通/ 和/ 网络/ 访问/ 的/ 监控/ ./ 与/ 一般/ 的/ 数据流/ 上/ 基于/ 选择/ 、/ 投影/ 、/ 滑动/ 窗口/ 连接/ 和/ 聚集/ 这些/ 关系/ 操作/ 不同/ ,/ 复杂/ 事件处理/ 侧重于/ 从/ 事件/ 的/ 角度/ 探测/ 数据/ 之间/ 的/ 各种/ 复杂/ 的/ 模式/ [/ 1/ ]/ ./ 当/ 某个/ 满足/ 该/ 模式/ 的/ 复杂/ 事件/ 发生/ 了/ ,/ 就/ 需要/ 立即/ 告知/ 给/ 用户/ ,/ 并/ 作为/ 进一步/ 分析/ 和/ 行动/ 的/ 依据/ ./ 特别/ 地/ ,/ 随着/ 以/ RFID/ (/ 无线/ 射频/ 识别/ )/ 技术/ [/ 2/ ]/ 为/ 代表/ 的/ 对象/ 识别/ 和/ 跟踪/ 技术/ 的/ 不断/ 发展/ 并/ 逐渐/ 融入/ 了/ 我们/ 的/ 日常生活/ ,/ 隐含/ 各种/ 监控/ 对象/ 时空/ 信息/ 的/ 分布式/ 的/ 监控/ 流将会/ 高速/ 地/ 产生/ 并/ 大量/ 地/ 存在/ ./ 例如/ ,/ 在/ 一个/ RFID/ 智能/ 博物馆/ 监控/ 应用/ 中/ ,/ 每个/ 阅读器/ 负责/ 监控/ 某个/ 展台/ 的/ 人员/ 情况/ ,/ 每个/ 展台/ 的/ RFID/ 读数/ 就/ 构成/ 了/ 一个/ 高速/ 的/ 事件/ 流/ ./ 为了/ 查询/ 不同/ 展台/ 监控/ 的/ 事件/ 流/ 之间/ 的/ 模式/ (/ 如/ 查询/ 满足/ 特定/ 参观/ 路线/ 的/ 游客/ )/ ,/ 这些/ 事件/ 流会/ 被/ 汇聚/ 到/ 一个/ 中央/ 的/ 服务器/ 来/ 执行/ 复杂/ 事件/ 的/ 处理/ ./ 一方面/ ,/ 基于/ 事件/ 流/ 的/ 应用/ 往往/ 需要/ 面对/ 海量/ 的/ 数据/ ,/ 每个/ RFID/ 阅读器/ 同时/ 可以/ 感知/ 上/ 千个/ 监控/ 对象/ ,/ 而/ 一个/ 应用/ 场景/ 中/ 可能/ 存在/ 上/ 千个/ 阅读器/ ,/ 因此/ 高速/ 产生/ 的/ 数据/ 对系统/ 的/ 处理/ 能力/ 提出/ 了/ 挑战/ ./ 另一方面/ ,/ 从/ 服务质量/ 角度/ 来说/ ,/ 监控/ 应用/ 往往/ 有/ 比较/ 高/ 的/ 实时性/ 需求/ ,/ 特别/ 地/ ,/ 除了/ 针对/ 平均/ 延迟/ 的/ 软/ 实时/ 需求/ 外/ ,/ 很多/ 面向/ 关键性/ 任务/ 的/ 监控/ 应用/ 往往/ 会/ 有/ 固/ 实时/ 的/ 需求/ ,/ 即/ 对/ 每个/ 监控/ 结果/ 设定/ 结果/ 有效/ 的/ 截止期/ ./ 如果/ 超过/ 截止期/ 才/ 给出/ 结果/ ,/ 给出/ 的/ 结果/ 可能/ 没有/ 意义/ 甚至/ 造成危害/ ./ 目前/ 的/ 复杂/ 事件处理/ 系统/ 只/ 提供/ 尽/ 最大/ 努力/ 式/ 的/ 软/ 实时/ 服务/ ,/ 在/ 这种/ 服务/ 中/ ,/ 本质/ 上/ ,/ 来自/ 不同/ 源/ 的/ 事件/ 流/ 被/ 汇聚/ 到/ 一起/ ,/ 按照/ 所有/ 事件/ 的/ 发生/ 时间/ 进行/ 先进先出/ 式/ 的/ 在线/ 处理/ ,/ 在/ 有/ 明确/ 的/ 延迟/ 上限/ 限制/ 的/ 固/ 实时/ 应用/ 中/ ,/ 无法/ 给出/ 最多/ 的/ 满足条件/ 的/ 结果/ ./ 因此/ ,/ 本文/ 重点/ 对/ 基于/ 确定性/ 服务质量/ 的/ 复杂/ 事件处理/ 模型/ 进行/ 了/ 研究/ ,/ 旨在/ 现有/ 的/ 资源/ 条件/ 下/ ,/ 通过/ 合理/ 的/ 为/ 各个/ 事件/ 流/ 分配/ 不同/ 的/ 处理/ 时间/ ,/ 从而/ 输出/ 最多/ 的/ 满足/ 截止期/ 要求/ 的/ 结果/ 事件/ ./ 特别/ 地/ ,/ 由于/ 很多/ 的/ 事件/ 流/ 监控/ 应用/ 都/ 可以/ 用泊松/ 过程/ 来/ 反映/ 数据/ 的/ 到达/ 情况/ ,/ 因此/ 本文/ 通过/ 满足/ 泊松/ 过程/ 的/ 事件/ 到达/ 为例/ ,/ 提出/ 事件/ 等待时间/ 的/ 分布/ 评估/ 方法/ 和/ 截止期/ 的/ 满足/ 率/ 模型/ ./ 进一步/ ,/ 讨论/ 了/ 由于/ 调度/ 造成/ 的/ 处理/ 乱序/ 和/ 相应/ 的/ 反馈/ 修正/ 模型/ ,/ 给出/ 了/ 相应/ 的/ 复杂/ 事件处理/ 资源分配/ 框架/ ,/ 并用/ 实验/ 验证/ 了/ 本文/ 提出/ 模型/ 和/ 算法/ 的/ 正确性/ 和/ 有效性/ ./ 2/ 相关/ 工作/ 数据流/ 查询处理/ 已经/ 得到/ 了/ 深入/ 的/ 研究/ ,/ 出现/ 了/ 一些/ 典型/ 的/ 原型/ 系统/ [/ 3/ -/ 6/ ]/ ./ Aurora/ 系统/ [/ 5/ -/ 6/ ]/ 是/ 由/ 应用领域/ 专家/ 定义/ 的/ 一组/ 标准化/ 的/ 二维/ 服务质量/ 图/ ,/ 每个/ 服务质量/ 图/ 表示/ 某个/ 性能指标/ 在/ 不同/ 取值/ 时/ 对应/ 的/ 收益/ ,/ 并/ 根据/ 运行/ 时/ 的/ 收益/ 变化/ 实时/ 调整/ 资源分配/ ./ 可见/ ,/ 这种/ 策略/ 本质/ 上/ 是/ 为了/ 尽可能/ 获得/ 更好/ 的/ 运行/ 时/ 服务质量/ ./ Sutherland/ 等/ 人/ [/ 7/ ]/ 提出/ 了/ 一种/ 数据流/ 上/ 服务质量/ 驱动/ 的/ 适应性/ 调度/ 框架/ ./ 在/ 该/ 框架/ 中/ ,/ 系统/ 包含/ 一个/ 调度/ 算法/ 池/ ,/ 系统/ 运行/ 过程/ 中/ 适应性/ 地/ 从/ 调度/ 算法/ 池中/ 选择/ 合适/ 的/ 算法/ 进行/ 查询/ 调度/ ./ 但/ 这种/ 策略/ 仍然/ 考虑/ 的/ 是/ 尽/ 最大/ 努力/ 地/ 查询/ 性能/ ,/ 例如/ 最大化/ 输出/ 速率/ 或者/ 最小化/ 队列/ 大小/ ./ QStream/ [/ 8/ -/ 9/ ]/ 中/ 提出/ 先验/ 服务质量/ 的/ 概念/ ,/ 通过/ 对/ 数据/ 的/ 到达/ 和/ 处理/ 进行/ 先验/ 的/ 分析/ ,/ 进行/ 针对/ 截止期/ 的/ 可/ 调度/ 性/ 验证/ ./ 由于/ QStream/ 是/ 开发/ 在/ 一个/ 实时操作系统/ 之上/ 的/ ,/ 它/ 的/ 服务质量/ 确定性/ 保证/ 大都/ 依赖于/ 底层/ 的/ 实时操作系统/ 环境/ ,/ 故/ 它/ 的/ 服务质量/ 保证/ 具有/ 很大/ 的/ 底层/ 依赖性/ ./ 事件/ 流/ 可以/ 看做/ 是/ 一种/ 特殊/ 的/ 数据流/ ,/ 但/ 与/ 传统/ 数据流/ 基于/ 关系/ 模型/ 的/ 处理/ 方式/ 不同/ ,/ 事件/ 流/ 定义/ 的/ 操作/ 主要/ 关注/ 对/ 事件/ 之间/ 基于/ 时序/ 和/ 数值/ 的/ 模式匹配/ ,/ 更/ 适合/ 于/ 各种/ 复杂/ 的/ 监控/ 应用/ 场景/ ./ 事件/ 流/ Page3/ 及其/ 上/ 的/ 复杂/ 事件处理/ 技术/ 近些年/ 得到/ 了/ 越来越/ 多/ 的/ 关注/ ,/ 已经/ 取得/ 很多/ 代表性/ 的/ 成果/ ./ 例如/ 美国加州大学伯克利分校/ 开发/ 的/ 原型/ 系统/ SASE/ [/ 1/ ,/ 10/ ]/ ,/ 其/ 提供/ 扩展/ 的/ 事件/ 语言/ 、/ 事件/ 查询/ 处理器/ 和/ 操作/ 优化/ 策略/ 等/ ,/ 实现/ 了/ 对/ 数据/ 的/ 采集/ 和/ 清洗/ 、/ 基本/ 事件/ 生成/ 、/ 复合/ 事件处理/ 、/ 事件/ 归档/ 以及/ 对/ 事件/ 的/ 查询/ ;/ 美国康奈尔大学/ 开发/ 的/ Cayuga/ 系统/ [/ 11/ -/ 12/ ]/ ,/ 其/ 提出/ 了/ 扩展/ 的/ 查询语言/ ,/ 并/ 通过/ 自定义/ 的/ 自动机/ 模型/ 和/ 内部/ 命名/ 方法/ 来/ 高效/ 地/ 探测/ 复合/ 事件/ ,/ 并/ 讨论/ 了/ 相关/ 的/ 系统/ 实现/ 的/ 技术细节/ ;/ 美国/ 德克萨斯/ 大学/ 阿林顿/ 分校/ 开发/ 的/ EStream/ 系统/ [/ 13/ ]/ ,/ 其/ 在/ 数据流/ 查询器/ 的/ 基础/ 上/ ,/ 集成/ 了/ 连续/ 事件/ 查询器/ ,/ 利用/ 规则/ 检测/ 数据流/ 上/ 的/ 复合/ 事件/ ,/ 考虑/ 了/ 高效/ 的/ 增量/ 维护/ 算法/ ;/ 美国/ 达特/ 莫斯/ 学院/ 开发/ 的/ PQS/ 系统/ [/ 14/ ]/ ,/ 采用/ 非/ 确定性/ 有限/ 自动机/ 、/ 隐型/ 马尔可夫/ 过程/ HMM/ 等/ 方法/ 对/ 动态/ 过程/ 建模/ ,/ 以/ 事件/ 流为/ 输入/ 参数/ ,/ 通过/ 对模型/ 求解/ ,/ 从而/ 发现/ 产生/ 这些/ 事件/ 的/ 过程/ ,/ 实现/ 过程/ 查询/ 和/ 检测/ ./ 此外/ ,/ 文献/ [/ 15/ ]/ 对/ 分布式/ 环境/ 下/ 的/ 复杂/ 事件处理/ 技术/ 进行/ 了/ 深入/ 的/ 研究/ ,/ 提出/ 了/ 分割/ 查询/ 计划/ 的/ 优化/ 方法/ ./ 文献/ [/ 16/ ]/ 提出/ 了/ 一种/ 基于/ 查询/ 树/ 的/ 适应性/ 的/ 复杂/ 事件处理/ 策略/ ,/ 通过/ 有效/ 地/ 调整/ 查询/ 计划/ 来/ 获取/ 更/ 高/ 的/ 查询处理/ 效率/ ./ 一些/ 工作/ [/ 17/ -/ 18/ ]/ 还/ 特别/ 以/ 无线/ 射频/ 识别/ 技术/ 为/ 背景/ ,/ 对/ 复杂/ 事件处理/ 技术/ 和/ 优化/ 方法/ 进行/ 了/ 研究/ ./ 但是/ ,/ 现有/ 的/ 复杂/ 事件处理/ 工作/ 都/ 只/ 提供/ 针对/ 软/ 实时/ 的/ 尽/ 最大/ 努力/ 的/ 服务/ ./ 虽然/ 传统/ 的/ 网络/ 监控/ 领域/ 往往/ 只/ 进行/ 比较简单/ 的/ 数据管理/ 操作/ ,/ 但/ 对/ 数据/ 的/ 到达/ 和/ 处理/ 建模/ 和/ 可/ 调度/ 性/ 验证/ 有着/ 广泛/ 的/ 研究/ ,/ 网络/ 演算/ [/ 19/ -/ 20/ ]/ 就是/ 其中/ 非常/ 有效/ 的/ 手段/ ./ 通过/ 网络/ 演算/ 分析/ 网络/ 所/ 得到/ 的/ 结果/ 是/ 确定/ 的/ 和/ 严格/ 的/ ,/ 但/ 往往/ 给出/ 的/ 是/ 以/ 到达/ 上限/ 为/ 基础/ 的/ 到达/ 曲线/ 和/ 服务/ 下限/ 为/ 基础/ 的/ 服务/ 曲线/ ,/ 有着/ 很大/ 的/ 资源/ 预留/ ,/ 并且/ 只要/ 有/ 任何/ 的/ 结果/ 可能/ 超过/ 截止期/ ,/ 就/ 不会/ 通过/ 可/ 调度/ 性/ 的/ 验证/ ./ 文献/ [/ 21/ ]/ 将/ 网络/ 演算/ 的/ 服务质量/ 保证/ 理论/ 应用/ 在/ 数据流/ 的/ 查询处理/ 中/ ,/ 为/ 数据流/ 上/ 确定性/ 的/ 服务质量/ 保证/ 提供/ 了/ 一种/ 有效/ 可行/ 的/ 方法/ ./ 同样/ 这种/ 策略/ 没有/ 关注/ 复杂/ 事件处理/ 的/ 特点/ ,/ 而且/ 只能/ 进行/ 确定性/ 的/ 服务/ 验证/ ,/ 而/ 不是/ 在/ 给定/ 资源/ 的/ 情况/ 下/ ,/ 尽量/ 输出/ 最多/ 的/ 查询/ 结果/ ./ 排队/ 论/ [/ 22/ ]/ 在/ 解决/ 服务/ 系统调度/ 问题/ 上/ 提出/ 了/ 很/ 好/ 的/ 理论/ 模型/ ,/ 本文/ 只是/ 在/ 进行/ 截止期/ 满足/ 率/ 统计/ 性/ 计算/ 的/ 时候/ 扩展/ 了/ 在/ 饱和/ 服务/ 状态/ 下/ 的/ 排队/ 论/ 相关/ 结论/ ,/ 因此/ 主体/ 内容/ 并/ 不是/ 对/ 排队/ 论/ 的/ 扩展/ ./ 此外/ ,/ 本文/ 侧重/ 讨论/ 数据/ 层/ 的/ 管理/ 问题/ ,/ 无法/ 采用/ 实时/ 系统/ 领域/ 的/ 底层/ 实时/ 服务/ 技术/ ./ 综上/ ,/ 本文/ 针对/ 复杂/ 事件处理/ 应用/ 的/ 特点/ 和/ 资源分配/ 的/ 需要/ 进行/ 了/ 到达/ 和/ 处理/ 的/ 有效/ 建模/ ,/ 并/ 提出/ 了/ 截止期/ 敏感/ 和/ 基于/ 处理/ 乱序/ 反馈/ 修正/ 的/ 分时/ 调度/ 策略/ ,/ 从而/ 给出/ 了/ 固/ 实时/ 限制/ 下/ 的/ 复杂/ 事件处理/ 资源分配/ 最优化/ 的/ 一种/ 解决方案/ ./ 3/ 事件/ 到达/ 建模/ 对于/ 监控/ 应用/ ,/ 一个/ 基本/ 事件/ 实例/ 可以/ 建模/ 为/ 〈/ id/ ,/ lid/ ,/ ta/ 〉/ ,/ 分别/ 表示/ 监控/ 对象/ oi/ 的/ ID/ 、/ 监控/ 地点/ Υ/ i/ 的/ ID/ 和/ 事件/ 的/ 时间/ 戳/ ./ 每个/ 监控/ 地点/ 的/ 读数/ 都/ 属于/ 同一/ 类型/ 的/ 基本/ 事件/ ,/ 用/ Ei/ 表示/ Υ/ i/ 产生/ 的/ 事件/ 类型/ ,/ ei/ 表示/ 类型/ 为/ Ei/ 的/ 一个/ 实例/ ,/ eji/ 表示/ 类型/ 为/ Ei/ 的/ 第/ j/ 个/ 实例/ ,/ tia/ 表示/ ei/ 的/ 到达/ 时间/ ./ 由于/ 监控/ 数据/ 是/ 不断/ 产生/ 的/ ,/ 因此/ 所有/ 的/ ei/ 对应/ 一个/ 事件/ 流/ Si/ ./ 复杂/ 事件处理/ 往往/ 需要/ 考虑/ 不同/ 类型/ 的/ 事件/ 关联/ ,/ 通过/ 不同/ 类型/ 事件/ 的/ 复合/ 处理/ 得到/ 复合/ 事件/ Ecompk/ ./ 所有/ 参与/ Ecompk/ 匹配/ 的/ 基本/ 事件/ ei/ 称作/ Ecompk/ 的/ 子/ 事件/ ,/ Ecompk/ 中/ 的/ 第一个/ 到达/ 的/ 事件/ e1/ 称作/ 开启/ 事件/ ,/ 最终/ 导致/ Ecompk/ 复合/ 完成/ 并/ 输出/ 的/ 基本/ 事件/ en/ 被称作/ 终止/ 事件/ ./ 匹配/ 不同/ 类型/ 的/ 事件/ 无法/ 依靠/ 高效/ 的/ 本地/ 处理/ 完成/ ,/ 因此/ 不同/ 逻辑/ 区域/ 的/ 事件/ 流/ 需要/ 汇聚/ 到/ 一个/ 集中/ 的/ 处理/ 系统/ 进行/ 进一步/ 的/ 处理/ ./ 对于/ 该/ 系统/ 来说/ ,/ 可见/ 的/ 就是/ 基本/ 事件/ 实例/ ./ 本文/ 就是/ 要/ 研究/ 在/ 集中/ 端的/ 处理/ 系统/ 中/ 如何/ 为/ 各个/ 事件/ 类型/ 分配/ 处理/ 资源/ ./ 几乎/ 所有/ 的/ 事件/ 流/ 应用/ 都/ 可以/ 被/ 归纳/ 为/ 对/ 监控/ 对象/ 的/ 识别/ 、/ 定位/ 、/ 跟踪/ 和/ 监控/ ,/ 根据/ 基本/ 事件/ 的/ 定义/ ,/ 每个/ 监控/ 地点/ 的/ 事件/ 到达/ 模型/ 可以/ 根据/ 各个/ 物体/ 到达/ 某个/ 地点/ 的/ 情况/ 进行/ 分析/ ./ 而/ 基于/ 随机/ 过程/ 的/ 统计/ 模型/ 非常适合/ 于/ 描述/ 各个/ 监控/ 对象/ 的/ 到达/ 速率/ ,/ 而/ 一些/ 统计学/ 方法/ ,/ 例如/ 参数估计/ 、/ 假设检验/ 和/ 核/ 密度估计/ 等/ 可以/ 合理/ 地/ 确定/ 相关/ 的/ 参数/ ./ 特别/ 的/ ,/ 泊松/ 过程/ (/ 泊松流/ )/ 在/ 现实/ 应用/ 的/ 服务/ 系统/ 里/ 被/ 广泛/ 地/ 使用/ 来/ 表示/ 长期/ 的/ 独立/ 的/ 用户/ 到达/ 特性/ ,/ 这/ 同样/ 适合/ 于/ 很多/ 的/ 监控/ 应用/ ./ 例如/ ,/ 图书馆/ 的/ 借书/ 流/ 、/ 超市/ 的/ 付费/ 流/ 、/ 博物馆/ 的/ 参观/ 流/ 和/ 一些/ 交通流/ 都/ 可以/ 看作/ 是/ 一个/ 泊松流/ ./ 本文/ 将/ 采用/ 泊松流/ 作为/ 典型/ 的/ 事件/ 到达/ 模型/ ./ 式/ (/ 1/ )/ 给出/ 了/ 泊松/ 过程/ 的/ 表达式/ ,/ 其中/ M/ (/ t/ )/ 代表/ 任意/ 时间/ 间隔/ t/ 之内/ 的/ 基本/ 事件/ 到达/ 总量/ ./ 同样/ 的/ ,/ 基本/ 事件/ 到达/ 速率/ 可以/ 根据/ 式/ (/ 1/ )/ 进行/ 建模/ ./ 参数/ λ/ 可以/ 根据/ 应用/ 特点/ 经验值/ 、/ 学习/ 集/ 和/ 其它/ 约束条件/ 进行/ 确定/ 和/ 修正/ ./ Page4/ 在/ 一些/ 特殊/ 的/ 监控/ 应用/ 中/ ,/ 监控/ 对象/ oi/ 可能/ 存在/ 从/ 某个/ 监控/ 位置/ 到/ 下/ 一个/ 监控/ 位置/ 的/ 最小/ 时间/ 的/ 限制/ ,/ 这/ 是因为/ 某些/ 服务/ 必须/ 要/ 在/ 某个/ 监控/ 位置/ 完成/ ,/ 或者/ 从/ 监控/ 位置/ Υ/ i/ 到/ Υ/ j/ 需要/ 在/ 路途/ 上/ 花费/ 一定/ 的/ 时间/ ./ 对于/ Ei/ 和/ Ej/ ,/ |/ tia/ -/ tja/ |/ / Tmin/ ,/ Ei/ ./ id/ =/ Ej/ ./ id/ 表示/ 了/ 这种/ 连续/ 服务/ 约束/ 模型/ ./ 在/ 特定/ 的/ 应用/ 中/ 考虑/ 这类/ 与/ 时间/ 相关/ 的/ 约束/ ,/ 可以/ 对/ 到达/ 和/ 资源分配/ 建模/ 进行/ 有效/ 的/ 修正/ ./ 4/ 基于/ 多/ 消耗/ 模式/ 的/ 复杂/ 事件处理/ 建模/ 为了/ 进行/ 高效/ 的/ 资源分配/ 算法/ 的/ 研究/ ,/ 对/ 复杂/ 事件处理/ 的/ 代价/ 进行/ 合理/ 的/ 建模/ 是/ 必要/ 的/ ./ 本节/ 将/ 讨论/ 复杂/ 事件处理/ 模型/ ,/ 将/ 各种/ 模型/ 转化/ 为/ 近似/ 的/ 顺序/ 操作/ ,/ 并/ 结合/ 监控/ 应用/ 的/ 特点/ ,/ 提出/ 多/ 消耗/ 模式/ 下/ 的/ 操作/ 模型/ ,/ 并/ 对/ 各种/ 模型/ 下/ 的/ 处理/ 代价/ 进行/ 分析/ ./ 4.1/ 复杂/ 事件处理/ 建模/ 首先/ ,/ 如果/ 不/ 考虑/ 复杂/ 事件处理/ 中/ 对/ 同一/ 类型/ 重复/ 事件/ 的/ 处理/ 方式/ ,/ 定义/ 以下/ 的/ 事件/ 操作/ 代数/ ,/ 该/ 系统/ 是/ 一个/ 闭合/ 的/ 代数/ 系统/ ./ 包含/ 的/ 操作/ 有/ (/ 1/ )/ 时序/ 操作/ (/ sequence/ )/ ./ 标记/ 为/ SEQ/ (/ E1/ ,/ E2/ )/ ,/ 满足/ t1a/ </ t2a/ ,/ 表示/ 两个/ 事件/ 先后/ 发生/ ,/ 这是/ 事件/ 流/ 监控/ 应用/ 中/ 最/ 常见/ 也/ 最/ 基本/ 的/ 一类/ 时序/ 操作/ ,/ 通过/ 复合/ ,/ 可以/ 表示/ 成/ SEQ/ (/ E1/ ,/ E2/ ,/ …/ ,/ En/ )/ ,/ 表示/ 多个/ 事件/ 先后/ 发生/ ;/ 对于/ Ei/ 为/ 复合/ 事件/ 的/ 情况/ ,/ 通过/ 定义/ tbegin/ 和/ tend/ ,/ 可以/ 表示/ 复合/ 事件/ 的/ 顺序/ 、/ 重合/ 和/ 包含/ 等/ 关系/ ./ (/ 2/ )/ 非/ 时序/ 操作/ ./ 包括/ :/ ①/ 并/ (/ conjunction/ )/ ,/ 标记/ 为/ CON/ (/ E1/ ,/ E2/ )/ ,/ 表示/ 两个/ 事件/ 都/ 已经/ 发生/ ,/ 而/ 不管/ 它们/ 的/ 先后顺序/ ,/ 通过/ 复合/ ,/ 可以/ 表示/ 成/ CON/ (/ E1/ ,/ E2/ ,/ …/ ,/ En/ )/ ;/ ②/ 或/ (/ disjunction/ )/ ,/ 标记/ 为/ DIS/ (/ E1/ ,/ E2/ )/ ,/ 表示/ 两个/ 事件/ 至少/ 有/ 一个/ 已经/ 发生/ ,/ 而/ 不管/ 它们/ 的/ 先后顺序/ ,/ 通过/ 复合/ ,/ 可以/ 表示/ 成/ DIS/ (/ E1/ ,/ E2/ ,/ …/ ,/ En/ )/ ;/ ③/ 非/ (/ negation/ )/ ,/ 标记/ 为/ NEG/ (/ Ei/ )/ ,/ 表示/ 事件/ Ei/ 没有/ 发生/ ,/ 该/ 操作/ 一般/ 需要/ 通过/ 与/ 顺序/ 或/ 时序/ 限制/ 操作/ 一同/ 使用/ 来/ 指定/ 探测/ 的/ 范围/ ./ (/ 3/ )/ 限制/ 操作/ ./ 包括/ :/ ①/ 分组/ 限制/ Partition/ (/ Ei/ ,/ id/ )/ ,/ 将/ 各个/ 监控/ 对象/ 按照/ id/ 号/ 进行/ 分组/ 后/ 再/ 分别/ 进行/ 探测/ ,/ 例如/ 在/ RFID/ 应用/ 中/ ,/ 按照/ 标签/ id/ 分组/ 是/ 非常/ 常见/ 的/ ;/ ②/ 时序/ 限制/ TCons/ (/ Ei/ ,/ TExp/ (/ )/ )/ ,/ 其中/ 最/ 常见/ 的/ 为/ Within/ (/ Ei/ ,/ t1/ ,/ t2/ )/ ,/ 表示/ 为/ t1/ </ Ei/ ./ tend/ -/ Ei/ ./ tbegin/ </ t2/ ,/ 用来/ 限制/ 整个/ 复合/ 事件/ 的/ 探测/ 有效/ 时间/ 范围/ ;/ ③/ 数值/ 限制/ VCons/ (/ Ei/ ,/ VExp/ (/ )/ )/ ,/ 表示/ 对/ 一个/ 复合/ 事件/ 的/ 数值/ 限制/ ,/ 使用/ 带有/ 非/ 时间/ 属性/ 的/ 关系/ 表达式/ 进行/ 约束/ ;/ ④/ 排斥/ 限制/ Continuity/ (/ Ei/ ,/ / c/ )/ ,/ 表示/ 在/ 该/ 复合/ 事件/ Ei/ 探测/ 过程/ 中/ 是否/ 不/ 允许/ 出现/ 其它/ 不/ 相关/ 事件/ ,/ 例如/ Continuity/ (/ Ei/ ,/ ALL/ )/ 表示/ 不/ 允许/ 出现/ 任何/ 不/ 相关/ 的/ 事件/ ,/ 而/ Continuity/ (/ Ei/ ,/ Ei/ )/ 表示/ 不/ 允许/ 出现/ 类型/ 为/ Ei/ 的/ 不/ 相关/ 事件/ ./ 以上/ 操作/ 可以/ 混合/ 应用/ ,/ 构成/ 复杂/ 的/ 处理/ ,/ 表达/ 各种/ 复杂/ 的/ 操作/ 语义/ ./ 不/ 考虑/ 消耗/ 模式/ ,/ 顺序/ 模型/ SEQ/ 可以/ 用/ 自动机/ 模型/ 五元/ 组/ 〈/ Q/ ,/ Σ/ ,/ δ/ ,/ q0/ ,/ F/ 〉/ 来/ 表示/ ,/ 对于/ 其它/ 的/ 操作/ 模型/ ,/ 利用/ 自动机/ 模型/ ,/ 能够/ 近似/ 地/ 转化/ 为/ 顺序/ 模型/ ./ 图/ 1/ 定义/ 了/ 几种/ 常用/ 操作/ 的/ 自动机/ 表示/ ,/ 从中/ 可以/ 很/ 容易/ 地/ 得出/ 类似/ 于/ SEQ/ 的/ 转化/ ./ 监控/ 应用/ 主要/ 用于/ 跟踪/ 监控/ 对象/ 的/ 路径/ 和/ 行为/ ,/ 侧重/ 关注/ 各个/ 原子事件/ 时序/ 模式/ ,/ 因此/ 很少/ 用到/ 非/ 时序/ 操作/ ,/ 最/ 常见/ 的/ 应用/ 是/ 普通/ 的/ 顺序/ 操作/ 和/ 带/ 时序/ 限制/ 的/ 顺序/ 操作/ ./ 特别/ 在/ 一些/ 应用/ 中/ ,/ 需要/ 单独/ 跟踪/ 各个/ 监控/ 对象/ ,/ 分组/ 的/ 顺序/ 操作/ 提供/ 了/ 这类/ 功能/ ./ 通过/ 上面/ 提出/ 的/ 转化/ 方法/ ,/ 其它/ 的/ 操作/ 都/ 可以/ 转化/ 为/ 近似/ 的/ 顺序/ 操作/ ,/ 因此/ 本文/ 以/ SEQ/ 为例/ 进行/ 讨论/ ./ 4.2/ 自定义/ 消耗/ 模式/ 下/ 的/ 处理/ 建模/ 在/ 事件/ 探测/ 中/ ,/ 为了/ 更好/ 地/ 反映/ 应用/ 语义/ ,/ 还/ 需要/ 一些/ 另外/ 的/ 约束/ ./ 同一/ 类型/ 的/ 事件/ 在/ 匹配/ 过程/ 中/ 可能/ 连续/ 多次/ 发生/ ,/ 不同/ 的/ 应用/ 对/ 这类/ 重复/ 事件/ 的/ 处理/ 是/ 不同/ 的/ ./ 另外/ ,/ 已经/ 产生/ 结果/ 的/ 事件/ 是否/ 还/ 进行/ 以后/ 的/ 匹配/ 将会/ 影响/ 查询/ 的/ 结果/ ./ 该/ 问题/ 即/ 为/ 消耗/ 模式/ 问题/ ,/ 这/ 与/ 主动/ 数据库/ Snoop/ 等/ 工作/ [/ 23/ ]/ 提出/ Page5/ 的/ 上下文/ 环境/ 的/ 概念/ 是/ 类似/ 的/ ./ 大多数/ 监控/ 应用/ 并/ 不会/ 采用/ 非/ 限制/ 模式/ 进行/ 事件/ 匹配/ ,/ 根据/ 监控/ 应用/ 的/ 特点/ ,/ 定义/ 消耗/ 模式/ 对于/ 解决/ 具体/ 的/ 应用/ 需求/ ,/ 给出/ 正确/ 的/ 代价/ 评估/ 模型/ 是/ 非常/ 重要/ 的/ ./ 对于/ 同样/ 的/ 查询/ ,/ 在/ 不同/ 的/ 消耗/ 模式/ 下会/ 产生/ 完全/ 不同/ 的/ 结果/ ./ 本质/ 上/ ,/ 参与/ 复合/ 事件/ 构成/ 的/ 每个/ 事件/ 类型/ 对应/ 一个/ 状态/ ,/ 假设/ / j/ 表示/ 某个/ 事件/ 空间/ ,/ / j/ =/ {/ s1/ ,/ …/ ,/ sn/ }/ 表示/ 某个/ 状态/ 空间/ ,/ si/ 表示/ 一个/ 具体/ 的/ 状态/ 实例/ ./ 因为/ 自动机/ 从/ 本质/ 上/ 给出/ 了/ 状态/ 的/ 转化/ ,/ 定义/ 转化/ 操作/ si/ →/ sj/ ,/ 转化/ 代价/ C/ →/ 的/ 复杂度/ 为/ O/ (/ 1/ )/ ./ 某个/ 状态/ 实例/ 都/ 有/ 一个/ 当前/ 的/ 状态/ 代表/ 元/ ei/ ∈/ / j/ ,/ 代表/ 元/ 可能/ 会/ 发生变化/ ,/ 对于/ 状态/ 实例/ si/ ,/ eki/ / eli/ ,/ 特别/ 是/ 对于/ 聚集/ 模式/ ,/ ∑/ eki/ / ∑/ eli/ ,/ 其中/ ∑/ eki/ 可能/ 是/ 复合/ 事件/ ,/ 转化/ 的/ 代价/ C/ / 的/ 复杂度/ 也/ 为/ O/ (/ 1/ )/ ./ 此外/ ,/ 可能/ 发生/ 状态/ 空间/ 的/ 衍生/ ,/ 即/ / i/ / / j/ ,/ / i/ =/ {/ s1/ ,/ …/ ,/ sn/ }/ 衍生/ 出/ 了/ 状态/ 空间/ / j/ =/ {/ s1/ ,/ …/ ,/ sn/ }/ ,/ 即/ 产生/ 了/ 新/ 的/ 匹配/ 副本/ ,/ 一般来说/ ,/ 状态/ 衍生/ 的/ 代价/ 是/ 不/ 稳定/ 的/ ./ 下面/ 以此/ 为/ 基础/ 来/ 定义/ 监控/ 应用/ 中/ 最/ 常见/ 的/ 消耗/ 模式/ 类型/ ./ 特别/ 的/ ,/ 图/ 2/ 给出/ 了/ 具有/ 稳定/ 操作/ 代价/ 的/ 消耗/ 模式/ 的/ 自动机/ 表示/ ./ (/ 1/ )/ Recent/ 模式/ ./ 若有/ 重复/ 事件/ 发生/ ,/ 则/ 前/ 一个/ 重复/ 的/ 基本/ 事件/ 被/ 后/ 一个/ 事件/ 覆盖/ 掉/ ,/ 总是/ 最后/ 一个/ 子/ 事件/ 有/ 机会/ 参加/ 复合/ 事件/ 的/ 检测/ ./ 即/ 在/ 符合/ 复合/ 事件/ 逻辑/ 的/ 众多/ 子/ 事件/ 中/ ,/ 距离/ 终止/ 事件/ 最近/ 的/ 子/ 事件/ 作为/ 检测/ 结果/ 复合/ 事件/ 的/ 子/ 事件/ ./ 匹配/ 成功/ 后/ ,/ 在/ 已/ 到来/ 的/ 事件/ 序列/ 记录/ 中/ 那些/ 不/ 能够/ 再/ 参与/ 下/ 一次/ 匹配/ 的/ 基本/ 事件/ 被/ 删除/ (/ 下/ 一次/ 匹配/ 即/ 与/ 一个/ 新/ 的/ 终止/ 事件/ 相匹配/ )/ ./ 例如/ 公司/ 保险柜/ 中/ 的/ 财物/ 丢失/ ,/ 总是/ 怀疑/ 是/ 最后/ 那个/ 接近/ 保险柜/ 的/ 人/ 盗走/ 了/ 财物/ ./ 所以/ 对/ 监控/ 设备/ 读到/ 的/ 多/ 个人/ 接近/ 保险柜/ 的/ 重复/ 事件/ ,/ 只取/ 最后/ 一个/ 参加/ 复杂/ 事件/ 的/ 匹配/ ./ 该/ 模式/ 需要/ 状态/ 转化/ 和/ 状态/ 代表/ 元/ 转化/ ,/ 但/ 不/ 需要/ 状态/ 衍生/ ./ 具体/ 实现/ 中/ ,/ 采用/ 增量/ 处理/ ,/ 各个/ 事件/ 流/ 的/ 单个/ 事件/ 的/ 转化/ 代价/ 为/ 一个/ 常数/ Ctrans/ ,/ 如果/ 考虑/ 分组/ 限制/ ,/ 则/ 需要/ 额外/ 的/ 常数/ 代价/ Chash/ ,/ 对于/ 终止/ 事件/ ,/ 在/ 某些/ 应用/ 下/ 可能/ 需要/ 进行/ 进一步/ 的/ 封装/ ,/ 因此/ 需要/ 额外/ 的/ 常数/ 代价/ Ccomp/ ./ (/ 2/ )/ First/ 模式/ ./ 若有/ 重复/ 事件/ 发生/ ,/ 则/ 从/ 第/ 2/ 个/ 重复/ 的/ 基本/ 事件/ 开始/ 直到/ 最后/ 一个/ 都/ 忽略/ 掉/ ,/ 总是/ 第/ 1/ 个/ 作为/ 子/ 事件/ 参加/ 复合/ 事件/ 的/ 检测/ ./ 即/ 在/ 符合/ 复合/ 事件/ 逻辑/ 的/ 众多/ 子/ 事件/ 中/ ,/ 先到/ 先/ 匹配/ ./ 匹配/ 成功/ 后/ ,/ 在/ 已/ 到来/ 的/ 事件/ 序列/ 记录/ 中/ 删除/ 匹配/ 上/ 的/ 基本/ 事件/ ,/ 不再/ 参加/ 以后/ 的/ 匹配/ ./ 与/ Recent/ 模式/ 中/ 对/ 重复/ 事件/ 的/ 处理/ 相反/ ,/ 取/ 的/ 是/ 第/ 1/ 个/ ./ 例如/ ,/ 对/ 商店/ 关门/ 后/ 安全/ 的/ 监测/ ,/ 只/ 关心/ 谁/ 是/ 第一个/ 破窗/ 而入/ 的/ 人/ ,/ 这个/ 人才/ 是/ 要/ 抓捕/ 盗窃犯/ ,/ 而/ 随后/ 进入/ 商店/ 的/ 人/ 可能/ 是/ 店主/ 或者/ 警察/ 之类/ 无关紧要/ 的/ 人/ ./ 所以/ 对/ 监控/ 设备/ 读到/ 的/ 多/ 个人/ 进入/ 商店/ 的/ 重复/ 事件/ ,/ 只取/ 第/ 1/ 个/ 参加/ 复杂/ 事件/ 的/ 匹配/ ./ 该/ 模式/ 只/ 需要/ 状态/ 转化/ ,/ 但/ 由于/ 同一个/ 状态/ 的/ 事件/ 也/ 需要/ 与/ 之前/ 的/ 重复/ 事件/ 进行/ 比较/ ,/ 因此/ 代价/ 模型/ 与/ Recent/ 模型/ 基本一致/ ./ (/ 3/ )/ Chronicle/ 模式/ ./ 若有/ 重复/ 事件/ 发生/ ,/ 每/ 一个/ 重复/ 的/ 基本/ 事件/ 都/ 可以/ 单独/ 参加/ 匹配/ ./ 与/ First/ 类型/ 相似/ ,/ 在/ 符合/ 复合/ 事件/ 逻辑/ 的/ 众多/ 子/ 事件/ 中/ ,/ 先到/ 先/ 匹配/ ./ 在/ 匹配/ 成功/ 后/ ,/ 在/ 已/ 到来/ 的/ 事件/ 序列/ 记录/ 中/ 删除/ 匹配/ 上/ 的/ 基本/ 事件/ ,/ 不再/ 参加/ 以后/ 的/ 匹配/ ./ 例如/ ,/ 对于/ 集装箱/ 运载/ 安全/ 问题/ ,/ 传送带/ 某处/ 的/ 阅读器/ 对/ 传送带/ 上/ 同类/ 物品/ 集/ 的/ 识读/ ,/ 产生/ 多个/ 重复/ 的/ 事件/ ./ 集装箱/ 运到/ 目的地/ ,/ 那里/ 的/ 阅读器/ 对/ 装入/ 集装箱/ 中/ 的/ 物品/ 进行/ 一一/ 识读/ 产生/ 多个/ 重复/ 的/ 事件/ ./ 两处/ 的/ 事件/ 一一对应/ 才/ 表示/ 物品/ 没有/ 丢失/ ./ 从/ 本质/ 上/ ,/ 该/ 模式/ 需要/ 状态/ 的/ 转化/ 和/ 状态/ 的/ 衍生/ ,/ 不/ 经过/ 优化/ 的/ 处理/ 的/ 代价/ 也/ 是/ 不/ 稳定/ 的/ ./ 在/ 具体/ 实现/ 中/ ,/ 可以/ 通过/ 设计/ 一个二维/ 的/ 链表/ 结构/ ,/ 一个/ 链表/ 的/ 所有/ 结点/ 都/ 是/ 其它/ 链表/ 的/ 头/ 结点/ ,/ 这些/ 衍生/ 出来/ 的/ 链表/ 表示/ 衍生/ 的/ 状态/ 空间/ ,/ 如图/ 2/ 中/ Chronicle/ 模式/ 所示/ ,/ 这样/ ,/ 所有/ 的/ 事件/ 都/ 能够/ 确定/ 插入/ 的/ 位置/ ,/ 只/ 需要/ 常数/ 的/ 插入/ 链表/ 的/ 代价/ Cinsert/ 就/ 能/ 高效/ 地/ 构建/ 这个/ 数据结构/ ./ 对于/ 终止/ 事件/ ,/ 需要/ 删除/ 相应/ 链表/ 的/ 额外/ 常数/ 代价/ Cdelete/ ./ (/ 4/ )/ Cumulative/ 模式/ ./ 若有/ 重复/ 事件/ 发生/ ,/ 所有/ 重复/ 的/ 基本/ 事件/ 作为/ 一个/ 整体/ 参加/ 匹配/ ./ 整体/ 的/ 开始/ 时间/ 为/ 第一个/ 事件/ 发生/ 的/ 时间/ ,/ 结束/ 时间/ 为/ 最后/ 一个/ 事件/ 发生/ 的/ 时间/ ./ 与/ Chronicle/ 类型/ 相似/ ,/ 在/ 符合/ 复合/ 事件/ 逻辑/ 的/ 众多/ 子/ 事件/ 中/ ,/ 先到/ 先/ 匹配/ ./ 在/ 匹配/ 成功/ 后/ ,/ 在/ 已/ 到来/ 的/ 事件/ 序列/ 记录/ 中/ 删除/ 匹配/ 上/ 的/ 基本/ 事件/ ,/ 不再/ 参加/ 以后/ 的/ 匹配/ ./ 与/ 前/ 3/ 种/ 模式/ 对/ Page6/ 重复/ 事件/ 的/ 处理/ 方式/ 不同/ ,/ 这种/ 模式/ 把/ 每个/ 重复/ 的/ 事件/ 看做/ 是/ 整体/ 的/ 一部分/ ./ 例如/ 在/ 医院/ ,/ 用/ 监控/ 设备/ 监视/ 病人/ 心脏/ 偷停/ 状况/ ,/ 心脏/ 偷停/ 一次/ 就/ 向/ 识读/ 器/ 发出信号/ ,/ 因此/ 产生/ 重复/ 事件/ ./ 若/ 在/ 一定/ 时间/ 范围/ 内/ ,/ 重复/ 的/ 事件/ 数量/ 不/ 超过/ 某个/ 上限/ ,/ 则/ 不/ 需要/ 采取任何/ 措施/ ;/ 否则/ ,/ 就/ 需要/ 对/ 病人/ 进行/ 药物/ 或/ 手术/ 治疗/ ./ 该/ 模式/ 需要/ 状态/ 的/ 转化/ 和/ 聚集/ 的/ 代表/ 元/ 转化/ ,/ 因为/ 聚集/ 的/ 过程/ 可以/ 增量/ 地/ 完成/ ,/ 因此/ 每个/ 事件/ 的/ 处理/ 代价/ 都/ 是/ 常数/ Ctrans/ +/ Caggr/ ./ (/ 5/ )/ Continuous/ 模式/ ./ 若有/ 重复/ 事件/ 发生/ ,/ 每/ 一个/ 重复/ 的/ 基本/ 事件/ 都/ 可以/ 单独/ 参加/ 匹配/ ./ 每个/ 开启/ 事件/ 都/ 能/ 启动/ 一次/ 或/ 多次/ 复杂/ 事件/ 的/ 检测/ ,/ 但/ 终止/ 事件/ 就/ 只有/ 一个/ ./ 在/ 每次/ 匹配/ 结束/ 后/ (/ 匹配/ 结果/ 可能/ 有/ 多个/ )/ ,/ 将/ 时间/ 戳/ 在/ 此次/ 匹配/ 的/ 最终/ 结果/ 的/ 终结/ 事件/ 之前/ 的/ 事件/ 全部/ 删除/ ,/ 没有/ 机会/ 再/ 参加/ 以后/ 的/ 匹配/ ./ 例如/ ,/ 在/ 智能/ 超市/ 里/ ,/ N/ 件/ 同类/ 商品/ 离开/ 货架/ ,/ 超市/ 的/ 出口处/ 也/ 有/ N/ 件/ 该种/ 商品/ 出现/ ,/ 却/ 有/ m/ 个人/ 在/ 结账/ 口处/ 对/ 少于/ N/ 件/ 这类/ 商品/ 进行/ 付账/ ,/ 那么/ 这/ m/ 个人/ 都/ 有/ 可能/ 是/ 没有/ 付账/ 的/ 人/ ./ 该/ 模式/ 需要/ 状态/ 的/ 转化/ 、/ 代表/ 元/ 的/ 转化/ 和/ 状态/ 的/ 衍生/ ,/ 相当于/ 匀速/ 环境/ 下/ 窗口/ 大小/ 为/ 1/ // vn/ 的/ 非/ 限制/ 模式/ ./ 对于/ 非/ 终止子/ 事件/ ,/ 只/ 需要/ 稳定/ 地/ 插入/ 和/ 标记/ 指针/ 的/ 代价/ Cinsert/ ,/ 但/ 对于/ 终止/ 事件/ ,/ 处理/ 代价/ 与/ 流速/ 有关/ ./ 为了/ 统一/ 处理/ 模型/ ,/ 本文/ 也/ 通过/ 对/ 各个/ 事件/ 流/ 的/ 流速/ 期望/ 表示/ 来/ 获得/ 近似/ 稳定/ 的/ 代价/ 估计/ ./ 根据/ 推导/ ,/ 可以/ 分析/ 出/ 终止/ 事件/ 的/ 处理/ 代价/ 为/ k/ ∑/ n/ -/ 15/ 截止期/ 敏感/ 的/ 资源分配/ 模型/ 5.1/ 截止期/ 满足/ 率/ 模型/ 根据/ 统计/ 性/ 的/ 到达/ 建模/ ,/ 如果/ 各个/ 事件/ 流/ 的/ 流速/ 均/ 服从/ 泊松/ 过程/ 并且/ 相互/ 独立/ ,/ 在/ 多数/ 情况/ 下/ ,/ 各个/ 事件/ 流/ 的/ 处理/ 代价/ 都/ 是/ 常数/ 的/ ./ 首先/ ,/ 假设/ 有/ n/ 个/ 处理器/ ,/ 每个/ 处理器/ 负责/ 处理/ 一个/ 事件/ 流/ ,/ 通过/ 这种/ 模型/ ,/ 可以/ 先/ 不必/ 考虑/ 事件/ 流/ 之间/ 的/ 关系/ 而/ 仅仅/ 侧重/ 分析/ 集中/ 端/ 对/ 每个/ 事件/ 流/ 的/ 处理/ ,/ 实际操作/ 中/ 采用/ 单/ 处理器/ 的/ 分时/ 调度/ ./ 假设/ λ/ 为泊松/ 过程/ 的/ 参数/ ,/ 用来/ 表示/ 该/ 事件/ 流/ 的/ 事件/ 平均/ 到达/ 速率/ ./ 用/ 常数/ μ/ 表示/ 在/ 当前/ 分配/ 的/ 处理/ 资源/ 下/ ,/ 单位/ 时间/ 能够/ 处理/ 的/ 事件/ 个数/ ,/ 同理/ tp/ =/ 1/ // μ/ 表示/ 单位/ 事件/ 的/ 处理/ 时间/ ./ 在/ 上述/ 模型/ 的/ 基础/ 上/ ,/ 可以/ 看出/ 该/ 模型/ 可以/ 适用/ 于/ 排队/ 论中/ 的/ M/ // D/ // 1/ 模型/ ,/ 其中/ M/ 代表/ 处理过程/ 为泊/ 松流/ ,/ D/ 代表/ 服务/ 代价/ 是/ 一个/ 常数/ ./ 假设/ ρ/ =/ λ/ // μ/ ,/ 对于/ 每个/ 事件/ 流/ ,/ 假设/ 到达/ 时间/ 为/ ta/ ,/ 等待时间/ 为/ tw/ ,/ 处理/ 时间/ 为/ tp/ ,/ tiw/ 表示/ ei/ 的/ 等待时间/ ./ 下面/ 将/ 逐步/ 给出/ 一些/ 重要/ 的/ 扩展/ 结论/ ./ 根据/ 排队/ 论/ ,/ 可以/ 证明/ ,/ 如果/ ρ/ </ 1/ ,/ 那么/ 每个/ 事件/ 流上/ 的/ 每个/ 事件/ 的/ 虚/ 等待时间/ t/ ~/ 都/ 存在/ ,/ 并且/ 无论/ 初始化/ 条件/ 如何/ ,/ t/ ~/ 满足/ limx/ →/ +/ P/ {/ t/ ~/ 并且/ W/ (/ x/ )/ 的/ L/ -/ S/ 变换/ 可以/ 证明/ 满足/ 式/ (/ 3/ )/ 如果/ ρ/ / 1/ ,/ 那么/ 能够/ 得出/ 式/ (/ 4/ )/ 成立/ ./ 但/ 在/ 这种/ 情况/ 下/ ,/ tw/ 将/ 不再/ 满足/ 任何/ 的/ 分布/ ./ 对于/ M/ // D/ // 1/ 模型/ ,/ 当/ ρ/ </ 1/ 时/ ,/ 等待时间/ 的/ 期望/ 可以/ 证明/ 等于/ 式/ (/ 5/ )/ 从/ 上面/ 的/ 分析/ 可以/ 看出/ ,/ 事件/ 等待时间/ 取决于/ 事件/ 到达/ 速率/ 和/ 事件处理/ 时间/ ,/ 事件/ 到达/ 速率/ 越大/ ,/ 处理/ 时间/ 越长/ ,/ 等待时间/ 就/ 越长/ ./ 在/ 极端/ 的/ 情况/ 下/ ,/ 平均/ 处理/ 时间/ 要/ 大于/ 平均/ 的/ 到达/ 时间/ 间隔/ ,/ 系统/ 将会/ 一直/ 过载/ ./ 对于/ 一般/ 系统/ ,/ ρ/ </ 1/ 作为/ 一个/ 先决/ 的/ 条件/ ,/ 应该/ 得到/ 保证/ ./ 事件/ 响应/ 延迟/ tl/ =/ tw/ +/ tp/ ,/ 表示/ 为/ 等待时间/ 和/ 处理/ 时间/ 之/ 和/ ./ 一般来说/ ,/ 响应/ 延迟/ 反应/ 了/ 系统/ 的/ 实时/ 特性/ ,/ 在/ 监控/ 系统/ 中/ ,/ 经常/ 要/ 处理/ 关键/ 的/ 任务/ ,/ 因此/ 实时性/ 是/ 非常/ 重要/ 的/ 指标/ ,/ 因此/ 一般/ 会/ 规定/ 延迟/ 的/ 上限/ td/ ,/ 超过/ 这个/ 上限/ ,/ 得到/ 的/ 处理结果/ 就/ 会/ 失去/ 实效性/ ,/ 甚至/ 造成/ 重大/ 的/ 危害/ ./ 同理/ 截止期/ ei/ ./ tD/ =/ ei/ ./ ta/ +/ td/ 表示/ 某/ 事件/ 必须/ 在/ tD/ 时刻/ 前/ 处理完毕/ ,/ 本文/ 正是/ 将/ 延迟/ 上限/ 或者/ 截止期/ 作为/ 评估/ 资源分配/ 算法/ 的/ 重要/ 服务/ 指标/ ,/ td/ 一般/ 都/ 由/ 用户/ 或者/ 应用/ 预先指定/ ./ 同时/ ,/ 用/ σ/ 表示/ 能够/ 在/ 截止/ 期内/ 完成/ 处理/ 的/ 事件/ 比率/ ,/ 也/ 称作/ 截止期/ 满足/ 率/ ./ 因此/ 〈/ td/ ,/ σ/ 〉/ 构成/ 了/ 监控/ 应用/ 中/ 重要/ 的/ 服务质量/ ,/ 在/ 分配资源/ 一定/ 的/ 情况/ 下/ ,/ td/ 越大/ ,/ 满足/ 率/ σ/ 越高/ ./ 下式/ 表示/ 了/ td/ 与/ σ/ 之间/ 的/ 关系/ ./ P/ {/ tl/ / td/ }/ =/ P/ {/ tw/ +/ tp/ / td/ }/ =/ P/ {/ tw/ / td/ -/ 1/ // μ/ }/ / σ/ ,/ 式/ (/ 5/ )/ 给出/ 的/ 平均/ 等待时间/ 无法/ 分析/ 截止期/ 满足/ 率而式/ (/ 3/ )/ 给出/ 的/ L/ -/ S/ 变换/ 又/ 很/ 复杂/ ,/ 很难/ 计算/ ./ 在/ 接近/ 饱和/ 服务/ 的/ 状态/ 下/ ,/ 根据/ 数学/ 逼近/ 理论/ ,/ 给定/ 处理/ 资源/ μ/ ,/ 可以/ 证明/ 事件/ 响应/ 延迟/ tl/ 的/ 概率密度/ 近似/ 估计/ 如式/ (/ 6/ )/ 所示/ ./ Page7/ 式/ (/ 7/ )/ 所示/ :/ f/ (/ x/ )/ =/ 2/ (/ λ/ -/ λ/ 2/ // μ/ )/ e/ -/ 2/ (/ λ/ -/ λ/ 2/ // μ/ )/ (/ x/ -/ 1/ // μ/ )/ ,/ x/ / tp/ 同理/ ,/ 等待时间/ tw/ 的/ 分布/ 概率密度/ 估计/ 函数/ 如/ f/ (/ x/ )/ =/ 2/ (/ λ/ -/ λ/ 2/ // μ/ )/ e/ -/ 2/ (/ λ/ -/ λ/ 2/ // μ/ )/ (/ x/ )/ ,/ x/ / 0/ 因此/ 截至/ 期/ 满足/ 率/ 可以/ 通过/ 式/ (/ 8/ )/ 计算/ 得到/ P/ {/ tw/ </ td/ -/ tp/ }/ =/ ∫/ td/ -/ tp/ 如式/ (/ 9/ )/ 所示/ ,/ θ/ σ/ (/ μ/ )/ 表示/ 了/ 给定/ μ/ 的/ 截止期/ 满足/ 率/ 表达式/ ./ 同理/ ,/ 给定/ σ/ 和/ td/ ,/ 可以/ 求/ 出式/ (/ 10/ )/ 所示/ 的/ 最小/ 分配资源/ ./ μ/ / 1/ +/ td/ λ/ -/ (/ 1/ +/ td/ λ/ )/ 2/ -/ 2/ (/ λ/ tdln/ (/ 1/ -/ σ/ )/ +/ 2/ λ/ td/ 上述/ 分析/ 仅仅/ 针对/ 了/ 单个/ 的/ 基本/ 事件/ ,/ 但/ 对于/ 复杂/ 事件处理/ ,/ 产生/ 的/ 结果/ 是/ 复合/ 事件/ ,/ 需要/ 定义/ 复合/ 事件/ 的/ 延迟/ 上限/ tseqen/ 是/ 终止/ 事件/ ,/ 直观/ 上/ 因为/ 只有/ en/ 处理/ 完整/ 个/ 复合/ 事件/ 才能/ 输出/ ,/ 非/ 终止/ 事件/ 的/ tl/ 与/ tseq/ 关/ ,/ 复合/ 事件/ 的/ 延迟/ 上限/ 是否/ 满足/ 是/ 由/ 终止/ 事件/ 的/ tl/ 决定/ 的/ ./ 这/ 相当于/ tseq/ 的/ 资源/ μ/ n/ 的/ 不断/ 增大/ ,/ 截止期/ 满足/ 率/ 应该/ 不断/ 增大/ ./ 但是/ 实际上/ ,/ 此处/ 没有/ 考虑/ 到/ 在/ 处理/ 时/ 发生/ 乱序/ 的/ 问题/ ,/ 产生/ 的/ 复合/ 事件/ 有/ 很多/ 错误/ 的/ 结果/ ,/ 因此/ 不/ 能够/ 只/ 考虑/ 给/ en/ 分配/ 尽可能/ 多/ 的/ 处理/ 资源/ ./ 下节/ 将/ 对此/ 进行/ 讨论/ ./ 5.2/ 基于/ 处理/ 乱序/ 的/ 反馈/ 修正/ 模型/ 本/ 节/ 首先/ 从/ 两个/ 事件/ 类型/ 入手/ 来/ 分析/ 处理/ 乱序/ 的/ 问题/ ,/ 对于/ 来自/ 不同/ 的/ 事件/ 流/ 的/ 事件/ ,/ 容易/ 证明/ ,/ 某个/ 事件/ 先/ 到达/ 并/ 不/ 意味着/ 它/ 能够/ 先/ 被/ 处理/ ,/ 即/ t1a/ </ t2a/ / // t1s/ </ t2s/ ,/ 同时/ t1a/ </ t2a/ / // t1e/ </ t2s/ ,/ 其中/ ts/ 表示/ 事件/ 开始/ 处理/ 时间/ ,/ te/ 表示/ 时间/ 结束/ 处理/ 时间/ ./ 对于/ SEQ/ (/ E1/ ,/ E2/ )/ ,/ 如果/ 按照/ 严格/ 正常/ 顺序/ ,/ 需要/ 满足/ l/ / t2w/ +/ ti/ (/ e1/ ,/ e2/ )/ ,/ 表示/ e2/ 需要/ 在/ e1/ 处理/ 完/ 之后/ 才/ 可/ t1/ 以/ 开始/ 处理/ ,/ ti/ (/ e1/ ,/ e2/ )/ 代表/ 到达/ 时间/ 间隔/ t1a/ -/ t2a/ ./ 同理/ ,/ 乱序/ 条件/ 为/ t1/ 根据/ 式/ (/ 6/ )/ 和/ (/ 7/ )/ 给出/ 的/ tl/ 和/ tw/ 的/ 概率密度/ ,/ 可以/ 推导/ 出/ t1/ 设/ hi/ =/ 2/ λ/ i/ -/ 2/ λ/ 2itig/ (/ x/ )/ =/ h1h2eh1/ (/ -/ max/ (/ t1/ 进一步/ 可/ 得/ 对应/ 的/ 分布/ 函数/ 如式/ (/ 12/ )/ 所示/ :/ 但/ 对于/ 本文/ 介绍/ 的/ 基于/ 多/ 消耗/ 模式/ 的/ 自动机/ 模型/ ,/ 实际上/ 算法/ 在/ 处理/ e1/ 的/ 第一步/ 都/ 是/ 进行/ 状态/ 的/ 迁移/ ,/ 因此/ 只要/ e1/ 开始/ 处理/ ,/ 即使/ 没有/ 处理/ 完/ 就/ 开始/ 处理/ e2/ ,/ 在/ 一般/ 的/ 情况/ 下/ ,/ 也/ 不会/ 造成/ 错误/ 的/ 输出/ 结果/ ./ 进一步/ 给出/ 放宽/ 的/ 正常/ 顺序/ 限制/ 为/ t1w/ </ t2w/ +/ ti/ (/ e1/ ,/ e2/ )/ ,/ 同理/ 乱序/ 率/ 条件/ 为/ t1w/ >/ t2w/ +/ ti/ (/ e1/ ,/ e2/ )/ ./ 因此/ 可以/ 对式/ (/ 11/ )/ 的/ 密度/ 函数/ 进行/ 简化/ ./ 此时/ t1w/ -/ t2w/ 的/ 密度/ 函数/ 表示/ 为/ 计算/ 可得/ t1w/ -/ t2w/ 密度/ 函数/ 如式/ (/ 13/ )/ 所示/ 此时/ t1w/ -/ t2w/ 的/ 分布/ 函数/ 如式/ (/ 14/ )/ 所示/ 显然/ ti/ (/ e1/ ,/ e2/ )/ / 0/ 成立/ ,/ 因此/ 给定/ ti/ ,/ e1/ ,/ e2/ 的/ 乱序/ 率/ ω/ (/ e1/ ,/ e2/ )/ 表达式/ 如式/ (/ 15/ )/ 所示/ :/ Page8/ 假设/ 两/ 事件/ 的/ 到达/ 时间/ 间隔/ ti/ 服从/ 分布/ 为/ f/ (/ x/ )/ ,/ 此时/ f/ (/ x/ )/ 受到/ 达流/ 特性/ 、/ 消耗/ 模式/ 、/ 连续/ 服务/ 时间/ 限制/ 、/ 分组/ 限制/ 和/ 时序/ 限制/ 的/ 影响/ ,/ 例如/ 对于/ 泊松/ 流下/ 的/ Recent/ 模式/ ,/ 可以/ 证明/ ,/ 若/ λ/ 1/ >/ λ/ 2/ ,/ f/ (/ x/ )/ 近似/ 地/ 服从/ 均值/ 为/ 1/ // 2/ λ/ 1/ 的/ 负/ 指数分布/ ,/ 反之/ ,/ 近似/ 地/ 服从/ 1/ // 2/ λ/ 2/ 的/ 负/ 指数分布/ ./ 对于/ First/ 模式/ ,/ 若/ λ/ 1/ >/ λ/ 2/ 那么/ 近似/ 地/ 服从/ 均值/ 为/ 1/ // λ/ 2/ -/ 1/ // 2/ λ/ 1/ 的/ 负/ 指数分布/ ,/ 反之/ ,/ 近似/ 地/ 服从/ 1/ // 2/ λ/ 2/ 的/ 负/ 指数分布/ ;/ 对于/ Cumulative/ 模式/ ,/ 近似/ 地/ 服从/ 均值/ 为/ 1/ // 2/ λ/ 2/ 的/ 负/ 指数分布/ ./ 其它/ 各种/ 情况/ 的/ f/ (/ x/ )/ 可以/ 通过/ 进一步/ 地/ 分析/ 逐一/ 得到/ ,/ 对于/ 受/ 连续/ 服务/ 时间/ 限制/ ,/ 分组/ 限制/ 和/ 时序/ 限制/ 的/ 应用/ ,/ 可以/ 通过/ 选择/ 积分/ 的/ 上下/ 时间/ 限制/ 和/ 除以/ 分组/ 数目/ / 的/ 方式/ 得到/ 最大/ 乱序/ 率/ 和/ 平均/ 乱序/ 率/ ./ 限于/ 篇幅/ ,/ 具体/ 的/ 论述/ 不/ 在/ 这里/ 给出/ ./ 给定/ f/ (/ x/ )/ ,/ 可以/ 得到/ 平均/ 乱序/ 率/ wavg/ 如式/ (/ 16/ )/ 所示/ :/ ω/ avg/ (/ E1/ ,/ E2/ )/ =/ ∫/ ω/ avg/ (/ e1/ ,/ e2/ )/ 是/ 一个/ 与/ μ/ 1/ 和/ μ/ 2/ 有关/ 的/ 函数/ ,/ 因此/ 也/ 可以/ 记/ 为/ ω/ avg/ (/ μ/ 1/ ,/ μ/ 2/ )/ ./ 通过/ 终止/ 事件/ 的/ 截止/ 期满/ 图/ 3/ 满足/ 率/ 和/ 正确率/ 函数/ 曲线/ (/ λ/ 1/ =/ λ/ 2/ =/ 1000/ ,/ μ/ =/ 3000/ ,/ td/ =/ 1ms/ )/ i/ =/ 15.3/ 多/ 事件/ 类型/ 的/ 处理/ 乱序/ 率/ 最小化/ 模型/ 本节/ 将/ 进一步/ 讨论/ 多个/ 事件/ 流/ 参与/ 的/ 一般/ 情况/ 下/ 的/ 乱序/ 率/ 模型/ ./ 不难/ 得出/ ,/ 假设/ n/ 个/ 事件/ 到达/ 相互/ 独立/ ,/ 那么/ n/ 个/ 事件/ 等待时间/ 的/ 联合/ 密度/ 函数/ 为/ ∏/ ntiw/ (/ x/ )/ ,/ 此时/ 乱序/ 率/ 可以/ 表示/ 为/ ω/ (/ E1/ ,/ E2/ ,/ …/ ,/ En/ )/ =/ 1/ -/ ∫/ ∫/ ∫/ Ω/ ∏/ n/ 其中/ 的/ 积分/ 区域/ 是/ 在/ Ω/ =/ ∧/ n/ -/ 1/ 维空间/ 内/ 进行/ 的/ ./ 可以/ 将/ 上式/ n/ 重/ 积分/ 展开/ 成/ n/ 次足率/ 模型/ ,/ 可以/ 得出/ 满足/ 截止期/ 的/ 复合/ 事件/ 的/ 个数/ ,/ 但/ 在/ 这些/ 复合/ 事件/ 中/ ,/ 如果/ 子/ 事件/ 发生/ 处理/ 乱序/ ,/ 产生/ 的/ 复合/ 事件/ 必然/ 是/ 错误/ 的/ 结果/ ./ 从/ 这种/ 意义/ 上/ ,/ 1/ -/ ω/ avg/ (/ μ/ 1/ ,/ μ/ 2/ )/ 反映/ 了/ 复合/ 事件/ 的/ 正确率/ ./ 因此/ θ/ σ/ (/ μ/ 2/ )/ (/ 1/ -/ ω/ avg/ (/ μ/ 1/ ,/ μ/ 2/ )/ )/ 表示/ 了/ 结果/ 正确/ 的/ 并且/ 满足/ 截止期/ 的/ 事件/ 比例/ ./ 设/ μ/ 表示/ 所有/ 资源/ 给/ S1/ 时/ ,/ 单位/ 时间/ 内/ 处理/ e1/ 的/ 个数/ ,/ 根据/ 处理/ 代价/ 的/ 不同/ ,/ μ/ =/ μ/ 1/ +/ k/ μ/ 2/ ,/ 特别/ 的/ ,/ 如果/ S1/ 和/ S2/ 的/ 事件处理/ 代价/ 相同/ ,/ μ/ =/ μ/ 1/ +/ μ/ 2/ ./ 因此/ 两个/ 事件/ 类型/ 的/ 处理/ 乱序/ 的/ 反馈/ 修正/ 模型/ 相当于/ 对/ 下面/ 的/ 目标/ 函数/ 进行/ 最优化/ 求解/ ,/ 从而/ 确定/ μ/ 1/ 和/ μ/ 2/ ./ 具体/ 的/ ,/ 如图/ 3/ 所示/ ,/ 随着/ μ/ 2/ 的/ 增加/ ,/ 满足/ 率/ θ/ σ/ (/ μ/ 2/ )/ 的/ 函数/ 值/ 逐渐/ 增加/ ,/ 但/ 由于/ μ/ 1/ 处理/ 时间/ 较/ 少/ ,/ t1w/ 增加/ ,/ 导致/ 乱序/ 率/ 增加/ ,/ 1/ -/ ω/ avg/ (/ μ/ 1/ ,/ μ/ 2/ )/ 逐渐/ 减少/ ,/ 因此/ θ/ σ/ (/ μ/ 2/ )/ 和/ 1/ -/ ω/ avg/ (/ μ/ 1/ ,/ μ/ 2/ )/ 相互/ 制约/ ,/ 它们/ 的/ 乘积/ 函数/ 将会/ 在/ λ/ 2/ </ μ/ 2/ </ μ/ 的/ 某个/ 取值/ 点/ 出现/ 峰值/ ,/ 按照/ 这种/ 结果/ 进行/ 资源分配/ 将会/ 真正/ 满足/ 〈/ td/ ,/ σ/ 〉/ 的/ 服务质量/ ./ 积分/ 的/ 形式/ ,/ 即/ ω/ (/ E1/ ,/ E2/ ,/ …/ ,/ En/ )/ =/ 1/ -/ ∫/ ∫/ x2/ +/ t1/ ,/ 20t1w/ (/ x1/ )/ dx1/ ./ 与/ 两个/ 事件/ 类型/ 一样/ ,/ 由于/ 任意/ 两个/ 事件/ 的/ 到达/ 时间/ 间隔/ 是/ 不/ 可知/ 的/ ,/ 在/ 更/ 多/ 的/ 情况/ 下/ ,/ 关心/ 的/ 是/ 平均/ 乱序/ 率/ ./ 设/ fi/ ,/ i/ +/ 1/ (/ x/ )/ 是/ 事件/ ei/ 和/ ei/ +/ 1/ 到达/ 时间/ 间隔/ ti/ ,/ i/ +/ 1/ 的/ 密度/ 函数/ ,/ 那么/ 平均/ 乱序/ 率/ 可由式/ (/ 17/ )/ 求得/ ./ Page9/ ω/ avg/ (/ E1/ ,/ E2/ ,/ …/ ,/ En/ )/ =/ 1/ -/ ∫/ ∫/ ∫/ Ω/ 与/ 两个/ 事件/ 类型/ 一样/ ,/ fi/ ,/ i/ +/ 1/ (/ x/ )/ 可以/ 通过/ 到达/ 流/ 的/ 特性/ 和/ 消耗/ 模式分析/ 得到/ ,/ 所以/ 上/ 式/ 可以/ 求出/ ./ 不失/ 一般性/ ,/ 本/ 节/ 分析/ 假设/ 各个/ 事件处理/ 代价/ 相同/ ,/ 当/ μ/ =/ μ/ 1/ (/ / 1/ </ i/ / n/ ,/ μ/ i/ =/ 0/ )/ ,/ 可/ 得/ ∑/ 1/ / i/ / n/ μ/ i/ =/ μ/ ./ 下节/ 将/ 说明/ 处理/ 代价/ 不/ 同时/ 的/ 标准化/ 操作/ ,/ 当/ 代价/ 不/ 同时/ 并/ 不/ 影响/ 本节/ 的/ 推导/ 过程/ ./ 因为/ 到达/ 特性/ 是/ 可以/ 事先/ 知道/ 的/ ,/ 那么/ ,/ 函数/ ω/ avg/ 是/ μ/ i/ 的/ n/ 元/ 函数/ ,/ 通常/ 增大/ μ/ i/ 会/ 使得/ 处理/ 的/ 效率/ 提高/ ,/ 但是/ ,/ 系统/ 所/ 能/ 提供/ 的/ 总/ 资源/ 是/ 有限/ 的/ ,/ μ/ i/ 不能/ 过大/ ,/ 那么/ 如何/ 分配/ 每个/ 事件/ 的/ 处理/ 资源/ μ/ i/ ,/ 以使/ 其/ 平均/ 乱序/ 率/ 最小/ 是/ 需要/ 达到/ 的/ 目标/ ./ 在/ 实际/ 中/ ,/ 每个/ 事件/ 的/ 处理/ 资源/ μ/ i/ 也/ 不能/ 分配/ 得/ 过少/ ,/ 最少/ 不能/ 少于/ 事件/ 到达/ 的/ 速度/ λ/ i/ ,/ 特别/ 是/ 最后/ 一个/ 事件/ En/ ,/ 为了/ 满足/ 其/ QoS/ 要求/ ,/ 更是/ 有/ 其/ 最小/ 的/ 资源/ 约束/ ./ 针对/ 以上/ 分析/ ,/ 对于/ 如何/ 分配资源/ 的/ 问题/ 有/ 下面/ 的/ 定理/ ./ 定理/ 1/ ./ 设/ 平均/ 乱序/ 率/ 函数/ 形式/ 为/ ω/ avg/ (/ μ/ 1/ ,/ μ/ 2/ ,/ …/ ,/ μ/ n/ )/ ,/ 假设/ 其/ 连续/ 并且/ 存在/ 偏导/ ./ 设/ 总/ 资源/ 是/ μ/ ,/ 设/ 每个/ 事件/ 要求/ 的/ 最小/ 处理/ 资源/ 是/ μ/ mini/ ,/ 那么/ 达到/ 平均/ 乱序/ 率/ 最小/ 的/ 资源分配/ 方案/ μ/ i/ 是/ 下面/ 的/ 方程组/ 的/ 解/ ./ / μ/ i/ ω/ avg/ (/ μ/ 1/ ,/ μ/ 2/ ,/ …/ ,/ μ/ n/ )/ 代表/ 函数/ wavg/ 对/ μ/ i/ 的/ 证明/ ./ 此/ 问题/ 实质/ 上/ 是/ 有/ 约束条件/ 的/ 最优化/ 其中/ ,/ / 偏导/ ,/ t/ 是/ 辅助/ 未知数/ ./ 问题/ ./ 形式化/ 表示/ 如下/ :/ μ/ 1/ +/ μ/ 2/ +/ …/ +/ μ/ n/ / μ/ 约束/ 了/ 总/ 资源/ 消耗量/ 的/ 上限/ ./ 易知/ 当/ 总/ 资源/ 仍/ 有/ 剩余/ 时/ 可以/ 将/ 剩余/ 资源/ 全部/ 分配/ 给/ E1/ 事件/ 此时/ 乱序/ 率/ 不会/ 增加/ ,/ 所以/ 此/ 约束/ 可以/ 改写/ 为/ μ/ 1/ +/ μ/ 2/ +/ …/ +/ μ/ n/ =/ μ/ ./ 当/ ω/ avg/ 对/ μ/ i/ 存在/ 偏导时/ ,/ 由/ 拉格朗/ 日/ 乘数/ 法/ ,/ 构造/ 辅助/ 函数/ 如下/ :/ F/ (/ μ/ 1/ ,/ μ/ 2/ ,/ …/ ,/ μ/ n/ )/ =/ ω/ avg/ (/ μ/ 1/ ,/ μ/ 2/ ,/ …/ ,/ μ/ n/ )/ +/ t/ (/ μ/ 1/ +/ μ/ 2/ +/ …/ +/ μ/ n/ -/ μ/ )/ ,/ 其中/ t/ 是/ 待定/ 系数/ ./ F/ (/ μ/ 1/ ,/ μ/ 2/ ,/ …/ ,/ μ/ n/ )/ 的/ 驻点/ 由下式/ 确定/ :/ / / μ/ 1/ ω/ avg/ (/ μ/ 1/ ,/ μ/ 2/ ,/ …/ ,/ μ/ n/ )/ +/ t/ / 烄/ / μ/ 2/ ω/ avg/ (/ μ/ 1/ ,/ μ/ 2/ ,/ …/ ,/ μ/ n/ )/ +/ t/ / / 烅/ …/ / / μ/ n/ ω/ avg/ (/ μ/ 1/ ,/ μ/ 2/ ,/ …/ ,/ μ/ n/ )/ +/ t/ / 烆/ 函数/ 的/ 最小值/ 将/ 在/ 边界/ 或/ 驻点/ 处/ 取得/ ./ 易知/ ,/ 降低/ 事件/ En/ 的/ 资源分配/ ,/ 将会/ 减慢/ 事件/ En/ 的/ 处理速度/ ,/ 从而/ 降低/ 乱序/ 率/ ./ 所以/ ,/ μ/ n/ =/ μ/ minn/ 时/ 乱序/ 率/ 最小/ ./ 代入/ μ/ n/ =/ μ/ minn/ 并/ 化简/ 得到/ 定理/ 得证/ ./ 该/ 最优化/ 方程/ 可用/ matlab/ 最优化/ 工具包/ 进行/ 求解/ ,/ 随着/ 事件/ 个数/ 的/ 增加/ ,/ 求解/ 时间/ 也/ 会/ 逐渐/ 增加/ ./ 由于/ 上/ 式/ 求解/ 过程/ 比较复杂/ ,/ 下面/ 的/ 定理/ 给出/ 了/ 乱序/ 率/ 的/ 一个/ 估算/ 式/ ./ 定理/ 2/ ./ 当/ 事件/ 的/ 乱序/ 率/ 比较/ 低/ ,/ 相邻/ 事件/ 乱序/ 可以/ 近似/ 看作/ 独立/ 时/ ,/ n/ 个/ 顺序/ 事件/ 的/ 乱序/ 率有/ 如下/ 估计/ 式/ :/ wavg/ (/ E1/ ,/ E2/ ,/ …/ ,/ En/ )/ ≈/ 1/ -/ ∏/ n/ -/ 1wavg/ (/ E1/ ,/ E2/ ,/ …/ ,/ En/ )/ =/ P/ {/ Disorder/ (/ E1/ ,/ E2/ ,/ …/ ,/ En/ )/ }/ 证明/ ./ 当/ Disorder/ (/ Ei/ ,/ Ei/ +/ 1/ )/ 与/ Disorder/ (/ Ej/ ,/ Ej/ +/ 1/ )/ 中/ 无/ 相同/ 事件/ 时/ ,/ 两/ 事件/ 间/ 是/ 相互/ 独立/ 的/ ./ 而/ 由/ 定理/ 中/ 条件/ 可知/ ,/ 相邻/ 的/ 乱序/ 事件/ 也/ 可以/ 近似/ 看作/ 独立/ 的/ ,/ 故/ 所有/ 的/ 两/ 两/ 乱序/ 间/ 均/ 相互/ 独立/ ./ 由/ 相互/ 独立/ 的/ 事件/ 的/ 非/ 事件/ 知/ ,/ 任意/ 的/ !/ Disorder/ (/ Ei/ ,/ Ei/ +/ 1/ )/ 与/ !/ DisorderPage10/ (/ Ej/ ,/ Ej/ +/ 1/ )/ 也/ 是/ 近似/ 相互/ 独立/ 的/ ,/ 故有/ wavg/ (/ E1/ ,/ E2/ ,/ …/ ,/ En/ )/ ≈/ 1/ -/ P/ {/ !/ Disorder/ (/ E1/ ,/ E2/ )/ }/ …/ 定理/ 得证/ ./ 需要/ 说明/ 的/ 是/ ,/ 当/ 事件/ 类型/ 较/ 多/ ,/ 乱序/ 率/ 较大/ 时/ ,/ 该/ 估算/ 式/ 误差/ 很大/ ,/ 不能/ 采用/ ,/ 需/ 要求/ 定理/ 1/ 定义/ 方程/ 的/ 数值/ 解/ ./ 如表/ 1/ 所示/ ,/ 给出/ 了/ 事件/ 类型/ 数为/ 3/ 和/ 4/ 时/ ,/ 根据/ 最小/ 乱序/ 率/ 模型/ 得出/ 的/ 资源分配/ 方法/ 和/ 乱序/ 率值/ ,/ 其中/ ω/ avg/ 表示/ 基于/ 定理/ 1/ 的/ 数值/ 解/ ,/ 而/ 珔/ ω/ avg/ 表示/ 基于/ 定理/ 2/ 的/ 估计/ 解/ ./ 随着/ 事件/ 类型/ 的/ 增加/ ,/ 珔/ ω/ avg/ 的/ 误差/ 将会/ 逐渐/ 增大/ ./ 表/ 1/ 最小/ 乱序/ 率/ 资源分配/ 实例/ (/ μ/ =/ 6000/ ,/ μ/ 狀/ =/ 1200/ )/ SEQ/ (/ E1/ ,/ E2/ ,/ E3/ )/ μ/ 1/ μ/ 2/ μ/ 3/ ω/ avg/ 珔/ ω/ avg2997180312000/ ./ 4140.38318521612133612200/ ./ 7450.6655/ ./ 4/ 资源分配/ 模型/ 的/ 说明/ 根据/ 上面/ 的/ 分析/ ,/ 对于/ 一般/ 情况/ 下/ 的/ 复杂/ 事件处理/ 下/ 的/ 资源分配/ 模型/ ,/ 相当于/ 对/ 下面/ 的/ 最优化/ 模型/ 表达式/ 求解/ ./ 该/ 模型/ 直接/ 求解/ ,/ 代价/ 较大/ ,/ 可以/ 在/ 定理/ 1/ 的/ 基础/ 上/ ,/ 考虑/ 采用/ 步长/ 逼近/ 的/ 方法/ ./ 因为/ 知道/ 函数/ 的/ 单调/ 性/ ,/ 参照/ 两个/ 事件/ 的/ 情况/ ,/ 直到/ 找到/ 拐点/ 值/ 即可/ 确定/ 峰值/ ./ Γ/ 表示/ 最大/ 的/ 调整/ 步数/ ,/ 一般/ Γ/ =/ 20/ 就/ 可以/ 得到/ 比较/ 准确/ 的/ 解/ ,/ 平均/ 的/ 调整/ 步数/ 只/ 需要/ Γ/ // 2/ ./ 可以/ 看出/ ,/ 本文/ 提出/ 的/ 资源分配/ 模型/ 可以/ 自然/ 转化/ 为/ 抢占/ 式/ 分时/ 调度/ 的/ 算法/ ,/ 下面/ 通过/ 分析/ 比较/ 来/ 说明/ 分/ 时/ 调度/ 在/ 解决/ 截止期/ 敏感/ 问题/ 上/ 的/ 优势/ ./ FIFO/ 算法/ 的/ 特点/ 是/ 调度/ 代价/ 小/ ,/ 处理事件/ 的/ 吞吐量/ 大/ ,/ 用于/ RFID/ 事件处理/ 中/ ,/ 可以/ 保证/ 事件处理/ 不/ 发生/ 乱序/ ;/ 但是/ FIFO/ 仅/ 专注/ 于/ 事件/ 的/ 乱序/ 率/ ,/ 并/ 没有/ 考虑/ 到/ 事件/ 的/ QoS/ ,/ 是/ 乱序/ 率为/ 0/ 时分/ 时/ 调度/ 的/ 一个/ 特例/ ./ 分时/ 调度/ 方法/ 兼顾/ 了/ 乱序/ 率/ 与/ 事件/ 的/ QoS/ 指标/ ,/ 特别/ 地/ ,/ 本文/ 的/ 策略/ 可以/ 通过/ 采用/ 循环/ 控制/ 的/ 方法/ 来/ 避免/ 采用/ 线程/ 调度/ 的/ 开销/ ,/ 所以/ 要/ 优于/ FIFO/ ./ EDF/ 算法/ 优先/ 处理/ 截止期/ 优先/ 的/ 任务/ ,/ 但是/ 事件处理/ 中/ 只有/ 代表/ 复合/ 事件/ 的/ 终止/ 事件/ 带有/ 延时/ 要求/ ,/ 其它/ 事件/ 的/ 截止期/ 不易/ 给出/ ,/ 若/ 将/ 其它/ 事件/ 的/ 截止期/ 定义/ 为/ 其/ 复合/ 事件/ 的/ 截止期/ ,/ 那么/ EDF/ 算法/ 相当于/ FIFO/ ./ 但/ EDF/ 算法/ 要/ 消耗/ 一定/ 的/ 调度/ 代价/ ,/ 所以/ 效率/ 还/ 不及/ FIFO/ ./ 其它/ 的/ 调度/ 方法/ 如短/ 作业/ 优先/ ,/ 优先权/ 调度/ 等/ 没有/ 考虑/ 基于/ 延迟/ 的/ QoS/ ,/ 因此/ 并/ 不/ 适合/ 本文/ 讨论/ 的/ 截止期/ 敏感/ 的/ 事件处理/ ./ 综上/ ,/ 本文/ 使用/ 分/ 时/ 调度/ 方法/ 来/ 处理/ 复杂/ 事件/ ./ 对于/ 事件/ 探测/ 应用/ ,/ 在线/ 到达/ 要求/ 调度/ 具有/ 一定/ 的/ 实时性/ ,/ 海量/ 数据/ 要求/ 调度/ 代价/ 尽量/ 小/ ,/ 而/ 事件/ 探测/ 的/ 语义/ 又/ 要求/ 各/ 事件/ 之间/ 处理/ 尽量/ 均衡/ 以/ 避免/ 乱序/ 的/ 发生/ ./ 分时/ 调度/ 较/ 好/ 地/ 满足/ 这些/ 方面/ 要求/ ./ 分时/ 调度/ 方法/ 将/ 一台/ 处理机/ 虚拟/ 地/ 看成/ 多台/ 不同/ 资源/ 的/ 处理机/ 分别/ 处理/ 不同/ 的/ 事件/ ,/ 既/ 能够/ 以较/ 小/ 的/ 调度/ 代价/ 很/ 好/ 地/ 满足/ 事件/ QoS/ 要求/ ,/ 又/ 能够/ 将/ 乱序/ 率控制/ 在/ 一定/ 的/ 范围/ 之中/ ./ 另外/ ,/ 也/ 容易/ 将/ 分时/ 调度/ 扩展/ 到/ 监控/ 应用/ 常见/ 的/ 分布式/ 处理/ 或者/ 并行处理/ 的/ 环境/ 中/ ./ 以上/ 说明/ 都/ 没有/ 考虑/ 到/ 资源/ 的/ 标准化/ 问题/ ./ 由于/ 各个/ 事件/ 流上/ 的/ 事件处理/ 代价/ 在/ 某些/ 情况/ 下/ 并不相同/ ,/ 因此/ 在/ 进行/ 资源分配/ 前/ ,/ 可能/ 需要/ 进行/ 标准化/ ./ 如果/ 能够/ 直接/ 测量/ CPU/ 资源/ 单独/ 运行/ 每个/ 事件/ 流/ 的/ 单位/ 时间/ 的/ 处理/ 个数/ μ/ (/ 1/ )/ ,/ …/ ,/ μ/ (/ n/ )/ ,/ 就/ 可以/ 根据/ 它们/ 的/ 比值/ 来/ 进行/ 标准化/ ./ 对于/ 不/ 方便/ 进行/ 真实/ 的/ 在线/ 测试/ 的/ 场合/ ,/ 可以/ 根据/ 处理/ 某个/ 类型/ 事件/ ei/ 的/ 指令/ 数/ Ins/ (/ ei/ )/ 为/ 依据/ ,/ 假设/ CPU/ 单位/ 时间/ 能/ 处理/ κ/ 个/ 指令/ ,/ 那么/ 某个/ 事件/ ei/ 的/ 处理/ 时间/ 可以/ 表示/ 为/ Ti/ =/ Ins/ (/ ei/ )/ // κ/ ./ 此外/ ,/ 真正/ 的/ R/ 监控/ 应用/ 数据处理系统/ 还要/ 进行/ 数据/ 清洗/ 、/ 数据分析/ 和/ 集成/ 等/ 很多/ 任务/ ,/ 因此/ 只能/ 分配/ 给/ 查询处理/ 有限/ 的/ 处理/ 资源/ ./ 采用/ 抢占/ 式/ 的/ 分时/ 策略/ ,/ 假设/ Si/ 的/ 分时/ 周期/ 为/ ticycle/ ,/ tcycle/ 为/ 其它/ 非/ 查询处理/ 任务分配/ 的/ 时间/ ,/ 即/ ∑/ nticycle/ +/ tcycle/ =/ 1/ ,/ 则/ tii/ =/ 1ticycle/ =/ Ins/ (/ ei/ )/ // (/ ti/ 基于/ 本文/ 资源分配/ 模型/ 的/ 分时/ 调度/ 的/ 基本/ 时间/ 分配/ 算法/ ./ 需要/ 说明/ 的/ 是/ ,/ 因为/ 所有/ 流上/ 的/ 处理/ 代价/ 通过/ 统一/ 的/ 自动机/ 模型/ 可以/ 看作/ 近似/ 的/ 常数/ ,/ 因此/ 在/ 具体/ 实现/ 的/ 过程/ 中/ ,/ 可以/ 直接/ 通过/ 控制/ 循环/ 的/ 次数/ 来/ 模拟/ 分/ 时/ 调度/ 的/ 过程/ ,/ 而/ 不必/ 使用/ 其它/ 线程/ 来/ 控制/ 分/ 时/ 调度/ ,/ 并/ 没有/ 浪费/ 额外/ 的/ CPU/ 时间/ ./ 算法/ 1/ ./ 分时/ 调度/ 资源分配/ 模型/ 算法/ ./ 输入/ :/ CPU/ 每秒/ 处理/ 的/ 指令/ 数目/ κ/ ,/ 各/ 事件/ 流上/ 单/ 事件/ 输出/ :/ 单位/ 事件/ 内/ 分给/ 各个/ 事件/ 流/ 的/ 处理/ 时间/ ticycle1/ ./ tiPage112/ ./ tn3/ ./ iftn4/ ./ γ/ ←/ (/ tn5/ ./ while/ (/ tn6/ ./ tn7/ ./ 根据/ 式/ (/ 9/ )/ 计算/ θ/ σ/ (/ μ/ n/ )/ 8/ ./ 根据/ 或/ 定理/ 1/ 或/ 定理/ 2/ 计算/ min/ (/ ω/ avg/ )/ 和/ 9/ ./ ifmax/ (/ θ/ σ/ (/ 1/ -/ min/ (/ wavg/ )/ )/ )/ =/ TRUE10/ ./ returntncycle/ ←/ Ins/ (/ en/ )/ // (/ tn/ 在/ 本文/ 中/ ,/ 仅仅/ 以泊松/ 过程/ 做/ 为/ 典型/ 的/ 到达/ 过程/ ,/ 分析/ 了/ 资源分配/ 的/ 模型/ ./ 对于/ 事件/ 到达/ 满足/ 其它/ 随机/ 过程/ 的/ 情况/ ,/ 需要/ 在/ 截止期/ 满足/ 率/ 计算/ 方面/ 参考/ 排队/ 论中/ 的/ G/ // D/ // 1/ 模型/ ./ 但/ 由于/ G/ // D/ // 1/ 模型/ 在/ 一些/ 情况/ 下/ 只能/ 给出/ 满足/ 率/ 分布/ 的/ 近似/ 结果/ 或者/ 转换/ 形式/ ,/ 需要/ 对/ 结果/ 进行/ 误差/ 的/ 估计/ 和/ 相应/ 的/ 处理/ ./ 此外/ ,/ 对于/ 多/ 查询/ 的/ 复杂/ 事件处理/ 应用/ ,/ 本文/ 提出/ 的/ 模型/ 假设/ 各个/ 查询/ 之间/ 是/ 相互/ 独立/ 的/ ,/ 并/ 不/ 存在/ 基于/ 查询/ 共享/ 的/ 优化/ ,/ 每个/ 查询/ 都/ 按照/ 各自/ 的/ 资源分配/ 算法/ 来/ 合理/ 地/ 分配资源/ ./ 分析/ 查询/ 共享/ 对/ 本文/ 模型/ 和/ 算法/ 的/ 影响/ 是/ 我们/ 下/ 一步/ 的/ 工作/ ./ 6/ 实验/ 评估/ 6.1/ 实验/ 设置/ 本/ 实验/ 的/ 硬件/ 环境/ 是/ 兼容机/ 2.4/ GHz/ 的/ Pentium4CPU/ ,/ 主存/ 为/ 1GB/ ,/ 硬盘/ 为/ 120GB/ ./ 软件/ 图/ 4/ 截止期/ 满足/ 率/ 模型/ 实验/ 结果/ 环境/ 是/ WindowsXP/ 操作系统/ ,/ VirtualStudio/ C++/ 6.0/ 编程/ 环境/ ,/ 算法/ 采用/ C语言/ 编写/ ./ 相关/ 的/ 函数/ 求解/ 使用/ 了/ Matlab/ 工具/ ./ 我们/ 以/ RFID/ 智能/ 博物馆/ 监控/ 为/ 背景/ ,/ 模拟/ 了/ 满足/ 泊松/ 过程/ 的/ 事件/ 流/ ./ 实验/ 涉及/ 到/ 的/ 相关/ 参数/ 包括/ 各泊/ 松流/ 参数/ λ/ i/ 、/ 延迟/ 上限/ td/ 、/ 总/ 分配/ 处理/ 资源/ μ/ 和/ 各个/ 事件/ 流/ 的/ 分配/ 处理/ 资源/ μ/ i/ 等/ ./ 本/ 实验/ 将/ 分别/ 验证/ 处理/ 代价/ 模型/ 、/ 截止期/ 满足/ 率/ 模型/ 、/ 乱序/ 率/ 模型/ 的/ 正确性/ 以及/ 基于/ 乱序/ 反馈/ 的/ 资源分配/ 模型/ 和/ 相应/ 的/ 分时/ 调度/ 算法/ 的/ 有效性/ ./ 在/ 实验/ 中/ ,/ 以/ 应用/ 中/ 比较/ 常见/ 的/ First/ 模式/ 为例/ 进行/ 测试/ ,/ 并且/ 通过/ 调整/ 分配/ 给/ 复杂/ 事件处理/ 的/ CPU/ 处理/ 资源/ 比例/ ,/ 灵活/ 地/ 调整/ μ/ 值/ ./ 不失/ 一般性/ ,/ 相关/ 的/ 实验/ 结果/ 同样/ 适用/ 于/ 其它/ 的/ 消耗/ 模式/ 和/ 复杂/ 查询/ ./ 6.2/ 截止期/ 满足/ 率/ 模型/ 实验/ 本/ 实验/ 对/ 基于/ 式/ (/ 9/ )/ 的/ 截止期/ 满足/ 率/ 模型/ 进行/ 了/ 验证/ ,/ 因为/ 该/ 模型/ 与/ 事件/ 类型/ 个数/ 无关/ ,/ 所以/ 假设/ 查询/ 为/ SEQ/ (/ E1/ ,/ E2/ )/ ,/ 通过/ 分别/ 改变/ 分配/ 的/ 单位/ 事件处理/ 时间/ t2/ 间隔/ 1/ // λ/ 2/ 的/ 值/ ,/ 来/ 测试/ 实际/ 的/ 截止期/ 满足/ 率/ 和/ 理论值/ 之间/ 的/ 关系/ ./ 通过/ 图/ 4/ (/ a/ )/ ~/ (/ c/ )/ 的/ 实验/ 结果/ 可以/ 看出/ ,/ 实际/ 值/ 和/ 理论值/ 的/ 误差/ 相对/ 较/ 小/ 而且/ 趋势/ 基本一致/ ,/ 因此/ 基本/ 不会/ 影响/ 资源分配/ 的/ 模型/ ./ 可以/ 看出/ ,/ 随着/ t2/ 止期/ 满足/ 率/ 也/ 会/ 逐渐/ 减小/ ./ 特别/ 的/ ,/ 如图/ 4/ (/ d/ )/ 所示/ ,/ 采用/ 式/ (/ 5/ )/ 对/ 平均/ 延迟/ 进行/ 估算/ ,/ 也/ 有着/ 非常/ 小/ 的/ 误差/ ./ Page126/ ./ 3/ 乱序/ 率/ 模型/ 实验/ 本/ 实验/ 对/ 相关/ 的/ 乱序/ 率/ 模型/ 进行/ 了/ 验证/ ./ 图/ 5/ (/ a/ )/ 给出/ 了/ SEQ/ (/ A/ ,/ B/ )/ 的/ 验证/ 结果/ ,/ 可以/ 看出/ 基于/ 式/ (/ 17/ )/ 的/ 理论值/ 和/ 实际/ 值/ 有着/ 很小/ 的/ 误差/ ,/ 随着/ μ/ 2/ 的/ 增大/ ,/ 即/ μ/ 1/ 值/ 随之/ 减小/ ,/ 乱序/ 率/ 逐渐/ 增大/ ./ 图/ 5/ (/ b/ )/ 给出/ 了/ SEQ/ (/ A/ ,/ B/ ,/ C/ )/ 的/ 验证/ 结果/ ,/ 对于/ 这类/ 多/ 事件/ 类型/ 的/ 查询/ ,/ 分别/ 采用/ 定理/ 1/ 和/ 定理/ 2/ 得到/ 理论/ 数图/ 5/ 乱序/ 率/ (/ w/ )/ 模型/ 实验/ 结果/ 6.4/ 资源/ 最优化/ 分配/ 模型/ 实验/ 本/ 实验/ 对/ 基于/ 乱序/ 反馈/ 修正/ 的/ 资源分配/ 模型/ 进行/ 了/ 测试/ ./ 为了/ 更/ 清楚/ 地/ 反映/ 变化/ 的/ 过程/ ,/ 将/ 资源/ 和/ 满足/ 率/ 都/ 控制/ 在/ 较/ 低/ 的/ 水平/ ./ Theory/ -/ RF/ 和/ Theory/ -/ NRF/ 分别/ 表示/ 采用/ 处理/ 乱序/ 反馈/ 修正/ 和/ 不/ 考虑/ 处理/ 乱序/ 问题/ 的/ 满足/ 率/ ./ 图/ 6/ (/ a/ )/ 给出/ 了/ SEQ/ (/ A/ ,/ B/ )/ 的/ 验证/ 结果/ ,/ 随着/ μ/ 2/ 的/ 增大/ ,/ Theory/ -/ RF/ 是/ 对/ 真实/ 值/ 的/ 合理/ 估计/ ,/ 并且/ 根据/ 本文/ 模型/ 计算/ 得到/ 的/ 最优/ 资源分配/ 解/ μ/ 2/ =/ 1271/ 也/ 与/ 实验/ 结果/ 基本一致/ ./ 而/ 采用/ Theory/ -/ NRF/ ,/ 由于/ 没有/ 考虑/ 大量/ 存在/ 的/ 处理/ 乱序/ ,/ 图/ 6/ 资源/ 最优化/ 分配/ 模型/ 实验/ 结果/ 值解/ 和/ 近似/ 估算/ 解/ ,/ 与/ 实际/ 运行/ 得到/ 的/ 乱序/ 率相/ 比较/ ,/ 偏差/ 都/ 在/ 可/ 接受/ 的/ 范围/ 之内/ ,/ 特别/ 的/ ,/ 理论/ 数值/ 解/ 有着/ 更好/ 的/ 近似/ ./ 因为/ 实验/ 中/ 固定/ μ/ 3/ =/ 1100/ ,/ 随着/ μ/ 2/ 增大/ ,/ μ/ 1/ 逐渐/ 减小/ ./ 根据/ 本文/ 的/ 模型/ ,/ 在/ μ/ 2/ =/ 1259/ 时会/ 出现/ 理论/ 的/ 最小/ 乱序/ 率/ ,/ 与/ 图/ 5/ (/ b/ )/ 的/ 实验/ 结果/ 也/ 是/ 吻合/ 的/ ./ 估算/ 是/ 不/ 准确/ 的/ ./ 图/ 6/ (/ b/ )/ 给出/ 了/ SEQ/ (/ A/ ,/ B/ ,/ C/ )/ 的/ 实验/ 结果/ ,/ 通过/ 固定/ μ/ 3/ =/ 1100/ ,/ 增大/ μ/ 2/ 的/ 值/ ,/ 可以/ 得到/ 理论/ 计算/ 出/ 的/ 最优/ 解为/ μ/ 2/ =/ 1284/ ,/ 与/ 实验/ 结果/ 一致/ ./ 图/ 6/ (/ c/ )/ 给出/ 了/ 随着/ μ/ 增大/ ,/ 按照/ 最优化/ 资源分配/ 方法/ 进行/ 分配/ 后/ 的/ 最优/ 解/ ,/ 可以/ 看出/ ,/ 理论值/ 和/ 实际/ 值/ 是/ 基本/ 吻合/ 的/ ,/ 因此/ 本文/ 的/ 资源分配/ 优化/ 模型/ 是/ 有效/ 的/ ./ 随着/ 分配资源/ μ/ 的/ 增大/ ,/ 满足/ 率会/ 逐渐/ 增大/ ,/ 直到/ 趋近/ 为/ 1/ ./ 图/ 6/ (/ d/ )/ 将/ 资源分配/ 模型/ 对应/ 的/ 分时/ 调度/ 与/ 其它/ 调度/ 进行/ 了/ 比较/ ,/ 与/ 理论/ 分析/ 一致/ ,/ 分/ 时/ 调度/ RR/ 在/ 解决/ 复杂/ 事件处理/ 截止期/ 满足/ 率问/ Page13/ 题上/ 要/ 优于/ FIFO/ 和/ EDF/ 的/ 调度/ 方法/ ./ 7/ 结论/ 及/ 未来/ 工作/ 随着/ 以/ 无线/ 射频/ 识别/ 技术/ 为/ 代表/ 的/ 监控/ 技术/ 的/ 发展/ ,/ 产生/ 了/ 大量/ 包含/ 丰富/ 语义/ 的/ 事件/ 流/ ./ 如何/ 在/ 确定/ 的/ 截止期/ 限制/ 下/ ,/ 通过/ 合理/ 的/ 资源分配/ ,/ 得到/ 更/ 多/ 的/ 满足/ 截止期/ 的/ 复杂/ 事件处理/ 结果/ ,/ 有着/ 广泛/ 的/ 应用/ 需求/ ./ 本文/ 提出/ 了/ 各种/ 复杂/ 事件处理/ 操作/ 和/ 限制/ 语义/ ,/ 以及/ 其它/ 操作/ 向/ 时序/ 操作/ 的/ 转化/ 模型/ ,/ 并/ 通过/ 对/ 消耗/ 模式/ 的/ 定义/ 和/ 分析/ ,/ 给出/ 了/ 比较/ 完备/ 的/ 代价/ 模型/ 体系/ ./ 以/ 常见/ 的/ 泊松/ 分布/ 到达/ 模型/ 为例/ ,/ 在/ 代价/ 模型/ 的/ 基础/ 上/ ,/ 建立/ 了/ 基于/ 截止期/ 的/ 复合/ 事件/ 满足/ 率/ 模型/ ,/ 特别/ 的/ ,/ 进一步/ 定义/ 了/ 多/ 事件/ 类型/ 的/ 处理/ 反馈/ 修正/ 模型/ ,/ 进而/ 给出/ 了/ 复杂/ 条件/ 下/ 的/ 最优化/ 资源分配/ 模型/ ./ 该/ 模型/ 通过/ 合理/ 的/ 资源分配/ ,/ 能够/ 保证/ 在/ 实时/ 限制/ 下/ 结果/ 正确/ 的/ 事件/ 比率/ 达到/ 最大/ ./ 通过/ 该/ 模型/ ,/ 可以/ 设计/ 相应/ 的/ 分时/ 调度/ 策略/ ,/ 在/ 解决/ 截止期/ 敏感/ 的/ 监控/ 应用/ 上要/ 优于/ 其它/ 的/ 方法/ ./ 实验/ 证明/ ,/ 本文/ 的/ 处理/ 模型/ ,/ 截止期/ 满足/ 模型/ 和/ 乱序/ 率/ 模型/ 是/ 合理/ 的/ ,/ 真实/ 值/ 和/ 理论值/ 的/ 偏差/ 很小/ ,/ 同时/ ,/ 采用/ 处理/ 乱序/ 反馈/ 修正/ 后/ 的/ 资源分配/ 方案/ 可以/ 大大/ 优化/ 最终/ 的/ 结果/ 满足/ 率/ ,/ 实现/ 资源/ 的/ 最优化/ 配置/ ./ 在/ 未来/ 的/ 工作/ 中/ ,/ 我们/ 将/ 进一步/ 考虑/ 满足/ 其它/ 随机/ 分布/ 的/ 到达/ 模型/ ,/ 并/ 研究/ 查询/ 共享/ 对模型/ 算法/ 的/ 影响/ ,/ 以及/ 给出/ 针对/ 各种/ 复杂/ 应用/ 语义/ 的/ 存储/ 代价/ 最优化/ 模型/ 和/ 多维/ QoS/ 的/ 资源分配/ 最优化/ 模型/ ./ 

