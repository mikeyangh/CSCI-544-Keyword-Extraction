Page1/ 基于/ 节点/ 运动/ 预测/ 的/ 社会性/ DTN/ 高效/ 路由/ 张振京/ 1/ )/ 金志/ 刚/ 2/ )/ 舒炎/ 泰/ 1/ )/ 1/ )/ (/ 天津大学/ 计算机科学/ 与/ 技术/ 系/ 天津/ 300072/ )/ 2/ )/ (/ 天津大学/ 通信/ 工程系/ 天津/ 300072/ )/ 摘要/ 延迟/ 容忍/ 网络/ 是/ 一种/ 缺乏/ 持续/ 连接/ 的/ 新型/ 网络体系结构/ ,/ 采用/ 存储/ -/ 携带/ -/ 转发/ 的/ 路由/ 方式/ 进行/ 消息/ 的/ 转发/ ./ 考虑/ 到/ 节点/ 的/ 特性/ 及/ 运动/ 模式/ ,/ 基于/ 分簇/ 、/ 社会/ 网络/ 的/ 路由/ 协议/ 已/ 成为/ 近年来/ 的/ 一个/ 研究/ 热点/ ./ 该文/ 分析/ 现有/ 基于/ 分簇/ 、/ 社会/ 网络/ 的/ 路由/ 算法/ 的/ 缺陷/ 及/ 社会/ 网络/ 的/ 特点/ ,/ 提出/ 了/ 一种/ 新型/ 的/ 混合/ 路由/ 算法/ CS/ -/ DTN/ (/ Clustering/ &/ SocialDelayTolerantNetwork/ )/ :/ 预测/ 节点/ 间/ 的/ 相遇/ 概率/ 并/ 据此/ 对/ 节点/ 进行/ 分簇/ ,/ 簇内/ 根据/ 节点/ 间/ 相遇/ 概率/ 限定/ 消息/ 的/ 副本/ 数量/ ,/ 将/ 消息/ 以/ 二分/ 喷射/ 的/ 方式/ 转发/ 到/ 更/ 可能/ 到达/ 目的/ 节点/ 的/ 中继/ 节点/ ;/ 簇间/ 对/ 节点/ 进行/ 运动/ 预测/ 并/ 结合/ 节点/ 的/ 特性/ 将/ 消息/ 不断/ 地/ 转发/ 到/ 更/ 接近/ 目的/ 节点/ 的/ 中继/ 节点/ ./ 不同于/ 已有/ 的/ 基于/ 分簇/ 、/ 社会/ 网络/ 的/ 路由/ 算法/ ,/ CS/ -/ DTN/ 从/ 多个/ 角度/ 结合/ 了/ 节点/ 自身/ 及/ 节点/ 间/ 的/ 特性/ ,/ 更/ 考虑/ 了/ 对/ 节点/ 的/ 运动/ 预测/ ,/ 降低/ 了/ 由/ 不必要/ 的/ 消息/ 转发/ 带来/ 的/ 资源/ 浪费/ ,/ 同时/ 也/ 能/ 更/ 高效/ 地/ 将/ 消息/ 投递/ 到/ 目的/ 节点/ ./ 仿真/ 结果表明/ CS/ -/ DTN/ 较为/ 明显/ 地/ 提升/ 了/ 消息/ 的/ 成功/ 投递/ 率/ 并/ 降低/ 了/ 消息/ 的/ 平均/ 端到/ 端/ 延迟/ ,/ 在/ 缓存/ 足够/ 的/ 前提/ 下/ ,/ CS/ -/ DTN/ 可以/ 实现/ 高达/ 95/ %/ 的/ 投递/ 率/ ,/ 而/ 在/ 资源/ 有限/ 的/ 情况/ 下/ 也/ 能/ 获得/ 80/ %/ 以上/ 的/ 投递/ 率/ ./ 关键词/ 延迟/ 容忍/ 网络/ ;/ 路由/ ;/ 分簇/ ;/ 社会/ 网络/ ;/ 投递/ 率/ 1/ 引言/ 延迟/ 容忍/ 网络/ (/ Delay/ -/ TolerantNetwork/ ,/ DTN/ )/ 是/ 一种/ 缺乏/ 持续/ 端到/ 端/ 连接/ 的/ 新型/ 网络体系结构/ ./ 由于/ 缺乏/ 稳定/ 的/ 端/ 到/ 端的/ 路径/ 、/ 误码率/ 高且/ 节点/ 间端/ 到/ 端/ 延迟/ 较/ 高/ ,/ 在/ DTN/ 中/ 采用/ 了/ 存储/ -/ 携带/ -/ 转发/ (/ Store/ -/ Carry/ -/ Forward/ ,/ SCF/ )/ 的/ 路由/ 协议/ ./ 最初/ 的/ DTN/ 路由/ 协议/ 主要/ 以/ 控制/ 副本/ 的/ 路由/ 协议/ 及/ 基于/ 上下文/ 信息/ 的/ 路由/ 协议/ 为主/ ,/ 其中/ 基于/ 副本/ 控制/ 的/ 路由/ 协议/ 包含/ 传染病/ 路由/ 协议/ EPI/ (/ Epidemic/ )/ [/ 1/ ]/ 、/ PREP/ (/ PrioritizedEpidemic/ )/ [/ 2/ ]/ 、/ SprayandWait/ [/ 3/ ]/ 、/ 直接/ 传输/ (/ Directtransmission/ )/ [/ 4/ ]/ 等/ ,/ 基于/ 上下文/ 信息/ 的/ 路由/ 协议/ 主要/ 包含/ SeekandFocus/ [/ 5/ ]/ 、/ PROPHET/ (/ ProbabilisticRoutingProtocolusingHistoryofEncountersandTransitivity/ )/ [/ 6/ ]/ 等/ ./ 基于/ 上下文/ 的/ 路由/ 协议/ 利用/ 历史/ 信息/ 来/ 预测/ 未来/ 的/ 消息/ 转发/ 策略/ ,/ 以/ PROPHET/ 为例/ ,/ PROPHET/ 是/ 一种/ 基于/ 概率/ 策略/ 的/ 路由/ 协议/ ,/ 它/ 利用/ 节点/ 间/ 相遇/ (/ encounter/ )/ 的/ 历史/ 信息/ 和/ 传递性/ (/ transitivity/ )/ 来/ 选择/ 下/ 一/ 跳/ 节点/ ,/ 以/ 传输/ 可预测性/ (/ predictability/ )/ P/ ∈/ (/ 0/ ,/ 1/ ]/ 作为/ 概率/ 度量/ 标准/ ,/ 即/ P/ (/ a/ ,/ b/ )/ =/ P/ (/ a/ ,/ b/ )/ old/ +/ (/ 1/ -/ P/ (/ a/ ,/ b/ )/ old/ )/ ×/ Pinit/ (/ 1/ )/ 其中/ ,/ a/ 和/ b/ 表示/ 任意/ 两个/ 节点/ ,/ Pinit/ ∈/ (/ 0/ ,/ 1/ ]/ 表示/ 初始/ 常量/ ./ PROPHET/ 协议/ 的/ 消息/ 转发/ 思想/ 为/ :/ 对于/ 节点/ A/ 和/ 节点/ B/ ,/ 当/ 节点/ A/ 与/ B/ 相遇/ 时/ ,/ 若/ 节点/ B/ 与/ 目的/ 节点/ 之间/ 的/ 传输/ 可预测性/ 更高/ ,/ 则/ 节点/ A/ 将/ 消息/ 转发/ 到/ 节点/ B/ ./ 随着/ 基于/ 副本/ 控制/ 的/ 路由/ 技术/ 的/ 成熟/ ,/ 越来越/ 多/ 的/ 研究者/ 开始/ 分析/ 节点/ 间/ 的/ 相互/ 联系/ 、/ 节点/ 的/ 运动/ 特性/ 对/ 路由/ 协议/ 产生/ 的/ 影响/ ./ 近年来/ ,/ 利用/ 节点/ 间/ 的/ 相互/ 联系/ ,/ 分簇/ // 分层/ 路由/ 技术/ 被/ 引入/ 到/ DTN/ 中/ ,/ 主要/ 的/ 研究/ 工作/ 有/ 基于/ 分层/ 的/ 层次化/ 机制/ [/ 7/ ]/ 、/ 基于/ 最大/ 直径/ 的/ 分簇/ 算法/ [/ 8/ ]/ 、/ 基于/ 节点/ 相遇/ 概率/ 的/ 分簇/ 方法/ [/ 9/ ]/ ./ 另外/ ,/ 根据/ 节点/ 的/ 运动/ 特性/ 进行/ 消息/ 的/ 转发/ ,/ 也/ 形成/ 了/ 许多/ 不同/ 的/ 路由/ 算法/ :/ 相似性/ 与/ 中介/ 中心/ 性/ (/ BetweennessCentrality/ )/ 相结合/ 的/ 路由/ 算法/ [/ 10/ ]/ (/ 相似性/ 是/ 指/ 两个/ 节点/ 共同/ 邻居/ 的/ 数量/ ;/ 相对/ 于/ 节点/ s/ ,/ d/ ,/ 节点/ i/ 的/ 中介/ 中心/ 性是/ 指/ 在/ s/ 与/ d/ 之间/ 的/ 所有/ 最短/ 路径/ 中/ ,/ 经过/ 节点/ i/ 的/ 最/ 短/ 路径/ 所/ 占/ 的/ 比例/ )/ ,/ 根据/ 节点/ 的/ 活跃/ 程度/ [/ 11/ ]/ 、/ 社会/ 距离/ [/ 14/ ]/ 、/ 节点/ 的/ 投递/ 概率/ 预测/ 进行/ 转发/ 等/ ./ 在/ 基于/ 节点/ 运动/ 特性/ 的/ 路由/ 协议/ 中/ ,/ 如何/ 充分利用/ 节点/ 之间/ 的/ 相遇/ 、/ 节点/ 的/ 运动/ 方向/ 以及/ 节点/ 的/ 活跃/ 程度/ (/ 节点/ 在/ 一定/ 时间/ 内/ 遇到/ 的/ 不同/ 节点/ 的/ 数量/ 越/ 多/ ,/ 活跃/ 程度/ 越高/ )/ 成为/ 决定/ 路由/ 性能/ 的/ 关键/ ./ 本文/ 分析/ 了/ 现有/ 基于/ 节点/ 运动/ 特性/ 的/ 路由/ 机制/ 的/ 缺陷/ ,/ 提出/ 了/ 一种/ 社会/ 网络/ 场景/ 下/ 的/ 基于/ 节点/ 运动/ 预测/ 的/ 高效/ 路由/ CS/ -/ DTN/ (/ Clustering/ &/ SocialDelayTolerantNetwork/ )/ ./ 在/ 社会/ 网络/ 场景/ (/ 校园/ 、/ 国际/ 会议/ 等/ )/ 中/ ,/ 节点/ 往往/ 以/ 群组/ 的/ 方式/ 出现/ (/ 社群/ 性/ )/ ,/ 在/ 每个/ 群组/ 中有/ 少数/ 节点/ 活跃/ 程度较高/ ./ 以/ 校园/ 场景/ 为例/ ,/ 同一个/ 班级/ 的/ 同学/ 出现/ 在/ 同一个/ 场所/ 的/ 可能性/ 很/ 高/ ,/ 在/ 班级/ 中/ 班长/ 的/ 活跃/ 程度/ 比/ 其他同学/ 要/ 高/ ./ 因而/ CS/ -/ DTN/ 根据/ 节点/ 之间/ 的/ 相遇/ 概率/ 将/ 节点/ 分成/ 不同/ 的/ 簇/ ,/ 簇内/ 根据/ 相遇/ 概率/ 限制/ 消息/ 的/ 拷贝/ 数量/ ,/ 簇间/ 根据/ 节点/ 的/ 活跃/ 程度/ 、/ 节点/ 与/ 目的/ 节点/ 的/ 相对/ 位置/ 及/ 节点/ 的/ 运动/ 方向/ 预测/ 进行/ 消息/ 的/ 转发/ ./ 由于/ 充分利用/ 了/ 社会/ 网络/ 的/ 特点/ ,/ 另外/ 又/ 结合/ 了/ 节点/ 运动/ 预测/ ,/ 从而/ 在/ 明显提高/ 消息/ 投递/ 率/ 的/ 同时/ ,/ 极大/ 地/ 降低/ 了/ 消息/ 的/ 端/ 到/ 端/ 延迟/ ./ 2/ 基于/ 节点/ 运动/ 的/ 社会性/ DTN/ 高效/ 路由/ 本章/ 使用/ 到/ 的/ 数学/ 符号/ 介绍/ 如表/ 1/ 所示/ ./ 符号/ 表示/ ε/ ij/ 节点/ i/ 与/ 节点/ j/ 之间/ 的/ 相遇/ 概率/ α/ 0/ 与/ 1/ 之间/ 一/ 恒定/ 值/ γ/ 分簇/ 阈值/ Ci/ 节点/ i/ 所在/ 的/ 簇/ Si/ 节点/ i/ 在/ Ci/ 中/ 的/ 稳定性/ Mi/ 节点/ i/ 所在/ 的/ 簇/ 成员/ 列表/ i/ 节点/ i/ ,/ j/ 的/ 相遇/ 时间/ Tj/ Ψ/ jiPage32/ ./ 1/ 基于/ 节点/ 运动/ 特性/ 的/ DTN/ 路由/ 分析/ 在/ 基于/ 节点/ 运动/ 特性/ 的/ 路由/ 协议/ 中/ ,/ 如何/ 利用/ 节点/ 之间/ 的/ 相互/ 联系/ 、/ 节点/ 的/ 活跃/ 程度/ 以及/ 节点/ 的/ 运动/ 方向/ 成为/ 决定/ 消息/ 投递/ 率/ 的/ 关键/ ./ 文献/ [/ 7/ ]/ 中/ 的/ 层次化/ 的/ 转发/ 机制/ ,/ 是/ 根据/ 节点/ 的/ 相遇/ 频率/ 对/ 节点/ 进行/ 分层/ ./ 节点/ 根据/ 其/ 相遇/ 频率/ 分为/ 多个/ 包含/ 两个/ 节点/ 的/ 组/ ,/ 然后/ 根据/ 组/ 相遇/ 频率/ 将/ 两个/ 相遇/ 频率/ 最大/ 的/ 组合/ 并/ ,/ 组间/ 相遇/ 频率/ 的/ 计算公式/ 为/ Dij/ 表示/ 节点/ i/ 与/ 节点/ j/ 之间/ 的/ 相遇/ 频率/ ,/ M/ ,/ N/ 分别/ 指/ 两个/ 组中/ 节点/ 的/ 个数/ ./ 以此类推/ 形成/ 一棵/ 根/ 包含/ 所有/ 节点/ 的/ 二叉树/ ./ 此类/ 基于/ 分簇/ // 分层/ 的/ 路由/ [/ 7/ -/ 9/ ]/ 主要/ 是/ 利用/ 节点/ 之间/ 的/ 相互/ 联系/ 、/ 紧密/ 程度/ 机制/ ,/ 使/ 联系/ 紧密/ 的/ 节点/ 之间/ 能够/ 采用/ 高效/ 的/ 消息/ 传输/ ./ 然而/ ,/ 对于/ 联系/ 不够/ 紧密/ 的/ 节点/ ,/ 需要/ 在/ 不同/ 的/ 簇/ // 层间/ 进行/ 传输/ ./ 文献/ [/ 7/ ]/ 中/ ,/ 需要/ 自叶/ 节点/ 从/ 下/ 而/ 上/ 对/ 二叉树/ 进行/ 搜索/ ,/ 直到/ 包含/ 目的/ 节点/ 的/ 簇/ // 层/ ,/ 文献/ [/ 9/ ]/ 中/ 也/ 需要/ 进行/ 簇间/ 的/ 寻路/ 过程/ ./ 然而/ 由于/ DTN/ 网络/ 中/ 的/ 拓扑/ 复杂多变/ ,/ 簇间/ 路径/ 稍逊/ 即逝/ ,/ 在/ 寻路/ 过程/ 中/ 会/ 浪费/ 大量/ 的/ 带宽/ ,/ 同时/ 也/ 会/ 增加/ 消息/ 的/ 投递/ 延迟/ ./ 另一方面/ ,/ 基于/ 节点/ 活跃/ 程度/ 的/ 路由/ [/ 10/ -/ 15/ ]/ ,/ 主要/ 考虑/ 活跃/ 节点/ 在/ 转发/ 消息/ 时/ 带来/ 的/ 性能/ 优化/ ./ 文献/ [/ 10/ ]/ 中/ 基于/ 小/ 世界/ 的/ 理论/ ,/ 提出/ 了/ 一种/ 以/ 相似性/ (/ Sim/ )/ 与/ 中介/ 中心/ 性/ (/ Bet/ )/ 相结合/ (/ SimBet/ )/ 的/ 路由/ 算法/ ./ 假设/ 节点/ N/ 需要/ 转发/ 消息/ 到/ 目的/ 节点/ D/ ,/ 当/ 节点/ N/ 遇到/ 节点/ M/ 时/ ,/ SimBetN/ (/ D/ )/ 为/ SimUtilN/ (/ D/ )/ =/ SimN/ (/ D/ )/ BetUtilN/ =/ BetNBetN/ +/ BetMSimBetN/ (/ D/ )/ =/ α/ ×/ SimUtilN/ (/ D/ )/ +/ β/ ×/ BetUtilN/ 通过/ 上述/ 算法/ 得到/ 节点/ N/ 与/ 目的/ 节点/ D/ 之间/ 的/ SimBetN/ (/ D/ )/ ,/ 同样/ 的/ 方法/ 得到/ SimBetM/ (/ D/ )/ ,/ 如果/ SimBetN/ (/ D/ )/ </ SimBetM/ (/ D/ )/ ,/ 则/ N/ 将/ 消息/ 转发/ 到/ M/ ,/ 同时/ 删除/ 对/ 该/ 消息/ 的/ 缓存/ ./ 类似/ 的/ 工作/ 也/ 在/ 文献/ [/ 11/ -/ 12/ ]/ 中/ 得到/ 体现/ ,/ 文献/ [/ 11/ ]/ 中/ 消息/ 被/ 不断/ 地/ 转发/ 到/ 具有/ 高/ 活跃性/ 的/ 节点/ ;/ 文献/ [/ 12/ ]/ 中/ 试图/ 将/ 消息/ 转发/ 到/ 最/ 有/ 可能/ 到达/ 目的/ 节点/ 的/ 中继/ 节点/ ./ 此类/ 路由/ 利用/ 在/ 网络/ 中/ 与/ 目的/ 节点/ 相遇/ 可能/ 较大/ 的/ 游走/ 节点/ 传输/ 消息/ ,/ 减少/ 了/ 消息/ 被/ 转发/ 的/ 次数/ ,/ 可以/ 保证/ 消息/ 快速/ 的/ 到达/ 目的/ 节点/ ./ 然而/ ,/ 如果/ 只/ 利用/ 节点/ 的/ 活跃/ 程度/ 也/ 会/ 带来/ 不必要/ 的/ 资源/ 浪费/ ./ 如图/ 1/ 所示/ ,/ 假设/ 节点/ 1/ ,/ 4/ ,/ 6/ 固定/ ,/ 节点/ 2/ ,/ 3/ ,/ 5/ 围绕/ 图中/ 所/ 标识/ 的/ 环/ 移动/ ,/ 旋转/ 一圈/ 的/ 周期/ 均/ 为/ t/ ./ 如果/ 节点/ 1/ 需要/ 将/ 消息/ 投递/ 到/ 节点/ 2/ ,/ 根据/ 路由/ 算法/ ,/ 节点/ 3/ ,/ 5/ 相对/ 节点/ 2/ 在/ 单位/ 时间/ 内/ 相遇/ 更/ 多/ 的/ 节点/ ,/ 视为/ 活跃/ 节点/ ,/ 节点/ 1/ 会/ 将/ 消息/ 转发/ 到/ 节点/ 3/ 或者/ 节点/ 5/ ./ 对于/ 单幅/ 本/ 路由/ ,/ 会/ 造成/ 消息/ 的/ 丢失/ ;/ 而/ 对于/ 多/ 副本/ 路由/ ,/ 会/ 大大增加/ 网络/ 的/ 负载/ ,/ 造成/ 资源/ 的/ 浪费/ ./ 通过/ 以上/ 分析/ 可知/ 现有/ 的/ 基于/ 节点/ 运动/ 特性/ 的/ 路由/ 算法/ 对/ 节点/ 的/ 运动/ 特性/ 考虑/ 不够/ 全面/ ,/ 如果/ 将/ 节点/ 间/ 的/ 联系/ 、/ 节点/ 的/ 活跃/ 程度/ 结合/ 起来/ 既/ 可以/ 实现/ 联系/ 紧密/ 节点/ 间/ 的/ 消息/ 的/ 有效/ 传输/ ,/ 同时/ 也/ 可以/ 实现/ 联系/ 不够/ 紧密/ 节点/ 之间/ 消息/ 的/ 可靠/ 投递/ ./ 另外/ ,/ 从图/ 1/ 中/ 可以/ 看出/ ,/ 当/ 节点/ 1/ 需要/ 投递/ 消息/ 到/ 节点/ 6/ 时/ ,/ 根据/ 节点/ 的/ 运动/ 预测/ (/ 节点/ 间/ 的/ 相对/ 位置/ ,/ 节点/ 的/ 运动/ 方向/ )/ ,/ 可以/ 避免/ 将/ 消息/ 转发/ 到/ 节点/ 3/ 带来/ 的/ 资源/ 的/ 浪费/ ./ 因此/ ,/ 本文/ 根据/ 节点/ 间/ 的/ 联系/ (/ 相遇/ 概率/ )/ 对/ 节点/ 进行/ 分簇/ ,/ 提出/ 了/ 簇间/ 根据/ 节点/ 的/ 活跃/ 程度/ 与/ 运动/ 方向/ 进行/ 消息/ 的/ 转发/ ,/ 簇内/ 采用/ 限制/ 副本/ 数量/ 路由/ 的/ 混合/ 路由/ 机制/ (/ CS/ -/ DTN/ )/ ,/ 下文/ 将/ 对/ 分簇/ 算法/ 、/ CS/ -/ DTN/ 路由/ 机制/ 进行/ 详细/ 的/ 介绍/ ./ 2.2/ 分簇/ 算法/ (/ 1/ )/ 节点/ 的/ 相遇/ 概率/ 节点/ 相遇/ 概率/ 即/ 节点/ 间/ 相遇/ 的/ 可能性/ 大小/ ,/ 计算公式/ 为/ ε/ ij/ =/ 节点/ 相遇/ 概率/ 会/ 在/ 每个/ 时隙/ 结束/ 的/ 时候/ 进行/ 更新/ ;/ 显然/ ,/ 当/ 节点/ 相遇/ 频繁/ 时/ ,/ 相遇/ 概率/ 也/ 会/ 随着/ 时间/ 不断/ 地/ 增大/ ,/ 反之/ 会/ 不断/ 减少/ ;/ 这能/ 很/ 好/ 地/ 体现/ 节点/ 之间/ 的/ 联系/ 程度/ ,/ 通过/ 此/ 相遇/ 概率/ 可以/ 大体/ 估算/ 出/ 节点/ 未来/ 的/ 相遇/ 情况/ ,/ 从而/ 为/ 消息/ 的/ 转发/ 提供/ 依据/ ./ 对于/ α/ ,/ 如果/ 取值/ 过/ 小/ ,/ 则/ 需要/ 较长时间/ 达到/ 稳定/ 状态/ ,/ 但会/ 减少/ 错位/ 的/ 发生/ ,/ 因而/ 需要/ 根据/ 不同/ 的/ 应用/ 场景/ 进行/ 选择/ ./ Page4/ (/ 2/ )/ 分簇/ 算法/ 定义/ 1/ ./ 节点/ 的/ 稳定性/ ./ 节点/ i/ 的/ 稳定性/ 指/ i/ 与/ Mi/ 中/ 其它/ 节点/ 的/ 相遇/ 概率/ 的/ 最小值/ ./ 记为/ Si/ ,/ 计算/ 如下/ :/ 定义/ 2/ ./ 节点/ 的/ 同步/ ./ 节点/ i/ 与/ 节点/ j/ 进行/ 同步/ ,/ 首先/ 交换/ 二者/ 的/ 相遇/ 列表/ ,/ 根据/ 相遇/ 时间/ 将/ 二者/ 的/ 相遇/ 列表/ 分为/ 两个/ 集合/ Ψ/ j/ 更新/ 簇/ 成员/ 列表/ 为/ Ψ/ j/ 类似/ ,/ Ψ/ j/ Ψ/ j/ 分簇/ 算法/ 的/ 基础/ 是/ 节点/ 间/ 的/ 相遇/ 概率/ ,/ 根据/ 节点/ 间/ 相遇/ 概率/ 的/ 变化/ 决定/ 一个/ 节点/ 加入/ 或者/ 离开/ 簇/ ./ 算法/ 基于/ 事件/ 触发/ ,/ 包含/ 两个/ 主要/ 的/ 事件/ :/ 时隙/ 超时/ 事件/ 及/ 节点/ 相遇/ 事件/ ./ 如/ 算法/ 1/ 所示/ ,/ 每个/ 时隙/ 结束/ 时/ 根据/ 式/ (/ 6/ )/ 进行/ 节点/ 间/ 相遇/ 概率/ 的/ 更新/ ./ 节点/ 相遇/ 时/ (/ 假设/ 相遇/ 的/ 节点/ 为/ 节点/ i/ 及/ 节点/ j/ )/ ,/ 包含/ 两种/ 情况/ :/ 节点/ i/ 与/ 节点/ j/ 属于/ 同一个/ 簇/ ;/ 节点/ i/ 与/ 节点/ j/ 属于/ 不同/ 的/ 簇/ ./ 当/ 节点/ i/ 与/ 节点/ j/ 属于/ 同一个/ 簇时/ ,/ 根据/ 二者之间/ 的/ 相遇/ 概率/ 判定/ :/ 如果/ 节点/ i/ 与/ 节点/ j/ 之间/ 的/ 相遇/ 概率/ 大于/ 设定/ 的/ 分簇/ 阈值/ ,/ 则/ 二者/ 进行/ 簇/ 成员/ 列表/ 的/ 同步/ ;/ 如果/ 节点/ i/ 与/ 节点/ j/ 之间/ 的/ 相遇/ 概率/ 小于/ 等于/ 设定/ 的/ 分簇/ 阈值/ ,/ 则/ 稳定性/ 低/ 的/ 节点/ 离开/ 当前/ 簇/ 并/ 形成/ 一个/ 新/ 的/ 只/ 包含/ 自身/ 的/ 簇/ ./ 当/ 节点/ i/ 与/ 节点/ j/ 不/ 属于/ 同一个/ 簇时/ ,/ 判定/ 节点/ i/ 是否/ 满足/ 加入/ Cj/ 的/ 条件/ 及/ 节点/ j/ 是否/ 满足/ 加入/ Ci/ 的/ 条件/ (/ 判定/ 规则/ 如/ 算法/ 1/ 所示/ ,/ 当/ 节点/ i/ 与/ Mj/ 中/ 的/ 任意/ 一个/ 成员/ 之间/ 的/ 相遇/ 概率/ 大于/ 给定/ 的/ 阈值/ ,/ 则/ 节点/ i/ 满足/ 加入/ 节点/ j/ 的/ 条件/ )/ :/ 如果/ 二者/ 均/ 满足/ ,/ 则/ 稳定性/ 低/ 的/ 节点/ 加入/ 稳定性/ 高/ 节点/ 所在/ 的/ 簇/ ;/ 如果/ 只有/ 其一/ 满足/ 时/ ,/ 假设/ 节点/ i/ 满足/ ,/ 则/ 节点/ i/ 加入/ Cj/ ;/ 如果/ 二者/ 均/ 不/ 满足/ 时/ ,/ 不/ 进行/ 簇/ 成员/ 的/ 更新/ ./ 算法/ 1/ ./ 分簇/ 算法/ ./ 1/ ./ IF/ (/ currenttime/ %/ timeunit/ =/ =/ 0/ )/ THEN2/ ./ UPDATE/ ε/ ikas/ (/ 6/ )/ FOReachnodei3/ ./ ENDIF4/ ./ IF/ (/ nodeicontactnodej/ )/ THEN5/ ./ IF/ (/ Ci/ =/ =/ Cj/ )/ THEN6/ ./ IF/ (/ ε/ ij/ </ =/ γ/ )/ THEN7/ ./ CALCULATESiandSjas/ (/ 7/ )/ 8/ ./ IF/ (/ Si/ </ =/ Sj/ )/ THEN9/ ./ UPDATECi/ =/ =/ i/ ,/ Mi/ =/ NULL10/ ./ ELSE11/ ./ UPDATECj/ =/ =/ j/ ,/ Mj/ =/ NULL12/ ./ ELSE13/ ./ CALCULATE/ Ψ/ j14/ ./ Mi/ =/ Ψ/ j15/ ./ ENDIF16/ ./ ELSE17/ ./ IF/ (/ / k/ ∈/ Cj/ ,/ Cik/ </ =/ γ/ &&/ / k/ ∈/ Ci/ ,/ Cjk/ </ =/ γ/ )/ THEN18/ ./ // // donothing19/ ./ ELSEIF/ (/ / k/ ∈/ Cj/ ,/ Cik/ </ =/ γ/ )/ THEN20/ ./ UPDATECj/ =/ i/ ,/ Mi/ =/ Mi/ ∪/ j/ ,/ Mj/ =/ Mi21/ ./ ELSEIF/ (/ / k/ ∈/ Ci/ ,/ Cjk/ </ =/ γ/ )/ THEN22/ ./ UPDATECi/ =/ j/ ,/ Mj/ =/ Mj/ ∪/ i/ ,/ Mi/ =/ Mj23/ ./ ELSE24/ ./ CALCULATESiandSjas/ (/ 7/ )/ 25/ ./ IF/ (/ Si/ </ =/ Sj/ )/ THEN26/ ./ UPDATECi/ =/ j/ ,/ Mj/ =/ Mj/ ∪/ i/ ,/ Mi/ =/ Mj27/ ./ ELSE28/ ./ UPDATECj/ =/ i/ ,/ Mi/ =/ Mi/ ∪/ j/ ,/ Mj/ =/ Mi29/ ./ ENDIF30/ ./ ENDIF31/ ./ ENDIF32/ ./ ENDIF2/ ./ 3CS/ -/ DTN/ 路由/ 机制/ 对/ 节点/ 进行/ 分簇/ 后/ ,/ 每个/ 节点/ 都/ 会/ 属于/ 一个/ 簇/ ,/ 假设/ 节点/ i/ 需要/ 传输/ 消息/ 到/ 节点/ j/ 时/ ,/ 包含/ 两种/ 情况/ :/ 节点/ i/ 与/ 节点/ j/ 属于/ 同一个/ 簇内/ ;/ 节点/ i/ 与/ 节点/ j/ 属于/ 不同/ 的/ 簇/ ./ 接下来/ 文章/ 将/ 对/ 簇内/ 路由/ 及/ 簇间/ 路由/ 进行/ 详细/ 介绍/ ./ 2.3/ ./ 1CS/ -/ DTN/ 簇内/ 路由/ 根据/ 分簇/ 算法/ ,/ 簇内/ 节点/ 之间/ 的/ 相遇/ 可能性/ 很大/ ,/ 因而/ 在/ 簇内/ 使用/ 限制/ 副本/ 数量/ 的/ DTN/ 路由/ 算法/ 会/ 获得/ 较/ 好/ 的/ 性能/ ./ CS/ -/ DTN/ 基于/ SprayandWait/ 算法/ ,/ 提出/ 了/ 簇内/ 路由/ 算法/ 如下/ :/ Spray/ &/ Wait/ (/ L/ )/ ,/ ε/ >/ φ/ Spray/ &/ Wait/ (/ n/ ×/ L/ )/ ,/ ε/ >/ φ/ ,/ n/ >/ =/ 1/ 其中/ φ/ 为/ 节点/ 间/ 的/ 相遇/ 概率/ 阈值/ ,/ 当/ 节点/ 间/ 相遇/ 概率/ 足够/ 大时/ ,/ 此时/ 仅/ 需要/ 小量/ 的/ 消息/ 副本/ (/ L/ )/ 即可/ 保证/ 消息/ 的/ 投递/ ,/ 当/ 概率/ 相对/ 较/ 低时/ ,/ 需要/ 适当/ 增加/ 消息/ 副本/ 的/ 数量/ (/ n/ ×/ L/ )/ ,/ 为了/ 减缓/ 节点/ 缓存/ 的/ 压力/ ,/ 采用/ 限制/ 消息/ 转发/ 次数/ 的/ 方式/ 来/ 控制/ 消息/ 副本/ 数量/ ./ 本文/ 中/ 设定/ L/ =/ 1/ ,/ n/ =/ 2/ ,/ φ/ =/ 0.7/ ./ 消息/ 的/ 转发/ 策略/ :/ 当/ 节点/ s/ 有/ 消息/ m/ (/ L/ 份/ 副本/ )/ 需要/ 发送到/ 节点/ d/ 时/ (/ 节点/ s/ 与/ 节点/ d/ 位于/ 同一个/ 簇内/ )/ ,/ 遇到/ 节点/ v/ ,/ 只有/ 在/ ε/ vd/ >/ ε/ sd/ 时/ ,/ 才/ 进行/ 转发/ ;/ 转发/ 时/ ,/ s/ 将/ L/ // 2/ 份/ 副本/ 转发/ 到/ v/ ,/ 当/ 节点/ 只/ 包含/ 一份/ 副本/ 时/ ,/ 只有/ 遇到/ 目的/ 节点/ d/ 时才/ 进行/ 转发/ ./ 2.3/ ./ 2CS/ -/ DTN/ 簇间/ 路由/ 根据/ 社会/ 网络/ 的/ 特点/ [/ 11/ ]/ ,/ 具有/ 高中/ 心性/ 的/ 节点/ Page5/ 将/ 消息/ 投递/ 到/ 目的/ 节点/ 的/ 可能性/ 更大/ ,/ 然而/ 只/ 考虑/ 节点/ 的/ 活跃/ 程度/ 在/ 一些/ 场景/ 下/ 不能/ 很/ 好/ 地/ 将/ 消息/ 投递/ 到/ 目的/ 节点/ ./ 因而/ CS/ -/ DTN/ 将/ 节点/ 的/ 中心/ 性/ 与/ 节点/ 的/ 运动/ 相结合/ 的/ 结果/ (/ Centrality/ &/ Direction/ ,/ CD/ )/ 作为/ 簇间/ 转发/ 的/ 判定/ 指标/ ,/ 下文/ 将会/ 给出/ CD/ 的/ 计算/ 算法/ ./ 将/ 节点/ 按照/ CD/ 进行/ 一个/ 全局/ 的/ 排名/ ,/ 簇间/ 进行/ 消息/ 传输/ 时/ ,/ 消息/ 只会/ 从/ 排名/ 较/ 低/ 的/ 节点/ 传递/ 到/ 排名/ 较/ 高/ 的/ 节点/ ,/ 直到/ 消息/ 被/ 投递/ 到/ 目的/ 节点/ 或者/ 目的/ 节点/ 所在/ 簇/ 的/ 成员/ ./ 假定/ 源/ 节点/ S/ 需要/ 向/ 目的/ 节点/ D/ (/ S/ 、/ D/ 属于/ 不同/ 的/ 簇/ )/ 转发/ 消息/ ,/ 遇到/ 节点/ A/ ,/ B/ ;/ 则/ 计算/ S/ ,/ A/ ,/ B/ 三者/ 的/ CD/ 值/ (/ CDS/ ,/ CDA/ ,/ CDB/ )/ ,/ 计算/ CD/ 前/ 首先/ 需要/ 计算/ 节点/ 的/ 中心/ 性/ 与/ 各个/ 节点/ 之间/ 的/ 相对/ 位置/ 及/ 运动/ 方向/ ./ (/ 1/ )/ 节点/ 的/ 中心/ 性/ ,/ 是/ 节点/ 在/ 一段时间/ 内/ 遇到/ 的/ 不同/ 节点/ 的/ 数量/ ,/ 会/ 随着/ 仿真/ 的/ 进行/ 不断/ 地/ 更新/ ,/ 记作/ Cen/ ;/ (/ 2/ )/ 节点/ 的/ 运动/ 方向/ 及/ 节点/ 与/ 目的/ 节点/ 的/ 相对/ 位置/ ./ 如图/ 2/ 所示/ ,/ 假设/ 已知/ 目的/ 节点/ 的/ 坐标/ 信息/ (/ 通过/ 北斗/ 等/ 双向/ GPS/ 定位/ ,/ 可用/ 小量/ 的/ 控制/ 信息/ 获取/ 目的/ 节点/ 的/ 位置/ )/ ,/ 节点/ 的/ 相对/ 位置/ 以/ 角度/ 表示/ ,/ 计算/ DSA/ 的/ 角度/ 为/ θ/ DSA/ =/ arccos/ |/ SA/ |/ 2/ +/ |/ SD/ |/ 2/ -/ |/ AD/ |/ 2/ 其中/ ,/ 其它/ 角度/ 计算/ 类似/ ,/ 计算/ 节点/ 的/ 运动/ 方向/ ,/ 以/ 节点/ A/ 为例/ ,/ 通过/ 连续/ 获取/ A/ 发出/ 的/ Hello/ 探测/ 数据包/ ,/ 获取/ A/ 在/ 两个/ 位置/ 的/ 坐标/ (/ xa/ ,/ ya/ )/ 及/ (/ xa/ ,/ ya/ )/ ,/ 计算/ 通过/ 比较/ dad/ 及/ dad/ 可以/ 判定/ 节点/ 是否/ 向/ 目的/ 节点/ d/ 移动/ ./ 图/ 2/ 源/ 节点/ 、/ 中间/ 节点/ 及/ 目的/ 节点/ 的/ 相对/ 位置/ 以/ 节点/ S/ 为例/ ,/ 当/ 节点/ S/ 遇到/ 节点/ A/ 时/ ,/ 首先/ 对/ 中心/ 性/ Cen/ 及/ 角度/ 进行/ 标准化/ :/ 则/ CDS/ 计算/ 如下/ :/ 簇间/ 转发/ 策略/ 为/ :/ 以/ 节点/ S/ ,/ A/ ,/ D/ 为例/ ,/ 当/ 节点/ S/ 遇到/ 节点/ A/ 时/ 通过/ 节点/ 之间/ 的/ 交换/ 信息/ ,/ 计算/ CDS/ 和/ CDA/ ,/ 当/ CDS/ </ CDA/ 且/ dAD/ / dAD/ 时/ ,/ 说明/ A/ 节点/ 正向/ 目的/ 节点/ D/ 移动/ 且/ A/ 节点/ 比/ S/ 接点/ CD/ 值/ 更/ 高/ ,/ 因此/ S/ 将/ 消息/ 转发/ 到/ 节点/ A/ ./ 转发/ 时/ 包含/ 两种/ 策略/ :/ 多/ 副本/ :/ 节点/ S/ 将/ 消息/ 转发/ 到/ A/ 节点/ 后/ 仍然/ 保留/ 消息/ 并/ 将/ 消息/ 转发/ 到/ 下/ 一个/ 遇到/ 的/ 中心/ 性高/ 的/ 节点/ ,/ 直到/ 消息/ 超时/ ;/ 单/ 副本/ :/ 节点/ S/ 将/ 消息/ 转发/ 到/ 节点/ A/ 后/ 删除/ 本地/ 缓存/ ;/ 本文/ 采用/ 簇间/ 采用/ 单/ 副本/ 策略/ ./ 2.3/ ./ 3/ 簇间/ 与/ 簇内/ 消息/ 的/ 交互/ 簇间/ 与/ 簇内/ 消息/ 的/ 交互/ 只有/ 在/ 两种/ 情况/ 下/ 发生/ :/ 节点/ 加入/ 或者/ 离开/ 簇/ ,/ 簇间/ 传输/ 的/ 消息/ 被/ 转发/ 到/ 簇内/ ./ 当/ 节点/ 加入/ 或者/ 离开/ 簇时/ ,/ 根据/ 节点/ 所在/ 的/ 簇/ 更新/ 节点/ 缓存/ 的/ 消息/ 模式/ :/ 簇内/ 或者/ 簇间/ ,/ 每次/ 节点/ 加入/ 或者/ 离开/ 簇时/ 都/ 会/ 更新/ ./ 当/ 在/ 簇间/ 传输/ 的/ 消息/ 被/ 转发/ 到/ 簇内时/ ,/ 需要/ 进行/ 两步/ 操作/ :/ 首先/ 将/ 该/ 消息/ 设置/ 为/ 簇内/ 消息/ ;/ 其次/ 根据/ 簇内/ 路由/ 算法/ 设定/ 节点/ 的/ 消息/ 副本/ 数/ ./ 3CS/ -/ DTN/ 路由/ 机制/ 的/ 设计/ 与/ 实现/ 本章/ 主要/ 介绍/ CS/ -/ DTN/ 路由/ 机制/ 在/ Qualnet/ 平台/ 下/ 的/ 设计/ 与/ 实现/ ./ 首先/ 介绍/ CS/ -/ DTN/ 协议/ 的/ 系统/ 架构/ 及/ 主要/ 的/ 工作/ 流程/ ,/ 接下来/ 对/ 实现/ CS/ -/ DTN/ 的/ 主要/ 函数/ 进行/ 了/ 介绍/ ./ 3.1/ CS/ -/ DTN/ 系统/ 架构/ 及/ 主要/ 流程图/ 3/ 所示/ 是/ CS/ -/ DTN/ 的/ 一个/ 应用/ 场景/ ,/ 节点/ S/ 需要/ 发送/ 消息/ 到/ 节点/ D/ ,/ 由于/ 不/ 存在/ 稳定/ 的/ 端/ 到/ 端/ 路径/ ,/ CS/ -/ DTN/ 需要/ 解决/ 的/ 问题/ 是/ 如何/ 选择/ 一条/ 能够/ 高效/ 到达/ 目的/ 节点/ D/ 的/ 路径/ ,/ 根据/ 前/ 一章/ 的/ 分析/ ,/ CS/ -/ DTN/ 的/ 系统/ 架构/ 如下/ :/ 对/ 节点/ S/ 与/ 节点/ D/ 之间/ 的/ 节点/ 根据/ 相遇/ 概率/ 进行/ 分簇/ ,/ 簇内/ 节点/ 采用/ 限制/ 副本/ 数量/ 的/ SprayandWait/ 算法/ ,/ 簇间/ 采用/ 基于/ 节点/ 活跃度/ 与/ 节点/ 运动/ 预测/ 相结合/ 的/ 算法/ ./ 通过/ 簇内/ 簇间/ 的/ 混合/ 路由/ 机制/ 来/ 实现/ 消息/ 的/ 高效/ 传输/ ./ Page6CS/ -/ DTN/ 的/ 工作/ 流程/ 主要/ 包含/ 两/ 部分/ :/ 接收/ 消息/ 的/ 处理/ 以及/ 消息/ 的/ 转发/ ./ 接收/ 消息/ 的/ 处理/ 根据/ 接收/ 消息/ 节点/ 的/ 不同/ 而/ 不同/ ,/ 可/ 分为/ 源/ 节点/ 、/ 中间/ 节点/ 及/ 目的/ 节点/ ./ 如图/ 4/ 所示/ ,/ 假设/ 节点/ i/ 接收/ 消息/ :/ 当/ i/ 为源/ 节点/ 时/ ,/ 首先/ 根据/ 自身/ 的/ 簇/ 成员/ 列表/ 判断/ 消息/ 的/ 目的/ 节点/ 是否/ 与/ i/ 位于/ 同一个/ 簇内/ ,/ 如果/ 位于/ 同一个/ 簇/ ,/ 则/ 标记/ 消息/ 为/ 簇内/ 消息/ ,/ 根据/ i/ 与/ 目的/ 节点/ 之间/ 的/ 相遇/ 概率/ 设定/ 消息/ 的/ 副本/ 数量/ ,/ 否则/ 标记/ 消息/ 为/ 簇间/ 消息/ ,/ 之后/ 将/ 消息/ 存入/ 缓存/ 等待/ 转发/ ./ 当/ i/ 为/ 中间/ 节点/ 时/ ,/ 如果/ 消息/ 属于/ 簇间/ 消息/ 且/ i/ 与/ 目的/ 节点/ 位于/ 同一个/ 簇内时/ ,/ 更新/ 消息/ 为/ 簇内/ 消息/ ,/ 根据/ i/ 与/ 目的/ 节点/ 之间/ 的/ 相遇/ 概率/ 设定/ 消息/ 的/ 副本/ 数量/ ,/ 之后/ 将/ 消息/ 存入/ 缓存/ ./ 对于/ 其它/ 情况/ ,/ 则/ 直接/ 将/ 消息/ 存入/ 缓存/ ./ 当/ i/ 为/ 目的/ 节点/ 时/ ,/ 直接/ 将/ 消息/ 向/ 上层/ 投递/ ./ 消息/ 的/ 转发/ 流程/ 如图/ 5/ 所示/ ,/ 当/ 节点/ i/ 与/ 节点/ j/ 相遇/ 时/ ,/ 二者/ 交换/ 节点/ 信息/ (/ 节点/ ID/ 、/ 簇/ ID/ 、/ 节点/ 相图/ 5/ 消息/ 转发/ 流程/ 遇/ 列表/ )/ ,/ 如果/ 节点/ i/ 与/ 节点/ j/ 位于/ 同一个/ 簇内/ ,/ 对于/ 任意/ 一条/ 簇内/ 消息/ m/ ,/ 如果/ ε/ id/ </ ε/ jd/ ,/ 则/ 节点/ i/ 将/ 消息/ 转发/ 到/ 节点/ j/ ;/ 如果/ 节点/ i/ 与/ 节点/ j/ 不/ 属于/ 同一个/ 簇/ ,/ 只有/ 当/ 节点/ j/ 满足/ 节点/ j/ 的/ CD/ 值较/ 高/ 、/ 节点/ j/ 属于/ 目的/ 节点/ 所在/ 的/ 簇/ 或者/ 节点/ j/ 为/ 目的/ 节点/ 时/ ,/ 节点/ i/ 将/ 簇间/ 消息/ 转发/ 到/ 节点/ j/ ./ 上述/ 只/ 讨论/ 了/ 节点/ i/ 将/ 消息/ 转发/ 到/ 节点/ j/ 的/ 情况/ ,/ 反之亦然/ ./ Page7/ (/ 2/ )/ 事件/ 调度/ 函数/ (/ 1/ )/ 协议/ 初始化/ 函数/ 3.2/ CS/ -/ DTN/ 实现/ 的/ 主要/ 函数/ CS/ -/ DTN/ 的/ 实现/ 基于/ Qualnet/ 仿真/ 平台/ ,/ 根据/ Qualnet/ 协议/ 栈/ ,/ 主要/ 包含/ 5/ 个/ 主体/ 函数/ :/ 协议/ 初始化/ 函数/ 、/ 事件/ 调度/ 函数/ 、/ 协议/ 包/ 处理函数/ 、/ 路由/ 函数/ 及/ 结束/ 函数/ ,/ 下文/ 将/ 对/ 这/ 5/ 个/ 函数/ 进行/ 简单/ 介绍/ ./ voidCSDTN/ _/ Init/ (/ Node/ / node/ ,/ CsdtnData/ / / csdtnPtr/ ,/ constNodeInput/ / nodeInput/ ,/ intinterfaceIndex/ ,/ NetworkRoutingProtocolTypecsdtnProtocolType/ )/ ./ 该/ 函数/ 来/ 初始化/ 协议/ ,/ 主要/ 任务/ 包括/ :/ 创建/ 一个/ 协议/ 的/ 数据结构/ 实例/ ;/ 从/ 配置文件/ 读取/ 并/ 存储用户/ 指定/ 的/ 参数/ ;/ 初始化/ 状态变量/ 、/ 缓冲区/ 和/ 统计/ 信息/ ;/ 登记/ CS/ -/ DTN/ 的/ 路由/ 函数/ CSDTN/ _/ RouterFunction/ ;/ 为/ 自身/ 设定/ 开始/ 协议/ 的/ 定时器/ ./ voidCSDTN/ _/ HandleProtocolEvent/ (/ Node/ / node/ ,/ Message/ / msg/ )/ ./ 协议/ 事件/ 调度/ 函数/ 根据/ 接收/ 消息/ 的/ 类型/ 调用/ 不同/ 类型/ 的/ 消息/ 处理函数/ ./ (/ 3/ )/ 协议/ 包/ 处理函数/ voidCSDTN/ _/ HandleProtocolPacket/ (/ Node/ / node/ ,/ Message/ / msg/ ,/ AddresssrcAddr/ ,/ AddressdestAddr/ ,/ intttl/ ,/ intinterfaceIndex/ )/ ./ 协议/ 事件/ 调度/ 函数/ 根据/ 接收/ 包/ 的/ 类型/ 调用/ 不同/ 类型/ 的/ 包/ 处理函数/ ./ 协议/ 包/ 类型/ 包括/ :/ CSDTN/ _/ DATA/ (/ 携带/ 数据/ )/ 、/ CSDTN/ _/ HELLO/ (/ 探测/ 邻居/ 节点/ ,/ 包含/ 节点/ ID/ 、/ 簇/ ID/ 、/ 节点/ 相遇/ 列表/ )/ 、/ CSDTN/ _/ REPLY/ (/ CSDTN/ _/ HELLO/ 包/ 的/ 反馈/ ,/ 包含/ 节点/ ID/ 、/ 簇/ ID/ 、/ 节点/ 相遇/ 列表/ )/ ./ (/ 4/ )/ 路由/ 函数/ voidCSDTN/ _/ RouterFunction/ (/ Node/ / node/ ,/ Message/ / msg/ ,/ AddressdestAddr/ ,/ AddresspreviousHopAddress/ ,/ BOOL/ / packetWasRouted/ )/ ./ 根据/ CS/ -/ DTN/ 路由/ 机制/ 实现/ ./ (/ 5/ )/ 结束/ 函数/ 函数/ 在/ 仿真/ 结束/ 时/ 被/ 调用/ ,/ 主要/ 任务/ 是/ 打印/ 统/ voidCSDTN/ _/ Finalize/ (/ Node/ / node/ ,/ inti/ )/ ./ 计/ 信息/ 到/ 统计/ 文件/ ,/ 清空/ 变量/ 和/ 缓存/ 信息/ ./ 4/ 性能/ 分析/ 4.1/ 仿真/ 环境/ 为了/ 评价/ CS/ -/ DTN/ 路由/ 协议/ 的/ 性能/ ,/ 本文/ 采用/ 基于/ 移动/ 模型/ [/ 9/ ]/ 的/ 场景/ 来/ 进行/ 仿真/ ./ 如图/ 6/ 所示/ ,/ 包含/ 6/ 个/ 场所/ (/ C/ ,/ H1/ -/ H5/ )/ ,/ 其中/ H1/ -/ H5/ 为/ 5/ 个/ 不同/ 的/ 群体/ 所在/ 的/ 场所/ ,/ C/ 作为/ 公共场所/ ./ 该/ 模型/ 指定/ 每个/ 节点/ (/ 假设/ 为/ 节点/ i/ )/ 都/ 有/ 一个/ 唯一/ 的/ 主/ H/ (/ 假设/ 为/ Hi/ )/ 并且/ 节点/ i/ 会/ 在/ Hi/ 花费/ 大部分/ 的/ 时间/ ,/ 为了/ 更加/ 符合/ 社会/ 网络/ 场景/ 的/ 特性/ ,/ 本文/ 设定/ 每个/ H/ 中/ 10/ %/ 的/ 节点/ 表现/ 活跃/ ,/ 相对/ 于/ 其它/ 节点/ ,/ 这些/ 节点/ 将/ 花费/ 更/ 多/ 的/ 时间/ 在/ 不同/ 的/ 场所/ 中/ 移动/ ,/ 负责/ 在/ 各个/ 场所/ 中/ 进行/ 信息/ 的/ 传递/ ./ 如图/ 7/ 所示/ ,/ 在/ 该/ 模型/ 中/ ,/ 假定/ 节点/ 离开/ H/ 之后/ 首先/ 进入/ C/ ./ 当/ 节点/ 待/ 在/ 主/ H/ 时/ ,/ 在/ 下/ 一个/ 时隙/ 待/ 在/ 主/ H/ 的/ 概率/ 为/ PH/ ,/ 离开/ 主/ H/ 的/ 概率/ 为/ 1/ -/ PH/ ;/ 当/ 节点/ 位于/ C/ 时/ ,/ 在/ 下/ 一个/ 时隙/ 有/ PH/ 的/ 概率/ 回到/ 主/ H/ ,/ 有/ PC/ 的/ 概率/ 待/ 在/ C/ ,/ 或者/ 1/ -/ PH/ -/ PC/ 的/ 概率/ 进入/ 其它/ H/ ;/ 最后/ ,/ 当/ 一个/ 节点/ 位于/ 非主/ H/ 的/ 其它/ H/ 时/ ,/ 在/ 下/ 一个/ 时隙/ 有/ 1/ -/ PH/ 的/ 概率/ 留在/ 原地/ ,/ 有/ PH/ 的/ 概率/ 进入/ C/ ./ 在/ 仿真/ 中/ 设定/ H/ 中非/ 活跃/ 节点/ (/ 90/ %/ )/ 的/ PH/ =/ 0.7/ ,/ PC/ =/ 0.1/ ;/ 活跃/ 节点/ (/ 10/ %/ )/ 的/ PH/ =/ 0.5/ ,/ PC/ =/ 0.1/ ./ 根据/ 马尔科夫/ 模型/ ,/ 设定/ 节点/ i/ 在/ H/ ,/ C/ 及/ Else/ 的/ 稳态/ 概率/ 为/ PiPiPi/ 以/ 校园/ 场景/ 为例/ ,/ 不同/ 班级/ 之间/ 的/ 交流/ 主要/ 是/ 依靠/ 班级/ 干部/ 进行/ 的/ ,/ 而/ 非/ 班级/ 干部/ 成员/ 与/ 其他/ 班级/ 的/ 联系/ 相对/ 要少/ 的/ 多/ ./ 因而/ ,/ 根据/ 式/ (/ 20/ )/ 修改/ 后/ 的/ 模型/ 存在/ 10/ %/ 的/ 节点/ Pi0/ ./ 078/ 的/ 概率/ 进入/ 其它/ H/ ,/ 相对/ 之前/ 所有/ 节点均/ 以/ 0.078/ 的/ 概率/ 进入/ 其它/ H/ 更能/ 体现/ 社会/ 网络/ 的/ Page8/ 特性/ ./ 点/ i/ 及/ 节点/ j/ )/ 同时/ 位于/ 主/ H/ 的/ 概率/ 为/ 另外/ ,/ 根据/ 式/ (/ 18/ )/ ,/ 可以/ 计算/ 任意/ 两个/ 节点/ (/ 节/ Pij/ =/ Pi/ 由于/ 位于/ 同一个/ 主/ H/ 的/ 节点/ 间/ 相遇/ 的/ 可能性/ 很大/ ,/ 可以/ 认为/ 0.416/ 接近/ 于/ 簇内/ 节点/ 的/ 相遇/ 概率/ ,/ 因此/ 设定/ 节点/ 的/ 分簇/ 阈值/ 为/ 0.4/ ./ 仿真/ 实验/ 将/ CS/ -/ DTN/ 与/ Prophet/ [/ 6/ ]/ ,/ Clustering/ [/ 9/ ]/ 路由/ 算法/ 以及/ 没有/ 考虑/ 节点/ 移动/ 方向/ 的/ CS/ -/ DTN/ (/ CS/ -/ DTNwithoutDirectionForwarding/ )/ 进行/ 比较/ ./ 仿真/ 参数/ 如表/ 2/ 所示/ ./ 4.2/ 仿真/ 结果/ 为了/ 全面/ 验证/ CS/ -/ DTN/ 算法/ ,/ 本文/ 使用/ 了/ 投递/ 成功率/ 及/ 平均/ 端到/ 端/ 延迟/ 两个/ 性能/ 评价/ 指标/ ./ 投递/ 成功率/ 是/ 指/ 目的/ 节点/ 成功/ 收到/ 的/ 消息/ 在/ 源/ 节点/ 发送/ 消息/ 中/ 所/ 占有/ 的/ 比例/ ;/ 平均/ 端到/ 端/ 延迟/ 是/ 指/ 消息/ 从源/ 节点/ 到/ 目的/ 节点/ 所/ 需/ 时间/ 的/ 平均值/ ./ 本文/ 分别/ 对/ 缓存/ 大小/ 的/ 变化/ 、/ 节点/ 数量/ 的/ 变化/ 及/ 数据/ 产生/ 速率/ 的/ 变化/ 对/ 协议/ 性能/ 的/ 影响/ 进行/ 了/ 仿真/ ./ 缓存/ 大小/ 变化/ (/ 20/ ~/ 200/ )/ 对/ 网络/ 性能/ 的/ 影响/ 如图/ 8/ 所示/ ./ 随着/ 缓存/ 大小/ 的/ 增加/ ,/ 由于/ 节点/ 缓存/ 已满/ 导致/ 消息/ 被/ 丢弃/ 的/ 概率/ 减少/ ,/ 从而/ 消息/ 的/ 成功/ 投递/ 图/ 8/ 协议/ 性能/ 随/ 缓存/ 大小/ 的/ 变化率/ 会/ 得到/ 提高/ ./ 同时/ ,/ 由于/ 消息/ 在/ 缓存/ 中/ 产生/ 更/ 多/ 的/ 排队/ 延迟/ ,/ 导致/ 消息/ 的/ 端/ 到/ 端/ 延迟/ 会/ 有所增加/ ./ 因此/ ,/ 随着/ 缓存/ 的/ 不断/ 增加/ ,/ 在/ 存活/ 时间/ 内/ 未能/ 到达/ 目的/ 节点/ 而/ 被/ 丢弃/ 的/ 消息/ 数量/ 增加/ ,/ 导致/ 消息/ 成功/ 投递/ 率/ 上升/ 的/ 趋势/ 减缓/ ./ 相对/ 于/ Clustering/ 和/ Prophet/ ,/ CS/ -/ DTN/ 在/ 缓存/ 足够/ 大/ 时会/ 取得/ 更/ 高/ 的/ 投递/ 率/ 和/ 更/ 小/ 的/ 端/ 到/ 端/ 延迟/ ./ 在/ 投递/ 率/ 方面/ ,/ 缓存/ 较/ 少时/ ,/ CS/ -/ DTN/ 的/ 消息/ 成功/ 投递/ 率较/ Clustering/ 低/ ,/ 这是/ 由于/ CS/ -/ DTN/ 的/ 簇间/ 转发/ 引起/ 的/ ,/ 消息/ 不断/ 地向/ 中心/ 性高/ 的/ 节点/ 累计/ ,/ 其/ 缓存/ 不足以/ 存放/ 接收/ 到/ 的/ 消息/ 而/ 导致/ 消息/ 被/ 丢弃/ ./ 当/ 缓存/ 增加/ 到/ 一定/ 程度/ 时/ ,/ 该/ 问题/ 得到/ 解决/ ,/ 消息/ 投递/ 率/ 超过/ Clustering/ ./ Prophet/ 主要/ 考虑/ 节点/ 与/ 目的/ 节点/ 之间/ 的/ 概率/ 而/ 未/ 结合/ 节点/ 的/ 运动/ 特性/ ,/ 因此/ 投递/ 率/ 相对/ 于/ Clustering/ 及/ CS/ -/ DTN/ 低/ ./ 同时/ 本文/ 也/ 对/ 未/ 考虑/ 节点/ 移动/ 方向/ 的/ CS/ -/ DTN/ 进行/ 了/ 分析/ ,/ 当/ 缓存/ 足够/ 大时/ ,/ 未/ 考虑/ 节点/ 移动/ 方向/ 的/ CS/ -/ DTN/ 与/ Clustering/ 接近/ ./ 在/ 延迟/ 方面/ ,/ Clustering/ 及/ CS/ -/ DTN/ 充分利用/ 了/ 节点/ 运动/ 的/ 特性/ ,/ 能够/ 使/ 消息/ 更快/ 的/ 到达/ 目的/ 节点/ ,/ 从而/ 消息/ 的/ 端/ 到/ 端/ 延迟/ 低于/ Prophet/ ./ 在/ Clustering/ 与/ CS/ -/ DTN/ 之间/ ,/ Clustering/ 对于/ 多/ 跳/ 簇间/ 之间/ 的/ 转发/ 需要/ 寻路/ 过程/ ,/ 而/ CS/ -/ DTN/ 利用/ 节点/ 的/ 中心/ 性/ 特性/ 及/ 节点/ 的/ 运动/ 特性/ 快速/ 地/ 将/ 消息/ 投递/ 到/ 目的/ 节点/ 所在/ 的/ 簇/ ,/ 因而/ CS/ -/ DTN/ 具有/ 更/ 低/ 的/ 端/ 到/ 端/ 延迟/ ./ 根据/ 消息/ 缓存/ 变化/ 对/ 性能/ 的/ 影响/ ,/ 可以/ 看出/ ,/ 缓存/ 到达/ 100/ 之后/ ,/ 消息/ 成功/ 投递/ 率/ 增速/ 减缓/ ,/ 因而/ 在/ 对/ 节点/ 的/ 数量/ 对/ 性能/ 影响/ 的/ 仿真/ 中/ 设定/ 节点/ 缓存/ 大小/ 为/ 100/ ,/ 消息/ 产生/ 速率/ 为/ 0.1/ ./ 如图/ 9/ 所示/ ,/ 随着/ 节点/ 数量/ 的/ 增加/ ,/ 节点/ 的/ 相遇/ 概率/ 会/ 逐渐/ 增大/ ,/ 数据传输/ 机会/ 增多/ ,/ 因而/ 消息/ 成功/ 投递/ 率会/ 得到/ 一定/ 的/ 提高/ ./ 根据/ 之前/ 的/ 分析/ ,/ 设定/ 消息/ 产生/ 速率/ 对/ 性能/ 影/ Page9/ 响/ 仿真/ 时/ 节点/ 缓存/ 大小/ 为/ 100/ ,/ 节点/ 数量/ 为/ 50/ ./ 从图/ 10/ 中/ 可以/ 看到/ 随着/ 消息/ 产生/ 速率/ 的/ 变化/ ,/ 消息/ 的/ 成功/ 投递/ 率/ 下降/ ,/ 相对/ 于/ Clustering/ 算法/ ,/ CS/ -/ DTN/ 消息/ 的/ 端/ 到/ 端/ 延迟/ 较/ 低/ ,/ 能/ 更/ 快/ 地/ 将/ 消息/ 投递/ ,/ 减少/ 缓存/ 的/ 压力/ ,/ 为/ 新/ 消息/ 提供/ 缓存/ ,/ 总体而言/ ,/ 消息/ 的/ 成功/ 投递/ 率要/ 高/ 但/ 相差/ 不大/ ./ 经过/ 以上/ 分析/ ,/ CS/ -/ DTN/ 在/ 消息/ 的/ 成功/ 投递/ 率及/ 端/ 到/ 端/ 延迟/ 上/ 都/ 取得/ 了/ 较/ 好/ 的/ 效果/ ,/ 同时/ 也/ 可以/ 看出/ 缓存/ 是/ CS/ -/ DTN/ 算法/ 的/ 一个/ 瓶颈/ ,/ 因而/ 如何/ 实现/ 簇间/ 节点/ 之间/ 的/ 负载/ 均衡/ ,/ 从而/ 更好/ 地/ 提高/ 协议/ 的/ 性能/ 是/ 本文/ 的/ 一个/ 后续/ 研究/ 问题/ ./ 5/ 总结/ 与/ 展望/ 延迟/ 容忍/ 网络/ 是/ 一种/ 缺乏/ 持续/ 连接/ 的/ 新型/ 网络体系结构/ ,/ 采用/ 存储/ -/ 携带/ -/ 转发/ 的/ 路由/ 方式/ 进行/ 消息/ 的/ 转发/ ./ 本文/ 充分利用/ 社会/ 网络/ 的/ 特点/ ,/ 提出/ 了/ 一个/ 新型/ 的/ 路由/ 算法/ CS/ -/ DTN/ :/ 预测/ 节点/ 间/ 的/ 相遇/ 概率/ 并/ 据此/ 对/ 节点/ 进行/ 分簇/ ,/ 充分利用/ 节点/ 的/ 运动/ 模式/ ,/ 将/ 节点/ 的/ 位置/ 、/ 运动/ 方向/ 与/ 节点/ 的/ 活跃/ 程度/ 结合/ 提出/ 新/ 的/ 簇间/ 转发/ 算法/ ,/ 仿真/ 结果表明/ CS/ -/ DTN/ 较为/ 明显/ 地/ 提升/ 了/ 消息/ 的/ 成功/ 投递/ 率/ 并/ 降低/ 了/ 消息/ 的/ 平均/ 端到/ 端/ 延迟/ ./ 同时/ ,/ 仿真/ 也/ 表明/ 利用/ 节点/ 的/ 中心/ 性/ 特点/ 容易/ 导致/ 部分/ 节点/ 的/ 缓存/ 瓶颈/ ,/ 从而/ 影响/ 协议/ 的/ 性能/ ,/ 因此/ 提出/ 适合/ CS/ -/ DTN/ 的/ 新/ 的/ 负载/ 均衡/ 策略/ 是/ 本文/ 的/ 一项/ 后续/ 工作/ ./ 

