Page1/ 基于/ 动态/ 半/ 马尔可夫/ 路径/ 搜索/ 模型/ 的/ DTN/ 分簇/ 路由/ 方法/ 王恩/ 1/ )/ 杨永健/ 1/ )/ 李/ 莅/ 2/ )/ 1/ )/ (/ 吉林大学/ 计算机科学/ 与/ 技术/ 学院/ 长春/ 130012/ )/ 2/ )/ (/ 吉林大学/ 软件/ 学院/ 长春/ 130012/ )/ 摘要/ 在/ 容迟/ 网络/ 环境/ 下/ ,/ 文中/ 提出/ 一种/ 基于/ 动态/ 半/ 马尔可夫/ 路径/ 搜索/ 模型/ 的/ 分簇/ 路由/ 方法/ CRSMP/ (/ ClusteringRoutingmethodbasedonSemi/ -/ MarkovprocessandPath/ -/ findingstrategy/ )/ ,/ 该/ 方法/ 既/ 考虑/ 了/ 节点/ 拥有/ 的/ 社会/ 属性/ 所/ 导致/ 的/ 分簇/ 问题/ ,/ 又/ 考虑/ 到/ 节点/ 间/ 未来/ 一段时间/ 内/ 的/ 最大/ 相遇/ 概率/ 以及/ 对应/ 的/ 相遇/ 时间/ ,/ 结合/ 分簇/ 结果/ 和/ 相遇/ 情况/ 生成/ 动态/ 路由表/ ,/ 完成/ 一种/ 单/ 副本/ 的/ 路由/ 方法/ ./ 该/ 方法/ 首先/ 依据/ 节点/ 间/ 路径/ 的/ 相似/ 程度/ 进行/ 分簇/ ,/ 然后/ 运用/ 半/ 马尔可夫/ 模型/ 预测/ 节点/ 间/ 未来/ 某一/ 时刻/ 的/ 相遇/ 概率/ ,/ 依据/ 源/ 节点/ 和/ 目的/ 节点/ 所在/ 的/ 分簇/ 确定/ 可以/ 应用/ 到/ 路由/ 中/ 的/ 节点/ 集合/ ,/ 最后/ 根据/ 路径/ 搜索/ 策略/ 找到/ 最优/ 路径/ ,/ 生成/ 与/ 当前/ 时刻/ 有关/ 的/ 动态/ 路由表/ ./ 仿真/ 结果表明/ CRSMP/ 在/ 缓存/ 较/ 小/ 的/ 情况/ 下/ 投递/ 成功率/ 远高于/ DirectDeliveryRouter/ 、/ FirstContactRouter/ 和/ SimBetRouter/ 三种/ 单/ 副本/ 路由/ 方式/ 以及/ SprayandWait/ 、/ Epidemic/ 和/ Prophet/ 三种/ 多/ 副本/ 路由/ 协议/ ./ 在/ 10M/ 缓存/ 下/ 的/ CRSMP/ 有着/ 与/ 500M/ 缓存/ 下/ 的/ Epidemic/ 相近/ 的/ 路由/ 性能/ ./ 进一步/ 在/ 真实/ 数据/ 集上/ 进行/ 测试/ ,/ 测试/ 结果表明/ CRSMP/ 算法/ 依然/ 有着/ 较/ 好/ 的/ 路由/ 性能/ ./ 关键词/ 容迟/ 网络/ ;/ 半/ 马尔可夫/ ;/ 分簇/ ;/ 动态/ 路由表/ ;/ 路径/ 相似/ 度/ ;/ 路径/ 搜索/ 1/ 引言/ 容迟/ 网络/ (/ Delay/ -/ TolerantNetwork/ ,/ DTN/ )/ [/ 1/ -/ 2/ ]/ 是/ 一种/ 由于/ 端到/ 端/ 缺乏/ 稳定/ 链路/ ,/ 导致/ 传输/ 时延/ 较/ 高/ ,/ 甚至/ 绝大部分/ 时间/ 处于/ 中断/ 状态/ 的/ 一类/ 网络/ 环境/ ,/ 其/ 早期/ 的/ 应用/ 场景/ 包括/ 星际/ 网络/ [/ 3/ -/ 4/ ]/ 、/ 战地/ 网络/ [/ 5/ ]/ 、/ 乡村/ 网络/ [/ 6/ ]/ 、/ 野生动物/ 监控/ 与/ 追踪/ 网络/ [/ 7/ ]/ 、/ PSN/ (/ PocketSwitchedNetwork/ )/ 网络/ [/ 8/ -/ 9/ ]/ 等/ ./ 2003/ 年/ FALL/ 在/ 国际/ 会议/ SIGCOMM03/ 上/ 提出/ 这一/ 概念/ ,/ 在此之后/ ,/ 如何/ 在/ 这种/ 拓扑/ 结构/ 剧烈/ 变化/ 的/ 网络/ 环境/ 下/ 寻求/ 高效/ 的/ 路由/ 方法/ 成为/ 该/ 领域/ 研究/ 的/ 热点问题/ ./ 近年来/ ,/ 随着/ 无线通信/ 技术/ 日趋/ 成熟/ ,/ 通信/ 设备/ 的/ 体积/ 不断/ 缩小/ ,/ 一些/ 人/ 携带/ 着/ 无线通信/ 设备/ 形成/ 了/ 基于/ 区域/ 的/ 无线网络/ 环境/ ,/ 在/ 这种/ 网络/ 环境/ 下/ ,/ 节点/ 的/ 移动/ 方式/ 主要/ 包括/ 区域/ 内/ 的/ 驻留/ 和/ 区域间/ 的/ 行走/ ,/ 节点/ 所在/ 的/ 区域/ 编号/ 代表/ 了/ 节点/ 所处/ 的/ 状态/ ,/ 节点/ 进入/ 到/ 下/ 一个/ 区域/ 代表/ 了/ 状态/ 的/ 改变/ ,/ 节点/ 状态/ 的/ 改变/ 并/ 不是/ 完全/ 随机/ 的/ ,/ 下/ 一个/ 状态/ 与/ 当前/ 状态/ 存在/ 着/ 某种/ 关系/ ,/ 而/ 校园/ 网络/ 正是/ 上述/ 网络/ 环境/ 的/ 典型/ 例子/ ./ 本文/ 的/ 研究/ 思路/ 来源于/ 以下/ 两个/ 现象/ :/ (/ 1/ )/ 大学校园/ 中/ 同学/ 和/ 老师/ 的/ 行为/ 并/ 不是/ 完全/ 随机/ 的/ ,/ 他们/ 每天/ 在/ 一些/ 区域/ (/ 寝室/ 、/ 食堂/ 等/ )/ 会/ 驻留/ 较长时间/ ./ (/ 2/ )/ 同学/ 和/ 老师/ 每天/ 有着/ 几乎/ 固定/ 的/ 行动/ 路线/ ,/ 比如/ 本科生/ 每天/ 大致/ 遵循/ “/ 寝室/ →/ 食堂/ →/ 教室/ →/ 食堂/ →/ 教室/ →/ 食堂/ →/ 寝室/ ”/ 的/ 运动/ 规律/ ./ 出现/ 以上/ 两个/ 现象/ 的/ 主要/ 原因/ 是/ 社会性/ 驱使/ 了/ 节点/ 的/ 运动/ 行为/ ,/ 致使/ 节点/ 的/ 运动/ 存在/ 周期性/ ,/ 在/ 这种/ 网络/ 环境/ 下/ 节点/ 间/ 的/ 通信/ 不是/ 单纯/ 地/ 依靠/ 随机/ 相遇/ 来/ 完成/ ,/ 而是/ 与/ 彼此/ 的/ 社会/ 行为/ 状态/ 产生/ 了/ 密不可分/ 的/ 联系/ ./ 校园/ 网络/ 中/ 往往/ 体现/ 出/ 经典/ 的/ “/ 小/ 世界/ ”/ 现象/ [/ 10/ ]/ ,/ 即/ 节点/ 间/ 可以/ 依据/ 其/ 社会/ 属性/ 通过/ 一跳/ 或/ 几/ 跳/ 与/ 其他/ 节点/ 产生/ 联系/ ,/ 社会/ 属性/ 相同/ 或者/ 相近/ 的/ 节点/ 间会/ 有/ 更/ 多/ 的/ 通信/ 机会/ ,/ 于是/ 挖掘出/ 网络/ 中有/ 相似/ 运动/ 规律/ 的/ 节点/ 簇/ 必然/ 会/ 对/ 该/ 网络/ 环境/ 下/ 的/ 路由/ 问题/ 带来/ 帮助/ ./ 传统/ 的/ DTN/ 路由/ 算法/ 按照/ 网络/ 中/ 的/ 消息/ 副本/ 数量/ 分为/ 单/ 拷贝/ 和/ 多/ 拷贝/ 两种/ 类型/ [/ 11/ ]/ ./ 单/ 拷贝/ 路由/ 方法/ 在/ 网络/ 中/ 只/ 保留/ 特定/ 消息/ 的/ 唯一/ 副本/ ,/ 这样/ 的/ 路由/ 方式/ 往往/ 由于/ 网络连接/ 中断/ 或者/ 路由/ 选择/ 策略/ 不/ 准确/ 而/ 导致/ 传输/ 成功率/ 不高/ ,/ 然而/ 单/ 副本/ 路由/ 方式/ 节省/ 网络/ 开销/ ,/ 能够/ 避免/ 拥塞/ 等/ 网络/ 问题/ ,/ 尤其/ 在/ 节点/ 数量/ 庞大/ 的/ 网络/ 环境/ 下/ ,/ 相对/ 多/ 副本/ 的/ 路由/ 协议/ ,/ 单/ 副本/ 路由/ 方式/ 较/ 好/ 应用/ ,/ 经典/ 的/ 路由/ 方法/ 包括/ DirectDelivery/ [/ 12/ ]/ 和/ FirstContactRouter/ ./ 多/ 拷贝/ 路由/ 方式/ 又/ 分为/ 基于/ 复制/ 和/ 基于/ 概率/ 两种/ [/ 13/ ]/ ,/ 基于/ 复制/ 的/ 路由/ 方法/ 主要/ 是/ 通过/ 增加/ 网络/ 中/ 的/ 副本/ 数量/ 来/ 提高/ 投递/ 成功率/ ,/ 但是/ 这种/ 路由/ 方法/ 消耗/ 资源/ 较大/ ,/ 并且/ 极易/ 发生/ 网络/ 拥塞/ 等/ 问题/ ,/ 经典/ 的/ 路由/ 方法/ 包括/ SprayandWait/ [/ 14/ ]/ 和/ Epidemic/ [/ 15/ ]/ ./ 基于/ 概率/ 的/ 路由/ 方法/ [/ 16/ ]/ 主要/ 是/ 考虑/ 节点/ 间/ 的/ 上下文/ 信息/ ,/ 依据/ 以往/ 统计/ 的/ 历史/ 信息/ 来/ 预测/ 未来/ 节点/ 的/ 行为/ 方式/ 以及/ 节点/ 间/ 的/ 相遇/ 情况/ ,/ 进而/ 服务/ 于/ 路由/ 决策/ ./ 基于/ 概率/ 的/ 路由/ 方法/ 有/ Prophet/ [/ 17/ ]/ 和/ MV/ [/ 18/ ]/ ,/ Prophet/ 利用/ 节点/ 间/ 相遇/ 的/ 历史/ 信息/ 和/ 传递性/ 来/ 决定/ 下/ 一/ 跳/ 的/ 选择/ ,/ 将/ 报文/ 复制/ 给/ 传输/ 可预测性/ 更/ 高/ 的/ 节点/ ./ MV/ 算法/ 则/ 利用/ 节点/ 间/ 的/ 相遇/ 概率/ 来/ 描述/ 报文/ 传输/ 成功/ 的/ 概率/ ,/ 节点/ 仅/ 向/ 传输/ 概率/ 更/ 高/ 的/ 节点/ 复制/ 报文/ ./ 基于/ 概率/ 的/ 路由/ 方法/ 不同于/ Epidemic/ 路由/ 策略/ ,/ 它/ 并非/ 向/ 所有/ 相遇/ 的/ 节点/ 复制/ 报文/ ,/ 而是/ 有/ 选择性/ 地/ 进行/ 复制/ ,/ 但/ 由于/ 基于/ 概率/ 的/ 路由/ 方法/ 依然/ 通过/ 复制/ 的/ 方式/ 进行/ 报文/ 感染/ ,/ 因此/ 属于/ 多/ 副本/ 路由/ 策略/ ./ 随着/ 容迟/ 网络/ 中路/ 由/ 技术/ 的/ 不断/ 成熟/ ,/ 研究/ 人员/ 开始/ 关注/ 于/ 节点/ 间/ 的/ 相互/ 关系/ 、/ 彼此/ 社会/ 属性/ 的/ 相似/ 程度/ 等/ 因素/ ./ 文献/ [/ 19/ ]/ 中/ 基于/ “/ 小/ 世界/ ”/ 理论/ ,/ 提出/ 了/ 一种/ 以/ 相似性/ (/ Sim/ )/ 与/ 中介/ 中心/ 性/ (/ Bet/ )/ 相结合/ 的/ SimBet/ 单/ 副本/ 路由/ 方法/ ,/ 该/ 方法/ 用/ 节点/ 间/ 的/ 共有/ 邻居/ 数/ 代表/ 彼此/ 的/ 相似性/ ,/ 将/ 自身/ 对/ 其他/ 节点/ 间连接/ 的/ 帮助/ 程度/ 定义/ 为/ 自己/ 的/ 中介/ 中心/ 性/ ,/ 既/ 考虑/ 了/ 节点/ 社会/ 属性/ 的/ 影响/ ,/ 又/ 考虑/ 到/ 以往/ 的/ 连接/ 情况/ ,/ 路由/ 性能/ 较/ 好/ ./ Li/ 等/ 人/ 在/ 文献/ [/ 20/ ]/ 中/ 提出/ 了/ 一种/ 考虑/ 节点/ 社会/ 自私/ 性/ 的/ 容迟/ 网络/ 路由/ 算法/ SSAR/ ,/ 该/ 方法/ 综合/ 考虑/ 节点/ 间/ 的/ 传输/ 意愿/ 以及/ 相遇/ 可能性/ ,/ Page3/ 运用/ 机器/ 学习/ 方法/ 衡量/ 节点/ 的/ 传输/ 能力/ ,/ 在/ 节点/ 保持/ 自私/ 性/ 的/ 情况/ 下/ 依然/ 能/ 有/ 很/ 好/ 的/ 路由/ 性能/ ./ 文献/ [/ 21/ ]/ 中/ ,/ 通过/ 将/ 移动/ 规律/ 相近/ 的/ 节点/ 聚合/ 成/ 最近/ 社交圈/ ,/ 提出/ 了/ 一种/ 分为/ 簇外/ 喷射/ 、/ 簇间/ 转发/ 和/ 簇内/ 传染/ 三个/ 阶段/ 的/ 社交/ 时延/ 网络/ 路由/ 协议/ ./ Abdelkade/ 等/ 人/ 在/ 文献/ [/ 22/ ]/ 中/ 提出/ 了/ 一种/ DTN/ 环境/ 下/ 的/ 基于/ 社交/ 分组/ 的/ 路由/ 算法/ SGBR/ ,/ 该/ 方法/ 通过/ 利用/ 节点/ 所在/ 的/ 社会群体/ 来/ 减少/ 报文/ 的/ 冗余/ 复制/ ,/ 进而/ 提高/ 路由/ 性能/ ./ 在/ 文献/ [/ 23/ ]/ 中/ 周瑞涛/ 、/ 曹元大/ 等/ 人/ 通过/ 对/ 网络/ 节点/ 历史/ 运动/ 轨迹/ 点聚类/ 建立/ 其/ 热点/ 活动/ 区域/ ,/ 把/ 热点/ 区域/ 重叠/ 度/ 较/ 高/ 的/ 节点/ 归为/ 同一/ 社区/ ,/ 在/ 源/ 节点/ 和/ 目的/ 节点/ 的/ 社区/ 中以/ 洪泛/ 的/ 方式/ 加快/ 消息/ 的/ 扩散/ 和/ 传递/ 速度/ ,/ 针对/ 不同/ 社区/ 准确/ 地/ 选择/ 中继/ 节点/ ./ 文献/ [/ 24/ ]/ 中/ 讨论/ 了/ 容迟/ 网络/ 的/ 路由/ 算法/ 向/ 社交/ 网络/ 接近/ 的/ 必然趋势/ ,/ 提出/ 了/ 依据/ 网络拓扑/ 图对/ 路由/ 协议/ 进行/ 分类/ 的/ 想法/ ./ 文献/ [/ 25/ ]/ 中于/ 海征/ 等/ 人/ 利用/ 社会/ 网络/ 中/ 节点/ 间/ 的/ 权值/ 计算方法/ ,/ 计算/ 出/ 团队/ 间/ 的/ 关系/ 强度/ 矩阵/ ,/ 消息/ 源/ 节点/ 的/ 团队/ 依据/ 关系/ 强度/ 矩阵/ 选择/ 合适/ 的/ 节点/ 作为/ 中继/ 向/ 目的/ 节点/ 传递/ 消息/ ,/ 考虑/ 到/ 了/ 自私/ 节点/ 对/ 传递/ 的/ 影响/ ,/ 进而/ 提出/ 了/ 基于/ 社会/ 网络/ 的/ 可靠/ 路由/ 方法/ ./ 文献/ [/ 26/ ]/ 中/ 张振京/ 等/ 人/ 提出/ 了/ 一种/ 新型/ 的/ 混合/ 路由/ 算法/ CS/ -/ DTN/ ,/ 基于/ 节点/ 间/ 相遇/ 概率/ 的/ 预测值/ 进行/ 分簇/ ,/ 簇内/ 依据/ 二分/ 喷射/ 的/ 方式/ 寻找/ 中继/ 节点/ ,/ 簇间/ 依据/ 节点/ 的/ 运动/ 情况/ 进行/ 预测/ ,/ 通过/ 更/ 接近/ 目的/ 节点/ 的/ 中继/ 节点/ 路由/ 报文/ ./ 综上所述/ ,/ 容迟/ 网络/ 中/ 现有/ 的/ 路由/ 方法/ 或者/ 关注/ 依据/ 社会/ 属性/ 的/ 节点/ 分簇/ 问题/ ,/ 或者/ 关注/ 于/ 节点/ 间/ 相遇/ 可能性/ 问题/ ,/ 或者/ 关注/ 于/ 节点/ 下/ 一/ 跳/ 的/ 转发/ 选择/ 问题/ ./ 本文/ 认为/ 已有/ 的/ 路由/ 方法/ 存在/ 如下/ 缺陷/ :/ (/ 1/ )/ 已有/ 的/ 分簇/ 方法/ 所/ 依据/ 的/ 分簇/ 条件/ (/ 节点/ 间/ 相遇/ 次数/ 、/ 通信/ 时/ 长/ )/ 变动/ 较大/ ,/ 导致/ 簇/ 成员/ 变化/ 频繁/ ,/ 维护/ 分簇/ 的/ 开销/ 较/ 高/ ;/ (/ 2/ )/ 只能/ 预测出/ 未来/ 节点/ 间/ 的/ 相遇/ 可能性/ ,/ 而/ 不能/ 确定/ 未来/ 某一/ 时刻/ 节点/ 间/ 的/ 相遇/ 概率/ ,/ 这样/ 就/ 无法/ 判断/ 节点/ 间/ 最/ 有/ 可能/ 在/ 哪/ 一/ 时刻/ 发生/ 相遇/ ,/ 导致/ 对/ 未来/ 相遇/ 的/ 估计/ 不够/ 准确/ ;/ (/ 3/ )/ 节点/ 的/ 路由/ 只能/ 决定/ 下/ 一/ 跳/ 的/ 选择/ ,/ 而/ 不能/ 指导/ 多/ 跳/ 路由/ ./ 本文/ 的/ 主要/ 贡献/ 是/ :/ (/ 1/ )/ 校园/ 网络/ 中人/ 的/ 身份/ 一般/ 不会/ 变化/ ,/ 人/ 的/ 社会/ 角色/ 决定/ 了/ 其/ 每天/ 运动/ 路径/ 相对/ 固定/ ,/ 因此/ 提出/ 了/ 基于/ 节点/ 间/ 路径/ 相似/ 度/ 进行/ 分簇/ 的/ 方法/ ,/ 克服/ 了/ 以往/ 分簇/ 频繁/ 变化/ ,/ 维护/ 开销/ 大/ 的/ 问题/ ;/ (/ 2/ )/ 借鉴/ Yuan/ 等/ 人/ [/ 27/ ]/ 描述/ 的/ 节点/ 移动/ 模型/ ,/ 在/ 其/ 基础/ 上/ 进行/ 改进/ ,/ 运用/ 半/ 马尔可夫/ 模型/ 预测出/ 节点/ 间/ 未来/ 任意/ 时刻/ 的/ 相遇/ 概率/ ,/ 进而/ 估计/ 出/ 节点/ 间/ 最/ 有/ 可能/ 发生/ 相遇/ 的/ 时间/ 点/ ,/ 这样/ 更/ 有利于/ 报文/ 的/ 路由/ 决策/ ./ 例如/ ,/ 以往/ 的/ 路由/ 策略/ 只能/ 确定/ 两个/ 节点/ 间/ 未来/ 的/ 相遇/ 概率/ 为/ 0.8/ ,/ 而/ 这样/ 的/ 相遇/ 可能/ 发生/ 在/ 很/ 久/ 以后/ ,/ 依据/ 这个/ 概率/ 值/ 进行/ 路由/ 会/ 带来/ 很大/ 的/ 网络/ 时延/ ,/ 而/ 本文/ 提出/ 的/ 半/ 马尔可夫/ 预测/ 模型/ 很/ 好/ 地/ 避免/ 了/ 这个/ 问题/ ;/ (/ 3/ )/ 克服/ 了/ 一些/ 路由/ 算法/ 只能/ 指导/ 一跳/ 的/ 局限性/ ,/ 运用/ 搜索/ 策略/ 找到/ 一条/ 到/ 目的/ 节点/ 的/ 投递/ 路径/ ,/ 生成/ 与/ 时间/ 相关/ 的/ 动态/ 路由表/ ,/ 尽量/ 多/ 跳/ 地/ 指导/ 报文/ 的/ 投递/ 行为/ ./ 实验/ 结果表明/ 本文/ 提出/ 的/ 基于/ 动态/ 半/ 马尔可夫/ 路径/ 搜索/ 模型/ 的/ DTN/ 分簇/ 路由/ 方法/ CRSMP/ (/ ClusteringRoutingmethodbasedonSemi/ -/ MarkovprocessandPath/ -/ findingstrategy/ )/ 显著/ 提高/ 了/ 投递/ 成功率/ ,/ 并且/ 在/ 一定/ 程度/ 上/ 降低/ 了/ 网络/ 平均/ 时延/ 和/ 负载/ 比率/ ./ 2/ 分簇/ 方法/ 2.1/ 节点/ 运动/ 轨迹/ 模型/ 本文/ 在/ 仿真/ 实验/ 中/ 模拟/ 了/ 校园/ 的/ 10/ 个/ 区域/ ,/ 分别/ 为/ 寝室/ 、/ 食堂/ 、/ 计算机/ 学院/ 、/ 数学/ 学院/ 、/ 自习室/ 1/ 、/ 自习室/ 2/ 、/ 图书馆/ 、/ 校外/ 、/ 体育馆/ 、/ 银行/ ,/ 并/ 在/ 图/ 1/ 中用/ 曲线/ 围成/ 的/ 封闭/ 区域/ 表示/ ,/ 编号/ 依次/ 为/ 0/ ~/ 9/ ,/ 区域/ 内/ 的/ 黑色/ 实心/ 圆圈/ 表示/ 运动/ 的/ 人群/ ,/ 箭头/ 表示/ 人/ 行走/ 的/ 方向/ ./ 本文/ 同时/ 在/ 图/ 1/ 的/ 基础/ 上/ 设计/ 了/ 一种/ 尽量/ 模拟/ 校园/ 中学生/ 和/ 老师/ 行为/ 的/ 运动/ 模型/ ,/ 该/ 运动/ 模型/ 的/ 具体/ 定义/ 如下/ :/ 每个/ 节点/ 从图/ 1/ 的/ 一个/ 区域/ 内/ 诞生/ ,/ 诞生/ 时/ 节点/ 就/ 携带/ 了/ 自己/ 的/ 路径/ 信息/ (/ 区域/ 编号/ 序列/ )/ ,/ 在/ 诞生/ 区域/ 内/ 随机/ 选择/ 一个/ 目的地/ ,/ 通过/ 最短/ 路径/ 行走/ 模型/ 移动/ 到/ 该/ 地点/ ,/ 然后/ 随机/ 选择/ 下/ 一个/ 目的地/ ,/ 重复/ n/ 次/ 这样/ 的/ 行为/ ,/ n/ 的/ 取值/ 取决于/ 区域/ 编号/ ./ 当/ n/ 次/ 选择/ 之后/ ,/ 节点/ 选择/ 向/ 区域/ 编号/ 序列/ 中/ 的/ 下/ 一个/ 区域/ 行走/ ,/ 到达/ 下/ 一个/ 区域/ 后/ 同样/ 依据/ 该/ 区域/ 的/ n/ 值来/ 重复/ 区域/ 内/ 的/ 行为/ ,/ 当/ 这个/ 节点/ 走/ 完/ 所有/ 指定/ 路径/ 上/ 的/ 区域/ 时/ ,/ 回到/ 诞生地/ 循环/ 该/ 运动/ 模型/ ./ 在/ 每个/ 区域/ 内/ 对应/ 的/ n/ 值/ 参见/ 实验/ 部分/ 的/ 表/ 1/ ./ 这种/ 运动/ 模型/ 主要/ 仿真/ 校园/ 中学生/ 和/ 老师/ 的/ 两个/ 行为习惯/ :/ (/ 1/ )/ 校园/ 中学生/ 和/ 老师/ 每天/ 运动/ 的/ 路径/ 都/ 很/ 有/ 规律/ ,/ 并且/ 若/ 无/ 特殊/ 事件/ 就/ 不会/ 更改/ 这种/ 运动/ 行为/ ;/ (/ 2/ )/ 老师/ 和/ 学生/ 到达/ 每个/ 区域/ 后/ 都/ 会/ 停留/ 一段时间/ ,/ 而/ 往往/ 具有/ 同/ 一种/ 社会/ 属性/ 的/ 人群/ 在/ 相同/ 的/ 区域/ 内/ 停留/ 的/ 时间/ 也/ 相差/ 不大/ ./ 因此/ 本文/ 设计/ 的/ 运动/ 模型/ 比较/ 符合/ 真实/ 的/ 校园/ 行为/ ./ Page42/ ./ 2/ 节点/ 间/ 路径/ 相似/ 度/ 的/ 计算/ 模型/ 定义/ 1/ ./ 节点/ 间/ 路径/ 相似/ 度/ ./ G/ =/ (/ V/ ,/ E/ )/ 为/ 网络拓扑/ 图/ ,/ 其中/ V/ 为/ 网络/ 中/ 的/ 节点/ 集合/ ,/ E/ 为/ 定义/ 在/ G/ 上/ 的/ 边集/ ./ 节点/ a/ 和/ b/ 间/ 的/ 路径/ 相似/ 度/ 定义/ 为边/ 的/ 权值/ 大小/ ,/ 记为/ W/ (/ ea/ ,/ b/ )/ ,/ W/ (/ ea/ ,/ b/ )/ 的/ 计算/ 见/ 定义/ 3/ ,/ 其中/ 节点/ a/ ,/ b/ ∈/ V/ ,/ ea/ ,/ b/ ∈/ E/ 表示/ 节点/ a/ 和/ b/ 之间/ 的/ 边/ ./ 在/ 定义/ 1/ 中/ 计算/ 节点/ 间/ 的/ 边/ 权值/ 时/ 需要/ 每个/ 节点/ 知道/ 网络/ 中/ 其他/ 节点/ 的/ 运动/ 轨迹/ 信息/ ,/ 本文/ 在/ 热启动/ 阶段/ 用/ 如下/ 方法/ 统计/ 轨迹/ 信息/ :/ 每个/ 节点/ 本地/ 顺序/ 保存/ N/ 个/ 链表/ ,/ 其中/ N/ 为/ 网络/ 中/ 的/ 节点/ 总数/ ,/ 每个/ 链表/ 的/ 长度/ 不/ 固定/ ,/ 第/ i/ 行/ 链表/ 对应/ 的/ 是/ i/ 号/ 节点/ 的/ 运动/ 轨迹/ ,/ 节点/ 本地/ 链表/ 的/ 更新/ 包括/ 两个/ 部分/ :/ (/ 1/ )/ 当/ i/ 号/ 节点/ 进入/ 地图/ 中/ 设置/ 的/ 一个/ 编号/ 为/ n/ 的/ 可/ 通信/ 区域/ 内时/ ,/ 则/ 将/ n/ 加入/ 到/ 第/ i/ 行/ 链表/ 的/ 末尾/ ./ (/ 2/ )/ 当/ 两个/ 节点/ 在/ 通信/ 区域/ 内/ 相遇/ 时/ ,/ 执行/ 如下/ 更新/ 规则/ :/ 依次/ 比较/ 彼此/ 的/ N/ 行/ 链表/ ,/ 用/ 较/ 长/ 的/ 链表/ 更新/ 较/ 短/ 的/ 链表/ ,/ 没有/ 表项/ 的/ 链表/ 的/ 长度/ 定义/ 为/ 0/ ./ 通过/ 以上/ 方法/ ,/ 经过/ 一定量/ 的/ 模拟/ 时间/ ,/ 整个/ 网络/ 中/ 的/ 每个/ 节点/ 本地/ 保存/ 的/ N/ 个/ 链表/ 能/ 反映/ 网络/ 中/ 所有/ 节点/ 这/ 段时间/ 内/ 的/ 运动/ 轨迹/ 信息/ ,/ 其中/ 每个/ 节点/ 的/ 第/ i/ 行/ 链表/ 存储/ 第/ i/ 号/ 节点/ 的/ 移动/ 路径/ ./ 定义/ 2/ ./ 最长/ 公共/ 子/ 序列/ ./ 字符串/ A/ 和/ B/ 的/ 最长/ 公共/ 子/ 序列/ L/ 满足/ :/ 对于/ A/ 和/ B/ 的/ 任意/ 公共/ 子/ 序列/ K/ ,/ 都/ 有/ K/ / L/ ,/ 其中/ 字符串/ A/ 和/ B/ 分别/ 为/ 节点/ a/ 和/ b/ 的/ 运动/ 轨迹/ ./ 在/ 定义/ 2/ 中/ ,/ 例如/ A/ =/ “/ 1327468315/ ”/ ,/ B/ =/ “/ 1275478312/ ”/ ,/ 如图/ 2/ 所示/ ,/ 最长/ 公共/ 子/ 序列/ L/ =/ “/ 1274831/ ”/ ./ 从图/ 2/ 中/ 分析/ 得出/ 公共/ 子/ 序列/ 都/ 是/ 严格/ 有序/ 的/ ,/ 但是/ 最长/ 公共/ 子/ 序列/ 未必/ 唯一/ ,/ 两个/ 字符串/ 可以/ 有/ 多个/ 长度/ 相同/ 的/ 最长/ 公共/ 子/ 序列/ ./ 文中/ 采用/ LCS/ (/ 算法/ 1/ )/ [/ 28/ ]/ 来/ 计算/ 最长/ 公共/ 子/ 序列/ 的/ 长度/ ,/ 进而/ 计算/ 路径/ 的/ 相似/ 程度/ ./ 算法/ 1/ ./ LCS/ ./ intLENGH/ _/ LCS/ (/ char/ / A/ ,/ char/ / B/ )/ {/ intC/ [/ P/ ,/ Q/ ]/ ;/ FOR/ (/ i/ =/ P/ ;/ i/ >/ =/ 0/ ;/ i/ -/ -/ )/ {/ IF/ (/ A/ [/ i/ ]/ =/ =/ ‘/ \/ 0/ ’/ B/ [/ j/ ]/ =/ =/ ‘/ \/ 0/ ’/ )/ C/ [/ i/ ,/ j/ ]/ =/ 0/ ;/ }/ RETURNC/ [/ 0/ ,/ 0/ ]/ ;/ }/ LCS/ 算法/ 的/ 时间/ 复杂度/ 为/ O/ (/ PQ/ )/ ,/ 其中/ P/ 为/ 字符串/ A/ 的/ 长度/ ,/ Q/ 为/ 字符串/ B/ 的/ 长度/ ./ 在/ 计算/ 数组/ C/ [/ i/ ,/ j/ ]/ 时/ ,/ 只用/ 到/ 数组/ C/ 的/ 第/ i/ 行/ 和/ 第/ i/ +/ 1/ 行/ ./ 因此/ ,/ 只要/ 用/ 两行/ 的/ 数组/ 空间/ 就/ 可以/ 计算/ 出/ 最长/ 公共/ 子/ 序列/ 的/ 长度/ ./ 进一步/ 分析/ 可/ 将/ 空间/ 需求/ 减至/ min/ (/ P/ ,/ Q/ )/ ./ 该/ 算法/ 采用/ 动态/ 规划/ 的/ 思想/ ,/ 自/ 底向上/ 递归/ 求解/ 最优/ 值/ ,/ 即/ 最长/ 公共/ 子/ 序列/ 长度/ ./ 用/ 初值/ 为/ 0/ 的/ C/ [/ P/ ,/ Q/ ]/ 数组/ 记录/ 整个/ 计算/ 过程/ 中/ 的/ 最优/ 值/ 矩阵/ ./ 当/ P/ =/ 0/ 或/ Q/ =/ 0/ 时/ ,/ 空/ 序列/ 是/ A/ 和/ B/ 的/ 最长/ 公共/ 子/ 序列/ ,/ 故/ C/ [/ P/ ,/ Q/ ]/ =/ 0/ ./ 经/ LCS/ 算法/ 得到/ 的/ 二维/ 数组/ 中/ 左上角/ 的/ C/ [/ 0/ ,/ 0/ ]/ 即/ 为/ 最长/ 公共/ 子/ 序列/ 的/ 长度/ ./ 例如/ ,/ A/ =/ “/ 1327468315/ ”/ ,/ B/ =/ “/ 1275478312/ ”/ 时/ ,/ 经/ LCS/ 计算/ 得到/ 的/ 二维/ 数组/ 如图/ 3/ ,/ C/ [/ 0/ ,/ 0/ ]/ =/ 7/ ,/ 即/ A/ 和/ B/ 的/ 最长/ 公共/ 序列/ 的/ 长度/ 为/ 7/ ./ Page5/ 定义/ 3/ ./ 字符串/ 相似/ 度/ ./ 字符串/ A/ 和/ B/ 的/ 相似/ 度/ W/ 定义/ 为/ W/ =/ 2L/ 求得/ 的/ 最长/ 公共/ 子/ 序列/ 的/ 长度/ ,/ P/ 和/ Q/ 分别/ 为/ A/ 和/ B/ 的/ 字符串/ 长度/ ./ 2.3/ 基于/ 节点/ 间/ 路径/ 相似/ 度/ 的/ 分簇/ 模型/ 定义/ 4/ ./ 集合/ 间/ 的/ 路径/ 相似/ 度/ ./ g1/ / V/ ,/ g2/ / V/ 为/ 网络/ 中/ 节点/ 集合/ V/ 的/ 两个/ 子集/ ,/ g1/ ∩/ g2/ =/ / ,/ 集合/ 间/ 的/ 路径/ 相似/ 度/ W/ (/ g1/ ,/ g2/ )/ 定义/ 为/ W/ (/ g1/ ,/ g2/ )/ =/ 2/ ∑/ eab/ ∈/ E/ (/ U/ )/ W/ (/ eab/ )/ n/ (/ n/ -/ 1/ )/ ,/ 其中/ U/ =/ g1/ ∪/ g2/ ,/ |/ U/ |/ =/ n/ ,/ E/ (/ U/ )/ =/ {/ eab/ |/ a/ ∈/ U/ ,/ b/ ∈/ U/ }/ 表示/ U/ 中/ 的/ 所有/ 边集/ ./ 定义/ 5/ ./ 网络/ 平均/ 路径/ 相似/ 度/ ./ 网络/ 平均/ 路径/ 相似/ 度/ W/ (/ V/ )/ 定义/ 为/ W/ (/ V/ )/ =/ 基于/ 节点/ 间/ 路径/ 相似/ 度/ 的/ 分簇/ 模型/ 首先/ 对/ 整个/ 网络/ 的/ 带权/ 拓扑图/ (/ 图/ 4/ )/ 依据/ 边/ 的/ 权值/ (/ 路径/ 相似/ 度/ )/ 进行/ 算法/ 2/ 的/ 变换/ ,/ 生成/ 一棵/ 与/ 拓扑图/ 相对/ 应/ 的/ 树结构/ (/ 图/ 5/ )/ ,/ 这棵/ 树结构/ 的/ 所有/ 非/ 叶子/ 节点/ 都/ 是/ 集合/ ,/ 这些/ 集合/ 代表/ 了/ 找到/ 的/ 具有/ 较/ 高/ 路径/ 相似/ 度/ 的/ 节点/ 簇/ ./ 算法/ 2/ ./ 分簇/ 方法/ [/ 29/ ]/ ./ 1/ ./ 建立/ 初始/ 的/ 节点/ 分簇/ Vk/ =/ {/ gi/ |/ i/ =/ 1/ ,/ 2/ ,/ 3/ ,/ …/ ,/ n/ }/ ,/ gi/ 为/ 单个/ 节点/ 构成/ 的/ 集合/ 分簇/ ,/ gi/ =/ {/ vi/ |/ vi/ ∈/ Vk/ }/ ./ 将/ 所有/ 单个/ 节点/ 的/ 集合/ gi/ 的/ 路径/ 相似/ 度/ Wi/ 设置/ 为/ 整个/ 网络/ 中/ 所有/ 边/ 的/ 均权/ 值/ W/ (/ V/ )/ ,/ 遍历/ 所有/ 边/ 集合/ ,/ 寻找/ 集合/ 间/ 路径/ 相似/ 度/ 最大/ 的/ W/ (/ gm/ ,/ gn/ )/ ,/ 从/ gm/ 和/ gn/ 中/ 随机/ 选择/ 一个/ 成为/ 算法/ 开始/ 的/ 集合/ gk/ ./ 2/ ./ 如果/ |/ Vk/ |/ >/ 1/ 跳转/ 到步/ 3/ ,/ 否则/ 转到/ 步/ 10.3/ ./ 遍历/ Vk/ ,/ 如果/ 对于/ Vk/ 中/ 任意/ 两个/ 集合/ 间/ 的/ 路径/ 相似/ 度/ W/ (/ gi/ ,/ gj/ )/ 均/ 小于/ W/ (/ V/ )/ 则/ 跳转/ 到步/ 9/ ,/ 否则/ 根据/ 定义/ 4/ 寻找/ 使/ W/ (/ gk/ ,/ gi/ )/ 最大/ 的/ gi/ ./ 4/ ./ 如果/ W/ (/ gk/ ,/ gi/ )/ / W/ (/ Vk/ )/ 跳转/ 到步/ 5/ ,/ 否则/ 跳转/ 到步/ 6.5/ ./ 将/ gi/ 与/ gk/ 和/ 并/ 为/ gik/ ,/ 将/ gik/ 的/ 路径/ 相似/ 度设/ 为/ W/ (/ gk/ ,/ gi/ )/ ,/ 更新/ 分簇/ Vk/ =/ Vk/ ∪/ gik/ \/ {/ gi/ ,/ gk/ }/ ./ 跳转/ 到步/ 7.6/ ./ 在/ Vk/ \/ gk/ 的/ 分簇/ 中/ ,/ 挑选/ 路径/ 相似/ 度/ 最大/ 的/ 集合/ gi/ 成为/ gk/ ,/ 如果/ Vk/ 中/ 路径/ 相似/ 度/ 最大/ 的/ 集合/ 不止/ 一个/ ,/ 则/ 从/ 这些/ 集合/ 中/ 随机/ 选择/ 一个/ 成为/ gk/ ,/ 跳到/ 步/ 2.7/ ./ 将/ 通过/ 步/ 5/ 得到/ 的/ gik/ 集合/ 放入/ 初始/ 为空/ 的/ 集合/ M/ 中/ ,/ 集合/ M/ 用来/ 保存/ 每次/ 通过/ 步/ 5/ 选取/ 得到/ 的/ 分簇/ ./ 8/ ./ 遍历/ Vk/ ,/ 选取/ 路径/ 相似/ 度/ 最大/ 的/ 集合/ gi/ 成为/ gk/ ,/ 如果/ Vk/ 中/ 路径/ 相似/ 度/ 最大/ 的/ 集合/ 不止/ 一个/ ,/ 则/ 从/ 这些/ 集合/ 中/ 随机/ 选择/ 一个/ 成为/ gk/ ,/ 跳到/ 步/ 2.9/ ./ 在/ Vk/ 剩余/ 的/ 集合/ 中/ 选取/ 集合/ 间/ 路径/ 相似/ 度/ 最大/ 的/ 两个/ 集合/ gi/ 与/ gk/ 和/ 并/ 为/ gik/ ,/ 将/ gik/ 放入/ 第/ 7/ 步/ 的/ M/ 中/ ,/ 更新/ Vk/ =/ Vk/ ∪/ gik/ \/ {/ gi/ ,/ gk/ }/ ,/ 跳转/ 到步/ 2/ ./ 算法/ 结束/ ./ 10/ ./ 树结构/ 生成/ 完毕/ ,/ 所有/ 的/ 非/ 叶子/ 节点/ 保存/ 在/ M/ 中/ ,/ 算法/ 2/ 的/ 第/ 1/ 步中/ 遍历/ 所有/ 集合/ ,/ 寻找/ 集合/ 间/ 路径/ 相似/ 度/ 最大/ 的/ W/ (/ gm/ ,/ gn/ )/ 时/ ,/ 需要/ 计算/ C2n/ 对/ 节点/ 间/ 的/ 路径/ 相似/ 度/ ,/ 计算/ 的/ 时间/ 复杂度/ 为/ O/ (/ n2/ )/ ./ 算法/ 最终/ 得到/ 的/ 树形/ 结构/ 有/ (/ n/ -/ 1/ )/ 个/ 非/ 叶子/ 节点/ ,/ 最/ 外层/ 的/ 循环/ 需要/ 进行/ (/ n/ -/ 1/ )/ 次/ ,/ 同时/ ,/ 考虑/ 到/ 合并/ 两个/ 路径/ 相似/ 度/ 最高/ 的/ 节点/ 分簇/ 后/ ,/ 只/ 需要/ 计算/ 这个/ 新/ 得到/ 的/ 分簇/ 和/ 已经/ 得到/ 的/ 其他/ 分簇/ 之间/ 的/ 路径/ 相似/ 度/ ,/ 循环/ 体内/ 的/ 计算/ 时间/ 复杂度/ 为/ O/ (/ n/ )/ ./ 因此/ 算法/ 第/ 2/ ~/ 9/ 步/ 的/ 计算/ 时间/ 复杂度/ 为/ O/ (/ n2/ )/ ./ 综上所述/ 算法/ 2/ 的/ 整体/ 时间/ 复杂度/ 为/ O/ (/ n2/ )/ ./ 通过/ 算法/ 2/ 得到/ 的/ 集合/ M/ 中/ 存在/ 一些/ 内部/ 路径/ 相似/ 度/ 不/ 高/ 的/ 分簇/ ,/ 同时/ 一些/ 分簇/ 之间/ 具有/ 包含/ 关系/ ,/ 因此/ 需要/ 对/ 得到/ 的/ 集合/ 进行/ 裁剪/ ./ 裁剪/ 策略/ 如下/ :/ 将/ M/ 中/ 的/ 所有/ 集合/ 的/ 边/ 的/ 平均/ 权值/ 由大到/ 小/ 排序/ ,/ 删去/ 后/ 一半/ 路径/ 相似/ 度/ 较/ 小/ 的/ 分簇/ ,/ 遍历/ M/ 中/ 剩余/ 的/ 集合/ ,/ 如果/ M/ 中/ 的/ 某/ 一个/ 分簇/ M1/ 被/ M/ 中/ 其他/ 某/ 一分/ 簇所/ 包含/ ,/ 则/ 将/ M1/ 从/ M/ 中/ 删除/ ,/ 如果/ 某些/ Page6/ 节点/ 不/ 在/ 裁剪/ 后/ 的/ 分簇/ 中/ ,/ 则/ 自己/ 独立/ 成簇/ ./ 通过/ 上述/ 方法/ 能够/ 得到/ 内部/ 路径/ 相似/ 度/ 较/ 高/ 的/ 节点/ 分簇/ ,/ 具体/ 的/ 裁剪/ 算法/ 见/ 算法/ 3/ ./ 算法/ 3/ ./ 集合/ M/ 的/ 裁剪/ 算法/ ./ 1/ ./ MSORT/ (/ M/ [/ g0/ ,/ gn/ ]/ )/ // // 使用/ 快速/ 排序/ 算法/ 按/ 路径/ 2/ ./ DELETE/ (/ M/ [/ gn/ // 2/ ,/ gn/ ]/ )/ // // 删除/ 后/ 一半/ 相似/ 度/ 较/ 小/ 3/ ./ FOR/ (/ i/ =/ 0/ ;/ i/ ++/ ;/ i/ </ n/ )/ 4/ ./ FOR/ (/ j/ =/ i/ +/ 1/ ;/ j/ ++/ ;/ j/ </ n/ )/ 5/ ./ R/ =/ INCLUSION/ (/ gi/ ,/ gj/ )/ // // 判断/ 两个/ 集合/ 的/ 包含/ 6/ ./ IF/ (/ R/ =/ =/ true/ )/ THEN7/ ./ IF/ (/ LENGTH/ (/ gi/ )/ </ =/ LENGTH/ (/ gj/ )/ )/ 8/ ./ DELETE/ (/ gi/ )/ 9/ ./ ELSE10/ ./ DELETE/ (/ gj/ )/ 11/ ./ ENDIF12/ ./ ENDIF13/ ./ ENDFOR14/ ./ ENDFORINCLUSION/ (/ gi/ ,/ gj/ )/ 1/ ./ {/ SORT/ (/ gi/ )/ // // 对/ gi/ 中/ 的/ 元素/ 进行/ 分类/ 2/ ./ SORT/ (/ gj/ )/ 3/ ./ g/ =/ LENGTH/ _/ LCS/ (/ gi/ ,/ gj/ )/ // // 求/ 最长/ 公共/ 子/ 序列/ 4/ ./ IF/ (/ LENGTH/ (/ g/ )/ =/ =/ LENGTH/ (/ gi/ )/ ‖/ 5/ ./ RETURNtrue6/ ./ ELSE7/ ./ RETURNfalse8/ ./ ENDIF9/ ./ }/ 2.4/ 分簇/ 信息/ 的/ 维护/ 过程/ 本文/ 的/ 实验/ 分为/ 两个/ 阶段/ :/ 热启动/ 阶段/ 和/ 路由/ 阶段/ ./ 在/ 热启动/ 阶段/ ,/ 每个/ 节点/ 本地/ 保存/ N/ 个/ 链表/ ,/ 依据/ 2.2/ 节中/ 的/ 统计/ 方法/ 记录/ 网络/ 中/ 所有/ 节点/ 的/ 移动/ 路径/ 信息/ ,/ 并/ 依据/ 节点/ 间/ 路径/ 相似/ 度/ 的/ 计算/ 模型/ 得到/ 每/ 对/ 节点/ 间/ 的/ 路径/ 相似/ 度/ ,/ 运用/ 分簇/ 方法/ 对/ 网络/ 中/ 所有/ 节点/ 进行/ 分簇/ ./ 在/ 路由/ 阶段/ ,/ 应用/ 热启动/ 阶段/ 的/ 分簇/ 结果/ 执行/ 路由/ 方法/ ./ 由于/ 容迟/ 网络/ 中/ 节点/ 的/ 运动/ 复杂多变/ ,/ 即使/ 在/ 校园/ 网络/ 中/ ,/ 由于/ 节点/ 身份/ 发生变化/ ,/ 很/ 可能/ 导致/ 其/ 行为习惯/ 的/ 变化/ ,/ 因此/ 不能/ 只/ 进行/ 一次/ 分簇/ ,/ 但/ 毕竟/ 校园/ 网络/ 中/ 节点/ 身份/ 的/ 变化/ 并/ 不/ 频繁/ ,/ 或者说/ 在/ 很长/ 的/ 时间段/ 内/ 节点/ 的/ 身份/ 不会/ 发生变化/ ,/ 因此/ 路由/ 阶段/ 可以/ 依据/ 具体/ 的/ 实验/ 场景/ 设置/ 很长/ 的/ 周期/ ,/ 这/ 也/ 是/ 本文/ 提出/ 的/ 分簇/ 模型/ 维护/ 开销/ 小/ 的/ 原因/ ./ 这里/ 特殊/ 强调/ ,/ 虽然/ 每个/ 节点/ 都/ 需要/ 对/ 网络/ 中/ 所有/ 节点/ 的/ 运动/ 轨迹/ 进行/ 路径/ 相似/ 度/ 计算/ 并/ 执行/ 分簇/ 方法/ ,/ 但是/ 由于/ 固定/ 长度/ 的/ 热启动/ 时间/ 决定/ 了/ 每个/ 节点/ 统计/ 得到/ 的/ 其他/ 节点/ 的/ 轨迹/ 信息/ 不/ 一定/ 完全相同/ ,/ 因此/ 它们/ 做/ 的/ 并/ 不是/ 完全/ 重复/ 的/ 计算/ ,/ 又/ 由于/ DTN/ 中/ 特殊/ 的/ 网络/ 环境/ 导致/ 集中式/ 的/ 计算/ 方式/ 很难/ 应用/ ,/ 因此/ 每个/ 节点/ 根据/ 本地/ 存储/ 的/ 节点/ 运动/ 轨迹/ 信息/ 独立/ 运行/ 分簇/ 算法/ 是/ 合理/ 的/ ./ 本文/ 针对/ 实验/ 的/ 两个/ 阶段/ 设计/ 如下/ :/ 每个/ 热启动/ 阶段/ 的/ 时间/ 长度/ 相同/ ,/ 每个/ 路由/ 阶段/ 的/ 时间/ 长度/ 也/ 相同/ ,/ 每个/ 路由/ 阶段/ 末尾/ 的/ 一段时间/ 同时/ 也/ 是/ 下/ 一个/ 热启动/ 阶段/ (/ 图/ 6/ )/ ./ 热启动/ 阶段/ 和/ 路由/ 阶段/ 的/ 具体/ 设置/ 见/ 6.1/ 节/ ./ 3/ 半/ 马尔可夫/ 预测/ 模型/ 节点/ K/ 的/ 状态/ 集合/ 记为/ LK/ =/ {/ 1/ ,/ 2/ ,/ 3/ ,/ …/ ,/ l/ }/ ,/ 用以/ 表示/ 节点/ K/ 所处/ 地点/ 的/ 标号/ ,/ l/ 表示/ 总共/ 的/ 地点/ 数/ ,/ 节点/ K/ 的/ 第/ n/ 个/ 状态/ (/ 路径/ 中/ 经过/ 的/ 第/ n/ 个/ 区域/ 的/ 标号/ )/ 记为/ LKn/ ,/ 节点/ K/ 进入/ 第/ n/ 个/ 状态/ 的/ 时刻/ (/ 进入/ 第/ n/ 个/ 区域/ 的/ 时刻/ )/ 记为/ TKn/ ./ 对于/ 节点/ K/ 形成/ 了/ 一个/ 时间/ 离散/ 、/ 状态/ 离散/ 的/ 马尔可夫/ 链/ LKn/ ,/ 即/ 节点/ K/ 的/ 第/ n/ +/ 1/ 个/ 状态/ LKn/ +/ 1/ 只/ 与/ 第/ n/ 个/ 状态/ LKn/ 有关/ ,/ 而/ 与/ 之前/ 的/ 状态/ 无关/ ./ 同时/ 对于/ 节点/ K/ 形成/ 了/ 时间/ 连续/ 、/ 状态/ 离散/ 的/ 半/ 马尔可夫/ 过程/ 模型/ (/ LKn/ ,/ TKn/ )/ ,/ 该/ 模型/ 描述/ 了/ 随着/ 时间/ 变化/ 节点/ K/ 的/ 状态/ 转移/ 过程/ ./ 节点/ K/ 在/ 第/ n/ 个/ 状态/ 的/ 驻留/ 时间/ 记为/ WKn/ ,/ WKn/ 可/ 由/ TKn/ +/ 1/ 和/ TKn/ 表示/ ,/ 如式/ (/ 1/ )/ ./ 半/ 马尔可夫/ 模型/ (/ LKn/ ,/ TKn/ )/ 的/ 核心/ 表达式/ Z/ 如式/ (/ 2/ )/ ./ Z/ (/ i/ ,/ j/ ,/ t/ ,/ k/ )/ 表示/ 节点/ K/ 在/ t/ 时间/ 内/ 由/ 状态/ i/ 转移/ 到/ 状态/ j/ 的/ 概率/ ,/ 从式/ (/ 2/ )/ 中/ 可以/ 看出/ ,/ LKn/ +/ 1/ 的/ 状态/ 取决于/ 当前/ 状态/ LKn/ ,/ 与/ 之前/ 的/ LKn/ -/ 1/ 等/ 状态/ 无关/ ./ Z/ (/ i/ ,/ j/ ,/ t/ ,/ k/ )/ =/ P/ (/ LKn/ +/ 1/ =/ j/ ,/ WKn/ / t/ |/ LK0/ …/ LKn/ ,/ TK0/ …/ TKn/ )/ 根据/ 假设/ ,/ K/ 的/ 路径/ 序列/ 满足/ 时间/ 离散/ 、/ 状态/ 离散/ 的/ 马尔可夫/ 链/ LKn/ ,/ P/ (/ i/ ,/ j/ ,/ k/ )/ 表示/ 节点/ K/ 从/ 状态/ i/ 转移/ 到/ 状态/ j/ 的/ 概率/ ,/ 统计/ LKn/ 的/ 历史/ 序列/ ,/ 依据/ 马尔可夫/ 链/ 性质/ ,/ 得到/ 式/ (/ 3/ )/ ,/ 其中/ numij/ 表示/ LKnPage7/ 序列/ 中/ 由/ 状态/ i/ 直接/ 转移/ 到/ 状态/ j/ 的/ 次数/ ,/ numi/ 表示/ LKn/ 序列/ 中/ 状态/ i/ 出现/ 的/ 次数/ (/ 例如/ ,/ LKn/ 的/ 序列/ 为/ 2/ ,/ 1/ ,/ 2/ ,/ 3/ ,/ 5/ ,/ 则/ P/ (/ 2/ ,/ 1/ ,/ k/ )/ =/ 1/ // 2/ )/ ./ P/ (/ i/ ,/ j/ ,/ k/ )/ =/ P/ (/ LKn/ +/ 1/ =/ j/ |/ LKn/ =/ i/ )/ =/ numij/ // numi/ (/ 3/ )/ 节点/ K/ 由/ 状态/ i/ 直接/ 转移/ 到/ 状态/ j/ 所用/ 的/ 时间/ 小于/ 等于/ t/ 的/ 概率/ 记为/ G/ (/ i/ ,/ j/ ,/ t/ ,/ k/ )/ ,/ 表达式/ 如式/ (/ 4/ )/ (/ 例如/ 从/ i/ 直接/ 转移/ 到/ j/ 的/ 统计/ 时间/ 分别/ 有/ 2/ ,/ 3/ ,/ 3/ ,/ 4/ ,/ 5/ ,/ 则/ G/ (/ i/ ,/ j/ ,/ 3/ ,/ k/ )/ =/ 3/ // 5/ )/ ./ G/ (/ i/ ,/ j/ ,/ t/ ,/ k/ )/ =/ P/ (/ WKn/ / t/ |/ LKn/ =/ i/ ,/ LKn/ +/ 1/ =/ j/ )/ 节点/ K/ 的/ 当前/ 状态/ 为/ i/ ,/ t/ 时间/ 内/ 转移/ 到/ 了/ 其他/ 状态/ 的/ 概率/ 记为/ G/ (/ i/ ,/ t/ ,/ k/ )/ ,/ 表达式/ 如式/ (/ 5/ )/ ./ G/ (/ i/ ,/ t/ ,/ k/ )/ =/ P/ (/ WKn/ / t/ |/ LKn/ =/ i/ )/ =/ ∑/ l/ 则/ 依据/ 式/ (/ 2/ )/ ~/ (/ 4/ )/ 得出/ Z/ (/ i/ ,/ j/ ,/ t/ ,/ k/ )/ 的/ 具体/ 计算公式/ ,/ 如式/ (/ 6/ )/ ./ Z/ (/ i/ ,/ j/ ,/ t/ ,/ k/ )/ =/ P/ (/ LKn/ +/ 1/ =/ j/ ,/ WKn/ / t/ |/ LK0/ …/ LKn/ ,/ TK0/ …/ TKn/ )/ =/ P/ (/ WKn/ / t/ |/ LKn/ =/ i/ ,/ LKn/ +/ 1/ =/ j/ )/ ·/ P/ (/ LKn/ +/ 1/ =/ j/ |/ LKn/ =/ i/ )/ =/ G/ (/ i/ ,/ j/ ,/ t/ ,/ k/ )/ ·/ P/ (/ i/ ,/ j/ ,/ k/ )/ 半/ 马尔可夫/ 模型/ (/ LKn/ ,/ TKn/ )/ 的/ 另外/ 一个/ 核心/ 表达式/ Q/ 如式/ (/ 7/ )/ ./ Q/ (/ i/ ,/ j/ ,/ t/ ,/ k/ )/ 表示/ 节点/ K/ 当前/ 时刻/ 处于/ i/ 状态/ ,/ t/ 时间/ 后/ 处于/ j/ 状态/ 的/ 概率/ ,/ Q/ (/ i/ ,/ j/ ,/ t/ ,/ k/ )/ 不同于/ 式/ (/ 2/ )/ 定义/ 的/ Z/ (/ i/ ,/ j/ ,/ t/ ,/ k/ )/ ,/ Z/ (/ i/ ,/ j/ ,/ t/ ,/ k/ )/ 表示/ 节点/ K/ 当前/ 状态/ 为/ i/ ,/ 下/ 一个/ 状态/ 为/ j/ ,/ 并且/ 这个/ 转移/ 的/ 时间/ 不/ 大于/ t/ 的/ 概率/ ,/ 而/ Q/ (/ i/ ,/ j/ ,/ t/ ,/ k/ )/ 中/ i/ 到/ j/ 不/ 一定/ 是/ 连续/ 的/ 状态/ 转移/ ,/ 也许/ 在/ t/ 时间/ 内/ 节点/ K/ 经历/ 过/ 其他/ 状态/ ,/ 只要/ 得到/ t/ 时间/ 后/ 节点/ K/ 处于/ j/ 状态/ 的/ 概率/ 即可/ ./ 特殊/ 强调/ :/ Q/ (/ i/ ,/ j/ ,/ 0/ ,/ k/ )/ =/ 0/ (/ j/ ≠/ i/ )/ ,/ Q/ (/ i/ ,/ i/ ,/ 0/ ,/ k/ )/ =/ 1/ ./ Q/ (/ i/ ,/ j/ ,/ t/ ,/ k/ )/ =/ 烄/ ∑/ lr/ =/ 1/ ∑/ tQ/ (/ r/ ,/ j/ ,/ t/ -/ u/ ,/ k/ )/ ,/ j/ ≠/ i/ 烅/ 1/ -/ G/ (/ i/ ,/ t/ ,/ k/ )/ +/ ∑/ lQ/ (/ r/ ,/ i/ ,/ t/ -/ u/ ,/ k/ )/ ,/ j/ =/ 烆/ u/ =/ 1/ 对式/ (/ 7/ )/ 做/ 如下/ 解释/ :/ 当式/ (/ 7/ )/ 中/ j/ ≠/ i/ ,/ r/ =/ j/ ,/ u/ =/ t/ 时/ 公式/ 变为/ (/ Z/ (/ i/ ,/ j/ ,/ t/ ,/ k/ )/ -/ Z/ (/ i/ ,/ j/ ,/ t/ -/ 1/ ,/ k/ )/ )/ ·/ Q/ (/ j/ ,/ j/ ,/ 0/ ,/ k/ )/ ,/ 由于/ Q/ (/ i/ ,/ i/ ,/ 0/ ,/ k/ )/ =/ 1/ ,/ 故/ 公式/ 转化/ 为/ (/ Z/ (/ i/ ,/ j/ ,/ t/ ,/ k/ )/ -/ Z/ (/ i/ ,/ j/ ,/ t/ -/ 1/ ,/ k/ )/ )/ ,/ 表示/ t/ -/ 1/ 秒/ 之前/ 没有/ 发生/ 状态/ 转移/ ,/ 在/ 最后/ 非常/ 极限/ 的/ 时间/ t/ 到达/ j/ 状态/ ./ 另外/ 一种/ 可能/ :/ 当/ j/ ≠/ i/ ,/ r/ ≠/ j/ ,/ u/ ≠/ t/ 时/ ,/ 式/ (/ 7/ )/ 表示/ 节点/ K/ 在/ t/ 秒/ 内/ 到达/ 过/ 其他/ 状态/ ,/ 但是/ 最后/ 在/ t/ 秒/ 后/ 到达/ 了/ j/ 状态/ ,/ 因此/ 当/ j/ ≠/ i/ 时式/ (/ 7/ )/ 能够/ 正确/ 的/ 表示/ 节点/ K/ 当前/ 状态/ 为/ i/ ,/ t/ 时间/ 后/ 状态/ 为/ j/ 的/ 概率/ ./ 同理/ 当/ j/ =/ i/ 时/ 也/ 分为/ 两种/ 情况/ ,/ 第/ 1/ 种/ 情况/ 是/ 节点/ K/ 在/ t/ 时间/ 内/ 没有/ 离开/ i/ 状态/ ,/ 第/ 2/ 种/ 情况/ 是/ t/ 时间/ 内/ 节点/ K/ 到达/ 过/ 其他/ 状态/ ,/ 但是/ 在/ t/ 时间/ 后/ 回到/ 了/ i/ 状态/ ./ 第/ 1/ 种/ 情况/ 对应/ 于/ Q/ (/ i/ ,/ i/ ,/ t/ ,/ k/ )/ =/ 1/ -/ G/ (/ i/ ,/ t/ ,/ k/ )/ ,/ 第/ 2/ 种/ 情况/ 对应/ 于/ Q/ (/ i/ ,/ i/ ,/ t/ ,/ k/ )/ =/ ∑/ lZ/ (/ i/ ,/ r/ ,/ u/ -/ 1/ ,/ k/ )/ )/ ·/ Q/ (/ r/ ,/ i/ ,/ t/ -/ u/ ,/ k/ )/ ,/ 因此/ 在/ j/ =/ i/ 时式/ (/ 7/ )/ 也/ 能/ 正确/ 表示/ 该/ 概率/ ./ 式/ (/ 7/ )/ 运用/ 了/ 动态/ 规划/ 的/ 思想/ ,/ 其中/ Z/ (/ i/ ,/ j/ ,/ t/ ,/ k/ )/ 可以/ 通过/ 式/ (/ 6/ )/ 得到/ ,/ G/ (/ i/ ,/ t/ ,/ k/ )/ 可以/ 通过/ 式/ (/ 5/ )/ 得到/ ,/ 初始值/ Q/ (/ i/ ,/ j/ ,/ 0/ ,/ k/ )/ =/ 0/ (/ j/ ≠/ i/ )/ ,/ Q/ (/ i/ ,/ i/ ,/ 0/ ,/ k/ )/ =/ 1/ ./ 通过/ 动态/ 规划/ 方法/ 逐层/ 求解/ ,/ 即可/ 算出/ Q/ (/ i/ ,/ j/ ,/ t/ ,/ k/ )/ ./ 本文/ 提出/ 的/ 半/ 马尔可夫/ 预测/ 模型/ 在/ 以下/ 几个/ 方面/ 优于/ 文献/ [/ 26/ ]/ 中/ 提出/ 的/ 预测/ 模型/ ./ 首先/ 文献/ [/ 26/ ]/ 中/ 设计/ 了/ 一种/ 节点/ 的/ 行为/ 方式/ :/ 以/ (/ 1/ -/ p/ )/ 的/ 概率/ 停留/ 在/ 当前/ 区域/ 内/ ,/ 而/ 以/ p/ // (/ L/ -/ 1/ )/ 的/ 概率/ 前往/ 其他/ (/ L/ -/ 1/ )/ 个/ 区域/ 中/ 的/ 任意/ 一个/ ,/ 但是/ 在/ 预测/ 模型/ 中/ 却/ 运用/ 基于/ 历史/ 路径/ 信息/ 的/ 马尔可夫/ 模型/ 求解/ 前往/ 其他/ 区域/ 的/ 概率/ 值/ pij/ ,/ 预测/ 模型/ 并/ 不适/ 用于/ 设计/ 的/ 仿真/ 环境/ ./ 而/ 本文/ 节点/ 的/ 运动/ 轨迹/ 采用/ 统计/ 的/ 真实/ 信息/ ,/ 提出/ 的/ 半/ 马尔可夫/ 预测/ 模型/ 较为/ 适用/ ./ 其次/ 文献/ [/ 26/ ]/ 中/ δ/ ij/ 表示/ 节点/ 由/ i/ 状态/ 直接/ 变为/ j/ 状态/ 的/ 概率/ 值/ ,/ 这样/ 的/ 设计/ 不/ 符合/ 真实/ 运动/ 行为/ ,/ 故/ 本文/ 提出/ 的/ 预测/ 模型/ 在/ 式/ (/ 7/ )/ 中/ 分为/ i/ =/ j/ 和/ i/ ≠/ j/ 两种/ 情况/ 讨论/ ,/ 使/ 预测/ 模型/ 更加/ 准确/ ./ 最后/ 文献/ [/ 26/ ]/ 中/ 节点/ 在/ t/ 时间/ 内/ 没有/ 走出/ 当前/ 区域/ 的/ 概率/ 值/ 是/ 通过/ 节点/ 在/ t/ 时间/ 内/ 到达/ 其他/ 区域/ 的/ 概率/ 值来/ 间接/ 计算/ 的/ ,/ 而/ 本文/ 通过/ 热启动/ 阶段/ 统计/ 停留时间/ 的/ 时间/ 分布/ 直接/ 计算/ 该/ 概率/ 值/ ,/ 减小/ 了/ 计算/ 复杂度/ ./ 4/ 相遇/ 概率/ 求解/ 模型/ 通过/ 半/ 马尔可夫/ 模型/ 可以/ 求/ 出/ 任意/ 节点/ K/ 所/ 对应/ 的/ Q/ (/ i/ ,/ j/ ,/ t/ ,/ k/ )/ ,/ 已知/ 节点/ a/ 在/ ta/ 时刻/ 处于/ 状态/ la/ ,/ 节点/ b/ 在/ tb/ 时刻/ 处于/ 状态/ lb/ ,/ tmax/ =/ max/ {/ ta/ ,/ tb/ }/ ,/ 则/ a/ 和/ b/ 在/ tmax/ 之后/ 的/ 时刻/ t/ (/ t/ >/ tmax/ )/ ,/ 相遇/ 于/ 地点/ i/ 的/ 概率/ 记为/ C/ (/ a/ ,/ b/ ,/ t/ ,/ i/ )/ ,/ 如式/ (/ 8/ )/ ./ C/ (/ a/ ,/ b/ ,/ t/ ,/ i/ )/ =/ Q/ (/ la/ ,/ i/ ,/ t/ -/ ta/ ,/ a/ )/ ·/ Q/ (/ lb/ ,/ i/ ,/ t/ -/ tb/ ,/ b/ )/ (/ 8/ )/ 根据/ 式/ (/ 8/ )/ ,/ a/ 和/ b/ 在/ t/ (/ t/ >/ tmax/ )/ 时刻/ 的/ 相遇/ 概率/ (/ 任意/ 地点/ )/ C/ (/ a/ ,/ b/ ,/ t/ )/ 如式/ (/ 9/ )/ ./ Page8/ 定义/ 6/ ./ 半/ 马尔可夫/ 预测/ 时间/ 窗口/ ./ 半/ 马尔可夫/ 预测/ 时间/ 窗口/ Qt/ 定义/ 为/ 节点/ K/ 的/ 公式/ Q/ (/ i/ ,/ j/ ,/ t/ ,/ k/ )/ 中/ t/ 所能/ 取得/ 的/ 最大值/ ,/ 为了/ 计算/ 方便/ ,/ 网络/ 中/ 任意/ 节点/ 的/ Qt/ 均/ 相同/ ,/ Qt/ 代表/ 了/ 半/ 马尔可夫/ 模型/ 所/ 能/ 预测/ 的/ 最大/ 时间跨度/ ./ 定义/ 7/ ./ 相遇/ 概率/ 预测/ 时间/ 窗口/ ./ 相遇/ 概率/ 预测/ 时间/ 窗口/ Ct/ 定义/ 为/ 节点/ a/ 和/ b/ 的/ 公式/ C/ (/ a/ ,/ b/ ,/ t/ ,/ i/ )/ 中/ t/ 所能/ 取得/ 的/ 最大值/ ,/ 为了/ 方便/ 计算/ ,/ 网络/ 中/ 任意/ 节点/ 对/ 之间/ 的/ Ct/ 均/ 相同/ ,/ Ct/ 代表/ 了/ 相遇/ 概率/ 求解/ 模型/ 的/ 最大/ 时间跨度/ ./ 每个/ 节点/ K/ 本地/ 保存/ 一个/ 三元组/ 〈/ k/ ,/ tk/ ,/ lk/ 〉/ ,/ k/ 代表/ 节点/ 编号/ ,/ tk/ 代表/ 进入/ 一个/ 状态/ 的/ 时间/ ,/ lk/ 表示/ 对应/ 的/ 区域/ (/ 状态/ )/ 编号/ ./ 每当/ K/ 进入/ 一个/ 新/ 的/ 区域/ 的/ 时候/ ,/ 就/ 用/ 最新/ 的/ 三元组/ 替换/ 掉/ 之前/ 的/ 统计/ 三元组/ ,/ 每当/ 两个/ 节点/ 相遇/ 的/ 时候/ ,/ 交换/ 彼此/ 没有/ 的/ 三元组/ ,/ 这样/ 一段时间/ 以后/ 网络/ 中/ 所有/ 节点/ 会/ 拥有/ 整个/ 网络/ 的/ 三元组/ 信息/ ./ 假设/ 当前/ 时间/ 为/ tn/ ,/ ta/ 和/ tb/ 均/ 小于/ 等于/ tn/ ,/ 当要/ 预测/ t/ 时刻/ a/ 和/ b/ 的/ 相遇/ 概率/ 时/ ,/ 首先/ 考察/ t/ -/ tn/ 和/ Ct/ 的/ 大小/ 关系/ ,/ 当/ t/ -/ tn/ / Ct/ 时/ 按照/ 式/ (/ 9/ )/ 正常/ 计算/ ,/ 否则/ 超出/ 预测/ 能力/ ,/ 无法/ 计算/ ./ 当/ 执行/ 式/ (/ 9/ )/ 时/ ,/ 考察/ t/ -/ ta/ ,/ t/ -/ tb/ 与/ Qt/ 的/ 大小/ 关系/ ,/ 当/ t/ -/ ta/ ,/ t/ -/ tb/ 均/ 小于/ 等于/ Qt/ 时/ ,/ 则/ 正常/ 计算/ ;/ 当/ t/ -/ ta/ ,/ t/ -/ tb/ 均/ 大于/ Qt/ 时/ (/ 实验/ 场景/ 中/ Qt/ 相对/ 于/ Ct/ 比较/ 大/ ,/ 这种/ 情况/ 几乎/ 不能/ 发生/ )/ ,/ 将/ 节点/ a/ 和/ b/ 的/ 相遇/ 概率/ 暂时/ 设置/ 为/ 0/ ;/ 当/ t/ -/ ta/ ,/ t/ -/ tb/ 只有/ 一个/ 大于/ Qt/ 时/ ,/ 不失/ 一般性/ 的/ 假设/ t/ -/ ta/ >/ Qt/ ,/ 这时/ 易得/ ta/ </ tb/ ,/ 需要/ 预测/ 在/ tb/ 时刻/ a/ 最有/ 可能/ 处于/ 的/ 状态/ lmaxa/ ,/ 然后/ 用/ 〈/ a/ ,/ tb/ ,/ lmaxa/ 〉/ 替换/ 掉/ 节点/ a/ 本地/ 保存/ 的/ 三元组/ ,/ 继续/ 进行/ 预测/ ./ lmaxa/ 的/ 计算方法/ 如下/ :/ lmaxa/ =/ argmaxjQ/ (/ la/ ,/ j/ ,/ tb/ -/ ta/ ,/ a/ )/ ./ 综上所述/ 相遇/ 概率/ 求解/ 模型/ 的/ 流程/ 如图/ 7/ ./ 定义/ 8/ ./ a/ 和/ b/ 在/ Ct/ 时间/ 内/ 的/ 相遇/ 概率/ Cmax/ (/ a/ ,/ b/ ,/ Ct/ )/ ./ 该/ 概率/ 值/ 定义/ 为/ 在/ 当前/ 时间/ 以后/ 的/ Ct/ 时间/ 内/ 最大/ 的/ 相遇/ 概率/ ,/ 如式/ (/ 10/ )/ ,/ 最大/ 相遇/ 概率/ 所/ 对应/ 的/ 相遇/ 时刻/ tabmax/ 如式/ (/ 11/ )/ ./ Cmax/ (/ a/ ,/ b/ ,/ Ct/ )/ =/ maxtC/ (/ a/ ,/ b/ ,/ t/ )/ (/ tn/ / t/ / t/ +/ Ct/ )/ (/ 10/ )/ tabmax/ =/ argmaxtC/ (/ a/ ,/ b/ ,/ t/ )/ (/ tn/ / t/ / t/ +/ Ct/ )/ (/ 11/ )/ 根据/ 式/ (/ 1/ )/ ~/ (/ 11/ )/ ,/ 本文/ 能够/ 计算/ 出/ 网络/ 中/ 任意/ 两个/ 节点/ 间/ 在/ 未来/ 一段时间/ 内/ 的/ 最大/ 相遇/ 概率/ 以及/ 对应/ 的/ 相遇/ 时刻/ ,/ 不同于/ 以往/ 路由/ 方法/ 对于/ 节点/ 间/ 相遇/ 概率/ 的/ 估计/ ,/ 基于/ 动态/ 半/ 马尔可夫/ 路径/ 搜索/ 模型/ 的/ DTN/ 分簇/ 路由/ 方法/ 不仅/ 能够/ 预测/ 未来/ 相遇/ 的/ 可能性/ ,/ 同时/ 能够/ 预测出/ 在/ 某一时间/ 两个/ 节点/ 相遇/ 的/ 可能性/ 大小/ ,/ 这样/ 必然/ 会/ 对/ 接下来/ 的/ 路由/ 方法/ 带来/ 巨大/ 帮助/ ./ 5/ 动态/ 路由表/ 5.1/ 路由/ 节点/ 集合/ 的/ 确定/ 在/ 热启动/ 阶段/ 结束/ 之后/ ,/ 每个/ 节点/ 可以/ 统计/ 到/ 网络/ 中/ 所有/ 节点/ 的/ 移动/ 轨迹/ 信息/ ,/ 依据/ 分簇/ 算法/ 得到/ 所有/ 节点/ 的/ 分簇/ 结果/ ,/ 当源/ 节点/ a/ 要/ 向/ 目的/ 节点/ d/ 路由/ 报文/ 的/ 时候/ ,/ a/ 首先/ 判断/ a/ 和/ d/ 是否/ 在/ 一个/ 分簇/ 内/ ,/ 如果/ 在/ 一个/ 分簇/ 内/ ,/ 则/ 将/ 该/ 分/ 簇内/ 的/ 所有/ 节点/ 定义/ 为/ 路由/ 该报/ 文/ 的/ 节点/ 集合/ ./ 如果/ 不/ 在/ 一个/ 分簇/ 内/ ,/ 则/ 将/ d/ 所在/ 分簇/ 的/ 所有/ 节点/ 和/ 节点/ a/ 定义/ 为/ 路由/ 该报/ 文/ 的/ 节点/ 集合/ ,/ 在/ 该/ 集合/ 中/ 运用/ 路径/ 搜索算法/ 生成/ 动态/ 路由表/ ./ 5.2/ 路径/ 搜索/ 策略/ 定义/ 9/ ./ t/ 时刻/ 的/ 路由/ 图/ O/ =/ (/ Vt/ ,/ Et/ ,/ t/ )/ ./ 其中/ Vt/ 为/ 5.1/ 节中/ 所/ 确定/ 的/ 参与/ 路由/ 的/ 节点/ 集合/ ,/ Et/ 为/ 定义/ 在/ O/ 上/ 的/ 边/ 集合/ ,/ a/ ,/ b/ ∈/ Vt/ ,/ ea/ ,/ b/ ∈/ Et/ ,/ ea/ ,/ b/ 上/ 需要/ 记录/ a/ 和/ b/ 在/ Ct/ 时间/ 内/ 最大/ 的/ 相遇/ 概率/ Cmax/ (/ a/ ,/ b/ ,/ Ct/ )/ 和/ 最大/ 相遇/ 概率/ 所/ 对应/ 的/ 时刻/ tabmax/ ,/ 如图/ 8/ ./ 定义/ 10/ ./ 源到/ 目的/ 节点/ 的/ 一条/ 可/ 走通/ 路径/ ./ 路径/ a0a1a2/ …/ an/ (/ n/ / 1/ )/ 为/ 一条/ 可/ 走通/ 路径/ ,/ 当且/ 仅/ 当/ tan/ +/ 1anmax/ >/ tanan/ -/ 1max/ (/ n/ / 1/ )/ ./ 定义/ 11/ ./ 路径/ 投递/ 概率/ Cpath/ ./ 对于/ 路径/ a0a1a2/ …/ an/ (/ n/ / 1/ )/ ,/ Cpath/ =/ ∏/ n/ -/ 1Page9/ 定义/ 12/ ./ 源到/ 目的/ 节点/ 的/ 最优/ 路径/ ./ 其/ 定义/ 为源/ 到/ 目的/ 节点/ 的/ 可/ 走通/ 路径/ 中/ Cpath/ 最大/ 的/ 路径/ ./ 算法/ 4/ 为/ 最优/ 路径/ 搜索算法/ ,/ 其中/ π/ 表示/ 节点/ 的/ 后继/ ,/ H/ 表示/ 节点/ 集合/ ./ C/ 表示/ 节点/ 间/ 最大/ 相遇/ 概率/ ,/ 1800s/ 是/ 实验/ 中/ 选取/ 的/ 预测/ 窗口/ 大小/ ./ 算法/ 4/ ./ 路径/ 搜索算法/ ./ FIND/ _/ PATH/ (/ a/ ,/ b/ ,/ t/ )/ 1/ ./ best/ ←/ / 2/ ./ FIND/ _/ NEXT/ (/ a/ ,/ b/ ,/ t/ )/ 3/ ./ RETURNbestPATH/ _/ PROB/ (/ π/ )/ 1/ ./ ppath/ ←/ 12/ ./ FOReach/ (/ a/ ,/ p/ )/ in/ π/ 3/ ./ ppath/ ←/ ppath/ ×/ p4/ ./ RETURNppathFIND/ _/ NEXT/ (/ a/ ,/ b/ ,/ t/ )/ 1/ ./ p/ ←/ max/ {/ Cab/ (/ k/ )/ |/ kin/ [/ t/ ,/ t/ +/ 1800/ ]/ }/ 2/ ./ π/ (/ a/ )/ ←/ (/ b/ ,/ p/ )/ 3/ ./ IFPATH/ _/ PROB/ (/ π/ )/ >/ PATH/ _/ PROB/ (/ best/ )/ 4/ ./ best/ ←/ π/ 5/ ./ FOReachc/ ∈/ H/ -/ {/ a/ ,/ b/ }/ 6/ ./ (/ p/ ,/ k/ )/ ←/ max/ {/ (/ Cac/ (/ k/ )/ ,/ k/ )/ |/ kin/ [/ t/ ,/ t/ +/ 1800/ ]/ }/ 7/ ./ π/ (/ a/ )/ ←/ (/ c/ ,/ p/ )/ 8/ ./ IFPATH/ _/ PROB/ (/ π/ )/ >/ PATH/ _/ PROB/ (/ best/ )/ 9/ ./ FIND/ _/ NEXT/ (/ c/ ,/ b/ ,/ k/ )/ 10/ ./ π/ (/ a/ )/ ←/ NIL5/ ./ 3/ 动态/ 路由表/ 的/ 维护/ 节点/ 路由表/ 的/ 初始化/ :/ 节点/ 根据/ 实验/ 热启动/ 阶段/ 得到/ 的/ 信息/ 初始化/ 路由表/ ,/ 依据/ 热启动/ 阶段/ 得到/ 的/ 任意/ 两个/ 节点/ 在/ 预测/ 时间/ 内/ 的/ 最大/ 相遇/ 概率/ 和/ 最大/ 相遇/ 概率/ 对应/ 的/ 时刻/ ,/ 生成/ 路由/ 图/ ,/ 依据/ 最优/ 路径/ 搜索算法/ 得到/ 当前/ 时刻/ 该/ 节点/ 到达/ 目的/ 节点/ 的/ 最优/ 路径/ 上/ 的/ 下/ 一/ 跳/ 节点/ 的/ 编号/ ,/ 生成/ 形/ 如/ 〈/ 下/ 一/ 跳/ 节点/ ,/ 目的/ 节点/ 〉/ 的/ 二元/ 组/ ,/ 进而/ 生成/ 与/ 时间/ 相关/ 的/ 动态/ 路由表/ ./ 节点/ 路由表/ 的/ 更新/ :/ 新/ 报文/ 的/ 产生/ 驱使/ 动态/ 路由表/ 的/ 更新/ ./ 每当/ 有/ 新/ 到/ 报文/ 时/ ,/ 根据/ 报文/ 的/ 目的/ 节点/ 计算/ 最优/ 路径/ 上/ 的/ 下/ 一/ 跳/ 节点/ ,/ 重新/ 生成/ 与/ 当前/ 时刻/ 有关/ 的/ 二元/ 组/ ,/ 更新/ 路由表/ 中原/ 有/ 的/ 选路/ 方法/ ,/ 完成/ 动态/ 路由表/ 的/ 更新/ 工作/ ./ 综上所述/ ,/ 基于/ 动态/ 半/ 马尔可夫/ 路径/ 搜索/ 模型/ 的/ DTN/ 分簇/ 路由/ 方法/ CRSMP/ 首先/ 根据/ 节点/ 间/ 路径/ 的/ 相似/ 程度/ 完成/ 节点/ 分簇/ ,/ 然后/ 依据/ 半/ 马尔可夫/ 预测/ 模型/ 预测出/ 节点/ 当前/ 时刻/ 在/ 状态/ i/ 并且/ t/ (/ t/ / Qt/ )/ 时间/ 之后/ 到达/ 状态/ j/ 的/ 概率/ 值/ ,/ 进一步/ 计算/ 出/ 任意/ 两个/ 节点/ 在/ Ct/ 时间/ 内/ 的/ 最大/ 相遇/ 概率/ 以及/ 最大/ 相遇/ 概率/ 值/ 所/ 对应/ 的/ 相遇/ 时刻/ ,/ 根据/ 源/ 节点/ 和/ 目的/ 节点/ 的/ 分簇/ 关系/ 确定/ 用来/ 路由/ 报文/ 的/ 节点/ 集合/ ,/ 依据/ 最优/ 路径/ 搜索算法/ 完成/ 动态/ 路由表/ 的/ 建立/ 和/ 更新/ ,/ 按照/ 动态/ 路由表/ 信息/ 路由/ 报文/ ./ 实验/ 结果表明/ 该/ 路由/ 方法/ 明显提高/ 了/ 投递/ 成功率/ ,/ 减小/ 了/ 网络/ 的/ 平均/ 时延/ ,/ 并且/ 在/ 一定/ 程度/ 上/ 减小/ 了/ 负载/ 比率/ ./ 6/ 性能/ 评估/ 6.1/ 仿真/ 环境/ 设置/ 为了/ 测试/ CRSMP/ 的/ 路由/ 性能/ ,/ 本文/ 采用/ 机会/ 网络/ 模拟器/ ONE/ 仿真/ 该/ 实验/ ,/ 在/ ONE/ 自带/ 的/ 赫尔辛基/ 市/ 地图/ 上/ 进行/ 修改/ ,/ 设计/ 了/ 一个/ 尽量/ 真实/ 的/ 校园环境/ 作为/ 实验/ 场景/ (/ 图/ 9/ )/ ,/ 在/ 图/ 9/ (/ 4500m/ ×/ 3400m/ )/ 的/ 仿真/ 环境/ 中/ 设计/ 了/ 10/ 个/ 区域/ ,/ 节点/ 间/ 的/ 通信/ 只能/ 发生/ 在/ 区域/ 内/ ,/ 并且/ 进入/ 同一/ 区域/ 内/ 的/ 节点/ 间/ 均/ 可以/ 通信/ ,/ 节点/ 间/ 能够/ 通信/ 的/ 充分/ 必要条件/ 是/ 这/ 两个/ 节点/ 同时/ 处于/ 同一个/ 通信/ 区域/ 内/ ,/ 每个/ 区域/ 是/ 一个/ 半径/ 为/ 200m/ 的/ 圆/ ,/ 用于/ 模拟/ 如表/ 2/ 中/ 的/ 校园/ 网络/ 环境/ ./ 节点/ 采用/ 2.1/ 节中/ 描述/ 的/ 运动/ 轨迹/ 模型/ ,/ 每个/ 区域/ 内/ 对应/ 的/ n/ 值见表/ 1/ ./ Page10/ 本文/ 采用/ 调查/ 问卷/ 的/ 方式/ ,/ 对/ 计算机/ 学院/ 的/ 老师/ (/ 20/ 人/ )/ 、/ 计算机/ 学院/ 的/ 研究生/ (/ 20/ 人/ )/ 、/ 数学/ 学院/ 的/ 老师/ (/ 20/ 人/ )/ 和/ 数学/ 学院/ 的/ 研究生/ (/ 20/ 人/ )/ 共/ 80/ 人/ 统计/ 了/ 他们/ 工作日内/ 在/ 设定/ 的/ 这/ 10/ 个/ 区域/ 中/ 的/ 运动/ 轨迹/ ,/ 并/ 将/ 这个/ 轨迹/ 信息/ 赋值/ 给/ 节点/ 的/ 区域/ 编号/ 序列/ ,/ 节点/ 遵循/ 调查/ 问卷/ 统计/ 的/ 轨迹/ 进行/ 运动/ ,/ 由于/ 调研/ 能力/ 有限/ ,/ 本文/ 只/ 对/ 学校/ 80/ 个人/ 的/ 运动/ 行为/ 作/ 了/ 统计/ ,/ 但/ 由于/ 调查/ 问卷/ 采取/ 随机/ 发放/ 方式/ ,/ 因此/ 每/ 一个/ 分组/ 内/ 的/ 20/ 个人/ 能够/ 代表/ 典型/ 的/ 校园环境/ 下/ 该类/ 身份/ 人员/ 的/ 一般/ 运动/ 轨迹/ ,/ 各类/ 人员/ 的/ 运动/ 轨迹/ 差异/ 也/ 较大/ ,/ 适合/ 进行/ 基于/ 路径/ 相似/ 度/ 的/ 分簇/ 算法/ ./ 当/ 进行/ 实验/ 时/ 分别/ 从/ 4/ 组/ 人群/ 中/ 各/ 抽取/ 6/ 、/ 8/ 、/ 10/ 、/ 12/ 、/ 14/ 个人/ ,/ 组成/ 节点/ 总数/ 为/ 24/ 、/ 32/ 、/ 40/ 、/ 48/ 、/ 56/ 的/ 实验/ 环境/ ./ 为了/ 防止/ 时间/ 粒度/ 过细/ 而/ 导致/ 实验/ 计算/ 量过大/ ,/ 也/ 为了/ 避免/ 时间/ 粒度/ 过/ 粗/ 致使/ 错过/ 了/ 一些/ 节点/ 间/ 的/ 信息/ 统计/ ,/ 导致/ 算法/ 精度/ 降低/ ,/ 本文/ 采用/ 60s/ 为/ 一个/ 时间/ 单元/ ./ 实验/ 部分/ 依据/ 统计/ 得到/ 的/ 节点/ 运动/ 周期/ 将/ 热启动/ 阶段/ 设置/ 为/ 9000s/ ,/ 每个/ 节点/ K/ 在/ 该/ 阶段/ 统计/ 其他/ 节点/ 的/ 移动/ 路径/ 信息/ ,/ 运用/ 分簇/ 方法/ 得到/ 所有/ 节点/ 的/ 分簇/ 结果/ ,/ 同时/ 统计/ P/ (/ i/ ,/ j/ ,/ k/ )/ ,/ G/ (/ i/ ,/ j/ ,/ t/ ,/ k/ )/ 和/ G/ (/ i/ ,/ t/ ,/ k/ )/ ./ 热启动/ 阶段/ 结束/ 之后/ ,/ 进入/ 路由/ 阶段/ ,/ 应用/ CRSMP/ 路由/ 方法/ 仿真/ 18000s/ ,/ 在/ 路由/ 阶段/ 的/ 最后/ 9000s/ 进入/ 第/ 2/ 个/ 热启动/ 阶段/ ./ 由于/ 本文/ 实验/ 条件/ 有限/ ,/ 只/ 仿真/ 了/ 一个/ 热启动/ 阶段/ 和/ 一个/ 路由/ 阶段/ ,/ 但/ 已经/ 能够/ 说明/ CRSMP/ 路由/ 算法/ 的/ 性能/ ./ 实验/ 参数/ 的/ 详细/ 配置/ 如表/ 3/ ./ 仿真/ 区域/ 大小/ 节点/ 移动/ 速度/ 消息/ 产生/ 时间/ 间隔/ 半/ 马尔可夫/ 预测/ 时间/ 窗口/ Qt/ 相遇/ 概率/ 预测/ 时间/ 窗口/ Ct/ 本文/ 从/ 以下/ 3/ 方面/ 评估/ CRSMP/ 协议/ 性能/ :/ (/ 1/ )/ 投递/ 成功率/ =/ 成功/ 投递/ 到/ 目的/ 节点/ 的/ 报文/ 数量/ // 网络/ 中/ 产生/ 的/ 报文/ 总数/ ;/ (/ 2/ )/ 平均/ 时延/ =/ 消息/ 到达/ 目的/ 节点/ 的/ 平均/ 时间/ ;/ (/ 3/ )/ 负载/ 比率/ (/ 开销/ 比/ )/ =/ (/ 利用/ 连接/ 成功/ 传递/ 包/ 的/ 次数/ -/ 传递/ 到/ 目的/ 节点/ 的/ 包/ 的/ 个数/ )/ // 传递/ 到/ 目的/ 节点/ 的/ 包/ 的/ 个数/ ./ 6.2/ 仿真/ 结果/ 分析/ 为了/ 全面/ 验证/ CRSMP/ 的/ 路由/ 性能/ ,/ 本文/ 针对/ 投递/ 成功率/ 、/ 平均/ 时延/ 和/ 负载/ 比率/ 3/ 个/ 标准/ 来/ 评估/ CRSMP/ 路由/ 方法/ ./ 前/ 两个/ 标准/ 比较/ 容易/ 理解/ ,/ 负载/ 比率/ 又/ 叫/ 开销/ 比/ ,/ 能/ 反映/ 连接/ 的/ 使用/ 效率/ ,/ 负载/ 比率/ 高/ 说明/ 更/ 多/ 的/ 连接/ 用来/ 传递/ 的/ 数据包/ 都/ 没能/ 成功/ 传递/ 到/ 目的/ 节点/ ,/ 连接/ 的/ 使用/ 效用/ 较/ 低/ ,/ 负载/ 比率/ 低/ 反而/ 说明/ 连接/ 的/ 有效/ 使用率/ 高/ ./ 本文/ 考虑/ 到/ 以下/ 几个/ 因素/ 最有/ 可能/ 影响/ 路由/ 算法/ 的/ 性能/ :/ 节点/ 总数/ 、/ 报文/ 产生/ 速率/ 以及/ 节点/ 缓存/ 大小/ ./ 由于/ CRSMP/ 为单/ 副本/ 路由/ 方法/ ,/ 因此/ 考虑/ 与/ 另外/ 3/ 种单/ 副本/ 路由/ 协议/ (/ DirectDelivery/ ,/ FirstContact/ ,/ SimBet/ )/ 以及/ 3/ 种多/ 副本/ 路由/ 方法/ (/ SprayandWait/ ,/ Epidemic/ ,/ Prophet/ )/ 进行/ 比较/ ,/ 从而/ 说明/ CRSMP/ 的/ 路由/ 性能/ ./ 在/ 仿真/ 中/ 依据/ SprayandWait/ 路由/ 算法/ 初始/ 副本/ 数/ 的/ 不同/ ,/ 又/ 分为/ 4/ 、/ 6/ 、/ 8/ 这/ 3/ 种/ 情况/ ./ 考虑/ 到/ 在/ 相对/ 比/ 的/ 路由/ 方法/ 中/ DirectDelivery/ ,/ FirstContact/ ,/ Epidemic/ ,/ SprayandWait/ 和/ Prophet/ 这/ 5/ 种/ 大家/ 都/ 比较/ 熟悉/ ,/ 因此/ 着重/ 对/ SimBet/ 路由/ 方法/ 进行/ 介绍/ ./ SimBet/ 是/ 一种/ 考虑/ 节点/ 社会/ 属性/ 的/ 单/ 副本/ 路由/ 方法/ ,/ 将/ 节点/ 间/ 的/ 共同/ 邻居/ 数/ 定义/ 为/ 相似性/ (/ Sim/ 效用/ )/ ,/ 将/ 自身/ 对/ 其他/ 节点/ 间连接/ 的/ 帮助/ 程度/ 定义/ 为/ 中介/ 中心/ 性/ (/ Bet/ 效用/ )/ ,/ 依据/ 这/ 两个/ 效用/ 值/ 计算/ 出/ 节点/ 对于/ SimBet/ 路由/ 方法/ 的/ 效用/ 值/ (/ SimBetUtil/ )/ ,/ 依据/ SimBetUtil/ 的/ 大小/ 进行/ 报文/ 的/ 路由/ 决策/ ./ 例如/ 节点/ a/ 有/ 消息/ 要/ 转发给/ 节点/ d/ ,/ 当/ a/ 与/ b/ 相遇/ 时/ ,/ 通过/ 式/ (/ 12/ )/ 、/ (/ 13/ )/ 和/ 式/ (/ 14/ )/ 计算/ a/ 的/ SimBet/ 效用/ 值/ ,/ 节点/ b/ 同理/ ./ SimBetUtila/ (/ d/ )/ =/ α/ SimUtila/ (/ d/ )/ +/ β/ BetUtila/ (/ 14/ )/ 式/ (/ 14/ )/ 中/ α/ 和/ β/ 为/ 两个/ 可调/ 参数/ ,/ 满足/ α/ +/ β/ =/ 1/ ,/ 为了/ 确定/ 本文/ 实验/ 场景/ 中/ 的/ α/ 和/ β/ 的/ 取值/ ,/ 首先/ 在/ 默认/ 配置/ 下/ (/ 节点/ 总数/ 40/ ,/ 报文/ 产生/ 速率/ 为/ 每/ 25/ ~/ 35sPage11/ 产生/ 一个/ ,/ 缓存/ 大小/ 10M/ )/ 测试/ 了/ 不同/ α/ 下/ SimBet/ 的/ 投递/ 成功率/ (/ 图/ 10/ )/ ./ 从图/ 10/ 中/ 可以/ 看出/ 随着/ α/ 的/ 增加/ ,/ 投递/ 成功率/ 也/ 在/ 增加/ ,/ 分析/ 其/ 原因/ ,/ 主要/ 是/ 小/ 缓存/ 下/ (/ 10M/ )/ SimBet/ 路由/ 方法/ 依据/ 中介/ 中心/ 性/ 进行/ 路由/ 有/ 可能/ 导致/ 一些/ 节点/ (/ Bet/ 效用/ 值较/ 高/ )/ 迅速/ 发生/ 缓存/ 溢出/ ,/ 导致/ 投递/ 率/ 的/ 下降/ ,/ 因此/ β/ 取值/ 越小/ ,/ 投递/ 效果/ 越好/ ./ 在/ 接下来/ 的/ 实验/ 中将/ α/ 值/ 设置/ 为/ 0.9/ ,/ β/ 值/ 设置/ 为/ 0.1/ ./ 为了/ 确定/ 半/ 马尔可夫/ 预测/ 时间/ 窗口/ Qt/ 对/ CRSMP/ 的/ 影响/ ,/ 在/ 默认/ 配置/ 下/ ,/ 将/ 相遇/ 概率/ 预测/ 时间/ 窗口/ Ct/ 设置/ 为/ 1800s/ ,/ 将/ Qt/ 分别/ 设置/ 为/ 60/ 、/ 70/ 、/ 80/ 、/ 90/ 个/ 时间/ 单元/ ,/ 测试/ 了/ 路由/ 算法/ 的/ 投递/ 成功率/ ./ 从图/ 11/ 中/ 的/ 数据/ 可以/ 看出/ 不同/ 的/ Qt/ 对/ 路由/ 性能/ 影响/ 不/ 大/ ,/ 但/ 当/ Qt/ 取值/ 小于/ 60/ 个/ 时间/ 单元/ 的/ 时候/ 程序/ 抛出/ 数组/ 越界/ 的/ 异常/ ,/ 说明/ 统计/ G/ (/ i/ ,/ j/ ,/ t/ ,/ k/ )/ 时/ 一些/ 转移/ 时间/ 超出/ 了/ 预测/ 时间/ 窗口/ ,/ 这样/ 会/ 产生/ 很大/ 误差/ ,/ 因此/ 在/ 实验/ 环境/ 中/ 设置/ Qt/ 为/ 60/ 个/ 时间/ 单元/ ,/ 即/ 3600s/ ./ 为了/ 确定/ 相遇/ 概率/ 预测/ 时间/ 窗口/ Ct/ 对/ CRSMP/ 的/ 影响/ ,/ 其他/ 设置/ 不变/ ,/ 将/ Qt/ 设置/ 为/ 60/ 个/ 时间/ 单元/ ,/ 对/ 不同/ Ct/ 下/ CRSMP/ 的/ 投递/ 成功率/ 进行/ 了/ 测试/ ,/ 从图/ 12/ 中/ 的/ 数据/ 可以/ 看出/ ,/ Ct/ 取值/ 1800s/ 时/ 投递/ 概率/ 最高/ ,/ 因此/ 仿真/ 环境/ 将/ Ct/ 设置/ 为/ 1800s/ ./ 在/ 仿真/ 环境/ 中/ 确定/ 了/ SimBet/ 路由/ 算法/ 的/ 参数/ 取值/ 以及/ CRSMP/ 的/ Qt/ 和/ Ct/ 取值/ 后/ ,/ 首先/ 测试/ 不同/ 的/ 节点/ 总数/ 对/ 路由/ 算法/ 的/ 影响/ ,/ 报文/ 产生/ 速率/ 设置/ 为/ 每/ 25/ ~/ 35s/ 产生/ 一个/ ,/ 节点/ 缓存/ 大小/ 设置/ 为/ 10M/ ,/ 总/ 节点/ 数/ 依次/ 为/ 24/ 、/ 32/ 、/ 40/ 、/ 48/ 、/ 56/ ,/ 得到/ 投递/ 成功率/ (/ 图/ 13/ )/ 、/ 平均/ 时延/ (/ 图/ 14/ )/ 和/ 负载/ 比率/ (/ 图/ 15/ )/ ./ 从图/ 13/ 中/ 的/ 数据/ 可以/ 看出/ CRSMP/ 在/ 相同/ 的/ 实验/ 条件/ 下/ 有着/ 很/ 高/ 的/ 投递/ 概率/ ,/ 平均/ 在/ 0.82/ 左/ Page12/ 右/ ,/ 远高于/ 相同/ 条件/ 下/ 的/ 其他/ 路由/ 方法/ ./ 由于/ Sim/ -/ Bet/ 路由/ 方法/ 一直/ 将/ 报文/ 转发给/ 相似性/ (/ Sim/ 效用/ )/ 和/ 中介/ 中心/ 性/ (/ Bet/ 效用/ )/ 较/ 高/ 的/ 节点/ ,/ 导致/ 大量/ 报文/ 都/ 流向/ 了/ 连接/ 度高/ 的/ 节点/ ,/ 致使/ 节点/ 负载/ 不/ 均衡/ ./ 据/ 文献/ [/ 30/ ]/ 统计/ ,/ SimBet/ 路由/ 方法/ 中/ 10/ %/ 的/ 节点/ 承担/ 了/ 54/ %/ 的/ 报文/ 转发/ 和/ 85/ %/ 的/ 报文/ 递交/ 任务/ ,/ 而/ 这/ 10/ %/ 的/ 节点/ 在/ 10M/ 的/ 缓存/ 下/ 不足以/ 承担/ 如此/ 庞大/ 的/ 报文/ 数量/ ,/ 进而/ 丢弃/ 大量/ 报文/ ,/ 导致/ 投递/ 成功率/ 较/ 低/ ./ Prophet/ 的/ 投递/ 成功率/ 低于/ SimBet/ 路由/ 方法/ ,/ 说明/ 在/ 节点/ 具有/ 社会/ 属性/ 的/ 网络/ 环境/ 下/ ,/ 单纯/ 依靠/ 相遇/ 概率/ 来/ 指导/ 报文/ 转发/ 的/ 路由/ 方法/ 并/ 不/ 适用/ ./ 在/ 10M/ 缓存/ 下/ Epidemic/ 的/ 投递/ 成功率/ 很/ 低/ ,/ 主要/ 是因为/ 网络/ 中/ 发生/ 了/ 大量/ 拥塞/ 现象/ ,/ 导致/ 报文/ 无法/ 成功/ 投递/ ,/ 丢/ 包率/ 很/ 高/ ./ 在/ 图/ 14/ 中/ CRSMP/ 并/ 没有/ 取得/ 很/ 低/ 的/ 平均/ 时延/ ,/ 经/ 分析/ 主要/ 是因为/ ONE/ 中/ 平均/ 时延/ 定义/ 为/ 成功/ 投递/ 的/ 报文/ 所/ 经历/ 的/ 平均/ 时间/ ,/ 而/ 除了/ CRSMP/ 以外/ 的/ 路由/ 方法/ 中/ 长/ 延时/ 的/ 报文/ 在/ 缓存/ 为/ 10M/ 的/ 情况/ 下/ 很/ 难/ 投递/ 成功/ ,/ 因此/ 平均/ 时延/ 相对/ 较/ 低/ ,/ 在/ 下面/ 的/ 实验/ 方案/ 中/ 通过/ 增加/ 缓存/ 大小/ 发现/ ,/ 其他/ 路由/ 方法/ 的/ 平均/ 时延/ 急剧/ 上升/ ,/ 而/ CRSMP/ 由于/ 是/ 单/ 副本/ 路由/ 协议/ ,/ 对/ 缓存/ 的/ 变化/ 不/ 敏感/ ,/ 平均/ 时延/ 比较稳定/ ./ SimBet/ 路由/ 方法/ 的/ 平均/ 时延/ 低于/ 其他/ 路由/ 方法/ ,/ 经/ 分析/ SimBet/ 始终/ 选择/ SimBetUtil/ 更/ 高/ 的/ 节点/ 作为/ 报文/ 的/ 下/ 一/ 跳/ 中继/ ,/ 而/ SimBetUtil/ 高/ 说明/ 该/ 节点/ 与/ 目的/ 节点/ 的/ 相似性/ 和/ 自身/ 的/ 中介/ 中心/ 性较/ 高/ ,/ 这/ 两种/ 性质/ 可以/ 加快/ 报文/ 递交/ 给/ 目的/ 节点/ 的/ 速度/ ,/ 因此/ SimBet/ 路由/ 方法/ 的/ 平均/ 时延/ 最低/ ./ 在/ 图/ 15/ 中/ CRSMP/ 有着/ 与/ 4/ 副本/ 的/ SprayandWait/ 路由/ 方法/ 差不多/ 的/ 负载/ 比率/ ,/ 明显/ 低于/ 其他/ 几种/ 路由/ 方法/ ./ SimBet/ 路由/ 方法/ 的/ 负载/ 比率/ 仅仅/ 低于/ Epidemic/ 和/ Prophet/ ,/ 而/ 高于/ 其他/ 路由/ 方法/ ,/ 这/ 主要/ 是因为/ SimBet/ 路由/ 方法/ 下/ 报文/ 往往/ 需要/ 经过/ 多/ 跳/ 中继/ 节点/ 才能/ 到达/ 连接/ 度/ 较大/ 的/ 节点/ ,/ 然后/ 很/ 有/ 可能/ 在/ 连接/ 度/ 较大/ 的/ 节点/ 上/ 被/ 丢弃/ (/ 连接/ 度/ 较大/ 的/ 节点/ 上/ 缓存/ 发生/ 溢出/ )/ ,/ 而/ 这些/ 丢弃/ 的/ 报文/ 只/ 增加/ 了/ 转发/ 数据包/ 的/ 次数/ ,/ 并/ 不/ 增加/ 成功/ 投递/ 到/ 目的/ 节点/ 的/ 报文/ 数/ ,/ 因而/ SimBet/ 路由/ 方法/ 的/ 负载/ 比率/ 较/ 高/ ./ DirectDeliveryRouter/ 的/ 负载/ 比率/ 一直/ 为/ 0/ ,/ 是因为/ 其/ 路由/ 方式/ 决定/ 了/ 其/ 利用/ 连接/ 成功/ 传递/ 包/ 的/ 次数/ 等于/ 传递/ 到/ 目的/ 节点/ 的/ 包/ 的/ 个数/ ./ 完成/ 不同/ 的/ 节点/ 总数/ 下/ 路由/ 算法/ 的/ 测试/ 后/ ,/ 本文/ 仿真/ 了/ 不同/ 的/ 报文/ 产生/ 速率/ 下/ 路由/ 算法/ 的/ 性能/ ./ 将/ 节点/ 总数/ 设置/ 为/ 40/ ,/ 节点/ 缓存/ 大小/ 设置/ 为/ 10M/ ,/ 在/ 不同/ 的/ 报文/ 生成/ 速率/ 下/ ,/ 得到/ 路由/ 方法/ 的/ 投递/ 成功率/ (/ 图/ 16/ )/ 、/ 平均/ 时延/ (/ 图/ 17/ )/ 和/ 负载/ 比率/ (/ 图/ 18/ )/ ./ 从图/ 16/ 中/ 的/ 数据分析/ 得出/ ,/ 在/ 不同/ 的/ 报文/ 产生/ 速率/ 下/ ,/ CRSMP/ 保持/ 较/ 高/ 的/ 投递/ 成功率/ ,/ 当/ 报文/ 产生/ 速度/ 很快/ 时/ ,/ CRSMP/ 投递/ 概率/ 呈现/ 稍许/ 下降/ 趋势/ ,/ 因为/ 过多/ 的/ 报文/ 也/ 导致/ 了/ 一部分/ 拥塞/ 的/ 发生/ ,/ 影响/ 了/ CRSMP/ 的/ 投递/ 成功率/ ,/ 但/ 总体/ 来说/ 远高于/ 其他/ 路由/ 方法/ ./ 图/ 17/ 中/ 的/ 数据/ 显示/ CRSMP/ 的/ 平均/ 时延/ 很/ 稳定/ ,/ 没有/ 大幅度/ 波动/ ,/ 并且/ 随着/ 缓存/ 的/ 增加/ ,/ 平均/ 时延/ 少于/ 另外/ 两种/ 单/ 副本/ 路由/ 方法/ (/ Direct/ -/ Delivery/ ,/ FirstContact/ )/ ./ 图/ 18/ 中/ 的/ 数据/ 与/ 图/ 15/ 中/ 的/ 数据/ 非常/ 相似/ ,/ 在/ 此/ 不再/ 赘述/ ./ 接下来/ 本文/ 仿真/ 了/ 不同/ 的/ 缓存/ 大小/ 对/ 路由/ 性能/ 的/ 影响/ ,/ 同样/ 将/ 节点/ 总数/ 设置/ 为/ 40/ ,/ 报文/ 的/ 产生/ 速率/ 为/ 每/ 25/ ~/ 35s/ 产生/ 一个/ ,/ 在/ 不同/ 的/ 缓存/ 大小/ 下/ 得到/ 不同/ 路由/ 方法/ 的/ 投递/ 成功率/ (/ 图/ 19/ )/ 、/ 平均/ 时延/ (/ 图/ 20/ )/ 和/ 负载/ 比率/ (/ 图/ 21/ )/ ./ Page13/ 从图/ 19/ 中/ 的/ 数据/ 可以/ 看出/ ,/ CRSMP/ 对/ 缓存/ 要求/ 非常低/ ,/ 在/ 5M/ 的/ 节点/ 缓存/ 下/ 就/ 已经/ 到达/ 0.8/ 左右/ 的/ 投递/ 概率/ ,/ 从/ 某种意义/ 上/ 讲/ 该/ 路由/ 方法/ 节省/ 了/ 大量/ 网络资源/ ,/ 这/ 主要/ 是/ 由于/ 其单/ 副本/ 特性/ 所致/ ./ SimBet/ 路由/ 方法/ 随着/ 缓存/ 增加/ 投递/ 率/ 明显/ 提升/ ,/ 验证/ 了/ 本文/ 之前/ 的/ 论述/ :/ 小/ 缓存/ 下/ 连接/ 度/ 较大/ 的/ 节点/ 负载/ 过高/ ,/ 缓存/ 发生/ 溢出/ ,/ 导致/ 投递/ 成功率/ 下降/ ./ 在/ 图/ 20/ 的/ 数据/ 中/ 发现/ 当/ 缓存/ 增大/ 时/ CRSMP/ 渐渐/ 表现/ 出/ 了/ 平均/ 时延/ 方面/ 的/ 优势/ ,/ 之前/ 的/ 分析/ 得到/ 了/ 验证/ ./ 从图/ 21/ 中/ 的/ 数据/ 可以/ 看出/ Epidemic/ 的/ 负载/ 比率/ 一直/ 是/ 最高/ 的/ ,/ 而/ CRSMP/ 的/ 负载/ 比率/ 近似于/ 4/ 副本/ 的/ SprayandWait/ 路由/ 协议/ ,/ 性能/ 良好/ ./ Sim/ -/ Bet/ 路由/ 方法/ 的/ 负载/ 比率/ 随着/ 缓存/ 增大/ 呈现/ 下降/ 趋势/ ,/ 进一步/ 说明/ 缓存/ 的/ 增加/ 减少/ 了/ 报文/ 的/ 丢弃/ ,/ 增加/ 了/ 成功/ 投递/ 到/ 目的/ 节点/ 的/ 报文/ 数/ ,/ 使/ 负载/ 比率/ 降低/ ./ 为了/ 进一步/ 验证/ CRSMP/ 在/ 平均/ 时延/ 方面/ 的/ 优势/ ,/ 本文/ 设计/ 了/ 实验/ 来/ 统计/ 大/ 缓存/ 下/ 不同/ 路由/ 方法/ 的/ 3/ 个/ 评估/ 标准/ :/ 投递/ 成功率/ (/ 图/ 22/ )/ 、/ 平均/ 时延/ (/ 图/ 23/ )/ 和/ 负载/ 比率/ (/ 图/ 24/ )/ ./ 从图/ 22/ 的/ 数据/ 看出/ 当/ 节点/ 缓存/ 近似/ 无限大/ 时/ ,/ Epdiemic/ 只能/ 达到/ 0.9/ 的/ 投递/ 成功率/ ,/ 而/ CRSMP/ 在/ 5M/ 的/ 缓存/ 下/ 就/ 已经/ 达到/ 0.8/ 以上/ 的/ 投递/ 成功率/ ,/ 进一步/ 说明/ 了/ CRSMP/ 的/ 高/ 投递/ 性/ ./ 图/ 23/ 验证/ 了/ 本文/ 的/ 分析/ ,/ 当/ 缓存/ 增大/ 到/ 一定/ 程度/ 时/ ,/ CRSMP/ 在/ 平均/ 时延/ 方面/ 表现/ 出/ 了/ 良好/ 的/ 性能/ ./ 图/ 24/ 显示/ CRSMP/ 的/ 负载/ 比率/ 在/ 大/ 缓存/ 下/ 依然/ 较/ 低/ ,/ 当/ 缓存/ 增大/ 到/ 一定/ 程度/ 时/ ,/ SimBet/ 路由/ 方法/ 的/ 负载/ 比率/ 与/ FirstContactRouter/ 相近/ ,/ 仅仅/ 高于/ CRSMP/ 和/ 其他/ 限制/ 报文/ 转发/ 次数/ 的/ 路由/ 协议/ ./ 6.3/ 真实/ 数据/ 集上/ 的/ 性能/ 评估/ 为了/ 进一步/ 验证/ CRSMP/ 的/ 路由/ 性能/ ,/ 本文/ 在/ 真实/ 的/ 数据/ 集上/ 对/ CRSMP/ 在内/ 的/ 9/ 种/ 路由/ 方法/ 进行/ 测试/ ,/ 分别/ 测试/ 了/ 不同/ 缓存/ 大小/ 和/ 不同/ 报文/ 生成/ 速率/ 下/ 这/ 9/ 种/ 路由/ 方法/ 的/ 投递/ 成功率/ 、/ 平均/ 时延/ 和/ 负载/ 比率/ ,/ 真实/ 数据/ 集上/ 的/ 测试/ 结果表明/ CRSMP/ 与/ 其他/ 路由/ 方法/ 相比/ 依然/ 有着/ 较/ 高/ 的/ 投递/ 成功率/ 、/ Page14/ 较/ 小/ 的/ 平均/ 时延/ 和/ 负载/ 比率/ ./ 本文/ 在/ 该/ 实验/ 部分/ 采用/ NCSU/ [/ 31/ ]/ 这一/ 真实/ 数据/ 集/ ,/ 该/ 数据/ 集/ 统计/ 了/ 著名/ 的/ 美国/ 北卡罗来纳州/ 立/ 大学/ (/ NorthCarolinaStateUniversity/ )/ 的/ 在校学生/ 日常行为/ 的/ GPS/ 信息/ ,/ 该/ 数据/ 集共/ 包含/ 35/ 个/ 轨迹/ 记录/ ,/ 这些/ 记录/ 均/ 以/ 天为/ 单位/ ,/ 这些/ 记录/ 的/ 行为主体/ 是/ 在/ 学校/ 中/ 随机/ 选取/ 的/ 学生/ ,/ 因此/ 这些/ 数据/ 比较/ 真实/ ,/ 具有/ 说服力/ ,/ 也/ 符合/ 本文/ 的/ 实验/ 场景/ ./ 在/ ONE/ 模拟器/ 中/ 导入/ 了/ 由/ GPS/ 信息处理/ 得到/ 的/ 平面坐标/ 轨迹/ ,/ 在/ 模拟器/ 中/ 同时/ 仿真/ 了/ 这/ 35/ 个/ 节点/ 的/ 运动/ 行为/ ,/ 依据/ 这/ 35/ 个/ 节点/ 在/ 仿真/ 时间/ 内/ 的/ 运动/ 范围/ 确定/ 了/ 15000m/ ×/ 10000m/ 的/ 地图/ 大小/ ,/ 依据/ 这些/ 节点/ 移动/ 的/ 聚集/ 程度/ 和/ 热点/ 区域/ ,/ 在/ 地图/ 中/ 定义/ 了/ 9/ 个/ 通信/ 区域/ (/ 图/ 25/ )/ ,/ 这些/ 通信/ 区域/ 均/ 为/ 半径/ 300m/ 的/ 圆/ ,/ 节点/ 间/ 能够/ 通信/ 的/ 条件/ 是/ 两个/ 节点/ 同时/ 处于/ 同一/ 通信/ 区域/ 内/ ,/ 默认/ 的/ 节点/ 缓存/ 大小/ 为/ 30M/ ,/ 报文/ 生成/ 速率/ 为/ 每/ 40/ ~/ 45s/ 产生/ 一个/ 报文/ ,/ 其他/ 参数/ 配置/ 与/ 6.1/ 节/ 的/ 表/ 3/ 相同/ ./ 首先/ 固定/ 报文/ 的/ 生成/ 速率/ 为/ 每/ 40/ ~/ 45s/ 产生/ 一个/ 报文/ ,/ 测试/ 不同/ 的/ 缓存/ 大小/ 对/ CRSMP/ 等/ 9/ 种/ 路由/ 方法/ 性能/ 的/ 影响/ ./ 将/ 缓存/ 大小/ 分别/ 设置/ 为/ 20M/ 、/ 22M/ 、/ 24M/ 、/ 26M/ 、/ 28M/ 、/ 30M/ ,/ 测得/ 9/ 种/ 路由/ 方法/ 的/ 投递/ 成功率/ (/ 图/ 26/ )/ 、/ 平均/ 时延/ (/ 图/ 27/ )/ 和/ 负载/ 比率/ (/ 图/ 28/ )/ ./ 从图/ 26/ 中/ 的/ 数据/ 可见/ ,/ 在/ 不同/ 的/ 缓存/ 大小/ 下/ ,/ CRSMP/ 路由/ 方法/ 与/ 其他/ 8/ 种/ 路由/ 方法/ 相比/ 依然/ 有着/ 最好/ 的/ 投递/ 成功率/ ,/ 并且/ 随着/ 缓存/ 大小/ 的/ 增加/ 投递/ 成功率/ 逐渐/ 上升/ ./ 从图/ 27/ 中/ 的/ 数据/ 可见/ CRSMP/ 在/ 平均/ 时延/ 方面/ 并/ 没有/ 表现/ 出/ 最好/ 的/ 性能/ ,/ 在/ 之前/ 的/ 仿真/ 实验/ 中/ 也/ 出现/ 了/ 同样/ 的/ 情况/ ,/ 在/ 6.2/ 节中/ 已经/ 解释/ 了/ 原因/ ,/ 在/ 此/ 不再/ 赘述/ ./ 图/ 28/ 中/ 的/ 数据/ 显示/ CRSMP/ 的/ 负载/ 比率/ 依旧/ 较/ 低/ ./ 接下来/ 固定/ 节点/ 缓存/ 大小/ 为/ 30M/ ,/ 测试/ 不同/ 的/ 报文/ 生成/ 速率/ 对/ CRSMP/ 等/ 9/ 种/ 路由/ 方法/ 性能/ 的/ 影响/ ./ 将/ 报文/ 生成/ 速率/ 分别/ 设置/ 为/ [/ 30/ ~/ 35/ ]/ ,/ [/ 35/ ~/ 40/ ]/ ,/ [/ 40/ ~/ 45/ ]/ ,/ [/ 45/ ~/ 50/ ]/ ,/ [/ 50/ ~/ 55/ ]/ ,/ 测得/ 9/ 种/ 路由/ 方法/ 的/ 投递/ 成功率/ (/ 图/ 29/ )/ 、/ 平均/ 时延/ (/ 图/ 30/ )/ 和/ 负载/ 比率/ (/ 图/ 31/ )/ ./ 从图/ 29/ 中/ 的/ 数据/ 可见/ ,/ 不同/ 报文/ 生成/ 速率/ 下/ ,/ CRSMP/ 的/ 投递/ 成功率/ 高于/ 其他/ 路由/ 方法/ ,/ 与/ 8/ 副本/ 的/ SprayandWait/ 相比/ 依然/ 高出/ 10/ 个/ 百分点/ 左右/ ./ 图/ 30/ 与/ 图/ 31/ 的/ 数据/ 与/ 6.2/ 节/ 仿真/ 实验/ 中/ 的/ 数据/ 相近/ ,/ 在/ 此/ 同样/ 不再/ 赘述/ ./ Page15/ 综上所述/ ,/ 基于/ 动态/ 半/ 马尔可夫/ 路径/ 搜索/ 模型/ 的/ DTN/ 分簇/ 路由/ 方法/ CRSMP/ 与/ 其他/ 路由/ 方法/ 相比/ ,/ 提高/ 了/ 投递/ 成功率/ ,/ 减小/ 了/ 网络/ 平均/ 时延/ ,/ 并且/ 在/ 一定/ 程度/ 上/ 减少/ 了/ 网络/ 负载/ ./ 7/ 总结/ 与/ 展望/ 本文/ 在/ 机会/ 网络/ 模拟器/ ONE/ 上/ 仿真/ 了/ 近似/ 真实/ 的/ 校园/ 网络/ 环境/ ,/ 设计/ 了/ 一套/ 模拟/ 校园/ 中学生/ 和/ 老师/ 行为/ 的/ 运动/ 模型/ ,/ 提出/ 了/ 基于/ 动态/ 半/ 马尔可夫/ 路径/ 搜索/ 模型/ 的/ DTN/ 分簇/ 路由/ 方法/ CRSMP/ ./ 首先/ 依据/ 仿真/ 环境/ 中/ 节点/ 间/ 的/ 路径/ 相似/ 度/ 对/ 其/ 进行/ 分簇/ ,/ 然后/ 运用/ 半/ 马尔可夫/ 预测/ 模型/ 得到/ 节点/ 间/ 未来/ 某/ 一段时间/ 内/ 的/ 最大/ 相遇/ 概率/ ,/ 以及/ 该/ 概率/ 所/ 对应/ 的/ 相遇/ 时刻/ ./ 在/ 路由/ 过程/ 中/ 依据/ 源/ 节点/ 和/ 目的/ 节点/ 所在/ 的/ 分簇/ 信息/ 确定/ 参与/ 路由/ 的/ 节点/ 集合/ ,/ 运用/ 最优/ 路径/ 搜索/ 策略/ 生成/ 与/ 时间/ 有关/ 的/ 动态/ 路由表/ ,/ 依据/ 路由表/ 信息/ 进行/ 路由/ ./ 实验/ 结果表明/ ,/ 该/ 路由/ 方法/ 与/ DirectDeliveryRouter/ ,/ FirstContactRouter/ ,/ Epidemic/ ,/ SimBetRouter/ ,/ Prophet/ 以及/ SprayandWait/ (/ 初始/ 副本/ 分别/ 为/ 4/ ,/ 6/ ,/ 8/ )/ 路由/ 协议/ 相比/ ,/ 提高/ 了/ 投递/ 成功率/ ,/ 减小/ 了/ 平均/ 时延/ ,/ 并且/ 在/ 一定/ 程度/ 上/ 也/ 减小/ 了/ 负载/ 比率/ ./ 为了/ 进一步/ 验证/ CRSMP/ 的/ 路由/ 性能/ ,/ 本文/ 在/ 真实/ 的/ 数据/ 集/ NCSU/ 上/ 对/ CRSMP/ 在内/ 的/ 9/ 种/ 路由/ 方法/ 进行/ 了/ 测试/ ,/ 实验/ 结果/ 同样/ 表明/ CRSMP/ 路由/ 方法/ 有着/ 最好/ 的/ 投递/ 成功率/ 和/ 较/ 少/ 的/ 平均/ 时延/ 以及/ 负载/ 比率/ ./ 

