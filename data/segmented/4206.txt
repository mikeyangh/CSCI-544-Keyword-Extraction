Page1/ 基于/ 效用/ 最优化/ 的/ 多路径/ 网络资源/ 公平/ 分配/ 李世勇/ 1/ )/ ,/ 2/ )/ 宋飞/ 2/ )/ 孙微/ 1/ )/ 张宏科/ 2/ )/ 1/ )/ (/ 燕山大学/ 经济/ 管理/ 学院/ 河北/ 秦皇岛/ 066004/ )/ 2/ )/ (/ 北京/ 交通/ 大学/ 电子信息/ 工程学院/ 北京/ 100044/ )/ 摘要/ 网络资源/ 最优/ 分配/ 除了/ 要/ 提高/ 资源/ 的/ 利用率/ 外/ ,/ 还/ 应该/ 实现/ 面向/ 服务/ 、/ 以/ 用户/ 为/ 中心/ 的/ 资源分配/ 目标/ ,/ 从而/ 达到/ 网络资源/ 的/ 公平/ 分配/ ,/ 最大/ 程度/ 的/ 满足用户/ 的/ 满意度/ ./ 为了/ 实现/ 上述/ 分配/ 目标/ ,/ 文中/ 考虑/ 了/ 多路径/ 网络/ 的/ 资源/ 公平/ 分配/ 问题/ ,/ 将/ 多路径/ 网络/ 效用/ 最大化/ 模型/ 分解/ 为/ 3/ 个/ 独立/ 的/ 子/ 问题/ ,/ 而/ 每个/ 子/ 问题/ 其实/ 对应/ 于/ 互联网/ 体系结构/ 的/ 一层/ ,/ 并/ 阐述/ 了/ 各个/ 子/ 问题/ 的/ 经济学/ 含义/ ./ 分析/ 了/ 用户/ 所/ 支付/ 的/ 价格/ 和/ 路径/ 所/ 收取/ 的/ 价格/ 之间/ 的/ 关系/ ,/ 并/ 提出/ 了/ 一类/ 流量/ 控制算法/ ,/ 通过/ 该/ 算法/ 可以/ 得到/ 网络资源/ 的/ 最优/ 公平/ 分配/ ./ 同时/ ,/ 考虑/ 了/ 算法/ 在/ 实际/ 网络/ 中/ 的/ 具体/ 实现/ ,/ 并/ 提出/ 了/ 基于/ 窗口/ 的/ 流量/ 控制/ 机制/ ./ 关键词/ 多路径/ 网络/ ;/ 资源分配/ ;/ 公平性/ ;/ 流量/ 控制/ ;/ 效用/ 1/ 引言/ 近年来/ ,/ 伴随/ 着/ 互联网/ 规模/ 的/ 迅猛发展/ 、/ 业务/ 的/ 爆炸式/ 增长/ ,/ 网络/ 正/ 呈现出/ 服务/ 形式/ 多样化/ 、/ 资源/ 分布/ 化/ 和/ 应用/ 商业化/ 等/ 特点/ [/ 1/ ]/ ./ 而/ 用户/ 若/ 利用/ 多路径/ 传输/ 协议/ (/ 如/ MP/ -/ TCP/ [/ 2/ ]/ 、/ SCTP/ [/ 3/ ]/ 、/ CMT/ [/ 4/ ]/ 等/ )/ ,/ 就/ 可以/ 通过/ 多条/ 路径/ 同时/ 传输数据/ ,/ 数据/ 流量/ 更会/ 呈现/ 前所未有/ 的/ 迅猛/ 增长/ ,/ 由此/ 如何/ 以/ 一定/ 的/ 评价/ 指标/ 有效/ 地/ 实现/ 网络资源/ 的/ 分配/ 就/ 显得/ 尤为重要/ ./ 针对/ 网络资源/ 分配/ 的/ 目标/ ,/ 从/ 网络/ 的/ 角度/ 考虑/ ,/ 通常/ 以/ 系统/ 吞吐量/ 、/ 链路/ 利用率/ 等/ 作为/ 网络系统/ 的/ 优化/ 指标/ ,/ 其/ 核心思想/ 是/ 实现/ 网络资源/ 最大/ 程度/ 的/ 利用/ ,/ 体现/ 了/ 资源分配/ 的/ 效率/ ,/ 可以/ 认为/ 是/ 以/ 网络/ 为/ 中心/ 的/ 资源分配/ 目标/ ./ 但/ 从/ 用户/ 角度/ 考虑/ ,/ 目的/ 是/ 在/ 保证/ 一定/ 公平性/ 的/ 基础/ 上/ 利用/ 网络资源/ 传输数据/ ,/ 完成/ 用户/ 所/ 需要/ 的/ 服务/ ,/ 从而/ 满足/ 其/ 通信/ 和/ 获取信息/ 等/ 方面/ 的/ 实际/ 需求/ ,/ 可以/ 认为/ 是/ 以/ 用户/ 为/ 中心/ 的/ 资源分配/ 目标/ ./ 效用/ 就/ 是从/ 用户/ 的/ 角度/ 描述/ 了/ 所/ 获得/ 服务/ 的/ 实际效果/ 或/ 用户/ 的/ 满意度/ ,/ 而/ 基于/ 网络/ 效用/ 最大化/ 的/ 资源/ 公平/ 分配/ 不仅/ 体现/ 了/ 资源分配/ 效率/ 的/ 要求/ ,/ 还/ 同时/ 实现/ 了/ 资源/ 在/ 用户/ 之间/ 公平/ 分配/ 的/ 目标/ ./ 多路径/ 网络/ 的/ 资源/ 公平/ 分配/ 已经/ 得到/ 广大/ 学者/ 的/ 重视/ ,/ 但是/ 现有/ 的/ 研究成果/ 主要/ 从/ 网络流量/ 工程/ 的/ 角度/ 考虑/ 了/ 流量/ 控制/ ,/ 而/ 基于/ 效用/ 最优化/ 的/ 思想/ 分析/ 资源/ 公平/ 分配/ 成果/ 也/ 较/ 少/ ,/ 并且/ 基本/ 都/ 着重于/ 求解/ 资源分配/ 模型/ 的/ 唯一/ 最优/ 解/ ,/ 并/ 没有/ 从/ 互联网/ 体系/ 的/ 角度/ 分析/ 多路径/ 网络/ 效用/ 最大化/ 模型/ 与/ 网络/ 各层/ 的/ 关系/ ,/ 也/ 没有/ 探讨/ 在/ 资源分配/ 中/ 面向/ 服务/ 、/ 以/ 用户/ 为/ 中心/ 的/ 资源分配/ 目标/ 所/ 蕴含/ 的/ 深层次/ 的/ 经济学/ 意义/ ./ 本文/ 分解/ 了/ 多路径/ 网络/ 效用/ 最大化/ 模型/ ,/ 得到/ 了/ 该/ 模型/ 所/ 对应/ 的/ 3/ 个子/ 问题/ ,/ 指出/ 了/ 网络/ 各层/ 所/ 对应/ 的/ 经济学/ 目标/ ,/ 分析/ 了/ 用户/ 支付/ 的/ 价格/ 和/ 路径/ 收取/ 的/ 价格/ 之间/ 的/ 博弈/ 关系/ ,/ 并/ 利用/ 这/ 两类/ 价格/ 设计/ 了/ 一类/ 新/ 的/ 流量/ 控制算法/ ,/ 而且/ 考虑/ 了/ 在/ 网络/ 中/ 的/ 具体/ 实现/ ,/ 提出/ 了/ 基于/ 窗口/ 的/ 流量/ 控制算法/ ,/ 为/ 深入研究/ 多路径/ 网络资源/ 分配/ 问题/ 提供/ 了/ 新/ 的/ 理论/ 方法/ ./ 2/ 相关/ 工作/ 针对/ 网络/ 中/ 的/ 资源分配/ 问题/ ,/ 文献/ [/ 5/ ]/ 首次/ 提出/ 了/ 网络/ 效用/ 最大化/ 模型/ ,/ 通过/ 选取/ 对数/ 型/ 的/ 效用函数/ 实现/ 了/ 网络资源/ 在/ 用户/ 之间/ 分配/ 的/ 比例/ 公平性/ (/ proportionalfairness/ )/ ,/ 并/ 提出/ 了/ 一类/ 流量/ 控制算法/ 来/ 实现/ 该/ 最优/ 资源分配/ ./ 而/ 文献/ [/ 6/ ]/ 分析/ 了/ 资源/ 公平/ 分配/ 问题/ 的/ 对偶/ 问题/ ,/ 通过/ 提出/ 的/ 一类/ 价格/ 算法/ 得到/ 了/ 对偶/ 问题/ 的/ 最优/ 解/ ./ 随后/ ,/ 文献/ [/ 7/ ]/ 继续/ 讨论/ 了/ 资源分配/ 的/ 公平性/ ,/ 分析/ 了/ 具有/ 时延/ 的/ 流量/ 控制算法/ 的/ 稳定性/ ./ 文献/ [/ 8/ -/ 9/ ]/ 讨论/ 了/ 网络资源/ 分配/ 的/ 最大/ 最小/ 公平性/ (/ max/ -/ minfairness/ )/ [/ 10/ ]/ ,/ 提出/ 了/ 一类/ 指数/ 型/ 效用函数/ 来/ 逐步/ 逼近/ 最大/ 最小/ 公平/ 分配/ ,/ 并/ 在/ 文献/ [/ 9/ ]/ 中/ 实现/ 了/ 具有/ 一定/ 权重/ 的/ 最大/ 最小/ 公平性/ ./ 利用网络/ 效用/ 最大化/ 的/ 思想/ ,/ 文献/ [/ 11/ ]/ 分析/ 了/ TCP/ // IP/ 跨层/ 优化/ 问题/ ,/ 当/ 路由/ 是/ 动态变化/ 时/ ,/ 指出/ 了/ 资源分配/ 的/ 平衡点/ 与/ 路由/ 之间/ 的/ 关系/ ./ 而/ 文献/ [/ 12/ ]/ 分析/ 了/ 具有/ 异构/ 拥塞/ 控制协议/ 的/ 网络/ ,/ 讨论/ 了/ 此/ 情形/ 下/ 网络资源/ 分配/ 的/ 平衡点/ ,/ 并/ 在/ 文献/ [/ 13/ ]/ 中/ 指出/ 平衡点/ 是/ 不/ 稳定/ 的/ ./ 文献/ [/ 14/ ]/ 分析/ 了/ 自/ 适应/ 动态/ 路由/ 情形/ 下/ 的/ 网络资源/ 分配/ 问题/ ,/ 并/ 讨论/ 了/ 此时/ 流量/ 控制算法/ 的/ 最优/ 解/ 和/ 稳定性/ ./ 文献/ [/ 15/ ]/ 分析/ 了/ XCP/ 协议/ 的/ 平衡点/ 和/ 公平性/ ,/ 得到/ 了/ 一种/ 最大/ 最小/ 公平/ 的/ 最优/ 资源分配/ ./ 文献/ [/ 16/ ]/ 讨论/ 了/ 弹性/ 服务/ 和/ 非/ 弹性/ 服务/ 的/ 资源分配/ 模型/ ,/ 分析/ 了/ 流量/ 控制算法/ 以及/ 公平性/ 问题/ ./ 文献/ [/ 17/ -/ 19/ ]/ 对单/ 路径/ 网络资源/ 分配/ 问题/ 进行/ 了/ 综述/ ,/ 系统/ 的/ 给出/ 了/ 网络/ 效用/ 最大化/ 模型/ 的/ 分解/ 方法/ ,/ 指出/ 了/ 互联网/ 跨层/ 优化/ 与/ 资源分配/ 问题/ 之间/ 的/ 关系/ ./ 同时/ ,/ 文献/ [/ 20/ ]/ 对/ 互联网/ 体系结构/ 评估/ 模型/ 、/ 机制/ 及/ 方法/ 进行/ 了/ 综述/ ,/ 重点/ 讨论/ 了/ 效用/ 优化/ 机制/ 在/ 评估/ 模型/ 中/ 的/ 应用/ ./ 而/ 文献/ [/ 21/ ]/ 从/ 服务质量/ 的/ 角度/ 对单/ 路径/ 网络/ 的/ 优化/ 模型/ 进行/ 了/ 综述/ ,/ 指出/ 基于/ 优化/ 方法/ 的/ 机制/ 设计/ 与/ 性能/ 评价/ 成为/ 了/ 当前/ 网络/ 服务质量/ 领域/ 中/ 的/ 一个/ 前沿/ 研究/ 领/ ,/ 并/ 对/ 资源分配/ 中/ 的/ 优化/ 问题/ 进行/ 阐述/ ./ 当/ 网络/ 中/ 各/ 用户/ 采用/ 多路径/ 协议/ 实现/ 数据传输/ 时/ ,/ 在/ 通信/ 源端/ 和/ 目的/ 端/ 之间/ 就/ 形成/ 了/ 多条/ 可用/ 路径/ ./ 对于/ 多路径/ 网络/ 中/ 的/ 资源分配/ 问题/ ,/ 文献/ [/ 22/ ]/ 首次/ 研究/ 了/ 多路径/ 网络/ 效用/ 最大化/ 问题/ ,/ 并/ 针对/ 资源分配/ 的/ 比例/ 公平性/ 提出/ 了/ 一类/ 流量/ 控制算法/ ./ 此后/ ,/ 大多/ 文献/ 主要/ 关注/ 于/ 多路径/ 网络/ 效用/ 最大化/ 问题/ 的/ 求解/ 问题/ ,/ 文献/ [/ 23/ ]/ 设计/ 了/ 一种/ 异步/ 迭代/ 的/ 源/ -/ 链路/ 端/ 流量/ 控制算法/ ,/ 得到/ 了/ 效用/ 最大化/ 问题/ 的/ 最优/ 分配/ ./ 文献/ [/ 24/ ]/ 构造/ 了/ 新/ 的/ 目标/ 函数/ 来/ 逼近/ 原/ 问题/ 中/ 的/ 效用函数/ ,/ 并/ 设计/ 了/ 一类/ 流量/ 控制算法/ ,/ 来/ 逐步/ 逼/ Page3/ 近原/ 效用/ 最大化/ 问题/ 的/ 最优/ 解/ ./ 文献/ [/ 25/ ]/ 利用/ 了/ 罚/ 函数/ 机制/ 设计/ 了/ 一类/ 流量/ 控制算法/ ,/ 得到/ 了/ 唯一/ 的/ 最优/ 流量/ 分配/ ./ 文献/ [/ 26/ ]/ 考虑/ 了/ 由于/ 源端/ 接入/ 到/ 不同/ ISP/ 而/ 产生/ 的/ 多路径/ 网络资源/ 分配/ 问题/ ,/ 从/ ISP/ 的/ 角度/ 分析/ 了/ 如何/ 获得/ 最优/ 的/ 系统/ 效益/ (/ 即/ 网络/ 用户/ 的/ 效用/ 与/ 网络/ 代价/ 的/ 差额/ )/ ./ 文献/ [/ 27/ ]/ 仅/ 分析/ 了/ 多路径/ 网络/ 中/ 资源/ 的/ 最大/ 最小/ 公平/ 分配/ 问题/ ,/ 并/ 提出/ 了/ 一类/ 基于/ 速率/ 的/ 流量/ 控制算法/ ./ 文献/ [/ 28/ ]/ 讨论/ 了/ 多路径/ 网络/ 中/ 动态/ 主/ 路径/ 上/ 的/ 资源/ 公平/ 分配/ 问题/ ,/ 并/ 提出/ 了/ 主/ 路径/ 上/ 的/ 流量/ 控制算法/ ./ 而/ 文献/ [/ 29/ ]/ 分析/ 了/ 多路径/ 网络/ 中/ 弹性/ 服务/ 的/ 资源分配/ 问题/ ,/ 并/ 提出/ 了/ 一类/ 基于/ 速率/ 的/ 流量/ 控制算法/ ./ 由此可见/ ,/ 多路径/ 网络资源/ 最优/ 分配/ 已经/ 取得/ 了/ 一定/ 的/ 成果/ ,/ 而本/ 论文/ 则/ 从/ 网络/ 分层/ 的/ 角度/ 分析/ 了/ 最优/ 分配/ 问题/ ,/ 并/ 提出/ 了/ 分布式/ 资源分配/ 算法/ ./ 3/ 多路径/ 网络资源/ 公平/ 分配/ 模型/ 3.1/ 公平性/ 与/ 效用函数/ 网络资源/ 分配/ 的/ 一个/ 很/ 重要/ 目标/ 就是/ 实现/ 资源/ 在/ 相互竞争/ 的/ 用户/ 之间/ 公平/ 分配/ ,/ 而/ 衡量/ 资源分配/ 的/ 公平性/ 需要/ 借助于/ 公平性/ 评价/ 方法/ ,/ 这些/ 方法/ 包括/ 最大/ 最小/ 公平性/ (/ max/ -/ minfairness/ )/ 准则/ [/ 10/ ]/ 、/ 比例/ 公平性/ (/ proportionalfairness/ )/ 准则/ [/ 5/ ]/ 等/ ./ 在/ 网络资源/ 分配/ 的/ 目标/ 中/ ,/ 通过/ 选择/ 用户/ 的/ 效用函数/ ,/ 就/ 可以/ 得到/ 相应/ 的/ 资源/ 公平/ 分配/ ,/ 考虑/ 如下/ 的/ 效用函数/ [/ 7/ -/ 8/ ,/ 18/ ]/ 其中/ ,/ α/ s/ 是/ 公平性/ 指标/ ,/ 可以/ 实现/ 用户/ 间/ 的/ 多种/ 公平性/ ,/ 统一/ 了/ 资源/ 公平/ 分配/ 的/ 表达式/ ;/ ws/ 是/ 用户/ 为了/ 获得/ 资源/ 而/ 愿意/ 提供/ 的/ 支付/ ./ 将/ 该/ 效用函数/ 作为/ 用户/ 的/ 目标/ 函数/ ,/ 而/ 将/ 网络/ 中/ 所有/ 用户/ 的/ 聚合/ 效用/ 作为/ 网络/ 的/ 整体/ 目标/ ,/ 已经/ 被/ 广泛应用/ 于/ 网络资源/ 的/ 图/ 1/ 多路径/ 网络/ 示例/ 其中/ (/ a/ )/ 中/ 的/ 路径/ 是/ 节点/ 分离/ 的/ ,/ 同一/ 用户/ 的/ 各条/ 路径/ 之间/ 不/ 共享/ 任何/ 的/ 交换/ 节点/ ;/ (/ b/ )/ 中/ 的/ 路径/ 是/ 链路/ 分离/ 的/ ,/ 路径/ 之间/ 不/ 共享/ 任何/ 的/ 链路/ ,/ 但是/ 可能/ 会/ 公平/ 分配/ 中/ [/ 7/ -/ 8/ ,/ 18/ ]/ ./ wsys/ ,/ 网络/ 的/ 目标/ 为/ 当/ 选择/ α/ s/ =/ 0/ 时/ ,/ 用户/ 的/ 效用函数/ 为/ Us/ (/ ys/ )/ =/ 此时/ 式/ (/ 2/ )/ 是/ 数据传输/ 时/ 用户/ 吞吐量/ 的/ 最大化/ 问题/ ;/ 当/ 选择/ α/ s/ =/ 1/ 时/ ,/ 用户/ 的/ 效用函数/ 为/ Us/ (/ ys/ )/ =/ wslogys/ ,/ 网络/ 的/ 目标/ 为/ 此时/ 式/ (/ 3/ )/ 是/ 用户/ 之间/ 资源分配/ 的/ 比例/ 公平性/ (/ proportionalfairness/ )/ 问题/ ;/ 当/ 选择/ α/ s/ =/ 2/ 时/ ,/ 用户/ 的/ 效用函数/ 为/ Us/ (/ ys/ )/ =/ -/ ws/ // ys/ ,/ 网络/ 的/ 目标/ 为/ 或者/ 等价/ 于/ 当/ α/ s/ =/ 时/ ,/ 用户/ 的/ 效用函数/ 为/ Us/ (/ ys/ )/ =/ 此时/ 式/ (/ 4/ )/ 是/ 用户/ 之间/ 资源分配/ 的/ 调和/ 平均/ 公平性/ (/ harmonicmeanfairness/ )/ 问题/ ,/ 其实/ 式/ (/ 5/ )/ 也/ 可以/ 认为/ 是/ 用户/ 在/ 传输/ 单位/ 数据/ 时/ 的/ 通信/ 时延/ 最小化/ 问题/ ;/ lim/ α/ s/ →/ wsy1/ -/ α/ ss/ // (/ 1/ -/ α/ s/ )/ ,/ 网络/ 的/ 目标/ 为/ 其中/ ,/ ms/ 是/ 用户/ s/ 希望/ 获得/ 的/ 资源/ 阈值/ (/ 即/ ys/ / ms/ )/ ,/ 此时/ 式/ (/ 6/ )/ 是/ 用户/ 之间/ 资源分配/ 的/ 最大/ 最小/ 公平性/ (/ max/ -/ minfairness/ )/ 问题/ ,/ 即/ 优先/ 考虑/ 资源/ 需求/ 较/ 小/ 的/ 用户/ ,/ 在/ 逐个/ 满足/ 这些/ 用户/ 需要/ 的/ 基础/ 上/ ,/ 再/ 实现/ 剩余/ 资源/ 的/ 公平/ 分配/ ./ 3.2/ 资源/ 公平/ 分配/ 模型/ 考虑/ 一个/ 多路径/ 网络/ 中/ ,/ 用户/ 均/ 利用/ 多条/ 路径/ 传输数据/ ./ 这里/ ,/ 同一个/ 用户/ 使用/ 的/ 多条/ 路径/ 相互之间/ 并不一定/ 是/ 链路/ 分离/ 的/ ,/ 也就是说/ ,/ 同一个/ 用户/ 使用/ 的/ 多条/ 路径/ 相互之间/ 可能/ 会/ 共享/ 一些/ 相同/ 的/ 链路/ ./ 图/ 1/ 给出/ 了/ 3/ 种/ 多路径/ 网络拓扑/ ./ 共享/ 相同/ 的/ 交换/ 节点/ ;/ (/ c/ )/ 中/ 的/ 路径/ 是/ 链路/ 共享/ 的/ ,/ 路径/ 之间/ 共享/ 了/ 相同/ 的/ 链路/ 或/ 节点/ ./ 本文/ 研究/ 中/ ,/ 各个/ 用户/ 的/ 多条/ 路径/ 之间/ 可以/ 共享/ 相同/ 的/ 链路/ ./ Page4/ 多路径/ 网络资源/ 公平/ 分配/ 模型/ 中/ 用到/ 的/ 符号/ 及其/ 含义/ 如表/ 1/ 所示/ ./ 表/ 1/ 多路径/ 网络资源/ 公平/ 分配/ 模型/ 中/ 的/ 符号/ 及/ 含义/ 符号/ S/ 用户/ 的/ 集合/ ,/ 元素/ 是/ 各个/ 用户/ s/ ∈/ SL/ 链路/ 的/ 集合/ ,/ 元素/ 是/ 各条/ 链路/ l/ ∈/ LP/ 路径/ 的/ 集合/ ,/ 元素/ 是/ 各条/ 路径/ p/ ∈/ PS/ (/ p/ )/ 使用/ 路径/ p/ ∈/ P/ 的/ 用户/ 的/ 集合/ L/ (/ p/ )/ 路径/ p/ ∈/ P/ 的/ 所有/ 链路/ 的/ 集合/ P/ (/ s/ )/ 用户/ s/ ∈/ S/ 使用/ 的/ 路径/ 的/ 集合/ P/ (/ l/ )/ 途径/ 链路/ l/ ∈/ L/ 的/ 路径/ 的/ 集合/ Us/ (/ ·/ )/ 用户/ s/ 的/ 效用函数/ ysxspCl/ 由于/ 用户/ 利用/ 多条/ 路径/ 传输数据/ ,/ 所以/ 每个/ 用户/ s/ ∈/ S/ 的/ 总/ 传输速率/ ys/ 满足/ ys/ =/ ∑/ p/ :/ p/ ∈/ P/ (/ s/ )/ xsp/ ,/ 同时/ ,/ 由于/ 每条/ 链路/ 均/ 有/ 一定/ 的/ 带宽/ ,/ 因此/ 在/ 每条/ 链路/ 上/ 数据/ 流量/ 总和/ 不/ 应/ 超过/ 链路/ 带宽/ ,/ 满足/ 不等式/ ∑/ p/ :/ p/ ∈/ P/ (/ l/ )/ xsp/ / Cl/ ./ 因此/ ,/ 多路径/ 网络/ 的/ 资源/ 问题/ 可以/ 归结为/ 如下/ 的/ 多路径/ 网络/ 效用/ 最大化/ 问题/ P/ :/ 资源分配/ 问题/ P/ 的/ 目标/ 是/ 最大化/ 用户/ 的/ 聚合/ 效用/ ,/ 而/ 用户/ 的/ 效用/ 依赖于/ 该/ 用户/ 获得/ 的/ 总/ 的/ 资源分配/ ,/ 因此/ 问题/ P/ 是/ 关于/ 用户/ 速率/ ys/ 而/ 实现/ 的/ 资源/ 公平/ 分配/ ,/ 这/ 也/ 就/ 意味着/ 实现/ 的/ 是/ 用户/ 之间/ 的/ 公平性/ ,/ 不是/ 用户/ 的/ 各个/ 流/ 之间/ 的/ 公平性/ (/ 在/ 流/ 的/ 公平性/ 模型/ 中/ ,/ 同/ 一条/ 路由/ 上/ 的/ 各条/ 流/ 之间/ 是/ 公平/ 的/ )/ ./ 当/ 各个/ 用户/ 具有/ 效用函数/ (/ 1/ )/ 时/ ,/ 考虑/ 资源/ 公平/ 分配/ 问题/ P/ ,/ 由/ 凸/ 规划/ 理论/ [/ 30/ ]/ 可以/ 得到/ 目标/ 函数/ 关于/ 原/ 变量/ y/ =/ (/ ys/ ,/ s/ ∈/ S/ )/ 是/ 严格/ 的/ 凹/ 函数/ ,/ 而/ 关于/ 变量/ x/ =/ (/ xsp/ ,/ s/ ∈/ S/ ,/ p/ ∈/ P/ )/ 是/ 凹/ 函数/ 但/ 并/ 不是/ 严格/ 的/ 凹/ 函数/ ./ 由此/ 得到/ 下列/ 定理/ ./ 定理/ 1/ ./ 当/ 用户/ 具有/ 效用函数/ (/ 1/ )/ 时/ ,/ 多路径/ 网络资源/ 公平/ 分配/ 模型/ P/ 是/ 一个/ 凸/ 规划/ 问题/ ,/ 各/ 用户/ 在/ 路径/ 上/ 的/ 最优/ 速率/ x/ / =/ (/ x/ / sp/ ,/ s/ ∈/ S/ ,/ p/ ∈/ P/ )/ 存在/ 但/ 并/ 不/ 唯一/ ,/ 而/ 各个/ 用户/ 的/ 总/ 的/ 最优/ 速率/ y/ / =/ (/ y/ / s/ ,/ s/ ∈/ S/ )/ 存在/ 而且/ 是/ 唯一/ 的/ ./ 为了/ 得到/ 资源分配/ 模型/ P/ 的/ 最优/ 解/ ,/ 引入/ 3.3/ 模型/ 分析/ Lagrange/ 函数/ L/ (/ x/ ,/ y/ ;/ λ/ ,/ μ/ )/ =/ ∑/ s/ :/ s/ ∈/ S/ 其中/ ,/ λ/ =/ (/ λ/ s/ ,/ s/ ∈/ S/ )/ ,/ μ/ =/ (/ μ/ l/ ,/ l/ ∈/ L/ )/ 是/ Lagrange/ 乘子/ 向量/ ,/ δ/ 2/ =/ (/ δ/ 2/ 解为/ 用户/ s/ 请求/ 服务/ 时/ 支付/ 给/ 它/ 使用/ 的/ 路径/ P/ (/ s/ )/ 的/ 价格/ ,/ μ/ l/ 可以/ 理解/ 为/ 链路/ l/ 对/ 路径/ 经过/ 该/ 链路/ 的/ 用户/ 所/ 收取/ 的/ 价格/ ./ ∑/ p/ :/ p/ ∈/ P/ (/ l/ )/ xsp/ 是/ 各个/ 用户/ 已经/ 使用/ 的/ 链路/ l/ 的/ 带宽/ ,/ 而/ δ/ 2/ 余/ 带宽/ ./ L/ (/ x/ ,/ y/ ;/ λ/ ,/ μ/ )/ =/ ∑/ s/ :/ s/ ∈/ S/ 将/ Lagrange/ 函数/ (/ 8/ )/ 进行/ 变形/ 后/ ,/ 可以/ 写成/ 分析/ 上述/ Lagrange/ 函数/ (/ 9/ )/ 的/ 最大值/ 问题/ ,/ 可以/ 得到/ 下述/ 3/ 个子/ 问题/ USER/ (/ Us/ ,/ ys/ ,/ λ/ s/ )/ PATH/ (/ xsp/ ,/ λ/ s/ ,/ μ/ l/ )/ LINK/ (/ μ/ l/ )/ 际/ 含义/ :/ 可以/ 从/ 经济学/ 的/ 角度/ 给出/ 上述/ 3/ 个子/ 问题/ 的/ 实子/ 问题/ USER/ (/ Us/ ,/ ys/ ,/ λ/ s/ )/ 对应/ 网络/ 的/ 应用层/ ,/ 由于/ 网络/ 中/ 每个/ 用户/ 都/ 是/ 自私/ 的/ ,/ 都/ 想/ 使得/ 自己/ 的/ 效用/ 达到/ 最大/ ,/ 而/ 效用/ 的/ 大小/ 依赖于/ 它/ 所/ 获得/ 的/ 总/ 速率/ 大小/ ys/ ./ 同时/ ,/ 用户/ 在/ 获得/ 相应/ 带宽/ 时/ ,/ 要/ 支付/ 其/ 使用/ 该/ 带宽/ 的/ 费用/ ./ 由于/ λ/ s/ 可以/ 理解/ 为/ 用户/ 支付/ 的/ 每/ 单位/ 带宽/ 的/ 费用/ ,/ 那么/ Us/ (/ ys/ )/ -/ λ/ sys/ 就是/ 用户/ s/ 获得/ 的/ 收益/ ,/ 即/ 用户/ 获得/ 的/ 效用/ 与/ 支付/ 的/ 费用/ 之间/ 的/ 差值/ ./ 子/ 问题/ PATH/ (/ xsp/ ,/ λ/ s/ ,/ μ/ l/ )/ 对应/ 网络/ 的/ 传输层/ ,/ 将/ 用户/ 、/ 路径/ 与/ 链路/ 联系/ 起来/ ,/ 决定/ 了/ 用户/ 在/ 路径/ 上/ Page5/ 的/ 传输速率/ 和/ 价格/ ./ λ/ sxsp/ 是/ 用户/ s/ 在/ 使用/ 路径/ p/ 传输数据/ 时/ ,/ 当/ 获得/ 资源/ 为/ xsp/ 时而/ 支付/ 给/ 该/ 路径/ 的/ 费用/ ./ ∑/ l/ :/ l/ ∈/ L/ (/ p/ )/ μ/ l/ 是/ 路径/ p/ 上/ 各条/ 链路/ 价格/ 之/ 和/ ,/ 即/ 路径/ p/ 收取/ 的/ 价格/ ,/ 则/ xsp/ ∑/ l/ :/ l/ ∈/ L/ (/ p/ )/ μ/ l/ 就是/ 路径/ p/ 为/ 用户/ s/ 提供/ 带宽/ xsp/ 时/ 收取/ 的/ 费用/ ./ 后面/ 分析/ 可以/ 得到/ ,/ 在/ 多路径/ 网络资源/ 分配/ 问题/ 的/ 最/ 优点/ 满足/ λ/ s/ =/ ∑/ l/ :/ l/ ∈/ L/ (/ p/ )/ μ/ l/ ,/ 即/ 用户/ 支付/ 的/ 价格/ 与/ 路径/ 收取/ 的/ 价格/ 是/ 相等/ 的/ ./ 子/ 问题/ LINK/ (/ μ/ l/ )/ 对应/ 网络/ 的/ 网络层/ ,/ 松弛/ 因/ l/ 是/ 链路/ l/ 的/ 剩余/ 带宽/ ,/ 则/ Cl/ -/ δ/ 2/ 子/ δ/ 2/ 各个/ 用户/ 使用/ 的/ 带宽/ ./ 由于/ μ/ l/ 是/ 链路/ l/ 收取/ 的/ 每/ 单位/ 带宽/ 的/ 价格/ ,/ 因此/ μ/ l/ (/ Cl/ -/ δ/ 2/ 因此/ ,/ 应用层/ 的/ 目标/ 是/ 使得/ 用户/ 的/ 聚合/ 效用/ 达到/ 最优/ ;/ 传输层/ 的/ 目标/ 是/ 建立/ 进行/ 速率/ 控制/ ,/ 调整/ 源/ 端的/ 传输速率/ ;/ 网络层/ 的/ 目标/ 是/ 选择/ 合适/ 的/ 多条/ 路径/ 进行/ 路由/ ,/ 在/ 传输层/ 的/ 配合/ 下/ 分配/ 路径/ 带宽/ ./ 传输层/ 根据/ 应用层/ 要/ 实现/ 的/ 效用/ 目标/ 进行/ 速率/ 控制/ ,/ 在/ 网络层/ 提供/ 的/ 多条/ 路径/ 上/ 传输数据/ ,/ 通过/ 源端/ 用户/ 支付/ 的/ 价格/ λ/ s/ 和/ 路径/ 收取/ 的/ 价格/ qsp/ =/ ∑/ l/ :/ l/ ∈/ L/ (/ p/ )/ μ/ l/ 调整/ 用户/ 在/ 各个/ 可用/ 路径/ 上/ 的/ 传输速率/ ,/ 最终/ 在/ 充分利用/ 路径/ 传输/ 能力/ 的/ 前提/ 下/ ,/ 实现/ 应用层/ 的/ 聚合/ 效用/ 达到/ 最优/ ./ 多路径/ 网络资源/ 分配/ 模型/ P/ 的/ 对偶/ 问题/ 的/ 目标/ 函数/ 为/ D/ (/ λ/ ,/ μ/ )/ =/ maxx/ ,/ yL/ (/ x/ ,/ y/ ;/ λ/ ,/ μ/ )/ =/ ∑/ s/ :/ s/ ∈/ S/ 其中/ As/ (/ λ/ s/ )/ +/ ∑/ s/ :/ s/ ∈/ S/ ∑/ p/ :/ p/ ∈/ P/ (/ s/ )/ Bsp/ (/ λ/ s/ ,/ qsp/ )/ +/ ∑/ l/ :/ l/ ∈/ L/ μ/ l/ (/ Cl/ -/ δ/ 2Bsp/ (/ λ/ s/ ,/ qsp/ )/ =/ maxxsp/ 所以/ ,/ 资源分配/ 模型/ P/ 的/ 最优/ 带宽/ 分配/ 可以/ 表示/ 为/ 其中/ ,/ 式/ (/ 17/ )/ 中/ 的/ xsp/ (/ λ/ s/ )/ 与/ 式/ (/ 16/ )/ 中/ 的/ y/ / s/ (/ λ/ s/ )/ 满足/ ∑/ p/ :/ p/ ∈/ P/ (/ s/ )/ xsp/ (/ λ/ s/ )/ =/ y/ / s/ (/ λ/ s/ )/ ./ 资源分配/ 模型/ P/ 的/ 对偶/ 问题/ 为/ D/ 上述/ 的/ 对偶/ 问题/ D/ 可以/ 理解/ 为/ 网络系统/ 问题/ ,/ 目标/ 就是/ 在/ 满足/ 请求/ 服务/ 的/ 用户/ 获得/ 一定/ 满意度/ 的/ 前提/ 下/ ,/ 最小化/ 整个/ 网络系统/ 的/ 价格/ ./ 假设/ 资源分配/ 模型/ P/ 与其/ 对偶/ 问题/ D/ 的/ 最优/ 解是/ (/ x/ / ,/ y/ / ,/ μ/ / ,/ λ/ / ,/ δ/ 2/ )/ ,/ 通过/ 分析/ 用户/ 支付/ 的/ 价格/ 和/ 路径/ 收取/ 的/ 价格/ ,/ 可以/ 得到/ 下列/ 定理/ ./ 定理/ 2/ ./ 考虑/ 资源/ 公平/ 分配/ 问题/ P/ ,/ 当/ 各个/ 用户/ 具有/ (/ 1/ )/ 形式/ 的/ 效用函数/ 时/ ,/ 假设/ p1/ 和/ p2/ 分别/ 是/ 用户/ s/ 的/ 两条/ 路径/ ,/ 若/ 在/ 资源/ 公平/ 分配/ 模型/ 的/ 最/ 优点/ 处/ ,/ 该/ 两条/ 路径/ 上/ 的/ 速率/ 均/ 非/ 零/ ,/ 则/ 这/ 两条/ 路径/ 的/ 价格/ 是/ 相等/ 的/ ,/ 即/ 若/ x/ / sp1/ >/ 0/ ,/ x/ / sp2/ >/ 0/ ,/ 其中/ p1/ ,/ p2/ ∈/ P/ (/ s/ )/ ,/ 则/ ∑/ l/ :/ l/ ∈/ L/ (/ p1/ )/ μ/ / l/ =/ ∑/ l/ :/ l/ ∈/ L/ (/ p2/ )/ μ/ / l/ =/ λ/ / s/ ./ 证明/ ./ 当/ 用户/ 具有/ (/ 1/ )/ 形式/ 的/ 效用函数/ 时/ ,/ 在/ 资源分配/ 模型/ P/ 的/ 最优/ 带宽/ 分配/ 处/ ,/ 根据/ Karush/ -/ Kuhn/ -/ Tucker/ (/ KKT/ )/ 条件/ [/ 30/ ]/ ,/ 下列/ 式子/ 成立/ :/ λ/ / s/ -/ ∑/ l/ :/ l/ ∈/ L/ (/ p/ )/ μ/ / l/ =/ 0/ ,/ 若/ x/ / sp/ >/ 0/ ,/ / s/ ∈/ S/ ,/ / p/ ∈/ P/ (/ s/ )/ 式/ (/ 19/ )/ 、/ (/ 20/ )/ 是/ 网络资源/ 分配/ 问题/ P/ 存在/ 最优/ 解/ 的/ 必要条件/ ./ 因此/ ,/ 对于/ 同一个/ 用户/ 使用/ 的/ 多条/ 路径/ ,/ 如/ p1/ ,/ p2/ ∈/ P/ (/ s/ )/ ,/ 若/ x/ / sp1/ >/ 0/ ,/ x/ / sp2/ >/ 0/ ,/ 则/ 一定/ 有/ ∑/ l/ :/ l/ ∈/ L/ (/ p1/ )/ μ/ / l/ =/ ∑/ l/ :/ l/ ∈/ L/ (/ p2/ )/ μ/ / l/ =/ λ/ / s/ =/ ws/ ∑/ p/ :/ p/ ∈/ P/ (/ s/ )/ x/ / s/ (/ )/ p/ 用户/ 支付/ 的/ 价格/ 与/ 路径/ 收取/ 的/ 价格/ 之间/ 构成/ 了/ 一种/ 博弈/ ,/ 当/ 模型/ P/ 达到/ 最优/ 资源分配/ 时/ ,/ 上述/ 博弈/ 存在/ 一个/ 平衡点/ ,/ 该/ 平衡点/ 就是/ 最优/ 价格/ ./ 4/ 分布式/ 算法/ 本文/ 在/ 考虑/ 资源/ 公平/ 分配/ 模型/ 时/ ,/ 并/ 没有/ 假设/ 同一个/ 用户/ 的/ 多条/ 路径/ 之间/ 是/ 链路/ 分离/ 的/ ,/ 当然/ 链路/ 分离/ 的/ 多路径/ 网络/ 能够/ 更好/ 的/ 实现/ 负载/ 均衡/ ,/ 并且/ 提高/ 网络/ 数据传输/ 的/ 可靠性/ ./ 而/ 为了/ 能/ 在/ 非/ 集中式/ 的/ 网络/ 环境/ 中/ 得到/ 最优/ 的/ 资源/ 公平/ 分配/ ,/ 本/ 节/ 给出/ 一种/ 分布式/ 流量/ 控制算法/ ,/ 可以/ 适用/ 于/ 即使/ 路径/ 之间/ 有/ 共享/ 链路/ 的/ 一般/ 网络/ 环境/ 中/ ,/ 同时/ 给出/ 算法/ 在/ 网络/ 中/ 的/ 具体/ 实现/ ./ Page64/ ./ 1/ 算法/ 描述/ 该/ 算法/ 是/ 一种/ 基于/ 速率/ 的/ 流量/ 控制算法/ ,/ 包括/ 源端/ 算法/ 和/ 链路/ 端/ 算法/ 两/ 部分/ ,/ 都/ 是/ 依赖于/ 局部/ 信息/ 的/ 分布式/ 算法/ ./ (/ 1/ )/ 源端/ 算法/ 在/ 时间/ t/ ,/ 用户/ s/ 在/ 源端/ 采用/ 如下/ 的/ 速率/ 算法/ :/ xsp/ (/ t/ +/ 1/ )/ =/ (/ 1/ -/ / )/ xsp/ (/ t/ )/ +/ / x/ ~/ (/ 2/ )/ 链路/ 端/ 算法/ 在/ 时间/ t/ ,/ 链路/ l/ 在/ 链路/ 端/ 采用/ 如下/ 的/ 价格/ 算法/ 其中/ ,/ κ/ >/ 0/ ,/ ν/ >/ 0/ 是/ 算法/ 的/ 迭代/ 步长/ ,/ 函数/ 在/ 上述/ 的/ 源端/ 算法/ 式/ (/ 22/ )/ ~/ (/ 26/ )/ 中/ ,/ 用户/ s/ 根据/ 目前/ 的/ 总/ 速率/ ys/ (/ t/ )/ ,/ 利用/ 式/ (/ 24/ )/ 得到/ 自己/ 应该/ 支付/ 给/ 路径/ p/ 的/ 价格/ λ/ s/ (/ t/ )/ ,/ 通过/ 式/ (/ 26/ )/ 得到/ 路径/ p/ 收取/ 的/ 端/ 到/ 端/ 价格/ qsp/ (/ t/ )/ ,/ 然后/ 根据/ 式/ (/ 22/ )/ 、/ (/ 23/ )/ 调整/ 其/ 在/ 该/ 路径/ 上/ 的/ 速率/ xsp/ (/ t/ )/ ,/ 这里/ 采用/ 了/ 滤波/ 原理/ ,/ 参数/ / >/ 0/ 能/ 消除/ 由于/ 最优/ 解不/ 唯一/ 而/ 带来/ 的/ 算法/ 波动/ ,/ κ/ >/ 0/ 是/ 迭代/ 步长/ ;/ 在/ 链路/ 端/ 算法/ 式/ (/ 27/ )/ 、/ (/ 28/ )/ 中/ ,/ 链路/ l/ 根据/ 式/ (/ 28/ )/ 得到/ 经过/ 该/ 链路/ 的/ 总流量/ zl/ (/ t/ )/ ,/ 利用/ 式/ (/ 27/ )/ 调整/ 它/ 在/ 该/ 链路/ 上/ 的/ 价格/ μ/ l/ (/ t/ )/ ./ 由此可见/ ,/ 在/ 源端/ 算法/ 中/ ,/ 用户/ s/ 根据/ 自己/ 支付/ 给/ 路径/ 的/ 价格/ λ/ s/ (/ t/ )/ 与/ 从/ 各条/ 路径/ p/ 上/ 反馈/ 回来/ 的/ 价格/ 信息/ qsp/ (/ t/ )/ ,/ 及时/ 的/ 适当/ 调整/ 源/ 端的/ 发送/ 速率/ xsp/ (/ t/ )/ ,/ 最终/ 得到/ 速率/ 和/ 价格/ 的/ 平衡点/ ;/ 而/ 在/ 链路/ 端/ 算法/ 中/ ,/ 链路/ l/ 根据/ 途径/ 该/ 链路/ 的/ 总流量/ zl/ (/ t/ )/ ,/ 及时/ 的/ 调整/ 该条/ 链路/ 上/ 的/ 价格/ μ/ l/ (/ t/ )/ ,/ 并/ 将/ 链路/ 价格/ 发送给/ 目的/ 端/ ,/ 目的/ 端/ 再/ 将/ 整条/ 路径/ 的/ 端/ 到/ 端/ 价格/ qsp/ (/ t/ )/ 用/ ACK/ 的/ 形式/ 反馈/ 给源端/ ./ 对于/ 源端/ 算法/ ,/ 每个/ 用户/ 在/ 其/ 路径/ 上仅/ 需/ 知道/ 支付/ 价格/ 和/ 路径/ 收取/ 的/ 价格/ ,/ 就/ 可以/ 调整/ 下/ 一/ 时刻/ 的/ 发送/ 速率/ ;/ 而/ 对于/ 链路/ 端/ 算法/ ,/ 每条/ 链路/ 仅/ 需/ 知道/ 经过/ 该/ 链路/ 的/ 总流量/ ,/ 就/ 可以/ 调整/ 自己/ 下/ 一/ 时刻/ 的/ 价格/ ./ 很/ 明显/ ,/ 源端/ 算法/ 和/ 链路/ 端/ 算法/ 都/ 仅仅/ 依赖/ 各自/ 的/ 局部/ 信息/ ,/ 因此/ 算法/ 是/ 分布式/ 的/ ./ 由式/ (/ 27/ )/ 可以/ 看出/ ,/ 这里/ 选取/ 的/ 链路/ 价格/ 迭代/ 函数/ 类似/ 于/ 链路/ 上/ 的/ 丢/ 包率/ [/ 31/ ]/ ,/ 当然/ 也/ 可以/ 选择/ 其他/ 的/ 价格/ 函数/ ,/ 如/ 队列/ 长度/ [/ 32/ ]/ 等/ ./ 这里/ 路径/ 价格/ 函数/ (/ 26/ )/ 可以/ 理解/ 为/ 该/ 路径/ 上/ 的/ 端/ 到/ 端/ 丢/ 包率/ ./ 由/ 非线性/ 规划/ 理论/ [/ 30/ ]/ 可以/ 得到/ ,/ 源端/ 算法/ 和/ 链路/ 端/ 算法/ 均/ 属于/ 优化/ 理论/ 中/ 的/ 梯度/ 算法/ ,/ 因此/ ,/ 当/ 选择/ 合适/ 步长/ 时/ ,/ 算法/ 是/ 收敛/ 的/ ./ 同时/ ,/ 当/ 每个/ 用户/ 仅/ 有/ 一条/ 可用/ 路径/ 时/ ,/ 并且/ 仅仅/ 考虑/ 资源分配/ 的/ 比例/ 公平性/ 时/ ,/ 此时/ 的/ 源端/ 算法/ 就/ 变成/ 类似/ 于单/ 路径/ 网络/ 中/ 的/ 速率/ 控制算法/ [/ 5/ ]/ ./ 速率/ 算法/ 的/ 实现/ 流程/ 可以/ 归结/ 如下/ :/ 在/ 实际/ 网络/ 环境/ 中/ ,/ 上述/ 实现/ 资源/ 公平/ 分配/ 的/ (/ 3/ )/ 用户/ s/ 的/ 算法/ 在/ 时刻/ t/ =/ 1/ ,/ 2/ ,/ …/ ,/ 用户/ s/ ①/ 根据/ 式/ (/ 26/ )/ 接收/ 到/ 路径/ p/ 上/ 反馈/ 回来/ 的/ 端/ 到/ 端的/ 路径/ 价格/ qsp/ (/ t/ )/ ;/ ②/ 根据/ 式/ (/ 25/ )/ 计算/ 得到/ 当前/ 时刻/ 在/ 各条/ 路径/ 上/ 的/ 总/ 速率/ ys/ (/ t/ )/ ;/ ③/ 根据/ 当前/ 时刻/ 的/ 总/ 速率/ ys/ (/ t/ )/ ,/ 利用/ 式/ (/ 24/ )/ 得到/ 应/ 支付/ 给/ 路径/ p/ 的/ 价格/ λ/ s/ (/ t/ )/ ;/ ④/ 根据/ 式/ (/ 22/ )/ 、/ (/ 23/ )/ 更新/ 下/ 一/ 时刻/ 在/ 路径/ p/ 上/ 的/ 速率/ xsp/ (/ t/ +/ 1/ )/ ;/ ⑤/ 在/ 路径/ p/ 上/ 的/ 每条/ 链路/ l/ ∈/ L/ (/ p/ )/ 上/ ,/ 以/ 速率/ xsp/ (/ t/ +/ 1/ )/ 发送/ 数据包/ ./ (/ 4/ )/ 链路/ l/ 的/ 算法/ 在/ 时刻/ t/ =/ 1/ ,/ 2/ ,/ …/ ,/ 链路/ l/ ①/ 根据/ 式/ (/ 28/ )/ 得到/ 使用/ 该/ 链路/ 的/ 各条/ 路径/ ,/ 计/ ②/ 根据/ 式/ (/ 27/ )/ 更新/ 下/ 一/ 时刻/ 该/ 链路/ 的/ 价格/ ③/ 将/ 链路/ 价格/ μ/ l/ (/ t/ +/ 1/ )/ 标记/ 在/ 数据/ 包头/ 内/ ,/ 反该/ 算法/ 是/ 一个/ 逐步/ 迭代/ 的/ 过程/ ,/ 直至/ 得到/ 算法/ 算/ 当前/ 时刻/ 链路/ 上/ 的/ 总流量/ zl/ (/ t/ )/ ;/ μ/ l/ (/ t/ +/ 1/ )/ ;/ 馈给/ 使用/ 该/ 链路/ 的/ 用户/ ./ 的/ 平衡点/ ,/ 即/ 资源/ 公平/ 分配/ 模型/ 的/ 最/ 优点/ ./ 4.2/ 在/ 网络/ 中/ 的/ 具体/ 实现/ 在/ 实际/ 网络/ 中/ 具体/ 实现/ 时/ ,/ 基于/ 窗口/ 的/ 流量/ 控制/ 机制/ 要/ 比/ 基于/ 速率/ 的/ 流量/ 算法/ 更加/ 方便/ ./ 当/ 接收/ 到/ 对/ 端/ 反馈/ 回来/ 的/ ACK/ (/ positiveACKnowledgment/ )/ 时/ ,/ 说明/ 网络/ 没有/ 发生/ 拥塞/ ,/ 窗口/ 就要/ 增加/ ;/ 而/ 当/ 接收/ 到/ 对/ 端/ 反馈/ 回来/ 的/ NACK/ (/ NegativeACKnow/ -/ ledgment/ )/ 时/ ,/ 说明/ 网络/ 发生/ 了/ 拥塞/ ,/ 窗口/ 就要/ 减小/ ./ 为了/ 得到/ 基于/ 窗口/ 的/ 流量/ 控制/ 机制/ ,/ 离散/ 化/ 算法/ 式/ (/ 22/ )/ ~/ (/ 26/ )/ 后/ ,/ 可以/ 得到/ xsp/ (/ t/ +/ 1/ )/ -/ xsp/ (/ t/ )/ =/ κ/ xsp/ (/ t/ )/ Page7/ 令/ Wsp/ (/ t/ )/ 是/ 时刻/ t/ 用户/ s/ 在/ 路径/ p/ 上/ 的/ 窗口/ 大小/ ,/ 借鉴/ 数据/ 传输速率/ 与/ 窗口/ 之间/ 的/ 关系式/ [/ 33/ ]/ 其中/ ,/ 式/ (/ 31/ )/ 中/ 的/ Dp/ 是/ 路径/ p/ 上/ 的/ 往返/ 传输/ 时延/ ./ 令/ Ap/ (/ t/ ,/ t/ +/ 1/ )/ 和/ Np/ (/ t/ ,/ t/ +/ 1/ )/ 分别/ 为/ 时间/ [/ t/ ,/ t/ +/ 1/ )/ 内/ ,/ 用户/ s/ 在/ 路径/ p/ 上/ 得到/ 的/ ACK/ 和/ NACK/ 数目/ ,/ 则/ 所以/ ,/ xsp/ (/ t/ +/ 1/ )/ -/ xsp/ (/ t/ )/ =/ Wsp/ (/ t/ +/ 1/ )/ -/ Wsp/ (/ t/ )/ 利用/ 式/ (/ 32/ )/ 与/ 式/ (/ 33/ )/ ,/ 可以/ 得到/ 基于/ 窗口/ 的/ 流量/ 控制算法/ 为/ Wsp/ (/ t/ +/ 1/ )/ -/ Wsp/ (/ t/ )/ =/ 为了/ 避免/ 当/ 窗口/ 较/ 小时/ 出现/ 的/ 窗口/ 抖动/ 情形/ ,/ 将式/ (/ 34/ )/ 修改/ 为/ Wsp/ (/ t/ +/ 1/ )/ =/ Wsp/ (/ t/ )/ +/ κ/ wsDpAp/ (/ t/ ,/ t/ +/ 1/ )/ -/ 基于/ 窗口/ 的/ 流量/ 控制算法/ 式/ (/ 35/ )/ 可以/ 解释/ 如下/ :/ 在/ 每个/ 单位/ 时间/ 内/ ,/ 当源/ 端/ 每/ 接收/ 到/ 一个/ 反馈/ 回来/ 的/ ACK/ 时/ ,/ 相应/ 路径/ 上/ 的/ 窗口/ 就要/ 增加/ ,/ 增加/ 的/ 大小/ 与/ Dp/ 成正比/ ;/ 而/ 当源/ 端/ 每/ 接收/ 到/ 一个/ 反馈/ 回来/ 的/ NACK/ 时/ ,/ 相应/ 路径/ 上/ 的/ 窗口/ 就要/ 减小/ ,/ 减小/ 的/ 大小/ 与/ Dp/ ∑/ p/ :/ p/ ∈/ P/ (/ s/ )/ Wsp/ // D/ (/ 制/ 机制/ 实现/ 了/ 传统/ TCP/ 及其/ 后续/ 传输/ 协议/ (/ 如/ EH/ -/ STCP/ [/ 34/ ]/ )/ 中/ 采用/ 的/ 加性/ 增长/ // 乘性/ 递减/ [/ 35/ ]/ 的/ 原则/ ./ 对于/ 各条/ 路径/ 的/ 收取/ 价格/ qsp/ (/ t/ )/ ,/ 这里/ 给出/ 了/ 一种/ 基于/ 往返/ 传输/ 时延/ 的/ 实现/ 机制/ ./ 由于/ 链路/ l/ 处/ 的/ 队列/ 长度/ bl/ (/ t/ )/ 具有/ 下列/ 的/ 更新/ 形式/ 比较/ 式/ (/ 36/ )/ 与/ 式/ (/ 27/ )/ 后/ 可以/ 看出/ ,/ 时刻/ t/ 链路/ l/ 处/ 的/ 价格/ μ/ l/ (/ t/ )/ 与/ 该/ 时刻/ 的/ 队列/ 时延/ 成正比/ ,/ 即则/ 由式/ (/ 37/ )/ 得到/ ,/ 路径/ p/ 收取/ 的/ 端/ 到/ 端/ 总/ 价格/ 与/ 时刻/ t/ 该/ 路径/ 上端/ 到/ 端的/ 队列/ 时延/ 成正比/ 考虑/ 到/ 路径/ p/ 上/ 的/ 端/ 到/ 端的/ 往返/ 传输/ 时延/ Dp/ ,/ 端到/ 端的/ 传播/ 时延/ Dd/ ,/ 则/ 用户/ s/ 在/ 该/ 路径/ 的/ 总/ 价格/ 可以/ 由下式/ 得到/ 在/ 端/ 到/ 端的/ 具体/ 实现/ 中/ ,/ 传播/ 时延/ Dd/ 可以/ 根据/ 源端/ 目前/ 测量/ 到/ 的/ 所有/ Dp/ 中/ 的/ 最小值/ 估计/ 得到/ ./ 5/ 仿真/ 与/ 分析/ 为了/ 分析/ 上述/ 分布式/ 流量/ 控制算法/ 的/ 性能/ ,/ 本/ 节/ 考虑/ 多路径/ 网络/ 中/ 的/ 两种/ 公平性/ :/ 比例/ 公平性/ 和/ 调和/ 平均/ 公平性/ ,/ 分别/ 给出/ 分布式/ 流量/ 控制算法/ 的/ 数值/ 仿真/ 结果/ ./ 考虑/ 如图/ 2/ 所示/ 的/ 多路径/ 网络/ ,/ 网络/ 中有/ 两对/ 源端/ 和/ 目的/ 端/ ,/ 即/ 两个/ 用户/ ./ 用户/ 1/ (/ S1/ -/ D1/ )/ 的/ 两条/ 路径/ 是/ 链路/ 分离/ 的/ ,/ 即/ 路径/ A/ →/ B/ 与/ 路径/ C/ →/ D/ →/ B/ ;/ 而/ 用户/ 2/ (/ S2/ -/ D2/ )/ 的/ 两条/ 路径/ 却/ 不是/ 链路/ 分离/ 的/ ,/ 即/ 路径/ C/ →/ D/ →/ B/ 与/ 路径/ C/ →/ D/ →/ E/ ,/ 它们/ 共享/ 了/ 同/ 一条/ 链路/ L2/ ./ 为了/ 分析/ 的/ 方便/ ,/ 不/ 考虑/ 与/ 终端/ 直接/ 相连/ 的/ 链路/ ,/ 而仅/ 考虑/ 网络/ 中/ 的/ 4/ 条/ 链路/ ,/ 不妨/ 假设/ 链路/ 带宽/ 为/ C/ =/ (/ C1/ ,/ C2/ ,/ C3/ ,/ C4/ )/ =/ (/ 4/ ,/ 12/ ,/ 8/ ,/ 6/ )/ Mbps/ ./ 仿真/ 分成/ 3/ 个/ 阶段/ :/ 阶段/ 1/ ,/ t/ =/ 0/ →/ 300/ ,/ 网络/ 中仅/ 有/ 用户/ 2/ ;/ 阶段/ 2/ ,/ t/ =/ 301/ →/ 900/ ,/ 网络/ 中/ 同时/ 存在/ 用户/ 1/ 和/ 用户/ 2/ ;/ 阶段/ 3/ ,/ t/ =/ 901/ →/ 1200/ ,/ 用户/ 1/ 离去/ ,/ 网络/ 中/ 又/ 仅/ 存在/ 用户/ 2.5/ ./ 1/ 比例/ 公平性/ 首先/ ,/ 考虑/ 用户/ 之间/ 资源分配/ 的/ 比例/ 公平性/ ,/ 即/ 效用函数/ 的/ 参数/ α/ =/ (/ α/ 1/ ,/ α/ 2/ )/ =/ (/ 1/ ,/ 1/ )/ ,/ 用户/ 提供/ 的/ 支付/ 为/ w/ =/ (/ w1/ ,/ w2/ )/ =/ (/ 2/ ,/ 3/ )/ ,/ 算法/ 的/ 滤波/ 参数/ / =/ 0.2/ ,/ 迭代/ 步长/ 为/ κ/ =/ 0.5/ ,/ ν/ =/ 0.3/ ,/ 用户/ 在/ 每条/ 路径/ 上/ 的/ 初始/ 速率/ 为/ 2Mbps/ ./ 针对/ 该/ 资源/ 公平/ 分配/ 模型/ ,/ 利用/ 算法/ 式/ (/ 22/ )/ ~/ (/ 28/ )/ 得到/ 的/ 阶段/ 2/ 的/ 最优/ 带宽/ 分配/ 如表/ 2/ 所示/ ,/ 同时/ ,/ 对于/ 该/ 优化/ 问题/ ,/ 利用/ 非线性/ 规划/ 软件/ LINGO/ 得到/ 的/ 最优/ 解/ 也/ 如表/ 2/ 所示/ ./ Page8/ 表/ 2/ 多路径/ 网络/ 最优/ 资源分配/ :/ 比例/ 公平性/ (/ 阶段/ 2/ )/ 变量/ x/ / 11x/ / 12x/ / 21x/ / 22/ 算法/ 4.00002/ ./ 40024.64854/ ./ 9513LINGO4/ ./ 00002.40004/ ./ 40765.1924/ 变量/ y/ / 1y/ / 2/ λ/ / 1/ λ/ / 2/ 算法/ 6.40029/ ./ 59980.31250/ ./ 3125LINGO6/ ./ 40009.60000/ ./ 31250.3125/ 因此/ ,/ 该/ 算法/ 是/ 收敛/ 的/ ,/ 且/ 平衡点/ 就是/ 模型/ 的/ 最/ 优点/ ./ 由于/ 一个/ 用户/ 有/ 多条/ 路径/ ,/ 因此/ 用户/ 在/ 各条/ 路图/ 3/ 多路径/ 网络/ 的/ 最优/ 资源分配/ :/ 比例/ 公平性/ 从/ 仿真/ 图中/ 可以/ 得到/ ,/ 在/ 每/ 一/ 阶段/ ,/ 该/ 算法/ 均/ 收敛/ 到/ 模型/ 的/ 最优/ 带宽/ 分配/ ./ 而且/ ,/ 当/ 算法/ 收敛/ 到/ 最/ 优点/ 时/ ,/ 每个/ 用户/ 支付/ 给/ 路径/ 的/ 价格/ 与/ 路径/ 收取/ 的/ 价格/ 是/ 相等/ 的/ ,/ 这/ 与/ 定理/ 2/ 阐述/ 的/ 内容/ 是/ 吻合/ 的/ ./ 5.2/ 调和/ 平均/ 公平性/ 考虑/ 用户/ 之间/ 资源分配/ 的/ 调和/ 平均/ 公平性/ ,/ 即/ 效用函数/ 的/ 参数/ α/ =/ (/ α/ 1/ ,/ α/ 2/ )/ =/ (/ 2/ ,/ 2/ )/ ,/ 假设/ 用户/ 提供/ 的/ 支付/ 为/ w/ =/ (/ w1/ ,/ w2/ )/ =/ (/ 6/ ,/ 9/ )/ ,/ 算法/ 的/ 滤波/ 参数/ 和/ 迭代/ 步长/ 同上/ ./ 针对/ 该/ 资源/ 公平/ 分配/ 目标/ ,/ 算法/ 式/ (/ 22/ )/ ~/ (/ 28/ )/ 的/ 仿真/ 结果/ 如图/ 4/ 所示/ ,/ 其中/ (/ a/ )/ 是/ 用户/ 1/ 支付/ 给/ 路径/ 的/ 价格/ 与/ 路径/ 收取/ 的/ 价格/ ,/ (/ b/ )/ 是/ 用户/ 2/ 支付/ 给/ 路径/ 上/ 的/ 最优/ 速率/ 并/ 不是/ 唯一/ 的/ ,/ 但/ 各个/ 用户/ 的/ 总/ 的/ 最优/ 速率/ 却是/ 唯一/ 的/ ,/ 这/ 与/ 定理/ 1/ 阐述/ 的/ 内容/ 是/ 一致/ 的/ ./ 算法/ 式/ (/ 22/ )/ ~/ (/ 28/ )/ 的/ 仿真/ 结果/ 如图/ 3/ 所示/ ,/ 其中/ (/ a/ )/ 是/ 用户/ 1/ 支付/ 给/ 路径/ 的/ 价格/ 与/ 路径/ 收取/ 的/ 价格/ ,/ (/ b/ )/ 是/ 用户/ 2/ 支付/ 给/ 路径/ 的/ 价格/ 与/ 路径/ 收取/ 的/ 价格/ ,/ (/ c/ )/ 是/ 用户/ 1/ 在/ 各条/ 路径/ 上/ 的/ 速率/ 与/ 总/ 速率/ ,/ (/ d/ )/ 是/ 用户/ 2/ 在/ 各条/ 路径/ 上/ 的/ 速率/ 与/ 总/ 速率/ ./ 径/ 的/ 价格/ 与/ 路径/ 收取/ 的/ 价格/ ,/ (/ c/ )/ 是/ 用户/ 1/ 在/ 各条/ 路径/ 上/ 的/ 速率/ 与/ 总/ 速率/ ,/ (/ d/ )/ 是/ 用户/ 2/ 在/ 各条/ 路径/ 上/ 的/ 速率/ 与/ 总/ 速率/ ./ 从/ 仿真/ 图中/ 可以/ 得到/ ,/ 在/ 每/ 一/ 阶段/ ,/ 该/ 算法/ 均/ 能/ 有效/ 收敛/ 到/ 模型/ 的/ 最优/ 带宽/ 分配/ ./ 而且/ ,/ 当/ 算法/ 收敛/ 到/ 最/ 优点/ 时/ ,/ 每个/ 用户/ 支付/ 给/ 路径/ 的/ 价格/ 与/ 路径/ 收取/ 的/ 价格/ 是/ 相等/ 的/ ./ 比较/ 上述/ 同一/ 环境/ 中/ 两种/ 资源/ 公平/ 分配/ 就/ 可以/ 得到/ ,/ 不同/ 的/ 公平性/ 指标/ 实现/ 了/ 资源/ 最优/ 分配/ 时/ 不同/ 的/ 效率/ 和/ 公平性/ 目标/ ,/ 而且/ 随着/ 公平性/ 参数/ α/ s/ 的/ 不断/ 增大/ ,/ 资源分配/ 越来越/ 接近/ 于/ 最大/ 最小/ 公平性/ (/ α/ s/ →/ )/ ./ Page9/ 图/ 4/ 多路径/ 网络/ 的/ 最优/ 资源分配/ :/ 调和/ 平均/ 公平性/ 6/ 结论/ 本文/ 讨论/ 了/ 多路径/ 网络/ 中/ 的/ 资源/ 公平/ 分配/ 问题/ ,/ 分析/ 了/ 多路径/ 网络/ 效用/ 最大化/ 模型/ ,/ 从/ 跨层/ 的/ 角度/ 将/ 该/ 模型/ 分解/ 为/ 3/ 个/ 独立/ 的/ 子/ 问题/ ,/ 而/ 每个/ 子/ 问题/ 分别/ 对应/ 互联网/ 架构/ 的/ 一层/ ,/ 因此/ 得到/ 了/ 子/ 问题/ 所/ 对应/ 的/ 网络/ 各个/ 层次/ 的/ 经济学/ 模型/ ./ 同时/ ,/ 建立/ 了/ 多路径/ 网络/ 效用/ 最大化/ 问题/ 的/ 对偶/ 问题/ ,/ 并/ 分别/ 阐述/ 了/ 原/ 问题/ 与/ 对偶/ 问题/ 的/ 实际/ 含义/ ./ 针对/ 资源分配/ 的/ 公平性/ ,/ 通过/ 选择/ 不同/ 的/ 效用函数/ ,/ 得到/ 了/ 多种/ 公平/ 分配/ 方案/ ,/ 并/ 提出/ 了/ 基于/ 速率/ 的/ 分布式/ 流量/ 控制算法/ ,/ 实现/ 了/ 最优/ 资源/ 公平/ 分配/ ,/ 同时/ ,/ 给出/ 了/ 该/ 流量/ 控制算法/ 在/ 实际/ 网络/ 环境/ 中/ 的/ 具体/ 实现/ ,/ 得到/ 了/ 基于/ 窗口/ 的/ 流量/ 控制算法/ 与/ 端/ 到/ 端的/ 路径/ 价格/ 估计/ 机制/ ./ 最后/ 分别/ 考虑/ 了/ 两类/ 不同/ 的/ 公平性/ ,/ 并/ 得到/ 了/ 相应/ 的/ 仿真/ 结果/ ,/ 验证/ 了/ 算法/ 的/ 有效性/ 和/ 收敛性/ ./ 

