Page1/ 可/ 重写/ Petri/ 网/ :/ 位置/ 可/ 重写/ 及/ 性质/ 分析/ 庞善臣/ 1/ )/ 林闯/ 2/ )/ 1/ )/ (/ 山东/ 科技/ 大学/ 信息科学/ 与/ 工程学院/ 山东/ 青岛/ 266590/ )/ 2/ )/ (/ 清华大学/ 计算机科学/ 与/ 技术/ 系/ 北京/ 100084/ )/ 摘要/ 针对/ Petri/ 网对/ 动态/ 系统/ 重构/ 形式化/ 描述/ 和/ 建模/ 能力/ 的/ 不足/ ,/ 提出/ 了/ 可/ 重写/ Petri/ 网/ 和/ 位置/ 可/ 重写/ Petri/ 网/ 的/ 基本概念/ ./ 分析/ 了/ 位置/ 可/ 重写/ Petri/ 网/ 保持/ 有界性/ 、/ 保守/ 性/ 、/ 可重复性/ 及/ 活性/ 等/ 性质/ ./ 给出/ 了/ 位置/ 可/ 重写/ Petri/ 网/ 保持/ 活性/ 的/ 一个/ 充要条件/ ./ 证明/ 了/ 共享/ 合成/ Petri/ 网是/ 位置/ 可/ 重写/ Petri/ 网/ 的/ 一个/ 实例/ ,/ 建立/ 了/ 退化/ 的/ 位置/ 可/ 重写/ Petri/ 网/ 模拟/ 共享/ 合成/ Petri/ 网/ 的/ 算法/ ./ 所得/ 结果/ 能够/ 为/ 动态/ 重构/ 系统/ 的/ Petri/ 网/ 形式化/ 建模/ 提供/ 理论/ 方法/ ,/ 为/ 大规模/ 动态/ 分布式系统/ 的/ 形式化/ 验证/ 提供/ 有效途径/ ./ 关键词/ 可/ 重写/ Petri/ 网/ ;/ 位置/ 可/ 重写/ Petri/ 网/ ;/ 共享/ 合成/ Petri/ 网/ ;/ 活性/ ;/ 模拟/ 1/ 引言/ 博士/ 于/ 1962/ 年/ 在/ 他/ 的/ 博士论文/ 中/ 提出/ [/ 1/ ]/ ./ 40/ 多年/ 来/ ,/ Petri/ 网/ 理论/ 不断/ 充实/ 和/ 发展/ ,/ Petri/ 网/ 的/ 描述/ 能力/ 也/ 在/ 不断/ 得到/ 丰富/ ,/ 从/ 基本/ 的/ 条件/ 事件/ 网/ (/ C/ // E/ )/ 、/ Petri/ 网/ 的/ 概念/ 最早/ 由/ 德国/ 的/ CarlAdamPetri/ 位置/ 变迁/ 网/ (/ P/ // T/ )/ 到/ 有色/ 网/ ;/ 从/ 一般/ 有/ 向/ 弧/ 发展/ 到/ Page2/ 禁止/ 弧/ 和/ 可变/ 弧/ ;/ 从/ 自然数/ Token/ 到/ 概率/ Token/ ;/ 从/ 瞬时/ 变迁/ 到/ 时延/ 变迁/ 等/ ./ Petri/ 网/ 分析/ 技术/ 也/ 得到/ 了/ 丰富/ 和/ 完善/ ,/ 能够/ 借助/ Petri/ 网/ 的/ 代数/ 分析/ 技术/ 来/ 刻画/ 系统结构/ ,/ 建立/ 状态/ 可达/ 的/ 线性系统/ 关系/ ;/ 借助/ Petri/ 网/ 的/ 图/ 分析/ 技术/ ,/ 展现/ 系统/ 的/ 运行机制/ ,/ 分析/ 系统/ 的/ 动态/ 行为/ ;/ 借助/ Petri/ 网/ 的/ 归纳/ 分析/ 技术/ ,/ 可/ 缩小/ 系统/ 的/ 可达/ 状态/ 空间/ ,/ 降低/ 系统分析/ 的/ 复杂度/ ;/ 借助/ Petri/ 网/ 语言/ 能够/ 形式/ 表示/ 和/ 分析/ 系统/ 的/ 动态/ 行为/ 性质/ ;/ 借助/ 随机/ 过程/ 能够/ 分析/ 性能/ 等/ 特性/ ./ 在/ 应用/ 方面/ ,/ Petri/ 网以/ 其/ 简洁/ 、/ 直观/ 、/ 潜在/ 模拟能力/ 强/ 等/ 特点/ 被/ 广泛/ 用于/ 分布式/ 、/ 并发/ 系统/ 的/ 建模/ 和/ 分析/ ,/ 如/ 计算机/ 、/ 通信/ 、/ 交通/ 、/ 电子/ 与/ 电力/ 、/ 服务/ 、/ 通信协议/ 验证/ 、/ 网络/ 性能/ 分析/ 、/ 并行程序/ 设计/ 、/ 柔性制造系统/ 控制/ 、/ 知识/ 推理/ 及/ 人工/ 神经元网络/ 等/ ./ 但是/ ,/ 随着/ 系统/ 规模/ 的/ 激增/ ,/ 系统/ 的/ 复杂性/ 、/ 柔性/ (/ 松/ 耦合/ 性/ )/ 不断/ 增加/ ,/ 系统/ 的/ 异构/ 、/ 分布/ 、/ 协同/ 、/ 自治/ 性/ 增强/ ,/ 系统/ 的/ 动态/ 更新/ 速度/ 加快/ ./ 然而/ ,/ 传统/ Petri/ 网/ 的/ 形式化/ 方法/ 不能/ 提供/ 直接/ 支持/ 系统结构/ 的/ 动态变化/ 和/ 业务/ 的/ 多种/ 操作/ 模式/ ,/ Petri/ 网/ 建模/ 方法/ 在/ 解决/ 系统/ 上述/ 问题/ 过程/ 中/ 遇到/ 极大/ 困难/ 和/ 挑战/ [/ 2/ ]/ ./ 因此/ ,/ 具有/ 动态/ 建模/ 能力/ 扩展/ Petri/ 网/ 的/ 研究/ 得到/ 不断/ 发展/ [/ 2/ -/ 7/ ]/ ./ Petri/ 网/ 的/ 动态/ 建模/ 理论/ 及/ 方法/ ,/ 主要/ 有/ 以下/ 3/ 个/ 方向/ ./ 1.1/ Petri/ 网/ 的/ 化简/ 和/ 精炼/ 为了/ 解决/ Petri/ 网/ 模型/ 分析/ 带来/ 的/ 状态/ 空间/ 爆炸/ 问题/ ,/ 许多/ 学者/ 开展/ 了/ Petri/ 网/ 化简/ 和/ 精炼/ 的/ 研究/ [/ 8/ -/ 25/ ]/ ,/ 建立/ 了/ 多种/ 化简/ 规则/ 和/ 运算/ 方法/ ,/ 给出/ 了/ 化简/ 后/ 活性/ 、/ 有界性/ 、/ 公平性/ 等/ 性质/ 保持/ 条件/ ,/ 以/ 解决/ 系统/ 复杂性/ 增长/ 所/ 带来/ 的/ 空间/ 状态/ 爆炸/ 问题/ ./ Murata/ 是/ 较/ 早/ 从事/ Petri/ 网/ 化简/ 的/ 主要/ 研究/ 人员/ ,/ Murata/ 等/ 人/ [/ 8/ ]/ 针对/ T/ -/ 图/ 提出/ 了/ 若干/ 化简/ 规则/ ,/ 讨论/ 了/ 这些/ 规则/ 对/ 活性/ 和/ 安全性/ 的/ 保持/ 关系/ ./ Ehrig/ 等/ 人/ [/ 10/ ]/ 给出/ 了/ Petri/ 网变换/ 的/ 化简/ 规则/ ,/ 并/ 将/ 结果/ 应用/ 在/ 软件工程/ 领域/ ./ 国内/ 研究/ 人员/ 对/ Petri/ 网/ 化简/ 开展/ 了/ 卓有成效/ 的/ 研究/ [/ 11/ -/ 17/ ]/ ./ Jensen/ [/ 18/ ]/ 研究/ 了/ 基于/ 求精/ 思想/ 的/ 有色/ Petri/ 网/ 的/ 层次化/ 建模/ 方法/ ,/ 开发/ 了/ 复杂/ 系统/ 的/ 设计/ 工具/ Design/ // CPN/ ./ Betous/ -/ Almeida/ 等/ 人/ [/ 19/ ]/ 讨论/ 了/ 在/ 随机/ Petri/ 网中/ ,/ 利用/ 精炼/ 操作/ 逐步求精/ 以/ 构建/ 一个/ 可靠性/ 模型/ 的/ 方法/ ./ Suzuki/ 等/ 人/ [/ 20/ ]/ 研究/ 了/ Petri/ 网/ 的/ 精炼/ 操作/ ,/ 提出/ 了/ 精炼/ 网/ 的/ 定义/ ,/ 并/ 研究/ 了/ 精炼/ 网/ 的/ 动态/ 性质/ (/ 如/ 有界性/ 、/ 活性/ 等/ )/ 保/ 性关系/ ./ Huang/ 等/ 人/ [/ 21/ ]/ 定义/ 了/ 两类/ Petri/ 网/ 的/ 精炼/ 操作/ ,/ 并/ 对/ 包括/ 结构/ 性质/ (/ 如/ 不/ 变量/ 、/ 可重复性/ 等/ )/ 和/ 动态/ 性质/ 在内/ 的/ 19/ 种/ 性质/ 的/ 保/ 性关系/ 进行/ 了/ 较/ 全面/ 的/ 论述/ 和/ 分析/ ./ Ding/ 等/ 人/ [/ 17/ ]/ 基于/ 序列/ 投影/ ,/ 建立/ 精炼/ Petri/ 网/ 与/ 原网/ 、/ 子网/ 间/ 的/ 动态/ 行为/ 关联/ 关系/ ,/ 并/ 分析/ 了/ 该/ 精炼/ 操作/ 的/ 相关/ 动态/ 性质/ ,/ 得到/ 一组/ 性质/ 保持/ 判据/ ./ Petri/ 网/ 化简/ 和/ 精炼/ 技术/ 在/ 系统/ 建模/ 与/ 分析/ 中/ 得到/ 广泛应用/ ./ 近几年/ ,/ 在/ 工作/ 流/ 和/ 服务/ 组合/ 研究/ 中/ 应用/ 成果/ 更为/ 常见/ ./ Sadiq/ 等/ 人/ [/ 22/ ]/ 针对/ 工作/ 流/ 建模语言/ ,/ 利用/ 一组/ Petri/ 网/ 化简/ 规则/ ,/ 建立/ 了/ 可视化/ 的/ 验证/ 算法/ 来/ 识别/ 工作/ 流/ 过程/ 模型/ 中/ 的/ 结构冲突/ ./ Li/ 等/ 人/ [/ 23/ ]/ 改进/ 了/ 文献/ [/ 20/ ]/ 的/ 化简/ 规则/ ,/ 建立/ 了/ 化简/ 矩阵/ 的/ 工作/ 流/ 验证/ 算法/ ./ 最近/ ,/ 有/ 学者/ 开始/ 研究/ 一种/ 新/ 的/ Petri/ 网/ 化简/ 技术/ —/ —/ —/ 切片/ 技术/ 来/ 实现/ Petri/ 网/ 的/ 动态/ 建模/ [/ 24/ -/ 25/ ]/ ./ 上述/ 这些/ 工作/ ,/ 为/ Petri/ 网/ 的/ 层次化/ 分析/ 奠定/ 了/ 理论/ 基础/ ./ 1.2/ Petri/ 网/ 的/ 合成/ Petri/ 网/ 化简/ 和/ 精炼/ 体现/ 了/ 模型/ 验证/ 和/ 分析/ 由/ 上/ 到/ 下/ 的/ 思想/ ,/ 为了/ 解决/ 系统集成/ 时/ 由下向上/ 的/ 模型/ 表达/ 问题/ ,/ 人们/ 开始/ 关注/ Petri/ 网/ 的/ 合成/ [/ 26/ -/ 43/ ]/ ./ 近年来/ ,/ 合成/ Petri/ 网/ 研究/ 已/ 取得/ 很大/ 的/ 进展/ [/ 28/ -/ 31/ ]/ ,/ 其/ 研究成果/ 主要/ 集中/ 在/ 共享/ 合成/ 和/ 同步/ 合成/ 上/ ./ Souissi/ [/ 32/ ]/ 研究/ 了/ 共享/ 合成/ Petri/ 网/ 系统/ 的/ 活性/ 保持/ 性/ 问题/ ,/ 基于/ 对/ 活性/ 满足/ 单调/ 性/ 条件/ 的/ 推广/ ,/ 提出/ 了/ F/ -/ 强网/ 的/ 概念/ ,/ 得出/ 两个/ 活/ 的/ F/ -/ 强网/ 共享/ 合成/ 后/ 仍/ 是/ 活/ 的/ 结论/ ./ Jeng/ [/ 33/ ]/ 研究/ 了/ 用/ Petri/ 网/ 系统/ 来/ 建模/ 柔性制造系统/ 的/ 合成/ 方法/ ,/ 提出/ 资源/ 控制/ 网/ 的/ 概念/ ,/ 每/ 一个/ 子系统/ 都/ 是/ 资源/ 控制/ 网/ ,/ 且/ 按/ 两个/ 约束条件/ 合成/ 起来/ ,/ 这样/ 得到/ 的/ 大/ 系统/ 有/ 结构/ 活性/ ./ Jiang/ 等/ 人/ [/ 34/ ]/ 首次/ 提出/ 了/ Petri/ 网/ 的/ 加法/ 、/ 笛卡儿/ 积/ 、/ 广义/ 笛卡儿/ 积/ 的/ Petri/ 网/ 合成/ 运算/ ,/ 得到/ 了/ 一系列/ 的/ 重要/ 性质/ ./ Jiang/ [/ 35/ ]/ 研究/ 了/ Petri/ 网/ 同步/ 合成/ 和/ 共享/ 合成/ 两种/ 组合/ 网/ 的/ 动态/ 不变性/ ,/ 即/ 状态/ 和/ 行为/ 不变性/ ./ Jiao/ 等/ 人/ [/ 36/ ]/ 研究/ 了/ 针对/ AC/ 网/ 进行/ 库所/ 集合/ 合成/ 的/ 转化/ 问题/ ./ Badouel/ 等/ 人/ [/ 37/ ]/ 提出/ 了/ Petri/ 网/ 合成/ 后/ 的/ 网/ 保持/ 死锁/ -/ 陷阱/ 性质/ 、/ 活性/ 、/ 有界性/ 和/ 可逆性/ 的/ 条件/ ./ Chen/ [/ 38/ ]/ 给出/ 了/ 一种/ 对/ 具有/ 控制器/ 的/ 离散/ 事件/ 系统/ 进行/ 合成/ 的/ 系统/ 方法/ ./ 夏传良/ 等/ 人/ [/ 39/ ]/ 给出/ 了/ 使/ 共享/ PP/ -/ 型/ 子网/ 合成/ Petri/ 网/ 系统/ 保持/ 活性/ 、/ 有界性/ 和/ 可逆性/ 的/ 条件/ ;/ Jiang/ [/ 35/ ]/ 对/ Petri/ 网/ 系统/ 同步/ 合成/ 的/ 进程/ 和/ 语言/ 关系式/ 进行/ 了/ 研究/ ,/ 得到/ 了/ 反映/ 系统/ 行为/ 关系/ 的/ 进程/ 和/ 语言/ 关系式/ ./ Wang/ 等/ 人/ [/ 40/ ]/ 利用/ 同步/ 合成/ 的/ 语言/ 关系式/ 去/ 研究/ 其他/ Petri/ 网/ 系统/ 合成/ 操作/ ,/ 如/ 抑制/ 弧/ 连接/ 、/ 自环/ 连接/ 的/ 语言/ 关系式/ ,/ 由此/ 得到/ 行为/ 不变/ 性质/ ./ 蒲飞/ 等/ 人/ [/ 41/ ]/ 着重/ 研究/ 了/ Petri/ 网/ 系统/ 共享/ 合成/ 的/ 行为/ 关系/ (/ 语言/ 关系/ )/ ,/ 指出/ 并/ 证明/ 了/ Petri/ 网/ 系统/ 共享/ 合成/ 过程/ 中/ 语言/ 的/ 递归性/ Page3/ 质/ ,/ 得到/ 一个/ 并发/ 语言/ 形式/ 的/ 共享/ 合成/ 语言/ 关系式/ ,/ 并/ 可用/ 小/ 系统/ 的/ 语言/ 子集/ 来/ 判定/ 共享/ 合成/ 网/ 系统/ 的/ 活性/ ,/ 从而/ 达到/ 用/ 小/ 系统/ 来/ 研究/ 大/ 系统/ 活性/ 的/ 目的/ 系式/ ./ 另有/ 文献/ [/ 42/ ]/ 和/ [/ 43/ ]/ 分别/ 提出/ 了/ 新/ 的/ Petri/ 网/ 共享/ 合成/ 活性/ 判定/ 条件/ ./ 上述/ 研究/ 工作/ 为/ Petri/ 网/ 的/ 层次化/ 建模/ 奠定/ 了/ 理论/ 基础/ ./ 1.3/ Petri/ 网/ 的/ 分解/ Petri/ 网/ 化简/ 策略/ 主要/ 利用/ 功能/ 和/ 行为/ 等效/ 机制/ ,/ 将/ 复杂/ 结构/ 简化/ 为/ 一个/ 简单/ 结构/ ,/ 来/ 分析/ 系统/ 的/ 性能/ ./ 在/ 结构化/ 简/ 过程/ 中/ ,/ 因/ 化简/ 带来/ 黑盒/ 现象/ ,/ 系统/ 的/ 资源/ 信息/ 将会/ 丢失/ ,/ 因此/ 部分/ 研究者/ 开始/ 了/ Petri/ 网/ 分解/ 的/ 研究/ ,/ 以/ 避免/ 化简/ 的/ 不足/ ,/ 但/ Petri/ 网/ 分解/ 研究/ 的/ 成果/ 尚/ 不多见/ ./ Berthelot/ [/ 44/ ]/ 提出/ 用/ 分解/ 和/ 变形/ 的/ 方法/ 来/ 研究/ 系统/ 的/ 一些/ 性质/ ,/ 如/ 活性/ 、/ 无死锁性/ 及/ 有界性/ 等/ 的/ 保持/ 性/ 问题/ ./ Aybar/ 等/ 人/ [/ 45/ ]/ 用/ 分解/ 方法/ 研究/ 大/ 系统/ 的/ 性质/ ,/ 采用/ 一种/ 称为/ 包含/ 原则/ 方法/ 分解/ 大/ 系统/ ,/ 以/ 保证/ 合成/ 后/ 的/ 大/ 系统/ 具有/ 小/ 系统/ 相应/ 的/ 性质/ ,/ 并/ 给出/ 了/ 这种/ 方法/ 在/ 分散控制/ 中/ 的/ 应用/ ./ 在/ 应用/ 方面/ ,/ 李建强/ 等/ 人/ [/ 46/ ]/ 给出/ 了/ 工作/ 流网/ 的/ 一个/ 特殊/ 子类/ —/ —/ —/ 无环/ 自由选择/ 工作/ 流网/ 的/ 一个/ 分解/ 算法/ ./ Li/ 等/ 人/ [/ 47/ ]/ 将/ 文献/ [/ 46/ ]/ 的/ 分解/ 算法/ 推广/ ,/ 进一步/ 给出/ 了/ 含有/ 循环/ 结构/ 的/ 自由选择/ 工作/ 流网/ 的/ 分解/ 算法/ ,/ 并/ 在/ 分解/ 的/ 基础/ 上/ 对/ 工作/ 流/ 模型/ 的/ 性能/ 进行/ 了/ 分析/ ./ 文献/ [/ 48/ -/ 49/ ]/ 在/ 研究/ Petri/ 网/ 分解/ 中/ ,/ 给出/ 了/ 基于/ 不/ 变量/ 分解/ 算法/ ,/ 并/ 在/ 工作/ 流/ 性能/ 分析/ 中/ 得到/ 较/ 好/ 应用/ ./ 上述/ 的/ Petri/ 网/ 化简/ 、/ 精炼/ 、/ 合成/ 、/ 分解/ 等/ 内容/ ,/ 都/ 是/ Petri/ 网/ 动态/ 建模/ 理论/ 的/ 研究/ 范畴/ ,/ 上述/ 许多/ 方法/ 在/ 获得/ 动态/ 建模/ 能力/ 的/ 同时/ ,/ 也/ 造成/ 了/ 已有/ 信息/ 的/ 丢失/ ,/ 使/ 对/ Petri/ 网/ 的/ 性质/ 判断/ 变得/ 十分困难/ 或/ 不/ 可能/ ./ 2000/ 年/ 前后/ ,/ 部分/ 学者/ 基于/ 图/ 重构/ 的/ 思想/ ,/ 提出/ 重构/ 网/ 的/ 概念/ [/ 2/ -/ 7/ ]/ ,/ 但是/ ,/ 活性/ 、/ 有界性/ 、/ 可逆/ (/ 可/ 重复/ )/ 性/ 和/ 公平性/ 等/ 一些/ 基本/ 性质/ 的/ 保持/ 和/ 继承/ 问题/ 仍然/ 没有/ 解决/ ./ Llorens/ 等/ 人/ [/ 2/ -/ 3/ ]/ 提出/ 了/ 网/ 重写/ 系统/ 和/ 重构/ 网/ 的/ 并发/ 系统/ 建模/ 方法/ ,/ 并/ 证明/ 了/ 具有/ 图灵机/ 的/ 计算能力/ ,/ 该/ 方法/ 在/ 假设/ 被/ 重写/ 的/ 位置/ 没有/ Token/ 的/ 情况/ 下/ ,/ 使用/ 图/ 重构/ 的/ 方法/ ,/ 就是/ 将/ 一个/ 同构/ 的/ 嵌入/ 子图/ 替换成/ 新子/ 图/ 的/ 方法/ ,/ 丢失/ 了/ Petri/ 网/ 的/ 状态/ 动态性/ ,/ 使得/ 活性/ 、/ 有界性/ 、/ 可逆性/ 等/ 性质/ 难以/ 判断/ ./ Li/ 等/ 人/ [/ 5/ ]/ 对/ 重写/ 网/ 系统/ 和/ 可/ 重构/ Petri/ 网/ 进行/ 了/ 改进/ ,/ 将/ 重写/ 规则/ 中/ 左手/ 、/ 右手/ 的/ 接口/ 限定/ 为/ 位置/ 和/ 变迁/ 两种/ 类型/ ,/ 并/ 相应/ 建立/ 了/ 几种/ 结构/ 模式/ ,/ 该/ 方法/ 能够/ 较/ 好/ 地/ 应用/ 在/ 柔性制造系统/ 的/ 建模/ 中/ ,/ 但/ 重写/ 位置/ 中/ 的/ 托肯/ 仍然/ 被/ 忽略/ ,/ 另外/ ,/ 该/ 方法/ 即便/ 在/ 给定/ 的/ 结构/ 模式/ 下/ ,/ 重构/ 系统/ 的/ 一些/ 性质/ ./ 如/ 活性/ 、/ 有界性/ 、/ 公平性/ 等/ 仍/ 无法/ 得到/ 保证/ ./ 文献/ [/ 7/ ]/ 对/ 重写/ 网/ 系统/ 改进/ ,/ 明确/ 了/ 流/ 关系/ 和/ 权函数/ 的/ 区别/ ,/ 同时/ 考虑/ 了/ 重写/ 位置/ 中/ 的/ 托肯/ 对/ 重写/ 系统/ 的/ 影响/ ,/ 并/ 分析/ 了/ 动态/ 编程/ 工作/ 流网/ 重写/ 后/ 的/ 活性/ 和/ 健壮性/ 等/ 问题/ ./ 本文/ 在/ 文献/ [/ 2/ -/ 7/ ]/ 基础/ 上/ ,/ 提出/ 了/ 可/ 重写/ Petri/ 网/ (/ RewritablePetriNets/ ,/ RWPN/ )/ 和/ 位置/ 可/ 重写/ Petri/ 网/ (/ RewritablePlaceofPetriNets/ ,/ RWPPN/ )/ 的/ 概念/ ,/ 分析/ 了/ 位置/ 可/ 重写/ Petri/ 网/ 保持/ 有界性/ 、/ 公平性/ 、/ 可逆性/ 、/ 可重复性/ 及/ 活性/ 等/ 性质/ ,/ 给出/ 了/ 退化/ 的/ 位置/ 可/ 重写/ Petri/ 网/ 模拟/ 共享/ 合成/ Petri/ 网/ 的/ 算法/ ,/ 证明/ 了/ 共享/ 合成/ Petri/ 网是/ 位置/ 可/ 重写/ Petri/ 网/ 的/ 一个/ 实例/ ./ 所得/ 结果/ 能够/ 为/ 动态/ 重构/ 系统/ 的/ Petri/ 网/ 形式化/ 建模/ 提供/ 理论/ 方法/ ,/ 为/ 大规模/ 动态/ 分布式系统/ 的/ 形式化/ 验证/ 提供/ 有效/ 方法/ ./ 本文/ 第/ 2/ 节/ 介绍/ 一些/ 基本概念/ ,/ 建立/ 可/ 重写/ Petri/ 网/ 和/ 位置/ 可/ 重写/ Petri/ 网/ 的/ 概念/ ,/ 并举/ 例子/ 说明/ ;/ 第/ 3/ 节/ 分析/ 位置/ 可/ 重写/ Petri/ 网/ 的/ 性质/ ,/ 证明/ 位置/ 可/ 重写/ Petri/ 网/ 有界性/ 、/ 可重复性/ ,/ 提出/ 判定/ 一个/ 位置/ 可/ 重写/ Petri/ 网/ 保持/ 活性/ 的/ 充要条件/ ,/ 给出/ 退化/ 的/ 位置/ 可/ 重写/ Petri/ 网/ 模拟/ 共享/ 合成/ Petri/ 网/ 的/ 算法/ ,/ 证明/ 共享/ 合成/ Petri/ 网是/ 位置/ 可/ 重写/ Petri/ 网/ 的/ 一个/ 实例/ ;/ 第/ 4/ 节/ 给出/ 一个/ 实例/ 解释/ 我们/ 的/ 方法/ ;/ 第/ 5/ 节/ 总结/ 本文/ 的/ 工作/ ./ 2/ 位置/ 可/ 重写/ Petri/ 网/ (/ RWPPN/ )/ 2.1/ Petri/ 网/ 的/ 基本概念/ 在/ Petri/ 网/ 的/ 图形/ 表示/ 中/ ,/ 用圆/ 表示/ 库所/ ,/ 矩形框/ 表示/ 变迁/ ,/ 有/ 向/ 弧/ 是/ 连接/ 两个/ 不同/ 类型/ 节点/ (/ 库所/ 和/ 变迁/ )/ 的/ 弧/ ./ 库所中/ 的/ 托/ 肯用/ 圆点/ 表示/ ./ 本文/ 引入/ 几个/ 必要/ 的/ 定义/ ,/ 其余/ 概念/ 参见/ 文献/ [/ 1/ ,/ 34/ ]/ ./ 定义/ 1/ ./ 四元/ 式/ N/ =/ (/ P/ ,/ T/ ;/ F/ ,/ M0/ )/ 称为/ Petri/ 网/ ,/ 当且/ 仅/ 当/ ,/ (/ P/ ,/ T/ ;/ F/ )/ 是/ 一个/ 网/ ;/ 其中/ P/ ,/ T/ 分别/ 是/ 库/ 所/ 和/ 变迁/ 的/ 有限/ 集/ ,/ P/ ∩/ T/ =/ / ;/ F/ / (/ P/ ×/ T/ )/ ∪/ (/ T/ ×/ P/ )/ 是/ 流/ 关系/ ;/ M/ :/ P/ →/ Z/ 为/ 标识/ 函数/ ,/ 其中/ M0/ 是/ 初始/ 标识/ ,/ Z/ =/ {/ 0/ ,/ 1/ ,/ 2/ ,/ …/ }/ 为/ 非负/ 整数/ 集/ ./ (/ 1/ )/ ·/ x/ =/ {/ y/ |/ (/ y/ ,/ x/ )/ ∈/ F/ }/ 称为/ x/ 的/ 输入/ 集/ 或/ 前集/ ;/ x/ ·/ =/ {/ y/ |/ (/ x/ ,/ y/ )/ ∈/ F/ }/ 称为/ x/ 的/ 输出/ 集/ 或/ 后集/ ;/ (/ 2/ )/ 对/ / M1/ 和/ M2/ ,/ M1/ / M2/ ,/ 当且/ 仅/ 当/ 对/ 所有/ 的/ p/ ∈/ P/ :/ M1/ (/ p/ )/ / M2/ (/ p/ )/ ;/ Page4/ 引发/ 规则/ :/ (/ 3/ )/ 变迁/ t/ ∈/ T/ 在/ 标识/ M/ 下/ 是/ 使/ 能/ 的/ ,/ 当且/ 仅/ 当/ (/ 4/ )/ 若/ t/ 在/ M/ 下/ 使/ 能/ ,/ 则/ t/ 可以/ 引发/ ,/ 且/ 引发/ 后/ / p/ ∈/ ·/ t/ ,/ M/ (/ P/ )/ / 1/ ,/ 记/ M/ [/ t/ 〉/ ;/ 产生/ 一个/ 后继/ 标识/ M/ ,/ 记作/ M/ [/ t/ 〉/ M/ ,/ 其中/ ,/ M/ (/ p/ )/ =/ 设/ R/ (/ M0/ )/ 表示/ N/ 的/ 从/ M0/ 可达/ 的/ 所有/ 状态/ (/ 标识/ )/ 集合/ ./ 如果/ 存在/ M1/ ,/ M2/ ,/ …/ ,/ Mk/ ∈/ R/ (/ M0/ )/ ,/ 且/ / i/ :/ 1/ / i/ / k/ ,/ / ti/ ∈/ T/ :/ Mi/ [/ ti/ 〉/ Mi/ +/ 1/ ,/ 则/ 称/ 变迁/ 序列/ σ/ =/ t1t2/ …/ tk/ 在/ M1/ 下/ 是/ 使/ 能/ 的/ ,/ Mk/ +/ 1/ 从/ M1/ 可达/ ,/ 记作/ M1/ [/ σ/ >/ Mk/ +/ 1/ ./ 定义/ 2/ ./ 设/ N/ =/ (/ P/ ,/ T/ ;/ F/ ,/ M0/ )/ 是/ Petri/ 网/ ,/ 存在/ 如下/ 性质/ :/ (/ 1/ )/ (/ N/ ,/ M0/ )/ 是/ 活/ 的/ ,/ 当且/ 仅/ 当/ / t/ ∈/ T/ ,/ / M/ ∈/ R/ (/ M0/ )/ ,/ / M/ ∈/ R/ (/ M/ )/ ,/ M/ [/ t/ 〉/ ;/ (/ 2/ )/ (/ N/ ,/ M0/ )/ 是/ 有界/ 的/ ,/ 当且/ 仅/ 当/ 对/ / M/ ∈/ R/ (/ M0/ )/ ,/ / k/ ∈/ N/ ,/ M/ (/ p/ )/ / k/ ;/ (/ 3/ )/ (/ N/ ,/ M0/ )/ 是/ 安全/ 的/ ,/ 当且/ 仅/ 当/ 对/ / M/ ∈/ R/ (/ M0/ )/ ,/ M/ (/ p/ )/ / 1/ ;/ (/ 4/ )/ (/ N/ ,/ M0/ )/ 是/ 公平/ 的/ ,/ 当且/ 仅/ 当/ / t1/ ,/ t2/ ∈/ T/ ,/ 如果/ 存在/ 正整数/ k/ 使得/ 任意/ 的/ M/ ∈/ R/ (/ M0/ )/ 和/ 任意/ 的/ σ/ ∈/ T/ / :/ M/ [/ σ/ 〉/ 都/ 有/ #/ (/ ti/ // σ/ )/ =/ 0/ →/ #/ (/ tj/ // σ/ )/ / k/ ,/ i/ ,/ j/ ∈/ {/ 1/ ,/ 2/ }/ ,/ i/ ≠/ j/ ./ 定义/ 3/ ./ Petri/ 网/ N/ =/ (/ P/ ,/ T/ ;/ F/ ,/ M0/ )/ 是/ N/ 的/ 子网/ ,/ 当且/ 仅/ 当/ P/ / P/ ,/ T/ / T/ ,/ F/ =/ F/ ∩/ (/ (/ P/ ×/ T/ )/ ∪/ (/ T/ ×/ P/ )/ )/ ;/ Petri/ 网/ N/ =/ (/ P/ ,/ T/ ;/ F/ ,/ M0/ )/ 是/ N/ 库所/ 子集/ P/ 的/ 外延/ 子网/ ,/ 当且/ 仅/ 当/ P/ / P/ ,/ T/ =/ ·/ P/ ∪/ P/ ·/ ;/ F/ =/ F/ ∩/ (/ (/ P/ ×/ T/ )/ ∪/ (/ T/ ×/ P/ )/ )/ ./ 定义/ 4/ ./ P/ / P/ 是/ N/ 的/ 一个/ 非空/ 死锁/ (/ 陷阱/ )/ ,/ 当且/ 仅/ 当/ P/ ≠/ / ,/ 且/ ·/ P/ / P/ ·/ (/ P/ ·/ / ·/ P/ )/ ;/ P/ 是/ N/ 的/ 极小/ 死锁/ (/ 陷阱/ )/ ,/ 当且/ 仅/ 当/ P/ 真/ 子集/ 都/ 不是/ N/ 的/ 死锁/ (/ 陷阱/ )/ ./ 定义/ 5/ ./ 设/ Petri/ 网/ Ni/ =/ (/ Pi/ ,/ Ti/ ;/ Fi/ ,/ M0i/ )/ ,/ i/ =/ 1/ ,/ 2/ ,/ 令/ N/ =/ (/ P/ ,/ T/ ;/ F/ ,/ M0/ )/ ,/ 若/ :/ ①/ P/ =/ P1/ ∪/ P2/ ,/ P0/ =/ P1/ ∩/ P2/ ≠/ / ,/ 设/ |/ P0/ |/ =/ h/ ,/ |/ P/ |/ =/ m/ ;/ ②/ T/ =/ T1/ ∪/ T2/ ,/ T1/ ∩/ T2/ =/ / ;/ ③/ F/ =/ F1/ ∪/ F2/ ;/ ④/ M0/ (/ P/ )/ =/ max/ {/ M01/ (/ P/ )/ ,/ M02/ (/ P/ )/ }/ ,/ 若/ P/ ∈/ P1/ ∩/ P2/ 烅/ 烄/ M0i/ (/ P/ )/ ,/ 烆/ i/ =/ 1/ ,/ 2/ ;/ 称/ N/ 为/ N1/ 与/ N2/ 的/ 共享/ 合成/ Petri/ 网/ ./ 在/ Petri/ 网/ 图形/ 中/ ,/ 由/ 一个/ 节点/ 到达/ 另/ 一个/ 节点/ 的/ 所有/ 有/ 向/ 弧/ 连接/ 的/ 节点/ 序列/ 称为/ 路径/ ./ 设/ S/ 是/ 一个/ 集合/ ,/ S/ / 表示/ S/ 中/ 元素/ 的/ 所有/ 有限/ 序列/ 的/ 集合/ ,/ 且空/ 序列/ λ/ ∈/ S/ / ./ / σ/ ∈/ S/ / ,/ 记/ 作/ (/ σ/ )/ =/ {/ x/ |/ x/ 是/ σ/ 中/ 的/ 元素/ }/ ./ 因此/ ,/ 算符/ 将/ 序列/ σ/ 转换成/ 一个/ 字母表/ (/ σ/ )/ ./ 定义/ 6/ ./ N/ 是/ Petri/ 网/ ,/ 一个/ 从/ 节点/ n1/ 到/ nk/ 的/ 通道/ C/ 是/ 一个/ 节点/ 的/ 序列/ 〈/ n1/ ,/ n2/ ,/ …/ ,/ nk/ 〉/ ,/ 其中/ 〈/ ni/ ,/ ni/ +/ 1/ 〉/ ∈/ F/ ,/ 1/ / i/ / k/ -/ 1/ ,/ (/ C/ )/ =/ {/ n1/ ,/ n2/ ,/ …/ ,/ nk/ }/ 是/ 通道/ C/ 的/ 字母表/ ./ 通道/ C/ 是/ 基本/ 的/ ,/ 当且/ 仅/ 当/ 对/ 通道/ C/ 上/ 的/ 任意/ 两个/ 节点/ ni/ ,/ nj/ ,/ 若/ i/ ≠/ j/ / ni/ ≠/ nj/ ./ 定义/ 7/ ./ 一个/ Petri/ 网是/ 强/ 连通/ 的/ ,/ 当且/ 仅/ 当/ 对于/ 每/ 一对/ 节点/ x/ ,/ y/ ∈/ P/ ∪/ T/ ,/ 都/ 存在/ 一个/ 从/ x/ 到/ y/ 的/ 通道/ ./ 定义/ 8/ ./ 一个/ 强/ 连通/ 的/ Petri/ 网/ 在结构上/ 是/ 良构/ 的/ ,/ 当且/ 仅/ 当/ 对/ 任意/ 一对/ 不同/ 类型/ 的/ 节点/ x/ ,/ y/ (/ 一个/ 为/ 变迁/ ,/ 一个/ 为库/ 所/ )/ ,/ 若/ C1/ ,/ C2/ 是从/ x/ 到/ y/ 的/ 任意/ 两条/ 基本/ 路径/ ,/ 且/ (/ C1/ )/ ∩/ (/ C2/ )/ =/ {/ x/ ,/ y/ }/ / C1/ =/ C2/ ./ 由/ 定义/ 8/ 可以/ 得到/ 定义/ 9/ ./ 定义/ 9/ ./ 一个/ Petri/ 网/ 在结构上/ 是/ 良构/ 的/ ,/ 当且/ 仅/ 当/ 对/ 任意/ 两个/ 相同/ 类型/ 的/ 节点/ x1/ ,/ x2/ 与/ 不同/ 类型/ 的/ 节点/ y/ 之间/ ,/ 如果/ 存在/ 基本/ 路径/ C1/ 和/ C2/ ,/ 则/ (/ C1/ )/ ∩/ (/ C2/ )/ ≠/ {/ y/ }/ / (/ C1/ )/ ∩/ (/ C2/ )/ =/ (/ Ci/ )/ ,/ i/ =/ 1/ ,/ 2.2/ ./ 2/ 位置/ 可/ 重写/ Petri/ 网/ (/ RWPPN/ )/ 类似/ 文献/ [/ 2/ -/ 3/ ]/ ,/ 本/ 节/ 主要/ 建立/ 可/ 重写/ Petri/ 网/ 和/ 位置/ 可/ 重写/ Petri/ 网/ 的/ 概念/ ./ 定义/ 10/ ./ 若/ R/ / X/ ×/ Y/ 为/ 二元关系/ ,/ 令/ XR/ =/ {/ y/ ∈/ Y/ |/ / x/ ∈/ X/ ,/ (/ x/ ,/ y/ )/ ∈/ R/ }/ 记作/ X/ 的/ 像/ ,/ X/ / X/ ;/ 令/ RY/ =/ {/ x/ ∈/ X/ |/ / y/ ∈/ Y/ ,/ (/ x/ ,/ y/ )/ ∈/ R/ }/ 记作/ Y/ 的/ 逆/ 像/ ,/ Y/ / Y/ ./ R/ 的/ 域/ 和/ 陪域/ 分别/ 为/ Dom/ (/ R/ )/ =/ RY/ 和/ Cod/ (/ R/ )/ =/ XR/ ./ 定义/ 11/ ./ G/ =/ (/ V/ ,/ E/ )/ 和/ G/ =/ (/ V/ ,/ E/ )/ 是/ 两个/ 图/ ,/ G/ 和/ G/ 称为/ 同构/ ,/ 若/ 存在/ 双射/ φ/ :/ V/ →/ V/ 使得/ / x/ ,/ y/ ∈/ V/ ,/ (/ x/ ,/ y/ )/ ∈/ E/ / (/ φ/ (/ x/ )/ ,/ φ/ (/ y/ )/ )/ ∈/ E/ ./ 定义/ 12/ ./ N/ =/ (/ P/ ,/ T/ ,/ F/ )/ 和/ N/ =/ (/ P/ ,/ T/ ,/ F/ )/ 为/ 两个/ Petri/ 网/ ./ N/ 和/ N/ 称为/ 同构/ ,/ 若/ 存在/ 双射/ φ/ :/ P/ ∪/ T/ →/ P/ ∪/ T/ ,/ 使得/ / x/ ,/ y/ ∈/ P/ ∪/ T/ ,/ F/ (/ x/ ,/ y/ )/ ∈/ N/ / F/ (/ φ/ (/ x/ )/ ,/ φ/ (/ y/ )/ )/ ∈/ N/ ./ 定义/ 13/ ./ N/ =/ (/ P/ ,/ T/ ,/ F/ )/ 和/ N/ =/ (/ P/ ,/ T/ ,/ F/ )/ 为/ 两个/ Petri/ 网/ ,/ N/ 是/ N/ 的/ 全/ 嵌入/ (/ fullembedding/ )/ 定义/ 为/ 单射/ f/ :/ P/ ∪/ T/ →/ P/ ∪/ T/ ,/ 它/ 映射/ 库所到/ 库/ 所/ Page5/ 和/ 变迁/ 到/ 变迁/ ,/ 即/ f/ (/ P/ )/ / P/ 且/ f/ (/ T/ )/ / T/ ,/ 使得/ / x/ ,/ y/ ∈/ P/ ∪/ T/ ,/ F/ (/ x/ ,/ y/ )/ =/ F/ (/ f/ (/ x/ )/ ,/ f/ (/ y/ )/ )/ ./ 在/ 单射/ f/ 下/ N/ 的/ 镜像/ 也/ 称为/ N/ 的/ 全/ 子网/ (/ fullsubnet/ )/ ,/ 当/ f/ (/ P/ )/ / P/ 或/ f/ (/ T/ )/ / T/ 时/ ,/ 在/ 单射/ f/ 下/ N/ 的/ 镜像/ 也/ 称为/ N/ 的/ 真/ 子网/ (/ truesubnet/ )/ ./ 下面/ 给出/ 可/ 重写/ Petri/ 网/ (/ RWPN/ )/ 的/ 概念/ ./ 定义/ 14/ ./ 可/ 重写/ Petri/ 网是/ 一个二元/ 组/ N/ =/ (/ / ,/ N0/ )/ ,/ 其中/ / =/ {/ r1/ ,/ r2/ ,/ …/ ,/ rh/ }/ 为/ 有限/ 的/ 重写/ 规则/ 集/ ,/ N0/ =/ (/ P0/ ,/ T0/ ,/ F0/ ,/ M0/ )/ 为/ 初始/ Petri/ 网/ ./ 一个/ 重写/ 规则/ r/ ∈/ / 是/ 一个/ 四元组/ ,/ 结构/ 为/ r/ =/ (/ L/ ,/ R/ ,/ ·/ τ/ ,/ τ/ ·/ )/ ,/ 其中/ :/ (/ 1/ )/ L/ =/ (/ PL/ ,/ TL/ ,/ FL/ ,/ ML/ )/ 和/ R/ =/ (/ PR/ ,/ TR/ ,/ FR/ ,/ MR/ )/ 为/ Petri/ 网/ ,/ 分别/ 称为/ 规则/ r/ 的/ 左手/ 和/ 右手/ ;/ (/ 2/ )/ ·/ τ/ / (/ PL/ ×/ PR/ )/ ∪/ (/ TL/ ×/ TR/ )/ 称为/ r/ 的/ 输入/ 重写/ 关系/ ,/ 是/ 左手/ L/ 的/ 输入/ 库所/ (/ 变迁/ )/ 关联/ 到/ 右手/ R/ 的/ 输入/ 库所/ (/ 变迁/ )/ 的/ 二元关系/ ,/ 即/ PLTL/ ·/ τ/ / TR/ ,/ ·/ τ/ PR/ / PL/ ,/ ·/ τ/ TR/ / TL/ ;/ (/ 3/ )/ τ/ ·/ / (/ PL/ ×/ PR/ )/ ∪/ (/ TL/ ×/ TR/ )/ 称为/ r/ 的/ 输出/ 重写/ 关系/ ,/ 是/ 左手/ L/ 的/ 输出/ 库所/ (/ 变迁/ )/ 关联/ 到/ 右手/ R/ 的/ 输出/ 库所/ (/ 变迁/ )/ 的/ 二元关系/ ,/ 即/ PL/ τ/ ·/ / PR/ ,/ TL/ τ/ ·/ / TR/ ,/ τ/ ·/ PR/ / PL/ ,/ τ/ ·/ TR/ / TL/ ./ 可/ 重写/ Petri/ 网/ N/ =/ (/ / ,/ N0/ )/ 的/ 库/ 所集/ P/ 、/ 变迁/ 集/ T/ 和/ 流/ 关系/ F/ 由/ 下列/ 公式/ 给出/ ,/ 其中/ f/ 是/ L/ 到/ N0/ 的/ 一个/ 全/ 嵌入/ ,/ 即/ f/ :/ L/ →/ N0/ ./ 库所集/ :/ P/ =/ P0/ -/ f/ (/ PL/ )/ +/ PR/ ,/ 变迁/ 集/ :/ T/ =/ T/ -/ f/ (/ TL/ )/ +/ TR/ ,/ 流/ 关系/ :/ F/ (/ x/ ,/ y/ )/ =/ 库所/ p/ ∈/ P/ ,/ 标识/ M/ (/ p/ )/ 由下式/ 给出/ M/ (/ p/ )/ =/ ./ 定义/ 15/ ./ 可/ 重写/ Petri/ 网/ N/ =/ (/ / ,/ N0/ )/ 的/ 状态/ 可达/ 图为/ G/ (/ N/ )/ ,/ 它/ 的/ 节点/ 为/ N/ 的/ 状态/ ,/ 它/ 的/ 弧/ 的/ 描述/ 如下/ :/ 变迁/ 使能/ :/ 由/ 状态/ M/ 到/ 状态/ M/ 的/ 弧/ 标注/ 了/ 变迁/ t/ ,/ 即/ 在/ 状态/ M/ 下/ ,/ 变迁/ t/ 能够/ 使能/ ,/ 并且/ 到达/ 一个/ 新/ 状态/ M/ :/ (/ N0/ ,/ M/ )/ →/ / / t/ (/ N/ ,/ M/ )/ / (/ N/ =/ N0/ ∧/ M/ [/ t/ 〉/ )/ ./ 组态/ 变化/ :/ 由/ 状态/ M/ 到/ 状态/ M/ 的/ 弧/ 标注/ 了/ 重写/ 规则/ r/ =/ (/ L/ ,/ R/ ,/ ·/ τ/ ,/ τ/ ·/ )/ ,/ 即/ 存在/ 一个/ 全/ 嵌入/ f/ :/ L/ →/ N0/ 使得/ / x/ ∈/ P0/ ∪/ T0/ ∧/ x/ / f/ (/ L/ )/ ∧/ / y/ ∈/ L/ :/ x/ ∈/ ·/ f/ (/ y/ )/ / y/ ∈/ Dom/ (/ ·/ τ/ )/ ∨/ x/ ∈/ f/ (/ y/ )/ ·/ / y/ ∈/ Dom/ (/ τ/ ·/ )/ ./ 为了/ 更好/ 地/ 说明/ 定义/ 14/ 和/ 定义/ 15/ ,/ 下面/ 我们/ 给出/ 一个/ 简单/ 的/ 例子/ ./ 图/ 1/ (/ a/ )/ 中/ 给出/ 了/ 重写/ 规则/ ,/ 其中/ 输入/ 重写/ 规则/ 关系/ 为/ ·/ τ/ =/ {/ (/ {/ pstart/ }/ ,/ {/ ps1/ ,/ ps2/ }/ )/ }/ ,/ 输出/ 重写/ 规则/ 关系/ 为/ τ/ ·/ =/ {/ (/ {/ pend/ }/ ,/ {/ pend/ }/ )/ }/ ./ 图/ 1/ (/ b/ )/ 给出/ 了/ 重写/ 过程/ ,/ 根据/ 定义/ 14/ 和/ 定义/ 15/ ,/ 可以/ 方便/ 地求/ 出/ N/ =/ (/ / ,/ N0/ )/ 的/ 位置/ 集/ P/ 、/ 变迁/ 集/ T/ 、/ 流/ 关系/ F/ 、/ 标识/ M/ 和/ 状态/ 可达图/ G/ (/ N/ )/ ,/ 说明/ 了/ 系统/ (/ N0/ ,/ M/ )/ 在线/ 运用/ 了/ 重写/ 规则/ r/ =/ {/ L/ ,/ R/ ,/ ·/ τ/ ,/ τ/ ·/ }/ 后/ 到达/ 的/ 新/ 状态/ (/ N/ ,/ M/ )/ ,/ 重写/ 后/ 系统/ 中/ 的/ 标识/ 增加/ 了/ 一倍/ ./ 定义/ 16/ ./ 位置/ 可/ 重写/ Petri/ 网/ N/ =/ (/ / ,/ N0/ )/ 是/ 一个/ 可/ 重写/ Petri/ 网/ ,/ 其中/ :/ 一个/ 可/ 重写/ 规则/ r/ ∈/ / 是/ 一个/ 四元组/ ,/ 结构/ 为/ r/ =/ (/ L/ ,/ R/ ,/ ·/ τ/ ,/ τ/ ·/ )/ ,/ 称为/ 位置/ 重写/ 规则/ ,/ 其中/ :/ (/ 1/ )/ L/ =/ (/ PL/ ,/ TL/ ,/ FL/ ,/ ML/ )/ 和/ R/ =/ (/ PR/ ,/ TR/ ,/ FR/ ,/ MR/ )/ 为/ Petri/ 网/ ,/ 分别/ 称为/ 规则/ r/ 的/ 左手/ 和/ 右手/ ,/ PL/ =/ PLi/ ∪/ PLo/ ∪/ PLr/ ,/ 其中/ PLi/ 、/ PLo/ 和/ PLr/ 是/ PL/ 的/ 划分/ ./ 对/ / p/ ∈/ PLi/ ,/ ·/ p/ =/ / ;/ 对/ / p/ ∈/ PLo/ ,/ p/ ·/ =/ / ./ PLi/ 和/ PLo/ 分别/ 描述/ 左手/ 库所/ 集合/ 的/ 输入/ 和/ 输出/ 接口/ ./ PR/ =/ PRi/ ∪/ PRo/ ∪/ PRr/ ,/ 其中/ PRi/ 、/ PRo/ 和/ PRr/ 是/ PR/ 的/ 划分/ ./ 对/ / p/ ∈/ PRi/ ,/ ·/ p/ =/ / ;/ 对/ / p/ ∈/ PRo/ ,/ p/ ·/ =/ / ./ PRiPage6/ 和/ PRo/ 分别/ 描述/ 右手/ 库所/ 集合/ 的/ 输入/ 和/ 输出/ 接口/ ./ 如果/ 析取/ 式/ (/ PLi/ =/ / )/ ∨/ (/ PLo/ =/ / )/ ∨/ (/ PRi/ =/ / )/ ∨/ (/ PRo/ =/ / )/ 为/ 真/ ,/ 则/ 称/ N/ =/ (/ / ,/ N0/ )/ 为/ 退化/ 的/ 位置/ 可/ 重写/ Petri/ 网/ ./ (/ 2/ )/ 重写/ 关系/ ·/ τ/ 和/ τ/ ·/ 分别/ 称为/ 输入/ 位置/ 重写/ 关系/ 和/ 输出/ 位置/ 重写/ 关系/ ,/ 即/ ·/ τ/ / (/ PLi/ ×/ PRi/ )/ ,/ τ/ ·/ / (/ PLo/ ×/ PRo/ )/ ./ 位置/ 可/ 重写/ Petri/ 网/ N/ =/ (/ / ,/ N0/ )/ 的/ 位置/ 集/ P/ 、/ 变迁/ 集/ T/ 和/ 流/ 关系/ F/ 由/ 下列/ 公式/ 给出/ ,/ 其中/ f/ 是/ L/ 到/ N0/ 的/ 一个/ 全/ 嵌入/ ,/ 即/ f/ :/ L/ →/ N0/ ./ 则/ 库/ 所/ 集为/ P/ =/ P0/ -/ f/ (/ PL/ )/ +/ PR/ ,/ 变迁/ 集为/ T/ =/ T/ -/ f/ (/ TL/ )/ +/ TR/ ./ 流/ 关系/ F/ 为/ F/ (/ x/ ,/ y/ )/ =/ ./ 对/ / p/ ∈/ P/ ,/ 标识/ M/ (/ p/ )/ 为/ M/ (/ p/ )/ =/ M/ (/ p/ )/ ,/ 烄/ max/ {/ M/ (/ p/ )/ p/ ∈/ p/ ·/ τ/ ∪/ p/ τ/ ·/ ,/ M/ (/ p/ )/ }/ ,/ 若/ p/ ∈/ PRi/ ∪/ PRo/ 烅/ M/ (/ p/ )/ ,/ 烆/ 设/ N0/ ,/ L/ ,/ R/ 的/ 关联矩阵/ 分别/ 为/ 犃/ 1/ ,/ 犃/ L/ ,/ 犃/ R/ ,/ 其中/ 犃/ i/ 为/ ni/ ×/ mi/ 矩阵/ ,/ i/ =/ 1/ ,/ L/ ,/ R/ ,/ 记/ 犃/ 1/ =/ 犃/ 11/ 犃/ 12/ ,/ 其中/ ,/ 犃/ 11/ 、/ 犃/ 12/ 、/ 犃/ 22/ 分别/ 是/ T/ -/ TL/ 与/ P/ -/ PL/ 、/ T/ -/ TL/ 与/ PL/ 、/ TL/ 与/ PL/ 所/ 对应/ 的/ 关联/ 子阵/ ;/ 显然/ 犃/ 22/ =/ 犃/ L/ ,/ 同理/ 犃/ 12/ =/ 犃/ PLiTL/ 与/ PLi/ 和/ PLo/ 的/ 关联矩阵/ ,/ 进一步/ 得到/ 位置/ 可/ 重写/ Petri/ 网/ N/ =/ (/ / ,/ N0/ )/ 的/ 关联矩阵/ 犃/ =/ 犃/ 11/ 犃/ 12/ ,/ 其中/ 犃/ 12/ 是/ T/ -/ TL/ 与/ PR/ 所/ 对应/ 的/ 关联/ 子阵/ ,/ 同理/ 犃/ 12/ =/ 犃/ PRiPRi/ 和/ PRo/ 的/ 关联矩阵/ ./ 3/ 位置/ 可/ 重写/ Petri/ 网/ 的/ 性质/ 分析/ 12/ 犃/ PRo/ [/ ]/ 12/ ,/ 其中/ 犃/ PRi/ 图/ 1/ 展示/ 了/ 位置/ 可/ 重写/ Petri/ 网/ 的/ 重写/ 过程/ 和/ 结果/ ./ 由/ 定义/ 15/ 和/ 定义/ 16/ 可知/ ,/ 位置/ 可/ 重写/ Petri/ 网是/ 重写/ Petri/ 网/ 的/ 一个/ 子类/ ,/ 该/ 子类/ 在/ 众多/ 可/ 重构/ 系统/ 的/ 建模/ 中/ 占有/ 较大/ 比例/ ,/ 因此/ 研究/ 该/ 子类/ 性质/ 对系统/ 建模/ 具有/ 重要/ 意义/ ./ 本节/ 主要/ 分析/ 位置/ 可/ 重写/ Petri/ 网/ 的/ 一些/ 基本/ 性质/ 及/ 定理/ ./ 引理/ 1/ [/ 1/ ]/ ./ 设/ 犃/ 是/ Petri/ 网/ N/ 的/ 关联矩阵/ ,/ 则/ N/ 为/ 结构/ 有界/ Petri/ 网/ (/ 守恒/ 网/ )/ 当且/ 仅/ 当/ 存在/ m/ 维/ 正整数/ 向量/ 狔/ 使得/ 犃/ 狔/ / 0/ (/ 犃/ 狔/ =/ 0/ )/ ./ 引理/ 2/ [/ 50/ ]/ ./ Petri/ 网/ N/ 是/ 良构/ 的/ ,/ 则/ N/ 为/ 结构/ 有界/ Petri/ 网/ ,/ 若/ N/ 是/ 强/ 连通/ 的/ ,/ 则/ N/ 是/ 活/ 的/ ./ 定理/ 1/ ./ 设/ N/ =/ (/ / ,/ N0/ )/ 是/ 位置/ 可/ 重写/ Petri/ 网/ ,/ 若/ N0/ 是/ 结构/ 有界/ 的/ ,/ 重写/ 规则/ 的/ 右手/ R/ 是/ 良构/ 的/ ,/ 则/ N/ =/ (/ / ,/ N0/ )/ 是/ 结构/ 有界网/ ./ 证明/ ./ 要/ 证明/ 位置/ 可/ 重写/ Petri/ 网/ N/ =/ (/ / ,/ N0/ )/ 是/ 结构/ 有界/ 的/ ,/ 当且/ 仅/ 当/ 证明/ 存在/ 一个/ 正整数/ 向量/ 犢/ 使得/ 犃/ 犢/ / 0/ ,/ 即/ 犃/ 犢/ =/ 犃/ 11/ 犃/ 12/ 犃/ 11Y11/ +/ 犃/ 12Y12/ +/ 犃/ RY12/ / 0/ ./ 量/ 犢/ 1/ ,/ 使得/ 犃/ 1/ 犢/ 1/ / 0/ ,/ 由/ 犃/ 1/ =/ 犃/ 11/ 犃/ 12/ 犃/ 11Y11/ +/ 犃/ 12Y12/ +/ 犃/ 22Y12/ / 0/ ,/ 犃/ 11Y11/ / 0/ ,/ 犃/ 22Y12/ / 0/ 和/ 犃/ 12Y12/ / 0/ ./ 下面/ 分别/ 构造/ 犢/ 1/ 、/ 犢/ 2/ ,/ 使得/ 犃/ 犢/ =/ 犃/ 11/ 犃/ 12/ 因为/ Petri/ 网/ N0/ 是/ 结构/ 有界/ 的/ ,/ 即/ 存在/ 整数/ 向/ 0/ 犃/ [/ ]/ RR/ 是/ 结构/ 有界/ 的/ ,/ 由/ N0/ 和/ R/ 的/ 结构/ 有界性/ ,/ 可以/ 得到/ T/ -/ TL/ 与/ PR/ 的/ 子网/ 也/ 是/ 结构/ 有界/ 的/ ,/ 即/ 存在/ 整数/ 向量/ 犢/ 2/ ,/ 使得/ 犃/ R/ 犢/ 2/ / 0/ ,/ 犃/ 12/ 犢/ 2/ / 0/ ./ 令犢/ 1/ =/ Y11/ ,/ 于是/ 得到/ 犃/ 11/ 犢/ 1/ +/ 犃/ 12/ 犢/ 2/ +/ 犃/ R/ 犢/ 2/ / 0/ ,/ 由于/ 犃/ 犢/ =/ 犃/ 11/ 犃/ 120/ 犃/ [/ ]/ R/ 使得/ 犃/ 犢/ / 0/ ,/ 由/ 引理/ 1/ 知/ ,/ N/ =/ (/ / ,/ N0/ )/ 是/ 结构/ 有界网/ ./ 同理可证/ 定理/ 2/ 成立/ ./ 定理/ 2/ ./ 设/ N/ =/ (/ / ,/ N0/ )/ 是/ 位置/ 可/ 重写/ Petri/ 网/ ,/ 若/ N0/ 是/ 是/ 守恒/ 的/ ,/ 重写/ 规则/ 的/ 右手/ R/ 是/ 良构/ 和/ 守恒/ 的/ ,/ 则/ N/ =/ (/ / ,/ N0/ )/ 是/ 守恒/ 网/ ./ 引理/ 3/ [/ 1/ ]/ ./ 设/ 犃/ 是/ Petri/ 网/ N/ 的/ 关联矩阵/ ,/ 则/ N/ 为/ 可/ 重复/ Petri/ 网/ (/ 协调/ 网/ )/ 当且/ 仅/ 当/ 存在/ n/ 维/ 正整数/ 向量/ 犡/ 使得/ 犃/ T/ 犡/ / 0/ (/ 犃/ T/ 犡/ =/ 0/ )/ ./ 定理/ 3/ ./ 设/ N/ =/ (/ / ,/ N0/ )/ 是/ 位置/ 可/ 重写/ Petri/ 网/ ,/ 若/ N0/ 是/ 可/ 重复/ 的/ ,/ 重写/ 规则/ 的/ 右手/ R/ 是/ 良构/ 的/ ,/ 则/ N/ =/ (/ / ,/ N0/ )/ 是/ 可/ 重复/ 网/ ./ 证明/ ./ N0/ 是/ 可/ 重复/ 的/ ,/ 则/ 存在/ n1/ 维/ 正整数/ 向量/ 犡/ 1/ =/ (/ X11/ ,/ X12/ )/ ,/ 使得/ 犃/ T1/ 犡/ 1/ / 0/ ,/ 由/ 犃/ 1/ =/ 犃/ 11/ 犃/ 12Page7/ 犃/ T11X11/ / 0/ 烅/ 烄/ 犃/ T12X11/ +/ 犃/ T/ 烆/ ,/ 使得/ 犃/ T/ 犡/ =/ 犃/ T/ 犡/ 1/ 烌/ 烄/ 犡/ 烆/ 烎/ 2/ 构/ 的/ ,/ 由/ 定义/ 9/ 可知/ ,/ 对/ / p/ ∈/ PRi/ ,/ 都/ 存在/ 唯一/ 一条/ 基本/ 路径/ 到达/ PRo/ ,/ 使得/ P/ ·/ 则/ 存在/ n2/ 维/ 正整数/ 向量/ 犡/ 2/ ,/ 使得/ 犃/ T/ 令/ 犡/ 1/ =/ X11/ ,/ 则/ 数/ 向量/ 犡/ =/ X11/ 由/ 引理/ 3/ ,/ N/ =/ (/ / ,/ N0/ )/ 是/ 可/ 重复/ 网得证/ ./ 证毕/ ./ 同理可证/ 下述/ 结论/ 成立/ ./ 定理/ 4/ ./ 设/ N/ =/ (/ / ,/ N0/ )/ 是/ 位置/ 可/ 重写/ Petri/ 网/ ,/ 若/ N0/ ,/ R/ 都/ 是/ 协调/ 网/ ,/ 重写/ 规则/ 的/ 右手/ R/ 是/ 良构/ ,/ 则/ N/ =/ (/ / ,/ N0/ )/ 是/ 可/ 重复/ 网/ ./ 引理/ 4/ [/ 42/ ]/ ./ 设/ N/ 为/ 一个/ Petri/ 网/ ,/ M/ 为/ N/ 的/ 一个/ 标识/ ,/ 记/ T/ =/ {/ t/ ∈/ T/ |/ / M/ [/ t/ 〉/ }/ ,/ P/ =/ {/ p/ ∈/ P/ |/ M/ (/ p/ )/ =/ 0/ }/ ,/ P/ =/ ·/ T/ ∩/ P/ ,/ 如果/ ·/ P/ / T/ ,/ 则/ P/ 是/ N/ 的/ 一个/ 死锁/ ,/ 且/ M/ (/ P/ )/ =/ 0/ ./ 引理/ 5/ ./ 设/ N/ =/ (/ / ,/ N0/ )/ 是/ 位置/ 可/ 重写/ Petri/ 网/ ,/ 若/ N0/ 是/ 活/ 的/ ,/ R/ 是/ 良构/ 的/ ,/ PRi/ ∪/ PRo/ 的/ 外延/ 子网/ 不含/ 非空/ 死锁/ ,/ 则/ N/ =/ (/ / ,/ N0/ )/ 是/ 活/ 的/ ./ 证明/ ./ 反证法/ ./ 假设/ N/ =/ (/ / ,/ N0/ )/ 不是/ 活/ 的/ ,/ 则/ / M1/ ∈/ R/ (/ M0/ )/ ,/ / t/ ∈/ T/ ,/ 对/ / M/ ∈/ R/ (/ M1/ )/ :/ / M/ [/ t/ 〉/ ,/ 记/ T/ =/ {/ t/ ∈/ T/ |/ / M/ ∈/ R/ (/ M1/ )/ :/ / M/ [/ t/ 〉/ }/ ,/ PM1/ =/ {/ p/ ∈/ P/ |/ M1/ (/ P/ )/ =/ 0/ }/ ,/ P1/ =/ ·/ T/ ∩/ PM1/ ;/ 现在/ 考察/ P1/ ,/ 若/ ·/ P1/ / T/ ,/ 即/ / t1/ ∈/ ·/ p1/ 和/ M1/ ∈/ R/ (/ M1/ )/ :/ M1/ [/ t1/ >/ ,/ 显然/ t1/ / T/ ./ 设/ M1/ [/ t1/ >/ M2/ ,/ / p1/ ∈/ P1/ ,/ M2/ (/ p1/ )/ =/ 1/ ,/ 然而/ 由于/ p1/ ∈/ P1/ ,/ 若/ p1/ ∈/ PN/ \/ (/ PRi/ ∪/ PRo/ )/ ,/ 这/ 与/ N0/ 是/ 活/ 的/ 相/ 矛盾/ ,/ 同理/ p1/ / PR/ \/ (/ PRi/ ∪/ PRo/ )/ ,/ 故/ p1/ ∈/ PRi/ ∪/ PRo/ ,/ 以下/ 分/ 两种/ 情况/ 分析/ :/ (/ 1/ )/ p/ ·/ p1/ 中/ 增加/ 的/ 这个/ 标志/ 不能/ 导致/ 任何/ 变迁/ 发生/ ,/ 只能/ “/ 冻结/ ”/ 在/ 那里/ ,/ 令/ PM2/ =/ {/ p/ ∈/ P/ |/ M2/ (/ p/ )/ =/ 0/ }/ ,/ P2/ =/ ·/ T/ ∩/ PM2/ ,/ 显然/ P2/ / P1/ ./ 再/ 分析/ ·/ P2/ ,/ 若/ ·/ P2/ / T/ ,/ 即/ / t2/ ∈/ ·/ P2/ 和/ M2/ ∈/ R/ (/ M2/ )/ ,/ 使得/ M2/ [/ t2/ 〉/ ,/ 则/ t2/ / T/ ./ 设/ M2/ [/ t2/ 〉/ M3/ ,/ 则/ / p2/ ∈/ P2/ ,/ 使/ M3/ (/ p2/ )/ =/ 1/ ,/ 同/ p1/ 一样/ ,/ p2/ 中/ 的/ 标志/ 也/ “/ 冻结/ ”/ 在/ 那里/ ,/ 不会/ 导致/ 任何/ 变迁/ 发生/ ./ 由于/ M1/ 的/ 有限性/ ,/ 上述/ 过程/ 重复/ 有限/ 步/ 之后/ ,/ 必然/ 会/ 遇到/ 一个/ Mk/ :/ Pk/ =/ ·/ T/ ∩/ PMk/ ,/ PMk/ =/ {/ p/ ∈/ P/ |/ Mk/ (/ p/ )/ =/ 0/ }/ 使得/ / t/ ∈/ ·/ Pk/ ,/ / M/ ∈/ R/ (/ Mk/ )/ :/ / M/ [/ t/ 〉/ ./ 这时/ 便/ 有/ ·/ Pk/ / T/ ,/ 由/ 引理/ 4/ 知/ ,/ Pk/ 是/ 一个/ 死锁/ ,/ 且/ Pk/ ≠/ / (/ 否则/ ·/ T/ ∩/ Pk/ =/ / →/ / t/ ∈/ T/ :/ Mk/ [/ t/ 〉/ )/ 这与题/ 设相/ 矛盾/ ,/ 命题/ 得证/ ./ (/ 2/ )/ p/ ·/ 死锁/ ,/ 这与题/ 设相/ 矛盾/ ,/ 命题/ 得证/ ./ 证毕/ ./ 引理/ 6/ [/ 1/ ]/ ./ 设/ N/ 是/ 一个/ Petri/ 网/ ,/ M/ 是/ 网/ N/ 的/ 一个/ 标识/ ,/ D/ 是/ N/ 的/ 一个/ 死锁/ ,/ S/ 是/ N/ 的/ 一个/ 陷阱/ ,/ D/ 不/ 被/ M/ 标识/ / / M/ ∈/ R/ (/ M/ )/ ,/ D/ 不/ 被/ M/ 标识/ ;/ S/ 被/ M/ 标识/ / / M/ ∈/ R/ (/ M/ )/ ,/ S/ 被/ M/ 标识/ ./ 定理/ 5/ ./ 设/ N/ =/ (/ / ,/ N0/ )/ 是/ 位置/ 可/ 重写/ Petri/ 网/ ,/ N0/ 是/ 活/ 的/ ,/ R/ 是/ 良构/ 的/ ,/ 若/ N/ =/ (/ / ,/ N0/ )/ 是/ 活/ 的/ ,/ 当且/ 仅/ 当/ PRi/ ∪/ PRo/ 的/ 外延/ 子网/ 的/ 每个/ 极小/ 死锁/ Q/ 中均/ 包含/ 一个/ 含有/ 标志/ 的/ 陷阱/ ./ Pk/ -/ 1/ ,/ Tk/ =/ ·/ Pk/ -/ 1/ ,/ T/ -/ k/ =/ Pk/ -/ 1/ ·/ -/ ·/ Pk/ -/ 1/ ./ Pk/ =/ / ,/ 即/ ·/ (/ ·/ Pk/ -/ 1/ )/ =/ / 或/ Pk/ -/ 1/ =/ / ,/ 由/ NPk/ -/ 1/ 的/ 构造/ 知/ Pk/ -/ 1/ =/ / 不/ 成立/ ./ 因为/ ,/ 若/ ·/ Pk/ -/ 1/ =/ / ,/ 则/ Pk/ -/ 1/ 内/ 的/ 标志/ 在/ Pk/ -/ 1/ ·/ 的/ 变迁/ 发生/ 之后/ ,/ Pk/ -/ 1/ 的/ 标志/ 将/ 丢失/ ,/ 则/ Pk/ -/ 1/ ·/ 将/ 永远/ 不再/ 发生/ ,/ 这/ 与/ NPk/ -/ 1/ 是/ 活/ 的/ 相/ 矛盾/ ,/ 即/ ·/ Pk/ -/ 1/ ≠/ 证明/ ./ 先证/ 充分性/ ./ (/ 1/ )/ Q/ 既/ 是/ 死锁/ 也/ 是/ 陷阱/ ,/ 这时/ 只/ 需/ 证明/ M0/ (/ Q/ )/ ≠/ 0/ ./ 由于/ Q/ 既/ 是/ 陷阱/ 又/ 是/ 死锁/ ,/ 即/ ·/ Q/ =/ Q/ ·/ ,/ 若/ M0/ (/ Q/ )/ =/ 0/ ,/ 因/ Q/ 是/ 死锁/ ,/ 由/ 引理/ 6/ 知/ / M/ ∈/ R/ (/ M0/ )/ ,/ M/ (/ Q/ )/ =/ 0/ ,/ 则/ / t/ ∈/ Q/ ·/ ,/ / M/ ∈/ R/ (/ M0/ )/ :/ / M/ [/ t/ 〉/ ,/ 这/ 与/ N/ =/ (/ / ,/ N0/ )/ 是/ 活/ 的/ 相/ 矛盾/ ,/ 故/ M0/ (/ Q/ )/ ≠/ 0/ 成立/ ./ (/ 2/ )/ Q/ 不是/ 陷阱/ ,/ 则/ 一定/ / t/ ∈/ Q/ ·/ ,/ t/ / ·/ Q/ ,/ 记/ T1/ =/ ·/ Q/ ,/ T/ -/ 1/ =/ {/ t/ |/ t/ ∈/ Q/ ·/ ∧/ t/ / ·/ Q/ }/ ,/ P1/ =/ {/ p/ |/ p/ ∈/ ·/ T1/ ∩/ Q/ }/ ,/ NP1/ =/ (/ P1/ ,/ T1/ ;/ F1/ ,/ M/ (/ P1/ )/ )/ ,/ F1/ =/ (/ (/ P1/ ×/ T1/ )/ ∪/ (/ T1/ ×/ P1/ )/ )/ ∩/ F/ ,/ 由/ N/ =/ (/ / ,/ N0/ )/ 的/ 活性/ 知/ ,/ 则/ NP1/ 也/ 是/ 活/ 的/ ./ 因/ Q/ 是/ 死锁/ ,/ 由/ 引理/ 6/ 知/ ,/ Q/ 以外/ 的/ 标志/ 不会/ 进入/ Q/ ,/ 而/ T/ -/ 1/ 的/ 发生/ 会/ 使/ Q/ 中/ 的/ 标志/ 减少/ ,/ P1/ 若/ 是/ 陷阱/ ,/ 由于/ NP1/ 是/ 活/ 的/ ,/ 则/ M/ (/ P1/ )/ ≠/ 0/ ,/ 即得证/ ./ 若/ P1/ ·/ / ·/ P1/ ,/ 重复/ 以上/ 步骤/ ,/ 将/ 得到/ 一个/ 活网/ NP2/ =/ (/ P2/ ,/ T2/ ;/ F2/ ,/ M/ (/ P2/ )/ )/ ,/ 在/ 执行/ 若干/ 步/ 之后/ 就/ 会/ 出现/ 下述/ 情况/ :/ ①/ Pk/ ≠/ φ/ ,/ Pk/ ·/ / ·/ Pk/ ,/ 且/ M/ (/ Pk/ )/ ≠/ 0/ ,/ 即/ 结论/ ②/ Pk/ =/ φ/ ,/ 由/ PNpk/ 的/ 构造/ 过程/ 可知/ ,/ Pk/ =/ ·/ Tk/ ∩/ 得证/ ./ Page8/ / ;/ 若/ ·/ Pk/ -/ 1/ ≠/ / ,/ 即/ Tk/ ≠/ / ,/ 则/ NPk/ 是/ 只/ 含有/ 变迁/ 的/ Petri/ 网/ ,/ ·/ Tk/ 中/ 的/ 标志/ 可以/ 经过/ T/ -/ k/ 流到/ NPk/ -/ 1/ 之外/ ,/ 进而/ 流到/ Q/ 之外/ ,/ 使得/ Tk/ 中/ 的/ 变迁/ 永远/ 不能/ 发生/ ,/ 这/ 与/ N/ =/ (/ / ,/ N0/ )/ 是/ 活/ 的/ 相/ 矛盾/ ./ 综上所述/ ,/ 充分性/ 得证/ ./ 再证/ 必要性/ (/ 反证法/ )/ ./ 假设/ N/ =/ (/ / ,/ N0/ )/ 不是/ 活/ 的/ ,/ 由/ 引理/ 5/ 的/ 证明/ 过程/ 知/ :/ PRi/ ∪/ PRo/ 外延/ 子网/ 含有/ 空/ 的/ 死锁/ ,/ 而由题/ 设知/ PRi/ ∪/ PRo/ 外延/ 子网/ 含/ 的/ 极小/ 死锁/ 中/ 都/ 含有/ 陷阱/ ,/ 由/ 引理/ 6/ 和题/ 设知/ ,/ 陷阱/ 被/ M/ 标识/ / / M/ ∈/ R/ (/ M/ )/ ,/ 陷阱/ 被/ M/ 标识/ ,/ 因此/ 无论/ 变迁/ 怎样/ 发生/ ,/ 都/ 不/ 可能/ 使/ PRi/ ∪/ PRo/ 外延/ 子网/ 中/ 的/ 死锁/ 为空/ ,/ 这与题/ 设相/ 矛盾/ ,/ 即/ 必要性/ 得证/ ./ 定理/ 6/ ./ 共享/ 合成/ Petri/ 网是/ 位置/ 可/ 重写/ Petri/ 网/ 的/ 一个/ 实例/ ./ 证明/ ./ 只/ 需/ 证明/ 位置/ 可/ 重写/ Petri/ 网/ 能够/ 模拟/ 共享/ 合成/ Petri/ 网/ ,/ 下面/ 我们/ 给出/ 一个/ 构造性/ 证明/ ./ 根据/ 共享/ 合成/ Petri/ 网/ 的/ 概念/ ,/ 令/ N1/ 或/ N2/ 为/ 位置/ 可/ 重写/ Petri/ 网/ N/ =/ (/ / ,/ N0/ )/ ,/ 不防令/ N1/ =/ N0/ ,/ 通过/ 构建/ 重写/ 规则/ ,/ 使得/ 重写/ 规则/ 的/ 左手/ L/ 是/ 一个/ 仅/ 含有/ 库所/ 的/ 退化/ Petri/ 网/ (/ 重写/ 规则/ r/ =/ (/ L/ ,/ R/ ,/ ·/ τ/ ,/ τ/ ,/ τ/ ·/ )/ ,/ 对/ / p/ ∈/ P0/ =/ P1/ ∩/ P2/ ,/ 令/ PLi/ =/ {/ p/ }/ ,/ TLi/ =/ / ,/ FLi/ =/ / )/ ,/ 重写/ 规则/ 的/ 右手/ R/ 是/ 一个/ Petri/ 网/ N2/ 的/ 一个/ 子网/ ,/ 且/ 该/ 子网/ 是/ 含有/ 左手/ L/ 的/ 库/ 所/ p/ ,/ 但/ 不/ 含有/ 其它/ 共享/ 库所/ P0/ \/ {/ p/ }/ 中/ 任何/ 库所/ 的/ 最大/ 连通/ 子网/ ,/ 用/ R/ 重写/ N0/ ./ 令/ N2/ =/ N2/ -/ R/ ,/ 继续/ 重写/ 规则/ 的/ 构建/ 过程/ ,/ 经过/ |/ P0/ |/ 次/ (/ |/ P0/ |/ 表示/ 集合/ P0/ 元素/ 的/ 个数/ )/ 重写/ 后/ 得到/ N1/ 和/ N2/ 共享/ 合成/ Petri/ 网/ N/ ./ 具体/ 构造/ 过程/ 见/ 算法/ 1/ ./ 由/ 上面/ 的/ 构造/ ,/ 可以/ 知道/ N/ =/ (/ / ,/ N0/ )/ 是/ 一个/ 退化/ 的/ 位置/ 可/ 重写/ Petri/ 网/ ,/ 经过/ |/ P0/ |/ 个/ 位置/ 重写/ 过程/ ,/ 我们/ 就/ 可以/ 得到/ N1/ 和/ N2/ 共享/ 合成/ Petri/ 网/ ,/ 这/ 是因为/ 位置/ 可/ 重写/ Petri/ 网/ N/ =/ (/ / ,/ N0/ )/ 在结构上/ 满足/ :/ ①/ P/ =/ P1/ ∪/ P2/ ,/ P0/ =/ P1/ ∩/ P2/ ≠/ / ;/ ②/ T/ =/ T1/ ∪/ T2/ ,/ T1/ ∩/ T2/ =/ / ;/ ③/ F/ =/ F1/ ∪/ F2/ 是/ 显然/ 的/ ./ 由/ 位置/ 重写/ Petri/ 网/ 标识/ 的/ 定义/ ,/ 同样/ 满足条件/ :/ ④/ M0/ (/ P/ )/ =/ max/ {/ M01/ (/ P/ )/ ,/ M02/ (/ P/ )/ }/ ,/ 若/ P/ ∈/ P1/ ∩/ P2/ 烅/ 烄/ M0i/ (/ P/ )/ ,/ 烆/ i/ =/ 1/ ,/ 2/ ;/ 即/ 位置/ 可/ 重写/ Petri/ 网/ N/ =/ (/ / ,/ N0/ )/ 的/ 重写/ 结果/ 满足/ 共享/ 合成/ Petri/ 网/ 概念/ ,/ 命题/ 得证/ ./ 证毕/ ./ 算法/ 1/ ./ 通过/ Petri/ 网/ N2/ 构造/ 重写/ 规则/ 的/ 右手/ Ri/ ./ 1/ ./ i/ =/ 1toP0/ ;/ 2/ ./ 初始化/ ,/ PRi/ =/ / ,/ TRi/ =/ / ,/ FRi/ =/ / ,/ Y/ =/ / ;/ 3/ ./ 取/ 任意/ 一个/ p/ ∈/ P0/ ;/ 4/ ./ Y/ ←/ Y/ ∪/ {/ p/ }/ #/ {/ 构造/ 含有/ p/ ,/ 但/ 不/ 含有/ P0/ \/ {/ p/ }/ 中/ 任何/ 位置/ 的/ 最大/ 连通/ 子网/ ,/ 从/ p/ 开始/ 遍历/ Petri/ 网/ PN2/ ,/ 直到/ 求得/ 最大/ 子网/ }/ 5/ ./ 判断/ 是否/ Y/ =/ / ,/ 不为/ 空/ ,/ 执行/ 步/ 6/ ,/ 若为/ 空/ ,/ 执行/ 步/ 17/ ;/ 6/ ./ 取/ y/ ∈/ Y/ ;/ 7/ ./ x/ ←/ y/ ,/ Y/ ←/ Y/ -/ {/ x/ }/ ;/ 8/ ./ 判断/ 是否/ (/ P2/ \/ P0/ )/ ∪/ T2/ =/ / ,/ 若为/ 空/ ,/ 则/ 执行/ 步/ 9/ ,/ 不为/ 空/ ,/ 则/ 执行/ 步/ 10/ ;/ 9/ ./ 判断/ 是否/ F2/ =/ / ,/ 不为/ 空/ ,/ 执行/ 步/ 16/ ,/ 为空/ ,/ 则/ 执行/ 步/ 18/ ;/ 则/ 返回/ 步/ 5/ ;/ 10/ ./ 取/ y/ ∈/ (/ P2/ \/ P0/ )/ ∪/ T2/ ,/ 若/ (/ x/ ,/ y/ )/ ∈/ F/ ,/ 执行/ 步/ 11/ ,/ 否/ 11/ ./ 判断/ y/ 是否/ 标记/ 已/ 访问/ ,/ 若/ 未/ 被/ 访问/ ,/ 则/ 执行/ 步/ 12/ ,/ 若/ y/ 已/ 被/ 访问/ ,/ 则/ 执行/ 步/ 14/ ;/ 12/ ./ 如果/ y/ ∈/ P2/ ,/ 则/ 执行/ 步/ 13/ ;/ 否则/ ,/ 执行/ 步/ 14/ ;/ 13/ ./ TRi/ ←/ TRi/ ∪/ {/ x/ }/ ,/ PRi/ ←/ PRi/ ∪/ {/ y/ }/ ;/ 14/ ./ y/ ∈/ T2/ :/ PRi/ ←/ PRi/ ∪/ {/ x/ }/ ,/ TRi/ ←/ TRi/ ∪/ {/ y/ }/ ;/ 15/ ./ FRi/ ←/ FRi/ ∪/ {/ (/ x/ ,/ y/ )/ }/ ,/ Y/ ←/ Y/ ∪/ {/ y/ }/ ,/ 对/ y/ 标记/ 已/ 访问/ ;/ 16/ ./ FRi/ ←/ FRi/ ∪/ {/ (/ x/ ,/ y/ )/ }/ ,/ 返回/ 步/ 10/ ;/ 17/ ./ P0/ ←/ P0/ \/ {/ p/ }/ ;/ 16/ ./ T2/ ←/ T2/ -/ TRi/ ,/ P2/ ←/ P2/ -/ PRi/ ,/ F2/ ←/ F2/ -/ FRi/ ;/ 18/ ./ i/ ←/ i/ +/ 1/ ,/ 返回/ 步/ 1/ ;/ 19/ ./ 算法/ 终止/ ./ 4/ 性质/ 分析/ 示例/ 在/ 下面/ 图/ 2/ 、/ 图/ 3/ 的/ 示例/ 中/ ,/ 给出/ 重写/ 规则/ 的/ 右手/ R/ 是非/ 良构/ 的/ 两种/ 不同/ 的/ 重写/ 结果/ ./ 由图/ 2/ 分析/ ,/ 显然/ N0/ 是/ 活/ 的/ ,/ R/ 是非/ 良构/ 的/ ,/ N/ =/ (/ / ,/ N0/ )/ 是/ 一个/ 退化/ 的/ 位置/ 可/ 重写/ Petri/ 网/ (/ R/ 重写/ 库所/ p4/ )/ ,/ 位置/ 可/ 重写/ Petri/ 网/ N/ =/ (/ / ,/ N0/ )/ 是/ 有界/ 的/ ,/ 但/ 不是/ 活/ 的/ ./ 由图/ 3/ 分析/ ,/ 显然/ N0/ 是/ 活/ 的/ ,/ R/ 是非/ 良构/ 的/ ,/ N/ =/ (/ / ,/ N0/ )/ 是/ 一个/ 退化/ 的/ 位置/ 可/ 重写/ Petri/ 网/ (/ R/ 重写/ 库所/ p4/ )/ ,/ 位置/ 可/ 重写/ Petri/ 网/ N/ =/ (/ / ,/ N0/ )/ 是/ 活/ 的/ ,/ 但/ 不是/ 有界/ 的/ ./ 由图/ 4/ 分析/ ,/ 显然/ N0/ 是/ 活/ 的/ ,/ R/ 是/ 良构/ 的/ ,/ N/ =/ (/ / ,/ N0/ )/ 是/ 一个/ 退化/ 的/ 位置/ 可/ 重写/ Petri/ 网/ ,/ 位置/ 可/ 重写/ Petri/ 网/ N/ =/ (/ / ,/ N0/ )/ 是/ 结构/ 有界/ 的/ 、/ 活/ 的/ 和/ 可/ 重复/ 的/ ./ 图/ 5/ 给出/ 了/ 共享/ 合成/ Petri/ 网/ 的/ 一个/ 示例/ ,/ 图/ 6/ 给出/ 了/ 位置/ 可/ 重写/ Petri/ 模拟/ 图/ 5/ 的/ 过程/ ./ Page95/ 总结/ 本文/ 在/ 文献/ [/ 2/ -/ 7/ ]/ 等/ 研究/ 的/ 基础/ 上/ ,/ 提出/ 了/ 可/ 重写/ Petri/ 网/ 和/ 位置/ 可/ 重写/ Petri/ 网/ 的/ 概念/ ,/ 分析/ 了/ 位置/ 可/ 重写/ Petri/ 网/ 保持/ 有界性/ (/ 保守/ 性/ )/ 、/ 可重复性/ (/ 协调性/ )/ 及/ 活性/ 等/ 的/ 性质/ ,/ 给出/ 了/ 位置/ 可/ 重写/ Petri/ 网/ 保持/ 活性/ 的/ 一个/ 充要条件/ ,/ 建立/ 了/ 退化/ 的/ 位置/ 可/ 重写/ Petri/ 网/ 模拟/ 共享/ 合成/ Petri/ 网/ 的/ 算法/ ,/ 证明/ 了/ 共享/ 合成/ Petri/ 网是/ 位置/ 可/ 重写/ Petri/ 网/ 的/ 一个/ 实例/ ./ 该/ 结果/ 能够/ 为/ Petri/ 网对/ 动态/ 重构/ 系统/ 的/ 形式化/ 建模/ 提供/ 理论/ 方法/ ,/ 为/ 大规模/ 动态/ 分布式系统/ 的/ 形式化/ 建模/ 和/ 验证/ 提供/ 有效途径/ ./ 今后/ 我们/ 将/ 进一步/ 研究/ 可/ 重写/ Petri/ 网/ 的/ 其它/ 子类/ 的/ 概念/ 和/ 性质/ ,/ Page10/ 图/ 6/ 位置/ 可/ 重写/ Petri/ 网/ 模拟/ 共享/ 合成/ Petri/ 网/ 不断丰富/ 可/ 重写/ Petri/ 网/ 的/ 理论/ 成果/ ./ 

