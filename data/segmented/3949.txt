Page1/ 链路/ 质量/ 与/ 负载/ 敏感/ 的/ 无线/ Mesh/ 网络/ 路由/ 协议/ 邓晓衡/ 1/ )/ 刘强/ 1/ )/ 李旭/ 1/ )/ 陈志刚/ 2/ )/ 1/ )/ (/ 中南大学/ 信息科学/ 与/ 工程学院/ 长沙/ 410083/ )/ 2/ )/ (/ 中南大学/ 软件/ 学院/ 长沙/ 410083/ )/ 摘要/ 无线/ Mesh/ 网络/ 中/ ,/ 链路/ 的/ 动态性/ 和/ 链路/ 流内/ 、/ 流间/ 干扰/ 极大/ 影响/ 路由/ 协议/ 的/ 性能/ ./ 针对/ 此/ 问题/ ,/ 文中/ 提出/ 路由/ 判据/ EPBW/ ,/ 该/ 判据/ 充分考虑/ 链路/ 多/ 速率/ 以及/ 负载/ 的/ 动态性/ 以/ 准确/ 评估/ 链路/ 的/ 可用/ 状态/ ;/ 然后/ ,/ 基于/ EPBW/ ,/ 为/ 最大化/ 网络/ 吞吐量/ ,/ 文中/ 提出/ 了/ 分布式/ 路由/ 协议/ EPBWR/ ./ 最后/ ,/ 在/ NS/ -/ 2/ 中/ 实现/ 了/ 文中/ 判据/ 与/ 协议/ 算法/ ,/ 并且/ 在/ 多种/ 网络/ 环境/ 下/ 进行/ 仿真/ ,/ 与/ 其它/ 协议/ 进行/ 对比/ ,/ 评估/ 协议/ 性能/ ./ 仿真/ 结果表明/ :/ 文中/ 路由/ 判据/ EPBW/ 能/ 适应/ 网络/ 的/ 动态性/ ,/ 具有/ 较/ 高/ 吞吐量/ ,/ 并且/ 协议/ 性能/ 优于/ AODV/ 、/ DSDV/ 与/ DSR/ 等/ 协议/ ./ 关键词/ 无线/ Mesh/ 网络/ ;/ 链路/ 干扰/ ;/ 链路/ 负载/ ;/ 期望/ 路径/ 带宽/ ;/ 跨层/ 路由/ 1/ 引言/ WMNs/ )/ 能够/ 提供/ 高速率/ 、/ 低成本/ 的/ 大/ 范围/ 无线/ 接入/ ,/ 并且/ 随着/ IEEE802/ ./ 11x/ 系列/ 标准/ 以及/ 无线/ 移动/ 应用/ 的/ 快速/ 发展/ 普及/ ,/ WMNs/ 网络/ 已经/ 得到/ 了/ 广/ 无线/ Mesh/ 网络/ (/ WirelessMeshNetworks/ ,/ 泛/ 部署/ [/ 1/ ]/ ./ 在/ 无线/ 多/ 跳/ 网络/ 中/ ,/ 无线/ 链路/ 质量/ 与/ 负载/ Page2/ 直接/ 影响/ 网络/ 的/ 吞吐量/ ,/ 因此/ 传统/ 的/ 路由/ 协议/ 无法/ 适应/ 无线网络/ 特点/ ,/ 不能/ 充分利用/ 无线/ 资源/ ./ 至今/ ,/ 研究/ 人员/ 针对/ 移动/ Adhoc/ 网络/ (/ MobileAdhocNetworks/ ,/ MANETs/ )/ 与/ 无线/ 传感器/ 网络/ (/ WirelessSensorNetworks/ ,/ WSNs/ )/ 已经/ 提出/ 了/ 大量/ 路由/ 协议/ [/ 2/ -/ 4/ ]/ ,/ 但是/ 这些/ 协议/ 并未/ 应用/ 于/ WMN/ ,/ 因为/ WMN/ 与/ 二者/ 不同/ ,/ 其/ 骨干/ 网络/ 节点/ 基本/ 静止/ 并且/ 节点/ 没有/ 能量/ 限制/ ./ 根据/ 此/ 特点/ ,/ 并/ 结合/ WMNs/ 的/ 底层/ 性质/ ,/ 研究者/ 提出/ 了/ 很多/ WMN/ 路由/ 协议/ [/ 5/ -/ 10/ ]/ ./ 虽然/ 这些/ 协议/ 在/ 不同/ 的/ 场景/ 下/ 提高/ 了/ WMN/ 的/ 性能/ ,/ 但是/ 其未/ 充分考虑/ 流量/ 的/ 动态性/ ./ 本文/ 考虑/ 了/ 路由/ 节点/ 间/ 的/ 负载/ 均衡/ 与/ 链路/ 自/ 适应/ 速率/ 调整/ ,/ 主要/ 完成/ 了/ 以下/ 工作/ :/ 首先/ ,/ 定义/ 了/ 一个/ 新/ 的/ 路由/ 判据/ EPBW/ (/ ExpectedPathBandwidth/ )/ ;/ 然后/ ,/ 基于/ EPBW/ ,/ 提出/ 了/ 一个/ WMN/ 分布式/ 路由/ 协议/ 以求/ 最大化/ 网络/ 吞吐量/ ;/ 最后/ ,/ 通过/ 在/ NS/ -/ 2/ 实现/ 该/ 协议/ ,/ 在/ 不同/ 网络/ 场景/ 下/ 运行/ ,/ 与/ 其它/ 协议/ 对比/ ,/ 进行/ 性能/ 测试/ ./ 本文/ 第/ 2/ 节/ 讨论/ 本文/ 的/ 相关/ 工作/ ;/ 第/ 3/ 节/ 讲述/ 本文/ 提出/ 判据/ EPBW/ 的/ 背景/ 与/ 设计/ 方法/ ;/ 在/ 第/ 4/ 节/ ,/ 本文/ 提出/ 基于/ EPBW/ 分布式/ 按/ 需/ WMN/ 路由/ 协议/ ;/ 仿真/ 和/ 实验/ 结果/ 在/ 第/ 5/ 节/ 给出/ ;/ 最后/ 是/ 本文/ 的/ 总结/ 以及/ 下/ 一步/ 工作/ ./ 2/ 相关/ 工作/ 目前/ ,/ 为/ 提高/ 无线/ Mesh/ 网络/ 的/ 性能/ ,/ 许多/ 研究/ 致力于/ 提高/ IEEE802/ ./ 11/ 标准/ 来/ 优化/ 物理层/ 与/ MAC/ 层/ ,/ 但/ 路由/ 协议/ 仍然/ 直接/ 影响/ 网络/ 性能/ ,/ 因此/ 许多/ 研究/ 通过/ 设计/ 跨层/ 路由/ 协议/ 来/ 提高/ 网络/ 性能/ ,/ 并且/ 在/ 不同/ 层面/ 上/ 对/ 网络/ 的/ 性能/ 做出/ 了/ 改进/ ./ 下面/ 我们/ 介绍/ 并/ 分析/ 相关/ 的/ 路由/ 判据/ 与/ 路由/ 协议/ ./ ETX/ (/ ExpectedTransmissioncount/ )/ [/ 5/ ]/ 是/ 最早/ 提出/ 的/ 路由/ 判据/ 之一/ ,/ 它/ 基于/ 前/ 向/ 和/ 后/ 向/ 的/ 成功/ 传输/ 概率/ ./ ETT/ (/ ExpectedTransmissionTime/ )/ [/ 6/ ]/ 通过/ 考虑/ 链路/ 的/ 容量/ 来/ 拓展/ ETX/ ,/ WCETT/ (/ WeightedCumulativeExpectedTransmissionTime/ )/ [/ 7/ ]/ 将/ ETT/ 拓展/ 到/ 多/ 信道/ 环境/ ./ INX/ (/ InterferingNeigh/ -/ borscount/ )/ [/ 8/ ]/ 通过/ 考虑/ 信号/ 干扰/ 来/ 提高/ ETX/ 性能/ ./ LAETT/ (/ LoadAwareETT/ )/ [/ 9/ ]/ 和/ EETT/ (/ ExclusiveExpectedTransmissionTime/ )/ [/ 10/ ]/ 考虑/ 了/ 部分/ 的/ 干扰/ 和/ 负载/ ./ 我们/ 提出/ 的/ 判据/ EPBW/ 通过/ 结合/ 链路/ 质量/ 与/ 链路/ 负载/ 信息/ 来/ 指导/ 路由/ 选择/ ,/ 同时/ 考虑/ 了/ 流间/ 和/ 流内/ 干扰/ ./ 路由/ 判据/ 的/ 特性/ 总结/ 如表/ 1/ 所示/ ./ 路由/ 判据/ 单调/ 干扰/ 负载/ 均衡/ 检测/ 模式/ 自适应性/ ETXYESNONENOActiveNOETTYESNONENOActiveNOWCETTNOINTRANOActiveNOINXNOINTERNOPassiveNOLAETTYESNONEYESPassiveNOEETTNOINTRANOPassiveNOEPBWNOINTRA/ // INTERYESActiveYES/ 文献/ [/ 16/ ]/ 是/ 本文/ 的/ 前期工作/ ,/ 以此/ 为/ 基础/ ,/ 本文/ 增加/ 的/ 工作/ 包括/ 改进/ 了/ 冲突/ 分析/ ,/ 提高/ 了/ 路由/ 发现/ 设计/ 过程/ ,/ 并且/ 在/ 实验/ 分析/ 部分/ 增加/ 更加/ 全面/ 的/ 实验设计/ 以/ 分析/ 协议/ 性能/ ./ 本/ 协议/ 下/ 一步/ 工作/ 是/ 检验/ 协议/ 在/ 实际/ 网络/ 环境/ 中/ 的/ 性能/ ,/ 并且/ 提高/ 带宽/ 测量/ 的/ 准确性/ ./ 3/ 路由/ 判据/ 3.1/ EPBW/ 在/ WMN/ 中/ ,/ 流内/ 干扰/ 与/ 流间/ 干扰/ 使得/ 发现/ 网络/ 的/ 最大/ 吞吐量/ 路径/ 成为/ 一个/ 挑战性/ 问题/ ./ 在/ 本节/ ,/ 我们/ 首先/ 说明/ 流内/ 干扰/ 的/ 问题/ ./ 如图/ 1/ 所示/ ,/ 源/ 节点/ S/ 向/ 目的/ 节点/ D/ 发送/ 从/ 左向右/ 的/ 单向/ 流量/ ./ 所有/ 的/ 链路/ 共享/ 一个/ 无线/ 信道/ 并/ 竞争/ 信道/ 接入/ 机会/ ,/ 由此/ 形成/ 一个/ 冲突/ 域/ ./ 在/ 一个/ 冲突/ 域/ 中/ ,/ 任何时刻/ 都/ 只能/ 有/ 一个/ 链路/ 发送数据/ ,/ 因此/ 冲突/ 域/ 内/ 的/ 吞吐量/ 远/ 小于/ 链路/ 带宽/ ,/ 根据/ 文献/ [/ 11/ ]/ 中/ 模型/ 有/ 其中/ ,/ l/ 是/ 冲突/ 域/ c/ 内/ 的/ 一条/ 链路/ ,/ BWl/ 是/ 链路/ l/ 的/ 带宽/ (/ BWl/ 与/ 流间/ 干扰/ 有关/ ,/ 将/ 在/ 后文/ 讨论/ )/ ./ 图/ 1WMN/ 网络/ 示例/ ,/ 包含/ 冲突/ 域/ c1/ =/ (/ SA/ ,/ AC/ ,/ CE/ )/ ,/ c2/ =/ (/ AC/ ,/ CE/ ,/ ED/ )/ ,/ c3/ =/ (/ SG/ ,/ GF/ ,/ FD/ )/ ,/ c4/ =/ (/ SA/ ,/ SG/ )/ ,/ c5/ =/ (/ ED/ ,/ FD/ )/ 在/ 图/ 1/ 中/ ,/ 节点/ S/ 与/ D/ 之间/ 有/ 两条/ 路径/ ./ 以/ 跳数/ 作为/ 路由/ 判据/ ,/ 路径/ P1/ =/ {/ S/ ,/ G/ ,/ F/ ,/ D/ }/ 有/ 3/ 跳/ ,/ 路径/ P2/ =/ {/ S/ ,/ A/ ,/ C/ ,/ E/ ,/ D/ }/ 有/ 4/ 跳/ ,/ 因此/ 路径/ P1/ 优于/ P2/ ./ 在/ EPBW/ 判据/ 中/ ,/ 路径/ Pi/ 的/ 判据/ EPBWPi/ 由/ 路径/ 的/ 冲突/ 域/ 带宽/ 的/ 瓶颈/ 值/ 决定/ ,/ 即/ 路径/ 中/ BWc/ 的/ 最/ Page3/ 小值/ :/ 其中/ CPi/ 为/ 路径/ Pi/ 的/ 冲突/ 域/ 集合/ ./ 图/ 1/ 对/ 冲突/ 域/ 做出/ 了/ 示例/ 说明/ ./ 路径/ P1/ 的/ EPBWP1/ 是/ 路径/ 上/ 两个/ 冲突/ 域/ 带宽/ 的/ 最小值/ ,/ 即/ EPBWP1/ =/ min/ (/ BWc3/ )/ =/ min1/ 对于/ 路径/ P2/ 的/ EPBWP2/ 如下/ :/ EPBWP2/ =/ min/ (/ BWc1/ ,/ BWc2/ )/ 根据/ 路由/ 判据/ EPBW/ ,/ 路径/ P2/ 优于/ P1/ ./ 如/ 本例/ 所示/ ,/ 最短/ 路径/ 不能/ 确保/ 获得/ 最大/ 吞吐量/ ./ 最后/ ,/ 我们/ 定义/ 源/ 节点/ S/ 与/ 目的/ 节点/ D/ 之间/ 的/ 期望/ 带宽/ EPBW/ 为/ 两点/ 之间/ 所有/ 路径/ 期望/ 带宽/ 的/ 最大值/ ,/ 即/ 其中/ Pi/ 为/ 两点/ 之间/ 的/ 有效/ 路径/ ,/ 其/ 期望/ 带宽/ 为/ 路径/ 上/ 所有/ 冲突/ 域/ 带宽/ 的/ 瓶颈/ 值/ ,/ 可/ 通过/ 式/ (/ 2/ )/ 计算/ 得到/ ./ 信道/ 共享/ 所/ 形成/ 的/ 冲突/ 域/ 增加/ 了/ 以/ 逐跳/ 方式/ 寻找/ 最大/ 吞吐量/ 路径/ 的/ 难度/ ,/ 而且/ 找出/ 图中/ 所有/ 的/ 冲突/ 域/ 是/ 一个/ NP/ 难/ 问题/ ,/ 本文/ 分/ 3/ 步/ 处理/ 该/ 问题/ :/ 1/ )/ 计算/ 链路/ 带宽/ ,/ 其/ 由/ 物理/ 信道/ 的/ 特征/ 决定/ ,/ 如/ SNR/ ;/ 2/ )/ 计算/ 在/ 流间/ 干扰/ 下/ 的/ 链路/ 可用/ 带宽/ ;/ 3/ )/ 考虑/ 流内/ 干扰/ 的/ 影响/ ,/ 计算/ 冲突/ 域/ 带宽/ ,/ 利用/ 式/ (/ 2/ )/ 获得/ 路径/ 判据/ EPBW/ ./ 步/ 1/ )/ 和/ 2/ )/ 将/ 在/ 下面/ 的/ 小节/ 分析/ 讨论/ ,/ 步/ 3/ )/ 是/ 基于/ 式/ (/ 2/ )/ ./ 同时/ ,/ 基于/ EPBW/ ,/ 设计/ 提出/ 一个/ 分布式/ 的/ 启发式/ 路由/ 协议/ ./ 3.2/ 链路/ 带宽/ 链路/ 带宽/ 是/ 随/ 信道/ 质量/ 动态/ 改变/ 的/ 随机变量/ ,/ 计算/ 路径/ EPBW/ 的/ 前提/ 是/ 先/ 确定/ 带宽/ ./ 为/ 充分/ 适应/ 无线/ 链路/ 的/ 动态性/ ,/ 物理层/ 提出/ 了/ 自/ 适应/ 调制/ 与/ 编码方案/ 并且/ 已/ 被/ 广泛/ 使用/ ,/ 调整/ 的/ 基本/ 思想/ 为/ 使用/ 信噪比/ SNR/ 衡量/ 信道/ 质量/ ,/ 从而/ 调整/ 链路/ 速率/ [/ 12/ ]/ ,/ 例如/ ,/ IEEE802/ ./ 11b/ 标准/ 通过/ 调整/ 发送/ 模式/ 可以/ 获得/ 1Mbps/ 、/ 2Mbps/ 、/ 5.5/ Mbps/ 或者/ 11Mbps/ 的/ 发送/ 速率/ ./ 当/ SNR/ 确定/ 时/ ,/ 链路/ 会/ 在/ 保证/ 比特/ 错误率/ BER/ (/ BitErrorRate/ )/ 低于/ 阈值/ 的/ 前提/ 下/ ,/ 选择/ 最快/ 的/ 发送/ 速率/ ./ BER/ 与/ SNR/ 之间/ 的/ 关系/ 可以/ 通过/ 理论/ 分析/ 或者/ 实验/ 总结/ 获得/ ./ 给定/ BER/ 的/ 临界值/ ,/ 不同/ 发送/ 速率/ 对应/ 的/ SNR/ 范围/ 就/ 能够/ 确定/ ./ 但/ 需要/ 注意/ ,/ 链路/ 选择/ 所/ 关心/ 的/ 是/ 期望/ SNR/ (/ 或/ 链路/ 带宽/ )/ 而/ 不是/ 它们/ 的/ 实时/ 值/ ,/ 本文/ 使用/ 加权/ 平均值/ 得到/ 的/ SNR/ 评估/ 链路/ 质量/ ,/ 如式/ (/ 4/ )/ 所示/ :/ SNR/ =/ α/ ×/ SNR/ +/ (/ 1/ -/ α/ )/ ×/ SNRnew/ (/ 4/ )/ 其中/ ,/ SNRnew/ 为/ 最新/ 测量/ 得到/ 的/ SNR/ 值/ ,/ α/ 范围/ 从/ 0/ ~/ 1/ ,/ 通过/ 实验/ 分析/ ,/ 最后/ 取其值/ 为/ α/ =/ 0.75/ ./ 然后/ ,/ 通过/ 查表/ ,/ 将/ 得到/ 的/ 平均/ SNR/ 映射/ 为/ 链路/ 带宽/ ./ 映射/ 关系/ 如表/ 2/ ,/ 表中/ 数据/ 为/ IEEE802/ ./ 11b/ 标准/ 限定/ BER/ 为/ BER/ </ 10/ -/ 5/ 时/ ,/ 通过/ 实验/ 分析/ 所/ 获得/ [/ 12/ ]/ ./ 需要/ 注意/ ,/ 上文/ 所/ 提/ 加权/ 平均/ SNR/ 值/ 是/ 为了/ 用于/ 计算/ 路由/ 期望/ 吞吐量/ ,/ 很/ 有/ 可能/ 与/ 实时/ SNR/ 不同/ ./ 而且/ ,/ 物理层/ 的/ 发送/ 模式/ 是/ 根据/ 实时/ 链路/ 质量/ 调整/ 的/ ,/ 不同/ 的/ 实现/ 可能/ 使用/ 不同/ 的/ 链路/ 特征/ 调整/ 发送/ 模式/ ,/ 但/ 这些/ 不/ 在/ 本文/ 讨论/ 范围/ 内/ ./ SNR/ 临界值/ 发送/ 速率/ // Mbps/ 发送/ 模式/ 8/ ~/ 123.3/ 链路/ 期望/ 带宽/ 为/ 计算/ 路径/ 上/ 数据流/ 的/ 可用/ 带宽/ ,/ 除了/ 需要/ 估算/ 链路/ 带宽/ ,/ 还/ 需要/ 考虑/ 因/ 其它/ 流/ 竞争/ 而/ 产生/ 的/ 流间/ 干扰/ 的/ 影响/ ./ 虽然/ 目前/ 已经/ 有/ 大量/ 工作/ 针对/ 单跳/ 无线网络/ 的/ 吞吐量/ 建模/ ,/ 而且/ 模型/ 也/ 考虑/ 了/ 竞争/ 接入/ 的/ 影响/ ,/ 例如/ Bianchi/ 模型/ [/ 13/ ]/ 与/ Dhanasekaran/ 模型/ [/ 14/ ]/ ,/ 但是/ 因为/ 多/ 跳/ 无线网络/ 负载/ 不/ 均衡/ 且/ 存在/ 流内/ 干扰/ ,/ 所以/ 这些/ 模型/ 难以/ 用于/ 分析/ 多/ 跳/ 无线网络/ ./ 本文/ 中/ ,/ 设定/ 每个/ 节点/ 监测/ 无线/ 链路/ 的/ 状态/ 以/ 估算/ 链路/ 负载/ 与/ 可用/ 带宽/ ,/ 每个/ 节点/ 计算/ 链路/ 的/ 空闲/ 概率/ ,/ 用/ Tb/ 与/ Ti/ 分别/ 表示/ 链路/ 的/ 忙/ 时间/ 与/ 空闲/ 时间/ ,/ 节点/ A/ 的/ 信道/ 空闲/ 概率/ 如下/ :/ 如果/ 只/ 需要/ 考虑/ 链路/ 发送/ 方/ ,/ 则/ 只/ 需要/ 计算/ 接收/ 方/ 的/ 信道/ 空闲/ 概率/ ./ 但是/ 实际上/ ,/ 发送/ 方/ 需要/ 接收/ 方/ 返回/ 的/ ACK/ 信息/ ./ 因此/ ,/ 实际/ 的/ 空闲/ 时间/ 应当/ 是/ 发送/ 方/ 和/ 接收/ 方都/ 为/ 空闲/ 的/ 时间/ ,/ 但是/ 此/ 数据/ 难以获得/ 计算/ ./ 为了/ 简化/ 问题/ ,/ 对于/ 相邻/ 的/ 接收/ 节点/ 与/ 发送/ 节点/ ,/ 我们/ 取/ 发送/ 节点/ 与/ 接收/ 节点/ 分别/ 监测/ 计算/ 得到/ 的/ 空闲/ 概率/ 最小值/ 作为/ 链路/ 空闲/ 概率/ ,/ 即/ 有/ Pidle/ (/ lAB/ )/ =/ minPidle/ (/ A/ )/ ,/ Pidle/ (/ B/ {/ A/ 与/ B/ 之间/ 的/ 链路/ ./ 然后/ 通过/ 式/ (/ 6/ )/ 就/ 可/ 获得/ 链路/ l/ 的/ 期望/ 带宽/ EBWl/ :/ Page44/ 路由/ 协议/ 设计/ 在/ 本节/ ,/ 我们/ 设计/ 并/ 提出/ 了/ 按/ 需/ 分布式/ 路由/ 协议/ EPBWR/ ,/ 包括/ 路由/ 发现/ 、/ 路由/ 计算/ 、/ 路由/ 维护/ 与/ 路由/ 恢复/ 等/ 机制/ ./ 4.1/ 路由/ 发现/ EPBWR/ 协议/ 为/ 减少/ 路由/ 开销/ ,/ 路由/ 发现/ 采用/ 按/ 需/ 方式/ ./ 当源/ 节点/ S/ 需要/ 向/ 目的/ 节点/ D/ 发送数据/ 时/ ,/ 触发/ 路由/ 发现/ 过程/ ,/ 广播/ 发送/ 路由/ 请求/ 包/ RREQ/ (/ RoutingRequestPacket/ )/ ./ 当/ 邻居/ 节点/ 接收/ 到/ RREQ/ 之后/ ,/ 首先/ 计算/ 链路/ SNR/ ,/ 根据/ 平均/ SNR/ 计算/ 链路/ 带宽/ ,/ 并/ 根据/ 链路/ 空闲/ 概率/ 计算/ 链路/ 期望/ 带宽/ EBW/ ./ 然后/ 检查/ 从源/ 节点/ 到/ 当前/ 节点/ 的/ 路径/ 上/ 是否/ 存在/ 冲突/ 域/ ,/ 进而/ 得到/ 路径/ 的/ EPBW/ ./ 最后/ 继续/ 转发/ 广播/ RREQ/ ,/ 直到/ 到达/ 目的/ 节点/ ./ 每个/ RREQ/ 都/ 包含/ 唯一/ 序列号/ ID/ 、/ 从源/ 节点/ 到/ 当前/ 节点/ 的/ EPBW/ 与/ 路径/ 向量/ ./ 路径/ 向量/ 每项/ 均/ 包含/ 节点/ 地址/ ,/ 链路/ 空闲/ 概率/ Pidle/ 以及/ 邻居/ 列表/ ./ 其中/ ,/ 邻居/ 列表/ 是/ 为了/ 辅助/ 后面/ 节点/ 发现/ 冲突/ 域/ 以/ 计算/ 路径/ EPBW/ ./ 因此/ ,/ 邻居/ 列表/ 记录/ 属于/ 当前/ 节点/ 的/ 邻居/ 且/ 属于/ 当前/ 路径/ 的/ 节点/ ./ 如果/ 节点/ 收到/ 序列号/ ID/ 相同/ 的/ RREQ/ ,/ 即/ 重复/ 包/ ,/ 节点/ 会/ 计算/ 并/ 比较/ 数据包/ 的/ EPBW/ ./ 如果/ 当前/ RREQ/ 的/ EPBW/ 小于/ 记录/ 的/ EPBW/ ,/ 则/ 丢弃/ 此/ RREQ/ ,/ 否则/ ,/ 根据/ 最新/ RREQ/ 更新/ 记录/ 信息/ ,/ 然后/ 广播/ 该/ 数据包/ ./ 重复/ 此/ 过程/ ,/ 直到/ RREQ/ 到达/ 目的/ 节点/ 或/ 被/ 丢弃/ ./ 当/ 目的/ 节点/ 接收/ 到/ RREQ/ 之后/ ,/ 首先/ 计算/ SNR/ 与/ 最后/ 一跳/ 的/ EBW/ ,/ 然后/ 比较/ 具有/ 相同/ ID/ 的/ RREQ/ 携带/ 的/ EPBW/ ,/ 选择/ 具有/ 较大/ EP/ -/ BW/ 的/ 路径/ ./ 等待/ 一个/ 常数/ 时间/ T/ 以/ 比较/ 更/ 多/ 的/ RREQ/ ./ 最后/ 根据/ 具有/ 最大/ EPBW/ 的/ RREQ/ 包/ 构建/ 路由/ 应答/ 数据包/ RREP/ (/ RoutingReplyPacket/ )/ ,/ 且/ RREP/ 包含/ 路径/ 向量/ 与/ EPBW/ 信息/ ,/ 然后/ 按照/ 反向/ 路径/ 将/ RREP/ 发送给/ 源/ 节点/ ./ 通过/ 实验/ ,/ 我们/ 发现/ 合理/ 的/ 路由/ 之间/ 的/ 延时/ 差/ 不会/ 超过/ 100ms/ ,/ 所以/ 在/ 本文/ 中/ 设定/ T/ 为/ 100ms/ ./ 4.2/ 分布式/ 路由/ 计算/ 为/ 发现/ 网络/ 中/ 最大/ 吞吐量/ 路径/ ,/ 许多/ 路由/ 协议/ 采用/ 集中/ 的/ 路由/ 方法/ ,/ 并且/ 结合/ 改进/ 的/ Dijkstra/ 算法/ 计算/ ,/ 寻找/ 最优/ 路径/ ,/ 但是/ 集中式/ 协议/ 不利于/ 网络/ 的/ 扩展/ [/ 10/ ]/ ./ 因此/ 本文/ 所/ 提出/ 协议/ 采用/ 分布式/ 方法/ ,/ 节点/ 以/ 分布式/ 的/ 方式/ 计算/ ,/ 选择/ 从源/ 节点/ 到/ 自身/ 的/ 最佳/ 路径/ ./ 路由/ 发现/ 算法/ 基本/ 过程/ 如/ 算法/ 1/ 所示/ ./ 由/ 上节/ 可知/ ,/ 路径/ EPBW/ 值/ 是/ 由/ 路径/ 上/ 的/ 冲突/ 域/ 及其/ 可用/ 带宽/ 决定/ ,/ 可以/ 使用/ 冲突/ 图/ 帮助/ 以/ 准确/ 快速/ 确定/ 路径/ 上/ 的/ 冲突/ 域/ ./ 构建/ 冲突/ 图/ Gv/ 的/ 方法/ 是/ 路径/ Pv/ 上/ 的/ 链路/ 都/ 转换/ 为/ 图/ Gv/ 中/ 的/ 顶点/ ,/ 而且/ 如果/ 两条/ 链路/ 互相/ 干扰/ 冲突/ ,/ 则/ 二者/ 对应/ 的/ 顶点/ 有/ 一条/ 边/ 相连/ ./ 著名/ 的/ Bron/ 与/ Kerbosch/ 算法/ 能够/ 在/ 线性/ 时间/ 内/ 计算/ 出图/ 中/ 所有/ 的/ 冲突/ 域/ [/ 15/ ]/ ,/ 在/ 算法/ 1/ 中/ 的/ 第/ 4/ 行/ ,/ 函数/ Bron/ _/ Kerbosch/ (/ Gv/ )/ 即/ 是/ 采用/ 此/ 算法/ 计算/ 出图/ Gv/ 中/ 所有/ 新/ 增加/ 的/ 冲突/ 域/ ./ 为了/ 能够/ 将/ EPBW/ 的/ 计算/ 开销/ 分布/ 到/ 路径/ 中/ 所有/ 节点/ 上/ ,/ 每个/ 节点/ 只/ 需要/ 计算/ 因为/ 自身/ 加入/ 路径/ 而/ 产生/ 的/ 冲突/ 域/ ,/ 即以/ 该/ 节点/ 作为/ 接收/ 方/ 的/ 链路/ 产生/ 的/ 冲突/ 域/ ,/ 反应/ 在/ 冲突/ 图中/ ,/ 即该/ 链路/ 在/ 冲突/ 图中/ 的/ 对应/ 顶点/ 所/ 属于/ 的/ 冲突/ 域/ ./ 节点/ 只/ 需要/ 计算/ 与/ 该/ 顶点/ 相关/ 的/ 新/ 冲突/ 域/ ,/ 其它/ 与/ 该/ 顶点/ 不/ 相连/ 的/ 顶点/ 都/ 可以/ 从/ 冲突/ 图中/ 删除/ ,/ 即/ 算法/ 1/ 中/ 第/ 2/ 行/ 的/ 工作/ ,/ 过程/ 示/ 例如/ 图/ 2/ 所示/ ./ 算法/ 1/ 中/ 4/ ~/ 7/ 行/ 比较/ 到达/ 本/ 节点/ 之前/ 的/ 路径/ EPBW/ 与/ 当前/ 冲突/ 域/ 的/ EBW/ ,/ 并/ 根据/ 结果/ 更新/ EPBW/ 信息/ ./ 最后/ ,/ 当前/ 节点/ 构造/ 新/ 的/ RREQ/ 并/ 发送/ ./ 算法/ 1/ ./ 路由/ 发现/ 算法/ ./ 输入/ :/ 数据包/ RREQ/ (/ n/ ,/ u/ )/ ,/ 其/ 包含/ EPBW/ 与/ 路径/ 向量/ 输出/ :/ 从源/ 节点/ s/ 到/ 当前/ 节点/ v/ 的/ 最大/ 期望/ 带宽/ EPBW/ 过程/ :/ 1/ ./ NodevreceivesRREQ/ (/ n/ ,/ u/ )/ ;/ 2/ ./ Convertpath/ 犘/ vintoaconflictgraphGv/ ;/ 3/ ./ deletevertexNklthatisnotconnectedtoNuvinGv/ ;/ 4/ ./ Cv/ =/ Bron/ _/ Kerbosch/ (/ Gv/ )/ ;/ 5/ ./ EPBWnew/ (/ v/ )/ =/ min/ (/ Cliquebandwidth/ (/ Cv/ )/ )/ ;/ 6/ ./ EPBWnew/ (/ v/ )/ =/ min/ (/ EPBWnew/ (/ v/ )/ ,/ EPBW/ (/ u/ )/ )/ ;/ 7/ ./ ifEPBW/ (/ v/ )/ </ EPBWnew/ (/ v/ )/ then8/ ./ EPBW/ (/ v/ )/ =/ EPBWnew/ (/ v/ )/ ;/ 9/ ./ reconstructRREQ/ (/ n/ ,/ v/ )/ ,/ broadcastRREQ/ (/ n/ ,/ v/ )/ ;/ 10/ ./ endif/ ./ 算法/ 2/ 是/ 算法/ 1/ 中/ 函数/ Cliquebandwidth/ (/ CLij/ )/ 的/ 实现/ ,/ 其/ 采用/ 2.1/ 节/ 给出/ 的/ 方法/ ,/ 用来/ 计算/ 包含/ 链路/ Lij/ 的/ 冲突/ 域/ 的/ 期望/ 带宽/ ./ 算法/ 中/ EPBW/ (/ v/ )/ 和/ EPBWnew/ (/ v/ )/ 分别/ 表示/ 路径/ 犘/ v/ 到达/ 当前/ 节点/ 之前/ 的/ 期望/ 带宽/ EPBW/ 与/ 当前/ 节点/ 新增/ 冲突/ 域/ 的/ 最小/ 期望/ 带宽/ EBW/ ./ RREQ/ (/ n/ ,/ u/ )/ 表示/ 节点/ u/ 发送/ 的/ 序列号/ 为/ n/ 的/ 请求/ 包/ RREQ/ ./ 算法/ 2/ ./ Cliquebandwidth/ (/ CLij/ )/ ./ 输入/ :/ 冲突/ 域/ CLij/ 且/ 包含/ 冲突/ 域/ 的/ 每条/ 链路/ 的/ 期望/ 带宽/ 输出/ :/ 冲突/ 域/ CLij/ 的/ 期望/ 带宽/ EBW/ 过程/ :/ 1/ ./ T/ (/ CLij/ )/ =/ 0/ ;/ Page52/ ./ forLij/ ∈/ CLijdo3/ ./ T/ (/ CLij/ )/ =/ T/ (/ CLij/ )/ +/ (/ EBW/ (/ Lij/ )/ )/ -/ 1/ ;/ 4/ ./ i/ =/ j/ ;/ j/ =/ succeed/ (/ j/ )/ ;/ 5/ ./ endfor/ ;/ 6/ ./ EBW/ (/ CLij/ )/ =/ (/ T/ (/ CLij/ )/ )/ -/ 1/ ;/ 7/ ./ returnEBW/ (/ CLij/ )/ ./ 目的/ 节点/ 进行/ 同样/ 的/ 工作/ ,/ 选择/ 具有/ 最高/ 期望/ 带宽/ EPBW/ 的/ 路径/ ,/ 并/ 将/ 路径/ 返回/ 给源/ 节点/ ./ 路由/ 信息/ 通过/ 路由/ 应答/ 包/ RREP/ 携带/ ,/ 其中/ 包含/ 序列号/ ID/ 、/ 路径/ 向量/ 与/ EPBW/ ./ 同时/ 更新/ 了/ 路径/ 中/ 的/ EBW/ 与/ 链路/ 空闲/ 概率/ 信息/ ./ 图/ 2/ 路径/ 转换/ 为/ 冲突/ 图/ 过程/ (/ Nij/ 代表/ 链路/ Lij/ ,/ (/ a/ )/ 将/ 有/ 4/ 个/ 节点/ 3/ 条/ 链路/ 的/ 路径/ 转换/ 为/ 冲突/ 图/ ,/ 其中/ 所有/ 的/ 链路/ 都/ 在/ 1/ 个/ 冲突/ 域/ 内/ ;/ (/ b/ )/ 增加/ 5/ 号/ 节点/ 之后/ 图中/ 增加/ 了/ 1/ 个/ 新/ 冲突/ 域/ ;/ (/ c/ )/ 增加/ 6/ 号/ 节点/ ,/ 且/ 其/ 和/ 2/ 号/ 节点/ 是/ 邻居/ ,/ 结果/ 增加/ 了/ 3/ 个/ 冲突/ 域/ ,/ 而且/ 最大/ 的/ 冲突/ 域/ 包含/ 其它/ 2/ 个/ 冲突/ 域/ )/ 采用/ 以上/ 算法/ ,/ 路径/ 中/ 任何/ 节点/ 需要/ 计算/ 的/ 冲突/ 域/ 数目/ 不会/ 超过/ 路径/ 的/ 跳数/ ,/ 所以/ 此/ 分布式/ 算法/ 的/ 复杂度/ 较/ 低/ ./ 而且/ ,/ 一般/ 情况/ 下/ ,/ 经过/ 具有/ 较/ 高/ 吞吐量/ 的/ 路径/ 的/ RREQ/ 会/ 较/ 早/ 到达/ ,/ 因此/ RREQ/ 的/ 广播/ 重/ 发/ 数量/ 会/ 减少/ 很多/ ./ 此外/ ,/ 基于/ RREQ/ 携带/ 的/ 路径/ 向量/ ,/ 路径/ 瓶颈/ 带宽/ 容易/ 获得/ ,/ 从而/ 可以/ 决定/ 对此/ 请求/ 包是/ 转发/ 或者/ 丢弃/ ./ 同时/ ,/ 每个/ 节点/ 需要/ 增加/ 的/ 存储/ 信息/ 也/ 只是/ 基于/ 路由表/ 的/ 扩展/ ./ 由/ 上/ 可知/ ,/ 此/ 协议/ 的/ 路由/ 开销/ 较/ 低/ ./ 4.3/ 路由/ 维护/ 通过/ 路由/ 发现/ ,/ 节点/ 建立/ 有效/ 路由/ ,/ 开始/ 传输数据/ ./ 但/ 因/ 无线网络/ 的/ 动态性/ ,/ 当前/ 路径/ 的/ 吞吐量/ 可能/ 下降/ 甚至/ 路径/ 失效/ ,/ 同样/ ,/ 网络/ 中/ 可能/ 出现/ 更好/ 的/ 路径/ ./ 此时/ ,/ 网络/ 中/ 路径/ 需要/ 更新/ ./ 当/ 目的/ 节点/ 检测/ 到/ 路径/ 吞吐量/ 的/ 下降时/ ,/ 其向源/ 节点/ 发送/ 路由/ 请求/ 触发/ 信息/ TREQ/ (/ TriggeringRequestMessage/ )/ ,/ 源/ 节点/ 收到/ 信息/ 之后/ 启动/ 新/ 的/ 路由/ 发现/ 过程/ ,/ 发送/ 路由/ 更新包/ UREQ/ (/ UpdateRoutingRequestPacket/ )/ ./ 如果/ 找到/ 具有/ 更高/ EPBW/ 的/ 更优/ 路径/ ,/ 后面/ 的/ 数据传输/ 就/ 采用/ 最新/ 路由/ ./ 然而/ ,/ 以上/ 过程/ 无法/ 处理/ 出现/ 吞吐量/ 不/ 下降/ 等/ 更优/ 路径/ 的/ 情况/ ./ 针对/ 此/ 情况/ ,/ 本文/ 采用/ 周期/ 路由/ 发现/ 机制/ ,/ 但此/ 周期/ 更新/ 频率/ 较/ 低/ ,/ 周期/ 大小/ 是/ 通过/ 折/ 中路/ 由/ 优化/ 与/ 路由/ 开销/ 获得/ ./ 在/ 以上/ 过程/ 中/ ,/ 如果/ 不能/ 正确/ 计算/ 当前/ 目标/ 数据流/ 负载/ ,/ 可能/ 出现/ 路由/ 震荡/ ./ 如果/ 数据流/ 有/ 两条/ 相似/ 的/ 路径/ ,/ 当前/ 正在/ 传输数据/ 的/ 路径/ 的/ 空闲/ 概率/ 会/ 因为/ 传输/ 目标/ 数据/ 而/ 降低/ ,/ 因此/ 在/ 路由/ 更新/ 的/ 时候/ ,/ 节点/ 可能/ 选择/ 另/ 一条/ 路径/ ./ 如此/ 另/ 一条/ 路径/ 就/ 会/ 更加/ 繁忙/ ,/ 此/ 过程/ 不断/ 重复/ ,/ 造成/ 路由/ 震荡/ ./ 为/ 解决/ 震荡/ 问题/ ,/ 在/ 路由/ 更新/ 的/ 过程/ 中/ ,/ 正确/ 评估/ 目标/ 数据流/ 对/ 路径/ EPBW/ 造成/ 的/ 影响/ 就/ 变得/ 非常/ 重要/ ./ 一个/ 有效/ 的/ 方法/ 是/ 重新/ 计算/ 各个/ 节点/ 的/ 空闲/ 概率/ ,/ 将/ 因/ 传输/ 目标/ 数据流/ 造成/ 的/ 忙/ 时间/ 记/ 为/ 链路/ 的/ 空闲/ 时间/ ,/ 计算方法/ 如式/ (/ 7/ )/ 所示/ :/ 其中/ :/ Tt/ (/ f/ )/ 为/ 节点/ A/ 传输数据/ 流/ f/ 所/ 使用/ 的/ 时间/ ;/ Tb/ (/ A/ )/ 与/ Ti/ (/ A/ )/ 分别/ 为/ 在/ MAC/ 层/ 统计/ 的/ 链路/ 忙/ 时间/ 与/ 空闲/ 时间/ ./ 每个/ 节点/ 在/ 对/ 数据/ 进行/ 路由/ 的/ 时候/ 都/ 需要/ 提取/ 数据包/ 的/ 源/ IP/ 与/ 目的/ IP/ 信息/ ,/ 此时/ 可以/ 将/ 数据包/ 与/ 数据流/ f/ 进行/ 匹配/ 统计/ ./ 在/ 传输/ 期间/ ,/ 数据流/ f/ 发送/ Nf/ (/ A/ )/ 个/ 包/ ,/ 包/ k/ 的/ 发送/ 速率/ 为/ Rk/ ,/ 则/ Tt/ (/ f/ )/ 的/ 计算方法/ 如下/ :/ Tt/ (/ f/ )/ =/ Psize/ ·/ (/ n1/ ·/ 1/ 其中/ nk/ 表示/ 包/ k/ 在/ 当前/ 信道/ 错误率/ 限制/ 下/ 成功/ 传输/ 需要/ 传输/ 的/ 次数/ ./ 同时/ ,/ 我们/ 设定/ 所有/ 数据包/ 大小/ 相同/ ./ 4.4/ 路由/ 修复/ 路由/ 失效/ 主要/ 由/ 两种/ 原因/ 造成/ :/ 一/ 是从/ 目的/ 节点/ 向源/ 节点/ 返回/ 的/ 路由/ 信息/ 丢失/ ;/ 二是/ 在/ 传输/ 过程/ 中/ 链路/ 断开/ ./ 当/ RREQ/ 到达/ 目的/ 节点/ 以后/ ,/ 目的/ 节点/ 会向源/ 节点/ 发送/ RREP/ 包/ ,/ 且/ 携带/ 路径/ 向量/ 与/ EPBW/ 信息/ ./ 虽然/ 一般/ 情况/ 下/ ,/ WMN/ 网络/ 中/ 的/ 链路/ 并/ 不/ 对称/ ,/ 从/ 目的/ 节点/ 到源/ 节点/ 的/ 反向/ 路径/ 吞吐量/ 与/ 正向/ 路径/ 不同/ ,/ 但是/ 反向/ 路径/ 一般/ 可用/ ,/ 能够/ 传输数据/ ./ 在/ 数据传输/ 过程/ 中/ ,/ 如果/ 有/ 路径/ 断开/ ,/ 传输/ 失败/ 的/ 节点/ 就会/ 向源/ 节点/ 发送/ 路由/ 错误信息/ RERR/ (/ RoutingErrorPacket/ )/ ./ 源/ 节点/ 接收/ 到/ RERR/ 之后/ 会/ 重新/ 进行/ 路由/ 发现/ 过程/ 以/ 找到/ 新/ 的/ 路径/ ./ Page65/ 仿真/ 与/ 分析/ 为/ 验证/ 本文/ 跨层/ 路由/ 判据/ 与/ 路由/ 协议/ 方案/ 的/ 有效性/ ,/ 本文/ 在/ NS2/ 中/ 实现/ 了/ EPBWR/ 协议/ 并/ 在/ 3/ 个/ 网络拓扑/ (/ 图/ 3/ 和/ 6/ )/ 上/ 设计/ 了/ 5/ 个/ 仿真/ 实验/ ./ 与/ 本节/ 提到/ 的/ 其它/ 协议/ 相比/ ,/ 本/ 协议/ 增加/ 了/ 负载/ 感知/ 的/ 开销/ ,/ 包括/ MAC/ 层/ 链路/ 空闲/ 状态/ 统计/ 与/ 网络层/ 数据包/ 数量/ 统计/ ./ 在/ 实现/ 中/ ,/ 在/ MAC/ 层/ 链路/ 状态/ 改变/ 时/ 增加/ 空闲/ 时间/ 计算/ ,/ 且/ 空闲/ 概率/ 只有/ 在/ 需要/ 的/ 时候/ 计算/ ;/ 在/ 网络层/ ,/ 每个/ 数据包/ 都/ 需要/ 进行/ 路由/ 选择/ ,/ 同时/ 统计/ 数据包/ 数量/ ./ 因此/ ,/ 负载/ 感知/ 主要/ 增加/ 了/ 计算/ 开销/ ,/ 受限于/ 网络/ 速率/ ,/ 计算/ 频率/ 相对/ 较/ 低/ ,/ 且/ 计算/ 复杂度/ 较/ 低/ (/ 主要/ 是/ 加减/ 计算/ )/ ./ 仿真/ 参数/ 如表/ 3/ 所示/ ,/ 其余/ 没有/ 说明/ 的/ 参数均/ 为/ NS/ -/ 2.31/ 中/ 802.11/ b/ 模块/ 默认值/ ./ 根据/ 表/ 2/ 的/ 规则/ ,/ 所有/ 节点/ 根据/ 测量/ 得到/ 的/ 平均/ SNR/ 值/ 在/ DBPSK/ (/ 1M/ )/ 、/ DQPSK/ (/ 2M/ )/ 、/ CCK55/ (/ 5.5/ M/ )/ 和/ CCK11/ (/ 11M/ )/ 这/ 4/ 种/ 调制/ 模式/ 间/ 动态/ 切换/ ./ 每隔/ 20s/ 或者/ 路径/ 上/ 的/ 吞图/ 4/ 实验/ 1/ (/ 拓扑/ 1/ )/ 实验/ 结果/ 吐量/ 降低/ 超过/ 20/ %/ 都/ 会/ 进行/ 路由/ 更新/ ./ 为/ 验证/ 对比/ 吞吐量/ 、/ 端到/ 端/ 延迟/ 和/ 丢/ 包率/ 等/ 网络/ 性能/ ,/ 在/ NS/ -/ 2/ 中/ 同样/ 实现/ 了/ 判据/ ETX/ 和/ ETT/ ./ 本文/ 的/ 分布式/ 路由/ 协议/ 与/ 文献/ [/ 7/ ,/ 11/ ]/ 中/ 的/ 集中式/ 路由/ 协议/ 不同/ ,/ 不/ 需要/ 收集/ 全局/ 信息/ 并/ 保存/ 在/ 数据库/ 中/ ./ 在/ 第/ 1/ 个/ 网络拓扑/ 中/ ,/ 我们/ 验证/ EPBW/ 对/ 链路/ 状况/ 还有/ 端到/ 端/ 链路/ 的/ 负载/ 情况/ 是否/ 敏感/ ./ 该/ 网络拓扑/ 由/ 8/ 个/ 节点/ 构成/ ,/ 有/ 固定/ 的/ 源/ 节点/ (/ 记为/ S/ )/ 和/ 目的/ 节点/ (/ 记为/ D/ )/ ./ 由图/ 可知/ 从/ S/ 到/ D/ 有/ 两条/ 路径/ {/ S/ ,/ 1/ ,/ 2/ ,/ 3/ ,/ 6/ ,/ D/ }/ (/ 记为/ P1/ )/ 和/ {/ S/ ,/ 1/ ,/ 4/ ,/ 5/ ,/ 6/ ,/ D/ }/ (/ 记为/ P2/ )/ ,/ 其中/ 节点/ 1/ 到/ 节点/ 2/ 、/ 4/ 还有/ 节点/ 6/ 到/ 节点/ 3/ 、/ 5/ 的/ 距离/ 是/ 可变/ 的/ ,/ 其余/ 节点/ 之间/ 的/ 距离/ 固定/ 为/ 150m/ ./ 整个/ 仿真/ 过程/ 中/ ,/ 在/ S/ 和/ D/ 之间/ 用/ TCP/ 进行/ 数据传输/ ,/ 流量/ 类型/ 为/ FTP/ ./ 第/ 1/ 个/ 拓扑/ 中/ 进行/ 2/ 个/ 实验/ ./ 实验/ 1/ (/ 图/ 4/ )/ 中/ 我们/ 只/ 改变/ 节点/ 间/ 的/ 距离/ ,/ 考察/ EPBW/ 对/ SNR/ 是否/ 敏感/ ./ 仿真/ 时间/ 为/ 500s/ ,/ 按/ 时间/ 均/ 分为/ 3/ 个/ 阶段/ ./ 在/ 第/ 1/ 阶段/ ,/ 即/ 0/ ~/ 166s/ ,/ 链路/ {/ 1/ ,/ 2/ }/ 的/ 距离/ 比/ 链路/ {/ 1/ ,/ 4/ }/ 小/ ,/ 链路/ {/ 3/ ,/ 6/ }/ 比/ {/ 5/ ,/ 6/ }/ 小/ ,/ 此时/ 选择/ 的/ 路径/ 是/ P1/ 最优/ ./ 在/ 167s/ 将/ 节点/ 2/ 、/ 3/ 、/ 4/ 、/ 5/ 整体/ 往/ 上/ 平移/ ,/ 即/ 在/ 第/ 2/ 阶段/ 167s/ ~/ 333s/ 使/ 链路/ {/ 1/ ,/ 2/ }/ 的/ 距离/ 比/ 链路/ {/ 1/ ,/ 4/ }/ 大/ ,/ 端到/ 端/ 吞吐量/ 开始/ 降低/ ./ 在/ 174s/ ,/ 吞吐量/ 低于/ 触发/ 路由/ 更新/ 的/ 阈值/ ,/ 触发/ 路由/ 更新/ 进程/ ./ 此时/ ,/ 节点/ 1/ ~/ 2/ 的/ SNR/ 为/ 8/ ,/ 节点/ 1/ ~/ 4/ 的/ SNR/ 为/ 13/ ,/ 节点/ 3/ ~/ 6/ 和/ 节点/ 5/ ~/ 6/ 也/ 是/ 如此/ ,/ 路由/ 更新/ 后/ 路径/ 变为/ P2/ ./ 在/ 第/ 3/ 阶段/ 334s/ ~/ 500s/ ,/ 拓扑/ 恢复/ 为/ 第/ 1/ 阶段/ 的/ 状态/ ,/ P2/ 路径/ 距离/ 较/ 远/ ,/ SNR/ 值较/ 小/ ,/ 吞吐量/ 开始/ 降低/ ./ 在/ 340s/ ,/ 吞吐量/ 还/ 没有/ 降低/ 到/ 阈值/ 水平/ ,/ 没有/ 触发/ 路由/ 更新/ ,/ 但是/ 这时/ 路由/ 更新/ 计时器/ 超时/ ,/ 周期/ 路由/ 更新/ 进程/ 启动/ ,/ 节点/ 1/ ~/ 2/ 的/ SNR/ 变为/ 13/ ,/ 节点/ 1/ ~/ 4/ 的/ SNR/ 变为/ 7/ ,/ 节点/ 3/ ~/ 6/ 和/ 节点/ Page75/ ~/ 6/ 也/ 是/ 如此/ ,/ 路由/ 更新/ 后/ 切换/ 到/ P1/ ./ 由此/ 可以/ 看出/ EPBW/ 能够/ 根据/ 距离/ (/ SNR/ )/ 的/ 变化/ ,/ 自动/ 切换/ 到/ 更优/ 的/ 路径/ ./ 由图/ 4/ (/ a/ )/ 可以/ 看出/ ,/ EPBW/ 在/ 距离/ 改变/ 的/ 情况/ 下/ 能够/ 通过/ 路由/ 更新/ 切换/ ,/ 始终保持/ 较/ 高/ 的/ 吞吐量/ ,/ 而/ ETX/ 和/ ETT/ 波动/ 较大/ ./ 由表/ 4/ 结果/ 可以/ 看到/ ,/ EPBW/ 相对/ 于/ ETX/ 和/ ETT/ ,/ 总/ 吞吐量/ 提高/ 了/ 110/ %/ ,/ 端到/ 端/ 丢/ 包率/ 降低/ 了/ 57/ %/ ./ 而端/ 到/ 端/ 延迟/ 方面/ ,/ 由于/ 跳数/ 相同/ ,/ 它们/ 的/ 差别/ 不/ 大/ ,/ 从图/ 4/ (/ b/ )/ 可以/ 看出/ ,/ EPBW/ 的/ 延迟/ 较/ 平稳/ ./ 路由/ 判据/ 吞吐量/ // MpbsETX0/ ./ 1670ETT0/ ./ 2659EPBW0/ ./ 5580/ 实验/ 2/ 中/ ,/ 节点/ 距离/ 固定/ ,/ 链路/ {/ 1/ ,/ 2/ }/ 和/ {/ 3/ ,/ 6/ }/ 的/ 距离/ 比/ 链路/ {/ 1/ ,/ 4/ }/ 和/ {/ 5/ ,/ 6/ }/ 的/ 距离/ 小/ 一些/ ./ 实验/ 中/ 节点/ 2/ 向/ 节点/ 3/ 用/ UDP/ 传输数据/ 产生/ 干扰/ 流量/ ,/ 流量/ 类型/ 为/ CBR/ ,/ 从而/ 考察/ EPBW/ 对/ 干扰/ 流量/ 是否/ 敏感/ ./ 仿真/ 时间/ 同样/ 为/ 500s/ ./ 在/ 0/ ~/ 166s/ ,/ 没有/ 设置/ 干扰/ 流量/ ,/ 路由/ 选择/ 的/ 路径/ 为/ P1/ 最优/ ./ 在/ 167s/ ~/ 333s/ ,/ 启用/ 干扰/ 流量/ ,/ 节点/ 2/ 开始/ 向/ 节点/ 3/ 发送数据/ ,/ 速率/ 图/ 5/ 实验/ 2/ (/ 拓扑/ 1/ )/ 实验/ 结果/ 路由/ 判据/ 吞吐量/ // MpbsETX0/ ./ 234064.5/ ETT0/ ./ 251162.7/ EPBW0/ ./ 481269.2/ 实验/ 3/ 在/ 图/ 6/ (/ a/ )/ 的/ 拓扑/ 2/ 中/ 进行/ ,/ 49/ 个/ 节点/ 分布/ 在/ 1200m/ ×/ 1200m/ 的/ 正方形/ 网格/ 网络/ 中/ ./ 邻居/ 节点/ 间/ 的/ 距离/ 为/ 150m/ ./ 我们/ 从/ 节点/ 4/ 向/ 节点/ 46/ 发送数据/ ,/ 并/ 在/ 节点/ 25/ 与/ 26/ 、/ 节点/ 25/ 与/ 32/ 之间/ 设置/ CBR/ 干扰/ 流量/ ./ 仿真/ 时间/ 为/ 500s/ ,/ 最初/ 只有/ 节点/ 4/ 向/ 46/ 发送/ 为/ 0.4/ Mbps/ ,/ 干扰/ 流量/ 使得/ 端到/ 端/ 吞吐量/ 降低/ ./ 在/ 176s/ ,/ 吞吐量/ 降低/ 到/ 触发/ 路由/ 更新/ 的/ 阈值/ ,/ 启动/ 路由/ 更新/ 进程/ ,/ 此时/ ,/ 节点/ 2/ 、/ 3/ 、/ 4/ 和/ 5/ 的/ 空闲/ 概率/ Pidle/ 分别/ 为/ 3.9/ %/ 、/ 4.2/ %/ 、/ 8.0/ %/ 和/ 7.5/ %/ ,/ 路径/ 切换/ 为/ P2/ ./ 由于/ 干扰/ 流量/ 在/ 路径/ 2/ 跳/ 以内/ ,/ 还是/ 会/ 受到/ 一定/ 的/ 影响/ ,/ 干扰/ 流量/ 使得/ 吞吐量/ 有/ 一定/ 的/ 下降/ ,/ 这/ 从/ 图/ 5/ (/ a/ )/ 中/ 可以/ 看到/ ,/ 但/ 由于/ EPBW/ 选择/ 了/ 较/ 好/ 的/ 路径/ ,/ 吞吐量/ 还是/ 比/ ETX/ 和/ ETT/ 要/ 高/ 许多/ ./ 334s/ ~/ 500s/ ,/ 关闭/ 干扰/ 流量/ ,/ 触发/ 更新/ 的/ 机制/ 只会/ 响应/ 吞吐量/ 下降/ 的/ 情况/ ,/ 而/ 当前/ 路径/ 性能/ 不变/ ,/ 有/ 其它/ 更好/ 的/ 路径/ 存在/ 时/ 无法/ 起/ 作用/ ./ 在/ 340s/ 时/ ,/ 路由/ 更新/ 计时器/ 超时/ ,/ 周期/ 路由/ 更新/ 进程/ 启动/ ,/ 此时/ 节点/ 2/ 、/ 3/ 、/ 4/ 和/ 5/ 的/ 空闲/ 概率/ Pidle/ 分别/ 为/ 10.8/ %/ 、/ 11.2/ %/ 、/ 1.2/ %/ 和/ 1.6/ %/ ,/ 路由/ 更新/ 后/ 路径/ 切换/ 回/ P1/ ,/ 吞吐量/ 恢复/ 到/ 前/ 166s/ 的/ 水平/ ,/ 而/ ETX/ 和/ ETT/ 吞吐量/ 恢复/ 的/ 速度/ 较慢/ ,/ 对/ 干扰/ 变化/ 的/ 反应/ 较/ 迟钝/ ./ 由图/ 5/ (/ a/ )/ 可以/ 看出/ ,/ EPBW/ 能/ 较/ 好/ 地/ 避开/ 干扰/ 流量/ ,/ 比/ ETX/ 和/ ETT/ 在/ 干扰/ 流量/ 下能/ 保持/ 较/ 高/ 的/ 吞吐量/ ,/ 从表/ 5/ 可以/ 看到/ EPBW/ 的/ 吞吐量/ 比/ ETT/ 提高/ 了/ 92/ %/ 左右/ ./ 对于/ 端到/ 端/ 丢/ 包率/ ,/ 由图/ 5/ (/ b/ )/ 可以/ 看出/ ,/ EPBW/ 对于/ ETX/ 和/ ETT/ 也/ 有/ 明显/ 的/ 降低/ ,/ 大约/ 降低/ 了/ 48/ %/ ./ 数据/ ,/ EPBWR/ 发现/ 最佳/ 路径/ {/ 4/ ,/ 11/ ,/ 18/ ,/ 25/ ,/ 32/ ,/ 39/ ,/ 46/ }/ ./ 在/ 100s/ ~/ 200s/ 期间/ ,/ 节点/ 25/ 向/ 节点/ 26/ 发送/ CBR/ 数据流/ 产生/ 干扰/ 流量/ ,/ 速率/ 从/ 0.2/ Mbps/ 逐渐/ 增大/ 到/ 0.4/ Mbps/ ./ 在/ 107s/ ,/ 节点/ 46/ 测量/ 得到/ 的/ 吞吐量/ 降到/ 阈值/ 以下/ ,/ 触发/ 路由/ 更新/ 并/ 找到/ 一条/ 更好/ 的/ 路径/ {/ 4/ ,/ 10/ ,/ 16/ ,/ 23/ ,/ 30/ ,/ 38/ ,/ 46/ }/ ./ 200s/ 到/ 300s/ ,/ 关闭/ 干扰/ 流量/ ,/ EPBWR/ 周期性/ 路由/ 更新/ 并/ 在/ 220s/ 切换/ 到/ 之前/ 的/ 路径/ ./ 在/ 300s/ ~/ 400s/ ,/ 启用/ 节点/ 25/ ~/ 32/ 之间/ 的/ CBR/ 数据传输/ 作为/ 干扰/ 流量/ ,/ 速率/ 从/ 0.2/ Mbps/ 增加/ 到/ 0.4/ Mbps/ ./ 随着/ 吞吐量/ 下降/ ,/ EPBWR/ 通过/ 路由/ 更新/ 进程/ 得到/ 路径/ {/ 4/ ,/ 12/ ,/ 20/ ,/ 27/ ,/ 34/ ,/ 41/ ,/ 47/ ,/ 46/ }/ ./ Page8/ 在/ 400s/ ~/ 500s/ ,/ 关闭/ 干扰/ 流量/ ,/ EPBWR/ 切换/ 回/ 最初/ 的/ 路径/ ./ 从图/ 7/ 的/ (/ a/ )/ 和/ (/ b/ )/ 中/ 可以/ 看到/ ,/ EPBW/ 、/ ETX/ 和/ ETT/ 的/ 吞吐量/ 都/ 由于/ 干扰/ 流量/ 的/ 存在/ 而/ 降低/ ./ EPBW/ 为了/ 绕过/ 拥塞/ 区域/ 而/ 采用/ 了/ 跳数/ 较/ 多/ 的/ 路径/ ,/ 这/ 导致/ 其/ 吞吐量/ 下降/ ./ 尽管如此/ ,/ EPBW/ 仍然/ 比/ ETX/ 和/ ETT/ 有/ 更好/ 的/ 性能/ 表现/ ./ 从图/ 7/ (/ b/ )/ 、/ (/ c/ )/ 图/ 6/ 网络拓扑/ 2/ 和/ 3/ 图/ 7/ 实验/ 3/ (/ 拓扑/ 2/ )/ 网络/ 性能/ 对比/ 和/ (/ d/ )/ 中/ 可以/ 看到/ ,/ EPBW/ 取得/ 了/ 180/ %/ 的/ 吞吐量/ 提升/ 同时/ 丢/ 包率/ 只有/ 2.33/ %/ ,/ ETX/ 和/ ETT/ 分别/ 为/ 5.76/ %/ 和/ 4.60/ %/ ,/ 其端/ 到/ 端/ 延迟/ 也/ 降低/ 了/ 大约/ 23/ %/ ./ 从/ 实验/ 3/ 我们/ 验证/ 了/ EPBW/ 能/ 很/ 好/ 地/ 根据/ 网络/ 中/ 的/ 负载/ 情况/ 进行/ 动态/ 调整/ ,/ 有/ 较/ 好/ 的/ 性能/ 表现/ ./ Page9/ 实验/ 4/ 在/ 图/ 6/ (/ b/ )/ 中/ 拓扑/ 3/ 中/ 进行/ ,/ 100/ 个/ 节点/ 分布/ 在/ 1500m/ ×/ 1500m/ 的/ 拓扑/ 中/ ,/ 相对/ 于/ 拓扑/ 2/ 有/ 更/ 多/ 的/ 节点/ 并且/ 采用/ 随机/ 的/ 数据传输/ ./ 如图/ 6/ (/ b/ )/ 所示/ ,/ 随机/ 选取/ 了/ 9/ 个/ 节点/ 发送数据/ 和/ 3/ 个/ 网关/ 接收/ 流量/ ./ 节点/ 根据/ 协议/ 计算/ 选择/ 最优/ 的/ 网关/ 进行/ 数据传输/ ./ 实验/ 重复/ 进行/ 10/ 次/ ,/ 计算/ 得到/ 的/ 平均/ 图/ 8/ 实验/ 4/ (/ 拓扑/ 3/ )/ 网络/ 性能/ 对比/ 实验/ 5/ 采用/ 与/ 实验/ 3/ 相同/ 的/ 网络拓扑/ 与/ 流量/ 设定/ ,/ 对比/ 不同/ 路由/ 协议/ 的/ 吞吐量/ 与/ 路由/ 开销/ ./ 吞吐量/ 如图/ 9/ (/ a/ )/ 所示/ ,/ EPBWR/ 、/ DSR/ 、/ AODV/ 和/ DSDV/ 吞吐量/ 分别/ 为/ 0.48/ Mbps/ 、/ 0.39/ Mbps/ 、/ 0.15/ Mbps/ 和/ 0.0184/ Mbps/ ./ 在/ 存在/ 干扰/ 流量/ 的/ 情况/ 下/ ,/ EPBWR/ 比/ 其余/ 3/ 种/ 路由/ 协议/ 获得/ 更/ 高/ 更/ 稳定/ 的/ 吞吐量/ ./ DSR/ 和/ AODV/ 在/ 存在/ 干扰/ 流量/ 的/ 情况/ 下/ ,/ 其/ 吞吐量/ 迅速/ 下降/ ,/ DSDV/ 在/ 该/ 场景/ 下/ 性能/ 较差/ ,/ 吞吐量/ 结果/ 说明/ EPBWR/ 相对/ 于/ 其它/ 3/ 种/ 路由/ 协议/ ,/ 具有/ 更好/ 的/ 负载/ 适应能力/ ./ 通过/ 统计/ 不同/ 协议/ 在/ 整个/ 仿真/ 期间/ 传输/ 路由/ 信/ 性能指标/ 如图/ 8/ 所示/ ./ EPBW/ 相对/ 于/ ETX/ 和/ ETT/ 提高/ 了/ 48/ %/ 的/ 吞吐量/ ,/ 同时/ 丢/ 包率/ 降低/ 了/ 32/ %/ ,/ 端到/ 端/ 延迟/ 减少/ 了/ 28/ %/ ./ 本/ 实验/ 由于/ 路径/ 跳数/ 较/ 少/ ,/ 端到/ 端/ 延迟/ 比/ 前面/ 的/ 实验/ 低/ ,/ 但/ 由于/ 有/ 多条/ 数据流/ 共享/ 网络资源/ ,/ 吞吐量/ 并/ 没有/ 因为/ 路径/ 跳数少/ 而/ 提高/ ./ 息包/ 的/ 数量/ ,/ 得到/ 如图/ 9/ (/ b/ )/ 所示/ 的/ 路由/ 发现/ 和/ 维护/ 开销/ ./ 由于/ AODV/ 会/ 周期/ 广播/ Hello/ 包/ ,/ 其/ 路由/ 开销/ 比/ 其它/ 路由/ 协议/ 要/ 高/ 很多/ ./ DSR/ 与/ AODV/ 类似/ ,/ 但/ 它/ 只/ 维护/ 已经/ 发现/ 的/ 活跃/ 路径/ 上/ 的/ 节点/ ,/ 此外/ DSR/ 还/ 使用/ 路由/ 缓存/ 机制/ 来/ 减少/ 广播/ ,/ 从而/ 减少/ 了/ 路由/ 开销/ ./ DSDV/ 为/ 主动/ 路由/ 协议/ ,/ 其/ 路由/ 开销/ 会/ 随着/ 网络/ 规模/ 扩大/ 而/ 增大/ ./ EPBWR/ 结合/ 了/ 触发/ 更新/ 和/ 周期/ 路由/ 更新/ 机制/ ,/ 其/ 路由/ 开销/ 相对/ 于/ AODV/ 、/ DSR/ 和/ DSDV/ 分别/ 降低/ 了/ 630/ %/ 、/ 81/ %/ 和/ 47.6/ %/ ,/ 这/ 使得/ EPBWR/ 在/ 网络资源/ 有限/ 的/ 情况/ 下/ 具有/ 较/ 好/ 的/ 性能/ ./ Page10/ 图/ 9/ 实验/ 5/ (/ 拓扑/ 2/ )/ 网络/ 性能/ 对比/ 6/ 结论/ 本文/ 提出/ 一种/ 新/ 的/ 路由/ 判据/ EPBW/ ,/ 它/ 同时/ 考虑/ 物理/ 信道/ 质量/ 、/ 流间/ 和/ 流内/ 干扰/ 的/ 影响/ ,/ 并且/ 基于/ 路由/ 判据/ EPBW/ ,/ 我们/ 还/ 提出/ 了/ 一种/ 分布式/ 路由/ 协议/ EPBWR/ ,/ 并/ 在/ NS/ -/ 2/ 中/ 实现/ ./ 仿真/ 实验/ 表明/ ,/ EPBW/ 和/ EPBWR/ 相对/ 于/ 其它/ 路由/ 判据/ (/ ETX/ 、/ ETT/ )/ 和/ 协议/ (/ AODV/ 、/ DSR/ 、/ DSDV/ )/ 都/ 有/ 显著/ 的/ 性能/ 提高/ ./ 未来/ 我们/ 将/ 对/ 该/ 工作/ 进行/ 拓展/ 以/ 实现/ 负载/ 均衡/ ,/ 并/ 把/ 端/ 到/ 端/ 延迟/ 结合/ 到/ 判据/ 中以/ 满足用户/ 的/ QoS/ 需求/ ./ 此外/ ,/ 如何/ 利用/ 冗余/ 路径/ 和/ 缓存/ 机制/ 来/ 提高/ 路由/ 鲁棒性/ 也/ 值得/ 我们/ 进行/ 深入研究/ ./ 

