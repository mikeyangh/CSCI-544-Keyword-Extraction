Page1/ 面向/ 复杂/ 三维/ 场景/ 的/ 高质量/ 纹理/ 映射/ 姜翰青/ 王博胜章/ 国锋/ 鲍虎军/ (/ 浙江大学/ 计算机辅助/ 设计/ 与/ 图形学/ 国家/ 重点/ 实验室/ 杭州/ 310058/ )/ 摘要/ 为/ 三维/ 模型/ 创建/ 纹理/ 贴图/ 是/ 真实感图形/ 学/ 领域/ 的/ 一个/ 重要/ 课题/ ,/ 然而/ 现今/ 针对/ 大/ 数据/ 的/ 复杂/ 结构/ 的/ 自然/ 场景/ 的/ 纹理/ 映射/ 方法/ 还/ 很少/ ./ 该文/ 提出/ 了/ 一种/ 新/ 的/ 多/ 视图/ 纹理/ 映射/ 方法/ ,/ 能够/ 利用/ 多角度/ 拍摄/ 的/ 图像/ 序列/ 为/ 三维/ 模型/ 进行/ 高/ 真实感/ 的/ 纹理/ 贴图/ ./ 相比/ 现有/ 的/ 方法/ ,/ 该文/ 的/ 方法/ 在/ 针对/ 模型/ 中/ 存在/ 复杂/ 遮挡/ 的/ 纹理/ 映射/ 以及/ 大/ 纹理/ 数据/ 的/ 融合/ 这/ 两/ 方面/ 有着/ 明显/ 的/ 优势/ ./ 首先/ 将/ 多/ 视图/ 纹理/ 映射/ 转化/ 为/ 一个/ 马尔可夫/ 随/ 机场/ 问题/ ,/ 并用/ 能量/ 优化/ 的/ 方法/ 获得/ 模型/ 每个/ 面片/ 最优/ 的/ 纹理/ 图像/ 对应/ 关系/ ;/ 然后/ 将/ 映射/ 的/ 纹理/ 数据/ 进行/ 精/ 简化/ ,/ 并/ 对/ 部分/ 不/ 可见/ 区域/ 的/ 无效/ 纹理/ 进行/ 修复/ ;/ 最后/ ,/ 利用/ 梯度/ 融合/ 的/ 方法/ 消除/ 纹理/ 拼接/ 边界/ 的/ 颜色/ 差异/ ,/ 最终/ 获得/ 无/ 缝隙/ 的/ 纹理/ 贴图/ 效果/ ./ 一系列/ 复杂/ 场景/ 的/ 实例/ 证明/ 了/ 该文/ 方法/ 的/ 有效性/ 和/ 鲁棒性/ ./ 关键词/ 多/ 视图/ 纹理/ 映射/ ;/ 纹理/ 映射/ 最优化/ ;/ 无/ 缝隙/ 纹理/ 融合/ 1/ 引言/ 纹理/ 映射/ 是/ 建立/ 三维/ 物体/ 表面/ 和/ 二维/ 图像/ 空间/ Page2/ 单幅/ 或者/ 少数几/ 幅照片/ 往往/ 不能/ 涵盖/ 场景/ 的/ 完整/ 信息/ ,/ 往往/ 需要/ 更/ 多角度/ 的/ 图像/ 数据/ 才/ 能够/ 实现/ 完整/ 的/ 纹理/ 映射/ ./ 本文/ 的/ 研究/ 目标/ 便是/ 如何/ 利用/ 多角度/ 的/ 图像/ 序列/ 来/ 实现/ 高质量/ 的/ 三维/ 模型/ 纹理/ 映射/ ./ 近年来/ ,/ 随着/ 三维重建/ 技术/ 的/ 迅速/ 发展/ [/ 1/ ]/ ,/ 从/ 多/ 视图/ 图像/ 序列/ 或者/ 视频/ 中/ 重建/ 高精度/ 的/ 自然/ 场景/ 的/ 三维/ 模型/ 已经/ 越来越/ 成熟/ ./ 然而/ ,/ 要/ 实现/ 对/ 自然/ 三维/ 场景/ 的/ 逼真/ 展示/ ,/ 仅/ 恢复/ 其/ 三维/ 几何/ 模型/ 是/ 不够/ 的/ ,/ 还/ 需要/ 恢复/ 其/ 表面/ 的/ 真实/ 纹理/ ./ 因此/ 如何/ 有效/ 地为/ 重建/ 的/ 三维/ 模型/ 贴/ 上/ 真实/ 的/ 纹理/ 同样/ 是/ 一个/ 值得/ 关注/ 的/ 课题/ ./ 虽然/ 已有/ 一些/ 工作/ [/ 2/ -/ 3/ ]/ 尝试/ 利用/ 多/ 视图/ 图像/ 序列/ 来/ 实现/ 自然/ 场景/ 三维/ 模型/ 的/ 纹理/ 映射/ ,/ 并且/ 有些/ 方法/ [/ 4/ -/ 5/ ]/ 已经/ 能够/ 创建/ 高/ 真实感/ 的/ 纹理/ 贴图/ ,/ 但是/ 这些/ 方法/ 往往/ 只/ 针对/ 于/ 结构/ 简单/ 的/ 三维/ 物体/ 模型/ ,/ 难以/ 很/ 好/ 地/ 处理/ 复杂/ 的/ 大/ 尺度/ 自然/ 场景/ 数据/ ./ 本文/ 提出/ 了/ 一种/ 纹理/ 拼接/ 优化/ 的/ 方法/ 来/ 实现/ 三维/ 模型/ 的/ 高/ 真实感/ 纹理/ 映射/ ./ 如图/ 1/ 所示/ ,/ 输入/ 一段/ 多/ 视角/ 拍摄/ 并且/ 每帧/ 摄像机/ 参数/ 和/ 深度/ 已知/ 的/ 纹理/ 图像/ 序列/ ,/ 以及/ 与/ 该/ 序列/ 场景/ 世界/ 坐标系/ 对齐/ 的/ 三维/ 几何/ 模型/ ,/ 我们/ 的/ 目标/ 是/ 为/ 三维/ 模型/ 恢复/ 完整/ 的/ 真实感/ 纹理/ 贴图/ ./ 与/ 文献/ [/ 4/ -/ 5/ ]/ 类似/ ,/ 我们/ 的/ 方法/ 将/ 纹理/ 拼接/ 优化/ 问题/ 转换/ 为/ 一个/ 马尔可夫/ 随/ 机场/ 问题/ ,/ 并用/ 能量/ 优化/ 的/ 方法/ 对/ 其/ 进行/ 求解/ ,/ 如图/ 1/ (/ c/ )/ 所示/ ./ 然而/ ,/ 我们/ 方法/ 的/ 不同之处/ 在于/ 考虑/ 了/ 遮挡/ 和/ 大/ 尺度/ 场景/ 等/ 问题/ 的/ 处理/ ,/ 因此/ 能够/ 很/ 好地解决/ 结构复杂/ 的/ 大/ 尺度/ 场景/ 的/ 纹理/ 贴图/ ,/ 这是/ 现有/ 的/ 方法/ 难以/ 做到/ 的/ ./ 我们/ 首先/ 对/ 三维/ 模型/ 中/ 的/ 每个/ 三角/ 面片/ 选择/ 最佳/ 的/ 纹理/ 图像/ ,/ 从而/ 实现/ 纹理/ 映射/ 的/ 整体/ 最优化/ ;/ 然后/ 我们/ 对/ 纹理/ 数据/ 进行/ 分块/ 和/ 有效/ 区域/ 裁剪/ ,/ 以/ 最小化/ 整体/ 纹理/ 数据/ ;/ 接下来/ ,/ 我们/ 对/ 纹理/ 图像/ 的/ 颜色/ 进行/ 调整/ ,/ 从而/ 消除/ 来自/ 不同/ 纹理/ 图像/ 帧/ 的/ 纹理/ 色差/ ,/ 实现/ 三维/ 模型/ 的/ 无/ 缝隙/ 纹理/ 映射/ ./ 我们/ 方法/ 的/ 主要/ 创新/ 点/ 如下/ :/ (/ 1/ )/ 现有/ 的/ 纹理/ 映射/ 方法/ 对于/ 自/ 遮挡/ 结构/ 的/ 纹理/ 贴图/ 存在/ 多义性/ ,/ 而/ 我们/ 的/ 方法/ 能够/ 利用/ 深度/ 信息/ 来/ 有效/ 地/ 处理/ 自/ 遮挡/ ,/ 因此/ 适用/ 于/ 结构复杂/ 的/ 三维/ 模型/ 的/ 纹理/ 贴图/ ;/ (/ 2/ )/ 由于/ 内存/ 的/ 限制/ ,/ 现有/ 的/ 大多数/ 方法/ 仅/ 能够/ 处理/ 结构/ 简单/ 的/ 小规模/ 三维/ 模型/ ,/ 缺乏/ 一种/ 面向/ 大/ 尺度/ 复杂/ 三维/ 场景/ 的/ 纹理/ 映射/ 方法/ ,/ 而/ 我们/ 的/ 方法/ 通过/ 迭代/ 求解/ 来/ 分片/ 处理/ 模型/ 的/ 纹理/ ,/ 因此/ 适用/ 于/ 大/ 尺度/ 场景/ 三维/ 模型/ 的/ 纹理/ 贴图/ 应用/ ./ 2/ 相关/ 工作/ 视频/ 的/ 每/ 帧/ 图像/ 仅仅/ 能/ 捕获/ 到/ 场景/ 的/ 一个/ 局部/ 区域/ ,/ 因此/ 需要/ 结合/ 视频/ 的/ 多/ 帧/ 图像/ 来/ 创建/ 三维/ 模型/ 的/ 完整/ 纹理/ 贴图/ ./ Wang/ 等/ 人/ [/ 2/ ]/ 的/ 方法/ 和/ Baumberg/ 的/ 方法/ 用/ 加权/ 混合/ 的/ 方式/ 结合/ 多/ 帧/ 纹理/ 图像/ ,/ 为/ 每/ 帧/ 图像/ 求解/ 合适/ 的/ 权重/ 以/ 获得最佳/ 的/ 混合/ 效果/ ./ 然而/ ,/ 如果/ 纹理/ 图像/ 之间/ 存在/ 偏移/ 或者/ 颜色/ 差异/ ,/ 加权/ 混合/ 后/ 会/ 产生/ 明显/ 的/ 走样/ ./ Niem/ 和/ Broszio/ [/ 6/ ]/ 的/ 方法/ 为/ 每个/ 三角/ 面片/ 选择/ 其/ 可见/ 的/ 某/ 帧/ 纹理/ 图像/ 进行/ 映射/ ,/ 并用/ 贪心/ 的/ 方式/ 调整/ 每个/ 三角/ 面片/ 使得/ 相邻/ 的/ 三角/ 面片/ 尽可能/ 来自/ 同/ 一幅/ 纹理/ 图像/ ,/ 该/ 方法/ 的/ 结果/ 很难/ 完全/ 保证/ 相邻/ 三角/ 面片/ 的/ 纹理/ 一致性/ ./ 与/ 文献/ [/ 6/ ]/ 不同/ ,/ Lempitsky/ 和/ Ivanov/ [/ 4/ ]/ 提出/ 将/ Page3/ 三维/ 模型/ 的/ 多/ 视图/ 纹理/ 映射/ 视为/ 一个/ 图像/ 拼接/ 问题/ :/ 整体/ 模型/ 的/ 纹理/ 映射/ 即/ 为/ 每个/ 三角/ 面片/ 选择/ 合适/ 的/ 纹理/ 图像/ ,/ 并且/ 保持/ 相邻/ 三角/ 面片/ 纹理/ 接缝/ 颜色/ 的/ 一致性/ ./ 该/ 问题/ 可/ 转换/ 为/ 一个/ 马尔可夫/ 随/ 机场/ 问题/ 进行/ 求解/ ./ Gal/ 等/ 人/ [/ 7/ ]/ 对于/ 文献/ [/ 4/ ]/ 的/ 方法/ 做/ 了/ 改进/ ,/ 对于/ 三角/ 面片/ 在/ 每个/ 帧/ 纹理/ 图像/ 上/ 的/ 映射/ 考虑/ 了/ 局部/ 位移/ ,/ 从而/ 能够/ 处理/ 摄像机/ 参数/ 和/ 三维/ 模型/ 存在/ 的/ 误差/ 偏移/ 问题/ ,/ 但是/ 求解/ 空间/ 扩大会/ 影响/ 该/ 方法/ 的/ 运行/ 效率/ ./ 文献/ [/ 4/ ,/ 7/ ]/ 提出/ 的/ 方法/ 计算/ 时间/ 和/ 空间/ 复杂度/ 均/ 很/ 高/ ,/ 因此/ 仅/ 能够/ 处理/ 形状/ 简单/ 的/ 小规模/ 模型/ ./ 此外/ ,/ 上述/ 这些/ 方法/ 均/ 没有/ 考虑/ 三维/ 模型/ 的/ 自/ 遮挡/ 情况/ ./ 我们/ 的/ 方法/ 与/ 文献/ [/ 4/ ,/ 7/ ]/ 类似/ ,/ 不同之处/ 在于/ 能够/ 处理/ 模型/ 自/ 遮挡/ 导致/ 的/ 歧义/ 性/ ,/ 并且/ 能够/ 处理/ 大/ 尺度/ 复杂/ 场景/ 三维/ 模型/ 的/ 纹理/ 映射/ ,/ 这是/ 上述/ 方法/ 所/ 做/ 不到/ 的/ ./ 除了/ 文献/ [/ 7/ ]/ 之外/ ,/ 近年来/ 还有/ 一些/ 纹理/ 映射/ 方法/ 也/ 能够/ 较/ 好/ 地/ 处理/ 误差/ 偏移/ 问题/ ,/ 从而/ 实现/ 高质量/ 的/ 真实感/ 纹理/ 贴图/ 效果/ ./ 例如/ ,/ Eisemann/ 等/ 人/ [/ 8/ ]/ 利用/ 多/ 帧/ 纹理/ 图像/ 之间/ 的/ 光流来/ 实现/ 图像/ 对齐/ 以/ 解决/ 误差/ 偏移/ 问题/ ,/ 其/ 运行/ 效率/ 依赖于/ GPU/ 的/ 加速/ ./ Goldluecke/ 等/ 人/ [/ 5/ ]/ 则/ 提出/ 了/ 超/ 分辨率/ 的/ 纹理/ 映射/ 方法/ ./ Zhou/ 和/ Koltun/ [/ 9/ ]/ 提出/ 了/ 利用/ 颜色/ 一致性/ 调整/ 摄像机/ 参数/ 并且/ 对/ 图像/ 帧/ 进行/ 形变/ 来/ 解决/ 误差/ 偏移/ 问题/ ./ 由于/ 计算/ 时间/ 和/ 空间/ 上/ 的/ 复杂性/ ,/ 这些/ 方法/ 都/ 难以/ 处理/ 大/ 尺度/ 复杂/ 场景/ 的/ 纹理/ 贴图/ ./ 还有/ 一些/ 结合/ 用户/ 交互/ 的/ 方法/ [/ 10/ -/ 12/ ]/ 提供/ 了/ 半自动/ 的/ 工具/ 允许/ 用户/ 在/ 模型/ 面片/ 和/ 图像/ 区域/ 之间/ 指定/ 匹配/ 点/ ,/ 从而/ 将/ 纹理/ 图像/ 贴/ 至/ 三维/ 模型/ 表面/ 上/ ./ 与/ 这些/ 交互/ 工具/ 不同/ ,/ 我们/ 的/ 方法/ 能够/ 全自动/ 地为/ 三维/ 模型/ 的/ 面片/ 选取/ 合适/ 的/ 纹理/ 贴图/ 区域/ ,/ 无需/ 繁琐/ 的/ 用户/ 交互/ ./ 3/ 算法/ 目标/ 和/ 系统/ 概述/ 给定/ 一段/ 包含/ n/ 帧/ 的/ 自然/ 场景/ 图像/ 序列/ I/ =/ {/ It/ |/ t/ =/ 1/ ,/ …/ ,/ n/ }/ 以及/ 视频/ 每帧/ 对应/ 的/ 摄像机/ 参数/ 和/ 深度图/ ,/ 同时/ 输入/ 该/ 场景/ 的/ 三维/ 几何/ 模型/ M/ =/ {/ Fi/ |/ i/ =/ 1/ ,/ …/ ,/ m/ }/ (/ 其中/ m/ 为/ 模型/ 中/ 三角/ 面片/ 的/ 总数/ ,/ Fi/ 为/ 第/ i/ 个/ 三角/ 面片/ ,/ 其/ 包含/ 3/ 个/ 顶点/ {/ Vk/ 顶点/ 的/ 位置/ 与/ 该/ 序列/ 场景/ 世界/ 坐标系/ 对齐/ )/ ,/ 我们/ 的/ 目标/ 是/ 为/ 场景/ 模型/ 恢复/ 完整/ 的/ 真实感/ 纹理/ 贴图/ 以及/ 纹理/ 坐标/ 数据/ ./ 视频/ 第/ t/ 帧/ 的/ 摄像机/ 参数/ 表示/ 为/ Ct/ =/ {/ Kt/ ,/ 犚/ t/ ,/ 犜/ t/ }/ ,/ 其中/ Kt/ 为/ 内参/ ,/ 犚/ t/ 为/ 旋转/ 矩阵/ ,/ 犜/ t/ 为/ 平移/ 向量/ ,/ 第/ t/ 帧/ 的/ 深度图/ 表示/ 为/ Dt/ ./ 我们/ 分别/ 用/ It/ (/ x/ )/ 和/ Dt/ (/ x/ )/ =/ 1/ // Zt/ (/ x/ )/ 来/ 表示/ 第/ t/ 帧/ 的/ 像素点/ x/ 对应/ 的/ 颜色/ 和/ 视差/ (/ 即/ 深度/ 的/ 倒数/ )/ ./ 这里/ 的/ 三维/ 模型/ 既/ 可以/ 通过/ 深度/ 相机/ (/ 如/ Kinect/ 或/ ToF/ 相机/ )/ 直接/ 扫描/ 得到/ (/ 如图/ 2/ )/ ,/ 也/ 可以/ 通过/ 多/ 视图/ 立体/ 方法/ (/ 如/ 文献/ [/ 13/ ]/ 或/ PMVS2/ [/ 14/ ]/ )/ 来/ 重建/ ,/ 甚至/ 可以/ 通过/ 人工/ 交互/ 建模/ 的/ 方式/ 得到/ (/ 如图/ 3/ 的/ 家具/ 模型/ )/ ./ 采用/ 多/ 视图/ 立体/ 方法/ 来/ 重建/ ,/ 一般/ 先/ 恢复/ 每帧/ 的/ 摄像机/ 参数/ 和/ 深度图/ (/ 在/ 实验/ 里/ ,/ 我们/ 采/ Page4/ 用/ ACTS/ 软件/ ①/ 来/ 恢复/ 相机/ 的/ 参数/ 和/ 每/ 帧/ 的/ 深度/ 图像/ )/ ./ 而/ 对于/ 人工/ 交互/ 建模/ 的/ 模型/ ,/ 可能/ 没有/ 深度图/ ,/ 可以/ 通过/ 将/ 三维/ 模型/ 在/ 每/ 帧/ 图像/ 对应/ 的/ 视角/ 下/ 进行/ 深度/ 绘制/ 来/ 得到/ 每帧/ 的/ 深度/ 图像/ ./ 图/ 4/ 展示/ 了/ 系统/ 的/ 整体/ 框架/ ./ 我们/ 首先/ 用/ 能量/ 优化/ 方法/ 为/ 三维/ 模型/ 中/ 的/ 每个/ 三角/ 面片/ 选择/ 最佳/ 的/ 纹理/ 图像/ ,/ 从而/ 实现/ 纹理/ 映射/ 的/ 整体/ 最优化/ (/ 见图/ 4/ 系统/ 框架/ 4/ 纹理/ 映射/ 优化/ 我们/ 输入/ 的/ 纹理/ 数据/ 是/ 多/ 视角/ 拍摄/ 的/ 图像/ 序列/ ,/ 因此/ 对于/ 三维/ 模型/ 的/ 每个/ 三角/ 面片/ ,/ 可/ 映射/ 的/ 纹理/ 图像/ 不止/ 一幅/ ,/ 我们/ 所要/ 做/ 的/ 是/ 为/ 每个/ 三角/ 面片/ 选择/ 一幅/ 最优/ 的/ 纹理/ 图像/ 进行/ 映射/ ./ 换句话说/ ,/ 对于/ 每个/ 三角/ 面片/ Fi/ ,/ 从/ 输入/ 图像/ 序列/ I/ =/ {/ It/ |/ t/ =/ 1/ ,/ …/ ,/ n/ }/ 中/ 寻找/ 一幅/ 最优/ 的/ 纹理/ 图像/ Il/ (/ i/ )/ ,/ 其帧/ 号/ l/ (/ i/ )/ ∈/ {/ 1/ ,/ …/ ,/ n/ }/ 可/ 视为/ 关于/ i/ 的/ 标记/ 函数/ ./ 最优化/ 的/ 纹理/ 映射/ 结果/ 即/ 为/ 所有/ 三角/ 面片/ 最优/ 纹理/ 帧/ 标记/ 的/ 集合/ L/ =/ {/ l/ (/ i/ )/ |/ i/ =/ 1/ ,/ …/ ,/ m/ }/ ./ 由此/ ,/ 我们/ 将/ 纹理/ 映射/ 最优化/ 问题/ 转化/ 为/ 求解/ L/ 标记/ 问题/ ./ 此/ 标记/ 问题/ 有/ 两/ 方面/ 的/ 目标/ :/ (/ 1/ )/ 选择/ 纹理/ 映射/ 信息/ 最/ 丰富/ 的/ 纹理/ 图像/ ;/ (/ 2/ )/ 保证/ 来自/ 不同/ 纹理/ 图像/ 的/ 相邻/ 三角/ 面片/ 之间/ 的/ 纹理/ 缝隙/ 颜色/ 一致性/ ./ 类似/ 于/ 文献/ [/ 4/ ,/ 7/ ]/ ,/ 我们/ 可以/ 将/ 此/ 标记/ 问题/ 视为/ 一个/ 马尔可夫/ 随/ 机场/ 问题/ ,/ 并用/ 能量/ 最小化/ 的/ 方法/ 进行/ 求解/ ./ 我们/ 的/ 能量/ 方程/ 表示/ 如下/ :/ E/ (/ L/ )/ =/ ∑/ 其中/ :/ N/ (/ Fi/ )/ 表示/ 与/ Fi/ 相邻/ 的/ 三角/ 面片/ 集合/ ;/ 数据项/ Ed/ 衡量/ 纹理/ 图像/ Il/ (/ i/ )/ 在/ 三角/ 面片/ Fi/ 上/ 映射/ 的/ 纹理/ 信息/ 丰富/ 程度/ ,/ 平滑/ 项/ Es/ 衡量/ 模型/ 表面/ 不同/ 纹理/ 图像/ 缝隙/ 的/ 颜色/ 一致性/ ./ 第/ 4/ 节/ )/ ;/ 然后/ ,/ 我们/ 按照/ 纹理/ 映射/ 结果/ 对模型/ 的/ 三角/ 面片/ 进行/ 分块/ ,/ 同时/ 对/ 纹理/ 图像/ 的/ 有效/ 区域/ 进行/ 裁剪/ ,/ 以此/ 精/ 简化/ 模型/ 整体/ 的/ 纹理/ 数据/ (/ 见/ 第/ 5/ 节/ )/ ;/ 接下来/ 我们/ 对/ 纹理/ 图像/ 的/ 颜色/ 进行/ 调整/ ,/ 从而/ 消除/ 来自/ 不同/ 纹理/ 图像/ 帧/ 的/ 纹理/ 接缝/ 色差/ ,/ 得到/ 三维/ 模型/ 最终/ 无/ 缝隙/ 的/ 纹理/ 图像/ 和/ 纹理/ 坐标/ (/ 见/ 第/ 6/ 节/ )/ ./ 与/ 文献/ [/ 7/ ]/ 类似/ ,/ 我们/ 从/ 两/ 方面/ 来/ 衡量/ 纹理/ 映射/ 信息/ 的/ 丰富/ 程度/ :/ (/ 1/ )/ 三角/ 面片/ 映射/ 纹理/ 图像/ 的/ 分辨率/ (/ 可以/ 用/ 三角/ 面片/ 到/ 纹理/ 图像/ 摄像机/ 位置/ 的/ 距离/ 来/ 衡量/ )/ ;/ (/ 2/ )/ 纹理/ 图像/ 视线/ 方向/ 与/ 三角/ 面片/ 法向/ 一致性/ (/ 正视/ 角度/ 的/ 纹理/ 信息/ 最/ 丰富/ )/ ./ 结合/ 上述/ 两/ 方面/ 标准/ ,/ Ed/ 可以/ 按照/ 以下/ 公式/ 定义/ :/ Ed/ (/ l/ (/ i/ )/ )/ =/ -/ ∑/ i/ ,/ l/ (/ i/ )/ )/ 是/ 关于/ 顶点/ Vkd/ (/ Vk/ 距离/ 的/ 函数/ ,/ 用来/ 衡量/ 三角/ 面片/ 映射/ 纹理/ 图像/ 的/ 分辨率/ ,/ 其/ 定义/ 如下/ :/ d/ (/ Vki/ ,/ l/ (/ i/ )/ )/ =/ 烄/ z/ (/ Pl/ (/ i/ )/ (/ Vk/ 烅/ 0/ ,/ 烆/ 其中/ ,/ Pl/ (/ i/ )/ (/ Vk/ 的/ 坐标/ ,/ pl/ (/ i/ )/ (/ Vkz/ (/ ·/ )/ 表示/ 取/ 三维/ 点/ 的/ z/ 轴/ 坐标/ ./ 可以/ 看到/ ,/ z/ (/ Pl/ (/ i/ )/ (/ Vk/ 越近/ ,/ 纹理/ 映射/ 的/ 分辨率/ 越高/ ,/ d/ (/ Vk/ 距离/ 的/ 计算/ 来/ 代替/ 纹理/ 分辨率/ 的/ 统计/ 比/ 文献/ [/ 7/ ]/ 中/ 提出/ 的/ 颜色/ 梯度/ 积分法/ 更为/ 简单/ 直观/ ,/ 而且/ 计算/ 效率/ 更高/ ./ 此外/ ,/ 与/ 文献/ [/ 4/ ,/ 7/ ]/ 不同/ 的/ 是/ ,/ 我们/ 对/ d/ (/ Vk/ ①/ ACTS2/ ./ 0/ :/ AutomaticCameraTrackingSystem/ ./ http/ :/ // // Page5/ 的/ 定义/ 引入/ 了/ 遮挡/ 的/ 判断/ :/ 如果/ z/ (/ Pl/ (/ i/ )/ (/ Vk/ 知/ 的/ 投影/ 位置/ pl/ (/ i/ )/ (/ Vk/ 在/ 该/ 帧/ 被/ 遮挡/ ,/ 该/ 帧/ 的/ 纹理/ 图像/ 对于/ Vkd/ (/ Vki/ ,/ l/ (/ i/ )/ )/ 默认/ 为/ 0/ ./ 在/ 能量/ 优化/ 的/ 过程/ 中/ ,/ 为了/ 使/ 目标/ 能量/ 降/ 至/ 最低/ ,/ 优化/ 器会/ 避免/ 选择/ 无效/ 的/ 纹理/ 信息/ ./ a/ (/ Vk/ 线/ 方向/ 夹角/ 的/ 函数/ ,/ 其/ 定义/ 如下/ :/ a/ (/ Vki/ ,/ l/ (/ i/ )/ )/ =/ 烄/ 烅/ 0/ ,/ 烆/ v/ ^/ (/ Vki/ ,/ l/ (/ i/ )/ )/ =/ -/ 犚/ l/ (/ i/ )/ 犜/ l/ (/ i/ )/ -/ Vkn/ / i/ =/ ∑/ F/ 其中/ ,/ 〈/ ·/ |/ ·/ 〉/ 表示/ 两个/ 法向/ 的/ 点积/ ,/ N/ (/ Fi/ )/ 表示/ Fi/ 的/ 3/ 个/ 顶点/ 的/ 一环/ 邻域/ 所/ 包含/ 的/ 三角/ 面片/ 集合/ ./ 如果/ 该/ 帧/ 摄像机/ 视线/ 方向/ 与/ n/ / i/ 的/ 夹角/ 大于/ 90/ °/ ,/ 则/ 三角/ 面片/ Fi/ 在/ 该/ 视角/ 下/ 被/ 遮挡/ 不/ 可见/ (/ 通常/ 处于/ 三维/ 模型/ 的/ 背面/ )/ ,/ 该/ 帧/ 的/ 纹理/ 图像/ 对于/ Vka/ (/ Vki/ ,/ l/ (/ i/ )/ )/ 默认/ 为/ 0/ ,/ 同样/ 可以/ 避免/ 无效/ 纹理/ 信息/ 的/ 影响/ ./ 值得注意/ 的/ 是/ ,/ 这里/ 我们/ 利用/ 三角/ 面片/ 邻域/ 的/ 表面/ 法向/ 平均值/ n/ / i/ 来/ 替代/ 该/ 三角/ 面片/ 的/ 真实/ 法向/ i/ ./ 平均法/ 向/ 在/ 邻域/ 范围/ 内/ 具有/ 一致性/ ,/ 因而/ 可以/ 避/ n/ / 免/ 表面/ 法向/ 不/ 规整/ 所/ 产生/ 的/ 影响/ ./ Ed/ 中将/ 两类/ 函数/ 相乘/ ,/ 可以/ 同时/ 考虑/ 到/ 上述/ 的/ 两/ 方面/ 标准/ ,/ 从而/ 有效/ 地/ 衡量/ 纹理/ 信息/ 的/ 丰富/ 程度/ ,/ 来/ 作为/ 最优/ 帧/ 选择/ 的/ 参考/ ./ 图/ 5/ (/ d/ )/ 展示/ 了/ 利用/ Ed/ 获得/ 的/ 最优/ 帧/ 映射/ 结果/ ./ 相比/ 于/ 利用/ 真实/ 法向/ 计算/ 的/ 结果/ ,/ 邻域/ 平均法/ 向/ 获得/ 的/ 映射/ 结果/ 更为/ 规整/ ./ Es/ 统计/ 相邻/ 三角/ 面片/ 边缘/ 的/ 纹理/ 颜色/ 一致性/ ,/ 从而/ 保证/ 无/ 缝隙/ 的/ 纹理/ 拼接/ ./ 其/ 定义/ 如下/ :/ Es/ (/ l/ (/ i/ )/ ,/ l/ (/ j/ )/ )/ =/ [/ l/ (/ i/ )/ ≠/ l/ (/ j/ )/ ]/ r/ ∑/ k/ =/ 1Il/ (/ i/ )/ Il/ (/ j/ )/ (/ k/ -/ 1/ )/ pl/ (/ j/ )/ (/ V1/ (/ 其中/ (/ V1/ 的/ 采样/ 点数/ ./ 可以/ 看到/ ,/ 仅当/ 两个/ 相邻/ 三角/ 面片/ 映射/ 自同/ 一幅/ 纹理/ 图像/ 时/ ,/ Es/ 为/ 0/ ,/ 从而/ 鼓励/ 相邻/ 的/ 三角/ 面片/ 尽可能/ 映射/ 自/ 相同/ 的/ 纹理/ 图像/ ,/ 减少/ 纹理/ 缝隙/ 的/ 出现/ ./ 对于/ 处在/ 纹理/ 缝隙/ 上/ 的/ 相邻/ 三角/ 面片/ ,/ Es/ 衡/ Page6/ 量/ 其/ 公共/ 边/ 在/ 各自/ 纹理/ 图像/ 上/ 的/ 投影/ 颜色/ 差异/ (/ 在/ 公共/ 边/ 的/ 投影/ 位置/ 均匀/ 采样/ r/ 个点/ 进行/ 颜色/ 比较/ )/ ,/ 从而/ 保证/ 纹理/ 缝隙/ 处/ 的/ 颜色/ 尽可能/ 一致/ ,/ 实现/ 最大/ 程度/ 的/ 无缝/ 纹理/ 拼接/ ./ 我们/ 利用/ GraphCuts/ 算法/ [/ 15/ ]/ 求解/ 能量/ 方程/ 最小化/ ./ 对于/ 面片/ 数目/ 较/ 多/ 的/ 大/ 场景/ 模型/ ,/ 输入/ 纹理/ 帧/ 数过/ 多会/ 导致/ 候选/ 标记/ 数目/ 过多/ ,/ 从而/ 导致/ 内存/ 过大/ ./ 为/ 解决/ 此/ 问题/ ,/ 我们/ 在/ 求解/ 过程/ 中/ 采用/ 了/ 标记/ 压缩/ 法/ ,/ 对于/ 每个/ 三角/ 面片/ 仅/ 考虑/ 数据项/ 最小/ 的/ 5/ 个/ 纹理/ 帧/ ,/ GraphCuts/ 算法/ 则/ 在/ 压缩/ 后/ 的/ 纹理/ 帧/ 标记/ 范围/ 内/ 求解/ ,/ 这样/ 便/ 可/ 在/ 内存/ 允许/ 的/ 情况/ 下/ 获得/ 近似/ 的/ 最优/ 标记/ 结果/ ./ 最优化/ 后/ 的/ 纹理/ 映射/ 标记/ 结果/ 如图/ 5/ (/ e/ )/ 所示/ ,/ 比图/ 5/ (/ d/ )/ 中/ 的/ 无/ 平滑/ 项/ 约束/ 的/ 映射/ 结果/ 更为/ 规整/ 化/ ./ 此外/ ,/ 如图/ 6/ 所示/ ,/ 由于/ 函数/ d/ (/ ·/ )/ 和/ a/ (/ ·/ )/ 均/ 考虑/ 了/ 遮挡/ 的/ 情况/ ,/ 因此/ 我们/ 的/ 纹理/ 映射/ 最优化/ 方法/ 能够/ 很/ 好/ 地/ 处理/ 三维/ 模型/ 中/ 存在/ 的/ 复杂/ 结构/ ,/ 这是/ 文献/ [/ 4/ ,/ 7/ ]/ 的/ 方法/ 难以/ 做到/ 的/ ./ 纹理/ 映射/ 最优化/ 计算/ 的/ 时间/ 和/ 空间/ 瓶颈/ 在于/ GraphCuts/ 求解/ ,/ 其中/ ,/ 数据项/ 的/ 计算/ 时间/ 复杂度/ 为/ O/ (/ mn/ )/ ,/ 能量/ 方程/ 的/ 求解/ 根据/ 文献/ [/ 15/ ]/ 中/ 的/ 算法/ 描述/ ,/ 其/ 时间/ 复杂度/ 为/ O/ (/ m/ )/ (/ 理论/ 上/ 为/ O/ (/ L2m/ )/ ,/ 由于/ 候选/ 标记/ 数/ L/ 在/ 我们/ 实验/ 中取/ 常量/ 5/ 而/ 省略/ )/ ,/ 空间/ 复杂度/ 为/ O/ (/ m/ )/ ,/ 因此/ 该/ 环节/ 的/ 总/ 时间/ 复杂度/ 为/ O/ (/ mn/ )/ ,/ 空间/ 复杂度/ 为/ O/ (/ m/ )/ ./ 5/ 纹理/ 数据/ 精/ 简化/ 对于/ 长/ 序列/ 的/ 自然/ 场景/ 视频/ 来说/ ,/ 纹理/ 图像/ 集合/ 的/ 数据量/ 很大/ ./ 例如/ ,/ 图/ 7/ 展示/ 的/ “/ Dionysus/ ”/ 实例/ 拍摄/ 了/ 雅典卫城/ 的/ “/ Dionysus/ ”/ 歌剧院/ 遗址/ 内景/ ,/ 其中/ 包含/ 343/ 帧/ 图像/ 的/ 长/ 序列/ 实例/ ,/ 需要/ 107MB/ 大小/ 的/ 源/ 纹理/ 图像/ 数据/ ,/ 这会/ 导致/ 真实感/ 三维/ 模型/ 渲染/ 时/ 的/ 纹理/ 数据/ 载入/ 过程/ 负担/ 较大/ ./ 幸运/ 的/ 是/ ,/ 根据/ 第/ 4/ 节/ 的/ 纹理/ 映射/ 最优化/ 算法/ 获得/ 的/ 结果/ 可以/ 发现/ ,/ 三维/ 模型/ 并/ 没有/ 利用/ 每帧/ 纹理/ 图像/ 的/ 全部/ 数据/ ,/ 而是/ 仅仅/ 映射/ 了/ 一些/ 局部/ 区域/ ,/ 因此/ 我们/ 可以/ 对/ 纹理/ 图像/ 进行/ 裁剪/ ,/ 只/ 保留/ 有效/ 区域/ 的/ 数据/ ,/ 同时/ 更新/ 三角/ 面片/ 的/ 纹理/ 坐标/ ,/ 便/ 能够/ 在/ 不/ 影响/ 纹理/ 映射/ 结果/ 的/ 前提/ 下/ 对/ 纹理/ 数据/ 进行/ 精/ 简化/ ./ 首先/ 对/ 三维/ 模型/ 上/ 的/ 三角/ 面片/ 进行/ 分块/ ,/ 使得/ 每/ 一块/ 包含/ 所有/ 相邻/ 的/ 并且/ 纹理/ 映射/ 图像/ 相同/ 的/ 三角/ 面片/ ./ 为此/ 我们/ 构造/ 一个/ 无向/ 无权/ 图/ G/ =/ 〈/ 中/ 的/ 每个/ 顶点/ 代表/ 一个/ 三角/ 面片/ ,/ / 相邻/ 的/ 并且/ 映射/ 自/ 同一/ 帧/ 纹理/ 图像/ 的/ 三角/ 面片/ 对/ ./ 然后/ ,/ 我们/ 寻找/ G/ 中/ 的/ 所有/ 连通/ 分量/ 1/ ,/ …/ ,/ q/ }/ ,/ 每个/ 连通/ 分量/ 接/ 的/ 整体/ ,/ 并且/ 映射/ 自同/ 一幅/ 纹理/ 图像/ f/ (/ i/ )/ ./ 我们/ / i/ 包含/ 的/ 三角/ 面片/ 集合/ 投影/ 至/ 相应/ 的/ 纹理/ 图像/ 将/ If/ (/ i/ )/ 上/ ,/ 计算/ 所有/ 三角/ 面片/ 投影/ 的/ 包围/ 盒/ 区域/ Bi/ ,/ 将/ 包围/ 盒/ 所在/ 的/ 纹理/ 图像/ 块/ If/ (/ i/ )/ (/ Bi/ )/ 作为/ 的/ 有效/ 数据/ 单元/ ,/ 我们/ 称之为/ “/ 纹理/ 块/ ”/ ,/ 同时/ 依据/ Bi/ 的/ 坐标/ 位置/ 重新/ 计算/ 所有/ 三角/ 面片/ 的/ 纹理/ 坐标/ ./ 所有/ 连通/ 分量/ 对应/ 的/ 纹理/ 块/ 集合/ {/ If/ (/ i/ )/ (/ Bi/ )/ |/ i/ =/ 1/ ,/ …/ ,/ q/ }/ 即/ 为/ 精简/ 的/ 纹理/ 数据/ ./ 利用/ 上述/ 方法/ 处理/ 后/ ,/ “/ Dionysus/ ”/ 实例/ 的/ 纹理/ 数据/ 精简/ 至/ 55MB/ ./ 该/ 环节/ 的/ 运行/ 时间/ 主要/ 与/ 模型/ 面片/ 数量/ 有关/ ,/ 复杂度/ 为/ O/ (/ m/ )/ ./ 5.1/ 不/ 可见/ 纹理/ 的/ 修复/ 由于/ 输入/ 纹理/ 视频/ 存在/ 遮挡/ 情况/ ,/ 三维/ 模型/ 的/ 某些/ 局部/ 区域/ 在/ 纹理/ 图像/ 序列/ 中是/ 不/ 可见/ 的/ ,/ 无法/ 获得/ 这些/ 区域/ 的/ 纹理/ 映射/ 信息/ ./ 这些/ 区域/ 的/ 纹理/ 贴图/ 结果/ 会/ 呈现出/ “/ 空洞/ ”/ ,/ 如图/ 8/ (/ a/ )/ 所示/ ,/ 这会/ 对模型/ 的/ 真实感/ 视觉效果/ 产生/ 很大/ 的/ 影响/ ./ 因此/ ,/ 需要/ 对/ Page7/ 这些/ 区域/ 的/ 纹理/ 进行/ 修复/ ./ 我们/ 注意/ 到/ ,/ 不/ 可见/ 的/ 模型/ 区域/ 往往/ 是/ 小片/ 区域/ ,/ 通常/ 不/ 包含/ 丰富/ 的/ 纹理/ 结构/ 信息/ ./ 对于/ 这些/ 区域/ 可以/ 用/ 简单/ 的/ 扩散/ 填补/ 方式/ 进行/ 修补/ ./ 对于/ 模型/ 中/ 某个/ 不/ 可见/ 区域/ Ω/ ,/ 首先/ 获得/ Ω/ 中/ 面片/ 法向/ 的/ 平均值/ n/ / ;/ 然后/ ,/ 将/ Ω/ 邻域/ (/ Ω/ 中/ 三角/ 面片/ 顶点/ 的/ 一环/ 邻域/ )/ 的/ 纹理/ 颜色/ 正交投影/ 到/ 与/ n/ / 垂直/ 的/ 平面/ 上/ 获得/ 一张/ 正投/ 纹理/ 图/ ;/ 接下来/ ,/ 迭代/ 地/ 扩散/ 填补/ 正投/ 纹理/ 图中/ 空洞/ 区域/ 的/ 边界/ 像素点/ 颜色/ ,/ 对于/ 每/ 一个/ 空洞/ 边界/ 上/ 的/ 像素点/ p/ ,/ 利用/ 以/ p/ 为/ 中心/ 3/ ×/ 3/ 窗口/ 内/ 已知/ 像素点/ 颜色/ 的/ 平均值/ 对/ 其/ 进行/ 填补/ ,/ 直到/ 空洞/ 区域/ 的/ 所有/ 像素点/ 都/ 被/ 填补/ 完毕/ ;/ 最后/ 将/ 该/ 纹理/ 图/ 作为/ 新/ 的/ 纹理/ 块/ 加入/ 模型/ 的/ 纹理/ 块/ 集合/ 中/ ,/ 并/ 计算/ Ω/ 中/ 三角/ 面片/ 的/ 纹理/ 坐标/ ./ 扩散/ 填补/ 方法/ 的/ 修补/ 结果/ 如图/ 8/ (/ b/ )/ 所示/ ./ 6/ 纹理/ 边界/ 无/ 缝隙/ 融合/ 由于/ 光照/ 变化/ 、/ 拍摄角度/ 的/ 不同/ 、/ 表面/ 高光/ 和/ 阴影/ 等/ 多种/ 因素/ 的/ 影响/ ,/ 模型/ 的/ 局部/ 区域/ 在/ 多个/ 纹理/ 块/ 图像/ 中/ 的/ 颜色/ 可能/ 会/ 不/ 一致/ ./ 尽管/ 纹理/ 映射/ 优化/ 过程/ 中/ 的/ 平滑/ 项/ 尽可能/ 地/ 保持/ 纹理/ 边界/ 的/ 颜色/ 一致性/ ,/ 然而/ 映射/ 到/ 三维/ 模型/ 上/ 的/ 纹理/ 边界/ 不可避免/ 地会/ 存在/ 一些/ 色差/ 缝隙/ ,/ 如图/ 9/ (/ a/ )/ 所示/ ./ 因此/ ,/ 还/ 需要/ 对/ 精简/ 后/ 的/ 纹理/ 块/ 颜色/ 进行/ 调整/ 以/ 消除/ 这些/ 缝隙/ ,/ 即/ 对/ 纹理/ 边界/ 的/ 颜色/ 进行/ 无/ 缝隙/ 融合/ ./ 纹理/ 边界/ 融合/ 需要/ 满足/ 3/ 方面/ 条件/ :/ (/ 1/ )/ 只是/ 做/ 微小/ 的/ 调整/ ,/ 调整/ 后/ 的/ 纹理/ 块/ 颜色/ 尽可能/ 和源/ 图像/ 的/ 颜色/ 一致/ ,/ 不要/ 有太大/ 的/ 变动/ ;/ (/ 2/ )/ 调整/ 后/ 的/ 纹理/ 颜色/ 梯度/ 和源/ 图像/ 的/ 颜色/ 梯度/ 尽可能/ 一致/ ;/ (/ 3/ )/ 调整/ 后/ 的/ 纹理/ 块/ 在/ 相邻/ 的/ 三角/ 面片/ 边界/ 上/ 尽可能/ 保持/ 颜色/ 一致/ ./ 类似/ 于/ 文献/ [/ 16/ ]/ ,/ 上述/ 条件/ 下/ 的/ 纹理/ 边界/ 无/ 缝隙/ 融合/ 问题/ 可以/ 通过/ 求解/ 一组/ 带/ 约束/ 的/ 泊松/ 方程组/ 来/ 解决/ ./ 该/ 方程组/ 求解/ 纹理/ 块/ 集合/ {/ If/ (/ i/ )/ (/ Bi/ )/ |/ i/ =/ Page81/ ,/ …/ ,/ q/ }/ 中/ 包含/ 的/ 所有/ 像素点/ 的/ 颜色/ ,/ 每个/ 像素点/ 的/ 颜色/ 对应/ 一个/ 变量/ (/ 我们/ 对/ RGB/ 的/ 3/ 个/ 通道/ 独立/ 求解/ )/ ./ 方程组/ 包括/ 以下/ 3/ 个/ 部分/ 方程式/ ,/ 分别/ 对应/ 上述/ 3/ 方面/ 条件/ :/ (/ 1/ )/ 对于/ 任意/ 一个/ 纹理/ 块/ 中/ 的/ 每个/ 像素点/ x/ ∈/ If/ (/ i/ )/ (/ Bi/ )/ ,/ 我们/ 有/ 其中/ :/ I/ / f/ (/ i/ )/ (/ x/ )/ 是/ 待/ 求解/ 的/ x/ 点/ 颜色/ 变量/ ,/ 约束/ 其与源/ 图像/ 的/ 颜色/ If/ (/ i/ )/ (/ x/ )/ 接近/ ,/ ws/ 是/ 一个/ 权重/ 值/ (/ 在/ 实验/ 中取/ 0.01/ ,/ 表示/ 第/ 1/ 类/ 条件/ 仅/ 起到/ 很小/ 的/ 约束/ 作用/ )/ ;/ (/ 2/ )/ 对于/ 任意/ 一个/ 纹理/ 块/ 中/ 的/ 每个/ 像素点/ x/ ∈/ If/ (/ i/ )/ (/ Bi/ )/ ,/ 我们/ 有/ 其中/ N/ (/ x/ )/ 表示/ x/ 的/ 四/ 邻域/ 像素点/ 集合/ (/ 仅/ 在/ 包围/ 盒/ Bi/ 范围/ 内/ 的/ 有效/ )/ ,/ 这部分/ 方程式/ 约束/ x/ 点/ 颜色/ 变量/ 的/ 拉普拉斯/ 梯度/ 和源/ 图像/ 保持一致/ ;/ (/ 3/ )/ 任意/ 一对/ 在/ 三维/ 模型/ 上/ 相邻/ 的/ 纹理/ 块/ If/ (/ i/ )/ (/ Bi/ )/ 和/ If/ (/ j/ )/ (/ Bj/ )/ (/ 相应/ 的/ 三角/ 面片/ 集合/ 存在/ 相邻/ 关系/ )/ ,/ 将/ If/ (/ i/ )/ (/ Bi/ )/ 和/ If/ (/ j/ )/ (/ Bj/ )/ 相邻/ 纹理/ 边界/ 中/ 的/ 每/ 一条/ 边/ (/ V1/ 并/ 对/ 二维/ 投影/ 边/ (/ pf/ (/ i/ )/ (/ V1pf/ (/ j/ )/ (/ V2/ 们/ 有/ ij/ )/ )/ 均匀/ 采样/ r/ 个点/ ,/ 对于/ 每/ 一对/ 采样/ 点/ 我/ I/ / f/ (/ i/ )/ I/ / f/ (/ j/ )/ 其中/ k/ ∈/ {/ 1/ ,/ …/ ,/ r/ }/ ,/ 这部分/ 方程式/ 约束/ 纹理/ 边界/ 两侧/ 的/ 颜色/ 变量/ 保持一致/ ./ 由于/ 以上/ 方程组/ 是/ 过/ 约束/ 的/ 稀疏/ 线性方程组/ (/ 方程/ 数/ 大于/ 变量/ 数/ )/ ,/ 用/ 共轭/ 梯度/ 法对/ 其/ 进行/ 求解/ ,/ 并/ 将/ 求解/ 获得/ 的/ 颜色/ 写回/ 相应/ 的/ 纹理/ 块/ 中/ ,/ 便/ 可/ 获得/ 纹理/ 边界/ 无缝/ 融合/ 的/ 效果/ ,/ 如图/ 9/ (/ b/ )/ 所示/ ./ 6.1/ 大/ 数据/ 纹理/ 的/ 迭代/ 融合/ 对于/ 长/ 序列/ 的/ 大/ 数据/ 纹理/ 图像/ ,/ 稀疏/ 线性方程组/ 的/ 规模/ 会/ 很大/ ,/ 求解/ 方程/ 容易/ 造成/ 内存/ 溢出/ ./ 例如/ ,/ 图/ 1/ 所示/ 的/ “/ 桌面/ ”/ 实例/ 的/ 方程组/ 规模/ 达到/ 20649637/ ×/ 20649637/ 之大/ ./ 对于/ 此类/ 大/ 纹理/ 数据/ 场景/ ,/ 无法/ 一次性/ 求解/ 所有/ 的/ 纹理/ 块/ ,/ 需要/ 对/ 纹理/ 块/ 集合/ 进行/ 分批/ 求解/ ,/ 每次/ 求解/ 纹理/ 块/ 的/ 像素点/ 总数/ 不/ 超过/ 10000000/ ./ 为此/ ,/ 我们/ 对/ 纹理/ 融合/ 算法/ 进行/ 改进/ ,/ 采用/ 一种/ 迭代/ 融合/ 的/ 策略/ ./ 每次/ 迭代/ 选取/ 若干个/ 纹理/ 块/ 用/ 上述/ 方法/ 进行/ 融合/ 求解/ ,/ 并/ 将/ 求解/ 完成/ 的/ 纹理/ 块/ 标记/ 为/ “/ 已/ 求解/ ”/ ./ 在/ 下/ 一次/ 迭代/ 过程/ 中/ ,/ 用/ “/ 已/ 求解/ ”/ 的/ 纹理/ 块/ 颜色/ 作为/ 除了/ 上述/ 3/ 类/ 约束条件/ 之外/ 的/ 附加/ 约束条件/ :/ 如果/ 待/ 求解/ 的/ 纹理/ 块/ If/ (/ i/ )/ (/ Bi/ )/ 的/ 某个/ 相邻/ 纹理/ 块/ If/ (/ j/ )/ (/ Bj/ )/ 标记/ 为/ “/ 已/ 求解/ ”/ ,/ 则/ 我们/ 将/ 其/ 相邻/ 纹理/ 边界/ 中/ 的/ 每/ 一条/ 边/ (/ V1/ 到/ 两幅/ 纹理/ 图像/ If/ (/ i/ )/ 和/ If/ (/ j/ )/ 上/ ,/ 并/ 在/ 二维/ 投影/ 边/ (/ pf/ (/ i/ )/ (/ V1/ 均匀/ 采样/ r/ 个点/ ,/ 对于/ 每/ 一对/ 采样/ 点/ 我们/ 有/ 以下/ 方程式/ :/ Page9I/ / f/ (/ i/ )/ (/ (/ ^/ If/ (/ j/ )/ 其中/ ^/ If/ (/ j/ )/ 表示/ 修改/ 后/ 的/ 第/ f/ (/ j/ )/ 帧/ 的/ 纹理/ 颜色/ ./ 如此/ 便/ 可/ 约束/ 纹理/ 边界/ 一侧/ 带/ 求解/ 的/ 颜色/ 变量/ 和/ 另一侧/ 已/ 求解/ 的/ 颜色/ 常值/ 保持一致/ ,/ 以/ 保证/ 每次/ 迭代/ 求解/ 的/ 颜色/ 结果/ 可以/ 融合/ 到/ 接下来/ 的/ 迭代/ 运算/ 中/ ./ 我们/ 按照/ 广度/ 优先/ 顺序/ 遍历/ 选取/ 纹理/ 块/ 作为/ 每次/ 迭代/ 的/ 求解/ 对象/ ,/ 以/ 保证/ 下/ 一次/ 迭代/ 选取/ 的/ 纹理/ 块/ 和/ 当前/ 迭代/ 选取/ 的/ 纹理/ 块/ 有/ 相邻/ ,/ 从而/ 保证/ 求解/ 结果/ 能够/ 不断/ 地/ 传递/ 扩散/ 遍/ 整个/ 三维/ 模型/ ,/ 保证/ 整体/ 模型/ 纹理/ 边界/ 实现/ 无/ 缝隙/ 融合/ ,/ 如图/ 10/ (/ d/ )/ 所示/ ./ 迭代/ 融合/ 的/ 算法/ 伪/ 代码/ 如/ 算法/ 1/ 所示/ ./ 该/ 算法/ 的/ 时间/ 瓶颈/ 在于/ 线性方程组/ 的/ 共轭/ 梯度/ 求解/ 环节/ ,/ 其/ 时间/ 复杂度/ 为/ (/ O/ ∑/ qi/ =/ 1If/ (/ i/ )/ (/ Bi/ )/ 为/ 需要/ 迭代/ 融合/ 的/ 纹理/ 块/ 像素点/ 数/ ∑/ 总和/ ./ 该/ 迭代/ 融合/ 算法/ 能够/ 在/ 有限/ 的/ 内存/ 下/ 处理/ 大规模/ 的/ 纹理/ 数据/ ,/ 这是/ 现有/ 的/ 算法/ 难以/ 做到/ 的/ ./ 算法/ 1/ ./ 纹理/ 数据/ 迭代/ 融合/ 算法/ ./ 遍历/ 纹理/ 数据/ 中/ 的/ 每/ 一个/ 纹理/ 块/ If/ (/ i/ )/ (/ Bi/ )/ :/ 如果/ If/ (/ i/ )/ (/ Bi/ )/ 未/ 被/ 标记/ 为/ “/ 已/ 访问/ ”/ :/ 1/ ./ 创建/ 队列/ Q/ =/ {/ If/ (/ i/ )/ (/ Bi/ )/ }/ ,/ 并/ 创建/ 纹理/ 块/ 集合/ S/ =/ / ,/ 初始/ 为空/ ,/ 并/ 将/ If/ (/ i/ )/ (/ Bi/ )/ 标记/ 为/ “/ 已/ 访问/ ”/ ;/ 2/ ./ 迭代/ 执行/ 以下/ 操作/ :/ 2.1/ ./ 取出/ Q/ 队首/ 的/ 纹理/ 块/ If/ (/ h/ )/ (/ Bh/ )/ :/ 2.2/ ./ 遍历/ 每个/ 与其/ 相邻/ 的/ 纹理/ 块/ If/ (/ n/ )/ (/ Bn/ )/ ∈/ N/ (/ If/ (/ h/ )/ (/ Bh/ )/ )/ :/ 最后/ ,/ 我们/ 用/ Zhou/ 等/ 人/ [/ 17/ ]/ 提出/ 的/ 网格/ 参数/ 化/ 方法/ (/ 该/ 算法/ 已经/ 在/ Direct3D9/ 中/ 实现/ )/ 将/ 融合/ 后/ 的/ 所有/ 纹理/ 块/ 信息/ 展开/ 至/ 一幅/ 完整/ 的/ 纹理/ 图像/ 上/ (/ 如图/ 10/ (/ e/ )/ 所示/ )/ ,/ 并/ 重新/ 计算/ 三角/ 面片/ 的/ 纹理/ 坐标/ ./ 7/ 实验/ 结果/ 我们/ 实验/ 了/ 几组/ 视频/ 数据/ 及其/ 三维/ 模型/ ./ 所有/ Page10/ 实验/ 都/ 是/ 在/ 一台/ 主频/ 为/ 3.20/ GHzCPU/ 的/ 台式机/ 上/ 运行/ 的/ ./ 对于/ 图/ 1/ 的/ “/ 桌面/ ”/ 实例/ ,/ 包含/ 211/ 帧/ 分辨率/ 为/ 960/ ×/ 540/ 的/ 序列/ ,/ 纹理/ 映射/ 的/ 时间/ 需要/ 14min/ ,/ 实际/ 内存/ 占用/ 仅/ 770MB/ ./ 表/ 1/ 给出/ 了/ 本文/ 主要/ 实例/ 的/ 运行/ 时间/ 和/ 内存/ 占用/ 情况/ ./ “/ 桌面/ ”/ 、/ “/ 仕女/ ”/ 、/ “/ Dionysus/ ”/ 三组/ 实例/ 以及/ 图/ 11/ 和/ 图/ 12/ 展示/ 的/ 两组/ 实例/ 的/ 输入/ 三维/ 模型/ 均/ 是/ 用/ 多/ 视图/ 三维重建/ 的/ 方法/ [/ 14/ ]/ 生成/ 的/ ./ 其中/ ,/ “/ 龙龟/ ”/ 实例/ 的/ 三维/ 模型/ 包含/ 一些/ 复杂/ 的/ 自/ 遮挡/ 结构/ ,/ 并且/ 纹理/ 视频/ 颜色/ 还/ 包含/ 非/ 朗伯/ 的/ 光照/ 变化/ ,/ 而/ 我们/ 的/ 方法/ 能够/ 很/ 好/ 地/ 处理/ 这些/ 问题/ 并/ 获得/ 无/ 缝隙/ 的/ 纹理/ 贴图/ 结果/ ,/ 如图/ 11/ (/ e/ )/ 表/ 1/ 本文/ 所有/ 实例/ 运行/ 时间/ 和/ 内存/ 占用/ 情况/ 实例/ (/ 分辨率/ 960/ ×/ 540/ )/ 桌面/ 仕女/ Dionysus/ 龙龟/ Dionysus22008/ 结论/ 和/ 未来/ 工作/ 展望/ 本文/ 提出/ 了/ 一种/ 三维/ 模型/ 的/ 纹理/ 映射/ 方法/ ,/ 能够/ 利用/ 多/ 视角/ 拍摄/ 图像/ 序列/ 实现/ 高/ 真实感/ 的/ 纹理/ 贴图/ ./ 我们/ 将/ 纹理/ 拼接/ 最优化/ 问题/ 转换/ 为/ 一个/ 马尔可/ 所示/ ./ 图/ 12/ 展示/ 的/ 大规模/ 场景/ 模型/ 的/ 实例/ 拍摄/ 了/ “/ Dionysus/ ”/ 歌剧院/ 遗址/ 外景/ ,/ 我们/ 的/ 方法/ 能够/ 精确/ 地/ 还原/ 场景/ 模型/ 的/ 完整/ 纹理/ 贴图/ 以及/ 局部/ 的/ 纹理/ 细节/ ./ 上文图/ 3/ 展示/ 的/ 家具/ 三维/ 模型/ 是/ 通过/ 手工/ 建模/ 获得/ 的/ ,/ 跟/ 实际/ 家具/ 的/ 三维/ 结构/ 难免会/ 有/ 细小/ 的/ 出入/ ,/ 而/ 我们/ 的/ 方法/ 能够/ 很/ 好/ 地/ 处理/ 三维/ 模型/ 的/ 结构/ 误差/ 并/ 获得/ 真实感/ 的/ 纹理/ 贴图/ 效果/ ./ 上文图/ 2/ 还/ 展示/ 了/ 一组/ Kinect/ 捕获/ 的/ 室内/ 场景/ 实例/ ,/ 我们/ 的/ 方法/ 同样/ 能够/ 实现/ 高质量/ 的/ 纹理/ 映射/ ./ 我们/ 的/ 方法/ 对于/ 各类/ 复杂/ 的/ 自然/ 场景/ 模型/ 均/ 能够/ 实现/ 高质量/ 的/ 完整/ 纹理/ 映射/ ,/ 这是/ 现有/ 多/ 视图/ 纹理/ 映射/ 方法/ 较难/ 做到/ 的/ ./ 所需/ 时间/ // min1451529/ 夫随/ 机场/ 问题/ ,/ 并/ 通过/ 求解/ 能量/ 方程/ 实现/ 最优/ 视图/ 的/ 纹理/ 映射/ ./ 我们/ 的/ 方法/ 能够/ 很/ 好/ 地/ 处理/ 自然/ 场景/ 的/ 自/ 遮挡/ 等/ 复杂/ 结构/ 的/ 纹理/ 贴图/ ./ 对于/ 不同/ 视图/ 纹理/ 拼接/ 边界/ 产生/ 的/ 色差/ ,/ 我们/ 提出/ 了/ 一种/ 迭代/ 融合/ 的/ 算法/ 以/ 消除/ 颜色/ 差异/ ,/ 能够/ 实现/ 大/ 数据/ 的/ 场景/ 的/ 无缝/ 纹理/ 拼接/ ./ 本文/ 的/ 实验/ 数据/ 输入/ 的/ 三维/ 模型/ 的/ 坐标/ 位置/ 以/ Page11/ 及/ 在/ 每/ 帧/ 纹理/ 上/ 的/ 投影/ 均/ 较为/ 精确/ ,/ 然而/ 实际/ 应用/ 中/ 可能/ 存在/ 三维/ 模型/ 无法/ 精确/ 对齐/ 多个/ 视角/ 的/ 纹理/ 数据/ 的/ 情况/ ,/ 如何/ 处理/ 模型/ 自身/ 的/ 误差/ 使得/ 纹理/ 贴图/ 的/ 算法/ 更为/ 鲁棒/ 是/ 我们/ 接下来/ 将要/ 解决/ 的/ 问题/ ./ 如果/ 输入/ 的/ 模型/ 存在/ 局部/ 破损/ 结构/ ,/ 现有/ 的/ 方法/ 无法/ 恢复/ 这些/ 破损/ 区域/ 的/ 纹理/ ,/ 如何/ 利用/ 多/ 视图/ 的/ 纹理/ 信息/ 来/ 指导/ 模型/ 结构/ 的/ 修补/ ,/ 从而/ 实现/ 完整/ 的/ 纹理/ 修复/ 以/ 满足/ 实际/ 工业/ 应用/ 要求/ ,/ 也/ 是/ 未来/ 我们/ 的/ 研究/ 方向/ ./ 此外/ ,/ 我们/ 在/ 纹理/ 图像/ 的/ 选择/ 中仅/ 考虑/ 了/ 图像/ 的/ 分辨率/ 和/ 视线/ 方向/ ,/ 实际/ 应用/ 中/ 光照/ 条件/ 等/ 拍摄/ 环境因素/ 同样/ 会/ 影响/ 视图/ 中/ 纹理/ 的/ 颜色/ 和/ 信息/ 丰富/ 度/ ,/ 物体/ 本身/ 的/ 非/ 朗伯/ 材质/ 导致/ 的/ 高光/ 效果/ 也/ 会/ 掩盖/ 物体/ 本身/ 真实/ 的/ 纹理/ 色彩/ ,/ 如何/ 恢复/ 环境/ 光照/ 模型/ 以及/ 物体/ 表面/ 材质/ 系数/ ,/ 从而/ 还原/ 场景/ 真实/ 的/ 纹理/ 颜色/ 信息/ ,/ 这些/ 都/ 是/ 我们/ 未来/ 的/ 研究/ 方向/ ./ 致谢/ 审稿/ 专家/ 提出/ 了/ 宝贵意见/ ,/ 新加坡/ 新科/ 劲力/ 有限公司/ 的/ 王/ 英杰/ 博士/ 和/ SohLingMin/ 博士/ 对此/ 工作/ 给出/ 了/ 建议/ ,/ 杭州/ 深粉/ 象/ 数字/ 科技/ 有限公司/ 提供/ 了/ 家具/ 模型/ 和/ 照片/ ,/ 在/ 此/ 一并/ 致谢/ !/ 

