Page1/ 用户/ 需求/ 驱动/ 的/ Web/ 服务/ 测试/ 许蕾/ 陈林/ 徐宝文/ (/ 南京大学/ 计算机科学/ 与/ 技术/ 系/ 南京/ 210093/ )/ (/ 南京大学/ 计算机软件/ 新/ 技术/ 国家/ 重点/ 实验室/ 南京/ 210093/ )/ 摘要/ Web/ 服务/ 涉及/ 开发者/ 、/ 提供者/ 、/ 注册/ 中心/ 、/ 用户/ 等/ 多方/ ,/ 各方/ 测试/ 目的/ 、/ 所/ 掌握/ 的/ 资源/ 以及/ 所/ 使用/ 的/ 测试方法/ 各异/ ./ 以/ 用户/ 需求/ 来/ 驱动/ Web/ 服务/ 测试/ ,/ 更/ 切合/ 现状/ 且/ 能/ 提升/ 测试/ 效率/ ./ 文中/ 建立/ 了/ 用户/ 需求/ 特征/ 模型/ ,/ 引入/ 层次/ 关系/ 、/ 控制结构/ 、/ 约束条件/ 等/ 要素/ ;/ 对照/ 目标/ 级/ 、/ 服务/ 组合/ 、/ 原子/ 服务/ 需求/ ,/ 分别/ 进行/ 基于/ 等价/ 类/ 划分/ 、/ 数据流/ 分析/ 和/ 变异/ 测试/ 的/ 测试用例/ 生成/ 选择/ ;/ 当/ 需求/ 变动/ 时/ ,/ 通过/ 波动/ 分析/ 能/ 迅速/ 定位/ 到/ 服务/ 的/ 相关/ 路径/ 和/ 变量/ ,/ 保证/ 回归/ 测试/ 的/ 效率/ ;/ 最后/ 通过/ 行程/ 安排/ 实例/ 展示/ 了/ 工作/ 流程/ 和/ 实验/ 结果/ ./ 关键词/ Web/ 服务/ 测试/ ;/ 用户/ 需求/ ;/ 测试用例/ 生成/ ;/ 依赖性/ 分析/ ;/ 回归/ 测试/ 1/ 引言/ Web/ 服务/ 致力于/ 建立/ 一个/ 可/ 互操作/ 的/ 分布式应用/ 程序/ 平台/ ,/ 从而/ 对/ 基于/ 不同/ 开发/ 语言/ 、/ 部署/ 平台/ 、/ 通信协议/ 的/ 系统/ 间/ 有效/ 交互/ 以及/ 在/ 数据/ 更新/ 同步/ 、/ 信息/ 一致性/ 等/ 问题/ 上/ 发挥作用/ ./ 理论/ 上/ ,/ Web/ 服务/ 的/ 互操作性/ 有助于/ 提高/ 软件/ 的/ 重用/ 性/ ,/ 但是/ ,/ 当/ 用户/ 有/ 众多/ 服务/ 可选时/ ,/ 由于/ 不足以/ 信赖/ 这些/ 服务/ 或/ 多个/ 服务/ 组合/ 时/ 产生/ 了/ 问题/ ,/ 反而/ 会/ 影响/ 到/ Web/ 服务/ 的/ 发展/ 和/ 应用/ ./ 因此/ ,/ 实现/ 真正/ 高/ 可信/ 的/ Web/ 服务/ 是/ 一项/ 迫切/ 而/ 艰难/ 的/ 任务/ ,/ 需要/ 从/ 功能/ 、/ 性能/ 、/ 安全性/ 等/ 多个/ 方面/ 进行/ 考虑/ [/ 1/ ]/ ,/ 并且/ 研究/ 视角/ 也/ 有/ Web/ 服务/ 开发者/ 、/ 提供者/ 、/ 集成/ 者/ 、/ 第三方/ 确认/ 者/ 和/ 用户/ 之分/ [/ 2/ -/ 3/ ]/ ./ 软件测试/ 是/ 保障/ 软件/ 质量/ 的/ 重要/ 方法/ ./ 从/ Web/ 服务/ 的/ 使用者/ (/ 用户/ )/ 角度/ 来看/ ,/ 现阶段/ Web/ 服务/ 测试/ 的/ 主要/ 挑战/ 包括/ :/ 对/ 单个/ Web/ 服务/ 来说/ ,/ 由于/ 用户/ 通常/ 只能/ 获得/ Web/ 服务/ 的/ 接口/ 信息/ (/ WSDL/ 文档/ )/ [/ 4/ ]/ ,/ 因而/ 只能/ 进行/ 黑盒/ 测试/ ,/ 虽然/ 目前/ 有/ 一些/ 研究/ 对/ WSDL/ 文档/ 进行/ 了/ 扩展/ ,/ 增加/ 了/ 一些/ 运行/ 时/ 信息/ 、/ 语义/ 信息/ 或者/ 约束条件/ [/ 5/ ]/ ,/ 但/ 由于/ 无法/ 获取/ 到/ 程序代码/ ,/ 还是/ 无法/ 开展/ 严格/ 意义/ 上/ 的/ 白盒/ 测试/ ;/ 对/ 单个/ 或/ 多个/ 服务/ 的/ 运行/ 来说/ ,/ 运行/ 环境/ 具有/ 未知/ 性/ ;/ 在/ Web/ 服务/ 的/ 实际/ 运行/ 过程/ 中/ ,/ 由于/ 网络连接/ 的/ 故障/ 或者/ 服务提供者/ 自身/ 的/ 原因/ ,/ 会/ 导致/ 某些/ 服务/ 暂时/ 不可/ 用/ ,/ 需要/ 临时/ 更换/ 功能/ 类似/ 但/ 环境/ 不同/ 的/ 新/ 服务/ ,/ 如果/ 事先/ 没有/ 测试/ 过/ ,/ 通常/ 会/ 带来/ 很多/ 问题/ ;/ 另外/ ,/ Web/ 服务/ 的/ 分布式/ 和/ 并发/ 执行/ [/ 6/ ]/ 特性/ 也/ 增加/ 了/ 测试/ 的/ 困难/ 和/ 复杂性/ ,/ 有些/ 场景/ 难以/ 重现/ 和/ 回放/ ,/ 定位/ 故障/ 和/ 排错/ 的/ 难度很大/ ./ 由于/ 用户/ 是/ Web/ 服务/ 的/ 使用者/ 、/ 评价者/ 和/ 最终/ 决定/ 者/ ,/ 本文/ 以/ 用户/ 的/ 需求/ 为/ Web/ 测试/ 的/ 驱动/ ,/ 在/ 现有/ 工作/ 的/ 基础/ 上/ ,/ 充分/ 挖掘/ 用户/ 的/ 需求/ ,/ 并/ 建立/ 从/ 需求/ 到/ 实现/ 的/ 桥梁/ ,/ 从而/ 给出/ 更/ 有/ 针对性/ 和/ 实施/ 效率/ 的/ 测试/ 策略/ ./ 分/ 以下/ 几个/ 部分/ 展开/ :/ 首先/ ,/ 尽可能/ 客观/ 、/ 准确/ 地/ 描述/ 用户/ 需求/ ,/ 分/ 层次/ 、/ 多维度/ 地/ 进行/ 刻画/ ,/ 使得/ 模型/ 能/ 真正/ 反映/ 用户/ 的/ 需求/ 并/ 有/ 一定/ 的/ 可扩展性/ ,/ 拟/ 采用/ 用户/ 需求/ 特征/ 树来/ 表达/ ;/ 其次/ ,/ 根据/ 用户/ 需求/ 模型/ 组织/ 、/ 实施/ 测试/ ,/ 对照/ 每/ 一条/ 需求/ ,/ 进行/ 测试用例/ 的/ 生成/ 和/ 选择/ ,/ 即/ 只/ 覆盖/ 用户/ 关注/ 的/ 语句/ 或/ 路径/ ;/ 另外/ ,/ 当/ 用户/ 需求/ 发生/ 变动/ 时/ ,/ 能/ 迅速/ 定位/ 到/ 服务/ 的/ 相关/ 路径/ 、/ 元素/ 和/ 变量/ ,/ 从而/ 保证/ 全面/ 、/ 有效/ 的/ 回归/ 测试/ ;/ 最后/ ,/ 将/ 通过/ 一个/ 实例/ 系统地/ 展现/ 建模/ 、/ 测试方法/ 等/ 方面/ 的/ 工作/ ./ 2/ 相关/ 工作/ Web/ 服务/ 的/ 出现/ 解决/ 了/ 不同/ 平台/ 、/ 不同/ 编程语言/ 以及/ 异构/ 的/ 软件应用/ 之间/ 的/ 互操作/ 问题/ ,/ 要/ 使/ Web/ 服务/ 得到/ 进一步/ 的/ 发展/ 和/ 更/ 广泛/ 的/ 应用/ ,/ 需要/ 运用/ 验证/ 、/ 测试/ 技术/ 来/ 保障/ Web/ 服务/ 的/ 正确/ 有效/ 运行/ ./ 形式化/ 验证/ 技术/ 从/ 服务/ 提供/ 的/ 描述/ 文件/ 入手/ ,/ 提取/ 功能/ 或者/ 属性/ 规约/ ,/ 利用/ 特定/ 的/ 建模/ 技术/ 对/ 其/ 实施/ 形式化/ ,/ 并/ 将/ 形式化/ 模型/ 转化/ 为/ 检验/ 工具/ 可以/ 接受/ 的/ 语言/ ,/ 最后/ 用/ 模型/ 检验/ 工具/ 验证/ 模型/ 的/ 正确性/ [/ 7/ ]/ ./ 而/ Web/ 服务/ 测试/ 方面/ 的/ 相关/ 工作/ ,/ 可以/ 从/ 测试/ 视角/ 和/ 测试/ 技术/ 两/ 方面/ 来/ 总结/ 、/ 分析/ ,/ 具体/ 表述/ 如下/ :/ Web/ 服务/ 从/ 开发/ 到/ 运行/ ,/ 涉及/ 开发者/ 、/ 提供者/ 、/ 集成/ 者/ 、/ UDDI/ 注册/ 中心/ 和/ 用户/ 等/ 多方面/ 因素/ ,/ 由于/ 环境/ 、/ 着眼点/ 等/ 差异/ ,/ 各/ 方面/ 也/ 均/ 有/ 各自/ 不同/ 的/ 测试/ 视角/ [/ 2/ -/ 3/ ]/ ./ Web/ 服务/ 的/ 开发者/ 可以/ 利用/ 白盒/ 技术/ 检测/ 程序/ 中/ 存在/ 的/ 错误/ ,/ 而/ 其他/ 人员/ 大多/ 只能/ 用/ 黑盒/ 技术/ 来/ 进行/ 测试/ :/ 服务提供者/ 需要/ 确保/ 服务/ 能够/ 符合/ 事先/ 和/ 服务/ 请求者/ 协商/ 的/ 约定/ ;/ 服务/ 集成/ 者/ 需要/ 确保/ 任何/ 绑定/ 到/ 组合/ 应用/ 中/ 的/ 服务/ 都/ 能/ 满足/ 其/ 功能性/ 和/ 非/ 功能性/ 的/ 要求/ ;/ UDDI/ 注册/ 中心/ 需要/ 对/ 注册/ 服务/ 的/ 质量/ 进行/ 评估/ ,/ 确保/ 已/ 注册/ 的/ 服务/ 均/ 有/ 一定/ 的/ 质量保证/ 且/ 能够/ 向/ 服务/ 请求者/ 提供/ 最优/ 的/ 满足/ 其/ 需求/ 的/ 服务供应商/ ;/ 用户/ 只/ 关注/ 在/ 自己/ 的/ 应用/ 中/ 所/ 使用/ 的/ 服务/ ,/ 能/ 保证/ 正常/ 工作/ 即可/ ,/ 但/ 用户/ 通常/ 难以/ 精确/ 地/ 描述/ 自己/ 的/ 需求/ ,/ 且/ 这个/ 需求/ 会/ 经常/ 变动/ ,/ 如何/ 从/ 用户/ 的/ 角度/ 出发/ 来/ 开展/ 测试/ ,/ 是/ 一个/ 需要/ 深入探讨/ 的/ 研究/ 问题/ ./ 在/ 针对/ 单个/ Web/ 服务/ 的/ 功能测试/ 方面/ ,/ 通常/ 是/ 应用/ 传统/ 软件测试/ 的/ 各种/ 技术/ ,/ 即将/ 单个/ Web/ 服务/ 当作/ 一个/ 功能模块/ 来/ 处理/ [/ 4/ ]/ ./ 但/ Web/ 服务/ 还/ 包括/ 服务/ 的/ 描述/ 、/ 发布/ 、/ 发现/ 以及/ 消息/ 的/ 传输/ 等/ 内容/ ,/ 相应/ 的/ 还/ 需要/ 更/ 多/ 的/ 保障/ 措施/ ./ 有/ 研究者/ 提出/ 进一步/ 扩展/ WSDL/ 语言/ ,/ 以/ 增强/ 其/ 描述/ 能力/ ,/ 为/ Web/ 服务/ 测试/ 提供/ 更/ 多/ 的/ 信息/ ,/ 如/ 增加/ 前置/ 、/ 后置/ 条件/ 等/ [/ 8/ ]/ ,/ 或者/ 引入/ 语义/ 本体/ 的/ 概念/ ,/ 更/ 精确/ 地/ 描述/ 服务/ 接口/ 及其/ 关联/ 、/ 约束/ [/ 5/ ]/ ./ 相应/ 地/ ,/ 在/ 测试用例/ 生成/ 选择/ 技术/ 方面/ ,/ 由于/ 测试者/ 无法/ 得到/ 服务/ 源码/ ,/ 通常/ 是/ 根据/ WSDL/ 文档/ 中/ 的/ 信息/ 生成/ 测试用例/ ,/ 主要/ 采取/ 随机/ 法/ 与/ 边界值/ 选取/ 数据/ ,/ 操作/ 简单/ 但/ 精度/ 很/ 低/ ,/ 不利于/ 错误/ 的/ 发现/ ./ 在/ 此基础/ 上/ ,/ 研究者/ 提出/ 了/ 基于/ 本体论/ 的/ Web/ 服务/ 测试用例/ 生成/ 技术/ [/ 5/ ]/ ,/ 通过/ Ontology/ 推理/ 得到/ 测试数据/ ;/ 或者/ 通过/ 扩展/ 的/ WSDL/ 文档/ 、/ Page3OWL/ -/ S/ 规格/ 说明/ 自动/ 生成/ 测试用例/ [/ 8/ ]/ ./ 自动/ 生成/ 的/ 测试用例/ 数量/ 众多/ 、/ 质量/ 良莠不齐/ ,/ 通常/ 采用/ 变异/ 测试方法/ 来/ 评价/ 、/ 筛选/ 测试用例/ :/ 文献/ [/ 9/ ]/ 提出/ 了/ 基于/ 合约/ 变异/ 的/ Web/ 服务/ 测试/ 技术/ ;/ 文献/ [/ 10/ ]/ 提出/ 了/ 一种/ 基于/ OWL/ -/ S/ 需求/ 模型/ 的/ Web/ 服务/ 变异/ 测试方法/ ;/ 文献/ [/ 11/ ]/ 对/ OWL/ -/ S/ 进行/ 变异/ ,/ 包括/ 数据/ 变异/ 、/ 条件/ 变异/ 、/ 控制流/ 变异/ 和/ 数据流/ 变异/ ./ 从/ 研究/ 现状/ 来看/ ,/ 针对/ Web/ 服务/ 的/ 测试/ 研究/ 还有/ 一些/ 不足/ ./ 例如/ ,/ 现有/ 的/ 测试用例/ 生成/ 技术/ 大多/ 从/ WSDL/ 入手/ ,/ 利用/ 传统/ 软件测试/ 的/ 方法/ 产生/ 测试数据/ ,/ 通常/ 局限于/ 单个/ 服务/ ;/ 对/ 组合/ 的/ Web/ 服务/ 测试/ 还/ 处在/ 初级阶段/ ,/ 主要/ 都/ 是/ 基于/ 分析/ BPEL/ 和/ OWL/ -/ S/ 文档/ 的/ 流程/ 结构/ 进行/ 测试/ 或/ 采用/ 模型/ 检查/ 的/ 方法/ 进行/ 验证/ ,/ 难以/ 测试运行/ 时/ 动态/ 组合/ 的/ Web/ 服务/ ./ 因此/ ,/ Web/ 服务/ 测试/ 还/ 需要/ 进一步/ 的/ 研究/ 和/ 探索/ ,/ 努力/ 尝试/ 新/ 的/ 测试/ 视角/ 和/ 测试/ 技术/ ,/ 例如/ ,/ 从/ 用户/ 的/ 角度/ 出发/ ,/ 采用/ 需求/ 驱动/ 的/ 方式/ 来/ 进行/ 测试/ ./ 而/ 在/ 需求/ 驱动/ 的/ 测试用例/ 集约/ 简/ 方面/ ,/ 我们/ 有/ 一定/ 的/ 工作/ 基础/ [/ 12/ -/ 13/ ]/ :/ 首先/ 充分/ 挖掘/ 并/ 使用/ 测试/ 需求/ 的/ 相关/ 信息/ 建立/ 测试/ 需求/ 的/ 关系/ 模型/ ,/ 再/ 定义/ 测试/ 需求/ 间/ 的/ 独立/ 、/ 相交/ 、/ 包含/ 和/ 等价关系/ ,/ 并/ 提出/ 了/ 精简/ 测试/ 需求/ 集/ 的/ 概念/ ,/ 采用/ 各/ 精简/ 算法/ 最终/ 实现/ 测试用例/ 集约/ 简/ ;/ 然后/ 将/ 此/ 思想/ 应用/ 到/ 基于/ 组件/ 的/ Web/ 应用/ 测试/ 中/ ,/ 基于/ 各种/ 覆盖率/ 准则/ ,/ 并/ 通过/ 分析/ 等价/ 和/ 包含/ 关系/ ,/ 约简/ 测试/ 需求/ 集合/ ./ 借鉴/ 此/ 思想/ ,/ 可/ 实施/ 需求/ 驱动/ 的/ Web/ 服务/ 测试/ ./ 3/ 用户/ 需求/ 建模/ 3.1/ 用户/ 需求/ 的/ 特点/ 和/ 要素/ 用户/ 使用/ 搜索引擎/ 时/ ,/ 首先/ 需要/ 组织/ 好/ 搜索/ 关键词/ ,/ 以便/ 表达/ 自己/ 的/ 需求/ ./ 但/ 由于/ 用户/ 不够/ 专业/ ,/ 通常/ 会/ 词不达意/ ./ 类似/ 的/ ,/ Web/ 服务/ 的/ 用户/ 对/ 其/ 究竟/ 需要/ 什么样/ 的/ 服务/ 也/ 往往/ 不够/ 明确/ ,/ 通常/ 会/ 有/ 一个/ 大概/ 的/ 目标/ ,/ 但/ 具体/ 需求/ 含糊不清/ 且/ 可能/ 会/ 经常/ 变动/ ./ 因此/ ,/ 要/ 对/ 用户/ 需求/ 建模/ ,/ 首先/ 需要/ 定性分析/ 用户/ 的/ 需求/ ,/ 提炼出/ 用户/ 需求/ 的/ 基本要素/ ;/ 进而/ 建立/ 用户/ 需求/ 特征/ 树型/ 结构图/ ,/ 即/ 从/ 用户/ 总体/ 需求/ 出发/ ,/ 逐层/ 分解/ 、/ 逐步/ 细化/ ,/ 每/ 一层/ 均/ 有/ 其/ 对应/ 的/ 目标/ 、/ 前驱/ 后置/ 条件/ 、/ 输入/ 、/ 输出/ 、/ QoS/ 要求/ 等/ 内容/ ,/ 分划/ 的/ 层数/ 由/ 实际/ 情况/ 来/ 确定/ ,/ 直到/ 最终/ 的/ 叶子/ 节点/ 可以/ 与/ 某个/ 原子/ 服务/ 相匹配/ ./ 目标/ 是/ 第一/ 要素/ ,/ 是/ 用户/ 要/ 做/ 某事/ 的/ 原因/ ,/ 这/ 直接/ 决定/ 了/ 所/ 需/ Web/ 服务/ 的/ 类型/ 、/ 功能/ 等/ 内容/ ,/ 通常/ 在/ 匹配/ 时/ 对应/ 于/ Web/ 服务/ 的/ 名称/ ,/ 但/ 由于/ 大多数/ 用户/ 表述/ 不够/ 精确/ ,/ 而且/ 有/ 近义词/ 、/ 多义词/ 的/ 影响/ ,/ 会/ 带来/ 一些/ 匹配/ 上/ 的/ 问题/ ./ 前驱/ 后置/ 条件/ 是/ 用户/ 需求/ 的/ 上下文/ 环境/ ,/ 这会/ 影响/ 用户/ 的/ 目标/ 、/ QoS/ 要求/ 和/ 输出/ ,/ 有时候/ 会/ 对/ Web/ 服务/ 产生/ 非常/ 大/ 的/ 影响/ ,/ 因为/ 环境/ 变化/ 了/ ,/ 有些/ 服务/ 可能/ 会/ 运行/ 不了/ ,/ 从而/ 导致/ 故障/ 的/ 产生/ ./ 输入/ Input/ 是/ Web/ 服务/ 运行/ 前/ 需要/ 用户/ 提供/ 的/ 信息/ ,/ 对应/ 于/ Web/ 服务/ 中/ WSDL/ 文档/ 中有/ 类型/ 要求/ 的/ 若干/ 输入/ 变量/ ./ 这/ 需要/ Web/ 服务/ 在/ 表示/ 时/ 尽可能/ 地/ 符合/ 用户/ 的/ 使用/ 经验/ 和/ 习惯/ ./ 同样/ ,/ 输出/ Output/ 也/ 是/ Web/ 服务/ 运行/ 前/ 需要/ 用户/ 提供/ 的/ 信息/ ,/ 对应/ 于/ Web/ 服务/ 中/ WSDL/ 文档/ 中有/ 类型/ 要求/ 的/ 若干/ 输出/ 变量/ ./ 这/ 也/ 需要/ Web/ 服务/ 的/ 输出/ 能够/ 充分体现/ 用户/ 的/ 期望/ ./ QoS/ 要求/ 是/ 用户/ 非/ 功能/ 需求/ 的/ 体现/ ,/ 表现/ 在/ 性能/ 、/ 安全性/ 、/ 可靠性/ 、/ 可用性/ 等/ 方面/ ,/ 用户/ 有/ QoS/ 需求/ ,/ 但/ 在/ 可/ 接受程度/ 上/ 差异/ 较大/ ,/ 不同/ 用户/ 的/ QoS/ 要求/ 差别/ 也/ 很大/ ,/ 最好/ 能/ 提供/ 一些/ 组合/ 方案/ 供/ 用户/ 来/ 选择/ ./ 3.2/ 用户/ 需求/ 模型/ 定义/ 1/ ./ 用户/ 需求/ 模型/ M/ =/ (/ N/ ,/ PN/ ,/ QN/ ,/ R/ ,/ C/ ,/ F/ )/ 是/ 一个/ 六元/ 组/ ,/ 其中/ N/ =/ {/ ARN/ ,/ DRN/ ,/ SRN/ }/ ,/ ARN/ (/ AtomicRe/ -/ quirementNodes/ )/ 是/ 由/ 一个/ 原子/ 服务/ 所/ 对应/ 的/ 需求/ 用例/ 对象/ ;/ DRN/ (/ DescriptionRequirementNodes/ )/ 是/ 用户/ 描述/ 需求/ 节点/ ,/ 没有/ 原子/ 服务/ 与其/ 对应/ ,/ 通过/ 精化/ 关系/ 生成/ 新/ 的/ DRN/ 或/ ARN/ ;/ SRN/ (/ StructureRequirementNodes/ )/ 是/ 虚拟/ 的/ 节点/ 集合/ ,/ 用于/ 描述/ 各个/ ARN/ 和/ DRN/ 之间/ 的/ 结构化/ 关系/ ,/ 由/ 多个/ ARN/ 、/ DRN/ 或/ SRN/ 通过/ 一定/ 关系/ (/ M/ 中/ 的/ R/ 关系/ )/ 组合成/ 的/ 结构化/ 需求/ 描述/ 对象/ ;/ PN/ =/ {/ AttributeofN/ |/ IN/ ,/ OUT/ ,/ OBJECT/ ,/ etc/ ./ }/ ,/ PN/ 为/ 节点/ N/ 的/ 功能性/ 属性/ ,/ 包括/ 输入/ 、/ 输出/ 、/ 目标/ 等/ 内容/ ,/ PN/ 是/ N/ 的/ 可选项/ ;/ QN/ =/ {/ QualityofN/ |/ ResponseTime/ ,/ Usability/ ,/ Reliability/ ,/ etc/ ./ }/ ,/ QN/ 为/ 节点/ N/ 的/ 非/ 功能性/ 属性/ (/ QoS/ 属性/ )/ ,/ 包括/ 响应/ 时间/ (/ 从/ 用户/ 发出请求/ 到/ 用户/ 接收/ 到/ 服务/ 的/ 时间/ ,/ 是/ 评价/ 服务/ 客观/ 性能/ 高低/ 的/ 重要/ 属性/ )/ 、/ 可用性/ (/ 衡量/ 一个/ 服务/ 持续/ 可用/ 的/ 能力/ ,/ 一个/ 服务/ 在/ 一个/ 观察/ 时段/ T/ 内/ ,/ 其中/ 有/ t/ 时间/ 可用/ ,/ 则/ 可用性/ 可以/ 表示/ 为/ t/ // T/ )/ 、/ 可靠性/ (/ 综合/ 效果/ 评价/ ,/ 分高/ 、/ 较/ 高/ 、/ 中/ 、/ 较差/ 、/ 差/ 等/ 几个/ 级别/ )/ 等/ ,/ QN/ 是/ N/ 的/ 可选项/ ;/ Page4R/ =/ {/ Refine/ ,/ Sequence/ ,/ Split/ ,/ Split/ -/ Join/ ,/ Choice/ ,/ If/ -/ Then/ -/ Else/ ,/ Repeat/ -/ While/ ,/ Repeat/ -/ Until/ ,/ Concur/ -/ rence/ }/ ,/ 该/ 集合/ 中/ 的/ 每个/ 元素/ 代表/ 了/ 节点/ 之间/ 的/ 各种/ 关系/ ,/ 如/ Refine/ 表示/ DRN/ 节点/ 间/ 、/ DRN/ 与/ ARN/ 节点/ 间/ 的/ 精化/ 活动/ ,/ 另外/ 的/ R/ 关系/ 表示/ SRN/ 节点/ 间/ 、/ SRN/ 与/ ARN/ 节点/ 间/ 的/ 各种/ 结构化/ 活动/ ;/ C/ =/ {/ Controlrelationship/ }/ ,/ 是/ 需求/ 节点/ N/ 之间/ 关系/ 的/ 一种/ 约束/ ,/ 例如/ 需要/ 满足/ 一定/ 的/ 约束条件/ 后/ 才能/ 建立/ 两个/ 节点/ 的/ 分支/ 关系/ ;/ F/ 是/ 节点/ 关系/ 的/ 映射函数/ ,/ 定义/ 为/ C/ :/ N/ ×/ N/ →/ R/ ,/ 即/ 任意/ 两个/ 节点/ 之间/ 满足/ 约束/ C/ 的/ 关系/ ./ 为/ 便于/ 说明/ ,/ 结合/ 行程/ 安排/ 服务/ (/ TravelService/ )/ 实例/ 来/ 加以/ 解释/ ./ 行程/ 安排/ 服务/ 是/ 一种/ 应用/ 比较/ 广泛/ 的/ 服务/ 组合/ 流程/ ,/ 它/ 根据/ 用户/ 要求/ 选择/ 合适/ 的/ 航班/ (/ 或/ 车次/ )/ ,/ 并/ 预订/ 旅馆/ 客房/ ./ 要/ 实现/ 这一/ 功能/ ,/ 行图/ 1/ 行程/ 安排/ 服务/ 用户/ 需求/ 模型/ 图例/ 如果/ 不/ 考虑/ 图/ 1/ 中/ 的/ 六边形/ 节点/ (/ SRN/ )/ 和/ 相应/ 的/ R/ (/ Concurrence/ )/ 边/ ,/ 图/ 1/ 即为/ 一个/ 树形/ 结构/ 的/ 用户/ 需求/ 模型/ ,/ 从/ 目标/ 节点/ (/ DRN/ )/ 开始/ ,/ 用户/ 需求/ 依据/ 功能/ 逐层/ 细化/ ,/ 目标/ 中/ 包含/ 的/ 约束条件/ 也/ 相应/ 分解/ 并/ 向/ 下层/ 传递/ ,/ 细/ 分成/ 若干/ 包含/ 目标/ 、/ Input/ 、/ Output/ 等/ (/ PN/ 属性/ )/ 和/ 负载/ 、/ 性能/ 、/ 价格/ 等/ (/ QN/ 属性/ )/ 的/ 子/ 描述/ 需求/ 节点/ ./ 这个/ 划分/ 可以/ 一直/ 进行/ 下去/ ,/ 直到/ 整棵树/ 的/ 叶子/ 节点/ (/ ARN/ )/ 能够/ 与/ 现实/ 中/ 存在/ 的/ 服务/ 相匹配/ ./ 同时/ 引入/ 的/ SRN/ 和/ R/ 边/ 表达/ 了/ 节点/ 之间/ 的/ 结构/ 关系/ ,/ 为/ 测试/ 提供/ 了/ 大量/ 的/ 有用/ 信息/ ./ 因此/ ,/ 通过/ 逐层/ 分解/ 细化/ 的/ 方法/ 所/ 建立/ 的/ 用户/ 需求/ 树/ ,/ 在/ 笼统/ 、/ 粗略/ 的/ 用户/ 需求/ 和/ 实际/ 的/ Web/ 服程/ 安排/ 服务/ 从根/ 节点/ 出发/ ,/ 先/ 细化/ 为/ 交通工具/ 预订/ (/ vehicle/ )/ 和/ 旅馆/ 预订/ (/ lodge/ )/ 这两项/ 子/ 需求/ ,/ 再进一步/ 细化/ 为/ 航空/ 预订/ 服务/ (/ AS/ )/ 、/ 火车/ 预订/ 服务/ (/ TS/ )/ 、/ 旅馆/ 预订/ 服务/ 1/ (/ H1/ )/ 、/ 旅馆/ 预订/ 服务/ 2/ (/ H2/ )/ 这/ 四项/ 子/ 需求/ ,/ 这/ 四项/ 子/ 需求/ 有/ 对应/ 的/ 原子/ 服务/ ,/ 此时/ 停止/ 细化/ ,/ 完成/ 用户/ 需求/ 的/ 功能/ 划分/ ./ 这些/ 节点/ 可以/ 有/ 各自/ 的/ PN/ 和/ QN/ 属性/ ,/ 上层/ 节点/ 与/ 下层/ 节点/ 之间/ 存在/ 精化/ 的/ 关系/ (/ Refine/ )/ ./ 另外/ ,/ 在/ 这个/ 实例/ 中/ ,/ 要求/ 这些/ 原子/ 服务/ 可/ 并发/ 执行/ ,/ 交通工具/ 预订/ (/ vehicle/ )/ 和/ 旅馆/ 预订/ (/ lodge/ )/ 也/ 需要/ 并发/ 执行/ ,/ 为了/ 描述/ 这些/ 结构化/ 关系/ ,/ 我们/ 引入/ 了/ SRN/ 节点/ 和/ 对应/ 的/ R/ (/ Concurrence/ )/ 边/ (/ 如果/ 用户/ 需要/ 交通工具/ 预订/ 和/ 旅馆/ 预订/ 顺序/ 执行/ ,/ 也/ 可以/ 给出/ 另外/ 的/ SRN/ 和/ R/ (/ Sequence/ )/ 边/ ./ 据此/ 建立/ 的/ 需求/ 模型/ 如图/ 1/ 所示/ ,/ 图例/ 说明/ 在/ 图/ 1/ 的/ 右下角/ ./ 务/ 之间/ 建立/ 了/ 对应/ 关系/ ,/ 根/ 节点/ 为/ 用户/ 需求/ ,/ 叶/ 节点/ 为/ 原子/ 服务/ ,/ 而/ 中间/ 节点/ 对应/ 多个/ 原子/ 服务/ 的/ 组合/ 过程/ ,/ 另外/ 节点/ 间/ 的/ 各种/ 依赖/ 关系/ 和/ 约束条件/ 也/ 在/ 需求/ 树中/ 得以/ 体现/ ,/ 从而/ 为/ 测试用例/ 的/ 生成/ 及/ 选择/ 提供/ 了/ 输入输出/ 逻辑关系/ 、/ 服务/ 组合/ 时/ 的/ 控制流/ 数据流/ 关系/ 等/ 至关重要/ 的/ 信息/ ./ 另外/ ,/ 当/ 用户/ 需求/ 发生变化/ 时/ ,/ 通过/ 逐层/ 传递/ ,/ 一定/ 会/ 影响/ 到/ 所/ 选择/ 的/ 服务/ ,/ 经过/ 评估/ 后/ ,/ 如果/ 变化/ 太/ 大/ ,/ 则/ 需要/ 重新/ 选择/ 服务/ (/ 此/ 为/ 服务/ 匹配/ 和/ 发现/ 的/ 过程/ )/ [/ 14/ -/ 15/ ]/ ;/ 如果/ 变化/ 在/ 可以/ 修改/ 的/ 范围/ 内/ ,/ 则/ 能够/ 迅速/ 定位/ 到/ 需要/ 改动/ 的/ 流程/ 、/ 位置/ ,/ 并/ 做出/ 适当/ 修改/ ,/ 再/ 进行/ 相应/ 的/ 回归/ 测试/ ./ Page54/ 基于/ 用户/ 需求/ 树/ 的/ Web/ 服务/ 测试/ 4.1/ 测试用例/ 生成/ 选择/ 用户/ 需求/ 模型/ 建立/ 以后/ ,/ 以此/ 作为/ 组织/ 、/ 实施/ 测试/ 的/ 依据/ ,/ 即/ 对照/ 每一项/ 需求/ ,/ 进行/ 测试用例/ 的/ 生成/ 和/ 选择/ ,/ 着重/ 覆盖/ 用户/ 所/ 关注/ 的/ 功能/ ,/ 能/ 节约/ 测试/ 资源/ 、/ 提高/ 测试/ 效率/ ./ 从/ 用户/ 需求/ 模型/ 图/ 可以/ 看出/ ,/ 各层/ 需求/ 之间/ 存在/ 包含/ 关系/ ,/ 子/ 节点/ 是/ 父/ 节点/ 的/ 子集/ ,/ 因此/ ,/ 依据/ “/ 尽量/ 选择/ 能/ 覆盖/ 更/ 多用户/ 需求/ 的/ 测试用例/ ”/ 这一/ 指导/ 原则/ ,/ 进行/ 测试用例/ 约简/ 时/ ,/ 首先/ 须/ 考虑/ 根/ 节点/ 的/ 需求/ ./ 如果/ 设计/ 的/ 用/ 例能/ 满足要求/ ,/ 那/ 测试/ 的/ 效率/ 自然/ 很/ 高/ ./ 但/ 由于/ 根/ 节点/ 需求/ 的/ 表述/ 比较/ 笼统/ 和/ 宽泛/ ,/ 可能/ 会/ 有/ 误差/ 产生/ ,/ 造成/ 精度/ 上/ 的/ 损失/ ,/ 为此/ 还/ 需要/ 分别/ 测试/ 相关/ 的/ 中间/ 节点/ 甚至/ 叶/ 节点/ ./ (/ 1/ )/ 根/ 节点/ 级/ 测试用例/ 生成/ 首先/ 需要/ 进行/ 根/ 节点/ 需求/ 的/ 测试/ ,/ 即/ 在/ 用户/ 所/ 能/ 接受/ 的/ 时间/ 、/ 价格/ 等/ 限制/ 条件/ 下/ ,/ 看/ 用户/ 的/ 需求/ 是否/ 被/ 满足/ ./ 测试用例/ 形/ 如/ (/ InputSet/ ,/ OutputSet/ )/ ,/ InputSet/ 为/ 输入/ 集/ ,/ 即/ 根据/ 需求/ 确定/ 的/ 测试数据/ ,/ OutputSet/ 为/ 输出/ 集/ ,/ 即/ 用户/ 期望/ 的/ 输出/ 数据/ 和/ 相关/ 的/ 限制/ 条件/ ./ 测试用例/ 根据/ 用户/ 需求/ (/ 表示/ 为/ 若干/ 有/ 限制/ 条件/ 的/ 类型/ 、/ 取值/ 范围/ 等/ 因素/ )/ 来/ 生成/ ,/ 方法/ 就是/ 一般/ 的/ 等价/ 类/ 、/ 边界值/ 、/ 决策表/ 等/ ./ 例如/ 测试/ “/ 天气预报/ ”/ 这一/ 服务/ ,/ 输入/ 通常/ 就是/ 日期/ 和/ 地名/ ,/ 输出/ 就是/ 相应/ 的/ 天气情况/ (/ 温度/ 、/ 湿度/ 、/ 风力/ 等/ )/ 和/ 返回/ 时间/ 、/ 价格/ 等/ 限制/ 条件/ ./ 运行/ 测试用例/ 后/ ,/ 根据/ 参数/ 覆盖率/ 准则/ 来/ 判断/ 测试/ 是否/ 可以/ 终止/ ./ 理想/ 情况/ 下/ ,/ 针对/ 根/ 节点/ 需求/ 的/ 测试/ 会/ 开展/ 得/ 比较顺利/ ,/ 因为/ 不/ 涉及/ 到/ 具体/ 的/ 细节/ ,/ 只是/ 一个/ 目标/ 级/ 的/ 验证/ ./ 但/ 由于/ 在/ 实际/ 测试/ 过程/ 中/ ,/ 会/ 存在/ 类型/ 或/ 范围/ 表达/ 的/ 不/ 一致/ 或者/ 实际/ 输出/ 与/ 预期/ 输出/ 部分/ 不/ 一致/ 等/ 问题/ ,/ 难以/ 判断/ 是/ 服务/ 中/ 存在/ 故障/ 还是/ 测试用例/ 设计/ 有/ 问题/ ,/ 需要/ 沿着/ 用户/ 需求/ 特征/ 树/ ,/ 深入/ 到子/ 节点/ 中/ 去/ ,/ 做/ 进一步/ 的/ 分析/ 和/ 测试/ ./ (/ 2/ )/ Web/ 服务/ 组合/ 测试用例/ 生成/ 根/ 节点/ 和/ 叶/ 节点/ 之间/ 的/ 中间层/ 会/ 涉及/ 到/ 多个/ 服务/ 的/ 组合/ ,/ 多/ 服务/ 组合/ 在/ 一起/ 时/ ,/ 可能/ 会/ 产生/ 接口/ 冲突/ (/ 参数/ 名/ 、/ 类型/ 、/ 个数/ 不/ 一致/ )/ 、/ 流程/ 冲突/ (/ 时序/ 逻辑/ 冲突/ 、/ 数据/ 竞争/ 等/ )/ 等/ 问题/ ,/ 因而/ 需要/ 进行/ 针对/ 组合/ 服务/ 的/ 测试/ ./ 现有/ 的/ 方法/ 大多/ 偏重于/ 测试/ 控制/ 流程/ ,/ 采用/ 模型/ 检查/ 的/ 思想/ ,/ 通过/ Petri/ 网/ 或/ 自动机/ 等/ 模型/ 对/ 服务/ 组合/ 进行/ 建模/ ,/ 以/ 验证/ 其/ 可达性/ ,/ 或/ 借助/ 已有/ 的/ 一些/ 模型/ 检查/ 工具/ 生成/ 测试用例/ ./ 我们/ 曾/ 开发/ 了/ 一个/ 面向/ Web/ 服务/ 组合/ 的/ 、/ 较为/ 系统/ 的/ 数据流/ 自动/ 测试工具/ DFTT4CWS/ 原型/ [/ 16/ ]/ ,/ 可以/ 将/ Web/ 服务/ 自动/ 转化/ 为/ 适用/ 于/ 数据流/ 测试/ 的/ 模型/ ,/ 并/ 在/ 此基础/ 上/ 通过/ 静态/ 分析/ 检测/ 程序/ 中/ 可能/ 存在/ 的/ 数据流/ 异常/ ,/ 针对/ 各种/ 数据流/ 覆盖/ 策略/ 自动/ 生成/ 测试/ 路径/ ,/ 并/ 为/ 每条/ 路径/ 提供/ 变量/ 约束/ 信息/ 以/ 生成/ 测试数据/ ./ DFTT4CWS/ 能够/ 给出/ All/ -/ C/ -/ Uses/ -/ Paths/ 、/ All/ -/ P/ -/ Uses/ -/ Paths/ 、/ All/ -/ DU/ -/ Paths/ 、/ All/ -/ Uses/ -/ Paths/ 、/ All/ -/ Defs/ -/ Paths/ 等/ 各种/ 覆盖/ 策略/ 下/ 的/ 统计/ 信息/ (/ 参见/ 表/ 1/ )/ ./ 如图/ 2/ 所示/ ,/ All/ -/ DU/ -/ Paths/ 是/ 最强/ 的/ 数据流/ 测试/ 覆盖/ 策略/ ,/ 包含/ 了/ 其它/ 所有/ 的/ 数据流/ 测试/ 覆盖/ 策略/ ./ All/ -/ C/ -/ Uses/ -/ PathsAll/ -/ P/ -/ Uses/ -/ PathsAll/ -/ DU/ -/ PathsAll/ -/ Uses/ -/ PathsAll/ -/ Defs/ -/ Paths/ 根据/ 用户/ 需求/ 树/ ,/ 可以/ 较/ 容易/ 地/ 获知/ 多个/ 服务/ 是/ 如何/ 组合/ 的/ ,/ 中间/ 节点/ 和/ 叶子/ 节点/ 的/ 父子关系/ 、/ 叶子/ 节点/ 之间/ 的/ 兄弟/ 关系/ 非常/ 明确/ ,/ 相关/ 的/ 属性/ 、/ 操作/ 以及/ 各种/ 约束/ 限制/ 条件/ 也/ 能够/ 被/ 传递/ 和/ 继承/ ./ 因此/ ,/ 可/ 着重/ 针对/ 这些/ 属性/ 、/ 操作/ 和/ 限制/ ,/ 在/ 用户/ 需求/ 树/ 的/ 驱动/ 下/ ,/ 结合/ 控制流/ 数据流/ 等/ 信息/ 进行/ 测试/ 路径/ 和/ 测试数据/ 的/ 生成/ 选择/ :/ 即/ 根据/ 用户/ 需求/ 树/ 的/ 结构/ 建立/ 控制流/ 图/ ,/ 进行/ 可达性/ 分析/ ,/ 按照/ 各种/ 覆盖率/ 的/ 要求/ 生成/ 测试/ 路径/ ,/ 并/ 根据/ 具体情况/ 补充/ 相应/ 的/ 测试数据/ ;/ 再/ 根据/ 用户/ 需求/ 树/ 的/ 数据/ 依赖/ 关系/ ,/ 运/ Page6/ 用/ DFTT4CWS/ 工具/ 针对/ 各种/ 数据流/ 覆盖/ 策略/ 自动/ 生成/ 测试/ 路径/ ,/ 并/ 为/ 每条/ 路径/ 提供/ 变量/ 约束/ 信息/ 以/ 生成/ 测试数据/ ./ 如果/ 运行/ 测试用例/ ,/ 发现/ 服务/ 组合/ 中有/ 不可/ 达/ 的/ 服务/ 或/ 组合/ 冲突/ ,/ 需要/ 对/ 相应/ 结构/ 进行/ 调整/ ;/ 或者/ 发现/ 现有/ 服务/ 不能/ 满足/ 需求/ ,/ 还/ 需要/ 删除/ 冗余/ 、/ 错误/ 的/ 服务/ 并/ 补充/ 新/ 的/ 合适/ 的/ 服务/ ./ (/ 3/ )/ 利用/ 节点/ 信息/ 进行/ 测试用例/ 生成/ 选择/ 组合/ 服务/ 测试/ 更/ 多/ 侧重于/ 多个/ 服务/ 之间/ 的/ 联系/ ,/ 单个/ 服务/ 的/ 质量/ 有时/ 也/ 需要/ 进一步/ 保障/ ./ 我们/ 定义/ 了/ Web/ 服务/ 的/ 一种/ 抽象/ 模型/ ASM/ [/ 17/ ]/ ,/ 包含/ 了/ 服务/ 的/ 结构/ 和/ 语义/ 信息/ ,/ 形如/ ASM/ =/ {/ DT/ ,/ WSN/ ,/ OP/ -/ Set/ {/ OPN/ ,/ INPS/ {/ PN/ ,/ C/ }/ ,/ OUTPS/ {/ PN/ ,/ C/ }/ }/ }/ ,/ 分别/ 表示/ {/ 服务/ 文本/ 描述/ ,/ 服务/ 名称/ ,/ 服务/ 操作/ 集/ {/ 操作/ 名称/ ,/ 输入/ 操作/ 集/ {/ 参数/ 名/ ,/ 参数/ 的/ 本体/ 概念/ }/ ,/ 输出表/ 2/ 针对/ 用户/ 需求/ 模型/ 的/ 变异/ 操作/ (/ 变异/ 子/ )/ 名称/ EPEmptyParameterEPOExchangeParameterOrderairplane/ (/ Datedepart/ ,/ Stringaddress/ )/ 变异/ 为/ airplane/ (/ Stringaddress/ ,/ Datedepart/ )/ IUOInsertUnaryOperatorPSParameterShiftPLTParameterLengthTransformlogin/ (/ Stringname/ ,/ Stringpasswd/ )/ ,/ 若有/ 约束/ stringLength/ (/ ?/ passwd/ ,/ 6/ )/ ,/ 6/ 变异/ 为/ 7PAParameterAssignment4/ ./ 2/ 回归/ 测试/ 波动/ 分析/ 回归/ 测试/ 是/ 对/ 修改/ 后/ 的/ 软件/ 进行/ 重新/ 测试/ ,/ 以/ 保证/ 修改/ 后/ 的/ 软件/ 仍然/ 可/ 提供/ 正常/ 功能/ ,/ 满足/ 预期/ 的/ 需求/ ./ 为/ 节省/ 测试/ 成本/ ,/ 回归/ 测试/ 只/ 需要/ 测试/ 那些/ 由于/ 修改/ 而/ 受到/ 影响/ 的/ 部分/ [/ 18/ -/ 19/ ]/ ./ 波动/ 分析/ 是/ 回归/ 测试/ 的/ 基础/ ,/ 能够/ 发现/ 系统/ 发生/ 修改/ 和/ 受/ 系统/ 修改/ 所/ 产生/ 的/ 影响/ 等/ 情况/ ,/ 从而/ 对此/ 进行/ 回归/ 测试/ ./ 当/ 用户/ 需求/ 发生/ 变动/ 时/ ,/ 对应/ 的/ 服务/ 也/ 要/ 进行/ 相应/ 的/ 修改/ ,/ 根据/ 用户/ 需求/ 特征/ 树/ 可以/ 迅速/ 定位/ 服务/ 中/ 的/ 相关/ 路径/ 、/ 元素/ 和/ 变量/ ,/ 即/ 通过/ 波动/ 分析/ 来/ 寻找/ 发生/ 修改/ 的/ 服务/ 以及/ 和/ 这些/ 服务/ 有/ 依赖/ 或/ 关联/ 关系/ 的/ 服务/ ,/ 以此/ 作为/ 回归/ 测试/ 的/ 对象/ ,/ 从而/ 保证/ 全面/ 、/ 有效/ 的/ 回归/ 测试/ ./ 用户/ 需求/ 特征/ 树/ 模型/ 能/ 反映/ 需求/ -/ 服务/ 的/ 关联/ 关系/ ,/ 即根/ 节点/ 为/ 需求/ ,/ 叶/ 节点/ 为/ 服务/ ,/ 中间/ 节点/ 是/ 纽带/ ,/ 相应/ 地/ ,/ 可以/ 据此/ 分析/ 需求/ 变动/ 和/ 测试用例/ 之间/ 的/ 关系/ ,/ 作为/ 回归/ 测试/ 测试用例/ 集约/ 简的/ 依据/ ;/ 同时/ 度量/ 相关/ 服务/ 受/ 需求/ 变动/ 影响/ 的/ 程度/ ,/ 使受/ 影响/ 大/ 的/ 服务/ 得到/ 优先/ 测试/ ./ 在/ 用户/ 需求/ 特征/ 树/ 模型/ 中/ ,/ 从/ 发生/ 变动/ 的/ 需求/ 节点/ 出发/ ,/ 沿着/ 边/ 可以/ 找到/ 一条/ 操作/ 集/ {/ 参数/ 名/ ,/ 参数/ 的/ 本体/ 概念/ }/ }/ }/ ./ 同样/ ,/ 可用/ 此/ 模型/ 来/ 表示/ 用户/ 需求/ 树上/ 的/ 叶子/ 节点/ ,/ 据此/ 来/ 实现/ 服务/ 的/ 发现/ 和/ 匹配/ ,/ 从而/ 最终/ 确定/ 所/ 选用/ 的/ 各/ 单个/ 服务/ ./ 在/ 此基础/ 上/ ,/ 进行/ 针对/ 单个/ 服务/ 的/ 测试/ ./ 用例/ 的/ 生成/ 和/ 选择/ 与/ 现有/ 的/ 方法/ 差别/ 不/ 大/ ,/ 也/ 即/ 首先/ 根据/ 服务/ 的/ WSDL/ 文档/ 获知/ 服务/ 名称/ 、/ 输入输出/ 参数/ 的/ 名称/ 和/ 类型/ ,/ 运用/ 等价/ 类/ 划分/ 、/ 边界值/ 、/ 决策表/ 等/ 方式/ 来/ 生成/ 初始/ 的/ 测试数据/ ,/ 再/ 结合/ 用户/ 的/ 需求/ (/ 包括/ 目标/ 、/ Input/ 、/ Output/ 、/ 前置/ 后置/ 条件/ 、/ QoS/ 要求/ 等/ )/ ,/ 通过/ 变异/ 测试/ [/ 9/ -/ 11/ ]/ 的/ 方法/ 来/ 筛选/ 用例/ ,/ 产生/ 一些/ 变异/ 子/ ,/ 如/ 参数/ 个数/ 的/ 变异/ 、/ 参数/ 次序/ 的/ 变异/ 、/ 参数/ 类型/ 的/ 变异/ 、/ 参数/ 范围/ 的/ 变异/ 、/ 参数/ 约束条件/ 的/ 变异/ 等/ ,/ 来/ 检测/ 测试用例/ 的/ 充分/ 度/ ,/ 具体/ 示例/ 见表/ 2/ ./ 或/ 多条/ 发散/ 的/ 路径/ 到达/ 叶/ 节点/ ,/ 沿/ 路径/ 的/ 所有/ 服务/ (/ 单个/ 服务/ 或者/ 组合/ 服务/ )/ 都/ 不同/ 程度/ 地受/ 需求/ 变动/ 影响/ ,/ 称/ 这些/ 路径/ 为/ 需求/ 变动/ 影响/ 路径/ ,/ 反映/ 了/ 需求/ 变动/ 影响/ 服务/ 的/ 轨迹/ ./ 为/ 形式化/ 描述/ 上述/ 过程/ ,/ 先/ 给出/ 如下/ 定义/ ./ 定义/ 2/ ./ 需求/ 变动/ 的/ 基本/ 动作/ 类型/ 有/ 4/ 种/ ,/ 形如/ ChangeRequest/ =/ {/ Add/ ,/ Delete/ ,/ Combine/ ,/ Decom/ -/ pose/ }/ ,/ 分别/ 表示/ 增加/ 、/ 删除/ 、/ 合并/ 和/ 拆分/ 需求/ ./ 在/ 此基础/ 上/ 可以/ 衍生/ 出/ 更为/ 复杂/ 的/ 需求/ 变化/ 情况/ ,/ 例如/ 某些/ 需求/ 的/ 变化/ 就/ 可以/ 视作/ 先/ 删除/ 旧/ 的/ 需求/ 再/ 增加/ 新/ 的/ 需求/ ./ 根据/ 需求/ 变动/ 的/ 基本/ 类型/ ,/ 可以/ 确定/ 需求/ 变动/ 源点/ ./ 由/ 分析/ 可知/ :/ Add/ ,/ Delete/ ,/ Decompose/ 都/ 分别/ 对应/ 某/ 一个/ 原子/ 需求/ 节点/ ,/ 而/ Combine/ 则/ 对应/ 两个/ 原子/ 需求/ 节点/ 的/ 公共/ 父/ 节点/ ./ 定义/ 3/ ./ 需求/ 变动/ 影响/ 路径/ Path/ 是/ 用户/ 需求/ 特征/ 树上/ 的/ 一条/ 从根/ 节点/ 到/ 叶/ 节点/ 的/ 路径/ ,/ 建立/ 了/ 需求/ 变动/ 与/ 对应/ 服务/ 的/ 关联/ 关系/ ./ 根据/ 波动/ 分析/ 的/ 理论/ ,/ 需要/ 进行/ 回归/ 测试/ 的/ 服务/ 除了/ 直接/ 被/ 修改/ 的/ 服务/ 以外/ ,/ 考虑/ 到/ 依赖/ 关系/ 的/ Page7/ 传递性/ ,/ 与/ 被/ 修改/ 服务/ 有/ 依赖/ 关系/ 的/ 服务/ 以及/ 与/ 被/ 修改/ 服务/ 有/ 新/ 产生/ (/ 或/ 新/ 消灭/ )/ 关系/ 的/ 服务/ 也/ 需要/ 进行/ 回归/ 测试/ ./ 而/ 这些/ 依赖/ 关系/ 以及/ 对应/ 的/ 需求/ 变动/ 影响/ 路径/ 可以/ 通过/ 遍历/ 需求/ 树来/ 确定/ ./ 如/ 算法/ 1/ 所示/ ,/ 为/ 自动检索/ 出/ 需求/ 变动/ 对/ 相关/ 服务/ 的/ 影响/ ,/ 可以/ 在/ 用户/ 需求/ 模型/ 中以/ 变动/ 点为源/ ,/ 使用/ 有向图/ 的/ 广度/ 优先/ 遍历/ 算法/ 查找/ 出/ 变动/ 点/ 影响/ 到/ 的/ 原子/ 需求/ 服务/ 对象/ ./ 根据/ 用户/ 需求/ 变动/ 的/ 不同/ 类别/ (/ Add/ ,/ Delete/ ,/ Combine/ ,/ Decompose/ )/ ,/ 先/ 分别/ 定位/ 到/ 相关/ 的/ 变动/ 源/ ,/ 再/ 根据上述/ 算法/ 查找/ 出/ 变动/ 所/ 直接/ 影响/ 到/ 的/ 原子/ 需求/ 服务/ ,/ 进而/ 依据/ 用户/ 需求/ 模型/ 进行/ 波动/ 分析/ ,/ 即可/ 获知/ 间接/ 影响/ 到/ 的/ 其它/ 服务/ 以及/ 各/ 相关/ 路径/ ./ 算法/ 1/ ./ 获取/ 用户/ 需求/ 变动/ 所/ 影响/ 到/ 的/ 原子/ 服务/ 集/ ./ 输入/ :/ G/ (/ 用户/ 需求/ 模型/ )/ ,/ Node/ (/ 需求/ 变动/ 源点/ )/ 输出/ :/ InfluenceSet/ (/ 受/ 变动/ 影响/ 的/ 服务/ 集/ ,/ 初始/ 为空/ )/ foreachv/ ∈/ Gsetvisited/ [/ v/ ]/ =/ false/ ;/ InitQueue/ (/ Q/ )/ ;/ visited/ [/ Node/ ]/ =/ true/ ;/ EnQueue/ (/ Q/ ,/ Node/ )/ ;/ // // Node/ 入/ 队列/ while/ (/ !/ QueueEmpty/ (/ Q/ )/ )/ {/ // // 队列/ 不空/ returnInfluenceSet/ 假设/ Paths/ =/ {/ Path1/ ,/ …/ ,/ Pathn/ }/ 为/ 关于/ 某/ 需求/ 变动/ 的/ 所有/ 影响/ 路径/ 的/ 集合/ ,/ 在/ 此/ 路径/ 集合/ 中/ 统计/ 除根/ 节点/ 以外/ 各/ 节点/ 出现/ 的/ 频次/ ,/ 频次/ 越高/ 的/ 节点/ ,/ 说明/ 受/ 影响/ 程度/ 越大/ ,/ 需要/ 复用/ 更/ 多/ 的/ 测试用例/ 以/ 加强/ 测试/ ./ 因而/ 可以/ 依据/ 受/ 需求/ 变动/ 的/ 影响/ 度/ ,/ 对/ 用例/ 排序/ ,/ 从而/ 实现/ 回归/ 测试用例/ 集/ 的/ 优化/ ./ 5/ 实例/ 分析/ 本/ 节/ 我们/ 首先/ 给出/ 一个/ 对/ Web/ 服务/ 进行/ 测试/ 的/ 实例/ ,/ 以/ 说明/ 我们/ 实验/ 的/ 步骤/ 以及/ 环境/ 配置/ ;/ 进而/ 结合/ 图/ 1/ 中/ 的/ 行程/ 安排/ 实例/ ,/ 按照/ 第/ 4/ 节中/ 的/ 方法/ ,/ 进行/ 实例/ 展示/ 和/ 分析/ ./ 5.1/ 测试/ 流程/ 示例/ 我们/ 使用/ 机票/ 查询/ Web/ 服务/ (/ http/ :/ // // webser/ -/ vice/ ./ webxml/ ./ com/ ./ cn/ // webservices/ // DomesticAir/ -/ line/ ./ asmx/ )/ 作为/ 测试/ 对象/ ./ 在/ 本/ 实验/ 中/ ,/ 机票/ 查询/ Web/ 服务/ 需要/ 3/ 个/ 输入/ 参数/ :/ 出发/ 城市/ 、/ 抵达/ 城市/ 和/ 日期/ ./ 通过/ 用户/ 需求/ 模型/ 的/ 分析/ ,/ 我们/ 发现/ :/ 出发/ 城市/ 和/ 抵达/ 城市/ 需要/ 在/ 系统/ 支持/ 的/ 城市/ 名称/ 集合/ 中/ ;/ 日期/ 需要/ 大于/ 当前/ 日期/ ,/ 格式/ 为/ yyyy/ -/ MM/ -/ dd/ (/ 如/ 2012/ -/ 12/ -/ 12/ )/ ./ 另外/ ,/ 返回/ 结果/ 中/ ,/ 如果/ 日期/ 格式/ 不/ 正确/ ,/ 则/ 返回/ “/ 日期/ 格式/ 错误/ ”/ ,/ 如果/ 日期/ 小于/ 当前/ 日期/ ,/ 则/ 返回/ “/ 日期/ 错误/ ”/ ;/ 如果/ 出发/ 或者/ 抵达/ 城市/ 不/ 在/ 城市/ 名称/ 集合/ 中/ ,/ 则/ 返回/ “/ 出发/ 或/ 抵达/ 的/ 城市/ 不/ 被/ 支持/ ”/ ,/ 如果/ 查询/ 出/ 的/ 航班/ 为空/ ,/ 则/ 返回/ “/ 没有/ 航班/ ”/ ;/ 否则/ ,/ 返回/ 所有/ 航班信息/ 的/ 列表/ ./ 实验/ 中/ ,/ 我们/ 使用/ SOAP/ 消息/ 对/ 测试用例/ 进行/ 封装/ ,/ 并/ 通过/ HTTP/ 进行/ 数据传输/ ,/ 将/ SOAP/ 请求/ 发送到/ 该/ 服务/ 所在/ 的/ 服务器/ ./ 为了/ 防止/ 服务器/ 负载/ 过大/ ,/ 两个/ SOAP/ 消息/ 之间/ 会/ 间隔/ 一段时间/ (/ 实验/ 中/ 设置/ 为/ 1s/ )/ ,/ 处理/ 流程/ 包括/ 测试用例/ 的/ 生成/ 选择/ 、/ 测试/ 执行/ 和/ 测试/ 结果/ 分析/ ,/ 具体/ 表述/ 如下/ :/ 1/ ./ 从/ 支持/ 的/ 城市/ 名称/ 集合/ 中/ 选择/ 出发/ 城市/ 和/ 抵达/ 城市/ ,/ 并/ 生成/ 符合/ 格式/ 等/ 要求/ 的/ 日期/ ;/ 2/ ./ 随机/ 生成/ 两串/ 中文/ 字符串/ ,/ 作为/ 出发/ 城市/ 和/ 抵达/ 城市/ ;/ 随机/ 生成/ 一串/ 字符串/ 作为/ 日期/ ;/ 3/ ./ 生成/ 测试用例/ ,/ 输入/ 数据/ 从步/ 1/ 、/ 2/ 得到/ 的/ 数据/ 中/ 选取/ ,/ 并/ 生成/ 预期/ 的/ 返回/ 结果/ ;/ 4/ ./ 新建/ 一个/ 线程/ ,/ 使用/ SOAP/ 对/ 测试用例/ 进行/ 封装/ ,/ 并发/ 送到/ 服务器端/ ,/ 等待/ 并/ 解析/ 服务器端/ 返回/ 的/ 结果/ ;/ 5/ ./ 将/ 返回/ 的/ 结果/ 和/ 预期/ 的/ 结果/ 进行/ 比较/ ,/ 判断/ 返回/ 结果/ 的/ 正确性/ ,/ 如/ 两者/ 一致/ ,/ 则/ 说明/ 返回/ 结果/ 正确/ ,/ 否则/ ,/ 说明/ 返回/ 结果/ 错误/ ;/ 6/ ./ 将/ 线程/ 阻塞/ 1s/ ,/ 然后/ 重复/ 步/ 3/ ~/ 5/ ,/ 直到/ 达到/ 预先/ 设置/ 的/ 测试/ 次数/ ;/ 7/ ./ 将/ 实验/ 的/ 结果/ 写入/ 相应/ 的/ xml/ 文件/ 中/ ./ 我们/ 一共/ 对/ 机票/ 查询/ Web/ 服务/ 进行/ 了/ 100/ 次测试/ ,/ 其中/ ,/ 正例/ (/ 城市/ 和/ 日期/ 正确/ )/ 60/ 次/ ,/ 反例/ 40/ 次/ (/ 其中/ ,/ 单/ 出发/ 城市/ 错误/ 的/ 10/ 次/ ,/ 单/ 抵达/ 城市/ 错误/ 的/ 10/ 次/ ,/ 出发/ 和/ 抵达/ 城市/ 同时/ 错误/ 的/ 10/ 次/ ,/ 单/ 日期/ 错误/ 的/ 10/ 次/ )/ ./ 实验/ 得到/ 的/ 结果/ 如表/ 3/ 、/ 表/ 4/ 和表/ 5/ 所示/ ./ 实验/ 信息/ 参数/ 正确/ 实验/ 601940Page8/ 出发/ 城市/ 实验/ 抵达/ 城市/ 实验/ 出发/ 和/ 抵达/ 城市/ 实验/ 10/ 实验/ 信息/ 日期/ 格式/ 实验/ 88/ 日期/ 小于/ 当前/ 日期/ 实验/ 20/ 表/ 3/ 显示/ 的/ 是/ 在/ 输入/ 参数/ 符合/ 类型/ 要求/ 和/ 潜在/ 要求/ 的/ 情况/ 下/ 实验/ 的/ 结果/ 信息/ ,/ 即/ 正例/ 测试/ ./ 在/ 这/ 60/ 次/ 实验/ 中/ :/ 返回/ 航班信息/ 的/ 有/ 19/ 次/ ;/ 返回/ “/ 没有/ 航班/ ”/ 信息/ 的/ 有/ 40/ 次/ ,/ 这有/ 可能/ 的确/ 是/ 两个/ 城市/ 间/ 或者/ 当天/ 没有/ 航班/ ,/ 但/ 也/ 有/ 可能/ 是/ 该/ Web/ 服务/ 有/ 错误/ ,/ 属于/ 待定/ 状态/ ,/ 需要/ 进一步/ 分析/ ;/ 返回/ 结果/ 有误/ 的/ 有/ 1/ 次/ ,/ 该/ 测试用例/ 如图/ 3/ 所示/ ,/ 返回/ 结果显示/ “/ 日期/ 格式/ 错误/ ”/ ,/ 不同于/ 预期/ 输出/ 结果/ ,/ 显然/ 是/ 该/ 服务/ 存在/ 问题/ ./ 表/ 4/ 和表/ 5/ 是/ 通过/ 反例/ 测试/ 所/ 得到/ 的/ 结果/ ,/ 预期/ 输出/ 和/ 实际/ 输出/ 都/ 相吻合/ ,/ 没/ 能/ 检测/ 出/ 服务/ 中/ 的/ 其它/ 问题/ ./ 由此可见/ :/ 实验/ 中该/ 机票/ 查询/ Web/ 服务/ 的/ 正确率/ 为/ 59/ %/ ,/ 错误率/ 为/ 1/ %/ ,/ 不/ 确定/ 率为/ 40/ %/ ./ 实验/ 检测/ 出该/ Web/ 服务/ 功能/ 上/ 的/ 1/ 项/ 错误/ :/ 当/ 输入/ 日期/ 为/ 闰日/ 时/ ,/ 该/ 服务/ 不能/ 返回/ 正确/ 结果/ ./ 图/ 3/ 机票/ 查询/ Web/ 服务/ 中/ 的/ 测试用例/ 示例/ 实验/ 表明/ :/ 在/ 确定/ 了/ 服务/ 的/ 输入输出/ 参数/ 类型/ 、/ 限制/ 条件/ 以及/ 输入输出/ 之间/ 的/ 部分/ 逻辑/ 关联/ 关系/ 以后/ ,/ 尚且/ 有/ 较/ 高/ 的/ 不/ 确定/ 率/ (/ 本次/ 实验/ 中为/ 40/ %/ )/ 且/ 错误/ 发现/ 率/ 也/ 比较/ 低/ ,/ 说明/ 测试/ 的/ 效率/ 不高/ ;/ 如果/ 只有/ 输入输出/ 参数/ 的/ 类型信息/ (/ 现有/ 方法/ 大都如此/ ,/ 例如/ 工具/ soapUI/ 就是/ 根据/ WSDL/ 文档/ 得到/ 参数/ 类型信息/ ,/ 然后/ 再/ 让/ 用户/ 随机/ 填写/ 测试数据/ )/ ,/ 再/ 据此/ 生成/ 测试用例/ 用于/ 测试/ ,/ 那/ 测试/ 的/ 效率/ 会/ 更/ 低/ ,/ 因为/ 有太多/ 的/ 不/ 确定/ 情况/ ,/ 无法/ 确定/ 是/ 服务/ 的/ 问题/ 还是/ 用例/ 的/ 问题/ ./ 5.2/ 用户/ 需求/ 驱动/ 的/ 行程/ 安排/ 服务/ 测试/ 示例/ 从图/ 1/ 可知/ ,/ 行程/ 安排/ 中/ 的/ 用户/ 需求/ 首先/ 表示/ 为根/ 节点/ Root/ ,/ 其/ PN/ 属性/ 包含/ 了/ 用户/ 行程/ 的/ 出发/ 时间/ 、/ 返回/ 时间/ 、/ 目的地/ 等/ 信息/ ,/ 另外/ ,/ 根/ 节点/ 划分/ 成/ vehicle/ 、/ lodge/ 两个/ 分部/ ,/ 之后/ 并发/ 地/ 进行/ 两个/ 流程/ :/ (/ 1/ )/ 航班/ (/ 车次/ )/ 选择/ 流程/ ./ 该/ 流程/ 根据/ vehicle/ 选择/ 调用/ TrainService/ (/ TS/ )/ 或是/ AirlinesService/ (/ AS/ )/ ,/ 被/ 调用/ 的/ 服务/ 将/ 根据/ 用户/ 输入/ 的/ PN/ 寻找/ 合适/ 航班/ 或/ 车次/ ;/ (/ 2/ )/ 旅馆/ 选择/ 流程/ ./ 该/ 流程/ 调用/ 已有/ 的/ 两家/ 旅馆/ 查询/ 服务/ Hotel1Service/ (/ H1/ )/ 和/ Hotel2Service/ (/ H2/ )/ ,/ 根据/ PN/ 和/ 用户/ 在/ 食宿/ 方面/ 的/ 要求/ 选出/ 合适/ 的/ 旅馆/ 客房/ ./ 5.2/ ./ 1/ 需求/ 驱动/ 的/ 测试用例/ 生成/ 选择/ 根据/ 第/ 4/ 节中/ 提到/ 的/ 方法/ 和/ 步骤/ ,/ 首先/ 根据/ 图/ 1/ 中/ 用户/ 需求/ 模型/ 生成/ 选择/ 测试用例/ ./ 第一/ 是/ 进行/ 根/ 节点/ 级/ 的/ 目标/ 验证/ ./ 用户/ 输入/ PN/ 、/ vehicle/ 和/ lodge/ 的/ 要求/ ,/ 该/ 服务/ 返回/ 行程/ 安排/ 推荐/ 列表/ 或者/ 无法/ 返回/ 结果/ ,/ 其中/ :/ PN/ 中/ 至少/ 有/ 出发/ 时间/ 、/ 返回/ 时间/ 、/ 起始/ 地/ 、/ 目的地/ 这/ 4/ 项/ 内容/ ,/ 取值/ 范围/ 广泛/ ;/ vehicle/ 有/ 1/ 项/ 内容/ ,/ 2/ 种/ 取值/ (/ 飞机/ 或/ 火车/ )/ ;/ lodge/ 有/ 1/ 项/ 内容/ ,/ 2/ 种/ 取值/ (/ H1/ 或/ H2/ )/ ./ 这个/ 例子/ 涉及/ 6/ 个/ 输入/ 参数/ ,/ 参数/ 类型/ 有/ 日期/ 型/ 、/ 字符串/ 型/ 、/ 枚举/ 型/ ,/ 通常/ 的/ 方法/ 是/ :/ 根据/ 参数/ 类型/ ,/ 运用/ 等价/ 类/ 划分/ 、/ 边界值/ 选取/ 、/ 决策表/ 等/ 策略/ 来/ 生成/ 测试用例/ ,/ 可/ 生成/ 若干/ 符合/ 参数/ 类型/ 限制/ 的/ 测试用例/ ./ 如果/ 用/ 这些/ 用例/ 来/ 测试/ ,/ 只/ 符合/ 了/ 类型/ 条件/ 的/ 限制/ ,/ 而/ 没有/ 考虑/ 到/ 服务/ 内部/ 的/ 潜在/ 限制/ 条件/ ,/ 大多数/ 用例/ 将/ 无法/ 返回/ 正确/ 的/ 结果/ (/ 例如/ ,/ 起始/ 地为/ “/ abcde/ ”/ ,/ 符合/ 字符串/ 类型/ 的/ 要求/ ,/ 但/ 提交/ 给/ 该/ 服务/ 时/ ,/ 输出/ 一定/ 是/ “/ 无法/ 返回/ 结果/ ”/ )/ ,/ 这/ 将/ 难以/ 判断/ 是/ 由于/ 用例/ 设计/ 有误/ 所/ 导致/ 的/ 后果/ 还是/ Web/ 服务/ 本身/ 就/ 存在/ 问题/ ./ 而/ 根据/ 用户/ 需求/ 模型/ ,/ 我们/ 除了/ 可以/ 获知/ 参数/ 类型/ 外/ ,/ 还/ 能够/ 得到/ 一些/ 约束条件/ (/ 有些/ 属于/ 常识/ 范畴/ ,/ 有些/ 是/ 用户/ 特别/ 要求/ 的/ 条件/ )/ ,/ 比如/ 返回/ 时间/ 要/ 晚于/ 出发/ 时间/ ,/ 起始/ 地/ 、/ 目的地/ 为/ 地理/ 上/ 确有/ 的/ 城市/ 名/ ,/ 等等/ ./ 直观/ 上/ 看/ ,/ 在/ 生成/ 用例/ 时/ ,/ 如果/ 增加/ 了/ 约束条件/ ,/ 自然/ 会/ 使得/ 参数/ 的/ 取值/ 范围/ 显著/ 缩小/ ,/ 运行/ 同样/ 数量/ 的/ 测试用例/ ,/ 我们/ 的/ 方法/ 检测/ 错误/ 的/ 效率/ 更高/ ./ 针对/ 行程/ 安排/ 实例/ ,/ 我们/ 对/ 等价/ 类/ 划分/ 中/ 随机/ 选取/ 测试数据/ 的/ 策略/ (/ Random/ )/ 和/ 运用/ 用户/ 需求/ 模型/ 生成/ 测试用例/ 的/ 策略/ (/ UM/ )/ 进行/ 了/ 比较/ ,/ 考虑/ 不同/ 数量/ 的/ 测试用例/ 对根/ 节点/ 级/ 服务/ 中/ 4/ 个/ 原子/ 服务/ Page9/ (/ TS/ ,/ AS/ ,/ H1/ ,/ H2/ )/ 的/ 覆盖/ 情况/ ./ 其中/ ,/ Random/ 方法/ 是/ 在/ PN/ 、/ Vehicle/ 、/ Lodge/ 所/ 对应/ 的/ 等价/ 类/ {/ 合法/ PN/ ,/ 非法/ PN/ }/ 、/ {/ 非法/ Vehicle/ ,/ AS/ ,/ TS/ }/ 、/ {/ 非法/ Lodge/ ,/ H1/ ,/ H2/ }/ 中/ 随机/ 选择/ 测试数据/ ,/ 以/ 得到/ 若干/ 不同/ 数目/ 的/ 测试用例/ 集/ ;/ 而/ UM/ 方法/ 能/ 保证/ 输入/ 信息/ 的/ 合法性/ 和/ 合理性/ ,/ 即/ 时间/ 格式/ 、/ 地点/ 名称/ 等/ 都/ 符合/ 服务/ 的/ 内在/ 要求/ ,/ 只/ 需要/ 在/ 等价/ 类/ {/ 合法/ PN/ }/ 、/ {/ AS/ ,/ TS/ }/ 、/ {/ H1/ ,/ H2/ }/ 中/ 随机/ 选择/ 测试数据/ ,/ 并/ 补充/ 一些/ 异常情况/ 做/ 为/ 反例/ 来/ 考查/ 服务/ 在/ 错误/ 输入/ 的/ 情况/ 下/ 返回/ 结果/ 的/ 情况/ ,/ 另外/ 还/ 可以/ 考虑/ Vehicle/ 和/ Lodge/ 这/ 两个/ 子/ 服务/ 并发/ 执行/ 的/ 情况/ ,/ 即/ 输入/ 分别/ 为/ (/ PN/ ,/ Vehicle/ )/ 、/ (/ PN/ ,/ Lodge/ )/ 以及/ (/ PN/ ,/ Vehicle/ ,/ Lodge/ )/ 的/ 情况/ ./ 具体/ 测试/ 过程/ 是/ :/ 分别/ 进行/ 10/ 组/ 实验/ ,/ 各组/ 采用/ 的/ 测试用例/ 数目/ 分别/ 为/ 2/ 、/ 4/ 、/ 6/ 、/ 8/ 、/ 10/ 、/ 12/ 、/ 14/ 、/ 16/ 、/ 18/ 、/ 20/ ,/ 得到/ 各用例/ 数目/ 下/ 对/ 各/ 原子/ 服务/ 的/ 执行/ 覆盖/ 情况/ (/ 其中/ ,/ 覆盖率/ 分别/ 为/ 25/ %/ 、/ 50/ %/ 、/ 75/ %/ 、/ 100/ %/ ,/ 表示/ 相应/ 执行/ 了/ 1/ 个/ 、/ 2/ 个/ 、/ 3/ 个/ 和/ 4/ 个/ 原子/ 服务/ )/ ;/ 为/ 减少/ 实验/ 的/ 偶然性/ ,/ 再/ 重复/ 这/ 10/ 组/ 实验/ 8/ 次/ ,/ 取其/ 平均值/ ,/ 作为/ 一般/ 情况/ 下根/ 节点/ 服务/ 中/ 原子/ 服务/ 被/ 执行/ 到/ 的/ 情况/ ,/ 具体/ 结果/ 如图/ 4/ 所示/ :/ 随着/ 测试用例/ 数目/ 的/ 增加/ ,/ 对/ 4/ 个/ 原子/ 服务/ 的/ 执行/ 覆盖率/ 也/ 在/ 逐步/ 增加/ ,/ 用/ UM/ 方法/ ,/ 平均/ 执行/ 14/ 条用例/ 就/ 能/ 全部/ 执行/ 根/ 节点/ 服务/ 中/ 的/ 原子/ 服务/ ;/ 而用/ Random/ 方法/ ,/ 需要/ 平均/ 执行/ 18/ 条用例/ ,/ 才能/ 达到/ 对/ 原子/ 服务/ 的/ 100/ %/ 覆盖/ ./ 另外/ ,/ 图中/ 各/ 测试用例/ 数目/ 下/ 的/ 覆盖率/ 均/ 表明/ UM/ 方法/ 要/ 优于/ Random/ 方法/ ,/ 在/ 同样/ 数量/ 的/ 用/ 例下/ ,/ UM/ 方法/ 能/ 达到/ 更/ 高/ 的/ 覆盖率/ ./ 第二/ 是/ 进行/ 中间/ 节点/ 级/ 服务/ 组合/ 测试/ ./ 从图/ 1/ 获知/ 节点/ 之间/ 的/ 控制/ 依赖/ 关系/ 为/ {/ 并行/ 结构/ :/ (/ Train/ ‖/ Airplane/ )/ ‖/ (/ Hotel1/ ‖/ Hotel2/ )/ ,/ 约束条件/ :/ if/ 票价/ 预算/ Money/ >/ 1000/ 元/ then/ 选择/ Airplane/ ;/ else/ 选择/ Train/ }/ ,/ 数据/ 依赖/ 关系/ 为/ {/ root/ -/ >/ vehicle/ -/ >/ Train/ ,/ root/ -/ >/ vehicle/ -/ >/ Airplane/ ,/ root/ -/ >/ lodge/ -/ >/ Hotel1/ ,/ root/ -/ >/ lodge/ -/ >/ Hotel2/ }/ ./ 据此/ 进行/ 静态/ 分析/ ,/ 得到/ CFG/ 图/ 和/ 定义/ -/ 使用/ 链/ ,/ 进而/ 可以/ 得到/ 满足/ 各/ 覆盖率/ 要求/ 的/ 相关/ 测试/ 路径/ ,/ 再/ 补充/ 测试数据/ ,/ 即可/ 得到/ 相应/ 的/ 测试用例/ ./ 例如/ ,/ 使用/ 我们/ 的/ 工具/ DFTT4CWS/ 得到/ 的/ 在/ 不同/ 数据流/ 覆盖/ 策略/ 下/ 的/ 统计/ 结果/ 如图/ 5/ 所示/ ,/ 该/ 服务/ 组合/ 的/ 业务流程/ 共有/ 40/ 条可/ 执行/ 路径/ 、/ 47/ 对/ 有效/ 定义/ -/ 使用/ 对/ (/ Du/ -/ Pairs/ )/ 和/ 53/ 条/ 有效/ 定义/ -/ 使用/ 链/ (/ Du/ -/ Pairs/ )/ ./ 为/ 便于/ 表示/ ,/ 图/ 5/ 中/ 的/ 路径/ 是/ 实际/ 路径/ 的/ 代号/ ./ 只/ 需/ 9/ 条/ 路径/ (/ 所有/ 流程/ 执行/ 路径/ 的/ 22.5/ %/ )/ 即可/ 覆盖/ 该/ 服务/ 组合/ 流程/ 中/ 的/ 所有/ 有效/ 定义/ -/ 使用/ 链/ ,/ 该/ 集合/ 即/ 为/ 强度/ 最高/ 的/ 数据流/ 覆盖/ 策略/ All/ -/ DU/ -/ Paths/ ,/ 达到/ 对/ 数据/ 使用/ 的/ 测试/ 要求/ ./ 在/ 实际/ 运行/ 测试用例/ 后/ ,/ 可能/ 会/ 产生/ 一些/ 问题/ ,/ 例如/ ,/ 假设/ Money/ 为/ 1200/ 元/ ,/ 那/ 只会/ 运行/ Airplane/ 服务/ ,/ 但/ 可能/ 当天/ 机票/ 已/ 全部/ 售出/ ,/ 无法/ 返回/ 用户/ 需要/ 的/ 航班/ 预订/ 信息/ ,/ 此时/ 还/ 需要/ 用户/ 干涉/ ,/ 再次/ 选择/ Train/ 服务/ ./ 因此/ ,/ 为/ 提高/ 用户/ 的/ 满意度/ ,/ 需要/ 进一步/ 完善/ 服务/ 组合/ 的/ 流程/ ,/ 当/ 某个/ 服务/ 不能/ 完成/ 某/ 任务/ 时/ ,/ 要/ 能够/ 自动/ 启用/ 备用/ 服务/ 或/ 功能/ 等价/ 服务/ ,/ 从而/ 给/ 用户/ 提供/ 尽可能/ 多/ 的/ 选择/ ./ 第三/ 是/ 进行/ 叶/ 节点/ 级/ 测试用例/ 的/ 生成/ 选择/ ./ 以/ Hotel1/ 服务/ 为例/ ,/ 输入/ 为/ {/ 出发/ 时间/ 、/ 返回/ 时间/ 、/ 目的地/ 、/ 星级/ 、/ 价格/ 、/ 地址/ }/ ,/ 输出/ 为/ {/ 旅店/ 名称/ 、/ 地点/ 、/ 到达/ 日期/ 、/ 离开/ 日期/ 、/ 单价/ 、/ 总价/ }/ ,/ 根据/ 变量/ 类型/ 和/ 取值/ 约束/ 生成/ 初始/ 用/ 例集/ ,/ 运用/ 等价/ 类/ 划分/ 、/ 边界值/ 、/ 决策表/ 、/ 整数/ 线性规划/ 等/ 方式/ 来/ 生成/ 初始/ 的/ 测试数据/ ,/ 规模/ 会/ 非常/ 庞大/ ;/ 再/ 根据/ 表/ 2/ 中/ 列出/ 的/ 变异/ 子/ ,/ 对/ 相应/ 参数/ 的/ 类型/ 、/ 数目/ 、/ 约束条件/ 等/ 做/ 变异/ ,/ 得到/ 新/ 的/ 用例/ ,/ 再/ 根据/ 其/ 运行/ 结果/ 计算/ 变异/ 充分/ 度/ ,/ 从而/ 筛选/ 出/ 数目/ 合适/ 的/ 用例/ ./ 其中/ 的/ 相关/ 数据类型/ 和/ 约束条件/ 如表/ 6/ 所示/ ./ Page10/ 表/ 6Hotel1/ 服务/ 中/ 数据类型/ 和/ 约束条件/ 示例/ 数据类型/ Date/ 出发/ 时间/ 、/ 返回/ 时间/ 、/ 到达/ 日/ String/ 目的地/ 、/ 地址/ 、/ 旅店/ 名称/ 、/ 地点/ 目的地/ 瓡/ 地址/ 瓡/ 地点/ (/ 瓡/ 表示/ 行政区域/ 上/ 的/ 包含/ ,/ 而/ 不是/ 字符串/ 意义/ 上/ 的/ 包含/ )/ ;/ 旅店/ 名称/ 需要/ Enum/ 星级/ Real/ 价格/ 、/ 单价/ 、/ 总价/ 出发/ 时间/ </ 返回/ 时间/ ;/ 到达/ 日期/ </ 离开/ 日期/ ;/ 出发/ 时间/ </ 到达/ 日期/ ;/ 离开/ 日期/ </ 返回/ 时间/ ;/ {/ 0/ ,/ 1/ ,/ 2/ ,/ 3/ ,/ 4/ ,/ 5/ }/ ,/ 和/ 旅店/ 名称/ 有/ 一一对应/ 关系/ ;/ 5.2/ ./ 2/ 需求/ 驱动/ 的/ 回归/ 测试/ 当/ 用户/ 需求/ 发生/ 变动/ 时/ ,/ 势必会/ 影响/ 到/ 某些/ 服务/ ,/ 需要/ 进行/ 回归/ 测试/ ,/ 为此/ 要/ 在/ 原有/ 测试用例/ 集/ 的/ 基础/ 上/ 进行/ 选择/ 并/ 适当/ 新增/ 用例/ ./ 例如/ :/ 在/ 行程/ 安排/ 实例/ 中/ ,/ 用户/ 已/ 通过/ 该/ 服务/ 组合/ 完成/ 了/ 交通工具/ 预订/ 和/ 旅馆/ 预订/ ,/ 但/ 突然/ 有/ 需要/ 提前/ 返回/ ,/ 即/ 对/ 需求/ 中/ 的/ “/ 返回/ 时间/ ”/ 输入/ 项/ 做/ 了/ 改变/ ,/ 由此/ 可能/ 导致/ 以下/ 变化/ ,/ 所/ 涉及/ 到/ 的/ 服务/ 以及/ 需要/ 变化/ 影响/ 路径/ 如下/ :/ (/ 1/ )/ 影响/ 到/ 飞机票/ 或/ 火车票/ 的/ 预订/ ./ 由于/ 日期/ 提前/ ,/ 有/ 可能/ 导致/ 订/ 不到/ 飞机/ 和/ 火车票/ ,/ 需要/ 增加/ 交通/ 方式/ (/ 变动/ 类型/ 为/ Add/ )/ ,/ 比如/ 汽车/ Bus/ ./ 因此/ 需要/ 增加/ 服务/ Bus/ ,/ 相应/ 的/ 影响/ 路径/ 为/ root/ -/ >/ vehicle/ -/ >/ Bus/ ;/ (/ 2/ )/ 住宿/ 天数/ 的/ 变化/ ;/ 如果/ 对/ 住宿/ 情况/ 不/ 满意/ ,/ 也/ 可能/ 更换/ 旅馆/ ./ 可能/ 会/ 会/ 修改/ 住宿/ 天数/ 或/ 住宿/ 地址/ (/ 变动/ 类型/ 为先/ Add/ 后/ Delete/ )/ ./ 即/ 需要/ 修改/ 服务/ Hotel1/ 或/ Hotel2/ ,/ 相应/ 的/ 影响/ 路径/ 为/ root/ -/ >/ Lodge/ -/ >/ Hotel1/ (/ 或/ Hotel2/ )/ ./ (/ 3/ )/ 对/ 业务流程/ 的/ 修改/ ./ 原先/ 航班/ (/ 车次/ )/ 选择/ 流程/ 和/ 旅馆/ 选择/ 流程/ 是/ 并发/ 执行/ 的/ ,/ 但/ 由于/ 返回/ 日期/ 修改/ 可能/ 会/ 导致/ 订/ 不到/ 票/ ,/ 相应/ 会/ 改变/ 住宿/ 计划/ ,/ 所以/ 这个/ 流程/ 要/ 由/ 并行/ 改为/ 串行/ ,/ 先/ 订票/ ,/ 再订/ 旅馆/ ,/ 这样/ 更为/ 合适/ ./ 即/ 需要/ 修改/ 服务/ 流程/ (/ 变动/ 类型/ 为先/ Combine/ 后/ Decompose/ )/ ,/ 更/ 改为/ root/ -/ >/ vehicle/ -/ >/ Lodge/ ./ 例如/ ,/ 如果/ 行程/ 安排/ 服务/ 的/ 流程/ 发生/ 了/ 变化/ (/ 从/ 并行/ 变成/ 了/ 串行/ )/ ,/ 重点/ 是/ 找出/ 变化/ 所/ 带来/ 的/ 影响/ ,/ 具体/ 的/ 测试/ 执行/ 过程/ 和/ 5.1/ 节中/ 的/ 流程/ 类似/ ./ 相应/ 的/ 回归/ 测试/ 过程/ 如下/ :/ 1/ ./ 执行/ root/ -/ >/ vehicle/ 的/ 测试/ ,/ 具体/ 过程/ 如/ 5.1/ 节中/ 的/ 流程/ 所示/ ,/ 但/ 要/ 注意/ 日期/ 的/ 范围/ 限制/ ,/ 且/ 测试/ 次数/ 设为/ 1/ ;/ 2/ ./ 视/ vehicle/ 的/ 输出/ 情况/ 来/ 决定/ 是否/ 运行/ Lodge/ ,/ 即/ :/ 若/ vehicle/ 输出/ 为/ 航班/ 或/ 车次/ 信息/ ,/ 则/ 转步/ 3/ ;/ 若/ vehicle/ 输出/ 为空/ 或/ 出错/ 信息/ ,/ 则/ 转/ 4/ ;/ 3/ ./ 执行/ vehicle/ -/ >/ Lodge/ 的/ 测试/ ,/ 具体/ 过程/ 也/ 类似/ 于/ 5.1/ 节中/ 的/ 流程/ ,/ 只是/ 在/ 输入输出/ 参数/ 上/ 有所/ 变化/ ,/ 且/ 测试/ 次数/ 设为/ 1/ ;/ 4/ ./ 合并/ 两次/ 测试/ 的/ 结果/ ,/ 即/ :/ 若/ Lodge/ 被/ 执行/ ,/ 将步/ 1/ 和步/ 3/ 中/ 的/ 结果/ 合并/ 后/ 输出/ ;/ 若/ Lodge/ 没/ 被/ 执行/ ,/ 直接/ 输出/ 出错/ 信息/ ./ 根据上述/ 过程/ ,/ 我们/ 在/ IntelCore2Q8400CPU/ 、/ 4GRAM/ (/ 系统/ 实际/ 占用/ 3.58/ G/ )/ 、/ Windows732bit/ 操作系统/ 、/ JRE6/ ./ 0Update2332bit/ 、/ axis1/ ./ 4/ 的/ 运行/ 环境/ 下/ 分别/ 运行/ 了/ 60/ 条正例/ 和/ 40/ 条/ 反例/ (/ 分/ 属于/ 5/ 组/ 测试用例/ 集/ ,/ 对应/ 于表/ 7/ 中/ 的/ 5/ 行/ )/ ,/ 得到/ 串行/ 处理/ 的/ 消耗/ 时间/ (/ 不/ 考虑/ 线程/ 阻塞/ 的/ 时间/ ,/ 由于/ 单个/ 用例/ 的/ 执行/ 时间/ 很/ 短/ ,/ 故/ 记录/ 运行/ 每组/ 测试用例/ 集所/ 消耗/ 的/ 总体/ 时间/ ,/ 包括/ 生成/ 、/ 发送/ 、/ 接受/ SOAP/ 消息/ 并/ 处理/ 返回/ 结果/ 的/ 时间/ )/ ,/ 并/ 统计/ 导致/ Lodge/ 未/ 被/ 执行/ 的/ 测试用例/ 数目/ ./ 为了/ 便于/ 比较/ ,/ 我们/ 还/ 计算/ 了/ 并行处理/ 的/ 消耗/ 时间/ (/ 同样/ ,/ 也/ 不/ 考虑/ 线程/ 阻塞/ 的/ 时间/ ,/ 消耗/ 时间/ 的/ 计算方法/ 也/ 和/ 串行/ 处理/ 的/ 一致/ )/ ,/ 具体/ 结果/ 如表/ 7/ 所示/ ./ 实验/ 信息/ 用例/ 参数/ 正确/ 实验/ 601260107943/ 出发/ 城市/ 实验/ 1023213310/ 抵达/ 城市/ 实验/ 1024113410/ 出发/ 、/ 抵达/ 实验/ 1023614210/ 日期/ 实验/ 1020211210/ 根据/ 表/ 7/ 中/ 的/ 数据/ ,/ 我们/ 做/ 如下/ 分析/ :/ (/ 1/ )/ 在/ 同样/ 的/ 实验/ 次数/ 条件/ 下/ ,/ 实验/ 消耗/ 时间/ 略有/ 浮动/ ,/ 这/ 主要/ 是/ 由于/ 网络/ 访问/ 时间/ 不/ 确定/ 造成/ 的/ ./ (/ 2/ )/ 实验/ 结果表明/ ,/ 串行/ 处理/ 方法/ 消耗/ 时间/ 比/ 并行处理/ 方法/ 少/ 很多/ ,/ 与/ 通常/ 情况/ 下/ 并行处理/ 效率/ 更/ 高/ 的/ 认知/ 大相径庭/ ./ 结合/ 该/ 实例/ ,/ 我们/ 分析/ 原因/ 是/ :/ 串行/ 方法/ 虽然/ 增加/ 了/ 同步/ 和/ 切换/ 开销/ ,/ 但/ 由于/ 增加/ 了/ 限制/ 条件/ “/ 若/ 前面/ 服务/ 的/ 返回/ 结果/ 不合/ 要求/ ,/ 则/ 不/ 执行/ 后面/ 的/ 服务/ ”/ ,/ 使得/ 部分/ 正例/ 和/ 全部/ 的/ 反例/ 都/ 不用/ 执行/ 对/ Lodge/ 的/ 测试/ ,/ 从而/ 导致/ 其/ 花费/ 时间/ 小于/ 并行处理/ 方法/ 所/ 消耗/ 的/ 时间/ ./ (/ 3/ )/ 冗余/ 测试用例/ (/ 输入/ 不同/ ,/ 输出/ 相同/ )/ 在/ 测/ Page11/ 试用/ 例/ 集中/ 占有/ 很大/ 的/ 比例/ (/ 本例/ 中/ ,/ 71.67/ %/ 的/ 正例/ 和/ 100/ %/ 的/ 负例/ 均/ 为/ 冗余/ 测试用例/ ,/ 即/ 输出/ 为空/ 或/ 出错/ 信息/ )/ ./ 在/ 某些/ 情况/ 下/ ,/ 通过/ 增加/ 一些/ 限制/ 条件/ (/ 本例/ 是/ 并行/ 改/ 串行/ )/ ,/ 可以/ 约简/ 冗余/ ,/ 避免/ 测试/ 资源/ 的/ 浪费/ ./ 6/ 结束语/ Web/ 服务/ 涉及/ 到/ 开发者/ 、/ 提供者/ 、/ 集成/ 者/ 、/ 第三方/ 确认/ 者/ 和/ 用户/ 等/ 多方/ ,/ 通常/ 只/ 提供/ 接口/ 信息/ 给/ 用户/ ,/ 一般/ 进行/ 黑盒/ 测试/ ./ 为/ 提供/ 功能/ 更/ 复杂/ 的/ 服务/ ,/ 需要/ 多个/ 服务/ 的/ 组合/ ,/ 但/ 由于/ 不能/ 充分/ 信任/ 各/ 原子/ 服务/ 并且/ 多个/ 服务/ 组合/ 时会/ 带来/ 流程/ 冲突/ 、/ 数据/ 冲突/ 等/ 问题/ ,/ 目前/ Web/ 服务/ 测试/ 在/ 模型表示/ 、/ 测试方法/ 等/ 方面/ 还/ 需要/ 进一步/ 的/ 研究/ ./ 在/ 现有/ 工作/ 的/ 基础/ 上/ ,/ 通过/ 用户/ 需求/ 来/ 驱动/ Web/ 测试/ 工作/ ,/ 以/ 更好/ 地/ 满足/ 终端用户/ 的/ 需求/ 并/ 提升/ 测试/ 工作/ 的/ 效率/ ./ 即/ 首先/ 建立/ 了/ 用户/ 需求/ 特征/ 模型/ ,/ 分/ 层次/ 、/ 多维度/ 地/ 刻画/ 用户/ 需求/ ,/ 将/ 笼统/ 抽象/ 的/ 目标/ 需求/ 逐渐/ 分解/ 精/ 化为/ 具体/ 明确/ 的/ 原子/ Web/ 服务/ ,/ 层次/ 关系/ 、/ 控制结构/ 、/ 约束条件/ 的/ 引入/ 使得/ 模型/ 能/ 真正/ 反映/ 用户/ 的/ 需求/ 并/ 有/ 一定/ 的/ 可扩展性/ ,/ 从而/ 可以/ 很/ 好/ 地/ 将/ 需求/ 和/ 实现/ 联系/ 起来/ ;/ 其次/ ,/ 根据/ 用户/ 需求/ 模型/ 组织/ 、/ 实施/ 测试/ ,/ 分别/ 对照/ 目标/ 级/ 需求/ 、/ 服务/ 组合/ 需求/ 以及/ 原子/ 服务/ 需求/ ,/ 进行/ 测试用例/ 的/ 生成/ 和/ 选择/ ,/ 即/ 只/ 覆盖/ 用户/ 关注/ 的/ 语句/ 或/ 路径/ ,/ 有效/ 提高/ 测试/ 效率/ ,/ 既/ 能/ 覆盖/ 需求/ 又/ 能/ 覆盖/ 实现/ (/ 服务/ 组合/ 、/ 路径/ 、/ 数据流/ 等/ )/ ;/ 另外/ ,/ 利用/ 用户/ 需求/ 模型/ 中/ 的/ 依赖/ 关系/ ,/ 在/ 用户/ 需求/ 发生/ 变动/ 时/ ,/ 能/ 迅速/ 定位/ 到/ 服务/ 的/ 相关/ 路径/ 、/ 元素/ 和/ 变量/ ,/ 从而/ 有利于/ 回归/ 测试/ 的/ 用例/ 选择/ 和/ 优化/ ;/ 最终/ ,/ 通过/ 行程/ 安排/ 实例/ 系统地/ 展现/ 我们/ 在/ 模型表示/ 、/ 测试用例/ 生成/ 选择/ 、/ 回归/ 测试/ 等/ 方面/ 的/ 工作/ ,/ 表明/ 用户/ 需求/ 驱动/ 的/ Web/ 服务/ 测试/ 有/ 良好/ 的/ 实施/ 效果/ ./ 在/ 后期/ 工作/ 中/ ,/ 将/ 进一步/ 完善/ 我们/ 的/ 原型/ 工具/ ,/ 在/ 图形界面/ 表示/ 、/ 算法/ 的/ 通用性/ 研究/ 、/ 实例/ 的/ 规模/ 和/ 体现/ 度/ 等/ 方面/ 都/ 力争/ 更进一步/ ./ 

