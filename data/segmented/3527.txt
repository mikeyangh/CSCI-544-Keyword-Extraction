Page1BPEL/ 流程/ 间/ 死锁/ 检测/ 研究/ 黄俊飞/ 杨学红/ 宫云战/ (/ 北京邮电大学/ 网络/ 与/ 交换/ 技术/ 国家/ 重点/ 实验室/ 北京/ 100876/ )/ 摘要/ BPEL/ 流程/ 的/ 正确性/ 问题/ 越来越/ 受到/ 广泛/ 关注/ ./ 作为/ 一种/ 支持/ 并发/ 机制/ 的/ Web/ 服务/ 组合/ 语言/ ,/ 不/ 正确/ 地/ 使用/ 并发/ 和/ 同步操作/ 或/ 不/ 正确/ 的/ 交互/ 都/ 可能/ 会/ 使/ 单一/ 流程/ 内部/ 或/ 流程/ 间/ 产生/ 死锁/ ./ 死锁/ 问题/ 是/ 一类/ 常见/ 的/ 并发/ 缺陷/ ,/ 可能/ 严重/ 影响/ 系统/ 的/ 可靠性/ 与/ 可用性/ ./ 更为严重/ 的/ 是/ ,/ 对于/ 业务流程/ 组合/ 这种/ 可靠性/ 和/ 安全性/ 要求/ 极高/ 的/ 系统/ ,/ 一旦/ 发生/ 死锁/ ,/ 将会/ 对/ 业务/ 系统/ 产生/ 严重/ 的/ 后果/ ./ 为此/ 作者/ 在/ 分析/ BPEL/ 特性/ 和/ 死锁/ 特征/ 的/ 基础/ 上/ ,/ 提出/ 了/ 一种/ 可/ 在/ BPEL/ 流程/ 设计阶段/ 检测/ 流程/ 死锁/ 的/ 方法/ ,/ 从而/ 提高/ 流程/ 的/ 可靠性/ ,/ 减少/ 系统/ 的/ 维护/ 代价/ ./ 文中/ 提出/ 了/ 一种/ 从/ 全局/ 出发/ 进行/ 分析/ 的/ 方法/ ,/ 结合/ 流程/ 间/ 执行/ 的/ 上下文/ 信息/ ,/ 可以/ 有效/ 检测/ 流程/ 间/ 的/ 通信/ 死锁/ ,/ 该/ 方法/ 也/ 适用/ 于/ 其它/ 与/ 流程/ 执行/ 上下文/ 相关/ 的/ 缺陷/ 检测/ ./ 关键词/ BPEL/ ;/ 死锁/ ;/ 流程/ 摘要/ ;/ 组合/ 服务/ 1/ 引言/ 操作系统/ 中/ “/ 死锁/ ”/ 的/ 概念/ 是/ 指/ :/ 两个/ 或/ 多个/ 并发/ 进程/ 各自/ 占有/ 某种/ 资源/ 而/ 又/ 都/ 等待/ 别的/ 进程/ 释放/ 它们/ 所/ 占有/ 的/ 资源/ ./ 死锁/ 产生/ 的/ 原因/ 包括/ :/ 一是/ 系统/ Page2/ 见到/ 但/ 又/ 不可/ 回避/ 的/ 系统/ 特性/ ./ 在/ 并发/ 系统/ 的/ 运行/ 过程/ 中/ ,/ 为/ 保证系统/ 的/ 运行/ 安全可靠/ ,/ 必须/ 有效/ 地/ 解决/ 死锁/ 问题/ ./ 要/ 想/ 有效/ 地/ 解决/ 死锁/ ,/ 首要/ 的/ 任务/ 就是/ 发现/ 死锁/ ./ 因此/ ,/ 死锁/ 检测/ 十分必要/ ./ 然而/ BPEL/ 的/ 特殊性/ 也/ 决定/ 了/ 这些/ 传统/ 的/ 死锁/ 检测/ 方法/ 很难/ 应用/ 于/ BPEL/ 的/ 死锁/ 检测/ ./ 在/ 基于/ BPEL/ 的/ 组合/ 流程/ 中/ ,/ 各/ 参与/ 的/ 伙伴/ 服务/ 与/ 流程/ 之间/ 通过/ SOAP/ 消息/ 进行/ 通信/ ,/ 因此/ 消息/ 接收/ 的/ 正确性/ 是/ 流程/ 死锁/ 的/ 一个/ 最为/ 突出/ 要素/ ,/ 它/ 可/ 使/ 整个/ 流程/ 瘫痪/ ,/ 无法/ 进行/ 自动化/ 组合/ 服务/ 执行/ ./ 从/ 目前/ 来看/ ,/ 解决/ BPEL/ 流程/ 死锁/ 的/ 数学/ 工具/ 有图/ 理论/ 方法/ 、/ Petri/ 网/ 方法/ 和/ 进程/ 代数/ 方法/ 等/ ,/ 图论/ 尽管/ 能够/ 检测/ 出/ 控制/ link/ 造成/ 的/ 控制/ 依赖/ 死锁/ ,/ 但/ 不能/ 表达/ 系统/ 的/ 动态/ 运行/ 行为/ ./ 采用/ Petri/ 网/ 方法/ 能够/ 表达/ 流程/ 动态/ 运行/ 行为/ ,/ 并且/ 能/ 检测/ 出/ 单一/ 流程/ 内部/ 的/ 死锁/ ,/ 但/ 当前/ 的/ Petri/ 死锁/ 检测/ 方法/ ,/ 并/ 没有/ 说明/ 如何/ 处理/ 流程/ 间/ 的/ 死锁/ ./ 进程/ 代数/ 的/ 方法/ 采用/ 移动/ 工作台/ 也/ 只能/ 检测/ 出/ 单一/ 流程/ 内部/ 的/ 控制/ 依赖/ 死锁/ ,/ 并且/ 这些/ 方法/ 很难/ 应用/ 于/ 大规模/ 的/ 流程/ 验证/ ./ BPEL/ 流程/ 通过/ invoke/ 活动/ 调用/ 参与/ 的/ 伙伴/ 服务/ ,/ 该/ 调用/ 方法/ 与/ 传统/ 程序语言/ 中/ 的/ 函数调用/ 有/ 相似之处/ ./ 传统/ 的/ 函数/ 间/ 分析/ 通过/ 计算/ 函数/ 摘要/ [/ 7/ -/ 8/ ]/ 的/ 方法/ 提取/ 函数/ 信息/ ,/ 在/ 具体/ 的/ 函数调用/ 使用/ 函数/ 摘要/ 进行/ 替换/ ./ 与/ 此/ 类似/ ,/ 我们/ 提出/ 了/ 流程/ 摘要/ 的/ 概念/ ,/ 提高/ 静态/ 流程/ 间/ 死锁/ 检测/ 的/ 可靠性/ 和/ 完备/ 性/ ./ 2BPEL/ 的/ 同步/ 和/ 异步/ 交互/ BPEL/ 流程/ 与/ 外部/ 流程/ 之间/ 的/ 交互/ 有/ 两种/ 方式/ :/ 同步/ 和/ 异步/ ./ 如果/ 某/ 业务流程/ 请求/ 能够/ 在/ 较/ 短/ 的/ 时间/ 内/ 被/ 处理/ ,/ 则/ 流程/ 可以/ 使用/ 同步/ 机制/ 与/ 外部/ 服务/ 进行/ 通信/ ,/ 即/ 请求/ -/ 响应/ 操作/ ./ 通常/ 有/ 如下/ 两种/ 方式/ 进行/ 同步操作/ ./ (/ 1/ )/ 通过/ receive/ 和/ reply/ 活动/ 对/ 实现/ ,/ 如/ 流程/ 使用/ receive/ 活动/ 等待/ 客户端/ 的/ 购买/ 订单/ 流程/ ,/ 然后/ 使用/ 同步/ 的/ reply/ 活动/ 发送/ 发票/ 信息/ ./ 〈/ receivepartnerLink/ =/ “/ customer/ ”/ portType/ =/ “/ purchaseOrderPT/ ”/ operation/ =/ “/ sendPurchaseOrder/ ”/ variable/ =/ “/ PO/ ”/ // 〉/ 〈/ replypartnerLink/ =/ “/ customer/ ”/ portType/ =/ “/ purchaseOrderPT/ ”/ operation/ =/ “/ sendInvoke/ ”/ variable/ =/ “/ Invoice/ ”/ // 〉/ ./ (/ 2/ )/ 使用/ invoke/ 活动/ 实现/ 服务/ 的/ 同步/ 调用/ ,/ 如/ 〈/ invokeinputVariable/ =/ “/ request/ ”/ name/ =/ “/ InvokeLoanAssessor/ ”/ operation/ =/ “/ check/ ”/ outputVariable/ =/ “/ risk/ ”/ partnerLink/ =/ “/ assessor/ ”/ 银行贷款/ 中/ 调用/ 风险/ 评估/ 的/ 伙伴/ 服务/ ./ portType/ =/ “/ riskAssessmentPT/ ”/ // 〉/ ./ BPEL/ 还/ 支持/ 长时间/ 的/ 业务/ 交互/ ,/ 通过/ 异步/ 消息/ 交换/ 实现/ ,/ 例如/ 上例/ 中/ 的/ reply/ 活动/ 可用/ 异步/ 交互/ 的/ invoke/ 活动/ 取代/ ./ 〈/ invokepartnerLink/ =/ “/ customer/ ”/ portType/ =/ “/ InvoiceCallbackPT/ ”/ operation/ =/ “/ sendInvoice/ ”/ variable/ =/ “/ Invoice/ ”/ // 〉/ ./ 业务流程/ 在/ 执行/ 过程/ 中/ ,/ 可能/ 被/ 多次/ 实例/ 化/ ,/ 因此/ 必须/ 要/ 确保/ 异步/ 交互/ 的/ 返回/ 消息/ 发送到/ 正确/ 的/ 业务流程/ 实例/ ./ BPEL/ 提供/ 了/ 应用程序/ 级/ 的/ 机制/ 实现/ 了/ 此/ 功能/ ,/ 定义/ 了/ 关联/ 集合/ 属性/ ,/ 关联/ 集合/ 在/ 其/ 语义上/ 类似/ 于/ 延迟/ 绑定/ 的/ 常数/ ,/ 关联/ 集合/ 的/ 绑定/ 由/ 特别/ 标记/ 的/ 消息/ 发送/ 或/ 接收/ 操作/ 来/ 触发/ ./ 比如/ 在/ 一个/ 旅行/ 订票/ 流程/ 中/ ,/ 当/ 流程/ 启动/ 之后/ ,/ 用户/ 需要/ 能够/ 查询/ 该/ 流程/ 的/ 状态/ ,/ 并/ 能/ 取消/ 该/ 流程/ ,/ 这/ 就/ 需要/ 关联/ 集合/ 的/ 支持/ 来/ 确保/ 后续/ 的/ 请求/ 消息/ 能够/ 绑定/ 到/ 相同/ 的/ 流程/ 实例/ 中/ ./ 3BPEL/ 死锁/ 分析/ 3.1/ BPEL/ 死锁/ 特征/ 死锁/ 是/ 指/ 系统/ 处于/ 这样/ 的/ 状态/ :/ 任何/ 一个/ 进程/ (/ 或/ 线程/ )/ 都/ 保持/ 现有/ 的/ 状态/ 且/ 无法/ 前进/ ./ 对/ 死锁/ 的/ 认识/ 由来已久/ ,/ 最早/ 是/ Dijkstra/ 在/ 1965/ 年/ 提出/ 的/ [/ 2/ ]/ ./ 后来/ Coffman/ 又/ 提出/ 了/ 死锁/ 发生/ 的/ Coffman/ 条件/ [/ 3/ ]/ ,/ 但/ 该/ 条件/ 只是/ 死锁/ 发生/ 的/ 必要条件/ ,/ 因为/ 即使/ 系统/ 不/ 满足/ 这些/ 条件/ ,/ 可能/ 也/ 发生/ 死锁/ ./ 例如/ 一个/ 系统/ 内有/ 两个/ 进程/ 都/ 处于/ 等待/ 状态/ ,/ 它们/ 的/ 推进/ 都/ 依赖于/ 对方/ 进程/ 的/ 资源/ ,/ 这时/ 就/ 产生/ 了/ 死锁/ ./ 在/ Web/ 服务/ 世界/ 里/ ,/ 如果/ 流程/ 等待/ 的/ 通信/ 消息/ 永远/ 不会/ 发生/ ,/ 也/ 可/ 认为/ 发生/ 了/ 死锁/ ,/ 即/ 流程/ 的/ 执行/ 处于/ 一种/ 无限/ 等待/ 状态/ ,/ 它/ 的/ 推进/ 需要/ 伙伴/ 发送/ 相应/ 的/ SOAP/ 消息/ ,/ 此时/ 的/ 伙伴/ 服务/ 可能/ 由于/ 某种原因/ 已经/ 结束/ 而/ 没有/ 返回/ 任何/ SOAP/ 消息/ ,/ 也就是说/ 流程/ 等待/ 未来/ 时刻/ 内/ 不会/ 发生/ 的/ 事件/ ,/ 这样/ 就/ 造成/ 了/ 流程/ 处于/ 一种/ 死锁/ 状态/ ./ 因此/ 死锁/ 是/ 流程/ 的/ 一种/ 缺陷/ 和/ 错误/ ,/ 不同于/ 以往/ 的/ 并发/ 语言/ ,/ BPEL/ 死锁/ 可能/ 存在/ 于/ 单一/ 流程/ 内部/ ,/ 也/ 可能/ 存在/ 于/ 不同/ 的/ 流程/ 之间/ 的/ 消息/ 通信/ ./ 下面/ 对/ BPEL/ 流程/ 的/ 死锁/ 进行/ 分类/ ./ 3.1/ ./ 1/ 单一/ 流程/ 内部/ 的/ 死锁/ BPEL/ 使用/ link/ 进行/ 并发/ 活动/ 之间/ 的/ 同步/ ,/ 不/ 正确/ 的/ 使用/ link/ 结构/ ,/ 会/ 使/ 流程/ 中/ 存在/ 死锁/ :/ 如果/ BPEL/ 流程/ 存在/ 控制/ 依赖/ 环/ ,/ 说明/ 流程/ 中/ 的/ link/ 使用/ 引入/ 依赖/ 环路/ ,/ 也/ 就是/ 流程/ 中/ 存在/ 控制/ 依赖/ 死锁/ ,/ Page3/ 当前/ 大多数/ BPEL/ 开发/ 环境/ 都/ 支持/ link/ 产生/ 的/ 控制/ 依赖/ 死锁/ 的/ 验证/ ,/ 如/ ActiveBPEL/ ./ 图/ 1/ 给出/ 了/ 3/ 种/ 不同/ 的/ 控制/ 依赖/ 死锁/ 结构/ ,/ 在/ 与/ 这些/ link/ 连接/ 的/ 活动/ 中/ ,/ 每/ 一个/ 活动/ 都/ 在/ 等待/ 集合/ 中/ 另/ 一/ 活动/ 的/ 结束/ 才/ 开始/ 执行/ ,/ 所有/ 活动/ 都/ 处于/ 无/ 终止/ 的/ 等待/ 状态/ ,/ 从而/ 导致/ 并发/ 结构/ 的/ 不可/ 完成/ ./ 3.1/ ./ 2/ 流程/ 间/ 的/ 消息/ 通信/ 死锁/ 如果/ 两个/ 流程/ 间/ 的/ 交互/ 活动/ 形成/ 环/ ,/ 如图/ 2/ 所示/ ,/ 虚线/ 代表/ 的/ 是/ 流程/ 间/ 的/ 通信/ 依赖/ 造成/ 的/ 环/ ,/ 左边/ 的/ 流程/ 等待/ 右面/ order/ 发送/ 相应/ 的/ 消息/ ,/ 然后/ 发送/ confirm/ 消息/ ;/ 而/ 右面/ 的/ 流程/ 等待/ 左面/ 流程/ 先/ 发送/ confirm/ 消息/ ,/ 然后/ 再/ 发送/ order/ 消息/ ./ 由于/ 通信/ 依赖/ 形成/ 了/ 循环/ 等待/ 环/ ,/ 说明/ 流程/ 间/ 存在/ 死锁/ ./ 流程/ 间/ 图/ 3/ 订票/ 流程/ 实例/ 该/ 订票/ 流程/ 包括/ 两个/ 伙伴/ 外部/ 流程/ ,/ 虚线/ 表示/ 流程/ 间/ 的/ 通信/ ./ 整个/ 业务流程/ 的/ 执行/ 过程/ 是/ :/ 首先/ 业务流程/ (/ TripOrder/ )/ 接收/ 到/ 一个/ 外部/ 请求/ (/ TripOr/ -/ derMsg/ )/ ,/ 再/ 根据/ 接收/ 到/ 的/ 请求/ 消息/ 调用/ Web/ 服务/ 的/ 资源/ 循环/ 等待/ 环/ 与/ 流程/ 内部/ 的/ 控制/ 依赖/ 死锁/ 环/ 类似/ ,/ 但是/ 环/ 并非/ 流程/ 死锁/ 的/ 充要条件/ ,/ 如果/ 流程/ 内部/ 不/ 存在/ 控制/ 依赖/ 环/ ,/ 或/ 流程/ 间/ 不/ 存在/ 通信/ 依赖/ 环/ ,/ 仍然/ 可能/ 导致/ 流程/ 间/ 存在/ 死锁/ ./ 在/ 流程/ 间/ 的/ 通信/ 过程/ 中/ ,/ 必须/ 要/ 确保/ 流程/ 中/ 的/ 每/ 一个/ receive/ 活动/ 都/ 能够/ 成功/ 地/ 接收/ 到/ 伙伴/ 流程/ 提供/ 的/ 输入/ 消息/ (/ 主要/ 是/ 对/ 异步/ 调用/ 而言/ )/ ,/ 否则/ 将会/ 导致/ 流程/ 发生/ 死锁/ ./ BPEL/ 通过/ SOAP/ 消息/ 与/ 外部/ 伙伴/ Web/ 服务/ 进行/ 交互/ ,/ 参与/ 交互/ 的/ Web/ 服务/ 可能/ 是/ 简单/ 的/ 原子/ Web/ 服务/ ,/ 也/ 可能/ 是/ 组合/ Web/ 服务/ ,/ 如图/ 3/ 所示/ 是/ 一个/ 存在/ 死锁/ 的/ 流程/ 间/ 交互/ 实例/ ./ (/ AirlineTicketOrder/ )/ ,/ 最后/ 将/ 结果/ (/ RtnTripMag/ )/ 返回/ 给/ 请求者/ (/ CustomerRequsetHanding/ )/ ,/ 从而/ 结束/ 整个/ 过程/ ./ 注意/ ,/ 在/ 流程/ 接收/ 到/ TripOrder/ 消息/ TripOrderMag/ 后/ ,/ 一方面/ ,/ 流程/ TripOrder/ 将/ 接受/ Page4/ 到/ 的/ 消息/ 发送到/ AirlineTicketOrder/ 流程/ ;/ 另一方面/ ,/ 活动/ GenerateItinerary/ 为/ 客户/ 返回/ 一个/ 恰当/ 的/ 旅行/ 计划/ ./ 另外/ ,/ 当/ 活动/ CheckUserCreditCard/ 判定/ 客户/ 是/ 一个/ 可靠/ 用户/ 时/ ,/ 通过/ IssueeTickets/ 发送/ 一个/ 数据/ RtnTicketMag/ 给/ TripOrder/ 流程/ ,/ 从而/ 使/ IssueIterary/ 能够/ 执行/ ,/ 结束/ 整个/ 订单/ 流程/ ./ 通过/ 对/ 上述/ 流程/ 的/ 分析/ 可知/ ,/ 当/ 订单/ 流程/ 从/ 一个/ 不/ 可靠/ 的/ 客户/ 那里/ 接收/ 到/ 消息/ ,/ 并且/ AirlineTicket/ -/ Order/ 活动/ 对/ 用户/ 的/ 信用度/ 进行/ 评价/ ,/ 使得/ 该/ 伙伴/ 流程/ 不能/ 返回/ TicketOrder/ 流程/ 需要/ 的/ 消息/ ,/ 从而/ 使/ ReceiveItinerary/ 和/ GetConfirmation/ 活动/ 处于/ 无限/ 等待/ 状态/ ./ 我们/ 将/ 这种/ 导致/ 流程/ 处于/ 无限/ 等待/ 的/ 现象/ 也/ 称之为/ 死锁/ ./ 单一/ 流程/ 内部/ 的/ 死锁/ 通过/ 判断/ link/ 连接/ 的/ 目标/ 活动/ 是否/ 包含/ 在/ 其/ 直接/ 前驱/ 活动/ 中/ 很/ 容易/ 进行/ 检测/ ./ 如果/ 是/ ,/ 则/ 说明/ 存在/ 死锁/ ./ 而/ 流程/ 间/ 的/ 死锁/ 则/ 相对/ 复杂/ ,/ 流程/ 间/ 的/ 循环/ 等待/ 死锁/ 也/ 可以/ 通过/ 建立/ 流程/ 间/ 的/ 依赖图/ 判断/ 是否/ 存在/ 环而/ 检测/ ,/ 但/ 对于/ 图/ 3/ 所示/ 的/ 消息/ 接收/ 导致/ 的/ 死锁/ ,/ 则/ 不能/ 简单/ 地/ 通过/ 环/ 的/ 形式/ 检测/ ,/ 需要/ 有/ 新/ 的/ 检测/ 方法/ ./ 本章/ 在/ 基于/ 缺陷/ 的/ BPEL/ 静态/ 检测/ 过程/ 中/ ,/ 通过/ 引入/ “/ 流程/ 摘要/ ”/ 来/ 解决/ 流程/ 间通信/ 敏感/ 的/ 缺陷/ 问题/ ./ 3.2/ 流程/ 摘要/ 对/ 组合/ 流程/ 的/ 分析/ 包括/ 两/ 部分/ :/ 单个/ 流程/ 内/ 的/ 分析/ 以及/ 流程/ 间/ 的/ 分析/ ./ 流程/ 间/ 的/ 分析/ 可以/ 从/ 两个/ 方面/ 进行/ 研究/ :/ 上下文/ 敏感/ 和/ 上下文/ 不/ 敏感/ 分析/ ./ 上下文/ 敏感/ 的/ 分析方法/ 需要/ 根据/ 流程/ 调用/ 上下文/ 信息/ 计算/ 流程/ 调用/ 结果/ ./ 由于/ 组合/ 流程/ 中/ 的/ 伙伴/ Web/ 服务/ 的/ 具体/ 实现/ 细节/ 是/ 隐藏/ 的/ 、/ 对外/ 透明/ 的/ ,/ 因此/ 进行/ 上下文/ 敏感/ 的/ 流程/ 间/ 分析/ 需要/ 对/ 调用/ 流程/ 进行/ 抽象/ ./ 所谓/ 流程/ 摘要/ 和/ 传统/ 程序语言/ 分析/ 中/ 的/ 函数/ 摘要/ 有/ 异曲同工/ 的/ 作用/ ,/ 流程/ 间/ 敏感/ 方法/ 根据/ 不同/ 组合/ 流程/ 调用/ 的/ 上下文/ 信息/ 分别/ 计算/ 流程/ 的/ 调用/ 效果/ ,/ 非/ 流程/ 间/ 敏感/ 方法/ 则/ 不/ 区分/ 流程/ 间/ 的/ 调用/ 信息/ ./ 本文/ 提出/ 一种/ 基于/ 流程/ 摘要/ 的/ 流程/ 间/ 敏感/ 的/ 分析方法/ ,/ 将/ 流程/ 间/ 的/ 缺陷/ 检测/ 问题/ 转化/ 为/ 流程/ 内部/ 的/ 缺陷/ 检测/ 问题/ ./ 流程/ 摘要/ 是/ 对/ 流程/ 的/ 部分/ 抽象/ ,/ 通常/ 只/ 描述/ 和/ 缺陷/ 相关/ 的/ 信息/ ./ 不同/ 的/ 缺陷/ 需要/ 记录/ 不同/ 的/ 流程/ 摘要/ ./ 流程/ 间/ 分析/ 的/ 一个/ 非常/ 重要/ 的/ 属性/ 是/ 确保/ 流程/ 间/ 交互/ 不/ 存在/ 死锁/ ,/ 因为/ 流程/ 间/ 的/ 相互/ 阻塞/ 的/ 现象/ 是/ 不/ 允许/ 的/ ./ Web/ 服务/ 通过/ WSDL/ 向/ 外部/ 暴露/ 其所能/ 提供/ 的/ 功能/ ,/ BPEL/ 作为/ 一种/ 组合/ 服务/ ,/ 对外/ 也/ 通过/ WSDL/ 供/ 其它/ 服务/ 调用/ ./ 除此之外/ 不/ 提供/ 任何/ 的/ 服务/ 实现/ 细节/ ,/ 对/ 用户/ 来说/ 是/ 透明/ 的/ ./ 如图/ 3/ 中/ 的/ 例子/ ,/ 如果/ 不/ 考虑/ 流程/ 内部/ 的/ 实现/ 细节/ 对/ 流程/ 调用/ 间/ 的/ 影响/ ,/ 伙伴/ 流程/ AirlineTicketOrder/ 总会/ 向/ 主流程/ 中/ 返回/ 消息/ ,/ 这样/ 就/ 导致/ 存在/ 一个/ 死锁/ 的/ 漏报/ 问题/ ./ 基于/ 缺陷/ 的/ 流程/ 间/ 静态/ 分析/ ,/ 根据/ 不同/ 的/ 分析/ 目标/ 属性/ (/ 也/ 成/ 缺陷/ 特征/ )/ 生成/ 不同/ 的/ 流程/ 摘要/ 信息/ ./ 流程/ 摘要/ 可以/ 定义/ 为/ 三元组/ PSummary/ =/ 〈/ precondition/ ,/ defect/ -/ feature/ ,/ postcondition/ 〉/ :/ 包含/ 了/ 调用/ 前/ 上下文/ 环境/ 需/ 满足/ 信息/ ,/ 即/ 调用/ 前应/ 检查/ 并/ 满足/ 的/ 前置条件/ 集合/ ;/ 包含/ 调用/ 后/ 对/ 上下文/ 环境/ 所/ 带来/ 的/ 影响/ 信息/ 的/ 后置/ 条件/ 集合/ ;/ 包含/ 和/ 分析/ 目标/ 属性/ 相关/ 的/ 缺陷/ 特性/ 信息/ 集合/ ./ 每/ 一个/ 前置条件/ 、/ 后置/ 条件/ 、/ 函数/ 特性/ 信息/ 都/ 带有/ 相应/ 的/ 条件/ 信息/ ./ 同样/ 采用/ 了/ 变量/ 的/ 抽象/ 取值/ 区间/ 进行/ 表示/ ./ 定义/ 1/ ./ 缺陷/ 特征/ (/ df/ )/ ./ 给定/ 缺陷/ 模式/ fsm/ ,/ 它/ 可以/ 检测/ 某一/ 程序/ 属性/ feature/ 是否/ 违反/ 了/ 程序/ 语法/ 或/ 语义/ 规则/ ,/ 该/ feature/ 对应/ 的/ 程序/ 变量/ 即/ 为/ 缺陷/ 模式/ fsm/ 的/ 缺陷/ 特征/ ,/ 即为/ df/ (/ fsm/ )/ ./ 缺陷/ 特征/ 可以/ 理解/ 为/ 缺陷/ 检测/ 是否/ 与/ 程序/ 中/ 某个/ 变量/ 相关/ ,/ 例如/ 初始化/ 变量/ (/ UIV/ )/ 模式/ 必然/ 与/ 一个/ 变量/ 相关/ ,/ Link/ 非法/ 使用/ (/ IUL/ )/ 模式/ 必然/ 与/ 一个/ 同步/ link/ 相关/ ,/ 流程/ 间/ 死锁/ 由于/ 等待/ 的/ 消息/ 无法/ 到达/ 而/ 处于/ 无限/ 等待/ 状态/ ./ 这里/ 的/ 消息/ 也/ 就是/ BPEL/ 变量/ ,/ 因此/ 也/ 是/ 与/ 变量/ 相关/ 的/ ./ 在/ 基于/ 缺陷/ 的/ 流程/ 间/ 死锁/ 检测/ 过程/ 中/ ,/ 当/ 遇到/ 流程/ (/ 在/ 不/ 引起/ 混淆/ 的/ 情况/ 下/ ,/ 也/ 称为/ 服务/ )/ 调用/ 时/ ,/ 它/ 只/ 关心/ 该/ 被/ 调/ 流程/ 的/ 执行/ 是否/ 会/ 引起/ 当前/ 的/ 缺陷/ 状态/ 发生变化/ ./ 例如/ 对于/ 流程/ 间通信/ 死锁/ (/ Inter/ -/ ProcessCommunicationDeadlock/ ,/ IPCD/ )/ 来说/ ,/ 它/ 只/ 关心/ 被/ 调/ 流程/ 是否/ 会/ 返回/ 调用/ 流程/ 等待/ 的/ 消息/ ./ 对于/ UIV/ 来说/ ,/ 只/ 关心/ 是否/ 对/ 使用/ 的/ 消息/ 进行/ 了/ 有效/ 赋值/ ./ 也就是说/ 流程/ 摘要/ 与/ 具体/ 的/ 检测/ 缺陷/ 相关/ ./ 3.3/ 基于/ 流程/ 摘要/ 的/ 死锁/ 检测/ 基于/ BPEL/ 的/ 服务/ 组合/ 通过/ 发送/ SOAP/ 消息/ 调用/ 提供/ 具体/ 功能/ 的/ 服务/ (/ 单一/ Web/ 服务/ 或/ 组合/ Web/ 服务/ )/ ,/ 被/ 调/ 服务/ 的/ 具体/ 实现/ 细节/ 对/ 调用/ 流程/ 来说/ 是/ 透明/ 的/ ,/ 因此/ 为了/ 准确/ 获得/ 流程/ 调用/ 的/ 上下文/ 信息/ ,/ 根据/ 抽象/ 解释/ 理论/ ,/ 可以/ 通过/ 流程/ 摘要/ 对/ 服务/ 调用/ 的/ 上下文/ 信息/ 和/ 约束/ 信息/ 进行/ 抽象/ ./ 对/ 组合/ 中/ 的/ 每/ 一个/ BPEL/ 流程/ 进行/ 单独/ 分析/ 的/ 同时/ ,/ 生成/ 该/ 流程/ 相应/ 的/ 流程/ 摘要/ ,/ 当/ 流程/ 被/ 调用/ 时/ ,/ 可用/ 流程/ 摘要/ 进行/ 具体/ 的/ 分析/ ./ 3.3/ ./ 1/ 流程/ 依赖/ 关系/ 若/ 流程/ A/ 调用/ 了/ 流程/ B/ ,/ 则/ 说/ 流程/ A/ 依赖于/ 流程/ B/ ,/ 这种/ 依赖/ 关系/ 可以/ 用/ 调用/ 图/ 的/ 形式/ 进行/ 表示/ ,/ Page5/ 如图/ 3/ 中/ 流程/ 间/ 的/ 调用/ 关系/ 可以/ 用图/ 4/ 中/ 调用/ 关系/ 进行/ 表示/ ./ 流程/ 摘要/ 是/ 对/ 流程/ 内容/ 的/ 抽象/ ,/ 尽管/ 使用/ 流程/ 摘要/ 比/ 直接/ 使用/ 其/ 提供/ 的/ WSDL/ 接口/ 信息/ 相对/ 复杂/ ,/ 但/ 却/ 可以/ 提高/ 流程/ 的/ 检测/ 精度/ ,/ 比如/ 上面/ 提到/ 的/ 流程/ 间/ 的/ 通信/ 死锁/ ./ 通过/ 流程/ 依赖图/ 可以/ 获得/ 流程/ 调用/ 之间/ 需要/ 满足/ 的/ 条件/ ./ 3.3/ ./ 2/ 流程/ 摘要/ 分析/ 首先/ 按照/ 流程/ 调用/ 关系/ 获得/ 流程/ 调用/ 的/ 拓扑/ 关系/ ,/ 然后/ 按照/ 拓扑/ 逆序/ 的/ 方法/ 计算/ 每/ 一个/ 流程/ 的/ 流程/ 摘要/ ,/ 流程/ 摘要/ 的/ 计算/ 取决于/ 待/ 检测/ 的/ 缺陷/ 特征/ ./ 例如/ 对于/ 未/ 初始化/ 变量/ 缺陷/ 来说/ ,/ 图/ 3/ 中/ ,/ AirlineTicketOrder/ 流程/ 前置条件/ (/ pre/ -/ condition/ )/ ,/ 即/ {/ TicketOrderMsg/ :/ [/ initialized/ ]/ }/ ./ 而/ 对/ 通信/ 死锁/ 而言/ ,/ 为了/ 避免/ 死锁/ ,/ 正确/ 返回/ 调用/ 流程/ 等待/ 的/ 信息/ ,/ 需要/ 保证/ 客户/ 的/ 风险/ 等级/ 是/ 可靠/ 的/ ,/ 因此/ pre/ -/ condition/ =/ {/ risklevel/ :/ [/ reliable/ ]/ }/ ./ 也就是说/ 当/ TripOrder/ 流程/ 调用/ AirlineTicketOrder/ 流程/ 时/ ,/ 检查/ 发送/ 的/ SOAP/ 消息/ 中/ 相应/ 客户/ 的/ 风险/ 等级/ ,/ 如果/ 是非/ 可靠/ 用户/ ,/ 则/ 会/ 导致/ 调用/ 该/ 流程/ 时/ 产生/ 流程/ 间通信/ 死锁/ 缺陷/ ./ 也就是说/ 按照/ 待/ 检测/ 缺陷/ 特征/ (/ defect/ -/ feature/ )/ 产生/ 前置条件/ ./ 为了/ 准确/ 获得/ 缺陷/ 相关/ 的/ 流程/ 摘要/ ,/ 每/ 一个/ 前置条件/ 和/ 后置/ 条件/ 都/ 定义/ 了/ 相应/ 的/ 抽象/ 域/ ,/ 该/ 约束/ 域/ 取决于/ 缺陷/ 特征/ df/ ./ 对于/ 任意/ vi/ ∈/ df/ ,/ 前置条件/ 可以/ 表示/ 为/ constraints/ =/ {/ 〈/ value/ (/ v1/ )/ ,/ C1/ 〉/ ,/ 〈/ value/ (/ v2/ )/ ,/ C2/ 〉/ ,/ …/ ,/ 〈/ value/ (/ vn/ ,/ Cn/ )/ 〉/ }/ ,/ value/ (/ vi/ )/ 表示/ 当/ 条件/ Ci/ 为/ true/ 时/ ,/ vi/ 的/ 取值/ 范围/ ,/ 用/ 扩展/ 的/ 区间/ 进行/ 描述/ ./ 同样/ 可以/ 计算/ 相应/ 的/ 后置/ 条件/ 信息/ ./ 为了/ 进行/ 直观/ 表示/ ,/ 这里/ 以/ 文中/ 给出/ 的/ 3/ 种/ 死锁/ 情况/ 中/ 响应/ 消息/ 丢失/ 的/ IPCD/ 为例/ 进行/ 说明/ ,/ 其/ 缺陷/ 状态机/ 包含/ 6/ 个/ 状态/ {/ start/ ,/ request/ ,/ response/ ,/ unre/ -/ sponse/ ,/ error/ ,/ end/ }/ ,/ 图/ 5/ 是/ 相应/ 状态/ 之间/ 的/ 转换/ 图/ ./ 每/ 一个/ 状态机/ 代表/ 一个/ 异步/ 响应/ 调用/ ,/ request/ 代表/ 发送/ 请求/ 消息/ ,/ response/ 代表/ 被/ 调用/ 流程/ 返回/ 给/ 发送/ 请求/ 的/ 流程/ 的/ 响应/ ,/ 而/ Unresponse/ 代表/ 没有/ 发送/ 响应/ 消息/ ,/ 这样/ 便会/ 使/ 调用/ 流程/ 出于/ 一种/ 无限/ 等待/ 状态/ ,/ 即/ 我们/ 认为/ 的/ 死锁/ ./ 算法/ 思想/ :/ 考虑/ 服务/ 间通信/ 形式/ ,/ 如果/ 是/ 同步/ 调用/ (/ invoke/ 活动/ 同时/ 具有/ 输入输出/ 参数/ )/ ,/ 则/ 流程/ 间/ 的/ 通信/ 不/ 可能/ 存在/ 死锁/ ./ 但/ 如果/ 是/ 异步/ 调用/ (/ invoke/ 活动/ 只/ 具有/ 输入/ 参数/ )/ ,/ 则/ 需要/ 对/ 该/ 异步/ 调用/ 消息/ 建立/ 相应/ 的/ IPCD/ 状态机/ ,/ 如果/ 流程/ 间/ 的/ 通信/ 不能/ 确保/ 始终/ 返回/ 响应/ 消息/ ,/ 则/ 说明/ 存在/ 通信/ 死锁/ 故障/ ./ 简单/ 的/ 循环/ 等待/ 通信/ 消息/ 可以/ 通过/ 建立/ 流程/ 依赖图/ 的/ 形式/ 进行/ 判断/ ,/ 复杂/ 的/ 死锁/ 需要/ “/ 流程/ 摘要/ ”/ 的/ 支持/ ./ 3.3/ ./ 3/ 流程/ 间/ 死锁/ 检测/ 算法/ 流程/ 间/ 的/ 死锁/ 检测/ 首先/ 是/ 获得/ 被/ 调/ 流程/ 的/ 流程/ 摘要/ ,/ 算法/ 1/ 给出/ 了/ 流程/ 摘要/ 的/ 生成/ 算法/ ,/ 算法/ 依赖于/ 流程/ 依赖图/ (/ CFG/ )/ ,/ 首先/ 判断/ DCFG/ 中/ 是否/ 存在/ 环/ ,/ 如果/ 存在/ ,/ 则/ 报告/ 一个/ 死锁/ ,/ 然后/ 采用/ 遍历/ 算法/ 获得/ 依赖图/ 的/ 拓扑/ 结构/ 队列/ ./ 算法/ 1/ ./ 流程/ 摘要/ 生成/ 算法/ ./ procedureprocessSummary/ (/ DCFGdcfg/ )/ {/ 1/ ./ ifdcfgcontaincycles2/ ./ reportdeadlockerror/ ;/ 3/ ./ getthetopologylistfromdcfg/ ;/ 4/ ./ reversethelist/ ;/ 5/ ./ while/ (/ !/ list/ ,/ isempty/ (/ )/ )/ {/ 6/ ./ p/ =/ list/ ./ delete/ (/ )/ ;/ 7/ ./ old/ =/ p/ ./ getSummary/ (/ )/ ;/ 8/ ./ analysisplocallyaccordingtodefectfeature/ ;/ 9/ ./ new/ =/ generatenewsummaryforp/ ;/ 10/ ./ if/ (/ old/ !/ =/ new/ )/ 11/ ./ addallthecallprocesswhichinvokeptothelist/ ;/ }/ }/ 流程/ 间/ 的/ 死锁/ 检测/ ,/ 主要/ 是/ 当/ 流程/ 通过/ invoke/ 活动/ 调用/ 外部/ 伙伴/ 服务/ 时/ ,/ 需要/ 考虑/ 流程/ 间/ 上下文/ 敏感/ 的/ 分析/ ,/ 算法/ 2/ 所示/ 给出/ 了/ 当/ 遇到/ 异步/ 调用/ 的/ 时候/ 流程/ 间/ 敏感/ 的/ 分析/ 算法/ 片段/ ./ 算法/ 2/ ./ 流程/ 间/ 的/ 死锁/ 检测/ ./ …/ 1/ ./ ifaisaasynchronousinvocation2/ ./ createthefsmfora/ ;/ 4/ ./ getsummaryofcalleeprocess/ ;/ Page65/ ./ precondition/ =/ summary/ ./ getPrecondition/ (/ )/ ;/ 6/ ./ ifa/ ./ fsmviolatestheprecondition7/ ./ thenreportanerror/ ;/ 8/ ./ postcondition/ =/ summary/ ./ getPostcondition/ (/ )/ ;/ 9/ ./ mergethepostconditiontothecurrentintra/ -/ processanalysis10/ ./ …/ 3.3/ ./ 4/ 实例/ 及/ 分析/ 利用/ IPCD/ 状态机/ 和/ 流程/ 摘要/ 对图/ 3/ 中/ 的/ 订票/ 图/ 6/ 航空/ 旅行/ 订票/ 流程/ 待测/ 流程/ TripOrder3Airline53/ ./ 4/ 相关/ 工作/ 近年来/ 已经/ 出现/ 了/ 大量/ 有关/ 死锁/ 的/ 检测/ 方法/ 和/ 工具/ [/ 18/ -/ 21/ ]/ ,/ 按照/ 是否/ 执行/ 代码/ 可以/ 分为/ 静态/ 检测/ 和/ 动态/ 检测/ ,/ 静态/ 分析/ 验证/ 技术/ ,/ 不/ 需要/ 运行/ 软件/ ,/ 通过/ 对/ 代码/ 或/ 模型/ 的/ 分析/ 验证/ 就/ 能/ 发现/ 部分/ 潜在/ 的/ 缺陷/ ,/ 大大缩短/ 了/ 死锁/ 的/ 发现/ 时间/ 周期/ ./ 基于/ 类型/ 约束/ 的/ 死锁/ 静态/ 检测/ :/ 类型/ 系统/ 定义/ 了/ 每个/ 变量/ 和/ 表达式/ 的/ 类型/ ,/ 所谓/ 类型/ 即/ 属性/ 或/ 语义/ ./ 类型/ 检查/ 是/ 指/ 检查/ 代码/ 中/ 的/ 变量/ 和/ 表达式/ 的/ 类型/ 是否/ 满足/ 类型/ 系统/ 的/ 定义/ ./ 文献/ [/ 1/ ]/ 通过/ 静态/ 分析/ 将/ Java/ 源代码/ 转换成/ 一组/ 谓词/ ,/ 再/ 通过/ 定理/ 证明/ 检测/ 其/ 是否/ 满足/ 规约/ ,/ 从而/ 验证/ 死锁/ ./ FindBugs/ [/ 6/ ]/ 是/ 一/ 流程/ 通信/ 实例/ (/ TripOrder/ )/ 及/ 航空/ 旅行/ 订票/ 流程/ (/ Airline/ )/ 图/ 6/ 进行/ 了/ 具体分析/ ,/ 其中/ 在/ Airline/ 中/ ,/ 实线/ 箭头/ 代表/ 的/ 是/ 同步/ 请求/ 响应/ 操作/ ,/ 其它/ 的/ 箭头/ 是/ 异步/ 请求/ 操作/ ,/ 箭头/ 上/ 的/ 名字/ 是/ 流程/ 间/ 传递/ 的/ 消息/ ./ 结果/ 如表/ 1/ 所示/ ,/ 分别/ 给出/ 了/ 带有/ 流程/ 摘要/ 和/ 不带/ 流程/ 摘要/ 的/ 分析/ 结果/ ./ 在/ Airline/ 流程/ 中/ ,/ 由于/ 不/ 存在/ 使/ 流程/ 终止/ 的/ 活动/ ,/ 每个/ 被/ 调/ 流程/ 都/ 能够/ 成功/ 地/ 返回/ 消息/ ,/ 因此/ 不/ 存在/ 流程/ 间/ 的/ 通信/ 死锁/ ./ 款/ 针对/ Java/ 基于/ 静态/ 程序/ 分析/ 的/ 工具/ ,/ 它/ 通过/ 检查程序/ 是否/ 含有/ “/ 缺陷/ 模式/ ”/ 来/ 发现/ 缺陷/ ,/ 主要/ 技术/ 是/ 在/ 语法/ 层面/ 上将/ 程序/ 与/ 已知/ 的/ 可能/ 导致/ 缺陷/ 的/ 代码/ 模式/ 进行/ 比较/ ./ 死锁/ 的/ 存在/ 严重/ 影响/ 了/ 程序/ 质量/ ,/ 文献/ [/ 17/ ]/ 提出/ 了/ 基于/ FSM/ // Petri/ 网/ 的/ 分析方法/ ,/ 文献/ [/ 16/ ]/ 基于/ 移动/ 工作台/ MWB/ 的/ Π/ 演算/ 的/ 形式/ 验证/ BPEL/ 死锁/ ./ 流程/ 间/ 的/ 死锁/ 是/ 一种/ 隐含/ 死锁/ ,/ 因此/ 需要/ 对/ 流程/ 间/ 交互进行/ 深入研究/ [/ 13/ -/ 15/ ]/ ./ 有关/ BPEL/ 的/ 死锁/ 研究/ :/ 文献/ [/ 9/ ]/ 通过/ 对/ CWB/ 以/ PAC/ 的/ 方法/ 修改/ 支持/ BPE/ 演算/ ,/ 从而/ 对/ BPEL/ 流程/ 进行/ 分析/ ,/ 能够/ 对/ 死锁/ 进行/ 验证/ ,/ 但/ 这种/ 方法/ 复杂度/ 较/ 高/ ,/ 有/ 可能/ 出现/ 状态/ 空间/ 爆炸/ 的/ 问题/ ./ 文献/ [/ 10/ ]/ 采用/ Petri/ 网/ 技术/ 对/ BPEL/ 的/ 控制流/ 进行/ 了/ 分析/ ,/ 对/ 流程/ 间/ 的/ 通信/ 进行/ 了/ 建模/ ,/ 给出/ 了/ 造成/ 死锁/ 的/ 可能/ 情况/ :/ (/ 1/ )/ 接收/ 请求者/ 发送/ 的/ 消息/ 的/ 活动/ 没有/ 执行/ ;/ (/ 2/ )/ 请求者/ 发送/ 的/ 消息/ 被/ 接收/ ,/ 但是/ 由于/ 某些/ 原因/ ,/ 向/ 请求者/ 发回/ 消息/ Page7/ 的/ 活动/ 未/ 执行/ (/ 例如/ 执行/ 返回/ 活动/ 之前/ ,/ 流程/ 被迫/ 终止/ )/ ;/ (/ 3/ )/ 请求/ 响应/ 消息/ 在/ 传输/ 过程/ 中/ 丢失/ ./ 这些/ 情况/ 的/ 出现/ 都/ 将/ 会/ 导致/ 流程/ 间/ 的/ 通信/ 死锁/ ,/ 即/ 请求/ 流程/ 执行/ 死锁/ ./ 另外/ 如果/ 请求/ 流程/ 发送/ 的/ 消息/ 不能/ 达到/ 接收/ 流程/ ,/ 则/ 将/ 会/ 导致/ 接收/ 流程/ 死锁/ ./ 然而/ 由于/ 没有/ 对/ 数据流/ 信息/ 进行/ 分析/ ,/ 缺少/ 对/ 交互/ 活动/ 的/ 执行/ 条件/ 的/ 计算/ ./ 文献/ [/ 11/ ]/ 给出/ 了/ 企业/ 间/ 业务流程/ IEBP/ 的/ 建模/ 和/ 死锁/ 验证/ 方法/ ,/ 采用/ 两步/ 抽象/ 技术/ :/ 首先/ 使用/ 符号/ 抽象/ 图/ (/ SymbolicObservationGraph/ ,/ SOG/ )/ 技术/ 对/ 每/ 一个/ 局部/ 流程/ 进行/ 抽象/ ,/ 这样/ 做/ 有/ 两个/ 好处/ ,/ 一是/ 可以/ 将/ 原/ 流程/ 的/ 分析/ 转化/ 为/ SOG/ 的/ 分析/ ;/ 二是/ 可以/ 隐藏/ 流程/ 的/ 内部结构/ 和/ 组织/ 形式/ ,/ 符合/ IEBP/ 的/ 上下文/ 需求/ ./ 其次/ ,/ 通过/ 组合/ 局部/ SOGs/ 获得/ IEBP/ 的/ 抽象/ ,/ 从而/ 可以/ 有效/ 进行/ 全局/ 抽象/ 分析/ ,/ 如/ 死锁/ 检测/ ./ 我们/ 的/ 方法/ 与/ 文献/ [/ 11/ ]/ 提出/ 的/ 方法/ 类似/ ,/ 通过/ 流程/ 摘要/ 对/ 流程/ 进行/ 抽象/ ,/ 并且/ 流程/ 摘要/ 是/ 缺陷/ 相关/ 的/ ,/ 不同/ 缺陷/ 的/ 流程/ 摘要/ 是/ 不同/ 的/ ./ 流程/ 摘要/ 只/ 关心/ 和/ 具体/ 缺陷/ 相关/ 的/ 流程/ 信息/ ,/ 而/ 隐藏/ 了/ 其它/ 流程/ 内部/ 实现/ 细节/ ,/ 避免/ 了/ 对/ 流程/ 调用/ 图/ 进行/ 全局/ 分析/ 的/ 局限性/ ,/ 并/ 在/ 实验室/ 自主/ 研发/ 的/ BPEL/ 测试工具/ 中/ [/ 22/ ]/ 验证/ 了/ 该/ 方法/ 的/ 可行性/ 和/ 有效性/ ./ 4/ 结束语/ 精确/ 的/ 流程/ 间/ 分析/ 对/ 缺陷/ 检测/ 来说/ 是/ 非常/ 重要/ 的/ ,/ 因为/ 复杂/ 的/ 业务流程/ 通常/ 需要/ 进行/ 流程/ 间/ 的/ 通信/ ./ 本文/ 提出/ 了/ “/ 流程/ 摘要/ ”/ 的/ 概念/ 用来/ 有效/ 解决/ 流程/ 间/ 的/ 分析/ 问题/ ./ “/ 流程/ 摘要/ ”/ 包含/ 了/ 3/ 个/ 属性/ :/ 前置条件/ 用来/ 记录/ 调用/ 流程/ 对/ 被/ 调/ 流程/ 时序/ 安全/ 属性/ 的/ 影响/ 约束/ ,/ 当/ 违反/ 这一/ 约束/ 时/ ,/ 将会/ 导致/ 被/ 调/ 流程/ 的/ 执行/ 存在/ 缺陷/ ./ 特征/ 属性/ 用来/ 记录/ 特定/ 缺陷/ 相关/ 的/ 信息/ ,/ 而/ 后置/ 条件/ 记录/ 了/ 被/ 调/ 流程/ 的/ 返回/ 信息/ 对/ 调用/ 流程/ 的/ 影响/ ./ 通过/ 使用/ “/ 流程/ 摘要/ ”/ 能够/ 有效/ 地/ 检测/ 流程/ 间通信/ 造成/ 的/ 死锁/ ./ 将来/ 的/ 工作/ 主要/ 是/ 分析/ 影响/ 流程/ 间/ 缺陷/ 检测/ 的/ 精度/ 的/ 因素/ ,/ 提高/ 检测/ 效率/ ./ 

