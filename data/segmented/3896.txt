Page1/ 云/ 计算环境/ 中/ 绿色/ 服务/ 级/ 目标/ 的/ 分析/ 、/ 量化/ 、/ 建模/ 及/ 评价/ 孙/ 大为/ 1/ )/ ,/ 2/ )/ 常桂然/ 3/ )/ 陈东/ 1/ )/ ,/ 4/ )/ 王兴伟/ 1/ )/ 1/ )/ (/ 东北大学/ 信息科学/ 与/ 工程学院/ 沈阳/ 110819/ )/ 2/ )/ (/ 清华大学/ 计算机科学/ 与/ 技术/ 系/ 北京/ 100084/ )/ 3/ )/ (/ 东北大学/ 计算中心/ 沈阳/ 110819/ )/ 4/ )/ (/ 麻省/ 大学/ 计算机科学/ 系/ 阿默斯/ 特/ 美国/ 01002/ )/ 摘要/ 高/ 能效/ 性/ 问题/ 是/ 开启/ 绿云/ 计算/ 新纪元/ 的/ 主要/ 障碍/ 之一/ ./ 特别/ 是/ 随着/ 全球/ 气候变化/ 和/ 对/ 能量/ 依赖/ 程度/ 的/ 不断/ 增加/ ,/ 绿色/ 计算/ 作为/ 一种/ 新/ 的/ 高端/ 计算/ ,/ 受到/ 了/ 人们/ 的/ 广泛/ 关注/ ./ 为了/ 实现/ 云/ 计算/ 能耗/ 的/ 最小化/ ,/ 实现/ 对/ 绿色/ 服务/ 级/ 目标/ 的/ 可/ 量化/ 和/ 可/ 管理/ ,/ 我们/ 开展/ 了/ 关于/ 云/ 计算环境/ 中/ 绿色/ 服务/ 级/ 目标/ 的/ 分析/ 、/ 量化/ 、/ 建模/ 及/ 评价/ 的/ 研究/ ./ 在/ 本文/ 中/ ,/ 首先/ 给出/ 了/ 绿云/ 的/ 定义/ ./ 随后/ ,/ 通过/ 借鉴/ 服务/ 级/ 目标/ 和/ 绿色/ 计算/ 的/ 相关/ 理论/ ,/ 对/ 实现/ 绿色/ 服务/ 级/ 目标/ 的/ 原理/ 进行/ 了/ 系统/ 的/ 分析/ ./ 之后/ ,/ 基于/ 绿云/ 的/ 原理/ 和/ 方法/ ,/ 提出/ 了/ 一种/ 多维/ 能耗/ 模型/ M2EC/ ./ 理论/ 和/ 实验/ 结果/ 均/ 表明/ M2EC/ 模型/ 在/ 高/ 能效/ 方面/ 具有/ 明显/ 优势/ ,/ 实现/ 了/ 云/ 计算环境/ 中/ 能耗/ 和/ 服务/ 级/ 目标/ 之间/ 的/ 均衡/ ./ 关键词/ 服务/ 级/ 目标/ ;/ 高/ 能效/ ;/ 绿色/ 云/ ;/ 绿色/ 计算/ ;/ 云/ 计算/ ;/ 大/ 数据/ 1/ 引言/ 云/ 计算/ 是/ 以/ 商业/ 目标/ 为/ 主要/ 源/ 动力/ 的/ 大规模/ 分布式计算/ 范式/ ,/ 利用/ 抽象化/ 、/ 虚拟化/ 、/ 透明化/ 、/ 自动化/ 、/ 即时/ 部署/ 、/ 宽带/ 网络/ 等/ 关键技术/ ,/ 通过/ 网络/ 实现/ 资源/ 间/ 的/ 互联/ 、/ 互通/ 和/ 互操作/ ;/ 以/ 统一/ 服务/ (/ XasaService/ ,/ XaaS/ )/ 的/ 形式/ ,/ 利用/ 多/ 终端/ 、/ 多/ 平台/ 和/ 多/ 网络/ ,/ 在/ 任意/ 时间/ 、/ 任意/ 地点/ ,/ 并/ 以/ 任意/ 方式/ 为/ 用户/ 提供/ 包括/ 软件/ 、/ 平台/ 和/ 基础设施/ 在内/ 的/ 按/ 需即/ 用/ 、/ 随需应变/ 、/ 快速/ 部署/ 、/ 瞬时/ 释放/ 、/ 物美价廉/ 、/ 安全/ 高效/ 的/ 非/ 平凡/ SLOs/ (/ ServiceLevelObjectives/ )/ 服务/ ,/ 其/ 目标/ 是/ 为/ 用户/ 提供/ 高效/ 、/ 灵活/ 且/ 价格低廉/ 的/ 服务/ ;/ 为/ 满足/ 急剧/ 增长/ 的/ 硬件/ 成本/ 、/ 存储/ 能力/ 、/ 服务/ 计算/ 等/ 因/ 互联网/ 的/ 广泛应用/ 所/ 带来/ 的/ 各种/ 新/ 的/ 需求/ ,/ 提供/ 了/ 高效/ 的/ 解决方案/ ,/ 受到/ 政府/ 、/ 工业/ 企业/ 、/ 科研机构/ 、/ 高等院校/ 等/ 的/ 广泛/ 关注/ [/ 1/ -/ 9/ ]/ ./ 美国/ 国家标准/ 与/ 技术/ 研究院/ (/ NationalInstituteofStandardsandTechnology/ ,/ NIST/ )/ 给出/ 了/ 迄今为止/ 最为/ 全面/ 的/ 云/ 计算/ 定义/ [/ 5/ ]/ :/ “/ 云/ 计算/ 是/ 一种/ 按/ 需即/ 用/ 、/ 随需应变/ 、/ 快速/ 部署/ 、/ 瞬时/ 释放/ 、/ 物美价廉/ 的/ 服务/ 范式/ ,/ 通过/ 网络/ 可以/ 实现/ 对/ 共享/ 计算资源/ 池/ (/ 如/ 计算/ 、/ 存储/ 、/ 网络/ 、/ 应用/ 、/ 服务/ )/ 的/ 可/ 访问/ 性/ 、/ 可/ 定制/ 性/ 、/ 可更改/ 性/ 、/ 可/ 付费/ 性/ 和/ 可/ 释放/ 性/ ./ 同时/ ,/ 在/ 仅/ 需/ 最少/ 的/ 付费/ 、/ 最少/ 的/ 管理/ 、/ 最少/ 的/ 沟通/ 的/ 情况/ 下/ ,/ 即可/ 实现/ 对/ 服务/ 的/ 快速/ 获取/ 、/ 资源/ 的/ 瞬时/ 释放/ 和/ 信息/ 的/ 触手可及/ ”/ ./ 云/ 计算/ 具有/ 3/ 种/ 交互/ 模式/ 、/ 4/ 种/ 部署/ 模式/ 、/ 5/ 种/ 公共/ 特征/ [/ 1/ -/ 9/ ]/ ./ 3/ 种/ 交互/ 模式/ 为/ 基础设施/ 即/ 服务/ 、/ 平台/ 即/ 服务/ 和/ 软件/ 即/ 服务/ ;/ 4/ 种/ 部署/ 模式/ 为/ 公有/ 云/ 、/ 私有/ 云/ 、/ 社区/ 云/ 和/ 混合/ 云/ ;/ 5/ 种/ 公共/ 特征/ 为/ 按/ 需/ 付费/ 、/ 泛/ 在/ 接入/ 、/ 快速/ 部署/ 、/ 资源/ 透明/ 和/ 标准/ 服务/ ./ 在/ 当前/ 云/ 计算/ 的/ 研究/ 过程/ 中/ ,/ 高性能/ 、/ 高/ 可靠/ 、/ 高/ 服务/ 级/ 目标/ 受到/ 了/ 足够/ 的/ 重视/ ,/ 但/ 高/ 能效/ 问题/ 则/ 通常/ 被忽视/ ./ 据/ 不/ 完全/ 统计/ [/ 10/ -/ 13/ ,/ 19/ ]/ ,/ 各类/ 数据中心/ 当前/ 年均/ 电能/ 消耗量/ 占/ 全球/ 年均/ 总/ 电能/ 消耗量/ 的/ 0.5/ %/ ./ 按照/ 当前/ 数据中心/ 规模/ 和/ 数量/ 的/ 发展/ 速度/ ,/ 预计/ 到/ 2020/ 年/ ,/ 数据中心/ 年均/ 电能/ 消耗量/ 将/ 占/ 全球/ 年均/ 总/ 电能/ 消耗量/ 的/ 1/ %/ ./ 数据中心/ 之所以/ 消耗掉/ 如此/ 多/ 的/ 电力/ 资源/ ,/ 主要/ 有/ 两个/ 方面/ 的/ 原因/ :/ 一方面/ 是/ 由于/ 数据中心/ 的/ 规模/ 和/ 数量/ 与日俱增/ ;/ 另一方面/ 是/ 由于/ 数据中心/ 资源/ 的/ 低效/ 组织/ 与/ 无效/ 管理/ ,/ 如/ 设备/ 大量/ 冗余/ 、/ 制冷系统/ 老化/ 、/ 建筑/ 结构/ 不合理/ 等/ ./ 因此/ ,/ 随着/ 全球/ 气候变化/ 和/ 对/ 能量/ 依赖/ 程度/ 的/ 不断/ 增加/ ,/ 需要/ 实现/ 云/ 计算环境/ 中/ 能量/ 的/ 有效/ 组织/ 、/ 全面/ 监控/ 、/ 合理/ 管理/ 和/ 高效/ 使用/ ,/ 同时/ ,/ 实现/ 云/ 计算/ 系统/ 高性能/ 和/ 高/ 服务/ 级/ 目标/ 的/ 统一/ ./ 本文/ 工作/ 的/ 灵感/ 来自/ 于/ 以下/ 事实/ :/ “/ 绿色/ ”/ 已经/ 被/ 广泛/ 用于/ 描述/ 事物/ 具有/ 环境友好/ 性/ 特征/ ,/ 如低/ 碳/ 、/ 节能/ (/ 高/ 能效/ )/ 、/ 健康/ 、/ 经济/ 、/ 可/ 持续/ 等/ ./ 绿色/ 计算/ ,/ 即/ 从/ 设计/ 、/ 制造/ 、/ 运输/ 、/ 使用/ 、/ 维护/ 、/ 回收/ 和/ 再/ 利用/ 的/ 整个/ 生命周期/ 过程/ 中/ ,/ 以/ 一种/ 经济/ 、/ 高/ 能效/ 方式/ 使用/ 计算资源/ ./ 其/ 主要/ 目的/ 是/ 维持/ 三元/ 底线/ (/ TripleBottomLine/ ,/ 3BL/ )/ ,/ 即/ 人群/ 、/ 地球/ 和/ 利润/ (/ People/ ,/ PlanetandProfit/ ,/ 3P/ )/ 间/ 的/ 利益/ 均衡/ [/ 13/ -/ 14/ ]/ ./ 绿色/ 云/ 计算/ ,/ 即绿云/ 计算/ ,/ 就是/ 实现/ 云/ 计算/ 的/ 可持续性/ 发展/ ,/ 减少/ 云/ 系统对/ 环境/ 的/ 可能/ 影响/ ./ 本质/ 而言/ ,/ 云/ 计算/ 本身/ 就是/ 一种/ 高效/ 地/ 实现/ 绿色/ 计算/ 的/ 方式/ ,/ 例如/ 通过/ 虚拟化/ 技术/ ,/ 实现/ 了/ 对/ 资源/ 的/ 有效/ 整合/ ,/ 提高/ 了/ 资源/ 的/ 利用率/ ;/ 通过/ 休眠/ 技术/ ,/ 实现/ 了/ 对/ 能量/ 的/ 有效/ 节省/ ./ 绿云/ 计算/ 的/ 目标/ 不仅仅/ 要/ 实现/ 计算资源/ 使用/ 效率/ 的/ 极大/ 提高/ ,/ 同时/ 也/ 要/ 实现/ 能量消耗/ 的/ 最小化/ [/ 14/ -/ 19/ ]/ ./ 为了/ 实现/ 绿云/ 计算/ ,/ 实现/ 云/ 计算/ 的/ 可持续性/ 发展/ ,/ 需要/ 确定/ 云/ 计算环境/ 中/ 整体/ 能量消耗/ 情况/ ./ 更为重要/ 的/ 是/ ,/ 需要/ 理解/ 如何/ 实现/ 数据中心/ 的/ 能量消耗/ 最小化/ ,/ 高效/ 地/ 实现/ 能量/ 和/ 性能/ 间/ 的/ 均衡/ ,/ 而/ 这些/ 问题/ 恰恰/ 是/ 当前/ 关于/ 云/ 计算/ 能效/ 的/ 研究所/ 缺失/ 的/ [/ 14/ -/ 19/ ]/ ./ 本文/ 系统地/ 分析/ 、/ 量化/ 、/ 建模/ 和/ 评价/ 了/ 大规模/ 数据中心/ 的/ 能量消耗/ ,/ 为/ 实现/ 能量消耗/ 的/ 最小化/ ,/ 实现/ 对/ 高/ 能效/ 的/ 量化/ 、/ 管理/ 打下/ 了/ 基础/ ,/ 同时/ 也/ 满足/ 了/ 用户服务/ 级/ 目标/ ./ Page3/ (/ 1/ )/ 资源整合/ 资源整合/ 是/ 实现/ 数据中心/ 能量/ 节省/ 的/ 一个/ 主要/ 方法/ ,/ 通过/ 对/ 数据中心/ 进行/ 资源整合/ ,/ 可以/ 实现/ 多个/ 不同/ 应用程序/ 共享/ 一台/ 高性能/ 服务器/ ./ 一方面/ ,/ 可以/ 有效/ 地/ 提高/ 服务器资源/ 的/ 利用率/ ,/ 节省/ 硬件资源/ 的/ 成本/ ,/ 提高/ 资源/ 的/ 使用/ 效率/ ,/ 节省/ 电力/ 成本/ ,/ 并/ 保持/ 系统/ 的/ 负载/ 均衡/ ;/ 另一方面/ ,/ 资源整合/ 也/ 可以/ 为/ 各个/ 应用程序/ 提供/ 一个/ 独立/ 的/ 运行/ 环境/ ,/ 保持/ 应用程序/ 间/ 的/ 独立性/ 和/ 稳定性/ ./ 随着/ 硬件/ 技术/ 的/ 不断/ 发展/ ,/ 在/ 当前/ 大多数/ 服务器/ 运行/ 模式/ 中/ ,/ 为了/ 保持/ 各个/ 应用/ 的/ 独立性/ 和/ 稳定性/ ,/ 一台/ 服务器/ 中/ 往往/ 仅仅/ 运行/ 一个/ 应用程序/ ./ 这样/ 就/ 导致/ 了/ 服务器/ 长期/ 处于/ 较/ 低/ 的/ 使用率/ ,/ 并且/ ,/ 随着/ 服务器/ 硬件/ 性能/ 的/ 改善/ ,/ 服务器/ 的/ 使用/ 效率/ 反而/ 更/ 低/ ./ 当前情况/ 下/ ,/ 服务器/ 全/ 负荷/ 工作/ 时间/ 仅/ 占/ 全部/ 时间/ 的/ 10/ %/ ~/ 30/ %/ ,/ 台式机/ 的/ 平均/ 使用/ 效率/ 往往/ 低于/ 5/ %/ [/ 14/ ,/ 15/ ,/ 17/ -/ 19/ ]/ ./ 然而/ ,/ 通过/ 虚拟化/ 技术/ ,/ 利用/ 虚拟机/ 实现/ 服务器资源/ 的/ 共享/ ,/ 实现/ 服务器资源/ 的/ 整合/ ,/ 服务器/ 的/ 平均/ 使用/ 效率/ 可以/ 提高/ 到/ 80/ %/ 以上/ ,/ 能/ 极大/ 地/ 降低/ 系统/ 中/ 能量/ 的/ 消耗/ ./ (/ 2/ )/ 在线/ 迁移/ 在线/ 迁移/ 虚拟机/ 是/ 指/ 在/ 不/ 中断/ 应用服务/ 的/ 情况/ 下/ ,/ 将/ 一个/ 应用/ 及/ 运行/ 该/ 应用/ 的/ 虚拟机/ 从/ 当前/ 运行/ 服务器/ 迁移/ 到/ 另一台/ 服务器/ 中/ ,/ 可以/ 实现/ 全局/ 的/ 负载/ 均衡/ ./ 或者/ 在/ 可/ 预见/ 的/ 未来/ ,/ 在/ 当前/ 服务器/ 要/ 崩溃/ 的/ 情况/ 下/ ,/ 将/ 当前/ 服务器/ 中/ 运行/ 的/ 应用/ 及/ 运行/ 该/ 应用/ 的/ 虚拟机/ 迁移/ 到/ 其他/ 服务器/ 上/ ,/ 从而/ 满足用户/ 的/ 服务/ 级/ 目标/ ./ (/ 3/ )/ 动态/ 资源管理/ 高/ 能效/ 的/ 动态/ 资源管理/ 也/ 是/ 实现/ 绿云/ 计算/ 的/ 关键技术/ 之一/ ./ 如图/ 1/ (/ a/ )/ 所示/ ,/ 在/ 静态/ 的/ 资源管理/ 情况/ 下/ ,/ 当/ App2/ 需要/ 申请/ 新/ 的/ 资源/ 时/ ,/ 即使/ App1/ 已经/ 释放/ 了/ 部分/ 资源/ ,/ 但/ 系统/ 无法/ 将/ 该/ 部分/ 资源/ 动态/ 地/ 分配/ 给/ App2/ 使用/ ./ 因此/ ,/ App2/ 需要/ 向/ 系统/ 申请/ 其他/ 可用/ 资源/ ,/ 或/ 等待/ App1/ 运行/ 结束/ 后/ ,/ 才/ 使用/ 该/ 部分/ 释放/ 的/ 资源/ ./ 然而/ ,/ 当/ 同样/ 的/ 情况/ 发生/ 在/ 动态/ 资源管理/ 环境/ 中/ 时/ ,/ 如图/ 1/ (/ b/ )/ 所示/ ,/ App2/ 可以/ 动态/ 地/ 使用/ App1/ 随时/ 释放/ 的/ 资源/ ,/ 而/ 不/ 需要/ 向/ 系统/ 申请/ 新/ 的/ 资源/ ,/ 更/ 不/ 需要/ 等到/ App1/ 运行/ 结束/ 后/ 才/ 使用/ 该/ 部分/ 资源/ ./ 可见/ 动态/ 的/ 资源管理/ ,/ 一方面/ 提高/ 了/ 系统/ 中/ 资源/ 的/ 利用率/ ;/ 另一方面/ 也/ 改善/ 了/ 用户/ 的/ 服务/ 级/ 目标/ ./ (/ 4/ )/ 休眠/ 机制/ 在/ 不/ 影响/ 到/ 服务/ 级/ 目标/ 的/ 前提/ 下/ ,/ 尽可能/ 地/ 将/ 服务器/ 从/ 高能耗/ 状态/ 转换/ 到/ 低能耗/ 状态/ ,/ 以/ 达到/ 降低/ 系统/ 能耗/ 的/ 目标/ ./ 如图/ 2/ 所示/ ,/ 在/ 该/ 4/ 种/ 能耗/ 状态/ 下/ ,/ 从/ 唤醒/ 状态/ 到/ 关机/ 状态/ 的/ 转换/ 过程/ 中/ ,/ 能量消耗/ 依次/ 减小/ ,/ 其中/ ,/ 在/ 关机/ 状态/ 下/ ,/ 实现/ 了/ 单位/ 时间/ 内/ 能量消耗/ 的/ 最小化/ ./ 因此/ ,/ 在/ 任何/ 可能/ 的/ 情况/ 下/ ,/ 在/ 不/ 影响/ 到/ 系统/ 性能/ 的/ 前提/ 下/ ,/ 可以/ 将/ 系统/ 转换/ 到/ 该/ 低能耗/ 状态/ 下/ ,/ 以/ 达到/ 降低/ 系统/ 能耗/ 的/ 目的/ ./ 本文/ 首先/ 给出/ 了/ 绿云/ 的/ 定义/ ,/ 随后/ 通过/ 借鉴/ 服务/ 级/ 目标/ 和/ 绿色/ 计算/ 的/ 相关/ 理论/ ,/ 对/ 实现/ 绿色/ 服务/ 级/ 目标/ 的/ 原理/ 进行/ 了/ 系统/ 的/ 分析/ ./ 之后/ 提出/ 了/ 一种/ 多维/ 能耗/ 模型/ M2EC/ ./ 本文/ 的/ 主要/ 贡献/ 包括/ :/ (/ 1/ )/ 从/ 量化/ 角度/ 系统地/ 定义/ 了/ 绿云/ 计算/ 、/ 绿云/ 体系结构/ 和/ 绿色/ 服务/ 级/ 目标/ ;/ (/ 2/ )/ 分析/ 了/ 云/ 数据中心/ 能量消耗/ 和/ 服务/ 级/ 目标/ 之间/ 的/ 数学/ 关系/ ,/ 得出/ 了/ 满足/ 绿色/ 服务/ 级/ 目标/ 的/ 约束条件/ ;/ (/ 3/ )/ 量化/ 了/ 度量/ 绿色/ 云/ 计算/ 的/ 多维/ 指标/ ,/ 如/ 能耗/ 、/ 碳/ 排放/ 、/ 健康/ 、/ 经济/ 、/ 可持续性/ 等/ 指标/ ,/ 并/ 得出/ 了/ 绿云度/ ;/ (/ 4/ )/ 建模/ 了/ 基于/ FIFO/ 和/ M2EC/ 的/ 虚拟机/ 启发式/ 调动/ 算法/ ,/ 量化/ 了/ 虚拟机/ 迁移/ 成本/ ,/ 有效/ 地/ 管理/ 了/ 虚拟机/ 的/ 迁移/ ,/ 通过/ 最小化/ 绿云度/ ,/ 实现/ 了/ 云/ 计算环境/ 中/ 的/ 绿色/ 服务/ 级/ 目标/ ;/ (/ 5/ )/ 评价/ 了/ 在/ 大规模/ 云/ 数据中心/ 中/ 基于/ M2EC/ 虚拟机/ 调动/ 的/ 绿色/ 服务/ 级/ 目标/ ,/ 实现/ 了/ 云/ 计算环境/ 中/ 能耗/ 和/ 服务/ 级/ 目标/ 之间/ 的/ 均衡/ ./ Page4/ 本文/ 对云/ 计算环境/ 中/ 的/ 高/ 能效/ 性/ 问题/ 进行/ 深入研究/ ./ 第/ 2/ 节/ 系统/ 建模/ 云/ 计算环境/ 中/ 的/ 高/ 能效/ 性/ ,/ 主要/ 包括/ 绿云/ 计算/ 的/ 基本概念/ 、/ 绿云/ 体系结构/ 和/ 绿色/ 服务/ 级/ 目标/ ;/ 第/ 3/ 节/ 量化/ 多维/ 性能指标/ 和/ 绿云度/ ;/ 第/ 4/ 节/ 具体/ 描述/ 实现/ 高/ 能效/ 性/ 的/ 主要/ 策略/ ,/ 主要/ 包括/ 在线/ 迁移/ 成本/ 量化/ 、/ 虚拟机/ 迁移/ 管理/ 、/ FIFO/ 和/ M2EC/ 虚拟机/ 调度/ 算法/ 的/ 描述/ ;/ 第/ 5/ 节/ 详细/ 介绍/ 实验/ 环境/ 、/ 参数设置/ 、/ 实验/ 结果/ 和/ 性能/ 分析/ ./ 实验/ 分析表明/ M2EC/ 虚拟机/ 调度/ 算法/ 在/ 绿云度/ 优化/ 、/ 虚拟机/ 负载/ 均衡/ 离差/ 、/ 虚拟机/ 在线/ 迁移率/ 、/ 任务/ 成功/ 执行/ 率/ 等/ 方面/ 具有/ 明显/ 优势/ ;/ 最后/ ,/ 第/ 6/ 节对/ 本文/ 进行/ 归纳/ 和/ 总结/ ./ 2/ 问题/ 建模/ 绿云/ 计算/ ,/ 即/ 实现/ 云/ 计算/ 的/ 可持续性/ 发展/ ,/ 减少/ 云/ 系统对/ 环境/ 的/ 可能/ 影响/ ,/ 实现/ 开启/ 未来/ 计算/ 新纪元/ 的/ 目标/ ./ 其/ 目的/ 是/ 不仅仅/ 要/ 实现/ 计算资源/ 使用/ 效率/ 的/ 极大/ 提高/ ,/ 同时/ 也/ 要/ 实现/ 对/ 能量消耗/ 的/ 最小化/ [/ 14/ ,/ 19/ -/ 27/ ]/ ./ 在/ 本节/ 中/ ,/ 从/ 量化/ 角度/ 定义/ 了/ 绿云/ 计算/ 、/ 绿云度/ 、/ 绿云/ 服务/ 等/ 概念/ ,/ 详细/ 地/ 分析/ 了/ 绿云/ 体系结构/ 及绿云/ 评价/ 周期/ ,/ 并/ 明确/ 了/ 云/ 计算环境/ 中/ 的/ 绿色/ 服务/ 级/ 目标/ ./ 2.1/ 绿云/ 计算/ 绿云/ 计算/ 是/ 一种/ 环境友好/ 型/ 的/ 云/ 计算/ 模式/ ,/ 为了/ 进行/ 定量/ 的/ 绿色/ 分析/ ,/ 一个/ 可/ 量化/ 的/ 绿云/ 计算/ 的/ 定义/ 如/ 定义/ 1/ 所示/ ./ 定义/ 1/ ./ 绿云/ 计算/ (/ greencloudcomputing/ )/ ./ 绿云/ 计算/ 是/ 一个/ 客观/ 评价者/ (/ objectiveevaluator/ )/ ,/ 如/ 政府/ 机构/ 、/ 绿色/ 非营利/ 组织/ 、/ 独立/ 的/ 第三方/ 机构/ 等/ ,/ 关于/ 一个/ 特定/ 的/ 云/ 计算环境/ 的/ 可管理性/ 、/ 可/ 评测/ 性/ 、/ 可维护性/ 等/ 指标/ 进行/ 的/ 层次性/ 的/ 客观/ 评价/ ,/ 其/ 主要/ 目的/ 是/ 维持/ 三元/ 底线/ (/ 即/ 人群/ 、/ 地球/ 和/ 利润/ )/ 间/ 的/ 利益/ 均衡/ ./ 也/ 就是/ 在/ 设计/ 、/ 制造/ 、/ 运输/ 、/ 使用/ 、/ 维护/ 、/ 回收/ 和/ 再/ 利用/ 的/ 整个/ 生命周期/ 中/ ,/ 通过/ 多维/ 性能指标/ ,/ 如低/ 碳/ 、/ 高/ 能效/ 、/ 健康/ 、/ 经济/ 、/ 可/ 持续/ 等/ ,/ 实现/ 对云/ 计算/ 的/ 量化/ ./ 一般而言/ ,/ 绿云/ 计算/ 的/ 绿色/ 程度/ 是/ 通过/ 绿云度/ (/ greenclouddegree/ )/ 来/ 反映/ 的/ ,/ 并/ 描述/ 为/ 绿云/ 服务/ (/ greencloudservice/ )/ ./ 很/ 明显/ ,/ 在/ 定义/ 1/ 中/ ,/ 将/ 绿云/ 计算/ 视为/ 一个/ 客观/ 的/ 、/ 可/ 量化/ 的/ 、/ 可/ 管理/ 的/ 度量/ ,/ 其中/ ,/ “/ 可管理性/ ”/ 、/ “/ 可/ 评测/ 性/ ”/ 、/ “/ 可维护性/ ”/ 、/ “/ 客观/ 评价/ ”/ 等/ 关键词/ 均/ 是/ 重点/ 强调/ 绿云/ 计算/ 的/ 客观性/ 、/ 可/ 量化/ 性/ 、/ 可管理性/ 等/ 特征/ ./ 其次/ ,/ 绿云/ 计算/ 的/ 目标/ 是/ 实现/ 对/ 三元/ 底线/ 的/ 全面/ 负责/ ,/ 其中/ ,/ “/ 三元/ 底线/ ”/ 重点/ 强调/ 绿云/ 计算/ 考虑/ 到/ 了/ 人群/ 、/ 地球/ 和/ 利润/ ,/ 高效/ 地/ 均衡/ 了/ 高/ 能效/ 性/ 和/ 绿色/ 服务/ 级/ 目标/ 之间/ 的/ 关系/ ./ 该/ 理念/ 最早/ 是/ 在/ 社会科学/ 中/ 描述/ 事物/ 具有/ 很/ 好/ 的/ 环境友好/ 性/ 和/ 可持续性/ ./ 再次/ ,/ 绿云/ 计算/ 可以/ 通过/ 多维/ 性能指标/ 实现/ 度量/ ,/ 其中/ ,/ “/ 多维/ 性能指标/ ”/ 是/ 强调/ 绿云/ 计算/ 的/ 度量/ 指标/ 往往/ 不是/ 某个/ 性能指标/ ,/ 而是/ 需要/ 多个/ 不同/ 方面/ 、/ 不同/ 角度/ 、/ 不同/ 层次/ 的/ 性能指标/ 的/ 协调/ 度量/ ,/ 才能/ 真实/ 、/ 全面/ 、/ 客观/ 地/ 反映/ 出绿云/ 计算/ 的/ 特征/ ./ 通常/ 情况/ 下/ ,/ 选择/ 低碳/ 、/ 高/ 能效/ 、/ 健康/ 、/ 经济/ 、/ 可/ 持续/ 等/ 性能指标/ 实现/ 对绿云/ 计算/ 的/ 度量/ ./ 最后/ ,/ 绿云/ 计算/ 的/ 评价/ 考虑/ 云/ 数据中心/ 生命周期/ 的/ 全部/ 过程/ ,/ 其中/ ,/ “/ 整个/ 生命周期/ 过程/ ”/ 是/ 强调/ 绿云/ 计算/ 的/ 评价/ 需要/ 考虑/ 设计/ 、/ 制造/ 、/ 运输/ 、/ 使用/ 、/ 维护/ 、/ 回收/ 和/ 再/ 利用/ 整个/ 生命周期/ 的/ 全部/ 阶段/ ,/ 而/ 不能/ 简单/ 地/ 选择/ 数据中心/ 生命周期/ 的/ 某个/ 或/ 某些/ 阶段/ 进行/ 绿云/ 计算/ 的/ 评价/ ./ 定义/ 2/ ./ 绿云度/ (/ greenclouddegree/ )/ ./ 绿云度/ 是/ 对/ 云/ 计算环境/ 中/ 绿色/ 程度/ 的/ 一种/ 量化/ 表示/ ,/ 绿云度/ Gd/ 取值/ 于/ 描述/ 云/ 计算环境/ 绿云度/ 的/ 集合/ D/ ,/ D/ ∈/ [/ 0/ ,/ 1/ ]/ ./ 绿云度/ Gd/ 可以/ 定义/ 为/ 映射/ Gd/ :/ f/ (/ 犡/ )/ / D/ ,/ 其中/ ,/ f/ 是/ 映射函数/ ,/ 犡/ 是/ 绿/ 云/ 计算/ 的/ 多维/ 性能指标/ 向量/ ./ 具体/ 而言/ ,/ 绿云度/ Gd/ 可以/ 描述/ 如式/ (/ 1/ )/ 所示/ ./ Gd/ =/ f/ (/ 犡/ )/ =/ 犠/ / 犡/ ,/ 烄/ 犠/ =/ (/ w0/ ,/ w1/ ,/ …/ ,/ wn/ -/ 1/ )/ ,/ ∑/ n/ -/ 1/ 烅/ 犡/ =/ (/ x0/ ,/ x1/ ,/ …/ ,/ xn/ -/ 1/ 烆/ 其中/ ,/ 犠/ =/ (/ w0/ ,/ w1/ ,/ …/ ,/ wn/ -/ 1/ )/ 是/ 多维/ 性能指标/ 的/ 权重/ 向量/ ,/ 当/ / wi/ ∈/ 犠/ 时/ ,/ wi/ 的/ 取值/ 范围/ 在/ 区间/ [/ 0/ ,/ 1/ ]/ ,/ 且/ 满足/ ∑/ n/ -/ 1/ 指标/ 向量/ ,/ 不失/ 一般性/ ,/ 当/ / xi/ ∈/ 犡/ 时/ ,/ 设定/ xi/ 是/ 一个/ 连续/ 量/ ,/ 且/ 取值/ 范围/ 在/ 区间/ [/ 0/ ,/ 1/ ]/ ./ 因此/ ,/ 绿云度/ Gd/ 也/ 将/ 是/ 一个/ 连续/ 量/ ,/ 且/ 取值/ 范围/ 为/ [/ 0/ ,/ 1/ ]/ ./ 在/ 一个/ 有/ 五维/ 性能指标/ 的/ 云/ 计算环境/ 中/ ,/ 当/ 多维/ 性能指标/ 向量/ 犡/ =/ (/ 0.97/ ,/ 0.86/ ,/ 0.99/ ,/ 0.92/ ,/ 0.52/ )/ 时/ ,/ 并且/ 权重/ 向量/ 犠/ =/ (/ 0.22/ ,/ 0.26/ ,/ 0.31/ ,/ 0.12/ ,/ 0.09/ )/ ,/ 那么/ 该云/ 计算环境/ 中/ 的/ 绿云度/ Gd/ =/ f/ (/ X/ )/ =/ 犡/ / 犠/ T/ =/ 0.9011/ ./ 为了/ 简化/ 问题/ ,/ 在/ 本文/ 的/ 研究/ 过程/ 中/ ,/ 仅仅/ 选择/ 云/ 数据中心/ 的/ 5/ 个/ 基本/ 的/ 性能指标/ 来/ 实现/ 对绿云/ 计算/ 的/ 评测/ ,/ 该/ 5/ 个/ 性能指标/ 分别/ 为/ 系统/ 能耗/ Esys/ 、/ 系/ Page5/ 统碳/ 排放量/ Csys/ 、/ 系统/ 健康/ Hesys/ 、/ 系统/ 经济/ Ecsys/ 以及/ 系统/ 可持续性/ Susys/ ./ 定义/ 3/ ./ 绿云/ 服务/ (/ greencloudservice/ )/ ./ 绿云/ 服务/ Gs/ 是/ 对/ 绿云/ 提供商/ 所/ 提供/ 的/ 服务/ 等级/ 的/ 描述/ ,/ 该/ 服务/ 等级/ 是/ 由/ 绿云度/ Gd/ 所/ 决定/ 的/ ./ 绿云/ 服务/ Gs/ 可以/ 描述/ 为/ 一个/ 模糊集/ ,/ 当/ L/ 是/ 一个/ 包含/ n/ 个/ 绿云/ 服务/ 级/ 的/ 有序/ 评价/ 向量/ 时/ ,/ 即/ L/ =/ (/ l0/ ,/ l1/ ,/ ln/ -/ 1/ )/ ,/ 并且/ 满足/ 0/ / l0/ </ l1/ </ …/ </ ln/ -/ 1/ / 1/ ./ / li/ ∈/ L/ ,/ li/ 的/ 数值/ 越大/ ,/ 相应/ 的/ 绿云/ 服务/ 等级/ 水平/ 则/ 越/ 高/ ,/ 那么/ 绿云/ 服务/ 判定/ 函数/ Γ/ 实现/ 了/ 绿云度/ Gd/ 到/ 绿云/ 服务/ Gs/ 的/ 映射/ ,/ 如式/ (/ 2/ )/ 所示/ ./ Gs/ =/ Γ/ (/ Gd/ )/ =/ 其中/ ,/ s0/ ,/ s1/ ,/ …/ ,/ sn/ 是/ n/ +/ 1/ 个/ 有序/ 绿云/ 服务/ 集/ ,/ 该绿云/ 服务/ 集/ 的/ 数目/ n/ 可以/ 根据/ 具体/ 的/ 云/ 计算环境/ 需要/ 进行/ 确定/ ./ 定/ 函数/ Γ/ 如下/ ,/ 例如/ :/ 一个/ 绿色/ 非营利/ 组织/ 可定义/ 绿云/ 服务/ 判/ Gs/ =/ Γ/ (/ Gd/ )/ =/ 其中/ ,/ 绿云/ 服务/ 集/ s0/ ,/ s1/ ,/ s/ {/ }/ 2/ =/ {/ 完全/ 非/ 绿色/ 服务/ ,/ 绿色/ 服务/ ,/ 完全/ 绿色/ 服务/ }/ ,/ 而/ 完全/ 非/ 绿色/ 服务/ 、/ 绿色/ 服务/ 、/ 完全/ 绿色/ 服务/ 的/ 具体/ 规范/ 可以/ 根据/ 具体/ 环境/ 进行/ 确定/ ./ 在/ 一个/ 云/ 计算环境/ 中/ ,/ 当其/ 绿云度/ Gd/ =/ 0.15/ 时/ ,/ Γ/ (/ Gd/ )/ =/ Γ/ (/ 0.15/ )/ =/ s0/ ,/ 则/ 意味着/ 该云/ 计算环境/ 将会/ 为/ 其/ 提供/ 完全/ 非/ 绿色/ 服务/ ;/ 当其/ 绿云度/ Gd/ =/ 0.55/ 时/ ,/ Γ/ (/ Gd/ )/ =/ Γ/ (/ 0.55/ )/ =/ s1/ ,/ 则/ 意味着/ 该云/ 计算环境/ 将会/ 为/ 其/ 提供/ 绿色/ 服务/ ;/ 当其/ 绿云度/ Gd/ =/ 0.95/ 时/ ,/ Γ/ (/ Gd/ )/ =/ Γ/ (/ 0.95/ )/ =/ s2/ ,/ 则/ 意味着/ 该云/ 计算环境/ 将会/ 为/ 其/ 提供/ 完全/ 绿色/ 服务/ ./ 2.2/ 绿云/ 体系结构/ 绿云/ 体系结构/ 可以/ 细分/ 为/ 4/ 个/ 空间/ ,/ 即/ 硬件/ 空间/ 、/ 绿色/ 空间/ 、/ 虚拟空间/ 和/ 用户/ 空间/ ,/ 如图/ 3/ 所示/ ./ 在/ 硬件/ 空间/ 中/ ,/ n/ 个/ 数据中心/ 分布/ 于/ 不同/ 的/ 地理位置/ ,/ 在/ 每个/ 数据中心/ 中/ ,/ 有/ 多个/ 性能/ 不同/ 的/ 物理/ 服务器/ ./ 通常/ 情况/ 下/ ,/ 每个/ 服务器/ 上/ 可以/ 运行/ 一个/ 或/ 多个/ 不同/ 或/ 相同/ 配置/ 的/ 虚拟机/ 系统/ ./ 在/ 绿色/ 空间/ 中/ ,/ 在/ VMM/ // hypervisor/ 的/ 统一/ 配置/ 和/ 协调/ 之下/ ,/ 6/ 个/ 绿色/ 模块/ 协调/ 实现/ 相应/ 的/ 绿色/ 服务/ 级/ 目标/ ./ 这/ 6/ 个/ 绿色/ 模块/ 分别/ 是/ 低/ 碳/ 模块/ 、/ 高/ 能效/ 模块/ 、/ 健康/ 模块/ 、/ 经济/ 模块/ 、/ 可持续性/ 模块/ 和/ 管理/ 监控/ 模块/ ,/ 并且/ 分别/ 用于/ 计量/ 碳/ 排放量/ 、/ 能量消耗/ 、/ 辐射/ 等级/ 、/ 投资/ 收益率/ 、/ 可/ 再/ 利用率/ 和/ 进行/ 模块/ 间/ 的/ 管理/ 与/ 监控/ ./ 在/ 虚拟空间/ 中/ ,/ 数据中心/ 可以/ 根据/ 需要/ 创建/ 一个/ 或/ 多个/ 不同/ 配置/ 的/ 虚拟机/ ,/ 并且/ 可以/ 灵活/ 地/ 实现/ 虚拟机/ 的/ 创建/ 、/ 挂/ 起/ 、/ 迁移/ 或/ 终止/ 等/ 不同/ 能耗/ 状态/ 的/ 转变/ ./ 作为/ 用户/ 和/ 数据中心/ 之间/ 的/ 接口/ ,/ 每台/ 虚拟机/ 可以/ 在/ 一个/ 时间/ 片内/ 接受/ 一个/ 用户/ 的/ 服务/ 请求/ ,/ 全部/ 虚拟机/ 可以/ 同时/ 并行/ 工作/ ,/ 并且/ 不同/ 的/ 虚拟机/ 可以/ 根据/ 用户服务/ 请求/ 的/ 需要/ ,/ 配置/ 不同/ 的/ 操作系统/ 、/ 软件/ 环境/ 和/ 用户/ 软件/ ,/ 并/ 设置/ 不同/ 的/ 用户服务/ 级/ 目标/ ./ 因此/ ,/ 可以/ 高效/ 地/ 权衡/ 绿色/ 服务/ 和/ 服务/ 级/ 目标/ 之间/ 的/ 关系/ ./ 在/ 用户/ 空间/ 中/ ,/ 一个/ 或/ 多个/ 用户/ 可以/ 在/ 任何/ 时间/ ,/ 从/ 任何/ 地点/ ,/ 并/ 以/ 任何/ 方式/ 实现/ 对绿云/ 数据中心/ 的/ 服务/ 请求/ 和/ 数据/ 访问/ ./ 对应/ 于/ 该/ 绿云/ 体系结构/ 的/ 绿云/ 模型/ 如/ 定义/ 4/ 所述/ ./ 定义/ 4/ ./ 绿云/ 模型/ (/ greencloudmodel/ )/ ./ 绿云/ 模型/ 可以/ 进一步/ 地/ 描述/ 为/ 一个/ 五元/ 组/ 模型/ ,/ 即/ Gm/ =/ (/ U/ ,/ DC/ ,/ Gs/ ,/ Of/ ,/ Θ/ )/ ,/ 其中/ ,/ U/ =/ u0/ ,/ u1/ ,/ …/ ,/ un/ {/ Page6/ 由/ n/ 个/ 用户/ 组成/ 的/ 用户/ 集合/ ,/ 同时/ ,/ 每个/ 用户/ 的/ 服务/ 请求/ 相互/ 独立/ 、/ 互不/ 干扰/ ;/ DC/ =/ {/ dc0/ ,/ dc1/ ,/ …/ ,/ dcn/ -/ 1/ }/ 是/ 由/ cn/ 个/ 数据中心/ 组成/ 的/ 数据中心/ 集合/ ,/ 其中/ ,/ 第/ i/ 个/ 数据中心/ dci/ =/ {/ pmi0/ ,/ pmi1/ ,/ …/ ,/ pmin/ -/ 1/ }/ ,/ pmik/ (/ 0/ / k/ </ dcni/ )/ 是/ 第/ i/ 个/ 数据中心/ dci/ 中/ 的/ 第/ k/ 台/ 物理/ 服务器/ ;/ Gs/ 是/ 根据/ 非营利/ 绿色/ 组织/ 所/ 定义/ 的/ 一个/ 绿云/ 服务/ 等级/ ;/ Of/ 是/ 为了/ 优化/ 绿云/ 计算环境/ 而/ 定义/ 的/ 目标/ 函数/ ,/ 其/ 定义/ 如式/ (/ 3/ )/ 所示/ ,/ 且/ 通过/ 以下/ 5/ 个/ 性能指标/ 实现/ 对/ 其/ 进行/ 量化/ ,/ 即/ 系统/ 能耗/ Esys/ 、/ 系统/ 碳/ 排放量/ Csys/ 、/ 系统/ 健康/ Hesys/ 、/ 系统/ 经济/ Ecsys/ 以及/ 系统/ 可持续性/ Susys/ ;/ Θ/ 是/ 实现/ 相应/ 优化/ 策略/ 的/ 优化/ 算法/ ./ Of/ =/ Of/ (/ Esys/ ,/ Csys/ ,/ Hesys/ ,/ Ecsys/ ,/ Susys/ )/ =/ max/ (/ Gdsys/ )/ ,/ 烄/ s/ ./ t/ ./ Gdsys/ ∈/ [/ 0/ ,/ 1/ ]/ ,/ min/ (/ Esys/ )/ ,/ Esys/ ∈/ [/ 0/ ,/ 1/ ]/ ,/ min/ (/ Csys/ )/ ,/ Csys/ ∈/ [/ 0/ ,/ 1/ ]/ ,/ 烅/ max/ (/ Hesys/ )/ ,/ Hesys/ ∈/ [/ 0/ ,/ 1/ ]/ ,/ max/ (/ Ecsys/ )/ ,/ Ecsys/ ∈/ [/ 0/ ,/ 1/ ]/ ,/ max/ (/ Susys/ )/ ,/ Susys/ ∈/ [/ 0/ ,/ 1/ ]/ 烆/ 对应/ 于/ 该/ 绿云/ 体系结构/ 的/ 绿云/ 评测/ 周期/ 如/ 定义/ 5/ 所述/ ./ 定义/ 5/ ./ 绿云/ 评测/ 周期/ (/ greencloudevaluatecycle/ )/ ./ 一个/ 完整/ 的/ 绿云/ 评测/ 周期/ 可以/ 细分/ 为/ 4/ 个/ 阶段/ ,/ 即/ 分析阶段/ 、/ 量化/ 阶段/ 、/ 建模/ 阶段/ 和/ 评价/ 阶段/ ,/ 如图/ 4/ 所示/ ./ 周期性地/ 通过/ 该/ 4/ 个/ 阶段/ 工作/ ,/ 可以/ 实现/ 对绿云/ 计算环境/ 的/ 合理/ 评测/ ,/ 同时/ 可以/ 及时/ 、/ 动态/ 地/ 反馈/ 最新/ 的/ 云/ 计算环境/ 信息/ ./ 在/ 分析阶段/ ,/ 实现/ 了/ 对/ 数据中心/ 中/ 能量消耗/ 和/ 服务/ 级/ 目标/ 之间/ 的/ 数学/ 关系/ 的/ 分析/ ,/ 得出/ 了/ 满足/ 绿色/ 服务/ 级/ 目标/ 所/ 需要/ 满足/ 的/ 基本/ 条件/ ./ 在/ 量化/ 阶段/ ,/ 实现/ 了/ 通过/ 多维/ 性能指标/ 的/ 量化/ 以/ 达到/ 量化/ 绿云/ 计算/ 的/ 功能/ ,/ 同时/ 通过/ 多维/ 性能指标/ ,/ 得出/ 了/ 数据中心/ 的/ 绿云度/ ./ 在/ 建模/ 阶段/ ,/ 通过/ FIFO/ 和/ M2EC/ 虚拟机/ 调度/ 算法/ ,/ 实现/ 了/ 对/ 绿云/ 的/ 建模/ ,/ 同时/ 实现/ 了/ 对/ 在线/ 迁移/ 成本/ 的/ 量化/ 和/ 虚拟化/ 迁移/ 的/ 管理/ ,/ 满足/ 了/ 绿云度/ 最小化/ 的/ 需求/ ,/ 并且/ 也/ 满足/ 了/ 绿色/ 服务/ 级/ 目标/ 的/ 需求/ ./ 最后/ ,/ 在/ 评价/ 阶段/ ,/ 实现/ 了/ 对/ 大规模/ 数据中心/ 绿色/ 服务/ 级/ 目标/ 的/ 评价/ ,/ 有效/ 地/ 权衡/ 了/ 绿云/ 计算/ 和/ 服务/ 级/ 目标/ ./ 2.3/ 绿云/ 服务/ 级/ 目标/ 在/ 用户/ 和/ 服务提供商/ 之间/ ,/ 服务/ 级/ 目标/ (/ ServiceLevelObjectives/ ,/ SLOs/ )/ 是/ 服务/ 级/ 协议/ 的/ 最/ 核心内容/ (/ ServiceLevelAgreement/ ,/ SLA/ )/ ,/ 且/ 服务/ 级/ 目标/ 可以/ 通过/ 服务/ 级/ 协议/ 的/ 多个/ 不同/ 特征/ 属性/ 实现/ 对/ 其/ 度量/ ,/ 如/ 可用性/ 、/ 可/ 测量/ 性/ 、/ 可控性/ 、/ 可/ 理解/ 性/ 、/ 可/ 支付/ 性/ 等/ [/ 28/ -/ 31/ ]/ ./ 如图/ 5/ 所示/ ,/ 在/ 绿色/ 服务/ 级/ 目标/ 中/ ,/ 不仅仅/ 考虑/ 到/ 了/ 服务/ 级/ 目标/ ,/ 同时/ 也/ 考虑/ 到/ 了/ 绿云/ 计算/ ,/ 实现/ 了/ 对/ 三元/ 底线/ 间/ 的/ 利益/ 均衡/ ,/ 可以/ 通过/ 在/ 云/ 计算环境/ 的/ 全部/ 生命周期/ 过程/ 中/ 的/ 多维/ 性能指标/ 实现/ 对/ 其/ 量化/ ,/ 如碳/ 排放量/ 、/ 高/ 能效/ 、/ 健康/ 性/ 、/ 经济性/ 、/ 可持续性/ 等/ ./ 3/ 绿云/ 量化/ 本/ 节/ 给出/ 了/ 对/ 云/ 计算环境/ 中/ 5/ 个/ 基本/ 性能指标/ 的/ 量化/ ,/ 同时/ 通过/ 组合/ 该/ 5/ 个/ 基本/ 性能指标/ ,/ 实现/ 了/ 对/ 云/ 计算环境/ 中绿云度/ 的/ 量化/ ./ 3.1/ 多维/ 性能指标/ 量化/ 在/ 云/ 计算环境/ 中/ ,/ 多维/ 性能/ 量化/ 指标/ 主要/ 选取/ 以下/ 5/ 个/ 基本/ 的/ 性能指标/ ,/ 即/ 系统/ 能耗/ Esys/ 、/ 系统/ 碳/ 排放量/ Csys/ 、/ 系统/ 健康/ Hesys/ 、/ 系统/ 经济/ Ecsys/ 和/ 系统/ 可持续性/ Susys/ ./ 3.1/ ./ 1/ 系统/ 能耗/ 在/ 云/ 计算环境/ 中/ ,/ 第/ i/ 个/ 数据中心/ 的/ 第/ j/ 个/ 节点/ cnij/ 的/ 能耗/ Ecnij/ ,/ 可以/ 通过/ 节点/ cnij/ 在/ 时间段/ Page7/ [/ t0/ ,/ tn/ -/ 1/ ]/ 内/ 的/ 电能/ 消耗量/ Pcnij/ (/ μ/ (/ t/ )/ )/ 计算/ 得出/ ,/ 如式/ (/ 4/ )/ 所示/ ./ 其中/ ,/ 第/ i/ 个/ 数据中心/ 的/ 第/ j/ 个/ 节点/ cnij/ 在/ 时间段/ [/ t0/ ,/ tn/ -/ 1/ ]/ 内/ 的/ 电能/ 消耗量/ Pcnij/ (/ μ/ (/ t/ )/ )/ ,/ 可以/ 进一步/ 细分/ 为/ Pidlcnij/ (/ μ/ ij/ (/ t/ )/ )/ 和/ Pspdcnij/ (/ μ/ ij/ (/ t/ )/ )/ ,/ 如式/ (/ 5/ )/ 所示/ ./ Pcnij/ (/ μ/ ij/ (/ t/ )/ )/ =/ Pidlcnij/ (/ μ/ ij/ (/ t/ )/ )/ +/ Pspdcnij/ (/ μ/ ij/ (/ t/ )/ )/ (/ 5/ )/ 其中/ ,/ Pidlcnij/ (/ μ/ ij/ (/ t/ )/ )/ 是/ 第/ i/ 个/ 数据中心/ 的/ 第/ j/ 个/ 节点/ cnij/ 的/ 基本/ (/ idlestate/ )/ 电能/ 消耗/ ;/ Pspdcnij/ (/ μ/ ij/ (/ t/ )/ )/ 是/ 第/ i/ 个/ 数据中心/ 的/ 第/ j/ 个/ 节点/ cnij/ 提供/ 服务/ 时所/ 需要/ 具备/ (/ spreadstate/ )/ 的/ 电量/ 消耗/ ,/ μ/ ij/ (/ t/ )/ ∈/ [/ 0/ ,/ 1/ ]/ 是/ 第/ i/ 个/ 数据中心/ 的/ 第/ j/ 个/ 节点/ cnij/ 的/ 实时/ 动态变化/ 的/ 负载/ 因子/ ,/ 在/ 当前/ 数据中心/ 的/ 负载/ 状况/ 下/ ,/ 负载/ 因子/ μ/ ij/ (/ t/ )/ 的/ 实际/ 取值/ 通常/ 在/ 区间/ [/ 0.1/ ,/ 0.5/ ]/ 内/ ./ 节点/ cnij/ 的/ 电能/ 消耗量/ Pcnij/ (/ μ/ ij/ (/ t/ )/ )/ 是/ 由/ CPU/ 、/ 内存/ 、/ 磁盘/ 等/ 设备/ 的/ 电能/ 消耗量/ 共同/ 决定/ 的/ [/ 12/ ,/ 19/ ,/ 32/ ,/ 33/ ]/ ./ 由于/ CPU/ 是/ 最/ 主要/ 的/ 电能/ 消耗/ 设备/ ,/ 为了/ 简化/ 起/ 见/ ,/ 节点/ cnij/ 的/ 电能/ 消耗量/ Pcnij/ (/ μ/ ij/ (/ t/ )/ )/ 可以/ 通过/ CPU/ 的/ 电能/ 消耗量/ 来/ 计算/ ,/ 如式/ (/ 6/ )/ 所示/ ./ Pidlcnij/ (/ μ/ ij/ (/ t/ )/ )/ =/ α/ ·/ Pcnij/ (/ max/ )/ ,/ α/ ∈/ [/ 0/ ,/ 1/ ]/ 烄/ Pspdcnij/ (/ μ/ ij/ (/ t/ )/ )/ =/ (/ 1/ -/ α/ )/ ·/ Pcnij/ (/ max/ )/ ·/ μ/ ij/ (/ t/ )/ ,/ 烅/ 烆/ 其中/ ,/ Pcnij/ (/ max/ )/ 是/ 第/ i/ 个/ 数据中心/ 的/ 第/ j/ 个/ 节点/ cnij/ 在/ 全/ 负荷/ 状态/ 下/ 的/ 最大/ 电能/ 消耗量/ ,/ α/ ∈/ [/ 0/ ,/ 1/ ]/ 是/ Pidlcnij/ (/ μ/ ij/ (/ t/ )/ )/ 和/ Pspdcnij/ (/ μ/ ij/ (/ t/ )/ )/ 的/ 调节/ 参数/ ,/ α/ 的/ 取值/ 由/ 计算机/ 体系结构/ 决定/ ./ Pidlcnij/ (/ μ/ ij/ (/ t/ )/ )/ 、/ Pspdcnij/ (/ μ/ ij/ (/ t/ )/ )/ 和/ Pcnij/ (/ μ/ ij/ (/ t/ )/ )/ 之间/ 的/ 关系/ [/ 12/ ,/ 32/ -/ 33/ ]/ ,/ 如图/ 6/ 所示/ ,/ 第/ i/ 个/ 数据中心/ 的/ 第/ j/ 个/ 节点/ cnij/ 的/ 能耗/ Ecnij/ 由/ 定理/ 1/ 给出/ ./ 图/ 6Pidlcnij/ (/ μ/ ij/ (/ t/ )/ )/ ,/ Pspdcnij/ (/ μ/ ij/ (/ t/ )/ )/ 和/ Pcnij/ (/ μ/ ij/ (/ t/ )/ )/ 之间/ 的/ 关系/ 定理/ 1/ ./ 当/ 时间/ 区间/ [/ t0/ ,/ tn/ -/ 1/ ]/ 可以/ 进一步/ 细分/ 为/ [/ t0/ ,/ t1/ ,/ …/ ,/ tn/ -/ 1/ ]/ 时/ ,/ 且/ / [/ tk/ ,/ tk/ +/ 1/ ]/ ,/ k/ ∈/ [/ 0/ ,/ 1/ ,/ …/ ,/ n/ -/ 1/ ]/ ,/ 满足/ μ/ ij/ (/ t/ ∈/ [/ tk/ ,/ tk/ +/ 1/ ]/ )/ ≡/ μ/ ijk/ ,/ 其中/ ,/ μ/ ijk/ 是/ 不/ 随/ 时间/ 变化/ 的/ 常量/ ,/ 且/ μ/ ijk/ ∈/ [/ 0/ ,/ 1/ ]/ ,/ 那么/ ,/ 第/ i/ 个/ 数据中心/ 的/ 第/ j/ 个/ 节点/ cnij/ 的/ 能耗/ Ecnij/ 如式/ (/ 7/ )/ 所示/ ./ Ecnij/ =/ (/ α/ ·/ Pcnij/ (/ max/ )/ )/ ·/ (/ tn/ -/ 1/ -/ t0/ )/ +/ (/ (/ 1/ -/ α/ )/ ·/ Pcnij/ (/ max/ )/ )/ ·/ ∑/ n/ -/ 1/ 证明/ ./ 由于/ 第/ i/ 个/ 数据中心/ 的/ 第/ j/ 个/ 节点/ cnij/ 的/ 电能/ 消耗量/ Pcnij/ (/ μ/ ij/ (/ t/ )/ )/ 可以/ 细分/ 为/ Pidlcnij/ (/ μ/ ij/ (/ t/ )/ )/ 和/ Pspdcnij/ (/ μ/ ij/ (/ t/ )/ )/ 两/ 部分/ ,/ 那么/ ,/ Ecnij/ =/ ∫/ tn/ -/ 1/ =/ ∫/ tn/ -/ 1/ =/ ∫/ tn/ -/ 1/ =/ ∫/ tn/ -/ 1/ ∫/ tn/ -/ 1/ =/ (/ α/ ·/ Pcnij/ (/ max/ )/ )/ ·/ (/ tn/ -/ 1/ -/ t0/ )/ +/ ∫/ tn/ -/ 1/ 当/ 时间/ 区间/ [/ t0/ ,/ tn/ -/ 1/ ]/ 可以/ 进一步/ 细分/ 为/ n/ -/ 1/ 个/ 时间/ 区间/ [/ t0/ ,/ t1/ ,/ t2/ ,/ …/ ,/ tn/ -/ 2/ ,/ tn/ -/ 1/ ]/ 时/ ,/ 且/ / t/ ∈/ [/ tk/ ,/ tk/ +/ 1/ ]/ ,/ i/ ∈/ [/ 0/ ,/ 1/ ,/ …/ ,/ n/ -/ 1/ ]/ ,/ 满足/ μ/ ij/ (/ t/ ∈/ [/ tk/ ,/ tk/ +/ 1/ ]/ )/ ≡/ μ/ ijk/ ,/ 其中/ ,/ μ/ ijk/ 是/ 不/ 随/ 时间/ 变化/ 的/ 常量/ ,/ 且/ μ/ ijk/ ∈/ [/ 0/ ,/ 1/ ]/ ,/ 那么/ ,/ Ecnij/ =/ (/ α/ ·/ Pcnij/ (/ max/ )/ )/ ·/ (/ tn/ -/ 1/ -/ t0/ )/ +/ ∫/ tn/ -/ 1/ =/ (/ α/ ·/ Pcnij/ (/ max/ )/ )/ ·/ (/ tn/ -/ 1/ -/ t0/ )/ +/ ∫/ t1/ ∫/ t2/ ∫/ tn/ -/ 1/ =/ (/ α/ ·/ Pcnij/ (/ max/ )/ )/ ·/ (/ tn/ -/ 1/ -/ t0/ )/ +/ =/ (/ α/ ·/ Pcnij/ (/ max/ )/ )/ ·/ (/ tn/ -/ 1/ -/ t0/ )/ +/ =/ (/ α/ ·/ Pcnij/ (/ max/ )/ )/ ·/ (/ tn/ -/ 1/ -/ t0/ )/ +/ Page8/ (/ (/ 1/ -/ α/ )/ ·/ Pcnij/ (/ max/ )/ )/ ·/ ∑/ n/ -/ 1/ 如图/ 7/ 所示/ ,/ 随着/ 参数/ α/ 的/ 不断/ 增加/ ,/ Pidlcnij/ (/ μ/ ij/ (/ t/ )/ )/ 也/ 将/ 不断/ 增加/ ,/ 而/ Pspdcnij/ (/ μ/ ij/ (/ t/ )/ )/ 将/ 不断/ 减少/ ,/ 但/ 节点/ cnij/ 的/ 总/ 电能/ 消耗量/ Pcnij/ (/ μ/ ij/ (/ t/ )/ )/ 最终/ 将/ 不断/ 增加/ ./ 同时/ ,/ 随着/ 负载/ 因子/ μ/ ij/ (/ t/ )/ 的/ 不断/ 增加/ ,/ 节点/ cnij/ 的/ 总/ 电能/ 消耗量/ Pcnij/ (/ μ/ ij/ (/ t/ )/ )/ 最终/ 也/ 将/ 不断/ 增加/ ./ 可见/ 保持/ 较/ 低/ 的/ Pidlcnij/ (/ μ/ ij/ (/ t/ )/ )/ ,/ 可以/ 有效/ 地/ 减少/ 节点/ cnij/ 的/ 总/ 电能/ 消耗量/ Pcnij/ (/ μ/ ij/ (/ t/ )/ )/ ./ 图/ 7Pcnij/ (/ μ/ ij/ (/ t/ )/ )/ 和/ Pidlcnij/ (/ μ/ ij/ (/ t/ )/ )/ 之间/ 的/ 关系/ 定义/ 6/ ./ 系统/ 能耗/ (/ systemenergyconsump/ -/ tion/ )/ ./ 系统/ 能耗/ Esys/ 是/ 对/ 云/ 计算环境/ 中/ 每个/ 节点/ 单位/ 时间/ 内/ 的/ 能量消耗/ 的/ 一种/ 度量/ ,/ 当/ 一个/ 云/ 计算环境/ 由/ m/ 个/ 数据中心/ 组成/ ,/ 且/ 节点/ 数量/ 向量/ 犖/ 狌/ 犿/ =/ (/ num0/ ,/ num1/ ,/ …/ ,/ numm/ -/ 1/ )/ ,/ 其中/ numi/ 是/ 第/ i/ 个/ 数据中心/ 所/ 拥有/ 的/ 节点/ 数目/ ,/ 那么/ ,/ 整个/ 系统/ 在/ 时间/ 区间/ [/ t0/ ,/ tn/ -/ 1/ ]/ 内/ 的/ 能耗/ Esys/ 如式/ (/ 8/ )/ 所示/ ./ 由于/ 第/ i/ 个/ 数据中心/ 的/ 第/ j/ 个/ 节点/ cnij/ 的/ 最大/ 电能/ 消耗量/ Pcnij/ (/ max/ )/ 可以/ 根据/ 其/ 体系结构/ 来/ 确定/ ,/ 那么/ ,/ 由式/ (/ 7/ )/ 可以/ 得出/ i/ =/ 0/ ∑/ numi/ ∑/ m/ -/ 1/ (/ (/ 1/ -/ α/ )/ ·/ Pcnij/ (/ max/ )/ )/ ·/ ∑/ n/ -/ 1Esys/ =/ ./ 3.1/ ./ 2/ 系统/ 碳/ 排放量/ 由于/ 第/ i/ 个/ 数据中心/ 的/ 第/ j/ 个/ 节点/ cnij/ 在/ 时间段/ [/ t0/ ,/ tn/ -/ 1/ ]/ 内/ 的/ 碳/ 排放量/ Ccnij/ 可以/ 使用/ 相关/ 仪器/ 直接/ 测量/ 出来/ ,/ 那么/ ,/ 系统/ 碳/ 排放量/ Csys/ 可/ 由/ 定义/ 7/ 给出/ ./ 定义/ 7/ ./ 系统/ 碳/ 排放量/ (/ systemcarbonemis/ -/ sion/ )/ ./ 系统/ 碳/ 排放量/ Csys/ 是/ 对/ 云/ 计算环境/ 中/ 每个/ 节点/ 单位/ 时间/ 内/ 的/ 碳/ 排放量/ 的/ 一种/ 度量/ ,/ 当/ 一个/ 云/ 计算环境/ 由/ m/ 个/ 数据中心/ 组成/ ,/ 且/ 节点/ 数量/ 向量/ 犖/ 狌/ 犿/ =/ (/ num0/ ,/ num1/ ,/ …/ ,/ numm/ -/ 1/ )/ ,/ 其中/ numi/ 是/ 第/ i/ 个/ 数据中心/ 所/ 拥有/ 的/ 节点/ 数目/ ,/ 那么/ ,/ 整个/ 云/ 系统/ 在/ 时间段/ [/ t0/ ,/ tn/ -/ 1/ ]/ 内/ 的/ 碳/ 排放量/ Csys/ 如式/ (/ 9/ )/ 所示/ ./ 3.1/ ./ 3/ 系统/ 健康/ 由于/ 第/ i/ 个/ 数据中心/ 的/ 第/ j/ 个/ 节点/ cnij/ 在/ 时间/ 区间/ [/ t0/ ,/ tn/ -/ 1/ ]/ 内/ 的/ 实时/ 辐射量/ Hecnij/ 可以/ 使用/ 相关/ 仪器/ 直接/ 测量/ 出来/ ,/ 那么/ ,/ 系统/ 健康/ Hesys/ 可/ 由/ 定义/ 8/ 给出/ ./ 定义/ 8/ ./ 系统/ 健康/ (/ systemhealthful/ )/ ./ 系统/ 健康/ Hesys/ 是/ 对/ 云/ 计算环境/ 中/ 每个/ 节点/ 单位/ 时间/ 内/ 的/ 辐射量/ 的/ 一种/ 度量/ ,/ 当/ 一个/ 云/ 计算环境/ 由/ m/ 个/ 数据中心/ 组成/ ,/ 且/ 节点/ 数量/ 向量/ 犖/ 狌/ 犿/ =/ (/ num0/ ,/ num1/ ,/ …/ ,/ numm/ -/ 1/ )/ ,/ 其中/ numi/ 是/ 第/ i/ 个/ 数据中心/ 所/ 拥有/ 的/ 节点/ 数目/ ,/ 那么/ ,/ 整个/ 系统/ 在/ 时间段/ [/ t0/ ,/ tn/ -/ 1/ ]/ 内/ 的/ 系统/ 健康/ Hesys/ 如式/ (/ 10/ )/ 所示/ ./ 3.1/ ./ 4/ 系统/ 经济/ 在/ 云/ 计算环境/ 中/ ,/ 第/ i/ 个/ 数据中心/ 的/ 第/ j/ 个/ 节点/ cnij/ 在/ 时间段/ [/ t0/ ,/ tn/ -/ 1/ ]/ 内/ 的/ 经济效益/ Eccnij/ 可由式/ (/ 11/ )/ 计算/ ,/ 那么/ ,/ 系统/ 经济/ Ecsys/ 由/ 定义/ 9/ 给出/ ./ 其中/ ,/ Ccnij/ (/ tn/ -/ 1/ ,/ t0/ )/ 是/ 节点/ cnij/ 在/ 时间/ 区间/ [/ t0/ ,/ tn/ -/ 1/ ]/ 内/ 的/ 直接/ 总成本/ ,/ Rcnij/ (/ tn/ -/ 1/ ,/ t0/ )/ 是/ 节点/ cnij/ 在/ 时间/ 区间/ [/ t0/ ,/ tn/ -/ 1/ ]/ 内/ 的/ 直接/ 总/ 收益/ ./ 为了/ 简化/ 起/ 见/ ,/ 假设/ t0/ =/ tstart/ ,/ tn/ -/ 1/ →/ +/ ,/ 那么/ ,/ Ccnij/ (/ t/ +/ ,/ tstart/ )/ 将/ 是/ 节点/ cnij/ 购买/ 时/ 的/ 总成本/ ,/ Rcnij/ (/ t/ +/ ,/ tstart/ )/ 将/ 是/ 节点/ cnij/ 在/ 运行/ 期间/ 内所能/ 实现/ 的/ 直接/ 总/ 收益/ ./ 定义/ 9/ ./ 系统/ 经济/ (/ systemeconomics/ )/ ,/ 系统/ 经济/ Ecsys/ 是/ 对/ 云/ 计算环境/ 中/ 每个/ 节点/ 单位/ 时间/ 内/ 的/ 经济效益/ 的/ 一种/ 度量/ ,/ 当/ 一个/ 云/ 计算环境/ 由/ m/ 个/ 数据中心/ 组成/ ,/ 且/ 节点/ 数量/ 向量/ 犖/ 狌/ 犿/ =/ (/ num0/ ,/ num1/ ,/ …/ ,/ numm/ -/ 1/ )/ ,/ 其中/ numi/ 是/ 第/ i/ 个/ 数据中心/ Page9/ 所/ 拥有/ 的/ 节点/ 数目/ ,/ 那么/ ,/ 整个/ 系统/ 在/ 时间/ 区间/ [/ t0/ ,/ tn/ -/ 1/ ]/ 内/ 的/ 系统/ 经济/ Ecsys/ 如式/ (/ 12/ )/ 所示/ ./ 根据/ 式/ (/ 11/ )/ 可以/ 得出/ Ecsys/ =/ ∑/ m/ -/ 13.1/ ./ 5/ 系统/ 可持续性/ 在/ 云/ 计算环境/ 中/ ,/ 第/ i/ 个/ 数据中心/ 的/ 第/ j/ 个/ 节点/ cnij/ 在/ 时间/ 区间/ [/ t0/ ,/ tn/ -/ 1/ ]/ 内/ 的/ 可持续性/ Sucnij/ 可由式/ (/ 13/ )/ 计算/ ,/ 那么/ ,/ 系统/ 可持续性/ Susys/ 可/ 由/ 定义/ 10/ 给出/ ./ 其中/ ,/ Ccnij/ (/ tn/ -/ 1/ ,/ t0/ )/ 是/ 节点/ cnij/ 在/ 时间段/ [/ t0/ ,/ tn/ -/ 1/ ]/ 内/ 的/ 直接/ 总成本/ ,/ Rccnij/ (/ tn/ -/ 1/ ,/ t0/ )/ 是/ 节点/ cnij/ 在/ 时间/ 区间/ [/ t0/ ,/ tn/ -/ 1/ ]/ 内/ 的/ 可/ 再/ 利用/ 时能/ 获得/ 的/ 总/ 收益/ ./ 为了/ 简化/ 起/ 见/ ,/ 假设/ t0/ =/ tstart/ ,/ tn/ -/ 1/ →/ +/ ,/ 那么/ ,/ Ccnij/ (/ tn/ -/ 1/ ,/ t0/ )/ 将/ 是/ 节点/ cnij/ 购买/ 时/ 的/ 总成本/ ,/ Rccnij/ (/ tn/ -/ 1/ ,/ t0/ )/ 将/ 是/ 节点/ cnij/ 被/ 废弃/ 之后/ 能/ 被/ 再/ 利用/ 时所/ 带来/ 的/ 直接/ 总/ 收益/ ./ 定义/ 10/ ./ 系统/ 可持续性/ (/ systemsustainable/ )/ ./ 系统/ 可持续性/ Susys/ 是/ 对/ 云/ 计算环境/ 中/ 每个/ 节点/ 单位/ 时间/ 内/ 的/ 可/ 循环/ 再/ 利用/ 收益/ 的/ 一种/ 度量/ ,/ 当/ 一个/ 云/ 计算环境/ 由/ m/ 个/ 数据中心/ 组成/ ,/ 且/ 节点/ 数量/ 向量/ 犖/ 狌/ 犿/ =/ (/ num0/ ,/ num1/ ,/ …/ ,/ numm/ -/ 1/ )/ ,/ 其中/ numi/ 是/ 第/ i/ 个/ 数据中心/ 所/ 拥有/ 的/ 节点/ 数目/ ,/ 那么/ ,/ 整个/ 系统/ 在/ 时间/ 区间/ [/ t0/ ,/ tn/ -/ 1/ ]/ 内/ 的/ 可持续性/ Susys/ 如式/ (/ 14/ )/ 所示/ ./ 根据/ 式/ (/ 13/ )/ 可以/ 得出/ Susys/ =/ ∑/ m/ -/ 13.2/ 绿云度/ 度量/ 云/ 计算环境/ 的/ 绿云度/ Gd/ 可以/ 通过/ 以下/ 5/ 个/ 基本/ 性能指标/ 计量/ 得出/ ,/ 即/ 系统/ 能耗/ Esys/ 、/ 系统/ 碳/ 排放量/ Csys/ 、/ 系统/ 健康/ Hesys/ 、/ 系统/ 经济/ Ecsys/ 以及/ 系统/ 可持续性/ Susys/ ,/ 也/ 即/ 五维/ 性能指标/ 向量/ 犡/ =/ (/ E/ -/ 1sys/ ,/ C/ -/ 1sys/ ,/ Hesys/ ,/ Ecsys/ ,/ Susys/ )/ ./ 当/ 每个/ 性能指标/ 均/ 被/ 测量/ n/ 次时/ ,/ 五维/ 性能指标/ 向量/ 犡/ 就/ 转换/ 为/ 矩阵/ 犕/ n/ ×/ 5/ =/ (/ pij/ )/ n/ ×/ 5/ ./ 在/ 更为/ 一般/ 的/ 情况/ 下/ ,/ 假设/ 有/ m/ 个/ 性能指标/ ,/ 那么/ ,/ 犕/ n/ ×/ m/ =/ (/ pij/ )/ n/ ×/ m/ ,/ 其中/ pij/ 是/ 第/ j/ 个/ 性能指标/ 的/ 第/ i/ 次/ 取值/ ./ 一般而言/ ,/ m/ 维/ 性能指标/ 之间/ 的/ 度量/ 单位/ 是/ 不/ 统一/ 的/ ,/ 为了/ 消除/ 不同/ 度量/ 指标/ 之间/ 度量/ 单位/ 的/ 差异性/ ,/ 需要/ 对/ 矩阵/ 犕/ n/ ×/ m/ 进行/ 标准差/ 标准化/ 处理/ ./ 另外/ ,/ 为了/ 保证/ 矩阵/ 犕/ n/ ×/ m/ 中/ 所有/ 数据/ 的/ 取值/ 均/ 在/ 区间/ [/ 0/ ,/ 1/ ]/ 内/ ,/ 需要/ 对/ 标准差/ 标准化/ 后/ 的/ 矩阵/ 犕/ n/ ×/ m/ 进行/ 极差/ 标准化/ 处理/ [/ 34/ ]/ ./ 对/ 矩阵/ 犕/ n/ ×/ m/ 进行/ 标准差/ 标准化/ 处理/ ,/ 如式/ (/ 15/ )/ 所示/ ,/ i/ ∈/ {/ 0/ ,/ 1/ ,/ …/ ,/ n/ -/ 1/ }/ ,/ j/ ∈/ {/ 0/ ,/ 1/ ,/ …/ ,/ m/ -/ 1/ }/ (/ 15/ )/ 其中/ ,/ p/ -/ ·/ j/ =/ 1/ 标的/ 均值/ ,/ S/ ·/ j/ 的/ 定义/ 如式/ (/ 16/ )/ 所示/ ,/ 是/ 矩阵/ 犕/ n/ ×/ m/ 的/ 第/ j/ 个/ 性能指标/ 的/ 标准差/ ./ 那么/ ,/ 标准差/ 标准化/ 处理/ 后/ 的/ 矩阵/ 犕/ n/ ×/ m/ =/ (/ pij/ )/ n/ ×/ m/ ./ (/ pij/ -/ p/ -/ ·/ j/ )/ 槡/ 2/ ,/ i/ ∈/ {/ 0/ ,/ 1/ ,/ …/ ,/ n/ -/ 1/ }/ S/ ·/ j/ =/ 1/ 经过/ 标准化/ 处理/ 后/ ,/ 可以/ 保证/ 矩阵/ 犕/ n/ ×/ m/ 中/ 每个/ 性能指标/ 的/ 均值/ 为/ 0/ ,/ 方差/ 为/ 1/ ,/ 但是/ 并/ 不/ 保证/ 所有/ 数据/ 元素/ 的/ 取值/ 范围/ 在/ 区间/ [/ 0/ ,/ 1/ ]/ 内/ ./ 为了/ 保证/ 矩阵/ 犕/ n/ ×/ m/ 中/ 所有/ 数据/ 的/ 取值/ 均/ 在/ 区间/ [/ 0/ ,/ 1/ ]/ 内/ ,/ 需要/ 对/ 标准差/ 标准化/ 后/ 的/ 矩阵/ 犕/ n/ ×/ m/ 通过/ 式/ (/ 17/ )/ 进行/ 极差/ 标准化/ 处理/ ,/ 极差/ 标准化/ 处理/ 后/ 的/ 矩阵/ 犕/ n/ ×/ m/ =/ (/ pij/ )/ n/ ×/ m/ ./ i/ ∈/ {/ 0/ ,/ 1/ ,/ …/ ,/ n/ -/ 1/ }/ ,/ j/ ∈/ {/ 0/ ,/ 1/ ,/ …/ ,/ m/ -/ 1/ }/ (/ 17/ )/ 其中/ ,/ 参数/ pminj/ =/ min/ (/ p0j/ ,/ p1j/ ,/ …/ ,/ pn/ -/ 1j/ )/ ,/ 参数/ pmaxj/ =/ max/ (/ p0j/ ,/ p1j/ ,/ …/ ,/ pn/ -/ 1j/ )/ ./ m/ 维/ 性能指标/ 的/ 权重/ 向量/ 犠/ =/ (/ w0/ ,/ w1/ ,/ …/ ,/ wm/ -/ 1/ )/ ,/ 其中/ wi/ ∈/ [/ 0/ ,/ 1/ ]/ 是/ 第/ j/ 维/ 性能指标/ 的/ 权重/ ,/ 且/ ∑/ m/ -/ 1wi/ =/ 1/ ./ i/ =/ 0/ 那么/ ,/ 最终/ 的/ 绿云度/ 可以/ 通过/ 矩阵/ 犕/ n/ ×/ m/ 和/ 权重/ 向量/ 犠/ 相互/ 结合/ 计算/ 得出/ ,/ 即犌犇/ =/ (/ Gd0/ ,/ Page10Gd1/ ,/ …/ ,/ Gdn/ -/ 1/ )/ 可以/ 通过/ 式/ (/ 18/ )/ 计算/ 得出/ ,/ 且/ / Gdi/ ∈/ 犌犇/ ,/ Gdi/ 是/ 在/ 区间/ [/ 0/ ,/ 1/ ]/ 内/ 的/ 连续/ 量/ ,/ 系统/ 最终/ 的/ 绿云度/ 是/ 这/ n/ 次/ 处理结果/ 的/ 均值/ ./ 即/ Gdi/ =/ ∑/ m/ -/ 1/ 其中/ ,/ Gdi/ 是/ 系统/ 中/ 第/ i/ 次/ 的/ 绿云度/ 处理结果/ ./ 4/ 绿云/ 优化/ 在/ 本节/ 中/ ,/ 给出/ 了/ 对/ 在线/ 迁移/ 成本/ 的/ 量化/ 和/ 虚拟机/ 迁移/ 的/ 有效/ 管理/ 方法/ ,/ 同时/ 通过/ FIFO/ 虚拟机/ 调度/ 算法/ 和/ M2EC/ 启发式/ 虚拟机/ 调度/ 算法/ 实现/ 对/ 绿云度/ 的/ 最小化/ ,/ 并/ 满足/ 了/ 对/ 绿云/ 计算环境/ 中/ 的/ 绿色/ 服务/ 级/ 目标/ ./ 4.1/ 在线/ 迁移/ 成本/ 量化/ 在线/ 迁移/ 虚拟机/ ,/ 是/ 指/ 在/ 不/ 中断/ 应用服务/ 的/ 前提/ 下/ ,/ 实现/ 将/ 虚拟机/ 从/ 一台/ 服务器/ 迁移/ 到/ 另一台/ 服务器/ ,/ 满足/ 全局/ 的/ 负载/ 均衡/ ;/ 或者/ 是/ 在/ 可/ 预见/ 的/ 未来/ 当前/ 服务器/ 可能/ 要/ 崩溃/ 时/ ,/ 需要/ 将/ 当前/ 服务器/ 上/ 的/ 在线/ 应用/ 迁移/ 到/ 其他/ 可/ 正常/ 提供/ 服务/ 的/ 服务器/ 上来/ ,/ 以/ 满足用户/ 的/ 服务/ 级/ 目标/ [/ 35/ -/ 45/ ]/ ./ 然而/ 在/ 在线/ 迁移/ 的/ 过程/ 中/ ,/ 也/ 将/ 会/ 影响/ 到/ 当前/ 迁移/ 虚拟机/ 中/ 所/ 正在/ 运行/ 的/ 应用服务/ ./ 一方面/ ,/ 由于/ 在线/ 迁移/ 过程/ 包括/ 以下/ 6/ 个/ 步骤/ :/ 预/ 迁移/ (/ pre/ -/ migration/ )/ 、/ 等待/ 迁移/ (/ reservation/ )/ 、/ 预/ 拷贝/ (/ iterativepre/ -/ copy/ )/ 、/ 拷贝/ (/ stop/ -/ and/ -/ copy/ )/ 、/ 迁移/ (/ commitment/ )/ 和/ 激活/ (/ activation/ )/ ,/ 而/ 这/ 6/ 步均/ 需要/ 消耗掉/ 一定/ 的/ 时间/ ,/ 因此/ ,/ 势必/ 将/ 增加/ 待/ 迁移/ 虚拟机/ 中/ 的/ 在线/ 服务/ 的/ 完成/ 时间/ ./ 另一方面/ ,/ 由于/ 待/ 迁移/ 虚拟机/ 中/ 的/ 服务/ 可能/ 因为/ 缺少/ 所/ 需要/ 的/ 资源/ 而/ 被迫/ 中止/ ,/ 因此/ 在线/ 迁移/ 过程/ 中/ 也/ 可能/ 会/ 影响/ 到/ 在线/ 服务/ 的/ 服务质量/ ./ 可见/ 需要/ 实现/ 对/ 在线/ 迁移/ 的/ 时间/ 成本/ 和/ 性能/ 成本/ 进行/ 量化/ ,/ 实现/ 相关/ 成本/ 的/ 最小化/ ,/ 才能/ 改善/ 云/ 计算环境/ 中/ 的/ 绿云度/ Gd/ ./ 虚拟机/ VMi/ 在线/ 迁移/ 的/ 时间/ 成本/ tcVMi/ 可以/ 细分/ 为/ 3/ 部分/ ,/ 如式/ (/ 20/ )/ 所示/ ,/ 即/ 关机/ (/ shutdown/ )/ 时间/ 成本/ tcsd/ 本/ tcmg/ 时间/ 成本/ 与/ 运行/ 于/ 虚拟机/ 之上/ 的/ 应用服务/ 无关/ ,/ 而/ 只/ 与/ 虚拟机/ 本身/ 的/ 特征/ 有关/ ./ VMi/ 以及/ 启动/ (/ startup/ )/ 时间/ 成本/ tcsu/ 其中/ ,/ 关机/ 时间/ 成本/ tcsd/ 一种/ 特定/ 的/ 虚拟机/ 而言/ 将/ 是/ 一个/ 固定值/ ,/ 即/ 为/ 常量/ ;/ 迁移/ 持续时间/ 成本/ tcmg/ 的/ 文件/ 大/ 小S/ VMi/ 以及/ 当前/ 系统/ 可用/ 带宽/ BVMi/ 之间/ 的/ 关系/ 如式/ (/ 21/ )/ 所示/ ./ 虚拟机/ VMi/ 在线/ 迁移/ 的/ 性能/ 成本/ pcVMi/ 如式/ (/ 22/ )/ 所示/ [/ 36/ -/ 39/ ]/ ./ 其中/ ,/ θ/ i/ 是/ 调节/ 参数/ ,/ 通常/ 取值/ 0.1/ ,/ t0/ 是/ 虚拟机/ VMi/ 开始/ 迁移/ 的/ 时间/ ,/ tn/ 是/ 虚拟机/ VMi/ 结束/ 迁移/ 的/ 时间/ ,/ 且/ tn/ =/ t0/ -/ tcVMi/ ,/ uVMi/ 是/ 虚拟机/ VMi/ 的/ CPU/ 利用率/ ./ 定理/ 2/ ./ 设在/ 当前/ 时间/ 片内/ 共有/ m/ 台/ 虚拟机/ 需要/ 被/ 在线/ 迁移/ ,/ 并且/ 将/ 所有/ 的/ 调节/ 参数/ θ/ 0/ ,/ θ/ 1/ ,/ …/ ,/ θ/ m/ 均/ 设置/ 为/ θ/ ./ 那么/ ,/ 系统/ 全部/ 的/ 性能/ 成本/ PcVMs/ 如式/ (/ 23/ )/ 所示/ ./ 证明/ ./ 由于/ 当前/ 时间/ 片内/ 共有/ m/ 台/ 虚拟机/ 需要/ 被/ 在线/ 迁移/ ,/ 那么/ ,/ 根据/ 式/ (/ 22/ )/ ,/ PcVMs/ =/ ∑/ m/ 当/ 将/ 所有/ 的/ 调节/ 参数均/ 设置/ 为/ θ/ 后/ ,/ 即/ 那么/ ,/ PcVMs/ =/ ∑/ m4/ ./ 2/ 虚拟机/ 迁移/ 管理/ 迁移/ 虚拟机/ 的/ 目标/ 是/ 为了/ 满足/ 一定/ 的/ 绿色/ 服务/ 级/ 目标/ 的/ 要求/ ,/ 因此/ 在/ 迁移/ 虚拟机/ 时/ 需要/ 考虑/ 以下/ 两个/ 情况/ :/ (/ 1/ )/ 如图/ 8/ 所示/ ,/ 当/ 服务器/ pmi/ 处于/ 较/ 低/ 的/ 负载/ 状态/ 时/ ,/ 若/ 数据中心/ 的/ 其他/ 服务器/ 可以/ 接受/ 服务器/ pmi/ 上/ 的/ 全部/ m/ 台/ 虚拟机/ ,/ 并且/ 该/ m/ 台/ 虚拟机/ 的/ 迁移/ 成本/ PcVMs/ 小于/ 服务器/ pmi/ 运行/ 该/ m/ 台/ 虚拟机/ 的/ 运行/ 成本/ Rcpmi/ ,/ 如式/ (/ 24/ )/ 所示/ ,/ 那么/ ,/ 可以/ 考虑/ 迁移/ 全部/ m/ 台/ 虚拟机/ ./ Rcpmi/ >/ τ/ ·/ PcVMs/ ,/ 或者/ ,/ 烄/ 烅/ Rcpmi/ >/ τ/ ·/ θ/ ·/ ∑/ m/ 烆/ Page11/ 其中/ ,/ τ/ 是/ 判别/ 是否/ 进行/ 在线/ 迁移/ 的/ 参数/ ,/ 可以/ 根据/ 需要/ 动态/ 设置/ ./ 当/ τ/ =/ 1/ 时/ ,/ 即/ 一旦/ m/ 台/ 虚拟机/ 的/ 迁移/ 成本/ PcVMs/ 小于/ 服务器/ pmi/ 运行/ 该/ m/ 台/ 虚拟机/ 的/ 运行/ 成本/ Rcpmi/ 时/ ,/ 就/ 立即/ 迁移/ 出/ 全部/ m/ 台/ 虚拟机/ ./ 迁移/ 出/ 全部/ m/ 台/ 虚拟机/ ,/ 并且/ 关闭/ 之前/ 运行/ 的/ 服务器/ pmi/ ,/ 所/ 能够/ 节省/ 的/ 成本/ 为/ Rcpmi/ -/ τ/ ·/ PcVMs/ ,/ 因此/ ,/ 可以/ 在/ 一定/ 程度/ 上/ 改善/ 系统/ 的/ 绿云度/ ./ (/ 2/ )/ 当/ 服务器/ pmi/ 处于/ 一个/ 较/ 高/ 的/ 负载/ 状态/ Ldpmi/ ,/ 且/ 已经/ 不/ 能够/ 满足/ 系统/ 的/ 服务/ 级/ 目标/ SLOsu/ 的/ 要求/ ,/ 如式/ (/ 25/ )/ 和/ 图/ 9/ 所示/ ,/ 或者/ 服务器/ pmi/ 在/ 未来/ 一个/ 可以/ 预测/ 的/ 时间/ 内/ 即将/ 崩溃/ ,/ 在/ 这种/ 情况/ 下/ 也/ 需要/ 迁移/ 出/ 服务器/ pmi/ 上/ 部分/ 或/ 全部/ m/ 台/ 虚拟机/ ./ 其中/ ,/ ε/ 是/ 判别/ 是否/ 进行/ 在线/ 迁移/ 的/ 参数/ ,/ 可以/ 根据/ 实际/ 系统/ 的/ 需要/ 进行/ 设置/ ,/ Ldsys/ 是/ 整个/ 数据中心/ 各台/ 服务器/ 负载/ 均值/ ,/ σ/ 是/ 整个/ 数据中心/ 各台/ 服务器/ 负载/ 标准差/ ,/ SLOspm/ 是/ 服务器/ pmi/ 在/ 当前/ 负载/ 状态/ Ldpmi/ 下/ 所/ 可能/ 提供/ 的/ 服务/ 级/ 目标/ ./ 通过/ 在线/ 迁移/ 服务器/ pmi/ 上/ 的/ 部分/ 或/ 全部/ m/ 台/ 虚拟机/ ,/ 可以/ 显著/ 地/ 改善/ 服务器/ pmi/ 上/ 的/ 服务/ 级/ 目标/ ./ 然而/ ,/ 需要/ 迁移/ 的/ 虚拟机/ 的/ 具体/ 数目/ ,/ 则/ 需要/ 权衡/ 绿云度/ 和/ 服务/ 级/ 目标/ 之间/ 的/ 关系/ ./ 在/ 满足/ 一定/ 的/ 服务/ 级/ 目标/ 的/ 情况/ 下/ ,/ 尽可能少/ 地/ 迁移/ 虚拟机/ 将/ 是/ 一个/ 较优/ 的/ 选择/ ,/ 因为/ 每多/ 迁移/ 一台/ 虚拟机/ ,/ 势必/ 将/ 多/ 增加/ 一个/ 单位/ 的/ 性能/ 成本/ pcVMi/ ./ 4.3/ FIFO/ 虚拟机/ 调度/ 算法/ 先来/ 先/ 服务/ 虚拟机/ 调度/ 算法/ (/ FisrtIn/ ,/ FirstOut/ ,/ FIFO/ )/ 是/ 一种/ 简单/ 的/ 根据/ 服务/ 请求/ 的/ 到达/ 时间/ 来/ 为/ 该/ 服务/ 分配/ 虚拟机/ 的/ 算法/ ,/ 也/ 是/ 一种/ 最/ 原始/ 、/ 最/ 简单/ 、/ 最/ 基本/ 的/ 虚拟机/ 调度/ 算法/ [/ 36/ -/ 39/ ]/ ./ 如图/ 10/ 所示/ ,/ FIFO/ 虚拟机/ 调度/ 算法/ 只是/ 简单/ 地/ 从/ 用户/ 请求/ 队列/ QUserss/ 的/ 最早/ 到达/ 的/ 服务/ 请求/ ,/ 即队/ 头/ 中/ ,/ 取出/ 一个/ 应用/ App0/ ,/ 然后/ 将/ App0/ 运行/ 于/ 虚拟机/ 队列/ QVms/ 的/ 队头/ 虚拟机/ VM0/ 中/ ./ 由于/ FIFO/ 虚拟机/ 调度/ 算法/ 没有/ 考虑/ 到/ 任何/ 的/ 优化/ 机制/ ,/ 对/ 应用/ 和/ 虚拟机/ 的/ 选择/ ,/ 仅仅/ 是/ 根据/ 应用/ 和/ 虚拟机/ 到达/ 队列/ 的/ 时间/ 来/ 确定/ 的/ ./ 因此/ ,/ 使用/ FIFO/ 虚拟机/ 调度/ 算法/ 时/ 的/ 系统/ 绿云度/ GdFIFO/ 可以/ 作为/ 系统/ 的/ 基本/ 绿云度/ ,/ FIFO/ 虚拟机/ 调度/ 算法/ 可以/ 描述/ 为/ 如/ 算法/ 1/ 所示/ ./ 算法/ 1/ ./ FIFO/ 调度/ 算法/ ./ 输入/ :/ userqueueQUserss/ ,/ virtualmachinequeueQVms/ ,/ 输出/ :/ greenclouddegreeGdFIFO1/ ./ IfuserqueueQUserssisemptyatcurrenttimeslicets02/ ./ Waitatimeslice/ ./ 3/ ./ Endif4/ ./ WhileuserqueueQUserssisnotemptyatcurrenttime5/ ./ FetchthefirstapplicationApp0inuserqueue6/ ./ IfvirtualmachinequeueQVmsisemptythen7/ ./ MonitorthevirtualmachinequeueQVmsuntil8/ ./ Endif9/ ./ FetchthefirstvirtualmachineVM0invirtual10/ ./ RunthefetchedApp0onthefetchedVM0/ ./ 11/ ./ AllocatetheVM0toaPhysicalmachinePMofPage1212/ ./ Endwhile13/ ./ CalculateenergyconsumptionEsys/ ,/ systemcarbon14/ ./ CalculategreenclouddegreeGdFIFOby/ (/ 18/ )/ ./ 15/ ./ ReturnGdFIFO/ ./ FIFO/ 虚拟机/ 调度/ 算法/ 的/ 输入/ 分别/ 是/ 用户/ 队列/ QUserss/ 、/ 虚拟机/ 队列/ QVms/ 、/ 服务器/ 队列/ QPms/ 、/ 五维/ 性能/ 向量/ 犡/ =/ (/ E/ -/ 1sys/ ,/ C/ -/ 1sys/ ,/ Hesys/ ,/ Ecsys/ ,/ Susys/ )/ 和/ 权重/ 向量/ 犠/ =/ (/ wE/ ,/ wC/ ,/ wHe/ ,/ wEc/ ,/ wSu/ )/ ,/ FIFO/ 虚拟机/ 调度/ 算法/ 的/ 输出/ 是/ 绿云度/ GdFIFO/ ./ 在/ FIFO/ 虚拟机/ 调度/ 算法/ 中/ ,/ 从步/ 4/ 到步/ 12/ ,/ 实现/ 了/ 从/ 用户/ 队列/ QUserss/ 中/ 取出/ 相应/ 的/ 队头/ 的/ 用户服务/ 请求/ ,/ 并/ 分配/ 到/ 虚拟机/ 队列/ QVms/ 中/ 的/ 队头/ 的/ 虚拟机/ 上/ ;/ 步/ 13/ 分别/ 计算/ 系统/ 能耗/ Esys/ 、/ 系统/ 碳/ 排放量/ Csys/ 、/ 系统/ 健康/ Hesys/ 、/ 系统/ 经济/ Ecsys/ 以及/ 系统/ 可/ 持续/ Susys/ ;/ 步/ 14/ 计算/ 该云/ 计算环境/ 的/ 绿色/ 度/ GdFIFO/ ./ FIFO/ 虚拟机/ 调度/ 算法/ 的/ 时间/ 复杂度/ 为/ O/ (/ 1/ )/ ./ 4.4/ M2EC/ 虚拟机/ 调度/ 算法/ 多维/ 能耗/ 虚拟机/ 调度/ 算法/ (/ Multi/ -/ MetricEnergyConsumptionvirtualmachinesschedulingalgorithm/ ,/ M2EC/ )/ 是/ 基于/ 首次/ 适合/ 下降/ 算法/ (/ FirstFitDecrea/ -/ singalgorithm/ ,/ FFD/ )/ 的/ 思想/ ,/ 再次/ 改进/ 和/ 开发/ 出来/ 的/ ./ 由于/ FFD/ 算法/ 具有/ 很/ 好/ 的/ 理论/ 基础/ ,/ 在实践中/ 得到/ 了/ 广泛应用/ ./ 但/ FFD/ 算法/ 具有/ 负载/ 不/ 均衡性/ 特征/ ,/ 因此/ 重点/ 是/ 对/ 该/ 不足/ 进行/ 必要/ 的/ 调整/ 和/ 完善/ [/ 27/ ,/ 35/ -/ 36/ ,/ 41/ -/ 48/ ]/ ./ M2ME/ 虚拟机/ 调度/ 算法/ 如/ 算法/ 2/ 所示/ ./ 算法/ 2/ ./ M2EC/ 调度/ 算法/ ./ 输入/ :/ userqueueQUserss/ ,/ virtualmachinequeueQVms/ ,/ 输出/ :/ greenclouddegreeGdM2EC1/ ./ IfuserqueueQUserssisemptyatcurrenttimeslice2/ ./ Waitatimeslice/ ./ 3/ ./ Endif4/ ./ IfvirtualmachinequeueQVmsisemptyatcurrent5/ ./ Waitatimeslice/ ./ 6/ ./ Endif7/ ./ WhileuserqueueQUserssisnotemptyatcurrent8/ ./ FetchanapplicationAppinuserqueueQUserssand9/ ./ RunthefetchedApponthefetchedVM/ ./ 10/ ./ Endwhile11/ ./ SortthevirtualmachinesinthequeueQVmsbyper/ -/ 12/ ./ SortthephysicalmachinesinthequeueQPmsbythe13/ ./ ForeachvirtualmachineinqueueQVmsdo14/ ./ Foreachphysicalmachineinqueuedo15/ ./ Iftheremainingavailableresourcesaremore16/ ./ AllocatetheVMtoaPhysicalmachinePM/ ./ 17/ ./ Updatetheremainingavailableresourcesof18/ ./ Endif19/ ./ Break/ ./ 20/ ./ Endfor21/ ./ Endfor22/ ./ CalculatetheenergyconsumptionEsys/ ,/ systemcar/ -/ 23/ ./ CalculatethegreenclouddegreeGdM2ECby/ (/ 18/ )/ ./ 24/ ./ ReturnGdM2EC/ ./ M2EC/ 虚拟机/ 调度/ 算法/ 的/ 输入/ 分别/ 是/ 用户/ 队列/ QUserss/ 、/ 虚拟机/ 队列/ QVms/ 、/ 服务器/ 队列/ QPms/ 、/ 五维/ 性能/ 向量/ 犡/ =/ (/ E/ -/ 1sys/ ,/ C/ -/ 1sys/ ,/ Hesys/ ,/ Ecsys/ ,/ Susys/ )/ 和/ 权重/ 向量/ 犠/ =/ (/ wE/ ,/ wC/ ,/ wHe/ ,/ wEc/ ,/ wSu/ )/ ,/ M2EC/ 虚拟机/ 调度/ 算法/ 的/ 输出/ 是/ 绿云度/ GdM2EC/ ./ 在/ M2EC/ 虚拟机/ 调度/ 算法/ 中/ ,/ 从步/ 7/ 到步/ 10/ ,/ 实现/ 了/ 接收/ 用户/ 的/ 服务/ 请求/ ,/ 并/ 分配/ 到/ 虚拟机/ 上/ ;/ 步/ 11/ 对/ 虚拟机/ 队列/ QVms/ 按/ 性能/ 降序/ 排列/ ;/ 步/ 12/ 对/ 服务器/ 队列/ QPms/ 按/ 性能/ 降序/ 排列/ ;/ 从步/ 13/ 到步/ 21/ ,/ 使用/ FFD/ 算法/ 的/ 基本/ 思想/ ,/ 为/ 虚拟机/ 选择/ 并/ 分配/ 一个/ 最合适/ 的/ 服务器/ ;/ 步/ 22/ 分别/ 计算/ 系统/ 能耗/ Esys/ 、/ 系统/ 碳/ 排放量/ Csys/ 、/ 系统/ 健康/ Hesys/ 、/ 系统/ 经济/ Ecsys/ 以及/ 系统/ 可/ 持续/ Susys/ ;/ 步/ 23/ 计算/ 绿色/ 度/ GdM2EC/ ./ M2EC/ 虚拟机/ 调度/ 算法/ 的/ 时间/ 复杂度/ 为/ O/ (/ nlogn/ )/ ./ 5/ 实验/ 与/ 性能/ 分析/ 为了/ 分析/ 所/ 提出/ 的/ M2EC/ 虚拟机/ 调度/ 算法/ 的/ 性能/ ,/ 本/ 节/ 介绍/ 实验/ 过程/ 中/ 的/ 详细/ 的/ 模拟/ 环境/ 和/ 相关/ 参数/ 的/ 设置/ ,/ 然后/ 给出/ 了/ 实验/ 性能/ 的/ 对比/ 测试/ 和/ 分析/ 结果/ ./ 其中/ ,/ 测试/ 和/ 分析/ 的/ 性能指标/ 为/ 绿云度/ Gd/ 、/ 虚拟机/ 负载/ 均衡/ 离差/ σ/ 、/ 虚拟机/ 在线/ 迁移率/ ldr/ 和/ 任务/ 成功/ 执行/ 率/ ser/ ./ Page135/ ./ 1/ 实验/ 环境/ 与/ 参数设置/ 我们/ 选择/ CloudSimToolkit/ [/ 49/ -/ 51/ ]/ 作为/ 实验/ 模拟/ 平台/ ,/ 该/ 模拟/ 平台/ 基于/ Java/ 开发/ ,/ 可以/ 有效/ 地/ 进行/ 大规模/ 云/ 计算/ 数据中心/ 的/ 模拟/ 和/ 建模/ ./ 其中/ ,/ 云/ 计算环境/ 中/ 的/ 用户/ 和/ 资源/ 的/ 特殊/ 需求/ 可以/ 通过/ 重写/ 相应/ 的/ 接口/ 得以/ 实现/ ,/ 该/ 特性/ 可以/ 有效/ 地/ 构建/ 云/ 计算环境/ 中/ 不同/ 用户/ 和/ 资源/ 的/ 需要/ ./ 此外/ ,/ CloudSimTool/ -/ kit/ 是/ 在/ GridSimToolkit/ 的/ 基础/ 上/ 开发/ 和/ 发展/ 起来/ 的/ ,/ 而/ GridSimToolkit/ 可以/ 有效/ 地/ 支持/ 建模/ 和/ 构建/ 多/ 网格/ 接口/ 的/ 高级别/ 软件/ 构建/ ./ 而/ GridSimToolkit/ 是/ 基于/ SimJavaToolkit/ 开发/ 的/ ,/ SimJavaToolkit/ 可以/ 为/ 高层次/ 的/ 模拟/ 架构/ 提供/ 分散/ 事件/ 模拟/ 引擎/ ,/ 并且/ 可以/ 有效/ 地/ 通过/ 多线程/ 模拟/ 不同/ 实体/ ,/ 该/ 特性/ 可以/ 有效/ 地/ 满足/ 云/ 计算环境/ 中/ 相应/ 实体/ 的/ 随机/ 特性/ ./ 因此/ ,/ 选择/ CloudSimToolkit/ 作为/ 实验/ 的/ 模拟/ 平台/ ,/ 可以/ 较/ 好/ 地/ 测试/ 本文/ 提出/ 的/ M2EC/ 虚拟机/ 调度/ 算法/ 的/ 相关/ 性能/ ,/ 并且/ 可以/ 较/ 好/ 地/ 反映/ 实际/ 云/ 计算环境/ 的/ 相关/ 情况/ ./ 在/ 实验/ 过程/ 中/ ,/ 共/ 创建/ 了/ 10/ 个云/ 数据中心/ ,/ 每个/ 云/ 数据中心/ 的/ 详细/ 参数/ 配置/ 如表/ 1/ 所示/ ./ 同时/ ,/ 设置/ 了/ 500/ 台/ 虚拟机/ 来/ 提供/ 云/ 服务/ ,/ 每台/ 虚拟机/ 的/ PE/ (/ ProcessingElements/ )/ 数目/ 在/ 区间/ [/ 2/ ,/ 4/ ]/ 内/ ./ 数据中心/ ID/ 机器/ 数/ 每台/ 机器/ 的/ PE/ 数/ 处理/ 能力/ (/ MIPS/ )/ 带宽/ // GbpsDC/ _/ 0/ ~/ 1102/ ~/ 4200/ ~/ 4001.0/ DC/ _/ 2/ ~/ 3202/ ~/ 4400/ ~/ 6002.0/ DC/ _/ 4/ ~/ 5304/ ~/ 8600/ ~/ 8005.0/ DC/ _/ 6/ ~/ 7408/ ~/ 16800/ ~/ 10005.0/ DC/ _/ 8/ ~/ 95012/ ~/ 16800/ ~/ 100010.0/ 此外/ ,/ 在/ 实验/ 过程/ 中/ ,/ 提交/ 了/ 1000/ 个/ 任务/ 到/ 500/ 台/ 虚拟机/ 上/ ,/ 每个/ 任务/ 的/ 提交/ 时间/ 服从/ 泊松/ 分布/ ,/ 每个/ 任务/ 的/ 计算长度/ 在/ 区间/ [/ 10000/ ,/ 20000/ ]/ MI/ 内/ ./ 实验/ 过程/ 测试/ 了/ 5/ 个/ 基本/ 性能指标/ ,/ 即/ 系统/ 能耗/ Esys/ 、/ 系统/ 碳/ 排放量/ Csys/ 、/ 系统/ 健康/ Hesys/ 、/ 系统/ 经济/ Ecsys/ 以及/ 系统/ 可/ 持续/ Susys/ ./ 实验/ 的/ 详细/ 参数/ 配置/ 如表/ 2/ 所示/ ./ w0/ ,/ w1/ ,/ w2/ ,/ 参数/ α/ w3/ ,/ w4/ θ/ τ/ ε/ 5.2/ 实验/ 结果/ 与/ 性能/ 分析/ 对/ 实验/ 过程/ 中/ 测试/ 和/ 分析/ 的/ 4/ 个/ 主要/ 相关/ 指标/ ,/ 分别/ 说明/ 如下/ ./ (/ 1/ )/ 绿云度/ Gd/ ,/ 即云/ 计算/ 系统/ 中/ 绿色/ 程度/ 的/ 一种/ 度量/ ./ 绿云度/ Gd/ 可以/ 通过/ 系统/ 能耗/ Esys/ 、/ 系统/ 碳/ 排放量/ Csys/ 、/ 系统/ 健康/ Hesys/ 、/ 系统/ 经济/ Ecsys/ 以及/ 系统/ 可/ 持续/ Susys5/ 个/ 基本/ 性能指标/ 综合/ 计算/ 得出/ ./ 一个/ 云/ 系统/ 的/ 绿云度/ Gd/ 越大/ ,/ 反映/ 该/ 系统/ 能耗/ Esys/ 和/ 系统/ 碳/ 排放量/ Csys/ 越小/ ,/ 系统/ 健康/ Hesys/ 、/ 系统/ 经济/ Ecsys/ 以及/ 系统/ 可/ 持续/ Susys/ 则/ 越/ 大/ ,/ 那么/ ,/ 就/ 可以/ 在/ 更/ 大/ 的/ 程度/ 上/ 满足用户/ 的/ 绿色/ 服务/ 级/ 目标/ ,/ 如式/ (/ 18/ )/ 所示/ ./ 如图/ 11/ 所示/ ,/ 随着/ 任务/ 负载/ 比例/ 的/ 不断/ 增加/ ,/ M2EC/ 虚拟机/ 调度/ 算法/ 可以/ 保证系统/ 的/ 绿云度/ Gd/ 处于/ 较/ 高/ 的/ 水平/ ,/ 即使/ 是/ 在/ 系统/ 中/ 任务/ 的/ 负载/ 比例/ 高达/ 90/ %/ 以上/ 时/ ,/ 仍然/ 可以/ 保证系统/ 的/ 绿云度/ Gd/ 高达/ 0.72/ ./ 与/ FIFO/ 虚拟机/ 调度/ 算法/ 相/ 比较/ ,/ M2EC/ 虚拟机/ 调度/ 算法/ 可以/ 明显改善/ 整个/ 系统/ 的/ 绿云度/ Gd/ ,/ 极大/ 地/ 改进/ 了/ 整个/ 系统/ 的/ 绿色/ 服务/ 级/ 目标/ ,/ 能/ 很/ 好/ 地/ 满足用户/ 的/ 需求/ ./ (/ 2/ )/ 虚拟机/ 负载/ 均衡/ 离差/ σ/ ,/ 反映/ 了/ 随着/ 用户/ 请求/ 服务/ 的/ 不断/ 变化/ ,/ 在/ 在线/ 迁移/ 后/ 的/ 整个/ 系统/ 中/ 的/ 虚拟机/ 的/ 负载/ 均衡/ 情况/ ./ 虚拟机/ 负载/ 均衡/ 离差/ σ/ 越小/ ,/ 表明/ 整个/ 系统/ 中/ 虚拟机/ 在/ 各台/ 服务器/ 间/ 的/ 负载/ 越/ 均衡/ ,/ 越能/ 较/ 好/ 地/ 满足/ 绿色/ 服务/ 级/ 目标/ ,/ 如式/ (/ 26/ )/ 所示/ ./ 其中/ ,/ ldi/ 如式/ (/ 27/ )/ 所示/ ,/ 其中/ ,/ num/ (/ VMs/ )/ i/ 是/ 第/ i/ 台/ 服务器/ 所/ 拥有/ 的/ 虚拟机/ 数目/ ,/ num/ (/ PEs/ )/ i/ 是/ 第/ i/ 台/ 服务器/ 所/ 拥有/ 的/ 处理单元/ PE/ 数目/ ./ Page14/ 如图/ 12/ 所示/ ,/ 随着/ 任务/ 负载/ 比例/ 的/ 不断/ 增加/ ,/ M2EC/ 虚拟机/ 调度/ 算法/ 可以/ 保证/ 负载/ 均衡/ 离差/ 处于/ 一个/ 相对/ 较/ 低/ 的/ 水平/ ./ 即使/ 是/ 在/ 系统/ 中/ 任务/ 的/ 负载/ 比例/ 高达/ 90/ %/ 以上/ 时/ ,/ 仍然/ 可以/ 保证系统/ 的/ 虚拟机/ 负载/ 均衡/ 离差/ σ/ 位于/ 0.349/ 这一/ 相对/ 较/ 低/ 的/ 水平/ 之下/ ./ 与/ FIFO/ 虚拟机/ 调度/ 算法/ 相比/ ,/ M2EC/ 虚拟机/ 调度/ 算法/ 可以/ 明显改善/ 虚拟机/ 负载/ 均衡/ 离差/ σ/ ,/ 满足/ 了/ 用户/ 的/ 绿色/ 服务/ 级/ 目标/ ./ (/ 3/ )/ 通过/ 在线/ 迁移/ 虚拟机/ ,/ 实现/ 虚拟机/ 在/ 整个/ 系统/ 中/ 各台/ 服务器/ 间/ 的/ 负载/ 均衡/ ,/ 将/ 可以/ 极大/ 地/ 改善/ 用户/ 的/ 绿色/ 服务/ 级/ 目标/ ./ 虚拟机/ 在线/ 迁移率/ ldr/ 反映/ 了/ 整个/ 系统/ 中/ 虚拟机/ 在线/ 迁移/ 的/ 比值/ ,/ ldr/ 越小/ ,/ 相应/ 的/ 虚拟机/ 迁移/ 成本/ 则/ 越/ 小/ ,/ 必将/ 进一步/ 改善/ 整个/ 系统/ 的/ 绿色/ 度/ Gd/ ./ 具体/ 而言/ ,/ 虚拟机/ 在线/ 迁移率/ ldr/ 如式/ (/ 28/ )/ 所示/ ./ ldr/ =/ 1/ 其中/ ,/ n/ 是/ 在/ 整个/ 系统/ 服务/ 过程/ 中/ 所/ 创建/ 的/ 虚拟机/ 数目/ ./ 如图/ 13/ 所示/ ,/ 随着/ 任务/ 负载/ 比例/ 的/ 不断/ 增加/ ,/ M2EC/ 虚拟机/ 调度/ 算法/ 可以/ 保证系统/ 的/ 虚拟机/ 在线/ 迁移率/ ldr/ 处于/ 较/ 低/ 的/ 水平/ ./ 即使/ 是/ 在/ 系统/ 中/ 任务/ 的/ 负载/ 比例/ 高达/ 90/ %/ 以上/ 时/ ,/ 仍然/ 可以/ 保证/ ldr/ 位于/ 0.21/ 这一/ 相对/ 较/ 低/ 的/ 水平/ ./ 与/ FIFO/ 虚拟机/ 调度/ 算法/ 相比/ ,/ M2EC/ 虚拟机/ 调度/ 算法/ 在/ 付出/ 较/ 小/ 的/ 成本/ 的/ 情况/ 下/ ,/ 将/ 极大/ 地/ 改进/ 了/ 整个/ 系统/ 的/ 绿色/ 服务/ 级/ 目标/ ./ 特别/ 是/ 在/ 系统/ 的/ 负载/ 比例/ 较/ 高/ 的/ 情况/ 下/ ,/ 这种/ 优势/ 将/ 更加/ 明显/ ./ (/ 4/ )/ 任务/ 的/ 成功/ 执行/ 是/ 指/ 一个/ 任务/ 在/ 所/ 需要/ 的/ 最/ 短/ 结束/ 时间/ 之前/ 被/ 成功/ 完成/ ,/ 任务/ 成功/ 执行/ 率/ ser/ 是/ 指/ 在/ 最/ 短/ 结束/ 时间/ 之前/ 成功/ 完成/ 的/ 任务/ 和/ 系统/ 中/ 用户/ 请求/ 服务/ 的/ 全部/ 任务/ 之间/ 的/ 比值/ ./ 在/ 一个/ 云/ 计算环境/ 中/ ,/ 任务/ 成功/ 执行/ 率/ ser/ 越高/ ,/ 用户/ 的/ 绿色/ 服务/ 级/ 目标/ 将/ 越/ 容易/ 满足/ ./ 具体/ 而言/ ,/ 任务/ 成功/ 执行/ 率/ ser/ 如式/ (/ 29/ )/ 所示/ ./ 其中/ ,/ mj/ 是/ 用户/ j/ 所/ 请求/ 服务/ 的/ 任务/ 总数/ ./ 如图/ 14/ 所示/ ,/ 在/ 没有/ 部署/ M2EC/ 虚拟机/ 调度/ 算法/ 的/ 情况/ 下/ ,/ 随着/ 任务/ 负载/ 比例/ 的/ 不断/ 增加/ ,/ 整个/ 系统/ 的/ 任务/ 成功/ 执行/ 率/ ser/ 急剧下降/ ,/ 特别/ 是/ 当/ 系统/ 的/ 任务/ 负载/ 比例/ 高于/ 50/ %/ 的/ 情况/ 下/ ,/ 这种/ 趋势/ 则/ 更加/ 明显/ ./ 当/ 系统/ 部署/ 了/ M2EC/ 虚拟机/ 调度/ 算法/ 后/ ,/ M2EC/ 虚拟机/ 调度/ 算法/ 可以/ 保证系统/ 的/ 任务/ 成功/ 执行/ 率/ ser/ 处于/ 一个/ 相对/ 较/ 高/ 的/ 、/ 较/ 稳定/ 的/ 水平/ ,/ 即使/ 是/ 在/ 系统/ 中/ 任务/ 的/ 负载/ 比例/ 高达/ 90/ %/ 以上/ 时/ ,/ 仍然/ 可以/ 保证系统/ 的/ 任务/ 成功/ 执行/ 率/ ser/ 位于/ 0.951/ 这一/ 相对/ 较/ 高/ 的/ 水平/ ./ 可见/ M2EC/ 虚拟机/ 调度/ 算法/ 可以/ 在/ 很大/ 程度/ 上/ 改善/ 整个/ 系统/ 的/ 任务/ 成功/ 执行/ 率/ ser/ ,/ 满足用户/ 的/ 绿色/ 服务/ 级/ 目标/ ./ Page156/ 总结/ 本文/ 对云/ 计算环境/ 中/ 的/ 高/ 能效/ 性/ 问题/ 进行/ 了/ 深入研究/ ./ 给出/ 了/ 云/ 计算环境/ 中/ 的/ 高/ 能效/ 性/ 概念模型/ ,/ 主要/ 包括/ 绿云/ 计算/ 的/ 基本概念/ 、/ 绿云/ 体系结构/ 和/ 绿色/ 服务/ 级/ 目标/ ./ 为/ 定量/ 评估/ 绿色/ 服务/ 的/ 等级/ ,/ 给出/ 了/ 量化/ 的/ 多维/ 性能指标/ 和/ 绿云度/ ./ 具体/ 描述/ 了/ 实现/ 高/ 能效/ 性/ 的/ 绿云/ 优化/ 策略/ ,/ 主要/ 包括/ 在线/ 迁移/ 成本/ 量化/ 、/ 虚拟机/ 迁移/ 管理/ 、/ FIFO/ 虚拟机/ 调度/ 算法/ 和/ M2EC/ 虚拟机/ 调度/ 算法/ ./ 通过/ 实验/ 分析表明/ ,/ M2EC/ 虚拟机/ 调度/ 算法/ 在/ 绿云度/ 优化/ 、/ 虚拟机/ 负载/ 均衡/ 离差/ 、/ 虚拟机/ 在线/ 迁移率/ 、/ 任务/ 成功/ 执行/ 率/ 等/ 方面/ 具有/ 明显/ 优势/ ./ 在/ 将来/ 的/ 研究/ 工作/ 中/ ,/ 我们/ 将/ 进一步/ 深化/ 绿云/ 度量/ 、/ 量化/ 指标/ 、/ 优化/ 策略/ 等/ 内容/ 的/ 研究/ ./ 同时/ ,/ 结合/ 具体/ 的/ 云/ 计算环境/ ,/ 在/ 大规模/ 云/ 数据中心/ 进行/ 部署/ 和/ 实践/ ./ 

