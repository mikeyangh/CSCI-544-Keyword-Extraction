Page1/ 基于/ MDA/ 的/ 并行/ 仿真/ 可视化/ 组件/ 建/ 模范/ 式/ 姚益平/ 刘刚/ (/ 国防科学技术大学/ 计算机/ 学院/ 长沙/ 410073/ )/ 摘要/ 并行/ 仿真/ 是/ 提高/ 分析/ 仿真/ 运行/ 效率/ 的/ 有效途径/ ./ 当前/ 国内外/ 并行/ 仿真/ 由于/ 缺乏/ 高效/ 统一/ 的/ 可视化/ 组件/ 建/ 模范/ 式/ 的/ 指导/ ,/ 往往/ 需要/ 采用/ 从上到下/ 的/ 集中式/ 开发/ 模式/ ,/ 开发/ 门槛/ 高/ 、/ 效率/ 低/ 、/ 二次/ 建模/ 困难/ ,/ 且/ 模型/ 间/ 的/ 耦合度/ 大/ 、/ 协调/ 难/ ,/ 模型/ 与/ 仿真/ 平台/ 紧密/ 绑定/ ,/ 难以实现/ 模型/ 的/ 分步/ 开发/ 、/ 封装/ 、/ 快速/ 组装/ 及/ 平台/ 间/ 模型/ 的/ 重用/ ./ 作者/ 结合/ 组件/ 建模/ 及/ MDA/ 技术/ 的/ 优势/ ,/ 针对/ 当前/ 广受/ 关注/ 的/ PDEVS/ 规范/ 所/ 存在/ 的/ 不/ 支持/ 原子/ 模型/ 可视化/ 建模/ 及/ 事件处理/ 逻辑/ 过于/ 集中/ 、/ 无法/ 挖掘/ 处理/ 逻辑/ 内部/ 并行性/ 的/ 缺点/ ,/ 提出/ 了/ 基于/ MDA/ 的/ 并行/ 仿真/ 可视化/ 组件/ 建/ 模范/ 式/ —/ —/ —/ EDEVS/ ,/ 并/ 证明/ 了/ 该/ 范式/ 的/ 描述/ 能力/ 不弱/ 于/ PDEVS/ ;/ 在/ 此基础/ 上/ ,/ 设计/ 实现/ 了/ 基于/ EDEVS/ 的/ 可视化/ 建模/ 框架/ 及/ EDEVS/ 模型/ 到/ YHSUPE/ 并行/ 仿真/ 平台/ 模型/ 的/ 代码/ 转换/ 插件/ ,/ 将/ 组件/ 化/ 引入/ YHSUPE/ ,/ 使/ 其/ 能够/ 适应/ 大规模/ 并行/ 仿真/ 模型/ 分步/ 开发/ 及/ 快速/ 组装/ 的/ 应用/ 需求/ ,/ 验证/ 了/ EDEVS/ 范式/ 的/ 可行性/ ./ 关键词/ 并行/ 离散/ 事件/ 仿真/ ;/ 组件/ 建模/ ;/ MDA/ ;/ DEVS/ ;/ 范式/ 1/ 引言/ 大规模/ 生态环境/ 仿真/ 、/ 计算/ 系统/ 生物学/ 仿真/ 、/ 复/ Page2/ 由于/ 这/ 类/ 仿真/ 往往/ 包含/ 大量/ 的/ 实体/ ,/ 实体/ 内/ 又/ 包含/ 多个/ 模型/ ,/ 而且/ 随着/ 仿真/ 应用/ 的/ 不断深入/ ,/ 其实/ 体/ 规模/ 越来越/ 大/ ,/ 实体/ 间/ 以及/ 模型/ 间/ 存在/ 错综复杂/ 的/ 交互/ [/ 1/ ]/ ,/ 且/ 这些/ 实体模型/ 往往/ 涉及/ 多个/ 领域/ 的/ 专业知识/ ,/ 需要/ 不同/ 领域/ 的/ 专家/ 分别/ 开发/ ,/ 特别/ 是/ 由于/ 知识产权/ 保护/ 等/ 原因/ ,/ 这些/ 模型/ 往往/ 需要/ 以/ 封装/ 好/ 的/ 执行/ 码/ 形式/ 提交/ 给/ 使用/ 方/ ,/ 这/ 就/ 使得/ 模型/ 的/ 组件/ 化/ 开发/ 及/ 封装/ 标准/ 和/ 组装/ 技术/ 变得/ 尤为重要/ ,/ 目前/ 的/ 仿真/ 组件/ 化/ 建模/ 理论/ 和/ 方法/ 要么/ 没有/ 考虑/ 并行/ 仿真/ 事件驱动/ 等/ 特征/ ,/ 只/ 适合/ 于/ HLA/ 等/ 分布式/ 交互/ 仿真/ 系统/ ;/ 要么/ 过于/ 复杂/ ,/ 难以使用/ ,/ 从而/ 使得/ 并行/ 仿真/ 往往/ 需要/ 采用/ 从上到下/ 的/ 集中式/ 开发/ 模式/ ,/ 存在/ 开发/ 门槛/ 高/ 、/ 开发/ 效率/ 低/ 、/ 二次/ 建模/ 困难/ ,/ 且/ 模型/ 间/ 的/ 耦合度/ 大/ 、/ 协调/ 难/ ,/ 模型/ 与/ 仿真/ 平台/ 紧密/ 绑定/ 、/ 难以实现/ 模型/ 的/ 分布/ 高效/ 开发/ 、/ 封装/ 和/ 快速/ 组装/ 及/ 平台/ 间/ 模型/ 的/ 重用/ 等/ 问题/ [/ 2/ -/ 3/ ]/ ,/ 从而/ 使得/ 其/ 难以/ 适应/ 大规模/ 并行/ 仿真/ 应用/ 发展/ 的/ 需要/ ./ 因此/ ,/ 为/ 满足/ 大规模/ 并行/ 仿真/ 模型/ 分布/ 开发/ 、/ 组件/ 化/ 组装/ 的/ 需求/ ,/ 提高/ 应用/ 的/ 建模/ 开发/ 效率/ ,/ 亟待/ 研究/ 基于/ 组件/ 的/ 并行/ 仿真/ 可视化/ 建模/ 理论/ 与/ 技术/ ./ 归纳起来/ ,/ 大规模/ 并行/ 仿真/ 对/ 建模/ 理论/ 和/ 技术/ 提出/ 了/ 以下/ 要求/ :/ (/ 1/ )/ 能/ 把/ 大/ 而/ 复杂/ 的/ 模型/ 递归/ 地/ 分解/ 为/ 小/ 的/ 简单/ 的/ 模型/ ,/ 分步/ 建模/ ./ 大规模/ 并行/ 仿真/ 中/ 往往/ 包含/ 极其/ 复杂/ 的/ 模型/ (/ 例如/ 环境/ 模型/ 、/ C4I/ 武器/ 系统/ 模型/ 等/ )/ ,/ 且/ 模型/ 还/ 往往/ 涉及/ 多个/ 领域/ 的/ 专业知识/ ,/ 直接/ 对/ 其/ 进行/ 建模/ 往往/ 非常/ 困难/ ,/ 应当/ 能够/ 将/ 之/ 递归/ 地/ 分解/ 为/ 涉及/ 领域/ 知识/ 较/ 单一/ 的/ 小/ 模型/ ,/ 由/ 地理/ 上/ 分布/ 的/ 各/ 领域专家/ 分别/ 建模/ [/ 4/ ]/ ./ (/ 2/ )/ 能够/ 方便/ 地/ 利用/ 已有/ 模型/ ,/ 从小/ 模型/ 构造/ 大/ 模型/ ,/ 从下到上/ 构建/ 仿真/ 应用/ ./ 对于/ 大规模/ 仿真/ 中/ 的/ 复杂/ 模型/ ,/ 每次/ 都/ 从头开始/ 建模/ 开发/ 往往/ 工作量/ 巨大/ ,/ 且/ 模型/ 的/ 正确性/ 难以/ 保证/ ./ 而/ 利用/ 已有/ 的/ 模型/ 构造/ 符合要求/ 的/ 大/ 模型/ ,/ 并/ 层次化/ 地/ 组装/ 成/ 仿真/ 应用/ ,/ 则/ 是/ 快速/ 、/ 高效/ 、/ 灵活/ 地/ 构造/ 仿真/ 应用/ 的/ 最佳/ 途径/ [/ 5/ -/ 7/ ]/ ./ (/ 3/ )/ 保证/ 模型/ 的/ 自/ 包含/ 特性/ ,/ 即能/ 独立/ 封装/ 、/ 发布/ ,/ 而/ 不/ 依赖于/ 其它/ 模型/ ./ 大规模/ 并行/ 仿真/ 中/ 的/ 不同/ 模型/ 往往/ 需要/ 不同/ 领域/ 的/ 专家/ 分别/ 开发/ ,/ 为/ 保证/ 模型/ 开发/ 、/ 调试/ 的/ 独立性/ 及/ 相对/ 的/ 保密性/ (/ 很多/ 模型/ 涉及/ 版权/ 问题/ )/ ,/ 就/ 必须/ 要求/ 模型/ 具有/ 自/ 包含/ 特性/ ,/ 使得/ 各/ 单位/ 的/ 模型/ 能/ 独立/ 封装/ ,/ 并/ 易于/ 组合/ [/ 8/ -/ 9/ ]/ ./ (/ 4/ )/ 采用/ 与/ 仿真/ 平台/ 无关/ 的/ 可视化/ 建模/ 方式/ ,/ 并/ 提供/ 高效/ 的/ 代码/ 转换机制/ ./ 目前/ 国内外/ 并行/ 仿真/ 平台/ 正/ 处于/ 不断完善/ 和/ 发展/ 之中/ ,/ 尚未/ 形成/ 统一/ 的/ 标准/ ./ 因而/ ,/ 有/ 必要/ 在/ 一定/ 程度/ 上/ 保持/ 模型/ 的/ 平台/ 无关/ 特性/ ,/ 而/ 由/ 高效/ 的/ 代码/ 转换机制/ 将/ 平台/ 无关/ 模型/ 转换/ 并/ 封装/ 成/ 平台/ 相关/ 模型/ ,/ 使/ 大规模/ 并行/ 仿真/ 应用/ 能够/ 快捷/ 地/ 使用/ 并行/ 仿真/ 领域/ 的/ 最新/ 成果/ ,/ 推进/ 自身/ 发展/ [/ 10/ ]/ ./ 基于/ 组件/ 的/ 建模/ 技术/ 可/ 有效/ 降低/ 组件/ 模型/ 间/ 的/ 耦合度/ ,/ 改善/ 模型/ 的/ 重用/ 性/ ,/ 有利于/ 实现/ 仿真/ 模型/ 开发/ 与/ 使用/ 的/ 分离/ ,/ 由/ 领域专家/ 设计/ 组件/ 化/ 的/ 仿真/ 模型/ ,/ 应用/ 开发人员/ 使用/ 已有/ 的/ 组件/ 模型/ 快速/ 组装/ 仿真/ 应用/ ,/ 从而/ 能够/ 大大提高/ 仿真/ 应用/ 的/ 开发/ 效率/ ;/ 而/ MDA/ (/ ModelDrivenArchitecture/ )/ [/ 11/ ]/ 技术/ 能/ 使/ 模型/ 与/ 模型/ 的/ 运行/ 平台/ 相/ 分离/ ,/ 从而/ 有效/ 地/ 支持/ 模型/ 在/ 运行/ 平台/ 间/ 的/ 重用/ ./ 本文/ 立足/ 大规模/ 并行/ 仿真/ 对建/ 模范/ 式/ 的/ 要求/ ,/ 结合/ 组件/ 建模/ 及/ MDA/ 技术/ 的/ 优势/ ,/ 提出/ 了/ 一种/ 基于/ MDA/ 的/ 并行/ 仿真/ 可视化/ 组件/ 建/ 模范/ 式/ EDEVS/ (/ Event/ -/ schedulingDiscreteEVentsimulationSpec/ -/ ification/ )/ [/ 12/ ]/ ,/ 并/ 设计/ 实现/ 了/ 基于/ EDEVS/ 范式/ 的/ 可视化/ 建模/ 框架/ ,/ 为/ 建模/ 人员/ 提供/ 可视化/ 的/ 建模/ 图/ 元/ ,/ 使/ 建模/ 过程/ 直观/ 简便/ ,/ 充分/ 支持/ 快速/ 、/ 分步/ 建模/ 及/ 模型/ 的/ 可视化/ 组装/ ./ 在/ 此基础/ 上/ ,/ 本文/ 实现/ 了/ EDEVS/ 模型/ 到/ YHSUPE/ (/ YinHeSimulationUtilitiesforParallelEnvironment/ )/ [/ 1/ ]/ 仿真/ 平台/ 模型/ 代码/ 的/ 映射/ ,/ 将/ 组件/ 化/ 引入/ YHSUPE/ ,/ 提高/ 了/ 其/ 建模/ 开发/ 效率/ ,/ 验证/ 了/ EDEVS/ 的/ 可行性/ ./ 本文/ 第/ 2/ 节/ 介绍/ 国内外/ 相关/ 工作/ ;/ 第/ 3/ 节/ 介绍/ EDEVS/ 原子/ 组件/ 模型/ 范式/ 、/ 耦合/ 组件/ 模型/ 范式/ 及/ 建模/ 实例/ ,/ 并/ 证明/ 该/ 范式/ 描述/ 能力/ ;/ 第/ 4/ 节/ 简要/ 介绍/ EDEVS/ 可视化/ 建模/ 环境/ VisiCom/ ;/ 第/ 5/ 节对/ 本文/ 所/ 做/ 的/ 工作/ 进行/ 总结/ ./ 2/ 相关/ 工作/ 国内外/ 对/ 基于/ 并行/ 仿真/ 的/ 组件/ 化/ 建模/ 技术/ 的/ 研究/ 主要/ 有/ Flames/ 、/ CCSE/ 和/ JMASS/ 的/ 组件/ 化/ 建模/ 技术/ 及/ BOM/ (/ BaseObjectModel/ )/ 和/ DEVS/ (/ Dis/ -/ creteEventSystemSpecifications/ )/ 组件/ 化/ 建模/ 规范/ ./ 美国/ Ternion/ 公司/ 的/ 产品/ Flames/ 是/ 当前/ 著名/ 的/ 仿真/ 集成/ 环境/ 之一/ ,/ 应用/ 于/ 大型/ 仿真/ ./ 它/ 对/ 装备/ 进行/ 分类/ ,/ 定义/ 相应/ 的/ 组件/ 化/ 接口/ ,/ 并/ 在/ 此基础/ 上/ 对/ 每类/ 装备/ 实现/ 一个/ 基本/ 模型/ 类/ ,/ 让/ 模型/ 设计者/ 能/ 继承/ 这些/ 模型/ 类/ 而/ 派/ 生出/ 自己/ 的/ 模型/ ./ Flames/ 支持/ 模型/ 参数/ 的/ 可视化/ 配置/ ,/ 但/ 不/ 支持/ 原子/ 模型/ 的/ 可视化/ 建模/ ,/ Page3/ 其/ 建模/ 方式/ 与其/ 仿真/ 平台/ 相/ 绑定/ ,/ 且/ 不/ 支持/ 集群/ 式/ 并行/ 仿真/ ,/ 限制/ 了/ 其/ 仿真/ 应用/ 的/ 规模/ [/ 13/ ]/ ;/ 美国/ 联合/ 仿真/ 三大/ 项目/ 之一/ 的/ JSIMS/ 系统/ 提供/ 了/ 一系列/ 并行/ 仿真/ 支持/ 工具/ ,/ 其中/ ,/ 公共/ 组件/ 仿真/ 引擎/ CCSE/ 为/ JSIMS/ 的/ 综合/ 环境/ 提供/ 核心/ 支撑/ 服务/ ,/ CCSE/ 借鉴/ 了/ 组件/ 式/ 建模/ 思想/ ,/ 提供/ 了/ 实体/ 和/ 组件/ 两种/ 基类/ ,/ 供/ 用户/ 开发/ 自己/ 的/ 组件/ 模型/ ,/ 在/ 实体/ 里/ 对/ 组件/ 进行/ 组装/ ,/ 然后/ 应用/ 到/ CCSE/ 的/ 仿真/ 框架/ 中去/ ./ 但/ CCSE/ 建模/ 框架/ 不/ 支持/ 可视化/ 建模/ ,/ 且/ 其/ 公布/ 订购/ 式/ 的/ 模型/ 解/ 耦/ 方式/ 存在/ 效率/ 问题/ ,/ 其/ 建模/ 方式/ 也/ 与其/ 仿真/ 平台/ 绑定/ ,/ 不/ 支持/ 平台/ 间/ 的/ 模型/ 重用/ [/ 8/ ]/ ;/ JMASS/ 也/ 是/ 美国/ 联合/ 仿真/ 三大/ 项目/ 之一/ ,/ 目标/ 是/ 促进/ 组件/ 级/ 和/ 平台/ 级/ 系统/ 的/ 模型/ 重用/ 和/ 互操作/ ,/ 与/ Flames/ 一样/ ,/ JMASS/ 中/ 的/ 重用/ 仅限于/ 既定/ 的/ 几类/ 模型/ ,/ 没有/ 统一/ 的/ 建模/ 规范/ ,/ 不/ 支持/ 可视化/ 建模/ ,/ 不/ 支持/ 模型/ 的/ 递归/ 分解/ ,/ 重用/ 粒度/ 过/ 粗/ ,/ 也/ 不/ 支持/ 平台/ 间/ 模型/ 重用/ [/ 14/ -/ 15/ ]/ ;/ BOM/ 是/ 由/ SISO/ 提出/ 的/ 面向/ 分布式/ 仿真/ 的/ 组件/ 化/ 建模/ 框架/ ,/ 但/ BOM/ 定义/ 的/ 是/ 概念模型/ 及/ 该/ 模型/ 到/ HLA/ 规范/ 的/ 映射/ 方式/ ,/ 不是/ 一个/ 完整/ 的/ 并行/ 离散/ 事件/ 仿真/ 建模/ 规范/ [/ 17/ -/ 18/ ]/ ;/ DEVS/ 是/ 亚利桑那州/ 立/ 大学/ Zeigler/ 教授/ 课题组/ 在/ 20/ 世纪/ 70/ 年代/ 末/ 提出/ 的/ 并行/ 离散/ 事件/ 系统/ 规范/ ,/ 并于/ 2000/ 年初/ 发展/ 出其/ 并行/ 化/ 版本/ PDEVS/ (/ ParallelDEVS/ )/ ,/ 且/ 基于/ 此/ 规范/ 实现/ 了/ DEVSJAVA/ 、/ COSMOS/ 等/ 仿真/ 平台/ ./ PDEVS/ 包括/ 原子/ 模型/ 和/ 耦合/ 模型/ 两个/ 范式/ ./ 原子/ 模型/ 范式/ 规定/ 如何/ 从无到有/ 构造/ 模型/ ,/ 而/ 耦合/ 模型/ 范式/ 规定/ 如何/ 利用/ 小/ 模型/ 构造/ 大/ 模型/ ./ PDEVS/ 原子/ 模型/ 可以/ 用/ 一个/ 八元/ 组/ 表示/ :/ 素/ ,/ 也/ 可以/ 为空/ ;/ 素/ ,/ 也/ 可以/ 为空/ ;/ 其中/ :/ Xm/ =/ {/ (/ p/ ,/ v/ )/ |/ p/ ∈/ IPorts/ ,/ v/ ∈/ Xp/ }/ 是/ 输入/ 端口/ 与其/ 参数值/ 的/ 二元/ 组/ 集合/ ;/ Ym/ =/ {/ (/ p/ ,/ v/ )/ |/ p/ ∈/ OPorts/ ,/ v/ ∈/ Yp/ }/ 是/ 输出/ 端口/ 与其/ 参数值/ 的/ 二元/ 组/ 集合/ ;/ S/ 是/ 状态变量/ 的/ 集合/ ;/ Xbm/ 是/ 输入/ 包/ ,/ 可以/ 包含/ Xm/ 中/ 的/ 一个/ 或/ 多个/ 元/ Ybm/ 是/ 输出/ 包/ ,/ 可以/ 包含/ Ym/ 中/ 的/ 一个/ 或/ 多个/ 元/ δ/ ext/ :/ Q/ ×/ Xbm/ →/ S/ 是/ 外部/ 状态/ 转换/ 函数/ ,/ 用于/ 响/ δ/ int/ :/ S/ →/ S/ 是/ 内部/ 状态/ 转换/ 函数/ ;/ δ/ con/ :/ Q/ ×/ Xbm/ →/ S/ 是/ 冲突消解/ 函数/ ,/ 当/ 外部/ 状态/ λ/ :/ S/ →/ Ybm/ 是/ 输出/ 函数/ ;/ 转换/ 与/ 内部/ 状态/ 转换/ 同时/ 发生/ 时/ 被/ 调用/ ;/ 应/ 外部/ 事件/ ;/ ta/ :/ S/ →/ R/ +/ 0/ ,/ 是/ 时间/ 推进/ 函数/ ;/ Q/ =/ {/ (/ s/ ,/ e/ )/ |/ s/ ∈/ S/ ,/ 0/ / e/ / ta/ (/ s/ )/ }/ 是/ 全/ 状态变量/ ,/ 包括/ 状态变量/ 集/ S/ 与/ e/ ,/ e/ 记录/ 从/ 上次/ 发生/ 状态/ 转换/ 到/ 现在/ 的/ 时间/ 间隔/ ./ 任意/ 时刻/ 模型/ 处于/ 某个/ 确定/ 的/ 状态/ s/ ∈/ S/ ,/ 如果/ 没有/ 外部/ 输入/ 出现/ ,/ 这个/ 状态/ 将/ 持续/ ta/ (/ s/ )/ 时间/ ,/ 其中/ ta/ (/ s/ )/ 是/ 一个/ 非负/ 实数/ ./ 当/ ta/ (/ s/ )/ 为/ 0/ 时/ ,/ 称/ s/ 为/ 一个/ 暂态/ ,/ 此时/ 模型/ 不/ 受/ 外部/ 输入/ 的/ 干扰/ ,/ 相反/ ta/ (/ s/ )/ 为/ 时/ ,/ 称/ s/ 为/ 一/ 被/ 动态/ ,/ 只要/ 没有/ 外部/ 输入/ 出现/ ,/ 这个/ 状态/ 将/ 一直/ 持续/ 下去/ ,/ 而/ ta/ (/ s/ )/ 为/ 其它/ 值时/ ,/ 在/ 没有/ 外部/ 输入/ 发生/ 的/ 情况/ 下/ ,/ 经过/ ta/ (/ s/ )/ 时间/ 之后/ ,/ 模型/ 将/ 进入/ 由/ 内部/ 状态/ 转换/ 函数/ δ/ int/ 所/ 决定/ 的/ 下/ 一个/ 状态/ s/ =/ δ/ int/ (/ s/ )/ ,/ 并/ 产生/ 输出/ ,/ 需要/ 注意/ 的/ 是/ 模型/ 只/ 在/ 此种/ 情况/ 下/ 产生/ 输出/ ;/ 若/ 在/ ta/ (/ s/ )/ 时间/ 之内/ ,/ 有/ 外部/ 输入/ x/ ∈/ Xbm/ 产生/ ,/ 则/ 模型/ 将/ 进入/ 由/ 外部/ 状态/ 转换/ 函数/ δ/ ext/ 所/ 决定/ 的/ 下/ 一个/ 状态/ s/ =/ δ/ ext/ (/ s/ ,/ e/ ,/ x/ )/ ./ 如果/ 外部/ 输入/ 恰好/ 出现/ 在/ ta/ (/ s/ )/ 时刻/ ,/ 那么/ 模型/ 的/ 下/ 一个/ 状态/ 由/ 冲突消解/ 函数/ δ/ con/ 决定/ ./ 将/ 已有/ 的/ 原子/ 模型/ 或/ 耦合/ 模型/ 的/ 输入输出/ 端口/ 连接起来/ 就/ 可以/ 构成/ 更大/ 的/ 耦合/ 模型/ ./ 形式/ 上/ ,/ 耦合/ 模型/ 可以/ 表示/ 成/ :/ N/ =/ 〈/ X/ ,/ Y/ ,/ D/ ,/ {/ Md/ |/ d/ ∈/ D/ }/ ,/ EIC/ ,/ EOC/ ,/ IC/ 〉/ ,/ 其中/ :/ X/ 是/ 输入/ 端口/ 及其/ 参数值/ 的/ 二元/ 组/ 集合/ ;/ Y/ 是/ 输出/ 端口/ 及其/ 参数值/ 的/ 二元/ 组/ 集合/ ;/ D/ 是/ 构建/ 耦合/ 模型/ 的/ 子/ 模型/ 名称/ 集合/ ;/ Md/ 表示/ 名称/ 为/ d/ 的/ 子/ 模型/ ;/ EIC/ 是/ 该/ 耦合/ 模型/ 输入/ 端口/ 与/ 其子/ 模型/ 的/ 输/ EOC/ 是子/ 模型/ 的/ 输出/ 端口/ 与/ 该/ 耦合/ 模型/ 的/ 输/ IC/ 是子/ 模型/ 之间/ 的/ 输入/ 、/ 输出/ 端口/ 连接/ 关系/ 集合/ ./ 模型/ 的/ 耦合/ 是/ 通过/ 指定/ 端口/ 之间/ 的/ 连接/ 关系/ 来/ 实现/ 的/ ,/ 这样/ 就/ 可以/ 由/ 已有/ 的/ 模型/ 层次化/ 地/ 构成/ 更大/ 的/ 模型/ [/ 19/ ]/ ./ PDEVS/ 规范/ 还/ 规定/ 了/ 与/ 建/ 模范/ 式/ 相对/ 应/ 的/ 仿真/ 引擎/ 实现/ 规范/ ./ 但/ 由于/ PDEVS/ 不/ 支持/ 原子/ 模型/ 的/ 可视化/ 建模/ ,/ 模型/ 开发/ 难度/ 大/ ,/ 且/ 原子/ 模型/ 的/ 事件处理/ 逻辑/ 过于/ 集中/ ,/ 时间/ 同步/ 开销/ 大/ ,/ 运行/ 效率/ 不/ 理想/ ,/ 因此/ 到/ 目前为止/ 未/ 被/ 业界/ 广泛/ 接受/ ./ 总之/ ,/ 目前/ 国内外/ 并行/ 仿真/ 组件/ 建模/ 理论/ 与/ 技术/ 正/ 处于/ 研究/ 发展/ 之中/ ,/ 现有/ 的/ 理论/ 与/ 技术/ 要么/ 不/ 支持/ 可视化/ 建模/ 、/ 时间/ 同步/ 开销/ 大/ 或者/ 建模/ 方式/ 与/ 仿真/ 平台/ 绑定/ ,/ 要么/ 不/ 支持/ 复杂/ 模型/ 的/ 递归/ 分解/ 、/ 使用/ 难度/ 大/ ,/ 要么/ 不/ 支持/ 并行/ 仿真/ ,/ 难以/ 满足/ 大规模/ 并行/ 仿真/ 应用/ 在/ 模型/ 递归/ 分解/ 、/ 分布式/ 可视化/ 开发/ 、/ 封出/ 端口/ 的/ 连接/ 关系/ 集合/ ;/ 入/ 端口/ 的/ 连接/ 关系/ 集合/ ;/ Page4/ 装/ 和/ 快速/ 组装/ 及/ 平台/ 间/ 模型/ 的/ 重用/ 等/ 方面/ 的/ 需求/ ,/ 亟待/ 研究/ 高效/ 的/ 并行/ 仿真/ 组件/ 建模/ 规范/ 及/ 模型/ 可视化/ 建模/ 技术/ ,/ 以/ 促进/ 复杂/ 系统/ 并行/ 仿真/ 应用/ 的/ 发展/ ./ 3EDEVS/ 范式/ EDEVS/ 范式/ 在/ 保证/ PDEVS/ 范式/ 的/ 递归性/ 、/ 自/ 包含/ 特性/ 及/ 建模/ 表达能力/ 的/ 基础/ 上/ ,/ 针对/ PDEVS/ 不/ 支持/ 原子/ 模型/ 可视化/ 建模/ 及/ 事件处理/ 逻辑/ 过于/ 集中/ 、/ 时间/ 同步/ 开销/ 大/ 的/ 缺点/ ,/ 通过/ 引入/ 内部/ 端口/ ,/ 将/ PDEVS/ 原子/ 模型/ 的/ 外部/ 状态/ 转换/ 函数/ 和/ 内部/ 状态/ 转换/ 函数/ 划分/ 为/ 与/ 端口/ 相对/ 应/ 的/ 端口/ 处理函数/ ,/ 充分/ 开发/ 状态/ 转换/ 函数/ 潜在/ 的/ 并行性/ ,/ 在/ 不/ 违反/ 因果关系/ 的/ 前提/ 下/ 实现/ 更/ 细粒度/ 的/ 并行/ ./ EDEVS/ 包括/ 原子/ 模型/ 与/ 耦合/ 模型/ 两个/ 范式/ ,/ 以下/ 将/ 分别/ 对/ 两个/ 范式/ 进行/ 介绍/ ./ 3.1/ EDEVS/ 原子/ 模型/ 及其/ 参数值/ 的/ 二元关系/ 集合/ ;/ EDEVS/ 原子/ 模型/ 可以/ 用/ 一个/ 十元/ 组来/ 表示/ :/ M/ =/ 〈/ Xm/ ,/ Ym/ ,/ Km/ ,/ S/ ,/ Initie/ ,/ δ/ ,/ δ/ con/ ,/ λ/ ,/ feid/ ,/ ea/ 〉/ ,/ 其中/ :/ Xm/ =/ {/ (/ p/ ,/ v/ )/ |/ p/ ∈/ IPorts/ ,/ v/ ∈/ Xp/ }/ 是/ 输入/ 端口/ 及其/ 参数值/ 的/ 二元关系/ 集合/ ;/ Ym/ =/ {/ (/ p/ ,/ v/ )/ |/ p/ ∈/ OPorts/ ,/ v/ ∈/ Yp/ }/ 是/ 输出/ 端口/ InnerPorts/ =/ {/ "/ cancelOP/ "/ }/ ∪/ OtherPorts/ 为/ 内/ Km/ =/ {/ (/ p/ ,/ v/ )/ |/ p/ =/ "/ cancelOP/ "/ ,/ v/ ∈/ intorp/ ∈/ OtherPorts/ ,/ v/ ∈/ Kp/ }/ 是/ 内部/ 端口/ 及其/ 参数值/ 的/ 二元关系/ 集合/ ,/ Xm/ 、/ Ym/ 和/ Km/ 也/ 称为/ 事件/ 集/ ;/ feid/ =/ (/ OPorts/ ∪/ OtherPorts/ )/ →/ (/ int/ )/ 是/ 一个/ ID/ 生成/ 函数/ ,/ 该/ 函数/ 为/ 每个/ 被/ 调度/ 的/ 事件/ (/ 目的/ 端口/ “/ cancelOP/ ”/ 除外/ )/ 生成/ 一个/ 全局/ 唯一/ 的/ 标识/ ,/ 在/ 所/ 调度/ 的/ 事件/ 未/ 被/ 执行/ 之前/ ,/ 以此/ 标识/ 作为/ 参数/ 调度/ 一个/ 目的/ 端口/ 为/ “/ cancelOP/ ”/ 的/ 事件/ ,/ 可/ 将/ 其/ 撤销/ ;/ Initie/ =/ {/ (/ p/ ,/ t/ )/ |/ p/ ∈/ Km/ ,/ 0/ / t/ </ }/ 是/ 目的/ 端口/ 为/ 内部/ 端口/ 的/ 初始/ 事件/ 集/ ,/ 其中/ “/ (/ p/ ,/ t/ )/ ”/ 代表/ p/ 事件/ 在/ t/ 时刻/ 执行/ (/ “/ 执行/ ”/ 即/ 执行/ 其/ 相应/ 的/ 端口/ 处理函数/ )/ ;/ 部/ 端口/ ;/ δ/ :/ (/ Xm/ ∪/ Km/ )/ ×/ S/ →/ S/ 是/ 端口/ 处理函数/ ;/ δ/ con/ :/ (/ Xm/ ∪/ Km/ )/ b/ ×/ S/ →/ S/ 是/ 优先级/ 排列/ 函数/ ,/ 当/ 同一/ 组件/ 中/ 的/ 多个/ 事件/ 被/ 调度/ 在/ 同一/ 时刻/ 执行/ 时/ ,/ 将/ 按/ 优先级/ 先后顺序/ 触发/ 相应/ 的/ 端口/ 处理函数/ ;/ λ/ :/ (/ Xm/ ∪/ Km/ )/ ×/ S/ →/ (/ Km/ ∪/ Ym/ )/ b/ 为/ 输出/ 函数/ ;/ ea/ :/ (/ Km/ ∪/ Ym/ )/ ×/ S/ →/ R/ +/ 0/ ,/ 为/ 时间/ 推进/ 函数/ ,/ 决/ IPorts/ ∩/ InnerPorts/ =/ / ,/ IPorts/ ∩/ OPorts/ =/ 定所/ 调度/ 的/ 事件/ 的/ 执行/ 时间/ ;/ / ,/ OPorts/ ∩/ InnerPorts/ =/ / ./ 与/ PDEVS/ 原子/ 模型/ 不同/ 的/ 是/ ,/ EDEVS/ 原子/ 模型/ 有/ 三类/ 端口/ :/ 输入/ 端口/ 、/ 内部/ 端口/ 及/ 输出/ 端口/ ,/ 其中/ 内部/ 端口/ 只/ 对模型/ 自身/ 可见/ ./ 输入/ 端口/ 接收/ 由/ 其它/ 模型/ 触发/ 的/ 事件/ ,/ 而/ 内部/ 端口/ 和/ 输出/ 端口/ 则/ 接收/ 模型/ 内部/ 逻辑/ 触发/ 的/ 事件/ ,/ 每个/ 端口/ 都/ 有/ 相应/ 的/ 处理函数/ 来/ 处理事件/ (/ 事件处理/ 函数/ 为/ δ/ 的/ 子集/ )/ ./ 事件处理/ 基本/ 流程/ 为/ :/ 接收/ 事件/ 传入/ 到/ 本/ 端口/ 的/ 数据/ ,/ 修改/ 模型/ 的/ 状态变量/ ,/ 调度/ 其它/ 事件/ (/ 其中/ ,/ 输出/ 端口/ 仅/ 将/ 接收/ 到/ 的/ 事件/ 转发/ 到/ 与/ 该/ 端口/ 相连/ 的/ 其它/ 模型/ 的/ 输入/ 端口/ )/ ./ 就/ 模型/ 本身/ 而言/ ,/ 称/ 输入/ 端口/ 接收/ 到/ 的/ 事件/ 为/ 外部/ 事件/ ,/ 内部/ 端口/ 接收/ 到/ 的/ 事件/ 为/ 内部/ 事件/ ;/ 相应/ 地/ ,/ 若/ 模型/ 内部/ 逻辑/ 触发/ 了/ 一个/ 目的/ 端口/ 为/ 内部/ 端口/ 的/ 事件/ ,/ 则/ 称/ 调度/ 了/ 一个/ 内部/ 事件/ ,/ 若/ 模型/ 内部/ 逻辑/ 触发/ 了/ 一个/ 目的/ 端口/ 为/ 输出/ 端口/ 的/ 事件/ 则/ 称/ 调度/ 了/ 一个/ 外部/ 事件/ ./ 在/ 任意/ 时刻/ 模型/ 处于/ 状态/ s/ ,/ 如果/ 有/ 外部/ 事件/ 或/ 内部/ 事件/ 发生/ ,/ 那么/ 模型/ 进入/ 下/ 一个/ 由/ 端口/ 处理函数/ δ/ 决定/ 的/ 下/ 一个/ 状态/ s/ =/ δ/ (/ s/ ,/ x/ )/ ,/ 而后/ 调度/ 一系列/ 由/ 输出/ 函数/ λ/ (/ x/ ,/ s/ )/ 所/ 决定/ 的/ 内部/ 事件/ 或/ 外部/ 事件/ ,/ 如果/ 这些/ 事件/ 没有/ 被/ 取消/ ,/ 那么/ 经过/ 由/ 时间/ 推进/ 函数/ ea/ 所/ 确定/ 的/ 延时/ 之后/ ,/ 将/ 触发/ 相应/ 的/ 端口/ 处理函数/ [/ 12/ ]/ ./ 3.2/ EDEVS/ 耦合/ 模型/ EDEVS/ 耦合/ 模型/ 的/ 定义/ 与/ PDEVS/ 的/ 耦合/ 模型/ 定义/ 类似/ ,/ 皆/ 通过/ 指定/ 端口/ 连接/ 关系/ 来/ 从/ 原子/ 模型/ 层次化/ 地/ 构造/ 更大/ 的/ 模型/ [/ 12/ ]/ ./ 3.3/ EDEVS/ 原子/ 模型/ 建模/ 实例/ 本节/ 将/ 介绍/ 两个/ EDEVS/ 原子/ 模型/ 建模/ 实例/ ./ 其中/ ,/ 第/ 1/ 个/ 模型/ 实现/ 了/ 一个/ 积分器/ ,/ 该/ 积分器/ 在/ 给定/ 的/ 积分/ 区间/ 和/ 步长/ 内/ 对/ X2/ 积分/ ;/ 第/ 2/ 个/ 模型/ 实现/ 了/ 一个/ 加法器/ ,/ 对/ 输入/ 该/ 加法器/ 的/ 两个/ 数/ 求和/ ,/ 在/ 下节/ 的/ 耦合/ 模型/ 实例/ 中/ 本文/ 将会/ 把/ 两个/ 积分器/ 的/ 输出/ 端口/ 分别/ 与/ 加法器/ 的/ 两个/ 输入/ 端口/ 相连/ ,/ 构建/ 一个/ 耦合/ 模型/ ./ 3.3/ ./ 1/ 积分器/ 模型/ 图/ 1/ 为/ 积分器/ 模型/ 示例/ ./ 该/ 模型/ 对/ X2/ 进行/ 定/ 步长/ 积分/ ./ 其中/ Step/ ,/ Integral/ ,/ Begin/ ,/ End4/ 个/ 状态变量/ 分别/ 描述/ “/ 积分/ 步长/ ”/ 、/ “/ 积分/ 值/ ”/ 、/ “/ 积分/ 的/ 起始/ 点/ ”/ 及/ “/ 积分/ 的/ 结束/ 点/ ”/ ./ Integral/ 的/ 初始值/ 为/ 0.0/ ,/ Step/ ,/ Begin/ 及/ End/ 可以/ 由/ 模型/ 的/ 使用者/ 自行/ 设定/ ,/ Step/ 越小/ ,/ 积分/ 值越/ 精确/ ./ 模型/ 有/ 一个/ 内部/ 端口/ 和/ 一个/ 输出/ 端口/ ,/ 没有/ 输入/ 端口/ ./ 内部/ 端口/ 的/ 参数/ 集为/ 空/ ,/ 其/ 端口/ 处理函数/ 对/ (/ Begin/ +/ t/ )/ ×/ (/ Begin/ +/ t/ )/ ×/ Step/ 即/ X/ ×/ dt/ 的/ 值/ 进行/ 累加/ ;/ 输出/ 端口/ 的/ 参数/ 集中/ 只有/ 一个/ 参数/ ,/ 即/ 积分/ 结果/ ,/ 用于/ 向外/ 输出/ 积分/ 值/ ./ Page5/ 该/ 模型/ 的/ 处理/ 流程/ 为/ :/ 在/ 逻辑/ 时间/ 0/ 时刻/ ,/ 模型/ 调度/ 一个/ 目的/ 端口/ 为/ “/ IntegralOperation/ ”/ 的/ 初始/ 事件/ ,/ 触发/ 积分/ 累加/ 操作/ Integral/ =/ Integral/ +/ (/ Begin/ +/ t/ )/ ×/ (/ Begin/ +/ t/ )/ ×/ Step/ ./ 此后/ ,/ 若/ 积分/ 未/ 完成/ (/ 即/ Begin/ +/ t/ </ End/ )/ ,/ 则/ “/ IntegralOperation/ ”/ 的/ 端口/ 处理函数/ 在/ 完成/ 状态/ 转换/ 后/ ,/ 皆/ 会/ 调度/ 一个/ 目的/ 端口/ 为/ “/ IntegralOperation/ ”/ ,/ 执行/ 时间/ 为/ 当前/ 时间/ 加上/ “/ Step/ ”/ 个/ 逻辑/ 时间/ 的/ 内部/ 事件/ ,/ 继续/ 积分/ 累加/ 操作/ ,/ 否则/ 调度/ 一个/ 延时/ 为/ 0/ 、/ 目的/ 端口/ 为/ “/ Ans/ ”/ 的/ 外部/ 事件/ ,/ 将/ 积分/ 值/ ”/ Integral/ ”/ 输出/ ./ IPorts/ =/ {/ }/ InnerPorts/ =/ {/ "/ IntegralOperation/ "/ }/ OPort/ =/ {/ "/ Ans/ "/ }/ Km/ =/ {/ (/ p/ ,/ v/ )/ |/ p/ ∈/ InnerPorts/ ,/ v/ =/ / }/ Ym/ =/ {/ (/ p/ ,/ v/ )/ |/ p/ ∈/ OPorts/ ,/ v/ ∈/ / }/ S/ =/ {/ Step/ ,/ Integral/ ,/ Begin/ ,/ End/ |/ Step/ ,/ Integral/ ,/ Begin/ ,/ End/ ∈/ / }/ ,/ S0/ =/ {/ Integral/ =/ 0/ ,/ Step/ =/ configurable/ ,/ Begin/ =/ configurable/ ,/ End/ =/ configurable/ }/ Initie/ =/ {/ (/ "/ IntegralOperation/ "/ ,/ 0/ )/ }/ ,/ δ/ con/ =/ firstcomefirstservice/ δ/ (/ 〈/ Begin/ ,/ End/ ,/ Step/ ,/ Integral/ 〉/ ,/ (/ "/ Integral/ "/ ,/ / )/ )/ =/ 〈/ Begin/ ,/ End/ ,/ Step/ ,/ Integral/ +/ (/ Begin/ +/ t/ )/ ×/ 烅/ 烄/ (/ Begin/ +/ t/ )/ ×/ Step/ 〉/ ,/ if/ (/ Begin/ +/ t/ </ End/ )/ 烆/ 〈/ Begin/ ,/ End/ ,/ Step/ ,/ Integral/ 〉/ ,/ λ/ (/ 〈/ Step/ ,/ Integral/ ,/ Begin/ ,/ End/ 〉/ ,/ (/ "/ Integral/ "/ ,/ / )/ )/ =/ {/ 〈/ "/ Integral/ "/ ,/ / 〉/ ,/ ifBegin/ +/ t/ </ Endea/ (/ "/ IntegralOperation/ "/ ,/ 〈/ Step/ ,/ Integral/ ,/ Begin/ ,/ End/ 〉/ )/ =/ Stepea/ (/ "/ Ans/ "/ ,/ 〈/ Step/ ,/ Integral/ ,/ Begin/ ,/ End/ 〉/ )/ =/ 0/ 〈/ "/ Ans/ "/ ,/ Integral/ 〉/ ,/ 3.3/ ./ 2/ 加法器/ 模型/ 图/ 2/ 为/ 加法器/ 模型/ 示例/ ./ 该/ 模型/ 的/ 两个/ 输入/ 端口/ “/ InA/ ”/ 及/ “/ InB/ ”/ 接收/ 两个/ 加数/ ,/ 而后/ 送入/ 两个/ 内部/ 端口/ “/ ans1/ ”/ 及/ “/ ans2/ ”/ 进行/ 累加/ 操作/ :/ ans/ =/ ans/ +/ v/ ,/ 并/ 记录/ 已/ 累加/ 的/ 操作数/ 的/ 个数/ :/ count/ =/ count/ +/ 1/ ./ IPorts/ =/ {/ "/ InA/ "/ ,/ "/ InB/ "/ }/ InnerPorts/ =/ {/ "/ ans1/ "/ ,/ "/ ans2/ "/ }/ OPort/ =/ {/ "/ Output/ "/ }/ Xm/ =/ {/ (/ p/ ,/ v/ )/ |/ p/ ∈/ IPorts/ ,/ v/ ∈/ / }/ Km/ =/ {/ (/ p/ ,/ v/ )/ |/ p/ ∈/ InnerPorts/ ,/ v/ ∈/ / }/ Ym/ =/ {/ (/ p/ ,/ v/ )/ |/ p/ ∈/ OPorts/ ,/ v/ ∈/ / }/ S/ =/ {/ ans/ ,/ count/ |/ ans/ ,/ count/ ∈/ / }/ ,/ S0/ =/ {/ ans/ =/ 0/ ,/ count/ =/ 0/ }/ Initie/ =/ {/ / }/ ,/ δ/ con/ =/ firstcomefirstservice/ δ/ (/ 〈/ ans/ ,/ count/ 〉/ ,/ (/ "/ InA/ "/ ,/ v/ )/ )/ =/ 〈/ ans/ ,/ count/ 〉/ δ/ (/ 〈/ ans/ ,/ count/ 〉/ ,/ (/ "/ InB/ "/ ,/ v/ )/ )/ =/ 〈/ ans/ ,/ count/ 〉/ δ/ (/ 〈/ ans/ ,/ count/ 〉/ ,/ (/ "/ ans1/ "/ ,/ v/ )/ )/ =/ 〈/ ans/ +/ v/ ,/ count/ +/ 1/ 〉/ δ/ (/ 〈/ ans/ ,/ count/ 〉/ ,/ (/ "/ ans2/ "/ ,/ v/ )/ )/ =/ 〈/ ans/ +/ v/ ,/ count/ +/ 1/ 〉/ λ/ (/ 〈/ ans/ ,/ count/ 〉/ ,/ (/ "/ InA/ "/ ,/ v/ )/ )/ =/ 〈/ "/ ans1/ "/ ,/ v/ 〉/ λ/ (/ 〈/ ans/ ,/ count/ 〉/ ,/ (/ "/ InB/ "/ ,/ v/ )/ )/ =/ 〈/ "/ ans2/ "/ ,/ v/ 〉/ λ/ (/ 〈/ ans/ ,/ count/ 〉/ ,/ (/ "/ ans1/ "/ ,/ v/ )/ )/ =/ 〈/ "/ Output/ "/ ,/ ans/ 〉/ if/ (/ count/ =/ =/ 2/ )/ λ/ (/ 〈/ ans/ ,/ count/ 〉/ ,/ (/ "/ ans2/ "/ ,/ v/ )/ )/ =/ 〈/ "/ Output/ "/ ,/ ans/ 〉/ if/ (/ count/ =/ =/ 2/ )/ ea/ (/ "/ ans1/ "/ ,/ 〈/ ans/ ,/ count/ 〉/ )/ =/ 0ea/ (/ "/ ans2/ "/ ,/ 〈/ ans/ ,/ count/ 〉/ )/ =/ 0ea/ (/ "/ Output/ "/ ,/ 〈/ ans/ ,/ count/ 〉/ )/ =/ 0/ 当/ count/ =/ =/ 2/ 时/ 累加/ 操作/ 完成/ ,/ 端口/ “/ Output/ ”/ 将/ 向/ 外/ 输出/ 最终/ 结果/ ans/ ./ 3.4/ EDEVS/ 耦合/ 模型/ 建模/ 实例/ 图/ 3/ 为/ 两个/ 积分器/ 与/ 一个/ 加法器/ 耦合/ 而成/ 的/ 模型/ ,/ 该/ 模型/ 计算/ 两个/ 积分器/ 的/ 积分/ 之/ 和/ ./ 该/ 耦合/ 模型/ 没有/ 输入/ 端口/ 和/ 内部/ 端口/ ,/ 只有/ 一个/ 用于/ 输出/ 积分/ 之/ 和/ 的/ 输出/ 端口/ “/ CoupledModelOut/ ”/ ./ D/ 中/ 定义/ 了/ 耦合/ 组件/ 中/ 的/ 子/ 组件/ 的/ 名称/ 为/ IntergralUnit1/ ,/ IntergralUnit2/ 以及/ AdderUnit1/ ,/ 其中/ 前/ 两个/ 为/ 积分器/ 模型/ ,/ 第三个/ 为/ 加法器/ 模型/ ,/ EOC/ 中将/ 加法器/ 的/ “/ Output/ ”/ 输出/ 端口/ 连接/ 至/ 耦合/ 组件/ 的/ “/ Coupled/ -/ ModelOut/ ”/ 输出/ 端口/ ,/ IC/ 中将/ 两个/ 积分器/ 的/ “/ Ans/ ”/ 输出/ 端口/ 分别/ 连接/ 至/ 加法器/ 的/ “/ InA/ ”/ 及/ “/ InB/ ”/ 输入/ 端口/ ,/ 由此/ 构成/ 计算/ 积分/ 和/ 的/ 耦合/ 模型/ ./ OPort/ =/ {/ "/ CoupledModelOut/ "/ }/ Xm/ =/ / Km/ =/ / Ym/ =/ {/ (/ p/ ,/ v/ )/ |/ p/ ∈/ OPorts/ ,/ v/ ∈/ / }/ D/ =/ {/ IntergralUnit1/ ,/ IntergralUnit2/ ,/ AdderUnit1/ }/ MIntergralUnit1/ =/ Intergrator/ ,/ MIntergralUnit2/ =/ Intergrator/ ,/ MAdderUnit1/ =/ AdderEIC/ =/ / EOC/ =/ {/ (/ (/ AdderUnit1/ ,/ "/ Output/ "/ )/ ,/ (/ N/ ,/ "/ CoupledModelOut/ "/ )/ )/ }/ IC/ =/ {/ (/ (/ IntergralUnit1/ ,/ "/ Ans/ "/ )/ ,/ (/ AdderUnit1/ ,/ "/ InA/ "/ )/ )/ ,/ (/ (/ IntergralUnit2/ ,/ "/ Ans/ "/ )/ ,/ (/ AdderUnit1/ ,/ "/ InB/ "/ )/ )/ }/ 3.5/ EDEVS/ 描述/ 能力/ 证明/ EDEVS/ 的/ 描述/ 能力/ 决定/ 了/ 基于/ 它/ 搭建/ 的/ 仿真/ 建模/ 框架/ 的/ 建模/ 能力/ ,/ 也/ 就/ 决定/ 了/ 整个/ 仿真/ 平台/ 的/ 仿真/ 能力/ ./ 而/ PDEVS/ 是从/ 控制/ 理论/ 发展/ 而来/ 的/ ,/ 理论/ 较/ 成熟/ ,/ 其/ 建模/ 离散/ 事件/ 系统/ 的/ 能力/ 业已/ 得到/ 形式化/ 的/ 证明/ ./ 因此/ 可以/ 通过/ 证明/ EDEVS/ 能/ 描述/ PDEVS/ 中/ 的/ 所有/ 模型/ 来/ 保证/ EDEVS/ 的/ 建模/ 能力/ ./ 为此/ ,/ 以下/ 将/ 证明/ EDEVS/ 能/ 描述/ PDEVS/ 所能/ 描述/ 的/ 任何/ 模型/ ./ 定义/ 1/ ./ 给定/ 任意/ PDEVS/ 模型/ Mpdevs/ =/ 〈/ XM/ ,/ YM/ ,/ S/ ,/ δ/ ext/ ,/ δ/ int/ ,/ δ/ con/ ,/ λ/ ,/ ta/ 〉/ ,/ 定义/ 相应/ 的/ EDEVS/ 模型/ Mpdevs/ =/ 〈/ XM/ ,/ YM/ ,/ Km/ ,/ Sed/ ,/ Initie/ ,/ δ/ ,/ δ/ con/ ,/ λ/ ed/ ,/ feid/ ,/ ea/ 〉/ ./ 其中/ (/ 以下/ 提及/ 的/ 时间/ 均/ 为/ 仿真/ 时间/ )/ :/ InnerPorts/ =/ {/ k1/ ,/ k2/ ,/ k3/ }/ ;/ K1/ =/ {/ k1/ ,/ / }/ ,/ K2/ =/ {/ k2/ ,/ / }/ ,/ K3/ =/ {/ k3/ ,/ / }/ ;/ Km/ =/ {/ K1/ ,/ K2/ ,/ K3/ }/ (/ K1/ 的/ 端口/ 处理函数/ 取代/ δ/ int/ ,/ K2/ 用于/ 取消/ NIeid0/ 所/ 标识/ 的/ 被/ 调度/ 但/ 尚未/ 执行/ 的/ 事件/ ,/ K3/ 用于/ 模拟/ δ/ ext/ 的/ 行为/ ,/ 本文/ 将/ 用/ Porttime/ 来/ 标识/ 目的/ 端口/ 为/ “/ Port/ ”/ ,/ 执行/ 时刻/ 为/ “/ time/ ”/ 的/ 事件/ )/ ;/ Page6Sed/ =/ 〈/ NIeid0/ ,/ NIeidn/ ,/ tl/ ,/ tn/ ,/ IPset/ ,/ xflag/ ,/ 能/ 被/ 调度/ 一次/ ;/ NIeid0/ 用于/ 保存/ 上/ 一个/ 被/ 调度/ 的/ K1/ 事件/ 的/ 标识/ ;/ NIeidn/ 用于/ 保存/ 将/ 被/ 调度/ 的/ K1/ 事件/ 的/ 标识/ ;/ tl/ 是/ K1/ 或/ K3/ 事件/ 最近/ 一次/ 被/ 执行/ 的/ 时刻/ ;/ tn/ 是/ 最后/ 被/ 调度/ 的/ K1/ 事件/ 将要/ 被/ 执行/ 的/ 时刻/ ;/ IPset/ 用来/ 构造/ Xbm/ ;/ xflag/ ,/ yflag/ 用来/ 保证/ K3/ 在/ 每个/ 仿真/ 时刻/ 只/ So/ ,/ Sn/ 分别/ 是/ S/ (/ Mpdevs/ 模型/ 中/ 的/ 状态变量/ )/ 的/ 上/ 一个/ 状态/ 和/ 当前/ 状态/ ,/ 由于/ EDEVS/ 模型/ 先/ 执行/ 端口/ 处理函数/ ,/ 后/ 执行/ 输出/ 函数/ ,/ 而/ PDEVS/ 模型/ 正好/ 相反/ ,/ 为了/ 取得/ 与/ PDEVS/ 模型/ 一致/ 的/ 输出/ ,/ 必须/ 用/ So/ 保存/ 上/ 一个/ 状态/ ./ Medevs/ 用于/ 响应/ 外部/ 事件/ 的/ 端口/ 处理函数/ 定义/ 如下/ :/ / p/ ∈/ IPorts/ (/ 以下/ if/ 语句/ 中/ 的/ “/ =/ ”/ 为/ 赋值/ 运算符/ ,/ 隐含/ 其值/ 在/ 给定/ 的/ 定义域/ 内/ ,/ “/ =/ =/ ”/ 为/ 相等/ 测试/ 运算符/ )/ :/ δ/ (/ Xp/ ,/ 〈/ NIeido/ ,/ NIeidn/ ,/ tl/ ,/ tn/ ,/ IPset/ ,/ xflag/ ,/ yflag/ ,/ So/ ,/ Sn/ 〉/ )/ =/ 〈/ NIeido/ ,/ NIeidn/ ,/ tl/ ,/ tn/ ,/ IPset/ / Xp/ ,/ true/ ,/ false/ ,/ 烄/ So/ ,/ Sn/ 〉/ ,/ if/ (/ xflag/ =/ =/ false/ )/ 烅/ 〈/ NIeido/ ,/ NIeidn/ ,/ tl/ ,/ tn/ ,/ IPset/ / Xp/ ,/ true/ ,/ true/ ,/ So/ ,/ Sn/ 〉/ ,/ 烆/ λ/ ed/ (/ Xp/ ,/ 〈/ NIeido/ ,/ NIeidn/ ,/ tl/ ,/ tn/ ,/ IPset/ ,/ xflag/ ,/ yflag/ ,/ So/ ,/ Sn/ 〉/ )/ =/ ea/ (/ K3/ ,/ 〈/ NIeido/ ,/ NIeidn/ ,/ tl/ ,/ tn/ ,/ IPset/ ,/ xflag/ ,/ yflag/ ,/ So/ ,/ Sn/ 〉/ )/ =/ 0/ ;/ 其中/ “/ IPset/ / Xp/ ”/ 表示/ 将/ Xp/ 存入/ IPset/ ./ Medevs/ 状态/ 转换/ 函数/ 用于/ 响应/ 内部/ 事件/ 的/ 部分/ 定义/ 如下/ :/ δ/ (/ K1/ ,/ 〈/ NIeido/ ,/ NIeidn/ ,/ tl/ ,/ tn/ ,/ IPset/ ,/ xflag/ ,/ yflag/ ,/ So/ ,/ Sn/ 〉/ )/ =/ 〈/ NIeidn/ ,/ Kt/ +/ ta/ (/ Sk1/ )/ 烄/ yflag/ ,/ Sn/ ,/ Sk1/ 〉/ ,/ if/ (/ Mpdevs/ :/ δ/ int/ (/ Sn/ )/ =/ Sk1/ )/ 烅/ 〈/ NIeido/ ,/ NIeidn/ ,/ tl/ ,/ tn/ ,/ IPset/ ,/ xflag/ ,/ yflag/ ,/ So/ ,/ Sn/ 〉/ ,/ 烆/ λ/ ed/ (/ K1/ ,/ 〈/ NIeido/ ,/ NIeidn/ ,/ tl/ ,/ tn/ ,/ IPset/ ,/ xflag/ ,/ yflag/ ,/ So/ ,/ Sn/ 〉/ )/ =/ (/ K3/ )/ ,/ if/ (/ xflag/ =/ =/ ture/ &&/ yflag/ =/ =/ false/ )/ / ,/ {/ else/ ;/ (/ K1/ ,/ λ/ (/ So/ )/ )/ ,/ if/ (/ δ/ int/ (/ Sn/ )/ isdefined/ )/ / ,/ {/ ea/ (/ K1/ ,/ Sed/ )/ =/ ta/ (/ Sn/ )/ ,/ ea/ (/ λ/ (/ So/ )/ ,/ Sed/ )/ =/ 0/ ;/ δ/ (/ K2/ ,/ 〈/ NIeido/ ,/ NIeidn/ ,/ tl/ ,/ tn/ ,/ IPset/ ,/ xflag/ ,/ yflag/ ,/ So/ ,/ Sn/ 〉/ )/ =/ 〈/ NIeido/ ,/ NIeidn/ ,/ tl/ ,/ tn/ ,/ IPset/ ,/ xflag/ ,/ yflag/ ,/ So/ ,/ Sn/ 〉/ ;/ λ/ (/ K2/ ,/ 〈/ NIeido/ ,/ NIeidn/ ,/ tl/ ,/ tn/ ,/ IPset/ ,/ xflag/ ,/ yflag/ ,/ So/ ,/ Sn/ 〉/ )/ =/ 〈/ "/ cancelOP/ "/ ,/ NIeido/ 〉/ ;/ ea/ (/ 〈/ "/ cancelOP/ "/ ,/ NIeido/ 〉/ ,/ 〈/ NIeido/ ,/ NIeidn/ ,/ tl/ ,/ tn/ ,/ IPset/ ,/ xflag/ ,/ yflag/ ,/ So/ ,/ Sn/ 〉/ )/ =/ 0/ ;/ δ/ (/ K3/ ,/ 〈/ NIeido/ ,/ NIeidn/ ,/ tl/ ,/ tn/ ,/ IPset/ ,/ xflag/ ,/ yflag/ ,/ So/ ,/ Sn/ 〉/ )/ =/ 〈/ / ,/ Kt/ +/ ta/ (/ Sk3/ )/ 烄/ if/ (/ Mpdevs/ :/ δ/ ext/ (/ (/ Sn/ ,/ t/ -/ tl/ )/ ,/ IPset/ )/ =/ Sk3andtn/ =/ =/ t/ )/ 〈/ NIeidn/ ,/ Kt/ +/ ta/ (/ Sk3/ )/ / ,/ false/ ,/ false/ ,/ Sn/ ,/ Sk3/ 〉/ ,/ 烅/ elseif/ (/ Mpdevs/ :/ δ/ ext/ (/ (/ Sn/ ,/ t/ -/ tl/ )/ ,/ IPset/ )/ =/ Sk3andtn/ !/ =/ t/ )/ 〈/ NIeido/ ,/ NIeidn/ ,/ tl/ ,/ tn/ ,/ / ,/ false/ ,/ false/ ,/ So/ ,/ Sn/ 〉/ 烆/ λ/ ed/ (/ K3/ ,/ 〈/ NIeido/ ,/ NIeidn/ ,/ tl/ ,/ tn/ ,/ IPset/ ,/ xflag/ ,/ yflag/ ,/ So/ ,/ Sn/ 〉/ )/ =/ ea/ (/ K1/ ,/ 〈/ NIeido/ ,/ NIeidn/ ,/ tl/ ,/ tn/ ,/ IPset/ ,/ xflag/ ,/ λ/ flag/ ,/ So/ ,/ Sn/ 〉/ )/ =/ ta/ (/ Sn/ )/ ;/ ea/ (/ K2/ ,/ 〈/ NIeido/ ,/ NIeidn/ ,/ tl/ ,/ tn/ ,/ IPset/ ,/ xflag/ ,/ λ/ flag/ ,/ So/ ,/ Sn/ 〉/ )/ =/ 0/ ./ 若/ Mpdevs/ 中/ 的/ 冲突消解/ 函数/ 定义/ 为/ δ/ con/ (/ s/ ,/ ta/ (/ s/ )/ ,/ x/ )/ =/ δ/ ext/ (/ δ/ int/ (/ s/ )/ ,/ 0/ ,/ x/ )/ )/ ,/ 则/ Medevs/ 的/ δ/ con/ 定义/ 为/ δ/ con/ (/ (/ xm/ ∪/ km/ )/ b/ ,/ s/ )/ =/ 即/ K2/ 的/ 优先级/ 最高/ ,/ 其次/ 是/ K1/ ,/ 然后/ 是/ 外部/ 事件/ ,/ 最后/ 是/ K3/ ;/ 否则/ Medevs/ 的/ δ/ con/ 定义/ 为/ δ/ con/ (/ (/ xm/ ∪/ km/ )/ b/ ,/ s/ )/ =/ 即/ K2/ 的/ 优先级/ 最高/ ,/ 其次/ 是/ 外部/ 事件/ ,/ 然后/ 是/ K3/ ,/ 最后/ 是/ K1/ ./ 引理/ 1/ ./ 内部/ 事件/ K2/ 或/ K3/ 只能/ 伴随/ 外部/ 事/ 证明/ ./ 从/ 状态/ 转换/ 函数/ 的/ 定义/ 中/ 可以/ 知道/ ,/ K2/ 只/ 由/ 与/ K3/ 相对/ 应/ 的/ 状态/ 转换/ 函数/ 调度/ 且/ 延时/ 为/ 0/ ,/ 而/ K3/ 只/ 由/ 外部/ 事件/ 调度/ 且/ 延时/ 为/ 0/ ,/ 因而/ K2/ 及/ K3/ 只能/ 发生/ 在/ 有/ 外部/ 事件/ 发生/ 的/ 时刻/ ,/ 即/ 伴随/ 外部/ 事件/ 发生/ ./ 件/ 发生/ 定理/ 1/ ./ Medevs/ 能/ 准确/ 描述/ Mpdevs/ ./ Page7/ 证明/ ./ 只要/ 证明/ ,/ 给定/ 输入/ 串/ {/ (/ Xt1/ (/ 0/ / t1/ / …/ / tn/ )/ }/ 及/ Mpdevs/ 的/ 初始状态/ S0/ ,/ 置/ Medevs/ 的/ 初始状态/ Sed0/ =/ 〈/ / ,/ Kta/ (/ S0/ )/ false/ ,/ false/ ,/ S0/ ,/ S0/ 〉/ ,/ Initie/ =/ {/ 〈/ K1/ ,/ ta/ (/ S0/ )/ 〉/ }/ (/ 即/ 调度/ K1/ 事件/ 在/ ta/ (/ S0/ )/ 时刻/ 执行/ )/ ,/ 那么/ 在/ 任意/ 时间段/ 内/ ,/ Medevs/ 的/ 状态/ 转换/ 序列/ 在/ Sn/ 分量/ 上/ 的/ 投影/ 序列/ 与/ Mpdevs/ 的/ 状态/ 转换/ 序列/ 相同/ ,/ 输出/ 序列/ 也/ 相同/ (/ 参看/ 文献/ [/ 19/ ]/ 第/ 1/ 章/ 第/ 5/ 节/ 关于/ 模型/ 同构/ 的/ 论述/ )/ ./ 假设/ Mpdevs/ 中/ δ/ con/ (/ s/ ,/ ta/ (/ s/ )/ ,/ x/ )/ =/ δ/ ext/ (/ δ/ int/ (/ s/ )/ ,/ 0/ ,/ x/ )/ )/ ,/ 则/ (/ 1/ )/ t/ =/ 0/ 时/ ,/ 分/ 两种/ 情形/ ./ (/ a/ )/ 若/ t1/ </ ta/ (/ S0/ )/ :/ 对于/ Mpdevs/ ,/ 此时/ 外部/ 输入/ Xt1/ 换/ 发生/ ,/ 因而/ 先/ 执行/ δ/ ext/ :/ Q/ ×/ Xbm/ →/ S/ ,/ 记/ δ/ ext/ (/ S0/ ,/ t1/ -/ 0/ ,/ Xt11/ )/ =/ S1/ ,/ 则/ Mpdevs/ 的/ 状态/ 变化/ 序列/ STpdevs/ =/ {/ S00/ ,/ St11/ }/ ,/ 而/ 由于/ 输出/ 只能/ 在/ 内部/ 状态/ 转换/ 函数/ 即将/ 执行/ 时/ 产生/ ,/ 因此/ 此时/ 输出/ 为/ / ,/ 输出/ 序列/ YTpdevs/ =/ / ,/ 时间/ 推进/ 到/ t1/ ,/ 若/ 没有/ 外部/ 输入/ 干扰/ ,/ 内部/ 状态/ 转换/ 函数/ 将/ 在/ t1/ +/ ta/ (/ S1/ )/ 时刻/ 执行/ ./ 对于/ Medevs/ :/ 由于/ K1/ 被/ 调度/ 在/ ta/ (/ S0/ )/ 时刻/ 执行/ ,/ 而/ 由/ 引理/ 知/ 0/ / t/ </ ta/ (/ S0/ )/ 时/ 没有/ K2/ 或/ K3/ 之间/ 发生/ ,/ 事件队列/ 为/ {/ Xt1/ 外部/ 事件/ Xt1/ 分量/ Xt1/ δ/ (/ Xt11/ (/ 1/ )/ ,/ 〈/ / ,/ Kta/ (/ S0/ )/ λ/ ed/ (/ Xt11/ (/ 1/ )/ ,/ 〈/ / ,/ Kta/ (/ S0/ )/ ea/ (/ K3/ ,/ 〈/ / ,/ Kta/ (/ S0/ )/ S0/ 〉/ )/ =/ 0/ ;/ 即/ 调度/ K3/ 在/ t1/ 时刻/ 执行/ ./ 事件队列/ 为/ {/ Xt1t1/ 时刻/ 发生/ 的/ 众多/ 事件/ 当中/ ,/ K3/ 应/ 在/ 最后/ 执行/ ,/ 因而/ 接下来/ 处理/ Xt11/ -/ Xt1/ 对/ Xt11/ (/ 2/ )/ ,/ 〈/ / ,/ Kta/ (/ S0/ )/ δ/ (/ Xt1/ λ/ ed/ (/ Xt11/ (/ 2/ )/ ,/ 〈/ / ,/ Kta/ (/ S0/ )/ 类似/ 可以/ 推出/ ,/ 对/ Xt1/ δ/ (/ Xt11/ (/ n/ )/ ,/ 〈/ / ,/ Kta/ (/ S0/ )/ Xt1/ 〈/ / ,/ Kta/ (/ S0/ )/ Xt1/ 〈/ / ,/ Kta/ (/ S0/ )/ 1/ (/ n/ )/ ,/ 〈/ / ,/ Kta/ (/ S0/ )/ S0/ 〉/ )/ =/ / ;/ λ/ ed/ (/ Xt1/ 此时/ 事件队列/ 为/ {/ Kt1/ δ/ (/ K3/ ,/ 〈/ / ,/ Kta/ (/ S0/ )/ S0/ 〉/ )/ =/ 〈/ Kta/ (/ S0/ )/ false/ ,/ false/ ,/ S0/ ,/ S1/ 〉/ ;/ λ/ ed/ (/ K3/ ,/ 〈/ Kta/ (/ S0/ )/ ea/ (/ K1/ ,/ 〈/ Kta/ (/ S0/ )/ false/ ,/ S0/ ,/ S1/ 〉/ )/ =/ {/ K1/ ,/ K2/ }/ ;/ false/ ,/ S0/ ,/ S1/ 〉/ )/ =/ ta/ (/ S1/ )/ ;/ false/ ,/ S0/ ,/ S1/ 〉/ )/ =/ 0/ ;/ ea/ (/ K2/ ,/ 〈/ Kta/ (/ S0/ )/ 即/ 调度/ 事件/ K2/ 在/ t1/ 时刻/ 执行/ ,/ 调度/ K1/ 事件/ 在/ t1/ +/ ta/ (/ S1/ )/ 时刻/ 执行/ ./ 此时/ 事件队列/ 为/ {/ Kt11/ }/ ,/ 下面/ 处理事件/ K2/ :/ Kt1/ +/ ta/ (/ S1/ )/ δ/ (/ K2/ ,/ 〈/ Kta/ (/ S0/ )/ false/ ,/ S0/ ,/ S1/ 〉/ )/ =/ 〈/ Kta/ (/ S0/ )/ ta/ (/ S1/ )/ ,/ / ,/ false/ ,/ false/ ,/ S0/ ,/ S1/ 〉/ ;/ λ/ ed/ (/ K2/ ,/ 〈/ Kta/ (/ S0/ )/ false/ ,/ S0/ ,/ S1/ 〉/ )/ =/ 〈/ "/ cancelOP/ "/ ,/ NIeido/ 〉/ ;/ ea/ (/ 〈/ "/ cancelOP/ "/ ,/ Kta/ (/ S0/ )/ t1/ +/ ta/ (/ S1/ )/ ,/ / ,/ false/ ,/ false/ ,/ S0/ ,/ S1/ 〉/ )/ =/ 0/ ;/ 此时/ 事件/ Kta/ (/ S0/ )/ 下/ 一/ 事件/ 到来/ 前/ ,/ Medevs/ 的/ 状态/ 稳定/ 在/ 〈/ / ,/ 1/ ,/ t1/ ,/ t1/ +/ ta/ (/ S1/ )/ ,/ / ,/ false/ ,/ false/ ,/ S0/ ,/ S1/ 〉/ ,/ K1Kt1/ +/ ta/ (/ S1/ )/ 事件/ 被/ 调度/ 于/ t1/ +/ ta/ (/ S1/ )/ 时刻/ 发生/ ./ φ/ sn/ (/ St1ed/ =/ / ,/ 即/ 状态/ 转换/ 序列/ 在/ Sn/ 分量/ 上/ 的/ 投影/ Yt1/ φ/ sn/ (/ STedevs/ )/ =/ {/ S00/ ,/ St11/ }/ ,/ 输出/ 序列/ YTedevs/ =/ / ,/ 可见/ ,/ STpdevs/ =/ φ/ sn/ (/ STedevs/ )/ ,/ YTpdevs/ =/ YTedevs/ ,/ 且/ Medevs/ 中/ K1/ 即将/ 发生/ 的/ 时刻/ 与/ Mpdevs/ 中下个/ 内部/ 状态/ 转换/ 时刻/ 相同/ ,/ 都/ 为/ t1/ +/ ta/ (/ S1/ )/ ./ (/ b/ )/ 若/ t1/ / ta/ (/ S0/ )/ :/ 对于/ Mpdevs/ ,/ 由于/ δ/ con/ (/ S/ ,/ ta/ (/ S/ )/ ,/ x/ )/ =/ δ/ ext/ (/ δ/ int/ (/ S/ )/ ,/ 0/ ,/ x/ )/ )/ ,/ 因而/ 先/ 执行/ δ/ int/ :/ S/ →/ S/ ,/ 假设/ δ/ int/ (/ S0/ )/ =/ S1/ ,/ λ/ pdevs/ =/ Yta/ (/ S0/ )/ {/ Yta/ (/ S0/ )/ 1/ }/ ,/ 若/ 没有/ 外部/ 输入/ 干扰/ ,/ 内部/ 状态/ 转换/ 函数/ Page8/ 将/ 在/ ta/ (/ S0/ )/ +/ ta/ (/ S1/ )/ 时刻/ 执行/ ./ 对于/ Medevs/ ,/ 初始/ 事件/ 集/ 为/ {/ Kta/ (/ S0/ )/ 到/ ta/ (/ S0/ )/ ,/ 执行/ 事件/ K1/ :/ δ/ (/ K1/ ,/ 〈/ / ,/ Kta/ (/ S0/ )/ S0/ 〉/ )/ =/ 〈/ Kta/ (/ S0/ )/ ta/ (/ S1/ )/ ,/ / ,/ false/ ,/ false/ ,/ S0/ ,/ S1/ 〉/ ;/ λ/ ed/ (/ K1/ ,/ 〈/ Kta/ (/ S0/ )/ ta/ (/ S1/ )/ ,/ / ,/ false/ ,/ false/ ,/ S0/ ,/ S1/ 〉/ )/ =/ {/ K1/ ,/ Y1/ }/ ;/ ea/ (/ K1/ ,/ 〈/ Kta/ (/ S0/ )/ ta/ (/ S1/ )/ ,/ / ,/ false/ ,/ false/ ,/ S0/ ,/ S1/ 〉/ )/ =/ ta/ (/ S1/ )/ ;/ ea/ (/ Y1/ ,/ 〈/ Kta/ (/ S0/ )/ ta/ (/ S1/ )/ ,/ / ,/ false/ ,/ false/ ,/ S0/ ,/ S1/ 〉/ )/ =/ 0/ ./ 在/ 下/ 一/ 事件/ 到来/ 前/ ,/ Medevs/ 的/ 状态/ 稳定/ 在/ 1/ ,/ Kta/ (/ S0/ )/ +/ ta/ (/ S1/ )/ 〈/ Kta/ (/ S0/ )/ false/ ,/ false/ ,/ S0/ ,/ S1/ 〉/ ,/ K1/ 事件/ 被/ 调度/ 于/ ta/ (/ S0/ )/ +/ ta/ (/ S1/ )/ 时刻/ 发生/ ./ φ/ sn/ (/ Sta/ (/ S0/ )/ φ/ sn/ (/ STedevs/ )/ =/ {/ S00/ ,/ Sta/ (/ S0/ )/ {/ Yta/ (/ S0/ )/ 1/ }/ ,/ 可见/ STpdevs/ =/ φ/ sn/ (/ STedevs/ )/ ,/ YTpdevs/ =/ YTedevs/ ,/ 且/ Medevs/ 中/ K1/ 即将/ 发生/ 的/ 时刻/ 与/ Mpdevs/ 中下个/ 内部/ 状态/ 转换/ 时刻/ 相同/ ,/ 都/ 为/ ta/ (/ S0/ )/ +/ ta/ (/ S1/ )/ ./ (/ 2/ )/ 假设/ ti/ 时刻/ 之前/ STpdevs/ =/ φ/ sn/ (/ STedevs/ )/ ,/ YTpdevs/ =/ YTedevs/ 均/ 成立/ ,/ 记/ Mpdevs/ 所处/ 状态/ 为/ i/ (/ 0/ )/ (/ ti/ -/ 1/ / tk/ </ ti/ )/ ,/ 若/ 没有/ 外部/ 输入/ 干扰/ ,/ 内部/ 状态/ Stk/ 转换/ 函数/ 将/ 在/ tk/ +/ ta/ (/ Stk/ 状态/ 为/ :/ 〈/ Ktk/ -/ lfalse/ ,/ false/ ,/ Stk/ -/ mta/ (/ Stki/ (/ 0/ )/ )/ 时刻/ 发生/ ,/ 模型/ 的/ 输入/ 为/ {/ (/ Xti/ +/ 1n/ )/ |/ (/ ti/ / ti/ +/ 1/ / …/ / ti/ +/ n/ )/ }/ ./ Xti/ +/ n/ (/ a/ )/ 若/ tk/ +/ ta/ (/ Stk/ 证明/ 方法/ 与/ 第/ (/ 1/ )/ 步/ 的/ (/ a/ )/ 情况/ 类似/ ;/ (/ b/ )/ 若/ ti/ / tk/ +/ ta/ (/ Stk/ 证明/ 方法/ 与/ 第/ (/ 1/ )/ 步/ 的/ (/ b/ )/ 情况/ 类似/ ;/ 而/ Mpdevs/ 中/ δ/ con/ (/ s/ ,/ ta/ (/ s/ )/ ,/ x/ )/ =/ δ/ int/ (/ δ/ ext/ (/ s/ ,/ 0/ ,/ x/ )/ )/ 时/ ,/ 证法/ 类似/ ,/ 不再/ 累述/ ./ 综上/ 可知/ Medevs/ 的/ 状态/ 转换/ 序列/ 在/ Sn/ 分量/ 上/ 的/ 投影/ 序列/ 与/ Mpdevs/ 的/ 状态/ 转换/ 序列/ 相同/ ,/ 输出/ 序列/ 也/ 相同/ ,/ 因此/ 命题/ 正确/ ./ 由/ Mpdevs/ 的/ 任意性/ 可知/ EDEVS/ 能/ 描述/ PDEVS/ 所能/ 描述/ 的/ 任意/ 模型/ ./ 4EDEVS/ 可视化/ 建模/ 框架/ 的/ 实现/ EDEVS/ 吸收/ 了/ 组件/ 建模/ 及/ MDA/ 技术/ 的/ 优点/ ,/ 支持/ 可视化/ 组件/ 建模/ ./ 本文/ 基于/ EDEVS/ 范式/ 开发/ 了/ 一个/ 可视化/ 建模/ 框架/ VisiCom/ [/ 20/ ]/ ./ 该/ 框架/ 将/ EDEVS/ 范式/ 中/ 的/ 元素/ 图元化/ ,/ 使得/ 用户/ 能够/ 通过/ 拖拽/ 图元/ 的/ 方式/ 直观/ 、/ 快捷/ 地/ 建立/ EDEVS/ 模型/ ./ VisiCom/ 包括/ 可视化/ 模型/ 编辑器/ 及/ 代码/ 转换器/ 两大/ 组成部分/ ./ 可视化/ 编辑器/ 提供/ 建模/ 图/ 元/ ,/ 接收/ 用户/ 以图/ 元/ 形式/ 表示/ 的/ EDEVS/ 模型/ ,/ 将/ 之/ 转换/ 并/ 保存/ 为/ XML/ 模型/ 描述/ 文件/ ;/ 代码/ 转换器/ 负责/ 将/ XML/ 模型/ 文件/ 中/ 的/ 平台/ 无关/ 模型/ 转换成/ 特定/ 平台/ 下/ 的/ 模型/ 代码/ ./ 4.1/ 可视化/ 模型/ 编辑器/ 与/ EDEVS/ 范式/ 相对/ 应/ ,/ 可视化/ 编辑器/ 包括/ 原子/ 模型/ 编辑器/ 及/ 耦合/ 模型/ 编辑器/ ./ 原子/ 模型/ 编辑器/ 用来/ 构造/ EDEVS/ 原子/ 模型/ ,/ 耦合/ 模型/ 编辑器/ 利用/ 已建好/ 的/ 原子/ 模型/ 或/ 耦合/ 模型/ ,/ 构造/ 更/ 复杂/ 的/ 模型/ ,/ 实现/ 层次化/ 建模/ ./ 4.1/ ./ 1/ 原子/ 模型/ 编辑器/ 原子/ 模型/ 编辑器/ 以图/ 元/ 或/ 图元/ 属性/ 的/ 形式/ 对/ EDEVS/ 原子/ 模型/ 范式/ 中/ 的/ 元素/ 进行/ 可视化/ ./ 其中/ ,/ “/ 输入/ 端口/ ”/ 、/ “/ 输出/ 端口/ ”/ 、/ “/ 内部/ 端口/ ”/ 、/ “/ 状态/ ”/ 、/ “/ 事件/ 调度/ ”/ 、/ “/ 取消/ 调度/ ”/ 及/ “/ 初始化/ 事件/ 集/ ”/ 都/ 有/ 图元/ 与/ 之/ 相对/ 应/ ;/ “/ 端口/ 处理函数/ ”/ 及/ “/ 优先级/ 函数/ ”/ 分别/ 作为/ 端口/ 的/ “/ 伪码/ ”/ 属性/ 和/ “/ 优先级/ ”/ 属性/ 实现/ ;/ “/ 事件/ 标识/ 生成/ 函数/ ”/ 及/ “/ 时间/ 推进/ 函数/ ”/ 分别/ 作为/ “/ 事件/ 调度/ ”/ 的/ “/ 名字/ ”/ 属性/ 和/ “/ 延时/ ”/ 属性/ 实现/ ./ 原子/ 模型/ 编辑器/ 的/ 界面/ 如图/ 4/ 所示/ :/ “/ 内部/ 端口/ ”/ 、/ “/ 事件/ 调度/ ”/ 、/ “/ 取消/ 调度/ ”/ 、/ “/ 状态/ ”/ 图/ 元/ 分布/ 在/ 编辑器/ 左边/ 的/ tab/ 页/ 内/ ,/ 将/ 图元/ 拖入/ 编辑器/ 即/ 生成/ 该/ 图元/ 实例/ ;/ “/ 输入/ 端口/ ”/ 、/ “/ 输出/ 端口/ ”/ 图/ 元/ 处于/ 工具条/ 上/ ,/ 单击/ 图元/ 即/ 在/ 模型/ 编辑/ 区/ 的/ 边界/ 出现/ 该/ 图元/ 实例/ ;/ “/ 初始化/ 事件/ 集/ ”/ 图/ 元/ 实例/ 在/ 每个/ 原子/ 模型/ 内有且/ 仅/ 有/ 一个/ ,/ 内/ 置于/ 编辑/ 区中/ ./ 每个/ 图/ 元/ 实例/ 都/ 有/ 相应/ 的/ 属性/ 框/ ,/ 其中/ ,/ “/ 端口/ ”/ 图/ 元/ 实例/ 的/ 属性/ 框/ 包括/ “/ 名称/ ”/ 、/ “/ 参数/ 列表/ ”/ 、/ “/ 优先级/ ”/ 及/ “/ 伪码/ ”/ 4/ 个/ 属性/ 条目/ ,/ “/ 参数/ 列表/ ”/ 定义/ 此/ 端口/ 的/ 传入/ 参数/ 类型/ ,/ 可以/ 是/ int/ 、/ double/ 、/ bool/ 或/ string/ 等/ 类型/ ,/ “/ 优先级/ ”/ 是/ 一个/ 整型/ 数值/ ,/ 定义/ 以此/ 端口/ 为/ 目的/ 端口/ 的/ 事件/ 在/ 同/ 时刻/ 发生/ 的/ 事件/ 中/ 的/ 处理/ 次序/ ,/ “/ 伪码/ ”/ 描述/ “/ 端口/ 处理函数/ ”/ 的/ 处理/ 逻辑/ ,/ 该/ 处理/ 逻辑/ 应/ 遵循/ 以下/ 流程/ :/ 首先/ ,/ 解析/ 事件/ 传入/ 参数/ ,/ 其次/ 根据/ 参数/ 及/ 状态/ 变量值/ 计算/ 状态变量/ 新值/ ,/ 最后/ 计算/ 事件/ 调度/ 延时/ 和/ 传出/ 参数值/ ,/ 并/ 调度/ 目的/ 端口/ 为/ “/ 内部/ 端口/ ”/ 或/ “/ 输出/ 端口/ ”/ 的/ 事件/ ;/ 事件/ 调度/ 图/ 元/ 实例/ 的/ 属性/ 框/ 包括/ “/ 名称/ ”/ 、/ “/ 条件/ ”/ 及/ “/ 延时/ ”/ 3/ 个/ 条目/ ,/ “/ 名称/ ”/ 在/ 此/ 模型/ 中/ 唯一/ ,/ 用于/ 与/ feid/ 相关联/ ./ “/ 条件/ ”/ 为/ 真时/ 调度/ 相应/ 的/ Page9/ 事件/ ,/ “/ 延时/ ”/ 表示/ 该/ 事件/ 经过/ 多长时间/ 后/ 到达/ 目的/ 端口/ ,/ 从而/ 触发/ 目的/ 端口/ 处理函数/ 的/ 执行/ ;/ “/ 取消/ 调度/ ”/ 图/ 元/ 实例/ 用来/ 取消/ 被/ 调度/ 但/ 尚未/ 执行/ 的/ 事件/ ,/ 其/ 属性/ 框/ 包括/ “/ 名称/ ”/ 、/ “/ 条件/ ”/ 及/ “/ 目标/ ”/ 3/ 个/ 属性/ 条目/ ,/ “/ 目标/ ”/ 属性/ 保存/ 要/ 取消/ 的/ “/ 事件/ 调度/ ”/ 的/ 名字/ ,/ 当/ 条件/ 为/ 真时/ 取消/ 之/ ;/ “/ 状态/ ”/ 图/ 元/ 实例/ 用来/ 描述/ 模型/ 的/ 状态变量/ ,/ 其/ 属性/ 框/ 包括/ “/ 名称/ ”/ 、/ “/ 类型/ ”/ 、/ “/ 可/ 配置/ ”/ 、/ “/ 取值/ 范围/ ”/ 、/ “/ 默认值/ ”/ 及/ “/ 属性/ 描述/ ”/ 6/ 个/ 属性/ 条目/ ,/ 其中/ “/ 类型/ ”/ 可以/ 是/ int/ ,/ double/ ,/ string/ 等/ ,/ “/ 可/ 配置/ ”/ 属性/ 表示/ 是否/ 允许/ 模型/ 使用者/ 通过/ 配置/ 接口/ 对此/ 属性/ 进行/ 配置/ ./ 图/ 4/ 即为/ 3.3/ ./ 1/ 节/ 介绍/ 的/ 定/ 步长/ 积分器/ 的/ 可视化/ 模型/ ,/ 包括/ 10/ 个/ 图元/ 实例/ ,/ 其中/ 有/ 4/ 个/ 状态变量/ 图/ 元/ 实例/ ,/ 状态变量/ 图/ 元/ 实例/ 分别/ 代表/ Step/ 、/ Inte/ -/ gral/ 、/ Begin/ 及/ End4/ 个/ 状态变量/ ;/ 1/ 个/ 初始化/ 事件/ 集图/ 元/ 实例/ ;/ 1/ 个/ 名为/ 犐/ 狀/ 狋/ 犲/ 犵/ 狉/ 犪/ 犾/ 犗/ 狆/ 犲/ 狉/ 犪/ 狋/ 犻/ 狅/ 狀/ 的/ 内部/ 端口/ 实例/ ,/ 用来/ 计算/ 积分/ 值/ ,/ 其伪码/ 为/ integral/ =/ integral/ +/ (/ t/ +/ begin/ )/ ×/ (/ t/ +/ begin/ )/ ;/ sendresult/ / ans/ =/ integral/ (/ 对/ 名为/ “/ sendresult/ ”/ 的/ 事件/ 调度/ 的/ 参数/ 集/ 赋值/ )/ ;/ 1/ 个/ 名为/ Ans/ 的/ 输出/ 端口/ 实例/ ,/ 用来/ 向/ 外界/ 输出/ 积分/ 值/ ;/ 3/ 个/ 事件/ 调度/ 图/ 元/ 实例/ ,/ 其中/ ,/ 第/ 1/ 个/ 名为/ BeginIntegral/ ,/ 它/ 连接/ 初始化/ 事件/ 集图/ 元/ 与/ IntegralOperation/ 端口/ ,/ 调度/ 延时/ 为/ 0/ ,/ 表示/ 逻辑/ 时间/ 的/ 0/ 时刻/ 调度/ 一个/ 指向/ IntegralOperation/ 端口/ 的/ 事件/ ,/ 第/ 2/ 个/ 名为/ SelfStep/ ,/ 它/ 连接/ IntegralOp/ -/ eration/ 图元/ 自身/ ,/ 延时/ 为/ Step/ ,/ 条件/ 为/ Begin/ +/ t/ </ End/ ,/ 即/ 在/ 计算/ 积分/ 值/ 的/ 过程/ 中此/ 端口/ 的/ 端口/ 处理函数/ 会/ 调度/ 一个/ 目的/ 端口/ 为/ 自身/ 的/ 事件/ ,/ 此/ 事件/ 在/ Step/ 时间/ 间隔/ 之后/ 执行/ ,/ 驱动/ 积分/ 的/ 累加/ 过程/ ,/ 最后/ 一个/ 名为/ SendResult/ ,/ 它/ 从/ IntegralOperation/ 指向/ 名为/ Ans/ 端口/ ,/ 延时/ 为/ 0/ ,/ 条件/ 为/ !/ (/ Begin/ +/ t/ </ End/ )/ ,/ 表示/ 积分/ 完成/ 之后/ 立即/ 向/ Ans/ 端口/ 输出/ 积分/ 值/ ./ 4.1/ ./ 2/ 耦合/ 模型/ 编辑器/ 如图/ 5/ 所示/ ,/ 耦合/ 组件/ 编辑器/ 的/ 基本/ 图元/ 是/ “/ 输入/ 端口/ ”/ 、/ “/ 输出/ 端口/ ”/ 、/ “/ 端口/ 连接线/ ”/ 及/ “/ 组件/ 库中/ 的/ 组件/ ”/ (/ 表现/ 为/ 带/ 输入/ 、/ 输出/ 端口/ 的/ 方框/ )/ ./ 图/ 5/ 是/ 一个/ 名为/ Couple/ 的/ 耦合/ 组件/ 可视化/ 模型/ 实例/ ./ 该/ 耦合/ 模型/ 实例/ 化/ 两个/ 4.1/ ./ 1/ 节所/ 建立/ 的/ 定长/ 积分器/ 模型/ ,/ 并/ 把/ 它们/ 输出/ 的/ 积分/ 值/ 输入/ 到/ 3.3/ ./ 2/ 节/ 介绍/ 的/ 加法器/ 模型/ 内/ 做/ 加法/ 运算/ ,/ 而后/ 将/ 结果/ 输出/ ./ 该/ 耦合/ 组件/ 只有/ 一个/ 输出/ 端口/ “/ Answer/ ”/ ,/ 用来/ 输出/ 积分/ 和/ ./ 两个/ Integral/ 子/ 组件/ 实例/ 的/ 输出/ 端口/ 分别/ 与/ 加法器/ 子/ 组件/ 实例/ 的/ 两个/ 输入/ 端口/ 相连/ ;/ 而/ 加法器/ 子/ 组件/ 实例/ 的/ 输出/ 端口/ 与/ Answer/ 端口/ 相连/ ./ 点击/ 子/ 组件/ 实例/ ,/ 可/ 在/ 编辑器/ 右方/ 的/ 属性/ 编辑框/ 中/ 对子/ 组件/ 的/ 可/ 配置/ 属性/ 进行/ 设置/ ./ 4.1/ ./ 3EDEVS/ 模型/ 文件/ 可视化/ 建模/ 工具/ 接收/ 用户/ 输入/ 的/ 图形/ 模型/ 后/ ,/ 将/ 此/ 模型/ 转换/ 并/ 存储/ 为/ XML/ 模型/ 描述/ 文件/ ./ 此/ 文件/ 将/ 是/ 代码生成/ 工具/ 生成/ 平台/ 相关/ 模型/ 的/ 输入/ ./ 原子/ 模型/ XML/ 描述/ 文件/ 包括/ InfoRegion/ 、/ InitRegion/ 、/ PortRegion/ 、/ DeltaRegion/ 及/ StateRegion/ 五个/ 部分/ ./ 其中/ ,/ InfoRegion/ 描述/ 组件/ 的/ 基本/ 信息/ ,/ 包括/ 组件/ 名/ 、/ 组件/ UUID/ 以及/ 组件/ 的/ 开发者/ 及/ 版权/ 等/ 信息/ ;/ InitRegion/ 描述/ 初始/ 事件/ 集/ ,/ 即/ 在/ 逻辑/ 时间/ 的/ 0/ 时刻/ 需要/ 仿真/ 引擎/ 预先/ 调度/ 的/ 事件/ ;/ PortRegion/ 描述/ 端口/ 信息/ ,/ 包括/ 输入/ 、/ 内部/ 及/ 输出/ 端口/ 的/ 名称/ ,/ 优先级/ 及/ 参数/ 集/ ,/ 以及/ 端口/ 可能/ 发出/ 的/ 事件/ 调度/ ;/ DeltaRegion/ 描述/ 模型/ 的/ 端口/ 处理函数/ 的/ 执行/ 逻辑/ ;/ StateRegion/ 描述/ 状态变量/ 信息/ ,/ 包括/ 状态变量/ 的/ 名称/ 、/ 类型/ 、/ 取值/ 范围/ 及/ 可/ 配置/ 与否/ 等/ 信息/ ./ 耦合/ 模型/ XML/ 描述/ 文件/ 包括/ InfoRegion/ 、/ InitRegion/ 、/ Sub/ -/ ComConfRegion/ 、/ PortRegion/ 及/ PortConnection/ 五个/ 部分/ ./ 与/ 原子/ 模型/ XML/ 描述/ 文件/ 一样/ ,/ 耦合/ 模型/ Page10XML/ 描述/ 文件/ 也/ 包含/ InfoRegion/ 、/ InitRegion/ 及/ PortRegion/ ;/ 不同/ 的/ 是/ ,/ 耦合/ 模型/ 没有/ DeltaRegion/ 和/ StateRegion/ ,/ 因为/ 其/ 事件处理/ 逻辑/ 及/ 状态变量/ 都/ 分布/ 在/ 所/ 包含/ 的/ 原子/ 模型/ 中/ ,/ 此外/ 其/ 增加/ 了/ Sub/ -/ ComConfRegion/ 及/ PortConnection/ 两个/ 区段/ ,/ 其中/ ,/ SubComConfRegion/ 描述/ 子/ 模型/ 的/ UUID/ 及其/ 参数/ 配置/ 情况/ ;/ PortConnection/ 描述/ 耦合/ 组件/ 与子/ 组件/ 之间/ 以及/ 子/ 组件/ 与子/ 组件/ 之间/ 的/ 端口/ 连接/ 关系/ ./ 4.2/ 代码/ 转换器/ Visicom/ 可视化/ 模型/ 编辑器/ 生成/ 的/ EDEVS/ 组件/ 化/ 模型/ 文件/ 与/ 平台/ 无关/ ,/ 支持/ 平台/ 间/ 的/ 模型/ 重用/ ,/ 只要/ 实现/ 相应/ 的/ 代码/ 转换器/ 即可/ ./ YHSUPE/ 是/ 作者/ 所在/ 课题组/ 开发/ 的/ 一个/ 并行/ 仿真/ 平台/ ,/ 其/ 在/ 基于/ 银河/ 高性能/ 计算机/ 的/ 仿真/ 应用/ 中/ 取得/ 了/ 较/ 高/ 的/ 执行/ 性能/ ,/ 但/ 其/ 采用/ 集中式/ 开发/ 模式/ ,/ 开发/ 协同/ 程度/ 大/ 、/ 模型/ 间/ 耦合度/ 高/ ,/ 较难/ 重用/ ,/ 且/ 其/ 编程/ 过程/ 较/ 复杂/ ,/ 学习曲线/ 较/ 高/ 、/ 二次/ 建模/ 较/ 困难/ ./ 为此/ ,/ 本文/ 实现/ 了/ EDEVS/ 模型/ 到/ YHSUPE/ 模型/ 的/ 代码/ 转换器/ ,/ 将/ 可视化/ 组件/ 建模/ 引入/ YH/ -/ SUPE/ ,/ 以/ 解决/ 以上/ 问题/ ./ 为了/ 降低/ 代码/ 转换器/ 的/ 复杂度/ ,/ 本文/ 利用/ YH/ -/ SUPE/ 所/ 提供/ 的/ API/ 实现/ 了/ 一个/ SpBaseCompo/ -/ nent/ 类/ ,/ 此类/ 对/ EDEVS/ 规范/ 中/ 的/ 元素/ (/ 端口/ 、/ 事件/ 调度/ 、/ 取消/ 调度/ 等/ )/ 进行/ 了/ 相应/ 的/ 实现/ ,/ 包含/ 三类/ 接口/ :/ (/ 1/ )/ 组件/ 配置/ 接口/ voidConfigHandler/ (/ SpParameterSet/ &/ para/ )/ ./ para/ 是/ 〈/ ParaName/ ,/ ParaValue/ 〉/ 形式/ 的/ 名值/ 对/ ,/ 用来/ 对/ 组件/ 中/ 名为/ ParaName/ 的/ 可/ 配置/ 属性/ 配置/ 初始值/ ./ (/ 2/ )/ 连接/ 关系/ 配置/ 接口/ voidAddSubscriber/ (/ char/ ×/ myPort/ ,/ char/ ×/ hisUUID/ ,/ char/ ×/ hisPort/ )/ 用来/ 将/ UUID/ 为/ hisU/ -/ UID/ 的/ 组件/ 的/ hisPort/ 端口/ 加入/ 到/ 此/ 组件/ 的/ my/ -/ Port/ 端口/ 的/ 输出/ 列表/ 中/ ./ (/ 3/ )/ 组件/ 业务/ 逻辑/ 接口/ ①/ 端口/ 注册/ 接口/ (/ a/ )/ voidRegisterInputPort/ (/ stringPort/ -/ Name/ ,/ intpri/ =/ 0/ )/ ;/ 注册/ 名为/ PortName/ 优先级/ 为/ pri/ 的/ 输入/ 端口/ ./ (/ b/ )/ voidRegisterInnerPort/ (/ stringPort/ -/ Name/ ,/ intpri/ =/ 0/ )/ ;/ 注册/ 名为/ PortName/ 优先级/ 为/ pri/ 的/ 内部/ 端口/ ./ (/ c/ )/ voidRegisterOutputPort/ (/ stringPort/ -/ Name/ ,/ intpri/ =/ 0/ )/ ;/ 注册/ 名为/ PortName/ 优先级/ 为件/ 创建/ 时刻/ 调用/ ,/ 用来/ 构造/ 初始/ 事件/ 调度/ 集/ ./ ②/ 初始/ 事件/ 调度/ 接口/ voidPrimaryEvent/ (/ )/ ;/ 此/ 接口/ 由/ 仿真/ 引擎/ 在/ 组/ ③/ 事件/ 调度/ 接口/ (/ a/ )/ voidSendMsgToPort/ (/ char/ ×/ myPort/ ,/ SpParameterSetpset/ ,/ SpCancelHandlehandle/ ,/ doubledelay/ =/ 1/ )/ ;/ 用来/ 向本/ 组件/ 的/ 内部/ 端口/ 或/ 输出/ 端口/ 发出/ 事件/ 调度/ ./ (/ b/ )/ voidSendMsgToSubscribers/ (/ char/ ×/ myPort/ ,/ SpParameterSetpset/ ,/ doubledelay/ =/ 0/ )/ ;/ 用来/ 向/ 输出/ 端口/ 的/ 订购者/ 发出/ 事件/ 调度/ ./ pri/ 的/ 输出/ 端口/ ./ (/ d/ )/ voidRegisterPortHanler/ (/ stringPort/ ,/ FuncPtrFunc/ )/ ;/ 将/ 端口/ 处理函数/ Func/ 关联/ 到/ Port/ 端口/ ./ ④/ 取消/ 调度/ 接口/ voidCancelMessage/ (/ SpCancelHandlehandle/ )/ ;/ 用来/ 取消/ 事件/ 调度/ ./ YHSUPE/ 下/ 的/ EDEVS/ 组件/ 继承/ SpBaseCom/ -/ ponent/ 类/ ,/ 使用/ 此类/ 提供/ 的/ 组件/ 接口/ 实现/ 自身/ 的/ 逻辑/ 并/ 与/ 其它/ 组件/ 进行/ 交互/ ./ 图/ 6/ 和/ 图/ 7/ 是/ 利用/ 本文/ 实现/ 的/ YHSUPE/ 代码生成/ 器/ 转换/ 4.1/ ./ 1/ 节/ 以及/ 4.1/ ./ 2/ 节所/ 建立/ 的/ 图形化/ 模型/ 所/ 生成/ 的/ YHSUPE/ 模型/ 的/ 代码/ 片段/ ./ 其中/ 图/ 6/ 是/ 头文件/ 片段/ ,/ 图/ 7/ 是/ 实现/ 文件/ 片段/ ./ 尽管/ 各/ 并行/ 仿真/ 平台/ 的/ API/ 函数/ 名称/ 不同/ ,/ 但/ 实现/ 的/ 功能/ 集合/ 都/ 大同小异/ ./ 只要/ 提供/ 相应/ 的/ 代码生成/ 器/ ,/ 就/ 能/ 将/ Visicom/ 图形化/ 建模/ 生成/ 的/ EDEVS/ 模型/ 转化/ 为/ 相应/ 并行/ 仿真/ 平台/ 下/ 的/ 实现/ 代码/ ,/ 从而/ 实现/ 仿真/ 平台/ 间/ 的/ 模型/ 重用/ ./ Page115/ 总结/ 由于/ 缺乏/ 高效/ 统一/ 的/ 可视化/ 组件/ 建/ 模范/ 式/ ,/ 国内外/ 并行/ 仿真/ 平台/ 往往/ 存在/ 二次/ 建模/ 困难/ 、/ 编程/ 调试/ 复杂/ 和/ 模型/ 难以/ 在/ 平台/ 间/ 重用/ 的/ 问题/ ./ 本文/ 针对/ 当前/ 广受/ 关注/ 的/ PDEVS/ 规范/ 所/ 存在/ 的/ 不/ 支持/ 原子/ 模型/ 可视化/ 建模/ 、/ 事件处理/ 逻辑/ 过于/ 集中/ 、/ 无法/ 挖掘/ 处理/ 逻辑/ 内部/ 并行性/ 的/ 缺点/ ,/ 提出/ 了/ 基于/ MDA/ 的/ 并行/ 仿真/ 可视化/ 组件/ 建/ 模范/ 式/ —/ —/ —/ EDEVS/ ,/ 证明/ 了/ 该/ 范式/ 的/ 描述/ 能力/ 不弱/ 于/ PDEVS/ ,/ 并/ 实现/ 了/ 基于/ 该/ 范式/ 的/ 可视化/ 建模/ 框架/ 及/ EDEVS/ 建模/ 框架/ 到/ YH/ -/ SUPE/ 仿真/ 平台/ 建模/ 框架/ 的/ 映射/ ,/ 改善/ 了/ YHSUPE/ 的/ 建模/ 框架/ ,/ 使/ 其/ 能够/ 满足/ 大规模/ 并行/ 仿真/ 分布/ 、/ 快速/ 建模/ 的/ 需要/ ./ EDEVS/ 继承/ 了/ PDEVS/ 的/ 优点/ ,/ 通过/ 基于/ 端口/ 调度/ 的/ 组件/ 化/ 技术/ 实现/ 模型/ 之间/ 的/ 解/ 耦合/ ,/ 提高/ 模型/ 的/ 可/ 重用/ 性/ ;/ 通过/ 模型/ 驱动/ 的/ 建模/ 技术/ 将/ 建模/ 过程/ 与/ 模型/ 的/ 代码/ 实现/ 分开/ ,/ 使/ 建模/ 人员/ 只/ 需/ 关注/ 建模/ ,/ 而/ 无需/ 关注/ 模型/ 在/ 具体/ 平台/ 上/ 的/ 实现/ ,/ 降低/ 了/ 建模/ 复杂度/ ,/ 同时/ 支持/ 模型/ 在/ 仿真/ 平台/ 间/ 的/ 重用/ ,/ 通过/ 在/ 原子/ 模型/ 的/ 定义/ 上/ 引入/ 内部/ 端口/ ,/ EDEVS/ 将/ PDEVS/ 的/ 外部/ 处理函数/ 和/ 内部/ 处理函数/ 划分/ 为/ 与/ 外部/ 端口/ 和/ 内部/ 端口/ 相对/ 应/ 的/ 端口/ 处理函数/ ,/ 从而/ 可/ 充分/ 开发/ 各/ 端口/ 处理/ 逻辑/ 的/ 并行性/ ,/ 在/ 不/ 违反/ 因果关系/ 的/ 前提/ 下/ 实现/ 更/ 细粒度/ 的/ 并行/ ,/ 同时/ 提供/ 端口/ 定义/ 及/ 端口/ 之间/ 调度/ 关系/ 的/ 可视化/ 方法/ ,/ 改善/ 了/ 建模/ 效率/ ./ 

