Page1/ 云/ 服务/ 传递/ 网络资源/ 动态分配/ 模型/ 史佩昌/ 1/ )/ 王怀民/ 1/ )/ 尹刚/ 1/ )/ 刘雪宁/ 2/ )/ 袁/ 小群/ 3/ )/ 史殿习/ 1/ )/ 1/ )/ (/ 国防科技大学/ 计算机/ 学院/ 并行/ 与/ 分布/ 处理/ 国家/ 重点/ 实验室/ 长沙/ 410073/ )/ 2/ )/ (/ 清华大学/ 计算机科学/ 与/ 技术/ 系/ 北京/ 100084/ )/ 3/ )/ (/ 华中科技大学/ 电子/ 与/ 信息工程/ 系/ 武汉/ 430074/ )/ 摘要/ 云/ 服务/ 传递/ 网络/ (/ CloudServicesDeliveryNetworks/ ,/ CSDN/ )/ 在/ Internet/ 之上/ 构建/ 了/ 一层/ 分布式/ 服务器/ 网络/ ,/ 以/ 就近/ 和/ 按/ 需/ 的/ 方式/ 向/ 用户/ 提供/ 云/ 传递/ 服务/ ./ 面对/ 互联网/ 规模化/ 和/ 多样化/ 云/ 服务/ 的/ 资源/ 需求/ 特点/ ,/ CSDN/ 形成/ 了/ 针对/ 不同/ 类型/ 云/ 服务/ 传递/ 的/ 逻辑/ 子/ 服务器/ 网络/ ./ CSDN/ 的/ 很大/ 一部分/ 服务器/ 和/ 带宽/ 资源/ 用于/ 流媒体/ 和/ 下载/ 类云/ 服务/ 的/ 传递/ ,/ 该/ 类型/ 云/ 服务/ 传递/ 资源/ 的/ 动态分配/ 问题/ 是/ 该文/ 的/ 研究/ 重点/ ./ 根据/ 该/ 类型/ 业务/ 内存/ 资源/ 和/ 带宽/ 资源/ 同/ 为/ 瓶颈/ 资源/ 以及/ 该/ 类型/ 热点/ 内容/ 可/ 采用/ P2P/ 机制/ 的/ 两个/ 特点/ ,/ 文中/ 首先/ 将/ 该/ 问题/ 建模/ 为/ 多维/ 设备/ 选址/ 模型/ ./ 然后/ 在/ 对/ 该/ 建模/ 分析/ 及其/ NP/ 完全性/ 证明/ 后/ ,/ 提出/ 了/ 一种/ 启发式/ 模型/ 求解/ 算法/ ./ 最后/ 以/ 服务/ 传递/ 开销/ 节省/ 作为/ 性能/ 评价/ 指标/ ,/ 以/ 实际/ 系统/ 的/ 运行/ 数据/ 为/ 输入/ ,/ 全面/ 评估/ 了/ 该/ 模型/ 求解/ 算法/ 的/ 有效性/ ./ 关键词/ 云/ 服务/ ;/ 传递/ 网络/ ;/ 协同/ ;/ 对/ 等/ 网络/ ;/ 动态分配/ 1/ 引言/ 云/ 服务/ 是/ 指以/ 服务/ 的/ 形式/ 在/ 互联网/ 中/ 传递/ 的/ 各种/ 应用/ [/ 1/ ]/ ./ 云/ 服务/ 传递/ 网络/ (/ CloudServiceDeliveryNetworks/ ,/ CSDN/ )/ 由/ 内容/ 分发/ 网络/ (/ ContentDeliveryNetworks/ ,/ CDN/ )/ 演化/ 而/ 来/ [/ 2/ ]/ ./ CSDN/ 兼具/ 传统/ CDN/ 和/ 云/ 计算/ 的/ 双重/ 优势/ ,/ 即/ 就近/ 服务/ 和/ 按/ 需/ 服务/ [/ 3/ -/ 4/ ]/ ./ CSDN/ 在/ 因特网/ 之上/ 以/ 多个/ 独立/ 异构/ CDN/ 协同/ 的/ 方式/ [/ 2/ ]/ 构建/ 了/ 一层/ 全局/ 虚拟/ 覆盖网/ ,/ 覆盖网/ 中/ 的/ 元素/ 是/ 地理分布/ 的/ 服务器/ ./ 用户/ 在/ 请求/ 云/ 服务/ 时/ ,/ CSDN/ 将/ 用户/ 请求/ 重定向/ 至/ 最靠近/ 用户/ 且/ 具有/ 足够/ 服务/ 能力/ 的/ 服务器/ 节点/ ,/ 由/ 其/ 就近/ 向/ 用户/ 提供/ 按/ 需/ 服务/ ./ 不同/ 类型/ 的/ 云/ 服务/ 所/ 表现/ 出/ 的/ 用户/ 访问/ 行为/ 以及/ 资源/ 需求/ 特点/ 各不相同/ ./ CSDN/ 将/ 物理/ 服务器/ 网络/ 划分/ 为/ 针对/ 缓存/ 类/ 应用/ 、/ 流媒体/ 和/ 下载/ 应用/ 以及/ 动态/ 应用/ 等/ 多个/ 逻辑/ 子/ 服务器/ 网络/ [/ 3/ ]/ ,/ 如图/ 1/ 所示/ ./ 其中/ 缓存/ 应用/ 网络/ (/ CacheApplicationNetworks/ ,/ CAN/ )/ 包括/ 静态/ 页面/ 、/ 大小/ 图片/ 等/ 的/ 分发/ ;/ 流媒体/ 和/ 下载/ 应用/ 网络/ (/ StreamingandDownloadApplica/ -/ tionNetworks/ ,/ SDAN/ )/ 包括/ 流式/ 和/ 下载/ 式/ 流媒体/ 以及/ 各种/ 软件/ 升级包/ 的/ 下载/ 等/ ;/ 动态/ 应用/ 网络/ (/ DynamicApplicationNetworks/ ,/ DAN/ )/ 包括/ 网络/ 购物/ 、/ 网络游戏/ 和/ 社交/ 网站/ 等/ 需要/ 与源/ 服务器/ 交互/ 的/ 网络应用/ ./ 图/ 1/ 中源/ 服务器/ 负责/ 存储/ 并/ 依据/ 策略/ 向/ CSDN/ 节点/ 传输/ 源/ 内容/ ,/ 逻辑/ 服务器/ 覆盖网/ 根据/ 不同/ 类型/ 云/ 服务/ 需求/ 从/ 物理/ 服务器/ 覆盖/ 网络/ 中/ 动态/ 选择/ 和/ 构建/ 而成/ ./ 每个/ 逻辑/ 子/ 服务器/ 网络/ 中/ 服务器/ 位置/ 和/ 数量/ 如何/ 选择/ ,/ 即/ CSDN/ 资源/ 的/ 动态分配/ ,/ 主要/ 依据/ 所/ 传递/ 业务/ 的/ 用户/ 访问/ 请求/ 分布/ 以及/ CSDN/ 系统对/ 性能/ 和/ 开销/ 等/ 的/ 需求/ ./ 其本质/ 属于/ 服务器/ 选择/ 问题/ [/ 5/ ]/ ./ 从/ 理论/ 层面/ 看/ ,/ 服务器/ 选择/ 与/ 服务器/ 部署/ [/ 6/ -/ 10/ ]/ 的/ 模型/ 类似/ ./ 服务器/ 部署/ 一直/ 以来/ 都/ 是/ 学术界/ 和/ 工业界/ 关注/ 的/ 热点/ 和/ 难点/ ,/ 现有/ 的/ 研究/ 也/ 产生/ 了/ 众多/ 有/ 价值/ 的/ 成果/ ./ 但/ 随着/ 云/ 服务/ 种类/ 和/ 规模/ 的/ 飞速/ 增长/ ,/ CSDN/ 的/ 基础架构/ 、/ 用户/ 访问/ 规模/ 和/ 行为/ 、/ 服务/ 分发/ 模式/ 、/ 性能/ 和/ 开销/ 需求/ 以及/ CSDN/ 的/ 瓶颈/ 问题/ 等/ 都/ 发生/ 了/ 复杂/ 的/ 变化/ ./ 传统/ 服务器/ 部署/ 的/ 理论/ 研究成果/ 难以/ 完全/ 满足/ 目前/ 条件/ 下/ CSDN/ 的/ 服务器/ 选择/ 需求/ ./ 本文/ 按照/ 问题/ 建模/ 、/ 模型/ 分析/ 、/ 模型/ 求解/ 和/ 评估/ 的/ 思路/ 对/ 服务器/ 选择/ 问题/ 进行/ 了/ 建模/ 并/ 提出/ 了/ 求解/ 算法/ ,/ 同时/ 以/ 服务/ 传递/ 开销/ 节省/ 作为/ 性能/ 评价/ 指标/ ,/ 以/ 实际/ 系统/ 的/ 运行/ 数据/ 作为/ 输入/ 验证/ 了/ 该/ 求解/ 算法/ 在/ 解决/ CSDN/ 中/ 资源/ 动态分配/ 的/ 有效性/ ./ 本文/ 主要/ 贡献/ 体现/ 在/ 如下/ 4/ 个/ 方面/ :/ (/ 1/ )/ 通过/ 分析/ 多种/ 互联网/ 传递/ 业务/ 资源/ 需求/ 特点/ ,/ 从/ 与/ CSDN/ 传递/ 业务/ 类型/ 的/ 特点/ 相关联/ (/ 如/ DAN/ 中/ 计算/ 和/ 带宽/ 是/ 瓶颈/ 资源/ 、/ SDAN/ 中/ 内存/ 和/ 带宽/ 是/ 瓶颈/ 资源/ 等/ )/ 的/ 特殊/ 视角/ ,/ 以/ SDAN/ 为/ 研究/ 对象/ 展开/ 对/ CSDN/ 中/ SDAN/ 类/ 业务/ 服务器资源/ 动态分配/ 问题/ 的/ 研究/ ;/ (/ 2/ )/ 通过/ 分析/ SDAN/ 类/ 热点/ 内容/ 传递/ 中/ 内存/ 资源/ 是/ 瓶颈/ 以及/ SDAN/ 中/ 内容/ 可/ P2P/ 的/ 双重/ 特点/ ,/ 从/ 理论/ 层面/ 将/ CSDN/ 中/ 资源/ 动态分配/ 问题/ (/ 如/ 不/ 做/ 特别/ 说明/ ,/ 本文/ 的/ 资源/ 动态分配/ 问题/ 主要/ 指/ 面向/ CSDN/ 中/ SDAN/ 类/ 业务/ 的/ 资源/ 动态分配/ 问题/ )/ ,/ 即/ 服务器/ 的/ 动态/ 选择/ 问题/ 建模/ 为/ 多维/ 设备/ 选址/ 模型/ (/ Multi/ -/ dimensionalFacilityLocationModel/ ,/ MFLM/ )/ ;/ (/ 3/ )/ 通过/ 对/ MFLM/ 模型/ 的/ 分析/ 和/ NP/ 完全性/ 证明/ ,/ 提出/ 了/ 针对/ SDAN/ 类/ 业务/ 的/ 一种/ 启发式/ 求解/ 算法/ ;/ (/ 4/ )/ 提出/ 了/ 针对/ MFLM/ 的/ 性能/ 分析模型/ ,/ 并/ 对/ MFLM/ 求解/ 算法/ 的/ 有效性/ 进行/ 了/ 全面/ 的/ 评估/ 分析/ ./ 因此/ 本文/ 综合/ 了/ CSDN/ 服务器/ 选择/ 问题/ 的/ 本质/ 变化/ ,/ 并/ 以/ 设备/ 选址/ 模型/ 为/ 基础/ ,/ 建立/ 了/ 解决/ 这/ 类/ 问题/ 的/ 模型/ 并/ 给出/ 了/ 启发式/ 求解/ 算法/ ./ 本文/ 第/ 2/ 节/ 提出/ 和/ 定义/ 服务器/ 选择/ 问题/ ,/ 并/ 对/ 两种/ 代表性/ 理论/ 模型/ 进行/ 综述/ ;/ 第/ 3/ 节对/ 问题/ 建模/ ,/ 提出/ 云/ 服务/ 传递/ 网络资源/ 动态/ 配置/ 模型/ —/ —/ —/ 多维/ 设备/ 选址/ 模型/ ,/ 并/ 对模型/ 复杂性/ 进行/ 分析/ ;/ 第/ 4/ 节/ 根据/ 对/ 多维/ 设备/ 选址/ 模型/ 的/ NP/ 完全性/ 分析/ ,/ 提出/ 针对/ 该/ 特定/ 类型/ 云/ 服务/ 传递/ 的/ 启发式/ 求解/ 算法/ ;/ 第/ 5/ 节/ 提出/ 针对/ MFLM/ 的/ 性能/ 分析模型/ ,/ 并/ 以/ 实际/ 系统/ 运行/ 数据/ 为/ 输入/ ,/ 对/ MFLM/ 启发式/ 求解/ 算法/ 进行/ 全面/ 的/ 评估/ 分析/ ;/ 最后/ 总结/ 本文/ 并/ 展望/ 下/ 一步/ 的/ 研究/ 工作/ ./ Page32/ 服务器/ 选择/ 问题/ 和/ 相关/ 理论/ 模型/ 2.1/ 问题/ 的/ 提出/ 和/ 定义/ 传统/ 服务器/ 部署/ 问题/ 是/ CDN/ 领域/ 的/ 研究/ 热点/ 和/ 难点/ ,/ 也/ 是/ 一个/ 学术界/ 和/ 工业界/ 普遍/ 关注/ 和/ 公知/ 的/ 经典/ 问题/ ./ 服务器/ 部署/ 侧重于/ 物理/ 服务器/ 的/ 选址/ [/ 10/ -/ 11/ ]/ 研究/ ,/ 其中/ 如何/ 选择/ 地址/ 和/ 如何/ 确定/ 在/ 哪个/ 地址/ 部署/ 多少/ 服务器/ 等/ 是/ 相对/ 静态/ 的/ 问题/ ,/ 因为/ 物理/ 服务器/ 拓扑/ 网络/ 一旦/ 形成/ ,/ 再次/ 改动/ 的/ 复杂度/ 和/ 开销/ 都/ 非常/ 高/ ./ 如/ CDN/ 领域/ 最具/ 代表性/ 的/ Akamai/ 网络/ 中/ 服务器/ 规模/ 2010/ 年/ 已/ 达/ 73000/ 台/ ,/ 并且/ 跨/ 70/ 多个/ 国家/ 和/ 1000/ 多个/ 网络/ [/ 12/ ]/ ,/ 已经/ 有/ 了/ 相对/ 稳定/ 和/ 成熟/ 的/ 拓扑/ 结构/ ,/ 很难/ 大规模/ 改动/ 或/ 重新部署/ ./ 因此/ 逻辑/ 层面/ 服务器/ 的/ 动态/ 选择/ ,/ 即/ 服务器资源/ 的/ 动态分配/ 和/ 物理/ 服务器/ 的/ 增量/ 部署/ 更/ 有/ 研究/ 价值/ ./ 所谓/ 物理/ 服务器/ 的/ 增量/ 部署/ 是/ 指/ 如何/ 根据/ 现有/ 的/ 物理/ 服务器/ 网络/ ,/ 通过/ 适当/ 增加/ 部分/ 服务器/ 的/ 方式/ 大幅提高/ 分发/ 网络/ 性能/ ./ 如/ 文献/ [/ 2/ ]/ 中/ 提到/ Huang/ 等/ 人/ 认为/ 与/ Akamai/ 具有/ 不同/ 物理/ 服务器/ 覆盖/ 网络/ 的/ Limelight/ 系统/ ,/ 如果/ 在/ 合适/ 的/ 位置/ 增加/ 9/ 个/ 大/ 服务器/ 节点/ ,/ 其/ 性能/ 从/ 平均/ 响应/ 时间/ 来看/ 可以/ 与/ Akamai/ 接近/ ./ 本文/ 重点/ 研究/ 服务器/ 的/ 动态/ 选择/ ,/ 即以/ 当前/ 的/ 物理/ 服务器/ 网络拓扑/ 为/ 前提/ 约束条件/ ,/ 根据/ CSDN/ 分发/ 业务/ 的/ 动态/ 需求/ ,/ 从/ 物理/ 服务器/ 网络/ 中/ 动态/ 选择/ 部分/ 地理位置/ 分布/ 的/ 服务器/ 形成/ 一个/ 专门/ 针对/ 该/ 服务/ 分发/ 的/ 逻辑/ 子/ 服务器/ 网络/ ./ 该子/ 分发/ 网络/ 可/ 依据/ 业务/ 需求/ 的/ 动态变化/ 而/ 演化/ ./ 因此/ 服务器/ 选择/ 问题/ 可定义/ 如下/ ./ 定义/ 1/ (/ CSDN/ 的/ 服务器/ 选择/ 问题/ )/ ./ CSDN/ 根据/ 不同/ 类型/ 云/ 服务/ 的/ 资源/ 需求/ ,/ 以/ 服务/ 性能/ 和/ 开销/ 等/ 为/ 指标/ ,/ 从/ 物理/ 部署/ 的/ 服务器/ 覆盖/ 网络/ 中/ 动态/ 选择/ 部分/ 地理分布/ 的/ 服务器/ 形成/ 逻辑/ 子/ 服务器/ 网络/ ./ 服务器/ 选择/ 问题/ 的/ 实质/ 是从/ 何处/ 选/ 多少/ 服务器资源/ 构造/ 逻辑/ 子/ 网络/ ./ 难度/ 体现/ 在/ :/ 服务器/ 的/ 选择/ 如何/ 在/ 性能/ 和/ 开销/ 之间/ 取得/ 一种/ 很/ 好/ 的/ 均衡/ ./ 服务器/ 选择/ 也/ 可/ 看成/ 是/ 一个/ 资源/ 动态分配/ 的/ 过程/ ,/ 选择/ 或/ 分配/ 的/ 结果/ 是/ 在/ 物理/ 部署/ 的/ CSDN/ 有限/ 服务器/ 网络资源/ 约束/ 下/ ,/ 针对/ 不同/ 类型/ 的/ 应用/ 构建/ 若干个/ 分布式/ 的/ 逻辑/ 子/ 服务器/ 网络/ ./ 如图/ 1/ 所示/ ,/ 针对/ 当前/ 各种类型/ 分发/ 业务/ 资源/ 需求/ 的/ 不同/ 特点/ ,/ 物理/ CSDN/ 服务器/ 网络/ 在/ 逻辑/ 层面/ 被/ 划分/ 为/ 多个/ 逻辑/ 子/ 服务器/ 网络/ ./ 如对/ 延迟/ 和/ 丢/ 包/ 敏感/ 的/ 缓存/ 应用/ 类/ ;/ 带宽/ 和/ 缓存/ 资源/ 容易/ 成为/ 瓶颈/ 资源/ 的/ 流媒体/ 和/ 文件共享/ ;/ 实时性/ 要求/ 较/ 高/ 的/ 动态/ 应用/ 等/ ./ 子/ 逻辑/ 覆盖网/ 的/ 动态/ 构造/ 问题/ ,/ 即/ 服务器/ 选择/ 问题/ ./ 其中/ 根据/ 经验/ ,/ 将/ 被/ 请求/ 内容/ 按/ 其/ 热度/ 降序/ 排序/ ,/ 则/ Zipf/ 分布/ 中/ ”/ 非/ 长尾/ 部分/ ”/ 的/ 高/ 热点/ 内容/ 大约/ 是/ CSDN/ 单/ 服务器/ 节点/ 缓存/ 能力/ 的/ 数倍/ 至/ 几十倍/ ,/ 实际/ 系统/ 中/ 存在/ 单个/ 热点/ 文件/ 的/ 大小/ 超过/ 单台/ 服务器/ 内存/ 资源/ 4/ 倍/ 的/ 现象/ ①/ ./ 因此/ 为了/ 确保/ 不会/ 发生/ 频繁/ 的/ 缓存/ 不/ 命中/ 而/ 影响/ 用户/ 的/ 访问/ 延迟/ (/ Patterson/ 等/ 人/ [/ 13/ ]/ 认为/ 硬盘/ 的/ 延迟/ 大约/ 在/ 5ms/ ~/ 35ms/ ,/ 内存/ 的/ 延迟/ 大约/ 在/ 52ns/ ~/ 225ns/ ,/ 两者之间/ 的/ 差距/ 高达/ 5/ ~/ 6/ 个/ 数量级/ )/ 和/ 进一步/ 引发/ 磁盘/ I/ \/ O/ 瓶颈/ ,/ 我们/ 将/ 缓存/ 资源/ 作为/ 瓶颈/ 参数/ 之一/ ./ 2.2/ 相关/ 理论/ 模型/ 从/ 理论/ 层面/ 服务器/ 选择/ 问题/ 和/ 服务器/ 部署/ 问题/ 类似/ ./ 文献/ [/ 11/ ]/ 从/ 数学/ 建模/ 角度/ ,/ 将/ 服务器/ 部署/ 模型/ 划分/ 为/ 基于/ 确定/ 信息/ 、/ 基于/ 概率模型/ 和/ 基于/ 博弈论/ 等/ 多种/ 模型/ ./ 本节/ 重点/ 综述/ 与/ 本文/ 问题/ 最/ 密切相关/ 的/ 两种/ 基于/ 确定/ 信息/ 的/ 经典/ 模型/ ,/ 以/ 帮助/ 我们/ 理解/ 后面/ 的/ 问题/ 建模/ 、/ 模型/ 分析/ 以及/ 模型/ 求解/ 和/ 验证/ ./ 2.2/ ./ 1/ 设备/ 选址/ 模型/ [/ 7/ ,/ 10/ -/ 11/ ]/ 设备/ 选址/ 问题/ 定义/ 如下/ :/ 给定/ 一个/ 地址/ 集合/ L/ =/ {/ i/ }/ 和/ 用户/ 集合/ U/ =/ {/ j/ }/ ,/ 地址/ i/ 表示/ 设备/ 可能/ 被/ 放置/ 的/ 位置/ ./ 在/ 位置/ i/ 处/ 放置/ 一个/ 设备/ 引发/ 的/ 成本/ 为/ fi/ ./ 每个/ 用户/ j/ 必定会/ 被/ 指派/ 给/ 离/ 其/ 最近/ 的/ 一个/ 设备/ ,/ 这/ 将/ 引发/ 的/ 成本/ 标记/ 为/ dj/ ×/ cij/ ,/ 其中/ dj/ 表示/ 来自/ 用户/ j/ 的/ 需求/ ,/ cij/ 表示/ 位于/ 地址/ i/ 处/ 的/ 设备/ 和/ 用户/ j/ 之间/ 的/ 网络/ 距离/ ./ 目标/ 是/ :/ 发现/ 一种/ 解决办法/ (/ 如/ 确定/ 所/ 选择/ 的/ 位置/ 和/ 部署/ 在/ 位置/ 中/ 的/ 设备/ 数/ )/ ,/ 在/ 服务/ 所有/ 用户/ 的/ 情况/ 下/ 使/ 上述/ 成本/ 总和/ 最小/ ,/ 即/ 其中/ ∑/ i/ ∈/ L/ ∑/ j/ ∈/ Udjcij/ 表示/ 边际/ 运营/ 成本/ ,/ 与/ 动态变化/ 的/ 用户/ 需求/ 和/ 采用/ 设备/ 选址/ 模型/ 系统/ 的/ 映射/ 算法/ [/ 3/ ]/ 等/ 相关/ ./ 2.2/ ./ 2/ 最小/ K/ 中值/ 模型/ [/ 7/ ,/ 11/ ]/ 最小/ K/ 中值/ 问题/ 定义/ 如下/ :/ 给定/ n/ 个/ 设备/ ,/ 用/ 集合/ F/ =/ {/ i1/ ,/ i2/ ,/ …/ ,/ in/ }/ 表示/ ,/ 从/ 其中/ 选出/ k/ 个/ 设备/ 组成/ 集合/ S/ =/ {/ s1/ ,/ s2/ ,/ …/ ,/ sk/ }/ ./ 用户/ 用/ 集合/ U/ =/ {/ j1/ ,/ j2/ ,/ …/ ,/ jm/ }/ 表示/ ,/ 然后/ 指派/ 用户/ j/ 到/ 离/ 其/ 最近/ 的/ 设备/ ./ 如果/ 用户/ j/ 已经/ 被/ 指派/ 给/ 设备/ i/ ,/ 则/ 引发/ 开销/ dj/ ×/ cij/ ,/ 其中/ dj/ 表示/ 来自/ 用户/ j/ 的/ 需求/ ,/ cij/ 表示/ 设/ ①/ ChinaCache/ ./ http/ :/ // // www/ ./ chinacache/ ./ com/ // Page4/ 备/ i/ 和/ 用户/ j/ 之间/ 的/ 网络/ 距离/ ./ 目标/ 是/ 选择/ k/ 个/ 设备/ ,/ 最小化/ 分配/ 代价/ 总和/ ,/ 即/ 找/ 一个/ 集合/ S/ ,/ 其中/ S/ / F/ ,/ 且/ |/ S/ |/ </ k/ ,/ 使得/ 上述/ 两个/ 模型/ 之间/ 的/ 区别/ 体现/ 于/ 两点/ :/ (/ 1/ )/ 最小/ K/ 中值/ 模型/ 中/ 设备/ 无/ 初始化/ 成本/ ;/ (/ 2/ )/ 最小/ K/ 中值/ 模型/ 对/ 所/ 选择/ 的/ 设备/ 个数/ 增加/ 了/ 一个/ 上限/ k/ ./ 2.3/ 其它/ 相关/ 研究/ 近年来/ 有关/ 服务器/ 选择/ 或/ 部署/ 等/ 服务器/ 资源分配/ 的/ 研究/ 有/ 很多/ :/ Li/ 等/ 人/ [/ 6/ ]/ 从/ 用户/ 体验/ 角度/ ,/ 提出/ 一种/ 基于/ 结构/ 树/ 的/ 节点/ 部署/ 模型/ ,/ 并/ 设计/ 了/ 一种/ 复杂度/ 为/ O/ (/ N2M/ )/ 的/ 搜索算法/ ./ 其中/ ,/ M/ 和/ N/ 分别/ 为/ 选择/ 节点/ 和/ 被/ 选/ 节点/ 数/ ./ 该/ 模型/ 只/ 考虑/ 了/ 节点/ 与/ 用户/ 之间/ 的/ 流量/ 和/ 延迟/ ;/ Qiu/ 等/ 人/ [/ 7/ ]/ 将/ 无/ Peer/ 辅助/ 的/ 静态/ 服务器/ 部署/ 问题/ 建模/ 为/ 最小/ K/ 中值/ 问题/ ,/ 并/ 提出/ 了/ 很多/ 简单/ 高效/ 的/ 贪心/ 算法/ ,/ 部署/ 决策/ 的/ 依据/ 主要/ 有/ 用户/ 延迟/ 、/ 请求/ 速率/ 和/ 负载/ 等/ ./ 文献/ [/ 10/ ]/ 将/ 该类/ 问题/ 提炼/ 为/ 经典/ 的/ 设备/ 选址/ 模型/ ,/ 以/ 用户/ 的/ 连接/ 开销/ 作为/ 主要/ 衡量/ 指标/ 并/ 部分/ 地/ 考虑/ 了/ 物理/ 服务器/ 的/ 一次性/ 投入/ 成本/ ./ 并/ 在/ 文献/ [/ 14/ ]/ 中/ 证明/ 了/ 该/ 问题/ 为/ NP/ 完全/ 问题/ ./ 此后/ 围绕/ 这类/ NP/ 完全/ 问题/ 的/ 启发式/ 求解/ 算法/ 展开/ 了/ 很多/ 研究/ ./ 由于/ 本文/ 解决/ 多维/ 设备/ 选址/ 问题/ 的/ 思路/ 基于/ SDAN/ 特例/ ,/ 因此/ 本文/ 暂不对/ 大量/ 的/ 启发式/ 求解/ 算法/ 进行/ 综述/ ./ Presti/ 等/ 人/ [/ 15/ ]/ 综合/ 考虑/ 了/ 用户/ 请求/ 重定向/ 问题/ 和/ 服务器/ 动态/ 部署/ 问题/ ,/ 依据/ 分布式/ 和/ 局部/ 机制/ 以较/ 低/ 开销/ 和/ 复杂度/ 实现/ 了/ 服务器/ 的/ 动态/ 部署/ ./ 针对/ 服务器/ 数量/ ,/ 服务器/ 的/ 利用率/ 以及/ 最优/ 服务器/ 和/ 新增/ 或/ 新/ 删除/ 服务器/ 间/ 的/ 距离/ 等/ 之间/ 给出/ 了/ 一种/ 有效/ 的/ 折衷/ 方法/ ./ 文献/ [/ 5/ ]/ 提出/ 了/ 一个/ 分布式系统/ DONAR/ ,/ 传统/ 服务器/ 选择/ 方法/ 或者/ 基于/ 高/ 可靠/ 和/ 低/ 可/ 扩展/ 的/ 集中式/ 协同/ 方法/ ,/ 或者/ 依赖于/ 次优/ 的/ 甚至/ 不/ 稳定/ 的/ 请求/ 分配/ 的/ 分布式/ 启发式/ 方法/ ./ 而/ 在/ DONAR/ 中/ ,/ 通过/ 在/ 分布式/ 节点/ 中/ 运行/ 简单/ 、/ 高效/ 的/ 局部/ 协同/ 决策/ 机制/ ,/ 为/ 客户/ 请求/ 做出/ 服务器/ 选择/ 决策/ ./ DONAR/ 的/ 优势/ 不仅/ 在于/ 稳定/ 和/ 高效/ ,/ 而且/ 综合/ 考虑/ 了/ 用户/ 的/ 性能/ 和/ 服务器/ 的/ 负载/ ./ 上述/ 相关/ 研究/ 有/ 两个/ 鲜明/ 的/ 特点/ :/ (/ 1/ )/ 有效/ 解决/ 了/ 不/ 考虑/ Peer/ 辅助/ 情况/ 下/ 的/ 服务器/ 选择/ 问题/ ;/ (/ 2/ )/ 不适/ 用于/ Peer/ 辅助/ 下/ 引入/ 新/ 瓶颈/ 参数/ 的/ 服务器/ 选择/ 问题/ ./ 有关/ P2P/ 场景/ 中/ 服务器/ 选择/ 问题/ 和/ 考虑/ 计算资源/ 瓶颈/ 参数/ 的/ 相关/ 研究/ 有/ :/ 文献/ [/ 16/ -/ 17/ ]/ 提出/ 了/ 非/ CDN/ 架构/ 下/ P2P/ 系统/ 中/ 服务器/ 的/ 部署/ 算法/ ;/ Oppenheimer/ 等/ 人/ [/ 18/ ]/ 在/ 非/ Peer/ 辅助/ 的/ 真实/ 系统/ 中/ 对/ 服务器/ 部署/ 算法/ 进行/ 验证/ ,/ 指出/ CPU/ 应该/ 作为/ 服务器/ 部署/ 问题/ 中除/ 带宽/ 资源/ 之外/ 的/ 重要/ 瓶颈/ 参数/ ;/ Relan/ 等/ 人/ ①/ 对非/ Peer/ 辅助/ 情况/ 下/ 引入/ CPU/ 瓶颈/ 参数/ 的/ 服务器/ 部署/ 模型/ 进行/ 了/ 研究/ ./ 在/ CSDN/ 中/ 动态/ 应用/ 类/ 逻辑/ 子/ 服务器/ 网络/ 构造/ 适用/ 于/ 引入/ CPU/ 瓶颈/ 参数/ ./ 但/ SDAN/ 的/ 瓶颈/ 更/ 在于/ 内存/ 资源/ ./ DONAR/ [/ 5/ ]/ 基于/ CoralCDN/ 提出/ 将/ 服务器/ 负载/ 考虑/ 在内/ ,/ 但仅/ 考虑/ 了/ 服务器/ 的/ 带宽/ 负载/ ,/ 没有/ 考虑/ 内存/ 成为/ 瓶颈/ 时多/ 参数/ 服务器/ 选择/ ./ 综上/ 现有/ 相关/ 研究/ ,/ 尚/ 没有/ 适合/ 针对/ SDAN/ 这种/ 需要/ Peer/ 辅助/ 和/ 引入/ 内存/ 瓶颈/ 参数/ 的/ CSDN/ 服务器/ 部署/ 问题/ 的/ 理论/ 模型/ 和/ 求解/ 算法/ ./ 本文/ 剩余/ 部分/ 如不作/ 特别/ 说明/ ,/ CSDN/ 资源/ 的/ 动态分配/ 等同于/ 针对/ SDAN/ 类/ 特定/ 云/ 服务/ 的/ 逻辑/ 子/ 服务器/ 网络/ 的/ 动态/ 构造/ ,/ 即/ 服务器/ 选择/ ./ 3CSDN/ 资源/ 的/ 动态分配/ 问题/ 本/ 节/ 我们/ 将/ CSDN/ 服务器资源/ 的/ 动态分配/ 问题/ 建模/ 为/ 多维/ 设备/ 选址/ 问题/ ./ 如图/ 1/ ,/ CSDN/ 的/ 3/ 个/ 逻辑/ 子/ 服务器/ 网络/ 分别/ 负责/ 3/ 种/ 不同/ 类型/ 云/ 服务/ 的/ 传递/ ./ 其中/ SDAN/ 有/ 3/ 个/ 不同于/ 其它/ 逻辑/ 子/ 服务器/ 网络/ 的/ 特点/ ,/ 使得/ 优化/ 其/ 资源/ 动态分配/ ,/ 对/ 整个/ CSDN/ 显得/ 尤为重要/ ./ 特点/ 1/ ,/ SDAN/ 所/ 分发/ 的/ 流媒体/ 和/ 大/ 文件/ 下载/ 占据/ 了/ 互联网/ 的/ 大部分/ 流量/ ,/ 一些/ 机构/ 如/ 思科/ 预测/ 此类/ 流量/ 2014/ 年/ 在/ 互联网/ 流量/ 中/ 的/ 比例/ 将/ 达到/ 91/ %/ ②/ ;/ 特点/ 2/ ,/ SDAN/ 类/ 业务/ 可以/ 采用/ P2P/ 的/ 方式/ 降低/ 服务器/ 的/ 负载/ ,/ 这/ 与/ 其它/ 根据/ 用户/ 需求/ 线性/ 增加/ 服务器资源/ 的/ 分配模式/ 有/ 本质/ 不同/ ;/ 特点/ 3/ ,/ SDAN/ 所/ 分发/ 内容/ 中/ 的/ 热点/ 内容/ 大小/ 远超过/ 某/ CSDN/ 服务器/ 节点/ 中/ 多台/ 服务器/ 的/ 内存/ 总和/ ./ 本文/ 将/ 服务器/ 内存/ 使用/ 作为/ CSDN/ 的/ 新/ 瓶颈/ 参数/ 引入/ 到/ 设备/ 选址/ 模型/ 中/ ,/ 该/ 参数/ 的/ 引入/ 改变/ 了/ 传统/ 的/ CDN/ 调度/ 机制/ :/ 如果/ 用户/ 请求/ 热点/ 内容/ ,/ 但/ 该/ 热点/ 内容/ 并/ 没有/ 被/ 缓存/ 在/ 内存/ 中/ ,/ 而且/ 该/ 节点/ 的/ 内存/ 资源/ 已经/ 不够/ 用/ ,/ 这种/ 情况/ 下/ ,/ 即使/ 带宽/ 资源/ 有/ 剩余/ ,/ 也/ 会/ 将/ 当前/ 的/ 部分/ 用户/ 请求/ 指派/ 给/ 临近/ 缓存/ 有/ 该/ 热点/ 内容/ 的/ 服务器/ 节点/ ,/ 目的/ 是/ 避免/ 频繁/ 的/ 缓存/ 不/ 命中/ ,/ 从而/ 降低/ CSDN/ 的/ 服务质量/ 和/ 效能/ ./ ①/ ②/ Page53/ ./ 1/ 问题/ 建模/ 本/ 节/ 我们/ 将/ CSDN/ 的/ 资源/ 动态分配/ 问题/ 建模/ 为/ 多维/ 设备/ 选址/ 模型/ MFLM/ ./ MFLM/ 在/ 经典/ 设备/ 选址/ 模型/ [/ 10/ ]/ 基础/ 上/ ,/ 将/ 内存/ 资源/ 作为/ CSDN/ 资源/ 动态分配/ 的/ 新增/ 参数/ ./ 同时/ 鉴于/ SDAN/ 所/ 分发/ 业务/ 可/ 采用/ Peer/ -/ to/ -/ Peer/ 方式/ ,/ 热点/ 文件/ 对/ 服务器资源/ 的/ 需求/ 并/ 不/ 与/ 用户/ 请求/ 数/ 成正比/ ./ MFLM/ 问题/ 定义/ 如下/ ./ 定义/ 2/ ./ 多维/ 设备/ 选址/ 问题/ ./ 给定/ CSDN/ 服务器/ 节点/ 集合/ L/ =/ {/ l1/ ,/ l2/ ,/ …/ ,/ lT/ }/ 和/ 服务器/ 集合/ S/ =/ {/ s1/ ,/ s2/ ,/ …/ ,/ sN/ }/ ./ 其中/ 每个/ 服务器/ 节点/ 中/ 包含/ S/ 中/ 的/ 若干/ 台/ 服务器/ ,/ 任一/ 服务器/ j/ 的/ 额定/ 带宽/ 能力/ 为/ Nj/ ,/ 额定/ 内存大小/ 为/ Cj/ ./ 所有/ 地理分布/ 的/ 用户/ 用/ 集合/ U/ 表示/ ./ 根据/ 用户/ 的/ 分布/ 和/ 用户/ 的/ 请求/ ,/ 从/ 地理分布/ 的/ CSDN/ 各个/ 服务器/ 节点/ 中自/ 适应/ 地/ 选择/ 数目/ 不/ 等/ 的/ 服务器/ ,/ 来/ 响应/ 用户/ 的/ 请求/ ./ CSDN/ 大/ 文件/ 的/ 传递/ 中/ ,/ 缓存/ 命中率/ 是/ 影响/ 传输/ 性能/ 的/ 一个/ 重要/ 因素/ ,/ 现实/ 中/ 缓存/ 高/ 热点/ 内容/ 的/ 内存/ 资源/ 已经/ 成为/ 瓶颈/ 资源/ 之一/ ./ 因此/ 缓存/ 的/ 使用/ 参数/ cj/ 已经/ 被/ 整合/ 到/ 了/ 服务器/ 选择/ 的/ 成本/ 中/ ,/ 即/ 有时/ 即使/ 服务器/ 带宽/ 资源/ 有/ 剩余/ ,/ 也/ 可能/ 会/ 将/ 用户/ 请求/ 重定向/ 至/ 其它/ 缓存/ 所/ 请求/ 文件/ 的/ 节点/ ./ 选择/ 一个/ 服务器/ 的/ 运行/ 成本/ 为/ fj/ ,/ 假设/ 用户/ i/ 被/ 指派/ 给/ 服务器/ j/ ,/ 则/ 用/ dij/ 表示/ 用户/ 与/ 服务器之间/ 的/ 网络/ 距离/ ./ MFLM/ 的/ 目标/ 是/ :/ 发现/ 一种/ 资源/ 动态分配/ 方法/ ,/ 在/ 服务/ 用户/ 和/ 控制/ 成本/ 开销/ 之间/ 给出/ 一种/ 均衡/ ,/ 即/ 在/ 保证/ 用户/ 服务质量/ 的/ 前提/ 下/ ,/ 最小化/ 总/ 的/ 资源分配/ 成本/ :/ Min/ ∑/ j/ ∈/ L/ 其中/ |/ Sj/ |/ 表示/ 在/ 节点/ j/ 处/ 选择/ 的/ 服务器/ 数目/ ,/ bi/ 表示/ 用户/ i/ 的/ 带宽/ 需求/ ,/ 因/ 采用/ P2P/ 机制/ 引起/ 的/ 用户/ 资源/ 需求/ 削减/ 因子/ 为/ γ/ i/ (/ 0/ / γ/ i/ / 1/ )/ ./ 多维/ 设备/ 选址/ 模型/ 与/ 设备/ 选址/ 模型/ 之间/ 的/ 本质/ 不同/ 在于/ 前者/ 引入/ 了/ 内存/ 参数/ ,/ 并且/ 针对/ 热点/ 文件/ 用户/ 采用/ P2P/ 机制/ ,/ 导致用户/ 对/ 服务器资源/ 需求/ 的/ 下降/ ./ P2P/ 的/ 引入/ 对/ MFLM/ 模型/ 而言/ 没有/ 本质/ 的/ 影响/ ,/ 仅/ 对/ 用户数/ 和/ 资源/ 需求/ 之间/ 关系/ 的/ 影响/ 较大/ ./ 引入/ P2P/ 的/ 方法/ 和/ 采用/ P2P/ 后/ 对/ CSDN/ 系统/ 性能/ 和/ 开销/ 等/ 方面/ 产生/ 的/ 影响/ 等/ 细节/ 问题/ 在/ 后续/ 工作/ 中/ 进行/ 深入研究/ 和/ 探讨/ ./ 3.2/ MFLM/ 模型/ 分析/ 定理/ 1/ ./ CSDN/ 中/ MFLM/ 问题/ 是/ NP/ 完全/ 问题/ ./ 证明/ ./ 下面/ 分/ 两步/ 来/ 证明/ MFLM/ 问题/ 是/ NP/ 完全/ 的/ ,/ 首先/ 证明/ MFLM/ 是/ NP/ 问题/ ,/ 再证/ MFLM/ 是/ NP/ 难/ 的/ ./ 算法/ ./ 步/ 1/ ./ MFLM/ 问题/ 属于/ NP/ 问题/ ./ 给定/ 一个/ 带/ 权重/ 的/ 图/ G/ =/ 〈/ V/ ,/ E/ 〉/ ,/ 其中/ 顶点/ 由/ n/ 个/ 服务器/ 和/ m/ 个/ 用户/ 构成/ ./ 每个/ 用户/ i/ 的/ 带宽/ 需求/ 为/ band/ (/ i/ )/ ,/ 内存/ 需求/ 为/ cache/ (/ i/ )/ ,/ 每个/ 用户/ i/ 都/ 需要/ 被/ 指派/ 给/ 某个/ 服务器/ j/ ./ 这个/ 指派/ 带来/ 的/ 连接/ 成本/ 为/ band/ (/ i/ )/ ×/ cache/ (/ i/ )/ ×/ dij/ ,/ 其中/ dij/ 表示/ 用户/ i/ 与/ 服务器/ j/ 之间/ 的/ 网络/ 距离/ ./ 每个/ 服务器/ j/ 的/ 内存/ 上限/ 为/ Cj/ ,/ 带宽/ 上限/ 为/ Bj/ ./ 并且/ 部分/ 请求/ 热点/ 文件/ 的/ 用户/ ,/ 由于/ 采用/ P2P/ 机制/ 的/ 原因/ ,/ 需在/ 原有/ 的/ 基础/ 上/ 按/ 比例/ 减少/ 其/ 带宽/ 和/ 内存/ 需求/ ,/ 假设/ 削减/ 因子/ 为/ γ/ (/ 0/ / γ/ / 1/ )/ ,/ 则/ 总成本/ 降低/ 为/ 原来/ 的/ γ/ 倍/ ./ A/ 是/ 将/ 所有/ 用户/ 指派/ 给/ 服务器/ 后/ 的/ 总开销/ ./ 问题/ 是/ 给定/ 的/ 指派/ 中/ 是否/ 存在/ 总开销/ 为/ A/ 的/ 方案/ ?/ 假设/ T/ =/ “/ 非/ 确定性/ 图灵机/ ”/ ,/ 输入/ 为/ n/ 个/ 服务器/ 构成/ 的/ 集合/ S/ 、/ m/ 个/ 用户/ 组成/ 的/ 集合/ U/ 和/ A/ 的/ 猜测/ 函数/ f/ ./ 函数/ f/ 可/ 确认/ 给定/ 的/ 指派/ 方案/ 的/ 总开销/ 是否/ 为/ A/ ./ 如果/ 确定/ 成功/ ,/ 则/ 停止/ ;/ 否则/ 继续/ ./ 因此/ 至少/ 在/ 给定/ 一个/ 用户/ 到/ 服务器/ 指派/ 的/ 情况/ 下/ ,/ 可以/ 在/ 多项式/ 时间/ 内/ 确定/ 其/ 总开销/ 是否/ 为/ A/ ./ 因此/ MFLM/ 问题/ 属于/ NP/ 问题/ ./ 步/ 2/ ./ MFLM/ 问题/ 属于/ NP/ 难/ ./ 假设/ 存在/ 可/ 求解/ MFLM/ 问题/ 的/ 多项式/ 时间/ 算法/ T/ ./ 那么/ 一定/ 可/ 将/ 上述/ 算法/ 简化/ 后/ 用以/ 解决/ FLP/ (/ FacilityLocationProblem/ )/ [/ 14/ ]/ 问题/ ./ 即将/ 内存/ 约束/ 去掉/ ,/ 用户/ 到/ 服务器/ 的/ 指派/ 仅/ 依赖于/ 带宽/ 和/ 距离/ 两个/ 限制/ 条件/ ./ 因此/ FLP/ 问题/ 能用/ MFLM/ 的/ 多项式/ 时间/ 算法/ T/ 在/ 多项式/ 时间/ 内/ 求解/ ./ 然而/ 文献/ [/ 14/ ]/ 中/ 证明/ FLP/ 是/ NP/ 难/ 的/ ,/ 因此/ MFLP/ 也/ 是/ NP/ 难/ 的/ ./ 综/ 上步/ 1/ 和步/ 2/ 可知/ ,/ MFLP/ 是/ NP/ 完全/ 问题/ ./ 推论/ 1/ ./ CSDN/ 中/ 的/ MFLP/ 问题/ 无/ 任何/ 近似/ 证明/ ./ 因为/ MFLP/ 问题/ 是/ NP/ 完全/ 问题/ ,/ 因此/ MFLP/ 有/ 近似算法/ 的/ 前提/ 是/ P/ =/ NP/ ./ 然而/ P/ 是否/ 等于/ NP/ 是非/ 确定性/ 的/ 多项式/ 复杂程度/ 问题/ ./ 因此/ CSDN/ 中/ 的/ MFLP/ 问题/ 无/ 任何/ 近似算法/ ./ 解决/ NP/ 完全/ 问题/ 的/ 途径/ 有/ 5/ 种/ ,/ 本文/ 考虑/ 针对/ SDAN/ 中/ peer/ 有/ 贡献/ ,/ 且/ 内存/ 资源/ 成为/ 继/ 带宽/ 资源/ 之外/ 的/ 瓶颈/ 参数/ 这一/ 特定/ 问题/ 进行/ 启发式/ 求解/ ./ 4MFLM/ 模型/ 启发式/ 求解/ 算法/ MFLM/ 是/ NP/ 完全/ 问题/ ,/ 因此/ 没有/ 针对/ 该/ 问题/ 的/ 一般性/ 方法/ ./ 本节/ 我们/ 通过/ 增加/ 一些/ 前提/ 假设/ 和/ Page6/ 约束/ 改变/ ,/ 针对/ SDAN/ 逻辑/ 子/ 服务器/ 网络/ 动态/ 构造/ 的/ 特例/ ,/ 给出/ 相应/ 的/ 求解/ 方法/ ./ 本节/ 求解/ 算法/ 所/ 涉及/ 的/ 假设/ ,/ 均/ 建立/ 在/ CSDN/ 系统/ 实际/ 运行状况/ 的/ 基础/ 上/ ./ 4.1/ 算法/ 求解/ 的/ 相关/ 基础/ 网络资源/ 可/ 动态/ 配置/ 的/ 相关/ 基础/ ./ 为了/ 便于/ 理解/ 问题/ ,/ 本/ 节/ 我们/ 首先/ 介绍/ CSDNCSDN/ 物理/ 服务器/ 的/ 分布/ 信息/ ./ MFLM/ 的/ 目的/ 是/ 在/ 当前/ 物理/ 服务器/ 网络/ 中/ 按/ 需/ 动态/ 选择/ 服务器/ 构造/ 逻辑/ 子/ 服务器/ 网络/ ,/ 因此/ CSDN/ 的/ 服务器/ 节点/ 地理位置/ 信息/ 、/ 每个/ 节点/ 中/ 服务器/ 的/ 数量/ 、/ 服务器/ 节点/ 间/ 网络/ 距离/ 等/ 有关/ 信息/ 是/ 解决/ MFLM/ 问题/ 的/ 必要条件/ 之一/ ./ CSDN/ 用户/ 的/ 分布/ 信息/ ./ 通过/ 查询/ 用户/ 的/ IP地址/ ,/ 确定/ 用户/ 所在/ 的/ 区域/ ./ 这是/ 用户/ 请求/ 重定向/ 的/ 基本/ 依据/ ./ 一般/ 在/ 确定/ 用户/ 所在区域/ 和/ 负责/ 该/ 区域/ 的/ CSDN/ 服务器/ 节点/ 后/ ,/ 理论/ 上/ 重定向/ 机制/ 会/ 将/ 所有/ 属于/ 该/ 区域/ 的/ 用户/ 重定向/ 至该/ 区域/ 的/ CSDN/ 服务器/ 节点/ ./ 即/ 由/ 最靠近/ 用户/ 的/ 服务器/ 服务/ 用户/ ,/ 符合/ CSDN/ 就近/ 服务/ 的/ 原则/ ./ 如果/ 该/ 节点/ 有/ 足够/ 的/ 服务/ 能力/ ,/ 则/ 该/ 区域/ 所有/ 用户/ 都/ 由/ 该/ 节点/ 的/ 服务器/ 服务/ ./ 如果/ 该/ 节点/ 没有/ 足够/ 的/ 服务/ 能力/ 响/ 应该/ 区域/ 中/ 的/ 所有/ 用户/ 请求/ ,/ 则/ 在/ 其它/ 一些/ 调度/ 机制/ 的/ 作用/ 下/ ,/ 该/ 区域/ 的/ 部分/ 用户/ 将/ 被/ 重定向/ 至/ 其它/ 服务器/ 节点/ ./ 重定向/ 机制/ ./ 直观/ 而言/ ,/ 重定向/ 机制/ 就是/ 确保/ 用户/ 请求/ 总是/ 被/ 最靠近/ 用户/ 的/ 服务器/ 响应/ ./ 实际/ 系统/ 中/ 重定向/ 的/ 依据/ 主要/ 包括/ 用户/ 和/ 服务器之间/ 的/ 网络/ 距离/ 是否/ 最近/ ,/ 服务器/ 可用/ 的/ 带宽/ 资源/ 是否/ 可/ 满足/ 当前/ 的/ 用户/ 需求/ ./ 在/ MFLM/ 中/ ,/ 内存/ 的/ 使用/ 也/ 成/ 了/ 重定向/ 的/ 依据/ ,/ 即/ 在/ 请求/ 热点/ 文件/ 时/ ,/ 仅/ 有/ 足够/ 的/ 带宽/ 资源/ 和/ 用户/ 与/ 服务器之间/ 的/ 网络/ 距离/ 这/ 两个/ 参数/ 还/ 不足以/ 决定/ 用户/ 会/ 被/ 某/ 服务/ 节点/ 中/ 的/ 服务器/ 服务/ ./ 提高/ 缓存/ 命中率/ 的/ 内存/ 资源/ 也/ 被/ 作为/ 重定向/ 的/ 一个/ 瓶颈/ 参数/ ./ 同时/ 在/ 特例/ SDAN/ 中/ ,/ 由于/ P2P/ 机制/ 被/ 引入/ 到/ 高/ 热度/ 文件/ 的/ 分发/ ,/ 因此/ 重定向/ 的/ 依据/ 参数/ 变/ 的/ 更加/ 复杂/ ./ 此外/ 还有/ 其它/ 一些/ 不/ 确定/ 变量/ ,/ 如/ 单个/ 服务器/ 的/ 带宽/ 服务/ 能力/ 和/ 内存/ 服务/ 能力/ 、/ 单个/ 用户/ 的/ 需求/ 、/ 热点/ 文件/ 的/ 界定/ 、/ 热点/ 文件/ 的/ 大小/ 等/ 相关/ 信息/ ./ 在/ 后续/ 算法/ 中会/ 对/ 这些/ 变量/ 进行/ 讨论/ ./ 4.2/ 多/ 内存/ 协同/ 算法/ MFLM/ 在/ 经典/ 设备/ 选址/ 模型/ 中/ 引入/ 了/ 内存/ 使用/ 作为/ 热点/ 文件/ 分发/ 的/ 一个/ 瓶颈/ 参数/ ,/ 因此/ 如何/ 进行/ 多个/ 服务器/ 节点/ 的/ 内存/ 资源/ 协同/ 是/ MFLM/ 求解/ 算法/ 的/ 重要/ 部分/ ./ 多/ 节点/ 内存/ 资源/ 协同/ 的/ 基本/ 思想/ 是/ 在/ 当前/ 服务器/ 节点/ 的/ 内存/ 资源/ 不足以/ 缓存/ 所有/ 热点/ 内容/ 时/ ,/ 可以/ 临近/ 服务器/ 节点/ 的/ 内存/ 作为/ 补充/ ./ 假设/ SDAN/ 中有/ M/ 个/ 文件/ ,/ 用/ 集合/ F/ =/ {/ f1/ ,/ f2/ ,/ …/ ,/ fM/ }/ 表示/ ,/ 集合/ 中/ 文件/ 按/ 其/ 热度/ 降序/ 排列/ ./ 其中/ 文件/ fi/ 的/ 大小/ 为/ size/ (/ fi/ )/ ./ 文件/ 的/ 热度/ 服从/ Mandelbrot/ -/ zipf/ (/ k/ ,/ N/ ,/ q/ ,/ s/ )/ 分布/ [/ 19/ ]/ ,/ 即/ 文件/ 热度/ 函数/ hot/ (/ fi/ )/ 服务/ 如下/ 关系/ :/ hot/ (/ fi/ )/ =/ 1/ (/ k/ +/ q/ )/ s/ ×/ ∑/ N/ 其中/ k/ 表示/ 次序/ ,/ N/ 表示/ 文件/ 总数/ ,/ s/ 和/ q/ 为/ 分布/ 参数/ ./ 文件/ 的/ 热度/ 越高/ ,/ 文件/ 被/ 请求/ 访问/ 的/ 次数/ 就/ 越/ 多/ ./ 设置/ 一个/ 文件/ 热度/ 阈值/ hot/ _/ thred/ ,/ 热度/ 超过/ hot/ _/ thred/ 的/ 文件/ 被/ 称为/ 热点/ 文件/ ,/ 热点/ 文件/ 用/ 集合/ F/ / =/ {/ f1/ ,/ f2/ ,/ …/ ,/ fM/ }/ 表示/ ,/ 则/ 所有/ 热点/ 文件/ 的/ 总/ 大小/ 用/ size/ (/ F/ / )/ 表示/ ./ CSDN/ 的/ 内存/ 协同/ 有/ 两种/ :/ 一是/ CSDN/ 节点/ 内多/ 内存/ 协同/ ,/ 一般/ 情况/ 下/ 由于/ 单个/ 服务器/ 内存/ 缓存/ 热点/ 内容/ 的/ 能力/ 十分/ 有限/ ,/ 因此/ CSDN/ 采用/ 节点/ 内/ 所有/ 内存/ 资源/ 协同/ 的/ 方式/ 提供/ 缓存/ 服务/ ,/ 确保/ 高/ 缓存/ 命中率/ ;/ 二是/ 节点/ 间/ 内存/ 协同/ ,/ 当/ size/ (/ F/ / )/ 大于/ 一个/ 服务器/ 节点/ 的/ 内存/ 总/ 容量/ 时/ ,/ 为了/ 确保/ 热点/ 文件/ 的/ 缓存/ 命中率/ ,/ CSDN/ 将/ 几个/ 邻近/ CSDN/ 节点/ 的/ 内存/ 资源/ 以/ 节点/ 间/ 内存/ 协同/ 的/ 方式/ 提供/ 高/ 缓存/ 命中/ 服务/ ,/ 即/ 利用/ 邻近/ CSDN/ 节点/ 的/ 内存/ 资源/ 缓存/ 当前/ CSDN/ 节点/ 缓存/ 不了/ 的/ 内容/ ,/ 如图/ 2/ 所示/ ./ 图/ 2/ 中/ CSDN/ 节点/ 1/ 中/ 所有/ 的/ 内存/ 资源/ 合作/ 缓存/ 的/ 内容/ 包括/ 热点/ 文件/ 集合/ F1/ 和/ F2/ ./ 但/ 当前/ 节点/ 1/ 中/ 用户/ 访问/ 请求/ 所/ 涉及/ 的/ 热点/ 内容/ 集合/ 为/ F1/ ∪/ F2/ ∪/ F3/ ∪/ F4/ ,/ 由于/ 节点/ 1/ 的/ 内存/ 资源/ 不足以/ 缓存/ 所有/ 的/ 热点/ 文件/ ,/ 而/ 邻近/ 节点/ 2/ 缓存/ 热点/ 文件/ F1/ 和/ Page7F3/ ,/ 邻近/ 节点/ 3/ 缓存/ 热点/ 文件/ F1/ 和/ F4/ ./ 因此/ 在/ 均衡/ 缓存/ 不/ 命中/ 开销/ 和/ 非/ 就近/ 访问/ 开销/ 的/ 基础/ 上/ ,/ 节点/ 1/ 中/ 请求/ 访问/ 热点/ 文件/ F3/ 和/ F4/ 的/ 用户/ 可/ 被/ 重定向/ 至/ 节点/ 2/ 和/ 节点/ 3/ ,/ 实现/ 多/ 内存/ 协同/ ./ 及/ 多/ 内存/ 协同/ 的/ 细节/ 见/ 算法/ 1/ ./ 如何/ 均衡/ 缓存/ 不/ 命中/ 开销/ 和/ 非/ 就近/ 访问/ 开销/ 以/ 算法/ 1/ ./ 多/ Cache/ 协同/ 算法/ ./ 1/ ./ For/ / lj/ ∈/ L/ ,/ whileL/ =/ {/ l1/ ,/ l2/ ,/ …/ ,/ lT/ }/ 2/ ./ CollectingtheinformationaboutserversFt3/ ./ Computingtheavailablebandwidthabjandcache4/ ./ CollectingusersinformationUtoriginallyserved5/ ./ DeterminethehotfilesetF/ ;/ 6/ ./ Collectingthedistanceinformationbetweenthe7/ ./ CollectingthehotfileindexinthecacheofLk8/ ./ Ifsize/ (/ F/ )/ </ thecachecapacityinsideljthen9/ ./ Allusers/ ’/ requestsfromljareservedbyservers10/ ./ Else11/ ./ do/ {/ 12/ ./ LetUdenotetherestuserswhoserequestis13/ ./ Selectsomeservernodesneartoljwhocaching14/ ./ Pre/ -/ evaluatingtheadditionalconnectioncost15/ ./ Computingthemissingcostmis/ _/ cost/ (/ U/ )/ ;/ 16/ ./ Ifadd/ _/ con/ _/ cost/ (/ U/ )/ </ mis/ _/ cost/ (/ U/ )/ 17/ ./ {/ RedirectUtothenearestservernodeswhose18/ ./ Else19/ ./ {/ RejectUorusingothercachereplacealgo/ -/ 20/ ./ U/ =/ U/ -/ U/ ;/ 21/ ./ }/ until/ (/ U/ =/ / )/ 22/ ./ EndIf23/ ./ EndFor/ 这是/ 一个/ 分布式/ 算法/ ,/ 运行/ 于/ 每个/ CSDN/ 服务器/ 节点/ ./ 算法/ 1/ 的/ 第/ 2/ ~/ 7/ 行/ ,/ 表示/ 对任/ 一个/ CSDN/ 服务器/ 节点均/ 需要/ 收集/ 其辖域/ 内/ 的/ 服务器资源/ 、/ 用户数量/ 、/ 热点/ 文件/ 、/ 邻近/ CSDN/ 服务器/ 节点/ 与/ 当前/ 节点/ 的/ 距离/ 以及/ 这些/ 节点/ 缓存/ 的/ 热点/ 内容/ 索引/ 等/ 信息/ ,/ 为/ 后续/ 用户/ 请求/ 的/ 重定向/ 和/ 多/ 内存/ 协同/ 等/ 提供/ 依据/ ./ 第/ 8/ 、/ 9/ 行/ 表示/ 如果/ 当前/ 的/ 服务器/ 节点/ lj/ 具有/ 足够/ 服务/ 其辖域/ 内/ 所有/ 用户/ 请求/ 的/ 能力/ ,/ 即/ 节点/ lj/ 有/ 足够/ 的/ 带宽/ 资源/ 响应/ 用户/ 的/ 服务/ 传递/ 需求/ ,/ 同时/ 具有/ 足够/ 的/ 内存/ 资源/ 缓存/ 所有/ 的/ 热点/ 文件/ 以/ 确保/ 高/ 缓存/ 命中率/ ./ 第/ 11/ ~/ 21/ 行/ 的/ 递归/ 过程/ 表示/ 对于/ 节点/ lj/ ,/ 部分/ 用户/ U/ 对/ 热点/ 文件/ 的/ 请求/ 在/ lj/ 中/ 缓存/ 不/ 命中/ ,/ CSDN/ 通过/ 预/ 评估/ 将/ U/ 中/ 部分/ 用户/ U/ 重定向/ 至/ 邻近/ 节点/ 的/ 连接/ 开销/ 和/ U/ 对/ lj/ 请求/ 的/ 缓存/ 不/ 命中/ 开销/ ,/ 决定/ 是/ 将/ U/ 重定向/ 至/ 其/ 邻近/ 节点/ 还是/ 拒绝/ 用户/ U/ 请求/ 或/ 通过/ 采用/ 其它/ 缓存/ 算法/ [/ 20/ ]/ 实现/ 热点/ 文件/ 的/ 缓存/ 替换/ ,/ 直到/ 所有/ 用户/ 的/ 请求/ 为空/ ./ 鉴于/ 篇幅/ 限制/ ,/ 所/ 涉及/ 的/ 其它/ 问题/ :/ 如何/ 预/ 评估/ 连接/ 开销/ 、/ 缓存/ 不/ 命中/ 开销/ 、/ 进行/ 内存/ 协同/ 的/ 服务器/ 节点/ 数量/ 和/ 集合/ 的/ 确定/ 等/ 细节/ 暂/ 不/ 详述/ ./ 由于/ 该/ 分布式/ 算法/ 的/ 时间/ 复杂度/ 取决于/ 对/ 热点/ 内容/ 缓存/ 不/ 命中/ 的/ 请求/ 处理/ ,/ 显然/ 其/ 时间/ 复杂度/ 与/ 集合/ U/ 中/ 用户/ 个数/ |/ U/ |/ 相关/ ./ 由/ 第/ 11/ ~/ 21/ 行/ 可知/ ,/ 多/ 内存/ 协同/ 算法/ 的/ 时间/ 复杂度/ 为/ O/ (/ |/ U/ |/ )/ ./ 4.3/ Peer/ 辅助/ 的/ 服务器/ 选择/ 算法/ 构成/ SDAN/ 逻辑/ 子/ 网络/ 由/ 被/ 选择/ 的/ 服务器/ 集合/ S/ / =/ {/ s1/ ,/ s2/ ,/ …/ ,/ sN/ }/ 构成/ ,/ 在/ 任一/ CSDN/ 服务器/ 节点/ lt/ 处/ 构成/ SDAN/ 网络/ 的/ 子/ 服务器/ 集合/ 记为/ St/ =/ {/ s1/ ,/ s2/ ,/ …/ ,/ sN/ }/ ./ 同时/ 根据/ 热点/ 文件/ 的/ 流行性/ ,/ 不失/ 一般性/ 可/ 假设/ 节点/ lt/ 处/ 理论/ 上/ 所/ 需/ 缓存/ 热点/ 文件/ 的/ 总/ 大小/ 应该/ 和/ 当前/ 网络/ 中/ 所有/ 热点/ 文件/ 总/ 大小/ size/ (/ F/ / )/ 相同/ ,/ 实际/ 中/ 某个/ CSDN/ 服务器/ 节点/ 所在/ 地区/ 的/ 用户/ 一般/ 也/ 会/ 对/ 所有/ 的/ 高/ 热点/ 内容/ 发出/ 次数/ 不/ 等/ 的/ 访问/ 请求/ ./ 但/ 根据/ 经验/ ,/ lt/ 处/ 的/ 内存/ 资源/ 往往/ 不足以/ 缓存/ 所有/ 热点/ 内容/ ,/ 即/ 它们/ 之间/ 有/ 如下/ 关系/ :/ SDAN/ 的/ 用户/ 集合/ U/ =/ {/ u1/ ,/ u2/ ,/ …/ ,/ uP/ }/ ,/ 在/ CSDN/ 节点/ lt/ 处/ 的/ 用户/ 集合/ 为/ Ut/ =/ {/ u1/ ,/ u2/ ,/ …/ ,/ uP/ }/ ./ 由于/ 用户/ 请求/ 服从/ λ/ 泊松/ 分布/ [/ 15/ ]/ ,/ lt/ 处/ 用户数/ 占/ 用户/ 总数/ 的/ 百分比/ 为/ pt/ ,/ 则/ lt/ 处/ 用户/ 请求/ 速率/ 为/ λ/ t/ =/ λ/ ×/ pt/ ,/ 其中/ pt/ 满足/ ∑/ T/ 务器/ 也/ 是/ 分布/ 的/ ./ 且/ 位于/ 不同/ 地理位置/ 的/ CSDN/ 服务器/ 节点/ 中/ 的/ 服务器/ 数量/ 并不相同/ ./ 考虑/ 到/ CSDN/ 需/ 多家/ 企业/ 协同/ ,/ 因此/ 构成/ CSDN/ 的/ 服务器/ 异构/ 的/ 比重/ 较大/ ./ 但/ 从/ 资源分配/ 的/ 角度/ ,/ 所有/ 服务器/ 本身/ 只是/ 个/ 资源/ 实体/ ,/ 不失/ 一般性/ 我们/ 可/ 假设/ 粒度/ 大小不一/ 的/ CSDN/ 服务器/ 节点/ 中/ 的/ 服务器/ 同构/ ./ 任一/ 服务器/ sj/ 的/ 带宽/ 能力/ 用/ Nj/ 表示/ ,/ 内存大小/ 用/ Cj/ 表示/ ./ 用/ Page8num/ (/ λ/ t/ )/ 表示/ 节点/ lt/ 处/ 用户数/ ,/ 即/ num/ (/ λ/ t/ )/ =/ |/ Ut/ |/ ,/ 假设/ 平均/ 每个/ 用户/ 的/ 带宽/ 需求/ 为/ α/ ,/ 则/ 节点/ lt/ 处/ 用户/ 对/ 服务器/ 带宽/ 资源/ 的/ 需求/ nj/ 表示/ 为/ 假设/ 节点/ lt/ 处/ 可/ 缓存/ 的/ 热点/ 文件大小/ 为/ cj/ ,/ 其中/ cj/ </ size/ (/ F/ / )/ ,/ 则/ MFLM/ 模型/ 中如/ 某/ 服务器/ 未/ 被/ 选中/ ,/ 则/ 称/ 该/ 服务器/ 处于/ 闲置/ 状态/ ,/ 否则/ 任一/ 被/ 选中/ 节点/ 的/ 服务器/ j/ 都/ 有/ 运行/ 成本/ fs/ 开销/ 和/ 购买/ 入网/ 带宽/ 等/ 边际/ 开销/ 构成/ ./ 用户/ i/ 与/ 服务器/ j/ 的/ 连接/ 成本/ 表示/ 为/ 用户/ 到/ 为/ 其/ 提供/ 服务/ 的/ 服务器之间/ 的/ 距离/ dij/ ./ 模型/ MFLM/ 的/ 优化/ 目标/ 是/ 在/ 保证/ 性能/ 的/ 前提/ 下/ ,/ 最小化/ 系统/ 开销/ :/ 式/ 中/ 前者/ 表示/ 从/ CSDN/ 物理/ 服务器/ 网络/ 选择/ 服务器/ 构建/ SDAN/ 逻辑/ 子/ 服务器/ 网络/ 引起/ 的/ 运行/ 成本/ ,/ 后者/ 表示/ CSDN/ 系统/ 运行/ 的/ 边际/ 成本/ ./ 该/ 目标/ 的/ 物理/ 含义/ 是/ ,/ 给定/ 带宽/ 资源/ 、/ 内存/ 资源/ 和/ 用户/ 需求/ 的/ 情况/ 下/ ,/ 尽量/ 用/ 较/ 近/ 的/ 资源/ 服务/ 用户/ ./ MFLM/ 引入/ 内存/ 作为/ 新/ 的/ 瓶颈/ 参数/ 是/ 指/ ,/ 即使/ 带宽/ 资源/ 仍/ 有/ 剩余/ ,/ 只要/ 现有/ 内存大小/ 比/ 热点/ 文件/ 小/ ,/ CSDN/ 服务器/ 节点/ 也/ 会/ 拒绝/ 当前/ 用户/ 访问/ 某/ 文件/ 的/ 请求/ ./ 然后/ 选择/ 将/ 用户/ 请求/ 重定向/ 至离/ 用户/ 次近/ 的/ 服务器/ 节点/ ,/ 并/ 将/ 用户/ 所/ 访问/ 的/ 热点/ 内容/ 以/ 推/ 的/ 方式/ 部署/ 到/ 该/ 节点/ 的/ 内存/ 中/ ,/ 即/ 分配/ 服务器/ 带宽/ 资源/ 和/ 内存/ 资源/ ./ SDAN/ 逻辑/ 子/ 网络/ 有/ 其/ 特殊性/ ,/ 与/ 另外/ 两类/ 业务/ 相比/ ,/ 该类/ 业务/ 的/ 多用户/ 间/ 可/ 采取/ P2P/ 的/ 方式/ 降低/ 对/ 服务器/ 的/ 资源/ 需求/ ./ 如图/ 3/ 所示/ ,/ SDAN/ 可/ 采用/ 用户/ 辅助/ 的/ 模式/ 进行/ 内容/ 分发/ ,/ 而/ CAN/ 和/ DAN/ 的/ 服务/ 分发/ 则/ 多/ 采用/ C/ // S/ 模式/ ./ 考虑/ 到/ SDAN/ 进行/ 内容/ 分发/ 可/ 采用/ P2P/ 模式/ 的/ 特殊性/ ,/ 我们/ 假设/ 某/ CSDN/ 节点/ lt/ 处/ k/ 个/ 用户/ 中有/ t/ 个/ 用户/ ,/ 其中/ 0/ </ t/ </ k/ +/ 1/ ,/ 分别/ 具有/ 不同/ 的/ 上载/ 能力/ ρ/ 1/ ,/ ρ/ 2/ ,/ …/ ,/ ρ/ t/ ,/ 则/ 在/ 大量/ 用户/ 发出请求/ 时/ ,/ 用户/ 对/ 服务器/ 的/ 带宽/ 资源/ 需求/ 并/ 不会/ 随着/ 用户/ 需求/ 的/ 上升/ 而/ 上升/ ./ 假设/ 此时/ 内存/ 资源/ 和/ 带宽/ 资源/ 一样/ 按/ 比例/ 降低/ ,/ 则/ lt/ 处/ 的/ 需求/ 则/ 变为/ 鉴于/ 文献/ [/ 21/ -/ 22/ ]/ 等/ 认为/ 资源/ 满足用户/ 需求/ 即/ 代表/ 云/ 服务/ 传递/ 质量/ 有/ 保障/ ,/ 因此/ 我们/ 可/ 得到/ 如下/ 有关/ 性能/ 和/ 开销/ 的/ 一种/ 折衷/ ,/ 即/ MFLM/ 的/ 目标/ 函数/ :/ Peer/ 辅助/ 方式/ 对/ 多/ 内存/ 协同/ 的/ 影响/ 等/ 见/ 算法/ 2/ ./ 如何/ 采用/ Peer/ 辅助/ 的/ 方式/ 进行/ 服务器/ 选择/ 和/ 算法/ 2/ ./ Peer/ 辅助/ 服务/ 选择/ 算法/ ./ 1/ ./ For/ / lj/ ∈/ L/ ,/ whileL/ =/ {/ l1/ ,/ l2/ ,/ …/ ,/ lT/ }/ 2/ ./ AnalyzeandrankthehotfileF/ ;/ 3/ ./ Foreachhotfilefj/ ,/ i/ =/ 1/ ,/ 2/ ,/ …/ ,/ |/ F/ |/ withde/ -/ 4/ ./ Givenhot/ (/ fj/ )/ ,/ size/ (/ fj/ )/ andhot/ _/ thred/ ;/ 5/ ./ If/ (/ hot/ (/ fj/ )/ >/ hot/ _/ thred/ )/ 6/ ./ Theusersaccessingfjwithnumberof7/ ./ Computingthebandwidthreducedby8/ ./ Thecachereducedby/ Δ/ ci9/ ./ nj/ =/ nj/ -/ Δ/ ni10/ ./ Else11/ ./ Stopandcheckwhethermulti/ -/ cachecoordi/ -/ 12/ ./ EndIf13/ ./ Observetheparametersofhot/ _/ thred/ ,/ ρ/ and/ λ/ ac/ -/ 14/ ./ EndFor15/ ./ EndFor/ 算法/ 2/ 的/ 第/ 2/ 行/ 首先/ 对/ 热点/ 文件/ 进行/ 了/ 分析/ ,/ 以/ 当前/ CSDN/ 服务器/ 节点/ lj/ 为/ 研究/ 对象/ ,/ 统计/ 出/ 某个/ 时间/ 窗口/ 内/ 不同/ 热点/ 文件/ 的/ 访问/ 用户数/ ./ 第/ 3/ 行将/ 所有/ 热点/ 文件/ 按/ 其/ 访问/ 用户数/ (/ 热度/ )/ 降序/ 排列/ ,/ 第/ 4/ 行/ 给出/ 了/ 其中/ 某/ 热点/ 文件/ 的/ 热度/ 、/ 该/ 文件/ 的/ 大小/ 以及/ 当前/ 文件/ 热度/ 的/ 阈值/ 等/ ./ 第/ 5/ 、/ 6/ 行/ 首先/ 判断/ 热点/ 文件/ 的/ 热度/ 是否/ 超过/ 热度/ 阈值/ ,/ 然后/ 使/ 热点/ 文件/ fj/ 的/ 所有/ 用户/ 相互/ 共享/ 彼此/ 拥有/ 的/ 内容/ 形成/ P2P/ 覆盖网/ ./ 第/ 7/ 、/ 8/ 行/ 计算/ 所有/ 请求/ 访问/ 文件/ fj/ 的/ 用户/ 在/ 采用/ P2P/ 方式/ 后/ 对/ 带宽/ 资源/ 需求/ 的/ 降低/ 量/ j/ 和/ 缓存/ 资源/ 需求/ 的/ 降低/ 量/ Δ/ ci/ Δ/ ni/ 热点/ 文件/ fj/ 所有/ 用户/ 的/ 平均/ 上载/ 能力/ ./ 算法/ 2/ 的/ 第/ Page99/ 行/ 和/ 参数/ hot/ _/ thred/ 的/ 调整/ 可/ 影响/ 算法/ 1/ 中多/ 内存/ 协同/ 的/ 临界/ 条件/ ./ 同/ 算法/ 1/ 一致/ ,/ 该/ 分布式/ 算法/ 的/ 时间/ 复杂度/ 取决于/ 对/ 针对/ 热点/ 文件/ 构造/ P2P/ 覆盖/ 网络/ 的/ 处理/ ,/ 显然/ 其/ 时间/ 复杂度/ 与/ 集合/ F/ 中/ 的/ 文件/ 数/ |/ F/ |/ 相关/ ./ 因此/ 算法/ 2/ 的/ 时间/ 复杂度/ 为/ O/ (/ |/ F/ |/ ×/ |/ Fu/ |/ )/ ,/ 其中/ |/ Fu/ |/ 表示/ 需要/ 进行/ 内存/ 协同/ 的/ 低/ 热度/ 文件/ 的/ 用户数/ ./ 5/ 性能/ 分析/ 本/ 节/ ,/ 我们/ 提出/ 了/ 评估/ MFLM/ 启发式/ 算法/ 的/ 性能指标/ 和/ 性能/ 分析模型/ ,/ 并/ 对/ MFLM/ 求解/ 算法/ 的/ 性能/ 进行/ 了/ 全面/ 的/ 评估/ 分析/ ./ 5.1/ 性能指标/ 和/ 分析模型/ 为了/ 建立/ MFLM/ 性能/ 分析/ ,/ 我们/ 需要/ 建立/ 包含/ CSDN/ 服务器/ 节点/ 集合/ 、/ 每个/ 节点/ 内存/ 资源/ 、/ 可/ 进行/ 内存/ 资源/ 协同/ 的/ 邻近/ CSDN/ 节点/ 集合/ 、/ 本地/ 缓存/ 命中/ 访问/ 连接/ 延迟/ 、/ 本地/ 缓存/ 不/ 命中/ 访问/ 延迟/ 、/ 访问/ 邻近/ CSDN/ 节点/ 缓存/ 命中/ 内容/ 的/ 延迟/ 和/ 文件/ 热度/ 分布/ 等/ 多/ 参数/ 的/ 分析模型/ ./ 模型/ 假设/ 与/ 当前/ 节点/ 邻近/ 的/ 可/ 进行/ 内存/ 协同/ 的/ CSDN/ 服务器/ 节点/ 有/ m/ -/ 1/ 个/ ./ 由于/ P2P/ 分发/ 系统/ 一般/ 将/ 待/ 分发/ 文件/ 分割/ 为/ 大小/ 相等/ 的/ 文件/ 片段/ ,/ 不失/ 一般性/ 本文/ 假设/ 此类/ 待/ 传递/ 的/ 热点/ 内容/ 由/ N/ 个/ 热度/ 服从/ MandelbrotZipf/ 分布/ f/ (/ i/ )/ [/ 23/ ]/ 的/ 文件/ 片段/ 组成/ ./ 并且/ 对于/ 任意/ CSDN/ 节点/ 而言/ ,/ 热点/ 文件/ 的/ 热度/ 分布/ 均/ 一致/ ./ 每个/ 节点/ 内存/ 资源/ 的/ 缓存/ 能力/ 为/ k/ 个/ 文件/ 片段/ ./ 其中/ 一个/ 用户/ 从/ 其/ 所属/ 本地/ CSDN/ 节点/ 内存/ 中/ 获取/ 单位/ 热点/ 内容/ 的/ 访问/ 延迟/ 和/ 缓存/ 不/ 命中/ 的/ 访问/ 延迟/ 分别/ 为/ lcache/ 和/ lcache/ +/ ldisk/ ./ 如果/ 用户/ 所/ 访问/ 的/ 热点/ 内容/ 本地/ 缓存/ 不/ 命中/ ,/ 则/ 依据/ MFLM/ 算法/ 用户/ 以/ 1/ // m/ 的/ 概率/ 从/ 其/ 邻近/ m/ -/ 1/ 个/ CSDN/ 节点/ 中/ 任意/ 一个/ 的/ 缓存/ 中/ 下载/ ,/ 且/ 从/ 邻近/ CSDN/ 节点/ 缓存/ 中/ 下载/ 内容/ 的/ 延迟/ 统一/ 设置/ 为/ lcache/ +/ ecache/ ,/ 同时/ ,/ 不失/ 一般性/ ,/ 本文/ 假设/ ldisk/ >/ ecache/ ./ MFLM/ 启用/ P2P/ 机制/ 后/ ,/ 分析模型/ 中/ 做/ 如下/ 假设/ :/ 首先/ ,/ 可/ 进行/ 内存/ 协同/ 的/ m/ 个/ CSDN/ 节点/ 中/ 热度/ 排名/ 前/ M/ 的/ 文件/ 的/ 所有/ 用户/ 进行/ P2P/ ,/ 根据/ 前面/ 的/ 假设/ 每个/ CSDN/ 中/ 可/ 进行/ P2P/ 的/ 热点/ 文件/ 的/ 概率/ 同样/ 也/ 为/ 1/ // m/ ;/ 其次/ ,/ 在/ 高/ 热度/ 文件/ 采用/ P2P/ 后/ ,/ 热度/ 排名/ 次序/ 紧邻在/ mk/ 之后/ 的/ M/ 个/ 热点/ 文件/ 同理/ 也/ 将/ 以/ 1/ // m/ 的/ 概率/ 分别/ 缓存/ 在/ m/ 个/ CSDN/ 服务器/ 节点/ 的/ 内存/ 中/ ,/ 同时/ M/ +/ mk/ </ N/ ;/ 文献/ [/ 21/ -/ 22/ ]/ 等/ 研究/ 表明/ 云/ 服务/ 的/ 传递/ 质量/ 与/ 用户/ 访问/ 延迟/ 之间/ 具有/ 一定/ 的/ 负相关/ 关系/ ./ 因此/ 本文/ 将/ 获取/ 云/ 服务/ 传递/ 中/ 各种因素/ 产生/ 的/ 用户/ 访问/ 延迟/ 作为/ 衡量/ 服务质量/ 的/ 指标/ ./ 性能/ 分析/ 的/ 目的/ 是/ 分析/ 采用/ MFLM/ 算法/ 后/ 对/ 云/ 服务/ 传递/ 性能/ 的/ 提高/ ,/ 即/ 采用/ MFLM/ 算法/ 后/ 所/ 降低/ 的/ 用户/ 访问/ 延迟/ ./ 用/ Dsingle/ 表示/ 未/ 使用/ 多/ CSDN/ 节点/ 内存/ 资源/ 协同/ 的/ 用户/ 访问/ 总/ 延迟/ ,/ 由于/ 单个/ CSDN/ 节点/ 的/ 缓存/ 能力/ 是/ k/ 个/ 文件/ 片段/ ,/ 则/ 即/ 所有/ 超过/ 本地/ CSDN/ 节点/ 缓存/ 能力/ 的/ 文件/ 均/ 为/ 缓存/ 不/ 命中/ ,/ 与/ 所有/ 访问/ 均/ 缓存/ 命中/ 的/ 情况/ 相比/ ,/ 会/ 额外/ 多/ 引入/ ldisk/ ∑/ N/ 机制/ 的/ 情况/ 下/ 采用/ 多/ CSDN/ 节点/ 内存/ 协同/ 意味着/ ,/ mk/ 个/ 热点/ 文件/ 本地/ 缓存/ 命中/ 的/ 概率/ 为/ 1/ // m/ ,/ 从/ 其它/ m/ -/ 1/ 个/ CSDN/ 节点/ 中/ 缓存/ 命中/ 的/ 概率/ 为/ m/ -/ 1/ // m/ ./ 用/ Dmulti/ 表示/ 此种/ 情况/ 下/ 所/ 需/ 的/ 用户/ 访问/ 总/ 延迟/ ,/ 则/ Dmulti/ =/ lcache/ ∑/ N/ 由于/ MFLM/ 包含/ 多/ CSDN/ 节点/ 内存/ 协同/ 和/ P2P/ 机制/ ,/ 且/ 定义/ 文件/ 热度/ 阈值/ fthred/ ,/ 在/ 文件/ 热度/ 高于/ 该/ 热度/ 阈值/ 时/ ,/ 系统启动/ P2P/ 机制/ ./ 假设/ 采用/ P2P/ 的/ 热点/ 文件/ 为/ M/ 个/ ,/ 且/ 这/ M/ 个/ 文件/ 原来/ 均匀分布/ 于/ m/ 个/ CSDN/ 节点/ ./ 在/ M/ 个/ 文件/ 采用/ P2P/ 之后/ ,/ 另外/ M/ 个/ 未/ 在/ 任何/ 内存/ 中/ 缓存/ 的/ 剩余/ 热点/ 文件/ 将/ 以/ 1/ // m/ 的/ 概率/ 分别/ 缓存/ 于/ m/ 个/ 内存/ 中/ ,/ 用/ Dmulti/ -/ P2P/ 表示/ 采用/ P2P/ 机制/ 后/ 所/ 节省/ 的/ 总/ 延迟/ ,/ 则/ Dmulti/ -/ P2P/ =/ lcache/ ∑/ Ni/ =/ M/ +/ 1/ 当/ M/ =/ 0/ 时/ ,/ Dmulti/ -/ P2P/ =/ Dmulti/ ./ 根据/ 系统/ 实际/ 的/ 运行/ 情况/ 和/ 经验/ ,/ 可知/ M/ </ N/ -/ mk/ ./ 用/ Gainmulti/ -/ P2P/ =/ (/ Dsingle/ -/ Dmulti/ -/ P2P/ )/ // Dsingle/ 表示/ 采用/ 多/ 内存/ 协同/ 和/ P2P/ 机制/ 后/ 所/ 节省/ 的/ 用户/ 访问/ 总/ 延迟/ 比率/ ,/ 则/ Gainmulti/ -/ P2P/ =/ lcache/ ∑/ M/ 与/ 其它/ 延迟/ ldisk/ 和/ ecache/ 相比/ ,/ lcache/ 的/ 值/ 相对/ 较/ 小/ ,/ 因此/ 为了/ 简化/ 上述/ 方程式/ ,/ 我们/ 将/ lcache/ 设置/ 为/ Page100/ ,/ 定义/ θ/ =/ ecache/ // ldisk/ ,/ 其中/ 有关/ fi/ 的/ 定义/ 可/ 参见/ 式/ (/ 4/ )/ 中/ hot/ (/ fi/ )/ ,/ 则/ Gainmulti/ -/ P2P/ =/ ∑/ mk/ +/ M/ 进一步/ 定义/ F/ (/ x/ ,/ y/ )/ =/ ∑/ yGainmulti/ -/ P2P/ =/ F/ (/ k/ +/ 1/ ,/ mk/ +/ M/ )/ -/ θ/ m/ -/ 15.2/ 性能/ 评估/ 5.2/ ./ 1/ 实际/ 系统/ 的/ 日志/ 数据/ 根据/ 相关/ 研究/ [/ 19/ ,/ 23/ ]/ ,/ 我们/ 认为/ SDAN/ 逻辑/ 子/ 服务器/ 网络/ 中/ 可/ P2P/ 的/ 大/ 文件/ 和/ 视频/ 等/ 热点/ 文件/ 服从/ MandelbrotZipf/ 分布/ ./ 文献/ [/ 19/ ]/ 以/ 被动/ 测量/ 的/ 方法/ 针对/ Gnutella/ 文件共享/ 系统/ 进行/ 了/ 为期/ 8/ 个/ 月/ 的/ 测量/ ./ Gnutella/ 中有/ 两类/ 结点/ :/ 超/ 结点/ 和/ 叶/ 结点/ ./ 测量/ 中/ 部署/ 了/ 一个/ 超级/ 结点/ ,/ 并/ 使/ 其/ 并发/ 连接数/ 达到/ 500/ ,/ 其中/ 约/ 350/ 个/ 连接/ 为/ 超级/ 结点/ 间/ 的/ 连接/ ./ 同时/ 350/ 个/ 超级/ 结点/ 中/ 每个/ 结点/ 平均/ 可/ 连接/ 10/ 个/ 超级/ 结点/ ./ 以此类推/ ,/ 收集/ 7/ 跳/ 以内/ 路由/ 所/ 覆盖/ 的/ 所有/ 用户/ 的/ 流量/ ./ 并/ 从/ 数千/ 自治/ 域/ 中/ 挑选出/ 9/ 个/ 自治/ 域/ 作为/ 研究/ 对象/ ,/ 分析/ 了/ P2P/ 系统/ 中/ 文件/ 热度/ 的/ 概率密度/ 分布/ 服从/ MandelbrotZipf/ 分布/ ./ 本文/ 以/ 某/ 代表性/ 自治/ 域/ 中/ 热点/ 文件/ 的/ 概率密度/ 分布/ Mzipf/ (/ 4/ ,/ 0.78/ )/ (/ 分布/ 参数/ q/ =/ 4/ ,/ s/ =/ 0.74/ )/ 为/ 后续/ 性能/ 评估/ 分析/ 的/ 依据/ ,/ 如图/ 4/ 所示/ ./ 并/ 给出/ 了/ 在/ q/ 取/ 不同/ 值时/ MandelbrotZipf/ 分布/ 的/ 变化趋势/ ./ 后续/ 算法/ 评估/ 分析/ 中将/ 以/ Gnutella/ 该/ 实际/ 数据/ 为/ 输入/ ,/ 分析/ 式/ (/ 17/ )/ 中/ 采用/ 多/ CSDN/ 节点/ 内存/ 协同/ 和/ 采用/ P2P/ 对/ 访问/ 开销/ 的/ 影响/ ./ 对于/ 不同/ CSDN/ 节点/ 间/ 延迟/ ,/ CDN/ 实验室/ ①/ 通过/ NetClust/ 工具/ ,/ 对/ 约/ 6/ 万/ ~/ 12/ 万/ 在线/ 用户/ (/ 电信/ 用户/ 占约/ 60/ %/ ,/ 教育网/ 用户/ 约/ 33/ %/ ,/ 其它/ 网络/ 运营商/ 用户/ 约/ 为/ 7/ %/ )/ 进行/ 了/ 抽样/ 测量/ ./ 测量/ 时间/ 为/ 2010/ 年/ 5/ 月/ 18/ 日/ ~/ 5/ 月/ 26/ 日/ ,/ 并/ 从/ 5GB/ 监控/ 数据分析/ 了/ 周末/ 和/ 非/ 周末/ 时间/ 某/ CSDN/ 节点/ 到/ 其它/ CSDN/ 节点/ 间/ 的/ 网络/ 延迟/ ./ 图/ 5/ 为/ 一次/ 覆盖/ 全/ 中国/ 31/ 个省/ 、/ 直辖市/ 和/ 自治区/ 的/ CSDN/ 节点/ 间/ 延迟/ 的/ 测量/ ,/ 其中/ 某/ CSDN/ 节点/ 与/ 其它/ 节点/ 间/ 延迟/ 小于/ 120ms/ 的/ 仅/ 为/ 个位数/ ./ 5.2/ ./ 2/ 参数设置/ 和/ 性能/ 分析/ 在/ 如下/ 性能/ 评估/ 分析/ 中/ ,/ CSDN/ 节点/ 数/ 设置/ 为/ 300/ ./ 依据/ 中国/ 互联网/ 中/ 不同/ CSDN/ 节点/ 间/ 的/ 网络/ 延迟/ ,/ 将/ 可/ 进行/ 内存/ 协同/ 的/ 节点/ 数/ 设置/ 为/ 4/ ./ 根据/ 文献/ [/ 13/ ]/ ,/ 外部/ 缓存/ 命中/ 访问/ 延迟/ 和/ 本地/ 缓存/ 不/ 命中/ 访问/ 延迟/ 的/ 比例/ θ/ 为/ 0.3/ ,/ 并/ 可/ 在/ 合理/ 范围/ 变动/ ./ 热点/ 文件/ 总/ 个数/ 为/ N/ ,/ 而/ 每个/ 节点/ 的/ 内存/ 可/ 缓存/ 的/ 内容/ 占/ 热点/ 文件/ 总数/ 的/ 比例/ 为/ 0.2/ ./ 我们/ 在/ 基于/ 实际/ 系统/ 运行/ 数据/ 对/ MFLM/ 启发式/ 求解/ 算法/ 进行/ 全面/ 评估/ 分析/ 时/ ,/ 考虑/ 一次/ 只/ 变动/ 一个/ 参数/ ,/ 假设/ 其它/ 参数均/ 已/ 设置/ 了/ 合理/ 值/ ./ 图/ 6/ (/ a/ )/ 为/ 不/ 使用/ P2P/ 机制/ 且/ q/ 分别/ 取值/ 4/ ,/ 14/ ,/ 24/ ,/ s/ 在/ 区间/ [/ 0.2/ ,/ 1/ ]/ 内/ 变化/ 时/ 节约/ 的/ 访问/ 延迟/ 比率/ ./ 其中/ Gainmulti/ -/ P2P/ 随/ s/ 增大/ 而/ 降低/ ,/ 且/ q/ 取值/ 越大/ 降低/ 的/ 速度/ 越慢/ ;/ 图/ 6/ (/ b/ )/ 为/ 不/ 使用/ P2P/ 机制/ 且/ s/ 分别/ 取值/ 0.2/ ,/ 0.4/ ,/ 0.6/ ,/ q/ 在/ 区间/ [/ 0/ ,/ 100/ ]/ 内/ 变化/ 时/ 节约/ 的/ 访问/ 延迟/ 比率/ ./ 其中/ Gainmulti/ -/ P2P/ 随/ q/ 增大/ 而/ 增大/ ,/ 且/ s/ 越大/ 变化/ 越/ 剧烈/ ./ 图/ 6/ (/ c/ )/ 为/ 使用/ P2P/ 机制/ 且/ q/ 分别/ 取值/ 4/ ,/ 14/ ,/ 24/ ,/ s/ 在/ 区间/ [/ 0.2/ ,/ 1/ ]/ 内/ 变化/ 时/ 节约/ 的/ 访问/ 延迟/ 比率/ ./ 与/ 图/ 6/ (/ a/ )/ 相比/ ,/ 图/ 6/ (/ c/ )/ 为/ 使用/ P2P/ 机制/ (/ M/ 取值/ 为/ 0.1/ N/ )/ 后/ ,/ Gainmulti/ -/ P2P/ 增加/ 幅度/ 特别/ 大/ ,/ 随着/ s/ 值/ 的/ 增大/ 而/ 增大/ ,/ 对/ q/ 值/ 的/ 影响/ ①/ CDNResearchInstitute/ ./ http/ :/ // // lab/ ./ cdnlab/ ./ org/ // Page11/ 不是/ 非常/ 敏感/ ,/ 并且/ 系统/ 的/ 整体/ 性能/ 在/ 采用/ P2P/ 机制/ 后/ 有/ 较/ 大幅度提高/ 的/ 访问/ 延迟/ 比率/ ./ 图/ 6/ (/ d/ )/ 为/ 使用/ P2P/ 机制/ 且/ s/ 分别/ 取值/ 0.2/ ,/ 0.4/ ,/ 0.6/ ,/ q/ 在/ 区间/ [/ 0/ ,/ 24/ ]/ 内/ 变化/ 时/ 节约/ 的/ 访问/ 延迟/ 比率/ ./ 图中/ 采用/ P2P/ 机制/ 后/ s/ 取值/ 越大/ ,/ 系统/ 性能/ 越/ 好/ ,/ 即/ s/ 取值/ 为/ 0.6/ 时比/ s/ 取值/ 为/ 0.2/ 时/ 系统/ 的/ 性能/ 约/ 高出/ 4/ 个/ 百分点/ ,/ 并且/ 与/ 图/ 6/ (/ c/ )/ 反映/ 出/ 的/ 规律/ 一致/ :/ 系统/ 性能/ 的/ 提高/ 受/ q/ 值/ 的/ 变化/ 影响/ 不大/ ./ 同理/ 与/ 图/ 6/ (/ b/ )/ 相比/ ,/ 图/ 6/ (/ d/ )/ 使用/ P2P/ 机制/ 后/ ,/ 系统/ 性能/ 约/ 有/ 20/ 个/ 百分点/ 的/ 提高/ ./ 图/ 7/ (/ a/ )/ 为/ 未/ 使用/ P2P/ 机制/ 且/ q/ 和/ s/ 分别/ 取/ 特定/ 值时/ 节约/ 的/ 访问/ 延迟/ 比率/ 与/ θ/ 的/ 关系/ ./ 图/ 7/ (/ b/ )/ 为/ 使用/ 图/ 6/ 在/ q/ 和/ s/ 变化/ 时/ 使用/ 和/ 不/ 使用/ P2P/ 所/ 节约/ 的/ 访问/ 延迟/ 比率/ 图/ 7/ 在/ θ/ 变化/ 时/ 使用/ 和/ 不/ 使用/ P2P/ 所/ 节约/ 的/ 访问/ 延迟/ 比率/ P2P/ 机制/ 且/ q/ 和/ s/ 分别/ 取/ 特定/ 值时/ 节约/ 的/ 访问/ 延迟/ 比率/ 与/ θ/ 的/ 关系/ ./ 通过/ 分析/ 图/ 7/ (/ a/ )/ 中/ Gainmulti/ -/ P2P/ 随/ θ/ 变化/ 的/ 规律/ 可知/ ,/ 外部/ 缓存/ 命中/ 访问/ 延迟/ 和/ 本地/ 缓存/ 不/ 命中/ 访问/ 延迟/ θ/ 越大/ ,/ 多/ 内存/ 协同/ 带来/ 的/ 延迟/ 降低/ 就/ 越/ 小/ ,/ 尤其/ 是/ θ/ 在/ 超过/ 0.5/ 之后/ 多/ 内存/ 协同/ 几乎/ 不会/ 给/ 系统/ 性能/ 带来/ 任何/ 提升/ ./ 与/ 图/ 7/ (/ a/ )/ 相比/ ,/ 图/ 7/ (/ b/ )/ 在/ 此基础/ 上/ 启用/ 了/ P2P/ 机制/ ,/ 两者/ 主要/ 的/ 不同/ 在于/ 所/ 节约/ 的/ 访问/ 延迟/ 比率/ 的/ 程度/ 不同/ ./ 后者/ 在/ q/ 和/ s/ 取/ 特定/ 值时/ ,/ 带来/ 的/ 系统/ 性能/ 提升/ 在/ 20/ %/ ~/ 80/ %/ 之间/ ,/ 并且/ s/ 和/ q/ 值/ 的/ 微小/ 变化/ 对系统/ 性能/ 的/ 提升/ 几乎/ 没有/ 影响/ ./ Page12/ 图/ 8/ (/ a/ )/ 为/ 未/ 使用/ P2P/ 机制/ ,/ s/ =/ 0.74/ 和/ θ/ 分别/ 取/ 特定/ 值时/ 节约/ 的/ 访问/ 延迟/ 比率/ 与/ θ/ 的/ 关系/ ./ 图/ 8/ (/ a/ )/ 中/ Gainmulti/ -/ P2P/ 随着/ q/ 值/ 的/ 增大/ 而/ 略有/ 增大/ ,/ 且/ q/ 越大/ Gainmulti/ -/ P2P/ 越小/ ./ 图/ 8/ (/ b/ )/ 为/ 使用/ P2P/ 机制/ ,/ s/ =/ 0.74/ 和/ θ/ 分别/ 取/ 特定/ 值时/ 节约/ 的/ 访问/ 延迟/ 比率/ 与/ θ/ 的/ 关系/ ./ 图/ 8/ (/ b/ )/ 在/ 图/ 9/ (/ a/ )/ 基础/ 上/ 启用/ 了/ P2P/ 机制/ ,/ 整体/ 上/ 对/ Gainmulti/ -/ P2P/ 的/ 贡献/ 增大/ 了/ ,/ 但/ 在/ P2P/ 机制/ 启用/ 后/ 基本/ 对/ q/ 的/ 变化/ 没有/ 影响/ ,/ 且/ θ/ 值越/ 小图/ 8/ 在/ q/ 和/ s/ 变化/ 时/ 使用/ 和/ 不/ 使用/ P2P/ 所/ 节约/ 的/ 访问/ 延迟/ 比率/ 通过/ 上述/ 评估/ 分析/ 可知/ :/ 在/ 仅/ 采用/ 多/ CSDN/ 节点/ 内存/ 协同/ 方法/ 的/ 前提/ 下/ ,/ Gainmulti/ -/ P2P/ 与/ 参数/ s/ 具有/ 一定/ 的/ 反比/ 关系/ 和/ 高/ 相关度/ ,/ 与/ 参数/ q/ 具有/ 一定/ 的/ 正比/ 关系/ 和/ 低/ 相关度/ ;/ 采用/ P2P/ 机制/ 对/ 解决/ 内存/ 瓶颈/ 方面/ 效果/ 十分/ 明显/ ,/ 但/ 与/ 参数/ θ/ 成反比/ ;/ 同时/ ,/ 外部/ 缓存/ 命中/ 访问/ 延迟/ 和/ 本地/ 缓存/ 不/ 命中/ 访问/ 延迟/ 之比越/ 大/ ,/ 多/ 内存/ 协同/ 效果/ 就/ 越/ 小/ ,/ 而且/ 对/ s/ 变化/ 敏感度/ 随/ θ/ 值/ 增大/ 而/ 增大/ ./ 该/ 评估/ 分析/ 结果/ 验证/ 了/ MFLM/ 算法/ 对/ CSDN/ 中/ SDAN/ 逻辑/ 子/ 服务器/ 网络/ 即/ 资源/ 动态分配/ 的/ 效果/ ,/ 并且/ 多/ 邻近/ CSDN/ 节点/ 内存/ 协同/ 和/ P2P/ 机制/ 是/ SDAN/ 整体/ 性能/ 提升/ 的/ 两个/ 主要/ 因素/ ./ 也/ 是/ 针对/ SDAN/ 特例/ 求解/ MFLM/ 模型/ 算法/ 中/ 的/ 两个/ 核心/ 问题/ ./ 同时/ 性能/ 评估/ 分析/ 通过/ 评估/ q/ ,/ s/ 和/ θ/ 等/ 参数/ 变化/ (/ 即/ 需求/ 变化/ )/ 情况/ 下/ ,/ MFLM/ 求解/ 方法/ 的/ 有效性/ ,/ 从/ 一定/ 程度/ 上/ 间接/ 说明/ 了/ 多/ 邻近/ CSDN/ 节点/ 内存/ 协同/ 和/ P2P/ 机制/ 对于/ 解决/ 复杂/ 的/ MFLM/ 问题/ 具有/ 一定/ 的/ 普适性/ ./ Gainmulti/ -/ P2P/ 越大/ ./ 图/ 8/ (/ c/ )/ 为/ 未/ 使用/ P2P/ 机制/ ,/ q/ =/ 4/ 和/ θ/ 分别/ 取/ 特定/ 值时/ 节约/ 的/ 访问/ 延迟/ 比率/ 与/ s/ 的/ 关系/ ./ 其中/ Gainmulti/ -/ P2P/ 随着/ s/ 值/ 的/ 增大/ 而/ 略有/ 减小/ ,/ 且/ θ/ 越大/ Gainmulti/ -/ P2P/ 越小/ ./ 图/ 8/ (/ d/ )/ 为/ 使用/ P2P/ 机制/ 且/ θ/ 和/ q/ 分别/ 取/ 特定/ 值时/ 节约/ 的/ 访问/ 延迟/ 比率/ 与/ s/ 的/ 关系/ ./ 图/ 8/ (/ d/ )/ 在/ 图/ 8/ (/ c/ )/ 基础/ 上/ 启用/ 了/ P2P/ 机制/ ,/ 整体/ 上/ 对/ Gainmulti/ -/ P2P/ 的/ 贡献/ 增大/ 了/ ;/ 并且/ 在/ P2P/ 机制/ 启用/ 后/ 对/ s/ 变化/ 敏感度/ 随/ θ/ 值/ 增大/ 而/ 增大/ ./ 6/ 总结/ 及/ 展望/ 云/ 服务/ 传递/ 网络/ CSDN/ 以/ 就近/ 和/ 按/ 需/ 的/ 方式/ 向/ 用户/ 提供/ 云/ 传递/ 服务/ ./ 由于/ CSDN/ 覆盖/ 不同/ 类型/ 业务/ 的/ 传递/ ,/ 因此/ 其/ 物理/ 服务器/ 网络/ 被/ 划分/ 为/ 针对/ 缓存/ 类/ 应用/ 、/ 流媒体/ 和/ 下载/ 应用/ 以及/ 动态/ 应用/ 等/ 多种不同/ 类型/ 业务/ 的/ 逻辑/ 子/ 服务器/ 网络/ ./ 不同/ 类型/ 业务/ 资源/ 需求/ 特点/ 各不相同/ ,/ 其中/ 用于/ 流媒体/ 和/ 下载/ 类云/ 服务/ 传递/ 的/ 逻辑/ 子/ 服务器/ 网络/ SDAN/ ,/ 消耗/ 了/ CSDN/ 的/ 大部分/ 资源/ ./ 与/ 动态/ 应用/ 类/ 业务/ 不同/ :/ SDAN/ 中/ 内存/ 资源/ 是/ 除/ 带宽/ 资源/ 之外/ 的/ 另/ 一种/ 瓶颈/ 资源/ ,/ 而/ 动态/ 应用逻辑/ 子/ 服务器/ 网络/ DAN/ 中/ 计算/ 和/ 带宽/ 资源/ 是/ 瓶颈/ ;/ 与/ DAN/ 中/ 内容/ 需要/ 回源/ [/ 2/ ]/ 不同/ ,/ SDAN/ 中/ 内容/ 具有/ 可/ P2P/ 的/ 特性/ ./ 本文/ 重点/ 研究/ 和/ 解决/ 该/ 类型/ 云/ 服务/ 传递/ 的/ 资源/ 动态分配/ 问题/ ./ 因此/ 根据/ 该/ 类型/ 业务/ 内存/ 资源/ 和/ 带宽/ 资源/ 同为/ Page13/ 瓶颈/ 资源/ 以及/ 该/ 类型/ 热点/ 内容/ 可/ 采用/ P2P/ 机制/ 的/ 两个/ 特点/ ,/ 我们/ 将/ 该/ 问题/ 建模/ 为/ 多维/ 设备/ 选址/ 模型/ ./ 在/ 对/ 该/ 模型/ NP/ 完全性/ 分析/ 的/ 基础/ 上/ ,/ 提出/ 了/ 一种/ 针对/ SDAN/ 特例/ 的/ 启发式/ 求解/ 算法/ ,/ 并/ 对/ MFLM/ 求解/ 算法/ 的/ 有效性/ 进行/ 了/ 全面/ 的/ 评估/ 分析/ ./ 服务器资源/ 动态分配/ 问题/ 一直/ 都/ 是/ 学术界/ 研究/ 的/ 重点/ 和/ 难点/ ,/ 未来/ 围绕/ 该/ 问题/ 我们/ 将/ 对/ 如下/ 几个/ 基本/ 问题/ 展开/ 研究/ :/ (/ 1/ )/ 互联网/ 业务/ 用户/ 访问/ 请求/ 分布/ 和/ 流量/ 行为/ 统计/ 特点/ ;/ (/ 2/ )/ 互联网/ 多种类型/ 业务/ 的/ 分类/ 方法/ 和/ 分类/ 结果/ ;/ (/ 3/ )/ 在/ 上述/ 两点/ 研究/ 结果/ 的/ 基础/ 上/ ,/ 研究/ 针对/ 不同/ 类型/ 业务/ 间/ 服务器资源/ 的/ 动态分配/ 问题/ ./ 致谢/ 作者/ 在/ 此/ 感谢/ 为/ 本文/ 贡献/ 有/ 价值/ 思路/ 、/ 讨论/ 和/ 数据/ 的/ 各位/ 专家/ 及/ 工程师/ :/ 清华大学/ CDN/ 研究所/ 所长/ 尹浩/ 教授/ ,/ ChinaCache/ 公司/ 运维部/ 宋裔/ 智/ 副总裁/ ,/ 富/ 媒体/ 下载/ 组/ 的/ 李政/ 工程师/ 和/ P2P/ 部张/ 玮/ 经理/ 等/ !/ 

