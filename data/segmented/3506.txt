Page1/ 多/ 接口/ 移动/ 主机/ 最优化/ 费用/ 和/ 性能/ 方法/ 研究/ 张春燕/ 1/ )/ 徐恪/ 1/ )/ 王保进/ 2/ )/ 沈蒙/ 1/ )/ 1/ )/ (/ 清华大学/ 计算机科学/ 与/ 技术/ 系/ 北京/ 100084/ )/ 2/ )/ (/ 解放军信息工程大学/ 信息/ 工程学院/ 郑州/ 450002/ )/ 摘要/ 目前/ 移动/ 主机/ 普遍/ 具有/ 多个/ 网络接口/ ,/ 可以/ 由/ 这些/ 接口/ 通过/ 不同/ 的/ 网络/ 服务提供商/ (/ ISP/ )/ 接入/ 到/ Internet/ 中/ ./ 因此/ ,/ 移动/ 主机/ 与/ Internet/ 之间/ 就/ 可能/ 存在/ 多条/ 路径/ ,/ 通信/ 的/ 费用/ 和/ 性能/ 取决于/ ISP/ 的/ 收费/ 策略/ 和/ 网络通信/ 性能/ ./ 文中/ 首先/ 对/ 移动/ 主机/ 与/ Internet/ 通信/ 进行/ 建模/ ,/ 然后/ 提出/ 一种/ 基于/ 主动/ 探测/ 可用/ 路径/ 的/ 最优化/ 费用/ 和/ 性能/ 的/ 流量/ 分配/ 方法/ ./ 最后/ ,/ 对此/ 方法/ 进行/ 仿真/ ,/ 并/ 与/ 几种/ 常见/ 流量/ 分配/ 方法/ 进行/ 对比/ ./ 结果表明/ 本文/ 所/ 提出/ 的/ 方法/ 能/ 根据/ 主机/ 对/ 费用/ 和/ 性能/ 的/ 需求/ 合理/ 分配/ 和/ 控制/ 流量/ ./ 关键词/ 多/ 网络接口/ ;/ 移动/ 主机/ ;/ 费用/ 和/ 性能/ 最优化/ ;/ 主动/ 探测/ ;/ 流量/ 分配/ 1/ 引言/ 再/ 适应/ 当前/ 的/ 应用/ 需求/ ./ 互联网/ 设计/ 的/ 最初/ 假设/ 是/ 每个/ 主机/ 只有/ 一个/ 接入/ 网络/ 和/ 一个/ 默认/ 网关/ ./ 但/ 经过/ 几十年/ 的/ 发展/ ,/ 尤其/ 是/ 移动/ 互联网/ 时代/ 的/ 到来/ ,/ 连接/ 到/ Internet/ 的/ 手段/ 更加/ 多样化/ :/ 有线/ 接入/ 、/ Wi/ -/ Fi/ 随着/ 互联网/ 的/ 高速/ 发展/ ,/ 最初/ 的/ 设计/ 理念/ 已/ 不/ Page2/ 网络/ 、/ GPRS/ // EDGE/ 、/ 3G/ 网络/ 等/ ,/ 网络/ 已经/ 向着/ 异构/ 网络/ 融合/ 的/ 趋势/ 演进/ ;/ 连接/ 到/ Internet/ 的/ 设备/ 也/ 多种多样/ :/ 从/ PC机/ 到/ 手机/ ,/ 到/ 万物/ 均/ 可/ 联网/ 的/ 物/ 联网/ 等/ ./ 可以/ 说/ ,/ 终端/ 和/ 网络/ 环境/ 的/ 变化/ 远/ 超出/ 了/ 在/ 20/ 世纪/ 80/ 年代/ 人们/ 设计/ TCP/ // IP/ 协议/ 和/ 模型/ 时候/ 的/ 想象/ ./ 在/ 这种/ 场景/ 下/ ,/ 具有/ 多个/ 网络接口/ 的/ 移动/ 主机/ 应运而生/ ,/ 这些/ 移动/ 主机/ 不仅/ 包括/ 手机/ ,/ 还/ 包括/ 各种各样/ 的/ PDA/ 、/ GPS/ 设备/ 等/ ./ 而/ 以/ IPv6/ [/ 1/ -/ 2/ ]/ 为/ 标志/ 的/ 下一代/ 互联网/ 的/ 出现/ 为/ 移动/ 主机/ 带来/ 了/ 很大/ 的/ 便利/ ./ 下一代/ 互联网/ 的/ 目标/ 是/ 使/ 网络/ 向/ 更/ 大/ 、/ 更/ 快/ 、/ 更/ 安全/ 的/ 方向/ 发展/ ,/ 针对/ 当前/ IP地址/ 资源/ 日益/ 枯竭/ 的/ 现象/ ,/ 提出/ 了/ IPv6/ 协议/ ./ 这个/ 协议/ IP地址/ 资源/ 丰富/ ,/ 使得/ 点到点/ 的/ 通信/ 真正/ 成为/ 现实/ ./ IPv6/ 将/ 地址/ 空间/ 从/ 32/ 位/ 扩充/ 到/ 了/ 128/ 位/ ,/ 因此/ 完全/ 可以/ 实现/ 为/ 移动/ 设备/ 分配/ 地址/ 这一/ 需求/ ./ 而且/ IPv6/ 具有/ 的/ 邻居/ 发现/ 机制/ 、/ 安全/ 机制/ 等/ 为/ 移动/ 网络/ 解决/ 了/ 许多/ 后顾之忧/ ./ 目前/ ,/ 固定/ 主机/ 也/ 大都/ 具有/ 多个/ 网络接口/ ,/ 但/ 多/ 接口/ 移动/ 主机/ 与/ 固定/ 主机/ 有着/ 较大/ 的/ 区别/ ./ 首先/ ,/ 由于/ 固定/ 主机/ 地理位置/ 固定/ ,/ 所以/ 不会/ 很/ 频繁/ 地/ 在/ 网络接口/ 间/ 进行/ 切换/ ,/ 而/ 移动/ 主机/ 具有/ 移动性/ ,/ 通常/ 会/ 因为/ 地理位置/ 的/ 改变/ 而/ 引起/ 网络/ 的/ 切换/ 和/ 通信/ 质量/ 的/ 改变/ ;/ 其次/ ,/ 固定/ 主机/ 接入网/ 路/ 都/ 具有/ 高/ 可靠/ 的/ 服务质量/ 保障/ ,/ 而/ 移动/ 主机/ 不能/ 很/ 好/ 地/ 保证/ 其/ 链路/ 的/ 可靠性/ 和/ 容错/ 能力/ ,/ 因此/ 应该/ 实时/ 寻找/ 多条/ 好/ 的/ 路径/ ;/ 最后/ ,/ 移动/ 主机/ 接入/ 的/ 网络/ 具有/ 丰富性/ ,/ 不仅/ 可以/ 接入/ 移动/ 网络/ ,/ 还/ 可以/ 接入/ 为/ 固定/ 主机/ 提供/ 服务/ 的/ 网络/ 中/ ./ 现在/ 对于/ 多/ 接口/ 固定/ 主机/ 的/ 研究/ 主要/ 集中/ 在/ 多/ 宿主/ (/ multihoming/ )/ [/ 3/ ]/ 的/ 设计/ 实现/ 和/ 优化/ 上/ ,/ 但/ 由于/ 固定/ 主机/ 和/ 移动/ 主机/ 的/ 区别/ ,/ 移动/ 主机/ 不能/ 完全/ 借鉴/ 固定/ 主机/ 的/ 做法/ ./ 多/ 接口/ 移动/ 主机/ 在/ 接入/ 网络/ 后/ ,/ 与/ Internet/ 之间/ 就/ 存在/ 着/ 多条/ 路径/ ,/ 这些/ 路径/ 的/ 费用/ 和/ 性能/ 取决于/ 网络/ 服务提供商/ 的/ 收费/ 策略/ 和/ 网络通信/ 性能/ ,/ 因此/ 不能/ 简单/ 地/ 选择/ 其中/ 一条/ 或者/ 多条/ 路径/ ./ 本文/ 通过/ 对/ 移动/ 主机/ 与/ Internet/ 通信/ 进行/ 建模/ ,/ 针对/ 移动/ 主机/ 通信/ 的/ 特点/ ,/ 对/ 其/ 费用/ 和/ 性能/ 通过/ 两个/ 步骤/ 进行/ 最优化/ :/ 第/ 1/ 步/ ,/ 探测/ 通过/ ISP/ 的/ 可用/ 路径/ 集/ ;/ 第/ 2/ 步/ ,/ 在/ 该/ 可用/ 路径/ 集中/ ,/ 求解/ 使得/ 费用/ 和/ 性能/ 最优/ 的/ 流量/ 分配/ 方案/ ./ 最后/ ,/ 本文/ 对此/ 最优化/ 方案/ 进行/ 仿真/ ./ 仿真/ 表明/ ,/ 移动/ 主机/ 不能/ 做到/ 费用/ 和/ 性能/ 均/ 为/ 最优/ ./ 当/ 费用/ 最优/ 时/ ,/ 性能/ 较差/ ,/ 当/ 性能/ 最优/ 时/ ,/ 费用/ 较/ 高/ ,/ 因此/ 只能/ 取/ 两者/ 的/ 折中/ 方案/ ./ 而/ ISP/ 的/ 容量/ 也/ 对/ 费用/ 和/ 性能/ 有/ 一定/ 的/ 影响/ ,/ 在/ 相同/ 的/ 收费/ 策略/ 和/ 链路/ 性能/ 条件/ 下/ ,/ 应该/ 选取/ 较大/ 容量/ 的/ ISP/ ./ 另外/ ,/ 本文/ 所/ 提出/ 的/ 费用/ 和/ 性能/ 最优/ 方案/ 虽然/ 计算/ 稍微/ 复杂/ ,/ 但/ 计算/ 出/ 的/ 分配/ 方案/ 能够/ 较/ 好/ 满足/ 移动/ 主机/ 的/ 需求/ ./ 这个/ 研究/ 也/ 可以/ 用于/ 多/ 接入/ 站点/ 的/ 性能/ 和/ 代价/ 的/ 优化/ ./ 本文/ 第/ 2/ 节/ 介绍/ 当前/ 国内外/ 相关/ 工作/ ;/ 第/ 3/ 节对/ 多/ 接口/ 移动/ 主机/ 的/ 通信/ 场景/ 进行/ 抽象/ 和/ 建模/ ;/ 第/ 4/ 节/ 介绍/ 求解/ 该/ 模型/ 最优化/ 费用/ 和/ 性能/ 的/ 方案/ ;/ 第/ 5/ 节对/ 该/ 模型/ 进行/ 仿真/ ,/ 测量/ 多/ 接口/ 移动/ 主机/ 分配/ 方案/ 的/ 性能/ 和/ 费用/ ,/ 并/ 与/ 常见/ 的/ 几种/ 流量/ 分配/ 方案/ 进行/ 对比/ 和/ 分析/ ,/ 最后/ 结合/ 本文/ 所提/ 方案/ 给出/ 一个/ 实际/ 应用/ 的/ 例子/ ;/ 第/ 6/ 节对/ 本文/ 工作/ 进行/ 了/ 总结/ ,/ 并/ 指出/ 进一步/ 的/ 工作/ ./ 2/ 相关/ 工作/ 为了/ 解决/ 多/ 接口/ 移动/ 主机/ 的/ 相关/ 问题/ ,/ IETF/ 于/ 2008/ 年/ 成立/ 了/ MIF/ 工作组/ (/ MultipleInterfaceWorkingGroup/ )/ ①/ ,/ 进行/ 多/ 接口/ IP/ 模型/ 标准化/ 工作/ ./ MIF/ 工作组/ 对/ 多/ 接口/ 的/ 定义/ 是/ 移动/ 主机/ 利用/ 多个/ 接口/ 接入/ 一个/ 或者/ 多个/ 供给/ 域/ ,/ 并/ 为/ 其/ 分配/ 来自/ 不同/ 域/ 的/ IP地址/ ,/ 主机/ 可以/ 利用/ 这些/ 地址/ 同时/ 并/ 独立/ 地/ 进行/ 通信/ ./ 目前/ MIF/ 工作组/ 的/ 主要/ 工作/ 集中/ 在/ 移动/ 主机/ 多/ 接口/ 通信/ 机制/ 上/ ,/ 主要/ 包括/ 多/ 接口/ 虚拟化/ ②/ 、/ 多/ 接口/ API/ ③/ 及/ 连接/ 管理器/ ④/ 等/ ./ 在/ 多/ 接口/ 移动/ 主机/ 费用/ 和/ 性能/ 优化/ 方面/ 的/ 研究/ 较/ 少/ ,/ 但/ 多/ 宿主/ 主机/ 的/ 优化/ 问题/ 和/ 策略/ 配置/ 研究/ 较为/ 成熟/ ,/ 主要/ 关注点/ 是/ 多/ 宿主/ 主机/ 的/ 实现/ 技术/ [/ 3/ -/ 4/ ]/ 、/ 宿主/ 路径/ 选择/ [/ 5/ ]/ 和/ 费用/ 性能/ 优化/ [/ 6/ -/ 8/ ]/ 以及/ 与/ 覆盖/ 网络/ 的/ 比较/ [/ 10/ ]/ ./ 从/ 本质/ 上/ 讲/ ,/ 多/ 宿主/ 主机/ 是/ 一台/ 具有/ 多个/ 网络连接/ 的/ 主机/ ,/ 在/ Internet/ 中/ ,/ 多/ 宿主/ 连接/ 系统/ 是/ 一个/ 连接/ 到/ 两个/ 上游/ 服务提供商/ 的/ 系统/ ./ 在/ 文献/ [/ 6/ ]/ 中/ 对/ 多/ 宿主机/ 的/ 费用/ 和/ 性能/ 进行/ 了/ 优化/ 分析/ ,/ 提出/ 了/ 4/ 种/ 优化/ 场景/ 和/ 策略/ ,/ 主要/ 做法/ 是/ 通过/ 在/ 费用/ 的/ 约束条件/ 下/ 最优化/ 性能/ 的/ 思想/ ,/ 将/ 问/ ①/ ②/ inahostdraft/ -/ hong/ -/ mif/ -/ virtual/ -/ interface/ -/ 02/ ./ http/ :/ // // tools/ ./ ietf/ ./ org/ // htm/ // draf/ -/ honf/ -/ mif/ -/ virtual/ -/ interface/ -/ 02/ ./ October/ ③/ ④/ Page3/ 题/ 转换成/ 一个/ 最小/ 花费/ 多物/ 网络/ 流/ (/ Minimum/ -/ CostMulticommodityFlow/ ,/ MCMCF/ )/ 的/ 线性规划/ 问题/ ./ 但/ 该/ 文章/ 针对/ 的/ 是/ 固定/ 主机/ ,/ 没有/ 考虑/ 主机/ 移动性/ 带来/ 的/ 频繁/ 探测/ 和/ 切换/ 网络/ 的/ 问题/ ,/ 并且/ 算法/ 复杂/ ,/ 对于/ 移动/ 主机/ 而言/ 计算/ 量过大/ ./ 文献/ [/ 7/ ]/ 提出/ 了/ 一种/ 在线/ 服务/ 提供/ 网络/ (/ OnlineServiceProviderNetworks/ ,/ OSPN/ )/ 中/ 优化/ 费用/ 和/ 性能/ 的/ 算法/ ./ 它/ 首先/ 使用/ 一种/ 新颖/ 的/ 路由/ 注入/ 方法/ 探测/ 可用/ 路径/ ,/ 这种/ 方法/ 能/ 在/ 不/ 影响/ 正在/ 使用/ 路径/ 的/ 情况/ 下/ 探测/ 出新/ 路径/ 的/ 性能/ ;/ 然后/ 根据/ 代价/ 、/ 性能/ 等/ 因素/ 计算/ 费用/ 和/ 性能/ 最优/ 的/ 流量/ 分配/ 方案/ ./ 但/ 由于/ 该文/ 针对/ 的/ 场景/ 是/ OSPN/ 网络/ ,/ 包含/ 网络/ 服务器/ 和/ 数据中心/ ,/ 提供/ 从/ 数据中心/ 到/ 用户/ 的/ 路径/ ,/ 且/ 由于/ 连接/ 的/ ISP/ 数量/ 庞大/ ,/ 因此/ 与/ 多/ 接口/ 移动/ 主机/ 的/ 多路径/ 有着/ 本质区别/ ./ 3/ 多/ 接口/ 移动/ 主机/ 通信模型/ 移动/ 主机/ 可以/ 可以/ 具有/ 多个/ 网络接口/ (/ 如/ Wi/ -/ Fi/ ,/ GPRS/ // EDGE/ ,/ 3G/ 网络/ 等/ )/ ,/ 每个/ 接口/ 可/ 在/ 某/ 一/ 时刻/ 与/ 一个/ ISP/ 连接/ ,/ 通过/ 与/ ISP/ 协商/ 获取/ 该/ 接口/ 的/ 配置/ 信息/ (/ 包括/ IP地址/ 、/ 网关/ 信息/ 等/ )/ ,/ 这样/ 一台/ 移动/ 主机/ 就/ 可以/ 通过/ 不同/ 的/ 接口/ 接入/ 到/ Internet/ 中/ ./ 当/ 移动/ 主机/ 需要/ 访问/ Internet/ 中/ 的/ 某个/ 资源/ 时/ ,/ 可以/ 通过/ 不同/ 的/ 接口/ 和/ 不同/ 的/ ISP/ 产生/ 不同/ 的/ 路由/ 访问/ 该/ 资源/ ./ 图/ 1/ 是/ 多/ 接口/ 主机/ 的/ 应用/ 场景/ 图/ ./ 图中/ 有/ 两种/ 通信/ 方式/ :/ 一种/ 是/ 移动/ 主机/ 间/ 的/ 通信/ ,/ 如图/ 中/ 左下角/ 的/ iPhone/ 与/ 右下角/ 手机/ 间/ 的/ 通信/ ;/ 另外/ 一种/ 是/ 移动/ 主机/ 和/ 固定/ 主机/ 或者/ 服务器/ 的/ 通信/ ,/ 如图/ 中/ iPhone/ 与/ 右上角/ 服务器/ 间/ 的/ 通信/ ./ 移动/ 主机/ 通常/ 具有/ 多个/ 接口/ ,/ 如图/ 1/ 中/ 左下角/ iPhone/ 有/ IF/ _/ 1/ 的/ Wi/ -/ Fi/ 接口/ 和/ IF/ _/ 2/ 的/ 3G/ 网络接口/ ,/ 并且/ 各自/ 具有/ 不同/ 的/ 链路层/ 标识/ (/ LL/ _/ ID/ ,/ LinkLayerIdentifier/ )/ ./ 为了/ 能够/ 灵活/ 高效/ 地/ 操作/ 多个/ 接口/ ,/ IETFMIF/ 工作组/ 的/ 做法/ 是/ 在/ 物理/ 接口/ 之上/ 建立/ 一个/ 虚拟/ 接口/ ,/ 这个/ 接口/ 对/ 网络层/ 透明/ ,/ 通过/ 连接/ 管理器/ 管理/ 这些/ 接口/ ./ 基于/ 图/ 1/ ,/ 本文/ 对/ 所/ 研究/ 问题/ 进行/ 如下/ 假设/ :/ (/ 1/ )/ 无论是/ 移动/ 主机/ 间通信/ 还是/ 移动/ 主机/ 与/ 服务器/ 或者/ 固定/ 主机/ 通信/ ,/ 将/ 另外/ 一个/ 被/ 通信/ 节点/ 抽象/ 为/ 一个/ 位于/ Internet/ 中/ 的/ 目的/ 通信/ 节点/ ,/ 记为/ Node/ ./ (/ 2/ )/ 在/ 某/ 一/ 时刻/ ,/ 移动/ 主机/ 的/ 一个/ 接口/ 只能/ 连接/ 一个/ ISP/ ,/ 这/ 也/ 是/ 移动/ 主机/ 通常/ 的/ 做法/ ;/ 在/ 与/ 一个/ ISP/ 断/ 连/ 之后/ ,/ 可以/ 尝试/ 连接/ 其他/ ISP/ ./ (/ 3/ )/ 在/ 某/ 一/ 时刻/ ,/ 可以/ 有/ 多个/ ISP/ 提供/ 从/ 移动/ 主机/ 到/ 目的/ 通信/ 节点/ 的/ 链路/ ./ (/ 4/ )/ 移动/ 主机/ 与/ 通信/ 节点/ 通信/ 是/ 双向/ 的/ ,/ 即/ 移动/ 主机/ 既有/ 上游/ 通信/ 流量/ (/ Upstream/ )/ ,/ 也/ 有/ 下游/ 通信/ 流量/ (/ Downstream/ )/ ./ 收费/ 的/ 通信量/ 记录/ 的/ 是/ 双向/ 的/ 通信/ 流量/ ,/ 而/ 不管/ 是/ 上游/ 流量/ 还是/ 下游/ 流量/ ./ 因此/ ,/ 为了/ 方便/ 建立/ 模型/ ,/ 将/ 这/ 两种/ 方向/ 的/ 流量/ 都/ 标记/ 为/ 上游/ 通信/ 流量/ ./ 抽象/ 出/ 的/ 多/ 接口/ 移动/ 主机/ 通信模型/ 如图/ 2/ 所示/ ./ 图中/ ,/ Host/ 表示/ 移动/ 主机/ 节点/ ,/ Node/ 表示/ 目的/ 通信/ 节点/ ./ 图中/ 的/ 连线/ 和/ 箭头/ 表示/ Host/ 产生/ 的/ 网络流量/ ./ Host1/ 可以/ 通过/ ISP1/ 、/ ISP4/ 和/ ISP5/ 访问/ 目的/ 节点/ Node1/ ;/ Host2/ 可以/ 通过/ ISP1/ 、/ ISP2/ 和/ ISP3/ 访问/ 目的/ 节点/ Node2/ ./ 将/ 图/ 2/ 的/ 通信/ 场景/ 简化/ 模型/ 进行/ 抽象/ ,/ 得到/ 多/ 接口/ 移动/ 主机/ 的/ 流量/ 分配/ 模型/ ./ 假设/ 主机/ 和/ ISP/ 无/ 连接/ 可/ 视为/ 链路/ 上/ 分配/ 的/ 流量/ 为/ 零/ ,/ 则/ 主机/ 和/ 每个/ ISP/ 之间/ 可以/ 建立/ 关系/ 图/ ,/ 如图/ 3/ 所示/ ./ 在/ 图/ 3/ 这个/ 模型/ 中/ ,/ 由于/ 只/ 关心/ Hosts/ 和/ ISPs/ 间/ 的/ 流量/ 分配/ ,/ 所以/ 可以/ 忽略/ 目的/ 通信/ 节点/ Nodes/ ./ 在/ 这个/ 模型/ 中/ ,/ 可/ 抽象/ 出/ 3/ 个/ 集合/ ,/ 分别/ 是/ 多/ 接口/ 移动/ 主机/ (/ 左边/ 节/ Page4/ 点/ )/ 组成/ 的/ Host/ 集/ 、/ 为/ 移动/ 主机/ 提供/ 接入/ 服务/ 的/ ISP/ (/ 中间/ 节点/ )/ 组成/ 的/ ISP/ 集/ 、/ 移动/ 主机/ 和/ ISP/ 间/ 的/ 链路/ 组/ Link/ 集/ ./ 由于/ 移动/ 主机/ 具有/ 移动性/ 、/ 数据/ 需求/ 实时性/ 、/ 接入/ 网络/ 丰富性/ 等/ 特点/ ,/ 这/ 3/ 个/ 集合/ 很/ 有/ 可能/ 实时/ 变化/ ,/ 这/ 也/ 是/ 移动/ 主机/ 不同于/ 固定/ 主机/ 的/ 地方/ ./ 在/ 为/ 移动/ 主机/ 多个/ 接口/ 分配/ 流量/ 时/ ,/ 需要/ 经过/ 两个/ 步骤/ :/ 首先/ ,/ 由于/ 链路/ 易/ 失效/ ,/ ISP/ 集/ 和/ Link/ 集/ 易变/ ,/ 因此/ 在/ 每次/ 分配/ 流量/ 之前/ ,/ 都/ 需要/ 首先/ 探测/ 可用/ 路径/ ./ 第/ 2/ 步/ ,/ 在/ 所有/ 可用/ 路径/ 上/ ,/ 求解/ 使得/ 费用/ 和/ 性能/ 最优/ 的/ 流量/ 分配/ 方案/ ./ 4/ 最优化/ 费用/ 和/ 性能/ 的/ 分配/ 方案/ 首先/ 对/ 本文/ 中/ 所用/ 到/ 的/ 标记/ 和/ 变量/ 进行/ 说明/ ./ 在/ 未/ 提前/ 声明/ 情况/ 下/ ,/ 本文/ 所/ 使用/ 符号/ 意义/ 均/ 参照/ 表/ 1/ 中/ 的/ 解释/ ./ PerfMeasurement/ 移动/ 主机/ 总/ 的/ 性能/ 描述/ Ck/ (/ x/ )/ ISPk/ 的/ 收费/ 函数/ ,/ x/ 是/ 收费/ 变量/ ,/ PricekRTTi/ ,/ k/ 移动/ 主机/ i/ 分配/ 给/ ISPk/ 流量/ 经历/ 的/ RTT4/ ./ 1/ 探测/ 可用/ 路径/ 在/ 不/ 影响/ 移动/ 主机/ 正常/ 通信/ 的/ 情况/ 下/ ,/ 搜索/ 新/ 的/ 路径/ ,/ 并/ 计算/ 这条/ 新/ 路径/ 的/ 性能指标/ ,/ 加入/ 到/ Link/ 集中/ ,/ 同时/ 还/ 需要/ 实时/ 更新/ Link/ 集中/ 的/ 链路/ 性能/ 值/ ./ 参考文献/ [/ 7/ ]/ 中/ 介绍/ 了/ 一种/ 路由/ 注入/ 的/ 探测/ 方法/ ,/ 它/ 可/ 在/ 不/ 改变/ 当前/ 流量/ 分配/ 的/ 路径/ 的/ 情况/ 下/ ,/ 测量/ 新/ 路径/ 性能/ ./ 文献/ [/ 11/ ]/ 提出/ 了/ 一种/ 主动/ 探测/ 覆盖/ 网络/ 路由/ 的/ 方法/ ,/ 它/ 针对/ 覆盖/ 网络/ 的/ 特点/ ,/ 如/ 底层/ 网络/ 变化/ 带来/ 的/ 拓扑/ 变化/ 、/ 网络/ 负载/ 的/ 实时/ 变化/ ,/ 主动/ 地/ 在/ 选定/ 的/ 节点/ 上/ 注入/ 流量/ ,/ 测量/ 其/ 在/ 可用/ 路径/ 上/ 的/ 性能/ ./ 上层/ 网络/ 需要/ 根据/ 探测/ 出/ 的/ 底层/ 改变/ ,/ 调整/ 其/ 路由/ 策略/ ./ 该/ 方法/ 可以/ 主动/ 寻找/ 和/ 探测/ 节点/ 带宽/ ,/ 测量/ 尺度/ 比较/ 丰富/ ./ 文献/ [/ 12/ ]/ 提出/ 一种/ 基于/ 包/ 排队/ 方式/ 的/ 双/ 步长/ 网络/ 路径/ 可用/ 带宽/ 探测/ 方法/ ,/ 通过/ 检测/ 包/ 的/ 排队/ 延时/ 来/ 获取/ 可用/ 带宽/ ,/ 减少/ 了/ 探测/ 次数/ 和/ 运行/ 时间/ ,/ 降低/ 了/ 探测/ 开销/ ./ 根据/ 移动/ 主机/ 自身/ 和/ 接入/ 网络/ 的/ 特点/ ,/ 本文/ 采用/ 主动/ 探测/ 路径/ 性能/ 的/ 方法/ ,/ 性能/ 尺度/ 将/ 在/ 4.3/ 节/ 性能/ 评估/ 模型/ 中/ 进行/ 介绍/ ./ 探测/ 过程/ 是/ :/ 首先/ ,/ 检测/ 移动/ 主机/ 所在/ 范围/ 内/ 的/ 可/ 提供/ 服务/ 的/ ISP/ ./ 主机/ 的/ 可用/ 接口/ 在/ 与/ ISP/ 建立/ 连接/ 时/ ,/ ISP/ 会/ 返回/ 网络/ 的/ 配置/ 信息/ ;/ 其次/ ,/ 借鉴/ 文献/ [/ 7/ ]/ 中/ 的/ 方法/ ,/ 在/ 不/ 影响/ 当前/ 流量/ 分配/ 的/ 情况/ 下/ ,/ 测量/ 该/ 连接/ 的/ 性能/ ./ 在/ 探测/ 出/ 可用/ 路径/ 集后/ ,/ 就/ 可以/ 对/ 所有/ 移动/ 主机/ 在/ 其/ 可用/ 路径/ 上/ 计算/ 流量/ 分配/ 方案/ ./ 接下来/ 分别/ 介绍/ 移动/ 主机/ 采用/ 的/ 费用/ 模型/ 和/ 性能/ 模型/ ./ 4.2/ 费用/ 模型/ 目前/ 国内/ ISP/ 主要/ 有/ 3/ 家/ :/ 中国电信/ 、/ 中国网通/ 和/ 中国移动/ ./ 接入/ 方式/ 主要/ 有/ ADSL/ 、/ GRPS/ 、/ 3G/ 网络/ 等/ ./ 其/ 资费/ 方式/ 各不相同/ ,/ 并且/ 因/ 地域/ 差异/ 和/ 各人/ 喜好/ 也/ 有/ 不同/ 的/ 收费/ 标准/ ./ 但/ 这些/ 收费/ 方式/ 都/ 有/ 一个/ 共同/ 特点/ :/ 均/ 包含/ 两个/ 部分/ ,/ 一定/ 流量/ 或者/ 时间/ 的/ 固定/ 费用/ 和/ 超出/ 流量/ 或者/ 时间/ 的/ 可变/ 费用/ ./ 将/ 计费/ 流量/ 或者/ 时间/ 记为/ w/ ,/ 常量/ 部分/ 记为/ ConstPay/ -/ ment/ ,/ 超出/ 部分/ 记为/ ExcessPayment/ ,/ 可用/ 下面/ 公式/ 表示/ :/ Cost/ (/ w/ )/ =/ ConstPayment/ +/ ExcessPayment/ (/ w/ )/ ./ 通常/ ,/ 这个/ 超出/ 部分/ 的/ 费用/ 是/ 关于/ 流量/ 或者/ 时间/ 的/ 线性/ 函数/ ,/ 将/ 常量/ 部分/ 流量/ 或者/ 时间/ 的/ 阈值/ 记为/ w0/ ,/ 超出/ 部分/ 的/ 费用/ 可/ 表示/ 为/ ExcessPayment/ (/ w/ )/ =/ Price/ ×/ (/ w/ -/ w0/ )/ ,/ w/ >/ w0/ ./ 当未/ 超过/ 阈值/ 时/ ,/ 新增/ 流量/ 或/ 时间/ 不会/ 收费/ ,/ 可/ 视为/ Price/ 为/ 0/ ;/ 当/ 超过/ 阈值/ 时/ ,/ 新增/ 流量/ 或/ 时间/ 按/ 线性/ 收费/ ./ 对于/ 需要/ 分配/ 的/ 流量/ 或/ 时间/ x/ ,/ Cost/ 可/ 简单/ 归纳/ 为/ 其中/ ,/ Page5/ 国外/ 一种/ 最/ 常用/ 的/ ISP/ 计费/ 方法/ 是/ 95thper/ -/ centile/ ./ 它/ 是/ 一种/ 广泛/ 使用/ 的/ 衡量/ 网络/ 规律/ 和/ 持续/ 利用率/ 的/ 数学计算/ 方法/ ./ 使用/ 这种/ 方法/ 可以/ 避免/ 因/ 不/ 正常/ 使用/ 或者/ 网络/ 突发事件/ 而/ 导致/ 的/ 突发/ 高/ 流量/ 现象/ ./ 使用/ 方法/ 是/ 在/ 取样/ 间隔/ 内/ (/ 例如/ 300s/ )/ 计算/ 平均/ 带宽/ ,/ 计算方法/ 是/ 数据/ 流量/ // 间隔时间/ (/ 300s/ )/ ,/ 在/ 一段时间/ (/ 如/ 一个月/ )/ 后/ ,/ 对/ 这些/ 间隔/ 带宽/ 进行/ 从/ 高到/ 低/ 排序/ ,/ 去掉/ 最高/ 的/ 5/ %/ ,/ 剩下/ 的/ 最高/ 的/ 数据/ 作为/ 这个/ 月/ 的/ 计费/ 带宽/ ./ 将/ 计费/ 带宽/ 记为/ x/ ,/ 则/ 费用函数/ 为/ 无论是/ 国内/ 还是/ 国外/ 的/ 计费/ 方式/ ,/ 总/ 的/ 费用/ 都/ 是/ 将/ 各个/ ISP/ 的/ 收费/ 累加/ ./ 求/ 费用/ 的/ 最优/ 解可写/ 为/ minCost/ =/ ∑/ K/ 本文/ 使用/ 的/ 流量/ 计量/ 方式/ 将/ 基于/ 此/ 公式/ ,/ 根据/ 各个/ ISP/ 收费/ 单价/ 的/ 不同/ 计算/ 费用/ ./ 4.3/ 性能/ 模型/ 文献/ [/ 6/ ]/ 介绍/ 了/ 几种/ 衡量/ 网络/ 性能/ 的/ 方法/ ,/ 网络/ 性能/ 的/ 尺度/ 包括/ 网络延时/ 、/ 吞吐/ 率/ 、/ 可/ 利用/ 带宽/ 、/ 通信/ 质量/ (/ 丢/ 包率/ )/ 等/ ./ 由于/ 移动/ 主机/ 硬件资源/ 有限/ ,/ 而且/ 需要/ 实时/ 探测/ 路径/ ,/ 探测/ 路径/ 不能/ 过于/ 复杂/ ,/ 因此/ 采用/ RTT/ 延时/ 度量/ 网络/ 性能/ ./ 和/ 分配/ 的/ 流量/ 情况/ ,/ 可/ 由/ 如下/ 公式/ 计算/ 得到/ :/ 在/ 度量/ 网络/ 性能/ 时/ ,/ 需要/ 兼顾/ 每条/ 链路/ 的/ 性能/ 上文/ 介绍/ 了/ 费用/ 和/ 性能/ 模型/ ,/ 下面/ 介绍/ 如何/ 获/ 其中/ :/ P/ 值越/ 小/ ,/ 总体/ 性能/ 越/ 好/ ;/ 反之/ ,/ P/ 值越/ 大/ ,/ 总体/ 性能/ 越差/ ./ 4.4/ 计算/ 费用/ 和/ 性能/ 的/ 最优化/ 方案/ 取/ 费用/ 和/ 性能/ 的/ 最优化/ 流量/ 分配/ 方案/ ./ 4.4/ ./ 1/ 节/ 给出/ 了/ 一种/ 在/ 性能/ 约束/ P/ 下/ 的/ 费用/ 最优/ 的/ 流量/ 分配/ 方案/ ,/ 并/ 进一步/ 研究/ 了/ 性能/ 约束/ P/ 与/ 最优/ 费用/ 的/ 关系/ ;/ 4.4/ ./ 2/ 节在/ 4.4/ ./ 1/ 节/ 计算/ 出/ 的/ 性能/ 和/ 费用/ 关系/ 基础/ 上/ ,/ 给出/ 一种/ 根据/ 用户/ 要求/ 定制/ 的/ 费用/ 和/ 性能/ 的/ 多/ 约束/ 优化/ 方案/ ./ 4.4/ ./ 1/ 费用/ 最优/ 方案/ 首先/ 求解/ 在/ 性能/ 一定/ 条件/ 下/ 的/ 费用/ 最优/ 线性规划/ 问题/ ./ 目标/ 函数/ 是/ 总费用/ 最小/ ,/ 即/ 对于/ 所有/ 移动/ 主机/ 的/ 分配/ 给/ 所有/ ISP/ 流量/ 的/ 费用/ 之/ 和/ 最小/ ./ 目标/ 函数/ :/ minCost/ =/ ∑/ K/ 约束条件/ 为/ ∑/ Ii/ =/ 1/ ∑/ Kk/ =/ 1/ / i/ ,/ k/ ,/ i/ ∈/ [/ 1/ ,/ 2/ ]/ ,/ k/ ∈/ [/ 1/ ,/ k/ ]/ ,/ 0/ / fi/ ,/ k/ / 1/ 约束条件/ (/ 1/ )/ 是/ 对/ 每个/ ISP/ 的/ 容量/ 建立/ 的/ 约束/ ,/ 所有/ 移动/ 主机/ 分配/ 给/ ISPk/ 的/ 流量/ 之/ 和/ 不能/ 超过/ ISPk/ 容量/ 的/ α/ 倍/ ./ 约束条件/ (/ 2/ )/ 是/ 针对性/ 能/ 建立/ 的/ 约束/ ,/ P/ 值/ 可调/ ./ 约束条件/ (/ 3/ )/ 保证/ 了/ 每个/ 移动/ 主机/ 分配/ 的/ 流量/ 都/ 可/ 到达/ ISP/ ./ 约束条件/ (/ 4/ )/ 确定/ 了解/ 区间/ 的/ 正确/ 范围/ ./ 在/ 这组/ 线性规划/ 表达式/ 中/ ,/ Pricek/ ,/ α/ ,/ Capk/ 是/ 可以/ 从/ 日常/ 数据/ 中/ 提取/ 的/ 常量/ ,/ Voli/ ,/ RTTi/ ,/ k/ 可以/ 在/ 实际/ 应用/ 中测/ 得/ ,/ 因此/ 可以/ 计算/ 出/ 在/ 性能/ 约束/ 为/ P/ 的/ 条件/ 下/ ,/ 移动/ 主机/ 为/ 每个/ ISP/ 分配/ 的/ 流量/ 比例/ fi/ ,/ k/ ./ 改变/ P/ 值/ ,/ 得出/ 最优/ 的/ 费用/ ,/ 可/ 得出/ 一条/ 费用/ 和/ 性能/ 的/ 曲线/ ./ 不同/ 的/ 移动/ 主机/ 和/ ISP/ 的/ 参数/ 得到/ 的/ 曲线/ 有所不同/ ,/ 如图/ 4/ 所示/ ./ 可知/ 费用/ 和/ 性能/ 是/ 相互/ 约束/ 的/ ,/ 当/ 性能/ 较/ 好/ 时/ ,/ 费用/ 会/ 较/ 高/ ;/ 当/ 费用/ 较/ 少时/ ,/ 性能/ 会/ 较差/ ./ 4.4/ ./ 2/ 最优化/ 费用/ 和/ 性能/ 方案/ 4.4/ ./ 1/ 节中/ 介绍/ 的/ 方案/ 只是/ 在/ 性能/ 一定/ 的/ 条件/ 下/ 求解/ 最优/ 的/ 费用/ ,/ 而/ 没有/ 很/ 好/ 地/ 将/ 两者/ 结合/ 起来/ ./ 而/ 实际/ 情况/ 是/ 在/ 大多数/ 情况/ 下/ ,/ 无法/ 确定/ 一个/ 实际/ 的/ 性能/ 值/ ./ 为了/ 能/ 更/ 好地解决/ 这个/ 问题/ ,/ 借鉴/ 4.4/ ./ 1/ 节/ 已经/ 得出/ 的/ 结论/ ,/ 设计/ 一种/ 包含/ 费用/ 和/ 性能/ 的/ 双/ 变量/ 的/ 目标/ 函数/ :/ minZ/ =/ Cost/ +/ λ/ ×/ PerfMeasurement/ ,/ λ/ ∈/ [/ 0/ ,/ )/ Page6/ 其中/ :/ PerfMeasurement/ 是/ 将/ 4.4/ ./ 1/ 节中/ 性能指标/ P/ 改为/ 连续变量/ 后/ 的/ 移动/ 主机/ 性能/ 描述/ 量/ ./ λ/ 是/ 费用/ 和/ 性能/ 的/ 折中/ 参数/ ,/ 根据/ 移动/ 主机/ 的/ 需求/ 而定/ ./ λ/ 取值/ 越小/ ,/ 说明/ 用户/ 越/ 注重/ 费用/ ;/ 反之/ λ/ 越大/ ,/ 说明/ 用户/ 越/ 注重/ 性能/ ./ 考虑/ 到/ λ/ 取值/ 范围/ 太/ 大/ ,/ 将/ 其/ 归一化/ 到/ [/ 0/ ,/ 1/ ]/ 之中/ ./ 归一化/ 的/ 好处/ 在于/ 使得/ 用户/ 更能/ 理解/ 这个/ 调节/ 费用/ 和/ 性能/ 的/ 参数/ ./ 当/ 这个/ 参数/ 接近/ 0/ 时/ ,/ 说明/ 看重/ 费用/ 最优/ ,/ 当/ 接近/ 1/ 时/ ,/ 说明/ 看重/ 性能/ 最优/ ./ 在/ 众多/ 归一化/ 方法/ 中/ ,/ 选择/ 反正/ 切/ 函数/ 对/ λ/ 进行/ 归一化/ ./ 归一化/ 后/ 的/ 参数/ 记/ 为/ γ/ ,/ 公式/ 如下/ :/ 其中/ ,/ L/ 为/ 归一化/ 常量/ ,/ 可以/ 由/ 统计数据/ 给出/ ./ 这是/ 一个多/ 目标/ 的/ 线性规划/ 问题/ ./ 但/ 由于/ 这个/ 目标/ 函数/ 里/ 只有/ 两个/ 决策/ 变量/ ,/ 可/ 采用/ 直观/ 的/ 图解法/ 进行/ 求解/ ./ 该/ 问题/ 的/ 可行/ 域/ 是/ 在/ 4.4/ ./ 1/ 节中/ 已经/ 求解/ 出/ 的/ 不同/ 场景/ 下/ 最优化/ 的/ 费用/ 和/ 性能/ 关系/ 曲线/ ,/ 利用/ 图解法/ 可以/ 求/ 出/ 目标/ 函数/ 与/ 相应/ 曲线/ 的/ 交点/ ,/ 通过/ 计算/ 费用/ 和/ 性能/ 曲线/ 和/ 目标/ 函数/ Z/ =/ Cost/ +/ λ/ ×/ PerfMeasurement/ 相切/ 交点/ 的/ 费用/ 和/ 性能/ 取值/ ,/ 从而/ 可求/ 出/ 对应/ 的/ 流量/ 分配/ 方案/ ,/ 如图/ 5/ 所示/ ./ 综上所述/ ,/ 计算/ 费用/ 和/ 性能/ 的/ 最优化/ 流量/ 分配/ 方案/ 的/ 具体/ 过程/ 有/ 两步/ :/ 第/ 1/ 步/ ,/ 在/ 若干个/ 单位/ 时间/ 间隔/ 后/ 探测/ 可用/ 路径/ ,/ 获得/ 该/ ISP/ 的/ 容量/ 、/ 价格/ 等/ 信息/ ,/ 并/ 测量/ 出该/ 移动/ 主机/ 到/ ISP/ 间/ 的/ RTT/ ;/ 第/ 2/ 步/ ,/ 根据/ 获得/ 的/ 这些/ 信息/ ,/ 计算/ 最优/ 费用/ 和/ 性能/ 的/ 流量/ 分配/ 方案/ ./ 在/ 第/ 2/ 步中/ 又/ 分为/ 3/ 个/ 步骤/ ,/ 首先/ 需要/ 计算/ 某/ 特定/ 场景/ 下/ 的/ 费用/ 和/ 性能/ 曲线/ Cost/ =/ Fun/ (/ PerfMeasurement/ )/ ;/ 其次/ ,/ 求解/ 该/ 费用/ 和/ 性能/ 曲线/ 与/ 目标/ 函数/ 相切/ 的/ 交点/ ;/ 最后/ ,/ 按照/ 这种/ 分配/ 方案/ 为/ 每个/ 移动/ 主机/ 分配/ 流量/ ./ 这个/ 过程/ 的/ 伪/ 代码/ 描述/ 如下/ :/ // // 第/ 1/ 步/ :/ 探测/ 可用/ 路径/ ExploreAvailablePaths/ (/ )/ ;/ // // 第/ 2/ 步/ :/ 计算/ 最优/ 费用/ 和/ 性能/ 流量/ 分配/ 方案/ // // 输入/ :/ ISP/ ,/ Cap/ ,/ RTT/ ,/ Price/ ,/ TrafficFlow/ ,/ λ/ // // 输出/ :/ 流量/ 分配/ 方案/ f/ ,/ 并/ 分配/ 流量/ OptCostAndPerformance/ (/ ISP/ ,/ Cap/ ,/ RTT/ ,/ Price/ ,/ }/ 5/ 仿真/ 与/ 分析/ 第/ 4/ 节/ 介绍/ 了/ 费用/ 和/ 性能/ 最优化/ 的/ 流量/ 分配/ 方案/ ,/ 接下来/ 对/ 该/ 方案/ 进行/ 仿真/ 和/ 分析/ ./ 5.1/ 费用/ 和/ 性能/ 的/ 关系/ 实验/ 仿真/ 环境/ 设置/ :/ 有/ 3/ 台/ 移动/ 主机/ ,/ 分别/ 设置/ 流量/ 为/ (/ 100bps/ ,/ 200bps/ ,/ 300bps/ )/ ;/ 4/ 个/ ISP/ ,/ 费用/ 分别/ 为/ (/ 1CNY/ ,/ 1.5/ CNY/ ,/ 2CNY/ ,/ 0.5/ CNY/ )/ ./ 设计/ 两种/ ISP/ 带宽/ 容量/ 场景/ ,/ 第/ 1/ 种/ 情况/ ISP/ 容量/ (/ 即表/ 1/ 中/ Cap/ )/ 有限/ ,/ 设置/ ISP/ 容量/ 均/ 为/ 400bps/ ,/ 第/ 2/ 种/ ISP/ 容量/ 足够/ 容纳/ 所有/ 流量/ 需求/ ,/ 设置/ ISP/ 容量/ 为/ 800bps/ ;/ 已知/ 已经/ 探测/ 得到/ 从/ 移动/ 主机/ 到/ 每个/ ISP/ 每条/ 链路/ 的/ 链路/ 状况/ RTT/ ,/ α/ 设定/ 为/ 0.95/ ,/ P/ 值/ 从/ 0.5/ 取到/ 20/ ,/ 得到/ 相应/ 的/ 最小/ 费用/ ./ 实验/ 的/ 目标/ 是/ 计算/ 当/ 3/ 台/ 主机/ 分别/ 有/ 一定/ 数量/ 的/ 数据/ 请求/ 发送/ 时/ 的/ 流量/ 分配/ 策略/ f/ ./ 求解/ 过程/ :/ 根据/ 4.4/ ./ 2/ 节/ 最优化/ 费用/ 和/ 性能/ 方案/ 中/ 设计/ 的/ 伪/ 代码/ 求解/ 过程/ ,/ 在/ 探测/ 出/ 可用/ 路径/ 后/ ,/ 首先/ 将/ 参数/ (/ ISP/ ,/ Cap/ ,/ RTT/ ,/ Price/ ,/ TrafficFlow/ ,/ λ/ )/ 代入/ 线性规划/ 方程组/ 中/ ,/ 求解/ 出/ 性能/ P/ 和/ 费用/ Cost/ 的/ 数据/ ,/ 根据/ P/ 和/ Cost/ 的/ 取值/ ,/ 拟合/ 出/ 费用/ 和/ 性能/ 的/ 关系/ 曲线/ 的/ 表达式/ ;/ 其次/ ,/ 求解/ 费用/ 和/ 性能/ 曲/ Page7/ 线/ 与/ 目标/ 函数/ 相切/ 的/ 交点/ ;/ 最后/ 根据/ 交点/ 求/ 出/ 流量/ 分配/ 方案/ f/ ./ 测量/ 结果/ 如图/ 6/ 所示/ ,/ 第/ 1/ 组/ 数据/ (/ x1/ 和/ y1/ )/ 是/ 当/ ISP/ 容量/ 有限/ 的/ 情况/ 下测/ 得/ 的/ ,/ 第/ 2/ 组/ 数据/ (/ x2/ 和/ y2/ )/ 是/ 当/ ISP/ 的/ 容量/ 可以/ 容纳/ 所有/ 流量/ 需求/ 时测/ 得/ 的/ ./ 之后/ 对/ 这些/ 数据/ 使用/ 数学/ 工具/ 进行/ 拟合/ ,/ 通过/ 多次/ 测试/ ,/ 设计/ 了/ 一个/ 较优/ 的/ 拟合/ 函数/ :/ y/ (/ x/ )/ =/ a/ +/ c/ // x/ +/ d/ // x2/ +/ f/ // x3/ +/ e/ // x4/ ./ 图/ 6/ 中右/ 上/ 曲线/ 是/ 由/ 第/ 1/ 组/ 数据/ 拟合/ 得到/ 的/ ,/ 左/ 下/ 曲线/ 是/ 由/ 第/ 2/ 组/ 数据/ 拟合/ 得到/ 的/ ./ 图/ 6/ 不同/ 流量/ 场景/ 下/ 得到/ 的/ 费用/ 和/ 性能/ 关系/ 图/ 5.2/ 最优/ 费用/ 和/ 性能/ 方案/ 在/ 4.4/ ./ 2/ 节中/ 介绍/ 了/ 求解/ 最优/ 费用/ 和/ 性能/ 的/ 方法/ ./ 根据/ 这个/ 方法/ ,/ 当/ 用户/ 给定/ 一个/ 归一化/ 参数/ γ/ (/ 如/ γ/ =/ 0.5/ )/ 时/ ,/ 则/ 可以/ 根据/ 归一化/ 公式/ 计算/ 出/ λ/ (/ 若/ 已知/ 归一化/ 常量/ L/ =/ 500/ )/ ,/ λ/ =/ 500/ ./ 在/ 图/ 6/ 求得/ 的/ 费用/ 和/ 性能/ 关系/ 曲线/ 中/ ,/ 如果/ 求/ 在/ ISP/ 容量/ 较大/ 条件/ 下/ ,/ 取/ λ/ =/ 500/ 时/ 的/ 费用/ 和/ 性能/ 最优/ 分配/ 方案/ ,/ 即求/ 图中/ 左下/ 曲线/ 与/ Z/ =/ Cost/ +/ λ/ ×/ PerfMeasurement/ 的/ 相切/ 点/ (/ 如图/ 7/ 所示/ )/ ,/ 则/ 根据/ 在/ 4.4/ ./ 2/ 节中/ 给出/ 的/ 求解/ 方法/ ,/ 求得/ P/ 为/ 1.7/ ,/ 费用/ 是/ 530/ ,/ 最优化/ 分配/ 方案/ 是/ 即/ 移动/ 主机/ 1/ 将/ 流量/ 全部/ 分配/ 给/ ISP1/ ,/ 主机/ 2/ 将/ 60/ %/ 的/ 流量/ 分配/ 给/ ISP1/ ,/ 40/ %/ 分配/ 给/ ISP3/ ,/ 主机/ 3/ 将/ 全部/ 流量/ 分配/ 给/ ISP3/ ./ 5.3/ 流量/ 分配/ 方案/ 对比/ 为了/ 测试/ 本/ 流量/ 分配/ 方案/ (/ 为了/ 与/ 单/ 路径/ 区分/ ,/ 下面/ 将/ 本/ 方案/ 称之为/ 多路径/ 方案/ )/ 的/ 性能/ 和/ 费用/ 的/ 优劣/ ,/ 使用/ 多路径/ (/ γ/ =/ 0.5/ ,/ λ/ =/ 500/ )/ 方案/ 、/ 平均分配/ 方案/ 、/ 多路径/ (/ γ/ =/ 0/ ,/ λ/ =/ 0/ )/ 方案/ 、/ 单一/ 路径/ (/ 费用/ 低/ )/ 方案/ 、/ 多路径/ (/ γ/ =/ 0.97/ ,/ λ/ =/ 10000/ )/ 方案/ 和/ 单一/ 路径/ (/ 性能/ 好/ )/ 方案/ 进行/ 测试/ ,/ 并/ 将/ 这/ 6/ 种/ 方案/ 进行/ 对比/ ./ 同时/ ,/ 为了/ 体现/ 出本/ 分配/ 方案/ 在/ 不同/ 场景/ 中/ 的/ 效果/ ,/ 分别/ 设计/ 了/ 4/ 种/ 不同/ 的/ 流量/ 场景/ ./ (/ 1/ )/ 3/ 台/ 移动/ 主机/ 流量/ 不/ 相同/ ,/ 分别/ 设置/ 为/ 100bps/ ,/ 200bps/ ,/ 300bps/ ;/ (/ 2/ )/ 3/ 台/ 移动/ 主机/ 流量/ 相同/ ,/ 且/ 总流量/ 未/ 超过/ 任何/ ISP/ 的/ 容量/ ,/ 设置/ 均/ 为/ 100bps/ ;/ (/ 3/ )/ 3/ 台/ 移动/ 主机/ 流量/ 相同/ ,/ 且/ 总流量/ 超过/ 了/ 其中/ 一个/ ISP/ 的/ 容量/ ,/ 但/ 两台/ 移动/ 主机/ 流量/ 之/ 和/ 未/ 超过/ 任何/ ISP/ 容量/ ,/ 设置/ 均/ 为/ 400bps/ ;/ (/ 4/ )/ 3/ 台/ 移动/ 主机/ 流量/ 相同/ ,/ 且/ 总流量/ 超过/ 了/ 其中/ 任何/ 一个/ ISP/ 的/ 容量/ ,/ 两台/ 移动/ 主机/ 流量/ 之/ 和/ 也/ 超过/ 了/ 任何/ ISP/ 的/ 容量/ ,/ 设置/ 均/ 为/ 600bps/ ./ 其中/ ,/ 多路径/ 方案/ 是/ 指/ 本文/ 所/ 设计/ 的/ 方案/ ,/ 分别/ 取/ λ/ 权衡/ 费用/ 和/ 性能/ 的/ 情况/ 以及/ λ/ 的/ 两种/ 极值/ 情况/ ,/ 由/ γ/ 的/ 取值/ 可以/ 对/ λ/ 进行/ 控制/ ;/ 平均分配/ 方案/ 是/ 指/ 每个/ 移动/ 主机/ 将/ 其/ 流量/ 在/ 每个/ 时刻/ 都/ 平均/ 的/ 分配/ 给/ 其/ 连接/ 的/ ISP/ ;/ 单一/ 路径/ (/ 费用/ 低/ )/ 方案/ 是/ 指/ 移动/ 主机/ 只/ 选择/ 其中/ 一条/ 路径/ 分配/ 流量/ ,/ 选择/ 时/ 兼顾/ 所选/ 的/ 路径/ 使得/ 总体/ 费用/ 最低/ ;/ 单一/ 路径/ (/ 性能/ 好/ )/ 方案/ 也/ 是/ 指/ 移动/ 主机/ 只选/ 一条/ 路径/ ,/ 但/ 选择/ 时/ 兼顾/ 所选/ 的/ 路径/ 使得/ 总体/ 性能/ 最好/ ./ 表/ 2/ 是/ 经过/ 计算/ 得到/ 的/ 各种/ 流量/ 分配/ 方案/ 的/ 费用/ 和/ 性能/ 描述/ 值/ ./ 按照/ 表/ 2/ 分别/ 对/ 这/ 6/ 种/ 方案/ 的/ 费用/ 和/ 性能/ 进行/ 绘图/ ./ 横坐标/ 表示/ 4/ 种/ 流量/ 场景/ ,/ 纵坐标/ 分别/ 表示/ 费用/ 或者/ 性能/ ./ 图中/ 每种/ 流量/ 场景/ 中/ 的/ 6/ 个/ 条形/ 依次/ 代表/ 表/ 2/ 中/ 的/ 6/ 种/ 方案/ ./ 这/ 6/ 种/ 方案/ 的/ 费用/ 对/ 比如/ 图/ 8/ 所示/ ,/ 性能/ 对/ 比如/ 图/ 9/ 所示/ ./ Page8/ 表/ 26/ 种/ 流量/ 分配/ 方案/ 在/ 4/ 种/ 流量/ 场景/ 下/ 的/ 费用/ 和/ 性能/ 多路径/ (/ γ/ =/ 0.5/ )/ 方案/ C/ =/ 530/ ,/ P/ =/ 1.7/ C/ =/ 410/ ,/ P/ =/ 1.2/ C/ =/ 920/ ,/ P/ =/ 1.82/ C/ =/ 1560/ ,/ P/ =/ 1.8/ 平均分配/ 方案/ C/ =/ 750/ ,/ P/ =/ 1.9/ C/ =/ 375/ ,/ P/ =/ 1.8/ C/ =/ 1500/ ,/ P/ =/ 1.8/ C/ =/ 2250/ ,/ P/ =/ 1.8/ 多路径/ (/ γ/ =/ 0/ )/ 方案/ C/ =/ 300/ ,/ P/ =/ 2.3/ C/ =/ 150/ ,/ P/ =/ 2.3/ C/ =/ 820/ ,/ P/ =/ 2.0/ C/ =/ 1560/ ,/ P/ =/ 1.8/ 单一/ 路径/ (/ 费用/ 低/ )/ 方案/ C/ =/ 300/ ,/ P/ =/ 2.3/ C/ =/ 150/ ,/ P/ =/ 2.3/ C/ =/ 1200/ ,/ P/ =/ 1.33/ C/ =/ 1800/ ,/ P/ =/ 1.67/ 多路径/ (/ γ/ =/ 0.97/ )/ 方案/ C/ =/ 1100/ ,/ P/ =/ 1.0/ C/ =/ 500/ ,/ P/ =/ 1.0/ C/ =/ 1820/ ,/ P/ =/ 1.1/ C/ =/ 2190/ ,/ P/ =/ 1.3/ 单一/ 路径/ (/ 性能/ 好/ )/ 方案/ C/ =/ 1100/ ,/ P/ =/ 1.0/ C/ =/ 500/ ,/ P/ =/ 1.0/ C/ =/ 1200/ ,/ P/ =/ 1.33/ C/ =/ 2100/ ,/ P/ =/ 1.33/ 图/ 86/ 种/ 流量/ 分配/ 方案/ 在/ 4/ 种/ 流量/ 场景/ 下/ 的/ 费用/ 对比/ 图/ 96/ 种/ 流量/ 分配/ 方案/ 在/ 4/ 种/ 流量/ 场景/ 下/ 的/ 性能/ 对比/ 从图/ 8/ 中/ 可以/ 看出/ ,/ 这/ 6/ 种/ 分配/ 方案/ 在/ 费用/ 上/ 差异/ 较大/ ./ 从/ 总体/ 来看/ ,/ 第/ 3/ 种/ 和/ 第/ 4/ 种/ 方案/ 费用/ 较/ 低/ ,/ 这/ 是因为/ 多路径/ (/ γ/ =/ 0/ )/ 方案/ ,/ 折中/ 参数/ λ/ =/ 0/ ,/ 即/ 只/ 考虑/ 费用/ 最优/ ,/ 与/ 单一/ 路径/ (/ 费用/ 低/ )/ 方案/ 目的/ 相同/ ;/ 第/ 1/ 种/ 和/ 第/ 2/ 种/ 方案/ 费用/ 较/ 低/ ;/ 而/ 第/ 5/ 种/ 和/ 第/ 6/ 种/ 方案/ 费用/ 较/ 高/ ,/ 这/ 是因为/ 多路径/ (/ γ/ =/ 0.97/ )/ 方案/ 折中/ 参数/ λ/ =/ 10000/ ,/ 几乎/ 只/ 考虑/ 了/ 性能/ 最优/ ,/ 忽略/ 了/ 费用/ 的/ 影响/ ,/ 与/ 单一/ 路径/ (/ 性能/ 好/ )/ 方案/ 目的/ 相同/ ./ 然后/ 两/ 两/ 对比/ 方案/ 的/ 费用/ ./ 对比/ 平均分配/ 方案/ ,/ 多路径/ (/ γ/ =/ 0.5/ ,/ λ/ =/ 500/ )/ 方案/ 在/ 费用/ 上/ 普遍/ 较/ 低/ ;/ 对比/ 单一/ 路径/ (/ 费用/ 低/ )/ 方案/ ,/ 多路径/ (/ γ/ =/ 0/ ,/ λ/ =/ 0/ )/ 方案/ 费用/ 要/ 低/ ;/ 对比/ 单一/ 路径/ (/ 性能/ 好/ )/ 方案/ ,/ 多路径/ (/ γ/ =/ 0.97/ ,/ λ/ =/ 10000/ )/ 方案/ 费用/ 偏高/ ./ 从图/ 9/ 中/ 可以/ 看出/ ,/ 这/ 6/ 种/ 分配/ 方案/ 的/ 性能/ 差异/ 也/ 较大/ ./ 从总体上/ 来看/ ,/ 第/ 5/ 种/ 和/ 第/ 6/ 种/ 方案/ 性能/ 最好/ ,/ 这/ 是因为/ (/ γ/ =/ 0.97/ ,/ λ/ =/ 10000/ )/ 方案/ 几乎/ 只/ 考虑/ 了/ 性能/ 最优/ ,/ 而/ 单一/ 路径/ (/ 性能/ 好/ )/ 方案/ 也/ 是/ 只/ 考虑/ 了/ 性能/ ,/ 第/ 1/ 种/ 和/ 第/ 2/ 种/ 方案/ 性能/ 较/ 好/ ;/ 而/ 第/ 3/ 种/ 和/ 第/ 4/ 种/ 方案/ 的/ 性能/ 最差/ ,/ 这/ 是因为/ 这/ 两种/ 方案/ 都/ 只/ 考虑/ 了/ 费用/ 最优/ ,/ 而/ 忽略/ 了/ 性能/ ./ 然后/ 两/ 两对/ 比方/ 描述/ 值案/ 的/ 性能/ ./ 对比/ 平均分配/ 方案/ ,/ 多路径/ (/ γ/ =/ 0.5/ ,/ λ/ =/ 500/ )/ 方案/ 在/ 性能/ 上/ 普遍/ 要/ 好/ ;/ 对比/ 单一/ 路径/ (/ 费用/ 低/ )/ 方案/ ,/ 多路径/ (/ γ/ =/ 0/ ,/ λ/ =/ 0/ )/ 方案/ 性能/ 稍差/ ;/ 对比/ 单一/ 路径/ (/ 性能/ 好/ )/ 方案/ ,/ 多路径/ (/ γ/ =/ 0.97/ ,/ λ/ =/ 10000/ )/ 方案/ 性能/ 要/ 好/ ./ 由/ 上面/ 费用/ 和/ 性能/ 的/ 比较/ 可/ 得知/ ,/ 本文/ 所述/ 的/ 多路径/ 分配/ 方案/ 能/ 更好/ 地/ 按照/ 移动/ 主机/ 的/ 需求/ 分配/ 和/ 控制/ 流量/ ./ 由/ λ/ 决定/ 费用/ 和/ 性能/ 之间/ 的/ 权衡/ 关系/ ./ 当/ λ/ 取值/ 较/ 小时/ ,/ 多路径/ 方案/ 可以/ 做到/ 费用/ 最低/ ;/ 当/ λ/ 取值/ 较大/ ,/ 多路径/ 方案/ 可以/ 做到/ 性能/ 最好/ ;/ λ/ 取/ 中间/ 值/ ,/ 多路径/ 方案/ 可以/ 做到/ 费用/ 和/ 性能/ 两者/ 的/ 折中/ ./ 再/ 对/ 这些/ 方案/ 的/ 复杂性/ 进行/ 分析/ ./ 在/ 多路径/ 方案/ 中/ ,/ 首先/ 求解/ 了/ 一个/ 线性规划/ 问题/ ,/ 采用/ 内点/ 法时/ 该/ 问题/ 具有/ 多项式/ 级/ O/ (/ n3/ )/ 的/ 复杂度/ [/ 13/ ]/ ./ 然后/ 是/ 求解/ 费用/ 和/ 性能/ 曲线/ 与/ 目标/ 函数/ 的/ 相切/ 点/ ,/ 这/ 两个/ 函数/ 都/ 是/ 多项式/ 函数/ ,/ 因此/ 具有/ 多项式/ 级/ O/ (/ n4/ )/ 的/ 复杂度/ ./ 最后/ 再/ 通过/ 费用/ 和/ 性能/ 求解/ 流量/ 分配/ ,/ 这是/ 一个/ 多项式/ 级/ O/ (/ n2/ )/ 的/ 复杂度/ 问题/ ./ 因此/ ,/ 多路径/ 方案/ 具有/ O/ (/ n4/ )/ 的/ 复杂度/ ./ 平均分配/ 方案/ 可/ 经过/ 有限/ 步/ 将/ 流量/ 分配/ 在/ 各个/ 链路/ 上/ ,/ 因此/ 是/ 一个/ O/ (/ 1/ )/ 的/ 问题/ ./ 单一/ 路径/ 的/ 两种/ 方案/ 是/ 一个/ 单/ 目标/ 的/ 整数/ 规划/ 问题/ ,/ 复杂度/ 是/ O/ (/ n2/ )/ ./ 但/ 复杂性/ 估算/ 的/ 是/ 最坏/ 情况/ ,/ 一般/ 情况/ 下/ 线性规划/ 的/ 复杂度/ 不会/ 太高/ ./ 下面/ 对/ 这/ 几种/ 方案/ 进行/ 进一步/ 对比/ 和/ 分析/ ./ 从表/ 3/ 的/ 对比/ 可知/ ,/ 每种/ 方案/ 都/ 有/ 优缺点/ ,/ 但/ 相比/ 本文/ 所/ 提出/ 的/ 方案/ 虽然/ 计算/ 稍微/ 复杂/ ,/ 但/ 给出/ 的/ 流量/ 分配/ 方案/ 是/ 最为/ 合理/ 的/ ,/ 且/ 可以/ 根据/ 移动/ 主机/ 的/ 需求/ 分配/ 和/ 控制/ 流量/ ./ 综上所述/ ,/ 从/ 5.1/ 节/ 可知/ ,/ 移动/ 主机/ 不能/ 做到/ 费用/ 和/ 性能/ 均/ 为/ 最优/ ./ 当/ 费用/ 最优/ 时/ ,/ 性能/ 较差/ ,/ 当/ 性能/ 最优/ 时/ ,/ 费用/ 较/ 高/ ,/ 因此/ 只能/ 取/ 两者/ 的/ 折中/ 方案/ ./ 而/ ISP/ 的/ 容量/ 也/ 对/ 费用/ 和/ 性能/ 有/ 一定/ 的/ 影响/ ,/ 在/ 相同/ 的/ 收费/ 策略/ 和/ 链路/ 性能/ 的/ 条件/ 下/ ,/ 应该/ 选取/ 较大/ 容量/ 的/ ISP/ ./ 从/ 5.2/ 节/ 和/ 5.3/ 节/ 可知/ ,/ 本文/ 所/ 提出/ 的/ 费用/ 和/ 性能/ 最优/ 方案/ 虽然/ 计算/ 稍微/ 复杂/ ,/ 但/ 计算/ 出/ 的/ 分配/ 方案/ 能够/ 满足/ 移动/ 主机/ 的/ 需求/ ./ Page9/ 对于/ 优化/ 费用/ 和/ 性能/ 这个/ 问题/ ,/ 选择/ 合适/ 的/ 折中/ 参数/ λ/ 很/ 重要/ ,/ 当/ 需要/ 费用/ 较/ 小时/ ,/ 选择/ 较/ 小/ 的/ 表/ 36/ 种/ 流量/ 分配/ 方案/ 的/ 对比/ 多路径/ (/ γ/ =/ 0.5/ )/ 方案/ 较/ 低/ 较/ 好/ O/ (/ n4/ )/ 费用/ 和/ 性能/ 根据/ 移动用户/ 需求/ 定制/ ,/ 都/ 能/ 做到/ 较优/ 计算/ 稍微/ 复杂/ 平均分配/ 方案/ 较/ 高/ 较差/ O/ (/ 1/ )/ 多路径/ (/ γ/ =/ 0/ )/ 方案/ 最低/ 最差/ O/ (/ n4/ )/ 单一/ 路径/ (/ 费用/ 低/ )/ 方案/ 较/ 低/ 较差/ O/ (/ n2/ )/ 多路径/ (/ γ/ =/ 0.97/ )/ 方案/ 最高/ 最好/ O/ (/ n4/ )/ 单一/ 路径/ (/ 性能/ 好/ )/ 方案/ 较/ 高/ 较/ 好/ O/ (/ n2/ )/ 5.4/ 一个/ 实际/ 应用/ 的/ 例子/ 设计/ 一个/ 实际/ 应用/ 场景/ :/ 有/ 1/ 台/ 移动/ 主机/ (/ 手机/ 或/ iPad/ 等/ )/ ;/ 有/ 2/ 个/ ISP/ 网络/ (/ GPRS/ 和/ 3G/ 网络/ )/ 可/ 供/ 接入/ ;/ 收费/ 方式/ 是/ 按/ 月/ 收费/ ,/ 每个/ ISP/ 都/ 有/ 在/ 一定/ 流量/ 或者/ 时间/ 范围/ 的/ 固定/ 费用/ ConstPayment/ 和/ 超出/ 部分/ 的/ 可变/ 费用/ ExcessPayment/ ./ 实验/ 采用/ 如下/ 资费/ 标准/ :/ GPRS/ 选择/ 的/ 是/ 每月/ 5CNY/ 包/ 30MB/ 流量/ 的/ 资费/ 方式/ (/ 假设/ 带宽/ 为/ 115Kbps/ )/ ,/ 超出/ 部分/ 流量/ 0.01/ CNY/ // KB/ ;/ 3G/ 网络/ 选择/ 的/ 是/ 每月/ 50CNY/ 包/ 600MB/ 流量/ 的/ 资费/ 方式/ (/ 假设/ 带宽/ 为/ 2Mbps/ ,/ 可/ 随/ 网络/ 环境/ 而/ 变化/ )/ ,/ 超出/ 部分/ 0.1/ CNY/ // MB/ ./ 假设/ 已测/ 得/ 3G/ 网络/ 的/ RTT/ 小于/ GPRS/ 的/ RTT/ ./ 每个/ 月/ 总/ 的/ 固定/ 费用/ 为/ 5/ +/ 50/ =/ 55CNY/ ,/ 下面/ 对/ 每月/ 超出/ 费用/ 进行/ 计算/ ./ 移动/ 主机/ 可以/ 实时/ 统计/ 主机/ 对于/ 各个/ ISP/ 的/ 网络/ 使用/ 情况/ ./ 当/ 某些/ ISP/ 网络流量/ 或者/ 时间/ 没有/ 超过/ 固定/ 部分/ 时/ ,/ 根据/ 4.2/ 节/ 介绍/ 的/ 费用/ 模型/ ,/ 相当于/ Price/ 为/ 0/ ./ 若/ 用户/ 预测/ 到/ 本月/ 剩余/ 流量/ 或者/ 时间/ 不能/ 用/ 完/ ,/ 可以/ 调整/ 折中/ 参数/ λ/ 取/ 较大/ 值/ (/ γ/ →/ 1/ )/ ./ 这样/ 在/ 费用/ 不变/ 的/ 条件/ 下/ ,/ 可以/ 取得/ 较/ 好/ 的/ 性能/ ./ 当/ 所有/ ISP/ 网络流量/ 或者/ 时间/ 已经/ 超过/ 的/ 固定/ 部分/ 时/ ,/ 每个/ ISP/ 的/ 收费/ 价格/ Price/ 不为/ 0/ ./ 若/ 用户/ 考虑/ 到/ 网络/ 花费/ 较/ 少/ ,/ 则/ 可以/ 调整/ 折中/ 参数/ λ/ 取较/ 小值/ (/ γ/ →/ 0/ )/ ./ 若/ 用户/ 需要/ 处理/ 重要/ 事务/ ,/ 需要/ 让/ 性能/ 最好/ ,/ 而/ 费用/ 考虑/ 较/ 少/ ,/ 则/ 仍然/ 需要/ 调整/ λ/ 取/ 较大/ 值/ (/ γ/ →/ 1/ )/ ./ 一般/ 情况/ 下/ 需要/ 兼顾/ 费用/ 和/ 性能/ ,/ 因此/ 用户/ 可以/ 根据/ 实际/ 需要/ 调整/ λ/ 取/ 中间/ 值/ (/ 0/ </ γ/ </ 1/ )/ ./ 移动/ 主机/ 上/ 可以/ 统计/ 网络/ 的/ 使用/ 情况/ ./ 可能/ 出现/ 3/ 种/ 情况/ :/ 第/ 1/ 种/ 是/ 两种/ 网络/ 都/ 有余/ 量/ ;/ 第/ 2/ 种/ 是/ 有/ 某种/ 网络/ 的/ 余量/ 已经/ 用/ 完/ ;/ 第/ 3/ 种/ 是/ 所有/ 网络/ 的/ 余量/ 都/ 已经/ 用/ 完/ ./ 测量/ 结果/ 见表/ 4/ ./ 对于/ 第/ 1/ 种/ 情况/ ,/ 这种/ 情况/ 比较简单/ ./ ISP/ 价格/ 都/ 为/ 零/ ,/ 这/ 条/ 费用/ 和/ 性能/ 曲线/ 的/ 斜率/ 为/ 零/ ,/ 相当于/ 不用/ 考虑/ 费用/ ,/ 只/ 需要/ 让/ 性能/ 达到/ 最优/ ./ 依据/ 第/ 4/ 节/ 的/ 方法/ ,/ 首先/ 探测/ 可用/ 路径/ ,/ 这时/ GPRS/ 和/ 3G/ 网络/ 都/ λ/ ;/ 当/ 需要/ 性能/ 较/ 好/ 时/ ,/ 选择/ 较大/ 的/ λ/ ;/ 当/ 既/ 要/ 考虑/ 费用/ ,/ 又/ 不能/ 忽略/ 性能/ 时/ ,/ 选择/ 适中/ 的/ λ/ ./ 费用/ 和/ 性能/ 都/ 较为/ 均衡/ ,/ 计算/ 量/ 小/ 费用/ 较/ 低/ ,/ 计算/ 稍微/ 简单/ 性能/ 最好/ ,/ 计算/ 稍微/ 简单/ 可用/ ./ 测量/ 出/ 这些/ 路径/ 的/ RTT/ ./ 一般/ 情况/ 下/ 3G/ 网络/ 的/ RTT/ 较/ 小/ ./ 实验/ 结果/ 是/ :/ 当/ 总流量/ 小于/ 或者/ 等于/ 3G/ 网络/ 的/ 容量/ 时/ ,/ 选择/ 使用/ 3G/ 网络/ ;/ 当/ 总流量/ 大于/ 3G/ 网络/ 的/ 容量/ 时/ ,/ 超过/ 3G/ 网络带宽/ 部分/ 选择/ 使用/ GPRS/ ./ 若/ GPRS/ 的/ RTT/ 较/ 小时/ ,/ 则/ 实验/ 结果/ 与/ 之/ 相反/ ./ 第/ 2/ 种/ 情况/ 是/ 当/ 某种/ 网络/ 的/ 固定/ 流量/ 已经/ 用/ 完/ ,/ 如/ 3G/ 网络/ 的/ 600MB/ 已用/ 完/ ,/ 则/ 3G/ 网络/ 的/ 价格/ 为/ 0.1/ CNY/ // MB/ ,/ GPRS/ 仍为/ 0CNY/ ./ 用户/ 可/ 调节/ λ/ 的/ 取值/ ,/ 选择/ 合适/ 的/ 费用/ 和/ 性能/ 取值/ ./ 如/ 某/ 一/ 时刻/ 有/ 300KB/ 的/ 流量/ ,/ 计算/ 出/ 的/ 费用/ 性能/ 曲线/ 如图/ 10/ 所示/ ./ 若/ 用户/ 想要/ 费用/ 最少/ ,/ 则/ 选取/ 较/ 小/ 的/ λ/ (/ γ/ →/ 0/ )/ ,/ 如取/ 0/ (/ γ/ =/ 0/ )/ 时/ ,/ 费用/ 为/ 0CNY/ ,/ 性能/ 为/ 2/ ;/ 若/ 用户/ 想要/ 性能/ 最好/ ,/ 则/ 选取/ λ/ 较大/ (/ γ/ →/ 1/ )/ ,/ 如取/ 10000/ (/ γ/ =/ 0.97/ )/ ,/ 费用/ 为/ 0.03/ CNY/ ,/ 性能/ 为/ 1/ ;/ 若/ 用户/ 想要/ 均衡/ 费用/ 和/ 性能/ ,/ 则/ 可/ 选择/ λ/ =/ 500/ (/ γ/ =/ 0.5/ )/ 时/ ,/ 费用/ 为/ 0.15/ CNY/ ,/ 性能/ 为/ 1.5/ ./ 图/ 10/ 当/ 3G/ 流量/ 用/ 完时/ 的/ 费用/ 和/ 性能/ 关系/ 图/ 第/ 3/ 种/ 情况/ 是/ 当/ 两种/ 网络流量/ 都/ 已经/ 用/ 完/ ,/ 则/ GPRS/ 的/ 价格/ 为/ 0.01/ CNY/ // KB/ ,/ 3G/ 网络/ 的/ 价格/ 为/ 0.1/ CNY/ // MB/ ./ 若有/ 300KB/ 的/ 流量/ ,/ 同样/ 可/ 求解/ 出/ 的/ 曲线图/ 如图/ 11/ 所示/ ,/ 由于/ 3G/ 网络/ 的/ 性能/ 较/ 好/ ,/ 价格低/ ,/ 因此/ 无论/ λ/ 取何值/ ,/ 都/ 选择/ 3G/ 网络/ ,/ 费用/ 都/ 为/ 0.03/ CNY/ ,/ 性能/ 为/ 1/ ./ Page10/ 图/ 11/ 当/ 两种/ 网络流量/ 用/ 完时/ 的/ 费用/ 和/ 性能/ 关系/ 图/ 网络/ 使用/ 情况/ λ/ 取较/ 小值/ 第/ 1/ 种/ 情况/ C/ =/ 0/ ,/ P/ 最优/ C/ =/ 0/ ,/ P/ 最优/ C/ =/ 0/ ,/ P/ 最优/ 第/ 2/ 种/ 情况/ (/ 如/ ,/ 3G/ 网络/ 用/ 完/ )/ C/ =/ 0/ ,/ P/ =/ 2C/ =/ 0.15/ ,/ P/ =/ 1.5/ C/ =/ 0.03/ ,/ P/ =/ 1/ 第/ 3/ 种/ 情况/ C/ =/ 0.03/ ,/ P/ =/ 1C/ =/ 0.03/ ,/ P/ =/ 1C/ =/ 0.03/ ,/ P/ =/ 16/ 总结/ 和/ 进一步/ 工作/ 目前/ 移动/ 主机/ 普遍/ 具有/ 多个/ 网络接口/ ,/ 并/ 可以/ 由/ 这些/ 不同/ 的/ 接口/ 通过/ 不同/ 的/ 网络/ 服务提供商/ 接入/ 到/ Internet/ 中/ ./ 而/ 以/ IPv6/ 为/ 标志/ 的/ 下一代/ 互联网/ 的/ 出现/ 为/ 移动/ 主机/ 带来/ 了/ 更/ 大/ 便利/ ,/ 解决/ 了/ 移动/ 主机/ 对于/ 多个/ IP地址/ 的/ 需求/ 和/ 移动/ 网络安全/ 方面/ 的/ 问题/ ./ 在/ 这样/ 的/ 条件/ 下/ ,/ 移动/ 主机/ 与/ Internet/ 之间/ 就/ 可能/ 存在/ 多条/ 路径/ ,/ 但/ 这些/ 路径/ 的/ 费用/ 和/ 性能/ 取决于/ ISP/ 的/ 收费/ 策略/ 和/ 网络通信/ 能力/ ,/ 因此/ 不能/ 简单/ 地/ 选择/ 其中/ 一条/ 或者/ 多条/ 路径/ ./ 本文/ 主要/ 解决/ 了/ 多/ 接口/ 移动/ 主机/ 的/ 最优化/ 费用/ 和/ 性能/ 的/ 流量/ 分配/ 问题/ ./ 首先/ ,/ 对/ 移动/ 主机/ 与/ Inter/ -/ net/ 通信/ 进行/ 建模/ ,/ 然后/ 针对/ 移动/ 主机/ 通信/ 的/ 特点/ ,/ 对/ 其/ 费用/ 和/ 性能/ 通过/ 两个/ 步骤/ 进行/ 最优化/ :/ 第/ 1/ 步/ ,/ 探测/ 通过/ ISP/ 的/ 可用/ 路径/ 集/ ;/ 第/ 2/ 步/ ,/ 在/ 该/ 可用/ 路径/ 集中/ ,/ 建立/ 费用/ 和/ 性能/ 的/ 双/ 目标/ 线性规划/ ,/ 按照/ 移动/ 主机/ 的/ 需求/ 求解/ ,/ 获得/ 费用/ 和/ 性能/ 最优/ 的/ 流量/ 分配/ 方案/ ./ 最后/ ,/ 本文/ 对此/ 最优化/ 方案/ 进行/ 仿真/ ,/ 并/ 与/ 几种/ 流量/ 分配/ 方式/ 进行/ 对比/ ./ 分析表明/ 分配/ 方案/ 虽然/ 计算/ 稍微/ 复杂/ ,/ 但/ 能够/ 根据/ 移动/ 主机/ 需求/ 分配/ 和/ 控制/ 流量/ ./ 本文/ 在/ 一些/ 方面/ 还/ 存在/ 着/ 不足/ ,/ 需要/ 继续/ 进行/ 研究/ ./ (/ 1/ )/ 机制/ 设计/ 问题/ ./ 由于/ 当前/ 没有/ 一个/ 统一/ 的/ 多/ 接口/ 通信/ 标准/ ,/ 使得/ 通信/ 机制/ 比较/ 混乱/ ./ 差/ 的/ 机制/ 不仅/ 会/ 使/ 通信/ 质量/ 降低/ ,/ 而且/ 会/ 浪费/ 网络/ 和/ 硬件资源/ ./ 同时/ ,/ 还有/ DNS/ 服务器/ 的/ 选择/ 、/ 路由/ 的/ 选择/ 、/ 源/ 和/ 目的/ 地址/ 的/ 选择/ 等/ ,/ 这些/ 通信/ 过程/ 是/ 多/ 接口/ 移动/ 主机/ 与/ 之前/ 单一/ 接口/ 所/ 不同/ 的/ 地方/ ./ (/ 2/ )/ 根据/ 高层/ 业务/ 流/ 区分/ 服务/ 的/ 流量/ 分配/ ./ 在/ 未来/ 的/ 工作/ 中/ ,/ 可以/ 针对/ 高层/ 不同/ 的/ 业务/ 选择/ 适当/ 的/ 链路/ 进行/ 流量/ 分配/ ./ (/ 3/ )/ 路由/ 膨胀/ 问题/ ./ 由于/ 移动/ 主机/ 具有/ 多个/ 接口/ ,/ 而且/ 访问/ 每个/ 目标/ 地址/ 具有/ 多条/ 路由/ ,/ 因此/ 会/ 导致/ 主干/ 网络/ 的/ 路由/ 剧增/ 问题/ ./ 而/ IPv6/ 的/ 引入/ 稍微/ 缓解/ 了/ 这个/ 问题/ ,/ 但是/ 需要/ 寻找/ 对症下药/ 的/ 解决/ 途径/ ./ 

