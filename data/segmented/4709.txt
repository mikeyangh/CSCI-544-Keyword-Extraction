Page1/ 软/ 错误率/ 变动/ 对/ 检查点/ 机制/ 的/ 影响/ 贾文涛/ 张春元/ (/ 国防科学技术大学/ 计算机/ 学院/ 长沙/ 410073/ )/ 摘要/ 随着/ 集成电路/ 工艺/ 进入/ 纳米/ 时代/ ,/ 芯片/ 正/ 面临/ 着/ 软/ 错误/ 的/ 威胁/ ./ 除了/ 软/ 错误/ 在/ 数量/ 上/ 的/ 威胁/ 外/ ,/ 处理器/ 还/ 面临/ 着/ 由于/ 工艺/ 变动性/ 和/ 电压/ 、/ 温度/ 、/ 位置/ 等/ 工作/ 环境/ 变动/ 而/ 导致/ 的/ 错误率/ 变动性/ 的/ 威胁/ ,/ 即/ 系统/ 的/ 错误率/ 不会/ 一直/ 稳定/ 而是/ 随着/ 时间/ 发生变化/ ./ 检查点/ 是/ 系统/ 容错/ 的/ 主要/ 机制/ ,/ 它/ 的/ 开销/ 和/ 检查点/ 的/ 间隔/ 密切相关/ ,/ 目前/ 检查点/ 间隔/ 的/ 确定/ 大多/ 是/ 基于/ 恒定/ 错误率/ 的/ ./ 但是/ 在/ 软/ 错误/ 变动/ 的/ 情况/ 下/ ,/ 自/ 适应/ 检查点/ 的/ 方法/ 比/ 固定/ 方法/ 更/ 能够/ 显著/ 降低/ 检查点/ 开销/ ,/ 它/ 通过/ 预测/ 系统/ 的/ 错误率/ 来/ 确保/ 系统/ 的/ 检查点/ 间隔/ 始终/ 与/ 最优/ 状态/ 接近/ ./ 但是/ 自/ 适应/ 检查点/ 所/ 能/ 获得/ 的/ 性能/ 改善/ 与/ 错误率/ 变动/ 的/ 具体/ 程度/ 相关/ ./ 因此/ 本文/ 研究/ 软/ 错误率/ 变动/ 的/ 形式/ 和/ 幅度/ 如何/ 影响/ 检查点/ 的/ 开销/ ./ 该文/ 开展/ 了/ 如下/ 研究/ :/ 基于/ 温度/ 、/ 电压/ 、/ 位置/ 等/ 因素/ 对软/ 错误/ 影响/ 的/ 原理/ ,/ 建立/ 了/ 一个/ 包含/ 变动/ 幅度/ 、/ 持续时间/ 等/ 参数/ 的/ 错误率/ 变动/ 的/ 模型/ ;/ 基于/ 错误率/ 变动/ 模型/ ,/ 模拟/ 了/ 在/ 理想/ 情况/ 下/ 自/ 适应/ 检查点/ 机制/ 能够/ 获得/ 的/ 性能/ 改善/ ;/ 提出/ 了/ 一种/ 基于/ 错误/ 历史/ 预测/ 错误率/ 的/ 方法/ ,/ 从而/ 验证/ 了/ 在/ 实际/ 情况/ 下/ 自/ 适应/ 检查点/ 能够/ 达到/ 的/ 效果/ ./ 实验/ 结果表明/ ,/ 变动/ 的/ 幅度/ 在/ 3/ 倍/ 以上/ 且/ 持续时间/ 在/ 12.5/ %/ 以上/ 时/ ,/ 该文/ 方法/ 就/ 能/ 获得/ 实际上/ 的/ 性能/ 改善/ ./ 关键词/ 容错/ ;/ 软/ 错误/ ;/ 错误/ 变动性/ ;/ 检查点/ ;/ 自/ 适应/ 1/ 引言/ 软/ 错误/ 是/ 由/ 宇宙/ 辐射/ 粒子/ 或/ 封装/ 材料/ 中/ 的/ 阿尔法粒子/ 诱发/ 的/ 数据位/ 翻转/ ./ 随着/ 芯片/ 工艺/ 尺寸/ 的/ 缩小/ 和/ 晶体管/ 数目/ 的/ 增多/ ,/ 芯片/ 面临/ 的/ 软/ 错误/ 的/ 威胁/ 日益/ 严峻/ ./ 相关/ 研究/ 表明/ 16nm/ 下全/ 芯片/ 的/ 软/ 错误率/ SER/ (/ Soft/ -/ ErrorRate/ )/ 是/ 180nm/ 下/ 的/ 100/ 倍/ [/ 1/ ]/ ./ 随着/ 器件/ 尺寸/ 缩小/ 至/ 纳米/ 量级/ ,/ 一次/ 粒子/ 事件/ 引发/ 多/ 单元/ 翻转/ MCU/ (/ Multiple/ -/ CellUpset/ )/ 的/ 情况/ 日益/ 增多/ ,/ 在/ 65nm/ 时/ 就/ 能/ 发生/ MCU/ ./ 很多/ 粒子/ 加速/ 试验/ 结果显示/ ,/ MCU/ 会/ 占/ 到/ 所有/ 翻转/ 的/ 50/ %/ 以上/ ,/ 甚至/ 还/ 出现/ 了/ 单次/ 50/ 位/ 的/ 翻转/ [/ 2/ ]/ ./ 这/ 将/ 使得/ 目前/ 只能/ 纠正/ 1/ 位/ 错误/ 的/ ECC/ 技术/ 难以为继/ ./ 由于/ 工艺/ 尺寸/ 的/ 缩小/ ,/ 系统/ 不仅/ 面临/ SER/ 数量/ 上/ 和/ MCU/ 的/ 威胁/ ,/ 还/ 面临/ 着/ 新/ 的/ 考验/ —/ —/ —/ 软/ 错误率/ 不再/ 恒定/ 而是/ 呈现出/ 变动性/ ./ 这/ 主要/ 是/ 由/ 器件/ 工艺/ 变动/ (/ processvariability/ )/ 和/ 系统/ 工作/ 环境/ 改变/ 造成/ 的/ ./ 晶体管/ 的/ 供电/ 电压/ 、/ 阈值电压/ 、/ 沟道/ 长度/ 等/ 底层/ 器件/ 的/ 工艺/ 变动/ 不仅/ 会/ 导致/ 高层/ 整个/ 系统/ 的/ 性能/ 和/ 功耗/ 的/ 变动/ ,/ 还会/ 导致/ SER/ 的/ 变动/ ./ 相关/ 实验/ 表明/ SRAM/ (/ StaticRandomAccessMemory/ )/ 在/ 两种/ 不同/ 数据/ 状态/ (/ 0/ // 1/ )/ 下/ 的/ SER/ 是/ 不/ 相同/ 的/ ,/ 在/ 90nm/ 时/ SER/ 差别/ 可达/ 4/ 倍/ [/ 3/ ]/ ./ 除了/ SRAM/ 型/ 电路/ 的/ SER/ ,/ 逻辑电路/ 的/ SER/ 对系统/ 的/ 影响/ 也/ 日益/ 增大/ ./ 不同于/ SRAM/ 型/ 电路/ 的/ 对称性/ ,/ 逻辑电路/ 天然/ 具有/ 很强/ 的/ 差异性/ ./ 其/ SER/ 因/ 数据/ 状态/ (/ 0/ // 1/ )/ 、/ 时钟/ 状态/ (/ HIGH/ // LOW/ )/ 的/ 不同/ 而/ 不同/ ,/ 差异/ 分别/ 可高达/ 10/ 倍/ 和/ 6/ 倍/ [/ 4/ ]/ ./ 这些/ 由/ 工艺/ 变动/ 引起/ 的/ SER/ 差别/ ,/ 在/ 系统/ 运行/ 时/ 就/ 表现/ 为/ SER/ 不会/ 恒定/ 不变/ 而是/ 随着/ 时间/ 呈现/ 变动性/ ./ SER/ 本身/ 就/ 和/ 电压/ 、/ 温度/ 、/ 辐射/ 环境/ 等/ 密切相关/ ,/ 而/ 在/ 系统/ 运行/ 时/ 这些/ 因素/ 也/ 会/ 发生变化/ ./ 如/ 很多/ 系统/ 为了/ 降低功耗/ 采用/ DVFS/ (/ DynamicVoltageandFrequencyScaling/ )/ 技术/ ,/ 这会/ 使/ 芯片/ 的/ 电压/ 发生变化/ ,/ 从而/ 也/ 使/ 系统/ 的/ SER/ 发生/ 变动/ ./ 随着/ 信息化/ 和/ 数字化/ 的/ 发展/ ,/ 计算/ 系统/ 渗入/ 各行各业/ ,/ 如/ 商业/ 航天器/ 、/ 智能/ 驾驶/ 系统/ 、/ 智能/ 城市/ 设施/ 等/ ,/ 这些/ 系统/ 的/ 工作/ 环境/ 会/ 明显/ 地/ 发生变化/ ./ 如/ 汽车/ 从/ 武汉/ 到/ 成都/ ,/ 随着/ 位置/ 变化/ ,/ SER/ 会/ 提高/ 3.5/ 倍/ ,/ 而/ 飞机/ 从/ 海平面/ 上升/ 到/ 12km/ ,/ 其/ SER/ 会/ 在/ 30min/ 内/ 增大/ 100/ 倍/ [/ 5/ ]/ ./ 综上所述/ ,/ 随着/ 未来/ 工艺/ 尺寸/ 的/ 持续/ 缩小/ ,/ 电路/ 制造/ 和/ 设计/ 造成/ 的/ SER/ 变动/ 会/ 日益加剧/ ./ 同时/ ,/ 随着/ 计算机系统/ 日益/ 广泛/ 的/ 应用/ ,/ 越来越/ 多/ 的/ 系统/ 将会/ 面临/ 更加/ 复杂多变/ 的/ 运行/ 环境/ ./ 因此/ 将来/ 系统/ 的/ SER/ 变动/ 会/ 越来越/ 普遍/ ./ 检查点/ 机制/ 是/ 目前/ 应用/ 最为/ 广泛/ 的/ 错误/ 恢复/ 技术/ 之一/ ./ 检查点/ 机制/ 的/ 运行/ 如图/ 1/ 所示/ ,/ 在/ 应用/ 执行/ 时/ 系统/ 会/ 周期性地/ 保存/ 执行/ 状态/ ,/ 一旦/ 发生/ 错误/ 就/ 返回/ 之前/ 保存/ 的/ 检查点/ 继续执行/ ./ 图/ 1/ 检查点/ 机制/ 示意图/ ./ 应用/ 运行/ 的/ 时间/ Tsolve/ 分为/ 若干/ 时间/ 片/ Tex/ ,/ 每个/ 时间/ 片/ 结束/ 后/ 保存/ 检查点/ 状态/ ,/ Tov/ 是/ 保存/ 的/ 时间/ 开销/ ./ 错误/ X/ 发生/ 后/ ,/ 就/ 可以/ 恢复/ 最近/ 已/ 保存/ 的/ 检查点/ 状态/ 并/ 继续执行/ 应用/ ,/ 这/ 避免/ 了/ 整个/ 应用/ 的/ 重新/ 执行/ 检查点/ 的/ 开销/ 定义/ 为/ (/ Ttotal/ -/ Tsolve/ )/ // Tsolve/ ,/ 它/ 和/ 检查点/ 间隔/ Tex/ 的/ 长短/ 相关/ ./ 根据/ Daly/ 点/ 模型/ ,/ 我们/ 模拟/ 了/ 在/ 不同/ 检查点/ 间隔/ 下/ 检查点/ 的/ 开销/ ./ 从图/ 2/ 可以/ 看出/ 在/ MTTE/ (/ MeanTimeToErrors/ )/ 为/ 100min/ 时/ 最优/ 检查点/ 间隔/ 为/ 21min/ ,/ 在/ 最优/ 检查点/ 间隔/ 时/ 开销/ 最小/ ./ 如果/ MTTE/ 从/ 100min/ 变动/ 到/ 10min/ 或/ 1000min/ ,/ 而/ 检查点/ 间隔/ 不/ 跟着/ 变化/ 时/ ,/ 那/ 开销/ 就/ 变成/ 550/ %/ 或/ 12/ %/ ;/ 而/ 检查点/ 间隔/ 跟着/ 变化/ 到/ 最优/ 时/ ,/ 开销/ 分别/ 为/ 237/ %/ 或/ 7/ %/ ./ 因此/ 从/ 理论/ 上/ 讲/ ,/ 基于/ SER/ 动态/ 调整/ 检查点/ 间隔/ 的/ 自/ 适应/ 检查点/ SACP/ (/ Self/ -/ AdaptiveCheckPoint/ )/ 能/ 极大/ 地/ 降低/ 容错/ 开销/ ./ Page3ACR/ [/ 7/ ]/ 和/ FTCS/ [/ 8/ ]/ 也/ 提出/ 了/ 与/ SACP/ 类似/ 的/ 方法/ ,/ 即/ 根据/ 系统/ 的/ 错误率/ 动态/ 调整/ 检查点/ 间隔/ ./ SACP/ 的/ 思路/ 是/ :/ 即使/ 错误/ 发生/ 的/ 总/ 次数/ 不变/ ,/ 通过/ 更/ 详细/ 地/ 分析/ 错误/ 发生/ 的/ 局部/ 特性/ ,/ 动态/ 地/ 调整/ 检查点/ 间隔/ 以使/ 其/ 和/ 错误率/ 更/ 匹配/ ,/ 也/ 可以/ 降低/ 容错/ 开销/ ./ SACP/ 的/ 优势/ 与/ SER/ 变动/ 的/ 幅度/ 、/ 变动/ 持续/ 的/ 时间/ 息息相关/ ./ 但是/ ,/ 导致/ 变动/ 的/ 因素/ 众多/ 且/ 对/ 变动/ 的/ 影响/ 也/ 千差万别/ ,/ 因此/ 需要/ 详细/ 评测/ ./ 本文/ 的/ 贡献/ 是/ :/ (/ 1/ )/ 根据/ 温度/ 、/ 电压/ 、/ 位置/ 等/ 因素/ 对/ SER/ 影响/ 的/ 原理/ ,/ 建立/ 了/ 一个/ SER/ 变动/ 的/ 模型/ ,/ 它/ 包括/ 了/ 变动/ 幅度/ 、/ 变动/ 持续时间/ 等/ 参数/ ./ (/ 2/ )/ 基于/ SER/ 变动/ 模型/ ,/ 模拟/ 了/ 在/ 理想/ 情况/ 下/ 自/ 适应/ 检查点/ 机制/ 能够/ 获得/ 的/ 性能/ 改善/ ,/ 同时/ 分析/ 了/ SER/ 变动/ 模型/ 中/ 的/ 每个/ 参数/ 对/ 检查点/ 开销/ 的/ 影响/ ./ (/ 3/ )/ 提出/ 了/ 一种/ 利用/ 最近/ 的/ 错误/ 历史/ 来/ 预测/ 实时/ 错误率/ 的/ 方法/ ./ 验证/ 了/ 在/ 实际/ 情况/ 下/ 自/ 适应/ 检查点/ 能够/ 达到/ 的/ 性能/ 改善/ ./ 2/ 背景/ 本文/ 的/ 背景/ 包含/ SER/ 变动/ 、/ 检查点/ 机制/ 和/ 自/ 适应/ 检查点/ ./ SER/ 可用/ 平均/ 的/ 错误/ 发生/ 时间/ MTTE/ 衡量/ ,/ 也/ 可用/ 单位/ 时间/ 发生/ 的/ 错误/ 数来/ 衡量/ ,/ 本文/ 选择/ 后者/ ,/ 即/ SER/ =/ 1/ // MTTE/ ./ 2.1/ 软/ 错误率/ 的/ 变动/ SER/ 是/ 由/ 宇宙/ 辐射/ 粒子/ 或/ 封装/ 材料/ 的/ 杂质/ 放射/ 的/ 阿尔法粒子/ 诱发/ 的/ 数据位/ 翻转/ ,/ 计算/ 方式/ 为/ [/ 9/ ]/ 其中/ ,/ 宇宙/ 辐射/ 通量/ F/ 与/ 海拔高度/ 、/ 纬度/ 、/ 太阳/ 周期/ 、/ 防护/ 材料/ 厚度/ 等/ 因素/ 相关/ ./ A/ 是/ 电路/ 对/ SER/ 敏感/ 的/ 面积/ ./ Qcrit/ 是/ 数据位/ 翻转/ 需要/ 的/ 临界/ 电荷/ ,/ 与/ 电容/ 、/ 电压/ 成正比/ ,/ 也/ 与/ 温度/ 有关/ ./ Qs/ 和/ 常数/ K/ 是/ 电路/ 相关/ 的/ 参数/ ./ 根据/ 目前/ 掌握/ 的/ 相关/ 文献/ ,/ 对/ SER/ 有/ 影响/ 的/ 外部环境/ 因素/ 如表/ 1/ 所示/ ./ 维度/ 、/ 太阳/ 周期/ 等/ 因素/ 对/ SER/ 影响/ 较/ 复杂/ ,/ 本文/ 不予/ 研究/ ./ 由表/ 1/ 可见/ ,/ 对于/ 变动/ 因素/ X/ ∈/ {/ Al/ ,/ TH/ ,/ V/ ,/ T/ }/ ,/ 当/ 每个/ 因素/ 单独/ 变化/ 时/ ,/ SER/ 近似/ 等于/ 其中/ ,/ X0/ 和/ SER0/ 为/ 已知/ 的/ 参考值/ ;/ Cx/ 为/ 常数/ ,/ 表示/ 每/ 单位/ X/ 的/ 变动/ 造成/ 的/ SER/ 提高/ 或/ 减低/ 的/ 倍数/ ./ 例如/ ,/ 高度/ 每/ 升高/ 1km/ ,/ SER/ 增大/ e0/ ./ 8/ 倍/ ,/ 所以/ Cx/ =/ 0.8/ ./ Cx/ </ 0/ 表示/ SER/ 随/ X/ 的/ 增大/ 而/ 减小/ ,/ 如/ 电压/ 、/ 防护/ 材料/ 厚度/ 等/ ./ 可变/ 因素/ 高度/ (/ AL/ )/ SER0/ / e0/ ./ 9x/ -/ 0.03/ x/ ×/ x/ [/ 5/ ]/ 超过/ 100/ (/ 0/ ~/ 12km/ )/ 维度/ (/ LA/ )/ 混凝土/ 厚度/ (/ TH/ )/ SER0/ / e/ -/ 2.7/ x/ [/ 10/ ]/ 太阳活动/ 电压/ (/ V/ )/ SER0/ / e/ -/ 1.3/ x/ +/ 0.3/ [/ 11/ ]/ 3/ (/ 0.4/ ~/ 1.0/ V/ )/ @/ 45nm/ 温度/ (/ T/ )/ 注/ :/ / 温度/ 对/ 错误率/ 的/ 影响/ 除了/ 通过/ Qcrit/ 外/ ,/ 还有/ 噪音/ 等/ 多种/ 途径/ ,/ 这里/ 采用/ 总体/ 上/ 的/ 数据/ ,/ 在/ 21/ 基础/ 上/ 每/ 增加/ 10/ 错误率/ 加倍/ [/ 13/ ]/ ./ 综上所述/ ,/ 由于/ 环境因素/ 导致/ 的/ SER/ 变动/ 幅度/ 有/ 几倍/ 至/ 百倍/ ,/ 再/ 加上/ 制造/ 工艺/ 和/ 设计/ 变动/ 导致/ 的/ SER/ 差异/ ,/ SER/ 的/ 变动/ 幅度/ 会/ 达到/ 千倍/ ./ 2.2/ 检查点/ 机制/ 检查点/ 机制/ 中/ 的/ 一个/ 重要/ 问题/ 是/ 程序执行/ 多久/ 才/ 保存/ 状态/ ,/ 这/ 称为/ 检查点/ 间隔/ 的/ 确定/ ./ Daly/ 图/ 1/ 所示/ 的/ 检查点/ 运行/ 方式/ ,/ 将/ 总/ 的/ 运行/ 时间/ 分为/ 应用/ 运行/ 时间/ 、/ 检查点/ 保存/ 时间/ 、/ 错误/ 恢复/ 时间/ 和/ 重复/ 计算/ 时间/ ,/ 并/ 对/ 每个/ 部分/ 分别/ 建立/ 数学模型/ ./ 在/ 总/ 的/ 运行/ 时间/ 最小/ 的/ 前提/ 下/ ,/ Daly/ 求解/ 数学模型/ 得到/ 最优/ 检查点/ 间隔/ 的/ 计算方法/ ./ Tex/ =/ 其中/ ,/ δ/ 为/ 检查点/ 保存/ 开销/ ,/ 等于/ 图/ 1/ 中/ 的/ Tov/ ./ 式/ (/ 2/ )/ 是/ 分段/ 函数/ ,/ 原因/ 是/ Daly/ 建立/ 的/ 数学模型/ 没有/ 精确/ 解/ ,/ 只能/ 通过/ 高阶/ 多项式/ 逼近/ 精确/ 解/ ,/ 式/ (/ 2/ )/ 上半/ 部分/ 给出/ 的/ 是/ 基于/ 三阶/ 多项式/ 的/ 近似/ 解/ ./ 精确/ 解/ 的/ 最大值/ 是/ 1/ // SER/ ,/ 只有/ 在/ δ/ 大于/ 2/ // SER/ 时/ 精确/ 解才/ 接近/ 最大值/ ,/ 因此/ 此时/ 直接/ 使用/ 最大值/ 比/ 基于/ 多项式/ 的/ 近似/ 解/ 更为/ 精确/ ./ Daly/ 的/ 检查点/ 模型/ 和/ 检查点/ 间隔/ 计算方法/ 是/ 对/ Young/ 开销/ 误差/ 从/ 5/ %/ 降低/ 为/ 0.2/ %/ ./ 本文/ 需要/ 精确/ 地/ 获得/ 各种/ 方法/ 在/ 不同/ SER/ 下/ 的/ 开销/ ,/ 因此/ 本文/ 采用/ 了/ Daly/ 的/ 检查点/ 模型/ 和/ 检查点/ 间隔/ 计算方法/ ./ 2.3/ 自/ 适应/ 检查点/ 机制/ 在/ 高性能/ 计算/ 、/ 云/ 计算/ 等/ 领域/ 系统/ 呈现出/ 日益/ 增大/ 的/ 复杂性/ 和/ 差异性/ ,/ 如/ 任务/ 的/ 特征/ 、/ 资源/ 的/ 利用率/ 、/ 系统/ 的/ 错误率/ 等/ 因素/ 都/ 会/ 动态/ 地/ 变化/ ./ 因此/ 人们/ 提出/ 了/ 多种/ 自/ 适应/ 的/ 检查点/ 机制/ ,/ 以/ 根据/ 系统/ 的/ 状态/ 动态/ 地/ 调整/ 检查点/ 间隔/ ,/ 如表/ 2/ 所示/ ./ Page4/ 方法/ ACR/ [/ 7/ ]/ FTCS/ [/ 8/ ]/ 网格/ 计算/ 中/ 的/ 资源/ 各异/ ,/ MFCA/ [/ 15/ ]/ 网格/ 计算/ 中/ 资源/ 的/ 利用率/ 本文/ 本文/ 与/ 之前/ 工作/ 的/ 主要/ 不同/ 是/ 本文/ 研究/ 的/ 错误/ 变动/ 的/ 形式/ 更为/ 复杂/ 、/ 变动/ 幅度/ 更为/ 巨大/ ./ 3/ 参数/ 化/ 犛/ 犈/ 犚/ 的/ 变动/ 本文/ 的/ 目的/ 是/ 以/ 恒定/ 的/ SER/ 作为/ 参照/ ,/ 研究/ 不同/ 的/ SER/ 变动/ 对/ 检查点/ 性能/ 的/ 影响/ ,/ 为此/ 我们/ 先/ 要/ 参数/ 化/ SER/ 变动/ ./ SER/ (/ t/ )/ 表示/ 时刻/ t/ 时/ 的/ 系统/ 软/ 错误率/ ,/ 假设/ 系统/ 初始/ 的/ 错误率/ 为/ SER0/ ,/ 即/ SER/ (/ 0/ )/ =/ SER0/ ,/ 则/ 恒定/ 条件/ 下/ 的/ 软/ 错误率/ SERc/ (/ t/ )/ 为/ 根据/ 式/ (/ 1/ )/ ,/ 变动/ 条件/ 下/ 的/ 软/ 错误率/ SERv/ (/ t/ )/ 为/ 其中/ X/ ∈/ {/ Al/ ,/ TH/ ,/ V/ ,/ T/ }/ ,/ 下面/ 我们/ 来/ 确定/ X/ 随/ 时间/ t/ 的/ 变动/ ./ X/ 随/ 时间/ 的/ 变动/ 与/ 系统/ 的/ 用途/ 、/ 工作/ 环境/ 等/ 因素/ 密切相关/ ./ 通常/ X/ (/ t/ )/ 变动/ 可/ 分为/ 跳跃/ 变动/ (/ 如/ 电压/ )/ 和/ 连续/ 变动/ (/ 如/ 高度/ 、/ 温度/ )/ ./ 跳跃/ 变动/ 时/ 我们/ 用式/ (/ 4/ )/ 描述/ X/ (/ t/ )/ 相对/ 参考点/ X0/ 的/ 变动/ :/ 其中/ ,/ 参数/ a/ 为/ X/ (/ t/ )/ 在/ 参考点/ X0/ 基础/ 上/ 的/ 具体/ 变动/ 幅度/ ;/ a/ >/ 0/ 表示/ 在/ X0/ 基础/ 上/ 增大/ ,/ a/ </ 0/ 表示/ 减小/ ;/ T/ 是/ X/ (/ t/ )/ 变动/ 的/ 周期/ ,/ 式/ (/ 4/ )/ 通过/ 取模/ 运算/ 实现/ 了/ X/ (/ t/ )/ 以/ T/ 为/ 周期/ 进行/ 变动/ ;/ Tv/ 表示/ 变动/ 幅度/ a/ 持续/ 的/ 时间/ ,/ 它/ 的/ 范围/ 为/ 0/ / Tv/ </ T/ ,/ Tv/ =/ 0/ 时/ 相当于/ X/ (/ t/ )/ 不/ 变动/ ./ 图/ 3/ 是/ a/ =/ -/ 0.5/ 时/ X/ (/ t/ )/ 跳变/ 的/ 示例/ ,/ 其中/ 周期/ T/ =/ 800/ ,/ 跳变/ 持续时间/ Tv/ =/ 400/ ./ 图/ 3/ 中/ 没有/ 给出/ 时间/ 单位/ ,/ 因为/ 各个/ 因素/ 的/ 具体/ 变动/ 的/ 时间/ 有/ 很大/ 差别/ ,/ 图中/ 只是/ 变动/ 形式/ 的/ 示例/ ./ 当/ 连续/ 变动/ 时/ 我们/ 用式/ (/ 5/ )/ 表示/ X/ (/ t/ )/ X/ (/ t/ )/ =/ X0/ ,/ X0/ +/ a/ ×/ sin/ (/ π/ (/ t/ -/ T/ +/ Tv/ )/ // Tv/ )/ ,/ t/ %/ T/ >/ T/ -/ {/ 图/ 3/ 也/ 给出/ 了/ a/ =/ 1/ 时/ 的/ X/ (/ t/ )/ 连续/ 变动/ ./ 这里/ 用/ sin/ 函数/ 表示/ 变动/ ,/ 主要/ 是因为/ sin/ 函数/ 是/ 周期函数/ 且/ 其/ 导数/ 也/ 是/ 变动/ 的/ ,/ 这/ 对/ 错误/ 预测/ 是/ 一个/ 挑战/ ./ 结合/ 式/ (/ 3/ )/ ,/ 连续/ 变动/ 的/ 软/ 错误率/ 为/ SERv/ (/ t/ )/ =/ 我们/ 令/ A/ =/ Cx/ ×/ a/ ,/ 因为/ Cx/ 是/ 单位/ X/ 的/ 变动/ 幅度/ 引起/ 的/ SER/ 倍数/ ,/ a/ 为/ X/ 的/ 具体/ 变动/ 幅度/ ,/ 所以/ 参数/ A/ 表示/ 具体/ 的/ X/ 变动/ 所/ 引起/ 的/ SER/ 倍数/ ./ 如/ 对于/ 高度/ Cx/ =/ 0.8/ 表示/ 每/ 升高/ 1km/ ,/ SER/ 增大/ e0/ ./ 8/ 倍/ ,/ 若/ a/ =/ 5km/ ,/ 则/ A/ =/ 4/ 表示/ 最大/ 变动/ 幅度/ 为/ e4/ 倍/ ./ 图/ 4/ 是/ A/ =/ -/ 1/ ,/ A/ =/ 3/ 的/ 连续/ 变动/ 和/ A/ =/ 0.5/ 的/ 跳变/ 的/ SERv/ (/ t/ )/ 示例/ ./ 式/ (/ 6/ )/ 中/ 如果/ A/ =/ 0/ 则/ 表示/ SER/ 不随/ 时间/ 变动/ ./ 每个/ 周期/ T/ 中/ 错误/ 发生/ 的/ 总/ 次数/ 是/ SERv/ (/ t/ )/ 在/ 时间/ 0/ 到/ T/ 上/ 的/ 积分/ ./ 从图/ 4/ 可知/ ,/ 当/ A/ =/ 3/ 时/ 错误/ 总/ 次数/ 大于/ A/ =/ 0/ (/ 不/ 变动/ )/ 和/ A/ =/ -/ 1/ 时/ 的/ 错误/ 总/ 次数/ ./ 由于/ 容错/ 开销/ 和/ 错误/ 发生/ 次数/ 密切相关/ ,/ 而/ 本文/ 研究/ 的/ 目的/ 是/ 错误/ 变动/ 对/ 容错/ 代价/ 的/ 影响/ ,/ 所以/ 必须/ 消除/ 错误/ 次数/ 对/ 开销/ 的/ 影响/ ./ 为此/ ,/ 我们/ 引入/ 参数/ K/ 对/ 错误/ 次数/ 进行/ 均等化/ ./ SER/ 不/ 变动/ 时/ 每个/ 周期/ Page5T/ 中/ 发生/ 的/ 错误/ 总数/ 为/ ∫/ 我们/ 用式/ (/ 7/ )/ 进行/ 均等化/ 错误/ 次数/ :/ 所以/ ,/ K/ =/ SER0/ ×/ T/ ∫/ 由/ A/ 和/ Tv/ // T/ 决定/ ./ 错误/ 总数/ 均等化/ 后/ 的/ SERv/ 为/ SERv/ (/ t/ )/ =/ {/ SER0/ ×/ K/ ,/ SER0/ ×/ KeA/ ×/ sin/ (/ π/ (/ t/ -/ T/ +/ Tv/ )/ // Tv/ )/ ,/ t/ %/ T/ >/ T/ -/ 式/ (/ 8/ )/ 中/ SERv/ (/ t/ )/ 的/ 示例/ 见图/ 5/ ./ 图/ 5/ 均等化/ 后/ SER/ 随/ 时间/ 的/ 变动/ 形式/ 示例/ 本文/ 研究/ 的/ 变动/ 错误率/ 对/ 容错/ 开销/ 的/ 影响/ 都/ 是/ 以式/ (/ 8/ )/ 为/ 基础/ 的/ ,/ 我们/ 再/ 总结/ 一下/ 相关/ 参数/ ./ (/ 1/ )/ 平均/ 错误率/ SER0/ ./ SER0/ 是/ 参考点/ 的/ 错误率/ ,/ 也/ 是/ SERv/ (/ t/ )/ 均等化/ 后/ 每个/ 周期/ 的/ 平均/ 错误率/ ,/ 它/ 的/ 大小/ 决定/ 着/ 每个/ 周期/ 发生/ 的/ 错误/ 总/ 次数/ ./ (/ 2/ )/ 变动/ 幅度/ A/ ./ 错误率/ 变动/ 幅度/ 的/ 定义/ 为/ SER/ _/ MAX/ // SER/ _/ MIN/ =/ e/ |/ A/ |/ ,/ 当/ A/ >/ 0/ 时为/ 增大/ 变动/ ,/ A/ </ 0/ 时为/ 减小/ 变动/ ,/ A/ =/ 0/ 时/ 不/ 变动/ ./ (/ 3/ )/ 变动/ 持续时间/ Tv/ ./ SER/ 以/ T/ 为/ 周期/ 变动/ ,/ Tv/ 表示/ 错误率/ 变动/ 持续/ 的/ 时间/ ,/ T/ -/ Tv/ 则/ 是/ SER/ 不变/ 的/ 时间段/ ./ (/ 4/ )/ 变动/ 持续时间/ 的/ 比例/ pn/ ./ 在/ 一个/ 变动/ 周期/ T/ 中/ ,/ pn/ =/ Tv/ // T/ 表示/ 变动/ 的/ 时间/ 比例/ ./ 根据/ 变动/ 是否/ 连续/ 和/ A/ 是否/ 大于/ 0/ ,/ 我们/ 将/ SERv/ (/ t/ )/ 变动/ 分为/ 表/ 3/ 所示/ 的/ 4/ 类/ ./ X/ (/ t/ )/ 连续/ 变动/ X/ (/ t/ )/ 跳跃/ 变动/ 本文/ 的/ 主要/ 工作/ 就是/ 在/ 这/ 4/ 类/ 变动/ 中/ 研究/ 参数/ SER0/ ,/ A/ ,/ Tv/ 和/ pn/ 对/ 检查点/ 开销/ 的/ 影响/ ./ 实际/ 的/ 系统/ 所/ 面临/ 的/ SER/ 变动/ 要/ 比/ 本文/ 模型/ 中/ 的/ 复杂/ 很多/ ,/ 但是/ 可以/ 看成/ 是/ 多个/ 简单/ 变动/ 的/ 相互/ 叠加/ ./ 4/ 错误率/ 预测/ 错误率/ 通常/ 用/ 一定/ 时间段/ 中/ 发生/ 的/ 错误/ 数来/ 衡量/ ,/ 在/ 错误率/ 恒定/ 时/ ,/ 选择/ 的/ 时间段/ 越长/ 计算/ 的/ 结果/ 越/ 精确/ ./ 但是/ 在/ 错误率/ 变动/ 时/ ,/ 却/ 不是/ 这样/ ,/ 图/ 6/ 是/ 用/ 最近/ 的/ 200h/ 发生/ 的/ 错误/ 数来/ 预测/ 当前/ 的/ SER/ ./ 从图/ 6/ 可以/ 看出/ ,/ 预测/ 的/ SER/ 与/ 理论/ 上/ 的/ SER/ 有/ 明显/ 的/ 延迟/ ,/ 这/ 主要/ 是/ 由于/ 选择/ 的/ 时间段/ 太长/ 了/ ,/ 因此/ 错误/ 预测/ 的/ 关键/ 是/ 选择/ 合适/ 的/ 时间段/ ./ 我们/ 把/ 用来/ 预测/ SER/ 的/ 时间段/ 称为/ 预测/ 窗口/ PW/ (/ PredictionWindow/ )/ ,/ 图/ 6/ 的/ 预测/ 窗口/ 为/ 200h/ ./ 图/ 6SER/ 预测/ 误差/ 示例/ ./ 较/ 粗/ 的/ 线/ 是/ 由式/ (/ 8/ )/ 所得/ 的/ 理论/ 上/ 的/ SER/ ,/ 散点/ 是/ 根据/ 粗线/ 模拟/ 的/ 错误/ 发生/ (/ 每个/ 点/ 代表/ 一次/ 错误/ ,/ 横坐标/ 是/ 错误/ 发生/ 时间/ ,/ 纵坐标/ 是/ 此时/ 的/ 瞬时/ SER/ )/ ,/ 细线/ 是/ 根据/ 散点/ 预测/ 的/ SER/ ./ 预测/ 窗口/ PW/ =/ 200h/ 错误率/ 预测/ 的/ 误差/ 由/ 两个/ 因素/ 导致/ :/ 随机性/ 和/ 延迟/ 性/ ./ 错误/ 发生/ 的/ 时刻/ 有/ 很/ 强/ 的/ 随机性/ ,/ 而/ 随机性/ 会/ 导致/ 错误率/ 计算精度/ 的/ 误差/ ./ 其/ 解决/ 方法/ 是/ 通过/ 多次/ 错误/ 来/ 平均/ ,/ 平均/ 的/ 次数/ 越/ 多/ 随机性/ 误差/ 就/ 越/ 小/ ./ 由于/ 预测/ 错误率/ 使用/ 的/ 是/ 历史数据/ ,/ 即使/ 随机性/ 误差/ 很小/ 但是/ 错误率/ 可能/ 在/ 这/ 段时间/ 已经/ 发生/ 了/ 变化/ ./ 这/ 称为/ 延迟/ 性/ 误差/ ./ 其/ 解决办法/ 是/ 尽量/ 用/ 最近/ 的/ 历史数据/ ,/ 所用/ 的/ 历史数据/ 越/ 接近/ 当前/ 时刻/ ,/ 延迟/ 导致/ 的/ 误差/ 就/ 越/ 小/ ./ 遗憾/ 的/ 是/ 这/ 两种/ 误差/ 的/ 解决/ 方法/ 有/ 很大/ 的/ 冲突/ ,/ 前者/ 要求/ 使用/ 更/ 多/ 的/ 错误/ 次数/ ,/ 意味着/ 要/ 采用/ 更长/ 时间段/ 的/ 历史数据/ ,/ 也/ 就/ 意味着/ 会/ 增大/ 延迟/ 性/ 误差/ ./ 这个/ 矛盾/ 在/ 错误率/ 较/ 小时/ 尤为/ 明显/ ./ 因此/ 必须/ 兼顾/ 两者/ 的/ 平衡/ ,/ 本文/ 提出/ 了/ 一种/ 动态/ 确定/ 预测/ 窗口/ 的/ 方法/ 即/ DPW/ (/ DynamicPredicationWindow/ )/ 算法/ 来/ 预测/ SER/ ./ 我们/ 首先/ 定义/ 相关/ 的/ 符号/ 和/ 函数/ ./ Page6t/ :/ 当前/ 系统/ 时间/ ;/ numbErr/ (/ pw/ )/ :/ 在/ 预测/ 窗口/ pw/ 中/ 发生/ 的/ 错误/ 数/ ;/ SER/ (/ pw/ )/ :/ 以/ pw/ 计算/ 的/ SER/ ,/ 等于/ numbErr/ (/ pw/ )/ // pw/ ;/ RE/ (/ s1/ ,/ s2/ )/ :/ 两个/ 软/ 错误率/ s1/ 和/ s2/ 的/ 相对误差/ |/ s2/ -/ s1/ |/ // s1/ ./ 算法/ 1/ ./ 基于/ 动态/ 预测/ 窗口/ 预测/ SER/ ./ 输入/ :/ 当前/ 系统/ 时间/ t/ ,/ 已/ 发生/ 的/ 错误/ 总数/ Nt/ ,/ 错误/ 发生/ 的/ 输出/ :/ 当前/ 系统/ 的/ 实时/ SER1/ ./ MTTE/ =/ t/ // Nt2/ ./ 狆/ 狑/ =/ 10/ ×/ MTTE/ // // 初始化/ 预测/ 窗口/ 3/ ./ WHILEnumbErr/ (/ 狆/ 狑/ )/ >/ 504/ ./ 狆/ 狑/ =/ 狆/ 狑/ -/ MTTE/ ;/ // // 缩小/ pw5/ ./ ENDWHILE6/ ./ IFpw/ </ 10/ ×/ MTTE7/ ./ RETURNSER/ (/ 狆/ 狑/ )/ ;/ // // 算法/ 结束/ 8/ ./ ENDIF9/ ./ s1/ =/ SER/ (/ pw/ )/ ,/ s2/ =/ SER/ (/ pw/ +/ MTTE/ )/ ;/ 10/ ./ WHILERE/ (/ s1/ ,/ s2/ )/ </ 1/ 且/ numbErr/ (/ 狆/ 狑/ )/ </ 5011/ ./ 狆/ 狑/ =/ 狆/ 狑/ +/ MTTE/ ;/ // // 扩大/ pw/ 同时/ 更新/ s1/ 和/ s212/ ./ ENDWHILE13/ ./ RETURNSER/ (/ 狆/ 狑/ )/ ;/ DPW/ 的/ 目标/ 是/ 在/ 特定/ 误差/ 限制/ 下/ 寻找/ 合适/ 的/ PW/ 从而/ 均衡/ 随机性/ 误差/ 和/ 延迟/ 性/ 误差/ ./ 我们/ 给出/ 的/ 随机性/ 误差/ 限制/ 是/ 最大/ 错误/ 数为/ 50/ ,/ 即/ 错误/ 次数/ 大于/ 50/ 后/ 我们/ 不再/ 扩大/ PW/ ./ 因为/ 此时/ 随机性/ 导致/ 的/ 误差/ 已经/ 较/ 小/ (/ 约/ 0.02/ )/ 而/ 需要/ 平衡/ 的/ 是/ 延迟/ 性/ 误差/ (/ 算法/ 3/ ~/ 5/ 行/ )/ ./ 所以/ ,/ 当/ 算法/ 在/ 第/ 3/ 行/ 发现错误/ 数/ 大于/ 50/ 时/ 就/ 缩小/ PW/ 直到/ 错误/ 数/ 小于/ 50/ ,/ 然后/ 计算/ SER/ ,/ 算法/ 结束/ ./ 错误/ 次数/ 小于/ 50/ 时/ 算法/ 需要/ 增大/ PW/ ,/ 但是/ 同时/ 需要/ 考虑/ 延迟/ (/ 算法/ 6/ ~/ 9/ 行/ )/ ,/ 我们/ 用/ PW/ 扩大/ 前后/ 的/ SER/ 相对误差/ 来/ 确保/ 延迟/ 性/ 误差/ 较/ 小/ ./ 当/ 相对误差/ 较大/ 时/ ,/ 说明/ PW/ 扩大/ 前后/ 的/ SER/ 变动/ 较大/ ,/ 延迟/ 性/ 误差/ 较/ 重要/ ./ DPW/ 能/ 实现/ 随机性/ 误差/ 和/ 延迟/ 性/ 误差/ 的/ 平衡/ ,/ 无论/ 对/ SER/ 连续/ 变动/ 还是/ 跳变/ ,/ 无论/ 向上/ 变动/ 还是/ 向下/ 变动/ ,/ 都/ 具有/ 总体/ 上/ 较/ 好/ 的/ 适应性/ ./ 5/ 验证/ 方法/ 我们/ 通过/ 模拟/ Daly/ 查点/ 的/ 开销/ ./ 错误/ 的/ 产生/ 是/ 一个/ Poisson/ 过程/ ,/ 我们/ 通过/ 随机数/ 来/ 模拟/ 它/ ./ 我们/ 实现/ 了/ 一个/ 基于/ 时间/ 步/ 的/ 检查点/ 模拟/ 方法/ ,/ 模拟/ 流程/ 如/ 过程/ 1/ 所示/ ./ 过程/ 1/ ./ 检查点/ 机制/ 模拟/ 验证/ 方法/ ./ 输出/ :/ 应用/ 本身/ 运行/ 时间/ Tsolve/ ,/ 检查点/ 开销/ 为/ (/ Ttotal/ -/ WHILE/ 模拟/ 时间/ 小于/ 检查点/ 运行/ 总/ 时间/ Ttotal/ 模拟/ 时间/ 增加/ 一个/ 时间/ 步/ step/ ;/ 如果/ 错误/ 发生/ ,/ 则/ 开始/ 恢复/ 错误/ ;/ 否则/ 如果/ 错误/ 恢复/ 完成/ ,/ 则/ 重新/ 执行/ 之前/ 的/ 检查点/ ;/ 否则/ 如果/ 检查点/ 间隔/ 完成/ ,/ 则/ Tsolve/ =/ Tsolve/ +/ Tex/ ,/ 重新/ 设定/ 检查点/ 间隔/ ./ ENDWHILE/ 在/ 具体/ 讨论/ 模拟/ 精度/ 前/ 我们/ 先/ 确定/ 检查点/ 机制/ 的/ 基本参数/ ./ 根据/ 文献/ [/ 16/ ]/ ,/ 本文/ 选取/ SER0/ 为/ 每/ 1/ // 100min/ -/ 1/ ,/ Ttotal/ =/ 3200h/ ,/ 检查点/ 保存/ 的/ 时间/ 开销/ Tov/ =/ 2min/ ,/ 错误/ 恢复/ 的/ 时间/ 开销/ Tr/ =/ 4min/ ./ 周期/ T/ 和/ Tv/ 需要/ 根据/ SER0/ 来/ 确定/ ,/ 因为/ 在/ 每个/ 变动/ 周期/ 中/ 足够/ 数量/ 的/ 错误/ 次数/ 才能/ 显示/ 出/ 错误率/ 的/ 变动/ ./ 本文/ 选择/ 周期/ T/ =/ 800h/ ,/ Tv/ =/ 400h/ ,/ 则/ pn/ =/ 1/ // 2/ ./ 本文/ 以/ 上述/ 参数/ 的/ 值/ 为/ 基础/ ,/ 研究/ 变动/ 模型/ 中/ 4/ 个/ 参数/ 的/ 变化/ 对/ 检查点/ 开销/ 的/ 影响/ ./ 5.1/ 确定/ 模拟/ 步长/ 和/ 模拟/ 次数/ 在/ 过程/ 1/ 中/ 影响/ 模拟/ 精度/ 的/ 有/ :/ 模拟/ 步长/ step/ 的/ 大小/ 和/ 每种/ 情况/ 下/ 模拟/ 的/ 次数/ ./ 步长/ 的/ 大小/ 对/ 模拟/ 的/ 精度/ 影响/ 很大/ ./ 对/ 错误率/ 为/ λ/ 的/ Poisson/ 过程/ 而言/ ,/ 由于/ 每个/ step/ 最多/ 发生/ 一次/ 错误/ ,/ 因此/ 每个/ 时间/ 步中/ 错误/ 发生/ 次数/ 的/ 期望/ 的/ 相对误差/ 为/ (/ λ/ ×/ step/ -/ 1/ ×/ (/ λ/ ×/ step/ )/ e/ -/ λ/ ×/ step/ )/ // (/ λ/ ×/ step/ )/ =/ 1/ -/ e/ -/ λ/ ×/ step/ ./ 当/ 步长/ 分别/ 为/ 1min/ ,/ 0.1/ min/ 和/ 0.01/ min/ 时/ (/ λ/ =/ SER0/ =/ 1/ // 100min/ -/ 1/ )/ ,/ 误差/ 分别/ 为/ 0.99/ %/ ,/ 0.1/ %/ 和/ 0.01/ %/ ./ 因此/ 我们/ 选择/ 步长/ 为/ 0.1/ min/ 以/ 期望/ 得到/ 0.1/ %/ 量级/ 的/ 误差/ ./ 我们/ 还要/ 确定/ 每种/ 情况/ 下/ 的/ 模拟/ 次数/ ,/ 多次/ 模拟/ 进行/ 平均/ 可以/ 降低/ 模拟/ 的/ 随机性/ 误差/ ./ 根据/ 文献/ [/ 17/ ]/ ,/ 在/ 99/ %/ 的/ 置信度/ 和/ 0.1/ %/ 的/ 预期/ 误差/ 下/ ,/ 当/ 步长/ 为/ 0.1/ min/ 时/ ,/ 每种/ 情况/ 下/ 需要/ 模拟/ 的/ 步长/ 数/ 应为/ 6.64/ ×/ 109/ ,/ 除以/ 每次/ 实验/ 的/ 总/ 步长/ 数/ 3200/ ×/ 60/ // 0.1/ ,/ 所以/ 每种/ 情况/ 下/ 实验/ 的/ 次数/ 约/ 为/ 3500/ 次/ ./ 5.2/ 模拟/ 误差/ 分析/ 和/ 优化/ 本/ 实验/ 中/ 模拟/ 的/ 精度/ 主要/ 体现/ 在/ 两个/ 方面/ :/ 一是/ 模拟/ 的/ 错误/ 发生/ 次数/ 的/ 精度/ ;/ 二是/ 模拟/ 的/ 容错/ 开销/ 的/ 精度/ ./ 我们/ 通过/ 比较/ 理论/ 计算/ 的/ 值/ 与/ 模拟/ 的/ 值来/ 分析/ 模拟/ 误差/ ./ 基于/ 上文/ 确定/ 的/ 检查点/ 的/ 基本参数/ ,/ 表/ 4/ 列出/ 了/ 理论/ 计算/ 的/ 错误/ 发生/ 次数/ 和/ 容错/ 开销/ ./ 理论/ 上/ 总/ 的/ 错误/ 发生/ 次数/ 为/ 3200/ ×/ 60/ // 100/ =/ 1920/ ./ 根据/ Daly/ 不同/ 变动/ 幅度/ 对应/ 的/ 容错/ 开销/ ./ Page7/ 理论/ 计算/ 模拟/ step/ =/ 0.1/ min1918/ ./ 731917.741911/ ./ 711906.56/ 模拟/ step/ =/ MIN/ {/ 0.1/ ,/ 0.1/ ×/ SER0/ // SERv/ (/ t/ )/ }/ 1918.211918/ ./ 971918.101918/ ./ 54/ 理论/ 计算/ 模拟/ step/ =/ 0.1/ min/ 模拟/ step/ =/ MIN/ {/ 0.1/ ,/ 0.1/ ×/ SER0/ // SERv/ (/ t/ )/ }/ 从表/ 4/ 中/ 可以/ 看出/ ,/ 当/ SER/ 不/ 变动/ 时/ (/ A/ =/ 0/ )/ 平均/ 错误/ 数为/ 1918.73/ ,/ 与/ 理论值/ 的/ 相对误差/ 只有/ 0.07/ %/ ,/ 这/ 说明/ 了/ 5.1/ 节/ 确定/ 的/ 模拟/ 步长/ 和/ 模拟/ 次数/ 的/ 有效性/ ./ 但是/ 随着/ 变动/ 幅度/ A/ 增大/ 到/ 5/ ,/ 错误/ 数/ 下降/ 为/ 1906.56/ ,/ 而/ 相对误差/ 也/ 增大/ 到/ 0.7/ %/ ./ 这/ 主要/ 是因为/ 在/ 变动/ 幅度/ 较大/ 时/ ,/ 会/ 出现/ 在/ 极/ 短时间/ 中/ 发生/ 很多/ 错误/ 而/ 步长/ 精度/ 不足/ ./ 所以/ 我们/ 对/ 模拟/ 步长/ 进行/ 了/ 改进/ ,/ 使用/ 了/ 变动/ 步长/ step/ =/ MIN/ {/ 0.1/ ,/ 0.1/ ×/ SER0/ // SERv/ (/ t/ )/ }/ ,/ 即/ 在/ 错误率/ 较大/ 时/ 使用/ 更/ 小/ 的/ 步长/ ./ 如表/ 4/ 所示/ ,/ 在/ 变动/ 步长/ 下/ 错误/ 次数/ 的/ 相对误差/ 在/ 各个/ 幅度/ A/ 下/ 都/ 小于/ 0.1/ %/ ./ 对/ 容错/ 开销/ 而言/ 也/ 类似/ ,/ 变动/ 步长/ 可/ 将/ A/ =/ 5/ 时/ 的/ 模拟/ 误差/ 从/ 1.85/ %/ 降低/ 为/ 0.63/ %/ ,/ 从而/ 保证/ 在/ 变动/ 较大/ 时/ 的/ 容错/ 开销/ 的/ 模拟/ 误差/ 小于/ 1/ %/ ./ 图/ 7/ 不同/ SER0/ 下/ 检查点/ 的/ 性能/ 开销/ (/ 柱状图/ 左/ 纵坐标/ )/ 和/ 相对/ 性能/ 改善/ (/ 散点/ 线图/ 右/ 纵坐标/ )/ (/ |/ A/ |/ =/ 3/ ,/ Tv/ =/ 400h/ ,/ pn/ =/ 1/ // 2/ )/ 我们/ 对/ 下面/ 4/ 种/ 方法/ 进行/ 了/ 模拟/ 评估/ ./ (/ 1/ )/ FIX/ ./ 检查点/ 间隔/ 在/ 执行/ 过程/ 中/ 不变/ ,/ 采用/ 平均/ 错误率/ SER0/ 确定/ 检查点/ 间隔/ ./ (/ 2/ )/ SACP/ _/ OPT/ ./ 自/ 适应/ 检查点/ 间隔/ ,/ 在/ 每个/ 检查点/ 都/ 采用/ 理论/ 上/ 的/ SER/ 计算/ 检查点/ 间隔/ ,/ 从而/ 确保/ 每个/ 检查点/ 间隔/ 都/ 是/ 最优/ 的/ ./ 这是/ 为了/ 评估/ SACP/ 可/ 达到/ 的/ 最好/ 效果/ ./ (/ 3/ )/ SACP/ _/ DPW/ ./ 自/ 适应/ 检查点/ 间隔/ ,/ 每个/ 检查点/ 采用/ DPW/ 预测/ 的/ SER/ 计算/ 检查点/ 间隔/ ./ 这是/ 评估/ SACP/ 实际上/ 能/ 获得/ 的/ 性能/ 改善/ ./ (/ 4/ )/ SACP/ _/ FTCS/ ./ 自/ 适应/ 检查点/ 间隔/ ,/ 错误/ 预测/ 的/ 方法/ 基于/ FTCS/ [/ 8/ ]/ ./ SER/ =/ 已/ 发生/ 的/ 错误/ 数/ // 已/ 运行/ 的/ 时间/ ,/ 这种/ 方法/ 是/ 动态/ 预测/ SER/ 的/ 最/ 基本/ 的/ 方法/ ./ 用来/ 与/ DPW/ 进行/ 比较/ ./ 6/ 评估/ 结果/ 为了/ 描述/ 方便/ 我们/ 约定/ :/ 将/ “/ FIX/ 开销/ -/ SACP/ 开销/ ”/ 称为/ 绝对/ 性能/ 改善/ ,/ 将/ “/ (/ FIX/ 开销/ -/ SACP/ 开销/ )/ // FIX/ 开销/ ”/ 称为/ 相对/ 性能/ 改善/ ./ 如/ 不/ 明确/ 说明/ ,/ 性能/ 改善/ 默认/ 指/ 相对/ 性能/ 改善/ ./ 6.1/ 平均/ 错误率/ 犛/ 犈/ 犚/ 0/ 图/ 7/ (/ a/ )/ 中/ 的/ 结果显示/ ,/ FIX/ 和/ SACP/ _/ OPT/ 的/ Page8/ 性能/ 开销/ 都/ 随着/ SER/ 的/ 减小/ 而/ 降低/ ./ SACP/ _/ OPT/ 的/ 绝对/ 性能/ 改善/ 从/ 19/ %/ 迅速/ 降低/ 为/ 1.3/ %/ ,/ 但是/ 相对/ 性能/ 改善/ 从/ 17/ %/ (/ SER0/ =/ 1/ // 12.5/ min/ -/ 1/ )/ 降低/ 到/ 15/ %/ (/ 1/ // 100min/ -/ 1/ )/ 后/ 趋于稳定/ ./ 这/ 是因为/ 在/ 错误率/ 很/ 小时/ ,/ 检查点/ 的/ 开销/ 主要/ 是/ 检查点/ 保存/ 的/ 开销/ ,/ 而/ 不是/ 错误/ 恢复/ 的/ 开销/ ./ SER/ 变动/ 时/ ,/ SACP/ 的/ 检查点/ 保存/ 的/ 次数/ 比/ FIX/ 的/ 要/ 少/ ./ 这/ 是因为/ 在/ 错误率/ 高时/ SACP/ 检查点/ 保存/ 次数/ 多于/ FIX/ ,/ 而/ 错误率/ 低时/ 少于/ FIX/ ,/ 但/ 总体而言/ 错误率/ 低/ 的/ 幅度/ 要/ 大于/ 错误率/ 高/ 的/ 幅度/ ./ 总之/ ,/ 在/ 错误率/ 较/ 高时/ SACP/ 可以/ 大幅度/ 的/ 降低/ 开销/ ;/ 即使/ 错误率/ 很/ 低/ ,/ SACP/ 在/ 理论/ 上/ 也/ 可以/ 获得/ 一定/ 程度/ (/ >/ 10/ %/ )/ 的/ 相对/ 性能/ 改善/ ./ 图/ 8/ 不同/ 变动/ 幅度/ A/ 下/ 检查点/ 的/ 性能/ 开销/ (/ 柱状图/ 左/ 纵坐标/ )/ 和/ 相对/ 性能/ 改善/ (/ 散点/ 线图/ 右/ 纵坐标/ )/ 变动/ 幅度/ |/ A/ |/ </ 1/ 时/ ,/ DPW/ 不会/ 获得/ 性能/ 改善/ ./ 但是/ 随着/ |/ A/ |/ 的/ 继续/ 增/ 大S/ ACP/ _/ DPW/ 获得/ 的/ 改善/ 会/ 快速/ 增大/ 到/ 13/ %/ ~/ 23/ %/ ,/ 其/ 基本上/ 的/ 走势/ 与/ OPT/ 相符/ ,/ 特别/ 是/ 对/ 图/ 8/ (/ b/ )/ 和/ (/ d/ )/ ./ 与/ FTCS/ 相比/ ,/ DPW/ 在/ A/ >/ 1/ 后能/ 获得/ 更好/ 的/ 性能/ 改善/ ,/ 随着/ A/ 的/ 增大/ 优势/ 更为/ 明显/ ./ 6.3/ 变动/ 持续时间/ 犜/ 狏/ 从/ 图/ 9/ 可以/ 看出/ 在/ pn/ 不变/ 时/ ,/ 无论/ Tv/ 如何/ 变化/ ,/ SACP/ _/ OPT/ 的/ 性能/ 改善/ 基本/ 保持/ 不变/ ,/ 对图/ 9/ (/ b/ )/ 约/ 为/ 8.5/ %/ ,/ 其他/ 约/ 为/ 15/ %/ ./ SACP/ _/ DPW/ 在/ 错误率/ 较/ 高时/ 能/ 显著/ 降低/ 开销/ (/ >/ 10/ %/ )/ ,/ 但是/ 在/ 错误率/ 小于/ 1/ // 200min/ -/ 1/ 后/ SACP/ _/ DPW/ 能/ 获得/ 的/ 益处/ 将/ 迅速/ 减小/ (/ 小于/ 5/ %/ )/ ./ 这/ 是因为/ 在/ 错误率/ 很/ 低时/ ,/ DPW/ 的/ 预测/ 精度/ 会/ 急剧/ 减小/ ,/ 无法/ 获得/ 理论/ 上/ SACP/ 的/ 好处/ ./ 与/ FTCS/ 相比/ ,/ DPW/ 能/ 获得/ 的/ 性能/ 改善/ 总是/ 更大/ ,/ 特别/ 是/ 在/ SER0/ 较/ 小时/ DPW/ 的/ 优势/ 更为/ 明显/ ./ 图/ 7/ (/ b/ )/ 、/ (/ c/ )/ 、/ (/ d/ )/ 也/ 表现/ 出/ 了/ 类似/ 的/ 结果/ ,/ 总体而言/ 向上/ 变动/ 时/ DPW/ 的/ 优势/ 比/ 向下/ 变动/ 时/ 更为/ 明显/ ./ 6.2/ 变动/ 幅度/ 犃/ 从/ 图/ 8/ 中/ 可以/ 看出/ ,/ 随着/ 变动/ 幅度/ |/ A/ |/ 的/ 增加/ ,/ SACP/ _/ OPT/ 的/ 性能/ 改善/ 会/ 迅速/ 增大/ 到/ 15/ %/ ~/ 30/ %/ ./ SACP/ _/ DPW/ 可/ 改善/ 的/ 性能/ 与/ Tv/ 密切相关/ ,/ 在/ Tv/ =/ 25h/ 时/ 性能/ 开销/ 还/ 大于/ FIX/ ./ 随着/ Tv/ 的/ 增大/ DPW/ 的/ 性能/ 改善/ 逐渐/ 接近/ OPT/ ./ 从/ 接近/ 的/ 速度/ 上/ 来看/ ,/ 图/ 9/ (/ b/ )/ 、/ (/ d/ )/ 要/ 快/ 一点/ (/ Tv/ =/ 200h/ )/ 而图/ 9/ (/ a/ )/ 、/ (/ c/ )/ 慢/ 一点/ (/ Tv/ =/ 800h/ )/ ./ 从/ 接近/ 的/ 最终/ 效果/ 上/ 看/ ,/ 图/ 9/ (/ c/ )/ 、/ (/ d/ )/ 要/ 好/ 一点/ (/ 差距/ 为/ 1.1/ %/ )/ 而图/ 9/ (/ a/ )/ 、/ (/ b/ )/ 相对/ 差一点/ (/ 差距/ 为/ 2/ %/ )/ ./ 与/ FTCS/ 相比/ ,/ DPW/ 除了/ 在/ Tv/ >/ 800h/ 时/ 的/ 开销/ 相近/ 外/ ,/ 其他/ 情况/ 均/ 比/ FTCS/ 能够/ 获得/ 更/ 多/ 的/ 性能/ 改善/ ./ Page9/ 图/ 9/ 不同/ 变动/ 持续时间/ Tv/ 下/ 检查点/ 的/ 性能/ 开销/ (/ 柱状图/ 左/ 纵坐标/ )/ 和/ 相对/ 性能/ 改善/ (/ 散点/ 线图/ 右/ 纵坐标/ )/ 6.4/ 变动/ 持续/ 的/ 时间/ 比例/ 狆/ 狀/ 从/ 图/ 10/ 可以/ 看出/ 在/ pn/ 小于/ 0.5/ 时/ ,/ SACP/ _/ OPT/ 的/ 性能/ 改善/ 迅速/ 增大/ ./ 当/ pn/ 继续/ 增大/ 时/ ,/ 图/ 10/ (/ a/ )/ 的/ 性能/ 改善/ 却/ 开始/ 下降/ 而图/ 10/ (/ b/ )/ 还是/ 继续/ 增大/ ,/ 这个/ 原因/ 比较复杂/ ./ 我们/ 通过/ 误差/ 比率/ 进行/ 说明/ ,/ 图/ 11/ 显示/ 了/ FIX/ 相对/ OPT/ 的/ 误差/ 比率/ ./ 某/ 一个/ 时间/ 点/ t/ 的/ 误差/ 比率/ ER/ (/ t/ )/ 定义/ 为/ MAX/ (/ SER/ _/ FIX/ ,/ SER/ _/ OPT/ (/ t/ )/ )/ // MIN/ (/ SER/ _/ FIX/ ,/ SER/ _/ OPT/ (/ t/ )/ )/ ,/ 当/ SER/ _/ FIX/ >/ SER/ _/ OPT/ (/ t/ )/ 时/ ,/ 称/ 此时/ 的/ 误差/ 为/ 过量/ 误差/ (/ SE/ _/ OV/ )/ ,/ 否则/ 称为/ 不足/ 误差/ ./ 图/ 11/ 显示/ 了/ 总/ 误差/ 比率/ 、/ 过量/ 误差/ 比率/ 和/ 过量/ 误差/ 占/ 总/ 误差/ 的/ 比例/ ./ 对图/ 11/ (/ a/ )/ 和/ (/ b/ )/ ,/ 总/ 误差/ 比率/ 都/ 从/ 1/ 增加/ 到/ 3.8/ (/ pn/ =/ 6/ // 8/ )/ ,/ 然后/ 开始/ 下降/ ./ 但是/ 图/ 11/ (/ a/ )/ 中/ 过量/ 误差/ 的/ 比例/ 从/ 100/ %/ 下降/ 到/ 91/ %/ ,/ 而图/ 11/ (/ b/ )/ 中/ 却/ 从/ 0/ 增加/ 到/ 94/ %/ ./ 相同/ 误差/ 下/ ,/ 过量/ 误差/ 比/ 不足/ 误差/ 对/ 检查点/ 性能/ 的/ 影响/ 要/ 大/ ,/ 这/ 也/ 与/ 已有/ 的/ 研究/ 结果/ 相符/ ,/ 所以/ 才/ 会/ 出现/ 图/ 10/ 中/ pn/ 对图/ 10/ (/ a/ )/ 、/ (/ b/ )/ 的/ 不同/ 影响/ ./ 从图/ 10/ 可以/ 看出/ ,/ DPW/ 的/ 性能/ 改善/ 和/ OPT/ 的/ 比较/ 接近/ ./ 在/ pn/ >/ 1/ // 8/ 后/ DPW/ 的/ 性能/ 改善/ 比/ FTCS/ 的/ 更好/ ./ 对于/ 跳变/ ,/ 其/ 趋势/ 也/ 类似/ ,/ 限于/ 篇幅/ 就/ 不/ 叙述/ 了/ ./ 图/ 10/ 不同/ 变动/ 持续/ 比例/ pn/ 下/ 检查点/ 的/ 开销/ (/ 柱状图/ 左/ Page10/ 图/ 11/ 不同/ 变动/ 比例/ pn/ 下/ 的/ 总/ 误差/ 比率/ 、/ 过量/ 误差/ 比率/ 7/ 总结/ 随着/ 器件/ 工艺/ 尺寸/ 的/ 缩小/ 和/ 系统/ 运行/ 环境/ 的/ 日益/ 复杂/ ,/ 系统/ 的/ SER/ 会/ 呈现出/ 明显/ 的/ 变动性/ ./ SER/ 变动/ 的/ 幅度/ 从/ 几倍/ 到/ 几百倍/ ./ 检查点/ 是/ 广为/ 使用/ 的/ 容错/ 技术/ ,/ 其/ 开销/ 和/ 检查点/ 的/ 间隔/ 密切相关/ ,/ 而/ 检查点/ 间隔/ 的/ 确定/ 又/ 和/ 错误率/ 密切相关/ ./ 自/ 适应/ 检查点/ 机制/ 通过/ 预测/ 系统/ 的/ 错误率/ 从而/ 确保/ 系统/ 的/ 检查点/ 间隔/ 始终/ 与/ 最优/ 状态/ 接近/ ./ 目前/ 的/ 研究/ 很少/ 关注/ SER/ 变动/ ,/ 本文/ 是/ 首次/ 研究/ SER/ 变动/ 对/ 检查点/ 开销/ 的/ 影响/ ./ (/ 1/ )/ 基于/ 系统/ 的/ 温度/ 、/ 电压/ 、/ 位置/ 等/ 因素/ 对软/ 错误率/ 影响/ 的/ 原理/ ,/ 本文/ 建立/ 了/ 包含/ 参数/ SER0/ ,/ A/ ,/ Tv/ ,/ pn/ 的/ 错误率/ 变动/ 的/ 模型/ ./ 根据/ SER/ 变动/ 的/ 特点/ 将/ SER/ 变动/ 分为/ 4/ 种/ 类型/ :/ 连续/ 向上/ 变动/ 、/ 连续/ 向下/ 变动/ 、/ 跳跃/ 向上/ 变动/ 和/ 跳跃/ 向下/ 变动/ ./ (/ 2/ )/ 针对/ 4/ 种/ 变动/ 类型/ ,/ 本文/ 研究/ 了/ 模型/ 中/ 每个/ 参数/ 对/ 检查点/ 性能/ 的/ 影响/ 程度/ ,/ 模拟/ 了/ 在/ 理想/ 情况/ 下/ 自/ 适应/ 检查点/ 机制/ 能够/ 获得/ 的/ 最大/ 性能/ 改善/ ./ (/ 3/ )/ 本文/ 提出/ 了/ 基于/ 动态/ 预测/ 窗口/ 算法/ 进行/ 错误率/ 的/ 实时/ 预测/ 的/ 方法/ ,/ 验证/ 了/ 在/ 实际/ 情况/ 下/ 自/ 适应/ 检查点/ 能够/ 达到/ 的/ 性能/ 改善/ ./ 实验/ 结果表明/ 变动/ 的/ 幅度/ 在/ 3/ 倍/ 以上/ 且/ 持续时间/ 在/ 12.5/ %/ 以上/ 时/ ,/ 本文/ 方法/ 就/ 能/ 获得/ 实际上/ 的/ 性能/ 改善/ ./ 本文/ 通过/ 大量/ 的/ 模拟实验/ ,/ 获得/ 了/ SER/ 变动/ 的/ 具体/ 形式/ (/ SER0/ ,/ A/ ,/ Tv/ ,/ pn/ )/ 对/ 检查点/ 开销/ 的/ 影响/ 程度/ 和/ 影响/ 的/ 趋势/ ./ 实际/ 的/ 系统/ 所/ 面临/ 的/ SER/ 变动/ 要/ 比/ 本文/ 模型/ 中/ 的/ 复杂/ 很多/ ,/ 但是/ 可以/ 看成/ 是/ 多个/ 简单/ 变动/ 的/ 相互/ 叠加/ ./ 因此/ ,/ 本文/ 的/ 研究/ 结果/ 对/ 具体/ 系统/ 的/ 容错/ 设计/ 具有/ 参考价值/ ,/ 例如/ 系统/ 是否/ 需要/ 考虑/ SER/ 变动/ 、/ 是否/ 需要/ 采用/ 自/ 适应/ 检查点/ 机制/ 等/ ./ 

