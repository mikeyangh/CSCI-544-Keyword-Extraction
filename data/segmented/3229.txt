Page1SAN/ -/ EBON/ :/ 一种/ 基于/ 结构化/ 对等网/ 的/ P2P/ 工作/ 流/ 系统/ 节点/ 定位/ 网络/ 高磊/ 曾/ 广周/ (/ 山东大学/ 计算机科学/ 与/ 技术/ 学院/ 济南/ 250101/ )/ 摘要/ 基于/ P2P/ 的/ 工作/ 流/ 系统/ 符合/ 工作/ 流/ 去/ 中心化/ 的/ 发展趋势/ ./ 目前/ ,/ P2P/ 工作/ 流/ 系统/ 主要/ 是/ 基于/ 非/ 结构化/ P2P/ 网络/ 构建/ 的/ ./ 然而/ ,/ 非/ 结构化/ P2P/ 网络/ 提供/ 的/ 泛洪/ 或/ 基于/ 超级/ 节点/ 的/ 中心化/ 发现/ 策略/ 和/ 中心化/ 的/ 负载/ 分配机制/ 无法/ 满足/ 大型/ P2P/ 工作/ 流/ 系统/ 在/ 动态/ 环境/ 下/ 的/ 需求/ ./ 因此/ ,/ 在/ 基于/ 非/ 结构化/ P2P/ 网络/ 构建/ 的/ 工作/ 流/ 系统/ 中/ ,/ 节点/ 发现/ 和/ 任务/ 负载/ 均衡/ 成为/ 制约/ 系统/ 性能/ 的/ 关键因素/ ./ 文中/ 提出/ 一种/ 新/ 的/ 基于/ 结构化/ P2P/ 网络/ 的/ 工作/ 流/ 系统/ 节点/ 定位/ 网络/ —/ —/ —/ SAN/ -/ EBON/ ./ 该/ 系统/ 采用/ 分层/ 逐步求精/ 的/ 节点/ 发现/ 策略/ ,/ 外层/ 在/ 服务/ 聚类/ 的/ 基础/ 上/ 首次/ 在/ 工作/ 流/ 系统/ 中/ 引入/ 服务/ 定位/ 网络/ 组织/ 服务/ 联盟/ ,/ 构建/ 一种/ 新/ 的/ 多层/ 结构化/ P2P/ 网络/ SAN/ ,/ 实现/ 服务/ 的/ 快速/ 发现/ ;/ 内层/ 构建/ 一种/ 新/ 的/ 负载/ 均衡/ 网络/ EBON/ ,/ 使用/ 基于/ 随机/ 图/ 的/ 增强/ 算法/ 实现/ 服务/ 联盟/ 内部/ 实时/ 的/ 去/ 中心化/ 负载/ 均衡/ ,/ 与/ SAN/ 结合/ ,/ 从而/ 达到/ 提高/ 发现/ 效率/ 和/ 精度/ 、/ 降低/ 通信/ 带宽/ 的/ 目的/ ./ 关键词/ P2P/ 工作/ 流/ 系统/ ;/ 结构化/ P2P/ 网络/ ;/ 服务/ 联盟/ ;/ 服务/ 寻址/ 网络/ ;/ 平衡/ 覆盖网/ 1/ 引言/ 基于/ P2P/ 的/ 工作/ 流/ 系统/ 是/ 一种/ 新/ 的/ 工作/ 流/ 管理系统/ ,/ 符合/ 下一代/ 工作/ 流/ 管理系统/ 去/ 中心化/ 的/ 发展趋势/ [/ 1/ ]/ ./ 对/ 等/ 计算/ 模式/ 的/ 引入/ 使/ 工作/ 流/ 节点/ 在/ 运行/ 时/ 阶段/ 直接/ 通信/ ,/ 尤其/ 实现/ 了/ 控制流/ 在/ 各/ 节点/ 中/ 的/ 分布/ ,/ 更好/ 地/ 反映/ 了/ 工作/ 流/ 的/ 分布/ 特性/ 和/ 群组/ 协作/ 的/ 社会/ 属性/ ./ 目前/ 对/ 工作/ 流/ 的/ 研究/ 主要/ 集中/ 在/ 工作/ 流/ 模型/ 及其/ 执行/ 语义/ 和/ 时序/ 约束/ 等/ 方面/ [/ 2/ ]/ ,/ 对于/ 运行/ 时/ 阶段/ 的/ 流程/ 控制/ 主要/ 依赖于/ 工作/ 流/ 中心/ 引擎/ ./ 但/ P2P/ 工作/ 流/ 系统/ 更加/ 强调/ 分布式/ 的/ 控制结构/ 和/ 对/ 等/ 点/ 之间/ 的/ 协同/ 效率/ ,/ 因此/ 高效/ 的/ 节点/ 定位/ 机制/ ,/ 即/ 服务/ 请求/ 消息/ 在/ 参与/ 节点/ 之间/ 的/ 路由/ ,/ 成为/ 影响/ 这/ 类/ 系统/ 性能/ 的/ 重要/ 因素/ ./ 文献/ [/ 3/ ]/ 通过/ 业务流程/ 组织/ 服务/ 工作/ 流/ ,/ 根据/ 全局/ 服务/ 信息/ 搜索/ 最优/ 执行/ 路径/ ,/ 但/ 在/ 缺少/ 全局/ 信息/ 的/ 对/ 等/ 环境/ 中/ 无法/ 有效/ 展开/ ./ 文献/ [/ 4/ -/ 5/ ]/ 均/ 采用/ 分布式/ 控制结构/ ,/ 其中/ 文献/ [/ 4/ ]/ 使用/ 一种/ 静态/ 路由/ 结构/ ,/ 在/ 建模/ 时/ 阶段/ 静态/ 绑定/ 了/ 任务/ 前驱/ 和/ 后继/ 节点/ 的/ 消息/ 队列/ 标识/ ;/ 文献/ [/ 5/ ]/ 则/ 采用/ 类似/ 于/ UDDI/ 的/ 中心/ 路由/ 结构/ 实现/ 对/ 执行/ 节点/ 的/ 动态/ 查询/ ;/ 静态/ 路由/ 无法/ 适应/ 动态变化/ 的/ 应用环境/ ,/ 而/ 中心化/ 的/ 动态/ 定位/ 机制/ 容易/ 形成/ 路由/ 瓶颈/ ./ SwinDeW/ 及其/ 扩展/ 系统/ [/ 6/ -/ 9/ ]/ 是/ 基于/ JXTA/ [/ 10/ ]/ 构造/ 的/ 非/ 结构化/ P2P/ 工作/ 流/ 系统/ ,/ 采用/ 了/ 动态/ 非/ 中心化/ 的/ 路由/ 机制/ 避免/ 了/ 上述/ 问题/ ./ 但/ 该/ 系统/ 通过/ 泛洪/ 实现/ 节点/ 定位/ 引入/ 较大/ 的/ 通信/ 负载/ ,/ 且/ 定位/ 效率/ 和/ 准确性/ 不高/ ;/ 通过/ 群组/ 内/ 节点/ 之间/ 的/ 协商/ 机制/ 实现/ 任务分配/ 要求/ 每个/ 节点/ 必须/ 在线/ 维护/ 本/ 群组/ 内/ 所有/ 节点/ 状态/ ,/ 在/ 动态/ 环境/ 中/ 容易/ 引发/ 网络/ 波动/ ./ 针对/ 上述/ 问题/ ,/ 本文/ 采用/ 分层/ 逐步求精/ 的/ 路由/ 策略/ ,/ 按/ 服务/ 对/ 节点/ 进行/ 聚类/ ,/ 首次/ 将/ 结构化/ P2P/ 网络/ 引入/ 工作/ 流/ 系统/ ,/ 提出/ 一种/ 新/ 的/ 基于/ 结构化/ 对等网/ 的/ P2P/ 工作/ 流/ 节点/ 定位系统/ SAN/ -/ EBON/ ./ 结构化/ P2P/ 网络/ 采用/ 基于/ DHT/ (/ DistributedHashTable/ )/ 的/ 分布式/ 发现/ 和/ 路由/ 算法/ [/ 11/ ]/ ,/ 有着/ 良好/ 的/ 定位/ 准确性/ 、/ 可扩展性/ 和/ 自/ 组织性/ ./ 基于/ 这一/ 特性/ ,/ 本/ 系统/ 外层/ 结合/ CAN/ 算法/ [/ 12/ ]/ 和/ 服务/ 聚类/ 构建/ 了/ 一种/ 新/ 的/ 结构化/ P2P/ 网络/ SAN/ (/ ServiceAddressedNet/ -/ work/ )/ ,/ 该/ 网络/ 可/ 视作/ 多层/ 结构化/ P2P/ 网络/ 的/ 叠加/ ,/ 实现/ 了/ 对/ 服务/ 联盟/ 的/ 快速/ 精确定位/ ;/ 在/ 联盟/ 中/ ,/ 内层/ 将/ 工作/ 负载/ 映射/ 为/ 随机/ 图/ 拓扑/ ,/ 采用/ 基于/ 随机/ 漫步/ 的/ EBON/ (/ EnhancedBalancedOverlayNetwork/ )/ 网络/ ,/ 可以/ 较/ 小/ 的/ 连接/ 度数/ 在/ 联盟/ 节点/ 中/ 实现/ 去/ 中心化/ 的/ 实时/ 任务/ 负载/ 分配/ ,/ 最终/ 精确定位/ 执行/ 节点/ ./ 两者/ 结合/ 提高/ 了/ 路由/ 精度/ 和/ 效率/ ,/ 降低/ 了/ 定位/ 最优/ 执行/ 节点/ 时/ 的/ 通信/ 带宽/ ,/ 达到/ 缩短/ 流程/ 实例/ 在/ P2P/ 工作/ 流/ 系统/ 中非/ 人为因素/ 执行/ 时间/ 的/ 目的/ ,/ 适用/ 于/ 节点/ 数目/ 多且/ 动态变化/ 范围/ 大/ 的/ 系统/ ./ 2SAN/ -/ EBON/ 系统结构/ 系统/ 主要/ 由/ 工作/ 流/ 模型/ 映射/ (/ WorkflowMod/ -/ elingMapping/ ,/ WMM/ )/ 、/ 流程/ 模型/ 发布/ (/ WorkflowModelingPublishing/ ,/ WMP/ )/ 和/ SAN/ -/ EBON/ 网络/ 三/ 部分/ 构成/ (/ 如图/ 1/ 所示/ )/ ./ WMM/ 在/ 建模/ 时/ 阶段/ 进行/ ,/ 将/ 已有/ 的/ 业务流程/ 映射/ 为/ SAN/ 网络/ 中/ 的/ 逻辑/ 节点/ ,/ 通过/ 流程/ 发布/ 与/ 相应/ 的/ 执行/ 节点/ 绑定/ ,/ 从而/ 实现/ 流程/ 模型/ 在/ SAN/ 网络/ 中/ 的/ 部署/ ./ 定义/ 1/ ./ 业务流程/ 可/ 表示/ 为/ 一个/ 有向图/ D/ =/ 〈/ T/ ,/ R/ 〉/ ,/ 其中/ T/ 对应/ 有向图/ 中/ 的/ 顶点/ 集/ ,/ 表示/ 流程/ 中/ 所有/ 任务/ (/ 包括/ 原子/ 任务/ 和/ 复合/ 任务/ )/ 的/ 集合/ ,/ 称为/ 任务/ 集/ ;/ R/ / T/ ×/ T/ 对应/ 有向图/ 中/ 的/ 边集/ ,/ 为/ 定义/ 在/ 任务/ 集上/ 的/ 逻辑关系/ ./ 定义/ 2/ ./ 任务/ ti/ ∈/ T/ ,/ i/ =/ 1/ ,/ 2/ ,/ …/ ,/ n/ 由/ 二元/ 组/ 表示/ (/ Task/ _/ id/ ,/ Task/ _/ des/ )/ ,/ 其中/ ,/ Task/ _/ des/ =/ (/ input/ ,/ output/ ,/ pre/ _/ condition/ ,/ post/ _/ condition/ ,/ task/ _/ seman/ -/ tic/ ,/ resource/ ,/ QoS/ )/ 为/ 任务/ 描述/ ;/ input/ ,/ output/ ,/ pre/ _/ condition/ ,/ post/ _/ condition/ 分别/ 为/ 输入/ 数据/ 、/ 输出/ 数据/ 、/ 入口/ 约束条件/ 、/ 出口/ 约束条件/ ;/ task/ _/ semantic/ 为/ 任务/ 语义/ 描述/ (/ 语义/ 描述语言/ 和/ 模型/ 在/ 此/ 不作/ 讨论/ )/ ;/ resource/ 为/ 任务/ 所/ 需/ 的/ 计算资源/ ,/ QoS/ 为/ 完成/ 该/ 任务/ 必须/ 提供/ 的/ 服务质量/ ./ Task/ _/ id/ =/ (/ tp/ _/ id/ ,/ san/ _/ id/ )/ 为/ 任务/ 标识/ ,/ tp/ _/ id/ 为/ 任务模型/ 标识/ ,/ 在/ 流程/ 模型/ 中/ 唯一/ 标识/ 一个/ 任务/ ;/ san/ _/ id/ =/ (/ x1/ ,/ x2/ ,/ …/ ,/ xd/ )/ Page3/ 是/ d/ 维/ 笛卡儿/ 坐标/ ,/ 在/ SAN/ 逻辑/ 坐标/ 空间/ 中/ 唯一/ 标识/ 一个/ 任务/ 以及/ 部署/ 了/ 该/ 任务/ 的/ 节点/ ,/ 称为/ SAN/ 坐标/ ./ 定义/ 3/ ./ SanHash/ :/ Task/ _/ des/ →/ san/ _/ id/ 是/ 定义/ 在/ T/ 上/ 的/ 映射/ ,/ 对于/ 任意/ 一个/ Task/ _/ des/ ,/ 唯一/ 确定/ 一个/ san/ _/ id/ 与/ 之/ 对应/ ,/ 该/ 映射/ 通过/ 一致性/ 散列/ 函数/ [/ 11/ ]/ 实现/ ,/ 记/ 作/ (/ x1/ ,/ x2/ ,/ …/ ,/ xd/ )/ =/ SanHash/ (/ Task/ _/ des/ )/ ./ 定义/ 4/ ./ Td/ :/ R/ →/ Rlo/ 是/ 定义/ 在/ R/ 上/ 的/ 映射/ ,/ Rlo/ 是/ 当前任务/ 的/ 局部/ 控制关系/ ,/ 由/ 二元/ 组/ (/ Tsetpre/ ,/ Tsetpost/ )/ 表示/ ,/ 其中/ ,/ Tsetpre/ =/ {/ (/ san/ _/ idj/ ,/ Lpre/ )/ |/ t/ (/ san/ _/ idj/ )/ ∈/ T/ ∧/ 〈/ t/ (/ san/ _/ idj/ )/ ,/ t/ (/ san/ _/ idi/ )/ 〉/ ∈/ R/ ,/ i/ ,/ j/ =/ 1/ ,/ 2/ ,/ …/ ,/ n/ }/ 是/ 任务/ t/ (/ san/ _/ idi/ )/ 的/ 前驱/ 任务/ 集/ ,/ Lpre/ 是/ 前驱/ 任务/ 与/ 当前任务/ 之间/ 的/ 逻辑关系/ ;/ Tsetpost/ =/ {/ (/ san/ _/ idj/ ,/ Lpost/ )/ |/ t/ (/ san/ _/ idj/ )/ ∈/ T/ ∧/ 〈/ t/ (/ san/ _/ idi/ )/ ,/ t/ (/ san/ _/ idj/ )/ 〉/ ∈/ R/ ,/ i/ ,/ j/ ∈/ 1/ ,/ 2/ ,/ …/ ,/ n/ }/ 是/ 任务/ t/ (/ san/ _/ idi/ )/ 的/ 后继/ 任务/ 集/ ,/ Lpost/ 是/ 后继/ 任务/ 与/ 当前任务/ 之间/ 的/ 逻辑关系/ ./ 通过/ SanHash/ 和/ Td/ 映射/ ,/ 业务流程/ 中/ 的/ 原子/ 任务/ 被/ 打包/ 为/ 相应/ 的/ 流程/ 服务/ 并/ 映射/ 到/ SAN/ 空间/ 中/ 的/ 逻辑/ 节点/ 上/ ,/ 即/ 定义/ 5/ ./ 定义/ 5/ ./ SAN/ 流程/ 服务/ Si/ ,/ i/ =/ 1/ ,/ 2/ ,/ …/ ,/ n/ 由/ 二元/ 组/ (/ ti/ ,/ Rlo/ )/ 表示/ ./ 由/ 上述/ 定义/ ,/ 每个/ SAN/ 逻辑/ 节点/ 由/ san/ _/ id/ 唯一/ 标识/ ,/ 即/ SAN/ 坐标/ 空间/ 中/ 的/ 不同/ 逻辑/ 节点/ 对应/ 了/ 工作/ 流/ 模型/ 中/ 的/ 不同/ 流程/ 服务/ ,/ 从而/ 实现/ 了/ 工作/ 流/ 模型/ 到/ SAN/ 坐标/ 空间/ 的/ 映射/ ./ WMP/ 将/ 经过/ 散列/ 后/ 的/ 业务流程/ 发布/ 到/ 相应/ 的/ 执行/ 节点/ ,/ 使/ 流程/ 服务/ 与/ 具体/ 的/ 执行/ 节点/ 绑定/ ,/ 从而/ 将/ 物理/ 节点/ 映射/ 到/ SAN/ 空间/ ./ 该/ 过程/ 在/ 流程/ 运行/ 时/ 阶段/ 进行/ ,/ 采用/ 自顶向下/ 由/ 物理/ 节点/ 主动/ 拉动/ 的/ 方式/ 实现/ ./ 流程/ 模型/ 的/ 定义/ 及/ 映射/ 后/ 的/ 流程/ 服务/ 可/ 由/ 系统/ 的/ 注册/ 服务器/ 统一/ 管理/ ,/ 模型/ 发布/ 则/ 在/ 运行/ 阶段/ 由/ 注册/ 节点/ 主动/ 发起/ ./ Task/ -/ des/ ;/ 1/ ./ 注册/ 节点/ 从/ 注册/ 服务器/ 下载/ 希望/ 承担/ 的/ 任务/ 描述/ 2/ ./ 与/ 本地/ 服务/ 描述/ 进行/ 匹配/ ,/ 评估/ 本地/ 资源/ ,/ 若/ 达到/ QoS/ 要求/ ,/ 则/ 在/ 本地/ 部署/ 该/ 任务/ (/ 包括/ 加载/ 相应/ 服务/ 和/ 资源/ )/ ;/ 3/ ./ 向/ 注册/ 服务器/ 注册/ 本地/ 部署/ 任务/ 和/ 加载/ 服务/ ;/ 4/ ./ 注册/ 服务器/ 将/ 部署/ 任务/ 的/ san/ _/ id/ 和/ Rlo/ 绑定/ 到/ 注册/ 节点/ ;/ 5/ ./ 注册/ 节点/ 根据/ san/ _/ id/ 加入/ 系统/ ,/ 确定/ 其/ 在/ SAN/ -/ EB/ -/ ON/ 网络/ 中/ 的/ 位置/ ,/ 根据/ Rlo/ 明确/ 需要/ 接收/ 什么/ 数据/ 并/ 将/ 自身/ 的/ 处理结果/ 传递/ 给/ 什么/ 任务/ ,/ 实现/ 流程/ 模型/ 在/ 所有/ 参与/ 节点/ 中/ 的/ 数据/ 和/ 控制/ 分布/ ./ SAN/ -/ EBON/ 网络/ (/ 见/ 第/ 3/ 节/ )/ 是/ 系统/ 数据流/ 和/ 控制流/ 运行/ 的/ 自/ 组织/ 环境/ ,/ 构成/ 系统/ 的/ 基础/ 结构/ ./ 系统/ 执行/ 节点/ 的/ 自/ 组织/ 、/ 有效/ 定位/ 、/ 加入/ 、/ 离开/ 以及/ 任务/ 实例/ 的/ 负载/ 分配/ 均/ 通过/ 该/ 网络/ 实现/ ./ 该/ 网络/ 由/ SAN/ 和/ EBON/ 两层/ 网络/ 组成/ ,/ 其中/ SAN/ 以/ 一种/ 新/ 的/ 结构化/ P2P/ 网络/ 组织/ 外层/ 定位/ ,/ 较/ 已有/ 的/ P2P/ 网络/ (/ 结构化/ 和/ 非/ 结构化/ )/ 具有/ 更/ 高/ 的/ 路由/ 效率/ 和/ 更/ 小/ 的/ 通信/ 负载/ ;/ EBON/ 以/ 随机/ 图/ 映射/ 节点/ 负载/ 状况/ ,/ 实现/ 了/ 内层/ 的/ 去/ 中心化/ 实时/ 负载/ 均衡/ ,/ 较/ 已有/ 的/ P2P/ 工作/ 流/ 系统/ (/ 均/ 采用/ 中心化/ 任务调度/ )/ 避免/ 了/ 网络/ 负载/ 波动/ 和/ 路由/ 瓶颈/ ./ 3SAN/ -/ EBON/ 网络结构/ 3.1/ SAN/ 网络/ 可/ 扩展/ 内容/ 寻址/ 网络/ (/ CAN/ )/ 在/ 结构化/ P2P/ 网络/ 中/ 引入/ 了/ 多维/ 标识符/ 空间/ 的/ 概念/ ,/ 与/ 单/ 维空间/ 中/ 线性/ 遍历/ 相比/ ,/ 路由/ 效率/ 得到/ 了/ 极大/ 的/ 提高/ ./ CAN/ 将/ 覆盖网/ 映射/ 到/ 一个/ d/ 维/ 笛卡尔/ 坐标/ 空间/ ,/ 每个/ 节点/ 的/ 位置/ 由/ 其/ 自身/ IP/ 经散/ 列后/ 得到/ 的/ d/ 维/ 坐标/ 决定/ ,/ 坐标/ 空间/ 被/ 不同/ 节点/ 分割/ 成/ 互不/ 相交/ 的/ 区域/ ,/ 且/ 每个/ 节点/ 占有/ 一个/ 区域/ ./ 但是/ CAN/ 网络/ 中/ 每个/ 区仅/ 包含/ 一个/ 节点/ ,/ 在/ 节点/ 变化/ 频繁/ 的/ 动态/ 环境/ 中/ ,/ 由于/ 区域/ 的/ 合并/ 拆分/ 将/ 引入/ 较大/ 的/ 拓扑/ 维护/ 开销/ ;/ 同时/ 像/ 所有/ 基于/ DHT/ 的/ 结构化/ P2P/ 网络/ 一样/ ,/ CAN/ 网络/ 中/ 的/ 节点/ 上/ 存储/ 的/ 是/ 指向/ 其它/ 节点/ 数据源/ 的/ 索引/ ,/ 因此/ CAN/ 中/ 的/ 目标/ 节点/ 并/ 不是/ 数据源/ 的/ 存储/ 节点/ ,/ 还/ 需/ 进行/ 二次/ 映射/ ./ 针对/ 上述/ 问题/ ,/ 在/ CAN/ 的/ 基础/ 上/ ,/ 我们/ 首先/ 用/ 服务/ 对/ 节点/ 进行/ 聚类/ ,/ 形成/ 服务/ 联盟/ ,/ 将/ 服务/ 联盟/ 映射/ 到/ 多层/ CAN/ 坐标/ 空间/ 中/ ,/ 再/ 通过/ EBON/ 网络/ 将/ 多层/ 逻辑/ 空间/ 压缩/ 到/ 一起/ ,/ 从而/ 构成/ SAN/ (/ ServiceAddressedNetwork/ )/ 网络/ ./ 定义/ 6/ ./ 承担/ 相同/ 任务/ 的/ 节点/ 构成/ 的/ 集合/ 称为/ 服务/ 联盟/ ,/ 一个/ 服务/ 联盟/ 对外/ 提供/ 同/ 一类/ 服务/ ./ 定义/ 7/ ./ 任务/ 的/ SAN/ 坐标/ 唯一/ 标识/ 坐标/ 空间/ 中/ 的/ 一个/ 逻辑/ 节点/ ,/ 称为/ 集结/ 点/ ,/ 集结/ 点/ 唯一/ 标识/ 一个/ 服务/ 联盟/ 以及/ 联盟/ 中/ 承担/ 该/ 任务/ 的/ 所有/ 物理/ 节点/ ./ 定义/ 8/ ./ 集结/ 点将/ 坐标/ 空间/ 划分/ 为/ 不同/ 的/ 区域/ ,/ 设/ 空间/ 维数/ 是/ d/ ,/ 若/ 两个/ 集结/ 点/ 坐标/ 中有/ d/ -/ 1/ 维是/ 相等/ 的/ ,/ 剩余/ 的/ 一维/ 相邻/ ,/ 则/ 称/ 两个/ 集结/ 点/ 相邻/ ,/ 相应/ 区域/ 为/ 邻接/ 区域/ ./ 集结/ 点/ 相邻/ 是/ 其/ 对应/ 联盟/ 中/ 节点/ 相邻/ 的/ 必要条件/ ./ 由/ 上述/ 定义/ ,/ SAN/ 网络/ 是/ 由/ 各/ 集结/ 点/ 共同/ 构成/ 的/ 逻辑/ 坐标/ 空间/ ,/ 两个/ 相邻/ 集结/ 点/ 沿/ 相邻/ 维度/ 划分/ 坐标/ 区域/ (/ 具体/ 划分算法/ 在/ 4.2/ 节/ 给出/ )/ ,/ 每个/ 集结/ 点/ 占有/ 一个/ 区域/ ,/ 由/ san/ _/ id/ 唯一/ 标识/ ./ 根据/ 定义/ 2/ 、/ 6/ ,/ 因为/ san/ _/ id/ 在/ 逻辑/ 空间/ 中/ 唯一/ 标识/ 一个/ 任务/ 及/ Page4/ 标识/ 承担/ 该/ 任务/ 的/ 所有/ 物理/ 节点/ ,/ 所以/ 承担/ 相同/ 任务/ 的/ 物理/ 节点/ 具有/ 相同/ 的/ SAN/ 坐标/ ,/ 将/ 被/ 映射/ 为/ 同一个/ 集结/ 点/ ,/ 从而/ 将/ 服务/ 联盟/ 映像/ 到/ SAN/ 空间/ 中/ ./ 这样/ 在/ 一个/ 坐标/ 区域/ 中/ 实现/ 了/ 分配/ 多个/ 物理/ 节点/ ,/ 使得/ SAN/ 网络/ 中/ 的/ 逻辑/ 节点/ (/ 集结/ 点/ )/ 数目/ 等于/ 流程/ 模型/ 中/ 的/ 原子/ 任务/ 数/ ,/ 相对/ 于/ CAN/ 等/ 典型/ 的/ 结构化/ P2P/ 网络/ 以及/ 非/ 结构化/ P2P/ 网络/ 极大/ 减少/ 了/ 坐标/ 空间/ 中/ 的/ 节点/ 数目/ ,/ 从而/ 有效/ 提高/ 了/ 路由/ 效率/ ./ 同时/ 在/ 一个/ SAN/ 区域/ 中/ 分配/ 多个/ 物理/ 节点/ 提高/ 了/ 区域/ 的/ 有效性/ ,/ 即/ 只要/ 有/ 一个/ 有效/ 节点/ 存在/ ,/ 区域/ 拓扑/ 就/ 保持/ 不变/ ,/ 从而/ 避免/ 了/ CAN/ 网络/ 中/ 由于/ 节点/ 频繁/ 加入/ 、/ 离开/ 给/ 系统/ 带来/ 的/ 区域/ 分裂/ 、/ 合并/ 等/ 巨大/ 的/ 结构/ 维护/ 开销/ ;/ 当/ 联盟/ 中/ 的/ 节点/ 状态/ 发生变化/ 时/ ,/ SAN/ 的/ 逻辑/ 拓扑/ 保持稳定/ ,/ 使/ 其/ 更加/ 适用/ 于/ 动态/ 环境/ ./ 但是/ 在/ 每个/ SAN/ 区域/ 中/ 并/ 不/ 存在/ 超级/ 节点/ (/ SuperNode/ ,/ SN/ )/ ,/ 域/ 内/ 节点/ 不/ 依赖/ 联盟/ 内/ 的/ 其它/ 节点/ 独立/ 路由/ ,/ 即/ 每个/ 节点/ 独立/ 与/ 相邻/ 区域/ 的/ 一个/ 或/ 多个/ 节点/ 形成/ 域间/ 邻居/ 关系/ ,/ 由此/ 形成/ 一层/ 类/ CAN/ 路由/ 子网/ ,/ 并/ 依赖/ 其/ 所在/ 子网/ 转发/ 路由/ 请求/ ,/ 因此/ 可以/ 将/ SAN/ -/ EBON/ 网络/ 看作/ 多层/ CAN/ 网络/ 的/ 叠加/ ,/ 每/ 一条/ 路由/ 消息/ 只/ 需/ 通过/ 任意子/ 网转图/ 2/ 二维/ SAN/ 网络/ 3.2/ EBON/ 网络/ EBON/ (/ EnhancedBalancedOverlayNetwork/ )/ 网络/ 用于/ 在/ 服务/ 联盟/ 内/ 均衡/ 任务/ 负载/ ,/ 实现/ 联盟/ 内/ 最优/ 执行/ 节点/ 的/ 定位/ ./ BON/ 网络/ [/ 13/ ]/ 是/ 一个/ 有/ 向/ 随机/ 图/ ;/ 图中/ 的/ 每个/ 顶点/ 代表/ 一个/ 物理/ 节点/ ,/ 每条/ 有/ 向/ 边/ 代表/ 一个/ 任务/ 实例/ 负载/ ,/ 节点/ 权值/ wi/ 表示/ 结点/ i/ 所能/ 承担/ 实例/ 负载/ 的/ 个数/ ,/ 节点/ 的/ 入度/ in/ _/ degree/ (/ i/ )/ 发到/ 目标/ 区域/ ,/ 而/ 各层/ 子网/ 通过/ 区域/ 内/ 的/ EBON/ 网络/ 连结/ 在/ 一起/ ./ 这一/ 结构/ 与/ CAN/ 中/ 的/ 过载/ 区域/ (/ OverloadingCoordinateZones/ )/ [/ 12/ ]/ 相比/ 有效/ 避免/ 了/ 中心/ 节点/ 带来/ 的/ 区域/ 路由/ 瓶颈/ 及/ 由/ 多/ 节点/ 分配/ 带来/ 的/ 区域/ 维护/ 开销/ ./ 根据上述/ 结构/ ,/ 每个/ 物理/ 节点/ 在/ SAN/ 网络/ 中/ 的/ 映像/ 位置/ 是/ 由/ 其/ 所/ 承担/ 任务/ 的/ san/ _/ id/ 决定/ 和/ 唯一/ 标识/ 的/ ,/ 因此/ 在/ SAN/ 中/ ,/ 对/ 服务/ 的/ 请求/ 即/ 是/ 对/ 能够/ 提供/ 该/ 服务/ 的/ 目标/ 区域/ 节点/ 的/ 查找/ ,/ 无须/ 经/ 二次/ 映像/ ,/ 从而/ 将/ 业务流程/ 映射/ 到/ SAN/ 坐标/ 空间/ 中/ ./ 图/ 2/ 给出/ 了/ 一个二维/ SAN/ 网络/ 映射/ 的/ 例子/ ,/ 图中/ 空心/ 点/ 代表/ 物理/ 节点/ ,/ 实心/ 点/ 代表/ 集结/ 点/ ,/ 不同/ 形状/ 表示/ 加载/ 了/ 不同/ 任务/ ,/ 承担/ 相同/ 任务/ 的/ 物理/ 节点/ 由/ EBON/ 网络/ 连结/ 为/ 服务/ 联盟/ ./ 由图/ 中/ 可见/ 共有/ 3/ 个/ 服务/ 联盟/ ,/ 分别/ 用圆/ 、/ 三角/ 、/ 正方形/ 不同/ 形状/ 表示/ ./ 3/ 个/ 集结/ 点将/ 二维/ 坐标/ 空间/ 分为/ 3/ 个/ 互相/ 邻接/ 的/ 区域/ ,/ 每个/ 区域/ 中/ 分别/ 包含/ 2/ 、/ 3/ 、/ 4/ 个/ 物理/ 节点/ ,/ 相同/ 形状/ 的/ 空心/ 点/ 之间/ 的/ 细/ 虚线/ 表示/ 该/ 联盟/ 内/ 的/ EBON/ 网络/ ./ 由图/ 中/ 可见/ ,/ 左侧/ 的/ SAN/ 网络/ 可/ 被/ 分解/ 为/ 右侧/ 的/ 两个/ 子网/ ,/ 处于/ 同一/ 子网/ 中/ 的/ 物理/ 节点/ 逻辑/ 上/ 为域/ 间/ 邻接/ 节点/ ,/ 并/ 通过/ EBON/ 网络/ 联结/ 在/ 一起/ ./ 表示/ 节点/ i/ 空闲/ 实例/ 负载/ 的/ 个数/ ,/ 这样/ 节点/ 的/ 负载/ 状况/ 被/ 映射/ 为/ 随机/ 图/ 的/ 拓扑/ ./ 每个/ 节点/ 的/ 入/ 度数/ 反比/ 于/ 节点/ 的/ 任务/ 负载/ ,/ 通过/ 随机/ 采样/ 选择/ 空闲/ 负载/ 最大/ 的/ 节点/ 接受任务/ ./ 随机/ 采样/ 中/ 请求/ 消息/ 的/ 随机/ 游走/ 遵循/ 由/ 节点/ i/ 向/ 其/ 相邻/ 节点/ j/ 的/ 转移/ 概率/ 为/ 节点/ k/ 被/ 采样/ 的/ 概率/ 为/ Page5/ 由此可见/ ,/ 入/ 度数/ 越大/ 说明/ 空闲/ 资源/ 越/ 多/ ,/ 被/ 采样/ 的/ 概率/ 也/ 就/ 越/ 大/ ,/ 从而/ 通过/ 在/ 图/ 上/ 的/ 随机/ 游走/ 指引/ 任务/ 向/ 轻/ 负载/ 节点/ 流动/ ,/ 且/ 负载/ 的/ 概率分布/ 正比/ 于/ 节点/ 的/ 空闲/ 资源/ ./ 这样/ 就/ 以/ 较/ 小/ 的/ 连接/ 度数/ 实现/ 了/ 节点/ 之间/ 的/ 去/ 中心化/ 动态/ 负载/ 分配/ ,/ 消除/ 了/ 中心化/ 负载/ 分配/ 带来/ 的/ 性能/ 瓶颈/ ,/ 减弱/ 了/ 因全/ 连接结构/ 引起/ 的/ 网络/ 波动/ ./ 但/ BON/ 算法/ 假设/ 所有/ 节点/ 的/ 处理/ 能力/ 是/ 相同/ 的/ ,/ 采样/ 时/ 只/ 考虑/ 空闲/ 资源/ ,/ 而/ 实际/ 系统/ 中/ 参与/ 节点/ 的/ 处理/ 能力/ 和/ 能够/ 提供/ 的/ 服务质量/ 都/ 存在/ 较大/ 差异/ ,/ 因此/ 我们/ 在/ BON/ 基础/ 上/ 提出/ EBON/ 算法/ ,/ 同时/ 考虑/ 节点/ 的/ 处理/ 能力/ 、/ 空闲/ 资源/ 和/ 服务质量/ 的/ 差异/ ./ (/ 1/ )/ 考虑/ 节点/ 处理/ 能力/ 和/ 拥有/ 资源/ 的/ 差异/ ,/ 具有/ 较/ 多/ 空闲/ 资源/ 的/ 节点/ 其/ 处理/ 队列/ 也/ 可能/ 较长/ ,/ 无法/ 第一/ 时间/ 处理/ 当前任务/ ,/ 因此/ 应/ 以/ 节点/ 中/ 空闲/ 资源/ 所/ 占/ 比例/ 作为/ 度量/ ./ 定义/ 如下/ ./ 定义/ 9/ ./ 以/ 单个/ 任务/ 实例/ 为/ 单位/ ,/ 称/ 节点/ i/ 所能/ 承担/ 的/ 最大/ 任务/ 实例/ 数为/ 节点/ i/ 的/ 权值/ ,/ 记作/ wi/ ;/ 设/ 当前/ 节点/ i/ 处理/ 队列/ 长度/ 为/ λ/ i/ ,/ 则/ 为/ 节点/ i/ 的/ 占空比/ ;/ ρ/ i/ 越大/ 表明/ 当前/ 节点/ 有效/ 计算资源/ 越多/ ./ (/ 2/ )/ 考虑/ 承担/ 相同/ 任务/ 的/ 节点/ 其所能/ 提供/ 服务/ 的/ QoS/ 可能/ 差异/ 很大/ ,/ 根据/ 文献/ [/ 3/ ]/ 提出/ 的/ 工作/ 流/ 服务质量/ 调度/ 算法/ ,/ QoS/ 调度/ 要/ 考虑/ 的/ 主要/ 因素/ 有/ QoS/ (/ cap/ )/ 、/ QoS/ (/ tim/ )/ 、/ QoS/ (/ co/ )/ 、/ QoS/ (/ ava/ )/ 、/ QoS/ (/ rep/ )/ ,/ 通常/ 要求/ 计算能力/ 尽量/ 大/ ,/ 执行/ 时间/ 尽图/ 3EBON/ 网络/ 负载/ 分配/ 实例/ 4SAN/ -/ EBON/ 网络/ 功能/ 4.1/ SAN/ -/ EBON/ 路由/ 算法/ SAN/ -/ EBON/ 路由/ 是/ 指/ 对/ 服务/ 请求/ 消息/ 的/ 路由/ ,/ 量/ 短/ ,/ 开销/ 费用/ 尽量/ 小/ ,/ 服务/ 可用性/ 尽量/ 高/ ,/ 服务/ 可靠性/ 尽量/ 大/ ./ 根据上述/ 优化/ 目标/ ,/ 并/ 将/ 极小/ 约束/ 转变/ 为/ 极大/ 约束/ ,/ 有/ 如下/ 定义/ ./ 定义/ 10/ ./ 设/ 节点/ i/ 的/ QoS/ 权值/ 向量/ 为/ [/ ω/ 1/ ,/ ω/ 2/ ,/ …/ ,/ ω/ 5/ ]/ ,/ 则/ α/ i/ =/ [/ ω/ 1/ ,/ ω/ 2/ …/ ,/ ω/ 5/ ]/ ·/ [/ QoS/ (/ cap/ )/ ,/ (/ 1/ -/ QoS/ (/ tim/ )/ )/ ,/ (/ 1/ -/ QoS/ (/ co/ )/ )/ ,/ QoS/ (/ ava/ )/ ,/ QoS/ (/ rep/ )/ ]/ T/ (/ 4/ )/ 为/ 节点/ i/ 的/ QoS/ 因子/ ;/ α/ i/ 越大/ 表明/ 节点/ 提供/ 服务质量/ 越高/ ./ 定义/ 11/ ./ 设/ 节点/ i/ 的/ 占空比/ 为/ ρ/ i/ ,/ QoS/ 因子/ 为/ α/ i/ ,/ 则/ 为/ 节点/ i/ 的/ 采样/ 值/ ./ 根据上述/ 定义/ ,/ EBON/ 算法/ 在/ 随机/ 采样/ 时/ 记录/ 并/ 优先选择/ 随机/ 路径/ 上/ 具有/ 最大/ 采样/ 值/ 的/ 节点/ 分配任务/ ,/ 即/ Target/ =/ argmaxi/ ∈/ V/ Φ/ i/ ,/ 其中/ Target/ 为/ 选定/ 的/ 目标/ 节点/ ./ 图/ 3/ 给出/ 了/ 一个/ 通过/ EBON/ 网络/ 分配/ 负载/ 的/ 例子/ ./ 图中/ 每个/ 节点/ 的/ 标号/ 为/ 该/ 节点/ 的/ 权值/ ,/ 节点/ 旁/ 的/ 小圆为/ 分配/ 给/ 该/ 节点/ 的/ 任务/ 负载/ ,/ 图/ 3/ (/ b/ )/ 中/ 的/ 虚线/ 为/ 新/ 负载/ 分配/ 时/ 随机/ 采样/ 的/ 路径/ ,/ 图/ 3/ (/ c/ )/ 为/ 负载/ 分配/ 后/ 新/ 的/ 拓扑/ 结构/ ./ 设/ ni/ 为/ 图中/ 权值/ 为/ wi/ 的/ 节点/ ,/ α/ i/ =/ 1/ ,/ 按/ 顺时针/ 方向/ i/ =/ {/ 6/ ,/ 2/ ,/ 3/ ,/ 4/ ,/ 1/ ,/ 5/ ,/ 4/ }/ ,/ 则/ 采样/ 路径/ 上/ 各/ 节点/ 的/ 采样/ 值/ 依次/ 为/ Φ/ n1/ =/ 0/ ,/ Φ/ n4/ =/ 1/ // 4/ ,/ Φ/ n6/ =/ 1/ // 3/ ,/ Φ/ n2/ =/ 1/ // 2/ ,/ Φ/ n3/ =/ 2/ // 3/ ,/ Φ/ n4/ =/ 1/ ,/ 根据/ 对图/ 中/ 随机/ 漫步/ 路径/ 上/ 各/ 节点/ 采样/ 值/ 的/ 比较/ 选择/ 具有/ 最大/ 采样/ 值/ 的/ 节点/ ,/ 目标/ 节点/ 为/ Φ/ n4/ =/ 1/ 的/ n4/ ,/ 因此/ 将/ 新/ 任务分配/ 给/ n4/ ,/ 同时/ 剪除/ 一条/ 指向/ n4/ 的/ 有/ 向/ 边/ 〈/ n3/ ,/ n4/ 〉/ ./ 即/ 节点/ 完成/ 本地/ 任务/ 实例/ 后/ 定位/ 下/ 一步/ 最优/ 执行/ 节点/ 的/ 过程/ ./ 这个/ 过程/ 在/ SAN/ -/ EBON/ 网络/ 的/ 基础/ 上分/ 服务/ 联盟/ 定位/ 和/ 区域/ 负载/ 均衡/ 两个/ 阶段/ 完成/ ./ 4.1/ ./ 1/ 服务/ 联盟/ 定位/ 服务/ 联盟/ 定位/ 实现/ 对/ 目标/ 域/ 的/ 快速/ 定位/ ,/ 遵循/ Page6SAN/ 坐标/ 空间/ 中/ 从源/ 坐标/ 到/ 目的/ 坐标/ 的/ 一条/ 直线/ 转发/ 路由/ 请求/ ./ 每条/ SAN/ 路由/ 消息/ 都/ 包含/ 目的/ 域/ 坐标/ ,/ 如果/ 本地/ 节点/ 不/ 拥有/ 包含/ 这些/ 坐标/ 的/ 区域/ ,/ 则/ 它/ 将/ 消息/ 转发/ 到/ 拥有/ 离/ 目标/ 域/ 最近/ 坐标/ 的/ 邻居/ 节点/ ./ 最近/ 转发/ 邻居/ 节点/ 的/ 确定/ 需要/ 考虑/ 两个/ 因素/ :/ 确定/ 最近/ 转发/ 邻域/ 和/ 选择/ 最小/ 延时/ 节点/ ./ 最近/ 转发/ 邻域/ 具有/ 到/ 目标/ 域/ 的/ 最/ 短/ 直线/ 距离/ ,/ 由/ SAN/ 空间/ 中本/ 地域/ 到/ 目标/ 域/ 的/ 欧式/ 距离/ 给出/ :/ 设/ 当前/ 节点/ 第/ i/ 个/ 邻接/ 区域/ Σ/ i/ 的/ SAN/ 坐标/ 为/ (/ xi1/ ,/ xi2/ ,/ …/ ,/ xid/ )/ ,/ i/ ∈/ [/ 1/ ,/ d/ ]/ ,/ 其中/ d/ 是/ 当前/ SAN/ 空间/ 的/ 维数/ ;/ 目标/ 域/ 的/ SAN/ 坐标/ 为/ (/ xs1/ ,/ xs2/ ,/ …/ ,/ xsd/ )/ ,/ 则/ Σ/ min/ =/ argmini/ ∈/ [/ 1/ ,/ d/ ]/ (/ xi1/ -/ xs1/ )/ 2/ +/ (/ xi2/ -/ xs2/ )/ 2/ +/ …/ +/ (/ xid/ -/ xsd/ )/ 其中/ Σ/ min/ 为/ 最近/ 转发/ 邻域/ ./ 根据/ SAN/ -/ EBON/ 结构/ ,/ 当前/ 节点/ 在/ Σ/ min/ 中/ 可/ 拥有/ 多个/ 邻居/ 节点/ ,/ 并/ 记录/ 到/ 每个/ Σ/ min/ 邻居/ 节点/ 的/ 延时/ ,/ 从而/ 选择/ 延时/ 最小/ 的/ 节点/ 作为/ 最近/ 转发/ 邻居/ 节点/ ./ 这一/ 过程/ 直到/ 找到/ 目标/ 区域/ 为止/ ,/ 而/ 目标/ 区域/ 的/ 转发/ 节点/ 作为/ 区域/ 接入/ 节点/ 发起/ 区域/ 负载/ 均衡/ ./ 每个/ SAN/ -/ EBON/ 节点均/ 维护/ 域间/ 路由表/ 以/ 支持/ 上述/ 域间/ 路由/ 过程/ ./ 域间/ 路由表/ 记录/ SAN/ 网络/ 中/ 邻接/ 区域/ 的/ 邻居/ 节点/ 信息/ ,/ 每个/ 表目/ 对应/ 一个/ 域间/ 邻居/ 节点/ ,/ 可/ 描述/ 为/ 一个/ 四元组/ (/ 节点/ san/ _/ id/ ,/ 节点/ IP/ ,/ 节点/ 区域/ 范围/ ,/ 节点/ 延迟/ )/ ,/ 若/ 节点/ 离开/ 网络/ ,/ 相应/ 表目/ 将/ 被/ 删除/ ./ 域间/ 路由表/ 的/ 生成/ 基于/ EBON/ 网络/ 上/ 的/ 随机/ 漫步/ ,/ 对/ 每/ 一个/ 邻接/ 区域/ ,/ 采样/ 随机/ 路径/ 上/ 节点/ 的/ 域间/ 路由表/ ,/ 选择/ 拥有/ 该/ 区域/ 邻居/ 最多/ 的/ 节点/ ,/ 均分/ 其/ 在/ 该/ 区域/ 的/ 邻居/ 节点/ ,/ 形成/ 本地/ 对/ 该/ 区域/ 的/ 相邻/ 节点/ 表目/ ./ 定理/ 1/ ./ 设/ SAN/ 空间/ 维数/ 是/ d/ ,/ mi/ 为/ 第/ i/ 个/ 邻接/ 区域/ Σ/ i/ 的/ 节点/ 数目/ ,/ 若/ 当前/ 区域/ 的/ 节点/ 数为/ n/ ,/ 则/ 该/ 区域/ 中/ 节点/ 的/ 域间/ 路由表/ 空间/ 复杂度/ 上限/ 为/ mi/ // 2log2/ (/ Ο/ ∑/ 2di/ =/ 1/ 证明/ ./ 对/ Σ/ i/ 邻居/ 表/ 的/ 裂变/ 过程/ 可/ 表示/ 为/ 一棵/ 完全/ 二叉树/ (/ 如图/ 4/ 所示/ )/ ./ 因为/ 树中/ 的/ 每个/ 节点/ 对应/ 一个/ 新/ 的/ Σ/ i/ 邻居/ 表/ (/ 灰色/ 节点/ 为/ 已/ 扩展/ 节点/ ,/ 白色/ 节点/ 为/ 尚未/ 加入/ 的/ 节点/ )/ ,/ 当/ 节点/ 加入/ 域时/ ,/ 将/ 分割/ 父/ 节点/ Σ/ i/ 邻居/ 表/ 生成/ 两个/ 子/ 节点/ ,/ 其/ Σ/ i/ 邻居/ 数为/ 父/ 节点/ 的/ 1/ // 2/ ;/ 设根/ 节点/ 的/ 层数/ 为/ 0/ ,/ 则/ 第/ h/ 层/ 节点/ 的/ Σ/ i/ 邻居/ 数为/ mi/ // 2h/ ;/ 因此/ ,/ 当/ n/ =/ 2h/ 时/ ,/ 节点/ Σ/ i/ 邻居/ 数为/ mi/ // 2h/ ;/ 当/ 2h/ -/ 1/ </ n/ </ 2h/ 时/ ,/ 节点/ Σ/ i/ 邻居/ 数/ ∈/ [/ mi/ // 2h/ ,/ mi/ // 2h/ -/ 1/ ]/ ./ 又/ 由于/ 当前/ 节点/ 的/ 最小/ 层次/ 为/ log2n/ ,/ 所以/ Σ/ i/ 区域/ 路由表/ 复杂性/ 上限/ 为/ Ο/ (/ mi/ // 2log2n/ )/ ;/ 又/ 因/ 在/ d/ 维空间/ 中/ 最/ 多/ 有/ 2d/ 个/ 邻接/ 区域/ ,/ 因此/ ,/ 域间/ 路由表/ 复杂性/ 上限/ 为/ (/ Ο/ ∑/ 2d2log2/ )/ n/ ./ 根据/ CAN/ 算法/ 的/ 期望/ 路由/ 跳数/ 为/ Ο/ (/ dn1/ // d/ )/ (/ 其中/ n/ 为/ 系统/ 节点/ 数/ )/ [/ 12/ ]/ 可知/ SAN/ 网络/ 的/ 域间/ 期望/ 路由/ 复杂度/ 为/ Ο/ (/ dN1/ // d/ )/ ,/ 其中/ d/ 为/ SAN/ 空间/ 维数/ ,/ N/ 为/ 系统/ 中/ 的/ 联盟/ 数/ ./ 由于/ 服务/ 联盟/ 数/ N/ 等于/ 流程/ 模型/ 中/ 的/ 任务/ 数/ ,/ 远远/ 小于/ 系统/ 中/ 的/ 物理/ 节点/ 数/ n/ ,/ 从而/ 较/ CAN/ 网络/ 和/ 泛洪/ 的/ Ο/ (/ n2/ )/ 有效/ 降低/ 了域/ 间/ 路由/ 复杂度/ ;/ 由式/ / dN1/ // d/ // / d/ =/ 0/ 可得/ ,/ 当/ d/ =/ lnN/ 时/ ,/ 有/ 极小值/ Ο/ (/ (/ lnN/ )/ 1/ // lnN/ )/ ./ 设/ 服务/ 请求/ 消息/ 带宽/ 为/ β/ ,/ 则/ 域间/ 路由/ 带宽/ 为/ Ο/ (/ dN1/ // d/ β/ )/ ,/ 明显/ 低于/ 泛洪/ 且/ 其/ 定位精度/ 为/ 100/ %/ ./ 4.1/ ./ 2/ 区域/ 负载/ 均衡/ 区域/ 负载/ 均衡/ 基于/ EBON/ 网络/ 实现/ 服务/ 联盟/ 内/ 的/ 去/ 中心化/ 负载/ 调度/ ,/ 确定/ 任务/ 最终/ 执行/ 节点/ ./ 根据/ 式/ (/ 1/ )/ ,/ 通过/ 在/ EBON/ 网络/ 上/ 的/ 随机/ 漫步/ 转发/ 路由/ 请求/ ,/ 并/ 由式/ (/ 3/ )/ ~/ (/ 5/ )/ 在/ 采样/ 路径/ 上/ 确定/ 最优/ 执行/ 节点/ 分配任务/ 负载/ ./ 每个/ 节点/ 除/ 维护/ 域间/ 路由表/ 外/ 同时/ 维护/ 域/ 内/ 路由表/ 以/ 支持/ 上述/ 域/ 内/ 路由/ 过程/ ./ 域/ 内/ 路由表/ 记录/ EBON/ 网络/ 中/ 的/ 邻居/ 节点/ 信息/ (/ 两个/ 域/ 内/ 节点/ 之间/ 存在/ 有/ 向/ 边/ 即/ 存在/ 邻居/ 关系/ )/ ,/ 每个/ 表目/ 对应/ 一个/ 域/ 内/ 邻居/ 节点/ ,/ 可/ 分为/ 入度/ 节点/ 和/ 出度/ 节点/ 两类/ ,/ 用/ 四元组/ (/ 节点/ IP/ ,/ 节点/ 权值/ ,/ 节点/ 负载/ ,/ 连接/ 方向/ )/ 表示/ ./ 当/ 节点/ 被/ 分配/ 新/ 任务/ 时/ ,/ 将/ 通过/ 随机/ 漫步/ 选择/ 一个/ 入度/ 邻居/ ,/ 删除/ 其/ 相应/ 表目/ ;/ 被/ 选中/ 节点/ 删除/ 本地/ 指向/ 当前/ 节点/ 的/ 出度/ 表目/ ./ 当/ 节点/ 完成/ 当前任务/ 时/ ,/ 通过/ 随机/ 漫步/ 选择/ 一个/ 不/ 相邻/ 节点/ ,/ 添加/ 为/ 入度/ 邻居/ ;/ 被/ 选中/ 节点/ 添加/ 本地/ 指向/ 当前/ 节点/ 的/ 出度/ 表目/ ./ 根据/ 规则/ 随机/ 图/ 特性/ [/ 14/ ]/ 及/ 文献/ [/ 13/ ]/ 实验/ 表明/ ,/ 当/ BON/ 网络/ 最小/ 入/ 度数/ 不/ 小于/ 4/ 时/ ,/ 其/ 对应/ 的/ 无/ 向/ 随机/ 图为/ 强/ 连通/ 图/ ./ 因此/ 可/ Page7/ 确定/ 节点/ i/ 域/ 内/ 路由表/ 入度/ 复杂性/ Ο/ i/ 在/ 正常/ 负载/ 下/ 有/ Ο/ i/ ∝/ wi/ ;/ 在/ 过载/ 情况/ 下入度/ 应为/ 0/ ,/ 但/ 为/ 保持/ 网络/ 的/ 连通性/ ,/ 有/ 最小/ 入度/ 复杂性/ Ο/ mini/ =/ 4/ ./ 根据/ BON/ 网络/ 期望/ 直径/ 为/ Ο/ (/ logm/ )/ (/ 其中/ m/ 为/ 网络/ 节点/ 数/ )/ [/ 13/ ]/ 可知/ 域/ 内/ 期望/ 路由/ 复杂度/ 为/ Ο/ (/ log/ 珨/ M/ )/ ,/ 其中/ 珡/ M/ 为/ 各/ 服务/ 联盟/ 节点/ 数目/ 的/ 期望值/ ./ 4.1/ ./ 3/ 算法/ 描述/ 基于/ 以上/ 描述/ ,/ SAN/ -/ EBON/ 路由/ 算法/ 如下/ ./ 1/ ./ 初始化/ ./ 若/ 节点/ Rlo/ =/ / ,/ 即/ 节点/ 无/ 后继/ 任务/ 集/ ,/ 转步/ 6/ ;/ 否则/ 节点/ 根据/ Rlo/ 将/ 后继/ 任务/ san/ _/ id/ 、/ 本地/ IP/ 和/ san/ _/ id/ 封装/ 为/ 服务/ 请求/ 消息/ Request/ ;/ 地/ 区域/ 范围/ 内/ ,/ 则/ 转步/ 4/ ;/ 否则/ 转步/ 3/ ;/ 2/ ./ 若/ Request/ 中/ 的/ 目的/ 坐标/ 与/ 本地/ 坐标/ 相同/ 或落/ 在/ 本/ 3/ ./ 查找/ 域间/ 路由表/ ,/ 根据/ 式/ (/ 6/ )/ 计算/ 邻接/ 区域/ 与/ 目标/ 域/ 之间/ 的/ 空间/ 距离/ ,/ 选择/ 距离/ 最小/ 的/ 区域/ 作为/ 转发/ 区域/ ,/ 记/ 为/ Π/ post/ ,/ 在/ Π/ post/ 邻居/ 节点/ 中/ 选择/ 延迟/ 最小/ 的/ 节点/ 转发/ Request/ ,/ 转步/ 2/ ;/ 4/ ./ 当前/ 节点/ 为/ 区域/ 接入/ 节点/ ,/ 在/ 本/ 联盟/ 内/ 通过/ EBON/ 算法/ ,/ 根据/ 式/ (/ 1/ )/ ~/ (/ 5/ )/ 找到/ 最优/ 执行/ 节点/ ,/ 转发/ Request/ ;/ 5/ ./ 检查/ 当前/ 节点/ Rlo/ ,/ 若源/ san/ _/ id/ ∈/ 本地/ Tsetpre/ ,/ 则/ 通过/ 源/ IP/ 与/ Request/ 发起/ 节点/ 建立/ 数据/ 连接/ ,/ 接受/ 新/ 任务/ ,/ 同时/ 根据/ EBON/ 算法/ 更新/ 本地/ 相关/ 节点/ 的/ 域/ 内/ 路由表/ ,/ 转步/ 1/ ;/ 6/ ./ 任务/ 分支/ 结束/ ./ 4.2/ SAN/ -/ EBON/ 网络/ 动态/ 维护/ SAN/ -/ EBON/ 网络/ 维护/ 主要/ 处理/ 节点/ 加入/ 离开/ 时/ SAN/ -/ EBON/ 坐标/ 空间/ 的/ 差分/ 、/ 合并/ 以及/ 相关/ 节点/ 路由表/ 的/ 刷新/ ./ 新/ 节点/ 加入/ 系统/ 时分/ 两种/ 情况/ :/ (/ 1/ )/ 节点/ 加入/ 时/ 对应/ 集结/ 点/ 已/ 存在/ ,/ 根据/ SAN/ 路由/ 算法/ 找到/ 其/ 坐标/ 所在区域/ 接入/ 节点/ ,/ 通过/ EB/ -/ ON/ 算法/ 构建/ 自身/ 的/ 域间/ 和域/ 内/ 路由表/ ,/ 并/ 通知/ 其/ 邻居/ 节点/ 更新/ 自身/ 的/ 域间/ 和域/ 内/ 路由表/ ./ (/ 2/ )/ 节点/ 是/ 其/ 服务/ 联盟/ 的/ 第/ 1/ 个/ 加入/ 点/ ./ 首先/ 根据/ SAN/ 路由/ 算法/ 找到/ 其/ 坐标/ 所在区域/ 接入/ 节点/ ,/ 由于/ 坐标/ 不同于/ 接入/ 节点/ ,/ 因此/ 需要/ 差分/ 接入/ 节点/ 所在区域/ ,/ 此时/ 选择/ 两个/ 节点/ 坐标/ 相差/ 最大/ 的/ 维度/ ,/ 沿该/ 维度/ 平分/ 接入/ 节点/ 所/ 辖/ 区域/ ,/ 两者/ 建立/ 域间/ 邻居/ 关系/ ,/ 接入/ 节点/ 更新/ 自身/ 的/ 区域/ 范围/ 和域/ 间/ 路由表/ ;/ 同时/ 通知/ 其域/ 间和域/ 内/ 邻居/ 新/ 节点/ 的/ san/ _/ id/ 、/ 所/ 辖/ 区域/ 范围/ 、/ 节点/ IP/ 以及/ 自己/ 的/ 新/ 区域/ 范围/ ;/ 收到/ 通知/ 的/ 域间/ 和域/ 内/ 邻居/ 节点/ 根据/ 通知/ 更新/ 自身/ 的/ 域间/ 路由表/ ,/ 同时/ 通知/ 其他/ 相邻/ 的/ 域/ 内/ 邻居/ 并/ 与/ 新/ 节点/ 建立/ 邻居/ 关系/ ;/ 新/ 节点/ 根据/ 收到/ 的/ 邻接/ 请求/ 建立/ 自身/ 的/ 域间/ 路由表/ ./ 节点/ 离开/ 系统/ 时/ 也/ 分为/ 两种/ 情况/ :/ (/ 1/ )/ 离开/ 节点/ 不是/ 联盟/ 中/ 的/ 最后/ 一个/ 节点/ ,/ 只/ 需/ 通知/ 路由表/ 中/ 的/ 域间/ 和域/ 内/ 邻居/ 节点/ 更新/ 相应/ 的/ 域间/ 和域/ 内/ 路由表/ ,/ 同时/ 调整/ 其/ 出度/ 边/ 所指/ 节点/ 的/ 拓扑/ 结构/ ,/ 即该/ 出度/ 边/ 所指/ 节点/ 通过/ 随机/ 漫步/ 在/ 联盟/ 内/ 采样/ 新/ 节点/ 生成/ 新/ 的/ 入度/ 边/ 代替/ 离开/ 节点/ 的/ 出度/ 边/ ./ (/ 2/ )/ 离开/ 节点/ 是/ 联盟/ 中/ 的/ 最后/ 一个/ 节点/ ,/ 此时/ 撤销/ 节点/ 对/ 其/ 区域/ 的/ 管辖/ ,/ 进行/ 区域/ 合并/ ./ SAN/ 坐标/ 区域/ 的/ 重/ 分割/ 可/ 按/ 一棵/ 二分/ 树/ [/ 15/ ]/ 展开/ ,/ 树中/ 每个/ 节点/ 代表/ 一个/ 集结/ 点/ ,/ 两个/ 子/ 节点/ 分割/ 父/ 节点/ 所/ 辖/ 区域/ ./ 区域/ 合并/ 可/ 分/ 两种/ 情况/ 讨论/ :/ ①/ 撤销/ 区域/ 的/ 兄弟/ 节点/ (/ 即/ 邻接/ 区域/ )/ 为叶/ 节点/ ,/ 即/ 两者/ 共同/ 分割/ 了/ 父/ 节点/ 区域/ ,/ 则/ 由/ 兄弟/ 节点/ 接管/ 撤销/ 区域/ ;/ 离开/ 节点/ 将/ 自身/ 域间/ 路由表/ 移交/ 兄弟/ 节点/ ,/ 据此/ 信息/ ,/ 兄弟/ 节点/ 在域/ 内/ 更新/ 自身/ 区域/ 范围/ 和域/ 间/ 路由表/ ,/ 同时/ 通知/ 其域/ 间/ 邻居/ 节点/ 更新/ 本地/ 的/ 区域/ 范围/ 和域/ 间/ 路由表/ ./ ②/ 撤销/ 区域/ 的/ 兄弟/ 节点/ 为/ 中间/ 节点/ ,/ 则/ 称/ 其父/ 节点/ 所/ 辖/ 区域/ 为/ 裂变/ 区域/ ,/ 裂变/ 区域/ 的/ 邻接/ 区域/ 为/ 非/ 裂变/ 区域/ ./ 当前/ 区域/ 撤销/ 后/ ,/ 由以/ 兄弟/ 节点/ 为根/ 的/ 子树/ 重新/ 划分/ 裂变/ 区域/ ,/ 划分/ 过程/ 从子/ 树/ 的/ 根部/ 开始/ 逐层/ 向下/ 进行/ ./ 相应/ 的/ ,/ 离开/ 节点/ 将/ 自身/ 的/ 域间/ 路由表/ 移交/ 给子/ 树中/ 的/ 邻接/ 区域/ ,/ 并/ 通过/ 区域/ 相邻/ 传递/ 给/ 裂变/ 区域/ 中/ 的/ 所有/ 子/ 区域/ ,/ 各/ 区域/ 节点/ 根据/ 子/ 树结构/ 自顶向下/ 重新/ 计算/ 自身/ 的/ 区域/ 范围/ ,/ 更新/ 域间/ 路由表/ ,/ 并/ 通知/ 邻接/ 的/ 非/ 裂变/ 区域/ 节点/ 更新/ 域间/ 路由表/ ./ 从/ 以上/ 讨论/ 可以/ 看出/ ,/ 当/ 网络/ 动态/ 维护/ 涉及/ 区域/ 的/ 差分/ 、/ 合并/ 时/ 牵涉/ 节点/ 较/ 多/ ,/ 运算/ 代价/ 较大/ ,/ 但/ 根据/ SAN/ -/ EBON/ 结构/ ,/ 服务/ 联盟/ 中/ 只要/ 存在/ 一个/ 节点/ ,/ 就/ 不/ 需要/ 进行/ 区域/ 调整/ ,/ 在/ 系统/ 运行/ 的/ 大部分/ 时间/ 内/ 只/ 需/ 处理/ 第一种/ 情况/ ,/ 网络结构/ 保持/ 相对/ 稳定/ ,/ 因此/ 可以/ 较/ 小/ 的/ 维护/ 代价/ 适应/ 节点/ 状态/ 变化/ 频繁/ 的/ 环境/ ./ 4.3/ SAN/ -/ EBON/ 路由/ 实例/ 文献/ [/ 6/ ]/ 中/ 的/ 学生/ 注册/ 服务/ 将/ 在/ 较/ 短/ 时间段/ 内/ 接受/ 大量/ 请求/ ,/ 从而/ 对系统/ 运行/ 效率/ 有/ 较/ 高/ 要求/ ./ 我们/ 构造/ SAN/ -/ EBON/ 网络/ 以/ 支持/ 该/ 业务流程/ ,/ 并/ 与/ SwinDeW/ 系统/ 在/ 路由/ 效率/ 和/ 通信/ 负载/ 方面/ 针对/ 该/ 实例/ 进行/ 了/ 对比/ ./ 学生/ 注册/ 服务/ 可/ 表示/ 为/ 图/ 5/ 所示/ 的/ 流程/ [/ 6/ ]/ ,/ 其中/ 略去/ 了/ 与/ 路由/ 无关/ 的/ 业务/ 描述/ ,/ 着重/ 讨论/ 其/ 节点/ 定位/ 过程/ ./ 任务/ 描述/ (/ 只/ 给出/ 名称/ )/ 、/ SAN/ 坐标/ 和/ 局部/ 逻辑关系/ 如表/ 1/ 所示/ ./ 表中/ 信息/ 在/ 节点/ 注册/ 前/ 通过/ 工作/ 流/ 模型/ 映射/ 过程/ 在/ 建模/ 时/ 阶段/ 生成/ ,/ 并/ 保存/ 在/ 注册/ 服务器/ 中/ ,/ 节点/ 注册/ 后/ 绑定/ 到/ 执行/ 节点/ ,/ 并/ 在/ 执行/ 时/ 阶段/ 控制/ 节点/ 的/ 局部/ 逻辑关系/ ./ Page8/ 图/ 5/ 学生/ 注册/ 服务/ 业务流程/ 图表/ 1/ 学生/ 注册/ 服务/ 流程/ 映射/ T1PreexaminationT2ApprovalT3RecordingT4PaymenthandingT5Accountmanagement/ (/ 4/ ,/ 5/ )/ T6CollectingT7Fileclosing/ 任务/ 发布/ 后/ 各/ 节点/ 构成/ 的/ SAN/ -/ EBON/ 网络/ (/ 此处/ 映射/ 为/ 二维/ 空间/ )/ 如图/ 6/ 所示/ ,/ 其中/ 实心/ 圆点/ 表示/ 相应/ 服务/ 联盟/ 对应/ 的/ 集结/ 点/ ,/ 空心/ 圆点/ 表示/ 服务/ 联盟/ 中/ 的/ 物理/ 节点/ ,/ 域间/ 相邻/ 节点/ 用/ 虚线/ 连接/ ./ 由图/ 6/ 学生/ 注册/ 系统/ SAN/ -/ EBON/ 网络拓扑/ 表/ 2/ ~/ 5/ 分别/ 给出/ 了/ 节点/ A/ 、/ B/ 、/ C/ 的/ 域间/ 路由表/ 和/ 节点/ C/ 的/ 域/ 内/ 路由表/ ,/ 其它/ 节点/ 路由表/ 有/ 相同/ 的/ 形式/ ,/ 其中/ 省略/ 了/ 邻居/ 节点/ 的/ IP地址/ (/ 用/ 节点/ 标识/ 代替/ )/ ,/ 同时/ 省略/ 了/ 与/ 本例/ 转发/ 路径/ 无关/ 的/ 节点/ 标识/ ,/ 并/ 假设/ 到/ 各/ 邻居/ 节点/ 的/ 延迟/ 均/ 为/ 1/ (/ 此参数/ 需要/ 通过/ 心跳/ 信息/ 由/ 节点/ 实时/ 刷新/ )/ ./ 序号/ 节点/ 标识/ SAN/ 坐标/ 区域/ 范围/ 延迟/ 1B/ (/ 4/ ,/ 5/ )/ x/ ∈/ [/ 0/ ,/ 8/ ]/ ,/ y/ ∈/ [/ 0/ ,/ 10/ ]/ 12/ —/ (/ 10/ ,/ 18/ )/ x/ ∈/ [/ 8/ ,/ 13/ ]/ ,/ y/ ∈/ [/ 10/ ,/ )/ 1/ —/ 图/ 可见/ 坐标/ 空间/ 分为/ 7/ 个/ 区域/ ,/ 每个/ 区域/ 中/ 包含/ 多个/ 承担/ 相同/ 任务/ 的/ 物理/ 节点/ ,/ 如/ T1/ 、/ T2/ 、/ T5/ 所辖/ 区域/ 分别/ 包含/ 4/ 个/ 、/ 5/ 个/ 、/ 2/ 个/ 节点/ ./ 序号/ 节点/ 标识/ SAN/ 坐标/ 区域/ 范围/ 延迟/ 1A/ (/ 5/ ,/ 17/ )/ x/ ∈/ [/ 0/ ,/ 8/ ]/ ,/ y/ ∈/ [/ 10/ ,/ )/ 12/ —/ (/ 5/ ,/ 17/ )/ x/ ∈/ [/ 0/ ,/ 8/ ]/ ,/ y/ ∈/ [/ 10/ ,/ )/ 13C/ (/ 11/ ,/ 3/ )/ x/ ∈/ [/ 8/ ,/ )/ ,/ y/ ∈/ [/ 0/ ,/ 10/ ]/ 14D/ (/ 11/ ,/ 3/ )/ x/ ∈/ [/ 8/ ,/ )/ ,/ y/ ∈/ [/ 0/ ,/ 10/ ]/ 15E/ (/ 11/ ,/ 3/ )/ x/ ∈/ [/ 8/ ,/ )/ ,/ y/ ∈/ [/ 0/ ,/ 10/ ]/ 1/ 序号/ 节点/ 标识/ SAN/ 坐标/ 区域/ 范围/ 延迟/ 1B/ (/ 4/ ,/ 5/ )/ x/ ∈/ [/ 0/ ,/ 8/ ]/ ,/ y/ ∈/ [/ 0/ ,/ 10/ ]/ 12/ —/ (/ 10/ ,/ 18/ )/ x/ ∈/ [/ 8/ ,/ 13/ ]/ ,/ y/ ∈/ [/ 10/ ,/ )/ 1Page9/ 序号/ 节点/ 标识/ 节点/ 权值/ 节点/ 负载/ 连接/ 方向/ 1E2D3G/ 节点/ A/ 完成/ 本地/ 任务/ 后/ 将/ 按/ 下述/ 步骤/ 定位/ 下/ 一步/ 执行/ 节点/ :/ (/ 1/ )/ 根据/ Tsetpost/ 可知/ 后继/ 任务/ 坐标/ 为/ (/ 11/ ,/ 3/ )/ ,/ 将/ 其/ 加入/ 查询/ 消息/ ;/ (/ 2/ )/ 查询/ 本/ 地域/ 间/ 路由表/ ,/ 发现/ (/ 11/ ,/ 3/ )/ 在/ 邻居/ 节点/ 中/ 没有/ 命中/ 且/ 不/ 在/ 邻接/ 区域/ 内/ ;/ (/ 3/ )/ 计算/ 邻接/ 区域/ T3/ (/ 区域/ 坐标/ 为/ (/ 10/ ,/ 18/ )/ )/ ,/ T5/ (/ 区域/ 坐标/ 为/ (/ 4/ ,/ 5/ )/ )/ 与/ (/ 11/ ,/ 3/ )/ 的/ 空间/ 距离/ 分别/ 为/ 15.03/ 和/ 7.28/ ,/ 选择/ 空间/ 距离/ 最小/ 邻域/ T5/ 为/ 转发/ 区域/ ,/ 在/ 该/ 区域/ 内/ 节点/ A/ 只有/ 一个/ 域间/ 邻居/ 节点/ B/ ,/ 则/ B/ 为/ 转发/ 节点/ 转发/ 查询/ 消息/ ;/ (/ 4/ )/ 节点/ B/ 收到/ 消息/ 后/ 查询/ 本/ 地域/ 间/ 路由表/ ,/ 命中/ 目标/ 节点/ C/ 、/ D/ 、/ E/ ;/ (/ 5/ )/ 选择/ 延迟/ 最小/ 节点/ ,/ 当/ 延迟/ 相同/ 时/ 按/ 均匀/ 概率/ 随机/ 选取/ 目标/ 节点/ 转发/ 查询/ 消息/ ,/ 此处/ 选/ C/ ;/ (/ 6/ )/ 节点/ C/ 作为/ 目标/ 区域/ 的/ 接入/ 节点/ 查询/ 本/ 地域/ 内/ 路由表/ ,/ 根据/ EBON/ 算法/ 选择/ 随机/ 路径/ 上/ 采样/ 值/ 最大/ 的/ 节点/ (/ 图/ 6/ 右图/ 为/ 区域/ T2/ 的/ 局部/ 放大/ ,/ 其中/ 虚线/ 给出/ 了域/ 内/ 随机/ 路径/ )/ G/ (/ 计算方法/ 同图/ 3/ 实例/ )/ ;/ (/ 7/ )/ 节点/ G/ 为/ 最终/ 执行/ 节点/ ,/ 并/ 与/ 节点/ A/ 直接/ 建立/ 连接/ (/ 图/ 6/ 中/ 实心/ 箭头/ 标出/ 了域/ 间/ 转发/ 路径/ ,/ 空心/ 箭头/ 标出/ 了/ 新/ 分配/ 的/ 任务/ )/ 接受/ 相关/ 任务/ 数据/ ./ 由/ 上述/ 实例/ 可见/ ,/ 在/ 服务/ 联盟/ 内/ ,/ 任务分配/ 通过/ EBON/ 网络/ 实现/ 了/ 去/ 中心化/ ./ 节点/ 的/ 负载/ 状况/ 通过/ 在/ EBON/ 网络/ 上/ 的/ 随机/ 漫步/ 采样/ 得到/ ,/ 而/ 不/ 需要/ 由/ 中心/ 节点/ 统一/ 管理/ ,/ 从而/ 每个/ 节点/ 只/ 需/ 维护/ 与其/ 所/ 能/ 承担/ 的/ 负载/ 数量/ 成正比/ 的/ 邻居/ 数/ ./ 如/ T2/ 区域/ 中/ (/ 图/ 6/ 中/ 右图/ )/ 节点/ 的/ 最大/ 域/ 内/ 度数/ 为/ 4/ ,/ 最小/ 为/ 2/ ,/ 而/ 传统/ 的/ 中心化/ 负载/ 分配/ 需要/ 域/ 内/ 节点/ 实时/ 维护/ 本/ 区域/ 所有/ 节点/ ,/ 则/ 每个/ 节点/ 的/ 邻居/ 数为/ 5/ ./ 并且/ 当域/ 内/ 节点/ 数目/ 增大/ 时/ ,/ 中心化/ 结构/ 的/ 域/ 内/ 邻居/ 数将/ 随/ N/ 的/ 增大/ 而/ 增大/ ,/ 其/ 复杂度/ 为/ O/ (/ N/ )/ ,/ 而/ EBON/ 网络/ 的/ 域/ 内/ 邻居/ 数/ 仍/ 保持稳定/ ,/ 即/ 若/ T2/ 中/ 的/ 节点/ 数/ 增大/ 到/ 10000/ ,/ 节点/ C/ ,/ D/ ,/ E/ ,/ F/ ,/ G/ 的/ 域/ 内/ 最大/ 度数/ 仍/ 保持/ 不变/ ,/ 而/ 中心化/ 结构/ 每个/ 节点/ 则/ 需/ 维护/ 10000/ 个域/ 内/ 节点/ ./ 因此/ 在/ 节点/ 数目/ 较大/ 且/ 动态变化/ 频繁/ 的/ 系统/ 中/ ,/ EBON/ 的/ 优势/ 比较/ 明显/ ./ 对于/ 服务/ 联盟/ 间/ 的/ 服务/ 发现/ 效率/ ,/ 基于/ 多层/ 结构化/ 对等网/ 的/ SAN/ 网络/ 较/ SwinDeW/ 系统/ 中/ 的/ 洪泛/ 策略/ 有/ 了/ 明显/ 的/ 提高/ ./ 定义/ 服务/ 发现/ 请求/ 在/ 到达/ 目标/ 区域/ 前/ 跳转/ 的/ 次数/ 为/ 服务/ 请求/ 路由/ 步数/ ,/ 记为/ Hij/ ,/ 表示/ 由/ 区域/ Ti/ 向/ 区域/ Tj/ 跳转/ 的/ 步数/ ,/ 即/ 加载/ 任务/ Ti/ 的/ 节点/ 完成/ 任务/ 后/ 在/ 网络/ 中/ 搜索/ 加载/ 后继/ 任务/ Tj/ 的/ 节点/ 的/ 步数/ ./ 同时/ 定义/ 在/ 路由/ 过程/ 中/ ,/ 到达/ 目标/ 节点/ 前/ 服务/ 请求/ 传递/ 到/ 的/ 节点/ 数目/ 为/ 扩展/ 节点/ 数/ ,/ 记为/ Nij/ ,/ 表示/ 由/ 区域/ 区域/ Ti/ 向/ 区域/ Tj/ 跳转/ 过程/ 中除/ 起始/ 和/ 目标/ 节点/ 外/ 扩展/ 的/ 节点/ 数/ ./ 例如/ ,/ 在/ 上述/ 实例/ 中/ ,/ 由/ 区域/ T1/ 向/ 区域/ T2/ 的/ 路由/ 路径/ 有/ 节点/ A/ →/ B/ →/ C/ ,/ 则/ H12/ =/ 2/ ,/ N12/ =/ 1/ ./ 基于/ 上述/ 定义/ 和/ 实例/ ,/ 我们/ 比较/ 了/ SAN/ 和/ SwinDeW/ 对应/ 于/ 学生/ 注册/ 系统/ 的/ 路由/ 步数/ 和/ 扩展/ 节点/ 数/ ,/ 列于/ 表/ 6/ 和表/ 7/ 中/ ,/ 其中/ SwinDeW/ 系统/ 的/ 结构/ 见/ 文献/ [/ 6/ ]/ ./ 表/ 6SAN/ -/ EBON/ 与/ SwinDeW/ 服务/ 请求/ 路由/ 步数/ 比较/ SAN/ -/ EBON21112111/ ./ 286SwinDeW22164613/ ./ 143/ 表/ 7SAN/ -/ EBON/ 与/ SwinDeW/ 扩展/ 节点/ 数/ 比较/ SAN/ -/ EBON1010/ ./ 667SwinDeW7687/ 上表/ 中/ E/ (/ H/ )/ 和/ E/ (/ N/ )/ 分别/ 表示/ 路由/ 步数/ 和/ 扩展/ 节点/ 数/ 的/ 平均值/ ,/ 其中/ 表/ 6/ 中/ 列出/ 了/ 实例/ 中/ 所有/ 可能/ 路径/ 的/ 路由/ 步数/ ,/ 表/ 7/ 中仅/ 列出/ 了/ 与/ 实例/ 中/ 相对/ 应/ 的/ T1/ ,/ T2/ ,/ T3/ ,/ 和/ T5/ 区域/ 的/ 扩展/ 节点/ 数/ ,/ 但/ 已具/ 代表性/ ./ 从/ 上述/ 比较/ 结果/ 可以/ 看出/ ,/ SAN/ 网络/ 的/ 路由/ 步数/ 和/ 扩展/ 节点/ 数/ 明显/ 优于/ SwinDeW/ 系统/ ./ 并且/ ,/ 随着/ 系统/ 中/ 节点/ 数目/ 的/ 增长/ ,/ SwinDeW/ 系统/ 的/ 路由/ 步数/ 和/ 扩展/ 节点/ 数将/ 按/ 节点/ 数目/ 的/ 幂率/ 增长/ (/ 4.1/ 节中/ 有/ 具体分析/ )/ ,/ 而/ SAN/ 网络/ 的/ 路由/ 步数/ 仅/ 与/ 工作/ 流/ 模型/ 中/ 的/ 任务/ 数/ 有关/ ,/ 只要/ 工作/ 流/ 模型/ 不/ 发生变化/ ,/ 其/ 路由/ 步数/ 不随/ 节点/ 数目/ 的/ 增长/ 而/ 增大/ ,/ 而/ 扩展/ 节点/ 数/ 等于/ 路由/ 步数/ 减/ 1/ ,/ 所以/ 也/ 保持稳定/ ./ 因此/ 在/ 节点/ 数/ 较大/ 的/ 系统/ 中/ SAN/ 网络/ 具有/ 明显/ 优的/ 路由/ 效率/ 且/ 引入/ 较/ 小/ 的/ 通信/ 负载/ ./ 5/ 结束语/ 本文/ 提出/ 一种/ 新/ 的/ 基于/ 结构化/ P2P/ 网络/ 的/ P2P/ 工作/ 流/ 系统/ 节点/ 定位/ 网络/ SAN/ -/ EBON/ ./ 讨论/ 了/ 其/ 网络结构/ 、/ 路由/ 算法/ 以及/ 系统/ 的/ 动态/ 维护/ 机制/ ./ 主要/ 贡献/ 有/ :/ (/ 1/ )/ 以/ 任务/ 关系/ 对/ 参与/ 节点/ 进行/ 聚类/ ,/ 较/ 基于/ 角色/ 的/ 方法/ 使/ 联盟/ 边缘/ 更加/ 清晰/ ;/ (/ 2/ )/ 首次/ 在/ 工作/ 流/ 系统/ 中/ 引入/ 结构化/ P2P/ 网络/ 组织/ 服务/ 联盟/ ,/ 提出/ SAN/ 网络/ ,/ 相比/ 于/ 非/ 结构化/ P2P/ 网络/ 提供/ 了/ 更/ 高/ 的/ 服务/ 发现/ 效率/ 和/ 更/ 小/ 的/ 通信/ 负载/ ;/ (/ 3/ )/ 以/ 节点/ 承载/ 服务/ 标识/ 该/ 节点/ ,/ 实现/ 了/ 所查/ 即/ 所得/ ;/ (/ 4/ )/ 在/ 联盟/ 内部/ 基于/ BON/ 网络/ ,/ 考虑/ 节点/ 的/ 异质性/ 改进/ 其/ 采样/ 机制/ ,/ 提出/ 了/ EBON/ 算法/ ,/ 实现/ 了/ 去/ 中心化/ Page10/ 实时/ 定位/ 最优/ 执行/ 节点/ ./ SAN/ -/ EBON/ 网络/ 在/ 控制流/ 上/ 为/ 相对/ 封闭/ 的/ 自/ 组织/ 运行/ 环境/ ,/ 运行/ 时/ 阶段/ 正常/ 的/ 业务流程/ 无需/ 任何/ 中心/ 服务器/ 介入/ ./ 注册/ 服务器/ 在/ 系统/ 运行/ 时/ 阶段/ 提供/ 主动性/ 监控/ ,/ 即/ 只有/ 当/ 系统/ 管理者/ 需要/ 了解/ 系统/ 参数/ 及/ 流程/ 实例/ 或者/ 工作/ 位置/ 运行/ 情况/ 时/ ,/ 由/ 注册/ 服务器/ 主动/ 向/ 工作/ 节点/ 查询/ (/ 其/ 相关/ 协议/ ,/ 数据结构/ 及/ 策略/ 属/ 相对/ 独立/ 的/ 主题/ ,/ 将/ 在/ 后续/ 工作/ 中/ 单独/ 讨论/ ,/ 本文/ 不再/ 展开/ 描述/ )/ ./ 对于/ 系统/ 异常/ 我们/ 将/ 其/ 分为/ 结构性/ 和/ 非/ 结构性/ 两种/ ./ 结构性/ 异常/ 影响/ 系统/ 连通性/ ,/ 导致系统/ 产生/ 多个/ 强/ 连通/ 块/ ,/ 此时/ ,/ 被/ 独立/ 的/ 工作/ 节点/ 将/ 通过/ 注册/ 服务器/ 作为/ 新/ 节点/ 重新加入/ 系统/ ,/ 新/ 节点/ 加入/ 实现/ 过程/ 见/ 4.2/ 节/ ./ 非/ 结构性/ 异常/ 不/ 影响/ 系统/ 的/ 连通性/ 和/ 控制/ 流路/ 由/ ,/ 此时/ 异常/ 节点/ 的/ 邻居/ 节点/ 将/ 按/ 异常/ 节点/ 退出/ 自/ 组织/ 修复/ 系统/ ,/ 节点/ 退出/ 实现/ 过程/ 见/ 4.2/ 节/ ./ 在/ 后续/ 工作/ 中/ 我们/ 将/ 考虑/ 利用/ 工作/ 流/ 模型/ 信息/ 构造/ 结构化/ 对等网/ ,/ 以/ 更/ 小/ 的/ 通信/ 负载/ 获得/ 更/ 高/ 的/ 节点/ 定位/ 效率/ ,/ 进一步/ 缩短/ 系统/ 实例/ 的/ 执行/ 时间/ ./ 

