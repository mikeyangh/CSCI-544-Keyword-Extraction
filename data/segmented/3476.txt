Page1/ 集合/ 和/ 字符串/ 的/ 相似/ 度/ 查询/ 林学/ 民/ 1/ )/ ,/ 2/ )/ 王炜/ 2/ )/ 1/ )/ (/ 华东师范大学/ 软件/ 学院/ 上海/ 200062/ )/ 2/ )/ (/ 澳大利亚/ 新南威尔士/ 大学/ 计算机科学/ 与/ 工程系/ 悉尼/ 2052/ )/ 摘要/ 相似/ 度/ 查询/ 是/ 计算机/ 学科/ 中/ 一个/ 重要/ 的/ 问题/ ,/ 它/ 的/ 应用/ 遍及/ 多个/ 领域/ ,/ 例如/ 数据库/ 、/ 数据/ 集成/ 、/ 互联网/ 、/ 数据挖掘/ 以及/ 生物/ 信息学/ 等/ ./ 该文/ 主要/ 讨论/ 在/ 集合/ 和/ 字符串/ 上/ 的/ 相似/ 度/ 查询/ ./ 学术界/ 从/ 2000/ 年/ 来/ 在/ 这个/ 领域/ 内/ 取得/ 了/ 大量/ 的/ 进展/ ./ 作者/ 总结/ 了/ 主要/ 工作/ ,/ 并/ 给出/ 了/ 作者/ 的/ 分析/ 和/ 归类/ ./ 最后/ ,/ 该文/ 提出/ 了/ 一些/ 未来/ 工作/ 的/ 方向/ ./ 关键词/ 相似/ 度/ 查询/ ;/ 相似/ 度/ 连接/ ;/ 前缀/ 过滤/ ;/ jaccard/ ;/ 编辑/ 距离/ 1/ 引言/ 给定/ 一组/ 在/ 数据库/ 中/ 的/ 对象/ R/ ,/ 一个/ 查询/ 对象/ Q/ ,/ 一个/ 相似/ 度/ 函数/ 和/ 相似/ 度/ 阈值/ t/ ,/ Q/ 的/ 相似/ 度/ 查找/ (/ SimilaritySearch/ )/ 会/ 返回/ R/ 中/ 和/ Q/ 相似/ 度/ 至少/ 是/ t/ 的/ 对象/ ./ 如果/ 将/ 另一组/ 对象/ S/ 中/ 每/ 一个/ 对象/ 作为/ Q/ 进行/ 相似/ 度/ 查询/ ,/ 其/ 结果/ 是/ R/ 和/ S/ 中/ 相似/ 度/ 至少/ 是/ t/ 的/ 对/ ,/ 这个/ 操作/ 叫作/ 相似/ 度/ 连接/ (/ SimilarityJoin/ )/ ./ 我们/ 将/ 这/ 两类/ 查询/ 统称/ 为/ 相似/ 度/ 查询/ (/ Simi/ -/ larityQueries/ )/ ./ 相似/ 度/ 查询/ 在/ 计算机科学/ 的/ 多个/ 领域/ 内有/ 广泛/ 的/ 应用/ ./ 例如/ ,/ 在/ 记录/ 用户/ 兴趣/ 的/ 数据库/ 中/ ,/ 每个/ 用户/ 关联/ 了/ 一组/ 他/ 或/ 她/ 感兴趣/ 的/ 网址/ ./ 通过/ 使用/ Jaccard/ 相似/ 度/ ①/ ,/ 我们/ 可以/ 找出/ 兴趣/ 十分/ 类似/ 的/ 用户/ [/ 1/ ]/ ./ 在/ 某些/ 应用/ 中/ ,/ 我们/ 更/ 自然/ 地/ 可以/ 使用/ 距离/ 函数/ ./ 为了/ 找到/ 相似/ 度高/ 的/ 对象/ 组/ ,/ 我们/ 可以/ 限定/ 距离/ 不/ 超过/ 某个/ 阈值/ ./ 例如/ ,/ 为了/ 集成/ 多个/ 客户/ 数据/ 的/ 列表/ ,/ 我们/ 可以/ 把/ 客户/ 信息/ 间/ 编辑/ 距离/ 不/ 超过/ 某个/ 阈值/ 的/ 客户/ 对/ 返回/ ,/ 由/ 专人/ 或者/ 自动/ 判别/ 工具/ 来/ 判断/ 它们/ 是否是/ 同一个/ 客户/ [/ 2/ ]/ ./ 其它/ 的/ 典型/ 的/ 应用/ 还/ 包括/ :/ (/ 1/ )/ 在/ 一个/ 记录/ 了/ 众多/ 不同/ 类型/ 的/ 地/ 标的/ 空间/ Page2/ 数据库/ 中/ ,/ 我们/ 可以/ 找出/ 例如/ 在/ 地铁站/ 附近/ (/ 直线/ 或者/ 行走/ 距离/ )/ 500m/ 内/ 的/ 意大利/ 餐馆/ ./ (/ 2/ )/ 在/ 数据/ 集成/ 应用/ 中/ ,/ 我们/ 可以/ 使用/ 连接/ 字段/ 的/ 值/ 大致/ 匹配/ 的/ 条件/ 连接/ (/ SoftJoin/ )/ 多个/ 异构/ 的/ 数据/ 集/ [/ 3/ -/ 4/ ]/ ./ 类似/ 的/ 应用/ 还/ 包括/ 基于/ 字典/ 的/ 命名/ 实体/ 识别/ (/ Dictionary/ -/ basedNamedEntityRecogni/ -/ tion/ ,/ DNER/ )/ ,/ 例如/ 在/ 网页/ 中/ 自动/ 标注/ 产品名称/ ./ 我们/ 可以/ 使用/ Jaccard/ 相似/ 度/ 函数/ 进行/ 近似/ 匹配/ (/ 例如/ 将/ “/ canoneos5ddigitalslrcamera/ ”/ 匹配/ 到/ “/ canoneos5ddigitalcamera/ ”/ [/ 5/ ]/ )/ ./ (/ 3/ )/ 在/ 生物/ 信息学/ 中/ ,/ 我们/ 需要/ 近似/ 的/ 蛋白质/ 或/ 基因/ 序列/ 的/ 匹配/ ,/ 以/ 支持/ 同源/ 查找/ (/ HomologySearch/ )/ [/ 6/ ]/ 和/ 下一代/ 基因/ 测序/ (/ Next/ -/ generationSe/ -/ quencing/ )/ [/ 7/ ]/ 等/ 任务/ ./ 在/ 本文/ 中/ ,/ 我们/ 主要/ 关注/ 基于/ 集合/ 和/ 字符串/ 的/ 相似/ 度/ 连接/ (/ 即/ ,/ 数据/ 和/ 查询/ 对象/ 都/ 是/ 集合/ 和/ 字符串/ )/ ./ 对于/ 这个/ 问题/ ,/ 主要/ 的/ 数据库/ 领域/ 内/ 的/ 工作/ 是从/ 1997/ 年/ 开始/ [/ 2/ ,/ 8/ -/ 9/ ]/ ①/ ,/ 并/ 取得/ 了/ 许多/ 重要/ 的/ 进展/ ./ 本文/ 将/ 对/ 其中/ 主要/ 的/ 工作/ 进行/ 分门别类/ 的/ 介绍/ 和/ 分析/ ,/ 并/ 给出/ 了/ 我们/ 认为/ 未来/ 的/ 有/ 希望/ 的/ 工作/ 方向/ ./ 本文/ 第/ 2/ 节/ 介绍/ 问题/ 的/ 定义/ 和/ 相关/ 的/ 背景/ 知识/ ;/ 第/ 3/ 节/ 介绍/ 集合/ 上/ 的/ 相似/ 度/ 查询/ 的/ 技术/ 和/ 工作/ ;/ 第/ 4/ 节/ 介绍/ 字符串/ 上/ 的/ 相似/ 度/ 查询/ 的/ 技术/ 和/ 工作/ ;/ 第/ 5/ 节/ 介绍/ 相关/ 工作/ ;/ 第/ 6/ 节/ 介绍/ 我们/ 对/ 未来/ 工作/ 方向/ 的/ 展望/ ;/ 最后/ 第/ 7/ 节/ 进行/ 总结/ ./ 2/ 问题/ 定义/ 和/ 背景/ 知识/ 给定/ 两组/ 对象/ R/ 和/ S/ ,/ 并/ 定义/ 在/ 两个/ 对象/ 之间/ 的/ 相似/ 度/ 函数/ sim/ 及其/ 阈值/ t/ ,/ 相似/ 度/ 连接/ 的/ 定义/ 是/ 返回/ 所有/ R/ 和/ S/ 的/ 对象/ 中其/ 相似/ 度/ 至少/ 是/ t/ 的/ 那些/ 对/ ,/ 即/ {/ (/ r/ ,/ s/ )/ |/ sim/ (/ r/ ,/ s/ )/ / t/ ,/ r/ ∈/ R/ ,/ s/ ∈/ S/ }/ ./ 为了/ 表述/ 方便/ ,/ 在/ 本文/ 中/ ,/ 我们/ 仅/ 考虑/ 相似/ 度自/ 连接/ ,/ 即/ {/ (/ r1/ ,/ r2/ )/ |/ sim/ (/ r1/ ,/ r2/ )/ / t/ ,/ r1/ ∈/ R/ ,/ r2/ ∈/ R/ }/ ./ 在/ 某些/ 应用/ 中/ ,/ 我们/ 可以/ 用/ 距离/ 函数/ 代替/ 以上/ 定义/ 中/ 的/ 相似/ 度/ 函数/ ,/ 并/ 将/ 判断/ 条件/ “/ sim/ (/ r1/ ,/ r2/ )/ / t/ ”/ 改为/ “/ dist/ (/ r1/ ,/ r2/ )/ / t/ ”/ ./ 2.1/ 相似/ 度/ 函数/ 阈值条件/ 间/ 的/ 关系/ 和/ 转换/ 2.1/ ./ 1/ 基于/ 集合/ 的/ 相似/ 度/ 函数/ 给定/ 两个/ 集合/ A/ 和/ B/ ,/ 许多/ 常见/ 的/ 基于/ 集合/ 的/ 相似/ 度/ 函数/ 的/ 约束条件/ 大多/ 可以/ 转化/ 为/ 等价/ 的/ 基于/ 集合/ 交/ 的/ 大小/ ,/ 即/ |/ A/ ∩/ B/ |/ 的/ 约束条件/ ./ 例如/ ,/ Jaccard/ 的/ 定义/ 是/ 两个/ 集合/ 的/ 交/ 的/ 大小/ 除以/ 两个/ 集合/ 并/ 的/ 大小/ ,/ 而/ 集合/ 并/ 的/ 大小/ 是/ 两个/ 集合/ 各自/ 大小/ 减去/ 它们/ 交/ 的/ 大小/ ./ B/ |/ / (/ t/ // (/ 1/ +/ t/ )/ )/ ×/ (/ |/ A/ |/ +/ |/ B/ |/ )/ ./ 定理/ 1/ ./ Jaccard/ (/ A/ ,/ B/ )/ / t/ 的/ 充要条件/ 是/ |/ A/ ∩/ 推论/ 1/ ./ Jaccard/ (/ A/ ,/ B/ )/ / t/ 的/ 必要条件/ 是/ |/ A/ ∩/ B/ |/ / t/ ×/ |/ A/ |/ ./ 证明/ ./ 如果/ Jaccard/ (/ A/ ,/ B/ )/ / t/ 则/ |/ B/ |/ / t/ ×/ |/ A/ |/ ,/ 带入/ 不等式/ 右边/ ,/ 即可/ 得到/ 以上/ 结论/ ./ 证毕/ ./ 由于/ 以上/ 这些/ 约束条件/ 完全/ 等价/ ,/ 我们/ 可以/ 集中/ 优化/ 基于/ 集合/ 相交/ 大小/ 的/ 约束/ ,/ 而/ 不/ 需要/ 为/ 每/ 一个/ 相似/ 度/ 函数/ 做/ 优化/ ./ 2.1/ ./ 2/ 基于/ 字符串/ 的/ 相似/ 度/ 函数/ 编辑/ 距离/ 是/ 常见/ 的/ 衡量/ 字符串/ 相似/ 度/ 的/ 函数/ 之一/ ./ 两条/ 字符串/ A/ 和/ B/ 之间/ 的/ 编辑/ 距离/ (/ 记作/ ed/ (/ A/ ,/ B/ )/ )/ 是/ 使用/ 插入/ 、/ 删除/ 、/ 替换/ 操作/ 将/ 一条/ 字符串/ 改为/ 另/ 一条/ 的/ 所/ 需/ 的/ 最少/ 步数/ ./ 字符串/ 的/ 编辑/ 距离/ 可以/ 使用/ 动态/ 规划/ (/ dynamicprogramming/ )/ 来/ 计算/ ,/ 其/ 时间/ 复杂度/ 为/ O/ (/ n/ ×/ m/ )/ (/ n/ 和/ m/ 分别/ 为/ 两条/ 字符串/ 的/ 长度/ )/ ②/ ./ 由于/ 编辑/ 距离/ 的/ 计算/ 已经/ 比较/ 费时/ ,/ 在/ 相似/ 度/ 查询/ 中/ ,/ 如果/ 我们/ 还/ 需要/ 比较/ 每/ 一对/ 字符串/ 的话/ ,/ 其/ 运行/ 效率/ 会/ 非常/ 低下/ ./ 在/ 实际/ 的/ 应用/ 中/ ,/ 绝大多数/ 的/ 字符串/ 对/ 不/ 满足/ 阈值/ 的/ 限制/ ./ 所以/ ,/ 我们/ 可以/ 通过/ 使用/ 一些/ 过滤/ 条件/ 来/ 剔除/ 绝对/ 不/ 可能/ 满足/ 某个/ 编辑/ 距离/ 的/ 约束/ 的/ 字符串/ ③/ ./ 常见/ 的/ 过滤/ 方法/ 是/ 将/ 编辑/ 距离/ 的/ 约束/ 转换成/ 特征/ (/ signature/ )/ 集合/ 间交/ 的/ 约束/ [/ 2/ ]/ ./ 常见/ 的/ 特征提取/ 的/ 方法/ 是/ 基于/ q/ -/ gram/ ,/ 即/ 提取/ 该/ 字符串/ S/ 中/ 所有/ 的/ 长度/ 为/ q/ 的/ 子串/ (/ 称作/ grams/ (/ S/ )/ )/ ./ grams/ (/ S/ )/ 有/ |/ S/ |/ -/ q/ +/ 1/ 个/ q/ -/ gram/ ④/ ./ 定理/ 2/ ./ ed/ (/ A/ ,/ B/ )/ / t/ 的/ 必要条件/ 是/ |/ grams/ (/ A/ )/ ∩/ grams/ (/ B/ )/ |/ / max/ (/ |/ A/ |/ ,/ |/ B/ |/ )/ -/ q/ +/ 1/ -/ t/ ×/ q/ ./ 证明/ ./ 可以/ 证明/ 在/ 最坏/ 情况/ 下/ ,/ 每个/ 编辑/ (/ 插入/ 、/ 删除/ 或者/ 替换/ )/ 操作/ 一定/ 可以/ 破坏/ q/ 个/ q/ -/ gram/ ./ 并且/ 注意/ 到/ 字符串/ X/ 生成/ |/ X/ |/ -/ q/ +/ 1/ 个/ q/ -/ gram/ ./ 通过/ 考虑/ 从/ A/ ~/ B/ 和/ B/ ~/ A/ 的/ 编辑/ 操作/ ,/ 以上/ 定理/ 可证/ ./ ①/ ②/ ③/ ④/ fy/ )/ ./ 例如/ 它/ 在/ 空间/ 数据库/ 中/ 被/ 广泛应用/ ./ Page3/ 文献/ [/ 2/ ]/ 还/ 考虑/ 了/ q/ -/ gram/ 的/ 位置/ :/ 只有/ 两个/ 相同/ 的/ q/ -/ gram/ 在/ 各自/ 字符串/ 中/ 的/ 位置/ 相差/ 不/ 超过/ 阈值/ t/ ,/ 我们/ 才/ 将/ 它们/ 算作/ 匹配/ 的/ q/ -/ gram/ ./ 所以/ ,/ 以上/ 定理/ 的/ 条件/ 还/ 可以/ 增强/ 为/ matching/ _/ grams/ (/ A/ ,/ B/ )/ / max/ (/ |/ A/ |/ ,/ |/ B/ |/ )/ -/ q/ +/ 1/ -/ t/ ×/ q/ ./ 满足/ 以上/ 条件/ 的/ 字符串/ 构成/ 了/ 候选/ 集/ ./ 我们/ 仅/ 需/ 对/ 候选/ 集中/ 的/ 字符串/ 进行/ 编辑/ 距离/ 的/ 验证/ ,/ 从而/ 能比/ 每条/ 字符串/ 都/ 验证/ 更加/ 高效/ ./ 这/ 对于/ 在/ 关系数据库/ 上/ 支持/ 基于/ 编辑/ 距离/ 的/ 查询/ 意义/ 尤其/ 重大/ ,/ 因为/ 以上/ 的/ 过滤/ 条件/ 都/ 可以/ 通过/ SQL/ 来/ 完成/ ,/ 仅仅/ 最后/ 的/ 验证/ 需要/ 用户/ 自定义/ 函数/ (/ UDF/ )/ 来/ 实现/ ./ 3/ 集合/ 的/ 相似/ 度/ 查询/ 3.1/ 前缀/ 过滤/ (/ PrefixFiltering/ )/ 根据/ 以上/ 相似/ 度/ 函数/ 阈值条件/ 间/ 的/ 转换/ ,/ 我们/ 知道/ 我们/ 需要/ 处理/ 两个/ 集合/ 的/ 交/ 的/ 大小/ 大于/ 等于/ 一个/ 阈值/ t/ 的/ 情况/ ./ 给定/ 一个/ 集合/ Q/ ,/ 如何/ 才能/ 找到/ 和/ Q/ 相交/ 大于/ 等于/ t/ 的/ 集合/ 呢/ ?/ 传统/ 的/ 做法/ 是/ :/ 先/ 找到/ 一组/ 候选/ 集/ C/ ,/ 即/ 满足/ Q/ 和/ C/ 中/ 任意/ 元素/ Ci/ 的/ 交大/ 于/ 等于/ 1/ ;/ 然后/ 在/ 候选/ 集中/ 进行/ 校验/ (/ Verification/ )/ ,/ 即/ 计算/ Q/ 和/ Ci/ 的/ 交/ 的/ 大小/ 并/ 和/ 阈值/ t/ 进行/ 比较/ ./ 第一步/ 可以/ 使用/ 倒排/ 索引/ (/ InvertedIndex/ )/ 快速/ 地/ 获得/ 候选/ 集/ ,/ 即/ C/ =/ {/ I/ (/ w/ )/ |/ w/ ∈/ Q/ }/ ,/ I/ (/ w/ )/ 是/ 元素/ w/ 对应/ 的/ 倒/ 排列/ 表/ (/ InvertedListorPostingsList/ )/ ./ 该/ 方法/ 在/ 实际/ 数据/ 集上/ 的/ 主要/ 缺点/ 是/ 当/ Q/ 中有/ 一个/ 元素/ 出现/ 的/ 频率/ 较/ 高时/ ,/ 候选/ 集会/ 变得/ 很大/ ;/ 恰恰/ 在/ 实际/ 数据/ 集上/ ,/ 元素/ 的/ 出现/ 通常/ 会/ 遵循/ Zipf/ 定律/ ,/ 所以/ 有/ 相当/ 高/ 的/ 概率/ ,/ Q/ 中会/ 有/ 一个/ 高频/ 的/ 元素/ ./ 最早/ 意识/ 到/ 该/ 问题/ 并/ 提出/ 解决方案/ 的/ 是/ 文献/ [/ 14/ ]/ ./ 该/ 论文/ 提出/ 了/ 仅/ 使用/ Q/ 中/ 最少/ 出现/ 的/ |/ Q/ |/ -/ t/ +/ 1/ 个/ 元素/ 的/ 倒/ 排列/ 表来/ 获得/ 候选/ 集/ ./ 之后/ ,/ 文献/ [/ 15/ ]/ 将/ 这个/ 想法/ 进一步/ 推广/ 到/ 数据/ ,/ 即/ 所有/ 数据/ 集合/ |/ S/ |/ 也/ 只要/ 索引/ 其/ |/ S/ |/ -/ t/ +/ 1/ 个/ 元素/ ./ 为了/ 达到/ 这/ 一点/ ,/ 其/ 附加/ 的/ 要求/ 是/ 所有/ 集合/ 的/ 元素/ 要/ 按照/ 同一个/ 全局/ 的/ 顺序/ 排序/ ,/ 并且/ 我们/ 仅/ 考虑/ 前/ |/ S/ |/ -/ t/ +/ 1/ 个/ 元素/ ./ 为了/ 方便/ 起/ 见/ ,/ 我们/ 把/ 按照/ 某种/ 全局/ 顺序排列/ 过/ 的/ 集合/ 的/ 前/ L/ 个/ 元素/ 叫做/ 这个/ 集合/ 的/ L/ -/ 前缀/ ./ 我们/ 可以/ 定义/ 以下/ 的/ 前缀/ 过滤/ 定理/ ./ 定义/ 1/ (/ 前缀/ 过滤/ )/ ./ 两个/ 集合/ A/ 和/ B/ 的/ 交/ 的/ 大小/ 大于/ 等于/ t/ 的/ 必要条件/ 是/ 集合/ A/ 的/ (/ |/ A/ |/ -/ t/ +/ 1/ )/ -/ 前缀/ 和/ 集合/ B/ 的/ (/ |/ B/ |/ -/ t/ +/ 1/ )/ -/ 前缀/ 的/ 交大/ 于/ 等于/ 1/ ./ 前缀/ 过滤/ 应用/ 到/ 相似/ 度自/ 连接/ 时/ ,/ 可以/ 通过/ 对/ 需要/ 连接/ 的/ 关系/ 进行/ 排序/ ,/ 从而/ 得到/ 更紧/ 的/ 过滤/ 条件/ [/ 16/ ]/ ./ 这/ 是因为/ 我们/ 可以/ 限制/ 每个/ 查询/ 的/ 集合/ Q/ 仅/ 和/ 比/ 它/ 小/ 的/ 集合/ 进行/ 比较/ ./ 以/ Jaccard/ 为例/ ,/ 我们/ 可以/ 对/ Q/ 取/ (/ |/ S/ |/ -/ t/ ×/ |/ S/ |/ +/ 1/ )/ -/ 前缀/ ,/ 而/ 对/ 数据/ 集中/ 的/ 每个/ 集合/ S/ 取/ 它们/ 的/ (/ |/ S/ |/ -/ 2t/ ×/ |/ S/ |/ // (/ 1/ +/ t/ )/ +/ 1/ )/ -/ 前缀/ ./ 其它/ 的/ 对/ 前缀/ 过滤/ 的/ 改进/ 包括/ :/ (/ 1/ )/ 有/ 权重/ 的/ 情况/ ./ 以上/ 的/ 前缀/ 过滤/ 规则/ 可以/ 扩展/ 到/ 元素/ 有/ 权重/ 的/ 情况/ [/ 15/ ]/ ./ (/ 2/ )/ 延长/ 前缀/ 的/ 长度/ ./ 在/ 标准/ 的/ 前缀/ 上/ 在/ 加入/ k/ 个/ 元素/ ,/ 与此同时/ 要求/ 候选/ 集中/ 的/ 对象/ 在/ 延长/ 的/ 前缀/ 中有/ k/ +/ 1/ 个/ 相同/ 的/ 元素/ ./ 这个/ 方法/ 可以/ 有效/ 地/ 降低/ 最终/ 候选/ 集/ 的/ 大小/ ,/ 但是/ 因为/ 前缀/ 的/ 增长/ ,/ 会/ 要求/ 读取/ 更/ 多/ 的/ 倒/ 排列/ 表/ ,/ 并/ 必须/ 考虑/ 更/ 多/ 的/ 对象/ 是否/ 会/ 进入/ 候选/ 集/ ./ 其/ 实际效果/ 如何/ ,/ 很/ 有/ 可能/ 非常/ 依赖于/ 数据/ 集及/ 程序/ 的/ 实现/ ./ (/ 3/ )/ 对/ 倒排/ 索引/ 中/ 无效/ 的/ 部分/ 的/ 处理/ [/ 17/ ]/ ./ 当/ 一个/ 集合/ (/ A/ )/ 的/ 前缀/ 中/ 的/ 元素/ 被/ 索引/ 后/ ,/ 它/ 将/ 一直/ 留在/ 索引/ 里/ ,/ 并且/ 以后/ 任何/ 一个/ 前缀/ 中/ 包含/ 该/ 元素/ 的/ 字符串/ (/ B/ )/ 都/ 会/ 把/ 该/ 记录/ (/ A/ )/ 加入/ 它/ 的/ 候选/ 集/ ,/ 即使/ A/ 和/ B/ 的/ 长度/ 已经/ 不/ 符合/ 大小/ 过滤/ 的/ 条件/ ./ 因为/ 在/ 相似/ 度/ 连接/ 时/ ,/ 我们/ 用来/ 做/ 为/ 查询/ 集合/ 的/ 大小/ 是/ 递增/ 的/ ,/ 根据/ 当前/ 查询/ 集合/ 的/ 大小/ ,/ 我们/ 可以/ 动态/ 地/ 将/ 倒/ 排列/ 表/ 的/ 前端/ 那些/ 不/ 符合/ 大小/ 过滤/ 条件/ 的/ 项/ 删除/ ./ (/ 4/ )/ 全局/ 顺序/ 的/ 选择/ ./ 影响/ 候选/ 集/ 的/ 大小/ 的/ 一个/ 重要/ 因素/ 是/ 出现/ 在/ 查询/ 前缀/ 中/ 的/ 元素/ 的/ 频度/ ./ 为了/ 减少/ 候选/ 集/ 的/ 大小/ ,/ 一种/ 通用/ 的/ 启发式/ 方法/ (/ heu/ -/ ristic/ )/ 是/ 选择/ 将/ 所有/ 元素/ 按照/ 它们/ 的/ IDF/ (/ InverseDocumentFrequency/ )/ 降序/ 排列/ [/ 14/ -/ 15/ ]/ ./ 这样/ 会/ 导致/ 全局/ 最/ 不/ 常见/ 的/ 元素/ 出现/ 在/ 前缀/ 中/ ,/ 从而/ 帮助/ 减少/ 候选/ 集/ 的/ 大小/ ./ (/ 5/ )/ 在/ 数据库系统/ 中/ 实现/ 和/ 应用/ 前缀/ 过滤/ ./ 文献/ [/ 16/ ]/ 考虑/ 了/ 在/ 关系数据库/ 上/ 支持/ 相似/ 度/ 查询/ 的/ 多种/ 方法/ ./ (/ 6/ )/ 对/ 倒排/ 索引/ 的/ 改进/ ./ 在/ 海量/ 数据/ 的/ 情况/ 下/ ,/ 对/ 数据/ 集/ 建立/ 的/ 索引/ 也/ 会/ 很大/ ./ 文献/ [/ 18/ ]/ 考虑/ 了/ 不/ 索引/ 某些/ 元素/ 和/ 将/ 多个/ 元素/ 对应/ 的/ 倒/ 排列/ 表/ 融合/ 的/ 方法/ ,/ 从而/ 可以/ 有效/ 地/ 减少/ 索引/ 的/ 大小/ ,/ 使得/ 我们/ 更/ 有/ 可能/ 在/ 内存/ 中装下/ 索引/ ./ 文献/ [/ 19/ ]/ 则/ 考虑/ 了/ 索引/ 远远/ 大于/ 内存/ 、/ 必须/ 读取/ 硬盘/ 的/ 情况/ 下/ ,/ 内存/ 中/ 和/ 硬盘/ 上/ 索引/ 的/ 物理/ 组织/ 和/ 对应/ 的/ 查询处理/ 的/ 问题/ ./ 在/ 文献/ 中/ 还/ 存在/ 几种/ 不同/ 的/ 基于/ 倒排/ 索引/ 来/ 计算/ 与/ 查询/ 集合/ 交大/ 于/ 等于/ 一个/ 阈值/ 的/ 对象/ ./ 我们/ 将/ 查询/ 集合/ Q/ 中/ 每个/ 元素/ 对应/ 的/ 倒/ 排列/ 表/ Li/ 来/ 标识/ ,/ Page4/ 每个/ Li/ 包含/ 了/ 一组/ 有序/ 的/ 数据/ 集合/ 的/ ID/ ./ 我们/ 可以/ 简单/ 的/ 把/ 这些/ Li/ 归并/ 起来/ ,/ 同时/ 保持/ 对/ 每个/ ID/ 出现/ 次数/ 的/ 计数/ ,/ 并/ 返回/ 计/ 数值/ 不/ 小于/ 阈值/ 的/ ID/ (/ 即/ 文献/ [/ 20/ ]/ 中/ 的/ ScanCount/ 算法/ )/ ./ 文献/ [/ 21/ ]/ 研究/ 了/ 是否/ 可以/ 不/ 需要/ 将/ 每个/ Li/ 都/ 读取/ 完/ 就/ 可以/ 完成/ 计算/ 的/ 问题/ ,/ 并/ 给出/ 了/ 基于/ Fagin/ 的/ NRA/ 算法/ 的/ 改进/ 算法/ ./ 文献/ [/ 20/ ]/ 提出/ 了/ 另外/ 几种/ 优化/ 的/ 归并/ 算法/ ,/ 包括/ 考虑/ 了/ 通过/ 利用/ 相交/ 的/ 阈值/ 和/ 在/ 倒/ 排列/ 表上/ 的/ 跳跃/ (/ Skipping/ )/ 的/ 方法/ 达到/ 仅仅/ 读取/ 一部分/ 倒/ 排列/ 表/ 的/ 目的/ 的/ MergeSkip/ 算法/ 以及/ 将/ MergeSkip/ 和/ 前缀/ 过滤/ 的/ 变种/ 最优/ 混合/ 而/ 得到/ 的/ DivideSkip/ 算法/ ./ 3.2/ 其它/ 过滤/ 的/ 方法/ 3.2/ ./ 1/ 大小/ 过滤/ [/ 2/ ,/ 15/ ]/ ./ 如果/ 两个/ 集合/ 比较/ 相似/ ,/ 它们/ 的/ 大小/ 也/ 应该/ 比较/ 接近/ ./ 对于/ 仅仅/ 是/ 集合/ 交/ 的/ 约束条件/ ,/ 大小/ 过滤/ 无法/ 使用/ ,/ 因为/ 即使/ 两个/ 集合/ 很/ 不/ 相同/ ,/ 只要/ 它们/ 足够/ 大/ ,/ 它们/ 的/ 交/ 的/ 大小/ 也/ 有/ 可能/ 会/ 大于/ 等于/ t/ ./ 而/ 大部分/ 应用/ 会/ 避免/ 以上/ 情况/ 的/ 出现/ ,/ 从而/ 选择/ 使用/ 某些/ 方法/ 归一化/ ,/ 例如/ 除以/ 集合/ 的/ 并/ 的/ 大小/ (/ Jaccard/ )/ 或者/ 两个/ 集合/ 大小/ 的/ 均值/ (/ Dice/ )/ ./ 以/ Jaccard/ 为例/ ,/ 大小/ 过滤/ 条件/ 为/ t/ ×/ |/ A/ |/ / |/ B/ |/ / |/ A/ |/ // t/ ;/ 对于/ 编辑/ 距离/ ,/ 其/ 条件/ 为/ |/ A/ |/ -/ t/ / |/ B/ |/ / |/ A/ |/ +/ t/ ./ 3.2/ ./ 2/ 使用/ 位置/ 信息/ [/ 22/ ]/ 我们/ 注意/ 到/ 前缀/ 过滤/ 实质/ 上/ 是/ 将/ 集合/ 变成/ 了/ 一个/ 有序/ 的/ 序列/ ./ 我们/ 通过/ 使用/ 元素/ 在/ 该/ 序列/ 中/ 的/ 位置/ 信息/ ①/ ,/ 就/ 可以/ 进一步/ 增强/ 前缀/ 过滤/ 的/ 效果/ ,/ 以/ 进一步/ 减少/ 候选/ 集/ 的/ 大小/ ./ 给定/ 一个/ 元素/ e/ ,/ 一个/ 有序/ 的/ 元素/ 序列/ A/ 可以/ 被/ 分成/ 左部/ 和/ 右部/ (/ 分别/ 记作/ Al/ (/ e/ )/ 和/ Ar/ (/ e/ )/ )/ 并且/ 保证/ Al/ (/ e/ )/ 中/ 所有/ 元素/ 严格/ (/ 在/ 全局/ 顺序/ 中/ )/ 小于/ e/ ,/ Ar/ (/ e/ )/ 中/ 所有/ 元素/ 大于/ 等于/ e/ ./ 显然/ |/ A/ ∩/ B/ |/ =/ |/ Al/ (/ e/ )/ ∩/ Bl/ (/ e/ )/ |/ +/ |/ Ar/ (/ e/ )/ ∩/ Br/ (/ e/ )/ |/ ./ 而/ |/ Ar/ (/ e/ )/ ∩/ Br/ (/ e/ )/ |/ / min/ (/ |/ Ar/ (/ e/ )/ |/ ,/ |/ Br/ (/ e/ )/ |/ )/ ./ 如果/ 我们/ 将/ e/ 在/ A/ 和/ B/ 中/ 的/ 位置/ 记作/ pos/ (/ A/ ,/ e/ )/ 和/ pos/ (/ B/ ,/ e/ )/ ,/ 我们/ 可以/ 得到/ 以下/ 的/ 基于/ 位置/ 的/ 过滤/ 方法/ ./ 定理/ 3/ (/ 位置/ 过滤/ )/ ./ 两个/ 集合/ A/ 和/ B/ 的/ 交/ 的/ 大小/ 大于/ 等于/ t/ 的/ 必要条件/ 是/ 对于/ 任意/ 元素/ e/ ,/ |/ Al/ (/ e/ )/ ∩/ Bl/ (/ e/ )/ |/ +/ 1/ +/ min/ (/ |/ A/ |/ -/ pos/ (/ A/ ,/ e/ )/ ,/ |/ B/ |/ -/ pos/ (/ B/ ,/ e/ )/ )/ / t/ ./ 推论/ 2/ ./ 两个/ 集合/ A/ 和/ B/ 的/ 交/ 的/ 大小/ 大于/ 等于/ t/ 的/ 必要条件/ 是/ 对于/ 它们/ (/ |/ A/ |/ -/ t/ +/ 1/ )/ -/ 前缀/ 和/ (/ |/ B/ |/ -/ t/ +/ 1/ )/ -/ 前缀/ 中/ 最小/ 的/ 相交/ 的/ 元素/ efirst/ ,/ 1/ +/ min/ (/ |/ A/ |/ -/ pos/ (/ A/ ,/ efirst/ )/ ,/ |/ B/ |/ -/ pos/ (/ B/ ,/ efirst/ )/ )/ / t/ ./ 证明/ ./ 因为/ efirst/ 是/ 前缀/ 中/ 最小/ 的/ 相交/ 的/ 元素/ ,/ 所以/ |/ Al/ (/ efirst/ )/ ∩/ Bl/ (/ efirst/ )/ |/ =/ 0/ ./ 然后/ 从/ 前缀/ 过滤/ 条件/ 和/ 位置/ 过滤/ 条件/ 可/ 推得/ ./ 3.2/ ./ 2/ 后缀/ 过滤/ [/ 22/ ]/ 在/ 阈值/ 较/ 高/ 的/ 情况/ 下/ ,/ 前缀/ 过滤/ 十分/ 快捷/ ,/ 这/ 主要/ 是因为/ 只有/ 集合/ 的/ 一小部分/ 被/ 索引/ 和/ 读取/ ./ 例如/ :/ 对/ Jaccard/ 而言/ ,/ 索引/ 和/ 读取/ 部分/ 几乎/ 是/ 字符串/ 长度/ 的/ (/ 1/ -/ t/ )/ 倍/ ./ 这/ 同时/ 意味/ 我们/ 考虑/ 候选/ 集时/ 没有/ 考虑/ 字符串/ 的/ (/ 相当/ 长/ 的/ )/ 后缀/ 中/ 可能/ 出现/ 的/ 不/ 匹配/ 的/ 元素/ ./ 后缀/ 过滤/ 就是/ 通过/ 进一步/ 利用/ 后缀/ 中/ 元素/ 的/ 位置/ 信息/ ,/ 来/ 进一步/ 过滤/ 前缀/ 过滤/ 不能/ 排除/ 的/ 候选/ 对/ ./ 其/ 基本/ 思想/ 是/ 选取/ 一个/ 有序/ 集合/ 的/ 中位/ 元素/ e/ ,/ 然后/ 获得/ 两个/ 集合/ 的/ 关于/ e/ 的/ 左部/ 和/ 右部/ ./ 可以/ 证明/ 对于/ 符合/ Jaccard/ 约束/ 的/ 两个/ 集合/ 的/ 左部/ 和/ 右部/ 的/ 大小/ 的/ 差异/ 也/ 必定/ 小于/ 等于/ 和/ t/ 有关/ 的/ 一个/ 函数/ 的/ 值/ ./ 我们/ 可以/ 选择/ 用/ 递归/ 的/ 方式/ 多次/ 使用/ 后缀/ 过滤/ ,/ 以/ 达到/ 更好/ 的/ 过滤/ 效果/ ./ 4/ 字符串/ 的/ 相似/ 度/ 查询/ 4.1/ 基于/ 集合/ 的/ 字符串/ 的/ 相似/ 度/ 查询/ 在/ 这种/ 查询/ 中/ ,/ 我们/ 将/ 字符串/ 先/ 转化成/ 集合/ ,/ 然后/ 使用/ 度量/ 集合/ 相似/ 度/ 的/ 函数/ 进行/ 查询/ ./ 这类/ 方法/ 的/ 优点/ (/ 同时/ 也/ 是/ 缺点/ )/ 是/ 不/ 考虑/ 字符/ 之间/ 的/ 顺序/ ./ 以/ 抄袭/ 检测/ 为例/ ,/ 这/ 类/ 方法/ 可以/ 有效/ 地/ 找出/ 更换/ 段落/ 或者/ 句子/ 顺序/ 的/ 抄袭/ ./ 受/ 篇幅/ 所/ 限/ ,/ 我们/ 仅/ 考虑/ Jaccard/ 相似/ 度/ 的/ 情况/ ./ 其它/ 相似/ 度/ 函数/ 的/ 情况/ 可以/ 同理/ 推出/ ./ 我们/ 首先/ 需要/ 将/ 字符串/ 转化/ 为/ 集合/ ./ 常见/ 的/ 方法/ 有/ 每个/ 元素/ 是/ 一个/ token/ ,/ 或者/ 是/ 一个/ q/ -/ gram/ ./ 然后/ ,/ 两条/ 字符串/ 的/ 相似/ 度/ 可以/ 用/ 它们/ 对应/ 的/ 集合/ 的/ Jaccard/ 来/ 衡量/ ./ 所以/ 我们/ 之前/ 讨论/ 的/ 对/ 集合/ 的/ 相似/ 度/ 查询/ 的/ 处理/ 方法/ 可以/ 直接/ 使用/ ./ 4.2/ 基于/ 字符串/ 的/ 相似/ 度/ 查询/ 在/ 这种/ 查询/ 中/ ,/ 我们/ 考虑/ 基于/ 字符串/ 的/ 相似/ 度/ ,/ 即/ 我们/ 考虑/ 字符/ 间/ 的/ 顺序/ ./ 以/ 抄袭/ 检测/ 为例/ ,/ 这/ 类/ 方法/ 可以/ 有效/ 地/ 找出/ 仅/ 有/ 少量/ 改动/ 的/ 大段/ 抄袭/ ./ 下面/ 我们/ 将/ 已有/ 的/ 方法/ 分类/ 进行/ 介绍/ ./ 4.2/ ./ 1/ 基于/ q/ -/ gram/ 的/ 方法/ 文献/ [/ 2/ ]/ 给出/ 了/ 将/ 字符串/ 上/ 的/ 基于/ 编辑/ 距离/ 的/ 相似/ 度/ 连接/ 转化成/ 对应/ q/ -/ gram/ 集合/ 上/ 的/ 基于/ 交/ 的/ 相似/ 度/ 连接/ ./ 我们/ 可以/ 使用/ 以下/ 的/ 优化/ :/ 先/ 使用/ 前缀/ 过滤/ (/ 前缀/ 的/ 长度/ 为/ t/ ×/ q/ +/ 1/ )/ ,/ 在/ 得到/ 的/ 候选/ 集上/ 再/ 判别/ 是否/ 有/ 足够/ 多/ 的/ 共同/ 的/ (/ 也/ 成为/ 匹配/ 的/ )/ q/ -/ gram/ ①/ 位置/ 从/ 1/ 开始/ ./ 另外/ ,/ 请/ 注意/ 这里/ 讨论/ 的/ 位置/ 不是/ 该/ 元素/ 在/ Page5/ (/ 也/ 称作/ 数量/ 过滤/ (/ CountFiltering/ )/ )/ ,/ 最后/ ,/ 在/ 剩下/ 的/ 候选/ 集中/ ,/ 对/ 每条/ 字符串/ 计算/ 其/ 与/ 查询/ 字符串/ 的/ 编辑/ 距离/ [/ 1/ ]/ ./ 由于/ 将/ 编辑/ 距离/ 的/ 约束/ 转化/ 为/ 基于/ 不/ 匹配/ 的/ q/ -/ gram/ 的/ 过滤/ ,/ 已有/ 的/ 方法/ 都/ 是/ 基于/ 匹配/ 的/ q/ -/ gram/ ,/ 那么/ ,/ 不/ 匹配/ 的/ q/ -/ gram/ 是否/ 可以/ 被/ 利用/ 起来/ 呢/ ?/ 文献/ [/ 23/ ]/ 提出/ 了/ 两种/ 基于/ 不/ 匹配/ 的/ q/ -/ gram/ 的/ 过滤/ ./ 第/ 1/ 种/ 是/ 通过考察/ 在/ (/ t/ ×/ q/ +/ 1/ )/ -/ 前缀/ 中/ 的/ q/ -/ gram/ 的/ 位置/ 来/ 进一步/ 减少/ 前缀/ 的/ 长度/ ./ 我们/ 假定/ 取/ L/ -/ 前缀/ (/ L/ </ t/ ×/ q/ +/ 1/ )/ ./ 我们/ 可以/ 考察/ 最少/ 要/ 多少/ 个/ 编辑/ 操作/ 才能/ 将/ 这/ L/ 个/ 元素/ 全部/ 破坏/ ./ 很/ 明显/ ,/ 如果/ 这/ L/ 个/ 元素/ 互相/ 没有/ 重叠/ ,/ 那/ 答案/ 就是/ l/ ./ 可以/ 证明/ 如果/ 有/ 重叠/ 的话/ ,/ 通过/ 排序/ 后/ 的/ 一个/ 线性/ 的/ 贪心/ 算法/ 就/ 可以/ 等到/ 答案/ ./ 如果/ 该/ 结果/ 大于/ 编辑/ 距离/ 的/ 阈值/ t/ ,/ 我们/ 就/ 可以/ 只/ 使用/ 这/ L/ 个/ 元素/ 作为/ 前缀/ ./ 通过/ 两分/ 查找/ ,/ 我们/ 能够/ 找到/ 最小/ 的/ L/ -/ 前缀/ 满足/ 至少/ 需要/ t/ +/ 1/ 个/ 编辑/ 操作/ 才能/ 将/ 它们/ 都/ 破坏/ 掉/ ;/ 我们/ 把/ 这样/ 的/ 前缀/ 叫做/ 最短/ 前缀/ ,/ 它/ 的/ 取值/ 范围/ 在/ [/ t/ +/ 1/ ,/ t/ ×/ q/ +/ 1/ ]/ 之间/ ./ 第/ 2/ 种/ 利用/ 不/ 匹配/ 的/ q/ -/ gram/ 的/ 过滤/ 方法/ 是/ 基于/ 以下/ 的/ 观察/ :/ 如果/ 有/ 一系列/ 相邻/ 的/ 不/ 匹配/ 的/ q/ -/ gram/ ,/ 那么/ 这一/ 区间/ 内/ 很/ 有/ 可能/ 有/ 较/ 多/ 的/ 编辑/ 操作/ ./ 我们/ 可以/ 通过/ 对/ 区间/ 内/ 子串/ 建立/ 字符集/ 大小/ 的/ 向量/ ,/ 并/ 测试/ 对应/ 向量/ 的/ / 1/ 距离/ 是否/ 大于/ 2t/ ./ 4.2/ ./ 2/ 基于/ 变长/ 的/ 子串/ 的/ 方法/ 文献/ [/ 24/ ]/ 提出/ 了/ Winnowing/ 的/ 特征值/ 提取/ 的/ 方法/ ,/ 相比/ 以前/ 的/ 类似/ 的/ 方法/ (/ 例如/ :/ 文献/ [/ 25/ -/ 26/ ]/ )/ ,/ 这个/ 新/ 方法/ 具有/ “/ 局部/ ”/ 的/ 特性/ ,/ 粗略地/ 说/ ,/ 即/ 特征/ 的/ 提取/ 只/ 决定/ 于/ 其/ 周围/ 局部/ 范围/ 内/ 子串/ 的/ 内容/ ./ 对于/ 用户/ 给定/ 的/ 长度/ 参数/ L/ ,/ 通过/ 调整/ 参数/ ,/ Winnowing/ 可以/ 保证/ 检测/ 到/ 两条/ 字符串/ 中有/ 所有/ 长度/ 大于/ 等于/ L/ 的/ 相同/ 的/ 子串/ (/ 因为/ 它们/ 会/ 产生/ 相同/ 的/ 特征值/ )/ ./ 利用/ 这个/ 特性/ ,/ 通过/ 使用/ 将/ 字符串/ 分治/ 的/ 方法/ ,/ 我们/ 可以/ 用/ Winnowing/ 来/ 支持/ 编辑/ 距离/ 的/ 相似/ 度/ 查询/ ①/ ./ 另/ 一种/ 产生/ 变长/ 的/ 子串/ 的/ 方法/ 是/ VGRAM/ [/ 28/ -/ 29/ ]/ ./ 传统/ 的/ q/ -/ gram/ 方法/ 的/ 一个/ 问题/ 在于/ 它/ 要求/ 索引/ 所有/ 长度/ 为/ q/ 的/ 子串/ ;/ 由于/ 子串/ 的/ 频率/ 往往/ 是/ 不/ 均匀分布/ 的/ ,/ 这样/ 会/ 导致/ 某些/ 子串/ 对应/ 的/ 倒/ 排列/ 表/ 很长/ ,/ 从而/ 导致/ 算法/ 需要/ 付出/ 不少/ 的/ 读取/ 倒/ 排列/ 表/ 的/ 时间/ ,/ 并且/ 候选/ 集会/ 较大/ ./ VGRAM/ 方法/ 放宽/ 了/ 对/ gram/ 长度/ 的/ 限制/ ,/ 它会/ 选取/ 长度/ 在/ qmin/ ,/ qmax/ 之间/ 的/ “/ 优质/ ”/ 的/ vgram/ ,/ 粗略/ 来说/ ,/ 即/ 对应/ 的/ 倒/ 排列/ 表较/ 短/ 的/ vgram/ ./ 文献/ [/ 28/ ]/ 提出/ 了/ 几种/ 选取/ 优质/ 的/ vgram/ 的/ 方法/ ,/ 文献/ [/ 29/ ]/ 则/ 提出/ 了/ 使用/ 动态/ 编程/ 的/ 方法/ 计算/ 出/ 两条/ 相似/ 的/ 字符串/ 需要/ 共享/ 的/ vgram/ 个数/ 的/ 一个/ 较紧/ 的/ 下界/ ./ 还有/ 一种/ 方法/ 是/ vchunk/ [/ 27/ ]/ ./ 其/ 基本/ 思想/ 是/ 将/ 字符串/ 分割/ 成/ 不/ 重叠/ 的/ 子串/ (/ 称作/ vchunk/ )/ ./ 并非/ 所有/ 的/ 分割/ 方法/ 都/ 可以/ 考虑/ ./ 这/ 是因为/ 在/ 编辑/ 过程/ 中/ 因为/ 插入/ 和/ 删除/ ,/ 可能/ 会/ 出现/ 非常/ 相似/ 的/ 字符串/ 分割/ 后/ 的/ vchunk/ 没有/ 相同/ 的/ 情况/ ②/ ./ 文献/ [/ 27/ ]/ 提出/ 了/ 根据/ 尾部/ 受限/ 模式/ 字典/ (/ Tail/ -/ restrictedDictionary/ )/ 分割/ 的/ 办法/ ,/ 可以/ 保证/ 每个/ 编辑/ 操作/ 只会/ 影响/ 至多/ 2/ 个/ vchunk/ ./ 在/ 使用/ 了/ 前缀/ 过滤/ ,/ 不/ 匹配/ 的/ vchunk/ 的/ 过滤/ 和/ 其它/ 针对/ vchunk/ 的/ 过滤/ 优化/ 之后/ ,/ 我们/ 只/ 需要/ 索引/ 和/ 读取/ l/ -/ 前缀/ 即可/ (/ l/ ∈/ [/ t/ +/ 1/ ,/ 2t/ +/ 1/ ]/ )/ ./ 4.2/ ./ 3/ 基于/ 枚举/ 的/ 方法/ [/ 30/ ]/ 一种/ 最/ 简单/ 的/ 支持/ 编辑/ 距离/ 的/ 方法/ 是/ 枚举/ 所有/ 和/ 查询/ 字符串/ 的/ 编辑/ 距离/ 小于/ 等于/ t/ 的/ 所有/ 字符串/ ./ 我们/ 仅/ 需要/ 对/ 数据库/ 中/ 的/ 字符串/ 建立/ Hash/ 索引/ ./ 这个/ 方法/ 的/ 最大/ 问题/ 是/ 我们/ 需要/ 枚举/ O/ (/ |/ Q/ |/ t/ |/ ∑/ |/ t/ )/ 次/ ./ FastSS/ [/ 31/ ]/ 提出/ t/ -/ 删除/ 邻居/ 集/ (/ t/ -/ DeletionNeigh/ -/ borhood/ )/ 的/ 概念/ :/ 即/ 所有/ 删除/ 不/ 超过/ t/ 个字符/ 所/ 得到/ 的/ 字符串/ 的/ 集合/ ./ 两个/ 字符串/ 的/ 编辑/ 距离/ 不/ 超过/ t/ 的/ 必要条件/ 是/ 它们/ 的/ t/ -/ 删除/ 邻居/ 集有/ 共同/ 的/ 元素/ ./ 这个/ 方法/ 的/ 查询/ 运行/ 时间/ 为/ O/ (/ |/ Q/ |/ t/ )/ ,/ 即/ 和/ 字符集/ 大小/ 无关/ ./ FastSS/ 在/ 字符串/ 短/ 和/ t/ 极/ 小时/ 是/ 十分/ 快捷/ 的/ (/ 尤其/ 是/ t/ =/ 1/ 时/ ,/ 是/ 线性/ 的/ )/ ./ 但是/ 随着/ t/ 的/ 增加/ ,/ 其/ 时间/ 和/ 空间/ 复杂度/ 都/ 以/ 指数/ 级/ 上升/ ./ 文献/ [/ 32/ ]/ 通过/ 适当/ 的/ 分治/ 的/ 方法/ ,/ 将/ 数据库/ 中/ 的/ 字符串/ 和/ 查询/ 字符串/ 都/ 分片/ ,/ 并/ 保证/ 所有/ 分片/ 中/ 至少/ 有/ 一份/ 的/ 编辑/ 距离/ 不能/ 超过/ 1/ ./ 由于/ 查询/ 字符串/ 和/ 数据/ 字符串/ 长度/ 可能/ 不/ 一样/ ,/ 查询/ 字符串/ 的/ 每个/ 分片/ 还/ 需要/ 先/ 在/ 一定/ 范围/ 内作/ 移动/ 和/ 伸缩/ ,/ 然后/ 再/ 生成/ 1/ -/ 删除/ 邻居/ 集/ ./ 使用/ t/ -/ 删除/ 邻居/ 集/ 的/ 主要/ 原因/ 是/ 为了/ 避免/ 考虑/ 所有/ 可能/ 的/ 替换/ 操作/ ./ 让/ 我们/ 先/ 考虑/ 一个/ 极其/ 简单/ 的/ 特殊/ 情况/ ,/ 即/ :/ (/ 1/ )/ 我们/ 不/ 允许/ 插入/ 和/ 删除/ 操作/ (/ 即/ 所有/ 字符串/ 长度/ 都/ 是/ l/ )/ ;/ (/ 2/ )/ 字符集/ 的/ 大小/ 是/ 2/ (/ 即/ 0/ 和/ 1/ )/ ./ 这时/ 问题/ 其实/ 变成/ 了/ 在/ 二值/ 向量/ 集合/ 上/ 的/ 基于/ Hamming/ 距离/ 的/ 相似/ 度/ 连接/ ,/ 每个/ 编辑/ 操作/ 就是/ 将/ 某/ 一/ 位置/ 的/ 值/ 取反/ ,/ 阈值/ 仍然/ 为/ t/ ./ 这时/ ,/ 我们/ 仍然/ 需要/ 枚举/ C/ (/ |/ Q/ |/ ,/ t/ )/ =/ O/ (/ |/ Q/ |/ t/ )/ 个/ 被/ 编辑/ 过/ 的/ 位置/ 的/ 组合/ ./ 很/ 明显/ ,/ 如果/ 我们/ 可以/ 减小/ l/ 的话/ 就/ 可以/ 降低/ 代价/ ./ 我们/ 可以/ 将/ 向量/ 划分/ 成/ k/ 段/ (/ k/ >/ t/ )/ ,/ 至少/ 有/ k/ -/ t/ 段/ 没有/ 被/ 编辑/ 过/ ./ 我们/ 可以/ 枚举/ 所有/ C/ (/ k/ ,/ t/ )/ 个/ ①/ ②/ Page6/ 编辑/ 过/ 的/ 段/ ,/ 在/ 每种/ 情况/ 下/ ,/ 使用/ 没有/ 被/ 编辑/ 过/ 的/ 段/ 的/ 位置/ 和/ 内容/ 作为/ 查询/ 条件/ 找到/ 数据库/ 中/ 匹配/ 的/ 字符串/ ,/ 这些/ 字符串/ 的/ 并/ 构成/ 了/ 候选/ 集/ ./ 在/ 候选/ 集上/ 进行/ 校验/ 就/ 可以/ 获得/ 最后/ 的/ 结果/ ./ 这种/ 方法/ 产生/ 的/ 候选/ 集/ 依赖于/ 参数/ k/ :/ k/ 越小/ ,/ 枚举/ 的/ 情况/ 就/ 越少/ ,/ 但是/ 对应/ 的/ 精确/ 匹配/ 的/ 条件/ 就/ 越松/ ./ 文献/ [/ 33/ ]/ 讨论/ 了/ 在/ 海量/ 64/ 位二值/ 向量/ 上/ 为了/ 支持/ t/ =/ 3/ 的/ 基于/ Ham/ -/ ming/ 距离/ 的/ 查询/ 的/ 几种/ 参数/ 设定/ 的/ 方法/ ./ 这个/ 思路/ 也/ 被/ 应用/ 在/ 文献/ [/ 7/ ]/ 中/ ./ 由于/ 文献/ [/ 7/ ]/ 处理/ 的/ 问题/ 是/ 在/ 一条/ 很长/ 的/ 字符串/ 上/ 做/ 基于/ 编辑/ 距离/ 的/ 近似/ 子串/ 匹配/ ,/ 以上/ 方法/ 实质/ 上/ 是/ 索引/ 了/ C/ (/ k/ -/ 1/ ,/ t/ )/ 种/ 不同/ 形状/ 的/ 带/ 间隔/ 的/ 子/ 序列/ ./ 以上/ 方法/ 还有/ 另/ 一种/ 变种/ ./ 我们/ 可以/ 再/ 多/ 使用/ 一层/ 划分/ ./ 根据/ 抽屉/ 原理/ ,/ 如果/ 我们/ 先/ 将/ 向量/ 划分/ 成/ n1/ 段/ ,/ 则/ 至少/ 存在/ 一段/ ,/ 在/ 这段/ 上/ 的/ 编辑/ 操作/ 至多是/ t1/ =/ t/ // n1/ ./ 然后/ ,/ 我们/ 在/ 每/ 一段/ 上/ 再/ 使用/ 划分/ +/ 枚举/ 的/ 方法/ [/ 33/ ]/ ./ 这/ 就是/ PartEnum/ 算法/ [/ 34/ ]/ ./ 该/ 算法/ 的/ 优点/ 在于/ 由于/ t1/ 的/ 向下/ 取整/ 运算/ ,/ 阈值/ 实际上/ 被/ 降低/ 了/ ./ 该/ 算法/ 需要/ 手工/ 调节/ 两个/ 划分/ 的/ 参数/ ,/ 在/ 实际/ 中/ ,/ 仅当/ t/ 较/ 小时/ ,/ 通过/ 手工/ 调参/ 能够/ 取得/ 比较/ 优秀/ 的/ 结果/ ./ 最后/ ,/ 我们/ 给出/ 从/ 基于/ 编辑/ 距离/ 的/ 连接/ 转换成/ 基于/ 海明/ 距离/ 的/ 连接/ 的/ 方法/ ./ 我们/ 将/ 所有/ 数据/ 字符串/ 转/ 成/ 它们/ 对应/ 的/ q/ -/ gram/ 的/ 集合/ ./ 如果/ 在/ 同/ 一条/ 字符串/ 中有/ 多个/ 相同/ 的/ q/ -/ gram/ (/ 例如/ ab/ )/ ,/ 我们/ 把/ 它们/ 出现/ 的/ 顺序/ 作为/ 它们/ 的/ 下标/ (/ 例如/ ab1/ ,/ ab2/ 等/ )/ ,/ 从而/ 认为/ 它们/ 是/ 不同/ 的/ 元素/ [/ 15/ ]/ ./ 把/ 每个/ 出现/ 过/ 的/ (/ 带/ 下/ 标的/ )/ q/ -/ gram/ 作为/ 一个/ 维度/ ,/ 那么/ 每个/ q/ -/ gram/ 集合/ 就/ 可以/ 转化成/ 一个/ 二值/ 向量/ ./ 定理/ 4/ ./ 两个/ 字符串/ 的/ 编辑/ 距离/ 不/ 超过/ 阈值/ t/ 的/ 必要条件/ 是/ 它们/ 对应/ 的/ q/ -/ gram/ 集合/ 对应/ 的/ 二值/ 向量/ 的/ Hamming/ 距离/ 不/ 超过/ q/ ×/ t/ [/ 34/ ]/ ./ 最近/ ,/ 文献/ [/ 7/ ]/ 提出/ 了/ 位操作/ 来/ 快速/ 判断/ 两条/ 二进制/ 的/ 字符串/ 的/ 编辑/ 距离/ 是否/ 小于/ 等于/ 1/ ./ 为了/ 支持/ 编辑/ 距离/ 小于/ 等于/ t/ 的/ 情况/ ,/ 文献/ [/ 7/ ]/ 枚举/ 所有/ 不同/ 的/ t/ 个/ 编辑/ 操作/ 的/ 排列/ (/ permutation/ )/ ;/ 在/ 依次/ 对/ 一条/ 二进制/ 字符串/ 使用/ 某个/ 编辑/ 操作/ 的/ 排列/ 时/ ,/ 一旦/ 中间/ 结果/ 和/ 另/ 一条/ 字符串/ 相等/ ①/ ,/ 则/ 可以/ 判断/ 它们/ 的/ 编辑/ 距离/ 小于/ 等于/ t/ ./ 4.2/ ./ 4/ 一个/ 统一/ 的/ 基于/ 特征/ 的/ 方法/ [/ 30/ ]/ 以上/ 所有/ 方法/ 都/ 可以/ 归结到/ 以下/ 的/ 算法/ 框架/ 中/ :/ 我们/ (/ 1/ )/ 为/ 数据/ 字符串/ 生成/ λ/ t/ 个/ 特征值/ (/ 并/ 把/ 它们/ 加入/ 索引/ )/ ;/ (/ 2/ )/ 为/ 查询/ 字符串/ 生成/ Λ/ t/ 个/ 特征值/ ;/ (/ 3/ )/ 候选/ 集是/ 那些/ 和/ 查询/ 字符串/ 共享/ 至少/ LBt/ 个/ 特征值/ 的/ 数据/ 字符串/ ./ 我们/ 可以/ 用/ Υ/ (/ λ/ t/ ,/ Λ/ t/ ,/ LBt/ )/ 来/ 描述/ 一个/ 方法/ ./ 例如/ ,/ 传统/ 的/ 基于/ q/ -/ gram/ 的/ 方法/ [/ 2/ ]/ 使用/ 的/ 特征值/ 是/ q/ -/ gram/ ,/ 可以/ 记/ 作/ Υ/ (/ |/ S/ |/ -/ q/ +/ 1/ ,/ |/ Q/ |/ -/ q/ +/ 1/ ,/ max/ (/ |/ S/ |/ ,/ |/ Q/ |/ )/ -/ q/ +/ 1/ -/ q/ ×/ t/ )/ ./ 而/ 使用/ 了/ 前缀/ 过滤/ 后/ 的/ 基于/ q/ -/ gram/ 的/ 方法/ [/ 23/ ]/ ,/ 可以/ 记/ 作/ Υ/ (/ q/ ×/ t/ +/ 1/ ,/ q/ ×/ t/ +/ 1/ ,/ 1/ )/ ./ 文献/ [/ 30/ ]/ 中/ 给出/ 了/ 对/ 更/ 多/ 方法/ 的/ 刻画/ ./ 这个/ 框架/ 简洁/ 地/ 刻画出/ 不同/ 方法/ 的/ 空间/ 和/ 时间/ 的/ 复杂度/ ,/ 并且/ 这些/ 复杂度/ 随/ 阈值/ t/ 的/ 变化趋势/ ./ 另外/ ,/ 如果/ 我们/ 把/ 完全相同/ 的/ 匹配/ 查询/ 看作/ 是/ 基于/ 编辑/ 距离/ 相似/ 度/ 查询/ 的/ 一个/ 特例/ ,/ 即/ t/ =/ 0/ ,/ 那么/ ,/ 基于/ Hash/ 表/ 的/ 查询方法/ 可以/ 看作/ 使用/ 整个/ 字符串/ 作为/ 一个/ 特征值/ ,/ 可以/ 记/ 作/ Υ/ (/ 1/ ,/ 1/ ,/ 1/ )/ ./ 一个/ 自然/ 的/ 问题/ 就是/ 数据/ 或者/ 查询/ 字符串/ 最少/ 要/ 生成/ 多少/ 个/ 特征值/ ./ 文献/ [/ 30/ ]/ 证明/ 了/ 最少/ 需要/ t/ +/ 1/ 个/ 特征值/ ,/ 并/ 给出/ 了/ 两个/ 算法/ ,/ 分别/ 在/ 数据/ 和/ 查询/ 字符串/ 使用/ t/ +/ 1/ 的/ 特征值/ ./ 其/ 主要/ 思想/ 是/ 在/ 一条/ 字符串/ 上/ 提取/ 所有/ 的/ q/ -/ chunk/ (/ 不足/ 时补/ 特殊字符/ )/ ,/ 即/ 相邻/ 的/ ,/ 不/ 相交/ 的/ 长度/ 为/ q/ 的/ 子串/ ,/ 而/ 在/ 另/ 一条/ 字符串/ 上取/ 所有/ 的/ q/ -/ gram/ ./ 可以/ 证明/ 每个/ 编辑/ 操作/ 最/ 多/ 破坏/ 一个/ q/ -/ chunk/ ./ 结合/ 前缀/ 过滤/ ,/ 我们/ 可以/ 获得/ Υ/ (/ t/ +/ 1/ ,/ |/ Q/ |/ -/ (/ (/ |/ Q/ |/ -/ t/ )/ // q/ -/ t/ )/ +/ 1/ ,/ 1/ )/ 的/ IndexChunk/ 算法/ 或者/ Υ/ (/ |/ S/ |/ -/ (/ (/ |/ S/ |/ -/ t/ )/ // q/ -/ t/ )/ +/ 1/ ,/ t/ +/ 1/ ,/ 1/ )/ 的/ IndexGram/ 算法/ ./ 这/ 两个/ 算法/ 不仅/ 在/ 绝大多数/ 情况/ 下比/ 已有/ 的/ 方法/ 更/ 快/ ,/ 而且/ 展现/ 的/ 不同/ 的/ 时间/ 和/ 空间/ 的/ 特性/ ./ 例如/ :/ IndexGram/ 算法/ 仅仅/ 需要/ 读取/ t/ +/ 1/ 条倒/ 排列/ 表/ ,/ 所以/ 其/ 查询/ 速度/ 非常/ 快/ ,/ 但/ 这/ 也/ 要求/ 所有/ 的/ q/ -/ gram/ 需要/ 被/ 索引/ ,/ 导致/ 索引/ 的/ 大小/ 会/ 较大/ ./ 4.2/ ./ 5/ 基于/ Trie/ [/ 35/ -/ 36/ ]/ 和/ 树/ [/ 37/ ]/ 的/ 方法/ Trie/ 是/ 一种/ 有效/ 的/ 存储/ 多条/ 字符串/ 的/ 数据结构/ ,/ 它/ 支持/ 快速/ 的/ 查找/ ,/ 并且/ 通过/ 在/ 字符串/ 之间/ 共享/ 前缀/ 来/ 节省/ 空间/ ./ 因为/ 前缀/ 共享/ ,/ Trie/ 可以/ 很/ 好/ 地/ 支持/ 基于/ 编辑/ 距离/ 的/ 查询/ :/ 当/ 计算/ 查询/ 字符串/ 和/ 两条/ 共享/ 长度/ 为/ L/ 的/ 前缀/ 的/ 字符串/ 的/ 编辑/ 距离/ 时/ ,/ 它们/ 的/ 编辑/ 距离/ 矩阵/ 的/ 前/ L/ 列是/ 相同/ 的/ [/ 38/ ]/ ./ 文献/ [/ 36/ ]/ 利用/ Trie/ 来/ 支持/ 增量/ 相似/ 度/ 查询/ ,/ 文献/ [/ 35/ ]/ 利用/ Trie/ 来/ 进行/ 相似/ 度/ 连接/ ./ 由于/ 以上/ 的/ 特性/ ,/ Trie/ 适合/ 用于/ 数据/ 集/ 的/ 字符串/ 较/ 短/ 的/ 情况/ ./ Bed/ -/ Tree/ 是/ 一个/ 基于/ B/ +/ 树/ 的/ 管理/ 外存/ 中/ 字符串/ 集/ 并/ 支持/ 多种/ 基于/ (/ 归一化/ )/ 编辑/ 距离/ 的/ 查询/ (/ 范围/ 查询/ ,/ top/ -/ k/ 查询/ ,/ 和/ 连接/ )/ [/ 37/ ]/ ./ 其/ 关键步骤/ 是/ 选取/ 一种/ 将/ 字符串/ 排列/ 的/ 顺序/ ,/ 使得/ 给定/ 任何/ 一段/ 连续/ 的/ 字符串/ 区间/ ,/ 都/ 可以/ 快速/ 地/ 得到/ 这个/ 区间/ 内/ 字符/ ①/ 可以/ 使用/ 异或/ 操作/ (/ XOR/ )/ 快速/ 地/ 判断/ ./ Page7/ 串/ 和/ 查询/ 字符串/ 的/ 编辑/ 距离/ 的/ 下界/ ./ 5/ 相关/ 工作/ 更/ 多/ 的/ 相关/ 工作/ 的/ 介绍/ 可以/ 参见/ 近期/ 的/ 辅导/ 报告/ 和/ 综述/ [/ 39/ -/ 45/ ]/ ./ 5.1/ 早期/ 的/ 相似/ 度/ 查询/ 的/ 相关/ 工作/ 早期/ 的/ 相似/ 度/ 连接/ 的/ 工作/ 主要/ 集中/ 在/ 对象/ 为/ 欧几里得/ 空间/ (/ EuclideanSpace/ )/ 中/ 的/ 点/ ,/ 而且/ 使用/ 的/ 是/ / 2/ 的/ 距离/ 函数/ ,/ 这个/ 问题/ 通常/ 被称作/ 空间/ 连接/ (/ SpatialJoin/ )/ ./ 在/ 低/ 维空间/ 的/ 工作/ 主要/ 有/ 循环/ 、/ 平面/ 扫描/ (/ PlaneSweeping/ )/ 、/ 空间/ 填充/ 曲线/ (/ SpaceFill/ -/ ingCurve/ )/ 、/ 基于/ 一颗/ 或/ 两颗/ R/ -/ tree/ 以及/ 分治/ 的/ 方法/ ./ 具体/ 的/ 介绍/ 和/ 比较/ 可以/ 参见/ 近期/ 的/ 一个/ 综述/ [/ 46/ ]/ ./ 最近/ ,/ 文献/ [/ 47/ ]/ 考虑/ 了/ 利用/ GPU/ 的/ 高/ 并行性/ 和/ 计算速度/ 来/ 实现/ 快速/ 的/ 空间/ 连接/ ./ 当/ 空间/ 中/ 的/ 维数/ 较/ 高时/ ,/ 空间/ 连接/ 是/ 一个/ 很难/ 的/ 问题/ ./ 一方面/ 是因为/ 维度/ 灾难/ (/ CurseofDimensionality/ )/ ,/ 另一方面/ 是因为/ 高/ 维空间/ 中/ 没有/ 性能/ 优异/ 的/ 索引/ ./ 现有/ 的/ 方法/ 主要/ 基于/ 空间/ 的/ 划分/ ./ 例如/ ,/ 文献/ [/ 48/ -/ 50/ ]/ ./ 还有/ 一些/ 工作/ 是/ 在/ 度量/ 空间/ (/ MetricSpace/ )/ 中/ 进行/ 相似/ 度/ 连接/ ./ 例如/ ,/ 使用/ 度量/ 空间/ 的/ 索引/ [/ 51/ -/ 52/ ]/ 或者/ 使用/ 分治/ 的/ 策略/ [/ 53/ ]/ ./ 在/ 集合/ 和/ 字符串/ 上/ 的/ 常见/ 的/ 相似/ 度/ 和/ 距离/ 函数/ 往往/ 不能/ 有效/ 地/ 映射/ 到/ 欧几里德/ 空间/ 或者/ 度量/ 空间/ 上/ ,/ 因此/ 它们/ 的/ 相似/ 度/ 查询/ 需要/ 新/ 的/ 方法/ ./ 早期/ 的/ 工作/ 主要/ 考虑/ 简单/ 的/ 二值/ 的/ 相似/ 度/ 函数/ ,/ 例如/ 相交/ 不为/ 空/ 以及/ 包含/ ./ 文献/ [/ 8/ ]/ 考虑/ R/ / / R/ ./ a/ / S/ ./ bS/ 提出/ 了/ 使用/ 对/ 集合/ 的/ 特征值/ 进行/ 过滤/ 的/ Hash/ 连接/ 算法/ ./ 文献/ [/ 54/ ]/ 提出/ 了/ 另/ 一种/ 基于/ Hash/ 和/ 复制/ 的/ 连接/ 算法/ ./ 文献/ [/ 55/ ]/ 提出/ 了/ 使用/ 倒排/ 索引/ 来/ 支持/ 相交/ 不为/ 空/ ,/ 或者/ 包含/ 约束/ 的/ 连接/ ./ 5.2/ 近似/ 的/ 相似/ 度/ 查询/ 的/ 方法/ 在/ 文献/ 中/ ,/ 有/ 大量/ 为/ 相似/ 度/ 查询/ 提供/ 近似/ 解/ 的/ 方法/ ./ 其中/ 最有/ 代表性/ 的/ 是/ 位置/ 敏感/ Hash/ (/ LocalitySensitiveHash/ ,/ LSH/ )/ [/ 56/ ]/ ./ 给定/ 一个/ 相似/ 度/ 函数/ ,/ 这/ 类/ 方法/ 为/ 每个/ 对象/ (/ 集合/ 或者/ 字符串/ )/ 生/ 成为/ 一组/ 特征值/ ,/ 我们/ 仅/ 需/ 对/ 有/ 相通/ 特征值/ 的/ 对象/ 进行/ 验证/ ./ 通过/ 调节/ 将/ 几个/ LSH/ 的/ 特征值/ 拼接/ 在/ 一起/ 作为/ 索引/ 和/ 查询/ 的/ 基本/ 单位/ ,/ 可以/ 达到/ 加快/ 查询/ 速度/ 的/ 目的/ ;/ 通过/ 调节/ 将/ 以上/ 步骤/ 重复/ 的/ 次数/ ,/ 可以/ 保证/ 最后/ 达到/ 一个/ 用户/ 制定/ 的/ 召回/ 率/ 的/ 阈值/ [/ 16/ ,/ 57/ ]/ ./ hash/ [/ 58/ ]/ 及其/ 改进/ b/ -/ bitmin/ -/ hashing/ [/ 59/ ]/ ./ (/ 1/ )/ 对/ Jaccard/ 来说/ ,/ 基本/ 的/ LSH/ 方法/ 是/ min/ -/ (/ 2/ )/ 对/ Cosine/ 来说/ ①/ ,/ 基本/ 的/ LSH/ 方法/ 是/ sim/ -/ hash/ [/ 33/ ]/ ./ (/ 3/ )/ 对/ Hamming/ 来说/ ,/ 基本/ 的/ LSH/ 方法/ 是/ 对/ 其它/ 相似/ 度/ 或/ 距离/ 函数/ 有效/ 的/ LSH/ 函数/ 可/ randomprojection/ ./ 以/ 参见/ 文献/ [/ 60/ ]/ ./ 5.3/ 其它/ 的/ 问题/ 定义/ 实体/ 识别/ (/ NamedEntityRecognition/ ,/ NER/ )/ 是/ 另/ 一个/ 重要/ 的/ 应用/ :/ 有/ 一组/ 字符串/ 组成/ 的/ 字典/ ,/ 每个/ 字符串/ 是/ 一个/ 实体/ 的/ 名字/ ./ 对于/ 每/ 一个/ 输入/ 的/ 文件/ ,/ 我们/ 需要/ 找到/ 所有/ 近似/ 匹配/ 字典/ 中/ 某个/ 实体/ 的/ 子串/ ./ 实体/ 识别/ 往往/ 是/ 其它/ 步骤/ 和/ 应用/ (/ 例如/ 文本检索/ 和/ 文本/ 数据挖掘/ )/ 的/ 基础/ ./ 文献/ [/ 5/ ,/ 61/ ]/ 考虑/ 了/ Jac/ -/ card/ 约束/ 下/ 的/ 实体/ 识别/ ,/ 文献/ [/ 32/ ,/ 62/ ]/ 考虑/ 了/ 编辑/ 距离/ 约束/ 下/ 的/ 实体/ 识别/ ./ 文献/ [/ 7/ ]/ 考虑/ 的/ 问题/ 可以/ 看作/ 字典/ 中仅/ 有/ 一项/ 长度/ 固定/ 的/ 实体/ 的/ 情况/ ./ Top/ -/ k/ 相似/ 度/ 查询/ [/ 63/ ]/ ./ 在/ 某些/ 应用/ 中/ ,/ 我们/ 可能/ 无法/ 预先/ 设定/ 相似/ 度/ 函数/ 的/ 阈值/ ./ 除了/ 盲目/ 地/ 尝试/ 不同/ 的/ 阈值/ 以外/ ,/ 我们/ 可以/ 使用/ top/ -/ k/ 相似/ 度/ 查询/ ,/ 即/ 返回/ 最/ 相似/ 的/ k/ 对/ 结果/ ./ 文献/ [/ 63/ ]/ 支持/ 基于/ Jaccard/ 的/ top/ -/ k/ 查询/ ,/ 它/ 使用/ 了/ 事件驱动/ 的/ 模型/ ,/ 动态/ 地/ 调整/ 相似/ 度/ 的/ 阈值/ ,/ 并且/ 提出/ 了/ 防止/ 重复/ 校验/ 的/ 候选/ 结果/ 、/ 简短/ 倒排/ 索引/ 以及/ 更紧/ 的/ 上界/ 估计/ 的/ 技术/ ./ 文献/ [/ 37/ ]/ 提出/ 的/ Bed/ -/ tree/ 可以/ 有效/ 地/ 支持/ 基于/ 编辑/ 距离/ 的/ top/ -/ k/ 查询/ ./ Map/ -/ Reduce/ 上/ 的/ 相似/ 度/ 查询/ [/ 64/ -/ 66/ ]/ ./ 以上/ 的/ 快速/ 的/ 相似/ 度/ 查询/ 算法/ 因为/ 假设/ 所有/ 索引/ 和/ 数据/ 都/ 在/ 内存/ 中/ ,/ 当/ 数据量/ 增长/ 到/ 很大/ 的/ 数量级/ 时/ ,/ 这会/ 使得/ 它们/ 不能/ 在/ 单机/ 上/ 运行/ ./ 鉴于/ 基于/ Map/ -/ Reduce/ 的/ 分布式计算/ 在/ 其它/ 海量/ 数据/ 计算/ 中/ 的/ 成功/ ,/ 我们/ 可以/ 使用/ Map/ -/ Reduce/ 的/ 框架/ 来/ 支持/ 大/ 数据量/ 的/ 相似/ 度/ 查询/ ./ 早期/ 的/ 工作/ [/ 66/ ]/ 关注/ 的/ 是/ 计算/ 所有/ 对象/ 对/ 之间/ 的/ 相似/ 度/ (/ 即/ 没有/ 阈值/ 的/ 限制/ )/ ./ 文献/ [/ 64/ -/ 65/ ]/ 都/ 研究/ 了/ 有/ 阈值/ 的/ 情况/ ,/ 并/ 将/ 单机版/ 的/ 一些/ 过滤/ 条件/ 延伸/ 到/ Map/ -/ Reduce/ 框架/ 上/ ./ 6/ 未来/ 的/ 工作/ 随着/ 数据/ (/ 尤其/ 是/ 互联网/ 上/ 和/ 社会/ 网路上/ 的/ 数据/ )/ 的/ 快速增长/ ,/ 越来越/ 多/ 的/ 应用/ 会/ 涉及/ 到/ 集合/ 和/ 字符串/ 的/ 相似/ 度/ 查询/ ./ 我们/ 下面/ 列出/ 在/ 这个/ 领域/ 内/ 3/ 个/ 重要/ 的/ 未来/ 工作/ 的/ 方向/ ./ 6.1/ 相似/ 度/ 查询/ 的/ 理论/ 基础/ 一方面/ ,/ 绝大多数/ 现有/ 的/ 方法/ 是/ 基于/ 一种/ 或者/ ①/ 精确/ 的/ 说/ 是/ arccos/ ./ Page8/ 多种/ 启发性/ 的/ 方法/ ./ 我们/ 对/ 这些/ 方法/ 的/ 代价/ 、/ 适用/ 情况/ 以及/ 相互之间/ 的/ 关系/ 还/ 不甚了解/ ./ 例如/ ,/ 前缀/ 过滤/ 在/ 大量/ 的/ 、/ 来自/ 于/ 不同/ 领域/ 的/ 数据/ 集上/ 都/ 取得/ 了/ 很/ 好/ 的/ 效果/ ./ 但是/ ,/ 如果/ 许多/ 低频/ 的/ 元素/ 的/ 出现/ 频率/ 仍然/ 较/ 高/ ,/ 或者/ 相似/ 度/ 阈值/ 过/ 小/ 或/ 距离/ 阈值/ 过大时/ ,/ 它/ 的/ 过滤/ 效果/ 会/ 迅速/ 下降/ ./ 如果/ 没有/ 一个/ 理论/ 上/ 的/ 分析/ ,/ 我们/ 就/ 无法/ 预测/ 何时/ 这种/ 过滤/ 有效/ ,/ 也/ 会/ 阻碍/ 我们/ 寻找/ 在/ 前缀/ 过滤/ 失效/ 的/ 情况/ 下/ ,/ 仍然/ 有效/ 的/ 过滤/ 方法/ ①/ ./ 现在/ ,/ 已经/ 有/ 不少/ 工作/ 集中/ 在/ 估计/ 各种/ 相似/ 度/ 查询/ 的/ 结果/ 的/ 大小/ 或/ 选择/ 度/ (/ Selectivity/ )/ 的/ 问题/ 上/ ,/ 包括/ 文献/ [/ 67/ -/ 71/ ]/ ./ 6.2/ 相似/ 度/ 查询/ 的/ 方法/ 的/ 创新/ 和/ 改进/ 过去/ 的/ 研究/ 工作/ 将/ 对于/ 集合/ 和/ 字符串/ 的/ 相似/ 度/ 连接/ 的/ 效率/ 提高/ 了/ 几个/ 数量级/ ./ 另外/ ,/ 不同/ 的/ 方法/ 往往/ 在/ 某些/ 参数/ 范围/ 内有/ 良好/ 的/ 表现/ (/ 可以/ 参见/ 文献/ [/ 30/ ]/ 的/ 试验/ 结果/ )/ ./ 与此同时/ ,/ 数据量/ 的/ 增长/ 和/ 应用/ 对/ 时间/ 及/ 空间/ 的/ 不断/ 严苛/ 的/ 要求/ 都/ 会/ 促使/ 我们/ 继续/ 寻找/ 新/ 的/ 方法/ 或者/ 对/ 已有/ 方法/ 进行/ 改进/ ./ 例如/ ,/ 文献/ [/ 30/ ]/ 提出/ 了/ 使用/ 不/ 对称/ 的/ 特征值/ 以/ 降低/ 索引/ 大小/ 或者/ 查询/ 时间/ 的/ 方法/ ./ 我们/ 可以/ 研究/ 这种/ 思路/ 是否/ 可以/ 进一步/ 完善/ 、/ 调整/ ,/ 或/ 应用/ 到/ 不同/ 的/ 相似/ 度/ 查询/ 中/ ./ 文献/ [/ 35/ -/ 36/ ]/ 使用/ Trie/ 来/ 存储/ 字符串/ 和/ 共享/ 中间/ 计算结果/ ,/ 或者/ 利用/ 它/ 来/ 有效/ 地/ 支持/ 增量/ 式/ 的/ 查询/ ./ 但是/ Trie/ 本身/ 有/ 一些/ 弱点/ ,/ 例如/ :/ 其/ 占用/ 空间/ 较大/ ,/ 对/ 较/ 长/ 的/ 或/ 没有/ 许多/ 前缀/ 共享/ 的/ 字符串/ 集合/ 效果/ 就/ 比较/ 差/ ./ 所以/ 我们/ 可以/ 探究/ 是否/ 可以/ 通过/ 分块/ 或者/ 改进/ 的/ Trie/ 来/ 进一步提高/ 现有/ 的/ 方法/ 的/ 效率/ 和/ 适用范围/ ./ 6.3/ 支持/ 新/ 的/ 相似/ 度/ 查询/ 和/ 应用/ 一方面/ ,/ 大多数/ 现有/ 的/ 工作/ 集中/ 在/ 常见/ 的/ 比较简单/ 的/ 相似/ 度/ 和/ 距离/ 函数/ 上/ ./ 在/ 不同/ 的/ 引用/ 中/ ,/ 我们/ 可能/ 会/ 面临/ 更/ 多/ 的/ 更/ 复杂/ 的/ 函数/ ./ 最近/ 的/ 一些/ 工作/ 已经/ 开始/ 研究/ 新/ 的/ 函数/ ,/ 例如/ 将/ 编辑/ 距离/ 和/ Jaccard/ 结合/ [/ 72/ ]/ 、/ EarthMover/ ’/ sDistance/ [/ 73/ ]/ 、/ BregmanDi/ -/ vergence/ [/ 74/ ]/ 等/ ./ 另一方面/ ,/ 对于/ 集合/ 和/ 字符串/ 的/ 相似/ 度/ 连接/ 的/ 工作/ 中/ 提出/ 的/ 许多/ 方法/ 和/ 技巧/ ,/ 可以/ 应用/ 到/ 其它/ 问题/ 和/ 领域/ 内/ ./ 例如/ :/ 文献/ [/ 75/ ]/ 使用/ 相似/ 度/ 连接/ 来/ 对/ 数据/ 聚类/ ;/ 将/ 基于/ 编辑/ 距离/ 的/ 近似/ 字符串/ 匹配/ 和/ 空间数据/ 结合/ 以/ 支持/ 多种/ 新/ 的/ 查询/ [/ 76/ ]/ ;/ 在/ 有/ 噪音/ 的/ 字符串/ 上/ 的/ 近似/ 查询/ [/ 77/ ]/ ;/ 将/ 近似/ 字符串/ 匹配/ 和/ 在/ 数据库/ 上/ 的/ 关键字/ 检索/ 结合/ [/ 78/ ]/ 等/ ./ 7/ 结束语/ 相似/ 度/ 查询/ 是/ 一个/ 基本/ 问题/ ,/ 在/ 多个/ 不同/ 的/ 计算机领域/ 都/ 有/ 应用/ ./ 自/ 2000/ 年/ 以来/ ,/ 学术界/ 在/ 对/ 集合/ 和/ 字符串/ 的/ 相似/ 度/ 查询/ 的/ 问题/ 上作/ 了/ 很多/ 研究/ ,/ 并/ 取得/ 了/ 许多/ 进展/ ./ 本文/ 对/ 该/ 领域/ 内/ 的/ 主要/ 的/ 有/ 代表性/ 的/ 工作/ 作/ 了/ 一个/ 总结/ 和/ 整理/ ,/ 并且/ 对/ 未来/ 的/ 工作/ 作/ 了/ 展望/ ./ 

