Page1/ 基于/ 图像匹配/ -/ 点云/ 融合/ 的/ 建筑物/ 立面/ 三维重建/ 王俊/ 1/ )/ 朱利/ 2/ )/ 1/ )/ (/ 西安交通大学/ 电子/ 与/ 信息/ 工程学院/ 西安/ 710049/ )/ 2/ )/ (/ 西安交通大学/ 软件/ 学院/ 西安/ 710049/ )/ 摘要/ 随着/ 计算机技术/ 的/ 快速/ 发展/ ,/ 基于/ 图像/ 的/ 建筑物/ 三维重建/ 逐渐/ 成为/ 计算机/ 图形学/ 和/ 计算机/ 视觉/ 领域/ 的/ 研究/ 热点/ 之一/ ./ 由于/ 建筑物/ 图像/ 背景/ 复杂/ 、/ 序列/ 长且/ 杂乱无序/ ,/ 现有/ 的/ 三维重建/ 算法/ 存在/ 耗时/ 长/ 、/ 局部/ 几何/ 细节/ 重建/ 效果/ 差/ 的/ 问题/ ./ 文中/ 针对/ 这些/ 不足/ 提出/ 了/ 一种/ 基于/ 图像匹配/ 实现/ 点云/ 融合/ 的/ 建筑物/ 立面/ 三维重建/ 算法/ ./ 首先/ 寻找/ 新/ 添加/ 的/ 建筑物/ 局部/ 图像/ 在/ 原始/ 图像/ 集中/ 的/ 匹配/ 图像/ ,/ 组成/ 规模较/ 小/ 的/ 图像/ 集/ 并/ 重建/ 出/ 局部/ 点云/ 模型/ ,/ 然后/ 通过/ 匹配/ 不同点/ 云/ 模型/ 在/ 同/ 一幅/ 图像/ 上/ 的/ 投影/ 点/ ,/ 找到/ 点云/ 模型/ 之间/ 的/ 一致/ 对应点/ 集/ ,/ 接着/ 求解/ 点云/ 集合/ 之间/ 的/ 最佳/ 对齐/ 变换/ ,/ 实现/ 整体/ 和/ 局部/ 点云/ 模型/ 的/ 融合/ ,/ 最终/ 生成/ 建筑物/ 立面/ 完整/ 的/ 三维/ 模型/ ./ 实验/ 表明/ ,/ 采用/ 文中/ 算法/ 进行/ 三维重建/ ,/ 可以/ 有效/ 地/ 减少/ 重建/ 时间/ ,/ 提高/ 重建/ 精度/ ./ 关键词/ SIFT/ 流/ ;/ 图像匹配/ ;/ 点云/ 融合/ ;/ 三维重建/ 1/ 引言/ 随着/ “/ 数字地球/ ”/ 、/ “/ 智慧/ 城市/ ”/ 等/ 城市/ 信息化/ 、/ 智能化/ 发展/ 战略/ 的/ 实施/ ,/ 如何/ 高效/ 构建/ 城市/ 三维/ 虚拟环境/ 成为/ 其中/ 的/ 关键技术/ 问题/ 之一/ ,/ 并/ 将/ 有助于/ 实现/ 公共/ 监控/ 、/ 设施/ 管理/ 、/ 数字/ 生活/ 等/ 城市/ 智能/ 环境/ 的/ 建立/ ./ 建筑物/ 是/ 城市/ 的/ 主要/ 组成部分/ ,/ 各式各样/ 的/ 楼房/ 是/ 居民/ 生活/ 、/ 工作/ 、/ 娱乐/ 的/ 主要/ 场所/ ./ 因此/ ,/ 城市/ 建筑物/ 的/ 三维重建/ 成为/ 备受/ 关注/ 的/ 重要/ 问题/ ,/ 近几年来/ 在/ 计算机/ 图形学/ 和/ 计算机/ 视觉/ 等/ 领域/ 也/ 逐渐/ 成为/ 研究/ 的/ 热点问题/ ./ 目前/ ,/ 城市/ 建筑物/ 的/ 三维重建/ 方法/ 主要/ 分为/ 两大类/ [/ 1/ ]/ :/ 基于/ 深度/ 检测/ 设备/ 直接/ 获取/ 三维/ 点云/ 数据/ 和/ 基于/ 图像/ 的/ 三维重建/ ./ 前者/ 通过/ 具有/ 深度/ 测距/ 功能/ 的/ 系统/ ,/ 如/ 激光雷达/ (/ LiDAR/ )/ ,/ 可以/ 直接/ 生成/ 目标/ 建筑物/ 表面/ 的/ 点云/ 模型/ ./ 虽然/ 这种/ 方法/ 重建/ 的/ 三维/ 模型/ 精度/ 较/ 高/ ,/ 但/ 系统/ 设备/ 成本/ 昂贵/ ,/ 而且/ 不/ 适于/ 复杂/ 街道/ 环境/ 的/ 建筑物/ 重建/ [/ 2/ ]/ ./ 基于/ 图像/ 的/ 三维重建/ 技术/ 则/ 是/ 通过/ 数码/ 摄像机/ 等/ 拍摄/ 的/ 二维/ 图像/ ,/ 恢复/ 出/ 建筑物/ 表面/ 的/ 三维/ 信息/ ./ 该/ 方法/ 成本/ 低廉/ ,/ 仅/ 需要/ 普通/ 规格/ 的/ 数码相机/ 拍摄/ 建筑物/ 图片/ ,/ 而且/ 自动化/ 程度/ 高/ ,/ 重建/ 的/ 三维/ 模型/ 包含/ 丰富/ 的/ 纹理/ 等/ 信息/ ,/ 因此/ 一直/ 受到/ 学者/ 的/ 广泛/ 重视/ ./ 本文/ 针对/ 基于/ 图像/ 的/ 建筑物/ 立面/ 三维重建/ 进行/ 研究/ ,/ 提出/ 了/ 一种/ 更/ 高效/ 的/ 通过/ 图像匹配/ 实现/ 点云/ 融合/ 的/ 重建/ 方法/ ./ 基于/ 图像/ 的/ 三维重建/ 的/ 核心内容/ 是/ SFM/ (/ Structure/ -/ From/ -/ Motion/ )/ 技术/ [/ 3/ ]/ 和/ MVS/ (/ Multi/ -/ ViewStereo/ )/ [/ 4/ ]/ ,/ 即/ 输入/ 一组/ 建筑物/ 二维/ 图像/ ,/ 通过/ 求解/ 对应/ 的/ 摄像机/ 运动/ 参数/ 及/ 几何/ 结构/ ,/ 生成/ 建筑物/ 表面/ 的/ 三维/ 模型/ ./ 由于/ 维度/ 缺失/ ,/ 从/ 二维/ 图像/ 反求/ 三维/ 运动/ 是/ 一个/ 病态/ 问题/ ,/ 求解/ 困难/ ./ 通常/ 做法/ 是/ 将/ 摄像机/ 参数估计/ 和/ 三维/ 坐标/ 计算/ 转化/ 为/ 图像/ 平面/ 投影/ 误差/ 极大/ 似然/ 估计/ ,/ 借助/ 非线性/ 最小/ 二乘/ 优化/ 求解/ [/ 5/ ]/ ./ 虽然/ 这种/ 方法/ 原理/ 比较/ 成熟/ ,/ 但/ 由于/ 建筑物/ 图像/ 背景/ 复杂/ 、/ 图像/ 数目/ 较/ 多/ ,/ 而且/ 需要/ 重建/ 的/ 建筑物/ 外立面/ 结构复杂/ ,/ 现有/ 算法/ 将/ 所有/ 图像/ 作为/ 输入/ 的/ 重建/ 过程/ 耗时/ 长/ ,/ 而且/ 重建/ 出/ 的/ 三维/ 整体/ 模型/ 局部/ 效果/ 差/ ,/ 不利于/ 进一步/ 几何/ 细节/ 增强/ 处理/ ./ 针对/ 这一/ 问题/ ,/ 本文/ 提出/ 了/ 一种/ 借助/ 局部/ 点云/ 融合/ 的/ 三维重建/ 方法/ ,/ 目的/ 在于/ 保证/ 常规/ 方法/ [/ 5/ ]/ 重建/ 精度/ 的/ 同时/ ,/ 极大/ 地/ 减少/ 重建/ 时间/ ./ 该/ 方法/ 首先/ 通过/ 寻找/ 新/ 添加/ 图像/ 在/ 原始/ 图像/ 集中/ 的/ 匹配/ 图像/ ,/ 组成/ 规模较/ 小/ 的/ 局部/ 图像/ 集合/ 并/ 重建/ 出/ 局部/ 点云/ 模型/ ;/ 然后/ 求解/ 整体/ 点云/ 模型/ 和/ 局部/ 点云/ 模型/ 之间/ 的/ 融合/ 变换/ ;/ 最后/ 通过/ 融合/ 两/ 部分/ 点云/ 模型/ 来/ 实现/ 建筑物/ 立面/ 完整/ 的/ 三维重建/ ./ 本文/ 的/ 主要/ 贡献/ 是/ 提出/ 了/ 一种/ 借助/ 点云/ 融合/ 的/ 三维重建/ 算法/ ,/ 通过/ 整体/ 和/ 局部/ 点云/ 的/ 融合/ ,/ 实现/ 建筑物/ 完整/ 三维/ 模型/ 的/ 快速/ 重建/ ./ 通过/ 这种/ 图像匹配/ -/ 点云/ 融合/ 方法/ 重建/ 建筑物/ 立面/ ,/ 可以/ 大大缩短/ 重建/ 时间/ ,/ 同时/ 提高/ 三维/ 模型/ 的/ 重建/ 精度/ ./ 2/ 相关/ 工作/ 近些年来/ ,/ 学者/ 围绕/ 着/ 建筑物/ 的/ 三维重建/ 开展/ 了/ 大量/ 研究/ ./ 基于/ LiDAR/ 数据/ 的/ 方法/ 虽然/ 可以/ 直接/ 获取/ 建筑物/ 表面/ 的/ 三维/ 点云/ 模型/ ,/ 实现/ 建筑物/ 的/ 快速/ 准确/ 重建/ ,/ 但/ 由于/ 受到/ 其/ 硬件/ 设备/ 的/ 制约/ ,/ 不适/ 用于/ 复杂/ 的/ 天气/ 、/ 地理环境/ 以及/ 具有/ 特殊/ 目的/ 的/ 应用/ ,/ 如/ 军事/ 侦察/ 等/ [/ 2/ ,/ 6/ ]/ ./ 而/ 基于/ 图像/ 的/ 方法/ 由于/ 不/ 受/ 硬件/ 制约/ ,/ 长期以来/ 受到/ 广泛/ 关注/ ,/ 取得/ 了/ 大量/ 研究成果/ ./ 1996/ 年/ ,/ Debevec/ 等/ 人/ [/ 7/ ]/ 最早/ 讨论/ 了/ 基于/ 照片/ 图像/ 的/ 建筑物/ 建模/ 与/ 绘制/ 的/ 方法/ ,/ 引起/ 了/ 人们/ 对/ 城市/ 建筑物/ 这一/ 特殊/ 模型/ 重建/ 技术/ 的/ 兴趣/ ./ 该/ 方法/ 通过/ 基于/ 模型/ 的/ 立体/ 视觉/ 分析/ 技术/ 根据/ 真实/ 场景/ 与/ 图像/ 的/ 差异/ 进行/ 建模/ ,/ 可以/ 实现/ 对/ 简单/ 建筑物/ 立面/ 的/ 快速/ 重建/ ,/ 但是/ 不能/ 对/ 包含/ 大量/ 重复/ 结构/ 的/ 立面/ 进行/ 准确/ 重建/ ./ Muller/ 等/ 人/ [/ 8/ ]/ 借助/ 建筑物/ 立面图/ 像/ 的/ 规则/ 语义/ 结构/ 分析/ ,/ 半自动/ 地/ 从/ 图像/ 中/ 分析/ 提取/ 规则/ 矩形/ 的/ 门/ 、/ 窗/ 结构/ ,/ 结合/ 过程/ 建模/ 的/ 方式/ 对/ 复杂/ 建筑物/ 进行/ 重建/ ./ 虽然/ 该/ 方法/ 能够/ 处理/ 比较复杂/ 的/ 建筑物/ ,/ 但/ 自动化/ 程度/ 不高/ ,/ 而且/ 当/ 重复/ 结构/ 不规则/ 时会/ 产生/ 较大/ 的/ 重建/ 误差/ ./ 2008/ 年/ ,/ 香港科技大学/ 的/ Xiao/ 等/ 人/ [/ 9/ ]/ 提出/ 一种/ 半自动/ 的/ 自底/ 而/ 上/ 的/ 规则/ 结构/ 检测/ 方法/ ,/ 通过/ 预定/ 义/ 简单/ 几何体/ 模型/ 实现/ 建筑物/ 表面/ 结构/ 的/ 三维重建/ ./ 这种/ 方法/ 对于/ 包含/ 复杂/ 重复/ 结构/ 的/ 建筑物/ 立面/ 重建/ 效果/ 不佳/ ./ 为了/ 解决/ 这个/ 问题/ ,/ Xiao/ 等/ 人/ [/ 10/ ]/ 提出/ 一种/ 基于/ 线/ 结构/ 的/ 对称/ 分割/ 方法/ ,/ 可以/ 有效/ 消除/ 结构/ 分析/ 中/ 的/ 语义/ 歧义/ ,/ 能够/ 对/ 大规模/ 街景/ 进行/ 有效/ 的/ 三维重建/ ,/ 但/ 对于/ 非对称/ 的/ 局部/ 几何/ 细节/ 重建/ 效果/ 较差/ ./ Micusik/ 和/ Kosec/ -/ ka/ [/ 11/ ]/ 则/ 将/ 街景/ 图像/ 拼接/ 成/ 全景图/ ,/ 通过/ 全景/ 序列/ 生成/ 建筑物/ 立面/ 模型/ ,/ 虽然/ 减少/ 了/ 图像/ 集合/ 的/ 数据/ 规模/ ,/ 提高/ 了/ 重建/ 效率/ ,/ 但/ 由于/ 拼接/ 过程/ 中/ 的/ 局部/ 扭曲/ 等/ 造成/ 精度/ 下降/ ./ 针对/ 互联网/ 上/ 越来越/ 多/ 的/ 大规模/ 无/ 秩序/ 的/ 建筑物/ 图像/ ,/ Agarwal/ 等/ 人/ [/ 3/ ]/ 提出/ 了/ 一种/ 自/ 适应/ 的/ 分块/ SFM/ 求解/ 方法/ ,/ 可以/ 从/ 大量/ 的/ 建筑/ Page3/ 物/ 图像/ ,/ 尤其/ 是/ 互联网/ 图像/ 重建/ 建筑物/ 的/ 三维/ 模型/ ,/ 这/ 也/ 是/ 目前/ 使用/ 最广/ 的/ 摄像机/ 参数估计/ 及/ 三维/ 几何/ 模型/ 求解/ 方法/ ./ Musialski/ 等/ 人/ [/ 12/ ]/ 则/ 采用/ 交互式/ 的/ 方法/ 进行/ 立面/ 建模/ ,/ 通过/ 添加/ 内部结构/ 协调性/ 约束/ 生成/ 更加/ 精细/ 的/ 建筑物/ 三维/ 模型/ ,/ 但是/ 这种/ 方法/ 的/ 运行/ 时间/ 很长/ ,/ 不/ 适合/ 大规模/ 的/ 结构复杂/ 建筑物/ 重建/ ./ 图/ 1/ 算法/ 流程/ (/ 1/ )/ 局部/ 图像/ 集合/ 的/ 构建/ ./ 通过/ SIFT/ 流/ 计算/ 图像/ 之间/ 相似性/ ,/ 从/ 整体/ 图像/ 集合/ 中/ 寻找/ 到/ 与/ 新/ 加入/ 的/ 局部/ 图像/ 相匹配/ 的/ 图像/ ,/ 然后/ 选择/ 匹配/ 最佳/ 的/ 若干/ 张/ 图像/ ,/ 与/ 新/ 图像/ 组成/ 局部/ 图像/ 集合/ (/ 见/ 第/ 4/ 节/ )/ ./ (/ 2/ )/ 整体/ 和/ 局部/ 点云/ 一致/ 对应/ ./ 对/ 整体/ 图像/ 集合/ 和/ 构建/ 的/ 局部/ 图像/ 集合/ 分别/ 采用/ 常规/ 方法/ [/ 5/ ]/ 重建/ 点云/ 模型/ ./ 通过/ 图像匹配/ 寻找/ 整体/ 和/ 局部/ 点云/ 之间/ 的/ 一致/ 对应点/ 集/ (/ 见/ 第/ 5.1/ 节/ )/ ./ (/ 3/ )/ 点云/ 模型/ 的/ 融合/ ./ 求解/ 对应点/ 集/ 的/ 变换/ 矩阵/ ,/ 实现/ 整体/ 和/ 局部/ 点云/ 的/ 融合/ ,/ 最终/ 生成/ 完整/ 的/ 建筑物/ 立面/ 的/ 三维/ 点云/ 模型/ (/ 见/ 第/ 5.2/ 节/ )/ ./ 4/ 基于/ SIFT/ 流/ 的/ 图像匹配/ 算法/ 对于/ 整体/ 点云/ 模型/ 中点/ 云/ 稀疏/ 或者/ 缺失/ 的/ 局部/ 区域/ ,/ 我们/ 重新/ 拍摄/ 一些/ 只/ 包含/ 该/ 局部/ 区域/ 的/ 新/ 图像/ (/ C2/ )/ ,/ 并/ 在/ 原始/ 图像/ 集中/ 寻找/ 与/ 新/ 拍摄/ 图像匹配/ 的/ 图像/ ,/ 组成/ 规模较/ 小/ 的/ 新/ 图像/ 集/ ,/ 用以/ 重建/ 局部/ 点云/ 模型/ ./ 新/ 拍摄/ 的/ 图像/ 数目/ 选择/ 应/ 遵循/ 以下/ 原则/ :/ 第一/ ,/ 确保/ 能够/ 使用/ 一般/ 的/ 传统/ 算法/ [/ 5/ ]/ 恢复/ 得到/ 建筑物/ 外立面/ 的/ 局部/ 点云/ 模型/ ;/ 第二/ ,/ 在/ 确保/ 第一条/ 的/ 基础/ 上/ ,/ 尽量/ 使用/ 数目/ 较少/ 的/ 图像/ ,/ 以/ 减少/ 重建/ 所/ 花费/ 的/ 时间/ ./ 实验/ 表明/ ,/ 新/ 拍摄/ 的/ 图像/ 数目/ 为/ 5/ ~/ 10/ 张为/ 宜/ ,/ 通过/ 新/ 的/ 图像/ 实现/ 建筑物/ 立面/ 几何/ 细节/ 的/ 进一步/ 重建/ ./ 本文/ 采用/ 基于/ SIFT/ 流/ [/ 13/ ]/ 的/ 图像匹配/ 算法/ ,/ 对/ C2/ 中/ 的/ 任意/ 一张/ 图像/ I/ ,/ 寻找/ 在/ C1/ 中/ 的/ 最佳/ 匹配/ 图像/ J/ ,/ 建立/ 局部/ 图像/ 集合/ ./ 4.1/ SIFT/ 流/ 计算/ SIFT/ 流/ [/ 13/ ]/ 是/ 度量/ 两幅/ 图像/ 之间/ SIFT/ 特征/ 分/ 3/ 算法/ 简介/ 本文/ 提出/ 的/ 建筑物/ 立面/ 三维重建/ 算法/ 流程/ 如图/ 1/ 所示/ ./ 输入/ 的/ 建筑物/ 图像/ 包括/ 原始/ 图像/ 集合/ C1/ 以及/ 新/ 拍摄/ 的/ 图像/ 集合/ C2/ ./ 通过/ 以下/ 3/ 个/ 步骤/ 重建/ 建筑物/ 立面/ 完整/ 的/ 三维/ 点云/ 模型/ ./ 布/ 一致性/ 的/ 表示/ ./ 由于/ SIFT/ 特征描述/ 尺度/ 不变/ 和/ 亮度/ 独立/ 的/ 图像/ 结构/ ,/ 匹配/ SIFT/ 描述/ 子/ 允许/ 在/ 不同/ 场景/ 内容/ 之间/ 建立/ 一致/ 对应/ ./ 因此/ ,/ 采用/ SIFT/ 流/ 可以/ 很/ 好/ 地/ 度量/ 两幅/ 图像/ 之间/ 的/ 局部/ 相似性/ ./ 给定/ 图像/ I/ 和/ J/ ,/ SIFT/ 流对/ I/ 中/ 的/ 每/ 一个/ 像素/ (/ x/ ,/ y/ )/ 定义/ 位移/ 向量/ (/ V/ (/ x/ )/ ,/ V/ (/ y/ )/ )/ ./ 图/ 2/ (/ c/ )/ 展示/ 了/ 从/ 图像/ I/ 到/ 图像/ J/ 的/ SIFT/ 流/ ./ 4.2/ 建筑物/ 局部/ 图像/ 的/ 匹配/ 根据/ 图像/ 之间/ 的/ SIFT/ 流/ ,/ 得到/ 集合/ C1/ 中/ 每/ 一幅/ 图像/ J/ 与/ 图像/ I/ 对应/ 的/ 投影图/ 像/ ./ 投影图/ 像/ 的/ 计算公式/ 如下/ :/ 其中/ Iij/ 为/ 图像/ I/ 通过/ 与/ 图像/ J/ 之间/ SIFT/ 流/ 变换/ 后/ 的/ 图像/ (/ 图/ 2/ (/ d/ )/ )/ ./ Page4/ 然后/ ,/ 计算/ 图像/ I/ 和/ 变换/ 图像/ 之间/ 的/ PSNR/ (/ PeakSignaltoNoiseRatio/ )/ 值/ ,/ 并/ 以此/ 计算结果/ 来/ 表示/ 两幅/ 图像/ 的/ 相近/ 程度/ ./ PSNR/ 值越/ 大/ ,/ 说明/ 两幅/ 图像/ 越/ 相近/ ./ PSNR/ 值/ 的/ 计算公式/ 如下/ :/ 其中/ ,/ n/ 为/ 图像/ 像素/ 数目/ ,/ MSE/ 为/ 两张/ 图像/ 之间/ 的/ 均/ 方/ 误差/ ./ 图/ 3/ (/ b/ )/ 展示/ 其中/ 一幅/ 图像/ 的/ 匹配/ 结果/ ./ 其中/ ,/ 位于/ 左上角/ 图像/ 为/ 新/ 拍摄/ 的/ 图像/ 集/ C2/ 中/ 一张/ 建筑图/ 3/ 公共/ 图像/ 集/ 与/ 图像匹配/ 结果/ 5/ 点云/ 融合/ 的/ 建筑物/ 立面/ 三维重建/ 获取/ 整体/ 和/ 局部/ 点云/ 模型/ 之后/ ,/ 接下来/ 需要/ 将/ 两/ 部分/ 点云/ 进行/ 融合/ ./ 融合/ 算法/ 分为/ 两步/ :/ 第/ 1/ 步是/ 寻找/ 到/ 两/ 部分/ 三维/ 点云/ 模型/ 中/ 一致/ 对应/ 的/ 点集/ ;/ 第/ 2/ 步是/ 计算/ 变换/ 矩阵/ ,/ 实现/ 整体/ 点云/ 和/ 局部/ 点云/ 的/ 融合/ ./ 5.1/ 局部/ 点云/ 模型/ 的/ 一致/ 对应/ 我们/ 将/ 整体/ 和/ 局部/ 点云/ 模型/ 分别/ 命名/ 为/ P1/ 和/ P2/ ./ 统计/ 公共/ 图像/ D/ 中/ 每/ 一张/ 图像/ 在/ P1/ 和/ P2/ 中/ 对应/ 的/ 点云/ 数目/ ./ 具体方法/ 为/ ,/ 对/ D/ 中/ 的/ 每/ 一幅/ 图像/ K/ ,/ 读取/ 图像/ K/ 在/ V1/ 和/ V2/ 中/ 对应/ 的/ 点云/ ,/ 命名/ Pk1/ 和/ Pk2/ ./ 那么/ 选择/ 包含/ V1/ 和/ V2/ 中/ 对应/ 的/ 点云/ 数目/ 都/ 比较/ 多/ 的/ 图像/ 用来/ 引导/ 点云/ 融合/ ,/ 该/ 图像/ 仍记/ 为/ K/ ./ 这样/ 选择/ 的/ 目的/ 是/ 为了/ 提高/ 匹配/ 计算/ 的/ 精度/ 和/ 稳定性/ ./ 然后/ 计算/ 点云/ P1/ 和/ P2/ 分别/ 投影/ 在/ 图像/ K/ 上/ 的/ 像素/ 位置/ ,/ 记录/ 三维/ 点/ 在/ 共同/ 图像/ 平面/ 上/ 投影/ 点/ 位置/ 坐标/ ./ 计算公式/ 为物/ 的/ 局部/ 图像/ ,/ 右侧/ 图像/ 集合/ 为/ 原始/ 图像/ 集/ C1/ ,/ 而/ 最佳/ 匹配/ 图像/ 为/ 左下角/ 图像/ ./ 对/ C2/ 中/ 的/ 每/ 一幅/ 图像/ 都/ 采用/ 上述/ 方法/ 求得/ 其/ 匹配/ 图像/ ,/ 最后/ 选择/ 匹配/ 最佳/ 的/ 三幅/ 图像/ ,/ 加入/ 到/ C2/ 中/ ,/ 组成/ 局部/ 图像/ 集/ C3/ ./ 接着/ 采用/ 常规/ 方法/ [/ 5/ ]/ 重建/ 出/ 建筑物/ 外立面/ 的/ 局部/ 点云/ 模型/ P2/ =/ (/ X1/ ,/ X2/ ,/ …/ ,/ Xn/ )/ T/ ,/ 其中/ Xi/ =/ (/ xi/ ,/ yi/ ,/ zi/ )/ T/ 是/ 点/ 的/ 三维/ 坐标/ ;/ 而/ 由/ 原始/ 图像/ 集合/ C1/ 重建/ 的/ 点云记/ 为/ P1/ ./ 由于/ 集合/ C1/ 和/ C3/ 中/ 都/ 包含/ 这/ 3/ 幅/ 匹配/ 图像/ ,/ 我们/ 称/ 这/ 3/ 幅/ 图像/ 为/ 公共/ 图像/ 集/ D/ (/ 图/ 3/ (/ a/ )/ )/ ./ 其中/ ,/ Xi/ 是/ 三维/ 点/ 坐标/ ,/ 犘/ 是/ 图像/ K/ 对应/ 的/ 摄像机/ 矩阵/ ,/ xi/ 是/ Xi/ 投影/ 到/ 图像/ K/ 上/ 的/ 二维/ 点/ 坐标/ ./ P1/ 和/ P2/ 在/ 图像/ K/ 上/ 的/ 投影/ 结果/ 分别/ 记为/ K1/ 和/ K2/ ,/ 如图/ 4/ 所示/ ./ 由式/ (/ 3/ )/ 计算/ 得到/ 的/ 投影/ 像素点/ 坐标/ 并/ 不是/ 整数/ ,/ 首先/ 将/ 所有/ 投影/ 像素点/ 进行/ 坐标/ 取整/ ;/ 然后/ 对比/ 两张/ 图像/ 中/ 投影/ 像素点/ 的/ 坐标/ 位置/ ,/ 记录/ 坐标值/ 重合/ 的/ 像素点/ ,/ 组成/ 点/ 集合/ A/ ./ 我们/ 认为/ 这些/ 点/ 是/ 匹配/ 准确/ 的/ 点/ ./ 图/ 4/ 展示/ 了/ 坐标/ 匹配/ 的/ 结果/ ./ 其中/ ,/ 图/ 4/ (/ a/ )/ 上/ 的/ 十字/ 点/ 集合/ 对应/ K1/ 中/ 的/ 投影/ 像素/ 位置/ ,/ 图/ 4/ (/ b/ )/ 上/ 的/ 叉/ 点/ 集合/ 为/ K2/ 中/ 的/ 投影/ 像素/ 位置/ ,/ 而/ 通过/ 坐标/ 位置/ 匹配/ ,/ 得到/ 点云/ 之间/ 对应/ 的/ 点集/ (/ 图/ 4/ (/ c/ )/ 圆点/ 所示/ )/ ./ 为了/ 进一步提高/ 匹配/ 准确度/ ,/ 我们/ 将/ 点集/ A/ 中/ 的/ 所有/ 点/ 在/ K1/ 和/ K2/ 中/ 对应/ 的/ 像素点/ 记为/ A1/ 和/ A2/ ./ 计算/ A1/ 和/ A2/ 中/ 每/ 一对/ 匹配/ 点/ 对/ 之间/ 的/ 距离/ ,/ 将/ 所有/ 匹配/ 点/ 对/ 的/ 距离/ 值/ 按照/ 由小到大/ 进行/ 排序/ ,/ 距离/ 值越/ 小/ ,/ 匹配/ 越/ 准确/ ./ 实验/ 中/ 我们/ 取/ 阈值/ 为/ 0.5/ ,/ 对于/ 距离/ 小于/ 0.5/ 的/ 匹配/ 点/ 对/ ,/ 我们/ 认为/ 是/ 匹配/ Page5/ 准确/ 的/ ;/ 反之/ ,/ 则/ 认为/ 是/ 匹配/ 不/ 准确/ 的/ ,/ 并/ 予以/ 去除/ ./ 最后/ 记录/ A/ 中/ 剩余/ 点/ 对/ 在/ 点云/ 模型/ P1/ 和/ P2/ 中图/ 4/ 投影图/ 像/ 5.2/ 点云/ 融合/ 变换/ 在/ 5.1/ 节/ 我们/ 已经/ 找到/ 了/ 三维/ 点云/ 模型/ P1/ 和/ P2/ 中/ 的/ 一致/ 点/ 对/ Pk1/ 和/ Pk2/ ./ 接下来/ 需要/ 寻找/ 一个/ 相似/ 变换/ T/ ,/ 实现/ Pk1/ 和/ Pk2/ 中/ 的/ 所有/ 对应点/ 集/ 的/ 坐标/ 对齐/ ./ IterativeClosestPoint/ (/ ICP/ )/ [/ 14/ ]/ 方法/ 是/ 最/ 常用/ 的/ 三维/ 模型/ 匹配/ 算法/ ./ 该/ 方法/ 通过/ 不断更新/ 最近/ 点/ 的/ 匹配/ 求解/ 变换/ ,/ 是/ 一个/ 非线性/ 迭代/ 过程/ ./ 而/ 本文/ 中/ ,/ 由于/ 两个/ 点云/ 模型/ P1/ 和/ P2/ 的/ 对应点/ 已知/ ,/ 我们/ 接下来/ 采用/ 具有/ 显式/ 解/ 的/ 方法/ 求解/ T/ ./ 变换/ T/ 由/ 3/ 个/ 参数/ 组成/ :/ 平移/ 向量/ 犔/ 、/ 旋转/ 矩阵/ 犚/ 和/ 缩放/ 因子/ s/ ./ 于是/ 求解/ 问题/ 就/ 变成/ 最小化/ 如下/ 目标/ 函数/ :/ E/ (/ Pk1/ ,/ Pk2/ )/ =/ Pk1/ -/ (/ s/ ·/ Pk2/ ·/ 犚/ +/ 犔/ )/ (/ 4/ )/ 该/ 函数/ 的/ 优化/ 是/ Procrustes/ 问题/ [/ 15/ ]/ ,/ 我们/ 采用/ 以下/ 步骤/ 逐步/ 求解/ 相应/ 的/ 变换/ ./ (/ 1/ )/ 计算/ 平移/ 量/ 犔/ 首先/ 计算/ Pk1/ 和/ Pk2/ 的/ 几何/ 中心/ ,/ 公式/ 如下/ :/ 其中/ ,/ O/ 为/ 三维/ 点云/ 模型/ 的/ 几何/ 中心/ ,/ Xi/ 是/ 三维/ 点云/ 模型/ 中/ 第/ i/ 个点/ 的/ 坐标/ ,/ N/ 是/ 三维/ 点云/ 模型/ 的/ 点云/ 数目/ ./ 其中/ ,/ O/ 为/ 三维/ 点云/ 模型/ 的/ 几何/ 中心/ ,/ Xi/ 是/ 三维/ 点云/ 模型/ 中/ 第/ i/ 个点/ 的/ 坐标/ ,/ N/ 是/ 三维/ 点云/ 模型/ 的/ 点云/ 数目/ ./ 得到/ Pk1/ 和/ Pk2/ 的/ 几何/ 中心/ O1/ 和/ O2/ 后/ ,/ 平移/ 向量/ 犔/ 就/ 可以/ 很/ 简单/ 地/ 计算出来/ :/ 实际上/ ,/ 为了/ 计算/ 方便/ ,/ 本文/ 采取/ 了/ 坐标/ 归一化/ 的/ 方法/ ,/ 将/ Pk1/ 和/ Pk2/ 的/ 几何/ 中心/ 都/ 平移/ 到/ 原点/ O/ ./ 则/ 公式/ 转化/ 为/ 如下/ 形式/ :/ 对应/ 的/ 三维/ 点/ 坐标/ ,/ 我们/ 仍用/ Pk1/ 和/ Pk2/ ./ 这样/ ,/ 我们/ 就/ 得到/ 了/ 整体/ 和/ 局部/ 点云/ 模型/ 之间/ 的/ 一致/ 点/ 对/ ./ (/ 2/ )/ 计算/ 旋转/ 矩阵/ 犚/ 通过/ 将/ Pk1/ 和/ Pk2/ 进行/ 坐标/ 归一化/ ,/ 并且/ 先/ 不/ 考虑/ 缩放/ 因子/ ,/ 公式/ 可/ 进一步/ 简化/ 为/ 为了/ 满足/ 点云/ 模型/ 在/ 变换/ 过程/ 中/ 保证/ 结构/ 的/ 不变性/ ,/ 旋转/ 矩阵/ 犚/ 需要/ 满足/ 刚体/ 变换/ 的/ 约束条件/ ,/ 即/ det/ (/ 犚/ )/ =/ 1/ ./ 该/ 最小化/ 问题/ 可以/ 采用/ OPP/ (/ OrthogonalProcrustesProblem/ )/ 算法/ [/ 14/ ]/ 进行/ 求解/ ,/ 求解/ 出/ 的/ 最优/ 旋转/ 矩阵/ 犚/ 表达式/ 如下/ :/ 其中/ ,/ 犝/ 和/ 犞/ 是/ 对/ PTk2/ ·/ Pk1/ 做/ SVD/ 分解/ 得到/ 的/ 特征向量/ 矩阵/ 结果/ ./ (/ 3/ )/ 计算/ 缩放/ 因子/ s/ 缩放/ 因子/ s/ 可以/ 通过/ 下面/ 的/ 公式/ 直接/ 求得/ 其中/ tr/ (/ ·/ )/ 是/ 矩阵的迹/ ./ 通过/ 式/ (/ 7/ )/ 、/ (/ 9/ )/ 、/ (/ 10/ )/ 计算/ 得到/ 平移/ 、/ 旋转/ 及/ 缩放/ 变换/ 后/ ,/ 使用/ 如下/ 公式/ 将/ P2/ 中/ 的/ 点云/ 变换/ 到/ P1/ 坐标系/ 下/ :/ 这样/ ,/ 就/ 实现/ 了/ 整体/ 点云/ 和/ 局部/ 点云/ 的/ 融合/ P1/ ∪/ 珟/ P2/ ,/ 完成/ 了/ 整个/ 建筑物/ 立面/ 的/ 重建/ ./ 6/ 实验/ 结果/ 及/ 分析/ 为了/ 验证/ 本文/ 算法/ 的/ 实验/ 效果/ ,/ 我们/ 使用/ 了/ 多组/ 建筑物/ 图像/ 集合/ 进行/ 测试/ ./ 这些/ 图像/ 都/ 是/ 通过/ 普通/ 数码相机/ 进行/ 拍摄/ ,/ 在/ 不同/ 视角/ 采集/ 建筑物/ 立面图/ 像/ ,/ 然后/ 通过/ 图像匹配/ 实现/ 点云/ 融合/ ,/ 进而/ 恢复/ 所/ 拍/ 建筑物/ 的/ 立面/ 三维/ 模型/ ./ 图/ 6/ 展示/ 了/ 部分/ 实验/ 结果/ ./ 实验/ 运行/ 环境/ 为/ Intel/ 双核/ 处理器/ 2.27/ GHz/ ,/ 8GB/ 内存/ ,/ 64/ 位/ 操作系统/ ./ 表/ 1/ 给出/ 了/ 不同/ 实验/ 运行/ 的/ 时间/ 统计/ ./ Page6/ 模型/ 科学馆/ (/ 图/ 5/ )/ 42/ 校门/ (/ 图/ 6/ (/ a/ )/ )/ 36/ 化工/ 楼/ (/ 图/ 6/ (/ b/ )/ )/ 44/ 表/ 1/ 基于/ 图像/ 的/ 建筑物/ 立面/ 三维/ 模型/ 重建/ 时间/ 统计/ 整体/ 点云/ 耗时/ // min29/ ./ 06.02/ ./ 524.07/ ./ 52.533/ ./ 56.52/ ./ 5/ 图/ 5/ 科学馆/ 三维/ 模型/ 重建/ 图/ 6/ 校门/ 及/ 化工/ 楼/ 三维/ 模型/ 重建/ Page7/ 由图/ 6/ (/ a/ )/ 中/ 的/ 整体/ 点云/ 可以/ 看到/ ,/ 校门/ 右上角/ 的/ 区域/ 点云/ 是/ 缺失/ 的/ ,/ 这/ 可能/ 是/ 由于/ 没有/ 拍摄/ 到/ 该/ 部分/ 的/ 图像/ ,/ 或者/ 图像/ 特征/ 匹配/ 较差/ 造成/ ./ 对/ 这部分/ 使用/ 本文/ 提出/ 的/ 融合/ 算法/ 进行/ 了/ 修补/ ;/ 经过/ 图像匹配/ 和/ 点云/ 融合/ 后/ ,/ 本文/ 算法/ 对/ 西安交通大学/ 北门/ 右上角/ 区域/ 的/ 点云/ 已经/ 进行/ 了/ 补充/ ,/ 而且/ 局部/ 细节/ 纹理/ 也/ 更加/ 清楚/ ./ 重建/ 的/ 结果/ 能够/ 体现/ 整个/ 校门/ 的/ 几何/ 模型/ ./ 而/ 采用/ 一般/ 的/ 重建/ 算法/ [/ 5/ ]/ ,/ 并/ 没有/ 获得/ 更好/ 的/ 重建/ 效果/ ,/ 重建/ 的/ 三维/ 模型/ 局部/ 几何/ 细节/ 较差/ ./ 分析/ 其/ 原因/ 有/ 两个/ :/ 第一/ ,/ 由于/ 图像/ 数目/ 的/ 增多/ ,/ 造成/ 了/ 部分/ 干扰/ 物/ 也/ 重建/ 出来/ ,/ 从而/ 带来/ 一些/ 杂点/ ;/ 第二/ ,/ 图像/ 数目/ 的/ 增多/ ,/ 也/ 增加/ 了/ 特征/ 点/ 匹配/ 和/ 摄像机/ 参数估计/ 错误/ 的/ 概率/ ,/ 从而/ 造成/ 重建/ 效果/ 差/ ./ 图/ 6/ (/ b/ )/ 展示/ 了/ 另/ 一个/ 建筑物/ 侧面/ 的/ 重建/ 效果/ 及/ 对比/ ./ 从/ 重建/ 时间/ (/ 表/ 1/ )/ 来看/ ,/ 在/ 整体/ 点云/ 模型/ 的/ 基础/ 上/ ,/ 当/ 加入/ 新/ 的/ 图像/ 时/ ,/ 采用/ “/ 匹配/ +/ 融合/ ”/ 方法/ 进行/ 重建/ 比/ 一般/ 的/ 方法/ 节省/ 50/ %/ 以上/ 的/ 时间/ ,/ 尤其/ 是/ 当/ 采集/ 图像/ 的/ 数量/ 较大/ 时/ ,/ 优势/ 更加/ 明显/ ./ 因此/ 本文/ 算法/ 具有/ 较/ 高/ 的/ 运行/ 效率/ ,/ 可以/ 极大/ 地/ 节省/ 建筑物/ 立面/ 三维/ 模型/ 重建/ 时间/ ./ 7/ 结论/ 本文/ 针对/ 重建/ 出/ 的/ 建筑物/ 外立面/ 点云/ 模型/ 中/ 局部/ 点云/ 缺失/ 或者/ 过于/ 稀疏/ 的/ 问题/ ,/ 提出/ 了/ 一种/ 基于/ 二维/ -/ 三维/ 图像/ 融合/ 的/ 三维重建/ 算法/ ,/ 对点/ 云/ 模型/ 的/ 局部/ 进行/ 融合/ 修补/ ,/ 得到/ 了/ 结构/ 和/ 细节/ 更加/ 完整/ 丰富/ 的/ 建筑物/ 外立面/ 三维/ 点云/ 模型/ ./ 与/ 一般/ 方法/ 相比/ ,/ 本文/ 提出/ 的/ 方法/ 可以/ 在/ 保证/ 重建/ 精度/ 的/ 前提/ 下/ ,/ 大大减少/ 重建/ 时间/ ,/ 提高/ 重建/ 效率/ ./ 当然/ ,/ 本文/ 算法/ 也/ 存在/ 不足/ ,/ 需要/ 进一步/ 改进/ ./ 第一/ ,/ 本文/ 算法/ 依赖于/ SIFT/ 流/ 检测/ 图像/ 之间/ 的/ 相似性/ ,/ 对于/ 视角/ 变化/ 剧烈/ 的/ 非/ 平移/ 运动/ 效果/ 较差/ ./ 这一/ 问题/ 可以/ 通过/ 在/ 拍摄/ 新/ 的/ 局部/ 图像/ 集合/ 时/ 控制/ 平移/ 运动量/ 解决/ ./ 第二/ ,/ 本文/ 算法/ 只/ 考虑/ 了/ 模型/ 中/ 存在/ 点云/ 缺失/ 或者/ 稀疏/ 的/ 问题/ ,/ 而/ 没有/ 考虑/ 模型/ 中/ 存在/ 噪音/ 的/ 问题/ ./ 在/ 后续/ 工作/ 中应/ 考虑/ 如何/ 去除/ 多余/ 的/ 噪音/ ,/ 以/ 进一步提高/ 重建/ 点云/ 模型/ 的/ 精度/ ./ 致谢/ 衷心感谢/ 匿名/ 审稿/ 专家/ ,/ 他们/ 对/ 本文/ 提出/ 了/ 宝贵/ 的/ 修改/ 建议/ !/ 

