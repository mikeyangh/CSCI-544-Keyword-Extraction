Page1/ 一种/ 有效/ 显示/ 隐藏/ 特征/ 的/ 光线/ 投射/ 算法/ 周志光/ 陶煜波/ 林海/ (/ 浙江大学/ CAD/ &/ CG/ 国家/ 重点/ 实验室/ 杭州/ 310058/ )/ 摘要/ 提出/ 了/ 一种/ 有效/ 显示/ 隐藏/ 特征/ 的/ 光线/ 投射/ 算法/ ,/ 无需/ 调节/ 复杂/ 的/ 传输/ 函数/ ,/ 便/ 可以/ 有效/ 地/ 显示/ 光线方向/ 上/ 被/ 遮挡/ 的/ 感兴趣/ 的/ 特征/ ./ 在/ 沿/ 光线方向/ 遍历/ 的/ 过程/ 中/ ,/ 采用/ 低/ 通滤波/ 对/ 光线/ 上/ 采样/ 点/ 的/ 标量/ 值/ 进行/ 平滑/ ,/ 以/ 获得/ 不/ 受/ 噪声/ 干扰/ 的/ 、/ 准确/ 的/ 特征/ 点/ ;/ 根据/ 特征/ 点/ 的/ 深度/ 信息/ 调整/ 当前/ 最大/ 的/ 标量/ 值/ ,/ 以/ 获得/ 能够/ 满足/ 隐藏/ 特征/ 显示/ 的/ 当前/ 最大/ 标量/ 值/ ;/ 计算/ 最大/ 标量/ 差/ ,/ 调整/ 不/ 透明度/ 和/ 颜色/ 的/ 累加/ 值/ ,/ 以/ 提高/ 隐藏/ 特征/ 的/ 可见/ 性/ ./ 实验/ 结果表明/ ,/ 文中/ 算法/ 相对/ 于/ 传统/ 算法/ ,/ 绘制/ 结果/ 的/ 结构/ 信息/ 丰富/ ,/ 有效/ 地/ 显示/ 了/ 隐藏/ 信息/ ,/ 具有/ 一定/ 的/ 实用性/ ./ 关键词/ 体/ 绘制/ ;/ 光线/ 投射/ ;/ 隐藏/ 特征/ ;/ 最大/ 标量/ 差/ 1/ 引言/ 科学计算/ 可视化/ 作为/ 计算机/ 应用/ 学科/ 的/ 一个/ 重要/ 分支/ ,/ 已/ 广泛应用/ 于/ 医疗卫生/ 、/ 地质勘探/ 、/ 气象/ 分析/ 等/ 与/ 人类/ 生活/ 息息相关/ 的/ 重要/ 领域/ ,/ 其/ 主要/ 目标/ 就是/ 把/ 实际/ 采样/ 或/ 模拟/ 仿真/ 得到/ 的/ 三维/ 体/ 数据/ 通过/ Page2/ 近年来/ ,/ 随着/ 图形/ 硬件/ 可编程/ 技术/ 的/ 蓬勃发展/ ,/ 基于/ 图形/ 硬件/ 的/ 体/ 绘制/ 技术/ 得到/ 了/ 深入研究/ ./ 基于/ 图形/ 处理器/ (/ GPU/ )/ 的/ 光线/ 投射/ 体/ 绘制/ 算法/ 在/ GPU/ 中/ 完成/ 体/ 数据/ 在/ 光线方向/ 上/ 的/ 采样/ 、/ 遍历/ 、/ 累加/ 等/ 复杂/ 计算/ ,/ 大幅度提高/ 了/ 绘制/ 效率/ ,/ 因此/ 得到/ 了/ 广泛/ 的/ 关注/ 和/ 深入/ 的/ 研究/ [/ 9/ -/ 11/ ]/ ./ 公认/ 比较/ 经典/ 的/ 体/ 绘制/ 算法/ 有/ 直接/ 体/ 绘制/ 算法/ DVR/ (/ DirectVolumeRendering/ )/ [/ 12/ ]/ 和/ 最大/ 标量/ 值/ 投影/ 算法/ MIP/ (/ MaximumIntensityProjection/ )/ [/ 13/ ]/ 等等/ ./ DVR/ 算法/ 利用/ 传输/ 函数/ 查找/ 光线方向/ 上/ 采样/ 点/ 的/ 颜色/ 值/ 和/ 不/ 透明度/ ,/ 进而/ 累加/ 获得/ 二维/ 图像/ 对应/ 像素/ 的/ 颜色/ 值/ ,/ 既/ 可以/ 给出/ 感兴趣/ 特征/ 的/ 信息/ ,/ 也/ 提供/ 了/ 特征/ 的/ 背景/ 信息/ ./ 但是/ ,/ DVR/ 算法/ 的/ 绘制/ 结果/ 过于/ 依赖/ 数据/ 分类/ ,/ 特别/ 是/ 传输/ 函数/ ,/ 交互/ 分类/ 过程/ 比较复杂/ 和/ 费时/ ,/ 限制/ 了/ 其/ 应用/ 范围/ ./ MIP/ 算法/ 则/ 是/ 选择/ 光线方向/ 上/ 最大/ 标量/ 值/ ,/ 作为/ 二维/ 图像/ 对应/ 像素/ 的/ 颜色/ 值/ ./ 虽然/ 该/ 算法/ 简单/ 实用/ ,/ 彻底/ 摒弃/ 了/ 传输/ 函数/ ,/ 但是/ 绘制/ 的/ 结果/ 缺乏/ 背景/ 信息/ ,/ 忽略/ 了/ 重要/ 的/ 结构/ 信息/ ,/ 不利于/ 领域专家/ 获取/ 特征/ 之间/ 的/ 相互/ 信息/ ./ 为了/ 结合/ DVR/ 和/ MIP/ 各自/ 的/ 优势/ ,/ Stefan/ 和/ Eduard/ 提出/ 了/ MIDA/ 算法/ [/ 14/ ]/ ./ MIDA/ 算法/ 是/ 在/ 上述/ 两种/ 算法/ 的/ 基础/ 之上/ ,/ 将/ 当前/ 采样/ 点/ 的/ 标量/ 值/ 与/ 之前/ 最大/ 标量/ 值/ 的/ 差/ 作为/ 参数/ ,/ 修改/ 颜色/ 和/ 不/ 透明度/ 的/ 累加/ 值/ ,/ 进而/ 获得/ 相对/ 准确/ 的/ 二维/ 图像/ 显示/ ./ 然而/ ,/ 由于/ 最大/ 标量/ 差/ 的/ 引入/ ,/ 参与/ 显示/ 的/ 标量/ 值/ 是/ 递增/ 的/ ,/ 即/ 小于/ 当前/ 最大/ 标量/ 值/ 的/ 信息/ ,/ 即便/ 是/ 领域专家/ 感兴趣/ 的/ 结构/ 信息/ 也/ 将/ 被/ 隐藏/ ,/ 从而/ 使得/ 绘制/ 结果/ 提供/ 的/ 信息/ 不够/ 完整/ ./ 因此/ ,/ 在/ 分析/ 和/ 对比/ 传统/ 方法/ 不足/ 的/ 基础/ 之上/ ,/ 本文/ 提出/ 了/ 一种/ 有效/ 显示/ 隐藏/ 特征/ 的/ 光线/ 投射/ 算法/ ./ 在/ 沿/ 光线方向/ 遍历/ 采样/ 点/ 的/ 过程/ 中/ ,/ 比较/ 采样/ 点/ 的/ 标量/ 值/ 与/ 最大/ 标量/ 值/ 的/ 大小/ ,/ 实时/ 更新/ 当前/ 最大/ 标量/ 值/ ,/ 按照/ MIDA/ 算法/ 对/ 较大/ 标量/ 值/ 的/ 采样/ 点/ 进行/ 累加/ ;/ 然后/ ,/ 寻找/ 当前/ 最大/ 标量/ 值/ 之后/ 的/ 特征/ 信息/ ,/ 为了/ 避免/ 噪声/ 的/ 干扰/ ,/ 我们/ 采用/ 低/ 通滤波/ 对/ 采样/ 点/ 的/ 标量/ 值/ 进行/ 平滑/ 处理/ ,/ 进而/ 获得/ 准确/ 的/ 特征/ 点/ 位置/ ,/ 即/ 当前/ 最大/ 标量/ 值/ 所在/ 采样/ 点/ 之后/ 标量/ 值/ 曲线/ 低谷/ 位置/ ;/ 进而/ ,/ 为了/ 显示/ 最大/ 标量/ 值/ 之后/ 的/ 隐藏/ 特征/ ,/ 我们/ 利用/ 特征/ 点/ 的/ 深度/ 信息/ 调整/ 当前/ 最大/ 标量/ 值/ ,/ 降低/ 特征/ 显示/ 的/ 标准/ ,/ 使得/ 隐藏/ 特征/ 信息/ 也/ 能够/ 显示/ 出来/ ;/ 最后/ ,/ 对/ 光线方向/ 上/ 的/ 所有/ 采样/ 点均/ 按/ 上述/ 步骤/ 判断/ 并且/ 累加/ ,/ 将/ 满足/ 更新/ 后/ 的/ 最大/ 标量/ 值/ 的/ 隐藏/ 特征/ 显示/ 到/ 二维/ 图像/ 对应/ 像素/ 上/ ./ 通过/ 上述/ 方法/ ,/ 对/ 由/ 视点/ 出发/ 的/ 所有/ 经过/ 体/ 数据/ 的/ 光线/ 进行/ 隐藏/ 特征/ 显示/ ,/ 便/ 可以/ 获得/ 结构/ 相对/ 完整/ 、/ 信息量/ 丰富/ 的/ 体/ 绘制/ 结果/ ./ 本文/ 第/ 2/ 节对/ 传统/ 的/ 光线/ 投射/ 算法/ 进行/ 概述/ ;/ 第/ 3/ 节/ 详细/ 地/ 介绍所/ 提出/ 的/ 有效/ 显示/ 隐藏/ 特征/ 的/ 光线/ 投射/ 算法/ ,/ 并/ 给出/ 了/ 算法/ 的/ 相关/ 伪码/ ;/ 第/ 4/ 节/ 分析/ 本文/ 算法/ 与/ 经典/ 算法/ 的/ 对比/ 实验/ 结果/ ;/ 第/ 5/ 节对/ 本文/ 工作/ 进行/ 总结/ ./ 2/ 传统/ 的/ 光线/ 投射/ 算法/ 概述/ 光线/ 投射/ 算法/ 是/ 沿/ 视线/ 方向/ 对体/ 数据/ 进行/ 采样/ ,/ 然后/ 对/ 采样/ 点/ 的/ 标量/ 值/ 通过/ 传输/ 函数/ 赋予/ 一定/ 的/ 颜色/ 值/ 和/ 不/ 透明度/ ,/ 进而/ 累加/ 获得/ 二维/ 绘制/ 结果/ ./ 该/ 方法/ 有效/ 地/ 结合/ 了/ 体/ 数据/ 、/ 传输/ 函数/ 和/ 视点/ 三者/ 信息/ ,/ 创新性/ 地/ 提出/ 了/ 一种/ 绘制/ 思想/ ,/ 得到/ 了/ 学者/ 们/ 的/ 广泛/ 认可/ 和/ 关注/ ./ Max/ 等/ 人/ 首次/ 提出/ 了/ DVR/ 算法/ [/ 12/ ]/ ,/ 借助于/ 简单/ 的/ 绘制/ 模型/ ,/ 只/ 考虑/ 沿/ 光线方向/ 上/ 采样/ 点/ 吸收/ 和/ 辐射/ 的/ 能量/ ,/ 把/ 采样/ 点/ 的/ 标量/ 值/ 通过/ 传输/ 函数/ 映射/ 为/ 颜色/ 值/ 和/ 不/ 透明度/ ,/ 合成/ 获得/ 光线/ 在/ 二维/ 图像/ 中/ 对应/ 位置/ 像素/ 的/ 颜色/ 值/ ,/ 如式/ (/ 1/ )/ 所示/ :/ ci/ =/ ci/ -/ 1/ +/ (/ 1/ -/ α/ i/ -/ 1/ )/ ×/ c/ (/ fpi/ )/ ×/ α/ (/ fpi/ )/ ,/ α/ i/ =/ α/ i/ -/ 1/ +/ (/ 1/ -/ α/ i/ -/ 1/ )/ ×/ α/ (/ fpi/ )/ 其中/ ,/ c/ (/ fpi/ )/ 和/ α/ (/ fpi/ )/ 分别/ 表示/ 当前/ 采样/ 点/ 的/ 颜色/ 值/ 和/ 不/ 透明度/ 值/ ,/ 由/ 传输/ 函数/ 指定/ ;/ ci/ 和/ α/ i/ 表示/ 颜色/ 值/ 和/ 不/ 透明度/ 在/ 遍历/ 至/ 第/ i/ 个/ 采样/ 点时/ 的/ 累加/ 值/ ,/ 当/ i/ 值/ 遍历/ 到/ 光线/ 终止/ 点/ 的/ 时候/ ,/ ci/ 即为/ 投射/ 至/ 图像/ 对应/ 位置/ 的/ 颜色/ 值/ ./ 可以/ 看出/ ,/ DVR/ 算法/ 的/ 质量/ 与/ 传输/ 函数/ 如何/ 设置/ 关系密切/ ,/ 假若/ 传输/ 函数/ 设置/ 不够/ 理想/ ,/ 那么/ 不/ 透明度/ 的/ 累加/ 值/ 很/ 有/ 可能/ 过早地/ 接近/ 于/ 1/ ,/ 此时/ 处于/ 光线/ 后面/ 部分/ 的/ 很/ 有/ 可能/ 反映/ 重要/ 信息/ 或/ 结构/ 的/ 采样/ 点将/ 会/ 被/ 忽略/ 或者/ 对于/ 最终/ 的/ 结果/ 图像/ 发挥/ 很小/ 的/ 作用/ ,/ 造成/ 了/ 绘制/ 结果/ 信息/ 的/ 缺失/ 和/ 不/ 准确/ ./ 传输/ 函数/ 对于/ 绘制/ 结果/ 的/ 影响/ 决定/ 了/ 其/ 重要/ 的/ 研究/ 价值/ [/ 15/ -/ 16/ ]/ ./ 因此/ ,/ 近年来/ 关于/ 传输/ 函数/ 的/ 研究/ 不断/ 扩展/ 和/ 深入/ ,/ 基于/ 体/ 数据/ 中/ 隐含/ 的/ 纹理/ 、/ 形状/ 和/ 几何/ 信息/ 的/ 高维/ 传输/ 函数/ 相继/ 产生/ [/ 17/ -/ 21/ ]/ ./ 例如/ ,/ Kniss/ 等/ 人/ 将/ 梯度/ 模/ 引入/ 一维/ 传输/ 函数/ ,/ 有效/ 地/ 反映/ 了/ 体/ 数据/ 的/ 边界/ 信息/ [/ 17/ ]/ ;/ 为了/ 更好/ 地/ 分析/ 体/ 数据/ 的/ 边界/ 信息/ ,/ Sereda/ 等/ 人/ 提出/ 了/ LH/ 直方图/ 传输/ 函数/ [/ 20/ ]/ ;/ 针对/ 形状/ 结构复杂/ 的/ 体/ 数据/ ,/ Stefan/ 等/ 人/ 提出/ 了/ 基于/ 体/ 数据/ 形状/ 信息/ 特征/ 的/ 传输/ 函数/ [/ 21/ ]/ 等/ ./ 随着/ 传输/ 函数/ 的/ 不断更新/ 进步/ ,/ 如何/ 操纵/ 复杂/ 的/ 传输/ 函数/ 绘制/ 出/ 满意/ 的/ 结果/ 仍然/ 是/ 一个/ 烦琐/ 而/ 低效/ 的/ 过程/ ,/ 需要/ 有/ 经验/ 的/ 专家/ 进行/ 调节/ 操作/ ,/ 有/ 很大/ 的/ 局限性/ ./ Page3/ 为了/ 避免/ 复杂/ 的/ 传输/ 函数/ 调整/ 过程/ ,/ 如何/ 采用/ 简单/ 的/ 传输/ 函数/ 获得/ 信息量/ 丰富/ 、/ 结构/ 表示/ 准确/ 的/ 二维/ 图像/ 显示/ 已然/ 成为/ 了/ 当下/ 研究/ 的/ 热点问题/ ./ MIP/ 算法/ 则/ 是/ 将/ 光线/ 上/ 的/ 最大/ 标量/ 值/ 投影/ 至/ 二维/ 图像/ 的/ 对应/ 位置/ ./ 该/ 方法/ 能够/ 快速/ 准确/ 地/ 寻找/ 并/ 绘制/ 出/ 光线方向/ 上/ 最/ 可能/ 的/ 重要/ 信息/ ,/ 但/ 其/ 主要/ 问题/ 在于/ 以下/ 两点/ :/ (/ 1/ )/ 由于/ 噪声/ 的/ 影响/ ,/ 寻找/ 到/ 的/ 最大/ 标量/ 值/ 信息/ 未必/ 是/ 感兴趣/ 信息/ ,/ 进而/ 导致/ 绘制/ 的/ 结果/ 存在/ 误差/ ,/ 算法/ 的/ 鲁棒性/ 不/ 强/ ;/ (/ 2/ )/ 最终/ 投影/ 至/ 二维/ 图像/ 的/ 像素/ 值/ 只是/ 最大/ 标量/ 值/ 对应/ 的/ 颜色/ 值/ ,/ 缺乏/ 有效/ 的/ 背景/ 信息/ 以及/ 相对/ 重要/ 的/ 相邻/ 结构/ 信息/ ,/ 不能/ 满足/ 领域专家/ 更/ 高/ 的/ 要求/ ./ 为了/ 克服/ 上述/ 算法/ 的/ 种种/ 不足之处/ ,/ Stefan/ 和/ Eduard/ 于/ 2009/ 年/ 提出/ 一种/ 介于/ DVR/ 算法/ 和/ MIP/ 算法/ 之间/ 的/ MIDA/ 算法/ ./ 在/ 沿着/ 光线/ 采样/ 过程/ 中/ ,/ 倘若/ 遇到/ 标量/ 值/ 较大/ 的/ 信息/ ,/ 该/ 算法/ 实时/ 更新/ 当前/ 最大/ 标量/ 值/ ,/ 进而/ 有效/ 改进/ 了/ DVR/ 算法/ ,/ 如式/ (/ 2/ )/ 、/ (/ 3/ )/ ./ mi/ =/ fpi/ -/ fmaxi/ ,/ fpi/ >/ fmaxici/ =/ (/ 1/ -/ mi/ )/ ×/ ci/ -/ 1/ +/ (/ 1/ -/ (/ 1/ -/ mi/ )/ ×/ α/ i/ -/ 1/ )/ ×/ α/ i/ =/ (/ 1/ -/ mi/ )/ ×/ α/ i/ -/ 1/ +/ (/ 1/ -/ (/ 1/ -/ mi/ )/ ×/ α/ i/ -/ 1/ )/ ×/ α/ (/ fpi/ )/ c/ (/ fpi/ )/ ×/ α/ (/ fpi/ )/ ,/ 其中/ ,/ mi/ 表示/ 最大/ 标量/ 量差/ ./ 由于/ fpi/ 与/ fmaxi/ 的/ 取值/ 范围/ 均/ 为/ [/ 0/ ,/ 1/ ]/ ,/ 所以/ 最大/ 标量/ 差/ mi/ 的/ 取值/ 范围/ 也/ 为/ [/ 0/ ,/ 1/ ]/ ./ 可以/ 看出/ ,/ 相比/ 于/ DVR/ 算法/ ,/ MIDA/ 算法/ 不必/ 调节/ 复杂/ 的/ 传输/ 函数/ ,/ 而是/ 通过/ 最大/ 标量/ 差修图/ 1/ 本文/ 算法/ 的/ 流程/ 改不/ 透明度/ 和/ 颜色/ 值/ 的/ 累加/ 值/ ,/ 使得/ 当前/ 采样/ 点/ 在/ 绘制/ 的/ 结果/ 中/ 能够/ 有效/ 地/ 显示/ 出来/ ;/ 而且/ 在/ 绘制/ 的/ 过程/ 中/ ,/ 感兴趣/ 信息/ 周围/ 的/ 背景/ 信息/ 也/ 被/ 有效/ 地/ 保留/ 了/ 下来/ ,/ 克服/ 了/ MIP/ 算法/ 的/ 缺点/ ,/ 在/ 医学/ 等/ 领域/ 有/ 一定/ 的/ 应用/ 价值/ ./ 然而/ ,/ MIDA/ 算法/ 也/ 仍然/ 存在/ 重要/ 的/ 缺陷/ ,/ 即/ 当前/ 最大/ 标量/ 值/ 达到/ 某一/ 范畴/ 以后/ ,/ 即/ 某/ 一/ 特征/ 得到/ 显示/ 以后/ ,/ 其/ 后面/ 所有/ 标量/ 值/ 小于/ 该/ 特征/ 的/ 信息/ 将/ 被/ 隐藏/ ,/ 这/ 很/ 有/ 可能/ 导致/ 丢失/ 重要/ 的/ 背景/ 和/ 结构/ 信息/ ,/ 造成/ 绘制/ 结果/ 的/ 不/ 准确/ ./ 3/ 有效/ 显示/ 隐藏/ 特征/ 的/ 光线/ 投射/ 算法/ 通过/ 第/ 2/ 节/ 的/ 式/ (/ 1/ )/ 可以/ 看出/ ,/ DVR/ 算法/ 通过/ 传输/ 函数/ 查找/ 采样/ 点/ 的/ 颜色/ 值/ 和/ 不/ 透明度/ ,/ 进而/ 进行/ 累加/ 计算/ ./ 但是/ ,/ 如果/ 不/ 透明度/ 的/ 累加/ 值/ 接近/ 于/ 1/ ,/ 那么/ 后续/ 采样/ 点/ 的/ 信息/ 将/ 被/ 隐藏/ ;/ 而式/ (/ 2/ )/ 、/ (/ 3/ )/ 所示/ 的/ MIDA/ 算法/ 虽然/ 通过/ 最大/ 标量/ 差/ ,/ 有效/ 地/ 改进/ 了/ DVR/ 算法/ ,/ 但是/ 当前/ 最大/ 标量/ 值会/ 隐藏/ 其后/ 标量/ 值/ 相对/ 较/ 小/ 的/ 特征/ 信息/ ,/ 而/ 这些/ 特征/ 信息/ 很/ 有/ 可能/ 是/ 领域专家/ 感兴趣/ 的/ 信息/ ,/ 所以/ 存在/ 一定/ 的/ 缺陷/ ./ 为了/ 能够/ 有效/ 地/ 将/ 隐藏/ 特征/ 绘制/ 出来/ ,/ 更加/ 准确/ 显示/ 光线/ 在/ 二维/ 图像/ 投影/ 的/ 颜色/ 值/ ,/ 本文/ 提出/ 了/ 一种/ 新/ 的/ 有效/ 显示/ 隐藏/ 特征/ 的/ 光线/ 投射/ 算法/ ./ 本节/ 将/ 重点/ 介绍/ 该/ 算法/ 的/ 总体/ 过程/ 和/ 具体/ 实现/ 步骤/ ./ 3.1/ 本文/ 算法/ 的/ 总体/ 过程/ 图/ 1/ 出示/ 了/ 该/ 算法/ 的/ 流程图/ ./ 为了/ 能够/ 更/ 清晰/ 地/ 表述/ 本文/ 算法/ 的/ 总体/ 过程/ ,/ Page4/ 按照/ 图/ 1/ 中/ 所示/ 的/ 结构/ ,/ 可以/ 看出/ ,/ 本文/ 算法/ 在/ 动态/ 更新/ 最大/ 标量/ 值/ 之后/ ,/ 并/ 没有/ 单纯/ 地/ 依赖/ 当前/ 最大/ 标量/ 值去/ 累加/ 其后/ 所有/ 采样/ 点/ ,/ 而是/ 通过/ 寻找/ 特征/ 点/ 的/ 位置/ 并且/ 根据/ 特征/ 点/ 的/ 深度/ 信息/ 自/ 适应/ 地/ 调整/ 当前/ 最大/ 标量/ 值/ ,/ 使得/ 被/ 隐藏/ 的/ 信息/ 能够/ 完整/ 地/ 显示/ ./ 3.2/ 本文/ 算法/ 的/ 具体/ 过程/ 算法/ ,/ 我们/ 将/ 其/ 分为/ 以下/ 4/ 个/ 步骤/ :/ 为了/ 详细/ 地/ 解释/ 有效/ 显示/ 隐藏/ 特征/ 的/ 光线/ 投射/ 1/ ./ 计算/ 最大/ 标量/ 差/ ./ 遍历/ 光线方向/ 上/ 所有/ 采样/ 点/ ,/ 比较/ 当前/ 采样/ 点/ 的/ 标量/ 值/ 与/ 最大/ 标量/ 值/ ,/ 根据/ 式/ (/ 2/ )/ 计算/ 获得/ 最大/ 标量/ 差/ mi/ ,/ 并且/ 更新/ 最大/ 标量/ 值/ fmaxi/ ./ 在/ 遇到/ 标量/ 值/ 较大/ 的/ 采样/ 点时/ ,/ 通过/ mi/ 修改/ 颜色/ 和/ 不/ 透明度/ 的/ 累加/ 值/ ci/ -/ 1/ 和/ α/ i/ -/ 1/ ,/ 降低/ 之前/ 所有/ 采样/ 点/ 在/ 最终/ 颜色/ 值/ 所/ 占/ 的/ 比重/ ,/ 进而/ 增强/ 了/ 该/ 采样/ 点/ 的/ 比重/ ,/ 使得/ 其/ 特征/ 能/ 在/ 最终/ 的/ 结果/ 图像/ 中/ 得以/ 显示/ ,/ 这一/ 过程/ 有效/ 地/ 改进/ 了/ DVR/ 算法/ 在/ 不/ 透明度/ 接近/ 于/ 1/ 而/ 无法/ 显示/ 后续/ 信息/ 的/ 不足/ ./ 2/ ./ 获取/ 特征/ 点/ 位置/ ./ 在/ 沿/ 光线方向/ 的/ 采样/ 过程/ 中/ ,/ 标量/ 值/ 的/ 变化/ 能够/ 反映/ 特征/ 信息/ ,/ 即/ 两个/ 波谷/ 之间/ 的/ 信息/ 能够/ 反映/ 一定/ 的/ 特征/ 信息/ ./ 因此/ ,/ 可以/ 将/ 光线/ 上/ 的/ 标量/ 曲线/ 分解成/ 不同/ 的/ 特征/ 区域/ ,/ 如图/ 2/ 所示/ ./ 从图/ 2/ 中/ 可以/ 看出/ ,/ 不同/ 的/ 波谷/ 信息/ 将/ 光线/ 上/ 的/ 采样/ 点/ 分割/ 为/ 若干/ 特征/ 区域/ ,/ 而/ 这些/ 特征/ 区域/ 极有/ 可能/ 便是/ 领域专家/ 感兴趣/ 的/ 特征/ ./ 然而/ 由于/ 真实/ 的/ 采样/ 数据/ 受/ 噪声/ 等/ 客观因素/ 影响/ ,/ 准确/ 地/ 判断/ 波谷/ 的/ 位置/ 比较/ 困难/ ,/ 因此/ 我们/ 选取/ 低/ 通滤波/ 先对/ 光线方向/ 上/ 的/ 采样/ 点/ 进行/ 平滑/ 处理/ ,/ 进而/ 相对/ 准确/ 地/ 获得/ 特征/ 点/ 的/ 位置/ 信息/ ./ 特征/ 点/ 信息/ 获取/ 的/ 相关/ 伪码/ 表示/ 如下/ :/ // // 光线/ 上/ 采样/ 点/ 索引/ intj/ =/ 0/ ;/ // // 确定/ 特征/ 点函数/ booleanLocateTransitionPoint/ (/ j/ )/ {/ floattemp/ [/ 5/ ]/ ;/ for/ (/ inti/ =/ 0/ ;/ i/ </ 5/ ;/ ++/ i/ )/ {/ // // 采样/ 周围/ 5/ 个点/ temp/ [/ i/ ]/ =/ sample/ _/ intensity/ (/ j/ +/ i/ -/ 2/ )/ ;/ // // 低/ 通滤波/ ,/ 去除/ 噪声/ 干扰/ temp/ [/ i/ ]/ =/ lowPassFilter/ (/ temp/ [/ i/ ]/ )/ ;/ }/ // // 判断/ 该/ 采样/ 点/ 是否/ 为/ 波谷/ 位置/ if/ (/ isValley/ (/ temp/ [/ ]/ )/ returntrue/ ;/ elsereturnfalse/ ;/ }/ 3/ ./ 动态/ 更新/ 最大/ 标量/ 值/ ./ 由于/ 步/ 1/ 获得/ 的/ 最大/ 标量/ 值/ 很/ 有/ 可能/ 遮挡/ 其/ 后面/ 的/ 有效/ 信息/ ,/ 使得/ 最终/ 显示/ 的/ 信息/ 不/ 完整/ ./ 例如/ ,/ 图/ 2/ 中/ 的/ 特征/ 3/ 和/ 特征/ 4/ 将会/ 因为/ 特征/ 2/ 的/ 标量/ 值/ 较大/ 而/ 被/ 隐藏/ ,/ 不能/ 有效/ 显示/ ./ 因此/ ,/ 为了/ 能够/ 有效/ 显示/ 最大/ 标量/ 值/ 之后/ 的/ 特征/ 信息/ ,/ 我们/ 在步/ 2/ 获得/ 的/ 特征/ 点/ 位置/ ,/ 根据/ 特征/ 点/ 的/ 深度/ 信息/ ,/ 动态/ 修改/ 最大/ 标量/ 值/ ,/ 如式/ (/ 4/ )/ 所示/ ./ 其中/ ,/ u/ 表示/ 当前/ 特征/ 点/ 的/ 深度/ 信息/ ,/ 即/ 特征/ 点到/ 视点/ 平面/ 归一化/ 后/ 的/ 值/ ./ 归一化/ 的/ 过程/ 中/ ,/ 最大值/ 为/ 终止/ 点/ 距离/ 视点/ 平面/ 的/ 距离/ ,/ 最小值/ 为/ 起始/ 点/ 距离/ 视点/ 平面/ 的/ 距离/ ./ 具体/ 的/ 归一化/ 过程/ 如图/ 3/ 所示/ ./ 当/ 特征/ 点/ 距离/ 视点/ 较近/ 时/ ,/ 更新/ 后/ 的/ 最大/ 标量/ 值/ 变化/ 幅度/ 相对/ 较大/ ,/ 因此/ 距离/ 视点/ 较近/ 的/ 特征/ 得以/ 较完整/ 地/ 显示/ ;/ 而/ 距离/ 视点/ 较远/ 的/ 特征/ 显示/ 的/ 贡献/ 将会/ 逐渐/ 变小/ ,/ 这样/ 更/ 符合/ 人眼/ 视觉/ 观察/ 的/ 要求/ ./ 然而/ ,/ u/ 未必/ 会/ 真实/ 或/ 准确/ 地/ 约束/ 当前/ 最大/ 标量/ 值/ 的/ 最优/ 变化/ ,/ 显示/ 过多/ 的/ 特征/ 将会/ 影响/ 绘制/ 结果/ 的/ 质量/ ,/ 无法/ 识别/ 体/ 数据/ 中/ 的/ 主要/ 特征/ ./ 为了/ 解决/ 这一/ 问题/ ,/ 我们/ 将/ u/ 归约/ 到/ 0.8/ ~/ 1.0/ 之间/ ,/ 即/ u/ 的/ 最小值/ 为/ 0.8/ ,/ 使得/ fmaxi/ 不会/ 取得/ 较/ 小/ 的/ 标量/ 值/ ./ 这样/ 既/ 能够/ 保证/ 相对/ 明显/ 的/ 特征/ 有效/ 地/ 显示/ 出来/ ,/ 又/ 降低/ 了/ 特征/ 不/ 明显/ 的/ 信息/ 对/ 最终/ 绘制/ 结果/ 的/ 干扰/ ./ 通过/ 式/ (/ 4/ )/ ,/ 我们/ 获得/ 了/ 更新/ 后/ 的/ 最大/ 标量/ 值/ fmaxi/ ,/ 进而/ 继续/ 采样/ 时/ 可以/ 随之/ 更新/ 最大/ 标量/ 差/ mi/ ,/ 如式/ (/ 5/ )/ ./ 我们/ 通过/ 寻找/ 特征/ 点/ 的/ 深度/ 信息/ ,/ 相对/ 合理/ 地/ 改变/ 当前/ 最大/ 标量/ 值/ ,/ 对于/ 特征/ 点/ 位置/ 之后/ 的/ 特征/ 信息/ ,/ 将/ 以/ 更新/ Page5/ 当前/ 采样/ 点/ 的/ 颜色/ 值/ 和/ 不/ 透明度/ ./ ci/ =/ (/ 1/ -/ mi/ )/ ×/ ci/ -/ 1/ +/ (/ 1/ -/ (/ 1/ -/ mi/ )/ ×/ α/ i/ -/ 1/ )/ ×/ c/ (/ fpi/ )/ ×/ α/ (/ fpi/ )/ ,/ 后/ 的/ 最大/ 标量/ 值/ 判断/ 其/ 是否/ 属于/ 有效/ 特征/ ,/ 故/ 可以/ 有效/ 地/ 改进/ MIDA/ 算法/ 的/ 不足/ ,/ 将/ 最大/ 标量/ 值/ 之后/ 的/ 隐藏/ 信息/ 显示/ 出来/ ,/ 获得/ 信息/ 更加/ 丰富/ 、/ 特征/ 更加/ 明显/ 的/ 绘制/ 结果/ ./ 4/ ./ 二维/ 图像/ 颜色/ 值/ 获取/ ./ 根据/ 步/ 3/ 中/ 改进/ 的/ 最大/ 标量/ 差/ mi/ ,/ 进而/ 通过/ 式/ (/ 6/ )/ 累加/ α/ i/ =/ (/ 1/ -/ mi/ )/ ×/ α/ i/ -/ 1/ +/ (/ 1/ -/ (/ 1/ -/ mi/ )/ ×/ α/ i/ -/ 1/ )/ ×/ α/ (/ fpi/ )/ (/ 6/ )/ 按照/ 上述/ 公式/ ,/ 对/ 光线方向/ 的/ 每个/ 采样/ 点/ 的/ 颜色/ 值/ 和/ 不/ 透明度/ 值/ 进行/ 累加/ ,/ 最终/ 获得/ 该/ 光线/ 在/ 二维/ 图像/ 中/ 对应/ 像素/ 的/ 颜色/ 值/ ,/ 由于/ 改进/ 后/ 的/ 最大/ 标量/ 差/ mi/ 是/ 基于/ 隐藏/ 特征/ 与/ 当前/ 最大/ 标量/ 值/ fmaxi/ 的/ 差/ ,/ 因此/ 能够/ 显示/ 出/ 当前/ 最大/ 标量/ 值/ fmaxi/ 之后/ 标量/ 值/ 大于/ fmaxi/ 的/ 特征/ 信息/ ./ 3.3/ 本文/ 算法/ 的/ 实现/ 按照/ 上述/ 步骤/ ,/ 本文/ 在/ GPU/ 上/ 实现/ 了/ 有效/ 显示/ 隐藏/ 特征/ 的/ 光线/ 投射/ 算法/ ,/ 下面/ 给出/ 了/ 本文/ 算法/ 的/ 实现/ 过程/ :/ // // 体/ 绘制/ 函数/ volumeRendering/ (/ )/ {/ // // 遍历/ 光线/ ,/ 从/ 起始/ 点至/ 终止/ 点/ for/ (/ inti/ =/ startPos/ ;/ i/ </ endPos/ ;/ i/ ++/ )/ {/ // // 初始化/ 最大/ 标量/ 差/ m/ =/ 0/ ;/ if/ (/ sample/ _/ intensity/ (/ i/ )/ >/ max/ _/ intensity/ )/ {/ // // 计算/ 最大/ 标量/ 差/ m/ =/ (/ sample/ _/ intensity/ (/ i/ )/ -/ max/ _/ intensity/ )/ ;/ // // 更新/ 最大/ 标量/ 值/ max/ _/ intensity/ =/ sample/ _/ intensity/ (/ i/ )/ ;/ }/ // // 判断/ 特征/ 点/ 过程/ elseif/ (/ LocateTransitionPoint/ (/ rayPos/ )/ )/ {/ // // 更新/ 最大值/ // // u/ 是/ 将/ (/ d/ -/ d1/ )/ // (/ d2/ -/ d1/ )/ 归约/ 至/ [/ 0.8/ ,/ 1/ ]/ 中/ 的/ 值/ }/ // // 累加/ 颜色/ 和/ 不/ 透明度/ ,/ 获得/ 二维/ 图像/ 显示/ color/ =/ (/ 1/ -/ m/ )/ ×/ color/ +/ (/ 1/ -/ (/ 1/ -/ m/ )/ ×/ color/ ./ a/ )/ ×/ color/ ./ a/ =/ (/ 1/ -/ m/ )/ ×/ color/ ./ a/ +/ (/ 1/ -/ (/ 1/ -/ m/ )/ ×/ color/ ./ a/ )/ ×/ }/ 相对/ 于/ 已有/ 的/ MIP/ 、/ DVR/ 和/ MIDA/ 算法/ ,/ 本文/ 算法/ 尽可能/ 地/ 考虑/ 了/ 光线方向/ 上/ 的/ 所有/ 特征/ ,/ 根据/ 特征/ 点/ 的/ 深度/ 信息/ ,/ 动态/ 地/ 修正/ 最大/ 标量/ 值/ ,/ 进而/ 改进/ 最大/ 标量/ 差/ ./ 而且/ ,/ 在/ 改进/ 最大/ 标量/ 值/ 的/ 过程/ 中/ ,/ 为了/ 防止/ 大量/ 特征/ 信息/ 重叠/ 混合/ ,/ 造成/ 绘制/ 结果/ 的/ 混乱/ 和/ 不/ 清晰/ ,/ 我们/ 将/ 特征/ 点/ 的/ 深度/ 信息/ 归约/ 至/ [/ 0.8/ ,/ 1/ ]/ ,/ 因此/ 便/ 可以/ 忽略/ 相对/ 不/ 重要/ 的/ 信息/ ,/ 将/ 满足/ 深度/ 阈值/ 的/ 隐藏/ 特征/ 信息/ 有效/ 地/ 绘制/ 出来/ ./ 根据/ 本文/ 算法/ 与/ 传统/ 算法/ 在/ 最终/ 绘制/ 颜色/ 值/ 信息/ 的/ 不同/ ,/ 图/ 4/ 给出/ 了/ 4/ 种/ 算法/ 的/ 颜色/ 值/ 在/ 不/ 透明度/ 和/ 标量/ 值/ 变化/ 过程/ 中/ 的/ 对比/ 关系/ ./ 图/ 4/ 颜色/ 值/ 随着/ 标量/ 值/ 和/ 不/ 透明度/ 变化/ 示意图/ 图/ 4/ 中/ ,/ 较/ 粗/ 的/ 实线/ 代表/ 不/ 透明度/ 的/ 变化/ 曲线/ ,/ 较细/ 的/ 实线/ 代表/ 标量/ 值/ 的/ 变化/ 曲线/ ,/ 虚线/ 代表/ 颜色/ 值/ 的/ 变化/ 曲线/ ./ 可以/ 看出/ ,/ 经典/ 的/ MIP/ 算法/ 只是/ 选择/ 最大/ 的/ 标量/ 值/ ,/ 最终/ 的/ 颜色/ 显示/ 信息量/ 单一/ ,/ 而/ DVR/ 算法/ 在/ 不/ 透明度/ 接近/ 于/ 1/ 的/ 过程/ 中/ ,/ 其/ 后面/ 采样/ 点/ 的/ 标量/ 值/ 对/ 最终/ 的/ 颜色/ 几乎/ 没有/ 贡献/ ./ MIDA/ 算法/ 一定/ 程度/ 上/ 克服/ 了/ 上述/ 两种/ 算法/ 的/ 缺点/ ,/ 不/ 透明度/ 的/ 值会/ 因为/ 遇到/ 新/ 的/ 感兴趣/ 特征/ 信息/ 而/ 发生变化/ ,/ 改进/ 了/ 最终/ 生成/ 的/ 颜色/ 值/ ,/ 然而/ 光线/ 上/ 的/ 最大/ 标量/ 值/ 很/ 容易/ 遮挡/ 了/ 后面/ 的/ 特征/ 信息/ ,/ 从而/ 隐藏/ 了/ 其后/ 的/ 感兴趣/ 特征/ 信息/ ,/ 降低/ 了/ 绘制/ 效果/ ./ 而/ 本文/ 提出/ 的/ 基于/ 隐藏/ 信息/ 显示/ 的/ 光线/ 投射/ 算法/ ,/ 可以/ 识别/ 最/ Page6/ 大/ 标量/ 值/ 之后/ 的/ 特征/ 信息/ ,/ 进而/ 有效/ 地/ 显示/ 出/ 更/ 多/ 的/ 隐藏/ 信息/ ,/ 实现/ 完整/ 的/ 三维/ 体/ 数据/ 显示/ 和/ 丰富/ 的/ 信息/ 表达/ ./ 4/ 实验/ 结果/ 在/ 验证/ 本文/ 算法/ 有效性/ 的/ 过程/ 中/ ,/ 我们/ 对/ 真实/ 采样/ 的/ 医学/ 数据/ 、/ 模拟/ 仿真/ 数据/ 、/ 工业/ CT/ 等/ 数据/ 做/ 了/ 相关/ 对比/ 实验/ ,/ 即/ 在/ 相同/ 的/ 一维/ 传输/ 函数/ 作用/ 下/ ,/ 分别/ 采用/ MIP/ 算法/ 、/ DVR/ 算法/ 、/ MIDA/ 算法/ 以及/ 本文/ 算法/ 对/ 原始/ 体/ 数据/ 进行/ 绘制/ ,/ 并且/ 对/ 各种/ 算法/ 的/ 图/ 5Head/ 数据/ 的/ 体/ 绘制/ 结果/ 图/ 6Ncat/ _/ phantom/ 数据/ 的/ 体/ 绘制/ 结果/ 对比/ 例如/ ,/ 通过/ 图/ 5/ (/ a/ )/ 可以/ 看出/ ,/ 通过/ 简单/ 的/ 传输/ 函数/ ,/ DVR/ 算法/ 获得/ 的/ 绘制/ 结果/ 有效/ 地/ 显示/ 出/ 了/ 脑/ 皮肤/ 信息/ ,/ 但是/ 由于/ 不/ 透明度/ 的/ 累加/ 值/ 过早/ 接近/ 于/ 1/ ,/ 使得/ Head/ 数据/ 内部/ 的/ 信息/ ,/ 譬如/ 牙齿/ 、/ 颅骨/ 、/ 下颚/ 等/ 有效/ 信息/ 均/ 被/ 隐藏/ ,/ 以致/ 有效/ 信息/ 和/ 感兴趣/ 结构/ 信息/ 的/ 丢失/ ;/ 图/ 5/ (/ b/ )/ 的/ 结果/ 则/ 充分/ 显现出/ 了/ MIP/ 算法/ 的/ 不足/ ,/ 单纯/ 描述/ 了/ 最大/ 标量/ 值/ 信息/ ,/ 缺乏/ 背景/ 信息/ 和/ 相邻/ 信息/ ,/ 不利于/ 后续/ 处理/ ;/ MIDA/ 算法/ 获得/ 的/ 图/ 5/ (/ c/ )/ 相对/ 于/ 前/ 两种/ 算法/ 有/ 了/ 一些/ 改进/ ,/ 由于/ 采样/ 到/ 重要/ 的/ 信息/ 时/ ,/ 不/ 透明度/ 会/ 相应/ 作出/ 调整/ ,/ 因此/ 累加/ 获得/ 的/ 图片/ 信息量/ 相对/ 丰富/ ,/ 颅骨/ 、/ 牙齿/ 等/ 信息/ 均/ 有/ 显示/ ,/ 但是/ 标量/ 值/ 较大/ 信息/ 背后/ 的/ 结构/ 却/ 有/ 缺损/ ,/ 譬如/ 颈椎/ 信息/ 、/ Head/ 数据/ 另外/ 一侧/ 的/ 牙齿/ 信息/ 和/ 眼眶/ 信息/ 均/ 被/ 隐藏/ ,/ 不利于/ 医生/ 进一步/ 的/ 观察/ 和/ 诊断/ ./ 图/ 5/ (/ d/ )/ 是/ 本文/ 算法/ 的/ 绘制/ 结果/ ,/ 相/ 复杂度/ 做/ 了/ 简单/ 的/ 分析/ 和/ 讨论/ ./ 4.1/ 医学/ 数据/ 体/ 绘制/ 结果/ 为了/ 说明/ 本文/ 算法/ 运用/ 于/ 医学/ 数据/ 可视化/ 的/ 有效性/ ,/ 我们/ 采用/ 两组/ 医学/ 数据/ 做/ 了/ 相关/ 的/ 对比/ 实验/ ,/ 实验/ 数据/ 分别/ 是/ 大小/ 为/ 128/ ×/ 256/ ×/ 256/ 的/ Head/ 真实/ 采样/ 数据/ 和/ 大小/ 为/ 256/ ×/ 256/ ×/ 256/ 的/ Ncat/ _/ phantom/ 模拟/ 仿真/ 数据/ ./ 图/ 5/ 和/ 图/ 6/ 是/ 两组/ 数据/ 在/ 相同/ 的/ 一维/ 传输/ 函数/ 作用/ 下/ ,/ 分别/ 采用/ DVR/ 算法/ 、/ MIP/ 算法/ 、/ MIDA/ 算法/ 以及/ 本文/ 算法/ 的/ 绘制/ 结果/ ./ 通过/ 图中/ 绘制/ 结果/ 的/ 对比/ ,/ 我们/ 可以/ 清楚/ 地/ 判断/ 绘制/ 算法/ 的/ 有效性/ ./ 对于/ MIDA/ 算法/ ,/ 本文/ 算法/ 对/ 当前/ 最大/ 标量/ 值/ 的/ 后续/ 特征/ 进行/ 了/ 有效/ 的/ 绘制/ ,/ 可以/ 看出/ ,/ Head/ 数据/ 下颚/ 和/ 颈椎/ 信息/ 很/ 明显/ 地/ 表现/ 出来/ ,/ 另外/ 一侧/ 的/ 牙齿/ 信息/ 和/ 眼眶/ 信息/ 表现/ 得/ 也/ 很/ 明显/ ,/ 绘制/ 的/ 结果/ 也/ 更加/ 清晰/ ,/ 结构/ 更加/ 丰富/ ,/ 一定/ 程度/ 满足/ 了/ 医学/ 领域专家/ 的/ 需求/ ,/ 而且/ 并不需要/ 其/ 具备/ 可视化/ 的/ 专业知识/ ,/ 调整/ 复杂/ 的/ 传输/ 函数/ ./ 图/ 6/ 给出/ 了/ Ncat/ _/ phantom/ 数据/ 的/ 绘制/ 结果/ ./ 由图/ 6/ (/ d/ )/ 可以/ 看出/ ,/ 采用/ 本文/ 算法/ 可以/ 有效/ 观察/ 标量/ 值/ 较大/ 的/ 骨骼/ 信息/ 后面/ 隐藏/ 的/ 有效/ 信息/ ,/ 模型/ 中/ 肋骨/ 的/ 信息/ 完整/ 地/ 表现/ 出来/ ,/ 更加/ 有助于/ 医生/ 校准/ 患者/ 身体/ 的/ 内部结构/ ,/ 全面/ 地/ 诊断/ 患者/ 的/ 病因/ ,/ 有效/ 地/ 满足/ 了/ 医学/ 领域/ 的/ 某些/ 特定/ 应用/ ./ 相比/ 于/ DVR/ 算法/ 、/ MIP/ 算法/ 和/ MIDA/ 算法/ ,/ 本文/ 算法/ 绘制/ 的/ 信息/ 更加/ 丰富/ ,/ 最大/ 标量/ 值/ 之后/ 的/ 信息/ 能够/ 有效/ 地/ 显示/ ,/ 对/ 医生/ 的/ 正/ Page7/ 确/ 诊断/ 有/ 一定/ 的/ 指导作用/ 和/ 较/ 强/ 的/ 辅助/ 作用/ ./ 4.2/ 工业/ 数据/ 体/ 绘制/ 结果/ 对比/ 工业/ 检测/ 是/ 当代/ 计算机/ 集成/ 制造/ 系统/ 中/ 非常/ 重要/ 的/ 组成/ 环节/ ,/ 是/ 保证/ 和/ 提高/ 产品质量/ 的/ 重要/ 手段/ ,/ 已经/ 广泛应用/ 于/ 航天/ 、/ 汽车/ 制造/ 等/ 重要/ 领域/ ./ 三维/ 数图/ 7Engine/ 数据/ 的/ 体/ 绘制/ 结果/ 对比/ 为了/ 更好/ 地/ 验证/ 本文/ 算法/ 的/ 有效性/ ,/ 我们/ 有意/ 将/ Engine/ 数据/ 标量/ 值/ 较大/ 的/ 金属/ 面/ 放置/ 于/ 距离/ 视点/ 较近/ 的/ 一侧/ ./ 由/ 绘制/ 的/ 结果/ 可以/ 看出/ ,/ DVR/ 算法/ 的/ 绘制/ 结果/ 颜色/ 比较/ 暗淡/ ,/ 只能/ 看到/ 工业品/ 的/ 表面/ 信息/ ;/ MIP/ 算法/ 的/ 绘制/ 结果/ 缺乏/ 背景/ 信息/ ,/ 只能/ 大概/ 判断/ 有效/ 信息/ 的/ 位置/ ;/ MIDA/ 算法/ 绘制/ 的/ 结果/ 相对/ 真实/ ,/ 但是/ 由于/ 光线/ 过早/ 采样/ 到/ 较大/ 的/ 标量/ 值/ ,/ 所以/ 后面/ 的/ 结构/ 信息/ 被/ 遮挡/ ,/ 不能/ 实现/ 信息/ 的/ 完整/ 显示/ ;/ 而/ 本文/ 算法/ 恰恰/ 能够/ 寻找/ 到/ 最大/ 标量/ 值/ 后面/ 的/ 特征/ 信息/ ,/ 并/ 通过/ 特征/ 位置/ 的/ 深度/ 信息/ 调整/ 当前/ 最大/ 标量/ 值/ ,/ 对/ 隐藏/ 特征/ 进行/ 有效/ 显示/ ./ 从图/ 7/ (/ d/ )/ 可以/ 看出/ ,/ 本文/ 算法/ 既保证/ 了/ 工业/ 数据/ 绘制/ 结果/ 的/ 真图/ 8/ 当/ u/ 取/ 不同/ 值时/ ,/ 绘制/ 结果/ 与/ DVR/ 、/ MIP/ 和/ MIDA/ 算法/ 的/ 比较/ 据/ 可视化/ 技术/ 有效/ 地/ 提高/ 了/ 工业/ 测量/ 的/ 精度/ ,/ 避免/ 了/ 物理/ 测量/ 烦琐/ 的/ 过程/ ,/ 因此/ 在/ 工业/ 数据/ 测量/ 领域/ 中/ 得到/ 了/ 广泛/ 的/ 应用/ ./ 我们/ 采用/ 了/ 标准/ 的/ 256/ ×/ 256/ ×/ 256/ 的/ 工业/ 数据/ Engine/ 进行/ 了/ 对比/ 实验/ ,/ 实验/ 结果/ 如图/ 7/ 所示/ ./ 实/ ,/ 又/ 能/ 有效/ 地/ 观察/ 其/ 内部/ 的/ 结构/ 信息/ ,/ 对/ 工业/ 数据/ 的/ 配准/ 与/ 误差/ 检查/ 均/ 有/ 很大/ 的/ 帮助/ ,/ 因此/ 本文/ 算法/ 在/ 工业/ 检测/ 领域/ 有/ 较/ 强/ 的/ 实用价值/ ./ 4.3/ 用户/ 指定/ 阈值/ 的/ 绘制/ 结果/ 对比/ 此外/ ,/ 为了/ 能够/ 更好/ 地/ 满足/ 领域专家/ 的/ 需求/ ,/ 我们/ 可以/ 不/ 考虑/ 特征/ 点/ 的/ 深度/ 信息/ ,/ 而是/ 直接/ 人为/ 指定/ u/ 的/ 值/ ./ 领域专家/ 通过/ 简单/ 地/ 调节/ u/ ,/ 便/ 可以/ 控制/ 当前/ 最大/ 标量/ 值/ 的/ 变化/ ,/ 有/ 选择性/ 地/ 绘制/ 感兴趣/ 信息/ ,/ 增强/ 了/ 算法/ 的/ 灵活性/ ./ 为了/ 更好/ 地/ 说明/ 阈值/ 选取/ 的/ 重要性/ ,/ 我们/ 对/ 大小/ 为/ 246/ ×/ 246/ ×/ 211/ 的/ Present/ 数据/ 按照/ 不同/ 的/ u/ 值/ 进行/ 绘制/ ,/ 结果/ 与/ 传统/ 的/ 绘制/ 算法/ 对/ 比如/ 图/ 8/ 所示/ ./ Page8/ 可以/ 看出/ ,/ 阈值/ u/ 对/ 绘制/ 的/ 结果/ 发挥/ 重要/ 作用/ ./ u/ 的/ 值/ 如果/ 比较/ 小/ ,/ 那么/ 会/ 导致/ 相对/ 不/ 重要/ 的/ 特征/ 信息/ 也/ 要/ 显示/ ,/ 使得/ 之前/ 的/ 有用/ 信息/ 模糊/ 或者/ 忽略/ ./ 图/ 8/ (/ c/ )/ 可以/ 看出/ ,/ 盒子/ 内部/ 的/ 礼物/ 信息/ 虽然/ 能够/ 显示/ 出来/ ,/ 但是/ 外面/ 层次/ 的/ 信息/ 几乎/ 被/ 忽略/ ,/ 不/ 符合/ 我们/ 显示/ 隐藏/ 信息/ 的/ 最终目标/ ./ 随着/ u/ 值/ 的/ 不断/ 变化/ ,/ 在/ DVR/ 算法/ 中/ 被/ 盒子/ 隐藏/ 的/ 内部/ 信息/ 逐渐/ 地/ 显示/ 出来/ ./ 当/ u/ =/ 1.0/ ,/ 绘制/ 的/ 结果/ 即/ MIDA/ 算法/ 的/ 绘制/ 结果/ ,/ 如图/ 8/ (/ h/ )/ 所示/ ./ 虽然/ 盒子/ 信息/ 保留/ 相对/ 完整/ ,/ 但是/ 内部/ 的/ 圆形/ 包装/ 和/ 内部/ 的/ 礼物/ 信息/ 已经/ 隐藏/ ./ 通过/ 对比/ 可以/ 看出/ ,/ 当/ u/ 的/ 取值/ 介于/ [/ 0.8/ ,/ 1/ ]/ 区间/ 时/ ,/ 绘制/ 结果/ 的/ 信息/ 是/ 最/ 清晰/ 的/ ,/ 既/ 可以/ 看到/ 盒子/ 的/ 轮廓/ 信息/ ,/ 也/ 能/ 有效/ 描述/ 礼物/ 信息/ ,/ 如图/ 8/ (/ e/ )/ 、/ (/ f/ )/ 所示/ ./ 因此/ ,/ 通过/ 人为/ 动态/ 设定/ u/ 值/ ,/ 增强/ 了/ 算法/ 的/ 灵活性/ ,/ 不仅/ 可以/ 使/ 领域专家/ 能够/ 直观/ 地/ 调整/ 参数/ 生成/ 感兴趣/ 的/ 结果/ ,/ 而且/ 能够/ 增强/ 算法/ 的/ 鲁棒性/ ,/ 具有/ 较强/ 的/ 应用/ 意义/ ./ 4.4/ 算法/ 复杂度/ 分析/ 上述/ 绘制/ 算法/ 中/ ,/ MIP/ 算法/ 的/ 绘制/ 效率/ 是/ 最高/ 的/ ,/ 但是/ 绘制/ 的/ 结果/ 缺乏/ 背景/ 信息/ ,/ 具有/ 很大/ 的/ 局限性/ ;/ DVR/ 算法/ 对/ 光线方向/ 上/ 每个/ 采样/ 点均/ 计算/ 光照/ ,/ 因此/ 时间/ 复杂度/ 较/ 高/ ,/ 而且/ 要/ 获得/ 信息/ 丰富/ 的/ 绘制/ 结果/ ,/ 必须/ 需要/ 有/ 经验/ 的/ 专家/ 调节/ 复杂/ 的/ 传输/ 函数/ ;/ MIDA/ 算法/ 虽然/ 需要/ 实时/ 更新/ 最大/ 标量/ 值/ ,/ 但是/ 不/ 需要/ 调节/ 复杂/ 的/ 传输/ 函数/ ,/ 因此/ 相对/ 于/ DVR/ 算法/ ,/ 复杂性/ 较/ 低/ ,/ 且/ 绘制/ 的/ 结果/ 能够/ 显示/ 体/ 数据/ 内部/ 标量/ 值/ 较大/ 的/ 信息/ 和/ 结构/ ./ 而/ 本文/ 算法/ 则/ 是/ 在/ MIDA/ 算法/ 的/ 基础/ 之上/ ,/ 增加/ 了/ 一个/ 简单/ 的/ 低通滤波器/ ,/ 用于/ 判断/ 特征/ 点/ 的/ 位置/ ./ 相比/ 于/ MIDA/ 算法/ ,/ 本文/ 算法/ 时间/ 复杂度/ 略有/ 提升/ ,/ 但是/ 能够/ 有效/ 显示/ 最大/ 标量/ 值/ 之后/ 隐藏/ 的/ 特征/ 信息/ ,/ 而且/ 同样/ 不/ 需要/ 调整/ 复杂/ 的/ 传输/ 函数/ ,/ 能够/ 帮助/ 领域专家/ 更/ 快/ 、/ 更/ 准确/ 的/ 分析/ 初始/ 数据/ ,/ 具有/ 较强/ 的/ 应用性/ ./ 5/ 结束语/ 直接/ 体/ 绘制/ 技术/ 提供/ 的/ 是/ 一种/ 针对/ 不同/ 领域/ 三维/ 数据/ 的/ 可视化/ 方法/ ./ 如何/ 结合/ 领域/ 知识/ ,/ 切实/ 地/ 满足/ 领域专家/ 的/ 需求/ 是体/ 绘制/ 技术/ 的/ 首要/ 目标/ ./ 因此/ ,/ 避免/ 使用/ 复杂/ 的/ 传输/ 函数/ ,/ 而/ 又/ 能/ 获得/ 相对/ 满意/ 的/ 可视化/ 结果/ 的/ 绘制/ 算法/ 是/ 当前/ 研究/ 的/ 热点/ 与/ 难点/ ./ 本文/ 在/ 分析/ 了/ 传统/ 光线/ 投射/ 算法/ 的/ 优势/ 和/ 缺点/ 的/ 基础/ 之上/ ,/ 提出/ 了/ 一种/ 新/ 的/ 基于/ 隐藏/ 特征/ 显示/ 的/ GPU/ 光线/ 投射/ 算法/ ./ 该/ 算法/ 在/ 已有/ 的/ MIDA/ 算法/ 的/ 基础/ 之上/ ,/ 通过/ 寻找/ 最大/ 标量/ 值/ 之后/ 的/ 特征/ 点/ ,/ 根据/ 特征/ 点/ 的/ 深度/ 信息/ 动态/ 改变/ 当前/ 最大/ 标量/ 值/ ,/ 进而/ 根据/ 改进/ 的/ 最大/ 标量/ 差/ 有效/ 地/ 控制/ 颜色/ 和/ 不/ 透明度/ 的/ 累加/ 值/ ,/ 使得/ MIDA/ 算法/ 最大/ 标量/ 值/ 之后/ 的/ 隐藏/ 信息/ 能够/ 有效/ 地/ 显示/ 到/ 二维/ 图像/ 表示/ 中/ ./ 本文/ 算法/ 分别/ 应用/ 于/ 医学/ 数据/ 和/ 工业/ 数据/ 可视化/ ,/ 均/ 获得/ 了/ 较/ 好/ 的/ 绘制/ 结果/ ,/ 具有/ 一定/ 的/ 应用/ 价值/ ./ 隐藏/ 信息/ 的/ 绘制/ 是体/ 绘制/ 技术/ 领域/ 一个/ 有/ 意义/ 的/ 环节/ ,/ 本文/ 算法/ 致力于/ 隐藏/ 信息/ 的/ 显示/ ,/ 取得/ 了/ 一定/ 的/ 成效/ ./ 然而/ ,/ 如何/ 将/ 特征/ 点/ 的/ 深度/ 信息/ 与/ 强度/ 信息/ 有效/ 结合/ ,/ 以及/ 如何/ 更/ 准确/ 地/ 判断/ 特征/ 点/ 的/ 位置/ 、/ 摆脱/ 噪声/ 的/ 干扰/ 依然/ 是/ 难点/ 问题/ ,/ 也/ 是/ 我们/ 接下来/ 工作/ 的/ 重点/ ./ 

