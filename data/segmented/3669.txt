Page1/ 空间数据/ 上/ Top/ -/ 犽/ 关键词/ 模糊/ 查询/ 算法/ 胡骏/ 范举/ 李国良/ 陈/ 姗姗/ (/ 清华大学/ 计算机科学/ 与/ 技术/ 系/ 数据库/ 研究组/ 北京/ 100084/ )/ 摘要/ 基于/ 位置/ 的/ 服务/ (/ LBS/ )/ 变得/ 日益/ 普及/ ,/ 越来越/ 多/ 的/ 研究/ 开始/ 关注/ 如何/ 对/ 空间/ 中/ 的/ 兴趣/ 点/ (/ POI/ )/ 做/ 有效/ 的/ 检索/ ./ 现有/ 的/ 方法/ 提出/ 了/ 空间数据/ 上/ 的/ 关键词/ 检索/ ,/ 研究/ 如何/ 根据/ 查询/ 的/ 位置/ 和/ 关键词/ 找到/ 相关/ 的/ POI/ 点/ ./ 然而/ ,/ 现有/ 方法/ 主要/ 对/ 查询/ 关键词/ 进行/ 精确/ 匹配/ ,/ 不能/ 支持/ 模糊/ 查询/ :/ 当/ 查询/ 关键词/ 与/ 底层/ 数据/ 存在/ 微小/ 差异/ 的/ 时候/ ,/ LBS/ 系统/ 不能/ 返回/ 相关/ 的/ 结果/ ./ 为了/ 满足/ 移动用户/ 的/ 模糊/ 查询/ 需求/ ,/ 文中/ 对/ 空间数据/ 上/ 的/ Top/ -/ k/ 关键词/ 模糊/ 查询/ 问题/ 进行/ 研究/ :/ 给定/ 一组/ POI/ 点/ ,/ 检索/ 与/ 查询/ 关键词/ 近似/ 匹配/ 且/ 空间/ 上/ 距离/ 相近/ 的/ Top/ -/ k/ 个/ 结果/ ./ 为了/ 提供/ 高效/ 的/ 模糊/ 查询/ ,/ 文中/ 首先/ 定义/ 了/ 一种/ 新型/ 的/ 相关性/ 函数/ ,/ 综合/ 考虑/ 了/ 文本/ 相似性/ 和/ 空间/ 距离/ ,/ 进而/ 提出/ 了/ 一种/ 有效/ 的/ 索引/ 结构/ RegionTrie/ ,/ 并/ 基于/ RegionTrie/ 设计/ 了/ 高效/ 的/ Top/ -/ k/ 算法/ ./ 真实/ 数据/ 集上/ 的/ 实验/ 结果表明/ ,/ 文中/ 提出/ 的/ Top/ -/ k/ 算法/ 十分/ 高效/ ,/ 性能/ 远好/ 于/ 对比/ 方法/ ./ 关键词/ 基于/ 位置/ 的/ 服务/ ;/ 空间数据/ 上/ 的/ 关键词/ 检索/ ;/ 字符串/ 近似/ 匹配/ 1/ 引言/ 近年来/ ,/ 由于/ 移动/ 设备/ (/ 如/ 智能手机/ )/ 上/ 全球/ 定/ Page2/ 现有/ 的/ LBS/ 系统/ 采用/ 关键词/ 检索/ 的/ 方式/ 帮助/ 用户/ 从/ 空间/ 数据库/ 中/ 找到/ 位置/ 相关/ 的/ 结果/ [/ 1/ -/ 11/ ]/ ./ 具体来说/ ,/ 假设/ 空间/ 数据库/ 中有/ 一组/ 兴趣/ 点/ (/ PointsOfInterest/ ,/ POI/ 点/ )/ ,/ 其中/ 每个/ POI/ 点/ 都/ 包含/ 位置/ 信息/ 和/ 一定/ 的/ 文本/ 信息/ ./ 给定/ 用户/ 的/ 位置/ 和/ 一组/ 查询/ 关键词/ ,/ LBS/ 系统/ 返回/ 从/ 空间/ 和/ 文本/ 上/ 都/ 与/ 查询/ 相关/ 的/ POI/ 点/ ./ 举例来说/ ,/ 假设/ 用户/ 希望/ 找到/ 附近/ 的/ 星巴克/ 咖啡店/ ,/ 她/ 可以/ 输入/ 关键词/ “/ starbucks/ ”/ ,/ 系统/ 会/ 根据/ POI/ 点/ 与/ 查询/ 位置/ 的/ 距离/ 以及/ 是否/ 包含/ 关键词/ “/ starbucks/ ”/ 返回/ 相关/ 的/ POI/ 点/ 作为/ 结果/ ./ 现有/ 方法/ 需要/ POI/ 点/ 精确/ 地/ 匹配/ 到/ 查询/ 关键词/ ,/ 不/ 支持/ 关键词/ 的/ 模糊/ 匹配/ ./ 然而/ ,/ 由于/ 移动/ 设备/ 自身/ 的/ 特点/ ,/ 如/ 屏幕/ 小/ 、/ 键盘输入/ 不/ 方便/ 等/ ,/ 用户/ 很/ 可能/ 在/ 输入/ 关键词/ 的/ 时候/ 出现/ 错误/ ./ 例如/ ,/ 用户/ 可能/ 将/ 关键词/ “/ starbucks/ ”/ 误输/ 为/ “/ sterbuck/ ”/ ,/ 从而/ 无法/ 得到/ 想要/ 的/ 结果/ ./ 针对/ 这一/ 问题/ ,/ Yao/ 等/ 人/ [/ 6/ ]/ 提出/ 了/ 空间数据/ 上/ 的/ 字符串/ 近似/ 匹配/ 方法/ ,/ 该/ 方法/ 使用/ 编辑/ 距离/ 来/ 度量/ 查询/ 与/ POI/ 点中/ 关键词/ 的/ 相似性/ ,/ 并/ 设定/ 一个/ 阈值/ :/ 编辑/ 距离/ 小于/ 等于/ 该/ 阈值/ 时/ ,/ 则/ 认为/ 相应/ 的/ 关键词/ 彼此/ 近似/ ./ 例如/ ,/ 给定/ 阈值/ 2/ ,/ 关键词/ “/ sterbuck/ ”/ 与/ “/ starbucks/ ”/ 彼此/ 近似/ ,/ 因为/ 它们/ 的/ 编辑/ 距离/ 为/ 2/ ,/ 小于/ 等于/ 阈值/ ./ 因此/ ,/ 当/ 查询/ 关键词/ 为/ “/ sterbuck/ ”/ 时/ ,/ 也/ 可以/ 模糊/ 匹配/ 到/ 包含/ “/ starbucks/ ”/ 的/ POI/ 点/ ,/ 从而/ 实现/ 容错/ 的/ 目的/ ./ 该/ 方法/ 存在/ 以下/ 两点/ 局限性/ :/ 首先/ ,/ 对于/ 不同/ 的/ 查询/ 关键词/ ,/ 很难/ 设定/ 一个/ 统一/ 的/ 阈值/ :/ 较长/ 的/ 查询/ 可能/ 需要/ 比较/ 大/ 的/ 阈值/ ;/ 相反/ ,/ 较/ 短/ 的/ 查询/ 需要/ 的/ 阈值/ 也/ 会/ 小/ 一些/ ./ 其次/ ,/ Yao/ 等/ 人仅/ 提供/ 了/ 一种/ 近似/ 的/ 解法/ ,/ 即/ 结果/ 可能/ 存在/ 着/ 一定/ 的/ 误差/ ,/ 可能/ 会/ 引入/ 错误/ 以及/ 遗漏/ 结果/ ./ 本文/ 提出/ 一种/ 空间数据/ 上/ Top/ -/ k/ 关键词/ 模糊/ 查询方法/ ,/ 帮助/ 用户/ 在/ 输入/ 存在/ 错误/ 的/ 情况/ 下/ ,/ 找到/ 最/ 相关/ 的/ Top/ -/ k/ 个/ POI/ 点/ ./ 提出/ 的/ 方法/ 同样/ 使用/ 编辑/ 距离/ 来/ 度量/ 关键词/ 之间/ 的/ 相似性/ ./ 然而/ ,/ 与/ 现有/ 方法/ 相比/ ,/ 该/ 方法/ 不/ 需要/ 设定/ 阈值/ ,/ 而是/ 将/ 编辑/ 距离/ 融入/ 到/ 结果/ 的/ 排序/ 函数/ 中/ ,/ 因此/ 比/ 现有/ 的/ 方法/ 更加/ 灵活/ ./ 另一方面/ ,/ 本文/ 提出/ 的/ 方法/ 能够/ 根据/ 排序/ 函数/ 找到/ 精确/ 的/ Top/ -/ k/ 结果/ ,/ 避免/ 了/ 近似算法/ 可能/ 引入/ 的/ 错误/ ./ 提供/ 空间数据/ 上/ 的/ Top/ -/ k/ 关键词/ 模糊/ 查询/ 存在/ 以下几点/ 挑战/ :/ 首先/ ,/ 需要/ 设计/ 支持/ 容错/ 的/ 相关性/ 函数/ ,/ 从而/ 判断/ 哪些/ POI/ 点/ 与/ 查询/ 更加/ 相关/ ;/ 其次/ ,/ 需要/ 设计/ 高效/ 的/ Top/ -/ k/ 算法/ ,/ 为/ 移动用户/ 返回/ 实时/ 的/ 查询/ 结果/ ./ 针对/ 这些/ 挑战/ ,/ 本文/ 首先/ 提出/ 了/ 一种/ 新型/ 的/ 相关性/ 函数/ ,/ 综合/ 考虑/ 编辑/ 距离/ 、/ 关键词/ 权重/ 和/ 空间/ 距离/ ./ 给定/ 相关性/ 函数/ ,/ 设计/ 了/ 一种/ 有效/ 的/ 结构/ RegionTrie/ 对/ 空间/ 数据库/ 中/ 的/ POI/ 点/ 进行/ 索引/ ,/ 该/ 索引/ 根据/ 文本/ 的/ 前缀/ 和/ 空间/ 分布/ 将/ 数据/ 中/ 的/ POI/ 点/ 组织/ 成/ 一个/ 层次/ 的/ 结构/ ./ 基于/ RegionTrie/ ,/ 我们/ 设计/ 了/ 高效/ 的/ Top/ -/ k/ 算法/ ,/ 该/ 算法/ 可以/ 通过/ 增量/ 的/ 方式/ 对/ 编辑/ 距离/ 进行/ 计算/ ,/ 并/ 有效/ 地/ 估计/ 查询/ 与/ POI/ 点/ 的/ 空间/ 距离/ ./ 此外/ ,/ 本文/ 还/ 设计/ 了/ 有效/ 的/ 剪枝/ 策略/ ,/ 从而/ 进一步提高/ 算法/ 的/ 效率/ ./ 综上所述/ ,/ 本文/ 的/ 贡献/ 在于/ :/ (/ 1/ )/ 首次/ 提出/ 了/ 空间数据/ 上/ 的/ Top/ -/ k/ 关键词/ 模糊/ 查询/ 问题/ ,/ 从而/ 支持/ 查询/ 的/ 容错/ ./ (/ 2/ )/ 提出/ 了/ 有效/ 的/ 索引/ 结构/ RegionTrie/ ,/ 并/ 基于/ 该/ 结构设计/ 了/ 高效/ 的/ Top/ -/ k/ 算法/ ./ (/ 3/ )/ 在/ 真实/ 数据/ 集上/ 进行/ 了/ 实验/ ,/ 实验/ 结果表明/ ,/ 提出/ 的/ 方法/ 具有/ 很/ 高/ 的/ 检索/ 效率/ ./ 本文/ 第/ 2/ 节对/ 相关/ 的/ 工作/ 进行/ 综述/ ;/ 第/ 3/ 节/ 给出/ 问题/ 的/ 形式化/ 描述/ ;/ 第/ 4/ 节/ 提出/ RegionTrie/ 的/ 索引/ 结构/ ,/ 并/ 给出/ 基于/ 该/ 索引/ 的/ Top/ -/ k/ 算法/ ;/ 第/ 5/ 节/ 进一步/ 对/ Top/ -/ k/ 算法/ 进行/ 优化/ ,/ 提出/ 增量/ 计算/ 的/ 方案/ ;/ 第/ 6/ 节/ 报告/ 实验/ 的/ 结果/ ;/ 最后/ ,/ 第/ 7/ 节对/ 全文/ 进行/ 总结/ ./ 2/ 相关/ 工作/ 本节/ 对/ 两/ 方面/ 的/ 相关/ 工作/ :/ 空间数据/ 上/ 的/ 关键词/ 检索/ 和/ 字符串/ 近似/ 查询/ 进行/ 综述/ ./ 空间数据/ 上/ 的/ 关键词/ 检索/ 得到/ 了/ 非常/ 广泛/ 的/ 研究/ [/ 1/ -/ 11/ ]/ ./ 根据/ 查询/ 模型/ 的/ 不同/ 可以/ 将/ 现有/ 研究/ 分为/ :/ (/ 1/ )/ k/ 近邻/ 查询/ ,/ 返回/ 与/ 查询/ 文本/ 相关/ 且/ 距离/ 最近/ 的/ k/ 个/ POI/ 结果/ ./ 这方面/ 现有/ 的/ 工作/ 多/ 将/ 文本/ 索引/ 融合/ 到/ 空间/ 的/ R/ 树/ 索引/ 中/ [/ 3/ ,/ 5/ ]/ ;/ (/ 2/ )/ 区域/ 查询/ ,/ 返回/ 与/ 查询/ 文本/ 上/ 相关/ 且/ 空间/ 上/ 在/ 一定/ 区域/ 内/ 的/ POI/ 结果/ [/ 1/ -/ 2/ ]/ ./ 为了/ 支持/ 容错/ ,/ Yao/ 等/ 人/ [/ 6/ ]/ 提出/ 了/ 空间数据/ 上/ 的/ 字符串/ 近似/ 匹配/ 方法/ ,/ 通过/ 设定/ 编辑/ 距离/ 的/ 最大/ 阈值/ 找到/ 与/ 查询/ 关键词/ 不/ 一定/ 完全一致/ 的/ POI/ 点/ ,/ 并/ 基于/ R/ 树/ 给出/ 了/ 一种/ 近似/ 的/ 检索/ 算法/ ./ 与/ 现有/ 的/ 研究/ 相比/ ,/ 本文/ 主要/ 研究/ Top/ -/ k/ 关键词/ 模糊/ 查询/ 问题/ ,/ 将/ 编辑/ 距离/ 融合/ 到/ 排序/ 的/ 相关性/ 函数/ 中/ ,/ 因而/ 无需/ 给定/ 编辑/ 距离/ 的/ 阈值/ ,/ 提供/ 了/ 更加/ 灵活/ 的/ 查询/ 容错/ 方式/ ;/ 同时/ ,/ 研究/ 精确/ 的/ Top/ -/ k/ 算法/ ,/ 避免/ 了/ 近似算法/ 带来/ 的/ 错误/ ./ 字符串/ 近似/ 查询/ 也/ 得到/ 了/ 广泛/ 的/ 研究/ [/ 12/ -/ 17/ ]/ ,/ 主要/ 考虑/ 给定/ 一组/ 字符串/ ,/ 如何/ 从中/ 找到/ 与/ 查询/ 字符串/ 最/ 相似/ 的/ 字符串/ ./ 很多/ 工作/ 都/ 使用/ 编辑/ 距离/ 来衡/ Page3/ 量/ 字符串/ 的/ 相似性/ ,/ 计算/ 相似性/ 大于/ 一定/ 阈值/ 的/ 字符串/ ./ Xiao/ 等/ 人/ [/ 11/ ]/ 讨论/ 了/ 一种/ Top/ -/ k/ 方法/ ,/ 即/ 找到/ 与/ 查询/ 最/ 相似/ 的/ k/ 个/ 字符串/ ,/ 其/ 基本/ 的/ 思路/ 是/ 不断/ 地/ 变化/ 编辑/ 距离/ 的/ 阈值/ ,/ 从而/ 找到/ 前/ k/ 个/ 结果/ ./ 本文/ 讨论/ 的/ 问题/ 与/ 字符串/ 近似/ 查询/ 也/ 有着/ 显著/ 的/ 不同/ ./ 除了/ 文本/ 相似性/ ,/ 本文/ 研究/ 的/ 问题/ 需要/ 进一步/ 考虑/ 空间/ 距离/ ,/ 因为/ 其/ 更为/ 复杂/ ./ 3/ 问题/ 的/ 形式化/ 描述/ 数据模型/ :/ 空间/ 数据库/ 中/ 的/ 一组/ POI/ 对象/ O/ =/ {/ o1/ ,/ o2/ ,/ …/ ,/ o/ |/ O/ |/ }/ ./ 其中/ 任一/ 对象/ o/ ∈/ O/ 包含/ 空间/ 位置/ 信息/ l/ 和/ 文本/ 信息/ T/ ,/ 表示/ 为/ o/ =/ (/ l/ ,/ T/ )/ ./ 具体来说/ ,/ 空间信息/ o/ / l/ 为/ 二维/ 空间/ 内/ 的/ 地理位置/ 点/ (/ xl/ ,/ yl/ )/ ;/ 本文/ 信息/ o/ / T/ =/ {/ t1/ ,/ t2/ ,/ …/ ,/ t/ |/ T/ |/ }/ 为/ 一组/ 关键词/ 的/ 集合/ ./ 每个/ 关键词/ t/ ∈/ o/ / T/ 都/ 带有/ 一个/ 权重/ w/ (/ t/ )/ ,/ 用来/ 表示/ 关键词/ t/ 对于/ o/ 的/ 重要/ 程度/ ./ 本文/ 采用/ 信息检索/ 领域/ 经典/ 的/ TF/ -/ IDF/ 模型/ 计算/ 关键词/ 的/ 权重/ ,/ 即/ 其中/ ,/ 词频/ tf/ (/ t/ ,/ T/ )/ 为/ t/ 出现/ 在/ o/ / T/ 中/ 的/ 频率/ count/ (/ t/ ,/ T/ )/ |/ T/ |/ ;/ 逆/ 文档/ 频率/ idf/ (/ t/ ,/ O/ )/ 为/ 包含/ 关键词/ t/ 的/ 对象/ 个数/ 的/ 倒数/ ,/ 可以/ 通过/ log/ |/ O/ |/ 行/ 计算/ ./ 图/ 1/ 给出/ 了/ 7/ 个/ 对象/ o1/ ~/ o7/ 的/ 示例/ ,/ 以/ 对象/ o1/ 为例/ ,/ 它/ 包含/ 了/ 空间/ 上/ 的/ 一个/ 位置/ 点/ 和/ 两个/ 关键词/ t1/ 和/ t2/ ./ 通过/ 式/ (/ 1/ )/ ,/ 可以/ 计算/ 出/ 这/ 两个/ 关键词/ 的/ 权重/ ./ 图/ 1/ 空间数据/ 上/ Top/ -/ k/ 模糊/ 关键词/ 查询/ 示例/ 查询/ 模型/ :/ 空间/ 相关/ 的/ 关键词/ 查询/ q/ ,/ 同样/ 包含/ 空间/ 位置/ q/ / l/ 和/ 文本/ 信息/ q/ / T/ ./ 为了/ 对/ 问题/ 进行/ 简化/ ,/ 本文/ 主要/ 讨论/ 单/ 关键词/ 的/ 情况/ ,/ 即/ 查询/ q/ 仅/ 包含/ 一个/ 关键词/ q/ / t/ ,/ 并/ 把/ 多/ 关键词/ 查询/ 问题/ 作为/ 下/ 一步/ 的/ 研究/ 工作/ ./ 查询/ 的/ 结果/ 是/ 集合/ O/ 中/ 在/ 空间/ 和/ 文本/ 上/ 都/ 与/ 查询/ q/ 最/ 相关/ 的/ 前/ k/ 个/ 对象/ (/ 简称/ 为/ Top/ -/ k/ 结果/ )/ ./ 下面/ 具体/ 定义/ 文本/ 和/ 空间/ 相关性/ ./ 对于/ 文本/ ,/ 本文/ 允许/ 查询/ 关键词/ q/ / t/ 与/ 对象/ 中/ 的/ 关键词/ o/ / t/ 不/ 完全一致/ ,/ 存在/ 微小/ 的/ 差异/ ./ 具体来说/ ,/ 

