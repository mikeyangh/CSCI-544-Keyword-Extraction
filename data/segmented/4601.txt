Page1/ 一种/ 基于/ 多/ 约束/ 组合/ 的/ 多/ 租户/ 系统配置/ 测试/ 技术/ 侯可佳/ 白晓颖周/ 立柱/ (/ 清华大学/ 计算机科学/ 与/ 技术/ 系/ 北京/ 100084/ )/ (/ 清华大学/ 信息科学/ 与/ 技术/ 国家/ 实验室/ 北京/ 100084/ )/ 摘要/ 通过/ 灵活/ 配置/ 实现/ 在线/ 软件/ 定制/ 是/ 多/ 租户/ (/ Multi/ -/ TenancyArchitecture/ ,/ MTA/ )/ 软件/ 即/ 服务/ (/ Software/ -/ as/ -/ a/ -/ Service/ ,/ SaaS/ )/ 系统/ 的/ 一个/ 重要/ 特征/ ./ 由于/ 参数/ 和/ 行为/ 配置/ 的/ 复杂/ 多样/ ,/ 配置/ 错误/ 是/ 系统/ 质量/ 所/ 面临/ 的/ 主要/ 风险/ 之一/ ./ 对/ 各种/ 配置/ 的/ 组合/ 测试/ ,/ 是/ MTASaaS/ 系统/ 测试/ 的/ 一个/ 重要/ 内容/ ./ 该文/ 针对/ 配置/ 之间/ 的/ 约束/ 依赖/ 关系/ ,/ 提出/ 建立/ 约束/ 依赖图/ ,/ 利用/ 图/ 搜索算法/ 获取/ 具有/ 依赖/ 关联/ 的/ 配置/ 项/ 集合/ ,/ 采用/ 组合/ 测试/ 算法/ ,/ 生成/ 不同/ 的/ 配置/ 测试/ 场景/ ,/ 满足/ 多/ 配置/ 组合/ 覆盖率/ 要求/ ./ 实验/ 以多/ 租户/ 游戏/ 系统/ 为例/ ,/ 对比/ 多种/ 测试/ 生成/ 算法/ ,/ 实验/ 显示/ 该/ 方法/ 在/ 检测/ 由/ 约束/ 违反/ 引起/ 的/ 系统/ 缺陷/ 方面/ 有/ 显著/ 改善/ 效果/ ./ 关键词/ 约束/ 组合/ ;/ 多/ 租户/ 系统/ ;/ 配置/ 测试/ ;/ 数据/ 生成/ ;/ 组合/ 测试/ 算法/ 1/ 引言/ 针对/ 特定/ 的/ 领域/ 应用/ ,/ 多/ 租户/ 软件/ 即/ 服务/ (/ Multi/ -/ TenancySoftware/ -/ as/ -/ a/ -/ Service/ ,/ MTASaaS/ )/ 提供/ 基于/ 共享/ 的/ 、/ 可/ 重用/ 的/ 基础/ 数据/ 和/ 基础/ 代码/ ,/ 定制/ 特定/ 的/ 应用/ 系统/ 的/ 服务/ ,/ 其/ 目标/ 是/ 在/ 保证/ 用户/ 个性化/ 的/ 同时/ 尽可能/ 地/ 将/ 资源共享/ 最大化/ ./ 这种/ 多/ 租户/ 资源共享/ 、/ 租户/ 应用/ 定制/ 和/ 隔离/ 的/ 模式/ ,/ 可以/ 大幅度/ 减少/ 用户/ 构建/ 和/ 维护/ 系统/ 的/ 代价/ ,/ 成为/ 云/ 计算/ 软件/ 服务/ 系统/ 的/ 一个/ 主要/ 发展趋势/ [/ 1/ ]/ ./ 例如/ Salesforce/ ./ com/ 作为/ 目前/ 最具/ 代表性/ 的/ SaaS/ 提供商/ 之一/ ,/ 其/ 用户/ 关系/ 管理/ (/ CustomerRelationManagement/ ,/ CRM/ )/ 服务/ 在/ 云/ 平台/ 上/ 能够/ 同时/ 对/ 全球/ 超过/ 100000/ 家/ 企业/ 提供/ 业务/ 支持/ ./ 1.1/ SaaS/ 系统/ 可/ 配置/ 性/ 分析/ 设计/ 良好/ 的/ MTASaaS/ 系统/ 可/ 在/ 数据/ 、/ 行为/ 、/ 用户界面/ 等/ 多个/ 层面/ 支持/ 用户/ 的/ 定制/ 需求/ [/ 2/ ]/ ./ 例如/ ,/ Salesforce/ 利用/ 元/ 数据/ 驱动/ 方法/ ,/ 实现/ 了/ 共享/ 数据库/ 和/ 数据/ 模式/ [/ 3/ ]/ ;/ GoogleAppEngine/ ①/ 采用/ 命名/ 空间/ 机制/ 来/ 区分/ 租户/ 的/ 数据/ 和/ 行为/ ./ MTA/ 架构/ 通常/ 包括/ 两个/ 部分/ :/ (/ 1/ )/ 通用/ 的/ 基础/ 代码/ ,/ 基础/ 代码/ 中/ 包含/ 有/ 丰富/ 的/ 领域/ 知识/ ,/ 包括/ 元/ 数据/ 和/ 业务/ 规则/ 等/ 内容/ ;/ (/ 2/ )/ 定制/ 机制/ ,/ 该/ 机制/ 能够/ 满足/ 不同/ 用户/ 的/ 特定/ 需求/ ./ 可/ 配置/ 性是/ MTA/ 设计/ 的/ 基础/ ,/ 与/ 大多数/ 软件系统/ 中/ 简单/ 直接/ 的/ 参数/ 配置/ 相比/ ,/ MTASaaS/ 的/ 配置/ 需要/ 更加/ 灵活/ 、/ 动态/ 地/ 在/ 基础/ 代码/ 中/ 注入/ 数据/ 、/ 条件/ 规则/ 和/ 行为/ ,/ 实现/ 应用/ 的/ 定制/ ,/ 其/ 配置/ 测试/ 也/ 面临/ 着/ 用户/ 种类/ 和/ 配置/ 场景/ 复杂/ 、/ 缺乏/ 内置/ 的/ 可/ 测试/ 性/ 等/ 挑战/ ./ 传统/ 可/ 配置/ 软件/ 和/ MTASaaS/ 的/ 具体/ 区别/ 包括/ :/ (/ 1/ )/ 传统/ 软件/ 的/ 可/ 配置/ 项/ 主要/ 是/ 简单/ 的/ 参数/ 配置/ ,/ 并且/ 大部分/ 配置/ 项均/ 提供/ 候选/ 项供/ 用户/ 选择/ ,/ 可/ 配置/ 项/ 的/ 数量/ 也/ 非常/ 有限/ ./ MTASaaS/ 则/ 存在/ 大量/ 的/ 可/ 配置/ 项/ ,/ 这些/ 配置/ 项/ 将/ 不再/ 局限于/ 简单/ 的/ 参数值/ 的/ 修改/ ,/ 用户/ 甚至/ 可以/ 根据/ 自己/ 的/ 需求/ 增加/ 数据项/ ,/ 对/ 服务/ 提供/ 的/ API/ 进行/ 重新/ 组装/ 以/ 完成/ 特定/ 任务/ 等/ ./ (/ 2/ )/ 传统/ 软件/ 的/ 配置/ 参数/ 在/ 软件/ 编译/ 时即/ 被/ 固化/ 在/ 软件/ 代码/ 中/ ./ 多/ 租户/ 系统/ 中/ ,/ 除/ 静态/ 编译/ 的/ 参数/ 配置/ 外/ ,/ 还/ 支持系统/ 行为/ 动态/ 的/ 配置/ ./ 这些/ 配置/ 内容/ ,/ 独立/ 于/ 系统/ 的/ 基础/ 代码/ ,/ 在/ 系统/ 运行/ 过程/ 中/ ,/ 动态/ 载入/ ./ 这样/ ,/ 既保证/ 了/ 基础/ 代码/ 对/ 所有/ 租户/ 的/ 一致性/ ,/ 又/ 可/ 保证/ 租户/ 可以/ 配置/ 其/ 特定/ 的/ 应用/ 行为/ ;/ 且/ 租户/ 特定/ 的/ 行为/ 更改/ 时/ ,/ 不会/ 影响/ 基础/ 代码/ ,/ 保证/ 了/ 不同/ 租户/ 之间/ 的/ 隔离/ ./ 例如/ ,/ 客户关系/ 管理系统/ (/ CRM/ )/ 是/ Salesforce/ 公司/ 在/ Force/ ./ com/ 平台/ 上/ 提供/ 的/ SaaS/ 服务/ ,/ 它/ 为/ 用户/ 提供/ 了/ 丰富/ 的/ 可/ 配置/ 选项/ ,/ 用户/ 根据/ 各自/ 的/ 需求/ 和/ 喜好/ 对/ 这些/ 可选项/ 进行/ 配置/ ,/ 即可/ 获得/ 满足/ 其/ 需求/ 的/ 应用/ 实例/ ./ Force/ ./ com/ 的/ CRM/ 服务/ 配置/ 包括/ :/ (/ 1/ )/ 用户界面/ 的/ 配置/ ./ 对于/ 以/ 表格/ 为/ 主体/ 的/ 界面/ ,/ 例如/ 联系人/ 列表/ 界面/ ,/ 用户/ 可以/ 选择/ 显示/ 或/ 隐藏/ 其中/ 的/ 某些/ 列/ ,/ 或者/ 改变/ 列/ 的/ 顺序/ ,/ 或者/ 通过/ 编写/ 过滤/ 规则/ ,/ 选择/ 需要/ 显示/ 的/ 记录/ ;/ 对于/ 其他/ 类型/ 的/ 界面/ ,/ 例如/ 联系人/ 详细信息/ 界面/ ,/ 用户/ 可以/ 通过/ 自己/ 的/ 喜好/ 更改/ 页面/ 布局/ ,/ 例如/ 改变/ 页面/ 组件/ 的/ 位置/ 、/ 颜色/ 、/ 形状/ 等/ ./ (/ 2/ )/ 用户/ 管理/ ./ 服务/ 管理员/ 可以/ 根据/ 人员/ 组织/ 结构/ 为/ 服务/ 添加/ 用户/ 、/ 为/ 用户/ 分组/ 、/ 为/ 用户/ 分配/ 不同/ 的/ 角色/ ,/ 根据/ 角色/ 的/ 不同/ ,/ 为/ 用户/ 赋予/ 不同/ 的/ 使用/ 权限/ ./ (/ 3/ )/ 数据管理/ ./ Force/ ./ com/ 是/ 元/ 数据/ 驱动/ 体系/ 架构/ ,/ 因此/ 数据/ 配置/ 是/ Force/ ./ com/ 的/ 核心内容/ ./ 用户/ 通过/ 增加/ 自定义/ 对象/ 来/ 存储/ 组织/ 用户/ 特有/ 的/ 数据/ ,/ 自定义/ 对象/ 创建/ 成功/ 后/ ,/ 便/ 能够/ 进一步/ 创建/ 自定义/ 选项卡/ 、/ 报表/ 、/ 仪表板/ 等/ ,/ 使/ 用户/ 能够/ 对/ 自定义/ 对象/ 进行/ 交互/ 操作/ ./ Force/ ./ com/ 并/ 没有/ 为/ 用户/ 数据/ 创建/ 实际/ 的/ 数据库/ 表格/ ,/ 而/ 只是/ 存储/ 相关/ 的/ 元/ 数据/ ,/ 在/ 服务/ 运行/ 时/ ,/ 利用/ 这些/ 元/ 数据/ 动态/ 的/ 生成/ 用户/ 数据/ 表格/ ./ (/ 4/ )/ 应用程序/ 管理/ ./ 当/ Force/ ./ com/ 平台/ 所/ 提供/ 的/ 服务/ 无法/ 满足用户/ 需求/ 时/ ,/ 用户/ 还/ 可以/ 在/ 自定义/ 对象/ 的/ 基础/ 上/ ,/ 利用/ 平台/ 提供/ 的/ API/ 开发/ 所/ 需/ 服务/ ,/ 完成/ 用户/ 需要/ 的/ 特殊/ 服务/ ./ 1.2/ SaaS/ 系统故障/ 模式分析/ MTA/ 共享/ // 隔离/ 机制/ 可能/ 给/ 系统/ 的/ 质量/ 、/ 性能/ 和/ 安全/ 带来/ 风险/ [/ 2/ ]/ ./ SaaS/ 平台/ 的/ 可靠性/ 、/ 可用性/ 和/ 安全性/ 等/ 对/ 大量/ 多/ 租户/ 应用/ 的/ 可靠/ 安全/ 至关重要/ ,/ 因此/ ,/ 在/ 各种/ 租户/ 场景/ 下/ ,/ 验证/ 和/ 测试/ 系统/ 行为/ 的/ 正确性/ 、/ 鲁棒性/ ,/ 是/ MTASaaS/ 系统/ 开发/ 的/ 一个/ 重要环节/ ./ 基于/ 对/ 多/ 租户/ 体系/ 架构/ 的/ 分析/ ,/ MTASaaS/ 的/ 故障/ 能够/ 划分/ 为/ 如下/ 4/ 类/ :/ MTA/ 数据库/ 故障/ 、/ 通用/ ①/ GoogleAppEngine/ ./ http/ :/ // // code/ ./ google/ ./ com/ // appengine/ // Page3/ 基础/ 代码/ 故障/ 、/ 配置/ 故障/ 以及/ 运行/ 故障/ ./ (/ 1/ )/ 数据库/ 故障/ ./ 多/ 租户/ 数据库/ 的/ 设计/ 对于/ 确保/ 公共/ 共享/ 数据/ 和/ 应用/ 专用/ 数据/ 的/ 完整性/ 、/ 正确性/ 和/ 安全性/ 至关重要/ [/ 4/ ]/ ./ 不同/ 租户/ 数据/ 的/ 共享/ 和/ 隔离/ 均/ 可能/ 引发/ 不可/ 预见/ 的/ 故障/ ./ (/ 2/ )/ 通用/ 基础/ 代码/ 故障/ ./ 通用/ 基础/ 代码/ 对于/ 所有/ 的/ 租户/ 都/ 是/ 一致/ 的/ ,/ 其中/ 包含/ 了/ 系统/ 的/ 规则/ 和/ 行为/ 等/ 内容/ ./ 通过/ 对/ 基础/ 代码/ 的/ 重用/ ,/ 能够/ 大大降低/ 每个/ 应用程序/ 的/ 开发/ 和/ 维护费用/ ./ 同时/ ,/ 基础/ 代码/ 的/ 质量/ 也/ 成为/ SaaS/ 系统/ 质量/ 的/ 基础/ ./ (/ 3/ )/ 配置/ 故障/ ./ 丰富/ 多样/ 的/ 可/ 配置/ 组件/ 是/ 实现/ MTASaaS/ 的/ 关键/ ,/ 同时/ ,/ 配置/ 的/ 多样性/ 和/ 动态性/ 又/ 是/ 极易/ 引发/ 故障/ 的/ 因素/ ./ 配置/ 故障/ 是/ 本文/ 的/ 主要/ 研究/ 重点/ ,/ 且/ 会/ 在/ 论文/ 的/ 后续/ 部分/ 进行/ 详细/ 讨论/ ./ (/ 4/ )/ 运行/ 故障/ ./ 不同/ 租户/ 应用/ 实例/ 的/ 执行/ 均/ 可能/ 会/ 对/ 彼此/ 产生/ 影响/ ,/ 特别/ 是/ 当/ 存在/ 大量/ 不同/ 的/ 租户/ 配置/ 时/ ,/ 运行/ 行为/ 更加/ 难以预料/ 和/ 控制/ ./ 在/ 以上/ 4/ 类/ MTASaaS/ 系统/ 的/ 故障/ 类型/ 中/ ,/ 本文/ 将/ 着重/ 研究/ 配置/ 故障/ ./ 分析/ 研究/ 表明/ ,/ 配置/ 故障/ 主要/ 由/ 以下/ 几/ 方面/ 原因/ 引起/ :/ (/ 1/ )/ 未能/ 合理/ 满足/ 系统/ 的/ 约束条件/ ./ 设定/ 配置/ 参数/ 常常/ 需要/ 大量/ 的/ 系统/ 领域/ 知识/ ,/ 以/ 满足/ 特定/ 的/ 约束条件/ ,/ 部分/ 约束条件/ 为/ 系统/ 的/ 隐含/ 假定/ ,/ 或是/ 内嵌/ 在/ 基础/ 代码/ 中/ ,/ 由于/ 文档/ 不/ 完善/ 、/ 理解/ 错误/ 、/ 或是/ 系统安全/ 保护/ 不够/ 等/ 原因/ ,/ 常常/ 由于/ 约束条件/ 不/ 符合/ 而/ 造成/ 租户/ 应用/ 错误/ ./ (/ 2/ )/ 未能/ 满足/ 多/ 配置/ 之间/ 的/ 依赖/ 关系/ ./ 多/ 参数/ 的/ 配置/ 常常/ 相互/ 制约/ 相互影响/ ,/ 参数/ 的/ 配置/ 除了/ 满足/ 本身/ 的/ 限制/ 之外/ ,/ 还/ 需/ 保持/ 全局/ 的/ 合理性/ ;/ 而/ 一组/ 相互/ 关联/ 的/ 参数/ 之间/ ,/ 由于/ 配置/ 的/ 不/ 匹配/ 所/ 造成/ 的/ 错误/ ,/ 也/ 是/ 系统故障/ 的/ 主要/ 原因/ 之一/ ./ 这种/ 依赖/ 关系/ 的/ 定义/ 通常/ 分散/ 在/ 各个/ 参数/ 的/ 定义/ 中/ ,/ 或是/ 隐含/ 的/ 系统/ 假设/ 中/ ,/ 容易/ 被忽视/ 从而/ 导致/ 出错/ ./ 1.3/ 主要/ 贡献/ 针对/ 上述/ 问题/ ,/ 本文/ 从/ 以下/ 两个/ 方面/ 提出/ 了/ 一种/ 新/ 的/ MTASaaS/ 系统配置/ 测试方法/ ./ (/ 1/ )/ 提出/ 了/ 约束/ 依赖图/ (/ ConstraintsDependencyGraph/ ,/ CDG/ )/ ,/ 作为/ 约束条件/ 的/ 分析/ 工具/ ./ CDG/ 模型/ 识别/ 主要/ 的/ 配置/ 项/ 及其/ 约束条件/ ,/ 并/ 将/ 其/ 相互/ 关联/ 起来/ ./ 每个/ 配置/ 项/ 可能/ 定义/ 多种/ 约束条件/ ,/ 每个/ 约束条件/ 可能/ 包含/ 多个/ 配置/ 项/ ./ 这样/ ,/ CDG/ 的/ 每个/ 连通/ 子图/ 就/ 构成/ 了/ 一组/ 相互依赖/ 的/ 配置/ 项/ ./ 测试/ 设计/ 转化/ 为/ 可达图/ 搜索/ 问题/ ,/ 并/ 设计/ 生成/ 测试用例/ 以/ 满足/ 每个/ 连通/ 子图/ 上/ 的/ 所有/ 约束/ 依赖/ 关系/ ./ (/ 2/ )/ 提出/ 了/ 约束/ 的/ 组合/ 测试方法/ ./ 当/ 参数/ 和/ 约束条件/ 较/ 多/ 、/ 依赖/ 关系/ 复杂/ 时/ ,/ 全/ 覆盖/ 测试/ 常常/ 会/ 引起/ 组合/ 爆炸/ 问题/ ./ 本文/ 采用/ 组合/ 测试/ 的/ 思想/ ,/ 设计/ 对于/ 约束条件/ 的/ 组合/ 方法/ ,/ 以便/ 在/ 较/ 小/ 的/ 测试/ 代价/ 下/ 达到/ 较/ 高/ 的/ 覆盖率/ 要求/ ,/ 并/ 能/ 有效/ 的/ 提高/ 系统/ 缺陷/ 检测/ 能力/ ./ 本文/ 第/ 2/ 节以/ 一个/ 游戏/ 系统/ 为例/ ,/ 分析/ 了/ MTASaaS/ 的/ 配置/ 测试/ 问题/ ,/ 并/ 对/ 问题/ 进行/ 形式化/ 定义/ 和/ 描述/ ;/ 第/ 3/ 节/ 提出/ 约束/ 依赖图/ ;/ 第/ 4/ 节/ 讨论/ 约束/ 组合/ 测试方法/ ;/ 第/ 5/ 节/ 报告/ 实验/ 过程/ 及其/ 结果/ ;/ 第/ 6/ 节对/ 相关/ 工作/ 进行/ 总结/ 和/ 讨论/ ;/ 最后/ ,/ 第/ 7/ 节是/ 对/ 本文/ 研究/ 工作/ 的/ 总结/ 讨论/ ./ 2/ 问题/ 定义/ 2.1/ 案例/ 分析/ 电子游戏/ 制造器/ (/ ArcadeGameMaker/ ,/ AGM/ )/ 是/ 一个/ 教学系统/ ①/ ,/ 用于/ 学生/ 实践/ 生产线/ 体系/ 架构/ (/ Product/ -/ LineArchitecture/ ,/ PLA/ )/ ./ 本文/ 将/ 其/ 重构/ 后/ ,/ 形成/ 一个/ 在线/ 的/ MTASaaS/ 系统/ MTA/ -/ AGM/ ,/ 其/ 可/ 在/ 同一/ 游戏/ 平台/ 上/ ,/ 支持/ 配置/ 静止/ 物体/ 、/ 移动/ 物体/ 、/ 物体/ 碰撞/ 规则/ 、/ 游戏/ 得分/ 规则/ 等/ 多种/ 特性/ ,/ 动态/ 生成/ 多种类型/ 的/ 游戏/ 应用/ ./ 图/ 1/ 对比/ 了/ PLA/ 和/ MTA/ 两种/ 不同/ 的/ 体系/ 架构/ 实现/ 方法/ ./ PLA/ 设计/ 中/ ,/ 所有/ 游戏/ 产品/ 共享/ 同一个/ 核心/ 程序包/ ,/ 不同/ 的/ 游戏/ 产品/ 对/ 基础/ 程序包/ 进行/ 扩展/ ,/ 形成/ 不同/ 的/ 单独/ 编译/ 图/ 1AGM/ 系统/ PLA/ 与/ MTA/ 体系结构/ 对比/ ①/ ArcadeGameMakerPedagogicalProductLine/ ./ http/ :/ // // Page4/ 的/ 游戏/ 程序包/ ./ MTA/ 系统/ 则/ 只/ 包含/ 一个/ 代码/ 程序包/ ,/ 通过/ 系统配置/ ,/ 在线/ 生成/ 不同/ 的/ 游戏/ 实例/ ./ 游戏/ 中/ 物体/ 行为/ 的/ 配置/ 利用/ 了/ Java/ 的/ 反射/ 机制/ 实现/ 动态/ 重新/ 加载/ 类/ 和/ 动态/ 编译/ ./ AGM/ 游戏/ 定义/ 了/ 一系列/ 静止/ 物体/ 和/ 移动/ 物体/ ,/ 移动/ 物体/ 包含/ 可控/ 移动/ 物体/ 和/ 不/ 可控/ 移动/ 物体/ ./ 游戏/ 者/ 通过/ 控制/ 可控/ 移动/ 物体/ ,/ 使/ 其/ 与/ 其他/ 物体/ 发生/ 碰撞/ 从而/ 得分/ ./ 租户/ 可以/ 根据/ 各自/ 的/ 需求/ 设置/ 不同/ 的/ 物体/ 行为/ 和/ 游戏/ 机制/ 来/ 实现/ 游戏/ 的/ 个性化/ 定制/ ./ MTA/ -/ AGM/ 游戏/ 系统/ 的/ 可/ 配置/ 项/ 包括/ :/ (/ 1/ )/ 游戏/ 背景/ 属性/ ./ 游戏/ 背景/ 限定/ 了/ 移动/ 物体/ 的/ 可/ 移动/ 范围/ ./ 在/ 游戏/ 过程/ 中/ ,/ 当/ 移动/ 物体/ 超出/ 游戏/ 背景/ 的/ 范围/ 时/ ,/ 游戏/ 者/ 失败/ ,/ 游戏/ 结束/ ./ 游戏/ 背景/ 可以/ 设置/ 为/ 不同/ 的/ 大小/ 和/ 颜色/ ./ (/ 2/ )/ 物体/ 属性/ ./ 静止/ 物体/ 和/ 移动/ 物体/ 包含/ 一组/ 通用/ 属性/ ,/ 例如/ 物体/ 位置/ 、/ 大小/ 、/ 颜色/ 等/ ./ 除此之外/ ,/ 移动/ 物体/ 还有/ 一些/ 独特/ 属性/ ,/ 例如/ 移动/ 速度/ 和/ 移动/ 方向/ 等/ ./ (/ 3/ )/ 物体/ 行为/ ./ 碰撞/ 规则/ 定义/ 了/ 每个/ 物体/ 在/ 碰撞/ 之后/ 的/ 行为/ ./ 对于/ 静止/ 物体/ 而言/ ,/ 碰撞/ 之后/ 物体/ 的/ 动作/ 包括/ 消失/ 和/ 不变/ ;/ 而/ 移动/ 物体/ ,/ 除了/ 消失/ 和/ 不变/ 之外/ ,/ 还有/ 3/ 种/ 动作/ 行为/ ,/ 即/ 垂直/ 反弹/ 、/ 水平/ 反弹/ 、/ 以及/ 全/ 反弹/ ./ (/ 4/ )/ 游戏/ 机制/ ./ 游戏/ 机制/ 包括/ 碰撞/ 动作/ 的/ 具体/ 定义/ 、/ 游戏/ 者/ 的/ 得分/ 规则/ 等等/ ./ 本/ 研究/ 将/ 在/ 实验/ 过程/ 中/ ,/ 将/ 这些/ 配置/ 项/ 设置/ 为/ 固定/ 取值/ ,/ 主要/ 针对/ 上述/ 3/ 类/ 配置/ 项/ 进行/ 配置/ 测试/ ,/ 考察/ 这些/ 配置/ 项/ 之间/ 不同/ 的/ 取值/ 组合/ 对/ 测试/ 的/ 影响/ ./ 2.2/ 问题/ 定义/ 给定/ 一个多/ 租户/ 系统/ MTA/ -/ Service/ =/ {/ v1/ ,/ v2/ ,/ …/ ,/ vk/ }/ ,/ 其中/ vi/ (/ 1/ / i/ / k/ )/ 为/ 系统/ 的/ 可/ 配置/ 项/ ,/ 该/ 系统/ 共/ 包含/ k/ 个/ 可/ 配置/ 项/ ,/ 为/ 配置/ 项/ 赋值/ 分为/ 两种/ 情况/ :/ (/ 1/ )/ 从/ 系统/ 给定/ 的/ 候选/ 值中/ 选择/ ;/ (/ 2/ )/ 由/ 用户/ 直接/ 赋值/ ./ 租户/ 根据/ 各自/ 不同/ 的/ 需求/ 对/ 多/ 租户/ 系统/ 进行/ 配置/ ,/ 从而/ 得到/ 满足/ 其/ 要求/ 的/ 应用/ 实例/ ,/ 如/ 租户/ ti/ 对/ 该/ 系统/ 进行/ 配置/ 得到/ 的/ 应用/ 实例/ 表示/ 为/ C/ (/ S/ ,/ ti/ )/ =/ {/ ai1/ ,/ ai2/ ,/ …/ ,/ aik/ }/ ,/ 其中/ vj/ =/ aij/ (/ 1/ / j/ / k/ )/ ,/ aij/ 是/ 租户/ ti/ 为/ 第/ j/ 项/ 配置/ 项/ 设定/ 的/ 配置/ 值/ ./ 每个/ 配置/ 项/ 通常/ 具有/ 多个/ 可/ 选取/ 值/ ,/ 配置/ 项/ 的/ 取值/ 个数/ 通常/ 有/ 以下/ 几种/ 情况/ :/ (/ 1/ )/ 配置/ 项/ 的/ 取值/ 是/ 有限/ 并且/ 少量/ 的/ ./ 例如/ 在/ 上述/ 碰撞/ 游戏/ 中/ ,/ 物体/ 状态/ 配置/ 项/ 的/ 可/ 选取/ 值/ 只有/ 两个/ ,/ 即/ 移动/ 和/ 静止/ ./ (/ 2/ )/ 配置/ 项/ 的/ 取值/ 是/ 有限/ 的/ ,/ 但/ 数量/ 非常/ 大/ ./ 例如/ 在/ 800/ ×/ 600/ 的/ 背景/ 中/ ,/ 物体/ 起始/ 位置/ 横坐标/ 的/ 范围/ 为/ [/ 0/ ,/ 800/ )/ ,/ 如果/ 要求/ 坐标/ 为/ 正整数/ ,/ 则/ 横坐标/ 可能/ 的/ 取值/ 有/ 800/ 个/ ./ (/ 3/ )/ 配置/ 项/ 的/ 取值/ 是/ 无限/ 多个/ ./ 同样/ 以/ 上述/ 横坐标/ 为例/ ,/ 如果/ 其值/ 为/ 正/ 实数/ ,/ 在/ 800/ ×/ 600/ 的/ 背景/ 中/ ,/ 可能/ 的/ 取值/ 个数/ 就/ 为/ 无限/ 多个/ ./ 这些/ 配置/ 项/ 的/ 不同/ 取值/ 组合/ 能/ 构成/ 不同/ 的/ 配置/ 场景/ ,/ 产生/ 不同/ 的/ 多/ 租户/ 应用/ 实例/ ,/ 为/ 保证/ 多/ 租户/ 系统/ 在/ 各种/ 配置/ 场景/ 下/ 行为/ 的/ 正确性/ ,/ 就/ 必须/ 进行/ 充分/ 的/ 配置/ 测试/ ./ 多/ 租户/ 系统/ 的/ 各/ 配置/ 项/ 之间/ 往往/ 存在/ 各种/ 约束/ 依赖/ 关系/ ,/ 对系统/ 进行/ 配置/ 时/ ,/ 如果/ 违反/ 这些/ 约束条件/ ,/ 则/ 可能/ 引发/ 系统故障/ ./ 因此/ 在/ 测试/ 过程/ 中/ ,/ 配置/ 项/ 之间/ 的/ 约束条件/ 就/ 需要/ 作为/ 一项/ 重要/ 指标/ 进行/ 考察/ ,/ 尤其/ 是/ 多个/ 约束条件/ 的/ 组合/ ,/ 更/ 容易/ 导致/ 系统故障/ ,/ 需要/ 进行/ 重点/ 测试/ ./ 假设/ 被/ 测系统/ S/ 的/ k/ 个/ 配置/ 项/ 之间/ 具有/ m/ 条/ 约束条件/ :/ c1/ ,/ c2/ ,/ …/ ,/ cm/ ,/ 每条/ 约束条件/ 有/ 多个/ 可能/ 的/ 取值/ ,/ 不同/ 约束条件/ 的/ 不同/ 取值/ 能/ 产生/ 若干/ 不同/ 的/ 约束/ 组合/ ,/ 此/ 研究/ 的/ 目标/ 就是/ 为/ 被/ 测系统/ 的/ k/ 个/ 配置/ 项/ 求解/ N/ 种/ 不同/ 的/ 配置/ 情况/ ,/ 即/ 其中/ ,/ 要求/ X/ 能够/ 实现/ 对/ m/ 条/ 约束条件/ 强度/ 为/ 2/ 的/ 组合/ 覆盖/ ./ 该/ 组合/ 覆盖/ 要求/ 的/ 具体/ 定义/ 为/ :/ m/ 条/ 约束条件/ 中/ 的/ 任意/ 两条/ 约束条件/ ci/ 和/ cj/ 的/ 每/ 一组/ 取值/ 组合/ ,/ 至少/ 要/ 被/ 一组/ 参数/ 配置/ 所/ 覆盖/ ./ 3/ 约束/ 依赖图/ 3.1/ 约束/ 模型/ 本文/ 基于/ 多/ 租户/ 系统/ 领域/ 模型/ ,/ 提取/ 系统/ 约束/ 模型/ ,/ 约束条件/ 包括/ 参数/ 约束条件/ 、/ 动作/ 约束条件/ 以及/ 状态/ -/ 动作/ 约束条件/ ,/ 即/ Constraints/ =/ 〈/ Data/ -/ Cons/ ;/ Action/ -/ Cons/ ;/ St/ -/ Act/ -/ Cons/ 〉/ ./ 参数/ 约束条件/ Data/ -/ Cons/ 定义/ 了/ 参数/ 之间/ 的/ 约束/ 限制/ 关系/ ,/ 包括/ 对/ 单个/ 参数/ 的/ 约束条件/ 以及/ 多个/ 参数/ 之间/ 的/ 约束条件/ 的/ 定义/ ./ (/ 1/ )/ 单/ 参数/ 约束条件/ C/ (/ di/ )/ ,/ 约束条件/ 中仅/ 包含/ 一个/ 配置/ 参数/ ,/ 在/ 参数/ 数据类型/ 的/ 基础/ 上/ 描述/ 参数/ 取值/ 方面/ 的/ 约束/ 限制/ 条件/ ,/ 例如/ 对/ 数值/ 型/ 数据/ 的/ 取/ Page5/ 值/ 范围/ 的/ 限制/ 、/ 对/ 字符串/ 型/ 数据/ 的/ 长度/ 和/ 模式/ 的/ 限制/ 等/ ;/ (/ 2/ )/ 多/ 参数/ 约束条件/ ,/ 约束条件/ 中/ 包含/ 多个/ 配置/ 参数/ ,/ 其/ 表示/ 这些/ 参数/ 之间/ 的/ 约束/ 依赖/ 关系/ ,/ 约束条件/ 中/ 可以/ 包含/ 数学/ 运算符/ 、/ 谓词/ 逻辑/ 符/ 等等/ :/ ①/ 简单/ 约束/ ,/ 仅/ 包含/ 两个/ 参数/ 和/ 一个/ 二元关系/ 符/ 的/ 约束条件/ ,/ 即/ C/ (/ di/ ,/ dj/ )/ =/ direldj/ ,/ 其中/ rel/ 为/ 二元关系/ 符/ ,/ 如/ >/ 、/ </ 、/ =/ 等/ ,/ 能够/ 表达/ 两个/ 参数/ 之间/ 大于/ 、/ 小于/ 、/ 等于/ 等/ 关系/ ;/ ②/ 复杂/ 约束/ ,/ 包含/ 了/ 两个/ 或/ 两个/ 以上/ 参数/ 以及/ 多个/ 常量/ 数据/ 的/ 约束条件/ ,/ 这些/ 参数/ 和/ 常量/ 之间/ 通过/ 多个/ 运算符/ 或/ 关系/ 符等/ 进行/ 连接/ ./ 多/ 租户/ 系统/ 通常/ 存在/ 大量/ 可/ 供选择/ 的/ 动作/ 行为/ ,/ 有些/ 动作/ 之间/ 互不/ 相关/ ,/ 而/ 有些/ 动作/ 之间/ 却/ 存在/ 某些/ 约束/ 依赖/ 关系/ ./ 动作/ 约束条件/ Action/ -/ Cons/ =/ 〈/ AS/ ;/ AE/ ;/ Sequence/ -/ Cons/ 〉/ 利用/ 集合/ 定义/ 系统/ 动作/ 的/ 约束/ 依赖/ 关系/ ,/ 包括/ 起始/ 动作/ 、/ 终止/ 动作/ 定义/ 以及/ 动作/ 之间/ 的/ 顺序/ 约束/ 关系/ 等/ :/ (/ 1/ )/ AS/ 为/ 起始/ 动作/ 集/ ./ 所有/ 动作/ 序列/ 均/ 需以/ 该/ 集合/ 内/ 的/ 动作/ 开始/ ,/ 若为/ 空/ ,/ 则/ 动作/ 序列/ 可以/ 系统/ 任意/ 动作/ 开始/ ;/ (/ 2/ )/ AE/ 为/ 终止/ 动作/ 集/ ./ 所有/ 动作/ 序列/ 均/ 需以/ 该/ 集合/ 内/ 的/ 动作/ 结束/ ,/ 若为/ 空/ ,/ 则/ 动作/ 序列/ 可以/ 系统/ 任意/ 动作/ 结束/ ;/ (/ 3/ )/ 顺序/ 约束条件/ Sequence/ -/ Cons/ =/ 〈/ {/ Afteracti/ {/ Parallelacti/ 约束/ 利用/ 两类/ 集合/ 定义/ 了/ 动作/ 顺序/ 执行/ 约束/ 和/ 并行执行/ 约束/ ,/ 顺序/ 执行/ 约束/ Afteracti/ 作/ acti/ 之后/ 顺序/ 执行/ 的/ 动作/ 集合/ ,/ 并行执行/ 约束/ Parallelacti/ 状态/ -/ 动作/ 约束/ 关系/ St/ -/ Act/ -/ Cons/ 定义/ 了/ 系统/ 状态/ 与/ 相关/ 动作/ 之间/ 的/ 约束/ 依赖/ 关系/ ,/ 例如/ 系统/ 的/ 某些/ 行为/ 动作/ 只有/ 在/ 系统/ 达到/ 某种/ 特定/ 状态/ 时才/ 能够/ 执行/ ,/ 而/ 在/ 其他/ 状态/ 下则/ 不能/ 执行/ ./ 因此/ 我们/ 将/ 状态/ -/ 动作/ 约束/ 关系/ 定义/ 为/ 一种/ 状态/ 到/ 动作/ 集/ 的/ 映射/ 关系/ 集/ ,/ 即/ {/ St/ →/ {/ Ai/ }/ }/ ,/ 该/ 映射/ 关系/ 表示/ 当/ 系统/ 处于/ 状态/ St/ 时/ ,/ 集合/ {/ Ai/ }/ 中/ 的/ 动作/ 均/ 能够/ 正常/ 执行/ ,/ 而/ 集合/ 外/ 的/ 其他/ 动作/ 则/ 不能/ 在/ 此/ 状态/ 下/ 进行/ ./ 3.2/ 约束/ 依赖图/ 本文/ 利用/ 参数/ 的/ 约束/ 依赖图/ (/ ConstraintsDependencyGraph/ ,/ CDG/ )/ 来/ 表示/ 参数/ 之间/ 的/ 约束/ 依赖/ 关系/ ,/ 该/ 约束/ 依赖图/ 中/ 包含/ 两类/ 对象/ P/ 和/ C/ :/ P/ 为/ 服务/ 参数/ 对象/ P/ =/ {/ p1/ ,/ p2/ ,/ …/ }/ ,/ C/ 为/ 约束条件/ 对象/ C/ =/ {/ c1/ ,/ c2/ ,/ …/ }/ ,/ CDG/ 的/ 具体/ 定义/ 及其/ 性质/ 如下/ :/ (/ 1/ )/ CDG/ =/ 〈/ V/ ,/ E/ 〉/ ,/ 为/ 定义/ 在/ 被/ 测/ 系统配置/ 参数/ P/ 和/ 约束条件/ C/ 上/ 的/ 约束/ 依赖图/ ;/ (/ 2/ )/ V/ 为/ 节点/ 集/ ,/ 并且/ V/ =/ P/ ∪/ C/ ;/ (/ 3/ )/ E/ 为/ 无/ 向/ 边集/ ,/ E/ =/ {/ (/ pi/ ,/ cj/ )/ }/ ,/ 其中/ pi/ ∈/ P/ ,/ cj/ ∈/ C/ ,/ 其/ 表示/ 约束条件/ cj/ 中/ 包含/ 参数/ pi/ ,/ 表达/ 参数/ pi/ 受到/ 约束条件/ cj/ 限制/ 的/ 含义/ ,/ 不/ 存在/ 连接/ 两个/ 参数/ 对象/ 或者/ 两个/ 约束条件/ 对象/ 的/ 边/ ,/ 即/ 如果/ 边/ e/ =/ (/ pi/ ,/ pj/ )/ 或/ e/ =/ (/ ci/ ,/ cj/ )/ ,/ 则/ e/ / E/ ;/ (/ 4/ )/ 参数/ 节点/ 的/ 度/ D/ (/ pi/ )/ 为/ 与/ 参数/ pi/ 相关/ 的/ 约束条件/ 的/ 数量/ ,/ 并且/ D/ (/ pi/ )/ / 0/ ,/ 若/ D/ (/ pi/ )/ =/ 0/ ,/ 说明/ 参数/ pi/ 不受/ 任何/ 约束条件/ 的/ 限制/ ;/ (/ 5/ )/ 约束/ 节点/ 的/ 度/ D/ (/ ci/ )/ 为/ 约束条件/ ci/ 中/ 包含/ 的/ 参数/ 个数/ ,/ 并且/ D/ (/ ci/ )/ >/ 0/ ;/ (/ 6/ )/ 若/ 参数/ 节点/ pi/ 和/ pj/ 之间/ 仅/ 经过/ 一个/ 约束/ 节点/ c/ 相连/ ,/ 即/ pi/ 和/ pj/ 之间/ 存在/ 路径/ L/ =/ picpj/ ,/ 则/ 说明/ 参数/ pi/ 和/ pj/ 出现/ 在/ 同/ 一条/ 约束条件/ c/ 中/ ,/ 即/ pi/ 和/ pj/ 之间/ 存在/ 直接/ 约束/ 依赖/ 关系/ ;/ 若/ 节点/ pi/ 和/ pj/ 之间/ 经过/ 多个/ 约束/ 节点/ 相连/ ,/ 即/ pi/ 和/ pj/ 之间/ 存在/ 路径/ L/ =/ pic1p1/ …/ ck/ -/ 1pk/ -/ 1ckpj/ (/ k/ >/ 1/ )/ ,/ 则/ 说明/ 参数/ pi/ 和/ pj/ 之间/ 通过/ 其他/ 参数/ p1/ ,/ …/ ,/ pk/ -/ 1/ 等/ 产生/ 联系/ ,/ 存在/ 间接/ 约束/ 依赖/ 关系/ ;/ (/ 7/ )/ 若/ 参数/ 节点/ ci/ 和/ cj/ 之间/ 存在/ 一条/ 路径/ L/ =/ cipcj/ ,/ 说明/ 约束条件/ ci/ 和/ cj/ 包含/ 相同/ 的/ 参数/ p/ ./ 构建/ 参数/ 约束/ 依赖图/ 的/ 过程/ 如/ 算法/ 1/ 所示/ ./ 算法/ 1/ ./ 数据/ 约束/ 依赖图/ 构造/ 算法/ ./ 输入/ :/ 系统/ 参数/ 和/ 参数/ 之间/ 的/ 约束条件/ 输出/ :/ 数据/ 约束/ 依赖图/ LetGbeagraphwithnoverticesoredges/ ;/ FOR/ (/ eachconstraintci/ )/ GenerateaverticevciaccordingtoconstraintciENDFORFOR/ (/ eachparameterpi/ )/ GenerateaverticevpiaccordingtoparameterpiENDFORFOR/ (/ eachverticevci/ )/ IF/ (/ constraintcicontainsparameterpj/ )/ Thengenerateanedgeebetweenvciandvpj/ ,/ e/ =/ (/ vci/ ,/ vpj/ )/ ENDIFENDFOR/ 图/ 2/ 为/ 一个/ 简单/ 的/ 参数/ 约束/ 依赖图/ ,/ 包含/ 2/ 个/ 参数/ 和/ 3/ 条/ 约束条件/ ./ 其中/ 约束条件/ 0/ / x/ </ 800/ 和/ 0/ </ l/ / 800/ 的/ 度/ 均/ 为/ 1/ ,/ 表示/ 约束条件/ 中仅/ 包含/ 1/ 个/ 参数/ ,/ 约束条件/ 0/ </ x/ +/ 1/ / 800/ 中/ 包含/ 2/ 个/ 参数/ ,/ 且/ 该/ 约束/ 节点/ 的/ 度/ 为/ 2/ ,/ 表示/ 两个/ 参数/ 之间/ 的/ 约束/ 依/ Page6/ 赖/ 关系/ ./ 2/ 个/ 参数/ 节点/ 的/ 度/ 均/ 为/ 2/ ,/ 表示/ 参数/ x/ ,/ l/ 均/ 受到/ 两条/ 约束条件/ 的/ 限制/ ./ 合理/ 的/ 参数/ 取值/ 能够/ 使/ 与其/ 相关/ 的/ 约束条件/ 为/ 真/ ,/ 如果/ 图中/ 包含/ 的/ 所有/ 参数/ 的/ 取值/ 使/ 全部/ 约束条件/ 均/ 为/ 真/ ,/ 则/ 称/ 这组/ 参数/ 取值/ 为/ 合理/ 参数值/ ,/ 能够/ 激发/ 被/ 测系统/ 的/ 正常/ 运行/ 情况/ ./ CDG/ 的/ 连通性/ 表达/ 了/ 图/ 中/ 所/ 包含/ 的/ 参数/ 以及/ 约束条件/ 之间/ 的/ 相关性/ ,/ 相关性/ 包括/ 以下/ 3/ 种/ 类型/ :/ (/ 1/ )/ 参数/ 之间/ 的/ 相关性/ ./ 两个/ 参数/ 之间/ 存在/ 路径/ 相连/ 通/ ,/ 则/ 称/ 这/ 两个/ 参数/ 相关/ ,/ 表现/ 为/ 这/ 两个/ 参数/ 同时/ 存在/ 同/ 一条/ 约束条件/ ,/ 或者/ 这/ 两个/ 参数/ 通过/ 其他/ 参数/ 间接/ 相关/ ;/ (/ 2/ )/ 参数/ 和/ 约束条件/ 之间/ 的/ 相关性/ ./ 参数/ 和/ 约束条件/ 之间/ 存在/ 路径/ 相连/ 通/ ,/ 则/ 称/ 该/ 参数/ 和/ 约束条件/ 相关/ ,/ 表现/ 为/ 约束条件/ 直接/ 包含/ 该/ 参数/ ,/ 或者/ 约束条件/ 中/ 的/ 其他/ 参数/ 与/ 该/ 参数/ 相关/ ;/ (/ 3/ )/ 约束条件/ 之间/ 的/ 相关性/ ./ 两条/ 约束条件/ 之间/ 存在/ 路径/ 相连/ 通/ ,/ 则/ 称/ 这/ 两条/ 约束条件/ 相关/ ,/ 表现/ 为/ 这/ 两条/ 约束条件/ 包含/ 相同/ 参数/ ,/ 或者/ 相关/ 参数/ ./ 对于/ 多/ 租户/ 系统/ 中/ 一组/ 具有/ 相关性/ 的/ 参数/ ,/ 生成/ 其中/ 一个/ 参数/ 的/ 取值/ 时/ ,/ 必须/ 同时/ 考虑/ 其他/ 参数/ 的/ 取值/ 情况/ ,/ 与/ 这些/ 参数/ 相关/ 的/ 约束条件/ 则/ 是/ 判定/ 这些/ 参数/ 取值/ 合理/ 与否/ 的/ 根据/ ./ 从/ 被/ 测系统/ 参数/ 的/ CDG/ 中/ 能够/ 很/ 容易/ 的/ 判定/ 参数/ 以及/ 约束条件/ 之间/ 的/ 相关性/ ,/ 依据/ CDG/ 的/ 连通性/ 将/ 其/ 划分/ 为/ 多个/ 连通/ 子图/ G1/ ,/ G2/ ,/ …/ ,/ 每个/ 子图/ 中/ 包含/ 的/ 参数/ 以及/ 约束条件/ 之间/ 均/ 存在/ 相关性/ ,/ 而/ 存在/ 于/ 不同/ 子图/ 中/ 的/ 参数/ 或者/ 约束条件/ 之间/ 则/ 不/ 存在/ 相关性/ ./ 每个/ 子图/ 中/ 包含/ 的/ 参数/ 和/ 约束条件/ 就是/ 每次/ 生成/ 参数/ 取值/ 时/ 需要/ 考虑/ 的/ 参数/ 及/ 约束条件/ 的/ 最小/ 集合/ ./ CDG/ 连通/ 子图/ 的/ 性质/ 包括/ :/ (/ 1/ )/ 对于/ 任意子/ 图/ Gi/ 中/ 的/ 任意/ 两点/ v/ ,/ v/ ,/ 存在/ 路径/ P/ =/ ve1v1e2v2/ …/ eniv/ 连接/ 两点/ ;/ (/ 2/ )/ 对于/ 任意/ 两点/ ,/ v/ ∈/ Gi/ ,/ v/ ∈/ Gj/ ,/ i/ ≠/ j/ ,/ 不/ 存在/ 边/ e/ =/ (/ v/ ,/ v/ )/ ;/ (/ 3/ )/ {/ v/ |/ v/ ∈/ Gi/ }/ ∩/ {/ v/ |/ v/ ∈/ Gj/ }/ =/ / ,/ i/ ≠/ j/ ./ 4/ 约束/ 组合/ 测试方法/ 4.1/ 配置/ 参数/ 生成/ 本/ 研究/ 针对/ CDG/ 的/ 每个/ 连通/ 子图/ ,/ 考察/ 其中/ 包含/ 的/ 约束条件/ ,/ 生成/ 约束条件/ 的/ 不同/ 取值/ 组合/ ,/ 利用/ 组合/ 约束/ 为/ 测试/ 生成/ 定义/ 目标/ 函数/ ,/ 并/ 采用/ 模拟退火/ 搜索算法/ 实现/ 参数/ 取值/ 的/ 生成/ ./ 本/ 研究/ 仅/ 考虑/ 两种/ 类型/ 的/ 约束条件/ ,/ 枚举/ 类型/ 的/ 约束条件/ 和/ 布尔/ 表达式/ 类型/ 的/ 约束条件/ ./ 枚举/ 约束/ 的/ 取值/ 将/ 直接/ 确定/ 测试用例/ 中/ 相应/ 参数/ 的/ 取值/ ,/ 约束条件/ 的/ 取值/ 个数/ 与/ 参数/ 可选/ 的/ 取值/ 个数/ 相同/ ;/ 布尔/ 约束/ 的/ 取值/ 个数/ 为/ 两个/ ,/ 即/ 真/ 和/ 假/ ./ 每个/ 连通/ 子图/ 中/ 参数/ 的/ 生成/ 过程/ 如/ 算法/ 2/ 所示/ ,/ 每组/ 约束/ 组合/ 的/ 目标/ 函数/ 将/ 可能/ 存在/ 多种/ 定义/ 形式/ ,/ 算法/ 需要/ 针对/ 每种/ 目标/ 函数/ 定义/ 生成/ 一组/ 测试数据/ :/ 算法/ 2/ ./ 配置/ 参数/ 生成/ 算法/ ./ 输入/ :/ 系统/ 约束/ 依赖图/ 输出/ :/ 测试数据/ LetPbethesubsetoftheconfigurationparametersLetC/ =/ {/ c1/ ,/ c2/ ,/ …/ ,/ ck/ }/ bethesetofalltheconstraintsLetVibethesetofallthevaluesofconstraintciGeneratevaluecombinationsofCusingcombinatorialLetCi/ =/ {/ c1/ =/ vi1/ ,/ c2/ =/ vi2/ ,/ …/ ,/ ck/ =/ vik/ }/ betheithvalueFOR/ (/ eachvaluecombinationCi/ )/ Constructobjectfunctionsobj1/ ,/ obj2/ ,/ …/ ,/ objwforPFOR/ (/ eachobjectfunctionobjj/ )/ GeneratevaluesforPusingSimulatedAnnealingENDFORENDFOR/ 算法/ 2/ 中/ 每组/ 约束/ 组合/ 包含/ 多条/ 约束条件/ ,/ 因此/ 其/ 目标/ 函数/ 也/ 由/ 多个/ 子目标/ 函数/ 组成/ ,/ 每个/ 子目标/ 函数/ 对应/ 约束/ 组合/ 中/ 的/ 一条/ 约束条件/ ,/ 当/ 子目标/ 函数/ 存在/ 多种/ 定义/ 形式/ 时/ ,/ 则/ 总/ 目标/ 函数/ 也/ 会/ 存在/ 多种/ 定义/ ./ 枚举/ 类型/ 的/ 约束条件/ 直接/ 确定/ 参数/ 取值/ ,/ 因此/ 与其/ 对应/ 的/ 子目标/ 函数/ 值为/ 0/ ,/ 在/ 目标/ 函数/ 生成/ 算法/ 中/ 着重/ 考虑/ 布尔/ 类型/ 的/ 约束条件/ ./ 对于/ 每条/ 布尔/ 类型/ 的/ 约束条件/ ci/ ,/ 如果/ 其/ 取值/ 为/ 0/ ,/ 则/ 首先/ 将/ 其/ 取反/ ,/ 即/ / ci/ =/ 1/ ,/ 然后/ 将/ ci/ 或/ / ci/ 转换/ 为/ 等价/ 的/ 析取范式/ 形式/ ,/ 即/ (/ / )/ ci/ =/ p1/ +/ p2/ +/ …/ +/ pi/ ,/ 其中/ 包含/ Page7i/ 个/ 乘积/ 项/ ,/ 因此/ 与/ 约束条件/ ci/ // / ci/ 对应/ 的/ 子目标/ 函数/ 将/ 拥有/ i/ 种/ 不同/ 的/ 定义/ ,/ 那么/ 该/ 约束/ 组合/ 也/ 将/ 至少/ 有/ i/ 种/ 不同/ 的/ 目标/ 函数/ 定义/ ./ 如果/ 在/ 某/ 一组/ 约束/ 组合/ 中/ ,/ 超过/ 一条/ 约束条件/ 拥有/ 多个/ 乘积/ 项/ ,/ 也就是说/ 超过/ 一个/ 子目标/ 函数/ 拥有/ 多种/ 定义/ 形式/ ,/ 则/ 在/ 定义/ 总/ 目标/ 函数/ 时/ 需要/ 再次/ 利用/ 组合/ 测试/ 的/ 方法/ ./ 对于/ 每/ 一组/ 约束/ 组合/ ,/ 其/ 目标/ 函数/ 的/ 具体/ 生成/ 过程/ 如/ 算法/ 3/ 所示/ ./ 算法/ 3/ ./ 目标/ 函数/ 定义/ 算法/ ./ 输入/ :/ 系统/ 约束/ 依赖图/ 输出/ :/ 目标/ 函数/ Letv1tovkbeanassignmenttoconstraintsc1tockFOR/ (/ eachBooleanconstraintci/ )/ IF/ (/ ci/ =/ 0/ )/ THENci/ =/ / ciENDIFConvertcitoitsequivalentdisjunctivenormalformFOR/ (/ eachtermpjinci/ )/ Constructsub/ -/ objectfunctionobjijaccordingtopjENDFORobjihasdifferentdefinitionsobji1/ ,/ obji2/ ,/ …/ ENDFORFOR/ (/ eachenumerativeconstraintci/ )/ obji/ =/ 0ENDFORUsingcombinatorialtestingmethodonobj1/ ,/ obj2/ ,/ …/ ,/ objktoconstructobjectfunctionobj/ =/ obj1/ +/ obj2/ +/ …/ +/ objk/ 下面/ 以图/ 2/ 所示/ 的/ 约束/ 依赖图/ 为例/ ,/ 简单/ 介绍/ 利用/ 正交/ 试验/ 设计/ 方法/ [/ 5/ ]/ 生成/ 参数/ 取值/ 的/ 过程/ ./ 图/ 2/ 中/ 包含/ 的/ 约束条件/ 及其/ 可能/ 的/ 取值/ 定义/ 如表/ 1/ 所示/ ,/ 其中/ 取值/ 为/ 1/ 表示/ 该/ 约束条件/ 为/ 真/ ,/ 取值/ 为/ 0/ 表示/ 该/ 约束条件/ 为/ 假/ ./ 可能/ 的/ 取值/ 12/ 针对/ 表/ 1/ ,/ 利用/ 正交/ 试验/ 设计/ 方法/ 生成/ 的/ 约束/ 组合/ ,/ 如表/ 2/ 所示/ ./ 组合/ 号/ 1234/ 表/ 2/ 中/ 每/ 一行/ 就是/ 一组/ 约束/ 组合/ ,/ 其中/ 第一行/ 对应/ 的/ 约束/ 组合/ 为/ 该/ 约束/ 组合/ 中/ 包含/ 3/ 条/ 约束条件/ ,/ 因此/ 总/ 目标/ 函数/ 定义/ 为/ obj/ =/ obj1/ +/ obj2/ +/ obj3/ ,/ 由于/ 每/ 一条/ 约束条件/ 均/ 只/ 包含/ 一个/ 乘积/ 项/ ,/ 因此/ 每个/ 子目标/ 函数/ 均/ 只有/ 一种/ 定义/ 方式/ ,/ 即/ (/ 1/ )/ obj1/ =/ (/ 2/ )/ obj2/ =/ (/ 3/ )/ obj3/ =/ 最后/ 基于/ 上述/ 目标/ 函数/ 定义/ ,/ 利用/ 模拟退火/ 搜索算法/ 能够/ 生成/ 一组/ 测试数据/ ./ 4.2/ 动作/ 序列/ 生成/ 多/ 租户/ 系统/ 不仅/ 为/ 用户/ 提供/ 系统/ 参数/ 配置/ ,/ 还/ 为/ 用户/ 提供/ 系统/ 动作/ 行为/ 方面/ 的/ 配置/ ,/ 用户/ 能够/ 根据/ 需求/ 配置/ 不同/ 的/ 动作/ 序列/ ,/ 完成/ 不同/ 的/ 系统/ 功能/ ./ 因此/ 配置/ 测试/ 也/ 应当/ 包含/ 动作/ 配置/ 测试/ ,/ 以/ 确保/ 系统/ 在/ 不同/ 动作/ 配置/ 下/ 能够/ 正常/ 运行/ ./ 从/ 系统/ 提供/ 的/ n/ 个/ 候选/ 动作/ 中/ 选取/ 其中/ n/ 个/ 动作/ ,/ 生成/ 目标/ 动作/ 序列/ ,/ 能够/ 产生/ nn/ 种/ 不同/ 的/ 动作/ 序列/ ,/ 这/ 显然/ 是/ 难以实现/ 的/ ,/ 因此/ 本文/ 采用/ 正交/ 试验/ 设计/ 方法/ 从/ 候选/ 动作/ 中/ 选取/ 部分/ 动作/ 生成/ 动作/ 序列/ ./ 为此/ 我们/ 定义/ 两个/ 集合/ ,/ 候选/ 动作/ 集合/ 和/ 目标/ 动作/ 序列/ 集合/ ./ (/ 1/ )/ 候选/ 动作/ 集合/ Action/ =/ {/ acti/ |/ i/ =/ 1/ ,/ 2/ ,/ …/ ,/ n/ }/ ,/ 即/ 系统/ 提供/ 的/ 所有/ 系统/ 动作/ 的/ 集合/ ;/ (/ 2/ )/ 目标/ 动作/ 序列/ 集合/ S/ =/ {/ Si/ |/ i/ =/ 1/ ,/ 2/ ,/ …/ ,/ n/ }/ ,/ 即/ 租户/ 对系统/ 候选/ 动作/ 进行/ 选择/ 排列/ 得到/ 的/ 动作/ 序列/ 的/ 集合/ ./ 第/ j/ 个/ 目标/ 动作/ 序列/ Sj/ 包含/ 有/ nj/ 个/ 动作/ ,/ Sj/ =/ 〈/ s1/ ,/ s2/ ,/ …/ ,/ snj/ 〉/ ,/ 其中/ ,/ si/ =/ acti/ ,/ i/ ∈/ [/ 1/ ,/ nj/ ]/ ,/ i/ ∈/ [/ 1/ ,/ n/ ]/ ./ 在/ 正交/ 试验/ 设计/ 中/ ,/ 将/ 动作/ 序列/ Sj/ 中/ 的/ 各/ 预期/ 动作/ 作为/ 试验/ 因素/ ,/ 因素/ 水平/ 根据/ 动作/ 约束条件/ 定义/ ./ 如果/ 被/ 测系统/ 对/ 起始/ 动作/ 或/ 终止/ 动作/ 有/ 特殊要求/ ,/ 则/ 动作/ 序列/ Sj/ 中/ 的/ 起始/ 动作/ s1/ 或/ 终止/ 动作/ snj/ 定义/ 为/ 两/ 水平/ 因素/ ,/ s1/ 的/ 两/ 水平/ 分别/ 为/ 起始/ 动作/ 集合/ Page8AS/ 以及/ 除/ 起始/ 动作/ 之外/ 的/ 其他/ 动作/ Action/ -/ AS/ ,/ 同理/ snj/ 的/ 两/ 水平/ 分别/ 为/ AE/ 和/ Action/ -/ AE/ ./ 动作/ 序列/ 中/ 的/ 其余/ 动作/ 均/ 为/ 三/ 水平/ 因素/ ,/ 因素/ 水平/ 的/ 定义/ 依赖于/ 前/ 一个/ 动作/ ,/ 例如/ 对于/ Sj/ 的/ 动作/ si/ ,/ 其三/ 水平/ 分别/ 定义/ 为/ AftersParellels/ 没有/ 特殊要求/ ,/ 则/ 起始/ 动作/ 为/ 一/ 水平/ 因素/ ,/ 其/ 水平/ 为/ 动作/ 集合/ Action/ ,/ 终止/ 动作/ 的/ 因素/ 水平/ 与/ 序列/ 中/ 其余/ 动作/ 的/ 水平/ 定义/ 相同/ ./ 动作/ 序列/ 生成/ 的/ 具体/ 过程/ 如/ 算法/ 4/ 所示/ ./ 算法/ 4/ ./ 动作/ 序列/ 生成/ 算法/ ./ 输入/ :/ 候选/ 动作/ 集合/ ,/ 动作/ 约束条件/ 输出/ :/ 目标/ 动作/ 序列/ 集合/ LetAction/ =/ {/ acti/ |/ i/ =/ 1/ ,/ 2/ ,/ …/ ,/ n/ }/ bethesetofallthesystemactionsLetASbethesetofstartactions/ ,/ andAEbethesetofendactionsLet/ 〈/ s1/ ,/ s2/ ,/ …/ ,/ sn/ 〉/ bethetargetactionsequenceIF/ (/ ASisnotnull/ )/ THENs1hastwolevelsAsand/ 表/ 3/ 动作/ 序列/ 的/ 因素/ 水平/ 表/ 试验/ 因素/ 水平/ 12Action/ -/ AS35/ 实验/ 与/ 评估/ 5.1/ 实验/ 设置/ 本文/ 选取/ 的/ 单人游戏/ 系统/ 中/ 包含/ 大量/ 可/ 配置/ 元素/ ,/ 实验/ 主要/ 关注/ 游戏/ 中/ 物体/ 特征/ 配置/ 和/ 物体/ 行为/ 配置/ ,/ 并且/ 本/ 实验/ 仅/ 讨论/ 包含/ 两个/ 静止/ 物体/ 和/ 两个/ 移动/ 物体/ 的/ 情况/ ,/ 因为/ 这种/ 情况/ 已经/ 足以/ 表达/ 物体/ 与/ 边界/ 之间/ 、/ 静止/ 物体/ 之间/ 、/ 移动/ 物体/ 之间/ 、/ 以及/ 静止/ 物体/ 和/ 移动/ 物体/ 之间/ 的/ 各种/ 关系/ ./ 游戏/ 背景/ 通过/ 背景/ 的/ 长/ 、/ 宽/ 、/ 颜色/ 定义/ ,/ 为/ 固定值/ ,/ 即/ L/ =/ 800/ ,/ H/ =/ 600/ ,/ Color/ =/ Blue/ ./ 静止/ 物体/ 和/ 移动/ 物体/ 的/ 配置/ 参数/ 分别/ 如表/ 4/ 和表/ 5/ 所示/ ./ 静止/ 物体/ S1S2/ 移动/ 物体/ 横坐标/ 纵坐标/ 长度/ 宽度/ 颜色/ 速度/ 方向/ M1M2ELSEs1hasonelevelActionENDIFFOR/ (/ eachsi/ (/ 1/ </ i/ </ n/ )/ )/ sihasthreelevelsAftersENDFORIF/ (/ AEisnotnull/ )/ THENsnhastwolevelsAEandELSEsnhasthreelevelsAftersENDIFUsingcombinatorialtestingmethodtoconstructaction/ 对/ 起始/ 动作/ 和/ 终止/ 动作/ 均/ 有/ 特殊要求/ 的/ 被/ 测系统/ ,/ 动作/ 序列/ 的/ 因素/ 水平/ 定义/ 如表/ 3/ 所示/ ,/ 对于/ 具体/ 的/ 因素/ 水平/ 定义/ 选取/ 合适/ 的/ 正交/ 表来/ 安排/ 动作/ 序列/ ./ Action/ -/ Afters5/ ./ 1.1/ 不/ 考虑/ 约束条件/ 的/ 实验设计/ 本/ 实验/ 以/ 正交/ 试验/ 设计/ 方法/ 为例/ ,/ 考察/ 在/ 不/ 考虑/ 约束条件/ 的/ 情况/ 下/ ,/ 生成/ 测试数据/ 的/ 质量/ 和/ 效率/ ./ 传统/ 的/ 正交/ 试验/ 设计/ 直接/ 将/ 参数/ 及其/ 可能/ 的/ 取值/ 作为/ 组合/ 测试/ 考察/ 的/ 因素/ ,/ 参数/ 可能/ 的/ 取值/ 必须/ 是/ 有限/ 个/ ,/ 并且/ 数量/ 尽可能少/ ./ 本/ 研究/ 的/ 被/ 测系统/ 中有/ 多个/ 参数/ 的/ 取值/ 是/ 某/ 一/ 规定/ 范围/ 内/ 的/ 正整数/ ,/ 虽然/ 是/ 有限/ 个/ ,/ 但/ 数量/ 巨大/ ,/ 因此/ 无法/ 直接/ 将/ 参数/ 取值/ 作为/ 组合/ 测试/ 的/ 因素/ ./ 对于/ 这/ 类/ 参数/ ,/ 本/ 研究/ 将/ 取值/ 区间/ 作为/ 组合/ 测试/ 的/ 因素/ ,/ 将/ 配置/ 参数/ 根据/ 静止/ 物体/ 和/ 移动/ 物体/ 分为/ 两类/ 进行/ 测试/ 生成/ ./ 静止/ 物体/ 各/ 参数/ 的/ 合法/ 取值/ 区间/ 如表/ 6/ 所示/ ,/ 两个/ 静止/ 物体/ 相关/ 参数/ 的/ 可能/ 取值/ 如表/ 7/ 所示/ ,/ 其中/ 非法/ 取值/ 以/ 从/ 非法/ 区间/ 中/ 选取/ 的/ 两个/ 具体/ 数值/ 作为/ 代表/ ./ 合法/ 取值/ 区间/ [/ 0/ ,/ 800/ )/ [/ 0/ ,/ 600/ )/ (/ 0/ ,/ 800/ ]/ (/ 0/ ,/ 600/ ]/ 利用/ 正交/ 表/ L12/ (/ 28/ )/ 安排表/ 7/ 中/ 的/ 参数/ 及其/ 取值/ ,/ 共/ 生成/ 12/ 组/ 区间/ 组合/ ./ 在/ 生成/ 参数/ 具体/ 取值/ 时/ ,/ Page9/ 表/ 7/ 两个/ 静止/ 物体/ 相关/ 参数/ 可能/ 的/ 取值/ 12/ 如果/ 遇到/ 参数/ 取值/ 为/ 区间/ 时/ ,/ 则/ 从/ 该/ 区间/ 随机/ 选取/ 一个/ 值/ 作为/ 测试数据/ ./ 分别/ 为/ 每组/ 区间/ 组合/ 生成/ 8/ 组/ 测试数据/ ,/ 共/ 为/ 静止/ 物体/ 生成/ 96/ 组/ 参数/ 取值/ ./ 移动/ 物体/ 各/ 参数/ 的/ 合法/ 取值/ 区间/ 如表/ 8/ 所示/ ,/ 两个/ 移动/ 物体/ 相关/ 参数/ 的/ 可能/ 取值/ 如表/ 9/ 所示/ ./ 表/ 9/ 两个/ 移动/ 物体/ 相关/ 参数/ 可能/ 的/ 取值/ [/ 0/ ,/ 800/ )/ 12/ -/ 10/ // 810/ -/ 10/ // 610/ -/ 10/ // 810/ -/ 10/ // 6103/ 利用/ 正交/ 表/ L36/ (/ 28/ ×/ 32/ )/ 安排表/ 9/ 中/ 的/ 各/ 参数/ 及其/ 取值/ ,/ 共/ 生成/ 36/ 组/ 区间/ 组合/ ,/ 为/ 每组/ 区间/ 组合/ 生成/ 8/ 组/ 测试数据/ ,/ 共/ 为/ 移动/ 物体/ 生成/ 288/ 组/ 参数/ 取值/ ./ 5.1/ ./ 2/ 基于/ 约束/ 组合/ 的/ 实验设计/ MTA/ -/ AGM/ 游戏/ 系统对/ 租户/ 的/ 配置/ 行为/ 有/ 以下/ 的/ 约束条件/ 限制/ :/ (/ 1/ )/ S1/ 在/ 边界/ 内/ :/ (/ 0/ / xs1/ </ 800/ )/ ∧/ (/ 0/ / ys1/ </ 600/ )/ ∧/ (/ 0/ </ ls1/ / 800/ )/ ∧/ (/ 0/ </ hs1/ / 600/ )/ ∧/ (/ 0/ </ xs1/ +/ ls1/ / 800/ )/ ∧/ (/ 0/ </ ys1/ +/ hs1/ / 600/ )/ ./ (/ 2/ )/ S2/ 在/ 边界/ 内/ :/ (/ 0/ / xs2/ </ 800/ )/ ∧/ (/ 0/ / ys2/ </ 600/ )/ ∧/ (/ 0/ </ ls2/ / 800/ )/ ∧/ (/ 0/ </ hs2/ / 600/ )/ ∧/ (/ 0/ </ xs2/ +/ ls2/ / 800/ )/ ∧/ (/ 0/ </ ys2/ +/ hs2/ / 600/ )/ ./ (/ 3/ )/ S1/ 与/ S2/ 不/ 重叠/ :/ / a/ ,/ b/ ,/ 0/ / a/ / ls1/ ,/ 0/ / b/ / hs1/ ,/ (/ (/ xs1/ +/ a/ </ xs2/ )/ ∨/ (/ xs1/ +/ a/ >/ xs2/ +/ ls2/ )/ )/ ∨/ (/ (/ ys1/ +/ b/ </ ys2/ )/ ∨/ (/ ys1/ +/ b/ >/ ys2/ +/ hs2/ )/ )/ ./ (/ 4/ )/ M1/ 在/ 边界/ 内/ :/ (/ 0/ / xm1/ </ 800/ )/ ∧/ (/ 0/ / ym1/ </ 600/ )/ ∧/ (/ 0/ </ lm1/ / 800/ )/ ∧/ (/ 0/ </ hm1/ / 600/ )/ ∧/ (/ 0/ </ xm1/ +/ lm1/ / 800/ )/ ∧/ (/ 0/ </ ym1/ +/ hm1/ / 600/ )/ ./ (/ 5/ )/ M2/ 在/ 边界/ 内/ :/ (/ 0/ / xm2/ </ 800/ )/ ∧/ (/ 0/ / ym2/ </ 600/ )/ ∧/ (/ 0/ </ lm2/ / 800/ )/ ∧/ (/ 0/ </ hm2/ / 600/ )/ ∧/ (/ 0/ </ xm2/ +/ lm2/ / 800/ )/ ∧/ (/ 0/ </ ym2/ +/ hm2/ / 600/ )/ ./ (/ 6/ )/ M1/ 与/ M2/ 不/ 重叠/ :/ / a/ ,/ b/ ,/ 0/ / a/ / lm1/ ,/ 0/ / b/ / hm1/ ,/ (/ (/ xm1/ +/ a/ </ xm2/ )/ ∨/ (/ xm1/ +/ a/ >/ xm2/ +/ lm2/ )/ )/ ∨/ (/ (/ ym1/ +/ b/ </ ym2/ )/ ∨/ (/ ym1/ +/ b/ >/ ym2/ +/ hm2/ )/ )/ ./ (/ 7/ )/ M1/ 的/ 运动/ 方向/ 有/ 3/ 种/ :/ 水平/ 方向/ 、/ 垂直/ 方向/ 和/ 其他/ 方向/ ./ (/ 8/ )/ M2/ 的/ 运动/ 方向/ 有/ 3/ 种/ :/ 水平/ 方向/ 、/ 垂直/ 方向/ 和/ 其他/ 方向/ ./ (/ 9/ )/ 由于/ 物体/ 颜色/ 对本/ 实验/ 结果/ 的/ 影响/ 非常/ 有/ xs2/ [/ 0/ ,/ 800/ )/ -/ 10/ // 810/ 合法/ 取值/ 区间/ xm2/ [/ 0/ ,/ 800/ )/ -/ 10/ // 810/ -/ 10/ // 610/ -/ 10/ // 810/ -/ 10/ // 610/ 限/ ,/ 因此/ 将/ 所有/ 物体/ 的/ 颜色/ 均/ 设置/ 为/ 白色/ ./ 约束条件/ 1/ ~/ 6/ 均/ 为/ 布尔/ 类型/ 约束条件/ ,/ 约束条件/ 7/ 和/ 8/ 为/ 枚举/ 类型/ 的/ 约束条件/ ,/ 分别/ 包含/ 3/ 个/ 可/ 选取/ 值/ ,/ 约束条件/ 9/ 为/ 固定值/ 约束/ ,/ 在/ 测试/ 生成/ 时/ 将/ 该/ 约束条件/ 中/ 定义/ 的/ 配置/ 参数/ 设定/ 为/ 固定值/ 即可/ ./ 上述/ 约束条件/ 中/ 包含/ 多个/ 配置/ 参数/ ,/ 直接/ 为/ 这些/ 参数/ 生成/ 约束/ 依赖图/ 将会/ 大大增加/ 运算/ 复杂度/ ,/ 因此/ 我们/ 提高/ 了/ 约束/ 依赖图/ 的/ 抽象层次/ ,/ 以/ 物体/ 为/ 单位/ 构造/ 约束/ 依赖图/ ,/ 如图/ 3/ 所示/ ./ 根据/ 图/ 的/ 连通性/ 将/ 该/ 图/ 划分/ 为/ 两个/ 子图/ G1/ 和/ G2/ ,/ G1/ 是/ 关于/ 静止/ 物体/ 的/ 约束条件/ ,/ G2/ 是/ 关于/ 移动/ 物体/ 的/ 约束条件/ ./ 确定/ 约束条件/ 以及/ 约束条件/ 可能/ 的/ 取值/ 后/ 即可/ 利用/ 组合/ 测试方法/ 生成/ 约束/ 组合/ ,/ 并/ 为/ 每组/ 约束/ 组合/ 生成/ 配置/ 参数/ 的/ 具体/ 取值/ ./ 本/ 实验/ 除了/ 生成/ 配置/ 参数/ 还要/ 为/ 物体/ 设置/ Page10/ 碰撞/ 后/ 的/ 动作/ ,/ 移动/ 物体/ 动作/ 集合/ 为/ M/ -/ Action/ =/ {/ verticalRevese/ ,/ horizontalReverse/ ,/ allReverse/ ,/ M/ -/ appear/ ,/ M/ -/ disappear/ }/ ,/ 静止/ 物体/ 动作/ 集合/ 为/ S/ -/ Action/ =/ {/ S/ -/ appear/ ,/ S/ -/ disappear/ }/ ./ 碰撞/ 过程/ 由/ 两个/ 物体/ 参与/ 完成/ ,/ 包括/ 移动/ 物体/ 与/ 静止/ 物体/ 的/ 碰撞/ 以及/ 移动/ 物体/ 与/ 移动/ 物体/ 的/ 碰撞/ ./ 物体/ 碰撞/ 后/ 的/ 动作/ 是/ 同时/ 发生/ 的/ ,/ 因此/ 这些/ 动作/ 均/ 为/ 并行执行/ ,/ 动作/ 配置/ 约束条件/ 仅/ 针对/ 移动/ 物体/ 与/ 移动/ 物体/ 的/ 碰撞/ ,/ 包括/ :/ (/ 1/ )/ ParellelVertical/ =/ {/ M/ -/ appear/ ,/ verticalReverse/ ,/ allReverse/ ,/ M/ -/ disappear/ ,/ S/ -/ appear/ ,/ S/ -/ disappear/ }/ ./ (/ 2/ )/ ParellelHorizontal/ =/ {/ M/ -/ appear/ ,/ horizontal/ -/ Reverse/ ,/ allReverse/ ,/ M/ -/ disappear/ ,/ S/ -/ appear/ ,/ S/ -/ disappear/ }/ ./ 由于/ 被/ 测系统/ 动作/ 数量/ 有限/ ,/ 并且/ 动作/ 之间/ 的/ 约束条件/ 简单/ ,/ 因此/ 可以/ 直接/ 为/ 两个/ 移动/ 物体/ 构造/ 如表/ 10/ 所示/ 的/ 4/ 组/ 动作/ 组合/ ,/ 移动/ 物体/ 与/ 静止/ 物体/ 碰撞/ 后/ 的/ 动作/ 进行/ 随机/ 配置/ ./ verticalReverseverticalReversehorizontalReverse/ 本/ 实验/ 将/ 现有/ 的/ 组合/ 测试/ 算法/ 应用/ 于/ MTASaaS/ 服务/ 的/ 配置/ 测试/ 中/ ,/ 直接/ 将/ 服务/ 的/ 约束条件/ 作为/ 算法/ 的/ 组合/ 元素/ ,/ 为/ MTASaaS/ 服务/ 生成/ 若干/ 配置/ 场景/ ,/ 与/ 现有/ 方法/ 相比/ ,/ 本/ 方法/ 主要/ 有/ 以下几点/ 创新/ :/ (/ 1/ )/ 传统/ 组合/ 测试/ 通常/ 应用/ 于/ 参数/ 的/ 生成/ ,/ 而本/ 实验/ 则/ 扩展/ 了/ 组合/ 测试/ 算法/ 的/ 应用/ 范围/ ,/ 不仅/ 利用/ 组合/ 测试/ 算法/ 生成/ 参数/ ,/ 还/ 生成/ 了/ 服务/ 的/ 动作/ 序列/ ;/ (/ 2/ )/ 在/ 处理/ 服务/ 约束条件/ 方面/ 也/ 有所不同/ ,/ 现有/ 算法/ 主要/ 分为/ 两种/ :/ 一种/ 是/ 在/ 生成/ 参数/ 组合/ 前/ 考察/ 约束条件/ ,/ 避免/ 在/ 生成/ 过程/ 中/ 产生/ 非法/ 的/ 参数/ 组合/ ;/ 另/ 一种/ 是/ 在/ 生成/ 参数/ 组合/ 后/ 考察/ 约束条件/ ,/ 用以/ 剔除/ 非法/ 参数/ 组合/ ./ 而本/ 实验/ 则/ 直接/ 将/ 约束条件/ 作为/ 组合/ 测试/ 算法/ 的/ 组合/ 元素/ ,/ 参数/ 的/ 具体/ 取值/ 则/ 是/ 在/ 约束/ 组合/ 的/ 基础/ 上/ 利用/ 模拟退火/ 算法/ 生成/ ;/ (/ 3/ )/ 在/ 生成/ 参数/ 取值/ 时/ ,/ 本/ 方法/ 面临/ 多条/ 约束条件/ 对/ 参数/ 的/ 共同/ 约束/ ,/ 因此/ 将/ 传统/ 模拟退火/ 算法/ 的/ 目标/ 函数/ 定义/ 为/ 多个/ 子目标/ 函数/ 之/ 和/ ,/ 每个/ 子目标/ 函数/ 对应/ 一条/ 约束条件/ ,/ 总/ 目标/ 函数/ 则/ 对应/ 于/ 一组/ 约束/ 组合/ ./ 5.2/ 实验/ 结果/ 5.2/ ./ 1/ 对/ 约束/ 组合/ 的/ 覆盖/ 比较/ 游戏/ 系统/ 中/ 静止/ 物体/ 和/ 移动/ 物体/ 的/ 参数/ 约束条件/ 组合/ 均/ 通过/ 正交/ 试验/ 设计/ 、/ IPO/ 算法/ [/ 6/ ]/ 以及/ one/ -/ row/ -/ at/ -/ a/ -/ time/ [/ 7/ ]/ 算法/ 生成/ ,/ 由于/ 静止/ 物体/ 配置/ 参数/ 数量/ 少/ 、/ 约束条件/ 简单/ ,/ 因此/ 3/ 种/ 算法/ 生成/ 的/ 测试数据/ 在/ 数量/ 、/ 质量/ 上/ 均/ 无/ 显著/ 差异/ ./ 本文/ 将/ 着重/ 分析/ 上述/ 4/ 种/ 算法/ 为/ 移动/ 物体/ 生成/ 的/ 配置/ 参数/ 对/ 约束条件/ 的/ 覆盖/ 情况/ ./ 本节/ 将/ 系统/ 的/ 约束条件/ 概括/ 为/ 以下/ 4/ 类/ :/ (/ 1/ )/ 物体/ 是否/ 出界/ ;/ (/ 2/ )/ 两/ 移动/ 物体/ 是否/ 重叠/ ;/ (/ 3/ )/ 两/ 移动/ 物体/ 的/ 运动/ 方向/ 组合/ 约束/ ;/ (/ 4/ )/ 两/ 移动/ 物体/ 的/ 碰撞/ 动作/ 组合/ 约束/ ./ 对比/ 基于/ 约束/ 组合/ 的/ 3/ 种/ 组合/ 测试方法/ 和/ 不/ 考虑/ 约束条件/ 的/ 正交/ 试验/ 设计/ 方法/ 生成/ 的/ 测试数据/ ,/ 能够/ 得出/ 如下/ 结论/ :/ (/ 1/ )/ 传统/ 的/ 正交/ 试验/ 设计/ 方法/ 生成/ 的/ 测试数据/ 数量/ 最/ 多/ ,/ 基于/ 约束/ 组合/ 的/ 正交/ 试验/ 方法/ 次之/ ./ 在/ 基于/ 约束/ 组合/ 的/ 3/ 种/ 测试方法/ 中/ ,/ 正交/ 试验/ 设计/ 方法/ 生成/ 的/ 测试数据/ 数量/ 远远/ 大于/ 其他/ 两种/ 组合/ 测试方法/ ,/ 大约/ 是/ 其他/ 两种/ 方法/ 测试数据/ 数量/ 的/ 2.4/ 倍/ ,/ 因为/ 正交/ 试验/ 设计/ 除了/ 要/ 满足/ 强度/ 为/ 2/ 的/ 组合/ 覆盖/ 要求/ ,/ 还要/ 满足/ 正交/ 性/ 等/ 特有/ 的/ 要求/ ./ 传统/ 正交/ 试验/ 设计/ 方法/ 生成/ 的/ 测试数据/ 数量/ 最/ 多/ ,/ 但/ 其中/ 有效/ 数据/ 的/ 数量/ 非常/ 有限/ ,/ 仅/ 占/ 全部/ 测试数据/ 的/ 13/ %/ ./ (/ 2/ )/ 对/ 单一/ 约束条件/ 的/ 覆盖/ 能力/ 基本一致/ ./ 基于/ 约束/ 组合/ 的/ 测试方法/ 均/ 能/ 覆盖/ 上述/ 4/ 种/ 约束条件/ 的/ 各种/ 取值/ 情况/ ,/ 约束条件/ 覆盖率/ 为/ 100/ %/ ;/ 传统/ 正交/ 试验/ 设计/ 方法/ 能够/ 覆盖/ 运动/ 方向/ 组合/ 约束/ 中/ 的/ 5/ 种/ 情况/ 以及/ 其余/ 约束条件/ 的/ 所有/ 取值/ 情况/ ,/ 约束条件/ 覆盖率/ 约/ 为/ 93/ %/ ./ 这/ 4/ 种/ 方法/ 生成/ 的/ 测试数据/ 与/ 单一/ 约束条件/ 的/ 覆盖/ 能力/ 对/ 比如/ 表/ 11/ 所示/ ./ (/ 3/ )/ 对/ 约束/ 组合/ 的/ 覆盖/ 能力/ 相差/ 较大/ ./ 基于/ 约束/ 组合/ 的/ 3/ 种/ 测试方法/ 对/ 约束/ 组合/ 的/ 覆盖/ 能力/ 明显/ 优于/ 传统/ 正交/ 试验/ 设计/ 方法/ ,/ 传统/ 正交/ 试验/ 设计/ 方法/ 仅能/ 覆盖/ 50/ %/ 的/ 约束/ 组合/ ;/ 基于/ 约束/ 组合/ 的/ 3/ 种/ 测试方法/ 中/ ,/ 正交/ 试验/ 设计/ 和/ one/ -/ row/ -/ at/ -/ a/ -/ time/ 算法/ 对/ 约束/ 组合/ 的/ 覆盖/ 能力/ 优于/ IPO/ 算法/ ,/ 前/ 两种/ 方法/ 均/ 能/ 覆盖/ 100/ %/ 的/ 约束/ 组合/ ,/ 而/ IPO/ 算法/ 仅能/ 覆盖/ 75/ %/ 的/ 约束/ 组合/ ./ 约束/ 组合/ 的/ 覆盖/ 能力/ 对/ 比如/ 表/ 12/ 所示/ ,/ 各/ 约束/ 组合/ 的/ 含义/ 为/ :/ Page11/ 表/ 11/ 对/ 单一/ 约束/ 的/ 覆盖/ 约束条件/ 1234/ 约束/ 组合/ 1234/ (/ verticalReverse/ ,/ horizontalReverse/ )/ (/ horizontalReverse/ ,/ ParallelHorizontal/ )/ ①/ 组合/ 1/ :/ 两/ 物体/ 均/ 在/ 界内/ ,/ 不/ 重叠/ ,/ 运动/ 方向/ 组合/ 为/ (/ other/ ,/ other/ )/ 、/ (/ horizontal/ ,/ other/ )/ 或者/ (/ vertical/ ,/ other/ )/ ,/ 碰撞/ 动作/ 组合/ 为/ (/ verticalReverse/ ,/ allReverse/ )/ 或/ (/ horizontalReverse/ ,/ allReverse/ )/ ;/ ②/ 组合/ 2/ :/ 两/ 物体/ 均/ 在/ 界内/ ,/ 不/ 重叠/ ,/ 运动/ 方向/ 故障/ 类型/ 子/ 故障/ 类型/ 表/ 13/ 被测/ 系统配置/ 故障/ 类型/ (/ 1/ )/ 参数/ 配置/ 故障/ (/ 2/ )/ 行为/ 配置/ 故障/ 个/ 移动/ 物体/ 的/ 碰撞/ 行为/ Rerverse/ 时/ ,/ 就/ 会/ 发生/ 故障/ Rerverse/ 时/ ,/ 就/ 会/ 发生/ 故障/ 基于/ 约束/ 组合/ 的/ 测试/ IPO54/ 数量/ 83016223210612222214101020/ 组合/ 为/ 任意/ 组合/ ,/ 碰撞/ 动作/ 组合/ 为/ 包含/ 动作/ appear/ 的/ 任意/ 动作/ 组合/ ;/ ③/ 组合/ 3/ :/ 两/ 物体/ 均/ 在/ 界内/ ,/ 重叠/ ;/ ④/ 组合/ 4/ :/ 两/ 物体/ 均/ 在/ 界内/ ,/ 不/ 重叠/ ,/ 运动/ 方向/ 组合/ 为/ 任意/ 组合/ ,/ 碰撞/ 动作/ 组合/ 为/ (/ verticalReverse/ ,/ horizontalReverse/ )/ ./ 5.2/ ./ 2/ 对/ 错误/ 检测/ 能力/ 的/ 比较/ 针对/ 被/ 测系统/ 的/ 参数/ 配置/ 和/ 行为/ 配置/ ,/ 我们/ 将/ 配置/ 故障/ 进一步/ 划分/ 为/ 以下/ 7/ 类/ ,/ 表/ 13/ 列出/ 了/ MTA/ -/ AGM/ 系统/ 可能/ 的/ 配置/ 故障/ 及其/ 在/ 被/ 测系统/ 中/ 的/ 具体表现/ ./ Page12/ (/ 1/ )/ 参数/ 配置/ 故障/ 类型/ ./ 定义/ 如下/ 3/ 种/ 故障/ 类型/ ,/ {/ PFi/ |/ i/ =/ 1/ ,/ 2/ ,/ 3/ }/ :/ ①/ PF1/ 违反/ 对/ 单个/ 配置/ 参数/ 的/ 取值/ 约束/ ./ 例如/ 物体/ 的/ 坐标/ 超出/ 了/ 系统对/ 其/ 约定/ 的/ 取值/ 范围/ ;/ ②/ PF2/ 违反/ 多个/ 配置/ 参数/ 之间/ 的/ 约束条件/ ./ 例如/ 判定/ 物体/ 是否/ 出界/ 的/ 约束条件/ 中/ 就/ 包含/ 了/ 多个/ 配置/ 参数/ ,/ 有/ 物体/ 的/ 横坐标/ 、/ 纵坐标/ 、/ 物体/ 长度/ 以及/ 物体/ 宽度/ 等/ ;/ ③/ PF3/ 违反/ 系统/ 约束/ ./ 例如/ ,/ 要求/ 每个/ 游戏/ 实例/ 必须/ 包含/ 一个/ 可控/ 移动/ 物体/ ,/ 如果/ 游戏/ 中/ 不/ 包含/ 可控/ 移动/ 物体/ ,/ 则/ 该游戏/ 无法/ 进行/ ./ (/ 2/ )/ 行为/ 配置/ 故障/ 类型/ ./ 定义/ 如下/ 4/ 种/ 故障/ 类型/ ,/ {/ BFi/ |/ i/ =/ 1/ ,/ 2/ ,/ 3/ ,/ 4/ }/ ./ ①/ BF1/ 动作/ 绑定/ 故障/ ./ 系统/ 将/ 动作/ 绑定/ 到/ 错误/ 的/ 物体/ ,/ 例如/ ,/ 对于/ 两个/ 发生/ 碰撞/ 的/ 物体/ A/ 和/ B/ ,/ 将/ A/ 碰撞/ 后/ 的/ 动作/ 设置/ 为/ verticalReverse/ ,/ B/ 碰撞/ 后/ 的/ 动作/ 设置/ 为/ allReverse/ ,/ 但/ 由于/ 配置/ 系统故障/ ,/ 将/ 动作/ verticalReverse/ 错误/ 的/ 绑定/ 到/ 物体/ B/ ,/ 而且/ 将/ 动作/ allReverse/ 绑定/ 到/ 物体/ A/ ;/ ②/ BF2/ 两个/ 发生/ 碰撞/ 的/ 移动/ 物体/ 的/ 动作/ 配置/ 冲突/ ./ 例如/ ,/ 对于/ 两个/ 发生/ 碰撞/ 的/ 移动/ 物体/ A/ 和/ B/ ,/ 如果/ A/ 的/ 碰撞/ 动作/ 设置/ 为/ verticalReverse/ ,/ 则/ B/ 的/ 碰撞/ 动作/ 就/ 不能/ 设置/ 为/ horizontalReverse/ ;/ ③/ BF3/ 动作/ 配置/ 违反/ 物体/ 行为/ 约束/ ./ 例如/ ,/ 物体/ 碰撞/ 动作/ 受到/ 碰撞/ 面/ 的/ 约束/ ,/ 当/ 物体/ 的/ 碰撞/ 面为/ 左/ // 右侧/ 面时/ ,/ 动作/ 不能/ 设置/ 为/ verticalReverse/ ,/ 否则/ 游戏/ 将/ 出现/ 运行/ 故障/ ;/ ④/ BF4/ 动作/ 配置/ 违反/ 系统/ 约束/ ./ 例如/ ,/ 可控/ 移动/ 物体/ 在/ 碰撞/ 之后/ 的/ 动作/ 不/ 允许/ 设置/ 为/ disappear/ ,/ 否则/ 游戏/ 将/ 无法/ 继续/ ./ 仅/ 覆盖/ 单一/ 约束条件/ 的/ 测试数据/ 能够/ 发现/ 的/ 故障/ 类型/ 比较简单/ ,/ 而/ 复杂/ 的/ 故障/ 则/ 要/ 利用/ 能够/ 覆盖/ 约束/ 组合/ 的/ 测试数据/ 来/ 发现/ ./ 例如/ 表/ 13/ 中/ 的/ 故障/ (/ 2.1/ ./ 1/ )/ 、/ (/ 2.1/ ./ 2/ )/ 要/ 利用/ 能够/ 覆盖/ 约束/ 组合/ 1/ 的/ 测试数据/ 才能/ 发现/ ,/ 故障/ (/ 2.3/ ./ 3/ )/ 由/ 能够/ 覆盖/ 约束/ 组合/ 2/ 的/ 测试数据/ 发现/ 等等/ ./ 测试数据/ 故障/ 检测/ 能力/ 的/ 差别/ 主要/ 由/ 对/ 约束/ 组合/ 的/ 覆盖/ 能力/ 引起/ ,/ 基于/ 约束/ 组合/ 的/ 正交/ 试验/ 设计/ 和/ one/ -/ row/ -/ at/ -/ a/ -/ time/ (/ ORAT/ )/ 算法/ 均/ 能/ 发现/ 上述/ 15/ 种/ 系统故障/ ,/ IPO/ 算法/ 能/ 发现/ 11/ 种/ 系统故障/ ,/ 传统/ 正交/ 试验/ 设计/ 只能/ 发现/ 9/ 种/ 系统故障/ ,/ 4/ 种/ 方法/ 的/ 故障/ 检测/ 能力/ 对/ 比如/ 图/ 4/ 所示/ ,/ 分别/ 为/ 100/ %/ 、/ 73/ %/ 、/ 100/ %/ 以及/ 60/ %/ ./ 5.2/ ./ 3/ 算法/ 复杂度/ 分析/ 被测/ 服务/ 约束/ 模型/ 中/ 包含/ k/ 个/ 参数/ p1/ ,/ p2/ ,/ …/ ,/ pk/ 以及/ m/ 条/ 约束条件/ c1/ ,/ c2/ ,/ …/ ,/ cm/ ,/ 约束条件/ ci/ 中/ 包含/ 的/ 参数/ 个数/ 用/ |/ ci/ |/ 表示/ ./ 数据/ 约束/ 依赖图/ 构造/ 算法/ 首先/ 为/ 每个/ 参数/ 和/ 每条/ 约束条件/ 生成/ 相应/ 的/ 节点/ ,/ 共/ 生成/ m/ +/ k/ 个/ 节点/ ./ 然后/ 为/ 每个/ 约束/ 节点/ 添加/ 边/ ,/ 每个/ 约束/ 节点/ 的/ 边/ 的/ 数量/ 为/ 该/ 约束条件/ 中/ 包含/ 参数/ 的/ 个数/ ,/ 共/ 添加/ ∑/ 多/ 包含/ k/ 个/ 参数/ ,/ 因此/ 该/ 算法/ 的/ 时间/ 复杂度/ 最多为/ O/ (/ m/ ×/ k/ )/ ./ 正交/ 试验/ 设计/ 方法/ 的/ 优势/ 是/ 正交/ 表均/ 已/ 计算/ 完成/ ,/ 可以/ 直接/ 使用/ ,/ 目前/ 已有/ 工具/ 可以/ 自动/ 将/ 确定/ 好/ 的/ 实验/ 因素/ 、/ 水平/ 映射/ 到/ 正交/ 表中/ ,/ 列出/ 实验/ 方案/ ,/ 但/ 实验/ 因素/ 和/ 水平/ 的/ 确定/ ,/ 以及/ 正交/ 表/ 的/ 选择/ 仍/ 需/ 人工/ 手动/ 完成/ ,/ 难以实现/ 自动化/ ./ 正交/ 试验/ 设计/ 对/ 实验/ 因素/ 及其/ 水平/ 个数/ 的/ 要求/ 也/ 比较/ 严格/ ,/ 并/ 不是/ 所有/ 测试/ 均/ 能/ 利用/ 该/ 方法/ ./ IPO/ 算法/ 和/ one/ -/ row/ -/ at/ -/ a/ -/ time/ 算法/ 则/ 能够/ 实现/ 自动化/ 计算/ ,/ 对于/ m/ 条/ 约束条件/ ,/ 假设/ 这些/ 约束条件/ 均/ 为/ 布尔/ 类型/ ,/ 则/ 每条/ 约束条件/ 均/ 有/ 2/ 个/ 可能/ 的/ 取值/ ,/ 则/ 生成/ 约束/ 组合/ 时/ ,/ IPO/ 算法/ 的/ 时间/ 复杂度/ 为/ O/ (/ 23m2log/ (/ m/ )/ )/ ,/ one/ -/ row/ -/ at/ -/ a/ -/ time/ 算法/ 的/ 时间/ 复杂度/ 为/ O/ (/ 24m2log/ (/ m/ )/ )/ ./ 对于/ 已/ 生成/ 的/ 约束/ 组合/ ,/ 假设/ 共有/ M/ 组/ 约束/ 组合/ ,/ 每组/ 约束/ 组合/ 中/ 包含/ m/ 条/ 约束条件/ ,/ 布尔/ 类型/ 的/ 约束条件/ ci/ 中/ 包含/ λ/ i/ 个项/ ,/ 则/ 每组/ 约束/ 组合/ 的/ 目标/ 函数/ 中将/ 包含/ m/ 个子/ 目标/ 函数/ ,/ 对应/ 于/ 约束条件/ ci/ 的/ 子目标/ 函数/ 共有/ λ/ i/ 种/ 定义方法/ ,/ 因此/ 目标/ 函数/ 定义/ 算法/ 的/ 时间/ 复杂度/ 最多为/ O/ (/ M/ ×/ ∑/ 5.3/ 局限性/ 分析/ (/ 1/ )/ 约束/ 的/ 正确性/ 、/ 完整性/ 和/ 一致性/ 本/ 方法/ 的/ 一个/ 前提条件/ 是/ 能够/ 获取/ 相应/ 的/ 领域/ Page13/ 知识/ ,/ 以/ 建立/ 被/ 测系统/ 正确/ 、/ 完整/ 、/ 一致/ 的/ 约束/ 模型/ ,/ 领域/ 知识/ 的/ 完整性/ 和/ 正确性/ 是/ 保证/ 约束/ 模型/ 质量/ 的/ 基础/ ./ 完整/ 准确/ 的/ 约束/ 模型/ 能够/ 提高/ 测试/ 生成/ 的/ 质量/ 和/ 效率/ ,/ 从而/ 更/ 全面/ 的/ 发现/ 系统/ 的/ 隐藏/ 错误/ ./ 然而/ ,/ 由于/ 领域/ 知识/ 目前/ 存在/ 多种不同/ 的/ 描述/ 形式/ ,/ 并且/ 其/ 内容/ 的/ 完整性/ 和/ 准确性/ 也/ 难以/ 保证/ ,/ 因此/ 领域/ 知识/ 的/ 获取/ 和/ 被/ 测系统/ 建模/ 仍然/ 是/ 一个/ 需要/ 大量/ 人力/ 投入/ 的/ 过程/ ,/ 难以实现/ 自动化/ ,/ 被/ 测系统/ 的/ 模型/ 质量/ 在/ 很大/ 程度/ 上/ 依赖于/ 测试人员/ 的/ 经验/ 和/ 技术水平/ ,/ 尤其/ 对于/ 大规模/ 系统/ ,/ 此/ 问题/ 更加/ 突出/ ./ (/ 2/ )/ 生成/ 算法/ 的/ 复杂度/ 通常/ 情况/ 下/ ,/ 系统/ 的/ 某个/ 特性/ 由/ 多个/ 参数/ 共同/ 决定/ ,/ 这些/ 参数/ 之间/ 通常/ 存在/ 多种/ 约束/ 依赖/ 关系/ ,/ 而/ 描述/ 不同/ 特性/ 的/ 参数/ 之间/ 一般/ 不/ 存在/ 约束/ 依赖/ 关系/ ./ 因此/ ,/ 对于/ 有/ 大量/ 配置/ 参数/ 的/ 系统/ ,/ 根据/ 参数/ 之间/ 是否/ 存在/ 约束/ 依赖/ 关系/ 能够/ 将/ 参数/ 分为/ 多个/ 参数/ 组/ ,/ 属于/ 同/ 一组/ 的/ 参数/ 之间/ 存在/ 约束/ 依赖/ 关系/ ,/ 而/ 不同/ 组/ 的/ 参数/ 之间/ 不/ 存在/ 约束/ 依赖/ 关系/ ./ 这样/ ,/ 在/ 生成/ 参数/ 取值/ 时/ 能够/ 更/ 有/ 针对性/ 的/ 考察/ 约束条件/ 的/ 满足/ 情况/ ,/ 并且/ 分组/ 后/ ,/ 每个/ 参数/ 组中/ 包含/ 的/ 参数/ 数量/ 少/ ,/ 约束条件/ 相对/ 简单/ ,/ 所以/ ,/ 能够/ 保证/ 参数/ 取值/ 的/ 生成/ 效率/ 和/ 质量/ ./ 如果/ 被/ 测系统/ 包含/ 大量/ 参数/ ,/ 并且/ 这些/ 参数/ 之间/ 存在/ 错综复杂/ 的/ 约束/ 依赖/ 关系/ ,/ 难以/ 分组/ ,/ 测试/ 生成/ 时/ 需要/ 考察/ 的/ 参数/ 及/ 约束条件/ 的/ 数量/ 就/ 会/ 大大增加/ ,/ 从而/ 提高/ 算法/ 的/ 复杂度/ ,/ 严重/ 影响/ 测试/ 生成/ 的/ 效率/ 和/ 质量/ ./ 6/ 相关/ 工作/ 6.1/ SaaS/ 测试/ 技术/ 多/ 租户/ 体系/ 架构/ 使得/ SaaS/ 软件/ 的/ 用户量/ 有/ 了/ 前所未有/ 的/ 增长/ ,/ 基于/ 庞大/ 的/ 用户群/ ,/ SaaS/ 软件/ 也/ 具有/ 了/ 相当可观/ 的/ 规模/ 和/ 复杂度/ ,/ 同时/ 也/ 为/ SaaS/ 软件测试/ 带来/ 了/ 新/ 的/ 挑战/ [/ 8/ ]/ ./ SaaS/ 应用软件/ 的/ 测试/ 技术/ 不同于/ 传统/ 的/ 软件测试/ ,/ 云/ 计算/ 减少/ 了/ 软/ 、/ 硬件/ 的/ 投入/ ,/ 能够/ 降低/ SaaS/ 测试/ 的/ 成本/ ;/ SaaS/ 软件测试/ 需要/ 实现/ 自动化/ 持续/ 在线/ 测试/ ,/ 并且/ 具有/ 一定/ 的/ 可扩展性/ ,/ 能够/ 满足/ 多/ 租户/ 需求/ [/ 9/ ]/ ./ 文献/ [/ 8/ ]/ 提出/ 在/ 传统/ 软件测试/ 领域/ ,/ 软件测试/ 活动/ 通常/ 在/ 所有/ 开发/ 活动/ 全部/ 结束/ 后/ 才/ 开始/ ./ 但是/ ,/ 这样/ 的/ 开发/ -/ 测试/ 模式/ 显然/ 无法/ 满足/ 快速/ 发展/ 的/ SaaS/ 以及/ MTA/ 的/ 需求/ ./ 因此/ ,/ 该/ 文献/ 提出/ 一种/ 双层/ 数据库/ 分区/ 技术/ 来/ 支持/ SaaS/ 定制/ 需求/ ,/ 并/ 利用/ 元/ 数据/ 的/ 约束/ 作为/ 测试用例/ 来/ 实现/ SaaS/ 软件/ 的/ 持续/ 测试/ ./ 文献/ [/ 9/ ]/ 则/ 介绍/ 了/ 几种/ 现有/ 的/ SaaS/ 可扩展性/ 测试/ 的/ 评价/ 标准/ ,/ 并/ 提出/ 了/ 一种/ 新/ 的/ 评价/ 标准/ ,/ 结合/ 该/ 标准/ 和/ 数据挖掘/ 技术/ 实现/ 了/ SaaS/ 的/ 可扩展性/ 测试/ ./ Salesforce/ ./ com/ 作为/ 软件/ 即/ 服务/ (/ SaaS/ )/ 的/ 先驱/ ,/ 首先/ 为/ 用户/ 提供/ 了/ 按/ 需/ CRM/ 服务/ ./ 在/ 提供/ 按/ 需/ 开发/ 服务/ 的/ 同时/ ,/ 为/ 确保/ 服务质量/ ,/ Salesforce/ ./ com/ 也/ 需要/ 为/ 开发者/ 或/ 用户/ 提供/ 按/ 需/ 服务平台/ 的/ 测试方法/ ./ 按/ 需/ 服务平台/ 的/ 测试/ 需要/ 解决/ 以下/ 3/ 个/ 主要/ 问题/ :/ (/ 1/ )/ 用户/ 定制/ 的/ 正确性/ ;/ (/ 2/ )/ 应用程序/ 的/ 正确性/ ;/ (/ 3/ )/ 应用程序/ 新/ 版本/ 的/ 正确性/ ./ Force/ ./ com/ 提供/ 了/ 一种/ Apex/ 测试/ 框架/ ,/ 这种/ 测试/ 框架/ 能够/ 实现/ 自动化/ 单元测试/ 以及/ 自动化/ 功能测试/ [/ 10/ ]/ ./ 6.2/ 组合/ 测试/ 技术/ 在/ 组合/ 测试/ 中/ ,/ 采用/ 覆盖率/ 标准/ 来/ 评价/ 测试/ 的/ 完备/ 性/ ./ 对于/ 有/ n/ 个/ 参数/ 的/ 被/ 测/ 服务/ ,/ 强度/ 为/ t/ (/ 1/ / t/ / n/ )/ 的/ 覆盖/ 要求/ 生成/ 的/ 测试用例/ 能够/ 覆盖/ 任意/ t/ 个/ 参数/ 的/ 所有/ 取值/ 组合/ ./ 在/ 定义/ 覆盖率/ 标准/ 时/ 也/ 可以/ 加入/ 参数/ 语义/ 信息/ ,/ 并且/ 在/ 组合/ 测试/ 时/ 对/ 合法/ 取值/ 和/ 非法/ 取值/ 区别对待/ [/ 11/ ]/ ,/ 根据/ 测试/ 需求/ 为/ 合法/ 取值/ 和/ 非法/ 取值/ 分别/ 定义/ 覆盖率/ 标准/ ./ 范畴/ (/ category/ )/ 划分/ 测试方法/ [/ 12/ ]/ 针对/ 被/ 测系统/ 每个/ 能够/ 单独/ 测试/ 的/ 功能/ 单元/ ,/ 将/ 参数/ 和/ 环境变量/ 的/ 范畴/ 划分/ 成/ 多个/ 选择/ (/ choice/ )/ ,/ 通过/ 组合/ 这些/ 选择/ 为/ 被/ 测/ 单元/ 生成/ 测试用例/ ./ 分类/ 树/ 方法/ [/ 13/ ]/ 是/ 针对/ 黑盒/ 测试/ 提出/ 的/ 一种/ 测试方法/ ,/ 该/ 方法/ 借鉴/ 了/ 范畴/ 划分/ 方法/ 的/ 思想/ ,/ 并/ 对/ 其/ 进行/ 了/ 改进/ ,/ 将/ 测试/ 相关/ 信息/ 组织/ 成/ 树形/ 结构/ ./ 以/ 分类/ 树为/ 表头/ 建立/ 组合/ 表/ ,/ 选择/ 不同/ 的/ 叶/ 节点/ 组成/ 测试用例/ ./ Cohen/ 等/ 人/ [/ 11/ ]/ 将/ 所有/ 参数/ 随机/ 排序/ ,/ 按照/ 参数/ 顺序/ 依次/ 为/ 参数/ 赋值/ ,/ 要求/ 所/ 选取/ 值/ 能够/ 覆盖/ 最多/ 未/ 被/ 覆盖/ 的/ 组合/ ,/ 从而/ 生成/ 满足/ 某种/ 覆盖率/ 要求/ 的/ 测试数据/ ./ IPO/ 算法/ [/ 6/ ]/ 为/ 被/ 测/ 服务/ 的/ 前/ 两个/ 参数/ 生成/ 所有/ 取值/ 组合/ ,/ 并/ 在/ 此基础/ 上/ 分别/ 进行/ 横向/ 和/ 纵向/ 扩展/ 生成/ 满足/ 两/ 两/ 覆盖/ 的/ 测试用例/ 集/ ./ IPOG/ 算法/ [/ 14/ ]/ 是/ 对/ IPO/ 算法/ 的/ 改进/ ,/ 能够/ 为/ 被/ 测/ 服务/ 生成/ 满足/ 覆盖/ 强度/ 为/ t/ (/ t/ >/ 2/ )/ 的/ 测试用例/ 集/ ./ Mandl/ [/ 5/ ]/ 首次/ 将/ 正交/ 拉丁/ 方/ 引入/ 软件测试/ 领域/ ,/ 应用/ 正交/ 拉丁/ 方/ 为/ 测试/ Ada/ 编译器/ 生成/ 测试数据/ ,/ 并/ 达到/ 两/ 两/ 覆盖/ 标准/ ./ Williams/ 等/ 人/ [/ 15/ ]/ 介绍/ 了/ 正交/ 拉丁/ 方/ 的/ 构造方法/ ,/ 并/ 提出/ 了/ 正交/ 拉丁/ 方/ 适用/ Page14/ 范围/ 的/ 要求/ :/ (/ 1/ )/ 所有/ 参数/ 的/ 取值/ 数量/ 相同/ ;/ (/ 2/ )/ 参数/ 之间/ 不/ 存在/ 依赖/ 关系/ ;/ (/ 3/ )/ 对于/ 相应/ 的/ 参数/ 数量/ 和/ 取值/ 数量/ 存在/ 足够/ 的/ 正交/ 拉丁/ 方/ 用以/ 构造/ 测试/ ./ 但/ 在/ 实际/ 应用/ 中/ ,/ 以上/ 要求/ 均/ 难以/ 满足/ ,/ 因此/ Williams/ 等/ 人/ 通过/ 为/ 较/ 少/ 取值/ 的/ 参数/ 增加/ 重复/ 取值/ 以及/ 对/ 参数/ 取值/ 进行/ 组合/ 来/ 扩展/ 正交/ 拉丁/ 方在/ 软件测试/ 领域/ 的/ 适用范围/ ./ 在/ 正交/ 数组/ 的/ 基础/ 上/ ,/ Williams/ [/ 16/ ]/ 提出/ 了/ 覆盖/ 数组/ 的/ 构造方法/ ,/ 通过/ 对/ 小型/ 的/ 正交/ 数组/ 进行/ 相应/ 的/ 运算/ 能够/ 获得/ 基础/ 数组/ 以及/ 简化/ 数组/ ,/ 对/ 原始/ 正交/ 数组/ 、/ 基础/ 数组/ 以及/ 简化/ 数组/ 进行/ 适当/ 的/ 组装/ 得到/ 覆盖/ 数组/ ,/ 覆盖/ 数组/ 能/ 容纳/ 几倍/ 于/ 正交/ 数组/ 的/ 参数/ ,/ 并/ 能够/ 达到/ 两/ 两/ 覆盖/ 的/ 要求/ ./ 传统/ 组合/ 测试/ 的/ 目标/ 是/ 尽可能/ 多/ 的/ 发现/ 由/ 参数/ 交互作用/ 引起/ 的/ 服务/ 失效/ [/ 7/ ]/ ,/ 但/ 在/ 参数/ 组合/ 时/ 却/ 恰恰/ 缺少/ 对/ 参数/ 之间/ 交互作用/ 的/ 考察/ 和/ 应用/ ,/ 因此/ 难以/ 保证/ 测试/ 生成/ 的/ 质量/ ./ 本文/ 没有/ 直接/ 利用/ 传统/ 的/ 组合/ 测试方法/ 来/ 生成/ 测试数据/ ,/ 而是/ 提取/ 系统/ 参数/ 的/ 约束条件/ ,/ 生成/ 约束/ 组合/ ,/ 并/ 在/ 约束/ 组合/ 的/ 基础/ 上/ 生成/ 参数/ 取值/ ./ 该/ 方法/ 在/ 生成/ 测试数据/ 时/ 目标/ 明确/ ,/ 因此/ 提高/ 了/ 测试/ 生成/ 的/ 效率/ 和/ 质量/ ./ 在/ 实验设计/ 中/ ,/ 采用/ 了/ 正交/ 试验/ 设计/ 方法/ 、/ IPO/ 算法/ 以及/ one/ -/ row/ -/ at/ -/ a/ -/ time/ 算法/ 等/ ./ 由于/ 参数/ 之间/ 的/ 约束/ 依赖/ 关系/ 是/ 测试数据/ 生成/ 的/ 一个/ 重要/ 因素/ ,/ 如果/ 在/ 组合/ 测试/ 中/ 忽略/ 这些/ 约束条件/ ,/ 则/ 会/ 生成/ 大量/ 无/ 意义/ 的/ 测试数据/ ./ 文献/ [/ 17/ ]/ 利用/ 断言/ (/ genericpredicate/ )/ 定义/ 两个/ 参数/ 的/ 取值/ 组合/ ,/ 利用/ 约束条件/ 检验/ 断言/ ,/ 找出/ 不合理/ 的/ 取值/ 组合/ ./ 文献/ [/ 18/ ]/ 在/ 输入/ 参数/ 模型/ 的/ 基础/ 上/ 介绍/ 了/ 几种/ 处理/ 参数/ 约束/ 的/ 方法/ ,/ 抽象/ 参数/ 法和子/ 模型/ 法/ 都/ 是/ 在/ 构建/ 输入/ 参数/ 模型/ 时/ 去除/ 所有/ 可能/ 的/ 冲突/ ./ 对于/ 逐个/ 选取/ 参数/ 取值/ 的/ 组合/ 方法/ ,/ 文献/ [/ 19/ ]/ 将/ 非法/ 的/ 取值/ 组合/ 标记/ 为/ 已/ 覆盖/ 组合/ ,/ 从而/ 在/ 构建/ 测试用例/ 的/ 过程/ 中/ 避免/ 了/ 对/ 非法/ 取值/ 组合/ 的/ 选取/ ./ 也/ 可以/ 在/ 测试用例/ 生成/ 完成/ 后/ ,/ 将/ 不/ 合法/ 的/ 测试用例/ 用/ 合法/ 的/ 测试用例/ 取代/ ./ 文献/ [/ 20/ ]/ 将/ 参数/ 约束条件/ 分为/ 硬/ 约束/ 和/ 软/ 约束/ ,/ 该/ 方法/ 根据/ 约束条件/ 为/ 测试用例/ 定义/ 优先级/ ,/ 优先级/ 高/ 的/ 测试用例/ 会/ 得到/ 优先/ 测试/ 的/ 机会/ ./ 现有/ 对/ 约束条件/ 的/ 处理/ 技术/ 均/ 是/ 在/ 参数/ 取值/ 离散/ 并且/ 取值/ 个数/ 较少/ 的/ 情况/ 下/ ,/ 采取/ 一定/ 的/ 措施/ 避免/ 选择/ 到/ 不合理/ 的/ 参数/ 取值/ 组合/ ,/ 对于/ 参数/ 取值/ 连续/ 、/ 取值/ 数量/ 巨大/ 的/ 情况/ ,/ 缺少/ 相关/ 讨论/ 和/ 研究/ ./ 在/ 对/ 被/ 测/ 服务/ 或/ 软件/ 进行/ 鲁棒性/ 测试/ 时/ ,/ 非法/ 的/ 参数/ 取值/ 和/ 取值/ 组合/ 同样/ 会/ 起到/ 非常/ 重要/ 的/ 作用/ ,/ 因此/ 在/ 测试数据/ 中/ 包含/ 一定/ 数量/ 的/ 非法/ 数据/ 是/ 非常/ 必要/ 的/ ./ 本文/ 利用/ 参数/ 之间/ 的/ 约束/ 依赖/ 关系/ 来/ 指导/ 参数/ 取值/ 的/ 生成/ ,/ 布尔/ 表达式/ 是/ 这些/ 约束条件/ 的/ 主要/ 形式/ 之一/ ./ 目前/ 在/ 布尔/ 表达式/ 测试/ 领域/ 已有/ 许多/ 成熟/ 的/ 策略/ ,/ 例如/ 多重/ 唯一/ 真点/ 策略/ (/ MultipleUniqueTruePoint/ ,/ MUTP/ )/ ,/ 唯一/ 真点/ 和/ 邻近/ 假点/ 对/ 策略/ (/ CorrespondingUniqueTruePointandNearFalsePointPair/ ,/ CUTPNFT/ )/ [/ 21/ ]/ ,/ 多重/ 邻近/ 假点/ 策略/ (/ MultipleNearFalsePoint/ ,/ MNFP/ )/ [/ 22/ ]/ 以及/ MUM/ -/ CUT/ [/ 22/ ]/ 策略/ 等/ ./ 在/ 本文/ 的/ 实验设计/ 中/ ,/ 当/ 遇到/ 布尔/ 表达式/ 类型/ 的/ 约束条件/ 时/ ,/ 将/ 采用/ MUTP/ 策略/ 生成/ 相应/ 的/ 测试数据/ ./ 7/ 总结/ 配置/ 测试/ 是/ 验证/ 多/ 租户/ 系统/ 能否/ 正确/ 应对/ 配置/ 过程/ 中/ 各种/ 突发/ 情况/ 的/ 有效/ 手段/ ,/ 本文/ 通过/ 对/ 多/ 租户/ 系统/ 的/ 分析/ 、/ 研究/ ,/ 总结/ 了/ 多/ 租户/ 系统/ 的/ 故障/ 模型/ ,/ 并/ 提出/ 了/ 一种/ 多/ 约束/ 组合/ 的/ 配置/ 测试方法/ ,/ 对/ 约束条件/ 进行/ 组合/ 测试/ ,/ 并/ 在/ 此基础/ 上/ 生成/ 满足/ 约束条件/ 的/ 测试数据/ ./ 实验/ 结果表明/ ,/ 该/ 方法/ 能够/ 有效/ 发现/ 参数/ 配置/ 以及/ 系统/ 行为/ 配置/ 方面/ 的/ 多种/ 配置/ 故障/ ,/ 且/ 可/ 从/ 约束条件/ 覆盖率/ 和/ 故障/ 检测/ 率/ 两/ 方面/ 提高/ 测试/ 效率/ ./ 

