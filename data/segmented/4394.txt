Page1/ 基于/ 启发式/ on/ -/ the/ -/ fly/ 的/ 扩展/ TGBA/ 模型/ 检测/ 算法/ 王曦/ 1/ )/ ,/ 2/ )/ 徐中伟/ 1/ )/ 1/ )/ (/ 同济大学/ 电子/ 与/ 信息/ 工程学院/ 上海/ 201804/ )/ 2/ )/ (/ 江西/ 理工大学/ 信息/ 工程学院/ 江西/ 赣州/ 341000/ )/ 摘要/ 以/ 广义/ B/ ü/ chi/ 自动机/ 为/ 研究/ 对象/ ,/ 对/ 其作/ 判空/ 检测/ 能为/ 解决/ 系统/ 的/ 状态/ 空间/ 爆炸/ 问题/ 提供/ 有效途径/ ./ 但/ 广义/ B/ ü/ chi/ 自动机/ 难以/ 适用/ 于/ 安全/ 苛求/ 计算机系统/ 中/ ,/ 只/ 需/ 满足/ 某个/ 可/ 接受/ 条件/ 子集/ 便/ 可/ 作出/ 非/ 空性/ 判断/ ,/ 进而/ 能/ 判断/ 出/ 系统/ 的/ 安全性/ 的/ 情形/ ./ 文中/ 提出/ 了/ 基于/ 启发式/ on/ -/ the/ -/ fly/ 的/ 扩展/ TGBA/ 模型/ 检测/ 算法/ ,/ 该/ 算法/ 采用/ ETGBA/ 模型/ ,/ 通过/ 启发式/ on/ -/ the/ -/ fly/ 判空/ 检测/ 方法/ 对/ ETGBA/ 作判空/ 检测/ 时/ ,/ 加强/ 了/ 对/ 不能/ 构成/ 其/ 可/ 接受/ 运行/ 的/ 结点/ 的/ 处理/ ,/ 节省/ 了/ 内存空间/ ,/ 提高/ 了/ 检测/ 效率/ ,/ 从而/ 能/ 较/ 快/ 地/ 作出/ 非/ 空性/ 判断/ ./ 通过/ 算法/ 的/ 正确性/ 证明/ 及/ 复杂度/ 分析/ 、/ 实验/ 比较/ 与/ 实例/ 研究/ 验证/ 了/ 所/ 提出/ 算法/ 的/ 正确性/ 与/ 实际/ 可行性/ ./ 与/ 已有/ 算法/ 相比/ ,/ 该/ 算法/ 的/ 通用性/ 更强/ ,/ 当/ 应用/ 于/ 广义/ B/ ü/ chi/ 自动机/ 的/ 判空/ 检测/ 时/ ,/ 其/ 时空/ 性能/ 均/ 优于/ 已有/ 算法/ ./ 关键词/ 模型/ 检测/ ;/ 广义/ B/ ü/ chi/ 自动机/ ;/ on/ -/ the/ -/ fly/ 算法/ ;/ 安全性/ 分析/ 1/ 引言/ 在/ 安全/ 苛求/ 计算机系统/ (/ safety/ -/ criticalcomputersystem/ )/ [/ 1/ ]/ 研究/ 领域/ 中/ ,/ 如何/ 保障系统/ 的/ 安全性/ 和/ 可靠性/ 成为/ 日益/ 紧迫/ 的/ 问题/ ./ 基于/ 自动机/ 理论/ 的/ 模型/ 检测/ [/ 2/ ]/ 具有/ 简洁明了/ 和/ 自动化/ 程度/ 高/ 的/ 优点/ ,/ 为/ 系统/ 的/ 安全性/ 、/ 可靠性/ 、/ 活性/ 等/ 属性/ 分析/ 提供/ 了/ 完整/ 的/ 验证/ 框架/ ,/ 其/ 算法/ 和/ 应用/ 研究/ 成/ 了/ 人们/ 关注/ 的/ 热点/ 之一/ ./ 在/ 该类/ 模型/ 检测/ 算法/ 中/ ,/ 关于/ 时序/ 逻辑/ 公式/ 取反/ 并/ 转化/ 生成/ 标准/ B/ ü/ chi/ 自动机/ 的/ 算法/ [/ 3/ -/ 4/ ]/ 及/ 如何/ 对/ 自动机/ 作/ 同步/ 积/ 运算/ 的/ 算法/ [/ 2/ ]/ 已有/ 深入研究/ ,/ on/ -/ the/ -/ fly/ 判空/ 检测/ 算法/ 通常/ 用于/ 标准/ B/ ü/ chi/ 自动机/ 的/ 判空/ 检测/ ,/ 主要/ 分为/ 嵌套/ 的/ 深度/ 优先/ 搜索/ 和/ 基于/ 强/ 连通/ 子图/ 的/ 搜索算法/ [/ 5/ -/ 9/ ]/ ,/ 但/ 检测/ 过程/ 中/ 容易/ 引起/ 状态/ 空间/ 的/ 爆炸/ 问题/ ./ 对/ 广义/ B/ ü/ chi/ 自动机/ 作判空/ 检测/ ,/ 能/ 有效/ 地/ 减少/ 系统/ 状态/ 空间/ 的/ 搜索/ ./ 文献/ [/ 10/ -/ 12/ ]/ 对/ 广义/ B/ ü/ chi/ 自动机/ 的/ 判空/ 检测/ 进行/ 了/ 研究/ ./ 其中/ 文献/ [/ 10/ ]/ 采用/ 基于/ 强/ 连通/ 子图/ 的/ 搜索算法/ 对/ 广义/ B/ ü/ chi/ 自动机/ GBA/ (/ GeneralizedB/ ü/ chiAutomaton/ )/ 作判空/ 检测/ ,/ 以下/ 简称/ Gaiser/ 算法/ ./ 文献/ [/ 11/ ]/ 以/ GBA/ 为/ 研究/ 对象/ ,/ 提出/ 了/ 嵌套/ 的/ 判空/ 搜索算法/ ,/ 以下/ 简称/ Tauriainen/ 算法/ ./ 文献/ [/ 12/ ]/ 研究/ 了/ 带有/ 迁移/ 标识/ 的/ 广义/ B/ ü/ chi/ 自动机/ TGBA/ 的/ 判空/ 检测/ 算法/ ,/ 以下/ 简称/ Couvreur/ 算法/ ./ 在/ 通常/ 情况/ 下/ ,/ Gaiser/ 算法/ 、/ Tauriainen/ 算法/ 和/ Couvreur/ 算法/ 都/ 需要/ 满足/ 广义/ B/ ü/ chi/ 自动机/ 所有/ 的/ 可/ 接受/ 条件/ 才能/ 作出/ 非/ 空性/ 判断/ ./ 在/ 安全/ 苛求/ 计算机系统/ 的/ 安全性/ 分析/ 与/ 验证/ 中/ ,/ 系统/ 的/ 安全性/ 约束条件/ 通常/ 表征/ 为/ 多个/ 最小/ 割集/ 的/ 或/ 运算/ ,/ 每个/ 最小/ 割集/ 通常/ 为/ 多个/ 故障/ 树底/ 事件/ 的/ 合取/ 式/ ,/ 只要/ 系统/ 模型/ 中有/ 任意/ 一个/ 最小/ 割集/ 的/ 全部/ 底/ 事件/ 发生/ 时/ ,/ 该/ 系统/ 便/ 视为/ 不/ 安全/ 的/ 系统/ ./ 当/ 采用/ 基于/ 自动机/ 理论/ 的/ 模型/ 检测/ 方法/ 对/ 安全/ 苛求/ 系统/ 进行/ 安全性/ 分析/ 与/ 验证/ 时/ ,/ 只/ 需要/ 判断/ 系统/ 模型/ 是否/ 满足/ 由/ 某个/ 最小/ 割集/ 构成/ 的/ 可/ 接受/ 条件/ 子集/ ,/ 便/ 可/ 得到/ 安全性/ 验证/ 结果/ ,/ 因此/ ,/ 已有/ 的/ 广义/ B/ ü/ chi/ 自动机/ 判空/ 检测/ 算法/ 难以/ 适用/ 于/ 安全/ 苛求/ 系统/ 的/ 安全性/ 分析/ 与/ 验证/ 实践/ 中/ ./ 在/ 本人/ 前期/ 的/ 研究/ 工作/ [/ 13/ ]/ 中/ ,/ 对/ 广义/ B/ ü/ chi/ 自动机/ 进行/ 扩展/ ,/ 定义/ 了/ ETGBA/ 模型/ ,/ 将/ 基于/ 场景/ 的/ 形式化/ 模型/ 生成/ 方法/ 与/ 故障注入/ 技术相结合/ ,/ 在/ 系统/ 的/ 有/ 穷/ 状态机/ 模型/ 与/ 基本/ 安全/ 需求/ 模型/ 作/ 同步/ 积/ 运算/ 产生/ ETGBA/ 模型/ 的/ 基础/ 上/ ,/ 通过/ 扩展/ 的/ 启发式/ 广义/ B/ ü/ chi/ 自动机/ 判空/ 检测/ 子/ 算法/ 对/ ETGBA/ 模型/ 的/ 安全性/ 进行/ 验证/ ,/ 但/ 限于/ 篇幅/ ,/ 该子/ 算法/ 没有/ 对/ ETGBA/ 模型/ 的/ 判空/ 检测/ 算法/ 进行/ 具体/ 描述/ 与/ 分析/ ./ 鉴于/ 此/ ,/ 本文/ 结合/ 安全/ 苛求/ 系统/ 的/ 安全性/ 分析/ 与/ 验证/ 实践/ ,/ 以/ ETGBA/ 的/ 判空/ 检测/ 为/ 研究/ 对象/ ,/ 提出/ 基于/ 启发式/ on/ -/ the/ -/ fly/ 的/ 扩展/ TGBA/ 模型/ 检测/ 算法/ MCA/ _/ ETGBA/ (/ heuristicon/ -/ the/ -/ flymodelcheckingalgorithmforextendedTGBA/ )/ ./ MCA/ _/ ETGBA/ 算法/ 在/ 对/ ETGBA/ 的/ 状态/ 空间/ 进行/ 搜索/ 时/ ,/ 通过/ 结合/ 启发式/ on/ -/ the/ -/ fly/ 判空/ 检测/ 方法/ 和/ 强/ 连通/ 子图/ 检测/ 算法/ ,/ 能/ 优先/ 找到/ 满足/ ETGBA/ 可/ 接受/ 运行/ 条件/ 的/ 结点/ 序列/ ,/ 从而/ 能/ 对/ ETGBA/ 的/ 非/ 空性/ 较/ 快/ 而/ 准确/ 地/ 作出/ 判断/ ./ 在/ ETGBA/ 为空/ 的/ 最坏/ 情况/ 下/ ,/ MCA/ _/ ETGBA/ 算法/ 的/ 时间/ 复杂度/ 为/ O/ (/ l/ +/ k/ )/ ,/ 空间/ 复杂度/ 为/ O/ (/ k/ |/ T/ |/ +/ k/ )/ ,/ 其中/ ETGBA/ 所/ 包含/ 的/ 迁移/ 关系/ 数/ 和/ 状态/ 结点/ 数/ 分别/ 为/ k/ 和/ l/ ,/ 存储/ ETGBA/ 中/ 迁移/ 关系/ Ti/ (/ Ti/ ∈/ T/ )/ 所/ 需/ 最大/ 空间/ 为/ |/ T/ |/ ./ 通过/ 理论/ 分析/ 与/ 证明/ 、/ 实验/ 比较/ 和/ 实例/ 研究/ 验证/ 了/ MCA/ _/ ETGBA/ 算法/ 的/ 正确性/ 与/ 实际/ 可行性/ ./ 与/ 当前/ 判空/ 检测/ 算法/ 相比/ ,/ MCA/ _/ ETGBA/ 算法/ 的/ 通用性/ 与/ 实用性/ 更强/ ,/ 当对/ 广义/ B/ ü/ chi/ 自动机/ 作判空/ 检测/ 时/ ,/ 在/ 通常/ 情况/ 下/ MCA/ _/ ETGBA/ 算法/ 所/ 需/ 访问/ 的/ 状态/ 数/ 与/ 迁移/ 数更少/ ,/ 所/ 需/ 检测时间/ 和/ 内存空间/ 更少/ ./ 2MCA/ _/ ETGBA/ 算法/ MCA/ _/ ETGBA/ 算法/ 中/ 有关/ ETGBA/ 模型/ 的/ 相关/ 定义/ 以及/ 极大/ 非/ 平凡/ SCCs/ 的/ 具体/ 描述/ 参见/ 文献/ [/ 13/ ]/ ./ 假设/ 要/ 验证/ 的/ ETGBA/ 为/ C/ =/ 〈/ 珦/ A/ ,/ Q/ ,/ ξ/ ,/ F/ —/ ,/ q0/ ,/ T/ 〉/ ,/ 其中/ 珦/ A/ ,/ Q/ ,/ ξ/ ,/ F/ —/ ,/ q0/ 的/ 含义/ 同/ 文献/ [/ 13/ ]/ 中/ 的/ 定义/ 5/ ./ 为/ 简单/ 起/ 见/ ,/ 将/ T/ 简化/ 为/ T/ ∈/ Q/ ×/ 2F/ -/ ×/ Q/ ./ C/ =/ 〈/ 珦/ A/ ,/ Q/ ,/ ξ/ ,/ F/ —/ ,/ q0/ ,/ T/ 〉/ 为/ 一个/ ETGBA/ ,/ 且/ T/ ∈/ Q/ ×/ 2F/ -/ ×/ Q/ ,/ MCA/ _/ ETGBA/ 算法/ 的/ 基本/ 思想/ 为/ 从/ 遍历/ C/ 中/ 初始/ 结点/ q0/ 开始/ ,/ 访问/ q0/ 并/ 以/ q0/ 为/ 最近/ 访问/ 结点/ ,/ 若/ 在/ q0/ 的/ 所有/ 后继/ 迁移/ 中/ ,/ 存在/ qij/ =/ (/ q0/ ,/ a0/ ,/ qi/ )/ ,/ a0/ ∈/ 2F/ -/ 且/ a0/ ≠/ / ,/ 则/ 优先/ 访问/ qij/ 及/ 相应/ 后继/ 结点/ qi/ ,/ 并/ 以/ qi/ 为/ 最近/ 访问/ 结点/ q/ ,/ 否则/ 任意/ 访问/ 一个/ 后继/ 迁移/ tij/ 及/ 相应/ 后继/ 结点/ ti/ ,/ 并/ 以/ ti/ 为/ 最近/ 访问/ 结点/ q/ ./ 根据/ 以上/ 过程/ 进一步/ 访问/ q/ 的/ 后继/ 迁移/ 和/ 后继/ 结点/ ,/ 若/ 在/ 访问/ C/ 时/ ,/ 发现/ 有/ 结点/ qk/ 的/ 后继/ 为空/ ,/ 以/ qk/ 为/ 要/ 删除/ 的/ 结点/ ,/ 对/ qk/ 做/ 删除/ 操作/ 后/ ,/ 并进/ Page3/ 一步/ 判断/ qk/ 的/ 父/ 结点/ qk/ -/ 1/ ,/ 若/ qk/ -/ 1/ 所有/ 的/ 后继/ 结点/ 都/ 过/ 做/ 删除/ 操作/ ,/ 以/ qk/ -/ 1/ 为/ 要/ 删除/ 的/ 结点/ ,/ 重复/ 上述/ 删除/ 过程/ ,/ 做/ 了/ 删除/ 操作/ 的/ 结点/ 以后/ 不/ 需要/ 再/ 处理/ ;/ 在/ 搜索/ 过程/ 中若/ 发现/ 有/ 某个/ 非/ 平凡/ SCCs/ 存在/ ,/ 判断/ 其/ 是否/ 满足/ 某个/ F/ —/ i/ ∈/ F/ —/ ,/ 使得/ F/ —/ i/ / f/ 成立/ ,/ 其中/ f/ 为/ 其/ 包含/ 的/ 可/ 接受/ 条件/ ,/ 如果/ 满足/ ,/ 则/ 输出/ “/ Yes/ ,/ 非空/ 的/ ETGBA/ ”/ ,/ 并/ 终止/ 算法/ ,/ 否则/ ,/ 进一步/ 判断/ 其/ 是否/ 为/ C/ 的/ 一个/ 极大/ 非/ 平凡/ SCCs/ ,/ 若/ 是/ ,/ 则/ 对/ 其/ 做/ 删除/ 操作/ ;/ 若/ 访问/ C/ 已/ 完毕/ ,/ 没有/ 找到/ 满足/ 某个/ F/ —/ i/ ∈/ F/ —/ 的/ 无穷/ 迁移/ 序列/ ,/ 则/ 在/ 输出/ “/ No/ ,/ ETGBA/ 为空/ ”/ 后/ ,/ 退出/ 算法/ ,/ 否则/ ,/ 按/ 上述/ 过程/ 选择/ 新/ 的/ 结点/ 继续/ 搜索/ ./ 2.1/ MCA/ _/ ETGBA/ 算法/ 描述/ 输入/ :/ ETGBAC/ =/ 〈/ 珦/ A/ ,/ Q/ ,/ ξ/ ,/ F/ —/ ,/ q0/ ,/ T/ 〉/ ;/ 输出/ :/ 如果/ 找到/ 满足/ C/ 非空/ 的/ 可/ 接受/ 运行/ 序列/ ,/ 输出/ “/ Yes/ ,/ 非空/ 的/ ETGBA/ ”/ ,/ 否则/ 输出/ “/ No/ ,/ ETGBA/ 为空/ ”/ ./ Q/ ,/ q/ =/ state/ ,/ (/ q/ ,/ a/ ,/ q/ )/ ∈/ T/ }/ 〉/ 的/ 后继/ 迁移/ 关系/ (/ q/ ,/ a/ ,/ q/ )/ ./ node2/ ∈/ Q/ ,/ BOOLEANnode2/ _/ label/ 〉/ ;/ 初始化/ 定义/ 如下/ :/ Trans/ ,/ temp/ :/ stackof/ 〈/ TQ/ ∈/ {/ (/ q/ ,/ a/ ,/ q/ )/ |/ state/ ∈/ 栈/ Trans/ ,/ temp/ 用来/ 临时/ 存放/ 最近/ 访问/ 结点/ qPath/ :/ arrayof/ 〈/ node1/ ∈/ pre/ (/ node2/ )/ ,/ act/ ∈/ 2F/ —/ ,/ Path/ 是/ 数组/ ,/ 其中/ node2/ 域/ 表示/ 最近/ 访问/ 的/ 状态/ 结点/ ,/ act/ 域/ 表示/ 迁移/ 关系/ (/ node1/ ,/ act/ ,/ node2/ )/ 上/ 的/ 迁移/ 标识/ ,/ node1/ 表示/ node2/ 的/ 父/ 结点/ ,/ 布尔/ 型/ 变量/ node2/ _/ label/ 表示/ 结点/ node2/ 的/ 访问/ 标志/ ./ 志/ 1/ 写入/ Path/ [/ 1/ ]/ 中/ ;/ length/ :/ length/ ∈/ N/ ,/ 且/ 1/ / length/ / Path/ ./ size/ (/ )/ ;/ length/ 为/ 记录/ 数组/ Path/ 长度/ 的/ 整型/ 变量/ ,/ 其中/ N/ 为/ 自然数/ 集/ ,/ Path/ ./ size/ (/ )/ 为/ 数组/ Path/ 的/ 长度/ ;/ MCA/ _/ ETGBA/ 算法/ 主要/ 由/ ETGBACheck/ 子/ 算法/ 、/ Search/ 子/ 算法/ 、/ Delete/ 子/ 算法/ 、/ TransPartition/ 子/ 算法/ 和/ Emptycheck/ 子/ 算法/ 组成/ ,/ 以下/ 将/ 详细描述/ 各个/ 子/ 算法/ ./ (/ 1/ )/ ETGBACheck/ 子/ 算法/ ETGBACheck/ 子/ 算法/ 从/ 访问/ ETGBA/ 的/ 初始/ 结点/ q0/ 开始/ ,/ 将/ q0/ 及其/ 访问/ 标志/ 1/ 保存/ 在/ 数组/ 单元/ Path/ [/ 1/ ]/ 中/ ,/ 对/ q0/ 后继/ 的/ 搜索/ 通过/ 调用/ Search/ 子/ 算法/ 实现/ ./ 具体/ 描述/ 如下/ ./ ETGBACheck/ (/ )/ 1/ ./ {/ length/ =/ 1/ ;/ 2/ ./ Path/ [/ length/ ]/ =/ (/ / ,/ / ,/ q0/ ,/ 1/ )/ ;/ // // 将/ q0/ 和/ 访问/ 标/ 3/ ./ Search/ (/ q0/ ,/ 1/ )/ ;/ // // 调用/ Search/ 子/ 算法/ 对/ ETGBA/ 继续/ 搜索/ ;/ 4/ ./ }/ (/ 2/ )/ Search/ 子/ 算法/ Search/ 子/ 算法/ 对/ 最近/ 访问/ 结点/ q/ 的/ 后继/ 结点/ 继续/ 搜索/ ,/ 该子/ 算法/ 通过/ 启发式/ on/ -/ the/ -/ fly/ 判空/ 检测/ 方法/ ,/ 能/ 较/ 快/ 地/ 判断/ 出/ ETGBA/ 的/ 非/ 空性/ ./ 具体/ 算法/ 如下/ ./ ProcedureSearch/ (/ NODEq/ ,/ BOOLEANq/ _/ label/ )/ 1/ ./ {/ BOOLEANb/ ;/ // // 定义/ 布尔/ 型/ 变量/ b/ ;/ 2/ ./ IF/ (/ post/ (/ q/ )/ =/ =/ / )/ THENDelete/ (/ q/ )/ ;/ // // 若/ q/ 没有/ 后继/ ,/ 调用/ Delete/ 子/ 算法/ 做/ 对/ q/ 做/ 删除/ 操作/ ;/ 3/ ./ ELSETransPartition/ (/ q/ )/ ;/ // // 调用/ TransPartition/ 子/ 算法/ 做/ 对/ q/ 的/ 后继/ 迁移/ 作/ 划分/ ;/ 4/ ./ WHILE/ (/ Trans/ ≠/ / )/ DO/ // // 当栈/ Trans/ 非空时/ ;/ 5/ ./ {/ (/ s/ ,/ c/ ,/ s/ )/ =/ Trans/ ./ top/ (/ )/ ;/ // // 读/ Trans/ 栈顶/ 的/ 迁移/ 关系/ ;/ 6/ ./ Trans/ ./ pop/ (/ )/ ;/ // // 弹出/ Trans/ 栈顶/ 元素/ ;/ 7/ ./ j/ =/ Path/ ./ node2/ ./ find/ (/ s/ )/ ;/ // // 查找/ 目标/ 结点/ s/ 是否/ 已/ 访问/ 过/ ,/ 若/ 已/ 访问/ 过/ ,/ 读出/ 其/ 在/ Path/ 中/ 的/ 位置/ 给/ j/ ,/ 否则/ j/ 为/ -/ 1/ ;/ 8/ ./ IF/ (/ j/ =/ =/ -/ 1/ )/ THEN/ // // j/ 为/ -/ 1/ ,/ 是/ 未/ 访问/ 过/ 的/ 结点/ 9/ ./ {/ length/ =/ length/ +/ 1/ ;/ 10/ ./ Path/ [/ length/ ]/ =/ (/ s/ ,/ c/ ,/ s/ ,/ 1/ )/ // // 将/ 迁移/ 关系/ (/ s/ ,/ c/ ,/ s/ )/ 及/ 的/ s/ 的/ 访问/ 标志/ 1/ 写入/ Path/ 中/ ;/ 11/ ./ Search/ (/ s/ ,/ 1/ )/ }/ ;/ // // 以/ s/ 为/ 最近/ 访问/ 结点/ ,/ 递归/ 调用/ Search/ 子/ 算法/ 继续/ 搜索/ ;/ 12/ ./ ELSEEmptycheck/ (/ s/ ,/ c/ ,/ s/ ,/ s/ _/ label/ ,/ j/ ,/ length/ )/ ;/ }/ // // 若/ s/ 是/ 已/ 访问/ 过/ 的/ 结点/ ,/ 调用/ Emptycheck/ 子/ 算法/ 作判空/ 检测/ ;/ 13/ ./ IF/ (/ Trans/ =/ =/ / )/ THENEXIT/ “/ No/ ,/ ETGBA/ 为空/ ”/ ;/ // // 若栈/ Trans/ 为空/ ,/ 算法/ 终止/ 并/ 输出/ “/ No/ ,/ ETGBA/ 为空/ ”/ ;/ }/ // // ENDSearch/ (/ NODEq/ ,/ BOOLEANq/ _/ label/ )/ (/ 3/ )/ Delete/ 子/ 算法/ Delete/ 子/ 算法/ 对/ 没有/ 后继/ 输出/ 的/ 结点/ q/ 实施/ 删除/ 操作/ ,/ 并/ 对/ q/ 的/ 父/ 结点/ q/ _/ pre/ 作/ 判断/ ,/ 若/ q/ _/ pre/ 的/ 所有/ 后继/ 结点/ 都/ 带/ 删除/ 标志/ ,/ 则/ 删除/ q/ _/ pre/ ./ 算法/ 描述/ 如下/ ./ ProcedureDelete/ (/ q/ )/ 1/ ./ {/ i/ =/ Path/ ./ node2/ ./ find/ (/ q/ )/ ;/ // // 读出/ q/ 在/ path/ 中/ 的/ 存储/ 位置/ 给/ i/ ;/ 2/ ./ Path/ [/ i/ ]/ ./ node2/ _/ label/ =/ 0/ ;/ Path/ [/ i/ ]/ ./ act/ =/ / ;/ // // 对/ q/ 做/ 删除/ 操作/ :/ 将/ path/ [/ i/ ]/ 中/ 的/ 迁移/ 标识/ act/ 置/ 为/ / ,/ 将/ q/ 的/ 访问/ 标志/ 置/ 0/ ;/ Page43/ ./ q/ _/ pre/ =/ Path/ [/ i/ ]/ ./ node1/ ;/ // // 读出/ q/ 的/ 父/ 结点/ q/ _/ pre/ ;/ 4/ ./ BOOLEANtp/ =/ TRUE/ ;/ // // 布尔/ 变量/ tp/ 赋值/ 为/ 5/ ./ (/ s/ ,/ c/ ,/ s/ )/ =/ Trans/ ./ top/ (/ )/ ;/ // // 读出/ Trans/ 中/ 的/ 栈/ TRUE/ ;/ 顶/ 元素/ ;/ 6/ ./ IF/ (/ q/ _/ pre/ ≠/ s/ )/ THEN/ // // q/ _/ pre/ 与/ s/ 不是/ 同一/ 结点/ ,/ 说明/ q/ _/ pre/ 的/ 后继/ 结点/ 都/ 已/ 访问/ 过/ ;/ 7/ ./ {/ FORALLt/ ∈/ post/ (/ q/ _/ pre/ )/ DO/ // // 选取/ q/ _/ pre/ 的/ 一个/ 后继/ 结点/ t/ ;/ 中/ 的/ 存储/ 位置/ 赋值/ 给/ j/ ;/ 8/ ./ {/ j/ =/ Path/ ./ node2/ ./ find/ (/ t/ )/ ;/ // // 读取/ t/ 在/ Path9/ ./ IF/ (/ Path/ [/ j/ ]/ ./ node2/ _/ label/ =/ =/ 1/ )/ // // Path/ [/ j/ ]/ 中/ t/ 的/ 访问/ 标志/ 位为/ 1/ ,/ t/ 是/ 不带/ 删除/ 标志/ 的/ 结点/ ;/ 10/ ./ THEN/ {/ tp/ =/ FALSE/ ;/ BREAK/ ;/ }/ // // tp/ 赋值/ 为/ FALSE/ ,/ 跳出/ FOR/ 循环/ ;/ 11/ ./ }/ // // ENDFORALLt/ ∈/ post/ (/ q/ _/ pre/ )/ 12/ ./ IFtpTHENDelete/ (/ q/ _/ pre/ )/ ;/ // // tp/ 为/ TRUE/ ,/ 调用/ Delete/ 子/ 算法/ ,/ 对/ q/ _/ pre/ 做/ 删除/ 操作/ ;/ 13/ ./ }/ // // endIF/ (/ q/ _/ pre/ ≠/ p/ )/ 14/ ./ }/ // // endDelete/ (/ q/ )/ (/ 4/ )/ TransPartition/ 子/ 算法/ TransPartition/ 子/ 算法/ 对/ 最近/ 访问/ 结点/ s/ 的/ 所有/ 后继/ 迁移/ 做/ 划分/ ,/ 若/ 后继/ 迁移/ 的/ 迁移/ 标识/ 不/ 为/ / ,/ 暂时/ 存放/ 在/ 栈/ temp/ 中/ ,/ 否则/ 存放/ 在/ 栈/ Trans/ 中/ ,/ 对/ s/ 的/ 后继/ 迁移/ 划分/ 完毕/ 后/ ,/ 将/ temp/ 中/ 的/ 迁移/ 关系/ 合并/ 到/ Trans/ 中/ ,/ 并/ 清空/ 栈/ temp/ ./ 具体/ 算法/ 描述/ 如下/ ./ ProcedureTransPartition/ (/ NODEs/ )/ 1/ ./ {/ FORALL/ (/ s/ ,/ a/ ,/ t/ )/ ∈/ TDO2/ ./ {/ IF/ (/ a/ ≠/ / )/ THENtemp/ ./ push/ (/ s/ ,/ a/ ,/ t/ )/ ;/ // // 若/ s/ 的/ 后继/ 迁移/ (/ s/ ,/ a/ ,/ t/ )/ 包含/ 可/ 接受/ 条件/ ,/ 则/ 将/ 其/ 存放/ 在/ 栈/ temp/ 中/ ;/ 3/ ./ ELSETrans/ ./ push/ (/ s/ ,/ a/ ,/ t/ )/ ;/ // // 否则/ ,/ 将/ (/ s/ ,/ a/ ,/ t/ )/ 存放/ 在/ 栈/ Trans/ 中/ ;/ 4/ ./ }/ // // ENDFORALL/ (/ s/ ,/ a/ ,/ t/ )/ ∈/ T5/ ./ WHILE/ (/ temp/ ≠/ / )/ DO/ // // 当/ temp/ 非空时/ ;/ 6/ ./ {/ Trans/ ./ push/ (/ temp/ ./ top/ (/ )/ )/ ;/ // // 将/ temp/ 的/ 栈顶/ 迁移/ 关系/ 压入/ Trans/ 中/ ;/ 7/ ./ temp/ ./ pop/ (/ )/ ;/ // // 弹出/ temp/ 的/ 栈顶/ 元素/ ;/ 8/ ./ }/ // // endWHILE/ (/ temp/ ≠/ / )/ 9/ ./ }/ // // endTransPartition/ (/ NODEs/ )/ (/ 5/ )/ Emptycheck/ 子/ 算法/ Emptycheck/ 子/ 算法/ 对/ 已/ 发现/ 的/ 非/ 平凡/ SCCs/ 包含/ 的/ 可/ 接受/ 条件/ 进行/ 计算/ ,/ 计算结果/ 为/ f/ ,/ 若/ / F/ —/ i/ ∈/ F/ —/ ,/ 且/ F/ —/ i/ / f/ ,/ 说明/ 此/ SCCs/ 至少/ 包含/ 了/ ETGBA/ 可/ 接受/ 条件/ 集/ F/ —/ 中/ 的/ 一个/ 元素/ F/ —/ i/ ,/ 则/ 终止/ 算法/ 并/ 输出/ “/ Yes/ ,/ 非空/ 的/ ETGBA/ ”/ ;/ 否则/ ,/ 进一步/ 判断/ 并/ 对/ 极大/ 非/ 平凡/ SCCs/ 做/ 删除/ 操作/ ,/ 反之/ 则/ 将/ (/ s/ ,/ f/ ,/ s/ )/ 及/ s/ 的/ 访问/ 标志/ 1/ 存入/ 数组/ Path/ 中/ ,/ 为/ 以后/ 形成/ 更大非/ 平凡/ SCCs/ 的/ 可/ 接受/ 条件/ 的/ 计算/ 提供方便/ ./ 具体/ 算法/ 描述/ 如下/ ./ Emptycheck/ (/ s/ ,/ c/ ,/ s/ ,/ s/ _/ label/ ,/ INTs/ _/ position/ ,/ length/ )/ 1/ ./ {/ IF/ (/ s/ _/ label/ ≠/ 0/ )/ THEN/ // // 已/ 访问/ 过/ 的/ 目标/ 结点/ s/ 不带/ 删除/ 标志/ ,/ 说明/ 有/ 非/ 平凡/ SCCs/ 存在/ ;/ 2/ ./ {/ f/ =/ / ;/ f/ =/ f/ ∪/ c/ ;/ k/ =/ s/ _/ position/ +/ 1/ ;/ 3/ ./ Forj/ =/ ktolengthDO4/ ./ f/ =/ f/ ∪/ Path/ [/ j/ ]/ ./ act/ ;/ // // 对非/ 平凡/ SCCs/ 包含/ 的/ 可/ 接受/ 条件/ 作/ 合并/ 运算/ ;/ 5/ ./ IF/ / F/ —/ i/ ∈/ F/ —/ ANDF/ —/ i/ / f/ // // 非/ 平凡/ SCCs/ 包含/ ETGBA/ 可/ 接受/ 条件/ 集/ F/ —/ 中/ 的/ 一个/ 元素/ F/ —/ i6/ ./ THENEXIT/ “/ Yes/ ,/ 非空/ 的/ ETGBA/ ”/ ;/ // // 终止/ 算法/ 并/ 输出/ “/ Yes/ ,/ 非空/ 的/ ETGBA/ ”/ ,/ 检测/ 出/ ETGBA/ 非空/ ;/ 7/ ./ ELSE/ {/ i/ =/ s/ _/ position/ ;/ (/ p/ ,/ a/ ,/ q/ )/ =/ Trans/ ./ top/ (/ )/ ;/ 8/ ./ IFALLt/ ∈/ path/ [/ i/ ../ length/ ]/ ./ node2/ ./ post/ (/ )/ ANDt/ ≠/ q/ // // 若非/ 平凡/ SCCs/ 是/ 不/ 满足/ ETGBA/ 可/ 接受/ 运行/ 条件/ 的/ 极大/ 非/ 平凡/ SCCs/ ;/ 9/ ./ THEN/ {/ Path/ [/ i/ ../ length/ ]/ ./ act/ =/ / ;/ 10/ ./ Path/ [/ i/ ../ length/ ]/ ./ label/ =/ 0/ ;/ }/ // // 则/ 对此/ 极大/ 非/ 平凡/ SCCs/ 做/ 删除/ 操作/ ;/ 11/ ./ ELSE/ {/ Length/ =/ length/ +/ 1/ ;/ 12/ ./ Path/ [/ length/ ]/ =/ (/ s/ ,/ f/ ,/ s/ ,/ 1/ )/ ;/ }/ // // 否则/ ,/ 将/ (/ s/ ,/ f/ ,/ s/ )/ 及/ s/ 的/ 访问/ 标志/ 1/ 存入/ Path/ 中/ ;/ 13/ ./ }/ // // ENDELSE/ {/ i/ =/ s/ _/ position/ ;/ (/ p/ ,/ a/ ,/ q/ )/ =/ Trans/ ./ top/ (/ )/ ;/ 14/ ./ }/ // // ENDIF/ (/ s/ _/ label/ ≠/ 0/ )/ ;/ 15/ ./ }/ // // END/ ./ 2.2/ 算法/ 实例/ 算法/ 的/ 主要/ 过程/ ./ 以图/ 1/ 为/ 研究/ 实例/ ,/ 完整/ 地/ 描述/ MCA/ _/ ETGBA/ 图/ 1/ 中/ 结点/ A/ 为/ 初始状态/ ,/ 可/ 接受/ 条件/ 集/ F/ —/ =/ {/ {/ a/ ,/ b/ ,/ c/ }/ ;/ {/ a/ ,/ c/ ,/ d/ }/ }/ ,/ 其中/ F/ —/ 1/ =/ {/ a/ ,/ b/ ,/ c/ }/ ,/ F/ —/ 2/ =/ {/ a/ ,/ c/ ,/ d/ }/ ./ MCA/ _/ ETGBA/ 算法/ 的/ 判空/ 检测/ 过程/ 如下/ ,/ 数组/ Path/ 和/ 栈/ Trans/ 中/ 数据/ 的/ 相应/ 存放/ 情况/ 如表/ 1/ 所示/ ./ Page5/ 表/ 1/ 数组/ 犘/ 犪/ 狋/ 犺/ 和/ 栈/ 犜/ 狉/ 犪/ 狀/ 狊/ 中/ 数据/ 的/ 存放/ 过程/ stepnode1A/ (/ / ,/ / ,/ A/ ,/ 1/ )/ 2B/ (/ / ,/ / ,/ A/ ,/ 1/ )/ (/ A/ ,/ / ,/ B/ ,/ 1/ )/ 3X/ (/ / ,/ / ,/ A/ ,/ 1/ )/ (/ A/ ,/ / ,/ B/ ,/ 1/ )/ (/ B/ ,/ d/ ,/ X/ ,/ 1/ )/ 4Y/ (/ / ,/ / ,/ A/ ,/ 1/ )/ (/ A/ ,/ / ,/ B/ ,/ 1/ )/ (/ B/ ,/ d/ ,/ X/ ,/ 1/ )/ (/ X/ ,/ / ,/ Y/ ,/ 1/ )/ 5Z/ (/ / ,/ / ,/ A/ ,/ 1/ )/ (/ A/ ,/ / ,/ B/ ,/ 1/ )/ (/ B/ ,/ d/ ,/ X/ ,/ 1/ )/ (/ X/ ,/ / ,/ Y/ ,/ 1/ )/ (/ Y/ ,/ c/ ,/ Z/ ,/ 1/ )/ 6/ (/ / ,/ / ,/ A/ ,/ 1/ )/ (/ A/ ,/ / ,/ B/ ,/ 1/ )/ (/ B/ ,/ / ,/ X/ ,/ 0/ )/ (/ X/ ,/ / ,/ Y/ ,/ 0/ )/ (/ Y/ ,/ / ,/ Z/ ,/ 0/ )/ 7F/ (/ / ,/ / ,/ A/ ,/ 1/ )/ (/ A/ ,/ / ,/ B/ ,/ 1/ )/ (/ B/ ,/ / ,/ X/ ,/ 0/ )/ (/ X/ ,/ / ,/ Y/ ,/ 0/ )/ (/ Y/ ,/ / ,/ Z/ ,/ 0/ )/ (/ B/ ,/ c/ ,/ F/ ,/ 1/ )/ (/ B/ ,/ / ,/ C/ )/ (/ B/ ,/ / ,/ K/ )/ (/ F/ ,/ / ,/ G/ )/ (/ F/ ,/ / ,/ H/ )/ 8H/ (/ / ,/ / ,/ A/ ,/ 1/ )/ (/ A/ ,/ / ,/ B/ ,/ 1/ )/ (/ B/ ,/ / ,/ X/ ,/ 0/ )/ (/ X/ ,/ / ,/ Y/ ,/ 0/ )/ (/ Y/ ,/ / ,/ Z/ ,/ 0/ )/ (/ B/ ,/ c/ ,/ F/ ,/ 1/ )/ 9J/ (/ / ,/ / ,/ A/ ,/ 1/ )/ (/ A/ ,/ / ,/ B/ ,/ 1/ )/ (/ B/ ,/ / ,/ X/ ,/ 0/ )/ (/ X/ ,/ / ,/ Y/ ,/ 0/ )/ (/ Y/ ,/ / ,/ Z/ ,/ 0/ )/ (/ B/ ,/ c/ ,/ F/ ,/ 1/ )/ 10I/ (/ / ,/ / ,/ A/ ,/ 1/ )/ (/ A/ ,/ / ,/ B/ ,/ 1/ )/ (/ B/ ,/ / ,/ X/ ,/ 0/ )/ (/ X/ ,/ / ,/ Y/ ,/ 0/ )/ (/ Y/ ,/ / ,/ Z/ ,/ 0/ )/ (/ B/ ,/ c/ ,/ F/ ,/ 1/ )/ 11G/ (/ / ,/ / ,/ A/ ,/ 1/ )/ (/ A/ ,/ / ,/ B/ ,/ 1/ )/ (/ B/ ,/ / ,/ X/ ,/ 0/ )/ (/ X/ ,/ / ,/ Y/ ,/ 0/ )/ (/ Y/ ,/ / ,/ Z/ ,/ 0/ )/ (/ B/ ,/ c/ ,/ F/ ,/ 1/ )/ 12K/ (/ / ,/ / ,/ A/ ,/ 1/ )/ (/ A/ ,/ / ,/ B/ ,/ 1/ )/ (/ B/ ,/ / ,/ X/ ,/ 0/ )/ (/ X/ ,/ / ,/ Y/ ,/ 0/ )/ (/ Y/ ,/ / ,/ Z/ ,/ 0/ )/ (/ B/ ,/ / ,/ F/ ,/ 0/ )/ 13L/ (/ / ,/ / ,/ A/ ,/ 1/ )/ (/ A/ ,/ / ,/ B/ ,/ 1/ )/ (/ B/ ,/ / ,/ X/ ,/ 0/ )/ (/ X/ ,/ / ,/ Y/ ,/ 0/ )/ (/ Y/ ,/ / ,/ Z/ ,/ 0/ )/ (/ B/ ,/ / ,/ F/ ,/ 0/ )/ (/ F/ ,/ / ,/ H/ ,/ 0/ )/ (/ H/ ,/ / ,/ J/ ,/ 0/ )/ (/ H/ ,/ / ,/ I/ ,/ 0/ )/ (/ F/ ,/ / ,/ G/ ,/ 0/ )/ (/ B/ ,/ / ,/ K/ ,/ 1/ )/ (/ K/ ,/ b/ ,/ L/ ,/ 1/ )/ (/ B/ ,/ / ,/ C/ )/ (/ K/ ,/ / ,/ P/ )/ (/ L/ ,/ / ,/ M/ )/ 14M15N16O1718P19Q20f/ =/ {/ a/ ,/ b/ ,/ c/ }/ ,/ F/ —/ 1/ / f/ ,/ 输出/ “/ Yes/ ,/ 非空/ 的/ ETGBA/ ”/ 并/ 终止/ 算法/ 1/ ./ 访问/ A/ ,/ 将/ (/ / ,/ / ,/ A/ ,/ 1/ )/ 存入/ 数组/ Path/ 中/ ;/ 2/ ./ 从/ Trans/ 中/ 读取/ (/ A/ ,/ / ,/ B/ )/ 为/ 搜索/ 目标/ ,/ 将/ (/ A/ ,/ / ,/ B/ ,/ 1/ )/ 存入/ Path/ 中/ ,/ B/ 为/ 最近/ 访问/ 结点/ ;/ 3/ ./ 读取/ (/ B/ ,/ d/ ,/ X/ )/ 为/ 搜索/ 目标/ ,/ 依次/ 将/ (/ B/ ,/ d/ ,/ X/ ,/ 1/ )/ 、/ (/ X/ ,/ / ,/ Y/ ,/ 1/ )/ 、/ (/ Y/ ,/ c/ ,/ Z/ ,/ 1/ )/ 存入/ Path/ 中/ (/ 对应/ 表/ 1/ 中/ 的/ 步骤/ 3/ ~/ 步骤/ 5/ )/ ;/ 4/ ./ 读取/ (/ Z/ ,/ a/ ,/ X/ )/ 为/ 搜索/ 目标/ ,/ 发现/ 存在/ 非/ 平凡/ SCCs/ ,/ 其/ 包含/ 的/ 可/ 接受/ 条件/ 为/ {/ c/ ,/ a/ }/ ,/ 不/ 满足/ ETGBA/ 的/ 可/ 接受/ 运行/ ,/ 为/ 极大/ 非/ 平凡/ SCCs/ ,/ 对/ X/ 、/ Y/ 、/ Z/ 做/ 删除/ 操作/ ;/ 5/ ./ 读取/ (/ B/ ,/ c/ ,/ F/ )/ 为/ 搜索/ 目标/ ,/ 依次/ 将/ (/ B/ ,/ c/ ,/ F/ ,/ 1/ )/ 、/ (/ F/ ,/ / ,/ H/ ,/ 1/ )/ 、/ (/ H/ ,/ / ,/ J/ ,/ 1/ )/ 存入/ Path/ 中/ (/ 对应/ 表/ 1/ 中/ 的/ 步骤/ 7/ ~/ 步骤/ 9/ )/ ;/ 6/ ./ J/ 为/ 没有/ 后继/ 的/ 结点/ ,/ 依次/ 对/ J/ 、/ I/ 、/ H/ 、/ G/ 、/ F/ 做/ 删除/ 操作/ ;/ 7/ ./ 从/ Trans/ 中/ 读取/ (/ B/ ,/ / ,/ K/ )/ 为/ 搜索/ 目标/ ,/ 依次/ 将/ (/ B/ ,/ / ,/ K/ ,/ 1/ )/ 、/ (/ K/ ,/ b/ ,/ L/ ,/ 1/ )/ 、/ (/ L/ ,/ / ,/ M/ ,/ 1/ )/ 、/ (/ M/ ,/ c/ ,/ N/ ,/ 1/ )/ 、/ (/ N/ ,/ / ,/ O/ ,/ 1/ )/ 存入/ Path/ 中/ (/ 对应/ 表/ 1/ 中/ 的/ 步骤/ 12/ ~/ 步骤/ 16/ )/ ;/ 8/ ./ 从/ Trans/ 中/ 读取/ (/ O/ ,/ / ,/ B/ )/ ,/ 发现/ 存在/ 非/ 平凡/ SCCs/ ,/ 其/ 包含/ 的/ 可/ 接受/ 条件/ 为/ {/ b/ ,/ c/ }/ ,/ 将/ (/ O/ ,/ {/ b/ ,/ c/ }/ ,/ B/ ,/ 1/ )/ 存入/ Path/ 中/ ;/ 9/ ./ 从/ Trans/ 中/ 读取/ (/ K/ ,/ / ,/ P/ )/ ,/ 依次/ 将/ (/ K/ ,/ / ,/ P/ ,/ 1/ )/ 、/ (/ P/ ,/ / ,/ Q/ ,/ 1/ )/ 存入/ Path/ 中/ (/ 对应/ 表/ 1/ 中/ 的/ 步骤/ 18/ ~/ 步骤/ 19/ )/ ;/ 10/ ./ 读取/ (/ Q/ ,/ a/ ,/ M/ )/ 为/ 搜索/ 目标/ ,/ 发现/ 存在/ 非/ 平凡/ SCCs/ ,/ 其/ 包含/ 的/ 可/ 接受/ 条件/ 为/ {/ a/ ,/ b/ ,/ c/ }/ ,/ 满足/ ETGBA/ 的/ 可/ 接受/ 运行/ ,/ 输出/ “/ Yes/ ,/ 非空/ 的/ ETGBA/ ”/ 并/ 终止/ 算法/ ./ 表/ 1/ 中/ step/ 表示/ 操作步骤/ ,/ node/ 表示/ 最近/ 访问/ 的/ 结点/ ,/ 数组/ Path/ 和/ 栈/ Trans/ 中/ 数据/ 的/ 存放/ 顺序/ 为/ 从左到右/ ,/ 从上到下/ ./ Page63/ 正确性/ 证明/ 及/ 复杂度/ 分析/ 定义/ 1/ ./ C/ =/ 〈/ 珦/ A/ ,/ Q/ ,/ ξ/ ,/ F/ —/ ,/ q0/ ,/ T/ 〉/ 为/ 一个/ ETGBA/ ,/ p/ ∈/ Q/ ,/ q/ ∈/ Q/ ,/ 将/ q/ 是/ p/ 的/ 后继/ 结点/ 记为/ q/ =/ post/ (/ p/ )/ ,/ 将/ p/ 是/ q/ 的/ 父/ 结点/ 记为/ p/ =/ pre/ (/ q/ )/ ./ 定义/ 2/ ./ C/ =/ 〈/ 珦/ A/ ,/ Q/ ,/ ξ/ ,/ F/ —/ ,/ q0/ ,/ T/ 〉/ 为/ 一个/ ETGBA/ ,/ p/ ∈/ Q/ ,/ q/ ∈/ Q/ ,/ 且/ q/ =/ post/ (/ p/ )/ ,/ 称/ 由/ 结点/ p/ 到/ 结点/ q/ 之间/ 存在/ 状态/ 转换/ 关系/ ,/ 记为/ p/ →/ q/ ./ 定义/ 3/ ./ C/ =/ 〈/ 珦/ A/ ,/ Q/ ,/ ξ/ ,/ F/ —/ ,/ q0/ ,/ T/ 〉/ 为/ 一个/ ETGBA/ ,/ 若/ C/ 中/ 存在/ qi/ →/ qi/ +/ 1/ ,/ qi/ +/ 1/ →/ qi/ +/ 2/ ,/ …/ ,/ qj/ -/ 1/ →/ qj/ ,/ 则/ 称/ qi/ 到/ qj/ 可达/ ,/ 记为/ qi/ →/ attqj/ ./ 定义/ 4/ ./ C/ =/ 〈/ 珦/ A/ ,/ Q/ ,/ ξ/ ,/ F/ —/ ,/ q0/ ,/ T/ 〉/ 为/ 一个/ ETGBA/ ,/ 且/ T/ ∈/ Q/ ×/ 2F/ —/ ×/ Q/ ,/ 若/ C/ 中/ 与/ qi/ →/ attqj/ 相应/ 的/ 迁移/ 转换/ 序列/ 为/ (/ qi/ ,/ ai/ ,/ qi/ +/ 1/ )/ ,/ (/ qi/ +/ 1/ ,/ ai/ +/ 1/ ,/ qi/ +/ 2/ )/ ,/ …/ ,/ (/ qj/ -/ 1/ ,/ aj/ -/ 1/ ,/ qj/ )/ ,/ 则/ 称/ (/ qi/ ,/ ai/ ,/ qi/ +/ 1/ )/ 到/ (/ qj/ -/ 1/ ,/ aj/ -/ 1/ ,/ qj/ )/ 可/ 达/ ,/ 记/ 为/ (/ qi/ ,/ ai/ ,/ qi/ +/ 1/ )/ →/ att/ (/ qj/ -/ 1/ ,/ aj/ -/ 1/ ,/ qj/ )/ ./ 引理/ 1/ ./ 在/ MCA/ _/ ETGBA/ 算法/ 中/ ,/ 若/ Path/ [/ i/ ]/ ./ node2/ _/ label/ ≠/ 0/ ,/ Path/ [/ j/ ]/ ./ node2/ _/ label/ ≠/ 0/ ,/ i/ </ j/ ,/ 则/ Path/ [/ i/ ]/ ./ node2/ →/ attPath/ [/ j/ ]/ ./ node2/ 成立/ ./ 证明/ ./ 假设/ MCA/ _/ ETGBA/ 算法/ 对/ ETGBA/ 进行/ 搜索/ 时/ ,/ 最近/ 访问/ 的/ 结点/ 为/ qi/ -/ 1/ ,/ 相应/ 迁移/ 关系/ (/ qi/ -/ 2/ ,/ ai/ -/ 1/ ,/ qi/ -/ 1/ )/ 已/ 存放/ 在/ Path/ [/ i/ -/ 1/ ]/ 中/ ,/ 当/ Search/ 子/ 算法/ 搜索/ qi/ -/ 1/ 的/ 后继/ 时/ ,/ 先/ 调用/ TransPartition/ 子/ 算法/ 划分/ qi/ -/ 1/ 的/ 后继/ 迁移/ 并存/ 放在/ Trans/ 中/ ,/ 然后/ 从/ Trans/ 中/ 读取/ 一个/ 未/ 访问/ 过/ 的/ 后继/ 迁移/ ,/ 设/ 为/ (/ qi/ -/ 1/ ,/ ai/ ,/ qi/ )/ ,/ 执行程序/ 行/ 7/ ~/ 10/ ,/ 将/ (/ qi/ -/ 1/ ,/ ai/ ,/ qi/ )/ 写入/ Path/ [/ i/ ]/ 中/ ,/ 并/ 以/ qi/ 作为/ 最近/ 访问/ 的/ 结点/ ,/ 在/ 程序/ 行/ 11/ 递归/ 调用/ Search/ 子/ 算法/ ,/ 重复/ 以上/ 过程/ ,/ 继续/ 搜索/ ,/ 当/ 读取/ (/ qj/ -/ 1/ ,/ aj/ ,/ qj/ )/ 时/ ,/ 将/ (/ qj/ -/ 1/ ,/ aj/ ,/ qj/ )/ 写入/ Path/ [/ j/ ]/ 中/ ,/ 故/ (/ qi/ -/ 1/ ,/ ai/ ,/ qi/ )/ 到/ (/ qj/ -/ 1/ ,/ aj/ ,/ qj/ )/ 可/ 达/ ,/ 即/ (/ qi/ -/ 1/ ,/ ai/ ,/ qi/ )/ →/ att/ (/ qj/ -/ 1/ ,/ aj/ ,/ qj/ )/ ,/ qi/ →/ attqj/ 成立/ ,/ 即/ Path/ [/ i/ ]/ ./ node2/ →/ attPath/ [/ j/ ]/ ./ node2/ 成立/ ./ 证毕/ ./ 定理/ 1/ ./ 设/ SCCsi/ 为/ ETGBA/ 的/ 非/ 平凡/ SCCs/ ,/ Path/ [/ i/ ]/ ./ node2/ =/ q/ ,/ (/ s/ ,/ c/ ,/ s/ )/ =/ Trans/ ./ top/ (/ )/ ,/ 且/ Path/ [/ i/ ]/ ./ node2/ _/ label/ =/ 0/ ,/ Path/ [/ i/ ]/ ./ node1/ ≠/ s/ ,/ i/ 为/ 数组/ Path/ 的/ 长度/ ,/ 若/ qk/ 不是/ SCCsi/ 中/ 结点/ ,/ 且/ 对/ SCCsi/ 不可/ 达/ ,/ 则/ MCA/ _/ ETGBA/ 算法/ 能/ 删除/ qk/ ./ 证明/ ./ 由/ Path/ [/ i/ ]/ ./ node2/ =/ q/ 及/ i/ 为/ 数组/ Path/ 的/ 长度/ 知/ ,/ q/ 为/ 最近/ 访问/ 的/ 结点/ ./ 由/ Path/ 的/ 数据结构/ 知/ ,/ pre/ (/ q/ )/ =/ Path/ [/ i/ ]/ ./ node1/ ./ MCA/ _/ ETGBA/ 算法/ 调用/ Search/ 子/ 算法/ 对/ q/ 的/ 后继/ 进行/ 搜索/ 时/ ,/ 若/ q/ 没有/ 后继/ 输出/ ,/ 则/ 调用/ Delete/ 子/ 算法/ 对/ q/ 做/ 删除/ 操作/ ,/ 将/ 其/ 访问/ 标志/ 置/ 为/ 0/ ./ 由/ Path/ [/ i/ ]/ ./ node2/ _/ label/ =/ 0/ 知/ ,/ 最近/ 访问/ 的/ 结点/ q/ 没有/ 后继/ 且/ 已/ 做/ 过/ 删除/ 处理/ ./ 由/ 引理/ 1/ 知/ ,/ 最近/ 访问/ 结点/ q/ 的/ 所有/ 后继/ 迁移/ 及/ pre/ (/ q/ )/ 所有/ 未/ 访问/ 过/ 的/ 后继/ 迁移/ 都/ 存放/ 在/ Trans/ 中/ ./ 当/ Delete/ 子/ 算法/ 从/ Trans/ 中/ 读取/ 栈顶/ 元素/ (/ s/ ,/ c/ ,/ s/ )/ 时/ ,/ 由/ q/ 没有/ 后继/ 且/ Path/ [/ i/ ]/ ./ node1/ ≠/ s/ 可知/ ,/ pre/ (/ q/ )/ 的/ 后继/ 结点/ 都/ 已/ 访问/ 过/ ./ 在/ Delete/ 子/ 算法/ 的/ 程序/ 行/ 7/ ~/ 11/ 对/ pre/ (/ q/ )/ 的/ 后继/ 结点/ 作/ 判断/ ,/ 若/ pre/ (/ q/ )/ 所有/ 的/ 后继/ 结点/ 都/ 带/ 删除/ 标志/ ,/ 则/ 将/ pre/ (/ q/ )/ 作为/ 要/ 删除/ 的/ 结点/ q/ ,/ 递归/ 调用/ Delete/ 子/ 算法/ ,/ 对/ 其/ 做/ 删除/ 操作/ ,/ 进而/ 删除/ 不能到达/ 和/ 不能/ 构成/ SCCsi/ 的/ 结点/ qk/ ./ 定理/ 2/ ./ C/ =/ 〈/ 珦/ A/ ,/ Q/ ,/ ξ/ ,/ F/ —/ ,/ q0/ ,/ T/ 〉/ 为/ 一个/ ETGBA/ ,/ C/ 的/ 可/ 接受/ 条件/ 集为/ F/ —/ =/ {/ F/ —/ 1/ ,/ F/ —/ 2/ ,/ F/ —/ 3/ ,/ …/ ,/ F/ —/ n/ }/ ,/ 对于/ C/ 作为/ 输入/ ,/ 若/ MCA/ _/ ETGBA/ 算法/ 输出/ “/ Yes/ ,/ 非空/ 的/ ETGBA/ ”/ ,/ 那么/ / F/ —/ i/ ∈/ F/ —/ ,/ f/ / SCCsk/ ,/ 使/ F/ —/ i/ / f/ ,/ 且/ q0/ →/ attSCCsk/ ,/ 其中/ SCCsk/ 为/ C/ 中/ 的/ 非/ 平凡/ SCCs/ ,/ 1/ / i/ / n/ ,/ f/ 为/ SCCsk/ 包含/ 的/ 可/ 接受/ 条件/ ,/ 因此/ C/ 具有/ 可/ 接受/ 运行/ 序列/ ,/ C/ 非空/ ./ 证明/ ./ 在/ MCA/ _/ ETGBA/ 算法/ 中/ ,/ 由/ Search/ 子/ 算法/ 的/ 程序/ 行/ 7/ ~/ 8/ ,/ 12/ 知/ ,/ 当/ 目标/ 结点/ s/ 是/ 已/ 访问/ 过/ 的/ 结点/ 时/ ,/ 调用/ Emptycheck/ 子/ 算法/ 对/ C/ 作判空/ 检测/ ./ 在/ Emptycheck/ 子/ 算法/ 中/ ,/ 若/ s/ 不带/ 删除/ 标志/ ,/ 则/ 发现/ 有/ 非/ 平凡/ SCCs/ 存在/ ,/ 可/ 将/ 其/ 记为/ SCCsk/ ,/ 计算/ 其/ 包含/ 的/ 可/ 接受/ 条件/ f/ ,/ 即/ 有/ f/ / SCCsk/ ,/ 由/ 程序/ 行/ 5/ ~/ 6/ 知/ ,/ 算法/ 输出/ “/ Yes/ ,/ 非空/ 的/ ETGBA/ ”/ 的/ 前提/ 是/ 存在/ 某个/ F/ —/ i/ ∈/ F/ —/ ,/ 且/ F/ —/ i/ / f/ ,/ 说明/ SCCsk/ 满足/ F/ —/ i/ ./ 假设/ F/ —/ i/ =/ {/ a1/ ,/ a2/ ,/ …/ ,/ an/ }/ ,/ SCCsk/ 包含/ 的/ 迁移/ 序列/ 为/ (/ si/ ,/ a1/ ,/ qi/ )/ ,/ (/ qi/ ,/ a2/ ,/ qi/ +/ 1/ )/ ,/ …/ ,/ (/ qj/ ,/ an/ ,/ si/ )/ ,/ 当/ MCA/ _/ ETGBA/ 算法/ 访问/ SCCsk/ 时/ ,/ 由/ 引理/ 1/ 知/ ,/ si/ →/ attqj/ 成立/ ,/ 且/ qj/ →/ si/ ,/ 由此/ 形成/ 无穷/ 运行/ 的/ 迁移/ 序列/ 为/ TS/ :/ (/ (/ si/ ,/ a1/ ,/ qi/ )/ ,/ (/ qi/ ,/ a2/ ,/ qi/ +/ 1/ )/ ,/ …/ ,/ (/ qj/ ,/ an/ ,/ si/ )/ )/ / (/ 其中/ “/ / ”/ 表示/ 无穷/ 多次/ 运行/ )/ ./ 由/ TS/ 可知/ ,/ F/ —/ i/ 在/ SCCsk/ 的/ 无穷/ 运行/ 迁移/ 序列/ 中/ 无穷/ 多次/ 出现/ ./ 在/ ETGBACheck/ 子/ 算法/ 中/ ,/ 在/ 程序/ 行/ 2/ 将/ (/ / ,/ / ,/ q0/ ,/ 1/ )/ 写入/ Path/ [/ 1/ ]/ 中/ ,/ 在/ 程序/ 行/ 3/ 调用/ Search/ 子/ 算法/ 对/ C/ 进行/ 搜索/ 的/ 过程/ 中/ ,/ 依次/ 将/ 所/ 访问/ 的/ 迁移/ 序列/ 及/ 相应/ 访问/ 标志/ 写入/ Path/ 数组/ 单元/ ,/ 当/ 访问/ 到/ 迁移/ 关系/ (/ si/ -/ 1/ ,/ ai/ ,/ si/ )/ 时/ ,/ 将/ (/ si/ -/ 1/ ,/ ai/ ,/ si/ ,/ 1/ )/ 写入/ Path/ [/ j/ ]/ 中/ ,/ 其中/ j/ / i/ >/ 0/ ,/ 由/ 引理/ 1/ 知/ ,/ q0/ →/ attsi/ ,/ 又/ 由/ si/ ∈/ SCCsk/ 知/ ,/ q0/ →/ SCCsk/ ./ 从/ 以上/ 证明/ 可知/ ,/ 定理/ 2/ 成立/ ./ 证毕/ ./ 定理/ 3/ ./ C/ =/ 〈/ 珦/ A/ ,/ Q/ ,/ ξ/ ,/ F/ —/ ,/ q0/ ,/ T/ 〉/ 为/ 一个/ ETGBA/ ,/ 若/ C/ 存在/ 可/ 接受/ 运行/ ,/ 则/ MCA/ _/ ETGBA/ 算法/ 输出/ Page7/ “/ Yes/ ,/ 非空/ 的/ ETGBA/ ”/ ,/ 判断/ C/ 非空/ ./ 证明/ ./ 假设/ MCA/ _/ ETGBA/ 算法/ 输出/ “/ No/ ,/ ETGBA/ 为空/ ”/ ,/ 由/ Search/ 子/ 算法/ 知/ ,/ Trans/ =/ / 是/ 算法/ 输出/ “/ No/ ,/ ETGBA/ 为空/ ”/ 后/ 终止/ 运行/ 的/ 唯一/ 条件/ ,/ 此时/ 算法/ 已/ 对/ C/ 中/ 所有/ 状态/ 结点/ 和/ 迁移/ 关系/ 进行/ 了/ 访问/ ,/ 此前/ 唯一/ 能够/ 终止/ MCA/ _/ ETGBA/ 算法/ 的/ 语句/ 是/ Emptycheck/ 子/ 算法/ 的/ 程序/ 行/ 5/ ~/ 6/ ,/ 因此/ ,/ MCA/ _/ ETGBA/ 算法/ 输出/ “/ No/ ,/ ETGBA/ 为空/ ”/ 的/ 前提条件/ 是/ 搜索/ 了/ C/ 以后/ ,/ 没有/ 发现/ 存在/ 非/ 平凡/ SCCs/ 满足/ 某个/ F/ —/ i/ ∈/ F/ —/ ,/ 使得/ F/ —/ i/ / f/ 成立/ ,/ 即/ C/ 的/ 可/ 接受/ 运行/ 序列/ 不/ 存在/ ,/ 与题/ 设/ 条件/ 相/ 矛盾/ ,/ 故本/ 定理/ 成立/ ./ 引理/ 2/ ./ C/ =/ 〈/ 珦/ A/ ,/ Q/ ,/ ξ/ ,/ F/ —/ ,/ q0/ ,/ T/ 〉/ 为/ 一个/ ETGBA/ ,/ MCA/ _/ ETGBA/ 算法/ 对/ C/ 中/ 的/ 状态/ 和/ 迁移/ 关系/ 至多/ 搜索/ 一次/ ./ 证明/ ./ 在/ ETGBACheck/ 子/ 算法/ 中/ ,/ 先/ 访问/ q0/ ,/ 然后/ 调用/ Search/ 子/ 算法/ 对/ q0/ 的/ 后继/ 进行/ 搜索/ ,/ 若/ 最近/ 访问/ 结点/ q/ 没有/ 后继/ ,/ 则/ 调用/ Delete/ 子/ 算法/ 对/ q/ 做/ 删除/ 操作/ ,/ 由/ 定理/ 1/ 知/ ,/ Delete/ 子/ 算法/ 能/ 进一步/ 判断/ q/ 的/ 父/ 结点/ 并/ 做/ 相应/ 的/ 删除/ 操作/ ,/ 使得/ Search/ 子/ 算法/ 以后/ 不再/ 搜索/ 这些/ 结点/ ./ 在/ Search/ 子/ 算法/ 的/ 程序/ 行/ 5/ ~/ 6/ ,/ 从/ Trans/ 栈顶/ 读取/ 一个/ 迁移/ 关系/ 后/ ,/ 将/ 其/ 出栈/ ,/ 以后/ 不再/ 访问/ ,/ 若/ 目标/ 结点/ 没有/ 访问/ 过/ ,/ 则/ 程序/ 行/ 10/ 将/ 该/ 迁移/ 关系/ 及/ 访问/ 标志/ 1/ 写入/ 数组/ Path/ 中/ ,/ 然后/ 以此/ 目标/ 结点/ 为/ 最近/ 访问/ 结点/ ,/ 重复/ 上述/ 过程/ 继续/ 搜索/ ;/ 若/ 读取/ 的/ 目标/ 结点/ 已/ 访问/ 过/ ,/ 则/ 程序/ 行/ 12/ 调用/ Emptycheck/ 子/ 算法/ 作判空/ 检测/ ./ 在/ Emptycheck/ 子/ 算法/ 中/ ,/ 若/ 目标/ 结点/ 带有/ 删除/ 标志/ ,/ 则/ 对/ 其/ 不/ 做/ 处理/ ,/ 返回/ 到/ Search/ 子/ 算法/ 中/ ,/ 继续/ 从/ Trans/ 栈顶/ 读取/ 新/ 的/ 迁移/ 关系/ ,/ 重复/ 以上/ 过程/ ;/ 若/ 目标/ 结点/ 已/ 访问/ 过且/ 未作/ 删除/ 标志/ ,/ 此时/ 发现/ 有/ 非/ 平凡/ SCCs/ 存在/ ,/ 若/ 发现/ 存在/ 某个/ F/ —/ i/ ∈/ F/ —/ 且/ F/ —/ i/ / f/ ,/ 终止/ 算法/ 并/ 输出/ “/ Yes/ ,/ 非空/ 的/ ETGBA/ ”/ ,/ 否则/ ,/ 继续/ 执行程序/ 行/ 7/ ~/ 8/ ,/ 进一步/ 判断/ 此/ SCCs/ 是否/ 为/ 极大/ 非/ 平凡/ SCCs/ ,/ 若/ 是/ ,/ 在/ 程序/ 行/ 9/ ~/ 10/ 对此/ SCCs/ 中/ 所有/ 结点/ 做/ 删除/ 标志/ ,/ 以后/ 再/ 遇到/ 这些/ 结点/ 时/ 无需/ 处理/ ,/ 否则/ ,/ 执行程序/ 行/ 11/ ~/ 12/ ,/ 将/ 相应/ 迁移/ 关系/ (/ s/ ,/ f/ ,/ s/ )/ 及/ s/ 的/ 访问/ 标志/ 1/ 写入/ Path/ 中/ ,/ 然后/ 返回/ 到/ Search/ 子/ 算法/ 中/ ,/ 此时/ 若/ Trans/ 栈非空/ ,/ 继续/ 从/ Trans/ 栈顶/ 读取/ 新/ 的/ 迁移/ 关系/ ,/ 重复/ 以上/ 过程/ ./ 综上所述/ ,/ 算法/ 对/ C/ 中/ 已/ 访问/ 过/ 的/ 状态/ 和/ 迁移/ 关系/ 没有/ 重复/ 搜索/ ,/ 因此/ ,/ MCA/ _/ ETGBA/ 算法/ 对/ C/ 中/ 的/ 状态/ 和/ 迁移/ 关系/ 至多/ 搜索/ 一次/ ./ 定理/ 4/ ./ C/ =/ 〈/ 珦/ A/ ,/ Q/ ,/ ξ/ ,/ F/ —/ ,/ q0/ ,/ T/ 〉/ 为/ 一个/ ETGBA/ ,/ 对于/ C/ 作为/ 输入/ ,/ 在/ C/ 为空/ 的/ 最坏/ 情况/ 下/ ,/ MCA/ _/ ETGBA/ 算法/ 的/ 空间/ 复杂度/ 为/ O/ (/ k/ |/ T/ |/ +/ k/ )/ ,/ 其中/ C/ 所/ 包含/ 的/ 迁移/ 关系/ 数为/ k/ ,/ 存储/ C/ 中/ 迁移/ 关系/ Ti/ (/ Ti/ ∈/ T/ )/ 所/ 需/ 最大/ 空间/ 为/ |/ T/ |/ ./ 证明/ ./ MCA/ _/ ETGBA/ 算法/ 在/ 搜索/ 过程/ 中/ ,/ 使用/ 栈/ Trans/ ,/ temp/ ,/ 数组/ Path/ 和/ 整型/ 变量/ length/ 作为/ 辅助/ 数据结构/ ./ 栈/ Trans/ 和/ temp/ 用来/ 存放/ 最近/ 访问/ 结点/ 的/ 后继/ 迁移/ 关系/ ./ 从/ TransPartition/ 子/ 算法/ 的/ 执行/ 过程/ 可知/ ,/ 栈/ Trans/ 和/ temp/ 所/ 占用/ 的/ 空间/ 最后/ 只/ 需/ 考虑/ 栈/ Trans/ 占用/ 的/ 空间/ 即可/ ./ 在/ Search/ 子/ 算法/ 的/ 程序/ 行/ 5/ ~/ 12/ ,/ 先/ 读出/ Trans/ 栈顶/ 元素/ 中/ 的/ 迁移/ 关系/ (/ s/ ,/ c/ ,/ s/ )/ ,/ 然后/ 作出/ 栈/ 操作/ ,/ 若/ 目标/ 结点/ s/ 没有/ 访问/ 过/ ,/ 则/ 将/ (/ s/ ,/ c/ ,/ s/ ,/ 1/ )/ 存入/ Path/ 数组/ 单元/ 中/ ,/ 若/ s/ 已/ 访问/ 过且/ 未/ 做/ 删除/ 标志/ ,/ 在/ Emptycheck/ 子/ 算法/ 的/ 程序/ 行/ 12/ ,/ 将/ (/ s/ ,/ f/ ,/ s/ ,/ 1/ )/ 存入/ Path/ 数组/ 中/ ,/ 这一/ 过程/ 表明/ Path/ 数组/ 中/ 存放/ 的/ 迁移/ 关系/ 与/ Trans/ 栈/ 中弹/ 出/ 的/ 元素/ 具有/ 对应/ 关系/ ./ 搜索/ 完/ C/ 后/ ,/ Trans/ 栈为/ 空/ ,/ 故栈/ Trans/ 、/ temp/ 和/ 数组/ Path/ 所/ 占用/ 总/ 空间/ 的/ 计算/ 最后/ 只/ 需/ 考虑/ Path/ 占用/ 的/ 空间/ 即可/ ./ 在/ 最坏/ 情况/ 下/ ,/ C/ 中/ 不/ 存在/ 可/ 接受/ 运行/ 序列/ ,/ MCA/ _/ ETGBA/ 算法/ 需要/ 搜索/ C/ 的/ 整个/ 状态/ 空间/ ,/ 由/ 引理/ 2/ 知/ ,/ MCA/ _/ ETGBA/ 算法/ 需要/ 对/ C/ 中/ 所有/ 的/ 状态/ 结点/ 搜索/ 一次/ ./ 由/ 引理/ 1/ 知/ ,/ 已/ 访问/ 结点/ 的/ 所有/ 后继/ 迁移/ 都/ 曾经/ 存放/ 栈/ Trans/ 中/ ,/ 又/ 由/ 上述/ Search/ 子/ 算法/ 的/ 搜索/ 过程/ 可知/ ,/ 数组/ Path/ 的/ 长度/ 为/ C/ 中/ 的/ 迁移/ 关系/ 数/ k/ ./ 由于/ |/ T/ |/ 为/ 存储/ C/ 中/ 迁移/ 关系/ Ti/ (/ Ti/ ∈/ T/ )/ 所/ 需/ 最大/ 空间/ ,/ 故/ 数组/ Path/ 中/ 存放/ 的/ 迁移/ 关系/ 占用/ 的/ 空间/ 大小/ 为/ k/ |/ T/ |/ ./ 每个/ Path/ 数组/ 单元/ 中/ 存储/ 布尔/ 型/ 访问/ 标志/ 占用/ 的/ 空间/ 大小/ 为/ 1/ ,/ 因此/ ,/ 搜索/ 完/ C/ 后/ ,/ 数组/ Path/ 占用/ 的/ 空间/ 大小/ 为/ k/ |/ T/ |/ +/ k/ ./ 整型/ 变量/ length/ 用来/ 记录/ 数组/ Path/ 的/ 长度/ ,/ 其/ 占用/ 的/ 空间/ 大小/ 为/ 某个/ 常数/ c/ ./ 综上所述/ ,/ MCA/ _/ ETGBA/ 算法/ 在/ 最坏/ 情况/ 下/ 占用/ 的/ 空间/ 大小/ 为/ k/ |/ T/ |/ +/ k/ +/ c/ ,/ 其/ 空间/ 复杂度/ 为/ O/ (/ k/ |/ T/ |/ +/ k/ )/ ./ 定理/ 5/ ./ C/ =/ 〈/ 珦/ A/ ,/ Q/ ,/ ξ/ ,/ F/ —/ ,/ q0/ ,/ T/ 〉/ 为/ 一个/ ETGBA/ ,/ 对于/ C/ 作为/ 输入/ ,/ 在/ C/ 为空/ 的/ 最坏/ 情况/ 下/ ,/ MCA/ _/ ETGBA/ 算法/ 所用/ 时间/ 为/ O/ (/ l/ +/ k/ )/ ,/ 其中/ C/ 所/ 包含/ 的/ 迁移/ 关系/ 数/ 和/ 状态/ 结点/ 数/ 分别/ 为/ k/ 和/ l/ ./ 证明/ ./ 由/ 定理/ 4/ 知/ ,/ MCA/ _/ ETGBA/ 算法/ 在/ 最坏/ 情况/ 下/ ,/ 对/ C/ 中/ 所有/ 状态/ 和/ 迁移/ 关系/ 都/ 要/ 搜索/ 一次/ ./ C/ 包含/ 的/ 状态/ 和/ 迁移/ 关系/ 个数/ 之/ 和/ 为/ l/ +/ k/ ,/ 因/ Page8/ 此/ ,/ MCA/ _/ ETGBA/ 算法/ 的/ 时间/ 复杂度/ 为/ O/ (/ l/ +/ k/ )/ ./ 4/ 实验/ 4.1/ 实验/ 比较/ 本文/ 在/ ThinkVision/ PC机/ (/ 3.20/ GHzIntel/ ?/ CoreTMi5/ -/ 3470CPU/ 、/ 4.00/ GB/ 内存/ )/ 上/ ,/ 采用/ C++/ 语言/ 编程/ 实现/ 了/ MCA/ _/ ETGBA/ 算法/ ./ 实验/ 分为/ 两组/ ,/ 第/ 1/ 组/ 实验/ 根据/ 文献/ [/ 14/ ]/ 提供/ 的/ benchmark/ 数据/ ,/ 从中/ 选取/ 不同/ 大小/ 的/ 10/ 类/ 广义/ B/ ü/ chi/ 自动机/ ,/ 运用/ MCA/ _/ ETGBA/ 算法/ 和/ Tauriainen/ 算法/ 、/ Couvreur/ 算法/ 、/ Gaiser/ 算法/ 作判空/ 检测/ ,/ 实验/ 结果/ 见表/ 2/ 和表/ 3/ ./ 第/ 2/ 组/ 实验/ 根据/ 广义/ B/ ü/ chi/ 自动机/ 的/ 主要/ 结构特征/ ,/ 随机/ 构造/ 7/ 类/ 广义/ B/ ü/ chi/ 自动机/ :/ 源/ 数据/ 的/ 状态/ 空间/ 表/ 2/ 各类/ 算法/ 检测/ 10/ 类/ benchmark/ 数据/ 所/ 需/ 遍历/ 的/ 状态/ 空间/ Couvreur/ 算法/ statestransitionsstatestransitions604631539565837758377576241458105844220119758173329198506132286322862985977283323311136773912129188581512915429154285235669529185792102967256857296824758247581557356624854925088825518928357721862318639185743527618623581068623618138455361808118081179764516418083755542278159406090715940159401035440225159409253093394113392676811336113361128426632114564090711931915062697150615061080183215164542122911462085114611541122204111472906712/ 表/ 3/ 各类/ 算法/ 检测/ 10/ 类/ benchmark/ 数据/ 需要/ 的/ 时间/ (/ time/ )/ 与/ 空间/ (/ memory/ )/ time/ // smemory/ // KB/ 源/ 数据/ 的/ 状态/ 空间/ statestransitions604631539564/ ./ 30745468581618.3613363005201809/ ./ 74731737430.001042730832919850612/ ./ 3686130407548.053633469969924/ ./ 69714427750.000711885829188581512/ ./ 1896123431455.991812602950239/ ./ 03900312170.000431252825685729681/ ./ 88681255548.271942130530477/ ./ 59691356870.001971675618928357721/ ./ 2016025273548.021013363311639/ ./ 47342418990.001791241518138455361/ ./ 0839926758245.70856519849918/ ./ 07984577290.00049685715940609071/ ./ 0009130093130.77982644918401/ ./ 04505989180.00488985711339267680/ ./ 7604523799180.01369363394041/ ./ 40339367070.0025910511150626970/ ./ 1004946413.809885533285/ ./ 2856865340.000214570114620850/ ./ 0940466855.865597104/ 表/ 4/ 各类/ 算法/ 对/ 广义/ B/ ü/ chi/ 自动机/ 作出/ 非/ 空性/ 判断/ 的/ 有效性/ 判空/ 检测/ 算法/ Gaiser/ 算法/ 检测/ 正确/ 检测/ 正确/ 检测/ 正确/ 检测/ 正确/ 存在/ 失效/ 检测/ 正确/ 检测/ 正确/ Couvreur/ 算法/ 存在/ 失效/ 检测/ 正确/ 检测/ 正确/ 检测/ 正确/ 检测/ 正确/ 存在/ 失效/ 检测/ 正确/ Tauriainen/ 算法/ 检测/ 正确/ 检测/ 正确/ 检测/ 正确/ 检测/ 正确/ 检测/ 正确/ 检测/ 正确/ 检测/ 正确/ MCA/ _/ ETGBA/ 算法/ 检测/ 正确/ 检测/ 正确/ 检测/ 正确/ 检测/ 正确/ 检测/ 正确/ 检测/ 正确/ 检测/ 正确/ 分析/ 表/ 2/ 、/ 表/ 3/ 和表/ 4/ 可知/ ,/ MCA/ _/ ETGBA/ 算法/ 与/ Tauriainen/ 算法/ 检测/ 的/ 准确性/ 比较/ 高/ ,/ 但/ Tauriainen/ 算法/ 需要/ 更/ 多/ 的/ 检测时间/ 和/ 内存空间/ ,/ MCA/ _/ ETGBA/ (/ 1/ )/ 广义/ B/ ü/ chi/ 自动机/ 中/ 存在/ 带有/ 后/ 向/ 迁移/ 的/ 更/ 大/ 无/ 环子/ 图/ (/ 称为/ TGBA1/ &/ GBA1/ )/ ;/ (/ 2/ )/ 广义/ B/ ü/ chi/ 自动机/ 的/ 可/ 接受/ 条件/ 分布/ 在/ 多个/ 不同/ 的/ SCCs/ 中/ ,/ 且/ 这些/ SCCs/ 有/ 一个/ 共同/ 的/ 根/ 结点/ (/ 称为/ TGBA2/ &/ GBA2/ )/ ;/ (/ 3/ )/ 广义/ B/ ü/ chi/ 自动机/ 的/ 所有/ 可/ 接受/ 条件/ 分布/ 在/ 一个/ 简单/ 的/ 非/ 平凡/ SCCs/ 中/ (/ 称为/ TGBA3/ &/ GBA3/ )/ ;/ (/ 4/ )/ 广义/ B/ ü/ chi/ 自动机/ 的/ 可/ 接受/ 条件/ 分布/ 在/ 嵌套/ 有子/ SCCs/ 的/ 非/ 平凡/ SCCs/ 中/ (/ 称为/ TGBA4/ &/ GBA4/ )/ ;/ (/ 5/ )/ 广义/ B/ ü/ chi/ 自动机/ 的/ 可/ 接受/ 条件/ 分布/ 在/ 由/ 多个/ 子/ SCCs/ 交织/ 构成/ 的/ 非/ 平凡/ SCCs/ 中/ (/ 称为/ TGBA5/ &/ GBA5/ )/ ;/ (/ 6/ )/ 广义/ B/ ü/ chi/ 自动机/ 中/ 存在/ 带有/ 后/ 向/ 迁移/ 且/ 不/ 满足/ 可/ 接受/ 运行/ 条件/ 的/ 极大/ 非/ 平凡/ SCCs/ (/ 称为/ TGBA6/ &/ GBA6/ )/ ;/ (/ 7/ )/ 空/ 的/ 广义/ B/ ü/ chi/ 自动机/ (/ 称为/ TGBA7/ &/ GBA7/ )/ ./ 对/ 这/ 7/ 类/ 广义/ B/ ü/ chi/ 自动机/ 进行/ 检测/ 后/ ,/ 实验/ 结果/ 如表/ 4/ 所示/ ./ 算法/ 与/ Couvreur/ 算法/ 相比/ ,/ MCA/ _/ ETGBA/ 算法/ 检测/ 的/ 准确性/ 及时/ 空/ 性能/ 均/ 优于/ Couvreur/ 算法/ ,/ MCA/ _/ ETGBA/ 算法/ 与/ Gaiser/ 算法/ 相比/ ,/ MCA/ _/ ETGBAPage9/ 算法/ 进一步提高/ 了/ 判空/ 检测/ 的/ 全面性/ 与/ 有效性/ ,/ 在/ 通常/ 情况/ 下/ 作出/ 非/ 空性/ 判断/ 所/ 需/ 访问/ 的/ 状态/ 空间/ 更/ 少/ ,/ 时空/ 性能/ 更高/ ./ 当对/ 广义/ B/ ü/ chi/ 自动机/ 作判空/ 检测/ 时/ ,/ 由于/ 本文/ 提出/ 的/ MCA/ _/ ETGBA/ 算法/ 具有/ 启发式/ on/ -/ the/ -/ fly/ 判空/ 检测/ 的/ 优点/ ,/ 在结构上/ 对/ 广义/ B/ ü/ chi/ 自动机/ 的/ 迁移/ 关系/ 作/ 了/ 化简/ ,/ 在/ 算法/ 中/ 加强/ 了/ 对/ 不能到达/ 和/ 不能/ 构成/ 非/ 平凡/ SCCs/ 的/ 结点/ 及/ 不/ 满足/ 广义/ B/ ü/ chi/ 自动机/ 可/ 接受/ 运行/ 条件/ 的/ 极大/ 非/ 平凡/ SCCs/ 的/ 处理/ ,/ 因此/ ,/ 在/ 通常/ 情况/ 下/ ,/ MCA/ _/ ETGBA/ 算法/ 对/ 广义/ B/ ü/ chi/ 自动机/ 能/ 作出/ 有效/ 的/ 判空/ 检测/ ,/ 且/ 非/ 空性/ 判断/ 所/ 需/ 遍历/ 的/ 状态/ 空间/ 较/ 少/ ,/ 时图/ 2/ 各/ 子系统/ 功能/ 行为/ 的/ FSP/ 模型/ 采用/ 文献/ [/ 13/ ]/ 中图/ 8/ 作为/ 系统/ 的/ 基本/ 安全/ 需求/ 模型/ ,/ 对系统/ 的/ 子系统/ 模型/ 及/ 基本/ 安全/ 需求/ 模型/ 在/ 模型/ 检测工具/ LTSA/ 中作/ 组合/ 运算/ 后/ 生成/ 扩展/ 的/ 广义/ B/ ü/ chi/ 自动机/ 模型/ ,/ 采用/ MCA/ _/ ETGBA/ 算法/ 对/ 其作/ 判空/ 检测/ ,/ 检测/ 结果/ 为/ “/ No/ ,/ ETGBA/ 为空/ ”/ ,/ 所/ 需/ 时间/ 约/ 为/ 0.0084/ s/ ,/ 所/ 需/ 空间/ 为/ 9252KB/ ,/ 该/ 模型/ 为空/ ,/ 说明/ 系统/ 设计/ 满足/ 安全性/ 要求/ ./ 若/ 在/ 系统/ 的/ 道岔/ 部件/ (/ Switch/ )/ 中/ 注入/ 故障/ 事件/ :/ 系统/ 发出/ 锁闭/ 道岔/ 命令/ (/ switchLock/ )/ 后/ ,/ 道岔/ 没有/ 执行/ 指令/ ,/ 锁闭/ 失效/ (/ switchLockFail/ )/ ,/ 则/ 注入/ 故障/ 后/ Switch/ 和/ ILController/ 的/ 相应/ FSP/ 模型/ ,/ 如图/ 3/ 和/ 图/ 4/ 所示/ ./ 将/ 图/ 2/ 中/ (/ a/ )/ 、/ (/ b/ )/ 、/ (/ e/ )/ 子图/ 和/ 图/ 3/ 、/ 图/ 4/ 所示/ 模型/ 与/ 系统/ 的/ 基本/ 安全/ 需求/ 模型/ 在/ LTSA/ 中作/ 组合/ 空/ 性能/ 更优/ ,/ 使得/ MCA/ _/ ETGBA/ 算法/ 具有/ 明显/ 的/ 优势/ ./ 4.2/ 实例/ 研究/ 根据/ 文献/ [/ 13/ ]/ 所/ 描述/ 的/ 铁路/ 车站/ 计算机/ 联锁/ 系统/ 中/ 基本/ 进路/ 建立/ 的/ 需求/ 场景/ ,/ 相应/ 的/ 系统/ 设计/ 可/ 由/ 用户/ 操作/ (/ User/ )/ 、/ 联锁/ 控制中心/ (/ ILController/ )/ 、/ 道岔/ 管理/ (/ Switch/ )/ 、/ 轨道/ 区段/ (/ Section/ )/ 及/ 信号灯/ 控制/ (/ LED/ )/ 这/ 几个/ 子系统/ 组成/ ,/ 各/ 子系统/ 功能/ 行为/ 的/ FSP/ 模型/ 如图/ 2/ 所示/ ,/ 图/ 2/ 由子/ 图/ (/ a/ )/ 、/ (/ b/ )/ 、/ (/ c/ )/ 、/ (/ d/ )/ 、/ (/ e/ )/ 组成/ ,/ 其中/ 各个/ 动作/ 行为/ 的/ 具体/ 含义/ 如/ 文献/ [/ 13/ ]/ 中/ 的/ 表/ 1/ 所示/ ./ 运算/ ,/ 新/ 生成/ 的/ 模型/ 包含/ 的/ 状态/ 结点/ 数为/ 177/ ,/ 迁移/ 数为/ 336/ ,/ 采用/ MCA/ _/ ETGBA/ 算法/ 对/ 其作/ 判空/ 检测/ ,/ 检测/ 结果/ 为/ “/ Yes/ ,/ 非空/ 的/ ETGBA/ ”/ ,/ 形成/ 相应/ 反例/ 为/ routeSelect/ →/ routeOccupied/ →/ antiRouteCheck/ →/ noAntiRouteBuilt/ →/ routeCheck/ →/ routeEmpty/ →/ switchCheck/ →/ checkOK/ →/ antiRouteLock/ →/ switch/ -/ Lock/ →/ switchLockFail/ →/ enableLED/ →/ openLED/ →/ ledOpened/ →/ routeBuiltOK/ →/ trainComing/ →/ close/ -/ LED/ →/ dismissSwitchAll/ →/ switchUnlock/ →/ routeSelect/ ,/ Page10/ 图/ 4/ 注入/ 故障/ 后/ ILController/ 相应/ 的/ FSP/ 模型/ 根据/ 系统/ 的/ 基本/ 安全/ 需求/ 模型/ ,/ 此/ 反例/ 违反/ 了/ 子/ 条件/ 集/ {/ routeSelect/ ,/ switchLockFailure/ ,/ routeBuiltOK/ }/ 与/ {/ routeSelect/ ,/ routeOccupied/ ,/ routeBuiltOK/ }/ ,/ 说明/ 系统/ 中/ 不能/ 存在/ 道岔/ 锁闭/ 失效/ 的/ 情况/ 下/ 仍/ 能/ 建立/ 进路/ 的/ 危险/ 情形/ ,/ 否则/ ,/ 该/ 系统/ 为/ 不/ 安全/ 的/ 系统/ ./ 以上/ 实例/ 的/ 检测/ 结果/ 与/ 铁道/ 行业标准/ [/ 15/ ]/ 中/ 规定/ 的/ 基本/ 联锁/ 功能/ 中/ 的/ 要求/ 相一致/ ,/ 因此/ ,/ 本文/ 提出/ 的/ MCA/ _/ ETGBA/ 算法/ 是/ 实际/ 可行/ 的/ ./ 5/ 结论/ 本文/ 从/ 安全/ 苛求/ 计算机系统/ 的/ 安全性/ 分析/ 与/ 验证/ 实践/ 出发/ ,/ 提出/ 了/ MCA/ _/ ETGBA/ 算法/ ,/ 从/ 理论/ 上/ 证明/ 了/ 算法/ 的/ 正确性/ ,/ 并/ 对/ 算法/ 的/ 时空/ 复杂度/ 作/ 了/ 分析/ ./ MCA/ _/ ETGBA/ 算法/ 通过/ 启发式/ on/ -/ the/ -/ fly/ 判空/ 检测/ ,/ 克服/ 了/ 传统/ 的/ 广义/ B/ ü/ chi/ 自动机/ 判空/ 检测/ 过程/ 中/ 存在/ 的/ 盲目/ 搜索/ 问题/ ,/ 在/ 对/ ETGBA/ 模型/ 的/ 状态/ 空间/ 进行/ 搜索/ 的/ 过程/ 中/ ,/ 加强/ 了/ 对/ 没有/ 后继/ 输出/ 结点/ 的/ 删除/ 操作/ 及其/ 父/ 结点/ 的/ 判断/ 与/ 相应/ 处理/ ,/ 并/ 对/ 不/ 满足/ ETGBA/ 可/ 接受/ 运行/ 条件/ 的/ 极大/ 非/ 平凡/ SCCs/ 进行/ 了/ 相应/ 的/ 判断/ 与/ 处理/ ,/ 从而/ 使得/ MCA/ _/ ETGBA/ 算法/ 在/ 检测/ 过程/ 中/ 再次/ 遇到/ 不能/ 构成/ ETGBA/ 可/ 接受/ 运行/ 序列/ 的/ 结点/ 时/ 无需/ 再/ 处理/ ,/ 提高/ 了/ 检测/ 效率/ ,/ 节省/ 了/ 系统/ 所/ 需/ 的/ 内存空间/ ,/ 能/ 较/ 快/ 地/ 判断/ 出/ ETGBA/ 的/ 非/ 空性/ ./ 通过/ 铁路/ 车站/ 联锁/ 系统/ 中/ 基本/ 进路/ 建立/ 的/ 安全性/ 验证/ 实例/ 验证/ 了/ 本文/ 所/ 提出/ 算法/ 的/ 实际/ 可行性/ ./ 与/ 已有/ 算法/ 相比/ ,/ MCA/ _/ ETGBA/ 算法/ 的/ 通用性/ 与/ 实用性/ 更强/ ,/ 当对/ 广义/ B/ ü/ chi/ 自动机/ 作判空/ 检测/ 时/ ,/ 在/ 通常/ 情况/ 下/ MCA/ _/ ETGBA/ 算法/ 能/ 对/ 广义/ B/ ü/ chi/ 自动机/ 进行/ 有效/ 的/ 检测/ ,/ 且/ 非/ 空性/ 判断/ 所/ 需/ 遍历/ 的/ 状态/ 空间/ 较/ 少/ ,/ 时空/ 性能/ 更优/ ./ MCA/ _/ ETGBA/ 算法/ 为/ 安全/ 苛求/ 计算机系统/ 的/ 形式化/ 安全/ 防护/ 分析/ 与/ 验证/ 评估/ 提供/ 了/ 新/ 方法/ ./ 

