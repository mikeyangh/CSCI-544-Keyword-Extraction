Page1/ 基于/ 效用/ 的/ EPONVoDQoS/ 组播/ 实现/ 机制/ 研究/ 张晋豫/ 1/ )/ 刘犁/ 2/ )/ 杨维/ 1/ )/ ,/ 3/ )/ 1/ )/ (/ 北京/ 交通/ 大学/ 计算机/ 学院/ 北京/ 100044/ )/ 2/ )/ (/ 新泽西/ 理工学院/ 计算机科学/ 系内/ 瓦克/ 新泽西/ 07102/ 美国/ )/ 3/ )/ (/ 东南大学/ 移动/ 通信/ 国家/ 重点/ 实验室/ 南京/ 210096/ )/ 摘要/ 服务质量/ 无法/ 保证/ 和/ 低效益/ 是/ IP/ 网络/ 上/ 开展/ VoD/ 业务/ 面临/ 的/ 主要/ 问题/ ./ 基于/ 组播/ 业务/ 的/ 网络/ 优先级/ 、/ 用户群/ 的/ SLA/ 优先级/ 和/ 经济/ 优先级/ ,/ 提出/ 了/ 一个/ 基于/ 效用/ 的/ EPONVoD/ 组播/ QoS/ 优先级/ (/ 效用/ 优先级/ )/ 算法/ ./ 在/ 网络/ 拥塞/ 的/ 时候/ ,/ 基于/ 该/ 效用/ 优先级/ 来/ 动态/ 调整/ 组播/ 组/ 的/ 资源分配/ ,/ 不但/ 节省/ 了/ 带宽/ 需求/ 和/ 降低/ 包/ 丢失/ 率/ ,/ 而且/ 可/ 通过/ 将/ 网络资源/ 汇聚/ 到/ 高/ 价值/ 的/ 业务/ 上/ ,/ 提高/ 带宽/ 的/ 效益/ ./ 通过/ 对/ 变长/ 和/ 无序/ EPONEthernet/ 下行/ 帧/ 进行/ 基于/ 效用/ 的/ 定长/ 和/ 有序/ 的/ 改进/ ,/ 可/ 减少/ VoD/ 业务/ 流/ 的/ 包/ 时延/ 抖动/ ./ 仿真/ 实验/ 结果/ 很/ 好/ 地/ 验证/ 了/ 该/ 机制/ 的/ 优点/ ./ 关键词/ 以太/ 无源光/ 网络/ ;/ 视频点播/ ;/ 服务质量/ ;/ 组播/ 1/ 引言/ 网络带宽/ 且/ 具有/ 严格/ 的/ QoS/ (/ QualityofService/ )/ 要求/ ,/ 具有/ 个性/ 和/ 群体性/ 双重/ 属性/ ,/ 适合/ 使用/ 组播/ 传输/ ./ EPON/ [/ 1/ -/ 2/ ]/ (/ EthernetPassiveOpticalNetwork/ )/ VoD/ (/ VideoonDemand/ )/ 业务/ 需要/ 占用/ 大量/ 的/ 能够/ 提供/ 1Gbps/ (/ 未来/ 可以/ 达到/ 2.5/ Gbps/ 和/ 10Gbps/ )/ Page2/ 的/ 上下行/ 带宽/ ,/ 其/ P2MP/ (/ Point/ -/ to/ -/ MultiplePoint/ )/ 的/ 无源/ 树形/ 拓扑/ 非常适合/ 于/ 广播/ 和/ 组播/ 业务/ 的/ 开展/ ;/ 采用/ 与/ IP/ (/ InternetProtocol/ )/ 兼容/ 的/ 以太/ 帧/ 结构/ ,/ 可以/ 和/ 广域网/ 无缝/ 连接/ ;/ 采用/ 集中/ 的/ 下行/ 以太/ 广播/ 和/ 上行/ TDMA/ (/ TimeDivisionMultipleAddress/ )/ MAC/ (/ MediaAccessControl/ )/ 协议/ ,/ 中间/ 不/ 需要/ 路由/ ,/ 可/ 保证/ 较/ 小/ 的/ 包/ 传输/ 时延/ [/ 3/ ]/ ./ EPON/ 的/ 这些/ 优点/ 为/ VoD/ 业务/ 的/ 开展/ 提供/ 了/ 便利/ ,/ 但/ 也/ 显示/ 存在/ 一些/ 缺点/ [/ 4/ -/ 5/ ]/ :/ (/ 1/ )/ 由于/ 所有/ 的/ ONU/ (/ OpticalNetworkUnit/ )/ 共享/ 物理/ 媒质/ ,/ 当/ 分路/ 比较/ 高时/ ,/ 带宽/ 提供/ 能力/ 有限/ ;/ (/ 2/ )/ 当/ 网络/ 接入/ 率/ 和/ 多媒体/ 成份/ 增加/ 时/ ,/ 网络/ 拥塞/ 和/ 包/ 丢失/ 率/ 显著/ 增加/ ;/ (/ 3/ )/ 由于/ 采用/ 变长/ 的/ 下行/ 以太/ 帧/ (/ 64/ ~/ 1518Byte/ )/ 和/ 无序/ 的/ 帧/ 结构/ ,/ 在/ 突发/ 的/ 业务量/ 环境/ ,/ 具有/ 较大/ 的/ 时延/ 抖动/ ;/ (/ 4/ )/ 支持/ 的/ 优先级/ 机制/ ,/ 如/ DiffServ/ (/ DifferentiatedService/ )/ 和/ 802.1/ Q/ 等/ ,/ 容易/ 产生/ 所谓/ 的/ “/ 低效益/ ”/ 问题/ ,/ 即/ 大量/ 低/ 价值/ 的/ 业务/ 流/ 占据/ 大量/ 的/ 带宽/ [/ 6/ -/ 9/ ]/ ./ VoD/ 是/ 增值/ 业务/ ,/ 除了/ 要/ 强调/ 业务/ 的/ 网络/ 优先级/ 保证/ 外/ ,/ 还要/ 兼顾/ 用户/ 的/ SLA/ (/ ServiceLevelAgreement/ )/ 和/ 业务/ 的/ 经济/ 优先级/ 保证/ ./ 文献/ [/ 10/ -/ 11/ ]/ 提出/ 了/ 基于/ 拍卖/ 的/ 网络资源/ 调度/ 机制/ ,/ 文献/ [/ 12/ -/ 13/ ]/ 提出/ 基于/ 网络/ 、/ 政策/ 和/ 市场/ 属性/ 的/ 网络/ 业务/ 定价/ 机制/ ,/ 文献/ [/ 14/ -/ 15/ ]/ 提出/ 了/ 基于/ 用户/ 的/ SLA/ 的/ EPON/ 的/ QoS/ 实现/ 机制/ ,/ 但/ 目前/ 还/ 没有/ 发现/ 关于/ 组播/ 组/ 群体/ SLA/ 优先级/ 定义/ 以及/ 基于/ 它/ 的/ QoS/ 实现/ 机制/ 的/ 研究成果/ ./ 基于/ 组播/ 用户/ 的/ SLA/ 优先级/ 、/ 组播/ 业务/ 的/ 网络/ 优先级/ 和/ 经济/ 优先级/ ,/ 借鉴/ 经济/ 理论/ ,/ 本文/ 提出/ 了/ 一个/ 基于/ 效用/ 的/ VoD/ 组播/ 业务/ QoS/ 优先级/ (/ 效用/ 优先级/ )/ 算法/ ,/ 在/ 拥塞/ 时/ ,/ 源/ 调度/ 模块/ 基于/ 效用/ 优先级/ 动态/ 调整/ 编码/ 压缩率/ 和/ 进行/ 基于/ 效用/ 的/ 资源/ 调度/ ,/ 不但/ 节省/ 了/ 网络带宽/ 需求/ ,/ 减少/ 了/ 网络/ 拥塞/ 和/ 丢/ 包率/ ,/ 提高/ 了/ VoD/ 组播/ 业务/ 的/ QoS/ 保证/ 能力/ ,/ 而且/ 通过/ 将/ 带宽/ 汇聚/ 到/ 高/ 价值/ 的/ 组播/ 业务/ 上/ ,/ 提高/ 了/ 网络资源/ 的/ 运营/ 效益/ ,/ 解决/ 了/ “/ 低效益/ ”/ 问题/ ./ 对/ EPON/ 变长/ 和/ 无序/ 的/ 下行/ 以太/ 帧/ 进行/ 了/ 有序/ 和/ 定长/ 的/ 改进/ :/ (/ 1/ )/ 采用/ 定/ 长/ 以太/ 下行/ 帧/ ;/ (/ 2/ )/ 在/ 一个/ 下行/ 帧/ 中/ ,/ 从前/ 到/ 后/ 按照/ 组播/ 业务/ 的/ 效用/ 优先级/ 降序/ 排列/ 组播/ 业务/ 包/ ,/ Internet/ 排在/ 组播/ 业务/ 的/ 后面/ ,/ 仍然/ 采用/ 无序/ 和/ 变长/ 的/ 结构/ ;/ (/ 3/ )/ 不同/ 帧/ 中/ ,/ 同组/ 播/ 业务/ 的/ 数据包/ 的/ 大小/ 保持/ 相同/ ./ 通过/ 这些/ 改进/ ,/ 在/ 突发/ Ethernet/ 业务/ 流/ 环境/ 下/ 降低/ 了/ 包/ 的/ 时延/ 抖动/ ,/ 解决/ 了/ EPONMAC/ 机制/ 固有/ 的/ 时延/ 抖动/ 过大/ 问题/ ./ 本文/ 第/ 2/ 节/ 论述/ 基于/ 效用/ 的/ EPONVoD/ 组播/ QoS/ 实现/ 机制/ ;/ 第/ 3/ 节/ 介绍/ 仿真/ 实验/ 和/ 讨论/ ;/ 最后/ 给出/ 我们/ 的/ 结论/ ./ 2/ 基于/ 效用/ 的/ EPONVoDQoS/ 组播/ 实现/ 机制/ 本文/ 提出/ 了/ 一个/ 基于/ 效用/ 的/ EPONVoDQoS/ 组播/ 实现/ 机制/ ,/ 如图/ 1/ 所示/ ./ 图/ 1/ 基于/ 效用/ 的/ EPONVoDQoS/ 组播/ 实现/ 构架/ 本/ 机制/ 分为/ 4/ 个/ 模块/ :/ (/ 1/ )/ 动态/ 组播/ 业务/ 应用/ 定义/ ;/ (/ 2/ )/ 基于/ 效用/ 的/ 业务/ 类/ 定义/ ;/ (/ 3/ )/ 低/ 丢/ 包率/ 动态/ 资源/ 调度/ ;/ (/ 4/ )/ 低/ 时延/ 抖动/ 执行/ 结构/ ./ 2.1/ 动态/ 组播/ 业务/ 应用/ 定义/ EPON/ 中/ 的/ 数据/ 设备/ 属于/ 第/ 2/ 层/ ,/ 数据传输/ 不/ 通过/ 路由器/ ./ 二层/ 组播/ 协议/ 有/ GMRP/ (/ GroupMulticastRegistrationProtocol/ )/ 和/ IGMP/ (/ InternetGroupManagementProtocol/ )/ Snooping/ ./ GMPR/ 是/ 一个/ 纯粹/ 二层/ 协议/ ,/ 其/ 工作/ 范围/ 涉及/ 到/ 二/ 层交换机/ 与/ 主机/ ,/ 当/ 一台/ 主机/ 申请加入/ 和/ 离开/ 一个组/ 播组/ ,/ 它/ 向/ 交换机/ 发送/ 一个/ 以/ MAC/ 地址/ “/ 01/ -/ 80/ -/ C2/ -/ 00/ -/ 00/ -/ 20/ ”/ 为/ 目的/ 地址/ 的/ GMRP/ 包/ ,/ 交换机/ 据此/ 在/ 自己/ 内部/ 建立/ 和/ 维护/ 一个/ 基于/ MAC/ 和/ 转发/ 端口/ 的/ 二层/ 组播/ 转发/ ./ IGMPSnooping/ 的/ 工作/ 范围/ 涉及/ 到/ 路由器/ 、/ 交换机/ 与/ 主机/ ./ 交换机/ 中/ 的/ IGMPSnooping/ 功能/ 是/ 通过/ 窥探/ 路由器/ 发出/ 的/ 询问/ 与/ 主机/ 发出/ 的/ 应答/ 包/ ,/ 从而/ 在/ 交换机/ 内/ 建立/ 基于/ 端口/ 的/ 二层/ 组播/ 转/ 发表/ 来/ 实现/ 的/ ./ 当/ 主机/ 申请加入/ 或/ 离开/ 一个组/ 播/ ,/ 它/ 向/ 路由器/ 发送/ 一个/ IGMP/ 包/ ,/ 该/ 包经/ 交换机/ 到达/ 路由器/ ,/ 路由器/ 据此/ 决定/ 是否/ 转发/ 该组/ 的/ 数据/ 帧/ ./ 可以/ 看出/ ,/ 这/ 两个/ 协议/ 在/ 二层/ 上/ 实现/ 组播/ 的/ 功能/ 几乎/ 相同/ ,/ 由于/ IGMPSnooping/ 涉及/ 到/ 三层/ 相关/ 的/ 内容/ ,/ 反应速度/ 没有/ GMRP/ 快/ ,/ 但/ 目前/ GMPR/ 没有/ IGMPSnoo/ -/ ping/ 兼容性/ 好/ ,/ 所以/ 本/ 系统/ 采用/ IGMPSnooping/ ./ 在/ 网络/ 中有/ 路由器/ 时/ ,/ 路由器/ 管理/ 着/ 组播/ 组/ 的/ 建立/ Page3/ 和/ 删除/ 、/ 组成员/ 的/ 加入/ 和/ 离开/ ./ 本/ 系统/ 用/ 复用器/ 或/ ONU/ 模拟/ 路由器/ 的/ 这些/ 功能/ ./ 组播/ 组/ 的/ 建立/ 过程/ 如下/ :/ 系统/ 上电/ 工作/ 后/ ,/ ONU/ 发送/ 目的/ 地址/ 为/ 224.0/ ./ 0.1/ 询问/ 报文/ ,/ 各个/ 视频/ 源/ 收到/ 后/ ,/ 发送/ 目的/ 地址/ 为/ 224.0/ ./ 0.2/ 的/ 加入/ 报文/ ,/ ONU/ 收到/ 后/ 建立/ 各个/ 视频/ 组播/ 组/ ,/ 并/ 在/ 以后/ 的/ 主机/ 询问/ 时/ ,/ 向/ 主机/ 依次/ 报告/ ,/ 确保/ 各个/ 视频/ 组播/ 组/ 始终/ 存在/ ./ 具体/ 的/ 实现/ 过程/ 如下/ :/ 在/ 上行/ 方向/ ,/ IPSTB/ (/ Set/ -/ TopBox/ )/ 接收/ 到/ 红外/ 遥控器/ 的/ 频道/ 切换/ 命令/ 后/ ,/ 通过/ 视频/ 解码器/ 的/ 串口/ 送给/ 网络/ 处理器/ ./ 网络/ 处理器/ 首先/ 将/ 节目/ 频道/ 号/ 转换/ 为/ MAC/ 组播/ 地址/ ,/ 然后/ 将/ 该/ MAC/ 组播/ 地址/ 封装/ 到/ IGMP/ 的/ 请求/ 加入/ 包中/ ,/ 发送到/ Ether/ -/ net/ 多路/ 统计/ 复用器/ ,/ 申请/ 频道/ 切换/ ,/ 即将/ IPSTP/ 加入/ 到/ 相应/ 的/ 组播/ 组中/ ./ 由于/ EPON/ 的/ 下行/ 数据/ 是/ 广播/ 的/ ,/ 当前/ 播放/ 的/ 所有/ 视频/ 组播流/ 都/ 会/ 到达/ PON/ 内/ 的/ 每/ 一个/ ONU/ 上/ ,/ 这样/ 组播/ 组/ 的/ 加入/ 在/ ONU/ 就/ 可/ 完成/ ./ 只有/ 在/ PON/ 内/ 没有/ 视频/ 组播/ 流时/ ,/ ONU/ 才/ 将/ IGMP/ 加入/ 包转发/ 到/ Ethernet/ 多路/ 统计/ 复用器/ ,/ 后者/ 将/ 组播/ 地址/ 加入/ 到/ 它/ 的/ 下联/ 端口/ 的/ 组播/ 转/ 发表/ 里/ ,/ 将/ 该/ 路/ 视频流/ 广播/ 到/ PON/ 内/ 的/ 每/ 一个/ ONU/ ./ 频道/ 切换/ 涉及/ 到/ 离开/ 与/ 加入/ 组播/ 组/ 两个/ 过程/ ,/ 为了/ 切换/ ,/ 组成员/ 必须/ 先/ 离开/ 原来/ 的/ 组播/ 组后/ 再/ 加入/ 到/ 新/ 的/ 组播/ 组中/ ./ 当/ 一个/ VoD/ 节目/ 首次/ 被/ 申请/ 时/ ,/ EPON/ 为/ 它/ 建立/ 一个组/ 播组/ ./ OLT/ (/ OpticalLineTermination/ )/ 首先/ 为/ 该组/ 播组/ 实例/ 化/ 一个组/ 播/ MAC/ ,/ 并/ 绑定/ 一个/ LLID/ (/ LogicalLinkIdentifier/ )/ ,/ 然后/ 启动/ 一个/ 发现/ 过程/ ,/ 将/ 组播/ LLID/ 和/ 组播/ MAC/ 发送给/ ONU/ ,/ 完成/ ONU/ 的/ 组播/ 注册/ ,/ 自此/ ,/ ONU/ (/ OpticalNetworkUnit/ )/ 可以/ 接收/ 此/ 组播/ 组/ 数据流/ 了/ ./ 在/ 组播/ 组/ 组建/ 期/ ,/ 当/ 其它/ 用户/ 申请加入/ 此/ 组播/ 组时/ ,/ OLT/ 启动/ 一个/ 相同/ 的/ 发现/ 和/ 注册/ 过程/ ./ 当组播/ 组/ 组建/ 期/ 结束/ 后/ ,/ 业务/ 类/ 定义/ 模块/ 根据/ 所有/ 组播/ 用户/ 的/ SLA/ 、/ 组播/ 业务/ 的/ 网络/ 属性/ 和/ 经济/ 属性/ ,/ 使用/ EPONQoS/ 定义/ 算法/ ,/ 动态/ 为/ 该组/ 播/ 定义/ 一个/ 业务/ 类/ ,/ 资源/ 调度/ 模块/ 按照/ 该/ 业务/ 类来/ 分配/ 网络资源/ ,/ 并/ 交付/ 执行机构/ 来/ 实施/ ./ 2.2/ 业务/ 类/ 定义/ EPON/ 的/ 业务/ 类/ 定义/ 算法/ 的/ 输入/ 参数/ 包括/ :/ (/ 1/ )/ 宿主/ 的/ 级别/ (/ SLA/ )/ ;/ (/ 2/ )/ 宿主/ 的/ 数量/ ;/ (/ 3/ )/ 业务/ 的/ 网络/ 属性/ ;/ (/ 4/ )/ 业务/ 的/ 市场/ 属性/ ./ 由于/ VoD/ 是/ 增值/ 业务/ ,/ VoD/ 业务/ 的/ 自身/ 价格/ 和/ 组播/ 组/ 的/ 用户数/ 决定/ 了/ 它/ 的/ 市场/ 价值/ ,/ 而/ 市场/ 价值/ 是/ 影响/ 它/ 的/ 优先级/ 的/ 最/ 重要/ 的/ 因素/ ,/ 因此/ 可以/ 用/ 它/ 表示/ 组播/ 组/ 的/ 经济/ 优先级/ ./ 组播/ 组/ 的/ 经济/ 优先级/ 可/ 表示/ 为/ 其中/ ,/ Cx/ 、/ Mx/ 和/ Nx/ 分别/ 表示/ 组播/ 组/ x/ 的/ 业务/ 总价值/ 和/ 价格/ (/ 不/ 包括/ 传输/ 费用/ )/ 以及/ 总/ 用户数/ ,/ 满足/ Nx/ =/ ∑/ Jj/ 是/ 最大/ 的/ 用户/ 级/ SLA/ 级别/ 数/ ./ SLA/ 是/ 用户/ 和/ 运营商/ 签署/ 的/ 法律/ 文件/ ,/ 用/ EPON/ 的/ 网络/ 技术/ 语言/ SLS/ (/ ServiceLevelSpecifi/ -/ cation/ )/ 来/ 描述/ ,/ SLS/ 包含/ 业务/ QoS/ 水平/ 定义/ ,/ 由/ QoS/ 参数/ 子集/ 表示/ ,/ 并/ 进一步/ 被/ 映射/ 为/ EPONQoS/ 机制/ 的/ 转发/ 业务/ 类/ [/ 14/ -/ 15/ ]/ ./ EPON/ 支持/ DiffServQoS/ 机制/ [/ 11/ -/ 13/ ]/ ,/ 定义/ 了/ EF/ (/ ExpeditedForward/ )/ 、/ AF/ (/ AssuredForward/ )/ 和/ BE/ (/ BestEffort/ )/ 转发/ 业务/ 类/ ,/ EPON/ 在/ OLT/ 和/ ONU/ 为/ 每/ 一个/ 转发/ 业务/ 类/ 创建/ 一定/ 长度/ 的/ 优先级/ 队列/ ,/ 支持/ 不同/ 的/ 优先/ 级别/ ,/ 如/ CBR/ (/ ConstantBitRate/ )/ ,/ 适应/ 语音/ 业务/ 的/ QoS/ 特征/ ,/ VBR/ (/ VariantBitRate/ )/ ,/ 适应/ 视频/ 业务/ QoS/ 特征/ ,/ 以及/ BE/ (/ BestEffect/ )/ 优先级/ ,/ 适应/ 非/ 实时/ 数据业务/ 的/ 传输/ 特征/ ./ 优先级/ 调度/ 机制/ 负责/ 将/ 到达/ 的/ 数据包/ 按照/ 优先级/ 放入/ 相应/ 的/ 转发/ 队列/ 并/ 按照/ 调度/ 策略/ 进行/ 发送/ 控制/ ./ IEEE802/ ./ 1D/ 支持/ 严格/ 的/ 优先级/ 调度/ 机制/ [/ 6/ ,/ 9/ ]/ ,/ 即/ 为/ 不同/ 的/ 业务/ 类/ 创建/ 等长/ 的/ 队列/ ,/ 优先/ 转发/ 高/ 优先/ 队列/ 中/ 的/ 数据包/ ,/ 只有/ 当高/ 优先/ 级别/ 队/ 列为/ 空时/ ,/ 才/ 可能/ 转发/ 低优先级/ 队列/ 中/ 的/ 数据包/ ./ 当高/ 优先级/ 别的/ 队列/ 满时/ ,/ 后/ 到达/ 的/ 高/ 优先级/ 别的/ 包/ 可以/ 替换/ 低优先级/ 队列/ 中/ 的/ 低优先级/ 数据包/ ./ 因为/ 低优先级/ 队列/ 中/ 的/ 数据包/ 要/ 等到/ 高/ 优先级/ 队/ 列为/ 空/ 才能/ 发送/ ,/ 而/ VoD/ 业务/ 是/ 持续/ 的/ 业务/ 流/ ,/ 因此/ ,/ 即使/ 在/ 网络/ 总/ 的/ 业务量/ 降低/ 的/ 情况/ 下/ ,/ 低优先级/ 别/ 业务/ 类/ 的/ 数据包/ 的/ 传输/ 时延/ 和/ 丢/ 包率/ 也/ 可能/ 增加/ ,/ 产生/ 所谓/ 的/ “/ 轻/ 负载/ 惩罚/ ”/ 问题/ [/ 6/ ,/ 8/ ]/ ./ 为了/ 避免/ 这种/ 现象/ 发生/ ,/ 通用/ 的/ 方法/ 为/ 每/ 一个/ 业务/ 类/ 定义/ 一个/ 最大/ 带宽/ 门限/ [/ 7/ ,/ 9/ ]/ ./ 在/ 该/ 限制/ 下/ ,/ 对/ 相等/ 的/ 带宽/ ,/ 高/ 优先级/ 的/ 业务/ 类/ 通过/ 接纳/ 较少/ 的/ 用户/ 业务/ 应用/ 来/ 提高/ QoS/ 水平/ ./ 按照/ 经济学/ 理论/ ,/ 对/ ISP/ (/ InternetServiceProvider/ )/ 来说/ ,/ 相等/ 的/ 资源/ 需要/ 产生/ 相等/ 的/ 效益/ ,/ 这/ 势必/ 造成/ 高/ 优先级/ 别的/ 业务/ 类/ 单位/ 带宽/ 具有/ 较/ 高/ 的/ 价格/ [/ 10/ -/ 11/ ]/ ./ 因此/ ,/ 用户/ 的/ SLA/ 优先级/ 可用/ 该/ 级别/ 用户/ 拥有/ 的/ 最大/ 平均/ 带宽/ 的/ 价格/ 来/ 表示/ ,/ 优先/ 级别/ 越高/ ,/ 相同/ 带宽/ 支持/ 的/ 用户数/ 越/ 少/ ,/ 用户/ 拥有/ 的/ 平均/ 带宽/ 较/ 多/ ,/ 数据包/ 遭遇/ 拥塞/ 的/ 概率/ 较/ 低/ ,/ 业务/ 应用/ 的/ QoS/ 水平/ 越高/ ./ 一个/ 用户/ SLA/ 级别/ 可/ Page4/ 表示/ 为/ 其中/ ,/ pj/ 表示/ SLA/ 级别/ 为/ j/ 的/ 用户/ 的/ 平均/ 优先级/ ,/ R/ 表示/ EPON/ 单位/ 下行/ 带宽/ 的/ 价格/ (/ 对/ 各个/ 级别/ 是/ 一样/ 的/ )/ ,/ Wjmax/ 为/ 用户/ SLA/ 级别/ j/ 具有/ 的/ VoD/ 最大/ 带宽/ ,/ 满足/ ∑/ J/ 最大/ 的/ 用户数/ ,/ Wvod/ 为/ 组播/ 可以/ 使用/ 的/ 带宽/ ./ 对/ 一个/ VoD/ 组播/ 组/ ,/ 它/ 的/ 价值/ 包括/ 传输/ 费用/ (/ 网络/ 使用费/ )/ 和/ VoD/ 视频/ 业务/ 的/ 销售额/ ./ 价值/ 越大/ ,/ 为/ 运营商/ 带来/ 的/ 利润/ 就/ 越/ 多/ ./ 由于/ VoD/ 业务/ 是/ 增值/ 业务/ ,/ 就/ 应该/ 给/ 它/ 提供/ 好/ 的/ QoS/ 水平/ ./ 因此/ ,/ 可以/ 用/ VoD/ 组播/ 组/ 的/ 总价值/ 来/ 表示/ 它/ 的/ QoS/ 水平/ 优先级/ ,/ 即/ 效用/ 优先级/ ,/ 表示/ 为/ lx/ =/ kp/ ∑/ J/ 其中/ ,/ lx/ 为/ 组播/ 组/ x/ 的/ QoS/ 优先级/ ,/ Tx/ 为/ 播放/ 时/ 长/ ,/ kp/ 和/ kc/ 为/ 加权/ 系数/ ./ 其中/ ,/ 第/ 1/ 项中/ ∑/ J/ 示/ VoD/ 组播/ 业务/ 总/ 的/ 传输/ 费用/ ,/ 即/ 占用/ 带宽/ 资源/ 的/ 总费用/ ,/ 第/ 2/ 项/ Cx/ 表示/ VoD/ 业务/ 批发/ 销售/ 给/ 组播/ 用户/ 的/ 总价值/ ./ 2.3/ EPON/ 动态/ 低/ 丢/ 包率/ 资源/ 调度/ 机制/ EPON/ 的/ 数据/ 链路层/ 扩展/ 了/ IEEE802/ ./ 3/ 定义/ 的/ Ethernet/ 网络/ 的/ 数据/ 链路层/ ,/ 以/ 实现/ 点到/ 多点/ 的/ 访问控制/ ./ 在/ OLT/ 侧/ ,/ 多/ MAC/ 实体/ 共享/ 同一个/ 多点/ MAC/ 控制/ ./ 多点/ MAC/ 控制/ 是/ 包含/ 控制/ 解析器/ // 复用器/ 功能/ 的/ 唯一/ 实体/ ,/ 根据/ 多点/ 发送/ 控制/ 中/ 的/ 一个/ 外部/ 控制/ 信号/ 来/ 进行/ 发送/ 模块/ 的/ 使/ 能/ ,/ 避免/ 了/ 发送/ 冲突/ ,/ 丢包/ 不会/ 发生/ 在/ OLT/ 和/ ONU/ 之间/ 的/ ODN/ (/ OpticalDistributionNetwork/ )/ 上/ ,/ 因此/ EPON/ 不/ 需要/ CSMA/ // CD/ (/ CarrierSenseMultipleAccess/ // CollisionDetection/ )/ 协议/ ./ 由于/ Ethernet/ 业务/ 流/ 具有/ 突发性/ ,/ OLT/ 和/ ONU/ 的/ 优先级/ 队列/ 有/ 可能/ 发生/ 溢出/ 而/ 产生/ 丢包/ 现象/ ./ VoD/ 业务/ 属于/ 流媒体/ 业务/ ,/ 或者/ IPTV/ (/ IPTele/ -/ vision/ )/ 业务/ ,/ 基于/ 拥塞/ 机制/ 的/ TCP/ (/ TransportCon/ -/ trolProtocol/ )/ // IP/ 不能/ 为/ 流式/ 传输/ 提供/ 所/ 需要/ 的/ QoS/ 保证/ [/ 16/ -/ 17/ ]/ ./ 为了/ 解决/ 在/ IP/ 网络/ 上/ 传输流/ 媒体/ 所/ 固有/ 的/ QoS/ 缺陷/ ,/ 除了/ 改进/ 协议/ 外/ ,/ 如/ 使用/ RTP/ (/ Real/ -/ timeTransportProtocol/ )/ 和/ RTCP/ (/ RTPControlProtocol/ )/ 、/ RTSP/ (/ Real/ -/ TimeStreamingProtocol/ )/ 、/ MMS/ (/ MicrosoftMediaServerProtocol/ )/ 等/ ,/ 压缩/ 编码/ 是/ 一种/ 很/ 重要/ 的/ 方法/ ./ 压缩/ 编码/ 可以/ 减少/ 业务/ 的/ 带宽/ 需求/ ,/ 降低/ 网络/ 负载/ ,/ 从而/ 减少/ 拥塞/ 发生/ 的/ 概率/ ./ 当前/ 普遍/ 使用/ 的/ 流媒体/ 压缩/ 协议/ MPEG/ (/ MovingPictureExpertsGroup/ )/ 2/ 、/ MPEG4/ 和/ H/ ./ 264/ 等/ ,/ 都/ 可以/ 根据/ 实时/ 流媒体/ 协议/ 反馈/ 的/ 网络/ 的/ 拥塞/ 状态/ ,/ 自动/ 或/ 手动/ 调节/ 压缩/ 编码/ 参数/ 来/ 修改/ 压缩率/ [/ 16/ ]/ ./ 由于/ VoD/ 是/ 增值/ 业务/ ,/ 所以/ 在/ 网络/ 拥塞/ 时/ ,/ 应该/ 按照/ 组播/ 组/ 的/ 价值/ 来/ 分配/ 带宽/ :/ 价值/ 高/ 的/ 压缩/ 少/ 一点/ ,/ 价值/ 低/ 的/ 压缩/ 多一点/ ./ 由于/ 在/ 式/ (/ 3/ )/ 定义/ 的/ 组播/ 组/ 效用/ 优先级/ 等于/ 组播/ 组/ 的/ 价值/ ,/ 因此/ ,/ 在/ 网络/ 拥塞/ 时/ 分配/ 给/ 一个组/ 播组/ 的/ 带宽/ 或/ 压缩率/ ,/ 应/ 和/ 它/ 的/ 效用/ 优先级/ 成正比/ ./ 在/ 网络/ 拥塞/ 时/ ,/ 一个组/ 播组/ 的/ 压缩率/ 可/ 表示/ 为/ 其中/ ,/ rx/ 为/ 多播/ 组/ x/ 的/ 压缩率/ ,/ 等于/ 需求/ 带宽/ wxn/ 和/ 实际/ 分配/ 带宽/ wxa/ 的/ 比/ wxawxn/ 当/ 一个/ VoD/ 组播/ 组建/ 立时/ ,/ 它/ 的/ 加入/ 会/ 提高/ 网络/ 的/ 负载/ (/ 其/ 不/ 压缩/ 时/ 的/ 发送/ 带宽/ 需求/ 在/ VoD/ 的/ Profile/ 中/ 描述/ )/ :/ 网络/ 有/ 可能/ 会/ 发生/ 拥塞/ 和/ 不/ 拥塞/ 两种/ 情况/ ,/ 为了/ 保证/ 整个/ 网络/ 的/ QoS/ ,/ 同时/ 最大/ 限度/ 提高/ 带宽/ 资源/ 的/ 使用/ 价值/ ,/ 每/ 一个/ 在线/ 的/ VoD/ 应/ 通过/ 调节/ 压缩率/ 来/ 调整/ 它们/ 的/ 发送/ 带宽/ ,/ 调节/ 算法/ 如图/ 2/ 所示/ ./ 当新/ 的/ 组播/ 组/ x/ 加入/ 没有/ 引发/ 网络/ 拥塞/ 时/ ,/ 按照/ 组播/ 组/ x/ 的/ 带宽/ 需求/ wxn/ 来/ 支配/ 带宽/ ,/ 业务/ 流/ 不/ 压缩/ ,/ 提供/ 原始/ 的/ 视频/ 质量/ (/ 最好/ )/ ./ 其它/ 在线/ 的/ VoD/ 组播/ 组/ 业务/ 流/ 的/ 发送/ 带宽/ 不/ 作/ 调整/ ,/ 它们/ 也/ 提供/ 不/ 压缩/ 的/ 最好/ 的/ 视频/ 质量/ ./ 当要/ 引发/ 拥塞/ 时/ ,/ 为了/ 避免/ Page5/ 拥塞/ 发生/ ,/ 要/ 对/ 组播/ 组/ x/ 的/ 业务/ 流/ 进行/ 压缩/ ,/ 其它/ 在线/ 的/ VoD/ 组播/ 组/ 业务/ 流都/ 要/ 通过/ 压缩/ 来/ 调整/ 发送/ 速率/ ./ 压缩率/ 按照/ 式/ (/ 4/ )/ 计算/ ,/ 对/ 组播/ 组/ x/ ,/ 其/ 指配/ 的/ 业务/ 流/ 发送/ 带宽/ 为/ wxa/ =/ rx/ ×/ wxn/ ,/ 对/ 其它/ 在线/ 的/ 组播/ 组/ ,/ 其/ 业务/ 流/ 的/ 发送/ 带宽/ 调整/ 为/ / i/ ∈/ Nvod/ :/ wia/ =/ ri/ ×/ w/ ./ 对/ 组播/ 组/ x/ ,/ 资源/ 的/ 分配/ 算法/ 可以/ 用/ 下面/ 的/ 伪/ 代码/ 表示/ :/ wxa/ =/ wxn/ +/ ∑/ Nvod/ 对/ MPEG2/ // 4/ 以及/ H/ ./ 264/ 压缩/ 编码/ 算法/ ,/ 压缩/ 分为/ 无损压缩/ 和/ 有损压缩/ 两种/ ,/ 其中/ 无损压缩/ 是/ 通过/ 数学/ 变换/ 算法/ 来/ 实现/ 的/ ,/ 如/ 矩阵/ 的/ 对角/ 变换/ 等/ ,/ 有损压缩/ 是/ 通过/ 帧/ 内/ 、/ 帧/ 间/ 预测/ 算法/ 以及/ 帧/ 速率/ 和/ 帧/ 体积/ 调整/ 等/ 机制/ 来/ 实现/ [/ 16/ -/ 17/ ]/ ,/ 压缩率/ 越低/ ,/ 其/ 对/ 视频/ 质量/ 的/ 影响/ 越小/ ./ 式/ (/ 4/ )/ 参考/ 所有/ 在线/ 组播/ 组/ 的/ 价值/ 来/ 定义/ 压缩率/ 算法/ ,/ 不但/ 可/ 通过/ 调节/ 供求关系/ 避免/ 拥塞/ ,/ 而且/ 可以/ 保证/ 价值/ 大/ 的/ 组播/ 组/ 拥有/ 最小/ 的/ 压缩率/ ,/ 提供/ 最好/ 的/ 视频/ 质量/ ./ 因此/ ,/ 机制/ 实现/ 了/ 网络资源/ 基于/ 效用/ 的/ 优化/ ./ 图/ 3/ 低/ 时延/ 抖动/ 下行/ 帧/ 结构/ (/ 1/ )/ 变变/ 长帧/ 为/ 定长/ 帧/ ./ Ethernet/ 下行/ 帧/ 长度/ 可/ 在/ 64/ ~/ 1518Bytes/ 之间/ 选择/ ,/ 是/ 产生/ 时延/ 抖动/ 主要/ 原因/ ,/ 采用/ 定长/ 帧/ ,/ 可以/ 将/ 相邻/ 下行/ 帧/ 中/ 的/ 数据包/ 的/ 时延/ 抖动/ 限制/ 在/ 一个/ 范围/ 内/ ./ (/ 2/ )/ 变变/ 数据包/ 长为定/ 数据包/ 长/ ./ 在/ 不同/ 的/ 帧/ 中/ ,/ 变变/ 体积/ 的/ 同组/ 播组/ 数据包/ 为/ 等/ 体积/ 数据包/ ,/ 不同/ 组播/ 组/ 的/ 数据包/ 的/ 大小/ 和/ QoS/ 优先级/ 相关/ ,/ 级别/ 越高/ ,/ 数据包/ 越大/ ./ 一个组/ 播组/ 业务/ 流/ 的/ 数据包/ 的/ 大小/ 可/ 表示/ 为/ 其中/ ,/ Six/ 表示/ 在/ 一个/ 帧/ 中/ 效用/ 优先级/ 为/ i/ 的/ 组播/ 组/ x/ 的/ 包/ 的/ 大小/ ,/ L/ 为/ 总帧/ 长度/ ./ (/ 3/ )/ 变/ 无序/ 为/ 有序/ ./ 在/ 一个/ 下行/ 帧/ 中/ ,/ 从头开始/ ,/ 按照/ 效用/ 优先级/ 的/ 大小/ ,/ 降序/ 排列/ 不同/ VoD/ 组/ EPON/ 的/ 下行/ 是/ 基于/ LLID/ 来/ 过滤/ 的/ ,/ 一个/ LLID/ 可以/ 是/ 一个组/ 播组/ 、/ 单/ 拷贝/ 广播/ SCB/ (/ SingleCopyBroadcast/ )/ 或/ 一个/ 用户/ 单播/ ./ 下行/ 帧/ 中/ 可以/ 任意/ 组装/ 所有/ LLID/ 的/ 可变/ 长/ 数据包/ (/ 64/ ~/ 1518Byte/ )/ ./ 因此/ ,/ 一个/ VoD/ 组播/ 组/ 业务/ 流/ 的/ 下行/ 带宽/ 是/ 一个/ 统计/ 复用/ 带宽/ ,/ 可以/ 用/ 发送/ 的/ 总时长/ 表示/ :/ 其中/ ,/ tx/ 和/ Tvod/ 流/ x/ 和/ 所有/ 已/ 在线/ VoD/ 组播/ 组/ 业务/ 流/ 的/ 发送/ 时间/ ./ 2.4/ 低/ 时延/ 抖动/ 执行/ 结构/ 在/ OLT/ 侧/ ,/ 通过/ 实例/ 化/ 多个/ 多点/ MAC/ 控制/ 实体/ 来/ 实现/ 上层/ 的/ 多个/ MAC/ 控制/ 客户端/ 同/ 下层/ 的/ 多个/ MAC/ 之间/ 的/ 接口/ ./ 在/ ONU/ 侧/ ,/ 仅/ 使用/ 一个/ MAC/ 实体/ 同/ OLT/ 的/ 一个/ MAC/ 实体/ 进行/ 通信/ ./ MAC/ 控制/ 客户端/ 同/ MAC/ 实体/ 的/ 通信/ 要/ 经过/ OAM/ (/ Operation/ ,/ Administration/ &/ Management/ )/ 管理/ ./ 为了/ 减少/ 时延/ 抖动/ ,/ 针对/ 抖动/ 产生/ 的/ 原因/ [/ 3/ -/ 4/ ]/ ,/ 对/ 变长/ 无序/ 的/ 下行/ 以太/ 帧/ 进行/ 如图/ 3/ 所示/ 的/ 改进/ ./ 播组/ 数据包/ ./ Interent/ 数据包/ 放在/ VoD/ 的/ 后面/ ,/ 可以/ 是/ 变长/ 的/ ./ 高/ 优先级/ 别的/ 数据包/ 大/ ,/ 传输/ 带宽/ 高/ ,/ 在/ 业务/ 体积/ 相同/ 的/ 情况/ 下/ ,/ 最早/ 传输/ 完毕/ ./ 采用/ 倒序/ ,/ 可以/ 保证/ 帧/ 结构/ 稳定性/ ./ VoD/ 一般/ 是/ 持续/ 业务/ 流/ ,/ 以上/ 改进/ ,/ 可/ 保证/ VoD/ 数据包/ 具有/ 比较/ 小/ 的/ 时延/ 抖动/ ./ 当下/ 行/ 带宽/ 求/ 大于/ 供时/ ,/ 各个/ 组播/ 组/ 业务/ 流/ 的/ 压缩/ 编码/ 率/ 增加/ ,/ 数据包/ 减少/ ,/ 从而/ 时延/ 抖动/ 增加/ ./ 新/ 的/ 组播/ 组/ 的/ 产生/ 和/ 组播/ 用户数/ 的/ 动态变化/ 会/ 改变/ QoS/ 优先级/ ,/ 帧/ 中/ 数据包/ 顺序/ 随之/ 改变/ ,/ 从而/ 引发/ 时延/ 抖动/ 增加/ ./ 增加/ 的/ 时延/ 抖动/ 可/ 表示/ 为/ 其中/ ,/ (/ jx/ )/ n2n1/ 表示/ 在/ 两个/ 连续/ 帧/ 中/ ,/ 组播/ 组/ x/ 的/ QoS/ 优先级/ 从/ 第/ n1/ 级/ 变成/ n2/ 级别/ 时/ 的/ 时延/ 抖动/ ,/ 等于/ 在/ Page6/ 一个/ 帧/ 中/ ,/ 发送/ 优先级/ 低于/ n2/ 的/ 所有/ 数据包/ 和/ 优先级/ 低于/ n1/ 的/ 所有/ 数据包/ 的/ 时间差/ ./ VoD/ 是/ 具有/ timestamp/ 的/ 流式/ 媒体/ ,/ 时延/ 抖动/ 对/ 视频/ 质量/ 的/ 影响/ 较大/ ,/ 所以/ 对于/ 价值/ 越高/ 的/ VoD/ 组播/ 组/ ,/ 其时/ 延/ 抖动/ 应/ 尽量/ 地小/ ./ 在/ 定/ 帧/ 长和定/ 数据包/ 大小/ 的/ Ethernet/ 帧/ 中/ ,/ 优先级/ 比较/ 高/ 的/ VoD/ 组播/ 组/ 的/ 业务/ 流/ 具有/ 比较/ 大/ 的/ 数据包/ ,/ 因此/ 受/ 其它/ VoD/ 数据包/ 的/ 影响/ 比较/ 小/ ,/ 其时/ 延/ 抖动/ 的/ 变化/ 较/ 小/ ./ 所有/ 在线/ 的/ VoD/ 业务/ 数据包/ 采用/ 倒序/ 排列/ ,/ 整个/ VoD/ 业务/ 的/ 时延/ 具有/ 较大/ 的/ 统计/ 稳定性/ ./ 因此/ ,/ 机制/ 实现/ 了/ VoD/ 组播/ 组/ 业务/ 流/ 数据包/ 的/ 时延/ 抖动/ 基于/ 效用/ 的/ 优化/ ./ 3/ 仿真/ 和/ 讨论/ 为了/ 检验/ 本文/ 提出/ 机制/ 的/ 性能/ ,/ 实现/ 了/ 仿真/ 系统/ ,/ 如图/ 4/ ./ 仿真/ 网络/ :/ 具有/ 16/ 个/ ONU/ ,/ 用户/ 到/ ONU/ 的/ 接入/ 链路/ 速率/ 是/ 100Mbps/ ,/ OLT/ 到/ ONU/ 的/ 距离/ 是/ 10km/ ./ 上行/ 最大/ 的/ 周期/ 是/ TMAX/ =/ 2ms/ ./ 分离/ 两个/ 连续/ 的/ 发送窗口/ 的/ 保证/ 时间/ 是/ 5/ μ/ s/ ,/ 下行/ 帧/ 的/ 大小/ 为/ L/ =/ 1518Bytes/ ./ OLT/ 中/ 定义/ 了/ 3/ 个/ 优先级/ 队列/ P0/ 、/ P1/ 和/ P2/ ,/ 缓存/ 大小/ 都/ 是/ 8Mbytes/ ,/ 3/ 个/ 优先级/ 保证/ 的/ 最大/ 带宽/ 分别/ 为/ 100Mbps/ 、/ 600Mbps/ 、/ 300Mbps/ ./ EPON/ 使用/ P1/ 优先级/ ,/ 即/ Wvod/ =/ 600Mbps/ ./ 单位/ 带宽/ 的/ 价格/ R/ =/ 0.06/ yuan/ // Mbps/ ./ VoD/ 的/ 组播/ 组/ 的/ 组建/ 周期/ Tcmgs/ =/ 120s/ ./ 单位/ 时间/ (/ 1s/ )/ 分配/ 给/ VoD/ 的/ 发送/ 时间/ Tvod/ 用户/ 级别/ :/ 定义/ 了/ 3/ 个/ 用户/ 级别/ ,/ 即/ J/ =/ 3/ ,/ 金牌/ 用户/ 100/ 个/ ,/ 银牌/ 用户/ 300/ 个/ ,/ 铜牌/ 用户/ 为/ 600/ 个/ ,/ 分别/ 共享/ 相同/ 的/ 200MbpsVoD/ 最大/ 带宽/ ./ W1max/ =/ W2max/ =/ W3max/ =/ 200Mbps/ ./ VoD/ 业务/ :/ 定义/ 了/ 300/ 个/ VoD/ 业务/ (/ 组播/ )/ ,/ 播放/ 时长/ 都/ 为/ 1/ 小时/ ./ 格式/ 为/ (/ 1/ )/ 高清/ HD/ (/ HighDefinition/ )/ :/ 8Mbps/ ,/ 30F/ // s/ ,/ 1920/ ×/ 1080/ ,/ 宽高比/ 169/ ,/ 价格/ 为/ 5/ 元/ // 次/ ,/ 总数/ 50/ 个/ ./ (/ 2/ )/ 标清/ SD/ (/ StandardDefinition/ )/ :/ 2Mbps/ ,/ 30F/ // s/ ,/ 640/ ×/ 480/ 格式/ ,/ 宽高比/ 43/ ,/ 价格/ 为/ 3/ 元/ // 次/ ,/ 总数/ 50/ 个/ ./ (/ 3/ )/ 普通/ 清晰度/ LD/ (/ LowerDefinition/ )/ :/ 包括/ 6/ 种/ 格式/ :/ ①/ 32kbps/ 、/ 10F/ // s/ 和/ QCIF/ (/ QuarterCom/ -/ monIntermediateFormat/ )/ (/ 176/ ×/ 144/ )/ ,/ 0.5/ 元/ // 次/ ,/ 总数/ 50/ 个/ ;/ ②/ 64kbps/ 、/ 15F/ // s/ 和/ QCIF/ ,/ 0.6/ 元/ // 次/ ,/ 总数/ 50/ 个/ ;/ ③/ 128kbps/ 、/ 15F/ // s/ 和/ CIF/ (/ CommonInter/ -/ mediateFormat/ )/ (/ 352/ ×/ 288/ )/ ,/ 0.7/ 元/ // 次/ ,/ 总数/ 50/ 个/ ;/ ④/ 256kbps/ 、/ 15F/ // s/ 和/ QCIF/ ,/ 0.8/ 元/ // 次/ ,/ 总数/ 50/ 个/ ;/ ⑤/ 512kbps/ 、/ 30F/ // s/ 和/ CIF/ ,/ 0.9/ 元/ // 次/ ,/ 总数/ 50/ 个/ ;/ ⑥/ 1024kbps/ 、/ 30F/ // s/ 和/ CIF/ ,/ 1/ 元/ // 次/ ,/ 总数/ 50/ 个/ ./ 实验/ 结果/ 及/ 讨论/ :/ 产生/ 一个/ 0/ ~/ 999/ 的/ 随机数/ ,/ 对应/ 一个/ 用户/ ,/ 该/ 随机数/ 模/ 3/ 的/ 余数/ 表示/ 用户/ 的/ 级别/ ,/ 0/ 表示/ 金牌/ ,/ 1/ 表示/ 银牌/ ,/ 2/ 表示/ 铜牌/ ./ 产生/ 一个/ 0/ ~/ 300/ 之间/ 的/ 随机数/ ,/ 表示/ 用户/ 选择/ 的/ 组播/ 组/ ,/ 该/ 随机数/ 模/ 50/ 的/ 商/ 表示/ 组播/ 组/ 的/ VoD/ 格式/ ./ 带宽/ 的/ 效益/ :/ 不同/ 接入/ 率下本/ 机制/ 和/ 未/ 改进/ 的/ 机制/ 的/ VoD/ 带宽/ 的/ 总价值/ 比较/ ,/ 如表/ 1/ 所示/ ./ 接入/ 率/ // %/ 10.710/ ./ 7150882.61869/ ./ 35561.3961/ ./ 3955984.08968/ ./ 7510143.76143/ ./ 76601059.971044/ ./ 4515249.56249/ ./ 56651148.301132/ ./ 0920326.83326/ ./ 83701235.111218/ ./ 1025425.22425/ ./ 22751312.791295/ ./ 1030523.01523/ ./ 01801403.491385/ ./ 1035620.29620/ ./ 29851472.451453/ ./ 8536.3645/ ./ 33633.95901537/ ./ 901518.7040709/ ./ 39697.85951617/ ./ 491598.1045809/ ./ 30796.451001690/ ./ 931670.80/ 网络带宽/ 的/ 总价值/ 的/ 计算公式/ 为/ 其中/ ,/ V/ 表示/ 所有/ VoD/ 带宽/ 的/ 总价值/ ,/ X/ 表示/ 总/ 的/ 组播数/ (/ 300/ )/ ./ 未/ 改进/ 机制/ 采用/ 传统/ 的/ 编码/ 压缩率/ 公式/ :/ Page7/ 即/ 所有/ 的/ 组播/ 组/ 使用/ 统一/ 的/ 压缩率/ ,/ 压缩率/ 带宽/ 的/ 调度/ 机制/ 仍/ 采用/ 式/ (/ 5/ )/ ./ 在/ 接入/ 率为/ 36/ %/ 时/ ,/ 带宽/ 被/ 用/ 完/ ,/ 此前/ ,/ 两种/ 机制/ 的/ 带宽/ 总价值/ 一样/ ,/ 因为/ 两个/ 都/ 按照/ 需求/ 来/ 提供/ 带宽/ ./ 之后/ ,/ 本/ 机制/ 的/ VoD/ 总/ 带宽/ 价值/ 始终/ 要/ 大于/ 未/ 改进/ 机制/ ,/ 而且/ 随着/ 接入/ 率/ 增加/ 快速/ 增加/ ./ 随着/ 压缩率/ 的/ 增加/ ,/ 视频/ 质量/ 会/ 降低/ ,/ 视频/ 质量/ 和/ 压缩率/ 之间/ 的/ 关系/ 可以/ 用图/ 5/ 所示/ ./ 在/ [/ c0/ ,/ 1/ ]/ 为/ 无损压缩/ ,/ c0/ 表示/ 无损/ 点/ ./ [/ c1/ ,/ c0/ ]/ 为/ 预测/ 压缩/ ,/ c1/ 为/ 预测/ 点/ ,/ 对应/ 的/ 视频/ 质量/ q0/ 为/ 临界/ 清晰度/ ,/ 也/ 就是/ 用户/ 可以/ 接受/ 的/ 最差/ 的/ 画面质量/ ./ 在/ [/ c2/ ,/ c1/ ]/ 为/ 帧/ 速率/ 压缩/ ,/ c2/ 点为/ 裁员/ 点/ ,/ 对应/ 的/ 视频/ 质量/ q1/ 为/ 临界/ 动画/ 质量/ ,/ 也/ 就是/ 用户/ 可以/ 接收/ 的/ 最差/ 的/ 帧/ 速率/ ,/ 在/ [/ 0/ ,/ c2/ ]/ 为/ 帧/ 体积/ 压缩/ ./ 本文/ 提出/ 的/ 机制/ 使/ 价值/ 最大/ 的/ 组播/ 组/ 业务/ 流/ 具有/ 比较/ 大/ 的/ 压缩率/ (/ 压缩/ 最少/ )/ ,/ 因此/ ,/ 视频/ 的/ 质量/ 比较/ 好/ ./ 视频/ 质量/ 直接/ 影响/ 到/ 收视率/ ,/ 这样/ 网络资源/ 的/ 价值/ 就/ 加速/ 增加/ ./ 在/ 另外/ 的/ 关于/ 收视率/ 实验/ 中/ ,/ 在/ 1/ 个/ 小时/ 内/ (/ VoD/ 业务/ 的/ 平均/ 时长/ 为/ 1/ 个/ 小时/ )/ ,/ 本文/ 的/ 机制/ 比/ 没有/ 改进/ 的/ 机制/ 的/ 价值/ 平均/ 要/ 高/ 大约/ 15/ ~/ 20/ 倍/ ./ 率/ 对比/ ,/ 如图/ 6/ 所示/ ./ 丢/ 包率/ 比较/ :/ 本/ 机制/ 和/ 未/ 压缩/ 情况/ 下/ 的/ 包/ 丢失/ 在/ 接入/ 率为/ 0.42/ 时/ ,/ VoD/ 带宽/ 被/ 用尽/ ,/ 未/ 压缩/ 的/ 情况/ 下包/ 丢失/ 率/ 开始/ 急剧/ 增加/ ,/ 但/ 使用/ 本/ 机制/ ,/ 丢/ 包率/ 一直/ 维持/ 很小/ ./ 抖动/ 情况/ ,/ 如图/ 7/ 所示/ ./ 时延/ 抖动/ :/ 在/ 不同/ 接入/ 率下/ 第一个/ 组播/ 组/ 时延/ 当/ 接入/ 率为/ 0.42/ 时/ 带宽/ 被/ 用/ 完/ ,/ 此时/ 发生/ 大/ 的/ 实验/ 结果显示/ :/ 本/ 机制/ 可以/ 提高/ 带宽/ 的/ 效益/ ,/ 能/ 时延/ 抖动/ ,/ 但/ 很快/ 抖动/ 就/ 趋于平稳/ ./ 够/ 维持/ 小/ 的/ 丢/ 包率/ 和/ 小/ 的/ 时延/ 抖动/ ./ 4/ 结论/ 随着/ 宽带接入/ 技术/ 的/ 发展/ 和/ 普及/ ,/ VoD/ 业务/ 得到/ 了/ 迅猛/ 的/ 发展/ ,/ 多播/ 是/ 最/ 适合/ VoD/ 特点/ 的/ 传输技术/ ./ EPON/ 作为/ 公认/ 的/ 新一代/ 接入/ 网络/ 技术/ 正/ 得到/ 广泛/ 的/ 应用/ ,/ 但/ 在/ EPON/ 中/ 开展/ 多播/ 还/ 存在/ 时延/ 抖动/ 过大/ ,/ 带宽/ 提供/ 能力/ 、/ 包/ 丢失/ 率过/ 高/ 、/ “/ 轻/ 负载/ 惩罚/ ”/ 、/ “/ 低/ 资源/ 效益/ ”/ 等/ 问题/ ./ 本文/ 提出/ 了/ 一个/ 基于/ 效用/ 的/ EPONVoDQoS/ 组播/ 实现/ 机制/ ./ 在/ 业务/ 应用/ 定义/ 模块/ ,/ 通过/ 为/ 组播/ 组/ 实例/ 化/ 一个组/ 播/ MAC/ 和/ LLID/ ,/ 并/ 启动/ 发现/ 过程/ 对/ 申请/ 用户/ 进行/ 组播/ 注册/ ,/ 从而/ 充分利用/ EPON/ 的/ 数据/ 链路层/ 提供/ 的/ 便利/ 机制/ 容易/ 地/ 实现/ 了/ 组播/ ./ 在/ 业务/ 类/ 定义/ 模块/ ,/ 在/ 综合/ 了/ 业务/ 的/ 市场/ 特性/ 、/ 网络/ 特性/ 和/ 用户群/ 特性/ 的/ 基础/ 上/ ,/ 提出/ 了/ 一个/ 基于/ 效用/ 的/ 组播/ 组/ QoS/ 优先级/ (/ 效用/ 优先级/ )/ 算法/ ,/ 通过/ 资源/ 调度/ 模块/ 在/ 拥塞/ 发生/ 时/ 基于/ 效用/ 优先级/ 对/ 编码/ 压缩率/ 和/ 资源分配/ 计划/ 进行/ 调度/ ,/ 不但/ 节省/ 了/ 带宽/ 需求/ ,/ 减少/ 了/ 包/ 丢失/ 率/ ,/ 而且/ 通过/ 将/ 资源/ 汇聚/ 到/ 高/ 价值/ VoD/ 业务/ 和/ 高级/ 别的/ 组播/ 群/ 用户/ 上/ ,/ 提高/ 了/ 带宽/ 的/ 使用/ 价值/ ,/ 较/ 好地解决/ 了/ “/ 资源/ 低效益/ ”/ 问题/ ./ 在/ 执行机构/ 模块/ ,/ 通过/ 对/ EPON/ 无序/ 、/ 变长/ 的/ 下行/ 以太/ 广播/ 帧/ 进行/ 了/ 有序/ 、/ 定帧/ 长和定/ 组播/ 包包/ 长/ 的/ 改进/ ,/ 有效/ 减少/ 了/ VoD/ 业务/ 流/ 数据包/ 的/ 时延/ 抖动/ ./ 仿真/ 实验/ 结果显示/ ,/ 在/ 网络/ 拥塞/ 的/ 时候/ ,/ 本/ 机制/ 可以/ 提高/ 带宽/ 的/ 效益/ ,/ 保持/ 低/ 的/ 丢/ 包率/ 和/ 低/ 的/ 时延/ 抖动/ ./ 

