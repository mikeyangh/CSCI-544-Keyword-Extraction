Page1/ 面向/ TTCN/ -/ 3/ 性能/ 测试/ 的/ 负载/ 生成/ 方法/ 徐珞/ 1/ )/ ,/ 2/ )/ 吴际/ 1/ )/ 刘超/ 1/ )/ 1/ )/ (/ 北京航空航天大学/ 计算机/ 学院/ 北京/ 100191/ )/ 2/ )/ (/ 华北/ 计算技术/ 研究所/ 北京/ 100083/ )/ 摘要/ TTCN/ -/ 3/ (/ TestingandTestControlNotationversion3/ )/ 是/ 一种/ 面向/ 黑盒/ 测试/ 的/ 测试/ 描述/ 与/ 实现/ 语言/ ./ 随着/ TTCN/ -/ 3/ 语言/ 的/ 广泛应用/ ,/ 用户/ 对/ 使用/ TTCN/ -/ 3/ 进行/ 性能/ 测试/ 的/ 需求/ 日益/ 强烈/ ./ 然而/ ,/ TTCN/ -/ 3/ 语言/ 没有/ 提供/ 有效/ 的/ 负载/ 描述/ 和/ 产生/ 机制/ ./ 目前/ ,/ 在/ 使用/ TTCN/ -/ 3/ 产生/ 性能/ 测试/ 的/ 负载/ 时/ ,/ 通常/ 需要/ 依靠/ 大量/ 的/ 人工/ 编码/ ./ 该文/ 提出/ 了/ 一种/ 模型/ 驱动/ 方法/ 以/ 更加/ 有效/ 地/ 支持/ 面向/ TTCN/ -/ 3/ 的/ 负载/ 生成/ ./ 在/ 该/ 方法/ 中/ ,/ 负载/ 指标/ 模型/ 用于/ 刻画/ 负载/ 指标/ 及/ 约束/ 关系/ ;/ 负载/ 剖面/ 模型/ 则/ 能够/ 定义/ 指标/ 的/ 取值/ 及/ 指标值/ 随/ 时间/ 变化/ 的/ 情况/ ./ 基于/ 这些/ 模型/ ,/ 该文/ 提出/ 的/ 算法/ 能够/ 完成/ 从/ 模型/ 到/ TTCN/ -/ 3/ 测试/ 系统/ 的/ 自动/ 转换/ ./ TTCN/ -/ 3/ 测试/ 系统/ 可/ 在/ 负载/ 控制点/ 的/ 支持/ 下/ 得以/ 执行/ ,/ 从而/ 模拟出/ 满足/ 模型/ 描述/ 的/ 负载/ 场景/ ./ 该文/ 通过/ 案例/ 分析/ 验证/ 了/ 上述/ 方法/ 的/ 有效性/ 和/ 所/ 模拟/ 负载/ 场景/ 的/ 准确性/ ./ 关键词/ TTCN/ -/ 3/ ;/ 性能/ 测试/ ;/ 模型/ 驱动/ 测试/ ;/ 负载/ 建模/ ;/ 负载/ 生成/ 1/ 引言/ TTCN/ -/ 3/ (/ TestingandTestControlNotationversion3/ )/ 是/ 由/ 欧洲/ 电信/ 标准化/ 协会/ (/ ETSI/ )/ 于/ 2000/ 年/ 制定/ 和/ 推动/ 的/ 测试/ 规范/ 与/ 测试/ 实现/ 标准/ ,/ 并且/ 已/ 被/ 国际/ 电讯/ 联盟/ (/ ITU/ )/ 等/ 国际/ 标准化/ 机构/ 所/ 采纳/ ./ 经过/ 了/ 十余年/ 的/ 发展/ ,/ TTCN/ -/ 3/ 已经/ 被/ 成功/ 应用/ 在/ 通信/ 和/ 软件/ 领域/ 的/ 一致性/ 和/ 功能测试/ 中/ ./ 各种/ 采用/ TTCN/ -/ 3/ 制订/ 的/ 标准/ 测试/ 集/ 也/ 被/ 陆续/ 发布/ 出来/ ./ 随着/ TTCN/ -/ 3/ 的/ 应用/ 日益/ 广泛/ ,/ 用户/ 对/ 使用/ TTCN/ -/ 3/ 进行/ 非/ 功能测试/ 的/ 需求/ 也/ 越来越/ 强烈/ ,/ 其中/ ,/ 基于/ TTCN/ -/ 3/ 的/ 性能/ 测试/ 已经/ 成为/ 了/ 一个/ 研究/ 热点/ ./ 性能/ 测试通过/ 加载/ 负载/ 于/ 被/ 测系统/ (/ SystemUnderTest/ ,/ SUT/ )/ ,/ 观察/ SUT/ 在/ 给定/ 负载/ 下/ 的/ 性能/ 表现/ ,/ 并/ 对/ 各项/ 性能/ 数据/ 进行/ 分析/ 与/ 评估/ ,/ 从而/ 得出/ 对/ SUT/ 性能/ 的/ 整体/ 评价/ ./ 为了/ 实现/ 性能/ 测试/ ,/ 如何/ 有效/ 地/ 模拟系统/ 的/ 负载/ 成为/ 了/ 一个/ 关键问题/ ./ 相关/ 研究/ 表明/ ,/ 性能/ 测试/ 的/ 好坏/ 很大/ 程度/ 上/ 取决于/ 负载/ 被/ 准确/ 理解/ 并/ 真实/ 模拟/ 的/ 程度/ [/ 1/ ]/ ./ 然而/ ,/ TTCN/ -/ 3/ 语言/ 没有/ 提供/ 有效/ 的/ 负载/ 描述/ 和/ 产生/ 机制/ ./ 目前/ ,/ 在/ 使用/ TTCN/ -/ 3/ 定义/ 性能/ 测试/ 的/ 负载/ 时/ ,/ 通常/ 需要/ 测试人员/ 手工/ 编写/ 大量/ 的/ 代码/ ,/ 同时/ 由于/ TTCN/ -/ 3/ 语言/ 自身/ 的/ 局限性/ ,/ 某些/ 负载/ 的/ 产生/ 还/ 需要/ 依靠/ 对外部/ 函数/ 的/ 使用/ [/ 2/ ]/ ./ 这些/ 既/ 增加/ 了/ 测试/ 开发/ 的/ 工作量/ ,/ 影响/ 了/ 测试/ 的/ 效率/ ,/ 也/ 提高/ 了/ 测试代码/ 的/ 复杂度/ ,/ 增加/ 了/ 引入/ 人为/ 错误/ 的/ 风险/ ,/ 使/ 测试/ 系统/ 的/ 质量/ 难以/ 得到/ 保证/ ./ 另一方面/ ,/ 现有/ 的/ TTCN/ -/ 3/ 性能/ 测试/ 研究/ 多/ 集中/ 在/ 对/ 语言/ 的/ 实时性/ 扩展/ [/ 2/ -/ 4/ ]/ 、/ 测试/ 系统/ 设计/ [/ 5/ -/ 7/ ]/ 和/ 针对/ 特定/ 系统/ 的/ 性能/ 测试/ [/ 8/ -/ 10/ ]/ 方面/ ,/ 对/ 负载/ 描述/ 和/ 产生/ 问题/ 的/ 研究/ 相对/ 较少/ ./ 与/ 传统/ 的/ 性能/ 测试方法/ 相比/ ,/ 基于/ TTCN/ -/ 3/ 的/ 性能/ 测试/ 对/ 负载/ 描述/ 和/ 产生/ 方面/ 也/ 有/ 其/ 特殊/ 的/ 需求/ ,/ 主要/ 体现/ 在/ 以下/ 4/ 个/ 方面/ :/ (/ 1/ )/ 在/ 负载/ 建模/ 方面/ ,/ 现有/ 的/ 负载/ 模型/ 多/ 是/ 针对/ 特定/ 类型/ 的/ SUT/ (/ 如/ Web/ 系统/ 、/ 通信/ 设备/ 等/ )/ ,/ 其中/ 的/ 负载/ 指标/ 及/ 指标/ 关系/ 已经/ 固化/ 在/ 负载/ 模型/ 中/ ,/ 难以/ 进行/ 调整/ 和/ 扩展/ ./ 然而/ ,/ TTCN/ -/ 3/ 是/ 一种/ 通用/ 的/ 测试语言/ ,/ 其/ 应用/ 范围/ 和/ SUT/ 类型/ 是/ 不/ 固定/ 的/ ,/ 因此/ ,/ 面向/ TTCN/ -/ 3/ 的/ 负载/ 模型/ 必须/ 提供/ 面向/ 任务/ 的/ 建模/ 能力/ ,/ 即/ 能够/ 根据/ 测试/ 任务/ 和/ SUT/ 类型/ ,/ 由/ 用户/ 定义/ 相适应/ 的/ 负载/ 模型/ ,/ 刻画/ 负载/ 指标/ 及/ 指标/ 间/ 关系/ ./ (/ 2/ )/ 在/ 负载/ 描述/ 能力/ 方面/ ,/ 特定/ 类型/ 的/ 负载/ 模型/ 通常/ 只/ 关注/ 某/ 方面/ 的/ 负载/ 特征/ ./ 例如/ ,/ 在/ Web/ 系统/ 性能/ 测试/ 中/ ,/ 相关/ 的/ 负载/ 模型/ 就/ 分为/ 两类/ ,/ 分别/ 针对/ 网络/ 特征/ (/ 如/ SpecWeb99/ [/ 11/ ]/ )/ 和/ 用户/ 行为/ 特征/ (/ 如/ CBMG/ [/ 12/ ]/ )/ ./ 然而/ ,/ 由于/ TTCN/ -/ 3/ 使用/ 范围/ 广泛/ ,/ 所/ 面对/ 的/ 负载/ 特征/ 也/ 较为/ 复杂/ ./ 因此/ ,/ 在/ 进行/ 负载/ 建模/ 时应/ 将/ 多个/ 方面/ 的/ 负载/ 特征/ 纳入/ 统一/ 的/ 负载/ 指标体系/ ,/ 加以/ 综合/ 考虑/ ,/ 从/ 整体/ 上/ 反映/ 出/ SUT/ 的/ 负载/ 情况/ ./ 同时/ ,/ 在/ 负载/ 刻画/ 中/ 还/ 必须/ 要/ 考虑/ 这些/ 特征/ 之间/ 的/ 约束/ 关系/ ./ (/ 3/ )/ 在/ 负载/ 产生/ 方面/ ,/ 现有/ 的/ 负载/ 模型/ 通常/ 依赖于/ 专有/ 的/ 测试工具/ 来/ 产生/ 负载/ ,/ 如/ LoadRunner/ 、/ OpenSTA/ 等/ ./ 然而/ ,/ TTCN/ -/ 3/ 性能/ 测试/ 系统/ 必须/ 依赖/ 标准化/ 的/ 测试/ 平台/ ./ TTCN/ -/ 3/ 标准/ [/ 13/ ]/ 规定/ 了/ 测试/ 平台/ 的/ 结构/ 和/ 接口/ ./ 因此/ ,/ 面向/ TTCN/ -/ 3/ 的/ 负载/ 产生/ 程序/ 必须/ 能够/ 在/ 相关/ 标准/ 的/ 约束/ 下/ ,/ 使用/ 标准化/ 的/ 接口/ 来/ 实现/ 对/ 各类/ 负载/ 指标/ 的/ 控制/ ,/ 以/ 模拟出/ 符合/ 负载/ 模型/ 定义/ 的/ 负载/ 场景/ ./ (/ 4/ )/ 负载/ 产生/ 方面/ 的/ 另/ 一/ 重要/ 问题/ 是/ ,/ 由于/ TTCN/ -/ 3/ 性能/ 测试/ 要求/ 负载/ 模型/ 具备/ 面向/ 任务/ 的/ 建模/ 能力/ ,/ 其中/ 的/ 负载/ 指标/ 可/ 由/ 用户/ 进行/ 定义/ 和/ 调整/ ;/ 但/ 另一方面/ ,/ TTCN/ -/ 3/ 负载/ 产生/ 程序/ 又/ 要/ 受到/ TTCN/ -/ 3/ 标准/ 的/ 约束/ ,/ 可/ 使用/ 的/ 负载/ 控制点/ 和/ 控制/ 方式/ 相对/ 固定/ ./ 因此/ ,/ 如何/ 依靠/ 有限/ 的/ 控制点/ 对/ 由/ 用户/ 定义/ 的/ 多样化/ 的/ 负载/ 指标/ 进行/ 控制/ ,/ 使/ 其/ 产生/ 出/ 的/ 负载/ 能/ 符合/ 相关/ 指标/ 的/ 描述/ ,/ 是/ TTCN/ -/ 3/ 负载/ 产生/ 中/ 必须/ 要/ 关注/ 和/ 解决/ 的/ 问题/ ./ 针对/ TTCN/ -/ 3/ 性能/ 测试/ 对/ 负载/ 建模/ 和/ 生成/ 的/ 需求/ ,/ 本文/ 提出/ 了/ 一种/ 模型/ 驱动/ 的/ TTCN/ -/ 3/ 负载/ 产生/ 方法/ ./ 其/ 基本/ 思想/ 是/ 通过/ 模型/ 刻画/ 负载/ ,/ 再/ 依靠/ 自动/ 转换/ 算法/ 将/ 模型/ 转换/ 为/ TTCN/ -/ 3/ 测试/ 系统/ ,/ 从而/ 避免/ 了/ 人工/ 进行/ 编码/ ,/ 同时/ 也/ 提高/ 了/ 对/ 负载/ 的/ 描述/ 和/ 模拟能力/ ./ 该/ 方法/ 以/ 一组/ 负载/ 模型/ 为/ 核心/ ,/ 其中/ ,/ 负载/ 指标/ 模型/ 描述/ 了/ 负载/ 指标/ 的/ 组成/ 和/ 指标/ 之间/ 的/ 约束/ ,/ 负载/ 剖面/ 模型/ 定义/ 了/ 负载/ 指标/ 的/ 取值/ 以及/ 指标值/ 随/ 时间/ 的/ 变化/ ./ 所/ 建立/ 的/ 负载/ 模型/ 能够/ 在/ 控制/ 规划/ 算法/ 的/ 支持/ 下/ 将/ 其中/ 的/ 指标值/ 映射/ 成/ TTCN/ -/ 3/ 负载/ 控制参数/ ,/ 并/ 在/ 本文/ 所/ 提出/ 的/ 负载/ 控制点/ 的/ 支持/ 下/ 得以/ 执行/ ,/ 从而/ 模拟出/ 满足/ 模型/ 描述/ 的/ 负载/ 场景/ ./ 本文/ 针对/ 一个/ Web/ 应用/ 系统/ 开展/ 了/ 实验/ 验证/ ,/ 对/ 该/ 方法/ 的/ 建模/ 能力/ 和/ 负载/ 模拟能力/ 进行/ 了/ 分析/ ,/ 并/ 与/ 相关/ 方法/ 进行/ 了/ 对比/ ,/ 从而/ 验证/ 了/ 该/ 方法/ 的/ 可行性/ 和/ 有效性/ ./ 本文/ 的/ 第/ 2/ 节是/ 模型/ 驱动/ 的/ 负载/ 生成/ 方法/ 的/ 概述/ ,/ 给出/ 该/ 方法/ 的/ 基本/ 过程/ ;/ 第/ 3/ 节/ 介绍/ 主要/ 测试/ 模/ Page3/ 型/ 及其/ 构造方法/ ;/ 第/ 4/ 节/ 论述/ 负载/ 产生/ 方法/ ;/ 第/ 5/ 节/ 给出/ 使用/ 本文/ 方法/ 进行/ 的/ 实验/ ,/ 并/ 对/ 实验/ 结果/ 进行/ 分析/ ;/ 第/ 6/ 节/ 介绍/ 相关/ 研究/ ,/ 并/ 与/ 本文/ 的/ 工作/ 进行/ 比较/ ;/ 最后/ 在/ 第/ 7/ 节对/ 本文/ 工作/ 进行/ 总结/ 和/ 展望/ ./ 2/ 模型/ 驱动/ 的/ TTCN/ -/ 3/ 负载/ 生成/ 方法/ 模型/ 驱动/ 的/ 负载/ 生成/ 过程/ (/ 如图/ 1/ 所示/ )/ 包括/ 负载/ 建模/ 和/ 负载/ 生成/ 两个/ 阶段/ ./ 在/ 建模/ 阶段/ ,/ 本文/ 针对/ 现有/ 负载/ 模型/ 的/ 局限性/ 和/ TTCN/ -/ 3/ 性能/ 测试/ 对/ 负载/ 模型/ 的/ 需求/ ,/ 提出/ 了/ 一种/ 分/ 层次/ 的/ 建模/ 方法/ ,/ 具体/ 包含/ 3/ 个/ 层次/ :/ (/ 1/ )/ 面向/ 测试/ 类型/ 的/ 建模/ ./ 其/ 建模/ 制品/ 是/ 负载/ 指标/ 模型/ ./ 负载/ 指标/ 模型/ 用于/ 定义/ 面向/ 某/ 一类/ SUT/ (/ 如/ Web/ 系统/ )/ 的/ 常用/ 负载/ 指标/ 集合/ 及/ 这些/ 指标/ 之间/ 的/ 约束/ 关系/ ./ 负载/ 指标/ 是/ 对/ 负载/ 某/ 方面/ 特征/ 的/ 定图/ 1/ 模型/ 驱动/ 的/ 负载/ 生成/ 过程/ 通过/ 将/ 负载/ 模型/ 划分/ 为/ 3/ 个/ 层次/ ,/ 满足/ 了/ TTCN/ -/ 3/ 性能/ 测试/ 对/ 负载/ 建模/ 灵活性/ 和/ 可扩展性/ 方面/ 的/ 要求/ ./ 负载/ 指标/ 模型/ 可/ 允许/ 根据/ 不同/ 的/ SUT/ 类型定义/ 不同/ 的/ 负载/ 指标/ 及/ 指标/ 关系/ ;/ 任务/ 指标/ 集/ 和/ 负载/ 剖面/ 模型/ 则/ 允许/ 根据/ 不同/ 的/ 测试/ 任务/ 选择/ 所/ 关注/ 的/ 指标/ 范围/ 并/ 确定/ 指标/ 的/ 取值/ ./ 上述/ 3/ 类/ 模型/ 既/ 相互/ 联系/ ,/ 又/ 位于/ 不同/ 层次/ ./ 按/ 其/ 抽象/ 程度/ 可/ 从/ 高到/ 低/ 依次/ 排列/ ./ 其中/ ,/ 高层次/ 的/ 模型/ 具有/ 一定/ 的/ 通用性/ ,/ 可/ 在/ 不同/ 测试项目/ 中/ 进行/ 重用/ ;/ 低层次/ 的/ 模型/ 包括/ 与/ 测试/ 任务/ 和/ 负载/ 生成/ 相关/ 的/ 细节/ ,/ 可/ 方便/ 地/ 转换/ 为/ TTCN/ -/ 3/ 测试代码/ 或/ 控制参数/ ./ 负载/ 建模/ 过程/ 就是/ 一个/ 对模型/ 不断/ 转化/ 和/ 细化/ 的/ 过程/ ./ 量/ 描述/ ./ 对于/ 同/ 一类/ 系统/ 的/ 测试/ ,/ 应/ 使用/ 相同/ 的/ 负载/ 指标/ 模型/ ./ (/ 2/ )/ 面向/ 测试/ 任务/ 的/ 建模/ ./ 其/ 建模/ 制品/ 是/ 任务/ 指标/ 集/ ./ 在/ 一个/ 具体/ 测试/ 任务/ 中/ ,/ 测试人员/ 通常/ 不会/ 使用/ 所有/ 指标/ 来/ 定义/ 负载/ ,/ 而会/ 根据/ 任务/ 要求/ ,/ 从/ 负载/ 指标/ 模型/ 中/ 选取/ 一组/ 重点/ 指标/ ,/ 检验/ SUT/ 在/ 这些/ 指标/ 下/ 的/ 性能/ 表现/ ./ 这些/ 指标/ 是从/ 负载/ 指标/ 模型/ 中/ 选取/ 的/ 一个/ 子集/ ,/ 称作/ “/ 任务/ 指标/ 集/ ”/ ./ (/ 3/ )/ 面向/ 负载/ 场景/ 的/ 建模/ ./ 其/ 建模/ 制品/ 是/ 负载/ 剖面/ 模型/ ./ 为了/ 对/ SUT/ 的/ 性能/ 进行/ 充分/ 检验/ ,/ 并/ 确定/ 性能/ 随/ 负载/ 变化/ 的/ 情况/ ,/ 测试人员/ 需/ 定义/ 一系列/ 的/ 测试/ 场景/ ,/ 在/ 每个/ 场景/ 中/ 对/ 负载/ 指标/ 的/ 取值/ 会/ 有所不同/ ./ 本文/ 使用/ 负载/ 剖面/ 模型/ 定义/ 测试/ 场景/ ./ 每个/ 负载/ 剖面/ 模型/ 中/ 定义/ 了/ 任务/ 指标/ 集中/ 所有/ 负载/ 指标/ 的/ 取值/ 以及/ 其/ 取值/ 随/ 时间/ 变化/ 的/ 情况/ ./ 在/ 负载/ 生成/ 阶段/ ,/ 其/ 主要/ 目标/ 是/ 根据/ 负载/ 模型/ 生成/ 一个/ TTCN/ -/ 3/ 测试/ 系统/ ,/ 该/ 系统/ 的/ 执行/ 能够/ 产生/ 出/ 模型/ 所/ 定义/ 的/ 负载/ 场景/ ./ 这个/ TTCN/ -/ 3/ 测试/ 系统/ 由/ 两个/ 部分/ 构成/ :/ 一组/ 虚拟/ 用户/ 模拟程序/ 和/ 一组/ 负载/ 控制点/ ./ 其中/ ,/ 虚拟/ 用户/ 模拟程序/ 定义/ 了/ 测试/ 系统/ 与/ SUT/ 的/ 一个/ 交互/ 过程/ ;/ 负载/ 控制点/ 则/ 控制/ 着/ 虚拟/ 用户/ 模拟程序/ 的/ 启动/ 时机/ 、/ 并发/ 数量/ 、/ 执行/ 过程/ 等/ ,/ 通过/ 对/ 这些/ 因素/ 进行/ 不断/ 的/ 调整/ ,/ 能够/ 模拟出/ 负载/ 模型/ 所/ 规定/ 的/ 负载/ 场景/ ./ 与/ 这/ 两个/ 部分/ 对应/ ,/ 负载/ 生成/ 也/ 包括/ 了/ 两/ 方面/ 的/ 内容/ :/ (/ 1/ )/ 虚拟/ 用户/ 模拟程序/ 的/ 生成/ ./ 由于/ TTCN/ -/ 3/ 功能/ 测试用例/ 往往/ 是从/ 用户/ 角度/ 与/ SUT/ 进行/ 交/ Page4/ 互/ ,/ 具有/ 和/ 虚拟/ 用户/ 模拟程序/ 相似/ 的/ 设计/ 原则/ ./ 因此/ 可/ 利用/ 这种/ 相似性/ ,/ 定义/ 一套/ 转换规则/ ,/ 应用/ 这些/ 规则/ 将/ 已有/ 的/ 功能/ 测试用例/ 自动/ 转化/ 为/ 虚拟/ 用户/ 模拟程序/ ./ (/ 2/ )/ 负载/ 控制点/ 的/ 控制关系/ 生成/ ./ 采用/ 的/ 方式/ 是/ 建立/ 负载/ 模型/ 中/ 各项/ 指标/ 与/ TTCN/ -/ 3/ 负载/ 控制点/ 之间/ 的/ 映射/ 关系/ ,/ 定义/ 每/ 项/ 指标/ 由/ 哪些/ 控制点/ 进行/ 控制/ ,/ 进而/ 将/ 负载/ 指标/ 的/ 取值/ 分解/ 为/ 相应/ 控制点/ 的/ 控制参数/ ./ 在/ 上述/ 两个/ 方面/ 的/ 生成/ 中/ ,/ 前者/ 主要/ 采用/ 了/ 我们/ 在/ 文献/ [/ 14/ ]/ 提出/ 的/ 方法/ ,/ 这里/ 不/ 作/ 详述/ ./ 本文/ 则/ 重点/ 对/ 后者/ 进行/ 讨论/ ,/ 包括/ 定义/ TTCN/ -/ 3/ 负载/ 控制点/ 和/ 提出/ 一套/ 用于/ 自动/ 建立/ 指标/ 与/ 控制点/ 映射/ 关系/ 的/ 控制/ 规划/ 算法/ ./ 3/ 负载/ 模型/ 及/ 建模/ 方法/ 下面/ ,/ 本文/ 将/ 对/ 负载/ 建模/ 阶段/ 的/ 主要/ 模型/ 以及/ 各/ 模型/ 的/ 构造方法/ 进行/ 详细/ 论述/ ./ 3.1/ 负载/ 指标/ 模型/ 负载/ 指标/ 模型/ 给出/ 了/ 面向/ 特定/ 类型/ SUT/ 的/ 常用/ 负载/ 指标/ ./ 这些/ 指标/ 能够/ 从/ 用户/ 和/ 环境/ 的/ 角度/ 反映/ 出/ SUT/ 在/ 实际/ 使用/ 中/ 的/ 负载/ 特征/ 以及/ 它们/ 之间/ 的/ 关系/ ./ 本文/ 定义/ 的/ 负载/ 指标/ 模型/ 如下/ ./ 定义/ 1/ ./ 负载/ 指标/ 模型/ ./ LQM/ Θ/ =/ 〈/ Q/ ,/ D/ ,/ P/ ,/ CG/ 〉/ ,/ 其中/ ,/ Q/ =/ {/ q1/ ,/ q2/ ,/ …/ ,/ qn/ }/ ,/ qi/ 为/ 针对/ Θ/ 类/ SUT/ 的/ 一个/ 负载/ 指标/ ,/ 每个/ 负载/ 指标/ 可/ 赋予/ 一个/ 具体/ 值/ (/ 记作/ value/ (/ qi/ )/ )/ ,/ 代表/ 了/ 在/ 负载/ 产生/ 时/ 对/ 这些/ 指标/ 的/ 期望值/ ;/ D/ =/ {/ di/ |/ 1/ / i/ / |/ Q/ |/ }/ ,/ di/ 为/ 指标/ qi/ 的/ 值域/ (/ 记作/ domain/ (/ qi/ )/ )/ ;/ P/ =/ 〈/ C/ ,/ R/ 〉/ ,/ 代表/ 了/ 指标/ 分类/ ,/ 其中/ C/ 为/ 类别/ 集合/ ,/ R/ =/ {/ 〈/ qi/ ,/ cj/ 〉/ |/ qi/ ∈/ Q/ ,/ cj/ ∈/ C/ }/ ,/ 〈/ qi/ ,/ cj/ 〉/ 是/ 一个/ 二元关系/ ,/ 表示/ 指标/ qi/ 隶属于/ 类别/ cj/ ,/ 指标/ qi/ 的/ 类别/ 记作/ category/ (/ qi/ )/ ;/ CG/ =/ {/ cg1/ ,/ cg2/ ,/ …/ ,/ cgm/ }/ ,/ cgi/ 为/ 两个/ 或/ 多个/ 负载/ 指标/ 之间/ 的/ 一个/ 约束/ 组/ ,/ 每个/ 约束/ 组/ 包含/ 了/ 有关/ 指标/ 之间/ 的/ 一系列/ 约束/ ./ 根据/ 约束/ 的/ 类型/ 不同/ ,/ 约束/ 组可/ 分为/ 两类/ :/ 值/ 约束/ 组和/ 区间/ 约束/ 组/ ./ LQM/ 中/ 的/ 负载/ 指标/ 并/ 不是/ 孤立/ 存在/ 的/ ,/ 相互之间/ 存在/ 着/ 联系/ 和/ 制约/ 关系/ ./ 定义/ 1/ 将/ 这种/ 关系/ 表示/ 为/ 约束/ 组/ CG/ ./ 由于/ 这些/ 约束/ 组对/ 负载/ 建模/ 和/ 负载/ 生成/ 具有/ 重要/ 影响/ ,/ 因此/ 我们/ 还/ 必须/ 对/ 它们/ 进行/ 更加/ 具体/ 的/ 刻画/ ./ 下面/ 分别/ 给出/ 了/ 两类/ 约束/ 组/ 的/ 形式化/ 定义/ ./ 定义/ 2/ ./ 值/ 约束/ 组/ ./ vcg/ =/ 〈/ Q/ ,/ F/ 〉/ ,/ 其中/ Q/ =/ {/ qi/ |/ qi/ ∈/ LQM/ Θ/ 集合/ ,/ Q/ / LQM/ Θ/ (/ / qy/ )/ (/ qy/ ∈/ Q/ )/ →/ (/ / fi/ )/ (/ / qx1/ )/ …/ (/ / qxm/ )/ (/ fi/ ∈/ F/ ∧/ qx1/ ,/ …/ ,/ qxm/ ∈/ Q/ ∧/ fi/ (/ qx1/ ,/ …/ ,/ qxm/ )/ →/ qy/ )/ ./ 其中/ :/ fi/ 是/ 一个多元/ 函数/ ,/ 定义/ 了/ 负载/ 指标/ qy/ (/ qy/ ∈/ Q/ )/ 的/ 取值/ (/ value/ (/ qy/ )/ )/ 与/ 一个/ 或/ 多个/ 其它/ 指标/ 取值/ (/ {/ value/ (/ qxj/ )/ |/ qxj/ ∈/ Q/ -/ {/ qy/ }/ }/ )/ 之间/ 的/ 函数/ 关系/ ,/ 这/ 意味着/ 当/ 所有/ qxj/ 的/ 取值/ 确定/ 后/ qy/ 的/ 取值/ 可/ 由/ 函数/ fi/ 确定/ ./ 此外/ ,/ 还/ 要求/ 对/ Q/ 中/ 的/ 每/ 一个/ 指标/ 都/ 存在/ 至少/ 一个/ 函数/ 与/ 之/ 对应/ ./ 定义/ 3/ ./ 区间/ 约束/ 组/ ./ dcg/ =/ 〈/ Q/ ,/ DC/ 〉/ ,/ 其中/ Q/ =/ {/ qi/ |/ qi/ ∈/ LQM/ Θ/ 标/ 集合/ ,/ Q/ / LQM/ Θ/ 定义/ 了/ 负载/ 指标/ qy/ (/ qy/ ∈/ Q/ )/ 的/ 取值/ 区间/ (/ domain/ (/ qy/ )/ 与/ 一个/ 或/ 多个/ 其它/ 指标/ 取值/ (/ {/ value/ (/ qxj/ )/ |/ qxj/ ∈/ Q/ -/ {/ qy/ }/ }/ )/ 之间/ 的/ 约束/ 关系/ ,/ 这/ 意味着/ 当/ 所有/ qxj/ 的/ 取值/ 确定/ 后/ qy/ 将/ 得到/ 一个/ 新/ 的/ 取值/ 区间/ dy/ ,/ 并且/ 有/ dy/ / LQM/ Θ/ 示/ 指标/ q/ 在/ 区间/ 约束/ 下/ 的/ 取值/ 区间/ ,/ 当/ 不/ 存在/ 对/ q/ 的/ 区间/ 约束/ 时/ ,/ domain/ (/ q/ )/ =/ domain/ (/ q/ )/ ./ LQM/ 模型/ 中/ 不仅/ 包括/ 了/ 指标/ 集合/ 和/ 指标/ 约束/ ,/ 还/ 给出/ 了/ 指标/ 的/ 分类/ ./ 对/ 指标/ 进行/ 分类/ 不仅/ 有助于/ 对/ 指标/ 进行/ 管理/ ,/ 同时/ 对于/ 确定/ 指标/ 的/ 控制/ 方式/ 也/ 具有/ 重要/ 的/ 作用/ ,/ 在/ 负载/ 产生/ 时/ 对于/ 同一/ 类别/ 的/ 指标/ 通常/ 可/ 采用/ 相同/ 的/ 负载/ 控制/ 方式/ ./ 目前/ ,/ 本文/ 定义/ 了/ 6/ 种/ 指标/ 类别/ ,/ 如表/ 1/ 所示/ ./ 为了/ 能够/ 确定/ 负载/ 指标/ 的/ 控制/ 方式/ 及其/ 与/ 控制点/ 的/ 映射/ 关系/ ,/ LQM/ 模型/ 对/ 各/ 指标/ 与/ 类别/ 的/ 隶属/ 关系/ 做出/ 如下/ 约束/ :/ (/ / q/ )/ (/ q/ ∈/ LQM/ Θ/ ./ Q/ )/ →/ 烄/ (/ / 〈/ q/ ,/ c/ 〉/ )/ (/ 〈/ q/ ,/ c/ 〉/ ∈/ LQM/ Θ/ 烅/ (/ 〈/ q/ ,/ c1/ 〉/ ∈/ LQM/ Θ/ (/ c1/ =/ c2/ )/ 烆/ 负载/ 指标/ 模型/ 是/ 与/ SUT/ 的/ 类型/ Θ/ 相关/ 的/ ./ 对于/ 不同/ 的/ SUT/ 类型/ ,/ 测试/ 使用/ 的/ 负载/ 指标/ 也/ 会/ 不同/ ./ 例如/ ,/ 对于/ Web/ 系统/ 测试/ 而言/ ,/ 并发/ 用户数/ 和/ 请求/ 间隔时间/ 是/ 常用/ 的/ 负载/ 指标/ ;/ 而/ 对于/ 数据/ 存储系统/ 的/ 测试/ ,/ 数据/ 吞吐量/ 则/ 成为/ 了/ 一个/ 重要/ 的/ 指标/ ./ 在/ 实验/ 部分/ ,/ 本文/ 给出/ 了/ LQM/ 模型/ 针对/ Web/ 应用/ 测试/ 时/ 的/ 实例/ 及其/ 分析/ ./ Page5/ 类别/ c1/ 访问/ 分布/ c2/ 访问/ 规模/ 定义/ 对/ SUT/ 访问/ 的/ 总体/ 数量/ ,/ c3/ 并发/ 规模/ 定义/ 在/ 负载/ 产生/ 时/ 必须/ 达到/ 的/ c4/ 访问/ 时间/ c5/ 数据/ 规模/ 定义/ 了/ SUT/ 的/ 收发/ 数据/ 规模/ ,/ c6/ 其它/ 3.2/ 任务/ 指标/ 集/ 选取/ 在/ 一个/ 具体/ 的/ 测试项目/ 中/ ,/ 测试人员/ 通常/ 不会/ 使用/ LQM/ 中/ 的/ 全部/ 指标/ 来/ 定义/ 负载/ ,/ 而会/ 根据/ 测试/ 任务/ 的/ 要求/ ,/ 从/ LQM/ 中/ 选取/ 部分/ 指标/ ,/ 重点/ 检验/ SUT/ 在/ 这些/ 指标/ 所/ 描述/ 的/ 负载/ 下/ 的/ 性能/ 表现/ ./ 例如/ ,/ 在/ 进行/ Web/ 系统/ 压力/ 测试/ 时/ ,/ 并发/ 用户数/ 和/ 会/ 话/ 发生/ 间隔/ 就是/ 主要/ 关注/ 的/ 指标/ ./ 本文/ 将/ 根据/ 测试/ 任务/ 从/ LQM/ 中/ 选取/ 的/ 指标/ 集合/ 定义/ 为/ 任务/ 指标/ 集/ (/ TaskorientedQuantitySet/ ,/ TQS/ )/ :/ 每个/ TQS/ 都/ 是/ 和/ 测试/ 任务/ Φ/ 相关/ 的/ ,/ 其中/ 的/ 指标/ 取值/ (/ value/ (/ qi/ )/ )/ 可以/ 由/ 测试人员/ 根据/ 任务/ Φ/ 的/ 需要/ 进行/ 设置/ ./ 但/ 由于/ LQM/ 中/ 存在/ 着/ 值/ 约束/ ,/ 导致/ 负载/ 指标/ 之间/ 的/ 取值/ 不是/ 完全/ 独立/ ./ 在/ 某些/ 情况/ 下/ ,/ 对非/ 独立/ 的/ 指标/ 进行/ 设置/ 会/ 造成/ 冲突/ ./ 例如/ ,/ 当/ 已经/ 设置/ 了/ 会/ 话/ 内/ 请求/ 间隔/ 和/ 会/ 话/ 长度/ 之后/ ,/ 再/ 对/ 会/ 话/ 持续时间/ 进行/ 设置/ 就/ 会/ 破坏/ 如下/ 约束/ ,/ 从而/ 导致/ 取值/ 冲突/ ./ 会话/ 持续时间/ =/ 会话/ 内/ 请求/ 间隔/ ×/ (/ 会话/ 长度/ -/ 1/ )/ 这种/ 冲突/ 的/ 出现/ 会/ 对/ 测试/ 执行/ 阶段/ 的/ 负载/ 控制/ 造成/ 影响/ ,/ 导致/ 控制/ 不/ 收敛/ ,/ 从而/ 无法/ 产生/ 出/ 测试人员/ 所/ 期望/ 的/ 负载/ 场景/ ./ 为了/ 避免/ 取值/ 冲突/ 的/ 出现/ ,/ 本文/ 提出/ 了/ 一个/ 指标/ 选取/ 算法/ ,/ 来/ 辅助/ 测试人员/ 从/ LQM/ 中/ 选择/ 相互/ 独立/ 的/ 负载/ 指标/ 以/ 生成/ TQS/ ./ 算法/ 1/ ./ TQS/ 选取/ 算法/ ./ 输入/ :/ LQM/ Θ/ // // 负载/ 指标/ 模型/ 输出/ :/ TQS/ Φ/ // // 任务/ 指标/ 集/ RQS/ Φ/ // // 关联/ 指标/ 集/ 初始/ 数据/ :/ CS/ =/ LQM/ Θ/ beginwhileCS/ ≠/ / beginGetUserInput/ (/ )/ →/ inifin/ ∈/ CSthen/ // // 用户/ 从/ CS/ 中/ 选择/ 了/ 一个/ 指标/ CS/ -/ {/ in/ }/ →/ CSTQS/ Φ/ ∪/ {/ in/ }/ →/ TQS/ Φ/ // // 针对/ 新/ 增加/ 的/ 指标/ 查找/ 可能/ 的/ 相关/ 指标/ foreachvcg/ ∈/ LQM/ Θ/ beginif/ (/ / q/ )/ (/ q/ ∈/ vcg/ / Q/ ∧/ q/ / TQS/ Φ/ ∪/ RQS/ Φ/ ∧/ thenSelectAsRQS/ (/ q/ )/ endelseifin/ =/ finishthen/ // // 用户/ 完成/ 了/ 选取/ returnTQS/ Φ/ withRQS/ Φ/ end/ // // CS/ 中/ 已经/ 无/ 指标/ 可选/ returnTQS/ Φ/ withRQS/ Φ/ endSelectAsRQS/ (/ in/ )/ // // 选择/ 相关/ 指标/ beginCS/ -/ {/ in/ }/ →/ CSRQS/ Φ/ ∪/ {/ in/ }/ →/ RQS/ Φ/ foreachvcg/ ∈/ LQM/ Θ/ beginif/ (/ / q/ )/ (/ q/ ∈/ vcg/ / Q/ ∧/ q/ / TQS/ Φ/ ∪/ RQS/ Φ/ ∧/ thenSelectAsRQS/ (/ q/ )/ endendTQS/ 选取/ 算法/ 首先/ 建立/ 了/ 3/ 个/ 集合/ ,/ 分别/ 是/ 候选/ 指标/ 集/ CS/ 、/ 任务/ 指标/ 集/ TQS/ 和/ 相关/ 指标/ 集/ RQS/ ./ 其中/ ,/ CS/ 初始/ 时/ 包含/ 了/ LQM/ 中/ 的/ 所有/ 待选/ 指标/ ,/ 每次/ 测试人员/ 选中/ 的/ 指标/ 都/ 会/ 从/ CS/ 中/ 去掉/ ;/ TQS/ 初始/ 时为/ 空集/ ,/ 随后/ 每次/ 选中/ 的/ 指标/ 都/ 会/ 加入/ 到/ 该/ 集合/ ;/ RQS/ 包括/ 了/ 可能/ 与/ TQS/ 中/ 的/ 指标/ 产生/ 取值/ 冲突/ 的/ 负载/ 指标/ ./ 这些/ 指标/ 的/ 选取/ 由本/ 算法/ 自动/ 完成/ ,/ 并/ 将/ 随/ TQS/ 一起/ 返回/ ./ 本/ 算法/ 选取/ RQS/ 指标/ 的/ 规则/ 是/ ,/ 若/ 一个/ 指标/ 与/ 本次/ 显式/ 选中/ 的/ 指标/ 之间/ 存在/ 值/ 约束/ ,/ 并且/ 除该/ 指标/ 外/ 约束/ 组中/ 的/ 其它/ 指标/ 均/ 已/ 属于/ TQS/ 或/ RQS/ ,/ 则/ 将/ 该/ 指标/ 加入/ RQS/ ./ 具体/ 的/ 选取/ 过程/ 由/ 函数/ SelectAsRQS/ 完成/ ./ TQS/ 和/ RQS/ 中/ 的/ 指标/ 具有/ 如下/ 性质/ :/ (/ 1/ )/ TQS/ 中/ 所有/ 指标/ 的/ 取值/ 相互/ 独立/ ,/ 因而/ 可/ 在/ 不/ 违背/ 其/ 值域/ (/ 或/ 区间/ 约束/ )/ 的/ 前提/ 下/ 任意/ 设置/ ;/ Page6/ (/ 2/ )/ RQS/ 中/ 的/ 指标/ 与/ TQS/ 中/ 的/ 部分/ 指标/ 之间/ 存在/ 着/ 取值/ 冲突/ ,/ 因而/ 不能/ 对/ 其中/ 的/ 指标/ 进行/ 设置/ ;/ (/ 3/ )/ 当/ TQS/ 中/ 的/ 全部/ 指标/ 取值/ 确定/ 后/ ,/ RQS/ 中/ 的/ 全部/ 指标/ 取值/ 可/ 根据/ 相应/ 的/ 值/ 约束/ 函数/ 计算/ 得出/ ./ 3.3/ 负载/ 剖面/ 模型/ 在/ 确定/ 了/ TQS/ 之后/ ,/ 就/ 可以/ 设置/ 其中/ 指标/ 的/ 取值/ ,/ 以/ 描述/ 负载/ 场景/ ./ 在/ 一个/ 测试/ 任务/ 中/ ,/ 通常/ 需要/ 不同/ 的/ 负载/ 场景/ ,/ 其中/ 的/ 指标/ 取值/ 应/ 有所/ 变化/ ,/ 从而/ 检验/ SUT/ 在/ 多种/ 负载/ 水平/ 下/ 的/ 性能/ 表现/ ./ 例如/ ,/ 为了/ 测试/ Web/ 系统对/ 并发/ 用户/ 的/ 承受能力/ ,/ 测试人员/ 应对/ 并发/ 用户数/ 指标/ 设置/ 多组/ 期望值/ ,/ 以/ 模拟/ 并发/ 用户数量/ 从/ 低/ 到/ 高/ 的/ 不同/ 水平/ ,/ 从而/ 检查/ SUT/ 的/ 性能/ 变化/ 并/ 发现/ 其/ 承受/ 极限/ ./ 为此/ ,/ 本文/ 定义/ 了/ 负载/ 剖面/ 模型/ ,/ 以/ 描述/ 任务/ 指标/ 集中/ 所有/ 负载/ 指标/ 的/ 取值/ 以及/ 其/ 取值/ 随/ 时间/ 变化/ 的/ 情况/ ./ 该/ 模型/ 的/ 形式化/ 定义/ 如下/ ./ 定义/ 4/ ./ 负载/ 剖面/ 模型/ LPM/ =/ 〈/ I/ ,/ T/ 〉/ ,/ 其中/ ,/ I/ =/ {/ 〈/ qi/ ,/ vi/ 〉/ |/ qi/ ∈/ TQS/ Φ/ ,/ vi/ ∈/ domain/ (/ qi/ )/ ,/ 1/ / i/ / |/ TQS/ Φ/ |/ }/ ,/ 并且/ (/ / q/ )/ (/ q/ ∈/ TQS/ Φ/ )/ →/ (/ / 〈/ q/ ,/ v/ 〉/ )/ (/ 〈/ q/ ,/ v/ 〉/ ∈/ LPM/ / I/ )/ ,/ 〈/ qi/ ,/ vi/ 〉/ 是/ 一个/ 二元关系/ ,/ 表示/ 将/ 指标/ qi/ 的/ 值/ 设置/ 为/ vi/ ,/ vi/ 既/ 可以/ 是/ 确定/ 值/ 也/ 可以/ 是/ 随机变量/ ,/ 对/ 后者/ 要/ 给出/ 其/ 分布/ 及/ 参数/ ,/ 集合/ I/ 代表/ 了/ LPM/ 模型/ 中/ 的/ 全部/ 指标/ 初始值/ ,/ 必须/ 保证/ 对/ TQS/ Φ/ 中/ 每/ 一个/ 指标/ 在/ I/ 中均/ 有/ 对应/ 的/ 〈/ q/ ,/ v/ 〉/ ;/ T/ =/ {/ 〈/ qx/ ,/ vx/ 〉/ Δ/ t/ (/ j/ )/ |/ qx/ ∈/ TQS/ Φ/ ,/ vx/ ∈/ domain/ (/ qx/ )/ ,/ 1/ / j/ / m/ }/ ,/ T/ 是/ 一个/ 时间/ 序列/ ,/ Δ/ t/ (/ j/ )/ 代表/ 一个/ 时间/ 片段/ ,/ 〈/ qx/ ,/ vx/ 〉/ Δ/ t/ (/ j/ )/ 表示/ 从/ 第/ j/ -/ 1/ 个/ 时间/ 点/ 开始/ 经过/ 了/ Δ/ t/ (/ j/ )/ 时间/ 之后/ ,/ 指标/ qx/ 的/ 取值/ 将/ 被/ 修改/ 为/ vx/ ./ m/ 是/ 指标/ 变化/ 时间/ 点/ 的/ 个数/ ./ 负载/ 剖面/ 模型/ LPM/ 从/ 两个/ 方面/ 定义/ 了/ 对/ 负载/ 场景/ 的/ 期望/ ,/ 进而/ 对/ 测试/ 系统/ 的/ 负载/ 生成/ 进行/ 指导/ ./ 一方面/ LPM/ / I/ 定义/ 各项/ 负载/ 指标/ 的/ 初始/ 期望值/ ,/ 这/ 代表/ 了/ 在/ 测试/ 初始/ 时/ 测试/ 系统/ 所/ 要/ 产生/ 出/ 的/ 负载/ 水平/ ;/ 另一方面/ LPM/ / T/ 定义/ 在/ 这/ 之后/ 指标/ 随/ 时间/ 变化/ 的/ 情况/ ,/ 测试/ 系统/ 应/ 据此/ 对/ 负载/ 水平/ 进行/ 调整/ ./ 由于/ 有/ LPM/ / T/ 的/ 存在/ ,/ LPM/ 可以/ 更好/ 地/ 反映/ 真实/ 环境/ 下/ 的/ 负载/ 特征/ ,/ 同时/ 也/ 能够/ 检验/ SUT/ 在/ 负载/ 动态变化/ 过程/ 中/ 的/ 表现/ ,/ 即/ SUT/ 对/ 负载/ 变化/ 的/ 适应能力/ ./ 在/ 相邻/ 两次/ 变化/ 之间/ (/ 即/ Δ/ t/ 内/ )/ ,/ LPM/ 中/ 的/ 指标值/ 保持/ 不变/ ,/ 测试/ 系统/ 也/ 将/ 稳定/ 在/ 相应/ 的/ 负载/ 水平/ 上/ ./ 在/ LPM/ 建立/ 以后/ ,/ 不仅/ TQS/ 中/ 的/ 所有/ 指标/ 取值/ 已经/ 确定/ ,/ 而且/ 由于/ 值/ 约束/ 关系/ 的/ 存在/ ,/ 相关/ RQS/ 中/ 的/ 指标/ 取值/ 也/ 可以/ 由此/ 确定/ ./ 基于/ 这/ 两组/ 指标/ 数据/ ,/ 本文/ 将/ 通过/ 负载/ 控制点/ 和/ 指标/ 控制/ 映射/ ,/ 实现/ LPM/ 所/ 描述/ 的/ 负载/ 场景/ 的/ 产生/ ./ 4/ 负载/ 产生/ 方法/ LPM/ 模型/ 定义/ 了/ 性能/ 测试/ 中/ 的/ 负载/ 场景/ ./ 在/ 测试/ 执行/ 阶段/ ,/ 测试/ 系统/ 需要/ 依据/ 这些/ 模型/ 产生/ 出/ 期望/ 的/ 负载/ ./ TTCN/ -/ 3/ 测试/ 系统/ 采用/ 基于/ 虚拟/ 用户/ 的/ 负载/ 产生/ 方式/ ,/ 其/ 具体/ 测试/ 系统/ 构成/ 如图/ 2/ 所示/ ./ 该/ 系统/ 包括/ 了/ 两类/ TTCN/ -/ 3/ 测试/ 构件/ :/ MTC/ (/ MainTestComponent/ )/ 和/ PTC/ (/ ParallelTestComponent/ )/ ./ 根据/ TTCN/ -/ 3/ 标准/ [/ 13/ ]/ 的/ 规定/ ,/ 在/ 一个/ TTCN/ -/ 3/ 测试/ 系统/ 中有且/ 仅/ 有/ 一个/ MTC/ ,/ 该/ 构件/ 在/ 测试用例/ 启动/ 时/ 自动/ 创建/ ./ PTC/ 用来/ 描述/ 并发/ 测试/ 行为/ ,/ 可/ 根据/ 测试/ 的/ 需要/ 动态创建/ ./ 同一/ 时刻/ 存在/ 于/ 系统/ 中/ 的/ 多个/ 测试/ 构件/ (/ 包括/ MTC/ 和/ PTC/ )/ 将/ 并行执行/ ./ 在/ 性能/ 测试/ 中/ ,/ 每个/ PTC/ 代表/ 一个/ 虚拟/ 用户/ ,/ 用于/ 模拟/ 对/ SUT/ 的/ 一个/ 典型/ 交互/ 过程/ ./ MTC/ 则/ 作为/ 中心/ 调度/ 程序/ ,/ 用于/ 控制/ 各个/ PTC/ 的/ 启动/ 、/ 并发/ 和/ 执行/ 过程/ ,/ 从而/ 产生/ 出/ 满足/ 负载/ 模型/ 定义/ 的/ 负载/ 场景/ ./ 这些/ 控制/ 的/ 具体/ 实现/ 依赖/ 一组/ 负载/ 控制点/ (/ ControlPoint/ ,/ CP/ )/ ,/ 每个/ 控制点/ 能够/ 以/ 某个/ 负载/ 指标值/ 作为/ 参数/ ,/ 对/ MTC/ 或/ PTC/ 的/ 某/ 方面/ 行为/ 进行/ 精确/ 调控/ ,/ 从而/ 使/ 其/ 产生/ 出/ 的/ 负载/ 能够/ 达到/ 相应/ 指标/ 的/ 要求/ ./ 如上/ 文/ 所述/ ,/ 负载/ 生成/ 的/ 作用/ 是/ 产生/ PTC/ 上/ 的/ 虚拟/ 用户/ 模拟程序/ 以及/ 指标/ 与/ 控制点/ 的/ 控制关系/ ./ 对于/ 前者/ ,/ 我们/ 在/ 文献/ [/ 14/ ]/ 中/ 已有/ 论述/ ./ 本文/ 则/ 重点/ 讨论/ 如何/ 依据/ 负载/ 模型/ 动态/ 选择/ 各/ 指标/ 的/ 控制/ 方式/ ,/ 规划/ 负载/ 指标/ 与/ 控制点/ 的/ 映射/ 关系/ ./ 下面/ ,/ 首先/ 给出/ 负载/ 控制点/ 的/ 概念/ ,/ 然后/ 给出/ 控制点/ 规划/ 算法/ ./ 4.1/ 负载/ 控制点/ 本文/ 将/ 控制点/ 定义/ 为/ :/ TTCN/ -/ 3/ 测试/ 系统/ 中/ ,/ 能/ Page7/ 够/ 依据/ LPM/ 中负载/ 指标/ 的/ 取值/ ,/ 对/ MTC/ 或/ PTC/ 上/ 的/ 测试/ 行为/ 进行/ 干预/ ,/ 从而/ 使/ 测试/ 系统/ 所/ 呈现/ 的/ 外部/ 行为/ 满足/ LPM/ 负载/ 指标/ 要求/ 的/ 程序/ ./ 从/ 定义/ 可以/ 看出/ ,/ 控制点/ 是/ 与/ LPM/ 模型/ 中/ 的/ 指标/ 关联/ 在/ 一起/ ./ 但是/ ,/ 由于/ 在/ 本文/ 提出/ 的/ 负载/ 模型/ 中/ ,/ 指标/ 不是/ 固定/ 的/ ,/ 而是/ 可/ 根据/ SUT/ 类型/ 进行/ 调整/ 的/ ,/ 因而/ 不能/ 根据/ 具体/ 的/ 指标/ 来/ 设计/ 控制点/ ./ 为此/ ,/ 本文/ 采用/ 了/ 根据/ 指标/ 类型/ 设计/ 控制点/ 的/ 方法/ ./ 由于/ 同类/ 指标/ 具有/ 相同/ 的/ 特性/ ,/ 因此/ 可/ 采用/ 相同/ 的/ 控制/ 方法/ ./ 此外/ ,/ 由于/ TTCN/ -/ 3/ 是/ 一种/ 标准化/ 的/ 系统/ ,/ 因此/ ,/ 负载/ 控制点/ 的/ 定义/ 还/ 需要/ 满足/ TTCN/ -/ 3/ 标准/ 对/ 测试/ 系统结构/ 和/ 接口/ 的/ 约束/ ./ 基于/ 这些/ 约束/ ,/ 本文/ 为/ 不同/ 类别/ 的/ 指标/ 设计/ 了/ 6/ 种/ 负载/ 控制点/ :/ ①/ 用户/ 选择/ 控制点/ ./ 这是/ 针对/ 访问/ 分布/ 类/ 指标/ (/ c1/ )/ 的/ 控制点/ ,/ 位于/ MTC/ 中/ ,/ 以/ 外部/ 函数/ [/ 13/ ]/ 的/ 形式/ 实现/ ./ 该/ 控制点/ 的/ 作用/ 是/ ,/ 以/ 负载/ 指标/ 给出/ 的/ 分布/ 作为/ 指导/ ,/ 选择/ 要/ 在/ PTC/ 上/ 创建/ 的/ 用户/ 类型/ ,/ 并/ 将/ 选出/ 的/ 用户/ 类型/ 返回/ 给/ MTC/ 调度/ 程序/ ./ ②/ PTC/ 创建/ 控制点/ ./ 该/ 控制点/ 用于/ 控制/ 创建/ PTC/ 的/ 时机/ ,/ 位于/ MTC/ 中/ ,/ 以/ TTCN/ -/ 3/ 函数/ 的/ 形式/ 实现/ ./ 该/ 控制点/ 可/ 依据/ 两类/ 指标/ 控制/ PTC/ 的/ 创建/ ,/ 一种/ 是/ 依据/ 并发/ 规模/ 类/ 指标/ (/ c3/ )/ 进行/ 控制/ ,/ 另/ 一种/ 是/ 依据/ 时间/ 间隔/ 类/ 指标/ (/ c4/ )/ 进行/ 控制/ ./ ③/ 全局/ 发送/ 控制点/ ./ 这是/ 针对/ 访问/ 时间/ 类/ 指标/ (/ c4/ )/ 的/ 控制点/ ,/ 位于/ TRI/ 接口/ 的/ send/ 函数/ [/ 13/ ]/ 内/ ./ 该/ 控制点/ 的/ 作用/ 是/ ,/ 根据/ 负载/ 指标/ 给出/ 的/ 时间/ 值/ ,/ 控制/ 测试/ 系统/ 向/ SUT/ 发送/ 消息/ 的/ 间隔/ ./ 该/ 控制点/ 不/ 区分/ 消息/ 来自/ 哪个/ PTC/ ,/ 只/ 从/ 全局/ 的/ 角度/ 控制/ 消息/ 的/ 发送/ 时机/ ./ ④/ PTC/ 延迟/ 控制点/ ./ 这是/ 针对/ 访问/ 时间/ 类/ 指标/ (/ c4/ )/ 的/ 控制点/ ,/ 位于/ PTC/ 中/ ,/ 利用/ TTCN/ -/ 3/ 的/ 计时器/ 机制/ 实现/ ./ 该/ 控制点/ 的/ 作用/ 是/ ,/ 根据/ 负载/ 指标/ 给出/ 的/ 时间/ 值/ ,/ 在/ 虚拟/ 用户/ 的/ 两个/ 相邻/ 活动/ 之间/ 增加/ 延迟/ ,/ 从而/ 对/ SUT/ 模拟出/ 时间/ 间隔/ 或/ 持续时间/ 的/ 效果/ ./ ⑤/ 数据/ 模拟/ 控制点/ ./ 这是/ 针对/ 数据/ 规模/ 类/ 指标/ (/ c5/ )/ 的/ 控制点/ ,/ 位于/ PTC/ 中/ ,/ 以/ 外部/ 函数/ 的/ 形式/ 实现/ ./ 该/ 控制点/ 可/ 根据/ 指标/ 给出/ 的/ 数据/ 大小/ 或/ 流量/ ,/ 向/ SUT/ 发送/ 相应/ 的/ 数据流/ ,/ 从而/ 模拟出/ 负载/ 指标/ 规定/ 的/ 数据/ 规模/ ./ ⑥/ 负载/ 停止/ 控制点/ ./ 这是/ 负载/ 产生/ 中/ 必不可少/ 的/ 一类/ 控制点/ ,/ 位于/ MTC/ 中/ ,/ 以/ TTCN/ -/ 3/ 函数/ 的/ 形式/ 实现/ ./ 该/ 控制点/ 根据/ 访问/ 规模/ 类/ 指标/ (/ c2/ )/ 中/ 给出/ 的/ 总量/ ,/ 决定/ MTC/ 何时/ 终止/ 负载/ 产生/ ./ (/ 1/ )/ 当/ LQM/ Θ/ 建立/ 之后/ ,/ 需要/ 为/ LQM/ Θ/ 本文/ 设计/ 的/ 这/ 6/ 种/ 控制点/ 全部/ 符合/ TTCN/ -/ 3/ 标准/ 的/ 规定/ ,/ 每种/ 控制点/ 都/ 可/ 根据/ 负载/ 产生/ 的/ 需要/ 在/ TTCN/ -/ 3/ 测试/ 系统/ 中/ 设置/ 任意/ 数量/ 的/ 实例/ ./ 但/ 其/ 前提/ 是/ ,/ 这些/ 控制点/ 的/ 引入/ 不会/ 违反/ 控制/ 约束/ ./ 控制/ 约束/ 是/ 指/ 一个/ 控制点/ 的/ 引入/ 会/ 对/ 另/ 一个/ 控制点/ 产生/ 影响/ ,/ 导致/ 另/ 一个/ 控制点/ (/ 或者/ 二者/ 都/ )/ 无法/ 模拟出/ 对应/ 指标/ 所/ 要求/ 的/ 负载/ ./ 例如/ ,/ 请求/ 发生/ 间隔/ 和/ 会/ 话/ 内/ 请求/ 间隔/ 是/ 对/ Web/ 系统/ 负载/ 建模/ 时常/ 使用/ 的/ 两个/ 指标/ ./ 二者/ 的/ 作用/ 都/ 是/ 对/ HTTP/ 请求/ 的/ 发送/ 时间/ 进行/ 控制/ ./ 如果/ 我们/ 在/ 一次/ 负载/ 产生/ 中/ 同时/ 引入/ 全局/ 发送/ 控制点/ 和/ PTC/ 延迟/ 控制点/ ,/ 来/ 对/ 这/ 两个/ 指标/ 进行/ 控制/ ,/ 那么/ 就/ 会/ 违背/ 控制/ 约束/ ,/ 引发/ 控制/ 冲突/ ./ 由于/ 二者/ 试图/ 同时/ 对/ 一个/ 请求/ 的/ 发送/ 时间/ 进行/ 调整/ ,/ 其/ 结果/ 必然/ 是/ 该/ 消息/ 的/ 发送/ 时间/ 无法/ 满足/ 任何/ 一个/ 指标/ 的/ 要求/ ./ 4.2/ 负载/ 指标/ 与/ 控制点/ 映射/ 在/ 定义/ 了/ 负载/ 模型/ 之后/ ,/ 就/ 需要/ 建立/ 模型/ 中/ 的/ 各项/ 指标/ 与/ 控制点/ 之间/ 的/ 映射/ 关系/ ,/ 确定/ 每个/ 指标/ 由/ 哪个/ 或/ 哪些/ 控制点/ 进行/ 控制/ ./ 这种/ 映射/ 关系/ 的/ 建立/ 需要/ 分/ 3/ 个/ 步骤/ 完成/ :/ 每个/ 指标/ 确定/ 一个/ 能够/ 对/ 其/ 进行/ 直接/ 控制/ 的/ 控制点/ ./ 这些/ 控制点/ 总体/ 上/ 可/ 依据/ 指标/ 类型/ 决定/ ,/ 但/ 对于/ 那些/ 对应/ 关系/ 不/ 唯一/ 或/ 控制点/ 使用/ 方式/ 不/ 固定/ 的/ 指标/ ,/ 则/ 需要/ 由/ 测试人员/ 根据/ 经验/ 指定/ ./ 例如/ ,/ 访问/ 时间/ 类/ 指标/ (/ c4/ )/ 既/ 可以/ 由/ PTC/ 延迟/ 控制点/ 控制/ ,/ 也/ 可以/ 由/ 全局/ 发送/ 控制点/ 控制/ ,/ 同时/ 对于/ 前者/ 在/ PTC/ 中/ 插入/ 的/ 位置/ 也/ 要/ 根据/ 虚拟/ 用户/ 的/ 具体/ 行为/ 决定/ ,/ 因此/ ,/ 这/ 类/ 指标/ 的/ 控制点/ 就/ 必须/ 要/ 依靠/ 人工/ 确定/ ./ 表/ 2/ 给出/ 了/ 不同/ 类型/ 指标/ 的/ 控制点/ 确定/ 方式/ ./ (/ 2/ )/ 在/ 确定/ 了/ 直接/ 控制点/ 之后/ ,/ 测试人员/ 还要/ 根据/ 经验/ 分析/ 不同/ 指标/ 的/ 控制点/ 之间/ 是否/ 存在/ 控制/ 约束/ ,/ 指出/ 哪些/ 指标/ 的/ 控制点/ 不能/ 同时/ 使用/ ,/ 从而/ 建立/ 一个/ 控制/ 约束/ 集合/ ./ (/ 3/ )/ 当/ TQS/ Φ/ 和/ LPM/ 建立/ 之后/ ,/ 以/ 步骤/ 1/ 中/ 确立/ 的/ 直接/ 控制关系/ 为/ 基础/ ,/ 针对/ TQS/ Φ/ 中/ 具体/ 使用/ 到/ 的/ 指标/ ,/ 检验/ 这种/ 控制关系/ 是否/ 能够/ 成立/ ./ 有/ 如下/ 3/ 种/ 情况/ 会/ 导致/ 可能/ 无法/ 使用/ 这种/ 直接/ 控制/ :/ ①/ 指标/ 没有/ 直接/ 对应/ 的/ 控制点/ ./ 例如/ ,/ 隶属于/ “/ 其它/ ”/ 类别/ 的/ 负载/ 指标/ 就/ 没有/ 直接/ 的/ 控制点/ ,/ 因此/ ,/ 无法/ 建立/ 起/ 上述/ 对应/ 关系/ ;/ ②/ 多个/ 指标/ 使用/ 同一个/ 控制点/ ./ 由于/ 每个/ 控制点/ 只能/ 根据/ 一个/ 指标/ 进行/ 控制/ ,/ 因此/ ,/ 这些/ 指标/ 无法/ 同时/ 通过/ 该/ 控制点/ 进行/ 控制/ ;/ ③/ 多个/ 指标/ 所/ 依赖/ 的/ 控制点/ 之间/ 存在/ 控制/ 约束/ ./ 在/ 这种/ 情况/ Page8/ 下/ ,/ 这些/ 指标/ 在/ 负载/ 产生/ 时/ 无法/ 同时/ 进行/ 控制/ ,/ 否则/ 可能/ 会/ 引发/ 控制/ 冲突/ ./ 对于/ 无法/ 直接/ 进行/ 控制/ 的/ 情况/ ,/ 就要/ 尝试/ 采用/ 间接/ 控制/ 方式/ ./ 本文/ 提出/ 了/ 一种/ 控制点/ 规划/ 算法/ ,/ 为/ TQS/ Φ/ 中/ 的/ 每个/ 指标/ 自动/ 选择/ 适合/ 的/ 控制/ 方式/ ,/ 通过/ 合理/ 的/ 规划/ ,/ 充分利用/ 有限/ 的/ 控制点/ ,/ 完成/ 对/ 多/ 指标/ 的/ 负载/ 控制/ ./ 4.3/ 控制点/ 规划/ 算法/ 针对/ 负载/ 指标/ 没有/ 直接/ 对应/ 控制点/ 的/ 问题/ ,/ 本文/ 提出/ 了/ 一种/ 间接/ 控制/ 方式/ :/ 若/ 一个/ 指标/ q/ 无法/ 直接/ 进行/ 控制/ ,/ 但/ 存在/ q/ 的/ 一个/ 值/ 约束/ ,/ 并且/ 其中/ 除/ q/ 外/ 的/ 其它/ 指标/ 均/ 有/ 直接/ 控制点/ ,/ 那么/ 可/ 通过/ 对/ 这些/ 指标/ 进行/ 控制/ ,/ 使/ q/ 达到/ 预期/ 值/ ./ 例如/ ,/ 虽然/ 我们/ 不能/ 对会话/ 长度/ 进行/ 直接/ 控制/ ,/ 但/ 可以/ 通过/ 控制/ 虚拟/ 用户/ 类型/ 分布/ 来/ 使会话/ 长度/ 的/ 均值/ 达到/ 预期/ ./ 针对/ 多个/ 指标/ 共享/ 控制点/ 及/ 存在/ 控制/ 约束/ 的/ 问题/ ,/ 可/ 通过/ 合理/ 规划/ ,/ 使得/ 两个/ 指标/ 能够/ 同时/ 使用/ ./ 例如/ ,/ 对于/ 请求/ 发生/ 间隔/ 和/ 会/ 话/ 内/ 请求/ 间隔/ 这/ 两个/ 指标/ ,/ 虽然/ 它们/ 的/ 控制点/ 存在/ 控制/ 约束/ ,/ 无法/ 同时/ 进行/ 直接/ 控制/ ,/ 但/ 我们/ 可以/ 选择/ 对/ 后者/ 直接/ 控制/ ,/ 而/ 对/ 前者/ 间接/ 控制/ 的/ 方式/ ,/ 令/ 这/ 两个/ 指标/ 能够/ 被/ 同时/ 满足/ ./ 指标/ 类别/ 可能/ 的/ 控制点/ 使用/ 方式/ 确定/ 方式/ c1c2c3PTC/ 创建/ 控制点/ 固定/ 自动/ c4c5c6/ 综上所述/ ,/ 当/ 确定/ 了/ 任务/ 指标/ 集/ TQS/ 之后/ ,/ 需要/ 提供/ 一种/ 机制/ ,/ 在/ 给出/ LQM/ 中/ 各/ 指标/ 的/ 直接/ 控制点/ 和/ 控制/ 约束/ 的/ 条件/ 下/ ,/ 规划/ TQS/ (/ 及/ RQS/ ,/ 其/ 指标/ 可/ 用于/ 间接/ 控制/ )/ 中/ 各个/ 指标/ 的/ 控制/ 方式/ ,/ 从而/ 建立/ 指标/ 控制/ 映射/ 集/ ./ 在/ 能够/ 找到/ 多个/ 方案/ 的/ 情况/ 下/ ,/ 应/ 选择/ 控制点/ 个数/ 少/ 的/ 作为/ 优选/ 方案/ ./ 为此/ ,/ 本文/ 提出/ 了/ 一种/ 控制点/ 规划/ 算法/ ./ 下面/ ,/ 本文/ 首先/ 给出/ 指标/ 控制/ 映射/ 集/ 的/ 定义/ ,/ 然后/ 再/ 介绍/ 该/ 规划/ 算法/ ./ 定义/ 5/ ./ 指标/ 控制/ 映射/ 集是/ 一个/ 二元关系/ Q2C/ =/ {/ 〈/ qi/ ,/ CPj/ 〉/ |/ qi/ ∈/ TQS/ Φ/ ,/ CPj/ / CPS/ }/ ,/ 其中/ ,/ 〈/ qi/ ,/ CPj/ 〉/ 定义/ 了/ 测试/ 任务/ Φ/ 的/ 任务/ 指标/ 集中/ 的/ 指标/ qi/ 与/ TTCN/ -/ 3/ 负载/ 控制点/ 集合/ 的/ 子集/ CPj/ 之间/ 的/ 映射/ 关系/ ,/ 在/ 负载/ 生成/ 阶段/ qi/ 的/ 产生/ 需/ 依赖/ CPj/ 中/ 的/ 控制点/ 进行/ 控制/ ./ 体/ 包括/ 3/ 个/ 步骤/ :/ 用于/ 生成/ Q2C/ 的/ 控制点/ 规划/ 算法/ 如下/ 所示/ ,/ 具/ (/ 1/ )/ 对/ TQS/ 和/ RQS/ 中/ 的/ 指标/ 进行/ 分类/ ,/ 其/ 结果/ 为/ 3/ 个/ 类别/ :/ 直接/ 控制/ 指标/ 集/ DS/ 、/ 间接/ 控制/ 指标/ 集/ IS/ 和/ 未确定/ 控制/ 方式/ 指标/ 集/ PS/ ./ 具体/ 分类/ 规则/ 为/ ,/ 对于/ 独占/ 一个/ 直接/ 控制点/ 且/ 不/ 存在/ 控制/ 约束/ 的/ 指标/ 加入/ DS/ ,/ 对于/ 不/ 可能/ 进行/ 直接/ 控制/ 的/ 指标/ (/ 如/ 属于/ “/ 其它/ ”/ 类别/ 的/ 指标/ )/ 加入/ IS/ ,/ 其它/ 指标/ 则/ 加入/ PS/ ./ RQS/ 中/ 的/ 指标/ 全部/ 加入/ PS/ ./ (/ 2/ )/ 确定/ PS/ 中/ 指标/ 的/ 具体/ 控制/ 方式/ ./ 本文/ 采用/ 约束/ 优化/ 方法/ ,/ 首先/ 建立/ 约束/ 系统/ ,/ 然后/ 再/ 对/ 约束/ 进行/ 求解/ (/ 该解/ 使/ 目标/ 函数/ 最小化/ )/ ,/ 从而/ 确定/ 各/ 指标/ 的/ 最优控制/ 方式/ ./ 约束/ 系统/ 由/ 一系列/ 约束条件/ 构成/ ,/ 一个/ 可行/ 解/ 必须/ 满足/ 其中/ 的/ 所有/ 约束条件/ ./ 本文/ 所/ 定义/ 的/ 约束条件/ 是从/ 控制点/ 数量/ 的/ 角度/ 描述/ 的/ ,/ 其/ 建立/ 具体/ 遵循/ 了/ 如下/ 3/ 条/ 规则/ ./ 组/ vcg/ ,/ 构造/ 如下/ 约束条件/ :/ 规则/ 1/ ./ 对于/ 所有/ 涉及/ 未确定/ 指标/ 的/ 值/ 约束/ 其中/ ,/ qi/ ∈/ vcg/ / Q/ ,/ #/ cp/ (/ qi/ )/ 是/ 一个/ 0/ -/ 1/ 函数/ ,/ 定义/ 了/ 与/ 指标/ qi/ 相关/ 的/ 直接/ 控制点/ 个数/ ,/ 当/ qi/ 有/ 直接/ 控制点/ 时/ ,/ 其值/ 为/ 1/ ,/ 反之/ 为/ 0/ ./ 该/ 约束条件/ 的/ 含义/ 是/ 不能/ 对/ 一个/ 值/ 约束/ 组中/ 的/ 所有/ 指标/ 都/ 进行/ 直接/ 控制/ ,/ 以免/ 出现/ 控制/ 冲突/ ./ 规则/ 2/ ./ 对于/ 所有/ 控制/ 约束/ cc/ ,/ 构造/ 如下/ 约束条件/ :/ 其中/ ,/ qi/ ∈/ cc/ ,/ 其/ 含义/ 是/ 一个/ 控制/ 约束/ 中/ 至多/ 只能/ 存在/ 一个/ 直接/ 控制/ 的/ 指标/ ,/ 其它/ 都/ 需要/ 间接/ 控制/ 或/ 不/ 控制/ ./ 规则/ 3/ ./ 对于/ 所有/ 已经/ 确定/ 和/ 可能/ 的/ 间接/ 指标/ qx/ ,/ 为/ 其/ 所在/ 值/ 约束/ 组/ 集合/ G/ =/ {/ vcgy/ |/ qx/ ∈/ vcgy/ / Q/ }/ 构造/ 如下/ 约束条件/ :/ (/ ∑/ #/ cp/ (/ qi/ )/ =/ vcgj/ / Q/ -/ 1/ )/ ,/ #/ cp/ (/ qx/ )/ =/ 0/ ./ ∨/ vcgj/ ∈/ G/ 该/ 约束条件/ 是/ 一组/ 约束/ 等式/ 的/ 析取/ ./ 其中/ ,/ 每个/ 等式/ 对应/ G/ 中/ 的/ 一个/ 值/ 约束/ 组/ vcgj/ ,/ 在/ 该/ 等式/ 中/ qi/ ∈/ vcgj/ / Q/ ./ 整个/ 约束条件/ 的/ 含义/ 是/ ,/ 如果/ 指标/ qx/ 采用/ 间接/ 控制/ 方式/ ,/ 则/ 与/ qx/ 有关/ 的/ 所有/ 值/ 约束/ 组中/ 至少/ 有/ 一个/ 能够/ 满足/ 上文/ 提出/ 的/ 间接/ 控制/ 条件/ ./ (/ 3/ )/ 按/ 上述/ 方式/ 构造/ 的/ 约束/ 系统/ 属于/ GCOP/ (/ GeneralizedConstrainedOptimizationProblem/ )/ 约束/ 系统/ ,/ 可/ 采用/ 文献/ [/ 15/ ]/ 提出/ 的/ 方法/ 对/ 其/ 进行/ 求解/ ,/ Page9/ 所/ 使用/ 的/ 目标/ 函数/ 为/ min/ (/ ∑/ #/ cp/ (/ qi/ )/ )/ ,/ qi/ ∈/ PS/ ,/ 即将/ 控制点/ 最少/ 的/ 方案/ 作为/ 最优/ 解/ ./ 若/ 找到/ 最优/ 解/ ,/ 可/ 据此/ 确定/ PS/ 中/ 指标/ 的/ 控制/ 方式/ ,/ 并/ 建立/ 指标/ 控制/ 映射/ ./ 若/ 找/ 不到/ 解/ ,/ 则/ 证明/ 在/ 当前/ 的/ 测试/ 平台/ 上/ 测试人员/ 选择/ 的/ TQS/ 无法/ 执行/ ,/ 应该/ 重新/ 调整/ TQS/ ./ 算法/ 2/ ./ 控制点/ 规划/ 算法/ ./ 输入/ :/ TQS/ Φ/ // // 任务/ 指标/ 集/ RQS/ Φ/ // // 关联/ 指标/ 集/ 输出/ :/ Q2C/ // // 指标/ 控制/ 集/ 初始/ 数据/ :/ DS/ =/ / ,/ IS/ =/ / ,/ PS/ =/ / ,/ Q2C/ =/ / begin/ // // 对/ TQS/ 中/ 的/ 指标/ 进行/ 分类/ foreachq/ ∈/ TQS/ Φ/ beginif/ (/ / cp/ )/ (/ cp/ ∈/ CPS/ ∧/ cp/ →/ / / / / 直接/ 控制/ q/ )/ thenifq/ ∈/ 控制/ 约束/ thenPS/ ∪/ {/ q/ }/ →/ PS/ // // 未确定/ 控制/ 方式/ elseDS/ ∪/ {/ q/ }/ →/ DS/ // // 确定/ 为/ 直接/ 控制/ elseIS/ ∪/ {/ q/ }/ →/ IS/ // // 确定/ 为/ 间接/ 控制/ end/ // // 将/ RQS/ 中/ 的/ 指标/ 全部/ 加入/ PSPS/ ∪/ RQS/ Φ/ →/ PS/ // // 建立/ 约束/ 系统/ 并/ 进行/ 约束/ 求解/ BuildCS/ (/ )/ →/ constraintsFindSolution/ (/ constraints/ )/ →/ solution/ // // 根据/ 最优/ 解/ 确定/ PS/ 中/ 指标/ 的/ 控制/ 方式/ foreachq/ ∈/ PS/ ∧/ q/ ∈/ TQS/ Φ/ beginifsolution/ (/ q/ )/ =/ 1thenPS/ -/ {/ q/ }/ →/ PSDS/ ∪/ {/ q/ }/ →/ DS/ 〈/ q/ ,/ cpr/ 〉/ ∪/ Q2C/ →/ Q2C/ // // 建立/ 直接/ 控制/ 映射/ elseifsolution/ (/ q/ )/ =/ 0thenPS/ -/ {/ q/ }/ →/ PSIS/ ∪/ {/ q/ }/ →/ IS/ 〈/ q/ ,/ CPr/ 〉/ ∪/ Q2C/ →/ Q2C/ // // 建立/ 间接/ 控制/ 映射/ endend5/ 案例/ 分析/ 为了/ 对/ 本文/ 提出/ 的/ 负载/ 模型/ 及/ 负载/ 产生/ 方法/ 进行/ 验证/ ,/ 我们/ 以/ 一个/ 开源/ Web/ 应用/ 作为/ SUT/ 开展/ 了/ 实验/ ./ 该/ Web/ 应用/ 是/ 一个/ 网上/ 购书/ 系统/ ,/ 基于/ JSP/ 实现/ 主要/ 业务/ 逻辑/ ,/ 后台/ 采用/ MySQL/ 数据库/ ./ 本文/ 为/ 该/ Web/ 应用/ 定义/ 了/ 四类/ 虚拟/ 用户/ ,/ 分别/ 对应/ 四种/ 典型/ 的/ 使用/ 场景/ ,/ 如表/ 3/ 所示/ ./ 同时/ ,/ 我们/ 基于/ Eclipse/ 平台/ 开发/ 了/ 一个/ 负载/ 建模/ 和/ 生成/ 原型/ 工具/ ,/ 并/ 基于/ TTworkbenchTTCN/ -/ 3/ 平台/ ①/ 实现/ 了/ 所有/ 控制点/ ./ 前者/ 生成/ 的/ TTCN/ -/ 3/ 测试/ 系统/ 可/ 在/ 后者/ 中/ 运行/ ,/ 从而/ 产生/ 出/ 测试/ 所/ 需/ 的/ 负载/ ./ 以该/ Web/ 应用/ 作为/ SUT/ ,/ 我们/ 设计/ 了/ 3/ 组/ 实验/ 来/ 检验/ 本文/ 所/ 提出/ 的/ 模型/ 及/ 算法/ 的/ 有效性/ ./ 其中/ :/ 第/ 1/ 组/ 实验/ 重点/ 检验/ 了/ 负载/ 指标/ 的/ 建模/ 和/ TTCN/ -/ 3/ 控制点/ 对/ 单项/ 指标/ 的/ 控制能力/ ;/ 第/ 2/ 组/ 实验/ 则/ 用/ 负载/ 剖面/ 模型/ 定义/ 了/ 更加/ 复杂/ 的/ 测试/ 场景/ ,/ 并/ 在/ 该/ 场景/ 下/ 对/ 控制点/ 规划/ 和/ 指标/ 间接/ 控制能力/ 进行/ 了/ 验证/ ./ 最后/ ,/ 在/ 前/ 两组/ 实验/ 的/ 基础/ 上/ ,/ 我们/ 还/ 进行/ 了/ 本文/ 方法/ 与/ LoadRunner/ 的/ 对比/ 实验/ ./ 虚拟/ 用户/ vu1vu2vu3vu45/ ./ 1/ 第/ 1/ 组/ 实验/ 在/ 该/ 实验/ 中/ ,/ 本文/ 首先/ 建立/ 了/ 面向/ Web/ 系统/ 的/ 负载/ 指标/ 模型/ ./ 现有/ 的/ Web/ 负载/ 模型/ 主要/ 关注/ 了/ 两个/ 方面/ 的/ 特征/ :/ 网络/ 特征/ 和/ 用户/ 行为/ 特征/ ./ 我们/ 为了/ 保证/ 负载/ 指标/ 的/ 全面性/ ,/ 并/ 检验/ LQM/ 模型/ 的/ 描述/ 能力/ ,/ 本文/ 从/ 两个/ 方面/ 分别/ 选取/ 了/ 一组/ 典型/ 指标/ ,/ 建立/ 了/ 面向/ Web/ 系统/ 的/ 负载/ 指标/ 模型/ LQMWeb/ ,/ 其中/ 所/ 包含/ 的/ 指标/ 如表/ 4/ 所示/ ./ Qq1q2q3q4q5q6q7q8q9q10/ 上述/ 指标/ 之间/ 存在/ 着/ 本文/ 所/ 提出/ 的/ 两类/ 约束/ 关/ ①/ http/ :/ // // www/ ./ testingtech/ ./ de/ // products/ // ttwb/ _/ intro/ ./ phpPage10/ 系/ ./ 例如/ ,/ 会话/ 持续时间/ (/ q4/ )/ 、/ 会话/ 内/ 请求/ 间隔/ (/ q5/ )/ 和/ 会/ 话/ 长度/ (/ q3/ )/ 之间/ 存在/ 着/ 值/ 约束/ 关系/ :/ value/ (/ q4/ )/ =/ value/ (/ q5/ )/ ×/ (/ value/ (/ q3/ )/ -/ 1/ )/ ./ 又/ 如/ ,/ 会话/ 内/ 请求/ 间隔/ (/ q5/ )/ 和/ 思考/ 时间/ (/ q9/ )/ 之间/ 存在/ 着/ 区间/ 约束/ 关系/ :/ do/ -/ main/ (/ q9/ )/ =/ [/ 0/ ,/ value/ (/ q5/ )/ )/ ./ 通过/ 对/ LQMWeb/ 的/ 负载/ 指标/ 进行/ 分析/ ,/ 并且/ 通过/ 测试/ 进行/ 验证/ ,/ 我们/ 定义/ 了/ 指标值/ 约束/ 组和/ 区间/ 约束/ 组/ ,/ 如表/ 5/ 所示/ ./ CGQF/ // DCvcg1/ {/ q3/ ,/ q4/ ,/ q5/ }/ vcg2/ {/ q4/ ,/ q6/ ,/ q8/ }/ vcg3/ {/ q3/ ,/ q7/ ,/ q8/ }/ vcg4dcg1/ {/ q5/ ,/ q9/ }/ dc1/ :/ domain/ (/ q9/ )/ =/ [/ 0/ ,/ value/ (/ q5/ )/ )/ 为了/ 检验/ 本文/ 提出/ 的/ TTCN/ -/ 3/ 负载/ 控制点/ 对/ 单项/ 指标/ 的/ 控制能力/ ./ 我们/ 为/ LQMWeb/ 中/ 每个/ 可/ 直接/ 控制/ 的/ 指标/ ,/ 分别/ 定义/ 了/ 代表/ 不同/ 负载/ 水平/ 的/ 取指/ ,/ 并/ 使用/ 相应/ 的/ 负载/ 控制点/ 进行/ 了/ 负载/ 产生/ 实验/ ./ 在/ 负载/ 产生/ 后/ ,/ 我们/ 通过/ 分析/ 被测/ Web/ 应用/ 的/ 日志/ 信息/ ,/ 比较/ 了/ 从/ SUT/ 侧/ 实际/ 观察/ 到/ 的/ 指标值/ 与/ 期望值/ 的/ 差别/ ,/ 并/ 分析/ 了/ 控制/ 的/ 误差/ ./ 具体/ 实验/ 结果/ 如表/ 6/ 所示/ ./ Q/ 设置/ 值/ q1vu1/ :/ 25/ %/ ,/ vu2/ :/ 25/ %/ vu3/ :/ 25/ %/ ,/ vu4/ :/ 25/ %/ vu1/ :/ 35/ %/ ,/ vu2/ :/ 10/ %/ vu3/ :/ 30/ %/ ,/ vu4/ :/ 25/ %/ q52/ ./ 5sq615vuq70/ ./ 5sq81/ ./ 0s/ 其中/ ,/ 误差/ 的/ 计算公式/ 为/ 误差/ =/ 实测值/ -/ 设置/ 值/ 设置/ 值/ ×/ 100/ %/ ./ 从表/ 6/ 中/ 可以/ 看出/ ,/ 在/ 这些/ 指标/ 中/ ,/ 虚拟/ 用户/ 类型/ 分布/ 的/ 误差/ 最低/ ./ 时间/ 类/ 指标/ (/ 如会/ 话/ 内/ 请求/ 间隔/ 和/ 会/ 话/ 发生/ 间隔/ )/ 比/ 前者/ 要/ 稍/ 高/ 一些/ ./ 这/ 除了/ 测试/ 系统/ 本身/ 的/ 控制/ 误差/ 外/ ,/ 也/ 由于/ 这是/ 基于/ SUT/ 的/ 日志/ 进行/ 的/ 观测/ ,/ 引入/ 了/ 额外/ 的/ 网络/ 和/ Web/ 系统/ 处理/ 时延/ ,/ 因此/ 观测/ 值/ 不如/ 前者/ 准确/ 的/ 缘故/ ./ 总体而言/ ,/ 本文/ 所/ 提出/ 的/ TTCN/ -/ 3/ 控制点/ 的/ 控制/ 误差/ 大多/ 小于/ 或/ 接近/ 0.2/ %/ ,/ 控制精度/ 较/ 高/ ./ 唯一/ 的/ 例外/ 是/ 并发/ 用户数/ ./ 其/ 原因/ 是/ 在/ 负载/ 产生/ 的/ 开始/ 和/ 结束/ 阶段/ ,/ 并发/ 用户数/ 分别/ 有/ 一个/ 逐步提高/ 和/ 归零/ 的/ 过程/ ,/ 我们/ 在/ 计算/ 平均/ 并发/ 用户数/ 时/ 也/ 包括/ 了/ 这/ 两个/ 阶段/ ,/ 因而/ 导致/ 了/ 误差/ 的/ 加大/ ./ 5.2/ 第/ 2/ 组/ 实验/ 在/ 第/ 2/ 组/ 实验/ 中/ ,/ 我们/ 使用/ LPM/ 模型/ 描述/ 了/ 两个/ 测试/ 场景/ ./ 每个/ 场景/ 中均/ 对/ 多个/ 指标/ 的/ 取值/ 及其/ 变化/ 进行/ 了/ 定义/ ./ 然后/ ,/ 检验/ 在/ 多/ 指标/ 约束/ 下/ 的/ 控制点/ 规划/ 和/ 负载/ 控制能力/ ./ 5.2/ ./ 1TQS/ 选择/ 和/ LPM/ 模型/ 以/ LQMWeb/ 为/ 基础/ ,/ 我们/ 选择/ 了/ 两组/ 任务/ 指标/ ./ 所/ 选出/ 的/ 指标/ 如表/ 7/ 所示/ ./ 其中/ ,/ 第/ 1/ 组/ 指标/ 主要/ 体现/ 了/ 访问/ 的/ 整体/ 特征/ ,/ 而/ 第/ 2/ 组/ 指标/ 则/ 兼顾/ 了/ 用户/ 行为/ 和/ 整体/ 两个/ 方面/ 的/ 特征/ ./ 该/ 任务/ 指标/ 的/ 选择/ 是/ 基于/ TQS/ 选取/ 算法/ 完成/ 的/ ,/ 该/ 算法/ 的/ 作用/ 是/ 保证/ 选出/ 的/ 指标/ 取值/ 独立/ ./ 检验/ 指标/ 取值/ 是否/ 独立/ 的/ 充要条件/ 是/ :/ TQS/ 中/ 的/ 任意/ 指标/ 之间/ 不/ 存在/ 可/ 成立/ 的/ 值/ 约束/ 关系/ ,/ 而/ 可能/ 与/ 它们/ 发生/ 取值/ 冲突/ 的/ 指标/ 则/ 被/ 移到/ RQS/ 中/ ./ 对照表/ 5/ 中/ 的/ 约束/ 组/ ,/ 对表/ 7/ 中/ 的/ 选择/ 结果/ 进行/ 检查/ ,/ 我们/ 可以/ 判断/ 其/ 选择/ 结果/ 满足/ 独立性/ 要求/ ./ 组/ 12/ 对于/ Web/ 系统/ 而言/ ,/ 用户/ 类型/ 的/ 分布/ 是/ 系统/ 使用/ 的/ 一个/ 关键/ 特征/ ,/ 因此/ ,/ 在/ 测试/ 时/ 通常/ 会/ 给予/ 特别/ 的/ 关注/ ./ 针对/ 这个/ 特点/ ,/ 我们/ 在/ 实验/ 中/ 分/ 两个/ 步骤/ 构建/ 了/ LPM/ 模型/ ./ 首先/ ,/ 分析/ 了/ 表/ 3/ 中/ 4/ 类/ 虚拟/ 用户/ ①/ 本文/ 的/ 实验/ 均/ 以/ 虚拟/ 用户/ 总数/ (/ q10/ )/ 做/ 为/ 停止/ 负载/ 生成/ 的/ Page11/ 访问/ SUT/ 的/ 比例/ ,/ 从而/ 得到/ 指标/ q1/ 的/ 取值/ ;/ 之后/ ,/ 再/ 根据/ 任务/ 要求/ 的/ 不同/ 负载/ 水平/ ,/ 分别/ 确定/ 其它/ 指标/ 的/ 多组/ 取值/ ;/ 最后/ ,/ 将/ 这些/ 不同/ 的/ 取值/ 作为/ LPM/ 中/ 的/ 多个/ 阶段/ ,/ 组成/ 一个/ 完整/ 的/ LPM/ 模型/ ./ 针对/ 第一个/ TQS/ 所/ 建立/ 的/ LPM/ 模型/ 如图/ 3/ 所示/ ./ 在/ 这个/ LPM/ 模型/ 中/ ,/ 根据/ 指标/ 取值/ 的/ 变化/ 测试/ 被/ 分为/ 3/ 个/ 阶段/ ./ 其中/ ,/ 用户/ 类型/ 分布/ 的/ 取值/ 将/ 在/ 各/ 阶段/ 中/ 保持/ 不变/ ,/ 从而/ 贯穿/ 测试/ 始终/ ;/ 其它/ 指标/ 在/ 不同/ 阶段/ 将/ 采用/ 不同/ 的/ 期望值/ ,/ 以/ 模拟/ 不同/ 的/ 负载/ 水平/ ,/ 例如/ ,/ 请求/ 发生/ 间隔/ 在/ 3/ 个/ 阶段/ 的/ 期望值/ 分别/ 为/ 200ms/ 、/ 62.5/ ms/ 和/ 12.5/ ms/ ./ 这个/ 值/ 的/ 变化/ 说明/ 我们/ 在/ 测试/ 中/ 希望/ 以/ 渐进/ 的/ 方式/ 不断/ 提高/ 用户/ 访问/ 的/ 频度/ ./ 5.2/ ./ 2/ 控制点/ 规划/ 在/ 实验/ 中/ ,/ 我们/ 采用/ 控制点/ 规划/ 算法/ ,/ 建立/ 了/ 上述/ 两组/ 任务/ 指标/ 与/ TTCN/ -/ 3/ 负载/ 控制点/ 之间/ 的/ 映射/ 关系/ ./ 其中/ ,/ 由于/ 第/ 1/ 组中/ 的/ 指标/ q1/ 、/ q6/ 、/ q7/ 均/ 有/ 对应/ 的/ TTCN/ -/ 3/ 控制点/ ,/ 并且/ 它们/ 之间/ 没有/ 控制/ 约束/ ,/ 所以/ 可/ 全部/ 采用/ 直接/ 控制/ 方式/ ,/ 3/ 个/ 指标/ 分别/ 由/ 用户/ 选择/ 控制点/ 、/ PTC/ 创建/ 控制点/ 和/ 全局/ 发送/ 控制点/ 进行/ 控制/ ./ 但/ 对于/ 第/ 2/ 组/ 指标/ ,/ 由于/ 其中/ 的/ 指标/ q5/ 和/ q7/ 之间/ 存在/ 上文/ 所述/ 的/ 控制/ 约束/ ,/ 因此/ ,/ 需要/ 利用/ 本文/ 提出/ 的/ 控制点/ 规划/ 算法/ 建立/ 起/ 一种/ 间接/ 控制/ 方法/ ./ 该/ 规划/ 算法/ 首先/ 根据/ 指标/ 之间/ 的/ 关系/ 建立/ 约束/ 系统/ ./ 针对/ 第/ 2/ 组/ TQS/ 及/ 相关/ 的/ RQS/ ,/ 所/ 建立/ 的/ 约束/ 系统/ 如下/ 所示/ :/ q5/ +/ q6/ +/ q7/ +/ 1/ / 3/ 烄/ q7/ +/ q8/ +/ 1/ / 2q6/ +/ q8/ / 1q5/ +/ q7/ / 1/ 烅/ (/ q7/ =/ 1/ )/ ∨/ (/ (/ q7/ =/ 0/ )/ ∧/ (/ (/ q5/ +/ q6/ +/ 1/ =/ 3/ )/ ∨/ (/ q5/ =/ 1/ )/ ∨/ (/ (/ q5/ =/ 0/ )/ ∧/ (/ q6/ +/ q7/ +/ 1/ =/ 3/ 烆/ 对/ 上述/ 约束/ 系统/ 进行/ 求解/ ,/ 该/ 算法/ 最终/ 规划/ 出/ 指标/ 控制/ 映射/ 关系/ ,/ 如表/ 8/ 所示/ ./ Q/ 控制/ 方式/ q1q5q75/ ./ 2.3/ 负载/ 控制/ 误差/ 分析/ 基于/ 所/ 建立/ 的/ LPM/ 模型/ 和/ 指标/ 控制/ 映射/ 关系/ ,/ 我们/ 对/ 网上/ 购书/ 系统/ 进行/ 了/ 测试/ ,/ 并/ 采用/ 与/ 第/ 1/ 组/ 实验/ 相同/ 的/ 方法/ 进行/ 了/ 日志/ 分析/ ./ 两组/ LPM/ 测试/ 的/ 具体/ 观测/ 结果/ 和/ 误差/ 如表/ 9/ 和表/ 10/ 所示/ ,/ 其中/ ,/ LPM/ 模型/ 中/ 各/ 阶段/ 的/ 数据/ 是/ 分别/ 统计/ 的/ (/ LPM1/ 中有/ 3/ 个/ 测试阶段/ ,/ 在/ LPM2/ 中/ 我们/ 定义/ 了/ 两个/ 阶段/ )/ ./ Q/ 阶段/ 设置/ 值/ q1/ 全部/ vu1/ :/ 25/ %/ ,/ vu2/ :/ 25/ %/ q7q6160vu260vu3100vu1200ms262/ ./ 5ms312/ ./ 5ms/ 在/ 表/ 10/ 中/ ,/ 我们/ 不仅/ 列出/ 了/ LPM2/ 中/ 所有/ 指标/ 的/ 实测值/ ,/ 同时/ 也/ 列出/ 了/ 参与/ 间接/ 控制/ 的/ 指标/ 的/ 实测值/ ./ 从中/ 可以/ 看出/ ,/ 间接/ 控制/ 指标/ 的/ 误差/ 具有/ 累积/ 效应/ ,/ 与/ 参与/ 控制/ 的/ 控制点/ 个数/ (/ 及/ 约束/ 关系/ )/ 有关/ ./ 在/ 本/ 实验/ 中/ ,/ 请求/ 发生/ 间隔/ (/ q7/ )/ 采用/ 了/ 间接/ 控制/ 方式/ ,/ 其/ 误差值/ 比/ 其它/ 几个/ 直接/ 控制/ 指标/ 表现/ 出/ 明显/ 的/ 升高/ ./ 通过/ 这个/ 观察/ 我们/ 可/ 进一步/ 得出/ ,/ 为了/ 更好/ 地/ 控制/ 误差/ ,/ 控制点/ 规划/ 时/ 除了/ 要/ 依据/ 总体/ 控制点/ 数量/ 外/ ,/ 还应/ 关注/ 每个/ 间接/ 控制/ 指标/ 的/ 控制点/ 个数/ 和/ 参与/ 控制点/ 的/ 精度/ ,/ 尽可能/ 优选/ 控制点/ 数量/ 少/ 、/ 精度高/ 的/ 方案/ ./ Q/ 阶段/ 设置/ 值/ q1/ 全部/ vu1/ :/ 35/ %/ ,/ vu3/ :/ 30/ %/ ,/ q5111/ ./ 8s29/ ./ 4sq711/ ./ 6s20/ ./ 9sq815/ ./ 92s23/ ./ 33s/ 最后/ ,/ 本文/ 对/ 第/ 1/ 组/ 实验/ 和/ 第/ 2/ 组/ 实验/ 的/ 控制/ 误差/ 进行/ 了/ 对比/ ,/ 如图/ 4/ 所示/ ./ 通过/ 对比/ 分析/ 可以/ 看/ Page12/ 出/ ,/ 在/ 需要/ 多/ 指标/ 协同/ 控制/ 的/ 复杂/ 负载/ 场景/ 下/ ,/ 直接/ 控制/ 指标/ 的/ 误差/ 与/ 单/ 指标/ 控制/ 实验/ 中/ 的/ 误差/ 大致相同/ ,/ 大多数/ 指标/ 的/ 误差/ 也/ 维持/ 在/ 0.2/ %/ 以内/ ./ 这/ 说明/ 并/ 没有/ 因为/ 需要/ 对/ 多个/ 指标/ 进行/ 协同/ 控制/ ,/ 而/ 导致/ 误差/ 的/ 增大/ ./ 但/ 间接/ 控制/ 指标/ 的/ 误差/ 稍/ 高/ ,/ 接近/ 0.5/ %/ ,/ 这/ 主要/ 是/ 由/ 参与/ 控制/ 的/ 控制点/ 数量/ 及/ 误差/ 累积/ 所/ 决定/ 的/ ./ 通过/ 两组/ 实验/ 可以/ 看出/ ,/ 本文/ 所/ 提出/ 的/ 负载/ 建模/ 方法/ 能够/ 根据/ SUT/ 的/ 类型/ 建立/ 由/ 多种/ 指标/ 构成/ 的/ 指标体系/ ,/ 并/ 通过/ 负载/ 剖面/ 模型/ 描述/ 由/ 不同/ 指标/ 所/ 约束/ 的/ 负载/ 场景/ ./ 所/ 提出/ 的/ 负载/ 生成/ 方法/ 能够/ 较为/ 精确/ 地/ 模拟出/ 模型/ 描述/ 的/ 负载/ 场景/ ,/ 其中/ 所有/ 指标/ 的/ 控制/ 误差/ 均/ 小于/ 0.7/ %/ ,/ 主要/ 指标/ 的/ 控制/ 误差/ 小于/ 0.25/ %/ ./ 5.3/ 对比/ 实验/ 本文/ 还/ 进行/ 了/ 与/ 其它/ 负载/ 产生/ 方法/ 的/ 对比/ 实验/ ./ LoadRunner/ ①/ 是/ 目前/ 技术/ 较为/ 成熟/ 、/ 使用/ 较为/ 广泛/ 的/ 一种/ 性能/ 测试工具/ ,/ 其/ 采用/ 的/ 负载/ 描述/ 和/ 产生/ 方法/ 也/ 在/ 测试/ 工程/ 实践/ 中/ 得到/ 了/ 大量/ 应用/ ./ 本文/ 选择/ LoadRunner9/ ./ 5/ 版/ 作为/ 比较/ 的/ 对象/ ,/ 从/ 负载/ 描述/ 能力/ 、/ 负载/ 控制能力/ 和/ 方法/ 的/ 适用性/ 3/ 个/ 方面/ 与/ 本文/ 提出/ 的/ 方法/ 进行/ 了/ 对比/ ./ 5.3/ ./ 1/ 负载/ 描述/ 能力/ LoadRunner/ 支持/ 通过/ 多种/ 指标/ 来/ 刻画/ 负载/ ,/ 并/ 为/ 不同/ 类型/ 的/ SUT/ 定义/ 了/ 不同/ 的/ 指标/ 集合/ ./ 对于/ Web/ 应用/ 测试/ 而言/ ,/ 表/ 4/ 中/ 列出/ 的/ 大部分/ 指标/ Loa/ -/ dRunner/ 均/ 能/ 支持/ ,/ 并/ 能够/ 灵活/ 地/ 设置/ 指标/ 取值/ (/ 包括/ 指标值/ 随/ 时间/ 变化/ 的/ 情况/ )/ ./ 但/ 该/ 工具/ 在/ 指标/ 的/ 使用/ 上/ 存在/ 限制/ ./ 具体来说/ ,/ LoadRunner/ 提供/ 了/ 如下/ 两种/ 负载/ 描述/ 方法/ ,/ 每种/ 方法/ 中/ 允许/ 使用/ 的/ 指标/ 有所不同/ ./ (/ 1/ )/ ManualScenario/ ./ 通过/ 手工/ 设置/ 多个/ 可/ 被/ LoadRunner/ 直接/ 控制/ 的/ 指标/ 来/ 定义/ 负载/ ,/ 这些/ 指标/ 包括/ 虚拟/ 用户/ 分布/ (/ q1/ )/ 、/ 并发/ 用户数/ (/ q6/ )/ 、/ 思考/ 时间/ (/ q9/ )/ 、/ 虚拟/ 用户/ 总数/ (/ q10/ )/ 等/ ;/ (/ 2/ )/ Goal/ -/ OrientedScenario/ ./ 以/ 单一/ 指标/ 为/ 目标/ 的/ 负载/ 定义方法/ ,/ 其/ 目标/ 指标/ 通常/ 是/ LoadRunner/ 无法/ 直接/ 控制/ 的/ 指标/ ,/ 因而/ 需要/ 控制/ 其它/ 指标/ 来/ 间接/ 产生/ 能够/ 满足/ 目标/ 要求/ 的/ 负载/ ,/ 目标/ 指标/ 包括/ 每秒/ 点击数/ (/ q7/ 的/ 倒数/ )/ 、/ 每秒/ 会话数/ (/ q8/ 的/ 倒数/ )/ 等/ ./ 在/ 上述/ 两种/ 描述/ 方法/ 中/ ,/ 前者/ 可/ 支持/ 使用/ 多/ 指标/ 刻画/ 负载/ ,/ 但/ 所/ 使用/ 的/ 指标/ 仅限于/ LoadRunner/ 能够/ 直接/ 控制/ 的/ 指标/ ;/ 后者/ 虽然/ 可以/ 使用/ 间接/ 控制/ 指标/ ,/ 但/ 每次/ 只能/ 指定/ 一个/ 指标/ 作为/ 目标/ ,/ 且/ 目标/ 指标/ 也/ 不能/ 与/ 其它/ 直接/ 或/ 间接/ 控制/ 指标/ (/ 除/ q1/ 外/ )/ 同时/ 使用/ ./ 由此可见/ ,/ 与/ 本文/ 提出/ 的/ 方法/ 相比/ ,/ Load/ -/ Runner/ 在/ 多/ 指标/ 负载/ 描述/ 方面/ 的/ 能力/ 有所/ 不足/ ./ 正是/ 因为/ 这个/ 原因/ ,/ 本文/ 第/ 2/ 组/ 实验/ 中/ 给出/ 的/ 两种/ 负载/ 场景/ 均/ 无法/ 使用/ LoadRunner/ 完整/ 描述/ ./ 其中/ ,/ 在/ 第/ 1/ 场景/ 中/ ,/ 由于/ q7/ 是/ 间接/ 控制/ 指标/ ,/ 需要/ 采用/ Goal/ -/ OrientedScenario/ 方式/ 进行/ 定义/ ,/ 因而/ 不能/ 与/ q6/ 同时/ 定义/ ;/ 在/ 第/ 2/ 场景/ 中/ ,/ 除/ q7/ 的/ 问题/ 外/ ,/ Load/ -/ Runner/ 也/ 不/ 支持/ 对会/ 话/ 内/ 请求/ 间隔/ (/ q5/ )/ 进行/ 定义/ ./ 5.3/ ./ 2/ 负载/ 控制能力/ 针对/ 上述/ 两种/ 负载/ 描述/ 方法/ ,/ LoadRunner/ 提供/ 了/ 两种/ 与/ 之/ 对应/ 的/ 负载/ 控制/ 方法/ ./ 对于/ ManualSce/ -/ nario/ ,/ 该/ 工具/ 依据/ 每个/ 给定/ 的/ 指标值/ 直接/ 控制/ 负载/ ;/ 对于/ Goal/ -/ OrientedScenario/ ,/ 该/ 工具/ 采用/ 与/ 本文/ 间接/ 控制/ 类似/ 的/ 方法/ ,/ 依据/ 目标/ 指标/ 给出/ 的/ 期望值/ ,/ 通过/ 改变/ 并发/ 用户数/ 、/ 会话/ 间隔时间/ 等/ 直接/ 控制/ 指标/ 来/ 动态/ 调整/ 负载/ ,/ 直到/ 满足/ 该/ 目标/ 指标/ 的/ 要求/ ./ 为了/ 与/ 本文/ 的/ 负载/ 控制/ 效果/ 进行/ 对比/ ./ 本文/ 使用/ LoadRunner/ 在/ 同样/ 的/ 实验/ 环境/ 下/ ,/ 针对/ LPM1/ 中/ 的/ 负载/ 指标/ ,/ 采用/ 3/ 组/ 不同/ 的/ 取值/ 进行/ 了/ 实验/ ./ 由于/ LoadRunner/ 不能/ 同时/ 对/ q6/ 和/ q7/ 进行/ 定义/ ,/ 因此/ ,/ 我们/ 在/ 实验/ 中仅/ 保留/ 了/ q1/ 和/ q7/ 两个/ 指标/ ,/ 其中/ ,/ 前者/ 属于/ 直接/ 控制/ ,/ 后者/ 为/ 面向/ 目标/ 的/ 间接/ 控制/ ./ 具体/ 指标/ 取值/ 和/ 观测/ 结果/ 如表/ 11/ 所示/ ./ 从中/ 可以/ 看出/ ,/ q7/ 的/ 控制/ 误差/ 与/ 本文/ 方法/ 在/ 实验/ 2/ 中/ 的/ 数值/ 接近/ ,/ q1/ 的/ 误差/ 略/ 高/ ./ 总体而言/ ,/ LoadRunner/ 与/ 本文/ 方法/ 的/ 负载/ 控制/ 误差/ 处于/ 相当/ 水平/ ./ 此外/ ,/ 表/ 11/ 中/ 还/ 给出/ 了/ q6/ 的/ 观测/ 值/ ./ 由于/ LoadRunner/ 无法/ 对/ 其/ 进行/ 控制/ ./ 因此/ ,/ 该值/ 在/ 实验/ 中/ 的/ 变化/ 幅度/ 较大/ ./ ①/ http/ :/ // // en/ ./ wikipedia/ ./ org/ // wiki/ // HP/ _/ LoadRunnerPage13Q/ 阶段/ 设置/ 值表/ 11LoadRunnerGoal/ -/ OrientedScenario/ 控制/ 结果/ 1vu1/ :/ 25/ %/ ,/ vu2/ :/ 25/ %/ 2vu1/ :/ 13/ %/ ,/ vu2/ :/ 20/ %/ 3vu1/ :/ 60/ %/ ,/ vu2/ :/ 20/ %/ 1125ms2125ms3125ms123q1q7q6Q/ 阶段/ 设置/ 值/ 1vu1/ :/ 25/ %/ ,/ vu2/ :/ 25/ %/ 2vu1/ :/ 13/ %/ ,/ vu2/ :/ 20/ %/ 3vu1/ :/ 60/ %/ ,/ vu2/ :/ 20/ %/ 160vu260vu360vu1125ms2125ms3125msq1q6q7q9111293ms210480ms313130ms/ 我们/ 还/ 通过/ 实验/ 表明/ 了/ 使用/ 本文/ 提出/ 的/ 指标/ 约束/ 关系/ 可以/ 改进/ LoadRunner/ 的/ 多/ 指标/ 控制能力/ ./ 根据/ vcg4/ 给出/ 的/ 关于/ q3/ 、/ q5/ 、/ q6/ 和/ q7/ 之间/ 的/ 函数/ 关系/ ,/ 本文/ 转而/ 采用/ ManualScenario/ 方式/ ,/ 通过/ 直接/ 控制/ q1/ (/ 通过/ q1/ 可/ 推算出/ q3/ )/ 、/ q6/ 、/ q9/ (/ 在/ LoadRunner/ 中/ 无法/ 直接/ 控制/ q5/ ,/ 因此/ 我们/ 通过/ 思考/ 时间/ q9/ 加上/ 一个/ 估计/ 延迟/ 近似/ 模拟/ q5/ )/ 3/ 个/ 指标/ 间接/ 影响/ q7/ ,/ 从而/ 达到/ 同时/ 控制/ LPM1/ 中/ 全部/ 指标/ 的/ 目的/ ./ 其中/ ,/ q1/ 和/ q6/ 属于/ 约束/ 变量/ ,/ 需要/ 根据/ LPM1/ 的/ 定义/ 进行/ 设置/ ,/ q9/ 属于/ 自由/ 变量/ ./ 在/ 负载/ 产生/ 中/ ,/ 我们/ 通过/ 调整/ q9/ 使/ q7/ 的/ 值/ 达到/ 期望/ 目标/ ./ 本/ 实验/ 的/ 结果/ 如表/ 12/ 所示/ ./ 与表/ 11/ 相比/ ,/ 在/ q1/ 和/ q7/ 控制/ 误差/ 没有/ 显著/ 提升/ 的/ 情况/ 下/ ,/ q6/ 的/ 观测/ 值/ 已/ 明显/ 收敛/ 到/ 期望值/ 60/ ./ 该/ 实验/ 表明/ :/ 本文/ 提出/ 的/ 指标/ 间/ 关系/ 不仅/ 可/ 用于/ TTCN/ -/ 3/ 负载/ 控制/ ,/ 对于/ 其它/ 方法/ 也/ 具有/ 普适/ 作用/ ./ 我们/ 认为/ ,/ 运用/ 负载/ 指标/ 之间/ 的/ 关联/ 关系/ ,/ 并/ 结合/ 多/ 目标/ 控制算法/ ,/ 可/ 作为/ 一种/ 对/ LoadRunner/ 的/ 负载/ 控制算法/ 进行/ 改进/ 的/ 思路/ ./ 5.3/ ./ 3/ 方法/ 适用性/ LoadRunner/ 的/ 负载/ 控制/ 方法/ 具有/ 一定/ 通用性/ ,/ 可/ 适用/ 于/ 不同/ 类型/ SUT/ 的/ 性能/ 测试/ ./ 但是/ ,/ 其/ 虚拟/ 用户/ 模拟/ 脚本/ 的/ 生成/ 采用/ 了/ “/ 录制/ 与/ 回放/ ”/ 的/ 方式/ ,/ 因此/ ,/ 只能/ 针对/ 该/ 工具/ 可/ 识别/ 的/ SUT/ 类型/ 进行/ 测试/ ./ 虽然/ 经过/ 多年/ 的/ 发展/ ,/ LoadRunner/ 目前/ 已经/ 可以/ 支持/ 诸如/ Web/ 应用/ 、/ Web/ 服务/ 、/ 数据库/ 、/ 流媒体/ 等/ 常见/ 的/ SUT/ 测试/ ,/ 但/ 对于/ 新/ 出现/ 的/ SUT/ 类型/ (/ 如/ 新型/ 通信协议/ )/ ,/ 该/ 工具/ 可能/ 无法/ 支持/ ./ 本文/ 提出/ 的/ 也/ 是/ 一种/ 通用/ 的/ 负载/ 生成/ 方法/ ,/ 其/ 虚拟/ 用户/ 模拟/ 与/ 负载/ 控制/ 是/ 基于/ TTCN/ -/ 3/ 测试/ 系统/ 的/ ./ 由于/ TTCN/ -/ 3/ 具有/ 标准化/ 、/ 通用化/ 和/ 独立/ 于/ SUT/ 的/ 特性/ ,/ 因此/ ,/ 本文/ 的/ 方法/ 具有/ 较/ 好/ 的/ 适用范围/ ,/ 可/ 适用/ 于/ 不同/ 类型/ SUT/ 的/ 测试/ ./ 但是/ ,/ 针对/ 不同/ SUT/ 开发/ 相应/ 的/ TTCN/ -/ 3/ 虚拟/ 用户/ 模拟程序/ 和/ 适配器/ 程序/ 是/ 应用/ 本/ 方法/ 时/ 测试人员/ 必须/ 要/ 完成/ 的/ 工作/ ./ 文献/ [/ 14/ ]/ 中/ 的/ 方法/ 可以/ 用来/ 提高/ 这项/ 开发/ 的/ 效率/ 并/ 减轻/ 工作量/ ./ 6/ 相关/ 工作/ 讨论/ 性能/ 测试/ 是/ TTCN/ -/ 3/ 研究/ 中/ 的/ 热点/ 之一/ ./ 近年来/ 得到/ 国内外/ 的/ 广泛/ 关注/ ./ 文献/ [/ 3/ ]/ 针对/ TTCN/ -/ 3/ 语言/ 在/ 时间/ 特性/ 描述/ 方面/ 的/ 不足/ ,/ 研究/ 了/ TTCN/ -/ 3/ 的/ 实时/ 扩展/ 方案/ ,/ 提出/ 了/ 一种/ TimedTTCN/ -/ 3/ 语言/ ,/ 其中/ 引入/ 了/ 面向/ 非/ 功能测试/ 的/ 判决/ 、/ 绝对/ 时间/ 、/ 实时/ 属性/ 的/ 在线/ 和/ 离线/ 评估/ 等/ 机制/ ./ 文献/ [/ 4/ ]/ 则/ 分析/ 了/ TTCN/ -/ 3/ 在/ 并发/ 测试/ 控制/ 方面/ 的/ 不足/ ,/ 并/ 通过/ 引入/ 信号量/ 等/ 机制/ 增强/ 了/ 测试/ 构件之间/ 的/ 同步/ 能力/ ./ 文献/ [/ 2/ ]/ 分析/ 了/ TTCN/ -/ 3/ 在/ 测试/ 判定/ 、/ 时间/ 机制/ 、/ 同步/ 机制/ 等/ 方面/ 的/ 局限性/ ,/ 并/ 从/ 核心/ 语言/ 的/ 性能/ 扩展/ 、/ 测试/ 系统/ 自身/ 的/ 性能/ 评估/ 和/ 外部/ 函数/ 的/ 重新/ 设计/ 3/ 方面/ 探讨/ 了/ 基于/ TTCN/ -/ 3/ 的/ 性能/ 测试/ 描述/ 方法/ ,/ 针对/ 如何/ 使用/ TTCN/ -/ 3/ 进行/ 性能/ 测试/ 给出/ 了/ 建议/ ./ 上述/ 研究所/ 提出/ 的/ 扩展/ 机制/ 使得/ TTCN/ -/ 3/ 能够/ 更好/ 地为/ 性能/ 测试/ 提供/ 支持/ ./ 在/ 性能/ 测试/ 系统/ 设计/ 方面/ ,/ 文献/ [/ 8/ ]/ 提出/ 了/ 一套/ 基于/ TTCN/ -/ 3/ 的/ 性能/ 基准/ 测试/ 系统/ ,/ 用于/ 检验/ IMS/ (/ IPMultimediaSystem/ )/ 系统/ 在/ 呼叫/ 密度/ 和/ 并发/ 用户量/ 方面/ 的/ 承受能力/ ./ Schief/ -/ erdecker/ 等/ 人/ 在/ 文献/ [/ 9/ ]/ 中/ 提出/ 了/ 一种/ 自动化/ 的/ TTCN/ -/ 3/ 测试/ 框架/ ,/ 该/ 框架/ 可/ 用于/ WebService/ 的/ 功能/ 和/ 性能/ 测试/ ./ 文献/ [/ 10/ ]/ 也/ 研究/ 了/ 使用/ TTCN/ -/ 3/ 进行/ 服务化/ 软件/ 性能/ 测试/ 的/ 方法/ ./ 蒋凡/ 等/ 人/ 则/ 在/ 一/ ①/ ②/ Page14/ 致性/ 测试/ 框架/ 的/ 基础/ 上/ ,/ 设计/ 了/ 可/ 用于/ 端到/ 端/ 性能/ 测试/ 的/ 系统/ —/ —/ —/ TTPerf/ [/ 7/ ]/ ./ 有/ 一些/ 研究/ 关注/ 了/ 基于/ TTCN/ -/ 3/ 的/ 负载/ 测试/ 问题/ ,/ 文献/ [/ 5/ ]/ 研究/ 了/ 分布式/ 环境/ 中/ TTCN/ -/ 3/ 负载/ 测试/ 问题/ ./ 作者/ 指出/ TTCN/ -/ 3/ 具备/ 了/ 进行/ 负载/ 测试/ 的/ 能力/ ,/ 可以/ 通过/ 定义/ 并发/ 的/ 测试/ 构件/ 来/ 模拟/ 负载/ 场景/ ,/ 并/ 通过/ 物理/ 分布/ 的/ 测试/ 节点/ 来/ 执行/ 这些/ 构件/ 所/ 定义/ 的/ 行为/ ./ 但/ 在/ 该/ 文献/ 中/ ,/ 作者/ 的/ 主要/ 关注点/ 是/ 如何/ 对/ 异构/ 的/ 物理/ 测试/ 节点/ 进行/ 调度/ ,/ 从而/ 保证/ 硬件资源/ 的/ 利用率/ ,/ 而/ 并/ 没有/ 关注/ 负载/ 建模/ 的/ 问题/ ./ 文献/ [/ 6/ ]/ 也/ 研究/ 了/ TTCN/ -/ 3/ 负载/ 测试/ 中/ 的/ 调度/ 问题/ ./ 作者/ 认为/ 负载/ 测试/ 所/ 面临/ 的/ 挑战/ 之一/ 是/ 如何/ 利用/ 比/ 真实/ 系统/ 更少/ 的/ 资源/ 模拟出/ 期望/ 的/ 负载/ ./ 为此/ ,/ 提出/ 了/ 一种/ 基于/ 有限/ 状态机/ 理论/ 的/ 模型/ 与/ 算法/ ,/ 用于/ 优化/ 对/ “/ 虚拟/ 线程/ ”/ 的/ 调度/ ,/ 从而/ 提高/ 资源/ 利用率/ ./ 综上所述/ ,/ 目前/ 的/ TTCN/ -/ 3/ 性能/ 测试/ 研究/ 多/ 集中/ 在/ 对/ 语言/ 的/ 扩展/ 、/ 测试/ 系统/ 设计/ 、/ 针对/ 特定/ 系统/ 的/ 测试/ 方面/ ./ 对于/ 负载/ 建模/ 的/ 研究/ 相对/ 较少/ ./ 在/ 这些/ 研究所/ 提出/ 的/ 方法/ 中/ ,/ 负载/ 描述/ 还/ 需要/ 测试人员/ 通过/ 繁琐/ 的/ 手工/ 编码/ 实现/ ./ 而/ 如何/ 通过/ 模型/ 驱动/ 的/ 方式/ 提高/ TTCN/ -/ 3/ 负载/ 描述/ 和/ 生成/ 的/ 能力/ 及/ 自动化/ 程度/ 正是/ 本文/ 的/ 研究/ 重点/ 之一/ ./ 此外/ ,/ 上述/ 部分/ 研究/ 还/ 涉及/ 了/ 负载/ 产生/ 的/ 问题/ ,/ 提出/ 了/ 一些/ 用于/ 负载/ 测试/ 的/ TTCN/ -/ 3/ 系统/ 设计/ ./ 这为/ 本文/ 的/ 负载/ 控制点/ 设计/ 打下/ 了/ 基础/ ./ 但/ 这些/ 研究/ 多/ 是/ 针对/ 具体/ SUT/ ,/ 所/ 设计/ 的/ 负载/ 生成/ 方法/ 不/ 具备/ 通用性/ ,/ 也/ 无法/ 满足/ 模型/ 驱动/ 方法/ 对/ 负载/ 生成/ 提出/ 的/ 要求/ ./ 另一方面/ ,/ 负载/ 建模/ 是/ 传统/ 性能/ 测试/ 研究/ 中/ 的/ 一个/ 重要/ 问题/ ./ 特别/ 是/ 关于/ Web/ 系统/ 负载/ 模型/ 的/ 研究/ ,/ 目前/ 已经/ 涌现出/ 一定/ 数量/ 的/ 研究成果/ ./ Spec/ -/ Web99/ [/ 11/ ]/ 是/ 一套/ 针对/ Web/ 支撑/ 平台/ 的/ 性能/ 基准/ 测试/ ,/ 主要/ 用于/ 对/ 硬件平台/ 和/ Web/ 服务器/ 的/ 性能/ 进行/ 评价/ 与/ 比较/ ./ 该/ 测试/ 采用/ 了/ 一种/ 基于/ 资源/ 序列/ 的/ 负载/ 模型/ ,/ 将/ 负载/ 视作/ 对/ Web/ 系统/ 中/ 各类/ 资源/ 的/ 访问/ 及其/ 频度/ ,/ 在/ 测试/ 负载/ 产生/ 时/ ,/ 按照/ 访问/ 频度/ 的/ 大小/ ,/ 依次/ 选择/ 相应/ 的/ 资源/ 序列/ 作为/ 工作/ 负载/ ./ TPC/ -/ W/ 、/ WebStone/ 、/ Webbench/ 等/ 也/ 采取/ 了/ 与/ 之类/ 似的/ 思想/ [/ 1/ ]/ ./ 这些/ 方法/ 能够/ 从/ 整体/ 特征/ 方面/ 对/ SUT/ 的/ 工作/ 负载/ 进行/ 刻画/ ,/ 但/ 忽略/ 了/ 用户/ 的/ 具体/ 行为/ 对/ 整体/ 负载/ 的/ 影响/ ./ 为了/ 更好/ 地/ 刻画/ 用户/ 行为/ 特性/ ,/ 文献/ [/ 12/ ]/ 研究/ 了/ 使用/ CBMG/ (/ CustomerBehaviorModelGraph/ )/ 模型/ 刻画/ 负载/ 的/ 方法/ ./ 该/ 模型/ 从/ 用户/ 的/ 行为/ 特征/ 出发/ ,/ 将会话/ 模式/ 作为/ 负载/ 特性/ 刻画/ 的/ 主要/ 手段/ ,/ 一个/ 会话/ 模式/ 主要/ 由/ 3/ 个/ 特征/ 分量/ 组成/ :/ 会话/ 长度/ 、/ 会话/ 持续时间/ 、/ 会话/ 期间/ 访问/ 的/ 页面/ 类型/ ,/ 上述/ 特征/ 可/ 通过/ 对/ Web/ 应用服务器/ 的/ 日志/ 文件/ 进行/ 统计分析/ 而/ 得出/ ./ 文献/ [/ 16/ ]/ 则/ 从/ 用户/ 提交/ 表单/ 和/ 系统活动/ 之间/ 的/ 迁移/ 关系/ 入手/ ,/ 提出/ 了/ 一种/ 面向/ 表单/ 的/ 随机/ 模型/ ,/ 并/ 使用/ 该/ 模型/ 刻画/ Web/ 系统/ 负载/ ./ 该/ 模型/ 的/ 主要/ 特点/ 是/ 能够/ 描述/ 历史/ 活动/ 对/ 用户/ 行为/ 的/ 影响/ ./ 上述/ 负载/ 研究/ 分别/ 关注/ 了/ Web/ 系统/ 在/ 网络/ 和/ 用户/ 行为/ 两个/ 方面/ 的/ 特征/ ./ 但/ 对于/ 一个/ 真实/ 的/ 负载/ 而言/ ,/ 这些/ 方面/ 的/ 特征/ 既/ 具有/ 密切/ 的/ 联系/ 又/ 相互/ 补充/ ./ 因此/ ,/ 一个/ 更加/ 全面/ 的/ 负载/ 模型/ 应该/ 能够/ 从/ 多个/ 方面/ 来/ 描述/ 负载/ ,/ 从/ 整体/ 上/ 反映/ SUT/ 的/ 负载/ 情况/ ./ 为此/ ,/ 本文/ 提出/ 的/ 负载/ 模型/ 包括/ 了/ 一个/ 可/ 扩展/ 的/ 指标体系/ ,/ 并/ 支持/ 对/ 指标/ 之间/ 的/ 多种/ 约束/ 关系/ 进行/ 定义/ ./ 同时/ ,/ 为了/ 实现/ 对/ 多/ 指标/ 约束/ 下/ 的/ 负载/ 生成/ ,/ 本文/ 还/ 提出/ 了/ 控制点/ 规划/ 算法/ ,/ 以/ 支持/ 对多类/ 负载/ 指标/ 进行/ 协同/ 控制/ ./ 7/ 结束语/ 随着/ TTCN/ -/ 3/ 应用/ 范围/ 的/ 不断扩大/ ,/ 基于/ TTCN/ -/ 3/ 的/ 性能/ 测试/ 成为/ 了/ 一个/ 重要/ 的/ 问题/ ./ 但/ 目前/ TTCN/ -/ 3/ 在/ 描述/ 和/ 生成/ 性能/ 测试/ 所/ 需/ 的/ 负载/ 方面/ 存在/ 明显/ 的/ 不足/ ./ 本文/ 针对/ 这个/ 问题/ ,/ 提出/ 了/ 一种/ 模型/ 驱动/ 的/ TTCN/ -/ 3/ 负载/ 产生/ 方法/ ./ 该/ 方法/ 首先/ 建立/ 负载/ 指标/ 模型/ 以/ 描述/ 面向/ SUT/ 类型/ 的/ 负载/ 指标体系/ 和/ 指标/ 约束/ 关系/ ,/ 然后/ ,/ 通过/ 负载/ 剖面/ 模型/ 刻画/ 了/ 随/ 时间/ 变化/ 的/ 负载/ 场景/ ./ 所/ 建立/ 的/ 模型/ 能够/ 在/ 转换/ 算法/ 的/ 支持/ 下/ 转换/ 为/ 可/ 执行/ 的/ TTCN/ -/ 3/ 测试/ 系统/ ,/ 并/ 在/ 本文/ 提出/ 的/ 负载/ 控制点/ 的/ 支持/ 下/ 得以/ 执行/ ,/ 从而/ 模拟出/ 满足/ 模型/ 描述/ 的/ 负载/ 场景/ ./ 本文/ 通过/ 3/ 组/ 实验/ 对/ 所/ 提出/ 的/ 模型/ 的/ 描述/ 能力/ 和/ 负载/ 控制/ 方法/ 进行/ 了/ 验证/ ,/ 并/ 与/ 相关/ 方法/ 进行/ 了/ 对比/ ./ 在/ 今后/ 的/ 研究/ 中/ ,/ 我们/ 拟/ 从/ 两个/ 方面/ 进一步/ 完善/ 本文/ 提出/ 的/ 方法/ ./ 一方面/ 将/ 加强/ 负载/ 指标/ 模型/ 的/ 约束/ 表达能力/ 和/ 负载/ 剖面/ 模型/ 的/ 场景/ 刻画/ 能力/ ./ 在/ 本文/ 中/ ,/ 我们/ 主要/ 关注/ 的/ 是/ 一些/ 具有/ 确定/ 值/ 的/ 指标/ ,/ 下/ 一步/ 将/ 加强/ 对/ 随机/ 指标/ 及其/ 约束/ 的/ 建模/ ;/ 另一方面/ 将/ 继续/ 完善/ 控制点/ 的/ 设计/ 和/ 控制点/ 的/ 规划/ 算法/ ./ 主要/ 目标/ 是/ 通过/ 提高/ 控制点/ 的/ 控制精度/ 以及/ 控制/ 规划/ 的/ 合理性/ ,/ 使得/ 所/ 产生/ 的/ 负载/ 能够/ 更好/ 地/ 体现/ 测试人员/ 所/ 关注/ 的/ 真实/ 负载/ 的/ 特征/ ./ 

