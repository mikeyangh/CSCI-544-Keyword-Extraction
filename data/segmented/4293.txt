Page1/ 对/ 等/ 网络/ 中/ 一种/ 优化/ 的/ 副本/ 分布/ 方法/ 孙新/ 李庆洲/ 赵璞/ 王克祥/ 潘凡/ (/ 北京理工大学/ 计算机/ 学院/ 北京市/ 海量/ 语言/ 信息处理/ 与/ 云/ 计算/ 应用/ 工程技术/ 研究/ 中心/ 北京/ 100081/ )/ 摘要/ 数据/ 复制技术/ 是/ 一种/ 提高/ P2P/ 系统/ 中/ 数据/ 可靠性/ 和/ 可用性/ 的/ 常用/ 策略/ ./ 现有/ 复制/ 方法/ 大多/ 只/ 考虑/ 副本/ 数量/ ,/ 副本/ 数量/ 越多/ 就/ 越/ 能/ 提高/ 资源/ 访问/ 效率/ ,/ 但/ 采用/ 这样/ 的/ 数据/ 复制/ 方法/ 将会/ 带来/ 高昂/ 的/ 副本/ 一致性/ 维护/ 代价/ ./ 为/ 平衡/ 副本/ 一致性/ 维护/ 的/ 开销/ 和/ 多/ 副本/ 带来/ 的/ 访问/ 性能/ 提升/ 之间/ 的/ 关系/ ,/ 该文/ 提出/ 了/ 动态/ 副本/ 分布/ 方法/ ./ 文中/ 首先/ 给出/ 了/ 副本/ 目录/ 的/ 设计/ 和/ 副本/ 信息/ 的/ 获取/ 方法/ ,/ 能够/ 获得/ 某一/ 逻辑/ 资源/ 的/ 所有/ 副本/ 信息/ ./ 然后/ ,/ 根据/ 逻辑/ 资源/ 的/ 全局/ 副本/ 信息/ ,/ 对/ 访问/ 频率/ 高且/ 平均/ 响应/ 时间/ 长/ 的/ 数据/ 资源/ 进行/ 复制/ ,/ 并/ 给出/ 副本/ 数量/ 的/ 计算方法/ ./ 最后/ ,/ 根据/ 用户/ 访问/ 特征/ 和/ 节点/ 实时/ 带宽/ 等/ 信息/ 计算/ 放置/ 副本/ 的/ 最佳/ 地点/ ,/ 使/ 副本/ 分布/ 能够/ 适应/ 数据/ 访问/ 请求/ 和/ 网络带宽/ 的/ 动态变化/ ./ 模拟实验/ 结果显示/ ,/ 该/ 方法/ 能够/ 实现/ 全局/ 优化/ 的/ 副本/ 分布/ ,/ 以/ 少量/ 数据/ 副本/ 提升/ 资源/ 访问/ 的/ 性能/ ./ 关键词/ 对/ 等/ 网络/ ;/ 数据/ 复制/ ;/ 副本/ 分布/ ;/ 副本/ 放置/ ;/ 副本/ 数量/ ;/ 物/ 联网/ 1/ 引言/ 作为/ 一种/ 分布式/ 体系结构/ 模型/ ,/ 对/ 等/ 计算/ 模式/ (/ Peer/ -/ to/ -/ PeerComputing/ ,/ P2P/ )/ 强调/ 资源/ 的/ 全面/ 共享/ ,/ 无须/ 依赖/ 集中式/ 服务器/ 的/ 支持/ ,/ 实际/ 应用/ 非常/ 广泛/ ./ 在/ 基于/ 对/ 等/ 网络/ 的/ 分布式系统/ 中/ ,/ 数据/ 复制/ 是/ 提高/ 数据/ 可用性/ 和/ 数据/ 访问/ 性能/ 的/ 重要/ 技术/ ./ 通过/ 为/ 共享资源/ 提供/ 多个/ 数据/ 副本/ ,/ 可以/ 有效/ 减少/ 数据传输/ 时间/ 和/ 带宽/ 消耗/ ,/ 提高/ 数据/ 资源/ 的/ 访问/ 效率/ 和/ 系统/ 容错性/ ./ 数据/ 复制技术/ 在/ 很多/ 分布式系统/ 中/ 都/ 有/ 广泛应用/ ,/ 如/ 数据/ 网格/ [/ 1/ -/ 3/ ]/ 、/ P2P/ 系统/ [/ 4/ ]/ 、/ 云/ 存储系统/ [/ 5/ -/ 7/ ]/ 等/ ./ 现有/ 数据/ 复制技术/ 主要/ 包括/ 随机/ 放置/ 副本/ 的/ 策略/ [/ 8/ -/ 9/ ]/ 和/ 集中式/ 的/ 数据/ 复制/ 方法/ [/ 10/ -/ 12/ ]/ 等/ ./ 随机/ 方法/ 通常/ 在/ 查询/ 路径/ 的/ 每个/ 节点/ 上/ 创建/ 副本/ ,/ 或者/ 在/ 路径/ 的/ 两端/ 创建/ 副本/ ,/ 为/ 提高/ 数据/ 响应/ 时间/ ,/ 在/ 资源/ 搜索/ 过程/ 中/ 动态/ 、/ 后发/ 性/ 地/ 进行/ 数据/ 复制/ ,/ 通常/ 只/ 考虑/ 副本/ 的/ 数量/ ,/ 而/ 不/ 考虑/ 副本/ 位置/ 的/ 差异/ ./ 集中式/ 的/ 数据/ 复制/ 方法/ 实现/ 简单/ ,/ 适用/ 于/ 性能/ 高且/ 稳定/ 的/ 分布式系统/ ./ 另外/ ,/ 有些/ 数据/ 复制/ 方法/ 依据/ 特定/ 评价/ 标准/ ,/ 如/ 副本/ 利用率/ [/ 13/ ]/ 、/ 副本/ 访问/ 情况/ [/ 14/ -/ 15/ ]/ 等/ 进行/ 数据/ 复制/ ,/ 从/ 局部/ 信息/ 出发/ 、/ 在/ 特定/ 评价/ 标准/ 下/ 制定/ 数据/ 复制/ 策略/ ,/ 这/ 类/ 方法/ 扩展性/ 比较/ 差/ ,/ 不能/ 保证/ 副本/ 的/ 全局/ 优化/ ,/ 也/ 无法/ 跟踪/ 副本/ 的/ 利用/ 情况/ ./ 有些/ 研究者/ 将/ 工作/ 重点/ 放在/ 研究/ 副本/ 数量/ 的/ 问题/ 上/ [/ 16/ -/ 17/ ]/ ,/ 实质/ 是/ 在/ 给定/ 存储空间/ 限制/ 、/ 访问/ 频率/ 分布/ 和/ 数据/ 大小/ 分布/ 的/ 情况/ 下/ ,/ 求解/ 最优/ 数据/ 副本/ 分布/ ,/ 这/ 类/ 方法/ 更/ 适用/ 于/ 理论/ 研究/ ./ 此外/ 还/ 有些/ 工作/ 围绕/ 数据/ 复制/ 过程/ 中/ 的/ 副本/ 一致性/ 问题/ 展开/ 研究/ [/ 18/ ]/ ./ 在/ 实际/ P2P/ 系统/ 中/ ,/ 由于/ 节点/ 的/ 动态性/ 、/ 异构/ 性/ 以及/ 网络/ 实时/ 带宽/ 的/ 影响/ ,/ 不同/ 数据/ 副本/ 的/ 访问/ 代价/ 差异/ 很大/ ./ 数据/ 复制技术/ 需要/ 同时/ 考虑/ 副本/ 数量/ 和/ 副本/ 位置/ 这/ 两/ 方面/ 因素/ 来/ 优化/ 数据/ 访问/ 性能/ :/ (/ 1/ )/ 不同/ 的/ 数据/ 资源/ 所/ 需要/ 的/ 副本/ 数量/ 是/ 不同/ 的/ ,/ 副本/ 数量/ 越多/ 就/ 越/ 能/ 提高/ 资源/ 访问/ 效率/ ,/ 这是/ 显而易见/ 的/ ,/ 但/ 采用/ 这样/ 的/ 数据/ 复制/ 方法/ 将会/ 带来/ 高昂/ 的/ 副本/ 一致性/ 维护/ 代价/ ./ 对/ 热点/ 资源分配/ 多/ 的/ 副本/ 可以/ 更好/ 地/ 改进/ 资源/ 的/ 访问/ 性能/ ,/ 这/ 属于/ 副本/ 分配/ 问题/ ;/ (/ 2/ )/ 相同/ 的/ 数据/ 副本/ 放置/ 在/ 不同/ 节点/ 上/ ,/ 其/ 访问/ 性能/ 也/ 有/ 很大/ 不同/ ,/ 这/ 属于/ 副本/ 放置/ 问题/ ./ 在/ 实际/ 应用/ 中/ 资源/ 的/ 访问/ 请求/ 并/ 不是/ 平均/ 分布/ 的/ ,/ 数据/ 资源/ 的/ 访问/ 往往/ 呈现出/ 很/ 明显/ 的/ 局部性/ 特征/ ./ 副本/ 分布/ 应该/ 遵循/ 数据/ 访问/ 的/ 局部性/ 特征/ ,/ 从/ 全局/ 角度/ 、/ 根据/ 访问/ 请求/ 的/ 变化/ 和/ 网络/ 的/ 实时/ 通信/ 状况/ 实现/ 动态/ 副本/ 分布/ ./ 因此/ ,/ 数据/ 复制技术/ 需要/ 解决/ 的/ 是/ 如何/ 确定/ 副本/ 的/ 全局/ 分布/ 和/ 副本/ 数量/ ,/ 最大/ 程度/ 降低/ 逻辑/ 资源/ 的/ 全局/ 平均/ 访问/ 代价/ ./ 为/ 平衡/ 副本/ 一致性/ 维护/ 的/ 开销/ 和/ 多/ 副本/ 带来/ 的/ 访问/ 性能/ 提升/ 之间/ 的/ 关系/ ,/ 设计/ 全局/ 优化/ 的/ 副本/ 分布/ 方法/ 是/ 本文/ 工作/ 的/ 重点/ ./ 在/ 已有/ 研究/ 基础/ 上/ [/ 19/ ]/ ,/ 本文/ 进一步/ 给出/ 副本/ 数量/ 和/ 副本/ 位置/ 的/ 计算方法/ ,/ 提出/ 最小/ 访问/ 代价/ 的/ 数据/ 复制/ 策略/ (/ MinimumAccessCostbasedReplicationstrategy/ ,/ MACR/ )/ ./ 通过/ 计算/ 共享资源/ 的/ 全局/ 访问/ 代价/ ,/ 从/ 系统/ 全局/ 角度/ 以/ 少量/ 数据/ 副本/ 获得/ 平均/ 访问/ 延迟/ 最小/ 目标/ 下/ 的/ 副本/ 优化/ 分布/ ./ MACR/ 方法/ 首先/ 给出/ 了/ 副本/ 目录/ 的/ 设计/ 和/ 副本/ 信息/ 的/ 获取/ 方法/ ,/ 能够/ 获得/ 某一/ 逻辑/ 资源/ 的/ 所有/ 副本/ 信息/ ,/ 该/ 方法/ 适用/ 于/ 任何/ 覆盖/ 网络结构/ 的/ P2P/ 系统/ ;/ 然后/ ,/ 根据/ 数据/ 的/ 全局/ 访问/ 频率/ 和/ 平均/ 响应/ 时间/ 计算/ 副本/ 数量/ ;/ 为/ 获得/ 优化/ 的/ 副本/ 位置/ ,/ 引入/ 复制/ 因子/ 的/ 概念/ ,/ 根据/ 用户/ 访问/ 特征/ 和/ 节点/ 实时/ 带宽/ 等/ 信息/ 计算/ 放置/ 副本/ 的/ 最佳/ 地点/ ./ MACR/ 方法/ 能够/ 有/ 针对性/ 地/ 进行/ 主动/ 数据/ 复制/ ,/ 并/ 动态/ 地/ 适应/ 访问/ 请求/ 的/ 变化/ 和/ 网络通信/ 状况/ ./ 模拟实验/ 结果显示/ ,/ MACR/ 能够/ 实现/ 副本/ 的/ 优化/ 分布/ ,/ 在/ 提升/ 资源/ 访问/ 性能/ 提升/ 和/ 控制/ 副本/ 数量/ 之间/ 获得/ 良好/ 的/ 平衡/ ./ 2/ 相关/ 工作/ 数据/ 复制/ 的/ 核心/ 问题/ 在于/ 副本/ 数量/ 和/ 副本/ 位置/ 的/ 确定/ ./ 现有/ 复制/ 策略/ 大多/ 采用/ 随机/ 放置/ 策略/ ,/ 例如/ ,/ 全/ 分布/ 无/ 结构/ P2P/ 系统/ 中/ 的/ 复制/ 策略/ [/ 8/ ]/ 有/ 拥有者/ 备份/ 策略/ 、/ 随机/ 备份/ 策略/ 和/ 按/ 路径/ 备份/ 策略/ ./ 资源/ 请求/ 比率/ 相关/ 的/ 备份/ 策略/ [/ 9/ ]/ 根据/ 资源/ 被/ 请求/ 的/ 比率/ 来/ 决定/ 资源/ 备份/ 的/ 数目/ ,/ 包括/ 均衡/ 分配/ 、/ 成/ 比例/ 分配/ 和/ 平方根/ 分配/ 3/ 种/ 方式/ ,/ 但/ 由于/ 每个/ 资源/ 的/ 请求/ 比率/ 难以/ 正确/ 估计/ ,/ 在/ 实现/ 上/ 存在/ 难度/ ./ 文献/ [/ 11/ ]/ 给出/ 一种/ 集中式/ 的/ 方法/ 能够/ 减少/ 整个/ 数据文件/ 的/ 访问/ 延迟/ ,/ 并/ 给出/ 分布式/ 缓存/ 方法/ ./ 文献/ [/ 3/ ]/ 采用/ 启发式/ 副本/ 放置/ 算法/ 最小化/ 通信/ 代价/ 和/ 访问/ 延迟/ ,/ 但/ 该/ 方法/ 仅/ 孤立/ 考虑/ 每个/ 聚簇/ (/ cluster/ )/ 中/ 副本/ 的/ 数量/ 和/ 位置/ ,/ 没有/ 考虑/ 整个/ 分布式系统/ 内/ 副本/ 分布/ 问题/ ./ 文献/ [/ 12/ ]/ 给出/ 了/ 一种/ 在/ 云/ 计算环境/ 下/ 的/ 数据/ 分配/ 模型/ ,/ 考虑/ 了/ 存储/ 代价/ 、/ 计算/ 代价/ 、/ 延迟/ 和/ 带宽/ 4/ 个/ 因素/ ,/ 能够/ 根据/ 用户/ 需求/ 提供/ 带宽/ 或/ 访问/ 延迟/ 代价/ 最小/ 目标/ 下/ 的/ 最优/ 存储设备/ ,/ 该/ 方法/ 主要/ 局限性/ 在于/ 需要/ 依靠/ 云/ 服务提供商/ 提供/ 准确/ 的/ 全局/ 信息/ ./ 类似/ 的/ 还有/ 针对/ 数据/ 密集型/ 应用/ 的/ 资源/ Page3/ 放置/ 方法/ [/ 10/ ]/ 和/ 适用/ 于云/ 存储系统/ 的/ 副本/ 放置/ 模型/ CDRM/ [/ 5/ ]/ ./ 这些/ 集中式/ 的/ 方法/ 实现/ 简单/ ,/ 但/ 不/ 适于/ 实际/ 的/ 系统/ ./ EAD/ [/ 13/ ]/ 通过/ 选择/ 合适/ 的/ 查询/ 中转/ 节点/ 增加/ 频繁/ 访问/ 的/ 文件/ 副本/ 的/ 利用率/ ,/ 并/ 动态/ 适应/ 文件/ 的/ 流行/ 程度/ 和/ 节点/ 的/ 兴趣/ ./ LALW/ [/ 14/ ]/ 根据/ 历史/ 访问/ 记录/ 分配/ 不同/ 的/ 权重/ ,/ 最近/ 访问/ 的/ 数据/ 拥有/ 较大/ 的/ 权重/ ,/ 以此/ 为/ 依据/ 对/ 流行/ 的/ 数据文件/ 进行/ 复制/ ./ 这些/ 方法/ 仅/ 从/ 节点/ 的/ 局部/ 信息/ 出发/ 、/ 在/ 特定/ 评价/ 标准/ 下/ 制定/ 数据/ 复制/ 策略/ ,/ 扩展性/ 比较/ 差/ ,/ 不能/ 保证/ 副本/ 的/ 全局/ 优化/ ./ 在/ 分布式系统/ 环境/ 下/ ,/ 准确/ 估计/ 数据/ 资源/ 所/ 需/ 的/ 副本/ 数量/ 是/ 非常/ 重要/ 的/ ./ 一些/ 学者/ 从/ 求解/ 最优/ 副本/ 分布/ 的/ 角度/ 展开/ 研究/ 工作/ [/ 16/ -/ 17/ ]/ ./ 文献/ [/ 16/ ]/ 的/ 研究/ 结果表明/ ,/ 最优/ 搜索/ 性能/ 所/ 对应/ 的/ 副本/ 分布/ 是/ 比例/ 复制/ ;/ 若/ 查询/ 负载/ 最优/ ,/ 对应/ 的/ 副本/ 分布/ 是/ 平方根/ 复制/ ./ Cohen/ 和/ Shenker/ 认为/ [/ 9/ ]/ ,/ 为了/ 降低/ 平均/ 搜索/ 范围/ ,/ 每个/ 数据/ 的/ 副本/ 数量/ 正比/ 于/ 其/ 数据/ 大小/ ,/ 正比/ 于/ 其/ 访问/ 频率/ 的/ 平方根/ 时/ 平均/ 搜索/ 范围/ 将/ 最小/ ./ 而/ 文献/ [/ 17/ ]/ 针对/ 文献/ [/ 9/ ]/ 给出/ 的/ 结论/ ,/ 提出/ 不同/ 观点/ :/ 在/ 面向/ 搜索/ 范围/ 最小化/ 的/ 副本/ 数量/ 分布/ 中/ ,/ 每个/ 数据/ 的/ 副本/ 数量/ 应/ 反比/ 于/ 数据/ 大小/ 的/ 平方根/ ./ 这些/ 工作/ 仅/ 讨论/ 副本/ 密度/ 对/ 搜索/ 性能/ 的/ 影响/ ,/ 忽略/ 了/ 副本/ 位置/ 对/ 资源/ 访问/ 性能/ 的/ 影响/ ./ 基于/ 位置/ 信息/ 与/ 文件/ 流行/ 度/ 的/ 副本/ 管理/ 算法/ [/ 15/ ]/ 根据/ 文件/ 的/ 访问/ 频率/ ,/ 利用/ 类/ Zipf/ 分布/ 来/ 估计/ 副本/ 的/ 个数/ ,/ 该/ 方法/ 的/ 局限性/ 是/ 缺乏/ 副本/ 定位/ 机制/ ,/ 只能/ 在/ 假设/ 用户/ 请求/ 是/ 均匀分布/ 的/ 基础/ 上/ 依据/ 节点/ 局部/ 信息/ 计算/ 副本/ 数量/ ,/ 这/ 与/ 实际/ 应用/ 中/ 数据/ 访问/ 的/ 局部性/ 特征/ 并/ 不/ 一致/ ;/ 副本/ 放置/ 采用/ 的/ 原则/ 也/ 仅/ 是/ 将/ 数据/ 放置/ 在/ 距离/ 需要/ 的/ 用户/ 最近/ 的/ 节点/ 上/ ./ 综上所述/ ,/ 已有/ 的/ 数据/ 复制/ 方法/ 存在/ 以下/ 问题/ :/ (/ 1/ )/ 现有/ 方法/ 通常/ 假定/ 共享/ 的/ 数据/ 资源/ 是/ 静态/ 的/ 和/ 只读/ 的/ ,/ 单纯/ 追求/ 副本/ 数量/ 提高/ 资源/ 访问/ 性能/ ./ 但/ 对于/ 拥有/ 可/ 更新/ 数据/ 资源/ 的/ 分布式系统/ 来讲/ ,/ 采用/ 这样/ 的/ 数据/ 复制/ 方法/ 将会/ 带来/ 高昂/ 的/ 副本/ 一致性/ 维护/ 代价/ ,/ 而/ 当前/ 研究/ 很少/ 考虑/ 这个/ 问题/ ./ (/ 2/ )/ 由于/ 大规模/ 动态/ 环境/ 下/ 难以/ 拥有/ 全局/ 副本/ 信息/ ,/ 所以/ 目前/ 研究成果/ 多/ 是/ 基于/ 本地/ 信息/ 或/ 局部/ 信息/ ,/ 在/ 特定/ 评价/ 标准/ 下/ 制定/ 数据/ 复制/ 策略/ ,/ 不能/ 保证/ 全局/ 优化/ ,/ 扩展性/ 比较/ 差/ ./ (/ 3/ )/ 现有/ 方法/ 多数/ 只/ 考虑/ 副本/ 数量/ 上/ 的/ 差异/ ,/ 不/ 考虑/ 副本/ 位置/ 的/ 差异/ ./ 而/ 在/ 实际/ 动态/ 、/ 异构/ 的/ 分布式系统/ 中/ ,/ 访问/ 不同/ 副本/ 所/ 带来/ 的/ 访问/ 代价/ 差异/ 很大/ ,/ 因此/ ,/ 数据/ 复制技术/ 需要/ 同时/ 考虑/ 副本/ 数量/ 和/ 副本/ 位置/ 来/ 优化/ 数据/ 访问/ 性能/ ./ 本文/ 提出/ 的/ MACR/ 方法/ 能够/ 从/ 全局/ 角度/ 、/ 根据/ 访问/ 请求/ 的/ 变化/ 和/ 网络/ 实时/ 带宽/ 状况/ 进行/ 动态数据/ 复制/ ,/ 通过/ 数据/ 的/ 访问/ 频率/ 和/ 平均/ 响应/ 时间/ 动态/ 计算/ 副本/ 的/ 数目/ ,/ 优化/ 副本/ 位置/ ,/ 以/ 尽可能少/ 的/ 副本/ 数量/ 降低/ 资源/ 访问/ 时间/ ./ 3/ 基于/ 双向/ 链表/ 的/ 副本/ 目录/ 理论/ 上/ ,/ 只要/ 能够/ 拥有/ 数据/ 资源/ 在/ P2P/ 系统/ 内/ 的/ 全部/ 副本/ 信息/ ,/ 就/ 可以/ 制定/ 最优/ 的/ 数据/ 复制/ 策略/ ./ 问题/ 在于/ ,/ 分布式/ 异构/ 的/ 环境/ 中/ 节点/ 频繁/ 的/ 加入/ 和/ 退出/ ,/ 获得/ 数据/ 资源/ 的/ 所有/ 物理/ 副本/ 信息/ 是/ 非常/ 困难/ 的/ ./ 为了/ 能够/ 在/ 缺乏/ 全局/ 集中/ 的/ 副本/ 管理器/ 的/ 情况/ 下/ 获得/ 资源/ 的/ 全部/ 副本/ 信息/ ,/ 本文/ 设计/ 一种/ 基于/ 双向/ 链表/ 的/ 副本/ 目录/ 结构/ ,/ 逻辑/ 资源/ 的/ 副本/ 目录/ 与其/ 副本/ 所在/ 物理/ 节点/ 之间/ 形成/ 了/ 一个/ 正向/ 链表/ ,/ 可以/ 获得/ 每个/ 副本/ 的/ 具体/ 访问/ 情况/ ;/ 每个/ 副本/ 与/ 该/ 逻辑/ 资源/ 的/ 副本/ 目录/ 之间/ 的/ 反向/ 链表/ 可以/ 从/ 副本/ 快速/ 链接/ 到/ 逻辑/ 资源/ 的/ 副本/ 目录/ ,/ 获得/ 该/ 逻辑/ 资源/ 的/ 全部/ 副本/ 信息/ ./ 副本/ 目录/ 记录/ 副本/ 的/ 所有/ 访问信息/ ,/ 如/ 副本/ 所在位置/ 、/ 副本/ 访问/ 频率/ 和/ 副本/ 响应/ 时间/ 等/ ,/ 为/ 优化/ 副本/ 分布/ 策略/ 提供/ 依据/ ./ 基于/ 双向/ 链表/ 的/ 副本/ 目录/ 结构/ 是/ 定义/ 和/ 建立/ 在/ 覆盖/ 网络结构/ 之上/ 的/ ,/ 不/ 依赖于/ 具体/ 的/ 覆盖/ 网络结构/ ,/ 因此/ ,/ 适用/ 于/ 任何/ P2P/ 覆盖/ 网络结构/ ./ 3.1/ 副本/ 目录/ 的/ 结构/ 首先/ ,/ 对/ 副本/ 定位问题/ 给出/ 以下/ 形式化/ 定义/ ./ 定义/ 1/ ./ 系统/ 中/ 所有/ 共享/ 的/ 资源/ ,/ 包括/ 文件/ 、/ 数据库/ 、/ 数据表/ 等/ ,/ 都/ 可/ 抽象/ 表示/ 为/ 逻辑/ 资源/ (/ LogicalResource/ )/ ,/ 每个/ 逻辑/ 资源/ 具有/ 全局/ 唯一/ 的/ 逻辑/ 资源/ 名/ (/ LogicalResourceName/ ,/ LRN/ )/ ./ 定义/ 2/ ./ 每个/ 逻辑/ 资源/ 可以/ 有/ 一个/ 或/ 多个/ 物理/ 副本/ (/ PhysicalReplica/ )/ ,/ 简称/ 为/ 副本/ ./ 每个/ 副本/ 具有/ 全局/ 唯一/ 的/ 物理/ 副/ 本名/ (/ PhysicalReplicaName/ ,/ PRN/ )/ ./ 系统/ 中/ 首次/ 注册/ 的/ 资源/ 称为/ 该/ 逻辑/ 资源/ 的/ 正本/ (/ original/ )/ ./ 逻辑/ 资源/ lrName/ 的/ 所有/ 副本/ 的/ 集合/ 记做/ LR/ (/ lrName/ )/ =/ {/ pr1/ ,/ pr2/ ,/ …/ ,/ prn/ }/ ,/ 其中/ n/ 是/ 逻辑/ 资源/ lrName/ 的/ 副本/ 数量/ ,/ n/ / 1/ ./ 同一/ 逻辑/ 资源/ 的/ 各个/ 副本/ 的/ 逻辑/ 资源/ 名/ 相同/ ,/ 但/ 物理/ 副/ 本名/ PRN/ 不同/ ./ 网络/ 中/ 的/ 每个/ 节点/ 都/ 维护/ 一个/ 本地/ 副本/ 目录/ ./ 本地/ 副本/ 目录/ 保存/ 着/ 本地/ 拥有/ 的/ 共享资源/ 的/ 信息/ ,/ 包括/ 数据/ 资源/ 的/ 逻辑/ 资源/ 名/ LRN/ 、/ 对应/ 的/ 物理/ 副/ 本名/ Page4PRN/ 、/ 正本/ 或/ 副本/ 标识/ 等/ 信息/ ./ 这里/ ,/ 正本/ 可以/ 看作/ 是/ 特殊/ 的/ 副本/ ./ 下面/ ,/ 通过/ 描述/ 副本/ 目录/ 的/ 建立/ 过程/ 给出/ 副本/ 目录/ 的/ 结构设计/ ./ (/ 1/ )/ 当/ 节点/ 注册/ 一个/ 共享资源/ 时/ ,/ 副本/ 管理/ 服务/ 给/ 该/ 数据/ 资源分配/ 一个/ 逻辑/ 资源/ 名/ LRN/ ,/ 同时/ 分配/ 一个/ 物理/ 副/ 本名/ PRN/ ,/ 并/ 做/ “/ 正本/ ”/ 标识/ ;/ (/ 2/ )/ 动态创建/ 副本/ 时/ ,/ 副本/ 管理/ 服务/ 给/ 该/ 副本/ 分配/ 一个/ 物理/ 副/ 本名/ PRN/ ,/ 并/ 将/ 这个/ PRN/ 与/ 该/ 资源/ 的/ 逻辑/ 资源/ 名/ LRN/ 建立/ 映射/ ,/ 做/ “/ 副本/ ”/ 标识/ ,/ 记录/ 该/ 逻辑/ 资源/ 的/ 正本/ 信息/ ./ 同时/ ,/ 副本/ 管理/ 服务/ 将/ 这条/ 副本/ 信息/ 插入/ 到/ 正本/ 所在/ 的/ 副本/ 目录/ 中/ ./ 这种/ 副本/ 目录/ 结构/ 称为/ 双向/ 链表/ 的/ 副本/ 目录/ ./ 因此/ ,/ 在/ 正本/ 所在/ 的/ 副本/ 目录/ 中/ ,/ 即/ 逻辑/ 资源/ 的/ 副本/ 目录/ ,/ 正/ 、/ 副本/ 所在/ 物理/ 节点/ 之间/ 形成/ 了/ 一个/ 正向/ 链表/ ,/ 正向/ 链表/ 结构/ 提供/ 了/ 该/ 逻辑/ 资源/ 在/ 全局/ 范围/ 内/ 的/ 所有/ 副本/ 的/ 视图/ ,/ 在/ 副本/ 选择/ 时/ 可以/ 提供/ 全局/ 意义/ 下/ 的/ 最小/ 代价/ 副本/ ./ 每个/ 物理/ 副本/ 的/ 副本/ 目录/ 到/ 逻辑/ 资源/ 的/ 副本/ 目录/ 之间/ 的/ 反向/ 链表/ ,/ 可以/ 从/ 某/ 一副/ 本/ 快速/ 链接/ 到/ 逻辑/ 资源/ 的/ 副本/ 目录/ ,/ 便于/ 实现/ 副本/ 创建/ ./ 逻辑/ 资源/ 的/ 副本/ 目录/ 拥有/ 该/ 逻辑/ 资源/ 的/ 所有/ 物理/ 副本/ 的/ 相关/ 访问信息/ ,/ 它/ 构成/ 了/ 该/ 逻辑/ 资源/ 的/ 完整/ 的/ 副本/ 视图/ ,/ 能够/ 为/ 全局/ 优化/ 的/ 副本/ 分布/ 提供/ 充足/ 的/ 依据/ ./ 3.2/ 副本/ 目录/ 信息/ 的/ 链式/ 获取/ 方法/ 为了/ 获得/ 逻辑/ 资源/ 在/ 全局/ 范围/ 内/ 的/ 访问信息/ ,/ 需要/ 通过/ 副本/ 服务/ 获得/ 和/ 维护/ 副本/ 目录/ 信息/ ,/ 承担/ 副本/ 创建/ 和/ 管理/ 的/ 工作/ ./ 下面/ ,/ 在/ P2P/ 系统/ 的/ 覆盖/ 网络/ 基础/ 上/ 对/ 网络/ 模型/ 做/ 进一步/ 约定/ ,/ 确定/ 节点/ 之间/ 的/ 关系/ 、/ 明确/ 各类/ 节点/ 在/ 副本/ 管理/ 中/ 承担/ 的/ 职责/ :/ (/ 1/ )/ 确定/ 超级/ 节点/ ./ 超级/ 节点/ 由/ 功能/ 强/ 、/ 带宽/ 高/ 、/ 在线/ 时间/ 长/ 的/ 节点/ 承担/ ,/ 负责/ 数据/ 复制/ 和/ 副本/ 管理/ 等/ 工作/ ./ 其他/ 节点/ 称为/ 普通/ 节点/ ./ (/ 2/ )/ 每个/ 普通/ 节点/ 可以/ 同时/ 与/ 多个/ 超级/ 节点/ 相连/ ,/ 但/ 只能/ 选择/ 其中/ 1/ 个/ 超级/ 节点/ 作为/ 其父/ 节点/ ./ (/ 3/ )/ 每个/ 超级/ 节点/ 可以/ 同时/ 与/ 多个/ 超级/ 节点/ 相连/ ,/ 但/ 只能/ 选择/ 其中/ 1/ 个/ 或/ 0/ 个/ 超级/ 节点/ 作为/ 其父/ 节点/ ./ 没有/ 父/ 节点/ 的/ 超级/ 节点/ 称为/ 域/ 超级/ 节点/ ,/ 域/ 超级/ 节点/ 及其/ 所有/ 子/ 节点/ 形成/ 的/ 节点/ 集合/ 称为/ 域/ ./ (/ 4/ )/ 网络/ 中/ 所有/ 超级/ 节点/ 之间/ 的/ 父子关系/ 不能/ 形成/ 回路/ ./ 这里/ 给出/ 的/ 约束条件/ 并/ 没有/ 改变/ 系统/ 的/ 覆盖/ 网络结构/ ,/ 只是/ 在/ 覆盖/ 网络结构/ 之上/ 定义/ 了/ 节点/ 之间/ 的/ 父子关系/ ,/ 因此/ 适用/ 于/ 任何/ P2P/ 覆盖/ 网络结构/ ./ 在/ 广域网/ 范围/ 内/ 确定/ 域/ 超级/ 节点/ 比较/ 费时/ ,/ 并且/ 在/ 缺乏/ 集中/ 管理器/ 的/ 动态/ 分布式/ 环境/ 下/ ,/ 判断/ 超级/ 节点/ 之间/ 的/ 父子关系/ 是否/ 形成/ 回路/ 较/ 复杂/ ,/ 因此/ ,/ 在/ 实际/ 应用/ 中/ 可以/ 采用/ 自荐/ 或/ 预先/ 指派/ 的/ 方式/ 确定/ 超级/ 节点/ 和域/ 超级/ 节点/ ,/ 由域/ 超级/ 节点/ 负责/ 回路/ 的/ 判断/ ,/ 这种/ 方法/ 实现/ 简单/ 且/ 符合实际/ 应用/ 的/ 特点/ ./ 图/ 1/ (/ a/ )/ 显示/ 了/ 一个/ 任意/ 的/ P2P/ 覆盖/ 网络/ 模型/ ,/ 依据/ 上述/ 约束条件/ 确定/ 的/ 父子/ 节点/ 关系/ 如图/ 1/ (/ b/ )/ 中/ 箭头/ 所示/ ,/ 域/ 超级/ 节点/ A/ 和/ B/ 管理/ 的/ 域/ 如图/ 1/ (/ b/ )/ 中/ 虚线/ 所示/ ./ 为/ 避免/ 单点/ 失效/ 问题/ ,/ 实际/ 应用/ 中/ 还/ 需要/ 提供/ 域/ 超级/ 节点/ 的/ 冗余/ 备份/ 机制/ ,/ 实现/ 节点/ 的/ 失效恢复/ ./ 对于/ 超级/ 节点/ 来讲/ ,/ 本地/ 副本/ 目录/ 除了/ 保存/ 本地/ 拥有/ 的/ 共享资源/ 的/ 信息/ 之外/ ,/ 还/ 包括/ 它/ 的/ 子/ 节点/ 的/ 副本/ 目录/ 信息/ ./ 节点/ 在/ 注册/ 共享资源/ 时/ ,/ 如果/ 这个/ 节点/ 是/ 超级/ 节点/ ,/ 则/ 副本/ 管理/ 服务/ 将/ 这个/ 新/ 的/ 副本/ 数据/ 插入/ 到/ 该/ 节点/ 的/ 本地/ 副本/ 目录/ 中/ ,/ 否则/ 插入/ 该/ 节点/ 的/ 父/ 节点/ 的/ 副本/ 目录/ 中/ ./ 按照/ 这种/ 副本/ 信息/ 的/ 收集/ 和/ 获取/ 方法/ ,/ 逻辑/ 资源/ 的/ 所有/ 访问/ 情况/ 都/ 会/ 记录/ 到/ 对应/ 的/ 副本/ 目录/ 中/ ,/ 包括/ 哪个/ 节点/ 发起/ 的/ 请求/ 、/ 访问/ 了/ 哪个/ 物理/ 副本/ 、/ 资源/ 实际/ 响应/ 的/ 时间/ 、/ 节点/ 的/ 实时/ 网络带宽/ 以及/ 节点/ 上/ 的/ 等候/ 队列/ 长度/ 等/ ./ 超级/ 节点/ 负责/ 本地/ 正本/ 资源/ 和子/ 节点/ 中/ 普通/ 节点/ 的/ 正本/ 资源/ 的/ 数据/ 复制/ ,/ 统计/ 资源/ 在/ 全局/ 范围/ 内/ 的/ 访问/ 情况/ ./ 因为/ 每个/ 普通/ 节点/ 只有/ 一个/ 父/ 节点/ ,/ 所以/ 每个/ 超级/ 节点/ 负责管理/ 的/ 共享资源/ 之间/ 没有/ 交/ Page5/ 集/ ,/ 不会/ 出现/ 同一/ 逻辑/ 资源/ 的/ 副本/ 由/ 多个/ 超级/ 节点/ 管理/ 的/ 情况/ ./ 域/ 超级/ 节点/ 负责/ 统计/ 本域/ 内/ 节点/ 对/ 某/ 一/ 逻辑/ 资源/ 的/ 访问/ 频率/ 和/ 访问/ 代价/ 等/ 信息/ ./ 因为/ 每个/ 超级/ 节点/ 只能/ 有/ 一个/ 父/ 节点/ 或/ 没有/ 父/ 节点/ ,/ 因此/ ,/ 域和域/ 之间/ 的/ 节点/ 没有/ 交集/ ,/ 不会/ 存在/ 某一/ 逻辑/ 资源/ 的/ 访问/ 情况/ 被/ 重复/ 统计/ 的/ 现象/ ./ 4/ 全局/ 优化/ 的/ 副本/ 分布/ 方法/ 最小/ 访问/ 代价/ 的/ 数据/ 复制/ 方法/ MACR/ 的/ 主要/ 思想/ 是/ :/ 首先/ ,/ 根据/ 逻辑/ 资源/ 的/ 全局/ 访问/ 代价/ 确定/ 是否/ 创建/ 副本/ ;/ 然后/ ,/ 对于/ 需要/ 创建/ 副本/ 的/ 逻辑/ 资源/ ,/ 统计/ 不同/ 域/ 内/ 的/ 节点/ 对/ 该/ 资源/ 的/ 访问/ 代价/ 和/ 频率/ ,/ 在/ 平均/ 响应/ 时间/ 大的域/ 内/ 创建/ 副本/ 会/ 最大/ 程度/ 减少/ 逻辑/ 资源/ 的/ 平均/ 响应/ 时间/ ,/ 并/ 给出/ 副本/ 数量/ 和/ 副本/ 位置/ 的/ 计算方法/ ./ 从/ 系统/ 全局/ 角度/ 利用/ 较少/ 的/ 副本/ 数目/ 降低/ 资源/ 访问/ 时间/ ,/ 实现/ 全局/ 优化/ 的/ 副本/ 分布/ ./ 4.1/ 副本/ 缺乏/ 资源/ 在/ 广域网/ 环境/ 中/ 分布/ 着/ 数量/ 庞大/ 的/ 数据/ 资源/ ,/ 如果/ 不/ 加/ 限制/ 地/ 对/ 每个/ 资源/ 进行/ 复制/ 会/ 造成/ 存储空间/ 的/ 巨大/ 浪费/ ./ MACR/ 方法/ 以/ 降低/ 逻辑/ 资源/ 的/ 全局/ 访问/ 代价/ 为/ 目的/ ,/ 综合/ 考虑/ 数据/ 访问/ 频率/ 、/ 节点/ 负载/ 和/ 实时/ 带宽/ 等/ 因素/ ,/ 对/ 访问/ 频率/ 高且/ 平均/ 响应/ 时间/ 长/ 的/ 数据/ 资源/ 进行/ 复制/ ./ 引入/ 记号/ :/ 对于/ 逻辑/ 资源/ LRj/ ,/ 其/ 物理/ 副本/ 记做/ PR0/ ,/ PR1/ ,/ …/ ,/ PRn/ ,/ 物理/ 副本/ 所在/ 的/ 节点/ 记做/ P0/ ,/ P1/ ,/ …/ ,/ Pn/ ,/ 其中/ n/ 是/ 逻辑/ 资源/ LRj/ 的/ 副本/ 数量/ ./ 下面/ 给出/ 相关/ 定义/ ./ 定义/ 3/ ./ 在/ 单位/ 时间/ 内/ ,/ 访问/ 逻辑/ 资源/ LRj/ 副本/ 的/ 次数/ 与/ 副本/ 数量/ 的/ 比/ ,/ 称为/ 逻辑/ 资源/ LRj/ 的/ 访问/ 频率/ (/ AccessFrequency/ ,/ AF/ )/ ,/ 记作/ AFj/ ./ 计算方法/ 如式/ (/ 1/ )/ 所示/ :/ 其中/ ,/ Timej/ ,/ i/ 是/ 单位/ 时间/ 内/ 访问/ 逻辑/ 资源/ LRj/ 的/ 物理/ 副本/ PRi/ 的/ 次数/ ,/ n/ 是/ 逻辑/ 资源/ LRj/ 的/ 副本/ 数量/ ./ 如果/ 逻辑/ 资源/ LRj/ 的/ 访问/ 频率/ AFj/ 大于/ 预先/ 给定/ 的/ 阈值/ ω/ AF/ ,/ 称/ 逻辑/ 资源/ LRj/ 为/ 热点/ 资源/ ./ 这里/ ,/ 用/ 访问/ 逻辑/ 资源/ LRj/ 所有/ 副本/ 的/ 总/ 次数/ 与/ 副本/ 数量/ 之/ 比/ 计算/ 逻辑/ 资源/ 的/ 访问/ 频率/ ,/ 强调/ 了/ 副本/ 的/ 平均/ 利用/ 情况/ ./ 如果/ 某个/ 逻辑/ 资源/ 的/ 访问/ 次数/ 很/ 高/ ,/ 但/ 其/ 副本/ 数量/ 也/ 很多/ ,/ 那么/ 这个/ 资源/ 就/ 不是/ 热点/ 资源/ ./ 定义/ 4/ ./ 从/ 资源/ 请求/ 方/ 提出/ 资源/ 访问/ 请求/ 的/ 时刻/ 开始/ ,/ 到/ 资源/ 请求/ 方/ 接收/ 到/ 全部/ 数据/ 为止/ 经过/ 的/ 时间/ 记/ 为/ 资源/ 响应/ 时间/ (/ ResponseTime/ ,/ RT/ )/ ./ 定义/ 5/ ./ 单位/ 时间/ 内/ ,/ 访问/ LRj/ 所有/ 副本/ 的/ 响应/ 时间/ 之/ 和/ 与/ 访问/ 次数/ 之/ 比/ ,/ 称为/ 逻辑/ 资源/ LRj/ 的/ 平均/ 响应/ 时间/ (/ AverageResponseTime/ ,/ ART/ )/ ,/ 记作/ ARTj/ ./ 计算方法/ 如式/ (/ 2/ )/ 所示/ :/ 其中/ ,/ Timej/ 表示/ 单位/ 时间/ 内/ 资源/ LRj/ 所有/ 副本/ 被/ 访问/ 的/ 次数/ ./ RTk/ 表示/ 单位/ 时间/ 内/ 第/ k/ 次访问/ 逻辑/ 资源/ LRj/ 某/ 副本/ 的/ 响应/ 时间/ ./ 需要/ 创建/ 副本/ 的/ 逻辑/ 资源/ 首先/ 应该/ 满足/ 是/ 热点/ 资源/ ,/ 对/ 热点/ 资源/ 创建/ 副本/ 可以/ 在/ 很大/ 程度/ 上/ 减少/ 数据/ 访问/ 时间/ 、/ 提高/ 系统/ 整体/ 性能/ ./ 对于/ 每个/ 热点/ 资源/ ,/ 还/ 需要/ 进一步/ 判断/ 资源/ 的/ 平均/ 响应/ 时间/ ,/ 才能/ 确定/ 该/ 资源/ 是否/ 需要/ 创建/ 副本/ ./ 资源/ 的/ 响应/ 时间/ 取决于/ 很多/ 因素/ ,/ 包括/ 带宽/ 、/ 节点/ 性能/ 等/ ,/ 也/ 包括/ 数据/ 资源/ 的/ 大小/ ./ 物理/ 尺寸/ 越大/ 的/ 逻辑/ 资源/ ,/ 平均/ 响应/ 时间/ 有/ 可能/ 也/ 大/ ,/ 但/ 这/ 并/ 不/ 说明/ 该/ 资源/ 的/ 副本/ 数量/ 不够/ ,/ 所以/ ,/ 还/ 需要/ 引入/ 单位/ 平均/ 响应/ 时间/ 来/ 判断/ 逻辑/ 资源/ 是否/ 需要/ 创建/ 副本/ ./ 定义/ 6/ ./ 对于/ 热点/ 资源/ LRj/ ,/ 如果/ 则/ 称/ 逻辑/ 资源/ LRj/ 为/ 副本/ 缺乏/ 资源/ (/ ReplicaScarceResource/ )/ ./ ω/ RT/ 是/ 预先/ 给定/ 的/ 阈值/ ,/ filesizej/ 是/ 逻辑/ 资源/ LRj/ 物理/ 文件大小/ ./ 需要/ 为/ 副本/ 缺乏/ 资源/ LRj/ 创建/ 副本/ ./ 这里/ ,/ 同时/ 使用/ 两个/ 评判/ 指标/ 即/ 访问/ 频率/ 高/ 和/ 单位/ 平均/ 响应/ 时间/ 长/ 作为/ 是否/ 需要/ 创建/ 副本/ 的/ 判断/ 依据/ ,/ 而/ 不是/ 单一/ 使用/ 某/ 一个/ 评判/ 指标/ ./ 理由/ 是/ :/ 访问/ 频率/ 低/ 的/ 数据/ 资源/ 自然/ 不/ 需要/ 创建/ 过多/ 的/ 副本/ ;/ 对于/ 访问/ 频率/ 高/ 的/ 资源/ ,/ 如果/ 其/ 单位/ 平均/ 响应/ 时间/ 比较/ 小/ ,/ 说明/ 在/ 整个/ 系统/ 内/ 访问/ 该/ 资源/ 的/ 代价/ 并不大/ ,/ 也/ 不/ 需要/ 创建/ 新/ 的/ 副本/ ./ 因此/ ,/ 对/ 访问/ 频率/ 高/ 并且/ 单位/ 平均/ 响应/ 时间/ 长/ 的/ 逻辑/ 资源/ 进行/ 副本/ 创建/ 是/ 合理/ 的/ ./ 4.2/ 全局/ 副本/ 数量/ (/ 1/ )/ 确定/ 缺乏/ 副本/ 的/ 域/ ./ 基于/ 双向/ 链表/ 的/ 副本/ 目录/ 结构/ 能够/ 保证/ 负责管理/ 某一/ 逻辑/ 资源/ 的/ 超级/ 节点/ 拥有/ 该/ 逻辑/ 资源/ 的/ 所有/ 副本/ 信息/ ,/ 包括/ 何时/ 、/ 从/ 哪个/ 域/ 的/ 哪个/ 节点/ 发出/ 过/ 请求/ 、/ 访问/ 了/ 哪个/ 物理/ 副本/ 以及/ 响应/ 时间/ 等等/ ./ Page6/ 对于/ 每个/ 需要/ 创建/ 副本/ 的/ 逻辑/ 资源/ LRj/ ,/ 超级/ 节点/ P/ 根据/ 副本/ 目录/ 中/ 记录/ 的/ 副本/ 访问/ 情况/ ,/ 计算/ 全局/ 范围/ 内/ 逻辑/ 资源/ LRj/ 的/ 平均/ 响应/ 时间/ ARTj/ 以及/ 每个/ 域/ (/ 记做/ Dk/ )/ 内/ 节点/ 访问/ 逻辑/ 资源/ LRj/ 的/ 域/ 平均/ 响应/ 时间/ ARTj/ ,/ Dk/ ,/ 计算方法/ 如式/ (/ 4/ )/ 所示/ ./ 其中/ ,/ RTj/ ,/ i/ 是域/ Dk/ 内/ 节点/ Pi/ 访问/ 资源/ LRj/ 的/ 响应/ 时间/ ,/ Timej/ ,/ Dk/ 是/ 单位/ 时间/ 内域/ Dk/ 内/ 所有/ 节点/ 访问/ 数据/ 资源/ LRj/ 的/ 次数/ ./ 如果/ ARTj/ ,/ Dk/ >/ ARTj/ ,/ 则/ 称域/ Dk/ 为/ 副本/ 缺乏/ 域/ ./ 域/ 内/ 节点/ 请求/ 该/ 资源/ 的/ 平均/ 响应/ 时间/ (/ 即域/ 平均/ 响应/ 时间/ )/ 能够/ 综合/ 反映/ 该域/ 对/ 资源/ LRj/ 的/ 缺乏/ 程度/ 和/ 访问/ 热度/ ./ 如果/ 某个/ 域/ 平均/ 响应/ 时间/ 大于/ 逻辑/ 资源/ LRj/ 的/ 平均/ 响应/ 时间/ ,/ 说明/ 相对/ 系统/ 内/ 其他/ 区域/ 的/ 节点/ ,/ 域/ Dk/ 内该/ 资源/ 的/ 副本/ 数量/ 过少/ ,/ 需要/ 在域/ Dk/ 内/ 增加/ 资源/ LRj/ 的/ 副本/ ./ 在/ 平均/ 响应/ 时间/ 大的域/ 内/ 创建/ 副本/ ,/ 会/ 最大/ 程度/ 减少/ 逻辑/ 资源/ LRj/ 在/ 全局/ 范围/ 内/ 的/ 平均/ 响应/ 时间/ ./ (/ 2/ )/ 在/ 副本/ 缺乏/ 域/ 内/ 确定/ 创建/ 的/ 副本/ 数量/ ./ 根据/ 域/ Dk/ 内/ 所有/ 请求/ 资源/ LRj/ 的/ 实际/ 响应/ 时间/ 和/ 预期/ 响应/ 时间/ 计算所/ 需/ 的/ 副本/ 数量/ ./ 设/ 资源/ LRj/ 有/ count/ 个/ 副本/ ,/ 需要/ 新增/ 的/ 副本/ 数量/ 记/ 为/ Δ/ count/ ./ 考虑/ 到/ 增加/ 副本/ 数量/ 的/ 目的/ 是/ 降低/ 资源/ 的/ 平均/ 访问/ 时间/ ARTj/ ,/ 使/ ARTj/ 能够/ 接近/ 给定/ 的/ 期望值/ ω/ ART/ ./ 如果/ 期望值/ ω/ ART/ 与/ 实际/ ARTj/ 相差/ 比较/ 大/ ,/ 就/ 需要/ 创建/ 更/ 多/ 的/ 副本/ 数量/ 以/ 降低/ ARTj/ ./ 因此/ ,/ 新增/ 副本/ 的/ 数量/ 应该/ 满足/ 式/ (/ 5/ )/ :/ 由式/ (/ 5/ )/ 可以/ 推导/ 出/ Δ/ count/ 的/ 计算方法/ ,/ 如式/ (/ 6/ )/ 所示/ :/ 实际/ 应用/ 中/ ω/ ART/ 的/ 取值/ 可以/ 根据/ 需要/ 设定/ 为/ 最小/ 响应/ 时间/ 的/ 2/ 倍/ 或/ 平均/ 响应/ 时间/ 的/ 1/ // 2/ 倍/ 等/ ./ 通过/ 域/ 内/ 的/ 访问/ 频率/ 和/ 平均/ 响应/ 时间/ 计算/ 副本/ 的/ 数量/ ,/ 能够/ 使/ 副本/ 分布/ 动态/ 适应/ 数据/ 访问/ 请求/ 的/ 变化/ 和/ 实时/ 网络/ 状况/ ,/ 在/ 提高/ 资源/ 响应/ 时间/ 和/ 减少/ 副本/ 数量/ 之间/ 获得/ 有效/ 平衡/ ./ 4.3/ 副本/ 放置/ 明确/ 需要/ 在域/ Dk/ 内/ 创建/ Δ/ count/ 个/ 副本/ 后/ ,/ 接下来/ 就/ 需要/ 确定/ 放置/ 副本/ 的/ 位置/ ./ 下面/ ,/ 给出/ 复制/ 因子/ 的/ 定义/ ,/ 用/ 复制/ 因子/ 衡量/ 节点/ 适合/ 放置/ 副本/ 的/ 程度/ ./ 定义/ 7/ ./ 单位/ 时间/ 内/ ,/ 节点/ 响应/ 的/ 请求/ 消息/ 数/ 与/ 所有/ 请求/ 的/ 消息/ 数之比/ 称为/ 节点/ 服务/ 率/ (/ ServiceRatio/ ,/ SR/ )/ ./ 节点/ 的/ 服务/ 率/ 可以/ 衡量/ 节点/ 的/ 综合/ 服务/ 能力/ ,/ 包括/ 节点/ 的/ 性能/ 、/ 动态性/ 和/ 可靠性/ ./ 定义/ 8/ ./ 复制/ 因子/ (/ ReplicationFactor/ ,/ RF/ )/ 是/ 用来/ 衡量/ 节点/ 适宜/ 放置/ 副本/ 程度/ 的/ 参数/ ./ 给定/ 节点/ P/ ,/ 适宜/ 放置/ 资源/ LRj/ 副本/ 的/ 程度/ 即/ 复制/ 因子/ 的/ 计算方法/ 如式/ (/ 7/ )/ 所示/ ./ 其中/ ,/ SR/ 是/ 节点/ P/ 的/ 服务/ 率/ ,/ Storage/ 是/ 节点/ P/ 的/ 存储空间/ ,/ filesizej/ 是/ 资源/ LRj/ 物理/ 文件/ 的/ 大小/ ,/ AvgBW/ 是/ 节点/ P/ 的/ 平均/ 可用/ 带宽/ ./ 可用/ 带宽/ 可/ 通过/ 节点/ P/ 的/ 网络带宽/ 与/ 当前/ 节点/ P/ 上/ 的/ 等候/ 队列/ 长度/ 之/ 比/ 进行/ 计算/ ,/ 等候/ 队列/ 长度/ 越大/ ,/ 则/ 可用/ 带宽/ 越少/ ./ 在/ 广域网/ 范围/ 内/ ,/ 由于/ 网络带宽/ 限制/ 以及/ 节点/ 的/ 动态性/ 等/ 特点/ ,/ 网络/ 传输/ 延迟/ 成为/ 影响/ 数据/ 访问/ 性能/ 的/ 重要/ 指标/ ,/ 相比之下/ 节点/ 本身/ 的/ CPU/ 和/ I/ // O/ 的/ 处理/ 时间/ 可以/ 忽略不计/ ./ 因此/ ,/ 复制/ 因子/ 与/ 节点/ 服务/ 率/ 、/ 节点/ 可用/ 存储空间/ 、/ 节点/ 平均/ 可用/ 带宽/ 以及/ 节点/ Pi/ 上/ 的/ 平均/ 等候/ 队列/ 长度/ 成正比/ ,/ 与/ 副本/ 尺寸/ 成反比/ ./ 复制/ 因子/ 的/ 大小/ 代表/ 着/ 该/ 节点/ 适宜/ 放置/ 该/ 副本/ 的/ 程度/ ,/ 复制/ 因子/ 的/ 值/ 越/ 大/ ,/ 表明/ 该/ 节点/ 越/ 适合/ 放置/ 这个/ 副本/ ./ 因为/ 超级/ 节点/ P/ 并/ 不/ 拥有/ 域/ Dk/ 内/ 所有/ 节点/ 的/ 相关/ 信息/ ,/ 所以/ 域/ Dk/ 内/ 副本/ 位置/ 的/ 计算/ 由域/ 超级/ 节点/ 完成/ ./ 域/ Dk/ 内/ 没有/ 资源/ LRj/ 的/ 节点/ 属于/ 副本/ 创建/ 的/ 待/ 选/ 地点/ ,/ 域/ 超级/ 节点/ 计算/ 逻辑/ 资源/ LRj/ 放置/ 在/ 每个/ 待选/ 节点/ 上/ 的/ 复制/ 因子/ RFj/ ,/ 选择/ Δ/ count/ 个/ 具有/ 最大/ 复制/ 因子/ 的/ 节点/ 作为/ 副本/ 创建/ 地点/ ./ 4.4/ MACR/ 算法/ 描述/ MACR/ 算法/ 主要/ 包括/ :/ 确定/ 需要/ 创建/ 副本/ 的/ 逻辑/ 数据/ 资源/ 、/ 确定/ 副本/ 缺乏/ 域/ 以及/ 确定/ 副本/ 数量/ 和/ 放置/ 地点/ ./ 超级/ 节点/ P/ 管理/ 的/ 所有/ 逻辑/ 资源/ 记做/ LR0/ ,/ LR1/ ,/ …/ ,/ LRn/ ,/ 这些/ 逻辑/ 资源/ 的/ 所有/ 副本/ 信息/ 保存/ 在/ 节点/ P/ 的/ 本地/ 副本/ 目录/ 中/ ./ 超级/ 节点/ 周期性/ 的/ 执行/ MACR/ 算法/ ,/ 实现/ 该/ 节点/ 负责管理/ 的/ 逻辑/ 资源/ 的/ 动态/ 副本/ 分布/ ./ MACR/ 算法/ 步骤/ 如下/ :/ 1/ ./ 超级/ 节点/ P/ 计算/ 逻辑/ 资源/ LRj/ (/ 0/ / j/ </ n/ )/ 的/ 访问/ 频率/ AFj/ ,/ 如果/ AFj/ 大于/ 预先/ 给定/ 的/ 阈值/ ω/ AF/ ,/ 那么/ ,/ 逻辑/ 资源/ Page7LRj/ 就是/ 热点/ 资源/ ./ 热点/ 资源/ 表示/ 该/ 逻辑/ 资源/ 的/ 单位/ 副本/ 在/ 过去/ 的/ 一段时间/ 内/ 被/ 频繁/ 访问/ ,/ 可能/ 需要/ 创建/ 副本/ ./ 2/ ./ 对于/ 每个/ 热点/ 资源/ ,/ 计算/ 它们/ 的/ 单位/ 平均/ 响应/ 时间/ ./ 如果/ 热点/ 资源/ LRj/ 的/ 单位/ 平均/ 响应/ 时间/ 大于/ 预先/ 给定/ 的/ 阈值/ ω/ RT/ ,/ 那么/ ,/ 需要/ 对/ 逻辑/ 资源/ LRj/ 创建/ 副本/ ./ 用/ 集合/ LR/ 表示/ 所有/ 需要/ 创建/ 副本/ 的/ 逻辑/ 资源/ ./ 3/ ./ 对于/ 每个/ 需要/ 创建/ 副本/ 的/ 资源/ LRj/ ∈/ LR/ ,/ 节点/ P/ 统计/ 单位/ 时间/ 内/ 对/ 逻辑/ 资源/ LRj/ 的/ 所有/ 访问/ 请求/ ./ 如果/ 域/ Dk/ 内/ 节点/ 访问/ 资源/ LRj/ 的/ 平均/ 响应/ 时间/ 大于/ 逻辑/ 资源/ LRj/ 的/ 平均/ 响应/ 时间/ ,/ 则/ 需要/ 在域/ Dk/ 内/ 创建/ 副本/ ./ 用/ 集合/ D/ 表示/ 需要/ 创建/ LRj/ 副本/ 的/ 所有/ 域/ ./ 4/ ./ 对于/ 每/ 一个/ 域/ Dk/ ∈/ D/ ,/ 依次/ 确定/ 需要/ 创建/ 的/ 副本/ 数量/ 和/ 所有/ 适合/ 放置/ 副本/ 的/ 节点/ ./ 4.1/ ./ 超级/ 节点/ P/ 根据/ 本地/ 副本/ 目录/ 中/ 记录/ 的/ 数据/ 资源/ LRj/ 的/ 所有/ 副本/ 的/ 访问/ 情况/ ,/ 统计/ 单位/ 时间/ 内/ 逻辑/ 资源/ LRj/ 的/ 副本/ 在域/ Dk/ 内/ 的/ 平均/ 响应/ 时间/ ,/ 依据/ 式/ (/ 6/ )/ 计算/ 域/ Dk/ 内/ 所/ 需/ 副本/ 数量/ Δ/ countk/ ;/ 4.2/ ./ 域/ Dk/ 的/ 域/ 超级/ 节点/ 在域/ Dk/ 内/ 确定/ Δ/ countk/ 个/ 适合/ 放置/ 副本/ 的/ 节点/ ./ 域/ Dk/ 内/ 没有/ 资源/ LRj/ 的/ 节点/ 属于/ 副本/ 创建/ 的/ 待/ 选/ 地点/ ,/ 域/ 超级/ 节点/ 依据/ 式/ (/ 7/ )/ 计算/ 逻辑/ 资源/ LRj/ 放置/ 在/ 每个/ 待选/ 节点/ 上/ 的/ 复制/ 因子/ RF/ ,/ 选择/ Δ/ countk/ 个/ 具有/ 最小/ 复制/ 因子/ 的/ 节点/ 作为/ 副本/ 创建/ 地点/ ,/ 并/ 将/ 节点/ 地址/ 返回/ 给/ 超级/ 节点/ P/ ./ 5/ ./ 对于/ 每/ 一个/ 域/ Dk/ ∈/ D/ ,/ 依次/ 确定/ 需要/ 创建/ 的/ 副本/ 数量/ 和/ 所有/ 适合/ 放置/ 副本/ 的/ 节点/ ./ 6/ ./ 在/ 指定/ 节点/ 上/ 创建/ 数据/ 副本/ ./ MACR/ 算法/ 的/ 核心思想/ 是/ 通过/ 资源/ 全局/ 范围/ 内/ 的/ 平均/ 响应/ 时间/ 和/ 频率/ 计算/ 副本/ 的/ 数量/ 和/ 位置/ ,/ 在/ 提高/ 资源/ 响应速度/ 和/ 副本/ 开销/ 之间/ 获得/ 有效/ 平衡/ ./ MACR/ 算法/ 的/ 合理性/ 分析/ 如下/ :/ (/ 1/ )/ 逻辑/ 资源/ 正本/ 所在/ 的/ 副本/ 目录/ 记录/ 该/ 逻辑/ 资源/ 的/ 所有/ 副本/ 信息/ ,/ 因此/ 能够/ 获得/ 某一/ 逻辑/ 资源/ 在/ 全局/ 范围/ 内/ 的/ 访问/ 情况/ ./ 逻辑/ 资源/ 的/ 全局/ 副本/ 目录/ 使得/ 在/ 全局/ 范围/ 内/ 制定/ 最优/ 复制/ 策略/ 成为/ 可能/ ,/ 适合/ 任意/ 覆盖/ 网络结构/ 的/ P2P/ 系统/ ./ (/ 2/ )/ 对/ 访问/ 频率/ 高/ 并且/ 单位/ 平均/ 响应/ 时间/ 长/ 的/ 逻辑/ 资源/ 进行/ 副本/ 创建/ ,/ 能够/ 动态/ 、/ 有/ 针对性/ 地/ 进行/ 数据/ 复制/ ./ (/ 3/ )/ 根据/ 逻辑/ 资源/ 的/ 全局/ 副本/ 目录/ ,/ 计算/ 副本/ 数量/ 和/ 副本/ 创建/ 位置/ ,/ 使/ 副本/ 分布/ 能够/ 适应/ 数据/ 访问/ 请求/ 的/ 变化/ ./ 类似/ 地/ ,/ 在/ 判断/ 是否/ 需要/ 创建/ 副本/ 的/ 同时/ ,/ 可以/ 监控/ 访问/ 次数/ 过少/ 的/ 副本/ ,/ 如果/ 单位/ 时间/ 内/ 某/ 一/ 逻辑/ 资源/ 的/ 访问/ 次数/ 过少/ ,/ 可以/ 删除/ 该/ 资源/ 的/ 部分/ 副本/ ,/ 减少/ 副本/ 的/ 维护/ 代价/ ./ 5/ 模拟实验/ 本文/ 在/ OptorSim/ 上/ 实现/ 了/ MACR/ 方法/ ,/ 并/ 构造/ 了/ 3/ 组/ 模拟实验/ 验证/ MACR/ 方法/ 的/ 有效性/ ./ 第/ 1/ 组/ 实验/ 对比/ 有/ 数据/ 副本/ 和/ 没有/ 数据/ 副本/ 对/ 资源/ 查询/ 性能/ 的/ 影响/ ,/ 第/ 2/ 组/ 实验/ 对比/ 了/ 不同/ 复制/ 方法/ 下/ 资源/ 查询/ 的/ 性能/ ,/ 第/ 3/ 组/ 实验/ 主要/ 从/ 副本/ 数量/ 角度/ 验证/ MACR/ 方法/ 的/ 效果/ ./ 5.1/ 实验/ 环境/ 与/ 设置/ 实验/ 采用/ 随机/ 生成/ P2P/ 网络拓扑/ 结构/ ,/ 网络/ 模型/ 中共/ 有/ 1000/ 个/ 节点/ ,/ 节点/ 之间/ 的/ 网络带宽/ 在/ 100MB/ ~/ 1000MB/ 范围/ 内/ 随机/ 设置/ ./ 初始/ 文件/ 个数/ 为/ 2000/ 个/ ,/ 每个/ 数据文件/ 的/ 大小/ 为/ 1000MB/ ,/ 采用/ 随机/ 方式/ 平均/ 分布/ 在/ 整个/ 网络/ 中/ ./ 实验/ 使用/ 平均/ 作业/ 时间/ 和/ 文件/ 平均/ 响应/ 时间/ 作为/ 副本/ 查询/ 性能/ 的/ 评估/ 指标/ ,/ 平均/ 作业/ 时间/ 是/ 系统/ 完成/ 所有/ 作业/ 所/ 占用/ 的/ 节点/ 工作/ 时间/ 之/ 和/ 与/ 作业/ 数目/ 之/ 比/ ;/ 文件/ 平均/ 响应/ 时间/ 是/ 所有/ 作业/ 在/ 执行/ 过程/ 中/ 访问/ (/ 传输/ )/ 每个/ 文件/ 的/ 平均/ 时间/ ./ MACR/ 方法/ 在/ 估算/ 访问/ 代价/ 时/ ,/ 需要/ 使用/ 节点/ 服务/ 率/ ,/ 但是/ 在/ 模拟程序/ 中/ 很/ 难/ 描述/ 实际/ 运行/ 过程/ 中/ 节点/ 的/ 自主/ 行为/ ,/ 所以/ 针对/ 超级/ 节点/ 具有/ 性能/ 高/ 、/ 在线/ 时间/ 长/ 的/ 特点/ ,/ 根据/ 节点/ 类型/ 的/ 不同/ ,/ 赋予/ 一定/ 范围/ 的/ 随机/ 数值/ ./ 算法/ 中/ 还/ 使用/ 了/ 两个/ 阈值/ :/ 一个/ 是/ 判断/ 热点/ 资源/ 时/ 使用/ 的/ ω/ AF/ ,/ 这里/ 取/ ω/ AF/ 为/ 资源/ 的/ 平均/ 访问/ 频率/ ./ 另/ 一个/ 是/ 判断/ 副本/ 缺乏/ 资源/ 时/ 使用/ 的/ ω/ RT/ ,/ 这里/ 取/ ω/ RT/ 为/ 所有/ 资源/ 的/ 平均/ 单位/ 响应/ 时间/ ,/ 即/ ARTavg/ // filesizeavg/ ./ 考虑/ 到/ 数据/ 访问/ 请求/ 是/ 随机/ 产生/ 的/ ,/ 所以/ ,/ 可以/ 近似/ 取/ ω/ AF/ =/ max/ (/ AF/ )/ // 2/ ,/ ω/ RT/ =/ max/ (/ RT/ )/ // 2.5/ ./ 2/ 有无/ 副本/ 的/ 实验/ 对比/ 第/ 1/ 组/ 实验/ 分别/ 获取/ 了/ MACR/ 方法/ 下/ 有/ 副本/ (/ ω/ RT/ =/ max/ (/ RT/ )/ // 2/ )/ 和/ 没有/ 副本/ (/ 取/ ω/ RT/ 为/ 无穷大/ )/ 的/ 实验/ 结果/ ,/ 并/ 与/ SimpleOptimizer/ 方法/ 进行/ 对比/ ./ SimpleOptimizer/ 是/ OptorSim/ 中/ 基本/ 的/ 副本/ 管理策略/ ,/ 不/ 提供/ 副本/ 创建/ 功能/ ,/ 在/ 数据/ 访问/ 过程/ 中/ 通过/ 选择/ 访问/ 代价/ 最小/ 副本/ 达到/ 降低/ 数据/ 响应/ 时间/ 的/ 目的/ ./ 程序运行/ 过程/ 中/ 产生/ 的/ 作业/ 数量/ 为/ 50/ ~/ 500/ ,/ 数据/ 访问/ 请求/ 随机/ 分布/ 在/ 分布式/ 环境/ 中/ ./ 采用/ 平均/ 作业/ 时间/ 和/ 文件/ 平均/ 响应/ 时间/ 作为/ 副本/ 访问/ 的/ 性能/ 评估/ 指标/ ,/ 实验/ 结果/ 如图/ 2/ 所示/ ./ Page8/ 从图/ 2/ (/ a/ )/ 中/ 可以/ 看出/ ,/ 随着/ 作业量/ 的/ 增加/ ,/ 3/ 种/ 方法/ 的/ 任务/ 平均/ 执行/ 时间/ 都/ 有/ 不同/ 程度/ 的/ 增加/ ,/ 其中/ ,/ 没有/ 副本/ 的/ MACR/ 和/ SimpleOptimizer/ 方法/ 的/ 任务/ 平均/ 执行/ 时间/ 增长/ 较快/ ./ 有/ 副本/ 的/ MACR/ 方法/ 可以/ 动态/ 根据/ 资源/ 的/ 访问/ 情况/ 动态/ 、/ 有/ 针对性/ 地/ 创建/ 副/ 本来/ 降低/ 资源/ 的/ 访问/ 时间/ ,/ 因此/ ,/ 随着/ 作业量/ 的/ 增加/ ,/ 任务/ 平均/ 执行/ 时间/ 增长/ 较少/ ./ 在/ 作业/ 数量/ 一定/ 的/ 情况/ 下/ ,/ 有/ 副本/ 的/ MACR/ 方法/ 比/ 没有/ 副本/ 的/ MACR/ 方法/ 的/ 任务/ 平均/ 执行/ 时间/ 提高/ 了/ 将近/ 50/ %/ ,/ 这/ 是因为/ 实验/ 中/ 设定/ ω/ AF/ =/ max/ (/ AF/ )/ // 2/ ,/ ω/ RT/ =/ max/ (/ RT/ )/ // 2/ ,/ 有/ 副本/ 的/ MACR/ 方法/ 通过/ 创建/ 副本/ 使/ 资源/ 的/ 响应/ 时间/ 降低/ 一半/ ,/ 因此/ 实验/ 结果/ 中/ 任务/ 平均/ 执行/ 时间/ 会/ 比/ 没有/ 副本/ 的/ 方法/ 提高/ 50/ %/ ./ 实验/ 结果/ 说明/ MACR/ 方法/ 能够/ 根据/ 数据/ 访问/ 的/ 性能/ 动态创建/ 副本/ ,/ 并且/ 通过/ 参数/ 设定/ 可以/ 调整/ 系统/ 的/ 总体/ 访问/ 性能/ ./ 在/ 图/ 2/ (/ b/ )/ 中/ ,/ 随着/ 任务/ 数量/ 的/ 增多/ ,/ Simple/ -/ Optimizer/ 和/ 无/ 副本/ 创建/ 的/ MACR/ 算法/ 的/ 文件/ 平均/ 响应/ 时间/ 不断/ 增加/ ,/ 而/ 有/ 副本/ 创建/ 的/ MACR/ 算法/ 的/ 文件/ 平均/ 响应/ 时间/ 增长/ 并/ 不/ 明显/ ./ 这是/ 由于/ MACR/ 算法/ 根据/ 文件/ 的/ 平均/ 响应/ 时间/ ,/ 即/ 对/ 访问/ 频率/ 高/ 并且/ 单位/ 平均/ 响应/ 时间/ 长/ 的/ 逻辑/ 资源/ 进行/ 副本/ 创建/ ,/ 降低/ 了/ 文件/ 的/ 平均/ 响应/ 时间/ ,/ 表明/ 在/ 大量/ 作业/ 任务/ 下/ ,/ 有/ 副本/ 的/ MACR/ 方法/ 在/ 访问/ 请求/ 增加/ 的/ 情况/ 下/ 能够/ 基本/ 保证数据/ 访问/ 性能/ 不变/ ,/ 实现/ 副本/ 的/ 优化/ 分布/ ./ 5.3/ 查询/ 性能/ 第/ 2/ 组/ 实验/ 将/ MACR/ 与/ OptorSim/ 中/ 基于/ 缓存/ 的/ 副本/ 创建/ 策略/ (/ LeastRecentlyUsed/ ,/ LRU/ )/ 和/ 基于/ 经济模型/ 的/ 副本/ 创建/ 策略/ (/ ECO/ )/ 进行/ 了/ 性能/ 比较/ ./ LRU/ 方法/ 采用/ 缓存/ 技术/ ,/ 尽可能/ 将/ 访问/ 资源/ 复制到/ 本地/ ,/ 若/ 节点/ 没有/ 足够/ 空间/ 就/ 删除/ 最/ 久/ 没有/ 使用/ 的/ 副本/ ./ ECO/ 方法/ 通过/ 经济模型/ 评估/ 创建/ 副本/ 的/ 价值/ ,/ 以此/ 为/ 依据/ 创建/ 副本/ ./ 程序运行/ 过程/ 中/ 产生/ 的/ 作业/ 数量/ 为/ 500/ ~/ 5000/ ,/ 数据/ 访问/ 请求/ 随机/ 分布/ 在/ 分布式/ 环境/ 中/ ./ 不同/ 数据/ 复制/ 策略/ 下/ 任务/ 的/ 平均/ 完成/ 时间/ 和/ 文件/ 的/ 平均/ 响应/ 时间/ 如图/ 3/ 所示/ ./ ECO/ 方法/ 通过/ 经济模型/ 评估/ 创建/ 副本/ 的/ 价值/ ,/ 任务/ 平均/ 完成/ 时间/ 和/ 文件/ 响应/ 时间/ 最长/ ./ LRU/ 方法/ 的/ 任务/ 平均/ 完成/ 时间/ 最短/ ,/ 这/ 是因为/ LRU/ 方法/ 为/ 避免/ 异地/ 访问/ ,/ 通过/ 在/ 本地/ 创建/ 大量/ 副本/ 、/ 以/ 本地/ 访问/ 为/ 主要/ 手段/ 降低/ 文件/ 响应/ 时间/ ,/ 因此/ 任务/ 平均/ 完成/ 时间/ 和/ 文件/ 响应/ 时间/ 相对/ 较/ 小/ ./ MACR/ 方法/ 为/ 减少/ 数据/ 响应/ 时间/ 从/ 全局/ 角度/ 计算/ 副本/ 数量/ 和/ 副本/ 位置/ ,/ 并/ 不是/ 以/ 降低/ 本地/ 资源/ 访问/ 为/ 主要/ 目的/ ,/ 所以/ MACR/ 方法/ 文件/ 平均/ 响应/ 时间/ 大于/ LRU/ 方法/ 的/ 文件/ 平均/ 响应/ 时间/ ,/ 但/ 任务/ 平均/ 完成/ 时间/ 和/ 文件/ 响应/ 时间/ 与/ LRU/ 方法/ 相差/ 不大/ ./ 5.4/ 副本/ 数量/ 在/ 第/ 2/ 组/ 实验/ 基础/ 上/ ,/ 进一步/ 构建/ 第/ 3/ 组/ 实验/ ,/ 对比/ MACR/ 、/ LRU/ 和/ ECO3/ 种/ 复制/ 方法/ 的/ 副本/ 数量/ 变化/ ./ Page9/ 图/ 4/ 显示/ 了/ 随着/ 运行/ 时间/ 的/ 增加/ ,/ 3/ 种/ 数据/ 复制/ 方法/ 产生/ 的/ 副本/ 数量/ ./ LRU/ 方法/ 在/ 访问/ 资源/ 的/ 同时/ 将/ 资源/ 复制到/ 本地/ ,/ 随着/ 数据/ 访问/ 请求/ 的/ 增加/ ,/ 本地/ 保存/ 大量/ 资源/ 的/ 副本/ ,/ 副本/ 数目/ 随着/ 作业/ 数量/ 的/ 增加/ 而/ 持续增长/ ./ ECO/ 方法/ 通过/ 计算/ 副本/ 的/ 经济/ 价值/ 确定/ 是否/ 进行/ 数据/ 复制/ ,/ 副本/ 数目/ 大约/ 是/ LRU/ 方法/ 副本/ 数目/ 的/ 2/ // 3/ ,/ 在/ 一定/ 程度/ 上/ 减少/ 了/ 副本/ 数量/ ,/ 但/ 文件/ 响应/ 时间/ 也/ 比/ LRU/ 方法/ 的/ 时间/ 长/ ./ MACR/ 方法/ 对/ 频繁/ 访问/ 的/ 数据/ 进行/ 复制/ ,/ 根据/ 文件/ 的/ 平均/ 响应/ 时间/ 动态/ 计算所/ 需/ 的/ 副本/ 数目/ ,/ 而/ 不是/ 一味/ 通过/ 追求/ 副本/ 数目/ 降低/ 执行/ 时间/ ,/ 所以/ 副本/ 数目/ 不到/ LRU/ 方法/ 的/ 10/ %/ ./ 也/ 就是/ ,/ MACR/ 方法/ 用/ 不到/ LRU/ 方法/ 10/ %/ 的/ 副本/ 数目/ ,/ 就/ 获得/ 了/ 与/ LRU/ 方法/ 相当/ 的/ 任务/ 平均/ 访问/ 时间/ ,/ 说明/ MACR/ 方法/ 在/ 性能/ 提升/ 和/ 副本/ 数量/ 之间/ 能够/ 获得/ 良好/ 的/ 平衡/ ./ 6/ 结论/ 本文/ 提出/ 一种/ 动态/ 的/ 数据/ 复制/ 策略/ MACR/ ,/ 首先/ 给出/ 了/ 副本/ 目录/ 的/ 设计/ 方法/ ,/ 能够/ 获得/ 逻辑/ 数据/ 资源/ 的/ 所有/ 副本/ 信息/ ./ 然后/ ,/ 根据/ 逻辑/ 资源/ 的/ 全局/ 访问/ 情况/ 确定/ 缺乏/ 副本/ 的/ 区域/ ,/ 并/ 给出/ 副本/ 数量/ 的/ 计算方法/ ./ 引入/ 复制/ 因子/ 的/ 概念/ 计算/ 副本/ 位置/ ,/ 使/ 副本/ 分布/ 能够/ 动态/ 地/ 适应/ 访问/ 请求/ 的/ 变化/ 和/ 网络通信/ 状况/ ,/ 进而/ 实现/ 全局/ 优化/ 的/ 数据/ 副本/ 分布/ ./ MACR/ 方法/ 具有/ 如下/ 优点/ :/ (/ 1/ )/ 基于/ 双向/ 链表/ 的/ 副本/ 目录/ 方法/ 能够/ 保证/ 副本/ 分布/ 的/ 全局/ 优化/ 双向/ 链表/ 的/ 副本/ 目录/ 结构/ 能够/ 获得/ 逻辑/ 资源/ 的/ 全局/ 副本/ 信息/ ./ 以此/ 为/ 依据/ ,/ 在/ 给定/ 代价/ 评估/ 标准/ 的/ 情况/ 下/ ,/ 能够/ 在/ 全局/ 范围/ 内/ 获得/ 最优/ 的/ 数据/ 复制/ 策略/ ,/ 还/ 可以/ 动态/ 跟踪/ 副本/ 的/ 利用/ 情况/ ./ (/ 2/ )/ 适用/ 于/ 任何/ 覆盖/ 网络结构/ 在/ 底层/ P2P/ 系统/ 的/ 覆盖/ 网络/ 基础/ 上/ 对/ 网络/ 模型/ 做/ 进一步/ 约定/ ,/ 给出/ 副本/ 目录/ 信息/ 的/ 获得/ 方法/ ,/ 因此/ 适用/ 于/ 任何/ P2P/ 覆盖/ 网络结构/ ./ 通过/ 副本/ 目录/ 记录/ 副本/ 的/ 所有/ 访问信息/ ,/ 为/ 优化/ 的/ 副本/ 分布/ 策略/ 提供/ 依据/ ./ 变化/ 和/ 网络带宽/ 状况/ (/ 3/ )/ 动态/ 进行/ 数据/ 复制/ ,/ 能够/ 适应/ 访问/ 请求/ 的/ 以/ 降低/ 逻辑/ 资源/ 的/ 全局/ 访问/ 代价/ 为/ 目的/ ,/ 综合/ 考虑/ 访问/ 频率/ 、/ 节点/ 负载/ 和/ 实时/ 带宽/ 等/ 因素/ ,/ 对/ 访问/ 频率/ 高且/ 平均/ 响应/ 时间/ 长/ 的/ 数据/ 资源/ 进行/ 复制/ ./ 明确/ 给出/ 了/ 副本/ 数量/ 和/ 副本/ 位置/ 的/ 计算方法/ ,/ 能够/ 利用/ 较少/ 的/ 副本/ 数目/ 实现/ 全局/ 优化/ 的/ 副本/ 分布/ ./ 模拟实验/ 从/ 副本/ 响应/ 时间/ 和/ 副本/ 数量/ 两个/ 方面/ ,/ 对比/ 分析/ 了/ MACR/ 方法/ 与/ LRU/ 方法/ 、/ 基于/ 经济模型/ 的/ ECO/ 方法/ 的/ 性能/ ./ 实验/ 结果表明/ MACR/ 能够/ 实现/ 副本/ 的/ 合理/ 分布/ ,/ 以/ 少量/ 数据/ 副本/ 提升/ 资源/ 访问/ 的/ 性能/ ./ 致谢/ 评审/ 专家/ 对/ 本文/ 给出/ 了/ 中肯/ 的/ 评审/ 意见/ 和/ 建议/ ,/ 在/ 此/ 表示感谢/ !/ 

