Page1ODBF/ :/ 基于/ 操作/ 型/ 衰落/ BloomFilter/ 的/ P2P/ 网络/ 弱/ 状态/ 路由/ 算法/ 朱桂明/ 1/ )/ ,/ 2/ )/ 郭得科/ 3/ )/ 金士尧/ 2/ )/ 1/ )/ (/ 江南/ 计算技术/ 研究所/ 江苏/ 无锡/ 214083/ )/ 2/ )/ (/ 国防科学技术大学/ 计算机/ 学院/ 并行/ 与/ 分布/ 处理/ 国家/ 重点/ 实验室/ 长沙/ 410073/ )/ 3/ )/ (/ 国防科学技术大学/ 信息系统/ 与/ 管理/ 学院/ 信息系统/ 工程/ 国家/ 重点/ 实验室/ 长沙/ 410073/ )/ 摘要/ 在/ P2P/ 网络/ 中/ ,/ 基于/ 衰落/ BloomFilter/ 的/ 弱/ 状态/ 路由/ 算法/ 试图/ 将/ 每条/ 查询/ 消息/ 沿着/ 成员/ 资格/ 信息量/ 最强/ 的/ 方向/ 传递/ ,/ 并/ 最终/ 以较/ 低/ 的/ 传输/ 代价/ 和/ 传输/ 时延/ 确保/ 较/ 高/ 的/ 查准率/ ./ 研究/ 发现/ 衰落/ BloomFilter/ 在/ 传递/ 过程/ 中/ 存在/ 严重/ 的/ 多径/ 叠加/ 和/ 噪音/ 问题/ ,/ 这/ 直接/ 导致/ 查询/ 消息/ 以/ 很/ 高/ 的/ 概率/ 沿着/ 错误/ 的/ 方向/ 传播/ ,/ 甚至/ 会/ 退化/ 为/ 泛洪/ 路由/ 算法/ ./ 为/ 解决/ 这一/ 挑战性/ 难题/ ,/ 文中/ 提出/ 了/ 基于/ 操作/ 型/ 衰落/ BloomFilter/ 的/ 弱/ 状态/ 路由/ 算法/ ODBF/ (/ OperativeDeca/ -/ yingBloomFilter/ )/ ./ ODBF/ 通过/ 分别/ 保存/ 对象/ 的/ 衰落/ BloomFilter/ 及源/ 节点/ 等/ 信息/ ,/ 使得/ ODBF/ 能够/ 有效/ 解决/ 基于/ 衰落/ BloomFilter/ 的/ 路由/ 信息/ 在/ P2P/ 网络/ 中/ 的/ 多径/ 叠加/ 和/ 信息/ 回流/ 问题/ ,/ 有效/ 抑制/ 噪音/ 的/ 影响/ ,/ 进而/ 使得/ 基于/ 弱/ 状态/ 的/ 路由/ 能够/ 以/ 很/ 高/ 的/ 概率/ 沿着/ 正确方向/ 进行/ ./ 关键词/ 对/ 等/ 计算/ ;/ 弱/ 状态/ 路由/ ;/ 衰落/ BloomFilter/ ;/ 噪音/ 1/ 引言/ BloomFilter/ 是/ 一种/ 结构/ 简单/ 而/ 空间/ 复杂度/ 很小/ 的/ 随机/ 数据结构/ [/ 1/ ]/ ./ 其/ 主要/ 用/ 一个/ 长度/ 为/ m/ 的/ 位/ 向量/ 犞/ 对/ 大小/ 为/ n/ 的/ 集合/ X/ 进行/ 精确/ 压缩/ 表示/ ,/ 并/ 代替/ 被/ 表示/ 的/ 集合/ 回答/ 类似/ “/ 元素/ x/ 是否/ 在/ 集合/ A/ 中/ ”/ 的/ 判定/ ./ BloomFilter/ 使用/ k/ 个/ 相互/ 独立/ 且/ 随机/ 分布/ 的/ Hash/ 函数/ h1/ ,/ h2/ ,/ …/ ,/ hk/ 将/ 每个/ 元素/ 散列/ 到/ 一个/ 长度/ 为/ m/ 的/ 数组/ 中/ ./ 图/ 1/ 给出/ 了/ 将/ 元素/ x/ ,/ y/ 添加/ 到/ BloomFilter/ 中/ 的/ 结果/ 示例/ ./ 对于/ 被/ BloomFilter/ 表示/ 的/ 集合/ X/ 中/ 元素/ e/ ,/ 数组/ 中/ 位置/ 为/ h1/ (/ e/ )/ ,/ h2/ (/ e/ )/ ,/ …/ ,/ hk/ (/ e/ )/ 的/ 比特/ 位均/ 被/ 设置/ 为/ 1/ ./ 对于/ 给定/ 的/ 元素/ x/ ,/ 若/ 位置/ 为/ h1/ (/ x/ )/ ,/ h2/ (/ x/ )/ ,/ …/ ,/ hk/ (/ x/ )/ 的/ 比特/ 位均/ 为/ 1/ ,/ 则/ 认为/ 元素/ x/ ∈/ X/ ,/ 否则/ x/ / X/ ./ BloomFilter/ 对/ 该/ 问题/ 的/ 回答/ 不/ 存在/ 假/ 阴性/ 错误/ (/ falsenegative/ )/ ,/ 但是/ 存在/ 着/ 假/ 阳性/ 错误/ (/ falsepositive/ )/ ./ 即/ BloomFilter/ 技术/ 不/ 可能/ 把/ 属于/ 集合/ X/ 的/ 元素/ 误判/ 为/ 不/ 属于/ X/ ,/ 但/ 可能/ 把/ 不/ 属于/ 集合/ X/ 的/ 元素/ 误判/ 为/ X/ 的/ 元素/ ./ 发生/ 假/ 阳性/ 错误/ 的/ 概率/ 随着/ 集合/ 中/ 元素/ 的/ 增加/ 而/ 增大/ ./ 此外/ ,/ BloomFilter/ 不/ 支持/ 元素/ 的/ 删除/ 操作/ ./ 出现/ 假/ 阳性/ 错误/ 的/ 概率/ 为/ [/ 2/ ]/ Perr/ =/ (/ 1/ -/ (/ 1/ -/ 1/ // m/ )/ kn/ )/ k/ ≈/ (/ 1/ -/ e/ -/ kn/ // m/ )/ k/ ./ 图/ 1/ 将/ 元素/ x/ ,/ y/ 添加/ 到/ BloomFilter/ 中/ 的/ 结果/ 示例/ Kumar/ 等/ 人/ [/ 3/ ]/ 首次/ 设计/ 了/ 一种/ 依/ 指数/ 衰减/ 的/ BloomFilter/ ,/ 并/ 在/ 此基础/ 上/ 提出/ 了/ 非/ 结构化/ 对/ 等/ 网络/ 中/ 的/ 弱/ 状态/ 路由/ 机制/ ./ 每个/ 节点/ 产生/ 的/ 本地/ BloomFilter/ ,/ 以/ 距离/ 为/ 衰减/ 指数/ ,/ 向/ 周围/ 节点/ 传递/ ;/ 节点/ 把/ 从/ 相同/ 邻居/ 链路/ 传递/ 进来/ 的/ BloomFilter/ 进行/ 并/ 运算/ ,/ 并/ 将/ 产生/ 的/ 联合/ BloomFilter/ 作为/ 该/ 邻居/ 链路/ 的/ 路由/ 条目/ ./ 弱/ 状态/ 路由/ 机制/ ,/ 要求/ 在/ 查询/ 路由/ 过程/ 中/ ,/ 查询/ 消息/ 沿着/ 成员/ 资格/ 信息量/ 增强/ 的/ 方向/ 进行/ ./ 文献/ [/ 2/ ]/ 指出/ ,/ 由于/ 噪音/ 的/ 原因/ ,/ 且/ 噪音/ 很/ 可能/ 接近/ 甚至/ 比/ 正确/ 路由/ 条目/ 中/ 的/ 成员/ 资格/ 信息/ 还要/ 强/ ,/ 导致/ 大部分/ 查询/ 会/ 沿/ 背离/ 目的/ 节点/ 的/ 方向/ 传递/ ,/ 使得/ 弱/ 状态/ 路由/ 机制/ 十分/ 低效/ ./ 图/ 2/ 给出/ 了/ 弱/ 状态/ 路由/ 示例/ ./ 在/ 查询/ 进入/ 目标/ 节点/ A/ 的/ 衰减/ 范围/ 之前/ ,/ 即/ 路径/ K/ →/ H/ →/ G/ →/ E/ ,/ 采取/ 随机/ 路由/ ;/ 之后/ ,/ 根据/ 有效/ 信息/ 与/ 噪音/ 强度/ 的/ 对比/ 关系/ ,/ 或/ 沿着/ 错误/ 方向/ 进行/ (/ 如图/ 2/ (/ a/ )/ 所示/ )/ ,/ 或/ 沿着/ 正确方向/ 进行/ (/ 如图/ 2/ (/ b/ )/ 所示/ )/ ./ 针对/ 基于/ 衰落/ BloomFilter/ 的/ 弱/ 状态/ 路由/ 机制/ 存在/ 的/ 问题/ ,/ 本文/ 提出/ 了/ 基于/ 操作/ 型/ 衰落/ BloomFilter/ 的/ 弱/ 状态/ 路由/ 算法/ ODBF/ (/ OperativeDeca/ -/ yingBloomFilter/ )/ ./ ODBF/ 通过/ 分别/ 保存/ 对象/ 的/ 衰落/ BloomFilter/ 、/ 及源/ 节点/ 等/ 信息/ ,/ 使得/ ODBF/ 能够/ 有效/ 解决/ 基于/ 衰落/ BloomFilter/ 的/ 路由/ 信息/ 在/ P2P/ 网络/ 中/ 的/ 多径/ 叠加/ 和/ 信息/ 回流/ 问题/ ,/ 有效/ 抑制/ 噪音/ 的/ 影响/ ,/ 进而/ 使得/ 基于/ 弱/ 状态/ 的/ 路由/ 能够/ 以/ 很/ 高/ 的/ 概率/ 沿着/ 正确方向/ 进行/ ./ 2/ 相关/ 工作/ 非/ 结构化/ P2P/ 网络/ 由于/ 其/ 资源/ 定位/ 方法/ 的/ 简单/ 性/ 和/ 易用性/ ,/ 在/ Internet/ 上/ 得到/ 了/ 大量/ 应用/ ./ 然而/ ,/ 由于/ 拓扑/ 结构/ 的/ 不确定性/ 、/ 资源/ 对象/ 放置/ 的/ 随意性/ 等/ 特点/ ,/ 在/ 没有/ 辅助/ 机制/ 的/ 条件/ 下/ ,/ 非/ 结构化/ P2P/ 资源/ 定位/ 方法/ 很难/ 同时/ 获得/ 较/ 低/ 的/ 查询/ 延迟/ 、/ 少量/ 的/ 定位/ 成本/ 和/ 较/ 高/ 的/ 查询/ 命中率/ [/ 2/ ]/ ./ 近年来/ ,/ 出现/ 了/ 大量/ 关于/ 非/ 结构化/ P2P/ 网络/ 的/ 提示性/ 资源/ 定位/ 技术/ 的/ 研究/ ,/ 其/ 主要/ 思想/ 是/ ,/ 由/ 各/ 资源共享/ 节点/ 发布/ 共享/ 信息/ ,/ 并/ 在/ 网络/ 中/ 传播/ 和/ 维护/ 这些/ 共享/ 信息/ ,/ 用于/ 指导/ 资源/ 定位/ 消息/ 的/ 转发/ [/ 3/ -/ 4/ ]/ ./ 对于/ 不/ 采用/ 压缩/ 方法/ 的/ 提示性/ 路由/ 方法/ ,/ 维护/ 和/ 更新/ 共享资源/ 对象/ 元/ 信息/ 需要/ 消耗/ 大量/ 的/ 存储空间/ 和/ 网络带宽/ ,/ 资源/ 对象/ 元/ 信息/ 的/ 传播/ 和/ 维护/ 通常/ 只能/ 在/ 一个/ 相对/ 较/ 小/ 的/ 范围/ 内/ 进行/ ,/ 因而/ 对/ 路由/ 指导作用/ 十分/ 有限/ ./ 针对/ 该/ 问题/ ,/ 提示性/ 路由/ 的/ 研究/ 重点/ 是/ 基于/ BloomFilter/ 技/ Page3/ 术/ 对/ 资源/ 对象/ 元/ 信息/ 进行/ 压缩/ 存储/ 和/ 传播/ ,/ 并/ 基于/ BloomFilter/ 进行/ 查询/ 路由/ [/ 2/ -/ 4/ ]/ ./ BloomFilter/ 被/ 广泛/ 用于/ 非/ 结构化/ 对/ 等/ 网络/ [/ 5/ -/ 8/ ]/ 、/ 无线/ 传感器/ 网络/ [/ 9/ ]/ 、/ adhoc/ 网络/ [/ 10/ -/ 13/ ]/ 以及/ mesh/ 网络/ [/ 14/ ]/ 中/ ,/ 实现/ 概率/ 路由/ ./ 其/ 共同/ 的/ 思想/ [/ 2/ ]/ 是/ ,/ 每个/ 节点/ 将/ 其/ 所/ 共享/ 的/ 全部/ 资源/ 对象/ 用/ 一个/ BloomFilter/ 表示/ ,/ 并/ 将/ 其/ 传播/ 到/ 给定/ 逻辑/ 跳步/ (/ 例如/ h/ 跳/ )/ 内/ 的/ 节点/ ;/ 节点/ 把/ 从/ 相同/ 邻居/ 链路/ 传递/ 进来/ 的/ BloomFilter/ 集合/ 作为/ 该/ 邻居/ 链路/ 的/ 路由/ 条目/ ./ 如果/ 一个/ 节点/ 需要/ 将/ 查询/ 消息/ 路由/ 到/ 距离/ 其/ h/ 跳步/ 内/ 的/ 潜在/ 目的/ 节点/ ,/ 则/ 通过/ 检查/ 每个/ 邻居/ 链路/ 的/ 路由/ 条目/ 就/ 能/ 挑选出/ 正确/ 的/ 路由/ 方向/ ,/ 并/ 转发给/ 相应/ 的/ 邻居/ 节点/ ./ 这些/ 方法/ 的/ 缺点/ 是/ ,/ 虽然/ 单个/ BloomFilter/ 的/ 存储/ 开销/ 不/ 大/ ,/ 但/ 由于/ 每个/ 节点/ 需要/ 存储/ 从/ 每个/ 链路/ 传递/ 进来/ 的/ 所有/ BloomFilter/ ,/ 且/ 同一/ 节点/ 的/ BloomFilter/ 往往/ 通过/ 不同/ 链路/ 多次/ 到达/ 同一/ 节点/ ,/ 从而/ 对/ 存储资源/ 提出/ 了/ 极/ 高/ 的/ 要求/ ./ Kumar/ 等/ 人/ 首次/ 设计/ 了/ 一种/ 依/ 指数/ 衰减/ 的/ BloomFilter/ ,/ 并/ 在/ 此基础/ 上/ 提出/ 了/ 非/ 结构化/ 对/ 等/ 网络/ 中/ 的/ 弱/ 状态/ 路由/ 机制/ SQR/ [/ 3/ ]/ ./ SQR/ 中/ ,/ 每个/ 节点/ 产生/ 本地/ BloomFilter/ ,/ 以/ 距离/ 为/ 衰减/ 指数/ 向/ 周围/ 节点/ 传递/ ;/ 节点/ 把/ 从/ 相同/ 邻居/ 链路/ 传递/ 进来/ 的/ BloomFilter/ 进行/ 并/ 运算/ ,/ 并/ 将/ 产生/ 的/ 联合/ BloomFilter/ 作为/ 该/ 邻居/ 链路/ 的/ 路由/ 条目/ ./ 该弱/ 状态/ 路由/ 机制/ 要求/ 在/ 查询/ 路由/ 过程/ 中/ ,/ 查询/ 消息/ 沿着/ 成员/ 资格/ 信息量/ ①/ 最强/ 的/ 方向/ 进行/ ./ 基于/ BloomFilter/ 的/ 弱/ 状态/ 路由/ 机制/ 的/ 核心思想/ 是/ :/ 每个/ 节点/ 为/ 其/ 所属/ 对象/ 构造/ 从/ 自身/ 向/ 周边/ 邻居/ 依/ 规则/ 衰减/ 的/ 信息/ 梯度/ ;/ 如果/ 节点/ 转发/ 以/ 其他/ 节点/ 上/ 对象/ 为/ 目标/ 的/ 查询/ 消息/ ,/ 并且/ 处于/ 该/ 消息/ 的/ 潜在/ 目标/ 节点/ 为/ 查询/ 对象/ 构造/ 的/ 信息/ 梯度/ 范围/ 内/ ,/ 则/ 要求/ 该/ 节点/ 能够/ 为/ 该/ 查询/ 消息/ 选择/ 正确/ 的/ 方向/ 进行/ 转发/ ./ 文献/ [/ 2/ ]/ 指出/ ,/ SQR/ 将/ 从/ 相同/ 链路/ 传递/ 进来/ 的/ BloomFilter/ 的/ 联合/ 作为/ 该/ 链路/ 的/ 路由/ 条目/ ,/ 虽然/ 大大/ 缩小/ 了/ 对/ 存储资源/ 的/ 要求/ ,/ 但是/ 由于/ 噪音/ 的/ 问题/ ,/ 且/ 噪音/ 很/ 可能/ 接近/ 甚至/ 比/ 正确/ 路由/ 条目/ 中/ 的/ 成员/ 资格/ 信息/ 还要/ 强/ ,/ 导致/ 大部分/ 查询/ 沿着/ 背离/ 目的/ 节点/ 的/ 方向/ 传递/ ,/ 使得/ 弱/ 状态/ 路由/ 机制/ 十分/ 低效/ ./ 文献/ [/ 2/ ]/ 深入分析/ 了/ 基于/ BloomFilter/ 的/ 弱/ 状态/ 路由/ 机制/ SQR/ 存在/ 的/ 问题/ ,/ 并/ 给出/ 了/ 该/ 机制/ 正常/ 运行/ 所/ 需/ 满足/ 的/ 约束条件/ ./ 然而/ ,/ 该/ 模型/ 建立/ 在/ 局部/ 网络拓扑/ 度数/ 为/ 常数/ 的/ 树型/ 结构/ 基础/ 上/ ,/ 每个/ 节点/ 共享/ 相同/ 个数/ 的/ 资源/ ,/ 约束条件/ 太/ 苛刻/ ;/ 且/ 相关/ 参数/ 的/ 设置/ 和/ 获取/ 也/ 并非易事/ ./ 本文/ 提出/ 的/ ODBF/ 能够/ 解决/ 基于/ 衰落/ BloomFilter/ 的/ 路由/ 信息/ 多径/ 叠加/ 和/ 信息/ 回流/ 问题/ ,/ 极大/ 抑制/ 了/ 噪音/ 的/ 影响/ ,/ 使得/ 基于/ 衰落/ BloomFilter/ 的/ 弱/ 状态/ 路由/ 算法/ ODBF/ 能够/ 以/ 很/ 高/ 的/ 概率/ 沿着/ 正确方向/ 进行/ ./ 3ODBFODBF/ 的/ 基本/ 思想/ 是/ ,/ 分别/ 保存/ 各/ 次/ 资源/ 发布/ 的/ 衰落/ BloomFilter/ 及源/ 节点/ 和/ 发布/ 序号/ 等/ 信息/ ;/ 进行/ 查询/ 路由/ 时/ ,/ 将/ 查询/ 语义/ 的/ BloomFilter/ 与/ 各个/ 路由/ 条目/ 中/ 各次/ 资源/ 发布/ 的/ 衰落/ BloomFilter/ 进行/ 匹配/ ./ 通过/ 这种/ 方法/ ,/ ODBF/ 能够/ 仅/ 保存/ 从/ 最/ 短/ 路径/ 传递/ 进来/ 、/ 含有/ 资源/ 对象/ 成员/ 资格/ 信息/ 的/ 衰落/ BloomFilter/ ,/ 能够/ 消除/ 不同/ 节点/ 和/ 相同/ 节点/ 但/ 非同/ 一次/ 发布/ 资源/ 对象/ BloomFilter/ 中/ 成员/ 资格/ 信息/ 之间/ 的/ 相互/ 干扰/ ,/ 从而/ OBF/ 能够/ 进行/ 有效/ 的/ 弱/ 状态/ 路由/ ./ 3.1/ ODBF/ 数据结构/ ODBF/ 的/ 抽象/ 结构/ 为/ ODBF/ =/ {/ Update1/ ,/ Update2/ ,/ …/ ,/ Updatei/ =/ (/ Setsi/ ,/ Propertiesi/ )/ ,/ Setsi/ =/ {/ …/ ,/ set/ (/ j/ )/ ,/ set/ (/ k/ )/ ,/ set/ (/ l/ )/ ,/ …/ }/ ,/ Propertiesi/ =/ {/ src/ _/ id/ ,/ res/ _/ id/ }/ ./ ODBF/ 结构/ 是/ 由/ 所有/ 资源/ 发布/ 操作/ 结构/ 组成/ 的/ 集合/ ,/ 每个/ 资源/ 发布/ 操作/ 结构/ Updatei/ 由/ 操作/ 集/ Setsi/ 和/ 属性/ 集/ Propertiesi/ 组成/ ./ 操作/ 集/ Setsi/ 对应/ 本次/ 资源/ 对象/ 发布/ 的/ 衰落/ BloomFilter/ ,/ set/ (/ j/ )/ 表示/ 将/ 第/ j/ 位/ 设置/ 为/ 1/ ./ 属性/ 集/ Propertiesi/ 由/ 资源/ 发布/ 节点/ 的/ 标识/ src/ _/ id/ 和/ 本次/ 资源/ 发布/ 的/ 标识/ res/ _/ id/ 组成/ ./ 操作/ 集/ Setsi/ 既/ 可以/ 索引/ 对/ 被/ 设置/ 比特/ 位/ 逐个/ 表示/ ,/ 也/ 可/ 采用/ BloomFilter/ 数据结构/ 直接/ 表示/ ,/ 具体方法/ 选择/ 存储空间/ 开销/ 较小者/ ./ 3.2/ 基于/ ODBF/ 的/ 路由/ 条目/ 设计/ 节点/ 为/ 每个/ 邻居/ 节点/ 关联/ 一个/ ODBF/ 作为/ 该/ 邻居/ 链路/ 的/ 路由/ 条目/ ./ 节点/ 接收/ 到/ 从/ 邻居/ 节点/ 传递/ 进来/ 的/ 资源/ 发布/ 对象/ 的/ 衰落/ BloomFilter/ 时/ ,/ 首先/ 判断/ 该/ 衰落/ BloomFilter/ 是否/ 从/ 最/ 短/ 路径/ 传递/ 进来/ ,/ 若/ 从/ 最/ 短/ 路径/ 传递/ 进来/ ,/ 则/ 将/ 本次/ 资源/ 发布/ 对象/ 的/ 衰落/ BloomFilter/ 加入/ 到/ 该/ 邻居/ 节点/ 的/ ODBF/ 路由/ 条目/ 中/ ,/ 并/ 删除/ 其它/ 邻居/ 链路/ ODBF/ 路由/ 条目/ 中/ ①/ 给定/ BloomFilterbf/ ,/ 元素/ x/ 的/ 成员/ 信息量/ 定义/ 为/ bf/ 中位/ Page4/ 从/ 非/ 最/ 短/ 路径/ 接收/ 到/ 的/ 本次/ 资源/ 发布/ 对象/ 的/ 衰落/ BloomFilter/ ;/ 否则/ ,/ 丢弃/ 该/ 更新/ 操作/ ./ 判断/ 本次/ 资源/ 发布/ 对象/ 的/ 衰落/ BloomFilter/ 是否/ 从/ 最/ 短/ 路径/ 传递/ 进来/ 的/ 方法/ 是/ ,/ 扫描/ 所有/ 邻居/ 链路/ 的/ 路由/ 条/ 目的/ ODBF/ ,/ 通过/ 每次/ 操作/ 的/ 属性/ src/ _/ id/ 和/ res/ _/ id/ ,/ 找出/ 本/ 节点/ 从/ 不同/ 路径/ 接收/ 到/ 的/ 与/ 本次/ 资源/ 发布/ 对应/ 的/ 所有/ 衰落/ BloomFilter/ ,/ 比较/ 所有/ 衰落/ BloomFilter/ 的/ 资源/ 成员/ 资格/ 信息量/ ,/ 将/ 资源/ 成员/ 资格/ 信息量/ 最大/ 的/ BloomFilter/ 作为/ 当前/ 从/ 最/ 短/ 路径/ 传递/ 进来/ 的/ 衰落/ BloomFilter/ ./ 节点/ 接收/ 衰落/ BloomFilter/ 的/ 操作/ 如/ 算法/ 1/ 所示/ ./ 算法/ 1/ ./ 节点/ 接收/ ./ voidrcv/ _/ update/ (/ Nodenode/ ,/ Updateupdate/ )/ 1/ ./ foreachneighbor/ ’/ sroutingitem/ (/ ODBF/ )/ odbf2/ ./ ifodbfhasupdate3/ ./ oldUpdate/ =/ getUpdate/ (/ odbf/ ,/ update/ )/ ;/ 4/ ./ ifmembership/ (/ oldUpdate/ )/ </ membership/ (/ update/ )/ 5/ ./ deleteoldUpdatefromcurrentneighbor/ ’/ s6/ ./ else7/ ./ return/ ;/ 8/ ./ insertupdateintonode/ ’/ sroutingitem/ ;/ 3.3/ 路由/ 算法/ 进行/ 查询/ 路由/ 时/ ,/ 将/ 查询/ 语义/ BloomFilter/ 与/ 邻居/ 节点/ 路由/ 条目/ 中/ 的/ 每个/ 衰落/ BloomFilter/ 进行/ 匹配/ ,/ 即/ 路由/ 条/ 目的/ 每个/ 衰落/ BloomFilter/ 与/ 查询/ 的/ BloomFilter/ 进行/ “/ 与/ ”/ 运算/ 后/ 计算/ 值为/ 1/ 的/ 比特/ 位/ 个数/ ,/ 并用/ 最大/ 比特/ 位/ 个数/ 作为/ 该/ 邻居/ 节点/ 与/ 查询/ 语义/ 的/ 相关性/ 大小/ ,/ 选择/ 相关性/ 最大/ (/ 即/ 成员/ 资格/ 信息/ 最强/ )/ 的/ 邻居/ 节点/ 进行/ 路由/ 转发/ ./ 查询/ 路由/ 算法/ ODBF/ 如/ 算法/ 2/ 所示/ ./ 算法/ 2/ 中/ ,/ 若/ 当前/ 节点/ 具有/ 满足/ 查询/ query/ 的/ 资源/ ,/ 则/ 直接/ 向/ 查询/ 请求/ 节点/ 返回/ 相应/ 的/ 资源/ ;/ 否则/ ,/ 若/ 尚未/ 达到/ 查询/ 消息传递/ 的/ 最大/ 距离/ ,/ 则/ 继续/ 遍历/ 所有/ 邻居/ 节点/ ./ 找出/ 与/ 查询/ BloomFil/ -/ ter/ 相关性/ 最大/ 的/ 邻居/ 节点/ ,/ 并/ 进行/ 查询/ 路由/ 转发/ ./ 算法/ 2/ ./ 查询/ 路由/ 算法/ ./ ODBF/ (/ NodecurNode/ ,/ NodesrcNode/ ,/ BloomFilterque/ -/ 1/ ./ ifcontain/ _/ resource/ (/ query/ )/ 2/ ./ sendresourcetosrcNode/ ;/ 3/ ./ return/ ;/ 4/ ./ ifdistance/ / hreturn/ ;/ // // h/ 为/ 最大/ 传播/ 距离/ 5/ ./ max/ _/ rel/ =/ 0/ ;/ 6/ ./ forneighborfromNeighbors7/ ./ odbf/ =/ getODBF/ (/ neighbor/ )/ ;/ 8/ ./ if/ θ/ (/ query/ ∧/ odbf/ ./ update/ )/ / max/ _/ rel9/ ./ max/ _/ rel/ =/ θ/ (/ query/ ∧/ odbf/ ./ update/ )/ ;/ ry/ ,/ intdistance/ )/ 10/ ./ forneighborfromNeighbors11/ ./ odbf/ =/ getODBF/ (/ neighbor/ )/ ;/ 12/ ./ if/ θ/ (/ query/ ∧/ odbf/ ./ update/ )/ =/ =/ max/ _/ rel13/ ./ ForwardNodes/ ./ add/ (/ neighbor/ )/ ;/ 14/ ./ fornodefromForwardNodes15/ ./ ODBF/ (/ node/ ,/ srcNode/ ,/ query/ ,/ distance/ +/ 1/ )/ ;/ 4/ 理论/ 分析/ ODBF/ 通过/ 分别/ 保存/ 各/ 次/ 资源/ 发布/ 的/ 衰落/ BloomFilter/ 及源/ 节点/ 和/ 发布/ 序号/ 等/ 信息/ ,/ 能够/ 消除/ 不同/ 节点/ 和/ 相同/ 节点/ 但/ 非同/ 一次/ 发布/ 资源/ 对象/ BloomFilter/ 中/ 成员/ 资格/ 信息/ 之间/ 的/ 相互/ 干扰/ ,/ 能够/ 仅/ 保存/ 从/ 最/ 短/ 路径/ 传递/ 进来/ 的/ 资源/ 对象/ 的/ 衰落/ BloomFilter/ ./ 相对/ 于/ 以/ 单个/ BloomFilter/ 作为/ 邻居/ 节点/ 的/ 路由/ 条目/ 而言/ ,/ ODBF/ 大大提高/ 了/ 弱/ 状态/ 路由/ 的/ 成功/ 概率/ ;/ 与此同时/ ,/ 大多数/ 情况/ 下/ ODBF/ 的/ 空间/ 开销/ 也/ 稍/ 大/ ./ 定义/ 1/ ./ 给定/ 集合/ X/ 和/ 其/ BloomFilterbf/ ,/ 令/ θ/ (/ x/ ,/ bf/ )/ 表示/ 在/ 对应/ bf/ 中/ 任意/ 元素/ x/ ∈/ X/ 的/ 成员/ 资格/ 信息量/ ,/ 即/ Bfaddress/ (/ x/ )/ 中/ 设置/ 为/ 1/ 的/ 比特/ 位/ 的/ 数目/ ,/ (/ Bfaddress/ (/ x/ )/ 由/ hi/ (/ x/ )/ 构成/ ,/ 其中/ 1/ / i/ / k/ )/ ;/ 令/ θ/ (/ X/ ,/ bf/ )/ 表示/ 集合/ X/ 在/ 对应/ bf/ 中/ 的/ 信息量/ ,/ 即/ bf/ 中/ 被/ 设置/ 为/ 1/ 的/ 比特/ 位/ 的/ 数目/ ./ 定义/ 2/ ./ 令/ bfi/ 表示/ 一个/ bf/ 在/ 第/ i/ 轮/ 衰减/ 后/ 的/ 结果/ ,/ 其中/ i/ / 1/ ./ 在/ bfi/ 中/ 保留/ 有/ θ/ (/ bfi/ )/ 个/ 为/ 1/ 的/ 比特/ 位/ ./ 对/ bf/ 依/ 指数/ 衰减/ ,/ 则/ 有/ 令/ c/ 为/ 节点/ 的/ 度数/ ,/ 每个/ bf/ 传递/ 的/ 最大/ 距离/ 为/ h/ ,/ 则/ 节点/ 通过/ 一条/ 邻居/ 链路/ linkj/ 最多/ 从/ 网络/ 中/ 能/ 收到/ linkj/ =/ ∑/ hlinkj/ 个/ BloomFilter/ 的/ 并/ 运算/ 产生/ 一个/ BloomFilter/ 为/ bf/ (/ linkj/ )/ ,/ 则/ bf/ (/ linkj/ )/ =/ ∪/ h/ β/ (/ linkj/ )/ 表示/ 通过/ 链路/ linkj/ 接收/ 到/ 所有/ bf/ 的/ 成员/ 资格/ 信息量/ 的/ 总和/ ,/ 则/ 有/ β/ (/ linkj/ )/ =/ ∑/ h/ 且/ θ/ (/ bf/ (/ linkj/ )/ )/ =/ m/ (/ 1/ -/ (/ 1/ -/ 1/ // m/ )/ β/ (/ linkj/ )/ )/ ,/ 其中/ m/ 为/ bf/ 的/ 长度/ ./ 定理/ 1/ [/ 2/ ]/ ./ 如果/ x/ 被/ bf/ 表示/ ,/ 当/ i/ =/ 1/ 时/ ,/ θ/ (/ x/ ,/ bfi/ )/ 等于/ k/ ./ 否则/ ,/ θ/ (/ x/ ,/ bfi/ )/ 是/ 一个/ 离散/ 随机变量/ ,/ 记为/ Ui/ ,/ 其/ 概率分布/ 函数/ 为/ P/ (/ Ui/ =/ a/ )/ =/ Page5/ 定理/ 2/ [/ 2/ ]/ ./ 如果/ x/ 被/ bf/ 表示/ ,/ 指标/ θ/ (/ x/ ,/ bfi/ (/ linkj/ )/ )/ 是/ 个/ 离散/ 随机变量/ ,/ 记为/ Vi/ ,/ 其/ 概率分布/ 函数/ 为/ P/ (/ Vi/ =/ v/ )/ =/ ∑/ v/ 其中/ ,/ P/ (/ Wi/ =/ b/ |/ Ui/ =/ a/ )/ =/ k/ -/ a/ (/ )/ bP/ (/ E/ α/ (/ linkj/ )/ =/ 0/ )/ k/ -/ a/ -/ b/ ,/ α/ (/ linkj/ )/ =/ β/ (/ linkj/ )/ -/ θ/ (/ bfi/ )/ ,/ P/ (/ E/ α/ (/ linkj/ )/ P/ (/ Ez/ =/ 0/ )/ =/ (/ 1/ -/ 1/ // m/ )/ z/ ,/ P/ (/ Ez/ =/ 1/ )/ =/ 1/ -/ P/ (/ Ez/ =/ 0/ )/ ./ 令/ θ/ (/ x/ ,/ bf/ (/ linkj/ )/ )/ 表示/ 节点/ A/ 从/ 任意/ 其它/ 链路/ linkj/ 上/ 关于/ 对象/ x/ 的/ 成员/ 资格/ 信息量/ ./ 如果/ 节点/ A/ 的/ h/ 跳内/ 节点/ 上/ 没有/ 对象/ x/ 的/ 副本/ ,/ 则/ θ/ (/ x/ ,/ bf/ (/ linkj/ )/ )/ 定义/ 为/ 对象/ x/ 在/ 链路/ linkj/ 上/ 的/ 噪音/ 强度/ 指标/ ./ θ/ (/ x/ ,/ bf/ (/ linkj/ )/ )/ 是/ 一个/ 离散/ 随机变量/ ,/ 记为/ Y/ ,/ 其/ 可能/ 的/ 值/ 为/ 0/ ~/ k/ 的/ 整数/ ./ 其/ 概率分布/ 函数/ 为/ [/ 2/ ]/ P/ (/ Y/ =/ u/ )/ =/ (/ )/ kp0/ 和/ p1/ 分别/ 表示/ bf/ (/ linkj/ )/ 中/ 取值/ 为/ 0/ 和/ 1/ 的/ 比特/ 位/ 的/ 比例/ ,/ 并/ 用作/ bf/ (/ linkj/ )/ 任意/ 一个/ 比特/ 位为/ 0/ 和/ 1/ 的/ 概率/ ./ 定理/ 3/ [/ 2/ ]/ ./ 如果/ 节点/ A/ 已经/ 从/ 查询/ 消息/ 的/ 潜在/ 目的/ 节点/ 接收/ 到/ 一个/ bfi/ ,/ 则/ 使用/ 单播/ 或/ 多播/ 转发/ 关于/ 对象/ x/ 的/ 消息/ 的/ 概率/ 为/ fvalid/ (/ Vi/ )/ =/ ∑/ k/ 定理/ 4/ ./ 如果/ 节点/ A/ 已经/ 从/ 查询/ 消息/ 的/ 潜在/ 目的/ 节点/ 接收/ 到/ 一个/ bfh/ ,/ 则/ 使用/ 单播/ 或/ 多播/ 转发/ 关于/ 对象/ x/ 的/ 消息/ ,/ 能够/ 成功/ 到达/ 目的/ 节点/ 的/ 概率/ 为/ 证明/ ./ 由于/ 节点/ A/ 已经/ 从/ 查询/ 消息/ 的/ 潜在/ 目的/ 节点/ 接收/ 到/ 一个/ bfh/ ,/ 则/ 中间/ 各/ 节点/ 使用/ 单播/ 或/ 多播/ 转发/ 关于/ 对象/ x/ 的/ 消息/ 的/ 概率/ 为/ fvalid/ (/ Vi/ )/ ,/ 1/ / i/ / h/ ./ 因此/ ,/ 使用/ 单播/ 或/ 多播/ 转发/ 关于/ 对象/ x/ 的/ 消息/ ,/ 能够/ 成功/ 到达/ 目的/ 节点/ 的/ 概率/ 为/ PBF/ =/ ∏/ h/ 令/ obfi/ (/ linkj/ )/ 表示/ 节点/ A/ 使用/ OBF/ 结构/ 存储/ 从/ 链路/ linkj/ 上/ 接收/ 到/ 的/ bfi/ ,/ θ/ (/ x/ ,/ obfi/ (/ linkj/ )/ )/ 表示/ 对象/ x/ 在/ obfi/ (/ linkj/ )/ 中/ 的/ 成员/ 资格/ 信息量/ 的/ 最大值/ ./ 令/ θ/ (/ x/ ,/ obf/ (/ linkj/ )/ )/ 表示/ 节点/ A/ 从/ 任意/ 其它/ 链路/ linkj/ 上/ 关于/ 对象/ x/ 的/ 成员/ 资格/ 信息量/ 的/ 最大值/ ./ 如果/ 节点/ A/ 的/ h/ 跳内/ 节点/ 上/ 没有/ 对象/ x/ 的/ 副本/ ,/ 则/ θ/ (/ x/ ,/ obf/ (/ linkj/ )/ )/ 定义/ 为/ 对象/ x/ 在/ 链路/ linkj/ 上/ 的/ 噪音/ 强度/ 指标/ ./ θ/ (/ x/ ,/ obfi/ (/ linkj/ )/ )/ 是/ 一个/ 离散/ 随机变量/ ,/ 记为/ Qi/ ,/ 其/ 可能/ 的/ 值/ 为/ 0/ ~/ k/ 的/ 整数/ ./ θ/ (/ x/ ,/ obf/ (/ linkj/ )/ )/ 是/ 一个/ 离散/ 随机变量/ ,/ 记为/ Z/ ,/ 其/ 可能/ 的/ 值/ 为/ 0/ ~/ k/ 的/ 整数/ ./ 令/ θ/ (/ x/ ,/ bfl/ 在/ 任意/ 链路/ linkf/ 上/ 关于/ 对象/ x/ 在/ bfl/ 信息量/ ,/ 其中/ 1/ / i/ / h/ ,/ 1/ / l/ / (/ c/ -/ 1/ )/ i/ -/ 1/ ./ 令/ x/ 不/ 被/ i/ 表示/ ,/ θ/ (/ x/ ,/ bflbfli/ ,/ 其/ 可能/ 的/ 值/ 为/ 0/ ~/ k/ 的/ 整数/ ./ Z/ 的/ 分布/ 函数/ 为/ 为/ ZlP/ (/ Z/ =/ v/ )/ =/ P/ (/ Z/ / v/ )/ -/ P/ (/ Z/ / v/ +/ 1/ )/ ,/ 其中/ ,/ P/ (/ Z/ / v/ )/ =/ 1/ -/ ∏/ hP/ (/ ZlQi/ 的/ 分布/ 函数/ 为/ P/ (/ Qi/ =/ a/ )/ =/ P/ (/ Qi/ / a/ )/ -/ P/ (/ Qi/ / a/ +/ 1/ )/ ,/ P/ (/ Qi/ / a/ )/ =/ 1/ -/ ∏/ h/ 定理/ 5/ ./ 如果/ 节点/ A/ 已经/ 从/ 查询/ 消息/ 的/ 潜在/ 目的/ 节点/ 接收/ 到/ 一个/ bfi/ ,/ 并/ 使用/ OBF/ 存储/ 接收/ 到/ 的/ bfi/ ,/ 则/ 使用/ 单播/ 或/ 多播/ 转发/ 关于/ 对象/ x/ 的/ 消息/ 的/ 概率/ 为/ fvalid/ (/ Qi/ )/ =/ ∑/ k/ 证明/ ./ 对于/ Qi/ 的/ 任意/ 可能/ 取值/ v/ ,/ 其中/ 0/ / v/ / k/ ,/ 考虑/ 对象/ x/ 除/ 接收/ 到/ bfi/ 的/ 邻居/ 链路/ linkj/ 之外/ 的/ 其它/ 一条/ 邻居/ 链路/ 上/ 的/ 噪音/ 强度/ 小于/ v/ 的/ 事件/ ,/ 其/ 发生/ 的/ 概率/ 由/ ∑/ v/ 象/ x/ 在/ 除/ linkj/ 和/ 节点/ A/ 接收/ 到/ 当前/ 查询/ 消息/ 的/ 邻居/ 链路/ 之外/ 的/ 其余/ 邻居/ 链路/ 上/ 的/ 噪音/ 强度/ 同时/ 小于/ v/ 的/ 事件/ ,/ 该/ 事件/ 发生/ 的/ 概率/ 为/ ∑/ vc/ -/ 2/ 为/ 存在/ 噪音/ 的/ 平均/ 邻居/ 链路/ 个数/ ./ 结合/ 事件/ Qi/ 的/ 概率分布/ 可知/ ,/ 节点/ A/ 最终/ 使用/ 单播/ 或/ 多播/ 转发/ 关于/ 对象/ x/ 的/ 消息/ 的/ 概率/ 为/ fvalid/ (/ Qi/ )/ =/ ∑/ k/ 定理/ 6/ ./ 如果/ 节点/ A/ 已经/ 从/ 查询/ 消息/ 的/ 潜在/ 目的/ 节点/ 接收/ 到/ 一个/ bfh/ ,/ 各/ 节点/ 使用/ OBF/ 存储/ 接收/ 到/ 的/ bfi/ (/ 1/ / i/ / h/ )/ ,/ 则/ 使用/ 单播/ 或/ 多播/ 转发/ 关于/ 对象/ x/ 的/ 消息/ ,/ 能够/ 成功/ 到达/ 目的/ 节点/ 的/ 概率/ 为/ Page6/ 证明/ ./ 定理/ 6/ 的/ 证明/ 与/ 定理/ 4/ 类似/ ,/ 不再/ 赘述/ ./ 假设/ 每个/ 节点/ 共享/ n/ 个/ 资源/ 对象/ ,/ 以依/ 指数/ 衰减/ 的/ BloomFilter/ 一次性/ 发布/ 其/ 共享资源/ 对象/ ,/ 并/ 以/ ODBF/ 存储/ 其/ 接收/ 到/ 的/ 各个/ bfi/ ./ 令/ BloomFilter/ 的/ 长度/ 为/ m/ ,/ Hash/ 函数/ 的/ 个数/ 为/ k/ ,/ 衰减/ 指数/ 为/ d/ ,/ 传递/ 的/ 最大/ 距离/ 为/ h/ ,/ 各/ 节点/ 的/ 度数/ 为/ c/ ,/ 则/ 每个/ ODBF/ 的/ 信息量/ 为/ ∑/ h/ 需/ log2m/ 个/ 比特/ 位/ ,/ 则/ 所/ 需/ 空间/ 为/ ∑/ hlog2m/ 个/ 比特/ 位/ ./ SQR/ 算法/ 中/ 各/ 节点/ 以/ 单个/ BloomFilter/ 存储/ 通过/ 一条/ 邻居/ 链路/ linkj/ 接收/ 到/ 的/ h/ 范围/ 内/ 节点/ 发布/ 资源/ 的/ bfi/ (/ 1/ / i/ / h/ )/ ,/ 其/ 信息量/ 为/ θ/ (/ bf/ (/ linkj/ )/ )/ =/ m/ (/ 1/ -/ (/ 1/ -/ 1/ // m/ )/ β/ (/ linkj/ )/ )/ ,/ 所/ 需/ 空间/ 大小/ 为/ m/ 个/ 比特/ 位/ ./ 传统/ 方法/ 中/ ,/ 各/ 节点/ 将/ 通过/ 邻居/ 链路/ linkj/ 接收/ 其/ h/ 范围/ 内/ 节点/ 发布/ 资源/ 的/ BloomFilter/ 完整/ 保存/ 下来/ ,/ 所/ 需/ 存储/ 的/ 信息量/ 为/ i/ =/ 1/ ∑/ (/ c/ -/ 1/ )/ i/ -/ 1/ ∑/ h5/ 模拟实验/ l/ =/ 1/ 我们/ 在/ Peersim/ ①/ 上/ 实现/ 了/ ODBF/ ,/ 并/ 将/ 其/ 与/ SQR/ 、/ 传统/ 方法/ (/ 节点/ 通过/ 邻居/ 链路/ 接收/ 给定/ 逻辑/ 跳步/ h/ 内/ 所有/ 节点/ 共享资源/ 的/ BloomFilter/ ,/ 并/ 将/ 这些/ BloomFilter/ 的/ 并/ 集/ 作为/ 该/ 邻居/ 链路/ 的/ 路由/ 条目/ )/ 进行/ 了/ 比较/ ./ 给定/ 参数/ BloomFilter/ 的/ 比特/ 位/ 个数/ m/ 、/ Hash/ 函数/ 的/ 个数/ k/ 、/ 衰减/ 指数/ d/ 、/ 最大/ 传输/ 距离/ h/ 、/ 网络/ 规模/ N/ 、/ 节点/ 度数/ c/ 、/ 各/ 节点/ 一次性/ 发布/ 共享资源/ 对象/ 的/ 个数/ n/ ,/ 考查/ 从/ 接收/ 目标/ 对象/ 的/ 第/ h/ 次/ 衰落/ BloomFilter/ 的/ 节点/ 发起/ 的/ 查询/ 的/ 命中率/ 、/ 查询/ 代价/ (/ 即/ 查询/ 消息/ 访问/ 节点/ 的/ 个数/ )/ 及/ 各个/ 路由/ 条/ 目的/ 信息量/ 、/ (/ 或/ )/ 空间/ 大小/ ./ 由于/ 各/ 算法/ 的/ 查询/ 延迟/ 均/ 为/ h/ ,/ 本/ 实验/ 不/ 作/ 考虑/ ./ 实验/ 参数/ 如表/ 1/ 所示/ ./ 节点/ 个数/ N/ 节点/ 度数/ c/ 拓扑/ 结构/ BloomFilter/ 的/ 比特/ 位/ 个数/ mHash/ 函数/ 的/ 个数/ k/ 衰减/ 指数/ d/ 最大/ 传输/ 距离/ h/ 实验/ 过程/ :/ 各/ 节点/ 发布/ 相同/ 个数/ 资源/ 对象/ 的/ BloomFilter/ ;/ 任选/ 50/ 个/ 节点/ 作为/ 查询/ 的/ 目标/ 节点/ ,/ 对于/ 任意/ 目标/ 节点/ ,/ 从/ 距离/ 该/ 目标/ 节点/ 距离/ 为/ h/ 的/ 所有/ 节点/ 发起/ 针对/ 目标/ 节点/ 任意/ 共享资源/ 的/ 查询/ ,/ 并/ 统计/ 查询/ 命中率/ 的/ 均值/ 、/ 查询/ 代价/ 的/ 均值/ 以及/ 各/ 节点/ 路由/ 条目/ 中/ BloomFilter/ 的/ 信息量/ 、/ (/ 或/ )/ 空间/ 大小/ 均值/ ./ 图/ 3/ 、/ 图/ 4/ 和/ 图/ 5/ 给出/ 了/ 各/ 节点/ 发布/ 1/ ~/ 30/ 资源/ 对象/ 时/ ,/ 各种/ 方法/ 对应/ 的/ 查询/ 命中率/ 、/ 查询/ 代价/ 和/ 各路/ 由/ 条目/ 中/ 的/ 信息量/ 、/ 空间/ 开销/ ./ SQR/ 采用/ 多播/ 策略/ (/ 即/ 路由/ 过程/ 中/ ,/ 将/ 查询/ 消息/ 转发给/ 所有/ 成员/ 资格/ 信息量/ 最大/ 的/ 路由/ 条目/ 对应/ 的/ 邻居/ 节点/ )/ ,/ 查询/ 命/ ①/ JelasityM/ ,/ MontresorA/ ,/ JesiGP/ ./ Thepeersimsimula/ -/ tor/ ./ 2009/ ./ http/ :/ // // peersim/ ./ sf/ ./ netPage7/ 中率/ 随着/ 各/ 节点/ 共享资源/ 个数/ 的/ 增加/ 先/ 降低/ 后/ 增加/ ,/ 且/ 最低/ 达到/ 了/ 0.4/ 左右/ ;/ 而/ 查询/ 代价/ 随着/ 资源/ 个数/ 的/ 增加/ 先/ 缓慢/ 增加/ ,/ 而后/ 急剧/ 上升/ ,/ 最大值/ 接近/ 150/ ./ 结合/ 图/ 3/ 和/ 图/ 4/ ,/ 不难/ 发现/ ,/ 查询/ 命中率/ 降低/ 的/ 过程/ 中/ 查询/ 代价/ 缓慢/ 增加/ ,/ 即/ 对应/ 着/ 其它/ 链路/ 路由/ 条/ 目的/ 噪声/ 强度/ 以/ 一定/ 的/ 概率/ 大于/ 正确/ 路由/ 条目/ 中/ 的/ 信息/ 强度/ ;/ 而/ 查询/ 命中率/ 增加/ 的/ 过程/ 中/ 查询/ 代价/ 急剧/ 上升/ ,/ 即/ 查询/ 命中率/ 的/ 上升/ 是/ 由于/ 各/ 节点/ 共享资源/ 个数/ 达到/ 一定/ 数量/ 后/ ,/ 其它/ 链路/ 上路/ 由条/ 目的/ 噪声/ 强度/ 以/ 较大/ 的/ 概率/ 与/ 正确/ 路由/ 条/ 目的/ 强度/ 等同/ ,/ 产生/ 了/ 大量/ 的/ 近似于/ “/ 泛洪/ ”/ 形式/ 的/ 消息/ 转发/ ./ 传统/ 方法/ (/ Tradition/ )/ 的/ 查询/ 命中率/ 为/ 1/ ,/ 且/ 查询/ 代价/ 较/ 低/ ,/ 然后/ 其/ 路由/ 条目/ 中/ 的/ 信息量/ 和/ 空间/ 开销/ 比较/ 大/ ./ 相对/ 于/ 传统/ 方法/ ,/ ODBF/ 的/ 查询/ 命中率/ 与其/ 十分/ 接近/ ,/ 查询/ 代价/ 略低/ ,/ 而/ 各路/ 由/ 条目/ 中/ 的/ 信息量/ 和/ 空间/ 开销/ 则/ 大大/ 低于/ 传统/ 方法/ ;/ 与/ SQR/ 相比/ ,/ ODBF/ 以/ 相对/ 较大/ 的/ 各路/ 由/ 条目/ 中/ 的/ 信息量/ 和/ 空间/ 开销/ ,/ 获得/ 了/ 远/ 小于/ SQR/ 的/ 查询/ 代价/ 和/ 较/ 高/ 的/ 查询/ 命中率/ ./ 图/ 3/ 中/ ODBF/ 的/ 有效/ 路由/ 命中率/ 的/ 理论值/ 与/ 实验/ 值/ 基本/ 吻合/ ,/ 理论值/ 与/ 实验/ 值/ 相互/ 佐证/ ,/ 表明/ ODBF/ 的/ 有效性/ 和/ 正确性/ ./ 相对/ 于/ 以/ 单个/ BloomFilter/ 作为/ 路由/ 条目/ ,/ ODBF/ 以/ 稍/ 大/ 的/ 空间/ 开销/ 获得/ 了/ 很/ 高/ 的/ 路由/ 成功率/ ;/ 相对/ 于/ 传统/ 方法/ 的/ BloomFilter/ ,/ ODBF/ 的/ 空间/ 开销/ 小得多/ ,/ 而/ 查询/ 成功率/ 与/ 之/ 非常/ 接近/ ./ 6/ 结论/ 本文/ 提出/ 了/ 基于/ 操作/ 型/ 衰落/ BloomFilter/ 的/ 弱/ 状态/ 路由/ 算法/ ODBF/ (/ OperativeDecayingBloomFilter/ )/ ./ ODBF/ 通过/ 分别/ 保存/ 对象/ 的/ 衰落/ BloomFilter/ 及源/ 节点/ 等/ 信息/ ,/ 使得/ ODBF/ 能够/ 有效/ 解决/ 基于/ 衰落/ BloomFilter/ 的/ 路由/ 信息/ 在/ P2P/ 网络/ 中/ 的/ 多径/ 叠加/ 和/ 信息/ 回流/ 问题/ ,/ 有效/ 抑制/ 噪声/ 的/ 影响/ ,/ 进而/ 使得/ 基于/ 弱/ 状态/ 的/ 路由/ 能够/ 以/ 很/ 高/ 的/ 概率/ 沿着/ 正确方向/ 进行/ ./ 

