Page1/ 一种/ 障碍/ 空间/ 中/ 的/ 反/ 犽/ 最近/ 邻/ 查询方法/ 于晓楠/ 谷峪张/ 天成/ 于戈/ (/ 东北大学/ 信息科学/ 与/ 工程学院/ 沈阳/ 110819/ )/ (/ 医学影像/ 计算/ 教育部/ 重点/ 实验室/ (/ 东北大学/ )/ 沈阳/ 110819/ )/ 摘要/ 随着/ 基于/ 位置/ 的/ 服务/ (/ LBS/ )/ 和物/ 联网/ 的/ 快速/ 发展/ ,/ 空间/ 查询/ 技术/ 越来越/ 重要/ ,/ 而/ 空间/ 查询/ 中/ 的/ 最近/ 邻/ 查询/ 及其/ 各种/ 变体/ 有着/ 广泛/ 的/ 应用/ ./ 近几年/ ,/ 已有/ 较/ 多/ 对于/ 查询/ 前/ k/ 个/ 反/ 最近/ 邻/ 对象/ (/ RkNN/ )/ 的/ 研究/ ,/ 其中/ 大部分/ 针对/ 的/ 都/ 是/ 理想/ 欧氏/ 空间/ ./ 而/ 在/ 真实/ 的/ 情况/ 下/ ,/ 反/ k/ 最近/ 邻/ 查询/ 通常/ 受/ 障碍物/ 影响/ ./ 文中/ 研究/ 了/ 障碍/ 空间/ 中反/ k/ 最近/ 邻/ 查询/ 算法/ ,/ 提出/ 了/ 一种/ 基于/ 障碍/ Voronoi/ 图/ 的/ 高效/ 的/ 剪枝/ 方法/ ./ 根据/ Voronoi/ 图/ 和/ 障碍/ 距离/ 的/ 特性/ ,/ 大幅度/ 减少/ 了/ 数据/ 点/ 处理/ 个数/ ./ 最后/ ,/ 作者/ 使用/ 真实/ 的/ 数据/ 集/ 和/ 多种/ 方式/ 分布/ 的/ 模拟/ 数据/ ,/ 验证/ 了/ 算法/ 的/ 高效性/ 和/ 准确性/ ./ 关键词/ 空间/ 查询/ ;/ 反/ k/ 最近/ 邻/ (/ RkNN/ )/ ;/ 障碍/ 空间/ ;/ Voronoi/ 图/ 1/ 引言/ 近年来/ ,/ 物/ 联网/ 和/ 基于/ 位置/ 的/ 服务/ [/ 1/ ]/ 获得/ 了/ 越来越/ 多/ 的/ 关注/ ./ 空间/ 查询/ 作为/ 重要/ 的/ 支撑/ 技术/ ,/ 涉/ Page2/ 泛/ 的/ 应用/ ①/ ./ k/ 最近/ 邻/ 查询/ 反映/ 了/ 查询/ 点/ 受到/ 哪些/ 空间数据/ 点/ 影响/ 较大/ ,/ 而/ 反/ k/ 最近/ 邻/ 查询/ 则/ 反映/ 了/ 查询/ 点/ 对/ 哪些/ 空间数据/ 点/ 影响/ 较大/ ./ 此外/ ,/ 现有/ 的/ 空间/ 查询/ 工作/ 大多/ 考虑/ 理想/ 的/ 欧式/ 空间/ 和/ 路网/ 空间/ ./ 然而/ ,/ 地面/ 或/ 室内/ 移动/ 的/ 物体/ 一般/ 都/ 会/ 受到/ 地理/ 条件/ 的/ 限制/ (/ 例如/ 建筑/ 、/ 湖泊/ 等/ )/ ,/ 之间/ 的/ 最/ 短距离/ 必须/ 考虑/ 障碍物/ 的/ 因素/ ./ 例如/ ,/ 在/ 灾区/ 医疗/ 和/ 餐饮/ 安置/ 点/ 通过/ 对/ 其它/ 居住/ 安置/ 点/ 的/ 反/ k/ 近邻/ 查询/ ,/ 来/ 获取/ 合理/ 的/ 资源配置/ ,/ 由于/ 其它/ 废弃/ 形成/ 的/ 障碍/ ,/ 需要/ 考虑/ 障碍/ 空间/ 内/ 的/ 反/ k/ 近邻/ 查询方法/ ./ 有关/ 无障碍/ 空间/ 和/ 路/ 网上/ 的/ kNN/ 和/ RkNN/ 查询/ 以及/ 障碍/ 空间/ 的/ kNN/ 查询/ ,/ 都/ 已经/ 有/ 较/ 多/ 的/ 研究/ 工作/ ./ 对于/ 无障碍/ 空间/ 的/ kNN/ 查询/ ,/ 近年来/ 广泛/ 使用/ 的/ 是/ 基于/ Voronoi/ 图/ 处理/ 的/ 技术/ ./ Sharifzadeh/ 等/ 人/ [/ 9/ ]/ 给出/ 了/ 结合/ Voronoi/ 图/ 和/ R/ -/ tree/ 的/ 索引/ 结构/ 的/ 方法/ ,/ 能够/ 进行/ 高效/ 的/ kNN/ 查询/ ./ 无障碍/ 空间/ 中/ 的/ RkNN/ 查询/ 是/ 获取/ 那些/ k/ 近邻/ 里面/ 有/ 查询/ 点/ q/ 的/ 空间数据/ 点/ ./ 对于/ 无障碍/ 空间/ RkNN/ 查询/ ,/ 文献/ [/ 7/ -/ 8/ ,/ 10/ ]/ 提出/ 了/ 无需/ 预计/ 算/ 的/ RkNN/ 查询方法/ ./ Stanoi/ 等/ 人/ [/ 7/ ]/ 给出/ 了/ 在/ 查询/ 点/ q/ 处/ 将/ 空间/ 划分/ 成六等份/ (/ 每份/ 为/ 60/ °/ )/ 的/ 方法/ ,/ 可以/ 证明/ 在/ 每/ 一个/ 区域/ 离/ 查询/ 点/ q/ 的/ 第/ k/ 个/ 最近/ 临/ 的/ 点/ 以外/ 的/ 区域/ 都/ 可以/ 被/ 剪枝/ ,/ 得到/ 这些/ 未/ 被/ 剪枝/ 的/ 区域/ 里/ 的/ 数据/ 点/ 就/ 成为/ RkNN/ 查询/ 的/ 候选/ 点/ ./ Tao/ 等/ 人/ [/ 8/ ]/ 提出/ 了/ 使用/ 中垂线/ 性质/ 剪枝/ 搜索/ 空间/ 的/ 方法/ ,/ 有效/ 的/ 剪枝/ 那些/ 处在/ k/ 个/ 以上/ 中垂线/ 的/ 半/ 区间/ 的/ 数据/ 点/ ./ Wu/ 等/ 人/ [/ 10/ ]/ 提出/ 一种/ 新/ 的/ 剪枝/ 方法/ —/ —/ —/ FINCH/ 算法/ ,/ 该/ 方法/ 并未/ 使用/ 文献/ [/ 8/ ]/ 提出/ 的/ 中垂线/ ,/ 而是/ 使用/ 一个/ 多边形/ 近似/ 未/ 被/ 剪枝/ 区域/ ./ 文献/ [/ 11/ ]/ 提出/ 了/ 使用/ Voronoi/ 图/ 的/ 方法/ 解决/ 无障碍/ 的/ RkNN/ 查询方法/ ./ 路/ 网上/ 的/ kNN/ 查询/ 也/ 有/ 相关/ 研究/ ,/ 文献/ [/ 12/ ]/ 使用/ 基于/ Voronoi/ 图/ 的/ 方法/ 查询/ 路/ 网上/ 的/ k/ 最近/ 邻/ ./ 尽管/ 这些/ 方法/ 能/ 高效/ 地/ 执行/ kNN/ 和/ RkNN/ 查询/ ,/ 但/ 它们/ 都/ 是/ 在/ 理想/ 的/ 欧氏/ 空间/ 即/ 无/ 障碍物/ 空间/ 中/ 查询/ ,/ 而/ 在/ 现实/ 场景/ 中/ 这种/ 假设/ 是/ 不合理/ 的/ ./ 对于/ 障碍/ 空间/ 中/ 的/ 查询/ ,/ 目前/ 主要/ 集中/ 在/ kNN/ 查询/ 的/ 研究/ ./ 障碍/ 空间/ 中/ ,/ kNN/ 查询/ 是/ 获取/ 在/ 障碍/ 距离/ 上/ k/ 个/ 距离/ 查询/ 点/ q/ 最近/ 的/ 空间数据/ 点/ ./ Zhang/ 等/ 人/ [/ 13/ ]/ 给出/ 了/ 在/ 障碍/ 空间/ 中/ 基于/ R/ -/ tree/ 方法/ 解决/ 常见/ 的/ 空间/ 查询/ ,/ 例如/ ,/ 范围/ 查询/ 、/ 最近/ 邻/ 查询/ 、/ e/ -/ 距离/ 连接/ 查询/ 、/ 最近/ 对/ 查询/ ./ Xia/ 等/ 人/ [/ 14/ ]/ 提出/ 了/ 障碍/ 最近/ 邻/ 查询/ (/ ONN/ 查询/ )/ 方法/ ,/ 用/ 增量/ 的/ 方式/ 处理/ 只/ 与/ 查询/ 有关/ 的/ 数据/ 点/ 和/ 障碍物/ ,/ 因此/ 文献/ [/ 14/ ]/ 过滤/ 掉/ 了/ 大量/ 数据/ 点/ 和/ 障碍物/ ./ Gao/ 等/ 人/ [/ 15/ ]/ 通过/ 有效/ 地/ 分割/ 对象/ 行进/ 的/ 路径/ ,/ 提出/ 了/ 障碍/ 空间/ 内/ 连续/ kNN/ 查询/ 的/ 优化/ 方法/ ./ 但是/ 在/ 障碍/ 空间/ 中/ ,/ 现有/ 的/ 空间/ 查询/ 仅仅/ 局限于/ 上述/ 以/ kNN/ 查询/ 为主/ 的/ 几种/ 查询/ 上/ ,/ 并/ 没有/ 涉及/ RkNN/ 查询/ ./ 因此/ 在/ 障碍/ 空间/ 中/ ,/ 如何/ 查询/ 反/ kNN/ 对象/ 是/ 如今/ 亟待解决/ 的/ 问题/ ./ 本文/ 给出/ 一种/ 基于/ 障碍/ Voronoi/ 图/ 的/ 高效/ 搜索/ 反/ kNN/ 对象/ 的/ 方法/ ./ 通过/ 剪枝/ 的/ 方法/ ,/ 减少/ 查询处理/ 反/ kNN/ 的/ 代价/ ./ 我们/ 结合/ 了/ 划分/ 空间/ 六等份/ 、/ 障碍/ Voronoi/ 图/ 的/ 性质/ 等/ 方法/ 和/ R/ -/ tree/ 索引/ 结构/ ,/ 由/ Voronoi/ 邻居/ 增量/ 地/ 得到/ 反/ kNN/ 查询/ 结果/ ./ 本文/ 的/ 主要/ 贡献/ 如下/ :/ (/ 1/ )/ 我们/ 形式化/ 定义/ 了/ 障碍/ 反/ kNN/ 查询/ ,/ 在/ 障碍/ 空间/ 中/ 添加/ 了/ 一种/ 新/ 的/ 查询/ ./ (/ 2/ )/ 我们/ 将/ 空间/ 划分/ 成六等份/ 的/ 方法/ 用于/ 障碍/ 空间/ ,/ 并/ 将/ 此/ 方法/ 加以改进/ ./ (/ 3/ )/ 利用/ 障碍/ Voronoi/ 图/ 的/ 性质/ ,/ 我们/ 设计/ 了/ 几种/ 剪枝/ 策略/ ,/ 基于/ 过滤/ 和/ 求/ 精/ 的/ 思想/ ,/ 大幅度/ 地/ 减少/ 搜索/ 障碍/ 反/ kNN/ 对象/ 的/ 时间/ 和/ 空间/ ./ (/ 4/ )/ 我们/ 通过/ 实验/ 验证/ 了/ 本文/ 提出/ 的/ 算法/ 在/ 时间/ 和/ 空间/ 上/ 的/ 优越性/ ./ 本文/ 第/ 2/ 节/ 形式化/ 定义/ 障碍/ 空间/ 反/ kNN/ 查询/ ,/ 并/ 给出/ 相关/ 定义/ ;/ 第/ 3/ 节/ 详细描述/ 提出/ 的/ 障碍/ 空间/ 中反/ kNN/ 查询/ 的/ 高效/ 处理/ 方法/ ,/ 提出/ 几种/ 剪枝/ 和/ 求/ 精/ 的/ 方法/ ;/ 第/ 4/ 节/ 给出/ 实验/ 结果/ 和/ 数据分析/ ;/ 最后/ ,/ 第/ 5/ 节/ 总结/ ./ 2/ 问题/ 定义/ 在/ 给定/ 的/ 空间/ 中/ 存在/ 着/ 数据/ 点/ 和/ 障碍物/ ,/ 设/ 数据/ 点/ 集合/ 为/ P/ =/ {/ p1/ ,/ p2/ ,/ …/ ,/ pn/ }/ ,/ 障碍物/ 集合/ 为/ O/ =/ {/ O1/ ,/ O2/ ,/ …/ ,/ Om/ }/ 以及/ 一个/ 查询/ 点/ q/ ./ 为了/ 不失/ 一般性/ ,/ 本文/ 假设/ 障碍物/ 为/ 线段/ 形状/ ,/ 且/ 障碍物/ 不/ 相交/ 于/ 数据/ 点/ ,/ 即/ O/ =/ {/ O1/ ,/ O2/ ,/ …/ ,/ Om/ |/ Oi/ =/ Oi1Oi2/ ,/ Oi1Oi2/ ∩/ pj/ ≠/ / ,/ i/ ∈/ [/ 1/ ,/ m/ ]/ ,/ j/ ∈/ [/ 1/ ,/ n/ ]/ }/ ./ 查询/ 点/ 和/ 数据/ 点/ 之间/ 可能/ 存在/ 着/ 障碍物/ ,/ 因此/ 数据/ 点/ 移动/ 到/ 障碍物/ 时/ ,/ 不能/ 穿过/ 障碍物/ ,/ 需要/ 绕/ 着/ 障碍物/ 移动/ ,/ 如图/ 1/ 所示/ ./ 数据/ 点/ p1/ 和/ 查询/ 点/ q/ 之间/ 无/ 障碍物/ ,/ 但是/ 数据/ 点/ p2/ 和/ q/ 之间/ 有/ 障碍物/ O1/ ,/ 所以/ p2/ 移动/ 到/ q/ 需要/ 绕过/ 障碍物/ O1/ ,/ 可以/ 经由/ p2/ →/ O11/ →/ q/ 路径/ 到达/ q/ 或者/ 经/ p2/ →/ O12/ →/ q/ 到达/ q/ ./ 由此可知/ 在/ 障碍/ 空间/ 中/ 的/ 两点/ 之间/ 的/ 距离/ 有/ 可能/ 需要/ 绕/ ①/ LvYing/ ./ Thekeytechnologiesresearchonkeywordsearchinthemobileenvironment/ (/ 吕瑛/ :/ 移动/ 环境/ 中/ 关键词/ 搜索/ 的/ Page3/ 过/ 障碍物/ 计算/ ,/ 下面/ 给出/ 障碍/ 距离/ 的/ 定义/ ./ 定义/ 1/ ./ 障碍/ 距离/ ./ 在/ 有/ 障碍物/ 的/ 空间/ 中/ ,/ 欧氏/ 距离/ 记为/ deuc/ ,/ 若/ 两点/ p/ 和/ q/ 之间/ 无/ 障碍物/ ,/ 则/ 障碍/ 距离/ 即/ 两点/ 间/ 的/ 欧氏/ 距离/ ,/ 即/ dobs/ (/ p/ ,/ q/ )/ =/ deuc/ (/ p/ ,/ q/ )/ ;/ 若/ p/ 和/ q/ 之间/ 有/ 障碍物/ Ok/ ,/ 则/ 障碍/ 距离/ 为/ 这两点/ 绕过/ 障碍物/ 的/ 最/ 短距离/ ,/ 即/ dobs/ (/ p/ ,/ q/ )/ =/ min/ {/ deuc/ (/ q/ ,/ Ok1/ )/ +/ deuc/ (/ Ok1/ ,/ p2/ )/ ,/ 由图/ 1/ 可知/ ,/ |/ O11p2/ |/ =/ |/ O11a/ |/ ,/ |/ O12p2/ |/ =/ |/ O12b/ |/ ,/ 因此/ 点/ p2/ 绕过/ 障碍物/ O1/ 到达/ 点/ q/ 的/ 路径/ 的/ 长度/ 为/ |/ qa/ |/ 和/ |/ qb/ |/ ,/ 又/ |/ qa/ |/ </ |/ qb/ |/ ,/ 因此/ 点/ p2/ 到/ 查询/ 点/ q/ 的/ 障碍/ 距离/ 为/ |/ qa/ |/ ./ 根据/ 数据/ 点/ 之间/ 的/ 障碍/ 距离/ 的/ 定义/ ,/ 下面/ 给出/ 障碍/ Voronoi/ 图/ 的/ 定义/ ./ 为了/ 帮助/ 理解/ 障碍/ Voronoi/ 图/ ,/ 我们/ 先/ 介绍/ 障碍/ 中垂线/ ./ 定义/ 2/ ./ 障碍/ 中垂线/ ./ 在/ 障碍/ 空间/ 中/ ,/ 两点/ p/ 和/ q/ 的/ 障碍/ 中垂线/ 上/ 的/ 点/ 到/ p/ 和/ q/ 的/ 障碍/ 距离/ 相等/ ,/ 记为/ lbisobs/ (/ p/ ,/ q/ )/ =/ {/ px/ |/ dobs/ (/ p/ ,/ px/ )/ =/ dobs/ (/ q/ ,/ px/ )/ }/ ./ 引理/ 1/ ./ 障碍/ 中垂线/ 是/ 由/ 直线/ 组成/ 或/ 由/ 射线/ 和/ 曲线/ 段/ 共同/ 组成/ ./ 证明/ ./ 当/ 两点/ 之间/ 无/ 障碍物/ 时/ ,/ 障碍/ 中垂线/ 即/ 为/ 欧氏/ 空间/ 的/ 中垂线/ ;/ 当/ 两点/ 之间/ 存在/ 障碍物/ 时/ ,/ 在/ 被/ 障碍物/ 遮挡/ 的/ 区域/ 里/ 的/ 中垂线/ 是/ 双曲线/ 的/ 一部分/ ./ 如图/ 2/ 所示/ ,/ 点/ q/ 和/ p2/ 的/ 障碍/ 中垂线/ 是/ 这样/ 得到/ 的/ :/ 假设/ 点/ q/ 和/ p2/ 无障碍/ ,/ 得到/ 中垂线/ ln1n5/ ;/ 将/ q/ 和/ 障碍物/ 的/ 边界/ 连线/ 与/ 直线/ ln1n5/ 相交/ 于点/ n2/ 和/ n4/ ,/ 得到/ 在/ ln1n5/ 一侧/ 查询/ 点/ q/ 不能/ 移动/ 到/ 的/ 区域/ O11n2n4O12/ ;/ 在/ 此/ 区域/ 外/ ,/ 射线/ ln1n2/ 和/ ln4n5/ 即为/ 障碍/ 中垂线/ 的/ 一段/ ;/ 在/ 此/ 区域/ 内/ ,/ 取/ 任意/ 一点/ x/ ,/ 使得/ x/ 绕过/ 障碍物/ O11O12/ 到/ q/ 的/ 欧氏/ 距离/ 等于/ x/ 到/ p2/ 的/ 欧氏/ 距离/ ,/ 即/ |/ qO12/ |/ +/ |/ O12x/ |/ =/ |/ xp2/ |/ 以及/ |/ qO11/ |/ +/ |/ O11x/ |/ =/ |/ xp2/ |/ ,/ 所以/ 点/ x/ 在/ 以/ O12/ 、/ p2/ 为/ 焦点/ 、/ |/ qO12/ |/ 为/ 焦距/ 的/ 双曲线/ 的/ 一支/ (/ 弧线/ n3n4/ )/ 上/ 以及/ 以/ O11/ 、/ p2/ 为/ 焦点/ 、/ |/ qO11/ |/ 为/ 焦距/ 的/ 双曲线/ 的/ 一支/ (/ 弧线/ n2n3/ )/ 上/ ./ 因此/ ,/ 点/ q/ 和/ p2/ 的/ 障碍/ 中垂线/ 为/ 由/ 射线/ n2n1/ 、/ 弧线/ n2n3/ 、/ 弧线/ n3n4/ 和/ 射线/ n4n5/ 组成/ ./ n/ 个/ 数据/ 点/ 的/ 无/ 障碍物/ 的/ 空间/ 中/ ,/ Voronoi/ 图是/ 由/ n/ 个/ 以/ 数据/ 点为/ 中心/ 的/ 区域/ 组成/ 的/ ,/ 即/ V/ (/ P/ )/ =/ {/ V/ (/ p1/ )/ ,/ V/ (/ p2/ )/ ,/ …/ ,/ V/ (/ pn/ )/ }/ ,/ 其中/ 每个/ 区域/ 的/ 边界/ b/ (/ pi/ )/ 是/ 所有/ 到/ 中心点/ 距离/ 最小/ 的/ 点/ 的/ 集合/ ,/ 即/ V/ (/ pi/ )/ =/ {/ (/ pi/ ,/ b/ (/ pi/ )/ )/ |/ / p/ ∈/ b/ (/ pi/ )/ ,/ deuc/ (/ p/ ,/ pi/ )/ / deuc/ (/ p/ ,/ pj/ )/ ,/ j/ ≠/ i/ ,/ j/ ∈/ [/ 1/ ,/ n/ ]/ }/ ./ 结合/ 前文/ 的/ 障碍/ 距离/ ,/ 下面/ 给出/ 在/ 障碍/ 空间/ 中/ 的/ 障碍/ Voronoi/ 图/ 的/ 定义/ ./ 定义/ 3/ ./ 障碍/ Voronoi/ 图/ ./ 障碍/ Voronoi/ 图由/ n/ 个/ 以/ 数据/ 点为/ 中心/ 的/ 障碍/ 区域/ 组成/ ,/ 即/ Vobs/ (/ P/ )/ =/ {/ Vobs/ (/ p1/ )/ ,/ Vobs/ (/ p2/ )/ ,/ …/ ,/ Vobs/ (/ pn/ )/ }/ ./ 其中/ 每个/ 障碍/ 区域/ 的/ 边界/ 是/ 所有/ 到/ 中心点/ 的/ 障碍/ 距离/ 最小/ 的/ 点/ 的/ 集合/ ,/ 即/ Vobs/ (/ pi/ )/ =/ {/ (/ pi/ ,/ bobs/ (/ pi/ )/ )/ |/ / p/ ∈/ bobs/ (/ pi/ )/ ,/ dobs/ (/ p/ ,/ pi/ )/ / dobs/ (/ p/ ,/ pj/ )/ ,/ j/ ≠/ i/ ,/ j/ ∈/ [/ 1/ ,/ n/ ]/ }/ ./ 定理/ 1/ ./ 障碍/ Voronoi/ 图/ 的/ 各个/ 障碍/ 区域/ V/ (/ pi/ )/ 的/ 边界/ bobs/ (/ pi/ )/ 在/ 数据/ 点/ pi/ 与/ 其它/ 各个/ 数据/ 点/ pj/ 的/ 障碍/ 中垂线/ 上/ ,/ 即/ / p/ ∈/ bobs/ (/ pi/ )/ ,/ p/ ∈/ lbisobs/ (/ pi/ ,/ pj/ )/ ,/ i/ ,/ j/ ∈/ [/ 1/ ,/ n/ ]/ ,/ j/ ≠/ i/ ./ 证明/ ./ 由/ 定义/ 3/ 得到/ ,/ 障碍/ 区域/ 的/ 边界/ 上/ 的/ 点/ 到/ 中心点/ 的/ 障碍/ 距离/ 比/ 到/ 其它/ 数据/ 点/ 的/ 障碍/ 距离/ 小/ ,/ 又/ 由/ 定义/ 2/ 可知/ ,/ 到/ 中心点/ 的/ 障碍/ 距离/ 和/ 到/ 其它/ 数据/ 点/ 的/ 障碍/ 距离/ 相等/ 的/ 点/ 落/ 在/ 障碍/ 中垂线/ 上/ ,/ 因此/ ,/ 障碍/ 区域/ 的/ 边界/ 也/ 落/ 在/ 相应/ 的/ 障碍/ 中垂线/ 上/ ./ 我们/ 假设/ 障碍/ 空间/ 的/ 数据/ 点集/ 为/ P/ =/ {/ p1/ ,/ p2/ ,/ …/ ,/ p31/ }/ ,/ 障碍物/ 集为/ O/ =/ {/ O11O12/ ,/ O21O22/ ,/ O31O32/ }/ ,/ 由/ 定义/ 3/ 可以/ 画出/ 障碍/ Voronoi/ 图如图/ 3/ 所示/ ,/ 例如/ 障碍/ 区域/ V/ (/ p3/ )/ 的/ 边界/ bobs/ (/ p3/ )/ 就是/ 数据/ 点/ p3/ 与/ p1/ ,/ p2/ ,/ p4/ ,/ p5/ ,/ p31/ ,/ p29/ 的/ 障碍/ 中垂线/ 组成/ 的/ ./ 首先/ 定义/ 障碍/ 空间/ 中/ 的/ kNN/ 查询/ 如下/ ./ 定义/ 4/ ./ 障碍/ kNN/ 查询/ ./ 在/ 障碍/ 空间/ 中/ ,/ k/ 最近/ 邻/ 查询/ 返回/ k/ 个/ 距离/ 查询/ 点/ q/ 最近/ 的/ 数据/ 点/ ,/ 即/ kNNobs/ (/ q/ ,/ k/ ,/ P/ ,/ O/ )/ =/ {/ p/ ∈/ P/ |/ x/ ∈/ P/ |/ dobs/ (/ p/ ,/ q/ )/ / dobs/ (/ p/ ,/ x/ )/ |/ </ k/ }/ ./ 如果/ 多个/ 数据/ 点有/ 相同/ 的/ 距/ 查询/ 点/ q/ 第/ k/ 个/ 远/ 的/ 距离/ ,/ 那么/ 这些/ 点/ 也/ 都/ 包含/ 在/ kNN/ 查询/ 结果/ 集中/ ./ Page4/ 例如/ ,/ 图/ 3/ 中/ 查询/ 点/ q/ 的/ 障碍/ 2NN/ 为/ 2NNobs/ (/ q/ ,/ 2/ ,/ P/ ,/ O/ )/ =/ {/ p13/ ,/ p7/ }/ ./ 定义/ 5/ ./ 障碍/ RkNN/ 查询/ ./ 在/ 障碍/ 空间/ 中/ ,/ 在/ 数据/ 集/ P/ 中/ 获取/ 那些/ k/ 个/ 最近/ 邻中/ 包含/ 查询/ 点/ q/ 的/ 空间数据/ 点/ ,/ 即/ RkNNobs/ (/ q/ ,/ k/ ,/ P/ ,/ O/ )/ =/ {/ p/ ∈/ P/ |/ q/ ∈/ kNNobs/ (/ p/ ,/ k/ ,/ P/ ,/ O/ )/ }/ ./ 例如/ ,/ 图/ 3/ 中/ 查询/ 点/ q/ 的/ 障碍/ R2NN/ 为/ R2NN/ (/ q/ )/ obs/ (/ q/ ,/ 2/ ,/ P/ ,/ O/ )/ =/ {/ p13/ ,/ p17/ ,/ p22/ }/ ./ 3/ 障碍/ R/ 犽/ NN/ 查询/ 在/ 本节/ 中/ ,/ 我们/ 给出/ 在/ 障碍/ 空间/ 中/ 对于/ 一个/ 查询/ 点/ q/ 的/ RkNN/ 查询/ 算法/ ./ 3.1/ 约/ 减/ 数据/ 集/ 下面/ 给出/ 约/ 减/ 候选/ 集/ 的/ 剪枝/ 算法/ ./ 引理/ 2/ ./ 只有/ 到/ 查询/ 点/ q/ 经过/ 的/ 最少/ 数据/ 点/ 个数/ 小于/ 或/ 等于/ k/ 的/ 那些/ 对象/ 才能/ 放入/ 候选/ 集/ ./ 证明/ ./ 假设/ numOfObj/ (/ p/ ,/ q/ )/ 为/ 对象/ p/ 到/ 查询/ 点/ q/ 需要/ 经过/ 最少/ 的/ 数据/ 点/ 的/ 个数/ ./ 当/ k/ =/ 1/ 时/ ,/ 即/ 查询/ q/ 的/ RNN/ ,/ 而/ 那些/ 能/ 成为/ q/ 的/ RNN/ 的/ 数据/ 点/ p/ 一定/ 是/ q/ 的/ Voronoi/ 邻居/ 的/ ,/ 即点/ p/ 满足/ numOfObj/ (/ p/ ,/ q/ )/ / 1/ ;/ 当/ k/ / 1/ 时/ ,/ 假设/ numOfObj/ (/ pi/ ,/ q/ )/ / i/ ,/ 0/ / i/ / k/ ,/ 那么/ numOfObj/ (/ pk/ +/ 1/ ,/ q/ )/ / k/ +/ 1/ ./ 又/ 由/ Voronoi/ 图/ 的/ 定义/ 可以/ 得到/ ,/ pk/ +/ 1/ 是/ pi/ ∈/ {/ p1/ ,/ …/ ,/ pk/ }/ 的/ 一个/ Voronoi/ 邻居/ ./ 因此/ ,/ 可以/ 得到/ numOfObj/ (/ pk/ +/ 1/ ,/ q/ )/ / max/ (/ numOfObj/ (/ p/ ,/ pi/ )/ )/ +/ 1/ / k/ +/ 1/ ,/ 引理/ 2/ 得证/ ./ 如图/ 4/ 所示/ ,/ 空间数据/ 点集/ 为/ {/ p1/ ,/ p2/ ,/ …/ ,/ p6/ }/ ,/ 障碍物/ 集/ 为/ {/ O11O12/ }/ ,/ 查询/ 点为/ q/ ,/ 数据/ 点/ p5/ 不能/ 放入/ 候选/ 集/ ,/ 因为/ p5/ 需要/ 最少/ 经过/ 3/ 个/ 数据/ 点到/ q/ ,/ 即/ p5/ →/ p3/ →/ p1/ →/ q/ ;/ 同理/ ,/ 数据/ 点/ p4/ ,/ p6/ 也/ 都/ 不能/ 放入/ 候选/ 集中/ ;/ 因此/ ,/ 此/ 区域/ 的/ 候选/ 集/ 为/ 阴影/ 区域/ Scnd/ (/ 0/ )/ =/ {/ p3/ ,/ p2/ ,/ p1/ }/ ./ GD/ (/ P/ ,/ q/ ,/ k/ )/ 方法/ :/ 由/ 引理/ 2/ ,/ 取/ 到/ 查询/ 点/ q/ 的/ 点/ 满足/ 经过/ 不/ 大于/ k/ 个/ 的/ 数据/ 点/ ./ 如/ 算法/ 1/ 所/ 描述/ ,/ 首先/ 构造/ 一个/ 最小/ 堆/ ,/ 存放/ 将要/ 计算/ 的/ 数据/ 点/ 及其/ 到/ 查询/ 点/ 的/ 距离/ ./ 由/ VN/ (/ q/ )/ 求/ 出/ 查询/ 点/ q/ 的/ 邻居/ 集合/ ,/ 计算/ 这些/ 邻居/ 点到/ q/ 点/ 的/ 障碍/ 距离/ ,/ 再/ 将/ 这些/ 邻居/ 点/ 放入/ 最小/ 堆/ ./ 对于/ 每次/ 从堆/ 中/ 取出/ 的/ 元素/ e/ ,/ 若/ 它/ 到/ q/ 点/ 的/ 经过/ 的/ 数据/ 点/ 个数/ 不/ 大于/ k/ ,/ 就/ 将/ 其/ 加入/ 候选/ 集/ Scnd/ 中/ ;/ 再求/ 出/ 元素/ e/ 的/ 邻居/ 集合/ ,/ 若/ 这些/ 邻居/ 没/ 被/ 访问/ 过/ 的话/ ,/ 将/ 其/ numOfObject/ 加/ 1/ ,/ 放入/ 最小/ 堆/ 和/ Visited/ 集合/ 中/ ./ 算法/ 1/ ./ GD/ (/ P/ ,/ q/ ,/ k/ )/ ./ 输入/ :/ 查询/ 点/ q/ ,/ 查询/ 对象/ 集/ P/ ,/ RkNN/ 查询/ 的/ k/ 值/ 输出/ :/ 约/ 减/ 的/ 对象/ 候选/ 集/ Scnd1/ ./ MinheapH/ =/ {/ }/ ;/ Visited/ =/ {/ }/ ;/ 2/ ./ ForeachpointpinVN/ (/ q/ )/ Do3/ ./ Add/ (/ p/ ,/ 1/ )/ intoH/ ;/ addpintoVisited/ ;/ 4/ ./ WhileH/ ≠/ / Do5/ ./ Deheapanentrye/ ;/ 6/ ./ IfnumOfObj/ (/ e/ ,/ q/ )/ / kthen7/ ./ Add/ (/ e/ ,/ dobs/ (/ e/ ,/ q/ )/ )/ intoScnd/ ;/ 8/ ./ ForeachpointpinVN/ (/ e/ )/ Do9/ ./ Ifp/ / Visitedthen10/ ./ numOfObj/ (/ p/ ,/ q/ )/ =/ numOfObj/ (/ e/ ,/ q/ )/ +/ 1/ ;/ 11/ ./ add/ (/ p/ ,/ numOfObj/ (/ p/ ,/ q/ )/ )/ intoH/ ;/ 12/ ./ addpintoVisted/ ;/ 13/ ./ ReturnScnd/ ;/ 引理/ 3/ ./ 对象/ p/ 与/ 查询/ 点/ q/ 之间/ 经过/ 若干/ 对象/ 如/ pi/ ,/ 连接/ p/ 与/ pi/ ,/ 若/ 无/ 障碍物/ ,/ 则/ 计数/ countNonObs/ (/ p/ ,/ q/ )/ 增加/ 1/ ./ 如果/ countNonObs/ (/ p/ ,/ q/ )/ / k/ ,/ 则/ 对象/ p/ 被/ 剪枝/ ./ 证明/ ./ 对象/ p/ 与/ pi/ 之间/ 若/ 无/ 障碍物/ ,/ 说明/ 点/ p/ 到/ pi/ 一定/ 比/ 到/ 查询/ 点/ q/ 的/ 欧氏/ 距离/ 近/ ,/ 若/ p/ 到/ q/ 之/ Page5/ 间/ 存在/ 障碍物/ ,/ 那么/ p/ 到/ pi/ 的/ 障碍/ 距离/ 也/ 一定/ 比到/ q/ 的/ 近/ ./ 当/ k/ =/ 1/ 时/ ,/ 这样/ 的/ pi/ 就/ 有/ 可能/ 是/ p/ 的/ NN/ ,/ 而/ q/ 一定/ 不能/ 是/ p/ 的/ NN/ ;/ 若/ k/ ≠/ 1/ 时/ ,/ 只要/ 这样/ 的/ pi/ 有/ 不/ 小于/ k/ 个/ ,/ 那么/ p/ 的/ kNN/ 一定/ 不能/ 包含/ 查询/ 点/ q/ ,/ 即/ countNonObs/ (/ p/ ,/ q/ )/ / k/ 时/ ,/ p/ 一定/ 不是/ 候选/ 集里/ 的/ 对象/ ./ 如图/ 5/ 所示/ ,/ 由于/ 数据/ 点/ p3/ 与/ 查询/ 点/ q/ 之间/ 经过/ p2/ 和/ p1/ 对象/ ,/ 而且/ p3p1/ 无/ 障碍物/ ,/ p3p2/ 也/ 无/ 障碍物/ ,/ 所以/ p3/ 的/ 2NN/ 一定/ 不/ 包含/ 点/ q/ ,/ 因此/ 点/ p3/ 被/ 移除/ 候选/ 集/ ,/ 候选/ 集约/ 减/ 为/ 阴影/ 区域/ Scnd/ (/ 0/ )/ =/ {/ p1/ ,/ p2/ }/ ./ CheckNumOfObs/ (/ Scnd/ (/ i/ )/ ,/ q/ ,/ O/ ,/ k/ )/ 方法/ :/ 由/ 引理/ 3/ 查看/ 候选/ 集里/ 的/ 每/ 一个/ 对象/ p/ 与/ 它/ 到/ 的/ 查询/ 点/ q/ ,/ 若/ p/ 与/ 它/ 经过/ 的/ 对象/ 之间/ 有/ k/ 个/ 以上/ 无/ 障碍物/ 的/ 对象/ ,/ 则/ p/ 被/ 剪枝/ ./ 如/ 算法/ 2/ 所示/ ,/ 对于/ 候选/ 集中/ 的/ 每个/ 对象/ p/ ,/ 以/ p/ 为/ 圆心/ ,/ |/ pq/ |/ 为/ 半径/ 做/ 圆/ R/ (/ p/ )/ ,/ 若/ 在/ 此/ 候选/ 集中/ 的/ 对象/ e/ 也/ 在/ 这个/ 圆里/ ,/ 就/ 考查/ p/ 与/ e/ 之间/ 是否/ 存在/ 障碍物/ ,/ 若/ 对于/ 一个/ p/ ,/ 有/ 多于/ k/ 个/ 无/ 障碍物/ ,/ 则/ p/ 就/ 从/ 候选/ 集中/ 去除/ ./ 算法/ 2/ ./ CheckNumOfObs/ (/ Scnd/ (/ i/ )/ ,/ q/ ,/ O/ ,/ k/ )/ ./ 输入/ :/ 候选/ 集/ Scnd/ (/ i/ )/ ,/ 查询/ 点/ q/ ,/ 障碍物/ 集/ O/ ,/ RkNN/ 查/ 输出/ :/ 约/ 减/ 的/ 对象/ 候选/ 集/ Scnd/ (/ i/ )/ 1/ ./ count/ =/ 0/ ;/ 2/ ./ ForeachpointpinScnd/ (/ i/ )/ Do3/ ./ ForeachpointeinR/ (/ p/ )/ ∩/ Scnd/ (/ i/ )/ Do4/ ./ IfNonObs/ (/ p/ ,/ e/ )/ =/ =/ truethen5/ ./ count/ ++/ ;/ 6/ ./ Ifcount/ / kthen7/ ./ Scnd/ (/ i/ )/ =/ Scnd/ (/ i/ )/ -/ p/ ;/ 8/ ./ ReturnScnd/ (/ i/ )/ ;/ 引理/ 4/ ./ 若/ 候选/ 集中/ 的/ 点/ p/ 的/ Voronoi/ 邻居/ 都/ 被/ 剪枝/ 了/ ,/ 则/ 此点/ p/ 也/ 被/ 剪枝/ ./ 证明/ ./ 假设/ 在/ 候选/ 集中/ 取/ 一点/ 为/ p/ ,/ 且点/ p/ 的/ Voronoi/ 邻居/ (/ 如/ v/ )/ 都/ 被/ 剪枝/ ./ 由/ Voronoi/ 图/ 的/ 性质/ 知/ ,/ p/ 到/ q/ 一定/ 经过/ p/ 的/ Voronoi/ 邻居/ (/ 如/ v/ )/ ,/ 而/ countNonObs/ (/ v/ ,/ q/ )/ / k/ ,/ 从而/ 得到/ countNonObs/ (/ p/ ,/ q/ )/ / k/ +/ 1/ >/ k/ ,/ 由/ 引理/ 3/ 知/ ,/ 点/ p/ 被/ 剪枝/ ./ PruneByNeighbor/ (/ Scnd/ (/ i/ )/ ,/ q/ )/ 方法/ ./ 由/ 引理/ 4/ 对/ 候选/ 集/ 对象/ 进一步/ 剪枝/ ,/ 如/ 算法/ 3/ 描述/ ,/ 设置/ 布尔/ 变量/ nonPruneFlag/ 为/ false/ 来/ 标记/ 此/ 对象/ 是/ 需要/ 被/ 剪枝/ 的/ ./ 对于/ 候选/ 集中/ 每个/ 对象/ (/ 如/ p/ )/ 的/ 每个/ 邻居/ ,/ 若/ 都/ 被/ 剪枝/ ,/ 则/ 此/ 对象/ p/ 也/ 被/ 剪枝/ ./ 算法/ 3/ ./ PruneByNeighbor/ (/ Scnd/ (/ i/ )/ ,/ q/ )/ ./ 输入/ :/ 候选/ 集/ Scnd/ (/ i/ )/ ,/ 查询/ 点/ q/ 输出/ :/ 约/ 减/ 的/ 对象/ 候选/ 集/ Scnd/ (/ i/ )/ 1/ ./ nonPruneFlag/ =/ =/ false/ ;/ 2/ ./ ForeachpointpinScnd/ (/ i/ )/ Do3/ ./ Foreachpointe/ ∈/ VN/ (/ p/ )/ Do4/ ./ Ife/ ∈/ Scnd/ (/ i/ )/ then5/ ./ nonPruneFlag/ =/ =/ true/ ;/ 6/ ./ IfnonPruneFlag/ =/ =/ falsethen7/ ./ Scnd/ (/ i/ )/ =/ Scnd/ (/ i/ )/ -/ p/ ;/ 8/ ./ ReturnScnd/ (/ i/ )/ ;/ 3.2/ 障碍/ R/ 犽/ NN/ 查询/ 下面/ 介绍/ 在/ 障碍/ 空间/ 中/ ,/ 给出/ 查询/ 点/ q/ ,/ 数据/ 点集/ P/ ,/ 障碍物/ 集为/ O/ 的/ RkNN/ 查询/ ./ 算法/ 4/ 描述/ 了/ 障碍/ 空间/ 的/ RkNN/ 查询/ 的/ 过程/ ./ 算法/ 4/ ./ RkNNobs/ (/ q/ ,/ k/ ,/ P/ ,/ O/ )/ ./ 输入/ :/ q/ :/ 查询/ 点/ 输出/ :/ RkNN/ 查询/ 的/ 结果/ Scnd1/ ./ For1/ / i/ / 6DoScnd/ (/ i/ )/ =/ / ;/ Scnd/ =/ / ;/ 2/ ./ SixRegionPartition/ (/ P/ ,/ O/ )/ ;/ 3/ ./ DrawVG/ (/ P/ ,/ O/ )/ ;/ 4/ ./ ForeachScnd/ (/ i/ )/ Do5/ ./ Scnd/ (/ i/ )/ =/ GD/ (/ P/ ,/ q/ ,/ k/ )/ ;/ 6/ ./ Scnd/ (/ i/ )/ =/ CheckNumOfObs/ (/ Scnd/ (/ i/ )/ ,/ q/ ,/ O/ ,/ k/ )/ ;/ 7/ ./ PruneByNeighbor/ (/ Scnd/ (/ i/ )/ ,/ q/ )/ ;/ 8/ ./ ForeachpointpinScnd/ (/ i/ )/ Do9/ ./ pk/ =/ k/ -/ thNNofp/ ;/ 10/ ./ Ifdobs/ (/ p/ ,/ q/ )/ >/ dobs/ (/ p/ ,/ pk/ )/ Then11/ ./ Scnd/ (/ i/ )/ =/ Scnd/ -/ p/ ;/ 12/ ./ Scnd/ =/ Scnd/ ∪/ Scnd/ (/ i/ )/ ;/ 13/ ./ ReturnScnd/ ;/ 首先/ 将/ 空间/ 划分/ 成/ 6/ 等份/ 区域/ ,/ 再/ 由/ 空间/ 的/ 数据/ 点/ 和/ 障碍物/ 画/ 障碍/ Voronoi/ 图/ ;/ 对于/ 6/ 个/ 等/ 份/ 的/ 每个/ 区域/ 中/ ,/ 进行/ 数据/ 约/ 减/ :/ 只取/ 那些/ 到/ 查询/ 点/ q/ 经过/ 数据/ 点/ 个数/ 不/ 大于/ k/ 的/ 数据/ 点/ 放入/ 候选/ 集/ (/ 算法/ 1/ 的/ GD/ (/ P/ ,/ q/ ,/ k/ )/ )/ ,/ 再/ 查看/ 候选/ 集中/ 的/ 点/ p/ 与/ 它/ 到/ q/ 之前/ 的/ 所有/ 点/ 之间/ ,/ 若有/ 不少/ 于/ k/ 个点/ 无/ 障碍物/ ,/ 则/ 这样/ 的/ 点/ p/ 就/ 从/ 候选/ 集中/ 去除/ (/ 算法/ 2Page6/ 的/ CheckNumOfObs/ (/ Scnd/ (/ i/ )/ ,/ q/ ,/ O/ ,/ k/ )/ )/ ,/ 若/ 候选/ 集中/ 存在/ 点/ p/ ,/ 它/ 的/ 所有/ Voronoi/ 邻居/ 都/ 被/ 移除/ 候选/ 集/ ,/ 则/ 此点/ p/ 也/ 被/ 移除/ 候选/ 集/ (/ 算法/ 3/ 的/ PruneBy/ -/ Neighbor/ (/ Scnd/ (/ i/ )/ ,/ q/ )/ )/ ;/ 最后/ ,/ 对/ 候选/ 集中/ 的/ 每个/ 对象/ p/ ,/ 计算/ p/ 的/ 第/ k/ 个/ 近邻/ 点/ pk/ ,/ 若/ 查询/ 点/ q/ 到/ p/ 的/ 障碍/ 距离/ dobs/ (/ p/ ,/ q/ )/ 大于/ pk/ 到/ q/ 的/ 障碍/ 距离/ dobs/ (/ p/ ,/ pk/ )/ ,/ 则/ q/ 的/ RkNNs/ 里/ 没有/ 点/ p/ ,/ 因此/ 从/ 候选/ 集中/ 移除/ 点/ p/ ./ 最后/ ,/ 把/ 6/ 个/ 区域/ 的/ 候选/ 集合/ 并/ 起来/ ,/ 即/ 为/ 图/ 6/ 障碍/ RkNN/ 查询/ (/ k/ =/ 2/ )/ 将/ 空间/ 分成/ 6/ 等份/ ;/ 在/ 每/ 一等/ 份/ 中/ 分别/ 对/ 候选/ 集/ 进行/ 约/ 减/ ,/ 首先/ 由/ 算法/ 1/ 选择/ 那些/ 到/ 查询/ 点/ q/ 经过/ 的/ 数据/ 点/ 个数/ 不/ 大于/ k/ 的/ 对象/ 点/ ,/ 如/ region/ (/ 0/ )/ 里/ 的/ p3/ ,/ p4/ ,/ p5/ ,/ 它们/ 到/ q/ 需要/ 至少/ 经过/ 3/ 个/ 数据/ 点/ ,/ 因此/ 被/ 剪枝/ 掉/ ,/ 得到/ 图/ 6/ 中非/ 空白/ 区域/ 中/ 的/ 对象/ 构成/ 候选/ 集/ ;/ 接着/ 由/ 算法/ 2/ 去除/ 那些/ 到/ 此/ 对象/ 之前/ 的/ 数据/ 点有/ 不少/ 于/ k/ 个/ 无/ 障碍物/ 的/ 对象/ ,/ 例如/ region/ (/ 5/ )/ 中/ 的/ 点/ p29/ 到/ p28/ 和/ p27/ 两个/ 数据/ 点/ 都/ 无/ 障碍物/ ,/ 因此/ 点/ p29/ 被/ 剪枝/ 掉/ ,/ 得到/ 图/ 6/ 中单/ 斜线/ 阴影/ 区域/ 中/ 的/ 对象/ 构成/ 的/ 候选/ 集/ ;/ 再/ 由/ 算法/ 3/ 剪枝/ 掉/ 那些/ 它们/ 的/ 所有/ Voronoi/ 邻居/ 都/ 被/ 剪枝/ 掉/ 的/ 数据/ 点/ ;/ 最后/ ,/ 对于/ 候选/ 集中/ 的/ 每/ 一个/ 对象/ ,/ 分别/ 计算/ 它们/ 的/ R2NNs/ ,/ 若/ q/ 被/ 包含/ 在/ 这些/ R2NNs/ 里/ ,/ 则/ 此/ 对象/ 点/ 放入/ 结果/ 集中/ ,/ 可以/ 得到/ 如图/ 6/ 所示/ 的/ 双/ 斜线/ 阴影/ 区域/ 的/ 结果/ 集/ R2NN/ (/ q/ )/ obs/ (/ q/ ,/ 2/ ,/ P/ ,/ O/ )/ =/ {/ p13/ ,/ p17/ ,/ p22/ }/ ./ 所求/ 结果/ ./ 设定/ 空间/ 中/ 数据/ 点/ 的/ 个数/ 为/ n/ ,/ 障碍物/ 的/ 个数/ 为/ m/ ,/ 则/ 预处理/ (/ 即/ 构建/ 障碍/ Voronoi/ 图/ )/ 的/ 时间/ 为/ O/ (/ nlog/ (/ n/ +/ m/ )/ )/ ,/ 设/ 剪枝/ 后/ 剩余/ 数据/ 点/ 的/ 个数/ 为/ n/ (/ n/ / n/ )/ ,/ 则/ 查询处理/ 时间/ 为/ nlogn/ ./ 如图/ 6/ 所示/ ,/ 障碍/ 空间/ 中/ ,/ 对象/ 集为/ P/ =/ {/ p1/ ,/ p2/ ,/ …/ ,/ p31/ }/ ,/ 障碍物/ 集为/ O/ =/ {/ O11O12/ ,/ O21O22/ ,/ O31O32/ }/ ,/ 查询/ 点为/ q/ ,/ 由/ 障碍/ Voronoi/ 图/ 的/ 定义/ ,/ 画出/ 如图/ 6/ 所示/ 的/ 空间/ 障碍/ Voronoi/ 图/ ./ 4/ 实验/ 结果/ 与/ 分析/ 在/ 这/ 一节/ ,/ 我们/ 用/ 实验/ 评估/ 本文/ 所/ 提出/ 的/ 算法/ ORkNN/ 的/ 处理/ 时间/ 和/ I/ // O/ 代价/ ,/ 并/ 与/ 用/ 基本/ 方法/ (/ Basic/ 方法/ )/ 查询/ 障碍/ 空间/ RkNN/ 对象/ (/ 即求/ 出/ 每个/ 点/ 的/ kNN/ ,/ 再/ 找出/ 这些/ kNNs/ 里面/ 包含/ 有/ 查询/ 点/ q/ 的/ 数据/ 点/ )/ 进行/ 比较/ ./ 我们/ 的/ 实验/ 使用/ C++/ 语言/ 实现/ ,/ 运行/ 环境/ 为/ InterCore2E84003/ ./ 00GHzCPU/ 、/ 3.00/ GB/ 内存/ 和/ 运行/ 32/ 位/ Windows7/ 操作系统/ ./ 本文/ 使用/ 模拟/ 数据/ 集/ 和/ 真实/ 数据/ 集/ 验证/ 所/ 提出/ 的/ 算法/ ./ 模拟/ 数据/ 集/ 的/ 大小/ 和/ 真实/ 数据/ 集/ 的/ 大小/ 相同/ ,/ 数据/ 点/ 和/ 障碍物/ 的/ 分布/ 表示/ 为/ (/ Distribute/ _/ Point/ ,/ Distribution/ _/ Obstacle/ )/ ,/ 其中/ Distribute/ _/ Point/ 、/ Distribution/ _/ Obstacle/ 取值/ 为/ 均匀分布/ (/ Uniform/ )/ 、/ Page7/ 真实/ 分布/ (/ Real/ )/ 、/ 正态分布/ (/ Normal/ )/ ./ 真实/ 数据/ 集/ 为/ 包含/ 76999MBRs/ 的/ 地势/ 数据/ hypsogr/ (/ 如图/ 7/ 所示/ )/ 和/ 包含/ 36334MBRs/ 的/ 铁路线/ 数据/ rrlines/ ①/ (/ 如图/ 8/ 所示/ )/ ./ 为/ 不失/ 一般性/ ,/ 假设/ 障碍物/ 为/ 线段/ ./ 我们/ 使用/ 两个/ R/ -/ tree/ 分别/ 索引/ 数据/ 点/ (/ hypsogr/ 数据/ )/ 和/ 障碍物/ (/ rrlines/ 数据/ )/ ./ R/ -/ tree/ 节点/ 大小/ 缺省值/ 为/ 4KB/ ,/ k/ 值/ 缺省/ 为/ 10/ ,/ 查询/ 点/ q/ 随机/ 从/ 数据/ 集中/ 取出/ ,/ 障碍/ RkNN/ 查询/ 执行/ 100/ 次取/ 平均值/ ,/ 实验/ 结果显示/ 出/ 我们/ 提出/ 的/ 算法/ 处理/ 的/ 高效性/ ./ k/ 值/ 的/ 影响/ ./ 图/ 9/ 和/ 图/ 10/ 分别/ 给出/ 了/ k/ 值/ 的/ 变化/ 对/ CPU/ 时间/ 和/ 磁盘/ I/ // O/ 代价/ 的/ 影响/ ./ 由图/ 9/ 可以/ 看出/ ,/ k/ 值/ 从/ 1/ 变化/ 到/ 20/ 的/ 过程/ 中/ ,/ CPU/ 时间/ 随着/ k/ 值/ 的/ 增加/ 而/ 增加/ ./ ORkNN/ 方法/ 的/ CPU/ 时间/ 增长率/ 快/ 于/ 传统/ 方法/ ,/ 是因为/ 前者/ 剪枝/ 过程/ 中/ 时间/ 随/ k/ 增长/ 得/ 比/ 传统/ 方法/ 增长/ 得/ 要/ 快/ ,/ 而且/ 由于/ 两种/ 方法/ 的/ CPU/ 时间/ 差距/ 较大/ ,/ 因此/ 用/ 时间/ 的/ 对数/ 表示/ ./ 实验/ 结果表明/ 本文/ 提出/ 的/ ORkNN/ 方法/ 明显/ 好于/ 传统/ Basic/ 方法/ ./ 图/ 10/ 给出/ 了/ 随着/ k/ 值/ 的/ 增加/ 对/ 磁盘/ I/ // O/ 代价/ 的/ 影响/ ./ 两种/ 方法/ 的/ 磁盘/ I/ // O/ 代价/ 都/ 随着/ k/ 值/ 的/ 增加/ 而/ 增加/ ./ 这是/ 由于/ k/ 值越/ 大/ ,/ 需要/ 访问/ 的/ 数据/ 点越/ 多/ ,/ 磁盘/ I/ // O/ 越大/ ,/ 而且/ 由于/ 我们/ 的/ ORkNN/ 方法/ 仅/ 需要/ 访问/ 离/ 查询/ 点较/ 近/ 的/ 数据/ 点/ ,/ 因此/ 磁盘/ I/ // O/ 代价/ 要/ 小/ 很多/ ./ 可以/ 看出/ ,/ ORkNN/ 方法/ 要/ 优于/ 传统/ 方法/ ./ 数据/ 点/ 个数/ 的/ 影响/ ./ 为了/ 研究/ 数据/ 点/ 的/ 密度/ 对/ CPU/ 执行/ 性能/ 和/ 获得/ 数据/ 点/ 个数/ 的/ 影响/ ,/ 我们/ 给出/ 了/ 如图/ 11/ 和/ 图/ 12/ 所示/ 的/ 实验/ 结果/ ./ 由图/ 11/ 可以/ 得到/ ,/ 随着/ 数据/ 点/ 数量/ 的/ 增加/ ,/ 我们/ 的/ ORkNN/ 方法/ 的/ CPU/ 用时/ 下降/ ,/ 而/ 传统/ 的/ 方法/ 的/ CPU/ 用时/ 增加/ ,/ 而且/ ORkNN/ 方法/ 比/ 传统/ 方法/ 的/ 耗时/ 少/ ./ 这/ 是因为/ 对于/ ORkNN/ 方法/ ,/ 数据/ 点越/ 密集/ ,/ 查询/ 点/ 和/ 它/ 的/ 障碍/ Voronoi/ 邻居/ 之间/ 越近/ ,/ 计算/ ①/ R/ -/ treePortal/ -/ Spatial/ (/ geographical/ )/ Datasetsin2Dspace/ ./ Page8/ 障碍/ 距离/ 的/ 时候/ 大多数/ 只/ 需要/ 计算/ 欧氏/ 距离/ ./ 而/ 传统/ Basic/ 方法/ 需要/ 计算/ 每/ 一个/ 数据/ 点/ 的/ 障碍/ 反/ kNN/ ,/ 因此/ 对于/ Basic/ 方法/ ,/ 数据/ 点越/ 多/ ,/ CPU/ 用时/ 越/ 多/ ./ 图/ 12/ 反映/ 了/ 随着/ 数据/ 点/ 的/ 数量/ 的/ 增加/ ,/ 传统/ Basic/ 方法/ 的/ 磁盘/ I/ // O/ 代价/ 随之/ 增加/ ,/ 而/ 我们/ 的/ ORkNN/ 方法/ 的/ I/ // O/ 代价/ 下降/ ./ 这是/ 由于/ Basic/ 方法/ 需要/ 计算/ 的/ 每/ 一个/ 数据/ 点/ ,/ 因而/ 数据/ 点越/ 多/ ,/ 计算/ 的/ 数据/ 点越/ 多/ ./ 对于/ ORkNN/ 方法/ ,/ 数据/ 点越/ 密集/ ,/ 需要/ 访问/ 的/ 障碍物/ 越/ 少/ ,/ 因而/ 在/ 每个/ 区域/ 里/ 剪枝/ 掉/ 的/ 数据/ 点越/ 多/ ,/ 所以/ ORkNN/ 方法/ 的/ 磁盘/ I/ // O/ 代价/ 随着/ k/ 值/ 的/ 增加/ 而/ 减少/ ./ 图/ 12/ 数据/ 点/ 的/ 个数/ 对/ 磁盘/ I/ // O/ 代价/ 的/ 影响/ 障碍物/ 个数/ 的/ 影响/ ./ 我们/ 通过/ 图/ 13/ 和/ 图/ 14/ 研究/ 障碍物/ 密度/ 的/ 变化/ 对/ 执行/ 效率/ 的/ 影响/ ./ 由图/ 13/ 可知/ ,/ 障碍物/ 密度/ 越大/ ,/ CPU/ 执行/ 时间/ 越/ 多/ ,/ 而且/ 我们/ 的/ ORkNN/ 方法/ 明显/ 好于/ 传统/ 方法/ ./ 这是/ 由于/ 障碍物/ 个数/ 越/ 多/ ,/ 需要/ 计算/ 的/ 障碍/ 距离/ 越/ 多/ ,/ CPU/ 时间/ 越大/ ./ 而/ 计算/ 障碍/ 距离/ 要/ 比/ 计算/ 欧氏/ 距离/ 用时/ 更/ 多/ ,/ 传统/ Basic/ 方法/ 需要/ 计算/ 每/ 一个/ 数据/ 点/ 的/ 障碍/ 距离/ ,/ 比/ ORkNN/ 方法/ 计算/ 的/ 障碍/ 距离/ 要/ 多/ ,/ 因此/ 它/ 的/ CPU/ 耗时/ 更/ 多/ ./ 图/ 14/ 给出/ 了/ 不同/ 数量/ 的/ 障碍物/ 对/ 磁盘/ I/ // O/ 代价/ 的/ 影响/ ./ 随着/ 障碍物/ 个数/ 的/ 增加/ ,/ 两种/ 方法/ 的/ I/ // O/ 代价/ 都/ 随之/ 增加/ ,/ 但是/ ORkNN/ 方法/ 由于/ 有效/ 的/ 剪枝/ 策略/ 极大/ 地/ 减少/ 了/ 障碍物/ 的/ 访问/ 数量/ ,/ 因此/ 磁盘/ I/ // O/ 代价/ 明显/ 比/ 传统/ Basic/ 方法/ 的/ 代价/ 少/ 很多/ ./ 图/ 14/ 障碍物/ 的/ 个数/ 对/ 磁盘/ I/ // O/ 代价/ 的/ 影响/ 数据分布/ 的/ 影响/ ./ 图/ 15/ 和/ 图/ 16/ 分别/ 给出/ 了/ 两种/ 算法/ 不同/ 数据分布/ 影响/ 的/ 实验/ 结果/ ./ 横坐标/ 1/ ,/ 2/ ,/ …/ ,/ 6/ 分别/ 代表/ 数据/ 点/ 和/ 障碍物/ 分布/ (/ 数据/ 点/ 分布/ ,/ 障碍物/ 分布/ )/ 的/ 不同/ 组合/ ,/ 分别/ 对应/ 为/ (/ U/ ,/ R/ )/ ,/ (/ R/ ,/ R/ )/ ,/ (/ N/ ,/ R/ )/ ,/ (/ U/ ,/ N/ )/ ,/ (/ R/ ,/ N/ )/ 和/ (/ N/ ,/ N/ )/ ./ 例如/ ,/ (/ U/ ,/ N/ )/ 代表/ 数据/ 点/ 服从/ 均匀分布/ ,/ 障碍物/ 服从/ 正态分布/ ./ 图/ 16/ 不同/ 数据分布/ 对/ 磁盘/ I/ // O/ 代价/ 的/ 影响/ 由图/ 15/ 给出/ 了/ 数据/ 点/ 和/ 障碍物/ 服从/ 于/ 不同/ 的/ 数据分布/ 对/ CPU/ 执行/ 时间/ 的/ 影响/ 情况/ ./ 可以/ 看出/ ,/ 数据分布/ 的/ 变化/ 对/ CPU/ 执行/ 时间/ 的/ 影响/ 不/ 大/ ,/ 但是/ 我们/ 的/ ORkNN/ 方法/ 由于/ 访问/ 数据/ 比/ Basic/ 方法/ 少/ ,/ 因此/ 在/ CPU/ 时间/ 上/ 优于/ 传统/ 方法/ ./ 图/ 16/ 给出/ 了/ 不同/ 的/ 数据分布/ 组合/ 对/ 数据/ 点/ 和/ 障碍物/ 在/ 磁盘/ I/ // O/ 代价/ 上/ 的/ 影响/ ./ 可以/ 发现/ ,/ 数据分布/ 的/ 不同/ 对/ 磁盘/ I/ // O/ 代价/ 影响/ 不大/ ./ ORkNN/ 方法/ 由于/ 具有/ 高效/ 的/ 剪枝/ 方法/ ,/ 减少/ 了/ 大量/ 访问/ 数据/ Page9/ 点/ 和/ 障碍物/ 的/ 个数/ ,/ 降低/ 了/ 磁盘/ I/ // O/ 代价/ ,/ 因此/ ORkNN/ 方法/ 优于/ 传统/ Basic/ 方法/ ./ 5/ 结论/ 本文/ 研究/ 障碍/ 空间/ 中反/ k/ 最近/ 邻/ 查询/ 算法/ ./ 我们/ 形式化/ 定义/ 了/ 障碍/ 反/ kNN/ 查询/ ,/ 提出/ 了/ 一种/ 基于/ 障碍/ Voronoi/ 图/ 的/ 高效/ 的/ 剪枝/ 方法/ ./ 将/ 空间/ 划分/ 成/ 6/ 等份/ 的/ 方法/ 用于/ 障碍/ 空间/ ,/ 并/ 将/ 此/ 方法/ 加以改进/ ./ 根据/ Voronoi/ 图/ 和/ 障碍/ 距离/ 的/ 特性/ ,/ 大幅度/ 减少/ 了/ 处理/ 数据/ 点/ 和/ 障碍物/ 的/ 数量/ ./ 使用/ 真实/ 的/ 数据/ 集/ 和/ 多种/ 方式/ 分布/ 的/ 模拟/ 数据/ 的/ 实验/ 结果/ ,/ 表明/ 了/ 所/ 提出/ 算法/ 的/ 高效性/ 和/ 准确性/ ./ 

