Page1/ 体系结构/ 层/ 状态/ 型/ 方面/ 的/ 建模/ 和/ 编织/ —/ —/ —/ 基于/ LTS/ 的/ 方法/ 杨/ 春花/ 1/ )/ ,/ 2/ )/ 王/ 海洋/ 1/ )/ 1/ )/ (/ 山东大学/ 计算机科学/ 与/ 技术/ 学院/ 济南/ 250100/ )/ 2/ )/ (/ 山东/ 轻工业/ 学院/ 信息科学/ 与/ 技术/ 学院/ 济南/ 250353/ )/ 摘要/ 状态/ 型/ 方面/ 是/ 一种/ 封装/ 反应式/ 关注点/ 的/ 方面/ ,/ 它/ 需要/ 专门/ 的/ 切点/ 机制/ 来/ 跟踪/ 系统/ 的/ 执行/ 历史/ ./ 然而/ 当前/ 在/ 体系结构/ 层/ 还/ 缺乏/ 支持/ 状态/ 型/ 方面/ 建模/ 的/ 有效/ 机制/ ./ 针对/ 这一/ 问题/ ,/ 提出/ 一种/ 体系结构/ 层/ 状态/ 型/ 方面/ 的/ 建模/ 和/ 编织/ 方法/ ./ 它/ 以/ 标记/ 转换/ 系统/ (/ LabelledTransitionSystem/ ,/ LTS/ )/ 为/ 底层/ 形式化/ ,/ 建立/ 了/ 用于/ 识别系统/ 运行/ 轨迹/ 中/ 特定/ 模式/ 的/ 切点/ 机制/ ,/ 并/ 定义/ 了/ 支持/ 多种/ 通知/ 类型/ 的/ 编织/ 运算/ ./ 该/ 方法/ 当前/ 已/ 在/ 一个/ 基于/ FSP/ 规范/ 的/ 原型/ 编织/ 工具/ 上/ 实现/ ,/ 并用/ 一个/ 实例/ 说明/ 了/ 该/ 方法/ 的/ 有效性/ ./ 关键词/ 方面/ ;/ 状态/ 型/ 方面/ ;/ 编织/ ;/ 标记/ 转换/ 系统/ ;/ 面向/ 方面/ 的/ 软件开发/ 1/ 引言/ 面向/ 方面/ 的/ 软件开发/ (/ Aspect/ -/ OrientedSoftwarePage2/ 状态/ 型/ 方面/ (/ statefulaspects/ )/ [/ 1/ ]/ 是/ 这样/ 一类/ 方面/ :/ 其/ 通知/ 的/ 触发/ 条件/ 不是/ 单个/ 的/ 关联/ 点/ ,/ 而是/ 一组/ 关联/ 点/ 的/ 序列/ ./ 换言之/ ,/ 该类/ 方面/ 的/ 触发/ 执行/ 依赖于/ 系统/ 的/ 计算/ 历史/ ./ 例如/ ,/ 某个/ 额外/ 的/ 行为/ 需要/ 在/ 执行/ 一组/ 事件/ 后/ 执行/ 就是/ 一个/ 典型/ 的/ 状态/ 型/ 方面/ ./ 本质/ 上/ 说/ ,/ 状态/ 型/ 方面/ 封装/ 的/ 是/ 反应式/ (/ reactive/ )/ 的/ 关注点/ [/ 2/ ]/ ./ 这类/ 关注点/ 是/ 软件设计/ 和/ 编程/ 经常/ 需要/ 面临/ 的/ 一类/ 关注点/ ,/ 它们/ 强烈/ 地/ 依赖于/ 系统/ 的/ 运行/ 历史/ ./ 而/ 由于/ 基本/ 系统/ (/ thebasesystem/ )/ 一般/ 提供/ 基于/ 过程/ 的/ 、/ 面向对象/ 的/ 或/ 基于/ 组件/ 的/ 分解/ ,/ 并/ 没有/ 提供/ 合适/ 的/ 表示/ 和/ 实现/ 反应式/ 系统/ 的/ 抽象/ 形式/ [/ 2/ ]/ ,/ 造成/ 这/ 类/ 关注点/ 不能/ 有效/ 地/ 模块化/ ./ 与/ 常规/ 的/ 方面/ 相比/ ,/ 状态/ 型/ 方面/ 需要/ 专门/ 的/ 切点/ 机制/ 来/ 跟踪/ 系统/ 的/ 执行/ 历史/ 和/ 确定/ 通知/ 的/ 触发/ 点/ ./ 当前/ ,/ 在/ 代码/ 层/ 已经/ 提出/ 许多/ 支持/ 状态/ 型/ 方面/ 编程/ 的/ 方法/ ,/ 典型/ 的/ 如/ EAOP/ [/ 1/ ]/ 、/ JAsCo/ [/ 3/ ]/ 、/ DEP/ (/ Declar/ -/ ativeEventPatterns/ )/ [/ 4/ ]/ 等/ ./ 这些/ 方法/ 采用/ 基于/ 有限/ 状态机/ 的/ 切点/ 机制/ 对/ 程序运行/ 历史/ 中/ 的/ 特定/ 事件/ 模式/ 进行/ 识别/ ,/ 当/ 模式识别/ 后/ ,/ 通知/ 的/ 代码/ 被/ 激发/ ./ 然而/ 在/ 体系结构/ 层/ ,/ 当前/ 提出/ 的/ 面向/ 方面/ 的/ 建模/ 方法/ ,/ 如/ DAOP/ // ADL/ [/ 5/ ]/ 、/ ABC/ // ADL/ [/ 6/ ]/ 、/ AAM/ 方法/ [/ 7/ ]/ 、/ PRISMA/ [/ 8/ ]/ 等/ ,/ 仅/ 关注/ 于/ 常规/ 方面/ 的/ 建模/ 和/ 编织/ ,/ 并/ 没有/ 提供/ 支持/ 状态/ 型/ 方面/ 建模/ 的/ 有效/ 机制/ ./ 针对/ 上述/ 问题/ ,/ 吸取/ 代码/ 层/ 状态/ 型/ 方面/ 建模/ 的/ 某些/ 思想/ ,/ 提出/ 了/ 一种/ 体系结构/ 层/ 状态/ 型/ 方面/ 建模/ 和/ 编织/ 的/ 方法/ ./ 它/ 采用/ 标记/ 转换/ 系统/ (/ LabelledTransitionSystem/ ,/ LTS/ )/ [/ 9/ ]/ 为/ 底层/ 形式化/ ,/ 建立/ 了/ 识别系统/ 运行/ 迹中/ 特定/ 模式/ 的/ 切点/ 机制/ ,/ 定义/ 了/ 支持/ 多种/ 通知/ 类型/ 的/ 编织/ 运算/ ./ 该/ 方法/ 已/ 在/ 一个/ 原型/ 编织/ 工具/ —/ —/ —/ LTSbAW/ ①/ 上/ 获得/ 实现/ ./ 本文/ 第/ 2/ 节/ 给出/ 方法/ 原理/ ;/ 第/ 3/ 节是/ 方法/ 的/ 实现/ 和/ 实例/ 研究/ ;/ 第/ 4/ 节/ 分析/ 相关/ 工作/ ;/ 第/ 5/ 节是/ 结束语/ ./ 2/ 基于/ LTS/ 的/ 状态/ 型/ 方面/ 的/ 建模/ 和/ 编织/ 考虑/ 图/ 1/ 所示/ 的/ 一个/ 国际/ 旅行社/ 代理/ 例子/ [/ 10/ ]/ ./ 该/ 代理/ 可以/ 为/ 其/ 分支机构/ 提供/ 检索/ 旅行/ 目的地/ 信息/ (/ queryInfo/ )/ 以及/ 订购/ 旅行/ 项目/ (/ book/ )/ 的/ 服务/ ./ 为/ 激励/ 其/ 分支机构/ 提高/ 业绩/ ,/ 该/ 代理/ 制定/ 一项/ 奖励/ 措施/ :/ 若/ 在/ 使用/ 这些/ 服务/ 后/ 最终/ 订购/ 了/ (/ book/ )/ 一个/ 旅行/ 项目/ ,/ 将/ 得到/ 一个/ 奖励/ (/ bonus/ )/ ./ 奖励/ 是/ 一个/ 方面/ ,/ 而且/ 其/ 是否/ 应用/ 依赖于/ 系统/ 执行/ 轨迹/ ./ 例如/ ,/ 若/ 某次/ 执行/ 的/ 轨迹/ 为/ login/ ,/ queryInfo/ ,/ queryInfo/ ,/ queryInfo/ ,/ logout/ ,/ 则/ 奖励/ 方面/ 不能/ 应用/ ;/ 反之/ ,/ 若/ 运行/ 轨迹/ 中/ 含有/ book/ 动作/ 时/ ,/ 如/ login/ ,/ queryInfo/ ,/ book/ ,/ queryInfo/ ,/ logout/ 可/ 应用/ ./ 因此/ ,/ 奖励/ 是/ 一个/ 状态/ 型/ 方面/ ./ 标记/ 转换/ 系统/ (/ LabelledTransitionSystem/ ,/ LTS/ )/ [/ 9/ ]/ 是/ 建模/ 和/ 分析/ 体系结构/ 行为/ 的/ 常用/ 形式化/ ,/ 本文/ 以/ LTS/ 为/ 基础/ 进行/ 了/ 适当/ 扩展/ ,/ 建立/ 了/ 支持/ 状态/ 型/ 方面/ 建模/ 的/ 切点/ 机制/ ,/ 并/ 定义/ 了/ 相应/ 的/ 编织/ 运算/ ./ 下面/ 首先/ 介绍/ LTS/ 的/ 相关/ 概念/ ,/ 然后/ 详细/ 阐述/ 本文/ 方法/ ./ 2.1/ LTS/ 相关/ 概念/ 念/ ,/ 其/ 定义/ 如下/ :/ 本文/ 采用/ 文献/ [/ 11/ -/ 12/ ]/ 中/ 给出/ 的/ LTS/ 的/ 相关/ 概设/ States/ 是/ 一个/ 状态/ 全集/ ,/ Labels/ 是/ 一个/ 动作/ 标记/ 的/ 全集/ ./ 定义/ 1/ ./ 一个/ 标记/ 转换/ 系统/ (/ LabelledTransi/ -/ tionSystem/ ,/ LTS/ )/ P/ 是/ 一个/ 四元组/ (/ S/ ,/ L/ ,/ T/ ,/ sinit/ )/ ,/ 其中/ ,/ S/ / States/ 是/ 一个/ 有限/ 的/ 状态/ 集/ ,/ L/ / Labels/ 是/ 一个/ 有限/ 的/ 标记/ 集/ ,/ T/ / (/ S/ ×/ L/ ×/ S/ )/ 是/ 一个/ 状态/ 间/ 的/ 标记/ 转换/ 关系/ ,/ sinit/ ∈/ S/ 是/ 初始状态/ ./ 一个/ LTSP/ =/ (/ S/ ,/ L/ ,/ T/ ,/ sinit/ )/ ,/ 对/ / s/ ∈/ S/ ,/ 若/ 可以/ 通过/ 转换/ (/ s/ ,/ / ,/ s/ )/ ∈/ T/ 到达/ 状态/ s/ ,/ 则/ 称/ P/ 从/ 状态/ s/ 经过/ 一步/ 执行/ 到达/ 状态/ s/ ,/ 记为/ s/ →/ / s/ ./ 设/ σ/ =/ / 1/ ,/ …/ ,/ / k/ (/ k/ / 0/ )/ 是/ 集合/ L/ 上/ 一个/ 标记/ 序列/ ,/ 用/ s/ →/ σ/ s/ 表示/ 存在/ s0/ ,/ …/ ,/ sk/ 使得/ s/ =/ s0/ ,/ s/ =/ sk/ ,/ 和/ si/ →/ / i/ +/ 1si/ +/ 1/ (/ 0/ / i/ </ k/ )/ ./ 用/ s/ →/ σ/ 表示/ / s/ ∈/ S/ ·/ s/ →/ σ/ s/ ;/ 并用/ s/ →/ 表示/ / / ∈/ L/ ,/ s/ ∈/ S/ ·/ s/ →/ / s/ ./ 一个/ LTS/ 的/ 语义/ 是从/ 其/ 初始状态/ 开始/ 可以/ 执行/ 的/ 标记/ 序列/ 的/ 集合/ ./ 定义/ 2/ (/ 运行/ 迹/ ,/ trace/ )/ ./ 已知/ LTSP/ =/ (/ S/ ,/ L/ ,/ T/ ,/ sinit/ )/ ,/ π/ =/ / 1/ ,/ …/ ,/ / k/ (/ 0/ / k/ )/ 是/ 集合/ L/ 上/ 一个/ 标记/ 序列/ ,/ 若/ / s/ ∈/ S/ ·/ sinit/ →/ π/ s/ ,/ 则/ π/ 是/ P/ 的/ 一个/ 运行/ 迹/ (/ trace/ )/ ./ ①/ Beavailableat/ :/ http/ :/ // // code/ ./ google/ ./ com/ // p/ // ltsaspectweav/ -/ ing/ // downloads/ // listPage3/ 定义/ 3/ (/ 强/ 模拟/ 等价/ ,/ strongbisimulationequiv/ -/ alence/ )/ ./ 已知/ 两个/ LTSP/ =/ (/ SP/ ,/ LP/ ,/ TP/ ,/ sinitP/ )/ 和/ Q/ =/ (/ SQ/ ,/ LQ/ ,/ TQ/ ,/ sinitQ/ )/ 且/ LP/ =/ LQ/ ,/ P/ 和/ Q/ 是/ 强/ 模拟/ 等价/ 的/ ,/ 如果/ (/ SP/ ,/ SQ/ )/ 被/ 包含/ 进/ 某个/ 模拟/ 关系/ R/ / SP/ ×/ SQ/ ,/ 该/ 关系/ 对/ 任意/ 的/ / ∈/ LP/ ,/ sp/ ∈/ SP/ ,/ sq/ ∈/ Sq/ ,/ 有/ 下式/ 成立/ :/ (/ 1/ )/ (/ (/ sp/ ,/ sq/ )/ ∈/ R/ )/ ∧/ (/ sp/ →/ / sp/ )/ / (/ / sq/ ∈/ Sq/ ·/ sq/ →/ / sq/ ∧/ (/ sp/ ,/ sq/ )/ ∈/ R/ )/ ./ (/ 2/ )/ (/ (/ sp/ ,/ sq/ )/ ∈/ R/ )/ ∧/ (/ sq/ →/ / sq/ )/ / (/ / sp/ ∈/ Sp/ ·/ sp/ →/ / sp/ ∧/ (/ sp/ ,/ sq/ )/ ∈/ R/ )/ ./ 强/ 模拟/ 等价/ 记为/ P/ ~/ Q/ ./ 定义/ 4/ (/ 并发/ 组合/ ,/ parallelcomposition/ )/ ./ 已知/ 两个/ LTSP/ =/ (/ SP/ ,/ LP/ ,/ TP/ ,/ sinitP/ )/ 和/ Q/ =/ (/ SQ/ ,/ LQ/ ,/ TQ/ ,/ sinitQ/ )/ ,/ 并发/ 组合/ (/ ‖/ )/ 是/ 一个/ 操作符/ 且/ P/ ‖/ Q/ 是/ LTS/ (/ SP/ ×/ SQ/ ,/ LP/ ∪/ LQ/ ,/ T/ ,/ (/ sinitP/ ,/ sinitQ/ )/ )/ ,/ 其中/ T/ / (/ (/ SP/ ×/ SQ/ )/ ×/ (/ LP/ ∪/ LQ/ )/ ×/ (/ SP/ ×/ SQ/ )/ )/ 由图/ 2/ 所示/ 规则/ 导出/ ./ 2.2/ 基本/ 系统/ 定义/ 本文/ 将/ 封装/ 业务/ 关注点/ 的/ 系统/ 称为/ 基本/ 系统/ (/ thebasesystem/ )/ ./ 基本/ 系统/ 由/ 组件/ 构成/ ,/ 其/ 相关/ 定义/ 如下/ ./ 定义/ 5/ (/ 组件/ ,/ component/ )/ ./ 一个/ 组件/ 是/ 一个/ LTSe/ =/ (/ S/ ,/ L/ ,/ T/ ,/ sinit/ )/ ,/ 其中/ L/ 是/ 其/ 与/ 外部环境/ 进行/ 交互/ 的/ 通信/ 动作/ 集/ ./ 组件/ 通过/ 通信/ 动作/ 与/ 外部环境/ 进行/ 交互/ ,/ 而/ 组件/ 之间/ 通过/ 共享/ 的/ 通信/ 动作/ 进行/ 交互/ ,/ 交互/ 遵循/ LTS/ 之间/ 的/ 并发/ 组合/ (/ ‖/ )/ 规则/ ./ 定义/ 6/ (/ 基本/ 系统/ ,/ thebasesystem/ )/ ./ 一个/ 基本/ 系统/ PB/ 是/ n/ 个/ 组件/ e1/ ,/ …/ ,/ en/ 的/ 并发/ 组合/ :/ PB/ =/ (/ e1/ ‖/ …/ ‖/ en/ )/ (/ n/ ∈/ N/ )/ ./ 性/ :/ 确定性/ 和/ 进展/ 性/ ./ 定义/ 7/ (/ 确定性/ )/ ./ 一个/ LTSP/ =/ (/ S/ ,/ L/ ,/ T/ ,/ sinit/ )/ 是/ 确定/ 的/ (/ deterministic/ )/ 当且/ 仅/ 当/ / / ∈/ L/ ·/ (/ / (/ s/ ,/ / ,/ s1/ )/ ∈/ T/ ∧/ (/ s/ ,/ / ,/ s2/ )/ ∈/ T/ / (/ s1/ =/ s2/ )/ )/ ./ 定义/ 8/ (/ 进展/ 性/ )/ ./ 一个/ LTSP/ =/ (/ S/ ,/ L/ ,/ T/ ,/ sinit/ )/ 是/ 可/ 进展/ 的/ (/ progressive/ )/ 当且/ 仅/ 当/ / s/ ∈/ S/ ./ (/ sinit/ →/ s/ )/ / (/ s/ →/ )/ ./ 一个/ 合理/ 的/ 基本/ 系统/ 应当/ 满足/ 如下/ 的/ 语义/ 特/ 定义/ 9/ (/ 良/ 定义/ 的/ ,/ well/ -/ defined/ )/ ./ 如果/ 一个/ LTS/ 是/ 确定/ 的/ 和/ 可/ 进展/ 的/ ,/ 则/ 称/ 该/ LTS/ 是良/ 定义/ 的/ ./ 2.3/ 基于/ 犳/ LTS/ 的/ 切点/ 机制/ 状态/ 型/ 方面/ 的/ 切点/ 根据/ 基本/ 系统/ 的/ 运行/ 轨迹/ 来/ 确定/ 通知/ 的/ 触发/ 点/ -/ 关联/ 点/ ./ 本文/ 对/ LTS/ 概念/ 进行/ 扩展/ ,/ 提出/ 了/ fLTS/ 概念/ 和/ 扩展/ 的/ 并发/ 组合/ 运算/ (/ ∝/ )/ ,/ 并/ 以此/ 为/ 基础/ ,/ 给出/ 了/ 切点/ 的/ 定义/ ./ 定义/ 10/ ./ 一个/ fLTS/ 是/ 一个/ 五元/ 组/ P/ =/ (/ S/ ,/ L/ ,/ T/ ,/ f/ ,/ sinit/ )/ ,/ 其中/ ,/ (/ S/ ,/ L/ ,/ T/ ,/ sinit/ )/ 是/ 一个/ LTS/ ,/ f/ :/ T/ →/ {/ 0/ ,/ 1/ }/ 是/ 一个/ 函数/ ./ fLTS/ 中/ 的/ 函数/ f/ 是/ 一个/ 关联/ 点/ 标记/ 函数/ ./ 给定/ 转换/ t/ ,/ 若/ f/ (/ t/ )/ =/ 1/ ,/ 则/ 该/ 转换/ 被/ 标记/ 以/ 关联/ 点/ ,/ 也/ 就是/ 通知/ 的/ 触发/ 点/ ./ 对于/ 一个/ fLTSP/ =/ (/ S/ ,/ L/ ,/ T/ ,/ f/ ,/ sinit/ )/ ,/ 定义/ 一个/ 辅助/ 一元/ 运算/ / 获得/ 其/ LTS/ :/ / (/ P/ )/ =/ (/ S/ ,/ L/ ,/ T/ ,/ sinit/ )/ ./ 另外/ ,/ 定义/ 一个/ 扩展/ 的/ 并发/ 组合/ 操作/ (/ ∝/ )/ 实现/ 对/ 一个/ LTS/ 和/ fLTS/ 的/ 并发/ 组合/ ./ 定义/ 11/ (/ 扩展/ 的/ 并发/ 组合/ ,/ extendedparallelcomposition/ )/ ./ 已知/ 一个/ LTSP/ =/ (/ SP/ ,/ LP/ ,/ TP/ ,/ sinitP/ )/ ,/ 和/ 一个/ fLTSQ/ =/ (/ SQ/ ,/ LQ/ ,/ TQ/ ,/ fQ/ ,/ sinitQ/ )/ ,/ 则/ 扩展/ 的/ 并发/ 组合/ (/ ∝/ )/ 是/ 一个/ 操作符/ 且/ P/ ∝/ Q/ 是/ fLTS/ (/ SP/ ×/ SQ/ ,/ LP/ ∪/ LQ/ ,/ TPQ/ ,/ fPQ/ ,/ (/ sinitP/ ,/ sinitQ/ )/ )/ ,/ 其中/ TPQ/ / (/ (/ SP/ ×/ SQ/ )/ ×/ (/ LP/ ∪/ LQ/ )/ ×/ (/ SP/ ×/ SQ/ )/ )/ 和/ fPQ/ :/ TPQ/ →/ {/ 0/ ,/ 1/ }/ 是/ 由/ 图/ 3/ 所示/ 规则/ 导出/ 的/ ./ 定义/ 12/ (/ 切点/ ,/ pointcut/ )/ ./ 已知/ 一个/ 基本/ 系统/ PB/ =/ (/ SB/ ,/ LB/ ,/ TB/ ,/ sinitB/ )/ ,/ PB/ 上/ 的/ 切点/ (/ pointcut/ )/ 是/ 一个/ 满足/ 下列/ 条件/ 的/ fLTSPpc/ =/ (/ Spc/ ,/ Lpc/ ,/ Tpc/ ,/ fpc/ ,/ sinitpc/ )/ :/ (/ 1/ )/ / (/ Ppc/ )/ 是良/ 定义/ 的/ ;/ (/ 2/ )/ Lpc/ / LB/ ;/ (/ 3/ )/ / (/ PB/ ∝/ Ppc/ )/ ~/ PB/ ./ 其中/ ,/ 条件/ 1/ 保证/ 切点/ fLTS/ 的/ 特性/ ;/ 条件/ 2/ 保证/ 切点/ 跟踪/ 基本/ 系统/ 的/ trace/ ,/ 没有/ 额外/ 的/ 通信/ 动作/ ;/ 条件/ 3/ 保证/ 切点/ 是/ 基本/ 系统/ 的/ 观察者/ ,/ 它/ 和/ 基本/ 系统/ 组合/ 后/ 得到/ 的/ LTS/ 和/ 基本/ 系统/ 语义/ 等价/ ,/ 不/ 改变/ 基本/ 系统/ 的/ 行为/ ./ Page4/ 依据/ 定义/ 12/ ,/ 并/ 吸取/ EAOP/ [/ 1/ ]/ 中/ 事件/ 模式/ 的/ 思想/ ,/ 下面/ 给出/ 基本/ 系统/ 运行/ 迹/ 模式/ 的/ 概念/ (/ 定义/ 13/ )/ 以及/ 根据/ 此/ 模式/ 来/ 获取/ 切点/ 的/ 具体方法/ (/ 定义/ 14/ 和/ 定理/ 1/ )/ ./ 定义/ 13/ (/ 运行/ 迹/ 模式/ )/ ./ 已知/ 基本/ 系统/ PB/ =/ (/ SB/ ,/ LB/ ,/ TB/ ,/ sinitB/ )/ ,/ 若/ / si/ ,/ si/ ,/ s/ ∈/ S/ ,/ / i/ ∈/ L/ ∧/ (/ α/ i/ ∈/ L/ ∧/ α/ i/ ≠/ / i/ )/ (/ 1/ / i/ / n/ )/ 使得/ sinitB/ →/ α/ / 1s1/ →/ / 1s1/ →/ α/ / 2s2/ →/ / 2s2/ …/ →/ α/ / nsn/ →/ / ns/ 成立/ ,/ 则/ 称/ / 1/ / 2/ …/ / n/ 为/ 基于/ PB/ 的/ 运行/ 迹/ 的/ 模式/ ,/ 其中/ →/ α/ / i/ 表示/ 连续/ 经过/ 若干个/ 标记/ α/ i/ 的/ 转换/ ./ 定义/ 14/ (/ 识别/ 运行/ 迹/ 模式/ 的/ fLTS/ )/ ./ 已知/ / 1/ / 2/ …/ / n/ 为/ 基于/ 基本/ 系统/ PB/ =/ (/ SB/ ,/ LB/ ,/ TB/ ,/ sinitB/ )/ 的/ 运行/ 迹/ 的/ 模式/ ,/ 则/ Pp/ =/ (/ Sp/ ,/ Lp/ ,/ Tp/ ,/ fp/ ,/ sinitp/ )/ 是/ 一个/ 识别模式/ / 1/ / 2/ …/ / n/ 的/ fLTS/ ,/ 其中/ Lp/ =/ LB/ ,/ Sp/ =/ {/ sinitp/ ,/ s1/ ,/ s2/ ,/ …/ ,/ sn/ -/ 1/ }/ ,/ Tp/ =/ {/ (/ sinitp/ ,/ / 1/ ,/ s1/ )/ ,/ (/ s1/ ,/ / 2/ ,/ s2/ )/ ,/ …/ ,/ fp/ :/ TP/ →/ {/ 0/ ,/ 1/ }/ 满足/ (/ / tp/ =/ (/ sp/ ,/ / p/ ,/ sp/ )/ ∈/ Tp/ ∧/ sp/ ≠/ sp/ ∧/ fp/ (/ tp/ )/ =/ 1/ )/ ∧/ (/ / t/ ∈/ Tp/ -/ {/ tp/ }/ ∧/ fp/ (/ t/ )/ =/ 0/ )/ ./ 定理/ 1/ ./ 识别/ 基本/ 系统/ PB/ 运行/ 轨迹/ 模式/ 的/ 证明/ ./ 设/ / 1/ / 2/ …/ / n/ 为/ 基于/ 基本/ 系统/ PB/ =/ (/ SB/ ,/ LB/ ,/ TB/ ,/ sinitB/ )/ 的/ 运行/ 轨迹/ 的/ 模式/ ,/ fLTSPp/ =/ (/ Sp/ ,/ Lp/ ,/ Tp/ ,/ fp/ ,/ sinitp/ )/ 是/ 识别模式/ / 1/ / 2/ …/ / n/ 的/ fLTS/ ./ fLTS/ 是/ PB/ 上/ 的/ 切点/ ./ 由/ 定义/ 14/ ,/ 容易/ 得出/ 设/ / (/ PB/ ∝/ Pp/ )/ =/ (/ SBp/ ,/ LBp/ ,/ TBp/ ,/ sinitBp/ )/ ,/ 并/ 定义/ 关系/ R/ =/ {/ 〈/ (/ sB/ ,/ sP/ )/ ,/ sB/ 〉/ |/ (/ sB/ ,/ sP/ )/ ∈/ SBp/ ,/ sB/ ∈/ SB/ ,/ sP/ ∈/ SP/ }/ / SBp/ ×/ SB/ ,/ 则/ 对/ / 〈/ (/ sB/ ,/ sP/ )/ ,/ sB/ 〉/ ∈/ R/ ,/ 有/ 下列/ 式/ (/ 2/ )/ 、/ (/ 3/ )/ 成立/ :/ 对/ / (/ sB/ ,/ sP/ )/ →/ l/ (/ sB/ ,/ sP/ )/ ∈/ TBp/ ,/ 则/ 必然/ / sB/ ∈/ SB/ 使得/ sB/ →/ lsB/ ∈/ TB/ ,/ 根据/ R/ 定义/ 知/ 〈/ (/ sB/ ,/ sP/ )/ ,/ sB/ 〉/ ∈/ R/ ;/ 对/ / sB/ →/ lsB/ ∈/ TB/ ,/ 根据/ 定义/ 14/ ,/ 必然/ / sP/ ∈/ SP/ ,/ 使得/ sP/ →/ lsP/ ∈/ Tp/ ,/ 则/ (/ sB/ ,/ sP/ )/ →/ l/ (/ sB/ ,/ sP/ )/ ∈/ TBp/ ,/ 且/ 根据/ R/ 定义/ 知/ 〈/ (/ sB/ ,/ sP/ )/ ,/ sB/ 〉/ ∈/ R/ ./ 根据/ ~/ 定义/ 和/ 式/ (/ 2/ )/ 、/ (/ 3/ )/ ,/ 得/ 根据/ 定义/ 12/ 和/ 式/ (/ 1/ )/ 、/ (/ 4/ )/ ,/ 得/ Pp/ 为/ PB/ 上/ 的/ 切点/ ./ 以图/ 1/ 所示/ 基本/ 系统/ 为例/ ,/ booklogout/ 是/ 其/ 运行/ 迹/ 模式/ ,/ 图/ 4/ 是/ 识别/ 该/ 模式/ 的/ fLTS/ ,/ 其中/ 1logout/ // →/ / / / / JP0/ 表示/ 转换/ 1log/ →/ / / / out0/ 的/ f/ 函数/ 值为/ 1/ ,/ 而/ 其余/ 转换/ 的/ f/ 函数/ 值/ 都/ 为/ 0/ ./ 则/ 根据/ 定理/ 1/ ,/ 该/ fLTS/ 是/ 奖励/ 方面/ 的/ 切点/ ./ 图/ 4/ 中/ 每个/ 状态/ 上/ 的/ 环状/ 转换/ 在/ ConcurrentEAOP/ [/ 13/ ]/ 中/ 称为/ 等待/ 环/ (/ waitloops/ )/ ./ 2.4/ 通知/ 和/ 方面/ 定义/ 一个/ 通知/ 可以/ 是/ 一个/ 观察者/ ,/ 它/ 仅/ 在/ 特定/ 事件/ 发生/ 后/ 插入/ 额外/ 的/ 动作/ 而/ 不/ 改变/ 基本/ 系统/ 的/ 运行/ 轨迹/ ;/ 也/ 可以/ 是/ 一个/ 辅助/ 者/ ,/ 使得/ 基本/ 系统/ 转/ 到/ 另外/ 的/ 状态/ [/ 14/ ]/ ./ 观察者/ 的/ 例子/ 有/ tracing/ ,/ debugging/ ,/ logging/ [/ 15/ ]/ 等/ ,/ 而/ 辅助/ 者/ 方面/ 如/ 存取控制/ [/ 7/ ]/ 、/ 恢复/ 方面/ [/ 16/ ]/ 等/ ./ 令/ WT/ =/ {/ bef/ -/ seq/ ,/ aft/ -/ seq/ ,/ choice/ ,/ bef/ -/ branch/ ,/ aft/ -/ branch/ ,/ bypass/ ,/ replace/ }/ 是/ 一个/ 预定/ 义/ 的/ 通知/ 类型/ 的/ 集合/ ./ 其中/ ,/ 顺序/ 型/ (/ bef/ -/ seq/ 和/ aft/ -/ seq/ )/ 通知/ 插入/ 到/ 关联/ 点/ 之前/ 或/ 之后/ ;/ 选择/ 型/ (/ choice/ )/ 通知/ 在/ 关联/ 点/ 被/ 激发/ ,/ 并/ 使/ 基本/ 系统/ 转向/ 一个/ 特定/ 状态/ ;/ 分支/ 型/ (/ bef/ -/ branch/ 和/ aft/ -/ branch/ )/ 通知/ 在/ 关联/ 点/ 被/ 激发/ ,/ 并/ 有/ 条件/ 地使/ 系统/ 转向/ 一个/ 特定/ 状态/ ;/ 旁路/ 型/ (/ bypass/ )/ 通知/ 在/ 关联/ 点/ 对应/ 的/ 源/ 状态/ 和/ 目的/ 状态/ 之间/ 加入/ 通知/ ;/ 而/ 替换/ 型/ (/ replace/ )/ 通知/ 替换/ 原有/ 的/ 关联/ 点/ ./ 定义/ 15/ (/ 通知/ ,/ advices/ )/ ./ 一个/ 通知/ (/ advice/ )/ 是/ 一个/ 元组/ Ad/ =/ (/ type/ ,/ S/ ,/ L/ ,/ T/ ,/ sinit/ ,/ Sfinal/ )/ ,/ 其中/ type/ ∈/ WT/ 是/ 通知/ 的/ 类型/ ,/ (/ S/ ,/ L/ ,/ T/ ,/ sinit/ ,/ Sfinal/ )/ 是/ 一个/ 描述/ 通知/ 行为/ 的/ 扩展/ LTS/ ./ Sfinal/ =/ {/ s/ |/ s/ ∈/ S/ ∧/ / / s/ ∈/ S/ ·/ (/ s/ ,/ a/ ,/ s/ )/ ∈/ T/ }/ 是/ 一个/ 终结状态/ 集/ ,/ 且/ 当/ 类型/ type/ =/ [/ bef/ -/ seq/ ,/ aft/ -/ seq/ ,/ bypass/ ,/ replace/ ,/ choice/ ]/ 时/ |/ Sfinal/ |/ =/ 1/ ,/ 而/ 当/ 类型/ type/ =/ [/ bef/ -/ branch/ ,/ aft/ -/ branch/ ]/ 时/ |/ Sfinal/ |/ =/ 2/ ./ 另外/ ,/ (/ S/ ,/ L/ ,/ T/ ,/ sinit/ ,/ Sfinal/ )/ 是/ 确定/ 的/ 且/ 除了/ 终结状态/ 之外/ 的/ 所有/ 状态/ 都/ 是/ 可/ 进展/ 的/ ./ Page5/ 定义/ 16/ (/ 方面/ 元素/ ,/ aspectlet/ )/ ./ 一个/ 方面/ 元素/ (/ aspectlet/ )/ 是/ 一个/ 元组/ (/ Ppc/ ,/ π/ ,/ Pad/ )/ ,/ 其中/ Ppc/ 是/ 切点/ ,/ Pad/ 是/ 通知/ ,/ π/ 是/ 基本/ 系统/ 的/ 一个/ trace/ ,/ 用来/ 标识/ 一个/ 特定/ 的/ 状态/ ,/ 且/ 当/ Pad/ ./ type/ =/ [/ bef/ -/ seq/ ,/ aft/ -/ seq/ ,/ bypass/ ,/ replace/ ]/ 时/ ,/ π/ 为空/ ;/ 否则/ 非空/ ./ 定义/ 17/ (/ 方面/ ,/ aspects/ )/ ./ 一个/ 方面/ 是/ 一个/ 方面/ 元素/ 的/ 集合/ A/ =/ {/ e/ |/ e/ 是/ 一个/ 方面/ 元素/ }/ ./ 2.5/ 方面/ 编织/ 切点/ 和/ 基本/ 系统/ 的/ 组合/ (/ ∝/ )/ 得到/ 一个/ 和/ 基本/ 系统/ 等价/ 的/ fLTS/ ,/ 其/ 所有/ 关联/ 点/ 都/ 已/ 确定/ ,/ 可以/ 织入/ 通知/ ./ 对于/ 一个/ fLTSP/ =/ (/ S/ ,/ L/ ,/ T/ ,/ f/ ,/ sinit/ )/ ,/ 定义/ 辅助/ 运算/ select/ (/ P/ )/ 获得/ 其/ 关联/ 点/ 集合/ :/ 另外/ ,/ 已知/ 两个/ 状态/ 集合/ S1/ 和/ S2/ 含有/ 互相/ 区分/ 的/ 状态/ ,/ 定义/ 一个/ Union/ 函数/ 返回/ S1/ 和/ S2/ 的/ 合并/ 状态/ 集/ :/ Union/ (/ S1/ ,/ S2/ ,/ {/ s11/ →/ s21/ ,/ …/ ,/ s1n/ →/ s2n/ }/ )/ =/ {/ s/ |/ (/ {/ s11/ ,/ …/ ,/ s1n/ }/ / S1/ ∧/ {/ s21/ ,/ …/ ,/ s2n/ }/ / S2/ )/ ∧/ (/ s/ =/ s1/ ∧/ s1/ ∈/ S1/ -/ {/ s11/ ,/ …/ ,/ s1n/ }/ )/ ∧/ (/ s/ =/ s2/ ∧/ s2/ ∈/ S2/ )/ ∧/ (/ s/ =/ s2x/ ∧/ s1x/ ∈/ {/ s11/ ,/ …/ ,/ s1n/ }/ ∧/ x/ ∈/ {/ 1/ ,/ …/ ,/ n/ }/ )/ }/ ./ 首先/ ,/ 定义/ 一个/ 微/ 运算/ / ,/ 将/ 通知/ 插入/ 到/ 一个/ fLTS/ 的/ 某个/ 关联/ 点/ ./ 定义/ 18/ ./ 已知/ 一个/ fLTSPM/ =/ (/ SM/ ,/ LM/ ,/ TM/ ,/ fM/ ,/ sinitM/ )/ ,/ 一个/ 关联/ 点/ tjp/ =/ (/ sjp/ ,/ / jp/ ,/ sjp/ )/ ∈/ select/ (/ PM/ )/ ,/ 一个/ 通知/ PAd/ =/ (/ typead/ ,/ Sad/ ,/ Lad/ ,/ Tad/ ,/ sinitad/ ,/ Sfinalad/ )/ ,/ 一个/ trace/ π/ ./ 令/ sjp/ 是/ π/ 确定/ 的/ 状态/ :/ PM/ →/ π/ sjp/ ./ 则/ 运算/ / 在/ tjp/ 处织入/ PAd/ 并/ 返回/ 一个/ fLTS/ :/ PM/ / (/ tjp/ ,/ π/ ,/ Ad/ )/ =/ (/ SC/ ,/ LC/ ,/ TC/ ,/ fC/ ,/ sinitC/ )/ ,/ 其中/ ,/ LC/ =/ LM/ ∪/ Lad/ ;/ fC/ (/ t/ )/ =/ fM/ (/ t/ )/ ,/ t/ ∈/ TM/ ,/ sinitC/ =/ sinitM/ ;/ SC/ 和/ TC/ 的/ 取值/ 依赖于/ 通知/ PAd/ 的/ 类型/ :/ (/ 1/ )/ 若/ typead/ =/ bef/ -/ seq/ ,/ 则/ SC/ =/ Union/ (/ Sad/ ,/ SM/ ,/ {/ sinitad/ →/ sjp/ }/ )/ ;/ TC/ =/ (/ TM/ -/ {/ tjp/ }/ )/ ∪/ Tad/ ∪/ {/ (/ sadfinal/ ,/ / jp/ ,/ sjp/ )/ }/ ,/ (/ 2/ )/ 若/ typead/ =/ aft/ -/ seq/ ,/ 则/ SC/ =/ Union/ (/ Sad/ ,/ SM/ ,/ {/ sadfinal/ →/ sjp/ }/ )/ ;/ TC/ =/ (/ TM/ -/ {/ tjp/ }/ )/ ∪/ {/ (/ sjp/ ,/ / jp/ ,/ sinitad/ )/ }/ ∪/ Tad/ ,/ (/ 3/ )/ 若/ typead/ =/ bypass/ ,/ 则/ SC/ =/ Union/ (/ Sad/ ,/ SM/ ,/ {/ sinitad/ →/ sjp/ ,/ sadfinal/ →/ sjp/ }/ )/ ,/ 其中/ sadfinal/ ∈/ Sfinalad/ ;/ 其中/ sadfinal/ ∈/ Sfinalad/ ;/ 其中/ sadfinal/ ∈/ Sfinalad/ ;/ 其中/ sadfinal1/ ,/ sadfinal2/ ∈/ Sfinalad/ ;/ 其中/ sadfinal1/ ,/ sadfina12/ ∈/ Sfinalad/ ;/ 其中/ sadfinal/ ∈/ Sfinalad/ ;/ TC/ =/ TM/ ∪/ Tad/ ./ (/ 4/ )/ 若/ typead/ =/ replace/ ,/ 则/ SC/ =/ Union/ (/ Sad/ ,/ SM/ ,/ {/ sinitad/ →/ sjp/ ,/ sadfinal/ →/ sjp/ }/ )/ ,/ TC/ =/ (/ TM/ -/ {/ tjp/ }/ )/ ∪/ Tad/ ./ (/ 5/ )/ 若/ typead/ =/ choice/ ,/ 则/ SC/ =/ Union/ (/ Sad/ ,/ SM/ ,/ {/ sinitad/ →/ sjp/ ,/ sadfinal/ →/ sjp/ }/ )/ ,/ 其中/ sadfinal/ ∈/ Sfinalad/ ;/ TC/ =/ TM/ ∪/ Tad/ ;/ (/ 6/ )/ 若/ typead/ =/ bef/ -/ branch/ ,/ 则/ SC/ =/ Union/ (/ Sad/ ,/ SM/ ,/ {/ sinitad/ →/ sjp/ ,/ sadfinal2/ →/ sjp/ }/ )/ ;/ TC/ =/ (/ TM/ -/ {/ tjp/ }/ )/ ∪/ Tad/ ∪/ {/ (/ sadfinal1/ ,/ / jp/ ,/ sjp/ )/ }/ ,/ (/ 7/ )/ 若/ typead/ =/ aft/ -/ branch/ ,/ 则/ SC/ =/ Union/ (/ Sad/ ,/ SM/ ,/ {/ sadfinal1/ →/ sjp/ ,/ sadfinal2/ →/ sjp/ }/ )/ ,/ TC/ =/ (/ TM/ -/ {/ tjp/ }/ )/ ∪/ {/ (/ sjp/ ,/ / jp/ ,/ sinitad/ )/ }/ ∪/ Tad/ ./ 令/ 函数/ clone/ (/ Ad/ )/ 返回/ 一个/ 通知/ Ad/ 的/ 克隆/ ,/ 且/ 约定/ 每次/ 克隆/ 得到/ 的/ 克隆/ 通知/ 都/ 具有/ 不同/ 的/ 状态/ 名/ ,/ 而且/ 克隆/ 通知/ 的/ 状态/ 名/ 和/ 动作/ 名/ 与/ 基本/ 系统/ 的/ 相/ 区别/ ./ 一个/ 方面/ 元素/ 的/ 编织/ 就是/ 利用微/ 运算/ / ,/ 将/ 其/ 克隆/ 通知/ 插入/ 到/ 基本/ 系统/ 和/ 切点/ 组合/ 得到/ 的/ fLTS/ 的/ 所有/ 关联/ 点/ 的/ 过程/ ./ 定义/ 19/ ./ 已知/ 一个/ 方面/ 元素/ AL/ =/ (/ Ppc/ ,/ π/ ,/ Pad/ )/ 和/ 一个/ 基本/ 系统/ LTSPB/ =/ (/ SB/ ,/ LB/ ,/ TB/ ,/ sinitB/ )/ ,/ 则/ 运算/ ∠/ AL/ 将/ AL/ 织入/ PB/ ,/ 得到/ 一个/ LTS/ :/ PB/ ∠/ ALAL/ =/ / (/ …/ (/ (/ PB/ ∝/ Ppc/ )/ / (/ tjp1/ ,/ π/ ,/ clone/ (/ Pad/ )/ )/ / (/ tjp2/ ,/ π/ ,/ clone/ (/ Pad/ )/ )/ )/ / …/ / (/ tjpn/ ,/ π/ ,/ clone/ (/ Pad/ )/ )/ )/ ,/ 其中/ ,/ select/ (/ PB/ ∝/ Ppc/ )/ =/ {/ tjp1/ ,/ …/ ,/ tjpn/ }/ (/ n/ / 1/ )/ ./ 而/ 方面/ 的/ 编织/ 就是/ 逐个/ 织入/ 其/ 方面/ 元素/ 的/ 过程/ ./ 定义/ 20/ ./ 已知/ 一个/ 基本/ 系统/ PB/ 和/ 一个/ 方面/ A/ =/ {/ AL1/ ,/ …/ ,/ ALn/ }/ (/ n/ / 1/ )/ ,/ 则/ 运算/ ∠/ 将/ 方面/ A/ 织入/ PB/ ,/ 得到/ 一个/ LTS/ :/ PB/ ∠/ A/ =/ (/ …/ (/ PB/ ∠/ ALAL1/ )/ …/ ∠/ ALALn/ )/ ./ 编织/ 前/ ,/ 对/ 基本/ 系统/ 的/ 特性/ 进行/ 了/ 一定/ 限制/ ,/ 下面/ 的/ 定理/ 2/ 说明/ 编织/ 后/ 得到/ 的/ 系统/ 仍然/ 保持/ 这种/ 特性/ ./ 定理/ 2/ (/ 确定性/ 和/ 可/ 进展/ 性/ 的/ 保持/ )/ ./ 设/ 一个/ 良/ 定义/ 的/ 基本/ 系统/ PB/ 和/ 一个/ 方面/ A/ ,/ 则/ PB/ ∠/ A/ 也/ 是/ 良/ 定义/ 的/ ./ 方面/ 编织/ 可能/ 会/ 对/ 基本/ 系统/ 产生/ 各种/ 影响/ ./ 人们/ 一般/ 期望/ 两个/ 基本/ 系统/ P1/ 和/ P2/ 是/ 语义/ 等价/ 的/ ,/ 则/ 应用/ 一个/ 方面/ 到/ P1/ 和/ P2/ 的/ 结果/ (/ 语义上/ 来讲/ )/ 也/ Page6/ 是/ 等价/ 的/ [/ 16/ ]/ ./ 本文/ 用/ LTS/ 之间/ 的/ 强/ 模拟/ 等价关系/ 表示/ 这种/ 语义/ 等价关系/ ./ 下面/ 的/ 定理/ 3/ 说明/ 编织/ 后/ 得到/ 的/ 系统/ 仍然/ 保持/ 这种/ 特性/ ./ 定理/ 3/ (/ 语义/ 等价/ 性/ 的/ 保持/ )/ ./ 给定/ 两个/ 基本/ 系统/ P1/ 和/ P2/ ,/ 一个/ 方面/ A/ 可/ 应用/ 到/ P1/ 和/ P2/ ,/ 则/ P1/ ~/ P2/ / P1/ ∠/ A/ ~/ P2/ ∠/ A/ ./ 定理/ 2/ 和/ 定理/ 3/ 的/ 证明/ 见/ 附录/ ./ 从/ 以上/ 两个/ 定理/ 看出/ ,/ 方面/ 编织/ 运算/ ∠/ 保持/ 了/ 系统/ 的/ 确定性/ 、/ 可/ 进展/ 性/ 和/ 语义/ 等价/ 性/ ./ 也就是说/ ,/ 编织/ 后/ 的/ 系统/ 和/ 编织/ 前/ 的/ 系统/ 一样/ ,/ 可以/ 参与/ 进一步/ 的/ 并发/ 组合/ (/ ‖/ )/ 运算/ 或/ 编织/ 运算/ (/ ∠/ )/ ./ 因此/ ,/ 编织/ 运算/ ∠/ 可以/ 看成/ 是/ 与/ 并发/ 组合/ (/ ‖/ )/ 相对/ 应/ 的/ 一种/ 新/ 运算符/ ,/ 编织/ 运算/ ∠/ 支持/ LTS/ 和/ 方面/ 的/ 组合/ ,/ 而/ 并发/ 组合/ (/ ‖/ )/ 支持/ LTS/ 和/ LTS/ 的/ 组合/ ./ 3/ 实例/ 研究/ 3.1/ 实现/ 我们/ 开发/ 了/ 一个/ 基于/ FSP/ (/ FiniteStateProces/ -/ ses/ )/ [/ 17/ ]/ 的/ 原型/ 编织/ 工具/ —/ —/ —/ LTSbAW/ ,/ 实现/ 本文/ 的/ 方法/ ./ FSP/ 是/ 一种/ 进程/ 代数/ 风格/ 的/ 语言/ ,/ 支持/ LTS/ 建模/ ./ 在/ FSP/ 中/ ,/ 一个/ 进程/ P/ 对应/ 了/ 一个/ LTS/ ,/ 该/ 进程/ 及其/ 局部/ 进程/ 构成/ 了/ 该/ LTS/ 的/ 状态/ 集/ ,/ 而/ P/ 是/ 该/ LTS/ 的/ 起始/ 状态/ ./ 例如/ ,/ 图/ 5/ 是/ 图/ 1/ 所示/ 基本/ 系统/ 的/ FSP/ 描述/ ./ 进程/ B/ 由/ 局部/ 进程/ B1/ 构成/ ,/ (/ “/ -/ >/ ”/ )/ 和/ (/ “/ |/ ”/ )/ 是/ 动作/ 前缀/ 和/ 选择/ 操作符/ ./ B/ =/ (/ login/ -/ >/ B1/ )/ ,/ B1/ =/ (/ book/ -/ >/ B1/ |/ queryInfo/ -/ >/ B1/ |/ logout/ -/ >/ B/ )/ ./ LTSbAW/ 在/ FSP/ 规范/ 的/ 基础/ 上/ 进行/ 扩展/ ,/ 支持/ 方面/ 描述/ ./ 图/ 6/ 是/ LTSbAW/ 支持/ 的/ Bonus/ 方面/ 的/ 描述/ ./ 其中/ ,/ Aspect/ 是/ 保留字/ ,/ Bonus/ 是/ 方面/ 的/ 标识/ ./ A1/ 是/ 一个/ 方面/ 元素/ ,/ PC/ 和/ AD/ 分别/ 是/ 其/ 切点/ 和/ 通知/ ,/ BeforeSeq/ 代表/ AD/ 的/ 类型/ Bef/ -/ Seq/ ./ 进程/ PC/ 描述/ 了/ 图/ 4/ 所示/ 的/ fLTS/ ./ 注意/ ,/ 在/ PC/ 的/ 描述/ 中/ ,/ 其/ 所有/ 的/ 等待/ 环/ (/ waitLoops/ )/ 由/ LTSbAW/ 动/ 生成/ ./ 将/ 基本/ 系统/ 和/ 方面/ 规范/ 输入/ LTSbAW/ 后/ ,/ 可/ 得到/ 编织/ 后/ 的/ 组合/ 系统/ 描述/ ,/ 它/ 仍然/ 满足/ FSP/ 规范/ ,/ 可/ 在/ 支持/ FSP/ 语法/ 的/ 工具/ —/ —/ —/ LTSA/ [/ 17/ ]/ 上/ 进行/ 模型/ 展示/ 和/ 分析/ ./ 图/ 7/ 是/ 将/ 图/ 5/ 和/ 图/ 6/ 的/ 规范/ 输入/ LTSbAW/ 后/ 得到/ 的/ 组合/ 系统/ 描述/ ,/ 而图/ 8/ 是/ 其/ 在/ LTSA/ 中/ 的/ 展示/ 结果/ ,/ 从中/ 可以/ 清晰/ 地/ 看出/ Bonus/ 编织/ 后/ 系统/ 的/ 行为/ ./ B/ _/ PC/ =/ (/ login/ -/ >/ B1/ _/ PC/ )/ ,/ B1/ _/ PC/ =/ (/ logout/ -/ >/ B/ _/ PC/ |/ queryInfo/ -/ >/ B1/ _/ PC/ |/ book/ -/ >/ B1/ _/ PC1/ =/ (/ book/ -/ >/ B1/ _/ PC1/ |/ queryInfo/ -/ >/ B1/ _/ PC1/ |/ bonus/ -/ >/ AD/ _/ 1/ _/ New1/ =/ (/ logout/ -/ >/ B/ _/ PC/ )/ ./ 图/ 8Bonus/ 方面/ 编织/ 后/ 系统/ 在/ LTSA/ 中/ 展示/ 3.2/ 实例/ 分析/ 下面/ 以/ 我们/ 建立/ 的/ 一个/ 电子商务系统/ 为例/ 说明/ 本文/ 方法/ 的/ 应用/ 以及/ 与/ 其它/ 方法/ 的/ 分析/ 比较/ 结果/ ./ 该/ 系统/ 实现/ 顾客/ 网上/ 购物/ 功能/ ,/ 图/ 9/ 是/ 其/ 基本/ 系统/ 描述/ ./ 它/ 通过/ 4/ 个/ 组件/ 的/ 交互/ 实现/ 系统/ 的/ 业务/ 功能/ :/ 顾客/ (/ Customer/ )/ 、/ 商店/ (/ Shop/ )/ 、/ 支付/ 中心/ (/ PaymentCenter/ )/ 和/ 商品/ 发送/ 中心/ (/ DeliveryCenter/ )/ ./ 顾客/ 在/ 登录/ (/ login/ )/ 系统/ 后/ ,/ 可以/ 浏览/ 商品/ (/ browse/ -/ Products/ )/ ,/ 浏览/ 促销/ 广告/ (/ browsePromotions/ )/ ,/ 确认/ 收货/ (/ confirmDelivery/ )/ ,/ 申请/ 退款/ (/ refund/ )/ ,/ 加入/ 购物车/ (/ addToCart/ )/ ,/ 然后/ 可/ 通过/ 购买/ (/ buy/ )/ ,/ 确认/ 订单/ (/ confirmOrder/ )/ 和/ 确认/ 付款/ (/ confirmPayment/ )/ 后/ 完成/ 一次/ 购买过程/ ./ 支付/ 中心/ 在/ 顾客/ 确认/ 付款/ 后/ 接收/ 顾客/ 付款/ ,/ 然后/ 在/ 发送/ 商品/ 成功/ (/ deliverySuccess/ )/ 和/ 顾客/ 确认/ 收货/ (/ confirmDelivery/ )/ 后/ 付款/ 给/ 商店/ 或/ 在/ 发送/ 商品/ 失败/ (/ deliveryFail/ )/ 和/ 顾客/ 申请/ 退款/ (/ refund/ )/ 时/ 退款/ 给/ 顾客/ ./ 该/ 系统/ 需要/ 面临/ 3/ 种/ 方面/ 需求/ :/ (/ 1/ )/ 顾客/ 对/ 促销/ 广告/ 的/ 敏感度/ 评定/ ./ 根据/ 顾客/ 进入/ 系统/ 后/ 的/ 行为/ 轨迹/ 评定/ 其/ 对/ 促销/ 广告/ 的/ 敏感/ 程度/ :/ 高/ 敏感度/ 顾客/ ,/ 进入/ 系统/ 后/ 首先/ 浏览/ 促销/ 广告/ ,/ Page7/ 然后/ 进行/ 其它/ 操作/ ;/ 中等/ 敏感度/ 顾客/ ,/ 进入/ 系统/ 后/ 首先/ 浏览/ 商品/ ,/ 然后/ 浏览/ 促销/ 广告/ ;/ 不/ 敏感/ 顾客/ ,/ 从不/ 浏览/ 促销/ 广告/ ./ (/ 2/ )/ 订单/ 日志/ ./ 每当/ 顾客/ 确认/ 订单/ 或/ 取消/ 订单/ |/ |/ ECommerceSys/ =/ (/ Customer/ |/ |/ PaymentCenter/ |/ |/ DeliveryCenter/ |/ |/ Shop/ )/ ./ 图/ 9/ 电子商务系统/ 的/ 基本/ 系统/ 描述/ 根据上述/ 方面/ 需求/ ,/ 采用/ 本文/ 的/ 方法/ 对/ 方面/ 进行/ 建模/ ,/ 得到/ 如图/ 10/ 所/ 描述/ 的/ 5/ 个/ 方面/ ./ 其中/ Highpromotionpronecustomer/ ,/ Mediumpromotion/ -/ pronecustomer/ 和/ Promotioninsensitivecustomer/ 用于/ 实现需求/ R1/ ./ 以/ Highpromotionpronecustomer/ 为例/ ./ 其/ 切点/ PC/ 用于/ 跟踪/ 高/ 敏感度/ 顾客/ 的/ 执行/ LogOrder/ 和/ TimeLimits/ 方面/ 分别/ 实现需求/ (/ 2/ )/ 和/ (/ 3/ )/ ./ LogOrder/ 方面/ 用/ 切点/ PC/ 标识/ 动作/ con/ -/ 图/ 10/ 各/ 方面/ 描述/ 时/ ,/ 记录/ 日志/ ./ (/ 3/ )/ 付款/ 限时/ ./ 从/ 发送/ 商品/ 成功/ 到/ 顾客/ 确认/ 收货/ 需要/ 时间/ 限制/ ,/ 超过/ 时间/ 限制/ 且/ 客户/ 还/ 未/ 确认/ 收货/ 时/ ,/ 系统/ 自动/ 付款/ 给/ 商家/ ./ 轨迹/ :/ 首先/ 执行/ login/ 进入状态/ PC1/ ,/ 然后/ 执行/ browsePromotions/ 进入状态/ PC2/ ,/ 在/ 状态/ PC2/ 可以/ 执行/ 其它/ 动作/ ,/ 最后/ 通过/ logout/ 退出/ 系统/ ,/ 此时/ 触发/ 通知/ ./ 若/ 在/ 状态/ PC2/ 执行/ 了/ 除/ browsePromo/ -/ tions/ 之外/ 的/ 其它/ 动作/ ,/ 则/ 转/ 回到/ 状态/ PC/ ./ AspectPromotioninsensitivecustomer/ {/ DEFA1/ =/ 〈/ BeforeSeq/ ,/ PC/ ,/ AD/ 〉/ PC/ =/ (/ login/ -/ >/ PC1/ |/ browsePromotions/ -/ >/ PC/ )/ ,/ PC1/ =/ (/ browsePromotions/ -/ >/ PC/ |/ browseProducts/ -/ >/ PC2/ |/ addToCart/ -/ >/ PC2/ |/ buy/ -/ >/ PC2/ |/ logout/ -/ >/ PC2/ |/ login/ -/ >/ PC2/ |/ browseCart/ -/ >/ PC2/ |/ confirmDelivery/ -/ >/ PC2/ |/ refund/ -/ >/ PC2/ |/ browse/ -/ >/ PC2/ |/ editCart/ -/ >/ PC2/ |/ backToCart/ -/ >/ PC2/ |/ confirmOrder/ -/ >/ PC2/ |/ confirmPayment/ -/ >/ PC2/ |/ cancelOrder/ -/ >/ PC2/ )/ ,/ PC2/ =/ (/ logout/ // JP/ -/ >/ PC/ |/ browsePromotions/ -/ >/ PC/ )/ ./ AD/ =/ (/ promotioninsensitivecustomer/ -/ >/ EndAD/ )/ ./ }/ AspectLogOrder/ {/ DEFA1/ =/ 〈/ AfterSeq/ ,/ PC/ ,/ AD/ 〉/ PC/ =/ (/ confirmOrder/ // JP/ -/ >/ PC/ |/ cancelOrder/ // JP/ -/ >/ PC/ )/ ./ AD/ =/ (/ logOrder/ -/ >/ EndAD/ )/ ./ }/ AspectTimeLimits/ {/ DEFA1/ =/ 〈/ AfterSeq/ ,/ PC1/ ,/ AD1/ >/ PC1/ =/ (/ deliverySuccess/ // JP/ -/ >/ PC1/ )/ ./ AD1/ =/ (/ starttimer/ -/ >/ EndAD1/ )/ ./ PC2/ =/ (/ confirmDelivery/ // JP/ -/ >/ PC2/ )/ ./ AD2/ =/ (/ timeout/ -/ >/ EndAD2/ )/ ./ DEFA2/ =/ 〈/ Bypass/ ,/ PC2/ ,/ AD2/ 〉/ }/ firmOrder/ 和/ cancelOrder/ 为/ 关联/ 点/ ,/ 并/ 在/ 其后/ 顺序/ 织入/ 通知/ AD/ ,/ 记录/ 日志/ ./ TimeLimits/ 方面/ 含有/ A1Page8/ 和/ A2/ 两个/ 方面/ 元素/ ,/ 前者/ 在/ 关联/ 点/ deliverySuccess/ 之后/ ,/ 顺序/ 织入/ 通知/ AD1/ ,/ 用于/ 启动/ 定时器/ (/ start/ -/ timer/ )/ ;/ 而/ 后者/ 在/ 关联/ 点/ confirmDelivery/ 织入/ 一个/ 旁路/ 型/ 通知/ AD2/ ,/ 用于/ 限时/ (/ timeout/ )/ ./ 由于/ 各/ 方面/ 编织/ 后/ 得到/ 的/ 组合/ 系统/ 状态/ 数较/ 多/ ,/ 限于/ 篇幅/ ,/ 没有/ 列出/ ./ 通过/ 对/ 编织/ 结果/ 进行/ 分析/ ,/ 它们/ 都/ 满足/ 相应/ 的/ 方面/ 需求/ ./ EAOP/ [/ 1/ ]/ 是/ 一种/ 典型/ 的/ 状态/ 型/ 方面/ 编程/ 方法/ ,/ 其/ ConcurrentEAOP/ [/ 13/ ]/ 模型/ 通过/ 在/ 并发/ 组合/ 的/ 基本/ 系统/ 和/ 方面/ 中/ 添加/ 同步/ 事件/ 来/ 实现/ 方面/ 编织/ ./ 表/ 1/ 本文/ 方法/ 与/ CurrentEAOP/ 方法/ 的/ 比较/ 结果/ CurrentEAOP/ 可否/ 建模/ 组合/ 系统/ 状态/ 数/ HighpromotionpronecustomerMediumpromotionpronecustomerPromotioninsensitivecustomerLogOrderTimeLimitsConsistency/ 由于/ 基于/ 的/ 底层/ 机制/ 不同/ ,/ 很难/ 将/ 本文/ 方法/ 与/ 其余/ 体系结构/ 层/ 的/ 面向/ 方面/ 建模/ 方法/ 进行/ 实现/ 对比/ ./ 我们/ 分析/ 了/ AAM/ [/ 7/ ]/ 、/ DAOP/ // ADL/ [/ 5/ ]/ 、/ ABC/ // ADL/ [/ 6/ ]/ 、/ AO/ -/ ADL/ [/ 18/ ]/ 等/ 几个/ 典型/ 方法/ 对/ 上述/ 实例/ 中/ 5/ 个/ 方面/ 的/ 支持/ 能力/ ./ 前/ 3/ 个/ 顾客/ 促销/ 广告/ 敏感度/ 方面/ 是/ 状态/ 型/ 方面/ ,/ 由于/ 这些/ 建模/ 方法/ 没有/ 提供/ 相应/ 的/ 跟踪/ 系统/ 执行/ 轨迹/ 的/ 切点/ 机制/ ,/ 因此/ 很难/ 对/ 它们/ 建模/ ./ LogOrder/ 和/ TimeLimits/ 方面/ 的/ 切点/ 依赖于/ 系统/ 的/ 单个/ 动作/ ,/ 这/ 在/ 上述/ 这些/ 方法/ 中/ 都/ 能/ 找到/ 相应/ 的/ 支持/ 机制/ ./ 从/ 通知/ 类型/ 上/ 看/ ,/ LogOrder/ 方面/ 的/ 为/ AfterSeq/ ,/ 这/ 在/ ABC/ // ADL/ 和/ AO/ -/ ADL/ 中/ 可以/ 用/ After/ 通知/ 类型/ 来/ 实现/ ,/ 在/ DAOP/ // ADL/ 可以/ 用/ OutputAspects/ 来/ 实现/ ,/ 在/ AAM/ 中/ 可以/ 用/ 组合/ 指令/ 实现/ ./ TimeLimits/ 方面/ 的/ 通知/ 类型/ 为/ Bypass/ ,/ 这/ 在/ DAOP/ // ADL/ 可以/ 用/ eventaspects/ 来/ 实现/ ,/ 在/ AAM/ 中/ 可以/ 用/ 组合/ 指令/ 实现/ ,/ 而/ 在/ ABC/ // ADL/ 和/ AO/ -/ ADL/ 中/ 没有/ 找到/ 相应/ 的/ 支持/ 机制/ ./ 通过/ 对/ 上述/ 实例/ 的/ 研究/ 可以/ 看出/ :/ 本文/ 方法/ 可以/ 有效/ 地/ 建模/ 状态/ 型/ 方面/ 和/ 常规/ 方面/ ,/ 而且/ 支持/ 比/ 其它/ 建模/ 方法/ 更/ 丰富/ 的/ 通知/ 类型/ ./ 由于/ 编织/ 后/ 组合/ 系统/ 的/ 状态/ 数较/ 少/ ,/ 将/ 给/ 以后/ 在/ 组合/ 模型/ 上/ 的/ 分析/ 工作/ 带来/ 效率/ 方面/ 的/ 优势/ ./ 3.3/ 讨论/ 该/ 方法/ 不仅/ 适用/ 于/ 状态/ 型/ 方面/ ,/ 而且/ 支持/ 常规/ ConcurrentEAOP/ 也/ 采用/ FSP/ 描述/ ,/ 因此/ 可以/ 和/ 本文/ 方法/ 进行/ 实现/ 对比/ ./ 基于/ 上述/ 电子商务系统/ 实例/ 中/ 的/ 5/ 个/ 方面/ 以及/ ConcurrentEAOP/ 中/ 的/ Consistency/ 方面/ [/ 13/ ]/ ,/ 用/ 本文/ 的/ 方法/ 和/ ConcurrentEAOP/ 方法/ 进行/ 了/ 分别/ 实现/ ,/ 表/ 1/ 是/ 两种/ 实现/ 的/ 对比/ 分析/ 结果/ ./ 可以/ 看出/ ,/ 本文/ 方法/ 方面/ 编织/ 得到/ 的/ 组合/ 系统/ 的/ 状态/ 数/ 远远/ 少于/ ConcurrentEAOP/ ,/ 而且/ 提供/ 了/ 比/ ConcurrentEAOP/ 更强/ 的/ 方面/ 建模/ 能力/ ./ 51673552523510/ 方面/ 的/ 建模/ 和/ 编织/ ./ 已知/ 基本/ 系统/ PB/ =/ (/ SB/ ,/ LB/ ,/ TB/ ,/ sinitB/ )/ ,/ 设/ fLTSP/ =/ {/ {/ s/ }/ ,/ LB/ ,/ {/ s/ →/ / // JPs/ ,/ s/ →/ α/ s/ }/ ,/ s/ }/ ,/ 其中/ / ∈/ LB/ ,/ α/ ∈/ LB/ ∧/ α/ ≠/ / ./ 显然/ P/ 是/ PB/ 的/ 切点/ ,/ 且/ 在/ P/ 和/ PB/ 的/ 组合/ P/ ∝/ PB/ 中/ 所有/ 标记/ / 的/ 转换/ 都/ 为/ 关联/ 点/ ,/ 可以/ 在/ 其/ 上/ 进行/ 通知/ 编织/ ./ 因此/ ,/ 该/ 方法/ 可以/ 建模/ 每当/ 动作/ / 发生/ 时/ 进行/ 某种/ 操作/ 的/ 方面/ ./ 方面/ 应用/ 的/ 一个/ 重要/ 问题/ 的/ 是/ 方面/ 干扰/ ./ 已知/ 两个/ 方面/ A1/ 和/ A2/ ,/ 和/ 一个/ 基本/ 系统/ P/ ,/ 若/ 单独/ 编织/ 每个/ 方面/ 都/ 是/ 可行/ 和/ 正确/ 的/ ,/ 而/ 两个/ 方面/ 都/ 编织/ 时/ 不/ 可行/ 或/ 不/ 正确/ ,/ 则/ 存在/ 方面/ 干扰/ ./ 这里/ 的/ 可行/ 指/ 可以/ 进行/ 编织/ ,/ 正确/ 则/ 指/ 达到/ 了/ 应有/ 的/ 效果/ (/ 如/ 获得/ 应有/ 的/ 系统/ 属性/ 等/ )/ ./ 方面/ 干扰/ 可以/ 分为/ 语法/ 层/ 的/ 干扰/ 和/ 语义/ 层/ 的/ 干扰/ ./ 若/ P/ ∠/ A1/ 和/ P/ ∠/ A2/ 可行/ ,/ 而/ (/ P/ ∠/ A1/ )/ ∠/ A2/ (/ 或/ (/ P/ ∠/ A2/ )/ ∠/ A1/ )/ 不/ 可行/ ,/ 则/ 称/ 存在/ 语法/ 干扰/ ./ 这种/ 干扰/ 主要/ 是/ 由于/ A1/ (/ 或/ A2/ )/ 的/ 编织/ 使得/ A2/ (/ 或/ A1/ )/ 的/ 切点/ 失效/ ./ 当/ 编织/ (/ P/ ∠/ A1/ )/ ∠/ A2/ 可行/ (/ 即/ 不/ 存在/ 语法/ 干扰/ )/ ,/ 而/ A2/ 的/ 编织/ 却/ 改变/ 了/ A1/ 的/ 应用/ 效果/ 时/ ,/ 例如/ A1/ 的/ 编织/ 使/ (/ P/ ∠/ A1/ )/ 获得/ 了/ 属性/ φ/ ,/ 而/ (/ P/ ∠/ A1/ )/ ∠/ A2/ 违反/ 了/ 属性/ φ/ ,/ 称/ 存在/ 语义/ 干扰/ ./ 语法/ 层/ 的/ 干扰/ 可/ 通过/ 编织/ 运算/ ∠/ 本身/ 进行/ 检测/ ,/ 而/ 语义/ 层/ 的/ 干扰/ ,/ 则/ 可以/ 应用/ 工具/ ,/ 如/ LTSA/ 等/ ,/ 对/ (/ P/ ∠/ A1/ )/ ∠/ A2/ 予以/ 分析/ 处理/ ./ Page94/ 相关/ 工作/ 当前/ 体系结构/ 层面/ 向/ 方面/ 的/ 建模/ 方法/ 主要/ 关注/ 于/ 常规/ 方面/ 的/ 建模/ 问题/ ./ 从/ 对/ 方面/ 的/ 处理/ 方式/ 上/ 可/ 将/ 这些/ 方法/ 分为/ 3/ 类/ ./ 第/ 1/ 类/ 方法/ 在/ 传统/ 的/ 基于/ 组件/ 的/ 体系结构/ 描述/ 中/ 引入/ 方面/ 机制/ 对/ 横切/ 关注点/ 模块化/ ,/ 根据/ 方面/ 中/ 的/ 切点/ 信息/ 通过/ 织入/ 的/ 方式/ 实现/ 方面/ 和/ 组件/ 组合/ ./ DAOP/ // ADL/ [/ 5/ ]/ 、/ ABC/ // ADL/ [/ 6/ ]/ 、/ 基于/ XYZ/ // ADL/ [/ 19/ ]/ 的/ AO/ -/ ADL/ [/ 18/ ]/ 等/ 都/ 属于/ 这/ 类/ 方法/ ./ 第/ 2/ 类/ 方法/ 将/ 方面/ 视为/ 一种/ 体系结构/ 视图/ ,/ 通过/ 方面/ 和/ 基本/ 体系结构/ 模型/ 的/ 合并/ ,/ 得到/ 系统/ 的/ 集成/ 视图/ ./ 典型/ 的/ 如/ AAM/ 方法/ [/ 7/ ]/ 、/ PCS/ 框架/ [/ 20/ ]/ 等/ ./ 第/ 3/ 类/ 方法/ 将/ 方面/ 视为/ 基本/ 的/ 构造/ 块/ ,/ 通过/ 搭积木/ 的/ 方式/ 形成/ 复杂/ 的/ 系统/ ,/ 如/ PRISMA/ [/ 8/ ]/ 、/ ArchitectureViewsofAspects/ [/ 21/ ]/ 等/ ./ 上述/ 这些/ 方法/ 都/ 没有/ 提供/ 跟踪/ 系统/ 运行/ 轨迹/ 的/ 切点/ 机制/ ,/ 因此/ 无法/ 建模/ 状态/ 型/ 方面/ ./ 本文/ 的/ 方法/ 属于/ 第/ 1/ 类/ ,/ 它/ 与/ DAOP/ // ADL/ 、/ ABC/ // ADL/ 和/ XYZ/ // ADL/ 方法/ 的/ 主要/ 区别/ 是/ :/ (/ 1/ )/ 提供/ 了/ 跟踪/ 系统/ 运行/ 轨迹/ 的/ 切点/ 机制/ ,/ 可以/ 建模/ 状态/ 型/ 方面/ ;/ (/ 2/ )/ 支持/ 更/ 多/ 的/ 通知/ 类型/ ,/ 而/ ABC/ // ADL/ ,/ XYZ/ // ADL/ 和/ DAOP/ // ADL/ 支持/ 类似/ 于/ AspectJ/ 的/ before/ 、/ after/ 、/ around/ 通知/ 类型/ ,/ 不/ 支持/ 本文/ 的/ 替换/ 和/ 旁路/ 型/ 通知/ ;/ (/ 3/ )/ 基于/ 不同/ 的/ 形式化/ ./ 本文/ 的/ 方法/ 基于/ LTS/ ,/ 而/ ABC/ // ADL/ 和/ DAOP/ // ADL/ 基于/ XML/ 机制/ ,/ XYZ/ // ADL/ 基于/ 时序/ 逻辑/ 语言/ XYZ/ // E/ ./ 编程/ 层/ 状态/ 型/ 方面/ 建模/ 的/ 相关/ 研究/ 包括/ :/ EAOP/ [/ 1/ ]/ 和/ JAsCo/ [/ 3/ ]/ 利用/ 有限/ 状态机/ 识别/ 一组/ 系统/ 允许/ 的/ 执行/ trace/ ,/ 当/ 特定/ 的/ trace/ 模式/ 出现/ 时/ ,/ 执行/ 通知/ 行为/ ./ 声明/ 事件/ 模式/ (/ DEPs/ )/ [/ 4/ ]/ 方法/ 用/ 事件/ 模式/ 声明/ 系统/ 执行/ 中/ 的/ 一系列/ 事件/ ,/ 并/ 指定/ 当/ 模式/ 被/ 识别/ 时/ 采取/ 的/ 特定/ 动作/ ./ 每个/ 事件/ 模式/ 对应/ 一个/ 事件/ 分析器/ —/ —/ —/ 一个/ 下推/ 式/ 自动机/ ./ 这些/ 方法/ 在/ 编织/ 时/ 需要/ 在/ 程序/ 中/ 切点/ 自动机/ 事件/ 出现/ 的/ 地方/ 添加/ 额外/ 的/ 指令/ 来/ 引起/ 切点/ 自动机/ 的/ 状态/ 转换/ ./ 本文/ 方法/ 的/ 切点/ 思想/ 和/ 这些/ 方法/ 类似/ ,/ 但是/ 实现/ 机制/ 不同/ ./ 它/ 通过/ 切点/ 和/ 基本/ 系统/ 的/ 组合/ 来/ 确定/ 关联/ 点/ ,/ 其/ 优点/ 是/ 不/ 需要/ 添加/ 额外/ 指令/ ,/ 从而/ 产生/ 的/ 组合/ 系统/ 的/ 状态/ 数少/ ./ 文献/ [/ 16/ ]/ 提出/ 一种/ 状态/ 型/ 方面/ 的/ 建模/ 方法/ ./ 它用/ Mealy/ 自动机/ 建模/ 切点/ ,/ 通知/ 是/ 在/ 关联/ 点/ 状态/ 和/ 目标/ 状态/ 之间/ 增加/ 的/ 转换/ ./ 该/ 方法/ 适用/ 于/ 反应式/ 系统/ ./ 本文/ 方法/ 的/ 提出/ 受到/ 此/ 方法/ 的/ 启发/ ./ 与/ 之/ 不同/ 的/ 是/ ,/ 本文/ 方法/ 针对/ 一般/ 的/ 软件系统/ ,/ 而且/ 除了/ 可以/ 建模/ 文献/ [/ 16/ ]/ 中/ 提出/ 的/ 两种/ 方面/ 之外/ ,/ 还/ 提供/ 了/ 对/ 其它/ 类型/ 方面/ 的/ 支持/ ./ 在/ 需求/ 层/ ,/ 文献/ [/ 22/ ]/ 提出/ 基于/ 继承性/ 消息/ 顺序/ 图/ (/ HierarchicalMessageSequenceCharts/ ,/ HMSCs/ )/ 的/ 语义/ 编织/ 算法/ ,/ 其/ 切点/ 指定/ 一个/ 出现/ 在/ 基本/ HMSC/ 中/ 的/ 部分/ 行为/ ,/ 它/ 在/ 编织/ 后/ 被/ 替换/ 为/ 通知/ 的/ 行为/ ./ 由于/ 切点/ 表示/ 了/ 基本/ 系统/ 执行/ 的/ 部分/ 语义/ ,/ 因此/ 该/ 方法/ 的/ 方面/ 在/ 一定/ 程度/ 上/ 可/ 看成/ 一种/ 状态/ 型/ 方面/ ./ 其/ 编织/ 是/ 基于/ HMSC/ 组合/ 上/ 的/ 转换规则/ ,/ 这/ 一点/ 类似/ 于/ 本文/ 基于/ LTS/ 组合/ 上/ 的/ 编织/ ./ 但是/ 该/ 方法/ 不能/ 处理/ 本文/ 的/ 顺序/ 、/ 分支/ 和/ 选择/ 型/ 方面/ ./ 另外/ ,/ 文献/ [/ 2/ ]/ 提出/ 用/ 一个/ 状态机/ 分解/ 语言/ 对/ 基本/ 系统/ 进行/ 分解/ ,/ 用/ 模块/ 规范/ 来/ 表示/ 状态/ 型/ 方面/ ,/ 从而/ 实现/ 方面/ 和/ 基本/ 模块/ 之间/ 更好/ 的/ 耦合/ ./ 但是/ 该/ 方法/ 没有/ 提供/ 形式化/ 的/ 描述/ ./ 文献/ [/ 10/ ]/ 将/ 状态/ 型/ 方面/ 引入/ 工作/ 流/ ,/ 提出/ 一个/ 基于/ 有限/ 状态/ 自动机/ 的/ 编织/ 策略/ 将/ 历史/ 跟踪/ 信息/ 代码/ 织入/ 工作/ 流/ ./ 5/ 结束语/ 针对/ 当前/ 体系结构/ 层/ 缺乏/ 支持/ 状态/ 型/ 方面/ 建模/ 有效/ 机制/ 的/ 问题/ ,/ 本文/ 提出/ 了/ 一种/ 基于/ LTS/ 的/ 状态/ 型/ 方面/ 建模/ 和/ 编织/ 的/ 方法/ ,/ 建立/ 了/ 识别系统/ 运行/ 轨迹/ 模式/ 的/ fLTS/ 切点/ 机制/ ,/ 定义/ 了/ 支持/ 顺序/ 、/ 选择/ 、/ 分支/ 、/ 替换/ 、/ 旁路/ 型/ 通知/ 的/ 编织/ 运算/ ,/ 基于/ FSP/ 开发/ 了/ 支持/ 该/ 方法/ 的/ 原型/ 编织/ 工具/ ,/ 并/ 结合/ 一个/ 电子商务/ 实例/ 与/ 其它/ 方法/ 做/ 了/ 对比/ 分析/ ./ 结果表明/ ,/ 该/ 方法/ 可以/ 有效/ 地/ 对/ 状态/ 型/ 方面/ 和/ 其它/ 常规/ 方面/ 进行/ 建模/ ./ 未来/ 的/ 研究/ 工作/ 包括/ 进一步/ 丰富/ 本文/ 的/ 编织/ 模型/ 使/ 之/ 支持/ 方面/ 间/ 的/ 组合/ 以及/ 对/ 方面/ 间/ 的/ 语义/ 干扰/ 进行/ 分析/ ./ 

