Page1/ 基于/ 程序/ 特征/ 谱/ 整数/ 溢出/ 错误/ 定位/ 技术/ 研究/ 惠战伟/ 黄松/ 嵇孟雨/ (/ 解放军理工大学/ 指挥/ 自动化/ 学院/ 南京/ 210007/ )/ (/ 全军/ 军事训练/ 软件/ 测评/ 中心/ 南京/ 210007/ )/ 摘要/ 随着/ 软件业/ 的/ 飞速发展/ ,/ 人们/ 对/ 软件/ 质量/ 的/ 要求/ 也/ 越来越/ 高/ ./ 整数/ 溢出/ 错误/ 以其高/ 危性/ 和/ 隐蔽性/ 成为/ 影响/ 软件/ 安全性/ 和/ 可靠性/ 的/ 重要/ 因素/ 之一/ ./ 如何/ 准确/ 定位/ 整数/ 溢出/ 错误/ 是/ 软件/ 安全/ 领域/ 研究/ 的/ 热点/ ./ 论文/ 改进/ 了/ 现有/ 错误/ 定位/ 模型/ ,/ 构建/ 了/ 整数/ 溢出/ 错误/ 定位/ 模型/ INTRank/ ./ 实验/ 结果表明/ :/ 基于/ INTRank/ 模型/ 的/ 语句/ 可疑/ 度/ 估计/ 方法/ 可以/ 较为/ 准确/ 地/ 计算/ 语句/ 可疑/ 度/ ,/ 使得/ 程序员/ 能够/ 按照/ 基于/ 语句/ 可疑/ 度/ 的/ 优先级/ 顺序/ 检查/ 源代码/ ,/ 找出/ 导致/ 整数/ 溢出/ 错误/ 的/ 原因/ ,/ 同时/ 本文/ 方法/ 具有/ 较/ 低/ 的/ 漏报/ 率/ ./ 关键词/ 整数/ 溢出/ 错误/ 定位/ ;/ 程序/ 特征/ 谱/ ;/ 定义/ 使用/ 对/ 覆盖/ ;/ 分支/ 覆盖/ 1/ 引言/ 对于/ 应用/ 于/ 航空航天/ 、/ 过程/ 控制/ 、/ 核子/ 能源/ 、/ 交通运输/ 和/ 医疗卫生/ 等/ 任务/ 关键/ 领域/ 的/ 软件/ ,/ 其/ 计算结果/ 的/ 正确性/ 是/ 可靠性/ 和/ 安全性/ 的/ 关键/ 部分/ ./ 整数/ 溢出/ 错误/ 是/ 导致/ 软件/ 计算/ 出错/ 的/ 原因/ 之一/ ./ 由于/ 检测/ 每个/ 算数/ 操作/ 结果/ 的/ 代价/ 太/ 大/ ,/ 无法/ 承受/ ,/ 许多/ 商业软件/ 中/ 的/ 整数/ 溢出/ 错误/ 基本上/ 没有/ 得到/ 有效/ 检测/ ./ 若/ 程序/ 对/ 一个/ 整数/ 求出/ 了/ 一个/ 非/ 期望值/ ,/ 并且/ 这些/ 非/ 期望值/ 被/ 用于/ 数组/ 索引/ 或者/ 循环/ 变量/ 等/ 情形/ 时/ ,/ 就/ 会/ 产生/ 软件/ 安全漏洞/ ./ 这些/ 安全漏洞/ 通常/ 会/ 导致/ 灾难性/ 的/ 后果/ ./ 如/ 1996/ 年/ 6/ 月/ 4/ 日/ 欧洲/ Ariane5/ 火箭/ 爆炸/ 事故/ [/ 1/ ]/ 和/ 2004/ 年/ 12/ 月/ 25/ 日/ Comair/ 航空/ Page2/ 公司/ 的/ 机组/ 调度/ 软件/ 崩溃/ [/ 1/ ]/ 都/ 是/ 由/ 整数/ 溢出/ 错误/ 引发/ 的/ ./ 整数/ 溢出/ 错误/ 在/ 程序运行/ 时/ 存在/ 数据流/ 和/ 控制流/ 两种/ 传播/ 形式/ ,/ 并且/ 在/ 一组/ 测试/ 执行/ 中/ ,/ 程序/ 正常/ 执行/ 和/ 异常/ 终止/ 执行/ 有/ 可能/ 同时/ 存在/ ./ 本文/ 基于/ 上述/ 两/ 方面/ 的/ 考虑/ 实现/ 了/ 对/ 现有/ 错误/ 定位/ 模型/ 的/ 改进/ ,/ 提出/ 了/ 一种/ 新/ 的/ 错误/ 定位/ 模型/ INTRank/ ./ 本文/ 通过/ 实验/ 表明/ :/ 使用/ 基于/ INTRank/ 的/ 方法/ 有助于/ 程序员/ 按照/ 一定/ 的/ 优先级/ 顺序/ 检查/ 代码/ ,/ 可以/ 为/ 其/ 提供/ 有效/ 的/ 诊断/ 线索/ ;/ 基于/ INTRank/ 模型/ 的/ 语句/ 可疑/ 度/ 估计/ 方法/ 提高/ 了/ 定位/ 整数/ 溢出/ 错误/ 的/ 准确率/ ,/ 从而/ 提升/ 了/ 软件开发/ 和/ 维护/ 的/ 效率/ ,/ 同时/ 整数/ 溢出/ 错误/ 的/ 漏报/ 率/ 也/ 显著/ 降低/ ./ 2/ 相关/ 工作/ 2.1/ 整数/ 溢出/ 错误/ 定位/ 主要/ 有/ 以下/ 3/ 种/ 类型/ :/ (/ 1/ )/ 监控/ 系统/ 运行/ 时/ 的/ 指令/ 操作/ ./ 按照/ 整数/ 溢出/ 错误/ 的/ 特征/ 制定/ 一定/ 的/ 判定/ 准则/ ,/ 在/ 程序运行/ 时/ 监控/ 整数/ 溢出/ 错误/ 是否/ 发生/ ./ 例如/ 南京大学/ 陈/ 平等/ 人/ [/ 2/ ]/ 研究/ 的/ BRICK/ 可以/ 实时监控程序/ 运行/ 中/ 所有/ 运算/ 操作/ ,/ 利用/ 一定/ 的/ 判定/ 机制/ 检测/ 并/ 定位/ 整数/ 溢出/ 错误/ ;/ 目前/ 针对/ 整数/ 溢出/ 错误/ 定位/ 的/ 检测/ 和/ 定位/ 方法/ 以上/ 这些/ 技术/ 实质/ 上/ 都/ 是/ 用/ 整数/ 溢出/ 的/ 静态/ 或/ 国防科学技术大学/ 卢锡城/ 等/ 人/ [/ 3/ ]/ 利用/ 程序语言/ 的/ 抽象/ 语义/ 设计/ 实现/ 了/ 一个/ 自动化/ 整数/ 出/ 错误/ 测试/ 系统/ ./ (/ 2/ )/ 利用/ 污点/ 分析/ 技术/ 或者/ 类型/ 推理/ 技术/ 找到/ 发生/ 整数/ 溢出/ 错误/ 的/ 位置/ ./ 例如/ Ceesay/ 等/ 人/ [/ 4/ ]/ 通过/ 一个/ 基于/ Cqual/ [/ 5/ ]/ 的/ 静态/ 工具/ 来/ 追踪/ 不可/ 信/ 数据/ ;/ Ashcraft/ 等/ 人/ [/ 6/ ]/ 采用/ 基于/ 程序员/ 编写/ 的/ 编译/ 扩展/ 来/ 追踪/ 不可/ 信/ 数据/ ,/ 并/ 在/ 追踪/ 过程/ 中/ 检测/ 程序/ 错误/ ./ 以/ valgrind/ [/ 7/ ]/ 、/ memcheck/ [/ 8/ ]/ 和/ Aftersight/ [/ 9/ ]/ 等/ 系统/ 为/ 代表/ 的/ 动态/ 污点/ 追踪/ 与/ 传播/ 技术/ ,/ 可以/ 在/ 不/ 需要/ 任何/ 源码/ 的/ 情况/ 下/ ,/ 运行/ 时/ 检测/ 程序执行/ 路径/ 中/ 是否/ 存在/ 如下/ 错误/ :/ 对/ 未/ 初始化/ 内存/ 的/ 引用/ 、/ 悬挂/ 指针/ 和/ 内存/ 泄漏/ 等/ ./ 防护/ 机制/ ./ (/ 3/ )/ 安全/ 整数/ 类/ 、/ C/ 编译器/ 扩展/ 等/ 整数/ 溢出/ 错误/ 例如/ IntSafe/ 、/ SafeInt/ [/ 3/ ]/ 等/ 整数/ 溢出/ 编程/ 防护/ 机制/ 被/ 集成/ 到/ 编译器/ 中/ 帮助/ 程序员/ 避免/ 不/ 安全/ 的/ 整数/ 操作/ ./ 者/ 动态/ 规约/ 作为/ 判定/ 依据/ 直接/ 定位/ 整数/ 出/ 错误/ 发生/ 的/ 位置/ ,/ 这种/ 方法/ 有/ 明显/ 的/ 局限性/ ,/ 如/ 定位/ 错误/ 类型/ 有限/ ,/ 存在/ 不同/ 程度/ 的/ 漏报/ 率/ 以及/ 无法/ 向/ 程序员/ 提供/ 诊断/ 线索/ 等/ 问题/ ./ 2.2/ 软件/ 错误/ 定位/ 方法/ 为了/ 解决/ 错误/ 定位/ 过程/ 中/ 消耗/ 时间/ 多/ 的/ 问题/ ,/ 研究/ 人员/ 提出/ 了/ 多种/ 自动化/ 的/ 错误/ 定位/ 技术/ ,/ 目前/ 有/ 多种/ 自动化/ 软件/ 错误/ 定位/ 技术/ 分类/ 方法/ ./ 按照/ 获取/ 错误/ 定位/ 所/ 需/ 数据/ 方法/ 的/ 不同/ ,/ 可以/ 分为/ 基于/ 程序/ 特征/ 谱/ (/ Spectra/ -/ BasedFaultLocalization/ ,/ SBFL/ )/ 的/ 定位/ 技术/ 和/ 基于/ 模型/ (/ Model/ -/ BasedFaultLocali/ -/ zation/ ,/ MBFL/ )/ 的/ 定位/ 技术/ ./ 本文/ 采用/ Wong/ 等/ 人/ [/ 10/ ]/ 的/ 分类/ 方法/ ,/ 基于/ 程序/ 特征/ 谱/ 错误/ 定位/ 技术/ 中/ 与/ 本文/ 相关/ 的/ 两种/ 代表性/ 的/ 错误/ 定位/ 技术/ 包括/ :/ (/ 1/ )/ 基于/ 程序/ 特征/ 谱/ 覆盖/ 统计/ 的/ 错误/ 定位/ 技术/ Tarantula/ [/ 11/ ]/ 是/ 一种/ 基于/ 可/ 执行/ 语句/ 命中/ 谱/ 的/ 自动化/ 错误/ 定位/ 技术/ ./ Tarantula/ 利用/ 测试用例/ 产生/ 的/ 执行/ 追踪/ 信息/ (/ 程序/ 特征/ 谱/ )/ 和/ 执行/ 结果/ 信息/ (/ 失效/ 或/ 通过/ )/ ,/ 计算/ 每个/ 语句/ 的/ 可疑/ 度/ ./ 虞凯/ 等/ 人/ [/ 12/ ]/ 利用/ 多种/ 程序/ 特征/ 谱/ 模型/ ,/ 考虑/ 控制/ 与/ 数据/ 依赖/ 关系/ 捕捉/ 程序/ 的/ 异常/ 行为/ ,/ 在/ 可疑/ 度/ 估计/ 阶段/ ,/ 虞凯/ 等/ 针对/ 两种/ 缺陷/ 类型/ 分别/ 建立/ 可疑/ 度/ 计算/ 模型/ CDBug/ 和/ DDBug/ ;/ 最后/ 将/ 这/ 两种/ 计算/ 模型/ 整合/ ,/ 可以/ 在/ 预先/ 不/ 知道/ 程序/ 所/ 包含/ 缺陷/ 类型/ 的/ 情况/ 下/ 确定/ 语句/ 的/ 可疑/ 度/ ./ (/ 2/ )/ 基于/ 程序/ 特征/ 谱/ 比较/ 的/ 错误/ 定位/ 技术/ NNQ/ [/ 13/ ]/ (/ NearestNeighborQueries/ )/ 是/ Renieris/ 和/ Reiss/ 提出/ 的/ 基于/ 程序/ 特征/ 谱/ 比较/ 的/ 错误/ 定位/ 方法/ ./ NNQ/ 方法/ 假设/ 存在/ 有/ 一个/ 失效/ 运行/ 和/ 许多/ 成功/ 运行/ ,/ 运用/ 一种/ 距离/ 度量/ 方法/ ,/ 搜索/ 与/ 失效/ 运行/ 最/ “/ 相似/ ”/ 的/ 成功/ 运行/ ,/ 比较/ 这/ 两种/ 运行/ ,/ 排除/ 同时/ 被/ 成功/ 运行/ 和/ 失效/ 运行/ 所/ 覆盖/ 的/ 语句/ ,/ 最后/ 产生/ 一个/ 包含/ 可疑/ 语句/ 集/ 的/ 报告/ ./ NNQ/ 采用/ Hamming/ 距离/ 和/ 排列/ 距离/ 两种/ 方法/ 度量/ 两个/ 程序/ 特征/ 谱/ 之间/ 的/ 相似/ 度/ ./ 程序员/ 检查/ 生成/ 的/ 可疑/ 语句/ 集/ ,/ 如果/ 错误/ 语句/ 确实/ 存在/ 于/ 可疑/ 语句/ 集/ ,/ 那么/ 错误/ 定位/ 成功/ ;/ 如果/ 可疑/ 语句/ 集中/ 没有/ 错误/ 语句/ ,/ 那么/ 首先/ 通过/ 构造程序/ 依赖图/ (/ 图/ 的/ 节点/ 是/ 语句/ ,/ 边/ 包括/ 数据/ 依赖边/ 和/ 控制/ 依赖边/ )/ ,/ 检查/ 其它/ 节点/ 中/ 最近/ 节点/ ,/ 直至/ 找到/ 错误/ 语句/ ./ 这种/ 方法/ 的/ 优点/ 是/ 可以/ 利用/ 最近/ 邻居/ 模型/ 有/ 目的地/ 选取/ 用于/ 错误/ 定位/ 的/ 测试用例/ ,/ 而/ 缺点/ 是/ 往往/ 错误/ 语句/ 不会/ 被/ 可疑/ 语句/ 集/ 包括/ ,/ 程序员/ 需要/ 检查/ 更/ 多/ 的/ 代码/ 才能/ 定位/ 错误/ 语句/ ./ 基于/ 程序/ 特征/ 谱/ 软件/ 错误/ 定位/ 技术/ 是/ 一种/ 利用/ Page3/ 程序/ 的/ 运行/ 覆盖/ 信息/ 和/ 运行/ 结果/ 反向/ 推理/ 程序/ 失效/ 原因/ 的/ 错误/ 定位/ 方法/ ./ 本文/ 将/ 基于/ 程序/ 特征/ 谱/ 的/ 错误/ 定位/ 用于/ 整数/ 溢出/ 错误/ 定位/ ,/ 目的/ 是/ 解决/ 现有/ 整数/ 溢出/ 错误/ 定位/ 技术/ 不能/ 有效/ 地/ 支持/ 程序员/ 调试/ 修改/ 程序/ 的/ 问题/ ./ 3/ 基于/ 程序/ 特征/ 谱/ 整数/ 溢出/ 的/ 错误/ 定位/ 方法/ 3.1/ 问题/ 分析/ 首先/ 本文/ 通过/ 一个/ 引例/ (/ 表/ 1/ )/ 说明/ 现有/ 基于/ 程序/ 特征/ 谱/ 的/ 错误/ 定位/ 模型/ 被/ 用于/ 定位/ 整数/ 溢出/ 错误/ 表/ 1/ 引例/ mid/ ./ c#/ include/ 〈/ stdio/ ./ h/ 〉/ main/ (/ intargc/ ,/ char/ / argv/ [/ ]/ )/ {/ intx/ ,/ y/ ,/ z/ ,/ m/ ;/ if/ (/ argc/ </ 4/ )/ {/ fprintf/ (/ stderr/ ,/ ”/ Error/ \/ n/ ”/ )/ ;/ exit/ (/ 1/ )/ ;/ }/ x/ =/ (/ shortint/ )/ atoi/ (/ argv/ [/ 1/ ]/ )/ ;/ // // 截断/ 错误/ 7/ / y/ =/ atoi/ (/ argv/ [/ 2/ ]/ )/ ;/ z/ =/ atoi/ (/ argv/ [/ 3/ ]/ )/ ;/ m/ =/ z/ ;/ if/ (/ y/ </ z/ )/ {/ if/ (/ x/ </ y/ )/ m/ =/ y/ ;/ elseif/ (/ x/ </ z/ )/ m/ =/ x/ ;/ }/ elseif/ (/ x/ >/ y/ )/ m/ =/ y/ ;/ elseif/ (/ x/ >/ z/ )/ m/ =/ x/ ;/ printf/ (/ “/ %/ d/ \/ n/ ”/ ,/ m/ )/ ;/ }/ T1/ :/ x/ =/ 7/ ,/ y/ =/ 5/ ,/ z/ =/ 2T2/ :/ x/ =/ 1/ ,/ y/ =/ 2/ ,/ z/ =/ 3T3/ :/ x/ =/ -/ 317696/ ,/ y/ =/ 2/ ,/ z/ =/ -/ 63579T4/ :/ x/ =/ 2/ ,/ y/ =/ 5/ ,/ z/ =/ 7T5/ :/ x/ =/ -/ 327696/ ,/ y/ =/ -/ 65579/ ,/ z/ =/ -/ 3/ 控制/ 依赖/ (/ 分支/ )/ T1T2T3T4T5/ 表/ 2LOUPE/ 和/ CP/ 计算/ 分支/ 可疑/ 度/ 和/ 定义/ 使用/ 对/ 可疑/ 度/ (/ 11/ ,/ 12/ )/ (/ 11/ ,/ 16/ )/ / (/ 12/ ,/ 13/ )/ (/ 12/ ,/ 14/ )/ (/ 14/ ,/ 15/ )/ (/ 16/ ,/ 17/ )/ / (/ 16/ ,/ 18/ )/ (/ 18/ ,/ 19/ )/ 时/ ,/ 存在/ 准确率/ 低/ 的/ 问题/ ,/ 引例/ 来自/ 乔治亚/ 工学院/ ①/ ./ 用/ LOUPE/ 模型/ [/ 12/ ]/ 和/ CP/ 模型/ [/ 14/ ]/ 分别/ 计算/ 引例/ 中/ 语句/ 的/ 可疑/ 度/ ,/ 本文/ 发现/ :/ 分别/ 按照/ 两个/ 模型/ 计算错误/ 语句/ 7/ 的/ 可疑/ 度时/ ,/ 语句/ 7/ 的/ 可疑/ 度/ 都/ 不/ 为/ 最大值/ ./ 下面/ 分别/ 分析/ LOUPE/ 模型/ 和/ CP/ 模型/ 不能/ 准确/ 定位/ 整数/ 溢出/ 错误/ 的/ 原因/ :/ (/ 1/ )/ LOUPE/ 模型/ 基于/ 如下/ 假设/ ,/ 即/ 程序/ 错误/ 发生/ 后/ ,/ 其/ 直接/ 控制/ 依赖/ 或者/ 直接/ 数据/ 依赖/ 的/ 语句/ “/ 立刻/ ”/ 导致/ 程序/ 状态/ 发生/ 偏差/ ./ LOUPE/ 模型/ 中/ 的/ 非/ 分支/ 判断/ 语句/ 的/ 可疑/ 度值/ 和/ 包含/ 该/ 语句/ 的/ 定义/ 使用/ 对/ 可疑/ 度/ 的/ 平均值/ 有关/ ;/ 而/ 分支/ 判断/ 语句/ 的/ 可疑/ 度/ 计算/ 还/ 需/ 考虑/ 其/ 分支/ 的/ 可疑/ 度/ ./ 如表/ 2/ 所示/ ,/ 语句/ 14/ / / / / / / / / / / / / / / / / / / LOUPE/ 模型/ 分支/ 可疑/ 度/ // CP/ 模型/ 分支/ 可疑/ 度/ ①/ http/ :/ // // www/ ./ static/ ./ cc/ ./ gatech/ ./ edu/ // aristotle/ // Tools/ // Aris/ -/ totle/ // samples/ // mid/ ./ c/ ./ Page4/ 数据/ 依赖/ (/ 定义/ 使用/ 对/ )/ T1T2T3T4T5/ (/ 7/ ,/ 12/ ,/ x/ )/ (/ 7/ ,/ 14/ ,/ x/ )/ (/ 7/ ,/ 15/ ,/ x/ )/ (/ 7/ ,/ 16/ ,/ x/ )/ / (/ 7/ ,/ 18/ ,/ x/ )/ (/ 7/ ,/ 19/ ,/ x/ )/ (/ 8/ ,/ 11/ ,/ y/ )/ / (/ 8/ ,/ 12/ ,/ y/ )/ (/ 8/ ,/ 13/ ,/ y/ )/ (/ 8/ ,/ 16/ ,/ y/ )/ / (/ 8/ ,/ 17/ ,/ y/ )/ / (/ 9/ ,/ 10/ ,/ z/ )/ / (/ 9/ ,/ 11/ ,/ z/ )/ / (/ 9/ ,/ 10/ ,/ z/ )/ (/ 9/ ,/ 14/ ,/ z/ )/ (/ 9/ ,/ 18/ ,/ z/ )/ (/ 10/ ,/ 20/ ,/ m/ )/ / (/ 13/ ,/ 20/ ,/ m/ )/ (/ 15/ ,/ 20/ ,/ m/ )/ (/ 17/ ,/ 20/ ,/ m/ )/ / (/ 19/ ,/ 20/ ,/ m/ )/ ResultPPFPF/ 注/ :/ “/ / ”/ 表示/ 程序/ 分支/ 或/ 定义/ 使用/ 对/ 被/ 测试用例/ 覆盖/ ./ 测试用例/ 与表/ 1/ 相同/ ./ (/ s14/ 表示/ 语句/ 14/ )/ 所在/ 定义/ 使用/ 对/ (/ 9/ ,/ 14/ ,/ z/ )/ 和/ (/ 7/ ,/ 14/ ,/ x/ )/ 的/ 可疑/ 度值/ 都/ 为/ 0.707/ ,/ 按照/ LOUPE/ 模型/ 计算/ suspd/ (/ s14/ )/ =/ (/ 0.707/ +/ 0.707/ )/ // 2/ =/ 0.707/ ,/ 另外/ 分支/ 判断/ 语句/ 14/ 仅/ 存在/ 分支/ (/ 14/ ,/ 15/ )/ ,/ 且/ 分支/ (/ 14/ ,/ 15/ )/ 的/ 可疑/ 度为/ 0.707/ ,/ 所以/ 按照/ LOUPE/ 计算/ 模型/ suspc/ (/ s14/ )/ =/ 0.707/ -/ 0/ =/ 0.707/ ./ susp/ (/ s14/ )/ =/ max/ (/ suspc/ (/ s14/ )/ ,/ suspd/ (/ s14/ )/ )/ =/ 0.707/ ./ 因为/ 包含/ 语句/ 7/ (/ s7/ 表示/ 语句/ 7/ )/ 的/ 定义/ 使用/ 对/ (/ 7/ ,/ 18/ ,/ x/ )/ 、/ (/ 7/ ,/ 19/ ,/ x/ )/ 的/ 可疑/ 度/ 都/ 为/ 0/ ,/ 在/ 取/ 平均数/ 时/ 对/ 语句/ 7/ 可疑/ 度值/ 的/ 计算/ 产生/ 干扰/ ,/ 所以/ 真正/ 的/ 错误/ 语句/ s7/ 的/ 可疑/ 度值/ 为/ suspd/ (/ s7/ )/ =/ (/ 0.707/ +/ 0.707/ +/ 0.707/ +/ 0.408/ +/ 0/ +/ 0/ )/ // 6/ =/ 0.422/ (/ 因为/ s7/ 为/ 非/ 分支/ 判断/ 语句/ ,/ 所以/ 仅/ 考虑/ suspd/ (/ s7/ )/ )/ ,/ 0.422/ 并/ 不是/ 最大/ 可疑/ 度值/ ./ (/ 2/ )/ CP/ 模型/ 仅/ 考虑/ 控制流/ 传播/ ,/ 导致/ 模型/ 只能/ 分析/ 到/ 基本块/ 层次/ ,/ 对于/ 基本块/ 中/ 的/ 语句/ 则/ 不能/ 很/ 好/ 地区/ 分/ 可疑/ 度/ ./ 如表/ 1/ 所示/ ,/ 语句/ 7/ ~/ 语句/ 10/ 属于/ 同一个/ 基本块/ ,/ 所以/ 使用/ CP/ 模型/ 计算/ 这些/ 语句/ 的/ 可疑/ 度值/ 的/ 结果/ 相同/ ./ 并且/ 因为/ CP/ 模型/ 仅/ 考虑/ 影响/ 控制流/ 的/ 错误/ ,/ 所以/ 影响/ 控制流/ 的/ 分支/ 判断/ 语句/ 12/ 的/ 可疑/ 度为/ 1/ (/ 为/ 最大值/ )/ ,/ 如表/ 3/ 所示/ ,/ 程序/ 正是/ 执行/ 到/ 语句/ 12/ 才/ 与/ 正确/ 的/ 控制流/ 发生/ 偏离/ ./ 3.2/ 前提/ 假设/ 在/ 程序执行/ 过程/ 中/ ,/ 错误/ 语句/ 会/ 影响/ 程序/ 的/ 某种/ 状态/ (/ 值/ 或/ 控制流/ )/ ,/ 然后/ 这种/ 错误/ 的/ 转换/ 会/ 通过/ 程序/ 的/ 继续执行/ ,/ 将/ 受/ 影响/ 的/ 程序/ 状态/ 传播/ 至/ 程序/ 最终/ 产生/ 失效/ 的/ 位置/ [/ 15/ ]/ ./ 如表/ 1/ 所示/ ,/ T5/ :/ x/ =/ -/ 327696/ ,/ y/ =/ -/ 65579/ ,/ z/ =/ -/ 3/ 为/ 失效/ 测试用例/ ,/ 原因/ 是/ 在/ 程序/ 入口处/ 对/ 变量/ x/ 赋值/ 时/ ,/ 由于/ 使用/ 强制/ 类型转换/ (/ atoi/ (/ )/ 函数/ 返回值/ 为/ int/ 型/ )/ ,/ 将/ 输入/ 参数/ 由/ int/ 型/ 转换/ 为/ shortint/ ,/ 由于/ 输入/ 参数/ x/ =/ -/ 327696/ </ -/ 32768/ (/ shortint/ 型/ 的/ 最小值/ )/ ,/ 满足/ 了/ 触发/ 截断/ 错误/ 的/ 约束条件/ ,/ 程序/ 发生/ 截断/ 错误/ ,/ 使得/ x/ 实际/ 接受/ 的/ 值/ 为/ -/ 16/ (/ 被/ 影响/ 的/ 程序/ 状态/ )/ ./ 错误/ 的/ x/ 值/ 被/ 用于/ if/ 条件/ 语句/ 作为/ 控制流/ 的/ 判断/ 条件/ ,/ 最终/ 导致/ 程序/ 失效/ ./ 控制流/ 分析/ 变量名/ 定义/ 定义/ 使用/ 分析/ 如表/ 3/ 所示/ ,/ 当/ 程序执行/ 失效/ 测试用例/ T5/ 时/ ,/ 控制流/ 与/ 预期/ 的/ 正确/ 执行/ 之间/ 发生/ 偏差/ ,/ 正确/ 执行/ 应该/ 是/ (/ 4/ ,/ 7/ )/ →/ (/ 11/ ,/ 12/ )/ →/ (/ 12/ ,/ 13/ )/ ,/ 但是/ 实际/ 执行/ 为/ (/ 4/ ,/ 7/ )/ →/ (/ 11/ ,/ 12/ )/ →/ (/ 12/ ,/ 14/ )/ →/ (/ 14/ ,/ 5/ )/ ;/ 同时/ 变量/ x/ 、/ z/ 的/ 使用/ 语句/ 也/ 与/ 正确/ 的/ 执行/ 不/ 一致/ ,/ 如表/ 3/ 所示/ ./ 因此/ 整数/ 溢出/ 错误/ 发生/ 后/ 控制流/ 和/ 数据流/ 都/ 有/ Page5/ 可能/ 发生/ 偏差/ ,/ 而且/ 程序/ 错误/ 语句/ 往往/ 与/ 程序/ 发生/ 状态/ 偏差/ 的/ 位置/ 存在/ 一定/ 的/ “/ 传播/ 距离/ ”/ ./ 因此/ 可以/ 得出/ 以下/ 结论/ :/ (/ 1/ )/ 在/ 程序执行/ 过程/ 中/ ,/ 整数/ 溢出/ 错误/ 语句/ 会/ 对/ 程序/ 状态/ 产生/ 影响/ ,/ 而/ 错误/ 状态/ 的/ 传播/ 则/ 会/ 通过/ 数据流/ 或者/ 控制流/ ./ (/ 2/ )/ 失效/ 测试用例/ 所/ 覆盖/ 的/ 分支/ 或者/ 定义/ 使用/ 对/ 中/ ,/ 存在/ 某个/ 分支/ 或者/ 定义/ 使用/ 对/ 的/ 可疑/ 度为/ 最大值/ ./ 如表/ 2/ 所示/ ,/ 定义/ 使用/ 对/ (/ 9/ ,/ 14/ ,/ z/ )/ 和/ 分支/ (/ 14/ ,/ 15/ )/ 分别/ 为/ 失效/ 测试用例/ T5/ 所/ 覆盖/ 的/ 定义/ 使用/ 对/ 和/ 分支/ ,/ 同时/ 他们/ 的/ 可疑/ 度值/ 都/ 为/ 最大值/ 1/ ./ 基于/ 以上/ 两点/ ,/ 可以/ 确定/ 整数/ 溢出/ 错误/ 定位/ 模型/ 的/ 前提条件/ :/ (/ 1/ )/ 程序/ 错误/ 状态/ 传播方式/ 包括/ 数据流/ 传播/ 和/ 控制流/ 传播/ ./ 所以/ 本文/ 同时/ 建立/ 基于/ 定义/ 使用/ 对/ 覆盖/ 特征/ 谱/ 和/ 基于/ 分支/ 覆盖/ 特征/ 谱/ 的/ 错误/ 定位/ 模型/ ,/ 最后/ 将/ 两种/ 模型/ 整合/ ./ (/ 2/ )/ 在/ 程序执行/ 过程/ 中/ ,/ 由于/ 程序/ 的/ 错误/ 状态/ 在/ 语句/ 之间/ 通过/ 数据流/ 或/ 控制流/ 传播/ ,/ 因此/ 程序/ 语句/ 可疑/ 度/ 之间/ 存在/ 相关性/ ./ 同时/ ,/ 可以/ 得到/ 本文/ 方法/ 的/ 应用/ 范围/ :/ (/ 1/ )/ 如果/ 整数/ 溢出/ 错误/ 发生/ 后/ 程序/ 仍/ 得出/ 正确/ 结果/ ,/ 则/ 此/ 方法/ 无效/ ./ (/ 2/ )/ 如果/ 整数/ 溢出/ 错误/ 发生/ 后/ 立刻/ 对/ 程序执行/ 状态/ 产生/ 影响/ ,/ 或者/ 错误/ 语句/ 相对/ 独立/ (/ 即/ 与/ 其他/ 语句/ 不/ 存在/ 依赖/ 关系/ )/ ,/ 则/ 此/ 方法/ 与/ 现有/ 方法/ 相比/ 没有/ 明显/ 优势/ ./ 3.3/ 本文/ 方法/ 在/ 3.2/ 节/ 基础/ 上/ 本文/ 提出/ 一种/ 面向/ 整数/ 溢出/ 错误/ 的/ 错误/ 定位/ 模型/ INTRank/ ,/ 如图/ 1/ 所示/ ./ INTRank/ 模型/ 具体/ 分为/ 以下/ 5/ 个/ 步骤/ :/ (/ 1/ )/ 收集/ 程序/ 特征/ 谱/ 信息/ ./ (/ 2/ )/ 计算/ 分支/ 和/ 定义/ 使用/ 对/ 的/ 可疑/ 度/ ./ 我们/ 选取/ Ochiai/ 公式/ [/ 16/ ]/ 作为/ 分支/ 和/ 定义/ 使用/ 对/ 的/ 可疑/ 度/ 计算公式/ ,/ 如下/ 所示/ :/ sim/ (/ e/ )/ =/ a10/ 其中/ ,/ a10/ 表示/ 覆盖/ 到/ 边/ e/ 的/ 失效/ 测试用例/ 数/ ,/ a11/ 表示/ 覆盖/ 边/ e/ 的/ 成功/ 测试用例/ 数/ ,/ a00/ 表示/ 未/ 覆盖/ 边/ e/ 的/ 失效/ 测试用例/ 数/ ./ 相似性/ 系数/ 公式/ Ochiai/ 原本/ 被/ 运用/ 于/ 植物学/ 分类/ 领域/ ,/ 文献/ [/ 16/ ]/ 中/ Abreu/ 等/ 人/ 将/ 现有/ 的/ 相似性/ 系数/ 公式/ 用于/ 软件/ 错误/ 定位/ ,/ 比较/ 发现/ Ochiai/ 的/ 性能/ 一直/ 优于/ 其它/ 相似性/ 系数/ 公式/ ./ (/ 3/ )/ 计算错误/ 传播/ 率/ ./ 错误/ 传播/ 率/ 是/ 指/ 程序/ 错误/ 状态/ 经过/ 某/ 分支/ (/ 或者/ 定义/ 使用/ 对/ )/ 传播/ 影响/ 程序/ 状态/ 的/ 可能性/ ./ 如表/ 2/ 中/ ,/ 定义/ 使用/ 对/ (/ 8/ ,/ 11/ ,/ y/ )/ 和/ 定义/ 使用/ 对/ (/ 9/ ,/ 11/ ,/ z/ )/ 的/ 可疑/ 度/ 都/ 为/ 0.632/ ,/ 所以/ 定义/ 使用/ 对/ (/ 8/ ,/ 11/ ,/ y/ )/ 的/ 错误/ 传播/ 率/ :/ prob/ (/ 8/ ,/ 11/ ,/ y/ )/ =/ suspdu/ -/ pair/ (/ 8/ ,/ 11/ ,/ y/ )/ (/ 4/ )/ 建立/ 语句/ 可疑/ 度/ 之间/ 的/ 线性关系/ ./ 本文/ 借鉴/ CP/ 模型/ 的/ 方法/ 用/ 线性关系/ 近似/ 表示/ 语句/ 可疑/ 度/ 之间/ 存在/ 的/ 相关性/ ./ 但是/ 与/ CP/ 模型/ 不同/ ,/ 本文/ 考虑/ 在/ 程序执行/ 中/ 程序/ 错误/ 状态/ 终止/ 传播/ 情形/ (/ 例如/ 程序/ 异常/ 终止/ )/ ,/ 因此/ 对/ 程序/ 中/ 任意/ 语句/ s/ 在/ 整数/ 溢出/ 错误/ 传播/ 过程/ 中/ 的/ 情形/ 做/ 以下/ 假设/ :/ 情形/ 1/ ./ 程序执行/ 过程/ 中/ ,/ 程序/ 的/ 错误/ 状态/ 经/ 语句/ s/ 传播/ 至下/ 一个/ 语句/ s/ ,/ 语句/ s/ 为/ 语句/ s/ 在/ 分支/ 覆盖/ 图/ 或者/ 定义/ 使用/ 对/ 覆盖/ 图中/ 的/ 子/ 节点/ ./ 情形/ 2/ ./ 程序执行/ 过程/ 中/ ,/ 程序/ 的/ 错误/ 状态/ 在/ 语/ 本文/ 将/ 两种/ 情形/ 的/ 概率/ 之/ 和/ 作为/ 语句/ s/ 的/ 可疑/ 句/ s/ 处/ 终止/ ./ 度值/ ./ 本文/ 将/ 程序/ 分支/ 覆盖/ 图/ 和/ 定义/ 使用/ 对/ 覆盖/ 图/ 抽象/ 为/ 一个/ 有/ 向/ 无/ 环图/ G/ ,/ 将/ 错误/ 状态/ 传播/ 抽象/ 为/ 错误/ 状态/ 在/ G/ 中/ 节点/ 向/ 相邻/ 节点/ 迁移/ ./ Page6/ 假设/ 本文/ 得到/ 节点/ A/ 所有/ 出边/ 和/ 入边/ 的/ 可疑/ 度/ ,/ 分别/ 是/ 入边/ suspedge/ (/ e1/ )/ ,/ suspedge/ (/ e2/ )/ 和/ 出边/ suspedge/ (/ e3/ )/ ,/ suspedge/ (/ e4/ )/ ,/ 如图/ 2/ 所示/ ./ 对于/ 情景/ 1/ ,/ 则/ 用/ 全/ 概率/ 公式/ 表示/ 节点/ A/ 的/ 可疑/ 度/ susp/ (/ 1/ )/ E/ )/ susps/ (/ E/ )/ ,/ 这里/ P/ (/ A/ |/ D/ )/ 表示/ 节点/ D/ 被/ 错误/ 状态/ 影响/ 时/ ,/ 错误/ 状态/ 由/ A/ 迁移/ 至/ D/ (/ 即/ 通过/ e3/ 传播/ )/ 的/ 概率/ ,/ 即/ 错误/ 传播/ 率/ ./ P/ (/ A/ |/ D/ )/ susps/ (/ D/ )/ 表示/ 节点/ D/ 被/ 错误/ 状态/ 影响/ 时/ ,/ 节点/ A/ 包含/ 缺陷/ 的/ 可能性/ ,/ 同理/ P/ (/ A/ |/ E/ )/ susps/ (/ E/ )/ 表示/ 节点/ E/ 被/ 错误/ 状态/ 影响/ 时/ ,/ 节点/ A/ 包含/ 缺陷/ 的/ 可能性/ ./ 这里/ P/ (/ A/ |/ D/ )/ =/ prob/ (/ e3/ )/ ,/ P/ (/ A/ |/ E/ )/ =/ prob/ (/ e4/ )/ ./ 因此/ 对于/ 情形/ 1/ ,/ susp/ (/ 1/ )/ prob/ (/ e4/ )/ susps/ (/ E/ )/ ./ 对于/ 情形/ 2/ ,/ 由于/ 节点/ A/ 无子/ 节点/ ,/ 本文/ 直接/ 将/ 包含/ 节点/ A/ 的/ 所有/ 入边/ 的/ 可疑/ 度/ 求和/ 作为/ 节点/ A/ 的/ 可疑/ 度/ ,/ susp/ (/ 2/ )/ 直觉/ 上/ 在/ 有/ 向/ 无/ 环图/ G/ 中/ ,/ 包含/ 节点/ A/ 的/ 所有/ 边中/ ,/ 入边/ 数越/ 多/ ,/ 则/ 发生/ 情形/ 2/ 的/ 可能性/ 越大/ ,/ 同样/ 出边/ 数越/ 多/ 情形/ 1/ 发生/ 的/ 可能性/ 越大/ ,/ 故/ 本文/ 得到/ 式/ (/ 1/ )/ :/ susps/ (/ A/ )/ =/ ein/ 其中/ 情形/ 1/ 的/ 可能性/ 为/ eout/ 点/ A/ 的/ 出边数/ 与/ 包括/ 节点/ A/ 的/ 所有/ 边数/ 之/ 比/ ;/ 情形/ 2/ 的/ 可能性/ 为/ ein/ 数/ 与/ 包括/ 节点/ A/ 的/ 所有/ 边数/ 之/ 比/ ./ 当/ eout/ 例如/ 节点/ A/ 为/ 程序/ 出口/ 语句/ ,/ 或者/ 在/ 执行/ 所有/ 测试用例/ 时/ 程序/ 都/ 异常/ 退出/ ,/ 当/ ein/ 节点/ A/ 无入/ 边/ ,/ 例如/ 节点/ A/ 为/ 程序/ 入口/ 语句/ ./ 按照/ 式/ (/ 1/ )/ ,/ 本文/ 将/ 程序/ 中/ 每个/ 语句/ 的/ 可疑/ 度/ 写成/ 方程组/ 的/ 形式/ ./ 分别/ 在/ 数据流/ 和/ 控制流/ 情形/ 下/ 建立/ 关于/ 语句/ 可疑/ 度/ 的/ 线性方程组/ ,/ 并/ 将/ 可疑/ 度/ 计算/ 过程/ 转化/ 为/ 求解/ n/ 元/ 线性方程组/ 问题/ ,/ 使用/ 高斯消/ 元法/ 求解/ 方程组/ ./ (/ 5/ )/ 诊断/ 报告/ ./ ①/ 模型/ 整合/ 由于/ 不/ 知道/ 整数/ 溢出/ 错误/ 发生/ 后/ 错误/ 状态/ 是/ 通过/ 控制流/ 还是/ 数据流/ 传播/ ,/ 对于/ 语句/ ni/ ,/ 本文/ 使用/ 式/ (/ 2/ )/ 计算/ 最终/ 语句/ ni/ 的/ 可疑/ 度/ ./ susp/ (/ ni/ )/ =/ max/ (/ suspdu/ (/ ni/ )/ ,/ suspb/ (/ ni/ )/ )/ (/ 2/ )/ 式/ (/ 2/ )/ 表示/ 语句/ ni/ 的/ 可疑/ 度为/ suspdu/ (/ n1/ )/ (/ 数据流/ 传播/ )/ 和/ suspb/ (/ ni/ )/ (/ 控制流/ 传播/ )/ 中/ 可疑/ 度/ 较大/ 的/ 值/ ./ ②/ 特殊/ 情况/ 处理/ 若/ 语句/ ni/ 不/ 属于/ 任何/ 定义/ 使用/ 对/ ,/ 则/ suspdu/ (/ ni/ )/ =/ 0/ ;/ 若/ 语句/ ni/ 不/ 属于/ 任何/ 分支/ ,/ 则/ 其/ suspb/ (/ ni/ )/ =/ 0/ ./ ③/ 语句/ 排序/ 本文/ 用/ 秩/ (/ rank/ )/ 表示/ 语句/ 在/ 诊断/ 报告/ 中/ 的/ 排名/ ,/ 秩越/ 小/ 表示/ 被/ 程序员/ 检查/ 的/ 优先级/ 越高/ ./ 本文/ 采用/ last/ -/ line/ 策略/ 处理/ 语句/ 可疑/ 度值/ 相同/ 的/ 情况/ ,/ 即/ 对于/ 所有/ 可疑/ 度值/ 相同/ 的/ 语句/ 在/ 取/ 初始/ 排序/ 中/ 最后/ 一个/ 语句/ 的/ 秩/ 作为/ 这些/ 语句/ 的/ 秩/ ./ 表/ 1/ 中/ 本文/ 使用/ INTRank/ 模型/ 计算/ 语句/ 可疑/ 度/ ,/ 错误/ 语句/ 7/ 的/ 可疑/ 度为/ 0.421/ ,/ 为/ 第二/ 大/ 的/ 可疑/ 度值/ ./ 4/ 实验/ 评价/ 4.1/ 实验/ 概述/ 本文/ 选择/ 两个/ 任务/ 关键/ 软件/ (/ tcas/ 和/ schedule/ )/ 作为/ 被测/ 程序/ ,/ tcas/ 和/ schedule/ 均/ 来自/ SIR/ 的/ 西门子/ 测试/ 套件/ ①/ ./ 实验/ 的/ 软件/ 环境/ 是/ CentOS4/ ./ 8/ 操作系统/ ,/ JDK1/ ./ 6.0/ _/ 13/ ,/ glibc2/ ./ 2.3/ ;/ 硬件/ 环境/ 是/ DellOPI/ -/ PLEX755/ ,/ Intel/ 双核/ 处理器/ ./ 本/ 实验/ 环境/ 中/ 整型/ 变量/ 取值/ 范围/ 如表/ 4/ 所示/ ./ 我们/ 使用/ WET/ ②/ 运行/ 架构/ 收集/ 分支/ 和/ 定义/ 使用/ 对/ 覆盖/ 信息/ ./ ①/ ②/ Page7/ 整数/ 类型/ shortint4/ ./ 2/ 实验/ 数据/ 4.2/ ./ 1/ 故障注入/ 由于/ tcas/ 程序/ 中/ 主要/ 是/ 逻辑运算/ ,/ 无/ 内存/ 使用/ 函数/ ,/ 并且/ 只有/ 少量/ 算数/ 运算/ ,/ 因此/ 本文/ 在/ tcas/ 中仅/ 注入/ 截断/ 错误/ ,/ 即将/ int/ 型/ 强制/ 转换/ 为/ shortint/ ./ 由于/ 变量/ Own/ _/ Tracked/ _/ Alt/ 和/ Other/ _/ Tracked/ _/ Alt/ 分别/ 表示/ 为/ 己方/ 飞机/ 所在/ 海拔高度/ 和/ 被/ 侦测/ 飞机/ 所在/ 海拔高度/ ,/ 获取/ 极端/ 数据/ 的/ 可能性/ 大/ (/ 整数/ 溢出/ 错误/ 的/ 发生/ 往往/ 与/ 输入/ 极端/ 数据/ 有关/ [/ 3/ ]/ )/ ,/ 所以/ 本文/ 分别/ 在/ 这/ 两个/ 变量/ 的/ 定义/ 语句/ 和/ 使用/ 语句/ 注入/ 截断/ 错误/ ./ 注入/ 故障/ 的/ 策略/ 主要/ 分为/ 单/ 故障注入/ 和/ 多/ 故障注入/ ./ v1/ ~/ v6/ 为单/ 故障/ 版本/ ,/ v7/ ~/ v19/ 为/ 多故障/ 版本/ ./ schedule/ 中/ 使用/ 了/ 动态/ 链表/ 数据结构/ ,/ 所以/ 本文/ 选择/ 最/ 容易/ 引发/ 内存/ 安全/ 问题/ 的/ malloc/ (/ )/ 函数/ 和/ 最/ 容易/ 引发/ 算数/ 溢出/ 的/ 计数器/ 变量/ (/ n/ 变量/ 和/ mem/ _/ count/ 变量/ )/ 注入/ 整数/ 溢出/ 错误/ ./ 本文/ 在/ schedule/ 中/ 注入/ 了/ 算数/ 溢出/ 和/ 符号/ 错误/ ,/ v1/ ~/ v6/ 为单/ 故障/ 程序/ 版本/ ,/ v7/ 和/ v8/ 为/ 多故障/ 程序/ 版本/ ./ 4.2/ ./ 2/ 测试数据/ 本文/ 从/ tcas/ // testplans/ ./ alt/ // testplans/ -/ bigcov/ 中/ 选择/ suite/ ./ 271/ 作为/ 初始/ 测试用例/ ,/ 将/ 每个/ 测试用例/ 中/ 的/ 第/ 4/ 个/ 和/ 第/ 6/ 个/ 参数/ 同时/ 加上/ 32767/ ,/ 例如/ 97611537839010002641741100/ 转化/ 为/ 9761138145390337672641741100/ ./ 这样/ 参数/ 变量/ Own/ _/ Tracked/ _/ Alt/ 和/ Other/ _/ Tracked/ _/ Alt/ 的/ 取值/ 范围/ 正好/ 控制/ 在/ [/ 32767/ ,/ 2147483647/ ]/ ,/ 满足/ 截断/ 错误/ 的/ 触发/ 条件/ ./ 另外/ 本文/ 通过/ 代码/ 覆盖率/ 检测工具/ gcov/ 验证/ ,/ 转化/ 后/ 的/ 测试用例/ 集/ 分支/ 覆盖率/ 为/ 100/ %/ ,/ 语句/ 覆盖率/ 为/ 98.63/ %/ ,/ 如图/ 3/ 所示/ ./ 由于/ tcas/ 中/ 存在/ 不可/ 达/ 语句/ ,/ 所以/ 语句/ 覆盖率/ 不能/ 达到/ 100/ %/ ,/ 此/ 为/ 软件设计/ 错误/ ,/ 在/ 本/ 实验/ 中/ 不予考虑/ ./ schedule/ 的/ 测试用例/ 本文/ 选择/ // testplans/ ./ alt/ // testplans/ -/ bigcov/ // suite1000/ 作为/ 测试用例/ 以/ 保证/ 最大/ 覆盖率/ 如图/ 4/ 所示/ ./ 4.3/ 评价/ 分析/ 4.3/ ./ 1/ 评价/ 方法/ 准确性/ 进行/ 评估/ ./ 本文/ 使用/ 文献/ [/ 17/ ]/ 中/ 的/ 评价/ 方法/ 对/ 错误/ 定位/ 的/ 错误/ 定位/ 方法/ 的/ 准确性/ 可以/ 表述/ 为/ ,/ 按照/ 错误/ 定位/ 模型/ 对/ 语句/ 的/ 可疑/ 度/ 排名顺序/ 检查/ 代码/ ,/ 程序员/ 找到/ 错误/ 语句/ 之前/ 所/ 必须/ 检查/ 的/ 代码/ 数量/ ./ 程序员/ 检查/ 的/ 语句/ 数越/ 少/ ,/ 说明/ 错误/ 定位/ 方法/ 准确性/ 越高/ ,/ 同时/ 也/ 说明/ 无需/ 检查/ 的/ 代码/ 数越/ 多/ ./ 本文/ 用/ 无需/ 检查/ 代码/ 占/ 可/ 执行/ 语句/ 数/ 的/ 比例/ 定量/ 表示/ 错误/ 定位/ 方法/ 的/ 准确性/ ./ 定义/ 错误/ 定位/ 方法/ 的/ 准确性/ 为/ 对于/ 多故障/ 版本/ 程序/ 前提/ 下/ 的/ 错误/ 定位/ 方法/ 的/ 其中/ ,/ rank/ 表示/ 诊断/ 报告/ 中/ 语句/ 的/ 秩/ ,/ total/ 表示/ 可/ 执行/ 语句/ 总数/ ./ 准确性/ 本文/ 使用/ 文献/ [/ 18/ ]/ 的/ 评价/ 方法/ ./ 多故障/ 版本/ 程序/ 前提/ 下/ 的/ 错误/ 定位/ 方法/ 准确率/ 为/ 找到/ 首个/ 错误/ 语句/ 前/ 必须/ 检查/ 的/ 语句/ 个数/ ,/ 占/ 可/ 执行/ 语句/ 总数/ 的/ 百分比/ ./ 定义/ 漏报/ 率为/ 其中/ ,/ D/ 为/ 诊断/ 报告/ 中/ 注入/ 错误/ 的/ 数量/ ,/ E/ 为/ 注入/ 错误/ 的/ 总/ 数量/ ./ 本文/ 定义/ 整数/ 溢出/ 错误/ 定位/ 方法/ 定位/ 整数/ 溢出/ 错误/ 的/ 能力/ C/ 为/ NP/ =/ 0/ 的/ 程序/ 版本/ 数占/ 所有/ 注入/ 相同/ 整数/ 溢出/ 错误/ 类型/ 的/ 程序/ 版本/ 数/ 的/ 百分比/ 4.3/ ./ 2/ 实验/ 结果/ (/ 1/ )/ 单/ 故障/ 程序/ 版本/ 本文/ 列出/ 了/ tcas/ 和/ schedule/ 程序/ 各个/ 单/ 故障/ 版本/ 的/ 错误/ 定位/ 准确率/ 的/ 对比/ 图如图/ 5/ 和/ 图/ 6/ 所示/ ,/ 另外/ 本文/ 将/ q/ 值/ 划分/ 为/ 5/ 个/ 区间/ ,/ 统计/ 了/ 每种/ 方法/ 的/ q/ 值/ 在/ 这/ 5/ 个/ 区间/ 中/ 的/ 分布/ 如表/ 5/ 和表/ 6/ 所示/ ./ Page8/ 图/ 5tcas/ 错误/ 定位/ 方法/ 准确率/ 对比/ (/ 单/ 故障/ 版本/ )/ 图/ 6schedule/ 错误/ 定位/ 方法/ 准确率/ 对比/ (/ 单/ 故障/ 版本/ )/ 表/ 5tcas/ 各单/ 故障/ 版本/ 准确率/ 狇/ 的/ 区间/ 分布/ q/ 的/ 划分/ 区间/ LOUPE/ 模型/ 0.8/ ~/ 1.0500/ ./ 6/ ~/ 0.80/ ./ 4/ ~/ 0.6500/ ./ 2/ ~/ 0.40/ ~/ 0.2/ 表/ 6schedule/ 单/ 故障/ 版本/ 准确率/ 狇/ 的/ 区间/ 分布/ q/ 的/ 划分/ 区间/ LOUPE/ 模型/ 0.8/ ~/ 1.0500/ ./ 6/ ~/ 0.833/ ./ 333.300/ ./ 4/ ~/ 0.60/ ./ 2/ ~/ 0.416/ ./ 716.700/ ~/ 0.2/ (/ 2/ )/ 多故障/ 程序/ 版本/ tcas/ 和/ schedule/ 程序/ 各个/ 多故障/ 版本/ 的/ 错误/ 定位/ 准确率/ 如图/ 7/ 、/ 图/ 8/ 所示/ ./ 另外/ 与/ 单/ 故障/ 程序/ 版本/ 类似/ ,/ 本文/ 分别/ 将/ q/ 的/ 值/ 划分/ 为/ 5/ 个/ 区间/ ,/ 统计/ 了/ 每种/ 方法/ q/ 的/ 值/ 在/ 这/ 5/ 个/ 区间/ 中/ 的/ 分布/ 如表/ 7/ 所示/ ./ 表/ 7tcas/ 多故障/ 版本/ 程序/ 错误/ 定位/ 准确率/ 狇/ 的/ 区间/ 分布/ q/ 的/ 划分/ 区间/ LOUPE/ 模型/ 0.8/ ~/ 1.038/ ./ 40.6/ ~/ 0.830/ ./ 80.4/ ~/ 0.630/ ./ 80.2/ ~/ 0.400/ ~/ 0.20/ (/ 3/ )/ 现有/ 整数/ 溢出/ 错误/ 检测工具/ 结果/ 本文/ 选择/ 现有/ 的/ 两种/ 典型/ 整数/ 溢出/ 错误/ 检测工具/ 作为/ 研究/ 对象/ ./ splint/ 为/ 静态/ 分析/ 工具/ ,/ 可以/ 使用/ 类型/ 推理方法/ 检测/ 源代码/ 中/ 的/ 类型/ 冲突/ ./ valgrind/ -/ memcheck/ 为/ 动态/ 检测工具/ ,/ 运用/ 动态/ 追踪/ 污点/ 传播/ 技术/ 监控/ 不/ 信任/ 数据/ ,/ 若/ 不/ 信任/ 数据/ 在/ 内存/ 分配/ 函数/ 使用/ 中/ 造成/ 空/ 指针/ 使用/ 、/ 内存/ 泄露/ 等/ 错误/ ,/ 则/ 工具/ 报错/ ./ 两个/ 工具/ 的/ 检测/ 结果/ 如下/ ./ 版本号/ 注入/ v114100v112550v2150v1224100v314100v1324100v414100v142550v514100v1524100v6150v162550v724100v1724100v8260v182550v92550v192550v1024100/ 版本号/ 注入/ v1139100v5139100v21400v61400v31400v7239100v4139100v82410/ 版本号/ 注入/ v110100v1120100v210100v1220100v310100v1320100v410100v1420100v510100v1520100v610100v1620100v720100v1720100v820100v1820100v920100v1920100v1020100/ 表/ 11valgrind/ -/ memcheck/ 检测/ 结果/ (/ schedule/ )/ 版本号/ 注入/ v110100v5110v210100v6110v3110v720100v410100v82150Page94/ ./ 3.3/ 实验/ 讨论/ (/ 1/ )/ 错误/ 定位/ 模型/ 有效性/ 对比/ tcas/ 程序/ 中如图/ 5/ 和表/ 6/ 所示/ ,/ 对于/ 本/ 实验/ 中/ 注入/ 的/ 6/ 个单/ 故障/ 版本/ 程序/ ,/ 本文/ 方法/ 优于/ 现有/ 错误/ 定位/ 方法/ ./ 将/ q/ 的/ 范围/ 划分/ 为/ 5/ 个/ 区间/ ,/ 统计/ 每个/ 方法/ 的/ 准确率/ 在/ 各个/ 区间/ 的/ 个数/ ,/ 结果/ 发现/ 6/ 个单/ 故障/ 版本/ 程序/ 中/ 本文/ 方法/ 的/ 准确率/ 100/ %/ 在/ 0.8/ ~/ 1.0/ 之间/ ,/ LOUPE/ 仅/ 有/ 50/ %/ ,/ CP/ 模型/ 的/ 准确率/ 则/ 均匀分布/ 在/ 中间/ 3/ 个/ 区间/ 内/ ./ 而/ 在/ schedule/ 的/ 单/ 故障/ 程序/ 中/ ,/ 本文/ 方法/ 有/ 83.3/ %/ 的/ q/ 值/ 在/ 0.8/ ~/ 1.0/ 之间/ ,/ 如表/ 6/ 所示/ ./ 如图/ 7/ 和/ 图/ 8/ 所示/ 本文/ 方法/ 对于/ tcas/ 多故障/ 程序/ 版本/ 情况/ 下/ 发现/ 首个/ 错误/ 语句/ 的/ 效率/ 明显/ 优于/ 现有/ 方法/ ./ 虽然/ v9/ 程序/ LOUPE/ 的/ 准确率/ 比/ 本文/ 方法/ 高/ ,/ 但是/ 其/ 平均/ 准确率/ 却/ 低于/ 本文/ 方法/ ./ v10/ 和/ v17/ 版本/ 程序/ ,/ LOUPE/ 的/ 准确率/ 与/ 本文/ 方法/ 相同/ ,/ 但是/ 平均/ 准确率/ 同样/ 低于/ 本文/ 方法/ ./ 所以/ 本文/ 方法/ 对于/ 实验/ 中/ 的/ 多故障/ 程序/ 版本/ 准确率/ 总体/ 上/ 优于/ LOUPE/ 和/ CP/ ./ 在/ 13/ 个/ 多故障/ 版本/ 的/ tcas/ 程序/ 中/ ,/ 本文/ 方法/ 有/ 92.3/ %/ 的/ q/ 值/ 在/ 0.8/ ~/ 1.0/ 之间/ (/ 如表/ 7/ )/ ,/ 说明/ 本文/ 方法/ 定位/ 多故障/ 的/ 准确率/ 优于/ 现有/ 方法/ ./ (/ 2/ )/ 与/ 现有/ 整数/ 溢出/ 错误/ 定位/ 工具/ 比较/ 从本/ 实验/ 结果/ 发现/ splint/ 可以/ 检测/ 符号/ 错误/ 和/ 截断/ 错误/ ,/ 但是/ 无法/ 检测/ 算数/ 溢出/ ./ 而/ valgrind/ -/ memcheck/ 可以/ 检测/ 发生/ 在/ malloc/ 函数/ 使用/ 中/ 的/ 整数/ 溢出/ 错误/ ,/ 但是/ 错误报告/ 仅仅/ 定位/ 到/ 错误/ 语句/ 所在/ 函数/ (/ 如图/ 9/ )/ ,/ 并/ 不能/ 指导/ 程序员/ 有效/ 地/ 调试程序/ ./ 并且/ 在/ tcas/ 的/ 检测/ 过程/ 中/ ,/ 由于/ tcas/ 没有/ 内存/ 使用/ 函数/ ,/ 因此/ valgrind/ -/ memcheck/ 不/ 报错/ ./ 本文/ 分别/ 列出/ 本/ 实验/ 的/ 每种/ 方法/ 对/ 3/ 种/ 整数/ 溢出/ 的/ 定位/ 能力/ C/ ,/ 即/ NP/ =/ 0/ 的/ 程序/ 版本/ 数占/ 所有/ 注入/ 相同/ 整数/ 溢出/ 错误/ 类型/ 的/ 程序/ 版本/ 数/ 的/ 百分比/ ,/ 如表/ 12/ 所示/ ./ 从中/ 可以/ 发现/ 静态/ 分析/ 工具/ 可以/ 有效/ 地/ 定位/ 符号/ 错误/ ;/ 基于/ 程序/ 特征/ 谱/ 的/ 整数/ 溢出/ 错误/ 定位/ 方法/ 可以/ 定位/ 全部/ 算数/ 溢出/ 错误/ ,/ 而/ splint/ 和/ valgrind/ -/ memcheck/ 无法/ 定位/ 算数/ 溢出/ 错误/ ./ (/ 3/ )/ 进一步/ 分析/ 整数/ 溢出/ 错误/ 在/ 程序运行/ 中/ 通过/ 数据流/ 和/ 控制流/ 传播/ ,/ 而/ 现有/ 的/ CP/ 模型/ 只/ 考虑/ 通过/ 控制流/ 传播/ 的/ 程序/ 错误/ ,/ 因此/ 使用/ 本文/ 提出/ 的/ INTRank/ 模型/ 定位/ 整数/ 溢出/ 错误/ 的/ 准确性/ 比/ CP/ 模型/ 高/ ,/ 如图/ 5/ ~/ 图/ 8/ 所示/ ./ 由于/ 程序/ 语句/ 之间/ 存在/ 数据/ 或者/ 控制/ 依赖/ 关系/ ,/ 因此/ 程序/ 语句/ 的/ 可疑/ 度/ 之间/ 同样/ 存在/ 相关性/ ./ 现有/ LOUPE/ 模型/ 虽然/ 考虑/ 到/ 语句/ 之间/ 存在/ 控制/ 依赖/ 和/ 数据/ 依赖/ 关系/ ,/ 但是/ 该/ 模型/ 将/ 分支/ 和/ 定义/ 使用/ 对/ 的/ 可疑/ 度/ 直接/ 作为/ 语句/ 可疑/ 度/ 的/ 作法/ 忽略/ 了/ 整数/ 溢出/ 错误/ 在/ 程序运行/ 时/ 存在/ 一定/ 的/ “/ 传播/ 距离/ ”/ ./ 因此/ INTRank/ 模型/ 的/ 准确性/ 比/ LOUPE/ 模型/ 高/ ,/ 如图/ 5/ ~/ 图/ 8/ 所示/ ./ 在/ 与/ 现有/ 整数/ 溢出/ 错误/ 检测/ 方法/ 的/ 对比/ 中/ ,/ 本文/ 方法/ 和/ 现有/ 基于/ 程序/ 特征/ 谱/ 错误/ 定位/ 方法/ 基本上/ 能够/ 定位/ 所有/ 整数/ 溢出/ 错误/ 定位/ 类型/ (/ CP/ 除外/ ,/ 如表/ 12/ 所示/ )/ ,/ 漏报/ 率极/ 低/ ./ 这是/ 由于/ 基于/ 程序/ 特征/ 谱/ 错误/ 定位/ 方法/ 是从/ 程序运行/ 结果/ 反向/ 推理/ 程序/ 失效/ 的/ 原因/ ./ 无论/ 程序/ 中/ 存在/ 何种/ 类型/ 整数/ 溢出/ 错误/ ,/ 只要/ 导致/ 程序/ 失效/ ,/ 基于/ 程序/ 特征/ 谱/ 错误/ 定位/ 方法/ 就/ 能/ 定位/ 该/ 错误/ ./ 表/ 12/ 检测/ 3/ 种/ 整数/ 溢出/ 错误/ 的/ 能力/ 犆/ 的/ 对比/ 类型/ 截断/ 错误/ 15.800100100100/ 符号/ 错误/ 10037.510010075/ 算数/ 溢出/ 05/ 结论/ 与/ 展望/ 本文/ 在/ 分析/ 整数/ 溢出/ 错误/ 在/ 程序运行/ 时/ 的/ 传播/ 特征/ 基础/ 上/ 建立/ 了/ 错误/ 定位/ 模型/ INTRank/ ,/ 提出/ 了/ 基于/ INTRank/ 模型/ 的/ 语句/ 可疑/ 度/ 方法/ ,/ 最后/ 实现/ 了/ 原型/ 工具/ INT/ -/ LM/ ,/ 运行/ 界面/ 如图/ 10/ 所示/ ./ 通过/ 对/ tcas/ 和/ schedule/ 进行/ 故障注入/ ,/ 生成/ 27/ 个/ 故障/ 版本/ 程序/ ,/ 故障/ 类型/ 涵盖/ 截断/ 错误/ 、/ 符号/ 错误/ 和/ 算数/ 溢出/ 这/ 3/ 种/ 基本/ 类型/ ./ 实验/ 结果显示/ :/ (/ 1/ )/ 在/ 满足/ 测试用例/ 最大/ 覆盖率/ 前提/ 下/ ,/ 本文/ 方法/ 可以/ 较/ 准确/ 地/ 定位/ 注入/ 的/ 整数/ 溢出/ 错误/ 语句/ ./ (/ 2/ )/ 单/ 故障/ 程序/ 前提/ 下/ ,/ INTRank/ 模型/ 定位/ tcas6/ 个/ 故障/ 版本/ 程序/ 中/ 整数/ 溢出/ 错误/ 的/ 准确率/ 100/ %/ 在/ 0.8/ ~/ 1.0/ 之间/ ,/ schedule/ 的/ 6/ 个/ 故障/ 程序/ 中有/ 83.3/ %/ 的/ 准确率/ 在/ 0.8/ ~/ 1.0/ 之间/ ./ 而/ 多故障/ Page10/ 前提/ 下/ INTRank/ 模型/ 的/ 准确率/ 总体/ 上/ 优于/ LOUPE/ 和/ CP/ 模型/ ,/ 这/ 也/ 进一步/ 说明/ 在/ 满足/ 测试用例/ 最大/ 覆盖率/ 前提/ 下/ ,/ 直接/ 将/ 定义/ 使用/ 对/ 或者/ 分支/ 的/ 可疑/ 度/ 赋值/ 于/ 语句/ 的/ 方法/ 不能/ 实现/ 对/ 整数/ 溢出/ 错误/ 的/ 准确/ 定位/ ./ 程序/ 语句/ 不能/ 视为/ 相互/ 独立/ 的/ 个体/ ,/ 他们/ 之间/ 的/ 可疑/ 度值/ 可以/ 近似/ 为/ 一种/ 线性关系/ ./ (/ 3/ )/ 基于/ 程序/ 特征/ 谱/ 整数/ 溢出/ 错误/ 定位/ 技术/ 的/ 漏报/ 率/ 比/ splint/ 和/ valgrind/ -/ memcheck/ 低/ ./ 实验/ 结果表明/ ,/ splint/ 和/ valgrind/ -/ memcheck/ 都/ 存在/ 漏报/ 现象/ ,/ 特别/ 是/ 算数/ 溢出/ 的/ 漏报/ 率/ 达到/ 100/ %/ ;/ 而/ 本文/ 方法/ 可以/ 定位/ 所有/ 注入/ 的/ 整数/ 溢出/ 错误/ ,/ 漏报/ 率为/ 0/ ./ 本文/ 在/ 某些/ 方面/ 还有/ 待/ 进一步/ 的/ 改进/ 和/ 探索/ ./ 由于/ 本文/ 实验/ 中/ 的/ 初始/ 测试/ 输入/ 数据/ 均/ 来自/ 西门子/ 测试/ 套件/ ①/ ,/ 因此/ 下/ 一步/ 应该/ 研究/ 面向/ 整数/ 溢出/ 错误/ 定位/ 的/ 测试/ 输入/ 数据/ 生成/ 方法/ ./ 本文/ 实现/ 的/ 原型/ 工具/ 使用/ WET/ 运行/ 架构/ 获取/ 覆盖/ 信息/ ,/ 但是/ WET/ 运行/ 架构/ 的/ 运行/ 开销/ 比较/ 大/ ,/ 会/ 产生/ 大量/ 冗余/ 信息/ ,/ 目前/ 此/ 工具/ 只能/ 运用/ 于/ 中/ 小规模/ 程序/ ,/ 所以/ 如何/ 高效/ 地/ 获取/ 程序运行/ 信息/ 将/ 是/ 下/ 一步/ 的/ 研究/ 重点/ ./ 

