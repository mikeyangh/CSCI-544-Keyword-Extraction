Page1/ 软体/ 多/ 局部/ 破碎/ 特效/ 研究/ 曾亮/ 吴亚刚/ (/ 国防科学技术大学/ 计算机/ 学院/ 软件/ 所/ 长沙/ 410073/ )/ 摘要/ 基于/ 物理/ 的/ 软体/ 仿真/ 与/ 动画/ 是/ 计算机/ 图形学/ 的/ 研究/ 热点/ 之一/ ,/ 但/ 大多数/ 方法/ 计算/ 复杂度/ 较/ 高/ ,/ 难以获得/ 实时性/ 交互/ ./ 文中/ 在/ 虚/ 节点/ 算法/ 基础/ 上/ ,/ 提出/ 了/ 一种/ 软体/ 多/ 局部/ 破碎/ 特效/ 行为/ 描述/ 算法/ ,/ 该/ 算法/ 通过/ 判别/ 组成/ 软体/ 物理/ 模型/ 的/ 质点/ 受力/ 、/ 弹簧/ 结构/ 损伤/ 情况/ ,/ 对模型/ 进行/ 局部/ 几何/ 拓扑/ 重构/ ,/ 较/ 好/ 地/ 描述/ 了/ 软体/ 局部/ 破碎/ 行为/ ./ 此外/ ,/ 在/ 闭合/ 压力/ 模型/ 理论/ 基础/ 上/ ,/ 结合/ 质点/ 弹簧/ 系统/ ,/ 实现/ 了/ 一个/ 实时/ 交互/ 的/ 软体/ 仿真/ 平台/ ./ 实验/ 证明/ ,/ 整个/ 软体/ 仿真/ 及/ 多/ 局部/ 破碎/ 特效/ 过程/ 可以/ 获得/ 稳定/ 、/ 实时/ 交互/ 、/ 具有/ 物理/ 真实感/ 的/ 效果/ ./ 关键词/ 软体/ 仿真/ ;/ 虚/ 节点/ ;/ 局部/ 破碎/ ;/ 质点/ 弹簧/ 系统/ ;/ 拓扑/ 重构/ 1/ 引言/ 近年来/ ,/ 真实感/ 实体/ 形变/ 的/ 物理/ 仿真/ 与/ 动画/ 越来越/ 引起/ 图形/ 学界/ 研究者/ 的/ 兴趣/ ./ 软体/ (/ SoftBody/ )/ 仿真/ ,/ 在/ 医疗/ 外科手术/ 模拟/ 中/ 扮演/ 了/ 重要/ 角色/ [/ 1/ ]/ ./ 随着/ 可编程/ 图形/ 硬件/ 的/ 大众化/ 投入使用/ ,/ 游戏/ 、/ 娱乐/ 、/ 影视动画/ 等/ 领域/ 也/ 越来越/ 需要/ 复杂/ 、/ 真实感/ 的/ 软体/ 、/ 粘性/ 体形/ 变/ 及其/ 破碎/ 的/ 相关/ 特效/ ;/ 如果/ 把/ 刚性/ 物体/ (/ rigidbody/ )/ 看成/ 是/ 软体/ 的/ 特例/ [/ 2/ ]/ ,/ 那么/ 刚性/ 物体/ 在/ 外力作用/ 下/ 的/ 形变/ 和/ 破碎/ 研究/ ,/ 也/ 将/ 从/ 软体/ 仿真/ 的/ 相关/ 研究/ 中/ 获得/ 启发/ ./ 在/ 软体/ 模拟/ 方面/ ,/ 目前/ 主要/ 有/ 两种/ 方法/ :/ 质点/ 弹簧/ 系统/ (/ MassSpringSystem/ ,/ MSS/ )/ [/ 1/ ,/ 3/ -/ 6/ ]/ 方法/ 和/ 有限元/ 方法/ (/ FiniteElementMethod/ ,/ FEM/ )/ [/ 7/ -/ 8/ ]/ ./ 质点/ 弹簧/ 系统/ 由于/ 易/ 理解/ 、/ 易/ 实现/ ,/ 已/ 被/ 研究者/ 广泛应用/ 在/ 诸多/ 软体/ 类/ 仿真/ 中/ ,/ 包括/ 图形/ 硬件加速/ 的/ 外科手术/ 模拟/ [/ 1/ ]/ 、/ 布料/ 建模/ 仿真/ [/ 3/ ]/ 、/ 三维/ 火焰/ 仿真/ [/ 4/ ]/ 、/ 闭合/ 压力/ 模型/ 软体/ 仿真/ [/ 5/ ]/ 以及/ 实时/ 毛发/ 模拟/ [/ 9/ ]/ 等/ ,/ 均/ 可/ 采用/ 质点/ 弹簧/ 系统/ 进行/ 模拟/ ./ 文献/ [/ 7/ -/ 8/ ]/ 使用/ 有限元/ Page2/ 法/ 进行/ 软体/ 仿真/ ,/ 有限元法/ 在/ 算法/ 设计/ 上/ 具有/ 非常/ 高/ 的/ 复杂性/ [/ 2/ ]/ ,/ 它/ 能/ 获得/ 逼真/ 的/ 效果/ 但/ 一般/ 难以达到/ 实时性/ 要求/ ,/ 因此/ 一般/ 出现/ 在/ 工程/ 应用领域/ ./ 此外/ ,/ 研究者/ 们/ 一直/ 在/ 致力于/ 软体/ 仿真/ 领域/ 其它/ 问题/ 的/ 研究/ :/ 文献/ [/ 6/ ]/ 在/ 文献/ [/ 5/ ]/ 的/ 理论/ 基础/ 上/ 描述/ 了/ 软体/ 仿真/ 中/ 的/ 一种/ 漏气/ 现象/ ;/ 文献/ [/ 10/ ]/ 使用/ Navier/ -/ Stokes/ 方法/ ,/ 描述/ 了/ 压缩/ 流在/ 封闭/ 网格/ 中/ 的/ 流动/ 属性/ ,/ 较/ 好/ 地/ 体现/ 了/ 软体/ 的/ 行为/ ,/ 但/ 最大/ 的/ 缺陷/ 就是/ 无法/ 达到/ 实时/ 模拟/ [/ 2/ ]/ ;/ 文献/ [/ 11/ ]/ 解决/ 了/ 布料/ 仿真/ 中/ 三角形/ 对/ 之间/ 的/ 快速/ 碰撞检测/ 问题/ ./ 在/ 一些/ 物理/ 引擎/ 诸如/ ODE/ 、/ Physx/ 、/ Havok/ 、/ Bullet/ 中/ ,/ 也/ 都/ 较/ 成功/ 地/ 展示/ 了/ 软体/ 仿真/ 效果/ ./ 目前/ 软体/ 仿真/ 中/ 依然/ 存在/ 许多/ 具有/ 挑战性/ 的/ 问题/ ,/ 高效/ 实时/ 的/ 碰撞检测/ (/ 含/ 自身/ 碰撞检测/ )/ 、/ 逼真/ 的/ 破碎/ 行为/ 、/ 不同/ 材质/ 特征/ 体现/ 等/ 都/ 有待/ 解决/ ./ 尤其/ 是/ 针对/ 软体/ 的/ 破碎/ 行为/ ,/ 目前/ 的/ 研究/ 文献/ 中/ 往往/ 很少/ 提及/ ./ 本文/ 在/ 文献/ [/ 5/ -/ 6/ ]/ 的/ 闭合/ 压力/ 理论/ 基础/ 上/ ,/ 融合/ 虚/ 节点/ 算法/ [/ 12/ ]/ 思想/ ,/ 提出/ 并/ 验证/ 了/ 软体/ 多/ 局部/ 破碎/ 特效/ 模拟/ 的/ 描述/ 算法/ ./ 该/ 方法/ 以/ 引发/ 破碎/ 行为/ 的/ 弹簧/ 、/ 质点/ 为/ 出发点/ ,/ 将/ 虚/ 节点/ 分散/ 在/ 邻接/ 三角/ 面片/ 中/ 进行/ 局部/ 拓扑/ 重构/ ./ 虚/ 节点/ 的/ 增加/ 离散/ 了/ 物理/ 模型/ 局部/ 区域/ 弹簧/ 的/ 紧/ 耦合/ 性/ ,/ 随着/ 仿真/ 过程/ 的/ 推移/ ,/ 逐渐/ 形成/ 了/ 局部/ 裂缝/ 、/ 局部/ 破碎/ 块/ ,/ 较/ 好/ 地/ 展现/ 了/ 软体/ 仿真/ 中/ 的/ 破碎/ 现象/ ./ 2/ 软体/ 仿真/ 建模/ 本文/ 软体/ 仿真/ 过程/ 吸取/ 了/ 当前/ 该/ 领域/ 成熟/ 方法/ 的/ 优点/ ,/ 软体/ 建模/ 采用/ 质点/ 弹簧/ 模型/ 1/ ,/ 将/ 软体/ 表面/ 网格/ 模型/ 的/ 边/ 作为/ 弹簧/ ,/ 把/ 离散/ 的/ 顶点/ 看作/ 弹簧/ 系统/ 中/ 的/ 质点/ ,/ 由/ 弹簧/ 进行/ 连接/ ./ 质点/ 的/ 运动/ 遵循/ 物理/ 规律/ ,/ 同时/ 软体/ 内部/ 看作/ 由/ 一定/ 数量/ 的/ 某种/ 理想气体/ 填充/ ,/ 且/ 该/ 气体/ 的/ 运动/ 遵循/ 热力学/ 方程/ ./ 2.1/ 质点/ 弹簧/ 模型/ 质点/ 弹簧/ 模型/ 将/ 软体/ 表面/ 网格/ 看成/ 一系列/ 质点/ 以及/ 连接/ 相邻/ 质点/ 的/ 弹簧/ 所/ 组成/ [/ 4/ ]/ ./ 对于/ 一个三维/ 表面/ (/ 实体/ )/ 模型/ ,/ 我们/ 可以/ 假想/ 该/ 对象/ 的/ 质量/ 离散/ 分布/ 在/ 模型/ 的/ 顶点/ 上/ ,/ 顶点/ 通过/ 边/ 连接/ ,/ 而边/ 则/ 是/ 我们/ 所/ 关注/ 的/ 质点/ 弹簧/ 系统/ 中/ 的/ 弹簧/ ,/ 这种/ 映射/ 关系/ 实现/ 了/ 从/ 几何/ 模型/ 到/ 物理/ 模型/ 的/ 转化/ 工作/ ./ 质点/ 弹簧/ 系统/ 是/ 一个/ 动态平衡/ 系统/ ,/ 质点/ 在/ 外力/ (/ 含/ 自身/ 重力/ )/ 作用/ 下/ 发生/ 位移/ ,/ 相邻/ 质点/ 的/ 位移/ 差/ 导致/ 连接/ 该/ 质点/ 的/ 弹簧/ 发生/ 形变/ ,/ 形变/ 弹簧/ 产生/ 弹力/ 反过来/ 作用/ 在/ 两端/ 的/ 质点/ 上/ ./ 弹簧/ 形变/ 过程/ 遵守/ 胡克定律/ ,/ 如/ 方程/ (/ 1/ )/ 所示/ ;/ 同时/ 为/ 抑制/ 两/ 相邻/ 质点/ 由/ 相对/ 位移/ 所/ 造成/ 的/ 粘滞性/ 拖曳/ [/ 5/ ]/ ,/ 在/ 弹簧/ 形变/ 过程/ 中/ 引入/ 振荡/ 平衡力/ ,/ 有效/ 避免/ 了/ 弹簧/ 的/ 无限/ 振荡/ ,/ 其/ 表达式/ 如/ 方程/ (/ 2/ )/ :/ 方程/ (/ 1/ )/ 中/ ,/ Fs/ 是/ 弹簧/ 形变/ 所/ 产生/ 的/ 弹力/ ,/ Ks/ 为/ 弹性系数/ ,/ xj/ 和/ xi/ 则/ 是/ 弹簧/ 所/ 连接/ 两/ 质点/ 的/ 位移/ ,/ lij0/ 为/ 两/ 质点/ 的/ 初始/ 位移/ 差/ ,/ 也/ 即/ 弹簧/ 的/ 原始/ 长度/ ;/ 方程/ (/ 2/ )/ 中/ Kd/ 为/ 弹簧/ 振荡/ 系数/ ,/ vi/ 和/ vj/ 为/ 质点/ 的/ 速度/ ./ Fs/ 、/ Fd/ 的/ 度量/ 遵从/ 牛顿定律/ ,/ 弹簧/ 两端/ 的/ 质点/ 受/ 弹性/ 作用力/ 大小/ 相同/ ,/ 方向/ 相反/ ./ 弹性系数/ Fs/ 、/ Ks/ 的/ 参数值/ 设置/ 则/ 依据/ 软体/ 所/ 要/ 表征/ 实体/ 的/ 物理/ 属性/ 而定/ ./ 弹簧/ 的/ 原始/ 长度/ 则/ 与其/ 所/ 映射/ 的/ 实体/ 几何/ 模型/ 边/ 的/ 长度/ 成/ 比例/ ./ 2.2/ 运动学/ 模型/ 由于/ 质点/ 具有/ 质量/ 属性/ ,/ 当有/ 外力/ (/ 重力/ 、/ 弹力/ )/ 的/ 作用/ 时/ ,/ 由/ 牛顿/ 第二/ 定律/ 我们/ 可以/ 获得/ 该/ 质点/ 的/ 加速度/ ,/ 如/ 方程/ (/ 3/ )/ 所示/ ;/ 在/ 此基础/ 上/ ,/ 使用/ 直观/ 的/ 显式/ 欧拉/ 积分/ 方法/ [/ 3/ ,/ 7/ ]/ ,/ 可/ 获得/ 质点/ 的/ 速度/ 、/ 位移/ 属性/ ,/ 它们/ 记录/ 了/ 质点/ 的/ 运动/ 状态/ ,/ 如/ 方程/ (/ 4/ )/ 、/ (/ 5/ )/ 所示/ :/ 质点/ 的/ 上述/ 运动学/ 属性/ 值/ 是/ 文中/ 软体/ 仿真/ 平台/ 进行/ 渲染/ 的/ 基本/ 对象/ ,/ 随着/ 仿真/ 过程/ 按/ 时间/ 步长/ 推进/ ,/ 质点/ 的/ 位移/ 不断/ 发生变化/ ,/ 质点/ 位移/ 差/ 引起/ 的/ 弹力/ 作用/ 在/ 质点/ 上/ 又/ 推动/ 了/ 质点/ 的/ 运动/ ,/ 整个/ 运动/ 过程/ 形成/ 了/ 软体/ 形变/ 运动学/ 模型/ ./ 2.3/ 闭合/ 压力/ 模型/ 文献/ [/ 5/ ]/ 中/ 提出/ 闭合/ 压力/ 模型/ ,/ 在/ 封闭/ 表面/ 模型/ 中/ 充入/ 一定/ 数量/ 的/ 理想气体/ ,/ 该/ 气体/ 会/ 与/ 模型/ 表面/ 产生/ 微观/ 相互作用/ ,/ 这种/ 作用/ 最终/ 以/ 气体/ 压强/ 的/ 形式/ 体现/ 出来/ ./ 依据/ 克劳修斯/ —/ —/ —/ 克拉/ 佩/ (/ Clausius/ -/ Clapeyron/ )/ 状态方程/ ,/ 可以/ 获得/ 软体/ 内部/ 压强/ 、/ 体积/ 、/ 温度/ 等/ 的/ 数学/ 关系/ ,/ 其/ 表述/ 如下/ :/ 方程/ (/ 6/ )/ 中/ P/ 代表/ 压强/ 值/ ,/ V/ 是/ 形变/ 软体/ 的/ 体积/ ,/ n/ 为/ 理想气体/ 的/ 摩尔/ 数/ ,/ R/ 则/ 是/ 气态/ 常量/ ,/ T/ 为/ 温度/ 值/ ./ 在/ 仿真/ 过程/ 中/ ,/ 我们/ 设定/ 方程/ (/ 6/ )/ 中/ 右边/ 表达式/ 的/ 值/ 保持/ 不变/ ,/ 以/ 常量/ Kp/ 表述/ ,/ 因此/ 当/ 求解/ 了/ 形变/ 软体/ 的/ 体积/ 后/ ,/ 可以/ 依据/ 公式/ (/ 7/ )/ 求解/ 压强/ 值/ :/ 依据/ 方程/ (/ 7/ )/ 所/ 获得/ 的/ 压强/ ,/ 对于/ 仿真/ 过程/ 中/ 由/ 三角/ 面片/ 组成/ 的/ 几何/ 模型/ ,/ 通过/ 数值积分/ 方法/ 可/ 求得/ 几何/ 面片/ 面积/ S/ ,/ 则/ 作用/ 在/ 面片/ 上/ 的/ 力为/ Page3/ 在/ 方程/ (/ 8/ )/ 基础/ 上数/ 乘该/ 面片/ 的/ 法/ 向量/ ,/ 即可/ 获得/ 作用/ 在/ 该/ 面片/ 上/ 具有/ 物理/ 意义/ 的/ 力/ ,/ 作用力/ 的/ 计算/ 如/ 方程/ (/ 9/ )/ 所示/ :/ 通过/ 加权/ 平均/ 的/ 形式/ 将/ 作用/ 在/ 面片/ 上/ 的/ 力/ 分散/ 作用/ 在/ 组成/ 面片/ 的/ 3/ 个/ 质点/ 上/ ,/ 最后/ 对/ 每个/ 质点/ 的/ 所/ 受/ 的/ 弹力/ 、/ 气体/ 压力/ 等/ 进行/ 矢量/ 累加/ ,/ 将/ 结果/ 与/ 运动学/ 模型/ 中/ 的/ 方程/ (/ 3/ )/ 相结合/ ,/ 软体/ 仿真/ 的/ 3/ 个/ 重要环节/ 耦合/ 在/ 一起/ 了/ ./ 3/ 虚/ 节点/ 算法/ 、/ 局部/ 破碎/ 行为/ 3.1/ 虚/ 节点/ 算法/ 虚/ 节点/ 算法/ (/ virtualnodealgorithm/ )/ 是/ 斯坦福大学/ FedkiwRon/ 教授/ 在/ 文献/ [/ 12/ ]/ 中/ 提出/ ,/ 用于/ 仿真/ 过程/ 中/ 改变/ 模型/ 的/ 拓扑/ 结构/ ,/ 它/ 解决/ 了/ 仿真/ 过程/ 中/ 材质/ 断裂/ 和/ 分离/ 的/ 问题/ ./ 算法/ 中/ ,/ 当/ 把/ 一个/ 节点/ 从图/ 1/ 虚/ 节点/ 算法/ 3.2/ 局部/ 破碎/ 行为/ 研究/ 破碎/ 行为/ ,/ 必须/ 解决/ 破碎/ 的/ 发生/ 时机/ 以及/ 如何/ 对/ 破碎/ 行为/ 进行/ 描述/ 这/ 两个/ 关键问题/ ./ 破碎/ 的/ 触发/ ,/ 在/ 质点/ 弹簧/ 系统/ 中/ 被/ 定义/ 为/ 由于/ 某/ 弹簧/ 受力/ 作用/ 超过/ 其/ 最大/ 限度/ 而/ 引发/ ;/ 当某/ 弹簧/ 处/ 引发/ 破碎/ 行为/ 时/ ,/ 我们/ 以该/ 弹簧/ 两个/ 端点/ 为/ 母本/ 生成/ 虚/ 节点/ ,/ 虚/ 节点/ 分散/ 在/ 与/ 该/ 弹簧/ 相邻/ 接/ 的/ 三角/ 面片/ 中/ 进行/ 几何/ 拓扑/ 重构/ ,/ 虚/ 节点/ 离散/ 了/ 质点/ 弹簧/ 模型/ 局部/ 区域/ 图/ 2/ 局部/ 破碎/ 行为/ 上面/ 阐述/ 的/ 是/ 局部/ 破碎/ 描述/ 算法/ 中以/ 弹簧/ 为/ 参考/ 对象/ 的/ 情况/ ,/ 它/ 是/ 在/ 虚/ 节点/ 算法/ 思想/ 启发/ 下/ 提出/ 的/ 最为/ 直观/ 的/ 局部/ 破碎/ 描述/ 算法/ 的/ 一个/ 部分/ ./ 如果/ 我们/ 从/ 虚/ 节点/ 算法/ 的/ 本质/ 思想/ 出发/ ,/ 也/ 即/ 从/ 材质/ 核心/ 点/ 出发/ ,/ 也/ 可/ 提炼出/ 一种/ 破碎/ 行为/ 表达方式/ ./ 在/ 图/ 1/ 中/ 我们/ 可以/ 看出/ ,/ 如果/ 以/ 材质/ 核心/ 点为/ 中心/ ,/ 通它/ 所属/ 环/ 中/ 切割/ 出去/ 时/ ,/ 将/ 以/ 该/ 环/ 的/ 中心点/ 为/ 基准/ ,/ 生成/ 一系列/ 虚/ 节点/ ./ 新/ 生成/ 的/ 虚/ 节点/ 将/ 获得/ 中心点/ 物理/ 属性/ 的/ 一个/ 拷贝/ ,/ 然后/ 这些/ 虚/ 节点/ 参与/ 到/ 周围/ 的/ 网格/ 面片/ 中/ 进行/ 拓扑/ 重组/ ,/ 构成/ 新/ 的/ 三角/ 面片/ ./ 重组/ 过程/ 决定/ 了/ 网格/ 破碎/ 的/ 自由度/ ,/ 虚/ 节点/ 算法/ 的/ 核心/ 是/ 虚/ 节点/ 拓扑/ 重组/ ./ 虚/ 节点/ 算法/ 首先/ 计算/ 环/ 中心点/ 的/ 位置/ ,/ 依据/ 所属/ 环/ 中/ 共享/ 该/ 中心点/ 的/ 三角/ 面片/ 数/ ,/ 生成/ 相应/ 数目/ 的/ 虚/ 节点/ ,/ 生成/ 的/ 虚/ 节点/ 将/ 分别/ 代替/ 三角/ 面片/ 原来/ 所/ 共享/ 的/ 环/ 中心点/ 进行/ 拓扑/ 重组/ ,/ 重组/ 过程/ 保持/ 了/ 原/ 网格/ 模型/ 的/ 闭合性/ ,/ 其/ 示意图/ 如图/ 1/ 所示/ ./ 图/ 1/ 中/ ,/ 用/ 箭头/ 指明/ 、/ 圆圈/ 标注/ 的/ 环/ 中心点/ 即将/ 被/ 分割/ 出去/ ,/ 该点/ 是/ 文献/ [/ 12/ ]/ 中/ 提到/ 的/ 材质/ 核心/ 点/ ./ 原/ 网格/ 拓扑/ 结构/ 中/ 周边/ 共有/ 6/ 个/ 面片/ 共享/ 了/ 该/ 材质/ 核心/ 点/ ,/ 因此/ 当/ 它/ 被/ 分离/ 出去/ 时/ ,/ 将/ 以/ 它/ 为/ 母本/ 拷贝/ 物理/ 属性/ 形成/ 6/ 个/ 虚/ 节点/ ,/ 新/ 生成/ 的/ 节点/ 分散/ 到/ 共享/ 核心/ 节点/ 的/ 面片/ 中/ ,/ 形成/ 新/ 的/ 拓扑/ 结构/ ./ 弹簧/ 的/ 紧/ 耦合/ 性/ ./ 在/ 引发/ 破碎/ 弹簧/ 的/ 两个/ 端点/ 之间/ ,/ 线性插值/ 形成/ 两个/ 虚/ 节点/ ,/ 虚/ 节点/ 具有/ 与/ 端点/ 成/ 线性/ 比例/ 的/ 位置/ 、/ 速度/ 、/ 质量/ ./ 同时/ ,/ 共享/ 该/ 弹簧/ 所/ 代表/ 的/ 边/ 的/ 三角/ 面片/ 将/ 重新/ 实例/ 化/ ,/ 不再/ 参与/ 仿真/ 过程/ ,/ 相应/ 由/ 加入/ 了/ 虚/ 节点/ 的/ 新/ 面片/ 替代/ ./ 随着/ 虚/ 节点/ 的/ 继续/ 运动/ ,/ 将会/ 在/ 新/ 生成/ 的/ 三角/ 面片/ 之间/ 形成/ 一定/ 的/ 缝隙/ 区域/ ,/ 我们/ 把/ 它/ 定义/ 为/ 裂缝/ ./ 裂缝/ 形成/ 过程/ 描述/ 图如图/ 2/ 所示/ ./ 过/ 与/ 虚/ 节点/ 的/ 组合/ 构成/ 材质/ 核心/ 块/ ,/ 形成/ 的/ 核心/ 块/ 恰好/ 是/ 即将/ 破碎/ 分离/ 出去/ 的/ 碎片/ ,/ 这样/ 一种/ 破碎/ 方式/ 较之于/ 裂缝/ 的/ 形成/ 更/ 具有/ 直观性/ ./ 核心/ 块/ 的/ 形成/ 示意图/ 如图/ 3/ 所示/ ./ 图/ 3/ 中/ ,/ 核心/ 点/ 受到/ 外界/ 作用/ 即将/ 引发/ 局部/ 核心/ 块/ 的/ 分离/ ./ 同样/ 是/ 以/ 核心/ 点为/ 母本/ 拷贝/ 形成/ 虚节/ Page4/ 点/ ,/ 原来/ 共享/ 核心/ 点/ 的/ 面片/ 上/ 的/ 两个/ 虚/ 节点/ 两/ 两/ 相连/ 形成/ 新/ 的/ 弹簧/ ,/ 新/ 生成/ 的/ 弹簧/ 首尾相连/ 形成/ 了/ 核心/ 材质/ 块/ ./ 新/ 生成/ 的/ 虚/ 节点/ 还/ 必须/ 再次/ 生成/ 自身/ 的/ 拷贝/ 以/ 进行/ 所在/ 面片/ 剩余/ 部分/ 拓扑/ 重组/ ,/ 该项/ 重组/ 过程/ 保证/ 了/ 原/ 模型/ 的/ 闭合性/ ./ 核心/ 材质/ 块/ 将/ 在/ 虚/ 节点/ 的/ 运动/ 下/ 逐渐/ 分离/ 出去/ ,/ 形成/ 了/ 软体/ 局部/ 的/ 块状/ 破碎/ 效果/ ./ 步骤/ 如下/ :/ 综合/ 上述/ 步骤/ ,/ 提炼/ 的/ 局部/ 破碎/ 行为/ 描述/ 算法/ 模型/ ;/ 向量/ ;/ 1/ ./ 质点/ 弹簧/ 系统/ 参数/ 初始化/ ;/ 2/ ./ 载入/ 软体/ 几何/ 模型/ ;/ 3/ ./ 几何/ 模型/ 映射/ 为/ 对应/ 于/ 质点/ 弹簧/ 系统结构/ 的/ 物理/ 4/ ./ 对/ 动力学/ 运动/ 方程/ 进行/ 欧拉/ 积分/ :/ 4.1/ ./ 遍历/ 各/ 质点/ ,/ 更新/ 外力作用/ ;/ 4.2/ ./ 计算/ 弹性/ 形变/ 产生/ 的/ 拉力/ ,/ 对/ 质点/ 累积/ 弹性/ 作用/ ;/ 4.3/ ./ 计算/ 软体/ 体积/ ,/ 更新/ 几何/ 模型/ 三角/ 面片/ 面积/ 、/ 法/ 4.4/ ./ 更新/ 气体/ 压强/ ,/ 对/ 质点/ 积累/ 理想气体/ 压力/ 作用/ ;/ 4.5/ ./ 求解/ 质点/ 加速度/ ,/ 更新/ 速度/ 、/ 位移/ 等/ 物理/ 属性/ ;/ 5/ ./ 破碎/ 检测/ :/ 5.1/ ./ 遍历/ 弹簧/ ,/ 判定/ 弹簧/ 形变/ 程度/ 是否/ 超出/ 最大/ 限度/ ;/ 5.2/ ./ 超过/ :/ 搜索/ 包含/ 此/ 弹簧/ 端点/ 的/ 面片/ ,/ 生成/ 虚/ 节点/ ,/ 图/ 3/ 核心/ 材质/ 块/ 形成/ 添加/ 新/ 弹簧/ ,/ 重组/ 局部/ 拓扑/ 关系/ ;/ 5.3/ ./ 检测/ 是否/ 有/ 核心/ 点/ 受力/ 超出/ 最大/ 限度/ ;/ 5.4/ ./ 有/ ,/ 生成/ 虚/ 节点/ 重构/ 形成/ 核心/ 块/ ,/ 同时/ 保留/ 原始/ 模/ 5.5/ ./ 是否/ 结束/ 仿真/ 过程/ ,/ 否则/ 转步/ 4/ 继续/ ./ 型/ 的/ 闭合性/ ;/ 4/ 系统验证/ 为了/ 验证/ 软体/ 仿真/ 模型/ 和/ 局部/ 破碎/ 行为/ 描述/ 算法/ ,/ 本文/ 对/ 布料/ 形变/ 、/ 软体/ 碰撞/ 以及/ 软体/ 多/ 局部/ 破碎/ 三种/ 情况/ 进行/ 了/ 测试/ ./ 仿真/ 平台/ 以/ 质点/ 弹簧/ 系统/ 为/ 基础/ ,/ 结合/ 欧拉/ 积分/ 方法/ ,/ 采用/ OpenGL/ 进行/ 绘制/ ,/ 在/ WindowsXP/ 系统/ 上/ 获得/ 了/ 具有/ 物理/ 真实感/ 、/ 实时/ 交互/ 的/ 效果/ ./ 4.1/ 布料/ 形变/ 基于/ 质点/ 弹簧/ 系统/ 的/ 布料/ 仿真/ 是/ 软体/ 仿真/ 的/ 基础/ ,/ 环境/ 空间/ 设置/ 为/ 一个/ 连续/ 变化/ 的/ 风场/ ,/ 该风场/ 将/ 作用/ 在/ 质点/ 弹簧/ 系统/ 的/ 每/ 一个/ 质点/ 上/ ./ 结构/ 组织/ 良好/ 的/ 质点/ 会/ 在/ 弹簧/ 的/ 弹性/ 作用/ 下/ 进行/ 有/ 规律/ 的/ 物理/ 运动/ ,/ 从而/ 达到/ 布料/ 实时/ 形变/ 的/ 效果/ ./ 本文/ 软体/ 仿真/ 平台/ 中/ 二维/ 布料/ 仿真/ 效果图/ 如图/ 4/ 所示/ ./ 图/ 4/ 中/ ,/ 左图/ 为/ 布料/ 弹簧/ 系统/ 组织/ 结构图/ ,/ 线框/ 显示/ 为/ 弹簧/ 和/ 质点/ ;/ 右图/ 为/ 布料/ 在/ 持续/ 风场/ 作用/ 下/ 的/ 形变/ ,/ 双面/ 光照/ 渲染/ ./ 4.2/ 软体/ 碰撞/ 软体/ 由/ 封闭/ 几何/ 模型/ 的/ 边/ 和/ 顶点/ 通过/ 质点/ 弹簧/ 系统/ 构造/ 而成/ ,/ 内部/ 填充/ 一定/ 数量/ 的/ 理想气体/ ./ 仿真/ 过程/ 中/ ,/ 软体/ 在/ 外力/ (/ 重力/ 、/ 外界/ 交互/ 力/ )/ 作用/ 下/ 下落/ ,/ 当/ 与/ 地面/ 发生/ 碰撞/ 后/ ,/ 软体/ 内部/ 气压/ 发生变化/ ,/ 由/ 气压/ 引起/ 的/ 内壁/ 压力/ 又/ 作用/ 在/ 每个/ 质点/ 上/ ,/ 引起/ 质点/ 新/ 的/ 运动/ ./ 整个/ 运动/ 过程/ 包含/ 简易/ 碰撞检测/ ,/ 且/ 遵循/ 动力学/ 规律/ ,/ 获得/ 了/ 逼真/ 的/ 物理/ 效果/ ,/ 软体/ 实时/ 仿真/ 效果图/ 如图/ 5/ 所示/ ./ 图/ 5/ 中/ 左图/ 显示/ 为/ 形变/ 过程/ 中/ 的/ 软体/ 拓扑/ 结构/ ,/ 线框/ 模型/ 渲染/ 的/ 球面/ 为/ 软体/ 相应/ 质点/ 弹簧/ 模型/ 的/ 弹簧/ 和/ 质点/ ;/ 右图/ 为/ 软体/ 与/ 地面/ 发生/ 碰撞/ 后/ 的/ 挤压/ 效果/ ./ 图中/ 四周/ 为/ 木板/ 材质/ 墙壁/ ,/ 深色/ 球体/ 代表/ 软体/ 下落/ 过程/ 中/ 的/ 障碍物/ ,/ 浅色/ 球体/ 为/ 软体/ 仿真/ 对象/ :/ 球面/ 模型/ 的/ 软体/ ./ 4.3/ 多/ 局部/ 破碎/ 行为/ 当某/ 弹簧/ 处/ 引发/ 破碎/ 行为/ ,/ 以该/ 弹簧/ 某/ 一端/ 点为/ 中心/ 生成/ 虚/ 节点/ ,/ 虚/ 节点/ 分散/ 在/ 与/ 原始/ 中心/ 相邻/ 接/ 的/ 三角/ 面片/ 中/ 进行/ 几何/ 拓扑/ 重构/ ,/ 新增/ 的/ 虚/ 节点/ 离散/ 了/ 质点/ 弹簧/ 模型/ 局部/ 区域/ 弹簧/ 的/ 紧/ 耦合/ 性/ ,/ 形/ Page5/ 成/ 了/ 局部/ 破碎/ ./ 随着/ 虚/ 节点/ 的/ 继续/ 运动/ ,/ 将会/ 在/ 新/ 生成/ 的/ 三角/ 面片/ 之间/ 形成/ 裂缝/ ./ 同时/ ,/ 核心/ 块/ 的/ 分离/ 也/ 形成/ 了/ 较大/ 程度/ 上/ 的/ 破碎/ 效果/ ./ 仿真/ 平台/ 中/ 的/ 多/ 局部/ 破碎/ 效果图/ 如图/ 6/ 所示/ ./ 图/ 6/ 多/ 局部/ 破碎/ 特效/ (/ 左图/ :/ 椭圆/ 标示/ 处/ 发生/ 了/ 局部/ 破碎/ 行为/ ;/ 右图/ :/ 局部/ 破碎/ 引发/ 的/ 软体/ 收缩/ (/ 由/ 内部/ 气压/ 变化/ 引起/ )/ ./ 整个/ 仿真/ 平台/ 采/ 引入/ 光照/ 、/ 双面/ 渲染/ )/ 5/ 总结/ 本文/ 提出/ 了/ 一种/ 软体/ 多/ 局部/ 破碎/ 特效/ 行为/ 描述/ 算法/ ,/ 该/ 算法/ 以/ 引发/ 破碎/ 行为/ 的/ 弹簧/ 、/ 质点/ 为/ 出发点/ ,/ 将/ 虚/ 节点/ 分散/ 在/ 邻接/ 三角/ 面片/ 中/ 进行/ 局部/ 拓扑/ 重构/ ./ 虚/ 节点/ 的/ 增加/ 离散/ 了/ 物理/ 模型/ 局部/ 区域/ 弹簧/ 的/ 紧/ 耦合/ 性/ ,/ 随着/ 仿真/ 过程/ 的/ 推移/ ,/ 逐渐/ 形成/ 了/ 局部/ 裂缝/ 、/ 局部/ 破碎/ 块/ ,/ 较/ 好/ 地/ 模拟/ 了/ 软体/ 仿真/ 中/ 的/ 破碎/ 现象/ ./ 同时/ ,/ 本文/ 基于/ 质点/ 弹簧/ 系统/ 的/ 软体/ 及其/ 破碎/ 仿真/ 平台/ ,/ 在/ 虚拟现实/ 、/ 影视动画/ 制作/ 、/ 虚拟/ 手术/ 等/ 方面/ 有/ 较/ 强/ 应用/ 价值/ ./ 

