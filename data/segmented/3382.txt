Page1/ 基于/ 语义/ 相似/ 度/ 的/ 数据库/ 自/ 适应/ 查询/ 松弛/ 方法/ 孟祥福/ 1/ )/ 严丽/ 2/ )/ 马宗民/ 1/ )/ 张富/ 1/ )/ 王星/ 1/ )/ 1/ )/ (/ 东北大学/ 信息科学/ 与/ 工程学院/ 沈阳/ 110819/ )/ 2/ )/ (/ 东北大学/ 软件/ 学院/ 沈阳/ 110819/ )/ 摘要/ 为了/ 解决/ 数据库/ 空/ 查询/ 结果/ 问题/ ,/ 提出/ 了/ 一种/ 基于/ 语义/ 相似/ 度/ 的/ 数据库/ 自/ 适应/ 查询/ 松弛/ 方法/ ./ 首先/ ,/ 基于/ 初始/ 查询/ 条件/ 和/ 数据分布/ 推测/ 用户/ 对/ 查询/ 指定/ 属性/ 的/ 重视/ 程度/ ,/ 据此/ 提出/ 了/ 一种/ 属性/ 权重/ 评估/ 方法/ ;/ 然后/ ,/ 通过考察/ 属性/ 值/ 的/ 特征/ 信息/ ,/ 分别/ 提出/ 了/ 分/ 类型/ 属性/ 值/ 之间/ 和/ 数值/ 型/ 属性/ 值/ 之间/ 的/ 语义/ 相似/ 度/ 评估/ 方法/ ;/ 在/ 此基础/ 上/ ,/ 根据/ 松弛/ 阈值/ 、/ 属性/ 权重/ 和/ 属性/ 值/ 之间/ 的/ 语义/ 相似/ 度/ ,/ 提出/ 了/ 一种/ 自/ 适应/ 查询/ 松弛/ 重写/ 算法/ ./ 对于/ 满足/ 松弛/ 查询/ 的/ 近似/ 查询/ 结果/ ,/ 按照/ 它们/ 对/ 初始/ 查询/ 的/ 满足/ 度/ 进行/ 排序/ ./ 实验/ 结果表明/ ,/ 提出/ 的/ 属性/ 权重/ 和/ 属性/ 值/ 之间/ 的/ 语义/ 相似/ 度/ 评估/ 方法/ 性能/ 稳定/ ,/ 评估/ 结果/ 合理/ ,/ 提出/ 的/ 查询/ 松弛/ 方法/ 具有/ 较/ 高/ 的/ 查全率/ ,/ 能够/ 较/ 好/ 地/ 满足/ 当前/ 用户/ 的/ 需求/ 和/ 偏好/ ./ 关键词/ Web/ 数据库/ ;/ 查询/ 松弛/ ;/ 属性/ 权重/ ;/ 语义/ 相似/ 度/ ;/ 查询/ 结果/ 排序/ 1/ 引言/ 随着/ WorldWideWeb/ 的/ 不断/ 发展/ ,/ 网络/ 上/ 可/ 访问/ 的/ 在线/ 数据库/ 越来越/ 多/ ./ 随着/ 这些/ 数据库/ 中/ 所/ 蕴含/ 信息量/ 的/ 快速增长/ ,/ 通过/ Web/ 查询/ 接口/ 访问/ 这些/ 数据库/ 已/ 成为/ 人们/ 获取信息/ 的/ 重要/ 手段/ ./ 然而/ ,/ 现有/ 的/ 数据库/ 查询处理/ 模式/ 大都/ 采用/ 结构化/ 查询语言/ 并/ 仅/ 支持/ 严格/ 查询/ 匹配/ ,/ 而/ 实际上/ 用户/ 对/ 数据库/ 的/ 结构/ 和/ 内容/ 并/ 不/ 了解/ ,/ 这种/ 情况/ 下/ ,/ 即使/ 用户/ 使用/ 明确/ 的/ 查询/ 条件/ ,/ 数据库/ 仍/ 有/ 可能/ 返回/ 过少/ 甚至/ 空/ 查询/ 结果/ ,/ 此时/ 大多数/ 普通用户/ 希望/ 系统/ 能够/ 自动/ 放松/ 初始/ 查询/ 来/ 提供/ 近似/ 匹配/ 的/ 查询/ 结果/ ;/ 此外/ ,/ 普通用户/ 的/ 查询/ 意图/ 本身/ 可能/ 就是/ 模糊/ 或/ 不/ 精确/ 的/ ,/ 而/ 现有/ 的/ 数据库/ 查询处理/ 模式/ 又/ 要求/ 用户/ 必须/ 明确/ 地/ 表达/ 查询/ 需求/ ,/ 这种/ 情况/ 下/ ,/ 系统/ 返回/ 的/ 查询/ 结果/ 可能/ 不够/ 全面/ ,/ 此时/ 用户/ 希望/ 系统/ 能够/ 自动/ 为/ 其/ 提供/ 更/ 多/ 与/ 初始/ 查询/ 语义上/ 接近/ 的/ 相关/ 信息/ ./ 鉴于/ 上述/ 两/ 方面/ 需求/ ,/ 解决/ 用户/ 在/ 数据库/ 查询/ 中/ 面临/ 的/ 空/ 查询/ 结果/ 问题/ ,/ 以及/ 为/ 他们/ 提供/ 更/ 多/ 语义上/ 相关/ 的/ 信息/ 就/ 显得/ 尤为重要/ ./ 查询/ 松弛/ 是/ 解决/ 上述/ 问题/ 的/ 关键技术/ ./ 为此/ ,/ 本文/ 将/ 从/ 满足/ 普通用户/ 需求/ 和/ 偏好/ 的/ 角度/ 入手/ ,/ 研究/ 基于/ 语义/ 相似/ 度/ 的/ 数据库/ 自/ 适应/ 查询/ 松弛/ 方法/ ./ 下面/ ,/ 用/ 一个/ 例子/ 描述/ 查询/ 松弛/ 的/ 研究/ 动机/ 和/ 解决/ 方法/ 的/ 基本/ 思想/ ./ 例/ 1/ ./ 考虑/ Yahoo/ !/ Autos/ 网站/ 的/ 二手车/ 销售/ 数据库/ ,/ 它/ 包含/ 一个/ 关系/ 表/ CarDB/ (/ Make/ ,/ Model/ ,/ Price/ ,/ Color/ ,/ Engine/ ,/ Year/ ,/ Mileage/ )/ ,/ 其中/ 每条/ 元组/ 代表/ 一条/ 待售/ 的/ 二手车/ 信息/ ./ 基于/ CarDB/ ,/ 用户/ 可能/ 提出/ 查询/ :/ Q/ ·/ ·/ -/ CarDB/ (/ Model/ =/ Camry/ ∧/ Price/ </ 5000/ )/ ./ 对于/ 该/ 查询/ ,/ 系统/ 返回/ 的/ 查询/ 结果/ 为空/ (/ 在/ CarDB/ 中/ ,/ 虽然/ 存在/ 型号/ 为/ “/ Camry/ ”/ 或/ 价格/ 低于/ $/ 5000/ 的/ 二手车/ ,/ 但/ 却/ 不/ 存在/ 价格/ 低于/ $/ 5000/ 的/ “/ Camry/ ”/ 二手车/ ,/ 即/ 查询/ Q/ 中/ 的/ 两个/ 基本/ 查询/ 条件/ 之间/ 不/ 存在/ 交集/ )/ ./ 这种/ 情况/ 下/ ,/ 为了/ 给/ 用户/ 提供/ 与/ 初始/ 查询/ 相关/ 的/ 信息/ ,/ 需要/ 对/ 初始/ 查询/ Q/ 进行/ 松弛/ 处理/ ./ 现有/ 的/ 查询/ 松弛/ 方法/ 大都/ 以/ 相同/ 的/ 程度/ 放松/ 初始/ 查询/ 中/ 的/ 每/ 一个/ 基本/ 查询/ 条件/ [/ 1/ -/ 4/ ]/ ;/ 而/ 在/ 实际/ 应用/ 中/ ,/ 提出/ 该/ 查询/ 的/ 用户/ 可能/ 更/ 关注/ 二手车/ 的/ 价格/ Price/ (/ 相对/ 型号/ Model/ 而言/ )/ ./ 因为/ 在/ CarDB/ 中/ 很少/ 有/ 价格/ 低于/ $/ 5000/ 的/ 二手车/ ,/ 而/ Model/ 为/ “/ Camry/ ”/ 的/ 二手车/ 却/ 相对/ 较为/ 普遍/ ,/ 所以/ 根据/ 信息检索/ 中/ 的/ IDF/ 思想/ (/ 即/ ,/ 在/ 一个/ 文档/ 集/ 或/ 语料库/ 中/ ,/ 经常出现/ 的/ 关键词/ 要/ 比/ 不/ 经常出现/ 的/ 关键词/ 传达/ 较少/ 的/ 用户/ 需求/ 信息/ ,/ 因此/ 应该/ 被/ 分配/ 较/ 小/ 的/ 权重/ )/ 可/ 推测/ 出该/ 用户/ 更/ 关心/ 二手车/ 的/ 价格/ (/ 即/ Price/ )/ 属性/ ,/ 相应/ 地/ 对/ 指定/ 在/ Price/ 属性/ 上/ 的/ 基本/ 查询/ 条件/ 的/ 放松/ 程度/ 也/ 就/ 应该/ 小于/ 指定/ 在/ Model/ 属性/ 上/ 的/ 基本/ 查询/ 条件/ 的/ 放松/ 程度/ ,/ 这样/ 才能/ 确保/ 松弛/ 后/ 得到/ 的/ 查询/ 结果/ 与/ 用户/ 查询/ 意图/ 和/ 偏好/ 最为/ 相关/ ./ 由此可见/ ,/ 在/ 放松/ 初始/ 查询/ 过程/ 中/ ,/ 应该/ 考虑/ 不同/ 属性/ 对/ 用户/ 的/ 重要性/ ,/ 越/ 重要/ 的/ 属性/ ,/ 对/ 指定/ 在/ 其/ 上/ 的/ 基本/ 查询/ 条件/ 的/ 放松/ 程度/ 就/ 应该/ 越小/ ./ 此外/ ,/ 对于/ 查询/ 松弛/ 后/ 得到/ 的/ 查询/ 结果/ ,/ 还/ 需/ 按照/ 它们/ 对/ 初始/ 查询/ 的/ 满足/ 程度/ 进行/ 排序/ ./ 为了/ 处理/ 数据库/ 空/ 查询/ 结果/ 问题/ ,/ 本文/ 在/ 我们/ 以前/ 研究/ 工作/ [/ 5/ ]/ 的/ 基础/ 上/ ,/ 提出/ 一种/ 基于/ 语义/ 相似/ 度/ 的/ 自/ 适应/ 查询/ 松弛/ 和/ 结果/ 排序/ 方法/ —/ —/ —/ QRRR/ (/ QueryRelaxation/ &/ ResultsRanking/ )/ ,/ 该/ 方法/ 不/ 依赖于/ 任何/ 特定/ 领域/ 和/ 用户/ ,/ 它/ 能够/ 自/ 适应/ 地/ 放松/ 初始/ 查询/ 要求/ ,/ 并/ 对/ 查询/ 松弛/ 后/ 得到/ 的/ 近似/ 查询/ 结果/ 进行/ 自动/ 排序/ ./ 本文/ 第/ 2/ 节/ 介绍/ 相关/ 研究/ 工作/ ;/ 第/ 3/ 节/ 给出/ 查询/ 松弛/ 基本/ 思想/ 和/ 定义/ ;/ 第/ 4/ 节/ 提出/ 属性/ 权重/ 评估/ 方法/ ;/ 第/ 5/ 节/ 提出/ 属性/ 值/ 之间/ 的/ 语义/ 相似/ 度/ 评估/ 方法/ ;/ 第/ 6/ 节/ 给出/ 查询/ 松弛/ 重写/ 算法/ 和/ 近似/ 查询/ 结果/ 排序/ 方法/ ;/ 第/ 7/ 节/ 验证/ 所提/ 方法/ 的/ 效果/ 和/ 性能/ ;/ 最后/ 是/ 总结/ 与/ 展望/ ./ 2/ 相关/ 工作/ 查询/ 松弛/ 是/ 指/ 在/ 初始/ 查询/ 上/ 去掉/ 或/ 放松/ 某个/ (/ 些/ )/ 基本/ 查询/ 条件/ 而/ 得到/ 一个/ 涵盖/ 范围/ 更/ 宽泛/ 的/ 查询/ 的/ 处理过程/ ./ 最早/ 利用/ 查询/ 松弛/ 思想/ 解决/ 数据库/ 空/ 查询/ 结果/ (/ 或/ 查询/ 失败/ )/ 问题/ 的/ 研究/ 工作/ ,/ 是/ 由/ Kaplan/ 在/ 1982/ 年/ 提出/ 的/ CO/ -/ OP/ 系统/ [/ 6/ ]/ ./ CO/ -/ OP/ 的/ 基本/ 思想/ 是/ 通过/ 识别/ 并/ 去除/ 失败/ 查询/ (/ failedquery/ )/ 中/ 的/ 错误/ 假设/ 来/ 避免/ 空/ 查询/ 结果/ 问题/ ./ 例如/ ,/ 考虑/ 一个/ 查询/ “/ 查找/ 在/ Microsoft/ 公司/ 月薪/ 少于/ $/ 15k/ 并且/ 在/ R/ &/ D/ 部门/ 工作/ 的/ 所有/ 员工/ ”/ ,/ 该/ 查询/ 的/ 结果/ 为空/ ./ 导致/ 该/ 查询/ 失败/ 的/ 原因/ 有/ 两种/ 可能/ 情况/ :/ 一种/ 是/ Microsoft/ 公司/ 的/ R/ &/ D/ 部门/ 没有/ 任何/ 员工/ 月薪/ 低于/ $/ 15k/ ;/ 另/ 一种/ 是/ Microsoft/ 公司/ 根本/ 不/ 存在/ R/ &/ D/ 部门/ ./ 前/ 一种/ 是/ 由于/ 基本/ 查询/ 条件/ 之间/ 存在/ 矛盾/ 而/ 导致/ 的/ 空/ 查询/ 结果/ ,/ 而后/ 一种/ 是/ 由于/ 错误/ 假设/ (/ 假设/ Microsoft/ 公司/ 存在/ R/ &/ D/ 部门/ )/ 而/ 导致/ 的/ 空/ 查询/ 结果/ ./ CO/ -/ OP/ 方法/ 侧重于/ 找出/ 初始/ 查询/ 中/ Page3/ 存在/ 的/ 错误/ 假设/ ,/ 它/ 把/ 初始/ 查询/ 转换成/ 一个/ 图形化/ 的/ 查询/ 并用/ 连通/ 子图/ 代表/ 查询/ 中/ 的/ 假设/ ./ 基于/ CO/ -/ OP/ 思想/ ,/ Motro/ 在/ 1990/ 年/ 提出/ 了/ FLEX/ 系统/ [/ 7/ ]/ ./ FLEX/ 系统/ 通过/ 在/ 失败/ 查询/ 上/ 生成/ 一个/ 更为/ 宽泛/ 的/ 查询/ 集合/ 使/ 系统/ 能够/ 判断/ 查询/ 失败/ 原因/ 属于/ 哪/ 一种/ 情况/ :/ 如果/ 是/ 上述/ 第一种/ 情况/ ,/ 它/ 将/ 提供/ 一个/ 与/ 初始/ 查询/ 相似/ 的/ 、/ 非/ 失败/ 的/ 查询/ (/ non/ -/ failingquery/ )/ ;/ 如果/ 是/ 上述/ 第二种/ 情况/ ,/ 它/ 将/ 识别/ 并/ 消除/ 用户/ 查询/ 中/ 的/ 错误/ 假设/ ,/ 即该/ 系统/ 以/ 迭代/ 方式/ 逐步/ 去除/ 初始/ 查询/ 上/ 的/ 基本/ 查询/ 条件/ 从而/ 实现/ 对/ 失败/ 查询/ 的/ 高度/ 容错/ ./ 然而/ ,/ CO/ -/ OP/ 和/ FLEX/ 系统/ 在/ 识别/ 一个/ 假设/ 时/ 通常/ 需要/ 在/ 整个/ 数据库/ 上/ 执行/ 大量/ 查询/ ,/ 而且/ 需要/ 计算/ 和/ 测试/ 的/ 假设/ 数量/ 很多/ ,/ 计算/ 代价/ 太高/ 是/ 它们/ 的/ 严重不足/ ./ 为了/ 确保/ 运行/ 时间/ 可/ 接受/ ,/ Motro/ 提出/ 了/ 限制/ 搜索/ 的/ 启发式/ 方法/ [/ 8/ ]/ ./ Gaasterland/ 随后/ 又/ 提出/ 了/ 一个/ 相关/ 的/ 方法/ [/ 9/ ]/ ,/ 该/ 方法/ 利用/ 基于/ 语义/ 查询/ 优化/ 技术/ 的/ 启发式/ 方法/ 控制/ 查询/ 松弛/ 处理/ 的/ 规模/ ./ Godfrey/ 于/ 1997/ 年/ 在/ 理论/ 上/ 证明/ 了/ 该类/ 算法/ 能/ 在/ 多项式/ 时间/ 内/ 找到/ 一个/ 最大/ 成功/ 的/ 子/ 查询/ ,/ 但是/ 找到/ 所有/ 或/ 部分/ 最小/ 失败/ 和/ 最大/ 成功/ 子/ 查询/ 集合/ 的/ 计算/ 复杂度/ 却是/ NP/ -/ hard/ 问题/ [/ 10/ ]/ ./ 随着/ 数据库/ 在/ Web/ 中/ 的/ 大规模/ 应用/ ,/ 基于/ Web/ 应用/ 的/ 数据库/ 查询/ 松弛/ 技术/ 近年来/ 受到/ 了/ 研究者/ 的/ 关注/ ./ Muslea/ 于/ 2004/ 年/ 提出/ 了/ 一种/ 基于/ 决策树/ 算法/ 的/ Web/ 数据库/ 查询/ 松弛/ 方法/ —/ —/ —/ LOQR/ [/ 11/ ]/ ./ 该/ 方法/ 分成/ 两个/ 处理/ 阶段/ :/ 第/ 1/ 阶段/ ,/ LOQR/ 利用/ C4/ ./ 5/ 算法/ 在/ 一个/ 小型/ 的/ 、/ 随机/ 选取/ 的/ 原始数据/ 子集/ 上/ 进行/ 机器/ 学习/ ,/ 从中/ 提取/ 出/ 领域/ 知识/ 进而/ 得到/ 决策/ 规则/ 集合/ ,/ 这些/ 规则/ 体现/ 了/ 一个/ 属性/ 值/ 能否/ 满足/ 失败/ 查询/ 中/ 的/ 某个/ 基本/ 查询/ 条件/ ;/ 第/ 2/ 阶段/ ,/ LOQR/ 使用/ 最近/ 邻/ 技术/ 找到/ 与/ 失败/ 查询/ 最为/ 相似/ 的/ 规则/ ,/ 然后/ 使用/ 该/ 规则/ 中/ 的/ 属性/ 值/ 修改/ 失败/ 查询/ ./ 然而/ ,/ 当/ 训练/ 数据/ 集/ 很小/ 的/ 情况/ 下/ ,/ LOQR/ 方法/ 的/ 学习效果/ 并/ 不/ 理想/ ./ 为此/ ,/ Muslea/ 等/ 人于/ 2005/ 年/ 又/ 提出/ 了/ 一种/ 基于/ 贝叶斯/ 网络/ 的/ 查询/ 松弛/ 方法/ —/ —/ —/ TOQR/ [/ 4/ ]/ ./ 该/ 方法/ 与/ LOQR/ 类似/ 但/ 弥补/ 了/ LOQR/ 的/ 缺点/ ,/ 它/ 能够/ 在/ 很小/ 的/ 训练样本/ 上/ 产生/ 与/ 失败/ 查询/ 非常/ 类似/ 的/ 松弛/ 查询/ ./ 但/ 应当/ 指出/ 的/ 是/ ,/ LOQR/ 和/ TOQR/ 方法/ 对于/ 每/ 一个/ 到来/ 的/ 查询/ ,/ 都/ 需要/ 在/ 每/ 一个/ 数据/ 样本/ 上/ 执行/ 非常复杂/ 的/ 数据挖掘/ 算法/ ,/ 因此/ 计算/ 代价/ 较/ 高/ ./ 2006/ 年/ ,/ Nambiar/ 等/ 人/ 在/ 自己/ 研究/ 工作/ [/ 12/ ]/ 的/ 基础/ 上/ ,/ 提出/ 了/ 一种/ Web/ 数据库/ 不/ 精确/ 查询/ 回答/ 方法/ —/ —/ —/ AIMQ/ [/ 13/ ]/ ./ 在/ 预处理/ 阶段/ ,/ AIMQ/ 从/ Web/ 数据库/ 中/ 随机/ 抓取/ 一小部分/ 样本/ 数据/ 集/ ,/ 在/ 该/ 数据/ 集上/ 利用/ TAN/ 算法/ 获取/ 近似/ 函数/ 依赖/ 和/ 近似/ 关键字/ ,/ 据此/ 评估/ 关系/ 中/ 每个/ 属性/ 的/ 重要/ 程度/ ;/ 在/ 查询处理/ 阶段/ ,/ AIMQ/ 先/ 将/ 最初/ 的/ 不/ 精确/ 查询/ 紧缩/ 成/ 一个/ 精确/ 查询/ ,/ 然后/ 把/ 数据库/ 中/ 满足/ 该/ 精确/ 查询/ 的/ 每条/ 元组/ 都/ 作为/ 一个/ 查询/ ,/ 再/ 根据/ 属性/ 重要/ 程度/ 依次/ 去除/ 这些/ 查询/ 上/ 的/ 基本/ 查询/ 条件/ ,/ 最后/ 在/ 数据库/ 上/ 执行/ 这些/ 松弛/ 查询/ 获得/ 相关/ 查询/ 结果/ ./ 然而/ 该/ 方法/ 的/ 不足之处/ 在于/ ,/ 它们/ 利用/ 近似/ 函数/ 依赖/ 和/ 近似/ 关键字/ 在/ 预/ 提取/ 的/ 数据/ 集上/ 获取/ 的/ 属性/ 权重/ 是/ 固定/ 不变/ 的/ ,/ 不能/ 随着/ 用户/ 偏好/ 和/ 查询/ 要求/ 的/ 变化/ 而/ 变化/ ./ 实际上/ ,/ 不同/ 用户/ 对/ 同一/ 属性/ 的/ 重视/ 程度/ 是/ 不同/ 的/ ,/ 而且/ 同一/ 用户/ 在/ 不同/ 的/ 查询/ 上下文/ 条件/ 下/ ,/ 对/ 同一/ 属性/ 的/ 重视/ 程度/ 也/ 是/ 不同/ 的/ ./ 因此/ ,/ 利用/ 该类/ 方法/ 得到/ 的/ 查询/ 结果/ 也/ 就/ 不能/ 很/ 好/ 地/ 满足/ 当前/ 用户/ 的/ 需求/ 和/ 偏好/ ./ 此外/ ,/ 当/ 初始/ 查询/ 结果/ 为/ 空时/ ,/ 由于/ 没有/ 结果/ 元组/ 作为/ 查询/ 松弛/ 的/ 对象/ ,/ 因而/ AIMQ/ 方法/ 将会/ 失效/ ./ 通过/ 对/ 上述/ 数据库/ 查询/ 松弛/ 方法/ 研究/ 现状/ 的/ 分析/ 可以/ 发现/ ,/ 查询/ 松弛/ 方法/ 主要/ 是/ 通过/ 消除/ 查询/ 中/ 的/ 错误/ 假设/ 或/ 不/ 重要/ 属性/ 上/ 的/ 基本/ 查询/ 条件/ 来/ 避免/ 空/ 查询/ 结果/ 问题/ ./ 但/ 应当/ 指出/ 的/ 是/ ,/ 上述/ 方法/ 在/ 查询/ 松弛/ 处理过程/ 中/ ,/ 很少/ 考虑/ 由/ 基本/ 查询/ 条件/ 之间/ 彼此/ 存在/ 矛盾/ 而/ 导致/ 的/ 空/ 查询/ 结果/ 问题/ ,/ 更/ 很少/ 考虑/ 当前/ 用户/ 的/ 偏好/ ,/ 而/ 实际上/ 用户/ 偏好/ 在/ 很大/ 程度/ 上/ 影响/ 到/ 查询/ 松弛/ 的/ 效果/ ./ 当前/ ,/ 充分体现/ 用户/ 偏好/ 的/ 查询/ 松弛/ 方法/ 研究/ 在/ 国际/ 上/ 基本上/ 还是/ 空白/ ./ 3/ 查询/ 松弛/ 基本/ 思想/ 和/ 定义/ 3.1/ 查询/ 松弛/ 基本/ 思想/ 本文/ 所提/ 查询/ 松弛/ 方法/ 的/ 基本/ 思想/ 是/ ,/ 对于/ 一个/ 给定/ 查询/ Q/ ,/ 通过/ 放松/ Q/ 上/ 的/ 限制/ 而/ 生成/ 一个/ 松弛/ 查询/ 珟/ Q/ ./ 首先/ ,/ 评估/ 初始/ 查询/ Q/ 指定/ 属性/ 的/ 权重/ ;/ 然后/ ,/ 根据/ 属性/ 权重/ 和/ 初始/ 查询/ 的/ 松弛/ 阈值/ ,/ 计算/ 对应/ 每个/ 基本/ 查询/ 条件/ 的/ 子/ 松弛/ 阈值/ ,/ 越/ 不/ 重要/ 属性/ 上/ 的/ 基本/ 查询/ 条件/ 的/ 子/ 松弛/ 阈值/ 越低/ (/ 即/ ,/ 该/ 基本/ 查询/ 条件/ 的/ 放松/ 程度/ 越大/ )/ ;/ 进而/ ,/ 根据/ 属性/ 值/ 之间/ 的/ 语义/ 相似/ 度/ 和/ 每个/ 基本/ 查询/ 条件/ 的/ 子/ 松弛/ 阈值/ ,/ 把/ 相似/ 度/ 高于/ 子/ 松弛/ 阈值/ 的/ 属性/ 值/ 添加/ 到/ 每个/ 基本/ 查询/ 条件/ 所/ 指定/ 的/ 查询/ 范围/ 中/ ;/ 最后/ ,/ 通过/ 查询/ 重写/ 实现/ 对/ 基本/ 查询/ 条件/ 的/ 松弛/ 处理/ ,/ 合取/ 所有/ 的/ 松弛/ 基本/ 查询/ 条件/ 最终/ 形成/ 松弛/ 查询/ 珟/ Q/ ./ 基于/ 信息检索/ 中/ 的/ IDF/ 思想/ ,/ 属性/ 权重/ 评估/ 的/ 直觉/ 是/ ,/ 对于/ 查询/ Q/ 中/ 的/ 每/ 一个/ 基本/ 查询/ 条件/ ,/ 如果/ 数据库/ 表中/ 存在/ 很多/ 能/ 满足/ 该/ 条件/ 的/ 元组/ ,/ 则/ 说明/ 该/ 条件/ 的/ 选择性/ 弱/ ,/ Page4/ 那么/ 对于/ 用户/ 来说/ ,/ 该/ 条件/ 所/ 对应/ 属性/ 的/ 重要/ 程度/ 就/ 低/ ;/ 反之/ ,/ 如果/ 数据库/ 表中/ 只有/ 很少/ 能/ 满足/ 该/ 条件/ 的/ 元组/ ,/ 则/ 说明/ 该/ 条件/ 的/ 选择性/ 强/ ,/ 那么/ 对于/ 用户/ 来说/ ,/ 该/ 条件/ 所/ 对应/ 属性/ 的/ 重要/ 程度/ 就/ 高/ ./ 3.2/ 查询/ 松弛/ 定义/ 定义/ 1/ (/ 查询/ 松弛/ )/ ./ 令/ R/ 为/ 数据库/ 中/ 一个/ 包含/ n/ 条/ 元组/ {/ t1/ ,/ …/ ,/ tn/ }/ 的/ 关系/ ,/ 其/ 模式/ 由/ m/ 个分/ 类型/ 和/ 数值/ 型/ 相/ 混合/ 的/ 属性/ A/ =/ {/ A1/ ,/ A2/ ,/ …/ ,/ Am/ }/ 构成/ ,/ Q/ 为/ R/ 上/ 的/ 一个/ 合取/ 查询/ ,/ 形式/ 为/ Q/ =/ σ/ ∧/ i/ ∈/ {/ 1/ ,/ …/ ,/ k/ }/ Ci/ ,/ 其中/ 2/ / k/ / m/ ,/ Ci/ 的/ 形式/ 为/ Ai/ θ/ ai/ ,/ θ/ ∈/ {/ >/ ,/ </ ,/ =/ ,/ / ,/ / ,/ between/ }/ ,/ 如果/ θ/ 是/ 操作符/ between/ ,/ 则/ ai/ 用/ 区间/ [/ ai1/ ,/ ai2/ ]/ 表示/ 且/ Ai/ θ/ ai/ 的/ 形式/ 为/ “/ Aibetweenai1andai2/ ”/ ./ 基本/ 查询/ 条件/ “/ Ai/ θ/ ai/ ”/ 中/ 的/ 每个/ 属性/ Ai/ 都/ 是/ 属性/ 集/ A/ 中/ 的/ 属性/ ,/ ai/ 包含/ 于/ 属性/ Ai/ 的/ 值域/ 当中/ ./ 通过/ 放松/ 初始/ 查询/ Q/ ,/ 可/ 形成/ 一个/ 相对/ 于/ 初始/ 查询/ Q/ 的/ 松弛/ 查询/ 珟/ Q/ ./ 通过/ 在/ R/ 上/ 执行/ 珟/ Q/ ,/ 使得/ 查询/ 结果/ 中/ 的/ 任一/ 元组/ 对/ 初始/ 查询/ Q/ 的/ 满足/ 程度/ 都/ 高于/ 指定/ 的/ 松弛/ 阈值/ Tsim/ ∈/ (/ 0/ ,/ 1/ ]/ ,/ 表示/ 为/ 珟/ Q/ (/ R/ )/ =/ {/ t/ |/ t/ ∈/ R/ ,/ Satisfaction/ (/ t/ ,/ Q/ )/ >/ Tsim/ }/ (/ 1/ )/ 其中/ ,/ 珟/ Q/ (/ R/ )/ 是/ R/ 中/ 满足/ 松弛/ 查询/ 珟/ Q/ 的/ 查询/ 结果/ 集/ ,/ Tsim/ 由/ 系统/ 或/ 用户/ 给定/ ./ 4/ 属性/ 权重/ 分配/ 不同/ 用户/ 具有/ 不同/ 的/ 偏好/ ,/ 对/ 不同/ 用户/ 来说/ 属性/ 权重/ 也/ 就/ 不尽相同/ ./ 基于/ 引言/ 所述/ 的/ 属性/ 权重/ 评估/ 直觉/ ,/ 下面/ 将/ 根据/ 用户/ 查询/ 中/ 指定/ 的/ 属性/ 值/ 在/ 数据库/ 中/ 的/ 分布/ 情况/ 来/ 分配/ 查询/ 指定/ 属性/ 的/ 权重/ ./ 4.1/ 分/ 类型/ 属性/ 权重/ 评估/ IDF/ (/ InverseDocumentFrequency/ ,/ 逆/ 文档/ 频率/ )/ 是/ 信息检索/ 中/ 一种/ 常用/ 的/ 关键词/ (/ Keyword/ )/ 权重/ 评估/ 技术/ [/ 14/ ]/ ./ 它/ 利用/ 统计/ 方法/ 评估/ 一个/ 关键词/ 在/ 整个/ 文档/ 集/ (/ 或/ 语料库/ )/ 中/ 的/ 重要性/ ,/ 关键词/ 的/ 重要性/ 随着/ 它/ 在/ 文档/ 集中/ 出现/ 的/ 频率/ 成反比/ 下降/ ./ IDF/ 的/ 主要/ 思想/ 是/ :/ 在/ 一个/ 文档/ 集/ 或/ 语料库/ 中/ ,/ 经常出现/ 的/ 关键词/ 要/ 比/ 不/ 经常出现/ 的/ 关键词/ 传达/ 较少/ 的/ 用户/ 需求/ 信息/ ,/ 因此/ 应该/ 被/ 分配/ 较/ 小/ 的/ 权重/ ./ 它/ 的/ 公式/ 定义/ 为/ log/ (/ n/ // F/ (/ w/ )/ )/ ,/ 其中/ n/ 是/ 语料库/ 中/ 的/ 文档/ 总数/ ,/ F/ (/ w/ )/ 是/ n/ 个/ 文档/ 中/ 包含/ 关键词/ w/ 的/ 文档/ 个数/ ./ 如果/ 关系/ R/ 中仅/ 包含/ 分/ 类型/ 属性/ ,/ 则/ 每条/ 元组/ 可/ 看作/ 是/ 一个/ 文档/ ,/ R/ 中/ 每/ 一个/ 不同/ 的/ 〈/ 属性/ ,/ 值/ 〉/ 都/ 作为/ 一个/ 关键词/ ,/ 因此/ 可/ 使用/ IDF/ 方法/ 量化/ 对应/ 分/ 类型/ 属性/ Ai/ 的/ 属性/ 值/ v/ 在/ R/ 中/ 的/ 权重/ ./ 根据上述/ IDF/ 思想/ ,/ 属性/ 值/ v/ 的/ IDF/ 权重/ 定义/ 为/ 其中/ ,/ n/ 代表/ R/ 中/ 的/ 元组/ 数/ ,/ Fi/ (/ v/ )/ 代表/ R/ 中/ 满足条件/ “/ Ai/ =/ v/ ”/ 的/ 元组/ 数/ ./ 一个/ 〈/ 属性/ ,/ 值/ 〉/ 可/ 看成/ 是/ 一个/ 等值/ 查询/ 条件/ “/ Ai/ =/ v/ ”/ ,/ 即/ 属性/ 值/ v/ 是/ 用户/ 指定/ 在/ 分/ 类型/ 属性/ Ai/ 上/ 的/ 查询/ 值/ ,/ 因此/ 可/ 把/ 式/ (/ 2/ )/ 所示/ 的/ 属性/ 值/ v/ 的/ IDF/ 权重/ 作为/ 其/ 对应/ 属性/ Ai/ 的/ 权重/ ,/ 它/ 体现/ 了/ 用户/ 对/ 该/ 属性/ 的/ 重视/ 程度/ ./ 值得注意/ 的/ 是/ ,/ 如果/ R/ 中/ 不/ 存在/ 满足/ 查询/ 条件/ “/ Ai/ =/ v/ ”/ 的/ 元组/ (/ 即/ Fi/ (/ v/ )/ =/ 0/ )/ ,/ 则/ 说明/ 该/ 查询/ 条件/ 是/ 错误/ 假设/ ,/ 那么/ 消除/ 该/ 查询/ 条件/ ./ 4.2/ 数值/ 型/ 属性/ 权重/ 评估/ 对于/ 数值/ 型/ 属性/ 值/ 的/ 权重/ 评估/ ,/ 不能/ 直接/ 应用/ IDF/ 方法/ ,/ 因为/ 数值/ 型/ 数据/ 具有/ 一定/ 的/ 连续性/ ,/ 如/ “/ 29999/ ”/ 与/ “/ 30000/ ”/ 在/ 数值/ 上/ 是/ 接近/ 的/ ,/ 然而/ 却/ 被/ 认为/ 是/ 两个/ 截然不同/ 的/ 文本/ 值/ ,/ 从而/ 产生/ 了/ 不合理/ 的/ 出现/ 频率/ 统计/ ./ 因此/ 需要/ 改进/ IDF/ 方法/ ,/ 使/ 其/ 能够/ 适用/ 于/ 数值/ 型/ 属性/ 值/ 的/ 权重/ 评估/ ./ 这里/ ,/ 借鉴/ 了/ KernelDensityEstimation/ 技术/ [/ 15/ ]/ ./ 令/ {/ v1/ ,/ v2/ ,/ …/ ,/ vn/ }/ 为/ 数据库/ 表中/ 属性/ A/ 的/ 所有/ 取值/ 集合/ ,/ 对于/ 查询/ 中/ 指定/ 的/ 数值/ v/ ,/ IDF/ (/ v/ )/ 定义/ 为/ 其中/ ,/ h/ =/ 1.06/ σ/ n/ -/ 1/ // 5/ (/ 在/ 实际/ 应用/ 中/ ,/ 属性/ 值域/ 中/ 的/ 值/ 通常/ 服从/ 正态分布/ )/ ,/ σ/ 是/ 关系/ R/ 中该/ 属性/ 上/ 所有/ 值/ 的/ 标准差/ ,/ n/ 为/ R/ 中/ 的/ 元组/ 总数/ ,/ vj/ 代表/ R/ 中/ 属性/ Ai/ 值域/ 上/ 的/ 一个/ 属性/ 值/ ./ 式/ (/ 3/ )/ 中/ 的/ 分母/ 代表/ 了/ 对于/ 值/ v/ 的/ “/ 出现/ 频率/ ”/ 概念/ 在/ 数值/ 方面/ 的/ 扩展/ ,/ 即/ 对于/ 值/ v/ 的/ “/ 贡献/ ”/ 之/ 和/ 来自/ 于/ 关系/ R/ 中该/ 属性/ 上/ 所有/ 其他/ 的/ 属性/ 值/ vj/ ./ 这些/ “/ 贡献/ ”/ 服从/ 高斯分布/ ,/ 所以/ vj/ 与/ v/ 的/ 差距/ 越大/ ,/ 来自/ vj/ 对/ v/ 的/ 贡献/ 就/ 越/ 小/ ./ 从式/ (/ 3/ )/ 可以/ 看出/ ,/ 如果/ 关系/ R/ 中/ 在/ 数值/ 型/ 属性/ Ai/ 上/ 的/ 每个/ 属性/ 值/ 都/ 与/ v/ 相差/ 很多/ ,/ 则/ 说明/ v/ 处/ 的/ 数据分布/ 稀疏/ ,/ 那么/ IDF/ (/ v/ )/ 就/ 较大/ ,/ 因此/ 值/ v/ 也/ 就/ 比较/ 重要/ ;/ 如果/ 关系/ R/ 中/ 在/ 数值/ 型/ 属性/ Ai/ 上/ 的/ 每个/ 属性/ 值/ 都/ 与/ v/ 比较/ 接近/ ,/ 则/ 说明/ v/ 处/ 的/ 数据分布/ 比较/ 稠密/ ,/ 那么/ IDF/ (/ v/ )/ 就/ 较/ 小/ ,/ 因此/ 值/ v/ 的/ 重要性/ 也/ 就/ 较/ 低/ ./ 很/ 明显/ ,/ 这/ 与/ 传统/ 的/ IDF/ 思想/ 是/ 一致/ 的/ ./ 同理/ ,/ 把/ 式/ (/ 3/ )/ 所示/ 的/ 属性/ 值/ v/ 的/ IDF/ 权重/ 作为/ 其/ 对应/ 属性/ Ai/ 的/ 权重/ ./ 注意/ ,/ 如果/ R/ 中/ 没有/ 任何/ 元组/ 满足/ 查询/ 条件/ “/ Ai/ =/ v/ ”/ ,/ 则/ 说明/ 该/ 查询/ 条件/ 是/ 错误/ 假设/ ,/ 那么/ 消除/ 该/ 查询/ 条件/ ./ 此外/ ,/ 如果/ 查询/ 条件/ 的/ 形式/ 为/ 范围/ 查询/ 条件/ Page5/ “/ AiINVi/ ”/ ,/ 其中/ ,/ Vi/ 是/ 多个/ 分/ 类型/ 值/ 的/ 集合/ (/ 如果/ Ai/ 是/ 分/ 类型/ 属性/ )/ ,/ 或者/ 是/ 一个/ 数值/ 区间/ [/ vmin/ ,/ vmax/ ]/ (/ 如果/ Ai/ 是/ 数值/ 型/ 属性/ )/ ,/ 那么/ IDF/ (/ Vi/ )/ 定义/ 为/ Vi/ 中/ 的/ 值/ 所/ 对应/ 的/ IDF/ 权重/ 中/ 的/ 最大值/ ,/ 即/ 在/ 实际/ 应用/ 中/ ,/ 一个/ 查询/ 通常/ 会/ 同时/ 在/ 多个/ 属性/ 上/ 指定/ 基本/ 查询/ 条件/ ,/ 因此/ 需要/ 对/ 多个/ 指定/ 属性/ 的/ 权重/ 进行/ 规一化/ 处理/ ./ 具体方法/ 是/ ,/ 用/ 每个/ 指定/ 属性/ 的/ IDF/ 权重/ 除以/ 所有/ 指定/ 属性/ 的/ IDF/ 权重/ 之/ 和/ ,/ 即/ 属性/ Ai/ 的/ 权重/ wi/ 可由/ 下式/ 计算/ :/ 其中/ ,/ k/ 代表/ 查询/ 指定/ 的/ 属性/ 个数/ ,/ IDFi/ (/ v/ )/ 代表/ 属性/ Ai/ 的/ IDF/ 权重/ ./ 至此/ ,/ 利用/ 上述/ 方法/ ,/ 可/ 根据/ 用户/ 查询/ 中/ 指定/ 的/ 值/ 在/ 数据库/ 表中/ 的/ 分布/ 情况/ ,/ 自/ 适应/ 地/ 评估/ 查询/ 指定/ 属性/ 的/ 权重/ ./ 为了/ 加快/ 在线/ 查询处理/ 速度/ ,/ 可/ 在/ 预处理/ 阶段/ 计算/ 出/ 所有/ 不同/ 分/ 类型/ 值/ 的/ IDF/ 权重/ ,/ 并/ 将/ 其/ 存储/ 在/ 属性/ 值/ IDF/ 权重/ 表中/ ,/ 结构/ 为/ (/ AttName/ -/ 属性/ ,/ AttVal/ -/ 属性/ 值/ ,/ vIDFWeight/ -/ IDF/ 权重/ )/ ,/ 在/ AttName/ 和/ AttVal/ 上/ 建立/ 索引/ 以便/ 于/ 检索/ ./ 对于/ 数值/ 型/ 属性/ ,/ 由于/ 不同/ 的/ 数值/ 型值/ 很多/ 且/ 具有/ 连续性/ ,/ 因此/ 不能/ 预计/ 算/ 所有/ 数值/ 型值/ 的/ IDF/ 权重/ ./ 对此/ ,/ 本文/ 采用/ 了/ 两种/ 优化/ 策略/ ,/ 一是/ 在/ 预处理/ 阶段/ 计算/ 出/ 查询/ 历史/ 中/ 经常/ 指定/ 的/ 数值/ 型值/ (/ 或/ 数值/ 区间/ )/ 的/ IDF/ 权重/ ,/ 将/ 它们/ 存放/ 在/ 属性/ 值/ IDF/ 权重/ 表中/ ;/ 二是/ 通过/ 直方图/ 划分/ 技术/ ,/ 将/ 数值/ 上/ 相/ 接近/ 的/ 数值/ 划分/ 到/ 一个/ 区间/ 并用/ 一个/ IDF/ 权重/ 表示/ ,/ 这样/ 当/ 查询/ 指定/ 的/ 值落/ 在/ 该/ 区间/ 时/ ,/ 就/ 可用/ 该/ 区间/ 的/ IDF/ 权重/ 替代/ 当前/ 查询/ 值/ 的/ IDF/ 权重/ ,/ 从而/ 减少/ 在线/ 查询处理/ 时间/ ./ 4.3/ 实例/ 分析/ 下面/ 用/ 例子/ 分析属性/ 权重/ 分配/ 方法/ 的/ 合理性/ ./ 表/ 1/ 给出/ 了/ CarDB/ 上/ 对应/ 于/ 不同/ 查询/ 条件/ 下/ 的/ 属性/ 权重/ 分配/ 结果/ ./ 考虑/ 查询/ :/ Q/ ·/ ·/ -/ CarDB/ (/ Price/ </ 5000/ ∧/ Model/ =/ 该/ 查询/ 隐含/ 的/ 意思/ 是/ 购买者/ 关注/ 价格/ 较/ 便宜/ 且/ 较/ 新/ 的/ 二手车/ ,/ 正如/ 所/ 愿/ ,/ 算法/ 为/ 属性/ Price/ 和/ Year/ 分配/ 了/ 较大/ 权重/ (/ 在/ CarDB/ 中/ ,/ Model/ 为/ “/ Camry/ ”/ 的/ 二手车/ 比较/ 常见/ ,/ 而/ Price/ 低于/ $/ 5000/ 的/ 二手车/ 却/ 很少/ ,/ 并且/ 出厂日期/ 为/ “/ 2009/ ”/ 年/ 的/ 也/ 相对/ 较/ 少/ )/ ,/ 属性/ Model/ 被/ 分配/ 了/ 较/ 小/ 的/ 权重/ ./ 相反/ ,/ 考虑/ 查询/ :/ Q/ ·/ ·/ -/ CarDB/ (/ Model/ =/ BMW330/ ∧/ Pricebetween/ 由于/ 12k/ ~/ 15k/ 是/ 一个/ 常见/ 的/ 价格/ 区间/ 并且/ 在/ CarDB/ 中有/ 大多数/ 二手车/ 的/ 价格/ 在/ 该/ 范围/ 内/ ,/ 这/ 说明/ 购买者/ 具有/ 一定/ 的/ 购买/ 能力/ ,/ 而/ CarDB/ 中/ Model/ 为/ “/ BMW330/ ”/ 的/ 二手车/ 却/ 不/ 常见/ ,/ 因此/ 与/ 基本/ 查询/ 条件/ “/ Pricebetween13kand15k/ ”/ 相比/ ,/ 基本/ 查询/ 条件/ “/ Model/ =/ BMW330/ ”/ 的/ 选择性/ 更强/ ./ 由此/ 可以/ 推测/ ,/ 购买者/ 实际上/ 更多地/ 关注/ 二手车/ 的/ Model/ 属性/ ,/ 从表中/ 可以/ 看出/ ,/ 属性/ Model/ 被/ 分配/ 了/ 较大/ 权重/ ,/ 而/ 属性/ Price/ 将/ 不再/ 分配/ 较大/ 权重/ ./ PriceModelYear5/ 属性/ 值间/ 的/ 语义/ 相似/ 度/ 评估/ 本/ 节/ 分别/ 提出/ 分/ 类型/ 值/ 之间/ 和/ 数值/ 型值/ 之间/ 的/ 语义/ 相似/ 度/ 评估/ 方法/ ,/ 属性/ 值/ 之间/ 的/ 语义/ 相似/ 度为/ 查询/ 松弛/ 重写/ 提供/ 了/ 知识/ 支持/ ./ 5.1/ 分/ 类型/ 值间/ 的/ 语义/ 相似/ 度/ 对于/ 一个/ 分/ 类型/ 属性/ 值/ ,/ 关系/ 表中/ 其它/ 属性/ 上/ 所有/ 与/ 之/ 关联/ 的/ 多个/ 〈/ 属性/ ,/ 值/ 〉/ 可/ 视为/ 对/ 该值/ 特征/ 的/ 描述/ ,/ 一个/ 〈/ 属性/ ,/ 值/ 〉/ 由/ 一个/ 属性/ 和/ 它/ 对应/ 的/ 值/ 构成/ ,/ 如/ “/ Model/ =/ Camry/ ”/ ./ 一个/ 元组/ 中/ 不同/ 属性/ 上/ 的/ 值/ 之间/ 具有/ 关联/ 关系/ ./ 例如/ ,/ 在/ CarDB/ 中/ ,/ 给定/ 一个/ 元组/ t/ =/ {/ Toyota/ ,/ Camry/ ,/ 25k/ ,/ Black/ ,/ 2.4/ L/ ,/ 2008/ ,/ 80k/ }/ ,/ 则/ 〈/ 属性/ ,/ 值/ 〉/ “/ Model/ =/ Camry/ ”/ 与/ 〈/ 属性/ ,/ 值/ 〉/ “/ Make/ =/ Toyota/ ”/ 、/ “/ Price/ =/ 25k/ ”/ 、/ “/ Color/ =/ Black/ ”/ 、/ “/ Engine/ =/ 2.4/ L/ ”/ 、/ “/ Year/ =/ 2008/ ”/ 和/ “/ Mileage/ =/ 80k/ ”/ 相关联/ ./ 对于/ 同一/ 属性/ 上/ 的/ 两个/ 〈/ 属性/ ,/ 值/ 〉/ 之间/ 的/ 相似性/ ,/ 可/ 通过/ 计算/ 关系/ 表中/ 所有/ 与/ 这/ 两个/ 〈/ 属性/ ,/ 值/ 〉/ 相关联/ 的/ 〈/ 属性/ ,/ 值/ 〉/ 集合/ 之间/ 的/ 相似性/ 来/ 衡量/ ./ 具体来讲/ ,/ 一个/ 〈/ 属性/ ,/ 值/ 〉/ 可/ 视为/ 指定/ 在/ 关系/ 表中/ 单个/ 属性/ 上/ 的/ 一个/ 等值/ 查询/ 条件/ ,/ 通过/ 执行/ 该/ 查询/ 可/ 得到/ 所有/ 满足/ 该/ 〈/ 属性/ ,/ 值/ 〉/ 的/ 元组/ 集合/ ,/ 该/ 集合/ 用/ 语义/ 表/ 表示/ ./ 语义/ 表是/ 一个/ 两栏/ 结构/ ,/ 由/ 属性/ (/ Attributes/ )/ 和/ 包/ (/ Bags/ )/ 两列/ 构成/ ./ 例如/ ,/ 表/ 2/ 和表/ 3/ 分别/ 给出/ 了/ CarDB/ 上/ 对应/ 于/ “/ Model/ =/ Camry/ ”/ 和/ “/ Model/ =/ Accord/ ”/ 的/ 语义/ 表/ ./ Page6/ 属性/ MakePriceColorEngineYearMileage10k/ ~/ 25k/ :/ 18/ ;/ 20k/ ~/ 30k/ :/ 25/ ;/ …/ 表/ 3CarDB/ 上/ 对应/ 于/ “/ Model/ =/ Accord/ ”/ 的/ 语义/ 表/ 属性/ MakeHonda/ :/ 116Price5k/ ~/ 15k/ :/ 30/ ;/ 15k/ ~/ 20k/ :/ 38/ ;/ 20k/ ~/ 30k/ :/ 48ColorBlack/ :/ 21/ ;/ Silver/ :/ 27/ ;/ Gray/ :/ 33/ ;/ White/ :/ 35Engine2/ ./ 0L/ :/ 49/ ;/ 2.2/ L/ :/ 32/ ;/ 2.4/ L/ :/ 35Year2009/ :/ 20/ ;/ 2008/ :/ 51/ ;/ 2006/ :/ 18/ ;/ 2005/ :/ 27Mileage10k/ ~/ 20k/ :/ 42/ ;/ 20k/ ~/ 30k/ :/ 38/ ;/ 30k/ ~/ 45k/ :/ 36/ 某个/ 〈/ 属性/ ,/ 值/ 〉/ 的/ 语义/ 表/ 包含/ 了/ 关系/ 表中/ 除/ 该/ 属性/ 之外/ 的/ 其它/ 属性/ 及其/ 对应/ 的/ 一组/ 关键字/ 的/ 集合/ ./ 对于/ 分/ 类型/ 属性/ ,/ 每/ 一个/ 不同/ 的/ 属性/ 值/ 就是/ 一个/ 关键字/ ;/ 对于/ 数值/ 型/ 属性/ ,/ 通常/ 将/ 其/ 值域/ 划分/ 成/ 若干/ 数值/ 区间/ ,/ 其中/ 每个/ 数值/ 区间/ 都/ 作为/ 一个/ 关键字/ ./ 为了/ 使/ 关键字/ 能够/ 体现/ 语义/ ,/ 本文/ 用/ 关键字/ 和/ 它/ 在/ 关系/ 表中/ 对应/ 的/ 元组/ 个数/ (/ 即/ ,/ 〈/ 关键字/ :/ 元组/ 个数/ 〉/ )/ 代表/ 关键字/ 的/ 语义/ ,/ 并/ 将/ 对应/ 于/ 同一/ 属性/ 的/ 所有/ 〈/ 关键字/ :/ 元组/ 个数/ 〉/ 称为/ 包/ (/ Bags/ )/ ./ 例如/ ,/ 在/ 表/ 2/ 中/ ,/ Price/ 上/ 的/ 包为/ “/ 5k/ ~/ 15k/ :/ 36/ ,/ 15k/ ~/ 20k/ :/ 42/ ,/ …/ ”/ ,/ 包中/ 的/ 关键字/ 分别/ 是/ “/ 5k/ ~/ 15k/ ”/ 、/ “/ 15k/ ~/ 20k/ ”/ 等/ ,/ 其中/ 关键字/ “/ 5k/ ~/ 15k/ ”/ 对应/ 的/ 值/ 为/ 36/ ,/ 这/ 表明/ CarDB/ 中有/ 36/ 辆/ Camry/ 车/ 的/ 价格/ 在/ 5k/ ~/ 15k/ 之间/ ./ 下面/ 讨论/ 如何/ 为/ 关系/ R/ 中/ 的/ 数值/ 型/ 属性/ 划分/ 数值/ 区间/ ./ 直方图/ (/ histogram/ )/ 是/ 划分/ 数值/ 区间/ 的/ 常用/ 技术/ ,/ 在/ 关系数据库/ 中该/ 技术/ 的/ 基本/ 思想/ 是/ 把/ 关系/ 表中/ 一个/ 数值/ 型/ 属性/ 的/ 值域/ 划分/ 为/ 多个/ 块/ (/ Bucket/ )/ ,/ 然后/ 根据/ 每个/ 块/ 中/ 维护/ 的/ 统计/ 信息/ 来/ 估算/ 属性/ 的/ 实际/ 值/ 和/ 它们/ 的/ 频率/ (/ 数据分布/ )/ ./ 目前/ 两种/ 最/ 常见/ 的/ 直方图/ 是/ 等/ 宽/ (/ equi/ -/ width/ )/ 和/ 等/ 深/ (/ equi/ -/ depth/ )/ 直方图/ ,/ 等/ 宽/ 直方图/ 中/ 每个/ 块/ 的/ 划分/ 区间/ 相同/ ,/ 等/ 深/ 直方图/ 中/ 每个/ 块/ 中/ 所/ 包含/ 的/ 元组/ 个数/ 相同/ ./ 由于/ 现实/ 应用/ 中/ 数据分布/ 的/ 稠密/ 程度/ 不同/ ,/ 使用/ 等/ 宽/ 直方图/ 划分/ 方法/ 将/ 导致/ 每个/ 等/ 宽/ 数值/ 区间/ 内/ 的/ 元组/ 数/ 分布/ 不/ 很/ 均匀/ ,/ 进而/ 影响/ 到/ Jaccard/ 系数/ 的/ 评估/ 准确性/ ,/ 因此/ 本文/ 选用/ 了/ 等/ 深/ 直方图/ 划分/ 方法/ ,/ 目的/ 是/ 使/ 每个/ 数值/ 区间/ 所/ 对应/ 的/ 元组/ 数/ 大致相同/ ,/ 进而/ 确保/ 语义/ 相似/ 度/ 评估/ 算法/ 的/ 合理性/ ./ 实现/ 算法/ 如下/ (/ 算法/ 1/ )/ ./ 算法/ 1/ ./ 数值/ 型/ 属性/ 的/ 数值/ 区间/ 划分算法/ ./ 输入/ :/ 数值/ 型/ 属性/ Ai/ 和/ 它/ 的/ 取值/ 范围/ ,/ 关系/ R/ 和/ R/ 中/ 输出/ :/ n/ 个/ 数值/ 区间/ 的/ 上界/ 集合/ U/ =/ {/ u1/ ,/ …/ ,/ un/ }/ 1/ ./ 令/ U/ 为/ 一个/ 大小/ 为/ n/ 的/ 数组/ ,/ 用于/ 存储/ 每个/ 数值/ 区/ 2/ ./ 令/ 属性/ Ai/ 在/ R/ 上/ 的/ 取值/ 范围/ 为/ [/ alow/ ,/ aup/ )/ ;/ 3/ ./ 设置/ λ/ =/ |/ R/ |/ // n/ ;/ 4/ ./ 令/ 数值/ 区间/ 下界/ low/ =/ alow/ ,/ 数值/ 区间/ 上界/ up/ =/ aup/ ;/ 5/ ./ do6/ ./ 用/ 条件/ “/ low/ / Ai/ </ up/ ”/ 查询/ R/ 并/ 记录/ 结果/ 元组/ 7/ ./ if/ (/ c/ / λ/ )/ then8/ ./ 记录/ up/ 的/ 值/ 并/ 将/ 其/ 按序/ 存入/ U/ 中/ ;/ 9/ ./ 设置/ low/ =/ up/ ,/ up/ =/ aup/ ;/ 10/ ./ else11/ ./ 设置/ up/ =/ low/ +/ (/ up/ -/ low/ )/ // 2/ ;/ 12/ ./ while/ (/ low/ </ aup/ )/ 13/ ./ returnU/ ./ 算法/ 1/ 首先/ 确定/ 每个/ 数值/ 区间/ 所/ 包含/ 的/ 元组/ 数/ 阈值/ λ/ ,/ 该值/ 为/ 关系/ R/ 中/ 的/ 元组/ 数/ 与/ 设定/ 的/ 数值/ 区间/ 数之比/ (/ 第/ 3/ 步/ )/ ,/ 并/ 设置/ 最初/ 的/ 数值/ 区间/ 下界/ low/ 和/ 数值/ 区间/ 上界/ up/ 的/ 值/ 分别/ 为/ 属性/ Ai/ 取值/ 范围/ 中/ 的/ 最小值/ 和/ 最大值/ (/ 第/ 4/ 步/ )/ ;/ 然后/ ,/ 用/ 条件/ “/ low/ / Ai/ </ up/ ”/ 查询/ R/ 并/ 记录/ 结果/ 元组/ 个数/ c/ (/ 第/ 6/ 步/ )/ ,/ 如果/ c/ 小于/ 阈值/ λ/ ,/ 记录/ up/ 的/ 值/ 并/ 将/ 其/ 存入/ 数组/ U/ 中/ ,/ 否则/ ,/ 缩小/ 查询/ 范围/ 重新/ 查询/ R/ ,/ 直到/ c/ 小于/ 阈值/ λ/ ,/ 这样/ 每个/ 数值/ 区间/ 中/ 的/ 元组/ 数都会/ 不/ 超过/ 阈值/ λ/ (/ 第/ 7/ ~/ 12/ 步/ )/ ;/ 最后/ ,/ 返回/ 数值/ 区间/ 的/ 上界/ 集合/ U/ ./ 利用/ 该/ 算法/ ,/ 可为/ R/ 中/ 每个/ 数值/ 型/ 属性/ 划分/ 数值/ 区间/ ,/ 并/ 将/ 其/ 作为/ 构建/ 语义/ 表/ 的/ 数值/ 型/ 属性/ 划分/ 标准/ ./ 下面/ 讨论/ 如何/ 为/ 一个/ 〈/ 属性/ ,/ 值/ 〉/ 构建/ 相应/ 的/ 语义/ 表/ ./ 令/ T/ 代表/ 关系/ R/ 中/ 所有/ 包含/ 该/ 〈/ 属性/ ,/ 值/ 〉/ 的/ 元组/ 集合/ ./ 语义/ 表中/ 的/ 属性/ 与/ 包/ 之间/ 是/ 11/ 的/ 关系/ ,/ 每个/ 包都/ 包含/ 若干/ 〈/ 关键字/ :/ 元组/ 个数/ 〉/ ./ 如果/ 包/ 对应/ 的/ 是/ 一个/ 分/ 类型/ 属性/ ,/ 则/ 对于/ 该/ 属性/ 中/ 的/ 每个/ 值/ ,/ 包中/ 都/ 有/ 一个/ 相应/ 的/ 〈/ 关键字/ :/ 元组/ 个数/ 〉/ 表示/ 该值/ 在/ T/ 中/ 的/ 个数/ ;/ 如果/ 包/ 对应/ 的/ 是/ 一个/ 数值/ 型/ 属性/ ,/ 则/ 对于/ 该/ 属性/ 中/ 的/ 每个/ 数值/ 区间/ ,/ 包中/ 都/ 有/ 一个/ 相应/ 的/ 〈/ 关键字/ :/ 元组/ 个数/ 〉/ 表示/ 该/ 区间/ 在/ T/ 中所/ 包含/ 的/ 元组/ 个数/ ./ 语义/ 表/ 构建/ 算法/ 描述/ 如下/ (/ 算法/ 2/ )/ ./ 算法/ 2/ ./ 语义/ 表/ 构建/ 算法/ ./ 输入/ :/ 关系/ R/ 中/ 的/ 属性/ 集合/ A/ ,/ T/ 和/ T/ 中/ 的/ 元组/ 个数/ |/ T/ |/ ,/ 输出/ :/ 语义/ 表/ STPage71/ ./ for/ 每/ 一个/ 属性/ Ai/ ∈/ Ado2/ ./ if/ (/ Ai/ 是/ 分/ 类型/ 属性/ )/ then3/ ./ for/ 每/ 一个/ 属性/ 值/ aij/ ∈/ DomT/ (/ Ai/ )/ do4/ ./ 用/ “/ Ai/ =/ aij/ ”/ 查询/ T/ 并/ 记录/ 结果/ 元组/ 个数/ c/ ;/ 5/ ./ 添加/ (/ aij/ ,/ c/ )/ 到/ 包/ Bagsi/ 中/ ;/ 6/ ./ endfor7/ ./ if/ (/ Ai/ 是/ 数值/ 型/ 属性/ ∧/ 在/ T/ 上/ 取值/ 范围/ 为/ [/ alow/ ,/ 8/ ./ forj/ =/ n/ -/ 1/ ,/ …/ ,/ 0do9/ ./ if/ (/ U/ [/ j/ ]/ / alow/ )/ 10/ ./ 设置/ 数值/ 区间/ 下界/ low/ =/ U/ [/ j/ ]/ ;/ break/ ;/ 11/ ./ endfor12/ ./ 设置/ 数值/ 区间/ 上界/ up/ =/ U/ [/ j/ +/ 1/ ]/ ;/ 13/ ./ do14/ ./ 用/ “/ low/ / Ai/ </ up/ ”/ 查询/ T/ 并/ 记录/ 结果/ 元组/ 个数/ c/ ;/ 15/ ./ 添加/ (/ low/ ,/ up/ ,/ c/ )/ 到/ 包/ Bagsi/ 中/ ;/ 16/ ./ j/ ++/ ;/ 17/ ./ 设置/ low/ =/ up/ ,/ up/ =/ U/ [/ j/ +/ 1/ ]/ ;/ 18/ ./ while/ (/ up/ / aup/ )/ 19/ ./ ST/ ←/ 〈/ Ai/ ,/ Bagsi/ 〉/ ;/ 20/ ./ endfor21/ ./ returnST/ ./ 通过/ 使用/ 算法/ 2/ 可为/ 关系/ R/ 中/ 任一/ 〈/ 属性/ ,/ 值/ 〉/ 生成/ 一个/ 相应/ 的/ 语义/ 表/ ./ 由于/ 语义/ 表中/ 包含/ 了/ 对应/ 于/ 每个/ 属性/ 的/ 包/ ,/ 并且/ 每个/ 包中/ 又/ 包含/ 一组/ 〈/ 关键字/ :/ 元组/ 个数/ 〉/ ,/ 因此/ 可用/ Jaccard/ 系数/ 计算/ 两个/ 不同/ 语义/ 表中/ 相对/ 应/ 的/ 两个/ 包/ 之间/ 的/ 语义/ 相似/ 度/ ./ 两个/ 不同/ 分/ 类型/ 值/ 之间/ 的/ 语义/ 相似/ 度/ ,/ 是/ 两个/ 语义/ 表中/ 所有/ 对应/ 包/ 之间/ 相似/ 度/ 的/ 平均值/ ,/ 用下式/ 计算/ :/ VSim/ (/ v1/ ,/ v2/ )/ =/ ∑/ m/ 其中/ ,/ v1/ 和/ v2/ 是/ 同一/ 属性/ 上/ 的/ 两个/ 不同/ 分/ 类型/ 值/ ;/ S1/ 和/ S2/ 分别/ 是/ 对应/ v1/ 和/ v2/ 的/ 两个/ 语义/ 表/ ;/ Bagsi/ 是/ 语义/ 表中/ 属性/ Ai/ 对应/ 的/ 包/ ;/ J/ (/ )/ 是/ Jaccard/ 系数/ (/ 式/ (/ 7/ )/ )/ :/ 利用/ 上述/ 方法/ ,/ 可/ 计算/ 出/ 关系/ R/ 中/ 同一/ 属性/ 上/ 所有/ 不同/ 分/ 类型/ 值/ 对/ 之间/ 的/ 一个/ 相似/ 度/ 矩阵/ ./ 由于/ Sim/ (/ v1/ ,/ v2/ )/ =/ Sim/ (/ v2/ ,/ v1/ )/ ,/ 因此/ 该/ 矩阵/ 是/ 对称/ 的/ ,/ 只/ 需/ 计算/ 上半/ 矩阵/ ./ 相似/ 度/ 矩阵/ 的/ 创建/ 算法/ 如下/ (/ 算法/ 3/ )/ ./ 算法/ 3/ ./ 分/ 类型/ 值/ 之间/ 的/ 相似/ 度/ 矩阵/ 创建/ 算法/ ./ 输入/ :/ 分/ 类型/ 值/ 个数/ n/ ,/ 属性/ 个数/ m/ ,/ 属性/ 的/ 包/ Bags/ 输出/ :/ 相似/ 度/ 矩阵/ Matrix1/ ./ Matrix/ ←/ / ;/ 2/ ./ fori/ =/ 1/ …/ n/ -/ 1do3/ ./ iBags/ =/ getAttributeBags/ (/ i/ )/ ;/ 4/ ./ forj/ =/ i/ +/ 1/ …/ ndo5/ ./ jBags/ =/ getAttributeBags/ (/ j/ )/ ;/ 6/ ./ fork/ =/ 1/ …/ mdo7/ ./ Sim/ [/ k/ ]/ =/ Sim/ (/ iBags/ [/ k/ ]/ ,/ jBags/ [/ k/ ]/ )/ ;/ 8/ ./ endfor9/ ./ SimDegree/ =/ ∑/ m10/ ./ Matrix/ [/ i/ ]/ [/ j/ ]/ =/ SimDegree/ ;/ 11/ ./ Matrix/ [/ j/ ]/ [/ i/ ]/ =/ Matrix/ [/ i/ ]/ [/ j/ ]/ ;/ 12/ ./ endfor13/ ./ endfor14/ ./ returnMatrix/ ./ 本文/ 把/ 在/ 关系/ R/ 中/ 计算/ 出/ 的/ 所有/ 不同/ 分/ 类型/ 值/ 之间/ 的/ 语义/ 相似/ 度/ 存储/ 在/ 结构/ 为/ :/ (/ AttName/ -/ 属性/ ,/ AttValPair/ -/ 属性/ 值/ 对/ ,/ Simlarity/ -/ 相似/ 度/ )/ 的/ 分/ 类型/ 值/ 相似/ 度表中/ ,/ 并/ 在/ AttName/ 和/ AttValPair/ 上/ 建立/ 索引/ 以便/ 于/ 检索/ ./ 5.2/ 数值/ 型/ 值间/ 的/ 语义/ 相似/ 度/ 对于/ 数值/ 型/ 属性/ ,/ 本文/ 借鉴/ 模糊集/ 理论/ 的/ 基本/ 思想/ 评估/ 数值/ 型值/ 之间/ 的/ 语义/ 相似/ 度/ ./ 根据/ 模糊集/ 理论/ ,/ 给定/ 一个/ 数值/ Y/ ,/ 在/ 数值/ 上/ 接近/ Y/ 的/ 数/ 构成/ 了/ 一个/ 模糊/ 集合/ ,/ 用/ “/ closetoY/ ”/ 表示/ ./ 根据/ 文献/ [/ 16/ ]/ ,/ 它/ 的/ 隶属/ 函数/ 在/ 论域/ U/ 上/ 定义/ 为/ 其中/ ,/ u/ 为/ 论域/ U/ 上/ 的/ 一个/ 元素/ ;/ ./ μ/ closetoY/ (/ u/ )/ 代表/ 元素/ u/ 隶属于/ “/ closetoY/ ”/ 的/ 程度/ ;/ β/ 为/ 一个/ 调节/ 值/ ,/ β/ 越大/ ,/ 对于/ 同一个/ u/ 来说/ ,/ u/ 隶属于/ “/ closetoY/ ”/ 的/ 程度/ 越大/ ./ 模糊集/ “/ closetoY/ ”/ 的/ 隶属/ 函数/ 如图/ 1/ 所示/ ./ 基于/ 该/ 思想/ ,/ 令/ Ai/ 为/ 关系/ R/ 中/ 的/ 一个/ 数值/ 型/ 属性/ ,/ 其/ 值域/ 为/ {/ v1/ ,/ v2/ ,/ …/ ,/ vn/ }/ ,/ 根据上述/ “/ closetoY/ ”/ 的/ 隶属/ 函数/ ,/ 两个/ 数值/ 型值/ v/ 和/ q/ 之间/ 的/ 语义/ 相似/ 度/ 可/ 由/ 下式/ 计算/ :/ 其中/ ,/ q/ 代表/ 查询/ 条件/ 指定/ 的/ 值/ ;/ v/ 代表/ 属性/ Ai/ 中/ 的/ Page8/ 任一/ 属性/ 值/ ;/ β/ =/ 1.06/ σ/ n/ -/ 1/ // 5/ (/ 其中/ σ/ 是/ 关系/ R/ 中/ 数值/ 型/ 属性/ Ai/ 上/ 所有/ 值/ 的/ 标准差/ ,/ n/ 为/ R/ 中/ 的/ 元组/ 总数/ )/ ./ 从式/ (/ 9/ )/ 可以/ 看出/ ,/ v/ 与/ q/ 在/ 数值/ 上越/ 接近/ ,/ 则/ NSim/ (/ v/ ,/ q/ )/ 的/ 值/ 越/ 接近/ 1/ ./ 根据/ 上/ 式/ ,/ 给定/ 一个/ 子/ 松弛/ 阈值/ ,/ 就/ 可/ 计算/ 出/ 满足/ 该子/ 松弛/ 阈值/ 的/ v/ 所/ 对应/ 的/ 最小值/ vmin/ 和/ 最大值/ vmax/ ./ 例如/ ,/ 假设/ 查询/ Q/ 在/ 属性/ Ai/ 上/ 指定/ 的/ 基本/ 查询/ 条件/ 为/ “/ Ai/ =/ q/ ”/ ,/ 令/ ψ/ i/ 为/ 该/ 基本/ 查询/ 条件/ 的/ 子/ 松弛/ 阈值/ ,/ 则/ 根据/ 式/ (/ 9/ )/ 可/ 得/ 松弛/ 后/ 的/ 查询/ 区间/ 为/ 若/ 基本/ 查询/ 条件/ 中/ 的/ q/ 为/ 一个/ 数值/ 区间/ [/ q1/ ,/ q2/ ]/ ,/ 则/ 松弛/ 后/ 的/ 查询/ 区间/ 为/ 注意/ ,/ 对于/ 数据库/ 中/ 存在/ 多个/ 相关联/ 的/ 基本/ 表/ 的/ 情况/ ,/ 本文/ 的/ 解决/ 方法/ 是/ 先为/ 这些/ 相关联/ 的/ 基本/ 表/ 创建/ 一个/ 综合/ 逻辑/ 视图/ ,/ 该/ 视图/ 中/ 包含/ 了/ 这些/ 基本/ 表中/ 的/ 属性/ ,/ 然后/ 在/ 这个/ 视图/ 上/ 执行/ 上述/ 算法/ ./ 6/ 查询/ 松弛/ 和/ 结果/ 排序/ 根据/ 属性/ 权重/ 、/ 属性/ 值/ 之间/ 的/ 语义/ 相似/ 度/ 和/ 松弛/ 阈值/ ,/ 可/ 将/ 初始/ 查询/ 重写/ 为/ 一个/ 范围/ 更为/ 宽泛/ 的/ 松弛/ 查询/ ./ 然而/ ,/ 执行/ 松弛/ 查询/ 后/ 很/ 可能/ 产生/ 多个/ 查询/ 结果/ ./ 因此/ ,/ 本/ 节/ 主要/ 讨论/ 查询/ 松弛/ 重写/ 算法/ 和/ 松弛/ 查询/ 下/ 的/ 结果/ 排序/ 方法/ ./ 6.1/ 查询/ 松弛/ 重写/ 算法/ 在/ 关系/ R/ 上/ 给定/ 一个/ 合取/ 查询/ Q/ =/ σ/ ∧/ i/ ∈/ {/ 1/ ,/ …/ ,/ k/ }/ Ci/ ,/ 令/ wi/ 代表/ 基本/ 查询/ 条件/ Ci/ 所/ 对应/ 属性/ Ai/ 的/ 权重/ ,/ k/ 代表/ 查询/ Q/ 指定/ 的/ 属性/ 个数/ ,/ Tsim/ 代表/ 给定/ 在/ Q/ 上/ 的/ 松弛/ 阈值/ ./ 根据/ 属性/ 权重/ 和/ 松弛/ 阈值/ ,/ 可由/ 下式/ 计算/ 出/ 查询/ Q/ 中/ 每个/ Ci/ 的/ 子/ 松弛/ 阈值/ ψ/ i/ ,/ 即/ 注意/ ,/ 如果/ 某个/ 基本/ 查询/ 条件/ 的/ 子/ 松弛/ 阈值/ 大于/ 1/ ,/ 则/ 将/ 其置/ 为/ 1/ ./ 根据/ 式/ (/ 12/ )/ 可知/ ,/ 属性/ 权重/ 越大/ ,/ 指定/ 在/ 其/ 上/ 的/ 基本/ 查询/ 条件/ 的/ 子/ 松弛/ 阈值/ 越高/ ,/ 该/ 基本/ 查询/ 条件/ 的/ 放松/ 程度/ 相应/ 地/ 就/ 越/ 小/ ./ 需要/ 说明/ 的/ 是/ ,/ 式/ (/ 12/ )/ 中/ 虽然/ 含有/ k/ 个/ 变量/ ,/ 但/ 实质/ 上/ 其中/ 的/ k/ -/ 1/ 个/ 变量/ 都/ 可/ 由/ k/ 个/ 变量/ 中/ 的/ 某个/ 变量/ 表示/ ,/ 因此/ 只要/ 根据/ 公式/ 求出/ 该/ 变量/ 的/ 值/ ,/ 其它/ 变量/ 的/ 值/ 就/ 容易/ 求出/ ./ 例如/ ,/ 给定/ 查询/ 指定/ 了/ 3/ 个/ 属性/ ,/ 假设/ 利用/ 式/ (/ 5/ )/ 得到/ 这/ 3/ 个/ 属性/ 的/ 权重/ 分别/ 为/ 0.5/ 、/ 0.3/ 和/ 0.2/ ,/ 设/ 它们/ 对应/ 的/ 子/ 松弛/ 阈值/ 分别/ 为/ ψ/ 1/ 、/ ψ/ 2/ 和/ ψ/ 3/ ,/ 这样/ 式/ (/ 12/ )/ 中/ 的/ 第一个/ 子式/ 就/ 可/ 表示/ 为/ 则/ ψ/ 2/ 和/ ψ/ 3/ 都/ 可用/ 含/ ψ/ 1/ 的/ 式子/ 表示/ ,/ 即/ ψ/ 2/ =/ 0.3/ ψ/ 1/ // 0.5/ ,/ ψ/ 3/ =/ 0.2/ ψ/ 10.5/ ,/ 把/ 这些/ 量/ 代入/ 式/ (/ 12/ )/ 中/ 的/ 第/ 2/ 个子/ 式/ 就/ 可求/ 出/ ψ/ 1/ 的/ 值/ ,/ 进而/ 可求/ 出/ ψ/ 2/ 和/ ψ/ 3/ 的/ 值/ ./ 根据/ 初始/ 查询/ Q/ 、/ 松弛/ 阈值/ Tsim/ 、/ 属性/ 权重/ W/ 以及/ 分/ 类型/ 值/ 相似/ 度表/ KB/ ,/ 可/ 形成/ 如下/ 的/ 查询/ 松弛/ 重写/ 算法/ (/ 算法/ 4/ )/ ./ 算法/ 4/ ./ 查询/ 松弛/ 重写/ 算法/ ./ 输入/ :/ 初始/ 查询/ Q/ ,/ 松弛/ 阈值/ Tsim/ ,/ 属性/ 权重/ W/ (/ w1/ ,/ 输出/ :/ 松弛/ 查询/ 珟/ Q1/ ./ do2/ ./ 根据/ W/ 和/ Tsim/ 计算/ Q/ 中/ 每个/ Ci/ 的/ 子/ 松弛/ 阈值/ ψ/ i/ ;/ 3/ ./ for/ 每/ 一个/ 基本/ 查询/ 条件/ Ci/ ∈/ Qdo4/ ./ 珟/ Ci/ ←/ Ci/ ;/ 5/ ./ if/ (/ Ci/ 对应/ 的/ 属性/ Ai/ 是/ 分/ 类型/ 属性/ )/ then6/ ./ for/ 每/ 一个/ v/ ∈/ Dom/ (/ Ai/ )/ do7/ ./ if/ (/ VSim/ (/ ai/ ,/ v/ )/ >/ ψ/ i/ )/ then8/ ./ 添加/ v/ 到/ 珟/ Ci/ 的/ 查询/ 范围/ 中/ ;/ 9/ ./ if/ (/ Ci/ 对应/ 的/ 属性/ Ai/ 是/ 数值/ 型/ 属性/ )/ then10/ ./ 用/ q/ -/ h1/ -/ ψ/ i11/ ./ 珟/ Q/ ←/ 珟/ Q/ ∪/ 珟/ Ci/ ;/ 12/ ./ endfor13/ ./ 珟/ Q/ (/ R/ )/ ←/ 在/ R/ 上/ 执行/ 松弛/ 查询/ 珟/ Q/ 得到/ 的/ 查询/ 结果/ ;/ 14/ ./ Tsim/ ←/ Tsim/ -/ 0.1/ ;/ 15/ ./ while/ (/ 珟/ Q/ (/ R/ )/ ≠/ / )/ 16/ ./ return/ 珟/ Q/ (/ R/ )/ ./ 算法/ 4/ 首先/ 根据/ 松弛/ 阈值/ Tsim/ 和/ 属性/ 权重/ W/ ,/ 计算/ 出/ Q/ 中/ 每个/ 基本/ 查询/ 条件/ Ci/ 的/ 子/ 松弛/ 阈值/ ψ/ i/ (/ 第/ 2/ 步/ )/ ;/ 然后/ ,/ 对于/ 每/ 一个/ 基本/ 查询/ 条件/ Ci/ ,/ 从/ 对应/ 属性/ Ai/ 的/ 值域/ 中/ 获取/ 与/ Ci/ 指定/ 的/ 值/ 相似/ 度/ 高于/ ψ/ i/ 的/ 属性/ 值/ ,/ 并/ 将/ 其/ 加入/ 到/ Ci/ 的/ 查询/ 范围/ 中/ ,/ 从而/ 形成/ 松弛/ 的/ 基本/ 查询/ 条件/ 珟/ Ci/ (/ 第/ 3/ ~/ 10/ 步/ )/ ,/ 合取/ 所有/ 的/ 珟/ Ci/ 最终/ 形成/ 松弛/ 查询/ 珟/ Q/ (/ 第/ 11/ 步/ )/ ;/ 在/ 关系/ R/ 上/ 执行/ 松弛/ 查询/ 珟/ Q/ ,/ 获取/ 并/ 判断/ 查询/ 结果/ 返回/ 情况/ ,/ 如果/ 在/ 给定/ 的/ 松弛/ 阈值/ Tsim/ 下/ 查询/ 结果/ 仍然/ 为空/ ,/ 则/ 系统/ 以/ 步长/ 0.1/ 递减/ 方式/ 自动/ 调整/ 阈值/ (/ 第/ 13/ ~/ 14/ 步/ )/ ,/ 然后/ 重新/ 计算/ 每个/ 基本/ 查询/ 条件/ 的/ 子/ 松弛/ 阈值/ 并/ 进行/ 查询/ 松弛/ 重写/ ,/ 该/ 过程/ 直到/ 查询/ 结果/ 非空/ 为止/ ./ Page96/ ./ 2/ 近似/ 查询/ 结果/ 排序/ 在/ 数据库/ 上/ 执行/ 松弛/ 查询/ 珟/ Q/ 后/ ,/ 可能/ 产生/ 大量/ 查询/ 结果/ ./ 如果/ 把/ 查询/ 结果/ 中/ 的/ 元组/ 随机/ 地/ 返回/ 给/ 用户/ ,/ 用户/ 将/ 不得不/ 对/ 大量/ 的/ 结果/ 元组/ 逐一/ 进行/ 对比/ 分析/ ,/ 这是/ 一件/ 枯燥/ 并且/ 费时费力/ 的/ 工作/ ,/ 因此/ 对/ 松弛/ 查询/ 下/ 的/ 查询/ 结果/ 进行/ 排序/ 有着/ 重要/ 意义/ ./ 本文/ 给出/ 一种/ 按/ 元组/ 对/ 初始/ 查询/ 满足/ 程度/ 的/ 查询/ 结果/ 排序/ 方法/ ,/ 元组/ t/ 对/ 初始/ 查询/ Q/ 的/ 满足/ 程度/ 用下式/ 评估/ :/ Satisfaction/ (/ t/ ,/ Q/ )/ =/ ∑/ kVSim/ (/ t/ ./ Ai/ ,/ Q/ ./ Ai/ )/ ,/ Domain/ (/ Ai/ )/ =/ Categorical/ 烅/ 烄/ NSim/ (/ t/ ./ Ai/ ,/ Q/ ./ Ai/ )/ ,/ Domain/ (/ Ai/ )/ 烆/ 其中/ ,/ k/ 代表/ 查询/ Q/ 指定/ 的/ 属性/ 个数/ ,/ wi/ 代表/ 属性/ Ai/ 的/ 权重/ ,/ VSim/ (/ t/ ./ Ai/ ,/ Q/ ./ Ai/ )/ 代表/ 查询/ Q/ 在/ 分/ 类型/ 属性/ Ai/ 上/ 指定/ 的/ 值/ 与/ 元组/ t/ 在/ Ai/ 上/ 的/ 取值/ 之间/ 的/ 语义/ 相似/ 度/ ,/ NSim/ (/ t/ ./ Ai/ ,/ Q/ ./ Ai/ )/ 代表/ 查询/ Q/ 在/ 数值/ 型/ 属性/ Ai/ 上/ 指定/ 的/ 值/ 与/ 元组/ t/ 在/ Ai/ 上/ 的/ 取值/ 之间/ 的/ 语义/ 相似/ 度/ ./ 注意/ ,/ 式/ (/ 1/ )/ 定义/ 的/ 元组/ t/ 对/ 初始/ 查询/ Q/ 的/ 满足/ 程度/ Satisfaction/ (/ t/ ,/ Q/ )/ 与/ 式/ (/ 13/ )/ 相一致/ ./ 7/ 实验/ 结果/ 与/ 性能/ 分析/ 本/ 节/ 通过/ 实验/ 来/ 验证/ 所提/ 方法/ 的/ 效果/ 和/ 性能/ ,/ 对/ 实验/ 结果/ 进行/ 讨论/ ,/ 并/ 与/ 现有/ 方法/ 进行/ 对比/ ./ 7.1/ 实验/ 环境/ 数据/ 集/ ./ 测试数据/ 使用/ 了/ 两个/ 不同/ 应用领域/ 的/ 数据/ 集/ ,/ 一个/ 是从/ Yahoo/ !/ Autos/ 网站/ ①/ 随机/ 抽取/ 的/ 1000000/ 条/ 二手车/ 信息/ 记录/ ,/ 合成/ 关系/ 表/ CarDB/ (/ Make/ -/ 厂商/ ,/ Model/ -/ 型号/ ,/ Year/ -/ 出厂日期/ ,/ Color/ -/ 颜色/ ,/ Engine/ -/ 引擎/ ,/ Price/ -/ 价格/ ,/ Mileage/ -/ 里程/ )/ ,/ 其中/ Make/ 、/ Model/ 、/ Engine/ 和/ Color/ 是/ 分/ 类型/ 属性/ ,/ 其余/ 是/ 数值/ 型/ 属性/ ./ 另/ 一个/ 是从/ Yahoo/ !/ RealEstate/ 网站/ ②/ 随机/ 抽取/ 的/ 237620/ 条/ 房产信息/ 记录/ ,/ 合成/ 关系/ 表/ HouseDB/ (/ City/ -/ 城市/ ,/ Price/ -/ 价格/ ,/ SqFt/ -/ 面积/ ,/ Bedrooms/ -/ 卧室/ 数/ ,/ Bathrooms/ -/ 浴室/ 数/ ,/ Schooldis/ -/ trict/ -/ 学区/ ,/ View/ -/ 景观/ ,/ Neighborhood/ -/ 临区/ ,/ Build/ -/ year/ -/ 建筑/ 年份/ )/ ,/ 其中/ City/ 、/ Schooldistrict/ 、/ View/ 和/ Neighborhood/ 是/ 分/ 类型/ 属性/ ,/ 其余/ 是/ 数值/ 型/ 属性/ ./ 所有/ 实验/ 都/ 在/ P43/ ./ 2/ -/ GHz/ 处理器/ ,/ 1GBRAM/ 和/ 内置/ 160GB/ 硬盘驱动器/ ,/ 运行/ WindowsXP/ 和/ MicrosoftSQLServer2005/ 的/ 环境/ 下/ 进行/ ,/ 用/ Java/ 和/ SQL/ 语言/ 实现/ 所有/ 算法/ ,/ 以/ JDBC/ 方式/ 连接/ RDBMS/ ,/ Web/ 服务器/ 使用/ Tomcat5/ ./ 5/ ./ 算法/ 对比/ ./ 将/ 提出/ 的/ 查询/ 松弛/ 和/ 结果/ 排序/ (/ QueryRelaxation/ &/ ResultsRanking/ ,/ QRRR/ )/ 方法/ 与/ 文献/ [/ 13/ ]/ 提出/ 的/ AIMQ/ 方法/ 进行/ 对比/ ./ 虽然/ 两者/ 解决/ 的/ 问题/ 不同/ ,/ 但/ AIMQ/ 将/ 不/ 精确/ 查询/ 紧缩/ 成/ 精确/ 查询/ 后/ ,/ 需要/ 将/ 满足/ 精确/ 查询/ 的/ 每条/ 结果/ 元组/ 作为/ 一个/ 查询/ 并/ 进行/ 松弛/ 处理/ ,/ 然后/ 得到/ 与/ 精确/ 查询/ 近似/ 匹配/ 的/ 有序/ 查询/ 结果/ ./ 因此/ ,/ 本文/ 将/ QRRR/ 与/ AIMQ/ 的/ 查询/ 松弛/ 效果/ 进行/ 比较/ ./ 下面/ 简述/ AIMQ/ 方法/ :/ 给定/ 一个/ 不/ 精确/ 查询/ ,/ AIMQ/ 首先/ 将/ 其/ 紧缩/ 成/ 一个/ 精确/ 查询/ ,/ 然后/ 把/ 数据库/ 表中/ 满足/ 该/ 精确/ 查询/ 的/ 每/ 一条/ 元组/ 作为/ 一个/ 查询/ ./ 接着/ ,/ AIMQ/ 对/ 这些/ 查询/ 进行/ 松弛/ 处理/ ,/ 它/ 利用/ 近似/ 函数/ 依赖/ (/ Approxi/ -/ mateFunctionsDependencies/ ,/ AFDs/ )/ 和/ 近似/ 关键字/ (/ ApproaxiamteKeys/ ,/ AKs/ )/ 在/ 预/ 提取/ 的/ 数据/ 集上/ 评估/ 属性/ 权重/ ,/ 并/ 依次/ 从/ 最/ 不/ 重要/ 的/ 属性/ 上/ 去除/ 基本/ 查询/ 条件/ ./ 最后/ ,/ AIMQ/ 在/ 数据库/ 上/ 执行/ 这些/ 松弛/ 查询/ 获得/ 相似/ 度/ 高于/ 给定/ 阈值/ 的/ 查询/ 结果/ ./ 对于/ 查询/ 结果/ 的/ 排序/ ,/ AIMQ/ 按照/ 结果/ 元组/ 与/ 不/ 精确/ 查询/ 之间/ 的/ 相似/ 度/ 作为/ 排序/ 依据/ ./ 另外/ ,/ 本文/ 还/ 采用/ 随机/ 算法/ (/ RANDOMalgo/ -/ rithm/ )/ 获取/ 相关/ 结果/ 并/ 随机/ 排序/ ,/ 该/ 算法/ 为/ QRRR/ 和/ AIMQ/ 之间/ 的/ 比较/ 提供/ 了/ 一个/ 基准/ ./ 7.2/ IDF/ 权重/ 评估/ 算法/ 测试/ 该/ 实验/ 目的/ 是/ 在/ 不同/ 领域/ 和/ 大小/ 的/ 数据/ 集上/ ,/ 测试/ IDF/ 权重/ 评估/ 算法/ 的/ 合理性/ 和/ 稳定性/ ./ 在/ HouseDB/ 和/ CarDB/ 数据/ 集上/ ,/ 利用/ IDF/ 权重/ 评估/ 算法/ 分别/ 在/ 1M/ 、/ 2M/ 和/ 4M/ 大小/ 的/ 数据量/ 上/ 计算/ 不同/ 属性/ 值/ 的/ IDF/ 权重/ ./ 表/ 4/ 给出/ 了/ CarDB/ 和/ HouseDB/ 上/ 不同/ 属性/ 值/ 的/ IDF/ 权重/ 计算结果/ ./ 表/ 4CarDB/ 和/ HouseDB/ 上/ 不同/ 属性/ 值/ 的/ IDF/ 权重/ 属性/ 分/ 类型/ 值/ Make/ (/ CarDB/ )/ Color/ (/ CarDB/ )/ Price/ (/ CarDB/ )/ ①/ ②/ Page10/ 属性/ 分/ 类型/ 值/ City/ (/ HouseDB/ )/ View/ (/ HouseDB/ )/ Price/ (/ HouseDB/ )/ 从表/ 4/ 可以/ 看出/ ,/ 在/ 数据/ 集/ 当中/ 经常出现/ 的/ 属性/ 值/ 被/ 分配/ 了/ 较/ 小/ 的/ 权重/ (/ 如/ “/ Color/ =/ Black/ ”/ )/ ,/ 而/ 在/ 数据/ 集/ 当中/ 很少/ 出现/ 的/ 值/ 被/ 分配/ 了/ 较大/ 权重/ (/ 如/ “/ Make/ =/ Buick/ ”/ )/ ;/ 而且/ ,/ 数值/ 型值/ 的/ IDF/ 权重/ 与其/ 本身/ 大小/ 及其/ 所在/ 数据/ 区域/ 的/ 数据分布/ 情况/ 相关/ ,/ 如/ “/ Price/ =/ 12000/ ”/ ,/ CarDB/ 中/ Price/ 属性/ 上/ 与/ 该值/ 大小/ 相近/ 的/ 数值/ 较/ 多/ ,/ 因此/ 它/ 的/ IDF/ 权重/ 相对/ 较/ 小/ ;/ 而/ 对于/ “/ Price/ =/ 30000/ ”/ ,/ CarDB/ 中/ Price/ 属性/ 上/ 与/ 该值/ 大小/ 相近/ 的/ 数值/ 很少/ ,/ 因此/ 它/ 的/ IDF/ 权重/ 相对/ 较大/ ./ 还/ 可/ 看出/ ,/ 数据/ 集中/ 一些/ 常见/ 的/ 分/ 类型/ 值/ 和/ 数值/ 型值/ 的/ IDF/ 权重/ 之间/ 相差/ 不/ 大/ ,/ 这/ 说明/ 数值/ 型值/ 的/ IDF/ 权重/ 评估/ 算法/ 是/ 合理/ 的/ ./ 由此可见/ ,/ 对于/ 分/ 类型/ 值/ 和/ 数值/ 型值/ ,/ 本文/ 所提/ 的/ IDF/ 权重/ 评估/ 算法/ 是/ 合理/ 的/ ./ 此外/ ,/ 还/ 可/ 看到/ ,/ 在/ 不同/ 大小/ (/ 1M/ 、/ 2M/ 和/ 4M/ )/ 的/ 数据/ 集上/ ,/ 每个/ 属性/ 值/ 的/ IDF/ 权重/ 相差/ 不/ 大/ ,/ 因此/ 该/ 算法/ 是/ 稳定/ 的/ ./ 这/ 同时/ 也/ 说明/ ,/ 属性/ 权重/ 评估/ 可以/ 在/ 小/ 样本/ 数据/ 集上/ 进行/ ,/ 因此/ 提高/ 了/ 权重/ 评估/ 算法/ 的/ 效率/ ./ 7.3/ 语义/ 相似/ 度/ 评估/ 算法/ 测试/ 该/ 实验/ 的/ 目的/ 是/ 在/ 不同/ 领域/ 和/ 大小/ 的/ 数据/ 集上/ ,/ 测试/ 分/ 类型/ 值/ 之间/ 的/ 语义/ 相似/ 度/ 评估/ 算法/ 的/ 执行/ 时间/ 、/ 合理性/ 和/ 稳定性/ ./ (/ 1/ )/ 语义/ 相似/ 度/ 评估/ 算法/ 的/ 执行/ 时间/ 在/ HouseDB/ 和/ CarDB/ 数据/ 集上/ ,/ 分别/ 使用/ 2M/ 和/ 4M/ 大小/ 的/ 数据量/ 评估/ 相似/ 度/ 评估/ 算法/ 的/ 执行/ 时间/ ./ 分/ 类型/ 值/ 之间/ 的/ 语义/ 相似/ 度/ 计算所/ 需/ 时间/ 仅/ 依赖于/ 从/ 数据库/ 表中/ 提取/ 的/ 〈/ 属性/ ,/ 值/ 〉/ 个数/ ,/ 时间/ 复杂度/ 为/ O/ (/ mk2/ )/ ,/ 其中/ ,/ m/ 代表/ 分/ 类型/ 属性/ 的/ 个数/ ,/ k/ 代表/ 每个/ 分/ 类型/ 属性/ 所/ 包含/ 的/ 不同/ 属性/ 值/ 个数/ 的/ 平均值/ ./ 表/ 5/ 和表/ 6/ 分别/ 给出/ 了/ 在/ 2M/ 的/ HouseDB/ 数据/ 集/ 和/ 4M/ 的/ CarDB/ 数据/ 集上/ ,/ 对应/ 于/ 不同/ 分/ 类型/ 属性/ 的/ 语义/ 表/ 生成/ 时间/ 和/ 不同/ 分/ 类型/ 值/ 之间/ 的/ 语义/ 相似/ 度/ 计算/ 时间/ ./ 表/ 5HouseDB/ 上/ 的/ 语义/ 表/ 生成/ 和/ 相似/ 度/ 计算/ 时间/ 属性/ 不同/ 分/ 类型/ 值/ CitySchooldistrict287ViewNeighborhood76Totaled/ 表/ 6CarDB/ 上/ 的/ 语义/ 表/ 生成/ 和/ 相似/ 度/ 计算/ 时间/ 属性/ 不同/ 分/ 类型/ 值/ MakeModel328ColorYearEngineTotaled470/ 由于/ HouseDB/ 和/ CarDB/ 中所/ 包含/ 的/ 不同/ 分/ 类型/ 值/ 个数/ 很多/ ,/ 因此/ 相似/ 度/ 评估/ 算法/ 的/ 执行/ 时间/ 较长/ ./ 注意/ ,/ 不同/ 分/ 类型/ 值/ 之间/ 的/ 语义/ 相似/ 度/ 在/ 离线/ 阶段/ 周期性/ 进行/ 计算/ ,/ 因此/ 不会/ 影响/ 在线/ 查询处理/ 速度/ ./ (/ 2/ )/ 相似/ 度/ 评估/ 算法/ 的/ 合理性/ 和/ 稳定性/ 基于/ HouseDB/ 和/ CarDB/ ,/ 表/ 7/ 给出/ 了/ 在/ 不同/ 大小/ 的/ 数据/ 集/ (/ 1M/ 、/ 2M/ 和/ 4M/ )/ 上/ ,/ 分别/ 与/ 分/ 类型/ 值/ “/ Make/ =/ Ford/ ”/ 、/ “/ Model/ =/ Camry/ ”/ 和/ “/ View/ =/ Greenbelt/ ”/ 相似/ 的/ 前/ 3/ 个/ 属性/ 值/ ./ 表/ 7/ 不同/ 大小/ 数据/ 集上/ 的/ 语义/ 相似/ 度/ 计算结果/ 分/ 类型/ 值/ 相似/ 的/ 值/ Make/ =/ Ford/ (/ CarDB/ )/ Model/ =/ Camry/ (/ CarDB/ )/ View/ =/ Greenbelt/ (/ HouseDB/ )/ 从表/ 7/ 可以/ 看出/ ,/ 该/ 算法/ 得到/ 的/ 分/ 类型/ 值/ 之间/ 的/ 语义/ 相似/ 度/ 是/ 合理/ 的/ ./ 例如/ ,/ 对于/ “/ Ford/ ”/ ,/ 属性/ 值/ “/ Honda/ ”/ ,/ “/ Toyota/ ”/ 和/ “/ Nissan/ ”/ 与其/ 相似/ ./ 在/ 现实/ 中/ ,/ 这/ 4/ 种车/ 也/ 是/ 相似/ 的/ ,/ 因为/ 它们/ 在/ 价格/ 、/ 引擎/ 、/ 排量/ 和/ 其他/ 特征/ 等/ 各/ 方面/ 都/ 很/ 接近/ ./ 此外/ ,/ 虽然/ 在/ 1M/ 和/ 2M/ 的/ 数据/ 集上/ 获得/ 的/ 语义/ 相似/ 度/ 低于/ 从/ 4M/ 的/ 数据/ 集上/ 获得/ 的/ 语义/ 相似/ 度/ ,/ 但是/ 两者/ 相差/ 不大/ ./ 因此/ ,/ 该/ 算法/ 是/ 稳定/ 的/ ,/ 也就是说/ 可以/ 在/ 小/ 样本/ 数据/ 集上/ 评估/ 语义/ 相似/ 度/ ,/ 从而/ 提高/ 算法/ 执行/ 效率/ ./ Page117/ ./ 4/ 查询/ 松弛/ 效果/ 测试/ 该/ 实验/ 以/ 用户/ 调查/ 方式/ 测试/ 查询/ 松弛/ 方法/ 的/ 效果/ ./ 邀请/ 了/ 15/ 位/ 测试者/ (/ 分别/ 是/ 教师/ 、/ 公务员/ 、/ 企业管理者/ 、/ 公司/ 职员/ 和/ 学生/ )/ ,/ 每位/ 测试者/ 根据/ 自己/ 的/ 需求/ 和/ 偏好/ ,/ 对/ CarDB/ 和/ HouseDB/ 分别/ 提出/ 各/ 1/ 条/ 测试/ 查询/ ./ 对于/ CarDB/ ,/ 每条/ 查询/ 平均/ 指定/ 了/ 3.2/ 个/ 属性/ ;/ 对于/ HouseDB/ ,/ 每条/ 查询/ 平均/ 指定/ 了/ 3.4/ 个/ 属性/ ./ 每条/ 查询/ 都/ 将/ 导致/ 空/ 或/ 少量/ (/ 不/ 超过/ 10/ 条/ )/ 查询/ 结果/ ./ 由于/ 要求/ 测试者/ 从/ 整个/ 数据/ 集中/ 查找/ 所有/ 与/ 查询/ 相关/ 的/ 元组/ 是/ 不/ 现实/ 的/ ,/ 因此/ 采用/ 了/ 如下/ 策略/ :/ 对于/ HouseDB/ 和/ CarDB/ 上/ 的/ 每个/ 测试/ 查询/ Qi/ ,/ 生成/ 一个/ 相应/ 的/ 数据/ 集/ Hi/ ,/ Hi/ 中/ 包含/ 了/ 30/ 条/ 与/ 该/ 查询/ 相关/ 的/ 和/ 不/ 相关/ 的/ 适当/ 元组/ 组合/ (/ 这些/ 元组/ 组合/ 是/ 通过/ RANDOM/ 、/ AIMQ/ 和/ QRRR/ 方法/ 分别/ 获得/ 的/ 前/ 10/ 条/ 结果/ 元组/ 去掉/ 重复/ 并/ 添加/ 少量/ 随机/ 选择/ 的/ 元组/ 而/ 合成/ 的/ )/ ./ 然后/ ,/ 将/ 所有/ 测试/ 查询/ 和/ 对应/ 的/ 数据/ 集/ 提供/ 给/ 每个/ 测试者/ ,/ 他们/ 的/ 任务/ 就/ 是从/ 数据/ 集/ Hi/ 中/ 标出/ 与/ 测试/ 查询/ Qi/ 最为/ 相关/ 的/ 10/ 条/ 元组/ ./ 在/ 此基础/ 上/ 测试/ 查询/ 松弛/ 方法/ 的/ 效果/ ./ 采用/ 查全率/ 作为/ 查询/ 松弛/ 效果/ 的/ 评价/ 标准/ ,/ 查全率/ 是/ 指/ 查询/ 结果/ 中/ 的/ 相关/ 元组/ 数/ 与/ 数据/ 集中/ 的/ 相关/ 元组/ 总数/ 之/ 比/ ,/ 表示/ 为/ 基于/ CarDB/ 和/ HouseDB/ ,/ 图/ 2/ 分别/ 给出/ 了/ QRRR/ 与/ AIMQ/ 和/ RANDOM/ 在/ 查全率/ 方面/ 的/ 对/ 图/ 2QRRR/ 、/ AIMQ/ 和/ RANDOM/ 方法/ 分别/ 在/ CarDB/ 和/ HouseDB/ 上/ 的/ 查全率/ 对比/ (/ Tsim/ =/ 0.6/ )/ 图/ 3CarDB/ 上/ QRRR/ 和/ AIMQ/ 在/ 不同/ 松弛/ 阈值/ 下/ 的/ 查全率/ 比/ (/ QRRR/ 和/ AIMQ/ 的/ Tsim/ 都/ 设置/ 为/ 0.6/ )/ ./ 可以/ 看出/ ,/ QRRR/ 的/ 查全率/ 始终/ 高于/ AIMQ/ 和/ RANDOM/ ./ 对于/ CarDB/ 数据/ 集/ ,/ QRRR/ 的/ 平均/ 查全率/ 为/ 0.92/ ,/ 而/ AIMQ/ 为/ 0.77/ ;/ 对于/ HouseDB/ 数据/ 集/ ,/ QRRR/ 的/ 平均/ 查全率/ 为/ 0.88/ ,/ 而/ AIMQ/ 为/ 0.74/ ./ 这/ 是因为/ AIMQ/ 在/ 预/ 提取/ 的/ 数据/ 集上/ 利用/ 近似/ 函数/ 依赖/ 关系/ 确定/ 的/ 属性/ 重要/ 程度/ 是/ 一成不变/ 的/ ,/ 不能/ 随着/ 查询/ 要求/ 和/ 用户/ 偏好/ 的/ 变化/ 而/ 变化/ ;/ 实际上/ ,/ 由于/ 用户/ 偏好/ 不同/ ,/ 不同/ 用户/ 对/ 同一/ 属性/ 的/ 重视/ 程度/ 是/ 不同/ 的/ ,/ 并且/ 同一/ 用户/ 在/ 不同/ 查询/ 上下文/ 条件/ 下/ ,/ 对/ 同一/ 属性/ 的/ 重视/ 程度/ 也/ 是/ 不同/ 的/ ./ 相比之下/ ,/ QRRR/ 的/ 属性/ 权重/ 分配/ 能够/ 自/ 适应/ 不同/ 的/ 查询/ 要求/ 和/ 用户/ 偏好/ ,/ 并且/ 属性/ 值/ 之间/ 的/ 语义/ 相似/ 度/ 评估/ 结果/ 也/ 是/ 符合实际/ 的/ ,/ 所以/ QRRR/ 方法/ 在/ 查全率/ 方面/ 优于/ AIMQ/ 方法/ ./ 此外/ ,/ 在/ CarDB/ 和/ HouseDB/ 数据/ 集上/ 分别/ 测试/ 了/ QRRR/ 和/ AIMQ/ 两种/ 方法/ 在/ 不同/ 松弛/ 阈值/ 下/ 的/ 查全率/ ,/ 如图/ 3/ 和/ 图/ 4/ 所示/ ./ 从图/ 3/ 和/ 图/ 4/ 可以/ 看出/ ,/ 松弛/ 阈值/ 越低/ ,/ QRRR/ 和/ AIMQ/ 的/ 查全率/ 越高/ ./ 但/ 该/ 实验/ 的/ 目的/ 主要/ 是/ 为了/ 说明/ 以下/ 两点/ :/ (/ 1/ )/ 在/ 不同/ 的/ 松弛/ 阈值/ 下/ ,/ QRRR/ 的/ 查全率/ 都/ 要/ 高于/ AIMQ/ ;/ (/ 2/ )/ 当/ 松弛/ 阈值/ 接近/ 0.6/ 时/ ,/ QRRR/ 方法/ 的/ 整体/ 查全率/ 趋于稳定/ ,/ 并且/ 平均/ 查全率/ 分别/ 达到/ 0.9/ (/ 对于/ CarDB/ )/ 和/ 0.88/ (/ 对于/ HouseDB/ )/ 以上/ ,/ 从而/ 为/ 松弛/ 阈值/ 的/ 设定/ 提供/ 了/ 一个/ 参考值/ ./ Page12/ 图/ 4HouseDB/ 上/ QRRR/ 和/ AIMQ/ 在/ 不同/ 松弛/ 阈值/ 下/ 的/ 查全率/ 7.5/ 响应/ 时间/ 测试/ 查询/ 松弛/ 处理过程/ 主要/ 包含/ 离线/ 预处理/ 和/ 在线/ 查询处理/ 两个/ 部分/ ./ 离线/ 预处理/ 部分/ 包括/ 两个/ 模块/ :/ 分/ 类型/ 值/ 之间/ 的/ 语义/ 相似/ 度/ 评估/ 模块/ 和/ 属性/ 值/ IDF/ 权重/ 计算/ 模块/ ./ 在线/ 查询处理/ 部分/ 包括/ 三个/ 模块/ :/ 查询/ 松弛/ 重写/ 模块/ 、/ 元组/ 对/ 初始/ 查询/ 的/ 满足/ 程度/ 计算/ 模块/ 和/ 查询/ 结果/ 排序/ 模块/ ./ 查询/ 松弛/ 重写/ 模块/ 的/ 时间/ 复杂度/ 为/ O/ (/ k/ )/ ,/ 其中/ k/ 代表/ 查询/ 指定/ 的/ 属性/ 个数/ ;/ 元组/ 对/ 初始/ 查询/ 的/ 满足/ 程度/ 计算/ 模块/ 的/ 时间/ 复杂度/ 为/ O/ (/ n/ )/ ,/ 其中/ n/ 代表/ 查询/ 结果/ 元组/ 数/ ;/ 查询/ 结果/ 排序/ 模块/ 的/ 时间/ 复杂度/ 为/ O/ (/ nlogn/ )/ ,/ 其中/ n/ 代表/ 查询/ 结果/ 元组/ 数/ ./ 所以/ ,/ 在线/ 查询处理/ 阶段/ 的/ 总体/ 时间/ 复杂度/ 为/ O/ (/ nlogn/ )/ ./ 图/ 5/ 给出/ 了/ 在/ CarDB/ 和/ HouseDB/ 数据/ 集上/ ,/ 查询/ 指定/ 了/ 不同/ 属性/ 个数/ 下/ 的/ 查询/ 松弛/ 重写/ 算法/ 的/ 执行/ 时间/ (/ 取/ 10/ 次/ 查询/ 松弛/ 重写/ 执行/ 时间/ 的/ 平均值/ )/ ./ 测试/ 查询/ 是/ 随机/ 选取/ 的/ ,/ 每个/ 测试/ 查询/ 都/ 同时/ 在/ 分/ 类型/ 属性/ 和/ 数值/ 型/ 属性/ 上/ 指定/ 了/ 基本/ 查询/ 条件/ ./ 图/ 5/ 查询/ 指定/ 了/ 不同/ 属性/ 个数/ 下/ 的/ 查询/ 松弛/ 算法/ 执行/ 时间/ 图/ 5/ 显示/ ,/ 查询/ 松弛/ 重写/ 算法/ 的/ 执行/ 时间/ 随着/ 查询/ 指定/ 属性/ 个数/ 的/ 增多/ 而/ 逐渐/ 增长/ ./ 这/ 是因为/ 当/ 查询/ 指定/ 属性/ 个数/ 增加/ 时/ ,/ 算法/ 需要/ 查找/ 相关/ 数据库/ 表/ (/ 如/ 属性/ 值/ IDF/ 权重/ 表和分/ 类型/ 值/ 相似/ 度表/ )/ 和/ 计算/ 数值/ 型值/ 之间/ 语义/ 相似/ 度/ 的/ 工作量/ 就/ 会/ 增加/ ,/ 因此/ 查询/ 松弛/ 重写/ 所/ 需/ 时间/ 也/ 就/ 相应/ 地/ 有所/ 增长/ ./ 此外/ ,/ 当/ 松弛/ 阈值/ 发生变化/ 时/ ,/ 查询/ 松弛/ 重写/ 算法/ 的/ 执行/ 时间/ 并/ 无/ 明显/ 变化/ ,/ 原因/ 是/ 松弛/ 阈值/ 的/ 变化/ 仅/ 影响/ 查询/ 条件/ 的/ 放松/ 程度/ ,/ 而/ 几乎/ 不/ 影响/ 查询/ 松弛/ 重写/ 算法/ 对/ 相关/ 数据库/ 表/ 的/ 访问/ 代价/ ./ 图/ 6/ 给出/ 了/ 在/ CarDB/ 和/ HouseDB/ 数据/ 集上/ ,/ QRRR/ 方法/ 在/ 不同/ 查询/ 结果/ 元组/ 数下/ 的/ 查询/ 响应/ 时间/ ./ 从图/ 中/ 可以/ 看出/ ,/ QRRR/ 的/ 查询/ 响应/ 时间/ 随着/ 查询/ 结果/ 元组/ 数/ 的/ 增加/ 几乎/ 呈/ 线性/ 增长/ 趋势/ ./ 图/ 6QRRR/ 在/ 不同/ 查询/ 结果/ 元组/ 数下/ 的/ 查询/ 响应/ 时间/ 8/ 结论/ 与/ 展望/ 本文/ 针对/ 数据库/ 空/ (/ 或/ 少量/ )/ 查询/ 结果/ 问题/ ,/ 提出/ 了/ 一种/ 领域/ 和/ 用户/ 独立/ 的/ 自/ 适应/ 查询/ 松弛/ 和/ 结果/ 排序/ 方法/ —/ —/ —/ QRRR/ ./ 该/ 方法/ 首先/ 根据/ 初始/ 查询/ 条件/ 和/ 原始数据/ 分布/ 推测/ 当前/ 用户/ 偏好/ ,/ 据此/ 分配/ 查询/ 指定/ 属性/ 的/ 权重/ ;/ 然后/ ,/ 根据/ 属性/ 值/ 的/ 特征/ 信息/ ,/ 分别/ 对分/ 类型/ 属性/ 值/ 之间/ 和/ 数值/ 型/ 属性/ 值/ 之间/ 的/ 语义/ 相似/ 度/ 进行/ 评估/ ;/ 根据/ 松弛/ 阈值/ 、/ 属性/ 权重/ 和/ 属性/ 值/ 之间/ 的/ 语义/ 相似/ 度/ ,/ 对/ 初始/ 查询/ 进行/ 松弛/ 处理/ ;/ 最后/ ,/ 通过/ 在/ 数据库/ 上/ 执行/ 松弛/ 查询/ 得到/ 近似/ 匹配/ 的/ 查询/ 结果/ ,/ 并/ 将/ 查询/ 结果/ 按/ 其/ 对/ 初始/ 查询/ 的/ 满足/ 程度/ 进行/ 排序/ ./ 在/ 两个/ 不同/ 应用领域/ 的/ 数据/ 集上/ 进行/ 测试/ 的/ 结果表明/ ,/ 提出/ 的/ 属性/ 权重/ 和/ 属性/ 值/ 之间/ 的/ 语义/ 相似/ 度/ 评估/ 方法/ 性能/ 稳定/ 、/ 评估/ 结果/ 合理/ ;/ 小规模/ 的/ 用户/ 调查/ 结果表明/ ,/ QRRR/ 方法/ 具有/ 较/ 高/ 的/ 查全率/ ,/ 返回/ 的/ 相关/ 查询/ 结果/ 能够/ 较/ 好/ 地/ 满足/ 当前/ 用户/ 的/ 需求/ 和/ 偏好/ ./ Page13/ 

