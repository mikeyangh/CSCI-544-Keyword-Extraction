Page1/ 基于/ 任务/ 精确/ 预测/ 的/ 实时/ 功耗/ 温度/ 管理/ 赵国/ 兴/ 1/ )/ 闫佳琪/ 2/ )/ 骆祖莹/ 1/ )/ 1/ )/ (/ 北京师范大学/ 信息科学/ 与/ 技术/ 学院/ 北京/ 100875/ )/ 2/ )/ (/ 伊利诺伊/ 理工大学/ 计算机科学/ 系/ 芝加哥/ 美国/ 60616/ -/ 3793/ )/ 摘要/ 实时/ 功耗/ 温度/ 管理/ (/ DPTM/ )/ 通过/ 对/ 任务/ 的/ 准确/ 预测/ 与/ 合理/ 调度/ ,/ 可以/ 有效/ 降低/ 片上/ 系统/ 的/ 运行/ 能耗/ 与/ 峰值/ 温度/ ./ 为了/ 获得/ 更好/ 的/ DPTM/ 调度/ 效果/ ,/ 文中/ 提出/ 了/ 一种/ 精确/ 的/ 组合式/ 任务/ 预测/ 算法/ 和/ 一种/ 任务调度/ 算法/ VP/ -/ TALK/ ,/ 进而/ 构建/ 了/ 一个/ 完整/ 的/ DPTM/ 原型/ 系统/ ./ 为了/ 对/ 复杂/ 任务/ 进行/ 精确/ 的/ 任务/ 预测/ ,/ 文中/ DPTM/ 系统/ 先/ 将/ 复杂/ 任务/ 按/ 频谱/ 长短/ 分类/ 为/ 随机/ // 周期/ // 趋势/ 3/ 种/ 成分/ ,/ 然后/ 采用/ 灰色/ 模型/ // 傅里叶/ 模型/ // 径向/ 基/ 函数/ (/ RBF/ )/ 神经网络/ 模型/ 分别/ 对/ 这/ 3/ 种/ 成分/ 进行/ 组合分析/ ,/ 以/ 获得/ 精确/ 的/ 预测/ 效果/ ;/ 基于/ 精确/ 预测/ 的/ 任务/ 负载量/ ,/ 文中/ 所/ 提出/ 的/ VP/ -/ TALK/ 算法/ 可以/ 计算/ 出/ 最优/ 电压/ -/ 频率/ 对/ 的/ 理想/ 值/ ,/ 进而/ 选择/ 出/ 两组/ 与/ 理想/ 值/ 相邻/ 的/ 电压/ -/ 频率/ 对/ ,/ 以/ 获得/ 两个/ 现实/ 的/ 工作/ 状态/ ,/ 并/ 考虑/ 核心/ 温度/ 和/ 任务/ 实时性/ 的/ 条件/ ,/ VP/ -/ TALK/ 算法/ 将/ 任务/ 负载/ 分配/ 到/ 这/ 两个/ 工作/ 状态/ ,/ 以/ 获得/ 最优/ 的/ DPTM/ 效果/ ;/ 最后/ 基于/ 机器/ 学习/ 方法/ ,/ 综合/ 4/ 种源/ 算法/ 构建/ 了/ 一套/ 完整/ 的/ DPTM/ 原型/ 系统/ ./ 实验/ 结果表明/ :/ (/ 1/ )/ 文中/ 系统/ 的/ 任务/ 预测/ 组合/ 方法/ 的/ 平均误差/ 仅为/ 2.89/ %/ ;/ (/ 2/ )/ 在/ 相同/ 的/ 设定/ 峰值/ 温度/ 约束/ 下/ ,/ 与/ 已有/ 调度/ 算法/ 的/ 能耗/ 值/ 相比/ ,/ 尽管/ 假设/ 了/ 更为/ 敏感/ 的/ 功率/ -/ 温度/ 影响/ 关系/ ,/ 但/ 对于/ 较/ 高/ 的/ 工作/ 负载/ 率/ ,/ 文中/ 所/ 提出/ 的/ VP/ -/ TALK/ 调度/ 算法/ 仍/ 能够/ 获得/ 平均/ 14.33/ %/ 的/ 能耗/ 降低/ ;/ (/ 3/ )/ 文中/ 所/ 提出/ 的/ DPTM/ 原型/ 系统/ 可以/ 获得/ 接近/ 于/ 理想/ 状态/ 的/ 能耗/ 优化/ 效果/ ./ 关键词/ 实时/ 功耗/ 管理/ ;/ 实时/ 温度/ 管理/ ;/ 任务/ 预测/ ;/ 任务调度/ 1/ 引言/ 当前/ ,/ 面向/ 复杂/ 应用/ 的/ 高性能/ 片上/ 系统/ 为了/ 规避/ 和/ 减轻/ 功耗/ 墙/ (/ powerwall/ )/ 问题/ [/ 1/ ]/ ,/ 必须/ 在/ 芯片/ 运行/ 中/ ,/ 通过/ 合理/ 任务调度/ 来/ 降低/ 芯片/ 的/ 运行/ 能耗/ 和/ 峰值/ 工作温度/ ./ 因此/ ,/ 对/ 芯片/ 进行/ 实时/ 功耗/ 温度/ 管理/ (/ DPTM/ )/ 的/ 算法/ 研究/ 就/ 具有/ 重要/ 的/ 理论意义/ 与/ 广阔/ 的/ 应用/ 前景/ ,/ 这/ 也/ 是/ 目前/ 电子设计/ 自动化/ (/ EDA/ )/ 研究/ 的/ 一个/ 热点问题/ [/ 2/ -/ 7/ ]/ ./ 最初/ 为了/ 降低/ 芯片/ 运行/ 功耗/ 、/ 延长/ 设备/ 电池/ 的/ 使用寿命/ ,/ 研究/ 人员/ 提出/ 了/ 运用/ 动态/ 电压/ 调节/ 技术/ (/ DVS/ )/ 对系统/ 动态/ 功耗/ 进行/ 实时/ 功耗/ 管理/ (/ DPM/ )/ [/ 2/ ,/ 8/ -/ 10/ ]/ ./ 随着/ IC/ 进入/ 纳米/ 工艺/ ,/ 漏/ 电流/ 静态/ 功耗/ 已经/ 超过/ 动态/ 功耗/ ,/ 成为/ 芯片/ 功耗/ 的/ 主要/ 来源/ ,/ 而且/ 漏/ 电流/ 和/ 工作温度/ 之间/ 存在/ 指数/ 关系/ ①/ [/ 11/ -/ 12/ ]/ ,/ 如/ 对于/ 65nm/ 工艺/ ,/ 当/ 温度/ 从/ 60/ 增加/ 到/ 80/ ,/ 芯片/ 漏/ 电流/ 会/ 增加/ 21/ %/ ./ 为此/ ,/ 研究/ 人员/ 开始/ 针对/ 微处理器/ 和/ 大型/ 服务器/ 系统/ 进行/ 实时/ 温度/ 管理/ (/ DTM/ )/ [/ 13/ -/ 15/ ]/ ./ 为了/ 对片/ 上/ 系统/ 进行/ 功耗/ 、/ 温度/ 的/ 统一/ 调度/ 与/ 管理/ ,/ 最近/ 开始/ 出现/ 了/ 实时/ 功耗/ 温度/ 管理/ (/ DPTM/ )/ 的/ 研究/ 报道/ [/ 4/ -/ 7/ ,/ 16/ ]/ ,/ 在/ 考虑/ 漏/ 电流/ 、/ 温度/ 相互作用/ 关系/ 和/ 实时/ 任务/ 的/ 时间/ 限制/ 这/ 两个/ 前提/ 下/ ,/ 采用/ 不同/ 的/ DPTM/ 策略/ 来/ 达到/ 最小化/ 运行/ 能耗/ 的/ 目的/ ./ 在/ DPTM/ 研究/ 中/ ,/ 为了/ 提高/ DPTM/ 系统/ 的/ 降温/ 降耗/ 效果/ ,/ 必须/ 对系统/ 的/ 任务/ 负载/ 进行/ 精确/ 地/ 预测/ [/ 4/ -/ 7/ ,/ 13/ -/ 16/ ]/ ,/ 事实上/ ,/ 任务/ 负载/ 的/ 轻重/ 决定/ 了/ 不同/ 方法/ 的/ DPTM/ 效果/ [/ 4/ -/ 7/ ,/ 16/ ]/ ./ 目前/ ,/ 任务/ 预测/ 分为/ 在线/ 预测/ 与/ 离线/ 预测/ 两类/ ,/ 其中/ 在线/ 预测/ 的/ 速度/ 快/ 但/ 精度/ 差/ ,/ 而/ 离线/ 预测/ 的/ 速度慢/ 但/ 精度高/ ./ 为了/ 构建/ 一个/ 高效/ 的/ DPTM/ 系统/ ,/ 本文/ 不仅/ 提出/ 了/ 一种/ 具有/ 高精度/ 的/ 组合式/ 任务/ 预测/ 方法/ ,/ 而且/ 还/ 提出/ 一种/ 新/ 的/ DPTM/ 任务调度/ 算法/ VP/ -/ TALK/ ,/ 并/ 进一步/ 集成/ 了/ 一个/ 基于/ 负载/ 预测/ 的/ DPTM/ 原型/ 系统/ ,/ 该/ 系统/ 主要/ 包括/ 工作/ 负载/ 预测/ 、/ 任务/ 实时/ 调度/ 两大/ 模块/ :/ (/ 1/ )/ 基于/ 组合/ 任务/ 预测/ 方法/ 的/ 负载/ 预测/ 模块/ ./ 根据/ 频率/ 范围/ ,/ 先/ 将/ 对应/ 于/ 复杂/ 应用/ 的/ 任务/ 分为/ 随机/ // 周期/ // 趋势/ 3/ 种/ 组分/ ,/ 然后/ 采用/ 灰色/ 模型/ // 傅里叶/ 模型/ // RBF/ 神经网络/ 模型/ 分别/ 对/ 这/ 3/ 种/ 组分/ 进行/ 精确/ 分析/ ,/ 最后/ 将/ 3/ 部分/ 预测/ 结果/ 合成/ 为/ 复杂/ 任务/ 的/ 预测值/ ./ (/ 2/ )/ 基于/ 多种/ 调度/ 算法/ 的/ 实时/ 调度/ 模块/ ./ 先/ 根据/ 对/ 工作/ 负载/ 率/ 的/ 精确/ 预测值/ 计算/ 出/ 最优/ 工作/ 状态/ 的/ 电压/ // 频率/ 理想/ 值/ ,/ 再/ 从/ 系统/ 的/ 电压/ // 频率/ 对/ 的/ 实际/ 设定值/ 中/ 选取/ 相邻/ 的/ 两个/ 工作/ 状态/ ,/ 最后/ 考虑/ 系统/ 实时性/ 、/ 温度/ 上限/ 限制/ 、/ 静态/ 功耗/ 与/ 温度/ 的/ 敏感/ 关系/ 以及/ 芯片/ 模式/ 切换/ 代价/ 等/ 多种/ 因素/ ,/ 利用/ 机器/ 学习/ 的/ 方法/ ,/ 选择/ 一种/ 最优/ 的/ 调度/ 策略/ ./ 大量/ 的/ 模拟实验/ 表明/ :/ (/ 1/ )/ 在/ 负载/ 预测/ 方面/ ,/ 本文/ DPTM/ 系统/ 所/ 采用/ 的/ 组合/ 任务/ 预测/ 方法/ 胜过/ 众多/ 的/ 相关/ 模型/ 及/ 算法/ ,/ 平均误差/ 仅为/ 2.89/ %/ ;/ (/ 2/ )/ 在/ 节能/ 效果/ 方面/ ,/ 当/ 负载/ 率/ 高于/ 55/ %/ 时/ ,/ 基于/ 相同/ 的/ 峰值/ 温度/ 约束/ ,/ 本文/ 所/ 提出/ 的/ VP/ -/ TALK/ 算法/ 分别/ 比/ Pattern/ -/ based/ 、/ M/ -/ oscillating/ 和/ TALK/ 对比/ 算法/ 节能/ 约/ 20.5/ %/ 、/ 11.0/ %/ 、/ 11.5/ %/ ;/ (/ 3/ )/ 本文/ DPTM/ 原型/ 系统/ 的/ 调度/ 效果/ 接近/ 于/ 理想/ 调度/ 效果/ ./ 本文/ 第/ 2/ 节/ 论述/ 本文/ 研究所/ 使用/ 的/ 系统/ 模型/ 与/ 功耗/ -/ 温度/ 模型/ ;/ 第/ 3/ 节/ 简单/ 讨论/ 若干种/ 已有/ 调度/ 算法/ 的/ 优缺点/ ;/ 第/ 4/ 节/ 介绍/ 本文/ 所/ 提出/ 的/ VP/ -/ TALK/ 算法/ 调度/ ;/ 第/ 5/ 节/ 介绍/ 本文/ 所/ 提出/ DPTM/ 原型/ 系统/ ;/ 第/ 6/ 节/ 介绍/ 基于/ 组合/ 模型/ 的/ 工作/ 负载/ 预测/ 模块/ ;/ 第/ 7/ 节/ 给出/ 大量/ 实验/ 验证/ 数据/ ;/ 最后/ 给出/ 结论/ ./ ①/ http/ :/ // // www/ ./ device/ ./ EECS/ ./ Berkeley/ ./ edu/ // bsim3/ // Page32/ 研究/ 模型/ 2.1/ 实时/ 系统/ 的/ 工作/ 负载/ 模型/ 本文/ 讨论/ 的/ 实时/ 系统/ 可以/ 周期性地/ 分配/ 一段时间/ D/ 作为/ 执行/ 某一/ 任务/ 的/ 截止/ 时间/ ,/ 该/ 任务/ 在/ 最坏/ 情况/ 下/ 所/ 需要/ 的/ 执行/ 时间/ 为/ W/ ./ 不失/ 一般性/ ,/ 我们/ 假设/ 任务/ 的/ 截止/ 时间/ 等于/ 系统/ 周期性/ 分配/ 的/ 时间/ 片/ ,/ 并且/ 等价/ 地/ 只/ 考虑/ 一个/ 周期/ 内/ 的/ 任务/ ./ 文献/ [/ 17/ -/ 18/ ]/ 根据/ 任务/ 的/ 性质/ 研究/ 了/ 如何/ 决定/ (/ D/ ,/ W/ )/ 数据/ 对/ 的/ 值/ ./ 本文/ 中/ ,/ 由于/ 可以/ 预测出/ 发送至/ 实时/ 系统/ 的/ 数据量/ ,/ 工作/ 负荷/ 便/ 可以/ 被/ 认为/ 是/ 网络流量/ 的/ 归一化/ 形式/ ./ 2.2/ 实时/ 系统/ 的/ 热/ 分析模型/ 为了/ 研究/ 处理器/ 内核/ (/ die/ )/ 的/ 热传导/ 特性/ ,/ 文献/ [/ 19/ ]/ 采用/ 了/ 等效/ RC/ 电路/ 方法/ 进行/ 热/ 分析/ 建模/ ./ 该/ 模型/ 采用/ 如下/ 公式/ 进行/ 工作温度/ 的/ 求解/ :/ f/ =/ Vdd/ -/ V/ (/ )/ t/ μ/ 由于/ 与/ 工作电压/ 成正比/ ,/ 我们/ 可以/ 得到/ 动态/ 功耗/ 的/ 计算公式/ 为/ 通过/ HSPICE/ 软件/ 进行/ 曲线拟合/ ,/ 与/ 温度/ 、/ 电压/ 相关/ 的/ 漏/ 电流/ 可写/ 为/ Ileakage/ =/ I/ (/ V0/ ,/ T0/ )/ (/ AT2e/ α/ Vdd/ +/ β/ 式/ 中/ ,/ A/ ,/ B/ ,/ α/ ,/ β/ ,/ γ/ ,/ δ/ ,/ μ/ ,/ η/ 是/ 经验/ 参数/ ,/ 由/ 生产工艺/ 所/ 决定/ (/ 本文/ 的/ 模拟实验/ 默认/ 选择/ 采用/ 65nm/ 的/ 工艺/ 参数/ )/ ./ 当/ 工作温度/ T/ 在/ 300K/ ~/ 380K/ 的/ 正常/ 范围/ 内/ 变化/ 时/ ,/ e1/ 献/ [/ 4/ ]/ 通过/ 引入/ 两个/ 参考/ 温度/ TH/ 和/ TL/ 进一步/ 将/ 漏/ 电流/ 简化/ 为/ 温度/ 的/ 二次/ 函数/ ./ 于是/ ,/ 与/ 漏/ 电流/ 相关/ dTdt/ =/ P/ 式/ 中/ ,/ T/ 和/ Tamb/ 分别/ 代表/ 芯片/ 的/ 温度/ 与/ 环境温度/ ,/ P/ 代表/ 时间/ t/ 时/ 芯片/ 的/ 功耗/ ,/ Rth/ 、/ Cth/ 分别/ 为/ 等效/ 热阻/ 与/ 等效/ 热容/ ./ 2.3/ 实时/ 系统/ 的/ 功耗/ 分析模型/ 处理器/ 的/ 系统/ 状态/ 可以/ 分为/ 工作/ 状态/ 和/ 休眠状态/ ./ 只有/ 在/ 工作/ 状态/ 下/ 处理器/ 才/ 执行/ 任务/ ;/ 否则/ ,/ 处理器/ 将/ 进入/ 休眠状态/ 以/ 减少/ 功耗/ 并/ 降低/ 自身/ 温度/ ./ 工作/ 状态/ 下/ 的/ 功耗/ :/ 式/ 中/ 的/ 第/ 1/ 项/ 代表/ 动态/ 功耗/ ,/ 第/ 2/ 项/ 代表/ 静态/ 功耗/ ./ 当/ 给定/ 供电/ 电压/ Vdd/ 后/ ,/ 工作频率/ f/ 为/ 的/ 静态/ 功耗/ 可以/ 用下式/ 计算/ :/ 其中/ ,/ A/ ^/ =/ Ileakage/ (/ TH/ ,/ Vdd/ )/ -/ Ileakage/ (/ TL/ ,/ Vdd/ )/ B/ ^/ =/ Ileakage/ (/ TL/ ,/ Vdd/ )/ -/ A/ ^/ ×/ TL2/ 此外/ ,/ 处理器/ 的/ 工作/ 状态/ 切换/ 是/ 通过/ 改变/ 工作电压/ 来/ 实现/ 的/ ,/ 状态/ 切换/ 所/ 带来/ 的/ 开销/ 包括/ 能耗/ 开销/ pr/ 与/ 延时/ 开销/ cr/ 大/ ,/ 其/ 能耗/ 和/ 时间/ 的/ 开销/ 也/ 就/ 越/ 大/ ./ 3/ 已有/ 的/ DPTM/ 调度/ 算法/ 3.1/ TALK/ 算法/ TALK/ 及其/ 改进/ 算法/ [/ 16/ ]/ 根据/ 工作/ 负载/ 和/ 截止/ 时间/ 的/ 不同/ ,/ 来/ 控制/ 不同/ 时间段/ 处理器/ 的/ 工作/ // 休息/ 状态/ :/ 当/ 负载量/ 大/ 并且/ 温度/ 较/ 低时/ ,/ 处理器/ 处于/ 激活/ 工作/ 状态/ ;/ 当/ 负载量/ 小/ 并且/ 温度/ 较/ 高时/ ,/ 处理器/ 切换/ 到/ 睡眠/ 状态/ 以/ 减小/ 能耗/ ,/ 降低/ 温度/ ./ 3.2/ Pattern/ -/ Based/ 算法/ (/ 简称/ PB/ 算法/ )/ PB/ 算法/ 将/ 任务/ 的/ 截止/ 时间/ 或者/ 运行/ 周期/ D/ 等/ 分为/ n/ 个/ 时间/ 片段/ ,/ 每/ 段长/ Δ/ =/ D/ // n/ ,/ 采用/ PB/ 算法/ 的/ 处理器/ 将/ 工作/ 于/ 特定/ 规则/ 的/ 模式/ 中/ [/ 4/ ]/ :/ 执行/ Δ/ ×/ W/ // n/ 时间/ 后/ 便/ 切入/ 休眠/ 模式/ ,/ 以/ 减少/ 功耗/ 并/ 降低/ 温度/ ./ 文献/ [/ 4/ ,/ 19/ ]/ 证明/ ,/ 如果/ 重复/ 这种/ 运行/ 模式/ 足够/ 多次/ ,/ 处理器/ 将/ 达到/ 温度/ 的/ 平衡/ 值/ ,/ 并/ 进入/ 稳定/ 状态/ ,/ 即/ 每个/ 周期/ 的/ 初始/ 温度/ 和/ 结束/ 温度/ 将/ 趋向于/ 稳定/ 值/ ,/ 以便/ 于/ 分析/ ./ 3.3/ M/ -/ Oscillating/ 算法/ (/ 简称/ MO/ 算法/ )/ 上面/ 介绍/ 的/ TALK/ 算法/ 和/ PB/ 算法/ 都/ 要求/ 处理器/ 的/ 工作/ 速度/ 大于/ 或者/ 等于/ 负载/ 率/ W/ // D/ ./ 文献/ [/ 18/ ]/ 证明/ ,/ 如果/ 采用/ 两个/ 最/ 接近/ 的/ 速度/ 完成/ 分配/ 给/ 处理器/ 的/ 任务/ ,/ 那么/ 相对/ 于/ 采用/ 其他/ 的/ 工作/ 速度/ 组合/ ,/ 处于/ 该/ 速度/ 组下/ 处理器/ 的/ 温度/ 是/ 最优/ 的/ ./ 如果/ 进一步/ 地/ 将/ 这种/ 两步/ 策略/ 应用/ 在/ m/ 个/ 时间/ 片中/ ,/ 不仅/ 温度/ 可以/ 进一步/ 优化/ ,/ 还/ 可以/ 将/ D/ 时间/ 内/ 的/ 总/ 功耗/ 表达/ 为/ m/ 的/ 函数/ ,/ 而且/ 必然/ 存在/ 能耗/ 最小化/ 的/ m/ 值/ [/ 6/ ]/ ./ 由于/ 要/ 考虑/ 电压/ 切换/ 所/ 付出/ 的/ 时间/ 开销/ 和/ 能耗/ 开销/ ,/ 文献/ [/ 6/ ]/ 给出/ 了/ m/ 所/ 具有/ 确定/ 的/ 上/ 限值/ Ceil/ ./ 3.4/ 对/ 已有/ 算法/ 的/ 评估/ 作为/ 温敏/ 调度/ 算法/ ,/ TALK/ 参照/ 剩余/ 任务量/ 与/ 当前/ 温度/ 来/ 合理/ 地/ 调度/ 任务/ ./ 然而/ ,/ 简单/ 的/ 开关/ 模式/ 无法/ 利用/ DVS/ 技术/ ,/ 只能/ 工作/ 在/ 固定/ 速度/ ./ 而且/ 状/ Page4/ 态/ 切换/ 所/ 导致/ 的/ 时间/ 、/ 能耗/ 开销/ 也/ 是/ 不可避免/ 的/ ./ 根据/ 切换/ 时间/ 和/ 能耗/ 开销/ [/ 5/ ]/ ,/ 从/ 全速/ 工作/ 转变/ 为/ 零/ 电压/ 将/ 产生/ 最大/ 的/ 能耗/ 和/ 时间/ 开销/ ./ 无论/ 采用/ TALK/ 还是/ PB/ 算法/ ,/ 都/ 要求/ 处理器/ 工作/ 在/ 大于/ W/ // D/ 的/ 速度/ 上/ ./ 大多数/ 具有/ DVS/ 或/ DVFS/ 功能/ 的/ 实时/ 系统/ 通常/ 只/ 允许/ 芯片/ 的/ 电压/ 为/ 若干/ 离散/ 值/ ,/ 根据/ 负载/ 率来/ 调整/ 电压/ 工作/ 档/ ./ 这/ 往往/ 会/ 导致/ 芯片/ 实际/ 工作/ 在/ 高于/ 任务/ 所/ 需/ 的/ 速度/ ,/ 不仅/ 增加/ 了/ 近似/ 与/ 电压/ 三次方/ 成正比/ 的/ 动态/ 功耗/ 和/ 与/ 电压/ 近似/ 成正比/ 的/ 静态/ 功耗/ ,/ 而且/ 加速/ 了/ 温度/ 的/ 攀升/ ,/ 抬高/ 了/ 平衡态/ 时/ 的/ 温度/ ,/ 进一步/ 导致/ 漏/ 电流/ 近似/ 平方/ 速度/ 的/ 增长/ ./ Quan/ 等/ 人/ [/ 6/ ]/ 提出/ 的/ MO/ 算法/ 存在/ 两个/ 主要/ 缺陷/ ./ 首先/ ,/ 假设/ 功率/ 为/ 温度/ 的/ 线性/ 函数/ ,/ 使得/ 峰值/ 温度/ 较/ PB/ 算法/ 有/ 很大/ 降低/ ./ 其次/ 是/ 在/ 实际/ 应用/ 中/ 不能/ 忽略/ 低/ 工作/ 负载/ 率/ 情况/ :/ 当/ W/ // D/ 小于/ 处理器/ 支持/ 的/ 最低/ 工作/ 速度/ 时/ ,/ MO/ 算法/ 只能/ 退化/ 为/ PB/ 算法/ ,/ 以/ 防止/ 不必要/ 的/ 功耗/ 增加/ ./ 4/ 基于/ 电压/ 预测/ 的/ TALK/ 算法/ :/ VP/ -/ TALK/ 根据/ 我们/ 在/ DPTM/ 领域/ 的/ 研究/ 经验/ ,/ 可以/ 获得/ 如下/ 几点/ 关于/ DPTM/ 改进/ 的/ 经验/ 准则/ :/ (/ 1/ )/ 必须/ 考虑/ 温度/ 对/ 静态/ 功耗/ 的/ 影响/ ./ 本文/ 将/ 功耗/ 定为/ 温度/ 的/ 二次/ 函数/ ./ 在/ 温度/ 限制/ 下/ ,/ DPTM/ 系统/ 最好/ 具有/ 温敏/ 调控/ 功能/ ./ (/ 2/ )/ 如果/ 能够/ 准确/ 预测/ 负载量/ ,/ 确定/ 任务/ 所/ 需/ 的/ 工作频率/ 或者/ 工作电压/ ,/ 就/ 可以/ 提前/ 调度/ ,/ 更好/ 地/ 满足/ 实时性/ ./ (/ 3/ )/ 芯片/ 电压/ 选取/ ./ 由于/ 工作电压/ 决定/ 了/ 运行/ 速度/ ,/ 应该/ 采用/ MO/ 的/ 电压/ 选取/ 方法/ ,/ 即使/ 得/ 芯片/ 运行/ 速度/ 刚好/ 满足/ 工作/ 负载/ 的/ 需求/ ,/ 以/ 最大/ 程度/ 地/ 利用/ DVFS/ 技术/ 来/ 降低/ 能耗/ ./ (/ 4/ )/ 调度/ 过程/ 中/ ,/ 必须/ 考虑/ 电压/ 切换/ (/ 状态/ 切换/ )/ 所/ 带来/ 的/ 额外/ 能耗/ 、/ 时间/ 开销/ ./ 基于/ 以上/ 观察/ ,/ 我们/ 提出/ 一种/ 改良/ 后/ 的/ TALK/ 算法/ ,/ 即/ 具有/ 电压/ 选择/ 的/ TALK/ 算法/ ,/ 本文/ 称为/ VP/ -/ TALK/ ,/ 其/ 算法/ 流程图/ 如图/ 1/ 所示/ ./ 与/ MO/ 相似/ ,/ VP/ -/ TALK/ 首先/ 需要/ 假设/ 电压/ 可以/ 连续/ 调节/ ,/ 以/ 获得/ 理论/ 上/ 的/ 最优/ 工作/ 速度/ Scon/ ./ 在/ Scon/ / LS/ (/ 芯片/ 最低/ 工作/ 速度/ )/ 时/ ,/ VP/ -/ TALK/ 等同于/ 原始/ 的/ TALK/ 算法/ ./ 在/ Scon/ >/ LS/ 时/ ,/ 该/ 算法/ 选用/ 两档/ 邻接/ 的/ 速度/ S1/ 和/ S2/ ,/ 使得/ S1/ / Scon/ </ S2/ ./ 不同于/ MO/ 的/ 等/ 分/ M/ 段时间/ 段/ ,/ VP/ -/ TALK/ 采用/ 更/ 灵活/ 的/ 、/ 电压可调/ 的/ 温敏/ TALK/ 来/ 对/ 每/ 一小/ 段/ 的/ 工作/ 状态/ 进行/ 调度/ ./ 由于/ M/ 的/ 数量/ 由/ 切换/ 工作/ 状态/ 的/ 代价/ 和/ 任务/ 的/ 实时性/ 所/ 限制/ ,/ 其上/ 下限/ 分别/ 记为/ Ceil/ 和/ Floor/ [/ 16/ ]/ ./ VP/ -/ TALK/ 的/ 应用/ 前提/ 是/ 假设/ 我们/ 已经/ 通过/ 某种/ 预测/ 方法/ 预测出/ 了/ 任务/ 负载量/ ,/ 从而/ 在/ 任务/ 到达/ 前/ 调度/ 就/ 已经/ 开始/ ,/ 所以/ 认为/ 是/ 实时性/ 的/ ./ 5DPTM/ 原型/ 系统/ 5.1/ 启发性/ 示例/ 在/ 之前/ 的/ 分析/ 中/ ,/ 我们/ 已经/ 指出/ ,/ 较/ 轻/ 工作/ 负载/ 时/ 的/ MO/ 必然/ 要/ 退化/ 至/ PB/ 的/ 方法/ ,/ 这/ 是因为/ 当/ 工作/ 所/ 需/ 电压/ 低于/ 可选/ 的/ 最小/ 电压/ 值时/ ,/ MO/ 中/ 阶梯/ 型/ 工作电压/ 策略/ 无法/ 通过/ 逼近/ 最优/ 工作电压/ 的/ 方式/ 节省/ 动态/ 功耗/ ./ 为了/ 探究/ 工作量/ 与/ 最优/ 调度/ 算法/ 之间/ 的/ 关系/ ,/ 我们/ 设定/ 任务/ 长度/ 为/ 10s/ ,/ 并/ 考虑/ 比/ Page5/ 文献/ [/ 16/ ]/ 更强/ 的/ 温度/ 对漏/ 电流/ 影响/ ,/ 我们/ 在/ 工作/ 负载/ 率/ 全区/ 间/ (/ 10/ %/ ~/ 95/ %/ )/ 范围/ 内/ ,/ 对/ TALK/ 、/ PB/ 与/ MO/ 这/ 3/ 种/ 已有/ 调度/ 源/ 算法/ 的/ 调度/ 效果/ 进行/ 了/ 考察/ ./ 图/ 2/ 给出/ 了/ 能耗/ 的/ 数据/ ,/ 图/ 3/ 给出/ 了/ 温度/ 数据/ ./ 图/ 2/ 不同/ 负载/ 率下/ 已有/ 调度/ 算法/ 的/ 能耗/ 比较/ 图/ 3/ 不同/ 负载/ 率下/ 已有/ 调度/ 算法/ 的/ 温度/ 比较/ 我们/ 可以/ 得出/ 如下/ 结论/ :/ (/ 1/ )/ 当/ 工作/ 负载/ 率/ (/ W/ // D/ )/ 低于/ 50/ %/ (/ 近似值/ )/ 时/ ,/ 3/ 种源/ 算法/ 的/ 峰值/ 温度/ 低于/ 310K/ (/ 37/ )/ ,/ 峰值/ 温度/ 对系统/ 的/ 性能/ 与/ 可靠性/ 没有/ 影响/ ;/ 在/ 系统/ 能耗/ 方面/ ,/ PB/ 算法/ (/ 也/ 即/ MO/ 算法/ )/ 的/ 调度/ 效果/ 要/ 胜过/ TALK/ 算法/ ./ 因此/ ,/ PB/ 算法/ 具有/ 最佳/ 的/ 调度/ 效果/ ./ (/ 2/ )/ 当/ 工作/ 负载/ 率/ (/ W/ // D/ )/ 处于/ 50/ %/ ~/ 70/ %/ 区段/ (/ 近似值/ )/ 时/ ,/ 3/ 种源/ 算法/ 的/ 峰值/ 温度/ 低于/ 320K/ (/ 47/ )/ ,/ 峰值/ 温度/ 对系统/ 的/ 性能/ 与/ 可靠性/ 也/ 没有/ 影响/ ;/ 在/ 系统/ 能耗/ 方面/ ,/ TALK/ 算法/ 的/ 调度/ 效果/ 要/ 胜过/ PB/ 和/ MO/ 算法/ ./ 因此/ ,/ TALK/ 算法/ 具有/ 最佳/ 的/ 调度/ 效果/ ./ (/ 3/ )/ 当/ 工作/ 负载/ 率/ (/ W/ // D/ )/ 大于/ 70/ %/ (/ 近似值/ )/ 时/ ,/ 3/ 种源/ 算法/ 的/ 峰值/ 温度/ 高于/ 320K/ (/ 47/ )/ ,/ 最高/ 可/ 超过/ 380K/ (/ 107/ )/ ,/ 峰值/ 温度/ 对系统/ 的/ 性能/ 与/ 可靠性/ 具有/ 明显/ 影响/ ,/ 其中/ MO/ 算法/ 具有/ 最低/ 的/ 峰值/ 温度/ ;/ 在/ 系统/ 能耗/ 方面/ ,/ MO/ 算法/ 的/ 调度/ 效果/ 要/ 明显/ 胜过/ 其他/ 两种/ 源/ 算法/ ,/ MO/ 算法/ 具有/ 最佳/ 的/ 调度/ 效果/ ./ 由此可见/ ,/ 最优/ 的/ DPTM/ 调度/ 算法/ 与/ 工作/ 负载/ 率有/ 直接/ 关系/ ./ 我们/ 将/ 以此/ 关系/ 作为/ 理论/ 基础/ ,/ 用于/ DPTM/ 调度/ 原型/ 系统/ 的/ 构建/ ,/ 即/ 根据/ 对/ 实时/ 系统/ 工作/ 负荷/ 的/ 精确/ 预测/ 结果/ ,/ 来/ 选择/ 效果/ 最佳/ 的/ 调度/ 算法/ ,/ 并/ 对/ DPTM/ 调度/ 效果/ 进行/ 评价/ ./ 5.2/ 基于/ 机器/ 学习/ 的/ DPTM/ 原型/ 系统/ 根据/ 调度/ 算法/ 性能/ 与/ 工作/ 负载/ 大小/ 相关/ 的/ 观察/ ,/ 我们/ 提出/ 了/ 基于/ 工作/ 负载/ 预测/ 结果/ 来/ 选择/ DPTM/ 调度/ 算法/ 的/ 调度/ 策略/ ,/ 并/ 以此/ 构建/ 了/ 本文/ 的/ DPTM/ 原型/ 系统/ ,/ 整个/ 系统/ 由/ 工作/ 负载/ 预测/ 、/ 调度/ 策略/ 选择/ 和/ 调度/ 策略/ 评价/ 三大/ 模块/ 组成/ ,/ 其/ 具体/ 的/ 架构/ 及其/ 工作/ 原理/ 如图/ 4/ 所示/ ./ 在/ 该/ 系统/ 工作/ 中/ ,/ 其三/ 大/ 模块/ 主要/ 完成/ 如下/ 功能/ :/ (/ 1/ )/ 工作/ 负载/ 预测/ 模块/ ./ 我们/ 根据/ 负载/ 变化/ 周期/ 的/ 长短/ ,/ 提出/ 了/ 一种/ 组合式/ 的/ 负载/ 预测/ 方法/ ,/ 采用/ 多种不同/ 拟合/ 方法/ 来/ 分别/ 对/ 任务/ 的/ 不同/ 物理/ 意义/ 成分/ 进行/ 精确/ 预测/ ,/ 以/ 获得/ 对/ 复杂/ 任务/ 的/ 精确/ 预测/ ;/ (/ 2/ )/ 调度/ 策略/ 选择/ 模块/ ./ 我们/ 综合/ 考虑/ 实时/ 完成/ 任务/ 、/ 温度/ 上限/ 、/ 能耗/ 最小化/ 、/ 漏/ 电流/ 与/ 温度/ 相关/ 以及/ 芯片/ 模式/ 切换/ 代价/ 等/ 多种/ 因素/ ,/ 选用/ 不同/ 的/ 任务调度/ 策略/ ;/ (/ 3/ )/ 调度/ 策略/ 评价/ 模块/ ./ 对/ 每种/ 策略/ 的/ 系统/ 能耗/ 与/ 峰值/ 温度/ 进行/ 评价/ ,/ 并/ 将/ 其/ 作为/ DPTM/ 系统/ 的/ 反馈/ 量/ ,/ 供/ 调度/ 策略/ 选择/ 模块/ 参考/ ./ 5.2/ ./ 1DPTM/ 系统/ 的/ 机器/ 学习/ 方法/ 调度/ 策略/ 选择/ 的/ 学习/ 主要/ 通过/ 后期/ 性能/ 评价/ 的/ 评/ 价值/ 完成/ ./ 假设/ 存在/ N/ 类/ DPTM/ ,/ 编号/ 为/ 1/ ,/ 2/ ,/ …/ ,/ N/ ./ 它们/ 在/ 某/ 一/ 时刻/ t/ 的/ 得分/ 或者/ 权重/ 为/ wt/ =/ (/ w1t/ ,/ w2t/ ,/ w3t/ ,/ …/ ,/ wNt/ )/ ,/ 对/ 其中/ 任/ 一个/ 权重/ 分量/ wkt/ 可以/ 采用/ 下/ 式/ 进行/ 计算/ 式/ 中/ ,/ Ei/ ,/ j/ 代表/ 芯片/ 使用/ 第/ i/ 类/ DPTM/ 在/ 时刻/ j/ 的/ Page6/ 负载/ 情况/ 下/ 消耗/ 的/ 能量/ ,/ λ/ j/ 为/ 一/ 可/ 调整/ 的/ 参数/ ,/ 代表/ 时刻/ j/ 的/ 能耗/ 情况/ 对/ 决策/ 的/ 影响/ 程度/ ,/ t0/ 是/ 可以/ 变动/ 的/ 初始值/ ,/ 它/ 的/ 取值/ 意味着/ 选取/ 从/ 何时/ 开始/ 的/ 能耗/ 情况/ 作为/ 以后/ 决策/ 的/ 参考/ ./ 在/ 预测出/ 工作/ 负荷/ 值后/ ,/ 则/ 开始/ 进行/ 决策/ :/ 式/ 中/ ,/ DPTMt/ 为/ t/ 时刻/ 选择/ 出/ 的/ 动态/ 功耗/ 温度/ 调度/ 策略/ ./ 考虑/ 到/ 温度/ 上/ 的/ 限制/ ,/ 我们/ 需要/ 考察/ 所选/ 的/ 调度/ 源/ 算法/ 是否/ 会/ 超过/ 温度/ 上限/ ./ 如果/ 能耗/ 的/ 节约/ 是/ 在/ 很/ 高/ 的/ 峰值/ 温度/ 的/ 代价/ 下/ 换取/ 的/ ,/ 我们/ 将/ 放弃/ 该源/ 算法/ ,/ 而/ 选择/ 次优/ 的/ 但是/ 有/ 较/ 低/ 峰值/ 温度/ 的/ 调度/ 源/ 算法/ ./ 与/ 3/ 种/ 已有/ 源/ 算法/ 和/ 本文/ 提出/ 的/ VP/ -/ TALK/ 算法/ 相比/ ,/ 本文/ DPTM/ 系统/ 的/ 主要/ 扩展/ 改进/ 点/ 在于/ :/ 具有/ 高精度/ 的/ 任务/ 预测/ 模块/ ,/ 为/ 根据/ 负载量/ 而/ 进行/ 的/ 策略/ 选择/ 提供/ 前提/ 基础/ ;/ 通过/ 基于/ 调度/ 效果/ 评价/ 的/ 机器/ 学习/ ,/ 自/ 适应/ 地/ 根据/ 负载量/ 的/ 轻重/ 选择/ 调度/ 策略/ ./ 5.3/ 基于/ 单一/ 调度/ 策略/ 的/ DPTM/ 原型/ 系统/ 值得一提的是/ ,/ 如果/ 我们/ 选定/ 某/ 一种/ 调度/ 策略/ ,/ 省略/ 机器/ 学习/ 模块/ ,/ 就/ 构成/ 了/ 基于/ 单一/ 调度/ 策略/ 的/ DPTM/ 原型/ 系统/ ./ 在/ 该/ DPTM/ 原型/ 系统/ 中/ ,/ 输入量/ 为/ 任务/ 负载/ 的/ 历史/ 值/ ,/ 通过/ 这些/ 历史/ 值/ ,/ 利用/ 第/ 6/ 节/ 所述/ 的/ 任务/ 负载/ 预测/ 模型/ ,/ 可以/ 得到/ 对于/ 下/ 一/ 时刻/ 任务量/ 的/ 预测值/ ./ 进而/ ,/ 可以/ 确定/ 完成/ 预测/ 任务/ 值/ 所/ 需要/ 的/ 芯片/ 电压/ 或者/ 频率/ ,/ 并/ 利用/ 上文/ 所述/ 的/ 某/ 一种/ 算法/ 进行/ 调度/ ./ 不论是/ 基于/ 机器/ 学习/ 的/ DPTM/ 系统/ ,/ 还是/ 基于/ 单一/ 调度/ 策略/ 的/ DPTM/ 系统/ ,/ 都/ 要求/ 提前/ 预知/ 任务/ 负载/ 的/ 大小/ ./ 因此/ 下/ 一节/ 中/ ,/ 本文/ 将/ 提出/ 一种/ 全新/ 的/ 组合式/ 任务/ 负载/ 预测/ 模型/ ./ 6/ 基于/ 组合/ 模型/ 的/ 任务/ 负载/ 预测/ 6.1/ 基于/ 时间/ 序列/ 分解/ 任务/ 流量/ 实时/ 系统/ 的/ 任务/ 犡/ (/ t/ )/ 从/ 其/ 本质属性/ 来讲/ ,/ 可以/ 分为/ 3/ 种/ 不同/ 的/ 成分/ ,/ 即/ 工作/ 负载/ 中/ 包含/ :/ (/ 1/ )/ 趋势/ 成分/ 犜/ (/ t/ )/ ,/ 对应/ 任务量/ 随着/ 时间/ 而/ 平稳/ 增长/ 、/ 衰减/ 的/ 性质/ ;/ (/ 2/ )/ 周期/ 成分/ 犘/ (/ t/ )/ ,/ 对应/ 任务量/ 随/ 时间/ 变化/ 表现/ 出/ 的/ 规律性/ ;/ (/ 3/ )/ 随机/ 成分/ 犚/ (/ t/ )/ ,/ 对应/ 任务量/ 之中/ 不/ 确定/ 的/ 随机性/ ./ 从而/ 可以/ 将/ 任务/ 犡/ (/ t/ )/ 看作/ 三者/ 之/ 和/ :/ 犡/ (/ t/ )/ =/ 犜/ (/ t/ )/ +/ 犘/ (/ t/ )/ +/ 犚/ (/ t/ )/ ./ 基于/ 对/ 3/ 种/ 基本成分/ 的/ 分析/ ,/ 本文/ 提出/ 了/ 基于/ 灰色/ 模型/ 、/ 傅里叶/ 级数/ 分解/ 模型/ 以及/ 径向/ 基/ 函数/ (/ RBF/ )/ 人工神经网络/ 理论/ 的/ 组合/ 预测/ 数学模型/ ./ 具体/ 流程/ 框图/ 如图/ 5/ 所示/ ./ 该/ 预测/ 方法/ 将/ 历史/ 任务/ 流量/ 数据/ 依次/ 分解/ 为/ 这/ 3/ 种/ 成分/ ,/ 之后/ 根据/ 这/ 3/ 种/ 数学模型/ 分别/ 进行/ 预测/ ,/ 最后/ 将/ 预测值/ 组合/ 起来/ ,/ 构成/ 对于/ 任务/ 流量/ 的/ 整体/ 预测值/ ./ 该/ 方法/ 将/ 作为/ 前/ 文/ 所述/ 的/ DPTM/ 系统/ 中/ 的/ 任务/ 负载/ 预测/ 模块/ ./ 6.2/ 灰色/ 模型/ 灰度/ 模型/ GM/ (/ 1/ ,/ 1/ )/ 可以/ 通过/ 累加/ 原始数据/ 数列/ ,/ 弱化/ 随机/ 扰动/ 因素/ 影响/ ,/ 发现/ 该/ 序列/ 的/ 指数/ 增长/ 规律/ [/ 7/ ]/ ./ 设/ 流量/ 序列/ 为/ 犡/ (/ t/ )/ =/ 犡/ (/ 0/ )/ =/ {/ x/ (/ 0/ )/ (/ k/ )/ |/ k/ =/ 1/ ,/ …/ ,/ n/ }/ ,/ 对/ 其/ 做/ 依次/ 累加/ ,/ 得到/ 犡/ (/ 1/ )/ =/ {/ x/ (/ 1/ )/ (/ k/ )/ =/ ∑/ ki/ |/ k/ =/ 1/ ,/ …/ ,/ n/ }/ ./ 因此/ ,/ 该/ 序列/ 的/ 均值/ 生成/ 序/ x/ (/ 0/ )/ i/ =/ 1/ 列为/ {/ 犣/ (/ 1/ )/ =/ z/ (/ 1/ )/ (/ k/ )/ =/ x/ (/ 1/ )/ (/ k/ )/ +/ x/ (/ 1/ )/ k/ (/ )/ -/ 1/ 由于/ GM/ (/ 1/ ,/ 1/ )/ 模型/ 的/ 白化/ 形式/ 为/ 由此/ 我们/ 可以/ 推导/ 出/ 离散/ 递推/ 方程/ x/ (/ 1/ )/ (/ k/ +/ 1/ )/ =/ β/ 1x/ (/ 1/ )/ (/ k/ )/ +/ β/ 2/ ,/ 其中/ β/ 1/ =/ (/ 2/ -/ a/ )/ // (/ 2/ +/ a/ )/ ,/ β/ 2/ =/ b/ ./ 通过/ 最小/ 二/ 乘法/ 可以/ 得到/ β/ 的/ 估计值/ β/ ^/ =/ (/ 犅/ T/ 犅/ )/ -/ 1/ 犅/ TY/ ./ 从而/ 给定/ 初值/ 后/ ,/ 通过/ 递推/ 公式/ 可以/ 求得/ 进而/ 可以/ 确定/ 累加/ 序列/ ,/ 得出/ 趋势/ 预测值/ :/ t/ (/ 0/ )/ (/ k/ +/ 1/ )/ =/ x/ (/ 0/ )/ (/ k/ +/ 1/ )/ =/ x/ (/ 1/ )/ (/ k/ +/ 1/ )/ -/ x/ (/ 1/ )/ (/ k/ )/ 6.3/ 傅里叶/ 模型/ 我们/ 提出/ 周期/ 成分/ 的/ 概念/ 来/ 描述/ 工作/ 负载/ 中/ 的/ 周期/ 性质/ ./ 对于/ 一个/ 周期函数/ ,/ 最/ 成熟/ 的/ 分析方法/ 就是/ 用/ 傅里叶/ 级数/ 展开/ 或者/ 傅里叶/ 变换/ [/ 20/ ]/ ./ 假定/ 周期/ 成分/ 可以/ 被/ 认为/ 是/ 一个/ 周期/ 为/ T/ 的/ 函数/ f/ (/ x/ )/ ./ 所以/ 可以/ 将/ 之/ 做/ 傅里叶/ 级数/ 展开/ :/ Page7f/ (/ x/ )/ =/ a0/ +/ ∑/ m/ 通过/ 去/ 除了/ 趋势/ 成分/ 的/ 历史数据/ X/ (/ t/ )/ 来/ 构造/ 出/ 矩阵/ 方程/ ,/ 拟合/ 出/ 傅里叶/ 系数/ ak/ ,/ bk/ ./ 将/ X/ (/ j/ )/ =/ f/ (/ xj/ )/ ,/ 1/ / j/ / n/ 代入/ f/ (/ x/ )/ 表达式/ ,/ 得到/ 矩阵/ 方程/ :/ 1c11c12/ …/ s11s12/ …/ s1m/ 熿/ 1c12c22/ …/ s21s22/ …/ s2m/ / / / / / / / / 1cn1cn2/ …/ sn1sn2/ …/ s/ 燀/ 式/ 中/ ,/ cij/ =/ cos2/ π/ jxiT/ ,/ sij/ =/ sin2/ π/ jxiT/ ./ 由于/ 函数/ 族/ {/ 1/ ,/ sinx/ ,/ cosx/ ,/ …/ ,/ sinmx/ ,/ cosmx/ }/ 的/ 正交/ 性/ ,/ 使得/ 上述/ 方程组/ 有/ 特殊/ 解法/ ./ 经过/ 推导/ ,/ 不难/ 得到/ 进而/ 得到/ 周期/ 成分/ 的/ 拟合/ 函数/ 表达式/ :/ 6.4/ RBF/ 神经网络/ 模型/ 众所周知/ ,/ 任何/ 服务/ 系统/ 的/ 工作/ 任务/ 都/ 会/ 有/ 一定/ 的/ 随机性/ ,/ 称之为/ 任务/ 负载/ 中/ 的/ 随机/ 成分/ ./ RBF/ 神经网络/ 通过/ 非线性/ 基/ 函数/ 的/ 线性组合/ ,/ 对/ 非线性/ 函数/ 关系/ 具有/ 良好/ 的/ 逼近/ 能力/ ,/ 适用/ 于/ 描述/ 网络流量/ 的/ 非线性/ 、/ 时/ 变性/ 的/ 复杂/ 因素/ ,/ 并/ 可/ 克服/ BP/ 神经网络/ 训练/ 时间/ 长及/ 计算/ 复杂度/ 高/ 的/ 不足/ [/ 21/ ]/ ./ 设/ N/ 维空间/ 有/ P/ 个/ 输入/ 向量/ 犡/ p/ (/ p/ =/ 1/ ,/ 2/ ,/ …/ ,/ P/ )/ ,/ 它们/ 在/ 输出/ 空间/ 相应/ 的/ 目标值/ 为/ dP/ ,/ P/ 对/ 输入/ -/ 输出/ 样本/ 构成/ 训练样本/ 集/ ./ 寻找/ 某个/ 非线性/ 映射函数/ F/ (/ 犡/ )/ ,/ 使/ 其/ 满足/ 插值/ 条件/ F/ (/ 犡/ p/ )/ =/ dp/ ./ 函数/ F/ 描述/ 了/ 一个/ 插值/ 曲面/ ,/ 即/ 所有/ 训练/ 数据/ 点/ 都/ 必须/ 通过/ 该/ 插值/ 曲面/ ./ 许多/ 突发事件/ 的/ 响应/ ,/ 比如/ 电路/ 中/ 的/ 冲击/ 响应/ 、/ 药理学/ 上/ 的/ 药物/ 消除/ 动力/ 过程/ ,/ 都/ 可以/ 认为/ 是/ 一个/ 指数/ 衰减/ 的/ 过程/ ./ 网络流量/ 在/ 某/ 一点/ 出现/ 剧烈/ 突变/ 也/ 会/ 对/ 未来/ 的/ 流量/ 值/ 产生/ 类似/ 的/ 效果/ ./ 因此/ ,/ RBF/ 网络/ 选择/ 高斯/ 指数函数/ 作为/ 其/ 插值/ 的/ 径向/ 基/ 函数/ :/ 式/ 中/ ,/ r/ =/ 犡/ -/ 犡/ p/ ,/ σ/ 称为/ 基/ 函数/ 的/ 扩展/ 常数/ ./ 式/ (/ 10/ )/ 暗合/ 了/ 根据/ 有限/ 的/ 历史/ 突变/ 值来/ 拟合/ 突变/ 影响/ (/ 随机/ 成分/ )/ 的/ 需要/ ./ 设各边/ 突触/ 权值/ 为/ ω/ j/ ,/ j/ =/ 0/ ,/ 1/ ,/ 2/ ,/ …/ ,/ P/ ,/ 则/ 任务/ 中/ 的/ 随机/ 成分/ 近似/ 为/ RBF/ 网络/ 输出/ 值/ :/ 7/ 实验/ 结果/ 为了/ 验证/ 本文/ 所/ 提出/ 的/ 预测/ 任务/ 负载/ 模型/ 、/ VP/ -/ TALK/ 调度/ 算法/ 以及/ DPTM/ 原型/ 系统/ ,/ 我们/ 进行/ 了/ 3/ 组/ 模拟实验/ ./ 实验/ 运行/ 平台/ 为/ 配有/ IntelCore2Q9550CPU/ 、/ 4GBRAM/ 的/ Windows764/ 位/ 操作系统/ ,/ 预测/ 模型/ 以及/ 各/ DPTM/ 算法/ 在/ MATLAB/ ①/ 软件/ 中/ 模拟/ 实现/ ./ 7.1/ 工作/ 负载/ 组合/ 预测/ 方法/ 的/ 精度/ 验证/ 本文/ 所/ 提出/ 的/ 各种/ 调度/ 算法/ 主要/ 针对/ 高性能/ 、/ 高/ 复杂度/ 的/ 处理器/ 芯片/ ./ 目前/ ,/ 这/ 一类/ 芯片/ 主要/ 被/ 大规模/ 地/ 使用/ 于/ 企业级/ 的/ 网络/ 路由/ 以及/ 通信/ 服务/ 设备/ 中/ ./ 所以/ ,/ 多数/ 设备/ 的/ 任务量/ 事实上/ 与/ 网络/ 的/ 流量/ 息息相关/ ./ 因此/ ,/ 本文/ 采用/ 真实/ 的/ 网络流量/ ②/ 作为/ DPTM/ 系统/ 的/ 工作量/ 负载/ 输入/ ,/ 用于/ 验证/ 本文/ 所/ 提出/ 的/ 负载/ 预测/ 算法/ 的/ 精确度/ ./ 实验/ 中/ 我们/ 截/ 取出/ 2004/ 年/ 7/ 月/ ~/ 9/ 月/ 的/ 数据/ 用来/ 作为/ 数据源/ ,/ 选取/ 合适/ 程度/ 的/ 历史数据/ 预测/ 该/ 部分/ 历史数据/ 之后/ 的/ 一个/ 已知/ 负载/ 值/ ,/ 然后/ 滑动/ 历史数据/ (/ 即/ 舍弃/ 历史数据/ 中/ 的/ 第一个/ 值/ ,/ 添入/ 新/ 的/ 真实/ 负载/ )/ ,/ 再次/ 预测/ ,/ 如此/ 重复/ 进行/ 工作/ 负载/ 的/ 一步/ 预测/ ,/ 就/ 可以/ 得到/ 预期/ 长度/ 的/ 预测值/ 序列/ ./ 通过/ 对比/ 预测值/ 序列/ 与/ 真实/ 值/ 序列/ 来/ 衡量/ 预测/ 效果/ 的/ 精确度/ 与/ 稳定性/ ./ 设置/ 傅里叶/ 级数/ 展开/ 长度/ 为/ 10/ ,/ 神经网络/ 的/ 训练样本/ 个数/ 为/ 7/ ,/ 扩展/ 长度/ 为/ 4/ ,/ 观察/ 用/ 14/ 天/ 的/ 历史/ 样本/ 数据/ ,/ 滑动/ 预测/ 3/ 天/ 数据/ 的/ 效果/ ./ 图/ 6/ 对比/ 了/ 工作/ 负载/ 的/ 预测值/ 与/ 真实/ 值/ ./ ①/ ②/ Page8/ 从图/ 6/ 中/ 可以/ 看出/ :/ 本文/ 的/ DPTM/ 原型/ 系统/ 所/ 使用/ 的/ 预测/ 算法/ 具有/ 很/ 高/ 的/ 预测/ 精度/ ./ 为/ 进一步/ 量化/ 本文/ 预测/ 算法/ 的/ 精度/ ,/ 本文/ 计算/ 了/ 平均/ 相对误差/ 和/ 归一化/ 方差/ 式/ 中/ N/ 为/ 采样/ 点/ 的/ 总数/ ,/ truthi/ 代表/ 第/ i/ 个/ 样本/ 点处/ 的/ 真实/ 流量/ ,/ predicti/ 表示/ 对应/ 采样/ 点/ 的/ 预测值/ ./ 表/ 1/ 比较/ 了/ 本文/ 所/ 提出/ 预测/ 方法/ 与/ 已有/ 预测/ 方法/ 的/ 预测/ 精度/ 比较/ ./ 同/ 文献/ [/ 17/ ]/ 中/ 所/ 提出/ 的/ 各种/ 方法/ 相比/ ,/ 本文/ 预测/ 方法/ 具有/ 更/ 低/ 的/ 平均误差/ EMRE/ 与/ 较/ 好/ 的/ 方差/ 抖动/ ENMSE/ ./ 算法/ 平均/ 相对误差/ (/ EMRE/ )/ 方差/ (/ ENMRE/ )/ CTARIMAW/ -/ ARIMAWGC/ 本文/ 方法/ 7.2/ VP/ -/ TALK/ 算法/ 的/ DPTM/ 效果/ 验证/ 本文/ 通过/ 与/ 现有/ 的/ TALK/ 、/ PB/ 、/ MO/ 算法/ 进行/ 对比/ ,/ 来/ 验证/ 本文/ 提出/ 的/ VP/ -/ TALK/ 算法/ 的/ 优越性/ ./ 实验/ 中/ pr/ 、/ cr/ 取值/ 分别/ 为/ 0.001/ s/ // V/ 和/ 0.01/ J/ // V2/ ,/ 温度/ 最高/ 上限/ 设为/ 390K/ ,/ 任务/ 周期/ 固定/ 为/ 10s/ ./ 支持/ DVFS/ 芯片/ 的/ 电压/ 值/ 从/ 0.6/ V/ 到/ 1.4/ V/ 可调/ ,/ 步长/ 0.1/ V/ ./ 根据/ 电压/ 可以/ 得到/ 归一化/ 的/ 速度/ 序列/ 为/ {/ 0.574/ ,/ 0.6611/ ,/ 0.7324/ ,/ 0.7926/ ,/ 0.8446/ ,/ 0.8901/ ,/ 0.930/ ,/ 0.9670/ ,/ 1/ }/ ./ 任务/ 负载/ 率为/ 5/ %/ ~/ 95/ %/ ,/ 变化/ 步长/ 为/ 5/ %/ ./ 对于/ 4/ 种/ 对比/ 算法/ ,/ 我们/ 分别/ 将/ 能耗/ 情况/ (/ 单位/ 为/ 焦耳/ J/ )/ 和/ 峰值/ 温度/ 情况/ (/ 单位/ 为/ 绝对温度/ K/ )/ 绘制/ 于图/ 7/ 和/ 图/ 8/ ./ 从图/ 7/ 可以/ 看出/ ,/ 对于/ 能耗/ :/ 当/ 负载/ 率/ 小于/ 55/ %/ 时/ ,/ VP/ -/ TALK/ 优于/ TALK/ ,/ PB/ 与/ MO/ 等价/ ./ 这/ 是因为/ ,/ 在/ 负载/ 率/ 不/ 高于/ 芯片/ 最低/ 运行/ 速度/ (/ 0.574/ )/ 时/ ,/ VP/ -/ TALK/ 相当于/ 使用/ DVS/ 技术/ 的/ TALK/ ,/ PB/ 相当于/ 使用/ 单一/ 速度/ 的/ MO/ ./ 此时/ ,/ TALK/ 与/ PB/ 的/ 调度/ 效果/ 相差无几/ ;/ 在/ 负载/ 率为/ 25/ %/ ~/ 50/ %/ 时/ ,/ PB/ 略/ 优于/ VP/ -/ TALK/ 算法/ ,/ 原因/ 是/ VP/ -/ TALK/ 在/ 电压/ 和/ 时间/ 切换/ 上/ 付出/ 了/ 更/ 大/ 的/ 代价/ ;/ 然而/ ,/ 随着/ 负载/ 率/ 的/ 增加/ ,/ 当/ 负载/ 率/ 大于/ 55/ %/ 时/ ,/ VP/ -/ TALK/ 的/ 调度/ 效果/ 全面/ 优于/ 其他/ 3/ 种/ 算法/ ,/ 比/ PB/ 、/ MO/ 以及/ TALK/ 的/ 平均/ 能耗/ 分别/ 节省/ 大约/ 20.54/ %/ 、/ 11.04/ %/ 、/ 11.42/ %/ ./ 表/ 2/ 列出/ 了/ 当/ 负载/ 率/ 大于/ 55/ %/ 时/ ,/ 能耗/ 节省/ 数据/ 的/ 统计/ 信息/ ,/ 具体/ 说明/ 了/ VP/ -/ TALK/ 在/ 能耗/ 节约/ 方面/ 的/ 优势/ ./ TALK/ 平均值/ 从图/ 8/ 中/ 可以/ 看出/ ,/ 当/ 工作/ 负载/ 率/ 小于/ 50/ %/ 时/ ,/ 各种/ 算法/ 所/ 达到/ 的/ 峰值/ 温度/ 都/ 不/ 超过/ 310K/ ,/ 4/ 种/ 调度/ 算法/ 在/ 峰值/ 温度/ 方面/ 的/ 差距/ 基本/ 小于/ 1/ ,/ 并/ 在/ 最大/ 负载/ 率时/ 近似/ 共同/ 终结/ 于/ 384K/ ./ 7.3/ 基于/ 机器/ 学习/ 的/ DPTM/ 原型/ 系统/ 的/ 验证/ 统/ 功耗/ 与/ 温度/ 的/ 调度/ 效果/ ,/ 我们/ 做/ 了/ 两组/ 实验/ ./ 为了/ 评价/ 本文/ 基于/ 机器/ 学习/ 的/ DPTM/ 原型/ 系/ 首先/ ,/ 基于/ 图/ 6/ 所示/ 的/ 每个/ 时刻/ 工作/ 负载/ 预测值/ ,/ 我们/ 分别/ 采用/ 4/ 种/ 对比/ 源/ 算法/ ,/ 即/ TALK/ [/ 16/ ]/ 、/ PB/ [/ 4/ ]/ 、/ MO/ [/ 6/ ]/ 、/ VP/ -/ TALK/ ,/ 算/ 出/ 每个/ 时刻/ 每种/ 算法/ 的/ 能耗/ 值/ 与/ 峰值/ 温度/ ;/ 然后/ 将/ 4/ 种/ 对比/ 源/ 算法/ 每个/ 时刻/ 的/ 能耗/ 值/ 与/ 峰值/ 温度/ 进行/ 平均/ ,/ 得到/ 4/ 种/ 对比/ 源/ Page9/ 算法/ 每个/ 时刻/ 的/ 平均/ 调度/ 效果/ ;/ 最后/ 使用/ 图/ 9/ 分别/ 比较/ 了/ 本文/ 原型/ 系统/ 与/ 4/ 种/ 对比/ 源/ 算法/ 平均/ 调度/ 效果/ 的/ 能耗/ (/ 单位/ J/ )/ 和/ 峰值/ 温度/ (/ 单位/ )/ ./ 其次/ ,/ 同样/ 基于/ 图/ 6/ 所示/ 的/ 每个/ 时刻/ 工作/ 负载/ 真实/ 值/ ,/ 采用/ 4/ 种源/ 算法/ ,/ 分别/ 算/ 出/ 每个/ 时刻/ 的/ 能耗/ 值/ 与/ 峰值/ 温度/ ,/ 取/ 其中/ 的/ 最优/ 值/ 作为/ DPTM/ 调度/ 的/ 理想/ 值/ ;/ 然后/ 使用/ 这批/ 理想/ 值来/ 客观/ 评价/ 集成/ 了/ TALK/ 、/ PB/ 、/ MO/ 以及/ VP/ -/ TALK/ 算法/ 的/ DPTM/ 原型/ 系统/ 的/ 调度/ 效果/ ;/ 最后/ 使用/ 图/ 10/ 分别/ 比较/ 了/ 本文/ 原型/ 系统/ 与/ 4/ 种/ 对比/ 源/ 算法/ 理论/ 最优/ 调度/ 效果/ 的/ 能耗/ (/ 单位/ J/ )/ 和/ 峰值/ 温度/ (/ 单位/ )/ ./ 从图/ 9/ (/ a/ )/ 和/ 图/ 9/ (/ b/ )/ 可以/ 直观/ 地/ 看出/ :/ 与/ 4/ 种源/ 算法/ 平均/ 调度/ 效果/ 相比/ ,/ 本文/ 原型/ 系统/ 择优/ 式/ 地/ 组合/ DPTM/ 算法/ 可以/ 明显/ 拉低/ 实时/ 系统/ 的/ 运行/ 能耗/ 曲线/ 和/ 峰值/ 温度/ 曲线/ ,/ 这/ 表明/ 相比/ 于/ 4/ 种/ DPTM/ 源/ 算法/ ,/ 本文/ 基于/ 机器/ 学习/ 的/ DPTM/ 原型/ 系统/ 获得/ 了/ “/ 取其长/ 、/ 去/ 其/ 短/ ”/ 的/ 优化/ 效果/ ./ 同时/ 从表/ 3/ 的/ 比较/ 数据/ 可以/ 得出/ “/ 本文/ 原型/ 系统/ 可以/ 获得/ 近似/ 最优/ 的/ 调度/ 效果/ ”/ 的/ 结论/ ,/ 其/ 实验/ 依据/ 如下/ :/ (/ 1/ )/ 与/ 4/ 种/ DPTM/ 源/ 算法/ 的/ 平均/ 效果/ 相比/ (/ 图/ 9/ (/ a/ )/ )/ ,/ 本文/ 原型/ 系统/ 采用/ 的/ 择优/ 式/ 组合/ DPTM/ 算法/ 可/ 获得/ 更优/ 的/ 能耗/ 优化/ 效果/ ,/ 所有/ 时间/ 采样/ 点/ 能耗/ 的/ 累加/ 值/ ETOTAL/ (/ 总/ 能耗/ )/ 可/ 获得/ 18.39/ %/ 的/ 改进/ ,/ 所有/ 时间/ 采样/ 点中/ 的/ 最大值/ EMAX/ (/ 最大/ 能耗/ )/ 可/ 获得/ 18.77/ %/ 的/ 改进/ ./ 整体/ 改进/ 效果/ 非常明显/ ./ (/ 2/ )/ 与/ 4/ 种/ DPTM/ 源/ 算法/ 相比/ (/ 图/ 9/ (/ b/ )/ )/ ,/ 本文/ 原型/ 系统/ 可以/ 获得/ 更优/ 的/ 峰值/ 温度/ 优化/ 效果/ ,/ 所有/ 时间/ 采样/ 点中/ 的/ 最大/ 峰值/ 温度/ TPMAX/ 是/ 最优/ ,/ 所有/ 时间/ 采样/ 点/ 峰值/ 温度/ 的/ 平均值/ TPAVG/ 比/ 算法/ 均值/ 稍弱/ ./ 与/ 4/ 种/ DPTM/ 源/ 算法/ 调度/ 效果/ 平均值/ 相比/ ,/ 本文/ 原型/ 系统/ 可以/ 获得/ TPMAX1/ ./ 81/ 的/ 改进/ ,/ 但/ TPAVG/ 有/ -/ 1.31/ 的/ 退化/ ./ 从拉低/ 最大/ 峰值/ 温度/ 的/ 角度/ 来讲/ ,/ 改进/ 效果/ 较为/ 明显/ ./ (/ 3/ )/ 通过/ 图/ 10/ 对/ 本文/ 原型/ 系统/ 的/ 调度/ 效果/ 与/ 理想/ 值/ 进行/ 的/ 直观/ 比较/ ,/ 可以/ 看出/ 本文/ 原型/ 系统/ 获得/ 比/ 4/ 种源/ 算法/ 均值/ 更/ 接近/ 于/ 理想/ 值/ 的/ 优化/ 效果/ ./ 与表/ 3/ 中/ 理想/ 值/ 的/ ETOTAL/ // EMAX/ // TPAVG/ // TPMAX/ 参数/ 相比/ ,/ 4/ 种/ DPTM/ 源/ 算法/ 调度/ 效果/ 平均值/ 会/ 产生/ 28.64/ %/ // 30.09/ %/ // 7.70/ // 9.73/ 的/ 差距/ ,/ 而/ 本文/ 原型/ 系统/ 只/ 产生/ 了/ 12.55/ %/ // 13.93/ %/ // 9.02/ // 7.91/ 差距/ ./ Page10/ 表/ 3DPTM/ 原型/ 系统/ 与源/ 算法/ 、/ 理想/ 情况/ 对比/ 的/ 综合/ 指标/ 评价/ 指标/ ETOTAL/ // KJ60/ ./ 89638.30949/ ./ 57835.74346/ ./ 13237.64618/ ./ 39/ %/ 32.63228/ ./ 64/ %/ 12.55/ %/ EMAX/ // J192/ ./ 46260.56192/ ./ 46257.25225/ ./ 68183.3218/ ./ 77/ %/ 157.7830/ ./ 09/ %/ 13.93/ %/ TPAVG/ // 50.6448/ ./ 8947.1139/ ./ 7146.5947/ ./ 90/ -/ 1.3138/ ./ 887.709/ ./ 02TPMAX/ // 106.87112/ ./ 93106.4993/ ./ 33103.65101/ ./ 841.8193/ ./ 939.737/ ./ 918/ 结论/ 本文/ 深入分析/ 与/ 评估/ 了/ 已有/ 的/ 主流/ 调度/ 算法/ ,/ 提出/ 了/ 一系列/ 调度/ 准则/ 和/ 经验/ ./ 基于/ 这些/ 对/ 芯片/ 工作/ 休眠状态/ 调度/ 的/ 经验/ 准则/ ,/ 我们/ 提出/ 一种/ 在/ 能耗/ 节省/ 方面/ 更具/ 优势/ 的/ DPTM/ 调度/ 算法/ VP/ -/ TALK/ ,/ 以此/ 算法/ 为/ 基础/ ,/ 综合/ 本文/ 所/ 提出/ 的/ 预测/ 任务/ 负载/ 模型/ ,/ 构建/ 了/ 一个/ 基于/ 负载/ 预测/ 的/ DPTM/ 系统/ ./ 仿真/ 实验/ 表明/ :/ (/ 1/ )/ 本文/ 的/ 组合/ 模型/ 在/ 负载/ 预测/ 方面/ 胜过/ 众多/ 的/ 相关/ 模型/ 及/ 算法/ ,/ 平均误差/ 仅为/ 2.89/ %/ ;/ (/ 2/ )/ 本文/ 所/ 提出/ 的/ VP/ -/ TALK/ 算法/ 在/ 较/ 高/ 的/ 工作/ 负载/ 率/ 和/ 共同/ 的/ 峰值/ 温度/ 约束/ 下/ ,/ 比/ Pattern/ -/ Based/ 、/ M/ -/ Oscillating/ 、/ TALK/ 分别/ 节能/ 20.54/ %/ 、/ 11.04/ %/ 、/ 11.42/ %/ ;/ (/ 3/ )/ 本文/ 所/ 提出/ 的/ 综合/ 4/ 种源/ 算法/ 基于/ 机器/ 学习/ 的/ DPTM/ 原型/ 系统/ 较为/ 接近/ 理想/ 值/ ,/ 与其/ ETOTAL/ // EMAX/ // TPAVG/ // TPMAX/ 参数/ 相比/ ,/ 只/ 产生/ 了/ 12.55/ %/ // 13.93/ %/ // 9.02/ // 7.91/ 的/ 差距/ ./ 致谢/ 伊利诺伊/ 理工大学/ 的/ 在读/ 博士/ 杨旭/ ,/ 中国/ 电子科技/ 集团/ 24/ 所/ 的/ 黄琨/ 师兄/ ,/ 同/ 实验组/ 的/ 唐亮/ 同学/ ,/ 他们/ 在/ 本文/ 的/ 理论/ 分析/ 、/ 实验/ 方法/ 的/ 讨论/ 中/ 给予/ 了/ 很多/ 建议/ ,/ 在/ 此/ 一并/ 感谢/ !/ 

