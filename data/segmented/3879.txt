Page1/ 基于/ 行为/ 模型/ 的/ 需求/ 可视化/ 研究/ 李琳/ 1/ )/ ,/ 2/ )/ ,/ 3/ )/ 毋/ 国庆/ 1/ )/ 黄勃/ 1/ )/ 万黎/ 4/ )/ 吴昊/ 1/ )/ 1/ )/ (/ 武汉大学/ 计算机/ 学院/ 武汉/ 430072/ )/ 2/ )/ (/ 武汉/ 科技/ 大学/ 计算机科学/ 与/ 技术/ 学院/ 武汉/ 430065/ )/ 3/ )/ (/ 智能/ 信息处理/ 与/ 实时/ 工业/ 系统/ 湖北省/ 重点/ 实验室/ 武汉/ 430065/ )/ 4/ )/ (/ 中国民生银行/ 科技/ 开发部/ 北京/ 100086/ )/ 摘要/ 针对/ 复杂/ 软件系统/ 的/ 需求/ 信息/ 难以/ 表达/ 和/ 沟通/ 的/ 问题/ ,/ 提出/ 了/ 一种/ 用/ 动画/ 方式/ 描述/ 需求/ 行为/ 模型/ 的/ 可视化/ 方法/ ./ 该/ 方法/ 基于/ 行为/ 描述语言/ (/ BehaviorDescriptionLanguage/ ,/ BDL/ )/ 所/ 建立/ 的/ 需求/ 行为/ 模型/ ,/ 动画/ 的/ 执行/ 机制/ 是/ 采用/ 状态机/ 和/ 状态/ 块/ 分别/ 作为/ 其/ 执行/ 模型/ 和/ 描述/ 模型/ ,/ 每/ 一个/ 状态/ 迁移/ 都/ 对应/ 一个/ 需要/ 进行/ 可视化/ 描述/ 的/ 行为/ ,/ 一个/ 关联/ 元素/ 将/ 状态/ 块/ 模型/ 中/ 的/ 一个/ 迁移/ 与/ 一个/ 动作/ 原语/ 进行/ 关联/ ,/ 控制/ 图形/ 的/ 运动/ ,/ 实现需求/ 行为/ 模型/ 的/ 可视化/ ./ 该/ 方法/ 的/ 优点/ 在于/ ,/ 需求/ 动画/ 的/ 直观性/ 可以/ 使/ 不同/ 背景/ 的/ 用户/ 发现/ 遗漏/ 和/ 不/ 正确/ 的/ 潜在/ 需求/ ,/ 避免/ 需求/ 变更/ ,/ 并且/ BDL/ 模型/ 必须/ 通过/ 一系列/ 检测/ ,/ 以/ 确保/ 需求/ 动画/ 的/ 正确性/ ./ 文中/ 给出/ 了/ 行为/ 模型/ 到/ 状态/ 模型/ 转换规则/ 的/ 正确性/ 证明/ ,/ 为/ 转换/ 提供/ 了/ 相应/ 的/ 理论/ 验证/ ./ 最后/ 给出/ 了/ 校园/ 通/ 系统/ 实例/ 分析/ 以及/ 所/ 实现/ 的/ 建模/ 工具/ 和/ 动画/ 工具/ 介绍/ ./ 关键词/ 软件/ 行为/ ;/ 行为/ 描述语言/ ;/ 行为/ 模型/ ;/ 可视化/ ;/ 需求/ 建模/ 1/ 引言/ 需求/ 建模/ [/ 1/ -/ 2/ ]/ 无疑/ 是/ 当前/ 软件工程/ 中/ 的/ 关键问题/ ,/ 同时/ 又/ 是/ 软件工程/ 中/ 最/ 复杂/ 的/ 过程/ 之一/ [/ 3/ -/ 4/ ]/ ./ 需求/ 建模/ 的/ 目的/ 是/ 要/ 在/ 需求/ 分析/ 过程/ 中/ 从/ 不同/ 的/ 角度/ 建立/ 和/ 检验/ 软件系统/ 的/ 需求/ 模型/ ,/ 为/ 项目/ 相关/ 人员/ 提供/ 一个/ 可以/ 进行/ 沟通/ 和/ 验证/ 需求/ 信息/ 正确性/ 的/ 平台/ ,/ 以/ 获得/ 高质量/ 的/ 需求/ ./ 需求/ 建模/ 的/ 目标/ 是/ 明确/ 软件系统/ 的/ 需求/ 信息/ ,/ 以/ 某种/ 建模/ 方法/ 建立/ 对应/ 的/ 需求/ 模型/ ,/ 即/ 整个/ 系统/ 要/ “/ 做/ 什么/ ”/ ./ “/ 做/ 什么/ ”/ 即/ 软件/ 行为/ [/ 5/ ]/ ,/ 是/ 指/ 软件/ 运行/ 时/ 作为/ 主体/ ,/ 依照/ 自身/ 的/ 功能/ 对/ 客体/ 的/ 施用/ 、/ 操作/ 或/ 动作/ 的/ 过程/ ,/ 或/ 主体/ 施用/ 一个/ 服务/ 、/ 操作/ 或/ 动作/ 于/ 客体/ ./ 软件/ 行为/ 由/ 行为主体/ 和/ 客体/ 、/ 操作/ 或/ 动作/ 、/ 行为/ 输入输出/ 和/ 行为/ 属性/ 等/ 组成/ ./ 1.1/ 研究/ 背景/ 随着/ 软件/ 的/ 复杂程度/ 日益/ 增加/ ,/ 软件/ 的/ 需求/ 建模/ 的/ 重要性/ 也/ 日益/ 凸显/ ./ 对于/ 相当/ 复杂/ 而/ 又/ 难于/ 理解/ 、/ 难以/ 用/ 言语/ 表达/ 的/ 系统/ ,/ 需求/ 可视化/ 技术/ 提供/ 了/ 一种/ 更加/ 直观/ 和/ 易于/ 理解/ 的/ 方式/ ./ 可视化/ 是/ 指/ 使用/ 图形/ 、/ 图像/ 或者/ 图片/ 等/ 技术/ ,/ 使/ 一些/ 不/ 可见/ 的/ 对象/ 、/ 表达/ 或者/ 抽象概念/ 变成/ 可见/ 的/ 符号/ [/ 6/ ]/ ./ 可视化/ 技术/ 和/ 需求/ 建模/ 的/ 结合/ ,/ 给/ 软件/ 的/ 需求/ 工程/ 领域/ 带来/ 了/ 新/ 的/ 机遇/ 和/ 光明/ 的/ 前景/ ./ 1.2/ 相关/ 的/ 研究/ 可视化/ 技术/ 在/ 其它/ 计算机/ 研究/ 领域/ (/ 如/ 系统/ 建模/ 、/ 仿真/ )/ ,/ 以及/ 软件工程/ 其它/ 阶段/ (/ 如/ 软件设计/ 阶段/ )/ 已经/ 有/ 了/ 广泛/ 的/ 应用/ ,/ 但/ 在/ 软件/ 需求/ 阶段/ 的/ 应用/ 研究/ 还/ 处于/ 初步阶段/ [/ 7/ ]/ ./ 目前/ ,/ 国内外/ 的/ 相关/ 研究者/ 在/ 软件/ 需求/ 阶段/ 采用/ 了/ 不同/ 方法/ 和/ 技术/ 进行/ 可视化/ 的/ 研究/ ,/ 这些/ 研究/ 从/ 表达/ 技术/ 和/ 表达/ 内容/ 上/ 可/ 大致/ 综合/ 为/ 两类/ ,/ 一类/ 是/ 利用/ 各种/ 图形符号/ 静态/ 地/ 表示/ 需求/ 模型/ ,/ 另一类/ 是/ 动态/ 表示/ 需求/ 模型/ 的/ 方法/ ./ 静态方法/ 使用/ 直观/ 的/ 和/ 可视化/ 的/ 符号/ 表示/ 不/ 可见/ 的/ 、/ 难以/ 表达/ 的/ 对象/ 和/ 关系/ ,/ 以及/ 一些/ 抽象概念/ ,/ 使/ 项目/ 相关/ 人员/ 能够/ “/ 看/ ”/ 到/ 需求/ 内容/ 而/ 加深/ 对/ 需求/ 的/ 理解/ ,/ 促进/ 了/ 项目/ 相关/ 人员/ 和/ 开发人员/ 的/ 交流/ ,/ 从而/ 可/ 获取/ 高质量/ 的/ 需求/ ./ 然而/ ,/ 对于/ 需求/ 中/ 表达/ 目标软件/ 执行/ 动作/ 和/ 动态/ 交互/ 这类/ 的/ 需求/ 内容/ ,/ 特别/ 是/ 在/ 某些/ 软件/ 行为/ 比较复杂/ 的/ 情况/ 下/ ,/ 使用/ 流程图/ 、/ 状态图/ 等/ 静态/ 的/ 图形/ 表达出来/ 的/ 结果/ [/ 8/ ]/ 往往/ 错综复杂/ ,/ 难以/ 阅读/ 和/ 理解/ ./ 因此/ ,/ 一些/ 研究者/ 试图/ 使用/ 动态/ 的/ 需求/ 动画/ 来/ 表达/ 系统/ 的/ 动态/ 行为/ ,/ 即/ 利用/ 图形符号/ 或/ 图像/ 动态/ 地/ 表示/ 需求/ 模型/ 的/ 另一类/ 方法/ 和/ 技术/ ./ 需求/ 动画/ 使用/ 图形符号/ 的/ 动态变化/ 来/ 展示/ 需求/ 模型/ 中/ 的/ 动态/ 内容/ ,/ 模拟/ 目标软件/ 的/ 执行/ 过程/ ,/ 有益于/ 更好/ 地/ 理解/ 和/ 验证/ 需求/ 模型/ ./ 近几年来/ ,/ 很多/ 研究/ 工作/ 尝试/ 为/ 不同/ 的/ 需求/ 建模/ 方法/ 以及/ 工具/ 提供/ 需求/ 动画/ 功能/ ,/ 这些/ 工具/ 按/ 其/ 自动化/ 程度/ 可/ 粗略/ 归纳/ 为/ 如下/ 两类/ :/ 一部分/ 工具/ 的/ 动画/ 生产/ 过程/ 自动化/ 程度较高/ ./ 典型/ 的/ 工作/ 如/ :/ Holzmann/ 等/ 人/ [/ 9/ ]/ 研制/ 出/ 的/ SPIN/ 工具/ 将/ Promela/ 的/ 需求/ 规格/ 说明书/ 中/ 的/ 状态/ 转换成/ 执行/ 过程/ ;/ UPPAAL/ ①/ 使用/ Autograph/ 工具/ 演示/ 时间/ 自动机/ 中/ 的/ 迁移/ 和/ 状态/ ./ 此类/ 方法/ 在/ 演示/ 动画/ 时/ ,/ 通过/ 执行/ 需求/ 模型/ 中/ 的/ 过程/ 或/ 状态/ 变换/ 来/ 驱动/ 对应/ 图形符号/ 的/ 改变/ ,/ 在/ 一定/ 程度/ 上/ 能够/ 更加/ 直观/ 地/ 、/ 动态/ 地/ 表达/ 需求/ 模型/ ,/ 便于/ 开发人员/ 调试/ 和/ 理解/ 需求/ 模型/ ./ 但/ 动画/ 中/ 采用/ 的/ 图形符号/ 与/ 模型/ 中/ 的/ 形式化/ 符号/ 相对/ 应/ ,/ 对于/ 非专业/ 用户/ ,/ 这些/ 符号/ 难以/ 理解/ ./ 另/ 一部分/ 工具/ 是/ 使用/ 现实/ 世界/ 的/ 图形/ 和/ 图像/ 作为/ 动画/ 执行/ 元素/ ,/ 用/ 需求/ 模型/ 来/ 驱动/ 这些/ 动画/ 元素/ 的/ 执行/ ./ 这些/ 工具/ 生成/ 的/ 动画/ 便于/ 非专业/ 的/ 用户/ 理解/ ,/ 能够/ 很/ 好/ 地/ 促进/ 用户/ 和/ 开发人员/ 的/ 交流/ ./ 例如/ ,/ Heitmeyer/ 等/ 人/ [/ 10/ ]/ 开发/ 的/ 基于/ SCR/ 方法/ 的/ 工具集/ ,/ 使用/ 模拟器/ 来/ 模拟/ 目标软件/ 的/ 执行/ ./ 模拟器/ 使用/ 真实/ 仪表/ 面板/ 的/ 图片/ 部件/ 来/ 模拟/ 显示/ 目标软件/ 的/ 输出/ 、/ 控制/ 以及/ 状态/ 变化/ ./ Magee/ 等/ 人/ ②/ 开发/ 的/ LTSA/ ①/ ②/ tionSystemAnalyser/ ,/ ImperialCollege/ [/ EB/ // OL/ ]/ ./ http/ :/ // // Page3/ 使用/ 时间/ 自动机/ 将/ 标记/ 迁移/ 系统/ 与/ 领域/ 相关/ 动画图片/ 关联/ 起来/ ./ 动画/ 元素/ 的/ 动作/ 执行/ 是/ 通过/ 调用/ SceneBeans/ 库中/ 定义/ 的/ 一些/ 基本/ 动作/ ./ 这种/ 做法/ 需要/ 开发人员/ 控制/ 每/ 一步/ 动画/ 的/ 执行/ ./ 这类/ 工具/ 的/ 问题/ 是/ 动画/ 生成/ 的/ 自动化/ 程度/ 较/ 低/ ,/ 动画/ 的/ 制作/ 需要/ 大量/ 的/ 人工/ 参与/ ./ 如/ LTSA/ 中/ 需要/ 花费/ 大量/ 人力/ 编写/ 描述/ 动画/ 执行/ 的/ XML/ 脚本/ ./ 本文/ 的/ 方法/ 汲取/ 了/ 以上/ 两种/ 动态/ 建模/ 方法/ 的/ 优点/ ,/ 使用/ 用户/ 便于/ 理解/ 的/ 图形符号/ ,/ 并且/ 自动化/ 程度较高/ ./ 1.3/ 论文/ 的/ 结构/ 针对/ 目前/ 的/ 相关/ 研究/ 现状/ ,/ 本文/ 提出/ 的/ 需求/ 可视化/ 技术/ 使用/ 形象/ 直观/ 的/ 图形符号/ 的/ 动态变化/ 来/ 展示/ 需求/ 模型/ 中/ 的/ 动态/ 行为/ 内容/ ,/ 模拟/ 目标软件/ 的/ 主要/ 执行/ 过程/ ,/ 通过/ 执行/ 与/ 行为/ 模型/ 对应/ 的/ 动画/ ,/ 能够/ 辅助/ 不同/ 知识/ 背景/ 下/ 的/ 用户/ 理解/ 需求/ 行为/ 模型/ ,/ 启发/ 用户/ 发现/ 遗漏/ 和/ 不/ 正确/ 的/ 潜在/ 需求/ ,/ 获取/ 有益/ 的/ 用户/ 反馈/ 意见/ ./ 该/ 需求/ 可视化/ 技术/ 极大/ 程度/ 地/ 减少/ 了/ 需求/ 变更/ 的/ 出现/ ,/ 大大/ 地/ 降低/ 了/ 软件开发/ 的/ 复杂性/ 和/ 开发成本/ ./ 本文/ 所/ 讨论/ 的/ 问题/ 如图/ 1/ 所示/ :/ 首先/ 在/ 第/ 2/ 节/ 介绍/ 构建/ 基于/ 行为/ 描述语言/ BDL/ 的/ 行为/ 模型/ 方法/ ,/ 该/ 方法/ 是/ 制作/ 需求/ 动画/ 的/ 基础/ ;/ 第/ 3/ 节/ 讲述/ 需求/ 可/ 模型/ 构建/ 方法/ 的/ 步骤/ 是/ 首先/ 将/ 与/ 复杂/ 系统/ 对应/ 的/ 问题/ 域/ 分解成/ 若干个/ 子/ 问题/ 域/ ,/ 然后/ 根据/ 不同/ 的/ 用户/ 视点/ 建立/ 系统/ 的/ 需求/ 模型/ ./ 最后/ ,/ 根据/ 语义/ 模型/ 并/ 利用/ 行为/ 时序/ 逻辑/ 来/ 检验/ 复杂/ 系统/ 的/ 一些/ 重要/ 特性/ ,/ 如/ 信息安全/ 等/ ./ 在/ 构建/ 基于/ 软件/ 行为/ 的/ 需求/ 模型/ (/ 简称/ 行为/ 模型/ )/ 过程/ 中/ ,/ 主要/ 利用/ 行为/ 描述语言/ 以及/ 行为/ 树/ (/ 或/ 行为/ 图/ )/ 建立/ 系统/ 的/ 行为/ 模型/ ,/ 并/ 使用/ 操作/ 语义/ 建立/ 行为/ 模型/ 的/ 语义/ 模型/ ,/ 以/ 对/ 行为/ 模型/ 进行/ 各种/ 检测/ 等/ ./ 其中/ ,/ 行为/ 描述语言/ 可以/ 将/ 系统/ 的/ 行为/ 表示/ 为/ 行为/ 表达式/ ,/ 并/ 通过/ 行为/ 表达式/ 的/ 变化/ 来/ 刻画/ 系统/ 的/ 状态/ 变化/ ./ 此外/ ,/ 行为/ 描述语言/ 亦/ 能够/ 反映/ 系统/ 的/ 行为/ 踪迹/ ./ 2.1/ 行为/ 描述语言/ (/ BDL/ )/ 定义/ 行为/ 描述语言/ (/ BehaviorDescriptionLanguage/ ,/ BDL/ )/ 主要/ 用于/ 描述/ 待/ 开发/ 软件系统/ 的/ 行为/ ,/ 是/ 一种/ 用于/ 以多/ 视点/ 方式/ 描述/ 软件系统/ 需求/ 模型/ 的/ 语言/ ,/ 而且/ 该/ 语言/ 也/ 是/ 对/ 软件系统/ 的/ 性质/ 进行/ 研究/ 的/ 基础/ ./ 行为/ 树/ (/ 图/ )/ 是/ 行为/ 描述语言/ 的/ 语法结构/ ./ 行为/ 描述语言/ 以/ 场景/ 作为/ 问题/ 域/ 中/ 每个/ 视点/ 需求/ 描述/ 的/ 基本/ 单位/ ,/ 而/ 以/ 组成/ 场景/ 的/ 基本/ 原子/ 行为/ 作为/ 具有/ 独立/ 含义/ 的/ 最小/ 单位/ ./ 比/ 之/ 自然语言/ 能够/ 对/ 需求/ 目标/ 的/ 定义/ 更加/ 精确/ 和/ 严格/ ,/ 而/ 较之/ 数理逻辑/ 等/ 形式化/ 语言/ 则/ 更加/ 易于/ 理解/ 和/ 构造/ [/ 11/ -/ 12/ ]/ ./ 有/ 了/ 需求/ 模型/ ,/ 便/ 可/ 依据/ 其/ 动态/ 语义/ 对/ 其/ 做/ 形式化/ 验证/ ,/ 以/ 检验/ 需求/ 的/ 正确性/ 、/ 有效性/ 等/ ./ 2.2/ 行为/ 描述语言/ 的/ 语法结构/ 型/ 的/ 结构/ 的/ 描述/ ./ 下面/ 给出/ 行为/ 描述语言/ 描述/ 视点/ 中/ 场景/ 行为/ 模视化/ 建模/ 的/ 方法/ ;/ 第/ 4/ 节是/ 行为/ 模型/ 到/ 状态/ 模型/ 转换规则/ 的/ 正确性/ 证明/ ;/ 第/ 5/ 节是/ 校园/ 通/ 系统/ 的/ 实例/ 分析/ 和/ 建模/ 工具/ 、/ 动画/ 工具/ 的/ 介绍/ ;/ 第/ 6/ 节是/ 总结/ 和/ 展望/ ./ 2/ 基于/ 行为/ 描述语言/ BDL/ 的/ 行为/ (/ 1/ )/ 系统/ 行为/ 模型/ 的/ 结构/ ./ 系统/ 名/ :/ 视点/ ID1/ 的/ 行为/ 模型/ ,/ …/ 视点/ IDn/ 的/ 行为/ 模型/ ./ (/ 2/ )/ 视点/ 行为/ 模型/ 的/ 结构/ ./ 视点/ ID/ :/ VPBEGIN/ [/ 视点/ 内/ 共享/ 数据/ 存储/ 池/ ID/ ]/ (/ 主要/ 用于/ 存放/ 由/ 其它/ 视/ Page4/ 点/ 传入/ 的/ 数据/ 或/ 视点/ 内/ 各/ 场景/ 共享/ 的/ 数据/ 等/ )/ 场景/ ID1/ 的/ 行为/ 模型/ ,/ …/ 场景/ IDn/ 的/ 行为/ 模型/ ./ VPBehID/ =/ 视点/ 行为/ 表达式/ VPEND/ (/ 3/ )/ 场景/ 行为/ 模型/ 的/ 结构/ ./ 场景/ ID/ [/ ,/ 场景/ ID/ ]/ :/ BEGIN/ [/ ABEH/ :/ (/ 注/ :/ 原子/ 行为/ 列表/ )/ BEH/ :/ (/ 注/ :/ 复合/ 行为/ 标识/ 前缀/ 必须/ 有/ Beh/ ,/ 以/ 区别/ 于/ BehID/ =/ 场景/ 行为/ 表达式/ [/ BehID/ =/ 子/ 行为/ 表达式/ 1/ ]/ ,/ …/ [/ BehID/ =/ 子/ 行为/ 表达式/ m/ ]/ ./ END/ (/ 4/ )/ BDL/ 的/ 语法结构/ 定义/ ./ 令/ ABehID/ 为/ 原子/ 行为/ 标识/ ,/ BehID/ 为/ 行为/ 标识/ ./ 1/ ./ 原子/ 行为/ ./ (/ 1/ )/ 原子/ 行为/ 表达式/ :/ ABehID/ :/ f/ (/ sub/ ,/ obj/ [/ obj/ 的/ 补充/ 说明/ ]/ [/ (/ x1/ ,/ …/ ,/ xk/ )/ ]/ )/ [/ When/ 前置条件/ ]/ [/ INFROM/ (/ ID/ )/ (/ u1/ ,/ …/ ,/ un/ )/ ]/ [/ OUTTO/ (/ ID/ )/ (/ v1/ ,/ …/ ,/ vm/ )/ ]/ f/ 为/ 主体/ sub/ 施/ 用于/ 客体/ obj/ 的/ 服务/ 、/ 操作/ 或/ 动作/ ./ xi/ 为/ 变量/ 符/ ./ 例/ :/ 张某/ 给/ 李某/ 一/ 本书/ / A/ α/ 1/ :/ Give/ (/ 张某/ ,/ 李某/ &/ 一/ 本书/ )/ ;/ 带/ When/ 的/ 原子/ 行为/ 相当于/ 语句/ “/ If/ 前置条件/ Then/ 行为/ Fi/ ”/ ./ 如果/ 有/ 分支/ 的/ 情况/ 可用/ 语句/ “/ If/ 前置条件/ Then/ 行为/ 或/ 行为/ 序列/ Else/ 行为/ 或/ 行为/ 序列/ Fi/ ”/ ;/ INFROM/ 表示/ 从/ ID/ 获得/ 数据/ ,/ 其中/ 输入/ 参数/ u1/ ,/ …/ ,/ un/ 表示/ 数据/ 名/ 或/ 数据/ 名/ =/ 数值/ 或/ 字符串/ ,/ 且/ ID/ =/ ABehID/ 或/ 视点/ 内/ 共享/ 数据/ 存储/ 池/ ID/ (/ 可以/ 为空/ )/ 或/ #/ 外部/ 实体/ 名/ ;/ 当/ 不同/ 的/ 数据/ 来自/ 不同/ 的/ ID/ 时/ ,/ 需用/ 多个/ INFROM/ 给予/ 表示/ ;/ OUTTO/ 表示/ 将/ 数据/ 输出/ 到/ ID/ ,/ 其中/ 输出/ 参数/ v1/ ,/ …/ ,/ vm/ 表示/ 数据/ 名/ 或/ 数据/ 名/ =/ 数值/ 或/ 字符串/ ,/ 且/ ID/ =/ ABehID/ 或/ #/ 视点/ ID/ 或/ 视点/ 内/ 共享/ 数据/ 存储/ 池/ ID/ (/ 可以/ 为空/ )/ 或/ #/ 外部/ 实体/ 名/ 或/ #/ 其它/ 视点/ ID/ ./ 当/ ID/ =/ #/ 其它/ 视点/ ID/ 时/ ,/ 数据/ v1/ ,/ …/ ,/ vm/ 将/ 被/ 放入/ 对应/ #/ 视点/ ID/ 的/ 共享/ 数据/ 存储/ 池中/ ./ 如果/ 要/ 将/ 不同/ 的/ 数据/ 输出/ 到/ 不同/ 的/ ID/ 时/ ,/ 需用/ 多个/ OUTTO/ 给予/ 表示/ ./ (/ 2/ )/ 未确定/ 客体/ 的/ 原子/ 行为/ :/ ABehID/ :/ f/ (/ sub/ ,/ ?/ )/ [/ When/ 前置条件/ ]/ [/ INFROM/ (/ ID/ )/ (/ u1/ ,/ …/ ,/ un/ )/ ]/ [/ OUTTO/ (/ ID/ )/ (/ v1/ ,/ …/ ,/ vm/ )/ ]/ (/ 3/ )/ 空/ 动作/ :/ ABehID/ :/ Idle/ ./ (/ 4/ )/ 复合/ 行为/ 结束/ 动作/ :/ ABehID/ :/ Return/ (/ ABehID/ )/ 或/ Return/ (/ )/ ./ 注意/ :/ Return/ (/ )/ 表示/ 正常/ 退出/ 系统/ ./ 2/ ./ 简单/ 行为/ ./ |/ -/ ABehID/ (/ 原子/ 行为/ 构成/ 简单/ 行为/ )/ ./ 3/ ./ 复合/ 行为/ ./ (/ 1/ )/ 顺序/ 行为/ :/ ①/ |/ -/ ABehID1/ |/ -/ ABehID2/ ②/ |/ -/ ABehID/ |/ -/ BehID1/ ③/ |/ -/ BehID1/ |/ -/ ABehID/ ④/ |/ -/ BehID1/ |/ -/ BehID2/ …/ |/ -/ BehIDn/ (/ 2/ )/ 确定/ 选择/ 行为/ :/ 注意/ :/ b/ 是/ BehID1/ 中/ 最/ 开始/ 原子/ 行为/ 中/ 的/ 前置条件/ ./ (/ 3/ )/ 非/ 确定/ 选择/ 行为/ :/ (/ 4/ )/ 并行/ 行为/ :/ 2.3/ 行为/ 描述语言/ 的/ 动态/ 语义/ 和/ α/ 为/ 原子/ 行为/ 标识/ ./ 令/ B/ ,/ B/ ,/ Bi/ (/ i/ =/ 1/ ,/ 2/ )/ 为/ 行为/ 表达式/ ,/ ABehID1/ ./ 顺序/ 行为/ ./ (/ 1/ )/ 当/ ABehID/ 为/ B/ 中不带/ 参数/ 的/ 最/ 开始/ 的/ 原子/ 行为/ ,/ 或是/ 带/ 未确定/ 客体/ 的/ 原子/ 行为/ ,/ 或是/ 复合/ 行为/ 结束/ 的/ 原子/ 行为/ 时/ ,/ (/ 2/ )/ 当/ ABehID/ (/ x1/ ,/ …/ ,/ xn/ )/ 为/ B/ 中带/ 参数/ 的/ 最/ 开始/ 的/ 原子/ 行为/ 时/ ,/ (/ 3/ )/ 当空/ 动作/ Idel/ 为/ B/ 中/ 最/ 开始/ 的/ 原子/ 行为/ 时/ ,/ 2/ ./ 非/ 确定/ 选择/ 行为/ ./ (/ 1/ )/ B1/ →/ / / α/ B1Page5/ (/ 2/ )/ B2/ →/ / / α/ B23/ ./ 并行/ 行为/ ./ (/ 1/ )/ B1/ →/ / / α/ B1/ (/ 2/ )/ B2/ →/ / / α/ B24/ ./ 确定/ 选择/ 行为/ ./ (/ 1/ )/ B1/ →/ / / α/ B1/ ,/ b/ 的/ 值/ 为/ 真/ (/ 2/ )/ B2/ →/ / / α/ B2/ ,/ b/ 的/ 值/ 为/ 假/ 在/ 需求/ 建模/ 过程/ 中/ ,/ 各/ 视点/ 虽然/ 是/ 相对/ 独立/ 的/ ,/ 但/ 不同/ 视点/ 间/ 的/ 需求/ 信息/ 可能/ 会/ 发生/ 重叠/ ./ 因此/ ,/ 由/ 不同/ 视点/ 产生/ 的/ 需求/ 模型/ 间会/ 产生/ 重叠/ 和/ 差异/ ,/ 从而/ 可能/ 会/ 导致/ 需求/ 模型/ 间/ 出现/ 需求/ 冲突/ 和/ 不/ 一致/ ./ 此外/ ,/ 有些/ 视点/ 可能/ 使用/ 不同/ 的/ 需求/ 建模/ 方法/ 和/ 技术/ 构建/ 需求/ 模型/ ,/ 更/ 增加/ 了/ 视点/ 间/ 容易/ 发生/ 需求/ 冲突/ 和/ 不/ 一致/ 的/ 可能性/ ./ 因此/ ,/ 在/ 形成/ 最终/ 需求/ 规约/ 之前/ ,/ 必须/ 检测/ 和/ 处理/ 视点/ 间/ 存在/ 的/ 需求/ 冲突/ 和/ 不/ 一致/ 问题/ ,/ 以/ 保证/ 复杂/ 系统/ 的/ 需求/ 的/ 正确性/ 和/ 一致性/ ./ 视点/ 检测/ 主要/ 包括/ 3/ 部分/ ,/ 即/ 语法/ 检查/ 、/ 语义/ 检查和/ 系统/ 特性/ 检测/ ./ 其中/ ,/ 前/ 两项/ 检查/ 需要/ 分别/ 在/ 视点/ 内及/ 视点/ 间/ 进行/ ,/ 系统/ 特性/ 检测/ 主要/ 利用/ 行为/ 时序/ 逻辑系统/ 检查/ 系统/ 的/ 特性/ 等/ ./ 3/ 需求/ 可视化/ 建模/ 行为/ 模型/ 建立/ 后/ ,/ 需要/ 确定/ 模型/ 所/ 描述/ 的/ 行为/ 是否是/ 用户/ 所/ 期望/ 的/ 目标/ 软件系统/ 的/ 行为/ ./ 一种/ 较/ 好/ 的/ 方法/ 是/ 采用/ 可视化/ 的/ 技术/ ,/ 该/ 技术/ 使/ 开发人员/ 能够/ 将/ 行为/ 模型/ 转换成/ 形象/ 的/ 动态/ 的/ 执行/ 过程/ ,/ 通过/ 直观/ 地/ 看到/ 需求/ 的/ 动态/ 执行/ 过程/ ,/ 辅助/ 各种/ 知识/ 背景/ 的/ 用户/ 确切/ 地/ 理解/ 需求/ 中/ 的/ 行为/ 过程/ ,/ 并且/ 促使/ 用户/ 加入/ 需求/ 校验/ 过程/ ,/ 获取/ 有效/ 的/ 用户/ 反馈/ ,/ 提高/ 需求/ 分析/ 的/ 效率/ ,/ 减少/ 软件开发/ 后续/ 阶段/ 的/ 需求/ 变更/ ./ 在/ 使用/ BDL/ 建立/ 了/ 需求/ 的/ 行为/ 模型/ 后/ ,/ 开发人员/ 首先/ 使用/ 模型/ 转换/ 的/ 方法/ 将/ 行为/ 模型/ 转换成/ 状态机/ ,/ 作为/ 需求/ 动画/ 的/ 模型/ ./ 再/ 根据/ 工程/ 需要/ 选择/ 需求/ 可视化/ 描述/ 的/ 实体/ 集/ ,/ 并/ 选择/ 对应/ 的/ 图形/ 和/ 图片/ 以/ 直观/ 地/ 表达/ 所/ 选择/ 的/ 实体/ ./ 然后/ ,/ 根据/ 所/ 选择/ 的/ 实体/ 集/ ,/ 利用/ 状态/ 抽取/ 的/ 方法/ 从/ 模型/ 中/ 提取/ 该/ 演示/ 范围/ 内/ 与/ 这些/ 实体/ 对应/ 的/ 状态/ 块/ ,/ 并/ 将/ 每个/ 状态/ 块/ 中/ 的/ 迁移/ 与/ 提供/ 的/ 动作/ 原语/ 进行/ 关联/ ,/ 作为/ 行为/ 的/ 可视化/ 描述/ ./ 当/ 状态机/ 执行/ 时/ ,/ 驱动/ 动画/ 引擎/ 根据/ 状态/ 块/ 中/ 对应/ 的/ 迁移/ ,/ 调用/ 相关联/ 的/ 动作/ 原语/ ,/ 控制/ 与/ 对象/ 关联/ 的/ 图形/ 运动/ ,/ 从而/ 直观/ 地/ 表现/ 出/ 需求/ 模型/ 所/ 描述/ 的/ 行为/ 过程/ ./ 简而言之/ ,/ 需求/ 可视化/ 的/ 制作/ 是/ 通过/ 行为/ 描述语言/ BDL/ 进行/ 需求/ 建模/ ,/ 提炼出/ 其中/ 的/ 行为/ 模型/ ,/ 将/ 行为/ 模型/ 转换/ 为/ 动画/ 描述/ 模型/ ,/ 最终/ 通过/ 执行/ 引擎/ 转换/ 为/ 需求/ 动画/ 的/ 过程/ ./ 3.1/ 设置/ 动画/ 元素/ 的/ 内容/ 和/ 用法/ 根据/ 需求/ 建模/ 的/ 过程/ ,/ 可以/ 得到/ 一个/ 基于/ BDL/ 语句/ 的/ 需求/ 行为/ 模型/ ./ 由/ 行为/ 模型/ 中/ 选定/ 的/ 主客体/ 对象/ ,/ 可/ 设置/ 与/ 主客体/ 对象/ 对应/ 的/ 动画/ 元素/ 和/ 这些/ 对象/ 活动/ 的/ “/ 舞台/ 背景图片/ ”/ ./ “/ 舞台/ 背景图片/ ”/ 是/ 动画/ 对象/ 显示/ 的/ 背景图片/ ,/ 可以/ 将/ 所有/ 动画/ 过程/ 中不动/ 的/ 背景/ 设计/ 到/ “/ 舞台/ 背景图片/ ”/ 中/ ./ 与/ 主客体/ 对象/ 对应/ 的/ 动画/ 元素/ 包括/ 主客体/ 名/ 、/ 关联/ 图片/ 、/ 类型/ 、/ 初始/ x/ 坐标/ 、/ 初始/ y/ 坐标/ 、/ 摆放/ 层次/ 深度/ ./ 动画/ 元素/ 的/ 内容/ 和/ 用法/ 如表/ 1/ 所示/ ./ 动画/ 元素/ 主客体/ 名/ 动画设计/ 人员/ 所/ 填写/ 的/ 对象/ 列表/ 中/ 的/ 那些/ 对象/ 关联/ 图片/ 类型/ 初始/ x/ 坐标/ 关联/ 图片/ 左上角/ 在/ 背景图片/ 上面/ 位置/ 的/ 初始/ 横/ 初始/ y/ 坐标/ 关联/ 图片/ 左上角/ 在/ 背景图片/ 上面/ 位置/ 的/ 初始/ 纵/ 摆放/ 层次/ 深度/ 对于/ 任何/ 一个/ 主客体/ 对象/ ,/ 都/ 需要/ 设置/ 其/ 对应/ 的/ 动画/ 元素/ ,/ 可以/ 逐个/ 地/ 采用/ “/ 关联/ 图片/ ”/ 的/ 方式/ 设置/ 每/ 一个/ 对象/ 的/ 动画/ 元素/ ./ 3.2/ 编辑/ 行为/ 动画/ 行为/ 动画/ 是/ 指/ 动画/ BDL/ 模型/ 原子/ 行为/ 对应/ 的/ 动画/ 操作/ 原语/ 的/ 序列/ ./ 这些/ 操作/ 序列/ 在/ BDL/ 模型/ 的/ 驱动/ 控制/ 下/ ,/ 形成/ 了/ 一个/ 完整/ 的/ 动画/ ,/ 而/ 单个/ 的/ 原子/ 行为/ 动画/ 是/ 完整/ 动画/ 的/ 最小/ 组成部分/ ./ 行为/ 动画/ 采用/ 简单/ 的/ 原语/ 语句/ 来/ 控制/ 图片/ 的/ 显示/ 和/ 运动/ ,/ 这些/ 原语/ 语句/ 的/ 序列/ 组成/ 了/ 一个/ 单个/ 的/ 原子/ 行为/ 动画/ ./ Page6/ 提供/ 几个/ 基本/ 的/ 动作/ 原语/ 用于/ 表达/ 动画/ 中/ 对象/ 的/ 基本/ 动作/ ./ 对于/ 模型/ 中/ 每/ 一个/ 行为/ ,/ 开发人员/ 根据/ 需要/ 将/ 原语/ 进行/ 组合/ ,/ 设置/ 合适/ 的/ 参数/ ,/ 从而/ 较/ 形象/ 地/ 表达/ 出/ 模型/ 中/ 每个/ 行为/ 的/ 执行/ 效果/ ./ 模型/ 执行/ 的/ 过程/ 中/ ,/ 状态/ 块/ 中/ 的/ 迁移/ 依据/ 语义/ 所/ 描述/ 的/ 时序/ 关系/ 被/ 触发/ ,/ 驱动/ 动画/ 引擎/ 解释/ 执行/ 对应/ 的/ 动画/ 原语/ ,/ 从而/ 动态/ 地/ 表现/ 出/ 模型/ 中/ 所/ 描述/ 的/ 目标软件/ 的/ 行为/ 过程/ ./ 提供/ 的/ 动作/ 原语/ 及其/ 功能/ 如表/ 2/ 所示/ ./ MOV/ (/ 对象/ ,/ x/ 坐标/ ,/ y/ 坐标/ ,/ 毫秒/ 数/ t/ )/ ;/ RESHOW/ (/ 对象/ )/ ;/ 重新/ 显示/ 对象/ ,/ 即/ 在/ 原/ 位置/ 重新/ 显/ SHOWP/ (/ 对象/ ,/ 图片/ 名/ )/ ;/ 将/ 对象/ 显示/ 为/ 图片/ 名/ 对应/ 的/ 图片/ SHOWXYP/ (/ 对象/ ,/ x/ 坐标/ ,/ y/ 坐标/ ,/ 图片/ 名/ p/ )/ ;/ DIS/ (/ 对象/ )/ ;/ STOP/ (/ 毫秒/ 数/ t/ )/ ;/ SEND/ (/ if/ 表达式/ ,/ 真假/ 值/ )/ ;/ 将/ if/ 表达式/ 的/ 值置/ 为/ 相应/ 的/ 真假/ 需要/ 根据/ 原子/ 行为/ 表达式/ 中/ 的/ 动作/ 、/ 主客体/ 、/ INFROM/ 、/ OUTTO/ 描述/ 来/ 设计/ 其/ 对应/ 的/ 行为/ 动画/ ,/ 通过/ 上述/ 动画/ 原语/ 的/ 组合/ 来/ 表达/ 所/ 需/ 的/ 动画/ 效果/ ./ 当/ 设计/ 完成/ 某/ 一个/ 原子/ 行为/ 对应/ 的/ 行为/ 动画/ 后/ ,/ 可以/ 在/ 相应/ 行为/ 名/ 对应/ 的/ 文本框/ 内/ 填写/ 相应/ 的/ 行为/ 动画/ 原语/ 序列/ ./ MOV/ 原语/ 以及/ STOP/ 原语/ 中/ 的/ 时间/ 取值/ 由/ 开发人员/ 根据/ 同步/ 以及/ 动画/ 效果/ 的/ 需要/ 而/ 确定/ ./ SEND/ 原语/ 主要/ 用于/ 行为/ 的/ 迁移/ 过程/ 中/ 控制/ 过程/ 表达式/ 的/ 取值/ ,/ 从而/ 在/ 动画/ 执行/ 过程/ 中/ 动态/ 地/ 控制/ 模型/ 的/ 流程/ ./ 利用/ 表/ 2/ 中/ 的/ 原语/ ,/ 可以/ 简单/ 直观/ 地/ 描述/ 软件/ 的/ 执行/ 过程/ ,/ 例如/ 需要/ 对/ “/ 软件/ 模块/ A/ 发送/ 消息/ m/ 到/ 模块/ B/ ”/ 进行/ 动画/ 表达/ ,/ 首先/ 可/ 使用/ 两个/ 标识/ 软件/ 模块/ 的/ 图形/ 分别/ 表示/ 软件/ 模块/ A/ 和/ 软件/ 模块/ B/ ,/ 然后/ 用带/ 文本/ 提示/ 的/ 消息/ 块/ 来/ 描述/ 抽象/ 的/ 消息/ m/ ,/ 再/ 使用/ MOV/ 原语/ 将/ 消息/ 块/ m/ 从/ A/ 移动/ 到/ B/ ./ 3.3/ 设置/ if/ 分支/ 值/ If/ 表达式/ 是/ BDL/ 模型/ 中/ 用于/ 确定/ 当前/ 那一/ 分支/ 行为/ 发生/ 的/ 条件/ 语句/ ,/ 在/ 动画/ 的/ 动态/ 运行/ 中其值/ 可以/ 为/ true/ 或/ false/ ./ 由于/ 在/ 动画/ 运行/ 过程/ 中/ ,/ 需要/ 确定/ if/ 表达式/ 的/ 值/ ,/ 因此/ 必须/ 设置/ ./ 此外/ ,/ 在/ 初始/ 设置/ 动画/ 模型/ 遇到/ if/ 分支/ 时/ 采取/ 的/ 措施/ 是/ :/ if/ 表达式/ 初始值/ 可/ 设置/ 为/ :/ random/ 、/ true/ 、/ false/ ./ Random/ 方式/ 是/ 当/ 动画/ 模型/ 执行/ 到/ if/ 分支/ ,/ 随机/ 的/ 选择/ 为/ true/ 、/ false/ ./ True/ 或/ false/ 方式/ 即/ 设置/ 为/ 固定/ 的/ 值/ true/ 、/ false/ ./ 完成/ 了/ 包括/ 设置/ 舞台/ 背景/ 和/ 主客体/ 、/ 编写/ 行为/ 动画/ 、/ 设置/ if/ 分支/ 初始值/ 后/ ,/ 若需/ 运行/ 动画/ ,/ 则/ 先要/ 生成/ 动画/ 的/ 执行/ 模型/ ./ 3.4/ 动画/ 执行/ 引擎/ 行为/ 模型/ 描述/ 了/ 软件/ 的/ 执行/ 过程/ ,/ 每/ 一个/ 原子/ 行为/ 说明/ 了/ 一个/ 主体/ 与/ 一个/ 客体/ 之间/ 的/ 动作/ 交互/ ./ 然而/ ,/ 在/ 进行/ 动画/ 描述/ 时/ ,/ 需要/ 明确/ 地/ 知道/ 模型/ 执行/ 过程/ 中/ ,/ 每/ 一个/ 动画/ 实体/ 的/ 状态/ 变化/ ,/ 然后/ 才能/ 将/ 这种/ 状态/ 变化/ 使用/ 图形/ 物理变化/ 的/ 方式/ 表达出来/ ,/ 使得/ 用户/ 能够/ 直观/ 地/ 理解/ 模型/ 的/ 变化/ ./ 采用/ 状态机/ 和/ 状态/ 块/ 作为/ 动画/ 的/ 执行/ 模型/ 和/ 描述/ 模型/ ,/ 根据/ 需要/ 关注/ 的/ 对象/ ,/ 可以/ 从/ 状态机/ 中/ 抽取/ 出/ 一组/ 状态/ 块/ ,/ 每个/ 状态/ 块/ 描述/ 一个/ 对象/ 的/ 状态/ 迁移/ 模型/ ./ 为了/ 在/ 动画/ 模拟/ 时/ 展示/ 该/ 对象/ ,/ 需要/ 将/ 该/ 对象/ 与/ 一个/ 图形/ 关联/ 起来/ ./ 对于/ 对象/ 状态/ 块/ 中/ 的/ 迁移/ ,/ 设计/ 了/ 一组/ 描述/ 图形/ 运动/ 的/ 动作/ 原语/ (/ 如表/ 2/ 所示/ )/ ,/ 通过/ 将/ 迁移/ 与/ 动作/ 原语/ 进行/ 关联/ ,/ 便/ 可以/ 直观/ 地/ 表达/ 对象/ 状态/ 变化/ 的/ 过程/ ./ 将/ 行为/ 模型/ 转换成/ 状态机/ ,/ 并且/ 从/ 状态机/ 中/ 抽取/ 出/ 描述/ 每/ 一个/ 对象/ 或者/ 逻辑/ 单位/ 行为/ 及/ 状态/ 变化/ 的/ 状态/ 块/ ,/ 生成/ 的/ 状态机/ 是/ 驱动/ 动画/ 引擎/ 产生/ 动画/ 动作/ 的/ 执行/ 模型/ ,/ 而/ 状态/ 块/ 则/ 是/ 用于/ 描述/ 动画/ 脚本/ 的/ 描述/ 模型/ ,/ 描述/ 了/ 每个/ 对象/ 的/ 状态/ 变迁/ 过程/ ./ 状态/ 块/ 的/ 形式/ 模型/ 同/ 状态机/ 的/ 一样/ ,/ 状态机/ 及/ 状态/ 块/ 在/ 内部/ 表示/ 时/ 都/ 使用/ XML/ 文件/ 进行/ 描述/ ,/ 以便/ 于/ 动画/ 执行/ 引擎/ 解释/ 执行/ ./ 每/ 一个/ 对象/ 的/ 状态/ 块/ ,/ 使用/ 一个/ 以该/ 对象/ ID/ 为/ 名称/ 的/ XML/ 文件/ 进行/ 描述/ ,/ 文件/ 内部/ 仅/ 记录/ 该/ 状态/ 块/ 的/ 迁移/ 结构/ ,/ 而/ 并/ 不/ 设计/ 对象/ 与/ 图形/ 的/ 关联/ 信息/ 以及/ 迁移/ 与/ 动作/ 的/ 关联/ 信息/ ./ 这样/ 的/ 设计/ 使得/ 模型/ 与/ 关联/ 相互/ 独立/ ,/ 一方面/ 便于/ 模型/ 和/ 动画/ 独立/ 地/ 进行/ 修改/ ,/ 另一方面/ ,/ 开发人员/ 可/ 根据/ 需要/ 为/ 同一个/ 模型/ 制作/ 多个/ 需求/ 动画/ ,/ 而/ 这个/ 工作/ 只/ 需要/ 增加/ 新/ 的/ 关联/ 文件/ 即可/ ./ 每/ 一个/ 状态/ 迁移/ 都/ 对应/ 一个/ 需要/ 进行/ 可视化/ 描述/ 的/ 行为/ ,/ 一个/ 关联/ 元素/ 将/ 状态/ 块/ 模型/ 中/ 的/ 一个/ 迁移/ 与/ 一个/ 动作/ 原语/ 进行/ 关联/ ./ 需求/ 动画/ 执行/ 时/ ,/ 动画/ 执行/ 引擎/ 驱动/ 状态/ 块/ 发生/ 状态/ 迁移/ ,/ 在/ 关联/ 列表/ 中/ 查询/ 这些/ 迁移/ 对应/ 的/ 动作/ 原语/ ,/ 控制/ 图形/ 的/ 运动/ ./ 需求/ 动画/ 的/ 执行/ 机制/ 如图/ 2/ 所示/ ,/ 具体/ 执行/ 步骤/ 描述/ 如下/ :/ (/ 1/ )/ 首先/ 根据/ 对象/ 可视化/ 中/ XML/ 文件/ 所/ 描述/ Page7/ 的/ 动画/ 背景/ 、/ 对象/ 与/ 图形/ 的/ 关联/ 信息/ 以及/ 图形/ 的/ 初始/ 坐标/ ,/ 布置/ 动画/ 舞台/ 的/ 初始/ 信息/ ;/ 迁移/ 的/ 时序/ 结构/ 进行/ 执行/ ;/ (/ 2/ )/ 启动/ 驱动/ 动画/ 执行/ 的/ 状态机/ ,/ 根据/ 状态机/ (/ 3/ )/ 在/ 状态机/ 的/ 执行/ 路径/ 中/ ,/ 每次/ 经过/ 一个/ 迁图/ 2/ 需求/ 动画/ 执行/ 机制/ 行为/ 模型/ 中/ 的/ 一个/ 原子/ 行为/ 对应/ 于/ 状态/ 模型/ 中/ 的/ 一个/ 事件/ 迁移/ ,/ 因此/ 在/ 状态机/ 的/ 执行/ 过程/ 中/ ,/ 可以/ 同步/ 将/ 当前/ 执行/ 的/ 迁移/ 所/ 对应/ 的/ 原子/ 行为/ 显示/ 出来/ ,/ 使/ 用户/ 能够/ 看到/ 需求/ 模型/ 与/ 需求/ 动画/ 的/ 同步/ 执行/ 过程/ ./ 3.5/ 动画/ 演示/ 运行/ 动画/ 以后/ ,/ 系统/ 进入/ 动画/ 演示/ 的/ 界面/ ,/ 动画/ 演示/ 界面/ 由/ 3/ 个/ 部分/ 组成/ ,/ “/ 运行/ 动画/ 窗口/ ”/ 、/ “/ 行为/ 踪迹/ 窗口/ ”/ 和/ “/ BDL/ 模型/ 窗口/ ”/ ./ “/ 运行/ 动画/ 窗口/ ”/ 为主/ 窗口/ ,/ 其/ 功能/ 为/ 控制/ 动画/ 演习/ 的/ 开始/ 、/ 暂停/ 、/ 重新/ 开始/ ,/ 并/ 显示/ 由/ BDL/ 模型/ 驱动/ 的/ 动画/ ./ 行为/ 踪迹/ 窗口/ 中/ ,/ 显示/ 和/ 纪录/ 了/ 动画/ 运行/ 过程/ 中/ 原子/ 行为/ 的/ 轨迹/ ,/ 并用/ 红色/ 字/ 亮色/ 背景/ 显示/ 当前/ 正在/ 运行/ 的/ 行为/ ,/ 系统分析员/ 和/ 用户/ 可以/ 根据/ 轨迹/ 和/ 动画/ 效果/ 来/ 考察/ 目标/ 系统/ 的/ 需求/ ./ 左侧/ 的/ “/ BDL/ 模型/ 窗口/ ”/ ,/ 用/ 红色/ 字/ 亮色/ 背景/ 显示/ 了/ 当前/ 运行/ 的/ 原子/ 行为/ 在/ BDL/ 模型/ 中/ 的/ 位置/ ,/ 并/ 与/ 行为/ 踪迹/ 和/ 动画/ 同步/ ./ 4/ 模型/ 转换规则/ 的/ 正确性/ 为了/ 对/ 行为/ 模型/ 进行/ 可视化/ 描述/ ,/ 首先/ 需要/ 将/ 行为/ 模型/ 转换成/ 状态/ 模型/ ./ 行为/ 模型/ 形式化/ 地/ 描述/ 了/ 目标/ 软件系统/ 与/ 问题/ 域/ 中/ 实体/ 之间/ 的/ 交互/ 过程/ ,/ 以及/ 目标/ 软件系统/ 内部/ 模块/ 之间/ 的/ 一些/ 行为/ ;/ 状态/ 移/ ,/ 执行/ 引擎/ 便/ 查询/ 该/ 迁移/ 是否/ 有/ 对应/ 的/ 状态/ 块/ ,/ 若有/ ,/ 则/ 驱动/ 该/ 状态/ 块/ 产生/ 一个/ 对应/ 的/ 迁移/ ;/ (/ 4/ )/ 状态/ 块/ 中/ 的/ 迁移/ 跳转/ 时/ ,/ 执行/ 引擎/ 查询/ 并/ 调用/ 与/ 该/ 迁移/ 对应/ 的/ 动作/ 原语/ ,/ 动作/ 原语/ 控制/ 舞台/ 上/ 图形/ 的/ 状态/ 变化/ ,/ 从而/ 产生/ 动画/ 效果/ ./ 模型/ 则/ 关注/ 系统/ 中/ 某个/ 抽象层次/ 下/ 个体/ 的/ 状态/ 变化/ ./ 本节/ 研究/ 证明/ 行为/ 模型/ 到/ 状态/ 模型/ 转换规则/ 的/ 正确性/ :/ 研究/ 了/ 行为/ 表达式/ 的/ 强互/ 模拟/ 、/ 状态/ 结构式/ 的/ 强互/ 模拟/ 以及/ 行为/ 表达式/ 与/ 状态/ 结构式/ 之间/ 互/ 模拟/ 这些/ 关系/ 之间/ 的/ 关系/ ;/ 证明/ 了/ 行为/ 模型/ 与其/ 转换/ 后/ 的/ 状态/ 模型/ 之间/ 是/ 互/ 模拟/ 等价/ 的/ ./ 考虑/ 到/ 与/ 行为/ 模型/ 的/ 衔接/ 性/ 和/ 研究/ 的/ 通用性/ ,/ 选择/ 使用/ 状态机/ 作为/ 描述/ 对象/ 状态/ 变化/ 的/ 模型/ ./ 下面/ 给出/ 一种/ 描述/ 状态机/ 结构/ 的/ 结构式/ ,/ 在/ 此基础/ 上/ 可/ 完成/ 从/ 行为/ 模型/ 到/ 状态/ 模型/ 的/ 转换/ 工作/ ./ 定义/ 1/ ./ 状态机/ 中/ 的/ 迁移/ 是/ 一个/ 五元/ 组/ :/ 式/ 中/ ,/ Ss/ 表示/ 迁移/ 源/ 状态/ 集/ ;/ St/ 表示/ 迁移/ 目的/ 状态/ 集/ ;/ G/ 是/ 描述/ 迁移/ 执行/ 前提/ 的/ 布尔/ 表达式/ 集/ ;/ E/ 和/ B/ 分别/ 表示/ 迁移/ 产生/ 的/ 事件/ 集/ 和/ 执行/ 的/ 动作/ 集/ ./ 定义/ 2/ ./ 一个/ 状态/ 结构式/ 是/ 一个/ 五元/ 组/ :/ M/ =/ (/ Sm/ ,/ Tm/ ,/ R/ _/ FATHERm/ ,/ sim/ ,/ som/ )/ ,/ 其中/ ,/ Sm/ 和/ Tm/ 分别/ 是/ 状态/ 结构式/ 内/ 的/ 状态/ 集/ 和/ 迁移/ 集/ ,/ / t/ ∈/ Tm/ ,/ t/ ./ ss/ ∈/ Sm/ ,/ t/ ./ ds/ ∈/ Sm/ ;/ R/ _/ FATHERm/ 是/ 状态/ 结构式/ 内/ 状态/ 的/ 层次/ 关系/ ;/ sim/ ∈/ Sm/ 是/ 状态/ 结构式/ 内/ 的/ 起始/ 状态/ ,/ 满足/ :/ / s/ ∈/ Sm/ ,/ sim/ / s/ ,/ 且/ 若/ / t/ ∈/ Tm/ ,/ t/ ./ ds/ =/ sim/ ,/ 则/ sim/ ∈/ Sm/ ∩/ Sinit/ ;/ som/ ∈/ Sm/ 是/ 状态/ 结构式/ 内/ 的/ 结束/ 状态/ ,/ 满足/ :/ / s/ ∈/ Sm/ ,/ s/ / som/ ,/ 且/ 若/ / t/ ∈/ Tm/ ,/ t/ ./ ss/ =/ som/ ,/ 则/ t/ ./ ds/ ∈/ Sm/ ∩/ Sinit/ ./ Page8/ 其中/ ,/ s/ 〈/ M1/ 〉/ 表示/ 一个/ 复合/ 状态/ s/ ,/ 复合/ 状态/ 内部结构/ 用/ M1/ 表示/ ,/ M1/ ;/ M2/ 表示/ 两个/ 状态/ 结构/ 之间/ 的/ 顺序/ 关系/ ,/ M1/ ‖/ M2/ 表示/ 两个/ 状态/ 结构/ 之间/ 的/ 并行/ 关系/ ,/ M1/ +/ M2/ 表示/ 两个/ 状态/ 结构/ 之间/ 的/ 选择/ 关系/ ./ 定义/ 3/ ./ ψ/ :/ BDL/ →/ M/ 是/ 事件/ 行为/ 表达式/ 到/ 状态/ 结构式/ 的/ 模型/ 转换/ ,/ 引入/ Γ/ :/ BDL/ →/ Μ/ 为/ 事件/ 行为/ 表达式/ 到/ 状态/ 结构式/ 之间/ 的/ 模块/ 映射函数/ ,/ 对/ 任意/ 事件/ 行为/ 表达式/ B/ ∈/ BDL/ ,/ 模型/ 转换规则/ 为/ 其中/ ,/ s0/ ∈/ Sinit/ 是/ 模型/ 的/ 初始状态/ ;/ sf/ ∈/ sfin/ 是/ 模型/ 的/ 最终/ 状态/ ;/ s0/ ./ ot/ =/ INT/ (/ Γ/ (/ B/ )/ )/ ,/ sf/ ./ it/ =/ OUT/ (/ Γ/ (/ B/ )/ )/ ,/ 且/ sf/ ./ it/ ∈/ T/ τ/ ./ 定义/ 4/ ./ 事件/ 系统/ 与/ 状态/ 系统/ 的/ 伪/ 模拟/ 关系/ ./ (/ C/ ,/ EB/ ,/ →/ ,/ B0/ )/ 和/ (/ M/ ,/ T/ ,/ →/ ,/ M0/ )/ 分别/ 是/ 事件/ 行为/ 迁移/ 系统/ 和/ 状态/ 结构式/ 迁移/ 系统/ ,/ 称/ 关系/ ρ/ η/ / C/ ×/ Μ/ 是/ 事件/ 系统/ 与/ 状态/ 系统/ 的/ 伪/ 模拟/ 关系/ ,/ 若/ 对于/ 所有/ 的/ B/ ρ/ η/ M/ 有/ 若/ B/ (/ e/ ,/ α/ →/ / / )/ B/ ,/ 则/ 存在/ t/ ,/ t/ ./ e/ =/ e/ ,/ t/ ./ b/ =/ α/ 且/ M/ / tM/ ,/ 若/ B/ →/ / / 1B/ ,/ 则/ 有/ M/ / 1M/ ,/ 使得/ B/ ρ/ η/ M/ ./ 定义/ 5/ ./ 状态/ 系统/ 与/ 事件/ 系统/ 的/ 伪/ 模拟/ 关系/ ./ (/ C/ ,/ EB/ ,/ →/ ,/ B0/ )/ 和/ (/ M/ ,/ T/ ,/ →/ ,/ M0/ )/ 分别/ 是/ 事件/ 行为/ 迁移/ 系统/ 和/ 状态/ 结构式/ 迁移/ 系统/ ,/ 称/ 关系/ η/ ρ/ / M/ ×/ C/ 状态/ 系统/ 与/ 事件/ 系统/ 的/ 伪/ 模拟/ 关系/ ,/ 若/ 对于/ 所有/ 的/ M/ η/ ρ/ B/ 有/ 使得/ B/ ρ/ η/ M/ ;/ 状态/ 结构式/ 的/ 语法结构/ 如下/ :/ M/ ∷/ =/ s/ |/ s/ 〈/ M1/ 〉/ |/ M1/ ;/ M2/ |/ M1/ ‖/ M2/ |/ M1/ +/ M2/ ,/ 若/ 存在/ t/ ∈/ Ta/ ,/ 使得/ M/ →/ / / tM/ ,/ 存在/ B/ 以及/ 迁移/ (/ e/ ,/ α/ )/ ,/ t/ ./ e/ =/ e/ ,/ α/ =/ t/ ./ b/ 且/ B/ (/ e/ ,/ α/ →/ / / )/ B/ ,/ 使得/ B/ ρ/ η/ M/ ;/ 若/ M/ / 1M/ ,/ 则/ 有/ B/ →/ / / 1B/ ,/ 使得/ B/ ρ/ η/ M/ ./ 定义/ 6/ ./ 事件/ 系统/ 与/ 状态/ 系统/ 的/ 互/ 模拟/ 关系/ ./ 事件/ 行为/ 表达式/ B/ 与/ 状态/ 结构式/ M/ 是/ 互/ 模拟/ 关系/ ,/ 当且/ 仅/ 当/ 存在/ 事件/ 系统/ 与/ 状态/ 系统/ 的/ 模拟/ 关系/ ρ/ η/ 使得/ B/ ρ/ η/ M/ ,/ 且/ ρ/ η/ -/ 1/ 是/ 事件/ 系统/ 与/ 状态/ 系统/ 的/ 伪/ 模拟/ 关系/ 使得/ (/ M/ ,/ B/ )/ ∈/ ρ/ η/ -/ 1/ ./ 记为/ B/ ~/ epM/ ./ 引入/ 事件/ 互/ 模拟/ upto/ ~/ ep/ ,/ 作为/ 模型/ 验证/ 和/ 证明/ 工作/ 的/ 理论/ 基础/ ./ 首先/ 引入/ 一种/ 事件/ 与/ 结构/ 的/ 互/ 模拟/ 组合/ 关系/ :/ 给定/ 一个/ 关系/ R/ / C/ ×/ M/ ,/ 对于/ 行为/ 表达式/ B/ 和/ 状态/ 结构式/ M/ ,/ 如果/ 存在/ B/ 和/ M/ ,/ 使得/ B/ ~/ evB/ ,/ BRC/ ,/ C/ ~/ pC/ ,/ 则/ B/ ,/ C/ 的/ 关系/ 记为/ B/ ~/ evR/ ~/ pC/ ./ 定义/ 7/ ./ 称/ R/ / C/ ×/ M/ 是/ 事件/ 系统/ 与/ 状态/ 系统/ 的/ 互/ 模拟/ upto/ ~/ ep/ ,/ 若/ 存在/ 关系/ BRM/ 可/ 推导/ 出/ :/ 若/ B/ (/ e/ ,/ α/ →/ / / )/ B/ ,/ 则/ 存在/ t/ ,/ t/ ./ e/ =/ e/ ,/ t/ ./ b/ =/ α/ 且/ M/ / tM/ ,/ 使得/ B/ ~/ evR/ ~/ pM/ ;/ 若/ B/ →/ / / 1B/ ,/ 则/ 有/ M/ / 1M/ ,/ 使得/ B/ ~/ evR/ ~/ pM/ ;/ 若/ 存在/ t/ ∈/ Ta/ ,/ 使得/ M/ →/ / / tM/ ,/ 存在/ B/ 以及/ 迁移/ (/ e/ ,/ α/ )/ ,/ t/ ./ e/ =/ e/ ,/ α/ =/ t/ ./ b/ 且/ B/ (/ e/ ,/ α/ →/ / / )/ B/ ,/ 使得/ B/ ~/ evR/ ~/ pM/ ;/ 若/ M/ / 1M/ ,/ 则/ 有/ B/ →/ / / 1B/ ,/ 使得/ B/ ~/ evR/ ~/ pM/ ./ 以上/ 四者/ 之间/ 为/ 或者/ 关系/ ./ 定理/ 1/ ./ 如果/ R/ 是/ 事件/ 系统/ 与/ 状态/ 系统/ 的/ 互/ 模拟/ upto/ ~/ ep/ ,/ 则/ ~/ evR/ ~/ p/ / ~/ ep/ ,/ R/ / ~/ ep/ ./ 证明/ ./ 证明/ 过程/ 类似/ 事件/ 互/ 模拟/ upto/ ~/ ev/ ,/ 此处/ 不再/ 赘述/ ./ 根据/ 该/ 定理/ ,/ 可知/ ,/ 只要/ 能够/ 验证/ 关系/ R/ 是/ upto/ ~/ ep/ ,/ 则/ 可以/ 证明/ ~/ evR/ ~/ p/ 是/ 事件/ 系统/ 与/ 状态/ 结构/ 的/ 互/ 模拟/ 关系/ ./ 定理/ 2/ ./ B/ ~/ epM/ 当且/ 仅/ 当/ :/ 若/ B/ (/ e/ ,/ α/ →/ / / )/ B/ ,/ 则/ 存在/ t/ ,/ t/ ./ e/ =/ e/ ,/ t/ ./ b/ =/ α/ 且/ M/ / tM/ ,/ 使得/ B/ ~/ epM/ ;/ 若/ B/ →/ / / 1B/ ,/ 则/ 有/ M/ / 1M/ ,/ 使得/ B/ ~/ epM/ ;/ 若/ 存在/ t/ ∈/ Ta/ ,/ 使得/ M/ →/ / / tM/ ,/ 存在/ B/ 以及/ 迁移/ (/ e/ ,/ α/ )/ ,/ e/ =/ t/ ./ e/ ,/ α/ =/ t/ ./ b/ 且/ B/ (/ e/ ,/ α/ →/ / / )/ B/ ,/ 使得/ B/ ~/ epM/ ;/ 若/ M/ / 1M/ ,/ 则/ 有/ B/ →/ / / 1B/ ,/ 使得/ B/ ~/ epM/ ./ 以上/ 几者/ 之间/ 为/ 或者/ 关系/ ./ 证明/ ./ 证明/ 过程/ 类似/ 事件/ 互/ 模拟/ 中/ 的/ 证明/ ,/ 此处/ 不再/ 赘述/ ./ 该/ 定理/ 说明/ 具有/ 互/ 模拟/ 的/ 一对/ 行为/ 表达式/ 和/ 状态/ 结构式/ ,/ 它们/ 的/ 演化/ 行为/ 表达式/ 和/ 演化/ 状态/ 结构式/ 之间/ 也/ 对应/ 具有/ 互/ 模拟/ 关系/ ./ 定理/ 3/ ./ 若/ B1/ ~/ epM1/ ,/ B2/ ~/ epM2/ ,/ 则/ (/ 1/ )/ B1/ ;/ B2/ ~/ epM1/ ;/ M2/ ;/ (/ 2/ )/ B1/ ‖/ B2/ ~/ epM1/ ‖/ M2/ ;/ (/ 3/ )/ B1/ +/ B2/ ~/ epM1/ +/ M2/ ;/ (/ 4/ )/ ifbthenB1elseB2fi/ ~/ ep/ 证明/ ./ 这里/ 给出/ (/ 1/ )/ 式/ 的/ 证明/ ,/ 其它/ 关系式/ 的/ (/ 1/ )/ 式/ 的/ 证明/ :/ 假设/ B1/ ~/ epM1/ ,/ B2/ ~/ epM2/ ,/ 需要/ 证明/ 下列/ 命题/ 证明/ 过程/ 类似/ ./ 成立/ :/ Page9/ 使得/ 对/ 任意/ 格局/ C/ ,/ B1/ ;/ B2/ / C/ ,/ 则/ 存在/ M1/ ;/ M2/ / M/ ,/ ①/ 若/ C/ (/ e/ ,/ α/ →/ / / )/ C/ ,/ 存在/ M/ 以及/ 迁移/ t/ ,/ t/ ./ e/ =/ e/ ,/ t/ ./ b/ =/ α/ 且/ M/ →/ / / tM/ ,/ 使得/ C/ ~/ evM/ ;/ ②/ 若/ C/ →/ / / 1C/ ,/ 则/ 有/ M/ →/ / / 1M/ ,/ 使得/ C/ ~/ evM/ ./ 对/ 任意/ 状态/ 结构式/ M/ ,/ M1/ ;/ M2/ / M/ ,/ 则/ 存在/ B1/ ;/ B2/ / C/ ,/ 使得/ ③/ 若/ 存在/ t/ ∈/ Ta/ ,/ 使得/ M/ →/ / / tM/ ,/ 存在/ C/ 以及/ 迁移/ (/ e/ ,/ α/ )/ ,/ e/ =/ t/ ./ e/ ,/ α/ =/ t/ ./ b/ 且/ C/ (/ e/ ,/ α/ →/ / / )/ C/ ,/ 使得/ C/ ~/ evM/ ;/ ④/ 若/ M/ →/ / / 1M/ ,/ 则/ 有/ C/ →/ / / 1C/ ,/ 使得/ C/ ~/ evM/ ./ 证明/ 分/ 以下/ (/ i/ )/ 、/ (/ ii/ )/ 两种/ 情况/ 讨论/ ./ (/ i/ )/ 构造/ 关系/ R/ =/ {/ (/ B/ ,/ M/ )/ |/ B/ ≡/ B1/ ;/ B2/ ,/ M/ =/ M1/ ;/ M2/ 且/ B1/ ~/ epM1/ ,/ B2/ ~/ epM2/ }/ ,/ 对于/ 任意/ B1/ ;/ B2/ / C/ / B2/ ,/ 存在/ B1/ / B1/ ,/ 使得/ C/ ≡/ B1/ ;/ B2/ ./ 由于/ B1/ ~/ epM1/ ,/ 所以/ 存在/ M1/ / M1/ ,/ 使得/ B1/ ~/ epM1/ ,/ 令/ M/ ≡/ M1/ ;/ M2/ ,/ 则/ 有/ (/ C/ ,/ M/ )/ ∈/ R/ ,/ 且/ 有/ 如下/ 推导/ :/ C/ (/ e/ ,/ α/ →/ / / )/ C/ / B1/ ;/ B2B1/ ~/ epM1/ / M1/ ;/ M2/ / tM1/ ;/ M2/ ./ C/ →/ / / 1C/ / B1/ ;/ B2/ →/ / / 1B1/ ;/ B2/ / B1/ →/ / / 1B1/ / M1/ / 1M1/ ,/ B1/ ~/ epM1/ / M1/ ;/ M2/ / 1M1/ ;/ M2/ ./ 其中/ ,/ t/ ./ e/ =/ e/ ,/ t/ ./ b/ =/ α/ ./ 令/ M/ =/ M1/ ;/ M2/ ,/ 可知/ (/ C/ ,/ M/ )/ ∈/ R/ ./ 对于/ 任意/ M1/ ;/ M2/ / M/ / M2/ ,/ 存在/ M1/ / M1/ ,/ 使得/ M/ =/ M1/ ;/ M2/ ./ 由于/ B1/ ~/ epM1/ ,/ 所以/ 存在/ B1/ / B1/ ,/ 使得/ B1/ ~/ epM1/ ,/ 令/ C/ ≡/ B1/ ;/ B2/ ,/ 则/ 有/ (/ C/ ,/ M/ )/ ∈/ R/ ,/ 且/ 有/ 如下/ 推导/ :/ M/ →/ / / tM/ / M1/ ;/ M2/ →/ / / tM1/ ;/ M2/ / M1/ →/ / / tM1/ / B1M/ →/ / / 1M/ / M1/ ;/ M2/ →/ / / 1M1/ ;/ M2/ / M1/ →/ / / 1M1/ / B1/ →/ / / 1B1/ ,/ B1/ ~/ epM1/ ./ 其中/ ,/ t/ ./ e/ =/ e/ ,/ t/ ./ b/ =/ α/ ./ 令/ C/ =/ B1/ ;/ B2/ ,/ M/ =/ M1/ ;/ M2/ ,/ 可知/ (/ C/ ,/ M/ )/ ∈/ R/ ./ (/ ii/ )/ 对于/ 任意/ B2/ / C/ ,/ 存在/ B2/ / B2/ ,/ 使得/ C/ ≡/ B2/ ./ 由于/ B2/ ~/ epM2/ ,/ 所以/ 存在/ M2/ / M2/ ,/ B2/ ~/ epM2/ ./ C/ (/ e/ ,/ α/ →/ / / )/ C/ / B2B2/ ~/ epM2/ ./ C/ →/ / / 1C/ / B2/ →/ / / 1B2/ / B2/ →/ / / 1B2/ / M2/ / 1M2/ ,/ B2/ ~/ epM2/ ./ 对于/ 任意/ M2/ / M/ ,/ 存在/ M2/ / M2/ ,/ 使得/ M/ ≡/ 其中/ ,/ t/ ./ e/ =/ e/ ,/ t/ ./ b/ =/ α/ ./ M2/ ./ 由于/ B2/ ~/ epM2/ ,/ 所以/ 存在/ B2/ ,/ B2/ ~/ epM2/ ./ M/ →/ / / tM/ / M2/ →/ / / tM2/ / M2/ →/ / / tM1/ / B2B2/ ~/ epM2/ ./ M/ →/ / / 1M/ / M2/ →/ / / 1M2/ / M2/ →/ / / 1M1/ / B2/ →/ / / 1B2/ ,/ B2/ ~/ epM2/ ./ 其中/ ,/ t/ ./ e/ =/ e/ ,/ t/ ./ b/ =/ α/ ./ 令/ C/ =/ B2/ ;/ M/ =/ M1/ ,/ 则/ 有/ C/ ~/ epM/ ./ 综上/ (/ i/ )/ 、/ (/ ii/ )/ 证明/ 过程/ 可知/ 若/ B1/ ~/ epM1/ ,/ B2/ ~/ epM2/ ,/ 则/ B1/ ;/ B2/ ~/ epM1/ ;/ M2/ ./ (/ 1/ )/ 式/ 得征/ ./ 证毕/ ./ 引理/ 1/ ./ 若有/ B/ (/ e/ ,/ α/ →/ / / )/ B/ ,/ 则/ 存在/ t/ ,/ t/ ./ e/ =/ e/ ,/ t/ ./ b/ =/ α/ 且/ ψ/ (/ B/ )/ / tM/ ~/ p/ ψ/ (/ B/ )/ ;/ 若/ B/ →/ / / 1B/ ,/ 则/ ψ/ (/ B/ )/ / 1M/ ~/ p/ ψ/ (/ B/ )/ ./ 证明/ ./ 原子/ 行为/ ./ 令/ B/ ≡/ α/ ,/ 根据/ 事件/ 行为/ 迁移/ 规则/ 有/ α/ (/ e/ ,/ α/ →/ / / )/ 1/ ,/ 转换/ 到/ 状态/ 结构式/ 后/ ,/ 根据/ 原子/ 行为/ 转换规则/ :/ ψ/ (/ α/ )/ =/ s0/ ;/ s/ α/ ;/ sf/ (/ s0/ ,/ s0/ 因为/ sf/ =/ ψ/ (/ 1/ )/ ,/ 很/ 显然/ 有/ ψ/ (/ α/ )/ / tsf/ ~/ psf/ 成立/ ./ α/ ,/ F/ _/ PRE/ (/ α/ )/ ,/ e/ α/ ,/ α/ )/ ,/ tf/ ∈/ T/ τ/ ./ 所以/ 有/ ψ/ (/ α/ )/ / tsf/ ,/ 假设/ B1/ 、/ B2/ 满足/ 题设/ 条件/ ,/ 则/ 进行/ 以下/ 证明/ ./ 顺序/ 行为/ ./ 令/ B/ ≡/ B1/ ;/ B2/ ,/ 若/ B/ (/ e/ ,/ α/ →/ / / )/ B/ / B1t/ ,/ t/ ./ e/ =/ e/ ,/ t/ ./ b/ =/ α/ ,/ 使得/ ψ/ (/ B1/ )/ / tM1/ ,/ 且/ M1/ ~/ p/ ψ/ (/ B1/ )/ / s0/ ;/ Γ/ (/ B1/ )/ ;/ sf/ / tM1/ ~/ ps0/ ;/ Γ/ (/ B1/ )/ ;/ sf/ / s0/ ;/ Γ/ (/ B1/ )/ / tM1/ ~/ ps0/ ;/ Γ/ (/ B1/ )/ / s0/ ;/ Γ/ (/ B1/ )/ ;/ Γ/ (/ B2/ )/ ;/ sf/ / tM1/ ~/ ps0/ ;/ Γ/ (/ B1/ )/ ;/ Γ/ (/ B2/ )/ ;/ sf/ / s0/ ;/ Γ/ (/ B1/ ;/ B2/ )/ ;/ sf/ / tM1/ ~/ ps0/ ;/ Γ/ (/ B1/ ;/ B2/ )/ ;/ sf/ 即/ ψ/ (/ B1/ ;/ B2/ )/ / tM/ ~/ p/ ψ/ (/ B1/ ;/ B2/ )/ ,/ 即/ ψ/ (/ B/ )/ / tM/ ~/ p/ ψ/ (/ B1/ )/ ;/ 若/ B/ →/ / / 1B/ ,/ 证明/ 过程/ 与/ 上面/ 类似/ ./ 证毕/ ./ 引理/ 2/ ./ 若有/ ψ/ (/ B/ )/ / tM/ ,/ 存在/ B/ 以及/ 迁移/ (/ e/ ,/ α/ )/ ,/ e/ =/ t/ ./ e/ ,/ α/ =/ t/ ./ b/ 且/ B/ (/ e/ ,/ α/ →/ / / )/ B/ ,/ 使得/ M/ ~/ p/ ψ/ (/ B/ )/ ;/ 若/ ψ/ (/ B/ )/ / tM/ ,/ 则/ B/ →/ / / 1B/ ,/ 且/ M/ ~/ p/ ψ/ (/ B/ )/ ./ 证明/ ./ 证明/ 过程/ 与/ 引理/ 1/ 类似/ ,/ 不再/ 赘述/ ./ 定理/ 4/ ./ 一个/ 事件/ 行为/ 表达式/ B/ 与其/ 状态/ 结/ Page10/ 构式/ 的/ 转换/ 模型/ ψ/ (/ B/ )/ 是/ 事件/ 状态/ 互/ 模拟/ 关系/ ,/ 即/ B/ ~/ ep/ ψ/ (/ B/ )/ ./ 同理/ 可得/ B/ ~/ evR/ ~/ pM/ ;/ 证明/ ./ 构造/ 关系/ R/ :/ (/ B/ ,/ ψ/ (/ B/ )/ )/ ,/ 若/ B/ (/ e/ ,/ α/ →/ / / )/ B/ ,/ 由/ 引理/ 1/ 可知/ 存在/ t/ ,/ t/ ./ e/ =/ e/ ,/ t/ ./ b/ =/ α/ 且/ ψ/ (/ B/ )/ / 1M/ ~/ p/ ψ/ (/ B/ )/ ,/ 由/ B/ ~/ evB/ ,/ BR/ ψ/ (/ B/ )/ ,/ ψ/ (/ B/ )/ ~/ pM/ 可知/ B/ ~/ evR/ ~/ pM/ ;/ 若/ B/ →/ / / 1B/ ,/ 由/ 引理/ 1/ 可知/ ψ/ (/ B/ )/ / 1M/ ~/ p/ ψ/ (/ B/ )/ ,/ 若有/ ψ/ (/ B/ )/ / 1M/ ,/ 由/ 引理/ 2/ 可知/ 存在/ B/ 以及/ 迁移/ (/ e/ ,/ α/ )/ ,/ e/ =/ t/ ./ e/ ,/ α/ =/ t/ ./ b/ 且/ B/ (/ e/ ,/ α/ →/ / / )/ B/ ,/ 使得/ M/ ~/ p/ ψ/ (/ B/ )/ ,/ 同理/ 可得/ B/ ~/ evR/ ~/ pM/ ;/ 若/ ψ/ (/ B/ )/ / 1M/ ,/ 则/ B/ →/ / / 1B/ ,/ 且/ M/ ~/ p/ ψ/ (/ B/ )/ ,/ 同理/ B/ ~/ evR/ ~/ pM/ ./ 因此/ ,/ R/ 是/ 事件/ 系统/ 与/ 状态/ 系统/ 的/ 互/ 模拟/ upto/ ~/ ep/ ./ 由/ 定理/ 1/ 可得/ R/ / ~/ ep/ ,/ 因此/ B/ ~/ ep/ ψ/ (/ B/ )/ ./ 5/ 建模/ 工具/ 系统/ 及/ 应用/ 本/ 节/ 通过/ 校园/ 通/ 系统/ 的/ 实例/ ,/ 进一步/ 具体/ 说明/ 了/ 构建/ 行为/ 模型/ 和/ 制作/ 需求/ 动画/ 的/ 方法/ 和/ 过程/ ./ 首先/ 对系统/ 的/ 问题/ 域/ 进行/ 标识/ 和/ 划分/ ./ 容易/ 发现/ ,/ 本/ 系统/ 包含/ 3/ 个/ 层次/ ,/ 第/ 1/ 层/ 是/ 系统/ 的/ 直接/ 客户/ ,/ 如/ 学生/ 、/ 教师/ 、/ 管理员/ 和/ 家长/ 等/ ,/ 他们/ 与/ 系统/ 进行/ 交互/ ;/ 第/ 2/ 层/ 由/ 终端/ 、/ 门禁/ 设备/ 、/ 固定/ 电话/ 系统/ 和/ 短信/ 网关/ 等/ 外围设备/ 构成/ ,/ 负责/ 为/ 第/ 1/ 层/ 的/ 客户/ 提供/ 交互/ 界面/ ,/ 并/ 接收/ 用户/ 的/ 各种/ 请求/ 和/ 输入/ ,/ 并/ 将/ 数据传输/ 至/ 主机/ ;/ 第/ 3/ 层/ 是/ 本/ 系统/ 的/ 核心/ 部分/ ,/ 即/ 主机/ ,/ 它/ 负责/ 存储/ 、/ 处理/ 各种/ 数据/ 及/ 相应/ 外围设备/ 的/ 各种/ 请求/ ,/ 并/ 将/ 处理结果/ 返回/ 给/ 相应/ 设备/ ./ 因此/ ,/ 根据/ 校园/ 通/ 系统/ 的/ 层次/ 关系/ ,/ 可/ 将/ 其/ 划分/ 为/ 两个/ 问题/ 域/ :/ 服务器端/ 问题/ 域/ :/ 由/ 主机/ 构成/ ;/ 客户端/ 问题/ 域/ :/ 由/ 终端/ 、/ 门禁/ 设备/ 、/ 固定/ 电话/ 系统/ 、/ 短信/ 网关/ 等/ 外围设备/ 构成/ ./ 针对/ 这些/ 问题/ 域/ 分别/ 可/ 标识/ 出/ 如下/ 几个/ 视点/ ./ (/ 1/ )/ 对于/ 服务器端/ 问题/ 域/ :/ ①/ 响应/ 门禁/ 设备/ 视点/ (/ VPMenJin/ )/ ;/ ②/ 响应/ 固定/ 电话/ 系统/ 视点/ (/ VPPhoneSys/ )/ ;/ ③/ 发送/ 短信/ 视点/ (/ VPMesGate/ )/ ;/ ④/ 响应/ 终端/ 视点/ (/ VPTerminal/ )/ ;/ ⑤/ 主机/ 工作/ 视点/ (/ VPServer/ )/ ./ (/ 2/ )/ 对于/ 客户端/ 问题/ 域/ :/ ①/ 学生/ 刷卡/ 视点/ (/ VPBrushCard/ )/ ;/ ②/ 教师/ 工作/ 视点/ (/ VPteacher/ )/ ;/ ③/ 管理员/ 工作/ 视点/ (/ VPManager/ )/ ;/ ④/ 家长/ 查询/ 信息/ 视点/ (/ VPParent/ )/ ./ 视点/ 标识/ 后/ ,/ 项目/ 负责人/ 为/ 视点/ 指定/ 责任人/ ,/ 负责/ 视点/ 内/ 需求/ 的/ 编辑/ 工作/ ,/ 基于/ 这些/ 分析/ ,/ 建立/ 的/ 需求/ 行为/ 模型/ 如图/ 3/ 所示/ ./ 由于/ 整个/ 系统/ 较为/ 复杂/ ,/ 限于/ 篇幅/ 本文/ 仅/ 给出/ 校园/ 通/ 系统/ 的/ 部分/ BDL/ 描述/ ./ 响应/ 学生/ 刷卡/ 场景/ 的/ 自然语言/ 描述/ 如下/ :/ 1/ ./ 主机/ 接收/ 门禁/ 设备/ 发来/ 的/ 刷卡/ 记录/ ;/ 2/ ./ 主机/ 验证/ 刷卡/ 的/ 有效性/ ;/ 3/ ./ 主机/ 发送/ 验证/ 结果/ 给/ 门禁/ 设备/ ;/ 4/ ./ 若为/ 有效/ 刷卡/ ,/ 则/ 主机/ 存储/ 刷卡/ 记录/ ./ 门禁/ 设备/ 视点/ 的/ BDL/ 描述/ :/ VPMenJin/ :/ // // 门禁/ 设备/ 视点/ VPBEGIN/ // // 视点/ 描述/ 开始/ // // 响应/ 学生/ 刷卡/ 并/ 发送/ 短信/ 场景/ BehBrushCardBEGIN/ // // 场景/ 描述/ 开始/ ABEH/ // // 原子/ 行为/ RecBrushCardInfo/ :/ 接收/ (/ 主机/ ,/ 刷卡/ 记录/ )/ INFROM/ (/ )/ (/ 刷卡/ 记录/ )/ ./ ValidBrushCardInfo/ :/ 验证/ (/ 主机/ ,/ 刷卡/ 记录/ )/ OUTTO/ (/ )/ (/ 验证/ 结果/ )/ ./ SendValidBCResult/ :/ 发送/ (/ 主机/ ,/ 验证/ 结果/ )/ INFROM/ (/ )/ (/ 验证/ 结果/ )/ OUTTO/ (/ #/ VPMenJin/ )/ (/ 验证/ 结果/ )/ ./ StoreBrushCardInfo/ :/ 存储/ (/ 主机/ ,/ 刷卡/ 记录/ )/ ./ Return1/ :/ return/ (/ )/ // // 退出/ 系统/ // // 此处/ 视/ 发短信/ 至/ 短信/ 网关/ 即为/ 发至/ 手机/ BEH/ // // 复合/ 行为/ // // 响应/ 刷卡/ 场景/ 行为/ 表达式/ Page11BehBrushCard/ =/ RecBrushCardInfo/ ;/ SendValidBCResult/ ;/ If/ (/ 验证/ 结果/ =/ 有效/ 刷卡/ )/ ThenStoreBrushCardInfoElseReturn1Fi/ ;/ Return1/ // // 退出/ 系统/ END/ // // 接收/ 短信/ 场景/ 描述/ 结束/ VPMenJin/ =/ BehBrushCard/ ;/ VPEND/ 图/ 4/ 给出/ 了/ 校园/ 通/ 系统/ 的/ BDL/ 编辑/ 界面/ 的/ 截图/ ,/ 在/ 此/ 编辑/ 窗口/ 可以/ 进行/ 系统/ BDL/ 语句/ 的/ 修改/ ./ 在/ BDL/ 模型/ 建立/ 好/ 之后/ ,/ 即可/ 对/ 其/ 相应/ 的/ 主客体/ 设置/ 图片/ 关联/ 及/ 设定/ 初始/ 坐标/ ./ 接下来/ ,/ 即可/ 编辑/ 行为/ 动画/ ,/ 动画/ 脚本/ 编辑/ 界面/ 的/ 截图/ 如图/ 5/ 所示/ ./ 使用/ 动画/ 原语/ 编辑/ 好/ 行为/ 的/ 动画/ 脚本/ 之后/ ,/ 即可/ 生成/ 行为/ 动画/ ,/ 运行/ 动画/ 演示/ ./ 校园/ 通/ 系统/ 的/ 需求/ 动画/ 运行/ 界面/ 截图/ 如图/ 6/ 所示/ ./ 本文/ 在/ MicrosoftVisio/ 的/ 基础/ 上/ 实现/ 了/ 基于/ 软件/ 行为/ 和/ 多/ 视点/ 的/ 需求/ 建模/ 工具/ 以及/ 动画/ 制作/ 工具/ ./ 提出/ 的/ 建模/ 方法/ 是/ 基于/ 多/ 视点/ 和/ 软件/ 行为/ 的/ 需求/ 建模/ 方法/ ,/ 有别于/ 现有/ 的/ 一些/ 需求/ 建模/ 方法/ 和/ 技术/ ./ 这/ 主要/ 是/ 考虑/ 到/ 复杂/ 软件系统/ 的/ 特点/ 和/ 软件/ 行为/ 的/ 正确/ 与否/ 决定/ 软件/ 能否/ 满足用户/ 需求/ ,/ 以及/ 软件/ 特性/ (/ 如/ 可信/ 特性/ 等/ )/ 可以/ 通过/ 软件/ 行为/ 给予/ 验证/ 等/ 一些/ 重要/ 因素/ ./ 尽管/ 在/ 需求/ 阶段/ 软件系统/ 还/ 未/ 开发/ 出来/ ,/ 但/ 如果/ 能/ 在/ 需求/ 阶段/ 通过/ 分析/ 用户/ 需求/ ,/ 建立/ 严格/ 的/ 和/ 基于/ 软件/ 行为/ 的/ 需求/ 模型/ ,/ 这/ 将/ 是/ 非常/ 现实/ 和/ 重要/ 的/ 工作/ ./ 动画/ 制作/ 工具/ 在/ 建模/ 工具/ 生成/ 的/ 行为/ 模型/ 基础/ 上/ ,/ 通过/ 动画/ 元素/ 和/ 动画/ 原语/ 的/ 书写/ 生成/ 需求/ 动画/ ,/ 并且/ 提供/ 了/ 开放/ 的/ 动作/ 库/ 和/ 动作/ 部件/ 库/ ,/ 用户/ 可/ 根据/ 需要/ ,/ 通过/ 制作/ 接口/ 向/ 其中/ 添加/ 新/ 的/ 动作/ 和/ 动作/ 部件/ ./ 6/ 结束语/ 本文/ 提出/ 了/ 一种/ 用/ 动画/ 方式/ 描述/ 需求/ 行为/ 模型/ 的/ 可视化/ 方法/ ,/ 该/ 方法/ 基于/ 行为/ 描述语言/ BDL/ 所/ 表述/ 的/ 系统/ 行为/ 序列/ ,/ 在/ 保证/ 该/ BDL/ 语句/ 语法/ 正确/ 的/ 基础/ 上/ 建立/ 行为/ 模型/ ,/ 通过/ 设置/ 动画/ 元素/ (/ 如/ 主客体/ )/ 等/ 的/ 相关/ 内容/ ,/ 以及/ 原子/ 行为/ 和/ 其/ 动画/ 原语/ 的/ 关联/ 实现需求/ 行为/ 模型/ 的/ 可视化/ ./ 动画/ 执行/ 机制/ 采用/ 状态机/ 和/ 状态/ 块/ 作为/ 动画/ 的/ 执行/ 模型/ 和/ 描述/ 模型/ ,/ 每/ 一个/ 状态/ 迁移/ 都/ 对应/ 一个/ 需要/ 进行/ 可视化/ 描述/ 的/ 行为/ ,/ 一个/ 关联/ 元素/ 将/ 状态/ 块/ 模型/ 中/ 的/ 一个/ 迁移/ 与/ 一个/ 动作/ 原语/ 进行/ 关联/ ,/ 控制/ 图形/ 的/ 运动/ ./ 该/ 方法/ 是/ 一种/ 动态/ 表示/ 需求/ 模型/ 的/ 方法/ ,/ 使用/ 现实/ 世界/ 的/ 图形/ 和/ 图像/ 作为/ 动画/ 执行/ 元素/ ,/ 用/ 需求/ 模型/ 来/ 驱动/ 这些/ 动画/ 元素/ 的/ 执行/ ./ 这些/ 工具/ 生成/ 的/ 动画/ 便于/ 非专业/ 的/ 用户/ 理解/ ,/ 能够/ 很/ 好/ 地/ 促进/ 用户/ 和/ 开发人员/ 的/ 交流/ ./ 需求/ 可视化/ 方法/ 中/ 动画/ 执行/ 模型/ 以及/ 动画/ 描述/ 模型/ 的/ 生成/ 是/ 由/ 行为/ 模型/ 经过/ 模型/ 转换/ 生成/ 的/ ,/ 需要/ 的/ 人工/ 参与/ 相对/ 较少/ ./ 并且/ ,/ 生成/ 的/ 需求/ 动画/ 与/ 需求/ 模型/ 的/ 一致性/ 也/ 是/ 可以/ 验证/ 的/ ./ 通过/ 需求/ 动画/ 演/ Page12/ 示/ ,/ 用户/ 可以/ 直观/ 地/ 理解/ 需求/ 模型/ ,/ 从而/ 可以/ 校验/ 需求/ 中/ 所/ 描述/ 的/ 目标软件/ 行为/ 是否/ 符合/ 用户/ 意愿/ ,/ 从而/ 能够/ 获取/ 有效/ 的/ 用户/ 反馈/ ,/ 提高/ 需求/ 分析/ 的/ 效率/ ,/ 减少/ 软件开发/ 成本/ ./ 该/ 方法/ 的/ 优点/ 在于/ 需求/ 动画/ 的/ 直观性/ 可以/ 使/ 不同/ 背景/ 的/ 用户/ 发现/ 遗漏/ 和/ 不/ 正确/ 的/ 潜在/ 需求/ ,/ 避免/ 需求/ 变更/ ,/ 并且/ BDL/ 模型/ 必须/ 通过/ 需求/ 建模/ 系统/ 的/ 一系列/ 检测/ ,/ 可以/ 保证/ 整个/ 行为/ 序列/ 满足/ 相关/ 的/ 语法/ 和/ 语义/ 检测/ ,/ 确保/ 需求/ 动画/ 的/ 正确性/ ./ 在/ 本/ 阶段/ 研究/ 的/ 基础/ 上/ ,/ 将/ 异类/ 模型/ 转换成/ 行为/ 模型/ 以及/ 将/ 行为/ 描述语言/ BDL/ 通过/ 状态图/ 实现/ 与/ 其它/ 建模/ 方法/ 的/ 转换/ 是/ 将来/ 的/ 研究/ 方向/ ./ 

