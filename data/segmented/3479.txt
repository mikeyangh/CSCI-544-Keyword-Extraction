Page1/ 不/ 确定/ 图上/ 的/ 高效/ top/ -/ 犽/ 近邻/ 查询处理/ 算法/ 张海杰/ 姜守旭/ 邹兆年/ (/ 哈尔滨工业大学/ 计算机科学/ 与/ 技术/ 学院/ 哈尔滨/ 150001/ )/ 摘要/ 图/ 的/ 不确定性/ 普遍存在/ ,/ 研究/ 不/ 确定/ 图/ 的/ 高效/ 查询处理/ 具有/ 重要/ 意义/ ./ 文中/ 提出/ 了/ 不/ 确定/ 图上/ 一种/ 新型/ 查询/ —/ —/ —/ 近邻/ 查询/ ./ 给定/ 一个/ 查询/ 标签集/ R/ 和/ 距离/ 约束/ σ/ ,/ 在/ 不/ 确定/ 图/ G/ 上/ 进行/ 近邻/ 查询/ 是/ 要/ 找到/ 标签集/ 包含/ R/ 并且/ 任意/ 两个/ 顶点/ 间/ 距离/ 不/ 超过/ σ/ 的/ 匹配/ 顶点/ 集/ ./ 为/ 解决/ 该/ 问题/ ,/ 文中/ 首先/ 提出/ 了/ “/ 可靠/ 期望/ 距离/ ”/ ,/ 然后/ 基于/ 可靠/ 期望/ 距离/ 建立/ 了/ 高效/ 的/ 近邻/ 关系/ 图/ 索引/ ,/ 将/ 不/ 确定/ 图上/ 的/ 近邻/ 查询/ 等价/ 地/ 转化/ 为/ 近邻/ 关系/ 图上/ 的/ 团/ 查询/ 问题/ ,/ 最后/ 使用/ 树/ 搜索算法/ 解决/ 近邻/ 关系/ 图上/ 的/ 团/ 查询/ 问题/ ./ 理论/ 分析/ 和/ 实验/ 结果表明/ 文中/ 提出/ 的/ 算法/ 能够/ 高效/ 地/ 完成/ 不/ 确定/ 图上/ 的/ top/ -/ k/ 近邻/ 查询/ ./ 关键词/ 不/ 确定/ 图/ ;/ 近邻/ 查询/ ;/ 可靠/ 期望/ 距离/ ;/ 近邻/ 关系/ 图/ 1/ 引言/ 近年来/ ,/ 现实/ 世界/ 中/ 出现/ 大量/ 以图/ 建模/ 的/ 数据/ ,/ Page2/ 络/ 被/ 表示/ 成/ 一个/ 无向/ 图/ ,/ 其中/ 顶点/ 代表/ 蛋白质/ ,/ 边/ 代表/ 蛋白质/ 之间/ 的/ 交互/ ./ 由于/ 蛋白质/ 交互/ 检测/ 实验/ 技术/ 自身/ 存在/ 固有/ 误差/ ,/ 实验/ 测得/ 的/ 蛋白质/ 交互/ 网络/ 存在/ 不确定性/ [/ 1/ ]/ ./ 在/ 移动/ 自/ 组织/ 网络/ 中/ ,/ 网络/ 的/ 拓扑/ 结构/ 被/ 抽象/ 成/ 一个/ 有向图/ ,/ 顶点/ 代表/ 通信/ 节点/ ,/ 边/ 代表/ 节点/ 之间/ 的/ 无线通信/ 链路/ ./ 由于/ 节点/ 的/ 移动性/ ,/ 节点/ 之间/ 的/ 无线通信/ 链路/ 是否/ 正常/ 工作/ 是/ 不/ 确定/ 的/ ,/ 因此/ 移动/ 自/ 组织/ 网络拓扑/ 结构/ 也/ 存在/ 不确定性/ [/ 2/ ]/ ./ 同样/ ,/ 在/ 社交/ 网络/ 研究/ 中/ ,/ 经常/ 用图/ 模型/ 刻画/ 用户/ 之间/ 的/ 数据/ 流通/ ,/ 但是/ 匿名/ 通信/ 数据/ 的/ 干扰/ 也/ 会/ 使/ 社交/ 网络/ 带有/ 不确定性/ [/ 3/ ]/ ./ 传统/ 图论/ 中/ 的/ 图/ 模型/ 无法/ 刻画/ 图/ 数据/ 的/ 不确定性/ ./ 为此/ ,/ 我们/ 拓展/ 了/ 不/ 确定/ 数据管理/ 中/ 常用/ 的/ “/ 可能/ 世界/ ”/ 语义/ ,/ 提出/ 了/ 不/ 确定/ 图/ 的/ “/ 可能/ 世界/ ”/ 语义/ 模型/ [/ 4/ ]/ ./ 在/ 该/ 模型/ 中/ ,/ 不/ 确定/ 图/ 的/ 每条/ 边上/ 带有/ 一个/ (/ 0/ ,/ 1/ ]/ 内/ 的/ 实数/ ,/ 表示/ 该边/ 实际/ 存在/ 的/ 概率/ ./ 该/ 模型/ 假定/ 边/ 的/ 存在/ 概率/ 之间/ 相互/ 独立/ ./ 依据/ 边/ 的/ 存在/ 概率/ 对边/ 进行/ 独立/ 随机/ 选取/ ,/ 可以/ 得到/ 该/ 不/ 确定/ 图/ 的/ 一种/ 可能/ 的/ 确定/ 图/ 存在/ 形式/ (/ 即/ “/ 可能/ 世界/ ”/ )/ ,/ 称作/ “/ 蕴含/ 子图/ ”/ ./ 理论/ 证明/ ,/ 一个/ 不/ 确定/ 图/ 表达/ 了/ 其/ 全部/ 蕴含/ 子图/ 上/ 的/ 一个/ 概率分布/ ./ 由于/ 不/ 确定/ 图/ 广泛/ 存在/ 且/ 规模/ 不断/ 增加/ ,/ 因此/ 对/ 不/ 确定/ 图/ 进行/ 高效/ 的/ 查询处理/ 具有/ 非常/ 重要/ 的/ 意义/ ./ 现有/ 的/ 不/ 确定/ 图/ 查询处理/ 方面/ 的/ 研究/ 几乎/ 全部/ 基于/ 文献/ [/ 4/ ]/ 中/ 提出/ 的/ 不/ 确定/ 图/ 语义/ 模型/ ,/ 然而/ 这方面/ 研究/ 结果/ 目前/ 还/ 很少/ ,/ 仅限于/ 概率/ k/ -/ 近邻/ 查询/ [/ 5/ ]/ 、/ 概率/ 最短/ 路径/ 查询/ [/ 6/ ]/ 、/ 概率/ 子图/ 匹配/ 查询/ [/ 7/ ]/ ./ 本文/ 研究/ 不/ 确定/ 图上/ 一种/ 新型/ 查询/ “/ 近邻/ 查询/ (/ proximityquery/ )/ ”/ ,/ 其/ 定义/ 如下/ :/ 给定/ 一个/ 不/ 确定/ 图/ G/ ,/ G/ 的/ 每个/ 顶点/ v/ 上/ 带有/ 一个/ 标签/ 集合/ L/ (/ v/ )/ ;/ 同时/ ,/ 还/ 给定/ 一种/ G/ 中/ 顶点/ 之间/ 的/ 概率距离/ 度量/ 函数/ d/ ./ 不/ 确定/ 图/ G/ 上/ 的/ 近邻/ 查询/ 是/ 一个二元/ 组/ Q/ =/ 〈/ R/ ,/ σ/ 〉/ ,/ 其中/ R/ 是/ 一个/ 顶点/ 标签/ 集合/ ,/ σ/ / 0/ ./ Q/ 的/ 查询/ 结果/ 是/ G/ 中/ 的/ “/ 匹配/ 顶点/ 子集/ ”/ 构成/ 的/ 集族/ F/ ,/ 其中/ 每个/ 匹配/ 顶点/ 子集/ W/ ∈/ F/ 满足/ 如下/ 3/ 个/ 条件/ :/ (/ 1/ )/ R/ / ∪/ v/ ∈/ WL/ (/ v/ )/ ;/ (/ 2/ )/ W/ 的/ 任意/ 真/ 子集/ 均/ 不/ 满足条件/ 1/ ;/ (/ 3/ )/ W/ 中/ 任意/ 两个/ 顶点/ u/ 和/ v/ 在/ G/ 中/ 概率距离/ d/ (/ u/ ,/ v/ )/ 的/ 最大值/ (/ 记作/ diam/ (/ W/ )/ )/ 不/ 大于/ σ/ ./ 特别/ 地/ ,/ 本文/ 研究/ 不/ 确定/ 图上/ 的/ top/ -/ k/ 近邻/ 查询/ ,/ 即/ 查询/ 结果/ 是/ 近邻/ 查询/ 结果/ 中前/ k/ (/ k/ >/ 0/ )/ 个/ 具有/ 最小/ diam/ (/ W/ )/ 值/ 的/ 顶点/ 子集/ W/ ./ 不/ 确定/ 图上/ 的/ top/ -/ k/ 近邻/ 查询/ 具有/ 许多/ 重要/ 应用/ ./ 例如/ ,/ 在/ 生物/ 信息学/ 中/ ,/ 生物学家/ 经常/ 需要/ 了解/ 在/ 蛋白质/ 交互/ 网络/ 中/ 具有/ 某些/ 功能/ 的/ 蛋白质/ 在/ 不同/ 功能/ 团中/ 是/ 如何/ 连接/ 的/ ./ 我们/ 已经/ 知道/ 蛋白质/ 交互/ 网络/ 是/ 一个/ 不/ 确定/ 图/ (/ 在/ 该/ 不/ 确定/ 图中/ ,/ 顶点/ 标签/ 代表/ 蛋白质/ 具有/ 的/ 功能/ )/ ,/ 并且/ 在/ 该/ 网络/ 中/ ,/ 具有/ 某些/ 功能/ 的/ 蛋白质/ 在/ 不同/ 功能/ 团中/ 的/ 连结/ 方式/ 往往/ 是/ 不同/ 的/ ./ 如图/ 1/ 所示/ ,/ 具有/ a/ ,/ b/ ,/ c3/ 种/ 功能/ 的/ 蛋白质/ 频繁/ 地/ 同时/ 出现/ 在/ 不同/ 的/ 功能/ 团中/ ,/ 然而/ 其/ 具体/ 连接/ 方式/ 并不相同/ ,/ 如图/ 1/ 中/ 虚线/ 所示/ ./ 在/ 这种/ 情况/ 下/ ,/ 生物学家/ 若想/ 了解/ 具有/ 功能/ a/ ,/ b/ ,/ c/ 的/ 蛋白质/ 之间/ 是否/ 存在/ 紧密/ 关联/ ,/ 传统/ 子图/ 匹配/ 查询/ [/ 8/ -/ 9/ ]/ 显然/ 是/ 做/ 不到/ 的/ ,/ 因为/ 生物学家/ 必须/ 先/ 知道/ 具有/ 功能/ a/ ,/ b/ ,/ c/ 的/ 蛋白质/ 之间/ 的/ 连接/ 方式/ 才能/ 形式化/ 给出/ 子图/ 匹配/ 查询/ ;/ 而/ 不/ 确定/ 图/ 近邻/ 查询/ 并/ 不/ 要求/ 知道/ 具有/ 功能/ a/ ,/ b/ ,/ c/ 的/ 蛋白质/ 之间/ 的/ 具体/ 连接/ 方式/ ,/ 只/ 需/ 给出/ 蛋白质/ 之间/ 的/ 概率距离/ 约束条件/ ,/ 因此/ 更/ 适用/ 于/ 生物学家/ 的/ 需求/ ./ 在/ 社交/ 网络分析/ 中/ ,/ Lappas/ 等/ 人/ [/ 10/ ]/ 提出/ 了/ 社交/ 网络/ 中/ 的/ 团队/ 构建/ 问题/ ./ 在/ 该/ 问题/ 中/ ,/ 社交/ 网络/ 以/ 确定/ 图/ 建模/ ,/ 图/ 的/ 顶点/ 代表/ 候选/ 专家/ ,/ 顶点/ 标签/ 代表/ 专家/ 所/ 掌握/ 的/ 领域/ 知识/ ,/ 边/ 代表/ 专家/ 之间/ 的/ 朋友/ 关系/ ,/ 边上/ 的/ 权值/ 代表/ 专家/ 之间/ 的/ 沟通/ 代价/ (/ 或/ 熟悉/ 程度/ )/ ./ 给定/ 一个/ 社交/ 网络/ 关系/ 图/ G/ 和/ 一个/ 任务/ 需求/ R/ ,/ 团队/ 构建/ 问题/ 是/ 要/ 组建/ 一个/ 专家/ 团队/ ,/ 使得/ 团队/ 中/ 的/ 专家/ 所/ 掌握/ 的/ 领域/ 知识/ 能/ 满足/ 任务/ 要求/ R/ ,/ 并且/ 专家/ 之间/ 的/ 沟通/ 代价/ 最小/ ./ 由于/ 社交/ 网络/ 中/ 存在/ 匿名/ 通信/ 数据/ ,/ 专家/ 之间/ 的/ 朋友/ 关系/ 可能/ 是/ 不/ 确定/ 的/ ,/ 因此/ 该/ 社交/ 网络/ 需要/ 用/ 不/ 确定/ 图/ 建模/ ./ 在/ 带有/ 不确定性/ 的/ 社交/ 网络/ 上/ 解决/ 团队/ 构建/ 问题/ 就/ 需要/ 应用/ 不/ 确定/ 图/ 近邻/ 查询处理/ 算法/ ./ 据/ 我们/ 所知/ ,/ 不/ 确定/ 图上/ 的/ top/ -/ k/ 近邻/ 查询处理/ 尚未/ 被/ 研究/ 过/ ,/ 并且/ 确定/ 图上/ 的/ 相关/ 研究/ 结果/ 也/ 无法/ 处理/ 不/ 确定/ 图/ 近邻/ 查询/ ./ 在/ 文献/ [/ 10/ ]/ 提出/ 的/ 解决/ 团队/ 构建/ 问题/ 的/ 算法/ 中/ ,/ 顶点/ 间/ 的/ 距离/ 采用/ 加权/ 最短/ 路径/ 长度/ ;/ 而/ 在/ 不/ 确定/ 图中/ ,/ 两个/ 顶点/ 在/ 不同/ 的/ 蕴含/ 子图/ 中/ 的/ 加权/ 最短/ 路径/ 长度/ 不尽相同/ ./ 另外/ ,/ 这些/ 算法/ 只/ 返回/ 代价/ 最小/ 的/ 结果/ ;/ 而/ top/ -/ k/ 近邻/ 查询/ 要求/ 找到/ 直径/ 最小/ 的/ k/ 个/ 结果/ ./ 另外/ ,/ 不/ 确定/ 图上/ 的/ 子/ 图/ 匹配/ 查询/ 算法/ 无法/ 处/ Page3/ 理/ 近邻/ 查询/ 问题/ ,/ 因为/ 子图/ 匹配/ 查询/ 是/ 基于/ 结构/ 的/ 查询/ ,/ 需要/ 事先/ 知道/ 匹配/ 顶点/ 子集/ 的/ 具体/ 结构/ ,/ 而/ 近邻/ 查询/ 不/ 限制/ 匹配/ 顶点/ 子集/ 的/ 结构/ ,/ 其/ 查询/ 结果/ 具有/ 结构/ 多样性/ ./ 们/ 提出/ 了/ 如下/ 挑战/ 问题/ :/ 综合/ 上述/ 分析/ ,/ 不/ 确定/ 图/ top/ -/ k/ 近邻/ 查询/ 向/ 我/ (/ 1/ )/ 不/ 确定/ 图上/ 的/ 近邻/ 查询/ 基于/ 不/ 确定/ 图/ 顶点/ 之间/ 的/ 概率距离/ 度量/ 函数/ ,/ 对/ 该/ 函数/ 既/ 要/ 考虑/ 不/ 确定/ 图/ 的/ 结构/ 也/ 考虑/ 不/ 确定/ 图/ 的/ 不确定性/ ./ 由/ 文献/ [/ 4/ ]/ ,/ 由于/ 一个/ 不/ 确定/ 图有/ 多种/ 可能/ 的/ 存在/ 形式/ (/ 即/ 蕴含/ 子图/ )/ ,/ 相同/ 的/ 两个/ 顶点/ 在/ 不同/ 的/ 蕴含/ 子图/ 中/ 的/ 距离/ 可能/ 不同/ ,/ 所以/ 如何/ 度量/ 不/ 确定/ 图/ 顶点/ 间/ 的/ 距离/ 是/ 一项/ 挑战/ ;/ (/ 2/ )/ 与/ 传统/ 的/ 子/ 图/ 匹配/ 查询/ 不同/ ,/ 近邻/ 查询/ 的/ 查询/ 结果/ 具有/ 结构/ 多样性/ ./ 目前/ 图/ 数据/ 上/ 的/ 查询/ 多数/ 是/ 基于/ 结构/ 的/ 查询/ ,/ 并且/ 不/ 确定/ 图/ 本身/ 的/ 结构/ 存在/ 不确定性/ ,/ 因此/ ,/ 如何/ 设计/ 高效/ 的/ 近邻/ 查询处理/ 算法/ 来/ 解决/ 这种/ 结构/ 多样性/ 查询/ 也/ 是/ 一项/ 挑战/ ./ 为/ 解决/ 上述/ 问题/ ,/ 本文/ 提出/ 了/ 不/ 确定/ 图上/ 的/ 可靠/ 期望/ 距离/ 度量/ 函数/ ,/ 并/ 基于/ 可靠/ 期望/ 距离/ 定义/ 了/ 近邻/ 关系/ 图/ ./ 本文/ 证明/ 了/ 在/ 不/ 确定/ 图上/ 进行/ 近邻/ 查询/ 等价/ 于/ 在/ 对应/ 的/ 近邻/ 关系/ 图上/ 进行/ 团/ 查询/ ./ 本文/ 的/ 主要/ 贡献/ 如下/ :/ (/ 1/ )/ 提出/ 不/ 确定/ 图/ 顶点/ 间/ 的/ 可靠/ 期望/ 距离/ 度量/ ;/ 基于/ 不/ 确定/ 图/ 数据模型/ 和/ 可靠/ 期望/ 距离/ ,/ 首次/ 提出/ 不/ 确定/ 图/ 的/ top/ -/ k/ 近邻/ 查询/ 问题/ ,/ 并/ 形式化/ 地/ 定义/ 了/ 该/ 问题/ ;/ (/ 2/ )/ 基于/ 可靠/ 期望/ 距离/ 定义/ σ/ -/ 近邻/ 关系/ 图/ 并/ 设计/ 高效/ 的/ σ/ -/ 近邻/ 关系/ 图/ 索引/ 结构/ 及其/ 快速/ 构建/ 算法/ ./ (/ 3/ )/ 提出/ 了/ 一种/ 高效/ 的/ 基于/ 搜索/ 树/ 的/ 算法/ 来/ 完成/ 近邻/ 查询处理/ ,/ 其中/ 利用/ 一种/ 两/ 阶段/ 预处理/ 方法/ 来/ 降低/ 搜索/ 时间/ 复杂度/ ,/ 并/ 利用/ 分支/ 界限/ 方法/ 高效/ 地/ 计算/ top/ -/ k/ 结果/ ./ 2/ 相关/ 工作/ 子图/ 匹配/ 查询/ [/ 8/ -/ 9/ ]/ 是/ 图/ 查询/ 领域/ 的/ 研究/ 热点/ ./ 给定/ 一个/ 标签/ 图/ G/ ,/ 一个/ 连通/ 的/ 包含/ n/ 个/ 顶点/ 的/ 查询/ 图/ Q/ ,/ 子图/ 匹配/ 查询/ 是从/ G/ 中/ 找到/ n/ 个/ 顶点/ ,/ 这/ n/ 个/ 顶点/ 构成/ 的/ 子/ 图同构/ 于/ 查询/ 图/ Q/ ./ 显然/ ,/ 子图/ 匹配/ 查询/ 是/ 一种/ 基于/ 结构/ 的/ 查询/ ./ 模式匹配/ 查询/ [/ 11/ -/ 12/ ]/ 是/ 图/ 查询/ 领域/ 另/ 一种/ 重要/ 查询/ ./ 给定/ 一个/ 标签/ 图/ G/ ,/ 一个/ 连通/ 的/ 包含/ n/ 个/ 顶点/ 的/ 查询/ 图/ Q/ 以及/ 距离/ 约束/ σ/ ,/ 模式匹配/ 查询/ 是从/ G/ 中/ 找到/ n/ 个/ 顶点/ ,/ 这/ n/ 个/ 顶点/ 与/ Q/ 的/ n/ 个/ 顶点/ 一一对应/ ,/ 并且/ 对应/ 顶点/ 的/ 标签/ 相同/ ,/ 对于/ Q/ 中/ 相邻/ 的/ 两个/ 顶点/ ,/ 其/ 对应/ 顶点/ 在/ G/ 中距离/ 不/ 大于/ σ/ ./ 在/ 本文/ 提到/ 的/ 近邻/ 查询/ 中/ ,/ 查询/ Q/ 包括/ 顶点/ 标签集/ R/ 和/ 距离/ 约束/ σ/ ./ 查询/ 结果/ 是/ 图/ G/ 的/ 顶点/ 子集/ ,/ 这个/ 顶点/ 子集/ 的/ 标签集/ 包含/ R/ ,/ 并且/ 其/ 任意/ 两个/ 顶点/ 间/ 的/ 距离/ 不/ 超过/ σ/ ./ 因此/ ,/ 近邻/ 查询/ 是/ 一种/ 基于/ 距离/ 的/ 查询/ ./ 子图/ 匹配/ 查询/ 和/ 近邻/ 查询/ 是/ 两种/ 类型/ 的/ 查询/ ,/ 利用/ 子图/ 匹配/ 查询/ 算法/ 不能/ 解决/ 近邻/ 查询/ 问题/ ./ 近邻/ 查询/ 是/ 一种/ 特殊/ 情况/ 下/ 的/ 模式匹配/ 查询/ ./ 当/ 模式匹配/ 查询/ 的/ 查询/ Q/ 是/ 一个团/ 时/ ,/ 该/ 模式匹配/ 查询/ 就/ 等价/ 于/ 以/ Q/ 的/ 顶点/ 标签集/ 作为/ 输入/ 的/ 近邻/ 查询/ ./ 因此/ ,/ 可以/ 使用/ 模式匹配/ 查询/ 算法/ 来/ 解决/ 近邻/ 查询/ 问题/ ./ 但是/ 据/ 我们/ 所知/ ,/ 目前/ 尚/ 没有/ 不/ 确定/ 图上/ 的/ 模式匹配/ 查询/ 方面/ 的/ 工作/ ,/ 而且/ 确定/ 图上/ 的/ 相关/ 算法/ 也/ 无法/ 直接/ 应用/ 到/ 不/ 确定/ 图上/ ,/ 因此/ 有/ 必要/ 提出/ 高效/ 的/ 不/ 确定/ 图上/ 近邻/ 查询处理/ 算法/ ./ 3/ 问题/ 定义/ 3.1/ 不/ 确定/ 图/ 本文/ 沿用/ 文献/ [/ 4/ ]/ 提出/ 的/ 不/ 确定/ 图/ 语义/ 模型/ ./ 为/ 使/ 本文/ 内容/ 完整/ ,/ 这里/ 再次/ 给出/ 不/ 确定/ 图/ 的/ 相关/ 定义/ ./ 定义/ 1/ (/ 不/ 确定/ 图/ )/ ./ 不/ 确定/ 图是/ 一个/ 五元/ 组/ G/ =/ (/ (/ V/ ,/ E/ )/ ,/ Σ/ ,/ L/ ,/ P/ )/ ,/ 其中/ (/ V/ ,/ E/ )/ 是/ 一个/ 无向/ 图/ ,/ Σ/ 是/ 一个/ 标签/ 集合/ ,/ L/ :/ V/ →/ 2/ Σ/ 是/ 一个/ 为/ 顶点/ 分配/ 标签/ 子集/ 的/ 函数/ ./ P/ :/ E/ →/ (/ 0/ ,/ 1/ ]/ 是/ 一个/ 为边/ 分配/ 存在/ 概率/ 值/ 的/ 函数/ ,/ P/ (/ (/ u/ ,/ v/ )/ )/ 表示/ 顶点/ u/ 和/ 顶点/ v/ 之间/ 的/ 边/ 存在/ 概率/ ./ 特别/ 地/ ,/ P/ (/ (/ u/ ,/ v/ )/ )/ =/ 1/ 表示/ 边/ (/ u/ ,/ v/ )/ 一定/ 存在/ ./ 一个/ 不/ 确定/ 图/ G/ 具有/ 多种/ 可能/ 的/ 存在/ 形式/ ,/ 每个/ 存在/ 形式/ 被/ 称为/ G/ 的/ 一个/ 蕴含/ 子图/ ./ 形式化/ 地说/ ,/ 一个/ 确定/ 图/ G/ =/ (/ (/ V/ ,/ E/ )/ ,/ Σ/ ,/ L/ )/ 是/ G/ =/ (/ (/ V/ ,/ E/ )/ ,/ Σ/ ,/ L/ ,/ P/ )/ 的/ 一个/ 蕴含/ 子图/ 当且/ 仅/ 当/ V/ =/ V/ ,/ E/ / E/ ,/ Σ/ =/ Σ/ ,/ L/ =/ L/ ./ 不/ 确定/ 图/ G/ 的/ 所有/ 蕴含/ 子图/ 构成/ 的/ 集合/ 记为/ Imp/ (/ G/ )/ ./ 本文/ 假设/ 不/ 确定/ 图中边/ 的/ 存在/ 概率/ 相互/ 独立/ ,/ 因此/ 蕴含/ 子图/ G/ 被/ 不/ 确定/ 图/ G/ 蕴涵/ 的/ 概率/ 为/ P/ (/ G/ / G/ )/ =/ ∏/ e/ ∈/ E/ (/ G/ )/ P/ (/ e/ )/ ∏/ e/ ∈/ E/ (/ G/ )/ \/ E/ (/ G/ )/ 文献/ [/ 4/ ]/ 证明/ 了/ G/ 的/ 全部/ 蕴含/ 子图/ 被/ G/ 蕴涵/ 的/ 概率/ 和/ 为/ 1/ ,/ 即/ ∑/ G/ ∈/ Imp/ (/ G/ )/ Pr/ (/ G/ / G/ )/ =/ 1/ ./ Page4/ 图/ 2/ (/ a/ )/ 是/ 一个/ 不/ 确定/ 图/ G/ ,/ 图/ 2/ (/ b/ )/ 是/ G/ 的/ 蕴含/ 子/ 图集/ Imp/ (/ G/ )/ ./ 根据/ 式/ (/ 1/ )/ 可以/ 计算/ 出/ G/ 的/ 每个/ 蕴图/ 2/ 不/ 确定/ 图/ G/ 、/ Imp/ (/ G/ )/ 以及/ 顶点/ v1/ ,/ v2/ 间/ 距离/ 的/ 概率分布/ pv1/ ,/ v23/ ./ 2/ 不/ 确定/ 图/ 顶点/ 距离/ 度量/ 函数/ 在/ 确定/ 图中/ ,/ 两个/ 顶点/ 间/ 的/ 距离/ 用/ 这/ 两个/ 顶点/ 之间/ 的/ 最/ 短/ 路径/ 长度/ 表示/ ./ 然而/ ,/ 在/ 不/ 确定/ 图中/ ,/ 两个/ 顶点/ 在/ 不同/ 蕴含/ 子图/ 中/ 的/ 最/ 短/ 路径/ 长度/ 不尽相同/ ./ 因此/ ,/ 在/ 定义/ 不/ 确定/ 图上/ 近邻/ 查询/ 之前/ ,/ 需要/ 先/ 定义/ 不/ 确定/ 图/ 顶点/ 距离/ 度量/ 函数/ ./ 本文/ 基于/ 文献/ [/ 5/ ]/ 提出/ 的/ 不/ 确定/ 图/ 顶点/ 间/ 的/ 众数/ 距离/ 和/ 期望/ 可/ 达/ 距离/ ,/ 提出/ 一种/ 新/ 的/ 不/ 确定/ 图/ 顶点/ 距离/ 度量/ 函数/ —/ —/ —/ 可靠/ 期望/ 距离/ ./ 于/ d/ 的/ 概率/ 为/ 给定/ 一个/ 不/ 确定/ 图/ G/ ,/ G/ 中/ 顶点/ u/ 和/ v/ 距离/ 等/ 其中/ ,/ dG/ (/ u/ ,/ v/ )/ 表示/ 蕴含/ 子图/ G/ 中/ ,/ 顶点/ u/ ,/ v/ 之间/ 的/ 最/ 短/ 路径/ 长度/ ./ 图/ 2/ (/ c/ )/ 表示/ 图/ 2/ (/ a/ )/ 中/ G/ 的/ 顶点/ v1/ 和/ v2/ 之间/ 距离/ 的/ 概率分布/ ./ 由此/ ,/ 文献/ [/ 4/ ]/ 定义/ 了/ 如下/ 两种/ 距离/ 度量/ 函数/ :/ (/ 1/ )/ 众数/ 距离/ ./ 不/ 确定/ 图/ G/ 中/ 任意/ 两个/ 顶点/ u/ 和/ v/ 间/ 的/ 众数/ 距离/ 为/ dJ/ (/ u/ ,/ v/ )/ =/ argmaxd/ {/ pu/ ,/ v/ (/ d/ )/ }/ ,/ 即/ u/ 与/ v/ 之间/ 概率/ 最大/ 的/ 距离/ 值/ ./ (/ 2/ )/ 期望/ 可/ 达/ 距离/ ./ 不/ 确定/ 图/ G/ 中/ 任意/ 两个/ 顶点/ u/ 和/ v/ 之间/ 的/ 期望/ 可/ 达/ 距离/ 为/ 含子/ 图/ 被/ G/ 蕴含/ 的/ 概率/ ./ 例如/ ,/ G7/ 被/ G/ 蕴含/ 的/ 概率/ 为/ 0.9/ ×/ 0.7/ ×/ (/ 1/ -/ 0.4/ )/ =/ 0.378/ ./ 即/ u/ 与/ v/ 之间/ 距离/ 的/ 期望值/ (/ 需要/ 注意/ 的/ 是/ ,/ 在/ 计算/ 期望/ 可/ 达/ 距离/ 时/ ,/ 不/ 考虑/ u/ 与/ v/ 之间/ 距离/ 为/ 无穷的/ 情况/ )/ ./ 然而/ ,/ 上述/ 2/ 种/ 距离/ 度量/ 都/ 有/ 其/ 局限性/ :/ (/ 1/ )/ 当/ 顶点/ u/ 和/ v/ 在/ 不/ 确定/ 图/ G/ 中/ 的/ 距离/ 分布/ 较/ 平均/ 时/ ,/ 众数/ 距离/ 度量/ 不/ 具有/ 一般性/ ./ 例如/ ,/ 在/ 顶点/ u/ ,/ v/ 之间/ 距离/ 的/ 概率分布/ 中/ ,/ pu/ ,/ v/ (/ 1/ )/ =/ pu/ ,/ v/ (/ 2/ )/ =/ 0.33/ ,/ pu/ ,/ v/ (/ )/ =/ 0.34/ ,/ 此时/ u/ 和/ v/ 之间/ 的/ 众数/ 距离/ 为/ ./ 而/ 实际上/ u/ 和/ v/ 之间/ 的/ 距离/ 为/ 无穷的/ 概率/ 只有/ 0.34/ ,/ 为/ 有/ 穷/ 的/ 概率/ 为/ 0.66/ ;/ (/ 2/ )/ 为/ 保证/ 期望/ 可/ 达/ 距离/ 有穷/ ,/ 计算/ 时/ 将/ d/ =/ 的/ 部分/ 排除/ ./ 所以/ ,/ 只要/ pu/ ,/ v/ (/ )/ ≠/ 1/ ,/ u/ 和/ v/ 之间/ 的/ 距离/ 就/ 始终/ 有穷/ ./ 例如/ ,/ 在/ 顶点/ u/ ,/ v/ 之间/ 距离/ 的/ 概率分布/ 中/ ,/ pu/ ,/ v/ (/ 1/ )/ =/ 0.05/ ,/ pu/ ,/ v/ (/ )/ =/ 0.95/ ,/ 此时/ u/ ,/ v/ 之间/ 的/ 期望/ 可/ 达/ 距离/ 为/ 1/ ./ 而/ 实际上/ 两个/ 顶点/ 之间/ 距离/ 有/ 穷/ 的/ 概率/ 仅为/ 0.05/ ,/ 距离/ 为/ 无穷的/ 概率/ 是/ 0.95/ ./ 本文/ 对/ 上述/ 2/ 种/ 不/ 确定/ 图/ 顶点/ 距离/ 度量/ 函数/ 的/ 不足/ 进行/ 修正/ ,/ 提出/ 可靠/ 期望/ 距离/ 度量/ 函数/ ./ 其/ 定义/ 如下/ :/ 不/ 确定/ 图/ G/ 中/ 任意/ 两个/ 顶点/ u/ 和/ v/ 之间/ 的/ 可靠/ 期望/ 距离/ 为/ dRE/ (/ u/ ,/ v/ )/ =/ dER/ (/ u/ ,/ v/ )/ ,/ 若/ pu/ ,/ v/ (/ )/ </ 0.5/ 其/ 含义/ 是/ :/ 当/ pu/ ,/ v/ (/ )/ </ 0.5/ 时/ ,/ 期望/ 可/ 达/ 距离/ Page5/ 是/ 一种/ 非常/ 可靠/ 的/ 距离/ 度量/ ,/ 于是/ 采用/ 期望/ 可/ 达/ 距离/ 来/ 度量/ 顶点/ 间/ 距离/ ;/ 当/ pu/ ,/ v/ (/ )/ / 0.5/ 时/ ,/ 期望/ 可/ 达/ 距离/ 变得/ 不/ 可靠/ ,/ 由于/ 此时/ 在/ 所有/ 可能/ 距离/ 值中/ 概率/ 最大/ ,/ 根据/ 众数/ 距离/ 定义/ ,/ u/ ,/ v/ 之间/ 的/ 距离/ 为/ ./ 3.3/ 近邻/ 查询/ 定义/ 2/ (/ 顶点/ 集/ 直径/ )/ ./ 给定/ 一个/ 不/ 确定/ 图/ G/ =/ (/ (/ V/ ,/ E/ )/ ,/ Σ/ ,/ L/ ,/ P/ )/ 和/ G/ 的/ 一个/ 顶点/ 子集/ W/ / V/ ,/ W/ 在/ G/ 中/ 的/ 直径/ 为/ diam/ (/ W/ )/ =/ argmaxu/ ,/ v/ ∈/ W/ {/ dRE/ (/ u/ ,/ v/ )/ }/ ./ 由此/ ,/ 我们/ 给出/ 不/ 确定/ 图/ 近邻/ 查询/ 的/ 形式化/ 定义/ ./ 定义/ 3/ (/ 不/ 确定/ 图上/ 的/ 近邻/ 查询/ )/ ./ 给定/ 一个/ 不/ 确定/ 图/ G/ =/ (/ (/ V/ ,/ E/ )/ ,/ Σ/ ,/ L/ ,/ P/ )/ ,/ G/ 上/ 的/ 近邻/ 查询/ 是/ 一个二元/ 组/ Q/ =/ 〈/ R/ ,/ σ/ 〉/ ,/ 其中/ R/ / Σ/ ,/ σ/ 为/ 非负/ 整数/ ./ Q/ 的/ 每个/ 查询/ 结果/ 是/ G/ 的/ 一个/ 顶点/ 子集/ W/ / V/ ,/ W/ 满足/ 如下/ 性质/ :/ (/ 1/ )/ 标签集/ 覆盖性/ ./ R/ / ∪/ v/ ∈/ WL/ (/ v/ )/ ;/ (/ 2/ )/ 极小/ 性/ ./ W/ 的/ 任意/ 真/ 子集/ 都/ 不/ 满足/ 性质/ 1/ ;/ (/ 3/ )/ 紧密性/ ./ diam/ (/ W/ )/ / σ/ ./ 本文/ 将/ Q/ 的/ 每个/ 查询/ 结果/ 称作/ Q/ 的/ 匹配/ 顶点/ 子集/ ./ 对于/ 用户/ 给定/ 的/ 近邻/ 查询/ ,/ 满足条件/ 的/ 匹配/ 顶点/ 子集/ 的/ 数量/ 可能/ 非常/ 大/ ./ 在/ 这种/ 情况/ 下/ ,/ 选择/ 直径/ 最小/ 的/ 前/ k/ 个/ 匹配/ 顶点/ 子集/ 便/ 可/ 满足/ 应用/ 需要/ ./ 由此/ ,/ 不/ 确定/ 图上/ 的/ top/ -/ k/ 近邻/ 查询/ 问题/ 的/ 定义/ 如下/ :/ 输入/ :/ 不/ 确定/ 图/ G/ =/ (/ (/ V/ ,/ E/ )/ ,/ Σ/ ,/ L/ ,/ P/ )/ ,/ 查询/ Q/ =/ 〈/ R/ ,/ σ/ ,/ k/ 〉/ ,/ 其中/ R/ / Σ/ ,/ σ/ 为/ 非负/ 整数/ ,/ k/ 为/ 正整数/ ./ 输出/ :/ G/ 中/ 直径/ 最小/ 的/ k/ 个/ 匹配/ 顶点/ 子集/ ./ 若/ 满足条件/ 的/ 匹配/ 顶点/ 子集/ 的/ 数量/ 少于/ k/ 个/ ,/ 则/ 将/ 其/ 全部/ 输出/ ./ 4/ 近邻/ 查询处理/ 本/ 节/ 提出/ 了/ 一种/ 高效/ 处理/ 不/ 确定/ 图上/ top/ -/ k/ 近邻/ 查询/ 的/ 算法/ ./ 给定/ 一个/ 不/ 确定/ 图/ G/ =/ (/ (/ V/ ,/ E/ )/ ,/ Σ/ ,/ L/ ,/ P/ )/ 和/ 一个/ top/ -/ k/ 近邻/ 查询/ Q/ =/ 〈/ R/ ,/ σ/ ,/ k/ 〉/ ,/ 算法/ 包括/ 以下/ 4/ 个/ 步骤/ :/ 1/ ./ 计算/ G/ 中/ 任意/ 两个/ 顶点/ u/ 和/ v/ 之间/ 的/ 可靠/ 期望/ 距离/ dRE/ (/ u/ ,/ v/ )/ ./ 根据/ 可靠/ 期望/ 距离/ 定义/ 可知/ ,/ 为/ 计算/ dRE/ (/ u/ ,/ v/ )/ ,/ 需先/ 计算/ u/ 和/ v/ 之间/ 距离/ 的/ 概率分布/ ./ 解决/ 该/ 问题/ 的/ 精确/ 方法/ 是/ 穷举/ G/ 的/ 所有/ 蕴含/ 子图/ ,/ 然后/ 在/ 每个/ 蕴含/ 子图/ 上/ 计算/ u/ 和/ v/ 之间/ 最短/ 路径/ 长度/ 的/ 概率分布/ ./ 然而/ ,/ G/ 的/ 全部/ 蕴含/ 子图/ 的/ 数量/ 为/ 2/ |/ E/ |/ ,/ 其中/ |/ E/ |/ 是/ G/ 的/ 边数/ ,/ 穷举/ 方法/ 效率/ 显然/ 非常低/ ./ 本文/ 使用/ 采样/ 方法/ 来/ 近似计算/ u/ 和/ v/ 之间/ 最短/ 路径/ 长度/ 的/ 概率分布/ ,/ 在/ 保证/ 计算结果/ 精度/ 的/ 前提/ 下/ 显著/ 提高/ 计算/ 效率/ ./ 具体方法/ 见/ 4.2/ ./ 1/ 节/ ./ 2/ ./ 根据/ 顶点/ 间/ 可靠/ 期望/ 距离/ 以及/ 距离/ 约束/ σ/ ,/ 构建/ σ/ -/ 近邻/ 关系/ 图/ G/ σ/ ./ G/ σ/ 是/ 一个/ 确定/ 图/ ,/ 其/ 构建/ 方法/ 如下/ :/ G/ σ/ 的/ 顶点/ 集/ 和/ G/ 的/ 顶点/ 集/ 相同/ ,/ 并且/ 对于/ G/ 中/ 任意/ 两个/ 顶点/ u/ 和/ v/ ,/ 若/ dRE/ (/ u/ ,/ v/ )/ / σ/ ,/ 则/ 在/ G/ σ/ 中/ 存在/ 一条/ 连接/ u/ 和/ v/ 的/ 边/ ./ 本文/ 4.1/ 节将/ 给出/ 近邻/ 关系/ 图/ 的/ 形式化/ 定义/ ./ 后文/ 将/ 证明/ G/ 中/ 任意/ 顶点/ 子集/ W/ 的/ 直径/ 小于/ 等于/ σ/ 当且/ 仅/ 当/ W/ 在/ G/ σ/ 是/ 一个团/ ./ 3/ ./ 根据/ 查询/ Q/ 给出/ 的/ 标签集/ R/ 对/ G/ σ/ 进行/ 预处理/ ./ 通过/ 分析/ 可知/ ,/ G/ σ/ 中/ 可能/ 出现/ 在/ 结果/ 中/ 的/ 顶点/ v/ 具有/ 如下/ 性质/ :/ 3.1/ ./ v/ 的/ 标签集/ L/ (/ v/ )/ 与/ R/ 的/ 交集/ 不为/ 空/ ./ 3.2/ ./ G/ σ/ 中/ 与/ v/ 相邻/ 的/ 全部/ 顶点/ 的/ 标签集/ 与/ L/ (/ v/ )/ 的/ 并/ 集/ 一定/ 包含/ R/ ./ 利用/ 这/ 两条/ 性质/ ,/ 对/ G/ σ/ 中/ 的/ 顶点/ 和/ 边/ 进行/ 迭代/ 删除/ ,/ 直至/ 将/ 不/ 可能/ 出现/ 在/ 任何/ 查询/ 结果/ 中/ 的/ 顶点/ 及其/ 相连/ 的/ 边/ 全部/ 删除/ ./ 记/ 预处理/ 后/ 得到/ 的/ 图为/ G/ σ/ ./ 4/ ./ 根据/ 查询/ 标签集/ R/ ,/ 在/ G/ σ/ 上/ 找出/ k/ 个团/ ,/ 使得/ 每个/ 团中/ 所有/ 顶点/ 标签集/ 的/ 并/ 集/ 包含/ R/ ,/ 并且/ 这些/ 团在/ G/ 中/ 的/ 直径/ 最小/ ./ 这/ k/ 个团/ 就是/ 不/ 确定/ 图/ G/ 近邻/ 查询/ Q/ 的/ 结果/ 集/ ./ 本文/ 采用/ 树/ 搜索/ 策略/ 来/ 解决/ 带/ 标签/ 覆盖/ 的/ 团/ 查询/ 问题/ ,/ 并/ 运用/ 分支/ 界限/ 方法/ 计算/ 直径/ 最小/ 的/ top/ -/ k/ 结果/ ./ 对于/ 两个/ 查询/ Q1/ =/ 〈/ R1/ ,/ σ/ 1/ ,/ k1/ 〉/ 和/ Q2/ =/ 〈/ R2/ ,/ σ/ 2/ ,/ k2/ 〉/ ,/ 上述/ 算法/ 对/ G/ 中/ 任意/ 两个/ 顶点/ 计算/ 得到/ 相同/ 的/ 可靠/ 期望/ 距离/ ;/ 并且/ ,/ 若/ σ/ 1/ =/ σ/ 2/ ,/ 则/ 上述/ 算法/ 为/ Q1/ 和/ Q2/ 计算/ 得到/ 相同/ 的/ σ/ -/ 近邻/ 关系/ 图/ ./ 因此/ ,/ 为/ 避免/ 重复/ 计算/ ,/ 对/ 每个/ 可能/ 的/ 距离/ σ/ 构造/ σ/ -/ 近邻/ 关系/ 图/ G/ σ/ ,/ 并/ 建立/ 近邻/ 关系/ 图/ 索引/ ./ 对于/ 任意/ 查询/ Q/ =/ 〈/ R/ ,/ σ/ ,/ k/ 〉/ ,/ 算法/ 可以/ 直接/ 在/ G/ σ/ 执行/ 查询处理/ ./ 本/ 节余/ 下/ 内容/ 将/ 介绍/ 索引/ 结构/ 、/ 索引/ 构造/ 算法/ 以及/ 查询处理/ 算法/ ./ 4.1/ 索引/ 结构/ 定义/ 4/ (/ σ/ -/ 近邻/ 关系/ 图/ )/ ./ 给定/ 不/ 确定/ 图/ G/ =/ (/ (/ V/ ,/ E/ )/ ,/ Σ/ ,/ L/ ,/ P/ )/ 和/ 非负/ 整数/ σ/ ,/ G/ 的/ σ/ -/ 近邻/ 关系/ 图/ G/ σ/ =/ (/ (/ V/ σ/ ,/ E/ σ/ )/ ,/ Σ/ σ/ ,/ L/ σ/ ,/ W/ σ/ )/ 是/ 一个/ 确定/ 加权/ 图/ ,/ 其中/ V/ σ/ =/ V/ ,/ Σ/ σ/ =/ Σ/ ,/ L/ σ/ =/ L/ ,/ E/ σ/ =/ {/ (/ u/ ,/ v/ )/ |/ u/ ,/ v/ ∈/ V/ σ/ 且/ 在/ G/ 中/ dRE/ (/ u/ ,/ v/ )/ / σ/ }/ ,/ W/ σ/ 是/ 为/ E/ σ/ 中/ 的/ 边/ 分配权/ 值/ 的/ 函数/ ,/ 对于/ 任意/ (/ u/ ,/ v/ )/ ∈/ E/ σ/ ,/ W/ σ/ (/ u/ ,/ v/ )/ =/ dRE/ (/ u/ ,/ v/ )/ ./ σ/ -/ 近邻/ 关系/ 图是/ 不/ 确定/ 图/ top/ -/ k/ 近邻/ 查询处理/ 算法/ 使用/ 的/ 重要/ 数据结构/ ./ 我们/ 对/ σ/ -/ 近邻/ 关系/ 图有/ 以下/ 3/ 个/ 重要/ 观察/ :/ (/ 1/ )/ 对/ 不/ 确定/ 图/ G/ 上/ 任意/ 两个/ 查询/ Q1/ =/ 〈/ R1/ ,/ σ/ 1/ ,/ k1/ 〉/ 和/ Q2/ =/ 〈/ R2/ ,/ σ/ 2/ ,/ k2/ 〉/ ,/ 若/ σ/ 1/ =/ σ/ 2/ ,/ 则/ G/ σ/ 1/ =/ G/ σ/ 2/ ;/ (/ 2/ )/ G/ σ/ 中/ 任意/ 边/ (/ u/ ,/ v/ )/ 上/ 的/ 权值/ W/ σ/ (/ u/ ,/ v/ )/ 仅/ 与/ 不/ 确定/ 图/ G/ 相关/ 而/ 与/ 查询/ Q/ 无关/ ,/ 因为/ W/ σ/ (/ u/ ,/ v/ )/ =/ Page6dRE/ (/ u/ ,/ v/ )/ ;/ (/ 3/ )/ 若/ σ/ 1/ / σ/ 2/ ,/ 则/ G/ σ/ 1/ / G/ σ/ 2/ ./ 根据/ 观察/ (/ 1/ )/ ,/ 可/ 对/ σ/ =/ 1/ ,/ 2/ ,/ 3/ ,/ …/ ,/ 预先/ 计算/ 出/ G/ σ/ ,/ 并/ 将/ 全部/ G/ σ/ 按照/ σ/ 进行/ 索引/ ./ 当/ 处理/ 查询/ Q/ =/ 〈/ R/ ,/ σ/ ,/ k/ 〉/ 时/ ,/ 直接/ 根据/ σ/ 快速/ 取回/ G/ σ/ ,/ 并/ 在/ G/ σ/ 上/ 执行/ 查询处理/ ./ 根据/ 观察/ (/ 2/ )/ ,/ 可/ 将/ 所有/ G/ σ/ (/ σ/ =/ 1/ ,/ 2/ ,/ 3/ ,/ …/ )/ 边上/ 的/ 权值/ 仅/ 存储/ 一次/ ,/ 从而/ 降低/ 空间/ 复杂性/ ./ 我们/ 使用/ 表/ Graph/ 存储/ G/ σ/ 中边/ 的/ 权值/ ./ 根据/ 观察/ (/ 3/ )/ ,/ 可/ 将/ Graph/ 表中边/ 的/ 权值/ 按/ 递增/ 的/ 顺序/ 排序/ ,/ G/ σ/ 用/ Graph/ 表中边/ 的/ 权值/ 不/ 大于/ σ/ 的/ 所有/ 记录/ 表示/ ./ 具体/ 的/ 索引/ 结构/ 如图/ 3/ 所示/ ,/ 包括/ 两个/ 部分/ :/ 第/ 1/ 部分/ 是/ Index/ 表/ ,/ 具有/ 2/ 列/ :/ 第/ 1/ 列是/ 距离/ 约束/ σ/ ;/ 第/ 2/ 列是/ 指向/ Graph/ 表/ 记录/ 的/ 指针/ ,/ Graph/ 表/ 的/ 第/ 1/ 条/ 记录/ 到/ 该/ 指针/ 所指/ 记录/ 之间/ 的/ 所有/ 记录/ 表示/ G/ σ/ ./ 第/ 2/ 部分/ 是/ Graph/ 表/ ,/ 具有/ 3/ 列/ :/ 第/ 1/ 列/ 和/ 第/ 2/ 列是/ G/ σ/ 的/ 顶点/ ;/ 第/ 3/ 列是/ G/ σ/ 中边/ 的/ 权值/ ./ 4.2/ 索引/ 构造/ 4.2/ ./ 1/ 索引/ 构造/ 第/ 1/ 阶段/ σ/ -/ 近邻/ 关系/ 图/ 索引/ 构建/ 的/ 第/ 1/ 阶段/ 是/ 计算/ 不/ 确定/ 图/ G/ 中/ 任意/ 两个/ 顶点/ 间/ 的/ 可靠/ 期望/ 距离/ ./ 我们/ 已经/ 知道/ 可靠/ 期望/ 距离/ dRE/ (/ u/ ,/ v/ )/ 的/ 计算/ 依赖/ G/ 上/ u/ 和/ v/ 之间/ 距离/ 的/ 概率分布/ ,/ 而/ 通过/ 穷举/ G/ 的/ 全部/ 蕴含/ 子图/ 的/ 方法/ 来/ 计算/ u/ 和/ v/ 之间/ 距离/ 概率分布/ 是/ 极其/ 低效/ 的/ ./ 为了/ 既保证/ 计算结果/ 精度/ 又/ 显著/ 提高/ 计算/ 效率/ ,/ 本文/ 采用/ MonteCarlo/ 方法/ 近似计算/ 可靠/ 期望/ 距离/ dRE/ (/ u/ ,/ v/ )/ ,/ 该/ 算法/ 的/ 思想/ 如下/ :/ 按照/ G/ 的/ 蕴含/ 子图/ 被/ G/ 蕴含/ 的/ 概率/ 对/ G/ 的/ 蕴含/ 子图/ 集合/ Imp/ (/ G/ )/ 进行/ r/ 次/ 独立/ 采样/ (/ r/ 的/ 具体/ 数值/ 在/ 后文/ 给出/ )/ ,/ 得到/ r/ 个/ G/ 的/ 蕴含/ 子图/ G1/ ,/ G2/ ,/ …/ ,/ Gr/ ;/ 在/ 每个/ 采样/ 得到/ 的/ 蕴含/ 子图/ Gi/ 上/ ,/ 计算/ 任意/ 两个/ 顶点/ 之间/ 的/ 最/ 短/ 路径/ 长度/ ;/ 然后/ ,/ 对于/ G/ 中/ 任意/ 两个/ 顶点/ u/ 和/ v/ ,/ 将/ G1/ ,/ G2/ ,/ …/ ,/ Gr/ 上/ u/ 和/ v/ 之间/ 最短/ 路径/ 长度/ 的/ 分布/ 作为/ G/ 上/ u/ 和/ v/ 之间/ 距离/ 概率分布/ 的/ 近似/ ;/ 最后/ ,/ 使用/ 该/ 近似/ 距离/ 分布/ ,/ 计算/ 近似/ 可靠/ 期望/ 距离/ ./ 下面/ 分析/ 采样/ 次数/ r/ 的/ 取值/ ./ 引理/ 1/ ./ 对于/ 一个/ 不/ 确定/ 图/ G/ =/ (/ (/ V/ ,/ E/ )/ ,/ Σ/ ,/ L/ ,/ P/ )/ 以及/ 0/ </ ε/ ,/ δ/ </ 1/ ,/ 设/ S/ =/ {/ G1/ ,/ G2/ ,/ …/ ,/ Gr/ }/ 是/ 按照/ G/ 的/ 蕴含/ 子图/ 被/ G/ 蕴含/ 的/ 概率/ 对/ G/ 的/ 蕴含/ 子图/ 集合/ Imp/ (/ G/ )/ 进行/ r/ >/ 0/ 次/ 独立/ 采样/ 得到/ 的/ 样本空间/ ./ 对/ G/ 的/ 顶点/ u/ 和/ v/ ,/ 设/ 0/ ,/ {/ 否则/ Ii/ =/ 1/ ,/ 若/ u/ 和/ v/ 在/ 抽样/ 得到/ 的/ 蕴含/ 子图/ Gi/ 中/ 连通/ 得到/ ,/ 若/ r/ / 3Pr1/ 其中/ ,/ p/ (/ u/ ,/ v/ )/ 表示/ G/ 中/ u/ 和/ v/ 连通/ 的/ 概率/ ./ 证明/ ./ 引理/ 1/ 是/ ChernoffBound/ [/ 13/ ]/ 的/ 简单/ 应用/ ./ 其中/ I1/ ,/ I2/ ,/ …/ ,/ Ir/ 是/ 独立/ 同/ 分布/ 示性/ 随机变量/ ,/ 根据/ ChernoffBound/ 有/ Pr1/ 若/ r/ 应/ 满足/ r/ / 3/ (/ Pr1/ 引理/ 2/ ./ 对于/ 一个/ 不/ 确定/ 图/ G/ =/ (/ (/ V/ ,/ E/ )/ ,/ Σ/ ,/ L/ ,/ P/ )/ 以及/ 0/ </ ε/ ,/ δ/ </ 1/ ,/ 设/ S/ =/ {/ G1/ ,/ G2/ ,/ …/ ,/ Gr/ }/ 是/ 按照/ G/ 的/ 蕴含/ 子图/ 被/ G/ 蕴含/ 的/ 概率/ 对/ G/ 的/ 蕴含/ 子图/ 集合/ Imp/ (/ G/ )/ 进行/ r/ >/ 0/ 次/ 独立/ 采样/ 得到/ 的/ 样本空间/ ./ 对/ G/ 的/ 顶点/ u/ 和/ v/ ,/ 设/ 0/ ,/ {/ di/ =/ u/ ,/ v/ 在/ Gi/ 中/ 最/ 短/ 路径/ 长度/ ,/ 若/ u/ ,/ v/ 在/ Gi/ 中/ 连通/ 得到/ ,/ 若/ r/ / (/ n/ -/ 1/ )/ 2/ 其中/ n/ =/ |/ V/ |/ ./ 证明/ ./ 引理/ 2/ 是/ Hoeffding/ 不等式/ 的/ 简单/ 应用/ ./ 根据/ 式/ (/ 5/ )/ 可知/ Pr/ (/ di/ ∈/ [/ 0/ ,/ n/ -/ 1/ ]/ )/ =/ 1/ ,/ 由/ Hoef/ -/ Page7fding/ 不等式/ 有/ (/ r/ ∑/ rPr1/ 若/ r/ 满足/ r/ / (/ n/ -/ 1/ )/ 2/ 由/ 引理/ 1/ 和/ 2/ ,/ 我们/ 得到/ 如下/ 定理/ ./ 定理/ 1/ ./ 对于/ 不/ 确定/ 图/ G/ =/ (/ (/ V/ ,/ E/ )/ ,/ Σ/ ,/ L/ ,/ P/ )/ 以及/ 0/ </ ε/ ,/ δ/ </ 1/ ,/ 设/ S/ =/ {/ G1/ ,/ G2/ ,/ …/ ,/ Gr/ }/ 是/ 按照/ G/ 的/ 蕴含/ 子图/ 被/ G/ 蕴含/ 的/ 概率/ 对/ G/ 的/ 蕴含/ 子图/ 集合/ Imp/ (/ G/ )/ 进行/ r/ / max6/ 采样/ 得到/ 的/ 样本空间/ ./ 对/ G/ 的/ 顶点/ u/ 和/ v/ ,/ 设/ p/ (/ u/ ,/ v/ )/ 表示/ G/ 中/ u/ 和/ v/ 连通/ 的/ 概率/ ,/ p/ (/ u/ ,/ v/ )/ =/ 1/ 中/ Ii/ 如式/ (/ 4/ )/ 定义/ ;/ 又/ 设/ dRE/ (/ u/ ,/ v/ )/ =/ 其中/ di/ 的/ 定义/ 见式/ (/ 5/ )/ ./ 我们/ 有如/ 下结论/ :/ (/ 1/ )/ 若/ p/ (/ u/ ,/ v/ )/ >/ 0.5/ +/ ε/ ,/ 则/ Pr/ [/ p/ (/ u/ ,/ v/ )/ </ 0.5/ ]/ </ δ/ // 2/ ,/ 进而/ Pr/ [/ dRE/ (/ u/ ,/ v/ )/ </ ]/ </ δ/ // 2/ ;/ (/ 2/ )/ 若/ 0.5/ </ p/ (/ u/ ,/ v/ )/ </ 0.5/ +/ ε/ ,/ 则/ Pr/ [/ p/ (/ u/ ,/ v/ )/ </ 0.5/ ]/ </ δ/ // 2/ +/ (/ 1/ -/ δ/ )/ // 2/ ·/ (/ ε/ -/ p/ (/ u/ ,/ v/ )/ +/ 0.5/ )/ // ε/ ,/ 进而/ Pr/ [/ dRE/ (/ u/ ,/ v/ )/ </ ]/ </ δ/ // 2/ +/ (/ 1/ -/ δ/ )/ // 2/ ·/ (/ ε/ -/ p/ (/ u/ ,/ v/ )/ +/ 0.5/ )/ // ε/ ;/ (/ 3/ )/ 若/ p/ (/ u/ ,/ v/ )/ </ 0.5/ -/ ε/ ,/ 则/ Pr/ [/ p/ (/ u/ ,/ v/ )/ >/ 0.5/ ]/ </ δ/ // 2/ ,/ 进而/ Pr/ [/ |/ dRE/ (/ u/ ,/ v/ )/ -/ dRE/ (/ u/ ,/ v/ )/ |/ >/ ε/ ]/ </ δ/ (/ 1/ -/ δ/ // 2/ )/ ;/ (/ 4/ )/ 若/ 0.5/ -/ ε/ </ p/ (/ u/ ,/ v/ )/ </ 0.5/ ,/ 则/ Pr/ [/ p/ (/ u/ ,/ v/ )/ >/ 0.5/ ]/ </ δ/ // 2/ +/ (/ 1/ -/ δ/ )/ // 2/ ·/ (/ ε/ -/ 0.5/ +/ p/ (/ u/ ,/ v/ )/ )/ // ε/ ,/ 进而/ Pr/ [/ |/ dRE/ (/ u/ ,/ v/ )/ -/ dRE/ (/ u/ ,/ v/ )/ |/ >/ ε/ ]/ </ δ/ (/ δ/ // 2/ +/ (/ 1/ -/ δ/ )/ // 2/ ·/ (/ ε/ -/ 0.5/ +/ p/ (/ u/ ,/ v/ )/ )/ // ε/ )/ ./ 根据上述/ 定理/ ,/ 得到/ 如下/ 计算/ 不/ 确定/ 图中/ 任意/ 两个/ 顶点/ 之间/ 可靠/ 期望/ 距离/ 的/ 算法/ ./ 算法/ 1/ ./ 近似/ 可靠/ 期望/ 距离/ 计算/ 算法/ ./ 输入/ :/ 不/ 确定/ 图/ G/ =/ (/ (/ V/ ,/ E/ )/ ,/ Σ/ ,/ L/ ,/ P/ )/ ,/ 初始/ 精度/ 参数/ 输出/ :/ 不/ 确定/ 图/ G/ 的/ 任意/ 两个/ 顶点/ u/ ,/ v/ 之间/ 的/ 近似/ 可/ 1/ ./ 按照/ G/ 的/ 蕴含/ 子图/ 被/ G/ 蕴含/ 的/ 概率/ 对/ Imp/ (/ G/ )/ 进行/ r/ / max6S/ =/ {/ G1/ ,/ G2/ ,/ …/ ,/ Gr/ }/ ,/ 其中/ 每个/ Gi/ 是/ 通过/ 对/ G/ 的/ 每/ 条边/ e/ 按照/ 其/ 存在/ 概率/ 值/ P/ (/ e/ )/ 进行/ 独立/ 随机/ 选取/ 得到/ 的/ ./ 2/ ./ 在/ S/ 中/ 每个/ 蕴含/ 子图/ Gi/ 上/ ,/ 使用/ Johnson/ 算法/ [/ 14/ ]/ 计算/ Gi/ 中/ 任意/ 两个/ 顶点/ 之间/ 的/ 最/ 短/ 路径/ 长度/ ./ 3/ ./ 对/ G/ 中/ 任意/ 顶点/ u/ 和/ v/ ,/ 令/ p/ (/ u/ ,/ v/ )/ 表示/ 样本空间/ S/ 中/ u/ 和/ v/ 连通/ 的/ 概率/ ./ 由此/ ,/ 计算/ u/ 和/ v/ 之间/ 的/ 近似/ 可靠/ 期望/ 距离/ 为/ dRE/ (/ u/ ,/ v/ )/ =/ 算法/ 1/ 第/ 1/ 步/ 采样/ 每个/ 蕴含/ 子图/ 的/ 时间/ 复杂性/ 为/ O/ (/ |/ E/ |/ )/ ,/ 故/ 第/ 1/ 步/ 的/ 时间/ 复杂性/ 为/ O/ (/ r/ |/ E/ |/ )/ ./ 第/ 2/ 步/ 使用/ Johnson/ 算法/ 计算/ 每个/ 采样/ 得到/ 的/ 蕴含/ 子图/ Gi/ 中/ 任意/ 两个/ 顶点/ 之间/ 的/ 最/ 短/ 路径/ 长度/ 的/ 时间/ 复杂度/ 为/ O/ (/ |/ V/ |/ 2log/ |/ E/ |/ +/ |/ V/ |/ |/ E/ |/ )/ ,/ 故/ 第/ 2/ 步/ 的/ 时间/ 复杂性/ 为/ O/ (/ r/ (/ |/ V/ |/ 2log/ |/ E/ |/ +/ |/ V/ |/ |/ E/ |/ )/ )/ ./ 第/ 3/ 步/ 计算/ G/ 中/ 任意/ 顶点/ u/ 和/ v/ 之间/ 的/ 近似/ 可靠/ 期望/ 距离/ 的/ 时间/ 复杂性/ 为/ O/ (/ r/ |/ V/ |/ 2/ )/ ./ 综上所述/ ,/ 算法/ 1/ 的/ 时间/ 复杂度/ 为/ O/ (/ r/ (/ |/ V/ |/ 2log/ |/ E/ |/ +/ |/ V/ |/ |/ E/ |/ )/ )/ ./ 4.2/ ./ 2/ 索引/ 构建/ 第/ 2/ 阶段/ σ/ -/ 近邻/ 关系/ 图/ 索引/ 包括/ Graph/ 表/ 和/ Index/ 表/ ./ 这/ 两个/ 表/ 的/ 建立/ 过程/ 如下/ :/ 对于/ G/ σ/ 0/ 中/ 任意/ 两个/ 顶点/ u/ 和/ v/ ,/ 若/ W/ σ/ 0/ (/ u/ ,/ v/ )/ / σ/ 0/ ,/ 则/ 向/ Graph/ 表中/ 插入/ 记录/ (/ u/ ,/ v/ ,/ W/ σ/ 0/ (/ u/ ,/ v/ )/ )/ ;/ Graph/ 表建/ 完后/ ,/ 将/ Graph/ 表/ 的/ 记录/ 按照/ 边/ 的/ 权值/ 从小到大/ 的/ 顺序/ 排序/ ,/ 然后/ 顺序/ 扫描/ 一遍/ Graph/ 表/ ,/ 对于/ 每个/ 距离/ d/ (/ d/ =/ 1/ ,/ 2/ ,/ …/ ,/ σ/ 0/ )/ ,/ 当/ 首次/ 遇到/ 权值/ 大于/ d/ 的/ 记录/ t/ 时/ ,/ 向/ Index/ 表中/ 插入/ 记录/ (/ d/ ,/ addr/ (/ t/ -/ 1/ )/ )/ ./ 其中/ 记录/ t/ -/ 1/ 是/ Graph/ 表中/ 记录/ t/ 的/ 前/ 一条/ 记录/ ,/ addr/ (/ t/ -/ 1/ )/ 是/ 记录/ t/ -/ 1/ 的/ 地址/ ./ Graph/ 表中/ 从/ 开始/ 到/ 记录/ t/ -/ 1/ 之间/ 的/ 所有/ 记录/ 构成/ 的/ 集合/ 就/ 表示/ Gd/ ./ 4.2/ ./ 3/ 索引/ 构造/ 算法/ 优化/ 引理/ 2/ 给出/ 采样/ 次数/ r/ / D2/ 样本空间/ 中/ ,/ di/ (/ 见式/ (/ 5/ )/ )/ 的/ 取值/ 范围/ 宽度/ ./ 引理/ 2/ 中/ D/ =/ n/ -/ 1/ ,/ 当/ n/ 较大/ 时/ ,/ r/ 将/ 非常/ 大/ ,/ 此时/ 索引/ 构建/ 效率/ 将/ 非常低/ ./ 通过/ 选取/ 合适/ 的/ D/ 来/ 降低/ r/ ,/ 可/ 提高/ 索引/ 构建/ 的/ 效率/ ./ 为此/ 我们/ 提出/ 如下/ 3/ 种/ 优化/ 策略/ :/ (/ 1/ )/ D/ 等于/ 近似/ 直径/ ./ Aingworth/ 等/ 人/ [/ 15/ ]/ 研究/ 了/ 近似计算/ 图/ 直径/ 的/ 算法/ Appro/ -/ Diameter/ ./ 令/ D/ 等于/ 近似/ 直径/ 会/ 减少/ 采样/ 次数/ ,/ 但/ Appro/ -/ Diameter/ 算法/ 时间/ 复杂度/ 高/ ,/ 因此/ 该/ 方法/ 不会/ 明显提高/ 索引/ 构建/ 的/ 效率/ ./ (/ 2/ )/ D/ 等于/ c/ σ/ ,/ 其中/ c/ (/ c/ / 1/ )/ 为/ 距离/ 约束/ σ/ 的/ 松弛/ 系数/ ./ 通过/ 实验/ 我们/ 得知/ :/ 在/ 多数/ 情况/ 下/ ,/ 当顶/ Page8/ 点/ u/ 和/ v/ 在/ 样本/ Gi/ 中/ 的/ 最/ 短/ 路径/ 长度/ di/ 超过/ c/ σ/ 时/ ,/ 把/ di/ 当作/ 无穷/ 处理/ 不会/ 影响/ 查询/ 结果/ ./ 因为/ 若/ dRE/ (/ u/ ,/ v/ )/ >/ σ/ ,/ 只有/ 当/ 将/ 超过/ c/ σ/ 部分/ 当作/ 无穷/ 处理/ 得到/ 的/ 近似/ 可靠/ 期望/ 距离/ 小于/ σ/ 时才/ 会/ 影响/ 查询/ ;/ 若/ dRE/ (/ u/ ,/ v/ )/ / σ/ ,/ 只有/ 当/ 将/ 超过/ c/ σ/ 的/ 部分/ 当作/ 无穷/ 处理/ 得到/ 的/ 近似/ 可靠/ 期望/ 距离/ 等于/ 无穷/ 时/ ,/ 才/ 会/ 影响/ 查询/ ./ 大量/ 实验/ 表明/ ,/ 上述/ 两种/ 情况/ 发生/ 的/ 概率/ 非常低/ ./ 根据上述/ 特性/ ,/ 在/ 蕴含/ 子图/ Gi/ 中/ ,/ 若/ u/ 和/ v/ 之间/ 的/ 最/ 短/ 路径/ 长度/ 大于/ c/ σ/ ,/ 则/ 认为/ u/ ,/ v/ 不/ 连通/ ,/ 否则/ 用/ di/ 表示/ u/ 和/ v/ 之间/ 的/ 最/ 短/ 路径/ 长度/ ,/ di/ 的/ 取值/ 范围/ 为/ [/ 0/ ,/ c/ σ/ ]/ ./ 于是/ 令/ D/ =/ c/ σ/ ,/ 便/ 有/ r/ / c2/ σ/ 2/ (/ 3/ )/ 在/ 具有/ 小/ 世界/ 性质/ 的/ 图/ 中/ ,/ D/ 近似/ 等于/ 6/ [/ 16/ ]/ ./ 若/ 不/ 确定/ 图/ G/ 的/ 每个/ 的/ 蕴含/ 子图/ 都/ 具有/ 小/ 世界/ 性质/ ,/ 那么/ 在/ 图/ G/ 上/ 利用/ 算法/ 1/ 计算/ 近似/ 期望/ 可/ 达/ 距离/ 时/ ,/ r/ 满足/ r/ / 18/ 在/ 具体/ 应用/ 中/ ,/ 可以/ 根据/ 实际/ 情况/ 选择/ 上述/ 优化/ 方法/ 中/ 的/ 一种/ 来/ 加速/ 计算/ ./ 4.2/ ./ 4/ 索引/ 维护/ 索引/ 构建/ 完成/ 后/ ,/ 若/ 用户/ 给出/ 新/ 的/ 精度/ 要求/ ε/ 和/ δ/ ,/ 索引/ 维护/ 算法/ 将/ 首先/ 计算/ 满足/ 该/ 精度/ 要求/ 所/ 需/ 采样/ 次数/ r/ ./ 设/ 构建/ 索引/ 时/ 算法/ 1/ 使用/ 的/ 采样/ 次数/ 为/ r/ ,/ 如果/ r/ / r/ ,/ 则/ 索引/ 仍然/ 有效/ ;/ 如果/ r/ </ r/ ,/ 则/ 说明/ 采样/ 次数/ 不足/ ,/ 不能/ 满足/ 精度/ 要求/ ε/ ,/ δ/ ,/ 此时/ 需要/ 更新/ 索引/ ./ 具体方法/ 如下/ :/ 对/ 不/ 确定/ 图/ G/ 的/ 任意/ 顶点/ u/ 和/ v/ ,/ 设/ 初始/ 样本空间/ 上/ 的/ 近似/ 期望/ 可/ 达/ 距离/ 为/ dER/ (/ u/ ,/ v/ )/ ,/ 连通/ 概率/ 为/ p/ (/ u/ ,/ v/ )/ ./ 按照/ G/ 的/ 蕴含/ 子图/ 被/ G/ 蕴含/ 的/ 概率/ 对/ Imp/ (/ G/ )/ 进行/ r/ -/ r/ 次/ 独立/ 采样/ 得到/ 补充/ 样本空间/ ./ 设/ 补充/ 样本空间/ 上/ 的/ 近似/ 期望/ 可/ 达/ 距离/ 为/ dER/ (/ u/ ,/ v/ )/ ,/ 连通/ 概率/ 为/ p/ (/ u/ ,/ v/ )/ ./ 因此/ ,/ 更新/ 后/ 的/ 近似/ 连通/ 概率/ 以及/ 近似/ 期望/ 可/ 达/ 距离/ 分别/ 为/ p/ ~/ (/ u/ ,/ v/ )/ =/ p/ (/ u/ ,/ v/ )/ ·/ r/ +/ p/ (/ u/ ,/ v/ )/ ·/ (/ r/ -/ r/ )/ 珟/ dER/ (/ u/ ,/ v/ )/ =/ r/ ·/ p/ (/ u/ ,/ v/ )/ ·/ dER/ (/ u/ ,/ v/ )/ +/ (/ r/ -/ r/ )/ ·/ p/ (/ u/ ,/ v/ )/ ·/ dER/ (/ u/ ,/ v/ )/ 最后/ ,/ 使用/ 索引/ 构建/ 算法/ 1/ 的/ 第/ 3/ 步来/ 更新/ 计算/ G/ 中/ 任意/ 两个/ 顶点/ u/ 和/ v/ 之间/ 的/ 可靠/ 期望/ 距离/ ,/ 接着/ 使用/ 4.2/ ./ 2/ 节/ 介绍/ 的/ 方法/ 更新/ Graph/ 表及/ Index/ 表/ ./ 4.3/ 查询处理/ 算法/ 给定/ 查询/ Q/ =/ 〈/ R/ ,/ σ/ ,/ k/ 〉/ ,/ 查询处理/ 算法/ 首先/ 从/ σ/ -/ 近邻/ 关系/ 图/ 索引/ 中/ 取出/ 与/ σ/ 对应/ 的/ σ/ -/ 近邻/ 关系/ 图/ G/ σ/ ./ 对于/ G/ σ/ ,/ 有/ 如下/ 定理/ ./ 定理/ 2/ ./ 给定/ 不/ 确定/ 图/ G/ =/ (/ (/ V/ ,/ E/ )/ ,/ Σ/ ,/ L/ ,/ P/ )/ 和/ G/ 的/ σ/ -/ 近邻/ 关系/ 图/ G/ σ/ ,/ G/ 中/ 任意/ 顶点/ 子集/ W/ 的/ 直径/ diam/ (/ W/ )/ 小于/ 等于/ σ/ 当且/ 仅/ 当/ W/ 在/ G/ σ/ 是/ 一个团/ ./ 证明/ ./ 首先/ 证明/ 充分性/ ./ 若/ W/ 在/ G/ σ/ 中是/ 一个团/ ,/ 则/ W/ 中/ 任意/ 两个/ 顶点/ 之间/ 的/ 可靠/ 期望/ 距离/ 都/ 小于/ 等于/ σ/ ,/ 于是/ diam/ (/ W/ )/ / σ/ ./ 然后/ ,/ 证明/ 必要性/ ./ 若/ diam/ (/ W/ )/ / σ/ ,/ 则/ W/ 中/ 任意/ 两个/ 顶点/ 之间/ 的/ 可靠/ 期望/ 距离/ 都/ 不/ 超过/ σ/ ,/ 于是/ 在/ G/ σ/ 中/ ,/ W/ 中/ 任意/ 两个/ 顶点/ 之间/ 都/ 存在/ 一条/ 边/ ,/ 即/ W/ 在/ G/ σ/ 中是/ 一个团/ ./ 根据/ 定理/ 2/ 易得/ ,/ 在/ 不/ 确定/ 图/ G/ 上/ 执行/ top/ -/ k/ 近邻/ 查询/ Q/ =/ 〈/ R/ ,/ σ/ ,/ k/ 〉/ 等价/ 于/ 在/ G/ σ/ 上/ 计算/ 顶点/ 标签集/ 能够/ 覆盖/ R/ 的/ 直径/ 最小/ 的/ 前/ k/ 个团/ ./ 为/ 解决/ 后/ 一/ 问题/ ,/ 本文/ 首先/ 对/ G/ σ/ 进行/ 预处理/ ,/ 以/ 缩小/ G/ σ/ 的/ 规模/ ,/ 提高/ 计算/ 效率/ ;/ 然后/ ,/ 在/ 预处理/ 后/ 的/ G/ σ/ 上/ 进行/ 树/ 搜索/ ,/ 从而/ 计算/ 得到/ G/ σ/ 上/ 顶点/ 标签集/ 能够/ 覆盖/ R/ 的/ 直径/ 最小/ 的/ 前/ k/ 个团/ ./ 第/ 4.3/ ./ 1/ 节/ 提出/ 预处理/ 方法/ ;/ 第/ 4.3/ ./ 2/ 节/ 给出/ 树/ 搜索算法/ ./ 4.3/ ./ 1/ 预处理/ 算法/ 定义/ 5/ (/ σ/ -/ 可/ 达/ 标签集/ )/ ./ 设/ v/ 是/ 不/ 确定/ 图/ G/ 的/ σ/ -/ 近邻/ 关系/ 图/ G/ σ/ =/ (/ (/ V/ σ/ ,/ E/ σ/ )/ ,/ Σ/ σ/ ,/ L/ σ/ ,/ W/ σ/ )/ 中/ 的/ 顶点/ ,/ v/ 的/ σ/ -/ 可/ 达/ 标签集/ 为/ reachable/ (/ v/ )/ =/ L/ (/ v/ )/ ∪/ (/ ∪/ (/ v/ ,/ u/ )/ ∈/ E/ σ/ 设/ 不/ 确定/ 图/ G/ 的/ 顶点/ 子集/ W/ 是/ 查询/ Q/ 的/ 一个/ 匹配/ 顶点/ 子集/ ,/ W/ 中/ 的/ 顶点/ 满足/ 下面/ 定理/ 3/ 给出/ 的/ 性质/ ./ 定理/ 3/ ./ 设/ 不/ 确定/ 图/ G/ 的/ 顶点/ 子集/ W/ 是/ 查询/ Q/ 的/ 一个/ 匹配/ 顶点/ 子集/ ,/ 对/ 任意/ v/ ∈/ W/ ,/ 有/ R/ / reachable/ (/ v/ )/ 且/ L/ (/ v/ )/ ∩/ R/ ≠/ / ./ 证明/ ./ 由/ 定理/ 2/ ,/ W/ 在/ G/ σ/ 中是/ 一个团/ ,/ 于是/ 对/ 任意/ v/ ∈/ W/ ,/ 有/ reachable/ (/ v/ )/ =/ ∪/ v/ ∈/ WL/ (/ v/ )/ ./ 再/ 由/ 匹配/ 顶点/ 子集/ 的/ 标签/ 覆盖性/ ,/ 有/ R/ / ∪/ v/ ∈/ WL/ (/ v/ )/ =/ reachable/ (/ v/ )/ ./ 由/ W/ 的/ 极小/ 性/ 可知/ ,/ 对/ 任意/ v/ ∈/ W/ ,/ 有/ L/ (/ v/ )/ ∩/ R/ ≠/ / ./ 由/ 定理/ 3/ ,/ 可/ 直接/ 得到/ 如下/ 预处理/ 规则/ :/ 若/ σ/ -/ 近邻/ 关系/ 图/ G/ σ/ 中/ 的/ 顶点/ v/ 满足/ L/ (/ v/ )/ ∩/ R/ =/ / 或/ R/ / reachable/ (/ v/ )/ ,/ 则/ v/ 一定/ 不会/ 出现/ 在/ 任何/ 查询/ 结果/ 中/ ,/ 可/ 将/ v/ 从/ G/ σ/ 删除/ ./ 基于/ 上述/ 预处理/ 规则/ ,/ 本文/ 提出/ 一种/ 两/ 阶段/ 预处理/ 算法/ ./ 第/ 1/ 阶段/ ./ 将/ G/ σ/ 中/ 满足/ 性质/ L/ (/ v/ )/ ∩/ R/ =/ / 的/ Page9/ 顶点/ 全部/ 删除/ ,/ 同时/ 删除/ 与/ 这些/ 顶点/ 相连/ 的/ 边/ ;/ 第/ 2/ 阶段/ ./ 计算/ G/ σ/ 中/ 剩余/ 顶点/ 的/ σ/ -/ 可/ 达/ 标签集/ ,/ 将/ 满足/ 性质/ R/ / reachable/ (/ v/ )/ 的/ 顶点/ 全部/ 删除/ ,/ 同时/ 删除/ 与/ 这些/ 顶点/ 相连/ 的/ 边/ ;/ 然后/ 更新/ 被/ 删除/ 顶点/ 相邻/ 顶点/ 的/ σ/ -/ 可/ 达/ 标签集/ ./ 接下来/ 继续/ 迭代/ 执行/ 上述/ 过程/ ,/ 直至/ 将/ 不/ 可能/ 出现/ 在/ 任何/ 查询/ 结果/ 中/ 的/ 顶点/ 及其/ 相连/ 的/ 边/ 全部/ 删除/ ./ 算法/ 2/ ./ 两/ 阶段/ 预处理/ 算法/ ./ 输入/ :/ σ/ -/ 邻近/ 关系/ 图/ G/ σ/ ,/ 查询/ Q/ =/ 〈/ R/ ,/ σ/ ,/ k/ 〉/ 输出/ :/ 过滤/ 掉/ G/ σ/ 中/ 不/ 可能/ 出现/ 在/ 结果/ 集中/ 顶点/ 及其/ 相/ 1/ ./ 初始化/ 待/ 判定/ 队列/ K/ 为/ G/ σ/ 的/ 顶点/ 集/ V/ σ/ 2/ ./ ForK/ 中/ 的/ 每个/ 顶点/ v3/ ./ IfL/ (/ v/ )/ ∩/ R/ =/ / 4/ ./ 从/ K/ 中/ 删除/ 顶点/ v/ ,/ 同时/ 从/ G/ σ/ 删除/ v/ 及其/ 相连/ 5/ ./ WhileK/ 不为/ 空/ 6/ ./ ForK/ 中/ 每个/ 顶点/ v7/ ./ 计算/ v/ 的/ σ/ -/ 可/ 达/ 标签集/ reachable/ (/ v/ )/ ;/ 8/ ./ IfR/ / reachable/ (/ v/ )/ 9/ ./ 将/ v/ 添加/ 到/ 过滤/ 顶点/ 队列/ K10/ ./ 将/ v/ 从/ K/ 中/ 移除/ 11/ ./ ForK/ 中/ 每个/ 顶点/ v12/ ./ 从/ G/ σ/ 中/ 删除/ 顶点/ v/ 以及/ 相连/ 的/ 边/ 13/ ./ 将/ 与/ v/ 相邻/ 的/ 顶点/ 添加/ 到/ K14/ ./ ReturnG/ σ/ 算法/ 2/ 给出/ 了/ 两/ 阶段/ 预处理/ 算法/ 的/ 伪/ 代码/ 描述/ ./ 第/ 1/ 行将/ 待/ 判定/ 队列/ K/ 初始化/ 为/ G/ σ/ 的/ 顶点/ 集/ V/ σ/ ;/ 第/ 2/ ~/ 4/ 行/ 执行/ 第/ 1/ 阶段/ 过滤/ ./ 将/ 不/ 包含/ 任何/ 查询/ 标签/ 的/ 顶点/ 及其/ 相连/ 边/ 删除/ ;/ 第/ 5/ ~/ 13/ 行/ 执行/ 第/ 2/ 阶段/ 过滤/ ;/ 最后/ ,/ 第/ 14/ 行/ 返回/ 预处理/ 后/ 的/ G/ σ/ ./ 实验/ 表明/ ,/ 该/ 预处理/ 算法/ 可以/ 有效/ 降低/ 查询处理/ 算法/ 的/ 时间/ 复杂性/ ./ 4.3/ ./ 2/ 带/ 剪枝/ 的/ 树/ 搜索算法/ 根据/ 定理/ 2/ ,/ 我们/ 将/ 不/ 确定/ 图/ G/ 上/ 执行/ top/ -/ k/ 近邻/ 查询/ Q/ =/ 〈/ R/ ,/ σ/ ,/ k/ 〉/ 的/ 问题/ 等价/ 地/ 转化/ 为/ 在/ 预处理/ 后/ 的/ G/ σ/ 上/ 计算/ 顶点/ 标签集/ 能够/ 覆盖/ R/ 的/ 直径/ 最小/ 的/ 前/ k/ 个团/ 的/ 问题/ ./ 为/ 解决/ 该/ 问题/ ,/ 本文/ 提出/ 了/ 一种/ 树/ 搜索算法/ ./ 给定/ G/ 的/ σ/ -/ 近邻/ 关系/ 图/ G/ σ/ =/ (/ (/ V/ σ/ ,/ E/ σ/ )/ ,/ Σ/ σ/ ,/ L/ σ/ ,/ W/ σ/ )/ ,/ 用/ / 表示/ V/ σ/ 上/ 一种/ 全序/ 关系/ ,/ 如/ 顶点/ 标号/ 的/ 大小/ 关系/ ./ G/ σ/ 中/ 所有/ 团/ 可以/ 被/ 组织/ 到/ 一棵/ 搜索/ 树中/ ,/ 该树/ 具有/ 如下/ 性质/ :/ (/ 1/ )/ 树/ 的/ 每个/ 节点/ 唯一/ 表示/ G/ σ/ 中/ 一个团/ ;/ (/ 2/ )/ 树/ 的/ 根/ 节点/ 表示/ 平凡/ 团/ ,/ 即/ 空集/ ;/ C/ ,/ 满足/ (/ 3/ )/ 树/ 的/ 非叶/ 节点/ C/ 的/ 儿子/ 节点/ 表示/ 另/ 一个团/ ①/ C/ / C/ ;/ ②/ |/ C/ |/ =/ |/ C/ |/ +/ 1/ ;/ ③/ 顶点/ v/ ∈/ C/ \/ C/ 与/ C/ 中/ 任一/ 顶点/ u/ 都/ 满足/ u/ / v/ ./ 通过/ 设置/ 合理/ 的/ 顶点/ 之间/ 的/ 全序/ 关系/ / ,/ 可/ 进一步/ 降低/ 搜索/ 空间/ ./ 本文/ 采用/ RarestFirst/ [/ 10/ ]/ 思想/ ,/ 先/ 找出/ G/ σ/ 中/ 出现/ 次数/ 最少/ 的/ 标签/ LRarest/ ,/ 然后/ 令/ G/ σ/ 中/ 包含/ 标签/ LRarest/ 的/ 顶点/ u/ 与/ 任意/ 不/ 包含/ 标签/ LRarest/ 的/ 顶点/ v/ 满足/ 关系/ u/ / v/ ./ 按照/ RarestFirst/ 原则/ 建立/ 全序/ 关系/ 后/ ,/ 开始/ 建立/ 搜索/ 树/ ,/ 具体/ 算法/ 过程/ 如下/ :/ 首先/ 将/ 当前/ 搜索/ 节点/ S/ 置/ 为/ 搜索/ 树/ 的/ 根/ 节点/ ./ 计算/ S/ 的/ 候选/ 扩展/ 顶点/ 集合/ cand/ (/ S/ )/ ./ cand/ (/ S/ )/ 满足/ 对/ 任意/ 顶点/ v/ ∈/ cand/ (/ S/ )/ ,/ 有/ (/ 1/ )/ 对/ 任意/ u/ ∈/ S/ ,/ 有/ u/ / v/ ;/ (/ 2/ )/ v/ 与/ S/ 中/ 所有/ 顶点/ 都/ 相邻/ ;/ (/ 3/ )/ L/ (/ v/ )/ ∩/ (/ L/ (/ S/ )/ \/ R/ )/ ≠/ / ,/ 其中/ L/ (/ S/ )/ 表示/ S/ 中/ 所有/ 顶点/ 上/ 的/ 标签集/ 的/ 并/ 集/ ./ 特别/ 的/ 是/ ,/ 当/ S/ =/ / 时/ ,/ cand/ (/ S/ )/ 为/ 包含/ 标签/ LRarest/ 的/ 顶点/ 集/ ./ 然后/ ,/ 为/ 每个/ 顶点/ v/ ∈/ cand/ (/ S/ )/ ,/ 建立/ 新/ 节点/ v/ ∪/ S/ ,/ 易知/ 每个/ 新/ 节点/ 都/ 是/ S/ 的/ 儿子/ 节点/ ./ 接下来/ ,/ 依次/ 将/ 每个/ 新/ 构造/ 的/ 节点/ 作为/ 当前/ 搜索/ 节点/ S/ ,/ 迭代/ 执行/ 上述/ 扩展/ 操作/ ,/ 直到/ 待/ 扩展/ 节点/ 的/ 候选/ 扩展/ 顶点/ 集为/ 空/ 或者/ 当前/ 节点/ 满足/ 查询/ 要求/ 时/ ,/ 结束/ 扩展/ ./ 算法/ 3/ 给出/ 了/ 带/ 标签/ 覆盖/ 的/ 团/ 搜索算法/ 的/ 伪/ 代码/ 描述/ ,/ 其子/ 过程/ TSC/ 描述/ 了/ 建立/ 搜索/ 树/ 的/ 过程/ ./ 算法/ 3/ ./ 带/ 标签/ 覆盖/ 的/ 团/ 查询/ 算法/ ./ 输入/ :/ σ/ -/ 近邻/ 关系/ 图/ G/ σ/ ,/ 标签集/ R/ ,/ 整数/ k/ 输出/ :/ 直径/ 最小/ 的/ 前/ k/ 个/ 标签/ 覆盖/ R/ 的/ 团/ 1/ ./ 初始化/ 结果/ 集/ F/ 为/ 空集/ 2/ ./ F/ =/ TSC/ (/ / )/ 3/ ./ RuturnF/ 中/ 直径/ 最小/ 的/ 前/ k/ 个/ 顶点/ 集/ ./ // // 建立/ 搜索/ 树/ 的/ 子/ 过程/ TSC/ (/ vectorS/ )/ 描述/ 如下/ // // 输入/ :/ 团/ S/ // // 输出/ :/ 标签集/ 包含/ R/ 的/ 团/ 4/ ./ IfS/ 的/ 标签/ 集合/ 包含/ R5/ ./ ReturnS6/ ./ Else7/ ./ 计算/ S/ 的/ 扩展/ 候选/ 集合/ cand/ (/ S/ )/ 8/ ./ Ifcand/ (/ S/ )/ 不为/ 空/ 9/ ./ Forcand/ (/ S/ )/ 中/ 的/ 每个/ 顶点/ v10/ ./ TSC/ (/ v/ ∪/ S/ )/ 在/ 搜索/ 树/ 的/ 基础/ 上/ 运用/ 分支/ 界限/ 方法/ 计算/ 直径/ 最小/ 的/ 前/ k/ 个团/ 可以/ 尽早/ 剪枝/ ./ 使用/ 一个/ 尺寸/ 为/ k/ 的/ 最大/ 堆/ Htop/ -/ k/ 来/ 存储/ 当前/ 搜索/ 结果/ 中/ 直径/ 最小/ 的/ Page10/ 前/ k/ 个团/ ,/ 其中/ 堆/ 的/ 根/ 节点/ 表示/ Htop/ -/ k/ 中/ 半径/ 最大/ 的/ 团/ S/ ,/ S/ 在/ G/ 中/ 的/ 直径/ 为/ diam/ (/ S/ )/ ./ 当树/ 搜索算法/ 建立/ 新/ 节点/ S/ 时/ ,/ 比较/ diam/ (/ S/ )/ 与/ diam/ (/ S/ )/ 大小/ ./ 若/ 前者/ 大/ ,/ 停止/ 继续/ 扩展/ 该/ 节点/ ,/ 即/ 剪枝/ ;/ 否则/ ,/ 验证/ S/ 的/ 标签/ 集合/ 能否/ 覆盖/ R/ ,/ 若能/ ,/ 则/ 用/ S/ 替换/ 掉/ Htop/ -/ k/ 中/ 的/ 根/ 节点/ 数据/ ,/ 并/ 重新/ 维护/ 最大/ 堆/ Htop/ -/ k/ ;/ 否则/ ,/ 继续/ 扩展/ 该/ 节点/ ./ 算法/ 结束/ 时/ ,/ Htop/ -/ k/ 中/ 存储/ 的/ k/ 个团/ 即/ 为/ 半径/ 最小/ 的/ k/ 个/ 标签/ 覆盖/ R/ 的/ 团/ ./ 最后/ ,/ 将/ Htop/ -/ k/ 中/ k/ 个团/ 全部/ 输出/ ./ 至此/ ,/ 完成/ 了/ 不/ 确定/ 图上/ 的/ top/ -/ k/ 近邻/ 查询/ ./ 5/ 实验/ 结果/ 5.1/ 实验/ 配置/ 我们/ 进行/ 了/ 大量/ 实验/ 来/ 验证/ 本文/ 提出/ 的/ 索引/ 构建/ 算法/ 的/ 执行/ 效率/ 及其/ 可扩展性/ 以及/ 查询处理/ 算法/ 的/ 性能/ ./ 由于/ 目前/ 尚/ 没有/ 处理/ 不/ 确定/ 图上/ 的/ top/ -/ k/ 近邻/ 查询/ 的/ 算法/ ,/ 因此/ 我们/ 主要/ 考察/ 本文/ 提出/ 的/ 方法/ 在/ 不同/ 规模/ 的/ 数据/ 集上/ 以及/ 不同/ 参数/ 条件/ 下/ 的/ 效率/ ./ 实验/ 中/ 使用/ 的/ 数据/ 取自/ BioGRID/ 数据库/ [/ 17/ ]/ 以及/ 通过/ 修改/ 真实/ 图/ 数据/ 得到/ 的/ 合成/ 不/ 确定/ 图/ 数据/ ./ 表/ 1/ 给出/ 了/ 实验/ 中/ 使用/ 到/ 的/ 不/ 确定/ 图/ 数据/ 的/ 特性/ ./ 其中/ Rat/ 、/ ThaleCress/ 、/ Worm/ 和/ Human/ 是/ 取自/ BioGRID/ 数据库/ 的/ 真实/ 数据/ ;/ G1/ ,/ G2/ ,/ G3/ ,/ G4/ 为/ 合成/ 数据/ ,/ 它们/ 是从/ Human/ 中/ 随机/ 抽取/ 不同/ 数量/ 的/ 顶点/ 得到/ 的/ 子/ 图/ ./ 实验/ 运行/ 环境/ 为/ 具有/ IntelPentium43/ ./ 2GHzCPU/ 、/ 512MB/ 内存/ 、/ 运行/ Ubuntu10/ ./ 04/ 的/ PC机/ ./ 算法/ 采用/ C++/ 语言/ 编写/ ,/ 并/ 使用/ BoostGraphLibrary1/ ./ 44.0/ ./ 不/ 确定/ 图/ 名称/ RatThaleCressWormHumanG1G2G3G4/ 实验/ 中/ 使用/ 4.3/ ./ 2/ 节/ 提到/ 的/ 第/ 2/ 种/ 索引/ 构建/ 优化/ 策略/ ,/ 采样/ 次数/ r/ 满足/ r/ =/ max6/ 其中/ 距离/ 约束/ σ/ / 4/ ,/ 并/ 以/ 小/ 世界/ 理论/ 为/ 参考/ ,/ 设置/ 距离/ 约束/ 的/ 松弛/ 系数/ c/ ∈/ [/ 1.5/ ,/ 6/ ]/ ./ 5.2/ 索引/ 构建/ 算法/ 性能/ 分析/ 我们/ 首先/ 考察/ 算法/ 1/ 中/ 采样/ 次数/ r/ 对/ 索引/ 构建/ 时间/ 的/ 影响/ ./ 图/ 4/ 给出/ 在/ Rat/ 、/ ThaleCress/ 和/ Worm3/ 个/ 不/ 确定/ 图上/ ,/ 当/ 采样/ 次数/ 从/ 1/ 增加/ 到/ 150/ 时/ ,/ 索引/ 构建/ 时间/ 的/ 变化/ 情况/ ,/ 其中/ σ/ =/ 3/ ,/ c/ =/ 2/ ./ 从图/ 4/ 可以/ 看出/ ,/ 索引/ 构建/ 时间/ 随/ 采样/ 次数/ 的/ 增加/ 线性/ 增长/ ,/ 并且/ 在/ 采样/ 次数/ 相同/ 的/ 情况/ 下/ ,/ 索引/ 构建/ 时间/ 随/ 不/ 确定/ 图/ 尺寸/ 的/ 增大/ 而/ 增加/ ./ 用户/ 给定/ 精度/ 要求/ 参数/ ε/ 和/ δ/ ,/ 设/ 顶点/ u/ 和/ v/ 之间/ 精确/ 可靠/ 期望/ 距离/ 为/ dRE/ (/ u/ ,/ v/ )/ ,/ 近似/ 可靠/ 期望/ 距离/ 为/ dRE/ (/ u/ ,/ v/ )/ ,/ 定义/ 指示/ 函数/ I/ (/ u/ ,/ v/ )/ :/ I/ (/ u/ ,/ v/ )/ =/ 1/ ,/ 若/ |/ dRE/ (/ u/ ,/ v/ )/ -/ dRE/ (/ u/ ,/ v/ )/ |/ / ε/ 由此/ 我们/ 定义/ 近似/ 距离/ 相对/ 于/ 精确/ 距离/ 的/ 精确度/ Precision/ =/ 2/ 图/ 5/ 给出/ 在/ Rat/ 、/ ThaleCress/ 和/ Worm3/ 个/ 不/ 确定/ 图上/ ,/ 当/ 1/ -/ δ/ 从/ 0.1/ 增加/ 到/ 0.9/ 时/ ,/ 近似/ 可靠/ 期望/ 距离/ 的/ 精确度/ 变化/ 情况/ ,/ 其中/ σ/ =/ 3/ ,/ c/ =/ 2/ ,/ ε/ =/ 0.5/ ./ 横坐标/ 表示/ 由/ ε/ ,/ δ/ ,/ σ/ 确定/ 的/ 采样/ 次数/ ,/ δ/ 从/ 0.9/ 减小/ 到/ 0.1/ ./ 从图/ 5/ 可以/ 看出/ ,/ 在/ Rat/ 、/ ThaleCress/ 和/ Worm3/ 个/ 不/ 确定/ 图上/ 计算/ 得到/ 的/ 近似/ 可靠/ 期望/ 距离/ 的/ 精确度/ 均/ 高于/ 1/ -/ δ/ ,/ 并且/ 随着/ 1/ -/ δ/ 的/ 增加/ ,/ 近似/ 可靠/ 期望/ 距离/ 的/ 精确度/ 达到/ 较/ 高水平/ 后/ 保持稳定/ ./ 5.3/ 查询处理/ 算法/ 性能/ 分析/ 本/ 节/ 考察/ 近邻/ 查询/ Q/ =/ 〈/ R/ ,/ σ/ ,/ k/ 〉/ 中/ 的/ R/ ,/ σ/ 和/ kPage11/ 对/ 本文/ 提出/ 的/ 算法/ 性能/ 的/ 影响/ ,/ 此外/ 还/ 考察/ 不/ 确定/ 图/ 的/ 规模/ 对/ 算法/ 性能/ 的/ 影响/ ./ 首先/ ,/ 考察/ 查询/ 标签集/ R/ 的/ 尺寸/ 以及/ 距离/ 约束/ σ/ 对/ 查询处理/ 时间/ 的/ 影响/ ./ 图/ 6/ 给出/ 在/ 不/ 确定/ 图/ Worm/ 上/ ,/ 当/ 距离/ 约束/ 从/ 1/ 增加/ 到/ 4/ 时/ ,/ 不同/ 尺寸/ 标签集/ 的/ 查询处理/ 时间/ 变化/ ./ 其中/ Query/ _/ R3/ ,/ Query/ _/ R5/ ,/ Query/ _/ R7/ ,/ Query/ _/ R9/ 分别/ 对应/ 查询/ 标签集/ 尺寸/ 等于/ 3/ ,/ 5/ ,/ 7/ ,/ 9/ 的/ 查询/ ,/ 查询处理/ 时间/ 是/ 随机/ 生成/ 的/ 尺寸/ 相同/ 的/ 20/ 组/ 查询/ 的/ 平均/ 查询处理/ 时间/ ,/ 并且/ k/ =/ 20/ ./ 从图/ 6/ 可以/ 看出/ ,/ 当/ 查询/ 标签集/ 的/ 尺寸/ 相同/ 时/ ,/ 随着/ 距离/ 约束/ σ/ 的/ 增加/ ,/ 查询处理/ 时间/ 呈/ 指数/ 增长/ ;/ 当/ 距离/ 约束/ σ/ 相同/ 时/ ,/ 查询处理/ 时间/ 随/ 查询/ 标签集/ 尺寸/ 的/ 增大/ 而/ 增加/ ./ 其次/ ,/ 考察/ 结果/ 数量/ k/ 以及/ 图/ 数据/ 的/ 规模/ 对/ 查询处理/ 时间/ 的/ 影响/ ./ 图/ 7/ 给出/ 在/ 合成/ 不/ 确定/ 图/ G1/ ,/ G2/ ,/ G3/ ,/ G4/ 上/ ,/ 当/ 整数/ k/ 从/ 20/ 增加/ 到/ 100/ 时/ ,/ 查询处理/ 时间/ 的/ 变化/ ./ 其中/ |/ R/ |/ =/ 5/ ,/ σ/ =/ 2/ ,/ 查询处理/ 时间/ 是/ 随机/ 生成/ 的/ 20/ 组/ 查询/ 的/ 平均/ 处理/ 时间/ ./ 从图/ 7/ 中/ 不难看出/ ,/ 在/ 同一个/ 图上/ 进行/ 查询/ 时/ ,/ k/ 的/ 大小/ 对/ 查询处理/ 时间/ 的/ 影响/ 很小/ ;/ 并且/ 在/ k/ 相同/ 的/ 情况/ 下/ ,/ 随着/ 不/ 确定/ 图/ 规模/ 的/ 扩大/ ,/ 查询处理/ 时间/ 呈/ 指数/ 增长/ ./ 图/ 7/ 不同/ 的/ 整数/ k/ 以及/ 不同/ 规模/ 图/ 数据/ 的/ 查询处理/ 时间/ 6/ 结论/ 本文/ 研究/ 了/ 不/ 确定/ 图上/ 的/ top/ -/ k/ 近邻/ 查询/ 问题/ ,/ 首次/ 形式化/ 定义/ 了/ 不/ 确定/ 图/ top/ -/ k/ 近邻/ 查询/ 问题/ ,/ 设计/ 了/ 有效/ 支持/ 该/ 查询处理/ 的/ σ/ -/ 近邻/ 关系/ 图/ 索引/ 结构/ ,/ 提出/ 了/ 基于/ MonteCarlo/ 随机/ 算法/ 的/ 不/ 确定/ 图/ 顶点/ 间/ 可靠/ 期望/ 距离/ 计算/ 算法/ ,/ 并/ 提出/ 了/ 基于/ 此/ 算法/ 的/ σ/ -/ 近邻/ 关系/ 图/ 索引/ 构建/ 算法/ ./ 在/ σ/ -/ 近邻/ 关系/ 图/ 索引/ 的/ 基础/ 上/ ,/ 将/ 不/ 确定/ 图/ top/ -/ k/ 邻近/ 查询/ 问题/ 转化/ 为/ 计算/ σ/ -/ 近邻/ 关系/ 图上/ 带/ 标签/ 覆盖/ 的/ top/ -/ k/ 团/ 问题/ ./ 本文/ 提出/ 了/ 一种/ 两/ 阶段/ 预处理/ 算法/ 来/ 有效/ 减小/ σ/ -/ 近邻/ 关系/ 图/ 的/ 规模/ ,/ 还/ 提出/ 了/ 基于/ 分支/ 界限/ 法/ 的/ 树/ 搜索算法/ 来/ 快速/ 计算/ σ/ -/ 近邻/ 关系/ 图上/ 带/ 标签/ 覆盖/ 的/ top/ -/ k/ 团/ ./ 本文/ 进行/ 了/ 大量/ 实验/ 来/ 考察/ 索引/ 构建/ 算法/ 和/ 查询处理/ 算法/ 的/ 性能/ ./ 实验/ 结果表明/ 本文/ 提出/ 的/ 算法/ 能/ 有效/ 处理/ 不/ 确定/ 图/ top/ -/ k/ 近邻/ 查询/ ./ 

