Page1PN4TS/ :/ 一种/ 基于/ CPN/ 模型/ 的/ IOCO/ 测试/ 选择/ 方法/ 刘靖/ 1/ )/ 李茹/ 1/ )/ 叶新铭/ 1/ )/ 李军/ 2/ )/ 1/ )/ (/ 内蒙古大学/ 计算机/ 学院/ 呼和浩特/ 010021/ )/ 2/ )/ (/ 中国科学院计算技术研究所/ 北京/ 100190/ )/ 摘要/ 文中/ 将/ IOCO/ (/ Input/ -/ OutputConformance/ )/ 一致性/ 测试/ 理论/ 与/ 着色/ Petri/ 网/ (/ ColoredPetriNets/ ,/ CPN/ )/ 进行/ 优势/ 融合/ ,/ 提出/ 一种/ 使用/ CPN/ 描述/ 测试/ 目的/ 模型/ 并/ 驱动/ IOCO/ 一致性/ 测试/ 选择/ 的/ 新/ 方法/ ,/ 称为/ PN4TS/ 方法/ ./ PN4TS/ 方法/ 首先/ 定义/ 了/ 面向/ 一致性/ 测试/ 的/ CPN/ 模型/ (/ ConformanceTestingorientedCPN/ ,/ CT/ -/ CPN/ )/ ,/ 描述/ 软件系统/ 的/ 功能/ 行为/ ;/ 定义/ 了/ 基于/ CT/ -/ CPN/ 描述/ 的/ PN/ -/ IOCO/ 一致性/ 关系/ ;/ 之后/ ,/ 构建/ CT/ -/ CPN/ 描述/ 的/ 测试/ 目的/ 模型/ ,/ 并/ 将/ 该/ 模型/ 与/ 描述/ 软件/ 功能/ 行为/ 的/ CT/ -/ CPN/ 模型/ 执行/ 同步/ 模拟/ ,/ 提出/ 了/ 一种/ 测试/ 目的/ 模型/ 驱动/ 的/ IOCO/ 一致性/ 测试/ 选择/ 方法/ ,/ 并/ 证明/ 了/ 所/ 生成/ 测试/ 例/ 的/ 可靠性/ 及其/ 对/ 测试/ 目的/ 的/ 覆盖/ 完备/ 性/ ./ PN4TS/ 方法/ 以/ 实际/ 测试数据/ 驱动/ 测试/ 例/ 的/ 生成/ 过程/ ,/ 有效/ 保证/ 了/ 经/ 测试/ 目的/ 选择/ 所/ 生成/ 的/ 测试/ 例是/ 切实/ 可/ 执行/ 的/ ./ 文中/ 使用/ 简单/ 文件传输/ 协议/ 例示/ 了/ PN4TS/ 方法/ 的/ 应用/ 过程/ ,/ 之后/ 结合/ 数字/ 内容/ 点对点/ 网络/ 分发/ 软件系统/ 的/ 实际/ 测试/ 生成/ 和/ 测试/ 执行/ 实践/ ,/ 证实/ 了/ PN4TS/ 方法/ 应用/ 于/ 较/ 大规模/ 软件系统/ 的/ 一致性/ 测试/ 应用/ 时/ 具有/ 更好/ 的/ 可用性/ 和/ 可靠性/ ./ 关键词/ 测试/ 选择/ ;/ 测试/ 目的/ ;/ IOCO/ 一致性/ ;/ 着色/ Petri/ 网/ ;/ 同步/ 模拟/ 执行/ 1/ 引言/ 软件/ 一致性/ 测试/ (/ ConformanceTesting/ )/ [/ 1/ ]/ 用以/ 确认/ 被测/ 软件/ 实现/ (/ Implementation/ )/ 是否/ 符合/ 软件/ 功能/ 说明/ (/ Specification/ )/ 的/ 要求/ ,/ 发现/ 被测/ 软件/ 实现/ 中/ 存在/ 的/ 与/ 软件/ 功能/ 说明/ 不/ 一致/ 的/ 错误/ 或/ 缺陷/ ,/ 提高/ 软件系统/ 的/ 研发/ 质量/ ./ 其中/ ,/ 测试/ 生成/ 与/ 选择/ 、/ 测试/ 执行/ 与/ 一致性/ 结果/ 判定/ 是/ 一致性/ 测试/ 的/ 两个/ 基本/ 过程/ ./ 已有/ 相关/ 研究/ 与/ 实践/ 更/ 多/ 偏重于/ 提高/ 一致性/ 测试/ 执行/ 的/ 自动化/ 程度/ 和/ 可靠性/ ,/ 如/ TTCN/ -/ 3/ 等/ 测试方法/ 及/ 软件/ 的/ 广泛应用/ ,/ 但/ 测试/ 例在/ 很大/ 程度/ 上/ 仍/ 依靠/ 手工/ 生成/ ,/ 很难/ 保证/ 一致性/ 测试/ 过程/ 的/ 完备/ 、/ 规范/ 和/ 可靠/ [/ 2/ -/ 3/ ]/ ./ 近年来/ ,/ 软件测试/ 的/ 相关/ 研究/ 中/ ,/ 基于/ 模型/ 的/ 一致性/ 测试方法/ (/ ModelBasedConformanceTesting/ ,/ MBCT/ )/ 以/ 有效/ 融合/ 形式化/ 方法/ 与/ 传统/ 测试/ 技术/ 而/ 引起/ 学术界/ 和/ 业界/ 的/ 重点/ 关注/ 与/ 推进/ [/ 4/ -/ 6/ ]/ ,/ 其/ 优势/ 在于/ 以/ 准确/ 描述/ 软件/ 行为/ 的/ 形式化/ 或/ 半/ 形式化/ 模型/ 为/ 基础/ ,/ 自动/ 生成/ 大量/ 可靠/ 的/ 测试/ 例/ ,/ 改善/ 测试/ 例/ 手工/ 生成/ 方式/ 的/ 缺陷/ 与/ 低效/ ,/ 能够/ 与/ 自动化/ 程度较高/ 的/ 测试/ 执行/ 过程/ 形成/ 良好/ 衔接/ ,/ 进一步/ 增强/ 软件系统/ 错误/ 的/ 检测/ 能力/ ./ 基于/ IOCO/ (/ Input/ -/ OutputConformance/ )/ 一致性/ 关系/ 的/ 测试方法/ [/ 3/ ]/ 是/ 目前/ MBCT/ 的/ 主流/ 方法/ 之一/ ,/ 具备/ 坚实/ 的/ 理论/ 基础/ [/ 7/ ]/ 和/ 成功实践/ 应用/ [/ 8/ -/ 9/ ]/ ./ 这类/ 方法/ 通常/ 基于/ LTS/ (/ LabeledTransitionSystem/ )/ 模型/ ,/ 在/ IOCO/ 关系/ [/ 7/ ]/ 的/ 指导/ 下/ 生成/ 大量/ 可靠/ 的/ 一致性/ 测试/ 例/ ,/ 用以/ 判定/ 被测/ 软件/ 实现/ 是否/ 一致/ 于/ 软件/ 功能/ 说明/ ./ 此外/ ,/ 与/ 有限/ 状态机/ 、/ LTS/ 、/ 进程/ 代数/ 等/ 常用/ 的/ 软件/ 形式/ 建模/ 方法/ 相/ 比较/ ,/ 着色/ Petri/ 网/ (/ ColoredPetriNets/ ,/ CPN/ )/ [/ 10/ ]/ 能够/ 更加/ 直观/ 、/ 准确/ 地/ 刻画/ 复杂/ 软件系统/ 的/ 交互式/ 及/ 并/ 发行/ 为/ ,/ 且/ CPN/ 在/ 系统/ 层次/ 建模/ 、/ 复杂/ 数据处理/ 、/ 模型/ 分析/ 与/ 动态/ 模拟/ 执行/ 等/ 方面/ 也/ 更具/ 优势/ ,/ 更/ 易于/ 对/ 作为/ MBCT/ 基础/ 的/ 软件/ 形式/ 模型/ 的/ 正确性/ 进行/ 有效/ 确认/ [/ 11/ ]/ ./ 更/ 重要/ 的/ 是/ ,/ CPN/ 模型/ 的/ 动态/ 模拟/ 是/ 一种/ 以/ 实际/ 数据/ 驱动/ 模型/ 控制流/ 与/ 数据流/ 的/ 协同/ 执行/ 过程/ ,/ 基于/ 这种/ 模拟/ 执行/ 能够/ 生成/ 大量/ 实际/ 可/ 执行/ 的/ 一致性/ 测试/ 例/ ./ 本文/ 面向/ 网络/ 环境/ 中/ 具有/ 多/ 交互/ 、/ 高/ 并发/ 特性/ 的/ 软件系统/ 的/ 一致性/ 测试/ 应用/ ,/ 研究/ IOCO/ 测试/ 理论/ 与/ CPN/ 建模/ 进行/ 优势/ 融合/ 的/ 方式/ ,/ 旨在/ 构建/ 使用/ CPN/ 描述/ 测试/ 目的/ 模型/ 并/ 驱动/ IOCO/ 一致性/ 测试/ 选择/ 生成/ 的/ 新/ 方法/ ,/ 称为/ PN4TS/ 方法/ ,/ 保证/ 测试/ 例/ 的/ 实际/ 可执行性/ ,/ 提高/ 基于/ CPN/ 模型/ 实施/ 一致性/ 测试/ 的/ 自动化/ 程度/ 与/ 应用/ 能力/ ./ 图/ 1/ 给出/ PN4TS/ 方法/ 的/ 4/ 个/ 关联/ 组成部分/ :/ (/ 1/ )/ 提出/ 面向/ 一致性/ 测试/ 的/ CPN/ (/ ConformanceTestingorientedCPN/ ,/ CT/ -/ CPN/ )/ 模型/ ,/ 用于/ 为/ 软件系统/ 功能/ 进行/ 形式/ 建模/ ;/ (/ 2/ )/ 以/ CT/ -/ CPN/ 模型/ 为/ 基础/ ,/ 定义/ PN/ -/ IOCO/ 一致性/ 关系/ ,/ 用于/ 形式/ 描述/ “/ 软件/ 实现/ 与/ 软件/ 功能/ 说明/ 相一致/ ”/ 的/ 确切/ 涵义/ ;/ (/ 3/ )/ 构建/ 描述/ 具体/ 测试/ 目的/ 的/ CT/ -/ CPN/ 模型/ ,/ 并/ 在/ PN/ -/ IOCO/ 一致性/ 关系/ 的/ 指导/ 下/ ,/ 对/ 软件/ 功能/ 描述/ 模型/ 和/ 测试/ 目的/ 模型/ 执行/ 同步/ 模拟/ ,/ 生成/ 满足/ 该/ 测试/ 目的/ 、/ 并/ 使用/ CT/ -/ CPN/ 描述/ 的/ 一致性/ 测试/ 例/ ;/ (/ 4/ )/ 证明/ 测试/ 生成/ 的/ 可靠性/ (/ Soundness/ )/ 以及/ 对/ 测试/ 目的/ 覆盖/ 完备/ 性/ (/ TestPurposeCoverageCompleteness/ )/ ./ 本文/ 以/ 简单/ 文件传输/ 协议/ 和/ 实际/ 的/ 数字/ 内容/ 点对点/ 网络/ 分发/ 软件/ 为例/ ,/ 阐述/ PN4TS/ 方法/ 的/ 应用/ 过程/ 、/ 可用性/ 与/ 有效性/ ./ PN4TS/ 方法/ 的/ 优势/ 主要/ 体现/ 在/ :/ (/ 1/ )/ 基于/ CPN/ 模型/ 的/ 动态/ 模拟/ 过程/ ,/ 充分考虑/ 系统控制/ 流/ 和/ 数据流/ 的/ 协同/ 执行/ ,/ 以/ 实际/ 测试数据/ 驱动/ 测试/ 例/ 的/ 选择性/ 生成/ ,/ 有效/ 地/ 保证/ 了/ 测试/ 例/ 的/ 可执行性/ 与/ 可靠性/ ;/ (/ 2/ )/ 在/ PN/ -/ IOCO/ 一致性/ 关系/ 定义/ 中/ ,/ 只有/ 实际/ 测试/ 输出/ 与/ 测试/ 例中/ 描述/ 的/ 预期/ 测试/ 输出/ (/ TestOracle/ )/ 相同/ 时/ ,/ 才/ 会/ 判定/ 被/ 测系统/ 实现/ 一致/ 于/ 软件/ 功能/ 说明/ ,/ 故/ 行为/ 正确/ 但/ 功能/ 不/ 完整/ 的/ 被/ 测/ 实现/ 将/ 被/ 判定/ 为/ 与/ 软件/ 功能/ 说明/ 不/ 一致/ ,/ 加强/ 了/ 对/ 这种/ 缺陷/ 软件/ 的/ 错误/ 检测/ 能力/ ;/ (/ 3/ )/ 与/ 已有/ 基于/ 遍历/ 模型/ 状态/ 空间/ 或/ 基于/ LTS/ 模型/ 同步/ 积来/ 生成/ 测试用例/ [/ 3/ ]/ 的/ 方法/ 相比/ ,/ 本文/ 利用/ CT/ -/ CPN/ 模型/ 间/ 的/ 同步/ 模拟/ 执行/ 来/ 生成/ 测试/ 例/ ,/ 并/ 不/ 受控/ 于/ 软件系统/ 模型/ 的/ 规模/ 大小/ ,/ 具备/ 更好/ 的/ 可用性/ ,/ 能够/ 有效/ 处理/ 较/ 大规模/ 软件/ 的/ 功能/ 一致性/ 测试/ 应用/ ./ 2/ 相关/ 工作/ 基于/ CPN/ 模型/ 进行/ 软件/ 功能/ 一致性/ 测试/ 的/ 典/ Page3/ 型/ 研究/ 中/ ,/ Watanabe/ 与/ Kudoh/ [/ 12/ ]/ 首先/ 提出/ 了/ 一种/ 最/ 朴素/ 的/ 方法/ ,/ 即/ 直接/ 生成/ 系统/ 模型/ 的/ 状态/ 可达树/ ,/ 基于/ 树/ 的/ 遍历/ 实现/ 测试/ 序列/ 的/ 提取/ ;/ 继而/ 合并/ 等价/ 状态/ 节点/ 构建/ 状态/ 可达图/ ,/ 并/ 按照/ 基于/ FSM/ 模型/ 的/ 测试/ 生成/ 方法/ 构造/ 测试/ 例/ ./ 近来/ ,/ Wu/ 等/ 人/ [/ 13/ ]/ 和/ Xu/ 和/ Chu/ 等/ 人/ [/ 14/ ]/ 也/ 利用/ 模型/ 可达图/ 中/ 的/ 可达/ 路径/ 简单/ 抽取/ 出/ 测试/ 序列/ 构成/ 测试/ 例/ 模型/ ./ 此外/ ,/ Farooq/ 等/ 人/ [/ 15/ ]/ 首先/ 给出/ 顺序/ 覆盖/ 标准/ (/ 分支/ 覆盖/ 、/ 边覆盖/ 等/ )/ 和/ 并发/ 覆盖/ 标准/ (/ 结点/ 或边/ 的/ 交叠/ 覆盖/ 等/ )/ ,/ 并/ 利用/ 随机/ 漫步/ (/ RandomWalk/ )/ 算法/ 对系统/ CPN/ 模型/ 的/ 状态/ 空间/ 进行/ 多次/ 搜索/ ,/ 直至/ 已/ 生成/ 的/ 测试/ 例/ 集合/ 符合/ 预期/ 覆盖/ 标准/ ./ Zhang/ 等/ 人/ [/ 16/ ]/ 利用/ CPN/ 建模/ 工具/ 支持/ 的/ 模型/ 检测/ 技术/ 完成/ 基于/ 状态/ 空间/ 生成/ 反例/ 来/ 构建/ 测试/ 例/ ./ Yu/ 等/ 人/ [/ 17/ ]/ 提出/ 了/ 一种/ CPN/ 模型/ 支持/ 的/ 虚拟/ 测试/ 模拟/ 执行/ 环境/ ,/ 能够/ 在/ 没有/ 实际/ 测试环境/ 部署/ 的/ 条件/ 下/ 完成/ 软件系统/ 测试/ ,/ 并未/ 描述/ 测试/ 生成/ 过程/ ./ Zhu/ 和/ He/ [/ 18/ ]/ 对/ 面向/ 高级/ Petri/ 网/ 的/ 测试/ 可/ 观察/ 模式/ 与/ 相应/ 覆盖/ 标准/ 进行/ 了/ 更/ 充分/ 的/ 论述/ ,/ 但/ 同样/ 并未/ 给出/ 具体/ 测试/ 生成/ 方法/ ./ 为/ 使/ 一致性/ 测试/ 能够/ 在/ 有限/ 时间/ 和/ 条件/ 约束/ 下/ 顺利/ 实施/ ,/ 通常/ 将/ 特定/ 的/ 测试/ 选择/ 标准/ 集成/ 到/ 测试/ 例/ 生成/ 过程/ 中/ ,/ 以/ 生成/ 可/ 用于/ 实际/ 测试/ 的/ 有限/ 个/ 测试/ 例/ ./ 常见/ 的/ 测试/ 选择/ 方法/ 包括/ 基于/ 测试/ 目的/ 的/ 选择/ [/ 9/ ,/ 19/ -/ 22/ ]/ 、/ 随机/ 选择/ [/ 8/ ,/ 23/ -/ 24/ ]/ 、/ 基于/ 属性/ 覆盖/ 的/ 选择/ [/ 25/ -/ 26/ ]/ 、/ 符号化/ 的/ 数据/ 选择/ [/ 27/ ]/ 等/ ./ 其中/ ,/ 基于/ 测试/ 目的/ (/ TestPurpose/ )/ 的/ 选择/ 方法/ 通常/ 将/ 部分/ 系统/ 行为/ 描述/ 为/ 一种/ 测试/ 目的/ ,/ 并/ 使/ 所/ 生成/ 的/ 测试/ 例/ 重点/ 对/ 这部分/ 功能/ 进行/ 一致性/ 测试/ ,/ 满足/ 本文/ 对/ 具有/ 黑盒/ 性质/ 的/ 网络/ 软件系统/ 的/ 功能/ 一致性/ 测试/ 需求/ ./ 总体而言/ ,/ 基于/ CPN/ 模型/ 生成/ 测试/ 例/ 的/ 相关/ 方法/ 较/ 少/ ,/ 且/ 普遍/ 面向/ 系统/ 内部/ 行为/ 可知/ 的/ 应用/ ,/ 采用/ 完全/ 遍历/ 或/ 随机/ 遍历/ 模型/ 状态/ 空间/ 来/ 生成/ 测试/ 例/ ./ 而/ 本文/ 所提/ PN4TS/ 方法/ 以/ IOCO/ 测试/ 理论/ 为/ 指导/ ,/ 对/ 分别/ 描述/ 软件/ 功能/ 行为/ 与/ 特定/ 测试/ 目的/ 的/ 两个/ CT/ -/ CPN/ 模型/ 执行/ 同步/ 模拟/ ,/ 实现/ 有效/ 的/ 测试/ 例/ 选择性/ 生成/ ./ 本/ 方法/ 充分考虑/ 测试/ 过程/ 中/ 系统/ 外部/ 行为/ 的/ 可/ 观察/ 特性/ 以/ 增强/ 测试/ 例对/ 实际/ 测试/ 过程/ 描述/ 的/ 准确性/ ;/ 利用/ CPN/ 模型/ 的/ 动态/ 模拟/ 功能/ 简化/ 测试/ 例/ 的/ 选择性/ 生成/ ,/ 强化/ 测试/ 例/ 的/ 可执行性/ ;/ 通过/ 证明/ 测试/ 例/ 的/ 可靠性/ 及/ 对/ 测试/ 目的/ 的/ 覆盖/ 完备/ 性/ ,/ 说明/ 通过/ 执行/ 测试/ 例来/ 判定/ 软件/ 被测/ 实现/ 与/ 软件/ 功能/ 说明/ 之间/ 的/ 一致性/ 是/ 可靠/ 的/ ./ 3/ 软件系统/ 的/ CT/ -/ CPN/ 建模/ (/ CPN/ ,/ PS/ ,/ TS/ )/ :/ 定义/ 1/ ./ CT/ -/ CPNS/ 模型/ 定义/ 为/ CT/ -/ CPNS/ =/ (/ 1/ )/ CPN/ 是/ 一个/ 基本/ CPN/ ,/ P/ 为/ 位置/ 集/ ,/ T/ 为/ (/ 2/ )/ PS/ =/ P/ 且/ PS/ =/ PO/ 变迁/ 集/ ;/ 集合/ ,/ PE/ 集为/ 空/ ;/ (/ 3/ )/ TS/ =/ T/ 且/ TS/ =/ TI/ 迁/ 集合/ ,/ TO/ 且/ 各/ 变迁/ 集合/ 彼此间/ 交集/ 为空/ ;/ (/ 4/ )/ CT/ -/ CPNS/ 输出/ 有限/ ,/ 即/ 狋/ 狉/ 犪/ 犮/ 犲/ (/ M0/ )/ / n/ (/ n/ ∈/ N/ )/ ;/ (/ 5/ )/ CT/ -/ CPNS/ 中/ 不/ 存在/ 内部/ 行为/ 构成/ 的/ 环/ 结构/ ,/ 即/ / / M/ :/ M/ / σ/ M/ ,/ σ/ ∈/ BE/ (/ TE/ (/ 说明/ :/ 本文/ 涉及/ CPN/ 模型/ 中/ 的/ 标识/ 可/ 达/ 、/ 点火/ 路径/ 、/ 可/ 达/ 状态/ 等/ 概念/ 的/ 形式/ 定义/ 参考文献/ [/ 10/ ]/ )/ ./ 定义/ 1/ 将/ 描述/ 软件/ 功能/ 说明/ 的/ CT/ -/ CPN/ 模型/ 定义/ 为/ CT/ -/ CPNS/ ./ 其中/ ,/ 依照/ 一致性/ 测试/ 的/ 需求/ ,/ 首先/ 将/ 软件/ 运行/ 状态/ (/ 对应/ 于/ CPN/ 模型/ 中/ 的/ 位置/ 元素/ )/ 区分/ 为/ 可/ 观察/ 状态/ 和/ 内部/ 状态/ :/ 可/ 观察/ 状态/ 描述/ 被/ 测系统/ 进行/ 测试/ 输入/ 、/ 或/ 被/ 测系统/ 呈现/ 可/ 观察/ 的/ 测试/ 输出/ 的/ 状态/ ;/ 而/ 内部/ 状态/ 则/ 描述/ 被/ 测系统/ 内部/ 运行/ 、/ 外部/ 无法/ 观察/ 到/ 的/ 系统/ 运行/ 态/ ./ 同时/ ,/ 将/ 软件/ 行为/ (/ 对应/ 于/ CPN/ 模型/ 中/ 的/ 变迁/ 元素/ )/ 区分/ 为/ 输入/ 行为/ 、/ 输出/ 行为/ 和/ 内部/ 行为/ :/ 输入/ 行为/ 描述/ 测试者/ 向/ 被/ 测系统/ 提供/ 输入/ ;/ 输出/ 行为/ 描述/ 被/ 测系统/ 产生/ 测试者/ 可/ 观察/ 的/ 输出/ ;/ 而/ 内部/ 行为/ 描述/ 被/ 测系统/ 内部/ 执行/ 、/ 测试者/ 不可/ 观察/ 的/ 行为/ ./ 在/ 构建/ 一个/ 具体/ 软件系统/ 的/ CT/ -/ CPNS/ 模型/ 时/ ,/ 需要/ 多次/ 对/ 该/ 模型/ 执行/ 动态/ 模拟/ (/ Simulation/ )/ ,/ 修正/ 不/ 精确/ 的/ 模型/ 元素/ ,/ 并/ 避免出现/ 如下/ 两种/ 情况/ :/ 对/ 给定/ 输入/ 不能/ 产生/ 无限/ 可能/ 的/ 输出/ ,/ 否则/ 实际/ 测试/ 中将/ 无法/ 在/ 有限/ 时间/ 内/ 给出/ 确定/ 的/ 测试/ 结论/ ;/ 模型/ 中/ 不能/ 包含/ 内部/ 行为/ 构成/ 的/ 环/ 结构/ ,/ 否则/ 被/ 测系统/ 无/ 输出/ 响应/ 时/ ,/ 很难/ 断定/ 系统/ 是/ 处于/ 死锁/ 状态/ 或/ 其他/ 不/ 可知/ 状态/ ./ 下文/ 以/ 简单/ 文件传输/ 协议/ (/ 简记/ 为/ SFTP/ )/ 为例/ ,/ 给出/ 其/ CT/ -/ CPNS/ 模型/ ,/ 如图/ 2/ 所示/ ./ SFTP/ 中/ 具有/ 相同/ 功能/ 的/ 不同/ 对/ 等/ 结点/ (/ Peers/ )/ 之间/ 能够/ 通过/ 网络共享/ 同一个/ 资源/ 文件/ (/ 该/ 文件/ 由/ 若干/ 文件/ 片段/ [/ SN/ ,/ DATA/ ]/ 组成/ )/ ./ 结点/ 接收/ 到/ 一个/ 片段/ 请/ Page4/ 求/ (/ req/ )/ 时/ ,/ 按/ 所/ 请求/ 的/ 片段/ 序号/ (/ SN/ )/ 检索/ 自身/ 已有/ 片段/ 集合/ (/ DATASET/ )/ ,/ 并/ 将/ 匹配/ 的/ 片段/ (/ DATAENTRY/ )/ 发送给/ 请求/ 结点/ ;/ 结点/ 接收/ 到/ 所/ 请求/ 的/ 片段/ (/ rep/ )/ 时/ ,/ 先/ 将/ 其/ 存储/ 至/ 已有/ 片段/ 集合/ 并/ 发起/ 针对/ 未有/ 片段/ 的/ 新/ 请求/ ./ 该/ 模型/ 中/ ,/ rv/ // sd/ // set/ 为/ 可/ 观察/ 位置/ ;/ recv/ 为/ 输入/ 变迁/ ,/ 描述/ 报文/ 的/ 接收/ ,/ 图/ 2/ 简单/ 文件传输/ 协议/ 中/ 对/ 等/ 结点/ 的/ CT/ -/ CPNS/ 模型/ 在/ 进行/ CT/ -/ CPNS/ 建模/ 时/ ,/ 需要/ 结合/ 系统/ 的/ 功能/ 行为/ ,/ 及/ 实际/ 测试/ 执行/ 所/ 设置/ 的/ 外部/ 控制/ 观察点/ [/ 1/ ]/ (/ PointsofControlandObservation/ )/ 来/ 共同/ 选择/ 可/ 观察/ 位置/ 进行/ 标识/ ,/ 通常/ 将/ 其/ 作为/ 输入/ 变迁/ 的/ 前集/ 或/ 输出/ 变迁/ 的/ 后集/ ,/ 便于/ 通过/ 可/ 观察/ 位置/ 上/ 的/ token/ 数据/ 变化/ 来/ 判定/ 其/ 关联/ 变迁/ 是否/ 正确/ 点火/ 执行/ ./ 特别/ 地/ ,/ 图/ 2/ 中/ 的/ 位置/ set/ 上/ 的/ token/ 数据/ 能够/ 反映/ 对/ 等/ 实体/ 中/ 已存/ 文件/ 片段/ 是否/ 更新/ ,/ 故可/ 作为/ 一种/ 测试/ 判定/ 标准/ 将/ 其/ 建模/ 为/ 可/ 观察/ 位置/ ./ 4PN/ -/ IOCO/ 一致性/ 关系/ 根据/ 基本/ IOCO/ 一致性/ 关系/ 的/ 定义/ [/ 7/ ]/ ,/ 本文/ 将/ 基于/ CT/ -/ CPN/ 模型/ 的/ IOCO/ 一致性/ 关系/ 定义/ 如下/ ./ 定义/ 2/ ./ PN/ -/ IOCO/ 定义/ 为/ ss/ ∈/ CT/ -/ CPNS/ 与/ ii/ ∈/ CT/ -/ CPNI/ 之间/ 的/ 一种/ 实现/ 关系/ (/ ImplementationRelation/ )/ :/ ii/ 犘/ 犖/ -/ 犐/ 犗/ 犆/ 犗/ ss/ =/ def/ / σ/ ∈/ 犛/ 犘/ 狋/ 狉/ 犪/ 犮/ 犲/ (/ MS/ )/ :/ 狋/ 狅/ 犽/ 犲/ 狀/ 狊/ (/ MI/ 犳/ 犻/ 狉/ 犲/ 狊/ σ/ )/ =/ 狋/ 狅/ 犽/ 犲/ 狀/ 狊/ (/ MS/ 犳/ 犻/ 狉/ 犲/ 狊/ σ/ )/ ,/ 其中/ M/ 犳/ 犻/ 狉/ 犲/ 狊/ σ/ =/ def/ {/ Mn/ |/ M/ / σ/ Mn/ ,/ σ/ ∈/ BE/ (/ T/ )/ / }/ (/ 1/ )/ MS/ 是/ 模型/ ss/ 对应/ 的/ 初始/ 标识/ ;/ MI/ 是/ 模型/ ii/ 对应/ 的/ 初始/ 标识/ ;/ 犛/ 犘/ 狋/ 狉/ 犪/ 犮/ 犲/ (/ MS/ )/ 给出/ 了/ 模型/ ss/ 中/ 所有/ 可行/ 的/ 行为/ 执行/ 路径/ ,/ 并/ 以此/ 约束/ 测试/ 例/ 的/ 生成/ 范围/ ;/ (/ 2/ )/ 狋/ 狅/ 犽/ 犲/ 狀/ 狊/ (/ M/ )/ =/ def/ {/ M/ (/ P/ )/ |/ P/ ∈/ PO/ 了/ 标识/ M/ 下/ 可/ 被/ 观察/ 到/ 的/ 输出/ 数据/ :/ 在/ 模型/ ss/ 中/ ,/ 对应/ 于/ 可/ 观察/ 位置/ 上/ 的/ token/ 数据/ ,/ 而/ 在/ 模型/ ii/ 中/ ,/ 并/ 触发/ 协议/ 后续/ 行为/ 的/ 执行/ ;/ send/ // store/ // newreq/ 为/ 输出/ 变迁/ ,/ 描述/ 已存/ 片段/ 的/ 发送/ 、/ 接收/ 片段/ 的/ 存储/ 和/ 新/ 片段/ 的/ 请求/ ,/ 标志/ 之前/ 的/ 内部/ 行为/ 执行/ 已/ 完成/ ;/ 其余/ 为/ 内部/ 位置/ 和/ 内部/ 变迁/ ./ 特别/ 地/ ,/ 位置/ sp/ 中/ 预存/ 了/ 片段/ 序号/ 的/ 全集/ ,/ 用于/ 辅助/ 判定/ 需要/ 请求/ 哪个/ 新/ 的/ 文件/ 片段/ ./ 对应/ 于/ 实际/ 观察/ 到/ 的/ 输出/ 结果/ ./ 需要/ 特别/ 说明/ :/ 首先/ ,/ 软件/ 实现/ 通常/ 是/ 物理/ 存在/ 的/ 软件/ 或/ 软硬件/ 协同/ 系统/ ,/ 其/ 内部/ 行为/ 并/ 不/ 完全/ 可知/ ,/ 为此/ ,/ IOCO/ 一致性/ 测试/ 理论/ 假设/ 每/ 一个/ 被/ 测系统/ 实现/ 都/ 存在/ 一个/ 与/ 之/ 对应/ 的/ 形式/ 模型/ ,/ 可以/ 通过/ 外部/ 行为/ 特征/ 对/ 其/ 进行/ 描述/ ,/ 但/ 无法/ 显式/ 构建/ [/ 6/ ]/ ,/ 故/ 使用/ CT/ -/ CPNI/ 来/ 描述/ 被测/ 实现/ 的/ 形式/ 模型/ ./ 其次/ ,/ PS/ / PI/ 且/ TS/ / TI/ 成立/ ,/ 即/ ii/ 模型/ 也/ 是/ 通过/ 变迁/ 点火/ 执行/ 来/ 反映/ 系统/ 真实/ 的/ 执行/ 过程/ ,/ 且/ 模型/ ss/ 中/ 定义/ 的/ 可/ 观察/ 位置/ 集及/ 输入输出/ 变迁/ 集都/ 可以/ 对应/ 到/ 模型/ ii/ 中/ ./ 此外/ ,/ 在/ PN/ -/ IOCO/ 定义/ 中/ ,/ 要求/ 狋/ 狅/ 犽/ 犲/ 狀/ 狊/ 数据/ 必须/ 相同/ ,/ 即/ 只有/ 观察/ 到/ 的/ 实际/ 测试/ 输出/ 与/ 预期/ 定义/ 好/ 的/ 测试/ 输出/ 标准/ 完全相同/ 时/ ,/ 才/ 会/ 判定/ 软件/ 实现/ 一致/ 于/ 软件/ 功能/ 模型/ ./ 与/ 基本/ IOCO/ 一致性/ 关系/ 相比/ ,/ 行为/ 正确/ 但/ 功能/ 不/ 完整/ 的/ 那些/ 软件/ 实现/ 将/ 被/ 判定/ 为/ 与/ 软件/ 规范/ 说明/ 不/ 一致/ ./ 因此/ ,/ PN/ -/ IO/ -/ CO/ 一致性/ 关系/ 指导/ 下/ 的/ 一致性/ 测试/ 过程/ 可以/ 有效/ 增强/ 对/ 存在/ 功能/ 缺陷/ 的/ 被/ 测系统/ 的/ 检测/ 能力/ ./ PN/ -/ IOCO/ 一致性/ 关系/ 明确/ 定义/ 了/ 如何/ 判定/ 被测/ 软件/ 实现/ 与/ 软件/ 功能/ 说明/ 之间/ 的/ 一致性/ 关系/ :/ 给定/ 模型/ ss/ 的/ 初始/ 标识/ 赋值/ ,/ 可/ 生成/ 若干/ 可/ 执行/ 路径/ σ/ ,/ 以此/ 为/ 基础/ 构成/ 测试/ 例/ 集合/ TS/ ./ 假设/ 存在/ t/ ∈/ TS/ ,/ 测试/ 执行/ 时/ ,/ 将/ t/ 中/ 描述/ 的/ 输入/ 行为/ 逐一/ 实施/ 于/ 被/ 测系统/ ,/ 并/ 观察/ 其/ 实际/ 输出/ ,/ 如果/ 所有/ 实际/ 输出/ 与/ ss/ 模型/ 中/ 对应/ 可/ 观察/ 位置/ 上/ 预期/ 输出/ 的/ token/ 数据/ 都/ 相同/ ,/ 则/ 认为/ 测试/ 例/ t/ 执行/ 通过/ ,/ 即/ ii/ 狆/ 犪/ 狊/ 狊/ t/ ;/ 否则/ ,/ 一旦/ 出现/ 实际/ 输出/ 与/ 预期/ 输出/ 不/ 相同/ ,/ 则/ 认为/ 测/ Page5/ 试例/ t/ 执行/ 失败/ ,/ 即/ ii/ 犳/ 犪/ 犻/ 犾/ t/ ./ 由/ 定义/ 2/ 可知/ ,/ 如果/ 被测/ 软件/ 实现/ 能够/ 通过/ 基于/ 模型/ ss/ 所/ 生成/ 的/ 测试/ 例/ 全集/ TS/ ,/ 则/ 可/ 判定/ 该/ 被/ 测/ 实现/ 与/ 模型/ ss/ 所/ 描述/ 的/ 软件系统/ 规范/ 说明/ 是/ 一致/ 的/ ./ 5/ 测试/ 目的/ 模型/ 驱动/ 的/ 测试/ 选择/ 本文/ 基于/ 测试/ 目的/ 进行/ 有/ 选择/ 的/ 测试/ 生成/ :/ 将/ 描述/ 系统/ 特定/ 的/ 、/ 部分/ 功能/ 的/ 测试/ 目的/ 建模/ 为/ 一种/ CT/ -/ CPN/ 模型/ ,/ 并/ 通过/ 该/ 模型/ 与/ 描述/ 软件/ 功能/ 说明/ 的/ CT/ -/ CPNS/ 模型/ 的/ 同步/ 模拟/ 执行/ ,/ 约束/ SPtrace/ 集合/ 中/ 可/ 执行/ 路径/ 的/ 构造/ 过程/ ,/ 使/ 所/ 生成/ 的/ 测试/ 例/ 能够/ 针对/ 测试/ 目的/ 所/ 描述/ 的/ 特定/ 系统/ 功能/ 完成/ 一致性/ 测试/ ,/ 并且/ 具有/ 良好/ 的/ 可执行性/ 和/ 可靠性/ ./ 5.1/ 基于/ CT/ -/ CPN/ 模型/ 的/ 测试/ 目的/ 建模/ 测试/ 目的/ 通常/ 针对/ 软件系统/ 中/ 特定/ 的/ 部分/ 功能/ 行为/ 进行/ 描述/ ,/ 例如/ 在/ 网络软件/ 中/ ,/ 请求/ 报文/ 的/ 发送/ 、/ 数据/ 报文/ 的/ 接收/ 、/ 关键/ 数据结构/ 的/ 更新/ 操作/ 等/ 都/ 可以/ 作为/ 一种/ 测试/ 目的/ ,/ 以/ 约束/ 测试/ 例/ 的/ 生成/ 范围/ ,/ 使/ 通过/ 约束/ 所/ 生成/ 的/ 这些/ 测试/ 例/ 能够/ 重点/ 针对/ 测试/ 目的/ 覆盖/ 的/ 那些/ 软件/ 功能/ 行为/ 进行/ 一致性/ 测试/ ,/ 对/ 规模/ 较大/ 的/ 软件系统/ 便于/ 更/ 有/ 针对性/ 和/ 可操作性/ 的/ 测试/ 执行/ ./ CT/ -/ CPNTP/ 模型/ 的/ 构建/ 显然/ 需要/ 以/ CT/ -/ CPNS/ 为/ 基础/ ,/ 因为/ 测试/ 目的/ 仅仅/ 用于/ 刻画/ 完整/ 系统/ 行为/ 中/ 一部分/ 具体/ 的/ 、/ 希望/ 重点/ 测试/ 的/ 执行/ 过程/ ,/ 所以/ 本文/ 将/ 以/ CT/ -/ CPNS/ 为/ 基础/ 构建/ 描述/ 测试/ 目的/ CT/ -/ CPNTP/ 模型/ ./ 定/ 位置/ ;/ (/ CT/ -/ CPNS/ ,/ PTP/ ,/ Σ/ TP/ )/ :/ 定义/ 3/ ./ 测试/ 目的/ 模型/ 定义/ 为/ CT/ -/ CPNTP/ =/ (/ 1/ )/ CT/ -/ CPNS/ 是/ 一个/ CT/ -/ CPNS/ 模型/ ;/ (/ 2/ )/ PTP/ =/ PS/ ∪/ {/ ph/ }/ :/ 位置/ 元素/ ph/ 称为/ 覆盖/ 判/ (/ 3/ )/ Σ/ TP/ =/ Σ/ S/ ∪/ {/ 犮/ 狅/ 狏/ 犲/ 狉/ 犲/ 犱/ }/ ./ 在/ CT/ -/ CPNTP/ 模型/ 中/ ,/ ph/ 通常/ 作为/ 一个/ 输出/ 变迁/ 的/ 后集/ ,/ 是/ 模型/ 的/ 终止/ 位置/ ,/ 且/ 其/ 上/ 只能/ 允许/ 出现/ 值为/ 犮/ 狅/ 狏/ 犲/ 狉/ 犲/ 犱/ 的/ token/ 数据/ ./ 具体/ 而言/ ,/ 若/ ph/ 位置/ 上/ 生成/ 了/ 值/ 为/ 犮/ 狅/ 狏/ 犲/ 狉/ 犲/ 犱/ 的/ token/ 数据/ ,/ 说明/ 从/ 初始/ 标识/ 开始/ ,/ 模型/ 执行/ 所/ 产生/ 的/ 点火/ 路径/ 恰/ 对应/ 于/ 测试/ 目的/ 描述/ 的/ 功能/ 行为/ 执行/ ,/ 而/ 约束/ 这种/ 行为/ 的/ 发生/ 条件/ 是/ 通过/ 为/ 该/ 路径/ 中/ 所有/ 点火/ 变迁/ 添加/ 必要/ 的/ 防卫/ 表达式/ 来/ 实现/ 的/ ./ 图/ 3/ 给出/ 了/ 一个/ 针对/ 简单/ 文件传输/ 协议/ 的/ CT/ -/ CPNTP/ 模型/ 示例/ ./ 该/ 测试/ 目的/ 关注/ 于/ 对/ 等/ 实体/ 接收/ 到/ 文件/ 片段/ 请求/ 后/ (/ 通过/ 防卫/ 表达式/ [/ (/ #/ 1p/ )/ =/ req/ ]/ 来/ 约束/ )/ ,/ 能否/ 通过/ 片段/ 号/ 的/ 匹配/ (/ 通过/ 防卫/ 表达式/ [/ n/ =/ (/ #/ 1en/ )/ 来/ 约束/ ]/ )/ ,/ 将/ 所/ 请求/ 的/ 片段/ 从/ 已有/ 片段/ 集合/ 中/ 检索/ 出来/ ./ 如果/ ph/ 位置/ 上/ 产生/ 值为/ 犮/ 狅/ 狏/ 犲/ 狉/ 犲/ 犱/ 的/ token/ 数据/ ,/ 则/ 说明/ 点火/ 路径/ 正确/ 描述/ 了/ 上述/ 测试/ 目的/ 的/ 行为/ 执行/ ./ 图/ 3/ 简单/ 文件传输/ 协议/ 的/ 第/ 1/ 个/ CT/ -/ CPNTP/ 模型/ 5.2/ 基于/ 模型/ 同步/ 模拟/ 执行/ 的/ 测试/ 例/ 生成/ 构建/ 测试/ 目的/ 驱动/ 的/ 一致性/ 测试/ 生成/ 方法/ ,/ 必然/ 要/ 同时/ 考虑/ 软件/ 功能/ CT/ -/ CPNS/ 模型/ 和/ 测试/ 目的/ CT/ -/ CPNTP/ 模型/ 的/ 模拟/ 执行/ ,/ 这/ 是因为/ CT/ -/ CPNS/ 模型/ 的/ 执行/ 反映/ 了/ 系统/ 行为/ 的/ 具体/ 发生/ 过程/ ,/ 包括/ 每/ 一步/ 实际/ 输入/ 及/ 输出/ ,/ 这是/ 测试/ 例/ 生成/ 的/ 基础/ 依据/ ;/ 而/ CT/ -/ CPNTP/ 模型/ 的/ 执行/ 能够/ 指导/ 系统/ 行为/ 发生/ 路径/ 的/ 选择/ ,/ 确保/ 将/ 所/ 生成/ 的/ 测试/ 例/ 约束/ 在/ 测试/ 目的/ 所/ 关注/ 的/ 一些/ 特定/ 的/ 行为/ 执行/ 过程/ ,/ 而/ 对/ 其他/ 执行/ 过程/ 不再/ 深入/ 考虑/ ./ 因此/ ,/ 需要/ 对/ 上述/ 两种/ 模型/ 执行/ 同步/ 模拟/ ,/ 生成/ 覆盖/ 测试/ 目的/ 的/ 测试/ 例/ ,/ 并/ 使用/ CT/ -/ CPNTC/ 加以/ 描述/ ./ 以/ PN/ -/ IOCO/ 一致性/ 关系/ 为/ 指导/ ,/ 基于/ 测试/ 目的/ 进行/ 有/ 选择/ 的/ 测试/ 生成/ 时/ 完成/ 两/ 方面/ 工作/ :/ 约束/ SPtrace/ 集合/ 中/ 可/ 执行/ 路径/ 的/ 构造/ 过程/ ,/ 使/ 所/ 生成/ 的/ 测试/ 例/ 覆盖/ 测试/ 目的/ 所/ 描述/ 的/ 路径/ ;/ 对/ 所有/ 可/ 观察/ 输出/ 不但/ 要/ 进行/ 正确性/ 判定/ ,/ 还要/ 明确/ 标识/ 其/ 是否/ 覆盖/ 了/ 测试/ 目的/ ./ 具体/ 而言/ ,/ 给定/ CT/ -/ CPNS/ 模型/ 的/ 初始/ 标识/ MS/ 及/ 一个/ 测试/ 目的/ CT/ -/ CPNTP/ 模型/ 的/ 初始/ 标识/ MTP/ 之后/ ,/ 基于/ 这/ 两个/ 模型/ 中/ 可/ 激活/ 绑定/ 元素/ 的/ 不断/ 同步/ 点火/ ,/ 驱动/ 测试/ 例/ 的/ 选择性/ 生成/ ,/ 而/ 同步/ 点火/ 按/ 如下/ 规则/ 执行/ :/ 规则/ 1/ ./ 输入/ 行为/ 的/ 同步/ 点火/ 规则/ ./ 若/ t/ ∈/ TIBETP/ 均/ 可/ 激活/ ,/ 则/ 生成/ t/ ∈/ TIp/ ∈/ pre/ (/ t/ )/ }/ :/ p/ ∈/ PI/ 构造/ 新/ 的/ 内部/ 位置/ p/ ∈/ PE/ (/ t/ ,/ bS/ )/ 与/ (/ t/ ,/ bTP/ )/ 执行/ ,/ 且/ M/ (/ p/ )/ =/ {/ M/ |/ M/ (/ p/ )/ (/ t/ ,/ bS/ →/ / / )/ }/ ,/ 完成/ 一次/ 输入/ 行为/ 的/ 同步/ 执行/ ./ 规则/ 2/ ./ 内部/ 行为/ 的/ 同步/ 点火/ 规则/ ./ 若/ t/ ∈/ TEBETP/ 均/ 可/ 激活/ ,/ 且/ 若/ 点火/ 执行/ 后/ 可/ 生成/ 相同/ 的/ token/ ,/ Page6/ 则/ 将/ (/ t/ ,/ bS/ )/ 与/ (/ t/ ,/ bTP/ )/ 点火/ ,/ 完成/ 一次/ 内部/ 行为/ 的/ 同步/ 执行/ ;/ 否则/ ,/ 单独/ 多次/ 点火/ (/ t/ ,/ bS/ )/ ,/ 直到/ t/ ∈/ TE/ 完成/ 内部/ 行为/ 同步/ 执行/ 前/ ,/ 被测/ 实现/ 需要/ 先/ 执行/ 若干/ 内部/ 行为/ ,/ 直到/ 测试/ 目的/ 所/ 约束/ 那些/ 同步/ 行为/ 可/ 激活/ 并/ 执行/ (/ 鉴于/ 内部/ 变迁/ 的/ 点火/ 反映/ 了/ 系统/ 内部/ 行为/ 的/ 发生/ ,/ 所以/ 并不需要/ 描述/ 在/ 测试/ 例/ 模型/ 中/ )/ ./ 规则/ 3/ ./ 输出/ 行为/ 的/ 同步/ 点火/ 规则/ ./ 若/ t/ ∈/ TO/ (/ 3/ )/ 将/ t/ ∈/ TO/ (/ 2/ )/ 生成/ a/ ∈/ (/ tv/ ,/ pv/ )/ ,/ r/ =/ pre/ (/ tv/ )/ (/ r/ ∈/ POBETP/ 均/ 可/ 激活/ ,/ 则/ 生成/ t/ ∈/ TOpost/ (/ t/ )/ }/ :/ p/ ∈/ PO/ 需要/ 构造/ 新/ 的/ 内部/ 位置/ p/ ∈/ PE/ (/ t/ ,/ bS/ )/ 与/ (/ t/ ,/ bTP/ )/ 执行/ ,/ 完成/ 一次/ 输出/ 行为/ 的/ 同步/ 执行/ ,/ 并/ 为/ 每/ 一个/ p/ ∈/ PO/ (/ 1/ )/ 生成/ q/ ∈/ PTOp/ ∪/ q/ }/ ∧/ {/ post/ (/ tv/ )/ =/ pv/ }/ ,/ 且/ M/ (/ q/ )/ =/ M/ (/ p/ )/ ;/ 其中/ ,/ M/ (/ q/ )/ 上/ 的/ token/ 记录/ 可/ 观察/ 位置/ p/ 的/ 预期/ 输出/ ;/ 可/ 一般性/ 的/ 描述/ 为/ ifM/ (/ r/ )/ =/ M/ (/ q/ )/ then1pass/ ++/ 1coveredelse1fail/ ,/ 即/ 如果/ 实际/ 输出/ M/ (/ r/ )/ 与/ 预期/ 输出/ M/ (/ q/ )/ 相同/ (/ 此时/ 测试/ 目的/ 已/ 确定/ 被/ 覆盖/ )/ ,/ 则/ 测试/ 结果/ 指示/ 位置/ pv/ 中将/ 同时/ 生成/ 值为/ pass/ 与/ covered/ 的/ token/ 数据/ ;/ 置/ 或/ 可/ 观察/ 位置/ 关联/ ,/ 即/ r/ ∈/ PE/ 保持/ 测试/ 例/ 模型/ 的/ 连通/ ;/ 同时/ 删除/ 冗余/ 的/ 内部/ 位置/ ./ 在/ 实际/ 输入/ 数据/ 的/ 驱动/ 下/ 执行/ 上述/ 规则/ 可/ 逐步/ 产生/ CT/ -/ CPNTC/ 测试/ 例/ 模型/ ./ 由于/ CT/ -/ CPNTP/ 是/ 以/ 对应/ 系统/ 的/ CT/ -/ CPNS/ 为/ 基础/ 而/ 构建/ 的/ ,/ 描述/ 其/ 部分/ 行为/ 执行/ ,/ 因此/ 不会/ 发生/ CT/ -/ CPNTP/ 中/ 的/ 绑定/ 元素/ 可/ 点火/ 执行/ 而/ CT/ -/ CPNS/ 中/ 的/ 对应/ 绑定/ 元素/ 不可/ 被/ 激活/ 的/ 情况/ ,/ 保证/ 上述/ 规则/ 的/ 可行性/ ./ 下面/ 给出/ CT/ -/ CPNTC/ 的/ 形式/ 定义/ ./ 定义/ 4/ ./ CT/ -/ CPNTC/ 模型/ 定义/ 为/ CT/ -/ CPNTC/ =/ (/ 1/ )/ CPN/ 是/ 一个/ 基本/ CPN/ ,/ P/ 为/ 位置/ 集/ ,/ T/ 为/ (/ 2/ )/ PTC/ =/ P/ ,/ PTC/ =/ PITC/ 为/ 输入/ 位置/ 集合/ ,/ 标识/ 测试/ 输入/ 数据/ ;/ POTC/ :/ PIPE/ 为/ 可/ 观察/ 位置/ 集合/ ,/ 标识/ 可/ 观察/ 的/ 实际/ 输出/ 数据/ ;/ TC/ 为/ 预期/ 结果/ 指示/ (/ TestOracle/ )/ 位置/ 集合/ ,/ 标识/ PTO/ 对应/ 可/ 观察/ 位置/ 上/ 预期/ 应/ 产生/ 的/ 正确/ 输出/ 结果/ ;/ TC/ 为/ 测试/ 结果/ 指示/ 位置/ 集合/ ,/ 标识/ 测试/ 判定/ 结果/ ,/ PV/ 只/ 允许/ pass/ // fail/ // covered/ 三种/ token/ 数据/ :/ fail/ 表示/ 执行/ 失败/ ,/ 只/ 存在/ pass/ 表示/ 执行/ 通过/ ,/ pass/ 与/ (/ CPN/ ,/ PTC/ ,/ TTC/ )/ :/ 变迁/ 集/ ;/ (/ 3/ )/ TTC/ =/ T/ ,/ TTC/ =/ TI/ 入/ 变迁/ 集合/ ,/ 描述/ 测试/ 输入/ 的/ 提供/ ;/ TO/ 集合/ ,/ 描述/ 测试/ 输出/ 结果/ 的/ 呈现/ ;/ TV/ 迁/ 集合/ ,/ 判断/ 实际/ 输出/ 是否/ 与/ 预期/ 输出/ 相同/ ,/ 并/ 产生/ 测试/ 判定/ 结果/ ;/ 各/ 变迁/ 集合/ 彼此间/ 交集/ 为空/ ;/ covered/ 同时/ 存在/ 表示/ 覆盖/ 了/ 测试/ 目的/ 的/ 测试/ 执行/ 成功/ 通过/ ;/ PE/ 态/ ;/ 各/ 位置/ 集合/ 彼此间/ 交集/ 为空/ ;/ (/ 4/ )/ CT/ -/ CPNTC/ 是/ 行为/ 有限/ 的/ ,/ 即/ / n/ ∈/ N/ ,/ / σ/ ∈/ trace/ (/ CT/ -/ CPNTC/ )/ :/ |/ σ/ |/ </ n/ ./ 以/ 简单/ 文件传输/ 协议/ 为例/ ,/ 将/ 图/ 2/ 给出/ 的/ 系统/ CT/ -/ CPNS/ 和/ 图/ 3/ 给出/ 的/ 测试/ 目的/ CT/ -/ CPNTP/ 同步/ 模拟/ 执行/ ,/ 可/ 生成/ 图/ 4/ 所示/ 的/ CT/ -/ CPNTC/ 测试/ 例/ 模型/ ,/ 用于/ 测试/ CT/ -/ CPNTP/ 模型/ 描述/ 的/ 那些/ 软件/ 行为/ 是否/ 被/ 正确/ 实现/ ./ 测试/ 例/ 模型/ 的/ 具体/ 生成/ 过程/ 如下/ :/ 图/ 4/ 简单/ 文件传输/ 协议/ 的/ 第/ 1/ 个/ CT/ -/ CPNTC/ 模型/ (/ 1/ )/ 设置/ MS/ 与/ MTP/ :/ MS/ (/ rv/ )/ =/ {/ 1/ (/ req/ ,/ 2/ ,/ “/ ”/ )/ }/ ,/ MS/ (/ set/ )/ =/ {/ [/ (/ 1/ ,/ “/ one/ ”/ )/ ,/ (/ 2/ ,/ “/ two/ ”/ )/ ]/ }/ ,/ MS/ (/ ssn/ )/ =/ {/ [/ 1/ ,/ 2/ ]/ }/ ,/ MS/ (/ sp/ )/ =/ {/ [/ 1/ ,/ 2/ ,/ 3/ ,/ 4/ ]/ }/ ;/ MTP/ (/ rv/ )/ =/ {/ 1/ (/ req/ ,/ 2/ ,/ “/ ”/ )/ }/ ,/ MTP/ (/ set/ )/ =/ {/ [/ (/ 2/ ,/ “/ two/ ”/ )/ ]/ }/ ;/ (/ 2/ )/ 应用/ 规则/ 1/ 处理/ 输入/ 变迁/ recv/ :/ 将/ 关联/ 的/ 绑定/ 元素/ (/ recv/ ,/ {/ p/ =/ (/ req/ ,/ 2/ ,/ “/ ”/ )/ }/ )/ 执行/ 同步/ 模拟/ ,/ 生成/ 测试/ 例/ 模型/ 中/ 的/ 输入/ 位置/ rv/ 与/ 输入/ 变迁/ recv/ ,/ 并/ 添加/ 内部/ 位置/ sn/ 作为/ recv/ 的/ 后集/ ,/ 且/ MTC/ (/ rv/ )/ =/ {/ 1/ (/ req/ ,/ 2/ ,/ “/ ”/ )/ }/ ;/ (/ 3/ )/ 应用/ 规则/ 2/ 处理/ 内部/ 变迁/ search/ :/ 在/ CT/ -/ CPNS/ 模型/ 中/ ,/ 该/ 变迁/ 先后/ 关联/ 了/ 绑定/ 元素/ (/ search/ ,/ {/ n/ =/ 2/ ,/ ds/ =/ [/ (/ 1/ ,/ “/ one/ ”/ )/ ,/ (/ 2/ ,/ “/ two/ ”/ )/ ]/ }/ )/ 和/ (/ search/ ,/ {/ n/ =/ 2/ ,/ ds/ =/ [/ (/ 2/ ,/ “/ two/ ”/ )/ ,/ (/ 1/ ,/ “/ one/ ”/ )/ ]/ }/ )/ ,/ 而/ 在/ CT/ -/ CPNTP/ 模型/ 中/ ,/ 该/ 变迁/ 只/ 与/ 绑定/ 元素/ (/ search/ ,/ {/ n/ =/ 2/ ,/ en/ =/ (/ 2/ ,/ “/ two/ ”/ )/ }/ )/ 相关联/ ,/ 因此/ ,/ CT/ -/ CPNS/ 模型/ 中/ 的/ search/ 变迁/ 被/ 点火/ 执行/ 两次/ ,/ 第/ 1/ 次/ 是/ 独立/ 执行/ ,/ 第/ 2/ 次/ 与/ CT/ -/ PNTP/ 模型/ 同步/ 模拟/ 执行/ ,/ 且/ MS/ (/ nd/ )/ =/ MTP/ (/ nd/ )/ =/ {/ (/ 2/ ,/ “/ two/ ”/ )/ }/ ;/ (/ 4/ )/ 应用/ 规则/ 3/ 处理/ 输出/ 变迁/ send/ :/ 将/ 绑定/ 元素/ (/ send/ ,/ {/ n/ =/ 2/ ,/ d/ =/ “/ two/ ”/ }/ )/ 和/ (/ send/ ,/ {/ en/ =/ (/ 2/ ,/ “/ two/ ”/ )/ }/ )/ 执行/ 同步/ 模拟/ ,/ 得到/ MS/ (/ sd/ )/ =/ {/ (/ rep/ ,/ 2/ ,/ “/ two/ ”/ )/ }/ ,/ MTP/ (/ ph/ )/ =/ {/ covered/ }/ ,/ 标志/ 着/ 测试/ 目的/ 覆/ Page7/ 盖/ 的/ 行为/ 路径/ 正常/ 执行/ ./ 在/ 测试/ 例/ 模型/ 中/ 生成/ 输出/ 变迁/ send/ 及/ 可/ 观察/ 位置/ ar/ ,/ 并/ 为/ ar/ 构建/ 由/ 预期/ 结果/ 指示/ 位置/ rr/ 、/ 测试/ 判定/ 变迁/ vt/ 及/ 测试/ 结果/ 指示/ 位置/ vd/ 构成/ 的/ 测试/ 判定/ 单元/ ,/ 且/ MTC/ (/ rr/ )/ =/ MS/ (/ sd/ )/ =/ {/ (/ rep/ ,/ 2/ ,/ “/ two/ ”/ )/ }/ ,/ 测试/ 判定/ 变迁/ vt/ 的/ 输出/ 弧/ 表达式/ 清楚/ 地/ 描述/ 了/ 测试/ 判定/ 标准/ ,/ 即/ 如果/ 在/ 实际/ 测试/ 过程/ 中/ 观察/ 到/ 了/ 报文/ (/ rep/ ,/ 2/ ,/ “/ two/ ”/ )/ 的/ 产生/ ,/ 则/ 说明/ 被/ 测系统/ 在/ 执行/ 测试/ 目的/ 所/ 约束/ 的/ 行为/ 路径/ 时/ ,/ 符合/ 系统/ 功能/ 模型/ 的/ 预期/ 定义/ ;/ 最后/ ,/ 将/ 测试/ 例/ 模型/ 中/ 的/ 输出/ 变迁/ send/ 与/ 内部/ 位置/ sn/ 关联/ ,/ 即/ pre/ (/ send/ )/ =/ sn/ ,/ 保证/ 了/ 模型/ 的/ 连通/ ./ 由此可知/ ,/ PN4TS/ 方法/ 以/ 实际/ 测试数据/ 驱动/ 测试/ 例/ 的/ 选择性/ 生成/ ,/ 充分保证/ 测试/ 例/ 的/ 可执行性/ ;/ CT/ -/ CPNTC/ 模型/ 准确/ 、/ 清晰/ 地/ 描述/ 了/ 测试/ 流程/ 及/ 测试/ 判定/ 标准/ ,/ 能够/ 直观/ 、/ 有效/ 地/ 指导/ 实际/ 测试/ 执行/ ./ 5.3/ 测试/ 生成/ 的/ 可靠性/ 和/ 覆盖/ 完备/ 性/ 证明/ 定理/ 1/ ./ 给定/ ss/ ∈/ CT/ -/ CPNS/ ,/ tp/ ∈/ CT/ -/ CPNTP/ ,/ 将/ 通过/ PN4TS/ 方法/ 生成/ 的/ 测试/ 例/ 全集/ 记为/ TS/ ,/ 即/ 存在/ 测试/ 选择函数/ TestSel/ :/ CT/ -/ CPNS/ ×/ CT/ -/ CPNTP/ →/ CT/ -/ CPNTC/ ,/ 满足/ TestSel/ (/ ss/ ,/ tp/ )/ / TS/ ,/ 则/ TestSel/ 对/ PN/ -/ IOCO/ 是/ 可靠/ 的/ ./ 证明/ ./ 采用/ 反证法/ 进行/ 定理/ 1/ 的/ 证明/ ./ 设/ ss/ 对应/ 的/ 任/ 一个/ 被测/ 实现/ 为/ ii/ ∈/ CT/ -/ CPNI/ ,/ 假设/ 存在/ 测试/ 例/ tt/ ∈/ TestGen/ (/ s/ )/ ,/ 使得/ not/ (/ ii/ 狆/ 犪/ 狊/ 狊/ tt/ )/ 且/ ii/ 犘/ 犖/ -/ 犐/ 犗/ 犆/ 犗/ ss/ ,/ 即/ 被/ 测/ 实现/ ii/ 一致/ 于/ 软件/ 功能/ 模型/ ss/ ,/ 但/ 却/ 未能/ 通过/ 由/ TestSel/ 方法/ 生成/ 的/ 一个/ 测试/ 例/ tt/ ./ 那么/ :/ not/ (/ ii/ 狆/ 犪/ 狊/ 狊/ tt/ )/ / / p/ ∈/ PV/ / / r/ ∈/ PO/ / / σ/ ∈/ SPtrace/ (/ MS/ )/ :/ tokens/ (/ MIfires/ σ/ )/ ≠/ tokens/ (/ MSfires/ σ/ )/ ,/ M/ (/ r/ )/ / (/ MIfires/ σ/ )/ ,/ M/ (/ q/ )/ / (/ MSfires/ σ/ )/ [/ 存在/ 一条/ 路径/ σ/ ,/ 在/ 其/ 点火/ 执行/ 过程/ 中/ ,/ 位置/ r/ 上/ 的/ 实际/ 输出/ 不同于/ 预期/ 结果/ 指示/ 位置/ q/ 上/ 的/ 数据/ ]/ 该/ 结论/ 与/ ii/ 犘/ 犖/ -/ 犐/ 犗/ 犆/ 犗/ ss/ 假设/ 出现/ 矛盾/ ,/ 故/ 如果/ 存在/ 未/ 通过/ 的/ 测试/ 例/ ,/ 则/ 被/ 测/ 软件系统/ 一定/ 存在/ 和/ 软件/ 功能/ 模型/ 不/ 一致/ 的/ 错误/ 或/ 缺陷/ ,/ 即/ 通过/ 执行/ TestSel/ 所/ 生成/ 的/ 测试/ 例来/ 判定/ 一致性/ 是/ 可靠/ 的/ ./ 定理/ 2/ ./ 给定/ ss/ ∈/ CT/ -/ CPNS/ ,/ tp/ ∈/ CT/ -/ CPNTP/ ,/ 将/ 通过/ PN4TS/ 方法/ 生成/ 的/ 测试/ 例/ 全集/ 记为/ TS/ ,/ 即/ 存在/ 测试/ 选择函数/ TestSel/ :/ CT/ -/ CPNS/ ×/ CT/ -/ CPNTP/ →/ CT/ -/ CPNTC/ ,/ 满足/ TestSel/ (/ ss/ ,/ tp/ )/ / TS/ ,/ 则/ TestSel/ 对/ tp/ 的/ 覆盖/ 是/ 完备/ 的/ ./ CT/ -/ CPNI/ :/ ii/ 犮/ 狅/ 狏/ 犲/ 狉/ -/ 狆/ 犪/ 狊/ 狊/ tt/ =/ def/ 证明/ ./ 设/ ss/ 对应/ 的/ 任意/ 被/ 测系统/ 实现/ 为/ ii/ ∈/ ii/ 狆/ 犪/ 狊/ 狊/ tt/ ∧/ / p/ ∈/ PV/ / / p/ ∈/ PV/ / / σ/ ∈/ SPtrace/ (/ MS/ ‖/ MTP/ )/ :/ tokens/ (/ MTPfires/ σ/ )/ / tokens/ (/ MSfires/ σ/ )/ ∧/ tokens/ (/ MSfires/ σ/ )/ =/ tokens/ (/ MIfires/ σ/ )/ [/ 对/ CT/ -/ CPNTP/ 与/ CT/ -/ CPNS/ 同步/ 模拟/ 执行/ 所/ 生成/ 的/ 任意/ 执行/ 路径/ σ/ ,/ 实际/ 输出/ 与/ 预期/ 输出/ 结果/ 相同/ ]/ / / σ/ ∈/ SPtrace/ (/ MTP/ )/ :/ tokens/ (/ MTPfires/ σ/ )/ / tokens/ (/ MIfires/ σ/ )/ [/ 被/ 测系统/ 覆盖/ 了/ 测试/ 目的/ 描述/ 的/ 系统/ 行为/ ]/ 证毕/ ./ 综上/ 证明/ ,/ 通过/ PN4TS/ 方法/ 生成/ 的/ 测试/ 例是/ 可靠/ 的/ ,/ 并且/ 对/ 具体/ 测试/ 目的/ 的/ 覆盖/ 是/ 完备/ 的/ ./ 具体/ 而言/ ,/ 在/ 实际/ 测试/ 执行/ 时/ ,/ 如果/ 一个/ 测试/ 例/ 的/ 执行/ 失败/ ,/ 不管/ 其/ 是否/ 覆盖/ 了/ 测试/ 目的/ ,/ 都/ 说明/ 被测/ 软件/ 存在/ 与/ 软件/ 功能/ 说明/ 不/ 一致/ 的/ 错误/ 或/ 缺陷/ ;/ 相反/ 地/ ,/ 如果/ 测试/ 例/ 成功/ 执行/ ,/ 虽然/ 不能/ 给出/ 被测/ 软件/ 实现/ 一致/ 于/ 软件/ 功能/ 说明/ 的/ 结论/ ,/ 却/ 可以/ 保证/ 这样/ 的/ 测试/ 执行/ 是/ 针对/ 测试/ 目的/ 所/ 描述/ 的/ 系统/ 行为/ 的/ ,/ 增强/ 了/ 测试者/ 对/ “/ 测试/ 目的/ 所/ 覆盖/ 的/ 软件/ 功能/ 在/ 被/ 测/ 软件/ 中/ 被/ 正确/ 实现/ ”/ 的/ 判断/ ./ 6/ 实例/ 分析/ 上文/ 使用/ 简单/ 文件传输/ 协议/ 例示/ 了/ PN4TS/ 方法/ 的/ 应用/ 过程/ ,/ 重点/ 步骤/ 包括/ 协议/ 的/ CT/ -/ CPNS/ 建模/ (/ 如图/ 2/ )/ 、/ 测试/ 目的/ 的/ CT/ -/ CPNTP/ 建模/ (/ 如图/ 3/ )/ 、/ 基于/ 这/ 两个/ 模型/ 的/ 同步/ 模拟/ 执行/ 生成/ 可/ 执行/ 测试/ 例/ CT/ -/ CPNTC/ 模型/ (/ 如图/ 4/ )/ ./ 本节/ 首先/ 给出/ 简单/ 文件传输/ 协议/ 的/ 实际/ 测试/ 执行/ 过程/ ,/ 以此/ 证实/ PN4TS/ 方法/ 的/ 有效性/ ,/ 即/ 所/ 生成/ 的/ 测试/ 例/ 具有/ 预期/ 良好/ 的/ 错误/ 检测/ 能力/ ./ 之后/ ,/ 结合/ 数字/ 内容/ 点对点/ 网络/ 分发/ 软件/ (/ 简记/ 为/ DCP2ND/ )/ 的/ 实际/ 测试/ 选择/ 和/ 测试/ 执行/ 实践/ ,/ 说明/ PN4TS/ 方法/ 在/ 处理/ 较/ 大规模/ 软件系统/ 的/ 一致性/ 测试/ 应用/ 时/ ,/ 同样/ 具有/ 较/ 好/ 的/ 可用性/ 及/ 有效性/ ./ 最后/ 小结/ PN4TS/ 方法/ 的/ 实际/ 应用/ 方式/ ./ 6.1/ 简单/ 文件传输/ 协议/ 的/ 测试/ 执行/ SFTP/ 系统/ 的/ 主要/ 功能/ 包括/ :/ (/ 1/ )/ 对/ 等/ 实体/ 接收/ 到/ 片段/ 请求/ 后/ ,/ 按/ 所/ 请求/ 片段/ 的/ 序号/ 在/ 已有/ 片段/ 集合/ 中/ 检索/ ,/ 并/ 将/ 匹配/ 的/ 文件/ 片段/ 传输/ 给/ 请求/ 方/ ;/ (/ 2/ )/ 对/ 等/ 实体/ 接收/ 到/ 所/ 请求/ 的/ 片段/ 时/ ,/ 先/ 将/ 其/ 存储/ Page8/ 至/ 已有/ 片段/ 集合/ 中/ ,/ 并/ 查询/ 未有/ 片段/ 序号/ 后/ 对/ 其/ 发起/ 新/ 的/ 片段/ 请求/ ./ 图/ 3/ 所示/ 的/ CT/ -/ CPNTP/ 模型/ 和/ 图/ 4/ 所示/ 的/ CT/ -/ CPNTC/ 模型/ 关注/ 于/ 上述/ 第/ 1/ 个/ 功能/ 的/ 一致性/ 测试/ ./ 下面/ 将/ 针对/ 上述/ 第/ 2/ 个/ 功能/ 进行/ 测试/ 生成/ ./ 首先/ ,/ 构建/ 如图/ 5/ 所示/ 的/ CT/ -/ CPNTP/ 模型/ ,/ 描述/ 了/ 第/ 2/ 个/ 功能/ 对应/ 的/ 软件/ 行为/ ,/ 其中/ ,/ 对/ 等/ 实体/ 接收/ 到/ 所/ 请求/ 片段/ 的/ 行为/ 由/ 防卫/ 表达式/ [/ (/ #/ 1p/ )/ =/ rep/ ]/ 来/ 约束/ ,/ 而/ 对/ 未有/ 片段/ 发起/ 新/ 请求/ 的/ 行为/ 由/ 防卫/ 表达式/ [/ not/ (/ List/ ./ null/ (/ listsubss2ss1/ )/ )/ ]/ 来/ 约束/ (/ 该/ 表达式/ 描述/ 了/ 还/ 存在/ 需要/ 请求/ 的/ 片段/ 集/ )/ ./ 图/ 5/ 简单/ 文件传输/ 协议/ 的/ 第/ 2/ 个/ CT/ -/ CPNTP/ 模型/ 将/ 图/ 2/ 给出/ 的/ CT/ -/ CPNS/ 和/ 图/ 5/ 给出/ 的/ CT/ -/ CPNTP/ 执行/ 同步/ 模拟/ ,/ 生成/ 图/ 6/ 所示/ 的/ CT/ -/ CPNTC/ 测试/ 例/ 模型/ ,/ 用于/ 针对/ 第/ 2/ 个/ 功能/ 的/ 一致性/ 测试/ ./ 具体/ 生成/ 测试/ 例时/ ,/ 首先/ 设置/ MS/ 与/ MTP/ :/ MS/ (/ rv/ )/ =/ {/ 1/ (/ rep/ ,/ 2/ ,/ “/ two/ ”/ )/ }/ ,/ MS/ (/ set/ )/ =/ {/ [/ (/ 1/ ,/ “/ one/ ”/ )/ ]/ }/ ,/ MS/ (/ ssn/ )/ =/ {/ [/ 1/ ]/ }/ ,/ MS/ (/ sp/ )/ =/ {/ [/ 1/ ,/ 2/ ,/ 3/ ,/ 4/ ]/ }/ ;/ MTP/ (/ rv/ )/ =/ {/ 1/ (/ rep/ ,/ 2/ ,/ “/ two/ ”/ )/ }/ ,/ MTP/ (/ set/ )/ =/ {/ [/ (/ 1/ ,/ “/ one/ ”/ )/ ]/ }/ ./ 之后/ ,/ 分别/ 应用/ 规则/ 1/ 处理/ 输入/ 变迁/ recv/ ,/ 应用/ 规则/ 3/ 处理/ 输出/ 变迁/ store/ 和/ newreq/ 即可/ ,/ 具体/ 过程/ 不再/ 赘述/ ./ 可以/ 看到/ ,/ 预期/ 结果/ 指示/ 位置/ MTC/ (/ rset/ )/ =/ {/ [/ (/ 1/ ,/ “/ one/ ”/ )/ ,/ (/ 2/ ,/ “/ two/ ”/ )/ ]/ }/ ,/ 且/ MTC/ (/ rsd/ )/ =/ {/ 1/ (/ req/ ,/ 3/ ,/ “/ ”/ )/ }/ ,/ 标志/ 着/ 对/ 等/ 实体/ 应该/ 接收/ 到/ 所/ 请求/ 片段/ (/ 2/ ,/ “/ two/ ”/ )/ ,/ 并/ 生成/ 对/ 3/ 号/ 片段/ 的/ 新/ 请求/ 报文/ (/ req/ ,/ 3/ ,/ “/ ”/ )/ ,/ 作为/ TestOracle/ 指导/ 测试/ 执行/ ./ 图/ 6/ 简单/ 文件传输/ 协议/ 的/ 第/ 2/ 个/ CT/ -/ CPNTC/ 模型/ SFTP/ 系统/ 的/ 测试/ 执行/ 过程/ 为/ :/ 首先/ ,/ 利用/ 错误/ 注入/ (/ ErrorInjection/ )/ 的/ 方法/ ,/ 实现/ 了/ 5/ 个/ 含有/ 已知/ 代码/ 错误/ 、/ 2/ 个/ 功能/ 不/ 完整/ 、/ 1/ 个/ 功能/ 完整/ 且/ 正确/ 的/ SFTP/ 软件/ ,/ 都/ 作为/ 被/ 测系统/ 实现/ (/ SystemUnderTesting/ )/ ,/ 具体/ 描述/ 见表/ 1/ ./ 之后/ ,/ 对/ 各/ 版本/ 的/ 被/ 测/ 实现/ ,/ 按照/ 图/ 4/ 和/ 图/ 6/ 给出/ 的/ 测试/ 例/ 模型/ (/ 对应/ 表/ 1/ 中/ 的/ tc1/ 和/ tc2/ )/ 完成/ 一致性/ 测试/ 执行/ ,/ 若/ 其/ 能够/ 检测/ 出/ 被/ 测系统/ 实现/ 中/ 注入/ 的/ 错误/ 或/ 缺陷/ ,/ 则/ 说明/ 利用/ PN4TS/ 方法/ 执行/ 一致性/ 测试/ 是/ 可靠/ 的/ ./ 表/ 1SFTP/ 系统/ 的/ 被/ 测/ 实现/ 及/ 测试/ 结果/ 描述/ 被测/ 协议/ 实现/ :/ i1/ 完全正确/ 正确/ 实现/ 了/ 所有/ 的/ 协议/ 功能/ i2/ 错误/ 不能/ 正确/ 发送/ 被/ 请求/ 的/ 片段/ i3/ 错误/ 依/ 序号/ 检索/ 片段/ 时/ ,/ 不能/ 正确/ 匹配/ i4/ 错误/ 不能/ 正确/ 存储/ 接收/ 到/ 的/ 片段/ i5/ 错误/ 不能/ 正确/ 计算/ 需要/ 请求/ 哪个/ 新/ 片段/ i6/ 错误/ 不能/ 正确/ 解析/ 接收/ 到/ 的/ 各类/ 报文/ i7/ 部分/ 正确/ 片段/ 检索/ 功能/ 未/ 实现/ i8/ 部分/ 正确/ 片段/ 存储/ 功能/ 未/ 实现/ 测试/ 结果/ :/ tc1/ 狆/ 犪/ 狊/ 狊/ failfail/ 狆/ 犪/ 狊/ 狊/ 狆/ 犪/ 狊/ 狊/ failfail/ 狆/ 犪/ 狊/ 狊/ tc2/ 狆/ 犪/ 狊/ 狊/ 狆/ 犪/ 狊/ 狊/ 狆/ 犪/ 狊/ 狊/ failfailfail/ 狆/ 犪/ 狊/ 狊/ fail/ 分析/ 表/ 1/ 给出/ 的/ 测试/ 结果/ :/ i1/ 通过/ 所有/ 测试/ ;/ i2/ 和/ i3/ 未能/ 通过/ tc1/ 的/ 测试/ 但/ 通过/ 了/ tc2/ 的/ 测试/ ,/ 原因/ 在于/ i2/ 和/ i3/ 中/ 的/ 实现/ 错误/ 被/ tc1/ 所/ 描述/ 的/ 测试/ 执行/ 路径/ 所/ 覆盖/ (/ 导致/ 测试/ 结果/ 指示/ 位置/ vd/ 上/ 生成/ 了/ 值/ 为/ fail/ 的/ token/ 数据/ )/ ,/ 而/ 未/ 被/ tc2/ 所/ 描述/ 的/ 测试/ 执行/ 路径/ 所/ 覆盖/ ./ 同理/ ,/ i4/ 和/ i5/ 未能/ 通过/ tc2/ 的/ 测试/ 但/ 通过/ 了/ tc1/ 的/ 测试/ ./ i6/ 未/ 通过/ 所有/ 的/ 测试/ ,/ 是因为/ 其/ 存在/ 的/ 实现/ 错误/ 同时/ 被/ tc1/ 和/ tc2/ 所/ 描述/ 的/ 测试/ 执行/ 路径/ 所/ 覆盖/ ./ i7/ 不/ 支持/ 在/ 已有/ 片段/ 集合/ 中/ 按/ 序号/ 进行/ 片段/ 检索/ 的/ 功能/ ,/ 所以/ 在/ 实际/ 测试/ 中/ 并未/ 观察/ 到/ 预期/ 报文/ 的/ 产生/ ,/ 而/ 导致/ tc1/ 测试/ 失败/ ,/ 但/ tc2/ 并未/ 测试/ 这个/ 功能/ ,/ 故/ tc2/ 测试通过/ ./ 同理/ ,/ i8/ 导致/ tc2/ 测试/ 失败/ ,/ 但/ tc1/ 测试通过/ ./ 这样/ ,/ 综合/ tc1/ 和/ tc2/ 的/ 测试/ 结果/ ,/ 我们/ 判定/ 除/ 被/ 测系统/ i1/ 外/ ,/ 其他/ 协议/ 实现/ 均/ 与/ 协议/ 功能/ 模型/ 不/ 一致/ ./ 综上/ 分析/ ,/ 利用/ PN4TS/ 方法/ 生成/ 的/ 测试/ 例/ 不但/ 能够/ 检测/ 出/ 被/ 测系统/ 中/ 的/ 实现/ 错误/ ,/ 还/ 能/ 检测/ 出/ 那些/ 行为/ 正确/ 但/ 功能/ 不/ 完整/ 的/ 缺陷/ 系统/ ,/ 证实/ 了/ PN4TS/ 方法/ 的/ 有效性/ 和/ 优势/ 所在/ ,/ 且/ 利用/ 该/ 方法/ 执行/ 软件系统/ 的/ 功能/ 一致性/ 测试/ 会/ 更加/ 可靠/ ./ 6.2/ DCP2ND/ 系统/ 的/ 测试/ 生成/ 及/ 测试/ 执行/ 本节/ 以/ 作者/ 所在/ 课题组/ 研发/ 的/ DCP2ND/ 软件系统/ 为/ 实践/ 对象/ ,/ 利用/ PN4TS/ 方法/ 完成/ 该/ 系统/ 的/ 一致性/ 测试/ 实践/ ,/ 用以/ 检测/ 该/ 软件系统/ 设计/ 和/ 实现/ 中/ 存在/ 的/ 错误/ 和/ 缺陷/ ,/ 但/ 更/ 重要/ 是/ 为了/ 验证/ PN4TS/ 方法/ 在/ 处理/ 较/ 大规模/ 软件系统/ 的/ 一致性/ 测试/ 应用/ 时/ Page9/ 的/ 可用性/ ,/ 说明/ 利用/ PN4TS/ 方法/ 执行/ 较/ 大规模/ 软件系统/ 的/ 一致性/ 测试/ 同样/ 是/ 可靠/ 的/ ./ DCP2ND/ 软件系统/ 遵照/ BitTorrent/ 协议/ [/ 28/ ]/ 实现/ 数字/ 内容/ 在/ 互联网/ 中/ 的/ 快速/ 分发/ 和/ 共享/ ./ BitTorrent/ 协议/ 以其易/ 部署/ 、/ 强/ 容错/ 、/ 高/ 分发/ 效率/ 等/ 优势/ 成为/ 大量/ P2P/ (/ Peer/ -/ to/ -/ Peer/ )/ 应用/ 所/ 采用/ 的/ 主流/ 协议/ ./ Bit/ -/ Torrent/ 协议/ 包括/ 三类/ 结点/ :/ 下载者/ (/ Leecher/ )/ 、/ 种子/ 结点/ (/ Seed/ )/ 和/ 索引/ 服务器/ (/ Tracker/ )/ ,/ 协议/ 将/ 共享/ 的/ 资源/ 文件/ 切/ 分为/ 等长/ 的/ 片段/ (/ Piece/ )/ 进行/ 分发/ ,/ 每个/ 结点/ 从/ 其他/ 结点/ 下载/ 片段/ 的/ 同时/ 也/ 为/ 别人/ 提供/ 片段/ 的/ 上传/ ./ 协议/ 基本/ 工作/ 流程/ 为/ :/ 首先/ ,/ 下载者/ 与/ 索引/ 服务器/ 交互/ ,/ 获取/ 可/ 提供/ 所/ 需/ 片段/ 的/ 种子/ 或/ 其他/ 下载者/ 列表/ 及/ 各/ 结点/ 的/ 索引/ 信息/ ,/ 如/ 结点/ 标识/ 、/ IP/ 和/ 端口/ 等/ ;/ 之后/ ,/ 该/ 下载者/ 按/ 一定/ 的/ 片段/ 选择/ 算法/ 选择/ 其中/ 部分/ 结点/ 进行/ 握手/ 连接/ ,/ 并/ 通过/ 交换/ 位/ 图/ (/ bitmap/ )/ 获知/ 其/ 拥有/ 的/ 片段/ 信息/ ;/ 最后/ ,/ 向/ 成功/ 建立/ 连接/ 的/ 各/ 结点/ 逐片/ 请求/ 并/ 传输/ 片段/ 数据/ ,/ 可/ 运行/ 阻塞/ (/ choking/ )/ 算法/ 提高/ 传输/ 性能/ 和/ 公平性/ ./ 在/ 成功/ 下载/ 一个/ 片段/ 后要/ 告知/ 所/ 连接/ 的/ 邻居/ 结点/ ,/ 而/ 当/ 整个/ 文件/ 下载/ 完成/ 时/ ,/ 该/ 下载者/ 变为/ 种子/ 结点/ ,/ 并/ 继续/ 为/ 其他/ 下载者/ 提供/ 片段/ 的/ 上传/ ./ 这种/ 对/ 等/ 结点/ 间/ 的/ 共享/ 行为/ 充分利用网络/ 带宽/ 和/ 结点/ 能力/ 加速/ 了/ 文件/ 下载/ 和/ 资源共享/ ./ 在/ DCP2ND/ 软件系统/ 实现/ 中/ ,/ 同样/ 包含/ 下载者/ 、/ 种子/ 结点/ 和/ 索引/ 服务器/ 三种/ 实体/ 结点/ ,/ 并/ 按/ 上述/ BitTorrent/ 协议/ 的/ 基本/ 工作/ 流程/ 实现/ 文件共享/ ./ 本节/ 设置/ DCP2ND/ 软件系统/ 的/ 运行/ 场景/ 如下/ :/ 新/ 加入/ 的/ Leecher/ 结点/ L1/ ~/ L2/ 与/ 已/ 存在/ 的/ Leecher/ 结点/ L3/ ~/ L8/ ,/ 以及/ Seed/ 结点/ 之间/ 共享/ 单一/ 文件/ 的/ 10/ 个/ piece/ 片段/ (/ p1/ ~/ p10/ )/ ./ 其中/ ,/ Seed/ 拥有/ 全部/ 片段/ ,/ L3/ ~/ L8/ 各自/ 已有/ 部分/ 片段/ ,/ 但/ 片段/ p10/ 仍仅/ 种子/ 结点/ 才/ 有/ ./ 这样/ ,/ L1/ 从/ 种子/ 结点/ 下载/ 片段/ p10/ (/ 最少/ 优先/ 的/ 片段/ 选择/ )/ 后/ ,/ L1/ 和/ L2/ 将/ 从/ Seed/ 或/ 其他/ 下载者/ 结点/ 下载/ 全部/ 片段/ ;/ 而/ L3/ ~/ L8/ 也/ 从/ Seed/ 或/ 其他/ 下载者/ 结点/ 下载/ 所缺/ 的/ 片段/ ,/ 直至/ 所有/ 下载者/ 结点/ 都/ 变为/ 种子/ ./ 上述/ 场景/ 设置/ 已/ 涵盖/ 了/ DCP2ND/ 软件系统/ 的/ 所有/ 主要/ 功能/ ,/ 可以/ 作为/ 对/ 其/ 进行/ 功能/ 一致性/ 测试/ 的/ 应用/ 场景/ ./ 际/ 的/ 测试/ 生成/ 及/ 测试/ 执行/ ,/ 具体步骤/ 概述/ 如下/ ./ 步骤/ 1/ ./ 生成/ 描述/ 该软件/ 功能/ 行为/ 的/ CT/ -/ CPNS/ 层次模型/ ,/ 包括/ 15/ 个/ CPN/ 模块/ ,/ 分别/ 描述/ 了/ 整体/ 运行/ 结构/ (/ Top/ )/ ,/ 3/ 种/ 实体/ 结点/ 的/ 行为/ 执行/ 总体/ 流程/ (/ Tracker/ // Seed/ // Leecher/ )/ 、/ 实体/ 间通信/ 报文/ 处理/ 行/ 利用/ PN4TS/ 方法/ 对/ DCP2ND/ 软件系统/ 执行/ 实为/ (/ S/ _/ send/ // S/ _/ reveive/ // L/ _/ send/ // L/ _/ receive/ )/ 和/ 实体/ 内部/ 的/ 具体/ 功能/ 事务处理/ (/ 详见/ 表/ 2/ 中/ 的/ 模块/ 描述/ )/ ./ 作为/ 例示/ ,/ 图/ 7/ 给出/ 了/ 描述/ 下载者/ 结点/ 行为/ 执行/ 整体/ 流程/ 的/ CT/ -/ CPNS/ 模块/ Leecher/ ,/ 即/ 描述/ 了/ 请求/ 可用/ 节点/ 列表/ 及/ 解析/ 、/ 与/ 种子/ 节点/ 或/ 其他/ 下载者/ 间/ 请求/ 和/ 收发/ 文件/ 片段/ 等/ 功能/ 间/ 的/ 关联/ 关系/ ./ 表/ 2DCP2ND/ 软件/ CT/ -/ CPNS/ 层次模型/ 中/ 的/ 模块/ 描述/ TopTracker/ 索引/ 服务器/ 行为/ 执行/ 总体/ 流程/ Generatelist/ 生成/ 下载者/ 请求/ 的/ 可用/ 结点/ 列表/ SeedS/ _/ send/ 根据/ 握手/ 协议/ 处理/ 下载者/ 的/ 连接/ 请求/ S/ _/ receive/ 接收/ 并/ 处理/ 下载者/ 的/ 片段/ 请求/ s/ _/ sendpk/ 发送/ 下载者/ 请求/ 的/ 片段/ s/ _/ choking/ 种子/ 结点/ 执行/ choking/ 算法/ Leecher/ 下载者/ 结点/ 行为/ 执行/ 总体/ 流程/ L/ _/ send/ 与/ 其他/ 下载者/ 握手/ 连接/ 并/ 发送/ 位图/ L/ _/ receive/ 接收/ 到/ 不同/ 类型/ 报文/ 时分/ 派/ 处理/ l/ _/ reqhandle/ 解析/ 位图/ 并/ 触发/ 未有/ 片段/ 请求/ l/ _/ sendpk/ 接收/ 其他/ 结点/ 片段/ 请求/ 并/ 发送/ 该/ 片段/ l/ _/ havepk/ 接收/ 所/ 请求/ 的/ 片段/ 并/ 触发/ 新/ 片段/ 请求/ l/ _/ choking/ 下载者/ 结点/ 执行/ choking/ 算法/ 结点/ 的/ 连接/ 参数/ 片段/ 信息/ 消息/ (/ 如/ :/ 向/ L4/ 随机/ 请求/ 一个/ 文件/ 片段/ )/ p10/ )/ 有/ 片段/ 信息/ 的/ 数据结构/ 序号/ tp1L1/ 对/ 索引/ 服务器/ 发来/ 的/ 可用/ 结点/ 列表/ 进行/ 解析/ ,/ 获得/ 可用/ tp2L1/ 接收/ 位/ 图报/ 文/ (/ L3/ 发送/ 的/ )/ ,/ 解析/ 该报/ 文/ 获得/ L3/ 的/ 已有/ tp3L1/ 向/ L3/ 发送/ interested/ 消息/ ,/ 并/ 接收/ L3/ 返回/ 的/ unchokingtp4L1/ 与/ 已/ 连接/ 的/ 下载者/ 执行/ 随机/ 第一片/ 的/ 片段/ 选择/ 算法/ tp5L1/ 执行/ 最少/ 优先/ 的/ 片段/ 选择/ 算法/ (/ 向/ Seed/ 请求/ 文件/ 片段/ tp6L1/ 接收/ 含/ 片段/ p10/ 的/ 数据/ 报文/ (/ Seed/ 发送/ 的/ )/ ,/ 更新/ 存储/ 已/ tp7L1/ 生成/ 片段/ p5/ 的/ 请求/ 报文/ 并/ 向/ L5/ 发送/ tp8L1/ 接收/ 含/ 片段/ p5/ 的/ 数据/ 报文/ (/ L5/ 发送/ 的/ )/ ,/ 更新/ 存储/ 已有/ 片段/ 信息/ 的/ 数据结构/ ,/ 继续/ 生成/ 对/ 片段/ p6/ 的/ 请求/ 报文/ tp9L1/ 接收/ 片段/ p10/ 的/ 请求/ 报文/ (/ L2/ 发送/ 的/ )/ ,/ 检索/ 已有/ 片段/ 信息/ ,/ 并/ 为/ p10/ 片段/ 生成/ 数据/ 响应/ 报文/ 步骤/ 2/ ./ 以/ 软件/ CT/ -/ CPNS/ 层次模型/ 为/ 基础/ ,/ 可/ 生成/ 若干/ 典型/ CT/ -/ CPNTP/ 模型/ ,/ 如表/ 3/ 所述/ ,/ 描述/ 希望/ 被/ 实际/ 测试/ 的/ 软件/ 主要/ 功能/ 行为/ ./ 作为/ 例示/ ,/ 图/ 8/ 给出/ 了/ tp9/ 的/ CT/ -/ CPNTP/ 模型/ ,/ 其中/ storemsg/ 变迁/ 的/ 防卫/ 表达式/ [/ mem/ (/ #/ 3tmsg/ )/ 10/ ]/ 约束/ 了/ 该报/ 文/ 请求/ 操作/ 是/ 针对/ p10/ 片段/ 进行/ 的/ ;/ genpk/ 变迁/ 的/ 防卫/ 表达式/ [/ peerid2/ =/ pid/ (/ 2/ )/ ]/ 约束/ 了/ 该报/ 文/ 请求/ 来自/ 于/ L2/ ;/ check/ 变迁/ 的/ 防卫/ 表达式/ 约束/ 了/ L1/ 对/ 自身/ 已有/ 片段/ 的/ 检索/ 操作/ 也/ 是/ 针对/ p10/ 进行/ 的/ ./ 若/ 模型/ 中/ ph/ 位置/ 上/ 生成/ 一个/ 值为/ 犮/ 狅/ 狏/ 犲/ 狉/ 犲/ 犱/ 的/ token/ 数据/ ,/ 则/ 可/ 标识/ 测试/ 目的/ 所/ 描述/ 的/ 系统/ 功能/ 得以/ 正确/ 地/ 执行/ ,/ 即/ L1/ 为/ L2/ 生成/ 了/ 对/ p10/ 片段/ 的/ 数据/ 响应/ 报文/ ./ Page10/ 图/ 7DCP2ND/ 软件/ 层次/ CT/ -/ CPNS/ 模型/ 中/ 的/ 下载者/ 结点/ 行为/ 描述/ 模块/ 步骤/ 3/ ./ 对/ 每个/ CT/ -/ CPNTP/ ,/ 将/ 其/ 与/ 该软件/ 的/ CT/ -/ CPNS/ 层次模型/ 中/ 的/ 相关/ 模块/ 执行/ 同步/ 模拟/ ,/ 可/ 生成/ 具体/ 的/ CT/ -/ CPNTC/ 模型/ ,/ 用于/ 对/ 相应/ 测试/ 目的/ 所/ 覆盖/ 的/ 软件/ 功能/ 进行/ 一致性/ 测试/ ./ 生成/ 过程/ 中/ 使用/ 规则/ 1/ 和/ 规则/ 3/ 来/ 处理/ 输入输出/ 行为/ ,/ 重点/ 是/ 为/ 模型/ 中/ 的/ 可/ 观察/ 位置/ 添加/ 预期/ 结果/ 指示/ 位置/ ;/ 使用/ 规则/ 2/ 消去/ 大量/ 描述/ 软件/ 内部/ 行为/ 的/ 模型/ 元素/ ,/ 并/ 添加/ 必要/ 的/ 内部/ 位置/ 以/ 保证/ 测试/ 例/ 模型/ 的/ 连通性/ (/ 如图/ 9/ 中/ 的/ sn/ 位置/ )/ ./ 作为/ 典型/ 示例/ ,/ 图/ 9/ 分别/ 给出/ 了/ 将/ tp8/ 对应/ 的/ CT/ -/ CPNTP/ 和表/ 2/ 中/ 的/ L/ _/ receive/ 及/ l/ _/ havepk/ 模块/ 执行/ 同步/ 模拟/ ,/ 以及/ 将/ tp9/ 对应/ 的/ CT/ -/ CPNTP/ 和表/ 2/ 中/ 的/ L/ _/ receive/ 及/ l/ _/ havepk/ 模块/ 执行/ 同步/ 模拟/ 所/ 生成/ 的/ 两个/ CT/ -/ CPNTC/ 测试/ 例/ 模型/ ./ 可以/ 看到/ ,/ 基于/ CT/ -/ CPN/ 模型/ 的/ 测试/ 例以/ 外部/ 可/ 观察/ 的/ 输入输出/ 为/ 驱动/ 清晰/ 描述/ 了/ 具体/ 测试步骤/ ,/ 以/ 实际/ 测试数据/ 为/ 依据/ 准确/ 描述/ 了/ 预期/ 测试/ 结果/ ,/ 这样/ 不但/ 充分保证/ 了/ 测试/ 例/ 的/ 可执行性/ ,/ 并且/ 使/ 测试/ 例/ 模型/ 能够/ 直观/ 、/ 有效/ 地/ 指导/ 实际/ 测试/ 的/ 执行/ 过程/ ./ 步骤/ 4/ ./ 实际/ 执行/ 生成/ 的/ 各/ 测试/ 例/ ,/ 判定/ DCP2ND/ 软件系统/ 与其/ CT/ -/ CPNS/ 层次模型/ 的/ 功能/ 描述/ 是否/ 一致/ ,/ 发现/ 了/ 软件/ 实现/ 中/ 的/ 不同/ 错误/ ,/ 如位/ 图/ 信息/ 解析/ 错误/ 导致/ 的/ 无法/ 正确/ 请求/ 片段/ 数据/ 、/ 没有/ 执行/ 最少/ 优先/ 片段/ 算法/ 、/ 无法/ 向/ 同一/ 下载者/ 结点/ 请求/ 关联/ 片段/ 等/ ./ 在/ 实际/ 测试/ 过程/ 中/ ,/ 对/ 执行/ 失败/ 的/ 测试/ 例/ ,/ 首先/ 要/ 定位/ 产生/ fail/ 结果/ 的/ 变迁/ 元素/ ,/ 以此/ 确定/ 被测/ 实现/ 是/ 在/ 执行/ 什么/ 操作/ 或/ 行为/ 时/ 产生/ 错误/ ,/ 同时/ ,/ 结合/ 该/ 变迁/ 点火/ 时/ 绑定/ 元素/ 中/ 的/ 具体/ 数据/ ,/ 进一步/ 分析/ 是/ 怎样/ 的/ 数据/ 错误/ 引发/ 相关/ 功能/ 失效/ ./ 将/ 被/ 测/ 实现/ 中/ 存在/ 的/ 错误/ 改正/ 后/ ,/ 需要/ 重新/ 执行/ 对应/ 的/ 测试/ 例/ ,/ 直至/ 测试/ 执行/ 的/ 结果/ 为/ 通过/ ,/ 且/ 覆盖/ 了/ 测试/ 目的/ ./ 此时/ ,/ 可/ 判定/ 在/ 测试/ 例所/ 覆盖/ 的/ 软件/ 功能/ 范围/ 内/ ,/ 被测/ 软件/ 实现/ 与/ 软件/ 功能/ 说明/ (/ 即该/ 软件系统/ 的/ CT/ -/ CPNs/ 模型/ )/ 是/ 一致/ 的/ ./ 分析/ 对/ DCP2ND/ 软件系统/ 的/ 实际/ 测试/ 生成/ 与/ 执行/ 实践/ 可知/ ,/ 对/ DCP2ND/ 这样/ 规模/ 较大/ 的/ 软件/ 执行/ 模型/ 驱动/ 的/ 一致性/ 测试/ 时/ ,/ 传统/ 基于/ 模型/ 状态/ 空间/ 遍历/ 或/ 基于/ 模型/ 同步/ 积/ 的/ 测试/ 生成/ 方法/ 都/ 会/ 因为/ 模型/ 过大而/ 无法/ 实际操作/ ./ 但/ PN4TS/ 方法/ 是/ 通过/ CT/ -/ CPN/ 模型/ 间/ 的/ 同步/ 模拟/ 执行/ 来/ 生成/ 测试/ 例/ ,/ 并/ 不/ 受控/ 于/ 系统/ 模型/ 的/ 规模/ 大小/ ,/ 因此/ ,/ 可以/ 有效/ 实施/ 于/ 较/ 大规模/ 的/ 软件/ 一致性/ 测试/ 应用/ ./ 6.3/ PN4TS/ 方法/ 的/ 实际/ 应用/ 方式/ PN4TS/ 方法/ 主要/ 用于/ 网络/ 环境/ 中/ 具有/ 多/ 交互/ 、/ 高/ 并发/ 特性/ 的/ 软件系统/ 的/ IOCO/ 一致性/ 测试/ 实践/ ,/ 在/ 切实/ 保证/ 测试/ 例可/ 执行/ 的/ 基础/ 上/ ,/ 能够/ 很/ 好/ 地/ 支持/ 较/ 大规模/ 网络软件/ 的/ 一致性/ 测试/ 应用/ ./ 总结/ 上述/ 两个/ 实例/ 测试/ 过程/ 可知/ ,/ PN4TS/ 方法/ 的/ 实际/ 应用/ 过程/ 可/ 概述/ 为/ 4/ 个/ 步骤/ :/ 首先/ ,/ 为/ 被/ 测/ 软件系统/ 构建/ 描述/ 其/ 功能/ 行为/ 且/ 考虑/ 了/ 一致性/ 测试/ 实际/ 需求/ 的/ CT/ -/ CPNS/ 层次模型/ ,/ 充分利用/ CPN/ 模型/ 分析/ 与/ 动态/ 模拟/ 执行/ 等/ 技术/ 确认/ 该/ 层次模型/ 的/ 描述/ 正确性/ ./ Page11/ 接着/ ,/ 以/ 构建/ 好/ 的/ CT/ -/ CPNS/ 层次模型/ 为/ 基础/ ,/ 为/ 不同/ 的/ 测试/ 目的/ 构建/ 各自/ 对应/ 的/ CT/ -/ CPNTP/ 模型/ ,/ 来/ 描述/ 希望/ 被/ 实际/ 测试/ 的/ 部分/ 软件/ 功能/ 行为/ ./ 之后/ ,/ 应用/ 本文/ PN4TS/ 方法/ 给出/ 的/ 3/ 个/ 测试/ 选择/ 生成/ 的/ 核心/ 规则/ ,/ 即/ 分别/ 针对/ 模型/ 中/ 输入/ 变迁/ 、/ 输出/ 变迁/ 和/ 内部/ 变迁/ 的/ 测试/ 生成/ 规则/ ,/ 将/ CT/ -/ CPNS/ 层次模型/ 与/ 每图/ 9DCP2ND/ 软件/ 一致性/ 测试/ 使用/ 的/ CT/ -/ CPNTC/ 模型/ 实例/ 7/ 结论/ 文中/ 将/ IOCO/ 测试/ 理论/ 与/ CPN/ 建模/ 进行/ 优势/ 融合/ ,/ 提出/ 了/ PN4TS/ 方法/ ,/ 基于/ 描述/ 软件/ 功能/ 和/ 描述/ 测试/ 目的/ 的/ CT/ -/ CPN/ 模型/ 的/ 同步/ 模拟/ 执行/ ,/ 生成/ 可/ 执行/ 的/ 测试用例/ ,/ 实现/ 了/ 测试/ 目的/ 驱动/ 的/ IOCO/ 测试/ 选择/ ,/ 并/ 证明/ 了/ 测试/ 生成/ 的/ 可靠性/ 及其/ 对/ 测试/ 目的/ 的/ 覆盖/ 完备/ 性/ ./ 通过/ 对/ 简单/ 的/ SFTP/ 系统/ 和/ 较/ 大规模/ 的/ DCP2ND/ 软件/ 的/ 实际/ 测试/ 生成/ 与/ 测试/ 执行/ 实践/ ,/ 验证/ 了/ PN4TS/ 方法/ 的/ 可用性/ 及/ 有效性/ ./ PN4TS/ 方法/ 为/ 基于/ Petri/ 网/ 模型/ 的/ 一致性/ 测试/ 研究/ 提供/ 了/ 一种/ 新/ 的/ 思路/ 与/ 解决方案/ ,/ 其/ 优势/ 主要/ 体现/ 在/ :/ 首先/ ,/ 利用/ CT/ -/ CPN/ 模型/ 的/ 动态/ 模拟/ 技术/ 生成/ 测试/ 例/ ,/ 充分考虑/ 了/ 功能/ 行为/ 控制流/ 和/ 数据流/ 的/ 协同/ 执行/ ,/ 以/ 实际/ 数据/ 驱动/ 测试/ 选择/ ,/ 保证/ 了/ 所/ 生成/ 测试/ 例是/ 实际/ 可执行性/ 的/ ,/ 且/ 测试/ 例/ 模型/ 中/ 添加/ 的/ 测试/ 结果/ 指示/ 和/ 判定/ 单元/ 由/ 具体/ 数据/ 描述/ ,/ 可/ 作为/ 一种/ TestOracle/ 标准/ ,/ 为/ 测试/ 执行/ 人员/ 提供/ 准确/ 、/ 直观/ 的/ 测试/ 结果/ 判定/ 依据/ ./ 其次/ ,/ PN/ -/ IOCO/ 一致性/ 关系/ 要求/ 只有/ 实际/ 观察/ 的/ 测试/ 输出/ 与/ 预定/ 义/ 的/ 测试/ 输出/ 相同/ 时/ ,/ 才/ 会/ 判定/ 被测/ 软件/ 一致/ 于/ 软件/ 功能/ 模型/ ,/ 与/ 基本/ IOCO/ 定义/ 相比/ ,/ 加强/ 了/ 对/ 那些/ 行为/ 正确/ 但/ 功能/ 不/ 完整/ 的/ 缺陷/ 软件/ 的/ 检测/ 能力/ ./ 最后/ ,/ 当/ 软件/ 功能/ 模型/ 较大/ 时/ ,/ 基于/ 遍历/ 模型/ 状态/ 空间/ 来/ 生成/ 一个/ CT/ -/ CPNTP/ 模型/ 执行/ 同步/ 模拟/ ,/ 生成/ 覆盖/ 各个/ 测试/ 目的/ 的/ 多个/ CT/ -/ CPNTC/ 测试/ 例/ 模型/ ./ 最后/ ,/ 以/ 生成/ 的/ 测试/ 例/ 模型/ 为/ 指导/ 完成/ 测试/ 执行/ ,/ 利用/ 模型/ 中/ 的/ TestOracle/ 测试/ 判定/ 单元/ 描述/ ,/ 判定/ 被测/ 软件/ 实现/ 是否/ 与其/ 对应/ 的/ CT/ -/ CPNS/ 层次模型/ 的/ 功能/ 描述/ 一致/ ,/ 来/ 发现/ 软件/ 实现/ 中/ 的/ 不同/ 错误/ 和/ 缺陷/ ./ 测试/ 例/ 的/ 方法/ 由于/ 状态/ 爆炸/ 往往/ 难以/ 实施/ ,/ 同时/ ,/ IOCO/ 测试/ 理论/ 中/ 提出/ 的/ 基于/ LTS/ 模型/ 同步/ 积/ 的/ 测试/ 例/ 选择/ 方法/ ,/ 也/ 会/ 因为/ 模型/ 过大而/ 无法/ 执行/ 同步/ 积/ 操作/ ,/ 但是/ ,/ 本文/ 基于/ CT/ -/ CPN/ 模型/ 间/ 同步/ 模拟/ 执行/ 的/ 选择性/ 测试/ 生成/ 方法/ ,/ 并/ 不/ 受控/ 于/ 系统/ 模型/ 的/ 规模/ 大小/ ,/ 具备/ 更强/ 的/ 可用性/ ,/ 能够/ 有效/ 处理/ 较/ 大规模/ 软件/ 的/ 一致性/ 测试/ 应用/ ./ 

